/*!
 * cdp.core.js 2.1.0
 *
 * Date: 2018-01-25T06:25:09.533Z
 */
(function(root,factory){if(typeof define==="function"&&define.amd){define(function(){return factory(root.CDP||(root.CDP={}))})}else if(typeof exports==="object"){module.exports=factory(root.CDP||(root.CDP={}))}else{factory(root.CDP||(root.CDP={}))}})((this||0).self||global,function(CDP){var CDP;(function(CDP){var TAG="[CDP] ";CDP.global=Function("return this")();CDP.webRoot=function(){if(CDP.global.location){var baseUrl=/(.+\/)[^/]*#[^/]+/.exec(CDP.global.location.href);if(!baseUrl){baseUrl=/(.+\/)/.exec(CDP.global.location.href)}return baseUrl[1]}}();function toUrl(path){var root=CDP.webRoot||"";if(null!=path&&null!=path[0]){if("/"===path[0]){return root+path.slice(1)}else{return root+path}}else{return root}}CDP.toUrl=toUrl;CDP.Config=CDP.Config||CDP.global.Config||{};function initialize(options){setTimeout(function(){try{CDP.Patch.apply();if(options&&typeof options.success==="function"){options.success()}}catch(error){var cause=CDP.ensureErrorInfo(error);var errorInfo=CDP.makeErrorInfo(CDP.RESULT_CODE.ERROR_CDP_INITIALIZE_FAILED,TAG,cause.message,cause);console.error(errorInfo.message);if(options&&typeof options.fail==="function"){options.fail(errorInfo)}}})}CDP.initialize=initialize})(CDP||(CDP={}));var CDP;(function(CDP){var TAG="[CDP.Patch] ";var Patch=function(){function Patch(){}Patch.apply=function(){Patch.consolePatch();Patch.nodePatch()};Patch.consolePatch=function(){if(null==CDP.global.console||null==CDP.global.console.error){CDP.global.console={count:function(){},groupEnd:function(){},time:function(){},timeEnd:function(){},trace:function(){},group:function(){},dirxml:function(){},debug:function(){},groupCollapsed:function(){},select:function(){},info:function(){},profile:function(){},assert:function(){},msIsIndependentlyComposed:function(){},clear:function(){},dir:function(){},warn:function(){},error:function(){},log:function(){},profileEnd:function(){}}}};Patch.nodePatch=function(){if("object"===typeof MSApp){var _MSApp_1=MSApp;var originalAppendChild_1=Node.prototype.appendChild;Node.prototype.appendChild=function(node){var self=this;return _MSApp_1.execUnsafeLocalFunction(function(){return originalAppendChild_1.call(self,node)})};var originalInsertBefore_1=Node.prototype.insertBefore;Node.prototype.insertBefore=function(newElement,referenceElement){var self=this;return _MSApp_1.execUnsafeLocalFunction(function(){return originalInsertBefore_1.call(self,newElement,referenceElement)})}}};return Patch}();CDP.Patch=Patch})(CDP||(CDP={}));var __assign=this&&this.__assign||Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++){s=arguments[i];for(var p in s)if(Object.prototype.hasOwnProperty.call(s,p))t[p]=s[p]}return t};var CDP;(function(CDP){var UNKNOWN_ERROR_NAME="Unknown Error";var ERROR_NAME_SEPARATOR=": ";var CANCELED_MESSAGE="abort";var s_code2message={0:"operation succeeded.",1:"operation canceled.","-1":"operation failed."};var RESULT_CODE;(function(RESULT_CODE){RESULT_CODE[RESULT_CODE["SUCCEEDED"]=0]="SUCCEEDED";RESULT_CODE[RESULT_CODE["CANCELED"]=1]="CANCELED";RESULT_CODE[RESULT_CODE["FAILED"]=-1]="FAILED"})(RESULT_CODE=CDP.RESULT_CODE||(CDP.RESULT_CODE={}));CDP.MODULE_RESULT_CODE_RANGE=1e3;function makeErrorInfo(resultCode,tag,message,cause){var canceled=cause&&CANCELED_MESSAGE===cause.message?true:false;var msg=canceled?CANCELED_MESSAGE:message;var code=canceled?RESULT_CODE.CANCELED:resultCode;var errorInfo=new Error(msg||messageFromResultCode(code));errorInfo.name=buildErrorName(code,tag);errorInfo.code=code;errorInfo.cause=cause;return errorInfo}CDP.makeErrorInfo=makeErrorInfo;function makeCanceledErrorInfo(tag,cause){return makeErrorInfo(RESULT_CODE.CANCELED,tag,CANCELED_MESSAGE,cause)}CDP.makeCanceledErrorInfo=makeCanceledErrorInfo;
/**
     * @es Judge the error is canceled.
     * @ja エラー情報がキャンセルされたものか判定
     *
     * @example <br>
     *
     * ```ts
     *  :
     *  .catch((reason: ErrorInfo) => {
     *      if (!isCanceledError(reason)) {
     *          handleErrorInfo(reason);
     *      }
     *   });
     *  :
     * ```
     *
     * @param error
     * @returns
     *  - `en` true: canceled error / false: others
     *  - `ja` true: キャンセル / false: その他エラー
     */function isCanceledError(error){if("string"===typeof error){return CANCELED_MESSAGE===error}else{var errorInfo=error;if(errorInfo){if(RESULT_CODE.CANCELED===errorInfo.code||CANCELED_MESSAGE===errorInfo.message){return true}}}return false}CDP.isCanceledError=isCanceledError;function ensureErrorInfo(cause){var unknown={name:UNKNOWN_ERROR_NAME+ERROR_NAME_SEPARATOR,code:RESULT_CODE.FAILED,message:"unknown error occured."};var valid=function(error){if(!error){return false}return"number"===typeof error.code&&"string"===typeof error.name&&"string"===typeof error.message};if(valid(cause)){return cause}else if(cause instanceof Error){cause.code=RESULT_CODE.FAILED;return cause}else if("string"===typeof cause){if(isCanceledError(cause)){return makeCanceledErrorInfo()}else{return __assign({},unknown,{message:cause})}}else if("number"===typeof cause){return __assign({},unknown,{cause:{name:UNKNOWN_ERROR_NAME+ERROR_NAME_SEPARATOR,message:"Please check the error code.",code:cause}})}else if("object"===typeof cause){return __assign({},unknown,cause)}return unknown}CDP.ensureErrorInfo=ensureErrorInfo;CDP._MODULE_RESULT_CODE_RANGE_CDP=100;var RESULT_CODE_BASE;(function(RESULT_CODE_BASE){RESULT_CODE_BASE[RESULT_CODE_BASE["CDP_DECLARERATION"]=0]="CDP_DECLARERATION";RESULT_CODE_BASE[RESULT_CODE_BASE["CDP"]=1*CDP._MODULE_RESULT_CODE_RANGE_CDP]="CDP"})(RESULT_CODE_BASE=CDP.RESULT_CODE_BASE||(CDP.RESULT_CODE_BASE={}));function DECLARE_SUCCESS_CODE(base,localCode,message){if("string"===typeof base){base=CDP.RESULT_CODE_BASE[base]}return declareResultCode(base,localCode,message,true)}CDP.DECLARE_SUCCESS_CODE=DECLARE_SUCCESS_CODE;function DECLARE_ERROR_CODE(base,localCode,message){if("string"===typeof base){base=CDP.RESULT_CODE_BASE[base]}return declareResultCode(base,localCode,message,false)}CDP.DECLARE_ERROR_CODE=DECLARE_ERROR_CODE;function SUCCEEDED(code){return 0<=code}CDP.SUCCEEDED=SUCCEEDED;function FAILED(code){return code<0}CDP.FAILED=FAILED;function ASSIGN_RESULT_CODE_BASE(resultCodeBase){CDP.RESULT_CODE_BASE=__assign({},CDP.RESULT_CODE_BASE,resultCodeBase)}CDP.ASSIGN_RESULT_CODE_BASE=ASSIGN_RESULT_CODE_BASE;function ASSIGN_RESULT_CODE(resultCode){CDP.RESULT_CODE=__assign({},CDP.RESULT_CODE,resultCode)}CDP.ASSIGN_RESULT_CODE=ASSIGN_RESULT_CODE;var FUNCTION_CODE_RANGE=10;var LOCAL_CODE_BASE;(function(LOCAL_CODE_BASE){LOCAL_CODE_BASE[LOCAL_CODE_BASE["CORE"]=0]="CORE";LOCAL_CODE_BASE[LOCAL_CODE_BASE["PATCH"]=1*FUNCTION_CODE_RANGE]="PATCH"})(LOCAL_CODE_BASE||(LOCAL_CODE_BASE={}));(function(RESULT_CODE){RESULT_CODE[RESULT_CODE["ERROR_CDP_DECLARATION_CDP"]=0]="ERROR_CDP_DECLARATION_CDP";RESULT_CODE[RESULT_CODE["ERROR_CDP_INITIALIZE_FAILED"]=DECLARE_ERROR_CODE(RESULT_CODE_BASE.CDP,LOCAL_CODE_BASE.CORE+1,"initialized failed.")]="ERROR_CDP_INITIALIZE_FAILED"})(RESULT_CODE=CDP.RESULT_CODE||(CDP.RESULT_CODE={}));function declareResultCode(base,moduleCode,message,succeeded){if(succeeded===void 0){succeeded=false}if(moduleCode<=0||CDP.MODULE_RESULT_CODE_RANGE<=moduleCode){console.error("declareResultCode(), invalid localCode range. [localCode: "+moduleCode+"]");return}var signed=succeeded?1:-1;var resultCode=signed*(base+moduleCode);s_code2message[resultCode]=message?message:"[RESULT_CODE: "+resultCode+"]";return resultCode}function messageFromResultCode(resultCode){if(s_code2message[resultCode]){return s_code2message[resultCode]}else{return"unregistered result code. [RESULT_CODE: "+resultCode+"]"}}function buildErrorName(resultCode,tag){var prefix=tag||"";if(CDP.RESULT_CODE[resultCode]){return prefix+CDP.RESULT_CODE[resultCode]+ERROR_NAME_SEPARATOR}else{return prefix+UNKNOWN_ERROR_NAME+ERROR_NAME_SEPARATOR}}})(CDP||(CDP={}));return CDP});
//# sourceMappingURL=cdp.core.min.js.map