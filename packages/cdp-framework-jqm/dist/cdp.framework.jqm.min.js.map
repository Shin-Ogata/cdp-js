{"version":3,"sources":["dist/cdp.framework.jqm.js"],"names":["webpackUniversalModuleDefinition","root","factory","exports","module","require","define","amd","window","__WEBPACK_EXTERNAL_MODULE_backbone__","__WEBPACK_EXTERNAL_MODULE_cdp_i18n__","__WEBPACK_EXTERNAL_MODULE_jquery__","modules","webpackJsonpCallback","data","chunkIds","moreModules","moduleId","chunkId","i","resolves","length","installedChunks","push","Object","prototype","hasOwnProperty","call","parentJsonpFunction","shift","installedModules","index","__webpack_require__","l","m","c","d","name","getter","o","defineProperty","configurable","enumerable","get","r","value","n","__esModule","getDefault","getModuleExports","object","property","p","oe","err","console","error","jsonpArray","oldJsonpFunction","bind","slice","s","./built/cdp.framework.jqm-lib.js","__WEBPACK_AMD_DEFINE_ARRAY__","__WEBPACK_AMD_DEFINE_RESULT__","CDP","apply","undefined","this","Framework","Model","Backbone","Collection","View","Events","RESULT_CODE_BASE","_MODULE_RESULT_CODE_RANGE_CDP","FUNCTION_CODE_RANGE","LOCAL_CODE_BASE","RESULT_CODE","DECLARE_ERROR_CODE","CDP_FRAMEWORK","CORE_API","ROUTER","Platform","ua","navigator","userAgent","toLowerCase","majorVersion","browser","version","match","RegExp","parseInt","ltIE6","addEventListener","document","documentElement","style","maxHeight","ltIE7","querySelectorAll","ltIE8","getElementsByClassName","ltIE9","uniqueID","matchMedia","gtIE10","Trident","Gecko","Presto","global","opera","Blink","chrome","Webkit","Touch","ontouchstart","Mobile","orientation","indexOf","ltAd4_4","EventSource","Pointer","pointerEnabled","MSPoniter","msPointerEnabled","Android","iOS","_vclickPatch","jquery_on","$","fn","on","jquery_off","off","custom_on","types","selector","one","replace","_","custom_off","_apply_jqm_popup_createPrerequisites","_safeCreatePrerequisites","screenPrerequisite","containerPrerequisite","whenDone","prerequisites","self","screen","Deferred","container","done","_prerequisites","when","$mobile","mobile","widgets","popup","_createPrerequisites","_apply_jqm_popup_handleWindowResize","_safeHandleWindowResize","_isOpen","_ignoreResizeTo","_expectResizeEvent","_orientationchangeInProgress","_ui","hasClass","is","addClass","removeAttr","_handleWindowResize","_mobilePopupPatch","jqueryMajor","jquery","split","jqmVersion","jqmMajor","jqmMiner","Patch","applyBeforeInit","isSupportedVclick","s_vclickEvent","applyAfterInit","Orientation","getOrientation","$window","width","height","PORTRAIT","LANDSCAPE","Promise","waitForDeviceReady","resolve","setTimeout","cordova","exec","_defaultBackButtonHandler","setBackButtonHandler","handler","oldHandler","then","event","TAG","_dfInitialize","initialize","options","state","promise","success","config","getConfig","applyPatch","applyJQueryConfig","applyJQueryMobileConfig","initializeI18N","i18n","always","info","showLoadMsg","target","localize","Router","_initialize","anchorVclick","firstPageTransition","reject","makeErrorInfo","ERROR_CDP_FRAMEWORK_ROUTER_INITIALIZE_FAILED","warn","__WEBPACK_AMD_REQUIRE_ARRAY__","catch","fail","ERROR_CDP_FRAMEWORK_INITIALIZE_FAILED","isInitialized","waitForInitialize","_orientationListenerHolder","registerOrientationChangedListener","key","listener","unregisterOrientationChangedListener","_activePage","_setupEventHandlers","oldBackButtonHandler","baseBackButtonHandler","onHardwareBackButton","oldRouteChangeHandler","setBeforeRouteChangeHandler","baseRouteChangeHandler","onBeforeRouteChange","_lastOrientation","_setActivePage","page","getDefaultClickEvent","_pageConstructors","_pageInstances","registerPage","ctor","constructPages","forEach","disposePages","defConfig","ajaxSetup","cache","migrateMute","jquerymobile","allowCrossDomainPages","defaultPageTransition","defaultDialogTransition","hashListeningEnabled","pushStateEnabled","transitionHandler","defaultHandler","sequential","simultaneous","fallbackResources","_this","keys","loader","text","$mobile_1","defaultTransitionHandler","transitionHandlers","transition","extend","Config","newOrientation","onOrientationChanged","toUrl","path","makeUrlAbsolute","getCurrentDocumentUrl","$activePage","pagecontainer","documentBase","hrefNoHash","base","url","activePage","closest","jqmData","isPath","_beforeRouteChange","_defaultBeforeRouteChange","$body","s_router","s_initOptions","s_defaultInitOptions","s_firstChangePage","s_loadUrl","history","loadUrl","customLoadUrl","onRouteSucceeded","s_back","back","customJqmBack","changePage","to","opt","bindEvents","register","route","top","callback","restart","stop","context","regexp","_routeToRegExp","pushContext","start","silent","pageConstruct","prevState","History","started","isRouting","navigate","reverse","s_lastNavigateInfo","inNavigation","initFirstPageIfNeeded","navOptions","s_defaultNavigateOptions","notifyBeforeRouteChange","calledBeforeRouteChange","backDestination","noHashChange","intent","positiveNavigate","subFlow","operation","startSubFlow","finishSubFlow","result","fragment_1","getFragment","find","s_rootContexts","ctx","test","findWhere","navigateFromTop","stack","_getJqmHistory","currentPage","activeIndex","_transition","_reverse","destStacks","Array","SUBFLOW_PARAM","destBase","hash","additionalDistance","isTopPage","app","exitApp","_pushIntent","s_lastIntent","_popIntent","getQueryParameters","params","beginSubFlow","commitSubFlow","cancelSubFlow","baseInfo","detectSubFlowBaseInfo","subFlowParam","isInSubFlow","has","some","fromHashChanged","registerPageStack","pageStack","withNavigate","newStacks","failed","makeStack","fragment","pathToJqmDataUrl","pageUrl","title","silentLength","finalIndex","clearForward","location","handled","onRouteFailed","onAnchorVclicked","active","getActive","BACK_DESTINATION_URL","autoInitializePage","toPage","initializePage","parseUrl","href","isJustBeforeVclicked","preventDefault","followAnchor","$target","currentTarget","attr","direction","backDst","DATA_BACK_DESTINATION","DATA_NO_HASH_CHANGE","noHrefHandle","DATA_NO_VCLICK_HANDLE","needDefaultOperation","isBackButtonClicked","canResolveRoute","any","handlers","isBefore","Date","now","s_lastClickedTime","DELAY_TIME","args","_i","arguments","queryParams","inAdditionalBack","decideDirection","additional","detectAdditionalBackDistance","go","subFlowInfo","isCurrent","previousIndex","treatUrlHistory","pageTransition","allowSamePageTransition","fromHashChange","changeHash","convertUrlToDataUrl","direct","present","newPage","missing","historyActiveIndex","distance","jqmDataUrl","param","fragment_2","retry","NAVIGATE_INTERVAL","MAX_RETRY_COUNT","_navigate","dataUrl","trigger","Page","_url","_id","setup","_$page","_$header","_$footer","_intent","set","newIntent","_update","_owner","onCommand","kind","onInitialize","onPageBeforeCreate","onPageInit","onPageBeforeShow","onPageShow","onPageBeforeHide","onPageHide","onPageRemove","_initialized","first","children","ev","pageInit","pageBeforeShow","pageShow","pageBeforeHide","pageHide","pageRemove","pageBeforeCreate","owner","_keepIntent","keepIntent","getDirection","prevIndex","./external/jquery/scripts/jquery-migrate.js","jQuery","migrateVersion","log","rbadVersions","migrateWarnings","warnedAbout","migrateTrace","migrateReset","migrateWarn","msg","trace","migrateWarnProp","obj","prop","newValue","migrateWarnFunc","newFunc","compatMode","oldInit","init","oldIsNumeric","isNumeric","oldFind","rattrHashTest","rattrHashGlob","arg1","querySelector","err1","op","err2","findProp","size","parseJSON","JSON","parse","val","isNumeric2","realStringObj","toString","isArray","parseFloat","oldValue","uniqueSort","expr","pseudos","oldAjax","ajax","jQXHR","oldRemoveAttr","oldToggleClass","toggleClass","rmatchNonSpace","each","bool","className","getAttribute","setAttribute","internalSwapCall","swap","oldHook","cssHooks","ret","elem","old","oldData","curData","hasData","sameKeys","camelCase","oldTweenRun","Tween","run","easing","oldEasing","percent","fx","interval","requestAnimationFrame","oldLoad","load","oldEventAdd","add","originalFix","fix","props","fixHooks","concat","originalEvent","type","fixHook","join","addProp","pop","_migrated_","filter","readyState","splice","triggerHandler","special","ready","unbind","delegate","undelegate","oldOffset","offset","docElem","origin","left","nodeType","ownerDocument","contains","oldParam","traditional","ajaxTraditional","ajaxSettings","oldSelf","andSelf","addBack","oldDeferred","tuples","Callbacks","func","deferred","pipe","fns","newDefer","tuple","isFunction","returned","progress","notify","./external/jquery/scripts/jquery.mobile.js","doc","uuid","runiqueId","ui","keyCode","BACKSPACE","COMMA","DELETE","DOWN","END","ENTER","ESCAPE","HOME","LEFT","PAGE_DOWN","PAGE_UP","PERIOD","RIGHT","SPACE","TAB","UP","focus","orig","delay","scrollParent","ie","css","parents","eq","uniqueId","id","removeUniqueId","focusable","element","isTabIndexNotNaN","map","mapName","img","nodeName","parentNode","visible","disabled","filters","createPseudo","dataName","isNaN","tabbable","tabIndex","isTabIndexNaN","outerWidth","side","innerWidth","innerHeight","outerHeight","reduce","border","margin","prevObject","removeData","support","selectstart","createElement","disableSelection","enableSelection","zIndex","position","parent","plugin","option","proto","plugins","instance","allowDisconnected","compensateToolbars","desiredHeight","pageParent","toolbarsAffectingHeight","noPadders","theElement","widgetOptions","toolbar","ns","updatePagePadding","externalHeaders","internalHeaders","externalFooters","internalFooters","toArray","Math","max","behaviors","silentScroll","ypos","defaultHomeScroll","scrollstart","enabled","scrollTo","x","y","getClosestBaseUrl","ele","dynamicBaseEnabled","removeActiveLinkClass","forceRemoval","activeClickedLink","activePageClass","removeClass","activeBtnClass","getInheritedTheme","el","defaultTheme","e","ltr","re","enhanceable","elements","haveParents","hijackable","ignoreContentEnabled","count","$newSet","$element","excluded","getScreenHeight","resetActivePageHeight","pageHeight","pageOuterHeight","loading","_widget","defaultHtml","returnValue","addDependents","newDependents","$elem","dependents","removeWithDependents","enhanceWithin","widgetElements","keepNative","keepNativeSelector","that","nojs","links","degradeInputsWithin","buttonMarkup","initSelector","not","jqmEnhanceable","fieldcontain","constructor","widgetName","getEncodedText","html","jqmHijackable","nativeElement","remove","matches","matchesSelector","node","subPageUrlKey","hideUrlBar","focusClass","ajaxEnabled","linkBindingEnabled","maxTransitionWidth","minScrollBack","pageLoadErrorMessage","pageLoadErrorMessageTheme","phonegapNavigationEnabled","hoverDelay","pageContainer","dialogHashKey","_cleanData","cleanData","elems","widget","fullName","existingConstructor","basePrototype","proxiedPrototype","namespace","Widget","_createWidget","_proto","_childConstructors","_super","_superApply","__super","__superApply","widgetEventPrefix","widgetFullName","child","childPrototype","bridge","input","inputIndex","inputLength","isPlainObject","isMethodCall","methodValue","charAt","pushStack","_init","defaultElement","create","eventNamespace","_getCreateOptions","bindings","hoverable","_on","destroy","defaultView","parentWindow","_create","_trigger","_getCreateEventData","noop","_destroy","parts","curOption","_setOptions","_setOption","enable","disable","suppressDisabledCheck","delegateElement","handlerProxy","guid","eventName","_off","_delay","_hoverable","mouseenter","mouseleave","_focusable","focusin","focusout","Event","isDefaultPrevented","show","hide","method","defaultEffect","effect","hasOptions","effectName","duration","isEmptyObject","complete","effects","queue","next","nsNormalizeDict","rbrace","jqmDataRE","nsNormalize","closestPageData","jqmRemoveData","extra","rcapitals","replaceFunction","loaderClass","$html","theme","textVisible","fakeFixLoader","activeBtn","scrollTop","checkLoaderPosition","screenHeight","proxy","resetHtml","msgText","textonly","message","loadSettings","appendTo","str_hashchange","fake_onhashchange","doc_mode","documentMode","supports_onhashchange","get_fragment","teardown","timeout_id","last_hash","fn_retval","history_set","history_get","poll","clearTimeout","history_hash","attachEvent","iframe","iframe_src","src","insertAfter","contentWindow","onpropertychange","propertyName","iframe_doc","domain","open","write","close","refNode","firstElementChild","firstChild","fakeBody","div","cssText","background","appendChild","q","innerHTML","insertBefore","offsetWidth","removeChild","media","touch","propExists","uc_prop","toUpperCase","substr","vendors","v","fbCSS","prependTo","webos","operamini","bb","blackberry","nokiaLTE7_3","inlineSVG","w","svg","createElementNS","createSVGRect","Image","onerror","onload","transform3dTest","mqProp","transforms","t","MozTransform","transform","append","getComputedStyle","getPropertyValue","baseTagTest","fauxBase","protocol","host","pathname","fauxEle","link","rebase","cssPointerEventsTest","supports","pointerEvents","boundingRect","getBoundingClientRect","oldIE","a","all","fixedPosition","platform","wkmatch","wkversion","ffmatch","ffversion","operammobilematch","omversion","pushState","search","mediaquery","cssPseudoElement","touchOverflow","cssTransform3d","boxShadow","dynamicBaseTag","cssPointerEvents","gradeA","ajaxBlacklist","WebKitPoint","$win","dummyFnToInitNavigate","beforenavigate","bound","originalEventName","isPushStateEnabled","isHashChangeEnabled","popstate","newEvent","beforeNavigate","historyState","hashchange","hashchangeState","$base","uiStateKey","urlParseRE","getLocation","parsedUrl","uri","doubleSlash","substring","getDocumentUrl","asParsedObject","documentUrl","parseLocation","hrefNoSearch","authority","username","password","hostname","port","directory","filename","makePathAbsolute","relPath","absPath","absStack","relStack","isSameDomain","absUrl1","absUrl2","isRelativeUrl","isAbsoluteUrl","relUrl","absUrl","relObj","absObj","hasPath","addSearchParams","u","isEmbeddedPage","decodeURIComponent","newPath","stripHash","clean","stripQueryParams","cleanHash","isHashValid","isExternal","hasProtocol","documentBaseDiffers","squash","resolutionUrl","cleanedUrl","stateIndex","docUrl","preservedHash","uiState","isPreservableHash","hashToSelector","hasHash","getFilePath","isFirstPageUrl","samePath","fp","firstPage","fpId","isPermittedCrossDomainRequest","reqUrl","getDocumentBase","getLast","getNext","getPrev","earlyReturn","entry","opts","newActiveIndex","forward","initialHref","Navigator","ignoreInitialHashChange","popstate.history","hashchange.history","replaceState","parsed","loc","resolved","noEvents","popstateEvent","isPopStateEvent","preventNextHashChange","preventHashAssignPopState","ignorePopState","stopImmediatePropagation","historyEntry","animation","testElement","vendorPrefixes","testName","j","prefix","cssTransitions","cssAnimations","animationComplete","fallbackTime","timer","eventBinding","animationType","defaultDuration","dataPropertyName","touchTargetPropertyName","virtualEventNames","touchEventProps","mouseHookProps","mouseHooks","mouseEventProps","activeDocHandlers","resetTimerID","startX","startY","didScroll","clickBlockList","blockMouseTriggers","blockTouchTriggers","eventCaptureSupported","$document","nextTouchID","lastTouchID","threshold","vmouse","moveDistanceThreshold","clickDistanceThreshold","resetTimerDuration","getNativeEvent","createVirtualEvent","eventType","ne","ct","len","which","touches","changedTouches","getVirtualBindingFlags","flags","b","k","hasVirtualBinding","getClosestElementWithVirtualBinding","enableTouchBindings","disableTouchBindings","enableMouseBindings","disableMouseBindings","startResetTimer","clearResetTimer","triggerVirtualEvent","ve","mouseEventCallback","touchID","isPropagationStopped","stopPropagation","isImmediatePropagationStopped","handleTouchStart","pageX","pageY","handleScroll","handleTouchMove","didCancel","moveThreshold","abs","handleTouchEnd","clientX","clientY","hasVirtualBindings","dummyMouseHandler","getSpecialEventObject","realType","$this","cnt","supportTouch","scrollEvent","touchStartEvent","touchStopEvent","touchMoveEvent","attrFn","triggerCustomEvent","bubble","originalType","dispatch","thisObject","scrolling","tap","tapholdThreshold","emitTapOnTaphold","isTaphold","origTarget","clearTapTimer","clearTapHandlers","clickHandler","swipe","scrollSupressionThreshold","durationThreshold","horizontalDistanceThreshold","verticalDistanceThreshold","winPageX","pageXOffset","winPageY","pageYOffset","floor","time","getTime","coords","handleSwipe","swipestart","swipestop","eventInProgress","events","emitted","move","scrollstop","taphold","swipeleft","swiperight","sourceEvent","throttledresize","throttle","curr","diff","lastCall","heldCall","win","event_name","get_orientation","last_orientation","initial_orientation_is_landscape","initial_orientation_is_default","portrait_map","0","180","ww","wh","landscape_threshold","-90","90","orientationchange","handleObj","old_handler","isPortrait","clientWidth","clientHeight","baseElement","linkSelector","rewrite","thisAttr","theLocation","thisUrl","reset","originalWidget","keepNativeFactoryDefault","domCache","keepNativeDefault","contentTheme","enhanced","_enhance","pagebeforehide","pagebeforeshow","dialog","attrPrefix","role","bindRemove","samePage","prEvent","_handlePageBeforeShow","setContainerBackground","removeContainerBackground","trim","globalValue","optionValue","newDefault","oldDefault","setLastScrollEnabled","pagechange","_disableRecordScroll","_enableRecordScroll","_afterContentChange","_recordScroll","_getActiveHistory","currentScroll","minScroll","defaultScroll","_getScroll","_getMinScroll","_getDefaultScroll","lastScroll","_delayedRecordScroll","_filterNavigateEvents","_getHash","_handleNavigate","getActivePage","_getInitialContent","_getHistory","_getDocumentBase","steps","change","_handleDestination","_transitionFromHistory","defaultTransition","_handleDialog","changePageOptions","activeContent","_changeContent","_getBase","_getNs","content","_include","settings","_find","fileUrl","_createFileUrl","_createDataUrl","initialContent","_getLoader","_showLoading","_loadMsg","_hideLoading","_showError","_parse","_setLoadedTitle","newPageTitle","$1","_isRewritableBaseTag","absoluteUrl","_triggerWithDeprecated","deprecatedEvent","_loadSuccess","triggerData","textStatus","xhr","pageElemRegex","dataUrlRegex","encodeURIComponent","prefetch","_loadDefaults","reloadPage","reload","loadMsgDelay","reloadOptionExtension","_findBaseWithDefault","pblEvent","prevPage","fromPage","contentType","dataType","_loadError","errorThrown","plfEvent","_getTransitionHandler","_maybeDegradeTransition","_triggerCssTransitionEvents","from","nextPage","_cssTransition","TransitionHandler","_releaseTransitionLock","isPageTransitioning","pageTransitionQueue","_removeActiveLinkClass","force","_loadUrl","_triggerPageBeforeChange","returnEvents","unshift","defaults","activeIsInitialPage","historyDir","pageTitle","isDialog","alreadyThere","cssTransitionDeferred","beforeTransition","activeElement","blur","encodeURI","$to","$from","alreadyFocused","duplicateCachedPage","focusPage","closestBase","navreadyDeferred","domreadyDeferred","loadDeferred","pageIsFullyLoaded","$lastVClicked","findClosestLink","loadPage","nav","backHistory","autofocus","_registerInternalEvents","getAjaxFormData","$form","calculateOnly","formData","vclickedName","serializeArray","form","$btn","btnEls","needClosest","outer","$link","httpCleanup","baseUrl","useDefaultUrlHandling","urls","inArray","Transition","toPreClass","cleanFrom","beforeDoneIn","beforeDoneOut","beforeStartOut","doneIn","toggleViewportClass","toScroll","scrollPage","doneOut","reverseClass","none","preventFocus","startIn","hideIn","startOut","maxTransitionOverride","getMaxScrollForTransition","SerialTransition","ConcurrentTransition","defaultGetMaxScrollForTransition","transitionFallbacks","flip","flow","slide","slidedown","slidefade","slideup","turn","degradeInputs","color","date","datetime","datetime-local","email","month","number","range","tel","week","optType","hasType","findstr","repstr","clone","replaceWith","closeBtn","closeBtnText","overlayTheme","corners","_inner","_headerCloseButton","_setCloseBtn","wrapInner","class","closeButtonLocation","closeButtonText","currentOpts","dst","btn","_isCloseable","_handlePageBeforeHide","_handleVClickSubmit","attrs","vclick","submit","click","hist","rInitialLetter","iconposClass","iconpos","expandCueText","collapseCueText","collapsed","heading","collapsedIcon","expandedIcon","inset","mini","accordion","collapsibleset","_renderedOptions","_getOptions","anchor","status","_handleExpandCollapse","accordionWidget","collapsible","_themeClassFromOption","iconclass","contentThemeClass","originalHeading","placeholder","detach","refresh","_applyOptions","isCollapsed","newTheme","oldTheme","hasCorners","hasIcon","isCollapse","expand","collapse","contents","unwrap","uiScreenHiddenRegex","noHiddenClass","addFirstLastClasses","_getVisibles","$els","visibles","_addFirstLastClasses","$visibles","end","last","_removeFirstLastClasses","childCollapsiblesSelector","_handleCollapsibleExpand","closestCollapsible","siblings","_classes","collapsibleexpand","_refresh","themeClass","collapsiblesInSet","grid","$kids","gridCols","solo","iterator","letter","$navbar","$navbtns","icon","classes","getAttr","countTheme","dividerTheme","splitIcon","splitTheme","shadow","listviewClasses","_findFirstElementByTagName","nextProp","lcName","ucName","dict","_addThumbClasses","containers","_getChildrenByTagName","results","nextSibling","_beforeListviewRefresh","_afterListviewRefresh","buttonClass","pos","numli","item","itemClass","itemTheme","itemIcon","isDivider","startCount","newStartCount","splittheme","splitThemeClass","spliticon","altButtonClass","li","$list","ol","itemClassDict","countBubbles","countThemeClass","empty","defaultAutodividersSelector","elt","listview","autodividers","autodividersSelector","_replaceDividers","lis","dividerText","lastDividerText","list","divider","createTextNode","rdivider","rhidden","hideDividers","items","idx","hideDivider","formReset","_handleFormReset","escapeId","wrapperClass","inheritAttr","dataAttr","label","isParent","_findLabel","inputtype","checkedClass","uncheckedClass","labelIsParent","vmouseover","vmousedown","parentLabel","labelsList","labels","getElementsByTagName","wrapAll","_wrapper","wrap","prepend","_handleInputFocus","_handleInputBlur","_handleInputVClick","_getInputSet","_updateAll","_handleLabelVMouseOver","_handleLabelVClick","_cacheVals","checked","formId","radio","radios","changeTriggered","checkboxradio","_reset","_hasIcon","controlgroup","controlgroupWidget","controlgroupConstructor","isChecked","addClasses","removeClasses","currentOptions","iconshadow","inline","wrapper","_button","iconClasses","_getIconClasses","originalElement","isDisabled","meta","disabledZoom","enabledZoom","disabledInitially","zoom","locked","lock","unlock","restore","preventFocusZoom","isSearch","isTextarea","tagName","isRange","inputNeedsWrap","_classesFromOptions","_autoCorrect","setOptions","elementClasses","_wrap","autocorrect","_handleBlur","_handleFocus","trackTheme","highlight","control","trackThemeClass","cornerClass","miniClass","cType","isToggleSwitch","isRangeslider","selectClass","controlID","$label","labelID","min","step","domHandle","handle","domSlider","slider","valuebg","bg","optionsCount","origTabIndex","activeClass","sliderImg","aria-valuemin","aria-valuemax","aria-valuenow","_value","aria-valuetext","aria-labelledby","dragging","beforeStart","userModified","mouseMoved","childNodes","_labels","keyup","vmouseup","_sliderVMouseDown","vmousemove","keydown","_setTheme","_setTrackTheme","_setCorners","_setMini","_setHighlight","_setDisabled","_controlChange","_controlKeyup","_controlBlur","_controlVMouseUp","_checkedRefresh","_handleVMouseDown","_handleKeydown","_keySliding","_handleKeyup","selectedIndex","_sliderVMouseUp","_preventDocumentDrag","isfromControl","preventInputUpdate","parentTheme","tol","pxStep","isInput","optionElements","newval","valModStep","alignValue","percentPerStep","handlePercent","aPercent","bPercent","valueChanged","round","toFixed","ab","currentTheme","currentTrackTheme","newTrackTheme","getPopup","popupEnabled","showValue","_currentValue","_popup","_popupVisible","_positionPopup","dstOffset","_showPopup","_hidePopup","onText","offText","flipswitch","_originalTabIndex","_left","_right","after","existingDirection","_toggle","_keydown","$el","elClass","_inputFirst","_inputLast","_label","_sliderWidgetFirst","_sliderWidgetLast","_sliderFirst","_sliderLast","firstHandle","_sliders","_targetVal","_sliderTarget","_proxy","slidebeforestart","slidestop","slidedrag","slidebeforechange","mousedown","_handleReset","_updateHighlight","_dragFirstHandle","_slidedrag","otherSlider","_slidestop","_slidebeforestart","_change","thisSlider","margin-left","textinput","clearBtn","clearBtnText","_addClearBtn","clearButton","_clearBtnClick","_clearBtn","_enhanceClear","_bindClearEvents","_toggleClear","cut","paste","_unbindClear","_destroyClear","_toggleClearClass","autogrow","keyupTimeoutBuffer","_autogrow","pageshow","popupbeforeposition","updatelayout","panelopen","_handleShow","_prepareHeightUpdate","_unbindAutogrow","keyupTimeout","_updateHeight","_timeout","paddingTop","paddingBottom","paddingHeight","scrollHeight","borderTop","borderBottom","borderHeight","min-height","max-height","hidePlaceholderMenuItems","closeText","nativeMenu","button","_focusButton","_selectOptions","select","_preExtension","selectId","buttonId","isMultiple","multiple","setButtonText","buttonCount","build","selected","selectedIndices","span","setButtonCount","_refreshButton","idref","fitSegmentInsideSegment","windowSize","segmentSize","desired","getWindowCoordinates","theWindow","scrollLeft","cx","cy","positionTo","tolerance","closeLinkSelector","closeLinkEvents","navigateEvents","closeEvents","dismissible","_handleDocumentVmousedown","theEvent","_ignoreResizeEvents","myId","_scrollTop","_page","_fallbackTransition","_currentTransition","_tolerance","_resizeData","prev","getElementById","_applyTransition","_setTolerance","focusElement","resize","createDocumentFragment","_eatEventAndClose","_resizeScreen","popupHeight","documentHeight","_handleWindowKeyUp","windowCoordinates","timeoutId","_resizeTimeout","reposition","_stopIgnoringResizeEvents","_handleWindowOrientationchange","_handleDocumentFocusIn","targetElement","_safelyBlur","newOptions","ar","String","_clampPopupWidth","infoOnly","menuSize","rectangle","rc","_calculateFinalLocation","clampInfo","_placementCoords","_animate","classToRemove","screenClassToAdd","applyTransition","containerClassToAdd","_desiredCoords","openOptions","pTo","_reposition","currentElement","_openPrerequisitesComplete","firstFocus","_open","androidBlacklist","androidmatch","andversion","chromematch","additionalCondition","_closePrerequisiteScreen","_closePrerequisiteContainer","_closePrerequisitesDone","_close","immediate","_unenhance","_closePopup","parsedDst","_myUrl","_bindContainerClose","hashkey","currentIsDialog","urlHistory","urlAltered","handleLink","unfocusableItemSelector","goToAdjacentItem","adjacent","selectmenu","_handleSelectFocus","_handleButtonVclickKeydown","isOpen","_decideFormat","menuType","popupId","dialogId","_handleListFocus","tabindex","_handleListKeydown","_handleMenuPageHide","_delayedTrigger","thisPage","_handleHeaderCloseClick","_handleListItemClick","listItem","oldIndex","newIndex","_triggerChange","menuId","themeAttr","overlayThemeAttr","dividerThemeAttr","menuPage","listbox","header","headerTitle","menuPageContent","menuPageClose","headerClose","_origTabIndex","click li:not(.ui-disabled,.ui-state-disabled,.ui-li-divider)","pagehide","popupafterclose","_popupClosed","_isRebuildRequired","indices","_buildList","_focusMenuItem","selfListParent","menuHeight","btnOffset","popupafteropen","needPlaceholder","dataIcon","$options","numOptions","dataPrefix","dataIndexAttr","dataIconAttr","dataRoleAttr","dataPlaceholderAttr","isPlaceholderItem","optGroup","$option","optLabel","_removePlaceholderAttr","aria-haspopup","aria-owns","reverseBoolOptionMap","ui-shadow","ui-corner-all","ui-btn-inline","ui-shadow-icon","ui-mini","getAttrFixed","capitalLettersRE","optionsToClasses","existingClasses","classNameToOptions","unknownClass","alreadyEnhanced","noIcon","unknownClasses","camelCase2Hyphenated","overwriteClasses","retrievedOptions","optionKey","excludeInvisible","_childWidgets","_initialRefresh","groupLegend","childWrapper","callRefresh","els","buttons","addBackBtn","backBtnTheme","backBtnText","leftbtn","rightbtn","_updateBackButton","_addHeaderButtonClasses","_setRelative","_addHeadingClasses","_btnMarkup","headerAnchors","backButton","_backButton","attached","aria-level","visibleOnPageShow","disablePageZoom","fullscreen","tapToggle","tapToggleBlacklist","hideDuringFocus","trackPersistentToolbars","supportBlacklist","_makeFixed","_addTransitionClass","_bindPageEvents","_bindToggleHandlers","$page","tclass","webkitAnimationStart","animationstart","_handleAnimationStart","_handlePageShow","thisFooter","thisHeader","nextFooter","nextHeader","_visible","tbPage","_useTransition","notransition","scroll","elHeight","pHeight","viewportHeight","hideClass","outclass","toggle","delayShow","delayHide","isVisible","pageClasses","toolbarClasses","hasFixed","hasFullscreen","_workarounds","os","_bindScrollWorkaround","_bindListThumbWorkaround","_viewportOffset","viewportOffset","_triggerRedraw","ieHack","uiTemplate","getArrow","gd","arEls","arrow","_addArrow","_tryAnArrow","dir","best","desiredForArrow","tip","arFull","dimKey","guideDims","fst","arHalf","oDimKey","menuHalf","offsetFactor","contentBox","arrowOffsetFactor","snd","tipOffset","guideOffset","posProp","posVal","_getPlacementState","clamp","gdOffset","right","bottom","elOffset","bgRef","panel","panelOpen","panelClosed","panelFixed","panelInner","modal","modalOpen","pageWrapper","pageFixedToolbar","pageContentPrefix","animate","display","swipeClose","positionFixed","_closeLink","_parentPage","_modal","_panelInner","_fixedToolbars","parentPage","_openedPage","_getPage","_getPanelInner","_getFixedToolbars","_getWrapper","_addPanelClasses","_bindUpdateLayout","_bindCloseEvents","_bindLinkListeners","_createModal","_bindSwipeEvents","extFixedToolbars","intFixedToolbars","fixedToolbars","_getPosDisplayClasses","_getPanelClasses","panelClasses","_handleCloseClick","click a:jqmData(ajax='false')","_positionPanel","scrollToTop","panelInnerHeight","_unfixPanel","_fixPanel","_bindFixListener","_unbindFixListener","click a","_handleClick","panelId","area","_pageContentOpenClasses","_modalOpenClasses","_openPanel","panelclose","_closePanel","otherPanels","multiplePanels","table","headers","allHeaders","_setHeaders","trs","rebuild","columnCount","mode","columnBtnTheme","columnPopupTheme","columnBtnText","columnBtn","priorityPrefix","columnToggleTable","_menu","_addToggles","_enhanceColToggle","_setupEvents","_setToggleState","change input","menu","keep","inputs","checkboxIndex","cells","priority","_menuInputChange","evt","_unlockCells","menuButton","before","hiddenColumns","checkbox","reflowTable","cellLabels","_updateReflow","colstart","hierarchyClass","iteration","_addLabels","defaultFilterCallback","searchValue","filterReveal","filterCallback","_search","_timer","_setInput","_filterItems","_onKeyUp","lastval","_getFilterableItems","filterItems","_refreshChildWidget","recognizedWidgets","keypress","_onKeyDown","_preventKeyPress","_onKeyPress","refilter","replaceSetOptions","_syncTextInputOptions","rDividerListItem","origDefaultFilterCallback","filterable","filterPlaceholder","filterTheme","createHandlers","_setWidget","_handleCreate","_isSearchInternal","updatePlaceholder","textinputOpts","_refreshingChildWidget","textinputOptions","tabId","rhash","getNextTabId","isLocal","heightStyle","activate","beforeActivate","beforeLoad","running","_processTabs","_initialActive","unique","tabs","sort","anchors","_findActive","locationHash","tab","_getPanelForTab","_tabKeydown","focusedTab","goingForward","_handlePageNav","activating","_activate","_focusNextTab","ctrlKey","_panelKeydown","altKey","_findNextTab","lastTabIndex","constrain","_setupDisabled","_setupHeightStyle","_tabId","_sanitizeSelector","tablist","aria-selected","panels","aria-expanded","aria-hidden","_getList","anchorId","originalAriaControls","_createPanel","aria-controls","_eventHandler","clickedIsActive","collapsing","toShow","toHide","eventData","oldTab","oldPanel","newTab","newPanel","abort","_show","_hide","_getIndex","num","merge","_ajaxSettings","statusText","response","jqXHR","beforeSend","iosorientationfixEnabled","z","aig","checkTilt","accelerationIncludingGravity","hideRenderingClass","$pages","hashPage","backbone","cdp.i18n"],"mappings":";;;;;CAMA,SAAUA,iCAAiCC,KAAMC,SAC7C,UAAUC,UAAY,iBAAmBC,SAAW,SAChDA,OAAOD,QAAUD,QAAQG,QAAQ,YAAaA,QAAQ,YAAaA,QAAQ,gBAC1E,UAAUC,SAAW,YAAcA,OAAOC,IAC3CD,QAAQ,WAAY,WAAY,UAAWJ,cAC1C,UAAUC,UAAY,SACvBA,QAAQ,aAAeD,QAAQG,QAAQ,YAAaA,QAAQ,YAAaA,QAAQ,gBAEjFJ,KAAK,OAASA,KAAK,WAAcA,KAAK,OAAO,aAAeC,QAAQD,KAAK,YAAaA,KAAK,OAAQA,KAAK,YARhH,CASGO,OAAQ,SAASC,qCAAsCC,qCAAsCC,oCAChG,OAAgB,SAAUC,SAEb,SAASC,qBAAqBC,MAC1B,IAAIC,SAAWD,KAAK,GACpB,IAAIE,YAAcF,KAAK,GAIvB,IAAIG,SAAUC,QAASC,EAAI,EAAGC,YAC9B,KAAKD,EAAIJ,SAASM,OAAQF,IAAK,CAC3BD,QAAUH,SAASI,GACnB,GAAGG,gBAAgBJ,SAAU,CACzBE,SAASG,KAAKD,gBAAgBJ,SAAS,IAE3CI,gBAAgBJ,SAAW,EAE/B,IAAID,YAAYD,YAAa,CACzB,GAAGQ,OAAOC,UAAUC,eAAeC,KAAKX,YAAaC,UAAW,CAC5DL,QAAQK,UAAYD,YAAYC,WAGxC,GAAGW,oBAAqBA,oBAAoBd,MAC5C,MAAMM,SAASC,OAAQ,CACnBD,SAASS,OAATT,IAOR,IAAIU,oBAGJ,IAAIR,iBACAS,MAAS,GAMb,SAASC,oBAAoBf,UAGzB,GAAGa,iBAAiBb,UAAW,CAC3B,OAAOa,iBAAiBb,UAAUd,QAGtC,IAAIC,OAAS0B,iBAAiBb,WAC1BE,EAAGF,SACHgB,EAAG,MACH9B,YAIJS,QAAQK,UAAUU,KAAKvB,OAAOD,QAASC,OAAQA,OAAOD,QAAS6B,qBAG/D5B,OAAO6B,EAAI,KAGX,OAAO7B,OAAOD,QAKlB6B,oBAAoBE,EAAItB,QAGxBoB,oBAAoBG,EAAIL,iBAGxBE,oBAAoBI,EAAI,SAASjC,QAASkC,KAAMC,QAC5C,IAAIN,oBAAoBO,EAAEpC,QAASkC,MAAO,CACtCb,OAAOgB,eAAerC,QAASkC,MAC3BI,aAAc,MACdC,WAAY,KACZC,IAAKL,WAMjBN,oBAAoBY,EAAI,SAASzC,SAC7BqB,OAAOgB,eAAerC,QAAS,cAAgB0C,MAAO,QAI1Db,oBAAoBc,EAAI,SAAS1C,QAC7B,IAAIkC,OAASlC,QAAUA,OAAO2C,WAC1B,SAASC,aAAe,OAAO5C,OAAO,YACtC,SAAS6C,mBAAqB,OAAO7C,QACzC4B,oBAAoBI,EAAEE,OAAQ,IAAKA,QACnC,OAAOA,QAIXN,oBAAoBO,EAAI,SAASW,OAAQC,UAAY,OAAO3B,OAAOC,UAAUC,eAAeC,KAAKuB,OAAQC,WAGzGnB,oBAAoBoB,EAAI,GAGxBpB,oBAAoBqB,GAAK,SAASC,KAAOC,QAAQC,MAAMF,KAAM,MAAMA,KAEnE,IAAIG,WAAajD,OAAO,gBAAkBA,OAAO,oBACjD,IAAIkD,iBAAmBD,WAAWlC,KAAKoC,KAAKF,YAC5CA,WAAWlC,KAAOV,qBAClB4C,WAAaA,WAAWG,QACxB,IAAI,IAAIzC,EAAI,EAAGA,EAAIsC,WAAWpC,OAAQF,IAAKN,qBAAqB4C,WAAWtC,IAC3E,IAAIS,oBAAsB8B,iBAI1B,OAAO1B,oBAAoBA,oBAAoB6B,EAAI,oCAjHhD,EAsHVC,mCAKA,SAAU1D,OAAQD,QAAS6B,qBAEjC,IAAI+B,6BAA8BC,+BACjC,YAEA,SAAU/D,KAAMC,SAAW,GAAI,KAAM,GAAI6D,8BAAgC/B,oBAAoC,YAAaA,oBAAoC,aAAcgC,8BAAgC,WAAe,OAAO9D,QAAQD,KAAKgE,MAAQhE,KAAKgE,UAAeC,MAAM/D,QAAS4D,8BAC3QC,gCAAkCG,YAAc/D,OAAOD,QAAU6D,oCAAwC,IADzH,CAC8HI,KAAM,SAAUH,KAAOA,IAAII,UAAYJ,IAAII,cAEzK,IAAIJ,KACJ,SAAWA,KACP,IAAII,WACJ,SAAWA,WACPA,UAAUC,MAAQC,SAASD,MAC3BD,UAAUG,WAAaD,SAASC,WAChCH,UAAUI,KAAOF,SAASE,KAC1BJ,UAAUK,OAASH,SAASG,QAJhC,CAKGL,UAAYJ,IAAII,YAAcJ,IAAII,gBAPzC,CAQGJ,MAAQA,SACX,IAAIA,KACJ,SAAWA,KAEP,IAAIU,kBACJ,SAAWA,kBACPA,iBAAiBA,iBAAiB,+BAAiC,GAAK,8BACxEA,iBAAiBA,iBAAiB,iBAAmB,EAAIV,IAAIW,+BAAiC,iBAFlG,CAGGD,iBAAmBV,IAAIU,mBAAqBV,IAAIU,sBAGnD,IAAIE,oBAAsB,GAE1B,IAAIC,iBACJ,SAAWA,iBACPA,gBAAgBA,gBAAgB,YAAc,GAAK,WACnDA,gBAAgBA,gBAAgB,UAAY,EAAID,qBAAuB,SACvEC,gBAAgBA,gBAAgB,QAAU,EAAID,qBAAuB,QAHzE,CAIGC,kBAAoBA,qBAGvB,IAAIC,aACJ,SAAWA,aACPA,YAAYA,YAAY,mCAAqC,GAAK,kCAElEA,YAAYA,YAAY,yCAA2Cd,IAAIe,mBAAmBL,iBAAiBM,cAAeH,gBAAgBI,SAAW,EAAG,iCAAmC,wCAE3LH,YAAYA,YAAY,gDAAkDd,IAAIe,mBAAmBL,iBAAiBM,cAAeH,gBAAgBK,OAAS,EAAG,8BAAgC,gDALjM,CAMGJ,YAAcd,IAAIc,cAAgBd,IAAIc,kBA1B7C,CA4BGd,MAAQA,SAEX,IAAIA,KACJ,SAAWA,KACP,IAAII,WACJ,SAAWA,WAOPA,UAAUe,SAAW,WACjB,IAAIC,GAAKC,UAAUC,UAAUC,cAC7B,IAAIC,aAAe,SAAUC,SACzB,IAAIC,QAAUN,GAAGO,MAAM,IAAIC,OAAO,IAAMH,QAAU,mBAClD,IAAKC,SAAWA,QAAQtE,OAAS,EAAG,CAChC,OAAO,EAEX,OAAOyE,SAASH,QAAQ,GAAI,KAEhC,OACII,aAAcvF,OAAOwF,mBAAqB,oBAAsBC,SAASC,gBAAgBC,MAAMC,YAAc,YAC7GC,aAAc7F,OAAOwF,mBAAqB,oBAAsBC,SAASK,mBAAqB,YAC9FC,aAAc/F,OAAOwF,mBAAqB,oBAAsBC,SAASO,yBAA2B,YACpGC,MAAOR,SAASS,iBAAmBlG,OAAOmG,aAAe,YACzDC,OAAQX,SAASS,UAAYlG,OAAOmG,WACpCE,QAASZ,SAASS,SAClBI,MAAO,kBAAmBb,SAASC,gBAAgBC,MACnDY,OAAQ9C,IAAI+C,OAAOC,MACnBC,MAAOjD,IAAI+C,OAAOG,OAClBC,cAAenD,IAAI+C,OAAOG,SAAW,aAAe,qBAAsBlB,SAASC,gBAAgBC,MACnGkB,aAAcpD,IAAI+C,OAAOM,eAAiB,YAC1CC,cAAgBtD,IAAI+C,OAAOQ,cAAgB,aAAiBnC,GAAGoC,QAAQ,oBAAsB,EAC7FC,eAAgBzD,IAAI+C,OAAOQ,cAAgB,qBAAuBvD,IAAI+C,OAAOW,cAAgB,aAAe,GAAKlC,aAAa,WAC9HmC,QAAS3D,IAAI+C,OAAO1B,UAAUuC,eAC9BC,UAAW7D,IAAI+C,OAAO1B,UAAUyC,iBAChCC,QAAU3C,GAAGoC,QAAQ,cAAgB,EACrCQ,IAAM5C,GAAGoC,QAAQ,aAAe,GAAKpC,GAAGoC,QAAQ,WAAa,GAAKpC,GAAGoC,QAAQ,WAAa,GA1B7E,IAPzB,CAoCGpD,UAAYJ,IAAII,YAAcJ,IAAII,gBAtCzC,CAuCGJ,MAAQA,SAEX,IAAIA,KACJ,SAAWA,KACP,IAAII,WACJ,SAAWA,WAIP,IAAI6D,aAAe,WACf,IAAIC,UAAYC,EAAEC,GAAGC,GAAIC,WAAaH,EAAEC,GAAGG,IAC3C,IAAIC,UAAY,SAAUC,MAAOC,SAAU7H,KAAMuH,GAAiBO,KAC9D,UAAWF,QAAU,SAAU,CAC3BA,MAAQA,MAAMG,QAAQ,UAAW,SAErC,OAAOC,EAAEnF,KAAKwE,UAAW/D,KAAlB0E,CAAwBJ,MAAOC,SAAU7H,KAAMuH,GAAIO,MAE9D,IAAIG,WAAa,SAAUL,MAAOC,SAAUN,IACxC,UAAWK,QAAU,SAAU,CAC3BA,MAAQA,MAAMG,QAAQ,UAAW,SAErC,OAAOC,EAAEnF,KAAK4E,WAAYnE,KAAnB0E,CAAyBJ,MAAOC,SAAUN,KAGrDD,EAAEC,GAAGC,GAAKG,UACVL,EAAEC,GAAGG,IAAMO,YAQf,IAAIC,qCAAuC,WACvC,IAAIC,yBAA2B,SAAUC,mBAAoBC,sBAAuBC,UAChF,IAAIC,cACJ,IAAIC,KAAOlF,KACXiF,eACIE,OAAQnB,EAAEoB,WACVC,UAAWrB,EAAEoB,YAEjBH,cAAcE,OAAOG,KAAK,WACtB,GAAIL,gBAAkBC,KAAKK,eAAgB,CACvCT,wBAGRG,cAAcI,UAAUC,KAAK,WACzB,GAAIL,gBAAkBC,KAAKK,eAAgB,CACvCR,2BAGRf,EAAEwB,KAAKP,cAAcE,OAAQF,cAAcI,WAAWC,KAAK,WACvD,GAAIL,gBAAkBC,KAAKK,eAAgB,CACvCL,KAAKK,eAAiB,KACtBP,cAGRE,KAAKK,eAAiBN,eAE1B,IAAIQ,QAAUzB,EAAE0B,OAChB,GAAID,QAAQE,SAAWF,QAAQE,QAAQC,MAAO,CAC1CH,QAAQE,QAAQC,MAAMvI,UAAUwI,qBAAuBhB,2BAS/D,IAAIiB,oCAAsC,WACtC,IAAIC,wBAA0B,WAC1B,GAAI/F,KAAKgG,SAAWhG,KAAKiG,kBAAoB,EAAG,CAC5C,IAAKjG,KAAKkG,sBAAwBlG,KAAKmG,gCAClCnG,KAAKoG,IAAIf,UAAUgB,SAAS,mBAAoB,CAGjD,KAAMrC,EAAE,UAAUsC,GAAG,UAAYtC,EAAE,UAAUsC,GAAG,aAAc,CAC1DtG,KAAKoG,IAAIf,UACJkB,SAAS,qCACTC,WAAW,aAKhC,IAAIf,QAAUzB,EAAE0B,OAChB,GAAID,QAAQE,SAAWF,QAAQE,QAAQC,MAAO,CAC1CH,QAAQE,QAAQC,MAAMvI,UAAUoJ,oBAAsBV,0BAM9D,IAAIW,kBAAoB,WACpB,IAAIC,cAAgB3C,EAAEC,GAAG2C,OAAOC,MAAM,KAAK,GAC3C,IAAIC,WAAa9C,EAAE0B,OAAOnE,QAAQsF,MAAM,KACxC,IAAIE,WAAaD,WAAW,GAC5B,IAAIE,WAAaF,WAAW,GAC5B,GAAI,GAAKH,aAAeI,SAAW,GAAKC,SAAW,EAAG,CAClDpC,uCACAkB,wCAUR,IAAImB,MAAuB,WACvB,SAASA,SAQTA,MAAMC,gBAAkB,WACpB,IAAKD,MAAME,oBAAqB,CAC5BrD,eACAmD,MAAMG,cAAgB,UAO9BH,MAAMI,eAAiB,WACnBX,qBAOJO,MAAME,kBAAoB,WAEtB,GAAIlH,UAAUe,SAAS4C,UAAY3D,UAAUe,SAASsC,QAAS,CAC3D,OAAO,MAEX,OAAO,MAEX2D,MAAMG,cAAgB,SACtB,OAAOH,MAnCe,GAqC1BhH,UAAUgH,MAAQA,OA9ItB,CA+IGhH,UAAYJ,IAAII,YAAcJ,IAAII,gBAjJzC,CAkJGJ,MAAQA,SACX,IAAIA,KACJ,SAAWA,KACP,IAAII,WACJ,SAAWA,WAKP,IAAIqH,aACJ,SAAWA,aACPA,YAAYA,YAAY,YAAc,GAAK,WAC3CA,YAAYA,YAAY,aAAe,GAAK,aAFhD,CAGGA,YAAcrH,UAAUqH,cAAgBrH,UAAUqH,iBAKrD,SAASC,iBACL,IAAIC,QAAUxD,EAAE5H,QAChB,OAAQoL,QAAQC,QAAUD,QAAQE,SAAYJ,YAAYK,SAAWL,YAAYM,UAErF3H,UAAUsH,eAAiBA,gBAlB/B,CAmBGtH,UAAYJ,IAAII,YAAcJ,IAAII,gBArBzC,CAsBGJ,MAAQA,SAGX,IAAIA,KACJ,SAAWA,KACP,IAAIgI,QAAUhI,IAAIgI,QAQlB,SAASC,qBACL,OAAO,IAAID,QAAQ,SAAUE,SACzB,IAAKlI,IAAII,UAAUe,SAASmC,OAAQ,CAChC6E,WAAW,WACPD,WACD,SAEF,CACD,GAAI,MAAQlI,IAAI+C,OAAOqF,SAAW,MAAQpI,IAAI+C,OAAOqF,QAAQC,KAAM,CAC/DlE,EAAEnC,UAAU2C,IAAI,cAAe,WAC3BuD,gBAGH,CACDA,cAKhBlI,IAAIiI,mBAAqBA,mBACzB,IAAIK,0BAA4B,KAYhC,SAASC,qBAAqBC,SAC1B,IAAIC,WAAaH,0BACjBA,0BAA4BE,QAC5B,OAAOC,WAEXzI,IAAIuI,qBAAuBA,sBAE3B,WACIN,qBACKS,KAAK,WACNvE,EAAEnC,UAAUqC,GAAG,aAAc,SAAUsE,OACnC,GAAIL,0BAA2B,CAC3BA,0BAA0BK,aAL1C,GAWA,IAAIvI,WACJ,SAAWA,WACP,IAAIwI,IAAM,mBACV,IAAIC,cAAgB1E,EAAEoB,WAKtB,SAASuD,WAAWC,SAChB,GAAI,YAAcF,cAAcG,QAAS,CACrC,OAAOH,cAAcI,UAIzBjJ,IAAI8I,YACAI,QAAS,WACL,IAAIC,OAASC,UAAUL,SAEvB,GAAII,OAAOE,WAAY,CACnBjJ,UAAUgH,MAAMC,kBAGpB8B,OAAOG,oBAEPnF,EAAEnC,UAAUqC,GAAG,aAAc,WAEzB8E,OAAOI,0BAEPvJ,IAAIwJ,eAAeL,OAAOM,MACrBC,OAAO,SAAUC,MAElBxF,EAAEnC,UACG2C,IAAI,mBAAoB,SAAUgE,MAAO9L,MAC1CA,KAAKkM,QAAQa,YAAc,QAE1BvF,GAAG,mBAAoB,SAAUsE,OAElCxE,EAAEwE,MAAMkB,QAAQC,aAGpB,GAAI1J,UAAU2J,OAAOC,aACjBC,aAAcd,OAAOc,aACrBC,oBAAqBf,OAAOe,sBAC5B,CAEA,GAAIf,OAAOE,WAAY,CACnBjJ,UAAUgH,MAAMI,iBAEpBqB,cAAcX,cAEb,CACDW,cAAcsB,OAAOnK,IAAIoK,cAAcpK,IAAIc,YAAYuJ,6CAA8CzB,IAAK,qDAC1GC,cAAgB1E,EAAEoB,gBAI9B,CAEI,IAAIuB,cAAgB3C,EAAEC,GAAG2C,OAAOC,MAAM,KAAK,GAC3C,GAAI,GAAKF,YAAa,CAClB,GAAI,GAAKA,YAAa,CAClBxH,QAAQgL,KAAK1B,IAAM,qCAEvBZ,QAAQE,UAA4BQ,KAAK,WAAa,IAAI6B,+BAAiCxM,oBAA0C,iDAAiD,WAClLiK,QAAQE,UAA4BQ,KAAK,YAAa3K,oBAAyC,iDAAkDyM,MAAMzM,oBAAoBqB,MAC5Ka,MAAM,KAAMsK,iCAAkCC,MAAMzM,oBAAoBqB,QAE1E,CACD4I,QAAQE,UAA4BQ,KAAK,YAAa3K,oBAAyC,iDAAkDyM,MAAMzM,oBAAoBqB,OAIvLqL,KAAM,SAAUlL,OACZsJ,cAAcsB,OAAOnK,IAAIoK,cAAcpK,IAAIc,YAAY4J,sCAAuC9B,IAAK,kCAAmCrJ,QACtIsJ,cAAgB1E,EAAEoB,cAG1B,OAAOsD,cAAcI,UAEzB7I,UAAU0I,WAAaA,WASvB,SAAS6B,gBACL,MAAO,aAAe9B,cAAcG,QAExC5I,UAAUuK,cAAgBA,cAK1B,SAASC,oBACL,OAAO/B,cAAcI,UAEzB7I,UAAUwK,kBAAoBA,kBAC9B,IAAIC,8BAYJ,SAASC,mCAAmCC,IAAKC,UAC7CH,2BAA2BE,KAAOC,SAEtC5K,UAAU0K,mCAAqCA,mCAS/C,SAASG,qCAAqCF,YACnCF,2BAA2BE,KAEtC3K,UAAU6K,qCAAuCA,qCACjD,IAAIC,YAAc,KAOlB,SAASC,uBACL,WACI,IAAIC,qBAAuBpL,IAAIuI,qBAAqB,MACpD,IAAI8C,sBAAwB,SAAU1C,OAClC,GAAIuC,aAAeA,YAAYI,qBAAqB3C,OAAQ,CAExD,WAEC,CACDyC,qBAAqBzC,SAG7B3I,IAAIuI,qBAAqB8C,wBAX7B,IAaA,WACI,IAAIE,sBAAwBvL,IAAII,UAAUoL,4BAA4B,MACtE,IAAIC,uBAAyB,WACzB,GAAIP,YAAa,CACb,OAAOA,YAAYQ,0BAElB,CACD,OAAOH,0BAGfvL,IAAII,UAAUoL,4BAA4BC,yBAV9C,GAaJrL,UAAU+K,oBAAsBA,oBAChC,IAAIQ,iBAAmB,KAOvB,SAASC,eAAeC,MACpBX,YAAcW,KACd,GAAIX,YAAa,CACbS,iBAAmBvL,UAAUsH,kBAGrCtH,UAAUwL,eAAiBA,eAO3B,SAASE,uBACL,OAAO1L,UAAUgH,MAAMG,cAE3BnH,UAAU0L,qBAAuBA,qBACjC,IAAIC,qBACJ,IAAIC,kBAWJ,SAASC,aAAaC,MAClBH,kBAAkBzO,KAAK4O,MAE3B9L,UAAU6L,aAAeA,aAKzB,SAASE,iBACLJ,kBAAkBK,QAAQ,SAAUF,MAChCF,eAAe1O,KAAK,IAAI4O,QAE5BH,qBAEJ3L,UAAU+L,eAAiBA,eAK3B,SAASE,eACLL,kBAEJ5L,UAAUiM,aAAeA,aAOzB,SAASjD,UAAUL,SACf,IAAIuD,WAEAvF,QACIwF,WAAaC,MAAO,OACpBC,YAAa,MAEjBC,cACIC,sBAAuB,KACvBC,sBAAuB,mBACvBC,wBAAyB,mBACzBC,qBAAsB,MACtBC,iBAAkB,MAElBC,mBACIC,eAAgB,eAChBC,YAAa,OAAQ,OAAQ,QAC7BC,kBAGR1D,MACI2D,qBACArE,YAEJM,WAAY,KACZY,aAAc,KACdC,oBAAqB,MACrBZ,kBAAmB,WACf,IAAI+D,MAAQlN,KACZ5C,OAAO+P,KAAKnN,KAAK4G,QAAQqF,QAAQ,SAAUrB,KACvC,GAAI,cAAgBA,IAAK,CACrB5G,EAAEoI,UAAUc,MAAMtG,OAAOwF,eAExB,CACDpI,EAAE4G,KAAOsC,MAAMtG,OAAOgE,SAIlCxB,wBAAyB,WACrB,IAAI8D,MAAQlN,KACZgE,EAAE0B,OAAO0H,OAAO/P,UAAUuL,QAAQyE,KAAOtN,UACzC3C,OAAO+P,KAAKnN,KAAKuM,cAAcN,QAAQ,SAAUrB,KAC7C,GAAI,sBAAwBA,IAAK,CAC7B,IAAI0C,UAAYtJ,EAAE0B,OAElB4H,UAAUC,yBACJD,UAAUE,mBAAmBN,MAAMX,aAAaM,kBAAkBC,gBAExEI,MAAMX,aAAaM,kBAAkBG,aAAaf,QAAQ,SAAUwB,YAChEH,UAAUE,mBAAmBC,YAAcH,UAAUE,mBAAmBR,eAG5EE,MAAMX,aAAaM,kBAAkBE,WAAWd,QAAQ,SAAUwB,YAC9DH,UAAUE,mBAAmBC,YAAcH,UAAUE,mBAAmBT,iBAG3E,CACD/I,EAAE0B,OAAOkF,KAAOsC,MAAMX,aAAa3B,UAKnD,OAAO5G,EAAE0J,OAAO,QAAUvB,UAAWtM,IAAI8N,OAAQ/E,SAKrD5E,EAAE5H,QAAQ8H,GAAG,SAAU,SAAUsE,OAC7B,IAAIoF,eAAiB3N,UAAUsH,iBAC/B,GAAIiE,mBAAqBoC,eAAgB,CACrC,IAAK,IAAIhD,OAAOF,2BAA4B,CACxCA,2BAA2BE,KAAKiD,qBAAqBD,gBAEzD,GAAI7C,YAAa,CACbA,YAAY8C,qBAAqBD,gBAErCpC,iBAAmBoC,mBA/S/B,CAkTG3N,UAAYJ,IAAII,YAAcJ,IAAII,gBA9WzC,CA+WGJ,MAAQA,SAGX,IAAIA,KACJ,SAAWA,KACP,IAAII,WACJ,SAAWA,WACP,IAAI4H,QAAUhI,IAAIgI,QAClB,IAAIY,IAAM,0BAiBV,SAASqF,MAAMC,MACX,GAAI,MAAQA,KAAK,IAAM,MAAQA,KAAK,GAAI,CACpC,OAAOlO,IAAIiO,MAAMC,UAEhB,CACD,OAAO/J,EAAE0B,OAAOqI,KAAKC,gBAAgBD,KAAME,0BAGnDhO,UAAU6N,MAAQA,MAOlB,SAASG,wBACL,IAAIC,YAAclK,EAAE,QAAQmK,cAAc,iBAC1C,GAAI,MAAQD,YAAa,CACrB,OAAOlK,EAAE0B,OAAOqI,KAAKK,aAAaC,WAEtC,IAAIC,KAAOtK,EAAE0B,OAAOqI,KAAKK,aAAaC,WACtC,IAAIE,IAAMvK,EAAE0B,OAAO8I,WAAWC,QAAQ,YAAYC,QAAQ,OAC1D,IAAKH,MAAQvK,EAAE0B,OAAOqI,KAAKY,OAAOJ,KAAM,CACpCA,IAAMD,KAEV,OAAOtK,EAAE0B,OAAOqI,KAAKC,gBAAgBO,IAAKD,MAQ9C,IAAIM,mBAAqB,WACrB,OAAO/G,QAAQE,WAGnB,IAAI8G,0BAA4BD,mBAchC,SAASvD,4BAA4BhD,SACjC,GAAI,MAAQA,QAAS,CACjB,OAAOuG,uBAEN,CACD,IAAItG,WAAasG,mBACjBA,mBAAqBvG,QACrB,OAAOC,YAGfrI,UAAUoL,4BAA8BA,4BASxC,IAAIzB,OAAwB,WACxB,SAASA,UAiBTA,OAAOC,YAAc,SAAUjB,SAC3B,IAAIkG,MAAQ9K,EAAE,QACd,KAAM4F,OAAOmF,SAAU,CACnB5P,QAAQgL,KAAK1B,IAAM,uCACnB,OAAO,MAEXmB,OAAOoF,cAAgBhL,EAAE0J,UAAW9D,OAAOqF,qBAAsBrG,SACjE,GAAIgB,OAAOoF,cAAcjF,oBAAqB,CAC1CH,OAAOsF,kBAAoB,MAG/BtF,OAAOuF,UAAYzK,EAAEnF,KAAKY,SAASiP,QAAQC,QAASlP,SAASiP,SAC7DjP,SAASiP,QAAQC,QAAUzF,OAAO0F,cAClC1F,OAAOmF,SAAW,IAAI5O,SAASyJ,OAC/BA,OAAOmF,SAAS7K,GAAG,QAAS0F,OAAO2F,kBAEnC,IAAKvL,EAAE0B,OAAOiH,qBAAsB,CAChC/C,OAAO4F,OAAS9K,EAAEnF,KAAKyE,EAAE0B,OAAO+J,KAAMzL,EAAE0B,QACxC1B,EAAE0B,OAAO+J,KAAO7F,OAAO8F,cAG3B,GAAI,MAAQ1L,EAAE0B,OAAOiK,WAAY,CAC7B3L,EAAE0B,OAAOiK,WAAa,SAAUC,GAAIC,KAChCf,MAAMX,cAAc,SAAUyB,GAAIC,MAG1CjG,OAAOkG,aAEP7P,UAAU+K,sBACV,OAAO,MAsBXpB,OAAOmG,SAAW,SAAUC,MAAOtE,KAAMuE,IAAKC,UAC1C,GAAID,WAAa,EAAG,CAAEA,IAAM,MAE5B,IAAIE,QAAUvG,OAAOwG,OACrB,IAAInS,KAAO+R,MAAQtE,KACnB,IAAI2E,SACAL,MAAOA,MACPM,OAAQ1G,OAAOmF,SAASwB,eAAeP,OACvCtE,KAAMA,KACNuE,IAAKA,IACLC,SAAUA,UAAY,WAAc,OAAO,QAE/C,GAAItG,OAAO4G,YAAYvS,KAAMoS,SAAU,CACnCzG,OAAOmF,SAASiB,MAAMA,MAAO/R,KAAM,cAEvC,GAAIkS,QAAS,CAETvG,OAAO6G,OAAQC,OAAQ,KAAMC,cAAe,QAEhD,OAAO/G,QAaXA,OAAO6G,MAAQ,SAAU7H,SACrB,IAAIiH,IAAM7L,EAAE0J,QAASiD,cAAe,MAAQ/H,SAC5C,GAAIiH,IAAIc,cAAe,CACnB1Q,UAAU+L,iBAEd,GAAIhI,EAAE0B,OAAOiH,qBAAsB,CAC/BxN,QAAQC,MAAMqJ,IAAM,+EACpB,OAEJtI,SAASiP,QAAQqB,MAAMZ,MAU3BjG,OAAOwG,KAAO,WACV,IAAIQ,UAAYzQ,SAAS0Q,QAAQC,QACjC3Q,SAASiP,QAAQgB,OACjB,OAAOQ,WAUXhH,OAAOmH,UAAY,WACf,OAAO5Q,SAAS0Q,QAAQC,SAmB5BlH,OAAOoH,SAAW,SAAUzC,IAAKd,WAAYwD,QAASrI,SAClD,KAAMgB,OAAOsH,mBAAmBC,aAAc,CAE1ChS,QAAQgL,KAAK1B,IAAM,gDACnB,YAEC,GAAImB,OAAOwH,sBAAsB7C,KAAM,CACxC,OAEJ,IAAI8C,WAAarN,EAAE0J,UAAW9D,OAAO0H,yBAA0B1I,SAE/D,IAAI2I,wBAA0B3H,OAAOsH,mBAAmBM,wBAA0B3C,0BAA4BD,mBAC9GhF,OAAOsH,oBACH3C,IAAKA,IACLd,WAAYA,WACZwD,QAASA,QACTQ,gBAAiBJ,WAAWI,gBAC5BC,aAAcL,WAAWK,aACzBC,OAAQN,WAAWM,WACnBC,iBAAkB,KAClBJ,wBAAyB,KACzBL,aAAc,MAGlBI,0BACKjH,KAAK,WAENnL,QAAQC,MAAMqJ,IAAM,uCAEnBc,OAAO,WACR,GAAIK,OAAOmH,cAAgBnH,OAAOsH,mBAAmBQ,aAAc,CAC/D,GAAIL,WAAWQ,QAAS,CACpB,OAAQR,WAAWQ,QAAQC,WACvB,IAAK,QACDlI,OAAOmI,aAAaV,WAAWQ,SAC/B,MACJ,IAAK,MACDjI,OAAOoI,cAAcX,YACrB,OACJ,QACIlS,QAAQgL,KAAK1B,IAAM,yCAA2C4I,WAAWQ,QAAQC,WACjF,OAGZ,IAAIG,OAAS9R,SAASiP,QAAQ4B,SAASzC,IAAK8C,YAE5C,IAAKY,QAAU,kBAAoBA,OAAQ,CACvCrI,OAAOsH,mBAAmBC,aAAe,WAG5C,CACD,GAAIE,WAAWQ,QAAS,CACpB1S,QAAQgL,KAAK1B,IAAM,mEAEvB,IAAIyJ,WAAa/R,SAASiP,QAAQ+C,YAAY5D,KAC9C,IAAI8B,aAAe,EACnB,GAAIzG,OAAOsH,mBAAmBQ,aAAc,CAExCrB,QAAU3L,EAAE0N,KAAKxI,OAAOyI,eAAgB,SAAUC,KAC9C,OAAOA,IAAIhC,OAAOiC,KAAKL,kBAG1B,CAED7B,QAAU3L,EAAE8N,UAAU5I,OAAOyI,gBAAkBrC,MAAOkC,aAE1D,GAAI7B,QAAS,CACT9B,IAAM8B,QAAQ3E,KAElB9B,OAAO+F,WAAWpB,SAuB9B3E,OAAO6I,gBAAkB,SAAU7C,GAAInC,WAAYwD,QAASrI,SACxD,IAAI8J,MAAQ9I,OAAO+I,iBAAiBD,MACpC,IAAIE,YAAcF,MAAM9I,OAAO+I,iBAAiBE,aAChD,IAAIC,YAAcrF,YAAcmF,YAAYnF,WAC5C,IAAIsF,SAAY,MAAQ9B,QAAWA,QAAU,KAC7C,IAAI+B,WAAa,WACb,IAAKpD,GAAI,CACL,OAAO,UAEN,GAAI,kBAAoBA,GAAI,CAC7B,QAAUI,MAAOJ,UAEhB,GAAIA,cAAcqD,MAAO,CAC1B,OAAOrD,OAEN,CACD,OAAQA,KAXC,GAejB8C,MAAMzG,QAAQ,SAAUxN,cACbA,MAAMmL,OAAOsJ,iBAGxBR,MAAM,GAAG9I,OAAOsJ,gBACZpB,UAAW,QACXqB,SAAUT,MAAM,GAAGU,KACnBJ,WAAYA,WACZK,mBAAoB,GAExBzJ,OAAOoH,SAAS,KAAM8B,YAAaC,SAAU/O,EAAE0J,UAAW9E,SACtDiJ,SACIC,UAAW,WAavBlI,OAAO6F,KAAO,WACV,KAAM7F,OAAOsH,mBAAmBC,aAAc,CAE1ChS,QAAQgL,KAAK1B,IAAM,4CACnB,YAEC,GAAImB,OAAO0J,YAAa,CAEzB,IAAIC,IAAMrS,UAAUqS,QACpB,KAAMA,IAAIC,QAAS,CACfD,IAAIC,UACJ,QAGR5J,OAAOsH,oBACHC,aAAc,KACdK,wBAAyB,MAG7B5C,qBACKrG,KAAK,WACNvE,EAAE0B,OAAO+J,SAERnF,KAAK,WACNnL,QAAQC,MAAM,qCACdwK,OAAOsH,yBASftH,OAAO6J,YAAc,SAAU9B,QAC3B/H,OAAO8J,aAAe1P,EAAE0J,OAAO,KAAM9D,OAAO8J,aAAc/B,SAQ9D/H,OAAO+J,WAAa,WAChB,IAAIhC,OAAS/H,OAAO8J,aACpB9J,OAAO8J,gBACP,OAAO/B,QAQX/H,OAAOgK,mBAAqB,WACxB,GAAIhK,OAAOsH,mBAAmBS,QAAU/H,OAAOsH,mBAAmBS,OAAOkC,OAAQ,CAC7E,OAAOjK,OAAOsH,mBAAmBS,OAAOkC,OAAO,mBAE9C,CACD,OAAO,OAoBfjK,OAAOkK,aAAe,SAAUvF,IAAK3F,QAAS6E,WAAYwD,SACtD,IAAIpB,IAAM7L,EAAE0J,UAAW9E,SACvBiH,IAAIgC,QAAUhC,IAAIgC,UAAaC,UAAW,SAC1C,GAAI,UAAYjC,IAAIgC,QAAQC,UAAW,CACnC3S,QAAQC,MAAMqJ,IAAM,uDAAyDoH,IAAIgC,QAAQC,UAAY,KACrG,OAEJlI,OAAOoH,SAASzC,IAAKd,WAAYwD,QAASpB,MAa9CjG,OAAOmK,cAAgB,SAAUtG,WAAYwD,SACzCrH,OAAOoH,SAAS,KAAMvD,WAAYwD,SAC9BY,SACIC,UAAW,UAevBlI,OAAOoK,cAAgB,SAAUvG,WAAYwD,SAEzC,IAAIgD,SAAWrK,OAAOsK,wBACtBD,SAASE,aAAad,mBAAqB,EAC3CzJ,OAAOoH,SAAS,KAAMvD,WAAa,MAAQwD,QAAWA,QAAU,MAC5DY,SACIC,UAAW,MACXkB,WAAY,SAQxBpJ,OAAOwK,YAAc,WACjB,IAAI1B,MAAQ9I,OAAO+I,iBAAiBD,MACpC,IAAI2B,IAAM3P,EAAE4P,KAAK5B,MAAO,SAAUjU,OAC9B,QAASA,MAAMmL,OAAOsJ,iBAE1B,OAAOmB,KAMXzK,OAAO2K,gBAAkB,WAErB,OAAO3K,OAAOsH,mBAAmBC,cAAiB,MAAQvH,OAAOsH,mBAAmBU,kBAExFhI,OAAO4K,kBAAoB,SAAUC,UAAWC,aAAc9L,SAC1D,IAAI+L,aACJ,IAAIC,OAAS,MACbH,UAAaA,qBAAqBxB,MAASwB,WAAaA,WACxDC,aAAgB,MAAQA,aAAgB,MAAQA,cAChD,WACI,IAAIG,UAAY,SAAUrL,MACtB,IAAI+E,IACJ,IAAIuG,SAAW3U,SAASiP,QAAQ+C,YAAY3I,KAAKwG,OACjD,IAAIK,QAAU3L,EAAE0N,KAAKxI,OAAOyI,eAAgB,SAAUC,KAClD,OAAOA,IAAIhC,OAAOiC,KAAKuC,YAE3B,IAAKzE,QAAS,CACVlR,QAAQgL,KAAK1B,IAAM,mCAAqCe,KAAKwG,OAC7D,OAAO,SAEN,CACDzB,IAAM3E,OAAOmL,iBAAiB1E,QAAQ3E,MAE1C,IAAIgH,OACA1C,MAAOxG,KAAKwG,MACZgF,QAASzG,IACT0G,MAAOzL,KAAKyL,MACZxH,WAAYjE,KAAKiE,WACjBc,IAAKA,KAET,OAAOmE,OAEX,IAAK,IAAI3V,EAAI,EAAG2B,EAAI+V,UAAUxX,OAAQF,EAAI2B,EAAG3B,IAAK,CAC9C,IAAI2V,MAAQmC,UAAUJ,UAAU1X,IAChC,IAAK2V,MAAO,CACRkC,OAAS,KACT,UAEC,CACDD,UAAUxX,KAAKuV,UA9B3B,GAkCA,GAAIkC,OAAQ,CACR,OAAO,OAEX,WAEI,IAAIzE,QAAUvG,OAAOwG,OACrB,IAAI8E,aAAeP,UAAU1X,OAAS,EACtC,IAAIkY,WAAaR,UAAU1X,OAAS,EACpC2M,OAAO+I,iBAAiByC,eACxB,IAAK,IAAIrY,EAAI,EAAG2B,EAAIwW,aAAcnY,EAAI2B,EAAG3B,IAAK,CAC1CsY,SAASjC,KAAOuB,UAAU5X,GAAGiT,MAC7BpG,OAAO+I,iBAAiBD,MAAMvV,KAAKwX,UAAU5X,IAC7C6M,OAAO+I,iBAAiBE,YAAcjJ,OAAO+I,iBAAiBD,MAAMzV,OAAS,EAGjF,GAAIyX,aAAc,CACd,IAAIjH,WAAa,WACb,GAAI,MAAQ7D,OAAOsH,mBAAmBzD,WAAY,CAC9C,OAAO7D,OAAOsH,mBAAmBzD,eAEhC,CACD,OAAOkH,UAAUQ,YAAY1H,YALpB,GAQjB,IAAIwD,QAAU,WACV,GAAI,MAAQrH,OAAOsH,mBAAmBD,QAAS,CAC3C,OAAOrH,OAAOsH,mBAAmBD,YAEhC,CACD,OAAO,OALD,GAQdd,QAAU,MACVvG,OAAO6G,OAAQC,OAAQ,OACvB9G,OAAOoH,SAAS2D,UAAUQ,YAAYnF,MAAOvC,WAAYwD,QAASrI,aAEjE,CACDyM,SAASjC,KAAOuB,UAAUQ,YAAYnF,MACtCpG,OAAO+I,iBAAiBD,MAAMvV,KAAKwX,UAAUQ,aAC7CvL,OAAO+I,iBAAiBE,YAAcjJ,OAAO+I,iBAAiBD,MAAMzV,OAAS,EAGjF,GAAIkT,QAAS,CACTvG,OAAO6G,OAAQC,OAAQ,SAxC/B,GA2CA,OAAO,MAQX9G,OAAO+I,eAAiB,WACpB,OAAO3O,EAAE0B,OAAOsL,SAAS5B,SAQ7BxF,OAAO0F,cAAgB,SAAUwF,UAC7B,IAAIQ,QAAU1L,OAAOuF,UAAU2F,UAC/B,IAAKQ,QAAS,CACV1L,OAAO2L,cAAcT,UAEzB,OAAO,MAeXlL,OAAO8F,cAAgB,WACnB,GAAI9F,OAAOmH,YAAa,CACpB3B,QAAQK,WAEP,CAED7F,OAAO4F,WAcf5F,OAAOkG,WAAa,WAChB9L,EAAEnC,UACG2C,IAAI,aAAc,WACnB,GAAIoF,OAAOoF,cAAclF,aAAc,CAEnC9F,EAAEnC,UAAUqC,GAAG,SAAU,SAAU,SAAUsE,OACzCoB,OAAO4L,iBAAiBhN,YAI/BtE,GAAG,iBAAkB,SAAUsE,OAEhC,GAAI,MAAQoB,OAAOsH,mBAAmBO,gBAAiB,CACnD,IAAIgE,OAAS7L,OAAO+I,iBAAiB+C,YACrCD,OAAO7L,OAAO+L,sBAAwB/L,OAAOsH,mBAAmBO,mBAGnEvN,GAAG,WAAY,SAAUsE,OAC1B,IAAIiN,OAAS7L,OAAO+I,iBAAiB+C,YACrC,GAAID,OAAO7L,OAAOsJ,eAAgB,QACvBuC,OAAO7L,OAAOsJ,kBAGxBhP,GAAG,qCAAsC,SAAUsE,OACpDoB,OAAOsH,wBAGXrR,IAAIuI,qBAAqBwB,OAAO6F,OAgBpC7F,OAAO4G,YAAc,SAAUvS,KAAMoS,SACjC,KAAMzG,OAAOyI,eAAepU,MAAO,CAC/BkB,QAAQC,MAAMqJ,IAAM,mDAAqDxK,MACzE,OAAO,MAEX2L,OAAOyI,eAAepU,MAAQoS,QAC9B,OAAO,MAUXzG,OAAOwH,sBAAwB,SAAU7C,KACrC,IAAKvK,EAAE0B,OAAOkQ,mBAAoB,CAC9B5R,EAAEnC,UAAU2C,IAAI,mBAAoB,SAAUgE,MAAO9L,MACjDA,KAAKmZ,OAAS5V,UAAU6N,MAAMS,OAElCvK,EAAE0B,OAAOoQ,iBACT9R,EAAE0B,OAAOkQ,mBAAqB,KAC9B,OAAO,KAEX,OAAO,OAUXhM,OAAO0J,UAAY,WACf,IAAIwB,SAAW3U,SAASiP,QAAQ+C,YAAYnO,EAAE0B,OAAOqI,KAAKgI,SAASV,SAASW,MAAM5C,MAClF,IAAI/C,QAAU3L,EAAE0N,KAAKxI,OAAOyI,eAAgB,SAAUC,KAClD,OAAOA,IAAIhC,OAAOiC,KAAKuC,YAE3B,OAAQ,MAAQzE,QAAW,MAAQA,QAAQJ,KAU/CrG,OAAO4L,iBAAmB,SAAUhN,OAChC,GAAIoB,OAAOqM,uBAAwB,CAC/BzN,MAAM0N,iBACN,OAAO,MAEX,OAAOtM,OAAOuM,aAAa3N,QAM/BoB,OAAOuM,aAAe,SAAU3N,OAC5B,IAAI4N,QAAUpS,EAAEwE,MAAM6N,eACtB,IAAI9H,IAAM6H,QAAQ1H,QAAQ,SAAW0H,QAAQE,KAAK,QAClD,IAAI7I,WAAa2I,QAAQ1H,QAAQ,cACjC,IAAI6H,UAAYH,QAAQ1H,QAAQ,aAChC,IAAI8H,QAAUJ,QAAQE,KAAK1M,OAAO6M,uBAClC,IAAI/E,aAAe0E,QAAQE,KAAK1M,OAAO8M,qBACnCN,QAAQE,KAAK1M,OAAO8M,uBAAyB,OAAS,MAC1D,IAAIC,aAAeP,QAAQE,KAAK1M,OAAOgN,uBACnCR,QAAQE,KAAK1M,OAAOgN,yBAA2B,OAAS,MAM5D,GAAID,cAAgB/M,OAAOiN,qBAAqBtI,KAAM,CAClD,OAAO,KAGX/F,MAAM0N,iBACN,GAAItM,OAAOkN,oBAAoBtO,OAAQ,CACnCoB,OAAO6F,WAEN,CACD7F,OAAOoH,SAASzC,IAAKd,aAAc8I,WAAa7E,aAAcA,aAAcD,gBAAiB+E,UAEjG,OAAO,OAaX5M,OAAOiN,qBAAuB,SAAUtI,KACpC,IAAKA,KAAQ,MAAQA,IAAM,CACvB,OAAO,UAEN,GAAI,MAAQA,IAAI,GAAI,CACrB,OAAQ3E,OAAOmN,gBAAgBxI,SAE9B,CACD,OAAO,QAcf3E,OAAOmN,gBAAkB,SAAUxI,KAC/B,IAAIuG,SAAW3U,SAASiP,QAAQ+C,YAAY5D,KAC5C,OAAO7J,EAAEsS,IAAI7W,SAASiP,QAAQ6H,SAAU,SAAU5O,SAC9C,GAAIA,QAAQ2H,MAAMuC,KAAKuC,UAAW,CAC9B,OAAO,SAQnBlL,OAAOqM,qBAAuB,WAC1B,IAAIiB,SAAYC,KAAKC,MAAQxN,OAAOyN,kBAAqBzN,OAAO0N,WAAa,EAC7E1N,OAAOyN,kBAAoBF,KAAKC,MAChC,OAAOF,UAMXtN,OAAOkN,oBAAsB,SAAUtO,OACnC,GAAIxE,EAAEwE,MAAM6N,eAAe3H,QAAQ,SAAW,OAAQ,CAClD,OAAO,SAEN,CACD,OAAO,QAcf9E,OAAO2F,iBAAmB,SAAUtR,MAChC,IAAIsZ,QACJ,IAAK,IAAIC,GAAK,EAAGA,GAAKC,UAAUxa,OAAQua,KAAM,CAC1CD,KAAKC,GAAK,GAAKC,UAAUD,IAE7B,IAAInH,QAAUzG,OAAOyI,eAAepU,MACpC,KAAMoS,QAAS,CACX,IAAIsB,QAAWkC,QAAU6D,YAAaH,OACtC3N,OAAOsH,mBAAmBC,aAAe,KACzC,GAAI,MAAQvH,OAAOsH,mBAAmBS,OAAQ,CAC1CA,OAAOkC,OAAS7P,EAAE0J,UAAWiE,OAAOkC,OAAQjK,OAAOsH,mBAAmBS,OAAOkC,YAEjFjK,OAAOsH,mBAAmBS,OAAS3N,EAAE0J,UAAW9D,OAAOsH,mBAAmBS,OAAQA,QAClF,IAAI2D,QAAUjF,QAAQH,SAASqH,MAC/B,IAAKjC,QAAS,CACV1L,OAAO+F,WAAWU,QAAQ3E,SAetC9B,OAAO2L,cAAgB,SAAUT,UAC7BlL,OAAOsH,mBAAmBC,aAAe,KACzC,GAAI,MAAQ2D,SAAU,CAClBA,SAAW3U,SAASiP,QAAQ+C,cAGhC,GAAIvI,OAAOsH,mBAAmBU,iBAAkB,CAC5C,IAAIvB,QAAUzG,OAAOyI,eAAeyC,UACpC,GAAI,MAAQzE,QAAS,CACjBA,SACIL,MAAO8E,SACPxE,OAAQ1G,OAAOmF,SAASwB,eAAeuE,UACvCpJ,KAAM9B,OAAOsH,mBAAmB3C,IAChC0B,IAAK,MACLC,SAAU,MAEdtG,OAAO4G,YAAYsE,SAAUzE,UAIrC,IAAItC,KAAO+G,SACX,GAAI,MAAQlL,OAAOyI,eAAeyC,UAAW,CACzC/G,KAAOnE,OAAOyI,eAAeyC,UAAUpJ,KAE3C9B,OAAO+F,WAAW5B,OAUtBnE,OAAO+F,WAAa,SAAU5B,MAC1B,IAAIwD,wBAEJ,IAAK3H,OAAOsH,mBAAmBU,iBAAkB,CAC7C,GAAIhI,OAAOsH,mBAAmByG,iBAAkB,CAC5C/N,OAAOsH,mBAAmByG,iBAAmB,UAE5C,CACD/N,OAAOgO,gBAAgB7J,MAEvB,IAAI8J,WAAajO,OAAOkO,+BACxB,GAAI,EAAID,WAAY,CAEhBjO,OAAOsH,mBAAmByG,iBAAmB,KAC7C/N,OAAO+I,iBAAiBE,aAAegF,WACvCzI,QAAQ2I,IAAIF,YACZ,QAIR,IAAIG,YAAcpO,OAAOsK,wBACzB,GAAI8D,YAAYC,UAAW,QAChBD,YAAYtF,MAAM9I,OAAOsJ,oBAGnC,CAEDtJ,OAAO+I,iBAAiBuF,cAAgBtO,OAAO+I,iBAAiBE,YAGpEtB,wBAA0B3H,OAAOsH,mBAAmBM,wBAA0B3C,0BAA4BD,mBAC1G2C,0BACKhJ,KAAK,WAEN,GAAIqB,OAAOsH,mBAAmBS,OAAQ,CAClC/H,OAAO6J,YAAY7J,OAAOsH,mBAAmBS,QAEjD/H,OAAOuO,kBACP,IAAIC,eAAiB,WACjB,GAAIxO,OAAOsH,mBAAmBzD,WAAY,CACtC,OAAO7D,OAAOsH,mBAAmBzD,gBAEhC,GAAI7D,OAAOsF,kBAAmB,CAC/BtF,OAAOsF,kBAAoB,MAC3B,MAAO,WAEN,CACD,OAAOlL,EAAE0B,OAAO+G,uBATH,GAYrBzI,EAAE0B,OAAOiK,WAAW1P,UAAU6N,MAAMC,OAChCtE,YAAa,MACb4O,wBAAyB,KACzB5K,WAAY2K,eACZnH,QAASrH,OAAOsH,mBAAmBD,QACnCqH,gBAAiB1O,OAAOsH,mBAAmBU,iBAC3C2G,YAAa3O,OAAOsH,mBAAmBQ,iBAG1CpH,KAAK,WACNnL,QAAQC,MAAMqJ,IAAM,qCACpBmB,OAAOsH,yBAcftH,OAAOgO,gBAAkB,SAAU7J,MAC/B,IAAIQ,IAAMvK,EAAE0B,OAAOqI,KAAKyK,oBAAoBvY,UAAU6N,MAAMC,OAC5D,GAAI,MAAQnE,OAAOsH,mBAAmBzD,WAAY,CAC9C7D,OAAOsH,mBAAmBzD,WAAa7D,OAAO+I,iBAAiB+C,YAAYjI,WAE/E7D,OAAO+I,iBAAiB8F,QACpBlK,IAAKA,IACLmK,QAAS,SAAUC,QAASpC,WACxB,OAAQA,WACJ,IAAK,OACD,GAAI,MAAQ3M,OAAOsH,mBAAmBD,QAAS,CAC3CrH,OAAOsH,mBAAmBD,QAAU,KAExC,MACJ,IAAK,UACD,GAAI,MAAQrH,OAAOsH,mBAAmBzD,WAAY,CAC9C7D,OAAOsH,mBAAmBzD,WAAakL,QAAQlL,WAEnD,MACJ,QACItO,QAAQgL,KAAK1B,IAAM,sBAAwB8N,WAC3C,QAGZqC,QAAS,WAEL,GAAI,IAAMhP,OAAO+I,iBAAiBE,YAAa,CAC3CjJ,OAAO+I,iBAAiBuF,cAAgB,EACxCtO,OAAO+I,iBAAiBE,YAAc,EACtC,GAAI,MAAQjJ,OAAOsH,mBAAmBD,QAAS,CAC3CrH,OAAOsH,mBAAmBD,QAAU,WAGvC,GAAI,IAAMrH,OAAO+I,iBAAiBE,YAAa,CAChD1T,QAAQgL,KAAK1B,IAAM,2BAanCmB,OAAOkO,6BAA+B,WAClC,IAAIpF,MAAQ9I,OAAO+I,iBAAiBD,MACpC,IAAImG,mBAAqBjP,OAAO+I,iBAAiBE,YACjD,IAAIqF,cAAgBtO,OAAO+I,iBAAiBuF,cAC5C,IAAInb,EAAGyZ,QAASsC,SAAUhE,SAAUzE,QAAS0I,WAE7C,IAAKnP,OAAOsH,mBAAmBD,SAAW,MAAQiH,gBAAkBxF,MAAMwF,eAAgB,CACtF,OAAO,EAGX1B,QAAU9D,MAAMwF,eAAetO,OAAO+L,sBACtC,GAAK,MAAQa,QAAU,CACnB,OAAO,EAEX1B,SAAW3U,SAASiP,QAAQ+C,YAAYqE,SAExC,GAAI,KAAO1B,SAAU,CACjB,OAAO+D,mBAGXxI,QAAU3L,EAAE0N,KAAKxI,OAAOyI,eAAgB,SAAUC,KAC9C,OAAOA,IAAIhC,OAAOiC,KAAKuC,YAE3B,GAAI,MAAQzE,QAAS,CACjBlR,QAAQgL,KAAK1B,IAAM,iDAAmD+N,SACtE,OAAO,EAGXuC,WAAanP,OAAOmL,iBAAiB1E,QAAQ3E,MAC7C,IAAK3O,EAAI8b,mBAAoBC,SAAW,EAAG,GAAK/b,EAAGA,IAAK+b,WAAY,CAChE,GAAIC,aAAerG,MAAM3V,GAAGiY,QAAS,CACjC,OAGR,GAAIjY,EAAI,EAAG,CACPoC,QAAQgL,KAAK1B,IAAM,yDAA2D+N,SAC9E,OAAO,EAEX,OAAOsC,UAaXlP,OAAOmI,aAAe,SAAUoC,cAC5B,IAAIsB,OAAS7L,OAAO+I,iBAAiB+C,YACrC,IAAIsD,MAAQ7E,aACZ,GAAIA,aAAahB,SAAU,CACvB,IAAI2F,SAAW,EACf,IAAIG,WAAa9Y,SAASiP,QAAQ+C,YAAYgC,aAAahB,UAC3D,IAAI9C,QAAU3L,EAAE0N,KAAKxI,OAAOyI,eAAgB,SAAUC,KAClD,OAAOA,IAAIhC,OAAOiC,KAAK0G,cAE3B,GAAI,MAAQ5I,QAAS,CACjBlR,QAAQgL,KAAK1B,IAAM,iDAAmD0L,aAAahB,UACnF,OAGJ,IAAI4F,WAAanP,OAAOmL,iBAAiB1E,QAAQ3E,MACjD,IAAIgH,MAAQ9I,OAAO+I,iBAAiBD,MACpC,IAAK,IAAI3V,EAAI6M,OAAO+I,iBAAiBE,YAAa,GAAK9V,EAAGA,IAAK+b,WAAY,CACvE,GAAIC,aAAerG,MAAM3V,GAAGiY,QAAS,CACjCgE,MAAM3F,mBAAqByF,SAC3B,YAIP,CACDE,MAAM7F,SAAWkC,SAASjC,KAC1B4F,MAAM3F,mBAAqB,EAE/BoC,OAAO7L,OAAOsJ,eAAiB8F,OAanCpP,OAAOoI,cAAgB,SAAUpJ,SAC7B,IAAIyI,WAAarN,EAAE0J,OAAO,QAAU9E,SACpC,IAAIqL,SAAWrK,OAAOsK,wBAEtB,IAAI8E,MAAQhV,EAAE0J,UAAWuG,SAASE,aAAc9C,WAAWQ,SAC3D,IAAIiH,SAAW7E,SAAS6E,SACxB,IAAIpG,MAAQuB,SAASvB,MACrB,IAAIwG,MAAQ,EACZ,IAAIC,kBAAoB,IACxB,IAAIC,gBAAkB,GAEtB,IAAIC,UAAY,WACZ,GAAID,iBAAmBF,MAAO,CAC1B/Z,QAAQC,MAAMqJ,IAAM,qCACpBmB,OAAOsH,2BAEN,GAAI8H,MAAM7F,WAAakC,SAASjC,KAAM,CACvC8F,QACAlR,WAAWqR,UAAWF,uBAErB,CACDvP,OAAOsH,mBAAmBC,aAAe,MACzCvH,OAAO4K,kBAAkBwE,MAAMhG,WAAY,KAAM3B,cAGzD,GAAIqB,MAAO,QACAA,MAAM9I,OAAOsJ,eACpBtJ,OAAO+I,iBAAiBE,aAAeiG,SACvClP,OAAO+I,iBAAiByC,eACxB,GAAI4D,MAAMhG,WAAY,CAClBpJ,OAAOwG,OAGP,GAAI,IAAM0I,SAAU,CAChB1J,QAAQ2I,IAAIe,iBAETzH,WAAWQ,QAClB7J,WAAWqR,UAAW,OAErB,CACDzP,OAAOsH,mBAAmBU,iBAAmB,MAC7CxC,QAAQ2I,IAAIe,eAGf,CACD3Z,QAAQgL,KAAK1B,IAAM,mDACnBmB,OAAOsH,wBAWftH,OAAOsK,sBAAwB,WAC3B,IAAIxB,MAAQ9I,OAAO+I,iBAAiBD,MACpC,IAAImG,mBAAqBjP,OAAO+I,iBAAiBE,YACjD,IAAI9V,EAAG+b,SACP,IAAIE,SACJ,IAAItP,OACJ,IAAK3M,EAAI8b,mBAAoBC,SAAW,EAAG,GAAK/b,EAAGA,IAAK+b,WAAY,CAChE,GAAIpG,MAAM3V,GAAG6M,OAAOsJ,eAAgB,CAChCxJ,OAASgJ,MAAM3V,GACfic,MAAQtG,MAAM3V,GAAG6M,OAAOsJ,eACxB,OAGR,GAAI,MAAQ8F,MAAM3F,mBAAoB,CAClC2F,MAAM3F,mBAAqB,EAE/B,OACIX,MAAOhJ,OACPyK,aAAc6E,MACdF,SAAUA,SAAWE,MAAM3F,mBAC3B4E,UAAW,WACP,GAAIvO,QAAU,IAAMoP,SAAU,CAC1B,OAAO,SAEN,CACD,OAAO,OALJ,KAgBnBlP,OAAOmL,iBAAmB,SAAUhH,MAChC,IAAIQ,IAAMtO,UAAU6N,MAAMC,MAC1B,IAAIuL,QAAUtV,EAAE0B,OAAOqI,KAAKyK,oBAAoBjK,KAChD,OAAO+K,SAUX1P,OAAOuO,gBAAkB,WACrB,GAAIvO,OAAOsH,mBAAmBU,kBAAoBxC,QAAQnS,OAAS2M,OAAO+I,iBAAiBD,MAAMzV,OAAQ,CACrG2M,OAAO+I,iBAAiByC,iBAGhCxL,OAAOoF,iBACPpF,OAAOmF,SAAW,KAClBnF,OAAOyI,kBACPzI,OAAOsH,sBACPtH,OAAOyN,kBAAoB,KAC3BzN,OAAO8J,gBACP9J,OAAOsF,kBAAoB,KAC3BtF,OAAOuF,UAAY,KACnBvF,OAAO4F,OAAS,KAChB5F,OAAO0N,WAAa,IACpB1N,OAAO6M,sBAAwB,gBAC/B7M,OAAO8M,oBAAsB,sBAC7B9M,OAAOgN,sBAAwB,wBAC/BhN,OAAO+L,qBAAuB,aAC9B/L,OAAOsJ,cAAgB,eACvBtJ,OAAOqF,sBACHnF,aAAc,KACdC,oBAAqB,OAEzBH,OAAO0H,0BACHiI,QAAS,KACT9U,QAAS,MACTkN,OAAQ,MAEZ,OAAO/H,OA5qCgB,GA8qC3B3J,UAAU2J,OAASA,QAvwCvB,CAwwCG3J,UAAYJ,IAAII,YAAcJ,IAAII,gBA1wCzC,CA2wCGJ,MAAQA,SACX,IAAIA,KACJ,SAAWA,KACP,IAAII,WACJ,SAAWA,WACP,IAAI4H,QAAUhI,IAAIgI,QAClB,IAAIY,IAAM,wBAKV,IAAI+Q,KAAsB,WActB,SAASA,KAAKC,KAAMC,IAAK9Q,SACrB5I,KAAKyZ,KAAOA,KACZzZ,KAAK0Z,IAAMA,IACX1Z,KAAK2Z,MAAM/Q,SAEfxL,OAAOgB,eAAeob,KAAKnc,UAAW,UAGlCkB,IAAK,WAAc,QAASyB,KAAK4Z,QAAU5Z,KAAK4Z,OAAOvT,SAAS,mBAChE/H,WAAY,KACZD,aAAc,OAElBjB,OAAOgB,eAAeob,KAAKnc,UAAW,OAClCkB,IAAK,WAAc,OAAOyB,KAAKyZ,MAC/Bnb,WAAY,KACZD,aAAc,OAElBjB,OAAOgB,eAAeob,KAAKnc,UAAW,MAClCkB,IAAK,WAAc,OAAOyB,KAAK0Z,KAC/Bpb,WAAY,KACZD,aAAc,OAElBjB,OAAOgB,eAAeob,KAAKnc,UAAW,SAClCkB,IAAK,WAAc,OAAOyB,KAAK4Z,QAC/Btb,WAAY,KACZD,aAAc,OAElBjB,OAAOgB,eAAeob,KAAKnc,UAAW,WAClCkB,IAAK,WAAc,OAAOyB,KAAK6Z,UAC/Bvb,WAAY,KACZD,aAAc,OAElBjB,OAAOgB,eAAeob,KAAKnc,UAAW,WAClCkB,IAAK,WAAc,OAAOyB,KAAK8Z,UAC/Bxb,WAAY,KACZD,aAAc,OAElBjB,OAAOgB,eAAeob,KAAKnc,UAAW,UAClCkB,IAAK,WAAc,OAAOyB,KAAK+Z,SAC/BC,IAAK,SAAUC,WAAaja,KAAK+Z,QAAUE,UAAWja,KAAK+Z,QAAQG,QAAU,MAC7E5b,WAAY,KACZD,aAAc,OAKlBmb,KAAKnc,UAAUwQ,qBAAuB,SAAUD,gBAC5C,GAAI5N,KAAKma,OAAQ,CACbna,KAAKma,OAAOtM,qBAAqBD,kBAIzC4L,KAAKnc,UAAU8N,qBAAuB,SAAU3C,OAC5C,GAAIxI,KAAKma,OAAQ,CACb,OAAOna,KAAKma,OAAOhP,qBAAqB3C,WAEvC,CACD,OAAO,QAIfgR,KAAKnc,UAAUkO,oBAAsB,WACjC,GAAIvL,KAAKma,OAAQ,CACb,OAAOna,KAAKma,OAAO5O,0BAElB,CACD,OAAO1D,QAAQE,YAIvByR,KAAKnc,UAAU+c,UAAY,SAAU5R,MAAO6R,MACxC,GAAIra,KAAKma,OAAQ,CACb,OAAOna,KAAKma,OAAOC,UAAU5R,MAAO6R,UAEnC,CACD,OAAO,QAIfb,KAAKnc,UAAUid,aAAe,SAAU9R,OACpC,GAAIxI,KAAKma,OAAQ,CACbna,KAAKma,OAAOG,aAAa9R,SAIjCgR,KAAKnc,UAAUkd,mBAAqB,SAAU/R,OAC1C,GAAIxI,KAAKma,OAAQ,CACbna,KAAKma,OAAOI,mBAAmB/R,SAIvCgR,KAAKnc,UAAUmd,WAAa,SAAUhS,OAClC,GAAIxI,KAAKma,OAAQ,CACbna,KAAKma,OAAOK,WAAWhS,SAI/BgR,KAAKnc,UAAUod,iBAAmB,SAAUjS,MAAO9L,MAC/C,GAAIsD,KAAKma,OAAQ,CACbna,KAAKma,OAAOM,iBAAiBjS,MAAO9L,QAI5C8c,KAAKnc,UAAUqd,WAAa,SAAUlS,MAAO9L,MACzC,GAAIsD,KAAKma,OAAQ,CACbna,KAAKma,OAAOO,WAAWlS,MAAO9L,QAItC8c,KAAKnc,UAAUsd,iBAAmB,SAAUnS,MAAO9L,MAC/C,GAAIsD,KAAKma,OAAQ,CACbna,KAAKma,OAAOQ,iBAAiBnS,MAAO9L,QAI5C8c,KAAKnc,UAAUud,WAAa,SAAUpS,MAAO9L,MACzC,GAAIsD,KAAKma,OAAQ,CACbna,KAAKma,OAAOS,WAAWpS,MAAO9L,QAItC8c,KAAKnc,UAAUwd,aAAe,SAAUrS,OACpC,GAAIxI,KAAKma,OAAQ,CACbna,KAAKma,OAAOU,aAAarS,SAMjCgR,KAAKnc,UAAUsc,MAAQ,SAAU/Q,SAC7B,IAAIsE,MAAQlN,KAEZA,KAAK8a,aAAe,MACpB9a,KAAK+Z,QAAU,KAEf,IAAIxV,SAAW,IAAMvE,KAAK0Z,IAC1B1V,EAAEnC,UACGuC,IAAI,mBAAoBG,UACxBL,GAAG,mBAAoBK,SAAU,SAAUiE,OAC5C0E,MAAM0M,OAAS5V,EAAEO,UAAUwW,QAC3B7N,MAAM2M,SAAW3M,MAAM0M,OAAOoB,SAAS,yBAAyBD,QAChE7N,MAAM4M,SAAW5M,MAAM0M,OAAOoB,SAAS,yBAAyBD,QAChE7N,MAAM0M,OACD1V,GAAG,aAAc,SAAU+W,IAC5B/N,MAAMgO,SAASD,MAEd/W,GAAG,iBAAkB,SAAU+W,GAAIve,MACpCwQ,MAAMiO,eAAeF,GAAIve,QAExBwH,GAAG,WAAY,SAAU+W,GAAIve,MAC9BwQ,MAAMkO,SAASH,GAAIve,QAElBwH,GAAG,iBAAkB,SAAU+W,GAAIve,MACpCwQ,MAAMmO,eAAeJ,GAAIve,QAExBwH,GAAG,WAAY,SAAU+W,GAAIve,MAC9BwQ,MAAMoO,SAASL,GAAIve,QAElBwH,GAAG,aAAc,SAAU+W,IAC5B/N,MAAMqO,WAAWN,MAErB/N,MAAMsO,iBAAiBhT,SAE3BI,QAAUA,YAEV5I,KAAKma,OAASvR,QAAQ6S,MAEtBzb,KAAK0b,YAAc9S,QAAQ+S,WAE3B,GAAI,MAAQ/S,QAAQoH,MAAO,CACvBpH,QAAQoH,MAAQhQ,KAAK0Z,IAEzBzZ,UAAU2J,OAAOmG,SAASnH,QAAQoH,MAAOhQ,KAAKyZ,KAAM7Q,QAAQqH,IAAKrH,QAAQsH,WAG7EsJ,KAAKnc,UAAUue,aAAe,WAC1B,IAAI/I,YAAc5S,UAAU2J,OAAO+I,iBAAiBE,YACpD,IAAIgJ,UAAY5b,UAAU2J,OAAO+I,iBAAiBuF,cAClD,GAAI,MAAQrF,aAAe,MAAQgJ,UAAW,CAC1C,MAAO,eAEN,GAAIA,YAAchJ,YAAa,CAChC,MAAO,YAEN,GAAIA,YAAcgJ,UAAW,CAC9B,MAAO,WAEN,CACD,MAAO,YAGfrC,KAAKnc,UAAUme,iBAAmB,SAAUhT,OACxCxI,KAAKua,mBAAmB/R,QAE5BgR,KAAKnc,UAAU6d,SAAW,SAAU1S,OAChC,IAAKxI,KAAK8a,aAAc,CACpB9a,KAAKsa,aAAa9R,OAClBxI,KAAK8a,aAAe,KAExB9a,KAAKwa,WAAWhS,QAEpBgR,KAAKnc,UAAU8d,eAAiB,SAAU3S,MAAO9L,MAC7CuD,UAAUwL,eAAezL,MACzBA,KAAK+Z,QAAU9Z,UAAU2J,OAAO+J,aAChC3T,KAAKya,iBAAiBjS,MAAOxE,EAAE0J,OAAOhR,MAAQ6Z,UAAWvW,KAAK4b,mBAElEpC,KAAKnc,UAAU+d,SAAW,SAAU5S,MAAO9L,MACvCsD,KAAK0a,WAAWlS,MAAOxE,EAAE0J,OAAOhR,MAAQ6Z,UAAWvW,KAAK4b,mBAE5DpC,KAAKnc,UAAUge,eAAiB,SAAU7S,MAAO9L,MAC7CsD,KAAK2a,iBAAiBnS,MAAOxE,EAAE0J,OAAOhR,MAAQ6Z,UAAWvW,KAAK4b,kBAC9D,GAAI,MAAQ5b,KAAK+Z,UAAY/Z,KAAK0b,aAAe1b,KAAK+Z,QAAQG,SAAU,QAC7Dla,KAAK+Z,QAAQG,QACpBja,UAAU2J,OAAO6J,YAAYzT,KAAK+Z,cAEjC,GAAI9Z,UAAU2J,OAAO2K,mBAAqBtU,UAAU2J,OAAOwK,cAAe,CAC3EnU,UAAU2J,OAAO6J,YAAYzT,KAAK+Z,SAEtC/Z,KAAK+Z,QAAU,KACf9Z,UAAUwL,eAAe,OAE7B+N,KAAKnc,UAAUie,SAAW,SAAU9S,MAAO9L,MACvCsD,KAAK4a,WAAWpS,MAAOxE,EAAE0J,OAAOhR,MAAQ6Z,UAAWvW,KAAK4b,mBAE5DpC,KAAKnc,UAAUke,WAAa,SAAU/S,OAClCxI,KAAK6a,aAAarS,OAClBxI,KAAK4Z,OAAOxV,MACZpE,KAAK4Z,OAAS,KACd5Z,KAAK6Z,SAASzV,MACdpE,KAAK6Z,SAAW,KAChB7Z,KAAK8Z,SAAS1V,MACdpE,KAAK8Z,SAAW,MAEpB,OAAON,KAvPc,GAyPzBvZ,UAAUuZ,KAAOA,MAhQrB,CA2TGvZ,UAAYJ,IAAII,YAAcJ,IAAII,gBA7TzC,CA8TGJ,MAAQA,SAEX,OAAOA,IAAII,cAET1C,KAAKnB,SAID0f,8CAKA,SAAU9f,OAAQD,QAAS6B,qBAEjC,IAAI+B,6BAA8BC,+BACjC,YAMC,SAAW9D,SACT,GAAI,KAAM,GAEJ6D,8BAAgC/B,oBAAkC,WAAYgC,8BAAgC,SAAWoE,GACvH,OAAOlI,QAAQkI,EAAG5H,SACnB0D,MAAM/D,QAAS4D,8BACVC,gCAAkCG,YAAc/D,OAAOD,QAAU6D,oCACtE,IAPT,CAQC,SAAUmc,OAAQ3f,QACjB,aAEA2f,OAAOC,eAAiB,gBAIxB,WAKI,IAAIC,IAAM7f,OAAO+C,SAAW/C,OAAO+C,QAAQ8c,KACvC,WACI7f,OAAO+C,QAAQ8c,IAAInc,MAAM1D,OAAO+C,QAASsY,YAE7CyE,aAAe,UAEnB,IAAKD,IAAK,CACN,OAIJ,IAAKF,QAAUG,aAAa3J,KAAKwJ,OAAO9X,GAAG2C,QAAS,CAChDqV,IAAI,qCAER,GAAIF,OAAOI,gBAAiB,CACxBF,IAAI,mDAIR,IAAKF,OAAOzP,YAAa,CACrB2P,IAAI,mCACCF,OAAOzP,YAAc,GAAK,wBAC3B,aAAeyP,OAAOC,kBA3BlC,GA+BA,IAAII,eAGJL,OAAOI,mBAGP,GAAIJ,OAAOM,eAAiBtc,UAAW,CACnCgc,OAAOM,aAAe,KAI1BN,OAAOO,aAAe,WAClBF,eACAL,OAAOI,gBAAgBlf,OAAS,GAGpC,SAASsf,YAAYC,KACjB,IAAIrd,QAAU/C,OAAO+C,QACrB,IAAKid,YAAYI,KAAM,CACnBJ,YAAYI,KAAO,KACnBT,OAAOI,gBAAgBhf,KAAKqf,KAC5B,GAAIrd,SAAWA,QAAQgL,OAAS4R,OAAOzP,YAAa,CAChDnN,QAAQgL,KAAK,cAAgBqS,KAC7B,GAAIT,OAAOM,cAAgBld,QAAQsd,MAAO,CACtCtd,QAAQsd,WAMxB,SAASC,gBAAgBC,IAAKC,KAAMne,MAAO+d,KACvCpf,OAAOgB,eAAeue,IAAKC,MACvBve,aAAc,KACdC,WAAY,KACZC,IAAK,WACDge,YAAYC,KACZ,OAAO/d,OAEXub,IAAK,SAAU6C,UACXN,YAAYC,KACZ/d,MAAQoe,YAKpB,SAASC,gBAAgBH,IAAKC,KAAMG,QAASP,KACzCG,IAAIC,MAAQ,WACRL,YAAYC,KACZ,OAAOO,QAAQjd,MAAME,KAAMyX,YAInC,GAAIrb,OAAOyF,SAASmb,aAAe,aAAc,CAE7CT,YAAY,6CAIhB,IAAIU,QAAUlB,OAAO9X,GAAGiZ,KACpBC,aAAepB,OAAOqB,UACtBC,QAAUtB,OAAO3J,KACjBkL,cAAgB,wDAChBC,cAAgB,yDAEpBxB,OAAO9X,GAAGiZ,KAAO,SAAUM,MACvB,IAAIjG,KAAOtE,MAAM5V,UAAUmC,MAAMjC,KAAKka,WAEtC,UAAW+F,OAAS,UAAYA,OAAS,IAAK,CAE1CjB,YAAY,yCACZhF,KAAK,MAGT,OAAO0F,QAAQnd,MAAME,KAAMuX,OAE/BwE,OAAO9X,GAAGiZ,KAAK7f,UAAY0e,OAAO9X,GAElC8X,OAAO3J,KAAO,SAAU7N,UACpB,IAAIgT,KAAOtE,MAAM5V,UAAUmC,MAAMjC,KAAKka,WAItC,UAAWlT,WAAa,UAAY+Y,cAAc/K,KAAKhO,UAAW,CAG9D,IACInI,OAAOyF,SAAS4b,cAAclZ,UAChC,MAAOmZ,MAELnZ,SAAWA,SAASE,QAAQ8Y,cAAe,SAAU7Y,EAAG4R,KAAMqH,GAAIlf,OAC9D,MAAO,IAAM6X,KAAOqH,GAAK,IAAOlf,MAAQ,OAK5C,IACIrC,OAAOyF,SAAS4b,cAAclZ,UAC9BgY,YAAY,+CAAiDhF,KAAK,IAClEA,KAAK,GAAKhT,SACZ,MAAOqZ,MACLrB,YAAY,8CAAgDhF,KAAK,MAK7E,OAAO8F,QAAQvd,MAAME,KAAMuX,OAI/B,IAAIsG,SACJ,IAAKA,YAAYR,QAAS,CACtB,GAAIjgB,OAAOC,UAAUC,eAAeC,KAAK8f,QAASQ,UAAW,CACzD9B,OAAO3J,KAAKyL,UAAYR,QAAQQ,WAKxC9B,OAAO9X,GAAG6Z,KAAO,WACbvB,YAAY,wEACZ,OAAOvc,KAAK/C,QAGhB8e,OAAOgC,UAAY,WACfxB,YAAY,kDACZ,OAAOyB,KAAKC,MAAMne,MAAM,KAAM2X,YAGlCsE,OAAOqB,UAAY,SAAUc,KAEzB,SAASC,WAAWxB,KAChB,IAAIyB,cAAgBzB,KAAOA,IAAI0B,WAC/B,OAAQtC,OAAOuC,QAAQ3B,MAASyB,cAAgBG,WAAWH,eAAiB,GAAM,EAGtF,IAAIvB,SAAWM,aAAae,KACxBM,SAAWL,WAAWD,KAE1B,GAAIrB,WAAa2B,SAAU,CACvBjC,YAAY,kEAGhB,OAAOiC,UAGX1B,gBAAgBf,OAAQ,SAAUA,OAAO0C,WACrC,sDAGJ/B,gBAAgBX,OAAO2C,KAAM,UAAW3C,OAAO2C,KAAKC,QAChD,8DACJjC,gBAAgBX,OAAO2C,KAAM,IAAK3C,OAAO2C,KAAKC,QAC1C,2DAGJ,IAAIC,QAAU7C,OAAO8C,KAErB9C,OAAO8C,KAAO,WACV,IAAIC,MAAQF,QAAQ9e,MAAME,KAAMyX,WAGhC,GAAIqH,MAAMhW,QAAS,CACfgU,gBAAgBgC,MAAO,UAAWA,MAAMxZ,KACpC,2CACJwX,gBAAgBgC,MAAO,QAASA,MAAMxU,KAClC,yCACJwS,gBAAgBgC,MAAO,WAAYA,MAAMvV,OACrC,4CAGR,OAAOuV,OAIX,IAAIC,cAAgBhD,OAAO9X,GAAGuC,WAC1BwY,eAAiBjD,OAAO9X,GAAGgb,YAC3BC,eAAiB,OAErBnD,OAAO9X,GAAGuC,WAAa,SAAUvI,MAC7B,IAAIiH,KAAOlF,KAEX+b,OAAOoD,KAAKlhB,KAAKuD,MAAM0d,gBAAiB,SAAUniB,EAAGuZ,MACjD,GAAIyF,OAAO2C,KAAKld,MAAM4d,KAAK7M,KAAK+D,MAAO,CACnCiG,YAAY,2DAA6DjG,MACzEpR,KAAK0X,KAAKtG,KAAM,UAIxB,OAAOyI,cAAcjf,MAAME,KAAMyX,YAGrCsE,OAAO9X,GAAGgb,YAAc,SAAUpW,OAE9B,GAAIA,QAAU9I,kBAAoB8I,QAAU,UAAW,CACnD,OAAOmW,eAAelf,MAAME,KAAMyX,WAGtC8E,YAAY,kDAGZ,OAAOvc,KAAKmf,KAAK,WACb,IAAIE,UAAYrf,KAAKsf,cAAgBtf,KAAKsf,aAAa,UAAY,GAEnE,GAAID,UAAW,CACXtD,OAAOrf,KAAKsD,KAAM,gBAAiBqf,WAOvC,GAAIrf,KAAKuf,aAAc,CACnBvf,KAAKuf,aAAa,QACdF,WAAaxW,QAAU,MACvB,GACAkT,OAAOrf,KAAKsD,KAAM,kBAAoB,QAOtD,IAAIwf,iBAAmB,MAGvB,GAAIzD,OAAO0D,KAAM,CACb1D,OAAOoD,MAAM,SAAU,QAAS,uBAAwB,SAAUza,EAAGzG,MACjE,IAAIyhB,QAAU3D,OAAO4D,SAAS1hB,OAAS8d,OAAO4D,SAAS1hB,MAAMM,IAE7D,GAAImhB,QAAS,CACT3D,OAAO4D,SAAS1hB,MAAMM,IAAM,WACxB,IAAIqhB,IAEJJ,iBAAmB,KACnBI,IAAMF,QAAQ5f,MAAME,KAAMyX,WAC1B+H,iBAAmB,MACnB,OAAOI,QAMvB7D,OAAO0D,KAAO,SAAUI,KAAMjX,QAASsH,SAAUqH,MAC7C,IAAIqI,IAAK3hB,KACL6hB,OAEJ,IAAKN,iBAAkB,CACnBjD,YAAY,gDAIhB,IAAKte,QAAQ2K,QAAS,CAClBkX,IAAI7hB,MAAQ4hB,KAAK9d,MAAM9D,MACvB4hB,KAAK9d,MAAM9D,MAAQ2K,QAAQ3K,MAG/B2hB,IAAM1P,SAASpQ,MAAM+f,KAAMtI,UAG3B,IAAKtZ,QAAQ2K,QAAS,CAClBiX,KAAK9d,MAAM9D,MAAQ6hB,IAAI7hB,MAG3B,OAAO2hB,KAGX,IAAIG,QAAUhE,OAAOrf,KAErBqf,OAAOrf,KAAO,SAAUmjB,KAAM5hB,KAAMQ,OAChC,IAAIuhB,QAGJ,GAAI/hB,aAAeA,OAAS,UAAYwZ,UAAUxa,SAAW,EAAG,CAC5D+iB,QAAUjE,OAAOkE,QAAQJ,OAASE,QAAQxiB,KAAKyC,KAAM6f,MACrD,IAAIK,YACJ,IAAK,IAAItV,OAAO3M,KAAM,CAClB,GAAI2M,MAAQmR,OAAOoE,UAAUvV,KAAM,CAC/B2R,YAAY,oDAAsD3R,KAClEoV,QAAQpV,KAAO3M,KAAK2M,SACjB,CACHsV,SAAStV,KAAO3M,KAAK2M,MAI7BmV,QAAQxiB,KAAKyC,KAAM6f,KAAMK,UAEzB,OAAOjiB,KAIX,GAAIA,aAAeA,OAAS,UAAYA,OAAS8d,OAAOoE,UAAUliB,MAAO,CACrE+hB,QAAUjE,OAAOkE,QAAQJ,OAASE,QAAQxiB,KAAKyC,KAAM6f,MACrD,GAAIG,SAAW/hB,QAAQ+hB,QAAS,CAC5BzD,YAAY,oDAAsDte,MAClE,GAAIwZ,UAAUxa,OAAS,EAAG,CACtB+iB,QAAQ/hB,MAAQQ,MAEpB,OAAOuhB,QAAQ/hB,OAIvB,OAAO8hB,QAAQjgB,MAAME,KAAMyX,YAG/B,IAAI2I,YAAcrE,OAAOsE,MAAMhjB,UAAUijB,IAEzCvE,OAAOsE,MAAMhjB,UAAUijB,IAAM,WACzB,GAAIvE,OAAOwE,OAAOvgB,KAAKugB,QAAQtjB,OAAS,EAAG,CACvCsf,YACI,mBACA,kBAAqBvc,KAAKugB,OAAOlC,WACjC,oCAGJ,IAAImC,UAAYzE,OAAOwE,OAAOvgB,KAAKugB,QACnCxE,OAAOwE,OAAOvgB,KAAKugB,QAAU,SAAUE,SACnC,OAAOD,UAAUjjB,KAAKwe,OAAOwE,OAAQE,QAASA,QAAS,EAAG,EAAG,IAC/DlhB,KAAKS,MAGXogB,YAAYtgB,MAAME,KAAMyX,YAG5BsE,OAAO2E,GAAGC,SAAW5E,OAAO2E,GAAGC,UAAY,GAI3C,GAAIvkB,OAAOwkB,sBAAuB,CAC9BlE,gBAAgBX,OAAO2E,GAAI,WAAY3E,OAAO2E,GAAGC,SAC7C,oCAGR,IAAIE,QAAU9E,OAAO9X,GAAG6c,KACpBC,YAAchF,OAAOvT,MAAMwY,IAC3BC,YAAclF,OAAOvT,MAAM0Y,IAE/BnF,OAAOvT,MAAM2Y,SACbpF,OAAOvT,MAAM4Y,YAEb1E,gBAAgBX,OAAOvT,MAAM2Y,MAAO,SAAUpF,OAAOvT,MAAM2Y,MAAME,OAC7D,yDAEJtF,OAAOvT,MAAM0Y,IAAM,SAAUI,eACzB,IAAI9Y,MACA+Y,KAAOD,cAAcC,KACrBC,QAAUxhB,KAAKohB,SAASG,MACxBJ,MAAQpF,OAAOvT,MAAM2Y,MAEzB,GAAIA,MAAMlkB,OAAQ,CACdsf,YAAY,kDAAoD4E,MAAMM,QACtE,MAAON,MAAMlkB,OAAQ,CACjB8e,OAAOvT,MAAMkZ,QAAQP,MAAMQ,QAInC,GAAIH,UAAYA,QAAQI,WAAY,CAChCJ,QAAQI,WAAa,KACrBrF,YAAY,qDAAuDgF,MACnE,IAAKJ,MAAQK,QAAQL,QAAUA,MAAMlkB,OAAQ,CACzC,MAAOkkB,MAAMlkB,OAAQ,CACjB8e,OAAOvT,MAAMkZ,QAAQP,MAAMQ,SAKvCnZ,MAAQyY,YAAY1jB,KAAKyC,KAAMshB,eAE/B,OAAOE,SAAWA,QAAQK,OAASL,QAAQK,OAAOrZ,MAAO8Y,eAAiB9Y,OAG9EuT,OAAOvT,MAAMwY,IAAM,SAAUnB,KAAMvb,OAE/B,GAAIub,OAASzjB,QAAUkI,QAAU,QAAUlI,OAAOyF,SAASigB,aAAe,WAAY,CAClFvF,YAAY,iEAEhB,OAAOwE,YAAYjhB,MAAME,KAAMyX,YAGnCsE,OAAOoD,MAAM,OAAQ,SAAU,SAAU,SAAUza,EAAGzG,MAElD8d,OAAO9X,GAAGhG,MAAQ,WACd,IAAIsZ,KAAOtE,MAAM5V,UAAUmC,MAAMjC,KAAKka,UAAW,GAMjD,GAAIxZ,OAAS,eAAiBsZ,KAAK,KAAO,SAAU,CAChD,OAAOsJ,QAAQ/gB,MAAME,KAAMuX,MAG/BgF,YAAY,aAAete,KAAO,oBAElCsZ,KAAKwK,OAAO,EAAG,EAAG9jB,MAClB,GAAIwZ,UAAUxa,OAAQ,CAClB,OAAO+C,KAAKkE,GAAGpE,MAAME,KAAMuX,MAO/BvX,KAAKgiB,eAAeliB,MAAME,KAAMuX,MAChC,OAAOvX,QAMf+b,OAAO,WACHA,OAAO3f,OAAOyF,UAAUmgB,eAAe,WAG3CjG,OAAOvT,MAAMyZ,QAAQC,OACjBvI,MAAO,WACH,GAAI3Z,OAAS5D,OAAOyF,SAAU,CAC1B0a,YAAY,kCAKxBR,OAAO9X,GAAGyJ,QACNnO,KAAM,SAAU+E,MAAO5H,KAAMuH,IACzBsY,YAAY,kCACZ,OAAOvc,KAAKkE,GAAGI,MAAO,KAAM5H,KAAMuH,KAEtCke,OAAQ,SAAU7d,MAAOL,IACrBsY,YAAY,oCACZ,OAAOvc,KAAKoE,IAAIE,MAAO,KAAML,KAEjCme,SAAU,SAAU7d,SAAUD,MAAO5H,KAAMuH,IACvCsY,YAAY,sCACZ,OAAOvc,KAAKkE,GAAGI,MAAOC,SAAU7H,KAAMuH,KAE1Coe,WAAY,SAAU9d,SAAUD,MAAOL,IACnCsY,YAAY,wCACZ,OAAO9E,UAAUxa,SAAW,EACxB+C,KAAKoE,IAAIG,SAAU,MACnBvE,KAAKoE,IAAIE,MAAOC,UAAY,KAAMN,OAK9C,IAAIqe,UAAYvG,OAAO9X,GAAGse,OAE1BxG,OAAO9X,GAAGse,OAAS,WACf,IAAIC,QACA3C,KAAO7f,KAAK,GACZyiB,QAAWxS,IAAK,EAAGyS,KAAM,GAE7B,IAAK7C,OAASA,KAAK8C,SAAU,CACzBpG,YAAY,mDACZ,OAAOkG,OAGXD,SAAW3C,KAAK+C,eAAiBxmB,OAAOyF,UAAUC,gBAClD,IAAKia,OAAO8G,SAASL,QAAS3C,MAAO,CACjCtD,YAAY,kEACZ,OAAOkG,OAGX,OAAOH,UAAUxiB,MAAME,KAAMyX,YAIjC,IAAIqL,SAAW/G,OAAO/C,MAEtB+C,OAAO/C,MAAQ,SAAUtc,KAAMqmB,aAC3B,IAAIC,gBAAkBjH,OAAOkH,cAAgBlH,OAAOkH,aAAaF,YAEjE,GAAIA,cAAgBhjB,WAAaijB,gBAAiB,CAC9CzG,YAAY,iEACZwG,YAAcC,gBAGlB,OAAOF,SAASvlB,KAAKyC,KAAMtD,KAAMqmB,cAGrC,IAAIG,QAAUnH,OAAO9X,GAAGkf,SAAWpH,OAAO9X,GAAGmf,QAE7CrH,OAAO9X,GAAGkf,QAAU,WAChB5G,YAAY,0EACZ,OAAO2G,QAAQpjB,MAAME,KAAMyX,YAI/B,IAAI4L,YAActH,OAAO3W,SACrBke,SAEK,UAAW,OAAQvH,OAAOwH,UAAU,eACjCxH,OAAOwH,UAAU,eAAgB,aACpC,SAAU,OAAQxH,OAAOwH,UAAU,eAChCxH,OAAOwH,UAAU,eAAgB,aACpC,SAAU,WAAYxH,OAAOwH,UAAU,UACpCxH,OAAOwH,UAAU,YAG7BxH,OAAO3W,SAAW,SAAUoe,MACxB,IAAIC,SAAWJ,cACXva,QAAU2a,SAAS3a,UAEvB2a,SAASC,KAAO5a,QAAQ4a,KAAO,WAC3B,IAAIC,IAAMlM,UAEV8E,YAAY,iCAEZ,OAAOR,OAAO3W,SAAS,SAAUwe,UAC7B7H,OAAOoD,KAAKmE,OAAQ,SAAUvmB,EAAG8mB,OAC7B,IAAI5f,GAAK8X,OAAO+H,WAAWH,IAAI5mB,KAAO4mB,IAAI5mB,GAK1C0mB,SAASI,MAAM,IAAI,WACf,IAAIE,SAAW9f,IAAMA,GAAGnE,MAAME,KAAMyX,WACpC,GAAIsM,UAAYhI,OAAO+H,WAAWC,SAASjb,SAAU,CACjDib,SAASjb,UACJxD,KAAKse,SAAS7b,SACduC,KAAKsZ,SAAS5Z,QACdga,SAASJ,SAASK,YACpB,CACHL,SAASC,MAAM,GAAK,QAChB7jB,OAAS8I,QAAU8a,SAAS9a,UAAY9I,KACxCiE,IAAM8f,UAAYtM,gBAKlCkM,IAAM,OACP7a,WAIP,GAAI0a,KAAM,CACNA,KAAKjmB,KAAKkmB,SAAUA,UAGxB,OAAOA,UAIX,OAAO1H,WAGTxe,KAAKnB,SAID8nB,6CAKA,SAAUloB,OAAQD,QAAS6B,qBAEjC,IAAI+B,6BAA8BC,+BACjC,YAcA,SAAW/D,KAAMsoB,IAAKroB,SACnB,GAAK,KAAO,GAEN6D,8BAAiC/B,oBAAkC,WAAagC,8BAAgC,SAAYoE,GAC1HlI,QAASkI,EAAGnI,KAAMsoB,KAClB,OAAOngB,EAAE0B,QACV5F,MAAM/D,QAAS4D,8BACVC,gCAAkCG,YAAc/D,OAAOD,QAAU6D,oCACtE,IARX,CASGI,KAAM6B,SAAU,SAAWka,OAAQ3f,OAAQyF,SAAU9B,YACvD,SAAUiE,GACPA,EAAE0B,WADN,CAEGqW,SAYH,SAAW/X,EAAGjE,WAEd,IAAIqkB,KAAO,EACPC,UAAY,cAGhBrgB,EAAEsgB,GAAKtgB,EAAEsgB,OAETtgB,EAAE0J,OAAQ1J,EAAEsgB,IACR/iB,QAAS,2CAETgjB,SACIC,UAAW,EACXC,MAAO,IACPC,OAAQ,GACRC,KAAM,GACNC,IAAK,GACLC,MAAO,GACPC,OAAQ,GACRC,KAAM,GACNC,KAAM,GACNC,UAAW,GACXC,QAAS,GACTC,OAAQ,IACRC,MAAO,GACPC,MAAO,GACPC,IAAK,EACLC,GAAI,MAKZvhB,EAAEC,GAAGyJ,QACD8X,MAAO,SAAWC,MACd,OAAO,SAAUC,MAAOzhB,IACpB,cAAcyhB,QAAU,SACpB1lB,KAAKmf,KAAK,WACN,IAAIU,KAAO7f,KACXgI,WAAW,WACPhE,EAAG6b,MAAO2F,QACV,GAAKvhB,GAAK,CACNA,GAAG1G,KAAMsiB,QAEd6F,SAEPD,KAAK3lB,MAAOE,KAAMyX,YAZvB,CAcHzT,EAAEC,GAAGuhB,OAETG,aAAc,WACV,IAAIA,aACJ,GAAK3hB,EAAEsgB,GAAGsB,IAAM,oBAAsBrT,KAAKvS,KAAK6lB,IAAI,cAAiB,WAAatT,KAAKvS,KAAK6lB,IAAI,aAAc,CAC1GF,aAAe3lB,KAAK8lB,UAAUjE,OAAO,WACjC,MAAO,4BAA8BtP,KAAKvO,EAAE6hB,IAAI7lB,KAAK,cAAgB,gBAAkBuS,KAAKvO,EAAE6hB,IAAI7lB,KAAK,YAAYgE,EAAE6hB,IAAI7lB,KAAK,cAAcgE,EAAE6hB,IAAI7lB,KAAK,iBACxJ+lB,GAAG,OACH,CACHJ,aAAe3lB,KAAK8lB,UAAUjE,OAAO,WACjC,MAAO,gBAAkBtP,KAAKvO,EAAE6hB,IAAI7lB,KAAK,YAAYgE,EAAE6hB,IAAI7lB,KAAK,cAAcgE,EAAE6hB,IAAI7lB,KAAK,iBAC1F+lB,GAAG,GAGV,MAAO,QAAYxT,KAAMvS,KAAK6lB,IAAK,eAAkBF,aAAa1oB,OAAS+G,EAAGhE,KAAM,GAAI4iB,eAAiB/gB,UAAa8jB,cAG1HK,SAAU,WACN,OAAOhmB,KAAKmf,KAAK,WACb,IAAMnf,KAAKimB,GAAK,CACZjmB,KAAKimB,GAAK,YAAc7B,SAKpC8B,eAAgB,WACZ,OAAOlmB,KAAKmf,KAAK,WACb,GAAKkF,UAAU9R,KAAMvS,KAAKimB,IAAO,CAC7BjiB,EAAGhE,MAAOwG,WAAY,YAOtC,SAAS2f,UAAWC,QAASC,kBACzB,IAAIC,IAAKC,QAASC,IACdC,SAAWL,QAAQK,SAASrlB,cAChC,GAAK,SAAWqlB,SAAW,CACvBH,IAAMF,QAAQM,WACdH,QAAUD,IAAIroB,KACd,IAAMmoB,QAAQpQ,OAASuQ,SAAWD,IAAIG,SAASrlB,gBAAkB,MAAQ,CACrE,OAAO,MAEXolB,IAAMxiB,EAAG,eAAiBuiB,QAAU,KAAM,GAC1C,QAASC,KAAOG,QAASH,KAE7B,OAAS,sCAAsCjU,KAAMkU,WAChDL,QAAQQ,SACT,MAAQH,SACJL,QAAQpQ,MAAQqQ,iBAChBA,mBAEJM,QAASP,SAGjB,SAASO,QAASP,SACd,OAAOpiB,EAAE0a,KAAKmI,QAAQF,QAASP,WAC1BpiB,EAAGoiB,SAAUN,UAAU1C,UAAUvB,OAAO,WACrC,OAAO7d,EAAE6hB,IAAK7lB,KAAM,gBAAmB,WACxC/C,OAGX+G,EAAE0J,OAAQ1J,EAAE0a,KAAM,MACdhiB,KAAMsH,EAAE0a,KAAKoI,aACT9iB,EAAE0a,KAAKoI,aAAa,SAAUC,UAC1B,OAAO,SAAUlH,MACb,QAAS7b,EAAEtH,KAAMmjB,KAAMkH,aAI/B,SAAUlH,KAAM9iB,EAAGyE,OACf,QAASwC,EAAEtH,KAAMmjB,KAAMre,MAAO,KAGtC2kB,UAAW,SAAUC,SACjB,OAAOD,UAAWC,SAAUY,MAAOhjB,EAAEsS,KAAM8P,QAAS,eAGxDa,SAAU,SAAUb,SAChB,IAAIc,SAAWljB,EAAEsS,KAAM8P,QAAS,YAC5Be,cAAgBH,MAAOE,UAC3B,OAASC,eAAiBD,UAAY,IAAOf,UAAWC,SAAUe,kBAK1E,IAAMnjB,EAAG,OAAQojB,WAAY,GAAIxgB,OAAS,CACtC5C,EAAEmb,MAAQ,QAAS,UAAY,SAAUpiB,EAAGkB,MACxC,IAAIopB,KAAOppB,OAAS,SAAY,OAAQ,UAAc,MAAO,UACzDsjB,KAAOtjB,KAAKmD,cACZqkB,MACI6B,WAAYtjB,EAAEC,GAAGqjB,WACjBC,YAAavjB,EAAEC,GAAGsjB,YAClBH,WAAYpjB,EAAEC,GAAGmjB,WACjBI,YAAaxjB,EAAEC,GAAGujB,aAG1B,SAASC,OAAQ5H,KAAM/B,KAAM4J,OAAQC,QACjC3jB,EAAEmb,KAAMkI,KAAM,WACVvJ,MAAQS,WAAYva,EAAE6hB,IAAKhG,KAAM,UAAY7f,QAAY,EACzD,GAAK0nB,OAAS,CACV5J,MAAQS,WAAYva,EAAE6hB,IAAKhG,KAAM,SAAW7f,KAAO,WAAe,EAEtE,GAAK2nB,OAAS,CACV7J,MAAQS,WAAYva,EAAE6hB,IAAKhG,KAAM,SAAW7f,QAAY,KAGhE,OAAO8d,KAGX9Z,EAAEC,GAAI,QAAUhG,MAAS,SAAU6f,MAC/B,GAAKA,OAAS/d,UAAY,CACtB,OAAO0lB,KAAM,QAAUxnB,MAAOV,KAAMyC,MAGxC,OAAOA,KAAKmf,KAAK,WACbnb,EAAGhE,MAAO6lB,IAAKtE,KAAMkG,OAAQznB,KAAM8d,MAAS,SAIpD9Z,EAAEC,GAAI,QAAUhG,MAAQ,SAAU6f,KAAM6J,QACpC,UAAY7J,OAAS,SAAW,CAC5B,OAAO2H,KAAM,QAAUxnB,MAAOV,KAAMyC,KAAM8d,MAG9C,OAAO9d,KAAKmf,KAAK,WACbnb,EAAGhE,MAAM6lB,IAAKtE,KAAMkG,OAAQznB,KAAM8d,KAAM,KAAM6J,QAAW,WAOzE,IAAM3jB,EAAEC,GAAGmf,QAAU,CACjBpf,EAAEC,GAAGmf,QAAU,SAAU7e,UACrB,OAAOvE,KAAKghB,IAAKzc,UAAY,KACzBvE,KAAK4nB,WAAa5nB,KAAK4nB,WAAW/F,OAAQtd,YAMtD,GAAKP,EAAG,OAAQtH,KAAM,MAAO,KAAMmrB,WAAY,OAAQnrB,KAAM,OAAU,CACnEsH,EAAEC,GAAG4jB,WAAa,SAAWA,YACzB,OAAO,SAAUjd,KACb,GAAK6M,UAAUxa,OAAS,CACpB,OAAO4qB,WAAWtqB,KAAMyC,KAAMgE,EAAEmc,UAAWvV,UACxC,CACH,OAAOid,WAAWtqB,KAAMyC,QALlB,CAQdgE,EAAEC,GAAG4jB,YAQb7jB,EAAEsgB,GAAGsB,KAAO,cAAc1d,KAAMhH,UAAUC,UAAUC,eAEpD4C,EAAE8jB,QAAQC,YAAc,kBAAmBlmB,SAASmmB,cAAe,OACnEhkB,EAAEC,GAAGyJ,QACDua,iBAAkB,WACd,OAAOjoB,KAAKT,MAAQyE,EAAE8jB,QAAQC,YAAc,cAAgB,aACxD,uBAAwB,SAAUvf,OAC9BA,MAAM0N,oBAIlBgS,gBAAiB,WACb,OAAOloB,KAAKmiB,OAAQ,yBAGxBgG,OAAQ,SAAUA,QACd,GAAKA,SAAWpoB,UAAY,CACxB,OAAOC,KAAK6lB,IAAK,SAAUsC,QAG/B,GAAKnoB,KAAK/C,OAAS,CACf,IAAI4iB,KAAO7b,EAAGhE,KAAM,IAAOooB,SAAU3pB,MACrC,MAAQohB,KAAK5iB,QAAU4iB,KAAM,KAAQhe,SAAW,CAI5CumB,SAAWvI,KAAKgG,IAAK,YACrB,GAAKuC,WAAa,YAAcA,WAAa,YAAcA,WAAa,QAAU,CAK9E3pB,MAAQiD,SAAUme,KAAKgG,IAAK,UAAY,IACxC,IAAMmB,MAAOvoB,QAAWA,QAAU,EAAI,CAClC,OAAOA,OAGfohB,KAAOA,KAAKwI,UAIpB,OAAO,KAKfrkB,EAAEsgB,GAAGgE,QACDtH,IAAK,SAAUhlB,OAAQusB,OAAQvO,KAC3B,IAAIjd,EACAyrB,MAAQxkB,EAAEsgB,GAAItoB,QAASqB,UAC3B,IAAMN,KAAKid,IAAM,CACbwO,MAAMC,QAAS1rB,GAAMyrB,MAAMC,QAAS1rB,OACpCyrB,MAAMC,QAAS1rB,GAAII,MAAQorB,OAAQvO,IAAKjd,OAGhDQ,KAAM,SAAUmrB,SAAUzqB,KAAMsZ,KAAMoR,mBAClC,IAAI5rB,EACAid,IAAM0O,SAASD,QAASxqB,MAE5B,IAAM+b,IAAM,CACR,OAGJ,IAAM2O,qBAAwBD,SAAStC,QAAS,GAAIM,YAAcgC,SAAStC,QAAS,GAAIM,WAAW/D,WAAa,IAAO,CACnH,OAGJ,IAAM5lB,EAAI,EAAGA,EAAIid,IAAI/c,OAAQF,IAAM,CAC/B,GAAK2rB,SAAS9f,QAASoR,IAAKjd,GAAK,IAAQ,CACrCid,IAAKjd,GAAK,GAAI+C,MAAO4oB,SAAStC,QAAS7O,WApRvD,CA0RIwE,SAEJ,SAAW/X,EAAG5H,OAAQ2D,WAKlB,IAAI6oB,mBAAqB,SAAUld,KAAMmd,eACrC,IAAIC,WAAapd,KAAK2c,SAClBU,2BAOAC,UAAY,WACR,IAAIC,WAAajlB,EAAGhE,MAChBkpB,cAAgBllB,EAAE0B,OAAOyjB,SAAWF,WAAWvsB,KAAM,kBACjDusB,WAAWE,QAAS,WAChBf,SAAUa,WAAW3S,KAAM,QAAUtS,EAAE0B,OAAO0jB,GAAK,YACnDC,kBAAqBJ,WAAW3S,KAAM,QAAUtS,EAAE0B,OAAO0jB,GACrD,yBAA4B,OAG5C,QAAUF,cAAcd,WAAa,SACjCc,cAAcG,oBAAsB,OAE5CC,gBAAkBR,WAAW9N,SAAU,2BAA4B6G,OAAQmH,WAC3EO,gBAAkB7d,KAAKsP,SAAU,2BACjCwO,gBAAkBV,WAAW9N,SAAU,2BAA4B6G,OAAQmH,WAC3ES,gBAAkB/d,KAAKsP,SAAU,2BAIrC,GAAKuO,gBAAgBtsB,SAAW,GAAKqsB,gBAAgBrsB,OAAS,EAAI,CAC9D8rB,wBAA0BA,wBAAwB1H,OAAQiI,gBAAgBI,WAK9E,GAAKD,gBAAgBxsB,SAAW,GAAKusB,gBAAgBvsB,OAAS,EAAI,CAC9D8rB,wBAA0BA,wBAAwB1H,OAAQmI,gBAAgBE,WAG9E1lB,EAAEmb,KAAM4J,wBAAyB,SAAUprB,MAAOc,OAC9CoqB,eAAiB7kB,EAAGvF,OAAQ+oB,gBAIhC,OAAOmC,KAAKC,IAAK,EAAGf,gBAGxB7kB,EAAE0J,OAAQ1J,EAAE0B,QAERtJ,OAAQ4H,EAAG5H,QACXyF,SAAUmC,EAAGnC,UAGb0iB,QAASvgB,EAAEsgB,GAAGC,QAGdsF,aAGAC,aAAc,SAAUC,MACpB,GAAK/lB,EAAEud,KAAMwI,QAAW,SAAW,CAC/BA,KAAO/lB,EAAE0B,OAAOskB,kBAIpBhmB,EAAEwE,MAAMyZ,QAAQgI,YAAYC,QAAU,MAEtCliB,WAAW,WACP5L,OAAO+tB,SAAU,EAAGJ,MACpB/lB,EAAE0B,OAAO7D,SAAS0X,QAAS,gBAAkB6Q,EAAG,EAAGC,EAAGN,QACvD,IAEH/hB,WAAW,WACPhE,EAAEwE,MAAMyZ,QAAQgI,YAAYC,QAAU,MACvC,MAGPI,kBAAmB,SAAUC,KAEzB,IAAIhc,IAAMvK,EAAGumB,KAAM9b,QAAS,YAAaC,QAAS,OAC9CJ,KAAOtK,EAAE0B,OAAOqI,KAAKK,aAAaC,WAEtC,IAAMrK,EAAE0B,OAAO8kB,qBAAuBjc,MAAQvK,EAAE0B,OAAOqI,KAAKY,OAAQJ,KAAQ,CACxEA,IAAMD,KAGV,OAAOtK,EAAE0B,OAAOqI,KAAKC,gBAAiBO,IAAKD,OAE/Cmc,sBAAuB,SAAUC,cAC7B,KAAO1mB,EAAE0B,OAAOilB,qBACT3mB,EAAE0B,OAAOilB,kBAAkBlc,QAAS,IAAMzK,EAAE0B,OAAOklB,iBAAkB3tB,QACpEytB,cAAiB,CAErB1mB,EAAE0B,OAAOilB,kBAAkBE,YAAa7mB,EAAE0B,OAAOolB,gBAErD9mB,EAAE0B,OAAOilB,kBAAoB,MAQjCI,kBAAmB,SAAUC,GAAIC,cAC7B,IAAIC,EAAIF,GAAI,GACRG,IAAM,GACNC,GAAK,kCACLrtB,EAAGD,EACP,MAAQotB,EAAI,CACRntB,EAAImtB,EAAE7L,WAAa,GACnB,GAAKthB,IAAOD,EAAIstB,GAAGljB,KAAMnK,MAAWotB,IAAMrtB,EAAG,IAAQ,CAGjD,MAGJotB,EAAIA,EAAExE,WAIV,OAAOyE,KAAOF,cAAgB,KAGlCI,YAAa,SAAUC,UACnB,OAAOtrB,KAAKurB,YAAaD,SAAU,YAGvCE,WAAY,SAAUF,UAClB,OAAOtrB,KAAKurB,YAAaD,SAAU,SAGvCC,YAAa,SAAUD,SAAUhV,MAC7B,IAAMtS,EAAE0B,OAAO+lB,qBAAuB,CAClC,OAAOH,SAGX,IAAII,MAAQJ,SAASruB,OACjB0uB,QAAU3nB,IACVknB,EAAGU,SAAUC,SACb9uB,EAAGgB,EAEP,IAAMhB,EAAI,EAAGA,EAAI2uB,MAAO3uB,IAAM,CAC1B6uB,SAAWN,SAASvF,GAAIhpB,GACxB8uB,SAAW,MACXX,EAAII,SAAUvuB,GAEd,MAAQmuB,EAAI,CACRntB,EAAImtB,EAAE5L,aAAe4L,EAAE5L,aAAc,QAAUtb,EAAE0B,OAAO0jB,GAAK9S,MAAS,GAEtE,GAAKvY,IAAM,QAAU,CACjB8tB,SAAW,KACX,MAGJX,EAAIA,EAAExE,WAGV,IAAMmF,SAAW,CACbF,QAAUA,QAAQ3K,IAAK4K,WAI/B,OAAOD,SAGXG,gBAAiB,WAGb,OAAO1vB,OAAOmrB,aAAevjB,EAAE0B,OAAOtJ,OAAOsL,UAIjDqkB,sBAAuB,SAAUrkB,QAC7B,IAAIgE,KAAO1H,EAAG,IAAMA,EAAE0B,OAAOklB,iBACzBoB,WAAatgB,KAAKhE,SAClBukB,gBAAkBvgB,KAAK8b,YAAa,MAExC9f,OAASkhB,mBAAoBld,YAChBhE,SAAW,SAAaA,OAAS1D,EAAE0B,OAAOomB,mBAGvDpgB,KAAKma,IAAK,aAAc,IAGxB,GAAKna,KAAKhE,SAAWA,OAAS,CAC1BgE,KAAKma,IAAK,aAAcne,QAAWukB,gBAAkBD,eAI7DE,QAAS,WAEL,IAAI9e,OAASpN,KAAKksB,QAAQC,SAAWnoB,EAAGA,EAAE0B,OAAO0H,OAAO/P,UAAU+uB,aAAchf,SAG5Eif,YAAcjf,OAAOA,OAAOtN,MAAOsN,OAAQqK,WAG/CzX,KAAKksB,QAAQC,QAAU/e,OAEvB,OAAOif,eAIfroB,EAAEsoB,cAAgB,SAAUzM,KAAM0M,eAC9B,IAAIC,MAAQxoB,EAAG6b,MACX4M,WAAaD,MAAM9d,QAAS,eAAkB1K,IAElDwoB,MAAM9d,QAAS,aAAc1K,EAAGyoB,YAAazL,IAAKuL,iBAItDvoB,EAAEC,GAAGyJ,QACDgf,qBAAsB,WAClB1oB,EAAE0oB,qBAAsB1sB,OAI5B2sB,cAAe,WACX,IAAIhvB,MACAivB,kBACAC,WAAa7oB,EAAE0B,OAAOgG,KAAKrO,UAAUyvB,qBACrCC,KAAO/sB,KAGX,GAAKgE,EAAE0B,OAAOsnB,KAAO,CACjBhpB,EAAE0B,OAAOsnB,KAAMhtB,MAInB,GAAKgE,EAAE0B,OAAOunB,MAAQ,CAClBjpB,EAAE0B,OAAOunB,MAAOjtB,MAIpB,GAAKgE,EAAE0B,OAAOwnB,oBAAsB,CAChClpB,EAAE0B,OAAOwnB,oBAAqBltB,MAIlC,GAAKgE,EAAEC,GAAGkpB,aAAe,CACrBntB,KAAKoS,KAAMpO,EAAEC,GAAGkpB,aAAaC,cAAeC,IAAKR,YAChDS,iBAAiBH,eAItB,GAAKnpB,EAAEC,GAAGspB,aAAe,CACrBvtB,KAAKoS,KAAM,iCAAkCib,IAAKR,YACjDS,iBAAiBC,eAItBvpB,EAAEmb,KAAMnb,EAAE0B,OAAOC,QAAS,SAAU1H,KAAMuvB,aAGtC,GAAKA,YAAYJ,aAAe,CAG5B,IAAI9B,SAAWtnB,EAAE0B,OAAO2lB,YAAa0B,KAAK3a,KAAMob,YAAYJ,eAG5D,GAAK9B,SAASruB,OAAS,EAAI,CAIvBquB,SAAWA,SAAS+B,IAAKR,YAI7B,GAAKvB,SAASruB,OAAS,EAAI,CACvB2vB,eAAgBY,YAAYnwB,UAAUowB,YAAenC,aAKjE,IAAM3tB,SAASivB,eAAiB,CAC5BA,eAAgBjvB,OAASA,SAG7B,OAAOqC,MAGXssB,cAAe,SAAUC,eACrBvoB,EAAEsoB,cAAetsB,KAAMusB,gBAM3BmB,eAAgB,WACZ,OAAO1pB,EAAG,OAAQqJ,KAAMrN,KAAKqN,QAASsgB,QAI1CL,eAAgB,WACZ,OAAOtpB,EAAE0B,OAAO2lB,YAAarrB,OAGjC4tB,cAAe,WACX,OAAO5pB,EAAE0B,OAAO8lB,WAAYxrB,SAIpCgE,EAAE0oB,qBAAuB,SAAUmB,eAC/B,IAAIzH,QAAUpiB,EAAG6pB,gBAEfzH,QAAQ1X,QAAS,eAAkB1K,KAAM8pB,SAC3C1H,QAAQ0H,UAEZ9pB,EAAEsoB,cAAgB,SAAUuB,cAAetB,eACvC,IAAInG,QAAUpiB,EAAG6pB,eACbpB,WAAarG,QAAQ1X,QAAS,eAAkB1K,IAEpDoiB,QAAQ1X,QAAS,aAAc1K,EAAGyoB,YAAazL,IAAKuL,iBAGxDvoB,EAAEoO,KAAK2b,QAAU,SAAUrP,KAAM1E,KAC7B,OAAOhW,EAAEoO,KAAMsM,KAAM,KAAM,KAAM1E,MAGrChW,EAAEoO,KAAK4b,gBAAkB,SAAUC,KAAMvP,MACrC,OAAO1a,EAAEoO,KAAMsM,KAAM,KAAM,MAAQuP,OAAShxB,OAAS,IApU7D,CAuUI8e,OAAQ/b,OAEZ,SAAWgE,EAAG5H,OAAQ2D,WAClBiE,EAAE0J,OAAQ1J,EAAE0B,QAGRnE,QAAS,QAMT2sB,cAAe,UAEfC,WAAY,KAGZtB,WAAY,+CAIZjC,gBAAiB,iBAIjBE,eAAgB,gBAIhBsD,WAAY,WAGZC,YAAa,KAGb1hB,qBAAsB,KAGtB2hB,mBAAoB,KAGpB7hB,sBAAuB,OAGvB8hB,mBAAoB,MAIpBC,cAAe,EAGf9hB,wBAAyB,MAGzB+hB,qBAAsB,qBAGtBC,0BAA2B,IAI3BC,0BAA2B,MAG3B/Y,mBAAoB,KAEpBhJ,iBAAkB,KAIlB6e,qBAAsB,MAEtB0B,cACIyB,WAAY,KAKhBpE,mBAAoB,KAGpBqE,cAAe7qB,IAGfwI,sBAAuB,MAEvBsiB,cAAe,sBApFvB,CAsFI/S,OAAQ/b,OAYZ,SAAWgE,EAAGjE,WAEd,IAAIqkB,KAAO,EACP5kB,MAAQyT,MAAM5V,UAAUmC,MACxBuvB,WAAa/qB,EAAEgrB,UACnBhrB,EAAEgrB,UAAY,SAAUC,OACpB,IAAM,IAAIlyB,EAAI,EAAG8iB,MAAOA,KAAOoP,MAAMlyB,KAAO,KAAMA,IAAM,CACpD,IACIiH,EAAG6b,MAAOmC,eAAgB,UAE5B,MAAOkJ,KAEb6D,WAAYE,QAGhBjrB,EAAEkrB,OAAS,SAAUjxB,KAAMqQ,KAAMjR,WAC7B,IAAI8xB,SAAUC,oBAAqB5B,YAAa6B,cAG5CC,oBACAC,UAAYtxB,KAAK4I,MAAO,KAAO,GAEnC5I,KAAOA,KAAK4I,MAAO,KAAO,GAC1BsoB,SAAWI,UAAY,IAAMtxB,KAE7B,IAAMZ,UAAY,CACdA,UAAYiR,KACZA,KAAOtK,EAAEwrB,OAIbxrB,EAAE0a,KAAM,KAAOyQ,SAAS/tB,eAAkB,SAAUye,MAChD,QAAS7b,EAAEtH,KAAMmjB,KAAMsP,WAG3BnrB,EAAGurB,WAAcvrB,EAAGurB,eACpBH,oBAAsBprB,EAAGurB,WAAatxB,MACtCuvB,YAAcxpB,EAAGurB,WAAatxB,MAAS,SAAU2K,QAASwd,SAEtD,IAAMpmB,KAAKyvB,cAAgB,CACvB,OAAO,IAAIjC,YAAa5kB,QAASwd,SAKrC,GAAK3O,UAAUxa,OAAS,CACpB+C,KAAKyvB,cAAe7mB,QAASwd,WAIrCpiB,EAAE0J,OAAQ8f,YAAa4B,qBACnB7tB,QAASlE,UAAUkE,QAGnBmuB,OAAQ1rB,EAAE0J,UAAYrQ,WAGtBsyB,wBAGJN,cAAgB,IAAI/gB,KAIpB+gB,cAAczmB,QAAU5E,EAAEkrB,OAAOxhB,UAAY2hB,cAAczmB,SAC3D5E,EAAEmb,KAAM9hB,UAAW,SAAUuf,KAAMne,OAC/B,IAAMuF,EAAE8f,WAAYrlB,OAAU,CAC1B6wB,iBAAkB1S,MAASne,MAC3B,OAEJ6wB,iBAAkB1S,MAAS,WACvB,IAAIgT,OAAS,WACL,OAAOthB,KAAKjR,UAAWuf,MAAO9c,MAAOE,KAAMyX,YAE/CoY,YAAc,SAAUtY,MACpB,OAAOjJ,KAAKjR,UAAWuf,MAAO9c,MAAOE,KAAMuX,OAEnD,OAAO,WACH,IAAIuY,QAAU9vB,KAAK4vB,OACfG,aAAe/vB,KAAK6vB,YACpBxD,YAEJrsB,KAAK4vB,OAASA,OACd5vB,KAAK6vB,YAAcA,YAEnBxD,YAAc5tB,MAAMqB,MAAOE,KAAMyX,WAEjCzX,KAAK4vB,OAASE,QACd9vB,KAAK6vB,YAAcE,aAEnB,OAAO1D,aApBY,KAwB/BmB,YAAYnwB,UAAY2G,EAAEkrB,OAAOxhB,OAAQ2hB,eAIrCW,kBAAmBZ,oBAAuBC,cAAcW,mBAAqB/xB,KAAQA,MACtFqxB,kBACC9B,YAAaA,YACb+B,UAAWA,UACX9B,WAAYxvB,KACZgyB,eAAgBd,WAOpB,GAAKC,oBAAsB,CACvBprB,EAAEmb,KAAMiQ,oBAAoBO,mBAAoB,SAAU5yB,EAAGmzB,OACzD,IAAIC,eAAiBD,MAAM7yB,UAI3B2G,EAAEkrB,OAAQiB,eAAeZ,UAAY,IAAMY,eAAe1C,WAAYD,YAAa0C,MAAMR,iBAItFN,oBAAoBO,uBACxB,CACHrhB,KAAKqhB,mBAAmBxyB,KAAMqwB,aAGlCxpB,EAAEkrB,OAAOkB,OAAQnyB,KAAMuvB,aAEvB,OAAOA,aAGXxpB,EAAEkrB,OAAOxhB,OAAS,SAAUhE,QACxB,IAAI2mB,MAAQ7wB,MAAMjC,KAAMka,UAAW,GAC/B6Y,WAAa,EACbC,YAAcF,MAAMpzB,OACpB2N,IACAnM,MACJ,KAAQ6xB,WAAaC,YAAaD,aAAe,CAC7C,IAAM1lB,OAAOylB,MAAOC,YAAe,CAC/B7xB,MAAQ4xB,MAAOC,YAAc1lB,KAC7B,GAAKylB,MAAOC,YAAahzB,eAAgBsN,MAASnM,QAAUsB,UAAY,CAEpE,GAAKiE,EAAEwsB,cAAe/xB,OAAU,CAC5BiL,OAAQkB,KAAQ5G,EAAEwsB,cAAe9mB,OAAQkB,MACrC5G,EAAEkrB,OAAOxhB,UAAYhE,OAAQkB,KAAOnM,OAEpCuF,EAAEkrB,OAAOxhB,UAAYjP,WAEtB,CACHiL,OAAQkB,KAAQnM,SAKhC,OAAOiL,QAGX1F,EAAEkrB,OAAOkB,OAAS,SAAUnyB,KAAMa,QAC9B,IAAIqwB,SAAWrwB,OAAOzB,UAAU4yB,gBAAkBhyB,KAClD+F,EAAEC,GAAIhG,MAAS,SAAU2K,SACrB,IAAI6nB,oBAAsB7nB,UAAY,SAClC2O,KAAO/X,MAAMjC,KAAMka,UAAW,GAC9B4U,YAAcrsB,KAGlB4I,SAAW6nB,cAAgBlZ,KAAKta,OAC5B+G,EAAEkrB,OAAOxhB,OAAO5N,MAAO,MAAQ8I,SAAUyY,OAAO9J,OAChD3O,QAEJ,GAAK6nB,aAAe,CAChBzwB,KAAKmf,KAAK,WACN,IAAIuR,YACAhI,SAAW1kB,EAAEtH,KAAMsD,KAAMmvB,UAC7B,GAAKvmB,UAAY,WAAa,CAC1ByjB,YAAc3D,SACd,OAAO,MAEX,IAAMA,SAAW,CACb,OAAO1kB,EAAE5E,MAAO,0BAA4BnB,KAAO,6BAC/C,6BAA+B2K,QAAU,KAEjD,IAAM5E,EAAE8f,WAAY4E,SAAS9f,WAAcA,QAAQ+nB,OAAQ,KAAQ,IAAM,CACrE,OAAO3sB,EAAE5E,MAAO,mBAAqBwJ,QAAU,SAAW3K,KAAO,oBAErEyyB,YAAchI,SAAU9f,SAAU9I,MAAO4oB,SAAUnR,MACnD,GAAKmZ,cAAgBhI,UAAYgI,cAAgB3wB,UAAY,CACzDssB,YAAcqE,aAAeA,YAAY9pB,OACrCylB,YAAYuE,UAAWF,YAAYnyB,OACnCmyB,YACJ,OAAO,aAGZ,CACH1wB,KAAKmf,KAAK,WACN,IAAIuJ,SAAW1kB,EAAEtH,KAAMsD,KAAMmvB,UAC7B,GAAKzG,SAAW,CACZA,SAASH,OAAQ3f,aAAgBioB,YAC9B,CACH7sB,EAAEtH,KAAMsD,KAAMmvB,SAAU,IAAIrwB,OAAQ8J,QAAS5I,UAKzD,OAAOqsB,cAIfroB,EAAEwrB,OAAS,aACXxrB,EAAEwrB,OAAOG,sBAET3rB,EAAEwrB,OAAOnyB,WACLowB,WAAY,SACZuC,kBAAmB,GACnBc,eAAgB,QAChBloB,SACIge,SAAU,MAGVmK,OAAQ,MAEZtB,cAAe,SAAU7mB,QAASwd,SAC9BA,QAAUpiB,EAAGoiB,SAAWpmB,KAAK8wB,gBAAkB9wB,MAAQ,GACvDA,KAAKomB,QAAUpiB,EAAGoiB,SAClBpmB,KAAKokB,KAAOA,OACZpkB,KAAKgxB,eAAiB,IAAMhxB,KAAKytB,WAAaztB,KAAKokB,KACnDpkB,KAAK4I,QAAU5E,EAAEkrB,OAAOxhB,UACpB1N,KAAK4I,QACL5I,KAAKixB,oBACLroB,SAEJ5I,KAAKkxB,SAAWltB,IAChBhE,KAAKmxB,UAAYntB,IACjBhE,KAAKmmB,UAAYniB,IAEjB,GAAKoiB,UAAYpmB,KAAO,CACpBgE,EAAEtH,KAAM0pB,QAASpmB,KAAKiwB,eAAgBjwB,MACtCA,KAAKoxB,IAAK,KAAMpxB,KAAKomB,SACjB0H,OAAQ,SAAUtlB,OACd,GAAKA,MAAMkB,SAAW0c,QAAU,CAC5BpmB,KAAKqxB,cAIjBrxB,KAAK6B,SAAWmC,EAAGoiB,QAAQrkB,MAEvBqkB,QAAQxD,cAERwD,QAAQvkB,UAAYukB,SACxBpmB,KAAK5D,OAAS4H,EAAGhE,KAAK6B,SAAS,GAAGyvB,aAAetxB,KAAK6B,SAAS,GAAG0vB,cAGtEvxB,KAAKwxB,UACLxxB,KAAKyxB,SAAU,SAAU,KAAMzxB,KAAK0xB,uBACpC1xB,KAAK6wB,SAETI,kBAAmBjtB,EAAE2tB,KACrBD,oBAAqB1tB,EAAE2tB,KACvBH,QAASxtB,EAAE2tB,KACXd,MAAO7sB,EAAE2tB,KAETN,QAAS,WACLrxB,KAAK4xB,WAGL5xB,KAAKomB,QACAjE,OAAQniB,KAAKgxB,gBACbnJ,WAAY7nB,KAAKiwB,gBAGjBpI,WAAY7jB,EAAEmc,UAAWngB,KAAKiwB,iBACnCjwB,KAAKkvB,SACA/M,OAAQniB,KAAKgxB,gBACbxqB,WAAY,iBACZqkB,YACG7qB,KAAKiwB,eAAiB,aACtB,qBAGRjwB,KAAKkxB,SAAS/O,OAAQniB,KAAKgxB,gBAC3BhxB,KAAKmxB,UAAUtG,YAAa,kBAC5B7qB,KAAKmmB,UAAU0E,YAAa,mBAEhC+G,SAAU5tB,EAAE2tB,KAEZzC,OAAQ,WACJ,OAAOlvB,KAAKomB,SAGhBmC,OAAQ,SAAU3d,IAAKnM,OACnB,IAAImK,QAAUgC,IACVinB,MACAC,UACA/0B,EAEJ,GAAK0a,UAAUxa,SAAW,EAAI,CAE1B,OAAO+G,EAAEkrB,OAAOxhB,UAAY1N,KAAK4I,SAGrC,UAAYgC,MAAQ,SAAW,CAE3BhC,WACAipB,MAAQjnB,IAAI/D,MAAO,KACnB+D,IAAMinB,MAAMp0B,QACZ,GAAKo0B,MAAM50B,OAAS,CAChB60B,UAAYlpB,QAASgC,KAAQ5G,EAAEkrB,OAAOxhB,UAAY1N,KAAK4I,QAASgC,MAChE,IAAM7N,EAAI,EAAGA,EAAI80B,MAAM50B,OAAS,EAAGF,IAAM,CACrC+0B,UAAWD,MAAO90B,IAAQ+0B,UAAWD,MAAO90B,QAC5C+0B,UAAYA,UAAWD,MAAO90B,IAElC6N,IAAMinB,MAAMlQ,MACZ,GAAKljB,QAAUsB,UAAY,CACvB,OAAO+xB,UAAWlnB,OAAU7K,UAAY,KAAO+xB,UAAWlnB,KAE9DknB,UAAWlnB,KAAQnM,UAChB,CACH,GAAKA,QAAUsB,UAAY,CACvB,OAAOC,KAAK4I,QAASgC,OAAU7K,UAAY,KAAOC,KAAK4I,QAASgC,KAEpEhC,QAASgC,KAAQnM,OAIzBuB,KAAK+xB,YAAanpB,SAElB,OAAO5I,MAEX+xB,YAAa,SAAUnpB,SACnB,IAAIgC,IAEJ,IAAMA,OAAOhC,QAAU,CACnB5I,KAAKgyB,WAAYpnB,IAAKhC,QAASgC,MAGnC,OAAO5K,MAEXgyB,WAAY,SAAUpnB,IAAKnM,OACvBuB,KAAK4I,QAASgC,KAAQnM,MAEtB,GAAKmM,MAAQ,WAAa,CACtB5K,KAAKkvB,SACAjQ,YAAajf,KAAKiwB,eAAiB,cAAexxB,OACvDuB,KAAKmxB,UAAUtG,YAAa,kBAC5B7qB,KAAKmmB,UAAU0E,YAAa,kBAGhC,OAAO7qB,MAGXiyB,OAAQ,WACJ,OAAOjyB,KAAK+xB,aAAcnL,SAAU,SAExCsL,QAAS,WACL,OAAOlyB,KAAK+xB,aAAcnL,SAAU,QAGxCwK,IAAK,SAAUe,sBAAuB/L,QAASnP,UAC3C,IAAImb,gBACA1J,SAAW1oB,KAGf,UAAYmyB,wBAA0B,UAAY,CAC9Clb,SAAWmP,QACXA,QAAU+L,sBACVA,sBAAwB,MAI5B,IAAMlb,SAAW,CACbA,SAAWmP,QACXA,QAAUpmB,KAAKomB,QACfgM,gBAAkBpyB,KAAKkvB,aACpB,CAEH9I,QAAUgM,gBAAkBpuB,EAAGoiB,SAC/BpmB,KAAKkxB,SAAWlxB,KAAKkxB,SAASlQ,IAAKoF,SAGvCpiB,EAAEmb,KAAMlI,SAAU,SAAUzO,MAAOH,SAC/B,SAASgqB,eAIL,IAAMF,wBACIzJ,SAAS9f,QAAQge,WAAa,MAC5B5iB,EAAGhE,MAAOqG,SAAU,sBAA0B,CACtD,OAEJ,cAAgBgC,UAAY,SAAWqgB,SAAUrgB,SAAYA,SACxDvI,MAAO4oB,SAAUjR,WAI1B,UAAYpP,UAAY,SAAW,CAC/BgqB,aAAaC,KAAOjqB,QAAQiqB,KACxBjqB,QAAQiqB,MAAQD,aAAaC,MAAQtuB,EAAEsuB,OAG/C,IAAI9wB,MAAQgH,MAAMhH,MAAO,kBACrB+wB,UAAY/wB,MAAM,GAAKknB,SAASsI,eAChCzsB,SAAW/C,MAAM,GACrB,GAAK+C,SAAW,CACZ6tB,gBAAgBhQ,SAAU7d,SAAUguB,UAAWF,kBAC5C,CACHjM,QAAQ7mB,KAAMgzB,UAAWF,kBAKrCG,KAAM,SAAUpM,QAASmM,WACrBA,WAAaA,WAAa,IAAI1rB,MAAO,KAAM4a,KAAMzhB,KAAKgxB,eAAiB,KAAQhxB,KAAKgxB,eACpF5K,QAAQjE,OAAQoQ,WAAYlQ,WAAYkQ,YAG5CE,OAAQ,SAAUpqB,QAASqd,OACvB,SAAS2M,eACL,cAAgBhqB,UAAY,SAAWqgB,SAAUrgB,SAAYA,SACxDvI,MAAO4oB,SAAUjR,WAE1B,IAAIiR,SAAW1oB,KACf,OAAOgI,WAAYqqB,aAAc3M,OAAS,IAG9CgN,WAAY,SAAUtM,SAClBpmB,KAAKmxB,UAAYnxB,KAAKmxB,UAAUnQ,IAAKoF,SACrCpmB,KAAKoxB,IAAKhL,SACNuM,WAAY,SAAUnqB,OAClBxE,EAAGwE,MAAM6N,eAAgB9P,SAAU,mBAEvCqsB,WAAY,SAAUpqB,OAClBxE,EAAGwE,MAAM6N,eAAgBwU,YAAa,sBAKlDgI,WAAY,SAAUzM,SAClBpmB,KAAKmmB,UAAYnmB,KAAKmmB,UAAUnF,IAAKoF,SACrCpmB,KAAKoxB,IAAKhL,SACN0M,QAAS,SAAUtqB,OACfxE,EAAGwE,MAAM6N,eAAgB9P,SAAU,mBAEvCwsB,SAAU,SAAUvqB,OAChBxE,EAAGwE,MAAM6N,eAAgBwU,YAAa,sBAKlD4G,SAAU,SAAUlQ,KAAM/Y,MAAO9L,MAC7B,IAAIkgB,KAAM6I,KACNvV,SAAWlQ,KAAK4I,QAAS2Y,MAE7B7kB,KAAOA,SACP8L,MAAQxE,EAAEgvB,MAAOxqB,OACjBA,MAAM+Y,MAASA,OAASvhB,KAAKgwB,kBACzBzO,KACAvhB,KAAKgwB,kBAAoBzO,MAAOngB,cAGpCoH,MAAMkB,OAAS1J,KAAKomB,QAAS,GAG7BX,KAAOjd,MAAM8Y,cACb,GAAKmE,KAAO,CACR,IAAM7I,QAAQ6I,KAAO,CACjB,KAAQ7I,QAAQpU,OAAU,CACtBA,MAAOoU,MAAS6I,KAAM7I,QAKlC5c,KAAKomB,QAAQ7M,QAAS/Q,MAAO9L,MAC7B,QAAUsH,EAAE8f,WAAY5T,WACpBA,SAASpQ,MAAOE,KAAKomB,QAAQ,IAAM5d,OAAQ6Y,OAAQ3kB,SAAa,OAChE8L,MAAMyqB,wBAIlBjvB,EAAEmb,MAAQ+T,KAAM,SAAUC,KAAM,WAAa,SAAUC,OAAQC,eAC3DrvB,EAAEwrB,OAAOnyB,UAAW,IAAM+1B,QAAW,SAAUhN,QAASxd,QAASsH,UAC7D,UAAYtH,UAAY,SAAW,CAC/BA,SAAY0qB,OAAQ1qB,SAExB,IAAI2qB,WACAC,YAAc5qB,QACVwqB,OACAxqB,UAAY,aAAeA,UAAY,SACnCyqB,cACAzqB,QAAQ0qB,QAAUD,cAC9BzqB,QAAUA,YACV,UAAYA,UAAY,SAAW,CAC/BA,SAAY6qB,SAAU7qB,SAE1B2qB,YAAcvvB,EAAE0vB,cAAe9qB,SAC/BA,QAAQ+qB,SAAWzjB,SACnB,GAAKtH,QAAQ8c,MAAQ,CACjBU,QAAQV,MAAO9c,QAAQ8c,OAE3B,GAAK6N,YAAcvvB,EAAE4vB,SAAW5vB,EAAE4vB,QAAQN,OAAQE,YAAe,CAC7DpN,QAASgN,QAAUxqB,cAChB,GAAK4qB,aAAeJ,QAAUhN,QAASoN,YAAe,CACzDpN,QAASoN,YAAc5qB,QAAQ6qB,SAAU7qB,QAAQ2X,OAAQrQ,cACtD,CACHkW,QAAQyN,MAAM,SAAUC,MACpB9vB,EAAGhE,MAAQozB,UACX,GAAKljB,SAAW,CACZA,SAAS3S,KAAM6oB,QAAS,IAE5B0N,cA1fhB,CAggBI/X,SAEJ,SAAW/X,EAAG5H,OAAQ2D,WAClB,IAAIg0B,mBACA1W,QAAUrZ,EAAEoO,KACZ4hB,OAAS,+BACTC,UAAY,uBAEhBjwB,EAAE0J,OAAQ1J,EAAE0B,QAIR0jB,GAAI,GAIJ9J,aAAc,SAAU8G,QAASxb,KAC7B,IAAIlO,KAEJ0pB,QAAUA,QAAQxf,OAASwf,QAAQ,GAAKA,QAExC,GAAKA,SAAWA,QAAQ9G,aAAe,CACnC5iB,KAAO0pB,QAAQ9G,aAAc,QAAUtb,EAAE0B,OAAO0jB,GAAKxe,KAKzD,IACIlO,KAAOA,OAAS,OAAS,KACrBA,OAAS,QAAU,MACnBA,OAAS,OAAS,MAEjBA,KAAO,KAAOA,MAAQA,KACvBs3B,OAAOzhB,KAAM7V,MAASshB,KAAKC,MAAOvhB,MAClCA,KACN,MAAOwC,MAET,OAAOxC,MAIXq3B,gBAAiBA,gBAKjBG,YAAa,SAAUtX,MACnB,OAAOmX,gBAAiBnX,QAClBmX,gBAAiBnX,MAAS5Y,EAAEmc,UAAWnc,EAAE0B,OAAO0jB,GAAKxM,QAQ/DuX,gBAAiB,SAAU/d,SACvB,OAAOA,QACF3H,QAAS,kDACT/R,KAAM,kBAOnBsH,EAAEC,GAAGyK,QAAU,SAAUkO,KAAMne,OAC3B,IAAIwT,OACJ,UAAY2K,OAAS,YAAc,CAC/B,GAAKA,KAAO,CACRA,KAAO5Y,EAAE0B,OAAOwuB,YAAatX,MAKjC,GAAKnF,UAAUxa,OAAS,GAAKwB,QAAUsB,UAAY,CAC/CkS,OAASjS,KAAKtD,KAAMkgB,UACjB,CACH3K,OAASjS,KAAKtD,KAAMkgB,KAAMne,QAGlC,OAAOwT,QAGXjO,EAAE0K,QAAU,SAAUmR,KAAMjD,KAAMne,OAC9B,IAAIwT,OACJ,UAAY2K,OAAS,YAAc,CAC/B3K,OAASjO,EAAEtH,KAAMmjB,KAAMjD,KAAO5Y,EAAE0B,OAAOwuB,YAAatX,MAASA,KAAMne,OAEvE,OAAOwT,QAGXjO,EAAEC,GAAGmwB,cAAgB,SAAUxX,MAC3B,OAAO5c,KAAK6nB,WAAY7jB,EAAE0B,OAAOwuB,YAAatX,QAGlD5Y,EAAEowB,cAAgB,SAAUvU,KAAMjD,MAC9B,OAAO5Y,EAAE6jB,WAAYhI,KAAM7b,EAAE0B,OAAOwuB,YAAatX,QAGrD5Y,EAAEoO,KAAO,SAAU7N,SAAU8L,QAASuP,IAAKyU,OACvC,GAAK9vB,SAASlB,QAAS,aAAgB,EAAI,CACvCkB,SAAWA,SAASE,QAASwvB,UAAW,UAAajwB,EAAE0B,OAAO0jB,IAAM,IAAO,OAG/E,OAAO/L,QAAQ9f,KAAMyC,KAAMuE,SAAU8L,QAASuP,IAAKyU,QAGvDrwB,EAAE0J,OAAQ1J,EAAEoO,KAAMiL,UA1GtB,CA4GItB,OAAQ/b,OAEZ,SAAWgE,EAAGjE,WAEd,IAAIu0B,UAAY,SACZC,gBAAkB,SAAUx2B,GACxB,MAAO,IAAMA,EAAEqD,eAGvB4C,EAAE0J,OAAQ1J,EAAEwrB,OAAOnyB,WACf4zB,kBAAmB,WACf,IAAI1I,OAAQ9pB,MACRohB,KAAO7f,KAAKomB,QAAS,GACrBxd,WAGJ,IAAM5E,EAAE0B,OAAO4Z,aAAcO,KAAM,YAAe,CAC9C,IAAM0I,UAAUvoB,KAAK4I,QAAU,CAC3BnK,MAAQuF,EAAE0B,OAAO4Z,aAAcO,KAAM0I,OAAO9jB,QAAS6vB,UAAWC,kBAEhE,GAAK91B,OAAS,KAAO,CACjBmK,QAAS2f,QAAW9pB,QAKhC,OAAOmK,WAKf5E,EAAE0B,OAAOwpB,OAASlrB,EAAEwrB,QA7BpB,CA+BIzT,SAGJ,SAAW/X,GAEP,IAAIwwB,YAAc,YAAaC,MAAQzwB,EAAG,QAE1CA,EAAEkrB,OAAQ,iBAGNtmB,SAEI8rB,MAAO,IAGPC,YAAa,MAGbhH,KAAM,GAGNtgB,KAAM,WAGV+e,YAAa,eAAiBoI,YAAc,KACxC,wCACA,YACA,SAGJI,cAAe,WACX,IAAIC,UAAY7wB,EAAG,IAAMA,EAAE0B,OAAOolB,gBAAiB/P,QAEnD/a,KAAKomB,QACAP,KACG5V,IAAKjM,EAAE8jB,QAAQgN,WAAa90B,KAAK5D,OAAO04B,YAAc90B,KAAK5D,OAAOsL,SAAW,GACzEmtB,UAAU53B,QAAU43B,UAAUtS,SAAStS,KAAO,OAM9D8kB,oBAAqB,WACjB,IAAIxS,OAASviB,KAAKomB,QAAQ7D,SACtBuS,UAAY90B,KAAK5D,OAAO04B,YACxBE,aAAehxB,EAAE0B,OAAOomB,kBAE5B,GAAKvJ,OAAOtS,IAAM6kB,WAAevS,OAAOtS,IAAM6kB,UAAcE,aAAe,CACvEh1B,KAAKomB,QAAQ7f,SAAU,qBACvBvG,KAAK40B,gBACL50B,KAAK5D,OACA+lB,OAAQ,SAAUniB,KAAK+0B,qBACvBx1B,KAAM,SAAUyE,EAAEixB,MAAOj1B,KAAK40B,cAAe50B,SAI1Dk1B,UAAW,WACPl1B,KAAKomB,QAAQuH,KAAM3pB,EAAGhE,KAAKosB,aAAcuB,SAO7CuF,KAAM,SAAUwB,MAAOS,QAASC,UAC5B,IAAIT,YAAaU,QAASC,aAE1Bt1B,KAAKk1B,YAIL,GAAKlxB,EAAEud,KAAMmT,SAAY,SAAW,CAChCY,aAAetxB,EAAE0J,UAAY1N,KAAK4I,QAAS8rB,OAE3CA,MAAQY,aAAaZ,UAClB,CACHY,aAAet1B,KAAK4I,QAKpB8rB,MAAQA,OAASY,aAAaZ,MAKlCW,QAAUF,UAAaG,aAAajoB,OAAS,MAAQ,GAAKioB,aAAajoB,MAGvEonB,MAAMluB,SAAU,cAEhBouB,YAAcW,aAAaX,YAK3B30B,KAAKomB,QAAQ9P,KAAK,QAASke,YACvB,0BAA4BE,MAC5B,eAAkBC,aAAeQ,SAAWT,MAAMrnB,KAAO,UAAY,YACnEioB,aAAaF,UAAYA,SAAW,sBAAwB,KAMlE,GAAKE,aAAa3H,KAAO,CACrB3tB,KAAKomB,QAAQuH,KAAM2H,aAAa3H,UAC7B,CACH3tB,KAAKomB,QAAQhU,KAAM,MAAO/E,KAAMgoB,SAMpCr1B,KAAKomB,QAAQmP,SAAUvxB,EAAE0B,OAAOyI,cAC5BnK,EAAG,yBAA4BA,EAAG,SAGtChE,KAAK+0B,sBAGL/0B,KAAK5D,OAAOmD,KAAM,SAAUyE,EAAEixB,MAAOj1B,KAAK+0B,oBAAqB/0B,QAGnEmzB,KAAM,WACFsB,MAAM5J,YAAa,cAEnB,GAAK7qB,KAAK4I,QAAQyE,KAAO,CACrBrN,KAAKomB,QAAQyE,YAAa,qBAG9B7qB,KAAK5D,OAAO+lB,OAAQ,SAAUniB,KAAK40B,eACnC50B,KAAK5D,OAAO+lB,OAAQ,SAAUniB,KAAK+0B,yBAjI/C,CAqIGhZ,OAAQ/b,OA0FX,SAAUgE,EAAE5H,OAAO2D,WACjB,YAGA,IAAIy1B,eAAiB,aAGnBrR,IAAMtiB,SACN4zB,kBACAxT,QAAUje,EAAEwE,MAAMyZ,QAKlByT,SAAWvR,IAAIwR,aACfC,sBAAwB,KAAOJ,kBAAkBp5B,SAAYs5B,WAAa31B,WAAa21B,SAAW,GAIpG,SAASG,aAActnB,KACrBA,IAAMA,KAAO8G,SAASW,KACtB,MAAO,IAAMzH,IAAI9J,QAAS,gBAAiB,MA6B7CT,EAAEC,GAAIuxB,gBAAmB,SAAUvxB,IACjC,OAAOA,GAAKjE,KAAKT,KAAMi2B,eAAgBvxB,IAAOjE,KAAKuZ,QAASic,iBAsC9DxxB,EAAEC,GAAIuxB,gBAAiB9P,MAAQ,GAmD/BzD,QAASuT,gBAAmBxxB,EAAE0J,OAAQuU,QAASuT,iBAG7C7b,MAAO,WAEL,GAAKic,sBAAwB,CAAE,OAAO,MAKtC5xB,EAAGyxB,kBAAkBhlB,QAIvBqlB,SAAU,WAER,GAAKF,sBAAwB,CAAE,OAAO,MAGtC5xB,EAAGyxB,kBAAkBrlB,SASzBqlB,kBAAoB,WAClB,IAAIvwB,QACF6wB,WAGAC,UAAYH,eAEZI,UAAY,SAAS/X,KAAM,OAAOA,KAClCgY,YAAcD,UACdE,YAAcF,UAGhB/wB,KAAKuL,MAAQ,WACXslB,YAAcK,QAIhBlxB,KAAKkL,KAAO,WACV2lB,YAAcM,aAAcN,YAC5BA,WAAah2B,WAMf,SAASq2B,OACP,IAAIhjB,KAAOyiB,eACTS,aAAeH,YAAaH,WAE9B,GAAK5iB,OAAS4iB,UAAY,CACxBE,YAAaF,UAAY5iB,KAAMkjB,cAE/BtyB,EAAE5H,QAAQmd,QAASic,qBAEd,GAAKc,eAAiBN,UAAY,CACvC3gB,SAASW,KAAOX,SAASW,KAAKvR,QAAS,MAAO,IAAO6xB,aAGvDP,WAAa/tB,WAAYouB,KAAMpyB,EAAEC,GAAIuxB,gBAAiB9P,OAMxDtpB,OAAOm6B,cAAgBn6B,OAAOwF,mBAAqBg0B,uBAAyB,WAI1E,IAAIY,OACFC,WAIFvxB,KAAKuL,MAAQ,WACX,IAAM+lB,OAAS,CACbC,WAAazyB,EAAEC,GAAIuxB,gBAAiBkB,IACpCD,WAAaA,YAAcA,WAAaZ,eAIxCW,OAASxyB,EAAE,yCAAyCmvB,OAIjD3uB,IAAK,OAAQ,WACZiyB,YAAcP,YAAaL,gBAC3BO,SAID9f,KAAM,MAAOmgB,YAAc,gBAI3BE,YAAa,QAAS,GAAGC,cAM5BzS,IAAI0S,iBAAmB,WACrB,IACE,GAAKruB,MAAMsuB,eAAiB,QAAU,CACpCN,OAAO30B,SAASoT,MAAQkP,IAAIlP,OAE9B,MAAMiW,QASdhmB,KAAKkL,KAAO6lB,UAGZE,YAAc,WACZ,OAAON,aAAcW,OAAOnhB,SAASW,OAMvCkgB,YAAc,SAAU9iB,KAAMkjB,cAC5B,IAAIS,WAAaP,OAAO30B,SACtBm1B,OAAShzB,EAAEC,GAAIuxB,gBAAiBwB,OAElC,GAAK5jB,OAASkjB,aAAe,CAE3BS,WAAW9hB,MAAQkP,IAAIlP,MAIvB8hB,WAAWE,OAGXD,QAAUD,WAAWG,MAAO,4BAAiCF,OAAS,eAEtED,WAAWI,QAGXX,OAAOnhB,SAASjC,KAAOA,OA9E+C,GAuF5E,OAAOlO,KAnIW,IAxKtB,CA8SG6W,OAAO/b,OAGV,SAAWgE,EAAGjE,WAGV3D,OAAOmG,WAAanG,OAAOmG,YAAe,SAAU4hB,IAAKpkB,WAErD,IAAIqf,KACAoD,QAAU2B,IAAIriB,gBACds1B,QAAU5U,QAAQ6U,mBAAqB7U,QAAQ8U,WAE/CC,SAAWpT,IAAI6D,cAAe,QAC9BwP,IAAMrT,IAAI6D,cAAe,OAE7BwP,IAAIvR,GAAK,YACTuR,IAAIz1B,MAAM01B,QAAU,+BACpBF,SAASx1B,MAAM21B,WAAa,OAC5BH,SAASI,YAAYH,KAErB,OAAO,SAASI,GAEZJ,IAAIK,UAAY,sBAAyBD,EAAI,yCAE7CpV,QAAQsV,aAAcP,SAAUH,SAChChY,KAAOoY,IAAIO,cAAgB,GAC3BvV,QAAQwV,YAAaT,UAErB,OACIxJ,QAAS3O,KACT6Y,MAAOL,IAxBsB,CA6BtC/1B,UAGHmC,EAAE0B,OAAOuyB,MAAQ,SAAUL,GACvB,OAAOx7B,OAAOmG,WAAYq1B,GAAI7J,UApCtC,CAuCGhS,SAEE,SAAU/X,EAAGjE,WACV,IAAI+nB,SACAoQ,MAAO,eAAgBr2B,UAG3BmC,EAAE0B,OAAOoiB,QAAU9jB,EAAE0B,OAAOoiB,YAC5B9jB,EAAE0J,OAAQ1J,EAAE8jB,QAASA,SACrB9jB,EAAE0J,OAAQ1J,EAAE0B,OAAOoiB,QAASA,UAPhC,CAQG/L,SAEF,SAAU/X,EAAGjE,WACViE,EAAE0J,OAAQ1J,EAAE8jB,SACR1kB,YAAa,gBAAiBhH,QAAU,wBAAyBA,UAFzE,CAIG2f,SAEP,SAAW/X,EAAGjE,WAGd,SAASo4B,WAAYvb,MACjB,IAAIwb,QAAUxb,KAAK+T,OAAQ,GAAI0H,cAAgBzb,KAAK0b,OAAQ,GACxDnX,OAAUvE,KAAO,IAAM2b,QAAQ9W,KAAM2W,QAAU,KAAQA,SAAUvxB,MAAO,KACxE2xB,EAEJ,IAAMA,KAAKrX,MAAQ,CACf,GAAKsX,MAAOtX,MAAOqX,MAAUz4B,UAAY,CACrC,OAAO,OAKnB,IAAIw3B,SAAWvzB,EAAG,UAAW00B,UAAW,QACpCD,MAAQlB,SAAU,GAAIx1B,MACtBw2B,SAAY,SAAU,MAAO,KAC7BI,MAAQ,oBAAqBv8B,OAC7Bw8B,UAAYx8B,OAAOw8B,cAAkBva,SAAS9gB,KAAMnB,OAAOw8B,aAAgB,qBAC3EC,GAAKz8B,OAAO08B,aAAeX,WAAY,qBACvCY,YAGJ,SAASC,YAEL,IAAIC,EAAI78B,OACJ88B,MAAQD,EAAEp3B,SAASs3B,mBAAqBF,EAAEp3B,SAASs3B,gBAAiB,6BAA8B,OAAQC,iBAAoBH,EAAEp2B,OAAS3B,UAAUC,UAAUkC,QAAS,aAAgB,GACtLykB,QAAU,SAAUprB,MAChB,KAAQA,MAAQw8B,KAAQ,CACpBl1B,EAAG,QAASuC,SAAU,cAG9BigB,IAAM,IAAIyS,EAAEI,MAEhB7S,IAAI8S,QAAU,WACVxR,QAAS,QAEbtB,IAAI+S,OAAS,WACTzR,QAAStB,IAAI/e,QAAU,GAAK+e,IAAI9e,SAAW,IAE/C8e,IAAIkQ,IAAM,yEAGd,SAAS8C,kBACL,IAAIC,OAAS,eAET7Z,IAAM5b,EAAE0B,OAAOuyB,MAAO,KAAOM,QAAQ9W,KAAM,IAAMgY,OAAS,QAAW,IAAMA,OAAS,MAAQA,OAAS,KACrGzO,GAAI0O,WAAYC,EAEpB,GAAK/Z,IAAM,CACP,QAASA,IAGboL,GAAKnpB,SAASmmB,cAAe,OAC7B0R,YAEIE,aAAgB,iBAChBC,UAAa,aAGjBtC,SAASuC,OAAQ9O,IAEjB,IAAM2O,KAAKD,WAAa,CACpB,GAAK1O,GAAGjpB,MAAO43B,KAAQ55B,UAAY,CAC/BirB,GAAGjpB,MAAO43B,GAAM,iCAChB/Z,IAAMxjB,OAAO29B,iBAAkB/O,IAAKgP,iBAAkBN,WAAYC,KAG1E,QAAW/Z,KAAOA,MAAQ,OAI9B,SAASqa,cACL,IAAIC,SAAW7kB,SAAS8kB,SAAW,KAAO9kB,SAAS+kB,KAAO/kB,SAASglB,SAAW,UAC1E/rB,KAAOtK,EAAG,aACVs2B,QAAU,KACVtkB,KAAO,GACPukB,KAAMC,OAEV,IAAMlsB,KAAKrR,OAAS,CAChBqR,KAAOgsB,QAAUt2B,EAAG,UAAYgS,KAAQkkB,WAAY3E,SAAU,YAC3D,CACHvf,KAAO1H,KAAKgI,KAAM,QAGtBikB,KAAOv2B,EAAG,wBAAyB00B,UAAWnB,UAC9CiD,OAASD,KAAM,GAAIvkB,KACnB1H,KAAM,GAAI0H,KAAOA,MAAQX,SAASglB,SAElC,GAAKC,QAAU,CACXA,QAAQxM,SAEZ,OAAO0M,OAAOn3B,QAAS62B,YAAe,EAI1C,SAASO,uBACL,IAAIrU,QAAUvkB,SAASmmB,cAAe,KAClClmB,gBAAkBD,SAASC,gBAC3Bi4B,iBAAmB39B,OAAO29B,iBAC1BW,SAEJ,KAAQ,kBAAmBtU,QAAQrkB,OAAU,CACzC,OAAO,MAGXqkB,QAAQrkB,MAAM44B,cAAgB,OAC9BvU,QAAQrkB,MAAM44B,cAAgB,IAC9B74B,gBAAgB61B,YAAavR,SAC7BsU,SAAWX,kBACXA,iBAAkB3T,QAAS,IAAKuU,gBAAkB,OAClD74B,gBAAgBk2B,YAAa5R,SAC7B,QAASsU,SAGb,SAASE,eACL,IAAIpD,IAAM31B,SAASmmB,cAAe,OAClC,cAAcwP,IAAIqD,wBAA0B,YAKhD72B,EAAE0J,OAAQ1J,EAAE0B,QAAUpE,aACtB0C,EAAE0B,OAAOpE,QAAQw5B,MAAQ,WACrB,IAAItC,EAAI,EACJhB,IAAM31B,SAASmmB,cAAe,OAC9B+S,EAAIvD,IAAIwD,QAEZ,EAAG,CACCxD,IAAIK,UAAY,uBAAuBW,EAAM,8BACxCuC,EAAE,IAEX,OAAOvC,EAAI,EAAIA,GAAKA,EATC,GAYzB,SAASyC,gBACL,IAAIhC,EAAI78B,OACJ6E,GAAKC,UAAUC,UACf+5B,SAAWh6B,UAAUg6B,SAErBC,QAAUl6B,GAAGO,MAAO,yBACpB45B,YAAcD,SAAWA,QAAS,GAClCE,QAAUp6B,GAAGO,MAAO,oBACpB85B,YAAcD,SAAWA,QAAS,GAClCE,kBAAoBt6B,GAAGO,MAAO,wBAC9Bg6B,YAAcD,mBAAqBA,kBAAmB,GAE1D,IAEQL,SAAS73B,QAAS,WAAc,GAAK63B,SAAS73B,QAAS,SAAY,GAAM63B,SAAS73B,QAAS,SAAY,IAAO+3B,WAAaA,UAAY,KAEzInC,EAAEL,cAAkBva,SAAS9gB,KAAM07B,EAAEL,aAAgB,sBACrD2C,mBAAqBC,UAAY,MAEjCv6B,GAAGoC,QAAS,YAAe,GAAK+3B,WAAaA,UAAY,KAEzDE,WAAaA,UAAY,GAEzB,oBAAqBl/B,QAAUg/B,WAAaA,UAAY,KAExDn6B,GAAGoC,QAAS,UAAa,GAAKpC,GAAGoC,QAAS,uBAA0B,EAAM,CAC5E,OAAO,MAGX,OAAO,KAGXW,EAAE0J,OAAQ1J,EAAE8jB,SAKR2T,UAAW,cAAersB,SACtB,iBAAkBA,WAEfhT,OAAO8E,UAAUC,UAAUkC,QAAS,YAAe,GAAKjH,OAAO6T,MAAQ7T,SACxEA,OAAO8E,UAAUC,UAAUu6B,OAAO,YAAc,EAEtDC,WAAY33B,EAAE0B,OAAOuyB,MAAO,YAC5B2D,mBAAoBzD,WAAY,WAChC0D,gBAAiB1D,WAAY,qBAC7B2D,eAAgBtC,kBAChBuC,YAAa5D,WAAY,eAAkBU,GAC3CoC,cAAeA,gBACfnG,WAAY,gBAAiB14B,QACzB,cAAeyF,SAASC,iBACxB,cAAey1B,SAAU,MAASoB,QAAUC,UAEhDoD,eAAgB/B,cAChBgC,iBAAkBxB,uBAClBG,aAAcA,eACd5B,UAAWA,YAGfzB,SAASzJ,SAMTiL,YAAc,WAEV,IAAI93B,GAAK7E,OAAO8E,UAAUC,UAG1B,OAAOF,GAAGoC,QAAS,UAAa,IACtBpC,GAAGoC,QAAS,cAAiB,GAAKpC,GAAGoC,QAAS,eAAkB,IAClEpC,GAAGoC,QAAS,gBAAmB,GAC/BpC,GAAGO,MAAO,sCARR,GAcdwC,EAAE0B,OAAOw2B,OAAS,WACd,OAAWl4B,EAAE8jB,QAAQ6T,YAAc33B,EAAE8jB,QAAQ8T,kBAAsB53B,EAAE0B,OAAOpE,QAAQw5B,OAAS92B,EAAE0B,OAAOpE,QAAQw5B,OAAS,KAAS92B,EAAE8jB,QAAQ8S,cAAgB52B,EAAEC,GAAG2C,OAAOpF,MAAM,wBAA0B,OAG1MwC,EAAE0B,OAAOy2B,cAEG//B,OAAO08B,aAAe18B,OAAOggC,aAE7BxD,WAEAG,YAKZ,GAAKA,YAAc,CACf/0B,EAAE,WACEA,EAAG,+BAAgCsS,KAAM,MAAO,wBAAyBA,KAAM,MAAO,gBAK9F,IAAMtS,EAAE8jB,QAAQiU,UAAY,CACxB/3B,EAAG,QAASuC,SAAU,oBA9O1B,CAiPIwV,SAGJ,SAAW/X,EAAGjE,WACV,IAAIs8B,KAAOr4B,EAAE0B,OAAOtJ,OAAQ8I,KACxBo3B,sBAAwB,aAG5Bt4B,EAAEwE,MAAMyZ,QAAQsa,gBACZ5iB,MAAO,WACH0iB,KAAKn4B,GAAI,WAAYo4B,wBAGzBxG,SAAU,WACNuG,KAAKj4B,IAAK,WAAYk4B,yBAI9Bt4B,EAAEwE,MAAMyZ,QAAQjR,SAAW9L,MACvBs3B,MAAO,MAEP5vB,iBAAkB,KAElB6vB,kBAAmB18B,UAInB28B,mBAAoB,WAChB,OAAO14B,EAAE8jB,QAAQ2T,WACbz3B,EAAE0B,OAAOkH,mBAAqB,MAC9B5M,KAAK28B,uBAIbA,oBAAqB,WACjB,OAAO34B,EAAE0B,OAAOiH,uBAAyB,MAI7CiwB,SAAU,SAAUp0B,OAChB,IAAIq0B,SAAW,IAAI74B,EAAEgvB,MAAO,YACxB8J,eAAiB,IAAI94B,EAAEgvB,MAAO,kBAC9BnqB,MAAQL,MAAM8Y,cAAczY,UAEhCi0B,eAAexb,cAAgB9Y,MAC/B6zB,KAAK9iB,QAASujB,gBAEd,GAAKA,eAAe7J,qBAAuB,CACvC,OAGJ,GAAKzqB,MAAMu0B,aAAe,CACtB/4B,EAAE0J,OAAO7E,MAAOL,MAAMu0B,cAK1BF,SAASvb,cAAgB9Y,MAMzBR,WAAW,WACPq0B,KAAK9iB,QAASsjB,UACVh0B,MAAOA,SAEZ,IAGPm0B,WAAY,SAAUx0B,OAClB,IAAIq0B,SAAW,IAAI74B,EAAEgvB,MAAO,YACxB8J,eAAiB,IAAI94B,EAAEgvB,MAAO,kBAElC8J,eAAexb,cAAgB9Y,MAC/B6zB,KAAK9iB,QAASujB,gBAEd,GAAKA,eAAe7J,qBAAuB,CACvC,OAKJ4J,SAASvb,cAAgB9Y,MAIzB6zB,KAAK9iB,QAASsjB,UAMVh0B,MAAOL,MAAMy0B,uBAOrBtjB,MAAO,WACH,GAAKzU,KAAKs3B,MAAQ,CACd,OAGJt3B,KAAKs3B,MAAQ,KAEb,GAAKt3B,KAAKw3B,qBAAuB,CAC7Bx3B,KAAKu3B,kBAAoB,WACzBJ,KAAK98B,KAAM,oBAAqB2F,KAAK03B,eAClC,GAAK13B,KAAKy3B,sBAAwB,CACrCz3B,KAAKu3B,kBAAoB,aACzBJ,KAAK98B,KAAM,sBAAuB2F,KAAK83B,gBA7GvD,CAiHIjhB,SAIJ,SAAW/X,EAAGjE,WACN,IAAIgO,KAAMmvB,MAAOpO,cAAgB,mBAEjC9qB,EAAE0B,OAAOqI,KAAOA,MACZovB,WAAY,YA2BZC,WAAY,sLAKZC,YAAa,SAAU9uB,KACnB,IAAI+uB,UAAYt9B,KAAK+V,SAAUxH,KAAO8G,SAASW,MAC3CunB,IAAMhvB,IAAM+uB,UAAYjoB,SAMxBjC,KAAOkqB,UAAUlqB,KAGrBA,KAAOA,OAAS,IAAM,GAAKA,KAE3B,OAAOmqB,IAAIpD,SACPmD,UAAUE,YACVD,IAAInD,MAMAmD,IAAIpD,WAAa,IAAMoD,IAAIlD,SAASoD,UAAW,EAAG,KAAQ,IAC1D,IAAM,IACVF,IAAIlD,SACJkD,IAAI7B,OACJtoB,MAIRsqB,eAAgB,SAAUC,gBACtB,OAAOA,eAAiB35B,EAAE0J,UAAYK,KAAK6vB,aAAgB7vB,KAAK6vB,YAAY5nB,MAGhF6nB,cAAe,WACX,OAAO79B,KAAK+V,SAAU/V,KAAKq9B,gBAK/BtnB,SAAU,SAAUxH,KAGhB,GAAKvK,EAAEud,KAAMhT,OAAU,SAAW,CAC9B,OAAOA,IAGX,IAAIwf,QAAUhgB,KAAKqvB,WAAWl1B,KAAMqG,KAAO,QAMvC,OACIyH,KAAc+X,QAAU,IAAO,GAC/B1f,WAAc0f,QAAU,IAAO,GAC/B+P,aAAc/P,QAAU,IAAO,GAC/BiJ,OAAcjJ,QAAU,IAAO,GAC/BoM,SAAcpM,QAAU,IAAO,GAC/ByP,YAAczP,QAAU,IAAO,GAC/BgQ,UAAchQ,QAAU,IAAO,GAC/BiQ,SAAcjQ,QAAU,IAAO,GAC/BkQ,SAAclQ,QAAU,IAAO,GAC/BqM,KAAcrM,QAAS,KAAQ,GAC/BmQ,SAAcnQ,QAAS,KAAQ,GAC/BoQ,KAAcpQ,QAAS,KAAQ,GAC/BsM,SAActM,QAAS,KAAQ,GAC/BqQ,UAAcrQ,QAAS,KAAQ,GAC/BsQ,SAActQ,QAAS,KAAQ,GAC/B2N,OAAc3N,QAAS,KAAQ,GAC/B3a,KAAc2a,QAAS,KAAQ,KAO3CuQ,iBAAkB,SAAUC,QAASC,SACjC,IAAIC,SACAC,SACA3hC,EAAGiB,EAEP,GAAKugC,SAAWA,QAAQ5N,OAAQ,KAAQ,IAAM,CAC1C,OAAO4N,QAGXA,QAAUA,SAAW,GACrBC,QAAUA,QAAUA,QAAQ/5B,QAAS,0BAA2B,IAAO,GAEvEg6B,SAAWD,QAAUA,QAAQ33B,MAAO,QACpC63B,SAAWH,QAAQ13B,MAAO,KAE1B,IAAM9J,EAAI,EAAGA,EAAI2hC,SAASzhC,OAAQF,IAAM,CACpCiB,EAAI0gC,SAAU3hC,GACd,OAASiB,GACL,IAAK,IACD,MACJ,IAAK,KACD,GAAKygC,SAASxhC,OAAS,CACnBwhC,SAAS9c,MAEb,MACJ,QACI8c,SAASthC,KAAMa,GACf,OAGZ,MAAO,IAAMygC,SAAShd,KAAM,MAIhCkd,aAAc,SAAUC,QAASC,SAC7B,OAAO9wB,KAAKgI,SAAU6oB,SAAU5H,OAAO51B,gBACnC2M,KAAKgI,SAAU8oB,SAAU7H,OAAO51B,eAIxC09B,cAAe,SAAUvwB,KAErB,OAAOR,KAAKgI,SAAUxH,KAAM4rB,WAAa,IAI7C4E,cAAe,SAAUxwB,KACrB,OAAOR,KAAKgI,SAAUxH,KAAM4rB,WAAa,IAK7CnsB,gBAAiB,SAAUgxB,OAAQC,QAC/B,IAAMlxB,KAAK+wB,cAAeE,QAAW,CACjC,OAAOA,OAGX,GAAKC,SAAWl/B,UAAY,CACxBk/B,OAASj/B,KAAKoO,aAGlB,IAAI8wB,OAASnxB,KAAKgI,SAAUipB,QACxBG,OAASpxB,KAAKgI,SAAUkpB,QACxB9E,SAAW+E,OAAO/E,UAAYgF,OAAOhF,SACrCqD,YAAc0B,OAAO/E,SAAW+E,OAAO1B,YAAgB0B,OAAO1B,aAAe2B,OAAO3B,YACpFO,UAAYmB,OAAOnB,WAAaoB,OAAOpB,UACvCqB,QAAUF,OAAO7E,WAAa,GAC9BA,SAAWtsB,KAAKuwB,iBAAkBY,OAAO7E,UAAY8E,OAAOd,SAAUc,OAAO9E,UAC7EqB,OAASwD,OAAOxD,SAAa0D,SAAWD,OAAOzD,QAAY,GAC3DtoB,KAAO8rB,OAAO9rB,KAElB,OAAO+mB,SAAWqD,YAAcO,UAAY1D,SAAWqB,OAAStoB,MAIpEisB,gBAAiB,SAAU9wB,IAAKsF,QAC5B,IAAIyrB,EAAIvxB,KAAKgI,SAAUxH,KACnBvP,SAAa6U,SAAW,SAAa7P,EAAEgV,MAAOnF,QAAWA,OACzDpU,EAAI6/B,EAAE5D,QAAU,IACpB,OAAO4D,EAAExB,aAAer+B,GAAMA,EAAEkxB,OAAQlxB,EAAExC,OAAS,KAAQ,IAAM,IAAM,IAAO+B,GAAMsgC,EAAElsB,MAAQ,KAGlGoF,oBAAqB,SAAUymB,QAC3B,IAAIhtB,OAASgtB,OACTK,EAAIvxB,KAAKgI,SAAUkpB,QAEvB,GAAKlxB,KAAKwxB,eAAgBD,GAAM,CAG5BrtB,OAASqtB,EAAElsB,KACNvM,MAAOioB,eAAgB,GACvBrqB,QAAS,KAAM,IACfA,QAAS,QAAS,SACpB,GAAKsJ,KAAK4wB,aAAcW,EAAGt/B,KAAKoO,cAAiB,CACpD6D,OAASqtB,EAAEjxB,WAAW5J,QAASzE,KAAKoO,aAAa4oB,OAAQ,IAAKnwB,MAAOioB,eAAgB,GAGzF,OAAO1yB,OAAOojC,mBAAoBvtB,SAItC1T,IAAK,SAAUkhC,SACX,GAAKA,UAAY1/B,UAAY,CACzB0/B,QAAU1xB,KAAK8vB,gBAAgBzqB,KAEnC,OAAOrF,KAAK2xB,UAAWD,SAAUh7B,QAAS,mBAAoB,KAIlEuV,IAAK,SAAUjM,MACXsH,SAASjC,KAAOrF,MAKpBY,OAAQ,SAAUJ,KACd,MAAO,KAASgE,KAAMhE,MAI1BoxB,MAAO,SAAUpxB,KACb,OAAOA,IAAI9J,QAASzE,KAAKoO,aAAa4oB,OAAQ,KAIlD0I,UAAW,SAAUnxB,KACjB,OAAOA,IAAI9J,QAAS,KAAM,KAG9Bm7B,iBAAkB,SAAUrxB,KACxB,OAAOA,IAAI9J,QAAS,QAAS,KAIjCo7B,UAAW,SAAUzsB,MACjB,OAAOrF,KAAK2xB,UAAWtsB,KAAK3O,QAAS,QAAS,IAAKA,QAASqqB,cAAe,MAG/EgR,YAAa,SAAU1sB,MACnB,MAAO,WAAeb,KAAMa,OAKhC2sB,WAAY,SAAUxxB,KAClB,IAAI+wB,EAAIvxB,KAAKgI,SAAUxH,KAEvB,SAAW+wB,EAAEnF,UACPmF,EAAEtI,OAAO51B,gBAAkBpB,KAAK49B,YAAY5G,OAAO51B,gBAG7D4+B,YAAa,SAAUzxB,KACnB,MAAO,YAAgBgE,KAAMhE,MAGjCgxB,eAAgB,SAAUhxB,KACtB,IAAI+wB,EAAIvxB,KAAKgI,SAAUxH,KAOvB,GAAK+wB,EAAEnF,WAAa,GAAK,CACrB,OAAUn6B,KAAK2O,OAAO2wB,EAAElsB,OAASksB,EAAElsB,OAAUksB,EAAEjxB,aAAerO,KAAK49B,YAAYvvB,YAAgBrO,KAAKigC,qBAAuBX,EAAEjxB,aAAerO,KAAKoO,aAAaC,YAElK,MAAO,KAASkE,KAAM+sB,EAAEtpB,OAG5BkqB,OAAQ,SAAU3xB,IAAK4xB,eACnB,IAAInqB,KAAMoqB,WAAY1E,OAAQ2E,WAAYC,OACtC3xB,OAAS3O,KAAK2O,OAAQJ,KACtBgvB,IAAMv9B,KAAK+V,SAAUxH,KACrBgyB,cAAgBhD,IAAInqB,KACpBotB,QAAU,GAGd,IAAML,cAAgB,CAClB,GAAKxxB,OAAS,CACVwxB,cAAgBpyB,KAAKsvB,kBAClB,CACHiD,OAASvyB,KAAK2vB,eAAgB,MAC9B,GAAK3vB,KAAKY,OAAQ2xB,OAAOltB,MAAS,CAC9B+sB,cAAgBpyB,KAAKmyB,OAAQI,OAAOtqB,UACjC,CACHmqB,cAAgBG,OAAOtqB,OAQnCoqB,WAAazxB,OAASZ,KAAK2xB,UAAWnxB,KAAQA,IAI9C6xB,WAAaryB,KAAKY,OAAQ4uB,IAAInqB,MAASrF,KAAK2xB,UAAWnC,IAAInqB,MAASgtB,WAGpEC,WAAaD,WAAW/8B,QAASrD,KAAKm9B,YAGtC,GAAKkD,YAAc,EAAI,CACnBG,QAAUJ,WAAW5gC,MAAO6gC,YAC5BD,WAAaA,WAAW5gC,MAAO,EAAG6gC,YAItCrqB,KAAOjI,KAAKC,gBAAiBoyB,WAAYD,eAIzCzE,OAAS17B,KAAK+V,SAAUC,MAAO0lB,OAG/B,GAAK/sB,OAAS,CAEV,GAAKZ,KAAKY,OAAQ4xB,gBAAmBA,cAAc97B,QAAQ,IAAK,IAAIpB,QAASrD,KAAKm9B,cAAiB,EAAG,CAClGoD,cAAgB,GAKpB,GAAKC,SAAWD,cAAcl9B,QAASrD,KAAKm9B,eAAkB,EAAG,CAC7DoD,eAAiBC,QAIrB,GAAKD,cAAcl9B,QAAS,QAAW,GAAKk9B,gBAAkB,GAAK,CAC/DA,cAAgB,IAAMA,cAI1BvqB,KAAOjI,KAAKgI,SAAUC,MACtBA,KAAOA,KAAKmkB,SAAWnkB,KAAKwnB,YAAcxnB,KAAKokB,KAAOpkB,KAAKqkB,SAAWqB,OAClE6E,kBACD,CACHvqB,MAAQA,KAAK3S,QAAS,MAAS,EAAIm9B,QAAU,IAAMA,QAGvD,OAAOxqB,MAGXyqB,kBAAmB,SAAUrtB,MACzB,OAAOA,KAAK3O,QAAS,IAAK,IAAKpB,QAASrD,KAAKm9B,cAAiB,GAIlEuD,eAAgB,SAAUttB,MACtB,IAAIutB,QAAYvtB,KAAKqqB,UAAW,EAAG,KAAQ,IAC3C,GAAKkD,QAAU,CACXvtB,KAAOA,KAAKqqB,UAAW,GAE3B,OAASkD,QAAU,IAAM,IAAOvtB,KAAK3O,QAAS,sCAAuC,SAKzFm8B,YAAa,SAAU7yB,MACnB,OAAOA,MAAQA,KAAKlH,MAAOioB,eAAgB,IAK/C+R,eAAgB,SAAUtyB,KAEtB,IAAI+wB,EAAIvxB,KAAKgI,SAAUhI,KAAKC,gBAAiBO,IAAKvO,KAAKoO,eAGnD0yB,SAAWxB,EAAEjxB,aAAerO,KAAK49B,YAAYvvB,YACvCrO,KAAKigC,qBACHX,EAAEjxB,aAAerO,KAAKoO,aAAaC,WAG3C0yB,GAAK/8B,EAAE0B,OAAOs7B,UAGdC,KAAOF,IAAMA,GAAG,GAAKA,GAAG,GAAG9a,GAAKlmB,UAKpC,OAAO+gC,YACAxB,EAAElsB,MACDksB,EAAElsB,OAAS,KACT6tB,MAAQ3B,EAAElsB,KAAK3O,QAAS,KAAM,MAASw8B,OAUrDC,8BAA+B,SAAUZ,OAAQa,QAC7C,OAAOn9B,EAAE0B,OAAO8G,wBACX8zB,OAAOnG,WAAa,SAAWmG,OAAOnG,WAAa,aACpDgH,OAAOzF,OAAQ,eAAkB,IAI7C3tB,KAAK6vB,YAAc7vB,KAAK8vB,gBAExBX,MAAQl5B,EAAG,QAASoO,KAAM,QAE1BrE,KAAKK,aAAe8uB,MAAMjgC,OACtB8Q,KAAKgI,SAAUhI,KAAKC,gBAAiBkvB,MAAM5mB,KAAM,QAAUvI,KAAK6vB,YAAY5nB,OAC5EjI,KAAK6vB,YAET7vB,KAAKkyB,oBAAuBlyB,KAAK6vB,YAAYvvB,aAAeN,KAAKK,aAAaC,WAG9EN,KAAKqzB,gBAAkB,SAAUzD,gBAC7B,OAAOA,eAAiB35B,EAAE0J,UAAYK,KAAKK,cAAiBL,KAAKK,aAAa4H,MAIlFhS,EAAE0J,OAAQ1J,EAAE0B,QAGRg4B,eAAgB3vB,KAAK2vB,eAGrB0D,gBAAiBrzB,KAAKqzB,mBArblC,CAubIrlB,SAIJ,SAAW/X,EAAGjE,WACViE,EAAE0B,OAAOmL,QAAU,SAAU6B,MAAO/U,OAChCqC,KAAK0S,MAAQA,UACb1S,KAAK6S,YAAclV,OAAS,GAGhCqG,EAAE0J,OAAO1J,EAAE0B,OAAOmL,QAAQxT,WACtBqY,UAAW,WACP,OAAO1V,KAAK0S,MAAO1S,KAAK6S,cAG5BwuB,QAAS,WACL,OAAOrhC,KAAK0S,MAAO1S,KAAKkY,gBAG5BopB,QAAS,WACL,OAAOthC,KAAK0S,MAAO1S,KAAK6S,YAAc,IAG1C0uB,QAAS,WACL,OAAOvhC,KAAK0S,MAAO1S,KAAK6S,YAAc,IAI1CmO,IAAK,SAAUzS,IAAK7R,MAChBA,KAAOA,SAGP,GAAKsD,KAAKshC,UAAY,CAClBthC,KAAKoV,eAKT,GAAK1Y,KAAK0W,MAAQ1W,KAAK0W,KAAK/P,QAAS,QAAW,EAAG,CAC/C3G,KAAK0W,KAAO,IAAM1W,KAAK0W,KAG3B1W,KAAK6R,IAAMA,IACXvO,KAAK0S,MAAMvV,KAAMT,MACjBsD,KAAK6S,YAAc7S,KAAK0S,MAAMzV,OAAS,GAI3CmY,aAAc,WACVpV,KAAK0S,MAAQ1S,KAAK0S,MAAMlT,MAAO,EAAGQ,KAAK6S,YAAc,IAGzDT,KAAM,SAAU7D,IAAKmE,MAAO8uB,aACxB9uB,MAAQA,OAAS1S,KAAK0S,MAEtB,IAAI+uB,MAAO1kC,EAAGE,OAASyV,MAAMzV,OAAQU,MAErC,IAAMZ,EAAI,EAAGA,EAAIE,OAAQF,IAAM,CAC3B0kC,MAAQ/uB,MAAM3V,GAEd,GAAKyiC,mBAAmBjxB,OAASixB,mBAAmBiC,MAAMlzB,MACtDixB,mBAAmBjxB,OAASixB,mBAAmBiC,MAAMruB,MAAQ,CAC7DzV,MAAQZ,EAER,GAAKykC,YAAc,CACf,OAAO7jC,QAKnB,OAAOA,OAGX8Q,QAAS,SAAUF,KACf,IAAIE,QAASssB,EAAI/6B,KAAK6S,YAOtBpE,QAAUzO,KAAKoS,KAAM7D,IAAKvO,KAAK0S,MAAMlT,MAAM,EAAGu7B,IAS9C,GAAKtsB,UAAY1O,UAAY,CACzB0O,QAAUzO,KAAKoS,KAAM7D,IAAKvO,KAAK0S,MAAMlT,MAAMu7B,GAAI,MAC/CtsB,QAAUA,UAAY1O,UAAY0O,QAAUA,QAAUssB,EAG1D,OAAOtsB,SAGXgK,OAAQ,SAAUipB,MACd,IAAIC,eAAiB3hC,KAAKyO,QAASizB,KAAKnzB,KAAOwsB,EAAI/6B,KAAK6S,YAIxD,GAAK8uB,iBAAmB5hC,UAAY,CAChCC,KAAK6S,YAAc8uB,eACnB3hC,KAAKkY,cAAgB6iB,EAMzB,GAAK4G,eAAiB5G,EAAI,EACpB2G,KAAKhpB,SAAWgpB,KAAKjyB,MAAQzL,EAAE2tB,MAAQ3xB,KAAK0V,YAAa,aACxD,GAAKisB,eAAiB5G,EAAI,EAC3B2G,KAAKhpB,SAAWgpB,KAAKE,SAAW59B,EAAE2tB,MAAQ3xB,KAAK0V,YAAa,gBAC3D,GAAKisB,iBAAmB5hC,WAAa2hC,KAAK9oB,QAAU,CACvD8oB,KAAK9oB,QAAS5Y,KAAK0V,kBAhHnC,CAoHIqG,SAIJ,SAAW/X,EAAGjE,WACV,IAAIgO,KAAO/J,EAAE0B,OAAOqI,KAChB8zB,YAAcxsB,SAASW,KAE3BhS,EAAE0B,OAAOo8B,UAAY,SAAU1yB,SAC3BpP,KAAKoP,QAAUA,QACfpP,KAAK+hC,wBAA0B,KAE/B/9B,EAAE0B,OAAOtJ,OAAOmD,MACZyiC,mBAAoBh+B,EAAEixB,MAAOj1B,KAAK48B,SAAU58B,MAC5CiiC,qBAAsBj+B,EAAEixB,MAAOj1B,KAAKg9B,WAAYh9B,SAIxDgE,EAAE0J,OAAO1J,EAAE0B,OAAOo8B,UAAUzkC,WACxB6iC,OAAQ,SAAU3xB,IAAK7R,MACnB,IAAImM,MAAOmN,KAAM5C,KAAOrF,KAAKY,OAAOJ,KAAOR,KAAK2xB,UAAUnxB,KAAOA,IAEjEyH,KAAOjI,KAAKmyB,OAAQ3xB,KAIpB1F,MAAQ7E,EAAE0J,QACN0F,KAAMA,KACN7E,IAAKyH,MACNtZ,MAYHN,OAAOgT,QAAQ8yB,aAAcr5B,MAAOA,MAAMoM,OAASpT,SAASoT,MAAOe,MAEnE,OAAOnN,OAGXuK,KAAM,SAAU7E,IAAKyH,MACjB,IAAImsB,OAAQC,IAAKhvB,KAAMivB,SAKvBF,OAASp0B,KAAKgI,SAAUxH,KACxB6zB,IAAMr0B,KAAK8vB,gBAEX,GAAKuE,IAAI/H,SAAW+H,IAAI1G,SAAWyG,OAAO9H,SAAW8H,OAAOzG,OAAS,CAIjEtoB,KAAO+uB,OAAO/uB,KAAO+uB,OAAO/uB,KAAO+uB,OAAO9H,SAAW8H,OAAOzG,YACzD,GAAK3tB,KAAKY,OAAOJ,KAAO,CAC3B8zB,SAAWt0B,KAAKgI,SAAUC,MAE1B5C,KAAOivB,SAAShI,SAAWgI,SAAS3G,QAAU3tB,KAAK0yB,kBAAmB4B,SAASjvB,MAAQivB,SAASjvB,KAAK3O,QAAS,IAAK,IAAO,QACvH,CACH2O,KAAO7E,IAGX,OAAO6E,MAIX2E,GAAI,SAAUxJ,IAAK7R,KAAM4lC,UACrB,IAAIz5B,MAAOmN,KAAM5C,KAAMmvB,cACnBC,gBAAkBx+B,EAAEwE,MAAMyZ,QAAQjR,SAAS0rB,qBAG/C1mB,KAAOjI,KAAKmyB,OAAQ3xB,KAGpB6E,KAAOpT,KAAKoT,KAAM7E,IAAKyH,MAMvB,GAAKssB,UAAYlvB,OAASrF,KAAK2xB,UAAU3xB,KAAK8vB,gBAAgBzqB,MAAQ,CAClEpT,KAAKyiC,sBAAwBH,SAajCtiC,KAAK0iC,0BAA4B,KACjCtmC,OAAOiZ,SAASjC,KAAOA,KAQvBpT,KAAK0iC,0BAA4B,MAEjC75B,MAAQ7E,EAAE0J,QACNa,IAAKyH,KACL5C,KAAMA,KACN6B,MAAOpT,SAASoT,OACjBvY,MAEH,GAAK8lC,gBAAkB,CACnBD,cAAgB,IAAIv+B,EAAEgvB,MAAO,YAC7BuP,cAAcjhB,eACVC,KAAM,WACN1Y,MAAO,MAGX7I,KAAKkgC,OAAQ3xB,IAAK1F,OAIlB,IAAMy5B,SAAW,CACbtiC,KAAK2iC,eAAiB,KACtB3+B,EAAE0B,OAAOtJ,OAAOmd,QAASgpB,gBAOjCviC,KAAKoP,QAAQ4R,IAAKnY,MAAM0F,IAAK1F,QAUjC+zB,SAAU,SAAUp0B,OAChB,IAAI4K,KAAMvK,MAIV,IAAM7E,EAAEwE,MAAMyZ,QAAQjR,SAAS0rB,qBAAuB,CAClD,OAKJ,GAAK18B,KAAK0iC,0BAA4B,CAClC1iC,KAAK0iC,0BAA4B,MACjCl6B,MAAMo6B,2BACN,OAKJ,GAAK5iC,KAAK2iC,eAAiB,CACvB3iC,KAAK2iC,eAAiB,MACtB,OAQJ,IAAMn6B,MAAM8Y,cAAczY,OACtB7I,KAAKoP,QAAQsD,MAAMzV,SAAW,GAC9B+C,KAAK+hC,wBAA0B,CAC/B/hC,KAAK+hC,wBAA0B,MAE/B,GAAK1sB,SAASW,OAAS6rB,YAAc,CACjCr5B,MAAM0N,iBACN,QAUR9C,KAAOrF,KAAK8vB,gBAAgBzqB,KAC5B,IAAM5K,MAAM8Y,cAAczY,OAASuK,KAAO,CAGtCvK,MAAQ7I,KAAKkgC,OAAQ9sB,MAIrBpT,KAAKoP,QAAQ4R,IAAKnY,MAAM0F,IAAK1F,OAI7BL,MAAMu0B,aAAel0B,MAIrB,OAKJ7I,KAAKoP,QAAQqJ,QACTlK,KAAM/F,MAAM8Y,cAAczY,WAAa0F,KAAO6E,KAI9CsF,QAAS,SAAUmqB,aAActsB,WAE7B/N,MAAMu0B,aAAe/4B,EAAE0J,UAAWm1B,cAClCr6B,MAAMu0B,aAAaxmB,UAAYA,cAU3CymB,WAAY,SAAUx0B,OAClB,IAAI4G,QAASgE,KAIb,IAAKpP,EAAEwE,MAAMyZ,QAAQjR,SAAS2rB,uBAC1B34B,EAAEwE,MAAMyZ,QAAQjR,SAAS0rB,qBAAuB,CAChD,OAKJ,GAAK18B,KAAKyiC,sBAAwB,CAC9BziC,KAAKyiC,sBAAwB,MAC7Bj6B,MAAMo6B,2BACN,OAGJxzB,QAAUpP,KAAKoP,QACfgE,KAAOrF,KAAK8vB,gBAAgBzqB,KAI5BpT,KAAKoP,QAAQqJ,QACTlK,IAAK6E,KAILsF,QAAS,SAAUmqB,aAActsB,WAE7B/N,MAAMy0B,gBAAkBj5B,EAAE0J,UAAWm1B,cACrCr6B,MAAMy0B,gBAAgB1mB,UAAYA,WAWtCqC,QAAS,WACLxJ,QAAQ4R,IAAK5N,MACTA,KAAMA,KACN6B,MAAOpT,SAASoT,eAjRxC,CAuRI8G,SAIJ,SAAW/X,EAAGjE,WAIViE,EAAE0B,OAAOsL,SAAW,SAAUzC,IAAK7R,KAAM4lC,UACrCt+B,EAAE0B,OAAOsL,SAAS9P,UAAU6W,GAAIxJ,IAAK7R,KAAM4lC,WAK/Ct+B,EAAE0B,OAAOsL,SAAS5B,QAAU,IAAIpL,EAAE0B,OAAOmL,QAGzC7M,EAAE0B,OAAOsL,SAAS9P,UAAY,IAAI8C,EAAE0B,OAAOo8B,UAAW99B,EAAE0B,OAAOsL,SAAS5B,SAExE,IAAIgzB,IAAMp+B,EAAE0B,OAAOqI,KAAK8vB,gBACxB75B,EAAE0B,OAAOsL,SAAS5B,QAAQ4R,IAAKohB,IAAIpsB,MAAO5C,KAAMgvB,IAAIhvB,QAhBxD,CAiBI2I,SAGJ,SAAW/X,EAAGjE,WACV,IAAIohB,OACI2hB,aACAr1B,eAEJs1B,YAAclhC,SAASmmB,cAAe,KACtCgb,gBAAmB,GAAI,UAAW,OAAQ,MAE9Ch/B,EAAEmb,MAAQ,YAAa,cAAgB,SAAUpiB,EAAGwV,MAGhD,IAAI0wB,SAAalmC,IAAM,EAAMwV,KAAO,IAAM,OAASA,KAEnDvO,EAAEmb,KAAM6jB,eAAgB,SAAUE,EAAGC,QACjC,GAAKJ,YAAYhhC,MAAOiC,EAAEmc,UAAWgjB,OAASF,aAAiBljC,UAAY,CACtEohB,MAAO5O,MAAQ,UAAa4wB,OAC7B,OAAO,SAKfhiB,MAAO5O,MAAQ,YACXvO,EAAEmc,UAAWgB,MAAO5O,MAAQ,UAAaA,KAAO,IAAM,YAC1D4O,MAAO5O,MAAQ,SACXvO,EAAEmc,UAAWgB,MAAO5O,MAAQ,UAAaA,KAAO,IAAM,OAG1D,GAAK4O,MAAO5O,MAAQ,YAAe,GAAK,CACpC4O,MAAO5O,MAAQ,SAAY4O,MAAO5O,MAAQ,SAAUnR,iBAK5D4C,EAAE8jB,QAAQsb,eAAmBjiB,MAAO,cAAgB,YAAephB,UACnEiE,EAAE8jB,QAAQub,cAAkBliB,MAAO,aAAe,YAAephB,UAGjEiE,EAAG++B,aAAcjV,SAGjB9pB,EAAEC,GAAGq/B,kBAAoB,SAAUpzB,SAAUqR,KAAMgiB,cAC/C,IAAIC,MAAO/P,SACP1G,KAAO/sB,KACPyjC,aAAe,WAGXpN,aAAcmN,OACdtzB,SAASpQ,MAAOE,KAAMyX,YAE1BisB,eAAmBniB,MAAQA,OAAS,YAAgB,YAAc,aAGtE,GAAOvd,EAAE8jB,QAAQsb,gBAAkBM,gBAAkB,cAC/C1/B,EAAE8jB,QAAQub,eAAiBK,gBAAkB,YAAgB,CAG/D,GAAKH,eAAiBxjC,UAAY,CAG9B,GAAKiE,EAAGhE,MAAOqQ,UAAYxO,SAAW,CAIlC4xB,SAAWlV,WACPva,EAAGhE,MAAO6lB,IAAK1E,MAAOuiB,eAAgBjQ,WACtC,IAIR,GAAKA,WAAa,GAAKA,WAAa1zB,WAAainB,MAAOyM,UAAa,CACjEA,SAAWzvB,EAAEC,GAAGq/B,kBAAkBK,iBAK1CH,MAAQx7B,WAAY,WAChBhE,EAAG+oB,MAAO3oB,IAAK+c,MAAOuiB,eAAgBl7B,MAAOi7B,cAC7CvzB,SAASpQ,MAAOitB,OACjB0G,UAGH,OAAOzvB,EAAGhE,MAAOwE,IAAK2c,MAAOuiB,eAAgBl7B,MAAOi7B,kBACjD,CAIHz7B,WAAYhE,EAAEixB,MAAO/kB,SAAUlQ,MAAQ,GACvC,OAAOgE,EAAGhE,QAKlBgE,EAAEC,GAAGq/B,kBAAkBK,gBAAkB,KA5F7C,CA6FI5nB,SAiBJ,SAAW/X,EAAG5H,OAAQyF,SAAU9B,WAEhC,IAAI6jC,iBAAmB,uBACnBC,wBAA0B,iBAC1BC,kBAAoB,0EAA0Ej9B,MAAO,KACrGk9B,gBAAkB,8CAA8Cl9B,MAAO,KACvEm9B,eAAiBhgC,EAAEwE,MAAMy7B,WAAajgC,EAAEwE,MAAMy7B,WAAW9iB,SACzD+iB,gBAAkBlgC,EAAEwE,MAAM2Y,MAAME,OAAQ2iB,gBACxCG,qBACAC,aAAe,EACfC,OAAS,EACTC,OAAS,EACTC,UAAY,MACZC,kBACAC,mBAAqB,MACrBC,mBAAqB,MACrBC,sBAAwB,qBAAsB9iC,SAC9C+iC,UAAY5gC,EAAGnC,UACfgjC,YAAc,EACdC,YAAc,EAAGC,UACjBhoC,EAEJiH,EAAEghC,QACEC,sBAAuB,GACvBC,uBAAwB,GACxBC,mBAAoB,MAGxB,SAASC,eAAgB58B,OAErB,MAAQA,cAAgBA,MAAM8Y,gBAAkB,YAAc,CAC1D9Y,MAAQA,MAAM8Y,cAElB,OAAO9Y,MAGX,SAAS68B,mBAAoB78B,MAAO88B,WAEhC,IAAI3L,EAAInxB,MAAM+Y,KACVtiB,GAAIkiB,MAAOokB,GAAI3oB,KAAM4oB,GAAItN,MAAOn7B,EAAGmmC,EAAGuC,IAE1Cj9B,MAAQxE,EAAEgvB,MAAOxqB,OACjBA,MAAM+Y,KAAO+jB,UAEbrmC,GAAKuJ,MAAM8Y,cACXH,MAAQnd,EAAEwE,MAAM2Y,MAIhB,GAAKwY,EAAE+B,OAAQ,mBAAsB,EAAI,CACrCva,MAAQ+iB,gBAMZ,GAAKjlC,GAAK,CACN,IAAMlC,EAAIokB,MAAMlkB,OAAQ2f,KAAM7f,GAAK,CAC/B6f,KAAOuE,QAASpkB,GAChByL,MAAOoU,MAAS3d,GAAI2d,OAM5B,GAAK+c,EAAE+B,OAAO,yBAA2B,IAAMlzB,MAAMk9B,MAAQ,CACzDl9B,MAAMk9B,MAAQ,EAGlB,GAAK/L,EAAE+B,OAAO,aAAe,EAAI,CAC7B6J,GAAKH,eAAgBnmC,IACrB06B,EAAI4L,GAAGI,QACPH,GAAKD,GAAGK,eACR1N,MAAUyB,GAAKA,EAAE18B,OAAW08B,EAAE,GAAS6L,IAAMA,GAAGvoC,OAAWuoC,GAAI,GAAMzlC,UAErE,GAAKm4B,MAAQ,CACT,IAAMgL,EAAI,EAAGuC,IAAM1B,gBAAgB9mC,OAAQimC,EAAIuC,IAAKvC,IAAK,CACrDtmB,KAAOmnB,gBAAiBb,GACxB16B,MAAOoU,MAASsb,MAAOtb,QAKnC,OAAOpU,MAGX,SAASq9B,uBAAwBzf,SAE7B,IAAI0f,SACAC,EAAGC,EAEP,MAAQ5f,QAAU,CAEd2f,EAAI/hC,EAAEtH,KAAM0pB,QAASwd,kBAErB,IAAOoC,KAAKD,EAAI,CACZ,GAAKA,EAAGC,GAAM,CACVF,MAAOE,GAAMF,MAAMG,kBAAoB,MAG/C7f,QAAUA,QAAQM,WAEtB,OAAOof,MAGX,SAASI,oCAAqC9f,QAASkf,WACnD,IAAIS,EACJ,MAAQ3f,QAAU,CAEd2f,EAAI/hC,EAAEtH,KAAM0pB,QAASwd,kBAErB,GAAKmC,KAAQT,WAAaS,EAAGT,YAAgB,CACzC,OAAOlf,QAEXA,QAAUA,QAAQM,WAEtB,OAAO,KAGX,SAASyf,sBACLzB,mBAAqB,MAGzB,SAAS0B,uBACL1B,mBAAqB,KAGzB,SAAS2B,sBACLvB,YAAc,EACdN,eAAevnC,OAAS,EACxBwnC,mBAAqB,MAIrB2B,uBAGJ,SAASE,uBAGLH,sBAGJ,SAASI,kBACLC,kBACApC,aAAep8B,WAAY,WACvBo8B,aAAe,EACfiC,uBACDriC,EAAEghC,OAAOG,oBAGhB,SAASqB,kBACL,GAAKpC,aAAe,CAChB/N,aAAc+N,cACdA,aAAe,GAIvB,SAASqC,oBAAqBnB,UAAW98B,MAAOs9B,OAC5C,IAAIY,GAEJ,GAAOZ,OAASA,MAAOR,aACRQ,OAASI,oCAAqC19B,MAAMkB,OAAQ47B,WAAgB,CAEvFoB,GAAKrB,mBAAoB78B,MAAO88B,WAEhCthC,EAAGwE,MAAMkB,QAAQ6P,QAASmtB,IAG9B,OAAOA,GAGX,SAASC,mBAAoBn+B,OACzB,IAAIo+B,QAAU5iC,EAAEtH,KAAM8L,MAAMkB,OAAQm6B,yBAChC6C,GAEJ,IAAMjC,sBAAyBK,aAAeA,cAAgB8B,SAAY,CACtEF,GAAKD,oBAAqB,IAAMj+B,MAAM+Y,KAAM/Y,OAC5C,GAAKk+B,GAAK,CACN,GAAKA,GAAGzT,qBAAuB,CAC3BzqB,MAAM0N,iBAEV,GAAKwwB,GAAGG,uBAAyB,CAC7Br+B,MAAMs+B,kBAEV,GAAKJ,GAAGK,gCAAkC,CACtCv+B,MAAMo6B,8BAMtB,SAASoE,iBAAkBx+B,OAEvB,IAAIm9B,QAAUP,eAAgB58B,OAAQm9B,QAClCj8B,OAAQo8B,MAAOnM,EAEnB,GAAKgM,SAAWA,QAAQ1oC,SAAW,EAAI,CAEnCyM,OAASlB,MAAMkB,OACfo8B,MAAQD,uBAAwBn8B,QAEhC,GAAKo8B,MAAMG,kBAAoB,CAE3BnB,YAAcD,cACd7gC,EAAEtH,KAAMgN,OAAQm6B,wBAAyBiB,aAEzC0B,kBAEAF,uBACA/B,UAAY,MAEZ5K,EAAIyL,eAAgB58B,OAAQm9B,QAAS,GACrCtB,OAAS1K,EAAEsN,MACX3C,OAAS3K,EAAEuN,MAEXT,oBAAqB,aAAcj+B,MAAOs9B,OAC1CW,oBAAqB,aAAcj+B,MAAOs9B,SAKtD,SAASqB,aAAc3+B,OACnB,GAAKk8B,mBAAqB,CACtB,OAGJ,IAAMH,UAAY,CACdkC,oBAAqB,eAAgBj+B,MAAOq9B,uBAAwBr9B,MAAMkB,SAG9E66B,UAAY,KACZgC,kBAGJ,SAASa,gBAAiB5+B,OACtB,GAAKk8B,mBAAqB,CACtB,OAGJ,IAAI/K,EAAIyL,eAAgB58B,OAAQm9B,QAAS,GACrC0B,UAAY9C,UACZ+C,cAAgBtjC,EAAEghC,OAAOC,sBACzBa,MAAQD,uBAAwBr9B,MAAMkB,QAEtC66B,UAAYA,YACN5a,KAAK4d,IAAK5N,EAAEsN,MAAQ5C,QAAWiD,eAC7B3d,KAAK4d,IAAK5N,EAAEuN,MAAQ5C,QAAWgD,eAE3C,GAAK/C,YAAc8C,UAAY,CAC3BZ,oBAAqB,eAAgBj+B,MAAOs9B,OAGhDW,oBAAqB,aAAcj+B,MAAOs9B,OAC1CS,kBAGJ,SAASiB,eAAgBh/B,OACrB,GAAKk8B,mBAAqB,CACtB,OAGJ0B,uBAEA,IAAIN,MAAQD,uBAAwBr9B,MAAMkB,QACtCg9B,GAAI/M,EACR8M,oBAAqB,WAAYj+B,MAAOs9B,OAExC,IAAMvB,UAAY,CACdmC,GAAKD,oBAAqB,SAAUj+B,MAAOs9B,OAC3C,GAAKY,IAAMA,GAAGzT,qBAAuB,CAKjC0G,EAAIyL,eAAgB58B,OAAQo9B,eAAgB,GAC5CpB,eAAernC,MACXypC,QAAS9B,YACT1a,EAAGuP,EAAE8N,QACLpd,EAAGsP,EAAE+N,UAKTjD,mBAAqB,MAG7BgC,oBAAqB,YAAaj+B,MAAOs9B,OACzCvB,UAAY,MAEZgC,kBAGJ,SAASoB,mBAAoBpd,KACzB,IAAI2G,SAAWltB,EAAEtH,KAAM6tB,IAAKqZ,kBACxBoC,EAEJ,GAAK9U,SAAW,CACZ,IAAM8U,KAAK9U,SAAW,CAClB,GAAKA,SAAU8U,GAAM,CACjB,OAAO,OAInB,OAAO,MAGX,SAAS4B,qBAET,SAASC,sBAAuBvC,WAC5B,IAAIwC,SAAWxC,UAAUhN,OAAQ,GAEjC,OACI3e,MAAO,WAIH,IAAMguB,mBAAoB3nC,MAAS,CAC/BgE,EAAEtH,KAAMsD,KAAM4jC,qBAKlB,IAAI1S,SAAWltB,EAAEtH,KAAMsD,KAAM4jC,kBAC7B1S,SAAUoU,WAAc,KAKxBnB,kBAAmBmB,YAAgBnB,kBAAmBmB,YAAe,GAAM,EAE3E,GAAKnB,kBAAmBmB,aAAgB,EAAI,CACxCV,UAAUrlC,KAAMuoC,SAAUnB,oBAO9B3iC,EAAGhE,MAAOT,KAAMuoC,SAAUF,mBAG1B,GAAKjD,sBAAwB,CAIzBR,kBAAmB,eAAmBA,kBAAmB,eAAkB,GAAK,EAEhF,GAAKA,kBAAmB,gBAAmB,EAAI,CAC3CS,UAAUrlC,KAAM,aAAcynC,kBACzBznC,KAAM,WAAYioC,gBAYlBjoC,KAAM,YAAa6nC,iBACnB7nC,KAAM,SAAU4nC,iBAKjCrR,SAAU,aAIJqO,kBAAmBmB,WAErB,IAAMnB,kBAAmBmB,WAAc,CACnCV,UAAUziB,OAAQ2lB,SAAUnB,oBAGhC,GAAKhC,sBAAwB,GAIvBR,kBAAmB,cAErB,IAAMA,kBAAmB,cAAiB,CACtCS,UAAUziB,OAAQ,aAAc6kB,kBAC3B7kB,OAAQ,YAAailB,iBACrBjlB,OAAQ,WAAYqlB,gBACpBrlB,OAAQ,SAAUglB,eAI/B,IAAIY,MAAQ/jC,EAAGhE,MACXkxB,SAAWltB,EAAEtH,KAAMsD,KAAM4jC,kBAO7B,GAAK1S,SAAW,CACZA,SAAUoU,WAAc,MAK5ByC,MAAM5lB,OAAQ2lB,SAAUF,mBAKxB,IAAMD,mBAAoB3nC,MAAS,CAC/B+nC,MAAMlgB,WAAY+b,qBAQlC,IAAM7mC,EAAI,EAAGA,EAAI+mC,kBAAkB7mC,OAAQF,IAAM,CAC7CiH,EAAEwE,MAAMyZ,QAAS6hB,kBAAmB/mC,IAAQ8qC,sBAAuB/D,kBAAmB/mC,IAM1F,GAAK4nC,sBAAwB,CACzB9iC,SAASD,iBAAkB,QAAS,SAAUspB,GAC1C,IAAI8c,IAAMxD,eAAevnC,OACrByM,OAASwhB,EAAExhB,OACX0gB,EAAGC,EAAGE,IAAKxtB,EAAGoB,EAAGyoC,QAErB,GAAKoB,IAAM,CACP5d,EAAIc,EAAEuc,QACNpd,EAAIa,EAAEwc,QACN3C,UAAY/gC,EAAEghC,OAAOE,uBA6BrB3a,IAAM7gB,OAEN,MAAQ6gB,IAAM,CACV,IAAMxtB,EAAI,EAAGA,EAAIirC,IAAKjrC,IAAM,CACxBoB,EAAIqmC,eAAgBznC,GACpB6pC,QAAU,EAEV,GAAOrc,MAAQ7gB,QAAUigB,KAAK4d,IAAKppC,EAAEisB,EAAIA,GAAM2a,WAAapb,KAAK4d,IAAKppC,EAAEksB,EAAIA,GAAM0a,WACtE/gC,EAAEtH,KAAM6tB,IAAKsZ,2BAA8B1lC,EAAEyoC,QAAU,CAG/D1b,EAAEhV,iBACFgV,EAAE4b,kBACF,QAGRvc,IAAMA,IAAI7D,cAGnB,QApeP,CAseI3K,OAAQ3f,OAAQyF,WAGpB,SAAWmC,EAAG5H,OAAQ2D,WAClB,IAAI6kC,UAAY5gC,EAAGnC,UACfomC,aAAejkC,EAAE0B,OAAOoiB,QAAQoQ,MAChCgQ,YAAc,mBACdC,gBAAkBF,aAAe,aAAe,YAChDG,eAAiBH,aAAe,WAAa,UAC7CI,eAAiBJ,aAAe,YAAc,YAGlDjkC,EAAEmb,MAAQ,iCACN,eACA,8BACA,0BAA2BtY,MAAO,KAAO,SAAU9J,EAAGkB,MAEtD+F,EAAEC,GAAIhG,MAAS,SAAUgG,IACrB,OAAOA,GAAKjE,KAAKT,KAAMtB,KAAMgG,IAAOjE,KAAKuZ,QAAStb,OAItD,GAAK+F,EAAEskC,OAAS,CACZtkC,EAAEskC,OAAQrqC,MAAS,QAI3B,SAASsqC,mBAAoB5rB,IAAK2oB,UAAW98B,MAAOggC,QAChD,IAAIC,aAAejgC,MAAM+Y,KACzB/Y,MAAM+Y,KAAO+jB,UACb,GAAKkD,OAAS,CACVxkC,EAAEwE,MAAM+Q,QAAS/Q,MAAOzI,UAAW4c,SAChC,CACH3Y,EAAEwE,MAAMkgC,SAASnrC,KAAMof,IAAKnU,OAEhCA,MAAM+Y,KAAOknB,aAIjBzkC,EAAEwE,MAAMyZ,QAAQgI,aAEZC,QAAS,KACTvQ,MAAO,WAEH,IAAIgvB,WAAa3oC,KACb+nC,MAAQ/jC,EAAG2kC,YACXC,UACApF,MAEJ,SAASjqB,QAAS/Q,MAAOK,OACrB+/B,UAAY//B,MACZ0/B,mBAAoBI,WAAYC,UAAY,cAAgB,aAAcpgC,OAI9Eu/B,MAAMxoC,KAAM2oC,YAAa,SAAU1/B,OAE/B,IAAMxE,EAAEwE,MAAMyZ,QAAQgI,YAAYC,QAAU,CACxC,OAGJ,IAAM0e,UAAY,CACdrvB,QAAS/Q,MAAO,MAGpB6tB,aAAcmN,OACdA,MAAQx7B,WAAY,WAChBuR,QAAS/Q,MAAO,QACjB,OAGXstB,SAAU,WACN9xB,EAAGhE,MAAOmiB,OAAQ+lB,eAK1BlkC,EAAEwE,MAAMyZ,QAAQ4mB,KACZC,iBAAkB,IAClBC,iBAAkB,KAClBpvB,MAAO,WACH,IAAIgvB,WAAa3oC,KACb+nC,MAAQ/jC,EAAG2kC,YACXK,UAAY,MAEhBjB,MAAMxoC,KAAM,aAAc,SAAUiJ,OAChCwgC,UAAY,MACZ,GAAKxgC,MAAMk9B,OAASl9B,MAAMk9B,QAAU,EAAI,CACpC,OAAO,MAGX,IAAIuD,WAAazgC,MAAMkB,OACnB85B,MAEJ,SAAS0F,gBACL7S,aAAcmN,OAGlB,SAAS2F,mBACLD,gBAEAnB,MAAM5lB,OAAQ,SAAUinB,cACnBjnB,OAAQ,WAAY+mB,eACzBtE,UAAUziB,OAAQ,eAAgBgnB,kBAGtC,SAASC,aAAc5gC,OACnB2gC,mBAIA,IAAMH,WAAaC,aAAezgC,MAAMkB,OAAS,CAC7C6+B,mBAAoBI,WAAY,MAAOngC,YACpC,GAAKwgC,UAAY,CACpBxgC,MAAM0N,kBAId6xB,MAAMxoC,KAAM,WAAY2pC,eACnB3pC,KAAM,SAAU6pC,cACrBxE,UAAUrlC,KAAM,eAAgB4pC,kBAEhC3F,MAAQx7B,WAAY,WAChB,IAAMhE,EAAEwE,MAAMyZ,QAAQ4mB,IAAIE,iBAAmB,CACzCC,UAAY,KAEhBT,mBAAoBI,WAAY,UAAW3kC,EAAEgvB,MAAO,WAAatpB,OAAQu/B,eAC1EjlC,EAAEwE,MAAMyZ,QAAQ4mB,IAAIC,qBAG/BhT,SAAU,WACN9xB,EAAGhE,MAAOmiB,OAAQ,cAAeA,OAAQ,UAAWA,OAAQ,YAC5DyiB,UAAUziB,OAAQ,kBAK1Bne,EAAEwE,MAAMyZ,QAAQonB,OAGZC,0BAA2B,GAG3BC,kBAAmB,IAGnBC,4BAA6B,GAG7BC,0BAA2B,GAE3BpM,YAAa,SAAW70B,OACpB,IAAIkhC,SAAWttC,OAAOutC,YAClBC,SAAWxtC,OAAOytC,YAClBzf,EAAI5hB,MAAMi/B,QACVpd,EAAI7hB,MAAMk/B,QAEd,GAAKl/B,MAAM0+B,QAAU,GAAKvd,KAAKmgB,MAAOzf,GAAMV,KAAKmgB,MAAOthC,MAAM0+B,QAC1D1+B,MAAMy+B,QAAU,GAAKtd,KAAKmgB,MAAO1f,GAAMT,KAAKmgB,MAAOthC,MAAMy+B,OAAU,CAInE7c,EAAIA,EAAIsf,SACRrf,EAAIA,EAAIuf,cACL,GAAKvf,EAAM7hB,MAAM0+B,MAAQ0C,UAAaxf,EAAM5hB,MAAMy+B,MAAQyC,SAAa,CAK1Etf,EAAI5hB,MAAMy+B,MAAQyC,SAClBrf,EAAI7hB,MAAM0+B,MAAQ0C,SAGtB,OACIxf,EAAGA,EACHC,EAAGA,IAIX5Z,MAAO,SAAUjI,OACb,IAAI9L,KAAO8L,MAAM8Y,cAAcqkB,QACvBn9B,MAAM8Y,cAAcqkB,QAAS,GAAMn9B,MACvC6M,SAAWrR,EAAEwE,MAAMyZ,QAAQonB,MAAMhM,YAAa3gC,MAClD,OACYqtC,MAAM,IAAM5yB,MAAS6yB,UACrBC,QAAU50B,SAAS+U,EAAG/U,SAASgV,GAC/B5H,OAAQze,EAAGwE,MAAMkB,UAIjC0G,KAAM,SAAU5H,OACZ,IAAI9L,KAAO8L,MAAM8Y,cAAcqkB,QACvBn9B,MAAM8Y,cAAcqkB,QAAS,GAAMn9B,MACvC6M,SAAWrR,EAAEwE,MAAMyZ,QAAQonB,MAAMhM,YAAa3gC,MAClD,OACYqtC,MAAM,IAAM5yB,MAAS6yB,UACrBC,QAAU50B,SAAS+U,EAAG/U,SAASgV,KAI/C6f,YAAa,SAAUz5B,MAAOL,KAAMu4B,WAAYM,YAC5C,GAAK74B,KAAK25B,KAAOt5B,MAAMs5B,KAAO/lC,EAAEwE,MAAMyZ,QAAQonB,MAAME,mBAChD5f,KAAK4d,IAAK92B,MAAMw5B,OAAQ,GAAM75B,KAAK65B,OAAQ,IAAQjmC,EAAEwE,MAAMyZ,QAAQonB,MAAMG,6BACzE7f,KAAK4d,IAAK92B,MAAMw5B,OAAQ,GAAM75B,KAAK65B,OAAQ,IAAQjmC,EAAEwE,MAAMyZ,QAAQonB,MAAMI,0BAA4B,CACrG,IAAIlzB,UAAY9F,MAAMw5B,OAAO,GAAK75B,KAAK65B,OAAQ,GAAM,YAAc,aAEnE1B,mBAAoBI,WAAY,QAAS3kC,EAAEgvB,MAAO,SAAWtpB,OAAQu/B,WAAYkB,WAAY15B,MAAO25B,UAAWh6B,OAAS,MACxHm4B,mBAAoBI,WAAYpyB,UAAUvS,EAAEgvB,MAAOzc,WAAa7M,OAAQu/B,WAAYkB,WAAY15B,MAAO25B,UAAWh6B,OAAU,MAC5H,OAAO,KAEX,OAAO,OAMXi6B,gBAAiB,MAEjB1wB,MAAO,WACH,IAAI2wB,OACA3B,WAAa3oC,KACb+nC,MAAQ/jC,EAAG2kC,YACXt4B,WAGJi6B,OAAStmC,EAAEtH,KAAMsD,KAAM,iBACvB,IAAMsqC,OAAS,CACXA,QAAWrtC,OAAQ,GACnB+G,EAAEtH,KAAMsD,KAAM,gBAAiBsqC,QAEnCA,OAAOrtC,SACPqtC,OAAOjB,MAAQh5B,QAEfA,QAAQI,MAAQ,SAAUjI,OAGtB,GAAKxE,EAAEwE,MAAMyZ,QAAQonB,MAAMgB,gBAAkB,CACzC,OAEJrmC,EAAEwE,MAAMyZ,QAAQonB,MAAMgB,gBAAkB,KAExC,IAAIj6B,KACAK,MAAQzM,EAAEwE,MAAMyZ,QAAQonB,MAAM54B,MAAOjI,OACrCygC,WAAazgC,MAAMkB,OACnB6gC,QAAU,MAEdl6B,QAAQm6B,KAAO,SAAUhiC,OACrB,IAAMiI,OAASjI,MAAMyqB,qBAAuB,CACxC,OAGJ7iB,KAAOpM,EAAEwE,MAAMyZ,QAAQonB,MAAMj5B,KAAM5H,OACnC,IAAM+hC,QAAU,CACZA,QAAUvmC,EAAEwE,MAAMyZ,QAAQonB,MAAMa,YAAaz5B,MAAOL,KAAMu4B,WAAYM,YACtE,GAAKsB,QAAU,CAGXvmC,EAAEwE,MAAMyZ,QAAQonB,MAAMgB,gBAAkB,OAIhD,GAAK1gB,KAAK4d,IAAK92B,MAAMw5B,OAAQ,GAAM75B,KAAK65B,OAAQ,IAAQjmC,EAAEwE,MAAMyZ,QAAQonB,MAAMC,0BAA4B,CACtG9gC,MAAM0N,mBAId7F,QAAQD,KAAO,WACPm6B,QAAU,KAGVvmC,EAAEwE,MAAMyZ,QAAQonB,MAAMgB,gBAAkB,MACxCzF,UAAUxgC,IAAKikC,eAAgBh4B,QAAQm6B,MACvCn6B,QAAQm6B,KAAO,MAGvB5F,UAAU1gC,GAAImkC,eAAgBh4B,QAAQm6B,MACjChmC,IAAK4jC,eAAgB/3B,QAAQD,OAEtC23B,MAAM7jC,GAAIikC,gBAAiB93B,QAAQI,QAGvCqlB,SAAU,WACN,IAAIwU,OAAQj6B,QAEZi6B,OAAStmC,EAAEtH,KAAMsD,KAAM,iBACvB,GAAKsqC,OAAS,CACVj6B,QAAUi6B,OAAOjB,aACViB,OAAOjB,MACdiB,OAAOrtC,SACP,GAAKqtC,OAAOrtC,SAAW,EAAI,CACvB+G,EAAE6jB,WAAY7nB,KAAM,kBAI5B,GAAKqQ,QAAU,CACX,GAAKA,QAAQI,MAAQ,CACjBzM,EAAGhE,MAAOoE,IAAK+jC,gBAAiB93B,QAAQI,OAE5C,GAAKJ,QAAQm6B,KAAO,CAChB5F,UAAUxgC,IAAKikC,eAAgBh4B,QAAQm6B,MAE3C,GAAKn6B,QAAQD,KAAO,CAChBw0B,UAAUxgC,IAAKgkC,eAAgB/3B,QAAQD,UAKvDpM,EAAEmb,MACEsrB,WAAY,cACZC,QAAS,MACTC,UAAW,aACXC,WAAY,eACb,SAAUpiC,MAAOqiC,aAEhB7mC,EAAEwE,MAAMyZ,QAASzZ,QACbmR,MAAO,WACH3V,EAAGhE,MAAOT,KAAMsrC,YAAa7mC,EAAE2tB,OAEnCmE,SAAU,WACN9xB,EAAGhE,MAAOmiB,OAAQ0oB,kBA5TlC,CAiUI9uB,OAAQ/b,OAIR,SAAWgE,GACPA,EAAEwE,MAAMyZ,QAAQ6oB,iBACZnxB,MAAO,WACH3V,EAAGhE,MAAOT,KAAM,SAAU8I,UAE9BytB,SAAU,WACN9xB,EAAGhE,MAAOmiB,OAAQ,SAAU9Z,WAIpC,IAAI0iC,SAAW,IACX1iC,QAAU,WACN2iC,MAAO,IAAM7zB,MAAS6yB,UACtBiB,KAAOD,KAAOE,SAEd,GAAKD,MAAQF,SAAW,CAEpBG,SAAWF,KACXhnC,EAAGhE,MAAOuZ,QAAS,uBAEhB,CAEH,GAAK4xB,SAAW,CACZ9U,aAAc8U,UAIlBA,SAAWnjC,WAAYK,QAAS0iC,SAAWE,QAGnDC,SAAW,EACXC,SACAH,KACAC,MAjCR,CAkCIlvB,SAGP,SAAU/X,EAAG5H,QACV,IAAIgvC,IAAMpnC,EAAG5H,QACTivC,WAAa,oBACbC,gBACAC,iBACAC,iCACAC,+BACAC,cAAiBC,EAAK,KAAMC,IAAO,MACnCC,GAAIC,GAAIC,oBAmBZ,GAAK/nC,EAAE8jB,QAAQ1kB,YAAc,CAWzByoC,GAAKzvC,OAAOkrB,YAAc8jB,IAAI3jC,QAC9BqkC,GAAK1vC,OAAOmrB,aAAe6jB,IAAI1jC,SAC/BqkC,oBAAsB,GAEtBP,iCAAmCK,GAAKC,IAAQD,GAAKC,GAAOC,oBAG5DN,+BAAiCC,aAActvC,OAAOgH,aAMtD,GAAOooC,kCAAoCC,iCAAuCD,mCAAqCC,+BAAmC,CACtJC,cAAiBM,MAAO,KAAMC,GAAM,OAI5CjoC,EAAEwE,MAAMyZ,QAAQiqB,kBAAoBloC,EAAE0J,UAAY1J,EAAEwE,MAAMyZ,QAAQiqB,mBAC9DvyB,MAAO,WAGH,GAAK3V,EAAE8jB,QAAQ1kB,cAAgBY,EAAEwE,MAAMyZ,QAAQiqB,kBAAkBtlB,SAAW,CACxE,OAAO,MAIX2kB,iBAAmBD,kBAInBF,IAAI7rC,KAAM,kBAAmB8I,UAEjCytB,SAAU,WAGN,GAAK9xB,EAAE8jB,QAAQ1kB,cAAgBY,EAAEwE,MAAMyZ,QAAQiqB,kBAAkBtlB,SAAW,CACxE,OAAO,MAKXwkB,IAAIjpB,OAAQ,kBAAmB9Z,UAEnC2Y,IAAK,SAAUmrB,WAEX,IAAIC,YAAcD,UAAU9jC,QAE5B8jC,UAAU9jC,QAAU,SAAUG,OAE1BA,MAAMpF,YAAckoC,kBAGpB,OAAOc,YAAYtsC,MAAOE,KAAMyX,eAO5C,SAASpP,UAEL,IAAIjF,YAAckoC,kBAElB,GAAKloC,cAAgBmoC,iBAAmB,CAEpCA,iBAAmBnoC,YACnBgoC,IAAI7xB,QAAS8xB,aAMrBrnC,EAAEwE,MAAMyZ,QAAQiqB,kBAAkB9oC,YAAckoC,gBAAkB,WAC9D,IAAIe,WAAa,KAAMxsB,KAAOhe,SAASC,gBAOvC,GAAKkC,EAAE8jB,QAAQ1kB,YAAc,CAGzBipC,WAAaX,aAActvC,OAAOgH,iBAC/B,CACHipC,WAAaxsB,MAAQA,KAAKysB,YAAczsB,KAAK0sB,aAAe,IAGhE,OAAOF,WAAa,WAAa,aAGrCroC,EAAEC,GAAIonC,YAAe,SAAUpnC,IAC3B,OAAOA,GAAKjE,KAAKT,KAAM8rC,WAAYpnC,IAAOjE,KAAKuZ,QAAS8xB,aAI5D,GAAKrnC,EAAEskC,OAAS,CACZtkC,EAAEskC,OAAQ+C,YAAe,OAxIjC,CA2IGtvB,OAAQ/b,OAKX,SAAWgE,EAAGjE,WAGV,IAAIysC,YAAcxoC,EAAG,QAASgX,SAAU,QAIxC1M,MAII8X,QAAWomB,YAAYvvC,OAASuvC,YAC5BxoC,EAAG,UAAYgS,KAAMhS,EAAE0B,OAAOqI,KAAKK,aAAaC,aAAeqqB,UAAW10B,EAAG,SAEjFyoC,aAAc,0EAGdzyB,IAAK,SAAUhE,MAIX,IAAMhS,EAAE0B,OAAO8kB,mBAAqB,CAChC,OAIJ,GAAKxmB,EAAE8jB,QAAQkU,eAAiB,CAC5B1tB,KAAK8X,QAAQ9P,KAAM,OACftS,EAAE0B,OAAOqI,KAAKC,gBAAiBgI,KAAMhS,EAAE0B,OAAOqI,KAAKK,iBAI/Ds+B,QAAS,SAAU12B,KAAMtK,MACrB,IAAI+zB,QAAUz7B,EAAE0B,OAAOqI,KAAKxP,IAAKyX,MAEjCtK,KAAK0G,KAAM9D,KAAKm+B,cAAettB,KAAK,SAAUpiB,EAAGw9B,MAC7C,IAAIoS,SAAW3oC,EAAGu2B,MAAOj0B,GAAI,UAAa,OACtCtC,EAAGu2B,MAAOj0B,GAAI,SAAY,MAAQ,SACtCsmC,YAAc5oC,EAAE0B,OAAOqI,KAAK8vB,gBAC5BgP,QAAU7oC,EAAGu2B,MAAOjkB,KAAMq2B,UAK1BE,QAAUA,QAAQpoC,QAASmoC,YAAYzS,SAAWyS,YAAYpP,YAC1DoP,YAAYxS,KAAOwS,YAAYvS,SAAU,IAE7C,IAAM,eAAe9nB,KAAMs6B,SAAY,CACnC7oC,EAAGu2B,MAAOjkB,KAAMq2B,SAAUlN,QAAUoN,aAMhDC,MAAO,WACHx+B,KAAK8X,QAAQ9P,KAAM,OAAQtS,EAAE0B,OAAOqI,KAAKK,aAAa0vB,gBAI9D95B,EAAE0B,OAAO4I,KAAOA,MA3DpB,CA6DIyN,SAGJ,SAAW/X,EAAGjE,WACdiE,EAAE0B,OAAOC,WAET,IAAIonC,eAAiB/oC,EAAEkrB,OAInB8d,yBAA2BhpC,EAAE0B,OAAOmnB,WAExC7oB,EAAEkrB,OAAS,SAAWzJ,MAClB,OAAO,WACH,IAAI+H,YAAc/H,KAAK3lB,MAAOE,KAAMyX,WAChCxZ,KAAOuvB,YAAYnwB,UAAUowB,WAEjCD,YAAYJ,aAAmBI,YAAYnwB,UAAU+vB,eAAiBrtB,UAClEytB,YAAYnwB,UAAU+vB,aAAe,kBAAoBnvB,KAAO,KAEpE+F,EAAE0B,OAAOC,QAAS1H,MAASuvB,YAE3B,OAAOA,aAVJ,CAYPxpB,EAAEkrB,QAGNlrB,EAAE0J,OAAQ1J,EAAEkrB,OAAQ6d,gBAGpB/oC,EAAE0B,OAAO7D,SAASqC,GAAI,SAAU,SAAUsE,OACtCxE,EAAGwE,MAAMkB,QAASijB,kBAGtB3oB,EAAEkrB,OAAQ,eACNtmB,SACI8rB,MAAO,IACPuY,SAAU,MAGVC,kBAAmBlpC,EAAE0B,OAAOmnB,WAG5BsgB,aAAc,KACdC,SAAU,OAKd3d,cAAe,WACXzrB,EAAEwrB,OAAOnyB,UAAUoyB,cAAc3vB,MAAOE,KAAMyX,WAC9CzX,KAAKyxB,SAAU,SAGnBD,QAAS,WAEL,GAAKxxB,KAAKyxB,SAAU,kBAAqB,MAAQ,CAC7C,OAAO,MAGX,IAAMzxB,KAAK4I,QAAQwkC,SAAW,CAC1BptC,KAAKqtC,WAGTrtC,KAAKoxB,IAAKpxB,KAAKomB,SACXknB,eAAgB,4BAChBC,eAAgB,0BAGpBvtC,KAAKomB,QAAQuG,gBAEb,GAAK3oB,EAAE0B,OAAO4Z,aAActf,KAAKomB,QAAQ,GAAI,UAAa,UAAYpiB,EAAE0B,OAAO8nC,OAAS,CACpFxtC,KAAKomB,QAAQonB,WAIrBH,SAAU,WACN,IAAII,WAAa,QAAUzpC,EAAE0B,OAAO0jB,GAChClkB,KAAOlF,KAEX,GAAKA,KAAK4I,QAAQ8kC,KAAO,CACrB1tC,KAAKomB,QAAQ9P,KAAM,QAAUtS,EAAE0B,OAAO0jB,GAAK,OAAQppB,KAAK4I,QAAQ8kC,MAGpE1tC,KAAKomB,QACA9P,KAAM,WAAY,KAClB/P,SAAU,yBAA2BvG,KAAK4I,QAAQ8rB,OAGvD10B,KAAKomB,QAAQhU,KAAM,IAAMq7B,WAAa,mBAAoBtuB,KAAM,WAC5D,IAAI4oB,MAAQ/jC,EAAGhE,MACX00B,MAAQ10B,KAAKsf,aAAcmuB,WAAa,UAAa1tC,UACrDmF,KAAK0D,QAAQukC,aAAezY,OAASxvB,KAAK0D,QAAQukC,cAAkBjoC,KAAK0D,QAAQ4kC,QAAUtoC,KAAK0D,QAAQ8rB,OAAaxvB,KAAKkhB,QAAQ1X,QAAQ,UAAY,UAAaxJ,KAAK0D,QAAQ8rB,MAChLqT,MAAMxhC,SAAU,cAChB,GAAKrB,KAAK0D,QAAQukC,aAAe,CAC7BpF,MAAMxhC,SAAU,WAAerB,KAAK0D,QAAqB,cAG7Dm/B,MAAMzxB,KAAM,OAAQ,QAAS/P,SAAU,iBAInDonC,WAAY,SAAUz9B,UAClB,IAAIxE,KAAO1L,KAAKomB,QAGhB,IAAM1a,KAAKhP,KAAM,eAAgBkM,QAAQqkC,UACrCvhC,KAAKpF,GAAI,kCAAqC,CAG9CoF,KAAKnM,KAAM,kBAAmB2Q,UAAY,SAAUgb,EAAGxuB,MAGnD,IAAKA,KAAKkxC,SAAU,CAChB,IAAI7F,MAAQ/jC,EAAGhE,MACX6tC,QAAU,IAAI7pC,EAAEgvB,MAAO,cAE3B+U,MAAMxuB,QAASs0B,SAEf,IAAMA,QAAQ5a,qBAAuB,CACjC8U,MAAMrb,6BAO1BqF,YAAa,SAAU5zB,GACnB,GAAKA,EAAEu2B,QAAU30B,UAAY,CACzBC,KAAKomB,QAAQyE,YAAa,iBAAmB7qB,KAAK4I,QAAQ8rB,OAAQnuB,SAAU,iBAAmBpI,EAAEu2B,OAGrG,GAAKv2B,EAAEgvC,eAAiBptC,UAAY,CAChCC,KAAKomB,QAAQhU,KAAM,SAAWpO,EAAE0B,OAAO0jB,GAAK,eAAgByB,YAAa,WAAa7qB,KAAK4I,QAAQukC,cAC9F5mC,SAAU,WAAapI,EAAEgvC,gBAItCW,sBAAuB,WACnB9tC,KAAK+tC,0BAGTC,0BAA2B,WACvBhuC,KAAKomB,QAAQ3X,QAAS,yBAA0BN,eAAgBumB,MAAS,UAI7EqZ,uBAAwB,SAAUrZ,OAC9B10B,KAAKomB,QAAQiC,SAASla,eAAiBumB,MAASA,OAAS10B,KAAK4I,QAAQ8rB,SAG1E5H,mBAAoB,WAChB,IAAIlkB,QAAU5I,KAAK4I,QACfikB,WAAa7oB,EAAEiqC,KAAMrlC,QAAQikB,YAAc,IAC3CqhB,YAAclqC,EAAEiqC,KAAMjqC,EAAE0B,OAAOmnB,YAC/BshB,YAAcnqC,EAAEiqC,KAAMrlC,QAAQskC,mBAG9BkB,WAAepB,2BAA6BkB,YACxC,GAAKA,YAGTG,WAAeD,aAAe,GAAKD,YAAc,GAIrD,OAAWthB,YAAeA,gBACrBxL,OAAQ+sB,YAAeA,gBACvB/sB,OAAQgtB,YAAeA,gBACvB5sB,KAAM,UAtKnB,CAyKI1F,SAEJ,SAAW/X,EAAGjE,WAEViE,EAAEkrB,OAAQ,wBACNtmB,SACI8rB,MAAO,KAGXtH,aAAc,MAEdoE,QAAS,WACLxxB,KAAKyxB,SAAU,gBACfzxB,KAAKsuC,qBAAuB,KAE5BtuC,KAAKoxB,IAAKpxB,KAAK5D,QAKX4U,SAAU,uBAIVy5B,WAAY,yBAMhBzqC,KAAKoxB,IAAKpxB,KAAK5D,QAAU4U,SAAU,0BAGnChR,KAAKoxB,KAAMmd,WAAY,wBAGvBvuC,KAAK5D,OAAOoI,IAAK,WAAYR,EAAEixB,MAAM,WACjCj1B,KAAKsuC,qBAAuB,MAC7BtuC,QAGP+xB,YAAa,SAAUnpB,SACnB,GAAKA,QAAQ8rB,QAAU30B,WAAa6I,QAAQ8rB,QAAU,OAAS,CAC3D10B,KAAKomB,QAAQyE,YAAa,cAAgB7qB,KAAK4I,QAAQ8rB,OAClDnuB,SAAU,cAAgBqC,QAAQ8rB,YACpC,GAAK9rB,QAAQ8rB,QAAU30B,UAAY,CACtCC,KAAKomB,QAAQyE,YAAa,cAAgB7qB,KAAK4I,QAAQ8rB,OAG3D10B,KAAK4vB,OAAQhnB,UAGjB4lC,qBAAsB,WAClBxuC,KAAKsuC,qBAAuB,OAGhCG,oBAAqB,WACjBzuC,KAAKsuC,qBAAuB,MAIhCI,oBAAqB,WAEjB1uC,KAAKsuC,qBAAuB,KAK5BtuC,KAAKwyB,KAAMxyB,KAAK5D,OAAQ,cAIxB4D,KAAKoxB,IAAKpxB,KAAK5D,QAAUquC,WAAY,0BAGzCkE,cAAe,WAGX,IAAM3uC,KAAKsuC,qBAAuB,CAC9B,OAGJ,IAAI74B,OAASzV,KAAK4uC,oBACdC,cAAeC,UAAWC,cAE9B,GAAKt5B,OAAS,CACVo5B,cAAgB7uC,KAAKgvC,aACrBF,UAAY9uC,KAAKivC,gBACjBF,cAAgB/uC,KAAKkvC,oBAIrBz5B,OAAO05B,WAAaN,cAAgBC,UAAYC,cAAgBF,gBAIxEO,qBAAsB,WAClBpnC,WAAYhE,EAAEixB,MAAMj1B,KAAM,iBAAkB,MAGhDgvC,WAAY,WACR,OAAOhvC,KAAK5D,OAAO04B,aAGvBma,cAAe,WACX,OAAOjrC,EAAE0B,OAAO8oB,eAGpB0gB,kBAAmB,WACf,OAAOlrC,EAAE0B,OAAOskB,mBAGpBqlB,sBAAuB,SAAUnkB,EAAGxuB,MAChC,IAAI6R,IAEJ,GAAK2c,EAAE5J,eAAiB4J,EAAE5J,cAAc2R,qBAAuB,CAC3D,OAGJ1kB,IAAM2c,EAAE5J,cAAcC,KAAKle,QAAS,eAAkB,EAAI3G,KAAKmM,MAAMuK,KAAO1W,KAAKmM,MAAM0F,IAEvF,IAAMA,IAAM,CACRA,IAAMvO,KAAKsvC,WAGf,IAAM/gC,KAAOA,MAAQ,KAAOA,IAAIlL,QAAS,IAAMW,EAAE0B,OAAOqI,KAAKovB,cAAiB,EAAI,CAC9E5uB,IAAM8G,SAASW,KAGnBhW,KAAKuvC,gBAAiBhhC,IAAK7R,KAAKmM,QAGpCymC,SAAU,WACN,OAAOtrC,EAAE0B,OAAOqI,KAAK8vB,gBAAgBzqB,MAIzCo8B,cAAe,WACX,OAAOxvC,KAAKwO,YAKhBihC,mBAAoB,WAChB,OAAOzrC,EAAE0B,OAAOs7B,WAIpB0O,YAAa,WACT,OAAO1rC,EAAE0B,OAAOsL,SAAS5B,SAG7Bw/B,kBAAmB,WACf,OAAO5uC,KAAK0vC,cAAch6B,aAI9Bi6B,iBAAkB,WACd,OAAO3rC,EAAE0B,OAAOqI,KAAKK,cAGzBqB,KAAM,WACFzP,KAAK+X,IAAK,IAGd6pB,QAAS,WACL5hC,KAAK+X,GAAI,IAGbA,GAAI,SAAU63B,OAGV,GAAK5rC,EAAE0B,OAAOiH,qBAAuB,CACjCvQ,OAAOgT,QAAQ2I,GAAI63B,WAChB,CAGH,IAAI/8B,YAAc7O,EAAE0B,OAAOsL,SAAS5B,QAAQyD,YACxClV,MAAQkV,YAAcnR,SAAUkuC,MAAO,IACvCrhC,IAAMvK,EAAE0B,OAAOsL,SAAS5B,QAAQsD,MAAO/U,OAAQ4Q,IAC/CgI,UAAcq5B,OAAS,EAAK,UAAY,OAG5C5rC,EAAE0B,OAAOsL,SAAS5B,QAAQyD,YAAclV,MACxCqG,EAAE0B,OAAOsL,SAAS5B,QAAQ8I,cAAgBrF,YAG1C7S,KAAK6vC,OAAQthC,KAAOgI,UAAWA,UAAWgC,WAAY,MAAOD,eAAgB,SAKrFw3B,mBAAoB,SAAUlgC,IAC1B,IAAIR,QAGJ,GAAKpL,EAAEud,KAAK3R,MAAQ,SAAW,CAC3BA,GAAK5L,EAAE0B,OAAOqI,KAAK2xB,UAAW9vB,IAGlC,GAAKA,GAAK,CACNR,QAAUpP,KAAK0vC,cAWf9/B,IAAM5L,EAAE0B,OAAOqI,KAAKY,OAAQiB,IAAS5L,EAAE0B,OAAOqI,KAAKC,gBAAiB,IAAM4B,GAAI5P,KAAK2vC,oBAAyB//B,GAEhH,OAAOA,IAAM5P,KAAKyvC,sBAGtBM,uBAAwB,SAAUx5B,UAAWy5B,mBACzC,IAAI5gC,QAAUpP,KAAK0vC,cACfjO,MAAUlrB,YAAc,OAASnH,QAAQiyB,UAAYjyB,QAAQsG,YAEjE,OAAS+rB,OAASA,MAAMh0B,YAAgBuiC,mBAG5CC,cAAe,SAAUC,kBAAmBxzC,MACxC,IAAIkT,GAAI6F,OAAQ06B,cAAgBnwC,KAAKwvC,gBAOrC,GAAKW,gBAAkBA,cAAczzC,KAAM,iBAAoB,CAG3D,GAAKA,KAAK6Z,YAAc,OAAS,CAC7BvW,KAAKyP,WACF,CACHzP,KAAK4hC,UAIT,OAAO,UACJ,CAGHhyB,GAAKlT,KAAKsY,QACVS,OAASzV,KAAK4uC,oBAId5qC,EAAE0J,OAAQwiC,mBACNxC,KAAMj4B,OAAOi4B,KACbjgC,WAAYzN,KAAK+vC,uBACbrzC,KAAK6Z,UACL25B,kBAAkBziC,YACtBwD,QAASvU,KAAK6Z,YAAc,SAIpC,OAAO3G,IAGX2/B,gBAAiB,SAAUhhC,IAAK7R,MAG5B,IAAIkT,GAAK5L,EAAE0B,OAAOqI,KAAK2xB,UAAWnxB,KAAOa,QAAUpP,KAAK0vC,cAIpDjiC,WAAa2B,QAAQsD,MAAMzV,SAAW,EAAI,OACtC+C,KAAK+vC,uBAAwBrzC,KAAK6Z,WAKtC25B,mBACI33B,WAAY,MACZD,eAAgB,KAChBrH,QAASvU,KAAK6Z,YAAc,QAGpCvS,EAAE0J,OAAQwiC,kBAAmBxzC,MACzB+Q,WAAYA,aAOhB,GAAK2B,QAAQyD,YAAc,GACvBjD,GAAGvM,QAASW,EAAE0B,OAAOopB,gBAAmB,EAAI,CAE5Clf,GAAK5P,KAAKiwC,cAAeC,kBAAmBxzC,MAE5C,GAAKkT,KAAO,MAAQ,CAChB,QAIR5P,KAAKowC,eAAgBpwC,KAAK8vC,mBAAoBlgC,IAAMsgC,oBAGxDE,eAAgB,SAAUxgC,GAAI8xB,MAC1B19B,EAAE0B,OAAOiK,WAAYC,GAAI8xB,OAG7B2O,SAAU,WACN,OAAOrsC,EAAE0B,OAAO4I,MAGpBgiC,OAAQ,WACJ,OAAOtsC,EAAE0B,OAAO0jB,IAGpBikB,SAAU,SAAUkD,QAAS7C,MAGzB,OAAO6C,QAAQ7kC,MAAOgiC,KAAMA,QAGhC8C,SAAU,SAAU9kC,KAAM+kC,UAEtB/kC,KAAK6pB,SAAUv1B,KAAKomB,SAGpBpmB,KAAKqtC,SAAU3hC,KAAM+kC,SAAS/C,MAG9BhiC,KAAKA,KAAM,eAGfglC,MAAO,SAAUzR,QAEb,IAAI0R,QAAU3wC,KAAK4wC,eAAgB3R,QAC/B3lB,QAAUtZ,KAAK6wC,eAAgB5R,QAC/BvzB,KAAMolC,eAAiB9wC,KAAKyvC,qBAKhC/jC,KAAO1L,KAAKomB,QACPpL,SAAU,SAAWhb,KAAKswC,SACvB,QAAUtsC,EAAE0B,OAAOqI,KAAK2yB,eAAgBpnB,SAAY,MAM5D,GAAK5N,KAAKzO,SAAW,GAAKqc,UAAYtV,EAAE0B,OAAOqI,KAAKY,OAAQ2K,SAAY,CACpE5N,KAAO1L,KAAKomB,QAAQpL,SAAUhX,EAAE0B,OAAOqI,KAAK2yB,eAAe,IAAMpnB,UAC5DhD,KAAM,QAAUtW,KAAKswC,SAAW,MAAOh3B,SACvC5K,QAAS,MAAO4K,SASzB,GAAK5N,KAAKzO,SAAW,GACjB+G,EAAE0B,OAAOqI,KAAK8yB,eAAgB8P,UAC9BG,gBACAA,eAAezoB,SAASprB,OAAS,CACjCyO,KAAO1H,EAAG8sC,gBAGd,OAAOplC,MAGXqlC,WAAY,WACR,OAAO/sC,EAAE0B,OAAOwmB,WAGpB8kB,aAAc,SAAUtrB,MAAOgP,MAAOlY,IAAK4Y,UAGvC,GAAKp1B,KAAKixC,SAAW,CACjB,OAGJjxC,KAAKixC,SAAWjpC,WAAWhE,EAAEixB,MAAM,WAC/Bj1B,KAAK+wC,aAAa3jC,OAAQ,OAAQsnB,MAAOlY,IAAK4Y,UAC9Cp1B,KAAKixC,SAAW,GACjBjxC,MAAO0lB,QAGdwrB,aAAc,WAEV7a,aAAcr2B,KAAKixC,UACnBjxC,KAAKixC,SAAW,EAGhBjxC,KAAK+wC,aAAa3jC,OAAQ,SAG9B+jC,WAAY,WAERnxC,KAAKkxC,eAGLlxC,KAAKgxC,aAAc,EAAGhtC,EAAE0B,OAAOgpB,0BAA2B1qB,EAAE0B,OAAO+oB,qBAAsB,MAIzFzmB,WAAYhE,EAAEixB,MAAMj1B,KAAM,gBAAiB,OAG/CoxC,OAAQ,SAAUzjB,KAAMgjB,SAEpB,IAAIjlC,KAAMsvB,IAAMh3B,EAAG,eAGnBg3B,IAAIz8B,IAAK,GAAIs5B,UAAYlK,KAEzBjiB,KAAOsvB,IAAI5oB,KAAM,kDAAmD2I,QAGpE,IAAMrP,KAAKzO,OAAS,CAChByO,KAAO1H,EAAG,aAAehE,KAAKswC,SAAW,gBACnC3iB,KAAK9mB,MAAO,qBAAsB,IAAM,IAC1C,UAMR6E,KAAK4K,KAAM,QAAUtW,KAAKswC,SAAW,MAAOtwC,KAAK6wC,eAAgBF,UAC5Dr6B,KAAM,QAAUtW,KAAKswC,SAAW,gBAAiB,MAEtD,OAAO5kC,MAGX2lC,gBAAiB,SAAU3lC,KAAMiiB,MAE7B,IAAI2jB,aAAe3jB,KAAKnsB,MAAO,wBAA2BC,OAAO8vC,GAEjE,GAAKD,eAAiB5lC,KAAKgD,QAAQ,SAAW,CAC1C4iC,aAAettC,EAAG,QAAUstC,aAAe,UAAWjkC,OACtD3B,KAAKgD,QAAS,QAAS4iC,gBAI/BE,qBAAsB,WAClB,OAAOxtC,EAAE0B,OAAO8kB,qBAAuBxmB,EAAE8jB,QAAQkU,gBAGrD6U,eAAgB,SAAUY,aACtB,OAAOztC,EAAE0B,OAAOqI,KAAKyK,oBAAqBi5B,cAG9Cb,eAAgB,SAAUa,aACtB,OAAOztC,EAAE0B,OAAOqI,KAAK6yB,YAAa6Q,cAGtCC,uBAAwB,SAAUzzC,KAAMvB,KAAMgP,MAC1C,IAAIimC,gBAAkB3tC,EAAEgvB,MAAO,OAAS/0B,MACpC4+B,SAAW74B,EAAEgvB,MAAOhzB,KAAKytB,WAAaxvB,OAIxCyN,MAAQ1L,KAAKomB,SAAU7M,QAASo4B,gBAAiBj1C,MAGnDsD,KAAKyxB,SAAUxzB,KAAM4+B,SAAUngC,MAE/B,OACIi1C,gBAAiBA,gBACjBnpC,MAAOq0B,WAOf+U,aAAc,SAAU3S,OAAQ4S,YAAapB,SAAUhtB,UACnD,IAAIktB,QAAU3wC,KAAK4wC,eAAgB3R,QAEnC,OAAOj7B,EAAEixB,MAAM,SAAUtH,KAAMmkB,WAAYC,KAGvC,IAAIxB,QAGAyB,cAAgB,IAAIvwC,OAAQ,kBAAoBzB,KAAKswC,SAAW,gCAEhE2B,aAAe,IAAIxwC,OAAQ,WAAazB,KAAKswC,SAAW,8BAK5D,GAAK0B,cAAcz/B,KAAMob,OACrBlsB,OAAO8vC,IACPU,aAAa1/B,KAAM9Q,OAAO8vC,KAC1B9vC,OAAO8vC,GAAK,CACZZ,QAAU3sC,EAAE0B,OAAOqI,KAAK6yB,YAAa58B,EAAE,QAAUvC,OAAO8vC,GAAK,UAAUlkC,QAKvEsjC,QAAU3wC,KAAK5D,OAAQ,GAAI81C,mBAAoBvB,SAInD,GAAKF,SAAS0B,WAAapyC,UAAY,CACnCC,KAAKqwC,WAAWr2B,IAAK22B,SAGzBJ,QAAUvwC,KAAKoxC,OAAQzjB,KAAMgjB,SAE7B3wC,KAAKqxC,gBAAiBd,QAAS5iB,MAG/BkkB,YAAYE,IAAMA,IAClBF,YAAYC,WAAaA,WAGzBD,YAAYnmC,KAAO6kC,QAEnBsB,YAAYtB,QAAUA,QAEtBsB,YAAYh8B,OAAS06B,QAMrB,GAAKvwC,KAAK0xC,uBAAwB,OAAQG,aAAcrpC,MAAMyqB,qBAAuB,CACjF,OAIJ,GAAKjzB,KAAKwxC,wBAA0BjB,QAAU,CAC1CvwC,KAAKqwC,WAAW3D,QAASiE,QAASJ,SAGtCvwC,KAAKwwC,SAAUD,QAASE,UAGxB,GAAKA,SAAShnC,YAAc,CACxBzJ,KAAKkxC,eAGTztB,SAAS1b,QAASk3B,OAAQwR,SAAUF,UACrCvwC,OAGPoyC,eACI7wB,KAAM,MACN7kB,KAAMqD,UAGNsyC,WAAY,MAEZC,OAAQ,MAGR5E,KAAM3tC,UAEN0J,YAAa,MAIb8oC,aAAc,IAGlBzxB,KAAM,SAAUvS,IAAK3F,SAGjB,IAAI6a,SAAa7a,SAAWA,QAAQ6a,UAAczf,EAAEoB,WAKhDotC,sBACQ5pC,SAAWA,QAAQ0pC,SAAWvyC,WAC9B6I,QAAQypC,aAAetyC,WACjBuyC,OAAQ1pC,QAAQypC,eAG9B5B,SAAWzsC,EAAE0J,UAAY1N,KAAKoyC,cAAexpC,QAAS4pC,uBAGtDjC,QAAU,KAIVtR,OAASj7B,EAAE0B,OAAOqI,KAAKC,gBAAiBO,IAAKvO,KAAKyyC,wBAClD9B,QAASr3B,QAASo5B,SAAUb,YAIhC,GAAKpB,SAAS/zC,MAAQ+zC,SAASlvB,OAAS,MAAQ,CAC5C0d,OAASj7B,EAAE0B,OAAOqI,KAAKsxB,gBAAiBJ,OAAQwR,SAAS/zC,MACzD+zC,SAAS/zC,KAAOqD,UAIpB,GAAK0wC,SAAS/zC,MAAQ+zC,SAASlvB,OAAS,OAAS,CAC7CkvB,SAAS6B,OAAS,KAKtB3B,QAAU3wC,KAAK4wC,eAAgB3R,QAO/B3lB,QAAUtZ,KAAK6wC,eAAgB5R,QAE/BsR,QAAUvwC,KAAK0wC,MAAOzR,QAItB,GAAKsR,QAAQtzC,SAAW,GACpB+G,EAAE0B,OAAOqI,KAAKwxB,eAAeoR,WAC5B3sC,EAAE0B,OAAOqI,KAAK8yB,eAAe8P,SAAW,CACzCltB,SAASzZ,OAAQi1B,OAAQwR,UACzB,OAAOhtB,SAAS3a,UAKpB9I,KAAKqwC,WAAWvD,QAMhB,GAAKyD,QAAQtzC,SAAWwzC,SAAS6B,OAAS,CACtCtyC,KAAKqtC,SAAUkD,QAASE,SAAS/C,MACjCjqB,SAAS1b,QAASk3B,OAAQwR,SAAUF,SAIpC,IAAME,SAAS0B,SAAW,CACtBnyC,KAAKqwC,WAAWr2B,IAAIzL,KAGxB,OAAOkV,SAAS3a,UAGpB+oC,aACItjC,IAAKA,IACL0wB,OAAQA,OACRppB,OAAQtH,IACRokC,SAAU/pC,QAAUA,QAAQgqC,SAAW7yC,UACvCuZ,QAASA,QACTmK,SAAUA,SACV7a,QAAS6nC,UAIbiC,SAAW1yC,KAAK0xC,uBAAwB,aAAcG,aAGtD,GAAKa,SAASf,gBAAgB1e,sBAC1Byf,SAASlqC,MAAMyqB,qBAAuB,CACtC,OAAOxP,SAAS3a,UAGpB,GAAK2nC,SAAShnC,YAAc,CACxBzJ,KAAKgxC,aAAcP,SAAS8B,cAKhC,GAAK9B,SAAS0B,WAAapyC,UAAY,CACnCC,KAAKqwC,WAAWvD,QAGpB,KAAQ9oC,EAAE0B,OAAO8G,uBACbxI,EAAE0B,OAAOqI,KAAK4wB,aAAa36B,EAAE0B,OAAOqI,KAAK6vB,YAAaqB,SAAa,CACnExb,SAASzZ,OAAQi1B,OAAQwR,UACzB,OAAOhtB,SAAS3a,UAIpB9E,EAAE6a,MACEtQ,IAAKoiC,QACLpvB,KAAMkvB,SAASlvB,KACf7kB,KAAM+zC,SAAS/zC,KACfm2C,YAAapC,SAASoC,YACtBC,SAAU,OACV/pC,QAAS/I,KAAK4xC,aAAc3S,OAAQ4S,YAAapB,SAAUhtB,UAC3DrkB,MAAOY,KAAK+yC,WAAY9T,OAAQ4S,YAAapB,SAAUhtB,YAG3D,OAAOA,SAAS3a,WAGpBiqC,WAAY,SAAU9T,OAAQ4S,YAAapB,SAAUhtB,UACjD,OAAOzf,EAAEixB,MAAM,SAAU8c,IAAKD,WAAYkB,aAEtChzC,KAAKqwC,WAAWr2B,IAAKhW,EAAE0B,OAAOqI,KAAKxP,OAGnCszC,YAAYE,IAAMA,IAClBF,YAAYC,WAAaA,WACzBD,YAAYmB,YAAcA,YAG1B,IAAIC,SAAWjzC,KAAK0xC,uBAAwB,aAAcG,aAM1D,GAAKoB,SAAStB,gBAAgB1e,sBAC1BggB,SAASzqC,MAAMyqB,qBAAuB,CACtC,OAIJ,GAAKwd,SAAShnC,YAAc,CACxBzJ,KAAKmxC,aAGT1tB,SAASzZ,OAAQi1B,OAAQwR,WAC1BzwC,OAGPkzC,sBAAuB,SAAUzlC,YAC7BA,WAAazJ,EAAE0B,OAAOytC,wBAAyB1lC,YAK/C,OAAOzJ,EAAE0B,OAAO8H,mBAAoBC,aAAgBzJ,EAAE0B,OAAO6H,0BAIjE6lC,4BAA6B,SAAUxjC,GAAIyjC,KAAMlQ,QAC7C,IAAIyK,SAAW,MAEfzK,OAASA,QAAU,GAGnB,GAAKkQ,KAAO,CAGR,GAAIzjC,GAAG,KAAOyjC,KAAK,GAAI,CACnBzF,SAAW,KAKf5tC,KAAK0xC,uBAAwBvO,OAAS,QAGlCmQ,SAAU1jC,GACViG,OAAQjG,GACR+iC,SAAUU,KACVzF,SAAUA,UACXyF,MAIPrzC,KAAK0xC,uBAAwBvO,OAAS,QAClCwP,SAAUU,MAAQrvC,EAAG,IACrB6R,OAAQjG,IACTA,KAIP2jC,eAAgB,SAAU3jC,GAAIyjC,KAAMzqC,SAChC,IAAI6E,WAAa7E,QAAQ6E,WACrBwD,QAAUrI,QAAQqI,QAClBwS,SAAW7a,QAAQ6a,SACnB+vB,kBACA1qC,QAEJ9I,KAAKozC,4BAA6BxjC,GAAIyjC,KAAM,UAG5CrzC,KAAKkxC,eAELsC,kBAAoBxzC,KAAKkzC,sBAAuBzlC,YAEhD3E,QAAU,IAAM0qC,kBAAmB/lC,WAAYwD,QAASrB,GAAIyjC,MAAS5lC,aAErE3E,QAAQxD,KAAMtB,EAAEixB,MAAO,WACnBj1B,KAAKozC,4BAA6BxjC,GAAIyjC,OACvCrzC,OAGH8I,QAAQxD,KAAK,WACTme,SAAS1b,QAAQjI,MAAO2jB,SAAUhM,cAI1Cg8B,uBAAwB,WAEpBC,oBAAsB,MACtB,GAAKC,oBAAoB12C,OAAS,EAAI,CAClC+G,EAAE0B,OAAOiK,WAAW7P,MAAO,KAAM6zC,oBAAoBhyB,SAI7DiyB,uBAAwB,SAAUC,OAE9B7vC,EAAE0B,OAAO+kB,sBAAuBopB,QAGpCC,SAAU,SAAUlkC,GAAIiiC,YAAapB,UAMjCA,SAAS/mC,OAASkG,GAClB6gC,SAAShtB,SAAWzf,EAAEoB,WAEtBpF,KAAK8gB,KAAMlR,GAAI6gC,UAEfA,SAAShtB,SAASne,KAAKtB,EAAEixB,MAAM,SAAU1mB,IAAK3F,QAAS2nC,SACnDmD,oBAAsB,MAItB9qC,QAAQq2B,OAAS4S,YAAY5S,OAE7Bj/B,KAAKyN,WAAY8iC,QAASsB,YAAajpC,UACxC5I,OAEHywC,SAAShtB,SAASnZ,KAAKtG,EAAEixB,MAAM,WAC3Bj1B,KAAK4zC,uBAAwB,MAC7B5zC,KAAKyzC,yBACLzzC,KAAK0xC,uBAAwB,eAAgBG,cAC9C7xC,QAGP+zC,yBAA0B,SAAUnkC,GAAIiiC,YAAapB,UACjD,IAAIuD,aAEJnC,YAAYc,SAAW3yC,KAAKwO,WAC5BxK,EAAE0J,OAAQmkC,aACNh8B,OAAQjG,GACRhH,QAAS6nC,WAQb,GAAKzsC,EAAEud,KAAK3R,MAAQ,SAAW,CAE3BiiC,YAAY5S,OAASj7B,EAAE0B,OAAOqI,KAAKC,gBAAiB4B,GAAI5P,KAAKyyC,4BAC1D,CAGHZ,YAAY5S,OAASwR,SAASxR,OAIlC+U,aAAeh0C,KAAK0xC,uBAAwB,eAAgBG,aAG5D,GAAKmC,aAAaxrC,MAAMyqB,sBACpB+gB,aAAarC,gBAAgB1e,qBAAuB,CACpD,OAAO,MAGX,OAAO,MAGX4c,OAAQ,SAAUjgC,GAAIhH,SAIlB,GAAK8qC,oBAAsB,CACvBC,oBAAoBM,QAASx8B,WAC7B,OAGJ,IAAIg5B,SAAWzsC,EAAE0J,UAAY1J,EAAE0B,OAAOiK,WAAWukC,SAAUtrC,SACvDipC,eAGJpB,SAASmC,SAAWnC,SAASmC,UAAY5yC,KAAKwO,WAG9C,IAAMxO,KAAK+zC,yBAAyBnkC,GAAIiiC,YAAapB,UAAY,CAC7D,OAOJ7gC,GAAKiiC,YAAYh8B,OAMjB,GAAK7R,EAAEud,KAAK3R,MAAQ,SAAW,CAI3B8jC,oBAAsB,KAEtB1zC,KAAK8zC,SAAUlkC,GAAIiiC,YAAapB,cAC7B,CACHzwC,KAAKyN,WAAYmC,GAAIiiC,YAAapB,YAI1ChjC,WAAY,SAAUoI,OAAQg8B,YAAapB,UACvC,IAAImC,SAAUrkC,IAAKyG,QAAS27B,QACxBl7B,OAAQ0+B,oBACRC,WAAYC,UAAWC,SACvBC,aAAcjD,aACdz9B,OAAW2gC,sBACXC,iBAKJ,GAAKf,oBAAsB,CAGvBC,oBAAoBM,SAAUp+B,OAAQ46B,WACtC,OAKJ,IAAMzwC,KAAK+zC,yBAAyBl+B,OAAQg8B,YAAapB,UAAY,CACjE,OAGJoB,YAAYc,SAAWlC,SAASmC,SAGhC6B,iBAAmBz0C,KAAK0xC,uBAAwB,mBAAoBG,aACpE,GAAI4C,iBAAiB9C,gBAAgB1e,sBACjCwhB,iBAAiBjsC,MAAMyqB,qBAAuB,CAC9C,OAMJygB,oBAAsB,KAMtB,GAAK79B,OAAQ,KAAQ7R,EAAE0B,OAAOs7B,UAAW,KAAQyP,SAASn3B,QAAU,CAChEm3B,SAASn3B,QAAUtV,EAAE0B,OAAOqI,KAAK6vB,YAAYvvB,WAKjDukC,SAAWnC,SAASmC,SACpBrkC,IAAQkiC,SAASn3B,SAAWtV,EAAE0B,OAAOqI,KAAKyK,oBAAoBi4B,SAASn3B,UACnEzD,OAAOnH,QAAS,OAIpBsG,QAAUzG,IACVoiC,QAAU3sC,EAAE0B,OAAOqI,KAAK6yB,YAAaryB,KACrCkH,OAASzR,EAAE0B,OAAOsL,SAAS5B,QAAQsG,YACnCy+B,oBAAsBnwC,EAAE0B,OAAOsL,SAAS5B,QAAQyD,cAAgB,EAChEuhC,WAAa,EACbC,UAAYxyC,SAASoT,MACrBq/B,UAAa7D,SAAS/C,OAAS,UAC3B73B,OAAOnH,QAAS,UAAa,WAC7BmH,OAAOnH,QAAS,YAAe,KAanC,GAAKkkC,UAAYA,SAAS,KAAO/8B,OAAO,KACnC46B,SAASp4B,wBAA0B,CAEpCq7B,oBAAsB,MACtB1zC,KAAK0xC,uBAAwB,aAAcG,aAC3C7xC,KAAK0xC,uBAAwB,SAAUG,aAIvC,GAAKpB,SAASn4B,eAAiB,CAC3BtU,EAAE0B,OAAOsL,SAAS5B,QAAQqJ,QAASlK,IAAKA,MAG5C,OAIJsH,OAAOnK,MAAOgiC,KAAM+C,SAAS/C,OAM7B,GAAK+C,SAASn4B,eAAiB,CAC3B87B,WAAa3D,SAASl6B,YAAc,QAAU,EAAI,EAUtD,IACI,GAAK1U,SAAS6yC,eACV7yC,SAAS6yC,cAAcjuB,SAASrlB,gBAAkB,OAAS,CAE3D4C,EAAGnC,SAAS6yC,eAAgBC,WACzB,CACH3wC,EAAG,6CAA8C2wC,QAEvD,MAAOzpB,IAITqpB,aAAe,MAKf,GAAKD,UAAY7+B,OAAS,CAYtB,GAAKA,OAAOlH,KACRkH,OAAOlH,IAAIlL,QAASW,EAAE0B,OAAOopB,gBAAmB,GAChD9uB,KAAKwO,aACJxO,KAAKwO,WAAWnI,SAAU,cAC3BrC,EAAE0B,OAAOsL,SAAS5B,QAAQyD,YAAc,EAAI,CAE5C49B,SAASl4B,WAAa,MACtBg8B,aAAe,KAKnBhmC,IAAQkH,OAAOlH,KAAO,GAGtB,IAAMgmC,cAAgBhmC,IAAIlL,QAAQ,MAAQ,EAAI,CAC1CkL,KAAOvK,EAAE0B,OAAOopB,kBACb,CACHvgB,KAAO,IAAMvK,EAAE0B,OAAOopB,eAO9BwiB,cAAkB77B,OAAW4+B,UAAYx+B,OAAOnH,QAAS,UACrDmH,OAAOmF,SAAU,2BAA4B5I,KAAM,aAAc/E,OACrE,KAAOikC,cAAgB+C,YAAcxyC,SAASoT,MAAQ,CAClDo/B,UAAY/C,aAEhB,IAAMz7B,OAAOnH,QAAS,SAAY,CAC9BmH,OAAOnH,QAAS,QAAS2lC,WAI7B5D,SAAShjC,WAAagjC,SAAShjC,aACvB2mC,aAAeD,oBAAwB1+B,OAAOhI,WAAa1N,aAC7Du0C,SAAWtwC,EAAE0B,OAAOgH,wBAA0B1I,EAAE0B,OAAO+G,uBAG7D,IAAM2nC,YAAcG,aAAe,CAC/BvwC,EAAE0B,OAAOsL,SAAS5B,QAAQsG,YAAYV,QAAUA,QAIpD,GAAKzG,MAAQkiC,SAASn4B,eAAiB,CAInC,IAAMtU,EAAE0B,OAAOqI,KAAKY,OAAQJ,MAASA,IAAIlL,QAAS,KAAQ,EAAI,CAC1DkL,IAAM,IAAMA,IAIhBsF,QACIpG,WAAYgjC,SAAShjC,WACrBwH,MAAOo/B,UACPr/B,QAASA,QACT04B,KAAM+C,SAAS/C,MAGnB,GAAK+C,SAASl4B,aAAe,OAASvU,EAAE0B,OAAOiH,qBAAuB,CAClE3I,EAAE0B,OAAOsL,SAAUhR,KAAK5D,OAAQ,GAAIw4C,UAAWrmC,KAAOsF,OAAQ,WAC3D,GAAKgC,OAAQ,KAAQ7R,EAAE0B,OAAOs7B,UAAW,GAAM,CAClDh9B,EAAE0B,OAAOsL,SAAS5B,QAAQ4R,IAAKzS,IAAKsF,SAK5ChS,SAASoT,MAAQo/B,UAGjBrwC,EAAE0B,OAAO8I,WAAaqH,OAGtB7V,KAAKwO,WAAaqH,OAGlB46B,SAASx/B,QAAUw/B,SAASx/B,SAAWmjC,WAAa,EAEpDI,sBAAwBxwC,EAAEoB,WAE1BpF,KAAKuzC,eAAe19B,OAAQ+8B,UACxBnlC,WAAYgjC,SAAShjC,WACrBwD,QAASw/B,SAASx/B,QAClBwS,SAAU+wB,wBAGdA,sBAAsBlvC,KAAKtB,EAAEixB,MAAM,SAAUh3B,KAAMgT,QAAS4jC,IAAKC,MAAOC,gBACpE/wC,EAAE0B,OAAO+kB,wBAGT,GAAKgmB,SAASuE,oBAAsB,CAChCvE,SAASuE,oBAAoBlnB,SAKjC,IAAMinB,eAAiB,CACnB/wC,EAAE0B,OAAOuvC,UAAWp/B,QAGxB7V,KAAKyzC,yBACLzzC,KAAK0xC,uBAAwB,aAAcG,aAC3C7xC,KAAK0xC,uBAAwB,SAAUG,cACxC7xC,QAIPyyC,qBAAsB,WAClB,IAAIyC,YAAgBl1C,KAAKwO,YACzBxK,EAAE0B,OAAO4kB,kBAAmBtqB,KAAKwO,YACrC,OAAO0mC,aAAelxC,EAAE0B,OAAOqI,KAAKK,aAAaC,cAMrDrK,EAAE0B,OAAOyvC,iBAAmBnxC,EAAEoB,WAI9B,IAAIuuC,uBAGAD,oBAAsB,OAtpC9B,CAwpCI33B,SAEJ,SAAW/X,EAAGjE,WAGV,IAAIq1C,iBAAmBpxC,EAAEoB,WAGrBiwC,aAAerxC,EAAEoB,WAGjBkwC,kBAAoB,WAGhBD,aAAattC,UACbstC,aAAe,MAGnBzX,YAAc55B,EAAE0B,OAAOqI,KAAK6vB,YAG5B2X,cAAgB,KAGpB,SAASC,gBAAiBjrB,KACtB,MAAQA,IAAM,CAQV,UAAcA,IAAI9D,WAAa,UAAc8D,IAAI9D,SAASrlB,gBAAkB,IAAM,CAC9E,MAEJmpB,IAAMA,IAAI7D,WAEd,OAAO6D,IAGXvmB,EAAE0B,OAAO+vC,SAAW,SAAUlnC,IAAKmzB,MAC/B,IAAIr8B,UAEJq8B,KAAOA,SACPr8B,UAAcq8B,KAAK7S,eAAiB7qB,EAAE0B,OAAOmpB,cAI7C6S,KAAKje,SAAWzf,EAAEoB,WAIlBC,UAAU8I,cAAe,OAAQI,IAAKmzB,MAGtC,OAAOA,KAAKje,SAAS3a,WAYzB9E,EAAE0B,OAAO+J,KAAO,WACZ,IAAIimC,IAAMt5C,OAAO8E,UAIjB,GAAKlB,KAAK2uB,2BACN+mB,KACAA,IAAIniC,KACJmiC,IAAIniC,IAAIoiC,YAAc,CACtBD,IAAIniC,IAAIoiC,kBACL,CACH3xC,EAAE0B,OAAOmpB,cAAc1gB,cAAe,UAK9CnK,EAAE0B,OAAOuvC,UAAY,SAAWvpC,MAC5B,IAAIkqC,UAAYlqC,KAAK0G,KAAM,eACvBiiC,UAAY3oC,KAAK0G,KAAM,mBAE3B,GAAKwjC,UAAU34C,OAAS,CACpB24C,UAAUpwB,QACV,OAGJ,GAAK6uB,UAAUp3C,OAAS,CACpBo3C,UAAU7uB,YACR,CACF9Z,KAAK8Z,UAKbxhB,EAAE0B,OAAOytC,wBAA0BnvC,EAAE0B,OAAOytC,yBAA2B,SAAU1lC,YAC7E,OAAOA,YAKXzJ,EAAE0B,OAAOiK,WAAa,SAAUC,GAAIhH,SAChC5E,EAAE0B,OAAOmpB,cAAc1gB,cAAe,SAAUyB,GAAIhH,UAGxD5E,EAAE0B,OAAOiK,WAAWukC,UAChBzmC,WAAY1N,UACZkR,QAAS,MACTsH,WAAY,KACZD,eAAgB,MAChBo1B,KAAM3tC,UACNi1C,oBAAqBj1C,UACrB8uB,cAAe9uB,UACf0J,YAAa,KACb6P,QAASvZ,UACT6yC,SAAU7yC,UACVsY,wBAAyB,OAG7BrU,EAAE0B,OAAOmwC,wBAA0B,WAC/B,IAAIC,gBAAkB,SAAUC,MAAOC,eACnC,IAAIznC,IAAKqR,IAAM,KAAMq2B,SAAUC,aAAc9iB,OAC7C,IAAMpvB,EAAE0B,OAAO2oB,aAEP0nB,MAAMzvC,GAAI,4BAGTyvC,MAAMnoB,gBAAgB3wB,QACvB84C,MAAMz/B,KAAM,UAAa,CAC7B,OAAO,MAGX/H,IAAQgnC,eAAiBA,cAAcj/B,KAAM,eACzCy/B,MAAMz/B,KAAM,UAChB8c,QAAW2iB,MAAMz/B,KAAM,WAAc,OAAQlV,cAO7C,IAAMmN,IAAM,CAERA,IAAMvK,EAAE0B,OAAO4kB,kBAAmByrB,OAIlC,GAAK3iB,SAAW,MAAQ,CACpB7kB,IAAMvK,EAAE0B,OAAOqI,KAAKgI,SAAUxH,KAAMuvB,aAGxC,GAAKvvB,MAAQvK,EAAE0B,OAAOqI,KAAKK,aAAaC,WAAa,CAKjDE,IAAMqvB,YAAYE,cAI1BvvB,IAAMvK,EAAE0B,OAAOqI,KAAKC,gBAAkBO,IAAKvK,EAAE0B,OAAO4kB,kBAAmByrB,QAEvE,GAAO/xC,EAAE0B,OAAOqI,KAAKgyB,WAAYxxB,OAAUvK,EAAE0B,OAAOqI,KAAKmzB,8BAA+BtD,YAAarvB,KAAU,CAC3G,OAAO,MAGX,IAAMynC,cAAgB,CAClBC,SAAWF,MAAMI,iBAEjB,GAAKZ,eAAiBA,cAAe,GAAIa,OAASL,MAAO,GAAM,CAC3DG,aAAeX,cAAcj/B,KAAM,QACnC,GAAK4/B,aAAe,CAEhBlyC,EAAEmb,KAAM82B,SAAU,SAAUrrC,IAAKnM,OAC7B,GAAKA,MAAMR,OAASi4C,aAAe,CAE/BA,aAAe,GACf,OAAO,SAGf,GAAKA,aAAe,CAChBD,SAAS94C,MAAQc,KAAMi4C,aAAcz3C,MAAO82C,cAAcj/B,KAAM,aAK5EsJ,KACIrR,IAAKA,IACL3F,SACI2Y,KAAa6R,OACb12B,KAAasH,EAAEgV,MAAOi9B,UACtBxoC,WAAesoC,MAAMrnC,QAAS,cAC9BuC,QAAY8kC,MAAMrnC,QAAS,eAAkB,UAC7C2jC,WAAe,OAK3B,OAAOzyB,KAIX5b,EAAE0B,OAAO7D,SAASugB,SAAU,OAAQ,SAAU,SAAU5Z,OACpD,IAAIytC,SAEJ,IAAMztC,MAAMyqB,qBAAuB,CAC/BgjB,SAAWH,gBAAiB9xC,EAAGhE,OAC/B,GAAKi2C,SAAW,CACZjyC,EAAE0B,OAAOiK,WAAYsmC,SAAS1nC,IAAK0nC,SAASrtC,SAC5CJ,MAAM0N,qBAMlBlS,EAAE0B,OAAO7D,SAAStC,KAAM,SAAU,SAAUiJ,OACxC,IAAI6tC,KAAMC,OAAQ5sC,OAASlB,MAAMkB,OAAQ6sC,YAAc,MAGvD,GAAK/tC,MAAMk9B,MAAQ,IAAM1hC,EAAE0B,OAAO4oB,mBAAqB,CACnD,OAKJinB,cAAgBvxC,EAAG0F,QAGnB,GAAK1F,EAAEtH,KAAMgN,OAAQ,iBAAoB,CAErC,IAAMosC,gBAAiB9xC,EAAG0F,QAAS+E,QAAS,QAAU,MAAS,CAC3D,OAIJ,GAAK/E,OAAOgd,WAAa,CACrBhd,OAASA,OAAOgd,gBAEjB,CACHhd,OAAS8rC,gBAAiB9rC,QAC1B,KAAQA,QAAU1F,EAAE0B,OAAOqI,KAAKgI,SAAUrM,OAAO4V,aAAc,SAAY,KAAMlM,OAAS,KAAQ,CAC9F,OAKJ,IAAMpP,EAAG0F,QAASkkB,gBAAgB3wB,OAAS,CACvC,QAMR,MAAQyM,OAAO2V,UAAUhc,QAAS,mBAAsB,CACpD,GAAKqG,OAAOgd,WAAa,CACrB4vB,OAAStyC,EAAEtH,KAAMgN,OAAOgd,WAAY,uBAGrC,CACH4vB,OAAStyC,EAAEtH,KAAMgN,OAAQ,kBAG7B,GAAK4sC,OAAS,CACV5sC,OAAS4sC,OAAOE,UACb,CACHD,YAAc,KAGlBF,KAAOryC,EAAG0F,QAEV,GAAK6sC,YAAc,CACfF,KAAOA,KAAK5nC,QAAS,WAGzB,GAAK4nC,KAAKp5C,OAAS,IACZo5C,KAAKhwC,SAAU,qBAIdgwC,KAAKhwC,SAAU,gBAAsB,CACzCrC,EAAE0B,OAAO+kB,sBAAuB,MAChCzmB,EAAE0B,OAAOilB,kBAAoB0rB,KAC7BryC,EAAE0B,OAAOilB,kBAAkBpkB,SAAUvC,EAAE0B,OAAOolB,mBAKtD9mB,EAAE0B,OAAO7D,SAAStC,KAAM,QAAS,SAAUiJ,OACvC,IAAMxE,EAAE0B,OAAO4oB,oBAAsB9lB,MAAMyqB,qBAAuB,CAC9D,OAGJ,IAAIsH,KAAOib,gBAAiBhtC,MAAMkB,QAC9B+sC,MAAQzyC,EAAGu2B,MAGXmc,YAAc,WACVt6C,OAAO4L,WAAW,WAAahE,EAAE0B,OAAO+kB,sBAAuB,OAAW,MAE9EksB,QAAS3gC,KACT4gC,sBAAuB7W,WACvBtyB,WAAYwD,QAASy8B,KAGzB,GAAK1pC,EAAE0B,OAAOilB,mBACV3mB,EAAE0B,OAAOilB,kBAAmB,KAAQniB,MAAMkB,OAAOgd,WAAa,CAC9DgwB,cAOJ,IAAMnc,MAAQ/xB,MAAMk9B,MAAQ,IAAM+Q,MAAM7oB,gBAAgB3wB,OAAS,CAC7D,OAIJ,GAAKw5C,MAAMnwC,GAAI,wBAA2B,CACtCtC,EAAE0B,OAAO+J,OACT,OAAO,MAGXknC,QAAU3yC,EAAE0B,OAAO4kB,kBAAmBmsB,OAGtCzgC,KAAOhS,EAAE0B,OAAOqI,KAAKC,gBAAiByoC,MAAMngC,KAAM,SAAY,IAAKqgC,SAGnE,IAAM3yC,EAAE0B,OAAO2oB,cAAgBrqB,EAAE0B,OAAOqI,KAAKwxB,eAAgBvpB,MAAS,CAClE0gC,cAEA,OAWJ,GAAK1gC,KAAK0lB,OAAQ,QAAW,KACtB13B,EAAE0B,OAAOqI,KAAKgyB,WAAY/pB,OAAUhS,EAAE0B,OAAOqI,KAAKgxB,cAAe/oB,OAAW,CAE/EA,KAAOA,KAAKvR,QAAS,SAAU,IAC/B,IAAMuR,KAAO,CAGTxN,MAAM0N,iBACN,YACG,GAAKlS,EAAE0B,OAAOqI,KAAKY,OAAQqH,MAAS,CAEvCA,KAAOhS,EAAE0B,OAAOqI,KAAKC,gBAAiBgI,KAAM2gC,aACzC,CAEH3gC,KAAOhS,EAAE0B,OAAOqI,KAAKC,gBAAiB,IAAMgI,KAAM4nB,YAAYvvB,aAKtEuoC,sBAAwBH,MAAMnwC,GAAI,qBAAwBmwC,MAAMnwC,GAAI,2BAA8BmwC,MAAMnwC,GAAI,YAY5Gy5B,WAAa6W,uBAA2B5yC,EAAE0B,OAAOqI,KAAKgyB,WAAY/pB,QAAWhS,EAAE0B,OAAOqI,KAAKmzB,8BAA+BtD,YAAa5nB,MAEvI,GAAK+pB,WAAa,CACd2W,cAEA,OAIJjpC,WAAagpC,MAAM/nC,QAAS,cAC5BuC,QAAUwlC,MAAM/nC,QAAS,eAAkB,WAE/B+nC,MAAM/nC,QAAS,QAG3Bg/B,KAAO+I,MAAMngC,KAAM,QAAUtS,EAAE0B,OAAO0jB,GAAK,QAAWrpB,UAEtDiE,EAAE0B,OAAOiK,WAAYqG,MAAQvI,WAAYA,WAAYwD,QAASA,QAASy8B,KAAMA,KAAMnT,KAAMkc,QACzFjuC,MAAM0N,mBAIVlS,EAAE0B,OAAO7D,SAASugB,SAAU,WAAY,oBAAqB,WACzD,IAAIy0B,QACJ7yC,EAAGhE,MAAOoS,KAAM,uBAAwB+M,KAAK,WACzC,IAAIs3B,MAAQzyC,EAAGhE,MACXuO,IAAMkoC,MAAMngC,KAAM,QAEtB,GAAK/H,KAAOvK,EAAE8yC,QAASvoC,IAAKsoC,SAAY,EAAI,CACxCA,KAAK15C,KAAMoR,KAEXvK,EAAE0B,OAAO+vC,SAAUlnC,KAAOm/B,KAAM+I,MAAMngC,KAAM,QAAUtS,EAAE0B,OAAO0jB,GAAK,OAAQ+oB,SAAU,YAMlGnuC,EAAE0B,OAAOmpB,cAAc1gB,gBAGvBnK,EAAE0B,OAAO7D,SAAStC,KAAM,WAAY,WAIhC,GAAK81C,aAAe,CAChBA,aAAa/vC,KAAMtB,EAAE0B,OAAOqmB,2BACzB,CACH/nB,EAAE0B,OAAOqmB,2BAGjB/nB,EAAE0B,OAAOtJ,OAAOmD,KAAM,kBAAmByE,EAAE0B,OAAOqmB,wBAItD/nB,EAAG,WAAaoxC,iBAAiBrtC,YAGjC,GAAKlG,SAASigB,aAAe,WAAa,CACtCwzB,wBACG,CACHtxC,EAAE0B,OAAOtJ,OAAO0kB,KAAMw0B,mBAG1BtxC,EAAEwB,KAAM4vC,iBAAkBpxC,EAAE0B,OAAOyvC,kBAAmB7vC,KAAM,WAAatB,EAAE0B,OAAOmwC,6BAzbtF,CA0bI95B,SAGJ,SAAW/X,EAAG5H,OAAQ2D,WAIlBiE,EAAE0B,OAAOqxC,WAAa,WAClB/2C,KAAKkd,KAAKpd,MAAOE,KAAMyX,YAG3BzT,EAAE0J,OAAO1J,EAAE0B,OAAOqxC,WAAW15C,WACzB25C,WAAY,kBAEZ95B,KAAM,SAAUjf,KAAMgT,QAAS4jC,IAAKC,OAChC9wC,EAAE0J,OAAO1N,MACL/B,KAAMA,KACNgT,QAASA,QACT4jC,IAAKA,IACLC,MAAOA,MACPrxB,SAAU,IAAIzf,EAAEoB,YAIxB6xC,UAAW,WACPj3C,KAAK80C,MACAjqB,YAAa7mB,EAAE0B,OAAOklB,gBAAkB,mBAAqB5qB,KAAK/B,MAClEyJ,OAAQ,KAIjBwvC,aAAc,aACdC,cAAe,aACfC,eAAgB,aAEhBC,OAAQ,WACJr3C,KAAKk3C,eAELl3C,KAAK60C,IAAIhqB,YAAa,kBAAoB7qB,KAAK/B,MAAOyJ,OAAQ,IAE9D1H,KAAKs3C,sBAIL,GAAKtzC,EAAE0B,OAAOtJ,OAAO04B,cAAgB90B,KAAKu3C,SAAW,CACjDv3C,KAAKw3C,aAET,IAAMx3C,KAAK+M,WAAa,CACpB/M,KAAK60C,IAAItuC,SAAUvC,EAAE0B,OAAOklB,iBAEhC5qB,KAAKyjB,SAAS1b,QAAS/H,KAAK/B,KAAM+B,KAAKiR,QAASjR,KAAK60C,IAAK70C,KAAK80C,MAAO,OAG1E2C,QAAS,SAAUziB,aAAc0iB,aAAcC,KAAMC,cACjD53C,KAAKm3C,gBACLn3C,KAAK63C,QAAS7iB,aAAc0iB,aAAcC,KAAMC,eAGpDE,OAAQ,SAAU5nC,UAEdlQ,KAAK60C,IAAIhvB,IAAK,WAAY,IAC1B3V,SAAS3S,KAAMyC,MACfA,KAAK60C,IAAIhvB,IAAK,UAAW,KAG7B2xB,WAAY,WAGRxzC,EAAEwE,MAAMyZ,QAAQgI,YAAYC,QAAU,MAEtC,GAAKlmB,EAAE0B,OAAOyoB,YAAcnuB,KAAKu3C,WAAavzC,EAAE0B,OAAOskB,kBAAoB,CACvE5tB,OAAO+tB,SAAU,EAAGnqB,KAAKu3C,UAI7BvvC,WAAY,WACRhE,EAAEwE,MAAMyZ,QAAQgI,YAAYC,QAAU,MACvC,MAGP2tB,QAAS,SAAU7iB,aAAc0iB,aAAcC,KAAMC,cACjD53C,KAAK83C,OAAO,WACR93C,KAAK60C,IAAItuC,SAAUvC,EAAE0B,OAAOklB,gBAAkB5qB,KAAKg3C,YAGnD,IAAMY,aAAe,CACjB5zC,EAAE0B,OAAOuvC,UAAWj1C,KAAK60C,KAI7B70C,KAAK60C,IAAIntC,OAAQstB,aAAeh1B,KAAKu3C,UAErC,IAAMI,KAAO,CACT33C,KAAKw3C,gBAIbx3C,KAAK60C,IACAhqB,YAAa7qB,KAAKg3C,YAClBzwC,SAAUvG,KAAK/B,KAAO,OAASy5C,cAEpC,IAAMC,KAAO,CACT33C,KAAK60C,IAAIvR,kBAAmBt/B,EAAEixB,MAAM,WAChCj1B,KAAKq3C,UACNr3C,WACA,CACHA,KAAKq3C,WAKbU,SAAU,SAAU/iB,aAAc0iB,aAAcC,MAC5C33C,KAAKo3C,eAAgBpiB,aAAc0iB,aAAcC,MAIjD33C,KAAK80C,MACAptC,OAAQstB,aAAehxB,EAAE0B,OAAOtJ,OAAO04B,aACvCvuB,SAAUvG,KAAK/B,KAAO,OAASy5C,eAGxCJ,oBAAqB,WACjBtzC,EAAE0B,OAAOmpB,cAAc5P,YAAa,6CAA+Cjf,KAAK/B,OAG5FwP,WAAY,WAMR,IAAIkqC,KACAD,aAAe13C,KAAKiR,QAAU,WAAa,GAC3C+jB,aAAehxB,EAAE0B,OAAOomB,kBACxBksB,sBAAwBh0C,EAAE0B,OAAO6oB,qBAAuB,OACpDvqB,EAAE0B,OAAOtJ,OAAOqL,QAAUzD,EAAE0B,OAAO6oB,mBAE3CvuB,KAAKu3C,SAAWvzC,EAAE0B,OAAOsL,SAAS5B,QAAQsG,YAAYy5B,YAAcnrC,EAAE0B,OAAOskB,kBAE7E2tB,MAAQ3zC,EAAE8jB,QAAQsb,iBAAmBp/B,EAAE8jB,QAAQub,eAC3C2U,wBAA0Bh4C,KAAK/B,MAAQ+B,KAAK/B,OAAS,QACrD0rB,KAAKC,IAAK5lB,EAAE0B,OAAOtJ,OAAO04B,YAAa90B,KAAKu3C,UACxCvzC,EAAE0B,OAAOuyC,4BAEjBj4C,KAAKs3C,sBAEL,GAAKt3C,KAAK80C,QAAU6C,KAAO,CACvB33C,KAAK+3C,SAAU/iB,aAAc0iB,aAAcC,UACxC,CACH33C,KAAKy3C,QAASziB,aAAc0iB,aAAcC,KAAM,MAGpD,OAAO33C,KAAKyjB,SAAS3a,cArJjC,CAwJIiT,OAAQ/b,OAGZ,SAAWgE,GAEPA,EAAE0B,OAAOwyC,iBAAmB,WACxBl4C,KAAKkd,KAAKpd,MAAME,KAAMyX,YAG1BzT,EAAE0J,OAAO1J,EAAE0B,OAAOwyC,iBAAiB76C,UAAW2G,EAAE0B,OAAOqxC,WAAW15C,WAC9D0P,WAAY,KAEZoqC,cAAe,WACX,GAAKn3C,KAAK80C,MAAQ,CACd90C,KAAKi3C,cAIbG,eAAgB,SAAUpiB,aAAc0iB,aAAcC,MAClD33C,KAAK80C,MAAMxR,kBAAkBt/B,EAAEixB,MAAM,WACjCj1B,KAAKy3C,QAASziB,aAAc0iB,aAAcC,OAC3C33C,WAlBf,CAsBI+b,SAGJ,SAAW/X,GAEPA,EAAE0B,OAAOyyC,qBAAuB,WAC5Bn4C,KAAKkd,KAAKpd,MAAME,KAAMyX,YAG1BzT,EAAE0J,OAAO1J,EAAE0B,OAAOyyC,qBAAqB96C,UAAW2G,EAAE0B,OAAOqxC,WAAW15C,WAClE0P,WAAY,MAEZmqC,aAAc,WACV,GAAKl3C,KAAK80C,MAAQ,CACd90C,KAAKi3C,cAIbG,eAAgB,SAAUpiB,aAAc0iB,aAAcC,MAClD33C,KAAKy3C,QAASziB,aAAc0iB,aAAcC,UAhBtD,CAoBI57B,SAGJ,SAAW/X,GAGP,IAAIo0C,iCAAmC,WACnC,OAAOp0C,EAAE0B,OAAOomB,kBAAoB,GAIxC9nB,EAAE0B,OAAO8H,oBACLT,WAAc/I,EAAE0B,OAAOwyC,iBACvBlrC,aAAgBhJ,EAAE0B,OAAOyyC,sBAI7Bn0C,EAAE0B,OAAO6H,yBAA2BvJ,EAAE0B,OAAO8H,mBAAmBT,WAEhE/I,EAAE0B,OAAO2yC,uBAGTr0C,EAAE0B,OAAOytC,wBAA0B,SAAU1lC,YACzC,GAAKA,aAAezJ,EAAE8jB,QAAQgU,gBAAkB93B,EAAE0B,OAAO2yC,oBAAqB5qC,YAAe,CACzFA,WAAazJ,EAAE0B,OAAO2yC,oBAAqB5qC,YAG/C,OAAOA,YAIXzJ,EAAE0B,OAAOuyC,0BAA4Bj0C,EAAE0B,OAAOuyC,2BAA6BG,kCA5B/E,CA8BIr8B,SAMJ,SAAW/X,EAAG5H,OAAQ2D,WAEtBiE,EAAE0B,OAAO2yC,oBAAoBC,KAAO,QAFpC,CAIIv8B,OAAQ/b,OAMZ,SAAWgE,EAAG5H,OAAQ2D,WAEtBiE,EAAE0B,OAAO2yC,oBAAoBE,KAAO,QAFpC,CAIIx8B,OAAQ/b,OAMZ,SAAWgE,EAAG5H,OAAQ2D,WAEtBiE,EAAE0B,OAAO2yC,oBAAoB12B,IAAM,QAFnC,CAII5F,OAAQ/b,OAMZ,SAAWgE,EAAG5H,OAAQ2D,WAGtBiE,EAAE0B,OAAO8H,mBAAmBgrC,MAAQx0C,EAAE0B,OAAO8H,mBAAmBR,aAGhEhJ,EAAE0B,OAAO2yC,oBAAoBG,MAAQ,QANrC,CAQIz8B,OAAQ/b,OAMZ,SAAWgE,EAAG5H,OAAQ2D,WAEtBiE,EAAE0B,OAAO2yC,oBAAoBI,UAAY,QAFzC,CAII18B,OAAQ/b,OAMZ,SAAWgE,EAAG5H,OAAQ2D,WAGtBiE,EAAE0B,OAAO2yC,oBAAoBK,UAAY,QAHzC,CAKI38B,OAAQ/b,OAMZ,SAAWgE,EAAG5H,OAAQ2D,WAEtBiE,EAAE0B,OAAO2yC,oBAAoBM,QAAU,QAFvC,CAII58B,OAAQ/b,OAMZ,SAAWgE,EAAG5H,OAAQ2D,WAEtBiE,EAAE0B,OAAO2yC,oBAAoBO,KAAO,QAFpC,CAII78B,OAAQ/b,OAGZ,SAAWgE,EAAGjE,WAEdiE,EAAE0B,OAAOmzC,eACLC,MAAO,MACPC,KAAM,MACNC,SAAU,MACVC,iBAAkB,MAClBC,MAAO,MACPC,MAAO,MACPC,OAAQ,MACRC,MAAO,SACP3d,OAAQ,OACR4d,IAAK,MACLvP,KAAM,MACNx7B,IAAK,MACLgrC,KAAM,OAGVv1C,EAAE0B,OAAOgG,KAAKrO,UAAUuL,QAAQiwC,cAAgB70C,EAAE0B,OAAOmzC,cAGzD70C,EAAE0B,OAAOwnB,oBAAsB,SAAUxjB,QAErCA,OAAS1F,EAAG0F,QAGZA,OAAO0I,KAAM,SAAUib,IAAKrpB,EAAE0B,OAAOgG,KAAKrO,UAAUyvB,sBAAuB3N,KAAK,WAC5E,IAAIiH,QAAUpiB,EAAGhE,MACbuhB,KAAOvhB,KAAKsf,aAAc,QAC1Bk6B,QAAUx1C,EAAE0B,OAAOmzC,cAAet3B,OAAU,OAC5CoM,KAAM8rB,QAASC,QAASC,OAE5B,GAAK31C,EAAE0B,OAAOmzC,cAAet3B,MAAS,CAClCoM,KAAO3pB,EAAG,SAAU2pB,KAAMvH,QAAQwzB,SAAUjsB,OAE5C8rB,QAAU9rB,KAAKtqB,QAAS,WAAc,EACtCq2C,QAAUD,QAAU,wBAA0B,OAC9CE,OAAS,UAAaH,QAAU,UAAax1C,EAAE0B,OAAO0jB,GAAK,SAAY7H,KAAO,KAASk4B,QAAU,GAAK,KAEtGrzB,QAAQyzB,YAAalsB,KAAKlpB,QAASi1C,QAASC,cAvCxD,CA6CI59B,SAEJ,SAAW/X,EAAG5H,OAAQ2D,WAEtBiE,EAAEkrB,OAAQ,cAAelrB,EAAE0B,OAAOgG,MAC9B9C,SAGIkxC,SAAU,OACVC,aAAc,QACdC,aAAc,IACdC,QAAS,KACTzM,OAAQ,OAGZhc,QAAS,WACLxxB,KAAK4vB,SACL,GAAK5vB,KAAK4I,QAAQ4kC,OAAS,CAEvBxpC,EAAE0J,OAAQ1N,MACNk6C,OAAQl6C,KAAKomB,QAAQpL,WACrBm/B,mBAAoB,OAGxB,IAAMn6C,KAAK4I,QAAQwkC,SAAW,CAC1BptC,KAAKo6C,aAAcp6C,KAAK4I,QAAQkxC,aAK5CzM,SAAU,WACNrtC,KAAK4vB,SAGL,GAAK5vB,KAAK4I,QAAQ4kC,OAAS,CACvBxtC,KAAKomB,QAAQ7f,SAAU,aAClB8zC,UAAWr2C,EAAG,UAGX0pC,KAAS,SACT4M,MAAU,uCACJt6C,KAAK4I,QAAQqxC,QAAU,iBAAmB,SAKhEloB,YAAa,SAAUnpB,SACnB,IAAI2xC,oBAAqBC,gBACrBC,YAAcz6C,KAAK4I,QAEvB,GAAKA,QAAQqxC,UAAYl6C,UAAY,CACjCC,KAAKk6C,OAAOj7B,YAAa,kBAAmBrW,QAAQqxC,SAGxD,GAAKrxC,QAAQoxC,eAAiBj6C,UAAY,CACtC,GAAKiE,EAAE0B,OAAO8I,WAAY,KAAQxO,KAAKomB,QAAS,GAAM,CAClDq0B,YAAYT,aAAepxC,QAAQoxC,aACnCh6C,KAAK8tC,yBAIb,GAAKllC,QAAQmxC,eAAiBh6C,UAAY,CACtCw6C,oBAAsBE,YAAYX,SAClCU,gBAAkB5xC,QAAQmxC,aAG9B,GAAKnxC,QAAQkxC,WAAa/5C,UAAY,CAClCw6C,oBAAsB3xC,QAAQkxC,SAGlC,GAAKS,oBAAsB,CACvBv6C,KAAKo6C,aAAcG,oBAAqBC,iBAG5Cx6C,KAAK4vB,OAAQhnB,UAGjBklC,sBAAuB,WACnB,GAAK9tC,KAAK4I,QAAQoxC,cAAgBh6C,KAAK4I,QAAQ4kC,OAAS,CACpDxtC,KAAKguC,4BACLhuC,KAAK+tC,uBAAwB/tC,KAAK4I,QAAQoxC,kBACvC,CACHh6C,KAAK4vB,WAIbwqB,aAAc,SAAU/kC,SAAUhI,MAC9B,IAAIqtC,IACAC,IAAM36C,KAAKm6C,mBAGf9kC,SAAW,SAAWA,SAAW,OAAS,UAAYA,SAAW,QAAU,OAE3E,GAAK,SAAWA,SAAW,CACvB,GAAKslC,IAAM,CACPA,IAAI7sB,SACJ6sB,IAAM,WAEP,GAAKA,IAAM,CACdA,IAAI9vB,YAAa,4BAA6BtkB,SAAU,UAAY8O,UACpE,GAAKhI,KAAO,CACRstC,IAAIttC,KAAMA,WAEX,CACHqtC,IAAM16C,KAAKk6C,OAAO9nC,KAAM,2BAA4B2I,QACpD4/B,IAAM32C,EAAG,WACDgS,KAAQ,IACRskC,MAAS,iEAAmEjlC,WAE/EiB,KAAM,QAAUtS,EAAE0B,OAAO0jB,GAAK,MAAO,QACrC/b,KAAMA,MAAQrN,KAAK4I,QAAQmxC,cAAgB,IAC3CrhB,UAAWgiB,KAGpB16C,KAAKm6C,mBAAqBQ,QAhHlC,CAoHI5+B,OAAQ/b,OAEZ,SAAWgE,EAAG5H,OAAQ2D,WAEtBiE,EAAEkrB,OAAQ,iBACNtmB,SAGIkxC,SAAU,OACVC,aAAc,QACdC,aAAc,IACdC,QAAS,MAIbnM,sBAAuB,WACnB9tC,KAAK46C,aAAe,KACpB,GAAK56C,KAAK4I,QAAQoxC,aAAe,CAC7Bh6C,KAAKomB,QACA1a,KAAM,6BACNA,KAAM,yBAA0B1L,KAAK4I,QAAQoxC,gBAI1Da,sBAAuB,WACnB76C,KAAK46C,aAAe,OAQxBE,oBAAqB,SAAUtyC,OAC3B,IAAIuyC,MACA3kC,QAAUpS,EAAGwE,MAAMkB,QAAS+E,QAASjG,MAAM+Y,OAAS,SAAW,IAAM,QAEzE,GAAKnL,QAAQnZ,SAAWmZ,QAAQ1H,QAAS,cAAiB,CACtDqsC,SACAA,MAAO,QAAU/2C,EAAE0B,OAAO0jB,GAAK,eACzBplB,EAAE0B,OAAOsL,SAAS5B,QAAQsG,iBAAqB,eACjD1R,EAAE0B,OAAOgH,wBACbquC,MAAO,QAAU/2C,EAAE0B,OAAO0jB,GAAK,aAAgB,UAC/ChT,QAAQE,KAAMykC,SAItBvpB,QAAS,WACL,IAAI3R,KAAO7f,KAAKomB,QACZsb,KAAO1hC,KAAK4I,QAGhBiX,KAAKtZ,SAAU,aACV8zC,UAAWr2C,EAAG,UAGX0pC,KAAS,SACT4M,MAAU,yCACF5Y,KAAKuY,QAAU,iBAAmB,OAGlDj2C,EAAE0J,OAAQ1N,MACN46C,aAAc,MACdV,OAAQr6B,KAAK7E,WACbm/B,mBAAoB,OAGxBn6C,KAAKoxB,IAAKvR,MACNm7B,OAAQ,sBACRC,OAAQ,sBACR1N,eAAgB,wBAChBD,eAAgB,0BAGpBttC,KAAKo6C,aAAc1Y,KAAKoY,WAG5B/nB,YAAa,SAAUnpB,SACnB,IAAI2xC,oBAAqBC,gBACrBC,YAAcz6C,KAAK4I,QAEvB,GAAKA,QAAQqxC,UAAYl6C,UAAY,CACjCC,KAAKk6C,OAAOj7B,YAAa,kBAAmBrW,QAAQqxC,SAGxD,GAAKrxC,QAAQoxC,eAAiBj6C,UAAY,CACtC,GAAKiE,EAAE0B,OAAO8I,WAAY,KAAQxO,KAAKomB,QAAS,GAAM,CAClDq0B,YAAYT,aAAepxC,QAAQoxC,aACnCh6C,KAAK8tC,yBAIb,GAAKllC,QAAQmxC,eAAiBh6C,UAAY,CACtCw6C,oBAAsBE,YAAYX,SAClCU,gBAAkB5xC,QAAQmxC,aAG9B,GAAKnxC,QAAQkxC,WAAa/5C,UAAY,CAClCw6C,oBAAsB3xC,QAAQkxC,SAGlC,GAAKS,oBAAsB,CACvBv6C,KAAKo6C,aAAcG,oBAAqBC,iBAG5Cx6C,KAAK4vB,OAAQhnB,UAGjBwxC,aAAc,SAAU/kC,SAAUhI,MAC9B,IAAIqtC,IACAC,IAAM36C,KAAKm6C,mBAGf9kC,SAAW,SAAWA,SAAW,OAAS,UAAYA,SAAW,QAAU,OAE3E,GAAK,SAAWA,SAAW,CACvB,GAAKslC,IAAM,CACPA,IAAI7sB,SACJ6sB,IAAM,WAEP,GAAKA,IAAM,CACdA,IAAI9vB,YAAa,4BAA6BtkB,SAAU,UAAY8O,UACpE,GAAKhI,KAAO,CACRstC,IAAIttC,KAAMA,WAEX,CACHqtC,IAAM16C,KAAKk6C,OAAO9nC,KAAM,2BAA4B2I,QACpD4/B,IAAM32C,EAAG,WACD0pC,KAAQ,SACR13B,KAAQ,IACRskC,MAAS,iEAAmEjlC,WAE/EhI,KAAMA,MAAQrN,KAAK4I,QAAQmxC,cAAgB,IAC3CrhB,UAAWgiB,KAChB16C,KAAKoxB,IAAKupB,KAAOO,MAAO,UAG5Bl7C,KAAKm6C,mBAAqBQ,KAI9BxjB,MAAO,WACH,IAAIgkB,KAAOn3C,EAAE0B,OAAOsL,SAAS5B,QAE7B,GAAKpP,KAAK46C,aAAe,CACrB56C,KAAK46C,aAAe,MAIpB,GAAK52C,EAAE0B,OAAOiH,sBAAwBwuC,KAAKtoC,YAAc,EAAI,CACzD7O,EAAE0B,OAAO+J,WACN,CACHzL,EAAE0B,OAAOmpB,cAAc1gB,cAAe,cAtJtD,CA4JI4N,OAAQ/b,OAEZ,SAAWgE,EAAGjE,WAEd,IAAIq7C,eAAiB,WAGjBC,aAAe,SAAUC,SACrB,MAAS,gBAAmBA,UAAY,KAAO,OAASA,UAGhEt3C,EAAEkrB,OAAQ,sBACNtmB,SACIwkC,SAAU,MACVmO,cAAe,KACfC,gBAAiB,KACjBC,UAAW,KACXC,QAAS,2BACTC,cAAe,KACfC,aAAc,KACdN,QAAS,KACT5mB,MAAO,KACPyY,aAAc,KACd0O,MAAO,KACP5B,QAAS,KACT6B,KAAM,MAGVtqB,QAAS,WACL,IAAI3R,KAAO7f,KAAKomB,QACZ9B,IACIy3B,UAAWl8B,KACNpR,QAAS,oCACN,mCACEzK,EAAE0B,OAAOs2C,eAAiB,2BACxB,KACPz1C,SAAU,uBAGvBvG,KAAKoG,IAAMke,GACXtkB,KAAKi8C,iBAAmBj8C,KAAKk8C,YAAal8C,KAAK4I,SAE/C,GAAK5I,KAAK4I,QAAQwkC,SAAW,CACzB9oB,GAAGo3B,QAAU17C,KAAKomB,QAAQpL,SAAU,2BACpCsJ,GAAGisB,QAAUjsB,GAAGo3B,QAAQ5nB,OACxBxP,GAAG63B,OAAS73B,GAAGo3B,QAAQ1gC,WACvBsJ,GAAG83B,OAAS93B,GAAG63B,OAAOnhC,SAAU,sCAC7B,CACHhb,KAAKqtC,SAAUxtB,KAAMyE,IAGzBtkB,KAAKoxB,IAAK9M,GAAGo3B,SACT7S,IAAO,WACHvkB,GAAGo3B,QAAQtpC,KAAM,KAAM2I,QAAQxU,SAAUvC,EAAE0B,OAAOolB,iBAGtDowB,MAAS,SAAU1yC,OACfxI,KAAKq8C,uBAAwB/3B,GAAGo3B,QAAQr1C,SAAU,qCAClDmC,MAAM0N,iBACN1N,MAAMs+B,sBAMlBoV,YAAa,SAAUtzC,SACnB,IAAIgC,IACAmxC,UAAY/7C,KAAKoG,IAAI21C,UACrBO,gBAAkBt8C,KAAKoG,IAAIk2C,gBAG/B1zC,QAAU5E,EAAE0J,UAAY9E,SAExB,GAAKmzC,UAAU9+C,SAAWq/C,gBAAkB,CACxCt8C,KAAKoG,IAAIk2C,gBACTA,gBAAkBP,UAAUr/C,KAAM,yBAGtC,IAAMkO,OAAOhC,QAAU,CAKnBA,QAASgC,KACHhC,QAASgC,MAAS,KAAShC,QAASgC,KACtC,gBAAsB0xC,gBAAgB1zC,QAASgC,KAC/CmxC,UAAU9+C,OAAS+G,EAAE0B,OAAO4Z,aAAcy8B,UAAW,GACjDnxC,IAAInG,QAAS22C,eAAgB,OAAQh6C,eACzC,KAEJ,GAAK,MAAQwH,QAASgC,KAAQ,CAC1BhC,QAASgC,KAAQ5G,EAAE0B,OAAO62C,YAAYrI,SAAUtpC,MAIxD,OAAOhC,SAGX4zC,sBAAuB,SAAUrZ,OAAQ1kC,OACrC,OAASA,MAAUA,QAAU,OAAS,GAAK0kC,OAAS1kC,MAAU,IAGlE4uC,SAAU,SAAUxtB,KAAMyE,IACtB,IAAIm4B,UACA/a,KAAO1hC,KAAKi8C,iBACZS,kBAAoB18C,KAAKw8C,sBAAuB,WAAY9a,KAAKyL,cAErEttB,KAAKtZ,SAAU,mBACTm7B,KAAKma,MAAQ,wBAA0B,KACvCna,KAAKma,OAASna,KAAKuY,QAAU,iBAAmB,KAChDyC,kBAAoB,iCAAmC,KAC7Dp4B,GAAGq4B,gBAAkB98B,KAAK7E,SAAUhb,KAAK4I,QAAQ8yC,SAAU3gC,QAC3DuJ,GAAGisB,QAAU1wB,KACRw6B,UAAW,QACR,iCACAqC,kBAAoB,YACvB1hC,SAAU,2BACfsJ,GAAGo3B,QAAUp3B,GAAGq4B,gBAGhB,GAAKr4B,GAAGo3B,QAAQp1C,GAAI,UAAa,CAC7Bge,GAAGo3B,QAAU13C,EAAG,uBAAwBsgB,GAAGo3B,QAAQ/tB,OAAQ,UAC3DrJ,GAAGs4B,YAAc54C,EAAG,oDAA+C8zB,aAAcxT,GAAGq4B,iBACpFr4B,GAAGq4B,gBAAgB7uB,SAGvB2uB,UAAc/a,KAAK+Z,UAAc/Z,KAAKia,cAAgB,WAAaja,KAAKia,cAAgB,GAClFja,KAAKka,aAAe,WAAala,KAAKka,aAAe,GAE3Dt3B,GAAG83B,OAASp4C,EAAG,uDACfsgB,GAAG63B,OAAS73B,GAAGo3B,QACVmB,SAEAt2C,SAAU,0BACVuzB,OAAQxV,GAAG83B,QACX/B,UAAW,0DACXjoC,KAAM,KACF2I,QACAxU,SAAU,WACLk2C,UAAYA,UAAY,IAAM,KAC9BA,UAAYpB,aAAc3Z,KAAK4Z,SAC7B,IAAM,IACVt7C,KAAKw8C,sBAAuB,UAAW9a,KAAKhN,OAAU,KACpDgN,KAAKoa,KAAO,WAAa,KAGvCx3B,GAAGo3B,QAAQ5jB,aAAcxT,GAAGisB,SAE5BvwC,KAAKq8C,sBAAuBr8C,KAAK4I,QAAQ6yC,WAEzC,OAAOn3B,IAGXw4B,QAAS,WACL98C,KAAK+8C,cAAe/8C,KAAK4I,SACzB5I,KAAKi8C,iBAAmBj8C,KAAKk8C,YAAal8C,KAAK4I,UAGnDm0C,cAAe,SAAUn0C,SACrB,IAAIo0C,YAAaC,SAAUC,SAAUC,WAAYC,QAC7Cv9B,KAAO7f,KAAKomB,QACZq0B,YAAcz6C,KAAKi8C,iBACnB33B,GAAKtkB,KAAKoG,IACV+1C,OAAS73B,GAAG63B,OACZC,OAAS93B,GAAG83B,OACZ1a,KAAO1hC,KAAKk8C,YAAatzC,SAK7B,GAAKA,QAAQ6yC,YAAc17C,UAAY,CACnCC,KAAKq8C,sBAAuBzzC,QAAQ6yC,WAGxCuB,YAAcn9B,KAAKxZ,SAAU,4BAK7B,GAAK22C,YAAc,CACf,GAAKtb,KAAK6Z,gBAAkBx7C,UAAY,CACpCq8C,OAAO/uC,KAAMq0B,KAAK6Z,oBAEnB,CACH,GAAK7Z,KAAK8Z,kBAAoBz7C,UAAY,CACtCq8C,OAAO/uC,KAAMq0B,KAAK8Z,kBAO1B4B,QAGM1b,KAAKia,gBAAkB57C,UAAY2hC,KAAKia,gBAAkB,MAGxDlB,YAAYkB,gBAAkB,MAOtC,KAAQja,KAAK4Z,UAAYv7C,WACrB2hC,KAAKia,gBAAkB57C,WACvB2hC,KAAKka,eAAiB77C,WAAc,CAGpCo8C,OAAOtxB,aAAewwB,aAAcZ,YAAYa,UAC3Cj6B,OAAUo5B,YAAYmB,cACjB,WAAanB,YAAYmB,kBAC9Bv6B,OAAUo5B,YAAYkB,eACjB,WAAalB,YAAYkB,mBAC9Bl6B,KAAM,MAGX,GAAK27B,QAAU,CACXjB,OAAO51C,UACD80C,aAAc3Z,KAAK4Z,UAAYv7C,UAC7B2hC,KAAK4Z,QAAUb,YAAYa,UAC1Bj6B,OAAQ27B,aACH,YAAetb,KAAKia,gBAAkB57C,UACpC2hC,KAAKia,cACLlB,YAAYkB,iBACd,YAAeja,KAAKka,eAAiB77C,UACnC2hC,KAAKka,aACLnB,YAAYmB,gBACnBn6B,KAAM,OAIvB,GAAKigB,KAAKhN,QAAU30B,UAAY,CAC5Bm9C,SAAWl9C,KAAKw8C,sBAAuB,UAAW/B,YAAY/lB,OAC9DuoB,SAAWj9C,KAAKw8C,sBAAuB,UAAW9a,KAAKhN,OACvDynB,OAAOtxB,YAAaqyB,UAAW32C,SAAU02C,UAG7C,GAAKvb,KAAKyL,eAAiBptC,UAAY,CACnCm9C,SAAWl9C,KAAKw8C,sBAAuB,WACnC/B,YAAYtN,cAChB8P,SAAWj9C,KAAKw8C,sBAAuB,WACnC9a,KAAKyL,cACT7oB,GAAGisB,QAAQ1lB,YAAaqyB,UAAW32C,SAAU02C,UAGjD,GAAKvb,KAAKma,QAAU97C,UAAY,CAC5B8f,KAAKZ,YAAa,uBAAwByiB,KAAKma,OAC/CsB,cAAiBzb,KAAKma,QAAWna,KAAKuY,SAAWQ,YAAYR,UAGjE,GAAKvY,KAAKuY,UAAYl6C,UAAY,CAC9Bo9C,cAAiBzb,KAAKuY,UAAavY,KAAKma,OAASpB,YAAYoB,QAGjE,GAAKsB,aAAep9C,UAAY,CAC5B8f,KAAKZ,YAAa,gBAAiBk+B,YAGvC,GAAKzb,KAAKoa,OAAS/7C,UAAY,CAC3Bo8C,OAAOl9B,YAAa,UAAWyiB,KAAKoa,QAI5C/pB,YAAa,SAAUnpB,SACnB5I,KAAK+8C,cAAen0C,SACpB5I,KAAK4vB,OAAQhnB,SACb5I,KAAKi8C,iBAAmBj8C,KAAKk8C,YAAal8C,KAAK4I,UAGnDyzC,sBAAuB,SAAUgB,YAC7B,IAAI3b,KAAO1hC,KAAKi8C,iBACZ33B,GAAKtkB,KAAKoG,IAEdke,GAAG83B,OAAO/uC,KAAMgwC,WAAa3b,KAAK6Z,cAAgB7Z,KAAK8Z,iBACvDl3B,GAAGo3B,QACEz8B,YAAa,mCAAoCo+B,YACjDjrC,KAAM,KAAM2I,QACZkE,YAAa,WAAayiB,KAAKka,cAAeyB,YAG9Cp+B,YAAa,WAAayiB,KAAKia,cAAiB0B,YAAc3b,KAAKka,eAAiBla,KAAKia,eACzF9wB,YAAa7mB,EAAE0B,OAAOolB,gBAE3B9qB,KAAKomB,QAAQnH,YAAa,2BAA4Bo+B,YACtD/4B,GAAGisB,QACEtxB,YAAa,mCAAoCo+B,YACjD/mC,KAAM,cAAe+mC,YACrB9jC,QAAS,gBACdvZ,KAAK4I,QAAQ6yC,UAAY4B,WACzBr9C,KAAKyxB,SAAU4rB,WAAa,WAAa,WAG7CC,OAAQ,WACJt9C,KAAKq8C,sBAAuB,QAGhCkB,SAAU,WACNv9C,KAAKq8C,sBAAuB,OAGhCzqB,SAAU,WACN,IAAItN,GAAKtkB,KAAKoG,IACVs7B,KAAO1hC,KAAK4I,QAEhB,GAAK84B,KAAK0L,SAAW,CACjB,OAGJ,GAAK9oB,GAAGs4B,YAAc,CAClBt4B,GAAGq4B,gBAAgB7kB,aAAcxT,GAAGs4B,aACpCt4B,GAAGs4B,YAAY9uB,SACfxJ,GAAGo3B,QAAQ5tB,aACR,CACHxJ,GAAG83B,OAAOtuB,SACVxJ,GAAGo3B,QACE7wB,YAAa,2DACb7P,WACIwiC,WACIC,SAGjBn5B,GAAG63B,OAAOqB,WAAWC,SACrBn5B,GAAGisB,QAAQiN,WAAWC,SACtBz9C,KAAKomB,QACAyE,YAAa,2CACV,uEAQhB7mB,EAAE0B,OAAO62C,YAAYrI,UACjBqH,cAAe,4BACfC,gBAAiB,8BACjBG,cAAe,OACfxO,aAAc,UACdyO,aAAc,QACdN,QAAS,OACTO,MAAO,KACP5B,QAAS,KACTvlB,MAAO,UACPonB,KAAM,QAvVV,CA0VI//B,SAEJ,SAAW/X,EAAGjE,WAEd,IAAI29C,oBAAsB,uBAC1B,SAASC,cAAeryB,UACpB,IAAI3tB,MACAV,OAASquB,SAASruB,OAClBgV,UAEJ,IAAMtU,MAAQ,EAAGA,MAAQV,OAAQU,QAAU,CACvC,IAAM2tB,SAAU3tB,OAAQ0hB,UAAU7d,MAAOk8C,qBAAwB,CAC7DzrC,OAAO9U,KAAMmuB,SAAU3tB,SAI/B,OAAOqG,EAAGiO,QAGdjO,EAAE0B,OAAOmkB,UAAU+zB,qBACfC,aAAc,SAAUC,KAAM/sB,QAC1B,IAAIgtB,SAEJ,GAAKhtB,OAAS,CACVgtB,SAAWJ,cAAeG,UACvB,CACHC,SAAWD,KAAKj8B,OAAQ,YACxB,GAAKk8B,SAAS9gD,SAAW,EAAI,CACzB8gD,SAAWJ,cAAeG,OAIlC,OAAOC,UAGXC,qBAAsB,SAAUF,KAAMG,UAAWltB,QAC7C+sB,KAAKjzB,YAAa,gCAClBozB,UAAUl4B,GAAI,GAAIxf,SAAU,kBAAmB23C,MAAMC,OAAO53C,SAAU,iBACtE,IAAMwqB,OAAS,CACX/wB,KAAKomB,QAAQ7M,QAAS,kBAI9B6kC,wBAAyB,SAAUN,MAC/BA,KAAKjzB,YAAa,mCA1C1B,CA8CI9O,SAEJ,SAAW/X,EAAGjE,WAEd,IAAIs+C,0BAA4B,wBAA0Br6C,EAAE0B,OAAO62C,YAAYnvB,aAE/EppB,EAAEkrB,OAAQ,wBAAyBlrB,EAAE0J,QAKjC0f,aAAc,mEAEdxkB,QAAS5E,EAAE0J,QACP0/B,SAAU,OACXppC,EAAE0B,OAAO62C,YAAYrI,UAExBoK,yBAA0B,SAAU91C,OAChC,IAAI+1C,mBAAqBv6C,EAAGwE,MAAMkB,QAAS+E,QAAS,mBAEpD,GAAK8vC,mBAAmBl2B,SAAS/hB,GAAI,4DAA+D,CAChGi4C,mBACKC,SAAU,kDACVjC,YAAa,cAI1B/qB,QAAS,WACL,IAAI3R,KAAO7f,KAAKomB,QACZsb,KAAO1hC,KAAK4I,QAEhB5E,EAAE0J,OAAQ1N,MACNy+C,SAAU,KAGd,IAAM/c,KAAK0L,SAAW,CAClBvtB,KAAKtZ,SAAU,sBACXvG,KAAKw8C,sBAAuB,kBAAmB9a,KAAKhN,OAAU,KAC5DgN,KAAKuY,SAAWvY,KAAKma,MAAQ,iBAAmB,KACtD77C,KAAKomB,QAAQhU,KAAMpO,EAAE0B,OAAO62C,YAAYnvB,cAAemvB,cAG3Dv8C,KAAKoxB,IAAKvR,MAAQ6+B,kBAAmB,8BAGzClC,sBAAuB,SAAUrZ,OAAQ1kC,OACrC,OAASA,MAAUA,QAAU,OAAS,GAAK0kC,OAAS1kC,MAAU,IAGlEoyB,MAAO,WACH7wB,KAAK2+C,SAAU,MAIf3+C,KAAKomB,QACApL,SAAUqjC,2BACVx8B,OAAQ,+BACR06B,YAAa,WAGtBxqB,YAAa,SAAUnpB,SACnB,IAAIgX,IAAKu9B,WACLt9B,KAAO7f,KAAKomB,QACZw4B,WAAa5+C,KAAKw8C,sBAAuB,kBAAmB5zC,QAAQ8rB,OAExE,GAAKkqB,WAAa,CACd/+B,KACKgL,YAAa7qB,KAAKw8C,sBAAuB,kBAAmBx8C,KAAK4I,QAAQ8rB,QACzEnuB,SAAUq4C,YAGnB,GAAKh2C,QAAQizC,QAAU97C,UAAY,CAC/Bo9C,cAAiBv0C,QAAQizC,QAAWjzC,QAAQqxC,SAAWj6C,KAAK4I,QAAQqxC,UAGxE,GAAKrxC,QAAQqxC,UAAYl6C,UAAY,CACjCo9C,cAAiBv0C,QAAQqxC,UAAarxC,QAAQizC,OAAS77C,KAAK4I,QAAQizC,QAGxE,GAAKsB,aAAep9C,UAAY,CAC5B8f,KAAKZ,YAAa,gBAAiBk+B,YAGvCv9B,IAAM5f,KAAK4vB,OAAQhnB,SACnB5I,KAAKomB,QAAQpL,SAAU,uBAAwBuhC,YAAa,WAC5D,OAAO38B,KAGXgS,SAAU,WACN,IAAI5G,GAAKhrB,KAAKomB,QAEdpmB,KAAKo+C,wBAAyBpzB,GAAGhQ,SAAUqjC,4BAC3CrzB,GACKH,YAAa,oCACV7qB,KAAKw8C,sBAAuB,kBAAmBx8C,KAAK4I,QAAQ8rB,QAC/D1Z,SAAU,uBACVuhC,YAAa,YAGtBoC,SAAU,SAAU5tB,QAChB,IAAI8tB,kBAAoB7+C,KAAKomB,QAAQpL,SAAUqjC,2BAE/Cr+C,KAAKomB,QAAQhU,KAAMpO,EAAE0B,OAAO62C,YAAYnvB,cAAeC,IAAK,mBAAoBkvB,cAEhFv8C,KAAKg+C,qBAAsBa,kBAAmB7+C,KAAK69C,aAAcgB,kBAAmB9tB,QAAUA,SAGlG+rB,QAAS,WACL98C,KAAK2+C,SAAU,SAEpB36C,EAAE0B,OAAOmkB,UAAU+zB,uBA5GtB,CA8GI7hC,SAEJ,SAAW/X,EAAGjE,WAGdiE,EAAEC,GAAGspB,aAAe,WAChB,OAAOvtB,KAAKuG,SAAU,sBAJ1B,CAOIwV,SAEJ,SAAW/X,EAAGjE,WAEdiE,EAAEC,GAAG66C,KAAO,SAAUl2C,SAClB,OAAO5I,KAAKmf,KAAK,WAEb,IAAI4oB,MAAQ/jC,EAAGhE,MACX7B,EAAI6F,EAAE0J,QACFoxC,KAAM,MACPl2C,SACHm2C,MAAQhX,MAAM/sB,WACdgkC,UAAaC,KAAK,EAAGlkB,EAAE,EAAGgL,EAAE,EAAGhoC,EAAE,EAAGC,EAAE,GACtC8gD,KAAO3gD,EAAE2gD,KACTI,SACAC,OAEA,IAAML,KAAO,CACT,GAAKC,MAAM9hD,QAAU,EAAI,CACrB,IAAMkiD,UAAUH,SAAW,CACvB,GAAKA,SAAUG,UAAaJ,MAAM9hD,OAAS,CACvC6hD,KAAOK,aAGZ,CACHL,KAAO,IACP/W,MAAMxhC,SAAU,gBAGxB24C,SAAWF,SAASF,MAExB/W,MAAMxhC,SAAU,WAAau4C,MAE7BC,MAAMl9B,OAAQ,cAAgBq9B,SAAW,QAAS34C,SAAU,cAE5D,GAAK24C,SAAW,EAAI,CAChBH,MAAMl9B,OAAQ,cAAgBq9B,SAAW,QAAS34C,SAAU,cAEhE,GAAK24C,SAAW,EAAI,CAChBH,MAAMl9B,OAAQ,cAAgBq9B,SAAW,QAAS34C,SAAU,cAEhE,GAAK24C,SAAW,EAAI,CAChBH,MAAMl9B,OAAQ,cAAgBq9B,SAAW,QAAS34C,SAAU,cAEhE,GAAK24C,SAAW,EAAI,CAChBH,MAAMl9B,OAAQ,cAAgBq9B,SAAW,QAAS34C,SAAU,mBA3CxE,CA+CIwV,SAEJ,SAAW/X,EAAGjE,WAEdiE,EAAEkrB,OAAQ,iBACNtmB,SACI0yC,QAAS,MACTwD,KAAM,MAGVttB,QAAS,WAEL,IAAI4tB,QAAUp/C,KAAKomB,QACfi5B,SAAWD,QAAQhtC,KAAM,aACzBkpC,QAAU+D,SAASx9B,OAAQ,kBAAmB5kB,OAAS+C,KAAK4I,QAAQ0yC,QAAUv7C,UAElFq/C,QAAQ74C,SAAU,aACb+P,KAAM,OAAQ,cACdlE,KAAM,MACNkb,iBACAwxB,MAAOA,KAAM9+C,KAAK4I,QAAQk2C,OAE/BO,SACKlgC,KAAM,WACH,IAAImgC,KAAOt7C,EAAE0B,OAAO4Z,aAActf,KAAM,QACpC00B,MAAQ1wB,EAAE0B,OAAO4Z,aAActf,KAAM,SACrCu/C,QAAU,SAEd,GAAK7qB,MAAQ,CACT6qB,SAAW,WAAa7qB,MAE5B,GAAK4qB,KAAO,CACRC,SAAW,YAAcD,KAAO,gBAAkBhE,QAEtDt3C,EAAGhE,MAAOuG,SAAUg5C,WAG5BH,QAAQh9B,SAAU,IAAK,SAAU,WAC7B,IAAIyS,UAAY7wB,EAAGhE,MAEnB,KAAQ60B,UAAUxuB,SAAU,sBAIxBwuB,UAAUxuB,SAAU,gBACpBwuB,UAAUxuB,SAAUrC,EAAE0B,OAAOolB,iBAAqB,CAElDu0B,SAASx0B,YAAa7mB,EAAE0B,OAAOolB,gBAC/B+J,UAAUtuB,SAAUvC,EAAE0B,OAAOolB,gBAG7B9mB,EAAGnC,UAAW2C,IAAK,WAAY,WAC3BqwB,UAAUhK,YAAa7mB,EAAE0B,OAAOolB,qBAM5Cs0B,QAAQ3wC,QAAS,YAAalP,KAAM,iBAAkB,WAClD8/C,SAASx9B,OAAQ,qBAAsBtb,SAAUvC,EAAE0B,OAAOolB,sBAzDtE,CA8DI/O,SAEJ,SAAW/X,EAAGjE,WAEd,IAAIy/C,QAAUx7C,EAAE0B,OAAO4Z,aAEvBtb,EAAEkrB,OAAQ,kBAAmBlrB,EAAE0J,QAE3B9E,SACI8rB,MAAO,KACP+qB,WAAY,KACZC,aAAc,KACdJ,KAAM,UACNK,UAAW,UACXC,WAAY,KACZ3F,QAAS,KACT4F,OAAQ,KACRhE,MAAO,OAGXrqB,QAAS,WACL,IAAImI,EAAI35B,KACJ8/C,gBAAkB,GAEtBA,iBAAmBnmB,EAAE/wB,QAAQizC,MAAQ,qBAAuB,GAE5D,KAAOliB,EAAE/wB,QAAQizC,MAAQ,CACrBiE,iBAAmBnmB,EAAE/wB,QAAQqxC,QAAU,iBAAmB,GAC1D6F,iBAAmBnmB,EAAE/wB,QAAQi3C,OAAS,aAAe,GAIzDlmB,EAAEvT,QAAQ7f,SAAU,eAAiBu5C,iBAErCnmB,EAAEmjB,QAAS,OAIfiD,2BAA4B,SAAUx1B,IAAKy1B,SAAUC,OAAQC,QACzD,IAAIC,QACJA,KAAMF,QAAWE,KAAMD,QAAW,KAClC,MAAQ31B,IAAM,CACV,GAAK41B,KAAM51B,IAAI9D,UAAa,CACxB,OAAO8D,IAEXA,IAAMA,IAAKy1B,UAEf,OAAO,MAGXI,iBAAkB,SAAUC,YACxB,IAAItjD,EAAGypB,IAAKif,IAAM4a,WAAWpjD,OAC7B,IAAMF,EAAI,EAAGA,EAAI0oC,IAAK1oC,IAAM,CACxBypB,IAAMxiB,EAAGhE,KAAK+/C,2BAA4BM,WAAYtjD,GAAIu6B,WAAY,cAAe,MAAO,QAC5F,GAAK9Q,IAAIvpB,OAAS,CACd+G,EAAGhE,KAAK+/C,2BAA4Bv5B,IAAK,GAAIE,WAAY,aAAc,KAAM,OAASngB,SAAUigB,IAAIngB,SAAU,cAAiB,iBAAmB,sBAK9Ji6C,sBAAuB,SAAU/1B,IAAK01B,OAAQC,QAC1C,IAAIK,WACAJ,QACJA,KAAMF,QAAWE,KAAMD,QAAW,KAClC31B,IAAMA,IAAI+M,WACV,MAAQ/M,IAAM,CACV,GAAK41B,KAAM51B,IAAI9D,UAAa,CACxB85B,QAAQpjD,KAAMotB,KAElBA,IAAMA,IAAIi2B,YAEd,OAAOx8C,EAAGu8C,UAGdE,uBAAwBz8C,EAAE2tB,KAC1B+uB,sBAAuB18C,EAAE2tB,KAEzBmrB,QAAS,SAAU/rB,QACf,IAAI4vB,YAAaC,IAAKC,MAAOC,KAAMC,UAAWC,UAAWC,SAAU3B,KAAMvkB,EACrEmmB,UAAWC,WAAYC,cAAe3iD,MAAO0/C,KAAMkD,WAAYC,gBAAiBC,UAChFC,eAAgB9B,aAAc+B,GAC9BtjD,EAAI6B,KAAK4I,QACT84C,MAAQ1hD,KAAKomB,QACbu7B,KAAO39C,EAAEyiB,SAAUi7B,MAAO,GAAK,MAC/BjxC,MAAQixC,MAAMprC,KAAM,SACpBsrC,iBACAC,aAAeH,MAAMtvC,KAAM,gBAC3BqtC,WAAaD,QAASkC,MAAO,GAAK,eAAkB1hD,KAAK4I,QAAQ62C,WACjEqC,gBAAkBrC,WAAa,WAAaA,WAAa,kBAE7D,GAAKthD,EAAEu2B,MAAQ,CACXgtB,MAAMn7C,SAAU,kBAAoBpI,EAAEu2B,OAI1C,GAAKitB,KAAQlxC,OAASA,QAAU,GAAM,CAClC0wC,WAAaz/C,SAAU+O,MAAO,IAAO,EACrCixC,MAAM77B,IAAK,gBAAiB,iBAAmBs7B,YAGnDnhD,KAAKygD,yBAELgB,GAAKzhD,KAAKsgD,sBAAuBoB,MAAO,GAAK,KAAM,MAEnD,IAAMd,IAAM,EAAGC,MAAQY,GAAGxkD,OAAQ2jD,IAAMC,MAAOD,MAAQ,CACnDE,KAAOW,GAAG17B,GAAI66B,KACdG,UAAY,GAEZ,GAAKhwB,QAAU+vB,KAAM,GAAIzhC,UAAUqc,OAAQ,sCAAyC,EAAI,CACpFX,EAAI/6B,KAAKsgD,sBAAuBQ,KAAM,GAAK,IAAK,KAChDI,UAAc1B,QAASsB,KAAM,GAAK,UAAa,eAC/CriD,MAAQqiD,KAAKxqC,KAAM,SACnB0qC,UAAYxB,QAASsB,KAAM,GAAK,SAEhC,GAAK/lB,EAAE99B,QAAU89B,EAAG,GAAI1b,UAAUqc,OAAQ,cAAiB,IAAMwlB,UAAY,CACzED,SAAWzB,QAASsB,KAAM,GAAK,QAC/BxB,KAAS2B,WAAa,MAAU,MAAUA,UAAY9iD,EAAEmhD,KAGxDvkB,EAAElQ,YAAa,WAEf81B,YAAc,SAEd,GAAKK,UAAY,CACbL,aAAe,WAAaK,UAGhC,GAAKjmB,EAAE99B,OAAS,EAAI,CAChB8jD,UAAY,gBAEZ5C,KAAOpjB,EAAEojB,OACTkD,WAAa7B,QAASrB,KAAM,GAAK,UAAahgD,EAAEyhD,YAAcJ,QAASsB,KAAM,GAAK,QAAS,MAC3FQ,gBAAkBD,WAAa,WAAaA,WAAa,GACzDE,UAAY/B,QAASrB,KAAM,GAAK,SAAYqB,QAASsB,KAAM,GAAK,SAAY3iD,EAAEwhD,UAC9E6B,eAAiB,qCAAuCD,UAAYD,gBAEpEnD,KACK7nC,KAAM,QAAStS,EAAEiqC,KAAMkQ,KAAKzwB,mBAC5BnnB,SAAUi7C,gBACVO,QAGLhnB,EAAIA,EAAEhgB,aACH,GAAKukC,KAAO,CACfqB,aAAe,8BAAgCrB,KAInDvkB,EAAEx0B,SAAUo6C,kBACT,GAAKO,UAAY,CACpBxB,aAAiBF,QAASsB,KAAM,GAAK,UAAa3iD,EAAEuhD,cAAgBvhD,EAAEu2B,MAEtEqsB,UAAY,yBAA4BrB,aAAeA,aAAe,WAEtEoB,KAAKxqC,KAAM,OAAQ,gBAChB,GAAKykB,EAAE99B,QAAU,EAAI,CACxB8jD,UAAY,yBAA4BC,UAAYA,UAAY,WAEpE,GAAKW,IAAMljD,MAAQ,CACf2iD,cAAgB1/C,SAAUjD,MAAQ,IAAO,EAEzCqiD,KAAKj7B,IAAK,gBAAiB,iBAAmBu7B,gBAStD,IAAMQ,cAAeb,WAAc,CAC/Ba,cAAeb,cAGnBa,cAAeb,WAAY5jD,KAAM2jD,KAAM,IAS3C,IAAMC,aAAaa,cAAgB,CAC/B59C,EAAG49C,cAAeb,YAAcx6C,SAAUw6C,WAG9Cc,aAAa1iC,KAAM,WACfnb,EAAGhE,MAAOyO,QAAS,MAAOlI,SAAU,qBAExC,GAAKu7C,gBAAkB,CACnBD,aAAax0B,IAAK,uBAAwB9mB,SAAUu7C,iBAIxD9hD,KAAKogD,iBAAkBqB,IACvBzhD,KAAKogD,iBAAkBqB,GAAGrvC,KAAM,YAEhCpS,KAAK0gD,wBAEL1gD,KAAKg+C,qBAAsByD,GAAIzhD,KAAK69C,aAAc4D,GAAI1wB,QAAUA,UAErE/sB,EAAE0B,OAAOmkB,UAAU+zB,uBAxMtB,CA0MI7hC,SAEJ,SAAW/X,EAAGjE,WAEd,SAASiiD,4BAA6BC,KAElC,IAAI50C,KAAOrJ,EAAEiqC,KAAMgU,IAAI50C,SAAY,KAEnC,IAAMA,KAAO,CACT,OAAO,KAIXA,KAAOA,KAAK7N,MAAO,EAAG,GAAI64B,cAE1B,OAAOhrB,KAGXrJ,EAAEkrB,OAAQ,kBAAmBlrB,EAAE0B,OAAOw8C,UAClCt5C,SACIu5C,aAAc,MACdC,qBAAsBJ,6BAG1BvB,uBAAwB,WACpB,GAAKzgD,KAAK4I,QAAQu5C,aAAe,CAC7BniD,KAAKqiD,mBACLriD,KAAK6vB,YAAapY,aAI1B4qC,iBAAkB,WACd,IAAItlD,EAAGulD,IAAKb,GAAIc,YACZC,gBAAkB,KAClBC,KAAOziD,KAAKomB,QACZs8B,QAEJD,KAAKznC,SAAU,mCAAoC8S,SAEnDw0B,IAAMG,KAAKznC,SAAU,MAErB,IAAMje,EAAI,EAAGA,EAAIulD,IAAIrlD,OAASF,IAAM,CAChC0kD,GAAKa,IAAKvlD,GACVwlD,YAAcviD,KAAK4I,QAAQw5C,qBAAsBp+C,EAAGy9C,KAEpD,GAAKc,aAAeC,kBAAoBD,YAAc,CAClDG,QAAU7gD,SAASmmB,cAAe,MAClC06B,QAAQ/qB,YAAa91B,SAAS8gD,eAAgBJ,cAC9CG,QAAQnjC,aAAc,QAAUvb,EAAE0B,OAAO0jB,GAAK,OAAQ,gBACtDq4B,GAAG/6B,WAAWoR,aAAc4qB,QAASjB,IAGzCe,gBAAkBD,iBAlD9B,CAuDIxmC,SAEJ,SAAW/X,EAAGjE,WAEd,IAAI6iD,SAAW,4BACXC,QAAU,+BAEd7+C,EAAEkrB,OAAQ,kBAAmBlrB,EAAE0B,OAAOw8C,UAClCt5C,SACIk6C,aAAc,OAGlBpC,sBAAuB,WACnB,IAAIqC,MAAOC,IAAKlC,KAAMmC,YAAc,KAEpCjjD,KAAK6vB,YAAapY,WAElB,GAAKzX,KAAK4I,QAAQk6C,aAAe,CAC7BC,MAAQ/iD,KAAKsgD,sBAAuBtgD,KAAKomB,QAAS,GAAK,KAAM,MAC7D,IAAM48B,IAAMD,MAAM9lD,OAAS,EAAI+lD,KAAO,EAAIA,MAAQ,CAC9ClC,KAAOiC,MAAOC,KACd,GAAKlC,KAAKzhC,UAAU7d,MAAOohD,UAAa,CACpC,GAAKK,YAAc,CACfnC,KAAKzhC,UAAYyhC,KAAKzhC,UAAY,oBAEtC4jC,YAAc,SACX,CACH,IAAMnC,KAAKzhC,UAAU7d,MAAOqhD,SAAY,CACpCI,YAAc,cA1BtC,CAkCIlnC,SAEJ,SAAW/X,EAAGjE,WAEdiE,EAAE0B,OAAOsnB,KAAO,SAAUtjB,QACtB1F,EAAG,wBAAyB0F,QAASnD,SAAU,aAHnD,CAMIwV,SAEJ,SAAW/X,EAAGjE,WAEdiE,EAAE0B,OAAOmkB,UAAUq5B,WACfC,iBAAkB,WACdnjD,KAAKoxB,IAAKpxB,KAAKomB,QAAQ3X,QAAS,SAC5Bq+B,MAAO,WACH9sC,KAAKyyB,OAAQ,gBAN7B,CAYI1W,SAMJ,SAAW/X,EAAGjE,WAEd,IAAIqjD,SAAWp/C,EAAE0B,OAAOqI,KAAK2yB,eAE7B18B,EAAEkrB,OAAQ,uBAAwBlrB,EAAE0J,QAEhC0f,aAAc,oHAEdxkB,SACI8rB,MAAO,UACPonB,KAAM,MACNuH,aAAc,KACdjW,SAAU,MACVkO,QAAS,QAGb9pB,QAAS,WACL,IAAInB,MAAQrwB,KAAKomB,QACbjoB,EAAI6B,KAAK4I,QACT06C,YAAc,SAAUjzB,MAAOkzB,UAC3B,OAAOlzB,MAAM3hB,QAAS60C,WAClBlzB,MAAM5hB,QAAS,kBAAmBC,QAAS60C,WAEnDC,MAAQxjD,KAAK4I,QAAQwkC,UAEbhnB,QAASpmB,KAAKomB,QAAQo4B,SAAU,SAChCiF,SAAU,OAEdzjD,KAAK0jD,aACTC,UAAYtzB,MAAM,GAAG9O,KACrBqiC,aAAe,MAAQD,UAAY,MACnCE,eAAiB,MAAQF,UAAY,OAEzC,GAAKA,YAAc,YAAcA,YAAc,QAAU,CACrD,OAGJ,GAAK3jD,KAAKomB,QAAQ,GAAGQ,SAAW,CAC5B5mB,KAAK4I,QAAQge,SAAW,KAG5BzoB,EAAEm9C,QAAUgI,YAAajzB,MAAO,YAC5BmzB,MAAMp9B,QAAQ9P,KAAM,QAAUtS,EAAE0B,OAAO0jB,GAAK,YAAejrB,EAAEm9C,QAGjEn9C,EAAE29C,KAAOwH,YAAajzB,MAAO,SAAYlyB,EAAE29C,KAG3C93C,EAAE0J,OAAQ1N,MACNqwB,MAAOA,MACPmzB,MAAOA,MAAMp9B,QACb09B,cAAeN,MAAMC,SACrBE,UAAWA,UACXC,aAAcA,aACdC,eAAgBA,iBAGpB,IAAM7jD,KAAK4I,QAAQwkC,SAAW,CAC1BptC,KAAKqtC,WAGTrtC,KAAKoxB,IAAKoyB,MAAMp9B,SACZ29B,WAAY,yBACZ/I,OAAQ,uBAGZh7C,KAAKoxB,IAAKf,OACN2zB,WAAY,aACZhJ,OAAQ,qBACRx1B,MAAO,oBACPmvB,KAAM,qBAGV30C,KAAKmjD,mBACLnjD,KAAK88C,WAGT4G,WAAY,WACR,IAAIO,YAAaT,MAAOC,SACpBpzB,MAAQrwB,KAAKomB,QACb89B,WAAa7zB,MAAO,GAAI8zB,OAE5B,GAAID,YAAcA,WAAWjnD,OAAS,EAAI,CACtCumD,MAAQx/C,EAAGkgD,WAAY,IACvBT,SAAWz/C,EAAE6e,SAAU2gC,MAAO,GAAKnzB,MAAO,QACvC,CACH4zB,YAAc5zB,MAAM5hB,QAAS,SAC7Bg1C,SAAaQ,YAAYhnD,OAAS,EAIlCumD,MAAQC,SAAWQ,YACfjgD,EAAGhE,KAAK6B,SAAU,GAAIuiD,qBAAsB,UACvCviC,OAAQ,SAAWuhC,SAAU/yB,MAAO,GAAIpK,IAAO,MAC/ClL,QAGb,OACIqL,QAASo9B,MACTC,SAAUA,WAIlBpW,SAAU,WACNrtC,KAAKwjD,MAAMj9C,SAAU,wBAErB,GAAKvG,KAAK8jD,cAAgB,CACtB9jD,KAAKqwB,MAAMrP,IAAKhhB,KAAKwjD,OAAQa,QAASrkD,KAAKskD,gBACxC,CAEHtkD,KAAKomB,QAAQm+B,KAAMvkD,KAAKskD,YACxBtkD,KAAKomB,QAAQiC,SAASm8B,QAASxkD,KAAKwjD,OAKxCxjD,KAAK+xB,aACD2C,MAAS10B,KAAK4I,QAAQ8rB,MACtB4mB,QAAWt7C,KAAK4I,QAAQ0yC,QACxBQ,KAAQ97C,KAAK4I,QAAQkzC,QAK7BwI,SAAU,WACN,OAAOtgD,EAAG,gBACJhE,KAAK4I,QAAQy6C,aAAerjD,KAAK4I,QAAQy6C,aAAe,IAC1D,OAASrjD,KAAK2jD,WACZ3jD,KAAK4I,QAAQge,SAAW,qBAAuB,IAAO,cAGhE69B,kBAAmB,WACfzkD,KAAKwjD,MAAMj9C,SAAUvC,EAAE0B,OAAO0oB,aAGlCs2B,iBAAkB,WACd1kD,KAAKwjD,MAAM34B,YAAa7mB,EAAE0B,OAAO0oB,aAGrCu2B,mBAAoB,WAEhB3kD,KAAKomB,QAAQxJ,KAAM,UAAW5c,KAAKomB,QAAQ9f,GAAI,aAC/CtG,KAAK4kD,eAAev3B,IAAKrtB,KAAKomB,SAAUxJ,KAAM,UAAW,OACzD5c,KAAK6kD,WAAY,OAGrBC,uBAAwB,SAAUt8C,OAC9B,GAAKxI,KAAKwjD,MAAMn7B,SAAShiB,SAAU,qBAAwB,CACvDmC,MAAMs+B,oBAIdie,mBAAoB,SAAUv8C,OAC1B,IAAI6nB,MAAQrwB,KAAKomB,QAEjB,GAAKiK,MAAM/pB,GAAI,aAAgB,CAC3BkC,MAAM0N,iBACN,OAGJlW,KAAKglD,aAEL30B,MAAMzT,KAAM,UAAW5c,KAAK2jD,YAAc,SAAW,OAAStzB,MAAMzT,KAAM,YAO1EyT,MAAMrO,eAAgB,SAKtBhiB,KAAK4kD,eAAev3B,IAAKgD,OAAQzT,KAAM,UAAW,OAElD5c,KAAK6kD,aACL,OAAO,OAGXG,WAAY,WACRhlD,KAAK4kD,eAAezlC,KAAM,WACtBnb,EAAGhE,MAAOsW,KAAK,QAAUtS,EAAE0B,OAAO0jB,GAAK,WAAYppB,KAAKilD,YAOhEL,aAAc,WACV,IAAIrgD,SAAU2gD,OACVC,MAAQnlD,KAAKomB,QAAS,GACtBnoB,KAAOknD,MAAMlnD,KACbm4C,KAAO+O,MAAM/O,KACbjyB,IAAMnkB,KAAKomB,QAAQN,UAAUq4B,OAAO5/C,IAAK,GAGzC6mD,OAASplD,KAAKomB,QAGlB,GAAKnoB,MAAQ+B,KAAK2jD,YAAc,SAAWx/B,IAAM,CAC7C5f,SAAW,6BAA+B6+C,SAAUnlD,MAAS,KAG7D,GAAKm4C,KAAO,CACR8O,OAAS9O,KAAK92B,aAAc,MAI5B,GAAK4lC,OAAS,CACVE,OAASphD,EAAGO,SAAW,UAAY6+C,SAAU8B,QAAW,KAAM/gC,KAIlEihC,OAASphD,EAAGoyC,MAAOhkC,KAAM7N,UAAWsd,OAAQ,WAIxC,OAAS7hB,KAAKo2C,OAASA,OACxBp1B,IAAKokC,YAGL,CAGHA,OAASphD,EAAGO,SAAU4f,KAAMtC,OAAQ,WAChC,OAAQ7hB,KAAKo2C,QAIzB,OAAOgP,QAGXP,WAAY,SAAUQ,iBAClB,IAAIngD,KAAOlF,KAEXA,KAAK4kD,eAAezlC,KAAM,WACtB,IAAI4oB,MAAQ/jC,EAAGhE,MAEf,IAAOA,KAAKilD,SAAW//C,KAAKy+C,YAAc,cAAiB0B,gBAAkB,CACzEtd,MAAMxuB,QAAS,aAGtB+rC,cAAe,YAGpBC,OAAQ,WACJvlD,KAAK88C,WAIT0I,SAAU,WACN,IAAIC,aAAcC,mBACdC,wBAA0B3hD,EAAE0B,OAAO+/C,aAGvC,GAAKE,wBAA0B,CAC3BF,aAAezlD,KAAKomB,QAAQ3X,QACxB,wBACAk3C,wBAAwBtoD,UAAU+vB,cAGtC,GAAKq4B,aAAaxoD,OAAS,EAAI,CAG3ByoD,mBAAqB1hD,EAAEtH,KAAM+oD,aAAc,GAAK,uBAGhD,OAAWC,mBAAqBA,mBAAmB98C,QAAQ2Y,KAGvDkkC,aAAanvC,KAAM,QAAUtS,EAAE0B,OAAO0jB,GAAK,WAAe,cAKtE,OAAO,MAGX0zB,QAAS,WACL,IAAI8I,UAAY5lD,KAAKomB,QAAS,GAAI6+B,QAC9BxvC,OAASzR,EAAE0B,OAAOolB,eAClBuwB,aAAe,eAAiBr7C,KAAK4I,QAAQ0yC,QAC7CuK,cACAC,iBAEJ,GAAK9lD,KAAKwlD,WAAa,CACnBM,cAAc3oD,KAAMsY,QACpBowC,WAAW1oD,KAAMk+C,kBACd,CACHyK,cAAc3oD,KAAMk+C,eAClBuK,UAAYC,WAAaC,eAAgB3oD,KAAMsY,QAGrD,GAAKmwC,UAAY,CACbC,WAAW1oD,KAAM6C,KAAK4jD,cACtBkC,cAAc3oD,KAAM6C,KAAK6jD,oBACtB,CACHgC,WAAW1oD,KAAM6C,KAAK6jD,gBACtBiC,cAAc3oD,KAAM6C,KAAK4jD,cAG7B5jD,KAAKkvB,SAASjQ,YAAa,oBAAqBjf,KAAKomB,QAAQxJ,KAAM,aAEnE5c,KAAKwjD,MACAj9C,SAAUs/C,WAAWpkC,KAAM,MAC3BoJ,YAAai7B,cAAcrkC,KAAM,OAG1CyN,OAAQ,WACJ,OAAOlvB,KAAKwjD,MAAMn7B,UAGtB0J,YAAa,SAAUnpB,SACnB,IAAI46C,MAAQxjD,KAAKwjD,MACbuC,eAAiB/lD,KAAK4I,QACtB4tC,MAAQx2C,KAAKkvB,SACbkuB,QAAUp9C,KAAKwlD,WAEnB,GAAK58C,QAAQge,WAAa7mB,UAAY,CAClCC,KAAKqwB,MAAMzT,KAAM,aAAchU,QAAQge,UACvC4vB,MAAMv3B,YAAa,sBAAuBrW,QAAQge,UAEtD,GAAKhe,QAAQkzC,OAAS/7C,UAAY,CAC9By2C,MAAMv3B,YAAa,YAAarW,QAAQkzC,MAE5C,GAAKlzC,QAAQ8rB,QAAU30B,UAAY,CAC/ByjD,MACK34B,YAAa,UAAYk7B,eAAerxB,OACxCnuB,SAAU,UAAYqC,QAAQ8rB,OAEvC,GAAK9rB,QAAQy6C,eAAiBtjD,UAAY,CACtCy2C,MACK3rB,YAAak7B,eAAe1C,cAC5B98C,SAAUqC,QAAQy6C,cAE3B,GAAKz6C,QAAQ0yC,UAAYv7C,WAAaq9C,QAAU,CAC5CoG,MAAM34B,YAAa,eAAiBk7B,eAAezK,SAAU/0C,SAAU,eAAiBqC,QAAQ0yC,cAC7F,IAAM8B,QAAU,CACnBoG,MAAM34B,YAAa,eAAiBk7B,eAAezK,SAEvDt7C,KAAK4vB,OAAQhnB,WAGlB5E,EAAE0B,OAAOmkB,UAAUq5B,aAxVtB,CA0VInnC,SAEJ,SAAW/X,EAAGjE,WAEdiE,EAAEkrB,OAAQ,iBAEN9B,aAAc,kEAEdxkB,SACI8rB,MAAO,KACP4qB,KAAM,KACNhE,QAAS,OACT0K,WAAY,MACZ/L,QAAS,KACT4F,OAAQ,KACRoG,OAAQ,KACRnK,KAAM,KACNuH,aAAc,KACdjW,SAAU,OAGd5b,QAAS,WAEL,GAAKxxB,KAAKomB,QAAQ9f,GAAI,aAAgB,CAClCtG,KAAK4I,QAAQge,SAAW,KAG5B,IAAM5mB,KAAK4I,QAAQwkC,SAAW,CAC1BptC,KAAKqtC,WAGTrpC,EAAE0J,OAAQ1N,MACNkmD,QAASlmD,KAAKomB,QAAQiC,WAG1BroB,KAAKoxB,KACD5L,MAAO,WACHxlB,KAAKkvB,SAAS3oB,SAAUvC,EAAE0B,OAAO0oB,aAGrCumB,KAAM,WACF30C,KAAKkvB,SAASrE,YAAa7mB,EAAE0B,OAAO0oB,eAI5CpuB,KAAK88C,QAAS,OAGlBzP,SAAU,WACNrtC,KAAKomB,QAAQm+B,KAAMvkD,KAAKmmD,YAG5BA,QAAS,WACL,IAAIv9C,QAAU5I,KAAK4I,QACfw9C,YAAcpmD,KAAKqmD,gBAAiBrmD,KAAK4I,SAE7C,OAAO5E,EAAE,mCACH4E,QAAQy6C,aAAe,IAAMz6C,QAAQy6C,aAAe,KACpDz6C,QAAQ8rB,MAAQ,WAAa9rB,QAAQ8rB,MAAQ,KAC7C9rB,QAAQqxC,QAAU,iBAAmB,KACrCrxC,QAAQi3C,OAAS,aAAe,KAChCj3C,QAAQq9C,OAAS,iBAAmB,KACpCr9C,QAAQkzC,KAAO,WAAa,KAC5BlzC,QAAQge,SAAW,qBAAuB,KAC1Cw/B,YAAgB,IAAMA,YAAgB,IACxC,MAAQpmD,KAAKomB,QAAQlI,MAAQ,WAGrCgR,OAAQ,WACJ,OAAOlvB,KAAKkmD,SAGhBt0B,SAAU,WACF5xB,KAAKomB,QAAQ0R,aAAc93B,KAAKkmD,SAChClmD,KAAKkmD,QAAQp4B,UAGrBu4B,gBAAiB,SAAUz9C,SACvB,OAASA,QAAQ02C,KAAS,WAAa12C,QAAQ02C,MACzC12C,QAAQo9C,WAAa,kBAAoB,IAC3C,gBAAkBp9C,QAAQ0yC,QAAY,IAG9CvpB,YAAa,SAAUnpB,SACnB,IAAI4tC,MAAQx2C,KAAKkvB,SAEjB,GAAKtmB,QAAQ8rB,QAAU30B,UAAY,CAC/By2C,MACK3rB,YAAa7qB,KAAK4I,QAAQ8rB,OAC1BnuB,SAAU,UAAYqC,QAAQ8rB,OAEvC,GAAK9rB,QAAQqxC,UAAYl6C,UAAY,CACjCy2C,MAAMv3B,YAAa,gBAAiBrW,QAAQqxC,SAEhD,GAAKrxC,QAAQi3C,SAAW9/C,UAAY,CAChCy2C,MAAMv3B,YAAa,YAAarW,QAAQi3C,QAE5C,GAAKj3C,QAAQq9C,SAAWlmD,UAAY,CAChCy2C,MAAMv3B,YAAa,gBAAiBrW,QAAQq9C,QAEhD,GAAKr9C,QAAQkzC,OAAS/7C,UAAY,CAC9By2C,MAAMv3B,YAAa,UAAWrW,QAAQkzC,MAE1C,GAAKlzC,QAAQge,WAAa7mB,UAAY,CAClCC,KAAKomB,QAAQxJ,KAAM,WAAYhU,QAAQge,UACvC4vB,MAAMv3B,YAAa,oBAAqBrW,QAAQge,UAGpD,GAAKhe,QAAQ02C,OAASv/C,WACd6I,QAAQo9C,aAAejmD,WACvB6I,QAAQ0yC,UAAYv7C,UAAY,CACpCy2C,MACK3rB,YAAa7qB,KAAKqmD,gBAAiBrmD,KAAK4I,UACxCrC,SAAUvG,KAAKqmD,gBACZriD,EAAE0J,UAAY1N,KAAK4I,QAASA,WAGxC5I,KAAK4vB,OAAQhnB,UAGjBk0C,QAAS,SAAU/rB,QACf,IAAIu1B,gBACAC,WAAavmD,KAAKomB,QAAQxJ,KAAM,YAEpC,GAAK5c,KAAK4I,QAAQ02C,MAAQt/C,KAAK4I,QAAQ0yC,UAAY,UAAYt7C,KAAKomB,QAAQ9P,KAAM,SAAY,CAC1FtW,KAAKomB,QAAQ9P,KAAM,QAAStW,KAAKomB,QAAQlI,OAE7C,IAAM6S,OAAS,CACXu1B,gBAAkBtmD,KAAKomB,QAAQy2B,SAC/B74C,EAAGhE,KAAKkmD,SAAU74C,KAAMrN,KAAKomB,QAAQlI,OAAQ4b,OAAQwsB,iBAEzD,GAAKtmD,KAAK4I,QAAQge,WAAa2/B,WAAa,CACxCvmD,KAAK+xB,aAAcnL,SAAU2/B,kBAlIzC,CAuIIxqC,SAEH,SAAU/X,GACP,IAAOwiD,KAAOxiD,EAAG,uBACb8sC,eAAiB0V,KAAKlwC,KAAM,WAC5BmwC,aAAe3V,eAAiB,qCAChC4V,YAAc5V,eAAiB,uCAC/B6V,kBAAoB,iEAAiEp0C,KAAMu+B,gBAE/F9sC,EAAE0B,OAAOkhD,KAAO5iD,EAAE0J,WACdwc,SAAUy8B,kBACVE,OAAQ,MACR30B,QAAS,SAAU40B,MACf,IAAMH,oBAAsB3iD,EAAE0B,OAAOkhD,KAAKC,OAAS,CAC/CL,KAAKlwC,KAAM,UAAWmwC,cACtBziD,EAAE0B,OAAOkhD,KAAK18B,QAAU,MACxBlmB,EAAE0B,OAAOkhD,KAAKC,OAASC,MAAQ,QAGvC70B,OAAQ,SAAU80B,QACd,IAAMJ,qBAAwB3iD,EAAE0B,OAAOkhD,KAAKC,QAAUE,SAAW,MAAS,CACtEP,KAAKlwC,KAAM,UAAWowC,aACtB1iD,EAAE0B,OAAOkhD,KAAK18B,QAAU,KACxBlmB,EAAE0B,OAAOkhD,KAAKC,OAAS,QAG/BG,QAAS,WACL,IAAML,kBAAoB,CACtBH,KAAKlwC,KAAM,UAAWw6B,gBACtB9sC,EAAE0B,OAAOkhD,KAAK18B,QAAU,UA3BxC,CAgCGnO,SAEH,SAAW/X,EAAGjE,WAEdiE,EAAEkrB,OAAQ,oBACN9B,aAAc,sBACV,wBACA,2BACA,wBACA,2BACA,0BACA,uBACA,qBACA,qBACA,YACA,sBACA,sBACA,uBACA,sBACA,0BACA,gCACA,uBACA,qBACA,qBAEJxkB,SACI8rB,MAAO,KACPulB,QAAS,KACT6B,KAAM,MAENmL,iBAAkB,mBAAmB10C,KAAMrR,UAAUg6B,WAAch6B,UAAUC,UAAUkC,QAAS,gBAAmB,EACnHggD,aAAc,GACdjW,SAAU,OAGd5b,QAAS,WAEL,IAAI5oB,QAAU5I,KAAK4I,QACfs+C,SAAWlnD,KAAKomB,QAAQ9f,GAAI,4CAC5B6gD,WAAannD,KAAKomB,QAAS,GAAIghC,UAAY,WAC3CC,QAAUrnD,KAAKomB,QAAQ9f,GAAI,UAAatC,EAAE0B,OAAO0jB,IAAM,IAAO,iBAC9Dk+B,gBAAoBtnD,KAAKomB,QAAQ9f,GAAI,UACjCtG,KAAKomB,QAAQ9f,GAAI,UAAatC,EAAE0B,OAAO0jB,IAAM,IAAO,qBAC/Ci+B,QAEb,GAAKrnD,KAAKomB,QAAQxJ,KAAM,YAAe,CACnChU,QAAQge,SAAW,KAGvB5iB,EAAE0J,OAAQ1N,MACNu/C,QAASv/C,KAAKunD,sBACdL,SAAUA,SACVC,WAAYA,WACZE,QAASA,QACTC,eAAgBA,iBAGpBtnD,KAAKwnD,eAEL,IAAM5+C,QAAQwkC,SAAW,CACrBptC,KAAKqtC,WAGTrtC,KAAKoxB,KACD5L,MAAS,eACTmvB,KAAQ,iBAKhBmI,QAAS,WACL98C,KAAKynD,YACD7gC,SAAa5mB,KAAKomB,QAAQ9f,GAAI,gBAItC+mC,SAAU,WACN,IAAIqa,kBAEJ,GAAK1nD,KAAKmnD,WAAa,CACnBO,eAAevqD,KAAM,iBAGzB,GAAK6C,KAAKmnD,YAAcnnD,KAAKqnD,QAAU,CACnCK,eAAevqD,KAAM,mBAIzB,GAAK6C,KAAKsnD,eAAiB,CACvBtnD,KAAKomB,QAAQm+B,KAAMvkD,KAAK2nD,aACrB,CACHD,eAAiBA,eAAermC,OAAQrhB,KAAKu/C,SAGjDv/C,KAAKomB,QAAQ7f,SAAUmhD,eAAejmC,KAAM,OAGhDyN,OAAQ,WACJ,OAASlvB,KAAoB,eAAIA,KAAKomB,QAAQiC,SAAWroB,KAAKomB,SAGlEmhC,oBAAqB,WACjB,IAAI3+C,QAAU5I,KAAK4I,QACf22C,WAEJA,QAAQpiD,KAAM,YAAiByL,QAAQ8rB,QAAU,KAAS,UAAY9rB,QAAQ8rB,QAC9E,GAAK9rB,QAAQqxC,QAAU,CACnBsF,QAAQpiD,KAAM,iBAElB,GAAKyL,QAAQkzC,KAAO,CAChByD,QAAQpiD,KAAM,WAElB,GAAKyL,QAAQge,SAAW,CACpB24B,QAAQpiD,KAAM,qBAElB,GAAKyL,QAAQy6C,aAAe,CACxB9D,QAAQpiD,KAAMyL,QAAQy6C,cAG1B,OAAO9D,SAGXoI,MAAO,WACH,OAAO3jD,EAAG,gBACJhE,KAAKknD,SAAW,mBAAqB,kBACvClnD,KAAKu/C,QAAQ99B,KAAM,KAAQ,IAC3B,4BAGR+lC,aAAc,WASV,UAAYxnD,KAAKomB,QAAQ,GAAGwhC,cAAgB,cACvC5jD,EAAE8jB,QAAQ+T,cAAgB,CAI3B77B,KAAKomB,QAAQ,GAAG7G,aAAc,cAAe,OAC7Cvf,KAAKomB,QAAQ,GAAG7G,aAAc,eAAgB,SAItDsoC,YAAa,WACT7nD,KAAKkvB,SAASrE,YAAa7mB,EAAE0B,OAAO0oB,YACpC,GAAKpuB,KAAK4I,QAAQq+C,iBAAmB,CACjCjjD,EAAE0B,OAAOkhD,KAAK30B,OAAQ,QAI9B61B,aAAc,WAGV,GAAK9nD,KAAK4I,QAAQq+C,iBAAmB,CACjCjjD,EAAE0B,OAAOkhD,KAAK10B,QAAS,MAE3BlyB,KAAKkvB,SAAS3oB,SAAUvC,EAAE0B,OAAO0oB,aAGrC2D,YAAa,SAAWnpB,SACpB,IAAI4tC,MAAQx2C,KAAKkvB,SAEjBlvB,KAAK4vB,OAAQhnB,SAEb,KAAQA,QAAQge,WAAa7mB,WACzB6I,QAAQkzC,OAAS/7C,WACjB6I,QAAQqxC,UAAYl6C,WACpB6I,QAAQ8rB,QAAU30B,WAClB6I,QAAQy6C,eAAiBtjD,WAAc,CAEvCy2C,MAAM3rB,YAAa7qB,KAAKu/C,QAAQ99B,KAAM,MACtCzhB,KAAKu/C,QAAUv/C,KAAKunD,sBACpB/Q,MAAMjwC,SAAUvG,KAAKu/C,QAAQ99B,KAAM,MAGvC,GAAK7Y,QAAQge,WAAa7mB,UAAY,CAClCC,KAAKomB,QAAQxJ,KAAM,aAAchU,QAAQge,YAIjDgL,SAAU,WACN,GAAK5xB,KAAK4I,QAAQwkC,SAAW,CACzB,OAEJ,GAAKptC,KAAKsnD,eAAiB,CACvBtnD,KAAKomB,QAAQq3B,SAEjBz9C,KAAKomB,QAAQyE,YAAa,iBAAmB7qB,KAAKu/C,QAAQ99B,KAAM,UA9LxE,CAkMI1F,SAEJ,SAAW/X,EAAGjE,WAEdiE,EAAEkrB,OAAQ,gBAAiBlrB,EAAE0J,QACzB0f,aAAc,uEAEd4C,kBAAmB,QAEnBpnB,SACI8rB,MAAO,KACPqzB,WAAY,KACZ9N,QAAS,KACT6B,KAAM,MACNkM,UAAW,OAGfx2B,QAAS,WAGL,IAAItsB,KAAOlF,KACPioD,QAAUjoD,KAAKomB,QACf2hC,WAAa/nD,KAAK4I,QAAQm/C,YAAc/jD,EAAE0B,OAAO4Z,aAAc2oC,QAAS,GAAK,SAC7EC,gBAAkBH,WAAa,WAAaA,WAAa,kBACzDI,YAAgBnoD,KAAK4I,QAAQqxC,SAAWgO,QAAQv5C,QAAS,WAAgB,iBAAmB,GAC5F05C,UAAcpoD,KAAK4I,QAAQkzC,MAAQmM,QAAQv5C,QAAS,QAAa,WAAa,GAC9E25C,MAAQJ,QAAS,GAAIxhC,SAASrlB,cAC9BknD,eAAmBD,QAAU,SAC7BE,cAAgBN,QAAQ5/B,SAAS/hB,GAAI,gCACrCkiD,YAAc,eAAqB,mBAAqB,GACxDC,UAAYR,QAAQ3xC,KAAM,MAC1BoyC,OAAS1kD,EAAG,SAAWykD,UAAY,MACnCE,QAAUD,OAAOpyC,KAAM,OAAUmyC,UAAY,SAC7CG,KAAON,eAAiB/pC,WAAY0pC,QAAQ3xC,KAAM,QAAY,EAC9DsT,KAAQ0+B,eAAiB/pC,WAAY0pC,QAAQ3xC,KAAM,QAAY2xC,QAAQ71C,KAAM,UAAWnV,OAAO,EAC/F4rD,KAAOzsD,OAAOmiB,WAAY0pC,QAAQ3xC,KAAM,SAAY,GACpDwyC,UAAYjnD,SAASmmB,cAAe,KACpC+gC,OAAS/kD,EAAG8kD,WACZE,UAAYnnD,SAASmmB,cAAe,OACpCihC,OAASjlD,EAAGglD,WACZE,QAAUlpD,KAAK4I,QAAQo/C,YAAcM,eAAiB,WAClD,IAAIa,GAAKtnD,SAASmmB,cAAe,OACjCmhC,GAAG9pC,UAAY,gBAAkBrb,EAAE0B,OAAOolB,eAC1C,OAAO9mB,EAAGmlD,IAAKzwB,UAAWuwB,QAHwB,GAI/C,MACPrgD,QACAs9C,QACAhjB,EAAGjmC,OACHF,EAAGqsD,aAAcC,aACjBhiC,KAAMiiC,YAAaC,UAEvBb,OAAOpyC,KAAM,KAAMqyC,SACnB3oD,KAAKsoD,eAAiBA,eAEtBQ,UAAUvpC,aAAc,OAAQ,KAChCypC,UAAUzpC,aAAc,OAAQ,eAChCypC,UAAU3pC,WAAcrf,KAAKsoD,eAAiB,6CAA+C,mCAAoCE,YAAaN,gBAAiBC,YAAaC,WAAY3mC,KAAM,IAC9LqnC,UAAUzpC,UAAY,mBACtB2pC,UAAUrxB,YAAamxB,WAEvBC,OAAOzyC,MACHo3B,KAAQ,SACR8b,gBAAiBZ,IACjBa,gBAAiB7/B,IACjB8/B,gBAAiB1pD,KAAK2pD,SACtBC,iBAAkB5pD,KAAK2pD,SACvB10C,MAASjV,KAAK2pD,SACdE,kBAAmBlB,UAGvB3kD,EAAE0J,OAAQ1N,MACNipD,OAAQA,OACRF,OAAQA,OACRd,QAASA,QACT1mC,KAAM8mC,MACNQ,KAAMA,KACNj/B,IAAKA,IACLg/B,IAAKA,IACLM,QAASA,QACTX,cAAeA,cACfuB,SAAU,MACVC,YAAa,KACbC,aAAc,MACdC,WAAY,QAGhB,GAAK3B,eAAiB,CAElBe,aAAepB,QAAQ3xC,KAAM,YAC7B,GAAK+yC,aAAe,CAChBN,OAAOzyC,KAAM,WAAY+yC,cAE7BpB,QAAQ3xC,KAAM,WAAY,MAAOkP,MAAM,WACnCxhB,EAAGhE,MAAO20C,OACVoU,OAAOvjC,UAGX0gC,QAAUrkD,SAASmmB,cAAe,OAClCk+B,QAAQ7mC,UAAY,wBAEpB,IAAM6jB,EAAI,EAAGjmC,OAAS+rD,UAAUkB,WAAWjtD,OAAQimC,EAAIjmC,OAAQimC,IAAM,CACjEgjB,QAAQvuB,YAAaqxB,UAAUkB,WAAWhnB,IAG9C8lB,UAAUrxB,YAAauuB,SAKvB6C,OAAOxiD,SAAU,6BAEjBqC,QAAUq/C,QAAQ71C,KAAM,UAExB,IAAMrV,EAAI,EAAGqsD,aAAexgD,QAAQ3L,OAAQF,EAAIqsD,aAAcrsD,IAAM,CAChEsqB,MAAQtqB,EAAI,IAAM,IAClBusD,aAAevsD,EAAI,GAAK,IAAMiH,EAAE0B,OAAOolB,eACvCy+B,UAAY1nD,SAASmmB,cAAe,QAEpCuhC,UAAUlqC,WAAc,mCAAoCgI,KAAMiiC,aAAc7nC,KAAM,IACtF8nC,UAAUhqC,aAAc,OAAQ,OAChCgqC,UAAU5xB,YAAa91B,SAAS8gD,eAAgB/5C,QAAQ7L,GAAG86B,YAC3D7zB,EAAGulD,WAAY7wB,UAAWuwB,QAG9B/jD,KAAKilD,QAAUnmD,EAAG,mBAAoBilD,QAK1ChB,QAAQ1hD,SAAU+hD,eAAiB,mBAAqB,mBAExDtoD,KAAKoxB,IAAK62B,SACNpY,OAAU,iBACVua,MAAS,gBACTzV,KAAQ,eACR0V,SAAY,qBAGhBpB,OAAO1pD,KAAM,aAAcyE,EAAEixB,MAAOj1B,KAAKsqD,kBAAmBtqD,OACvDT,KAAM,SAAU,OAIrBS,KAAKoxB,IAAKvvB,UAAY0oD,WAAc,yBACpCvqD,KAAKoxB,IAAK63B,OAAOjoC,IAAKnf,WAAcwoD,SAAY,oBAEhDpB,OAAOtyB,YAAasxB,SAGpB,IAAMK,iBAAmBC,cAAgB,CACrCrC,QAAUlmD,KAAK4I,QAAQkzC,KAAO,kCAAoC,0BAElEmM,QAAQjnC,IAAKioC,QAAS5E,QAAS6B,SAInClmD,KAAKoxB,IAAKpxB,KAAK+oD,QACX/E,WAAc,oBACdwG,QAAW,iBACXJ,MAAS,iBAGbpqD,KAAK+oD,OAAOxpD,KAAM,SAAU,OAE5BS,KAAKmjD,mBAELnjD,KAAK88C,QAAS/8C,UAAWA,UAAW,OAGxCgyB,YAAa,SAAUnpB,SACnB,GAAKA,QAAQ8rB,QAAU30B,UAAY,CAC/BC,KAAKyqD,UAAW7hD,QAAQ8rB,OAG5B,GAAK9rB,QAAQm/C,aAAehoD,UAAY,CACpCC,KAAK0qD,eAAgB9hD,QAAQm/C,YAGjC,GAAKn/C,QAAQqxC,UAAYl6C,UAAY,CACjCC,KAAK2qD,YAAa/hD,QAAQqxC,SAG9B,GAAKrxC,QAAQkzC,OAAS/7C,UAAY,CAC9BC,KAAK4qD,SAAUhiD,QAAQkzC,MAG3B,GAAKlzC,QAAQo/C,YAAcjoD,UAAY,CACnCC,KAAK6qD,cAAejiD,QAAQo/C,WAGhC,GAAKp/C,QAAQge,WAAa7mB,UAAY,CAClCC,KAAK8qD,aAAcliD,QAAQge,UAE/B5mB,KAAK4vB,OAAQhnB,UAGjBmiD,eAAgB,SAAUviD,OAEtB,GAAKxI,KAAKyxB,SAAU,gBAAiBjpB,SAAY,MAAQ,CACrD,OAAO,MAEX,IAAMxI,KAAKiqD,WAAa,CACpBjqD,KAAK88C,QAAS98C,KAAK2pD,SAAU,QAIrCqB,cAAe,WACXhrD,KAAK88C,QAAS98C,KAAK2pD,SAAU,KAAM,OAGvCsB,aAAc,WACVjrD,KAAK88C,QAAS98C,KAAK2pD,SAAU,OAMjCuB,iBAAkB,WACdlrD,KAAKmrD,mBAITC,kBAAmB,WACfprD,KAAK+oD,OAAOvjC,SAGhB6lC,eAAgB,SAAU7iD,OACtB,IAAI7K,MAAQqC,KAAK2pD,SACjB,GAAK3pD,KAAK4I,QAAQge,SAAW,CACzB,OAIJ,OAASpe,MAAM+b,SACX,KAAKvgB,EAAE0B,OAAO6e,QAAQQ,KACtB,KAAK/gB,EAAE0B,OAAO6e,QAAQK,IACtB,KAAK5gB,EAAE0B,OAAO6e,QAAQW,QACtB,KAAKlhB,EAAE0B,OAAO6e,QAAQU,UACtB,KAAKjhB,EAAE0B,OAAO6e,QAAQgB,GACtB,KAAKvhB,EAAE0B,OAAO6e,QAAQa,MACtB,KAAKphB,EAAE0B,OAAO6e,QAAQI,KACtB,KAAK3gB,EAAE0B,OAAO6e,QAAQS,KAClBxc,MAAM0N,iBAEN,IAAMlW,KAAKsrD,YAAc,CACrBtrD,KAAKsrD,YAAc,KACnBtrD,KAAK+oD,OAAOxiD,SAAU,mBAG1B,MAIR,OAASiC,MAAM+b,SACX,KAAKvgB,EAAE0B,OAAO6e,QAAQQ,KAClB/kB,KAAK88C,QAAS98C,KAAK4oD,KACnB,MACJ,KAAK5kD,EAAE0B,OAAO6e,QAAQK,IAClB5kB,KAAK88C,QAAS98C,KAAK4pB,KACnB,MACJ,KAAK5lB,EAAE0B,OAAO6e,QAAQW,QACtB,KAAKlhB,EAAE0B,OAAO6e,QAAQgB,GACtB,KAAKvhB,EAAE0B,OAAO6e,QAAQa,MAClBplB,KAAK88C,QAASn/C,MAAQqC,KAAK6oD,MAC3B,MACJ,KAAK7kD,EAAE0B,OAAO6e,QAAQU,UACtB,KAAKjhB,EAAE0B,OAAO6e,QAAQI,KACtB,KAAK3gB,EAAE0B,OAAO6e,QAAQS,KAClBhlB,KAAK88C,QAASn/C,MAAQqC,KAAK6oD,MAC3B,QAIZ0C,aAAc,WACV,GAAKvrD,KAAKsrD,YAAc,CACpBtrD,KAAKsrD,YAAc,MACnBtrD,KAAK+oD,OAAOl+B,YAAa,qBAIjCy/B,kBAAmB,SAAU9hD,OAGzB,GAAKxI,KAAK4I,QAAQge,YAAepe,MAAMk9B,QAAU,GAAKl9B,MAAMk9B,QAAU,GAAKl9B,MAAMk9B,QAAU3lC,WAAc,CACrG,OAAO,MAEX,GAAKC,KAAKyxB,SAAU,cAAejpB,SAAY,MAAQ,CACnD,OAAO,MAEXxI,KAAK8pD,SAAW,KAChB9pD,KAAKgqD,aAAe,MACpBhqD,KAAKiqD,WAAa,MAElB,GAAKjqD,KAAKsoD,eAAiB,CACvBtoD,KAAK+pD,YAAc/pD,KAAKomB,QAAQ,GAAGolC,cAGvCxrD,KAAK88C,QAASt0C,OACdxI,KAAKyxB,SAAU,SACf,OAAO,OAGXg6B,gBAAiB,WACb,GAAKzrD,KAAK8pD,SAAW,CACjB9pD,KAAK8pD,SAAW,MAEhB,GAAK9pD,KAAKsoD,eAAiB,CAEvBtoD,KAAK+oD,OAAOxiD,SAAU,6BAEtB,GAAKvG,KAAKiqD,WAAa,CAEnB,GAAKjqD,KAAKgqD,aAAe,CACrBhqD,KAAK88C,QAAS98C,KAAK+pD,cAAgB,EAAI,EAAI,OACxC,CACH/pD,KAAK88C,QAAS98C,KAAK+pD,kBAEpB,CAEH/pD,KAAK88C,QAAS98C,KAAK+pD,cAAgB,EAAI,EAAI,IAInD/pD,KAAKiqD,WAAa,MAClBjqD,KAAKyxB,SAAU,QACf,OAAO,QAIfi6B,qBAAsB,SAAUljD,OAGxB,GAAKxI,KAAKyxB,SAAU,OAAQjpB,SAAY,MAAO,CAC3C,OAAO,MAEX,GAAKxI,KAAK8pD,WAAa9pD,KAAK4I,QAAQge,SAAW,CAG3C5mB,KAAKiqD,WAAa,KAElB,GAAKjqD,KAAKsoD,eAAiB,CAEvBtoD,KAAK+oD,OAAOl+B,YAAa,6BAG7B7qB,KAAK88C,QAASt0C,OAGdxI,KAAKgqD,aAAehqD,KAAK+pD,cAAgB/pD,KAAKomB,QAAQ,GAAGolC,cACzD,OAAO,QAInBL,gBAAiB,WACb,GAAKnrD,KAAKvB,QAAUuB,KAAK2pD,SAAW,CAChC3pD,KAAK88C,QAAS98C,KAAK2pD,YAI3BA,OAAQ,WACJ,OAAQ3pD,KAAKsoD,eAAiBtoD,KAAKomB,QAAQ,GAAGolC,cAAgBjtC,WAAYve,KAAKomB,QAAQlI,QAG3FqnC,OAAQ,WACJvlD,KAAK88C,QAAS/8C,UAAW,MAAO,OAGpC+8C,QAAS,SAAU5+B,IAAKytC,cAAeC,oBAInC,IAAI1mD,KAAOlF,KACP6rD,YAAc7nD,EAAE0B,OAAO4Z,aAActf,KAAKomB,QAAS,GAAK,SACxDsO,MAAQ10B,KAAK4I,QAAQ8rB,OAASm3B,YAC9BjN,WAAclqB,MAAQ,WAAaA,MAAQ,GAC3CqzB,WAAa/nD,KAAK4I,QAAQm/C,YAAc8D,YACxC3D,gBAAkBH,WAAa,WAAaA,WAAa,kBACzDI,YAAcnoD,KAAK4I,QAAQqxC,QAAU,iBAAmB,GACxDmO,UAAYpoD,KAAK4I,QAAQkzC,KAAO,WAAa,GAC7Cp5B,KAAMjb,MAAO/K,KAAMovD,IACnBC,OAAQtrC,QACRwnC,QAAS+D,QAASC,eAAgBrD,IAAKh/B,IAAKi/B,KAC5CqD,OAAQC,WAAYC,WAAYC,eAChCC,cAAeC,SAAUC,SACzBC,aAEJvnD,KAAK+jD,OAAO,GAAG5pC,WAAcrf,KAAKsoD,eAAiB,6DAA+D,kCAAmCJ,gBAAiBC,YAAaC,WAAY3mC,KAAM,IACrM,GAAKzhB,KAAK4I,QAAQge,UAAY5mB,KAAKomB,QAAQxJ,KAAM,YAAe,CAC5D5c,KAAKkyB,UAITlyB,KAAKvB,MAAQuB,KAAK2pD,SAClB,GAAK3pD,KAAK4I,QAAQo/C,YAAchoD,KAAKsoD,gBAAkBtoD,KAAKipD,OAAO72C,KAAM,iBAAkBnV,SAAW,EAAI,CACtG+C,KAAKkpD,QAAU,WACX,IAAIC,GAAKtnD,SAASmmB,cAAe,OACjCmhC,GAAG9pC,UAAY,gBAAkBrb,EAAE0B,OAAOolB,eAC1C,OAAO9mB,EAAGmlD,IAAKzwB,UAAWxzB,KAAK+jD,QAHpB,GAMnBjpD,KAAK+oD,OAAOxiD,SAAU,SAAWq4C,WAAa,cAE9CqJ,QAAUjoD,KAAKomB,QACf4lC,SAAWhsD,KAAKsoD,eAChB2D,eAAiBD,WAAe/D,QAAQ71C,KAAM,UAC9Cw2C,IAAOoD,QAAUztC,WAAY0pC,QAAQ3xC,KAAM,QAAY,EACvDsT,IAAMoiC,QAAUztC,WAAY0pC,QAAQ3xC,KAAM,QAAY21C,eAAehvD,OAAS,EAC9E4rD,KAASmD,SAAWztC,WAAY0pC,QAAQ3xC,KAAM,SAAa,EAAMiI,WAAY0pC,QAAQ3xC,KAAM,SAAa,EAExG,UAAY4H,MAAQ,SAAW,CAC3BxhB,KAAOwhB,IAEP4tC,IAAM,EAENppC,KAAO1iB,KAAKipD,OAAO1mC,SAASG,KAC5Bjb,MAAQzH,KAAKipD,OAAOxhD,QACpBskD,OAAStkD,QAAQmiB,IAAIg/B,KAAKC,MAC1B,IAAM7oD,KAAK8pD,UACHptD,KAAKuqC,MAAQvkB,KAAOopC,KACpBpvD,KAAKuqC,MAAQvkB,KAAOjb,MAAQqkD,IAAM,CACtC,OAEJ,GAAKC,OAAS,EAAI,CACdtrC,SAAc/jB,KAAKuqC,MAAQvkB,MAASjb,MAAU,QAC3C,CACHgZ,QAAUkJ,KAAK+iC,OAAWhwD,KAAKuqC,MAAQvkB,MAASjb,MAAU,UAE3D,CACH,GAAKyW,KAAO,KAAO,CACfA,IAAM8tC,QAAUztC,WAAY0pC,QAAQ/pC,OAAS,GAAM+pC,QAAQ,GAAGuD,cAElE/qC,SAAYlC,WAAYL,KAAQ0qC,MAAUh/B,IAAMg/B,KAAQ,IAG5D,GAAK5hC,MAAOvG,SAAY,CACpB,OAGJyrC,OAAWzrC,QAAU,KAAUmJ,IAAMg/B,KAAQA,IAG7CuD,YAAeD,OAAStD,KAAQC,KAChCuD,WAAaF,OAASC,WAEtB,GAAKxiC,KAAK4d,IAAK4kB,YAAe,GAAKtD,KAAO,CACtCuD,YAAgBD,WAAa,EAAMtD,MAAUA,KAGjDwD,eAAiB,MAAMziC,IAAIg/B,KAAKC,MAGhCqD,OAAS3tC,WAAY6tC,WAAWO,QAAQ,IAExC,UAAYZ,SAAW,YAAc,CACjCA,OAAStkD,QAAWmiB,IAAIg/B,KAAOC,MAEnC,GAAKkD,OAAS,GAAKC,QAAU,CACzBvrC,SAAYyrC,OAAStD,KAAQyD,gBAAmB,EAAIxD,MAExD,GAAKpoC,QAAU,EAAI,CACfA,QAAU,EAGd,GAAKA,QAAU,IAAM,CACjBA,QAAU,IAGd,GAAKyrC,OAAStD,IAAM,CAChBsD,OAAStD,IAGb,GAAKsD,OAAStiC,IAAM,CAChBsiC,OAAStiC,IAGb5pB,KAAK+oD,OAAOljC,IAAK,OAAQpF,QAAU,KAEnCzgB,KAAK+oD,OAAO,GAAGxpC,aAAc,gBAAiBysC,QAAUE,OAASD,eAAelmC,GAAImmC,QAAS51C,KAAM,UAEnGtW,KAAK+oD,OAAO,GAAGxpC,aAAc,iBAAkBysC,QAAUE,OAASD,eAAelmC,GAAImmC,QAASx+B,kBAE9F1tB,KAAK+oD,OAAO,GAAGxpC,aAAc,QAASysC,QAAUE,OAASD,eAAelmC,GAAImmC,QAASx+B,kBAErF,GAAK1tB,KAAKkpD,QAAU,CAChBlpD,KAAKkpD,QAAQrjC,IAAK,QAASpF,QAAU,KAIzC,GAAKzgB,KAAKmqD,QAAU,CAChBmC,cAAgBtsD,KAAK+oD,OAAOthD,QAAUzH,KAAKipD,OAAOxhD,QAAU,IAC5D8kD,SAAW9rC,SAAW6rC,eAAkB,IAAMA,eAAkB7rC,QAAU,IAC1E+rC,SAAW/rC,UAAY,IAAM,EAAIkJ,KAAKi/B,IAAK0D,cAAgB,IAAMC,SAAU,KAE3EvsD,KAAKmqD,QAAQhrC,KAAK,WACd,IAAIytC,GAAK5oD,EAAGhE,MAAOqG,SAAU,qBAC7BrC,EAAGhE,MAAOyH,OAASmlD,GAAKL,SAAWC,UAAc,OAIzD,IAAMZ,mBAAqB,CACvBa,aAAe,MAGf,GAAKT,QAAU,CACXS,aAAeluC,WAAY0pC,QAAQ/pC,SAAYguC,OAC/CjE,QAAQ/pC,IAAKguC,YACV,CACHO,aAAexE,QAAS,GAAIuD,gBAAkBU,OAC9CjE,QAAS,GAAIuD,cAAgBU,OAEjC,GAAKlsD,KAAKyxB,SAAU,eAAgBvT,OAAU,MAAO,CAC7C,OAAO,MAEf,IAAMytC,eAAiBc,aAAe,CAClCxE,QAAQ1uC,QAAS,aAK7BsxC,cAAe,SAAUpsD,OACrBA,QAAUA,MACV,GAAKA,MAAQ,CACTuB,KAAK4I,QAAQo/C,YAAcvpD,MAC3BuB,KAAK88C,eACF,GAAK98C,KAAKkpD,QAAU,CACvBlpD,KAAKkpD,QAAQp7B,SACb9tB,KAAKkpD,QAAU,QAIvBuB,UAAW,SAAUhsD,OACjBuB,KAAK+oD,OACAl+B,YAAa,UAAY7qB,KAAK4I,QAAQ8rB,OACtCnuB,SAAU,UAAY9H,OAE3B,IAAIouD,aAAe7sD,KAAK4I,QAAQ8rB,MAAQ10B,KAAK4I,QAAQ8rB,MAAQ,UACzDuoB,SAAWx+C,MAAQA,MAAQ,UAE/BuB,KAAKioD,QACAp9B,YAAa,WAAagiC,cAC1BtmD,SAAU,WAAa02C,WAGhCyN,eAAgB,SAAUjsD,OACtB,IAAIquD,kBAAoB9sD,KAAK4I,QAAQm/C,WAAa/nD,KAAK4I,QAAQm/C,WAAa,UACxEgF,cAAgBtuD,MAAQA,MAAQ,UAEpCuB,KAAKipD,OACAp+B,YAAa,WAAaiiC,mBAC1BvmD,SAAU,WAAawmD,gBAGhCnC,SAAU,SAAUnsD,OAChBA,QAAUA,MACV,IAAMuB,KAAKsoD,iBAAmBtoD,KAAKuoD,cAAgB,CAC/CvoD,KAAKipD,OAAO5gC,SAASpJ,YAAa,UAAWxgB,OAC7CuB,KAAKomB,QAAQnH,YAAa,UAAWxgB,OAEzCuB,KAAKipD,OAAOhqC,YAAa,UAAWxgB,QAGxCksD,YAAa,SAAUlsD,OACnBuB,KAAKipD,OAAOhqC,YAAa,gBAAiBxgB,OAE1C,IAAMuB,KAAKsoD,eAAiB,CACxBtoD,KAAKioD,QAAQhpC,YAAa,gBAAiBxgB,SAInDqsD,aAAc,SAAUrsD,OACpBA,QAAUA,MACVuB,KAAKomB,QAAQxJ,KAAM,WAAYne,OAC/BuB,KAAKipD,OACAhqC,YAAa,oBAAqBxgB,OAClC6X,KAAM,gBAAiB7X,OAE5BuB,KAAKomB,QAAQnH,YAAa,oBAAqBxgB,SAGpDuF,EAAE0B,OAAOmkB,UAAUq5B,aAjkBtB,CAmkBInnC,SAEJ,SAAW/X,EAAGjE,WAEd,IAAI6F,MAEJ,SAASonD,WACL,IAAMpnD,MAAQ,CACVA,MAAQ5B,EAAG,eACPs2C,MAAS,4CAGjB,OAAO10C,MAAMg0C,QAGjB51C,EAAEkrB,OAAQ,gBAAiBlrB,EAAE0B,OAAOujD,QAChCrgD,SACIqkD,aAAc,MACdC,UAAW,OAGf17B,QAAS,WACLxxB,KAAK4vB,SAEL5rB,EAAE0J,OAAQ1N,MACNmtD,cAAe,KACfC,OAAQ,KACRC,cAAe,QAGnBrtD,KAAKgyB,WAAY,eAAgBhyB,KAAK4I,QAAQqkD,cAE9CjtD,KAAKoxB,IAAKpxB,KAAK+oD,QAAU/E,WAAe,eACxChkD,KAAKoxB,IAAKpxB,KAAKipD,OAAOjoC,IAAKhhB,KAAK6B,WAAcwoD,SAAa,eAC3DrqD,KAAK2+C,YAIT2O,eAAgB,WACZ,IAAIC,UAAYvtD,KAAK+oD,OAAOxmC,SAE5BviB,KAAKotD,OAAO7qC,QACRG,KAAM6qC,UAAU7qC,MAAS1iB,KAAK+oD,OAAOthD,QAAUzH,KAAKotD,OAAO3lD,SAAY,EACvEwI,IAAKs9C,UAAUt9C,IAAMjQ,KAAKotD,OAAO5lC,cAAgB,KAIzDwK,WAAY,SAAUpnB,IAAKnM,OACvBuB,KAAK4vB,OAAQhlB,IAAKnM,OAElB,GAAKmM,MAAQ,YAAc,CACvB5K,KAAK+oD,OAAOp7B,KAAMlvB,QAAUuB,KAAK4I,QAAQkzC,KAAO97C,KAAK2pD,SAAW,SAC7D,GAAK/+C,MAAQ,eAAiB,CACjC,GAAKnM,QAAUuB,KAAKotD,OAAS,CACzBptD,KAAKotD,OAASJ,WACTzmD,SAAU,YAAevG,KAAK4I,QAAQ8rB,OAAS,MAC/CvB,OACA2E,aAAc93B,KAAKomB,YAMpC02B,QAAS,WACL98C,KAAK4vB,OAAO9vB,MAAOE,KAAMyX,WACzBzX,KAAK2+C,YAGTA,SAAU,WACN,IAAIxgD,EAAI6B,KAAK4I,QAASiU,SAEtB,GAAK1e,EAAE8uD,aAAe,CAKlBjtD,KAAK+oD,OAAOviD,WAAY,SAG5BqW,SAAW7c,KAAK2pD,SAChB,GAAK9sC,WAAa7c,KAAKmtD,cAAgB,CACnC,OAEJntD,KAAKmtD,cAAgBtwC,SAErB,GAAK1e,EAAE8uD,cAAgBjtD,KAAKotD,OAAS,CACjCptD,KAAKstD,iBACLttD,KAAKotD,OAAOz/B,KAAM9Q,UAGtB,GAAK1e,EAAE+uD,YAAcltD,KAAK4I,QAAQkzC,KAAO,CACrC97C,KAAK+oD,OAAOp7B,KAAM9Q,YAI1B2wC,WAAY,WACR,GAAKxtD,KAAK4I,QAAQqkD,eAAiBjtD,KAAKqtD,cAAgB,CACpDrtD,KAAK+oD,OAAOp7B,KAAM,IAClB3tB,KAAKotD,OAAOl6B,OACZlzB,KAAKstD,iBACLttD,KAAKqtD,cAAgB,OAI7BI,WAAY,WACR,IAAItvD,EAAI6B,KAAK4I,QAEb,GAAKzK,EAAE8uD,cAAgBjtD,KAAKqtD,cAAgB,CACxC,GAAKlvD,EAAE+uD,YAAc/uD,EAAE29C,KAAO,CAC1B97C,KAAK+oD,OAAOp7B,KAAM3tB,KAAK2pD,UAE3B3pD,KAAKotD,OAAOj6B,OACZnzB,KAAKqtD,cAAgB,WA9GjC,CAmHItxC,SAEJ,SAAW/X,EAAGjE,WAEdiE,EAAEkrB,OAAQ,oBAAqBlrB,EAAE0J,QAE7B9E,SACI8kD,OAAQ,KACRC,QAAS,MACTj5B,MAAO,KACP0Y,SAAU,MACViW,aAAc,KACdpJ,QAAS,KACT6B,KAAM,OAGVtqB,QAAS,WACD,IAAMxxB,KAAK4I,QAAQwkC,SAAW,CAC1BptC,KAAKqtC,eACF,CACHrpC,EAAE0J,OAAQ1N,MACN4tD,WAAY5tD,KAAKomB,QAAQiC,SACzBnkB,GAAIlE,KAAKomB,QAAQhU,KAAM,qBAAsB2T,GAAI,GACjD3hB,IAAKpE,KAAKomB,QAAQhU,KAAM,sBAAuB2T,GAAG,GAClDxE,KAAMvhB,KAAKomB,QAAQ7nB,IAAK,GAAI6oD,UAIpCpnD,KAAKmjD,mBAGLnjD,KAAK6tD,kBAAoB7tD,KAAKomB,QAAQ9P,KAAM,YAC5C,GAAKtW,KAAK6tD,mBAAqB,KAAO,CAClC7tD,KAAKkE,GAAGoS,KAAM,WAAYtW,KAAK6tD,mBAEnC7tD,KAAKomB,QAAQ9P,KAAM,WAAY,MAC/BtW,KAAKoxB,KACD5L,MAAU,sBAGd,GAAKxlB,KAAKomB,QAAQ9f,GAAI,aAAgB,CAClCtG,KAAK+xB,aACDnL,SAAY,OAIpB5mB,KAAKoxB,IAAKpxB,KAAK4tD,YACX1S,MAAS,UACTvQ,UAAa,QACbC,WAAc,WAGlB5qC,KAAKoxB,IAAKpxB,KAAKkE,IACXsmD,QAAW,aAGfxqD,KAAKoxB,KACDye,OAAU,aAItB4U,kBAAmB,WACfzkD,KAAKkE,GAAGshB,SAGZ0J,OAAQ,WACJ,OAAOlvB,KAAK4tD,YAGhBE,MAAO,WACH9tD,KAAK4tD,WAAW/iC,YAAa,wBAC7B,GAAK7qB,KAAKuhB,OAAS,SAAW,CAC1BvhB,KAAKomB,QAAQ7nB,IAAK,GAAIitD,cAAgB,MACnC,CACHxrD,KAAKomB,QAAQxJ,KAAM,UAAW,OAElC5c,KAAKomB,QAAQ7M,QAAS,WAG1Bw0C,OAAQ,WACJ/tD,KAAK4tD,WAAWrnD,SAAU,wBAC1B,GAAKvG,KAAKuhB,OAAS,SAAW,CAC1BvhB,KAAKomB,QAAQ7nB,IAAK,GAAIitD,cAAgB,MACnC,CACHxrD,KAAKomB,QAAQxJ,KAAM,UAAW,MAElC5c,KAAKomB,QAAQ7M,QAAS,WAG1B8zB,SAAU,WACN,IAAIugB,WAAa5pD,EAAG,SAChB4E,QAAU5I,KAAK4I,QACfwd,QAAUpmB,KAAKomB,QACfsO,MAAQ9rB,QAAQ8rB,MAAQ9rB,QAAQ8rB,MAAQ,UAGxCxwB,GAAKF,EAAG,WACJgS,KAAQ,MAEZ5R,IAAMJ,EAAG,iBACTud,KAAO6E,QAAQ7nB,IAAK,GAAI6oD,QACxBsG,OAAWnsC,OAAS,QAChB3Y,QAAQ8kD,OAAStnC,QAAQhU,KAAM,UAAW2T,GAAI,GAAI1Y,OACtDsgD,QAAYpsC,OAAS,QACjB3Y,QAAQ+kD,QAAUvnC,QAAQhU,KAAM,UAAW2T,GAAI,GAAI1Y,OAEvDnJ,GACKqC,SAAU,oDACV8G,KAAMqgD,QACXtpD,IACKmC,SAAU,qBACV8G,KAAMsgD,SAEXC,WACKrnD,SAAU,iCACP,UAAYmuB,MAAQ,KAClB9rB,QAAQy6C,aAAez6C,QAAQy6C,aAAe,IAAO,KACnDj9B,QAAQ9f,GAAI,aACZ8f,QACKhU,KAAM,UACN2T,GAAI,GACJzf,GAAI,aAAkB,uBAAyB,KACtD8f,QAAQ9f,GAAG,aAAe,qBAAsB,KAChDsC,QAAQqxC,QAAU,iBAAkB,KACpCrxC,QAAQkzC,KAAO,WAAY,KAChChiB,OAAQ51B,GAAIE,KAEjBgiB,QACK7f,SAAU,uBACVynD,MAAOJ,YACPr4B,SAAUq4B,YAEnB5pD,EAAE0J,OAAQ1N,MACN4tD,WAAYA,WACZ1pD,GAAIA,GACJE,IAAKA,IACLmd,KAAMA,QAIdgkC,OAAQ,WACJvlD,KAAK88C,WAGTA,QAAS,WACL,IAAIvmC,UACA03C,kBAAoBjuD,KAAK4tD,WAAWvnD,SAAU,wBAA2B,SAAW,QAExF,GAAKrG,KAAKuhB,OAAS,SAAW,CAC1BhL,UAAcvW,KAAKomB,QAAQ7nB,IAAK,GAAIitD,cAAgB,EAAM,SAAU,YACjE,CACHj1C,UAAYvW,KAAKomB,QAAQxJ,KAAM,WAAc,SAAU,QAG3D,GAAKrG,YAAc03C,kBAAoB,CACnCjuD,KAAMuW,eAId23C,QAAS,WACL,IAAI33C,UAAYvW,KAAK4tD,WAAWvnD,SAAU,wBAA2B,QAAU,SAE/ErG,KAAMuW,cAGV43C,SAAU,SAAUjjC,GAChB,GAAKA,EAAEwa,QAAU1hC,EAAE0B,OAAO6e,QAAQS,KAAO,CACrChlB,KAAK8tD,aACF,GAAK5iC,EAAEwa,QAAU1hC,EAAE0B,OAAO6e,QAAQa,MAAQ,CAC7CplB,KAAK+tD,cACF,GAAK7iC,EAAEwa,QAAU1hC,EAAE0B,OAAO6e,QAAQc,MAAQ,CAC7CrlB,KAAKkuD,UACLhjC,EAAEhV,mBAIV6b,YAAa,SAAUnpB,SACnB,GAAKA,QAAQ8rB,QAAU30B,UAAY,CAC/B,IAAI8sD,aAAejkD,QAAQ8rB,MAAQ9rB,QAAQ8rB,MAAQ,UAC/CuoB,SAAWr0C,QAAQ8rB,MAAQ9rB,QAAQ8rB,MAAQ,UAE/C10B,KAAKkvB,SACArE,YAAa,UAAYgiC,cACzBtmD,SAAU,UAAY02C,UAE/B,GAAKr0C,QAAQ8kD,SAAW3tD,UAAY,CAChCC,KAAKkE,GAAGmJ,KAAMzE,QAAQ8kD,QAE1B,GAAK9kD,QAAQ+kD,UAAY5tD,UAAY,CACjCC,KAAKoE,IAAIiJ,KAAMzE,QAAQ+kD,SAE3B,GAAK/kD,QAAQge,WAAa7mB,UAAY,CAClCC,KAAKkvB,SAASjQ,YAAa,oBAAqBrW,QAAQge,UAE5D,GAAKhe,QAAQkzC,OAAS/7C,UAAY,CAC9BC,KAAKkvB,SAASjQ,YAAa,UAAWrW,QAAQkzC,MAElD,GAAKlzC,QAAQqxC,UAAYl6C,UAAY,CACjCC,KAAKkvB,SAASjQ,YAAa,gBAAiBrW,QAAQqxC,SAGxDj6C,KAAK4vB,OAAQhnB,UAGjBgpB,SAAU,WACN,GAAK5xB,KAAK4I,QAAQwkC,SAAW,CACzB,OAEJ,GAAKptC,KAAK6tD,mBAAqB,KAAO,CAClC7tD,KAAKomB,QAAQ9P,KAAM,WAAYtW,KAAK6tD,uBACjC,CACH7tD,KAAKomB,QAAQ5f,WAAY,YAE7BxG,KAAKkE,GAAG4pB,SACR9tB,KAAKoE,IAAI0pB,SACT9tB,KAAKomB,QAAQq3B,SACbz9C,KAAK4tD,WAAW9/B,SAChB9tB,KAAK6qB,YAAa,yBAGvB7mB,EAAE0B,OAAOmkB,UAAUq5B,aA1NtB,CA4NInnC,SAEJ,SAAW/X,EAAGjE,WACViE,EAAEkrB,OAAQ,qBAAsBlrB,EAAE0J,QAE9B9E,SACI8rB,MAAO,KACPqzB,WAAY,KACZ9N,QAAS,KACT6B,KAAM,MACNkM,UAAW,MAGfx2B,QAAS,WACL,IAAI48B,IAAMpuD,KAAKomB,QACfioC,QAAUruD,KAAK4I,QAAQkzC,KAAO,yBAA2B,iBACzDwS,YAAcF,IAAIh8C,KAAM,SAAU2I,QAClCwzC,WAAaH,IAAIh8C,KAAM,SAAU+rC,OACjCqQ,OAASJ,IAAIh8C,KAAM,SAAU2I,QAC7B0zC,mBAAqBzqD,EAAEtH,KAAM4xD,YAAY/vD,IAAK,GAAK,kBAC/CyF,EAAEtH,KAAM4xD,YAAYrF,SAAS1qD,IAAK,GAAK,iBAC3CmwD,kBAAoB1qD,EAAEtH,KAAM6xD,WAAWhwD,IAAI,GAAI,kBAC3CyF,EAAEtH,KAAM6xD,WAAWtF,SAAS1qD,IAAK,GAAK,iBAC1CowD,aAAeF,mBAAmBxF,OAClC2F,YAAcF,kBAAkBzF,OAChC4F,YAAcJ,mBAAmB1F,OACjC+F,SAAW9qD,EAAG,0CAA2CuxB,SAAU64B,KAEnEE,YAAY/nD,SAAU,wBACtBgoD,WAAWhoD,SAAU,uBACrB6nD,IAAI7nD,SAAU8nD,SAEdM,aAAap5B,SAAUu5B,UACvBF,YAAYr5B,SAAUu5B,UACtBN,OAAO12B,aAAcs2B,KACrBS,YAAYn2B,UAAWk2B,aAEvB5qD,EAAE0J,OAAQ1N,MACNsuD,YAAaA,YACbC,WAAYA,WACZI,aAAcA,aACdC,YAAaA,YACbJ,OAAQA,OACRO,WAAY,KACZC,cAAe,MACfF,SAAUA,SACVG,OAAQ,QAGZjvD,KAAK88C,UACL98C,KAAKoxB,IAAKpxB,KAAKomB,QAAQhU,KAAM,0BACzB88C,iBAAoB,oBACpBC,UAAa,aACbC,UAAa,aACbC,kBAAqB,UACrB1a,KAAQ,UACRyV,MAAS,YAEbpqD,KAAKoxB,KACDk+B,UAAY,YAEhBtvD,KAAKoxB,IAAKpxB,KAAKomB,QAAQ3X,QAAS,SAC5Bq+B,MAAQ,iBAEZ9sC,KAAKoxB,IAAKy9B,aACN7K,WAAc,sBAGtBuL,aAAc,WACV,IAAIrqD,KAAOlF,KAEXgI,WAAY,WACR9C,KAAKsqD,oBACP,IAGNC,iBAAkB,SAAUjnD,OAExBxE,EAAEtH,KAAMsD,KAAKsuD,YAAY/vD,IAAI,GAAI,iBAAkBurD,SAAW,KAC9D9lD,EAAEtH,KAAMsD,KAAKsuD,YAAY/vD,IAAI,GAAI,iBAAkBu+C,QAASt0C,OAC5DxE,EAAEtH,KAAMsD,KAAKsuD,YAAY/vD,IAAI,GAAI,iBAAkBkzB,SAAU,SAC7D,OAAO,OAGXi+B,WAAY,SAAUlnD,OAClB,IAAIuS,MAAQ/W,EAAGwE,MAAMkB,QAASpD,GAAItG,KAAKsuD,aACnCqB,YAAc,MAAY3vD,KAAKuuD,WAAavuD,KAAKsuD,YAErDtuD,KAAKgvD,cAAgB,MAGrB,GAAOhvD,KAAKivD,SAAW,SAAWl0C,OAAa/a,KAAKivD,SAAW,SAAWl0C,MAAU,CAChF/W,EAAEtH,KAAMizD,YAAYpxD,IAAI,GAAI,iBAAkBurD,SAAW,KACzD9lD,EAAEtH,KAAMizD,YAAYpxD,IAAI,GAAI,iBAAkBu+C,QAASt0C,OACvD,OAAO,QAIfonD,WAAY,SAAUpnD,OAClB,IAAIuS,MAAQ/W,EAAGwE,MAAMkB,QAASpD,GAAItG,KAAKsuD,aAEvCtuD,KAAKivD,OAAS,MAGdjvD,KAAKomB,QAAQhU,KAAM,SAAUmH,QAAS,YACtCvZ,KAAK2uD,aAAa9oC,IAAK,UAAW9K,MAAQ,EAAI,KAGlD80C,kBAAmB,SAAUrnD,OACzBxI,KAAKgvD,cAAgB,MAErB,GAAKhrD,EAAGwE,MAAM8Y,cAAc5X,QAASrD,SAAU,mBAAsB,CACjErG,KAAKgvD,cAAgB,KACrBhvD,KAAK+uD,WAAa/qD,EAAGwE,MAAMkB,QAASwU,QAI5C6T,YAAa,SAAUnpB,SACnB,GAAKA,QAAQ8rB,QAAU30B,UAAY,CAC/BC,KAAKyqD,UAAW7hD,QAAQ8rB,OAG5B,GAAK9rB,QAAQm/C,aAAehoD,UAAY,CACpCC,KAAK0qD,eAAgB9hD,QAAQm/C,YAGjC,GAAKn/C,QAAQkzC,OAAS/7C,UAAY,CAC9BC,KAAK4qD,SAAUhiD,QAAQkzC,MAG3B,GAAKlzC,QAAQo/C,YAAcjoD,UAAY,CACnCC,KAAK6qD,cAAejiD,QAAQo/C,WAGhC,GAAKp/C,QAAQge,WAAa7mB,UAAY,CAClCC,KAAK8qD,aAAcliD,QAAQge,UAG/B5mB,KAAK4vB,OAAQhnB,SACb5I,KAAK88C,WAGTA,QAAS,WACL,IAAIsR,IAAMpuD,KAAKomB,QACXjoB,EAAI6B,KAAK4I,QAEb,GAAK5I,KAAKsuD,YAAYhoD,GAAI,cAAiBtG,KAAKuuD,WAAWjoD,GAAI,aAAgB,CAC3EtG,KAAK4I,QAAQge,SAAW,KAG5BwnC,IAAIh8C,KAAM,SAAU62C,QAChBv0B,MAAOv2B,EAAEu2B,MACTqzB,WAAY5pD,EAAE4pD,WACdnhC,SAAUzoB,EAAEyoB,SACZqzB,QAAS97C,EAAE87C,QACX6B,KAAM39C,EAAE29C,KACRkM,UAAW7pD,EAAE6pD,YACdiB,OAAQ,WACXjpD,KAAKwvD,oBAGTM,QAAS,SAAUtnD,OACf,GAAKA,MAAM+Y,OAAS,QAAU,CAC1BvhB,KAAKwvD,mBACL,OAAO,MAGX,IAAItqD,KAAOlF,KACP4oD,IAAMrqC,WAAYve,KAAKsuD,YAAYpwC,MAAO,IAC1C0L,IAAMrL,WAAYve,KAAKuuD,WAAWrwC,MAAO,IACzCnD,MAAQ/W,EAAGwE,MAAMkB,QAASrD,SAAU,wBACpC0pD,WAAah1C,MAAQ/a,KAAKsuD,YAActuD,KAAKuuD,WAC7CoB,YAAc50C,MAAQ/a,KAAKuuD,WAAavuD,KAAKsuD,YAEjD,GAAOtuD,KAAKsuD,YAAYpwC,MAAQle,KAAKuuD,WAAWrwC,OAAS1V,MAAM+Y,OAAS,cAAgBvd,EAAEwE,MAAMkB,QAAQrD,SAAS,oBAAuB,CACpI0pD,WAAWpb,YACR,GAAKnsC,MAAM+Y,OAAS,YAAc,CACrC,OAEJ,GAAKqnC,IAAMh/B,MAAQ5pB,KAAKgvD,cAAgB,CAEpCe,WAAW7xC,IAAKnD,MAAQ6O,IAAKg/B,KAAMK,OAAQ,WAC3CjpD,KAAKyxB,SAAU,kBACZ,GAAKm3B,IAAMh/B,IAAM,CAEpBmmC,WAAW7xC,IAAKle,KAAK+uD,YAAa9F,OAAQ,WAG1CjhD,WAAY,WACR2nD,YAAYzxC,IAAKnD,MAAQ6tC,IAAKh/B,KAAMq/B,OAAQ,WAC5CjlD,EAAEtH,KAAMizD,YAAYpxD,IAAI,GAAI,iBAAkBwqD,OAAOvjC,QACrDtgB,KAAKypD,aAAa9oC,IAAK,UAAW9K,MAAQ,GAAK,GAC/C7V,KAAKusB,SAAU,cAChB,GACHzxB,KAAKivD,OAAS,MAAY,QAAU,OAGxC,GAAKrG,MAAQh/B,IAAM,CACf5lB,EAAEtH,KAAMqzD,WAAWxxD,IAAI,GAAI,iBAAkBwqD,OAAOljC,IAAK,UAAW,GACpE7hB,EAAEtH,KAAMizD,YAAYpxD,IAAI,GAAI,iBAAkBwqD,OAAOljC,IAAK,UAAW,OAClE,CACH7hB,EAAEtH,KAAMizD,YAAYpxD,IAAI,GAAI,iBAAkBwqD,OAAOljC,IAAK,UAAW,IACrE7hB,EAAEtH,KAAMqzD,WAAWxxD,IAAI,GAAI,iBAAkBwqD,OAAOljC,IAAK,UAAW,IAGxE7lB,KAAKwvD,mBAEL,GAAK5G,KAAOh/B,IAAM,CACd,OAAO,QAIf4lC,iBAAkB,WACd,IAAI5G,IAAMlnD,SAAUsC,EAAEtH,KAAMsD,KAAKsuD,YAAY/vD,IAAI,GAAI,iBAAkBwqD,OAAOxqD,IAAI,GAAGwD,MAAM2gB,KAAM,IAC7FkH,IAAMloB,SAAUsC,EAAEtH,KAAMsD,KAAKuuD,WAAWhwD,IAAI,GAAI,iBAAkBwqD,OAAOxqD,IAAI,GAAGwD,MAAM2gB,KAAM,IAC5Fjb,MAASmiB,IAAMg/B,IAEnB5oD,KAAKomB,QAAQhU,KAAM,iBAAkByT,KACjCmqC,cAAepH,IAAM,IACrBnhD,MAASA,MAAQ,OAIzBgjD,UAAW,SAAUhsD,OACjBuB,KAAKsuD,YAAYrF,OAAQ,SAAU,QAASxqD,OAC5CuB,KAAKuuD,WAAWtF,OAAQ,SAAU,QAASxqD,QAG/CisD,eAAgB,SAAUjsD,OACtBuB,KAAKsuD,YAAYrF,OAAQ,SAAU,aAAcxqD,OACjDuB,KAAKuuD,WAAWtF,OAAQ,SAAU,aAAcxqD,QAGpDmsD,SAAU,SAAUnsD,OAChBuB,KAAKsuD,YAAYrF,OAAQ,SAAU,OAAQxqD,OAC3CuB,KAAKuuD,WAAWtF,OAAQ,SAAU,OAAQxqD,OAC1CuB,KAAKomB,QAAQnH,YAAa,YAAaxgB,QAG3CosD,cAAe,SAAUpsD,OACrBuB,KAAKsuD,YAAYrF,OAAQ,SAAU,YAAaxqD,OAChDuB,KAAKuuD,WAAWtF,OAAQ,SAAU,YAAaxqD,QAGnDqsD,aAAc,SAAUrsD,OACpBuB,KAAKsuD,YAAY1xC,KAAM,WAAYne,OACnCuB,KAAKuuD,WAAW3xC,KAAM,WAAYne,QAGtCmzB,SAAU,WACN5xB,KAAKwuD,OAAO91B,UAAW14B,KAAKomB,SAC5BpmB,KAAKomB,QAAQyE,YAAa,0BAC1B7qB,KAAKsuD,YAAYN,MAAOhuD,KAAK2uD,cAC7B3uD,KAAKuuD,WAAWP,MAAOhuD,KAAK4uD,aAC5B5uD,KAAK8uD,SAAShhC,SACd9tB,KAAKomB,QAAQhU,KAAM,SAAUyY,YAAa,4CAA6Co+B,OAAQ,aAGpGjlD,EAAE0B,OAAOmkB,UAAUq5B,aAhQ1B,CAkQInnC,SAEJ,SAAW/X,EAAGjE,WAEViE,EAAEkrB,OAAQ,mBAAoBlrB,EAAE0B,OAAOuqD,WACnCrnD,SACIsnD,SAAU,MACVC,aAAc,cAGlB3+B,QAAS,WACLxxB,KAAK4vB,SAEL,GAAK5vB,KAAKknD,SAAW,CACjBlnD,KAAK4I,QAAQsnD,SAAW,KAG5B,KAAOlwD,KAAK4I,QAAQsnD,UAAYlwD,KAAKsnD,eAAiB,CAClDtnD,KAAKowD,iBAIbC,YAAa,WACT,OAAOrsD,EAAG,gDACN,iFACA,QACKsS,KAAM,QAAStW,KAAK4I,QAAQunD,cAC5B9iD,KAAMrN,KAAK4I,QAAQunD,eAGhCG,eAAgB,SAAU9nD,OACtBxI,KAAKomB,QAAQlI,IAAK,IACTsH,QACAjM,QAAS,UAElBvZ,KAAKuwD,UAAUhqD,SAAU,yBACzBiC,MAAM0N,kBAGVk6C,aAAc,WAEV,IAAMpwD,KAAK4I,QAAQwkC,SAAW,CAC1BptC,KAAKwwD,gBAGTxsD,EAAE0J,OAAQ1N,MACNuwD,UAAWvwD,KAAKkvB,SAAS9c,KAAK,sBAGlCpS,KAAKywD,mBAELzwD,KAAK0wD,gBAITF,cAAe,WAEXxwD,KAAKqwD,cAAc96B,SAAUv1B,KAAKkvB,UAClClvB,KAAKkvB,SAAS3oB,SAAU,uBAI5BkqD,iBAAkB,WAEdzwD,KAAKoxB,IAAKpxB,KAAKuwD,WACXrV,MAAS,mBAGbl7C,KAAKoxB,KACDg5B,MAAS,eACTva,OAAU,eACVxf,MAAS,eACT7K,MAAS,eACTmvB,KAAQ,eACRgc,IAAO,eACPC,MAAS,kBAMjBC,aAAc,WACV7wD,KAAKwyB,KAAMxyB,KAAKuwD,UAAW,SAC3BvwD,KAAKwyB,KAAMxyB,KAAKomB,QAAS,4CAG7B2L,YAAa,SAAUnpB,SACnB5I,KAAK4vB,OAAQhnB,SAEb,GAAKA,QAAQsnD,WAAanwD,YACrBC,KAAKomB,QAAQ9f,GAAI,oCAAuC,CACzD,GAAKsC,QAAQsnD,SAAW,CACpBlwD,KAAKowD,mBACF,CACHpwD,KAAK8wD,iBAIb,GAAKloD,QAAQunD,eAAiBpwD,WAAaC,KAAKuwD,YAAcxwD,UAAY,CACtEC,KAAKuwD,UAAUljD,KAAMzE,QAAQunD,cACxB75C,KAAK,QAAS1N,QAAQunD,gBAInCO,aAAc,WACV1wD,KAAKyyB,OAAQ,oBAAqB,IAGtCs+B,kBAAmB,WACf/wD,KAAKuwD,UAAUtxC,YAAa,yBAA0Bjf,KAAKomB,QAAQlI,QAGvE4yC,cAAe,WACX9wD,KAAKkvB,SAASrE,YAAa,sBAC3B7qB,KAAK6wD,eACL7wD,KAAKuwD,UAAUziC,UAGnB8D,SAAU,WACN5xB,KAAK4vB,SACL,GAAK5vB,KAAK4I,QAAQsnD,SAAW,CACzBlwD,KAAK8wD,qBAvHrB,CA6HI/0C,SAEJ,SAAW/X,EAAGjE,WAEViE,EAAEkrB,OAAQ,mBAAoBlrB,EAAE0B,OAAOuqD,WACnCrnD,SACIooD,SAAS,KACTC,mBAAoB,KAGxBz/B,QAAS,WACLxxB,KAAK4vB,SAEL,GAAK5vB,KAAK4I,QAAQooD,UAAYhxD,KAAKmnD,WAAa,CAC5CnnD,KAAKkxD,cAIbA,UAAW,WACPlxD,KAAKomB,QAAQ7f,SAAU,yBAEvBvG,KAAKoxB,KACDg5B,MAAS,WACTva,OAAU,WACVxf,MAAS,WACTugC,MAAS,aAMb5wD,KAAKoxB,IAAK,KAAMpxB,KAAK6B,UAGjBsvD,SAAY,cACZC,oBAAuB,cACvBC,aAAgB,cAChBC,UAAa,iBAWrBC,YAAa,SAAU/oD,OACnB,GAAKxE,EAAE6e,SAAUra,MAAMkB,OAAQ1J,KAAKomB,QAAS,KACzCpmB,KAAKomB,QAAQ9f,GAAI,YAAe,CAEhC,GAAKkC,MAAM+Y,OAAS,sBAAwB,CACxCvhB,KAAKomB,QACA7f,SAAU,gCACV+8B,kBACGt/B,EAAEixB,MAAO,WACLj1B,KAAKomB,QAAQyE,YAAa,iCAC3B7qB,MACP,cAERA,KAAKwxD,yBAIbC,gBAAiB,WACbzxD,KAAKomB,QAAQyE,YAAa,yBAC1B7qB,KAAKwyB,KAAMxyB,KAAKomB,QAAS,4BACzBpmB,KAAKwyB,KAAMxyB,KAAK6B,SACZ,wDAGR6vD,aAAc,KAEdF,qBAAsB,SAAU9rC,OAC5B,GAAK1lB,KAAK0xD,aAAe,CACrBr7B,aAAcr2B,KAAK0xD,cAEvB,GAAKhsC,QAAU3lB,UAAY,CACvBC,KAAK2xD,oBACF,CACH3xD,KAAK0xD,aAAe1xD,KAAKyyB,OAAQ,gBAAiB/M,SAI1DksC,SAAU,WACN5xD,KAAKwxD,qBAAsBxxD,KAAK4I,QAAQqoD,qBAG5CU,cAAe,WACX,IAAIE,WAAYC,cAAeC,cAAeC,aAAczlB,aACxD0lB,UAAWC,aAAcC,aAAczqD,OACvCotB,UAAY90B,KAAK5D,OAAO04B,YAC5B90B,KAAK0xD,aAAe,EAGpB,KAAQ,WAAY1xD,KAAKomB,QAAS,IAAQ,CACtCpmB,KAAKomB,QAAQP,KACTne,OAAU,EACV0qD,aAAc,EACdC,aAAc,IAItBL,aAAehyD,KAAKomB,QAAS,GAAI4rC,aACjCzlB,aAAevsC,KAAKomB,QAAS,GAAImmB,aACjC0lB,UAAY1zC,WAAYve,KAAKomB,QAAQP,IAAK,qBAC1CqsC,aAAe3zC,WAAYve,KAAKomB,QAAQP,IAAK,wBAC7CssC,aAAeF,UAAYC,aAC3BxqD,OAASsqD,aAAeG,aAAe,GAQvC,GAAK5lB,eAAiB,EAAI,CACtBslB,WAAatzC,WAAYve,KAAKomB,QAAQP,IAAK,gBAC3CisC,cAAgBvzC,WAAYve,KAAKomB,QAAQP,IAAK,mBAC9CksC,cAAgBF,WAAaC,cAE7BpqD,QAAUqqD,cAGd/xD,KAAKomB,QAAQP,KACTne,OAAUA,OACV0qD,aAAc,GACdC,aAAc,KAGlBryD,KAAK5D,OAAO04B,UAAWA,YAG3BgoB,QAAS,WACL,GAAK98C,KAAK4I,QAAQooD,UAAYhxD,KAAKmnD,WAAa,CAC5CnnD,KAAK2xD,kBAIb5/B,YAAa,SAAUnpB,SAEnB5I,KAAK4vB,OAAQhnB,SAEb,GAAKA,QAAQooD,WAAajxD,WAAaC,KAAKmnD,WAAa,CACrD,GAAKv+C,QAAQooD,SAAW,CACpBhxD,KAAKkxD,gBACF,CACHlxD,KAAKyxD,wBAlJzB,CAwJI11C,SAEJ,SAAW/X,EAAGjE,WAEdiE,EAAEkrB,OAAQ,oBAAqBlrB,EAAE0J,QAC7B0f,aAAc,0EAEdxkB,SACI8rB,MAAO,KACP4qB,KAAM,UACNhE,QAAS,QACT2K,OAAQ,MACRhM,QAAS,KACT4F,OAAQ,KACRmG,WAAY,MACZhM,aAAc,KACd0F,aAAc,KACd4S,yBAA0B,KAC1BC,UAAW,QACXC,WAAY,KAEZvL,iBAAkB,mBAAmB10C,KAAMrR,UAAUg6B,WAAch6B,UAAUC,UAAUkC,QAAS,gBAAmB,EACnHy4C,KAAM,OAGVqK,QAAS,WACL,OAAOniD,EAAG,WAGd8mD,aAAc,SAAUrsD,OACpBuB,KAAKomB,QAAQ9P,KAAM,WAAY7X,OAC/BuB,KAAKyyD,OAAOn8C,KAAM,gBAAiB7X,OACnC,OAAOuB,KAAKgyB,WAAY,WAAYvzB,QAGxCi0D,aAAe,WACX,IAAIxtD,KAAOlF,KAEXgI,WAAY,WACR9C,KAAKutD,OAAOjtC,SACb,KAGPmtC,eAAgB,WACZ,OAAO3yD,KAAK4yD,OAAOxgD,KAAM,WAI7BygD,cAAe,WACX,IAAI5M,OAASjmD,KAAK4I,QAAQq9C,QAAUjmD,KAAKomB,QAAQ1X,QAAS,UACtDotC,KAAO97C,KAAK4I,QAAQkzC,MAAQ97C,KAAKomB,QAAQ1X,QAAS,QAClD6wC,QAAU,GAKd,MAAQv/C,KAAKomB,QAAQ,GAAG/G,UAAUhc,QAAS,eAAkB,CACzDk8C,QAAU,eAGd,MAASv/C,KAAKomB,QAAQ,GAAG/G,UAAUhc,QAAS,gBAAmB,CAC3Dk8C,QAAU,gBAGd,GAAK0G,OAAS,CACV1G,SAAW,iBAEf,GAAKzD,KAAO,CACRyD,SAAW,WAGfv/C,KAAK4yD,OAAS5yD,KAAKomB,QAAQyE,YAAa,4BAA6B05B,KAAM,wBAA0BhF,QAAU,MAC/Gv/C,KAAK8yD,SAAY9yD,KAAK4yD,OAAOt8C,KAAM,OAAY,UAAYtW,KAAKokB,KAChEpkB,KAAK+yD,SAAW/yD,KAAK8yD,SAAW,UAChC9yD,KAAKwjD,MAAQx/C,EAAG,cAAehE,KAAK8yD,SAAU,MAC9C9yD,KAAKgzD,WAAahzD,KAAK4yD,OAAQ,GAAIK,UAGvCrhC,SAAU,WACN,IAAIs0B,QAAUlmD,KAAKomB,QAAQN,QAAS,cACpC,GAAKogC,QAAQjpD,OAAS,EAAI,CACtB,GAAKipD,QAAQ5/C,GAAI,+BAAkC,CAC/CtG,KAAKomB,QAAQ7f,SAAU2/C,QAAQ7/C,SAAU,eAAkB,cAAgB,gBAE/ErG,KAAKomB,QAAQuQ,YAAauvB,SAC1BA,QAAQp4B,WAIhB0D,QAAS,WACLxxB,KAAK6yD,gBAEL7yD,KAAKyyD,OAASzyD,KAAKmmD,UAEnB,IAAIjhD,KAAOlF,KAEP4I,QAAU5I,KAAK4I,QAEf0yC,QAAU1yC,QAAQ02C,KAAS12C,QAAQ0yC,SAAWt7C,KAAK4yD,OAAOlkD,QAAS,WAAgB,MAEnF+jD,OAASzyD,KAAKyyD,OACT36B,aAAc93B,KAAK4yD,QACnBt8C,KAAM,KAAMtW,KAAK+yD,UACjBxsD,SAAU,UACLqC,QAAQ02C,KAAS,YAAc12C,QAAQ02C,KAAO,gBAAkBhE,SAChE1yC,QAAQo9C,WAAa,kBAAoB,IAAY,KACrDp9C,QAAQ8rB,MAAQ,WAAa9rB,QAAQ8rB,MAAQ,KAC7C9rB,QAAQqxC,QAAU,iBAAmB,KACrCrxC,QAAQi3C,OAAS,aAAe,KAE9C7/C,KAAKkzD,gBAML,GAAKtqD,QAAQ4pD,YAAcp2D,OAAOyG,OAASzG,OAAOyG,MAAMtB,QAAU,CAC9DkxD,OAAOlsD,SAAU,wBAIrB,GAAKvG,KAAKgzD,WAAa,CACnBhzD,KAAKmzD,YAAcnvD,EAAG,UACjBuC,SAAU,+BACV4sB,OACAoC,SAAUk9B,OAAOlsD,SAAU,oBAIpC,GAAKqC,QAAQge,UAAY5mB,KAAKomB,QAAQ9P,KAAM,YAAc,CACtDtW,KAAKkyB,UAITlyB,KAAK4yD,OAAO/iB,OAAO,WACf3qC,KAAK43C,UAEL,KAAOl0C,QAAQ4pD,WAAa,CACxBttD,KAAKutB,OAAQ,WACTvtB,KAAK0tD,OAAOje,YAKxB30C,KAAKmjD,mBAELnjD,KAAKoxB,IAAKpxB,KAAKyyD,QACXjI,QAAS,mBAGbxqD,KAAKozD,SAGTA,MAAO,WACH,IAAIluD,KAAOlF,KAEXA,KAAK4yD,OACAr9B,SAAUrwB,KAAKutD,QACflzD,KAAM,aAAc,WAEjB2F,KAAKutD,OAAOlsD,SAAUvC,EAAE0B,OAAOolB,kBAElCvrB,KAAM,QAAS,WACZ2F,KAAKutD,OAAOlsD,SAAUvC,EAAE0B,OAAO0oB,cAElC7uB,KAAM,OAAQ,WACX2F,KAAKutD,OAAO5nC,YAAa7mB,EAAE0B,OAAO0oB,cAErC7uB,KAAM,mBAAoB,WACvB2F,KAAKutD,OAAOl5C,QAAS,gBAExBha,KAAM,aAAc,WAEjB2F,KAAKutD,OAAO5nC,YAAa7mB,EAAE0B,OAAOolB,kBAErCvrB,KAAM,wBAAyB,WAC5B2F,KAAKutD,OAAOl5C,QAAS,aAChBsR,YAAa7mB,EAAE0B,OAAOolB,kBAInC5lB,KAAKutD,OAAOlzD,KAAM,aAAc,WAC5B,GAAK2F,KAAK0D,QAAQq+C,iBAAmB,CAC7BjjD,EAAE0B,OAAOkhD,KAAK10B,QAAS,SAGnChtB,KAAKs+C,MAAMjkD,KAAM,cAAe,WAC5B,GAAK2F,KAAK0D,QAAQq+C,iBAAmB,CAC7BjjD,EAAE0B,OAAOkhD,KAAK10B,QAAS,SAGnChtB,KAAK0tD,OAAOrzD,KAAM,QAAS,WACvB,GAAK2F,KAAK0D,QAAQq+C,iBAAmB,CAC7BjjD,EAAE0B,OAAOkhD,KAAK10B,QAAS,SAGnChtB,KAAKutD,OAAOlzD,KAAM,UAAW,WACzB,GAAK2F,KAAK0D,QAAQq+C,iBAAmB,CACjCj/C,WAAW,WACPhE,EAAE0B,OAAOkhD,KAAK30B,OAAQ,OACvB,MAGX/sB,KAAK0tD,OAAOrzD,KAAM,OAAQ,WACtB,GAAK2F,KAAK0D,QAAQq+C,iBAAmB,CACjCjjD,EAAE0B,OAAOkhD,KAAK30B,OAAQ,UAMlCohC,SAAU,WACN,OAAOrzD,KAAK2yD,iBAAiB9wC,OAAQ,cAGzCyxC,gBAAiB,WACb,IAAIpuD,KAAOlF,KAEX,OAAOA,KAAKqzD,WAAW/sC,IAAI,WACvB,OAAOphB,KAAKytD,iBAAiBh1D,MAAOqC,QACrCzB,OAGP20D,cAAe,WACX,IAAIhuD,KAAOlF,KACPqzD,SAAWrzD,KAAKqzD,WAChBhmD,KAAOrN,KAAK48C,YACZ2W,KAAOvvD,EAAGnC,SAASmmB,cAAe,SAEtChoB,KAAKyyD,OAAOz3C,SAAU,QAASqS,IAAK,gBAAiBS,SAASowB,MAAMA,MAAMsG,QAAS,WAC/E,GAAK6O,SAASp2D,OAAS,CACnBoQ,KAAOgmD,SAAS/sC,IAAI,WAChB,OAAOtiB,EAAGhE,MAAOqN,SAClB9O,MAAMkjB,KAAM,UACZ,CACHpU,KAAOnI,KAAK03C,YAGhB,GAAKvvC,KAAO,CACRkmD,KAAKlmD,KAAMA,UACR,CAGHkmD,KAAK5lC,KAAM,UAIf,OAAO4lC,KACFhtD,SAAUrB,KAAK0tD,OAAOt8C,KAAM,UAC5B/P,SAAU8sD,SAAS/8C,KAAM,UACzBuU,YAAa,oBArB6D,KAyBvF2oC,eAAgB,WACZ,IAAIH,SAAWrzD,KAAKqzD,WAGpB,GAAKrzD,KAAKgzD,WAAa,CACnBhzD,KAAKmzD,YAAaE,SAASp2D,OAAS,EAAI,OAAS,UAAWoQ,KAAMgmD,SAASp2D,UAInFouD,eAAgB,WACZrrD,KAAKyyB,OAAQ,mBAGjB8yB,OAAQ,WACJvlD,KAAK88C,WAGT2W,eAAgB,WACZzzD,KAAKkzD,gBACLlzD,KAAKwzD,kBAGT1W,QAAS,WACL98C,KAAKyzD,kBAKTx8B,KAAMjzB,EAAE2tB,KACRwF,MAAOnzB,EAAE2tB,KAETO,QAAS,WACLlyB,KAAK8qD,aAAc,MACnB9qD,KAAKyyD,OAAOlsD,SAAU,sBAG1B0rB,OAAQ,WACJjyB,KAAK8qD,aAAc,OACnB9qD,KAAKyyD,OAAO5nC,YAAa,uBAE9B7mB,EAAE0B,OAAOmkB,UAAUq5B,aApStB,CAsSInnC,SAEJ,SAAW/X,EAAGjE,WAEdiE,EAAE0B,OAAOunB,MAAQ,SAAUvjB,QAGvB1F,EAAG0F,QACE0I,KAAM,KACNkb,iBACAzL,OAAQ,yCACR1C,KAAM,WAEH,IAAIiH,QAAUpmB,KACV0zD,MAAQttC,QAAQ9G,aAAc,QAASme,UAAW,GAEtD,GAAKi2B,MAAQ,CACTttC,QAAQ7G,aAAc,gBAAiB,MACvC6G,QAAQ7G,aAAc,YAAam0C,OACnCttC,QAAQ7G,aAAc,gBAAiB,UAG9C2+B,MACA7wB,IAAK,yDACL9mB,SAAU,aAtBnB,CA0BIwV,SAGJ,SAAW/X,EAAGjE,WAEd,SAAS4zD,wBAAyBC,WAAYC,YAAatxC,OAAQuxC,SAC/D,IAAIznC,YAAcynC,QAElB,GAAKF,WAAaC,YAAc,CAE5BxnC,YAAc9J,QAAWqxC,WAAaC,aAAgB,MACnD,CAEHxnC,YAAc1C,KAAKi/B,IAAKj/B,KAAKC,IAAKrH,OAAQuxC,QAAUD,YAAc,GAAKtxC,OAASqxC,WAAaC,aAGjG,OAAOxnC,YAGX,SAAS0nC,qBAAsBC,WAC3B,OACI5pC,EAAG4pC,UAAUC,aACb5pC,EAAG2pC,UAAUl/B,YACbo/B,GAAMF,UAAW,GAAI1sC,YAAc0sC,UAAUvsD,QAC7C0sD,GAAMH,UAAW,GAAIzsC,aAAeysC,UAAUtsD,UAItD1D,EAAEkrB,OAAQ,gBACNtmB,SACIy6C,aAAc,KACd3uB,MAAO,KACPslB,aAAc,KACd6F,OAAQ,KACR5F,QAAS,KACTxsC,WAAY,OACZ2mD,WAAY,SACZC,UAAW,KACXC,kBAAmB,wBACnBC,gBAAiB,cACjBC,eAAgB,iBAChBC,YAAa,wCACbC,YAAa,KACbtnB,SAAU,MAOVh+B,SAAUpL,EAAE0B,OAAOpE,QAAQw5B,OAK/B65B,0BAA2B,SAAUC,UACjC,GAAK50D,KAAKgG,SAAWhC,EAAE6e,SAAU7iB,KAAKoG,IAAIf,UAAW,GAAKuvD,SAASlrD,QAAW,CAC1E1J,KAAK60D,wBAIbrjC,QAAS,WACL,IAAIvI,WAAajpB,KAAKomB,QAClB0uC,KAAO7rC,WAAW3S,KAAM,MACxByvC,eAAiB/lD,KAAK4I,QAK1Bm9C,eAAe32C,QAAU22C,eAAe32C,SAAWpL,EAAE0B,OAAO2oB,aAAerqB,EAAE0B,OAAOiH,qBAEpF3M,KAAKoxB,IAAKpxB,KAAK6B,UACXmiD,WAAc,8BAIlBhgD,EAAE0J,OAAQ1N,MACN+0D,WAAY,EACZC,MAAO/rC,WAAWxa,QAAS,YAC3BrI,IAAK,KACL6uD,oBAAqB,GACrBC,mBAAoB,MACpB3vD,eAAgB,KAChBS,QAAS,MACTmvD,WAAY,KACZC,YAAa,KACbnvD,gBAAiB,EACjBE,6BAA8B,QAGlC,GAAKnG,KAAKg1D,MAAM/3D,SAAW,EAAI,CAC3B+C,KAAKg1D,MAAQhxD,EAAG,QAGpB,GAAK+hD,eAAe3Y,SAAW,CAC3BptC,KAAKoG,KACDf,UAAW4jB,WAAWZ,SACtBljB,OAAQ8jB,WAAWZ,SAASgtC,OAC5BzY,YAAa54C,EAAGhE,KAAK6B,SAAU,GAAIyzD,eAAgBR,KAAO,sBAE3D,CACH90D,KAAKoG,IAAMpG,KAAKqtC,SAAUpkB,WAAY6rC,MACtC90D,KAAKu1D,iBAAkBxP,eAAet4C,YAE1CzN,KACKw1D,cAAezP,eAAesO,WAC9BjuD,IAAIqvD,aAAez1D,KAAKoG,IAAIf,UAGjCrF,KAAKoxB,IAAKpxB,KAAKoG,IAAIjB,QAAU61C,OAAU,sBACvCh7C,KAAKoxB,IAAKpxB,KAAK5D,QACX8vC,kBAAmBloC,EAAEixB,MAAOj1B,KAAM,kCAClC01D,OAAQ1xD,EAAEixB,MAAOj1B,KAAM,uBACvBoqD,MAAOpmD,EAAEixB,MAAOj1B,KAAM,wBAE1BA,KAAKoxB,IAAKpxB,KAAK6B,UAAYixB,QAAW,4BAG1Cua,SAAU,SAAUpkB,WAAY6rC,MAC5B,IAAI/O,eAAiB/lD,KAAK4I,QACtBy6C,aAAe0C,eAAe1C,aAC9B/+B,IACInf,OAAQnB,EAAG,gDACXhE,KAAKw8C,sBAAuB,cAAeuJ,eAAe/L,cAAiB,YAC3E4C,YAAa54C,EAAG,gEAChBqB,UAAWrB,EAAG,oEACRq/C,aAAiB,IAAMA,aAAiB,IAAO,aAEzDvuC,SAAW9U,KAAK6B,SAAU,GAAI8zD,yBAElC7gD,SAAS6iB,YAAarT,GAAGnf,OAAQ,IACjC2P,SAAS6iB,YAAarT,GAAGjf,UAAW,IAEpC,GAAKyvD,KAAO,CACRxwC,GAAGnf,OAAOmR,KAAM,KAAMw+C,KAAO,WAC7BxwC,GAAGjf,UAAUiR,KAAM,KAAMw+C,KAAO,UAChCxwC,GAAGs4B,YACEtmC,KAAM,KAAMw+C,KAAO,gBACnBnnC,KAAM,2BAA0BmnC,KAAO,WAIhD90D,KAAKg1D,MAAO,GAAIr9B,YAAa7iB,UAE7BwP,GAAGs4B,YAAYjmB,YAAa1N,YAC5BA,WACK4zB,SACAt2C,SAAU,YACPvG,KAAKw8C,sBAAuB,WAAYuJ,eAAerxB,OAAU,KAC/DqxB,eAAelG,OAAS,qBAAuB,KAC/CkG,eAAe9L,QAAU,iBAAmB,KACjD1kB,SAAUjR,GAAGjf,WAElB,OAAOif,IAGXsxC,kBAAmB,SAAUhB,UACzBA,SAAS1+C,iBACT0+C,SAAShyB,2BACT,GAAK5iC,KAAK4I,QAAQ8rD,YAAc,CAC5B10D,KAAKm3B,QAET,OAAO,OAKX0+B,cAAe,WACX,IAAI1wD,OAASnF,KAAKoG,IAAIjB,OAClB2wD,YAAc91D,KAAKoG,IAAIf,UAAUmiB,YAAa,MAC9CwN,aAAe7vB,OAAOqB,WAAY,SAAUkB,SAI5CquD,eAAiB/1D,KAAK6B,SAAS6F,SAAW,EAE9C,GAAKstB,aAAe+gC,eAAiB,CACjC5wD,OAAOuC,OAAQquD,qBACZ,GAAKD,YAAc9gC,aAAe,CACrC7vB,OAAOuC,OAAQouD,eAIvBE,mBAAoB,SAAUpB,UAC1B,GAAK50D,KAAKgG,SAAW4uD,SAASrwC,UAAYvgB,EAAE0B,OAAO6e,QAAQO,OAAS,CAChE,OAAO9kB,KAAK41D,kBAAmBhB,YAIvC1uD,mBAAoB,WAChB,IAAI+vD,kBAAoBlC,qBAAsB/zD,KAAK5D,QAEnD,GAAK4D,KAAKo1D,YAAc,CACpB,GAAKa,kBAAkB7rC,IAAMpqB,KAAKo1D,YAAYa,kBAAkB7rC,GAC5D6rC,kBAAkB5rC,IAAMrqB,KAAKo1D,YAAYa,kBAAkB5rC,GAC3D4rC,kBAAkB/B,KAAOl0D,KAAKo1D,YAAYa,kBAAkB/B,IAC5D+B,kBAAkB9B,KAAOn0D,KAAKo1D,YAAYa,kBAAkB9B,GAAK,CAEjE,OAAO,UACJ,CAEH99B,aAAcr2B,KAAKo1D,YAAYc,YAIvCl2D,KAAKo1D,aACDc,UAAWl2D,KAAKyyB,OAAQ,iBAAkB,KAC1CwjC,kBAAmBA,mBAGvB,OAAO,MAGXE,eAAgB,WACZ,GAAKn2D,KAAKgG,QAAU,CAChB,IAAMhG,KAAKkG,qBAAuB,CAC9B,GAAKlG,KAAKoG,IAAIf,UAAUgB,SAAU,mBAAsB,CAEpDrG,KAAKoG,IAAIf,UAAUwlB,YAAa,qCAChC7qB,KAAKo2D,YAAchC,WAAY,WAC/Bp0D,KAAK60D,sBAGT70D,KAAK61D,gBACL71D,KAAKo1D,YAAc,KACnBp1D,KAAKmG,6BAA+B,WAErC,CACHnG,KAAKo1D,YAAc,KACnBp1D,KAAKmG,6BAA+B,QAI5CkwD,0BAA2B,WACvBr2D,KAAKiG,gBAAkB,GAG3B4uD,oBAAqB,WACjB,GAAK70D,KAAKiG,gBAAkB,CACxBowB,aAAcr2B,KAAKiG,iBAEvBjG,KAAKiG,gBAAkBjG,KAAKyyB,OAAQ,4BAA6B,MAGrEhsB,oBAAqB,WACjB,GAAKzG,KAAKgG,SAAWhG,KAAKiG,kBAAoB,EAAI,CAC9C,IAAOjG,KAAKkG,sBAAwBlG,KAAKmG,gCACpCnG,KAAKoG,IAAIf,UAAUgB,SAAU,mBAAsB,CAEpDrG,KAAKoG,IAAIf,UACJkB,SAAU,qCACVC,WAAY,YAK7B8vD,+BAAgC,WAC5B,IAAMt2D,KAAKmG,8BAAgCnG,KAAKgG,SAAWhG,KAAKiG,kBAAoB,EAAI,CACpFjG,KAAKkG,qBACLlG,KAAKmG,6BAA+B,OAM5CowD,uBAAwB,SAAU3B,UAC9B,IAAIlrD,OACA8sD,cAAgB5B,SAASlrD,OACzB4a,GAAKtkB,KAAKoG,IAEd,IAAMpG,KAAKgG,QAAU,CACjB,OAGJ,GAAKwwD,gBAAkBlyC,GAAGjf,UAAW,GAAM,CACvCqE,OAAS1F,EAAGwyD,eACZ,IAAMxyD,EAAE6e,SAAUyB,GAAGjf,UAAW,GAAKmxD,eAAkB,CACnDxyD,EAAGhE,KAAK6B,SAAU,GAAI6yC,eAAgBlwC,IAAK,QAASR,EAAEixB,MAAO,WACzDj1B,KAAKy2D,YAAaD,gBACnBx2D,OACHskB,GAAGmxC,aAAajwC,QAChBovC,SAAS1+C,iBACT0+C,SAAShyB,2BACT,OAAO,WACJ,GAAKte,GAAGmxC,aAAc,KAAQnxC,GAAGjf,UAAW,GAAM,CACrDif,GAAGmxC,aAAe/rD,QAI1B1J,KAAK60D,uBAGTrY,sBAAuB,SAAUrZ,OAAQ1kC,OACrC,OAASA,MAAUA,QAAU,OAAS,GAAO0kC,OAAS1kC,MAAc0kC,OAAS,WAGjFoyB,iBAAkB,SAAU92D,OACxB,GAAKA,MAAQ,CACTuB,KAAKoG,IAAIf,UAAUwlB,YAAa7qB,KAAKi1D,qBACrC,GAAKx2D,QAAU,OAAS,CACpBuB,KAAKi1D,oBAAsBjxD,EAAE0B,OAAOytC,wBAAyB10C,OAC7D,GAAKuB,KAAKi1D,sBAAwB,OAAS,CACvCj1D,KAAKi1D,oBAAsB,GAE/Bj1D,KAAKoG,IAAIf,UAAUkB,SAAUvG,KAAKi1D,sBAI1C,OAAOj1D,MAGX+xB,YAAa,SAAU2kC,YACnB,IAAI3Q,eAAiB/lD,KAAK4I,QACtBqgB,WAAajpB,KAAKomB,QAClBjhB,OAASnF,KAAKoG,IAAIjB,OAEtB,GAAKuxD,WAAWrT,eAAiBtjD,UAAY,CACzCC,KAAKoG,IAAIf,UACJwlB,YAAak7B,eAAe1C,cAC5B98C,SAAUmwD,WAAWrT,cAG9B,GAAKqT,WAAWhiC,QAAU30B,UAAY,CAClCkpB,WACK4B,YAAa7qB,KAAKw8C,sBAAuB,WAAYuJ,eAAerxB,QACpEnuB,SAAUvG,KAAKw8C,sBAAuB,WAAYka,WAAWhiC,QAGtE,GAAKgiC,WAAW1c,eAAiBj6C,UAAY,CACzCoF,OACK0lB,YAAa7qB,KAAKw8C,sBAAuB,cAAeuJ,eAAe/L,eACvEzzC,SAAUvG,KAAKw8C,sBAAuB,cAAeka,WAAW1c,eAErE,GAAKh6C,KAAKgG,QAAU,CAChBb,OAAOoB,SAAU,OAIzB,GAAKmwD,WAAW7W,SAAW9/C,UAAY,CACnCkpB,WAAWhK,YAAa,oBAAqBy3C,WAAW7W,QAG5D,GAAK6W,WAAWzc,UAAYl6C,UAAY,CACpCkpB,WAAWhK,YAAa,gBAAiBy3C,WAAWzc,SAGxD,GAAKyc,WAAWjpD,aAAe1N,UAAY,CACvC,IAAMC,KAAKk1D,mBAAqB,CAC5Bl1D,KAAKu1D,iBAAkBmB,WAAWjpD,aAI1C,GAAKipD,WAAWrC,YAAct0D,UAAY,CACtCC,KAAKw1D,cAAekB,WAAWrC,WAGnC,GAAKqC,WAAW9vC,WAAa7mB,UAAY,CACrC,GAAK22D,WAAW9vC,SAAW,CACvB5mB,KAAKm3B,SAIb,OAAOn3B,KAAK4vB,OAAQ8mC,aAGxBlB,cAAe,SAAU/2D,OACrB,IAAIqtD,KAAQnyB,EAAG,GAAIn7B,EAAG,GAAIunC,EAAG,GAAIloC,EAAG,IAChC84D,GAEJ,GAAKl4D,QAAUsB,UAAY,CACvB42D,GAAKC,OAAQn4D,OAAQoI,MAAO,KAE5B7C,EAAEmb,KAAMw3C,GAAI,SAAU3T,IAAK9kC,KAAQy4C,GAAI3T,KAAQthD,SAAUwc,IAAK,MAE9D,OAAQy4C,GAAG15D,QAEP,KAAK,EACD,IAAM+pB,MAAO2vC,GAAI,IAAQ,CACrB7K,IAAInyB,EAAImyB,IAAIttD,EAAIstD,IAAI/lB,EAAI+lB,IAAIjuD,EAAI84D,GAAI,GAExC,MAGJ,KAAK,EACD,IAAM3vC,MAAO2vC,GAAI,IAAQ,CACrB7K,IAAInyB,EAAImyB,IAAI/lB,EAAI4wB,GAAI,GAExB,IAAM3vC,MAAO2vC,GAAI,IAAQ,CACrB7K,IAAIjuD,EAAIiuD,IAAIttD,EAAIm4D,GAAI,GAExB,MAGJ,KAAK,EACD,IAAM3vC,MAAO2vC,GAAI,IAAQ,CACrB7K,IAAInyB,EAAIg9B,GAAI,GAEhB,IAAM3vC,MAAO2vC,GAAI,IAAQ,CACrB7K,IAAIttD,EAAIm4D,GAAI,GAEhB,IAAM3vC,MAAO2vC,GAAI,IAAQ,CACrB7K,IAAI/lB,EAAI4wB,GAAI,GAEhB,IAAM3vC,MAAO2vC,GAAI,IAAQ,CACrB7K,IAAIjuD,EAAI84D,GAAI,GAEhB,MAEJ,QACI,OAIZ32D,KAAKm1D,WAAarJ,IAClB,OAAO9rD,MAGX62D,iBAAkB,SAAUC,UACxB,IAAIC,SACAd,kBAAoBlC,qBAAsB/zD,KAAK5D,QAE/C46D,WACI5sC,EAAGpqB,KAAKm1D,WAAWt3D,EACnBwsB,EAAG4rC,kBAAkB5rC,EAAIrqB,KAAKm1D,WAAWx7B,EACzCu6B,GAAI+B,kBAAkB/B,GAAKl0D,KAAKm1D,WAAWt3D,EAAImC,KAAKm1D,WAAW32D,EAC/D21D,GAAI8B,kBAAkB9B,GAAKn0D,KAAKm1D,WAAWx7B,EAAI35B,KAAKm1D,WAAWpvB,GAGvE,IAAM+wB,SAAW,CAEb92D,KAAKoG,IAAIf,UAAUwgB,IAAK,YAAamxC,UAAU9C,IAGnD6C,UACI7C,GAAIl0D,KAAKoG,IAAIf,UAAU+hB,WAAY,MACnC+sC,GAAIn0D,KAAKoG,IAAIf,UAAUmiB,YAAa,OAGxC,OAASyvC,GAAID,UAAWD,SAAUA,WAGtCG,wBAAyB,SAAUpD,QAASqD,WACxC,IAAI9qC,YACA2qC,UAAYG,UAAUF,GACtBF,SAAWI,UAAUJ,SAKzB1qC,aACI3J,KAAMixC,wBAAyBqD,UAAU9C,GAAI6C,SAAS7C,GAAI8C,UAAU5sC,EAAG0pC,QAAQ1pC,GAC/Ena,IAAK0jD,wBAAyBqD,UAAU7C,GAAI4C,SAAS5C,GAAI6C,UAAU3sC,EAAGypC,QAAQzpC,IAIlFgC,YAAYpc,IAAM0Z,KAAKC,IAAK,EAAGyC,YAAYpc,KAK3Coc,YAAYpc,KAAO0Z,KAAKi/B,IAAKv8B,YAAYpc,IACrC0Z,KAAKC,IAAK,EAAGyC,YAAYpc,IAAM8mD,SAAS5C,GAAKn0D,KAAK6B,SAAS6F,WAE/D,OAAO2kB,aAIX+qC,iBAAkB,SAAUtD,SACxB,OAAO9zD,KAAKk3D,wBAAyBpD,QAAS9zD,KAAK62D,qBAGvDhxD,qBAAsB,SAAUf,mBAAoBC,sBAAuBC,UACvE,IAAIC,cACAC,KAAOlF,KAgBXiF,eACIE,OAAQnB,EAAEoB,WACVC,UAAWrB,EAAEoB,YAGjBH,cAAcE,OAAOoD,KAAM,WACvB,GAAKtD,gBAAkBC,KAAKK,eAAiB,CACzCT,wBAIRG,cAAcI,UAAUkD,KAAM,WAC1B,GAAKtD,gBAAkBC,KAAKK,eAAiB,CACzCR,2BAIRf,EAAEwB,KAAMP,cAAcE,OAAQF,cAAcI,WAAYC,KAAM,WAC1D,GAAKL,gBAAkBC,KAAKK,eAAiB,CACzCL,KAAKK,eAAiB,KACtBP,cAIRE,KAAKK,eAAiBN,eAG1BoyD,SAAU,SAAU9/C,MAKhBvX,KAAKoG,IAAIjB,OACJ0lB,YAAatT,KAAK+/C,eAClB/wD,SAAUgR,KAAKggD,kBAEpBhgD,KAAKtS,cAAcE,OAAO4C,UAE1B,GAAKwP,KAAK9J,YAAc8J,KAAK9J,aAAe,OAAS,CACjD,GAAK8J,KAAKigD,gBAAkB,CACxBx3D,KAAKu1D,iBAAkBh+C,KAAK9J,YAEhC,GAAKzN,KAAKi1D,oBAAsB,CAC5Bj1D,KAAKoG,IAAIf,UACJkB,SAAUgR,KAAKkgD,qBACf5sC,YAAatT,KAAK+/C,eAClBh0B,kBAAmBt/B,EAAEixB,MAAO1d,KAAKtS,cAAcI,UAAW,YAC/D,QAGRrF,KAAKoG,IAAIf,UAAUwlB,YAAatT,KAAK+/C,eACrC//C,KAAKtS,cAAcI,UAAU0C,WAOjC2vD,eAAgB,SAAUC,aACtB,IAAIp1C,OACAm4B,IAAM,KACNub,kBAAoBlC,qBAAsB/zD,KAAK5D,QAC/CguB,EAAIutC,YAAYvtC,EAChBC,EAAIstC,YAAYttC,EAChButC,IAAMD,YAAYvD,WAGtB,GAAKwD,KAAOA,MAAQ,SAAW,CAC3B,GAAKA,MAAQ,SAAW,CACpBxtC,EAAI6rC,kBAAkB/B,GAAK,EAAI+B,kBAAkB7rC,EACjDC,EAAI4rC,kBAAkB9B,GAAK,EAAI8B,kBAAkB5rC,MAC9C,CACH,IACIqwB,IAAM12C,EAAG4zD,KACX,MAAO14D,KACLw7C,IAAM,KAEV,GAAKA,IAAM,CACPA,IAAI74B,OAAQ,YACZ,GAAK64B,IAAIz9C,SAAW,EAAI,CACpBy9C,IAAM,QAOtB,GAAKA,IAAM,CACPn4B,OAASm4B,IAAIn4B,SACb6H,EAAI7H,OAAOG,KAAOg4B,IAAItzB,aAAe,EACrCiD,EAAI9H,OAAOtS,IAAMyqC,IAAIlzB,cAAgB,EAIzC,GAAKxjB,EAAEud,KAAM6I,KAAQ,UAAYpD,MAAOoD,GAAM,CAC1CA,EAAI6rC,kBAAkB/B,GAAK,EAAI+B,kBAAkB7rC,EAErD,GAAKpmB,EAAEud,KAAM8I,KAAQ,UAAYrD,MAAOqD,GAAM,CAC1CA,EAAI4rC,kBAAkB9B,GAAK,EAAI8B,kBAAkB5rC,EAGrD,OAASD,EAAGA,EAAGC,EAAGA,IAGtBwtC,YAAa,SAAUF,aAEnBA,aACIvtC,EAAGutC,YAAYvtC,EACfC,EAAGstC,YAAYttC,EACf+pC,WAAYuD,YAAYvD,YAE5Bp0D,KAAKyxB,SAAU,iBAAkB1xB,UAAW43D,aAC5C33D,KAAKoG,IAAIf,UAAUkd,OAAQviB,KAAKo3D,iBAAkBp3D,KAAK03D,eAAgBC,gBAG3EvB,WAAY,SAAUuB,aAClB,GAAK33D,KAAKgG,QAAU,CAChBhG,KAAK63D,YAAaF,eAI1BlB,YAAa,SAAUqB,gBACnB,GAAKA,iBAAmB93D,KAAK5D,OAAQ,IACjC07D,eAAerxC,SAASrlB,gBAAkB,OAAS,CAC/C4C,EAAG8zD,gBAAiBnjB,SAIhCojB,2BAA4B,WACxB,IAAI9xC,GAAKjmB,KAAKomB,QAAQ9P,KAAM,MACxB0hD,WAAah4D,KAAKoG,IAAIf,UAAU+M,KAAM,cAAe2I,QAEzD/a,KAAKoG,IAAIf,UAAUkB,SAAU,mBAC7BvG,KAAKgG,QAAU,KACfhG,KAAK61D,gBAGL,IAAM7xD,EAAE6e,SAAU7iB,KAAKoG,IAAIf,UAAW,GAAKrF,KAAK6B,SAAU,GAAI6yC,eAAkB,CAC5E10C,KAAKy2D,YAAaz2D,KAAK6B,SAAU,GAAI6yC,eAEzC,GAAKsjB,WAAW/6D,OAAS,EAAI,CACzB+C,KAAKoG,IAAIqvD,aAAeuC,WAE5Bh4D,KAAK60D,sBACL,GAAK5uC,GAAK,CACNjmB,KAAK6B,SAASuQ,KAAM,qCAAwC6T,GAAK,MAAO3P,KAAM,gBAAiB,MAEnGtW,KAAKyxB,SAAU,cAGnBwmC,MAAO,SAAUrvD,SACb,IAAI+uD,YAAc3zD,EAAE0J,UAAY1N,KAAK4I,QAASA,SAE1CsvD,iBAAqB,WACjB,IAAIj3D,GAAKC,UAAUC,UAEfg6B,QAAUl6B,GAAGO,MAAO,2BACpB45B,YAAcD,SAAWA,QAAS,GAClCg9B,aAAel3D,GAAGO,MAAO,0BACzB42D,aAAeD,cAAgBA,aAAc,GAC7CE,YAAcp3D,GAAGoC,QAAS,WAAc,EAG5C,GAAK80D,eAAiB,MAAQC,aAAe,OAASh9B,WAAaA,UAAY,SAAWi9B,YAAc,CACpG,OAAO,KAEX,OAAO,MAbQ,GAmBvBr4D,KAAK6F,qBACD7B,EAAE2tB,KACF3tB,EAAE2tB,KACF3tB,EAAEixB,MAAOj1B,KAAM,+BAEnBA,KAAKk1D,mBAAqByC,YAAYlqD,WACtCzN,KAAKu1D,iBAAkBoC,YAAYlqD,YAEnCzN,KAAKoG,IAAIjB,OAAO0lB,YAAa,oBAC7B7qB,KAAKoG,IAAIf,UAAUwlB,YAAa,qBAGhC7qB,KAAK63D,YAAaF,aAElB33D,KAAKoG,IAAIf,UAAUwlB,YAAa,mBAEhC,GAAK7qB,KAAK4I,QAAQoxC,cAAgBke,iBAAmB,CASjDl4D,KAAKomB,QAAQ3X,QAAS,YAAalI,SAAU,iBAEjDvG,KAAKq3D,UACDiB,oBAAqB,KACrB7qD,WAAYkqD,YAAYlqD,WACxB6pD,cAAe,GACfC,iBAAkB,KAClBE,oBAAqB,KACrBD,gBAAiB,MACjBvyD,cAAejF,KAAKuF,kBAI5BgzD,yBAA0B,WACtBv4D,KAAKoG,IAAIjB,OACJ0lB,YAAa,OACbtkB,SAAU,qBAGnBiyD,4BAA6B,WACzBx4D,KAAKoG,IAAIf,UACJwlB,YAAa,eACbtkB,SAAU,qCACVC,WAAY,UAGrBiyD,wBAAyB,WACrB,IAAIpzD,UAAYrF,KAAKoG,IAAIf,UACrB4gB,GAAKjmB,KAAKomB,QAAQ9P,KAAM,MAG5BtS,EAAE0B,OAAOE,MAAM6P,OAAS1V,UAGxBiE,EAAG,SAAUqB,UAAW,IAAM2b,IAAK3b,UAAW,IAAMsvC,OAEpD,GAAK1uB,GAAK,CACNjmB,KAAK6B,SAASuQ,KAAM,qCAAwC6T,GAAK,MAAO3P,KAAM,gBAAiB,OAInGtW,KAAKyxB,SAAU,eAGnBinC,OAAQ,SAAUC,WACd34D,KAAKoG,IAAIf,UAAUwlB,YAAa,mBAChC7qB,KAAKg1D,MAAMnqC,YAAa,iBAExB7qB,KAAKgG,QAAU,MAKfhG,KAAK6F,qBACD7B,EAAEixB,MAAOj1B,KAAM,4BACfgE,EAAEixB,MAAOj1B,KAAM,+BACfgE,EAAEixB,MAAOj1B,KAAM,4BAEnBA,KAAKq3D,UACDiB,oBAAqBt4D,KAAKoG,IAAIjB,OAAOkB,SAAU,MAC/CoH,WAAckrD,UAAY,OAAW34D,KAAwB,mBAC7Ds3D,cAAe,KACfC,iBAAkB,MAClBE,oBAAqB,cACrBD,gBAAiB,KACjBvyD,cAAejF,KAAKuF,kBAI5BqzD,WAAY,WACR,GAAK54D,KAAK4I,QAAQwkC,SAAW,CACzB,OAIJptC,KAAK+xB,aAAe2C,MAAO1wB,EAAE0B,OAAOE,MAAMvI,UAAUuL,QAAQ8rB,QAC5D10B,KAAKomB,QAOAy2B,SACAlmB,YAAa32B,KAAKoG,IAAIw2C,aACtB/xB,YAAa,4DAClB7qB,KAAKoG,IAAIjB,OAAO2oB,SAChB9tB,KAAKoG,IAAIf,UAAUyoB,SACnB9tB,KAAKoG,IAAIw2C,YAAY9uB,UAGzB8D,SAAU,WACN,GAAK5tB,EAAE0B,OAAOE,MAAM6P,SAAWzV,KAAO,CAClCA,KAAKomB,QAAQ5hB,IAAK,kBAAmBR,EAAEixB,MAAOj1B,KAAM,eACpDA,KAAKm3B,YACF,CACHn3B,KAAK44D,aAGT,OAAO54D,MAGX64D,YAAa,SAAUjE,SAAUl4D,MAC7B,IAAIo8D,UAAWhrD,MACXi4C,eAAiB/lD,KAAK4I,QACtB+vD,UAAY,MAEhB,GAAO/D,UAAYA,SAAS3hC,sBAA0BjvB,EAAE0B,OAAOE,MAAM6P,SAAWzV,KAAO,CACnF,OAIJ5D,OAAO+tB,SAAU,EAAGnqB,KAAK+0D,YAEzB,GAAKH,UAAYA,SAASrzC,OAAS,oBAAsB7kB,KAAO,CAG5D,UAAYA,KAAKmZ,SAAW,SAAW,CACnCijD,UAAYp8D,KAAKmZ,WACd,CACHijD,UAAYp8D,KAAKmZ,OAAOnH,QAAS,OAErCoqD,UAAY90D,EAAE0B,OAAOqI,KAAKgI,SAAU+iD,WACpChrD,MAAQgrD,UAAUz+B,SAAWy+B,UAAUp9B,OAASo9B,UAAU1lD,KAE1D,GAAKpT,KAAK+4D,SAAW/0D,EAAE0B,OAAOqI,KAAKC,gBAAiBF,OAAU,CAE1D6qD,UAAY,SACT,CACH/D,SAAS1+C,kBAKjBlW,KAAK5D,OAAOgI,IAAK2hD,eAAe0O,aAEhCz0D,KAAKomB,QAAQ/D,WAAY0jC,eAAeuO,kBAAmBvO,eAAewO,iBAE1Ev0D,KAAK04D,OAAQC,YAMjBK,oBAAqB,WACjBh5D,KAAK5D,OACA8H,GAAIlE,KAAK4I,QAAQ6rD,YAAazwD,EAAEixB,MAAOj1B,KAAM,iBAGtDkvB,OAAQ,WACJ,OAAOlvB,KAAKoG,IAAIf,WAKpB4xB,KAAM,SAAUruB,SACZ,IAAI2F,IAAK0qD,QAASzqD,WAAY0qD,gBAAiBv4B,QAASw4B,WACpDj0D,KAAOlF,KACP+lD,eAAiB/lD,KAAK4I,QAG1B,GAAK5E,EAAE0B,OAAOE,MAAM6P,QAAUswC,eAAen/B,SAAW,CACpD,OAAO5mB,KAIXgE,EAAE0B,OAAOE,MAAM6P,OAASzV,KACxBA,KAAK+0D,WAAa/0D,KAAK5D,OAAO04B,YAI9B,IAAQixB,eAAuB,QAAI,CAC/B7gD,KAAK+yD,MAAOrvD,SACZ1D,KAAK8zD,sBAKL9zD,KAAKkhB,QACAhE,SAAU2jC,eAAeuO,kBAAmBvO,eAAewO,gBAAiB,SAAUK,UACnF1vD,KAAKiyB,QACLy9B,SAAS1+C,mBAGjB,OAAOlW,KAIXm5D,WAAan1D,EAAE0B,OAAOsL,SAAS5B,QAC/B6pD,QAAUj1D,EAAE0B,OAAOopB,cACnBtgB,WAAaxK,EAAE0B,OAAO8I,WACtB0qD,gBAAoB1qD,WAAaA,WAAWnI,SAAU,aAAgB,MACtErG,KAAK+4D,OAASxqD,IAAM4qD,WAAWzjD,YAAYnH,IAC3CoyB,QAAYpyB,IAAIlL,QAAS41D,UAAa,IAAQC,iBAAqBC,WAAWtmD,YAAc,EAE5F,GAAK8tB,QAAU,CACXz7B,KAAK+yD,MAAOrvD,SACZ1D,KAAK8zD,sBACL,OAAOh5D,KAKX,GAAKuO,IAAIlL,QAAS41D,YAAe,IAAMC,gBAAkB,CACrD3qD,IAAMA,KAAOA,IAAIlL,QAAS,MAAS,EAAI41D,QAAU,IAAMA,aACpD,CACH1qD,IAAMvK,EAAE0B,OAAOqI,KAAK8vB,gBAAgBzqB,KAAO6lD,QAI/Cj5D,KAAK5D,OAAOoI,IAAK,iBAAkB,SAAUowD,UACzCA,SAAS1+C,iBACThR,KAAK+yD,MAAOrvD,SACZ1D,KAAK8zD,wBAGTh5D,KAAKo5D,WAAa,KAClBp1D,EAAE0B,OAAOsL,SAAUzC,KAAOm/B,KAAM,WAEhC,OAAO1tC,MAGXm3B,MAAO,WAEH,GAAKnzB,EAAE0B,OAAOE,MAAM6P,SAAWzV,KAAO,CAClC,OAAOA,KAGXA,KAAK+0D,WAAa/0D,KAAK5D,OAAO04B,YAE9B,GAAK90B,KAAK4I,QAAQwG,SAAWpP,KAAKo5D,WAAa,CAC3Cp1D,EAAE0B,OAAO+J,OACTzP,KAAKo5D,WAAa,UACf,CAEHp5D,KAAK64D,cAGT,OAAO74D,QAKfgE,EAAE0B,OAAOE,MAAMyzD,WAAa,SAAU5iB,OAClC,IAAIl0B,OACAxU,KAAO/J,EAAE0B,OAAOqI,KAIhBnI,MAAQ5B,EAAG+J,KAAK2yB,eAAgB3yB,KAAKgI,SAAU0gC,MAAMngC,KAAM,SAAWlD,OAAS2H,QAEnF,GAAKnV,MAAM3I,OAAS,GAAK2I,MAAMlJ,KAAM,gBAAmB,CACpD6lB,OAASk0B,MAAMl0B,SACf3c,MAAMA,MAAO,QACTwkB,EAAG7H,OAAOG,KAAO+zB,MAAMrvB,aAAe,EACtCiD,EAAG9H,OAAOtS,IAAMwmC,MAAMjvB,cAAgB,EACtC/Z,WAAYgpC,MAAM/nC,QAAS,cAC3B0lD,WAAY3d,MAAM/nC,QAAS,iBAKnC1G,WAAY,WACRyuC,MAAM5rB,YAAa7mB,EAAE0B,OAAOolB,iBAC7B,MAIP9mB,EAAE0B,OAAO7D,SAASqC,GAAI,mBAAoB,SAAU0wD,SAAUl4D,MAC1D,GAAKA,KAAKkM,QAAQ8kC,OAAS,QAAU,CACjC1pC,EAAE0B,OAAOE,MAAMyzD,WAAY38D,KAAKkM,QAAQ2xB,MACxCq6B,SAAS1+C,qBA17BjB,CA87BI6F,SAMJ,SAAW/X,EAAGjE,WAEd,IAAIu5D,wBAA0B,gGAC1BC,iBAAmB,SAAUzY,KAAMp3C,OAAQ6M,WACvC,IAAIijD,SAAW1Y,KAAMvqC,UAAY,SAC5B8W,IAAKisC,yBACLv+C,QAGL,GAAKy+C,SAASv8D,OAAS,CACnByM,OACKirC,OACAr+B,KAAM,WAAY,MAEvBkjD,SAASpnD,KAAM,KAAM2I,QAAQyK,UAIzCxhB,EAAEkrB,OAAQ,oBAAqBlrB,EAAE0B,OAAO+zD,YACpCjoC,QAAS,WACL,IAAIrzB,EAAI6B,KAAK4I,QAIbzK,EAAEq0D,WAAar0D,EAAEq0D,YAAgBxyD,KAAKomB,QAAQN,QAAS,wCAAyC7oB,OAAS,EAEzG,OAAO+C,KAAK4vB,UAGhB8pC,mBAAoB,WAChB15D,KAAKomB,QAAQuuB,OACb30C,KAAKyyD,OAAOjtC,SAGhB6lC,eAAgB,SAAU7iD,OACtBxI,KAAK4vB,OAAQpnB,OACbxI,KAAK25D,2BAA4BnxD,QAGrCmxD,2BAA4B,SAAUnxD,OAClC,GAAKxI,KAAK4I,QAAQge,UAAY5mB,KAAK45D,QAAU55D,KAAK4I,QAAQ4pD,WAAa,CACnE,OAGJ,GAAIhqD,MAAM+Y,OAAS,UACX/Y,MAAM+b,UAAY/b,MAAM+b,UAAYvgB,EAAE0B,OAAO6e,QAAQM,OAASrc,MAAM+b,UAAYvgB,EAAE0B,OAAO6e,QAAQc,OAAQ,CAE7GrlB,KAAK65D,gBACL,GAAK75D,KAAK85D,WAAa,UAAY,CAC/B95D,KAAKyyD,OAAOn8C,KAAM,OAAQ,IAAMtW,KAAK+5D,SAAUzjD,KAAM,SAAYtS,EAAE0B,OAAO0jB,IAAM,IAAO,MAAO,aAC3F,CACHppB,KAAKyyD,OAAOn8C,KAAM,OAAQ,IAAMtW,KAAKg6D,UAAW1jD,KAAM,SAAYtS,EAAE0B,OAAO0jB,IAAM,IAAO,MAAO,UAEnGppB,KAAK45D,OAAS,OAKtBK,iBAAkB,SAAU/uC,GACxB,IAAIrX,OAAWqX,EAAE3J,OAAS,WACpB24C,SAAU,IAAK1xD,MAAO,eACtB0xD,SAAU,KAAM1xD,MAAO,aAE7BxE,EAAGknB,EAAExhB,QACA4M,KAAM,WAAYzC,OAAOqmD,UACzB3gD,QAAS1F,OAAOrL,QAGzB2xD,mBAAoB,SAAU3xD,OAC1B,IAAIkB,OAAS1F,EAAGwE,MAAMkB,QAClB+3C,GAAK/3C,OAAO+E,QAAS,MAGzB,OAASjG,MAAM+b,SAEf,KAAK,GACDg1C,iBAAkB9X,GAAI/3C,OAAQ,QAC9B,OAAO,MAEX,KAAK,GACD6vD,iBAAkB9X,GAAI/3C,OAAQ,QAC9B,OAAO,MAEX,KAAK,GACL,KAAK,GACDA,OAAO6P,QAAS,SAChB,OAAO,QAIf6gD,oBAAqB,WAGjBp6D,KAAKq6D,kBAcLr6D,KAAKs6D,SAAS5uD,KAAM,eAGxB6uD,wBAAyB,WACrB,GAAKv6D,KAAK85D,WAAa,UAAY,CAC/B95D,KAAKm3B,QACL,OAAO,QAIfqjC,qBAAsB,SAAUhyD,OAC5B,IAAIiyD,SAAWz2D,EAAGwE,MAAMkB,QAAS+E,QAAS,MAGtCisD,SAAW16D,KAAK4yD,OAAQ,GAAIpH,cAC5BmP,SAAW32D,EAAE0B,OAAO4Z,aAAcm7C,SAAU,gBAC5ClyC,OAASvoB,KAAK2yD,iBAAiB5sC,GAAI40C,UAAY,GAGnDpyC,OAAO8qC,SAAWrzD,KAAKgzD,YAAczqC,OAAO8qC,SAAW,KAGvD,GAAKrzD,KAAKgzD,WAAa,CACnByH,SAASroD,KAAM,KACV6M,YAAa,iBAAkBsJ,OAAO8qC,UACtCp0C,YAAa,mBAAoBsJ,OAAO8qC,UAIjD,IAAMrzD,KAAKgzD,YAAc0H,WAAaC,SAAW,CAC7C36D,KAAK46D,eAAiB,KAM1B,GAAK56D,KAAKgzD,WAAa,CACnBhzD,KAAK4yD,OAAOr5C,QAAS,UACrBvZ,KAAKyiD,KAAKrwC,KAAM,0BAA2B2T,GAAI40C,UAC1CvoD,KAAM,KAAM2I,QAAQyK,YAExB,CACDxlB,KAAKm3B,QAGT3uB,MAAM0N,kBAGVk9C,MAAO,WACH,IAAIN,SAAUiH,QAASC,SAAUxW,MAAO8W,SAAUtH,WAAY6H,OAC1DC,UAAW9gB,aAAc+gB,iBAAkBC,iBAC3CC,SAAUC,QAASzY,KAAM0Y,OAAQC,YAAaC,gBAC9CC,cAAeC,YACfp9D,EAAI6B,KAAK4I,QAEb,GAAKzK,EAAEq0D,WAAa,CAChB,OAAOxyD,KAAK4vB,SAGhBkjC,SAAW9yD,KAAK8yD,SAChBiH,QAAUjH,SAAW,WACrBkH,SAAWlH,SAAW,UACtBtP,MAAQxjD,KAAKwjD,MACb8W,SAAWt6D,KAAKomB,QAAQ3X,QAAS,YACjCukD,WAAahzD,KAAKomB,QAAS,GAAI6sC,SAC/B4H,OAAS/H,SAAW,QACpBgI,UAAY38D,EAAEu2B,MAAU,SAAW1wB,EAAE0B,OAAO0jB,GAAK,UAAYjrB,EAAEu2B,MAAQ,IAAQ,GAC/EslB,aAAe77C,EAAE67C,cAAgB77C,EAAEu2B,OAAS,KAC5CqmC,iBAAmB/gB,aAAiB,SAAWh2C,EAAE0B,OAAO0jB,GACpD,kBAAoB4wB,aAAe,IAAQ,GAC/CghB,iBAAqB78D,EAAEuhD,cAAgBsT,WAAiB,SAAWhvD,EAAE0B,OAAO0jB,GAAK,kBAAoBjrB,EAAEuhD,aAAe,IAAQ,GAC9Hub,SAAWj3D,EAAG,aAAeA,EAAE0B,OAAO0jB,GAAK,2CAA6C4wC,SAAW,IAAMc,UAAYC,iBAAmB,IACpI,aAAe/2D,EAAE0B,OAAO0jB,GAAK,iBAC7B,+BACA,SACA,aAAeplB,EAAE0B,OAAO0jB,GAAK,wBAC7B,UACJ8xC,QAAUl3D,EAAG,OAAS82D,UAAYC,iBAAmB,QAAUhB,QACvD,kCACHpjC,YAAa32B,KAAK4yD,QAClBhtD,QACL68C,KAAOz+C,EAAG,sCAAwC62D,OAAS,qCAAuC76D,KAAK+yD,SAAW,IAAM+H,UAAYE,iBAAmB,UAAWzlC,SAAU2lC,SAC5KC,OAASn3D,EAAG,iCAAoC7F,EAAEu2B,MAAQv2B,EAAEu2B,MAAQ,WAAc,YAAagE,UAAWwiC,SAC1GE,YAAcp3D,EAAG,8BAA+BuxB,SAAU4lC,QAE1D,GAAKn7D,KAAKgzD,WAAa,CACnBuI,YAAcv3D,EAAG,OACb0pC,KAAQ,SACRrgC,KAAQlP,EAAEo0D,UACVv8C,KAAQ,IACRskC,MAAS,uEACV/kB,SAAU4lC,QAGjBn3D,EAAE0J,OAAQ1N,MACN8yD,SAAUA,SACV+H,OAAQA,OACRd,QAASA,QACTC,SAAUA,SACVM,SAAUA,SACVW,SAAUA,SACVzX,MAAOA,MACPwP,WAAYA,WACZt+B,MAAOv2B,EAAEu2B,MACTwmC,QAASA,QACTzY,KAAMA,KACN0Y,OAAQA,OACRC,YAAaA,YACbG,YAAaA,YACbF,gBAAiBA,gBACjBC,cAAeA,cACf1e,YAAa,KAIjB58C,KAAK88C,UAEL,GAAK98C,KAAKw7D,gBAAkBz7D,UAAY,CAMpCC,KAAKw7D,cAAkBx7D,KAAK4yD,OAAQ,GAAItzC,aAAc,cAAiB,KAAS,MAAQtf,KAAK4yD,OAAOt8C,KAAM,YAE9GtW,KAAK4yD,OAAOt8C,KAAM,WAAY,MAC9BtW,KAAKoxB,IAAKpxB,KAAK4yD,QAAUptC,MAAQ,uBAGjCxlB,KAAKoxB,IAAKpxB,KAAKyyD,QACXzX,OAAQ,+BAIZh7C,KAAKyiD,KAAKnsC,KAAM,OAAQ,WACxBtW,KAAKoxB,IAAKpxB,KAAKyiD,MACX3vB,QAAW,mBACXC,SAAY,mBACZy3B,QAAW,qBACXiR,+DAAgE,yBAKpEz7D,KAAKoxB,IAAKpxB,KAAKi7D,UAAYS,SAAU,wBAGrC17D,KAAKoxB,IAAKpxB,KAAKk7D,SAAWS,gBAAiB,iBAG3C,GAAK37D,KAAKgzD,WAAa,CACnBhzD,KAAKoxB,IAAKpxB,KAAKu7D,aAAergB,MAAO,4BAGzC,OAAOl7C,MAGX47D,aAAc,WACV57D,KAAKm3B,QACLn3B,KAAKq6D,mBAGTA,gBAAiB,WACb,GAAKr6D,KAAK46D,eAAiB,CACvB56D,KAAKomB,QAAQ7M,QAAS,UAE1BvZ,KAAK46D,eAAiB,OAG1BiB,mBAAoB,WAChB,IAAIpZ,KAAOziD,KAAKyiD,KAAKrwC,KAAM,MACvBxJ,QAAU5I,KAAK2yD,iBAAiBtlC,IAAK,qBAKzC,OAAOzkB,QAAQyE,SAAWo1C,KAAKp1C,QAGnCgmD,SAAU,WACN,OAAOrzD,KAAK2yD,iBAAiB9wC,OAAQ,kDAGzCi7B,QAAS,SAAUjJ,OACf,IAAI3uC,KAAM42D,QAEV,GAAK97D,KAAK4I,QAAQ4pD,WAAa,CAC3B,OAAOxyD,KAAK4vB,OAAQikB,OAGxB3uC,KAAOlF,KACP,GAAK6zC,OAAS7zC,KAAK67D,qBAAuB,CACtC32D,KAAK62D,aAGTD,QAAU97D,KAAKszD,kBAEfpuD,KAAKguD,gBACLhuD,KAAKsuD,iBAELtuD,KAAKu9C,KAAKrwC,KAAM,0BACXA,KAAM,KAAMyY,YAAa7mB,EAAE0B,OAAOolB,gBAAiBozB,MACnD5nC,KAAM,gBAAiB,OACvB6I,KAAK,SAAUpiB,GACZ,IAAI+jD,KAAO98C,EAAGhE,MACd,GAAKgE,EAAE8yC,QAAS/5C,EAAG++D,UAAa,EAAI,CAGhChb,KAAKxqC,KAAM,gBAAiB,MAG5B,GAAKpR,KAAK8tD,WAAa,CACnBlS,KAAK1uC,KAAM,KAAMyY,YAAa,mBAAoBtkB,SAAU,sBACzD,CACH,GAAKu6C,KAAKz6C,SAAU,oBAAuB,CACvCy6C,KAAKhtB,OAAO1hB,KAAM,KAAM7L,SAAUvC,EAAE0B,OAAOolB,oBACxC,CACHg2B,KAAK1uC,KAAM,KAAM7L,SAAUvC,EAAE0B,OAAOolB,uBAGzC,GAAK5lB,KAAK8tD,WAAa,CAC1BlS,KAAK1uC,KAAM,KAAMyY,YAAa,kBAAmBtkB,SAAU,uBAK3E4wB,MAAO,WACH,GAAKn3B,KAAK4I,QAAQge,WAAa5mB,KAAK45D,OAAS,CACzC,OAGJ,IAAI10D,KAAOlF,KAEX,GAAKkF,KAAK40D,WAAa,OAAS,CAC5B50D,KAAK+1D,SAASztB,OAAQ,SACtBtoC,KAAKu9C,KAAKltB,SAAUrwB,KAAKg2D,aACtB,CACHh2D,KAAKg2D,QAAQt1D,MAAO,SAGxBV,KAAKwtD,eAELxtD,KAAK00D,OAAS,OAGlB3iC,KAAM,WACFj3B,KAAKyyD,OAAOvX,SAGhB8gB,eAAgB,WACZ,IAAIz3D,SAAWvE,KAAKyiD,KAAKrwC,KAAM,KAAOpO,EAAE0B,OAAOolB,gBAC/C,GAAKvmB,SAAStH,SAAW,EAAI,CACzBsH,SAAWvE,KAAKyiD,KAAKrwC,KAAM,UAAYknD,wBAA0B,cAErE/0D,SAASwW,QAAQyK,SAGrBq0C,cAAe,WACX,IAAI30D,KAAOlF,KACPwH,QAAUxH,KAAK5D,OACf6/D,eAAiB/2D,KAAKu9C,KAAKp6B,SAC3B6zC,WAAaD,eAAez0C,cAC5BsN,UAAYttB,QAAQstB,YACpBqnC,UAAYj3D,KAAKutD,OAAOlwC,SAAStS,IACjC+kB,aAAextB,QAAQE,SAE3B,GAAKw0D,WAAalnC,aAAe,KAAOhxB,EAAE8jB,QAAQgN,UAAY,CAE1D5vB,KAAK+1D,SAAS1lC,SAAUvxB,EAAE0B,OAAOmpB,eAAgBnjB,OACjDxG,KAAKm2D,gBAAkBn2D,KAAK+1D,SAAS7oD,KAAM,eAC3ClN,KAAKo2D,cAAgBp2D,KAAK+1D,SAAS7oD,KAAM,gBAKzClN,KAAKo1D,SAASn4C,OAAQ,mBAGtB,GAAK2S,YAAc,GAAKqnC,UAAYnnC,aAAe,CAC/C9vB,KAAKo1D,SAAS91D,IAAK,WAAY,WAC3BR,EAAGhE,MAAO0O,QAAS,aAAcytD,aAIzCj3D,KAAK+1D,SAASz2D,KACV2sD,SAAUntD,EAAEixB,MAAOj1B,KAAM,kBACzB07D,SAAU13D,EAAEixB,MAAOj1B,KAAM,WAG7BkF,KAAK40D,SAAW,OAChB50D,KAAKm2D,gBAAgBvhC,OAAQ50B,KAAKu9C,MAClCv9C,KAAK+1D,SACA7oD,KAAM,iBACF/E,KAAMnI,KAAKs+C,MAAM91B,kBAAoBxoB,KAAK03C,iBAChD,CACH13C,KAAK40D,SAAW,UAEhB50D,KAAKg2D,QAAQ12D,KAAO43D,eAAgBp4D,EAAEixB,MAAOj1B,KAAM,sBAI3D+7D,WAAY,WACR,IAAI72D,KAAOlF,KACP7B,EAAI6B,KAAK4I,QACTg0C,YAAc58C,KAAK48C,YACnByf,gBAAkB,KAClBC,SAAW,QACXC,SAAUC,WAAY5J,OACtB6J,WAAa,QAAUz4D,EAAE0B,OAAO0jB,GAChCszC,cAAgBD,WAAa,eAC7BE,aAAeF,WAAa,OAC5BG,aAAeH,WAAa,OAC5BI,oBAAsBJ,WAAa,cACnC3nD,SAAWjT,SAAS8zD,yBACpBmH,kBAAoB,MACpBC,SACAhgE,EACAwrB,OAAQy0C,QAAS30C,OAAQhb,KAAM8uC,OAAQoD,QACvC0d,SAAUva,QAAS5B,KAEvB57C,KAAKu9C,KAAKV,QAAQlgC,OAAQ,gBAAiBqgC,SAAU,WACrDqa,SAAWv8D,KAAK2yD,iBAChB6J,WAAaD,SAASt/D,OACtB21D,OAAS5yD,KAAK4yD,OAAQ,GAEtB,IAAM71D,EAAI,EAAGA,EAAIy/D,WAAWz/D,IAAK+/D,kBAAoB,MAAO,CACxDv0C,OAASg0C,SAASx/D,GAClBigE,QAAUh5D,EAAGukB,QAGb,GAAKy0C,QAAQ32D,SAAU,oBAAuB,CAC1C,SAGJgiB,OAASE,OAAO7B,WAChB64B,WAOAlyC,KAAO2vD,QAAQ3vD,OACf8uC,OAASt6C,SAASmmB,cAAe,KACjCm0B,OAAO58B,aAAc,OAAQ,KAC7B48B,OAAOxkB,YAAa91B,SAAS8gD,eAAgBt1C,OAG7C,GAAKgb,SAAWuqC,QAAUvqC,OAAO5B,SAASrlB,gBAAkB,WAAa,CACrE67D,SAAW50C,OAAO/I,aAAc,SAChC,GAAK29C,WAAaF,SAAW,CACzBra,QAAU7gD,SAASmmB,cAAe,MAClC06B,QAAQnjC,aAAcq9C,aAAc,gBACpCla,QAAQnjC,aAAc,OAAQ,UAC9BmjC,QAAQnjC,aAAc,WAAY,MAClCmjC,QAAQ/qB,YAAa91B,SAAS8gD,eAAgBsa,WAC9CnoD,SAAS6iB,YAAa+qB,SACtBqa,SAAWE,UAInB,GAAKZ,mBAAsB9zC,OAAOjJ,aAAc,UAAajS,KAAKpQ,SAAW,GAAK+/D,QAAQtuD,QAAS,gBAAoB,CACnH2tD,gBAAkB,MAClBS,kBAAoB,KAKpB,GAAK,OAASv0C,OAAOjJ,aAAcu9C,qBAAwB,CACvD78D,KAAKk9D,uBAAyB,KAElC30C,OAAOhJ,aAAcs9C,oBAAqB,MAC1C,GAAK1+D,EAAEm0D,yBAA2B,CAC9B/S,QAAQpiD,KAAM,oBAElB,GAAKy/C,cAAgBvvC,KAAO,CACxBuvC,YAAc13C,KAAK03C,YAAcvvC,MAIzCyzC,KAAOj/C,SAASmmB,cAAe,MAC/B,GAAKO,OAAO3B,SAAW,CACnB24B,QAAQpiD,KAAM,qBACd2jD,KAAKvhC,aAAc,gBAAiB,MAExCuhC,KAAKvhC,aAAcm9C,cAAe3/D,GAClC+jD,KAAKvhC,aAAco9C,aAAcL,UACjC,GAAKQ,kBAAoB,CACrBhc,KAAKvhC,aAAcs9C,oBAAqB,MAE5C/b,KAAKzhC,UAAYkgC,QAAQ99B,KAAM,KAC/Bq/B,KAAKvhC,aAAc,OAAQ,UAC3B48B,OAAO58B,aAAc,WAAY,MACjC,GAAKvf,KAAKgzD,WAAa,CACnBhvD,EAAGm4C,QAAS51C,SAAU,4CAG1Bu6C,KAAKnpB,YAAawkB,QAClBrnC,SAAS6iB,YAAampB,MAG1B57C,KAAKu9C,KAAK,GAAG9qB,YAAa7iB,UAG1B,IAAM9U,KAAKgzD,aAAepW,YAAY3/C,OAAS,CAC3C+C,KAAKm7D,OAAO50D,SAAU,wBACnB,CACHvG,KAAKo7D,YAAY/tD,KAAMrN,KAAK48C,aAIhC13C,KAAKu9C,KAAKP,YAGdiE,QAAS,WACL,OAAOnmD,KAAK4I,QAAQ4pD,WAChBxyD,KAAK4vB,SACL5rB,EAAG,OACCgS,KAAQ,IACR03B,KAAQ,SAERznB,GAAMjmB,KAAK+yD,SACXoK,gBAAiB,OAGjBC,YAAap9D,KAAK66D,UAI9BjpC,SAAU,WAEN,IAAM5xB,KAAK4I,QAAQ4pD,WAAa,CAC5BxyD,KAAKm3B,QAGL,GAAKn3B,KAAKw7D,gBAAkBz7D,UAAY,CACpC,GAAKC,KAAKw7D,gBAAkB,MAAQ,CAChCx7D,KAAK4yD,OAAOt8C,KAAM,WAAYtW,KAAKw7D,mBAChC,CACHx7D,KAAK4yD,OAAOpsD,WAAY,aAKhC,GAAKxG,KAAKk9D,uBAAyB,CAC/Bl9D,KAAK2yD,iBAAiBnsD,WAAY,QAAUxC,EAAE0B,OAAO0jB,GAAK,eAI9DppB,KAAKk7D,QAAQptC,SAGb9tB,KAAKi7D,SAASntC,SAIlB9tB,KAAK4vB,aAnjBb,CAujBI7T,SAKJ,SAAW/X,EAAGjE,WAQd,IAAIs9D,sBACIC,YAAc,SACdC,gBAAkB,UAClBC,gBAAkB,SAClBC,iBAAmB,aACnBC,UAAY,QAEhBC,aAAe,WACX,IAAI/9C,IAAM5b,EAAE0B,OAAO4Z,aAAaxf,MAAOE,KAAMyX,WAE7C,OAASmI,KAAO,KAAO7f,UAAY6f,KAEvCg+C,iBAAmB,SAWvB,SAASC,iBAAkBj1D,QAASk1D,iBAChC,IAAIve,QAAUue,gBAAkBA,mBAGhCve,QAAQpiD,KAAM,UAGd,GAAKyL,QAAQ8rB,MAAQ,CACjB6qB,QAAQpiD,KAAM,UAAYyL,QAAQ8rB,OAItC,GAAK9rB,QAAQ02C,KAAO,CAChBC,QAAUA,QAAQl+B,QACd,WAAazY,QAAQ02C,KACrB,eAAiB12C,QAAQ0yC,UAE7B,GAAK1yC,QAAQo9C,WAAa,CACtBzG,QAAQpiD,KAAM,mBAKtB,GAAKyL,QAAQq9C,OAAS,CAClB1G,QAAQpiD,KAAM,iBAElB,GAAKyL,QAAQi3C,OAAS,CAClBN,QAAQpiD,KAAM,aAElB,GAAKyL,QAAQqxC,QAAU,CACnBsF,QAAQpiD,KAAM,iBAElB,GAAKyL,QAAQkzC,KAAO,CAChByD,QAAQpiD,KAAM,WAIlB,OAAOoiD,QAoBX,SAASwe,mBAAoBxe,SACzB,IAAIyD,IAAK18B,IAAK03C,aACVC,gBAAkB,MAClBC,OAAS,KACT//D,GACImhD,KAAM,GACN2G,OAAQ,MACRpG,OAAQ,MACR5F,QAAS,MACT+L,WAAY,MACZlK,KAAM,OAEVqiB,kBAEJ5e,QAAUA,QAAQ14C,MAAO,KAGzB,IAAMm8C,IAAM,EAAIA,IAAMzD,QAAQtiD,OAAS+lD,MAAQ,CAG3Cgb,aAAe,KAGf13C,IAAM+2C,qBAAsB9d,QAASyD,MACrC,GAAK18B,MAAQvmB,UAAY,CACrBi+D,aAAe,MACf7/D,EAAGmoB,KAAQ,UAGR,GAAKi5B,QAASyD,KAAM3/C,QAAS,kBAAqB,EAAI,CACzD26D,aAAe,MACfE,OAAS,MACT//D,EAAEm9C,QAAUiE,QAASyD,KAAMvlB,UAAW,SAGnC,GAAK8hB,QAASyD,KAAM3/C,QAAS,cAAiB,EAAI,CACrD26D,aAAe,MACf7/D,EAAEmhD,KAAOC,QAASyD,KAAMvlB,UAAW,QAGhC,GAAK8hB,QAASyD,KAAM3/C,QAAS,aAAgB,GAAKk8C,QAASyD,KAAM/lD,SAAW,EAAI,CACnF+gE,aAAe,MACf7/D,EAAEu2B,MAAQ6qB,QAASyD,KAAMvlB,UAAW,QAGjC,GAAK8hB,QAASyD,OAAU,SAAW,CACtCgb,aAAe,MACfC,gBAAkB,KAItB,GAAKD,aAAe,CAChBG,eAAehhE,KAAMoiD,QAASyD,OAKtC,GAAKkb,OAAS,CACV//D,EAAEmhD,KAAO,GAGb,OACI12C,QAASzK,EACTggE,eAAgBA,eAChBF,gBAAiBA,iBAIzB,SAASG,qBAAsBrgE,GAC3B,MAAO,IAAMA,EAAEqD,cAkBnB4C,EAAEC,GAAGkpB,aAAe,SAAUvkB,QAASy1D,kBACnC,IAAIrb,IAAKtmD,KAAMsuB,GAAIszC,iBAAkBC,UACjCrqB,SAAWlwC,EAAEC,GAAGkpB,aAAa+mB,SAEjC,IAAM8O,IAAM,EAAIA,IAAMhjD,KAAK/C,OAAS+lD,MAAQ,CACxCh4B,GAAKhrB,KAAMgjD,KACXtmD,KAAO2hE,kBAGDJ,gBAAiB,MAAOE,mBAI1BJ,mBAAoB/yC,GAAG3L,WAE3Bi/C,iBAAmBt6D,EAAE0J,UAMfhR,KAAKuhE,gBAAkBvhE,KAAKkM,WAG9BA,SAIJ,IAAMlM,KAAKuhE,gBAAkB,CACzB,IAAMM,aAAarqB,SAAW,CAC1B,GAAKoqB,iBAAkBC,aAAgBx+D,UAAY,CAC/Cu+D,iBAAkBC,WAAcZ,aAAc3yC,GAC1CuzC,UAAU95D,QAASm5D,iBAAkBQ,yBAMrDpzC,GAAG3L,UAAYw+C,iBAGX75D,EAAE0J,UAGEwmC,SAGAoqB,kBAIJ5hE,KAAKyhE,gBAAiB18C,KAAM,KAChC,GAAKuJ,GAAGo8B,QAAQhmD,gBAAkB,SAAW,CACzC4pB,GAAGzL,aAAc,OAAQ,WAIjC,OAAOvf,MAKXgE,EAAEC,GAAGkpB,aAAa+mB,UACdoL,KAAM,GACNhE,QAAS,OACT5mB,MAAO,KACPuxB,OAAQ,MACRpG,OAAQ,KACR5F,QAAS,KACT+L,WAAY,MACZlK,KAAM,OAGV93C,EAAE0J,OAAQ1J,EAAEC,GAAGkpB,cACXC,aAAc,oIAzPlB,CA4PIrR,SAGJ,SAAW/X,EAAGjE,WAEdiE,EAAEkrB,OAAQ,sBAAuBlrB,EAAE0J,QAC/B9E,SACIwkC,SAAU,MACV1Y,MAAO,KACPmrB,OAAQ,MACR5F,QAAS,KACTukB,iBAAkB,KAClBj9C,KAAM,WACNu6B,KAAM,OAGVtqB,QAAS,WACL,IAAI3R,KAAO7f,KAAKomB,QACZsb,KAAO1hC,KAAK4I,QACZikB,WAAa7oB,EAAE0B,OAAOgG,KAAKrO,UAAUyvB,qBAGzC,GAAK9oB,EAAEC,GAAGkpB,aAAe,CACrBntB,KAAKomB,QACAhU,KAAMpO,EAAEC,GAAGkpB,aAAaC,cACxBC,IAAKR,YACLM,eAGTnpB,EAAEmb,KAAMnf,KAAKy+D,cAAez6D,EAAEixB,MAAO,SAAUmkB,OAAQ3rB,YACnD,GAAKzpB,EAAE0B,OAAQ+nB,YAAe,CAC1BztB,KAAKomB,QACAhU,KAAMpO,EAAE0B,OAAQ+nB,YAAaL,cAC7BC,IAAKR,YAAcY,gBAE7BztB,OAEHgE,EAAE0J,OAAQ1N,MACNoG,IAAK,KACLs4D,gBAAiB,OAGrB,GAAKh9B,KAAK0L,SAAW,CACjBptC,KAAKoG,KACDu4D,YAAa9+C,KAAK7E,SAAU,0BAA2BA,WACvD4jD,aAAc/+C,KAAK7E,SAAU,kCAE9B,CACHhb,KAAKoG,IAAMpG,KAAKqtC,aAKxBoxB,eAAiB,gBAAiB,aAAc,UAEhDjiB,sBAAuB,SAAU/9C,OAC7B,OAASA,MAAUA,QAAU,OAAS,GAAK,kBAAoBA,MAAU,IAG7E4uC,SAAU,WACN,IAAIxtB,KAAO7f,KAAKomB,QACZsb,KAAO1hC,KAAK4I,QACZ0b,IACIq6C,YAAa9+C,KAAK7E,SAAU,UAC5B4jD,aAAc/+C,KACTtZ,SAAU,mBACP,oBACMm7B,KAAKngB,OAAS,aAAe,aAAe,YAAe,IACjEvhB,KAAKw8C,sBAAuB9a,KAAKhN,OAAU,KACzCgN,KAAKuY,QAAU,iBAAmB,KAClCvY,KAAKoa,KAAO,WAAa,KAC9BzB,UAAW,QACR,oCACM3Y,KAAKme,SAAW,KAAO,YAAc,IAAO,YACrD7kC,YAGb,GAAKsJ,GAAGq6C,YAAY1hE,OAAS,EAAI,CAC7B+G,EAAG,4DACE81B,OAAQxV,GAAGq6C,aACXjmC,UAAW7Y,MAGpB,OAAOyE,IAGXuM,MAAO,WACH7wB,KAAK88C,WAGT/qB,YAAa,SAAUnpB,SACnB,IAAIi2D,YAAaxyC,YACbxM,KAAO7f,KAAKomB,QAGhB,GAAKxd,QAAQ2Y,OAASxhB,UAAY,CAC9B8f,KACKgL,YAAa,uDACbtkB,SAAU,oBAAuBqC,QAAQ2Y,OAAS,aAAe,aAAe,aACrFs9C,YAAc,KAGlB,GAAKj2D,QAAQ8rB,QAAU30B,UAAY,CAC/B8f,KACKgL,YAAa7qB,KAAKw8C,sBAAuBx8C,KAAK4I,QAAQ8rB,QACtDnuB,SAAUvG,KAAKw8C,sBAAuB5zC,QAAQ8rB,QAGvD,GAAK9rB,QAAQqxC,UAAYl6C,UAAY,CACjC8f,KAAKZ,YAAa,gBAAiBrW,QAAQqxC,SAG/C,GAAKrxC,QAAQkzC,OAAS/7C,UAAY,CAC9B8f,KAAKZ,YAAa,UAAWrW,QAAQkzC,MAGzC,GAAKlzC,QAAQi3C,SAAW9/C,UAAY,CAChCC,KAAKoG,IAAIw4D,aAAa3/C,YAAa,YAAarW,QAAQi3C,QAG5D,GAAKj3C,QAAQ41D,mBAAqBz+D,UAAY,CAC1CC,KAAK4I,QAAQ41D,iBAAmB51D,QAAQ41D,iBACxCK,YAAc,KAGlBxyC,YAAcrsB,KAAK4vB,OAAQhnB,SAE3B,GAAKi2D,YAAc,CACf7+D,KAAK88C,UAGT,OAAOzwB,aAGXhnB,UAAW,WACP,OAAOrF,KAAKoG,IAAIw4D,cAGpB9hB,QAAS,WACL,IAAIsR,IAAMpuD,KAAKqF,YACXy5D,IAAM1Q,IAAIh8C,KAAM,WAAYib,IAAK,qBACjC0D,OAAS/wB,KAAK0+D,gBAClB,GAAK16D,EAAE0B,OAAO4/C,cAAgB,CAC1B8I,IAAIh8C,KAAM,yBAA0BkzC,cAAe,WAEvDtlD,KAAKg+C,qBAAsB8gB,IACvB9+D,KAAK4I,QAAQ41D,iBAAmBx+D,KAAK69C,aAAcihB,IAAK/tC,QAAW+tC,IACnE/tC,QACJ/wB,KAAK0+D,gBAAkB,OAK3B9sC,SAAU,WACN,IAAItN,GAAIy6C,QACJr9B,KAAO1hC,KAAK4I,QAEhB,GAAK84B,KAAK0L,SAAW,CACjB,OAAOptC,KAGXskB,GAAKtkB,KAAKoG,IACV24D,QAAU/+D,KAAKomB,QACVyE,YAAa,mBACV,6EACA7qB,KAAKw8C,sBAAuB9a,KAAKhN,QACpCtiB,KAAM,WACNib,IAAK,qBAEVrtB,KAAKo+C,wBAAyB2gB,SAE9Bz6C,GAAGq6C,YAAYlhB,SACfn5B,GAAGs6C,aAAa5jD,WAAWyiC,WAEhCz5C,EAAE0B,OAAOmkB,UAAU+zB,uBA3KtB,CA6KG7hC,SAEH,SAAW/X,EAAGjE,WAEViE,EAAEkrB,OAAQ,kBACN9B,aAAc,mDAEdxkB,SACI8rB,MAAO,KACPsqC,WAAY,MACZC,aAAc,KACdC,YAAa,QAGjB1tC,QAAS,WACL,IAAI2tC,QAASC,SACT1xB,KAAQ1tC,KAAKomB,QAAQ9f,GAAI,2BAA8B,SAAW,SAClEoF,KAAO1L,KAAKomB,QAAQ3X,QAAS,YACjC,GAAK/C,KAAKzO,SAAW,EAAI,CACrByO,KAAO,MACP1L,KAAKoxB,IAAKpxB,KAAK6B,UACXsvD,SAAY,YAGpBntD,EAAE0J,OAAQ1N,MACN0tC,KAAMA,KACNhiC,KAAMA,KACNyzD,QAASA,QACTC,SAAUA,WAEdp/D,KAAKomB,QAAQ9P,KAAM,OAAQo3B,OAAS,SAAW,SAAW,eAAgBnnC,SAAU,MAAQmnC,MAC5F1tC,KAAK88C,UACL98C,KAAK+xB,YAAa/xB,KAAK4I,UAE3BmpB,YAAa,SAAU5zB,GACnB,GAAKA,EAAE6gE,aAAej/D,UAAY,CAC9BC,KAAKq/D,oBAET,GAAKlhE,EAAE8gE,cAAgB,KAAO,CAC1Bj/D,KAAKomB,QACAhU,KAAM,wBACN7L,SAAU,iBAAmBpI,EAAE8gE,cAExC,GAAK9gE,EAAE+gE,cAAgBn/D,UAAY,CAC/BC,KAAKomB,QAAQhU,KAAM,qCAAsC/E,KAAMlP,EAAE+gE,aAErE,GAAK/gE,EAAEu2B,QAAU30B,UAAY,CACzB,IAAI8sD,aAAe7sD,KAAK4I,QAAQ8rB,MAAQ10B,KAAK4I,QAAQ8rB,MAAQ,UACzDuoB,SAAW9+C,EAAEu2B,MAAQv2B,EAAEu2B,MAAQ,UAEnC10B,KAAKomB,QAAQyE,YAAa,UAAYgiC,cAAetmD,SAAU,UAAY02C,UAG/Ej9C,KAAK4vB,OAAQzxB,IAEjB2+C,QAAS,WACL,GAAK98C,KAAK0tC,OAAS,SAAW,CAC1B1tC,KAAKs/D,0BAET,IAAMt/D,KAAK0L,KAAO,CACd1L,KAAKu/D,eACL,GAAKv/D,KAAK0tC,OAAS,SAAW,CAC1B1tC,KAAKomB,QAAQmP,SAAU,aACpB,GAAKv1B,KAAK0tC,OAAS,SAAW,CACjC1tC,KAAKq/D,qBAGbr/D,KAAKw/D,qBACLx/D,KAAKy/D,cAITF,aAAc,WACVv7D,EAAG,SAAUA,EAAE0B,OAAO0jB,GAAK,gBAAiBvD,KAAMuC,SAAY,cAIlEq3C,WAAY,WACRz/D,KAAKomB,QACApL,SAAU,KACV6G,OAAQ,cAAgB7d,EAAE0B,OAAO0jB,GAAK,iBACtC9S,KAAM,QAAUtS,EAAE0B,OAAO0jB,GAAK,OAAQ,UAC3CppB,KAAKomB,QAAQ7M,QAAS,WAG1B+lD,wBAAyB,WACrB,IAAII,cAAgB1/D,KAAKomB,QAAQpL,SAAU,aAG3Chb,KAAKm/D,QAAUO,cAAcr5D,SAAU,iBAClCq5D,cAAcr5D,SAAU,uBAE7BrG,KAAKo/D,SAAWM,cAAcr5D,SAAU,gBAGxCrG,KAAKm/D,QAAUn/D,KAAKm/D,SAChBO,cAAc35C,GAAI,GACbsH,IAAK,sCACL9mB,SAAU,eACVtJ,OAET+C,KAAKo/D,SAAWp/D,KAAKo/D,UAAYM,cAAc35C,GAAI,GAAIxf,SAAU,gBAAiBtJ,QAEtFoiE,kBAAmB,WACf,IAAIM,WACA/2D,QAAU5I,KAAK4I,QACf8rB,MAAQ9rB,QAAQq2D,cAAgBr2D,QAAQ8rB,MAG5CirC,WAAa3/D,KAAK4/D,YAAgB5/D,KAAK4/D,gBAGvC,GAAK5/D,KAAK4I,QAAQo2D,YAGVh/D,KAAK0tC,OAAS,UAGd1pC,EAAG,YAAa/G,OAAS,IACvB+C,KAAK0L,KAGD1L,KAAK0L,KAAM,GAAI4T,aAAc,QAAUtb,EAAE0B,OAAO0jB,GAAK,SACnDplB,EAAE0B,OAAOqI,KAAK2xB,UAAWrqB,SAASjC,MAIpCpP,EAAE0B,OAAOsL,UAAYhN,EAAE0B,OAAOsL,SAAS5B,SACrCpL,EAAE0B,OAAOsL,SAAS5B,QAAQyD,YAAc,KAG/C7S,KAAKm/D,QAAU,CAGpB,IAAMQ,WAAWE,SAAW,CACxB7/D,KAAK2/D,WAAaA,WAAWv5C,SAAYu5C,WAAWv5C,SAChDpiB,EAAG,+CACC,sDACM0wB,MAAQ,UAAYA,MAAQ,IAAM,IACpC,yDACJ,QAAU1wB,EAAE0B,OAAO0jB,GAAK,cAAgBxgB,QAAQs2D,YAChD,SACCxmC,UAAW14B,KAAKomB,SACzBu5C,WAAWE,SAAW,WAIvB,GAAKF,WAAWv5C,QAAU,CAC7Bu5C,WAAWv5C,QAAQy2B,SACnB8iB,WAAWE,SAAW,QAG9BL,mBAAoB,WAChBx/D,KAAKomB,QAAQpL,SAAU,0BAClBzU,SAAU,YAEV+P,MACGo3B,KAAQ,UACRoyB,aAAc,OAG1BluC,SAAU,WACN,IAAIi7B,aAEJ7sD,KAAKomB,QAAQpL,SAAU,0BAClB6P,YAAa,YACbrkB,WAAY,QACZA,WAAY,cAEjB,GAAKxG,KAAK0tC,OAAS,SAAW,CAC1B1tC,KAAKomB,QAAQpL,SAAU,aAClB6P,YAAa,2DAClB,GAAK7qB,KAAK2/D,WAAY,CAClB3/D,KAAK2/D,WAAW7xC,UAIxB++B,aAAe7sD,KAAK4I,QAAQ8rB,MAAQ10B,KAAK4I,QAAQ8rB,MAAQ,UACzD10B,KAAKomB,QAAQyE,YAAa,UAAYgiC,cAEtC7sD,KAAKomB,QAAQyE,YAAa,MAAQ7qB,KAAK0tC,MAAOlnC,WAAY,YAlLtE,CAsLIuV,SAEJ,SAAW/X,EAAGjE,WAEViE,EAAEkrB,OAAQ,iBAAkBlrB,EAAE0B,OAAOyjB,SACjCvgB,SACIwf,SAAS,KACT23C,kBAAmB,KACnBC,gBAAiB,KACjBvyD,WAAY,QACZwyD,WAAY,MACZC,UAAW,KACXC,mBAAoB,uIACpBC,gBAAiB,0BACjB/2C,kBAAmB,KACnBg3C,wBAAyB,KAQzBC,iBAAkB,WACd,OAAQt8D,EAAE8jB,QAAQmT,gBAI1BzJ,QAAS,WACLxxB,KAAK4vB,SACL5vB,KAAKmO,cAAgBnK,EAAG,yBACxB,GAAKhE,KAAK4I,QAAQwf,WAAa,UAAYpoB,KAAK4I,QAAQ03D,mBAAqB,CACzEtgE,KAAKugE,eAIbA,WAAY,WACRvgE,KAAKomB,QAAQ7f,SAAU,MAAOvG,KAAK0tC,KAAM,UACzC1tC,KAAKqpB,oBACLrpB,KAAKwgE,sBACLxgE,KAAKygE,kBACLzgE,KAAK0gE,uBAGT3uC,YAAa,SAAU5zB,GACnB,GAAKA,EAAEiqB,WAAa,SAAWpoB,KAAK4I,QAAQwf,WAAa,QAAU,CAC/DpoB,KAAKugE,aAET,GAAKvgE,KAAK4I,QAAQwf,WAAa,UAAYpoB,KAAK4I,QAAQ03D,mBAAqB,CACzE,IAAIK,QAAY3gE,KAAK0L,KAAQ1L,KAAK0L,KAAQ1H,EAAE,mBAAmB/G,OAAS,EAAK+G,EAAE,mBAAoBA,EAAE,YAAY+hB,GAAG,GAEpH,GAAK5nB,EAAE8hE,aAAelgE,UAAW,CAC7B,GAAK5B,EAAE8hE,WAAa,CAChBjgE,KAAKomB,QAAQ7f,SAAU,MAAOvG,KAAK0tC,KAAM,eACzCizB,MAAMp6D,SAAU,WAAavG,KAAK0tC,KAAO,mBAGxC,CACD1tC,KAAKomB,QAAQyE,YAAa,MAAO7qB,KAAK0tC,KAAM,eAC5CizB,MAAM91C,YAAa,WAAa7qB,KAAK0tC,KAAO,eAAgBnnC,SAAU,WAAavG,KAAK0tC,KAAM,YAI1G1tC,KAAK4vB,OAAOzxB,IAGhBqiE,oBAAqB,WACjB,IAAII,OAAS5gE,KAAK4I,QAAQ6E,WAE1B,GAAKmzD,QAAUA,SAAW,OAAS,CAE/B,GAAKA,SAAW,QAAU,CACtBA,OAAS5gE,KAAKomB,QAAQ/f,SAAU,aAAgB,YAAc,UAGlErG,KAAKomB,QAAQ7f,SAAUq6D,UAI/BH,gBAAiB,WACb,IAAI/0D,OAAW1L,KAAK0L,KAAQ1L,KAAKomB,QAAQ3X,QAAS,YAAczO,KAAK6B,SAIrE7B,KAAKoxB,IAAK1lB,MACN6hC,eAAkB,wBAClBszB,qBAAuB,wBACvBC,eAAiB,wBACjBzP,aAAgB,wBAChBF,SAAY,kBACZ7jB,eAAkB,2BAI1BQ,sBAAuB,WACnB,IAAI3vC,EAAI6B,KAAK4I,QACb,GAAKzK,EAAE6hE,gBAAkB,CACrBh8D,EAAE0B,OAAOkhD,KAAK10B,QAAS,MAE3B,IAAM/zB,EAAE4hE,kBAAoB,CACxB//D,KAAKmzB,KAAM,QAInB4tC,sBAAuB,WACnB,GAAK/gE,KAAK4I,QAAQygB,kBAAoB,CAClCrpB,KAAKqpB,oBAAuBrpB,KAAK0L,KAAQ1L,KAAK0L,KAAM,qBAI5Ds1D,gBAAiB,WACbhhE,KAAKqpB,oBAAuBrpB,KAAK0L,KAAQ1L,KAAK0L,KAAM,mBACpD,GAAK1L,KAAK4I,QAAQygB,kBAAoB,CAClCrpB,KAAKoxB,IAAKpxB,KAAK5D,QAAU0uC,gBAAmB,wBAIpD+P,sBAAuB,SAAU3vB,EAAG5G,IAChC,IAAInmB,EAAI6B,KAAK4I,QACTq4D,WAAYC,WAAYC,WAAYC,WAExC,GAAKjjE,EAAE6hE,gBAAkB,CACrBh8D,EAAE0B,OAAOkhD,KAAK30B,OAAQ,MAE1B,GAAK9zB,EAAEkrB,kBAAoB,CACvBrpB,KAAKwyB,KAAMxyB,KAAK5D,OAAQ,mBAG5B,GAAK+B,EAAEkiE,wBAA0B,CAC7BY,WAAaj9D,EAAG,+BAAgChE,KAAK0L,MACrDw1D,WAAal9D,EAAG,+BAAgChE,KAAK0L,MACrDy1D,WAAaF,WAAWhkE,QAAUqnB,GAAGgvB,UAAYtvC,EAAG,gCAAkCi9D,WAAWvyD,QAAS,MAAS,KAAM4V,GAAGgvB,WAActvC,IAC1Io9D,WAAaF,WAAWjkE,QAAUqnB,GAAGgvB,UAAYtvC,EAAG,gCAAkCk9D,WAAWxyD,QAAS,MAAS,KAAM4V,GAAGgvB,WAActvC,IAE1I,GAAKm9D,WAAWlkE,QAAUmkE,WAAWnkE,OAAS,CAE1CkkE,WAAWngD,IAAKogD,YAAa7rC,SAAUvxB,EAAE0B,OAAOmpB,eAEhDvK,GAAGgvB,SAAS9uC,IAAK,WAAY,WACzB48D,WAAW1oC,UAAW14B,MACtBmhE,WAAW5rC,SAAUv1B,WAMrCqhE,SAAU,KAGVh4C,kBAAmB,SAAUi4C,QACzB,IAAIlT,IAAMpuD,KAAKomB,QACX+0C,OAAWn7D,KAAK0tC,OAAQ,SACxBkT,IAAMriC,WAAY6vC,IAAIvoC,IAAKs1C,OAAS,MAAQ,WAGhD,GAAKn7D,KAAK4I,QAAQq3D,WAAa,CAAE,OAEjCqB,OAAWA,QAAUA,OAAO//C,OAASxhB,WAAauhE,QAAYthE,KAAK0L,MAAQ0iD,IAAI3/C,QAAS,YACxF6yD,SAAathE,KAAK0L,KAAQ1L,KAAK0L,KAAM,kBACrC1H,EAAGs9D,QAASz7C,IAAK,YAAes1C,OAAS,MAAQ,UAAY/M,IAAI5mC,cAAgBo5B,MAGrF2gB,eAAgB,SAAUC,cACtB,IAAInlC,KAAOr8B,KAAK5D,OACZgyD,IAAMpuD,KAAKomB,QACXq7C,OAASplC,KAAKvH,YACd4sC,SAAWtT,IAAI1mD,SACfi6D,UAAc3hE,KAAK0L,KAAQ0iD,IAAI3/C,QAAS,YAAa/G,SAAS1D,EAAE,mBAAmB0D,SACnFk6D,eAAiB59D,EAAE0B,OAAOomB,kBAE9B,OAAQ01C,eACFxhE,KAAK4I,QAAQ6E,YAAczN,KAAK4I,QAAQ6E,aAAe,SAEnDzN,KAAK0tC,OAAS,WAAa1tC,KAAK4I,QAAQq3D,YAAcwB,OAASC,UAC/D1hE,KAAK0tC,OAAS,WAAa1tC,KAAK4I,QAAQq3D,YAAcwB,OAASG,eAAiBD,QAAUD,WAC3F1hE,KAAK4I,QAAQq3D,aAI1B/sC,KAAM,SAAUsuC,cACZ,IAAIK,UAAY,kBACZzT,IAAMpuD,KAAKomB,QAEf,GAAKpmB,KAAKuhE,eAAgBC,cAAiB,CACvCpT,IACKvjC,YAAa,OAASg3C,WACtBt7D,SAAU,MACV+8B,kBAAkB,WACf8qB,IAAIvjC,YAAa,YAGxB,CACDujC,IAAIvjC,YAAag3C,WAErB7hE,KAAKqhE,SAAW,MAGpBluC,KAAM,SAAUquC,cACZ,IAAIK,UAAY,kBACZzT,IAAMpuD,KAAKomB,QAEX07C,SAAW,OAAU9hE,KAAK4I,QAAQ6E,aAAe,QAAU,WAAa,IAE5E,GAAKzN,KAAKuhE,eAAgBC,cAAiB,CACvCpT,IACK7nD,SAAUu7D,UACVj3C,YAAa,MACbyY,kBAAkB,WACf8qB,IAAI7nD,SAAUs7D,WAAYh3C,YAAai3C,gBAG9C,CACD1T,IAAI7nD,SAAUs7D,WAAYh3C,YAAai3C,UAE3C9hE,KAAKqhE,SAAW,OAGpBU,OAAQ,WACJ/hE,KAAMA,KAAKqhE,SAAW,OAAS,WAGnCX,oBAAqB,WACjB,IAAIx7D,KAAOlF,KACP7B,EAAI+G,KAAK0D,QACTo5D,UAAWC,UACXC,UAAY,KACZx2D,OAAW1L,KAAK0L,KAAQ1L,KAAK0L,KAAM1H,EAAE,YAGzC0H,KACKnM,KAAM,SAAU,SAAU2rB,GACvB,GAAK/sB,EAAE+hE,YAAcl8D,EAAGknB,EAAExhB,QAAS+E,QAAStQ,EAAEgiE,oBAAqBljE,OAAS,CACxEiI,KAAK68D,YAGZxiE,KAAM,mBAAoB,SAAU2rB,GAMjC,GAAK/lB,OAAOsC,MAAQ,MAAQzD,EAAGknB,EAAExhB,QAASpD,GAAInI,EAAEiiE,mBAAsBp8D,EAAGknB,EAAExhB,QAAS+E,QAAS,sCAAuCxR,OAAS,CAMzI,GAAKiuB,EAAE3J,OAAS,aAAe2gD,UAAY,CACvCA,UAAY,KAEZ7rC,aAAc4rC,WACdD,UAAYh6D,WAAY,WACpB9C,KAAKguB,QACN,QACA,GAAKhI,EAAE3J,OAAS,aAAe2gD,UAAY,CAE9C7rC,aAAc2rC,WACdE,UAAY,MACZD,UAAYj6D,WAAY,WACpB9C,KAAKiuB,QACN,QAMvBosC,aAAc,WACV,GAAIv/D,KAAK4I,QAAQwf,WAAa,QAAS,CACnCpkB,EAAG,SAAUA,EAAE0B,OAAO0jB,GAAK,gBAAiBvD,KAAMuC,SAAY,eAItEwJ,SAAU,WACN,IAAIuwC,YAAaC,eAAgBC,SAAUlH,OAAQmH,cAC/C52D,KAAO1L,KAAKmO,cAAcA,cAAe,iBAE7CnO,KAAK4vB,SACL,GAAK5vB,KAAK4I,QAAQwf,WAAa,QAAU,CACrCi6C,SAAWr+D,EAAI,YAAchE,KAAK0tC,KAAO,UAC5B1sB,IAAKtV,KAAK0G,KAAM,OAASpS,KAAK4I,QAAQ8kC,KAAO,WAC7CrgB,IAAKrtB,KAAKomB,SAAUnpB,OAAS,EAC1CqlE,cAAgBt+D,EAAI,YAAchE,KAAK0tC,KAAO,UACjC1sB,IAAKtV,KAAK0G,KAAM,OAASpS,KAAK4I,QAAQ8kC,KAAO,gBAC7CrgB,IAAKrtB,KAAKomB,SAAUnpB,OAAS,EAC1CmlE,eAAkB,8DACd,+DACJpiE,KAAKomB,QAAQyE,YAAau3C,gBAC1B,IAAME,cAAgB,CAClBH,YAAc,WAAaniE,KAAK0tC,KAAO,cAE3C,IAAM20B,SAAW,CACblH,OAASn7D,KAAK0tC,OAAS,SACvBy0B,aAAe,YAAcniE,KAAK0tC,KAAO,SACzChiC,KAAKma,IAAK,YAAes1C,OAAS,MAAQ,UAAY,IAE1DzvD,KAAKmf,YAAas3C,kBArSlC,CA0SIpmD,SAEJ,SAAW/X,EAAGjE,WACViE,EAAEkrB,OAAQ,iBAAkBlrB,EAAE0B,OAAOyjB,SAEjCo3C,WAAY,WACRvgE,KAAK4vB,SACL5vB,KAAKuiE,gBAITA,aAAc,WACV,IAAIthE,GAAKC,UAAUC,UACnB+5B,SAAWh6B,UAAUg6B,SAErBC,QAAUl6B,GAAGO,MAAO,yBACpB45B,YAAcD,SAAWA,QAAS,GAClCqnC,GAAK,KACLt9D,KAAOlF,KAEP,GAAKk7B,SAAS73B,QAAS,WAAc,GAAK63B,SAAS73B,QAAS,SAAY,GAAM63B,SAAS73B,QAAS,SAAY,EAAI,CAC5Gm/D,GAAK,WACF,GAAKvhE,GAAGoC,QAAS,YAAe,EAAI,CACvCm/D,GAAK,cACF,CACH,OAGJ,GAAKA,KAAO,MAAQ,CAEhBt9D,KAAKu9D,6BACF,GAAKD,KAAO,WAAapnC,WAAaA,UAAY,IAAM,CAE3Dl2B,KAAKu9D,wBACLv9D,KAAKw9D,+BACF,CACH,SAKRC,gBAAiB,WACb,IAAIvU,IAAMpuD,KAAKomB,QACX+0C,OAAS/M,IAAI/nD,SAAU,aACvBkc,OAASoH,KAAK4d,IAAK6mB,IAAI7rC,SAAStS,IAAMjQ,KAAK5D,OAAO04B,aACtD,IAAMqmC,OAAS,CACX54C,OAASoH,KAAK+iC,MAAOnqC,OAASviB,KAAK5D,OAAOsL,SAAW0mD,IAAI5mC,eAAkB,GAE/E,OAAOjF,QAIXkgD,sBAAuB,WACnB,IAAIv9D,KAAOlF,KAEXA,KAAKoxB,IAAKpxB,KAAK5D,QAAUquC,WAAY,WACjC,IAAIm4B,eAAiB19D,KAAKy9D,kBAE1B,GAAKC,eAAiB,GAAK19D,KAAKm8D,SAAW,CACvCn8D,KAAK29D,sBAUjBH,yBAA0B,WACtB1iE,KAAKomB,QAAQ3X,QAAS,YAAalI,SAAU,wBAOjDs8D,eAAgB,WACZ,IAAI/Q,cAAgBvzC,WAAYva,EAAG,mBAAoB6hB,IAAK,mBAE5D7hB,EAAG,mBAAoB6hB,IAAK,iBAAoBisC,cAAgB,EAAM,MAGtE9pD,WAAY,WACRhE,EAAG,mBAAoB6hB,IAAK,iBAAkBisC,cAAgB,OAC/D,IAGPzgC,QAAS,WACLrxB,KAAK4vB,SAEL5vB,KAAKomB,QAAQ3X,QAAS,mBAAoBoc,YAAa,yBAzFnE,CA6FI9O,SAGJ,SAAY/X,EAAGjE,WAEf,IAAI+iE,OAAW9+D,EAAE0B,OAAOpE,QAAQw5B,OAAS92B,EAAE0B,OAAOpE,QAAQw5B,OAAS,EAC/DioC,WAAa/+D,EACT,2CACA,wCAA2C8+D,OAAS,MAAQ,IAAO,KAC/D,qCACJ,UAGR,SAASE,WACL,IAAIppB,MAAQmpB,WAAWnpB,QACnBqpB,GAAKrpB,MAAM7zB,GAAI,GACfyf,GAAKoU,MAAM7zB,GAAI,GACf4wC,GAAKnxB,GAAGxqB,WAEZ,OAASkoD,MAAO19B,GAAGxkB,IAAKiiD,IAAMA,GAAIA,GAAIz9B,GAAIA,GAAImxB,GAAIA,IAGtD3yD,EAAEkrB,OAAQ,eAAgBlrB,EAAE0B,OAAOE,OAC/BgD,SAEIu6D,MAAO,IAGX3xC,QAAS,WACL,IAAImlC,GACA/2C,IAAM5f,KAAK4vB,SAEf,GAAK5vB,KAAK4I,QAAQu6D,MAAQ,CACtBnjE,KAAKoG,IAAI+8D,MAAQxM,GAAK32D,KAAKojE,YAG/B,OAAOxjD,KAGXwjD,UAAW,WACP,IAAI1uC,MACAgN,KAAO1hC,KAAK4I,QACZ+tD,GAAKqM,WAETtuC,MAAQ10B,KAAKw8C,sBAAuB,WAAY9a,KAAKhN,OACrDiiC,GAAGA,GAAGpwD,SAAUmuB,OAAUgN,KAAKme,OAAS,qBAAuB,KAC/D8W,GAAGuM,MAAM/vC,OAAOoC,SAAUv1B,KAAKomB,SAE/B,OAAOuwC,IAGXiC,WAAY,WACR,IAAIjC,GAAK32D,KAAKoG,IAAI+8D,MAElB,GAAKxM,GAAK,CACNA,GAAGuM,MAAMp1C,SAGb,OAAO9tB,KAAK4vB,UAMhByzC,YAAa,SAAUrkE,EAAGskE,IAAKxP,QAASr0D,EAAG8jE,MACvC,IAAItxD,OAAQzT,EAAGysC,KAAMu4B,mBAAsBC,OAI3C,GAAKhkE,EAAEikE,OAAQ1kE,EAAE2kE,QAAWlkE,EAAEmkE,UAAW5kE,EAAE2kE,QAAW,CAClD,OAAOJ,KAGXC,gBAAiBxkE,EAAE6kE,KAAQ/P,QAAS90D,EAAE6kE,MAChCpkE,EAAEqkE,OAAQ9kE,EAAE+kE,SAAYtkE,EAAEukE,SAAUhlE,EAAE+kE,UAAc/kE,EAAEilE,aACxDxkE,EAAEykE,WAAYllE,EAAE6kE,MAAUpkE,EAAE03D,UAAUJ,SAAU/3D,EAAE+kE,SAAYtkE,EAAEykE,WAAYllE,EAAE+kE,UAAc/kE,EAAEmlE,kBAClGX,gBAAiBxkE,EAAEolE,KAAQtQ,QAAS90D,EAAEolE,KAEtCnyD,OAASxS,EAAEwS,QAAUjS,KAAKk3D,wBAAyBsM,gBAAiB/jE,EAAE03D,WACtE34D,GAAM4rB,EAAGnY,OAAOyQ,KAAM2H,EAAGpY,OAAOhC,KAEhCwzD,IAAKzkE,EAAE6kE,KAAQrlE,EAAGQ,EAAE6kE,KAAQpkE,EAAEykE,WAAYllE,EAAE6kE,KAAQ7kE,EAAEqlE,UACtDZ,IAAKzkE,EAAEolE,KAAQz6C,KAAKC,IAAK3X,OAAQjT,EAAE4d,MAASnd,EAAE6kE,YAAatlE,EAAE4d,MAASnd,EAAEqkE,OAAQ9kE,EAAE2kE,QAC9Eh6C,KAAKi/B,IAAK32C,OAAQjT,EAAE4d,MAASnd,EAAE6kE,YAAatlE,EAAE4d,MAASnd,EAAEmkE,UAAW5kE,EAAE2kE,QAAWlkE,EAAEqkE,OAAQ9kE,EAAE2kE,QACzF7P,QAAS90D,EAAEolE,OAEnBn5B,KAAOthB,KAAK4d,IAAKusB,QAAQ1pC,EAAIq5C,IAAIr5C,GAAMT,KAAK4d,IAAKusB,QAAQzpC,EAAIo5C,IAAIp5C,GACjE,IAAMk5C,MAAQt4B,KAAOs4B,KAAKt4B,KAAO,CAE7Bw4B,IAAKzkE,EAAEolE,MAAS3kE,EAAEqkE,OAAQ9kE,EAAE2kE,QAAW1xD,OAAQjT,EAAE4d,MAASnd,EAAEykE,WAAYllE,EAAEolE,KAC1Eb,MAASD,IAAKA,IAAKr4B,KAAMA,KAAMh5B,OAAQA,OAAQsyD,QAASvlE,EAAE4d,KAAM4nD,OAAQf,IAAKzkE,EAAEolE,MAGnF,OAAOb,MAGXkB,mBAAoB,SAAUC,OAC1B,IAAIniD,OAAQoiD,SACRhO,GAAK32D,KAAKoG,IAAI+8D,MACdt6D,OACIsuD,UAAWn3D,KAAK62D,kBAAmB6N,OACnChB,QAAUxP,GAAIyC,GAAGnxB,GAAG/9B,QAAS0sD,GAAIwC,GAAGnxB,GAAG99B,UACvCk8D,WAAa1P,GAAIyC,GAAGsM,GAAGx7D,QAAS0sD,GAAIwC,GAAGsM,GAAGv7D,UAC1C48D,YAAa3N,GAAGsM,GAAG1gD,UAG3BA,OAASviB,KAAKomB,QAAQ7D,SAEtBo0C,GAAGsM,GAAGp9C,KAAOnD,KAAM,EAAGzS,IAAK,EAAG20D,MAAO,EAAGC,OAAQ,IAChDF,SAAWhO,GAAGsM,GAAG1gD,SACjB1Z,MAAMq7D,YACF95C,EAAGu6C,SAASjiD,KAAOH,OAAOG,KAC1B2H,EAAGs6C,SAAS10D,IAAMsS,OAAOtS,IACzBikD,GAAIyC,GAAGsM,GAAGx7D,QACV0sD,GAAIwC,GAAGsM,GAAGv7D,UAEdivD,GAAGsM,GAAGz8D,WAAY,SAGlBqC,MAAMy7D,aAAgB5hD,KAAM7Z,MAAMy7D,YAAY5hD,KAAOH,OAAOG,KAAMzS,IAAKpH,MAAMy7D,YAAYr0D,IAAMsS,OAAOtS,KACtGpH,MAAMi7D,QAAW5P,GAAIrrD,MAAM66D,OAAOxP,GAAK,EAAGC,GAAItrD,MAAM66D,OAAOvP,GAAK,GAChEtrD,MAAMm7D,UAAa9P,GAAIrrD,MAAMsuD,UAAUJ,SAAS7C,GAAK,EAAGC,GAAItrD,MAAMsuD,UAAUJ,SAAS5C,GAAK,GAE1F,OAAOtrD,OAGXuuD,iBAAkB,SAAUtD,SACxB,IAAIjrD,MAAO06D,KAAM1vD,OAAQixD,SAAUC,MAC/B52B,YAAcnuC,KAAK4I,QAAQu6D,MAC3BxM,GAAK32D,KAAKoG,IAAI+8D,MAElB,IAAMxM,GAAK,CACP,OAAO32D,KAAK4vB,OAAQkkC,SAGxB6C,GAAGuM,MAAMhwC,OAET6xC,SACAl8D,MAAQ7I,KAAKykE,mBAAoB,MACjC5wD,QACIhW,GAAOgmE,IAAK,IAAKO,IAAK,IAAKxnD,KAAM,MAAO+mD,OAAQ,KAAMI,QAAS,KAAME,aAAc,EAAGI,WAAax7D,MAAMi7D,OAAO5P,GAAIiQ,kBAAmB,GACvI3lE,GAAOqlE,IAAK,IAAKO,IAAK,IAAKxnD,KAAM,MAAO+mD,OAAQ,KAAMI,QAAS,KAAME,cAAe,EAAGI,UAAWx7D,MAAMi7D,OAAO5P,GAAKrrD,MAAMq7D,WAAWhQ,GAAIiQ,kBAAmB,GAC5Jp+B,GAAO89B,IAAK,IAAKO,IAAK,IAAKxnD,KAAM,OAAQ+mD,OAAQ,KAAMI,QAAS,KAAME,cAAe,EAAGI,UAAWx7D,MAAMi7D,OAAO3P,GAAKtrD,MAAMq7D,WAAW/P,GAAIgQ,kBAAmB,GAC7JxqC,GAAOkqC,IAAK,IAAKO,IAAK,IAAKxnD,KAAM,OAAQ+mD,OAAQ,KAAMI,QAAS,KAAME,aAAc,EAAGI,WAAYx7D,MAAMi7D,OAAO3P,GAAIgQ,kBAAmB,IAM3IngE,EAAEmb,MAAQgvB,cAAgB,KAAO,UAAYA,aAActnC,MAAO,KAC9D7C,EAAEixB,MAAO,SAAUrqB,IAAKnM,OACpB8kE,KAAOvjE,KAAKqjE,YAAaxvD,OAAQpV,OAASA,MAAOq1D,QAASjrD,MAAO06D,OAClEvjE,OAIP,IAAMujE,KAAO,CACT5M,GAAGuM,MAAM/vC,OACT,OAAOnzB,KAAK4vB,OAAQkkC,SAIxB6C,GAAGnxB,GACE3a,YAAa,uEACbtkB,SAAU,kBAAoBg9D,KAAKD,KACnC98D,WAAY,SAAUqf,IAAK09C,KAAKgB,QAAShB,KAAKiB,QAC9CtxC,OAGL,IAAM4vC,OAAS,CACXgC,SAAW9kE,KAAKomB,QAAQ7D,SACxBwiD,MAAOlxD,OAAQ0vD,KAAKD,KAAMO,KAAQlN,GAAGnxB,GAAGjjB,SACxCwiD,MAAOlxD,OAAQ0vD,KAAKD,KAAMc,MACtB1hD,KAAMoiD,SAASpiD,KAAO7Z,MAAMq7D,WAAW95C,EACvCna,IAAK60D,SAAS70D,IAAMpH,MAAMq7D,WAAW75C,GAI7C,OAAOk5C,KAAKtxD,QAGhB8f,YAAa,SAAU2P,MACnB,IAAIub,SACAC,SAAWl9C,KAAK4I,QAAQ8rB,MACxBiiC,GAAK32D,KAAKoG,IAAI+8D,MACdvjD,IAAM5f,KAAK4vB,OAAQ8R,MAEvB,GAAKA,KAAKyhC,QAAUpjE,UAAY,CAC5B,IAAM42D,IAAMj1B,KAAKyhC,MAAQ,CACrBnjE,KAAKoG,IAAI+8D,MAAQnjE,KAAKojE,YAItB,YACG,GAAKzM,KAAOj1B,KAAKyhC,MAAQ,CAC5BxM,GAAGuM,MAAMp1C,SACT9tB,KAAKoG,IAAI+8D,MAAQ,MAKzBxM,GAAK32D,KAAKoG,IAAI+8D,MAEd,GAAKxM,GAAK,CACN,GAAKj1B,KAAKhN,QAAU30B,UAAY,CAC5Bm9C,SAAWl9C,KAAKw8C,sBAAuB,WAAYU,UACnDD,SAAWj9C,KAAKw8C,sBAAuB,WAAY9a,KAAKhN,OACxDiiC,GAAGA,GAAG9rC,YAAaqyB,UAAW32C,SAAU02C,UAG5C,GAAKvb,KAAKme,SAAW9/C,UAAY,CAC7B42D,GAAGA,GAAG13C,YAAa,oBAAqByiB,KAAKme,SAIrD,OAAOjgC,KAGXgS,SAAU,WACN,IAAI+kC,GAAK32D,KAAKoG,IAAI+8D,MAElB,GAAKxM,GAAK,CACNA,GAAGuM,MAAMp1C,SAGb,OAAO9tB,KAAK4vB,aA9NpB,CAkOI7T,SAGJ,SAAW/X,EAAGjE,WAEdiE,EAAEkrB,OAAQ,gBACNtmB,SACI22C,SACIylB,MAAO,WACPC,UAAW,gBACXC,YAAa,kBACbC,WAAY,iBACZC,WAAY,iBACZC,MAAO,mBACPC,UAAW,wBACXz2C,cAAe,0BACf02C,YAAa,mBACbC,iBAAkB,yBAClBC,kBAAmB,wBACnBC,QAAS,oBAEbA,QAAS,KACThxC,MAAO,KACPtM,SAAU,OACVssC,YAAa,KACbiR,QAAS,SACTC,WAAY,KACZC,cAAe,OAGnBC,WAAY,KACZC,YAAa,KACb/Q,MAAO,KACPgR,OAAQ,KACRC,YAAa,KACb3hB,SAAU,KACV4hB,eAAgB,KAEhB10C,QAAS,WACL,IAAIxG,GAAKhrB,KAAKomB,QACV+/C,WAAan7C,GAAGvc,QAAS,mCAG7BzK,EAAE0J,OAAQ1N,MACN8lE,WAAY96C,GAAG5Y,KAAM,yBACrB2zD,YAAeI,WAAWlpE,OAAS,EAAMkpE,WAAa,MACtDC,YAAa,KACbpR,MAAOh1D,KAAKqmE,SACZJ,YAAajmE,KAAKsmE,iBAClBJ,eAAgBlmE,KAAKumE,oBAEzB,GAAKvmE,KAAK4I,QAAQ+8D,UAAY,UAAW,CACrC3lE,KAAKwmE,cAETxmE,KAAKymE,mBAGL,GAAKziE,EAAE8jB,QAAQgU,kBAAoB97B,KAAK4I,QAAQ88D,QAAU,CACtD1lE,KAAKomB,QAAQ7f,SAAUvG,KAAK4I,QAAQ22C,QAAQmmB,SAGhD1lE,KAAK0mE,oBACL1mE,KAAK2mE,mBACL3mE,KAAK4mE,qBACL5mE,KAAKygE,kBAEL,KAAOzgE,KAAK4I,QAAQ8rD,YAAc,CAC9B10D,KAAK6mE,eAGT7mE,KAAK8mE,oBAGTR,eAAgB,WACZ,IAAIlB,WAAaplE,KAAKomB,QAAQhU,KAAM,IAAMpS,KAAK4I,QAAQ22C,QAAQ6lB,YAE/D,GAAKA,WAAWnoE,SAAW,EAAI,CAC3BmoE,WAAaplE,KAAKomB,QAAQpL,WAAWqpC,QAAS,eAAiBrkD,KAAK4I,QAAQ22C,QAAQ6lB,WAAa,QAAS/8C,SAG9G,OAAO+8C,YAGXyB,aAAc,WACV,IAAI3hE,KAAOlF,KACP0J,OAASxE,KAAK6gE,YAAc7gE,KAAK6gE,YAAY19C,SAAWnjB,KAAKkhB,QAAQiC,SAEzEnjB,KAAK8gE,OAAShiE,EAAG,eAAiBkB,KAAK0D,QAAQ22C,QAAQ8lB,MAAQ,YAC1DnhE,GAAI,YAAa,WACdgB,KAAKiyB,UAER5B,SAAU7rB,SAGnB28D,SAAU,WACN,IAAI36D,KAAO1L,KAAKomE,aAAepmE,KAAK+lE,aAAe/hE,EAAG,IAAMA,EAAE0B,OAAOklB,iBAErE,OAAOlf,MAGX86D,YAAa,WACT,IAAItgB,QAAUlmD,KAAKg1D,QAAQ5iD,KAAM,IAAMpS,KAAK4I,QAAQ22C,QAAQgmB,aAC5D,GAAKrf,QAAQjpD,SAAW,EAAI,CACxBipD,QAAUlmD,KAAKg1D,QAAQh6C,SAAU,kGAC5BqpC,QAAS,eAAiBrkD,KAAK4I,QAAQ22C,QAAQgmB,YAAc,YAC7Dl9C,SAGTroB,KAAKskD,SAAW4B,SAGpBqgB,kBAAmB,WACf,IAAIQ,iBAAmB/iE,EAAG,QAASgX,SAAU,sCACzCgsD,iBAAmBhnE,KAAKg1D,QAAQ5iD,KAAM,sCACtC60D,cAAgBF,iBAAiB/lD,IAAKgmD,kBAAmBzgE,SAAUvG,KAAK4I,QAAQ22C,QAAQimB,kBAE5F,OAAOyB,eAGXC,sBAAuB,SAAU/jC,QAC7B,OAAOA,OAAS,aAAenjC,KAAK4I,QAAQwf,SAAW,IAAM+a,OAAS,YAAcnjC,KAAK4I,QAAQ+8D,SAGrGwB,iBAAkB,WACd,IAAIC,aAAepnE,KAAK4I,QAAQ22C,QAAQylB,MACpC,IAAMhlE,KAAKknE,sBAAuBlnE,KAAK4I,QAAQ22C,QAAQylB,OACvD,IAAMhlE,KAAK4I,QAAQ22C,QAAQ2lB,YAC3B,IAAM,YAAellE,KAAK4I,QAAQ8rB,MAAQ10B,KAAK4I,QAAQ8rB,MAAQ,WAEnE,KAAO10B,KAAK4I,QAAQi9D,cAAgB,CAChCuB,cAAgB,IAAMpnE,KAAK4I,QAAQ22C,QAAQ4lB,WAG/C,OAAOiC,cAGXX,iBAAkB,WACdzmE,KAAKomB,QAAQ7f,SAAUvG,KAAKmnE,qBAGhCE,kBAAmB,SAAU7+D,OACzB,IAAMA,MAAMyqB,qBAAuB,CAC/BjzB,KAAKm3B,UAIbwvC,iBAAkB,WACd3mE,KAAKoxB,IAAKpxB,KAAK8lE,YACX5qB,MAAS,sBAGbl7C,KAAKoxB,KACDk2C,gCAAiC,uBAIzCC,eAAgB,SAAUC,aACtB,IAAItiE,KAAOlF,KACPynE,iBAAmBviE,KAAK+gE,YAAYz+C,cACpC81B,OAASmqB,iBAAmBzjE,EAAE0B,OAAOomB,kBAEzC,GAAKwxB,SAAWp4C,KAAK0D,QAAQi9D,cAAgB,CACzC,GAAKvoB,OAAS,CACVp4C,KAAKwiE,cACL1jE,EAAE0B,OAAOqmB,sBAAuB07C,kBAEpC,GAAKD,YAAc,CACfxnE,KAAK5D,OAAQ,GAAI+tB,SAAU,EAAGnmB,EAAE0B,OAAOskB,wBAExC,CACH9kB,KAAKyiE,cAIbC,iBAAkB,WACd5nE,KAAKoxB,IAAKptB,EAAG5H,SAAY0uC,gBAAmB,oBAGhD+8B,mBAAoB,WAChB7nE,KAAKwyB,KAAMxuB,EAAG5H,QAAU,oBAG5BsrE,YAAa,WACT,KAAO1nE,KAAK4I,QAAQi9D,eAAiB7hE,EAAE8jB,QAAQmT,cAAgB,CAC3Dj7B,KAAKomB,QAAQyE,YAAa7qB,KAAK4I,QAAQ22C,QAAQ4lB,cAIvDwC,UAAW,WACP,KAAO3nE,KAAK4I,QAAQi9D,eAAiB7hE,EAAE8jB,QAAQmT,cAAgB,CAC3Dj7B,KAAKomB,QAAQ7f,SAAUvG,KAAK4I,QAAQ22C,QAAQ4lB,cAIpDuB,kBAAmB,WACf,IAAIxhE,KAAOlF,KAEXkF,KAAKkhB,QAAQliB,GAAI,eAAgB,WAC7B,GAAKgB,KAAK+yD,MAAQ,CACd/yD,KAAKqiE,qBAKjBX,mBAAoB,WAChB5mE,KAAKoxB,IAAK,QACN02C,UAAW,kBAKnBC,aAAc,SAAU78C,GACpB,IAAIqP,KACAytC,QAAUhoE,KAAKomB,QAAQ9P,KAAM,MAEjC,GAAK4U,EAAE7U,cAAcL,KAAKnP,MAAO,KAAO,KAAQmhE,SAAWA,UAAYjoE,UAAY,CAE/EmrB,EAAEhV,iBACFqkB,KAAOv2B,EAAGknB,EAAExhB,QACZ,GAAK6wB,KAAKl0B,SAAU,UAAa,CAC7Bk0B,KAAKh0B,SAAUvC,EAAE0B,OAAOolB,gBACxB9qB,KAAKomB,QAAQ5hB,IAAK,uBAAwB,WACtC+1B,KAAK1P,YAAa7mB,EAAE0B,OAAOolB,kBAGnC9qB,KAAK+hE,WAIb+E,iBAAkB,WACd,IAAI5hE,KAAOlF,KACPioE,KAAO/iE,KAAK8gE,OAAS9gE,KAAKkhB,QAAQpF,IAAK9b,KAAK8gE,QAAW9gE,KAAKkhB,QAGhE,KAAOlhB,KAAK0D,QAAQg9D,WAAa,CAC7B,GAAK1gE,KAAK0D,QAAQwf,WAAa,OAAS,CACpC6/C,KAAK/jE,GAAI,kBAAmB,WACxBgB,KAAKiyB,cAEN,CACH8wC,KAAK/jE,GAAI,mBAAoB,WACzBgB,KAAKiyB,aAMrBspC,gBAAiB,WACb,IAAIv7D,KAAOlF,KAEXA,KAAK6B,SAEAqC,GAAI,kBAAmB,SAAUgnB,GAC9B,GAAKhmB,KAAK+yD,OAAS/sC,EAAExhB,SAAWxE,KAAKkhB,QAAS,GAAM,CAChDlhB,KAAKiyB,WAIZjzB,GAAI,cAAe,SAAUgnB,GAC1B,GAAKA,EAAE3G,UAAY,IAAMrf,KAAK+yD,MAAQ,CAClC/yD,KAAKiyB,WAGjB,IAAMn3B,KAAK+lE,aAAe/lE,KAAK4I,QAAQ+8D,UAAY,UAAY,CAC3D3lE,KAAKoxB,IAAKpxB,KAAK6B,UACXsvD,SAAY,WACRnxD,KAAKomE,YAAc,KACnBpmE,KAAKwmE,iBAKjB,GAAKthE,KAAK6gE,YAAc,CACpB/lE,KAAK6B,SAASqC,GAAI,WAAY,wBAAyB,WACnD,GAAKgB,KAAK+yD,MAAQ,CACd/yD,KAAKiyB,MAAO,aAGjB,CACHn3B,KAAK6B,SAASqC,GAAI,iBAAkB,WAChC,GAAKgB,KAAK+yD,MAAQ,CACd/yD,KAAKiyB,MAAO,WAO5B8gC,MAAO,MACPiQ,wBAAyB,KACzBC,kBAAmB,KAEnBlxC,KAAM,SAAU0hC,WACZ,IAAM34D,KAAKi4D,MAAQ,CACf,IAAI/yD,KAAOlF,KACP7B,EAAI+G,KAAK0D,QAETw/D,WAAa,WACTljE,KAAKstB,KAAMttB,KAAKrD,SAAW,cAC3BqD,KAAK8vD,QAAQtmD,QAAS,QAAS,QAE/B,GAAK1K,EAAE8jB,QAAQgU,kBAAoB39B,EAAEunE,SAAWvnE,EAAEwnE,UAAY,UAAY,CACtEzgE,KAAKo/C,SAAS/9C,SAAUpI,EAAEohD,QAAQmmB,SAClCxgE,KAAKghE,iBAAiB3/D,SAAUpI,EAAEohD,QAAQmmB,SAG9C,IAAM/M,WAAa30D,EAAE8jB,QAAQgU,kBAAoB39B,EAAEunE,QAAU,EACvDxgE,KAAKo/C,UAAYp/C,KAAKkhB,SACnBkd,kBAAmB3P,SAAU,kBAC/B,CACH3rB,WAAY2rB,SAAU,GAG1B,GAAKx1B,EAAEu2B,OAASv2B,EAAEwnE,UAAY,UAAY,CACtCzgE,KAAK8vD,QAAQ3sC,SACR9hB,SAAUpI,EAAEohD,QAAQ1wB,cAAgB,WAAa1wB,EAAEohD,QAAQ1wB,cAAgB,IAAM1wB,EAAEu2B,OAG5FxvB,KAAKkhB,QACAyE,YAAa1sB,EAAEohD,QAAQ2lB,aACvB3+D,SAAUpI,EAAEohD,QAAQ0lB,WAEzB//D,KAAKqiE,eAAgB,MAErBriE,KAAKgjE,wBAA0BhjE,KAAKgiE,sBAAuB/oE,EAAEohD,QAAQkmB,mBAErE,GAAKtnE,EAAEwnE,UAAY,UAAY,CAC3BzgE,KAAK8vD,QAAQ3sC,SAAS9hB,SAAUpI,EAAEohD,QAAQ1wB,eAC1C3pB,KAAKo/C,SAAS/9C,SAAUrB,KAAKgjE,yBAC7BhjE,KAAKghE,iBAAiB3/D,SAAUrB,KAAKgjE,yBAGzChjE,KAAKijE,kBAAoBjjE,KAAKgiE,sBAAuB/oE,EAAEohD,QAAQ8lB,OAAU,IAAMlnE,EAAEohD,QAAQ+lB,UACzF,GAAKpgE,KAAK8gE,OAAS,CACf9gE,KAAK8gE,OACAz/D,SAAUrB,KAAKijE,mBACfzgE,OAAQiiB,KAAKC,IAAK1kB,KAAK8gE,OAAOt+D,SAAUxC,KAAKrD,SAAS6F,aAGnEisB,SAAW,WAGP,IAAMzuB,KAAK+yD,MAAQ,CACf,OAGJ,GAAK95D,EAAEwnE,UAAY,UAAY,CAC3BzgE,KAAKo/C,SAAS/9C,SAAUpI,EAAEohD,QAAQkmB,kBAAoB,SACtDvgE,KAAKghE,iBAAiB3/D,SAAUpI,EAAEohD,QAAQkmB,kBAAoB,SAGlEvgE,KAAK0iE,mBAEL1iE,KAAKusB,SAAU,QAEfvsB,KAAKkhE,YAAclhE,KAAK8vD,SAGhC9vD,KAAKusB,SAAU,cAEf,GAAKvsB,KAAK8vD,QAAQtmD,QAAS,WAAc,OAAS,CAC9CxJ,KAAKksB,IAAKlsB,KAAKrD,UACXwmE,WAAcD,iBAEf,CACHA,aAGJljE,KAAK+yD,MAAQ,OAIrB9gC,MAAO,SAAUwhC,WACb,GAAK34D,KAAKi4D,MAAQ,CACd,IAAI/yD,KAAOlF,KACP7B,EAAI6B,KAAK4I,QAET0/D,YAAc,WAEVpjE,KAAKkhB,QAAQyE,YAAa1sB,EAAEohD,QAAQ0lB,WAEpC,GAAK9mE,EAAEwnE,UAAY,UAAY,CAC3BzgE,KAAKo/C,SAASz5B,YAAa3lB,KAAKgjE,yBAChChjE,KAAKghE,iBAAiBr7C,YAAa3lB,KAAKgjE,yBAG5C,IAAMvP,WAAa30D,EAAE8jB,QAAQgU,kBAAoB39B,EAAEunE,QAAU,EACvDxgE,KAAKo/C,UAAYp/C,KAAKkhB,SACnBkd,kBAAmB3P,SAAU,kBAC/B,CACH3rB,WAAY2rB,SAAU,GAG1B,GAAKzuB,KAAK8gE,OAAS,CACf9gE,KAAK8gE,OACAn7C,YAAa3lB,KAAKijE,mBAClBzgE,OAAQ,MAGrBisB,SAAW,WACP,GAAKx1B,EAAEu2B,OAASv2B,EAAEwnE,UAAY,UAAY,CACtCzgE,KAAK8vD,QAAQ3sC,SAASwC,YAAa1sB,EAAEohD,QAAQ1wB,cAAgB,WAAa1wB,EAAEohD,QAAQ1wB,cAAgB,IAAM1wB,EAAEu2B,OAGhHxvB,KAAKkhB,QAAQ7f,SAAUpI,EAAEohD,QAAQ2lB,aAEjC,GAAK/mE,EAAEwnE,UAAY,UAAY,CAC3BzgE,KAAK8vD,QAAQ3sC,SAASwC,YAAa1sB,EAAEohD,QAAQ1wB,eAC7C3pB,KAAKo/C,SAASz5B,YAAa1sB,EAAEohD,QAAQkmB,kBAAoB,SACzDvgE,KAAKghE,iBAAiBr7C,YAAa1sB,EAAEohD,QAAQkmB,kBAAoB,SAGrE,GAAKzhE,EAAE8jB,QAAQgU,kBAAoB39B,EAAEunE,SAAWvnE,EAAEwnE,UAAY,UAAY,CACtEzgE,KAAKo/C,SAASz5B,YAAa1sB,EAAEohD,QAAQmmB,SACrCxgE,KAAKghE,iBAAiBr7C,YAAa1sB,EAAEohD,QAAQmmB,SAGjDxgE,KAAKyiE,YACLziE,KAAK2iE,qBACL7jE,EAAE0B,OAAOqmB,wBAET7mB,KAAK8vD,QAAQ5gC,cAAe,SAE5BlvB,KAAKusB,SAAU,SAEfvsB,KAAKkhE,YAAc,MAG3BlhE,KAAKusB,SAAU,eAEf62C,cAEApjE,KAAK+yD,MAAQ,QAIrB8J,OAAQ,WACJ/hE,KAAMA,KAAKi4D,MAAQ,QAAU,WAGjCrmC,SAAU,WACN,IAAI22C,YACJpqE,EAAI6B,KAAK4I,QACT4/D,eAAmBxkE,EAAG,wBAAyB/G,OAAS+G,EAAE0B,OAAO8I,WAAW4D,KAAM,iBAAkBnV,OAAW,EAE/G,GAAKkB,EAAEwnE,UAAY,UAAY,CAG3B4C,YAAcvkE,EAAG,wBAAyBgd,IAAKhd,EAAE0B,OAAO8I,WAAW4D,KAAM,kBACzE,GAAKm2D,YAAYl7C,IAAK,6BAA8BA,IAAKrtB,KAAKomB,SAAUnpB,SAAW,EAAI,CACnF+C,KAAKskD,SAAStpC,WAAWyiC,SAG7B,GAAKz9C,KAAKi4D,MAAQ,CAEdj4D,KAAKkmE,iBAAiBr7C,YAAa1sB,EAAEohD,QAAQkmB,kBAAoB,SAEjE,GAAKzhE,EAAE8jB,QAAQgU,kBAAoB39B,EAAEunE,QAAU,CAC3C1lE,KAAKkmE,iBAAiBr7C,YAAa1sB,EAAEohD,QAAQmmB,SAGjD1lE,KAAKg1D,QAAQ3sC,SAASwC,YAAa1sB,EAAEohD,QAAQ1wB,eAE7C,GAAK1wB,EAAEu2B,MAAQ,CACX10B,KAAKg1D,QAAQ3sC,SAASwC,YAAa1sB,EAAEohD,QAAQ1wB,cAAgB,WAAa1wB,EAAEohD,QAAQ1wB,cAAgB,IAAM1wB,EAAEu2B,SAKxH,IAAM8zC,eAAiB,CAEnBxoE,KAAK6B,SAASuC,IAAK,wBAIvB,GAAKpE,KAAKi4D,MAAQ,CACdj4D,KAAKg1D,QAAQ5gC,cAAe,SAGhCp0B,KAAKimE,YAAYjrD,WAAWyiC,SAE5Bz9C,KAAKomB,QACAyE,aAAe7qB,KAAKmnE,mBAAoBhpE,EAAEohD,QAAQ0lB,UAAW9mE,EAAEohD,QAAQmmB,SAAUjkD,KAAM,MACvFrd,IAAK,oCACLA,IAAK,mBACLA,IAAK,aACLA,IAAK,eACLA,IAAK,gBAEV,GAAKpE,KAAKgmE,OAAS,CACfhmE,KAAKgmE,OAAOl4C,cAvexB,CA4eI/R,SAEJ,SAAW/X,EAAGjE,WAEdiE,EAAEkrB,OAAQ,gBACNtmB,SACI22C,SACIkpB,MAAO,YAEXr7B,SAAU,OAGd5b,QAAS,WACL,IAAMxxB,KAAK4I,QAAQwkC,SAAW,CAC1BptC,KAAKomB,QAAQ7f,SAAUvG,KAAK4I,QAAQ22C,QAAQkpB,OAIhDzkE,EAAE0J,OAAQ1N,MAIN0oE,QAAS3oE,UAIT4oE,WAAY5oE,YAGhBC,KAAK2+C,SAAU,OAGnBiqB,YAAa,WACT,IAAIC,IAAM7oE,KAAKomB,QAAQhU,KAAM,YAE7BpS,KAAK0oE,QAAU1oE,KAAKomB,QAAQhU,KAAM,YAAa4I,WAC/Chb,KAAK2oE,WAAa3oE,KAAK0oE,QAAQ1nD,IAAK6nD,IAAI7tD,aAG5C8hC,QAAS,WACL98C,KAAK2+C,YAGTmqB,QAAS9kE,EAAE2tB,KAEXgtB,SAAU,WACN,IAAI8pB,MAAQzoE,KAAKomB,QACbyiD,IAAMJ,MAAMr2D,KAAM,YAGtBpS,KAAK4oE,cAGLC,IAAI1pD,KAAM,WACN,IAAI4pD,YAAc,EAGlB/kE,EAAGhE,MAAOgb,WAAWmE,KAAM,WACvB,IAAIo0C,KAAO7xD,SAAU1B,KAAKsf,aAAc,WAAa,IACjD/a,SAAW,eAAkBwkE,YAAc,GAAM,IACjD7lC,EAEJljC,KAAKuf,aAAc,QAAUvb,EAAE0B,OAAO0jB,GAAK,WAAY2/C,YAAc,GAErE,GAAKxV,KAAO,CACR,IAAKrwB,EAAI,EAAGA,EAAIqwB,KAAO,EAAGrwB,IAAM,CAC5B6lC,cACAxkE,UAAY,iBAAoBwkE,YAAc,GAAM,KAM5D/kE,EAAGhE,MAAO0O,QAAS,QAAS+5D,MAAMr2D,KAAM,MAAOib,IAAKw7C,IAAI9iD,GAAI,IAAMsH,IAAKrtB,MAAOgb,SAAUzW,WAExFwkE,sBAzEhB,CA+EIhtD,SAGJ,SAAW/X,EAAGjE,WAEdiE,EAAEkrB,OAAQ,eAAgBlrB,EAAE0B,OAAO+iE,OAC/B7/D,SACIogE,KAAM,eACNC,eAAgB,KAChBC,iBAAkB,KAClBC,cAAe,aACf5pB,QAASv7C,EAAE0J,OAAQ1J,EAAE0B,OAAO+iE,MAAMprE,UAAUuL,QAAQ22C,SAChD35C,MAAO,8BACPwjE,UAAW,4BACXC,eAAgB,qBAChBC,kBAAmB,2BAI3B93C,QAAS,WACLxxB,KAAK4vB,SAEL,GAAK5vB,KAAK4I,QAAQogE,OAAS,eAAiB,CACxC,OAGJhlE,EAAE0J,OAAQ1N,MACNupE,MAAO,OAGX,GAAKvpE,KAAK4I,QAAQwkC,SAAW,CACzBptC,KAAKupE,MAAQvlE,EAAGhE,KAAK6B,SAAU,GAAIyzD,eAAgBt1D,KAAK0Z,MAAQ,WAAasB,WAAWD,QACxF/a,KAAKwpE,YAAaxpE,KAAKupE,MAAO,UAC3B,CACHvpE,KAAKupE,MAAQvpE,KAAKypE,oBAClBzpE,KAAKomB,QAAQ7f,SAAUvG,KAAK4I,QAAQ22C,QAAQ+pB,mBAGhDtpE,KAAK0pE,eAEL1pE,KAAK2pE,mBAGTjwD,IAAK,WACD,OAAS1Z,KAAKomB,QAAQ9P,KAAM,OAAYtW,KAAKytB,WAAaztB,KAAKokB,MAGnEslD,aAAc,WAKV1pE,KAAKoxB,IAAKpxB,KAAK5D,QACX0uC,gBAAiB,oBAErB9qC,KAAKoxB,IAAKpxB,KAAKupE,OACXK,eAAgB,sBAIxBJ,YAAa,SAAUK,KAAMC,MACzB,IAAIC,OACAC,cAAgB,EAChBtoC,KAAO1hC,KAAK4I,QACZvD,UAAYwkE,KAAKpkB,aAAc,aAGnC,GAAKqkB,KAAO,CACRC,OAASF,KAAKz3D,KAAM,aACjB,CACH/M,UAAU08C,QAId/hD,KAAK0oE,QAAQr7C,IAAK,MAAOlO,KAAM,WAC3B,IAAIkR,MAAO45C,MACP9O,OAASn3D,EAAGhE,MACZkqE,SAAWlmE,EAAE0B,OAAO4Z,aAActf,KAAM,YAE5C,GAAKkqE,SAAW,CACZD,MAAQ9O,OAAOn6C,IAAKm6C,OAAOzsD,QAAS,UACpCu7D,MAAM1jE,SAAUm7B,KAAK6d,QAAQ8pB,eAAiBa,UAI9C75C,OAAUy5C,KAAOC,OAAOhkD,GAAIikD,iBACxBhmE,EAAE,4CACIm3D,OAAOngD,SAAU,QAASD,QAAQzE,KAAM,UACtC6kD,OAAO9tD,QACX,YACCkoB,SAAUlwB,WACV2V,SAAU,GACVsqC,eACG5wB,MAAOgN,KAAKwnC,oBAIfx6D,QAAS,SAAUysD,QACnBzsD,QAAS,QAASu7D,OAG3B9O,OAAOzsD,QAAS,QAAS2hB,UAKjC,IAAMy5C,KAAO,CACTD,KAAKpkB,aAAc,aAI3B0kB,iBAAkB,SAAUC,KACxB,IAAI/5C,MAAQrsB,EAAGomE,IAAI1gE,QACfu7C,QAAU50B,MAAO,GAAI40B,QAEzB50B,MAAM3hB,QAAS,SACVuQ,YAAa,wBAAyBgmC,SACtChmC,YAAa,wBAAyBgmC,UAG/ColB,aAAc,SAAUJ,OAEpBA,MAAMp/C,YAAa,+CAGvB4+C,kBAAmB,WACf,IAAIxjD,GAAKqkD,WAAY1kE,MAAOikE,KACxBpB,MAAQzoE,KAAKomB,QACbsb,KAAO1hC,KAAK4I,QACZwgB,GAAKplB,EAAE0B,OAAO0jB,GACdtU,SAAW9U,KAAK6B,SAAU,GAAI8zD,yBAElC1vC,GAAKjmB,KAAK0Z,MAAQ,SAClB4wD,WAAatmE,EAAG,aAAeiiB,GAAK,KAChC,UAAYyb,KAAK6d,QAAQ6pB,UAAY,WACrC,WAAc1nC,KAAKunC,gBAAkB,KACrC,qCACA,QAAU7/C,GAAK,eAAiBsY,KAAKynC,cAAgB,QACzDvjE,MAAQ5B,EAAG,eAAiB09B,KAAK6d,QAAQ35C,MAAQ,SAAWqgB,GAAK,YACjE4jD,KAAO7lE,EAAG,yBAA0ByhD,eAGpCzlD,KAAKwpE,YAAaK,KAAM,OAExBA,KAAKt0C,SAAU3vB,OAEfkP,SAAS6iB,YAAa/xB,MAAO,IAC7BkP,SAAS6iB,YAAa2yC,WAAY,IAClC7B,MAAM8B,OAAQz1D,UAEdlP,MAAMA,QAEN,OAAOikE,MAGXf,QAAS,WACL9oE,KAAK4vB,SAEL,GAAK5vB,KAAK4I,QAAQogE,OAAS,eAAiB,CAIxChpE,KAAK2+C,SAAU,SAIvBA,SAAU,SAAU5tB,QAChB,IAAI23C,QAAS8B,cAAe7sE,MAG5BqC,KAAK4vB,OAAQmB,QAEb,IAAMA,QAAU/wB,KAAK4I,QAAQogE,OAAS,eAAiB,CACnDN,QAAU1oE,KAAK0oE,QACf8B,iBAMAxqE,KAAKupE,MAAMn3D,KAAM,SAAU+M,KAAM,WAC7B,IAAIkR,MAAQrsB,EAAGhE,MACXm7D,OAAS9qC,MAAM3hB,QAAS,UACxB/Q,MAAQ+qE,QAAQ/qE,MAAOw9D,OAAQ,IAEnC,GAAKx9D,OAAS,IAAM0yB,MAAMzT,KAAM,WAAc,CAK1C4tD,cAAcrtE,KAAMQ,UAK5BqC,KAAKqqE,aAAcrqE,KAAKomB,QAAQhU,KAAM,0BAClC,2BAGJpS,KAAKwpE,YAAaxpE,KAAKupE,MAAOx4C,QAI9B,IAAMpzB,MAAQ6sE,cAAcvtE,OAAS,EAAIU,OAAS,EAAIA,QAAU,CAC5D+qE,QAAQ3iD,GAAIykD,cAAe7sE,QAAU+Q,QAAS,SACzCkO,KAAM,UAAW,OACjB0oC,cAAe,WACf/rC,QAAS,aAK1BowD,gBAAiB,WACb3pE,KAAKupE,MAAMn3D,KAAM,SAAU+M,KAAM,WAC7B,IAAIsrD,SAAWzmE,EAAGhE,MAElBA,KAAKilD,QAAUwlB,SAAS/7D,QAAS,SAAUqX,GAAI,GAAIF,IAAK,aAAgB,aACxE4kD,SAASnlB,cAAe,cAIhC1zB,SAAU,WACN5xB,KAAK4vB,aA3Nb,CA+NI7T,SAEJ,SAAW/X,EAAGjE,WAEdiE,EAAEkrB,OAAQ,eAAgBlrB,EAAE0B,OAAO+iE,OAC/B7/D,SACIogE,KAAM,SACNzpB,QAASv7C,EAAE0J,OAAQ1J,EAAE0B,OAAO+iE,MAAMprE,UAAUuL,QAAQ22C,SAChDmrB,YAAa,kBACbC,WAAY,yBAIpBn5C,QAAS,WACLxxB,KAAK4vB,SAGL,GAAK5vB,KAAK4I,QAAQogE,OAAS,SAAW,CAClC,OAGJ,IAAMhpE,KAAK4I,QAAQwkC,SAAW,CAC1BptC,KAAKomB,QAAQ7f,SAAUvG,KAAK4I,QAAQ22C,QAAQmrB,aAE5C1qE,KAAK4qE,kBAIb9B,QAAS,WACL9oE,KAAK4vB,SAEL,GAAK5vB,KAAK4I,QAAQogE,OAAS,SAAW,CAClChpE,KAAK2+C,SAAU,SAIvBA,SAAU,SAAU5tB,QAChB/wB,KAAK4vB,OAAQmB,QACb,IAAMA,QAAU/wB,KAAK4I,QAAQogE,OAAS,SAAW,CAC7ChpE,KAAK4qE,kBAIbA,cAAe,WACX,IAAInC,MAAQzoE,KACR0hC,KAAO1hC,KAAK4I,QAGhB5E,EAAGykE,MAAME,WAAWpqE,MAAM0S,WAAYkO,KAAM,WACxC,IAAI8qD,MAAQjmE,EAAGhE,MAAO0O,QAAS,SAC3Bm8D,SAAW7mE,EAAE0B,OAAO4Z,aAActf,KAAM,YACxC8qE,eAAiBb,MAAM58C,IAAKrtB,MAAO6hB,OAAQ,YAAa5kB,QAAU,2BAClEugD,SAAWx5C,EAAGhE,MAAO45C,QAAQ4D,WAC7ButB,UAAWlpD,OAEX,GAAK27B,SAASvgD,OAAS,EAAK,CAExB,GAAK6tE,eAAiB,CAClBC,UAAYrpE,SAAU1B,KAAKsf,aAAc,WAAa,IACtDuC,OAAS,GAET,GAAKkpD,UAAY,CACblpD,OAAS,gBAAiBkpD,UAAW,OAAS,SAAc,IAGhEtC,MAAMuC,WAAYf,MAAMpoD,OAAQA,QAC5B6f,KAAK6d,QAAQorB,WAAaG,eAAgBttB,cAC3C,CACHirB,MAAMuC,WAAYf,MAAOvoC,KAAK6d,QAAQorB,WAAYntB,eAOtEwtB,WAAY,SAAUf,MAAOzmB,MAAOhG,UAChC,GAAKA,SAASvgD,SAAW,GAAKugD,SAAU,GAAI/2B,SAASrlB,gBAAkB,OAAS,CAC5Eo8C,SAAWA,SAASz3B,GAAI,GAAIzP,KAAM,SAGtC2zD,MACK58C,IAAK,UAAYm2B,MAAQ,KACrBgB,QAASxgD,EAAG,aAAew/C,MAAQ,UAAW1pB,OAAQ0jB,eAhFvE,CAoFIzhC,SAEJ,SAAW/X,EAAGjE,WAGd,IAAIkrE,sBAAwB,SAAUttE,MAAOutE,aACzC,OAAW,IAAOlnE,EAAE0B,OAAO4Z,aAActf,KAAM,eAAkBgE,EAAGhE,MAAOqN,SACtEjM,cAAciC,QAAS6nE,gBAAmB,GAGnDlnE,EAAEkrB,OAAQ,qBAEN9B,aAAc,0BAEdxkB,SACIuiE,aAAc,MACdC,eAAgBH,sBAChB79B,SAAU,MACV/c,MAAO,KACPrV,SAAU,6KAGdwW,QAAS,WACL,IAAIkQ,KAAO1hC,KAAK4I,QAEhB5E,EAAE0J,OAAQ1N,MACNqrE,QAAS,KACTC,OAAQ,IAGZtrE,KAAKurE,UAAW7pC,KAAKrR,OACrB,IAAMqR,KAAK0L,SAAW,CAClBptC,KAAKwrE,cAAkBxrE,KAAKqrE,SAAWrrE,KAAKqrE,QAAQntD,OAAW,IAAK9c,iBAI5EqqE,SAAU,WACN,IAAIvtD,IAAKwtD,QACLhwC,OAAS17B,KAAKqrE,QAElB,GAAK3vC,OAAS,CACVxd,IAAMwd,OAAOxd,MAAM9c,cACnBsqE,QAAU1nE,EAAE0B,OAAO4Z,aAAcoc,OAAQ,GAAK,WAAc,GAE5D,GAAKgwC,SAAWA,UAAYxtD,IAAM,CAE9B,OAGJ,GAAKle,KAAKsrE,OAAS,CACflvE,OAAOi6B,aAAcr2B,KAAKsrE,QAC1BtrE,KAAKsrE,OAAS,EAGlBtrE,KAAKsrE,OAAStrE,KAAKyyB,OAAQ,WACvB,GAAKzyB,KAAKyxB,SAAU,eAAgB,MAAQpB,MAAOqL,WAAe,MAAQ,CACtE,OAAO,MAIXA,OAAQ,GAAInc,aAAc,QAAUvb,EAAE0B,OAAO0jB,GAAK,UAAWlL,KAE7Dle,KAAKwrE,aAActtD,KACnBle,KAAKsrE,OAAS,GACf,OAIXK,oBAAqB,WACjB,IAAI9rD,KAAO7f,KAAKomB,QACZpL,SAAWhb,KAAK4I,QAAQoS,SACxB+nC,OAAS/nC,UAAa/d,OAAQ,GAC1B+G,EAAE8f,WAAY9I,UAAaA,WAC3BA,SAASyL,SAAWziB,EAAGgX,UACvBA,SAASpU,OAASoU,SAClBhb,KAAKomB,QAAQhU,KAAM4I,UAE3B,GAAK+nC,MAAM9lD,SAAW,EAAI,CACtB8lD,MAAQljC,KAAK7E,WAGjB,OAAO+nC,OAGXyoB,aAAc,SAAUttD,KACpB,IAAI8kC,IAAK9yC,SAAUjT,OAAQy9C,IACvBxnB,QACAC,QACAuO,KAAO1hC,KAAK4I,QACZgjE,YAAc5rE,KAAK2rE,sBAEvB,GAAKztD,KAAO,KAAO,CACfhO,SAAWwxB,KAAK0pC,gBAAkBH,sBAClChuE,OAAS2uE,YAAY3uE,OAGrB,IAAM+lD,IAAM,EAAIA,IAAM/lD,OAAS+lD,MAAQ,CACnCtI,IAAQxqC,SAAS3S,KAAMquE,YAAa5oB,KAAOA,IAAK9kC,KAAUiV,KAAOD,KACjEwnB,IAAIv9C,KAAMyuE,YAAa5oB,OAM/B,GAAK7vB,KAAKl2B,SAAW,EAAI,CACrB2uE,YAAelqC,KAAKypC,cAAgBjtD,IAAIjhB,SAAW,EAC/C,WAAa,eAAiB,wBAC/B,CACH+G,EAAGmvB,MAAO5sB,SAAU,oBACpBvC,EAAGkvB,MAAOrI,YAAa,oBAG3B7qB,KAAK6rE,sBAEL7rE,KAAKyxB,SAAU,SAAU,MACrBsxB,MAAO6oB,eAMfC,oBAAqB,WACjB,IAAI38C,OAAQ8zB,IACR8oB,mBAAsB,iBAAkB,aAAc,eAAgB,YAE1E,IAAM9oB,IAAM8oB,kBAAkB7uE,OAAS,EAAI+lD,KAAO,EAAIA,MAAQ,CAC1D9zB,OAAS48C,kBAAmB9oB,KAC5B,GAAKh/C,EAAE0B,OAAQwpB,QAAW,CACtBA,OAASlvB,KAAKomB,QAAQ1pB,KAAM,UAAYwyB,QACxC,GAAKA,QAAUlrB,EAAE8f,WAAYoL,OAAO4tB,SAAY,CAC5C5tB,OAAO4tB,cAOvByuB,UAAW,SAAWhnE,UAClB,IAAIm3B,OAAS17B,KAAKqrE,QAGlB,GAAKrrE,KAAKsrE,OAAS,CACflvE,OAAOi6B,aAAcr2B,KAAKsrE,QAC1BtrE,KAAKsrE,OAAS,EAGlB,GAAK5vC,OAAS,CACV17B,KAAKwyB,KAAMkJ,OAAQ,sBACnBA,OAAS,KAGb,GAAKn3B,SAAW,CACZm3B,OAASn3B,SAASqC,OAASrC,SACvBA,SAASkiB,SAAWziB,EAAGO,UACvBvE,KAAK6B,SAASuQ,KAAM7N,UAExBvE,KAAKoxB,IAAKsK,QACN8uB,QAAS,aACTuhB,SAAU,cACV3hB,MAAO,WACPva,OAAQ,WACRxf,MAAO,aAIfrwB,KAAKqrE,QAAU3vC,QAInBswC,WAAY,SAAUxjE,OAClB,GAAKA,MAAM+b,UAAYvgB,EAAEsgB,GAAGC,QAAQM,MAAQ,CACxCrc,MAAM0N,iBACNlW,KAAKisE,iBAAmB,OAIhCC,YAAa,SAAU1jE,OACnB,GAAKxI,KAAKisE,iBAAmB,CACzBzjE,MAAM0N,iBACNlW,KAAKisE,iBAAmB,QAIhCl6C,YAAa,SAAUnpB,SACnB,IAAIujE,WAAgBvjE,QAAQuiE,eAAiBprE,WACnC6I,QAAQwiE,iBAAmBrrE,WAC3B6I,QAAQoS,WAAajb,WAE/BC,KAAK4vB,OAAQhnB,SAEb,GAAKA,QAAQynB,QAAUtwB,UAAY,CAC/BC,KAAKurE,UAAW3iE,QAAQynB,OACxB87C,SAAW,KAGf,GAAKA,SAAW,CACZnsE,KAAK88C,YAIblrB,SAAU,WACN,IAAI8P,KAAO1hC,KAAK4I,QACZm6C,MAAQ/iD,KAAK2rE,sBAEjB,GAAKjqC,KAAK0L,SAAW,CACjB2V,MAAM9jC,YAAa,mBAAoByiB,KAAKypC,kBACzC,CACHpoB,MAAMl4B,YAAa,sBAI3BiyB,QAAS,WACL,GAAK98C,KAAKsrE,OAAS,CACflvE,OAAOi6B,aAAcr2B,KAAKsrE,QAC1BtrE,KAAKsrE,OAAS,EAElBtrE,KAAKwrE,cAAkBxrE,KAAKqrE,SAAWrrE,KAAKqrE,QAAQntD,OAAW,IAAK9c,mBAtN5E,CA0NI2a,SAEJ,SAAW/X,EAAGjE,WAId,IAAIqsE,kBAAoB,SAAUlnE,KAAMugB,MAChC,OAAO,SAAU7c,SACb6c,KAAKloB,KAAMyC,KAAM4I,SACjB1D,KAAKmnE,sBAAuBzjE,WAGpC0jE,iBAAmB,4BACnBC,0BAA4BvoE,EAAE0B,OAAO8mE,WAAWnvE,UAAUuL,QAAQwiE,eAGtEpnE,EAAE0B,OAAO8mE,WAAWnvE,UAAUuL,QAAQwiE,eAAiB,SAAUztE,MAAOutE,aACpE,OAAQlrE,KAAKqf,UAAU7d,MAAO8qE,mBAC1BC,0BAA0BhvE,KAAMyC,KAAMrC,MAAOutE,cAGrDlnE,EAAEkrB,OAAQ,oBAAqBlrB,EAAE0B,OAAO8mE,YACpC5jE,SACI6jE,kBAAmB,kBACnBC,YAAa,MAGjBl7C,QAAS,WACL,IAAIwxB,IAAKv1B,WACL5N,KAAO7f,KAAKomB,QACZ0lD,mBAAsB,iBAAkB,aAAc,eAAgB,YACtEa,kBAEJ3sE,KAAK4vB,SAEL5rB,EAAE0J,OAAQ1N,MACNmsB,QAAS,OAGb,IAAM62B,IAAM8oB,kBAAkB7uE,OAAS,EAAI+lD,KAAO,EAAIA,MAAQ,CAC1Dv1B,WAAaq+C,kBAAmB9oB,KAChC,GAAKh/C,EAAE0B,OAAQ+nB,YAAe,CAC1B,GAAKztB,KAAK4sE,WAAY/sD,KAAKnjB,KAAM,UAAY+wB,aAAiB,CAC1D,UACG,CACHk/C,eAAgBl/C,WAAa,UAAa,kBAKtD,IAAMztB,KAAKmsB,QAAU,CACjBnsB,KAAKoxB,IAAKvR,KAAM8sD,kBAIxBE,cAAe,SAAUzC,KACrBpqE,KAAK4sE,WAAY5sE,KAAKomB,QAAQ1pB,KAAM,UAAY0tE,IAAI7oD,KAAKkc,UAAW,EAAG2sC,IAAI7oD,KAAKtkB,OAAS,MAG7Fw0B,SAAU,SAAUlQ,KAAM/Y,MAAO9L,MAC7B,GAAKsD,KAAKmsB,SAAWnsB,KAAKmsB,QAAQ8D,iBAAmB,mBACjD1O,OAAS,eAAiB,CAG1BvhB,KAAKmsB,QAAQsF,SAAU,eAAgBjpB,MAAO9L,MAIlD,OAAOsD,KAAK4vB,OAAQrO,KAAM/Y,MAAO9L,OAGrCkwE,WAAY,SAAU19C,QAClB,IAAMlvB,KAAKmsB,SAAW+C,OAAS,CAC3BlvB,KAAKmsB,QAAU+C,OACflvB,KAAKmsB,QAAQ4F,YAAcq6C,kBAAmBpsE,KAAMA,KAAKmsB,QAAQ4F,aAGrE,KAAO/xB,KAAKmsB,QAAU,CAClBnsB,KAAKqsE,sBAAuBrsE,KAAKmsB,QAAQvjB,SACzC,GAAK5I,KAAKmsB,QAAQsB,aAAe,WAAa,CAC1CztB,KAAKmsB,QAAQvjB,QAAQk6C,aAAe,KACpC9iD,KAAKmsB,QAAQ/F,QAAQ87B,SAAU,YAIvC,QAASliD,KAAKmsB,SAGlB2gD,kBAAmB,WACf,OAAS9sE,KAAKqrE,SAAWrrE,KAAKqrE,QAAQ38D,QAAS,iBAAmB1O,KAAKokB,KAAO,cAGlFmnD,UAAW,SAAUhnE,UACjB,IAAIm9B,KAAO1hC,KAAK4I,QACZmkE,kBAAoB,KACpBC,iBAEJ,IAAMzoE,SAAW,CACb,GAAKvE,KAAK8sE,oBAAsB,CAI5B,WACG,CAIHC,kBAAoB,MACpBxoE,SAAWP,EAAG,UACV,QAAUA,EAAE0B,OAAO0jB,GAAK,iBACxB,gBAAkBsY,KAAK+qC,kBAAoB,cAC1C/9D,QAAS,iBAAmB1O,KAAKokB,KAAO,YAAa,MAC1DpgB,EAAG,uCACE81B,OAAQv1B,UACR02C,OAAQ,SAAUmvB,KACfA,IAAIl0D,iBACJ3R,SAASowC,SAEZ7c,aAAc93B,KAAKomB,SACxB,GAAKpiB,EAAE0B,OAAOuqD,UAAY,CACtB,GAAKjwD,KAAK4I,QAAQ8jE,aAAe,KAAO,CACpCM,cAAe,SAAYtrC,KAAKgrC,YAGpCnoE,SAAS0rD,UAAW+c,iBAKhChtE,KAAK4vB,OAAQrrB,UAEb,GAAKvE,KAAK8sE,qBAAuBC,kBAAoB,CACjD/sE,KAAKqrE,QAAQ/0D,KAAM,cAAetW,KAAK4I,QAAQ6jE,qBAIvD16C,YAAa,SAAUnpB,SACnB,IAAIgX,IAAM5f,KAAK4vB,OAAQhnB,SAGvB,GAAKA,QAAQ6jE,oBAAsB1sE,UAAY,CAC3C,GAAKC,KAAK8sE,oBAAsB,CAC5B9sE,KAAKqrE,QAAQ/0D,KAAM,cAAe1N,QAAQ6jE,oBAIlD,GAAK7jE,QAAQ8jE,cAAgB3sE,WAAaC,KAAKqrE,SAAWrnE,EAAE0B,OAAOuqD,UAAY,CAC3EjwD,KAAKqrE,QAAQpb,UAAW,SAAU,QAASrnD,QAAQ8jE,aAGvD,OAAO9sD,KASXisD,oBAAqB,WACjB7rE,KAAKitE,uBAAyB,KAC9BjtE,KAAK6vB,YAAapY,WAClBzX,KAAKitE,uBAAyB,OAGlCnwB,QAAS,WACL,IAAM98C,KAAKitE,uBAAyB,CAChCjtE,KAAK6vB,YAAapY,aAI1Bma,SAAU,WACN,GAAK5xB,KAAK8sE,oBAAsB,CAC5B9sE,KAAKqrE,QAAQv9C,SAEjB9tB,KAAK4vB,UAGTy8C,sBAAuB,SAAUzjE,SAC7B,IAAIo6C,IACAkqB,oBAIJ,GAAKltE,KAAK8sE,qBAAuB9oE,EAAE0B,OAAOuqD,UAAY,CAGlD,IAAMjN,OAAOh/C,EAAE0B,OAAOuqD,UAAU5yD,UAAUuL,QAAU,CAChD,GAAKA,QAASo6C,OAAUjjD,UAAY,CAChC,GAAKijD,MAAQ,SAAWhjD,KAAK4I,QAAQ8jE,aAAe,KAAO,CACvDQ,iBAAkBlqB,KAAQhjD,KAAK4I,QAAQ8jE,gBACpC,CACHQ,iBAAkBlqB,KAAQp6C,QAASo6C,OAI/ChjD,KAAKqrE,QAAQpb,UAAW,SAAUid,sBAU9ClpE,EAAEkrB,OAAQ,kBAAmBlrB,EAAE0B,OAAOw8C,UAClCt5C,SACIiZ,OAAQ,OAEZ2P,QAAS,WACL,GAAKxxB,KAAK4I,QAAQiZ,SAAW,OACpB7hB,KAAKomB,QAAQ1pB,KAAM,qBAAwB,CAChDsD,KAAKomB,QAAQomD,aAEjB,OAAOxsE,KAAK4vB,UAGhBktB,QAAS,WACL,IAAI0vB,WAEJxsE,KAAK6vB,YAAapY,WAElB,GAAKzX,KAAK4I,QAAQiZ,SAAW,KAAO,CAChC2qD,WAAaxsE,KAAKomB,QAAQ1pB,KAAM,qBAEhC,GAAK8vE,WAAa,CACdA,WAAW1vB,gBAjO3B,CAuOI/gC,SAgBJ,SAAW/X,EAAGjE,WAEd,IAAIotE,MAAQ,EACRC,MAAQ,OAEZ,SAASC,eACL,QAASF,MAGb,SAASG,QAASnxB,QACd,OAAOA,OAAO/oC,KAAKnW,OAAS,GACxBuiC,mBAAoB2c,OAAOnmC,KAAKvR,QAAS2oE,MAAO,OAC5C5tC,mBAAoBnqB,SAASW,KAAKvR,QAAS2oE,MAAO,KAG9DppE,EAAEkrB,OAAQ,WACN3tB,QAAS,2CACTmkB,MAAO,IACP9c,SACI6M,OAAQ,KACR8mC,YAAa,MACb/zC,MAAO,QACP+kE,YAAa,UACbp6C,KAAM,KACND,KAAM,KAGNs6C,SAAU,KACVC,eAAgB,KAChBC,WAAY,KACZ5sD,KAAM,MAGV0Q,QAAS,WACL,IAAIzE,KAAO/sB,KACP4I,QAAU5I,KAAK4I,QAEnB5I,KAAK2tE,QAAU,MAEf3tE,KAAKomB,QACA7f,SAAU,qDACV0Y,YAAa,sBAAuBrW,QAAQ2zC,aAE5Cn6B,SAAU,oBAAqB,YAAcpiB,KAAKgxB,eAAgB,SAAUxoB,OACzE,GAAKxE,EAAGhE,MAAOsG,GAAI,sBAAyB,CACxCkC,MAAM0N,oBASbkM,SAAU,kBAAmB,QAAUpiB,KAAKgxB,eAAgB,WACzD,GAAKhtB,EAAGhE,MAAOyO,QAAS,MAAOnI,GAAI,sBAAyB,CACxDtG,KAAK20C,UAIjB30C,KAAK4tE,eACLhlE,QAAQ6M,OAASzV,KAAK6tE,iBAItB,GAAK7pE,EAAEsa,QAAS1V,QAAQge,UAAa,CACjChe,QAAQge,SAAW5iB,EAAE8pE,OAAQllE,QAAQge,SAASvF,OAC1Crd,EAAEsiB,IAAKtmB,KAAK+tE,KAAKlsD,OAAQ,sBAAwB,SAAU4/B,IACvD,OAAO10B,KAAKghD,KAAKpwE,MAAO8jD,QAE5BusB,OAIR,GAAKhuE,KAAK4I,QAAQ6M,SAAW,OAASzV,KAAKiuE,QAAQhxE,OAAS,CACxD+C,KAAKyV,OAASzV,KAAKkuE,YAAatlE,QAAQ6M,YACrC,CACHzV,KAAKyV,OAASzR,IAGlBhE,KAAK2+C,WAEL,GAAK3+C,KAAKyV,OAAOxY,OAAS,CACtB+C,KAAK8gB,KAAMlY,QAAQ6M,UAI3Bo4D,eAAgB,WACZ,IAAIp4D,OAASzV,KAAK4I,QAAQ6M,OACtB8mC,YAAcv8C,KAAK4I,QAAQ2zC,YAC3B4xB,aAAe94D,SAASjC,KAAKqqB,UAAW,GAE5C,GAAKhoB,SAAW,KAAO,CAEnB,GAAK04D,aAAe,CAChBnuE,KAAK+tE,KAAK5uD,KAAK,SAAUpiB,EAAGqxE,KACxB,GAAKpqE,EAAGoqE,KAAM93D,KAAM,mBAAsB63D,aAAe,CACrD14D,OAAS1Y,EACT,OAAO,SAMnB,GAAK0Y,SAAW,KAAO,CACnBA,OAASzV,KAAK+tE,KAAKpwE,MAAOqC,KAAK+tE,KAAKlsD,OAAQ,oBAIhD,GAAKpM,SAAW,MAAQA,UAAY,EAAI,CACpCA,OAASzV,KAAK+tE,KAAK9wE,OAAS,EAAI,OAKxC,GAAKwY,SAAW,MAAQ,CACpBA,OAASzV,KAAK+tE,KAAKpwE,MAAOqC,KAAK+tE,KAAKhoD,GAAItQ,SACxC,GAAKA,UAAY,EAAI,CACjBA,OAAS8mC,YAAc,MAAQ,GAKvC,IAAMA,aAAe9mC,SAAW,OAASzV,KAAKiuE,QAAQhxE,OAAS,CAC3DwY,OAAS,EAGb,OAAOA,QAGXic,oBAAqB,WACjB,OACI08C,IAAKpuE,KAAKyV,OACVuvD,OAAQhlE,KAAKyV,OAAOxY,OAAS+G,IAAMhE,KAAKquE,gBAAiBruE,KAAKyV,UAItE64D,YAAa,SAAU9lE,OACnB,IAAI+lE,WAAavqE,EAAGhE,KAAK6B,SAAS,GAAG6yC,eAAgBjmC,QAAS,MAC1D+8C,cAAgBxrD,KAAK+tE,KAAKpwE,MAAO4wE,YACjCC,aAAe,KAEnB,GAAKxuE,KAAKyuE,eAAgBjmE,OAAU,CAChC,OAGJ,OAASA,MAAM+b,SACX,KAAKvgB,EAAEsgB,GAAGC,QAAQa,MAClB,KAAKphB,EAAEsgB,GAAGC,QAAQI,KACd6mC,gBACA,MACJ,KAAKxnD,EAAEsgB,GAAGC,QAAQgB,GAClB,KAAKvhB,EAAEsgB,GAAGC,QAAQS,KACdwpD,aAAe,MACfhjB,gBACA,MACJ,KAAKxnD,EAAEsgB,GAAGC,QAAQK,IACd4mC,cAAgBxrD,KAAKiuE,QAAQhxE,OAAS,EACtC,MACJ,KAAK+G,EAAEsgB,GAAGC,QAAQQ,KACdymC,cAAgB,EAChB,MACJ,KAAKxnD,EAAEsgB,GAAGC,QAAQc,MAEd7c,MAAM0N,iBACNmgB,aAAcr2B,KAAK0uE,YACnB1uE,KAAK2uE,UAAWnjB,eAChB,OACJ,KAAKxnD,EAAEsgB,GAAGC,QAAQM,MAEdrc,MAAM0N,iBACNmgB,aAAcr2B,KAAK0uE,YAEnB1uE,KAAK2uE,UAAWnjB,gBAAkBxrD,KAAK4I,QAAQ6M,OAAS,MAAQ+1C,eAChE,OACJ,QACI,OAIRhjD,MAAM0N,iBACNmgB,aAAcr2B,KAAK0uE,YACnBljB,cAAgBxrD,KAAK4uE,cAAepjB,cAAegjB,cAGnD,IAAMhmE,MAAMqmE,QAAU,CAIlBN,WAAWj4D,KAAM,gBAAiB,SAClCtW,KAAK+tE,KAAKhoD,GAAIylC,eAAgBl1C,KAAM,gBAAiB,QAErDtW,KAAK0uE,WAAa1uE,KAAKyyB,OAAO,WAC1BzyB,KAAKuoB,OAAQ,SAAUijC,gBACxBxrD,KAAK0lB,SAIhBopD,cAAe,SAAUtmE,OACrB,GAAKxI,KAAKyuE,eAAgBjmE,OAAU,CAChC,OAIJ,GAAKA,MAAMqmE,SAAWrmE,MAAM+b,UAAYvgB,EAAEsgB,GAAGC,QAAQgB,GAAK,CACtD/c,MAAM0N,iBACNlW,KAAKyV,OAAO+P,UAKpBipD,eAAgB,SAAUjmE,OACtB,GAAKA,MAAMumE,QAAUvmE,MAAM+b,UAAYvgB,EAAEsgB,GAAGC,QAAQW,QAAU,CAC1DllB,KAAK2uE,UAAW3uE,KAAK4uE,cAAe5uE,KAAK4I,QAAQ6M,OAAS,EAAG,QAC7D,OAAO,KAEX,GAAKjN,MAAMumE,QAAUvmE,MAAM+b,UAAYvgB,EAAEsgB,GAAGC,QAAQU,UAAY,CAC5DjlB,KAAK2uE,UAAW3uE,KAAK4uE,cAAe5uE,KAAK4I,QAAQ6M,OAAS,EAAG,OAC7D,OAAO,OAIfu5D,aAAc,SAAUrxE,MAAO6wE,cAC3B,IAAIS,aAAejvE,KAAK+tE,KAAK9wE,OAAS,EAEtC,SAASiyE,YACL,GAAKvxE,MAAQsxE,aAAe,CACxBtxE,MAAQ,EAEZ,GAAKA,MAAQ,EAAI,CACbA,MAAQsxE,aAEZ,OAAOtxE,MAGX,MAAQqG,EAAE8yC,QAASo4B,YAAalvE,KAAK4I,QAAQge,aAAgB,EAAI,CAC7DjpB,MAAQ6wE,aAAe7wE,MAAQ,EAAIA,MAAQ,EAG/C,OAAOA,OAGXixE,cAAe,SAAUjxE,MAAO6wE,cAC5B7wE,MAAQqC,KAAKgvE,aAAcrxE,MAAO6wE,cAClCxuE,KAAK+tE,KAAKhoD,GAAIpoB,OAAQ6nB,QACtB,OAAO7nB,OAGXq0B,WAAY,SAAUpnB,IAAKnM,OACvB,GAAKmM,MAAQ,SAAW,CAEpB5K,KAAK2uE,UAAWlwE,OAChB,OAGJ,GAAKmM,MAAQ,WAAa,CAEtB5K,KAAKmvE,eAAgB1wE,OACrB,OAGJuB,KAAK4vB,OAAQhlB,IAAKnM,OAElB,GAAKmM,MAAQ,cAAgB,CACzB5K,KAAKomB,QAAQnH,YAAa,sBAAuBxgB,OAEjD,IAAMA,OAASuB,KAAK4I,QAAQ6M,SAAW,MAAQ,CAC3CzV,KAAK2uE,UAAW,IAIxB,GAAK/jE,MAAQ,QAAU,CACnB5K,KAAK0pE,aAAcjrE,OAGvB,GAAKmM,MAAQ,cAAgB,CACzB5K,KAAKovE,kBAAmB3wE,SAIhC4wE,OAAQ,SAAUjB,KACd,OAAOA,IAAI93D,KAAM,kBAAqB,WAAa+2D,gBAGvDiC,kBAAmB,SAAUl8D,MACzB,OAAOA,KAAOA,KAAK3O,QAAS,sCAAuC,QAAW,IAGlFq4C,QAAS,WACL,IAAIl0C,QAAU5I,KAAK4I,QACf05C,IAAMtiD,KAAKuvE,QAAQv0D,SAAU,iBAIjCpS,QAAQge,SAAW5iB,EAAEsiB,IAAKg8B,IAAIzgC,OAAQ,sBAAwB,SAAUusD,KACpE,OAAO9rB,IAAI3kD,MAAOywE,OAGtBpuE,KAAK4tE,eAGL,GAAKhlE,QAAQ6M,SAAW,QAAUzV,KAAKiuE,QAAQhxE,OAAS,CACpD2L,QAAQ6M,OAAS,MACjBzV,KAAKyV,OAASzR,SAEX,GAAKhE,KAAKyV,OAAOxY,SAAW+G,EAAE6e,SAAU7iB,KAAKuvE,QAAS,GAAKvvE,KAAKyV,OAAQ,IAAQ,CAEnF,GAAKzV,KAAK+tE,KAAK9wE,SAAW2L,QAAQge,SAAS3pB,OAAS,CAChD2L,QAAQ6M,OAAS,MACjBzV,KAAKyV,OAASzR,QAEX,CACHhE,KAAK2uE,UAAW3uE,KAAKgvE,aAAcrlD,KAAKC,IAAK,EAAGhhB,QAAQ6M,OAAS,GAAK,aAGvE,CAEH7M,QAAQ6M,OAASzV,KAAK+tE,KAAKpwE,MAAOqC,KAAKyV,QAG3CzV,KAAK2+C,YAGTA,SAAU,WACN3+C,KAAKmvE,eAAgBnvE,KAAK4I,QAAQge,UAClC5mB,KAAK0pE,aAAc1pE,KAAK4I,QAAQJ,OAChCxI,KAAKovE,kBAAmBpvE,KAAK4I,QAAQ2kE,aAErCvtE,KAAK+tE,KAAK1gD,IAAKrtB,KAAKyV,QAASa,MACzBk5D,gBAAiB,QACjBtoD,UAAW,IAEflnB,KAAKyvE,OAAOpiD,IAAKrtB,KAAKquE,gBAAiBruE,KAAKyV,SACvC0d,OACA7c,MACGo5D,gBAAiB,QACjBC,cAAe,SAIvB,IAAM3vE,KAAKyV,OAAOxY,OAAS,CACvB+C,KAAK+tE,KAAKhoD,GAAI,GAAIzP,KAAM,WAAY,OACjC,CACHtW,KAAKyV,OACAlP,SAAU,kCACV+P,MACGk5D,gBAAiB,OACjBtoD,SAAU,IAElBlnB,KAAKquE,gBAAiBruE,KAAKyV,QACtByd,OACA5c,MACGo5D,gBAAiB,OACjBC,cAAe,YAK/B/B,aAAc,WACV,IAAI7gD,KAAO/sB,KAEXA,KAAKuvE,QAAUvvE,KAAK4vE,WACfrpE,SAAU,iFACV+P,KAAM,OAAQ,WAEnBtW,KAAK+tE,KAAO/tE,KAAKuvE,QAAQn9D,KAAM,qBAC1B7L,SAAU,kCACV+P,MACGo3B,KAAM,MACNxmB,UAAW,IAGnBlnB,KAAKiuE,QAAUjuE,KAAK+tE,KAAKznD,IAAI,WACrB,OAAOtiB,EAAG,IAAKhE,MAAQ,KAE1BuG,SAAU,kBACV+P,MACGo3B,KAAM,eACNxmB,UAAW,IAGnBlnB,KAAKyvE,OAASzrE,IAEdhE,KAAKiuE,QAAQ9uD,KAAK,SAAUpiB,EAAGo/C,QAC3B,IAAI53C,SAAUygE,MAAOgD,QACjB6H,SAAW7rE,EAAGm4C,QAASn2B,WAAW1P,KAAM,MACxC83D,IAAMpqE,EAAGm4C,QAAS1tC,QAAS,MAC3BqhE,qBAAuB1B,IAAI93D,KAAM,iBAGrC,GAAKg3D,QAASnxB,QAAW,CACrB53C,SAAW43C,OAAO/oC,KAClB4xD,MAAQj4C,KAAK3G,QAAQhU,KAAM2a,KAAKuiD,kBAAmB/qE,eAEhD,CACHyjE,QAAUj7C,KAAKsiD,OAAQjB,KACvB7pE,SAAW,IAAMyjE,QACjBhD,MAAQj4C,KAAK3G,QAAQhU,KAAM7N,UAC3B,IAAMygE,MAAM/nE,OAAS,CACjB+nE,MAAQj4C,KAAKgjD,aAAc/H,SAC3BhD,MAAMruC,YAAa5J,KAAK0iD,OAAQ1yE,EAAI,IAAOgwB,KAAKwiD,SAEpDvK,MAAM1uD,KAAM,YAAa,UAG7B,GAAK0uD,MAAM/nE,OAAQ,CACf8vB,KAAK0iD,OAAS1iD,KAAK0iD,OAAOzuD,IAAKgkD,OAEnC,GAAK8K,qBAAuB,CACxB1B,IAAI1xE,KAAM,wBAAyBozE,sBAEvC1B,IAAI93D,MACA05D,gBAAiBzrE,SAASk5B,UAAW,GACrCosB,kBAAmBgmB,WAEvB7K,MAAM1uD,KAAM,kBAAmBu5D,YAGnC7vE,KAAKyvE,OACAlpE,SAAU,oDACV+P,KAAM,OAAQ,aAIvBs5D,SAAU,WACN,OAAO5vE,KAAKomB,QAAQhU,KAAM,SAAU2T,GAAI,IAG5CgqD,aAAc,SAAU9pD,IACpB,OAAOjiB,EAAG,SACLsS,KAAM,KAAM2P,IACZ1f,SAAU,oDACV7J,KAAM,kBAAmB,OAGlCyyE,eAAgB,SAAUvoD,UACtB,GAAK5iB,EAAEsa,QAASsI,UAAa,CACzB,IAAMA,SAAS3pB,OAAS,CACpB2pB,SAAW,WACR,GAAKA,SAAS3pB,SAAW+C,KAAKiuE,QAAQhxE,OAAS,CAClD2pB,SAAW,MAKnB,IAAM,IAAI7pB,EAAI,EAAG0kD,GAAMA,GAAKzhD,KAAK+tE,KAAMhxE,GAAOA,IAAM,CAChD,GAAK6pB,WAAa,MAAQ5iB,EAAE8yC,QAAS/5C,EAAG6pB,aAAgB,EAAI,CACxD5iB,EAAGy9C,IACEl7C,SAAU,qBACV+P,KAAM,gBAAiB,YACzB,CACHtS,EAAGy9C,IACE52B,YAAa,qBACbrkB,WAAY,kBAIzBxG,KAAK4I,QAAQge,SAAWA,UAG5B8iD,aAAc,SAAUlhE,OACpB,IAAI8hC,QACA4Q,MAAO,SAAU1yC,OACbA,MAAM0N,mBAGd,GAAK1N,MAAQ,CACTxE,EAAEmb,KAAM3W,MAAM3B,MAAM,KAAM,SAAUlJ,MAAO40B,WACvC+X,OAAQ/X,WAAc,kBAI9BvyB,KAAKwyB,KAAMxyB,KAAKiuE,QAAQjtD,IAAKhhB,KAAK+tE,MAAO/sD,IAAKhhB,KAAKyvE,SACnDzvE,KAAKoxB,IAAKpxB,KAAKiuE,QAAS3jC,QACxBtqC,KAAKoxB,IAAKpxB,KAAK+tE,MAAQvjB,QAAS,gBAChCxqD,KAAKoxB,IAAKpxB,KAAKyvE,QAAUjlB,QAAS,kBAElCxqD,KAAK6yB,WAAY7yB,KAAK+tE,MACtB/tE,KAAK0yB,WAAY1yB,KAAK+tE,OAG1BqB,kBAAmB,SAAU7B,aACzB,IAAIvrE,UACAqmB,OAASroB,KAAKomB,QAAQiC,SAE1B,GAAKklD,cAAgB,OAAS,CAC1BvrE,UAAYqmB,OAAO3gB,SACnB1F,WAAahC,KAAKomB,QAAQoB,cAAgBxnB,KAAKomB,QAAQ1e,SAEvD1H,KAAKomB,QAAQo4B,SAAU,YAAar/B,KAAK,WACrC,IAAIU,KAAO7b,EAAGhE,MACVooB,SAAWvI,KAAKgG,IAAK,YAEzB,GAAKuC,WAAa,YAAcA,WAAa,QAAU,CACnD,OAEJpmB,WAAa6d,KAAK2H,YAAa,QAGnCxnB,KAAKomB,QAAQpL,WAAWqS,IAAKrtB,KAAKyvE,QAAStwD,KAAK,WAC5Cnd,WAAagC,EAAGhE,MAAOwnB,YAAa,QAGxCxnB,KAAKyvE,OAAOtwD,KAAK,WACbnb,EAAGhE,MAAO0H,OAAQiiB,KAAKC,IAAK,EAAG5nB,UAC3BgC,EAAGhE,MAAOunB,cAAgBvjB,EAAGhE,MAAO0H,aAE3Cme,IAAK,WAAY,aACf,GAAK0nD,cAAgB,OAAS,CACjCvrE,UAAY,EACZhC,KAAKyvE,OAAOtwD,KAAK,WACbnd,UAAY2nB,KAAKC,IAAK5nB,UAAWgC,EAAGhE,MAAO0H,OAAQ,IAAKA,YACzDA,OAAQ1F,aAInBiuE,cAAe,SAAUznE,OACrB,IAAII,QAAU5I,KAAK4I,QACf6M,OAASzV,KAAKyV,OACd0mC,OAASn4C,EAAGwE,MAAM6N,eAClB+3D,IAAMjyB,OAAO1tC,QAAS,MACtByhE,gBAAkB9B,IAAK,KAAQ34D,OAAQ,GACvC06D,WAAaD,iBAAmBtnE,QAAQ2zC,YACxC6zB,OAASD,WAAansE,IAAMhE,KAAKquE,gBAAiBD,KAClDiC,QAAU56D,OAAOxY,OAAS+G,IAAMhE,KAAKquE,gBAAiB54D,QACtD66D,WACIC,OAAQ96D,OACR+6D,SAAUH,OACVI,OAAQN,WAAansE,IAAMoqE,IAC3BsC,SAAUN,QAGlB5nE,MAAM0N,iBAEN,GAAKk4D,IAAI/nE,SAAU,sBAEX+nE,IAAI/nE,SAAU,oBAEdrG,KAAK2tE,SAEHuC,kBAAoBtnE,QAAQ2zC,aAE5Bv8C,KAAKyxB,SAAU,iBAAkBjpB,MAAO8nE,aAAgB,MAAU,CACxE,OAGJ1nE,QAAQ6M,OAAS06D,WAAa,MAAQnwE,KAAK+tE,KAAKpwE,MAAOywE,KAEvDpuE,KAAKyV,OAASy6D,gBAAkBlsE,IAAMoqE,IACtC,GAAKpuE,KAAK+xC,IAAM,CACZ/xC,KAAK+xC,IAAI4+B,QAGb,IAAMN,OAAOpzE,SAAWmzE,OAAOnzE,OAAS,CACpC+G,EAAE5E,MAAO,oDAGb,GAAKgxE,OAAOnzE,OAAS,CACjB+C,KAAK8gB,KAAM9gB,KAAK+tE,KAAKpwE,MAAOywE,KAAO5lE,OAEvCxI,KAAKkuD,QAAS1lD,MAAO8nE,YAIzBpiB,QAAS,SAAU1lD,MAAO8nE,WACtB,IAAIvjD,KAAO/sB,KACPowE,OAASE,UAAUI,SACnBL,OAASC,UAAUE,SAEvBxwE,KAAK2tE,QAAU,KAEf,SAASh6C,WACL5G,KAAK4gD,QAAU,MACf5gD,KAAK0E,SAAU,WAAYjpB,MAAO8nE,WAGtC,SAASp9C,OACLo9C,UAAUG,OAAOhiE,QAAS,MAAOlI,SAAU,kCAE3C,GAAK6pE,OAAOnzE,QAAU8vB,KAAKnkB,QAAQsqB,KAAO,CACtCnG,KAAK6jD,MAAOR,OAAQrjD,KAAKnkB,QAAQsqB,KAAMS,cACpC,CACHy8C,OAAOl9C,OACPS,YAKR,GAAK08C,OAAOpzE,QAAU+C,KAAK4I,QAAQuqB,KAAO,CACtCnzB,KAAK6wE,MAAOR,OAAQrwE,KAAK4I,QAAQuqB,KAAM,WACnCm9C,UAAUC,OAAO9hE,QAAS,MAAOoc,YAAa,kCAC9CqI,aAED,CACHo9C,UAAUC,OAAO9hE,QAAS,MAAOoc,YAAa,kCAC9CwlD,OAAOl9C,OACPD,OAGJm9C,OAAO/5D,MACHo5D,gBAAiB,QACjBC,cAAe,SAEnBW,UAAUC,OAAOj6D,KAAM,gBAAiB,SAIxC,GAAK85D,OAAOnzE,QAAUozE,OAAOpzE,OAAS,CAClCqzE,UAAUC,OAAOj6D,KAAM,YAAa,QACjC,GAAK85D,OAAOnzE,OAAS,CACxB+C,KAAK+tE,KAAKlsD,OAAO,WACb,OAAO7d,EAAGhE,MAAOsW,KAAM,cAAiB,IAE3CA,KAAM,YAAa,GAGxB85D,OAAO95D,MACHo5D,gBAAiB,OACjBC,cAAe,UAEnBW,UAAUG,OAAOn6D,MACbk5D,gBAAiB,OACjBtoD,SAAU,KAIlBynD,UAAW,SAAUhxE,OACjB,IAAIw+C,OACA1mC,OAASzV,KAAKkuE,YAAavwE,OAG/B,GAAK8X,OAAQ,KAAQzV,KAAKyV,OAAQ,GAAM,CACpC,OAIJ,IAAMA,OAAOxY,OAAS,CAClBwY,OAASzV,KAAKyV,OAGlB0mC,OAAS1mC,OAAOrD,KAAM,mBAAqB,GAC3CpS,KAAKiwE,eACDvmE,OAAQyyC,OACR9lC,cAAe8lC,OACfjmC,eAAgBlS,EAAE2tB,QAI1Bu8C,YAAa,SAAUvwE,OACnB,OAAOA,QAAU,MAAQqG,IAAMhE,KAAK+tE,KAAKhoD,GAAIpoB,QAGjDmzE,UAAW,SAAUnzE,OAEjB,UAAYA,QAAU,SAAW,CAC7BA,MAAQqC,KAAKiuE,QAAQtwE,MAAOqC,KAAKiuE,QAAQpsD,OAAQ,WAAalkB,MAAQ,OAG1E,OAAOA,OAGXi0B,SAAU,WACN,GAAK5xB,KAAK+xC,IAAM,CACZ/xC,KAAK+xC,IAAI4+B,QAGb3wE,KAAKomB,QAAQyE,YAAa,yEAE1B7qB,KAAKuvE,QACA1kD,YAAa,iFACbrkB,WAAY,QAEjBxG,KAAKiuE,QACApjD,YAAa,kBACbrkB,WAAY,QACZA,WAAY,YACZ0f,iBAELlmB,KAAK+tE,KAAK/sD,IAAKhhB,KAAKyvE,QAAStwD,KAAK,WAC9B,GAAKnb,EAAEtH,KAAMsD,KAAM,mBAAsB,CACrCgE,EAAGhE,MAAO8tB,aACP,CACH9pB,EAAGhE,MACE6qB,YAAa,sDACV,iFACHrkB,WAAY,YACZA,WAAY,aACZA,WAAY,aACZA,WAAY,iBACZA,WAAY,mBACZA,WAAY,eACZA,WAAY,iBACZA,WAAY,WAIzBxG,KAAK+tE,KAAK5uD,KAAK,WACX,IAAIsiC,GAAKz9C,EAAGhE,MACRq1D,KAAO5T,GAAG/kD,KAAM,yBACpB,GAAK24D,KAAO,CACR5T,GACKnrC,KAAM,gBAAiB++C,MACvBxtC,WAAY,6BACd,CACH45B,GAAGj7C,WAAY,oBAIvBxG,KAAKyvE,OAAOv8C,OAEZ,GAAKlzB,KAAK4I,QAAQ2kE,cAAgB,UAAY,CAC1CvtE,KAAKyvE,OAAO5pD,IAAK,SAAU,MAInCoM,OAAQ,SAAUt0B,OACd,IAAIipB,SAAW5mB,KAAK4I,QAAQge,SAC5B,GAAKA,WAAa,MAAQ,CACtB,OAGJ,GAAKjpB,QAAUoC,UAAY,CACvB6mB,SAAW,UACR,CACHjpB,MAAQqC,KAAK8wE,UAAWnzE,OACxB,GAAKqG,EAAEsa,QAASsI,UAAa,CACzBA,SAAW5iB,EAAEsiB,IAAKM,SAAU,SAAUmqD,KAClC,OAAOA,MAAQpzE,MAAQozE,IAAM,WAE9B,CACHnqD,SAAW5iB,EAAEsiB,IAAKtmB,KAAK+tE,KAAM,SAAUtsB,GAAIsvB,KACvC,OAAOA,MAAQpzE,MAAQozE,IAAM,QAIzC/wE,KAAKmvE,eAAgBvoD,WAGzBsL,QAAS,SAAUv0B,OACf,IAAIipB,SAAW5mB,KAAK4I,QAAQge,SAC5B,GAAKA,WAAa,KAAO,CACrB,OAGJ,GAAKjpB,QAAUoC,UAAY,CACvB6mB,SAAW,SACR,CACHjpB,MAAQqC,KAAK8wE,UAAWnzE,OACxB,GAAKqG,EAAE8yC,QAASn5C,MAAOipB,aAAgB,EAAI,CACvC,OAEJ,GAAK5iB,EAAEsa,QAASsI,UAAa,CACzBA,SAAW5iB,EAAEgtE,OAASrzE,OAASipB,UAAWonD,WACvC,CACHpnD,UAAajpB,QAGrBqC,KAAKmvE,eAAgBvoD,WAGzB9F,KAAM,SAAUnjB,MAAO6K,OACnB7K,MAAQqC,KAAK8wE,UAAWnzE,OACxB,IAAIovB,KAAO/sB,KACPouE,IAAMpuE,KAAK+tE,KAAKhoD,GAAIpoB,OACpBw+C,OAASiyB,IAAIh8D,KAAM,mBACnB4yD,MAAQhlE,KAAKquE,gBAAiBD,KAC9BkC,WACIlC,IAAKA,IACLpJ,MAAOA,OAIf,GAAKsI,QAASnxB,OAAQ,IAAQ,CAC1B,OAGJn8C,KAAK+xC,IAAM/tC,EAAE6a,KAAM7e,KAAKixE,cAAe90B,OAAQ3zC,MAAO8nE,YAKtD,GAAKtwE,KAAK+xC,KAAO/xC,KAAK+xC,IAAIm/B,aAAe,WAAa,CAClD9C,IAAI7nE,SAAU,mBACdy+D,MAAM1uD,KAAM,YAAa,QAEzBtW,KAAK+xC,IACAhpC,QAAQ,SAAUooE,UAGfnpE,WAAW,WACPg9D,MAAMr3C,KAAMwjD,UACZpkD,KAAK0E,SAAU,OAAQjpB,MAAO8nE,YAC/B,KAEN38C,SAAS,SAAUy9C,MAAOh1B,QAGvBp0C,WAAW,WACP,GAAKo0C,SAAW,QAAU,CACtBrvB,KAAK0iD,OAAOr/D,KAAM,MAAO,MAG7Bg+D,IAAIvjD,YAAa,mBACjBm6C,MAAMx+D,WAAY,aAElB,GAAK4qE,QAAUrkD,KAAKglB,IAAM,QACfhlB,KAAKglB,MAEjB,OAKnBk/B,cAAe,SAAU90B,OAAQ3zC,MAAO8nE,WACpC,IAAIvjD,KAAO/sB,KACX,OACIuO,IAAK4tC,OAAO7lC,KAAM,QAClB+6D,WAAY,SAAUD,MAAO3gC,UACzB,OAAO1jB,KAAK0E,SAAU,aAAcjpB,MAChCxE,EAAE0J,QAAU0jE,MAAQA,MAAOnuD,aAAcwtB,UAAY6/B,eAKrEjC,gBAAiB,SAAUD,KACvB,IAAInoD,GAAKjiB,EAAGoqE,KAAM93D,KAAM,iBACxB,OAAOtW,KAAKomB,QAAQhU,KAAMpS,KAAKsvE,kBAAmB,IAAMrpD,SA1zBhE,CA8zBIlK,SAEJ,SAAW/X,EAAGjE,aAAd,CAEIgc,SAEH,SAAU/X,EAAG5H,QAEV4H,EAAE0B,OAAO4rE,yBAA2B,KAGpC,IAAIrwE,GAAKC,UAAUC,UACfylD,KACAwjB,IAAKhgD,EAAGC,EAAGknD,EAAGC,IAClB,KAAQ,mBAAmBj/D,KAAMrR,UAAUg6B,WAAc,kCAAkC3oB,KAAMtR,KAAQA,GAAGoC,QAAS,gBAAmB,GAAM,CAC1IW,EAAE0B,OAAO4rE,yBAA2B,MACpC,OAGJ1qB,KAAO5iD,EAAE0B,OAAOkhD,KAEhB,SAAS6qB,UAAWvmD,GAChBk/C,IAAMl/C,EAAE5J,cACRkwD,IAAMpH,IAAIsH,6BAEVtnD,EAAIT,KAAK4d,IAAKiqC,IAAIpnD,GAClBC,EAAIV,KAAK4d,IAAKiqC,IAAInnD,GAClBknD,EAAI5nD,KAAK4d,IAAKiqC,IAAID,GAGlB,IAAMn1E,OAAOgH,cAAiBgnB,EAAI,IAASmnD,EAAI,GAAKlnD,EAAI,GAAKknD,EAAI,GAAKlnD,EAAI,IAAOD,EAAI,GAAQ,CACrF,GAAKw8B,KAAK18B,QAAU,CAChB08B,KAAK10B,gBAEP,IAAM00B,KAAK18B,QAAU,CACvB08B,KAAK30B,UAIjBjuB,EAAE0B,OAAO7D,SAASqC,GAAI,aAAc,WAChC,GAAKF,EAAE0B,OAAO4rE,yBAA2B,CACrCttE,EAAE0B,OAAOtJ,OACJmD,KAAM,sCAAuCqnD,KAAK30B,QAClD1yB,KAAM,iCAAkCkyE,eArCzD,CAyCG11D,OAAQ/b,OAEV,SAAUgE,EAAG5H,OAAQ2D,WAClB,IAAO00B,MAAQzwB,EAAG,QACdwD,QAAUxD,EAAE0B,OAAOtJ,OAGvB,SAASu1E,qBACLl9C,MAAM5J,YAAa,uBAIvB7mB,EAAG5H,OAAOyF,UAAW0X,QAAS,cAK9B,IAAMvV,EAAE0B,OAAOw2B,SAAW,CACtB,OAKJ,GAAKl4B,EAAE0B,OAAOy2B,cAAgB,CAC1Bn4B,EAAE0B,OAAO2oB,YAAc,MAI3BoG,MAAMluB,SAAU,iCAIhByB,WAAY2pE,mBAAoB,KAEhC3tE,EAAE0J,OAAQ1J,EAAE0B,QAERoQ,eAAgB,WAEZ,IAAI/H,KAAO/J,EAAE0B,OAAOqI,KAChB6jE,OAAS5tE,EAAG,kDACZoP,KAAOrF,KAAK2xB,UAAW3xB,KAAK6xB,iBAAiB7xB,KAAK8vB,gBAAgBzqB,OAClEw5B,YAAc5oC,EAAE0B,OAAOqI,KAAK8vB,gBAC5Bg0C,SAAWz+D,KAAOvR,SAASyzD,eAAgBliD,MAASrT,UAGxD,IAAM6xE,OAAO30E,OAAS,CAClB20E,OAAS5tE,EAAG,QAASq2C,UAAW,aAAer2C,EAAE0B,OAAO0jB,GAAK,sBAAuBpO,SAAU,GAIlG42D,OAAOzyD,KAAK,WACR,IAAI4oB,MAAQ/jC,EAAGhE,MAGf,IAAM+nC,MAAO,GAAIzoB,aAAc,QAAUtb,EAAE0B,OAAO0jB,GAAK,OAAU,CAC7D2e,MAAMzxB,KAAM,QAAUtS,EAAE0B,OAAO0jB,GAAK,MAAO2e,MAAMzxB,KAAM,OACnDvI,KAAKyK,oBAAqBo0B,YAAYvS,SAAWuS,YAAYlR,YAKzE13B,EAAE0B,OAAOs7B,UAAY4wC,OAAO72D,QAG5B/W,EAAE0B,OAAOmpB,cAAgB7qB,EAAE0B,OAAOs7B,UAC7B3Y,SACA9hB,SAAU,sBACV4H,gBAILnK,EAAE0B,OAAOyvC,iBAAiBptC,UAI1BP,QAAQ+R,QAAS,uBAGjBvV,EAAE0B,OAAOwmB,QAAS,QAGlBylD,qBAMA,KAAS3tE,EAAE0B,OAAOiH,sBACd3I,EAAE0B,OAAOqI,KAAK+xB,YAAazqB,SAASjC,QAClCpP,EAAG6tE,UAAWvrE,GAAI,0BAChBtC,EAAE0B,OAAOqI,KAAKY,OAAQyE,OACtBA,OAASpP,EAAE0B,OAAOopB,gBAAoB,CAI1C,GAAK9qB,EAAEwE,MAAMyZ,QAAQjR,SAAS0rB,qBAAuB,CACjD14B,EAAE0B,OAAOsL,SAAS9P,UAAUg/B,OAAQnyB,KAAK8vB,gBAAgB7nB,MAG7DhS,EAAE0B,OAAOiK,WAAY3L,EAAE0B,OAAOs7B,WAC1BvzB,WAAY,OACZwD,QAAS,KACTsH,WAAY,MACZD,eAAgB,WAEjB,CAGH,IAAMtU,EAAEwE,MAAMyZ,QAAQjR,SAAS0rB,qBAAuB,CAClDl1B,QAAQ+R,QAAS,cAAe,WAC7B,CAGHvV,EAAE0B,OAAOsL,SAAS5B,QAAQsD,SAC1B1O,EAAE0B,OAAOsL,SAAUhN,EAAE0B,OAAOqI,KAAKY,OAAQ0G,SAASjC,MAASiC,SAASjC,KAAOiC,SAASW,WAMpGhS,EAAE,WAEEA,EAAE8jB,QAAQkR,YAOV,GAAKh1B,EAAE0B,OAAOyoB,WAAa,CACvB/xB,OAAO+tB,SAAU,EAAG,GAMxBnmB,EAAE0B,OAAOskB,mBAAuBhmB,EAAE8jB,QAAQgN,WAAa9wB,EAAE0B,OAAOtJ,OAAO04B,cAAgB,EAAM,EAAI,EAGjG,GAAK9wB,EAAE0B,OAAOkQ,mBAAqB,CAC/B5R,EAAE0B,OAAOoQ,iBAKb,GAAK9R,EAAE0B,OAAOyoB,WAAa,CACvB3mB,QAAQsZ,KAAM9c,EAAE0B,OAAOokB,cAG3B,IAAM9lB,EAAE8jB,QAAQmU,iBAAmB,CAO/Bj4B,EAAE0B,OAAO7D,SAASugB,SAAU,kCAAmC,SAC3D,SAAU8I,GACNA,EAAEhV,iBACFgV,EAAE0X,iCA7JtB,CAkKG7mB,OAAQ/b,UAKTzC,KAAKnB,SAID01E,SAKA,SAAU91E,OAAQD,SAExBC,OAAOD,QAAUM,sCAIX01E,WAKA,SAAU/1E,OAAQD,SAExBC,OAAOD,QAAUO,sCAIXsK,OAKA,SAAU5K,OAAQD,SAExBC,OAAOD,QAAUQ","sourcesContent":["﻿/*!\n * cdp.framework.jqm.js 2.1.1\n *\n * Date: 2018-03-23T11:33:36.610Z\n */\n\n(function webpackUniversalModuleDefinition(root, factory) {\n    if(typeof exports === 'object' && typeof module === 'object')\n        module.exports = factory(require(\"backbone\"), require(\"cdp.i18n\"), require(\"jquery\"));\n    else if(typeof define === 'function' && define.amd)\n        define([\"backbone\", \"cdp.i18n\", \"jquery\"], factory);\n    else if(typeof exports === 'object')\n        exports[\"Framework\"] = factory(require(\"backbone\"), require(\"cdp.i18n\"), require(\"jquery\"));\n    else\n        root[\"CDP\"] = root[\"CDP\"] || {}, root[\"CDP\"][\"Framework\"] = factory(root[\"Backbone\"], root[\"CDP\"], root[\"jQuery\"]);\n})(window, function(__WEBPACK_EXTERNAL_MODULE_backbone__, __WEBPACK_EXTERNAL_MODULE_cdp_i18n__, __WEBPACK_EXTERNAL_MODULE_jquery__) {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/     // install a JSONP callback for chunk loading\n/******/     function webpackJsonpCallback(data) {\n/******/         var chunkIds = data[0];\n/******/         var moreModules = data[1];\n/******/\n/******/         // add \"moreModules\" to the modules object,\n/******/         // then flag all \"chunkIds\" as loaded and fire callback\n/******/         var moduleId, chunkId, i = 0, resolves = [];\n/******/         for(;i < chunkIds.length; i++) {\n/******/             chunkId = chunkIds[i];\n/******/             if(installedChunks[chunkId]) {\n/******/                 resolves.push(installedChunks[chunkId][0]);\n/******/             }\n/******/             installedChunks[chunkId] = 0;\n/******/         }\n/******/         for(moduleId in moreModules) {\n/******/             if(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n/******/                 modules[moduleId] = moreModules[moduleId];\n/******/             }\n/******/         }\n/******/         if(parentJsonpFunction) parentJsonpFunction(data);\n/******/         while(resolves.length) {\n/******/             resolves.shift()();\n/******/         }\n/******/\n/******/     };\n/******/\n/******/\n/******/     // The module cache\n/******/     var installedModules = {};\n/******/\n/******/     // object to store loaded and loading chunks\n/******/     var installedChunks = {\n/******/         \"index\": 0\n/******/     };\n/******/\n/******/\n/******/\n/******/     // The require function\n/******/     function __webpack_require__(moduleId) {\n/******/\n/******/         // Check if module is in cache\n/******/         if(installedModules[moduleId]) {\n/******/             return installedModules[moduleId].exports;\n/******/         }\n/******/         // Create a new module (and put it into the cache)\n/******/         var module = installedModules[moduleId] = {\n/******/             i: moduleId,\n/******/             l: false,\n/******/             exports: {}\n/******/         };\n/******/\n/******/         // Execute the module function\n/******/         modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/         // Flag the module as loaded\n/******/         module.l = true;\n/******/\n/******/         // Return the exports of the module\n/******/         return module.exports;\n/******/     }\n/******/\n/******/\n/******/     // expose the modules object (__webpack_modules__)\n/******/     __webpack_require__.m = modules;\n/******/\n/******/     // expose the module cache\n/******/     __webpack_require__.c = installedModules;\n/******/\n/******/     // define getter function for harmony exports\n/******/     __webpack_require__.d = function(exports, name, getter) {\n/******/         if(!__webpack_require__.o(exports, name)) {\n/******/             Object.defineProperty(exports, name, {\n/******/                 configurable: false,\n/******/                 enumerable: true,\n/******/                 get: getter\n/******/             });\n/******/         }\n/******/     };\n/******/\n/******/     // define __esModule on exports\n/******/     __webpack_require__.r = function(exports) {\n/******/         Object.defineProperty(exports, '__esModule', { value: true });\n/******/     };\n/******/\n/******/     // getDefaultExport function for compatibility with non-harmony modules\n/******/     __webpack_require__.n = function(module) {\n/******/         var getter = module && module.__esModule ?\n/******/             function getDefault() { return module['default']; } :\n/******/             function getModuleExports() { return module; };\n/******/         __webpack_require__.d(getter, 'a', getter);\n/******/         return getter;\n/******/     };\n/******/\n/******/     // Object.prototype.hasOwnProperty.call\n/******/     __webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/     // __webpack_public_path__\n/******/     __webpack_require__.p = \"\";\n/******/\n/******/     // on error function for async loading\n/******/     __webpack_require__.oe = function(err) { console.error(err); throw err; };\n/******/\n/******/     var jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n/******/     var oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n/******/     jsonpArray.push = webpackJsonpCallback;\n/******/     jsonpArray = jsonpArray.slice();\n/******/     for(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n/******/     var parentJsonpFunction = oldJsonpFunction;\n/******/\n/******/\n/******/     // Load entry module and return exports\n/******/     return __webpack_require__(__webpack_require__.s = \"./built/cdp.framework.jqm-lib.js\");\n/******/ })\n/************************************************************************/\n/******/ ({\n\n/***/ \"./built/cdp.framework.jqm-lib.js\":\n/*!****************************************!*\\\n  !*** ./built/cdp.framework.jqm-lib.js ***!\n  \\****************************************/\n/*! no static exports found */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/*** IMPORTS FROM imports-loader ***/\n(function() {\n\n(function (root, factory) { if (true) { !(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(/*! cdp.i18n */ \"cdp.i18n\"), __webpack_require__(/*! backbone */ \"backbone\")], __WEBPACK_AMD_DEFINE_RESULT__ = (function () { return factory(root.CDP || (root.CDP = {})); }).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),\n                __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__)); } else {} }(this, function (CDP) { CDP.Framework = CDP.Framework || {};\n/// <reference types=\"backbone\" />\nvar CDP;\n(function (CDP) {\n    var Framework;\n    (function (Framework) {\n        Framework.Model = Backbone.Model;\n        Framework.Collection = Backbone.Collection;\n        Framework.View = Backbone.View;\n        Framework.Events = Backbone.Events;\n    })(Framework = CDP.Framework || (CDP.Framework = {}));\n})(CDP || (CDP = {}));\nvar CDP;\n(function (CDP) {\n    // @internal Error code offset definition of `cdp-framework-jqm`.\n    var RESULT_CODE_BASE;\n    (function (RESULT_CODE_BASE) {\n        RESULT_CODE_BASE[RESULT_CODE_BASE[\"CDP_FRAMEWORK_DECLARERATION\"] = 0] = \"CDP_FRAMEWORK_DECLARERATION\";\n        RESULT_CODE_BASE[RESULT_CODE_BASE[\"CDP_FRAMEWORK\"] = 4 * CDP._MODULE_RESULT_CODE_RANGE_CDP] = \"CDP_FRAMEWORK\";\n    })(RESULT_CODE_BASE = CDP.RESULT_CODE_BASE || (CDP.RESULT_CODE_BASE = {}));\n    ///////////////////////////////////////////////////////////////////////\n    // module error declaration:\n    var FUNCTION_CODE_RANGE = 10;\n    // @internal cdp.framework.jqm 内のローカルコードオフセット値\n    var LOCAL_CODE_BASE;\n    (function (LOCAL_CODE_BASE) {\n        LOCAL_CODE_BASE[LOCAL_CODE_BASE[\"CORE_API\"] = 0] = \"CORE_API\";\n        LOCAL_CODE_BASE[LOCAL_CODE_BASE[\"ROUTER\"] = 1 * FUNCTION_CODE_RANGE] = \"ROUTER\";\n        LOCAL_CODE_BASE[LOCAL_CODE_BASE[\"PAGE\"] = 2 * FUNCTION_CODE_RANGE] = \"PAGE\";\n    })(LOCAL_CODE_BASE || (LOCAL_CODE_BASE = {}));\n    /* tslint:disable:max-line-length */\n    // Error code definition of `cdp-framework-jqm`.\n    var RESULT_CODE;\n    (function (RESULT_CODE) {\n        RESULT_CODE[RESULT_CODE[\"ERROR_CDP_FRAMEWORK_DECLARATION\"] = 0] = \"ERROR_CDP_FRAMEWORK_DECLARATION\";\n        /** `en` [[CDP.Framework.initialize]]() failer code. <br> `ja` [[CDP.Framework.initialize]]() のエラーコード */\n        RESULT_CODE[RESULT_CODE[\"ERROR_CDP_FRAMEWORK_INITIALIZE_FAILED\"] = CDP.DECLARE_ERROR_CODE(RESULT_CODE_BASE.CDP_FRAMEWORK, LOCAL_CODE_BASE.CORE_API + 1, \"framework initialize failed.\")] = \"ERROR_CDP_FRAMEWORK_INITIALIZE_FAILED\";\n        /** `en` [[CDP.Router._initialize]]() failer code. <br> `ja` [[CDP.Router._initialize]]() のエラーコード */\n        RESULT_CODE[RESULT_CODE[\"ERROR_CDP_FRAMEWORK_ROUTER_INITIALIZE_FAILED\"] = CDP.DECLARE_ERROR_CODE(RESULT_CODE_BASE.CDP_FRAMEWORK, LOCAL_CODE_BASE.ROUTER + 1, \"router initialize failed.\")] = \"ERROR_CDP_FRAMEWORK_ROUTER_INITIALIZE_FAILED\";\n    })(RESULT_CODE = CDP.RESULT_CODE || (CDP.RESULT_CODE = {}));\n    /* tslint:enable:max-line-length */\n})(CDP || (CDP = {}));\n/* tslint:disable:max-line-length */\nvar CDP;\n(function (CDP) {\n    var Framework;\n    (function (Framework) {\n        /**\n         * @en platform judgement utility\n         * @ja platform 判定オブジェクト\n         *\n         * @seehttps://w3g.jp/blog/tools/js_browser_sniffing\n         */\n        Framework.Platform = (function () {\n            var ua = navigator.userAgent.toLowerCase();\n            var majorVersion = function (browser) {\n                var version = ua.match(new RegExp(\"(\" + browser + \")( |/)([0-9]+)\"));\n                if (!version || version.length < 4) {\n                    return 0;\n                }\n                return parseInt(version[3], 10);\n            };\n            return {\n                ltIE6: typeof window.addEventListener === \"undefined\" && typeof document.documentElement.style.maxHeight === \"undefined\",\n                ltIE7: typeof window.addEventListener === \"undefined\" && typeof document.querySelectorAll === \"undefined\",\n                ltIE8: typeof window.addEventListener === \"undefined\" && typeof document.getElementsByClassName === \"undefined\",\n                ltIE9: document.uniqueID && typeof window.matchMedia === \"undefined\",\n                gtIE10: document.uniqueID && window.matchMedia,\n                Trident: document.uniqueID,\n                Gecko: \"MozAppearance\" in document.documentElement.style,\n                Presto: CDP.global.opera,\n                Blink: CDP.global.chrome,\n                Webkit: typeof CDP.global.chrome === \"undefined\" && \"WebkitAppearance\" in document.documentElement.style,\n                Touch: typeof CDP.global.ontouchstart !== \"undefined\",\n                Mobile: (typeof CDP.global.orientation !== \"undefined\") || (ua.indexOf(\"Windows Phone\") !== -1),\n                ltAd4_4: typeof CDP.global.orientation !== \"undefined\" && (typeof CDP.global.EventSource === \"undefined\" || 30 > majorVersion(\"chrome\")),\n                Pointer: CDP.global.navigator.pointerEnabled,\n                MSPoniter: CDP.global.navigator.msPointerEnabled,\n                Android: (ua.indexOf(\"android\") !== -1),\n                iOS: (ua.indexOf(\"iphone\") !== -1 || ua.indexOf(\"ipad\") !== -1 || ua.indexOf(\"ipod\") !== -1),\n            };\n        })();\n    })(Framework = CDP.Framework || (CDP.Framework = {}));\n})(CDP || (CDP = {}));\n/* tslint:disable:typedef no-bitwise */\nvar CDP;\n(function (CDP) {\n    var Framework;\n    (function (Framework) {\n        /**\n         * vclick patch\n         */\n        var _vclickPatch = function () {\n            var jquery_on = $.fn.on, jquery_off = $.fn.off;\n            var custom_on = function (types, selector, data, fn, /*INTERNAL*/ one) {\n                if (typeof types === \"string\") {\n                    types = types.replace(/vclick/g, \"click\");\n                }\n                return _.bind(jquery_on, this)(types, selector, data, fn, one);\n            };\n            var custom_off = function (types, selector, fn) {\n                if (typeof types === \"string\") {\n                    types = types.replace(/vclick/g, \"click\");\n                }\n                return _.bind(jquery_off, this)(types, selector, fn);\n            };\n            // replace functions.\n            $.fn.on = custom_on;\n            $.fn.off = custom_off;\n        };\n        /**\n         * $.mobile.widget.popup patch for \"_createPrerequisites\"\n         *\n         * patch code from jqm 1.5\n         * https://github.com/jquery/jquery-mobile/commit/d34c86ae14d4ea603357be5e326de1fb8c31dbf9\n         */\n        var _apply_jqm_popup_createPrerequisites = function () {\n            var _safeCreatePrerequisites = function (screenPrerequisite, containerPrerequisite, whenDone) {\n                var prerequisites;\n                var self = this;\n                prerequisites = {\n                    screen: $.Deferred(),\n                    container: $.Deferred()\n                };\n                prerequisites.screen.done(function () {\n                    if (prerequisites === self._prerequisites) {\n                        screenPrerequisite();\n                    }\n                });\n                prerequisites.container.done(function () {\n                    if (prerequisites === self._prerequisites) {\n                        containerPrerequisite();\n                    }\n                });\n                $.when(prerequisites.screen, prerequisites.container).done(function () {\n                    if (prerequisites === self._prerequisites) {\n                        self._prerequisites = null;\n                        whenDone();\n                    }\n                });\n                self._prerequisites = prerequisites;\n            };\n            var $mobile = $.mobile;\n            if ($mobile.widgets && $mobile.widgets.popup) {\n                $mobile.widgets.popup.prototype._createPrerequisites = _safeCreatePrerequisites;\n            }\n        };\n        /**\n         * $.mobile.widget.popup patch for \"_handleWindowResize\"\n         *\n         * patch code from stack overflow\n         * https://stackoverflow.com/questions/27090445/jqmobile-re-positions-popup-window-every-time-when-android-opens-own-virtual-key\n         */\n        var _apply_jqm_popup_handleWindowResize = function () {\n            var _safeHandleWindowResize = function () {\n                if (this._isOpen && this._ignoreResizeTo === 0) {\n                    if ((this._expectResizeEvent() || this._orientationchangeInProgress) &&\n                        !this._ui.container.hasClass(\"ui-popup-hidden\")) {\n                        // effectively rapid-close the popup while leaving the screen intact\n                        //judge user is in input mode or not.\n                        if (!($(\":focus\").is(\"input\") || $(\":focus\").is(\"textarea\"))) {\n                            this._ui.container\n                                .addClass(\"ui-popup-hidden ui-popup-truncate\")\n                                .removeAttr(\"style\");\n                        }\n                    }\n                }\n            };\n            var $mobile = $.mobile;\n            if ($mobile.widgets && $mobile.widgets.popup) {\n                $mobile.widgets.popup.prototype._handleWindowResize = _safeHandleWindowResize;\n            }\n        };\n        /**\n         * $.mobile.widget.popup patch\n         */\n        var _mobilePopupPatch = function () {\n            var jqueryMajor = ~~$.fn.jquery.split(\".\")[0];\n            var jqmVersion = $.mobile.version.split(\".\");\n            var jqmMajor = ~~jqmVersion[0];\n            var jqmMiner = ~~jqmVersion[1];\n            if (3 <= jqueryMajor && jqmMajor < 2 && jqmMiner < 5) {\n                _apply_jqm_popup_createPrerequisites();\n                _apply_jqm_popup_handleWindowResize();\n            }\n        };\n        //___________________________________________________________________________________________________________________//\n        /**\n         * @en patch class for jqm framework.\n         * @ja jqm framework 用パッチ適用クラス\n         *\n         * @internal\n         */\n        var Patch = /** @class */ (function () {\n            function Patch() {\n            }\n            ///////////////////////////////////////////////////////////////////////\n            // public static methods\n            /**\n             * @en Apply patch before initialize.\n             * @ja 初期化前のパッチの適用\n             */\n            Patch.applyBeforeInit = function () {\n                if (!Patch.isSupportedVclick()) {\n                    _vclickPatch();\n                    Patch.s_vclickEvent = \"click\";\n                }\n            };\n            /**\n             * @en Apply patch after initialize.\n             * @ja 初期化後のパッチの適用\n             */\n            Patch.applyAfterInit = function () {\n                _mobilePopupPatch();\n            };\n            /**\n             * @en if \"vclick\" event is unsupported, returns false. ex: Android 4.4 (Kitkat)\n             * @ja \"vclick\" event が非サポートである platform (KitKat) は false を返す。 <br>\n             *      jQM の version up により、解決される場合は無効かする。\n             */\n            Patch.isSupportedVclick = function () {\n                // for Android 4.4+ (Kitkat ～)\n                if (Framework.Platform.Android && !Framework.Platform.ltAd4_4) {\n                    return false;\n                }\n                return true;\n            };\n            Patch.s_vclickEvent = \"vclick\";\n            return Patch;\n        }());\n        Framework.Patch = Patch;\n    })(Framework = CDP.Framework || (CDP.Framework = {}));\n})(CDP || (CDP = {}));\nvar CDP;\n(function (CDP) {\n    var Framework;\n    (function (Framework) {\n        /**\n         * @en Orientation code\n         * @ja orientation 識別子\n         */\n        var Orientation;\n        (function (Orientation) {\n            Orientation[Orientation[\"PORTRAIT\"] = 0] = \"PORTRAIT\";\n            Orientation[Orientation[\"LANDSCAPE\"] = 1] = \"LANDSCAPE\";\n        })(Orientation = Framework.Orientation || (Framework.Orientation = {}));\n        /**\n         * @en Get Orientation enum code\n         * @ja Orientation の取得\n         */\n        function getOrientation() {\n            var $window = $(window);\n            return ($window.width() < $window.height()) ? Orientation.PORTRAIT : Orientation.LANDSCAPE;\n        }\n        Framework.getOrientation = getOrientation;\n    })(Framework = CDP.Framework || (CDP.Framework = {}));\n})(CDP || (CDP = {}));\n\n/* tslint:disable:max-line-length forin no-bitwise */\nvar CDP;\n(function (CDP) {\n    var Promise = CDP.Promise;\n    /**\n     * @en The function returned Promise waits until `cordova` is ready. <br>\n     *     [Note] emulate when PC enviroment.\n     *\n     * @ja `cordova` が有効になるまで待機 <br>\n     *     PC 環境ではエミュレートされる。\n     */\n    function waitForDeviceReady() {\n        return new Promise(function (resolve) {\n            if (!CDP.Framework.Platform.Mobile) {\n                setTimeout(function () {\n                    resolve();\n                }, 100);\n            }\n            else {\n                if (null == CDP.global.cordova || null == CDP.global.cordova.exec) {\n                    $(document).one(\"deviceready\", function () {\n                        resolve();\n                    });\n                }\n                else {\n                    resolve();\n                }\n            }\n        });\n    }\n    CDP.waitForDeviceReady = waitForDeviceReady;\n    var _defaultBackButtonHandler = null;\n    /**\n     * @en Setup H/W Back key handler.\n     * @ja H/W Back key ハンドラの設定関数\n     *\n     * @param\n     * - `en` handler function.\n     * - `ja` handler 指定.\n     * @returns\n     * - `en` old handler function.\n     * - `ja` 以前の handler.\n     */\n    function setBackButtonHandler(handler) {\n        var oldHandler = _defaultBackButtonHandler;\n        _defaultBackButtonHandler = handler;\n        return oldHandler;\n    }\n    CDP.setBackButtonHandler = setBackButtonHandler;\n    // back key handler implement.\n    (function () {\n        waitForDeviceReady()\n            .then(function () {\n            $(document).on(\"backbutton\", function (event) {\n                if (_defaultBackButtonHandler) {\n                    _defaultBackButtonHandler(event);\n                }\n            });\n        });\n    })();\n    //___________________________________________________________________________________________________________________//\n    var Framework;\n    (function (Framework) {\n        var TAG = \"[CDP.Framework] \";\n        var _dfInitialize = $.Deferred();\n        /**\n         * @en Initialization function of Framework.\n         * @ja Framework の初期化関数\n         */\n        function initialize(options) {\n            if (\"pending\" !== _dfInitialize.state()) {\n                return _dfInitialize.promise();\n            }\n            // CDP 環境の初期化\n            // 現状は、console オブジェクトの保証と jQuery の WinRT 対応。\n            CDP.initialize({\n                success: function () {\n                    var config = getConfig(options);\n                    // Framework 用の Patch 適用 (Framework 初期化前)\n                    if (config.applyPatch) {\n                        Framework.Patch.applyBeforeInit();\n                    }\n                    // config の反映: jquery\n                    config.applyJQueryConfig();\n                    // jQuery Mobile の初期化\n                    $(document).on(\"mobileinit\", function () {\n                        // config の反映: jquery mobile\n                        config.applyJQueryMobileConfig();\n                        // cdp.i18n の初期化\n                        CDP.initializeI18N(config.i18n)\n                            .always(function (info) {\n                            // i18next の初期化時のエラーは無視する. info が array の場合、エラー情報が格納されている.\n                            $(document)\n                                .one(\"pagebeforechange\", function (event, data) {\n                                data.options.showLoadMsg = false;\n                            })\n                                .on(\"pagebeforecreate\", function (event) {\n                                // i18nextライブラリによるhtml fragmentの翻訳処理\n                                $(event.target).localize();\n                            });\n                            // Router の初期化\n                            if (Framework.Router._initialize({\n                                anchorVclick: config.anchorVclick,\n                                firstPageTransition: config.firstPageTransition,\n                            })) {\n                                // Framework 用の Patch 適用 (Framework 初期化後)\n                                if (config.applyPatch) {\n                                    Framework.Patch.applyAfterInit();\n                                }\n                                _dfInitialize.resolve();\n                            }\n                            else {\n                                _dfInitialize.reject(CDP.makeErrorInfo(CDP.RESULT_CODE.ERROR_CDP_FRAMEWORK_ROUTER_INITIALIZE_FAILED, TAG, \"error. CDP.Framework.Router.initialize() failed.\"));\n                                _dfInitialize = $.Deferred();\n                            }\n                        });\n                    });\n                    {\n                        // jquery 3+\n                        var jqueryMajor = ~~$.fn.jquery.split(\".\")[0];\n                        if (3 <= jqueryMajor) {\n                            if (4 <= jqueryMajor) {\n                                console.warn(TAG + \"jquery-migrate for 3.0.0+ in use.\");\n                            }\n                            Promise.resolve(/*! AMD require */).then(function() { var __WEBPACK_AMD_REQUIRE_ARRAY__ = [__webpack_require__(/*! jquery-migrate */ \"./external/jquery/scripts/jquery-migrate.js\")]; (function () {\n                                Promise.resolve(/*! AMD require */).then(function() {[__webpack_require__(/*! jquery.mobile */ \"./external/jquery/scripts/jquery.mobile.js\")];}).catch(__webpack_require__.oe);\n                            }).apply(null, __WEBPACK_AMD_REQUIRE_ARRAY__);}).catch(__webpack_require__.oe);\n                        }\n                        else {\n                            Promise.resolve(/*! AMD require */).then(function() {[__webpack_require__(/*! jquery.mobile */ \"./external/jquery/scripts/jquery.mobile.js\")];}).catch(__webpack_require__.oe);\n                        }\n                    }\n                },\n                fail: function (error) {\n                    _dfInitialize.reject(CDP.makeErrorInfo(CDP.RESULT_CODE.ERROR_CDP_FRAMEWORK_INITIALIZE_FAILED, TAG, \"error. CDP.initialize() failed.\", error));\n                    _dfInitialize = $.Deferred();\n                },\n            });\n            return _dfInitialize.promise();\n        }\n        Framework.initialize = initialize;\n        /**\n         * @en Check for initialization status.\n         * @ja 初期化済みか判定\n         *\n         * @returns\n         * - `en` true: initialized / false: uninitialized\n         * - `ja` true: 初期化済み / false: 未初期化\n         */\n        function isInitialized() {\n            return \"resolved\" === _dfInitialize.state();\n        }\n        Framework.isInitialized = isInitialized;\n        /**\n         * @en Wait for initialization status.\n         * @ja 初期化待ち\n         */\n        function waitForInitialize() {\n            return _dfInitialize.promise();\n        }\n        Framework.waitForInitialize = waitForInitialize;\n        var _orientationListenerHolder = {};\n        /**\n         * @en Register IOrientationChangedListener to framework.\n         * @ja IOrientationChangedListener を Framework に登録\n         *\n         * @param key\n         *  - `en` ID key\n         *  - `ja` クライアントで管理可能な ID\n         * @param listener\n         *  - `en` IOrientationChangedListener instance\n         *  - `ja` IOrientationChangedListener インスタンス\n         */\n        function registerOrientationChangedListener(key, listener) {\n            _orientationListenerHolder[key] = listener;\n        }\n        Framework.registerOrientationChangedListener = registerOrientationChangedListener;\n        /**\n         * @en Unregister IOrientationChangedListener from framework.\n         * @ja IOrientationChangedListener を Framework から登録解除\n         *\n         * @param key\n         *  - `en` ID key by using register\n         *  - `ja` 登録時に使用した ID\n         */\n        function unregisterOrientationChangedListener(key) {\n            delete _orientationListenerHolder[key];\n        }\n        Framework.unregisterOrientationChangedListener = unregisterOrientationChangedListener;\n        var _activePage = null;\n        /**\n         * @en Setup event handlers when after router initialized.\n         * @ja イベントハンドラの設定. Router 初期化後に Framework がコールする.\n         *\n         * @internal\n         */\n        function _setupEventHandlers() {\n            (function () {\n                var oldBackButtonHandler = CDP.setBackButtonHandler(null);\n                var baseBackButtonHandler = function (event) {\n                    if (_activePage && _activePage.onHardwareBackButton(event)) {\n                        // クライアント側でハンドリング済みと指定された場合、既定の処理を行わない\n                        return;\n                    }\n                    else {\n                        oldBackButtonHandler(event);\n                    }\n                };\n                CDP.setBackButtonHandler(baseBackButtonHandler);\n            })();\n            (function () {\n                var oldRouteChangeHandler = CDP.Framework.setBeforeRouteChangeHandler(null);\n                var baseRouteChangeHandler = function () {\n                    if (_activePage) {\n                        return _activePage.onBeforeRouteChange();\n                    }\n                    else {\n                        return oldRouteChangeHandler();\n                    }\n                };\n                CDP.Framework.setBeforeRouteChangeHandler(baseRouteChangeHandler);\n            })();\n        }\n        Framework._setupEventHandlers = _setupEventHandlers;\n        var _lastOrientation = null;\n        /**\n         * @en Setup active IPage instance.\n         * @ja active Page の設定. Framework がコールする.\n         *\n         * @internal\n         */\n        function _setActivePage(page) {\n            _activePage = page;\n            if (_activePage) {\n                _lastOrientation = Framework.getOrientation();\n            }\n        }\n        Framework._setActivePage = _setActivePage;\n        /**\n         * @en Reterns framework default click event string.\n         * @ja Framework が既定に使用するクリックイベント文字列を取得\n         *\n         * @returns \"vclick\" / \"click\"\n         */\n        function getDefaultClickEvent() {\n            return Framework.Patch.s_vclickEvent;\n        }\n        Framework.getDefaultClickEvent = getDefaultClickEvent;\n        var _pageConstructors = [];\n        var _pageInstances = [];\n        /**\n         * @en Register Concrete IPage class. <br>\n         *     If constructor needs arguments, use bind() function.\n         * @ja Page の登録 <br>\n         *     constructor を指定する. 引数がある場合は、bind を行うこと\n         *\n         * @param ctor\n         *  - `en` Concrete IPage class constructor\n         *  - `ja` コンストラクタを指定\n         */\n        function registerPage(ctor) {\n            _pageConstructors.push(ctor);\n        }\n        Framework.registerPage = registerPage;\n        /**\n         * @en Page instances are generated from the reserved constructor.\n         * @ja 予約されたコンストラクタからPage インスタンスを生成\n         */\n        function constructPages() {\n            _pageConstructors.forEach(function (ctor) {\n                _pageInstances.push(new ctor());\n            });\n            _pageConstructors = [];\n        }\n        Framework.constructPages = constructPages;\n        /**\n         * @en Release Page instance reference\n         * @ja Page インスタンスの参照を破棄\n         */\n        function disposePages() {\n            _pageInstances = [];\n        }\n        Framework.disposePages = disposePages;\n        /**\n         * @en Get Config object.\n         * @ja Config object の取得\n         *\n         * @internal\n         */\n        function getConfig(options) {\n            var defConfig = {\n                // for fail safe, default settings.\n                jquery: {\n                    ajaxSetup: { cache: false },\n                    migrateMute: true,\n                },\n                jquerymobile: {\n                    allowCrossDomainPages: true,\n                    defaultPageTransition: \"platform-default\",\n                    defaultDialogTransition: \"platform-default\",\n                    hashListeningEnabled: false,\n                    pushStateEnabled: false,\n                    // @see jquery.mobile.js LINE 6394\n                    transitionHandler: {\n                        defaultHandler: \"simultaneous\",\n                        sequential: [\"fade\", \"flip\", \"flow\"],\n                        simultaneous: [],\n                    },\n                },\n                i18n: {\n                    fallbackResources: {},\n                    options: {},\n                },\n                applyPatch: true,\n                anchorVclick: true,\n                firstPageTransition: false,\n                applyJQueryConfig: function () {\n                    var _this = this;\n                    Object.keys(this.jquery).forEach(function (key) {\n                        if (\"ajaxSetup\" === key) {\n                            $.ajaxSetup(_this.jquery.ajaxSetup);\n                        }\n                        else {\n                            $[key] = _this.jquery[key];\n                        }\n                    });\n                },\n                applyJQueryMobileConfig: function () {\n                    var _this = this;\n                    $.mobile.loader.prototype.options.text = undefined;\n                    Object.keys(this.jquerymobile).forEach(function (key) {\n                        if (\"transitionHandler\" === key) {\n                            var $mobile_1 = $.mobile;\n                            // default handler\n                            $mobile_1.defaultTransitionHandler\n                                = $mobile_1.transitionHandlers[_this.jquerymobile.transitionHandler.defaultHandler];\n                            // simultaneous handler\n                            _this.jquerymobile.transitionHandler.simultaneous.forEach(function (transition) {\n                                $mobile_1.transitionHandlers[transition] = $mobile_1.transitionHandlers.simultaneous;\n                            });\n                            // sequential handler\n                            _this.jquerymobile.transitionHandler.sequential.forEach(function (transition) {\n                                $mobile_1.transitionHandlers[transition] = $mobile_1.transitionHandlers.sequential;\n                            });\n                        }\n                        else {\n                            $.mobile[key] = _this.jquerymobile[key];\n                        }\n                    });\n                },\n            };\n            return $.extend(true, {}, defConfig, CDP.Config, options);\n        }\n        ///////////////////////////////////////////////////////////////////////\n        // closure methods\n        // resize handler\n        $(window).on(\"resize\", function (event) {\n            var newOrientation = Framework.getOrientation();\n            if (_lastOrientation !== newOrientation) {\n                for (var key in _orientationListenerHolder) {\n                    _orientationListenerHolder[key].onOrientationChanged(newOrientation);\n                }\n                if (_activePage) {\n                    _activePage.onOrientationChanged(newOrientation);\n                }\n                _lastOrientation = newOrientation;\n            }\n        });\n    })(Framework = CDP.Framework || (CDP.Framework = {}));\n})(CDP || (CDP = {}));\n\n/* tslint:disable:max-line-length no-string-literal */\nvar CDP;\n(function (CDP) {\n    var Framework;\n    (function (Framework) {\n        var Promise = CDP.Promise;\n        var TAG = \"[CDP.Framework.Router] \";\n        ///////////////////////////////////////////////////////////////////////\n        // closure methods\n        /**\n         * @en Convert path to URL. <br>\n         *     If the path starts from \"/\", the function translate the path as child folder of \"web root\". <br>\n         *     Otherwise, it interprets as relative path from current page. <br>\n         *     [Note] This behavior go along with jQM, NOT with require.toUrl().\n         *\n         * @ja path を URL に変換 <br>\n         *     \"/\" から始まるものは web root から、それ以外は現在のページから絶対パスURLに変換する。 <br>\n         *     jQM の挙動にあわせており、require.toUrl() と異なるので注意。\n         *\n         * @param path\n         *  - `en` set relative path from [[webRoot]], or relative path from current scirpt owner html (It doesn't start from \"/\").\n         *  - `ja` [[webRoot]] からの相対パス, もしくはカレントスクリプトを走らせている HTML からの相対パス (\"/\" なし).\n         */\n        function toUrl(path) {\n            if (null != path[0] && \"/\" === path[0]) {\n                return CDP.toUrl(path);\n            }\n            else {\n                return $.mobile.path.makeUrlAbsolute(path, getCurrentDocumentUrl());\n            }\n        }\n        Framework.toUrl = toUrl;\n        /**\n         * @en Get current document url.\n         * @ja 現在表示しているドキュメントの URL を取得\n         *\n         * @internal\n         */\n        function getCurrentDocumentUrl() {\n            var $activePage = $(\"body\").pagecontainer(\"getActivePage\");\n            if (null == $activePage) {\n                return $.mobile.path.documentBase.hrefNoHash;\n            }\n            var base = $.mobile.path.documentBase.hrefNoHash;\n            var url = $.mobile.activePage.closest(\".ui-page\").jqmData(\"url\");\n            if (!url || !$.mobile.path.isPath(url)) {\n                url = base;\n            }\n            return $.mobile.path.makeUrlAbsolute(url, base);\n        }\n        /**\n         * @en Default \"before route change\" handler.\n         * @ja 既定の \"before route change\" ハンドラ\n         *\n         * @internal\n         */\n        var _beforeRouteChange = function () {\n            return Promise.resolve();\n        };\n        // default \"before route change\" hanndler\n        var _defaultBeforeRouteChange = _beforeRouteChange;\n        /**\n         * @en Setup \"before route change\" handler.\n         * @ja \"before route change\" ハンドラ設定\n         *\n         * @internal\n         *\n         * @param\n         *  - `en` handler function.\n         *  - `ja` handler 指定.\n         * @returns\n         *  - `en` old handler function.\n         *  - `ja` 以前の handler.\n         */\n        function setBeforeRouteChangeHandler(handler) {\n            if (null == handler) {\n                return _beforeRouteChange;\n            }\n            else {\n                var oldHandler = _beforeRouteChange;\n                _beforeRouteChange = handler;\n                return oldHandler;\n            }\n        }\n        Framework.setBeforeRouteChangeHandler = setBeforeRouteChangeHandler;\n        //___________________________________________________________________________________________________________________//\n        /**\n         * @en Router class for adjusting jQueryMobile functions and Backbone.Router functions. <br>\n         *     Even if Backbone.Router does not start routing, natigate() method works good with jQM framework.\n         *\n         * @ja jQueryMobile と Backbone.Router を調停する Router クラス <br>\n         *     ルーティングを開始していない場合にも、navigate() は jQM フレームワークを使用して機能する。\n         */\n        var Router = /** @class */ (function () {\n            function Router() {\n            }\n            ///////////////////////////////////////////////////////////////////////\n            // public static methods\n            /**\n             * @en for initialize Router. this function is called in framework.\n             * @ja この関数はフレームワーク内部で使用される。\n             *\n             * @internal\n             *\n             * @param  options\n             *  - `en` init options\n             *  - `ja` 初期化オプション\n             * @returns\n             *  - `en` true: succeeded / false: failed.\n             *  - `ja` true: 成功 / 失敗\n             */\n            Router._initialize = function (options) {\n                var $body = $(\"body\");\n                if (!!Router.s_router) {\n                    console.warn(TAG + \"logic error. initialize call twice.\");\n                    return false;\n                }\n                Router.s_initOptions = $.extend({}, Router.s_defaultInitOptions, options);\n                if (Router.s_initOptions.firstPageTransition) {\n                    Router.s_firstChangePage = false;\n                }\n                // Backbone.Router が、route を解決できなかった場合にも通知を捕捉するためのコールバックを設定\n                Router.s_loadUrl = _.bind(Backbone.history.loadUrl, Backbone.history);\n                Backbone.history.loadUrl = Router.customLoadUrl;\n                Router.s_router = new Backbone.Router();\n                Router.s_router.on(\"route\", Router.onRouteSucceeded);\n                // Backbone.Router を使用している場合、$.mobile.back() の挙動をブラウザの[戻る]に統一\n                if (!$.mobile.hashListeningEnabled) {\n                    Router.s_back = _.bind($.mobile.back, $.mobile);\n                    $.mobile.back = Router.customJqmBack;\n                }\n                // changePage をサポート\n                if (null == $.mobile.changePage) {\n                    $.mobile.changePage = function (to, opt) {\n                        $body.pagecontainer(\"change\", to, opt);\n                    };\n                }\n                Router.bindEvents();\n                // Framework のイベントハンドラを更新\n                Framework._setupEventHandlers();\n                return true;\n            };\n            /**\n             * @en Register to Router.\n             * @ja Router への登録.\n             *\n             * @param route\n             *  - `en` route string, it can be regular expression.\n             *  - `ja` ルーティング文字列 / 正規表現\n             * @param page\n             *  - `en` page template path.\n             *  - `ja` page template path. イベント名にも使用される\n             * @param top\n             *  - `en` set \"true\" if application's top view. (optional)\n             *  - `ja` Top ページの場合は true を指定 (任意)\n             * @param callback\n             *  - `en` callback for custom page transition. If you don't want to trigger jQM.changePage(), return true by this callback. (optional)\n             *  - `ja` 遷移を自身で管理する場合に指定し、戻り値を true に設定すると changePage をコールしない (任意)\n             * @returns\n             *  - `en` Router instance.\n             *  - `ja` インスタンス。ただし method chain をしたい場合は、any cast が必要。\n             */\n            Router.register = function (route, page, top, callback) {\n                if (top === void 0) { top = false; }\n                // Backbone.Router への登録は history の停止が必要\n                var restart = Router.stop();\n                var name = route + page;\n                var context = {\n                    route: route,\n                    regexp: Router.s_router._routeToRegExp(route),\n                    page: page,\n                    top: top,\n                    callback: callback || function () { return false; }\n                };\n                if (Router.pushContext(name, context)) {\n                    Router.s_router.route(route, name, function () { });\n                }\n                if (restart) {\n                    // 再開時は再読み込みしない。\n                    Router.start({ silent: true, pageConstruct: false });\n                }\n                return Router;\n            };\n            /**\n             * @en Start listening hash change. <br>\n             *     It should be called after register().\n             *\n             * @ja 履歴監視の開始 <br>\n             *     登録完了後にクライアントが呼ぶことでページ遷移が開始される。\n             *\n             * @param options\n             *  - `en` options object for Backbone.History.\n             *  - `ja` Backbone.History にわたるオプション\n             */\n            Router.start = function (options) {\n                var opt = $.extend({ pageConstruct: true }, options);\n                if (opt.pageConstruct) {\n                    Framework.constructPages();\n                }\n                if ($.mobile.hashListeningEnabled) {\n                    console.error(TAG + \"setting error. confict: $.mobile.hashListeningEnabled = true, cannot start.\");\n                    return;\n                }\n                Backbone.history.start(opt);\n            };\n            /**\n             * @en Stop listening hash change.\n             * @ja 履歴監視の停止\n             *\n             * @returns\n             *  - `en` previous status.\n             *  - `ja` 以前の開始状態を返却\n             */\n            Router.stop = function () {\n                var prevState = Backbone.History.started;\n                Backbone.history.stop();\n                return prevState;\n            };\n            /**\n             * @en Check routing status.\n             * @ja ルーティングを開始しているか判定\n             *\n             * @returns\n             *  - `en` true: routing / false: not routing\n             *  - `en` true: 有効 / false: 無効\n             */\n            Router.isRouting = function () {\n                return Backbone.History.started;\n            };\n            /**\n             * @en URL navigation.\n             * @ja URL遷移\n             *\n             * @param url\n             *  - `en` set a navigate URL. (relative path / absolute path / fragment)\n             *  - `ja` 遷移 URL を指定 (相対パス/絶対パス/フラグメント)\n             * @param transition\n             *  - `en` set a transition string.\n             *  - `ja` transition に使用する effect を指定\n             * @param reverse\n             *  - `en` set a direction string for transition. true:reverse / false:nomal\n             *  - `ja` transition に使用する direction を指定 true:reverse/false:通常\n             * @param options\n             *  - `en` set a options object for Backbone.Router.navigate().\n             *  - `ja` Backbone.Router.navigate() に渡されるオプション\n             */\n            Router.navigate = function (url, transition, reverse, options) {\n                if (!!Router.s_lastNavigateInfo.inNavigation) {\n                    // すでに Navigation 中であれば抑止\n                    console.warn(TAG + \"Router.navigate() called in navigation proc.\");\n                    return;\n                }\n                else if (Router.initFirstPageIfNeeded(url)) {\n                    return;\n                }\n                var navOptions = $.extend({}, Router.s_defaultNavigateOptions, options);\n                // ページ遷移開始通知. Sub Flow にてすでにコールされている場合は既定の何もしないコールバックを使用する.\n                var notifyBeforeRouteChange = Router.s_lastNavigateInfo.calledBeforeRouteChange ? _defaultBeforeRouteChange : _beforeRouteChange;\n                Router.s_lastNavigateInfo = {\n                    url: url,\n                    transition: transition,\n                    reverse: reverse,\n                    backDestination: navOptions.backDestination,\n                    noHashChange: navOptions.noHashChange,\n                    intent: navOptions.intent || {},\n                    positiveNavigate: true,\n                    calledBeforeRouteChange: true,\n                    inNavigation: true,\n                };\n                // ページ遷移開始通知\n                notifyBeforeRouteChange()\n                    .fail(function () {\n                    // beforeRouteChange() が失敗した場合、致命的な不具合となるため、error 記録のみにして先に進む。\n                    console.error(TAG + \"before route change call, failed.\");\n                })\n                    .always(function () {\n                    if (Router.isRouting() && !Router.s_lastNavigateInfo.noHashChange) {\n                        if (navOptions.subFlow) {\n                            switch (navOptions.subFlow.operation) {\n                                case \"begin\":\n                                    Router.startSubFlow(navOptions.subFlow);\n                                    break;\n                                case \"end\":\n                                    Router.finishSubFlow(navOptions);\n                                    return; // navigation は呼ばない\n                                default:\n                                    console.warn(TAG + \"unknown subFlow.operation. operation: \" + navOptions.subFlow.operation);\n                                    break;\n                            }\n                        }\n                        var result = Backbone.history.navigate(url, navOptions);\n                        // Backbone.history.loadUrl() がコールされなかった場合, navigation 終了\n                        if (!result || \"string\" === typeof result) {\n                            Router.s_lastNavigateInfo.inNavigation = false;\n                        }\n                    }\n                    else {\n                        if (navOptions.subFlow) {\n                            console.warn(TAG + \"subFlow only supported under routing and hash change condition.\");\n                        }\n                        var fragment_1 = Backbone.history.getFragment(url);\n                        var context = void 0;\n                        if (Router.s_lastNavigateInfo.noHashChange) {\n                            // noHashChange が指定されたとき\n                            context = _.find(Router.s_rootContexts, function (ctx) {\n                                return ctx.regexp.test(fragment_1);\n                            });\n                        }\n                        else {\n                            // Backbone.Router が有効でないとき\n                            context = _.findWhere(Router.s_rootContexts, { route: fragment_1 });\n                        }\n                        if (context) {\n                            url = context.page;\n                        }\n                        Router.changePage(url);\n                    }\n                });\n            };\n            /**\n             * @en Navigate from Top Page. <br>\n             *     If SubFlow set up, the param is cleared.\n             *\n             * @ja トップページからの画面遷移 <br>\n             *     SubFlow が指定されていた場合はクリアされる\n             * @param to\n             *  - `en` set a navigate URL or PageStackOptions object or array.\n             *  - `ja` 遷移 URL / PageStackOptions オブジェクト/配列\n             * @param transition\n             *  - `en` set a transition string\n             *  - `ja` transition に使用する effect を指定\n             * @param reverse\n             *  - `en` set a direction string for transition. true:reverse / false:nomal\n             *  - `ja` transition に使用する direction を指定 true:reverse/false:通常\n             * @param options\n             *  - `en` set a options object for Backbone.Router.navigate().\n             *  - `ja` Backbone.Router.navigate() に渡されるオプション\n             */\n            Router.navigateFromTop = function (to, transition, reverse, options) {\n                var stack = Router._getJqmHistory().stack;\n                var currentPage = stack[Router._getJqmHistory().activeIndex];\n                var _transition = transition || currentPage.transition;\n                var _reverse = (null != reverse) ? reverse : true;\n                var destStacks = (function () {\n                    if (!to) {\n                        return null;\n                    }\n                    else if (\"string\" === typeof to) {\n                        return [{ route: to }];\n                    }\n                    else if (to instanceof Array) {\n                        return to;\n                    }\n                    else {\n                        return [to];\n                    }\n                })();\n                // 指定された SubFlow を削除\n                stack.forEach(function (value) {\n                    delete value[Router.SUBFLOW_PARAM];\n                });\n                // 初期ページに SubFlow パラメータを指定\n                stack[0][Router.SUBFLOW_PARAM] = {\n                    operation: \"begin\",\n                    destBase: stack[0].hash,\n                    destStacks: destStacks,\n                    additionalDistance: 0,\n                };\n                Router.navigate(null, _transition, _reverse, $.extend({}, options, {\n                    subFlow: {\n                        operation: \"end\",\n                    }\n                }));\n            };\n            /**\n             * @ en Back to previous history. <br>\n             *      It's same as browser back button's behaviour. <br>\n             *      [Note] If set the jQM: data-rel=\"back\", work as well.\n             *\n             * @ja 履歴を戻る <br>\n             *     ブラウザの戻るボタンと同じ挙動。 <br>\n             *     jQM: data-rel=\"back\" を指定しても同じであることに注意。\n             */\n            Router.back = function () {\n                if (!!Router.s_lastNavigateInfo.inNavigation) {\n                    // すでに Navigation 中であれば抑止\n                    console.warn(TAG + \"Router.back() called in navigation proc.\");\n                    return;\n                }\n                else if (Router.isTopPage()) {\n                    // Top ページに指定されていれば終了\n                    var app = navigator.app || {};\n                    if (!!app.exitApp) {\n                        app.exitApp(); // note: never exit on iOS\n                        return;\n                    }\n                }\n                Router.s_lastNavigateInfo = {\n                    inNavigation: true,\n                    calledBeforeRouteChange: true,\n                };\n                // ページ遷移開始通知\n                _beforeRouteChange()\n                    .then(function () {\n                    $.mobile.back();\n                })\n                    .fail(function () {\n                    console.error(\"before route change call, failed.\");\n                    Router.s_lastNavigateInfo = {};\n                });\n            };\n            /**\n             * @en Store Intent object by framwork.\n             * @ja Intent を格納。 フレームワークが使用する。\n             *\n             * @internal\n             */\n            Router._pushIntent = function (intent) {\n                Router.s_lastIntent = $.extend(true, Router.s_lastIntent, intent);\n            };\n            /**\n             * @en Get Intent object by framework.\n             * @ja Intent を取得。フレームワークが使用する。\n             *\n             * @internal\n             */\n            Router._popIntent = function () {\n                var intent = Router.s_lastIntent;\n                Router.s_lastIntent = {};\n                return intent;\n            };\n            /**\n             * @en Get query parameters. <br>\n             *     It can be accessed during \"pagebeforecreate\" to \"pagechange\".\n             * @ja query parameter に指定された引数の取得 <br>\n             *     ページ遷移中にのみアクセス可能 (pagebeforecreate ～ pagechange)\n             */\n            Router.getQueryParameters = function () {\n                if (Router.s_lastNavigateInfo.intent && Router.s_lastNavigateInfo.intent.params) {\n                    return Router.s_lastNavigateInfo.intent.params[\"queryParams\"];\n                }\n                else {\n                    return null;\n                }\n            };\n            /**\n             * @en Begin sub flow transaction.\n             * @ja sub flow トランザクションの開始\n             *\n             * @param url\n             *  - `en` set a navigate URL. (relative path / absolute path / fragment)\n             *  - `ja` 遷移 URL を指定 (相対パス/絶対パス/フラグメント)\n             * @param options\n             *  - `en` set a options object for Backbone.Router.navigate().\n             *  - `ja` Backbone.Router.navigate() に渡されるオプション\n             * @param transition\n             *  - `en` set a transition string\n             *  - `ja` transition に使用する effect を指定\n             * @param reverse\n             *  - `en` set a direction string for transition. true:reverse / false:nomal\n             *  - `ja` transition に使用する direction を指定 true:reverse/false:通常\n             */\n            Router.beginSubFlow = function (url, options, transition, reverse) {\n                var opt = $.extend({}, options);\n                opt.subFlow = opt.subFlow || { operation: \"begin\" };\n                if (\"begin\" !== opt.subFlow.operation) {\n                    console.error(TAG + \"logic error. invalid subflow operation. [operation: \" + opt.subFlow.operation + \"]\");\n                    return;\n                }\n                Router.navigate(url, transition, reverse, opt);\n            };\n            /**\n             * @en Commit sub flow transaction.\n             * @ja sub flow トランザクションの終了\n             *\n             * @param transition\n             * - `en` set a transition string\n             * - `ja` transition に使用する effect を指定\n             * @param reverse\n             * - `en` set a direction string for transition. true:reverse / false:nomal\n             * - `ja` transition に使用する direction を指定 true:reverse/false:通常\n             */\n            Router.commitSubFlow = function (transition, reverse) {\n                Router.navigate(null, transition, reverse, {\n                    subFlow: {\n                        operation: \"end\",\n                    }\n                });\n            };\n            /**\n             * @en Cancel sub flow transaction.\n             * @ja sub flow トランザクションのキャンセル\n             *\n             * @param transition\n             *  - `en` set a transition string\n             *  - `ja` transition に使用する effect を指定\n             * @param reverse\n             *  - `en` set a direction string for transition. true:reverse[default] / false:nomal\n             *  - `ja` transition に使用する direction を指定 true:reverse[既定]/false:通常\n             */\n            Router.cancelSubFlow = function (transition, reverse) {\n                // 起点のページに戻る\n                var baseInfo = Router.detectSubFlowBaseInfo();\n                baseInfo.subFlowParam.additionalDistance = 0;\n                Router.navigate(null, transition, (null != reverse) ? reverse : true, {\n                    subFlow: {\n                        operation: \"end\",\n                        destStacks: null,\n                    }\n                });\n            };\n            /**\n             * @en Check in sub flow.\n             * @ja sub flow 内であるか判定\n             */\n            Router.isInSubFlow = function () {\n                var stack = Router._getJqmHistory().stack;\n                var has = _.some(stack, function (value) {\n                    return !!value[Router.SUBFLOW_PARAM];\n                });\n                return has;\n            };\n            /**\n             * @en Check from hash changed navigation.\n             * @ja Hash 変更によって Navigate が起こったか判定. \"pagechange\" が発生するまでに判定可能\n             */\n            Router.fromHashChanged = function () {\n                // positiveNavigate = false は含めない\n                return Router.s_lastNavigateInfo.inNavigation && (null == Router.s_lastNavigateInfo.positiveNavigate);\n            };\n            Router.registerPageStack = function (pageStack, withNavigate, options) {\n                var newStacks = [];\n                var failed = false;\n                pageStack = (pageStack instanceof Array) ? pageStack : [pageStack];\n                withNavigate = (null == withNavigate) ? false : withNavigate;\n                (function () {\n                    var makeStack = function (info) {\n                        var url;\n                        var fragment = Backbone.history.getFragment(info.route);\n                        var context = _.find(Router.s_rootContexts, function (ctx) {\n                            return ctx.regexp.test(fragment);\n                        });\n                        if (!context) {\n                            console.warn(TAG + \"route is not registered. route: \" + info.route);\n                            return null;\n                        }\n                        else {\n                            url = Router.pathToJqmDataUrl(context.page);\n                        }\n                        var stack = {\n                            route: info.route,\n                            pageUrl: url,\n                            title: info.title,\n                            transition: info.transition,\n                            url: url,\n                        };\n                        return stack;\n                    };\n                    for (var i = 0, n = pageStack.length; i < n; i++) {\n                        var stack = makeStack(pageStack[i]);\n                        if (!stack) {\n                            failed = true;\n                            break;\n                        }\n                        else {\n                            newStacks.push(stack);\n                        }\n                    }\n                })();\n                if (failed) {\n                    return false;\n                }\n                (function () {\n                    // Router の停止\n                    var restart = Router.stop();\n                    var silentLength = newStacks.length - 1;\n                    var finalIndex = newStacks.length - 1;\n                    Router._getJqmHistory().clearForward();\n                    for (var i = 0, n = silentLength; i < n; i++) {\n                        location.hash = newStacks[i].route;\n                        Router._getJqmHistory().stack.push(newStacks[i]);\n                        Router._getJqmHistory().activeIndex = Router._getJqmHistory().stack.length - 1;\n                    }\n                    // final stack with navigate\n                    if (withNavigate) {\n                        var transition = (function () {\n                            if (null != Router.s_lastNavigateInfo.transition) {\n                                return Router.s_lastNavigateInfo.transition;\n                            }\n                            else {\n                                return newStacks[finalIndex].transition;\n                            }\n                        })();\n                        var reverse = (function () {\n                            if (null != Router.s_lastNavigateInfo.reverse) {\n                                return Router.s_lastNavigateInfo.reverse;\n                            }\n                            else {\n                                return false;\n                            }\n                        })();\n                        restart = false;\n                        Router.start({ silent: true });\n                        Router.navigate(newStacks[finalIndex].route, transition, reverse, options);\n                    }\n                    else {\n                        location.hash = newStacks[finalIndex].route;\n                        Router._getJqmHistory().stack.push(newStacks[finalIndex]);\n                        Router._getJqmHistory().activeIndex = Router._getJqmHistory().stack.length - 1;\n                    }\n                    // Router の再開\n                    if (restart) {\n                        Router.start({ silent: true });\n                    }\n                })();\n                return true;\n            };\n            /**\n             * @en Get jQM's history object\n             * @ja jQM の History オブジェクトの取得\n             *\n             * @internal\n             */\n            Router._getJqmHistory = function () {\n                return $.mobile.navigate.history;\n            };\n            ///////////////////////////////////////////////////////////////////////\n            // private static methods\n            /**\n             * @en Override: Backbone.History.loadUrl().\n             * @ja Backbone.History.loadUrl() のオーバーライド\n             */\n            Router.customLoadUrl = function (fragment) {\n                var handled = Router.s_loadUrl(fragment);\n                if (!handled) {\n                    Router.onRouteFailed(fragment);\n                }\n                return true;\n            };\n            /**\n             * @en Override: $.mobile.back().\n             *  - fail safe processing. <br>\n             *    If using Backbone's Router, <br>\n             *    this class unuses history object of jQuery Mobile 1.4, <br>\n             *    and standardize as browser back button's behaviour. (jQM 1.3 comparable)\n             *\n             * @ja $.mobile.back() のオーバーライド\n             *  - [TBD] fail safe 処理 <br>\n             *    Backbone の Router を使用している場合、 <br>\n             *    jQuery Mobile 1.4 以降の内部の History 管理は使用せずに <br>\n             *    1.3 相当のブラウザの[戻る]の挙動に統一する。\n             */\n            Router.customJqmBack = function () {\n                if (Router.isRouting()) {\n                    history.back();\n                }\n                else {\n                    // jQM 既定処理\n                    Router.s_back();\n                }\n            };\n            /**\n             * \\~english\n             * Bind events.\n             *\n             * @private\n             *\n             * \\~japanese\n             * イベントバインド\n             *\n             * @private\n             */\n            Router.bindEvents = function () {\n                $(document)\n                    .one(\"pagechange\", function () {\n                    if (Router.s_initOptions.anchorVclick) {\n                        // anchor vclick\n                        $(document).on(\"vclick\", \"[href]\", function (event) {\n                            Router.onAnchorVclicked(event);\n                        });\n                    }\n                })\n                    .on(\"pagebeforeshow\", function (event) {\n                    // \"data-back-dst\" を page に設定\n                    if (null != Router.s_lastNavigateInfo.backDestination) {\n                        var active = Router._getJqmHistory().getActive();\n                        active[Router.BACK_DESTINATION_URL] = Router.s_lastNavigateInfo.backDestination;\n                    }\n                })\n                    .on(\"pageshow\", function (event) {\n                    var active = Router._getJqmHistory().getActive();\n                    if (active[Router.SUBFLOW_PARAM]) {\n                        delete active[Router.SUBFLOW_PARAM];\n                    }\n                })\n                    .on(\"pagechange pagecontainerloadfailed\", function (event) {\n                    Router.s_lastNavigateInfo = {};\n                });\n                // back key assign\n                CDP.setBackButtonHandler(Router.back);\n            };\n            /**\n             * @en Store the RootContext.\n             * @ja RootContext の格納\n             *\n             * @param name\n             *  - `en` name of route\n             *  - `ja` route 名\n             * @param context\n             *  - `en` context object\n             *  - `ja` context オブジェクト\n             * @returns\n             *  - `en` true: succeeded / false: already registered\n             *  - `ja` true: 登録成功 / false: すでに登録されている\n             */\n            Router.pushContext = function (name, context) {\n                if (!!Router.s_rootContexts[name]) {\n                    console.error(TAG + \"logic error. route is already registered. name: \" + name);\n                    return false;\n                }\n                Router.s_rootContexts[name] = context;\n                return true;\n            };\n            /**\n             * @en Check if $.mobile.initializePage() is called or not, and call it if needed.\n             * @ja  $.mobile.initializePage() が呼ばれているか確認し、必要なら初期化する。\n             *\n             * @param url\n             *  - `en` set a navigate URL. (relative path / absolute path / fragment)\n             *  - `ja` 遷移 URL を指定 (相対パス/絶対パス/フラグメント)\n             */\n            Router.initFirstPageIfNeeded = function (url) {\n                if (!$.mobile.autoInitializePage) {\n                    $(document).one(\"pagebeforechange\", function (event, data) {\n                        data.toPage = Framework.toUrl(url);\n                    });\n                    $.mobile.initializePage();\n                    $.mobile.autoInitializePage = true;\n                    return true;\n                }\n                return false;\n            };\n            /**\n             * @en Check for current page is top.\n             * @ja 現在のページが top に指定されているか判定\n             *\n             * @returns\n             *  - `en` true: top page / false: not top page\n             *  - `ja` true: top 指定 / false: top ではない\n             */\n            Router.isTopPage = function () {\n                var fragment = Backbone.history.getFragment($.mobile.path.parseUrl(location.href).hash);\n                var context = _.find(Router.s_rootContexts, function (ctx) {\n                    return ctx.regexp.test(fragment);\n                });\n                return (null == context) ? false : context.top;\n            };\n            /**\n             * @en Called when anchor received \"vclick\" event.\n             * @ja anchor が vclick されたときにコールされる\n             *\n             * @returns\n             *  - `en` true: need default processing / false: need custom processing\n             *  - `ja` true: default 処理 / false: カスタム処理\n             */\n            Router.onAnchorVclicked = function (event) {\n                if (Router.isJustBeforeVclicked()) {\n                    event.preventDefault();\n                    return false;\n                }\n                return Router.followAnchor(event);\n            };\n            /**\n             * @en Anchor processing.\n             * @ja anchor 処理\n             */\n            Router.followAnchor = function (event) {\n                var $target = $(event.currentTarget);\n                var url = $target.jqmData(\"href\") || $target.attr(\"href\");\n                var transition = $target.jqmData(\"transition\");\n                var direction = $target.jqmData(\"direction\");\n                var backDst = $target.attr(Router.DATA_BACK_DESTINATION);\n                var noHashChange = $target.attr(Router.DATA_NO_HASH_CHANGE) ?\n                    $target.attr(Router.DATA_NO_HASH_CHANGE) === \"true\" : false;\n                var noHrefHandle = $target.attr(Router.DATA_NO_VCLICK_HANDLE) ?\n                    $target.attr(Router.DATA_NO_VCLICK_HANDLE) === \"true\" : false;\n                /*\n                 * - 明示的にハンドルしない指定がある場合\n                 * - jQM のフラグメントの場合\n                 * 既定の処理を行う\n                 */\n                if (noHrefHandle || Router.needDefaultOperation(url)) {\n                    return true;\n                }\n                // custom behavier\n                event.preventDefault();\n                if (Router.isBackButtonClicked(event)) {\n                    Router.back();\n                }\n                else {\n                    Router.navigate(url, transition, !!direction, { noHashChange: noHashChange, backDestination: backDst });\n                }\n                return false;\n            };\n            /**\n             * @en Check default processing needed.\n             * @ja 既定の処理を行わせるか判定\n             *\n             * @param  url\n             *  - `en` url string\n             *  - `ja` url 文字列\n             * @returns\n             *  - `en` true: need default processing / false: need not\n             *  - `ja` true: 既定の処理が必要 / false: 不要\n             */\n            Router.needDefaultOperation = function (url) {\n                if (!url || (\"#\" === url)) {\n                    return true;\n                }\n                else if (\"#\" === url[0]) {\n                    return !Router.canResolveRoute(url);\n                }\n                else {\n                    return false;\n                }\n            };\n            /**\n             * @en Check status of Backbone.Router if they can resolve route.\n             * @ja Backbone.Router が route を解決可能か判定\n             *\n             * @param  url\n             *  - `en` url string\n             *  - `ja` url 文字列\n             * @returns\n             *  - `en` true: can resolve / false: can not\n             *  - `ja` true: 解決可能 / false: 解決不可\n             */\n            Router.canResolveRoute = function (url) {\n                var fragment = Backbone.history.getFragment(url);\n                return _.any(Backbone.history.handlers, function (handler) {\n                    if (handler.route.test(fragment)) {\n                        return true;\n                    }\n                });\n            };\n            /**\n             * @en Check \"vclick\" fired at the last minute.\n             * @ja 直前に vclick が呼ばれたか判定\n             */\n            Router.isJustBeforeVclicked = function () {\n                var isBefore = (Date.now() - Router.s_lastClickedTime) < Router.DELAY_TIME * 2;\n                Router.s_lastClickedTime = Date.now();\n                return isBefore;\n            };\n            /**\n             * @en Check back button clicked.\n             * @ja Back Button がクリックされたか判定\n             */\n            Router.isBackButtonClicked = function (event) {\n                if ($(event.currentTarget).jqmData(\"rel\") === \"back\") {\n                    return true;\n                }\n                else {\n                    return false;\n                }\n            };\n            /**\n             * @en It called on succeed routing triggered by changing hash.\n             * @ja ハッシュ値が変更され、ルーティングが成功したときにコールされる\n             *\n             * @param name\n             *  - `en` name of route\n             *  - `ja` route 名。page の値が渡る。\n             * @param args\n             *  - `en` array of paramter\n             *  - `ja` パラメータ配列。\n             */\n            Router.onRouteSucceeded = function (name) {\n                var args = [];\n                for (var _i = 1; _i < arguments.length; _i++) {\n                    args[_i - 1] = arguments[_i];\n                }\n                var context = Router.s_rootContexts[name];\n                if (!!context) {\n                    var intent = { params: { queryParams: args } };\n                    Router.s_lastNavigateInfo.inNavigation = true;\n                    if (null != Router.s_lastNavigateInfo.intent) {\n                        intent.params = $.extend({}, intent.params, Router.s_lastNavigateInfo.intent.params || {});\n                    }\n                    Router.s_lastNavigateInfo.intent = $.extend({}, Router.s_lastNavigateInfo.intent, intent);\n                    var handled = context.callback(args);\n                    if (!handled) {\n                        Router.changePage(context.page);\n                    }\n                }\n            };\n            /**\n             * @en It called on failed routing triggered by changing hash.\n             * @ja ハッシュ値が変更され、ルーティングが失敗したときにコールされる\n             *\n             * @param name\n             *  - `en` name of route\n             *  - `ja` route 名。page の値が渡る。\n             * @param args\n             *  - `en` array of paramters\n             *  - `ja` パラメータ配列。\n             */\n            Router.onRouteFailed = function (fragment) {\n                Router.s_lastNavigateInfo.inNavigation = true;\n                if (null == fragment) {\n                    fragment = Backbone.history.getFragment();\n                }\n                // route が解決できなかったものを管理下に\n                if (Router.s_lastNavigateInfo.positiveNavigate) {\n                    var context = Router.s_rootContexts[fragment];\n                    if (null == context) {\n                        context = {\n                            route: fragment,\n                            regexp: Router.s_router._routeToRegExp(fragment),\n                            page: Router.s_lastNavigateInfo.url,\n                            top: false,\n                            callback: null,\n                        };\n                        Router.pushContext(fragment, context);\n                    }\n                }\n                // fragment から path を解決\n                var path = fragment;\n                if (null != Router.s_rootContexts[fragment]) {\n                    path = Router.s_rootContexts[fragment].page;\n                }\n                Router.changePage(path);\n            };\n            /**\n             * @en This function just calls jQuery Mobile's navigation method.\n             * @ja jQuery Mobile によるページ遷移指定\n             *\n             * @param path\n             *  - `en` to page path\n             *  - `ja` 遷移先パスを指定\n             */\n            Router.changePage = function (path) {\n                var notifyBeforeRouteChange;\n                // data-rel=\"back\", ブラウザボタン, H/W Back Key が押下されたとき\n                if (!Router.s_lastNavigateInfo.positiveNavigate) {\n                    if (Router.s_lastNavigateInfo.inAdditionalBack) {\n                        Router.s_lastNavigateInfo.inAdditionalBack = false;\n                    }\n                    else {\n                        Router.decideDirection(path);\n                        // 指定先に戻るか判定\n                        var additional = Router.detectAdditionalBackDistance();\n                        if (0 < additional) {\n                            // 2回目以降の hash change には反応させない.\n                            Router.s_lastNavigateInfo.inAdditionalBack = true;\n                            Router._getJqmHistory().activeIndex -= additional;\n                            history.go(-additional);\n                            return;\n                        }\n                    }\n                    // 遷移先が subflow 開始点である場合、param を削除\n                    var subFlowInfo = Router.detectSubFlowBaseInfo();\n                    if (subFlowInfo.isCurrent) {\n                        delete subFlowInfo.stack[Router.SUBFLOW_PARAM];\n                    }\n                }\n                else {\n                    // 能動的遷移の場合 previousIndex を更新\n                    Router._getJqmHistory().previousIndex = Router._getJqmHistory().activeIndex;\n                }\n                // ページ遷移開始通知. すでにコールされている場合は既定の何もしないコールバックを使用する.\n                notifyBeforeRouteChange = Router.s_lastNavigateInfo.calledBeforeRouteChange ? _defaultBeforeRouteChange : _beforeRouteChange;\n                notifyBeforeRouteChange()\n                    .then(function () {\n                    // 付加情報\n                    if (Router.s_lastNavigateInfo.intent) {\n                        Router._pushIntent(Router.s_lastNavigateInfo.intent);\n                    }\n                    Router.treatUrlHistory();\n                    var pageTransition = (function () {\n                        if (Router.s_lastNavigateInfo.transition) {\n                            return Router.s_lastNavigateInfo.transition;\n                        }\n                        else if (Router.s_firstChangePage) {\n                            Router.s_firstChangePage = false;\n                            return \"none\"; // splash からの遷移\n                        }\n                        else {\n                            return $.mobile.defaultPageTransition;\n                        }\n                    })();\n                    $.mobile.changePage(Framework.toUrl(path), {\n                        showLoadMsg: false,\n                        allowSamePageTransition: true,\n                        transition: pageTransition,\n                        reverse: Router.s_lastNavigateInfo.reverse,\n                        fromHashChange: !Router.s_lastNavigateInfo.positiveNavigate,\n                        changeHash: !Router.s_lastNavigateInfo.noHashChange,\n                    });\n                })\n                    .fail(function () {\n                    console.error(TAG + \"before route change call, failed.\");\n                    Router.s_lastNavigateInfo = {};\n                });\n            };\n            /**\n             * @en Decide direction parameter. <br>\n             *     It's as same as jQM internal implement. (imperfection)\n             *\n             * @ja direction の判定 <br>\n             *     jQM の内部実装と等価 (不完全)\n             *\n             * @param path\n             *  - `en` to page path\n             *  - `ja` 遷移先パスを指定\n             */\n            Router.decideDirection = function (path) {\n                var url = $.mobile.path.convertUrlToDataUrl(Framework.toUrl(path));\n                if (null == Router.s_lastNavigateInfo.transition) {\n                    Router.s_lastNavigateInfo.transition = Router._getJqmHistory().getActive().transition;\n                }\n                Router._getJqmHistory().direct({\n                    url: url,\n                    present: function (newPage, direction) {\n                        switch (direction) {\n                            case \"back\":\n                                if (null == Router.s_lastNavigateInfo.reverse) {\n                                    Router.s_lastNavigateInfo.reverse = true;\n                                }\n                                break;\n                            case \"forward\":\n                                if (null == Router.s_lastNavigateInfo.transition) {\n                                    Router.s_lastNavigateInfo.transition = newPage.transition;\n                                }\n                                break;\n                            default:\n                                console.warn(TAG + \"unknown direction: \" + direction);\n                                break;\n                        }\n                    },\n                    missing: function () {\n                        // 初期ページ URL は判定できない。正常系。\n                        if (1 === Router._getJqmHistory().activeIndex) {\n                            Router._getJqmHistory().previousIndex = 1;\n                            Router._getJqmHistory().activeIndex = 0;\n                            if (null == Router.s_lastNavigateInfo.reverse) {\n                                Router.s_lastNavigateInfo.reverse = true;\n                            }\n                        }\n                        else if (0 !== Router._getJqmHistory().activeIndex) {\n                            console.warn(TAG + \"unknown direction.\");\n                        }\n                    }\n                });\n            };\n            /**\n             * @en Return additional back distance count when back destination set. (const function)\n             * @ja 戻り先が指定されているとき、追加の Back 数を返す。(この関数は Router の状態を変更しない。)\n             *\n             * @returns\n             *  - `en` count of additiona back distance.\n             *  - `ja`追加で Back に必要な距離.\n             */\n            Router.detectAdditionalBackDistance = function () {\n                var stack = Router._getJqmHistory().stack;\n                var historyActiveIndex = Router._getJqmHistory().activeIndex; // decideDirection() の Router._getJqmHistory().direct() によって、history の activeIndex はすでに変わっている\n                var previousIndex = Router._getJqmHistory().previousIndex; // [戻る]が押下された場合に値が入る\n                var i, backDst, distance, fragment, context, jqmDataUrl;\n                // check \"operation\". [戻る]および clearForward() されていない状況をチェック\n                if (!Router.s_lastNavigateInfo.reverse || null == previousIndex || !stack[previousIndex]) {\n                    return 0;\n                }\n                // \"backDst exists\". [戻り先]が指定されているかチェック\n                backDst = stack[previousIndex][Router.BACK_DESTINATION_URL];\n                if ((null == backDst)) {\n                    return 0;\n                }\n                fragment = Backbone.history.getFragment(backDst);\n                // 初期ページ\n                if (\"\" === fragment) {\n                    return historyActiveIndex;\n                }\n                // rootContext から path を逆引き\n                context = _.find(Router.s_rootContexts, function (ctx) {\n                    return ctx.regexp.test(fragment);\n                });\n                if (null == context) {\n                    console.warn(TAG + \"back destination is not registered. back-dst: \" + backDst);\n                    return 0;\n                }\n                // dataUrl を元に jQM History を検索\n                jqmDataUrl = Router.pathToJqmDataUrl(context.page);\n                for (i = historyActiveIndex, distance = 0; 0 <= i; i--, distance++) {\n                    if (jqmDataUrl === stack[i].pageUrl) {\n                        break;\n                    }\n                }\n                if (i < 0) {\n                    console.warn(TAG + \"back destination does not exist in history. back-dst: \" + backDst);\n                    return 0;\n                }\n                return distance;\n            };\n            /**\n             * @en Start sub flow. <br>\n             *     Attach SubFlowParam to jqm history stack object.\n             *\n             * @ja Sub Flow の開始 <br>\n             *     SubFlowParam を jqm history stack にアタッチ\n             *\n             * @param subFlowParam\n             *  - `en` Sub Flow parameter.\n             *  - `ja` Sub Flow パラメータ\n             */\n            Router.startSubFlow = function (subFlowParam) {\n                var active = Router._getJqmHistory().getActive();\n                var param = subFlowParam;\n                if (subFlowParam.destBase) {\n                    var distance = 0;\n                    var fragment_2 = Backbone.history.getFragment(subFlowParam.destBase);\n                    var context = _.find(Router.s_rootContexts, function (ctx) {\n                        return ctx.regexp.test(fragment_2);\n                    });\n                    if (null == context) {\n                        console.warn(TAG + \"base destination is not registered. destBase: \" + subFlowParam.destBase);\n                        return;\n                    }\n                    // dataUrl を元に jQM History を検索\n                    var jqmDataUrl = Router.pathToJqmDataUrl(context.page);\n                    var stack = Router._getJqmHistory().stack;\n                    for (var i = Router._getJqmHistory().activeIndex; 0 <= i; i--, distance++) {\n                        if (jqmDataUrl === stack[i].pageUrl) {\n                            param.additionalDistance = distance;\n                            break;\n                        }\n                    }\n                }\n                else {\n                    param.destBase = location.hash;\n                    param.additionalDistance = 0;\n                }\n                active[Router.SUBFLOW_PARAM] = param;\n            };\n            /**\n             * @en End sub flow <br>\n             *     navigate and delete SubFlowParam from jqm history stack object.\n             *\n             * @ja Sub Flow の終了 <br>\n             *     遷移と SubFlowParam を jqm history stack から削除\n             *\n             * @param navOptions\n             *  - `en` Sub Flow parameter.\n             *  - `ja` Sub Flow パラメータ\n             */\n            Router.finishSubFlow = function (options) {\n                var navOptions = $.extend(true, {}, options);\n                var baseInfo = Router.detectSubFlowBaseInfo();\n                // \"end\" 時に更新されたものを上書き\n                var param = $.extend({}, baseInfo.subFlowParam, navOptions.subFlow);\n                var distance = baseInfo.distance;\n                var stack = baseInfo.stack;\n                var retry = 0;\n                var NAVIGATE_INTERVAL = 100;\n                var MAX_RETRY_COUNT = 10;\n                // hash 変更が完了した後に navigate を実行\n                var _navigate = function () {\n                    if (MAX_RETRY_COUNT <= retry) {\n                        console.error(TAG + \"reached navigate max retry count.\");\n                        Router.s_lastNavigateInfo = {};\n                    }\n                    else if (param.destBase !== location.hash) {\n                        retry++;\n                        setTimeout(_navigate, NAVIGATE_INTERVAL);\n                    }\n                    else {\n                        Router.s_lastNavigateInfo.inNavigation = false;\n                        Router.registerPageStack(param.destStacks, true, navOptions);\n                    }\n                };\n                if (stack) {\n                    delete stack[Router.SUBFLOW_PARAM];\n                    Router._getJqmHistory().activeIndex -= distance;\n                    Router._getJqmHistory().clearForward();\n                    if (param.destStacks) {\n                        Router.stop();\n                        // iOS 環境において index.html より history.go(0) が発生するとリロードが発生する.\n                        // その後画面遷移を控えるため, 履歴を戻る必要があるときにのみ限定する.\n                        if (0 !== distance) {\n                            history.go(-distance);\n                        }\n                        delete navOptions.subFlow; // subFlow プロパティの破棄\n                        setTimeout(_navigate, 0);\n                    }\n                    else {\n                        Router.s_lastNavigateInfo.positiveNavigate = false;\n                        history.go(-distance);\n                    }\n                }\n                else {\n                    console.warn(TAG + \"subFlow begin status does not exist in history.\");\n                    Router.s_lastNavigateInfo = {};\n                }\n            };\n            /**\n             * @en Return destination Sub Flow information. (const function)\n             * @ja Sub Flow 情報を返却 (この関数は Router の状態を変更しない。)\n             *\n             * @returns\n             *  - `en` sub flow info.\n             *  - `ja` Sub Flow 情報.\n             */\n            Router.detectSubFlowBaseInfo = function () {\n                var stack = Router._getJqmHistory().stack;\n                var historyActiveIndex = Router._getJqmHistory().activeIndex;\n                var i, distance;\n                var param = {};\n                var target;\n                for (i = historyActiveIndex, distance = 0; 0 <= i; i--, distance++) {\n                    if (stack[i][Router.SUBFLOW_PARAM]) {\n                        target = stack[i];\n                        param = stack[i][Router.SUBFLOW_PARAM];\n                        break;\n                    }\n                }\n                if (null == param.additionalDistance) {\n                    param.additionalDistance = 0;\n                }\n                return {\n                    stack: target,\n                    subFlowParam: param,\n                    distance: distance + param.additionalDistance,\n                    isCurrent: (function () {\n                        if (target && 0 === distance) {\n                            return true;\n                        }\n                        else {\n                            return false;\n                        }\n                    })(),\n                };\n            };\n            /**\n             * @en Convert path to jQM dataUrl.\n             * @ja パスを jQM dataUrl に変換\n             *\n             * @returns jQM data url.\n             */\n            Router.pathToJqmDataUrl = function (path) {\n                var url = Framework.toUrl(path);\n                var dataUrl = $.mobile.path.convertUrlToDataUrl(url);\n                return dataUrl;\n            };\n            /**\n             * @en Update jQM urlHistory by window.history object. <br>\n             *     To be natural browsing history behavior, application needs to update jQM urlHistory <br>\n             *     when clicking back or next button of browser. (imperfection for decideDirection())\n             *\n             * @ja ブラウザの履歴に基づき jQM urlHistory を更新 <br>\n             *     [戻る]/[進む]が押下された後、ページ遷移されるとき、jQM urlHistory を更新する。(decideDirection() により不完全)\n             */\n            Router.treatUrlHistory = function () {\n                if (Router.s_lastNavigateInfo.positiveNavigate || history.length < Router._getJqmHistory().stack.length) {\n                    Router._getJqmHistory().clearForward();\n                }\n            };\n            Router.s_initOptions = {};\n            Router.s_router = null;\n            Router.s_rootContexts = {};\n            Router.s_lastNavigateInfo = {};\n            Router.s_lastClickedTime = null;\n            Router.s_lastIntent = {};\n            Router.s_firstChangePage = true;\n            Router.s_loadUrl = null;\n            Router.s_back = null;\n            Router.DELAY_TIME = 200; // TBD: 暫定値\n            Router.DATA_BACK_DESTINATION = \"data-back-dst\";\n            Router.DATA_NO_HASH_CHANGE = \"data-no-hash-change\";\n            Router.DATA_NO_VCLICK_HANDLE = \"data-no-vclick-handle\";\n            Router.BACK_DESTINATION_URL = \"backDstUrl\";\n            Router.SUBFLOW_PARAM = \"subFlowParam\";\n            Router.s_defaultInitOptions = {\n                anchorVclick: true,\n                firstPageTransition: false,\n            };\n            Router.s_defaultNavigateOptions = {\n                trigger: true,\n                replace: false,\n                intent: null,\n            };\n            return Router;\n        }());\n        Framework.Router = Router;\n    })(Framework = CDP.Framework || (CDP.Framework = {}));\n})(CDP || (CDP = {}));\nvar CDP;\n(function (CDP) {\n    var Framework;\n    (function (Framework) {\n        var Promise = CDP.Promise;\n        var TAG = \"[CDP.Framework.Page] \";\n        /**\n         * @en Base class of all page unit.\n         * @ja すべてのページの基本となる既定クラス\n         */\n        var Page = /** @class */ (function () {\n            //////////////////////////////////////////\n            // public methods\n            /**\n             * @param _url\n             *  - `en` page's URL\n             *  - `ja` ページ URL\n             * @param _id\n             *  - `en` page's ID\n             *  - `ja` ページ ID\n             * @param options\n             *  - `en` construction options\n             *  - `ja` 構築オプション\n             */\n            function Page(_url, _id, options) {\n                this._url = _url;\n                this._id = _id;\n                this.setup(options);\n            }\n            Object.defineProperty(Page.prototype, \"active\", {\n                //////////////////////////////////////////\n                // public accessor\n                get: function () { return !!this._$page && this._$page.hasClass(\"ui-page-active\"); },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(Page.prototype, \"url\", {\n                get: function () { return this._url; },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(Page.prototype, \"id\", {\n                get: function () { return this._id; },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(Page.prototype, \"$page\", {\n                get: function () { return this._$page; },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(Page.prototype, \"$header\", {\n                get: function () { return this._$header; },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(Page.prototype, \"$footer\", {\n                get: function () { return this._$footer; },\n                enumerable: true,\n                configurable: true\n            });\n            Object.defineProperty(Page.prototype, \"intent\", {\n                get: function () { return this._intent; },\n                set: function (newIntent) { this._intent = newIntent; this._intent._update = true; },\n                enumerable: true,\n                configurable: true\n            });\n            //////////////////////////////////////////\n            // Implemtents: IPage\n            // Orientation の変更を受信\n            Page.prototype.onOrientationChanged = function (newOrientation) {\n                if (this._owner) {\n                    this._owner.onOrientationChanged(newOrientation);\n                }\n            };\n            // H/W Back Button ハンドラ\n            Page.prototype.onHardwareBackButton = function (event) {\n                if (this._owner) {\n                    return this._owner.onHardwareBackButton(event);\n                }\n                else {\n                    return false;\n                }\n            };\n            // Router \"before route change\" ハンドラ\n            Page.prototype.onBeforeRouteChange = function () {\n                if (this._owner) {\n                    return this._owner.onBeforeRouteChange();\n                }\n                else {\n                    return Promise.resolve();\n                }\n            };\n            // 汎用コマンドを受信\n            Page.prototype.onCommand = function (event, kind) {\n                if (this._owner) {\n                    return this._owner.onCommand(event, kind);\n                }\n                else {\n                    return false;\n                }\n            };\n            // 最初の OnPageInit() のときにのみコールされる\n            Page.prototype.onInitialize = function (event) {\n                if (this._owner) {\n                    this._owner.onInitialize(event);\n                }\n            };\n            // jQM event: \"pagebeforecreate\" に対応\n            Page.prototype.onPageBeforeCreate = function (event) {\n                if (this._owner) {\n                    this._owner.onPageBeforeCreate(event);\n                }\n            };\n            // jQM event: \"pagecreate\" (旧:\"pageinit\") に対応\n            Page.prototype.onPageInit = function (event) {\n                if (this._owner) {\n                    this._owner.onPageInit(event);\n                }\n            };\n            // jQM event: \"pagebeforeshow\" に対応\n            Page.prototype.onPageBeforeShow = function (event, data) {\n                if (this._owner) {\n                    this._owner.onPageBeforeShow(event, data);\n                }\n            };\n            // jQM event: \"pagecontainershow\" (旧:\"pageshow\") に対応\n            Page.prototype.onPageShow = function (event, data) {\n                if (this._owner) {\n                    this._owner.onPageShow(event, data);\n                }\n            };\n            // jQM event: \"pagebeforehide\" に対応\n            Page.prototype.onPageBeforeHide = function (event, data) {\n                if (this._owner) {\n                    this._owner.onPageBeforeHide(event, data);\n                }\n            };\n            // jQM event: \"pagecontainerhide\" (旧:\"pagehide\") に対応\n            Page.prototype.onPageHide = function (event, data) {\n                if (this._owner) {\n                    this._owner.onPageHide(event, data);\n                }\n            };\n            // jQM event: \"pageremove\" に対応\n            Page.prototype.onPageRemove = function (event) {\n                if (this._owner) {\n                    this._owner.onPageRemove(event);\n                }\n            };\n            //////////////////////////////////////////\n            // private methods\n            // mixin 用疑似コンストラクタ\n            Page.prototype.setup = function (options) {\n                var _this = this;\n                // mixin destination 用の再初期化\n                this._initialized = false;\n                this._intent = null;\n                // イベントバインド\n                var selector = \"#\" + this._id;\n                $(document)\n                    .off(\"pagebeforecreate\", selector)\n                    .on(\"pagebeforecreate\", selector, function (event) {\n                    _this._$page = $(selector).first();\n                    _this._$header = _this._$page.children(\":jqmData(role=header)\").first();\n                    _this._$footer = _this._$page.children(\":jqmData(role=footer)\").first();\n                    _this._$page\n                        .on(\"pagecreate\", function (ev) {\n                        _this.pageInit(ev);\n                    })\n                        .on(\"pagebeforeshow\", function (ev, data) {\n                        _this.pageBeforeShow(ev, data);\n                    })\n                        .on(\"pageshow\", function (ev, data) {\n                        _this.pageShow(ev, data);\n                    })\n                        .on(\"pagebeforehide\", function (ev, data) {\n                        _this.pageBeforeHide(ev, data);\n                    })\n                        .on(\"pagehide\", function (ev, data) {\n                        _this.pageHide(ev, data);\n                    })\n                        .on(\"pageremove\", function (ev) {\n                        _this.pageRemove(ev);\n                    });\n                    _this.pageBeforeCreate(event);\n                });\n                options = options || {};\n                // owner 設定\n                this._owner = options.owner;\n                // intent 設定\n                this._keepIntent = options.keepIntent;\n                // Router へ登録\n                if (null == options.route) {\n                    options.route = this._id;\n                }\n                Framework.Router.register(options.route, this._url, options.top, options.callback);\n            };\n            // PageTransitionDirection の判定\n            Page.prototype.getDirection = function () {\n                var activeIndex = Framework.Router._getJqmHistory().activeIndex;\n                var prevIndex = Framework.Router._getJqmHistory().previousIndex;\n                if (null == activeIndex || null == prevIndex) {\n                    return \"unknown\";\n                }\n                else if (prevIndex === activeIndex) {\n                    return \"same\";\n                }\n                else if (activeIndex < prevIndex) {\n                    return \"back\";\n                }\n                else {\n                    return \"forward\";\n                }\n            };\n            Page.prototype.pageBeforeCreate = function (event) {\n                this.onPageBeforeCreate(event);\n            };\n            Page.prototype.pageInit = function (event) {\n                if (!this._initialized) {\n                    this.onInitialize(event);\n                    this._initialized = true;\n                }\n                this.onPageInit(event);\n            };\n            Page.prototype.pageBeforeShow = function (event, data) {\n                Framework._setActivePage(this);\n                this._intent = Framework.Router._popIntent();\n                this.onPageBeforeShow(event, $.extend(data, { direction: this.getDirection() }));\n            };\n            Page.prototype.pageShow = function (event, data) {\n                this.onPageShow(event, $.extend(data, { direction: this.getDirection() }));\n            };\n            Page.prototype.pageBeforeHide = function (event, data) {\n                this.onPageBeforeHide(event, $.extend(data, { direction: this.getDirection() }));\n                if (null != this._intent && (this._keepIntent || this._intent._update)) {\n                    delete this._intent._update;\n                    Framework.Router._pushIntent(this._intent);\n                }\n                else if (Framework.Router.fromHashChanged() && Framework.Router.isInSubFlow()) {\n                    Framework.Router._pushIntent(this._intent);\n                }\n                this._intent = null;\n                Framework._setActivePage(null);\n            };\n            Page.prototype.pageHide = function (event, data) {\n                this.onPageHide(event, $.extend(data, { direction: this.getDirection() }));\n            };\n            Page.prototype.pageRemove = function (event) {\n                this.onPageRemove(event);\n                this._$page.off();\n                this._$page = null;\n                this._$header.off();\n                this._$header = null;\n                this._$footer.off();\n                this._$footer = null;\n            };\n            return Page;\n        }());\n        Framework.Page = Page;\n        ///////////////////////////////////////////////////////////////////////\n        // closure methods\n        /*\n         * jQM1.4 にて、duplicate とされている \"pageshow\", \"pagehide\" はまだ据え置き。\n         * http://jquerymobile.com/upgrade-guide/1.4/#navigation\n         *\n         * 特定ページに対して、イベントを取得できないため。\n         * Forum でも議論中なので、決着がついてから対応を考慮する。\n         * https://github.com/jquery/jquery-mobile/issues/6865\n         *\n         * [参考] よくわかるイベントチートシート\n         *  - 本家(1.4+) http://jqmtricks.wordpress.com/2014/03/26/jquery-mobile-page-events/\n         *  - 有志(~1.3) http://dev.screw-axis.com/doc/jquery_mobile/resources/cheatsheet/\n         *\n         * 以下は不完全な対応予定コード\n         *\n         * 特に振る舞いが変わるのは、\"pagehide\" で、検討されている仕様では\n         * DOM を特定できないため、onPageHide() をインスタンスに伝えることができない。\n         *\n         * 仕様が変わらない場合は\n         * onPageBeforeHide() の中で post して onPageHide() を発行する予定(過去互換保証)\n         *\n         * 2015/03/25 追記:\n         * 仕様は確定. jQM1.6 より削除される予定\n         *  jQM1.4 相当の参考実装 plugin があり、この実装相当の機能を cdp.framework.jqm で抱える予定\n         *  https://github.com/arschmitz/jquery-mobile-onpage\n         *\n         * 公式見解\n         * https://github.com/jquery/jquery-mobile/issues/7283#issuecomment-40746622\n         */\n        /*\n            // bind \"pagecontainershow\", and \"pagecontainerhide\".\n            (() => {\n                let $body: any = $(\"body\");\n                $(document)\n                    .on(\"pagecontainershow\", (event: JQuery.Event, data: ShowEventData) => {\n                        if (0 < data.prevPage.length) {\n                            // \"pagecontainershow\" は \"pagecontainerhide\" よりも遅いので、やはり DOM にはアクセスできない\n                            let $prevpage = $(\"#\" + data.prevPage[0].id);\n                            $prevpage.trigger(\"_pagehide\", data);\n                        }\n                        // 以下の対応で、\"pagecontainershow\" は \"pageshow\" 同等の振る舞いにすることが可能\n                        let pageId = $body.pagecontainer(\"getActivePage\").prop(\"id\");\n                        let $page = $(\"#\" + pageId);\n                        $page.trigger(\"_pageshow\", data);\n                    })\n                    .on(\"pagecontainerhide\", (event: JQuery.Event, data: HideEventData) => {\n                        // \"pagecontainerhide\" を受けたときは既に DOM から消えているため、page は特定できない。\n                        //let pageId = $body.pagecontainer('getActivePage').prop(\"id\");\n                        //let $page = $(\"#\" + pageId);\n                        //$page.trigger(\"_pagehide\", data);\n                    })\n                    .on(\"pagecontainertransition\", (event: JQuery.Event, data: any) => {\n                        // \"pagecontainertransition\" には toPage にしかアクセスはできない\n                    })\n                ;\n            })();\n        */\n    })(Framework = CDP.Framework || (CDP.Framework = {}));\n})(CDP || (CDP = {}));\n\nreturn CDP.Framework; }));\n\n}.call(window));\n\n/***/ }),\n\n/***/ \"./external/jquery/scripts/jquery-migrate.js\":\n/*!***************************************************!*\\\n  !*** ./external/jquery/scripts/jquery-migrate.js ***!\n  \\***************************************************/\n/*! no static exports found */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/*** IMPORTS FROM imports-loader ***/\n(function() {\n\n/*!\n * jQuery Migrate - v3.0.1-hotfix - 2017-01-11\n * Copyright jQuery Foundation and other contributors\n */\n; (function (factory) {\n    if (true) {\n        // AMD. Register as an anonymous module.\n        !(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(/*! jquery */ \"jquery\")], __WEBPACK_AMD_DEFINE_RESULT__ = (function ($) {\n            return factory($, window);\n        }).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),\n                __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n    } else {}\n})(function (jQuery, window) {\n    \"use strict\";\n\n    jQuery.migrateVersion = \"3.0.1-hotfix\"; // with hotfix\n\n    /* exported migrateWarn, migrateWarnFunc, migrateWarnProp */\n\n    (function () {\n\n        // Support: IE9 only\n        // IE9 only creates console object when dev tools are first opened\n        // Also, avoid Function#bind here to simplify PhantomJS usage\n        var log = window.console && window.console.log &&\n            function () {\n                window.console.log.apply(window.console, arguments);\n            },\n            rbadVersions = /^[12]\\./;\n\n        if (!log) {\n            return;\n        }\n\n        // Need jQuery 3.0.0+ and no older Migrate loaded\n        if (!jQuery || rbadVersions.test(jQuery.fn.jquery)) {\n            log(\"JQMIGRATE: jQuery 3.0.0+ REQUIRED\");\n        }\n        if (jQuery.migrateWarnings) {\n            log(\"JQMIGRATE: Migrate plugin loaded multiple times\");\n        }\n\n        // Show a message on the console so devs know we're active\n        if (!jQuery.migrateMute) {\n            log(\"JQMIGRATE: Migrate is installed\" +\n                (jQuery.migrateMute ? \"\" : \" with logging active\") +\n                \", version \" + jQuery.migrateVersion);\n        }\n    })();\n\n    var warnedAbout = {};\n\n    // List of warnings already given; public read only\n    jQuery.migrateWarnings = [];\n\n    // Set to false to disable traces that appear with warnings\n    if (jQuery.migrateTrace === undefined) {\n        jQuery.migrateTrace = true;\n    }\n\n    // Forget any warnings we've already given; public\n    jQuery.migrateReset = function () {\n        warnedAbout = {};\n        jQuery.migrateWarnings.length = 0;\n    };\n\n    function migrateWarn(msg) {\n        var console = window.console;\n        if (!warnedAbout[msg]) {\n            warnedAbout[msg] = true;\n            jQuery.migrateWarnings.push(msg);\n            if (console && console.warn && !jQuery.migrateMute) {\n                console.warn(\"JQMIGRATE: \" + msg);\n                if (jQuery.migrateTrace && console.trace) {\n                    console.trace();\n                }\n            }\n        }\n    }\n\n    function migrateWarnProp(obj, prop, value, msg) {\n        Object.defineProperty(obj, prop, {\n            configurable: true,\n            enumerable: true,\n            get: function () {\n                migrateWarn(msg);\n                return value;\n            },\n            set: function (newValue) {\n                migrateWarn(msg);\n                value = newValue;\n            }\n        });\n    }\n\n    function migrateWarnFunc(obj, prop, newFunc, msg) {\n        obj[prop] = function () {\n            migrateWarn(msg);\n            return newFunc.apply(this, arguments);\n        };\n    }\n\n    if (window.document.compatMode === \"BackCompat\") {\n        // JQuery has never supported or tested Quirks Mode\n        migrateWarn(\"jQuery is not compatible with Quirks Mode\");\n    }\n\n\n    var oldInit = jQuery.fn.init,\n        oldIsNumeric = jQuery.isNumeric,\n        oldFind = jQuery.find,\n        rattrHashTest = /\\[(\\s*[-\\w]+\\s*)([~|^$*]?=)\\s*([-\\w#]*?#[-\\w#]*)\\s*\\]/,\n        rattrHashGlob = /\\[(\\s*[-\\w]+\\s*)([~|^$*]?=)\\s*([-\\w#]*?#[-\\w#]*)\\s*\\]/g;\n\n    jQuery.fn.init = function (arg1) {\n        var args = Array.prototype.slice.call(arguments);\n\n        if (typeof arg1 === \"string\" && arg1 === \"#\") {\n            // JQuery( \"#\" ) is a bogus ID selector, but it returned an empty set before jQuery 3.0\n            migrateWarn(\"jQuery( '#' ) is not a valid selector\");\n            args[0] = [];\n        }\n\n        return oldInit.apply(this, args);\n    };\n    jQuery.fn.init.prototype = jQuery.fn;\n\n    jQuery.find = function (selector) {\n        var args = Array.prototype.slice.call(arguments);\n\n        // Support: PhantomJS 1.x\n        // String#match fails to match when used with a //g RegExp, only on some strings\n        if (typeof selector === \"string\" && rattrHashTest.test(selector)) {\n            // The nonstandard and undocumented unquoted-hash was removed in jQuery 1.12.0\n            // First see if qS thinks it's a valid selector, if so avoid a false positive\n            try {\n                window.document.querySelector(selector);\n            } catch (err1) {\n                // Didn't *look* valid to qSA, warn and try quoting what we think is the value\n                selector = selector.replace(rattrHashGlob, function (_, attr, op, value) {\n                    return \"[\" + attr + op + \"\\\"\" + value + \"\\\"]\";\n                });\n\n                // If the regexp *may* have created an invalid selector, don't update it\n                // Note that there may be false alarms if selector uses jQuery extensions\n                try {\n                    window.document.querySelector(selector);\n                    migrateWarn(\"Attribute selector with '#' must be quoted: \" + args[0]);\n                    args[0] = selector;\n                } catch (err2) {\n                    migrateWarn(\"Attribute selector with '#' was not fixed: \" + args[0]);\n                }\n            }\n        }\n\n        return oldFind.apply(this, args);\n    };\n\n    // Copy properties attached to original jQuery.find method (e.g. .attr, .isXML)\n    var findProp;\n    for (findProp in oldFind) {\n        if (Object.prototype.hasOwnProperty.call(oldFind, findProp)) {\n            jQuery.find[findProp] = oldFind[findProp];\n        }\n    }\n\n    // The number of elements contained in the matched element set\n    jQuery.fn.size = function () {\n        migrateWarn(\"jQuery.fn.size() is deprecated and removed; use the .length property\");\n        return this.length;\n    };\n\n    jQuery.parseJSON = function () {\n        migrateWarn(\"jQuery.parseJSON is deprecated; use JSON.parse\");\n        return JSON.parse.apply(null, arguments);\n    };\n\n    jQuery.isNumeric = function (val) {\n        // The jQuery 2.2.3 implementation of isNumeric\n        function isNumeric2(obj) {\n            var realStringObj = obj && obj.toString();\n            return !jQuery.isArray(obj) && (realStringObj - parseFloat(realStringObj) + 1) >= 0;\n        }\n\n        var newValue = oldIsNumeric(val),\n            oldValue = isNumeric2(val);\n\n        if (newValue !== oldValue) {\n            migrateWarn(\"jQuery.isNumeric() should not be called on constructed objects\");\n        }\n\n        return oldValue;\n    };\n\n    migrateWarnFunc(jQuery, \"unique\", jQuery.uniqueSort,\n        \"jQuery.unique is deprecated; use jQuery.uniqueSort\");\n\n    // Now jQuery.expr.pseudos is the standard incantation\n    migrateWarnProp(jQuery.expr, \"filters\", jQuery.expr.pseudos,\n        \"jQuery.expr.filters is deprecated; use jQuery.expr.pseudos\");\n    migrateWarnProp(jQuery.expr, \":\", jQuery.expr.pseudos,\n        \"jQuery.expr[':'] is deprecated; use jQuery.expr.pseudos\");\n\n\n    var oldAjax = jQuery.ajax;\n\n    jQuery.ajax = function () {\n        var jQXHR = oldAjax.apply(this, arguments);\n\n        // Be sure we got a jQXHR (e.g., not sync)\n        if (jQXHR.promise) {\n            migrateWarnFunc(jQXHR, \"success\", jQXHR.done,\n                \"jQXHR.success is deprecated and removed\");\n            migrateWarnFunc(jQXHR, \"error\", jQXHR.fail,\n                \"jQXHR.error is deprecated and removed\");\n            migrateWarnFunc(jQXHR, \"complete\", jQXHR.always,\n                \"jQXHR.complete is deprecated and removed\");\n        }\n\n        return jQXHR;\n    };\n\n\n    var oldRemoveAttr = jQuery.fn.removeAttr,\n        oldToggleClass = jQuery.fn.toggleClass,\n        rmatchNonSpace = /\\S+/g;\n\n    jQuery.fn.removeAttr = function (name) {\n        var self = this;\n\n        jQuery.each(name.match(rmatchNonSpace), function (i, attr) {\n            if (jQuery.expr.match.bool.test(attr)) {\n                migrateWarn(\"jQuery.fn.removeAttr no longer sets boolean properties: \" + attr);\n                self.prop(attr, false);\n            }\n        });\n\n        return oldRemoveAttr.apply(this, arguments);\n    };\n\n    jQuery.fn.toggleClass = function (state) {\n        // Only deprecating no-args or single boolean arg\n        if (state !== undefined && typeof state !== \"boolean\") {\n            return oldToggleClass.apply(this, arguments);\n        }\n\n        migrateWarn(\"jQuery.fn.toggleClass( boolean ) is deprecated\");\n\n        // Toggle entire class name of each element\n        return this.each(function () {\n            var className = this.getAttribute && this.getAttribute(\"class\") || \"\";\n\n            if (className) {\n                jQuery.data(this, \"__className__\", className);\n            }\n\n            // If the element has a class name or if we're passed `false`,\n            // then remove the whole classname (if there was one, the above saved it).\n            // Otherwise bring back whatever was previously saved (if anything),\n            // falling back to the empty string if nothing was stored.\n            if (this.setAttribute) {\n                this.setAttribute(\"class\",\n                    className || state === false ?\n                    \"\" :\n                    jQuery.data(this, \"__className__\") || \"\"\n                );\n            }\n        });\n    };\n\n\n    var internalSwapCall = false;\n\n    // If this version of jQuery has .swap(), don't false-alarm on internal uses\n    if (jQuery.swap) {\n        jQuery.each([\"height\", \"width\", \"reliableMarginRight\"], function (_, name) {\n            var oldHook = jQuery.cssHooks[name] && jQuery.cssHooks[name].get;\n\n            if (oldHook) {\n                jQuery.cssHooks[name].get = function () {\n                    var ret;\n\n                    internalSwapCall = true;\n                    ret = oldHook.apply(this, arguments);\n                    internalSwapCall = false;\n                    return ret;\n                };\n            }\n        });\n    }\n\n    jQuery.swap = function (elem, options, callback, args) {\n        var ret, name,\n            old = {};\n\n        if (!internalSwapCall) {\n            migrateWarn(\"jQuery.swap() is undocumented and deprecated\");\n        }\n\n        // Remember the old values, and insert the new ones\n        for (name in options) {\n            old[name] = elem.style[name];\n            elem.style[name] = options[name];\n        }\n\n        ret = callback.apply(elem, args || []);\n\n        // Revert the old values\n        for (name in options) {\n            elem.style[name] = old[name];\n        }\n\n        return ret;\n    };\n\n    var oldData = jQuery.data;\n\n    jQuery.data = function (elem, name, value) {\n        var curData;\n\n        // Name can be an object, and each entry in the object is meant to be set as data\n        if (name && typeof name === \"object\" && arguments.length === 2) {\n            curData = jQuery.hasData(elem) && oldData.call(this, elem);\n            var sameKeys = {};\n            for (var key in name) {\n                if (key !== jQuery.camelCase(key)) {\n                    migrateWarn(\"jQuery.data() always sets/gets camelCased names: \" + key);\n                    curData[key] = name[key];\n                } else {\n                    sameKeys[key] = name[key];\n                }\n            }\n\n            oldData.call(this, elem, sameKeys);\n\n            return name;\n        }\n\n        // If the name is transformed, look for the un-transformed name in the data object\n        if (name && typeof name === \"string\" && name !== jQuery.camelCase(name)) {\n            curData = jQuery.hasData(elem) && oldData.call(this, elem);\n            if (curData && name in curData) {\n                migrateWarn(\"jQuery.data() always sets/gets camelCased names: \" + name);\n                if (arguments.length > 2) {\n                    curData[name] = value;\n                }\n                return curData[name];\n            }\n        }\n\n        return oldData.apply(this, arguments);\n    };\n\n    var oldTweenRun = jQuery.Tween.prototype.run;\n\n    jQuery.Tween.prototype.run = function () {\n        if (jQuery.easing[this.easing].length > 1) {\n            migrateWarn(\n                \"easing function \" +\n                \"\\\"jQuery.easing.\" + this.easing.toString() +\n                \"\\\" should use only first argument\"\n            );\n\n            var oldEasing = jQuery.easing[this.easing];\n            jQuery.easing[this.easing] = function (percent) {\n                return oldEasing.call(jQuery.easing, percent, percent, 0, 1, 1);\n            }.bind(this);\n        }\n\n        oldTweenRun.apply(this, arguments);\n    };\n\n    jQuery.fx.interval = jQuery.fx.interval || 13;\n\n    // Support: IE9, Android <=4.4\n    // Avoid false positives on browsers that lack rAF\n    if (window.requestAnimationFrame) {\n        migrateWarnProp(jQuery.fx, \"interval\", jQuery.fx.interval,\n            \"jQuery.fx.interval is deprecated\");\n    }\n\n    var oldLoad = jQuery.fn.load,\n        oldEventAdd = jQuery.event.add,\n        originalFix = jQuery.event.fix;\n\n    jQuery.event.props = [];\n    jQuery.event.fixHooks = {};\n\n    migrateWarnProp(jQuery.event.props, \"concat\", jQuery.event.props.concat,\n        \"jQuery.event.props.concat() is deprecated and removed\");\n\n    jQuery.event.fix = function (originalEvent) {\n        var event,\n            type = originalEvent.type,\n            fixHook = this.fixHooks[type],\n            props = jQuery.event.props;\n\n        if (props.length) {\n            migrateWarn(\"jQuery.event.props are deprecated and removed: \" + props.join());\n            while (props.length) {\n                jQuery.event.addProp(props.pop());\n            }\n        }\n\n        if (fixHook && !fixHook._migrated_) {\n            fixHook._migrated_ = true;\n            migrateWarn(\"jQuery.event.fixHooks are deprecated and removed: \" + type);\n            if ((props = fixHook.props) && props.length) {\n                while (props.length) {\n                    jQuery.event.addProp(props.pop());\n                }\n            }\n        }\n\n        event = originalFix.call(this, originalEvent);\n\n        return fixHook && fixHook.filter ? fixHook.filter(event, originalEvent) : event;\n    };\n\n    jQuery.event.add = function (elem, types) {\n        // This misses the multiple-types case but that seems awfully rare\n        if (elem === window && types === \"load\" && window.document.readyState === \"complete\") {\n            migrateWarn(\"jQuery(window).on('load'...) called after load event occurred\");\n        }\n        return oldEventAdd.apply(this, arguments);\n    };\n\n    jQuery.each([\"load\", \"unload\", \"error\"], function (_, name) {\n\n        jQuery.fn[name] = function () {\n            var args = Array.prototype.slice.call(arguments, 0);\n\n            // If this is an ajax load() the first arg should be the string URL;\n            // technically this could also be the \"Anything\" arg of the event .load()\n            // which just goes to show why this dumb signature has been deprecated!\n            // jQuery custom builds that exclude the Ajax module justifiably die here.\n            if (name === \"load\" && typeof args[0] === \"string\") {\n                return oldLoad.apply(this, args);\n            }\n\n            migrateWarn(\"jQuery.fn.\" + name + \"() is deprecated\");\n\n            args.splice(0, 0, name);\n            if (arguments.length) {\n                return this.on.apply(this, args);\n            }\n\n            // Use .triggerHandler here because:\n            // - load and unload events don't need to bubble, only applied to window or image\n            // - error event should not bubble to window, although it does pre-1.7\n            // See http://bugs.jquery.com/ticket/11820\n            this.triggerHandler.apply(this, args);\n            return this;\n        };\n\n    });\n\n    // Trigger \"ready\" event only once, on document ready\n    jQuery(function () {\n        jQuery(window.document).triggerHandler(\"ready\");\n    });\n\n    jQuery.event.special.ready = {\n        setup: function () {\n            if (this === window.document) {\n                migrateWarn(\"'ready' event is deprecated\");\n            }\n        }\n    };\n\n    jQuery.fn.extend({\n        bind: function (types, data, fn) {\n            migrateWarn(\"jQuery.fn.bind() is deprecated\");\n            return this.on(types, null, data, fn);\n        },\n        unbind: function (types, fn) {\n            migrateWarn(\"jQuery.fn.unbind() is deprecated\");\n            return this.off(types, null, fn);\n        },\n        delegate: function (selector, types, data, fn) {\n            migrateWarn(\"jQuery.fn.delegate() is deprecated\");\n            return this.on(types, selector, data, fn);\n        },\n        undelegate: function (selector, types, fn) {\n            migrateWarn(\"jQuery.fn.undelegate() is deprecated\");\n            return arguments.length === 1 ?\n                this.off(selector, \"**\") :\n                this.off(types, selector || \"**\", fn);\n        }\n    });\n\n\n    var oldOffset = jQuery.fn.offset;\n\n    jQuery.fn.offset = function () {\n        var docElem,\n            elem = this[0],\n            origin = { top: 0, left: 0 };\n\n        if (!elem || !elem.nodeType) {\n            migrateWarn(\"jQuery.fn.offset() requires a valid DOM element\");\n            return origin;\n        }\n\n        docElem = (elem.ownerDocument || window.document).documentElement;\n        if (!jQuery.contains(docElem, elem)) {\n            migrateWarn(\"jQuery.fn.offset() requires an element connected to a document\");\n            return origin;\n        }\n\n        return oldOffset.apply(this, arguments);\n    };\n\n\n    var oldParam = jQuery.param;\n\n    jQuery.param = function (data, traditional) {\n        var ajaxTraditional = jQuery.ajaxSettings && jQuery.ajaxSettings.traditional;\n\n        if (traditional === undefined && ajaxTraditional) {\n            migrateWarn(\"jQuery.param() no longer uses jQuery.ajaxSettings.traditional\");\n            traditional = ajaxTraditional;\n        }\n\n        return oldParam.call(this, data, traditional);\n    };\n\n    var oldSelf = jQuery.fn.andSelf || jQuery.fn.addBack;\n\n    jQuery.fn.andSelf = function () {\n        migrateWarn(\"jQuery.fn.andSelf() is deprecated and removed, use jQuery.fn.addBack()\");\n        return oldSelf.apply(this, arguments);\n    };\n\n\n    var oldDeferred = jQuery.Deferred,\n        tuples = [\n            // Action, add listener, callbacks, .then handlers, final state\n            [\"resolve\", \"done\", jQuery.Callbacks(\"once memory\"),\n                jQuery.Callbacks(\"once memory\"), \"resolved\"],\n            [\"reject\", \"fail\", jQuery.Callbacks(\"once memory\"),\n                jQuery.Callbacks(\"once memory\"), \"rejected\"],\n            [\"notify\", \"progress\", jQuery.Callbacks(\"memory\"),\n                jQuery.Callbacks(\"memory\")]\n        ];\n\n    jQuery.Deferred = function (func) {\n        var deferred = oldDeferred(),\n            promise = deferred.promise();\n\n        deferred.pipe = promise.pipe = function ( /* fnDone, fnFail, fnProgress */) {\n            var fns = arguments;\n\n            migrateWarn(\"deferred.pipe() is deprecated\");\n\n            return jQuery.Deferred(function (newDefer) {\n                jQuery.each(tuples, function (i, tuple) {\n                    var fn = jQuery.isFunction(fns[i]) && fns[i];\n\n                    // Deferred.done(function() { bind to newDefer or newDefer.resolve })\n                    // deferred.fail(function() { bind to newDefer or newDefer.reject })\n                    // deferred.progress(function() { bind to newDefer or newDefer.notify })\n                    deferred[tuple[1]](function () {\n                        var returned = fn && fn.apply(this, arguments);\n                        if (returned && jQuery.isFunction(returned.promise)) {\n                            returned.promise()\n                                .done(newDefer.resolve)\n                                .fail(newDefer.reject)\n                                .progress(newDefer.notify);\n                        } else {\n                            newDefer[tuple[0] + \"With\"](\n                                this === promise ? newDefer.promise() : this,\n                                fn ? [returned] : arguments\n                            );\n                        }\n                    });\n                });\n                fns = null;\n            }).promise();\n\n        };\n\n        if (func) {\n            func.call(deferred, deferred);\n        }\n\n        return deferred;\n    };\n\n\n    return jQuery;\n});\n\n}.call(window));\n\n/***/ }),\n\n/***/ \"./external/jquery/scripts/jquery.mobile.js\":\n/*!**************************************************!*\\\n  !*** ./external/jquery/scripts/jquery.mobile.js ***!\n  \\**************************************************/\n/*! no static exports found */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/*** IMPORTS FROM imports-loader ***/\n(function() {\n\n/*!\n* jQuery Mobile 1.4.5\n* Git HEAD hash: 68e55e78b292634d3991c795f06f5e37a512decc <> Date: Fri Oct 31 2014 17:33:30 UTC\n* http://jquerymobile.com\n*\n* Copyright 2010, 2014 jQuery Foundation, Inc. and othercontributors\n* Released under the MIT license.\n* http://jquery.org/license\n*\n*/\n\n\n(function ( root, doc, factory ) {\n    if ( true ) {\n        // AMD. Register as an anonymous module.\n        !(__WEBPACK_AMD_DEFINE_ARRAY__ = [ __webpack_require__(/*! jquery */ \"jquery\") ], __WEBPACK_AMD_DEFINE_RESULT__ = (function ( $ ) {\n            factory( $, root, doc );\n            return $.mobile;\n        }).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),\n                __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n    } else {}\n}( this, document, function ( jQuery, window, document, undefined ) {\n(function( $ ) {\n    $.mobile = {};\n}( jQuery ));\n\n/*!\n * jQuery UI Core c0ab71056b936627e8a7821f03c044aec6280a40\n * http://jqueryui.com\n *\n * Copyright 2013 jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/category/ui-core/\n */\n(function( $, undefined ) {\n\nvar uuid = 0,\n    runiqueId = /^ui-id-\\d+$/;\n\n// $.ui might exist from components with no dependencies, e.g., $.ui.position\n$.ui = $.ui || {};\n\n$.extend( $.ui, {\n    version: \"c0ab71056b936627e8a7821f03c044aec6280a40\",\n\n    keyCode: {\n        BACKSPACE: 8,\n        COMMA: 188,\n        DELETE: 46,\n        DOWN: 40,\n        END: 35,\n        ENTER: 13,\n        ESCAPE: 27,\n        HOME: 36,\n        LEFT: 37,\n        PAGE_DOWN: 34,\n        PAGE_UP: 33,\n        PERIOD: 190,\n        RIGHT: 39,\n        SPACE: 32,\n        TAB: 9,\n        UP: 38\n    }\n});\n\n// plugins\n$.fn.extend({\n    focus: (function( orig ) {\n        return function( delay, fn ) {\n            return typeof delay === \"number\" ?\n                this.each(function() {\n                    var elem = this;\n                    setTimeout(function() {\n                        $( elem ).focus();\n                        if ( fn ) {\n                            fn.call( elem );\n                        }\n                    }, delay );\n                }) :\n                orig.apply( this, arguments );\n        };\n    })( $.fn.focus ),\n\n    scrollParent: function() {\n        var scrollParent;\n        if (($.ui.ie && (/(static|relative)/).test(this.css(\"position\"))) || (/absolute/).test(this.css(\"position\"))) {\n            scrollParent = this.parents().filter(function() {\n                return (/(relative|absolute|fixed)/).test($.css(this,\"position\")) && (/(auto|scroll)/).test($.css(this,\"overflow\")+$.css(this,\"overflow-y\")+$.css(this,\"overflow-x\"));\n            }).eq(0);\n        } else {\n            scrollParent = this.parents().filter(function() {\n                return (/(auto|scroll)/).test($.css(this,\"overflow\")+$.css(this,\"overflow-y\")+$.css(this,\"overflow-x\"));\n            }).eq(0);\n        }\n\n        return ( /fixed/ ).test( this.css( \"position\") ) || !scrollParent.length ? $( this[ 0 ].ownerDocument || document ) : scrollParent;\n    },\n\n    uniqueId: function() {\n        return this.each(function() {\n            if ( !this.id ) {\n                this.id = \"ui-id-\" + (++uuid);\n            }\n        });\n    },\n\n    removeUniqueId: function() {\n        return this.each(function() {\n            if ( runiqueId.test( this.id ) ) {\n                $( this ).removeAttr( \"id\" );\n            }\n        });\n    }\n});\n\n// selectors\nfunction focusable( element, isTabIndexNotNaN ) {\n    var map, mapName, img,\n        nodeName = element.nodeName.toLowerCase();\n    if ( \"area\" === nodeName ) {\n        map = element.parentNode;\n        mapName = map.name;\n        if ( !element.href || !mapName || map.nodeName.toLowerCase() !== \"map\" ) {\n            return false;\n        }\n        img = $( \"img[usemap=#\" + mapName + \"]\" )[0];\n        return !!img && visible( img );\n    }\n    return ( /input|select|textarea|button|object/.test( nodeName ) ?\n        !element.disabled :\n        \"a\" === nodeName ?\n            element.href || isTabIndexNotNaN :\n            isTabIndexNotNaN) &&\n        // the element and all of its ancestors must be visible\n        visible( element );\n}\n\nfunction visible( element ) {\n    return $.expr.filters.visible( element ) &&\n        !$( element ).parents().addBack().filter(function() {\n            return $.css( this, \"visibility\" ) === \"hidden\";\n        }).length;\n}\n\n$.extend( $.expr[ \":\" ], {\n    data: $.expr.createPseudo ?\n        $.expr.createPseudo(function( dataName ) {\n            return function( elem ) {\n                return !!$.data( elem, dataName );\n            };\n        }) :\n        // support: jQuery <1.8\n        function( elem, i, match ) {\n            return !!$.data( elem, match[ 3 ] );\n        },\n\n    focusable: function( element ) {\n        return focusable( element, !isNaN( $.attr( element, \"tabindex\" ) ) );\n    },\n\n    tabbable: function( element ) {\n        var tabIndex = $.attr( element, \"tabindex\" ),\n            isTabIndexNaN = isNaN( tabIndex );\n        return ( isTabIndexNaN || tabIndex >= 0 ) && focusable( element, !isTabIndexNaN );\n    }\n});\n\n// support: jQuery <1.8\nif ( !$( \"<a>\" ).outerWidth( 1 ).jquery ) {\n    $.each( [ \"Width\", \"Height\" ], function( i, name ) {\n        var side = name === \"Width\" ? [ \"Left\", \"Right\" ] : [ \"Top\", \"Bottom\" ],\n            type = name.toLowerCase(),\n            orig = {\n                innerWidth: $.fn.innerWidth,\n                innerHeight: $.fn.innerHeight,\n                outerWidth: $.fn.outerWidth,\n                outerHeight: $.fn.outerHeight\n            };\n\n        function reduce( elem, size, border, margin ) {\n            $.each( side, function() {\n                size -= parseFloat( $.css( elem, \"padding\" + this ) ) || 0;\n                if ( border ) {\n                    size -= parseFloat( $.css( elem, \"border\" + this + \"Width\" ) ) || 0;\n                }\n                if ( margin ) {\n                    size -= parseFloat( $.css( elem, \"margin\" + this ) ) || 0;\n                }\n            });\n            return size;\n        }\n\n        $.fn[ \"inner\" + name ] = function( size ) {\n            if ( size === undefined ) {\n                return orig[ \"inner\" + name ].call( this );\n            }\n\n            return this.each(function() {\n                $( this ).css( type, reduce( this, size ) + \"px\" );\n            });\n        };\n\n        $.fn[ \"outer\" + name] = function( size, margin ) {\n            if ( typeof size !== \"number\" ) {\n                return orig[ \"outer\" + name ].call( this, size );\n            }\n\n            return this.each(function() {\n                $( this).css( type, reduce( this, size, true, margin ) + \"px\" );\n            });\n        };\n    });\n}\n\n// support: jQuery <1.8\nif ( !$.fn.addBack ) {\n    $.fn.addBack = function( selector ) {\n        return this.add( selector == null ?\n            this.prevObject : this.prevObject.filter( selector )\n        );\n    };\n}\n\n// support: jQuery 1.6.1, 1.6.2 (http://bugs.jquery.com/ticket/9413)\nif ( $( \"<a>\" ).data( \"a-b\", \"a\" ).removeData( \"a-b\" ).data( \"a-b\" ) ) {\n    $.fn.removeData = (function( removeData ) {\n        return function( key ) {\n            if ( arguments.length ) {\n                return removeData.call( this, $.camelCase( key ) );\n            } else {\n                return removeData.call( this );\n            }\n        };\n    })( $.fn.removeData );\n}\n\n\n\n\n\n// deprecated\n$.ui.ie = !!/msie [\\w.]+/.exec( navigator.userAgent.toLowerCase() );\n\n$.support.selectstart = \"onselectstart\" in document.createElement( \"div\" );\n$.fn.extend({\n    disableSelection: function() {\n        return this.bind( ( $.support.selectstart ? \"selectstart\" : \"mousedown\" ) +\n            \".ui-disableSelection\", function( event ) {\n                event.preventDefault();\n            });\n    },\n\n    enableSelection: function() {\n        return this.unbind( \".ui-disableSelection\" );\n    },\n\n    zIndex: function( zIndex ) {\n        if ( zIndex !== undefined ) {\n            return this.css( \"zIndex\", zIndex );\n        }\n\n        if ( this.length ) {\n            var elem = $( this[ 0 ] ), position, value;\n            while ( elem.length && elem[ 0 ] !== document ) {\n                // Ignore z-index if position is set to a value where z-index is ignored by the browser\n                // This makes behavior of this function consistent across browsers\n                // WebKit always returns auto if the element is positioned\n                position = elem.css( \"position\" );\n                if ( position === \"absolute\" || position === \"relative\" || position === \"fixed\" ) {\n                    // IE returns 0 when zIndex is not specified\n                    // other browsers return a string\n                    // we ignore the case of nested elements with an explicit value of 0\n                    // <div style=\"z-index: -10;\"><div style=\"z-index: 0;\"></div></div>\n                    value = parseInt( elem.css( \"zIndex\" ), 10 );\n                    if ( !isNaN( value ) && value !== 0 ) {\n                        return value;\n                    }\n                }\n                elem = elem.parent();\n            }\n        }\n\n        return 0;\n    }\n});\n\n// $.ui.plugin is deprecated. Use $.widget() extensions instead.\n$.ui.plugin = {\n    add: function( module, option, set ) {\n        var i,\n            proto = $.ui[ module ].prototype;\n        for ( i in set ) {\n            proto.plugins[ i ] = proto.plugins[ i ] || [];\n            proto.plugins[ i ].push( [ option, set[ i ] ] );\n        }\n    },\n    call: function( instance, name, args, allowDisconnected ) {\n        var i,\n            set = instance.plugins[ name ];\n\n        if ( !set ) {\n            return;\n        }\n\n        if ( !allowDisconnected && ( !instance.element[ 0 ].parentNode || instance.element[ 0 ].parentNode.nodeType === 11 ) ) {\n            return;\n        }\n\n        for ( i = 0; i < set.length; i++ ) {\n            if ( instance.options[ set[ i ][ 0 ] ] ) {\n                set[ i ][ 1 ].apply( instance.element, args );\n            }\n        }\n    }\n};\n\n})( jQuery );\n\n(function( $, window, undefined ) {\n\n    // Subtract the height of external toolbars from the page height, if the page does not have\n    // internal toolbars of the same type. We take care to use the widget options if we find a\n    // widget instance and the element's data-attributes otherwise.\n    var compensateToolbars = function( page, desiredHeight ) {\n        var pageParent = page.parent(),\n            toolbarsAffectingHeight = [],\n\n            // We use this function to filter fixed toolbars with option updatePagePadding set to\n            // true (which is the default) from our height subtraction, because fixed toolbars with\n            // option updatePagePadding set to true compensate for their presence by adding padding\n            // to the active page. We want to avoid double-counting by also subtracting their\n            // height from the desired page height.\n            noPadders = function() {\n                var theElement = $( this ),\n                    widgetOptions = $.mobile.toolbar && theElement.data( \"mobile-toolbar\" ) ?\n                        theElement.toolbar( \"option\" ) : {\n                            position: theElement.attr( \"data-\" + $.mobile.ns + \"position\" ),\n                            updatePagePadding: ( theElement.attr( \"data-\" + $.mobile.ns +\n                                \"update-page-padding\" ) !== false )\n                        };\n\n                return !( widgetOptions.position === \"fixed\" &&\n                    widgetOptions.updatePagePadding === true );\n            },\n            externalHeaders = pageParent.children( \":jqmData(role='header')\" ).filter( noPadders ),\n            internalHeaders = page.children( \":jqmData(role='header')\" ),\n            externalFooters = pageParent.children( \":jqmData(role='footer')\" ).filter( noPadders ),\n            internalFooters = page.children( \":jqmData(role='footer')\" );\n\n        // If we have no internal headers, but we do have external headers, then their height\n        // reduces the page height\n        if ( internalHeaders.length === 0 && externalHeaders.length > 0 ) {\n            toolbarsAffectingHeight = toolbarsAffectingHeight.concat( externalHeaders.toArray() );\n        }\n\n        // If we have no internal footers, but we do have external footers, then their height\n        // reduces the page height\n        if ( internalFooters.length === 0 && externalFooters.length > 0 ) {\n            toolbarsAffectingHeight = toolbarsAffectingHeight.concat( externalFooters.toArray() );\n        }\n\n        $.each( toolbarsAffectingHeight, function( index, value ) {\n            desiredHeight -= $( value ).outerHeight();\n        });\n\n        // Height must be at least zero\n        return Math.max( 0, desiredHeight );\n    };\n\n    $.extend( $.mobile, {\n        // define the window and the document objects\n        window: $( window ),\n        document: $( document ),\n\n        // TODO: Remove and use $.ui.keyCode directly\n        keyCode: $.ui.keyCode,\n\n        // Place to store various widget extensions\n        behaviors: {},\n\n        // Scroll page vertically: scroll to 0 to hide iOS address bar, or pass a Y value\n        silentScroll: function( ypos ) {\n            if ( $.type( ypos ) !== \"number\" ) {\n                ypos = $.mobile.defaultHomeScroll;\n            }\n\n            // prevent scrollstart and scrollstop events\n            $.event.special.scrollstart.enabled = false;\n\n            setTimeout(function() {\n                window.scrollTo( 0, ypos );\n                $.mobile.document.trigger( \"silentscroll\", { x: 0, y: ypos });\n            }, 20 );\n\n            setTimeout(function() {\n                $.event.special.scrollstart.enabled = true;\n            }, 150 );\n        },\n\n        getClosestBaseUrl: function( ele )    {\n            // Find the closest page and extract out its url.\n            var url = $( ele ).closest( \".ui-page\" ).jqmData( \"url\" ),\n                base = $.mobile.path.documentBase.hrefNoHash;\n\n            if ( !$.mobile.dynamicBaseEnabled || !url || !$.mobile.path.isPath( url ) ) {\n                url = base;\n            }\n\n            return $.mobile.path.makeUrlAbsolute( url, base );\n        },\n        removeActiveLinkClass: function( forceRemoval ) {\n            if ( !!$.mobile.activeClickedLink &&\n                ( !$.mobile.activeClickedLink.closest( \".\" + $.mobile.activePageClass ).length ||\n                    forceRemoval ) ) {\n\n                $.mobile.activeClickedLink.removeClass( $.mobile.activeBtnClass );\n            }\n            $.mobile.activeClickedLink = null;\n        },\n\n        // DEPRECATED in 1.4\n        // Find the closest parent with a theme class on it. Note that\n        // we are not using $.fn.closest() on purpose here because this\n        // method gets called quite a bit and we need it to be as fast\n        // as possible.\n        getInheritedTheme: function( el, defaultTheme ) {\n            var e = el[ 0 ],\n                ltr = \"\",\n                re = /ui-(bar|body|overlay)-([a-z])\\b/,\n                c, m;\n            while ( e ) {\n                c = e.className || \"\";\n                if ( c && ( m = re.exec( c ) ) && ( ltr = m[ 2 ] ) ) {\n                    // We found a parent with a theme class\n                    // on it so bail from this loop.\n                    break;\n                }\n\n                e = e.parentNode;\n            }\n            // Return the theme letter we found, if none, return the\n            // specified default.\n            return ltr || defaultTheme || \"a\";\n        },\n\n        enhanceable: function( elements ) {\n            return this.haveParents( elements, \"enhance\" );\n        },\n\n        hijackable: function( elements ) {\n            return this.haveParents( elements, \"ajax\" );\n        },\n\n        haveParents: function( elements, attr ) {\n            if ( !$.mobile.ignoreContentEnabled ) {\n                return elements;\n            }\n\n            var count = elements.length,\n                $newSet = $(),\n                e, $element, excluded,\n                i, c;\n\n            for ( i = 0; i < count; i++ ) {\n                $element = elements.eq( i );\n                excluded = false;\n                e = elements[ i ];\n\n                while ( e ) {\n                    c = e.getAttribute ? e.getAttribute( \"data-\" + $.mobile.ns + attr ) : \"\";\n\n                    if ( c === \"false\" ) {\n                        excluded = true;\n                        break;\n                    }\n\n                    e = e.parentNode;\n                }\n\n                if ( !excluded ) {\n                    $newSet = $newSet.add( $element );\n                }\n            }\n\n            return $newSet;\n        },\n\n        getScreenHeight: function() {\n            // Native innerHeight returns more accurate value for this across platforms,\n            // jQuery version is here as a normalized fallback for platforms like Symbian\n            return window.innerHeight || $.mobile.window.height();\n        },\n\n        //simply set the active page's minimum height to screen height, depending on orientation\n        resetActivePageHeight: function( height ) {\n            var page = $( \".\" + $.mobile.activePageClass ),\n                pageHeight = page.height(),\n                pageOuterHeight = page.outerHeight( true );\n\n            height = compensateToolbars( page,\n                ( typeof height === \"number\" ) ? height : $.mobile.getScreenHeight() );\n\n            // Remove any previous min-height setting\n            page.css( \"min-height\", \"\" );\n\n            // Set the minimum height only if the height as determined by CSS is insufficient\n            if ( page.height() < height ) {\n                page.css( \"min-height\", height - ( pageOuterHeight - pageHeight ) );\n            }\n        },\n\n        loading: function() {\n            // If this is the first call to this function, instantiate a loader widget\n            var loader = this.loading._widget || $( $.mobile.loader.prototype.defaultHtml ).loader(),\n\n                // Call the appropriate method on the loader\n                returnValue = loader.loader.apply( loader, arguments );\n\n            // Make sure the loader is retained for future calls to this function.\n            this.loading._widget = loader;\n\n            return returnValue;\n        }\n    });\n\n    $.addDependents = function( elem, newDependents ) {\n        var $elem = $( elem ),\n            dependents = $elem.jqmData( \"dependents\" ) || $();\n\n        $elem.jqmData( \"dependents\", $( dependents ).add( newDependents ) );\n    };\n\n    // plugins\n    $.fn.extend({\n        removeWithDependents: function() {\n            $.removeWithDependents( this );\n        },\n\n        // Enhance child elements\n        enhanceWithin: function() {\n            var index,\n                widgetElements = {},\n                keepNative = $.mobile.page.prototype.keepNativeSelector(),\n                that = this;\n\n            // Add no js class to elements\n            if ( $.mobile.nojs ) {\n                $.mobile.nojs( this );\n            }\n\n            // Bind links for ajax nav\n            if ( $.mobile.links ) {\n                $.mobile.links( this );\n            }\n\n            // Degrade inputs for styleing\n            if ( $.mobile.degradeInputsWithin ) {\n                $.mobile.degradeInputsWithin( this );\n            }\n\n            // Run buttonmarkup\n            if ( $.fn.buttonMarkup ) {\n                this.find( $.fn.buttonMarkup.initSelector ).not( keepNative )\n                .jqmEnhanceable().buttonMarkup();\n            }\n\n            // Add classes for fieldContain\n            if ( $.fn.fieldcontain ) {\n                this.find( \":jqmData(role='fieldcontain')\" ).not( keepNative )\n                .jqmEnhanceable().fieldcontain();\n            }\n\n            // Enhance widgets\n            $.each( $.mobile.widgets, function( name, constructor ) {\n\n                // If initSelector not false find elements\n                if ( constructor.initSelector ) {\n\n                    // Filter elements that should not be enhanced based on parents\n                    var elements = $.mobile.enhanceable( that.find( constructor.initSelector ) );\n\n                    // If any matching elements remain filter ones with keepNativeSelector\n                    if ( elements.length > 0 ) {\n\n                        // $.mobile.page.prototype.keepNativeSelector is deprecated this is just for backcompat\n                        // Switch to $.mobile.keepNative in 1.5 which is just a value not a function\n                        elements = elements.not( keepNative );\n                    }\n\n                    // Enhance whatever is left\n                    if ( elements.length > 0 ) {\n                        widgetElements[ constructor.prototype.widgetName ] = elements;\n                    }\n                }\n            });\n\n            for ( index in widgetElements ) {\n                widgetElements[ index ][ index ]();\n            }\n\n            return this;\n        },\n\n        addDependents: function( newDependents ) {\n            $.addDependents( this, newDependents );\n        },\n\n        // note that this helper doesn't attempt to handle the callback\n        // or setting of an html element's text, its only purpose is\n        // to return the html encoded version of the text in all cases. (thus the name)\n        getEncodedText: function() {\n            return $( \"<a>\" ).text( this.text() ).html();\n        },\n\n        // fluent helper function for the mobile namespaced equivalent\n        jqmEnhanceable: function() {\n            return $.mobile.enhanceable( this );\n        },\n\n        jqmHijackable: function() {\n            return $.mobile.hijackable( this );\n        }\n    });\n\n    $.removeWithDependents = function( nativeElement ) {\n        var element = $( nativeElement );\n\n        ( element.jqmData( \"dependents\" ) || $() ).remove();\n        element.remove();\n    };\n    $.addDependents = function( nativeElement, newDependents ) {\n        var element = $( nativeElement ),\n            dependents = element.jqmData( \"dependents\" ) || $();\n\n        element.jqmData( \"dependents\", $( dependents ).add( newDependents ) );\n    };\n\n    $.find.matches = function( expr, set ) {\n        return $.find( expr, null, null, set );\n    };\n\n    $.find.matchesSelector = function( node, expr ) {\n        return $.find( expr, null, null, [ node ] ).length > 0;\n    };\n\n})( jQuery, this );\n\n(function( $, window, undefined ) {\n    $.extend( $.mobile, {\n\n        // Version of the jQuery Mobile Framework\n        version: \"1.4.5\",\n\n        // Deprecated and no longer used in 1.4 remove in 1.5\n        // Define the url parameter used for referencing widget-generated sub-pages.\n        // Translates to example.html&ui-page=subpageIdentifier\n        // hash segment before &ui-page= is used to make Ajax request\n        subPageUrlKey: \"ui-page\",\n\n        hideUrlBar: true,\n\n        // Keepnative Selector\n        keepNative: \":jqmData(role='none'), :jqmData(role='nojs')\",\n\n        // Deprecated in 1.4 remove in 1.5\n        // Class assigned to page currently in view, and during transitions\n        activePageClass: \"ui-page-active\",\n\n        // Deprecated in 1.4 remove in 1.5\n        // Class used for \"active\" button state, from CSS framework\n        activeBtnClass: \"ui-btn-active\",\n\n        // Deprecated in 1.4 remove in 1.5\n        // Class used for \"focus\" form element state, from CSS framework\n        focusClass: \"ui-focus\",\n\n        // Automatically handle clicks and form submissions through Ajax, when same-domain\n        ajaxEnabled: true,\n\n        // Automatically load and show pages based on location.hash\n        hashListeningEnabled: true,\n\n        // disable to prevent jquery from bothering with links\n        linkBindingEnabled: true,\n\n        // Set default page transition - 'none' for no transitions\n        defaultPageTransition: \"fade\",\n\n        // Set maximum window width for transitions to apply - 'false' for no limit\n        maxTransitionWidth: false,\n\n        // Minimum scroll distance that will be remembered when returning to a page\n        // Deprecated remove in 1.5\n        minScrollBack: 0,\n\n        // Set default dialog transition - 'none' for no transitions\n        defaultDialogTransition: \"pop\",\n\n        // Error response message - appears when an Ajax page request fails\n        pageLoadErrorMessage: \"Error Loading Page\",\n\n        // For error messages, which theme does the box use?\n        pageLoadErrorMessageTheme: \"a\",\n\n        // replace calls to window.history.back with phonegaps navigation helper\n        // where it is provided on the window object\n        phonegapNavigationEnabled: false,\n\n        //automatically initialize the DOM when it's ready\n        autoInitializePage: true,\n\n        pushStateEnabled: true,\n\n        // allows users to opt in to ignoring content by marking a parent element as\n        // data-ignored\n        ignoreContentEnabled: false,\n\n        buttonMarkup: {\n            hoverDelay: 200\n        },\n\n        // disable the alteration of the dynamic base tag or links in the case\n        // that a dynamic base tag isn't supported\n        dynamicBaseEnabled: true,\n\n        // default the property to remove dependency on assignment in init module\n        pageContainer: $(),\n\n        //enable cross-domain page support\n        allowCrossDomainPages: false,\n\n        dialogHashKey: \"&ui-state=dialog\"\n    });\n})( jQuery, this );\n\n/*!\n * jQuery UI Widget c0ab71056b936627e8a7821f03c044aec6280a40\n * http://jqueryui.com\n *\n * Copyright 2013 jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/jQuery.widget/\n */\n(function( $, undefined ) {\n\nvar uuid = 0,\n    slice = Array.prototype.slice,\n    _cleanData = $.cleanData;\n$.cleanData = function( elems ) {\n    for ( var i = 0, elem; (elem = elems[i]) != null; i++ ) {\n        try {\n            $( elem ).triggerHandler( \"remove\" );\n        // http://bugs.jquery.com/ticket/8235\n        } catch( e ) {}\n    }\n    _cleanData( elems );\n};\n\n$.widget = function( name, base, prototype ) {\n    var fullName, existingConstructor, constructor, basePrototype,\n        // proxiedPrototype allows the provided prototype to remain unmodified\n        // so that it can be used as a mixin for multiple widgets (#8876)\n        proxiedPrototype = {},\n        namespace = name.split( \".\" )[ 0 ];\n\n    name = name.split( \".\" )[ 1 ];\n    fullName = namespace + \"-\" + name;\n\n    if ( !prototype ) {\n        prototype = base;\n        base = $.Widget;\n    }\n\n    // create selector for plugin\n    $.expr[ \":\" ][ fullName.toLowerCase() ] = function( elem ) {\n        return !!$.data( elem, fullName );\n    };\n\n    $[ namespace ] = $[ namespace ] || {};\n    existingConstructor = $[ namespace ][ name ];\n    constructor = $[ namespace ][ name ] = function( options, element ) {\n        // allow instantiation without \"new\" keyword\n        if ( !this._createWidget ) {\n            return new constructor( options, element );\n        }\n\n        // allow instantiation without initializing for simple inheritance\n        // must use \"new\" keyword (the code above always passes args)\n        if ( arguments.length ) {\n            this._createWidget( options, element );\n        }\n    };\n    // extend with the existing constructor to carry over any static properties\n    $.extend( constructor, existingConstructor, {\n        version: prototype.version,\n        // copy the object used to create the prototype in case we need to\n        // redefine the widget later\n        _proto: $.extend( {}, prototype ),\n        // track widgets that inherit from this widget in case this widget is\n        // redefined after a widget inherits from it\n        _childConstructors: []\n    });\n\n    basePrototype = new base();\n    // we need to make the options hash a property directly on the new instance\n    // otherwise we'll modify the options hash on the prototype that we're\n    // inheriting from\n    basePrototype.options = $.widget.extend( {}, basePrototype.options );\n    $.each( prototype, function( prop, value ) {\n        if ( !$.isFunction( value ) ) {\n            proxiedPrototype[ prop ] = value;\n            return;\n        }\n        proxiedPrototype[ prop ] = (function() {\n            var _super = function() {\n                    return base.prototype[ prop ].apply( this, arguments );\n                },\n                _superApply = function( args ) {\n                    return base.prototype[ prop ].apply( this, args );\n                };\n            return function() {\n                var __super = this._super,\n                    __superApply = this._superApply,\n                    returnValue;\n\n                this._super = _super;\n                this._superApply = _superApply;\n\n                returnValue = value.apply( this, arguments );\n\n                this._super = __super;\n                this._superApply = __superApply;\n\n                return returnValue;\n            };\n        })();\n    });\n    constructor.prototype = $.widget.extend( basePrototype, {\n        // TODO: remove support for widgetEventPrefix\n        // always use the name + a colon as the prefix, e.g., draggable:start\n        // don't prefix for widgets that aren't DOM-based\n        widgetEventPrefix: existingConstructor ? (basePrototype.widgetEventPrefix || name) : name\n    }, proxiedPrototype, {\n        constructor: constructor,\n        namespace: namespace,\n        widgetName: name,\n        widgetFullName: fullName\n    });\n\n    // If this widget is being redefined then we need to find all widgets that\n    // are inheriting from it and redefine all of them so that they inherit from\n    // the new version of this widget. We're essentially trying to replace one\n    // level in the prototype chain.\n    if ( existingConstructor ) {\n        $.each( existingConstructor._childConstructors, function( i, child ) {\n            var childPrototype = child.prototype;\n\n            // redefine the child widget using the same prototype that was\n            // originally used, but inherit from the new version of the base\n            $.widget( childPrototype.namespace + \".\" + childPrototype.widgetName, constructor, child._proto );\n        });\n        // remove the list of existing child constructors from the old constructor\n        // so the old child constructors can be garbage collected\n        delete existingConstructor._childConstructors;\n    } else {\n        base._childConstructors.push( constructor );\n    }\n\n    $.widget.bridge( name, constructor );\n\n    return constructor;\n};\n\n$.widget.extend = function( target ) {\n    var input = slice.call( arguments, 1 ),\n        inputIndex = 0,\n        inputLength = input.length,\n        key,\n        value;\n    for ( ; inputIndex < inputLength; inputIndex++ ) {\n        for ( key in input[ inputIndex ] ) {\n            value = input[ inputIndex ][ key ];\n            if ( input[ inputIndex ].hasOwnProperty( key ) && value !== undefined ) {\n                // Clone objects\n                if ( $.isPlainObject( value ) ) {\n                    target[ key ] = $.isPlainObject( target[ key ] ) ?\n                        $.widget.extend( {}, target[ key ], value ) :\n                        // Don't extend strings, arrays, etc. with objects\n                        $.widget.extend( {}, value );\n                // Copy everything else by reference\n                } else {\n                    target[ key ] = value;\n                }\n            }\n        }\n    }\n    return target;\n};\n\n$.widget.bridge = function( name, object ) {\n    var fullName = object.prototype.widgetFullName || name;\n    $.fn[ name ] = function( options ) {\n        var isMethodCall = typeof options === \"string\",\n            args = slice.call( arguments, 1 ),\n            returnValue = this;\n\n        // allow multiple hashes to be passed on init\n        options = !isMethodCall && args.length ?\n            $.widget.extend.apply( null, [ options ].concat(args) ) :\n            options;\n\n        if ( isMethodCall ) {\n            this.each(function() {\n                var methodValue,\n                    instance = $.data( this, fullName );\n                if ( options === \"instance\" ) {\n                    returnValue = instance;\n                    return false;\n                }\n                if ( !instance ) {\n                    return $.error( \"cannot call methods on \" + name + \" prior to initialization; \" +\n                        \"attempted to call method '\" + options + \"'\" );\n                }\n                if ( !$.isFunction( instance[options] ) || options.charAt( 0 ) === \"_\" ) {\n                    return $.error( \"no such method '\" + options + \"' for \" + name + \" widget instance\" );\n                }\n                methodValue = instance[ options ].apply( instance, args );\n                if ( methodValue !== instance && methodValue !== undefined ) {\n                    returnValue = methodValue && methodValue.jquery ?\n                        returnValue.pushStack( methodValue.get() ) :\n                        methodValue;\n                    return false;\n                }\n            });\n        } else {\n            this.each(function() {\n                var instance = $.data( this, fullName );\n                if ( instance ) {\n                    instance.option( options || {} )._init();\n                } else {\n                    $.data( this, fullName, new object( options, this ) );\n                }\n            });\n        }\n\n        return returnValue;\n    };\n};\n\n$.Widget = function( /* options, element */ ) {};\n$.Widget._childConstructors = [];\n\n$.Widget.prototype = {\n    widgetName: \"widget\",\n    widgetEventPrefix: \"\",\n    defaultElement: \"<div>\",\n    options: {\n        disabled: false,\n\n        // callbacks\n        create: null\n    },\n    _createWidget: function( options, element ) {\n        element = $( element || this.defaultElement || this )[ 0 ];\n        this.element = $( element );\n        this.uuid = uuid++;\n        this.eventNamespace = \".\" + this.widgetName + this.uuid;\n        this.options = $.widget.extend( {},\n            this.options,\n            this._getCreateOptions(),\n            options );\n\n        this.bindings = $();\n        this.hoverable = $();\n        this.focusable = $();\n\n        if ( element !== this ) {\n            $.data( element, this.widgetFullName, this );\n            this._on( true, this.element, {\n                remove: function( event ) {\n                    if ( event.target === element ) {\n                        this.destroy();\n                    }\n                }\n            });\n            this.document = $( element.style ?\n                // element within the document\n                element.ownerDocument :\n                // element is window or document\n                element.document || element );\n            this.window = $( this.document[0].defaultView || this.document[0].parentWindow );\n        }\n\n        this._create();\n        this._trigger( \"create\", null, this._getCreateEventData() );\n        this._init();\n    },\n    _getCreateOptions: $.noop,\n    _getCreateEventData: $.noop,\n    _create: $.noop,\n    _init: $.noop,\n\n    destroy: function() {\n        this._destroy();\n        // we can probably remove the unbind calls in 2.0\n        // all event bindings should go through this._on()\n        this.element\n            .unbind( this.eventNamespace )\n            .removeData( this.widgetFullName )\n            // support: jquery <1.6.3\n            // http://bugs.jquery.com/ticket/9413\n            .removeData( $.camelCase( this.widgetFullName ) );\n        this.widget()\n            .unbind( this.eventNamespace )\n            .removeAttr( \"aria-disabled\" )\n            .removeClass(\n                this.widgetFullName + \"-disabled \" +\n                \"ui-state-disabled\" );\n\n        // clean up events and states\n        this.bindings.unbind( this.eventNamespace );\n        this.hoverable.removeClass( \"ui-state-hover\" );\n        this.focusable.removeClass( \"ui-state-focus\" );\n    },\n    _destroy: $.noop,\n\n    widget: function() {\n        return this.element;\n    },\n\n    option: function( key, value ) {\n        var options = key,\n            parts,\n            curOption,\n            i;\n\n        if ( arguments.length === 0 ) {\n            // don't return a reference to the internal hash\n            return $.widget.extend( {}, this.options );\n        }\n\n        if ( typeof key === \"string\" ) {\n            // handle nested keys, e.g., \"foo.bar\" => { foo: { bar: ___ } }\n            options = {};\n            parts = key.split( \".\" );\n            key = parts.shift();\n            if ( parts.length ) {\n                curOption = options[ key ] = $.widget.extend( {}, this.options[ key ] );\n                for ( i = 0; i < parts.length - 1; i++ ) {\n                    curOption[ parts[ i ] ] = curOption[ parts[ i ] ] || {};\n                    curOption = curOption[ parts[ i ] ];\n                }\n                key = parts.pop();\n                if ( value === undefined ) {\n                    return curOption[ key ] === undefined ? null : curOption[ key ];\n                }\n                curOption[ key ] = value;\n            } else {\n                if ( value === undefined ) {\n                    return this.options[ key ] === undefined ? null : this.options[ key ];\n                }\n                options[ key ] = value;\n            }\n        }\n\n        this._setOptions( options );\n\n        return this;\n    },\n    _setOptions: function( options ) {\n        var key;\n\n        for ( key in options ) {\n            this._setOption( key, options[ key ] );\n        }\n\n        return this;\n    },\n    _setOption: function( key, value ) {\n        this.options[ key ] = value;\n\n        if ( key === \"disabled\" ) {\n            this.widget()\n                .toggleClass( this.widgetFullName + \"-disabled\", !!value );\n            this.hoverable.removeClass( \"ui-state-hover\" );\n            this.focusable.removeClass( \"ui-state-focus\" );\n        }\n\n        return this;\n    },\n\n    enable: function() {\n        return this._setOptions({ disabled: false });\n    },\n    disable: function() {\n        return this._setOptions({ disabled: true });\n    },\n\n    _on: function( suppressDisabledCheck, element, handlers ) {\n        var delegateElement,\n            instance = this;\n\n        // no suppressDisabledCheck flag, shuffle arguments\n        if ( typeof suppressDisabledCheck !== \"boolean\" ) {\n            handlers = element;\n            element = suppressDisabledCheck;\n            suppressDisabledCheck = false;\n        }\n\n        // no element argument, shuffle and use this.element\n        if ( !handlers ) {\n            handlers = element;\n            element = this.element;\n            delegateElement = this.widget();\n        } else {\n            // accept selectors, DOM elements\n            element = delegateElement = $( element );\n            this.bindings = this.bindings.add( element );\n        }\n\n        $.each( handlers, function( event, handler ) {\n            function handlerProxy() {\n                // allow widgets to customize the disabled handling\n                // - disabled as an array instead of boolean\n                // - disabled class as method for disabling individual parts\n                if ( !suppressDisabledCheck &&\n                        ( instance.options.disabled === true ||\n                            $( this ).hasClass( \"ui-state-disabled\" ) ) ) {\n                    return;\n                }\n                return ( typeof handler === \"string\" ? instance[ handler ] : handler )\n                    .apply( instance, arguments );\n            }\n\n            // copy the guid so direct unbinding works\n            if ( typeof handler !== \"string\" ) {\n                handlerProxy.guid = handler.guid =\n                    handler.guid || handlerProxy.guid || $.guid++;\n            }\n\n            var match = event.match( /^(\\w+)\\s*(.*)$/ ),\n                eventName = match[1] + instance.eventNamespace,\n                selector = match[2];\n            if ( selector ) {\n                delegateElement.delegate( selector, eventName, handlerProxy );\n            } else {\n                element.bind( eventName, handlerProxy );\n            }\n        });\n    },\n\n    _off: function( element, eventName ) {\n        eventName = (eventName || \"\").split( \" \" ).join( this.eventNamespace + \" \" ) + this.eventNamespace;\n        element.unbind( eventName ).undelegate( eventName );\n    },\n\n    _delay: function( handler, delay ) {\n        function handlerProxy() {\n            return ( typeof handler === \"string\" ? instance[ handler ] : handler )\n                .apply( instance, arguments );\n        }\n        var instance = this;\n        return setTimeout( handlerProxy, delay || 0 );\n    },\n\n    _hoverable: function( element ) {\n        this.hoverable = this.hoverable.add( element );\n        this._on( element, {\n            mouseenter: function( event ) {\n                $( event.currentTarget ).addClass( \"ui-state-hover\" );\n            },\n            mouseleave: function( event ) {\n                $( event.currentTarget ).removeClass( \"ui-state-hover\" );\n            }\n        });\n    },\n\n    _focusable: function( element ) {\n        this.focusable = this.focusable.add( element );\n        this._on( element, {\n            focusin: function( event ) {\n                $( event.currentTarget ).addClass( \"ui-state-focus\" );\n            },\n            focusout: function( event ) {\n                $( event.currentTarget ).removeClass( \"ui-state-focus\" );\n            }\n        });\n    },\n\n    _trigger: function( type, event, data ) {\n        var prop, orig,\n            callback = this.options[ type ];\n\n        data = data || {};\n        event = $.Event( event );\n        event.type = ( type === this.widgetEventPrefix ?\n            type :\n            this.widgetEventPrefix + type ).toLowerCase();\n        // the original event may come from any element\n        // so we need to reset the target on the new event\n        event.target = this.element[ 0 ];\n\n        // copy original event properties over to the new event\n        orig = event.originalEvent;\n        if ( orig ) {\n            for ( prop in orig ) {\n                if ( !( prop in event ) ) {\n                    event[ prop ] = orig[ prop ];\n                }\n            }\n        }\n\n        this.element.trigger( event, data );\n        return !( $.isFunction( callback ) &&\n            callback.apply( this.element[0], [ event ].concat( data ) ) === false ||\n            event.isDefaultPrevented() );\n    }\n};\n\n$.each( { show: \"fadeIn\", hide: \"fadeOut\" }, function( method, defaultEffect ) {\n    $.Widget.prototype[ \"_\" + method ] = function( element, options, callback ) {\n        if ( typeof options === \"string\" ) {\n            options = { effect: options };\n        }\n        var hasOptions,\n            effectName = !options ?\n                method :\n                options === true || typeof options === \"number\" ?\n                    defaultEffect :\n                    options.effect || defaultEffect;\n        options = options || {};\n        if ( typeof options === \"number\" ) {\n            options = { duration: options };\n        }\n        hasOptions = !$.isEmptyObject( options );\n        options.complete = callback;\n        if ( options.delay ) {\n            element.delay( options.delay );\n        }\n        if ( hasOptions && $.effects && $.effects.effect[ effectName ] ) {\n            element[ method ]( options );\n        } else if ( effectName !== method && element[ effectName ] ) {\n            element[ effectName ]( options.duration, options.easing, callback );\n        } else {\n            element.queue(function( next ) {\n                $( this )[ method ]();\n                if ( callback ) {\n                    callback.call( element[ 0 ] );\n                }\n                next();\n            });\n        }\n    };\n});\n\n})( jQuery );\n\n(function( $, window, undefined ) {\n    var nsNormalizeDict = {},\n        oldFind = $.find,\n        rbrace = /(?:\\{[\\s\\S]*\\}|\\[[\\s\\S]*\\])$/,\n        jqmDataRE = /:jqmData\\(([^)]*)\\)/g;\n\n    $.extend( $.mobile, {\n\n        // Namespace used framework-wide for data-attrs. Default is no namespace\n\n        ns: \"\",\n\n        // Retrieve an attribute from an element and perform some massaging of the value\n\n        getAttribute: function( element, key ) {\n            var data;\n\n            element = element.jquery ? element[0] : element;\n\n            if ( element && element.getAttribute ) {\n                data = element.getAttribute( \"data-\" + $.mobile.ns + key );\n            }\n\n            // Copied from core's src/data.js:dataAttr()\n            // Convert from a string to a proper data type\n            try {\n                data = data === \"true\" ? true :\n                    data === \"false\" ? false :\n                    data === \"null\" ? null :\n                    // Only convert to a number if it doesn't change the string\n                    +data + \"\" === data ? +data :\n                    rbrace.test( data ) ? JSON.parse( data ) :\n                    data;\n            } catch( err ) {}\n\n            return data;\n        },\n\n        // Expose our cache for testing purposes.\n        nsNormalizeDict: nsNormalizeDict,\n\n        // Take a data attribute property, prepend the namespace\n        // and then camel case the attribute string. Add the result\n        // to our nsNormalizeDict so we don't have to do this again.\n        nsNormalize: function( prop ) {\n            return nsNormalizeDict[ prop ] ||\n                ( nsNormalizeDict[ prop ] = $.camelCase( $.mobile.ns + prop ) );\n        },\n\n        // Find the closest javascript page element to gather settings data jsperf test\n        // http://jsperf.com/single-complex-selector-vs-many-complex-selectors/edit\n        // possibly naive, but it shows that the parsing overhead for *just* the page selector vs\n        // the page and dialog selector is negligable. This could probably be speed up by\n        // doing a similar parent node traversal to the one found in the inherited theme code above\n        closestPageData: function( $target ) {\n            return $target\n                .closest( \":jqmData(role='page'), :jqmData(role='dialog')\" )\n                .data( \"mobile-page\" );\n        }\n\n    });\n\n    // Mobile version of data and removeData and hasData methods\n    // ensures all data is set and retrieved using jQuery Mobile's data namespace\n    $.fn.jqmData = function( prop, value ) {\n        var result;\n        if ( typeof prop !== \"undefined\" ) {\n            if ( prop ) {\n                prop = $.mobile.nsNormalize( prop );\n            }\n\n            // undefined is permitted as an explicit input for the second param\n            // in this case it returns the value and does not set it to undefined\n            if ( arguments.length < 2 || value === undefined ) {\n                result = this.data( prop );\n            } else {\n                result = this.data( prop, value );\n            }\n        }\n        return result;\n    };\n\n    $.jqmData = function( elem, prop, value ) {\n        var result;\n        if ( typeof prop !== \"undefined\" ) {\n            result = $.data( elem, prop ? $.mobile.nsNormalize( prop ) : prop, value );\n        }\n        return result;\n    };\n\n    $.fn.jqmRemoveData = function( prop ) {\n        return this.removeData( $.mobile.nsNormalize( prop ) );\n    };\n\n    $.jqmRemoveData = function( elem, prop ) {\n        return $.removeData( elem, $.mobile.nsNormalize( prop ) );\n    };\n\n    $.find = function( selector, context, ret, extra ) {\n        if ( selector.indexOf( \":jqmData\" ) > -1 ) {\n            selector = selector.replace( jqmDataRE, \"[data-\" + ( $.mobile.ns || \"\" ) + \"$1]\" );\n        }\n\n        return oldFind.call( this, selector, context, ret, extra );\n    };\n\n    $.extend( $.find, oldFind );\n\n})( jQuery, this );\n\n(function( $, undefined ) {\n\nvar rcapitals = /[A-Z]/g,\n    replaceFunction = function( c ) {\n        return \"-\" + c.toLowerCase();\n    };\n\n$.extend( $.Widget.prototype, {\n    _getCreateOptions: function() {\n        var option, value,\n            elem = this.element[ 0 ],\n            options = {};\n\n        //\n        if ( !$.mobile.getAttribute( elem, \"defaults\" ) ) {\n            for ( option in this.options ) {\n                value = $.mobile.getAttribute( elem, option.replace( rcapitals, replaceFunction ) );\n\n                if ( value != null ) {\n                    options[ option ] = value;\n                }\n            }\n        }\n\n        return options;\n    }\n});\n\n//TODO: Remove in 1.5 for backcompat only\n$.mobile.widget = $.Widget;\n\n})( jQuery );\n\n\n(function( $ ) {\n    // TODO move loader class down into the widget settings\n    var loaderClass = \"ui-loader\", $html = $( \"html\" );\n\n    $.widget( \"mobile.loader\", {\n        // NOTE if the global config settings are defined they will override these\n        //      options\n        options: {\n            // the theme for the loading message\n            theme: \"a\",\n\n            // whether the text in the loading message is shown\n            textVisible: false,\n\n            // custom html for the inner content of the loading message\n            html: \"\",\n\n            // the text to be displayed when the popup is shown\n            text: \"loading\"\n        },\n\n        defaultHtml: \"<div class='\" + loaderClass + \"'>\" +\n            \"<span class='ui-icon-loading'></span>\" +\n            \"<h1></h1>\" +\n            \"</div>\",\n\n        // For non-fixed supportin browsers. Position at y center (if scrollTop supported), above the activeBtn (if defined), or just 100px from top\n        fakeFixLoader: function() {\n            var activeBtn = $( \".\" + $.mobile.activeBtnClass ).first();\n\n            this.element\n                .css({\n                    top: $.support.scrollTop && this.window.scrollTop() + this.window.height() / 2 ||\n                        activeBtn.length && activeBtn.offset().top || 100\n                });\n        },\n\n        // check position of loader to see if it appears to be \"fixed\" to center\n        // if not, use abs positioning\n        checkLoaderPosition: function() {\n            var offset = this.element.offset(),\n                scrollTop = this.window.scrollTop(),\n                screenHeight = $.mobile.getScreenHeight();\n\n            if ( offset.top < scrollTop || ( offset.top - scrollTop ) > screenHeight ) {\n                this.element.addClass( \"ui-loader-fakefix\" );\n                this.fakeFixLoader();\n                this.window\n                    .unbind( \"scroll\", this.checkLoaderPosition )\n                    .bind( \"scroll\", $.proxy( this.fakeFixLoader, this ) );\n            }\n        },\n\n        resetHtml: function() {\n            this.element.html( $( this.defaultHtml ).html() );\n        },\n\n        // Turn on/off page loading message. Theme doubles as an object argument\n        // with the following shape: { theme: '', text: '', html: '', textVisible: '' }\n        // NOTE that the $.mobile.loading* settings and params past the first are deprecated\n        // TODO sweet jesus we need to break some of this out\n        show: function( theme, msgText, textonly ) {\n            var textVisible, message, loadSettings;\n\n            this.resetHtml();\n\n            // use the prototype options so that people can set them globally at\n            // mobile init. Consistency, it's what's for dinner\n            if ( $.type( theme ) === \"object\" ) {\n                loadSettings = $.extend( {}, this.options, theme );\n\n                theme = loadSettings.theme;\n            } else {\n                loadSettings = this.options;\n\n                // here we prefer the theme value passed as a string argument, then\n                // we prefer the global option because we can't use undefined default\n                // prototype options, then the prototype option\n                theme = theme || loadSettings.theme;\n            }\n\n            // set the message text, prefer the param, then the settings object\n            // then loading message\n            message = msgText || ( loadSettings.text === false ? \"\" : loadSettings.text );\n\n            // prepare the dom\n            $html.addClass( \"ui-loading\" );\n\n            textVisible = loadSettings.textVisible;\n\n            // add the proper css given the options (theme, text, etc)\n            // Force text visibility if the second argument was supplied, or\n            // if the text was explicitly set in the object args\n            this.element.attr(\"class\", loaderClass +\n                \" ui-corner-all ui-body-\" + theme +\n                \" ui-loader-\" + ( textVisible || msgText || theme.text ? \"verbose\" : \"default\" ) +\n                ( loadSettings.textonly || textonly ? \" ui-loader-textonly\" : \"\" ) );\n\n            // TODO verify that jquery.fn.html is ok to use in both cases here\n            //      this might be overly defensive in preventing unknowing xss\n            // if the html attribute is defined on the loading settings, use that\n            // otherwise use the fallbacks from above\n            if ( loadSettings.html ) {\n                this.element.html( loadSettings.html );\n            } else {\n                this.element.find( \"h1\" ).text( message );\n            }\n\n            // If the pagecontainer widget has been defined we may use the :mobile-pagecontainer\n            // and attach to the element on which the pagecontainer widget has been defined. If not,\n            // we attach to the body.\n            this.element.appendTo( $.mobile.pagecontainer ?\n                $( \":mobile-pagecontainer\" ) : $( \"body\" ) );\n\n            // check that the loader is visible\n            this.checkLoaderPosition();\n\n            // on scroll check the loader position\n            this.window.bind( \"scroll\", $.proxy( this.checkLoaderPosition, this ) );\n        },\n\n        hide: function() {\n            $html.removeClass( \"ui-loading\" );\n\n            if ( this.options.text ) {\n                this.element.removeClass( \"ui-loader-fakefix\" );\n            }\n\n            this.window.unbind( \"scroll\", this.fakeFixLoader );\n            this.window.unbind( \"scroll\", this.checkLoaderPosition );\n        }\n    });\n\n})(jQuery, this);\n\n\n/*!\n * jQuery hashchange event - v1.3 - 7/21/2010\n * http://benalman.com/projects/jquery-hashchange-plugin/\n * \n * Copyright (c) 2010 \"Cowboy\" Ben Alman\n * Dual licensed under the MIT and GPL licenses.\n * http://benalman.com/about/license/\n */\n\n// Script: jQuery hashchange event\n//\n// *Version: 1.3, Last updated: 7/21/2010*\n// \n// Project Home - http://benalman.com/projects/jquery-hashchange-plugin/\n// GitHub       - http://github.com/cowboy/jquery-hashchange/\n// Source       - http://github.com/cowboy/jquery-hashchange/raw/master/jquery.ba-hashchange.js\n// (Minified)   - http://github.com/cowboy/jquery-hashchange/raw/master/jquery.ba-hashchange.min.js (0.8kb gzipped)\n// \n// About: License\n// \n// Copyright (c) 2010 \"Cowboy\" Ben Alman,\n// Dual licensed under the MIT and GPL licenses.\n// http://benalman.com/about/license/\n// \n// About: Examples\n// \n// These working examples, complete with fully commented code, illustrate a few\n// ways in which this plugin can be used.\n// \n// hashchange event - http://benalman.com/code/projects/jquery-hashchange/examples/hashchange/\n// document.domain - http://benalman.com/code/projects/jquery-hashchange/examples/document_domain/\n// \n// About: Support and Testing\n// \n// Information about what version or versions of jQuery this plugin has been\n// tested with, what browsers it has been tested in, and where the unit tests\n// reside (so you can test it yourself).\n// \n// jQuery Versions - 1.2.6, 1.3.2, 1.4.1, 1.4.2\n// Browsers Tested - Internet Explorer 6-8, Firefox 2-4, Chrome 5-6, Safari 3.2-5,\n//                   Opera 9.6-10.60, iPhone 3.1, Android 1.6-2.2, BlackBerry 4.6-5.\n// Unit Tests      - http://benalman.com/code/projects/jquery-hashchange/unit/\n// \n// About: Known issues\n// \n// While this jQuery hashchange event implementation is quite stable and\n// robust, there are a few unfortunate browser bugs surrounding expected\n// hashchange event-based behaviors, independent of any JavaScript\n// window.onhashchange abstraction. See the following examples for more\n// information:\n// \n// Chrome: Back Button - http://benalman.com/code/projects/jquery-hashchange/examples/bug-chrome-back-button/\n// Firefox: Remote XMLHttpRequest - http://benalman.com/code/projects/jquery-hashchange/examples/bug-firefox-remote-xhr/\n// WebKit: Back Button in an Iframe - http://benalman.com/code/projects/jquery-hashchange/examples/bug-webkit-hash-iframe/\n// Safari: Back Button from a different domain - http://benalman.com/code/projects/jquery-hashchange/examples/bug-safari-back-from-diff-domain/\n// \n// Also note that should a browser natively support the window.onhashchange \n// event, but not report that it does, the fallback polling loop will be used.\n// \n// About: Release History\n// \n// 1.3   - (7/21/2010) Reorganized IE6/7 Iframe code to make it more\n//         \"removable\" for mobile-only development. Added IE6/7 document.title\n//         support. Attempted to make Iframe as hidden as possible by using\n//         techniques from http://www.paciellogroup.com/blog/?p=604. Added \n//         support for the \"shortcut\" format $(window).hashchange( fn ) and\n//         $(window).hashchange() like jQuery provides for built-in events.\n//         Renamed jQuery.hashchangeDelay to <jQuery.fn.hashchange.delay> and\n//         lowered its default value to 50. Added <jQuery.fn.hashchange.domain>\n//         and <jQuery.fn.hashchange.src> properties plus document-domain.html\n//         file to address access denied issues when setting document.domain in\n//         IE6/7.\n// 1.2   - (2/11/2010) Fixed a bug where coming back to a page using this plugin\n//         from a page on another domain would cause an error in Safari 4. Also,\n//         IE6/7 Iframe is now inserted after the body (this actually works),\n//         which prevents the page from scrolling when the event is first bound.\n//         Event can also now be bound before DOM ready, but it won't be usable\n//         before then in IE6/7.\n// 1.1   - (1/21/2010) Incorporated document.documentMode test to fix IE8 bug\n//         where browser version is incorrectly reported as 8.0, despite\n//         inclusion of the X-UA-Compatible IE=EmulateIE7 meta tag.\n// 1.0   - (1/9/2010) Initial Release. Broke out the jQuery BBQ event.special\n//         window.onhashchange functionality into a separate plugin for users\n//         who want just the basic event & back button support, without all the\n//         extra awesomeness that BBQ provides. This plugin will be included as\n//         part of jQuery BBQ, but also be available separately.\n\n(function($,window,undefined){\n  '$:nomunge'; // Used by YUI compressor.\n  \n  // Reused string.\n  var str_hashchange = 'hashchange',\n    \n    // Method / object references.\n    doc = document,\n    fake_onhashchange,\n    special = $.event.special,\n    \n    // Does the browser support window.onhashchange? Note that IE8 running in\n    // IE7 compatibility mode reports true for 'onhashchange' in window, even\n    // though the event isn't supported, so also test document.documentMode.\n    doc_mode = doc.documentMode,\n    supports_onhashchange = 'on' + str_hashchange in window && ( doc_mode === undefined || doc_mode > 7 );\n  \n  // Get location.hash (or what you'd expect location.hash to be) sans any\n  // leading #. Thanks for making this necessary, Firefox!\n  function get_fragment( url ) {\n    url = url || location.href;\n    return '#' + url.replace( /^[^#]*#?(.*)$/, '$1' );\n  };\n  \n  // Method: jQuery.fn.hashchange\n  // \n  // Bind a handler to the window.onhashchange event or trigger all bound\n  // window.onhashchange event handlers. This behavior is consistent with\n  // jQuery's built-in event handlers.\n  // \n  // Usage:\n  // \n  // > jQuery(window).hashchange( [ handler ] );\n  // \n  // Arguments:\n  // \n  //  handler - (Function) Optional handler to be bound to the hashchange\n  //    event. This is a \"shortcut\" for the more verbose form:\n  //    jQuery(window).bind( 'hashchange', handler ). If handler is omitted,\n  //    all bound window.onhashchange event handlers will be triggered. This\n  //    is a shortcut for the more verbose\n  //    jQuery(window).trigger( 'hashchange' ). These forms are described in\n  //    the <hashchange event> section.\n  // \n  // Returns:\n  // \n  //  (jQuery) The initial jQuery collection of elements.\n  \n  // Allow the \"shortcut\" format $(elem).hashchange( fn ) for binding and\n  // $(elem).hashchange() for triggering, like jQuery does for built-in events.\n  $.fn[ str_hashchange ] = function( fn ) {\n    return fn ? this.bind( str_hashchange, fn ) : this.trigger( str_hashchange );\n  };\n  \n  // Property: jQuery.fn.hashchange.delay\n  // \n  // The numeric interval (in milliseconds) at which the <hashchange event>\n  // polling loop executes. Defaults to 50.\n  \n  // Property: jQuery.fn.hashchange.domain\n  // \n  // If you're setting document.domain in your JavaScript, and you want hash\n  // history to work in IE6/7, not only must this property be set, but you must\n  // also set document.domain BEFORE jQuery is loaded into the page. This\n  // property is only applicable if you are supporting IE6/7 (or IE8 operating\n  // in \"IE7 compatibility\" mode).\n  // \n  // In addition, the <jQuery.fn.hashchange.src> property must be set to the\n  // path of the included \"document-domain.html\" file, which can be renamed or\n  // modified if necessary (note that the document.domain specified must be the\n  // same in both your main JavaScript as well as in this file).\n  // \n  // Usage:\n  // \n  // jQuery.fn.hashchange.domain = document.domain;\n  \n  // Property: jQuery.fn.hashchange.src\n  // \n  // If, for some reason, you need to specify an Iframe src file (for example,\n  // when setting document.domain as in <jQuery.fn.hashchange.domain>), you can\n  // do so using this property. Note that when using this property, history\n  // won't be recorded in IE6/7 until the Iframe src file loads. This property\n  // is only applicable if you are supporting IE6/7 (or IE8 operating in \"IE7\n  // compatibility\" mode).\n  // \n  // Usage:\n  // \n  // jQuery.fn.hashchange.src = 'path/to/file.html';\n  \n  $.fn[ str_hashchange ].delay = 50;\n  /*\n  $.fn[ str_hashchange ].domain = null;\n  $.fn[ str_hashchange ].src = null;\n  */\n  \n  // Event: hashchange event\n  // \n  // Fired when location.hash changes. In browsers that support it, the native\n  // HTML5 window.onhashchange event is used, otherwise a polling loop is\n  // initialized, running every <jQuery.fn.hashchange.delay> milliseconds to\n  // see if the hash has changed. In IE6/7 (and IE8 operating in \"IE7\n  // compatibility\" mode), a hidden Iframe is created to allow the back button\n  // and hash-based history to work.\n  // \n  // Usage as described in <jQuery.fn.hashchange>:\n  // \n  // > // Bind an event handler.\n  // > jQuery(window).hashchange( function(e) {\n  // >   var hash = location.hash;\n  // >   ...\n  // > });\n  // > \n  // > // Manually trigger the event handler.\n  // > jQuery(window).hashchange();\n  // \n  // A more verbose usage that allows for event namespacing:\n  // \n  // > // Bind an event handler.\n  // > jQuery(window).bind( 'hashchange', function(e) {\n  // >   var hash = location.hash;\n  // >   ...\n  // > });\n  // > \n  // > // Manually trigger the event handler.\n  // > jQuery(window).trigger( 'hashchange' );\n  // \n  // Additional Notes:\n  // \n  // * The polling loop and Iframe are not created until at least one handler\n  //   is actually bound to the 'hashchange' event.\n  // * If you need the bound handler(s) to execute immediately, in cases where\n  //   a location.hash exists on page load, via bookmark or page refresh for\n  //   example, use jQuery(window).hashchange() or the more verbose \n  //   jQuery(window).trigger( 'hashchange' ).\n  // * The event can be bound before DOM ready, but since it won't be usable\n  //   before then in IE6/7 (due to the necessary Iframe), recommended usage is\n  //   to bind it inside a DOM ready handler.\n  \n  // Override existing $.event.special.hashchange methods (allowing this plugin\n  // to be defined after jQuery BBQ in BBQ's source code).\n  special[ str_hashchange ] = $.extend( special[ str_hashchange ], {\n    \n    // Called only when the first 'hashchange' event is bound to window.\n    setup: function() {\n      // If window.onhashchange is supported natively, there's nothing to do..\n      if ( supports_onhashchange ) { return false; }\n      \n      // Otherwise, we need to create our own. And we don't want to call this\n      // until the user binds to the event, just in case they never do, since it\n      // will create a polling loop and possibly even a hidden Iframe.\n      $( fake_onhashchange.start );\n    },\n    \n    // Called only when the last 'hashchange' event is unbound from window.\n    teardown: function() {\n      // If window.onhashchange is supported natively, there's nothing to do..\n      if ( supports_onhashchange ) { return false; }\n      \n      // Otherwise, we need to stop ours (if possible).\n      $( fake_onhashchange.stop );\n    }\n    \n  });\n  \n  // fake_onhashchange does all the work of triggering the window.onhashchange\n  // event for browsers that don't natively support it, including creating a\n  // polling loop to watch for hash changes and in IE 6/7 creating a hidden\n  // Iframe to enable back and forward.\n  fake_onhashchange = (function(){\n    var self = {},\n      timeout_id,\n      \n      // Remember the initial hash so it doesn't get triggered immediately.\n      last_hash = get_fragment(),\n      \n      fn_retval = function(val){ return val; },\n      history_set = fn_retval,\n      history_get = fn_retval;\n    \n    // Start the polling loop.\n    self.start = function() {\n      timeout_id || poll();\n    };\n    \n    // Stop the polling loop.\n    self.stop = function() {\n      timeout_id && clearTimeout( timeout_id );\n      timeout_id = undefined;\n    };\n    \n    // This polling loop checks every $.fn.hashchange.delay milliseconds to see\n    // if location.hash has changed, and triggers the 'hashchange' event on\n    // window when necessary.\n    function poll() {\n      var hash = get_fragment(),\n        history_hash = history_get( last_hash );\n      \n      if ( hash !== last_hash ) {\n        history_set( last_hash = hash, history_hash );\n        \n        $(window).trigger( str_hashchange );\n        \n      } else if ( history_hash !== last_hash ) {\n        location.href = location.href.replace( /#.*/, '' ) + history_hash;\n      }\n      \n      timeout_id = setTimeout( poll, $.fn[ str_hashchange ].delay );\n    };\n    \n    // vvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvv\n    // vvvvvvvvvvvvvvvvvvv REMOVE IF NOT SUPPORTING IE6/7/8 vvvvvvvvvvvvvvvvvvv\n    // vvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvv\n    window.attachEvent && !window.addEventListener && !supports_onhashchange && (function(){\n      // Not only do IE6/7 need the \"magical\" Iframe treatment, but so does IE8\n      // when running in \"IE7 compatibility\" mode.\n      \n      var iframe,\n        iframe_src;\n      \n      // When the event is bound and polling starts in IE 6/7, create a hidden\n      // Iframe for history handling.\n      self.start = function(){\n        if ( !iframe ) {\n          iframe_src = $.fn[ str_hashchange ].src;\n          iframe_src = iframe_src && iframe_src + get_fragment();\n          \n          // Create hidden Iframe. Attempt to make Iframe as hidden as possible\n          // by using techniques from http://www.paciellogroup.com/blog/?p=604.\n          iframe = $('<iframe tabindex=\"-1\" title=\"empty\"/>').hide()\n            \n            // When Iframe has completely loaded, initialize the history and\n            // start polling.\n            .one( 'load', function(){\n              iframe_src || history_set( get_fragment() );\n              poll();\n            })\n            \n            // Load Iframe src if specified, otherwise nothing.\n            .attr( 'src', iframe_src || 'javascript:0' )\n            \n            // Append Iframe after the end of the body to prevent unnecessary\n            // initial page scrolling (yes, this works).\n            .insertAfter( 'body' )[0].contentWindow;\n          \n          // Whenever `document.title` changes, update the Iframe's title to\n          // prettify the back/next history menu entries. Since IE sometimes\n          // errors with \"Unspecified error\" the very first time this is set\n          // (yes, very useful) wrap this with a try/catch block.\n          doc.onpropertychange = function(){\n            try {\n              if ( event.propertyName === 'title' ) {\n                iframe.document.title = doc.title;\n              }\n            } catch(e) {}\n          };\n          \n        }\n      };\n      \n      // Override the \"stop\" method since an IE6/7 Iframe was created. Even\n      // if there are no longer any bound event handlers, the polling loop\n      // is still necessary for back/next to work at all!\n      self.stop = fn_retval;\n      \n      // Get history by looking at the hidden Iframe's location.hash.\n      history_get = function() {\n        return get_fragment( iframe.location.href );\n      };\n      \n      // Set a new history item by opening and then closing the Iframe\n      // document, *then* setting its location.hash. If document.domain has\n      // been set, update that as well.\n      history_set = function( hash, history_hash ) {\n        var iframe_doc = iframe.document,\n          domain = $.fn[ str_hashchange ].domain;\n        \n        if ( hash !== history_hash ) {\n          // Update Iframe with any initial `document.title` that might be set.\n          iframe_doc.title = doc.title;\n          \n          // Opening the Iframe's document after it has been closed is what\n          // actually adds a history entry.\n          iframe_doc.open();\n          \n          // Set document.domain for the Iframe document as well, if necessary.\n          domain && iframe_doc.write( '\\x3cscript>document.domain=\"' + domain + '\"\\x3c/script>' );\n          \n          iframe_doc.close();\n          \n          // Update the Iframe's hash, for great justice.\n          iframe.location.hash = hash;\n        }\n      };\n      \n    })();\n    // ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    // ^^^^^^^^^^^^^^^^^^^ REMOVE IF NOT SUPPORTING IE6/7/8 ^^^^^^^^^^^^^^^^^^^\n    // ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    \n    return self;\n  })();\n  \n})(jQuery,this);\n\n\n(function( $, undefined ) {\n\n    /*! matchMedia() polyfill - Test a CSS media type/query in JS. Authors & copyright (c) 2012: Scott Jehl, Paul Irish, Nicholas Zakas. Dual MIT/BSD license */\n    window.matchMedia = window.matchMedia || (function( doc, undefined ) {\n\n        var bool,\n            docElem = doc.documentElement,\n            refNode = docElem.firstElementChild || docElem.firstChild,\n            // fakeBody required for <FF4 when executed in <head>\n            fakeBody = doc.createElement( \"body\" ),\n            div = doc.createElement( \"div\" );\n\n        div.id = \"mq-test-1\";\n        div.style.cssText = \"position:absolute;top:-100em\";\n        fakeBody.style.background = \"none\";\n        fakeBody.appendChild(div);\n\n        return function(q){\n\n            div.innerHTML = \"&shy;<style media=\\\"\" + q + \"\\\"> #mq-test-1 { width: 42px; }</style>\";\n\n            docElem.insertBefore( fakeBody, refNode );\n            bool = div.offsetWidth === 42;\n            docElem.removeChild( fakeBody );\n\n            return {\n                matches: bool,\n                media: q\n            };\n\n        };\n\n    }( document ));\n\n    // $.mobile.media uses matchMedia to return a boolean.\n    $.mobile.media = function( q ) {\n        return window.matchMedia( q ).matches;\n    };\n\n})(jQuery);\n\n    (function( $, undefined ) {\n        var support = {\n            touch: \"ontouchend\" in document\n        };\n\n        $.mobile.support = $.mobile.support || {};\n        $.extend( $.support, support );\n        $.extend( $.mobile.support, support );\n    }( jQuery ));\n\n    (function( $, undefined ) {\n        $.extend( $.support, {\n            orientation: \"orientation\" in window && \"onorientationchange\" in window\n        });\n    }( jQuery ));\n\n(function( $, undefined ) {\n\n// thx Modernizr\nfunction propExists( prop ) {\n    var uc_prop = prop.charAt( 0 ).toUpperCase() + prop.substr( 1 ),\n        props = ( prop + \" \" + vendors.join( uc_prop + \" \" ) + uc_prop ).split( \" \" ),\n        v;\n\n    for ( v in props ) {\n        if ( fbCSS[ props[ v ] ] !== undefined ) {\n            return true;\n        }\n    }\n}\n\nvar fakeBody = $( \"<body>\" ).prependTo( \"html\" ),\n    fbCSS = fakeBody[ 0 ].style,\n    vendors = [ \"Webkit\", \"Moz\", \"O\" ],\n    webos = \"palmGetResource\" in window, //only used to rule out scrollTop\n    operamini = window.operamini && ({}).toString.call( window.operamini ) === \"[object OperaMini]\",\n    bb = window.blackberry && !propExists( \"-webkit-transform\" ), //only used to rule out box shadow, as it's filled opaque on BB 5 and lower\n    nokiaLTE7_3;\n\n// inline SVG support test\nfunction inlineSVG() {\n    // Thanks Modernizr & Erik Dahlstrom\n    var w = window,\n        svg = !!w.document.createElementNS && !!w.document.createElementNS( \"http://www.w3.org/2000/svg\", \"svg\" ).createSVGRect && !( w.opera && navigator.userAgent.indexOf( \"Chrome\" ) === -1 ),\n        support = function( data ) {\n            if ( !( data && svg ) ) {\n                $( \"html\" ).addClass( \"ui-nosvg\" );\n            }\n        },\n        img = new w.Image();\n\n    img.onerror = function() {\n        support( false );\n    };\n    img.onload = function() {\n        support( img.width === 1 && img.height === 1 );\n    };\n    img.src = \"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==\";\n}\n\nfunction transform3dTest() {\n    var mqProp = \"transform-3d\",\n        // Because the `translate3d` test below throws false positives in Android:\n        ret = $.mobile.media( \"(-\" + vendors.join( \"-\" + mqProp + \"),(-\" ) + \"-\" + mqProp + \"),(\" + mqProp + \")\" ),\n        el, transforms, t;\n\n    if ( ret ) {\n        return !!ret;\n    }\n\n    el = document.createElement( \"div\" );\n    transforms = {\n        // We’re omitting Opera for the time being; MS uses unprefixed.\n        \"MozTransform\": \"-moz-transform\",\n        \"transform\": \"transform\"\n    };\n\n    fakeBody.append( el );\n\n    for ( t in transforms ) {\n        if ( el.style[ t ] !== undefined ) {\n            el.style[ t ] = \"translate3d( 100px, 1px, 1px )\";\n            ret = window.getComputedStyle( el ).getPropertyValue( transforms[ t ] );\n        }\n    }\n    return ( !!ret && ret !== \"none\" );\n}\n\n// Test for dynamic-updating base tag support ( allows us to avoid href,src attr rewriting )\nfunction baseTagTest() {\n    var fauxBase = location.protocol + \"//\" + location.host + location.pathname + \"ui-dir/\",\n        base = $( \"head base\" ),\n        fauxEle = null,\n        href = \"\",\n        link, rebase;\n\n    if ( !base.length ) {\n        base = fauxEle = $( \"<base>\", { \"href\": fauxBase }).appendTo( \"head\" );\n    } else {\n        href = base.attr( \"href\" );\n    }\n\n    link = $( \"<a href='testurl' />\" ).prependTo( fakeBody );\n    rebase = link[ 0 ].href;\n    base[ 0 ].href = href || location.pathname;\n\n    if ( fauxEle ) {\n        fauxEle.remove();\n    }\n    return rebase.indexOf( fauxBase ) === 0;\n}\n\n// Thanks Modernizr\nfunction cssPointerEventsTest() {\n    var element = document.createElement( \"x\" ),\n        documentElement = document.documentElement,\n        getComputedStyle = window.getComputedStyle,\n        supports;\n\n    if ( !( \"pointerEvents\" in element.style ) ) {\n        return false;\n    }\n\n    element.style.pointerEvents = \"auto\";\n    element.style.pointerEvents = \"x\";\n    documentElement.appendChild( element );\n    supports = getComputedStyle &&\n    getComputedStyle( element, \"\" ).pointerEvents === \"auto\";\n    documentElement.removeChild( element );\n    return !!supports;\n}\n\nfunction boundingRect() {\n    var div = document.createElement( \"div\" );\n    return typeof div.getBoundingClientRect !== \"undefined\";\n}\n\n// non-UA-based IE version check by James Padolsey, modified by jdalton - from http://gist.github.com/527683\n// allows for inclusion of IE 6+, including Windows Mobile 7\n$.extend( $.mobile, { browser: {} } );\n$.mobile.browser.oldIE = (function() {\n    var v = 3,\n        div = document.createElement( \"div\" ),\n        a = div.all || [];\n\n    do {\n        div.innerHTML = \"<!--[if gt IE \" + ( ++v ) + \"]><br><![endif]-->\";\n    } while( a[0] );\n\n    return v > 4 ? v : !v;\n})();\n\nfunction fixedPosition() {\n    var w = window,\n        ua = navigator.userAgent,\n        platform = navigator.platform,\n        // Rendering engine is Webkit, and capture major version\n        wkmatch = ua.match( /AppleWebKit\\/([0-9]+)/ ),\n        wkversion = !!wkmatch && wkmatch[ 1 ],\n        ffmatch = ua.match( /Fennec\\/([0-9]+)/ ),\n        ffversion = !!ffmatch && ffmatch[ 1 ],\n        operammobilematch = ua.match( /Opera Mobi\\/([0-9]+)/ ),\n        omversion = !!operammobilematch && operammobilematch[ 1 ];\n\n    if (\n        // iOS 4.3 and older : Platform is iPhone/Pad/Touch and Webkit version is less than 534 (ios5)\n        ( ( platform.indexOf( \"iPhone\" ) > -1 || platform.indexOf( \"iPad\" ) > -1  || platform.indexOf( \"iPod\" ) > -1 ) && wkversion && wkversion < 534 ) ||\n        // Opera Mini\n        ( w.operamini && ({}).toString.call( w.operamini ) === \"[object OperaMini]\" ) ||\n        ( operammobilematch && omversion < 7458 )    ||\n        //Android lte 2.1: Platform is Android and Webkit version is less than 533 (Android 2.2)\n        ( ua.indexOf( \"Android\" ) > -1 && wkversion && wkversion < 533 ) ||\n        // Firefox Mobile before 6.0 -\n        ( ffversion && ffversion < 6 ) ||\n        // WebOS less than 3\n        ( \"palmGetResource\" in window && wkversion && wkversion < 534 )    ||\n        // MeeGo\n        ( ua.indexOf( \"MeeGo\" ) > -1 && ua.indexOf( \"NokiaBrowser/8.5.0\" ) > -1 ) ) {\n        return false;\n    }\n\n    return true;\n}\n\n$.extend( $.support, {\n    // Note, Chrome for iOS has an extremely quirky implementation of popstate.\n    // We've chosen to take the shortest path to a bug fix here for issue #5426\n    // See the following link for information about the regex chosen\n    // https://developers.google.com/chrome/mobile/docs/user-agent#chrome_for_ios_user-agent\n    pushState: \"pushState\" in history &&\n        \"replaceState\" in history &&\n        // When running inside a FF iframe, calling replaceState causes an error\n        !( window.navigator.userAgent.indexOf( \"Firefox\" ) >= 0 && window.top !== window ) &&\n        ( window.navigator.userAgent.search(/CriOS/) === -1 ),\n\n    mediaquery: $.mobile.media( \"only all\" ),\n    cssPseudoElement: !!propExists( \"content\" ),\n    touchOverflow: !!propExists( \"overflowScrolling\" ),\n    cssTransform3d: transform3dTest(),\n    boxShadow: !!propExists( \"boxShadow\" ) && !bb,\n    fixedPosition: fixedPosition(),\n    scrollTop: (\"pageXOffset\" in window ||\n        \"scrollTop\" in document.documentElement ||\n        \"scrollTop\" in fakeBody[ 0 ]) && !webos && !operamini,\n\n    dynamicBaseTag: baseTagTest(),\n    cssPointerEvents: cssPointerEventsTest(),\n    boundingRect: boundingRect(),\n    inlineSVG: inlineSVG\n});\n\nfakeBody.remove();\n\n// $.mobile.ajaxBlacklist is used to override ajaxEnabled on platforms that have known conflicts with hash history updates (BB5, Symbian)\n// or that generally work better browsing in regular http for full page refreshes (Opera Mini)\n// Note: This detection below is used as a last resort.\n// We recommend only using these detection methods when all other more reliable/forward-looking approaches are not possible\nnokiaLTE7_3 = (function() {\n\n    var ua = window.navigator.userAgent;\n\n    //The following is an attempt to match Nokia browsers that are running Symbian/s60, with webkit, version 7.3 or older\n    return ua.indexOf( \"Nokia\" ) > -1 &&\n            ( ua.indexOf( \"Symbian/3\" ) > -1 || ua.indexOf( \"Series60/5\" ) > -1 ) &&\n            ua.indexOf( \"AppleWebKit\" ) > -1 &&\n            ua.match( /(BrowserNG|NokiaBrowser)\\/7\\.[0-3]/ );\n})();\n\n// Support conditions that must be met in order to proceed\n// default enhanced qualifications are media query support OR IE 7+\n\n$.mobile.gradeA = function() {\n    return ( ( $.support.mediaquery && $.support.cssPseudoElement ) || $.mobile.browser.oldIE && $.mobile.browser.oldIE >= 8 ) && ( $.support.boundingRect || $.fn.jquery.match(/1\\.[0-7+]\\.[0-9+]?/) !== null );\n};\n\n$.mobile.ajaxBlacklist =\n            // BlackBerry browsers, pre-webkit\n            window.blackberry && !window.WebKitPoint ||\n            // Opera Mini\n            operamini ||\n            // Symbian webkits pre 7.3\n            nokiaLTE7_3;\n\n// Lastly, this workaround is the only way we've found so far to get pre 7.3 Symbian webkit devices\n// to render the stylesheets when they're referenced before this script, as we'd recommend doing.\n// This simply reappends the CSS in place, which for some reason makes it apply\nif ( nokiaLTE7_3 ) {\n    $(function() {\n        $( \"head link[rel='stylesheet']\" ).attr( \"rel\", \"alternate stylesheet\" ).attr( \"rel\", \"stylesheet\" );\n    });\n}\n\n// For ruling out shadows via css\nif ( !$.support.boxShadow ) {\n    $( \"html\" ).addClass( \"ui-noboxshadow\" );\n}\n\n})( jQuery );\n\n\n(function( $, undefined ) {\n    var $win = $.mobile.window, self,\n        dummyFnToInitNavigate = function() {\n        };\n\n    $.event.special.beforenavigate = {\n        setup: function() {\n            $win.on( \"navigate\", dummyFnToInitNavigate );\n        },\n\n        teardown: function() {\n            $win.off( \"navigate\", dummyFnToInitNavigate );\n        }\n    };\n\n    $.event.special.navigate = self = {\n        bound: false,\n\n        pushStateEnabled: true,\n\n        originalEventName: undefined,\n\n        // If pushstate support is present and push state support is defined to\n        // be true on the mobile namespace.\n        isPushStateEnabled: function() {\n            return $.support.pushState &&\n                $.mobile.pushStateEnabled === true &&\n                this.isHashChangeEnabled();\n        },\n\n        // !! assumes mobile namespace is present\n        isHashChangeEnabled: function() {\n            return $.mobile.hashListeningEnabled === true;\n        },\n\n        // TODO a lot of duplication between popstate and hashchange\n        popstate: function( event ) {\n            var newEvent = new $.Event( \"navigate\" ),\n                beforeNavigate = new $.Event( \"beforenavigate\" ),\n                state = event.originalEvent.state || {};\n\n            beforeNavigate.originalEvent = event;\n            $win.trigger( beforeNavigate );\n\n            if ( beforeNavigate.isDefaultPrevented() ) {\n                return;\n            }\n\n            if ( event.historyState ) {\n                $.extend(state, event.historyState);\n            }\n\n            // Make sure the original event is tracked for the end\n            // user to inspect incase they want to do something special\n            newEvent.originalEvent = event;\n\n            // NOTE we let the current stack unwind because any assignment to\n            //      location.hash will stop the world and run this event handler. By\n            //      doing this we create a similar behavior to hashchange on hash\n            //      assignment\n            setTimeout(function() {\n                $win.trigger( newEvent, {\n                    state: state\n                });\n            }, 0);\n        },\n\n        hashchange: function( event /*, data */ ) {\n            var newEvent = new $.Event( \"navigate\" ),\n                beforeNavigate = new $.Event( \"beforenavigate\" );\n\n            beforeNavigate.originalEvent = event;\n            $win.trigger( beforeNavigate );\n\n            if ( beforeNavigate.isDefaultPrevented() ) {\n                return;\n            }\n\n            // Make sure the original event is tracked for the end\n            // user to inspect incase they want to do something special\n            newEvent.originalEvent = event;\n\n            // Trigger the hashchange with state provided by the user\n            // that altered the hash\n            $win.trigger( newEvent, {\n                // Users that want to fully normalize the two events\n                // will need to do history management down the stack and\n                // add the state to the event before this binding is fired\n                // TODO consider allowing for the explicit addition of callbacks\n                //      to be fired before this value is set to avoid event timing issues\n                state: event.hashchangeState || {}\n            });\n        },\n\n        // TODO We really only want to set this up once\n        //      but I'm not clear if there's a beter way to achieve\n        //      this with the jQuery special event structure\n        setup: function( /* data, namespaces */ ) {\n            if ( self.bound ) {\n                return;\n            }\n\n            self.bound = true;\n\n            if ( self.isPushStateEnabled() ) {\n                self.originalEventName = \"popstate\";\n                $win.bind( \"popstate.navigate\", self.popstate );\n            } else if ( self.isHashChangeEnabled() ) {\n                self.originalEventName = \"hashchange\";\n                $win.bind( \"hashchange.navigate\", self.hashchange );\n            }\n        }\n    };\n})( jQuery );\n\n\n\n(function( $, undefined ) {\n        var path, $base, dialogHashKey = \"&ui-state=dialog\";\n\n        $.mobile.path = path = {\n            uiStateKey: \"&ui-state\",\n\n            // This scary looking regular expression parses an absolute URL or its relative\n            // variants (protocol, site, document, query, and hash), into the various\n            // components (protocol, host, path, query, fragment, etc that make up the\n            // URL as well as some other commonly used sub-parts. When used with RegExp.exec()\n            // or String.match, it parses the URL into a results array that looks like this:\n            //\n            //     [0]: http://jblas:password@mycompany.com:8080/mail/inbox?msg=1234&type=unread#msg-content\n            //     [1]: http://jblas:password@mycompany.com:8080/mail/inbox?msg=1234&type=unread\n            //     [2]: http://jblas:password@mycompany.com:8080/mail/inbox\n            //     [3]: http://jblas:password@mycompany.com:8080\n            //     [4]: http:\n            //     [5]: //\n            //     [6]: jblas:password@mycompany.com:8080\n            //     [7]: jblas:password\n            //     [8]: jblas\n            //     [9]: password\n            //    [10]: mycompany.com:8080\n            //    [11]: mycompany.com\n            //    [12]: 8080\n            //    [13]: /mail/inbox\n            //    [14]: /mail/\n            //    [15]: inbox\n            //    [16]: ?msg=1234&type=unread\n            //    [17]: #msg-content\n            //\n            urlParseRE: /^\\s*(((([^:\\/#\\?]+:)?(?:(\\/\\/)((?:(([^:@\\/#\\?]+)(?:\\:([^:@\\/#\\?]+))?)@)?(([^:\\/#\\?\\]\\[]+|\\[[^\\/\\]@#?]+\\])(?:\\:([0-9]+))?))?)?)?((\\/?(?:[^\\/\\?#]+\\/+)*)([^\\?#]*)))?(\\?[^#]+)?)(#.*)?/,\n\n            // Abstraction to address xss (Issue #4787) by removing the authority in\n            // browsers that auto-decode it. All references to location.href should be\n            // replaced with a call to this method so that it can be dealt with properly here\n            getLocation: function( url ) {\n                var parsedUrl = this.parseUrl( url || location.href ),\n                    uri = url ? parsedUrl : location,\n\n                    // Make sure to parse the url or the location object for the hash because using\n                    // location.hash is autodecoded in firefox, the rest of the url should be from\n                    // the object (location unless we're testing) to avoid the inclusion of the\n                    // authority\n                    hash = parsedUrl.hash;\n\n                // mimic the browser with an empty string when the hash is empty\n                hash = hash === \"#\" ? \"\" : hash;\n\n                return uri.protocol +\n                    parsedUrl.doubleSlash +\n                    uri.host +\n\n                    // The pathname must start with a slash if there's a protocol, because you\n                    // can't have a protocol followed by a relative path. Also, it's impossible to\n                    // calculate absolute URLs from relative ones if the absolute one doesn't have\n                    // a leading \"/\".\n                    ( ( uri.protocol !== \"\" && uri.pathname.substring( 0, 1 ) !== \"/\" ) ?\n                        \"/\" : \"\" ) +\n                    uri.pathname +\n                    uri.search +\n                    hash;\n            },\n\n            //return the original document url\n            getDocumentUrl: function( asParsedObject ) {\n                return asParsedObject ? $.extend( {}, path.documentUrl ) : path.documentUrl.href;\n            },\n\n            parseLocation: function() {\n                return this.parseUrl( this.getLocation() );\n            },\n\n            //Parse a URL into a structure that allows easy access to\n            //all of the URL components by name.\n            parseUrl: function( url ) {\n                // If we're passed an object, we'll assume that it is\n                // a parsed url object and just return it back to the caller.\n                if ( $.type( url ) === \"object\" ) {\n                    return url;\n                }\n\n                var matches = path.urlParseRE.exec( url || \"\" ) || [];\n\n                    // Create an object that allows the caller to access the sub-matches\n                    // by name. Note that IE returns an empty string instead of undefined,\n                    // like all other browsers do, so we normalize everything so its consistent\n                    // no matter what browser we're running on.\n                    return {\n                        href:         matches[  0 ] || \"\",\n                        hrefNoHash:   matches[  1 ] || \"\",\n                        hrefNoSearch: matches[  2 ] || \"\",\n                        domain:       matches[  3 ] || \"\",\n                        protocol:     matches[  4 ] || \"\",\n                        doubleSlash:  matches[  5 ] || \"\",\n                        authority:    matches[  6 ] || \"\",\n                        username:     matches[  8 ] || \"\",\n                        password:     matches[  9 ] || \"\",\n                        host:         matches[ 10 ] || \"\",\n                        hostname:     matches[ 11 ] || \"\",\n                        port:         matches[ 12 ] || \"\",\n                        pathname:     matches[ 13 ] || \"\",\n                        directory:    matches[ 14 ] || \"\",\n                        filename:     matches[ 15 ] || \"\",\n                        search:       matches[ 16 ] || \"\",\n                        hash:         matches[ 17 ] || \"\"\n                    };\n            },\n\n            //Turn relPath into an asbolute path. absPath is\n            //an optional absolute path which describes what\n            //relPath is relative to.\n            makePathAbsolute: function( relPath, absPath ) {\n                var absStack,\n                    relStack,\n                    i, d;\n\n                if ( relPath && relPath.charAt( 0 ) === \"/\" ) {\n                    return relPath;\n                }\n\n                relPath = relPath || \"\";\n                absPath = absPath ? absPath.replace( /^\\/|(\\/[^\\/]*|[^\\/]+)$/g, \"\" ) : \"\";\n\n                absStack = absPath ? absPath.split( \"/\" ) : [];\n                relStack = relPath.split( \"/\" );\n\n                for ( i = 0; i < relStack.length; i++ ) {\n                    d = relStack[ i ];\n                    switch ( d ) {\n                        case \".\":\n                            break;\n                        case \"..\":\n                            if ( absStack.length ) {\n                                absStack.pop();\n                            }\n                            break;\n                        default:\n                            absStack.push( d );\n                            break;\n                    }\n                }\n                return \"/\" + absStack.join( \"/\" );\n            },\n\n            //Returns true if both urls have the same domain.\n            isSameDomain: function( absUrl1, absUrl2 ) {\n                return path.parseUrl( absUrl1 ).domain.toLowerCase() ===\n                    path.parseUrl( absUrl2 ).domain.toLowerCase();\n            },\n\n            //Returns true for any relative variant.\n            isRelativeUrl: function( url ) {\n                // All relative Url variants have one thing in common, no protocol.\n                return path.parseUrl( url ).protocol === \"\";\n            },\n\n            //Returns true for an absolute url.\n            isAbsoluteUrl: function( url ) {\n                return path.parseUrl( url ).protocol !== \"\";\n            },\n\n            //Turn the specified realtive URL into an absolute one. This function\n            //can handle all relative variants (protocol, site, document, query, fragment).\n            makeUrlAbsolute: function( relUrl, absUrl ) {\n                if ( !path.isRelativeUrl( relUrl ) ) {\n                    return relUrl;\n                }\n\n                if ( absUrl === undefined ) {\n                    absUrl = this.documentBase;\n                }\n\n                var relObj = path.parseUrl( relUrl ),\n                    absObj = path.parseUrl( absUrl ),\n                    protocol = relObj.protocol || absObj.protocol,\n                    doubleSlash = relObj.protocol ? relObj.doubleSlash : ( relObj.doubleSlash || absObj.doubleSlash ),\n                    authority = relObj.authority || absObj.authority,\n                    hasPath = relObj.pathname !== \"\",\n                    pathname = path.makePathAbsolute( relObj.pathname || absObj.filename, absObj.pathname ),\n                    search = relObj.search || ( !hasPath && absObj.search ) || \"\",\n                    hash = relObj.hash;\n\n                return protocol + doubleSlash + authority + pathname + search + hash;\n            },\n\n            //Add search (aka query) params to the specified url.\n            addSearchParams: function( url, params ) {\n                var u = path.parseUrl( url ),\n                    p = ( typeof params === \"object\" ) ? $.param( params ) : params,\n                    s = u.search || \"?\";\n                return u.hrefNoSearch + s + ( s.charAt( s.length - 1 ) !== \"?\" ? \"&\" : \"\" ) + p + ( u.hash || \"\" );\n            },\n\n            convertUrlToDataUrl: function( absUrl ) {\n                var result = absUrl,\n                    u = path.parseUrl( absUrl );\n\n                if ( path.isEmbeddedPage( u ) ) {\n                    // For embedded pages, remove the dialog hash key as in getFilePath(),\n                    // and remove otherwise the Data Url won't match the id of the embedded Page.\n                    result = u.hash\n                        .split( dialogHashKey )[0]\n                        .replace( /^#/, \"\" )\n                        .replace( /\\?.*$/, \"\" );\n                } else if ( path.isSameDomain( u, this.documentBase ) ) {\n                    result = u.hrefNoHash.replace( this.documentBase.domain, \"\" ).split( dialogHashKey )[0];\n                }\n\n                return window.decodeURIComponent( result );\n            },\n\n            //get path from current hash, or from a file path\n            get: function( newPath ) {\n                if ( newPath === undefined ) {\n                    newPath = path.parseLocation().hash;\n                }\n                return path.stripHash( newPath ).replace( /[^\\/]*\\.[^\\/*]+$/, \"\" );\n            },\n\n            //set location hash to path\n            set: function( path ) {\n                location.hash = path;\n            },\n\n            //test if a given url (string) is a path\n            //NOTE might be exceptionally naive\n            isPath: function( url ) {\n                return ( /\\// ).test( url );\n            },\n\n            //return a url path with the window's location protocol/hostname/pathname removed\n            clean: function( url ) {\n                return url.replace( this.documentBase.domain, \"\" );\n            },\n\n            //just return the url without an initial #\n            stripHash: function( url ) {\n                return url.replace( /^#/, \"\" );\n            },\n\n            stripQueryParams: function( url ) {\n                return url.replace( /\\?.*$/, \"\" );\n            },\n\n            //remove the preceding hash, any query params, and dialog notations\n            cleanHash: function( hash ) {\n                return path.stripHash( hash.replace( /\\?.*$/, \"\" ).replace( dialogHashKey, \"\" ) );\n            },\n\n            isHashValid: function( hash ) {\n                return ( /^#[^#]+$/ ).test( hash );\n            },\n\n            //check whether a url is referencing the same domain, or an external domain or different protocol\n            //could be mailto, etc\n            isExternal: function( url ) {\n                var u = path.parseUrl( url );\n\n                return !!( u.protocol &&\n                    ( u.domain.toLowerCase() !== this.documentUrl.domain.toLowerCase() ) );\n            },\n\n            hasProtocol: function( url ) {\n                return ( /^(:?\\w+:)/ ).test( url );\n            },\n\n            isEmbeddedPage: function( url ) {\n                var u = path.parseUrl( url );\n\n                //if the path is absolute, then we need to compare the url against\n                //both the this.documentUrl and the documentBase. The main reason for this\n                //is that links embedded within external documents will refer to the\n                //application document, whereas links embedded within the application\n                //document will be resolved against the document base.\n                if ( u.protocol !== \"\" ) {\n                    return ( !this.isPath(u.hash) && u.hash && ( u.hrefNoHash === this.documentUrl.hrefNoHash || ( this.documentBaseDiffers && u.hrefNoHash === this.documentBase.hrefNoHash ) ) );\n                }\n                return ( /^#/ ).test( u.href );\n            },\n\n            squash: function( url, resolutionUrl ) {\n                var href, cleanedUrl, search, stateIndex, docUrl,\n                    isPath = this.isPath( url ),\n                    uri = this.parseUrl( url ),\n                    preservedHash = uri.hash,\n                    uiState = \"\";\n\n                // produce a url against which we can resolve the provided path\n                if ( !resolutionUrl ) {\n                    if ( isPath ) {\n                        resolutionUrl = path.getLocation();\n                    } else {\n                        docUrl = path.getDocumentUrl( true );\n                        if ( path.isPath( docUrl.hash ) ) {\n                            resolutionUrl = path.squash( docUrl.href );\n                        } else {\n                            resolutionUrl = docUrl.href;\n                        }\n                    }\n                }\n\n                // If the url is anything but a simple string, remove any preceding hash\n                // eg #foo/bar -> foo/bar\n                //    #foo -> #foo\n                cleanedUrl = isPath ? path.stripHash( url ) : url;\n\n                // If the url is a full url with a hash check if the parsed hash is a path\n                // if it is, strip the #, and use it otherwise continue without change\n                cleanedUrl = path.isPath( uri.hash ) ? path.stripHash( uri.hash ) : cleanedUrl;\n\n                // Split the UI State keys off the href\n                stateIndex = cleanedUrl.indexOf( this.uiStateKey );\n\n                // store the ui state keys for use\n                if ( stateIndex > -1 ) {\n                    uiState = cleanedUrl.slice( stateIndex );\n                    cleanedUrl = cleanedUrl.slice( 0, stateIndex );\n                }\n\n                // make the cleanedUrl absolute relative to the resolution url\n                href = path.makeUrlAbsolute( cleanedUrl, resolutionUrl );\n\n                // grab the search from the resolved url since parsing from\n                // the passed url may not yield the correct result\n                search = this.parseUrl( href ).search;\n\n                // TODO all this crap is terrible, clean it up\n                if ( isPath ) {\n                    // reject the hash if it's a path or it's just a dialog key\n                    if ( path.isPath( preservedHash ) || preservedHash.replace(\"#\", \"\").indexOf( this.uiStateKey ) === 0) {\n                        preservedHash = \"\";\n                    }\n\n                    // Append the UI State keys where it exists and it's been removed\n                    // from the url\n                    if ( uiState && preservedHash.indexOf( this.uiStateKey ) === -1) {\n                        preservedHash += uiState;\n                    }\n\n                    // make sure that pound is on the front of the hash\n                    if ( preservedHash.indexOf( \"#\" ) === -1 && preservedHash !== \"\" ) {\n                        preservedHash = \"#\" + preservedHash;\n                    }\n\n                    // reconstruct each of the pieces with the new search string and hash\n                    href = path.parseUrl( href );\n                    href = href.protocol + href.doubleSlash + href.host + href.pathname + search +\n                        preservedHash;\n                } else {\n                    href += href.indexOf( \"#\" ) > -1 ? uiState : \"#\" + uiState;\n                }\n\n                return href;\n            },\n\n            isPreservableHash: function( hash ) {\n                return hash.replace( \"#\", \"\" ).indexOf( this.uiStateKey ) === 0;\n            },\n\n            // Escape weird characters in the hash if it is to be used as a selector\n            hashToSelector: function( hash ) {\n                var hasHash = ( hash.substring( 0, 1 ) === \"#\" );\n                if ( hasHash ) {\n                    hash = hash.substring( 1 );\n                }\n                return ( hasHash ? \"#\" : \"\" ) + hash.replace( /([!\"#$%&'()*+,./:;<=>?@[\\]^`{|}~])/g, \"\\\\$1\" );\n            },\n\n            // return the substring of a filepath before the dialogHashKey, for making a server\n            // request\n            getFilePath: function( path ) {\n                return path && path.split( dialogHashKey )[0];\n            },\n\n            // check if the specified url refers to the first page in the main\n            // application document.\n            isFirstPageUrl: function( url ) {\n                // We only deal with absolute paths.\n                var u = path.parseUrl( path.makeUrlAbsolute( url, this.documentBase ) ),\n\n                    // Does the url have the same path as the document?\n                    samePath = u.hrefNoHash === this.documentUrl.hrefNoHash ||\n                        ( this.documentBaseDiffers &&\n                            u.hrefNoHash === this.documentBase.hrefNoHash ),\n\n                    // Get the first page element.\n                    fp = $.mobile.firstPage,\n\n                    // Get the id of the first page element if it has one.\n                    fpId = fp && fp[0] ? fp[0].id : undefined;\n\n                // The url refers to the first page if the path matches the document and\n                // it either has no hash value, or the hash is exactly equal to the id\n                // of the first page element.\n                return samePath &&\n                    ( !u.hash ||\n                        u.hash === \"#\" ||\n                        ( fpId && u.hash.replace( /^#/, \"\" ) === fpId ) );\n            },\n\n            // Some embedded browsers, like the web view in Phone Gap, allow\n            // cross-domain XHR requests if the document doing the request was loaded\n            // via the file:// protocol. This is usually to allow the application to\n            // \"phone home\" and fetch app specific data. We normally let the browser\n            // handle external/cross-domain urls, but if the allowCrossDomainPages\n            // option is true, we will allow cross-domain http/https requests to go\n            // through our page loading logic.\n            isPermittedCrossDomainRequest: function( docUrl, reqUrl ) {\n                return $.mobile.allowCrossDomainPages &&\n                    (docUrl.protocol === \"file:\" || docUrl.protocol === \"content:\") &&\n                    reqUrl.search( /^https?:/ ) !== -1;\n            }\n        };\n\n        path.documentUrl = path.parseLocation();\n\n        $base = $( \"head\" ).find( \"base\" );\n\n        path.documentBase = $base.length ?\n            path.parseUrl( path.makeUrlAbsolute( $base.attr( \"href\" ), path.documentUrl.href ) ) :\n            path.documentUrl;\n\n        path.documentBaseDiffers = (path.documentUrl.hrefNoHash !== path.documentBase.hrefNoHash);\n\n        //return the original document base url\n        path.getDocumentBase = function( asParsedObject ) {\n            return asParsedObject ? $.extend( {}, path.documentBase ) : path.documentBase.href;\n        };\n\n        // DEPRECATED as of 1.4.0 - remove in 1.5.0\n        $.extend( $.mobile, {\n\n            //return the original document url\n            getDocumentUrl: path.getDocumentUrl,\n\n            //return the original document base url\n            getDocumentBase: path.getDocumentBase\n        });\n})( jQuery );\n\n\n\n(function( $, undefined ) {\n    $.mobile.History = function( stack, index ) {\n        this.stack = stack || [];\n        this.activeIndex = index || 0;\n    };\n\n    $.extend($.mobile.History.prototype, {\n        getActive: function() {\n            return this.stack[ this.activeIndex ];\n        },\n\n        getLast: function() {\n            return this.stack[ this.previousIndex ];\n        },\n\n        getNext: function() {\n            return this.stack[ this.activeIndex + 1 ];\n        },\n\n        getPrev: function() {\n            return this.stack[ this.activeIndex - 1 ];\n        },\n\n        // addNew is used whenever a new page is added\n        add: function( url, data ) {\n            data = data || {};\n\n            //if there's forward history, wipe it\n            if ( this.getNext() ) {\n                this.clearForward();\n            }\n\n            // if the hash is included in the data make sure the shape\n            // is consistent for comparison\n            if ( data.hash && data.hash.indexOf( \"#\" ) === -1) {\n                data.hash = \"#\" + data.hash;\n            }\n\n            data.url = url;\n            this.stack.push( data );\n            this.activeIndex = this.stack.length - 1;\n        },\n\n        //wipe urls ahead of active index\n        clearForward: function() {\n            this.stack = this.stack.slice( 0, this.activeIndex + 1 );\n        },\n\n        find: function( url, stack, earlyReturn ) {\n            stack = stack || this.stack;\n\n            var entry, i, length = stack.length, index;\n\n            for ( i = 0; i < length; i++ ) {\n                entry = stack[i];\n\n                if ( decodeURIComponent(url) === decodeURIComponent(entry.url) ||\n                    decodeURIComponent(url) === decodeURIComponent(entry.hash) ) {\n                    index = i;\n\n                    if ( earlyReturn ) {\n                        return index;\n                    }\n                }\n            }\n\n            return index;\n        },\n\n        closest: function( url ) {\n            var closest, a = this.activeIndex;\n\n            // First, take the slice of the history stack before the current index and search\n            // for a url match. If one is found, we'll avoid avoid looking through forward history\n            // NOTE the preference for backward history movement is driven by the fact that\n            //      most mobile browsers only have a dedicated back button, and users rarely use\n            //      the forward button in desktop browser anyhow\n            closest = this.find( url, this.stack.slice(0, a) );\n\n            // If nothing was found in backward history check forward. The `true`\n            // value passed as the third parameter causes the find method to break\n            // on the first match in the forward history slice. The starting index\n            // of the slice must then be added to the result to get the element index\n            // in the original history stack :( :(\n            //\n            // TODO this is hyper confusing and should be cleaned up (ugh so bad)\n            if ( closest === undefined ) {\n                closest = this.find( url, this.stack.slice(a), true );\n                closest = closest === undefined ? closest : closest + a;\n            }\n\n            return closest;\n        },\n\n        direct: function( opts ) {\n            var newActiveIndex = this.closest( opts.url ), a = this.activeIndex;\n\n            // save new page index, null check to prevent falsey 0 result\n            // record the previous index for reference\n            if ( newActiveIndex !== undefined ) {\n                this.activeIndex = newActiveIndex;\n                this.previousIndex = a;\n            }\n\n            // invoke callbacks where appropriate\n            //\n            // TODO this is also convoluted and confusing\n            if ( newActiveIndex < a ) {\n                ( opts.present || opts.back || $.noop )( this.getActive(), \"back\" );\n            } else if ( newActiveIndex > a ) {\n                ( opts.present || opts.forward || $.noop )( this.getActive(), \"forward\" );\n            } else if ( newActiveIndex === undefined && opts.missing ) {\n                opts.missing( this.getActive() );\n            }\n        }\n    });\n})( jQuery );\n\n\n\n(function( $, undefined ) {\n    var path = $.mobile.path,\n        initialHref = location.href;\n\n    $.mobile.Navigator = function( history ) {\n        this.history = history;\n        this.ignoreInitialHashChange = true;\n\n        $.mobile.window.bind({\n            \"popstate.history\": $.proxy( this.popstate, this ),\n            \"hashchange.history\": $.proxy( this.hashchange, this )\n        });\n    };\n\n    $.extend($.mobile.Navigator.prototype, {\n        squash: function( url, data ) {\n            var state, href, hash = path.isPath(url) ? path.stripHash(url) : url;\n\n            href = path.squash( url );\n\n            // make sure to provide this information when it isn't explicitly set in the\n            // data object that was passed to the squash method\n            state = $.extend({\n                hash: hash,\n                url: href\n            }, data);\n\n            // replace the current url with the new href and store the state\n            // Note that in some cases we might be replacing an url with the\n            // same url. We do this anyways because we need to make sure that\n            // all of our history entries have a state object associated with\n            // them. This allows us to work around the case where $.mobile.back()\n            // is called to transition from an external page to an embedded page.\n            // In that particular case, a hashchange event is *NOT* generated by the browser.\n            // Ensuring each history entry has a state object means that onPopState()\n            // will always trigger our hashchange callback even when a hashchange event\n            // is not fired.\n            window.history.replaceState( state, state.title || document.title, href );\n\n            return state;\n        },\n\n        hash: function( url, href ) {\n            var parsed, loc, hash, resolved;\n\n            // Grab the hash for recording. If the passed url is a path\n            // we used the parsed version of the squashed url to reconstruct,\n            // otherwise we assume it's a hash and store it directly\n            parsed = path.parseUrl( url );\n            loc = path.parseLocation();\n\n            if ( loc.pathname + loc.search === parsed.pathname + parsed.search ) {\n                // If the pathname and search of the passed url is identical to the current loc\n                // then we must use the hash. Otherwise there will be no event\n                // eg, url = \"/foo/bar?baz#bang\", location.href = \"http://example.com/foo/bar?baz\"\n                hash = parsed.hash ? parsed.hash : parsed.pathname + parsed.search;\n            } else if ( path.isPath(url) ) {\n                resolved = path.parseUrl( href );\n                // If the passed url is a path, make it domain relative and remove any trailing hash\n                hash = resolved.pathname + resolved.search + (path.isPreservableHash( resolved.hash )? resolved.hash.replace( \"#\", \"\" ) : \"\");\n            } else {\n                hash = url;\n            }\n\n            return hash;\n        },\n\n        // TODO reconsider name\n        go: function( url, data, noEvents ) {\n            var state, href, hash, popstateEvent,\n                isPopStateEvent = $.event.special.navigate.isPushStateEnabled();\n\n            // Get the url as it would look squashed on to the current resolution url\n            href = path.squash( url );\n\n            // sort out what the hash sould be from the url\n            hash = this.hash( url, href );\n\n            // Here we prevent the next hash change or popstate event from doing any\n            // history management. In the case of hashchange we don't swallow it\n            // if there will be no hashchange fired (since that won't reset the value)\n            // and will swallow the following hashchange\n            if ( noEvents && hash !== path.stripHash(path.parseLocation().hash) ) {\n                this.preventNextHashChange = noEvents;\n            }\n\n            // IMPORTANT in the case where popstate is supported the event will be triggered\n            //      directly, stopping further execution - ie, interupting the flow of this\n            //      method call to fire bindings at this expression. Below the navigate method\n            //      there is a binding to catch this event and stop its propagation.\n            //\n            //      We then trigger a new popstate event on the window with a null state\n            //      so that the navigate events can conclude their work properly\n            //\n            // if the url is a path we want to preserve the query params that are available on\n            // the current url.\n            this.preventHashAssignPopState = true;\n            window.location.hash = hash;\n\n            // If popstate is enabled and the browser triggers `popstate` events when the hash\n            // is set (this often happens immediately in browsers like Chrome), then the\n            // this flag will be set to false already. If it's a browser that does not trigger\n            // a `popstate` on hash assignement or `replaceState` then we need avoid the branch\n            // that swallows the event created by the popstate generated by the hash assignment\n            // At the time of this writing this happens with Opera 12 and some version of IE\n            this.preventHashAssignPopState = false;\n\n            state = $.extend({\n                url: href,\n                hash: hash,\n                title: document.title\n            }, data);\n\n            if ( isPopStateEvent ) {\n                popstateEvent = new $.Event( \"popstate\" );\n                popstateEvent.originalEvent = {\n                    type: \"popstate\",\n                    state: null\n                };\n\n                this.squash( url, state );\n\n                // Trigger a new faux popstate event to replace the one that we\n                // caught that was triggered by the hash setting above.\n                if ( !noEvents ) {\n                    this.ignorePopState = true;\n                    $.mobile.window.trigger( popstateEvent );\n                }\n            }\n\n            // record the history entry so that the information can be included\n            // in hashchange event driven navigate events in a similar fashion to\n            // the state that's provided by popstate\n            this.history.add( state.url, state );\n        },\n\n        // This binding is intended to catch the popstate events that are fired\n        // when execution of the `$.navigate` method stops at window.location.hash = url;\n        // and completely prevent them from propagating. The popstate event will then be\n        // retriggered after execution resumes\n        //\n        // TODO grab the original event here and use it for the synthetic event in the\n        //      second half of the navigate execution that will follow this binding\n        popstate: function( event ) {\n            var hash, state;\n\n            // Partly to support our test suite which manually alters the support\n            // value to test hashchange. Partly to prevent all around weirdness\n            if ( !$.event.special.navigate.isPushStateEnabled() ) {\n                return;\n            }\n\n            // If this is the popstate triggered by the actual alteration of the hash\n            // prevent it completely. History is tracked manually\n            if ( this.preventHashAssignPopState ) {\n                this.preventHashAssignPopState = false;\n                event.stopImmediatePropagation();\n                return;\n            }\n\n            // if this is the popstate triggered after the `replaceState` call in the go\n            // method, then simply ignore it. The history entry has already been captured\n            if ( this.ignorePopState ) {\n                this.ignorePopState = false;\n                return;\n            }\n\n            // If there is no state, and the history stack length is one were\n            // probably getting the page load popstate fired by browsers like chrome\n            // avoid it and set the one time flag to false.\n            // TODO: Do we really need all these conditions? Comparing location hrefs\n            // should be sufficient.\n            if ( !event.originalEvent.state &&\n                this.history.stack.length === 1 &&\n                this.ignoreInitialHashChange ) {\n                this.ignoreInitialHashChange = false;\n\n                if ( location.href === initialHref ) {\n                    event.preventDefault();\n                    return;\n                }\n            }\n\n            // account for direct manipulation of the hash. That is, we will receive a popstate\n            // when the hash is changed by assignment, and it won't have a state associated. We\n            // then need to squash the hash. See below for handling of hash assignment that\n            // matches an existing history entry\n            // TODO it might be better to only add to the history stack\n            //      when the hash is adjacent to the active history entry\n            hash = path.parseLocation().hash;\n            if ( !event.originalEvent.state && hash ) {\n                // squash the hash that's been assigned on the URL with replaceState\n                // also grab the resulting state object for storage\n                state = this.squash( hash );\n\n                // record the new hash as an additional history entry\n                // to match the browser's treatment of hash assignment\n                this.history.add( state.url, state );\n\n                // pass the newly created state information\n                // along with the event\n                event.historyState = state;\n\n                // do not alter history, we've added a new history entry\n                // so we know where we are\n                return;\n            }\n\n            // If all else fails this is a popstate that comes from the back or forward buttons\n            // make sure to set the state of our history stack properly, and record the directionality\n            this.history.direct({\n                url: (event.originalEvent.state || {}).url || hash,\n\n                // When the url is either forward or backward in history include the entry\n                // as data on the event object for merging as data in the navigate event\n                present: function( historyEntry, direction ) {\n                    // make sure to create a new object to pass down as the navigate event data\n                    event.historyState = $.extend({}, historyEntry);\n                    event.historyState.direction = direction;\n                }\n            });\n        },\n\n        // NOTE must bind before `navigate` special event hashchange binding otherwise the\n        //      navigation data won't be attached to the hashchange event in time for those\n        //      bindings to attach it to the `navigate` special event\n        // TODO add a check here that `hashchange.navigate` is bound already otherwise it's\n        //      broken (exception?)\n        hashchange: function( event ) {\n            var history, hash;\n\n            // If hashchange listening is explicitly disabled or pushstate is supported\n            // avoid making use of the hashchange handler.\n            if (!$.event.special.navigate.isHashChangeEnabled() ||\n                $.event.special.navigate.isPushStateEnabled() ) {\n                return;\n            }\n\n            // On occasion explicitly want to prevent the next hash from propogating because we only\n            // with to alter the url to represent the new state do so here\n            if ( this.preventNextHashChange ) {\n                this.preventNextHashChange = false;\n                event.stopImmediatePropagation();\n                return;\n            }\n\n            history = this.history;\n            hash = path.parseLocation().hash;\n\n            // If this is a hashchange caused by the back or forward button\n            // make sure to set the state of our history stack properly\n            this.history.direct({\n                url: hash,\n\n                // When the url is either forward or backward in history include the entry\n                // as data on the event object for merging as data in the navigate event\n                present: function( historyEntry, direction ) {\n                    // make sure to create a new object to pass down as the navigate event data\n                    event.hashchangeState = $.extend({}, historyEntry);\n                    event.hashchangeState.direction = direction;\n                },\n\n                // When we don't find a hash in our history clearly we're aiming to go there\n                // record the entry as new for future traversal\n                //\n                // NOTE it's not entirely clear that this is the right thing to do given that we\n                //      can't know the users intention. It might be better to explicitly _not_\n                //      support location.hash assignment in preference to $.navigate calls\n                // TODO first arg to add should be the href, but it causes issues in identifying\n                //      embeded pages\n                missing: function() {\n                    history.add( hash, {\n                        hash: hash,\n                        title: document.title\n                    });\n                }\n            });\n        }\n    });\n})( jQuery );\n\n\n\n(function( $, undefined ) {\n    // TODO consider queueing navigation activity until previous activities have completed\n    //      so that end users don't have to think about it. Punting for now\n    // TODO !! move the event bindings into callbacks on the navigate event\n    $.mobile.navigate = function( url, data, noEvents ) {\n        $.mobile.navigate.navigator.go( url, data, noEvents );\n    };\n\n    // expose the history on the navigate method in anticipation of full integration with\n    // existing navigation functionalty that is tightly coupled to the history information\n    $.mobile.navigate.history = new $.mobile.History();\n\n    // instantiate an instance of the navigator for use within the $.navigate method\n    $.mobile.navigate.navigator = new $.mobile.Navigator( $.mobile.navigate.history );\n\n    var loc = $.mobile.path.parseLocation();\n    $.mobile.navigate.history.add( loc.href, {hash: loc.hash} );\n})( jQuery );\n\n\n(function( $, undefined ) {\n    var props = {\n            \"animation\": {},\n            \"transition\": {}\n        },\n        testElement = document.createElement( \"a\" ),\n        vendorPrefixes = [ \"\", \"webkit-\", \"moz-\", \"o-\" ];\n\n    $.each( [ \"animation\", \"transition\" ], function( i, test ) {\n\n        // Get correct name for test\n        var testName = ( i === 0 ) ? test + \"-\" + \"name\" : test;\n\n        $.each( vendorPrefixes, function( j, prefix ) {\n            if ( testElement.style[ $.camelCase( prefix + testName ) ] !== undefined ) {\n                 props[ test ][ \"prefix\" ] = prefix;\n                return false;\n            }\n        });\n\n        // Set event and duration names for later use\n        props[ test ][ \"duration\" ] =\n            $.camelCase( props[ test ][ \"prefix\" ] + test + \"-\" + \"duration\" );\n        props[ test ][ \"event\" ] =\n            $.camelCase( props[ test ][ \"prefix\" ] + test + \"-\" + \"end\" );\n\n        // All lower case if not a vendor prop\n        if ( props[ test ][ \"prefix\" ] === \"\" ) {\n            props[ test ][ \"event\" ] = props[ test ][ \"event\" ].toLowerCase();\n        }\n    });\n\n    // If a valid prefix was found then the it is supported by the browser\n    $.support.cssTransitions = ( props[ \"transition\" ][ \"prefix\" ] !== undefined );\n    $.support.cssAnimations = ( props[ \"animation\" ][ \"prefix\" ] !== undefined );\n\n    // Remove the testElement\n    $( testElement ).remove();\n\n    // Animation complete callback\n    $.fn.animationComplete = function( callback, type, fallbackTime ) {\n        var timer, duration,\n            that = this,\n            eventBinding = function() {\n\n                // Clear the timer so we don't call callback twice\n                clearTimeout( timer );\n                callback.apply( this, arguments );\n            },\n            animationType = ( !type || type === \"animation\" ) ? \"animation\" : \"transition\";\n\n        // Make sure selected type is supported by browser\n        if ( ( $.support.cssTransitions && animationType === \"transition\" ) ||\n            ( $.support.cssAnimations && animationType === \"animation\" ) ) {\n\n            // If a fallback time was not passed set one\n            if ( fallbackTime === undefined ) {\n\n                // Make sure the was not bound to document before checking .css\n                if ( $( this ).context !== document ) {\n\n                    // Parse the durration since its in second multiple by 1000 for milliseconds\n                    // Multiply by 3 to make sure we give the animation plenty of time.\n                    duration = parseFloat(\n                        $( this ).css( props[ animationType ].duration )\n                    ) * 3000;\n                }\n\n                // If we could not read a duration use the default\n                if ( duration === 0 || duration === undefined || isNaN( duration ) ) {\n                    duration = $.fn.animationComplete.defaultDuration;\n                }\n            }\n\n            // Sets up the fallback if event never comes\n            timer = setTimeout( function() {\n                $( that ).off( props[ animationType ].event, eventBinding );\n                callback.apply( that );\n            }, duration );\n\n            // Bind the event\n            return $( this ).one( props[ animationType ].event, eventBinding );\n        } else {\n\n            // CSS animation / transitions not supported\n            // Defer execution for consistency between webkit/non webkit\n            setTimeout( $.proxy( callback, this ), 0 );\n            return $( this );\n        }\n    };\n\n    // Allow default callback to be configured on mobileInit\n    $.fn.animationComplete.defaultDuration = 1000;\n})( jQuery );\n\n// This plugin is an experiment for abstracting away the touch and mouse\n// events so that developers don't have to worry about which method of input\n// the device their document is loaded on supports.\n//\n// The idea here is to allow the developer to register listeners for the\n// basic mouse events, such as mousedown, mousemove, mouseup, and click,\n// and the plugin will take care of registering the correct listeners\n// behind the scenes to invoke the listener at the fastest possible time\n// for that device, while still retaining the order of event firing in\n// the traditional mouse environment, should multiple handlers be registered\n// on the same element for different events.\n//\n// The current version exposes the following virtual events to jQuery bind methods:\n// \"vmouseover vmousedown vmousemove vmouseup vclick vmouseout vmousecancel\"\n\n(function( $, window, document, undefined ) {\n\nvar dataPropertyName = \"virtualMouseBindings\",\n    touchTargetPropertyName = \"virtualTouchID\",\n    virtualEventNames = \"vmouseover vmousedown vmousemove vmouseup vclick vmouseout vmousecancel\".split( \" \" ),\n    touchEventProps = \"clientX clientY pageX pageY screenX screenY\".split( \" \" ),\n    mouseHookProps = $.event.mouseHooks ? $.event.mouseHooks.props : [],\n    mouseEventProps = $.event.props.concat( mouseHookProps ),\n    activeDocHandlers = {},\n    resetTimerID = 0,\n    startX = 0,\n    startY = 0,\n    didScroll = false,\n    clickBlockList = [],\n    blockMouseTriggers = false,\n    blockTouchTriggers = false,\n    eventCaptureSupported = \"addEventListener\" in document,\n    $document = $( document ),\n    nextTouchID = 1,\n    lastTouchID = 0, threshold,\n    i;\n\n$.vmouse = {\n    moveDistanceThreshold: 10,\n    clickDistanceThreshold: 10,\n    resetTimerDuration: 1500\n};\n\nfunction getNativeEvent( event ) {\n\n    while ( event && typeof event.originalEvent !== \"undefined\" ) {\n        event = event.originalEvent;\n    }\n    return event;\n}\n\nfunction createVirtualEvent( event, eventType ) {\n\n    var t = event.type,\n        oe, props, ne, prop, ct, touch, i, j, len;\n\n    event = $.Event( event );\n    event.type = eventType;\n\n    oe = event.originalEvent;\n    props = $.event.props;\n\n    // addresses separation of $.event.props in to $.event.mouseHook.props and Issue 3280\n    // https://github.com/jquery/jquery-mobile/issues/3280\n    if ( t.search( /^(mouse|click)/ ) > -1 ) {\n        props = mouseEventProps;\n    }\n\n    // copy original event properties over to the new event\n    // this would happen if we could call $.event.fix instead of $.Event\n    // but we don't have a way to force an event to be fixed multiple times\n    if ( oe ) {\n        for ( i = props.length, prop; i; ) {\n            prop = props[ --i ];\n            event[ prop ] = oe[ prop ];\n        }\n    }\n\n    // make sure that if the mouse and click virtual events are generated\n    // without a .which one is defined\n    if ( t.search(/mouse(down|up)|click/) > -1 && !event.which ) {\n        event.which = 1;\n    }\n\n    if ( t.search(/^touch/) !== -1 ) {\n        ne = getNativeEvent( oe );\n        t = ne.touches;\n        ct = ne.changedTouches;\n        touch = ( t && t.length ) ? t[0] : ( ( ct && ct.length ) ? ct[ 0 ] : undefined );\n\n        if ( touch ) {\n            for ( j = 0, len = touchEventProps.length; j < len; j++) {\n                prop = touchEventProps[ j ];\n                event[ prop ] = touch[ prop ];\n            }\n        }\n    }\n\n    return event;\n}\n\nfunction getVirtualBindingFlags( element ) {\n\n    var flags = {},\n        b, k;\n\n    while ( element ) {\n\n        b = $.data( element, dataPropertyName );\n\n        for (  k in b ) {\n            if ( b[ k ] ) {\n                flags[ k ] = flags.hasVirtualBinding = true;\n            }\n        }\n        element = element.parentNode;\n    }\n    return flags;\n}\n\nfunction getClosestElementWithVirtualBinding( element, eventType ) {\n    var b;\n    while ( element ) {\n\n        b = $.data( element, dataPropertyName );\n\n        if ( b && ( !eventType || b[ eventType ] ) ) {\n            return element;\n        }\n        element = element.parentNode;\n    }\n    return null;\n}\n\nfunction enableTouchBindings() {\n    blockTouchTriggers = false;\n}\n\nfunction disableTouchBindings() {\n    blockTouchTriggers = true;\n}\n\nfunction enableMouseBindings() {\n    lastTouchID = 0;\n    clickBlockList.length = 0;\n    blockMouseTriggers = false;\n\n    // When mouse bindings are enabled, our\n    // touch bindings are disabled.\n    disableTouchBindings();\n}\n\nfunction disableMouseBindings() {\n    // When mouse bindings are disabled, our\n    // touch bindings are enabled.\n    enableTouchBindings();\n}\n\nfunction startResetTimer() {\n    clearResetTimer();\n    resetTimerID = setTimeout( function() {\n        resetTimerID = 0;\n        enableMouseBindings();\n    }, $.vmouse.resetTimerDuration );\n}\n\nfunction clearResetTimer() {\n    if ( resetTimerID ) {\n        clearTimeout( resetTimerID );\n        resetTimerID = 0;\n    }\n}\n\nfunction triggerVirtualEvent( eventType, event, flags ) {\n    var ve;\n\n    if ( ( flags && flags[ eventType ] ) ||\n                ( !flags && getClosestElementWithVirtualBinding( event.target, eventType ) ) ) {\n\n        ve = createVirtualEvent( event, eventType );\n\n        $( event.target).trigger( ve );\n    }\n\n    return ve;\n}\n\nfunction mouseEventCallback( event ) {\n    var touchID = $.data( event.target, touchTargetPropertyName ),\n        ve;\n\n    if ( !blockMouseTriggers && ( !lastTouchID || lastTouchID !== touchID ) ) {\n        ve = triggerVirtualEvent( \"v\" + event.type, event );\n        if ( ve ) {\n            if ( ve.isDefaultPrevented() ) {\n                event.preventDefault();\n            }\n            if ( ve.isPropagationStopped() ) {\n                event.stopPropagation();\n            }\n            if ( ve.isImmediatePropagationStopped() ) {\n                event.stopImmediatePropagation();\n            }\n        }\n    }\n}\n\nfunction handleTouchStart( event ) {\n\n    var touches = getNativeEvent( event ).touches,\n        target, flags, t;\n\n    if ( touches && touches.length === 1 ) {\n\n        target = event.target;\n        flags = getVirtualBindingFlags( target );\n\n        if ( flags.hasVirtualBinding ) {\n\n            lastTouchID = nextTouchID++;\n            $.data( target, touchTargetPropertyName, lastTouchID );\n\n            clearResetTimer();\n\n            disableMouseBindings();\n            didScroll = false;\n\n            t = getNativeEvent( event ).touches[ 0 ];\n            startX = t.pageX;\n            startY = t.pageY;\n\n            triggerVirtualEvent( \"vmouseover\", event, flags );\n            triggerVirtualEvent( \"vmousedown\", event, flags );\n        }\n    }\n}\n\nfunction handleScroll( event ) {\n    if ( blockTouchTriggers ) {\n        return;\n    }\n\n    if ( !didScroll ) {\n        triggerVirtualEvent( \"vmousecancel\", event, getVirtualBindingFlags( event.target ) );\n    }\n\n    didScroll = true;\n    startResetTimer();\n}\n\nfunction handleTouchMove( event ) {\n    if ( blockTouchTriggers ) {\n        return;\n    }\n\n    var t = getNativeEvent( event ).touches[ 0 ],\n        didCancel = didScroll,\n        moveThreshold = $.vmouse.moveDistanceThreshold,\n        flags = getVirtualBindingFlags( event.target );\n\n        didScroll = didScroll ||\n            ( Math.abs( t.pageX - startX ) > moveThreshold ||\n                Math.abs( t.pageY - startY ) > moveThreshold );\n\n    if ( didScroll && !didCancel ) {\n        triggerVirtualEvent( \"vmousecancel\", event, flags );\n    }\n\n    triggerVirtualEvent( \"vmousemove\", event, flags );\n    startResetTimer();\n}\n\nfunction handleTouchEnd( event ) {\n    if ( blockTouchTriggers ) {\n        return;\n    }\n\n    disableTouchBindings();\n\n    var flags = getVirtualBindingFlags( event.target ),\n        ve, t;\n    triggerVirtualEvent( \"vmouseup\", event, flags );\n\n    if ( !didScroll ) {\n        ve = triggerVirtualEvent( \"vclick\", event, flags );\n        if ( ve && ve.isDefaultPrevented() ) {\n            // The target of the mouse events that follow the touchend\n            // event don't necessarily match the target used during the\n            // touch. This means we need to rely on coordinates for blocking\n            // any click that is generated.\n            t = getNativeEvent( event ).changedTouches[ 0 ];\n            clickBlockList.push({\n                touchID: lastTouchID,\n                x: t.clientX,\n                y: t.clientY\n            });\n\n            // Prevent any mouse events that follow from triggering\n            // virtual event notifications.\n            blockMouseTriggers = true;\n        }\n    }\n    triggerVirtualEvent( \"vmouseout\", event, flags);\n    didScroll = false;\n\n    startResetTimer();\n}\n\nfunction hasVirtualBindings( ele ) {\n    var bindings = $.data( ele, dataPropertyName ),\n        k;\n\n    if ( bindings ) {\n        for ( k in bindings ) {\n            if ( bindings[ k ] ) {\n                return true;\n            }\n        }\n    }\n    return false;\n}\n\nfunction dummyMouseHandler() {}\n\nfunction getSpecialEventObject( eventType ) {\n    var realType = eventType.substr( 1 );\n\n    return {\n        setup: function(/* data, namespace */) {\n            // If this is the first virtual mouse binding for this element,\n            // add a bindings object to its data.\n\n            if ( !hasVirtualBindings( this ) ) {\n                $.data( this, dataPropertyName, {} );\n            }\n\n            // If setup is called, we know it is the first binding for this\n            // eventType, so initialize the count for the eventType to zero.\n            var bindings = $.data( this, dataPropertyName );\n            bindings[ eventType ] = true;\n\n            // If this is the first virtual mouse event for this type,\n            // register a global handler on the document.\n\n            activeDocHandlers[ eventType ] = ( activeDocHandlers[ eventType ] || 0 ) + 1;\n\n            if ( activeDocHandlers[ eventType ] === 1 ) {\n                $document.bind( realType, mouseEventCallback );\n            }\n\n            // Some browsers, like Opera Mini, won't dispatch mouse/click events\n            // for elements unless they actually have handlers registered on them.\n            // To get around this, we register dummy handlers on the elements.\n\n            $( this ).bind( realType, dummyMouseHandler );\n\n            // For now, if event capture is not supported, we rely on mouse handlers.\n            if ( eventCaptureSupported ) {\n                // If this is the first virtual mouse binding for the document,\n                // register our touchstart handler on the document.\n\n                activeDocHandlers[ \"touchstart\" ] = ( activeDocHandlers[ \"touchstart\" ] || 0) + 1;\n\n                if ( activeDocHandlers[ \"touchstart\" ] === 1 ) {\n                    $document.bind( \"touchstart\", handleTouchStart )\n                        .bind( \"touchend\", handleTouchEnd )\n\n                        // On touch platforms, touching the screen and then dragging your finger\n                        // causes the window content to scroll after some distance threshold is\n                        // exceeded. On these platforms, a scroll prevents a click event from being\n                        // dispatched, and on some platforms, even the touchend is suppressed. To\n                        // mimic the suppression of the click event, we need to watch for a scroll\n                        // event. Unfortunately, some platforms like iOS don't dispatch scroll\n                        // events until *AFTER* the user lifts their finger (touchend). This means\n                        // we need to watch both scroll and touchmove events to figure out whether\n                        // or not a scroll happenens before the touchend event is fired.\n\n                        .bind( \"touchmove\", handleTouchMove )\n                        .bind( \"scroll\", handleScroll );\n                }\n            }\n        },\n\n        teardown: function(/* data, namespace */) {\n            // If this is the last virtual binding for this eventType,\n            // remove its global handler from the document.\n\n            --activeDocHandlers[ eventType ];\n\n            if ( !activeDocHandlers[ eventType ] ) {\n                $document.unbind( realType, mouseEventCallback );\n            }\n\n            if ( eventCaptureSupported ) {\n                // If this is the last virtual mouse binding in existence,\n                // remove our document touchstart listener.\n\n                --activeDocHandlers[ \"touchstart\" ];\n\n                if ( !activeDocHandlers[ \"touchstart\" ] ) {\n                    $document.unbind( \"touchstart\", handleTouchStart )\n                        .unbind( \"touchmove\", handleTouchMove )\n                        .unbind( \"touchend\", handleTouchEnd )\n                        .unbind( \"scroll\", handleScroll );\n                }\n            }\n\n            var $this = $( this ),\n                bindings = $.data( this, dataPropertyName );\n\n            // teardown may be called when an element was\n            // removed from the DOM. If this is the case,\n            // jQuery core may have already stripped the element\n            // of any data bindings so we need to check it before\n            // using it.\n            if ( bindings ) {\n                bindings[ eventType ] = false;\n            }\n\n            // Unregister the dummy event handler.\n\n            $this.unbind( realType, dummyMouseHandler );\n\n            // If this is the last virtual mouse binding on the\n            // element, remove the binding data from the element.\n\n            if ( !hasVirtualBindings( this ) ) {\n                $this.removeData( dataPropertyName );\n            }\n        }\n    };\n}\n\n// Expose our custom events to the jQuery bind/unbind mechanism.\n\nfor ( i = 0; i < virtualEventNames.length; i++ ) {\n    $.event.special[ virtualEventNames[ i ] ] = getSpecialEventObject( virtualEventNames[ i ] );\n}\n\n// Add a capture click handler to block clicks.\n// Note that we require event capture support for this so if the device\n// doesn't support it, we punt for now and rely solely on mouse events.\nif ( eventCaptureSupported ) {\n    document.addEventListener( \"click\", function( e ) {\n        var cnt = clickBlockList.length,\n            target = e.target,\n            x, y, ele, i, o, touchID;\n\n        if ( cnt ) {\n            x = e.clientX;\n            y = e.clientY;\n            threshold = $.vmouse.clickDistanceThreshold;\n\n            // The idea here is to run through the clickBlockList to see if\n            // the current click event is in the proximity of one of our\n            // vclick events that had preventDefault() called on it. If we find\n            // one, then we block the click.\n            //\n            // Why do we have to rely on proximity?\n            //\n            // Because the target of the touch event that triggered the vclick\n            // can be different from the target of the click event synthesized\n            // by the browser. The target of a mouse/click event that is synthesized\n            // from a touch event seems to be implementation specific. For example,\n            // some browsers will fire mouse/click events for a link that is near\n            // a touch event, even though the target of the touchstart/touchend event\n            // says the user touched outside the link. Also, it seems that with most\n            // browsers, the target of the mouse/click event is not calculated until the\n            // time it is dispatched, so if you replace an element that you touched\n            // with another element, the target of the mouse/click will be the new\n            // element underneath that point.\n            //\n            // Aside from proximity, we also check to see if the target and any\n            // of its ancestors were the ones that blocked a click. This is necessary\n            // because of the strange mouse/click target calculation done in the\n            // Android 2.1 browser, where if you click on an element, and there is a\n            // mouse/click handler on one of its ancestors, the target will be the\n            // innermost child of the touched element, even if that child is no where\n            // near the point of touch.\n\n            ele = target;\n\n            while ( ele ) {\n                for ( i = 0; i < cnt; i++ ) {\n                    o = clickBlockList[ i ];\n                    touchID = 0;\n\n                    if ( ( ele === target && Math.abs( o.x - x ) < threshold && Math.abs( o.y - y ) < threshold ) ||\n                                $.data( ele, touchTargetPropertyName ) === o.touchID ) {\n                        // XXX: We may want to consider removing matches from the block list\n                        //      instead of waiting for the reset timer to fire.\n                        e.preventDefault();\n                        e.stopPropagation();\n                        return;\n                    }\n                }\n                ele = ele.parentNode;\n            }\n        }\n    }, true);\n}\n})( jQuery, window, document );\n\n\n(function( $, window, undefined ) {\n    var $document = $( document ),\n        supportTouch = $.mobile.support.touch,\n        scrollEvent = \"touchmove scroll\",\n        touchStartEvent = supportTouch ? \"touchstart\" : \"mousedown\",\n        touchStopEvent = supportTouch ? \"touchend\" : \"mouseup\",\n        touchMoveEvent = supportTouch ? \"touchmove\" : \"mousemove\";\n\n    // setup new event shortcuts\n    $.each( ( \"touchstart touchmove touchend \" +\n        \"tap taphold \" +\n        \"swipe swipeleft swiperight \" +\n        \"scrollstart scrollstop\" ).split( \" \" ), function( i, name ) {\n\n        $.fn[ name ] = function( fn ) {\n            return fn ? this.bind( name, fn ) : this.trigger( name );\n        };\n\n        // jQuery < 1.8\n        if ( $.attrFn ) {\n            $.attrFn[ name ] = true;\n        }\n    });\n\n    function triggerCustomEvent( obj, eventType, event, bubble ) {\n        var originalType = event.type;\n        event.type = eventType;\n        if ( bubble ) {\n            $.event.trigger( event, undefined, obj );\n        } else {\n            $.event.dispatch.call( obj, event );\n        }\n        event.type = originalType;\n    }\n\n    // also handles scrollstop\n    $.event.special.scrollstart = {\n\n        enabled: true,\n        setup: function() {\n\n            var thisObject = this,\n                $this = $( thisObject ),\n                scrolling,\n                timer;\n\n            function trigger( event, state ) {\n                scrolling = state;\n                triggerCustomEvent( thisObject, scrolling ? \"scrollstart\" : \"scrollstop\", event );\n            }\n\n            // iPhone triggers scroll after a small delay; use touchmove instead\n            $this.bind( scrollEvent, function( event ) {\n\n                if ( !$.event.special.scrollstart.enabled ) {\n                    return;\n                }\n\n                if ( !scrolling ) {\n                    trigger( event, true );\n                }\n\n                clearTimeout( timer );\n                timer = setTimeout( function() {\n                    trigger( event, false );\n                }, 50 );\n            });\n        },\n        teardown: function() {\n            $( this ).unbind( scrollEvent );\n        }\n    };\n\n    // also handles taphold\n    $.event.special.tap = {\n        tapholdThreshold: 750,\n        emitTapOnTaphold: true,\n        setup: function() {\n            var thisObject = this,\n                $this = $( thisObject ),\n                isTaphold = false;\n\n            $this.bind( \"vmousedown\", function( event ) {\n                isTaphold = false;\n                if ( event.which && event.which !== 1 ) {\n                    return false;\n                }\n\n                var origTarget = event.target,\n                    timer;\n\n                function clearTapTimer() {\n                    clearTimeout( timer );\n                }\n\n                function clearTapHandlers() {\n                    clearTapTimer();\n\n                    $this.unbind( \"vclick\", clickHandler )\n                        .unbind( \"vmouseup\", clearTapTimer );\n                    $document.unbind( \"vmousecancel\", clearTapHandlers );\n                }\n\n                function clickHandler( event ) {\n                    clearTapHandlers();\n\n                    // ONLY trigger a 'tap' event if the start target is\n                    // the same as the stop target.\n                    if ( !isTaphold && origTarget === event.target ) {\n                        triggerCustomEvent( thisObject, \"tap\", event );\n                    } else if ( isTaphold ) {\n                        event.preventDefault();\n                    }\n                }\n\n                $this.bind( \"vmouseup\", clearTapTimer )\n                    .bind( \"vclick\", clickHandler );\n                $document.bind( \"vmousecancel\", clearTapHandlers );\n\n                timer = setTimeout( function() {\n                    if ( !$.event.special.tap.emitTapOnTaphold ) {\n                        isTaphold = true;\n                    }\n                    triggerCustomEvent( thisObject, \"taphold\", $.Event( \"taphold\", { target: origTarget } ) );\n                }, $.event.special.tap.tapholdThreshold );\n            });\n        },\n        teardown: function() {\n            $( this ).unbind( \"vmousedown\" ).unbind( \"vclick\" ).unbind( \"vmouseup\" );\n            $document.unbind( \"vmousecancel\" );\n        }\n    };\n\n    // Also handles swipeleft, swiperight\n    $.event.special.swipe = {\n\n        // More than this horizontal displacement, and we will suppress scrolling.\n        scrollSupressionThreshold: 30,\n\n        // More time than this, and it isn't a swipe.\n        durationThreshold: 1000,\n\n        // Swipe horizontal displacement must be more than this.\n        horizontalDistanceThreshold: 30,\n\n        // Swipe vertical displacement must be less than this.\n        verticalDistanceThreshold: 30,\n\n        getLocation: function ( event ) {\n            var winPageX = window.pageXOffset,\n                winPageY = window.pageYOffset,\n                x = event.clientX,\n                y = event.clientY;\n\n            if ( event.pageY === 0 && Math.floor( y ) > Math.floor( event.pageY ) ||\n                event.pageX === 0 && Math.floor( x ) > Math.floor( event.pageX ) ) {\n\n                // iOS4 clientX/clientY have the value that should have been\n                // in pageX/pageY. While pageX/page/ have the value 0\n                x = x - winPageX;\n                y = y - winPageY;\n            } else if ( y < ( event.pageY - winPageY) || x < ( event.pageX - winPageX ) ) {\n\n                // Some Android browsers have totally bogus values for clientX/Y\n                // when scrolling/zooming a page. Detectable since clientX/clientY\n                // should never be smaller than pageX/pageY minus page scroll\n                x = event.pageX - winPageX;\n                y = event.pageY - winPageY;\n            }\n\n            return {\n                x: x,\n                y: y\n            };\n        },\n\n        start: function( event ) {\n            var data = event.originalEvent.touches ?\n                    event.originalEvent.touches[ 0 ] : event,\n                location = $.event.special.swipe.getLocation( data );\n            return {\n                        time: ( new Date() ).getTime(),\n                        coords: [ location.x, location.y ],\n                        origin: $( event.target )\n                    };\n        },\n\n        stop: function( event ) {\n            var data = event.originalEvent.touches ?\n                    event.originalEvent.touches[ 0 ] : event,\n                location = $.event.special.swipe.getLocation( data );\n            return {\n                        time: ( new Date() ).getTime(),\n                        coords: [ location.x, location.y ]\n                    };\n        },\n\n        handleSwipe: function( start, stop, thisObject, origTarget ) {\n            if ( stop.time - start.time < $.event.special.swipe.durationThreshold &&\n                Math.abs( start.coords[ 0 ] - stop.coords[ 0 ] ) > $.event.special.swipe.horizontalDistanceThreshold &&\n                Math.abs( start.coords[ 1 ] - stop.coords[ 1 ] ) < $.event.special.swipe.verticalDistanceThreshold ) {\n                var direction = start.coords[0] > stop.coords[ 0 ] ? \"swipeleft\" : \"swiperight\";\n\n                triggerCustomEvent( thisObject, \"swipe\", $.Event( \"swipe\", { target: origTarget, swipestart: start, swipestop: stop }), true );\n                triggerCustomEvent( thisObject, direction,$.Event( direction, { target: origTarget, swipestart: start, swipestop: stop } ), true );\n                return true;\n            }\n            return false;\n\n        },\n\n        // This serves as a flag to ensure that at most one swipe event event is\n        // in work at any given time\n        eventInProgress: false,\n\n        setup: function() {\n            var events,\n                thisObject = this,\n                $this = $( thisObject ),\n                context = {};\n\n            // Retrieve the events data for this element and add the swipe context\n            events = $.data( this, \"mobile-events\" );\n            if ( !events ) {\n                events = { length: 0 };\n                $.data( this, \"mobile-events\", events );\n            }\n            events.length++;\n            events.swipe = context;\n\n            context.start = function( event ) {\n\n                // Bail if we're already working on a swipe event\n                if ( $.event.special.swipe.eventInProgress ) {\n                    return;\n                }\n                $.event.special.swipe.eventInProgress = true;\n\n                var stop,\n                    start = $.event.special.swipe.start( event ),\n                    origTarget = event.target,\n                    emitted = false;\n\n                context.move = function( event ) {\n                    if ( !start || event.isDefaultPrevented() ) {\n                        return;\n                    }\n\n                    stop = $.event.special.swipe.stop( event );\n                    if ( !emitted ) {\n                        emitted = $.event.special.swipe.handleSwipe( start, stop, thisObject, origTarget );\n                        if ( emitted ) {\n\n                            // Reset the context to make way for the next swipe event\n                            $.event.special.swipe.eventInProgress = false;\n                        }\n                    }\n                    // prevent scrolling\n                    if ( Math.abs( start.coords[ 0 ] - stop.coords[ 0 ] ) > $.event.special.swipe.scrollSupressionThreshold ) {\n                        event.preventDefault();\n                    }\n                };\n\n                context.stop = function() {\n                        emitted = true;\n\n                        // Reset the context to make way for the next swipe event\n                        $.event.special.swipe.eventInProgress = false;\n                        $document.off( touchMoveEvent, context.move );\n                        context.move = null;\n                };\n\n                $document.on( touchMoveEvent, context.move )\n                    .one( touchStopEvent, context.stop );\n            };\n            $this.on( touchStartEvent, context.start );\n        },\n\n        teardown: function() {\n            var events, context;\n\n            events = $.data( this, \"mobile-events\" );\n            if ( events ) {\n                context = events.swipe;\n                delete events.swipe;\n                events.length--;\n                if ( events.length === 0 ) {\n                    $.removeData( this, \"mobile-events\" );\n                }\n            }\n\n            if ( context ) {\n                if ( context.start ) {\n                    $( this ).off( touchStartEvent, context.start );\n                }\n                if ( context.move ) {\n                    $document.off( touchMoveEvent, context.move );\n                }\n                if ( context.stop ) {\n                    $document.off( touchStopEvent, context.stop );\n                }\n            }\n        }\n    };\n    $.each({\n        scrollstop: \"scrollstart\",\n        taphold: \"tap\",\n        swipeleft: \"swipe.left\",\n        swiperight: \"swipe.right\"\n    }, function( event, sourceEvent ) {\n\n        $.event.special[ event ] = {\n            setup: function() {\n                $( this ).bind( sourceEvent, $.noop );\n            },\n            teardown: function() {\n                $( this ).unbind( sourceEvent );\n            }\n        };\n    });\n\n})( jQuery, this );\n\n\n    // throttled resize event\n    (function( $ ) {\n        $.event.special.throttledresize = {\n            setup: function() {\n                $( this ).bind( \"resize\", handler );\n            },\n            teardown: function() {\n                $( this ).unbind( \"resize\", handler );\n            }\n        };\n\n        var throttle = 250,\n            handler = function() {\n                curr = ( new Date() ).getTime();\n                diff = curr - lastCall;\n\n                if ( diff >= throttle ) {\n\n                    lastCall = curr;\n                    $( this ).trigger( \"throttledresize\" );\n\n                } else {\n\n                    if ( heldCall ) {\n                        clearTimeout( heldCall );\n                    }\n\n                    // Promise a held call will still execute\n                    heldCall = setTimeout( handler, throttle - diff );\n                }\n            },\n            lastCall = 0,\n            heldCall,\n            curr,\n            diff;\n    })( jQuery );\n\n\n(function( $, window ) {\n    var win = $( window ),\n        event_name = \"orientationchange\",\n        get_orientation,\n        last_orientation,\n        initial_orientation_is_landscape,\n        initial_orientation_is_default,\n        portrait_map = { \"0\": true, \"180\": true },\n        ww, wh, landscape_threshold;\n\n    // It seems that some device/browser vendors use window.orientation values 0 and 180 to\n    // denote the \"default\" orientation. For iOS devices, and most other smart-phones tested,\n    // the default orientation is always \"portrait\", but in some Android and RIM based tablets,\n    // the default orientation is \"landscape\". The following code attempts to use the window\n    // dimensions to figure out what the current orientation is, and then makes adjustments\n    // to the to the portrait_map if necessary, so that we can properly decode the\n    // window.orientation value whenever get_orientation() is called.\n    //\n    // Note that we used to use a media query to figure out what the orientation the browser\n    // thinks it is in:\n    //\n    //     initial_orientation_is_landscape = $.mobile.media(\"all and (orientation: landscape)\");\n    //\n    // but there was an iPhone/iPod Touch bug beginning with iOS 4.2, up through iOS 5.1,\n    // where the browser *ALWAYS* applied the landscape media query. This bug does not\n    // happen on iPad.\n\n    if ( $.support.orientation ) {\n\n        // Check the window width and height to figure out what the current orientation\n        // of the device is at this moment. Note that we've initialized the portrait map\n        // values to 0 and 180, *AND* we purposely check for landscape so that if we guess\n        // wrong, , we default to the assumption that portrait is the default orientation.\n        // We use a threshold check below because on some platforms like iOS, the iPhone\n        // form-factor can report a larger width than height if the user turns on the\n        // developer console. The actual threshold value is somewhat arbitrary, we just\n        // need to make sure it is large enough to exclude the developer console case.\n\n        ww = window.innerWidth || win.width();\n        wh = window.innerHeight || win.height();\n        landscape_threshold = 50;\n\n        initial_orientation_is_landscape = ww > wh && ( ww - wh ) > landscape_threshold;\n\n        // Now check to see if the current window.orientation is 0 or 180.\n        initial_orientation_is_default = portrait_map[ window.orientation ];\n\n        // If the initial orientation is landscape, but window.orientation reports 0 or 180, *OR*\n        // if the initial orientation is portrait, but window.orientation reports 90 or -90, we\n        // need to flip our portrait_map values because landscape is the default orientation for\n        // this device/browser.\n        if ( ( initial_orientation_is_landscape && initial_orientation_is_default ) || ( !initial_orientation_is_landscape && !initial_orientation_is_default ) ) {\n            portrait_map = { \"-90\": true, \"90\": true };\n        }\n    }\n\n    $.event.special.orientationchange = $.extend( {}, $.event.special.orientationchange, {\n        setup: function() {\n            // If the event is supported natively, return false so that jQuery\n            // will bind to the event using DOM methods.\n            if ( $.support.orientation && !$.event.special.orientationchange.disabled ) {\n                return false;\n            }\n\n            // Get the current orientation to avoid initial double-triggering.\n            last_orientation = get_orientation();\n\n            // Because the orientationchange event doesn't exist, simulate the\n            // event by testing window dimensions on resize.\n            win.bind( \"throttledresize\", handler );\n        },\n        teardown: function() {\n            // If the event is not supported natively, return false so that\n            // jQuery will unbind the event using DOM methods.\n            if ( $.support.orientation && !$.event.special.orientationchange.disabled ) {\n                return false;\n            }\n\n            // Because the orientationchange event doesn't exist, unbind the\n            // resize event handler.\n            win.unbind( \"throttledresize\", handler );\n        },\n        add: function( handleObj ) {\n            // Save a reference to the bound event handler.\n            var old_handler = handleObj.handler;\n\n            handleObj.handler = function( event ) {\n                // Modify event object, adding the .orientation property.\n                event.orientation = get_orientation();\n\n                // Call the originally-bound event handler and return its result.\n                return old_handler.apply( this, arguments );\n            };\n        }\n    });\n\n    // If the event is not supported natively, this handler will be bound to\n    // the window resize event to simulate the orientationchange event.\n    function handler() {\n        // Get the current orientation.\n        var orientation = get_orientation();\n\n        if ( orientation !== last_orientation ) {\n            // The orientation has changed, so trigger the orientationchange event.\n            last_orientation = orientation;\n            win.trigger( event_name );\n        }\n    }\n\n    // Get the current page orientation. This method is exposed publicly, should it\n    // be needed, as jQuery.event.special.orientationchange.orientation()\n    $.event.special.orientationchange.orientation = get_orientation = function() {\n        var isPortrait = true, elem = document.documentElement;\n\n        // prefer window orientation to the calculation based on screensize as\n        // the actual screen resize takes place before or after the orientation change event\n        // has been fired depending on implementation (eg android 2.3 is before, iphone after).\n        // More testing is required to determine if a more reliable method of determining the new screensize\n        // is possible when orientationchange is fired. (eg, use media queries + element + opacity)\n        if ( $.support.orientation ) {\n            // if the window orientation registers as 0 or 180 degrees report\n            // portrait, otherwise landscape\n            isPortrait = portrait_map[ window.orientation ];\n        } else {\n            isPortrait = elem && elem.clientWidth / elem.clientHeight < 1.1;\n        }\n\n        return isPortrait ? \"portrait\" : \"landscape\";\n    };\n\n    $.fn[ event_name ] = function( fn ) {\n        return fn ? this.bind( event_name, fn ) : this.trigger( event_name );\n    };\n\n    // jQuery < 1.8\n    if ( $.attrFn ) {\n        $.attrFn[ event_name ] = true;\n    }\n\n}( jQuery, this ));\n\n\n\n\n(function( $, undefined ) {\n\n    // existing base tag?\n    var baseElement = $( \"head\" ).children( \"base\" ),\n\n    // base element management, defined depending on dynamic base tag support\n    // TODO move to external widget\n    base = {\n\n        // define base element, for use in routing asset urls that are referenced\n        // in Ajax-requested markup\n        element: ( baseElement.length ? baseElement :\n            $( \"<base>\", { href: $.mobile.path.documentBase.hrefNoHash } ).prependTo( $( \"head\" ) ) ),\n\n        linkSelector: \"[src], link[href], a[rel='external'], :jqmData(ajax='false'), a[target]\",\n\n        // set the generated BASE element's href to a new page's base path\n        set: function( href ) {\n\n            // we should do nothing if the user wants to manage their url base\n            // manually\n            if ( !$.mobile.dynamicBaseEnabled ) {\n                return;\n            }\n\n            // we should use the base tag if we can manipulate it dynamically\n            if ( $.support.dynamicBaseTag ) {\n                base.element.attr( \"href\",\n                    $.mobile.path.makeUrlAbsolute( href, $.mobile.path.documentBase ) );\n            }\n        },\n\n        rewrite: function( href, page ) {\n            var newPath = $.mobile.path.get( href );\n\n            page.find( base.linkSelector ).each(function( i, link ) {\n                var thisAttr = $( link ).is( \"[href]\" ) ? \"href\" :\n                    $( link ).is( \"[src]\" ) ? \"src\" : \"action\",\n                theLocation = $.mobile.path.parseLocation(),\n                thisUrl = $( link ).attr( thisAttr );\n\n                // XXX_jblas: We need to fix this so that it removes the document\n                //            base URL, and then prepends with the new page URL.\n                // if full path exists and is same, chop it - helps IE out\n                thisUrl = thisUrl.replace( theLocation.protocol + theLocation.doubleSlash +\n                    theLocation.host + theLocation.pathname, \"\" );\n\n                if ( !/^(\\w+:|#|\\/)/.test( thisUrl ) ) {\n                    $( link ).attr( thisAttr, newPath + thisUrl );\n                }\n            });\n        },\n\n        // set the generated BASE element's href to a new page's base path\n        reset: function(/* href */) {\n            base.element.attr( \"href\", $.mobile.path.documentBase.hrefNoSearch );\n        }\n    };\n\n    $.mobile.base = base;\n\n})( jQuery );\n\n\n(function( $, undefined ) {\n$.mobile.widgets = {};\n\nvar originalWidget = $.widget,\n\n    // Record the original, non-mobileinit-modified version of $.mobile.keepNative\n    // so we can later determine whether someone has modified $.mobile.keepNative\n    keepNativeFactoryDefault = $.mobile.keepNative;\n\n$.widget = (function( orig ) {\n    return function() {\n        var constructor = orig.apply( this, arguments ),\n            name = constructor.prototype.widgetName;\n\n        constructor.initSelector = ( ( constructor.prototype.initSelector !== undefined ) ?\n            constructor.prototype.initSelector : \":jqmData(role='\" + name + \"')\" );\n\n        $.mobile.widgets[ name ] = constructor;\n\n        return constructor;\n    };\n})( $.widget );\n\n// Make sure $.widget still has bridge and extend methods\n$.extend( $.widget, originalWidget );\n\n// For backcompat remove in 1.5\n$.mobile.document.on( \"create\", function( event ) {\n    $( event.target ).enhanceWithin();\n});\n\n$.widget( \"mobile.page\", {\n    options: {\n        theme: \"a\",\n        domCache: false,\n\n        // Deprecated in 1.4 remove in 1.5\n        keepNativeDefault: $.mobile.keepNative,\n\n        // Deprecated in 1.4 remove in 1.5\n        contentTheme: null,\n        enhanced: false\n    },\n\n    // DEPRECATED for > 1.4\n    // TODO remove at 1.5\n    _createWidget: function() {\n        $.Widget.prototype._createWidget.apply( this, arguments );\n        this._trigger( \"init\" );\n    },\n\n    _create: function() {\n        // If false is returned by the callbacks do not create the page\n        if ( this._trigger( \"beforecreate\" ) === false ) {\n            return false;\n        }\n\n        if ( !this.options.enhanced ) {\n            this._enhance();\n        }\n\n        this._on( this.element, {\n            pagebeforehide: \"removeContainerBackground\",\n            pagebeforeshow: \"_handlePageBeforeShow\"\n        });\n\n        this.element.enhanceWithin();\n        // Dialog widget is deprecated in 1.4 remove this in 1.5\n        if ( $.mobile.getAttribute( this.element[0], \"role\" ) === \"dialog\" && $.mobile.dialog ) {\n            this.element.dialog();\n        }\n    },\n\n    _enhance: function () {\n        var attrPrefix = \"data-\" + $.mobile.ns,\n            self = this;\n\n        if ( this.options.role ) {\n            this.element.attr( \"data-\" + $.mobile.ns + \"role\", this.options.role );\n        }\n\n        this.element\n            .attr( \"tabindex\", \"0\" )\n            .addClass( \"ui-page ui-page-theme-\" + this.options.theme );\n\n        // Manipulation of content os Deprecated as of 1.4 remove in 1.5\n        this.element.find( \"[\" + attrPrefix + \"role='content']\" ).each( function() {\n            var $this = $( this ),\n                theme = this.getAttribute( attrPrefix + \"theme\" ) || undefined;\n                self.options.contentTheme = theme || self.options.contentTheme || ( self.options.dialog && self.options.theme ) || ( self.element.jqmData(\"role\") === \"dialog\" &&  self.options.theme );\n                $this.addClass( \"ui-content\" );\n                if ( self.options.contentTheme ) {\n                    $this.addClass( \"ui-body-\" + ( self.options.contentTheme ) );\n                }\n                // Add ARIA role\n                $this.attr( \"role\", \"main\" ).addClass( \"ui-content\" );\n        });\n    },\n\n    bindRemove: function( callback ) {\n        var page = this.element;\n\n        // when dom caching is not enabled or the page is embedded bind to remove the page on hide\n        if ( !page.data( \"mobile-page\" ).options.domCache &&\n            page.is( \":jqmData(external-page='true')\" ) ) {\n\n            // TODO use _on - that is, sort out why it doesn't work in this case\n            page.bind( \"pagehide.remove\", callback || function( e, data ) {\n\n                //check if this is a same page transition and if so don't remove the page\n                if( !data.samePage ){\n                    var $this = $( this ),\n                        prEvent = new $.Event( \"pageremove\" );\n\n                    $this.trigger( prEvent );\n\n                    if ( !prEvent.isDefaultPrevented() ) {\n                        $this.removeWithDependents();\n                    }\n                }\n            });\n        }\n    },\n\n    _setOptions: function( o ) {\n        if ( o.theme !== undefined ) {\n            this.element.removeClass( \"ui-page-theme-\" + this.options.theme ).addClass( \"ui-page-theme-\" + o.theme );\n        }\n\n        if ( o.contentTheme !== undefined ) {\n            this.element.find( \"[data-\" + $.mobile.ns + \"='content']\" ).removeClass( \"ui-body-\" + this.options.contentTheme )\n                .addClass( \"ui-body-\" + o.contentTheme );\n        }\n    },\n\n    _handlePageBeforeShow: function(/* e */) {\n        this.setContainerBackground();\n    },\n    // Deprecated in 1.4 remove in 1.5\n    removeContainerBackground: function() {\n        this.element.closest( \":mobile-pagecontainer\" ).pagecontainer({ \"theme\": \"none\" });\n    },\n    // Deprecated in 1.4 remove in 1.5\n    // set the page container background to the page theme\n    setContainerBackground: function( theme ) {\n        this.element.parent().pagecontainer( { \"theme\": theme || this.options.theme } );\n    },\n    // Deprecated in 1.4 remove in 1.5\n    keepNativeSelector: function() {\n        var options = this.options,\n            keepNative = $.trim( options.keepNative || \"\" ),\n            globalValue = $.trim( $.mobile.keepNative ),\n            optionValue = $.trim( options.keepNativeDefault ),\n\n            // Check if $.mobile.keepNative has changed from the factory default\n            newDefault = ( keepNativeFactoryDefault === globalValue ?\n                \"\" : globalValue ),\n\n            // If $.mobile.keepNative has not changed, use options.keepNativeDefault\n            oldDefault = ( newDefault === \"\" ? optionValue : \"\" );\n\n        // Concatenate keepNative selectors from all sources where the value has\n        // changed or, if nothing has changed, return the default\n        return ( ( keepNative ? [ keepNative ] : [] )\n            .concat( newDefault ? [ newDefault ] : [] )\n            .concat( oldDefault ? [ oldDefault ] : [] )\n            .join( \", \" ) );\n    }\n});\n})( jQuery );\n\n(function( $, undefined ) {\n\n    $.widget( \"mobile.pagecontainer\", {\n        options: {\n            theme: \"a\"\n        },\n\n        initSelector: false,\n\n        _create: function() {\n            this._trigger( \"beforecreate\" );\n            this.setLastScrollEnabled = true;\n\n            this._on( this.window, {\n                // disable an scroll setting when a hashchange has been fired,\n                // this only works because the recording of the scroll position\n                // is delayed for 100ms after the browser might have changed the\n                // position because of the hashchange\n                navigate: \"_disableRecordScroll\",\n\n                // bind to scrollstop for the first page, \"pagechange\" won't be\n                // fired in that case\n                scrollstop: \"_delayedRecordScroll\"\n            });\n\n            // TODO consider moving the navigation handler OUT of widget into\n            //      some other object as glue between the navigate event and the\n            //      content widget load and change methods\n            this._on( this.window, { navigate: \"_filterNavigateEvents\" });\n\n            // TODO move from page* events to content* events\n            this._on({ pagechange: \"_afterContentChange\" });\n\n            // handle initial hashchange from chrome :(\n            this.window.one( \"navigate\", $.proxy(function() {\n                this.setLastScrollEnabled = true;\n            }, this));\n        },\n\n        _setOptions: function( options ) {\n            if ( options.theme !== undefined && options.theme !== \"none\" ) {\n                this.element.removeClass( \"ui-overlay-\" + this.options.theme )\n                    .addClass( \"ui-overlay-\" + options.theme );\n            } else if ( options.theme !== undefined ) {\n                this.element.removeClass( \"ui-overlay-\" + this.options.theme );\n            }\n\n            this._super( options );\n        },\n\n        _disableRecordScroll: function() {\n            this.setLastScrollEnabled = false;\n        },\n\n        _enableRecordScroll: function() {\n            this.setLastScrollEnabled = true;\n        },\n\n        // TODO consider the name here, since it's purpose specific\n        _afterContentChange: function() {\n            // once the page has changed, re-enable the scroll recording\n            this.setLastScrollEnabled = true;\n\n            // remove any binding that previously existed on the get scroll\n            // which may or may not be different than the scroll element\n            // determined for this page previously\n            this._off( this.window, \"scrollstop\" );\n\n            // determine and bind to the current scoll element which may be the\n            // window or in the case of touch overflow the element touch overflow\n            this._on( this.window, { scrollstop: \"_delayedRecordScroll\" });\n        },\n\n        _recordScroll: function() {\n            // this barrier prevents setting the scroll value based on\n            // the browser scrolling the window based on a hashchange\n            if ( !this.setLastScrollEnabled ) {\n                return;\n            }\n\n            var active = this._getActiveHistory(),\n                currentScroll, minScroll, defaultScroll;\n\n            if ( active ) {\n                currentScroll = this._getScroll();\n                minScroll = this._getMinScroll();\n                defaultScroll = this._getDefaultScroll();\n\n                // Set active page's lastScroll prop. If the location we're\n                // scrolling to is less than minScrollBack, let it go.\n                active.lastScroll = currentScroll < minScroll ? defaultScroll : currentScroll;\n            }\n        },\n\n        _delayedRecordScroll: function() {\n            setTimeout( $.proxy(this, \"_recordScroll\"), 100 );\n        },\n\n        _getScroll: function() {\n            return this.window.scrollTop();\n        },\n\n        _getMinScroll: function() {\n            return $.mobile.minScrollBack;\n        },\n\n        _getDefaultScroll: function() {\n            return $.mobile.defaultHomeScroll;\n        },\n\n        _filterNavigateEvents: function( e, data ) {\n            var url;\n\n            if ( e.originalEvent && e.originalEvent.isDefaultPrevented() ) {\n                return;\n            }\n\n            url = e.originalEvent.type.indexOf( \"hashchange\" ) > -1 ? data.state.hash : data.state.url;\n\n            if ( !url ) {\n                url = this._getHash();\n            }\n\n            if ( !url || url === \"#\" || url.indexOf( \"#\" + $.mobile.path.uiStateKey ) === 0 ) {\n                url = location.href;\n            }\n\n            this._handleNavigate( url, data.state );\n        },\n\n        _getHash: function() {\n            return $.mobile.path.parseLocation().hash;\n        },\n\n        // TODO active page should be managed by the container (ie, it should be a property)\n        getActivePage: function() {\n            return this.activePage;\n        },\n\n        // TODO the first page should be a property set during _create using the logic\n        //      that currently resides in init\n        _getInitialContent: function() {\n            return $.mobile.firstPage;\n        },\n\n        // TODO each content container should have a history object\n        _getHistory: function() {\n            return $.mobile.navigate.history;\n        },\n\n        _getActiveHistory: function() {\n            return this._getHistory().getActive();\n        },\n\n        // TODO the document base should be determined at creation\n        _getDocumentBase: function() {\n            return $.mobile.path.documentBase;\n        },\n\n        back: function() {\n            this.go( -1 );\n        },\n\n        forward: function() {\n            this.go( 1 );\n        },\n\n        go: function( steps ) {\n\n            //if hashlistening is enabled use native history method\n            if ( $.mobile.hashListeningEnabled ) {\n                window.history.go( steps );\n            } else {\n\n                //we are not listening to the hash so handle history internally\n                var activeIndex = $.mobile.navigate.history.activeIndex,\n                    index = activeIndex + parseInt( steps, 10 ),\n                    url = $.mobile.navigate.history.stack[ index ].url,\n                    direction = ( steps >= 1 )? \"forward\" : \"back\";\n\n                //update the history object\n                $.mobile.navigate.history.activeIndex = index;\n                $.mobile.navigate.history.previousIndex = activeIndex;\n\n                //change to the new page\n                this.change( url, { direction: direction, changeHash: false, fromHashChange: true } );\n            }\n        },\n\n        // TODO rename _handleDestination\n        _handleDestination: function( to ) {\n            var history;\n\n            // clean the hash for comparison if it's a url\n            if ( $.type(to) === \"string\" ) {\n                to = $.mobile.path.stripHash( to );\n            }\n\n            if ( to ) {\n                history = this._getHistory();\n\n                // At this point, 'to' can be one of 3 things, a cached page\n                // element from a history stack entry, an id, or site-relative /\n                // absolute URL. If 'to' is an id, we need to resolve it against\n                // the documentBase, not the location.href, since the hashchange\n                // could've been the result of a forward/backward navigation\n                // that crosses from an external page/dialog to an internal\n                // page/dialog.\n                //\n                // TODO move check to history object or path object?\n                to = !$.mobile.path.isPath( to ) ? ( $.mobile.path.makeUrlAbsolute( \"#\" + to, this._getDocumentBase() ) ) : to;\n            }\n            return to || this._getInitialContent();\n        },\n\n        _transitionFromHistory: function( direction, defaultTransition ) {\n            var history = this._getHistory(),\n                entry = ( direction === \"back\" ? history.getLast() : history.getActive() );\n\n            return ( entry && entry.transition ) || defaultTransition;\n        },\n\n        _handleDialog: function( changePageOptions, data ) {\n            var to, active, activeContent = this.getActivePage();\n\n            // If current active page is not a dialog skip the dialog and continue\n            // in the same direction\n            // Note: The dialog widget is deprecated as of 1.4.0 and will be removed in 1.5.0.\n            // Thus, as of 1.5.0 activeContent.data( \"mobile-dialog\" ) will always evaluate to\n            // falsy, so the second condition in the if-statement below can be removed altogether.\n            if ( activeContent && !activeContent.data( \"mobile-dialog\" ) ) {\n                // determine if we're heading forward or backward and continue\n                // accordingly past the current dialog\n                if ( data.direction === \"back\" ) {\n                    this.back();\n                } else {\n                    this.forward();\n                }\n\n                // prevent changePage call\n                return false;\n            } else {\n                // if the current active page is a dialog and we're navigating\n                // to a dialog use the dialog objected saved in the stack\n                to = data.pageUrl;\n                active = this._getActiveHistory();\n\n                // make sure to set the role, transition and reversal\n                // as most of this is lost by the domCache cleaning\n                $.extend( changePageOptions, {\n                    role: active.role,\n                    transition: this._transitionFromHistory(\n                        data.direction,\n                        changePageOptions.transition ),\n                    reverse: data.direction === \"back\"\n                });\n            }\n\n            return to;\n        },\n\n        _handleNavigate: function( url, data ) {\n            //find first page via hash\n            // TODO stripping the hash twice with handleUrl\n            var to = $.mobile.path.stripHash( url ), history = this._getHistory(),\n\n                // transition is false if it's the first page, undefined\n                // otherwise (and may be overridden by default)\n                transition = history.stack.length === 0 ? \"none\" :\n                    this._transitionFromHistory( data.direction ),\n\n                // default options for the changPage calls made after examining\n                // the current state of the page and the hash, NOTE that the\n                // transition is derived from the previous history entry\n                changePageOptions = {\n                    changeHash: false,\n                    fromHashChange: true,\n                    reverse: data.direction === \"back\"\n                };\n\n            $.extend( changePageOptions, data, {\n                transition: transition\n            });\n\n            // TODO move to _handleDestination ?\n            // If this isn't the first page, if the current url is a dialog hash\n            // key, and the initial destination isn't equal to the current target\n            // page, use the special dialog handling\n            if ( history.activeIndex > 0 &&\n                to.indexOf( $.mobile.dialogHashKey ) > -1 ) {\n\n                to = this._handleDialog( changePageOptions, data );\n\n                if ( to === false ) {\n                    return;\n                }\n            }\n\n            this._changeContent( this._handleDestination( to ), changePageOptions );\n        },\n\n        _changeContent: function( to, opts ) {\n            $.mobile.changePage( to, opts );\n        },\n\n        _getBase: function() {\n            return $.mobile.base;\n        },\n\n        _getNs: function() {\n            return $.mobile.ns;\n        },\n\n        _enhance: function( content, role ) {\n            // TODO consider supporting a custom callback, and passing in\n            // the settings which includes the role\n            return content.page({ role: role });\n        },\n\n        _include: function( page, settings ) {\n            // append to page and enhance\n            page.appendTo( this.element );\n\n            // use the page widget to enhance\n            this._enhance( page, settings.role );\n\n            // remove page on hide\n            page.page( \"bindRemove\" );\n        },\n\n        _find: function( absUrl ) {\n            // TODO consider supporting a custom callback\n            var fileUrl = this._createFileUrl( absUrl ),\n                dataUrl = this._createDataUrl( absUrl ),\n                page, initialContent = this._getInitialContent();\n\n            // Check to see if the page already exists in the DOM.\n            // NOTE do _not_ use the :jqmData pseudo selector because parenthesis\n            //      are a valid url char and it breaks on the first occurence\n            page = this.element\n                .children( \"[data-\" + this._getNs() +\n                    \"url='\" + $.mobile.path.hashToSelector( dataUrl ) + \"']\" );\n\n            // If we failed to find the page, check to see if the url is a\n            // reference to an embedded page. If so, it may have been dynamically\n            // injected by a developer, in which case it would be lacking a\n            // data-url attribute and in need of enhancement.\n            if ( page.length === 0 && dataUrl && !$.mobile.path.isPath( dataUrl ) ) {\n                page = this.element.children( $.mobile.path.hashToSelector(\"#\" + dataUrl) )\n                    .attr( \"data-\" + this._getNs() + \"url\", dataUrl )\n                    .jqmData( \"url\", dataUrl );\n            }\n\n            // If we failed to find a page in the DOM, check the URL to see if it\n            // refers to the first page in the application. Also check to make sure\n            // our cached-first-page is actually in the DOM. Some user deployed\n            // apps are pruning the first page from the DOM for various reasons.\n            // We check for this case here because we don't want a first-page with\n            // an id falling through to the non-existent embedded page error case.\n            if ( page.length === 0 &&\n                $.mobile.path.isFirstPageUrl( fileUrl ) &&\n                initialContent &&\n                initialContent.parent().length ) {\n                page = $( initialContent );\n            }\n\n            return page;\n        },\n\n        _getLoader: function() {\n            return $.mobile.loading();\n        },\n\n        _showLoading: function( delay, theme, msg, textonly ) {\n            // This configurable timeout allows cached pages a brief\n            // delay to load without showing a message\n            if ( this._loadMsg ) {\n                return;\n            }\n\n            this._loadMsg = setTimeout($.proxy(function() {\n                this._getLoader().loader( \"show\", theme, msg, textonly );\n                this._loadMsg = 0;\n            }, this), delay );\n        },\n\n        _hideLoading: function() {\n            // Stop message show timer\n            clearTimeout( this._loadMsg );\n            this._loadMsg = 0;\n\n            // Hide loading message\n            this._getLoader().loader( \"hide\" );\n        },\n\n        _showError: function() {\n            // make sure to remove the current loading message\n            this._hideLoading();\n\n            // show the error message\n            this._showLoading( 0, $.mobile.pageLoadErrorMessageTheme, $.mobile.pageLoadErrorMessage, true );\n\n            // hide the error message after a delay\n            // TODO configuration\n            setTimeout( $.proxy(this, \"_hideLoading\"), 1500 );\n        },\n\n        _parse: function( html, fileUrl ) {\n            // TODO consider allowing customization of this method. It's very JQM specific\n            var page, all = $( \"<div></div>\" );\n\n            //workaround to allow scripts to execute when included in page divs\n            all.get( 0 ).innerHTML = html;\n\n            page = all.find( \":jqmData(role='page'), :jqmData(role='dialog')\" ).first();\n\n            //if page elem couldn't be found, create one and insert the body element's contents\n            if ( !page.length ) {\n                page = $( \"<div data-\" + this._getNs() + \"role='page'>\" +\n                    ( html.split( /<\\/?body[^>]*>/gmi )[1] || \"\" ) +\n                    \"</div>\" );\n            }\n\n            // TODO tagging a page with external to make sure that embedded pages aren't\n            // removed by the various page handling code is bad. Having page handling code\n            // in many places is bad. Solutions post 1.0\n            page.attr( \"data-\" + this._getNs() + \"url\", this._createDataUrl( fileUrl ) )\n                .attr( \"data-\" + this._getNs() + \"external-page\", true );\n\n            return page;\n        },\n\n        _setLoadedTitle: function( page, html ) {\n            //page title regexp\n            var newPageTitle = html.match( /<title[^>]*>([^<]*)/ ) && RegExp.$1;\n\n            if ( newPageTitle && !page.jqmData(\"title\") ) {\n                newPageTitle = $( \"<div>\" + newPageTitle + \"</div>\" ).text();\n                page.jqmData( \"title\", newPageTitle );\n            }\n        },\n\n        _isRewritableBaseTag: function() {\n            return $.mobile.dynamicBaseEnabled && !$.support.dynamicBaseTag;\n        },\n\n        _createDataUrl: function( absoluteUrl ) {\n            return $.mobile.path.convertUrlToDataUrl( absoluteUrl );\n        },\n\n        _createFileUrl: function( absoluteUrl ) {\n            return $.mobile.path.getFilePath( absoluteUrl );\n        },\n\n        _triggerWithDeprecated: function( name, data, page ) {\n            var deprecatedEvent = $.Event( \"page\" + name ),\n                newEvent = $.Event( this.widgetName + name );\n\n            // DEPRECATED\n            // trigger the old deprecated event on the page if it's provided\n            ( page || this.element ).trigger( deprecatedEvent, data );\n\n            // use the widget trigger method for the new content* event\n            this._trigger( name, newEvent, data );\n\n            return {\n                deprecatedEvent: deprecatedEvent,\n                event: newEvent\n            };\n        },\n\n        // TODO it would be nice to split this up more but everything appears to be \"one off\"\n        //      or require ordering such that other bits are sprinkled in between parts that\n        //      could be abstracted out as a group\n        _loadSuccess: function( absUrl, triggerData, settings, deferred ) {\n            var fileUrl = this._createFileUrl( absUrl );\n\n            return $.proxy(function( html, textStatus, xhr ) {\n                //pre-parse html to check for a data-url,\n                //use it as the new fileUrl, base path, etc\n                var content,\n\n                    // TODO handle dialogs again\n                    pageElemRegex = new RegExp( \"(<[^>]+\\\\bdata-\" + this._getNs() + \"role=[\\\"']?page[\\\"']?[^>]*>)\" ),\n\n                    dataUrlRegex = new RegExp( \"\\\\bdata-\" + this._getNs() + \"url=[\\\"']?([^\\\"'>]*)[\\\"']?\" );\n\n                // data-url must be provided for the base tag so resource requests\n                // can be directed to the correct url. loading into a temprorary\n                // element makes these requests immediately\n                if ( pageElemRegex.test( html ) &&\n                    RegExp.$1 &&\n                    dataUrlRegex.test( RegExp.$1 ) &&\n                    RegExp.$1 ) {\n                    fileUrl = $.mobile.path.getFilePath( $(\"<div>\" + RegExp.$1 + \"</div>\").text() );\n\n                    // We specify that, if a data-url attribute is given on the page div, its value\n                    // must be given non-URL-encoded. However, in this part of the code, fileUrl is\n                    // assumed to be URL-encoded, so we URL-encode the retrieved value here\n                    fileUrl = this.window[ 0 ].encodeURIComponent( fileUrl );\n                }\n\n                //dont update the base tag if we are prefetching\n                if ( settings.prefetch === undefined ) {\n                    this._getBase().set( fileUrl );\n                }\n\n                content = this._parse( html, fileUrl );\n\n                this._setLoadedTitle( content, html );\n\n                // Add the content reference and xhr to our triggerData.\n                triggerData.xhr = xhr;\n                triggerData.textStatus = textStatus;\n\n                // DEPRECATED\n                triggerData.page = content;\n\n                triggerData.content = content;\n\n                triggerData.toPage = content;\n\n                // If the default behavior is prevented, stop here!\n                // Note that it is the responsibility of the listener/handler\n                // that called preventDefault(), to resolve/reject the\n                // deferred object within the triggerData.\n                if ( this._triggerWithDeprecated( \"load\", triggerData ).event.isDefaultPrevented() ) {\n                    return;\n                }\n\n                // rewrite src and href attrs to use a base url if the base tag won't work\n                if ( this._isRewritableBaseTag() && content ) {\n                    this._getBase().rewrite( fileUrl, content );\n                }\n\n                this._include( content, settings );\n\n                // Remove loading message.\n                if ( settings.showLoadMsg ) {\n                    this._hideLoading();\n                }\n\n                deferred.resolve( absUrl, settings, content );\n            }, this);\n        },\n\n        _loadDefaults: {\n            type: \"get\",\n            data: undefined,\n\n            // DEPRECATED\n            reloadPage: false,\n\n            reload: false,\n\n            // By default we rely on the role defined by the @data-role attribute.\n            role: undefined,\n\n            showLoadMsg: false,\n\n            // This delay allows loads that pull from browser cache to\n            // occur without showing the loading message.\n            loadMsgDelay: 50\n        },\n\n        load: function( url, options ) {\n            // This function uses deferred notifications to let callers\n            // know when the content is done loading, or if an error has occurred.\n            var deferred = ( options && options.deferred ) || $.Deferred(),\n\n                // Examining the option \"reloadPage\" passed by the user is deprecated as of 1.4.0\n                // and will be removed in 1.5.0.\n                // Copy option \"reloadPage\" to \"reload\", but only if option \"reload\" is not present\n                reloadOptionExtension =\n                    ( ( options && options.reload === undefined &&\n                        options.reloadPage !== undefined ) ?\n                            { reload: options.reloadPage } : {} ),\n\n                // The default load options with overrides specified by the caller.\n                settings = $.extend( {}, this._loadDefaults, options, reloadOptionExtension ),\n\n                // The DOM element for the content after it has been loaded.\n                content = null,\n\n                // The absolute version of the URL passed into the function. This\n                // version of the URL may contain dialog/subcontent params in it.\n                absUrl = $.mobile.path.makeUrlAbsolute( url, this._findBaseWithDefault() ),\n                fileUrl, dataUrl, pblEvent, triggerData;\n\n            // If the caller provided data, and we're using \"get\" request,\n            // append the data to the URL.\n            if ( settings.data && settings.type === \"get\" ) {\n                absUrl = $.mobile.path.addSearchParams( absUrl, settings.data );\n                settings.data = undefined;\n            }\n\n            // If the caller is using a \"post\" request, reload must be true\n            if ( settings.data && settings.type === \"post\" ) {\n                settings.reload = true;\n            }\n\n            // The absolute version of the URL minus any dialog/subcontent params.\n            // In otherwords the real URL of the content to be loaded.\n            fileUrl = this._createFileUrl( absUrl );\n\n            // The version of the Url actually stored in the data-url attribute of\n            // the content. For embedded content, it is just the id of the page. For\n            // content within the same domain as the document base, it is the site\n            // relative path. For cross-domain content (Phone Gap only) the entire\n            // absolute Url is used to load the content.\n            dataUrl = this._createDataUrl( absUrl );\n\n            content = this._find( absUrl );\n\n            // If it isn't a reference to the first content and refers to missing\n            // embedded content reject the deferred and return\n            if ( content.length === 0 &&\n                $.mobile.path.isEmbeddedPage(fileUrl) &&\n                !$.mobile.path.isFirstPageUrl(fileUrl) ) {\n                deferred.reject( absUrl, settings );\n                return deferred.promise();\n            }\n\n            // Reset base to the default document base\n            // TODO figure out why we doe this\n            this._getBase().reset();\n\n            // If the content we are interested in is already in the DOM,\n            // and the caller did not indicate that we should force a\n            // reload of the file, we are done. Resolve the deferrred so that\n            // users can bind to .done on the promise\n            if ( content.length && !settings.reload ) {\n                this._enhance( content, settings.role );\n                deferred.resolve( absUrl, settings, content );\n\n                //if we are reloading the content make sure we update\n                // the base if its not a prefetch\n                if ( !settings.prefetch ) {\n                    this._getBase().set(url);\n                }\n\n                return deferred.promise();\n            }\n\n            triggerData = {\n                url: url,\n                absUrl: absUrl,\n                toPage: url,\n                prevPage: options ? options.fromPage : undefined,\n                dataUrl: dataUrl,\n                deferred: deferred,\n                options: settings\n            };\n\n            // Let listeners know we're about to load content.\n            pblEvent = this._triggerWithDeprecated( \"beforeload\", triggerData );\n\n            // If the default behavior is prevented, stop here!\n            if ( pblEvent.deprecatedEvent.isDefaultPrevented() ||\n                pblEvent.event.isDefaultPrevented() ) {\n                return deferred.promise();\n            }\n\n            if ( settings.showLoadMsg ) {\n                this._showLoading( settings.loadMsgDelay );\n            }\n\n            // Reset base to the default document base.\n            // only reset if we are not prefetching\n            if ( settings.prefetch === undefined ) {\n                this._getBase().reset();\n            }\n\n            if ( !( $.mobile.allowCrossDomainPages ||\n                $.mobile.path.isSameDomain($.mobile.path.documentUrl, absUrl ) ) ) {\n                deferred.reject( absUrl, settings );\n                return deferred.promise();\n            }\n\n            // Load the new content.\n            $.ajax({\n                url: fileUrl,\n                type: settings.type,\n                data: settings.data,\n                contentType: settings.contentType,\n                dataType: \"html\",\n                success: this._loadSuccess( absUrl, triggerData, settings, deferred ),\n                error: this._loadError( absUrl, triggerData, settings, deferred )\n            });\n\n            return deferred.promise();\n        },\n\n        _loadError: function( absUrl, triggerData, settings, deferred ) {\n            return $.proxy(function( xhr, textStatus, errorThrown ) {\n                //set base back to current path\n                this._getBase().set( $.mobile.path.get() );\n\n                // Add error info to our triggerData.\n                triggerData.xhr = xhr;\n                triggerData.textStatus = textStatus;\n                triggerData.errorThrown = errorThrown;\n\n                // Let listeners know the page load failed.\n                var plfEvent = this._triggerWithDeprecated( \"loadfailed\", triggerData );\n\n                // If the default behavior is prevented, stop here!\n                // Note that it is the responsibility of the listener/handler\n                // that called preventDefault(), to resolve/reject the\n                // deferred object within the triggerData.\n                if ( plfEvent.deprecatedEvent.isDefaultPrevented() ||\n                    plfEvent.event.isDefaultPrevented() ) {\n                    return;\n                }\n\n                // Remove loading message.\n                if ( settings.showLoadMsg ) {\n                    this._showError();\n                }\n\n                deferred.reject( absUrl, settings );\n            }, this);\n        },\n\n        _getTransitionHandler: function( transition ) {\n            transition = $.mobile._maybeDegradeTransition( transition );\n\n            //find the transition handler for the specified transition. If there\n            //isn't one in our transitionHandlers dictionary, use the default one.\n            //call the handler immediately to kick-off the transition.\n            return $.mobile.transitionHandlers[ transition ] || $.mobile.defaultTransitionHandler;\n        },\n\n        // TODO move into transition handlers?\n        _triggerCssTransitionEvents: function( to, from, prefix ) {\n            var samePage = false;\n\n            prefix = prefix || \"\";\n\n            // TODO decide if these events should in fact be triggered on the container\n            if ( from ) {\n\n                //Check if this is a same page transition and tell the handler in page\n                if( to[0] === from[0] ){\n                    samePage = true;\n                }\n\n                //trigger before show/hide events\n                // TODO deprecate nextPage in favor of next\n                this._triggerWithDeprecated( prefix + \"hide\", {\n\n                    // Deprecated in 1.4 remove in 1.5\n                    nextPage: to,\n                    toPage: to,\n                    prevPage: from,\n                    samePage: samePage\n                }, from );\n            }\n\n            // TODO deprecate prevPage in favor of previous\n            this._triggerWithDeprecated( prefix + \"show\", {\n                prevPage: from || $( \"\" ),\n                toPage: to\n            }, to );\n        },\n\n        // TODO make private once change has been defined in the widget\n        _cssTransition: function( to, from, options ) {\n            var transition = options.transition,\n                reverse = options.reverse,\n                deferred = options.deferred,\n                TransitionHandler,\n                promise;\n\n            this._triggerCssTransitionEvents( to, from, \"before\" );\n\n            // TODO put this in a binding to events *outside* the widget\n            this._hideLoading();\n\n            TransitionHandler = this._getTransitionHandler( transition );\n\n            promise = ( new TransitionHandler( transition, reverse, to, from ) ).transition();\n\n            promise.done( $.proxy( function() {\n                this._triggerCssTransitionEvents( to, from );\n            }, this ));\n\n            // TODO temporary accomodation of argument deferred\n            promise.done(function() {\n                deferred.resolve.apply( deferred, arguments );\n            });\n        },\n\n        _releaseTransitionLock: function() {\n            //release transition lock so navigation is free again\n            isPageTransitioning = false;\n            if ( pageTransitionQueue.length > 0 ) {\n                $.mobile.changePage.apply( null, pageTransitionQueue.pop() );\n            }\n        },\n\n        _removeActiveLinkClass: function( force ) {\n            //clear out the active button state\n            $.mobile.removeActiveLinkClass( force );\n        },\n\n        _loadUrl: function( to, triggerData, settings ) {\n            // preserve the original target as the dataUrl value will be\n            // simplified eg, removing ui-state, and removing query params\n            // from the hash this is so that users who want to use query\n            // params have access to them in the event bindings for the page\n            // life cycle See issue #5085\n            settings.target = to;\n            settings.deferred = $.Deferred();\n\n            this.load( to, settings );\n\n            settings.deferred.done($.proxy(function( url, options, content ) {\n                isPageTransitioning = false;\n\n                // store the original absolute url so that it can be provided\n                // to events in the triggerData of the subsequent changePage call\n                options.absUrl = triggerData.absUrl;\n\n                this.transition( content, triggerData, options );\n            }, this));\n\n            settings.deferred.fail($.proxy(function(/* url, options */) {\n                this._removeActiveLinkClass( true );\n                this._releaseTransitionLock();\n                this._triggerWithDeprecated( \"changefailed\", triggerData );\n            }, this));\n        },\n\n        _triggerPageBeforeChange: function( to, triggerData, settings ) {\n            var returnEvents;\n\n            triggerData.prevPage = this.activePage;\n            $.extend( triggerData, {\n                toPage: to,\n                options: settings\n            });\n\n            // NOTE: preserve the original target as the dataUrl value will be\n            // simplified eg, removing ui-state, and removing query params from\n            // the hash this is so that users who want to use query params have\n            // access to them in the event bindings for the page life cycle\n            // See issue #5085\n            if ( $.type(to) === \"string\" ) {\n                // if the toPage is a string simply convert it\n                triggerData.absUrl = $.mobile.path.makeUrlAbsolute( to, this._findBaseWithDefault() );\n            } else {\n                // if the toPage is a jQuery object grab the absolute url stored\n                // in the loadPage callback where it exists\n                triggerData.absUrl = settings.absUrl;\n            }\n\n            // Let listeners know we're about to change the current page.\n            returnEvents = this._triggerWithDeprecated( \"beforechange\", triggerData );\n\n            // If the default behavior is prevented, stop here!\n            if ( returnEvents.event.isDefaultPrevented() ||\n                returnEvents.deprecatedEvent.isDefaultPrevented() ) {\n                return false;\n            }\n\n            return true;\n        },\n\n        change: function( to, options ) {\n            // If we are in the midst of a transition, queue the current request.\n            // We'll call changePage() once we're done with the current transition\n            // to service the request.\n            if ( isPageTransitioning ) {\n                pageTransitionQueue.unshift( arguments );\n                return;\n            }\n\n            var settings = $.extend( {}, $.mobile.changePage.defaults, options ),\n                triggerData = {};\n\n            // Make sure we have a fromPage.\n            settings.fromPage = settings.fromPage || this.activePage;\n\n            // if the page beforechange default is prevented return early\n            if ( !this._triggerPageBeforeChange(to, triggerData, settings) ) {\n                return;\n            }\n\n            // We allow \"pagebeforechange\" observers to modify the to in\n            // the trigger data to allow for redirects. Make sure our to is\n            // updated. We also need to re-evaluate whether it is a string,\n            // because an object can also be replaced by a string\n            to = triggerData.toPage;\n\n            // If the caller passed us a url, call loadPage()\n            // to make sure it is loaded into the DOM. We'll listen\n            // to the promise object it returns so we know when\n            // it is done loading or if an error ocurred.\n            if ( $.type(to) === \"string\" ) {\n                // Set the isPageTransitioning flag to prevent any requests from\n                // entering this method while we are in the midst of loading a page\n                // or transitioning.\n                isPageTransitioning = true;\n\n                this._loadUrl( to, triggerData, settings );\n            } else {\n                this.transition( to, triggerData, settings );\n            }\n        },\n\n        transition: function( toPage, triggerData, settings ) {\n            var fromPage, url, pageUrl, fileUrl,\n                active, activeIsInitialPage,\n                historyDir, pageTitle, isDialog,\n                alreadyThere, newPageTitle,\n                params,    cssTransitionDeferred,\n                beforeTransition;\n\n            // If we are in the midst of a transition, queue the current request.\n            // We'll call changePage() once we're done with the current transition\n            // to service the request.\n            if ( isPageTransitioning ) {\n                // make sure to only queue the to and settings values so the arguments\n                // work with a call to the change method\n                pageTransitionQueue.unshift( [toPage, settings] );\n                return;\n            }\n\n            // DEPRECATED - this call only, in favor of the before transition\n            // if the page beforechange default is prevented return early\n            if ( !this._triggerPageBeforeChange(toPage, triggerData, settings) ) {\n                return;\n            }\n\n            triggerData.prevPage = settings.fromPage;\n            // if the (content|page)beforetransition default is prevented return early\n            // Note, we have to check for both the deprecated and new events\n            beforeTransition = this._triggerWithDeprecated( \"beforetransition\", triggerData );\n            if (beforeTransition.deprecatedEvent.isDefaultPrevented() ||\n                beforeTransition.event.isDefaultPrevented() ) {\n                return;\n            }\n\n            // Set the isPageTransitioning flag to prevent any requests from\n            // entering this method while we are in the midst of loading a page\n            // or transitioning.\n            isPageTransitioning = true;\n\n            // If we are going to the first-page of the application, we need to make\n            // sure settings.dataUrl is set to the application document url. This allows\n            // us to avoid generating a document url with an id hash in the case where the\n            // first-page of the document has an id attribute specified.\n            if ( toPage[ 0 ] === $.mobile.firstPage[ 0 ] && !settings.dataUrl ) {\n                settings.dataUrl = $.mobile.path.documentUrl.hrefNoHash;\n            }\n\n            // The caller passed us a real page DOM element. Update our\n            // internal state and then trigger a transition to the page.\n            fromPage = settings.fromPage;\n            url = ( settings.dataUrl && $.mobile.path.convertUrlToDataUrl(settings.dataUrl) ) ||\n                toPage.jqmData( \"url\" );\n\n            // The pageUrl var is usually the same as url, except when url is obscured\n            // as a dialog url. pageUrl always contains the file path\n            pageUrl = url;\n            fileUrl = $.mobile.path.getFilePath( url );\n            active = $.mobile.navigate.history.getActive();\n            activeIsInitialPage = $.mobile.navigate.history.activeIndex === 0;\n            historyDir = 0;\n            pageTitle = document.title;\n            isDialog = ( settings.role === \"dialog\" ||\n                toPage.jqmData( \"role\" ) === \"dialog\" ) &&\n                toPage.jqmData( \"dialog\" ) !== true;\n\n            // By default, we prevent changePage requests when the fromPage and toPage\n            // are the same element, but folks that generate content\n            // manually/dynamically and reuse pages want to be able to transition to\n            // the same page. To allow this, they will need to change the default\n            // value of allowSamePageTransition to true, *OR*, pass it in as an\n            // option when they manually call changePage(). It should be noted that\n            // our default transition animations assume that the formPage and toPage\n            // are different elements, so they may behave unexpectedly. It is up to\n            // the developer that turns on the allowSamePageTransitiona option to\n            // either turn off transition animations, or make sure that an appropriate\n            // animation transition is used.\n            if ( fromPage && fromPage[0] === toPage[0] &&\n                !settings.allowSamePageTransition ) {\n\n                isPageTransitioning = false;\n                this._triggerWithDeprecated( \"transition\", triggerData );\n                this._triggerWithDeprecated( \"change\", triggerData );\n\n                // Even if there is no page change to be done, we should keep the\n                // urlHistory in sync with the hash changes\n                if ( settings.fromHashChange ) {\n                    $.mobile.navigate.history.direct({ url: url });\n                }\n\n                return;\n            }\n\n            // We need to make sure the page we are given has already been enhanced.\n            toPage.page({ role: settings.role });\n\n            // If the changePage request was sent from a hashChange event, check to\n            // see if the page is already within the urlHistory stack. If so, we'll\n            // assume the user hit the forward/back button and will try to match the\n            // transition accordingly.\n            if ( settings.fromHashChange ) {\n                historyDir = settings.direction === \"back\" ? -1 : 1;\n            }\n\n            // Kill the keyboard.\n            // XXX_jblas: We need to stop crawling the entire document to kill focus.\n            //            Instead, we should be tracking focus with a delegate()\n            //            handler so we already have the element in hand at this\n            //            point.\n            // Wrap this in a try/catch block since IE9 throw \"Unspecified error\" if\n            // document.activeElement is undefined when we are in an IFrame.\n            try {\n                if ( document.activeElement &&\n                    document.activeElement.nodeName.toLowerCase() !== \"body\" ) {\n\n                    $( document.activeElement ).blur();\n                } else {\n                    $( \"input:focus, textarea:focus, select:focus\" ).blur();\n                }\n            } catch( e ) {}\n\n            // Record whether we are at a place in history where a dialog used to be -\n            // if so, do not add a new history entry and do not change the hash either\n            alreadyThere = false;\n\n            // If we're displaying the page as a dialog, we don't want the url\n            // for the dialog content to be used in the hash. Instead, we want\n            // to append the dialogHashKey to the url of the current page.\n            if ( isDialog && active ) {\n                // on the initial page load active.url is undefined and in that case\n                // should be an empty string. Moving the undefined -> empty string back\n                // into urlHistory.addNew seemed imprudent given undefined better\n                // represents the url state\n\n                // If we are at a place in history that once belonged to a dialog, reuse\n                // this state without adding to urlHistory and without modifying the\n                // hash. However, if a dialog is already displayed at this point, and\n                // we're about to display another dialog, then we must add another hash\n                // and history entry on top so that one may navigate back to the\n                // original dialog\n                if ( active.url &&\n                    active.url.indexOf( $.mobile.dialogHashKey ) > -1 &&\n                    this.activePage &&\n                    !this.activePage.hasClass( \"ui-dialog\" ) &&\n                    $.mobile.navigate.history.activeIndex > 0 ) {\n\n                    settings.changeHash = false;\n                    alreadyThere = true;\n                }\n\n                // Normally, we tack on a dialog hash key, but if this is the location\n                // of a stale dialog, we reuse the URL from the entry\n                url = ( active.url || \"\" );\n\n                // account for absolute urls instead of just relative urls use as hashes\n                if ( !alreadyThere && url.indexOf(\"#\") > -1 ) {\n                    url += $.mobile.dialogHashKey;\n                } else {\n                    url += \"#\" + $.mobile.dialogHashKey;\n                }\n            }\n\n            // if title element wasn't found, try the page div data attr too\n            // If this is a deep-link or a reload ( active === undefined ) then just\n            // use pageTitle\n            newPageTitle = ( !active ) ? pageTitle : toPage.jqmData( \"title\" ) ||\n                toPage.children( \":jqmData(role='header')\" ).find( \".ui-title\" ).text();\n            if ( !!newPageTitle && pageTitle === document.title ) {\n                pageTitle = newPageTitle;\n            }\n            if ( !toPage.jqmData( \"title\" ) ) {\n                toPage.jqmData( \"title\", pageTitle );\n            }\n\n            // Make sure we have a transition defined.\n            settings.transition = settings.transition ||\n                ( ( historyDir && !activeIsInitialPage ) ? active.transition : undefined ) ||\n                ( isDialog ? $.mobile.defaultDialogTransition : $.mobile.defaultPageTransition );\n\n            //add page to history stack if it's not back or forward\n            if ( !historyDir && alreadyThere ) {\n                $.mobile.navigate.history.getActive().pageUrl = pageUrl;\n            }\n\n            // Set the location hash.\n            if ( url && !settings.fromHashChange ) {\n\n                // rebuilding the hash here since we loose it earlier on\n                // TODO preserve the originally passed in path\n                if ( !$.mobile.path.isPath( url ) && url.indexOf( \"#\" ) < 0 ) {\n                    url = \"#\" + url;\n                }\n\n                // TODO the property names here are just silly\n                params = {\n                    transition: settings.transition,\n                    title: pageTitle,\n                    pageUrl: pageUrl,\n                    role: settings.role\n                };\n\n                if ( settings.changeHash !== false && $.mobile.hashListeningEnabled ) {\n                    $.mobile.navigate( this.window[ 0 ].encodeURI( url ), params, true);\n                } else if ( toPage[ 0 ] !== $.mobile.firstPage[ 0 ] ) {\n                    $.mobile.navigate.history.add( url, params );\n                }\n            }\n\n            //set page title\n            document.title = pageTitle;\n\n            //set \"toPage\" as activePage deprecated in 1.4 remove in 1.5\n            $.mobile.activePage = toPage;\n\n            //new way to handle activePage\n            this.activePage = toPage;\n\n            // If we're navigating back in the URL history, set reverse accordingly.\n            settings.reverse = settings.reverse || historyDir < 0;\n\n            cssTransitionDeferred = $.Deferred();\n\n            this._cssTransition(toPage, fromPage, {\n                transition: settings.transition,\n                reverse: settings.reverse,\n                deferred: cssTransitionDeferred\n            });\n\n            cssTransitionDeferred.done($.proxy(function( name, reverse, $to, $from, alreadyFocused ) {\n                $.mobile.removeActiveLinkClass();\n\n                //if there's a duplicateCachedPage, remove it from the DOM now that it's hidden\n                if ( settings.duplicateCachedPage ) {\n                    settings.duplicateCachedPage.remove();\n                }\n\n                // despite visibility: hidden addresses issue #2965\n                // https://github.com/jquery/jquery-mobile/issues/2965\n                if ( !alreadyFocused ) {\n                    $.mobile.focusPage( toPage );\n                }\n\n                this._releaseTransitionLock();\n                this._triggerWithDeprecated( \"transition\", triggerData );\n                this._triggerWithDeprecated( \"change\", triggerData );\n            }, this));\n        },\n\n        // determine the current base url\n        _findBaseWithDefault: function() {\n            var closestBase = ( this.activePage &&\n            $.mobile.getClosestBaseUrl( this.activePage ) );\n        return closestBase || $.mobile.path.documentBase.hrefNoHash;\n        }\n    });\n\n    // The following handlers should be bound after mobileinit has been triggered\n    // the following deferred is resolved in the init file\n    $.mobile.navreadyDeferred = $.Deferred();\n\n    //these variables make all page containers use the same queue and only navigate one at a time\n    // queue to hold simultanious page transitions\n    var pageTransitionQueue = [],\n\n        // indicates whether or not page is in process of transitioning\n        isPageTransitioning = false;\n\n})( jQuery );\n\n(function( $, undefined ) {\n\n        // resolved on domready\n    var domreadyDeferred = $.Deferred(),\n\n        // resolved and nulled on window.load()\n        loadDeferred = $.Deferred(),\n\n        // function that resolves the above deferred\n        pageIsFullyLoaded = function() {\n\n            // Resolve and null the deferred\n            loadDeferred.resolve();\n            loadDeferred = null;\n        },\n\n        documentUrl = $.mobile.path.documentUrl,\n\n        // used to track last vclicked element to make sure its value is added to form data\n        $lastVClicked = null;\n\n    /* Event Bindings - hashchange, submit, and click */\n    function findClosestLink( ele )    {\n        while ( ele ) {\n            // Look for the closest element with a nodeName of \"a\".\n            // Note that we are checking if we have a valid nodeName\n            // before attempting to access it. This is because the\n            // node we get called with could have originated from within\n            // an embedded SVG document where some symbol instance elements\n            // don't have nodeName defined on them, or strings are of type\n            // SVGAnimatedString.\n            if ( ( typeof ele.nodeName === \"string\" ) && ele.nodeName.toLowerCase() === \"a\" ) {\n                break;\n            }\n            ele = ele.parentNode;\n        }\n        return ele;\n    }\n\n    $.mobile.loadPage = function( url, opts ) {\n        var container;\n\n        opts = opts || {};\n        container = ( opts.pageContainer || $.mobile.pageContainer );\n\n        // create the deferred that will be supplied to loadPage callers\n        // and resolved by the content widget's load method\n        opts.deferred = $.Deferred();\n\n        // Preferring to allow exceptions for uninitialized opts.pageContainer\n        // widgets so we know if we need to force init here for users\n        container.pagecontainer( \"load\", url, opts );\n\n        // provide the deferred\n        return opts.deferred.promise();\n    };\n\n    //define vars for interal use\n\n    /* internal utility functions */\n\n    // NOTE Issue #4950 Android phonegap doesn't navigate back properly\n    //      when a full page refresh has taken place. It appears that hashchange\n    //      and replacestate history alterations work fine but we need to support\n    //      both forms of history traversal in our code that uses backward history\n    //      movement\n    $.mobile.back = function() {\n        var nav = window.navigator;\n\n        // if the setting is on and the navigator object is\n        // available use the phonegap navigation capability\n        if ( this.phonegapNavigationEnabled &&\n            nav &&\n            nav.app &&\n            nav.app.backHistory ) {\n            nav.app.backHistory();\n        } else {\n            $.mobile.pageContainer.pagecontainer( \"back\" );\n        }\n    };\n\n    // Direct focus to the page title, or otherwise first focusable element\n    $.mobile.focusPage = function ( page ) {\n        var autofocus = page.find( \"[autofocus]\" ),\n            pageTitle = page.find( \".ui-title:eq(0)\" );\n\n        if ( autofocus.length ) {\n            autofocus.focus();\n            return;\n        }\n\n        if ( pageTitle.length ) {\n            pageTitle.focus();\n        } else{\n            page.focus();\n        }\n    };\n\n    // No-op implementation of transition degradation\n    $.mobile._maybeDegradeTransition = $.mobile._maybeDegradeTransition || function( transition ) {\n        return transition;\n    };\n\n    // Exposed $.mobile methods\n\n    $.mobile.changePage = function( to, options ) {\n        $.mobile.pageContainer.pagecontainer( \"change\", to, options );\n    };\n\n    $.mobile.changePage.defaults = {\n        transition: undefined,\n        reverse: false,\n        changeHash: true,\n        fromHashChange: false,\n        role: undefined, // By default we rely on the role defined by the @data-role attribute.\n        duplicateCachedPage: undefined,\n        pageContainer: undefined,\n        showLoadMsg: true, //loading message shows by default when pages are being fetched during changePage\n        dataUrl: undefined,\n        fromPage: undefined,\n        allowSamePageTransition: false\n    };\n\n    $.mobile._registerInternalEvents = function() {\n        var getAjaxFormData = function( $form, calculateOnly ) {\n            var url, ret = true, formData, vclickedName, method;\n            if ( !$.mobile.ajaxEnabled ||\n                    // test that the form is, itself, ajax false\n                    $form.is( \":jqmData(ajax='false')\" ) ||\n                    // test that $.mobile.ignoreContentEnabled is set and\n                    // the form or one of it's parents is ajax=false\n                    !$form.jqmHijackable().length ||\n                    $form.attr( \"target\" ) ) {\n                return false;\n            }\n\n            url = ( $lastVClicked && $lastVClicked.attr( \"formaction\" ) ) ||\n                $form.attr( \"action\" );\n            method = ( $form.attr( \"method\" ) || \"get\" ).toLowerCase();\n\n            // If no action is specified, browsers default to using the\n            // URL of the document containing the form. Since we dynamically\n            // pull in pages from external documents, the form should submit\n            // to the URL for the source document of the page containing\n            // the form.\n            if ( !url ) {\n                // Get the @data-url for the page containing the form.\n                url = $.mobile.getClosestBaseUrl( $form );\n\n                // NOTE: If the method is \"get\", we need to strip off the query string\n                // because it will get replaced with the new form data. See issue #5710.\n                if ( method === \"get\" ) {\n                    url = $.mobile.path.parseUrl( url ).hrefNoSearch;\n                }\n\n                if ( url === $.mobile.path.documentBase.hrefNoHash ) {\n                    // The url we got back matches the document base,\n                    // which means the page must be an internal/embedded page,\n                    // so default to using the actual document url as a browser\n                    // would.\n                    url = documentUrl.hrefNoSearch;\n                }\n            }\n\n            url = $.mobile.path.makeUrlAbsolute(  url, $.mobile.getClosestBaseUrl( $form ) );\n\n            if ( ( $.mobile.path.isExternal( url ) && !$.mobile.path.isPermittedCrossDomainRequest( documentUrl, url ) ) ) {\n                return false;\n            }\n\n            if ( !calculateOnly ) {\n                formData = $form.serializeArray();\n\n                if ( $lastVClicked && $lastVClicked[ 0 ].form === $form[ 0 ] ) {\n                    vclickedName = $lastVClicked.attr( \"name\" );\n                    if ( vclickedName ) {\n                        // Make sure the last clicked element is included in the form\n                        $.each( formData, function( key, value ) {\n                            if ( value.name === vclickedName ) {\n                                // Unset vclickedName - we've found it in the serialized data already\n                                vclickedName = \"\";\n                                return false;\n                            }\n                        });\n                        if ( vclickedName ) {\n                            formData.push( { name: vclickedName, value: $lastVClicked.attr( \"value\" ) } );\n                        }\n                    }\n                }\n\n                ret = {\n                    url: url,\n                    options: {\n                        type:        method,\n                        data:        $.param( formData ),\n                        transition:    $form.jqmData( \"transition\" ),\n                        reverse:    $form.jqmData( \"direction\" ) === \"reverse\",\n                        reloadPage:    true\n                    }\n                };\n            }\n\n            return ret;\n        };\n\n        //bind to form submit events, handle with Ajax\n        $.mobile.document.delegate( \"form\", \"submit\", function( event ) {\n            var formData;\n\n            if ( !event.isDefaultPrevented() ) {\n                formData = getAjaxFormData( $( this ) );\n                if ( formData ) {\n                    $.mobile.changePage( formData.url, formData.options );\n                    event.preventDefault();\n                }\n            }\n        });\n\n        //add active state on vclick\n        $.mobile.document.bind( \"vclick\", function( event ) {\n            var $btn, btnEls, target = event.target, needClosest = false;\n            // if this isn't a left click we don't care. Its important to note\n            // that when the virtual event is generated it will create the which attr\n            if ( event.which > 1 || !$.mobile.linkBindingEnabled ) {\n                return;\n            }\n\n            // Record that this element was clicked, in case we need it for correct\n            // form submission during the \"submit\" handler above\n            $lastVClicked = $( target );\n\n            // Try to find a target element to which the active class will be applied\n            if ( $.data( target, \"mobile-button\" ) ) {\n                // If the form will not be submitted via AJAX, do not add active class\n                if ( !getAjaxFormData( $( target ).closest( \"form\" ), true ) ) {\n                    return;\n                }\n                // We will apply the active state to this button widget - the parent\n                // of the input that was clicked will have the associated data\n                if ( target.parentNode ) {\n                    target = target.parentNode;\n                }\n            } else {\n                target = findClosestLink( target );\n                if ( !( target && $.mobile.path.parseUrl( target.getAttribute( \"href\" ) || \"#\" ).hash !== \"#\" ) ) {\n                    return;\n                }\n\n                // TODO teach $.mobile.hijackable to operate on raw dom elements so the\n                // link wrapping can be avoided\n                if ( !$( target ).jqmHijackable().length ) {\n                    return;\n                }\n            }\n\n            // Avoid calling .closest by using the data set during .buttonMarkup()\n            // List items have the button data in the parent of the element clicked\n            if ( !!~target.className.indexOf( \"ui-link-inherit\" ) ) {\n                if ( target.parentNode ) {\n                    btnEls = $.data( target.parentNode, \"buttonElements\" );\n                }\n            // Otherwise, look for the data on the target itself\n            } else {\n                btnEls = $.data( target, \"buttonElements\" );\n            }\n            // If found, grab the button's outer element\n            if ( btnEls ) {\n                target = btnEls.outer;\n            } else {\n                needClosest = true;\n            }\n\n            $btn = $( target );\n            // If the outer element wasn't found by the our heuristics, use .closest()\n            if ( needClosest ) {\n                $btn = $btn.closest( \".ui-btn\" );\n            }\n\n            if ( $btn.length > 0 &&\n                !( $btn.hasClass( \"ui-state-disabled\" ||\n\n                    // DEPRECATED as of 1.4.0 - remove after 1.4.0 release\n                    // only ui-state-disabled should be present thereafter\n                    $btn.hasClass( \"ui-disabled\" ) ) ) ) {\n                $.mobile.removeActiveLinkClass( true );\n                $.mobile.activeClickedLink = $btn;\n                $.mobile.activeClickedLink.addClass( $.mobile.activeBtnClass );\n            }\n        });\n\n        // click routing - direct to HTTP or Ajax, accordingly\n        $.mobile.document.bind( \"click\", function( event ) {\n            if ( !$.mobile.linkBindingEnabled || event.isDefaultPrevented() ) {\n                return;\n            }\n\n            var link = findClosestLink( event.target ),\n                $link = $( link ),\n\n                //remove active link class if external (then it won't be there if you come back)\n                httpCleanup = function() {\n                    window.setTimeout(function() { $.mobile.removeActiveLinkClass( true ); }, 200 );\n                },\n                baseUrl, href,\n                useDefaultUrlHandling, isExternal,\n                transition, reverse, role;\n\n            // If a button was clicked, clean up the active class added by vclick above\n            if ( $.mobile.activeClickedLink &&\n                $.mobile.activeClickedLink[ 0 ] === event.target.parentNode ) {\n                httpCleanup();\n            }\n\n            // If there is no link associated with the click or its not a left\n            // click we want to ignore the click\n            // TODO teach $.mobile.hijackable to operate on raw dom elements so the link wrapping\n            // can be avoided\n            if ( !link || event.which > 1 || !$link.jqmHijackable().length ) {\n                return;\n            }\n\n            //if there's a data-rel=back attr, go back in history\n            if ( $link.is( \":jqmData(rel='back')\" ) ) {\n                $.mobile.back();\n                return false;\n            }\n\n            baseUrl = $.mobile.getClosestBaseUrl( $link );\n\n            //get href, if defined, otherwise default to empty hash\n            href = $.mobile.path.makeUrlAbsolute( $link.attr( \"href\" ) || \"#\", baseUrl );\n\n            //if ajax is disabled, exit early\n            if ( !$.mobile.ajaxEnabled && !$.mobile.path.isEmbeddedPage( href ) ) {\n                httpCleanup();\n                //use default click handling\n                return;\n            }\n\n            // XXX_jblas: Ideally links to application pages should be specified as\n            //            an url to the application document with a hash that is either\n            //            the site relative path or id to the page. But some of the\n            //            internal code that dynamically generates sub-pages for nested\n            //            lists and select dialogs, just write a hash in the link they\n            //            create. This means the actual URL path is based on whatever\n            //            the current value of the base tag is at the time this code\n            //            is called.\n            if ( href.search( \"#\" ) !== -1 &&\n                !( $.mobile.path.isExternal( href ) && $.mobile.path.isAbsoluteUrl( href ) ) ) {\n\n                href = href.replace( /[^#]*#/, \"\" );\n                if ( !href ) {\n                    //link was an empty hash meant purely\n                    //for interaction, so we ignore it.\n                    event.preventDefault();\n                    return;\n                } else if ( $.mobile.path.isPath( href ) ) {\n                    //we have apath so make it the href we want to load.\n                    href = $.mobile.path.makeUrlAbsolute( href, baseUrl );\n                } else {\n                    //we have a simple id so use the documentUrl as its base.\n                    href = $.mobile.path.makeUrlAbsolute( \"#\" + href, documentUrl.hrefNoHash );\n                }\n            }\n\n            // Should we handle this link, or let the browser deal with it?\n            useDefaultUrlHandling = $link.is( \"[rel='external']\" ) || $link.is( \":jqmData(ajax='false')\" ) || $link.is( \"[target]\" );\n\n            // Some embedded browsers, like the web view in Phone Gap, allow cross-domain XHR\n            // requests if the document doing the request was loaded via the file:// protocol.\n            // This is usually to allow the application to \"phone home\" and fetch app specific\n            // data. We normally let the browser handle external/cross-domain urls, but if the\n            // allowCrossDomainPages option is true, we will allow cross-domain http/https\n            // requests to go through our page loading logic.\n\n            //check for protocol or rel and its not an embedded page\n            //TODO overlap in logic from isExternal, rel=external check should be\n            //     moved into more comprehensive isExternalLink\n            isExternal = useDefaultUrlHandling || ( $.mobile.path.isExternal( href ) && !$.mobile.path.isPermittedCrossDomainRequest( documentUrl, href ) );\n\n            if ( isExternal ) {\n                httpCleanup();\n                //use default click handling\n                return;\n            }\n\n            //use ajax\n            transition = $link.jqmData( \"transition\" );\n            reverse = $link.jqmData( \"direction\" ) === \"reverse\" ||\n                        // deprecated - remove by 1.0\n                        $link.jqmData( \"back\" );\n\n            //this may need to be more specific as we use data-rel more\n            role = $link.attr( \"data-\" + $.mobile.ns + \"rel\" ) || undefined;\n\n            $.mobile.changePage( href, { transition: transition, reverse: reverse, role: role, link: $link } );\n            event.preventDefault();\n        });\n\n        //prefetch pages when anchors with data-prefetch are encountered\n        $.mobile.document.delegate( \".ui-page\", \"pageshow.prefetch\", function() {\n            var urls = [];\n            $( this ).find( \"a:jqmData(prefetch)\" ).each(function() {\n                var $link = $( this ),\n                    url = $link.attr( \"href\" );\n\n                if ( url && $.inArray( url, urls ) === -1 ) {\n                    urls.push( url );\n\n                    $.mobile.loadPage( url, { role: $link.attr( \"data-\" + $.mobile.ns + \"rel\" ),prefetch: true } );\n                }\n            });\n        });\n\n        // TODO ensure that the navigate binding in the content widget happens at the right time\n        $.mobile.pageContainer.pagecontainer();\n\n        //set page min-heights to be device specific\n        $.mobile.document.bind( \"pageshow\", function() {\n\n            // We need to wait for window.load to make sure that styles have already been rendered,\n            // otherwise heights of external toolbars will have the wrong value\n            if ( loadDeferred ) {\n                loadDeferred.done( $.mobile.resetActivePageHeight );\n            } else {\n                $.mobile.resetActivePageHeight();\n            }\n        });\n        $.mobile.window.bind( \"throttledresize\", $.mobile.resetActivePageHeight );\n\n    };//navreadyDeferred done callback\n\n    $( function() { domreadyDeferred.resolve(); } );\n\n    // Account for the possibility that the load event has already fired\n    if ( document.readyState === \"complete\" ) {\n        pageIsFullyLoaded();\n    } else {\n        $.mobile.window.load( pageIsFullyLoaded );\n    }\n\n    $.when( domreadyDeferred, $.mobile.navreadyDeferred ).done( function() { $.mobile._registerInternalEvents(); } );\n})( jQuery );\n\n\n(function( $, window, undefined ) {\n\n    // TODO remove direct references to $.mobile and properties, we should\n    //      favor injection with params to the constructor\n    $.mobile.Transition = function() {\n        this.init.apply( this, arguments );\n    };\n\n    $.extend($.mobile.Transition.prototype, {\n        toPreClass: \" ui-page-pre-in\",\n\n        init: function( name, reverse, $to, $from ) {\n            $.extend(this, {\n                name: name,\n                reverse: reverse,\n                $to: $to,\n                $from: $from,\n                deferred: new $.Deferred()\n            });\n        },\n\n        cleanFrom: function() {\n            this.$from\n                .removeClass( $.mobile.activePageClass + \" out in reverse \" + this.name )\n                .height( \"\" );\n        },\n\n        // NOTE overridden by child object prototypes, noop'd here as defaults\n        beforeDoneIn: function() {},\n        beforeDoneOut: function() {},\n        beforeStartOut: function() {},\n\n        doneIn: function() {\n            this.beforeDoneIn();\n\n            this.$to.removeClass( \"out in reverse \" + this.name ).height( \"\" );\n\n            this.toggleViewportClass();\n\n            // In some browsers (iOS5), 3D transitions block the ability to scroll to the desired location during transition\n            // This ensures we jump to that spot after the fact, if we aren't there already.\n            if ( $.mobile.window.scrollTop() !== this.toScroll ) {\n                this.scrollPage();\n            }\n            if ( !this.sequential ) {\n                this.$to.addClass( $.mobile.activePageClass );\n            }\n            this.deferred.resolve( this.name, this.reverse, this.$to, this.$from, true );\n        },\n\n        doneOut: function( screenHeight, reverseClass, none, preventFocus ) {\n            this.beforeDoneOut();\n            this.startIn( screenHeight, reverseClass, none, preventFocus );\n        },\n\n        hideIn: function( callback ) {\n            // Prevent flickering in phonegap container: see comments at #4024 regarding iOS\n            this.$to.css( \"z-index\", -10 );\n            callback.call( this );\n            this.$to.css( \"z-index\", \"\" );\n        },\n\n        scrollPage: function() {\n            // By using scrollTo instead of silentScroll, we can keep things better in order\n            // Just to be precautios, disable scrollstart listening like silentScroll would\n            $.event.special.scrollstart.enabled = false;\n            //if we are hiding the url bar or the page was previously scrolled scroll to hide or return to position\n            if ( $.mobile.hideUrlBar || this.toScroll !== $.mobile.defaultHomeScroll ) {\n                window.scrollTo( 0, this.toScroll );\n            }\n\n            // reenable scrollstart listening like silentScroll would\n            setTimeout( function() {\n                $.event.special.scrollstart.enabled = true;\n            }, 150 );\n        },\n\n        startIn: function( screenHeight, reverseClass, none, preventFocus ) {\n            this.hideIn(function() {\n                this.$to.addClass( $.mobile.activePageClass + this.toPreClass );\n\n                // Send focus to page as it is now display: block\n                if ( !preventFocus ) {\n                    $.mobile.focusPage( this.$to );\n                }\n\n                // Set to page height\n                this.$to.height( screenHeight + this.toScroll );\n\n                if ( !none ) {\n                    this.scrollPage();\n                }\n            });\n\n            this.$to\n                .removeClass( this.toPreClass )\n                .addClass( this.name + \" in \" + reverseClass );\n\n            if ( !none ) {\n                this.$to.animationComplete( $.proxy(function() {\n                    this.doneIn();\n                }, this ));\n            } else {\n                this.doneIn();\n            }\n\n        },\n\n        startOut: function( screenHeight, reverseClass, none ) {\n            this.beforeStartOut( screenHeight, reverseClass, none );\n\n            // Set the from page's height and start it transitioning out\n            // Note: setting an explicit height helps eliminate tiling in the transitions\n            this.$from\n                .height( screenHeight + $.mobile.window.scrollTop() )\n                .addClass( this.name + \" out\" + reverseClass );\n        },\n\n        toggleViewportClass: function() {\n            $.mobile.pageContainer.toggleClass( \"ui-mobile-viewport-transitioning viewport-\" + this.name );\n        },\n\n        transition: function() {\n            // NOTE many of these could be calculated/recorded in the constructor, it's my\n            //      opinion that binding them as late as possible has value with regards to\n            //      better transitions with fewer bugs. Ie, it's not guaranteed that the\n            //      object will be created and transition will be run immediately after as\n            //      it is today. So we wait until transition is invoked to gather the following\n            var none,\n                reverseClass = this.reverse ? \" reverse\" : \"\",\n                screenHeight = $.mobile.getScreenHeight(),\n                maxTransitionOverride = $.mobile.maxTransitionWidth !== false &&\n                    $.mobile.window.width() > $.mobile.maxTransitionWidth;\n\n            this.toScroll = $.mobile.navigate.history.getActive().lastScroll || $.mobile.defaultHomeScroll;\n\n            none = !$.support.cssTransitions || !$.support.cssAnimations ||\n                maxTransitionOverride || !this.name || this.name === \"none\" ||\n                Math.max( $.mobile.window.scrollTop(), this.toScroll ) >\n                    $.mobile.getMaxScrollForTransition();\n\n            this.toggleViewportClass();\n\n            if ( this.$from && !none ) {\n                this.startOut( screenHeight, reverseClass, none );\n            } else {\n                this.doneOut( screenHeight, reverseClass, none, true );\n            }\n\n            return this.deferred.promise();\n        }\n    });\n})( jQuery, this );\n\n\n(function( $ ) {\n\n    $.mobile.SerialTransition = function() {\n        this.init.apply(this, arguments);\n    };\n\n    $.extend($.mobile.SerialTransition.prototype, $.mobile.Transition.prototype, {\n        sequential: true,\n\n        beforeDoneOut: function() {\n            if ( this.$from ) {\n                this.cleanFrom();\n            }\n        },\n\n        beforeStartOut: function( screenHeight, reverseClass, none ) {\n            this.$from.animationComplete($.proxy(function() {\n                this.doneOut( screenHeight, reverseClass, none );\n            }, this ));\n        }\n    });\n\n})( jQuery );\n\n\n(function( $ ) {\n\n    $.mobile.ConcurrentTransition = function() {\n        this.init.apply(this, arguments);\n    };\n\n    $.extend($.mobile.ConcurrentTransition.prototype, $.mobile.Transition.prototype, {\n        sequential: false,\n\n        beforeDoneIn: function() {\n            if ( this.$from ) {\n                this.cleanFrom();\n            }\n        },\n\n        beforeStartOut: function( screenHeight, reverseClass, none ) {\n            this.doneOut( screenHeight, reverseClass, none );\n        }\n    });\n\n})( jQuery );\n\n\n(function( $ ) {\n\n    // generate the handlers from the above\n    var defaultGetMaxScrollForTransition = function() {\n        return $.mobile.getScreenHeight() * 3;\n    };\n\n    //transition handler dictionary for 3rd party transitions\n    $.mobile.transitionHandlers = {\n        \"sequential\": $.mobile.SerialTransition,\n        \"simultaneous\": $.mobile.ConcurrentTransition\n    };\n\n    // Make our transition handler the public default.\n    $.mobile.defaultTransitionHandler = $.mobile.transitionHandlers.sequential;\n\n    $.mobile.transitionFallbacks = {};\n\n    // If transition is defined, check if css 3D transforms are supported, and if not, if a fallback is specified\n    $.mobile._maybeDegradeTransition = function( transition ) {\n        if ( transition && !$.support.cssTransform3d && $.mobile.transitionFallbacks[ transition ] ) {\n            transition = $.mobile.transitionFallbacks[ transition ];\n        }\n\n        return transition;\n    };\n\n    // Set the getMaxScrollForTransition to default if no implementation was set by user\n    $.mobile.getMaxScrollForTransition = $.mobile.getMaxScrollForTransition || defaultGetMaxScrollForTransition;\n\n})( jQuery );\n\n/*\n* fallback transition for flip in non-3D supporting browsers (which tend to handle complex transitions poorly in general\n*/\n\n(function( $, window, undefined ) {\n\n$.mobile.transitionFallbacks.flip = \"fade\";\n\n})( jQuery, this );\n\n/*\n* fallback transition for flow in non-3D supporting browsers (which tend to handle complex transitions poorly in general\n*/\n\n(function( $, window, undefined ) {\n\n$.mobile.transitionFallbacks.flow = \"fade\";\n\n})( jQuery, this );\n\n/*\n* fallback transition for pop in non-3D supporting browsers (which tend to handle complex transitions poorly in general\n*/\n\n(function( $, window, undefined ) {\n\n$.mobile.transitionFallbacks.pop = \"fade\";\n\n})( jQuery, this );\n\n/*\n* fallback transition for slide in non-3D supporting browsers (which tend to handle complex transitions poorly in general\n*/\n\n(function( $, window, undefined ) {\n\n// Use the simultaneous transitions handler for slide transitions\n$.mobile.transitionHandlers.slide = $.mobile.transitionHandlers.simultaneous;\n\n// Set the slide transitions's fallback to \"fade\"\n$.mobile.transitionFallbacks.slide = \"fade\";\n\n})( jQuery, this );\n\n/*\n* fallback transition for slidedown in non-3D supporting browsers (which tend to handle complex transitions poorly in general\n*/\n\n(function( $, window, undefined ) {\n\n$.mobile.transitionFallbacks.slidedown = \"fade\";\n\n})( jQuery, this );\n\n/*\n* fallback transition for slidefade in non-3D supporting browsers (which tend to handle complex transitions poorly in general\n*/\n\n(function( $, window, undefined ) {\n\n// Set the slide transitions's fallback to \"fade\"\n$.mobile.transitionFallbacks.slidefade = \"fade\";\n\n})( jQuery, this );\n\n/*\n* fallback transition for slideup in non-3D supporting browsers (which tend to handle complex transitions poorly in general\n*/\n\n(function( $, window, undefined ) {\n\n$.mobile.transitionFallbacks.slideup = \"fade\";\n\n})( jQuery, this );\n\n/*\n* fallback transition for turn in non-3D supporting browsers (which tend to handle complex transitions poorly in general\n*/\n\n(function( $, window, undefined ) {\n\n$.mobile.transitionFallbacks.turn = \"fade\";\n\n})( jQuery, this );\n\n\n(function( $, undefined ) {\n\n$.mobile.degradeInputs = {\n    color: false,\n    date: false,\n    datetime: false,\n    \"datetime-local\": false,\n    email: false,\n    month: false,\n    number: false,\n    range: \"number\",\n    search: \"text\",\n    tel: false,\n    time: false,\n    url: false,\n    week: false\n};\n// Backcompat remove in 1.5\n$.mobile.page.prototype.options.degradeInputs = $.mobile.degradeInputs;\n\n// Auto self-init widgets\n$.mobile.degradeInputsWithin = function( target ) {\n\n    target = $( target );\n\n    // Degrade inputs to avoid poorly implemented native functionality\n    target.find( \"input\" ).not( $.mobile.page.prototype.keepNativeSelector() ).each(function() {\n        var element = $( this ),\n            type = this.getAttribute( \"type\" ),\n            optType = $.mobile.degradeInputs[ type ] || \"text\",\n            html, hasType, findstr, repstr;\n\n        if ( $.mobile.degradeInputs[ type ] ) {\n            html = $( \"<div>\" ).html( element.clone() ).html();\n            // In IE browsers, the type sometimes doesn't exist in the cloned markup, so we replace the closing tag instead\n            hasType = html.indexOf( \" type=\" ) > -1;\n            findstr = hasType ? /\\s+type=[\"']?\\w+['\"]?/ : /\\/?>/;\n            repstr = \" type=\\\"\" + optType + \"\\\" data-\" + $.mobile.ns + \"type=\\\"\" + type + \"\\\"\" + ( hasType ? \"\" : \">\" );\n\n            element.replaceWith( html.replace( findstr, repstr ) );\n        }\n    });\n\n};\n\n})( jQuery );\n\n(function( $, window, undefined ) {\n\n$.widget( \"mobile.page\", $.mobile.page, {\n    options: {\n\n        // Accepts left, right and none\n        closeBtn: \"left\",\n        closeBtnText: \"Close\",\n        overlayTheme: \"a\",\n        corners: true,\n        dialog: false\n    },\n\n    _create: function() {\n        this._super();\n        if ( this.options.dialog ) {\n\n            $.extend( this, {\n                _inner: this.element.children(),\n                _headerCloseButton: null\n            });\n\n            if ( !this.options.enhanced ) {\n                this._setCloseBtn( this.options.closeBtn );\n            }\n        }\n    },\n\n    _enhance: function() {\n        this._super();\n\n        // Class the markup for dialog styling and wrap interior\n        if ( this.options.dialog ) {\n            this.element.addClass( \"ui-dialog\" )\n                .wrapInner( $( \"<div/>\", {\n\n                    // ARIA role\n                    \"role\" : \"dialog\",\n                    \"class\" : \"ui-dialog-contain ui-overlay-shadow\" +\n                        ( this.options.corners ? \" ui-corner-all\" : \"\" )\n                }));\n        }\n    },\n\n    _setOptions: function( options ) {\n        var closeButtonLocation, closeButtonText,\n            currentOpts = this.options;\n\n        if ( options.corners !== undefined ) {\n            this._inner.toggleClass( \"ui-corner-all\", !!options.corners );\n        }\n\n        if ( options.overlayTheme !== undefined ) {\n            if ( $.mobile.activePage[ 0 ] === this.element[ 0 ] ) {\n                currentOpts.overlayTheme = options.overlayTheme;\n                this._handlePageBeforeShow();\n            }\n        }\n\n        if ( options.closeBtnText !== undefined ) {\n            closeButtonLocation = currentOpts.closeBtn;\n            closeButtonText = options.closeBtnText;\n        }\n\n        if ( options.closeBtn !== undefined ) {\n            closeButtonLocation = options.closeBtn;\n        }\n\n        if ( closeButtonLocation ) {\n            this._setCloseBtn( closeButtonLocation, closeButtonText );\n        }\n\n        this._super( options );\n    },\n\n    _handlePageBeforeShow: function () {\n        if ( this.options.overlayTheme && this.options.dialog ) {\n            this.removeContainerBackground();\n            this.setContainerBackground( this.options.overlayTheme );\n        } else {\n            this._super();\n        }\n    },\n\n    _setCloseBtn: function( location, text ) {\n        var dst,\n            btn = this._headerCloseButton;\n\n        // Sanitize value\n        location = \"left\" === location ? \"left\" : \"right\" === location ? \"right\" : \"none\";\n\n        if ( \"none\" === location ) {\n            if ( btn ) {\n                btn.remove();\n                btn = null;\n            }\n        } else if ( btn ) {\n            btn.removeClass( \"ui-btn-left ui-btn-right\" ).addClass( \"ui-btn-\" + location );\n            if ( text ) {\n                btn.text( text );\n            }\n        } else {\n            dst = this._inner.find( \":jqmData(role='header')\" ).first();\n            btn = $( \"<a></a>\", {\n                    \"href\": \"#\",\n                    \"class\": \"ui-btn ui-corner-all ui-icon-delete ui-btn-icon-notext ui-btn-\" + location\n                })\n                .attr( \"data-\" + $.mobile.ns + \"rel\", \"back\" )\n                .text( text || this.options.closeBtnText || \"\" )\n                .prependTo( dst );\n        }\n\n        this._headerCloseButton = btn;\n    }\n});\n\n})( jQuery, this );\n\n(function( $, window, undefined ) {\n\n$.widget( \"mobile.dialog\", {\n    options: {\n\n        // Accepts left, right and none\n        closeBtn: \"left\",\n        closeBtnText: \"Close\",\n        overlayTheme: \"a\",\n        corners: true\n    },\n\n    // Override the theme set by the page plugin on pageshow\n    _handlePageBeforeShow: function() {\n        this._isCloseable = true;\n        if ( this.options.overlayTheme ) {\n            this.element\n                .page( \"removeContainerBackground\" )\n                .page( \"setContainerBackground\", this.options.overlayTheme );\n        }\n    },\n\n    _handlePageBeforeHide: function() {\n        this._isCloseable = false;\n    },\n\n    // click and submit events:\n    // - clicks and submits should use the closing transition that the dialog\n    //   opened with unless a data-transition is specified on the link/form\n    // - if the click was on the close button, or the link has a data-rel=\"back\"\n    //   it'll go back in history naturally\n    _handleVClickSubmit: function( event ) {\n        var attrs,\n            $target = $( event.target ).closest( event.type === \"vclick\" ? \"a\" : \"form\" );\n\n        if ( $target.length && !$target.jqmData( \"transition\" ) ) {\n            attrs = {};\n            attrs[ \"data-\" + $.mobile.ns + \"transition\" ] =\n                ( $.mobile.navigate.history.getActive() || {} )[ \"transition\" ] ||\n                $.mobile.defaultDialogTransition;\n            attrs[ \"data-\" + $.mobile.ns + \"direction\" ] = \"reverse\";\n            $target.attr( attrs );\n        }\n    },\n\n    _create: function() {\n        var elem = this.element,\n            opts = this.options;\n\n        // Class the markup for dialog styling and wrap interior\n        elem.addClass( \"ui-dialog\" )\n            .wrapInner( $( \"<div/>\", {\n\n                // ARIA role\n                \"role\" : \"dialog\",\n                \"class\" : \"ui-dialog-contain ui-overlay-shadow\" +\n                    ( !!opts.corners ? \" ui-corner-all\" : \"\" )\n            }));\n\n        $.extend( this, {\n            _isCloseable: false,\n            _inner: elem.children(),\n            _headerCloseButton: null\n        });\n\n        this._on( elem, {\n            vclick: \"_handleVClickSubmit\",\n            submit: \"_handleVClickSubmit\",\n            pagebeforeshow: \"_handlePageBeforeShow\",\n            pagebeforehide: \"_handlePageBeforeHide\"\n        });\n\n        this._setCloseBtn( opts.closeBtn );\n    },\n\n    _setOptions: function( options ) {\n        var closeButtonLocation, closeButtonText,\n            currentOpts = this.options;\n\n        if ( options.corners !== undefined ) {\n            this._inner.toggleClass( \"ui-corner-all\", !!options.corners );\n        }\n\n        if ( options.overlayTheme !== undefined ) {\n            if ( $.mobile.activePage[ 0 ] === this.element[ 0 ] ) {\n                currentOpts.overlayTheme = options.overlayTheme;\n                this._handlePageBeforeShow();\n            }\n        }\n\n        if ( options.closeBtnText !== undefined ) {\n            closeButtonLocation = currentOpts.closeBtn;\n            closeButtonText = options.closeBtnText;\n        }\n\n        if ( options.closeBtn !== undefined ) {\n            closeButtonLocation = options.closeBtn;\n        }\n\n        if ( closeButtonLocation ) {\n            this._setCloseBtn( closeButtonLocation, closeButtonText );\n        }\n\n        this._super( options );\n    },\n\n    _setCloseBtn: function( location, text ) {\n        var dst,\n            btn = this._headerCloseButton;\n\n        // Sanitize value\n        location = \"left\" === location ? \"left\" : \"right\" === location ? \"right\" : \"none\";\n\n        if ( \"none\" === location ) {\n            if ( btn ) {\n                btn.remove();\n                btn = null;\n            }\n        } else if ( btn ) {\n            btn.removeClass( \"ui-btn-left ui-btn-right\" ).addClass( \"ui-btn-\" + location );\n            if ( text ) {\n                btn.text( text );\n            }\n        } else {\n            dst = this._inner.find( \":jqmData(role='header')\" ).first();\n            btn = $( \"<a></a>\", {\n                    \"role\": \"button\",\n                    \"href\": \"#\",\n                    \"class\": \"ui-btn ui-corner-all ui-icon-delete ui-btn-icon-notext ui-btn-\" + location\n                })\n                .text( text || this.options.closeBtnText || \"\" )\n                .prependTo( dst );\n            this._on( btn, { click: \"close\" } );\n        }\n\n        this._headerCloseButton = btn;\n    },\n\n    // Close method goes back in history\n    close: function() {\n        var hist = $.mobile.navigate.history;\n\n        if ( this._isCloseable ) {\n            this._isCloseable = false;\n            // If the hash listening is enabled and there is at least one preceding history\n            // entry it's ok to go back. Initial pages with the dialog hash state are an example\n            // where the stack check is necessary\n            if ( $.mobile.hashListeningEnabled && hist.activeIndex > 0 ) {\n                $.mobile.back();\n            } else {\n                $.mobile.pageContainer.pagecontainer( \"back\" );\n            }\n        }\n    }\n});\n\n})( jQuery, this );\n\n(function( $, undefined ) {\n\nvar rInitialLetter = /([A-Z])/g,\n\n    // Construct iconpos class from iconpos value\n    iconposClass = function( iconpos ) {\n        return ( \"ui-btn-icon-\" + ( iconpos === null ? \"left\" : iconpos ) );\n    };\n\n$.widget( \"mobile.collapsible\", {\n    options: {\n        enhanced: false,\n        expandCueText: null,\n        collapseCueText: null,\n        collapsed: true,\n        heading: \"h1,h2,h3,h4,h5,h6,legend\",\n        collapsedIcon: null,\n        expandedIcon: null,\n        iconpos: null,\n        theme: null,\n        contentTheme: null,\n        inset: null,\n        corners: null,\n        mini: null\n    },\n\n    _create: function() {\n        var elem = this.element,\n            ui = {\n                accordion: elem\n                    .closest( \":jqmData(role='collapsible-set'),\" +\n                        \":jqmData(role='collapsibleset')\" +\n                        ( $.mobile.collapsibleset ? \", :mobile-collapsibleset\" :\n                            \"\" ) )\n                    .addClass( \"ui-collapsible-set\" )\n            };\n\n        this._ui = ui;\n        this._renderedOptions = this._getOptions( this.options );\n\n        if ( this.options.enhanced ) {\n            ui.heading = this.element.children( \".ui-collapsible-heading\" );\n            ui.content = ui.heading.next();\n            ui.anchor = ui.heading.children();\n            ui.status = ui.anchor.children( \".ui-collapsible-heading-status\" );\n        } else {\n            this._enhance( elem, ui );\n        }\n\n        this._on( ui.heading, {\n            \"tap\": function() {\n                ui.heading.find( \"a\" ).first().addClass( $.mobile.activeBtnClass );\n            },\n\n            \"click\": function( event ) {\n                this._handleExpandCollapse( !ui.heading.hasClass( \"ui-collapsible-heading-collapsed\" ) );\n                event.preventDefault();\n                event.stopPropagation();\n            }\n        });\n    },\n\n    // Adjust the keys inside options for inherited values\n    _getOptions: function( options ) {\n        var key,\n            accordion = this._ui.accordion,\n            accordionWidget = this._ui.accordionWidget;\n\n        // Copy options\n        options = $.extend( {}, options );\n\n        if ( accordion.length && !accordionWidget ) {\n            this._ui.accordionWidget =\n            accordionWidget = accordion.data( \"mobile-collapsibleset\" );\n        }\n\n        for ( key in options ) {\n\n            // Retrieve the option value first from the options object passed in and, if\n            // null, from the parent accordion or, if that's null too, or if there's no\n            // parent accordion, then from the defaults.\n            options[ key ] =\n                ( options[ key ] != null ) ? options[ key ] :\n                ( accordionWidget ) ? accordionWidget.options[ key ] :\n                accordion.length ? $.mobile.getAttribute( accordion[ 0 ],\n                    key.replace( rInitialLetter, \"-$1\" ).toLowerCase() ):\n                null;\n\n            if ( null == options[ key ] ) {\n                options[ key ] = $.mobile.collapsible.defaults[ key ];\n            }\n        }\n\n        return options;\n    },\n\n    _themeClassFromOption: function( prefix, value ) {\n        return ( value ? ( value === \"none\" ? \"\" : prefix + value ) : \"\" );\n    },\n\n    _enhance: function( elem, ui ) {\n        var iconclass,\n            opts = this._renderedOptions,\n            contentThemeClass = this._themeClassFromOption( \"ui-body-\", opts.contentTheme );\n\n        elem.addClass( \"ui-collapsible \" +\n            ( opts.inset ? \"ui-collapsible-inset \" : \"\" ) +\n            ( opts.inset && opts.corners ? \"ui-corner-all \" : \"\" ) +\n            ( contentThemeClass ? \"ui-collapsible-themed-content \" : \"\" ) );\n        ui.originalHeading = elem.children( this.options.heading ).first(),\n        ui.content = elem\n            .wrapInner( \"<div \" +\n                \"class='ui-collapsible-content \" +\n                contentThemeClass + \"'></div>\" )\n            .children( \".ui-collapsible-content\" ),\n        ui.heading = ui.originalHeading;\n\n        // Replace collapsibleHeading if it's a legend\n        if ( ui.heading.is( \"legend\" ) ) {\n            ui.heading = $( \"<div role='heading'>\"+ ui.heading.html() +\"</div>\" );\n            ui.placeholder = $( \"<div><!-- placeholder for legend --></div>\" ).insertBefore( ui.originalHeading );\n            ui.originalHeading.remove();\n        }\n\n        iconclass = ( opts.collapsed ? ( opts.collapsedIcon ? \"ui-icon-\" + opts.collapsedIcon : \"\" ):\n            ( opts.expandedIcon ? \"ui-icon-\" + opts.expandedIcon : \"\" ) );\n\n        ui.status = $( \"<span class='ui-collapsible-heading-status'></span>\" );\n        ui.anchor = ui.heading\n            .detach()\n            //modify markup & attributes\n            .addClass( \"ui-collapsible-heading\" )\n            .append( ui.status )\n            .wrapInner( \"<a href='#' class='ui-collapsible-heading-toggle'></a>\" )\n            .find( \"a\" )\n                .first()\n                .addClass( \"ui-btn \" +\n                    ( iconclass ? iconclass + \" \" : \"\" ) +\n                    ( iconclass ? iconposClass( opts.iconpos ) +\n                        \" \" : \"\" ) +\n                    this._themeClassFromOption( \"ui-btn-\", opts.theme ) + \" \" +\n                    ( opts.mini ? \"ui-mini \" : \"\" ) );\n\n        //drop heading in before content\n        ui.heading.insertBefore( ui.content );\n\n        this._handleExpandCollapse( this.options.collapsed );\n\n        return ui;\n    },\n\n    refresh: function() {\n        this._applyOptions( this.options );\n        this._renderedOptions = this._getOptions( this.options );\n    },\n\n    _applyOptions: function( options ) {\n        var isCollapsed, newTheme, oldTheme, hasCorners, hasIcon,\n            elem = this.element,\n            currentOpts = this._renderedOptions,\n            ui = this._ui,\n            anchor = ui.anchor,\n            status = ui.status,\n            opts = this._getOptions( options );\n\n        // First and foremost we need to make sure the collapsible is in the proper\n        // state, in case somebody decided to change the collapsed option at the\n        // same time as another option\n        if ( options.collapsed !== undefined ) {\n            this._handleExpandCollapse( options.collapsed );\n        }\n\n        isCollapsed = elem.hasClass( \"ui-collapsible-collapsed\" );\n\n        // We only need to apply the cue text for the current state right away.\n        // The cue text for the alternate state will be stored in the options\n        // and applied the next time the collapsible's state is toggled\n        if ( isCollapsed ) {\n            if ( opts.expandCueText !== undefined ) {\n                status.text( opts.expandCueText );\n            }\n        } else {\n            if ( opts.collapseCueText !== undefined ) {\n                status.text( opts.collapseCueText );\n            }\n        }\n\n        // Update icon\n\n        // Is it supposed to have an icon?\n        hasIcon =\n\n            // If the collapsedIcon is being set, consult that\n            ( opts.collapsedIcon !== undefined ? opts.collapsedIcon !== false :\n\n                // Otherwise consult the existing option value\n                currentOpts.collapsedIcon !== false );\n\n\n        // If any icon-related options have changed, make sure the new icon\n        // state is reflected by first removing all icon-related classes\n        // reflecting the current state and then adding all icon-related\n        // classes for the new state\n        if ( !( opts.iconpos === undefined &&\n            opts.collapsedIcon === undefined &&\n            opts.expandedIcon === undefined ) ) {\n\n            // Remove all current icon-related classes\n            anchor.removeClass( [ iconposClass( currentOpts.iconpos ) ]\n                .concat( ( currentOpts.expandedIcon ?\n                    [ \"ui-icon-\" + currentOpts.expandedIcon ] : [] ) )\n                .concat( ( currentOpts.collapsedIcon ?\n                    [ \"ui-icon-\" + currentOpts.collapsedIcon ] : [] ) )\n                .join( \" \" ) );\n\n            // Add new classes if an icon is supposed to be present\n            if ( hasIcon ) {\n                anchor.addClass(\n                    [ iconposClass( opts.iconpos !== undefined ?\n                        opts.iconpos : currentOpts.iconpos ) ]\n                        .concat( isCollapsed ?\n                            [ \"ui-icon-\" + ( opts.collapsedIcon !== undefined ?\n                                opts.collapsedIcon :\n                                currentOpts.collapsedIcon ) ] :\n                            [ \"ui-icon-\" + ( opts.expandedIcon !== undefined ?\n                                opts.expandedIcon :\n                                currentOpts.expandedIcon ) ] )\n                        .join( \" \" ) );\n            }\n        }\n\n        if ( opts.theme !== undefined ) {\n            oldTheme = this._themeClassFromOption( \"ui-btn-\", currentOpts.theme );\n            newTheme = this._themeClassFromOption( \"ui-btn-\", opts.theme );\n            anchor.removeClass( oldTheme ).addClass( newTheme );\n        }\n\n        if ( opts.contentTheme !== undefined ) {\n            oldTheme = this._themeClassFromOption( \"ui-body-\",\n                currentOpts.contentTheme );\n            newTheme = this._themeClassFromOption( \"ui-body-\",\n                opts.contentTheme );\n            ui.content.removeClass( oldTheme ).addClass( newTheme );\n        }\n\n        if ( opts.inset !== undefined ) {\n            elem.toggleClass( \"ui-collapsible-inset\", opts.inset );\n            hasCorners = !!( opts.inset && ( opts.corners || currentOpts.corners ) );\n        }\n\n        if ( opts.corners !== undefined ) {\n            hasCorners = !!( opts.corners && ( opts.inset || currentOpts.inset ) );\n        }\n\n        if ( hasCorners !== undefined ) {\n            elem.toggleClass( \"ui-corner-all\", hasCorners );\n        }\n\n        if ( opts.mini !== undefined ) {\n            anchor.toggleClass( \"ui-mini\", opts.mini );\n        }\n    },\n\n    _setOptions: function( options ) {\n        this._applyOptions( options );\n        this._super( options );\n        this._renderedOptions = this._getOptions( this.options );\n    },\n\n    _handleExpandCollapse: function( isCollapse ) {\n        var opts = this._renderedOptions,\n            ui = this._ui;\n\n        ui.status.text( isCollapse ? opts.expandCueText : opts.collapseCueText );\n        ui.heading\n            .toggleClass( \"ui-collapsible-heading-collapsed\", isCollapse )\n            .find( \"a\" ).first()\n            .toggleClass( \"ui-icon-\" + opts.expandedIcon, !isCollapse )\n\n            // logic or cause same icon for expanded/collapsed state would remove the ui-icon-class\n            .toggleClass( \"ui-icon-\" + opts.collapsedIcon, ( isCollapse || opts.expandedIcon === opts.collapsedIcon ) )\n            .removeClass( $.mobile.activeBtnClass );\n\n        this.element.toggleClass( \"ui-collapsible-collapsed\", isCollapse );\n        ui.content\n            .toggleClass( \"ui-collapsible-content-collapsed\", isCollapse )\n            .attr( \"aria-hidden\", isCollapse )\n            .trigger( \"updatelayout\" );\n        this.options.collapsed = isCollapse;\n        this._trigger( isCollapse ? \"collapse\" : \"expand\" );\n    },\n\n    expand: function() {\n        this._handleExpandCollapse( false );\n    },\n\n    collapse: function() {\n        this._handleExpandCollapse( true );\n    },\n\n    _destroy: function() {\n        var ui = this._ui,\n            opts = this.options;\n\n        if ( opts.enhanced ) {\n            return;\n        }\n\n        if ( ui.placeholder ) {\n            ui.originalHeading.insertBefore( ui.placeholder );\n            ui.placeholder.remove();\n            ui.heading.remove();\n        } else {\n            ui.status.remove();\n            ui.heading\n                .removeClass( \"ui-collapsible-heading ui-collapsible-heading-collapsed\" )\n                .children()\n                    .contents()\n                        .unwrap();\n        }\n\n        ui.anchor.contents().unwrap();\n        ui.content.contents().unwrap();\n        this.element\n            .removeClass( \"ui-collapsible ui-collapsible-collapsed \" +\n                \"ui-collapsible-themed-content ui-collapsible-inset ui-corner-all\" );\n    }\n});\n\n// Defaults to be used by all instances of collapsible if per-instance values\n// are unset or if nothing is specified by way of inheritance from an accordion.\n// Note that this hash does not contain options \"collapsed\" or \"heading\",\n// because those are not inheritable.\n$.mobile.collapsible.defaults = {\n    expandCueText: \" click to expand contents\",\n    collapseCueText: \" click to collapse contents\",\n    collapsedIcon: \"plus\",\n    contentTheme: \"inherit\",\n    expandedIcon: \"minus\",\n    iconpos: \"left\",\n    inset: true,\n    corners: true,\n    theme: \"inherit\",\n    mini: false\n};\n\n})( jQuery );\n\n(function( $, undefined ) {\n\nvar uiScreenHiddenRegex = /\\bui-screen-hidden\\b/;\nfunction noHiddenClass( elements ) {\n    var index,\n        length = elements.length,\n        result = [];\n\n    for ( index = 0; index < length; index++ ) {\n        if ( !elements[ index ].className.match( uiScreenHiddenRegex ) ) {\n            result.push( elements[ index ] );\n        }\n    }\n\n    return $( result );\n}\n\n$.mobile.behaviors.addFirstLastClasses = {\n    _getVisibles: function( $els, create ) {\n        var visibles;\n\n        if ( create ) {\n            visibles = noHiddenClass( $els );\n        } else {\n            visibles = $els.filter( \":visible\" );\n            if ( visibles.length === 0 ) {\n                visibles = noHiddenClass( $els );\n            }\n        }\n\n        return visibles;\n    },\n\n    _addFirstLastClasses: function( $els, $visibles, create ) {\n        $els.removeClass( \"ui-first-child ui-last-child\" );\n        $visibles.eq( 0 ).addClass( \"ui-first-child\" ).end().last().addClass( \"ui-last-child\" );\n        if ( !create ) {\n            this.element.trigger( \"updatelayout\" );\n        }\n    },\n\n    _removeFirstLastClasses: function( $els ) {\n        $els.removeClass( \"ui-first-child ui-last-child\" );\n    }\n};\n\n})( jQuery );\n\n(function( $, undefined ) {\n\nvar childCollapsiblesSelector = \":mobile-collapsible, \" + $.mobile.collapsible.initSelector;\n\n$.widget( \"mobile.collapsibleset\", $.extend( {\n\n    // The initSelector is deprecated as of 1.4.0. In 1.5.0 we will use\n    // :jqmData(role='collapsibleset') which will allow us to get rid of the line\n    // below altogether, because the autoinit will generate such an initSelector\n    initSelector: \":jqmData(role='collapsible-set'),:jqmData(role='collapsibleset')\",\n\n    options: $.extend( {\n        enhanced: false\n    }, $.mobile.collapsible.defaults ),\n\n    _handleCollapsibleExpand: function( event ) {\n        var closestCollapsible = $( event.target ).closest( \".ui-collapsible\" );\n\n        if ( closestCollapsible.parent().is( \":mobile-collapsibleset, :jqmData(role='collapsible-set')\" ) ) {\n            closestCollapsible\n                .siblings( \".ui-collapsible:not(.ui-collapsible-collapsed)\" )\n                .collapsible( \"collapse\" );\n        }\n    },\n\n    _create: function() {\n        var elem = this.element,\n            opts = this.options;\n\n        $.extend( this, {\n            _classes: \"\"\n        });\n\n        if ( !opts.enhanced ) {\n            elem.addClass( \"ui-collapsible-set \" +\n                this._themeClassFromOption( \"ui-group-theme-\", opts.theme ) + \" \" +\n                ( opts.corners && opts.inset ? \"ui-corner-all \" : \"\" ) );\n            this.element.find( $.mobile.collapsible.initSelector ).collapsible();\n        }\n\n        this._on( elem, { collapsibleexpand: \"_handleCollapsibleExpand\" } );\n    },\n\n    _themeClassFromOption: function( prefix, value ) {\n        return ( value ? ( value === \"none\" ? \"\" : prefix + value ) : \"\" );\n    },\n\n    _init: function() {\n        this._refresh( true );\n\n        // Because the corners are handled by the collapsible itself and the default state is collapsed\n        // That was causing https://github.com/jquery/jquery-mobile/issues/4116\n        this.element\n            .children( childCollapsiblesSelector )\n            .filter( \":jqmData(collapsed='false')\" )\n            .collapsible( \"expand\" );\n    },\n\n    _setOptions: function( options ) {\n        var ret, hasCorners,\n            elem = this.element,\n            themeClass = this._themeClassFromOption( \"ui-group-theme-\", options.theme );\n\n        if ( themeClass ) {\n            elem\n                .removeClass( this._themeClassFromOption( \"ui-group-theme-\", this.options.theme ) )\n                .addClass( themeClass );\n        }\n\n        if ( options.inset !== undefined ) {\n            hasCorners = !!( options.inset && ( options.corners || this.options.corners ) );\n        }\n\n        if ( options.corners !== undefined ) {\n            hasCorners = !!( options.corners && ( options.inset || this.options.inset ) );\n        }\n\n        if ( hasCorners !== undefined ) {\n            elem.toggleClass( \"ui-corner-all\", hasCorners );\n        }\n\n        ret = this._super( options );\n        this.element.children( \":mobile-collapsible\" ).collapsible( \"refresh\" );\n        return ret;\n    },\n\n    _destroy: function() {\n        var el = this.element;\n\n        this._removeFirstLastClasses( el.children( childCollapsiblesSelector ) );\n        el\n            .removeClass( \"ui-collapsible-set ui-corner-all \" +\n                this._themeClassFromOption( \"ui-group-theme-\", this.options.theme ) )\n            .children( \":mobile-collapsible\" )\n            .collapsible( \"destroy\" );\n    },\n\n    _refresh: function( create ) {\n        var collapsiblesInSet = this.element.children( childCollapsiblesSelector );\n\n        this.element.find( $.mobile.collapsible.initSelector ).not( \".ui-collapsible\" ).collapsible();\n\n        this._addFirstLastClasses( collapsiblesInSet, this._getVisibles( collapsiblesInSet, create ), create );\n    },\n\n    refresh: function() {\n        this._refresh( false );\n    }\n}, $.mobile.behaviors.addFirstLastClasses ) );\n\n})( jQuery );\n\n(function( $, undefined ) {\n\n// Deprecated in 1.4\n$.fn.fieldcontain = function(/* options */) {\n    return this.addClass( \"ui-field-contain\" );\n};\n\n})( jQuery );\n\n(function( $, undefined ) {\n\n$.fn.grid = function( options ) {\n    return this.each(function() {\n\n        var $this = $( this ),\n            o = $.extend({\n                grid: null\n            }, options ),\n            $kids = $this.children(),\n            gridCols = { solo:1, a:2, b:3, c:4, d:5 },\n            grid = o.grid,\n            iterator,\n            letter;\n\n            if ( !grid ) {\n                if ( $kids.length <= 5 ) {\n                    for ( letter in gridCols ) {\n                        if ( gridCols[ letter ] === $kids.length ) {\n                            grid = letter;\n                        }\n                    }\n                } else {\n                    grid = \"a\";\n                    $this.addClass( \"ui-grid-duo\" );\n                }\n            }\n            iterator = gridCols[grid];\n\n        $this.addClass( \"ui-grid-\" + grid );\n\n        $kids.filter( \":nth-child(\" + iterator + \"n+1)\" ).addClass( \"ui-block-a\" );\n\n        if ( iterator > 1 ) {\n            $kids.filter( \":nth-child(\" + iterator + \"n+2)\" ).addClass( \"ui-block-b\" );\n        }\n        if ( iterator > 2 ) {\n            $kids.filter( \":nth-child(\" + iterator + \"n+3)\" ).addClass( \"ui-block-c\" );\n        }\n        if ( iterator > 3 ) {\n            $kids.filter( \":nth-child(\" + iterator + \"n+4)\" ).addClass( \"ui-block-d\" );\n        }\n        if ( iterator > 4 ) {\n            $kids.filter( \":nth-child(\" + iterator + \"n+5)\" ).addClass( \"ui-block-e\" );\n        }\n    });\n};\n})( jQuery );\n\n(function( $, undefined ) {\n\n$.widget( \"mobile.navbar\", {\n    options: {\n        iconpos: \"top\",\n        grid: null\n    },\n\n    _create: function() {\n\n        var $navbar = this.element,\n            $navbtns = $navbar.find( \"a, button\" ),\n            iconpos = $navbtns.filter( \":jqmData(icon)\" ).length ? this.options.iconpos : undefined;\n\n        $navbar.addClass( \"ui-navbar\" )\n            .attr( \"role\", \"navigation\" )\n            .find( \"ul\" )\n            .jqmEnhanceable()\n            .grid({ grid: this.options.grid });\n\n        $navbtns\n            .each( function() {\n                var icon = $.mobile.getAttribute( this, \"icon\" ),\n                    theme = $.mobile.getAttribute( this, \"theme\" ),\n                    classes = \"ui-btn\";\n\n                if ( theme ) {\n                    classes += \" ui-btn-\" + theme;\n                }\n                if ( icon ) {\n                    classes += \" ui-icon-\" + icon + \" ui-btn-icon-\" + iconpos;\n                }\n                $( this ).addClass( classes );\n            });\n\n        $navbar.delegate( \"a\", \"vclick\", function( /* event */ ) {\n            var activeBtn = $( this );\n\n            if ( !( activeBtn.hasClass( \"ui-state-disabled\" ) ||\n\n                // DEPRECATED as of 1.4.0 - remove after 1.4.0 release\n                // only ui-state-disabled should be present thereafter\n                activeBtn.hasClass( \"ui-disabled\" ) ||\n                activeBtn.hasClass( $.mobile.activeBtnClass ) ) ) {\n\n                $navbtns.removeClass( $.mobile.activeBtnClass );\n                activeBtn.addClass( $.mobile.activeBtnClass );\n\n                // The code below is a workaround to fix #1181\n                $( document ).one( \"pagehide\", function() {\n                    activeBtn.removeClass( $.mobile.activeBtnClass );\n                });\n            }\n        });\n\n        // Buttons in the navbar with ui-state-persist class should regain their active state before page show\n        $navbar.closest( \".ui-page\" ).bind( \"pagebeforeshow\", function() {\n            $navbtns.filter( \".ui-state-persist\" ).addClass( $.mobile.activeBtnClass );\n        });\n    }\n});\n\n})( jQuery );\n\n(function( $, undefined ) {\n\nvar getAttr = $.mobile.getAttribute;\n\n$.widget( \"mobile.listview\", $.extend( {\n\n    options: {\n        theme: null,\n        countTheme: null, /* Deprecated in 1.4 */\n        dividerTheme: null,\n        icon: \"carat-r\",\n        splitIcon: \"carat-r\",\n        splitTheme: null,\n        corners: true,\n        shadow: true,\n        inset: false\n    },\n\n    _create: function() {\n        var t = this,\n            listviewClasses = \"\";\n\n        listviewClasses += t.options.inset ? \" ui-listview-inset\" : \"\";\n\n        if ( !!t.options.inset ) {\n            listviewClasses += t.options.corners ? \" ui-corner-all\" : \"\";\n            listviewClasses += t.options.shadow ? \" ui-shadow\" : \"\";\n        }\n\n        // create listview markup\n        t.element.addClass( \" ui-listview\" + listviewClasses );\n\n        t.refresh( true );\n    },\n\n    // TODO: Remove in 1.5\n    _findFirstElementByTagName: function( ele, nextProp, lcName, ucName ) {\n        var dict = {};\n        dict[ lcName ] = dict[ ucName ] = true;\n        while ( ele ) {\n            if ( dict[ ele.nodeName ] ) {\n                return ele;\n            }\n            ele = ele[ nextProp ];\n        }\n        return null;\n    },\n    // TODO: Remove in 1.5\n    _addThumbClasses: function( containers ) {\n        var i, img, len = containers.length;\n        for ( i = 0; i < len; i++ ) {\n            img = $( this._findFirstElementByTagName( containers[ i ].firstChild, \"nextSibling\", \"img\", \"IMG\" ) );\n            if ( img.length ) {\n                $( this._findFirstElementByTagName( img[ 0 ].parentNode, \"parentNode\", \"li\", \"LI\" ) ).addClass( img.hasClass( \"ui-li-icon\" ) ? \"ui-li-has-icon\" : \"ui-li-has-thumb\" );\n            }\n        }\n    },\n\n    _getChildrenByTagName: function( ele, lcName, ucName ) {\n        var results = [],\n            dict = {};\n        dict[ lcName ] = dict[ ucName ] = true;\n        ele = ele.firstChild;\n        while ( ele ) {\n            if ( dict[ ele.nodeName ] ) {\n                results.push( ele );\n            }\n            ele = ele.nextSibling;\n        }\n        return $( results );\n    },\n\n    _beforeListviewRefresh: $.noop,\n    _afterListviewRefresh: $.noop,\n\n    refresh: function( create ) {\n        var buttonClass, pos, numli, item, itemClass, itemTheme, itemIcon, icon, a,\n            isDivider, startCount, newStartCount, value, last, splittheme, splitThemeClass, spliticon,\n            altButtonClass, dividerTheme, li,\n            o = this.options,\n            $list = this.element,\n            ol = !!$.nodeName( $list[ 0 ], \"ol\" ),\n            start = $list.attr( \"start\" ),\n            itemClassDict = {},\n            countBubbles = $list.find( \".ui-li-count\" ),\n            countTheme = getAttr( $list[ 0 ], \"counttheme\" ) || this.options.countTheme,\n            countThemeClass = countTheme ? \"ui-body-\" + countTheme : \"ui-body-inherit\";\n\n        if ( o.theme ) {\n            $list.addClass( \"ui-group-theme-\" + o.theme );\n        }\n\n        // Check if a start attribute has been set while taking a value of 0 into account\n        if ( ol && ( start || start === 0 ) ) {\n            startCount = parseInt( start, 10 ) - 1;\n            $list.css( \"counter-reset\", \"listnumbering \" + startCount );\n        }\n\n        this._beforeListviewRefresh();\n\n        li = this._getChildrenByTagName( $list[ 0 ], \"li\", \"LI\" );\n\n        for ( pos = 0, numli = li.length; pos < numli; pos++ ) {\n            item = li.eq( pos );\n            itemClass = \"\";\n\n            if ( create || item[ 0 ].className.search( /\\bui-li-static\\b|\\bui-li-divider\\b/ ) < 0 ) {\n                a = this._getChildrenByTagName( item[ 0 ], \"a\", \"A\" );\n                isDivider = ( getAttr( item[ 0 ], \"role\" ) === \"list-divider\" );\n                value = item.attr( \"value\" );\n                itemTheme = getAttr( item[ 0 ], \"theme\" );\n\n                if ( a.length && a[ 0 ].className.search( /\\bui-btn\\b/ ) < 0 && !isDivider ) {\n                    itemIcon = getAttr( item[ 0 ], \"icon\" );\n                    icon = ( itemIcon === false ) ? false : ( itemIcon || o.icon );\n\n                    // TODO: Remove in 1.5 together with links.js (links.js / .ui-link deprecated in 1.4)\n                    a.removeClass( \"ui-link\" );\n\n                    buttonClass = \"ui-btn\";\n\n                    if ( itemTheme ) {\n                        buttonClass += \" ui-btn-\" + itemTheme;\n                    }\n\n                    if ( a.length > 1 ) {\n                        itemClass = \"ui-li-has-alt\";\n\n                        last = a.last();\n                        splittheme = getAttr( last[ 0 ], \"theme\" ) || o.splitTheme || getAttr( item[ 0 ], \"theme\", true );\n                        splitThemeClass = splittheme ? \" ui-btn-\" + splittheme : \"\";\n                        spliticon = getAttr( last[ 0 ], \"icon\" ) || getAttr( item[ 0 ], \"icon\" ) || o.splitIcon;\n                        altButtonClass = \"ui-btn ui-btn-icon-notext ui-icon-\" + spliticon + splitThemeClass;\n\n                        last\n                            .attr( \"title\", $.trim( last.getEncodedText() ) )\n                            .addClass( altButtonClass )\n                            .empty();\n\n                        // Reduce to the first anchor, because only the first gets the buttonClass\n                        a = a.first();\n                    } else if ( icon ) {\n                        buttonClass += \" ui-btn-icon-right ui-icon-\" + icon;\n                    }\n\n                    // Apply buttonClass to the (first) anchor\n                    a.addClass( buttonClass );\n                } else if ( isDivider ) {\n                    dividerTheme = ( getAttr( item[ 0 ], \"theme\" ) || o.dividerTheme || o.theme );\n\n                    itemClass = \"ui-li-divider ui-bar-\" + ( dividerTheme ? dividerTheme : \"inherit\" );\n\n                    item.attr( \"role\", \"heading\" );\n                } else if ( a.length <= 0 ) {\n                    itemClass = \"ui-li-static ui-body-\" + ( itemTheme ? itemTheme : \"inherit\" );\n                }\n                if ( ol && value ) {\n                    newStartCount = parseInt( value , 10 ) - 1;\n\n                    item.css( \"counter-reset\", \"listnumbering \" + newStartCount );\n                }\n            }\n\n            // Instead of setting item class directly on the list item\n            // at this point in time, push the item into a dictionary\n            // that tells us what class to set on it so we can do this after this\n            // processing loop is finished.\n\n            if ( !itemClassDict[ itemClass ] ) {\n                itemClassDict[ itemClass ] = [];\n            }\n\n            itemClassDict[ itemClass ].push( item[ 0 ] );\n        }\n\n        // Set the appropriate listview item classes on each list item.\n        // The main reason we didn't do this\n        // in the for-loop above is because we can eliminate per-item function overhead\n        // by calling addClass() and children() once or twice afterwards. This\n        // can give us a significant boost on platforms like WP7.5.\n\n        for ( itemClass in itemClassDict ) {\n            $( itemClassDict[ itemClass ] ).addClass( itemClass );\n        }\n\n        countBubbles.each( function() {\n            $( this ).closest( \"li\" ).addClass( \"ui-li-has-count\" );\n        });\n        if ( countThemeClass ) {\n            countBubbles.not( \"[class*='ui-body-']\" ).addClass( countThemeClass );\n        }\n\n        // Deprecated in 1.4. From 1.5 you have to add class ui-li-has-thumb or ui-li-has-icon to the LI.\n        this._addThumbClasses( li );\n        this._addThumbClasses( li.find( \".ui-btn\" ) );\n\n        this._afterListviewRefresh();\n\n        this._addFirstLastClasses( li, this._getVisibles( li, create ), create );\n    }\n}, $.mobile.behaviors.addFirstLastClasses ) );\n\n})( jQuery );\n\n(function( $, undefined ) {\n\nfunction defaultAutodividersSelector( elt ) {\n    // look for the text in the given element\n    var text = $.trim( elt.text() ) || null;\n\n    if ( !text ) {\n        return null;\n    }\n\n    // create the text for the divider (first uppercased letter)\n    text = text.slice( 0, 1 ).toUpperCase();\n\n    return text;\n}\n\n$.widget( \"mobile.listview\", $.mobile.listview, {\n    options: {\n        autodividers: false,\n        autodividersSelector: defaultAutodividersSelector\n    },\n\n    _beforeListviewRefresh: function() {\n        if ( this.options.autodividers ) {\n            this._replaceDividers();\n            this._superApply( arguments );\n        }\n    },\n\n    _replaceDividers: function() {\n        var i, lis, li, dividerText,\n            lastDividerText = null,\n            list = this.element,\n            divider;\n\n        list.children( \"li:jqmData(role='list-divider')\" ).remove();\n\n        lis = list.children( \"li\" );\n\n        for ( i = 0; i < lis.length ; i++ ) {\n            li = lis[ i ];\n            dividerText = this.options.autodividersSelector( $( li ) );\n\n            if ( dividerText && lastDividerText !== dividerText ) {\n                divider = document.createElement( \"li\" );\n                divider.appendChild( document.createTextNode( dividerText ) );\n                divider.setAttribute( \"data-\" + $.mobile.ns + \"role\", \"list-divider\" );\n                li.parentNode.insertBefore( divider, li );\n            }\n\n            lastDividerText = dividerText;\n        }\n    }\n});\n\n})( jQuery );\n\n(function( $, undefined ) {\n\nvar rdivider = /(^|\\s)ui-li-divider($|\\s)/,\n    rhidden = /(^|\\s)ui-screen-hidden($|\\s)/;\n\n$.widget( \"mobile.listview\", $.mobile.listview, {\n    options: {\n        hideDividers: false\n    },\n\n    _afterListviewRefresh: function() {\n        var items, idx, item, hideDivider = true;\n\n        this._superApply( arguments );\n\n        if ( this.options.hideDividers ) {\n            items = this._getChildrenByTagName( this.element[ 0 ], \"li\", \"LI\" );\n            for ( idx = items.length - 1 ; idx > -1 ; idx-- ) {\n                item = items[ idx ];\n                if ( item.className.match( rdivider ) ) {\n                    if ( hideDivider ) {\n                        item.className = item.className + \" ui-screen-hidden\";\n                    }\n                    hideDivider = true;\n                } else {\n                    if ( !item.className.match( rhidden ) ) {\n                        hideDivider = false;\n                    }\n                }\n            }\n        }\n    }\n});\n\n})( jQuery );\n\n(function( $, undefined ) {\n\n$.mobile.nojs = function( target ) {\n    $( \":jqmData(role='nojs')\", target ).addClass( \"ui-nojs\" );\n};\n\n})( jQuery );\n\n(function( $, undefined ) {\n\n$.mobile.behaviors.formReset = {\n    _handleFormReset: function() {\n        this._on( this.element.closest( \"form\" ), {\n            reset: function() {\n                this._delay( \"_reset\" );\n            }\n        });\n    }\n};\n\n})( jQuery );\n\n/*\n* \"checkboxradio\" plugin\n*/\n\n(function( $, undefined ) {\n\nvar escapeId = $.mobile.path.hashToSelector;\n\n$.widget( \"mobile.checkboxradio\", $.extend( {\n\n    initSelector: \"input:not( :jqmData(role='flipswitch' ) )[type='checkbox'],input[type='radio']:not( :jqmData(role='flipswitch' ))\",\n\n    options: {\n        theme: \"inherit\",\n        mini: false,\n        wrapperClass: null,\n        enhanced: false,\n        iconpos: \"left\"\n\n    },\n    _create: function() {\n        var input = this.element,\n            o = this.options,\n            inheritAttr = function( input, dataAttr ) {\n                return input.jqmData( dataAttr ) ||\n                    input.closest( \"form, fieldset\" ).jqmData( dataAttr );\n            },\n            label = this.options.enhanced ?\n                {\n                    element: this.element.siblings( \"label\" ),\n                    isParent: false\n                } :\n                this._findLabel(),\n            inputtype = input[0].type,\n            checkedClass = \"ui-\" + inputtype + \"-on\",\n            uncheckedClass = \"ui-\" + inputtype + \"-off\";\n\n        if ( inputtype !== \"checkbox\" && inputtype !== \"radio\" ) {\n            return;\n        }\n\n        if ( this.element[0].disabled ) {\n            this.options.disabled = true;\n        }\n\n        o.iconpos = inheritAttr( input, \"iconpos\" ) ||\n            label.element.attr( \"data-\" + $.mobile.ns + \"iconpos\" ) || o.iconpos,\n\n        // Establish options\n        o.mini = inheritAttr( input, \"mini\" ) || o.mini;\n\n        // Expose for other methods\n        $.extend( this, {\n            input: input,\n            label: label.element,\n            labelIsParent: label.isParent,\n            inputtype: inputtype,\n            checkedClass: checkedClass,\n            uncheckedClass: uncheckedClass\n        });\n\n        if ( !this.options.enhanced ) {\n            this._enhance();\n        }\n\n        this._on( label.element, {\n            vmouseover: \"_handleLabelVMouseOver\",\n            vclick: \"_handleLabelVClick\"\n        });\n\n        this._on( input, {\n            vmousedown: \"_cacheVals\",\n            vclick: \"_handleInputVClick\",\n            focus: \"_handleInputFocus\",\n            blur: \"_handleInputBlur\"\n        });\n\n        this._handleFormReset();\n        this.refresh();\n    },\n\n    _findLabel: function() {\n        var parentLabel, label, isParent,\n            input = this.element,\n            labelsList = input[ 0 ].labels;\n\n        if( labelsList && labelsList.length > 0 ) {\n            label = $( labelsList[ 0 ] );\n            isParent = $.contains( label[ 0 ], input[ 0 ] );\n        } else {\n            parentLabel = input.closest( \"label\" );\n            isParent = ( parentLabel.length > 0 );\n\n            // NOTE: Windows Phone could not find the label through a selector\n            // filter works though.\n            label = isParent ? parentLabel :\n                $( this.document[ 0 ].getElementsByTagName( \"label\" ) )\n                    .filter( \"[for='\" + escapeId( input[ 0 ].id ) + \"']\" )\n                    .first();\n        }\n\n        return {\n            element: label,\n            isParent: isParent\n        };\n    },\n\n    _enhance: function() {\n        this.label.addClass( \"ui-btn ui-corner-all\");\n\n        if ( this.labelIsParent ) {\n            this.input.add( this.label ).wrapAll( this._wrapper() );\n        } else {\n            //this.element.replaceWith( this.input.add( this.label ).wrapAll( this._wrapper() ) );\n            this.element.wrap( this._wrapper() );\n            this.element.parent().prepend( this.label );\n        }\n\n        // Wrap the input + label in a div\n\n        this._setOptions({\n            \"theme\": this.options.theme,\n            \"iconpos\": this.options.iconpos,\n            \"mini\": this.options.mini\n        });\n\n    },\n\n    _wrapper: function() {\n        return $( \"<div class='\"  +\n            ( this.options.wrapperClass ? this.options.wrapperClass : \"\" ) +\n            \" ui-\" + this.inputtype +\n            ( this.options.disabled ? \" ui-state-disabled\" : \"\" ) + \"' ></div>\" );\n    },\n\n    _handleInputFocus: function() {\n        this.label.addClass( $.mobile.focusClass );\n    },\n\n    _handleInputBlur: function() {\n        this.label.removeClass( $.mobile.focusClass );\n    },\n\n    _handleInputVClick: function() {\n        // Adds checked attribute to checked input when keyboard is used\n        this.element.prop( \"checked\", this.element.is( \":checked\" ) );\n        this._getInputSet().not( this.element ).prop( \"checked\", false );\n        this._updateAll( true );\n    },\n\n    _handleLabelVMouseOver: function( event ) {\n        if ( this.label.parent().hasClass( \"ui-state-disabled\" ) ) {\n            event.stopPropagation();\n        }\n    },\n\n    _handleLabelVClick: function( event ) {\n        var input = this.element;\n\n        if ( input.is( \":disabled\" ) ) {\n            event.preventDefault();\n            return;\n        }\n\n        this._cacheVals();\n\n        input.prop( \"checked\", this.inputtype === \"radio\" && true || !input.prop( \"checked\" ) );\n\n        // trigger click handler's bound directly to the input as a substitute for\n        // how label clicks behave normally in the browsers\n        // TODO: it would be nice to let the browser's handle the clicks and pass them\n        //       through to the associate input. we can swallow that click at the parent\n        //       wrapper element level\n        input.triggerHandler( \"click\" );\n\n        // Input set for common radio buttons will contain all the radio\n        // buttons, but will not for checkboxes. clearing the checked status\n        // of other radios ensures the active button state is applied properly\n        this._getInputSet().not( input ).prop( \"checked\", false );\n\n        this._updateAll();\n        return false;\n    },\n\n    _cacheVals: function() {\n        this._getInputSet().each( function() {\n            $( this ).attr(\"data-\" + $.mobile.ns + \"cacheVal\", this.checked );\n        });\n    },\n\n    // Returns those radio buttons that are supposed to be in the same group as\n    // this radio button. In the case of a checkbox or a radio lacking a name\n    // attribute, it returns this.element.\n    _getInputSet: function() {\n        var selector, formId,\n            radio = this.element[ 0 ],\n            name = radio.name,\n            form = radio.form,\n            doc = this.element.parents().last().get( 0 ),\n\n            // A radio is always a member of its own group\n            radios = this.element;\n\n        // Only start running selectors if this is an attached radio button with a name\n        if ( name && this.inputtype === \"radio\" && doc ) {\n            selector = \"input[type='radio'][name='\" + escapeId( name ) + \"']\";\n\n            // If we're inside a form\n            if ( form ) {\n                formId = form.getAttribute( \"id\" );\n\n                // If the form has an ID, collect radios scattered throught the document which\n                // nevertheless are part of the form by way of the value of their form attribute\n                if ( formId ) {\n                    radios = $( selector + \"[form='\" + escapeId( formId ) + \"']\", doc );\n                }\n\n                // Also add to those the radios in the form itself\n                radios = $( form ).find( selector ).filter( function() {\n\n                    // Some radios inside the form may belong to some other form by virtue of\n                    // having a form attribute defined on them, so we must filter them out here\n                    return ( this.form === form );\n                }).add( radios );\n\n            // If we're outside a form\n            } else {\n\n                // Collect all those radios which are also outside of a form and match our name\n                radios = $( selector, doc ).filter( function() {\n                    return !this.form;\n                });\n            }\n        }\n        return radios;\n    },\n\n    _updateAll: function( changeTriggered ) {\n        var self = this;\n\n        this._getInputSet().each( function() {\n            var $this = $( this );\n\n            if ( ( this.checked || self.inputtype === \"checkbox\" ) && !changeTriggered ) {\n                $this.trigger( \"change\" );\n            }\n        })\n        .checkboxradio( \"refresh\" );\n    },\n\n    _reset: function() {\n        this.refresh();\n    },\n\n    // Is the widget supposed to display an icon?\n    _hasIcon: function() {\n        var controlgroup, controlgroupWidget,\n            controlgroupConstructor = $.mobile.controlgroup;\n\n        // If the controlgroup widget is defined ...\n        if ( controlgroupConstructor ) {\n            controlgroup = this.element.closest(\n                \":mobile-controlgroup,\" +\n                controlgroupConstructor.prototype.initSelector );\n\n            // ... and the checkbox is in a controlgroup ...\n            if ( controlgroup.length > 0 ) {\n\n                // ... look for a controlgroup widget instance, and ...\n                controlgroupWidget = $.data( controlgroup[ 0 ], \"mobile-controlgroup\" );\n\n                // ... if found, decide based on the option value, ...\n                return ( ( controlgroupWidget ? controlgroupWidget.options.type :\n\n                    // ... otherwise decide based on the \"type\" data attribute.\n                    controlgroup.attr( \"data-\" + $.mobile.ns + \"type\" ) ) !== \"horizontal\" );\n            }\n        }\n\n        // Normally, the widget displays an icon.\n        return true;\n    },\n\n    refresh: function() {\n        var isChecked = this.element[ 0 ].checked,\n            active = $.mobile.activeBtnClass,\n            iconposClass = \"ui-btn-icon-\" + this.options.iconpos,\n            addClasses = [],\n            removeClasses = [];\n\n        if ( this._hasIcon() ) {\n            removeClasses.push( active );\n            addClasses.push( iconposClass );\n        } else {\n            removeClasses.push( iconposClass );\n            ( isChecked ? addClasses : removeClasses ).push( active );\n        }\n\n        if ( isChecked ) {\n            addClasses.push( this.checkedClass );\n            removeClasses.push( this.uncheckedClass );\n        } else {\n            addClasses.push( this.uncheckedClass );\n            removeClasses.push( this.checkedClass );\n        }\n\n        this.widget().toggleClass( \"ui-state-disabled\", this.element.prop( \"disabled\" ) );\n\n        this.label\n            .addClass( addClasses.join( \" \" ) )\n            .removeClass( removeClasses.join( \" \" ) );\n    },\n\n    widget: function() {\n        return this.label.parent();\n    },\n\n    _setOptions: function( options ) {\n        var label = this.label,\n            currentOptions = this.options,\n            outer = this.widget(),\n            hasIcon = this._hasIcon();\n\n        if ( options.disabled !== undefined ) {\n            this.input.prop( \"disabled\", !!options.disabled );\n            outer.toggleClass( \"ui-state-disabled\", !!options.disabled );\n        }\n        if ( options.mini !== undefined ) {\n            outer.toggleClass( \"ui-mini\", !!options.mini );\n        }\n        if ( options.theme !== undefined ) {\n            label\n                .removeClass( \"ui-btn-\" + currentOptions.theme )\n                .addClass( \"ui-btn-\" + options.theme );\n        }\n        if ( options.wrapperClass !== undefined ) {\n            outer\n                .removeClass( currentOptions.wrapperClass )\n                .addClass( options.wrapperClass );\n        }\n        if ( options.iconpos !== undefined && hasIcon ) {\n            label.removeClass( \"ui-btn-icon-\" + currentOptions.iconpos ).addClass( \"ui-btn-icon-\" + options.iconpos );\n        } else if ( !hasIcon ) {\n            label.removeClass( \"ui-btn-icon-\" + currentOptions.iconpos );\n        }\n        this._super( options );\n    }\n\n}, $.mobile.behaviors.formReset ) );\n\n})( jQuery );\n\n(function( $, undefined ) {\n\n$.widget( \"mobile.button\", {\n\n    initSelector: \"input[type='button'], input[type='submit'], input[type='reset']\",\n\n    options: {\n        theme: null,\n        icon: null,\n        iconpos: \"left\",\n        iconshadow: false, /* TODO: Deprecated in 1.4, remove in 1.5. */\n        corners: true,\n        shadow: true,\n        inline: null,\n        mini: null,\n        wrapperClass: null,\n        enhanced: false\n    },\n\n    _create: function() {\n\n        if ( this.element.is( \":disabled\" ) ) {\n            this.options.disabled = true;\n        }\n\n        if ( !this.options.enhanced ) {\n            this._enhance();\n        }\n\n        $.extend( this, {\n            wrapper: this.element.parent()\n        });\n\n        this._on( {\n            focus: function() {\n                this.widget().addClass( $.mobile.focusClass );\n            },\n\n            blur: function() {\n                this.widget().removeClass( $.mobile.focusClass );\n            }\n        });\n\n        this.refresh( true );\n    },\n\n    _enhance: function() {\n        this.element.wrap( this._button() );\n    },\n\n    _button: function() {\n        var options = this.options,\n            iconClasses = this._getIconClasses( this.options );\n\n        return $(\"<div class='ui-btn ui-input-btn\" +\n            ( options.wrapperClass ? \" \" + options.wrapperClass : \"\" ) +\n            ( options.theme ? \" ui-btn-\" + options.theme : \"\" ) +\n            ( options.corners ? \" ui-corner-all\" : \"\" ) +\n            ( options.shadow ? \" ui-shadow\" : \"\" ) +\n            ( options.inline ? \" ui-btn-inline\" : \"\" ) +\n            ( options.mini ? \" ui-mini\" : \"\" ) +\n            ( options.disabled ? \" ui-state-disabled\" : \"\" ) +\n            ( iconClasses ? ( \" \" + iconClasses ) : \"\" ) +\n            \"' >\" + this.element.val() + \"</div>\" );\n    },\n\n    widget: function() {\n        return this.wrapper;\n    },\n\n    _destroy: function() {\n            this.element.insertBefore( this.wrapper );\n            this.wrapper.remove();\n    },\n\n    _getIconClasses: function( options ) {\n        return ( options.icon ? ( \"ui-icon-\" + options.icon +\n            ( options.iconshadow ? \" ui-shadow-icon\" : \"\" ) + /* TODO: Deprecated in 1.4, remove in 1.5. */\n            \" ui-btn-icon-\" + options.iconpos ) : \"\" );\n    },\n\n    _setOptions: function( options ) {\n        var outer = this.widget();\n\n        if ( options.theme !== undefined ) {\n            outer\n                .removeClass( this.options.theme )\n                .addClass( \"ui-btn-\" + options.theme );\n        }\n        if ( options.corners !== undefined ) {\n            outer.toggleClass( \"ui-corner-all\", options.corners );\n        }\n        if ( options.shadow !== undefined ) {\n            outer.toggleClass( \"ui-shadow\", options.shadow );\n        }\n        if ( options.inline !== undefined ) {\n            outer.toggleClass( \"ui-btn-inline\", options.inline );\n        }\n        if ( options.mini !== undefined ) {\n            outer.toggleClass( \"ui-mini\", options.mini );\n        }\n        if ( options.disabled !== undefined ) {\n            this.element.prop( \"disabled\", options.disabled );\n            outer.toggleClass( \"ui-state-disabled\", options.disabled );\n        }\n\n        if ( options.icon !== undefined ||\n                options.iconshadow !== undefined || /* TODO: Deprecated in 1.4, remove in 1.5. */\n                options.iconpos !== undefined ) {\n            outer\n                .removeClass( this._getIconClasses( this.options ) )\n                .addClass( this._getIconClasses(\n                    $.extend( {}, this.options, options ) ) );\n        }\n\n        this._super( options );\n    },\n\n    refresh: function( create ) {\n        var originalElement,\n            isDisabled = this.element.prop( \"disabled\" );\n\n        if ( this.options.icon && this.options.iconpos === \"notext\" && this.element.attr( \"title\" ) ) {\n            this.element.attr( \"title\", this.element.val() );\n        }\n        if ( !create ) {\n            originalElement = this.element.detach();\n            $( this.wrapper ).text( this.element.val() ).append( originalElement );\n        }\n        if ( this.options.disabled !== isDisabled ) {\n            this._setOptions({ disabled: isDisabled });\n        }\n    }\n});\n\n})( jQuery );\n\n(function( $ ) {\n    var    meta = $( \"meta[name=viewport]\" ),\n        initialContent = meta.attr( \"content\" ),\n        disabledZoom = initialContent + \",maximum-scale=1, user-scalable=no\",\n        enabledZoom = initialContent + \",maximum-scale=10, user-scalable=yes\",\n        disabledInitially = /(user-scalable[\\s]*=[\\s]*no)|(maximum-scale[\\s]*=[\\s]*1)[$,\\s]/.test( initialContent );\n\n    $.mobile.zoom = $.extend( {}, {\n        enabled: !disabledInitially,\n        locked: false,\n        disable: function( lock ) {\n            if ( !disabledInitially && !$.mobile.zoom.locked ) {\n                meta.attr( \"content\", disabledZoom );\n                $.mobile.zoom.enabled = false;\n                $.mobile.zoom.locked = lock || false;\n            }\n        },\n        enable: function( unlock ) {\n            if ( !disabledInitially && ( !$.mobile.zoom.locked || unlock === true ) ) {\n                meta.attr( \"content\", enabledZoom );\n                $.mobile.zoom.enabled = true;\n                $.mobile.zoom.locked = false;\n            }\n        },\n        restore: function() {\n            if ( !disabledInitially ) {\n                meta.attr( \"content\", initialContent );\n                $.mobile.zoom.enabled = true;\n            }\n        }\n    });\n\n}( jQuery ));\n\n(function( $, undefined ) {\n\n$.widget( \"mobile.textinput\", {\n    initSelector: \"input[type='text'],\" +\n        \"input[type='search'],\" +\n        \":jqmData(type='search'),\" +\n        \"input[type='number'],\" +\n        \":jqmData(type='number'),\" +\n        \"input[type='password'],\" +\n        \"input[type='email'],\" +\n        \"input[type='url'],\" +\n        \"input[type='tel'],\" +\n        \"textarea,\" +\n        \"input[type='time'],\" +\n        \"input[type='date'],\" +\n        \"input[type='month'],\" +\n        \"input[type='week'],\" +\n        \"input[type='datetime'],\" +\n        \"input[type='datetime-local'],\" +\n        \"input[type='color'],\" +\n        \"input:not([type]),\" +\n        \"input[type='file']\",\n\n    options: {\n        theme: null,\n        corners: true,\n        mini: false,\n        // This option defaults to true on iOS devices.\n        preventFocusZoom: /iPhone|iPad|iPod/.test( navigator.platform ) && navigator.userAgent.indexOf( \"AppleWebKit\" ) > -1,\n        wrapperClass: \"\",\n        enhanced: false\n    },\n\n    _create: function() {\n\n        var options = this.options,\n            isSearch = this.element.is( \"[type='search'], :jqmData(type='search')\" ),\n            isTextarea = this.element[ 0 ].tagName === \"TEXTAREA\",\n            isRange = this.element.is( \"[data-\" + ( $.mobile.ns || \"\" ) + \"type='range']\" ),\n            inputNeedsWrap = ( (this.element.is( \"input\" ) ||\n                this.element.is( \"[data-\" + ( $.mobile.ns || \"\" ) + \"type='search']\" ) ) &&\n                    !isRange );\n\n        if ( this.element.prop( \"disabled\" ) ) {\n            options.disabled = true;\n        }\n\n        $.extend( this, {\n            classes: this._classesFromOptions(),\n            isSearch: isSearch,\n            isTextarea: isTextarea,\n            isRange: isRange,\n            inputNeedsWrap: inputNeedsWrap\n        });\n\n        this._autoCorrect();\n\n        if ( !options.enhanced ) {\n            this._enhance();\n        }\n\n        this._on( {\n            \"focus\": \"_handleFocus\",\n            \"blur\": \"_handleBlur\"\n        });\n\n    },\n\n    refresh: function() {\n        this.setOptions({\n            \"disabled\" : this.element.is( \":disabled\" )\n        });\n    },\n\n    _enhance: function() {\n        var elementClasses = [];\n\n        if ( this.isTextarea ) {\n            elementClasses.push( \"ui-input-text\" );\n        }\n\n        if ( this.isTextarea || this.isRange ) {\n            elementClasses.push( \"ui-shadow-inset\" );\n        }\n\n        //\"search\" and \"text\" input widgets\n        if ( this.inputNeedsWrap ) {\n            this.element.wrap( this._wrap() );\n        } else {\n            elementClasses = elementClasses.concat( this.classes );\n        }\n\n        this.element.addClass( elementClasses.join( \" \" ) );\n    },\n\n    widget: function() {\n        return ( this.inputNeedsWrap ) ? this.element.parent() : this.element;\n    },\n\n    _classesFromOptions: function() {\n        var options = this.options,\n            classes = [];\n\n        classes.push( \"ui-body-\" + ( ( options.theme === null ) ? \"inherit\" : options.theme ) );\n        if ( options.corners ) {\n            classes.push( \"ui-corner-all\" );\n        }\n        if ( options.mini ) {\n            classes.push( \"ui-mini\" );\n        }\n        if ( options.disabled ) {\n            classes.push( \"ui-state-disabled\" );\n        }\n        if ( options.wrapperClass ) {\n            classes.push( options.wrapperClass );\n        }\n\n        return classes;\n    },\n\n    _wrap: function() {\n        return $( \"<div class='\" +\n            ( this.isSearch ? \"ui-input-search \" : \"ui-input-text \" ) +\n            this.classes.join( \" \" ) + \" \" +\n            \"ui-shadow-inset'></div>\" );\n    },\n\n    _autoCorrect: function() {\n        // XXX: Temporary workaround for issue 785 (Apple bug 8910589).\n        //      Turn off autocorrect and autocomplete on non-iOS 5 devices\n        //      since the popup they use can't be dismissed by the user. Note\n        //      that we test for the presence of the feature by looking for\n        //      the autocorrect property on the input element. We currently\n        //      have no test for iOS 5 or newer so we're temporarily using\n        //      the touchOverflow support flag for jQM 1.0. Yes, I feel dirty.\n        //      - jblas\n        if ( typeof this.element[0].autocorrect !== \"undefined\" &&\n            !$.support.touchOverflow ) {\n\n            // Set the attribute instead of the property just in case there\n            // is code that attempts to make modifications via HTML.\n            this.element[0].setAttribute( \"autocorrect\", \"off\" );\n            this.element[0].setAttribute( \"autocomplete\", \"off\" );\n        }\n    },\n\n    _handleBlur: function() {\n        this.widget().removeClass( $.mobile.focusClass );\n        if ( this.options.preventFocusZoom ) {\n            $.mobile.zoom.enable( true );\n        }\n    },\n\n    _handleFocus: function() {\n        // In many situations, iOS will zoom into the input upon tap, this\n        // prevents that from happening\n        if ( this.options.preventFocusZoom ) {\n            $.mobile.zoom.disable( true );\n        }\n        this.widget().addClass( $.mobile.focusClass );\n    },\n\n    _setOptions: function ( options ) {\n        var outer = this.widget();\n\n        this._super( options );\n\n        if ( !( options.disabled === undefined &&\n            options.mini === undefined &&\n            options.corners === undefined &&\n            options.theme === undefined &&\n            options.wrapperClass === undefined ) ) {\n\n            outer.removeClass( this.classes.join( \" \" ) );\n            this.classes = this._classesFromOptions();\n            outer.addClass( this.classes.join( \" \" ) );\n        }\n\n        if ( options.disabled !== undefined ) {\n            this.element.prop( \"disabled\", !!options.disabled );\n        }\n    },\n\n    _destroy: function() {\n        if ( this.options.enhanced ) {\n            return;\n        }\n        if ( this.inputNeedsWrap ) {\n            this.element.unwrap();\n        }\n        this.element.removeClass( \"ui-input-text \" + this.classes.join( \" \" ) );\n    }\n});\n\n})( jQuery );\n\n(function( $, undefined ) {\n\n$.widget( \"mobile.slider\", $.extend( {\n    initSelector: \"input[type='range'], :jqmData(type='range'), :jqmData(role='slider')\",\n\n    widgetEventPrefix: \"slide\",\n\n    options: {\n        theme: null,\n        trackTheme: null,\n        corners: true,\n        mini: false,\n        highlight: false\n    },\n\n    _create: function() {\n\n        // TODO: Each of these should have comments explain what they're for\n        var self = this,\n            control = this.element,\n            trackTheme = this.options.trackTheme || $.mobile.getAttribute( control[ 0 ], \"theme\" ),\n            trackThemeClass = trackTheme ? \" ui-bar-\" + trackTheme : \" ui-bar-inherit\",\n            cornerClass = ( this.options.corners || control.jqmData( \"corners\" ) ) ? \" ui-corner-all\" : \"\",\n            miniClass = ( this.options.mini || control.jqmData( \"mini\" ) ) ? \" ui-mini\" : \"\",\n            cType = control[ 0 ].nodeName.toLowerCase(),\n            isToggleSwitch = ( cType === \"select\" ),\n            isRangeslider = control.parent().is( \":jqmData(role='rangeslider')\" ),\n            selectClass = ( isToggleSwitch ) ? \"ui-slider-switch\" : \"\",\n            controlID = control.attr( \"id\" ),\n            $label = $( \"[for='\" + controlID + \"']\" ),\n            labelID = $label.attr( \"id\" ) || controlID + \"-label\",\n            min = !isToggleSwitch ? parseFloat( control.attr( \"min\" ) ) : 0,\n            max =  !isToggleSwitch ? parseFloat( control.attr( \"max\" ) ) : control.find( \"option\" ).length-1,\n            step = window.parseFloat( control.attr( \"step\" ) || 1 ),\n            domHandle = document.createElement( \"a\" ),\n            handle = $( domHandle ),\n            domSlider = document.createElement( \"div\" ),\n            slider = $( domSlider ),\n            valuebg = this.options.highlight && !isToggleSwitch ? (function() {\n                var bg = document.createElement( \"div\" );\n                bg.className = \"ui-slider-bg \" + $.mobile.activeBtnClass;\n                return $( bg ).prependTo( slider );\n            })() : false,\n            options,\n            wrapper,\n            j, length,\n            i, optionsCount, origTabIndex,\n            side, activeClass, sliderImg;\n\n        $label.attr( \"id\", labelID );\n        this.isToggleSwitch = isToggleSwitch;\n\n        domHandle.setAttribute( \"href\", \"#\" );\n        domSlider.setAttribute( \"role\", \"application\" );\n        domSlider.className = [ this.isToggleSwitch ? \"ui-slider ui-slider-track ui-shadow-inset \" : \"ui-slider-track ui-shadow-inset \", selectClass, trackThemeClass, cornerClass, miniClass ].join( \"\" );\n        domHandle.className = \"ui-slider-handle\";\n        domSlider.appendChild( domHandle );\n\n        handle.attr({\n            \"role\": \"slider\",\n            \"aria-valuemin\": min,\n            \"aria-valuemax\": max,\n            \"aria-valuenow\": this._value(),\n            \"aria-valuetext\": this._value(),\n            \"title\": this._value(),\n            \"aria-labelledby\": labelID\n        });\n\n        $.extend( this, {\n            slider: slider,\n            handle: handle,\n            control: control,\n            type: cType,\n            step: step,\n            max: max,\n            min: min,\n            valuebg: valuebg,\n            isRangeslider: isRangeslider,\n            dragging: false,\n            beforeStart: null,\n            userModified: false,\n            mouseMoved: false\n        });\n\n        if ( isToggleSwitch ) {\n            // TODO: restore original tabindex (if any) in a destroy method\n            origTabIndex = control.attr( \"tabindex\" );\n            if ( origTabIndex ) {\n                handle.attr( \"tabindex\", origTabIndex );\n            }\n            control.attr( \"tabindex\", \"-1\" ).focus(function() {\n                $( this ).blur();\n                handle.focus();\n            });\n\n            wrapper = document.createElement( \"div\" );\n            wrapper.className = \"ui-slider-inneroffset\";\n\n            for ( j = 0, length = domSlider.childNodes.length; j < length; j++ ) {\n                wrapper.appendChild( domSlider.childNodes[j] );\n            }\n\n            domSlider.appendChild( wrapper );\n\n            // slider.wrapInner( \"<div class='ui-slider-inneroffset'></div>\" );\n\n            // make the handle move with a smooth transition\n            handle.addClass( \"ui-slider-handle-snapping\" );\n\n            options = control.find( \"option\" );\n\n            for ( i = 0, optionsCount = options.length; i < optionsCount; i++ ) {\n                side = !i ? \"b\" : \"a\";\n                activeClass = !i ? \"\" : \" \" + $.mobile.activeBtnClass;\n                sliderImg = document.createElement( \"span\" );\n\n                sliderImg.className = [ \"ui-slider-label ui-slider-label-\", side, activeClass ].join( \"\" );\n                sliderImg.setAttribute( \"role\", \"img\" );\n                sliderImg.appendChild( document.createTextNode( options[i].innerHTML ) );\n                $( sliderImg ).prependTo( slider );\n            }\n\n            self._labels = $( \".ui-slider-label\", slider );\n\n        }\n\n        // monitor the input for updated values\n        control.addClass( isToggleSwitch ? \"ui-slider-switch\" : \"ui-slider-input\" );\n\n        this._on( control, {\n            \"change\": \"_controlChange\",\n            \"keyup\": \"_controlKeyup\",\n            \"blur\": \"_controlBlur\",\n            \"vmouseup\": \"_controlVMouseUp\"\n        });\n\n        slider.bind( \"vmousedown\", $.proxy( this._sliderVMouseDown, this ) )\n            .bind( \"vclick\", false );\n\n        // We have to instantiate a new function object for the unbind to work properly\n        // since the method itself is defined in the prototype (causing it to unbind everything)\n        this._on( document, { \"vmousemove\": \"_preventDocumentDrag\" });\n        this._on( slider.add( document ), { \"vmouseup\": \"_sliderVMouseUp\" });\n\n        slider.insertAfter( control );\n\n        // wrap in a div for styling purposes\n        if ( !isToggleSwitch && !isRangeslider ) {\n            wrapper = this.options.mini ? \"<div class='ui-slider ui-mini'>\" : \"<div class='ui-slider'>\";\n\n            control.add( slider ).wrapAll( wrapper );\n        }\n\n        // bind the handle event callbacks and set the context to the widget instance\n        this._on( this.handle, {\n            \"vmousedown\": \"_handleVMouseDown\",\n            \"keydown\": \"_handleKeydown\",\n            \"keyup\": \"_handleKeyup\"\n        });\n\n        this.handle.bind( \"vclick\", false );\n\n        this._handleFormReset();\n\n        this.refresh( undefined, undefined, true );\n    },\n\n    _setOptions: function( options ) {\n        if ( options.theme !== undefined ) {\n            this._setTheme( options.theme );\n        }\n\n        if ( options.trackTheme !== undefined ) {\n            this._setTrackTheme( options.trackTheme );\n        }\n\n        if ( options.corners !== undefined ) {\n            this._setCorners( options.corners );\n        }\n\n        if ( options.mini !== undefined ) {\n            this._setMini( options.mini );\n        }\n\n        if ( options.highlight !== undefined ) {\n            this._setHighlight( options.highlight );\n        }\n\n        if ( options.disabled !== undefined ) {\n            this._setDisabled( options.disabled );\n        }\n        this._super( options );\n    },\n\n    _controlChange: function( event ) {\n        // if the user dragged the handle, the \"change\" event was triggered from inside refresh(); don't call refresh() again\n        if ( this._trigger( \"controlchange\", event ) === false ) {\n            return false;\n        }\n        if ( !this.mouseMoved ) {\n            this.refresh( this._value(), true );\n        }\n    },\n\n    _controlKeyup: function(/* event */) { // necessary?\n        this.refresh( this._value(), true, true );\n    },\n\n    _controlBlur: function(/* event */) {\n        this.refresh( this._value(), true );\n    },\n\n    // it appears the clicking the up and down buttons in chrome on\n    // range/number inputs doesn't trigger a change until the field is\n    // blurred. Here we check thif the value has changed and refresh\n    _controlVMouseUp: function(/* event */) {\n        this._checkedRefresh();\n    },\n\n    // NOTE force focus on handle\n    _handleVMouseDown: function(/* event */) {\n        this.handle.focus();\n    },\n\n    _handleKeydown: function( event ) {\n        var index = this._value();\n        if ( this.options.disabled ) {\n            return;\n        }\n\n        // In all cases prevent the default and mark the handle as active\n        switch ( event.keyCode ) {\n            case $.mobile.keyCode.HOME:\n            case $.mobile.keyCode.END:\n            case $.mobile.keyCode.PAGE_UP:\n            case $.mobile.keyCode.PAGE_DOWN:\n            case $.mobile.keyCode.UP:\n            case $.mobile.keyCode.RIGHT:\n            case $.mobile.keyCode.DOWN:\n            case $.mobile.keyCode.LEFT:\n                event.preventDefault();\n\n                if ( !this._keySliding ) {\n                    this._keySliding = true;\n                    this.handle.addClass( \"ui-state-active\" ); /* TODO: We don't use this class for styling. Do we need to add it? */\n                }\n\n                break;\n        }\n\n        // move the slider according to the keypress\n        switch ( event.keyCode ) {\n            case $.mobile.keyCode.HOME:\n                this.refresh( this.min );\n                break;\n            case $.mobile.keyCode.END:\n                this.refresh( this.max );\n                break;\n            case $.mobile.keyCode.PAGE_UP:\n            case $.mobile.keyCode.UP:\n            case $.mobile.keyCode.RIGHT:\n                this.refresh( index + this.step );\n                break;\n            case $.mobile.keyCode.PAGE_DOWN:\n            case $.mobile.keyCode.DOWN:\n            case $.mobile.keyCode.LEFT:\n                this.refresh( index - this.step );\n                break;\n        }\n    }, // remove active mark\n\n    _handleKeyup: function(/* event */) {\n        if ( this._keySliding ) {\n            this._keySliding = false;\n            this.handle.removeClass( \"ui-state-active\" ); /* See comment above. */\n        }\n    },\n\n    _sliderVMouseDown: function( event ) {\n        // NOTE: we don't do this in refresh because we still want to\n        //       support programmatic alteration of disabled inputs\n        if ( this.options.disabled || !( event.which === 1 || event.which === 0 || event.which === undefined ) ) {\n            return false;\n        }\n        if ( this._trigger( \"beforestart\", event ) === false ) {\n            return false;\n        }\n        this.dragging = true;\n        this.userModified = false;\n        this.mouseMoved = false;\n\n        if ( this.isToggleSwitch ) {\n            this.beforeStart = this.element[0].selectedIndex;\n        }\n\n        this.refresh( event );\n        this._trigger( \"start\" );\n        return false;\n    },\n\n    _sliderVMouseUp: function() {\n        if ( this.dragging ) {\n            this.dragging = false;\n\n            if ( this.isToggleSwitch ) {\n                // make the handle move with a smooth transition\n                this.handle.addClass( \"ui-slider-handle-snapping\" );\n\n                if ( this.mouseMoved ) {\n                    // this is a drag, change the value only if user dragged enough\n                    if ( this.userModified ) {\n                        this.refresh( this.beforeStart === 0 ? 1 : 0 );\n                    } else {\n                        this.refresh( this.beforeStart );\n                    }\n                } else {\n                    // this is just a click, change the value\n                    this.refresh( this.beforeStart === 0 ? 1 : 0 );\n                }\n            }\n\n            this.mouseMoved = false;\n            this._trigger( \"stop\" );\n            return false;\n        }\n    },\n\n    _preventDocumentDrag: function( event ) {\n            // NOTE: we don't do this in refresh because we still want to\n            //       support programmatic alteration of disabled inputs\n            if ( this._trigger( \"drag\", event ) === false) {\n                return false;\n            }\n            if ( this.dragging && !this.options.disabled ) {\n\n                // this.mouseMoved must be updated before refresh() because it will be used in the control \"change\" event\n                this.mouseMoved = true;\n\n                if ( this.isToggleSwitch ) {\n                    // make the handle move in sync with the mouse\n                    this.handle.removeClass( \"ui-slider-handle-snapping\" );\n                }\n\n                this.refresh( event );\n\n                // only after refresh() you can calculate this.userModified\n                this.userModified = this.beforeStart !== this.element[0].selectedIndex;\n                return false;\n            }\n        },\n\n    _checkedRefresh: function() {\n        if ( this.value !== this._value() ) {\n            this.refresh( this._value() );\n        }\n    },\n\n    _value: function() {\n        return  this.isToggleSwitch ? this.element[0].selectedIndex : parseFloat( this.element.val() ) ;\n    },\n\n    _reset: function() {\n        this.refresh( undefined, false, true );\n    },\n\n    refresh: function( val, isfromControl, preventInputUpdate ) {\n        // NOTE: we don't return here because we want to support programmatic\n        //       alteration of the input value, which should still update the slider\n\n        var self = this,\n            parentTheme = $.mobile.getAttribute( this.element[ 0 ], \"theme\" ),\n            theme = this.options.theme || parentTheme,\n            themeClass =  theme ? \" ui-btn-\" + theme : \"\",\n            trackTheme = this.options.trackTheme || parentTheme,\n            trackThemeClass = trackTheme ? \" ui-bar-\" + trackTheme : \" ui-bar-inherit\",\n            cornerClass = this.options.corners ? \" ui-corner-all\" : \"\",\n            miniClass = this.options.mini ? \" ui-mini\" : \"\",\n            left, width, data, tol,\n            pxStep, percent,\n            control, isInput, optionElements, min, max, step,\n            newval, valModStep, alignValue, percentPerStep,\n            handlePercent, aPercent, bPercent,\n            valueChanged;\n\n        self.slider[0].className = [ this.isToggleSwitch ? \"ui-slider ui-slider-switch ui-slider-track ui-shadow-inset\" : \"ui-slider-track ui-shadow-inset\", trackThemeClass, cornerClass, miniClass ].join( \"\" );\n        if ( this.options.disabled || this.element.prop( \"disabled\" ) ) {\n            this.disable();\n        }\n\n        // set the stored value for comparison later\n        this.value = this._value();\n        if ( this.options.highlight && !this.isToggleSwitch && this.slider.find( \".ui-slider-bg\" ).length === 0 ) {\n            this.valuebg = (function() {\n                var bg = document.createElement( \"div\" );\n                bg.className = \"ui-slider-bg \" + $.mobile.activeBtnClass;\n                return $( bg ).prependTo( self.slider );\n            })();\n        }\n        this.handle.addClass( \"ui-btn\" + themeClass + \" ui-shadow\" );\n\n        control = this.element;\n        isInput = !this.isToggleSwitch;\n        optionElements = isInput ? [] : control.find( \"option\" );\n        min =  isInput ? parseFloat( control.attr( \"min\" ) ) : 0;\n        max = isInput ? parseFloat( control.attr( \"max\" ) ) : optionElements.length - 1;\n        step = ( isInput && parseFloat( control.attr( \"step\" ) ) > 0 ) ? parseFloat( control.attr( \"step\" ) ) : 1;\n\n        if ( typeof val === \"object\" ) {\n            data = val;\n            // a slight tolerance helped get to the ends of the slider\n            tol = 8;\n\n            left = this.slider.offset().left;\n            width = this.slider.width();\n            pxStep = width/((max-min)/step);\n            if ( !this.dragging ||\n                    data.pageX < left - tol ||\n                    data.pageX > left + width + tol ) {\n                return;\n            }\n            if ( pxStep > 1 ) {\n                percent = ( ( data.pageX - left ) / width ) * 100;\n            } else {\n                percent = Math.round( ( ( data.pageX - left ) / width ) * 100 );\n            }\n        } else {\n            if ( val == null ) {\n                val = isInput ? parseFloat( control.val() || 0 ) : control[0].selectedIndex;\n            }\n            percent = ( parseFloat( val ) - min ) / ( max - min ) * 100;\n        }\n\n        if ( isNaN( percent ) ) {\n            return;\n        }\n\n        newval = ( percent / 100 ) * ( max - min ) + min;\n\n        //from jQuery UI slider, the following source will round to the nearest step\n        valModStep = ( newval - min ) % step;\n        alignValue = newval - valModStep;\n\n        if ( Math.abs( valModStep ) * 2 >= step ) {\n            alignValue += ( valModStep > 0 ) ? step : ( -step );\n        }\n\n        percentPerStep = 100/((max-min)/step);\n        // Since JavaScript has problems with large floats, round\n        // the final value to 5 digits after the decimal point (see jQueryUI: #4124)\n        newval = parseFloat( alignValue.toFixed(5) );\n\n        if ( typeof pxStep === \"undefined\" ) {\n            pxStep = width / ( (max-min) / step );\n        }\n        if ( pxStep > 1 && isInput ) {\n            percent = ( newval - min ) * percentPerStep * ( 1 / step );\n        }\n        if ( percent < 0 ) {\n            percent = 0;\n        }\n\n        if ( percent > 100 ) {\n            percent = 100;\n        }\n\n        if ( newval < min ) {\n            newval = min;\n        }\n\n        if ( newval > max ) {\n            newval = max;\n        }\n\n        this.handle.css( \"left\", percent + \"%\" );\n\n        this.handle[0].setAttribute( \"aria-valuenow\", isInput ? newval : optionElements.eq( newval ).attr( \"value\" ) );\n\n        this.handle[0].setAttribute( \"aria-valuetext\", isInput ? newval : optionElements.eq( newval ).getEncodedText() );\n\n        this.handle[0].setAttribute( \"title\", isInput ? newval : optionElements.eq( newval ).getEncodedText() );\n\n        if ( this.valuebg ) {\n            this.valuebg.css( \"width\", percent + \"%\" );\n        }\n\n        // drag the label widths\n        if ( this._labels ) {\n            handlePercent = this.handle.width() / this.slider.width() * 100;\n            aPercent = percent && handlePercent + ( 100 - handlePercent ) * percent / 100;\n            bPercent = percent === 100 ? 0 : Math.min( handlePercent + 100 - aPercent, 100 );\n\n            this._labels.each(function() {\n                var ab = $( this ).hasClass( \"ui-slider-label-a\" );\n                $( this ).width( ( ab ? aPercent : bPercent  ) + \"%\" );\n            });\n        }\n\n        if ( !preventInputUpdate ) {\n            valueChanged = false;\n\n            // update control\"s value\n            if ( isInput ) {\n                valueChanged = parseFloat( control.val() ) !== newval;\n                control.val( newval );\n            } else {\n                valueChanged = control[ 0 ].selectedIndex !== newval;\n                control[ 0 ].selectedIndex = newval;\n            }\n            if ( this._trigger( \"beforechange\", val ) === false) {\n                    return false;\n            }\n            if ( !isfromControl && valueChanged ) {\n                control.trigger( \"change\" );\n            }\n        }\n    },\n\n    _setHighlight: function( value ) {\n        value = !!value;\n        if ( value ) {\n            this.options.highlight = !!value;\n            this.refresh();\n        } else if ( this.valuebg ) {\n            this.valuebg.remove();\n            this.valuebg = false;\n        }\n    },\n\n    _setTheme: function( value ) {\n        this.handle\n            .removeClass( \"ui-btn-\" + this.options.theme )\n            .addClass( \"ui-btn-\" + value );\n\n        var currentTheme = this.options.theme ? this.options.theme : \"inherit\",\n            newTheme = value ? value : \"inherit\";\n\n        this.control\n            .removeClass( \"ui-body-\" + currentTheme )\n            .addClass( \"ui-body-\" + newTheme );\n    },\n\n    _setTrackTheme: function( value ) {\n        var currentTrackTheme = this.options.trackTheme ? this.options.trackTheme : \"inherit\",\n            newTrackTheme = value ? value : \"inherit\";\n\n        this.slider\n            .removeClass( \"ui-body-\" + currentTrackTheme )\n            .addClass( \"ui-body-\" + newTrackTheme );\n    },\n\n    _setMini: function( value ) {\n        value = !!value;\n        if ( !this.isToggleSwitch && !this.isRangeslider ) {\n            this.slider.parent().toggleClass( \"ui-mini\", value );\n            this.element.toggleClass( \"ui-mini\", value );\n        }\n        this.slider.toggleClass( \"ui-mini\", value );\n    },\n\n    _setCorners: function( value ) {\n        this.slider.toggleClass( \"ui-corner-all\", value );\n\n        if ( !this.isToggleSwitch ) {\n            this.control.toggleClass( \"ui-corner-all\", value );\n        }\n    },\n\n    _setDisabled: function( value ) {\n        value = !!value;\n        this.element.prop( \"disabled\", value );\n        this.slider\n            .toggleClass( \"ui-state-disabled\", value )\n            .attr( \"aria-disabled\", value );\n\n        this.element.toggleClass( \"ui-state-disabled\", value );\n    }\n\n}, $.mobile.behaviors.formReset ) );\n\n})( jQuery );\n\n(function( $, undefined ) {\n\nvar popup;\n\nfunction getPopup() {\n    if ( !popup ) {\n        popup = $( \"<div></div>\", {\n            \"class\": \"ui-slider-popup ui-shadow ui-corner-all\"\n        });\n    }\n    return popup.clone();\n}\n\n$.widget( \"mobile.slider\", $.mobile.slider, {\n    options: {\n        popupEnabled: false,\n        showValue: false\n    },\n\n    _create: function() {\n        this._super();\n\n        $.extend( this, {\n            _currentValue: null,\n            _popup: null,\n            _popupVisible: false\n        });\n\n        this._setOption( \"popupEnabled\", this.options.popupEnabled );\n\n        this._on( this.handle, { \"vmousedown\" : \"_showPopup\" } );\n        this._on( this.slider.add( this.document ), { \"vmouseup\" : \"_hidePopup\" } );\n        this._refresh();\n    },\n\n    // position the popup centered 5px above the handle\n    _positionPopup: function() {\n        var dstOffset = this.handle.offset();\n\n        this._popup.offset( {\n            left: dstOffset.left + ( this.handle.width() - this._popup.width() ) / 2,\n            top: dstOffset.top - this._popup.outerHeight() - 5\n        });\n    },\n\n    _setOption: function( key, value ) {\n        this._super( key, value );\n\n        if ( key === \"showValue\" ) {\n            this.handle.html( value && !this.options.mini ? this._value() : \"\" );\n        } else if ( key === \"popupEnabled\" ) {\n            if ( value && !this._popup ) {\n                this._popup = getPopup()\n                    .addClass( \"ui-body-\" + ( this.options.theme || \"a\" ) )\n                    .hide()\n                    .insertBefore( this.element );\n            }\n        }\n    },\n\n    // show value on the handle and in popup\n    refresh: function() {\n        this._super.apply( this, arguments );\n        this._refresh();\n    },\n\n    _refresh: function() {\n        var o = this.options, newValue;\n\n        if ( o.popupEnabled ) {\n            // remove the title attribute from the handle (which is\n            // responsible for the annoying tooltip); NB we have\n            // to do it here as the jqm slider sets it every time\n            // the slider's value changes :(\n            this.handle.removeAttr( \"title\" );\n        }\n\n        newValue = this._value();\n        if ( newValue === this._currentValue ) {\n            return;\n        }\n        this._currentValue = newValue;\n\n        if ( o.popupEnabled && this._popup ) {\n            this._positionPopup();\n            this._popup.html( newValue );\n        }\n\n        if ( o.showValue && !this.options.mini ) {\n            this.handle.html( newValue );\n        }\n    },\n\n    _showPopup: function() {\n        if ( this.options.popupEnabled && !this._popupVisible ) {\n            this.handle.html( \"\" );\n            this._popup.show();\n            this._positionPopup();\n            this._popupVisible = true;\n        }\n    },\n\n    _hidePopup: function() {\n        var o = this.options;\n\n        if ( o.popupEnabled && this._popupVisible ) {\n            if ( o.showValue && !o.mini ) {\n                this.handle.html( this._value() );\n            }\n            this._popup.hide();\n            this._popupVisible = false;\n        }\n    }\n});\n\n})( jQuery );\n\n(function( $, undefined ) {\n\n$.widget( \"mobile.flipswitch\", $.extend({\n\n    options: {\n        onText: \"On\",\n        offText: \"Off\",\n        theme: null,\n        enhanced: false,\n        wrapperClass: null,\n        corners: true,\n        mini: false\n    },\n\n    _create: function() {\n            if ( !this.options.enhanced ) {\n                this._enhance();\n            } else {\n                $.extend( this, {\n                    flipswitch: this.element.parent(),\n                    on: this.element.find( \".ui-flipswitch-on\" ).eq( 0 ),\n                    off: this.element.find( \".ui-flipswitch-off\" ).eq(0),\n                    type: this.element.get( 0 ).tagName\n                });\n            }\n\n            this._handleFormReset();\n\n            // Transfer tabindex to \"on\" element and make input unfocusable\n            this._originalTabIndex = this.element.attr( \"tabindex\" );\n            if ( this._originalTabIndex != null ) {\n                this.on.attr( \"tabindex\", this._originalTabIndex );\n            }\n            this.element.attr( \"tabindex\", \"-1\" );\n            this._on({\n                \"focus\" : \"_handleInputFocus\"\n            });\n\n            if ( this.element.is( \":disabled\" ) ) {\n                this._setOptions({\n                    \"disabled\": true\n                });\n            }\n\n            this._on( this.flipswitch, {\n                \"click\": \"_toggle\",\n                \"swipeleft\": \"_left\",\n                \"swiperight\": \"_right\"\n            });\n\n            this._on( this.on, {\n                \"keydown\": \"_keydown\"\n            });\n\n            this._on( {\n                \"change\": \"refresh\"\n            });\n    },\n\n    _handleInputFocus: function() {\n        this.on.focus();\n    },\n\n    widget: function() {\n        return this.flipswitch;\n    },\n\n    _left: function() {\n        this.flipswitch.removeClass( \"ui-flipswitch-active\" );\n        if ( this.type === \"SELECT\" ) {\n            this.element.get( 0 ).selectedIndex = 0;\n        } else {\n            this.element.prop( \"checked\", false );\n        }\n        this.element.trigger( \"change\" );\n    },\n\n    _right: function() {\n        this.flipswitch.addClass( \"ui-flipswitch-active\" );\n        if ( this.type === \"SELECT\" ) {\n            this.element.get( 0 ).selectedIndex = 1;\n        } else {\n            this.element.prop( \"checked\", true );\n        }\n        this.element.trigger( \"change\" );\n    },\n\n    _enhance: function() {\n        var flipswitch = $( \"<div>\" ),\n            options = this.options,\n            element = this.element,\n            theme = options.theme ? options.theme : \"inherit\",\n\n            // The \"on\" button is an anchor so it's focusable\n            on = $( \"<a></a>\", {\n                \"href\": \"#\"\n            }),\n            off = $( \"<span></span>\" ),\n            type = element.get( 0 ).tagName,\n            onText = ( type === \"INPUT\" ) ?\n                options.onText : element.find( \"option\" ).eq( 1 ).text(),\n            offText = ( type === \"INPUT\" ) ?\n                options.offText : element.find( \"option\" ).eq( 0 ).text();\n\n            on\n                .addClass( \"ui-flipswitch-on ui-btn ui-shadow ui-btn-inherit\" )\n                .text( onText );\n            off\n                .addClass( \"ui-flipswitch-off\" )\n                .text( offText );\n\n            flipswitch\n                .addClass( \"ui-flipswitch ui-shadow-inset \" +\n                    \"ui-bar-\" + theme + \" \" +\n                    ( options.wrapperClass ? options.wrapperClass : \"\" ) + \" \" +\n                    ( ( element.is( \":checked\" ) ||\n                        element\n                            .find( \"option\" )\n                            .eq( 1 )\n                            .is( \":selected\" ) ) ? \"ui-flipswitch-active\" : \"\" ) +\n                    ( element.is(\":disabled\") ? \" ui-state-disabled\": \"\") +\n                    ( options.corners ? \" ui-corner-all\": \"\" ) +\n                    ( options.mini ? \" ui-mini\": \"\" ) )\n                .append( on, off );\n\n            element\n                .addClass( \"ui-flipswitch-input\" )\n                .after( flipswitch )\n                .appendTo( flipswitch );\n\n        $.extend( this, {\n            flipswitch: flipswitch,\n            on: on,\n            off: off,\n            type: type\n        });\n    },\n\n    _reset: function() {\n        this.refresh();\n    },\n\n    refresh: function() {\n        var direction,\n            existingDirection = this.flipswitch.hasClass( \"ui-flipswitch-active\" ) ? \"_right\" : \"_left\";\n\n        if ( this.type === \"SELECT\" ) {\n            direction = ( this.element.get( 0 ).selectedIndex > 0 ) ? \"_right\": \"_left\";\n        } else {\n            direction = this.element.prop( \"checked\" ) ? \"_right\": \"_left\";\n        }\n\n        if ( direction !== existingDirection ) {\n            this[ direction ]();\n        }\n    },\n\n    _toggle: function() {\n        var direction = this.flipswitch.hasClass( \"ui-flipswitch-active\" ) ? \"_left\" : \"_right\";\n\n        this[ direction ]();\n    },\n\n    _keydown: function( e ) {\n        if ( e.which === $.mobile.keyCode.LEFT ) {\n            this._left();\n        } else if ( e.which === $.mobile.keyCode.RIGHT ) {\n            this._right();\n        } else if ( e.which === $.mobile.keyCode.SPACE ) {\n            this._toggle();\n            e.preventDefault();\n        }\n    },\n\n    _setOptions: function( options ) {\n        if ( options.theme !== undefined ) {\n            var currentTheme = options.theme ? options.theme : \"inherit\",\n                newTheme = options.theme ? options.theme : \"inherit\";\n\n            this.widget()\n                .removeClass( \"ui-bar-\" + currentTheme )\n                .addClass( \"ui-bar-\" + newTheme );\n        }\n        if ( options.onText !== undefined ) {\n            this.on.text( options.onText );\n        }\n        if ( options.offText !== undefined ) {\n            this.off.text( options.offText );\n        }\n        if ( options.disabled !== undefined ) {\n            this.widget().toggleClass( \"ui-state-disabled\", options.disabled );\n        }\n        if ( options.mini !== undefined ) {\n            this.widget().toggleClass( \"ui-mini\", options.mini );\n        }\n        if ( options.corners !== undefined ) {\n            this.widget().toggleClass( \"ui-corner-all\", options.corners );\n        }\n\n        this._super( options );\n    },\n\n    _destroy: function() {\n        if ( this.options.enhanced ) {\n            return;\n        }\n        if ( this._originalTabIndex != null ) {\n            this.element.attr( \"tabindex\", this._originalTabIndex );\n        } else {\n            this.element.removeAttr( \"tabindex\" );\n        }\n        this.on.remove();\n        this.off.remove();\n        this.element.unwrap();\n        this.flipswitch.remove();\n        this.removeClass( \"ui-flipswitch-input\" );\n    }\n\n}, $.mobile.behaviors.formReset ) );\n\n})( jQuery );\n\n(function( $, undefined ) {\n    $.widget( \"mobile.rangeslider\", $.extend( {\n\n        options: {\n            theme: null,\n            trackTheme: null,\n            corners: true,\n            mini: false,\n            highlight: true\n        },\n\n        _create: function() {\n            var $el = this.element,\n            elClass = this.options.mini ? \"ui-rangeslider ui-mini\" : \"ui-rangeslider\",\n            _inputFirst = $el.find( \"input\" ).first(),\n            _inputLast = $el.find( \"input\" ).last(),\n            _label = $el.find( \"label\" ).first(),\n            _sliderWidgetFirst = $.data( _inputFirst.get( 0 ), \"mobile-slider\" ) ||\n                $.data( _inputFirst.slider().get( 0 ), \"mobile-slider\" ),\n            _sliderWidgetLast = $.data( _inputLast.get(0), \"mobile-slider\" ) ||\n                $.data( _inputLast.slider().get( 0 ), \"mobile-slider\" ),\n            _sliderFirst = _sliderWidgetFirst.slider,\n            _sliderLast = _sliderWidgetLast.slider,\n            firstHandle = _sliderWidgetFirst.handle,\n            _sliders = $( \"<div class='ui-rangeslider-sliders' />\" ).appendTo( $el );\n\n            _inputFirst.addClass( \"ui-rangeslider-first\" );\n            _inputLast.addClass( \"ui-rangeslider-last\" );\n            $el.addClass( elClass );\n\n            _sliderFirst.appendTo( _sliders );\n            _sliderLast.appendTo( _sliders );\n            _label.insertBefore( $el );\n            firstHandle.prependTo( _sliderLast );\n\n            $.extend( this, {\n                _inputFirst: _inputFirst,\n                _inputLast: _inputLast,\n                _sliderFirst: _sliderFirst,\n                _sliderLast: _sliderLast,\n                _label: _label,\n                _targetVal: null,\n                _sliderTarget: false,\n                _sliders: _sliders,\n                _proxy: false\n            });\n\n            this.refresh();\n            this._on( this.element.find( \"input.ui-slider-input\" ), {\n                \"slidebeforestart\": \"_slidebeforestart\",\n                \"slidestop\": \"_slidestop\",\n                \"slidedrag\": \"_slidedrag\",\n                \"slidebeforechange\": \"_change\",\n                \"blur\": \"_change\",\n                \"keyup\": \"_change\"\n            });\n            this._on({\n                \"mousedown\":\"_change\"\n            });\n            this._on( this.element.closest( \"form\" ), {\n                \"reset\":\"_handleReset\"\n            });\n            this._on( firstHandle, {\n                \"vmousedown\": \"_dragFirstHandle\"\n            });\n        },\n        _handleReset: function() {\n            var self = this;\n            //we must wait for the stack to unwind before updateing other wise sliders will not have updated yet\n            setTimeout( function() {\n                self._updateHighlight();\n            },0);\n        },\n\n        _dragFirstHandle: function( event ) {\n            //if the first handle is dragged send the event to the first slider\n            $.data( this._inputFirst.get(0), \"mobile-slider\" ).dragging = true;\n            $.data( this._inputFirst.get(0), \"mobile-slider\" ).refresh( event );\n            $.data( this._inputFirst.get(0), \"mobile-slider\" )._trigger( \"start\" );\n            return false;\n        },\n\n        _slidedrag: function( event ) {\n            var first = $( event.target ).is( this._inputFirst ),\n                otherSlider = ( first ) ? this._inputLast : this._inputFirst;\n\n            this._sliderTarget = false;\n            //if the drag was initiated on an extreme and the other handle is focused send the events to\n            //the closest handle\n            if ( ( this._proxy === \"first\" && first ) || ( this._proxy === \"last\" && !first ) ) {\n                $.data( otherSlider.get(0), \"mobile-slider\" ).dragging = true;\n                $.data( otherSlider.get(0), \"mobile-slider\" ).refresh( event );\n                return false;\n            }\n        },\n\n        _slidestop: function( event ) {\n            var first = $( event.target ).is( this._inputFirst );\n\n            this._proxy = false;\n            //this stops dragging of the handle and brings the active track to the front\n            //this makes clicks on the track go the the last handle used\n            this.element.find( \"input\" ).trigger( \"vmouseup\" );\n            this._sliderFirst.css( \"z-index\", first ? 1 : \"\" );\n        },\n\n        _slidebeforestart: function( event ) {\n            this._sliderTarget = false;\n            //if the track is the target remember this and the original value\n            if ( $( event.originalEvent.target ).hasClass( \"ui-slider-track\" ) ) {\n                this._sliderTarget = true;\n                this._targetVal = $( event.target ).val();\n            }\n        },\n\n        _setOptions: function( options ) {\n            if ( options.theme !== undefined ) {\n                this._setTheme( options.theme );\n            }\n\n            if ( options.trackTheme !== undefined ) {\n                this._setTrackTheme( options.trackTheme );\n            }\n\n            if ( options.mini !== undefined ) {\n                this._setMini( options.mini );\n            }\n\n            if ( options.highlight !== undefined ) {\n                this._setHighlight( options.highlight );\n            }\n\n            if ( options.disabled !== undefined ) {\n                this._setDisabled( options.disabled );\n            }\n\n            this._super( options );\n            this.refresh();\n        },\n\n        refresh: function() {\n            var $el = this.element,\n                o = this.options;\n\n            if ( this._inputFirst.is( \":disabled\" ) || this._inputLast.is( \":disabled\" ) ) {\n                this.options.disabled = true;\n            }\n\n            $el.find( \"input\" ).slider({\n                theme: o.theme,\n                trackTheme: o.trackTheme,\n                disabled: o.disabled,\n                corners: o.corners,\n                mini: o.mini,\n                highlight: o.highlight\n            }).slider( \"refresh\" );\n            this._updateHighlight();\n        },\n\n        _change: function( event ) {\n            if ( event.type === \"keyup\" ) {\n                this._updateHighlight();\n                return false;\n            }\n\n            var self = this,\n                min = parseFloat( this._inputFirst.val(), 10 ),\n                max = parseFloat( this._inputLast.val(), 10 ),\n                first = $( event.target ).hasClass( \"ui-rangeslider-first\" ),\n                thisSlider = first ? this._inputFirst : this._inputLast,\n                otherSlider = first ? this._inputLast : this._inputFirst;\n\n            if ( ( this._inputFirst.val() > this._inputLast.val() && event.type === \"mousedown\" && !$(event.target).hasClass(\"ui-slider-handle\")) ) {\n                thisSlider.blur();\n            } else if ( event.type === \"mousedown\" ) {\n                return;\n            }\n            if ( min > max && !this._sliderTarget ) {\n                //this prevents min from being greater then max\n                thisSlider.val( first ? max: min ).slider( \"refresh\" );\n                this._trigger( \"normalize\" );\n            } else if ( min > max ) {\n                //this makes it so clicks on the target on either extreme go to the closest handle\n                thisSlider.val( this._targetVal ).slider( \"refresh\" );\n\n                //You must wait for the stack to unwind so first slider is updated before updating second\n                setTimeout( function() {\n                    otherSlider.val( first ? min: max ).slider( \"refresh\" );\n                    $.data( otherSlider.get(0), \"mobile-slider\" ).handle.focus();\n                    self._sliderFirst.css( \"z-index\", first ? \"\" : 1 );\n                    self._trigger( \"normalize\" );\n                }, 0 );\n                this._proxy = ( first ) ? \"first\" : \"last\";\n            }\n            //fixes issue where when both _sliders are at min they cannot be adjusted\n            if ( min === max ) {\n                $.data( thisSlider.get(0), \"mobile-slider\" ).handle.css( \"z-index\", 1 );\n                $.data( otherSlider.get(0), \"mobile-slider\" ).handle.css( \"z-index\", 0 );\n            } else {\n                $.data( otherSlider.get(0), \"mobile-slider\" ).handle.css( \"z-index\", \"\" );\n                $.data( thisSlider.get(0), \"mobile-slider\" ).handle.css( \"z-index\", \"\" );\n            }\n\n            this._updateHighlight();\n\n            if ( min >= max ) {\n                return false;\n            }\n        },\n\n        _updateHighlight: function() {\n            var min = parseInt( $.data( this._inputFirst.get(0), \"mobile-slider\" ).handle.get(0).style.left, 10 ),\n                max = parseInt( $.data( this._inputLast.get(0), \"mobile-slider\" ).handle.get(0).style.left, 10 ),\n                width = (max - min);\n\n            this.element.find( \".ui-slider-bg\" ).css({\n                \"margin-left\": min + \"%\",\n                \"width\": width + \"%\"\n            });\n        },\n\n        _setTheme: function( value ) {\n            this._inputFirst.slider( \"option\", \"theme\", value );\n            this._inputLast.slider( \"option\", \"theme\", value );\n        },\n\n        _setTrackTheme: function( value ) {\n            this._inputFirst.slider( \"option\", \"trackTheme\", value );\n            this._inputLast.slider( \"option\", \"trackTheme\", value );\n        },\n\n        _setMini: function( value ) {\n            this._inputFirst.slider( \"option\", \"mini\", value );\n            this._inputLast.slider( \"option\", \"mini\", value );\n            this.element.toggleClass( \"ui-mini\", !!value );\n        },\n\n        _setHighlight: function( value ) {\n            this._inputFirst.slider( \"option\", \"highlight\", value );\n            this._inputLast.slider( \"option\", \"highlight\", value );\n        },\n\n        _setDisabled: function( value ) {\n            this._inputFirst.prop( \"disabled\", value );\n            this._inputLast.prop( \"disabled\", value );\n        },\n\n        _destroy: function() {\n            this._label.prependTo( this.element );\n            this.element.removeClass( \"ui-rangeslider ui-mini\" );\n            this._inputFirst.after( this._sliderFirst );\n            this._inputLast.after( this._sliderLast );\n            this._sliders.remove();\n            this.element.find( \"input\" ).removeClass( \"ui-rangeslider-first ui-rangeslider-last\" ).slider( \"destroy\" );\n        }\n\n    }, $.mobile.behaviors.formReset ) );\n\n})( jQuery );\n\n(function( $, undefined ) {\n\n    $.widget( \"mobile.textinput\", $.mobile.textinput, {\n        options: {\n            clearBtn: false,\n            clearBtnText: \"Clear text\"\n        },\n\n        _create: function() {\n            this._super();\n\n            if ( this.isSearch ) {\n                this.options.clearBtn = true;\n            }\n\n            if ( !!this.options.clearBtn && this.inputNeedsWrap ) {\n                this._addClearBtn();\n            }\n        },\n\n        clearButton: function() {\n            return $( \"<a href='#' tabindex='-1' aria-hidden='true' \" +\n                \"class='ui-input-clear ui-btn ui-icon-delete ui-btn-icon-notext ui-corner-all'>\" +\n                \"</a>\" )\n                    .attr( \"title\", this.options.clearBtnText )\n                    .text( this.options.clearBtnText );\n        },\n\n        _clearBtnClick: function( event ) {\n            this.element.val( \"\" )\n                    .focus()\n                    .trigger( \"change\" );\n\n            this._clearBtn.addClass( \"ui-input-clear-hidden\" );\n            event.preventDefault();\n        },\n\n        _addClearBtn: function() {\n\n            if ( !this.options.enhanced ) {\n                this._enhanceClear();\n            }\n\n            $.extend( this, {\n                _clearBtn: this.widget().find(\"a.ui-input-clear\")\n            });\n\n            this._bindClearEvents();\n\n            this._toggleClear();\n\n        },\n\n        _enhanceClear: function() {\n\n            this.clearButton().appendTo( this.widget() );\n            this.widget().addClass( \"ui-input-has-clear\" );\n\n        },\n\n        _bindClearEvents: function() {\n\n            this._on( this._clearBtn, {\n                \"click\": \"_clearBtnClick\"\n            });\n\n            this._on({\n                \"keyup\": \"_toggleClear\",\n                \"change\": \"_toggleClear\",\n                \"input\": \"_toggleClear\",\n                \"focus\": \"_toggleClear\",\n                \"blur\": \"_toggleClear\",\n                \"cut\": \"_toggleClear\",\n                \"paste\": \"_toggleClear\"\n\n            });\n\n        },\n\n        _unbindClear: function() {\n            this._off( this._clearBtn, \"click\");\n            this._off( this.element, \"keyup change input focus blur cut paste\" );\n        },\n\n        _setOptions: function( options ) {\n            this._super( options );\n\n            if ( options.clearBtn !== undefined &&\n                !this.element.is( \"textarea, :jqmData(type='range')\" ) ) {\n                if ( options.clearBtn ) {\n                    this._addClearBtn();\n                } else {\n                    this._destroyClear();\n                }\n            }\n\n            if ( options.clearBtnText !== undefined && this._clearBtn !== undefined ) {\n                this._clearBtn.text( options.clearBtnText )\n                    .attr(\"title\", options.clearBtnText);\n            }\n        },\n\n        _toggleClear: function() {\n            this._delay( \"_toggleClearClass\", 0 );\n        },\n\n        _toggleClearClass: function() {\n            this._clearBtn.toggleClass( \"ui-input-clear-hidden\", !this.element.val() );\n        },\n\n        _destroyClear: function() {\n            this.widget().removeClass( \"ui-input-has-clear\" );\n            this._unbindClear();\n            this._clearBtn.remove();\n        },\n\n        _destroy: function() {\n            this._super();\n            if ( this.options.clearBtn ) {\n                this._destroyClear();\n            }\n        }\n\n    });\n\n})( jQuery );\n\n(function( $, undefined ) {\n\n    $.widget( \"mobile.textinput\", $.mobile.textinput, {\n        options: {\n            autogrow:true,\n            keyupTimeoutBuffer: 100\n        },\n\n        _create: function() {\n            this._super();\n\n            if ( this.options.autogrow && this.isTextarea ) {\n                this._autogrow();\n            }\n        },\n\n        _autogrow: function() {\n            this.element.addClass( \"ui-textinput-autogrow\" );\n\n            this._on({\n                \"keyup\": \"_timeout\",\n                \"change\": \"_timeout\",\n                \"input\": \"_timeout\",\n                \"paste\": \"_timeout\"\n            });\n\n            // Attach to the various you-have-become-visible notifications that the\n            // various framework elements emit.\n            // TODO: Remove all but the updatelayout handler once #6426 is fixed.\n            this._on( true, this.document, {\n\n                // TODO: Move to non-deprecated event\n                \"pageshow\": \"_handleShow\",\n                \"popupbeforeposition\": \"_handleShow\",\n                \"updatelayout\": \"_handleShow\",\n                \"panelopen\": \"_handleShow\"\n            });\n        },\n\n        // Synchronously fix the widget height if this widget's parents are such\n        // that they show/hide content at runtime. We still need to check whether\n        // the widget is actually visible in case it is contained inside multiple\n        // such containers. For example: panel contains collapsible contains\n        // autogrow textinput. The panel may emit \"panelopen\" indicating that its\n        // content has become visible, but the collapsible is still collapsed, so\n        // the autogrow textarea is still not visible.\n        _handleShow: function( event ) {\n            if ( $.contains( event.target, this.element[ 0 ] ) &&\n                this.element.is( \":visible\" ) ) {\n\n                if ( event.type !== \"popupbeforeposition\" ) {\n                    this.element\n                        .addClass( \"ui-textinput-autogrow-resize\" )\n                        .animationComplete(\n                            $.proxy( function() {\n                                this.element.removeClass( \"ui-textinput-autogrow-resize\" );\n                            }, this ),\n                        \"transition\" );\n                }\n                this._prepareHeightUpdate();\n            }\n        },\n\n        _unbindAutogrow: function() {\n            this.element.removeClass( \"ui-textinput-autogrow\" );\n            this._off( this.element, \"keyup change input paste\" );\n            this._off( this.document,\n                \"pageshow popupbeforeposition updatelayout panelopen\" );\n        },\n\n        keyupTimeout: null,\n\n        _prepareHeightUpdate: function( delay ) {\n            if ( this.keyupTimeout ) {\n                clearTimeout( this.keyupTimeout );\n            }\n            if ( delay === undefined ) {\n                this._updateHeight();\n            } else {\n                this.keyupTimeout = this._delay( \"_updateHeight\", delay );\n            }\n        },\n\n        _timeout: function() {\n            this._prepareHeightUpdate( this.options.keyupTimeoutBuffer );\n        },\n\n        _updateHeight: function() {\n            var paddingTop, paddingBottom, paddingHeight, scrollHeight, clientHeight,\n                borderTop, borderBottom, borderHeight, height,\n                scrollTop = this.window.scrollTop();\n            this.keyupTimeout = 0;\n\n            // IE8 textareas have the onpage property - others do not\n            if ( !( \"onpage\" in this.element[ 0 ] ) ) {\n                this.element.css({\n                    \"height\": 0,\n                    \"min-height\": 0,\n                    \"max-height\": 0\n                });\n            }\n\n            scrollHeight = this.element[ 0 ].scrollHeight;\n            clientHeight = this.element[ 0 ].clientHeight;\n            borderTop = parseFloat( this.element.css( \"border-top-width\" ) );\n            borderBottom = parseFloat( this.element.css( \"border-bottom-width\" ) );\n            borderHeight = borderTop + borderBottom;\n            height = scrollHeight + borderHeight + 15;\n\n            // Issue 6179: Padding is not included in scrollHeight and\n            // clientHeight by Firefox if no scrollbar is visible. Because\n            // textareas use the border-box box-sizing model, padding should be\n            // included in the new (assigned) height. Because the height is set\n            // to 0, clientHeight == 0 in Firefox. Therefore, we can use this to\n            // check if padding must be added.\n            if ( clientHeight === 0 ) {\n                paddingTop = parseFloat( this.element.css( \"padding-top\" ) );\n                paddingBottom = parseFloat( this.element.css( \"padding-bottom\" ) );\n                paddingHeight = paddingTop + paddingBottom;\n\n                height += paddingHeight;\n            }\n\n            this.element.css({\n                \"height\": height,\n                \"min-height\": \"\",\n                \"max-height\": \"\"\n            });\n\n            this.window.scrollTop( scrollTop );\n        },\n\n        refresh: function() {\n            if ( this.options.autogrow && this.isTextarea ) {\n                this._updateHeight();\n            }\n        },\n\n        _setOptions: function( options ) {\n\n            this._super( options );\n\n            if ( options.autogrow !== undefined && this.isTextarea ) {\n                if ( options.autogrow ) {\n                    this._autogrow();\n                } else {\n                    this._unbindAutogrow();\n                }\n            }\n        }\n\n    });\n})( jQuery );\n\n(function( $, undefined ) {\n\n$.widget( \"mobile.selectmenu\", $.extend( {\n    initSelector: \"select:not( :jqmData(role='slider')):not( :jqmData(role='flipswitch') )\",\n\n    options: {\n        theme: null,\n        icon: \"carat-d\",\n        iconpos: \"right\",\n        inline: false,\n        corners: true,\n        shadow: true,\n        iconshadow: false, /* TODO: Deprecated in 1.4, remove in 1.5. */\n        overlayTheme: null,\n        dividerTheme: null,\n        hidePlaceholderMenuItems: true,\n        closeText: \"Close\",\n        nativeMenu: true,\n        // This option defaults to true on iOS devices.\n        preventFocusZoom: /iPhone|iPad|iPod/.test( navigator.platform ) && navigator.userAgent.indexOf( \"AppleWebKit\" ) > -1,\n        mini: false\n    },\n\n    _button: function() {\n        return $( \"<div/>\" );\n    },\n\n    _setDisabled: function( value ) {\n        this.element.attr( \"disabled\", value );\n        this.button.attr( \"aria-disabled\", value );\n        return this._setOption( \"disabled\", value );\n    },\n\n    _focusButton : function() {\n        var self = this;\n\n        setTimeout( function() {\n            self.button.focus();\n        }, 40);\n    },\n\n    _selectOptions: function() {\n        return this.select.find( \"option\" );\n    },\n\n    // setup items that are generally necessary for select menu extension\n    _preExtension: function() {\n        var inline = this.options.inline || this.element.jqmData( \"inline\" ),\n            mini = this.options.mini || this.element.jqmData( \"mini\" ),\n            classes = \"\";\n        // TODO: Post 1.1--once we have time to test thoroughly--any classes manually applied to the original element should be carried over to the enhanced element, with an `-enhanced` suffix. See https://github.com/jquery/jquery-mobile/issues/3577\n        /* if ( $el[0].className.length ) {\n            classes = $el[0].className;\n        } */\n        if ( !!~this.element[0].className.indexOf( \"ui-btn-left\" ) ) {\n            classes = \" ui-btn-left\";\n        }\n\n        if (  !!~this.element[0].className.indexOf( \"ui-btn-right\" ) ) {\n            classes = \" ui-btn-right\";\n        }\n\n        if ( inline ) {\n            classes += \" ui-btn-inline\";\n        }\n        if ( mini ) {\n            classes += \" ui-mini\";\n        }\n\n        this.select = this.element.removeClass( \"ui-btn-left ui-btn-right\" ).wrap( \"<div class='ui-select\" + classes + \"'>\" );\n        this.selectId  = this.select.attr( \"id\" ) || ( \"select-\" + this.uuid );\n        this.buttonId = this.selectId + \"-button\";\n        this.label = $( \"label[for='\"+ this.selectId +\"']\" );\n        this.isMultiple = this.select[ 0 ].multiple;\n    },\n\n    _destroy: function() {\n        var wrapper = this.element.parents( \".ui-select\" );\n        if ( wrapper.length > 0 ) {\n            if ( wrapper.is( \".ui-btn-left, .ui-btn-right\" ) ) {\n                this.element.addClass( wrapper.hasClass( \"ui-btn-left\" ) ? \"ui-btn-left\" : \"ui-btn-right\" );\n            }\n            this.element.insertAfter( wrapper );\n            wrapper.remove();\n        }\n    },\n\n    _create: function() {\n        this._preExtension();\n\n        this.button = this._button();\n\n        var self = this,\n\n            options = this.options,\n\n            iconpos = options.icon ? ( options.iconpos || this.select.jqmData( \"iconpos\" ) ) : false,\n\n            button = this.button\n                .insertBefore( this.select )\n                .attr( \"id\", this.buttonId )\n                .addClass( \"ui-btn\" +\n                    ( options.icon ? ( \" ui-icon-\" + options.icon + \" ui-btn-icon-\" + iconpos +\n                    ( options.iconshadow ? \" ui-shadow-icon\" : \"\" ) ) :    \"\" ) + /* TODO: Remove in 1.5. */\n                    ( options.theme ? \" ui-btn-\" + options.theme : \"\" ) +\n                    ( options.corners ? \" ui-corner-all\" : \"\" ) +\n                    ( options.shadow ? \" ui-shadow\" : \"\" ) );\n\n        this.setButtonText();\n\n        // Opera does not properly support opacity on select elements\n        // In Mini, it hides the element, but not its text\n        // On the desktop,it seems to do the opposite\n        // for these reasons, using the nativeMenu option results in a full native select in Opera\n        if ( options.nativeMenu && window.opera && window.opera.version ) {\n            button.addClass( \"ui-select-nativeonly\" );\n        }\n\n        // Add counter for multi selects\n        if ( this.isMultiple ) {\n            this.buttonCount = $( \"<span>\" )\n                .addClass( \"ui-li-count ui-body-inherit\" )\n                .hide()\n                .appendTo( button.addClass( \"ui-li-has-count\" ) );\n        }\n\n        // Disable if specified\n        if ( options.disabled || this.element.attr( \"disabled\" )) {\n            this.disable();\n        }\n\n        // Events on native select\n        this.select.change(function() {\n            self.refresh();\n\n            if ( !!options.nativeMenu ) {\n                self._delay( function() {\n                    self.select.blur();\n                });\n            }\n        });\n\n        this._handleFormReset();\n\n        this._on( this.button, {\n            keydown: \"_handleKeydown\"\n        });\n\n        this.build();\n    },\n\n    build: function() {\n        var self = this;\n\n        this.select\n            .appendTo( self.button )\n            .bind( \"vmousedown\", function() {\n                // Add active class to button\n                self.button.addClass( $.mobile.activeBtnClass );\n            })\n            .bind( \"focus\", function() {\n                self.button.addClass( $.mobile.focusClass );\n            })\n            .bind( \"blur\", function() {\n                self.button.removeClass( $.mobile.focusClass );\n            })\n            .bind( \"focus vmouseover\", function() {\n                self.button.trigger( \"vmouseover\" );\n            })\n            .bind( \"vmousemove\", function() {\n                // Remove active class on scroll/touchmove\n                self.button.removeClass( $.mobile.activeBtnClass );\n            })\n            .bind( \"change blur vmouseout\", function() {\n                self.button.trigger( \"vmouseout\" )\n                    .removeClass( $.mobile.activeBtnClass );\n            });\n\n        // In many situations, iOS will zoom into the select upon tap, this prevents that from happening\n        self.button.bind( \"vmousedown\", function() {\n            if ( self.options.preventFocusZoom ) {\n                    $.mobile.zoom.disable( true );\n            }\n        });\n        self.label.bind( \"click focus\", function() {\n            if ( self.options.preventFocusZoom ) {\n                    $.mobile.zoom.disable( true );\n            }\n        });\n        self.select.bind( \"focus\", function() {\n            if ( self.options.preventFocusZoom ) {\n                    $.mobile.zoom.disable( true );\n            }\n        });\n        self.button.bind( \"mouseup\", function() {\n            if ( self.options.preventFocusZoom ) {\n                setTimeout(function() {\n                    $.mobile.zoom.enable( true );\n                }, 0 );\n            }\n        });\n        self.select.bind( \"blur\", function() {\n            if ( self.options.preventFocusZoom ) {\n                $.mobile.zoom.enable( true );\n            }\n        });\n\n    },\n\n    selected: function() {\n        return this._selectOptions().filter( \":selected\" );\n    },\n\n    selectedIndices: function() {\n        var self = this;\n\n        return this.selected().map(function() {\n            return self._selectOptions().index( this );\n        }).get();\n    },\n\n    setButtonText: function() {\n        var self = this,\n            selected = this.selected(),\n            text = this.placeholder,\n            span = $( document.createElement( \"span\" ) );\n\n        this.button.children( \"span\" ).not( \".ui-li-count\" ).remove().end().end().prepend( (function() {\n            if ( selected.length ) {\n                text = selected.map(function() {\n                    return $( this ).text();\n                }).get().join( \", \" );\n            } else {\n                text = self.placeholder;\n            }\n\n            if ( text ) {\n                span.text( text );\n            } else {\n\n                // Set the contents to &nbsp; which we write as &#160; to be XHTML compliant - see gh-6699\n                span.html( \"&#160;\" );\n            }\n\n            // TODO possibly aggregate multiple select option classes\n            return span\n                .addClass( self.select.attr( \"class\" ) )\n                .addClass( selected.attr( \"class\" ) )\n                .removeClass( \"ui-screen-hidden\" );\n        })());\n    },\n\n    setButtonCount: function() {\n        var selected = this.selected();\n\n        // multiple count inside button\n        if ( this.isMultiple ) {\n            this.buttonCount[ selected.length > 1 ? \"show\" : \"hide\" ]().text( selected.length );\n        }\n    },\n\n    _handleKeydown: function( /* event */ ) {\n        this._delay( \"_refreshButton\" );\n    },\n\n    _reset: function() {\n        this.refresh();\n    },\n\n    _refreshButton: function() {\n        this.setButtonText();\n        this.setButtonCount();\n    },\n\n    refresh: function() {\n        this._refreshButton();\n    },\n\n    // open and close preserved in native selects\n    // to simplify users code when looping over selects\n    open: $.noop,\n    close: $.noop,\n\n    disable: function() {\n        this._setDisabled( true );\n        this.button.addClass( \"ui-state-disabled\" );\n    },\n\n    enable: function() {\n        this._setDisabled( false );\n        this.button.removeClass( \"ui-state-disabled\" );\n    }\n}, $.mobile.behaviors.formReset ) );\n\n})( jQuery );\n\n(function( $, undefined ) {\n\n$.mobile.links = function( target ) {\n\n    //links within content areas, tests included with page\n    $( target )\n        .find( \"a\" )\n        .jqmEnhanceable()\n        .filter( \":jqmData(rel='popup')[href][href!='']\" )\n        .each( function() {\n            // Accessibility info for popups\n            var element = this,\n                idref = element.getAttribute( \"href\" ).substring( 1 );\n\n            if ( idref ) {\n                element.setAttribute( \"aria-haspopup\", true );\n                element.setAttribute( \"aria-owns\", idref );\n                element.setAttribute( \"aria-expanded\", false );\n            }\n        })\n        .end()\n        .not( \".ui-btn, :jqmData(role='none'), :jqmData(role='nojs')\" )\n        .addClass( \"ui-link\" );\n\n};\n\n})( jQuery );\n\n\n(function( $, undefined ) {\n\nfunction fitSegmentInsideSegment( windowSize, segmentSize, offset, desired ) {\n    var returnValue = desired;\n\n    if ( windowSize < segmentSize ) {\n        // Center segment if it's bigger than the window\n        returnValue = offset + ( windowSize - segmentSize ) / 2;\n    } else {\n        // Otherwise center it at the desired coordinate while keeping it completely inside the window\n        returnValue = Math.min( Math.max( offset, desired - segmentSize / 2 ), offset + windowSize - segmentSize );\n    }\n\n    return returnValue;\n}\n\nfunction getWindowCoordinates( theWindow ) {\n    return {\n        x: theWindow.scrollLeft(),\n        y: theWindow.scrollTop(),\n        cx: ( theWindow[ 0 ].innerWidth || theWindow.width() ),\n        cy: ( theWindow[ 0 ].innerHeight || theWindow.height() )\n    };\n}\n\n$.widget( \"mobile.popup\", {\n    options: {\n        wrapperClass: null,\n        theme: null,\n        overlayTheme: null,\n        shadow: true,\n        corners: true,\n        transition: \"none\",\n        positionTo: \"origin\",\n        tolerance: null,\n        closeLinkSelector: \"a:jqmData(rel='back')\",\n        closeLinkEvents: \"click.popup\",\n        navigateEvents: \"navigate.popup\",\n        closeEvents: \"navigate.popup pagebeforechange.popup\",\n        dismissible: true,\n        enhanced: false,\n\n        // NOTE Windows Phone 7 has a scroll position caching issue that\n        //      requires us to disable popup history management by default\n        //      https://github.com/jquery/jquery-mobile/issues/4784\n        //\n        // NOTE this option is modified in _create!\n        history: !$.mobile.browser.oldIE\n    },\n\n    // When the user depresses the mouse/finger on an element inside the popup while the popup is\n    // open, we ignore resize events for a short while. This prevents #6961.\n    _handleDocumentVmousedown: function( theEvent ) {\n        if ( this._isOpen && $.contains( this._ui.container[ 0 ], theEvent.target ) ) {\n            this._ignoreResizeEvents();\n        }\n    },\n\n    _create: function() {\n        var theElement = this.element,\n            myId = theElement.attr( \"id\" ),\n            currentOptions = this.options;\n\n        // We need to adjust the history option to be false if there's no AJAX nav.\n        // We can't do it in the option declarations because those are run before\n        // it is determined whether there shall be AJAX nav.\n        currentOptions.history = currentOptions.history && $.mobile.ajaxEnabled && $.mobile.hashListeningEnabled;\n\n        this._on( this.document, {\n            \"vmousedown\": \"_handleDocumentVmousedown\"\n        });\n\n        // Define instance variables\n        $.extend( this, {\n            _scrollTop: 0,\n            _page: theElement.closest( \".ui-page\" ),\n            _ui: null,\n            _fallbackTransition: \"\",\n            _currentTransition: false,\n            _prerequisites: null,\n            _isOpen: false,\n            _tolerance: null,\n            _resizeData: null,\n            _ignoreResizeTo: 0,\n            _orientationchangeInProgress: false\n        });\n\n        if ( this._page.length === 0 ) {\n            this._page = $( \"body\" );\n        }\n\n        if ( currentOptions.enhanced ) {\n            this._ui = {\n                container: theElement.parent(),\n                screen: theElement.parent().prev(),\n                placeholder: $( this.document[ 0 ].getElementById( myId + \"-placeholder\" ) )\n            };\n        } else {\n            this._ui = this._enhance( theElement, myId );\n            this._applyTransition( currentOptions.transition );\n        }\n        this\n            ._setTolerance( currentOptions.tolerance )\n            ._ui.focusElement = this._ui.container;\n\n        // Event handlers\n        this._on( this._ui.screen, { \"vclick\": \"_eatEventAndClose\" } );\n        this._on( this.window, {\n            orientationchange: $.proxy( this, \"_handleWindowOrientationchange\" ),\n            resize: $.proxy( this, \"_handleWindowResize\" ),\n            keyup: $.proxy( this, \"_handleWindowKeyUp\" )\n        });\n        this._on( this.document, { \"focusin\": \"_handleDocumentFocusIn\" } );\n    },\n\n    _enhance: function( theElement, myId ) {\n        var currentOptions = this.options,\n            wrapperClass = currentOptions.wrapperClass,\n            ui = {\n                screen: $( \"<div class='ui-screen-hidden ui-popup-screen \" +\n                this._themeClassFromOption( \"ui-overlay-\", currentOptions.overlayTheme ) + \"'></div>\" ),\n                placeholder: $( \"<div style='display: none;'><!-- placeholder --></div>\" ),\n                container: $( \"<div class='ui-popup-container ui-popup-hidden ui-popup-truncate\" +\n                    ( wrapperClass ? ( \" \" + wrapperClass ) : \"\" ) + \"'></div>\" )\n            },\n            fragment = this.document[ 0 ].createDocumentFragment();\n\n        fragment.appendChild( ui.screen[ 0 ] );\n        fragment.appendChild( ui.container[ 0 ] );\n\n        if ( myId ) {\n            ui.screen.attr( \"id\", myId + \"-screen\" );\n            ui.container.attr( \"id\", myId + \"-popup\" );\n            ui.placeholder\n                .attr( \"id\", myId + \"-placeholder\" )\n                .html( \"<!-- placeholder for \" + myId + \" -->\" );\n        }\n\n        // Apply the proto\n        this._page[ 0 ].appendChild( fragment );\n        // Leave a placeholder where the element used to be\n        ui.placeholder.insertAfter( theElement );\n        theElement\n            .detach()\n            .addClass( \"ui-popup \" +\n                this._themeClassFromOption( \"ui-body-\", currentOptions.theme ) + \" \" +\n                ( currentOptions.shadow ? \"ui-overlay-shadow \" : \"\" ) +\n                ( currentOptions.corners ? \"ui-corner-all \" : \"\" ) )\n            .appendTo( ui.container );\n\n        return ui;\n    },\n\n    _eatEventAndClose: function( theEvent ) {\n        theEvent.preventDefault();\n        theEvent.stopImmediatePropagation();\n        if ( this.options.dismissible ) {\n            this.close();\n        }\n        return false;\n    },\n\n    // Make sure the screen covers the entire document - CSS is sometimes not\n    // enough to accomplish this.\n    _resizeScreen: function() {\n        var screen = this._ui.screen,\n            popupHeight = this._ui.container.outerHeight( true ),\n            screenHeight = screen.removeAttr( \"style\" ).height(),\n\n            // Subtracting 1 here is necessary for an obscure Andrdoid 4.0 bug where\n            // the browser hangs if the screen covers the entire document :/\n            documentHeight = this.document.height() - 1;\n\n        if ( screenHeight < documentHeight ) {\n            screen.height( documentHeight );\n        } else if ( popupHeight > screenHeight ) {\n            screen.height( popupHeight );\n        }\n    },\n\n    _handleWindowKeyUp: function( theEvent ) {\n        if ( this._isOpen && theEvent.keyCode === $.mobile.keyCode.ESCAPE ) {\n            return this._eatEventAndClose( theEvent );\n        }\n    },\n\n    _expectResizeEvent: function() {\n        var windowCoordinates = getWindowCoordinates( this.window );\n\n        if ( this._resizeData ) {\n            if ( windowCoordinates.x === this._resizeData.windowCoordinates.x &&\n                windowCoordinates.y === this._resizeData.windowCoordinates.y &&\n                windowCoordinates.cx === this._resizeData.windowCoordinates.cx &&\n                windowCoordinates.cy === this._resizeData.windowCoordinates.cy ) {\n                // timeout not refreshed\n                return false;\n            } else {\n                // clear existing timeout - it will be refreshed below\n                clearTimeout( this._resizeData.timeoutId );\n            }\n        }\n\n        this._resizeData = {\n            timeoutId: this._delay( \"_resizeTimeout\", 200 ),\n            windowCoordinates: windowCoordinates\n        };\n\n        return true;\n    },\n\n    _resizeTimeout: function() {\n        if ( this._isOpen ) {\n            if ( !this._expectResizeEvent() ) {\n                if ( this._ui.container.hasClass( \"ui-popup-hidden\" ) ) {\n                    // effectively rapid-open the popup while leaving the screen intact\n                    this._ui.container.removeClass( \"ui-popup-hidden ui-popup-truncate\" );\n                    this.reposition( { positionTo: \"window\" } );\n                    this._ignoreResizeEvents();\n                }\n\n                this._resizeScreen();\n                this._resizeData = null;\n                this._orientationchangeInProgress = false;\n            }\n        } else {\n            this._resizeData = null;\n            this._orientationchangeInProgress = false;\n        }\n    },\n\n    _stopIgnoringResizeEvents: function() {\n        this._ignoreResizeTo = 0;\n    },\n\n    _ignoreResizeEvents: function() {\n        if ( this._ignoreResizeTo ) {\n            clearTimeout( this._ignoreResizeTo );\n        }\n        this._ignoreResizeTo = this._delay( \"_stopIgnoringResizeEvents\", 1000 );\n    },\n\n    _handleWindowResize: function(/* theEvent */) {\n        if ( this._isOpen && this._ignoreResizeTo === 0 ) {\n            if ( ( this._expectResizeEvent() || this._orientationchangeInProgress ) &&\n                !this._ui.container.hasClass( \"ui-popup-hidden\" ) ) {\n                // effectively rapid-close the popup while leaving the screen intact\n                this._ui.container\n                    .addClass( \"ui-popup-hidden ui-popup-truncate\" )\n                    .removeAttr( \"style\" );\n            }\n        }\n    },\n\n    _handleWindowOrientationchange: function(/* theEvent */) {\n        if ( !this._orientationchangeInProgress && this._isOpen && this._ignoreResizeTo === 0 ) {\n            this._expectResizeEvent();\n            this._orientationchangeInProgress = true;\n        }\n    },\n\n    // When the popup is open, attempting to focus on an element that is not a\n    // child of the popup will redirect focus to the popup\n    _handleDocumentFocusIn: function( theEvent ) {\n        var target,\n            targetElement = theEvent.target,\n            ui = this._ui;\n\n        if ( !this._isOpen ) {\n            return;\n        }\n\n        if ( targetElement !== ui.container[ 0 ] ) {\n            target = $( targetElement );\n            if ( !$.contains( ui.container[ 0 ], targetElement ) ) {\n                $( this.document[ 0 ].activeElement ).one( \"focus\", $.proxy( function() {\n                    this._safelyBlur( targetElement );\n                }, this ) );\n                ui.focusElement.focus();\n                theEvent.preventDefault();\n                theEvent.stopImmediatePropagation();\n                return false;\n            } else if ( ui.focusElement[ 0 ] === ui.container[ 0 ] ) {\n                ui.focusElement = target;\n            }\n        }\n\n        this._ignoreResizeEvents();\n    },\n\n    _themeClassFromOption: function( prefix, value ) {\n        return ( value ? ( value === \"none\" ? \"\" : ( prefix + value ) ) : ( prefix + \"inherit\" ) );\n    },\n\n    _applyTransition: function( value ) {\n        if ( value ) {\n            this._ui.container.removeClass( this._fallbackTransition );\n            if ( value !== \"none\" ) {\n                this._fallbackTransition = $.mobile._maybeDegradeTransition( value );\n                if ( this._fallbackTransition === \"none\" ) {\n                    this._fallbackTransition = \"\";\n                }\n                this._ui.container.addClass( this._fallbackTransition );\n            }\n        }\n\n        return this;\n    },\n\n    _setOptions: function( newOptions ) {\n        var currentOptions = this.options,\n            theElement = this.element,\n            screen = this._ui.screen;\n\n        if ( newOptions.wrapperClass !== undefined ) {\n            this._ui.container\n                .removeClass( currentOptions.wrapperClass )\n                .addClass( newOptions.wrapperClass );\n        }\n\n        if ( newOptions.theme !== undefined ) {\n            theElement\n                .removeClass( this._themeClassFromOption( \"ui-body-\", currentOptions.theme ) )\n                .addClass( this._themeClassFromOption( \"ui-body-\", newOptions.theme ) );\n        }\n\n        if ( newOptions.overlayTheme !== undefined ) {\n            screen\n                .removeClass( this._themeClassFromOption( \"ui-overlay-\", currentOptions.overlayTheme ) )\n                .addClass( this._themeClassFromOption( \"ui-overlay-\", newOptions.overlayTheme ) );\n\n            if ( this._isOpen ) {\n                screen.addClass( \"in\" );\n            }\n        }\n\n        if ( newOptions.shadow !== undefined ) {\n            theElement.toggleClass( \"ui-overlay-shadow\", newOptions.shadow );\n        }\n\n        if ( newOptions.corners !== undefined ) {\n            theElement.toggleClass( \"ui-corner-all\", newOptions.corners );\n        }\n\n        if ( newOptions.transition !== undefined ) {\n            if ( !this._currentTransition ) {\n                this._applyTransition( newOptions.transition );\n            }\n        }\n\n        if ( newOptions.tolerance !== undefined ) {\n            this._setTolerance( newOptions.tolerance );\n        }\n\n        if ( newOptions.disabled !== undefined ) {\n            if ( newOptions.disabled ) {\n                this.close();\n            }\n        }\n\n        return this._super( newOptions );\n    },\n\n    _setTolerance: function( value ) {\n        var tol = { t: 30, r: 15, b: 30, l: 15 },\n            ar;\n\n        if ( value !== undefined ) {\n            ar = String( value ).split( \",\" );\n\n            $.each( ar, function( idx, val ) { ar[ idx ] = parseInt( val, 10 ); } );\n\n            switch( ar.length ) {\n                // All values are to be the same\n                case 1:\n                    if ( !isNaN( ar[ 0 ] ) ) {\n                        tol.t = tol.r = tol.b = tol.l = ar[ 0 ];\n                    }\n                    break;\n\n                // The first value denotes top/bottom tolerance, and the second value denotes left/right tolerance\n                case 2:\n                    if ( !isNaN( ar[ 0 ] ) ) {\n                        tol.t = tol.b = ar[ 0 ];\n                    }\n                    if ( !isNaN( ar[ 1 ] ) ) {\n                        tol.l = tol.r = ar[ 1 ];\n                    }\n                    break;\n\n                // The array contains values in the order top, right, bottom, left\n                case 4:\n                    if ( !isNaN( ar[ 0 ] ) ) {\n                        tol.t = ar[ 0 ];\n                    }\n                    if ( !isNaN( ar[ 1 ] ) ) {\n                        tol.r = ar[ 1 ];\n                    }\n                    if ( !isNaN( ar[ 2 ] ) ) {\n                        tol.b = ar[ 2 ];\n                    }\n                    if ( !isNaN( ar[ 3 ] ) ) {\n                        tol.l = ar[ 3 ];\n                    }\n                    break;\n\n                default:\n                    break;\n            }\n        }\n\n        this._tolerance = tol;\n        return this;\n    },\n\n    _clampPopupWidth: function( infoOnly ) {\n        var menuSize,\n            windowCoordinates = getWindowCoordinates( this.window ),\n            // rectangle within which the popup must fit\n            rectangle = {\n                x: this._tolerance.l,\n                y: windowCoordinates.y + this._tolerance.t,\n                cx: windowCoordinates.cx - this._tolerance.l - this._tolerance.r,\n                cy: windowCoordinates.cy - this._tolerance.t - this._tolerance.b\n            };\n\n        if ( !infoOnly ) {\n            // Clamp the width of the menu before grabbing its size\n            this._ui.container.css( \"max-width\", rectangle.cx );\n        }\n\n        menuSize = {\n            cx: this._ui.container.outerWidth( true ),\n            cy: this._ui.container.outerHeight( true )\n        };\n\n        return { rc: rectangle, menuSize: menuSize };\n    },\n\n    _calculateFinalLocation: function( desired, clampInfo ) {\n        var returnValue,\n            rectangle = clampInfo.rc,\n            menuSize = clampInfo.menuSize;\n\n        // Center the menu over the desired coordinates, while not going outside\n        // the window tolerances. This will center wrt. the window if the popup is\n        // too large.\n        returnValue = {\n            left: fitSegmentInsideSegment( rectangle.cx, menuSize.cx, rectangle.x, desired.x ),\n            top: fitSegmentInsideSegment( rectangle.cy, menuSize.cy, rectangle.y, desired.y )\n        };\n\n        // Make sure the top of the menu is visible\n        returnValue.top = Math.max( 0, returnValue.top );\n\n        // If the height of the menu is smaller than the height of the document\n        // align the bottom with the bottom of the document\n\n        returnValue.top -= Math.min( returnValue.top,\n            Math.max( 0, returnValue.top + menuSize.cy - this.document.height() ) );\n\n        return returnValue;\n    },\n\n    // Try and center the overlay over the given coordinates\n    _placementCoords: function( desired ) {\n        return this._calculateFinalLocation( desired, this._clampPopupWidth() );\n    },\n\n    _createPrerequisites: function( screenPrerequisite, containerPrerequisite, whenDone ) {\n        var prerequisites,\n            self = this;\n\n        // It is important to maintain both the local variable prerequisites and\n        // self._prerequisites. The local variable remains in the closure of the\n        // functions which call the callbacks passed in. The comparison between the\n        // local variable and self._prerequisites is necessary, because once a\n        // function has been passed to .animationComplete() it will be called next\n        // time an animation completes, even if that's not the animation whose end\n        // the function was supposed to catch (for example, if an abort happens\n        // during the opening animation, the .animationComplete handler is not\n        // called for that animation anymore, but the handler remains attached, so\n        // it is called the next time the popup is opened - making it stale.\n        // Comparing the local variable prerequisites to the widget-level variable\n        // self._prerequisites ensures that callbacks triggered by a stale\n        // .animationComplete will be ignored.\n\n        prerequisites = {\n            screen: $.Deferred(),\n            container: $.Deferred()\n        };\n\n        prerequisites.screen.then( function() {\n            if ( prerequisites === self._prerequisites ) {\n                screenPrerequisite();\n            }\n        });\n\n        prerequisites.container.then( function() {\n            if ( prerequisites === self._prerequisites ) {\n                containerPrerequisite();\n            }\n        });\n\n        $.when( prerequisites.screen, prerequisites.container ).done( function() {\n            if ( prerequisites === self._prerequisites ) {\n                self._prerequisites = null;\n                whenDone();\n            }\n        });\n\n        self._prerequisites = prerequisites;\n    },\n\n    _animate: function( args ) {\n        // NOTE before removing the default animation of the screen\n        //      this had an animate callback that would resolve the deferred\n        //      now the deferred is resolved immediately\n        // TODO remove the dependency on the screen deferred\n        this._ui.screen\n            .removeClass( args.classToRemove )\n            .addClass( args.screenClassToAdd );\n\n        args.prerequisites.screen.resolve();\n\n        if ( args.transition && args.transition !== \"none\" ) {\n            if ( args.applyTransition ) {\n                this._applyTransition( args.transition );\n            }\n            if ( this._fallbackTransition ) {\n                this._ui.container\n                    .addClass( args.containerClassToAdd )\n                    .removeClass( args.classToRemove )\n                    .animationComplete( $.proxy( args.prerequisites.container, \"resolve\" ) );\n                return;\n            }\n        }\n        this._ui.container.removeClass( args.classToRemove );\n        args.prerequisites.container.resolve();\n    },\n\n    // The desired coordinates passed in will be returned untouched if no reference element can be identified via\n    // desiredPosition.positionTo. Nevertheless, this function ensures that its return value always contains valid\n    // x and y coordinates by specifying the center middle of the window if the coordinates are absent.\n    // options: { x: coordinate, y: coordinate, positionTo: string: \"origin\", \"window\", or jQuery selector\n    _desiredCoords: function( openOptions ) {\n        var offset,\n            dst = null,\n            windowCoordinates = getWindowCoordinates( this.window ),\n            x = openOptions.x,\n            y = openOptions.y,\n            pTo = openOptions.positionTo;\n\n        // Establish which element will serve as the reference\n        if ( pTo && pTo !== \"origin\" ) {\n            if ( pTo === \"window\" ) {\n                x = windowCoordinates.cx / 2 + windowCoordinates.x;\n                y = windowCoordinates.cy / 2 + windowCoordinates.y;\n            } else {\n                try {\n                    dst = $( pTo );\n                } catch( err ) {\n                    dst = null;\n                }\n                if ( dst ) {\n                    dst.filter( \":visible\" );\n                    if ( dst.length === 0 ) {\n                        dst = null;\n                    }\n                }\n            }\n        }\n\n        // If an element was found, center over it\n        if ( dst ) {\n            offset = dst.offset();\n            x = offset.left + dst.outerWidth() / 2;\n            y = offset.top + dst.outerHeight() / 2;\n        }\n\n        // Make sure x and y are valid numbers - center over the window\n        if ( $.type( x ) !== \"number\" || isNaN( x ) ) {\n            x = windowCoordinates.cx / 2 + windowCoordinates.x;\n        }\n        if ( $.type( y ) !== \"number\" || isNaN( y ) ) {\n            y = windowCoordinates.cy / 2 + windowCoordinates.y;\n        }\n\n        return { x: x, y: y };\n    },\n\n    _reposition: function( openOptions ) {\n        // We only care about position-related parameters for repositioning\n        openOptions = {\n            x: openOptions.x,\n            y: openOptions.y,\n            positionTo: openOptions.positionTo\n        };\n        this._trigger( \"beforeposition\", undefined, openOptions );\n        this._ui.container.offset( this._placementCoords( this._desiredCoords( openOptions ) ) );\n    },\n\n    reposition: function( openOptions ) {\n        if ( this._isOpen ) {\n            this._reposition( openOptions );\n        }\n    },\n\n    _safelyBlur: function( currentElement ){\n        if ( currentElement !== this.window[ 0 ] &&\n            currentElement.nodeName.toLowerCase() !== \"body\" ) {\n                $( currentElement ).blur();\n        }\n    },\n\n    _openPrerequisitesComplete: function() {\n        var id = this.element.attr( \"id\" ),\n            firstFocus = this._ui.container.find( \":focusable\" ).first();\n\n        this._ui.container.addClass( \"ui-popup-active\" );\n        this._isOpen = true;\n        this._resizeScreen();\n\n        // Check to see if currElement is not a child of the container.  If it's not, blur\n        if ( !$.contains( this._ui.container[ 0 ], this.document[ 0 ].activeElement ) ) {\n            this._safelyBlur( this.document[ 0 ].activeElement );\n        }\n        if ( firstFocus.length > 0 ) {\n            this._ui.focusElement = firstFocus;\n        }\n        this._ignoreResizeEvents();\n        if ( id ) {\n            this.document.find( \"[aria-haspopup='true'][aria-owns='\" +  id + \"']\" ).attr( \"aria-expanded\", true );\n        }\n        this._trigger( \"afteropen\" );\n    },\n\n    _open: function( options ) {\n        var openOptions = $.extend( {}, this.options, options ),\n            // TODO move blacklist to private method\n            androidBlacklist = ( function() {\n                var ua = navigator.userAgent,\n                    // Rendering engine is Webkit, and capture major version\n                    wkmatch = ua.match( /AppleWebKit\\/([0-9\\.]+)/ ),\n                    wkversion = !!wkmatch && wkmatch[ 1 ],\n                    androidmatch = ua.match( /Android (\\d+(?:\\.\\d+))/ ),\n                    andversion = !!androidmatch && androidmatch[ 1 ],\n                    chromematch = ua.indexOf( \"Chrome\" ) > -1;\n\n                // Platform is Android, WebKit version is greater than 534.13 ( Android 3.2.1 ) and not Chrome.\n                if ( androidmatch !== null && andversion === \"4.0\" && wkversion && wkversion > 534.13 && !chromematch ) {\n                    return true;\n                }\n                return false;\n            }());\n\n        // Count down to triggering \"popupafteropen\" - we have two prerequisites:\n        // 1. The popup window animation completes (container())\n        // 2. The screen opacity animation completes (screen())\n        this._createPrerequisites(\n            $.noop,\n            $.noop,\n            $.proxy( this, \"_openPrerequisitesComplete\" ) );\n\n        this._currentTransition = openOptions.transition;\n        this._applyTransition( openOptions.transition );\n\n        this._ui.screen.removeClass( \"ui-screen-hidden\" );\n        this._ui.container.removeClass( \"ui-popup-truncate\" );\n\n        // Give applications a chance to modify the contents of the container before it appears\n        this._reposition( openOptions );\n\n        this._ui.container.removeClass( \"ui-popup-hidden\" );\n\n        if ( this.options.overlayTheme && androidBlacklist ) {\n            /* TODO: The native browser on Android 4.0.X (\"Ice Cream Sandwich\") suffers from an issue where the popup overlay appears to be z-indexed above the popup itself when certain other styles exist on the same page -- namely, any element set to `position: fixed` and certain types of input. These issues are reminiscent of previously uncovered bugs in older versions of Android's native browser: https://github.com/scottjehl/Device-Bugs/issues/3\n            This fix closes the following bugs ( I use \"closes\" with reluctance, and stress that this issue should be revisited as soon as possible ):\n            https://github.com/jquery/jquery-mobile/issues/4816\n            https://github.com/jquery/jquery-mobile/issues/4844\n            https://github.com/jquery/jquery-mobile/issues/4874\n            */\n\n            // TODO sort out why this._page isn't working\n            this.element.closest( \".ui-page\" ).addClass( \"ui-popup-open\" );\n        }\n        this._animate({\n            additionalCondition: true,\n            transition: openOptions.transition,\n            classToRemove: \"\",\n            screenClassToAdd: \"in\",\n            containerClassToAdd: \"in\",\n            applyTransition: false,\n            prerequisites: this._prerequisites\n        });\n    },\n\n    _closePrerequisiteScreen: function() {\n        this._ui.screen\n            .removeClass( \"out\" )\n            .addClass( \"ui-screen-hidden\" );\n    },\n\n    _closePrerequisiteContainer: function() {\n        this._ui.container\n            .removeClass( \"reverse out\" )\n            .addClass( \"ui-popup-hidden ui-popup-truncate\" )\n            .removeAttr( \"style\" );\n    },\n\n    _closePrerequisitesDone: function() {\n        var container = this._ui.container,\n            id = this.element.attr( \"id\" );\n\n        // remove the global mutex for popups\n        $.mobile.popup.active = undefined;\n\n        // Blur elements inside the container, including the container\n        $( \":focus\", container[ 0 ] ).add( container[ 0 ] ).blur();\n\n        if ( id ) {\n            this.document.find( \"[aria-haspopup='true'][aria-owns='\" +  id + \"']\" ).attr( \"aria-expanded\", false );\n        }\n\n        // alert users that the popup is closed\n        this._trigger( \"afterclose\" );\n    },\n\n    _close: function( immediate ) {\n        this._ui.container.removeClass( \"ui-popup-active\" );\n        this._page.removeClass( \"ui-popup-open\" );\n\n        this._isOpen = false;\n\n        // Count down to triggering \"popupafterclose\" - we have two prerequisites:\n        // 1. The popup window reverse animation completes (container())\n        // 2. The screen opacity animation completes (screen())\n        this._createPrerequisites(\n            $.proxy( this, \"_closePrerequisiteScreen\" ),\n            $.proxy( this, \"_closePrerequisiteContainer\" ),\n            $.proxy( this, \"_closePrerequisitesDone\" ) );\n\n        this._animate( {\n            additionalCondition: this._ui.screen.hasClass( \"in\" ),\n            transition: ( immediate ? \"none\" : ( this._currentTransition ) ),\n            classToRemove: \"in\",\n            screenClassToAdd: \"out\",\n            containerClassToAdd: \"reverse out\",\n            applyTransition: true,\n            prerequisites: this._prerequisites\n        });\n    },\n\n    _unenhance: function() {\n        if ( this.options.enhanced ) {\n            return;\n        }\n\n        // Put the element back to where the placeholder was and remove the \"ui-popup\" class\n        this._setOptions( { theme: $.mobile.popup.prototype.options.theme } );\n        this.element\n            // Cannot directly insertAfter() - we need to detach() first, because\n            // insertAfter() will do nothing if the payload div was not attached\n            // to the DOM at the time the widget was created, and so the payload\n            // will remain inside the container even after we call insertAfter().\n            // If that happens and we remove the container a few lines below, we\n            // will cause an infinite recursion - #5244\n            .detach()\n            .insertAfter( this._ui.placeholder )\n            .removeClass( \"ui-popup ui-overlay-shadow ui-corner-all ui-body-inherit\" );\n        this._ui.screen.remove();\n        this._ui.container.remove();\n        this._ui.placeholder.remove();\n    },\n\n    _destroy: function() {\n        if ( $.mobile.popup.active === this ) {\n            this.element.one( \"popupafterclose\", $.proxy( this, \"_unenhance\" ) );\n            this.close();\n        } else {\n            this._unenhance();\n        }\n\n        return this;\n    },\n\n    _closePopup: function( theEvent, data ) {\n        var parsedDst, toUrl,\n            currentOptions = this.options,\n            immediate = false;\n\n        if ( ( theEvent && theEvent.isDefaultPrevented() ) || $.mobile.popup.active !== this ) {\n            return;\n        }\n\n        // restore location on screen\n        window.scrollTo( 0, this._scrollTop );\n\n        if ( theEvent && theEvent.type === \"pagebeforechange\" && data ) {\n            // Determine whether we need to rapid-close the popup, or whether we can\n            // take the time to run the closing transition\n            if ( typeof data.toPage === \"string\" ) {\n                parsedDst = data.toPage;\n            } else {\n                parsedDst = data.toPage.jqmData( \"url\" );\n            }\n            parsedDst = $.mobile.path.parseUrl( parsedDst );\n            toUrl = parsedDst.pathname + parsedDst.search + parsedDst.hash;\n\n            if ( this._myUrl !== $.mobile.path.makeUrlAbsolute( toUrl ) ) {\n                // Going to a different page - close immediately\n                immediate = true;\n            } else {\n                theEvent.preventDefault();\n            }\n        }\n\n        // remove nav bindings\n        this.window.off( currentOptions.closeEvents );\n        // unbind click handlers added when history is disabled\n        this.element.undelegate( currentOptions.closeLinkSelector, currentOptions.closeLinkEvents );\n\n        this._close( immediate );\n    },\n\n    // any navigation event after a popup is opened should close the popup\n    // NOTE the pagebeforechange is bound to catch navigation events that don't\n    //      alter the url (eg, dialogs from popups)\n    _bindContainerClose: function() {\n        this.window\n            .on( this.options.closeEvents, $.proxy( this, \"_closePopup\" ) );\n    },\n\n    widget: function() {\n        return this._ui.container;\n    },\n\n    // TODO no clear deliniation of what should be here and\n    // what should be in _open. Seems to be \"visual\" vs \"history\" for now\n    open: function( options ) {\n        var url, hashkey, activePage, currentIsDialog, hasHash, urlHistory,\n            self = this,\n            currentOptions = this.options;\n\n        // make sure open is idempotent\n        if ( $.mobile.popup.active || currentOptions.disabled ) {\n            return this;\n        }\n\n        // set the global popup mutex\n        $.mobile.popup.active = this;\n        this._scrollTop = this.window.scrollTop();\n\n        // if history alteration is disabled close on navigate events\n        // and leave the url as is\n        if ( !( currentOptions.history ) ) {\n            self._open( options );\n            self._bindContainerClose();\n\n            // When histoy is disabled we have to grab the data-rel\n            // back link clicks so we can close the popup instead of\n            // relying on history to do it for us\n            self.element\n                .delegate( currentOptions.closeLinkSelector, currentOptions.closeLinkEvents, function( theEvent ) {\n                    self.close();\n                    theEvent.preventDefault();\n                });\n\n            return this;\n        }\n\n        // cache some values for min/readability\n        urlHistory = $.mobile.navigate.history;\n        hashkey = $.mobile.dialogHashKey;\n        activePage = $.mobile.activePage;\n        currentIsDialog = ( activePage ? activePage.hasClass( \"ui-dialog\" ) : false );\n        this._myUrl = url = urlHistory.getActive().url;\n        hasHash = ( url.indexOf( hashkey ) > -1 ) && !currentIsDialog && ( urlHistory.activeIndex > 0 );\n\n        if ( hasHash ) {\n            self._open( options );\n            self._bindContainerClose();\n            return this;\n        }\n\n        // if the current url has no dialog hash key proceed as normal\n        // otherwise, if the page is a dialog simply tack on the hash key\n        if ( url.indexOf( hashkey ) === -1 && !currentIsDialog ) {\n            url = url + (url.indexOf( \"#\" ) > -1 ? hashkey : \"#\" + hashkey);\n        } else {\n            url = $.mobile.path.parseLocation().hash + hashkey;\n        }\n\n        // swallow the the initial navigation event, and bind for the next\n        this.window.one( \"beforenavigate\", function( theEvent ) {\n            theEvent.preventDefault();\n            self._open( options );\n            self._bindContainerClose();\n        });\n\n        this.urlAltered = true;\n        $.mobile.navigate( url, { role: \"dialog\" } );\n\n        return this;\n    },\n\n    close: function() {\n        // make sure close is idempotent\n        if ( $.mobile.popup.active !== this ) {\n            return this;\n        }\n\n        this._scrollTop = this.window.scrollTop();\n\n        if ( this.options.history && this.urlAltered ) {\n            $.mobile.back();\n            this.urlAltered = false;\n        } else {\n            // simulate the nav bindings having fired\n            this._closePopup();\n        }\n\n        return this;\n    }\n});\n\n// TODO this can be moved inside the widget\n$.mobile.popup.handleLink = function( $link ) {\n    var offset,\n        path = $.mobile.path,\n\n        // NOTE make sure to get only the hash from the href because ie7 (wp7)\n        //      returns the absolute href in this case ruining the element selection\n        popup = $( path.hashToSelector( path.parseUrl( $link.attr( \"href\" ) ).hash ) ).first();\n\n    if ( popup.length > 0 && popup.data( \"mobile-popup\" ) ) {\n        offset = $link.offset();\n        popup.popup( \"open\", {\n            x: offset.left + $link.outerWidth() / 2,\n            y: offset.top + $link.outerHeight() / 2,\n            transition: $link.jqmData( \"transition\" ),\n            positionTo: $link.jqmData( \"position-to\" )\n        });\n    }\n\n    //remove after delay\n    setTimeout( function() {\n        $link.removeClass( $.mobile.activeBtnClass );\n    }, 300 );\n};\n\n// TODO move inside _create\n$.mobile.document.on( \"pagebeforechange\", function( theEvent, data ) {\n    if ( data.options.role === \"popup\" ) {\n        $.mobile.popup.handleLink( data.options.link );\n        theEvent.preventDefault();\n    }\n});\n\n})( jQuery );\n\n/*\n* custom \"selectmenu\" plugin\n*/\n\n(function( $, undefined ) {\n\nvar unfocusableItemSelector = \".ui-disabled,.ui-state-disabled,.ui-li-divider,.ui-screen-hidden,:jqmData(role='placeholder')\",\n    goToAdjacentItem = function( item, target, direction ) {\n        var adjacent = item[ direction + \"All\" ]()\n            .not( unfocusableItemSelector )\n            .first();\n\n        // if there's a previous option, focus it\n        if ( adjacent.length ) {\n            target\n                .blur()\n                .attr( \"tabindex\", \"-1\" );\n\n            adjacent.find( \"a\" ).first().focus();\n        }\n    };\n\n$.widget( \"mobile.selectmenu\", $.mobile.selectmenu, {\n    _create: function() {\n        var o = this.options;\n\n        // Custom selects cannot exist inside popups, so revert the \"nativeMenu\"\n        // option to true if a parent is a popup\n        o.nativeMenu = o.nativeMenu || ( this.element.parents( \":jqmData(role='popup'),:mobile-popup\" ).length > 0 );\n\n        return this._super();\n    },\n\n    _handleSelectFocus: function() {\n        this.element.blur();\n        this.button.focus();\n    },\n\n    _handleKeydown: function( event ) {\n        this._super( event );\n        this._handleButtonVclickKeydown( event );\n    },\n\n    _handleButtonVclickKeydown: function( event ) {\n        if ( this.options.disabled || this.isOpen || this.options.nativeMenu ) {\n            return;\n        }\n\n        if (event.type === \"vclick\" ||\n                event.keyCode && (event.keyCode === $.mobile.keyCode.ENTER || event.keyCode === $.mobile.keyCode.SPACE)) {\n\n            this._decideFormat();\n            if ( this.menuType === \"overlay\" ) {\n                this.button.attr( \"href\", \"#\" + this.popupId ).attr( \"data-\" + ( $.mobile.ns || \"\" ) + \"rel\", \"popup\" );\n            } else {\n                this.button.attr( \"href\", \"#\" + this.dialogId ).attr( \"data-\" + ( $.mobile.ns || \"\" ) + \"rel\", \"dialog\" );\n            }\n            this.isOpen = true;\n            // Do not prevent default, so the navigation may have a chance to actually open the chosen format\n        }\n    },\n\n    _handleListFocus: function( e ) {\n        var params = ( e.type === \"focusin\" ) ?\n            { tabindex: \"0\", event: \"vmouseover\" }:\n            { tabindex: \"-1\", event: \"vmouseout\" };\n\n        $( e.target )\n            .attr( \"tabindex\", params.tabindex )\n            .trigger( params.event );\n    },\n\n    _handleListKeydown: function( event ) {\n        var target = $( event.target ),\n            li = target.closest( \"li\" );\n\n        // switch logic based on which key was pressed\n        switch ( event.keyCode ) {\n            // up or left arrow keys\n        case 38:\n            goToAdjacentItem( li, target, \"prev\" );\n            return false;\n            // down or right arrow keys\n        case 40:\n            goToAdjacentItem( li, target, \"next\" );\n            return false;\n            // If enter or space is pressed, trigger click\n        case 13:\n        case 32:\n            target.trigger( \"click\" );\n            return false;\n        }\n    },\n\n    _handleMenuPageHide: function() {\n\n        // After the dialog's done, we may want to trigger change if the value has actually changed\n        this._delayedTrigger();\n\n        // TODO centralize page removal binding / handling in the page plugin.\n        // Suggestion from @jblas to do refcounting\n        //\n        // TODO extremely confusing dependency on the open method where the pagehide.remove\n        // bindings are stripped to prevent the parent page from disappearing. The way\n        // we're keeping pages in the DOM right now sucks\n        //\n        // rebind the page remove that was unbound in the open function\n        // to allow for the parent page removal from actions other than the use\n        // of a dialog sized custom select\n        //\n        // doing this here provides for the back button on the custom select dialog\n        this.thisPage.page( \"bindRemove\" );\n    },\n\n    _handleHeaderCloseClick: function() {\n        if ( this.menuType === \"overlay\" ) {\n            this.close();\n            return false;\n        }\n    },\n\n    _handleListItemClick: function( event ) {\n        var listItem = $( event.target ).closest( \"li\" ),\n\n            // Index of option tag to be selected\n            oldIndex = this.select[ 0 ].selectedIndex,\n            newIndex = $.mobile.getAttribute( listItem, \"option-index\" ),\n            option = this._selectOptions().eq( newIndex )[ 0 ];\n\n        // Toggle selected status on the tag for multi selects\n        option.selected = this.isMultiple ? !option.selected : true;\n\n        // Toggle checkbox class for multiple selects\n        if ( this.isMultiple ) {\n            listItem.find( \"a\" )\n                .toggleClass( \"ui-checkbox-on\", option.selected )\n                .toggleClass( \"ui-checkbox-off\", !option.selected );\n        }\n\n        // If it's not a multiple select, trigger change after it has finished closing\n        if ( !this.isMultiple && oldIndex !== newIndex ) {\n            this._triggerChange = true;\n        }\n\n        // Trigger change if it's a multiple select\n        // Hide custom select for single selects only - otherwise focus clicked item\n        // We need to grab the clicked item the hard way, because the list may have been rebuilt\n        if ( this.isMultiple ) {\n            this.select.trigger( \"change\" );\n            this.list.find( \"li:not(.ui-li-divider)\" ).eq( newIndex )\n                .find( \"a\" ).first().focus();\n        }\n        else {\n            this.close();\n        }\n\n        event.preventDefault();\n    },\n\n    build: function() {\n        var selectId, popupId, dialogId, label, thisPage, isMultiple, menuId,\n            themeAttr, overlayTheme, overlayThemeAttr, dividerThemeAttr,\n            menuPage, listbox, list, header, headerTitle, menuPageContent,\n            menuPageClose, headerClose,\n            o = this.options;\n\n        if ( o.nativeMenu ) {\n            return this._super();\n        }\n\n        selectId = this.selectId;\n        popupId = selectId + \"-listbox\";\n        dialogId = selectId + \"-dialog\";\n        label = this.label;\n        thisPage = this.element.closest( \".ui-page\" );\n        isMultiple = this.element[ 0 ].multiple;\n        menuId = selectId + \"-menu\";\n        themeAttr = o.theme ? ( \" data-\" + $.mobile.ns + \"theme='\" + o.theme + \"'\" ) : \"\";\n        overlayTheme = o.overlayTheme || o.theme || null;\n        overlayThemeAttr = overlayTheme ? ( \" data-\" + $.mobile.ns +\n            \"overlay-theme='\" + overlayTheme + \"'\" ) : \"\";\n        dividerThemeAttr = ( o.dividerTheme && isMultiple ) ? ( \" data-\" + $.mobile.ns + \"divider-theme='\" + o.dividerTheme + \"'\" ) : \"\";\n        menuPage = $( \"<div data-\" + $.mobile.ns + \"role='dialog' class='ui-selectmenu' id='\" + dialogId + \"'\" + themeAttr + overlayThemeAttr + \">\" +\n            \"<div data-\" + $.mobile.ns + \"role='header'>\" +\n            \"<div class='ui-title'></div>\"+\n            \"</div>\"+\n            \"<div data-\" + $.mobile.ns + \"role='content'></div>\"+\n            \"</div>\" );\n        listbox = $( \"<div\" + themeAttr + overlayThemeAttr + \" id='\" + popupId +\n                \"' class='ui-selectmenu'></div>\" )\n            .insertAfter( this.select )\n            .popup();\n        list = $( \"<ul class='ui-selectmenu-list' id='\" + menuId + \"' role='listbox' aria-labelledby='\" + this.buttonId + \"'\" + themeAttr + dividerThemeAttr + \"></ul>\" ).appendTo( listbox );\n        header = $( \"<div class='ui-header ui-bar-\" + ( o.theme ? o.theme : \"inherit\" ) + \"'></div>\" ).prependTo( listbox );\n        headerTitle = $( \"<h1 class='ui-title'></h1>\" ).appendTo( header );\n\n        if ( this.isMultiple ) {\n            headerClose = $( \"<a>\", {\n                \"role\": \"button\",\n                \"text\": o.closeText,\n                \"href\": \"#\",\n                \"class\": \"ui-btn ui-corner-all ui-btn-left ui-btn-icon-notext ui-icon-delete\"\n            }).appendTo( header );\n        }\n\n        $.extend( this, {\n            selectId: selectId,\n            menuId: menuId,\n            popupId: popupId,\n            dialogId: dialogId,\n            thisPage: thisPage,\n            menuPage: menuPage,\n            label: label,\n            isMultiple: isMultiple,\n            theme: o.theme,\n            listbox: listbox,\n            list: list,\n            header: header,\n            headerTitle: headerTitle,\n            headerClose: headerClose,\n            menuPageContent: menuPageContent,\n            menuPageClose: menuPageClose,\n            placeholder: \"\"\n        });\n\n        // Create list from select, update state\n        this.refresh();\n\n        if ( this._origTabIndex === undefined ) {\n            // Map undefined to false, because this._origTabIndex === undefined\n            // indicates that we have not yet checked whether the select has\n            // originally had a tabindex attribute, whereas false indicates that\n            // we have checked the select for such an attribute, and have found\n            // none present.\n            this._origTabIndex = ( this.select[ 0 ].getAttribute( \"tabindex\" ) === null ) ? false : this.select.attr( \"tabindex\" );\n        }\n        this.select.attr( \"tabindex\", \"-1\" );\n        this._on( this.select, { focus : \"_handleSelectFocus\" } );\n\n        // Button events\n        this._on( this.button, {\n            vclick: \"_handleButtonVclickKeydown\"\n        });\n\n        // Events for list items\n        this.list.attr( \"role\", \"listbox\" );\n        this._on( this.list, {\n            \"focusin\": \"_handleListFocus\",\n            \"focusout\": \"_handleListFocus\",\n            \"keydown\": \"_handleListKeydown\",\n            \"click li:not(.ui-disabled,.ui-state-disabled,.ui-li-divider)\": \"_handleListItemClick\"\n        });\n\n        // button refocus ensures proper height calculation\n        // by removing the inline style and ensuring page inclusion\n        this._on( this.menuPage, { pagehide: \"_handleMenuPageHide\" } );\n\n        // Events on the popup\n        this._on( this.listbox, { popupafterclose: \"_popupClosed\" } );\n\n        // Close button on small overlays\n        if ( this.isMultiple ) {\n            this._on( this.headerClose, { click: \"_handleHeaderCloseClick\" } );\n        }\n\n        return this;\n    },\n\n    _popupClosed: function() {\n        this.close();\n        this._delayedTrigger();\n    },\n\n    _delayedTrigger: function() {\n        if ( this._triggerChange ) {\n            this.element.trigger( \"change\" );\n        }\n        this._triggerChange = false;\n    },\n\n    _isRebuildRequired: function() {\n        var list = this.list.find( \"li\" ),\n            options = this._selectOptions().not( \".ui-screen-hidden\" );\n\n        // TODO exceedingly naive method to determine difference\n        // ignores value changes etc in favor of a forcedRebuild\n        // from the user in the refresh method\n        return options.text() !== list.text();\n    },\n\n    selected: function() {\n        return this._selectOptions().filter( \":selected:not( :jqmData(placeholder='true') )\" );\n    },\n\n    refresh: function( force ) {\n        var self, indices;\n\n        if ( this.options.nativeMenu ) {\n            return this._super( force );\n        }\n\n        self = this;\n        if ( force || this._isRebuildRequired() ) {\n            self._buildList();\n        }\n\n        indices = this.selectedIndices();\n\n        self.setButtonText();\n        self.setButtonCount();\n\n        self.list.find( \"li:not(.ui-li-divider)\" )\n            .find( \"a\" ).removeClass( $.mobile.activeBtnClass ).end()\n            .attr( \"aria-selected\", false )\n            .each(function( i ) {\n                var item = $( this );\n                if ( $.inArray( i, indices ) > -1 ) {\n\n                    // Aria selected attr\n                    item.attr( \"aria-selected\", true );\n\n                    // Multiple selects: add the \"on\" checkbox state to the icon\n                    if ( self.isMultiple ) {\n                        item.find( \"a\" ).removeClass( \"ui-checkbox-off\" ).addClass( \"ui-checkbox-on\" );\n                    } else {\n                        if ( item.hasClass( \"ui-screen-hidden\" ) ) {\n                            item.next().find( \"a\" ).addClass( $.mobile.activeBtnClass );\n                        } else {\n                            item.find( \"a\" ).addClass( $.mobile.activeBtnClass );\n                        }\n                    }\n                } else if ( self.isMultiple ) {\n                    item.find( \"a\" ).removeClass( \"ui-checkbox-on\" ).addClass( \"ui-checkbox-off\" );\n                }\n            });\n    },\n\n    close: function() {\n        if ( this.options.disabled || !this.isOpen ) {\n            return;\n        }\n\n        var self = this;\n\n        if ( self.menuType === \"page\" ) {\n            self.menuPage.dialog( \"close\" );\n            self.list.appendTo( self.listbox );\n        } else {\n            self.listbox.popup( \"close\" );\n        }\n\n        self._focusButton();\n        // allow the dialog to be closed again\n        self.isOpen = false;\n    },\n\n    open: function() {\n        this.button.click();\n    },\n\n    _focusMenuItem: function() {\n        var selector = this.list.find( \"a.\" + $.mobile.activeBtnClass );\n        if ( selector.length === 0 ) {\n            selector = this.list.find( \"li:not(\" + unfocusableItemSelector + \") a.ui-btn\" );\n        }\n        selector.first().focus();\n    },\n\n    _decideFormat: function() {\n        var self = this,\n            $window = this.window,\n            selfListParent = self.list.parent(),\n            menuHeight = selfListParent.outerHeight(),\n            scrollTop = $window.scrollTop(),\n            btnOffset = self.button.offset().top,\n            screenHeight = $window.height();\n\n        if ( menuHeight > screenHeight - 80 || !$.support.scrollTop ) {\n\n            self.menuPage.appendTo( $.mobile.pageContainer ).page();\n            self.menuPageContent = self.menuPage.find( \".ui-content\" );\n            self.menuPageClose = self.menuPage.find( \".ui-header a\" );\n\n            // prevent the parent page from being removed from the DOM,\n            // otherwise the results of selecting a list item in the dialog\n            // fall into a black hole\n            self.thisPage.unbind( \"pagehide.remove\" );\n\n            //for WebOS/Opera Mini (set lastscroll using button offset)\n            if ( scrollTop === 0 && btnOffset > screenHeight ) {\n                self.thisPage.one( \"pagehide\", function() {\n                    $( this ).jqmData( \"lastScroll\", btnOffset );\n                });\n            }\n\n            self.menuPage.one( {\n                pageshow: $.proxy( this, \"_focusMenuItem\" ),\n                pagehide: $.proxy( this, \"close\" )\n            });\n\n            self.menuType = \"page\";\n            self.menuPageContent.append( self.list );\n            self.menuPage\n                .find( \"div .ui-title\" )\n                    .text( self.label.getEncodedText() || self.placeholder );\n        } else {\n            self.menuType = \"overlay\";\n\n            self.listbox.one( { popupafteropen: $.proxy( this, \"_focusMenuItem\" ) } );\n        }\n    },\n\n    _buildList: function() {\n        var self = this,\n            o = this.options,\n            placeholder = this.placeholder,\n            needPlaceholder = true,\n            dataIcon = \"false\",\n            $options, numOptions, select,\n            dataPrefix = \"data-\" + $.mobile.ns,\n            dataIndexAttr = dataPrefix + \"option-index\",\n            dataIconAttr = dataPrefix + \"icon\",\n            dataRoleAttr = dataPrefix + \"role\",\n            dataPlaceholderAttr = dataPrefix + \"placeholder\",\n            fragment = document.createDocumentFragment(),\n            isPlaceholderItem = false,\n            optGroup,\n            i,\n            option, $option, parent, text, anchor, classes,\n            optLabel, divider, item;\n\n        self.list.empty().filter( \".ui-listview\" ).listview( \"destroy\" );\n        $options = this._selectOptions();\n        numOptions = $options.length;\n        select = this.select[ 0 ];\n\n        for ( i = 0; i < numOptions;i++, isPlaceholderItem = false) {\n            option = $options[i];\n            $option = $( option );\n\n            // Do not create options based on ui-screen-hidden select options\n            if ( $option.hasClass( \"ui-screen-hidden\" ) ) {\n                continue;\n            }\n\n            parent = option.parentNode;\n            classes = [];\n\n            // Although using .text() here raises the risk that, when we later paste this into the\n            // list item we end up pasting possibly malicious things like <script> tags, that risk\n            // only arises if we do something like $( \"<li><a href='#'>\" + text + \"</a></li>\" ). We\n            // don't do that. We do document.createTextNode( text ) instead, which guarantees that\n            // whatever we paste in will end up as text, with characters like <, > and & escaped.\n            text = $option.text();\n            anchor = document.createElement( \"a\" );\n            anchor.setAttribute( \"href\", \"#\" );\n            anchor.appendChild( document.createTextNode( text ) );\n\n            // Are we inside an optgroup?\n            if ( parent !== select && parent.nodeName.toLowerCase() === \"optgroup\" ) {\n                optLabel = parent.getAttribute( \"label\" );\n                if ( optLabel !== optGroup ) {\n                    divider = document.createElement( \"li\" );\n                    divider.setAttribute( dataRoleAttr, \"list-divider\" );\n                    divider.setAttribute( \"role\", \"option\" );\n                    divider.setAttribute( \"tabindex\", \"-1\" );\n                    divider.appendChild( document.createTextNode( optLabel ) );\n                    fragment.appendChild( divider );\n                    optGroup = optLabel;\n                }\n            }\n\n            if ( needPlaceholder && ( !option.getAttribute( \"value\" ) || text.length === 0 || $option.jqmData( \"placeholder\" ) ) ) {\n                needPlaceholder = false;\n                isPlaceholderItem = true;\n\n                // If we have identified a placeholder, record the fact that it was\n                // us who have added the placeholder to the option and mark it\n                // retroactively in the select as well\n                if ( null === option.getAttribute( dataPlaceholderAttr ) ) {\n                    this._removePlaceholderAttr = true;\n                }\n                option.setAttribute( dataPlaceholderAttr, true );\n                if ( o.hidePlaceholderMenuItems ) {\n                    classes.push( \"ui-screen-hidden\" );\n                }\n                if ( placeholder !== text ) {\n                    placeholder = self.placeholder = text;\n                }\n            }\n\n            item = document.createElement( \"li\" );\n            if ( option.disabled ) {\n                classes.push( \"ui-state-disabled\" );\n                item.setAttribute( \"aria-disabled\", true );\n            }\n            item.setAttribute( dataIndexAttr, i );\n            item.setAttribute( dataIconAttr, dataIcon );\n            if ( isPlaceholderItem ) {\n                item.setAttribute( dataPlaceholderAttr, true );\n            }\n            item.className = classes.join( \" \" );\n            item.setAttribute( \"role\", \"option\" );\n            anchor.setAttribute( \"tabindex\", \"-1\" );\n            if ( this.isMultiple ) {\n                $( anchor ).addClass( \"ui-btn ui-checkbox-off ui-btn-icon-right\" );\n            }\n\n            item.appendChild( anchor );\n            fragment.appendChild( item );\n        }\n\n        self.list[0].appendChild( fragment );\n\n        // Hide header if it's not a multiselect and there's no placeholder\n        if ( !this.isMultiple && !placeholder.length ) {\n            this.header.addClass( \"ui-screen-hidden\" );\n        } else {\n            this.headerTitle.text( this.placeholder );\n        }\n\n        // Now populated, create listview\n        self.list.listview();\n    },\n\n    _button: function() {\n        return this.options.nativeMenu ?\n            this._super() :\n            $( \"<a>\", {\n                \"href\": \"#\",\n                \"role\": \"button\",\n                // TODO value is undefined at creation\n                \"id\": this.buttonId,\n                \"aria-haspopup\": \"true\",\n\n                // TODO value is undefined at creation\n                \"aria-owns\": this.menuId\n            });\n    },\n\n    _destroy: function() {\n\n        if ( !this.options.nativeMenu ) {\n            this.close();\n\n            // Restore the tabindex attribute to its original value\n            if ( this._origTabIndex !== undefined ) {\n                if ( this._origTabIndex !== false ) {\n                    this.select.attr( \"tabindex\", this._origTabIndex );\n                } else {\n                    this.select.removeAttr( \"tabindex\" );\n                }\n            }\n\n            // Remove the placeholder attribute if we were the ones to add it\n            if ( this._removePlaceholderAttr ) {\n                this._selectOptions().removeAttr( \"data-\" + $.mobile.ns + \"placeholder\" );\n            }\n\n            // Remove the popup\n            this.listbox.remove();\n\n            // Remove the dialog\n            this.menuPage.remove();\n        }\n\n        // Chain up\n        this._super();\n    }\n});\n\n})( jQuery );\n\n\n// buttonMarkup is deprecated as of 1.4.0 and will be removed in 1.5.0.\n\n(function( $, undefined ) {\n\n// General policy: Do not access data-* attributes except during enhancement.\n// In all other cases we determine the state of the button exclusively from its\n// className. That's why optionsToClasses expects a full complement of options,\n// and the jQuery plugin completes the set of options from the default values.\n\n// Map classes to buttonMarkup boolean options - used in classNameToOptions()\nvar reverseBoolOptionMap = {\n        \"ui-shadow\" : \"shadow\",\n        \"ui-corner-all\" : \"corners\",\n        \"ui-btn-inline\" : \"inline\",\n        \"ui-shadow-icon\" : \"iconshadow\", /* TODO: Remove in 1.5 */\n        \"ui-mini\" : \"mini\"\n    },\n    getAttrFixed = function() {\n        var ret = $.mobile.getAttribute.apply( this, arguments );\n\n        return ( ret == null ? undefined : ret );\n    },\n    capitalLettersRE = /[A-Z]/g;\n\n// optionsToClasses:\n// @options: A complete set of options to convert to class names.\n// @existingClasses: extra classes to add to the result\n//\n// Converts @options to buttonMarkup classes and returns the result as an array\n// that can be converted to an element's className with .join( \" \" ). All\n// possible options must be set inside @options. Use $.fn.buttonMarkup.defaults\n// to get a complete set and use $.extend to override your choice of options\n// from that set.\nfunction optionsToClasses( options, existingClasses ) {\n    var classes = existingClasses ? existingClasses : [];\n\n    // Add classes to the array - first ui-btn\n    classes.push( \"ui-btn\" );\n\n    // If there is a theme\n    if ( options.theme ) {\n        classes.push( \"ui-btn-\" + options.theme );\n    }\n\n    // If there's an icon, add the icon-related classes\n    if ( options.icon ) {\n        classes = classes.concat([\n            \"ui-icon-\" + options.icon,\n            \"ui-btn-icon-\" + options.iconpos\n        ]);\n        if ( options.iconshadow ) {\n            classes.push( \"ui-shadow-icon\" ); /* TODO: Remove in 1.5 */\n        }\n    }\n\n    // Add the appropriate class for each boolean option\n    if ( options.inline ) {\n        classes.push( \"ui-btn-inline\" );\n    }\n    if ( options.shadow ) {\n        classes.push( \"ui-shadow\" );\n    }\n    if ( options.corners ) {\n        classes.push( \"ui-corner-all\" );\n    }\n    if ( options.mini ) {\n        classes.push( \"ui-mini\" );\n    }\n\n    // Create a string from the array and return it\n    return classes;\n}\n\n// classNameToOptions:\n// @classes: A string containing a .className-style space-separated class list\n//\n// Loops over @classes and calculates an options object based on the\n// buttonMarkup-related classes it finds. It records unrecognized classes in an\n// array.\n//\n// Returns: An object containing the following items:\n//\n// \"options\": buttonMarkup options found to be present because of the\n// presence/absence of corresponding classes\n//\n// \"unknownClasses\": a string containing all the non-buttonMarkup-related\n// classes found in @classes\n//\n// \"alreadyEnhanced\": A boolean indicating whether the ui-btn class was among\n// those found to be present\nfunction classNameToOptions( classes ) {\n    var idx, map, unknownClass,\n        alreadyEnhanced = false,\n        noIcon = true,\n        o = {\n            icon: \"\",\n            inline: false,\n            shadow: false,\n            corners: false,\n            iconshadow: false,\n            mini: false\n        },\n        unknownClasses = [];\n\n    classes = classes.split( \" \" );\n\n    // Loop over the classes\n    for ( idx = 0 ; idx < classes.length ; idx++ ) {\n\n        // Assume it's an unrecognized class\n        unknownClass = true;\n\n        // Recognize boolean options from the presence of classes\n        map = reverseBoolOptionMap[ classes[ idx ] ];\n        if ( map !== undefined ) {\n            unknownClass = false;\n            o[ map ] = true;\n\n        // Recognize the presence of an icon and establish the icon position\n        } else if ( classes[ idx ].indexOf( \"ui-btn-icon-\" ) === 0 ) {\n            unknownClass = false;\n            noIcon = false;\n            o.iconpos = classes[ idx ].substring( 12 );\n\n        // Establish which icon is present\n        } else if ( classes[ idx ].indexOf( \"ui-icon-\" ) === 0 ) {\n            unknownClass = false;\n            o.icon = classes[ idx ].substring( 8 );\n\n        // Establish the theme - this recognizes one-letter theme swatch names\n        } else if ( classes[ idx ].indexOf( \"ui-btn-\" ) === 0 && classes[ idx ].length === 8 ) {\n            unknownClass = false;\n            o.theme = classes[ idx ].substring( 7 );\n\n        // Recognize that this element has already been buttonMarkup-enhanced\n        } else if ( classes[ idx ] === \"ui-btn\" ) {\n            unknownClass = false;\n            alreadyEnhanced = true;\n        }\n\n        // If this class has not been recognized, add it to the list\n        if ( unknownClass ) {\n            unknownClasses.push( classes[ idx ] );\n        }\n    }\n\n    // If a \"ui-btn-icon-*\" icon position class is absent there cannot be an icon\n    if ( noIcon ) {\n        o.icon = \"\";\n    }\n\n    return {\n        options: o,\n        unknownClasses: unknownClasses,\n        alreadyEnhanced: alreadyEnhanced\n    };\n}\n\nfunction camelCase2Hyphenated( c ) {\n    return \"-\" + c.toLowerCase();\n}\n\n// $.fn.buttonMarkup:\n// DOM: gets/sets .className\n//\n// @options: options to apply to the elements in the jQuery object\n// @overwriteClasses: boolean indicating whether to honour existing classes\n//\n// Calculates the classes to apply to the elements in the jQuery object based on\n// the options passed in. If @overwriteClasses is true, it sets the className\n// property of each element in the jQuery object to the buttonMarkup classes\n// it calculates based on the options passed in.\n//\n// If you wish to preserve any classes that are already present on the elements\n// inside the jQuery object, including buttonMarkup-related classes that were\n// added by a previous call to $.fn.buttonMarkup() or during page enhancement\n// then you should omit @overwriteClasses or set it to false.\n$.fn.buttonMarkup = function( options, overwriteClasses ) {\n    var idx, data, el, retrievedOptions, optionKey,\n        defaults = $.fn.buttonMarkup.defaults;\n\n    for ( idx = 0 ; idx < this.length ; idx++ ) {\n        el = this[ idx ];\n        data = overwriteClasses ?\n\n            // Assume this element is not enhanced and ignore its classes\n            { alreadyEnhanced: false, unknownClasses: [] } :\n\n            // Otherwise analyze existing classes to establish existing options and\n            // classes\n            classNameToOptions( el.className );\n\n        retrievedOptions = $.extend( {},\n\n            // If the element already has the class ui-btn, then we assume that\n            // it has passed through buttonMarkup before - otherwise, the options\n            // returned by classNameToOptions do not correctly reflect the state of\n            // the element\n            ( data.alreadyEnhanced ? data.options : {} ),\n\n            // Finally, apply the options passed in\n            options );\n\n        // If this is the first call on this element, retrieve remaining options\n        // from the data-attributes\n        if ( !data.alreadyEnhanced ) {\n            for ( optionKey in defaults ) {\n                if ( retrievedOptions[ optionKey ] === undefined ) {\n                    retrievedOptions[ optionKey ] = getAttrFixed( el,\n                        optionKey.replace( capitalLettersRE, camelCase2Hyphenated )\n                    );\n                }\n            }\n        }\n\n        el.className = optionsToClasses(\n\n            // Merge all the options and apply them as classes\n            $.extend( {},\n\n                // The defaults form the basis\n                defaults,\n\n                // Add the computed options\n                retrievedOptions\n            ),\n\n            // ... and re-apply any unrecognized classes that were found\n            data.unknownClasses ).join( \" \" );\n        if ( el.tagName.toLowerCase() !== \"button\" ) {\n            el.setAttribute( \"role\", \"button\" );\n        }\n    }\n\n    return this;\n};\n\n// buttonMarkup defaults. This must be a complete set, i.e., a value must be\n// given here for all recognized options\n$.fn.buttonMarkup.defaults = {\n    icon: \"\",\n    iconpos: \"left\",\n    theme: null,\n    inline: false,\n    shadow: true,\n    corners: true,\n    iconshadow: false, /* TODO: Remove in 1.5. Option deprecated in 1.4. */\n    mini: false\n};\n\n$.extend( $.fn.buttonMarkup, {\n    initSelector: \"a:jqmData(role='button'), .ui-bar > a, .ui-bar > :jqmData(role='controlgroup') > a, button:not(:jqmData(role='navbar') button)\"\n});\n\n})( jQuery );\n\n\n(function( $, undefined ) {\n\n$.widget( \"mobile.controlgroup\", $.extend( {\n    options: {\n        enhanced: false,\n        theme: null,\n        shadow: false,\n        corners: true,\n        excludeInvisible: true,\n        type: \"vertical\",\n        mini: false\n    },\n\n    _create: function() {\n        var elem = this.element,\n            opts = this.options,\n            keepNative = $.mobile.page.prototype.keepNativeSelector();\n\n        // Run buttonmarkup\n        if ( $.fn.buttonMarkup ) {\n            this.element\n                .find( $.fn.buttonMarkup.initSelector )\n                .not( keepNative )\n                .buttonMarkup();\n        }\n        // Enhance child widgets\n        $.each( this._childWidgets, $.proxy( function( number, widgetName ) {\n            if ( $.mobile[ widgetName ] ) {\n                this.element\n                    .find( $.mobile[ widgetName ].initSelector )\n                    .not( keepNative )[ widgetName ]();\n            }\n        }, this ));\n\n        $.extend( this, {\n            _ui: null,\n            _initialRefresh: true\n        });\n\n        if ( opts.enhanced ) {\n            this._ui = {\n                groupLegend: elem.children( \".ui-controlgroup-label\" ).children(),\n                childWrapper: elem.children( \".ui-controlgroup-controls\" )\n            };\n        } else {\n            this._ui = this._enhance();\n        }\n\n    },\n\n    _childWidgets: [ \"checkboxradio\", \"selectmenu\", \"button\" ],\n\n    _themeClassFromOption: function( value ) {\n        return ( value ? ( value === \"none\" ? \"\" : \"ui-group-theme-\" + value ) : \"\" );\n    },\n\n    _enhance: function() {\n        var elem = this.element,\n            opts = this.options,\n            ui = {\n                groupLegend: elem.children( \"legend\" ),\n                childWrapper: elem\n                    .addClass( \"ui-controlgroup \" +\n                        \"ui-controlgroup-\" +\n                            ( opts.type === \"horizontal\" ? \"horizontal\" : \"vertical\" ) + \" \" +\n                        this._themeClassFromOption( opts.theme ) + \" \" +\n                        ( opts.corners ? \"ui-corner-all \" : \"\" ) +\n                        ( opts.mini ? \"ui-mini \" : \"\" ) )\n                    .wrapInner( \"<div \" +\n                        \"class='ui-controlgroup-controls \" +\n                            ( opts.shadow === true ? \"ui-shadow\" : \"\" ) + \"'></div>\" )\n                    .children()\n            };\n\n        if ( ui.groupLegend.length > 0 ) {\n            $( \"<div role='heading' class='ui-controlgroup-label'></div>\" )\n                .append( ui.groupLegend )\n                .prependTo( elem );\n        }\n\n        return ui;\n    },\n\n    _init: function() {\n        this.refresh();\n    },\n\n    _setOptions: function( options ) {\n        var callRefresh, returnValue,\n            elem = this.element;\n\n        // Must have one of horizontal or vertical\n        if ( options.type !== undefined ) {\n            elem\n                .removeClass( \"ui-controlgroup-horizontal ui-controlgroup-vertical\" )\n                .addClass( \"ui-controlgroup-\" + ( options.type === \"horizontal\" ? \"horizontal\" : \"vertical\" ) );\n            callRefresh = true;\n        }\n\n        if ( options.theme !== undefined ) {\n            elem\n                .removeClass( this._themeClassFromOption( this.options.theme ) )\n                .addClass( this._themeClassFromOption( options.theme ) );\n        }\n\n        if ( options.corners !== undefined ) {\n            elem.toggleClass( \"ui-corner-all\", options.corners );\n        }\n\n        if ( options.mini !== undefined ) {\n            elem.toggleClass( \"ui-mini\", options.mini );\n        }\n\n        if ( options.shadow !== undefined ) {\n            this._ui.childWrapper.toggleClass( \"ui-shadow\", options.shadow );\n        }\n\n        if ( options.excludeInvisible !== undefined ) {\n            this.options.excludeInvisible = options.excludeInvisible;\n            callRefresh = true;\n        }\n\n        returnValue = this._super( options );\n\n        if ( callRefresh ) {\n            this.refresh();\n        }\n\n        return returnValue;\n    },\n\n    container: function() {\n        return this._ui.childWrapper;\n    },\n\n    refresh: function() {\n        var $el = this.container(),\n            els = $el.find( \".ui-btn\" ).not( \".ui-slider-handle\" ),\n            create = this._initialRefresh;\n        if ( $.mobile.checkboxradio ) {\n            $el.find( \":mobile-checkboxradio\" ).checkboxradio( \"refresh\" );\n        }\n        this._addFirstLastClasses( els,\n            this.options.excludeInvisible ? this._getVisibles( els, create ) : els,\n            create );\n        this._initialRefresh = false;\n    },\n\n    // Caveat: If the legend is not the first child of the controlgroup at enhance\n    // time, it will be after _destroy().\n    _destroy: function() {\n        var ui, buttons,\n            opts = this.options;\n\n        if ( opts.enhanced ) {\n            return this;\n        }\n\n        ui = this._ui;\n        buttons = this.element\n            .removeClass( \"ui-controlgroup \" +\n                \"ui-controlgroup-horizontal ui-controlgroup-vertical ui-corner-all ui-mini \" +\n                this._themeClassFromOption( opts.theme ) )\n            .find( \".ui-btn\" )\n            .not( \".ui-slider-handle\" );\n\n        this._removeFirstLastClasses( buttons );\n\n        ui.groupLegend.unwrap();\n        ui.childWrapper.children().unwrap();\n    }\n}, $.mobile.behaviors.addFirstLastClasses ) );\n\n})(jQuery);\n\n(function( $, undefined ) {\n\n    $.widget( \"mobile.toolbar\", {\n        initSelector: \":jqmData(role='footer'), :jqmData(role='header')\",\n\n        options: {\n            theme: null,\n            addBackBtn: false,\n            backBtnTheme: null,\n            backBtnText: \"Back\"\n        },\n\n        _create: function() {\n            var leftbtn, rightbtn,\n                role =  this.element.is( \":jqmData(role='header')\" ) ? \"header\" : \"footer\",\n                page = this.element.closest( \".ui-page\" );\n            if ( page.length === 0 ) {\n                page = false;\n                this._on( this.document, {\n                    \"pageshow\": \"refresh\"\n                });\n            }\n            $.extend( this, {\n                role: role,\n                page: page,\n                leftbtn: leftbtn,\n                rightbtn: rightbtn\n            });\n            this.element.attr( \"role\", role === \"header\" ? \"banner\" : \"contentinfo\" ).addClass( \"ui-\" + role );\n            this.refresh();\n            this._setOptions( this.options );\n        },\n        _setOptions: function( o ) {\n            if ( o.addBackBtn !== undefined ) {\n                this._updateBackButton();\n            }\n            if ( o.backBtnTheme != null ) {\n                this.element\n                    .find( \".ui-toolbar-back-btn\" )\n                    .addClass( \"ui-btn ui-btn-\" + o.backBtnTheme );\n            }\n            if ( o.backBtnText !== undefined ) {\n                this.element.find( \".ui-toolbar-back-btn .ui-btn-text\" ).text( o.backBtnText );\n            }\n            if ( o.theme !== undefined ) {\n                var currentTheme = this.options.theme ? this.options.theme : \"inherit\",\n                    newTheme = o.theme ? o.theme : \"inherit\";\n\n                this.element.removeClass( \"ui-bar-\" + currentTheme ).addClass( \"ui-bar-\" + newTheme );\n            }\n\n            this._super( o );\n        },\n        refresh: function() {\n            if ( this.role === \"header\" ) {\n                this._addHeaderButtonClasses();\n            }\n            if ( !this.page ) {\n                this._setRelative();\n                if ( this.role === \"footer\" ) {\n                    this.element.appendTo( \"body\" );\n                } else if ( this.role === \"header\" ) {\n                    this._updateBackButton();\n                }\n            }\n            this._addHeadingClasses();\n            this._btnMarkup();\n        },\n\n        //we only want this to run on non fixed toolbars so make it easy to override\n        _setRelative: function() {\n            $( \"[data-\"+ $.mobile.ns + \"role='page']\" ).css({ \"position\": \"relative\" });\n        },\n\n        // Deprecated in 1.4. As from 1.5 button classes have to be present in the markup.\n        _btnMarkup: function() {\n            this.element\n                .children( \"a\" )\n                .filter( \":not([data-\" + $.mobile.ns + \"role='none'])\" )\n                .attr( \"data-\" + $.mobile.ns + \"role\", \"button\" );\n            this.element.trigger( \"create\" );\n        },\n        // Deprecated in 1.4. As from 1.5 ui-btn-left/right classes have to be present in the markup.\n        _addHeaderButtonClasses: function() {\n            var headerAnchors = this.element.children( \"a, button\" );\n\n            // Do not mistake a back button for a left toolbar button\n            this.leftbtn = headerAnchors.hasClass( \"ui-btn-left\" ) &&\n                !headerAnchors.hasClass( \"ui-toolbar-back-btn\" );\n\n            this.rightbtn = headerAnchors.hasClass( \"ui-btn-right\" );\n\n            // Filter out right buttons and back buttons\n            this.leftbtn = this.leftbtn ||\n                headerAnchors.eq( 0 )\n                    .not( \".ui-btn-right,.ui-toolbar-back-btn\" )\n                    .addClass( \"ui-btn-left\" )\n                    .length;\n\n            this.rightbtn = this.rightbtn || headerAnchors.eq( 1 ).addClass( \"ui-btn-right\" ).length;\n        },\n        _updateBackButton: function() {\n            var backButton,\n                options = this.options,\n                theme = options.backBtnTheme || options.theme;\n\n            // Retrieve the back button or create a new, empty one\n            backButton = this._backButton = ( this._backButton || {} );\n\n            // We add a back button only if the option to do so is on\n            if ( this.options.addBackBtn &&\n\n                    // This must also be a header toolbar\n                    this.role === \"header\" &&\n\n                    // There must be multiple pages in the DOM\n                    $( \".ui-page\" ).length > 1 &&\n                    ( this.page ?\n\n                        // If the toolbar is internal the page's URL must differ from the hash\n                        ( this.page[ 0 ].getAttribute( \"data-\" + $.mobile.ns + \"url\" ) !==\n                            $.mobile.path.stripHash( location.hash ) ) :\n\n                        // Otherwise, if the toolbar is external there must be at least one\n                        // history item to which one can go back\n                        ( $.mobile.navigate && $.mobile.navigate.history &&\n                            $.mobile.navigate.history.activeIndex > 0 ) ) &&\n\n                    // The toolbar does not have a left button\n                    !this.leftbtn ) {\n\n                // Skip back button creation if one is already present\n                if ( !backButton.attached ) {\n                    this.backButton = backButton.element = ( backButton.element ||\n                        $( \"<a role='button' href='javascript:void(0);' \" +\n                            \"class='ui-btn ui-corner-all ui-shadow ui-btn-left \" +\n                                ( theme ? \"ui-btn-\" + theme + \" \" : \"\" ) +\n                                \"ui-toolbar-back-btn ui-icon-carat-l ui-btn-icon-left' \" +\n                            \"data-\" + $.mobile.ns + \"rel='back'>\" + options.backBtnText +\n                            \"</a>\" ) )\n                            .prependTo( this.element );\n                    backButton.attached = true;\n                }\n\n            // If we are not adding a back button, then remove the one present, if any\n            } else if ( backButton.element ) {\n                backButton.element.detach();\n                backButton.attached = false;\n            }\n        },\n        _addHeadingClasses: function() {\n            this.element.children( \"h1, h2, h3, h4, h5, h6\" )\n                .addClass( \"ui-title\" )\n                // Regardless of h element number in src, it becomes h1 for the enhanced page\n                .attr({\n                    \"role\": \"heading\",\n                    \"aria-level\": \"1\"\n                });\n        },\n        _destroy: function() {\n            var currentTheme;\n\n            this.element.children( \"h1, h2, h3, h4, h5, h6\" )\n                .removeClass( \"ui-title\" )\n                .removeAttr( \"role\" )\n                .removeAttr( \"aria-level\" );\n\n            if ( this.role === \"header\" ) {\n                this.element.children( \"a, button\" )\n                    .removeClass( \"ui-btn-left ui-btn-right ui-btn ui-shadow ui-corner-all\" );\n                if ( this.backButton) {\n                    this.backButton.remove();\n                }\n            }\n\n            currentTheme = this.options.theme ? this.options.theme : \"inherit\";\n            this.element.removeClass( \"ui-bar-\" + currentTheme );\n\n            this.element.removeClass( \"ui-\" + this.role ).removeAttr( \"role\" );\n        }\n    });\n\n})( jQuery );\n\n(function( $, undefined ) {\n\n    $.widget( \"mobile.toolbar\", $.mobile.toolbar, {\n        options: {\n            position:null,\n            visibleOnPageShow: true,\n            disablePageZoom: true,\n            transition: \"slide\", //can be none, fade, slide (slide maps to slideup or slidedown)\n            fullscreen: false,\n            tapToggle: true,\n            tapToggleBlacklist: \"a, button, input, select, textarea, .ui-header-fixed, .ui-footer-fixed, .ui-flipswitch, .ui-popup, .ui-panel, .ui-panel-dismiss-open\",\n            hideDuringFocus: \"input, textarea, select\",\n            updatePagePadding: true,\n            trackPersistentToolbars: true,\n\n            // Browser detection! Weeee, here we go...\n            // Unfortunately, position:fixed is costly, not to mention probably impossible, to feature-detect accurately.\n            // Some tests exist, but they currently return false results in critical devices and browsers, which could lead to a broken experience.\n            // Testing fixed positioning is also pretty obtrusive to page load, requiring injected elements and scrolling the window\n            // The following function serves to rule out some popular browsers with known fixed-positioning issues\n            // This is a plugin option like any other, so feel free to improve or overwrite it\n            supportBlacklist: function() {\n                return !$.support.fixedPosition;\n            }\n        },\n\n        _create: function() {\n            this._super();\n            this.pagecontainer = $( \":mobile-pagecontainer\" );\n            if ( this.options.position === \"fixed\" && !this.options.supportBlacklist() ) {\n                this._makeFixed();\n            }\n        },\n\n        _makeFixed: function() {\n            this.element.addClass( \"ui-\"+ this.role +\"-fixed\" );\n            this.updatePagePadding();\n            this._addTransitionClass();\n            this._bindPageEvents();\n            this._bindToggleHandlers();\n        },\n\n        _setOptions: function( o ) {\n            if ( o.position === \"fixed\" && this.options.position !== \"fixed\" ) {\n                this._makeFixed();\n            }\n            if ( this.options.position === \"fixed\" && !this.options.supportBlacklist() ) {\n                var $page = ( !!this.page )? this.page: ( $(\".ui-page-active\").length > 0 )? $(\".ui-page-active\"): $(\".ui-page\").eq(0);\n\n                if ( o.fullscreen !== undefined) {\n                    if ( o.fullscreen ) {\n                        this.element.addClass( \"ui-\"+ this.role +\"-fullscreen\" );\n                        $page.addClass( \"ui-page-\" + this.role + \"-fullscreen\" );\n                    }\n                    // If not fullscreen, add class to page to set top or bottom padding\n                    else {\n                        this.element.removeClass( \"ui-\"+ this.role +\"-fullscreen\" );\n                        $page.removeClass( \"ui-page-\" + this.role + \"-fullscreen\" ).addClass( \"ui-page-\" + this.role+ \"-fixed\" );\n                    }\n                }\n            }\n            this._super(o);\n        },\n\n        _addTransitionClass: function() {\n            var tclass = this.options.transition;\n\n            if ( tclass && tclass !== \"none\" ) {\n                // use appropriate slide for header or footer\n                if ( tclass === \"slide\" ) {\n                    tclass = this.element.hasClass( \"ui-header\" ) ? \"slidedown\" : \"slideup\";\n                }\n\n                this.element.addClass( tclass );\n            }\n        },\n\n        _bindPageEvents: function() {\n            var page = ( !!this.page )? this.element.closest( \".ui-page\" ): this.document;\n            //page event bindings\n            // Fixed toolbars require page zoom to be disabled, otherwise usability issues crop up\n            // This method is meant to disable zoom while a fixed-positioned toolbar page is visible\n            this._on( page , {\n                \"pagebeforeshow\": \"_handlePageBeforeShow\",\n                \"webkitAnimationStart\":\"_handleAnimationStart\",\n                \"animationstart\":\"_handleAnimationStart\",\n                \"updatelayout\": \"_handleAnimationStart\",\n                \"pageshow\": \"_handlePageShow\",\n                \"pagebeforehide\": \"_handlePageBeforeHide\"\n            });\n        },\n\n        _handlePageBeforeShow: function( ) {\n            var o = this.options;\n            if ( o.disablePageZoom ) {\n                $.mobile.zoom.disable( true );\n            }\n            if ( !o.visibleOnPageShow ) {\n                this.hide( true );\n            }\n        },\n\n        _handleAnimationStart: function() {\n            if ( this.options.updatePagePadding ) {\n                this.updatePagePadding( ( !!this.page )? this.page: \".ui-page-active\" );\n            }\n        },\n\n        _handlePageShow: function() {\n            this.updatePagePadding( ( !!this.page )? this.page: \".ui-page-active\" );\n            if ( this.options.updatePagePadding ) {\n                this._on( this.window, { \"throttledresize\": \"updatePagePadding\" } );\n            }\n        },\n\n        _handlePageBeforeHide: function( e, ui ) {\n            var o = this.options,\n                thisFooter, thisHeader, nextFooter, nextHeader;\n\n            if ( o.disablePageZoom ) {\n                $.mobile.zoom.enable( true );\n            }\n            if ( o.updatePagePadding ) {\n                this._off( this.window, \"throttledresize\" );\n            }\n\n            if ( o.trackPersistentToolbars ) {\n                thisFooter = $( \".ui-footer-fixed:jqmData(id)\", this.page );\n                thisHeader = $( \".ui-header-fixed:jqmData(id)\", this.page );\n                nextFooter = thisFooter.length && ui.nextPage && $( \".ui-footer-fixed:jqmData(id='\" + thisFooter.jqmData( \"id\" ) + \"')\", ui.nextPage ) || $();\n                nextHeader = thisHeader.length && ui.nextPage && $( \".ui-header-fixed:jqmData(id='\" + thisHeader.jqmData( \"id\" ) + \"')\", ui.nextPage ) || $();\n\n                if ( nextFooter.length || nextHeader.length ) {\n\n                    nextFooter.add( nextHeader ).appendTo( $.mobile.pageContainer );\n\n                    ui.nextPage.one( \"pageshow\", function() {\n                        nextHeader.prependTo( this );\n                        nextFooter.appendTo( this );\n                    });\n                }\n            }\n        },\n\n        _visible: true,\n\n        // This will set the content element's top or bottom padding equal to the toolbar's height\n        updatePagePadding: function( tbPage ) {\n            var $el = this.element,\n                header = ( this.role ===\"header\" ),\n                pos = parseFloat( $el.css( header ? \"top\" : \"bottom\" ) );\n\n            // This behavior only applies to \"fixed\", not \"fullscreen\"\n            if ( this.options.fullscreen ) { return; }\n            // tbPage argument can be a Page object or an event, if coming from throttled resize.\n            tbPage = ( tbPage && tbPage.type === undefined && tbPage ) || this.page || $el.closest( \".ui-page\" );\n            tbPage = ( !!this.page )? this.page: \".ui-page-active\";\n            $( tbPage ).css( \"padding-\" + ( header ? \"top\" : \"bottom\" ), $el.outerHeight() + pos );\n        },\n\n        _useTransition: function( notransition ) {\n            var $win = this.window,\n                $el = this.element,\n                scroll = $win.scrollTop(),\n                elHeight = $el.height(),\n                pHeight = ( !!this.page )? $el.closest( \".ui-page\" ).height():$(\".ui-page-active\").height(),\n                viewportHeight = $.mobile.getScreenHeight();\n\n            return !notransition &&\n                ( this.options.transition && this.options.transition !== \"none\" &&\n                (\n                    ( this.role === \"header\" && !this.options.fullscreen && scroll > elHeight ) ||\n                    ( this.role === \"footer\" && !this.options.fullscreen && scroll + viewportHeight < pHeight - elHeight )\n                ) || this.options.fullscreen\n                );\n        },\n\n        show: function( notransition ) {\n            var hideClass = \"ui-fixed-hidden\",\n                $el = this.element;\n\n            if ( this._useTransition( notransition ) ) {\n                $el\n                    .removeClass( \"out \" + hideClass )\n                    .addClass( \"in\" )\n                    .animationComplete(function () {\n                        $el.removeClass( \"in\" );\n                    });\n            }\n            else {\n                $el.removeClass( hideClass );\n            }\n            this._visible = true;\n        },\n\n        hide: function( notransition ) {\n            var hideClass = \"ui-fixed-hidden\",\n                $el = this.element,\n                // if it's a slide transition, our new transitions need the reverse class as well to slide outward\n                outclass = \"out\" + ( this.options.transition === \"slide\" ? \" reverse\" : \"\" );\n\n            if ( this._useTransition( notransition ) ) {\n                $el\n                    .addClass( outclass )\n                    .removeClass( \"in\" )\n                    .animationComplete(function() {\n                        $el.addClass( hideClass ).removeClass( outclass );\n                    });\n            }\n            else {\n                $el.addClass( hideClass ).removeClass( outclass );\n            }\n            this._visible = false;\n        },\n\n        toggle: function() {\n            this[ this._visible ? \"hide\" : \"show\" ]();\n        },\n\n        _bindToggleHandlers: function() {\n            var self = this,\n                o = self.options,\n                delayShow, delayHide,\n                isVisible = true,\n                page = ( !!this.page )? this.page: $(\".ui-page\");\n\n            // tap toggle\n            page\n                .bind( \"vclick\", function( e ) {\n                    if ( o.tapToggle && !$( e.target ).closest( o.tapToggleBlacklist ).length ) {\n                        self.toggle();\n                    }\n                })\n                .bind( \"focusin focusout\", function( e ) {\n                    //this hides the toolbars on a keyboard pop to give more screen room and prevent ios bug which\n                    //positions fixed toolbars in the middle of the screen on pop if the input is near the top or\n                    //bottom of the screen addresses issues #4410 Footer navbar moves up when clicking on a textbox in an Android environment\n                    //and issue #4113 Header and footer change their position after keyboard popup - iOS\n                    //and issue #4410 Footer navbar moves up when clicking on a textbox in an Android environment\n                    if ( screen.width < 1025 && $( e.target ).is( o.hideDuringFocus ) && !$( e.target ).closest( \".ui-header-fixed, .ui-footer-fixed\" ).length ) {\n                        //Fix for issue #4724 Moving through form in Mobile Safari with \"Next\" and \"Previous\" system\n                        //controls causes fixed position, tap-toggle false Header to reveal itself\n                        // isVisible instead of self._visible because the focusin and focusout events fire twice at the same time\n                        // Also use a delay for hiding the toolbars because on Android native browser focusin is direclty followed\n                        // by a focusout when a native selects opens and the other way around when it closes.\n                        if ( e.type === \"focusout\" && !isVisible ) {\n                            isVisible = true;\n                            //wait for the stack to unwind and see if we have jumped to another input\n                            clearTimeout( delayHide );\n                            delayShow = setTimeout( function() {\n                                self.show();\n                            }, 0 );\n                        } else if ( e.type === \"focusin\" && !!isVisible ) {\n                            //if we have jumped to another input clear the time out to cancel the show.\n                            clearTimeout( delayShow );\n                            isVisible = false;\n                            delayHide = setTimeout( function() {\n                                self.hide();\n                            }, 0 );\n                        }\n                    }\n                });\n        },\n\n        _setRelative: function() {\n            if( this.options.position !== \"fixed\" ){\n                $( \"[data-\"+ $.mobile.ns + \"role='page']\" ).css({ \"position\": \"relative\" });\n            }\n        },\n\n        _destroy: function() {\n            var pageClasses, toolbarClasses, hasFixed, header, hasFullscreen,\n                page = this.pagecontainer.pagecontainer( \"getActivePage\" );\n\n            this._super();\n            if ( this.options.position === \"fixed\" ) {\n                hasFixed = $(  \"body>.ui-\" + this.role + \"-fixed\" )\n                            .add( page.find( \".ui-\" + this.options.role + \"-fixed\" ) )\n                            .not( this.element ).length > 0;\n                hasFullscreen = $(  \"body>.ui-\" + this.role + \"-fixed\" )\n                            .add( page.find( \".ui-\" + this.options.role + \"-fullscreen\" ) )\n                            .not( this.element ).length > 0;\n                toolbarClasses =  \"ui-header-fixed ui-footer-fixed ui-header-fullscreen in out\" +\n                    \" ui-footer-fullscreen fade slidedown slideup ui-fixed-hidden\";\n                this.element.removeClass( toolbarClasses );\n                if ( !hasFullscreen ) {\n                    pageClasses = \"ui-page-\" + this.role + \"-fullscreen\";\n                }\n                if ( !hasFixed ) {\n                    header = this.role === \"header\";\n                    pageClasses += \" ui-page-\" + this.role + \"-fixed\";\n                    page.css( \"padding-\" + ( header ? \"top\" : \"bottom\" ), \"\" );\n                }\n                page.removeClass( pageClasses );\n            }\n        }\n\n    });\n})( jQuery );\n\n(function( $, undefined ) {\n    $.widget( \"mobile.toolbar\", $.mobile.toolbar, {\n\n        _makeFixed: function() {\n            this._super();\n            this._workarounds();\n        },\n\n        //check the browser and version and run needed workarounds\n        _workarounds: function() {\n            var ua = navigator.userAgent,\n            platform = navigator.platform,\n            // Rendering engine is Webkit, and capture major version\n            wkmatch = ua.match( /AppleWebKit\\/([0-9]+)/ ),\n            wkversion = !!wkmatch && wkmatch[ 1 ],\n            os = null,\n            self = this;\n            //set the os we are working in if it dosent match one with workarounds return\n            if ( platform.indexOf( \"iPhone\" ) > -1 || platform.indexOf( \"iPad\" ) > -1  || platform.indexOf( \"iPod\" ) > -1 ) {\n                os = \"ios\";\n            } else if ( ua.indexOf( \"Android\" ) > -1 ) {\n                os = \"android\";\n            } else {\n                return;\n            }\n            //check os version if it dosent match one with workarounds return\n            if ( os === \"ios\" ) {\n                //iOS  workarounds\n                self._bindScrollWorkaround();\n            } else if ( os === \"android\" && wkversion && wkversion < 534 ) {\n                //Android 2.3 run all Android 2.3 workaround\n                self._bindScrollWorkaround();\n                self._bindListThumbWorkaround();\n            } else {\n                return;\n            }\n        },\n\n        //Utility class for checking header and footer positions relative to viewport\n        _viewportOffset: function() {\n            var $el = this.element,\n                header = $el.hasClass( \"ui-header\" ),\n                offset = Math.abs( $el.offset().top - this.window.scrollTop() );\n            if ( !header ) {\n                offset = Math.round( offset - this.window.height() + $el.outerHeight() ) - 60;\n            }\n            return offset;\n        },\n\n        //bind events for _triggerRedraw() function\n        _bindScrollWorkaround: function() {\n            var self = this;\n            //bind to scrollstop and check if the toolbars are correctly positioned\n            this._on( this.window, { scrollstop: function() {\n                var viewportOffset = self._viewportOffset();\n                //check if the header is visible and if its in the right place\n                if ( viewportOffset > 2 && self._visible ) {\n                    self._triggerRedraw();\n                }\n            }});\n        },\n\n        //this addresses issue #4250 Persistent footer instability in v1.1 with long select lists in Android 2.3.3\n        //and issue #3748 Android 2.x: Page transitions broken when fixed toolbars used\n        //the absolutely positioned thumbnail in a list view causes problems with fixed position buttons above in a nav bar\n        //setting the li's to -webkit-transform:translate3d(0,0,0); solves this problem to avoide potential issues in other\n        //platforms we scope this with the class ui-android-2x-fix\n        _bindListThumbWorkaround: function() {\n            this.element.closest( \".ui-page\" ).addClass( \"ui-android-2x-fixed\" );\n        },\n        //this addresses issues #4337 Fixed header problem after scrolling content on iOS and Android\n        //and device bugs project issue #1 Form elements can lose click hit area in position: fixed containers.\n        //this also addresses not on fixed toolbars page in docs\n        //adding 1px of padding to the bottom then removing it causes a \"redraw\"\n        //which positions the toolbars correctly (they will always be visually correct)\n        _triggerRedraw: function() {\n            var paddingBottom = parseFloat( $( \".ui-page-active\" ).css( \"padding-bottom\" ) );\n            //trigger page redraw to fix incorrectly positioned fixed elements\n            $( \".ui-page-active\" ).css( \"padding-bottom\", ( paddingBottom + 1 ) + \"px\" );\n            //if the padding is reset with out a timeout the reposition will not occure.\n            //this is independant of JQM the browser seems to need the time to react.\n            setTimeout( function() {\n                $( \".ui-page-active\" ).css( \"padding-bottom\", paddingBottom + \"px\" );\n            }, 0 );\n        },\n\n        destroy: function() {\n            this._super();\n            //Remove the class we added to the page previously in android 2.x\n            this.element.closest( \".ui-page-active\" ).removeClass( \"ui-android-2x-fix\" );\n        }\n    });\n\n})( jQuery );\n\n\n( function( $, undefined ) {\n\nvar ieHack = ( $.mobile.browser.oldIE && $.mobile.browser.oldIE <= 8 ),\n    uiTemplate = $(\n        \"<div class='ui-popup-arrow-guide'></div>\" +\n        \"<div class='ui-popup-arrow-container\" + ( ieHack ? \" ie\" : \"\" ) + \"'>\" +\n            \"<div class='ui-popup-arrow'></div>\" +\n        \"</div>\"\n    );\n\nfunction getArrow() {\n    var clone = uiTemplate.clone(),\n        gd = clone.eq( 0 ),\n        ct = clone.eq( 1 ),\n        ar = ct.children();\n\n    return { arEls: ct.add( gd ), gd: gd, ct: ct, ar: ar };\n}\n\n$.widget( \"mobile.popup\", $.mobile.popup, {\n    options: {\n\n        arrow: \"\"\n    },\n\n    _create: function() {\n        var ar,\n            ret = this._super();\n\n        if ( this.options.arrow ) {\n            this._ui.arrow = ar = this._addArrow();\n        }\n\n        return ret;\n    },\n\n    _addArrow: function() {\n        var theme,\n            opts = this.options,\n            ar = getArrow();\n\n        theme = this._themeClassFromOption( \"ui-body-\", opts.theme );\n        ar.ar.addClass( theme + ( opts.shadow ? \" ui-overlay-shadow\" : \"\" ) );\n        ar.arEls.hide().appendTo( this.element );\n\n        return ar;\n    },\n\n    _unenhance: function() {\n        var ar = this._ui.arrow;\n\n        if ( ar ) {\n            ar.arEls.remove();\n        }\n\n        return this._super();\n    },\n\n    // Pretend to show an arrow described by @p and @dir and calculate the\n    // distance from the desired point. If a best-distance is passed in, return\n    // the minimum of the one passed in and the one calculated.\n    _tryAnArrow: function( p, dir, desired, s, best ) {\n        var result, r, diff, desiredForArrow = {}, tip = {};\n\n        // If the arrow has no wiggle room along the edge of the popup, it cannot\n        // be displayed along the requested edge without it sticking out.\n        if ( s.arFull[ p.dimKey ] > s.guideDims[ p.dimKey ] ) {\n            return best;\n        }\n\n        desiredForArrow[ p.fst ] = desired[ p.fst ] +\n            ( s.arHalf[ p.oDimKey ] + s.menuHalf[ p.oDimKey ] ) * p.offsetFactor -\n            s.contentBox[ p.fst ] + ( s.clampInfo.menuSize[ p.oDimKey ] - s.contentBox[ p.oDimKey ] ) * p.arrowOffsetFactor;\n        desiredForArrow[ p.snd ] = desired[ p.snd ];\n\n        result = s.result || this._calculateFinalLocation( desiredForArrow, s.clampInfo );\n        r = { x: result.left, y: result.top };\n\n        tip[ p.fst ] = r[ p.fst ] + s.contentBox[ p.fst ] + p.tipOffset;\n        tip[ p.snd ] = Math.max( result[ p.prop ] + s.guideOffset[ p.prop ] + s.arHalf[ p.dimKey ],\n            Math.min( result[ p.prop ] + s.guideOffset[ p.prop ] + s.guideDims[ p.dimKey ] - s.arHalf[ p.dimKey ],\n                desired[ p.snd ] ) );\n\n        diff = Math.abs( desired.x - tip.x ) + Math.abs( desired.y - tip.y );\n        if ( !best || diff < best.diff ) {\n            // Convert tip offset to coordinates inside the popup\n            tip[ p.snd ] -= s.arHalf[ p.dimKey ] + result[ p.prop ] + s.contentBox[ p.snd ];\n            best = { dir: dir, diff: diff, result: result, posProp: p.prop, posVal: tip[ p.snd ] };\n        }\n\n        return best;\n    },\n\n    _getPlacementState: function( clamp ) {\n        var offset, gdOffset,\n            ar = this._ui.arrow,\n            state = {\n                clampInfo: this._clampPopupWidth( !clamp ),\n                arFull: { cx: ar.ct.width(), cy: ar.ct.height() },\n                guideDims: { cx: ar.gd.width(), cy: ar.gd.height() },\n                guideOffset: ar.gd.offset()\n            };\n\n        offset = this.element.offset();\n\n        ar.gd.css( { left: 0, top: 0, right: 0, bottom: 0 } );\n        gdOffset = ar.gd.offset();\n        state.contentBox = {\n            x: gdOffset.left - offset.left,\n            y: gdOffset.top - offset.top,\n            cx: ar.gd.width(),\n            cy: ar.gd.height()\n        };\n        ar.gd.removeAttr( \"style\" );\n\n        // The arrow box moves between guideOffset and guideOffset + guideDims - arFull\n        state.guideOffset = { left: state.guideOffset.left - offset.left, top: state.guideOffset.top - offset.top };\n        state.arHalf = { cx: state.arFull.cx / 2, cy: state.arFull.cy / 2 };\n        state.menuHalf = { cx: state.clampInfo.menuSize.cx / 2, cy: state.clampInfo.menuSize.cy / 2 };\n\n        return state;\n    },\n\n    _placementCoords: function( desired ) {\n        var state, best, params, elOffset, bgRef,\n            optionValue = this.options.arrow,\n            ar = this._ui.arrow;\n\n        if ( !ar ) {\n            return this._super( desired );\n        }\n\n        ar.arEls.show();\n\n        bgRef = {};\n        state = this._getPlacementState( true );\n        params = {\n            \"l\": { fst: \"x\", snd: \"y\", prop: \"top\", dimKey: \"cy\", oDimKey: \"cx\", offsetFactor: 1, tipOffset:  -state.arHalf.cx, arrowOffsetFactor: 0 },\n            \"r\": { fst: \"x\", snd: \"y\", prop: \"top\", dimKey: \"cy\", oDimKey: \"cx\", offsetFactor: -1, tipOffset: state.arHalf.cx + state.contentBox.cx, arrowOffsetFactor: 1 },\n            \"b\": { fst: \"y\", snd: \"x\", prop: \"left\", dimKey: \"cx\", oDimKey: \"cy\", offsetFactor: -1, tipOffset: state.arHalf.cy + state.contentBox.cy, arrowOffsetFactor: 1 },\n            \"t\": { fst: \"y\", snd: \"x\", prop: \"left\", dimKey: \"cx\", oDimKey: \"cy\", offsetFactor: 1, tipOffset: -state.arHalf.cy, arrowOffsetFactor: 0 }\n        };\n\n        // Try each side specified in the options to see on which one the arrow\n        // should be placed such that the distance between the tip of the arrow and\n        // the desired coordinates is the shortest.\n        $.each( ( optionValue === true ? \"l,t,r,b\" : optionValue ).split( \",\" ),\n            $.proxy( function( key, value ) {\n                best = this._tryAnArrow( params[ value ], value, desired, state, best );\n            }, this ) );\n\n        // Could not place the arrow along any of the edges - behave as if showing\n        // the arrow was turned off.\n        if ( !best ) {\n            ar.arEls.hide();\n            return this._super( desired );\n        }\n\n        // Move the arrow into place\n        ar.ct\n            .removeClass( \"ui-popup-arrow-l ui-popup-arrow-t ui-popup-arrow-r ui-popup-arrow-b\" )\n            .addClass( \"ui-popup-arrow-\" + best.dir )\n            .removeAttr( \"style\" ).css( best.posProp, best.posVal )\n            .show();\n\n        // Do not move/size the background div on IE, because we use the arrow div for background as well.\n        if ( !ieHack ) {\n            elOffset = this.element.offset();\n            bgRef[ params[ best.dir ].fst ] = ar.ct.offset();\n            bgRef[ params[ best.dir ].snd ] = {\n                left: elOffset.left + state.contentBox.x,\n                top: elOffset.top + state.contentBox.y\n            };\n        }\n\n        return best.result;\n    },\n\n    _setOptions: function( opts ) {\n        var newTheme,\n            oldTheme = this.options.theme,\n            ar = this._ui.arrow,\n            ret = this._super( opts );\n\n        if ( opts.arrow !== undefined ) {\n            if ( !ar && opts.arrow ) {\n                this._ui.arrow = this._addArrow();\n\n                // Important to return here so we don't set the same options all over\n                // again below.\n                return;\n            } else if ( ar && !opts.arrow ) {\n                ar.arEls.remove();\n                this._ui.arrow = null;\n            }\n        }\n\n        // Reassign with potentially new arrow\n        ar = this._ui.arrow;\n\n        if ( ar ) {\n            if ( opts.theme !== undefined ) {\n                oldTheme = this._themeClassFromOption( \"ui-body-\", oldTheme );\n                newTheme = this._themeClassFromOption( \"ui-body-\", opts.theme );\n                ar.ar.removeClass( oldTheme ).addClass( newTheme );\n            }\n\n            if ( opts.shadow !== undefined ) {\n                ar.ar.toggleClass( \"ui-overlay-shadow\", opts.shadow );\n            }\n        }\n\n        return ret;\n    },\n\n    _destroy: function() {\n        var ar = this._ui.arrow;\n\n        if ( ar ) {\n            ar.arEls.remove();\n        }\n\n        return this._super();\n    }\n});\n\n})( jQuery );\n\n\n(function( $, undefined ) {\n\n$.widget( \"mobile.panel\", {\n    options: {\n        classes: {\n            panel: \"ui-panel\",\n            panelOpen: \"ui-panel-open\",\n            panelClosed: \"ui-panel-closed\",\n            panelFixed: \"ui-panel-fixed\",\n            panelInner: \"ui-panel-inner\",\n            modal: \"ui-panel-dismiss\",\n            modalOpen: \"ui-panel-dismiss-open\",\n            pageContainer: \"ui-panel-page-container\",\n            pageWrapper: \"ui-panel-wrapper\",\n            pageFixedToolbar: \"ui-panel-fixed-toolbar\",\n            pageContentPrefix: \"ui-panel-page-content\", /* Used for wrapper and fixed toolbars position, display and open classes. */\n            animate: \"ui-panel-animate\"\n        },\n        animate: true,\n        theme: null,\n        position: \"left\",\n        dismissible: true,\n        display: \"reveal\", //accepts reveal, push, overlay\n        swipeClose: true,\n        positionFixed: false\n    },\n\n    _closeLink: null,\n    _parentPage: null,\n    _page: null,\n    _modal: null,\n    _panelInner: null,\n    _wrapper: null,\n    _fixedToolbars: null,\n\n    _create: function() {\n        var el = this.element,\n            parentPage = el.closest( \".ui-page, :jqmData(role='page')\" );\n\n        // expose some private props to other methods\n        $.extend( this, {\n            _closeLink: el.find( \":jqmData(rel='close')\" ),\n            _parentPage: ( parentPage.length > 0 ) ? parentPage : false,\n            _openedPage: null,\n            _page: this._getPage,\n            _panelInner: this._getPanelInner(),\n            _fixedToolbars: this._getFixedToolbars\n        });\n        if ( this.options.display !== \"overlay\" ){\n            this._getWrapper();\n        }\n        this._addPanelClasses();\n\n        // if animating, add the class to do so\n        if ( $.support.cssTransform3d && !!this.options.animate ) {\n            this.element.addClass( this.options.classes.animate );\n        }\n\n        this._bindUpdateLayout();\n        this._bindCloseEvents();\n        this._bindLinkListeners();\n        this._bindPageEvents();\n\n        if ( !!this.options.dismissible ) {\n            this._createModal();\n        }\n\n        this._bindSwipeEvents();\n    },\n\n    _getPanelInner: function() {\n        var panelInner = this.element.find( \".\" + this.options.classes.panelInner );\n\n        if ( panelInner.length === 0 ) {\n            panelInner = this.element.children().wrapAll( \"<div class='\" + this.options.classes.panelInner + \"' />\" ).parent();\n        }\n\n        return panelInner;\n    },\n\n    _createModal: function() {\n        var self = this,\n            target = self._parentPage ? self._parentPage.parent() : self.element.parent();\n\n        self._modal = $( \"<div class='\" + self.options.classes.modal + \"'></div>\" )\n            .on( \"mousedown\", function() {\n                self.close();\n            })\n            .appendTo( target );\n    },\n\n    _getPage: function() {\n        var page = this._openedPage || this._parentPage || $( \".\" + $.mobile.activePageClass );\n\n        return page;\n    },\n\n    _getWrapper: function() {\n        var wrapper = this._page().find( \".\" + this.options.classes.pageWrapper );\n        if ( wrapper.length === 0 ) {\n            wrapper = this._page().children( \".ui-header:not(.ui-header-fixed), .ui-content:not(.ui-popup), .ui-footer:not(.ui-footer-fixed)\" )\n                .wrapAll( \"<div class='\" + this.options.classes.pageWrapper + \"'></div>\" )\n                .parent();\n        }\n\n        this._wrapper = wrapper;\n    },\n\n    _getFixedToolbars: function() {\n        var extFixedToolbars = $( \"body\" ).children( \".ui-header-fixed, .ui-footer-fixed\" ),\n            intFixedToolbars = this._page().find( \".ui-header-fixed, .ui-footer-fixed\" ),\n            fixedToolbars = extFixedToolbars.add( intFixedToolbars ).addClass( this.options.classes.pageFixedToolbar );\n\n        return fixedToolbars;\n    },\n\n    _getPosDisplayClasses: function( prefix ) {\n        return prefix + \"-position-\" + this.options.position + \" \" + prefix + \"-display-\" + this.options.display;\n    },\n\n    _getPanelClasses: function() {\n        var panelClasses = this.options.classes.panel +\n            \" \" + this._getPosDisplayClasses( this.options.classes.panel ) +\n            \" \" + this.options.classes.panelClosed +\n            \" \" + \"ui-body-\" + ( this.options.theme ? this.options.theme : \"inherit\" );\n\n        if ( !!this.options.positionFixed ) {\n            panelClasses += \" \" + this.options.classes.panelFixed;\n        }\n\n        return panelClasses;\n    },\n\n    _addPanelClasses: function() {\n        this.element.addClass( this._getPanelClasses() );\n    },\n\n    _handleCloseClick: function( event ) {\n        if ( !event.isDefaultPrevented() ) {\n            this.close();\n        }\n    },\n\n    _bindCloseEvents: function() {\n        this._on( this._closeLink, {\n            \"click\": \"_handleCloseClick\"\n        });\n\n        this._on({\n            \"click a:jqmData(ajax='false')\": \"_handleCloseClick\"\n        });\n    },\n\n    _positionPanel: function( scrollToTop ) {\n        var self = this,\n            panelInnerHeight = self._panelInner.outerHeight(),\n            expand = panelInnerHeight > $.mobile.getScreenHeight();\n\n        if ( expand || !self.options.positionFixed ) {\n            if ( expand ) {\n                self._unfixPanel();\n                $.mobile.resetActivePageHeight( panelInnerHeight );\n            }\n            if ( scrollToTop ) {\n                this.window[ 0 ].scrollTo( 0, $.mobile.defaultHomeScroll );\n            }\n        } else {\n            self._fixPanel();\n        }\n    },\n\n    _bindFixListener: function() {\n        this._on( $( window ), { \"throttledresize\": \"_positionPanel\" });\n    },\n\n    _unbindFixListener: function() {\n        this._off( $( window ), \"throttledresize\" );\n    },\n\n    _unfixPanel: function() {\n        if ( !!this.options.positionFixed && $.support.fixedPosition ) {\n            this.element.removeClass( this.options.classes.panelFixed );\n        }\n    },\n\n    _fixPanel: function() {\n        if ( !!this.options.positionFixed && $.support.fixedPosition ) {\n            this.element.addClass( this.options.classes.panelFixed );\n        }\n    },\n\n    _bindUpdateLayout: function() {\n        var self = this;\n\n        self.element.on( \"updatelayout\", function(/* e */) {\n            if ( self._open ) {\n                self._positionPanel();\n            }\n        });\n    },\n\n    _bindLinkListeners: function() {\n        this._on( \"body\", {\n            \"click a\": \"_handleClick\"\n        });\n\n    },\n\n    _handleClick: function( e ) {\n        var link,\n            panelId = this.element.attr( \"id\" );\n\n        if ( e.currentTarget.href.split( \"#\" )[ 1 ] === panelId && panelId !== undefined ) {\n\n            e.preventDefault();\n            link = $( e.target );\n            if ( link.hasClass( \"ui-btn\" ) ) {\n                link.addClass( $.mobile.activeBtnClass );\n                this.element.one( \"panelopen panelclose\", function() {\n                    link.removeClass( $.mobile.activeBtnClass );\n                });\n            }\n            this.toggle();\n        }\n    },\n\n    _bindSwipeEvents: function() {\n        var self = this,\n            area = self._modal ? self.element.add( self._modal ) : self.element;\n\n        // on swipe, close the panel\n        if ( !!self.options.swipeClose ) {\n            if ( self.options.position === \"left\" ) {\n                area.on( \"swipeleft.panel\", function(/* e */) {\n                    self.close();\n                });\n            } else {\n                area.on( \"swiperight.panel\", function(/* e */) {\n                    self.close();\n                });\n            }\n        }\n    },\n\n    _bindPageEvents: function() {\n        var self = this;\n\n        this.document\n            // Close the panel if another panel on the page opens\n            .on( \"panelbeforeopen\", function( e ) {\n                if ( self._open && e.target !== self.element[ 0 ] ) {\n                    self.close();\n                }\n            })\n            // On escape, close? might need to have a target check too...\n            .on( \"keyup.panel\", function( e ) {\n                if ( e.keyCode === 27 && self._open ) {\n                    self.close();\n                }\n            });\n        if ( !this._parentPage && this.options.display !== \"overlay\" ) {\n            this._on( this.document, {\n                \"pageshow\": function() {\n                    this._openedPage = null;\n                    this._getWrapper();\n                }\n            });\n        }\n        // Clean up open panels after page hide\n        if ( self._parentPage ) {\n            this.document.on( \"pagehide\", \":jqmData(role='page')\", function() {\n                if ( self._open ) {\n                    self.close( true );\n                }\n            });\n        } else {\n            this.document.on( \"pagebeforehide\", function() {\n                if ( self._open ) {\n                    self.close( true );\n                }\n            });\n        }\n    },\n\n    // state storage of open or closed\n    _open: false,\n    _pageContentOpenClasses: null,\n    _modalOpenClasses: null,\n\n    open: function( immediate ) {\n        if ( !this._open ) {\n            var self = this,\n                o = self.options,\n\n                _openPanel = function() {\n                    self._off( self.document , \"panelclose\" );\n                    self._page().jqmData( \"panel\", \"open\" );\n\n                    if ( $.support.cssTransform3d && !!o.animate && o.display !== \"overlay\" ) {\n                        self._wrapper.addClass( o.classes.animate );\n                        self._fixedToolbars().addClass( o.classes.animate );\n                    }\n\n                    if ( !immediate && $.support.cssTransform3d && !!o.animate ) {\n                        ( self._wrapper || self.element )\n                            .animationComplete( complete, \"transition\" );\n                    } else {\n                        setTimeout( complete, 0 );\n                    }\n\n                    if ( o.theme && o.display !== \"overlay\" ) {\n                        self._page().parent()\n                            .addClass( o.classes.pageContainer + \"-themed \" + o.classes.pageContainer + \"-\" + o.theme );\n                    }\n\n                    self.element\n                        .removeClass( o.classes.panelClosed )\n                        .addClass( o.classes.panelOpen );\n\n                    self._positionPanel( true );\n\n                    self._pageContentOpenClasses = self._getPosDisplayClasses( o.classes.pageContentPrefix );\n\n                    if ( o.display !== \"overlay\" ) {\n                        self._page().parent().addClass( o.classes.pageContainer );\n                        self._wrapper.addClass( self._pageContentOpenClasses );\n                        self._fixedToolbars().addClass( self._pageContentOpenClasses );\n                    }\n\n                    self._modalOpenClasses = self._getPosDisplayClasses( o.classes.modal ) + \" \" + o.classes.modalOpen;\n                    if ( self._modal ) {\n                        self._modal\n                            .addClass( self._modalOpenClasses )\n                            .height( Math.max( self._modal.height(), self.document.height() ) );\n                    }\n                },\n                complete = function() {\n\n                    // Bail if the panel was closed before the opening animation has completed\n                    if ( !self._open ) {\n                        return;\n                    }\n\n                    if ( o.display !== \"overlay\" ) {\n                        self._wrapper.addClass( o.classes.pageContentPrefix + \"-open\" );\n                        self._fixedToolbars().addClass( o.classes.pageContentPrefix + \"-open\" );\n                    }\n\n                    self._bindFixListener();\n\n                    self._trigger( \"open\" );\n\n                    self._openedPage = self._page();\n                };\n\n            self._trigger( \"beforeopen\" );\n\n            if ( self._page().jqmData( \"panel\" ) === \"open\" ) {\n                self._on( self.document, {\n                    \"panelclose\": _openPanel\n                });\n            } else {\n                _openPanel();\n            }\n\n            self._open = true;\n        }\n    },\n\n    close: function( immediate ) {\n        if ( this._open ) {\n            var self = this,\n                o = this.options,\n\n                _closePanel = function() {\n\n                    self.element.removeClass( o.classes.panelOpen );\n\n                    if ( o.display !== \"overlay\" ) {\n                        self._wrapper.removeClass( self._pageContentOpenClasses );\n                        self._fixedToolbars().removeClass( self._pageContentOpenClasses );\n                    }\n\n                    if ( !immediate && $.support.cssTransform3d && !!o.animate ) {\n                        ( self._wrapper || self.element )\n                            .animationComplete( complete, \"transition\" );\n                    } else {\n                        setTimeout( complete, 0 );\n                    }\n\n                    if ( self._modal ) {\n                        self._modal\n                            .removeClass( self._modalOpenClasses )\n                            .height( \"\" );\n                    }\n                },\n                complete = function() {\n                    if ( o.theme && o.display !== \"overlay\" ) {\n                        self._page().parent().removeClass( o.classes.pageContainer + \"-themed \" + o.classes.pageContainer + \"-\" + o.theme );\n                    }\n\n                    self.element.addClass( o.classes.panelClosed );\n\n                    if ( o.display !== \"overlay\" ) {\n                        self._page().parent().removeClass( o.classes.pageContainer );\n                        self._wrapper.removeClass( o.classes.pageContentPrefix + \"-open\" );\n                        self._fixedToolbars().removeClass( o.classes.pageContentPrefix + \"-open\" );\n                    }\n\n                    if ( $.support.cssTransform3d && !!o.animate && o.display !== \"overlay\" ) {\n                        self._wrapper.removeClass( o.classes.animate );\n                        self._fixedToolbars().removeClass( o.classes.animate );\n                    }\n\n                    self._fixPanel();\n                    self._unbindFixListener();\n                    $.mobile.resetActivePageHeight();\n\n                    self._page().jqmRemoveData( \"panel\" );\n\n                    self._trigger( \"close\" );\n\n                    self._openedPage = null;\n                };\n\n            self._trigger( \"beforeclose\" );\n\n            _closePanel();\n\n            self._open = false;\n        }\n    },\n\n    toggle: function() {\n        this[ this._open ? \"close\" : \"open\" ]();\n    },\n\n    _destroy: function() {\n        var otherPanels,\n        o = this.options,\n        multiplePanels = ( $( \"body > :mobile-panel\" ).length + $.mobile.activePage.find( \":mobile-panel\" ).length ) > 1;\n\n        if ( o.display !== \"overlay\" ) {\n\n            //  remove the wrapper if not in use by another panel\n            otherPanels = $( \"body > :mobile-panel\" ).add( $.mobile.activePage.find( \":mobile-panel\" ) );\n            if ( otherPanels.not( \".ui-panel-display-overlay\" ).not( this.element ).length === 0 ) {\n                this._wrapper.children().unwrap();\n            }\n\n            if ( this._open ) {\n\n                this._fixedToolbars().removeClass( o.classes.pageContentPrefix + \"-open\" );\n\n                if ( $.support.cssTransform3d && !!o.animate ) {\n                    this._fixedToolbars().removeClass( o.classes.animate );\n                }\n\n                this._page().parent().removeClass( o.classes.pageContainer );\n\n                if ( o.theme ) {\n                    this._page().parent().removeClass( o.classes.pageContainer + \"-themed \" + o.classes.pageContainer + \"-\" + o.theme );\n                }\n            }\n        }\n\n        if ( !multiplePanels ) {\n\n            this.document.off( \"panelopen panelclose\" );\n\n        }\n\n        if ( this._open ) {\n            this._page().jqmRemoveData( \"panel\" );\n        }\n\n        this._panelInner.children().unwrap();\n\n        this.element\n            .removeClass( [ this._getPanelClasses(), o.classes.panelOpen, o.classes.animate ].join( \" \" ) )\n            .off( \"swipeleft.panel swiperight.panel\" )\n            .off( \"panelbeforeopen\" )\n            .off( \"panelhide\" )\n            .off( \"keyup.panel\" )\n            .off( \"updatelayout\" );\n\n        if ( this._modal ) {\n            this._modal.remove();\n        }\n    }\n});\n\n})( jQuery );\n\n(function( $, undefined ) {\n\n$.widget( \"mobile.table\", {\n    options: {\n        classes: {\n            table: \"ui-table\"\n        },\n        enhanced: false\n    },\n\n    _create: function() {\n        if ( !this.options.enhanced ) {\n            this.element.addClass( this.options.classes.table );\n        }\n\n        // extend here, assign on refresh > _setHeaders\n        $.extend( this, {\n\n            // Expose headers and allHeaders properties on the widget\n            // headers references the THs within the first TR in the table\n            headers: undefined,\n\n            // allHeaders references headers, plus all THs in the thead, which may\n            // include several rows, or not\n            allHeaders: undefined\n        });\n\n        this._refresh( true );\n    },\n\n    _setHeaders: function() {\n        var trs = this.element.find( \"thead tr\" );\n\n        this.headers = this.element.find( \"tr:eq(0)\" ).children();\n        this.allHeaders = this.headers.add( trs.children() );\n    },\n\n    refresh: function() {\n        this._refresh();\n    },\n\n    rebuild: $.noop,\n\n    _refresh: function( /* create */ ) {\n        var table = this.element,\n            trs = table.find( \"thead tr\" );\n\n        // updating headers on refresh (fixes #5880)\n        this._setHeaders();\n\n        // Iterate over the trs\n        trs.each( function() {\n            var columnCount = 0;\n\n            // Iterate over the children of the tr\n            $( this ).children().each( function() {\n                var span = parseInt( this.getAttribute( \"colspan\" ), 10 ),\n                    selector = \":nth-child(\" + ( columnCount + 1 ) + \")\",\n                    j;\n\n                this.setAttribute( \"data-\" + $.mobile.ns + \"colstart\", columnCount + 1 );\n\n                if ( span ) {\n                    for( j = 0; j < span - 1; j++ ) {\n                        columnCount++;\n                        selector += \", :nth-child(\" + ( columnCount + 1 ) + \")\";\n                    }\n                }\n\n                // Store \"cells\" data on header as a reference to all cells in the\n                // same column as this TH\n                $( this ).jqmData( \"cells\", table.find( \"tr\" ).not( trs.eq( 0 ) ).not( this ).children( selector ) );\n\n                columnCount++;\n            });\n        });\n    }\n});\n\n})( jQuery );\n\n\n(function( $, undefined ) {\n\n$.widget( \"mobile.table\", $.mobile.table, {\n    options: {\n        mode: \"columntoggle\",\n        columnBtnTheme: null,\n        columnPopupTheme: null,\n        columnBtnText: \"Columns...\",\n        classes: $.extend( $.mobile.table.prototype.options.classes, {\n            popup: \"ui-table-columntoggle-popup\",\n            columnBtn: \"ui-table-columntoggle-btn\",\n            priorityPrefix: \"ui-table-priority-\",\n            columnToggleTable: \"ui-table-columntoggle\"\n        })\n    },\n\n    _create: function() {\n        this._super();\n\n        if ( this.options.mode !== \"columntoggle\" ) {\n            return;\n        }\n\n        $.extend( this, {\n            _menu: null\n        });\n\n        if ( this.options.enhanced ) {\n            this._menu = $( this.document[ 0 ].getElementById( this._id() + \"-popup\" ) ).children().first();\n            this._addToggles( this._menu, true );\n        } else {\n            this._menu = this._enhanceColToggle();\n            this.element.addClass( this.options.classes.columnToggleTable );\n        }\n\n        this._setupEvents();\n\n        this._setToggleState();\n    },\n\n    _id: function() {\n        return ( this.element.attr( \"id\" ) || ( this.widgetName + this.uuid ) );\n    },\n\n    _setupEvents: function() {\n        //NOTE: inputs are bound in bindToggles,\n        // so it can be called on refresh, too\n\n        // update column toggles on resize\n        this._on( this.window, {\n            throttledresize: \"_setToggleState\"\n        });\n        this._on( this._menu, {\n            \"change input\": \"_menuInputChange\"\n        });\n    },\n\n    _addToggles: function( menu, keep ) {\n        var inputs,\n            checkboxIndex = 0,\n            opts = this.options,\n            container = menu.controlgroup( \"container\" );\n\n        // allow update of menu on refresh (fixes #5880)\n        if ( keep ) {\n            inputs = menu.find( \"input\" );\n        } else {\n            container.empty();\n        }\n\n        // create the hide/show toggles\n        this.headers.not( \"td\" ).each( function() {\n            var input, cells,\n                header = $( this ),\n                priority = $.mobile.getAttribute( this, \"priority\" );\n\n            if ( priority ) {\n                cells = header.add( header.jqmData( \"cells\" ) );\n                cells.addClass( opts.classes.priorityPrefix + priority );\n\n                // Make sure the (new?) checkbox is associated with its header via .jqmData() and\n                // that, vice versa, the header is also associated with the checkbox\n                input = ( keep ? inputs.eq( checkboxIndex++ ) :\n                    $(\"<label><input type='checkbox' checked />\" +\n                        ( header.children( \"abbr\" ).first().attr( \"title\" ) ||\n                            header.text() ) +\n                        \"</label>\" )\n                        .appendTo( container )\n                        .children( 0 )\n                        .checkboxradio( {\n                            theme: opts.columnPopupTheme\n                        }) )\n\n                        // Associate the header with the checkbox\n                        .jqmData( \"header\", header )\n                        .jqmData( \"cells\", cells );\n\n                // Associate the checkbox with the header\n                header.jqmData( \"input\", input );\n            }\n        });\n\n        // set bindings here\n        if ( !keep ) {\n            menu.controlgroup( \"refresh\" );\n        }\n    },\n\n    _menuInputChange: function( evt ) {\n        var input = $( evt.target ),\n            checked = input[ 0 ].checked;\n\n        input.jqmData( \"cells\" )\n            .toggleClass( \"ui-table-cell-hidden\", !checked )\n            .toggleClass( \"ui-table-cell-visible\", checked );\n    },\n\n    _unlockCells: function( cells ) {\n        // allow hide/show via CSS only = remove all toggle-locks\n        cells.removeClass( \"ui-table-cell-hidden ui-table-cell-visible\");\n    },\n\n    _enhanceColToggle: function() {\n        var id , menuButton, popup, menu,\n            table = this.element,\n            opts = this.options,\n            ns = $.mobile.ns,\n            fragment = this.document[ 0 ].createDocumentFragment();\n\n        id = this._id() + \"-popup\";\n        menuButton = $( \"<a href='#\" + id + \"' \" +\n            \"class='\" + opts.classes.columnBtn + \" ui-btn \" +\n            \"ui-btn-\" + ( opts.columnBtnTheme || \"a\" ) +\n            \" ui-corner-all ui-shadow ui-mini' \" +\n            \"data-\" + ns + \"rel='popup'>\" + opts.columnBtnText + \"</a>\" );\n        popup = $( \"<div class='\" + opts.classes.popup + \"' id='\" + id + \"'></div>\" );\n        menu = $( \"<fieldset></fieldset>\" ).controlgroup();\n\n        // set extension here, send \"false\" to trigger build/rebuild\n        this._addToggles( menu, false );\n\n        menu.appendTo( popup );\n\n        fragment.appendChild( popup[ 0 ] );\n        fragment.appendChild( menuButton[ 0 ] );\n        table.before( fragment );\n\n        popup.popup();\n\n        return menu;\n    },\n\n    rebuild: function() {\n        this._super();\n\n        if ( this.options.mode === \"columntoggle\" ) {\n            // NOTE: rebuild passes \"false\", while refresh passes \"undefined\"\n            // both refresh the table, but inside addToggles, !false will be true,\n            // so a rebuild call can be indentified\n            this._refresh( false );\n        }\n    },\n\n    _refresh: function( create ) {\n        var headers, hiddenColumns, index;\n\n        // Calling _super() here updates this.headers\n        this._super( create );\n\n        if ( !create && this.options.mode === \"columntoggle\" ) {\n            headers = this.headers;\n            hiddenColumns = [];\n\n            // Find the index of the column header associated with each old checkbox among the\n            // post-refresh headers and, if the header is still there, make sure the corresponding\n            // column will be hidden if the pre-refresh checkbox indicates that the column is\n            // hidden by recording its index in the array of hidden columns.\n            this._menu.find( \"input\" ).each( function() {\n                var input = $( this ),\n                    header = input.jqmData( \"header\" ),\n                    index = headers.index( header[ 0 ] );\n\n                if ( index > -1 && !input.prop( \"checked\" ) ) {\n\n                    // The column header associated with /this/ checkbox is still present in the\n                    // post-refresh table and the checkbox is not checked, so the column associated\n                    // with this column header is currently hidden. Let's record that.\n                    hiddenColumns.push( index );\n                }\n            });\n\n            // columns not being replaced must be cleared from input toggle-locks\n            this._unlockCells( this.element.find( \".ui-table-cell-hidden, \" +\n                \".ui-table-cell-visible\" ) );\n\n            // update columntoggles and cells\n            this._addToggles( this._menu, create );\n\n            // At this point all columns are visible, so uncheck the checkboxes that correspond to\n            // those columns we've found to be hidden\n            for ( index = hiddenColumns.length - 1 ; index > -1 ; index-- ) {\n                headers.eq( hiddenColumns[ index ] ).jqmData( \"input\" )\n                    .prop( \"checked\", false )\n                    .checkboxradio( \"refresh\" )\n                    .trigger( \"change\" );\n            }\n        }\n    },\n\n    _setToggleState: function() {\n        this._menu.find( \"input\" ).each( function() {\n            var checkbox = $( this );\n\n            this.checked = checkbox.jqmData( \"cells\" ).eq( 0 ).css( \"display\" ) === \"table-cell\";\n            checkbox.checkboxradio( \"refresh\" );\n        });\n    },\n\n    _destroy: function() {\n        this._super();\n    }\n});\n\n})( jQuery );\n\n(function( $, undefined ) {\n\n$.widget( \"mobile.table\", $.mobile.table, {\n    options: {\n        mode: \"reflow\",\n        classes: $.extend( $.mobile.table.prototype.options.classes, {\n            reflowTable: \"ui-table-reflow\",\n            cellLabels: \"ui-table-cell-label\"\n        })\n    },\n\n    _create: function() {\n        this._super();\n\n        // If it's not reflow mode, return here.\n        if ( this.options.mode !== \"reflow\" ) {\n            return;\n        }\n\n        if ( !this.options.enhanced ) {\n            this.element.addClass( this.options.classes.reflowTable );\n\n            this._updateReflow();\n        }\n    },\n\n    rebuild: function() {\n        this._super();\n\n        if ( this.options.mode === \"reflow\" ) {\n            this._refresh( false );\n        }\n    },\n\n    _refresh: function( create ) {\n        this._super( create );\n        if ( !create && this.options.mode === \"reflow\" ) {\n            this._updateReflow( );\n        }\n    },\n\n    _updateReflow: function() {\n        var table = this,\n            opts = this.options;\n\n        // get headers in reverse order so that top-level headers are appended last\n        $( table.allHeaders.get().reverse() ).each( function() {\n            var cells = $( this ).jqmData( \"cells\" ),\n                colstart = $.mobile.getAttribute( this, \"colstart\" ),\n                hierarchyClass = cells.not( this ).filter( \"thead th\" ).length && \" ui-table-cell-label-top\",\n                contents = $( this ).clone().contents(),\n                iteration, filter;\n\n                if ( contents.length > 0  ) {\n\n                    if ( hierarchyClass ) {\n                        iteration = parseInt( this.getAttribute( \"colspan\" ), 10 );\n                        filter = \"\";\n\n                        if ( iteration ) {\n                            filter = \"td:nth-child(\"+ iteration +\"n + \" + ( colstart ) +\")\";\n                        }\n\n                        table._addLabels( cells.filter( filter ),\n                            opts.classes.cellLabels + hierarchyClass, contents );\n                    } else {\n                        table._addLabels( cells, opts.classes.cellLabels, contents );\n                    }\n\n                }\n        });\n    },\n\n    _addLabels: function( cells, label, contents ) {\n        if ( contents.length === 1 && contents[ 0 ].nodeName.toLowerCase() === \"abbr\" ) {\n            contents = contents.eq( 0 ).attr( \"title\" );\n        }\n        // .not fixes #6006\n        cells\n            .not( \":has(b.\" + label + \")\" )\n                .prepend( $( \"<b class='\" + label + \"'></b>\" ).append( contents ) );\n    }\n});\n\n})( jQuery );\n\n(function( $, undefined ) {\n\n// TODO rename filterCallback/deprecate and default to the item itself as the first argument\nvar defaultFilterCallback = function( index, searchValue ) {\n    return ( ( \"\" + ( $.mobile.getAttribute( this, \"filtertext\" ) || $( this ).text() ) )\n        .toLowerCase().indexOf( searchValue ) === -1 );\n};\n\n$.widget( \"mobile.filterable\", {\n\n    initSelector: \":jqmData(filter='true')\",\n\n    options: {\n        filterReveal: false,\n        filterCallback: defaultFilterCallback,\n        enhanced: false,\n        input: null,\n        children: \"> li, > option, > optgroup option, > tbody tr, > .ui-controlgroup-controls > .ui-btn, > .ui-controlgroup-controls > .ui-checkbox, > .ui-controlgroup-controls > .ui-radio\"\n    },\n\n    _create: function() {\n        var opts = this.options;\n\n        $.extend( this, {\n            _search: null,\n            _timer: 0\n        });\n\n        this._setInput( opts.input );\n        if ( !opts.enhanced ) {\n            this._filterItems( ( ( this._search && this._search.val() ) || \"\" ).toLowerCase() );\n        }\n    },\n\n    _onKeyUp: function() {\n        var val, lastval,\n            search = this._search;\n\n        if ( search ) {\n            val = search.val().toLowerCase(),\n            lastval = $.mobile.getAttribute( search[ 0 ], \"lastval\" ) + \"\";\n\n            if ( lastval && lastval === val ) {\n                // Execute the handler only once per value change\n                return;\n            }\n\n            if ( this._timer ) {\n                window.clearTimeout( this._timer );\n                this._timer = 0;\n            }\n\n            this._timer = this._delay( function() {\n                if ( this._trigger( \"beforefilter\", null, { input: search } ) === false ) {\n                    return false;\n                }\n\n                // Change val as lastval for next execution\n                search[ 0 ].setAttribute( \"data-\" + $.mobile.ns + \"lastval\", val );\n\n                this._filterItems( val );\n                this._timer = 0;\n            }, 250 );\n        }\n    },\n\n    _getFilterableItems: function() {\n        var elem = this.element,\n            children = this.options.children,\n            items = !children ? { length: 0 }:\n                $.isFunction( children ) ? children():\n                children.nodeName ? $( children ):\n                children.jquery ? children:\n                this.element.find( children );\n\n        if ( items.length === 0 ) {\n            items = elem.children();\n        }\n\n        return items;\n    },\n\n    _filterItems: function( val ) {\n        var idx, callback, length, dst,\n            show = [],\n            hide = [],\n            opts = this.options,\n            filterItems = this._getFilterableItems();\n\n        if ( val != null ) {\n            callback = opts.filterCallback || defaultFilterCallback;\n            length = filterItems.length;\n\n            // Partition the items into those to be hidden and those to be shown\n            for ( idx = 0 ; idx < length ; idx++ ) {\n                dst = ( callback.call( filterItems[ idx ], idx, val ) ) ? hide : show;\n                dst.push( filterItems[ idx ] );\n            }\n        }\n\n        // If nothing is hidden, then the decision whether to hide or show the items\n        // is based on the \"filterReveal\" option.\n        if ( hide.length === 0 ) {\n            filterItems[ ( opts.filterReveal && val.length === 0 ) ?\n                \"addClass\" : \"removeClass\" ]( \"ui-screen-hidden\" );\n        } else {\n            $( hide ).addClass( \"ui-screen-hidden\" );\n            $( show ).removeClass( \"ui-screen-hidden\" );\n        }\n\n        this._refreshChildWidget();\n\n        this._trigger( \"filter\", null, {\n            items: filterItems\n        });\n    },\n\n    // The Default implementation of _refreshChildWidget attempts to call\n    // refresh on collapsibleset, controlgroup, selectmenu, or listview\n    _refreshChildWidget: function() {\n        var widget, idx,\n            recognizedWidgets = [ \"collapsibleset\", \"selectmenu\", \"controlgroup\", \"listview\" ];\n\n        for ( idx = recognizedWidgets.length - 1 ; idx > -1 ; idx-- ) {\n            widget = recognizedWidgets[ idx ];\n            if ( $.mobile[ widget ] ) {\n                widget = this.element.data( \"mobile-\" + widget );\n                if ( widget && $.isFunction( widget.refresh ) ) {\n                    widget.refresh();\n                }\n            }\n        }\n    },\n\n    // TODO: When the input is not internal, do not even store it in this._search\n    _setInput: function ( selector ) {\n        var search = this._search;\n\n        // Stop a pending filter operation\n        if ( this._timer ) {\n            window.clearTimeout( this._timer );\n            this._timer = 0;\n        }\n\n        if ( search ) {\n            this._off( search, \"keyup change input\" );\n            search = null;\n        }\n\n        if ( selector ) {\n            search = selector.jquery ? selector:\n                selector.nodeName ? $( selector ):\n                this.document.find( selector );\n\n            this._on( search, {\n                keydown: \"_onKeyDown\",\n                keypress: \"_onKeyPress\",\n                keyup: \"_onKeyUp\",\n                change: \"_onKeyUp\",\n                input: \"_onKeyUp\"\n            });\n        }\n\n        this._search = search;\n    },\n\n    // Prevent form submission\n    _onKeyDown: function( event ) {\n        if ( event.keyCode === $.ui.keyCode.ENTER ) {\n            event.preventDefault();\n            this._preventKeyPress = true;\n        }\n    },\n\n    _onKeyPress: function( event ) {\n        if ( this._preventKeyPress ) {\n            event.preventDefault();\n            this._preventKeyPress = false;\n        }\n    },\n\n    _setOptions: function( options ) {\n        var refilter = !( ( options.filterReveal === undefined ) &&\n                ( options.filterCallback === undefined ) &&\n                ( options.children === undefined ) );\n\n        this._super( options );\n\n        if ( options.input !== undefined ) {\n            this._setInput( options.input );\n            refilter = true;\n        }\n\n        if ( refilter ) {\n            this.refresh();\n        }\n    },\n\n    _destroy: function() {\n        var opts = this.options,\n            items = this._getFilterableItems();\n\n        if ( opts.enhanced ) {\n            items.toggleClass( \"ui-screen-hidden\", opts.filterReveal );\n        } else {\n            items.removeClass( \"ui-screen-hidden\" );\n        }\n    },\n\n    refresh: function() {\n        if ( this._timer ) {\n            window.clearTimeout( this._timer );\n            this._timer = 0;\n        }\n        this._filterItems( ( ( this._search && this._search.val() ) || \"\" ).toLowerCase() );\n    }\n});\n\n})( jQuery );\n\n(function( $, undefined ) {\n\n// Create a function that will replace the _setOptions function of a widget,\n// and will pass the options on to the input of the filterable.\nvar replaceSetOptions = function( self, orig ) {\n        return function( options ) {\n            orig.call( this, options );\n            self._syncTextInputOptions( options );\n        };\n    },\n    rDividerListItem = /(^|\\s)ui-li-divider(\\s|$)/,\n    origDefaultFilterCallback = $.mobile.filterable.prototype.options.filterCallback;\n\n// Override the default filter callback with one that does not hide list dividers\n$.mobile.filterable.prototype.options.filterCallback = function( index, searchValue ) {\n    return !this.className.match( rDividerListItem ) &&\n        origDefaultFilterCallback.call( this, index, searchValue );\n};\n\n$.widget( \"mobile.filterable\", $.mobile.filterable, {\n    options: {\n        filterPlaceholder: \"Filter items...\",\n        filterTheme: null\n    },\n\n    _create: function() {\n        var idx, widgetName,\n            elem = this.element,\n            recognizedWidgets = [ \"collapsibleset\", \"selectmenu\", \"controlgroup\", \"listview\" ],\n            createHandlers = {};\n\n        this._super();\n\n        $.extend( this, {\n            _widget: null\n        });\n\n        for ( idx = recognizedWidgets.length - 1 ; idx > -1 ; idx-- ) {\n            widgetName = recognizedWidgets[ idx ];\n            if ( $.mobile[ widgetName ] ) {\n                if ( this._setWidget( elem.data( \"mobile-\" + widgetName ) ) ) {\n                    break;\n                } else {\n                    createHandlers[ widgetName + \"create\" ] = \"_handleCreate\";\n                }\n            }\n        }\n\n        if ( !this._widget ) {\n            this._on( elem, createHandlers );\n        }\n    },\n\n    _handleCreate: function( evt ) {\n        this._setWidget( this.element.data( \"mobile-\" + evt.type.substring( 0, evt.type.length - 6 ) ) );\n    },\n\n    _trigger: function( type, event, data ) {\n        if ( this._widget && this._widget.widgetFullName === \"mobile-listview\" &&\n            type === \"beforefilter\" ) {\n\n            // Also trigger listviewbeforefilter if this widget is also a listview\n            this._widget._trigger( \"beforefilter\", event, data );\n        }\n\n        // Passing back the response enables calling preventDefault()\n        return this._super( type, event, data );\n    },\n\n    _setWidget: function( widget ) {\n        if ( !this._widget && widget ) {\n            this._widget = widget;\n            this._widget._setOptions = replaceSetOptions( this, this._widget._setOptions );\n        }\n\n        if ( !!this._widget ) {\n            this._syncTextInputOptions( this._widget.options );\n            if ( this._widget.widgetName === \"listview\" ) {\n                this._widget.options.hideDividers = true;\n                this._widget.element.listview( \"refresh\" );\n            }\n        }\n\n        return !!this._widget;\n    },\n\n    _isSearchInternal: function() {\n        return ( this._search && this._search.jqmData( \"ui-filterable-\" + this.uuid + \"-internal\" ) );\n    },\n\n    _setInput: function( selector ) {\n        var opts = this.options,\n            updatePlaceholder = true,\n            textinputOpts = {};\n\n        if ( !selector ) {\n            if ( this._isSearchInternal() ) {\n\n                // Ignore the call to set a new input if the selector goes to falsy and\n                // the current textinput is already of the internally generated variety.\n                return;\n            } else {\n\n                // Generating a new textinput widget. No need to set the placeholder\n                // further down the function.\n                updatePlaceholder = false;\n                selector = $( \"<input \" +\n                    \"data-\" + $.mobile.ns + \"type='search' \" +\n                    \"placeholder='\" + opts.filterPlaceholder + \"'></input>\" )\n                    .jqmData( \"ui-filterable-\" + this.uuid + \"-internal\", true );\n                $( \"<form class='ui-filterable'></form>\" )\n                    .append( selector )\n                    .submit( function( evt ) {\n                        evt.preventDefault();\n                        selector.blur();\n                    })\n                    .insertBefore( this.element );\n                if ( $.mobile.textinput ) {\n                    if ( this.options.filterTheme != null ) {\n                        textinputOpts[ \"theme\" ] = opts.filterTheme;\n                    }\n\n                    selector.textinput( textinputOpts );\n                }\n            }\n        }\n\n        this._super( selector );\n\n        if ( this._isSearchInternal() && updatePlaceholder ) {\n            this._search.attr( \"placeholder\", this.options.filterPlaceholder );\n        }\n    },\n\n    _setOptions: function( options ) {\n        var ret = this._super( options );\n\n        // Need to set the filterPlaceholder after having established the search input\n        if ( options.filterPlaceholder !== undefined ) {\n            if ( this._isSearchInternal() ) {\n                this._search.attr( \"placeholder\", options.filterPlaceholder );\n            }\n        }\n\n        if ( options.filterTheme !== undefined && this._search && $.mobile.textinput ) {\n            this._search.textinput( \"option\", \"theme\", options.filterTheme );\n        }\n\n        return ret;\n    },\n\n    // The listview implementation accompanying this filterable backcompat layer will call\n    // filterable.refresh() after it's done refreshing the listview to make sure the filterable\n    // filters out any new items added. However, when the listview refresh has been initiated by\n    // the filterable itself, then such filtering has already taken place, and calling the\n    // filterable's refresh() method will cause an infinite recursion. We stop this by setting a\n    // flag that will cause the filterable's refresh() method to short-circuit.\n    _refreshChildWidget: function() {\n        this._refreshingChildWidget = true;\n        this._superApply( arguments );\n        this._refreshingChildWidget = false;\n    },\n\n    refresh: function() {\n        if ( !this._refreshingChildWidget ) {\n            this._superApply( arguments );\n        }\n    },\n\n    _destroy: function() {\n        if ( this._isSearchInternal() ) {\n            this._search.remove();\n        }\n        this._super();\n    },\n\n    _syncTextInputOptions: function( options ) {\n        var idx,\n            textinputOptions = {};\n\n        // We only sync options if the filterable's textinput is of the internally\n        // generated variety, rather than one specified by the user.\n        if ( this._isSearchInternal() && $.mobile.textinput ) {\n\n            // Apply only the options understood by textinput\n            for ( idx in $.mobile.textinput.prototype.options ) {\n                if ( options[ idx ] !== undefined ) {\n                    if ( idx === \"theme\" && this.options.filterTheme != null ) {\n                        textinputOptions[ idx ] = this.options.filterTheme;\n                    } else {\n                        textinputOptions[ idx ] = options[ idx ];\n                    }\n                }\n            }\n            this._search.textinput( \"option\", textinputOptions );\n        }\n    }\n});\n\n// Instantiate a filterable on a listview that has the data-filter=\"true\" attribute\n// This is not necessary for static content, because the auto-enhance takes care of instantiating\n// the filterable upon encountering data-filter=\"true\". However, because of 1.3.x it is expected\n// that a listview with data-filter=\"true\" will be filterable even if you just instantiate a\n// listview on it. The extension below ensures that this continues to happen in 1.4.x.\n$.widget( \"mobile.listview\", $.mobile.listview, {\n    options: {\n        filter: false\n    },\n    _create: function() {\n        if ( this.options.filter === true &&\n                !this.element.data( \"mobile-filterable\" ) ) {\n            this.element.filterable();\n        }\n        return this._super();\n    },\n\n    refresh: function() {\n        var filterable;\n\n        this._superApply( arguments );\n\n        if ( this.options.filter === true ) {\n            filterable = this.element.data( \"mobile-filterable\" );\n\n            if ( filterable ) {\n                filterable.refresh();\n            }\n        }\n    }\n});\n\n})( jQuery );\n\n/*!\n * jQuery UI Tabs fadf2b312a05040436451c64bbfaf4814bc62c56\n * http://jqueryui.com\n *\n * Copyright 2013 jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/tabs/\n *\n * Depends:\n *    jquery.ui.core.js\n *    jquery.ui.widget.js\n */\n(function( $, undefined ) {\n\nvar tabId = 0,\n    rhash = /#.*$/;\n\nfunction getNextTabId() {\n    return ++tabId;\n}\n\nfunction isLocal( anchor ) {\n    return anchor.hash.length > 1 &&\n        decodeURIComponent( anchor.href.replace( rhash, \"\" ) ) ===\n            decodeURIComponent( location.href.replace( rhash, \"\" ) );\n}\n\n$.widget( \"ui.tabs\", {\n    version: \"fadf2b312a05040436451c64bbfaf4814bc62c56\",\n    delay: 300,\n    options: {\n        active: null,\n        collapsible: false,\n        event: \"click\",\n        heightStyle: \"content\",\n        hide: null,\n        show: null,\n\n        // callbacks\n        activate: null,\n        beforeActivate: null,\n        beforeLoad: null,\n        load: null\n    },\n\n    _create: function() {\n        var that = this,\n            options = this.options;\n\n        this.running = false;\n\n        this.element\n            .addClass( \"ui-tabs ui-widget ui-widget-content ui-corner-all\" )\n            .toggleClass( \"ui-tabs-collapsible\", options.collapsible )\n            // Prevent users from focusing disabled tabs via click\n            .delegate( \".ui-tabs-nav > li\", \"mousedown\" + this.eventNamespace, function( event ) {\n                if ( $( this ).is( \".ui-state-disabled\" ) ) {\n                    event.preventDefault();\n                }\n            })\n            // support: IE <9\n            // Preventing the default action in mousedown doesn't prevent IE\n            // from focusing the element, so if the anchor gets focused, blur.\n            // We don't have to worry about focusing the previously focused\n            // element since clicking on a non-focusable element should focus\n            // the body anyway.\n            .delegate( \".ui-tabs-anchor\", \"focus\" + this.eventNamespace, function() {\n                if ( $( this ).closest( \"li\" ).is( \".ui-state-disabled\" ) ) {\n                    this.blur();\n                }\n            });\n\n        this._processTabs();\n        options.active = this._initialActive();\n\n        // Take disabling tabs via class attribute from HTML\n        // into account and update option properly.\n        if ( $.isArray( options.disabled ) ) {\n            options.disabled = $.unique( options.disabled.concat(\n                $.map( this.tabs.filter( \".ui-state-disabled\" ), function( li ) {\n                    return that.tabs.index( li );\n                })\n            ) ).sort();\n        }\n\n        // check for length avoids error when initializing empty list\n        if ( this.options.active !== false && this.anchors.length ) {\n            this.active = this._findActive( options.active );\n        } else {\n            this.active = $();\n        }\n\n        this._refresh();\n\n        if ( this.active.length ) {\n            this.load( options.active );\n        }\n    },\n\n    _initialActive: function() {\n        var active = this.options.active,\n            collapsible = this.options.collapsible,\n            locationHash = location.hash.substring( 1 );\n\n        if ( active === null ) {\n            // check the fragment identifier in the URL\n            if ( locationHash ) {\n                this.tabs.each(function( i, tab ) {\n                    if ( $( tab ).attr( \"aria-controls\" ) === locationHash ) {\n                        active = i;\n                        return false;\n                    }\n                });\n            }\n\n            // check for a tab marked active via a class\n            if ( active === null ) {\n                active = this.tabs.index( this.tabs.filter( \".ui-tabs-active\" ) );\n            }\n\n            // no active tab, set to false\n            if ( active === null || active === -1 ) {\n                active = this.tabs.length ? 0 : false;\n            }\n        }\n\n        // handle numbers: negative, out of range\n        if ( active !== false ) {\n            active = this.tabs.index( this.tabs.eq( active ) );\n            if ( active === -1 ) {\n                active = collapsible ? false : 0;\n            }\n        }\n\n        // don't allow collapsible: false and active: false\n        if ( !collapsible && active === false && this.anchors.length ) {\n            active = 0;\n        }\n\n        return active;\n    },\n\n    _getCreateEventData: function() {\n        return {\n            tab: this.active,\n            panel: !this.active.length ? $() : this._getPanelForTab( this.active )\n        };\n    },\n\n    _tabKeydown: function( event ) {\n        var focusedTab = $( this.document[0].activeElement ).closest( \"li\" ),\n            selectedIndex = this.tabs.index( focusedTab ),\n            goingForward = true;\n\n        if ( this._handlePageNav( event ) ) {\n            return;\n        }\n\n        switch ( event.keyCode ) {\n            case $.ui.keyCode.RIGHT:\n            case $.ui.keyCode.DOWN:\n                selectedIndex++;\n                break;\n            case $.ui.keyCode.UP:\n            case $.ui.keyCode.LEFT:\n                goingForward = false;\n                selectedIndex--;\n                break;\n            case $.ui.keyCode.END:\n                selectedIndex = this.anchors.length - 1;\n                break;\n            case $.ui.keyCode.HOME:\n                selectedIndex = 0;\n                break;\n            case $.ui.keyCode.SPACE:\n                // Activate only, no collapsing\n                event.preventDefault();\n                clearTimeout( this.activating );\n                this._activate( selectedIndex );\n                return;\n            case $.ui.keyCode.ENTER:\n                // Toggle (cancel delayed activation, allow collapsing)\n                event.preventDefault();\n                clearTimeout( this.activating );\n                // Determine if we should collapse or activate\n                this._activate( selectedIndex === this.options.active ? false : selectedIndex );\n                return;\n            default:\n                return;\n        }\n\n        // Focus the appropriate tab, based on which key was pressed\n        event.preventDefault();\n        clearTimeout( this.activating );\n        selectedIndex = this._focusNextTab( selectedIndex, goingForward );\n\n        // Navigating with control key will prevent automatic activation\n        if ( !event.ctrlKey ) {\n            // Update aria-selected immediately so that AT think the tab is already selected.\n            // Otherwise AT may confuse the user by stating that they need to activate the tab,\n            // but the tab will already be activated by the time the announcement finishes.\n            focusedTab.attr( \"aria-selected\", \"false\" );\n            this.tabs.eq( selectedIndex ).attr( \"aria-selected\", \"true\" );\n\n            this.activating = this._delay(function() {\n                this.option( \"active\", selectedIndex );\n            }, this.delay );\n        }\n    },\n\n    _panelKeydown: function( event ) {\n        if ( this._handlePageNav( event ) ) {\n            return;\n        }\n\n        // Ctrl+up moves focus to the current tab\n        if ( event.ctrlKey && event.keyCode === $.ui.keyCode.UP ) {\n            event.preventDefault();\n            this.active.focus();\n        }\n    },\n\n    // Alt+page up/down moves focus to the previous/next tab (and activates)\n    _handlePageNav: function( event ) {\n        if ( event.altKey && event.keyCode === $.ui.keyCode.PAGE_UP ) {\n            this._activate( this._focusNextTab( this.options.active - 1, false ) );\n            return true;\n        }\n        if ( event.altKey && event.keyCode === $.ui.keyCode.PAGE_DOWN ) {\n            this._activate( this._focusNextTab( this.options.active + 1, true ) );\n            return true;\n        }\n    },\n\n    _findNextTab: function( index, goingForward ) {\n        var lastTabIndex = this.tabs.length - 1;\n\n        function constrain() {\n            if ( index > lastTabIndex ) {\n                index = 0;\n            }\n            if ( index < 0 ) {\n                index = lastTabIndex;\n            }\n            return index;\n        }\n\n        while ( $.inArray( constrain(), this.options.disabled ) !== -1 ) {\n            index = goingForward ? index + 1 : index - 1;\n        }\n\n        return index;\n    },\n\n    _focusNextTab: function( index, goingForward ) {\n        index = this._findNextTab( index, goingForward );\n        this.tabs.eq( index ).focus();\n        return index;\n    },\n\n    _setOption: function( key, value ) {\n        if ( key === \"active\" ) {\n            // _activate() will handle invalid values and update this.options\n            this._activate( value );\n            return;\n        }\n\n        if ( key === \"disabled\" ) {\n            // don't use the widget factory's disabled handling\n            this._setupDisabled( value );\n            return;\n        }\n\n        this._super( key, value);\n\n        if ( key === \"collapsible\" ) {\n            this.element.toggleClass( \"ui-tabs-collapsible\", value );\n            // Setting collapsible: false while collapsed; open first panel\n            if ( !value && this.options.active === false ) {\n                this._activate( 0 );\n            }\n        }\n\n        if ( key === \"event\" ) {\n            this._setupEvents( value );\n        }\n\n        if ( key === \"heightStyle\" ) {\n            this._setupHeightStyle( value );\n        }\n    },\n\n    _tabId: function( tab ) {\n        return tab.attr( \"aria-controls\" ) || \"ui-tabs-\" + getNextTabId();\n    },\n\n    _sanitizeSelector: function( hash ) {\n        return hash ? hash.replace( /[!\"$%&'()*+,.\\/:;<=>?@\\[\\]\\^`{|}~]/g, \"\\\\$&\" ) : \"\";\n    },\n\n    refresh: function() {\n        var options = this.options,\n            lis = this.tablist.children( \":has(a[href])\" );\n\n        // get disabled tabs from class attribute from HTML\n        // this will get converted to a boolean if needed in _refresh()\n        options.disabled = $.map( lis.filter( \".ui-state-disabled\" ), function( tab ) {\n            return lis.index( tab );\n        });\n\n        this._processTabs();\n\n        // was collapsed or no tabs\n        if ( options.active === false || !this.anchors.length ) {\n            options.active = false;\n            this.active = $();\n        // was active, but active tab is gone\n        } else if ( this.active.length && !$.contains( this.tablist[ 0 ], this.active[ 0 ] ) ) {\n            // all remaining tabs are disabled\n            if ( this.tabs.length === options.disabled.length ) {\n                options.active = false;\n                this.active = $();\n            // activate previous tab\n            } else {\n                this._activate( this._findNextTab( Math.max( 0, options.active - 1 ), false ) );\n            }\n        // was active, active tab still exists\n        } else {\n            // make sure active index is correct\n            options.active = this.tabs.index( this.active );\n        }\n\n        this._refresh();\n    },\n\n    _refresh: function() {\n        this._setupDisabled( this.options.disabled );\n        this._setupEvents( this.options.event );\n        this._setupHeightStyle( this.options.heightStyle );\n\n        this.tabs.not( this.active ).attr({\n            \"aria-selected\": \"false\",\n            tabIndex: -1\n        });\n        this.panels.not( this._getPanelForTab( this.active ) )\n            .hide()\n            .attr({\n                \"aria-expanded\": \"false\",\n                \"aria-hidden\": \"true\"\n            });\n\n        // Make sure one tab is in the tab order\n        if ( !this.active.length ) {\n            this.tabs.eq( 0 ).attr( \"tabIndex\", 0 );\n        } else {\n            this.active\n                .addClass( \"ui-tabs-active ui-state-active\" )\n                .attr({\n                    \"aria-selected\": \"true\",\n                    tabIndex: 0\n                });\n            this._getPanelForTab( this.active )\n                .show()\n                .attr({\n                    \"aria-expanded\": \"true\",\n                    \"aria-hidden\": \"false\"\n                });\n        }\n    },\n\n    _processTabs: function() {\n        var that = this;\n\n        this.tablist = this._getList()\n            .addClass( \"ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all\" )\n            .attr( \"role\", \"tablist\" );\n\n        this.tabs = this.tablist.find( \"> li:has(a[href])\" )\n            .addClass( \"ui-state-default ui-corner-top\" )\n            .attr({\n                role: \"tab\",\n                tabIndex: -1\n            });\n\n        this.anchors = this.tabs.map(function() {\n                return $( \"a\", this )[ 0 ];\n            })\n            .addClass( \"ui-tabs-anchor\" )\n            .attr({\n                role: \"presentation\",\n                tabIndex: -1\n            });\n\n        this.panels = $();\n\n        this.anchors.each(function( i, anchor ) {\n            var selector, panel, panelId,\n                anchorId = $( anchor ).uniqueId().attr( \"id\" ),\n                tab = $( anchor ).closest( \"li\" ),\n                originalAriaControls = tab.attr( \"aria-controls\" );\n\n            // inline tab\n            if ( isLocal( anchor ) ) {\n                selector = anchor.hash;\n                panel = that.element.find( that._sanitizeSelector( selector ) );\n            // remote tab\n            } else {\n                panelId = that._tabId( tab );\n                selector = \"#\" + panelId;\n                panel = that.element.find( selector );\n                if ( !panel.length ) {\n                    panel = that._createPanel( panelId );\n                    panel.insertAfter( that.panels[ i - 1 ] || that.tablist );\n                }\n                panel.attr( \"aria-live\", \"polite\" );\n            }\n\n            if ( panel.length) {\n                that.panels = that.panels.add( panel );\n            }\n            if ( originalAriaControls ) {\n                tab.data( \"ui-tabs-aria-controls\", originalAriaControls );\n            }\n            tab.attr({\n                \"aria-controls\": selector.substring( 1 ),\n                \"aria-labelledby\": anchorId\n            });\n            panel.attr( \"aria-labelledby\", anchorId );\n        });\n\n        this.panels\n            .addClass( \"ui-tabs-panel ui-widget-content ui-corner-bottom\" )\n            .attr( \"role\", \"tabpanel\" );\n    },\n\n    // allow overriding how to find the list for rare usage scenarios (#7715)\n    _getList: function() {\n        return this.element.find( \"ol,ul\" ).eq( 0 );\n    },\n\n    _createPanel: function( id ) {\n        return $( \"<div>\" )\n            .attr( \"id\", id )\n            .addClass( \"ui-tabs-panel ui-widget-content ui-corner-bottom\" )\n            .data( \"ui-tabs-destroy\", true );\n    },\n\n    _setupDisabled: function( disabled ) {\n        if ( $.isArray( disabled ) ) {\n            if ( !disabled.length ) {\n                disabled = false;\n            } else if ( disabled.length === this.anchors.length ) {\n                disabled = true;\n            }\n        }\n\n        // disable tabs\n        for ( var i = 0, li; ( li = this.tabs[ i ] ); i++ ) {\n            if ( disabled === true || $.inArray( i, disabled ) !== -1 ) {\n                $( li )\n                    .addClass( \"ui-state-disabled\" )\n                    .attr( \"aria-disabled\", \"true\" );\n            } else {\n                $( li )\n                    .removeClass( \"ui-state-disabled\" )\n                    .removeAttr( \"aria-disabled\" );\n            }\n        }\n\n        this.options.disabled = disabled;\n    },\n\n    _setupEvents: function( event ) {\n        var events = {\n            click: function( event ) {\n                event.preventDefault();\n            }\n        };\n        if ( event ) {\n            $.each( event.split(\" \"), function( index, eventName ) {\n                events[ eventName ] = \"_eventHandler\";\n            });\n        }\n\n        this._off( this.anchors.add( this.tabs ).add( this.panels ) );\n        this._on( this.anchors, events );\n        this._on( this.tabs, { keydown: \"_tabKeydown\" } );\n        this._on( this.panels, { keydown: \"_panelKeydown\" } );\n\n        this._focusable( this.tabs );\n        this._hoverable( this.tabs );\n    },\n\n    _setupHeightStyle: function( heightStyle ) {\n        var maxHeight,\n            parent = this.element.parent();\n\n        if ( heightStyle === \"fill\" ) {\n            maxHeight = parent.height();\n            maxHeight -= this.element.outerHeight() - this.element.height();\n\n            this.element.siblings( \":visible\" ).each(function() {\n                var elem = $( this ),\n                    position = elem.css( \"position\" );\n\n                if ( position === \"absolute\" || position === \"fixed\" ) {\n                    return;\n                }\n                maxHeight -= elem.outerHeight( true );\n            });\n\n            this.element.children().not( this.panels ).each(function() {\n                maxHeight -= $( this ).outerHeight( true );\n            });\n\n            this.panels.each(function() {\n                $( this ).height( Math.max( 0, maxHeight -\n                    $( this ).innerHeight() + $( this ).height() ) );\n            })\n            .css( \"overflow\", \"auto\" );\n        } else if ( heightStyle === \"auto\" ) {\n            maxHeight = 0;\n            this.panels.each(function() {\n                maxHeight = Math.max( maxHeight, $( this ).height( \"\" ).height() );\n            }).height( maxHeight );\n        }\n    },\n\n    _eventHandler: function( event ) {\n        var options = this.options,\n            active = this.active,\n            anchor = $( event.currentTarget ),\n            tab = anchor.closest( \"li\" ),\n            clickedIsActive = tab[ 0 ] === active[ 0 ],\n            collapsing = clickedIsActive && options.collapsible,\n            toShow = collapsing ? $() : this._getPanelForTab( tab ),\n            toHide = !active.length ? $() : this._getPanelForTab( active ),\n            eventData = {\n                oldTab: active,\n                oldPanel: toHide,\n                newTab: collapsing ? $() : tab,\n                newPanel: toShow\n            };\n\n        event.preventDefault();\n\n        if ( tab.hasClass( \"ui-state-disabled\" ) ||\n                // tab is already loading\n                tab.hasClass( \"ui-tabs-loading\" ) ||\n                // can't switch durning an animation\n                this.running ||\n                // click on active header, but not collapsible\n                ( clickedIsActive && !options.collapsible ) ||\n                // allow canceling activation\n                ( this._trigger( \"beforeActivate\", event, eventData ) === false ) ) {\n            return;\n        }\n\n        options.active = collapsing ? false : this.tabs.index( tab );\n\n        this.active = clickedIsActive ? $() : tab;\n        if ( this.xhr ) {\n            this.xhr.abort();\n        }\n\n        if ( !toHide.length && !toShow.length ) {\n            $.error( \"jQuery UI Tabs: Mismatching fragment identifier.\" );\n        }\n\n        if ( toShow.length ) {\n            this.load( this.tabs.index( tab ), event );\n        }\n        this._toggle( event, eventData );\n    },\n\n    // handles show/hide for selecting tabs\n    _toggle: function( event, eventData ) {\n        var that = this,\n            toShow = eventData.newPanel,\n            toHide = eventData.oldPanel;\n\n        this.running = true;\n\n        function complete() {\n            that.running = false;\n            that._trigger( \"activate\", event, eventData );\n        }\n\n        function show() {\n            eventData.newTab.closest( \"li\" ).addClass( \"ui-tabs-active ui-state-active\" );\n\n            if ( toShow.length && that.options.show ) {\n                that._show( toShow, that.options.show, complete );\n            } else {\n                toShow.show();\n                complete();\n            }\n        }\n\n        // start out by hiding, then showing, then completing\n        if ( toHide.length && this.options.hide ) {\n            this._hide( toHide, this.options.hide, function() {\n                eventData.oldTab.closest( \"li\" ).removeClass( \"ui-tabs-active ui-state-active\" );\n                show();\n            });\n        } else {\n            eventData.oldTab.closest( \"li\" ).removeClass( \"ui-tabs-active ui-state-active\" );\n            toHide.hide();\n            show();\n        }\n\n        toHide.attr({\n            \"aria-expanded\": \"false\",\n            \"aria-hidden\": \"true\"\n        });\n        eventData.oldTab.attr( \"aria-selected\", \"false\" );\n        // If we're switching tabs, remove the old tab from the tab order.\n        // If we're opening from collapsed state, remove the previous tab from the tab order.\n        // If we're collapsing, then keep the collapsing tab in the tab order.\n        if ( toShow.length && toHide.length ) {\n            eventData.oldTab.attr( \"tabIndex\", -1 );\n        } else if ( toShow.length ) {\n            this.tabs.filter(function() {\n                return $( this ).attr( \"tabIndex\" ) === 0;\n            })\n            .attr( \"tabIndex\", -1 );\n        }\n\n        toShow.attr({\n            \"aria-expanded\": \"true\",\n            \"aria-hidden\": \"false\"\n        });\n        eventData.newTab.attr({\n            \"aria-selected\": \"true\",\n            tabIndex: 0\n        });\n    },\n\n    _activate: function( index ) {\n        var anchor,\n            active = this._findActive( index );\n\n        // trying to activate the already active panel\n        if ( active[ 0 ] === this.active[ 0 ] ) {\n            return;\n        }\n\n        // trying to collapse, simulate a click on the current active header\n        if ( !active.length ) {\n            active = this.active;\n        }\n\n        anchor = active.find( \".ui-tabs-anchor\" )[ 0 ];\n        this._eventHandler({\n            target: anchor,\n            currentTarget: anchor,\n            preventDefault: $.noop\n        });\n    },\n\n    _findActive: function( index ) {\n        return index === false ? $() : this.tabs.eq( index );\n    },\n\n    _getIndex: function( index ) {\n        // meta-function to give users option to provide a href string instead of a numerical index.\n        if ( typeof index === \"string\" ) {\n            index = this.anchors.index( this.anchors.filter( \"[href$='\" + index + \"']\" ) );\n        }\n\n        return index;\n    },\n\n    _destroy: function() {\n        if ( this.xhr ) {\n            this.xhr.abort();\n        }\n\n        this.element.removeClass( \"ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible\" );\n\n        this.tablist\n            .removeClass( \"ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all\" )\n            .removeAttr( \"role\" );\n\n        this.anchors\n            .removeClass( \"ui-tabs-anchor\" )\n            .removeAttr( \"role\" )\n            .removeAttr( \"tabIndex\" )\n            .removeUniqueId();\n\n        this.tabs.add( this.panels ).each(function() {\n            if ( $.data( this, \"ui-tabs-destroy\" ) ) {\n                $( this ).remove();\n            } else {\n                $( this )\n                    .removeClass( \"ui-state-default ui-state-active ui-state-disabled \" +\n                        \"ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel\" )\n                    .removeAttr( \"tabIndex\" )\n                    .removeAttr( \"aria-live\" )\n                    .removeAttr( \"aria-busy\" )\n                    .removeAttr( \"aria-selected\" )\n                    .removeAttr( \"aria-labelledby\" )\n                    .removeAttr( \"aria-hidden\" )\n                    .removeAttr( \"aria-expanded\" )\n                    .removeAttr( \"role\" );\n            }\n        });\n\n        this.tabs.each(function() {\n            var li = $( this ),\n                prev = li.data( \"ui-tabs-aria-controls\" );\n            if ( prev ) {\n                li\n                    .attr( \"aria-controls\", prev )\n                    .removeData( \"ui-tabs-aria-controls\" );\n            } else {\n                li.removeAttr( \"aria-controls\" );\n            }\n        });\n\n        this.panels.show();\n\n        if ( this.options.heightStyle !== \"content\" ) {\n            this.panels.css( \"height\", \"\" );\n        }\n    },\n\n    enable: function( index ) {\n        var disabled = this.options.disabled;\n        if ( disabled === false ) {\n            return;\n        }\n\n        if ( index === undefined ) {\n            disabled = false;\n        } else {\n            index = this._getIndex( index );\n            if ( $.isArray( disabled ) ) {\n                disabled = $.map( disabled, function( num ) {\n                    return num !== index ? num : null;\n                });\n            } else {\n                disabled = $.map( this.tabs, function( li, num ) {\n                    return num !== index ? num : null;\n                });\n            }\n        }\n        this._setupDisabled( disabled );\n    },\n\n    disable: function( index ) {\n        var disabled = this.options.disabled;\n        if ( disabled === true ) {\n            return;\n        }\n\n        if ( index === undefined ) {\n            disabled = true;\n        } else {\n            index = this._getIndex( index );\n            if ( $.inArray( index, disabled ) !== -1 ) {\n                return;\n            }\n            if ( $.isArray( disabled ) ) {\n                disabled = $.merge( [ index ], disabled ).sort();\n            } else {\n                disabled = [ index ];\n            }\n        }\n        this._setupDisabled( disabled );\n    },\n\n    load: function( index, event ) {\n        index = this._getIndex( index );\n        var that = this,\n            tab = this.tabs.eq( index ),\n            anchor = tab.find( \".ui-tabs-anchor\" ),\n            panel = this._getPanelForTab( tab ),\n            eventData = {\n                tab: tab,\n                panel: panel\n            };\n\n        // not remote\n        if ( isLocal( anchor[ 0 ] ) ) {\n            return;\n        }\n\n        this.xhr = $.ajax( this._ajaxSettings( anchor, event, eventData ) );\n\n        // support: jQuery <1.8\n        // jQuery <1.8 returns false if the request is canceled in beforeSend,\n        // but as of 1.8, $.ajax() always returns a jqXHR object.\n        if ( this.xhr && this.xhr.statusText !== \"canceled\" ) {\n            tab.addClass( \"ui-tabs-loading\" );\n            panel.attr( \"aria-busy\", \"true\" );\n\n            this.xhr\n                .success(function( response ) {\n                    // support: jQuery <1.8\n                    // http://bugs.jquery.com/ticket/11778\n                    setTimeout(function() {\n                        panel.html( response );\n                        that._trigger( \"load\", event, eventData );\n                    }, 1 );\n                })\n                .complete(function( jqXHR, status ) {\n                    // support: jQuery <1.8\n                    // http://bugs.jquery.com/ticket/11778\n                    setTimeout(function() {\n                        if ( status === \"abort\" ) {\n                            that.panels.stop( false, true );\n                        }\n\n                        tab.removeClass( \"ui-tabs-loading\" );\n                        panel.removeAttr( \"aria-busy\" );\n\n                        if ( jqXHR === that.xhr ) {\n                            delete that.xhr;\n                        }\n                    }, 1 );\n                });\n        }\n    },\n\n    _ajaxSettings: function( anchor, event, eventData ) {\n        var that = this;\n        return {\n            url: anchor.attr( \"href\" ),\n            beforeSend: function( jqXHR, settings ) {\n                return that._trigger( \"beforeLoad\", event,\n                    $.extend( { jqXHR : jqXHR, ajaxSettings: settings }, eventData ) );\n            }\n        };\n    },\n\n    _getPanelForTab: function( tab ) {\n        var id = $( tab ).attr( \"aria-controls\" );\n        return this.element.find( this._sanitizeSelector( \"#\" + id ) );\n    }\n});\n\n})( jQuery );\n\n(function( $, undefined ) {\n\n})( jQuery );\n\n(function( $, window ) {\n\n    $.mobile.iosorientationfixEnabled = true;\n\n    // This fix addresses an iOS bug, so return early if the UA claims it's something else.\n    var ua = navigator.userAgent,\n        zoom,\n        evt, x, y, z, aig;\n    if ( !( /iPhone|iPad|iPod/.test( navigator.platform ) && /OS [1-5]_[0-9_]* like Mac OS X/i.test( ua ) && ua.indexOf( \"AppleWebKit\" ) > -1 ) ) {\n        $.mobile.iosorientationfixEnabled = false;\n        return;\n    }\n\n    zoom = $.mobile.zoom;\n\n    function checkTilt( e ) {\n        evt = e.originalEvent;\n        aig = evt.accelerationIncludingGravity;\n\n        x = Math.abs( aig.x );\n        y = Math.abs( aig.y );\n        z = Math.abs( aig.z );\n\n        // If portrait orientation and in one of the danger zones\n        if ( !window.orientation && ( x > 7 || ( ( z > 6 && y < 8 || z < 8 && y > 6 ) && x > 5 ) ) ) {\n                if ( zoom.enabled ) {\n                    zoom.disable();\n                }\n        }    else if ( !zoom.enabled ) {\n                zoom.enable();\n        }\n    }\n\n    $.mobile.document.on( \"mobileinit\", function() {\n        if ( $.mobile.iosorientationfixEnabled ) {\n            $.mobile.window\n                .bind( \"orientationchange.iosorientationfix\", zoom.enable )\n                .bind( \"devicemotion.iosorientationfix\", checkTilt );\n        }\n    });\n\n}( jQuery, this ));\n\n(function( $, window, undefined ) {\n    var    $html = $( \"html\" ),\n        $window = $.mobile.window;\n\n    //remove initial build class (only present on first pageshow)\n    function hideRenderingClass() {\n        $html.removeClass( \"ui-mobile-rendering\" );\n    }\n\n    // trigger mobileinit event - useful hook for configuring $.mobile settings before they're used\n    $( window.document ).trigger( \"mobileinit\" );\n\n    // support conditions\n    // if device support condition(s) aren't met, leave things as they are -> a basic, usable experience,\n    // otherwise, proceed with the enhancements\n    if ( !$.mobile.gradeA() ) {\n        return;\n    }\n\n    // override ajaxEnabled on platforms that have known conflicts with hash history updates\n    // or generally work better browsing in regular http for full page refreshes (BB5, Opera Mini)\n    if ( $.mobile.ajaxBlacklist ) {\n        $.mobile.ajaxEnabled = false;\n    }\n\n    // Add mobile, initial load \"rendering\" classes to docEl\n    $html.addClass( \"ui-mobile ui-mobile-rendering\" );\n\n    // This is a fallback. If anything goes wrong (JS errors, etc), or events don't fire,\n    // this ensures the rendering class is removed after 5 seconds, so content is visible and accessible\n    setTimeout( hideRenderingClass, 5000 );\n\n    $.extend( $.mobile, {\n        // find and enhance the pages in the dom and transition to the first page.\n        initializePage: function() {\n            // find present pages\n            var path = $.mobile.path,\n                $pages = $( \":jqmData(role='page'), :jqmData(role='dialog')\" ),\n                hash = path.stripHash( path.stripQueryParams(path.parseLocation().hash) ),\n                theLocation = $.mobile.path.parseLocation(),\n                hashPage = hash ? document.getElementById( hash ) : undefined;\n\n            // if no pages are found, create one with body's inner html\n            if ( !$pages.length ) {\n                $pages = $( \"body\" ).wrapInner( \"<div data-\" + $.mobile.ns + \"role='page'></div>\" ).children( 0 );\n            }\n\n            // add dialogs, set data-url attrs\n            $pages.each(function() {\n                var $this = $( this );\n\n                // unless the data url is already set set it to the pathname\n                if ( !$this[ 0 ].getAttribute( \"data-\" + $.mobile.ns + \"url\" ) ) {\n                    $this.attr( \"data-\" + $.mobile.ns + \"url\", $this.attr( \"id\" ) ||\n                        path.convertUrlToDataUrl( theLocation.pathname + theLocation.search ) );\n                }\n            });\n\n            // define first page in dom case one backs out to the directory root (not always the first page visited, but defined as fallback)\n            $.mobile.firstPage = $pages.first();\n\n            // define page container\n            $.mobile.pageContainer = $.mobile.firstPage\n                .parent()\n                .addClass( \"ui-mobile-viewport\" )\n                .pagecontainer();\n\n            // initialize navigation events now, after mobileinit has occurred and the page container\n            // has been created but before the rest of the library is alerted to that fact\n            $.mobile.navreadyDeferred.resolve();\n\n            // alert listeners that the pagecontainer has been determined for binding\n            // to events triggered on it\n            $window.trigger( \"pagecontainercreate\" );\n\n            // cue page loading message\n            $.mobile.loading( \"show\" );\n\n            //remove initial build class (only present on first pageshow)\n            hideRenderingClass();\n\n            // if hashchange listening is disabled, there's no hash deeplink,\n            // the hash is not valid (contains more than one # or does not start with #)\n            // or there is no page with that hash, change to the first page in the DOM\n            // Remember, however, that the hash can also be a path!\n            if ( ! ( $.mobile.hashListeningEnabled &&\n                $.mobile.path.isHashValid( location.hash ) &&\n                ( $( hashPage ).is( \":jqmData(role='page')\" ) ||\n                    $.mobile.path.isPath( hash ) ||\n                    hash === $.mobile.dialogHashKey ) ) ) {\n\n                // make sure to set initial popstate state if it exists\n                // so that navigation back to the initial page works properly\n                if ( $.event.special.navigate.isPushStateEnabled() ) {\n                    $.mobile.navigate.navigator.squash( path.parseLocation().href );\n                }\n\n                $.mobile.changePage( $.mobile.firstPage, {\n                    transition: \"none\",\n                    reverse: true,\n                    changeHash: false,\n                    fromHashChange: true\n                });\n            } else {\n                // trigger hashchange or navigate to squash and record the correct\n                // history entry for an initial hash path\n                if ( !$.event.special.navigate.isPushStateEnabled() ) {\n                    $window.trigger( \"hashchange\", [true] );\n                } else {\n                    // TODO figure out how to simplify this interaction with the initial history entry\n                    // at the bottom js/navigate/navigate.js\n                    $.mobile.navigate.history.stack = [];\n                    $.mobile.navigate( $.mobile.path.isPath( location.hash ) ? location.hash : location.href );\n                }\n            }\n        }\n    });\n\n    $(function() {\n        //Run inlineSVG support test\n        $.support.inlineSVG();\n\n        // check which scrollTop value should be used by scrolling to 1 immediately at domready\n        // then check what the scroll top is. Android will report 0... others 1\n        // note that this initial scroll won't hide the address bar. It's just for the check.\n\n        // hide iOS browser chrome on load if hideUrlBar is true this is to try and do it as soon as possible\n        if ( $.mobile.hideUrlBar ) {\n            window.scrollTo( 0, 1 );\n        }\n\n        // if defaultHomeScroll hasn't been set yet, see if scrollTop is 1\n        // it should be 1 in most browsers, but android treats 1 as 0 (for hiding addr bar)\n        // so if it's 1, use 0 from now on\n        $.mobile.defaultHomeScroll = ( !$.support.scrollTop || $.mobile.window.scrollTop() === 1 ) ? 0 : 1;\n\n        //dom-ready inits\n        if ( $.mobile.autoInitializePage ) {\n            $.mobile.initializePage();\n        }\n\n        // window load event\n        // hide iOS browser chrome on load if hideUrlBar is true this is as fall back incase we were too early before\n        if ( $.mobile.hideUrlBar ) {\n            $window.load( $.mobile.silentScroll );\n        }\n\n        if ( !$.support.cssPointerEvents ) {\n            // IE and Opera don't support CSS pointer-events: none that we use to disable link-based buttons\n            // by adding the 'ui-disabled' class to them. Using a JavaScript workaround for those browser.\n            // https://github.com/jquery/jquery-mobile/issues/3558\n\n            // DEPRECATED as of 1.4.0 - remove ui-disabled after 1.4.0 release\n            // only ui-state-disabled should be present thereafter\n            $.mobile.document.delegate( \".ui-state-disabled,.ui-disabled\", \"vclick\",\n                function( e ) {\n                    e.preventDefault();\n                    e.stopImmediatePropagation();\n                }\n            );\n        }\n    });\n}( jQuery, this ));\n\n\n}));\n\n}.call(window));\n\n/***/ }),\n\n/***/ \"backbone\":\n/*!**************************************************************************************************!*\\\n  !*** external {\"root\":\"Backbone\",\"commonjs\":\"backbone\",\"commonjs2\":\"backbone\",\"amd\":\"backbone\"} ***!\n  \\**************************************************************************************************/\n/*! no static exports found */\n/***/ (function(module, exports) {\n\nmodule.exports = __WEBPACK_EXTERNAL_MODULE_backbone__;\n\n/***/ }),\n\n/***/ \"cdp.i18n\":\n/*!*********************************************************************************************!*\\\n  !*** external {\"root\":\"CDP\",\"commonjs\":\"cdp.i18n\",\"commonjs2\":\"cdp.i18n\",\"amd\":\"cdp.i18n\"} ***!\n  \\*********************************************************************************************/\n/*! no static exports found */\n/***/ (function(module, exports) {\n\nmodule.exports = __WEBPACK_EXTERNAL_MODULE_cdp_i18n__;\n\n/***/ }),\n\n/***/ \"jquery\":\n/*!******************************************************************************************!*\\\n  !*** external {\"root\":\"jQuery\",\"commonjs\":\"jquery\",\"commonjs2\":\"jquery\",\"amd\":\"jquery\"} ***!\n  \\******************************************************************************************/\n/*! no static exports found */\n/***/ (function(module, exports) {\n\nmodule.exports = __WEBPACK_EXTERNAL_MODULE_jquery__;\n\n/***/ })\n\n/******/ });\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCIsImNkcDovLy9DRFAvRnJhbWV3b3JrL0ludGVyZmFjZXMudHMiLCJjZHA6Ly8vQ0RQL0ZyYW1ld29yay9FcnJvckRlZnMudHMiLCJjZHA6Ly8vQ0RQL0ZyYW1ld29yay9QbGF0Zm9ybS50cyIsImNkcDovLy9DRFAvRnJhbWV3b3JrL1BhdGNoLnRzIiwiY2RwOi8vL0NEUC9GcmFtZXdvcmsvT3JpZW50YXRpb24udHMiLCJjZHA6Ly8vQ0RQL0ZyYW1ld29yay9Db3JlQVBJLnRzIiwiY2RwOi8vL0NEUC9GcmFtZXdvcmsvUm91dGVyLnRzIiwiY2RwOi8vL0NEUC9GcmFtZXdvcmsvUGFnZS50cyIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwvanF1ZXJ5L3NjcmlwdHMvanF1ZXJ5LW1pZ3JhdGUuanMiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsL2pxdWVyeS9zY3JpcHRzL2pxdWVyeS5tb2JpbGUuanMiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIHtcInJvb3RcIjpcIkJhY2tib25lXCIsXCJjb21tb25qc1wiOlwiYmFja2JvbmVcIixcImNvbW1vbmpzMlwiOlwiYmFja2JvbmVcIixcImFtZFwiOlwiYmFja2JvbmVcIn0iLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIHtcInJvb3RcIjpcIkNEUFwiLFwiY29tbW9uanNcIjpcImNkcC5pMThuXCIsXCJjb21tb25qczJcIjpcImNkcC5pMThuXCIsXCJhbWRcIjpcImNkcC5pMThuXCJ9Iiwid2VicGFjazovLy9leHRlcm5hbCB7XCJyb290XCI6XCJqUXVlcnlcIixcImNvbW1vbmpzXCI6XCJqcXVlcnlcIixcImNvbW1vbmpzMlwiOlwianF1ZXJ5XCIsXCJhbWRcIjpcImpxdWVyeVwifSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtB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QUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7OztBQUdMOztBQUVBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQjs7QUFFdEI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOzs7QUFHQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxpREFBaUQsdUNBQXVDO0FBQ3hGLGlEQUFpRCxzQ0FBc0M7QUFDdkYscURBQXFELHNDQUFzQztBQUMzRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCLGlCQUFpQjtBQUNqQjtBQUNBLGFBQWE7O0FBRWI7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7OztBQUdBO0FBQ0EsQ0FBQzs7QUFFRCxDQUFDLGU7Ozs7Ozs7Ozs7O0FDMWxCRDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQUE7QUFDSCxFQUFFLFFBR0Y7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTixLQUFLO0FBQ0w7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixHQUFHO0FBQ0g7QUFDQTtBQUNBLElBQUk7QUFDSjs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLEVBQUU7QUFDRjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7Ozs7OztBQU1BO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLEVBQUU7O0FBRUY7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyx5QkFBeUI7QUFDMUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsY0FBYyxnQkFBZ0I7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLENBQUM7O0FBRUQ7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0EsZUFBZTs7QUFFZjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGdEQUFnRCxnQkFBZ0I7QUFDaEUsSUFBSTs7QUFFSjtBQUNBO0FBQ0EsSUFBSTtBQUNKLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxlQUFlLFdBQVc7QUFDMUI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQSx1QkFBdUI7QUFDdkI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsQ0FBQzs7QUFFRDtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxFQUFFO0FBQ0YsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLDJCQUEyQjtBQUNsRDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCO0FBQ3ZCOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQjtBQUN0QjtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNENBQTRDO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFF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QUFDOztBQUVEOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBOztBQUVBLENBQUM7OztBQUdEO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQSxnQ0FBZ0M7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsK0JBQStCOztBQUUvQjtBQUNBLElBQUk7QUFDSjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGLENBQUM7OztBQUdEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGNBQWM7O0FBRWQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFD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QUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLENBQUM7OztBQUdEO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLElBQUk7QUFDSixHQUFHOztBQUVIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOzs7O0FBSUQ7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0Esd0NBQXdDO0FBQ3hDLElBQUk7O0FBRUo7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBLGdCQUFnQixxQkFBcUI7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxRUFBcUUsV0FBVyxFQUFFO0FBQ2xGLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLHVDQUF1QztBQUN2Qzs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSCxDQUFDOzs7O0FBSUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBOztBQUVBOztBQUVBLGVBQWUsWUFBWTtBQUMzQjs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0YsQ0FBQzs7OztBQUlEO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTs7QUFFQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLHlDQUF5Qzs7QUFFekM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUM7QUFDckM7QUFDQTtBQUNBLElBQUk7QUFDSixHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDO0FBQ3hDO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQSxJQUFJO0FBQ0o7QUFDQSxFQUFFO0FBQ0YsQ0FBQzs7OztBQUlEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0EsMkNBQTJDLGVBQWU7QUFDMUQsQ0FBQzs7O0FBR0Q7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQixHQUFHO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLDZDQUE2QyxTQUFTO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQSxlQUFlO0FBQ2Y7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLHNDQUFzQztBQUN0Qzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBLFlBQVksOEJBQThCO0FBQzFDO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0EsZ0JBQWdCLFNBQVM7QUFDekI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQSxDQUFDOzs7QUFHRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsaURBQWlEO0FBQ2pEOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLElBQUk7QUFDSixHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUVBQXFFLHFCQUFxQjtBQUMxRixLQUFLO0FBQ0wsSUFBSTtBQUNKLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGdFQUFnRSx5REFBeUQ7QUFDekgsbUVBQW1FLHlEQUF5RDtBQUM1SDtBQUNBO0FBQ0E7O0FBRUEsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUYsQ0FBQzs7O0FBR0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBLEtBQUs7O0FBRUw7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7OztBQUdGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLHlCQUF5QjtBQUMzQzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUI7QUFDbkI7QUFDQTs7QUFFQSxpREFBaUQ7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsQ0FBQzs7Ozs7QUFLRDs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsOENBQThDOztBQUUvRDs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQSxDQUFDOzs7QUFHRDtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBLGlFQUFpRSxrQkFBa0I7QUFDbkYsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBLHdDQUF3Qyx1Q0FBdUM7QUFDL0UsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCxDQUFDOztBQUVEOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixvQ0FBb0M7O0FBRS9EO0FBQ0EsYUFBYSxvQ0FBb0M7O0FBRWpEO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7O0FBRUE7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSwyQkFBMkIscUNBQXFDO0FBQ2hFLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsdUJBQXVCLGdFQUFnRTtBQUN2RjtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxHQUFHOztBQUVIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsYUFBYTtBQUNyQyxHQUFHOztBQUVIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLElBQUk7QUFDSixHQUFHOztBQUVIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLDZCQUE2QixLQUFLOztBQUUxQztBQUNBLDJCQUEyQjs7QUFFM0I7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLElBQUk7QUFDSixHQUFHOztBQUVIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osR0FBRzs7QUFFSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSw4QkFBOEI7QUFDOUI7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDLFdBQVc7QUFDbEQ7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLGdCQUFnQixzQkFBc0I7O0FBRXRDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSxDQUFDOztBQUVEOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSx1QkFBdUIsMkRBQTJEO0FBQ2xGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLG1DQUFtQyx3Q0FBd0MsRUFBRTtBQUM3RSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSwrQkFBK0Isb0VBQW9FO0FBQ25HO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSw4QkFBOEIsbUVBQW1FO0FBQ2pHO0FBQ0EsSUFBSTtBQUNKLEdBQUc7O0FBRUg7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUEsR0FBRzs7QUFFSCxnQkFBZ0IsNEJBQTRCLEVBQUU7O0FBRTlDO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBOztBQUVBLHlFQUF5RSxvQ0FBb0MsRUFBRTtBQUMvRyxDQUFDOzs7QUFHRDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQSw2QkFBNkI7QUFDN0IsOEJBQThCO0FBQzlCLCtCQUErQjs7QUFFL0I7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osR0FBRzs7QUFFSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsSUFBSTtBQUNKO0FBQ0E7O0FBRUEsR0FBRzs7QUFFSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBOztBQUVBO0FBQ0E7QUFDQSxFQUFFO0FBQ0YsQ0FBQzs7O0FBR0Q7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLEVBQUU7O0FBRUYsQ0FBQzs7O0FBR0Q7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUYsQ0FBQzs7O0FBR0Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBLENBQUM7O0FBRUQ7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBLENBQUM7O0FBRUQ7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBLENBQUM7O0FBRUQ7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBLENBQUM7O0FBRUQ7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBLENBQUM7O0FBRUQ7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBLENBQUM7O0FBRUQ7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBLENBQUM7OztBQUdEOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxFQUFFOztBQUVGOztBQUVBLENBQUM7O0FBRUQ7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxDQUFDOztBQUVELENBQUM7O0FBRUQ7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGlEQUFpRDtBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLG1CQUFtQixpQkFBaUI7QUFDcEM7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQsQ0FBQzs7QUFFRDs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSx3QkFBd0I7O0FBRXhCO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxDQUFDOztBQUVEOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsaUJBQWlCLGdCQUFnQjtBQUNqQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsQ0FBQzs7QUFFRDs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsbUJBQW1CLGdEQUFnRDtBQUNuRSxFQUFFOztBQUVGO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQsQ0FBQzs7QUFFRDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxDQUFDOztBQUVEOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsZUFBZSw2QkFBNkI7QUFDNUM7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0EsQ0FBQzs7QUFFRDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSwwQkFBMEI7O0FBRXBDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLENBQUM7O0FBRUQsQ0FBQzs7QUFFRDs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0EsY0FBYyxTQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQSxtQ0FBbUMsYUFBYTtBQUNoRDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTs7QUFFQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxDQUFDOztBQUVELENBQUM7O0FBRUQ7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUEsY0FBYyxpQkFBaUI7QUFDL0I7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRCxDQUFDOztBQUVEOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxpQ0FBaUMsV0FBVztBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVELENBQUM7O0FBRUQ7O0FBRUE7QUFDQTtBQUNBOztBQUVBLENBQUM7O0FBRUQ7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUEsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUgsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxDQUFDOztBQUVELENBQUM7O0FBRUQ7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQix1QkFBdUI7QUFDNUM7QUFDQTtBQUNBLENBQUM7O0FBRUQsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsNkJBQTZCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUYsQ0FBQzs7QUFFRDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVILEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQsQ0FBQzs7QUFFRDs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBOztBQUVBLHFEQUFxRCxZQUFZO0FBQ2pFO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQSw4Q0FBOEMsa0JBQWtCO0FBQ2hFO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsdUJBQXVCLHVDQUF1QztBQUM5RCxxQ0FBcUMsZ0NBQWdDOztBQUVyRTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDs7QUFFQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBLDRGQUE0RjtBQUM1RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGLHVDQUF1QztBQUN2QztBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLCtDQUErQztBQUMvQzs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQSxnREFBZ0Q7QUFDaEQ7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUEsQ0FBQzs7QUFFRCxDQUFDOztBQUVEOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7O0FBRUEsMEJBQTBCLDhCQUE4QjtBQUN4RCwrQ0FBK0MsNEJBQTRCO0FBQzNFO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsNENBQTRDO0FBQzVDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRCxDQUFDOztBQUVEOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBLElBQUk7QUFDSixFQUFFOztBQUVGO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsRUFBRTs7QUFFRjtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLENBQUM7O0FBRUQsQ0FBQzs7QUFFRDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxJQUFJO0FBQ0osR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsRUFBRTs7QUFFRixDQUFDOztBQUVEOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7O0FBRUg7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxJQUFJOztBQUVKOztBQUVBOztBQUVBLEdBQUc7O0FBRUg7O0FBRUE7QUFDQTs7QUFFQSxHQUFHOztBQUVIOztBQUVBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsSUFBSTs7QUFFSixHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsRUFBRTs7QUFFRixDQUFDOztBQUVEOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBOztBQUVBLEVBQUU7QUFDRixDQUFDOztBQUVEOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsRUFBRTs7QUFFRjtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLEdBQUc7O0FBRUg7O0FBRUE7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQSxFQUFFOztBQUVGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSCxFQUFFOztBQUVGO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSCxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsSUFBSTtBQUNKO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLElBQUk7O0FBRUosaUNBQWlDLHlCQUF5QjtBQUMxRCxzQkFBc0I7QUFDdEI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxFQUFFOztBQUVGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQsQ0FBQzs7QUFFRDs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7O0FBRUEsQ0FBQzs7O0FBR0Q7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsOEJBQThCLGdDQUFnQztBQUM5RDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCw0QkFBNEIsc0NBQXNDO0FBQ2xFLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0NBQStDO0FBQy9DO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsdUJBQXVCO0FBQzlDO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQSxhQUFhLDZCQUE2QjtBQUMxQzs7QUFFQTtBQUNBOztBQUVBLHFDQUFxQyxpQ0FBaUMsRUFBRTs7QUFFeEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxVQUFVO0FBQ1YsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxVQUFVO0FBQ1YsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQSxnQ0FBZ0M7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLHFCQUFxQixnREFBZ0Q7QUFDckU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0EsMkJBQTJCLGlCQUFpQjs7QUFFNUM7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBLElBQUkscUNBQXFDO0FBQ3pDLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7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QUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLEVBQUU7O0FBRUY7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRCxDQUFDOzs7QUFHRDs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBOztBQUVBO0FBQ0EsRUFBRTtBQUNGOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQztBQUNwQztBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTs7QUFFQTtBQUNBLGdCQUFnQix1QkFBdUI7O0FBRXZDO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGdCQUFnQixvQkFBb0I7QUFDcEM7QUFDQTs7QUFFQTtBQUNBLElBQUksNkNBQTZDOztBQUVqRDtBQUNBO0FBQ0E7O0FBRUEsaUNBQWlDOztBQUVqQztBQUNBO0FBQ0E7QUFDQTtBQUNBLDZDQUE2Qzs7QUFFN0M7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0EsZUFBZTs7QUFFZjtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLENBQUM7O0FBRUQsQ0FBQzs7O0FBR0Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQSxFQUFFOztBQUVGOztBQUVBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVELENBQUM7O0FBRUQ7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0Esb0RBQW9ELHlCQUF5QjtBQUM3RSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsMkRBQTJEOztBQUUzRDtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLG9EQUFvRDtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxFQUFFOztBQUVGLENBQUM7O0FBRUQ7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIseUNBQXlDO0FBQ3JFO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxHQUFHOztBQUVIOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxtQ0FBbUMsUUFBUTtBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNB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QUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxDQUFDOztBQUVELENBQUM7OztBQUdEOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLEdBQUc7QUFDSCxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQSwwQkFBMEIsc0NBQXNDO0FBQ2hFLEVBQUU7O0FBRUY7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSCxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxJQUFJO0FBQ0o7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsSUFBSTtBQUNKO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRCxDQUFDOztBQUVEOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0EsRUFBRTs7QUFFRjtBQUNBOztBQUVBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQSxFQUFFOztBQUVGOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0EsZ0JBQWdCLGNBQWM7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsSUFBSTtBQUNKLEdBQUc7QUFDSDtBQUNBLENBQUM7O0FBRUQsQ0FBQzs7O0FBR0Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxFQUFFOztBQUVGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLEdBQUc7QUFDSCxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87O0FBRVA7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLDJDQUEyQyxhQUFhO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVELENBQUM7O0FBRUQ7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7O0FBRUE7QUFDQSxHQUFHO0FBQ0gsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVELENBQUM7O0FBRUQ7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLCtDQUErQyxnQkFBZ0I7QUFDL0Q7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixZQUFZO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGtCQUFrQixlQUFlO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLDRDQUE0QyxXQUFXO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRCxDQUFDOztBQUVEOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSCw0Q0FBNEMsV0FBVztBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRCxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLGlEQUFpRDtBQUNqRDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBLGdEQUFnRCxhQUFhLEVBQUU7QUFDL0QsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxzQkFBc0IseUJBQXlCO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjs7QUFFQTtBQUNBO0FBQ0Esd0JBQXdCLHlCQUF5QjtBQUNqRCwwQkFBMEIsMkJBQTJCOztBQUVyRDtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILEVBQUU7O0FBRUY7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsRUFBRTs7QUFFRjtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsR0FBRzs7QUFFSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxJQUFJO0FBQ0o7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTixLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ04sS0FBSztBQUNMO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0Isd0NBQXdDO0FBQ3hEO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRCxDQUFDOztBQUVEOztBQUVBLENBQUM7O0FBRUQ7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUYsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRixDQUFDOzs7QUFHRCxDQUFDOztBQUVELENBQUMsZTs7Ozs7Ozs7Ozs7QUNsbWVELHNEOzs7Ozs7Ozs7OztBQ0FBLHNEOzs7Ozs7Ozs7OztBQ0FBLG9EIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblx0aWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKVxuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeShyZXF1aXJlKFwiYmFja2JvbmVcIiksIHJlcXVpcmUoXCJjZHAuaTE4blwiKSwgcmVxdWlyZShcImpxdWVyeVwiKSk7XG5cdGVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKVxuXHRcdGRlZmluZShbXCJiYWNrYm9uZVwiLCBcImNkcC5pMThuXCIsIFwianF1ZXJ5XCJdLCBmYWN0b3J5KTtcblx0ZWxzZSBpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpXG5cdFx0ZXhwb3J0c1tcIkZyYW1ld29ya1wiXSA9IGZhY3RvcnkocmVxdWlyZShcImJhY2tib25lXCIpLCByZXF1aXJlKFwiY2RwLmkxOG5cIiksIHJlcXVpcmUoXCJqcXVlcnlcIikpO1xuXHRlbHNlXG5cdFx0cm9vdFtcIkNEUFwiXSA9IHJvb3RbXCJDRFBcIl0gfHwge30sIHJvb3RbXCJDRFBcIl1bXCJGcmFtZXdvcmtcIl0gPSBmYWN0b3J5KHJvb3RbXCJCYWNrYm9uZVwiXSwgcm9vdFtcIkNEUFwiXSwgcm9vdFtcImpRdWVyeVwiXSk7XG59KSh3aW5kb3csIGZ1bmN0aW9uKF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfYmFja2JvbmVfXywgX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9jZHBfaTE4bl9fLCBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX2pxdWVyeV9fKSB7XG5yZXR1cm4gIiwiIFx0Ly8gaW5zdGFsbCBhIEpTT05QIGNhbGxiYWNrIGZvciBjaHVuayBsb2FkaW5nXG4gXHRmdW5jdGlvbiB3ZWJwYWNrSnNvbnBDYWxsYmFjayhkYXRhKSB7XG4gXHRcdHZhciBjaHVua0lkcyA9IGRhdGFbMF07XG4gXHRcdHZhciBtb3JlTW9kdWxlcyA9IGRhdGFbMV07XG5cbiBcdFx0Ly8gYWRkIFwibW9yZU1vZHVsZXNcIiB0byB0aGUgbW9kdWxlcyBvYmplY3QsXG4gXHRcdC8vIHRoZW4gZmxhZyBhbGwgXCJjaHVua0lkc1wiIGFzIGxvYWRlZCBhbmQgZmlyZSBjYWxsYmFja1xuIFx0XHR2YXIgbW9kdWxlSWQsIGNodW5rSWQsIGkgPSAwLCByZXNvbHZlcyA9IFtdO1xuIFx0XHRmb3IoO2kgPCBjaHVua0lkcy5sZW5ndGg7IGkrKykge1xuIFx0XHRcdGNodW5rSWQgPSBjaHVua0lkc1tpXTtcbiBcdFx0XHRpZihpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0pIHtcbiBcdFx0XHRcdHJlc29sdmVzLnB1c2goaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdWzBdKTtcbiBcdFx0XHR9XG4gXHRcdFx0aW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdID0gMDtcbiBcdFx0fVxuIFx0XHRmb3IobW9kdWxlSWQgaW4gbW9yZU1vZHVsZXMpIHtcbiBcdFx0XHRpZihPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobW9yZU1vZHVsZXMsIG1vZHVsZUlkKSkge1xuIFx0XHRcdFx0bW9kdWxlc1ttb2R1bGVJZF0gPSBtb3JlTW9kdWxlc1ttb2R1bGVJZF07XG4gXHRcdFx0fVxuIFx0XHR9XG4gXHRcdGlmKHBhcmVudEpzb25wRnVuY3Rpb24pIHBhcmVudEpzb25wRnVuY3Rpb24oZGF0YSk7XG4gXHRcdHdoaWxlKHJlc29sdmVzLmxlbmd0aCkge1xuIFx0XHRcdHJlc29sdmVzLnNoaWZ0KCkoKTtcbiBcdFx0fVxuXG4gXHR9O1xuXG5cbiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIG9iamVjdCB0byBzdG9yZSBsb2FkZWQgYW5kIGxvYWRpbmcgY2h1bmtzXG4gXHR2YXIgaW5zdGFsbGVkQ2h1bmtzID0ge1xuIFx0XHRcImluZGV4XCI6IDBcbiBcdH07XG5cblxuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHtcbiBcdFx0XHRcdGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4gXHRcdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuIFx0XHRcdFx0Z2V0OiBnZXR0ZXJcbiBcdFx0XHR9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuIFx0Ly8gb24gZXJyb3IgZnVuY3Rpb24gZm9yIGFzeW5jIGxvYWRpbmdcbiBcdF9fd2VicGFja19yZXF1aXJlX18ub2UgPSBmdW5jdGlvbihlcnIpIHsgY29uc29sZS5lcnJvcihlcnIpOyB0aHJvdyBlcnI7IH07XG5cbiBcdHZhciBqc29ucEFycmF5ID0gd2luZG93W1wid2VicGFja0pzb25wXCJdID0gd2luZG93W1wid2VicGFja0pzb25wXCJdIHx8IFtdO1xuIFx0dmFyIG9sZEpzb25wRnVuY3Rpb24gPSBqc29ucEFycmF5LnB1c2guYmluZChqc29ucEFycmF5KTtcbiBcdGpzb25wQXJyYXkucHVzaCA9IHdlYnBhY2tKc29ucENhbGxiYWNrO1xuIFx0anNvbnBBcnJheSA9IGpzb25wQXJyYXkuc2xpY2UoKTtcbiBcdGZvcih2YXIgaSA9IDA7IGkgPCBqc29ucEFycmF5Lmxlbmd0aDsgaSsrKSB3ZWJwYWNrSnNvbnBDYWxsYmFjayhqc29ucEFycmF5W2ldKTtcbiBcdHZhciBwYXJlbnRKc29ucEZ1bmN0aW9uID0gb2xkSnNvbnBGdW5jdGlvbjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IFwiLi9idWlsdC9jZHAuZnJhbWV3b3JrLmpxbS1saWIuanNcIik7XG4iLCIvLy8gPHJlZmVyZW5jZSB0eXBlcz1cImJhY2tib25lXCIgLz5cclxuXHJcbm5hbWVzcGFjZSBDRFAuRnJhbWV3b3JrIHtcclxuXHJcbiAgICAvLyBCYWNrYm9uZSBzaG9ydCBjdXRcclxuICAgIGV4cG9ydCB0eXBlICBNb2RlbCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPSBCYWNrYm9uZS5Nb2RlbDtcclxuICAgIGV4cG9ydCBjb25zdCBNb2RlbCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPSBCYWNrYm9uZS5Nb2RlbDtcclxuICAgIGV4cG9ydCB0eXBlICBDb2xsZWN0aW9uPFRNb2RlbCBleHRlbmRzIE1vZGVsPiAgICAgICAgICAgPSBCYWNrYm9uZS5Db2xsZWN0aW9uPFRNb2RlbD47XHJcbiAgICBleHBvcnQgY29uc3QgQ29sbGVjdGlvbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID0gQmFja2JvbmUuQ29sbGVjdGlvbjtcclxuICAgIGV4cG9ydCB0eXBlICBWaWV3PFRNb2RlbCBleHRlbmRzIE1vZGVsID0gTW9kZWw+ICAgICAgICAgPSBCYWNrYm9uZS5WaWV3PFRNb2RlbD47XHJcbiAgICBleHBvcnQgY29uc3QgVmlldyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID0gQmFja2JvbmUuVmlldztcclxuICAgIGV4cG9ydCB0eXBlICBFdmVudHMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPSBCYWNrYm9uZS5FdmVudHM7XHJcbiAgICBleHBvcnQgY29uc3QgRXZlbnRzICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID0gQmFja2JvbmUuRXZlbnRzO1xyXG4gICAgZXhwb3J0IHR5cGUgTW9kZWxTZXRPcHRpb25zICAgICAgICAgICAgICAgICAgICAgICAgICAgICA9IEJhY2tib25lLk1vZGVsU2V0T3B0aW9ucztcclxuICAgIGV4cG9ydCB0eXBlIE1vZGVsRmV0Y2hPcHRpb25zICAgICAgICAgICAgICAgICAgICAgICAgICAgPSBCYWNrYm9uZS5Nb2RlbEZldGNoT3B0aW9ucztcclxuICAgIGV4cG9ydCB0eXBlIE1vZGVsU2F2ZU9wdGlvbnMgICAgICAgICAgICAgICAgICAgICAgICAgICAgPSBCYWNrYm9uZS5Nb2RlbFNhdmVPcHRpb25zO1xyXG4gICAgZXhwb3J0IHR5cGUgTW9kZWxEZXN0cm95T3B0aW9ucyAgICAgICAgICAgICAgICAgICAgICAgICA9IEJhY2tib25lLk1vZGVsRGVzdHJveU9wdGlvbnM7XHJcbiAgICBleHBvcnQgdHlwZSBWaWV3T3B0aW9uczxUTW9kZWwgZXh0ZW5kcyBNb2RlbCA9IE1vZGVsPiAgID0gQmFja2JvbmUuVmlld09wdGlvbnM8VE1vZGVsPjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBlbiBkaXJlY3Rpb24gZGVmaW5pdGlvbnMuXHJcbiAgICAgKiBAamEg6YG356e75pa55ZCR44Gu5a6a576pLlxyXG4gICAgICovXHJcbiAgICBleHBvcnQgdHlwZSBQYWdlVHJhbnNpdGlvbkRpcmVjdGlvbiA9IFwiYmFja1wiIHwgXCJmb3J3YXJkXCIgfCBcInNhbWVcIiB8IFwidW5rbm93blwiO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGVuIEFyZ3VtZW50IG9mIG9uU2hvdy9vbkJlZm9yZVNob3cgbWV0aG9kLlxyXG4gICAgICogQGphIG9uU2hvdy9vbkJlZm9yZVNob3cg44Gn5rih44GV44KM44KL5byV5pWwXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgU2hvd0V2ZW50RGF0YSB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQGVuIEEgalF1ZXJ5IGNvbGxlY3Rpb24gb2JqZWN0IHRoYXQgY29udGFpbnMgdGhlIHNvdXJjZSBwYWdlIERPTSBlbGVtZW50LlxyXG4gICAgICAgICAqIEBqYSDpgbfnp7vliY3jga7nlLvpnaLmg4XloLHjgpLmoLzntI1cclxuICAgICAgICAgKi9cclxuICAgICAgICBwcmV2UGFnZTogSlF1ZXJ5O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAZW4gQSBqUXVlcnkgY29sbGVjdGlvbiBvYmplY3QgdGhhdCBjb250YWlucyB0aGUgZGVzdGluYXRpb24gcGFnZSBET00gZWxlbWVudC5cclxuICAgICAgICAgKiBAamEg6YG356e75b6M44Gu55S76Z2i5oOF5aCx44KS5qC857SNXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdG9QYWdlOiBKUXVlcnk7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBlbiBwYWdlIHRyYW5zaXRpb24gZGlyZWN0aW9uLlxyXG4gICAgICAgICAqIEBqYSDpgbfnp7vmlrnlkJHjgpLmoLzntI1cclxuICAgICAgICAgKi9cclxuICAgICAgICBkaXJlY3Rpb246IFBhZ2VUcmFuc2l0aW9uRGlyZWN0aW9uO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGVuIEFyZ3VtZW50IG9mIG9uSGlkZS9vbkJlZm9yZUhpZGUgbWV0aG9kLlxyXG4gICAgICogQGphIG9uSGlkZS9vbkJlZm9yZUhpZGUg44Gn5rih44GV44KM44KL5byV5pWwXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgSGlkZUV2ZW50RGF0YSB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQGVuIEEgalF1ZXJ5IGNvbGxlY3Rpb24gb2JqZWN0IHRoYXQgY29udGFpbnMgdGhlIHBhZ2UgRE9NIGVsZW1lbnQgdG8gd2hpY2ggd2UganVzdCB0cmFuc2l0aW9uZWQuXHJcbiAgICAgICAgICogQGphIOODiOODqeODs+OCuOOCt+ODp+ODs+WujOS6huOBl+OBn+eUu+mdouaDheWgseOCkuagvOe0jVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIG5leHRQYWdlOiBKUXVlcnk7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBlbiBBIGpRdWVyeSBjb2xsZWN0aW9uIG9iamVjdCB0aGF0IGNvbnRhaW5zIHRoZSBkZXN0aW5hdGlvbiBwYWdlIERPTSBlbGVtZW50LlxyXG4gICAgICAgICAqIEBqYSDpgbfnp7vlvozjga7nlLvpnaLmg4XloLHjgpLmoLzntI1cclxuICAgICAgICAgKi9cclxuICAgICAgICB0b1BhZ2U6IEpRdWVyeTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQGVuIEEgalF1ZXJ5IGNvbGxlY3Rpb24gb2JqZWN0IHRoYXQgY29udGFpbnMgdGhlIGZyb20gcGFnZSBET00gZWxlbWVudC5cclxuICAgICAgICAgKiBAamEg6YG356e75YmN44Gu55S76Z2i5oOF5aCx44KS5qC857SNXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJldlBhZ2U6IEpRdWVyeTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQGVuIHBhZ2UgdHJhbnNpdGlvbiBkaXJlY3Rpb24uXHJcbiAgICAgICAgICogQGphIOmBt+enu+aWueWQkeOCkuagvOe0jVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGRpcmVjdGlvbjogUGFnZVRyYW5zaXRpb25EaXJlY3Rpb247XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZW4gRGVsZWdhdGUgaW50ZXJmYWNlIG9mIGFkZGl0aW9uYWwgZGF0YSBmb3IgUGFnZSBjbGFzcy4gPGJyPlxyXG4gICAgICogICAgIENsaWVudCBjYW4gZGVmaW5lIGV4dGVuZCB0eXBlIGZyb20gaXQuXHJcbiAgICAgKlxyXG4gICAgICogQGphIOS7u+aEj+OBruaDheWgseOCkuagvOe0jeOBmeOCi+OCpOODs+OCv+ODvOODleOCp+OCpOOCuSA8YnI+XHJcbiAgICAgKiAgICAgUGFnZSDjgavmuKHjgZXjgozjgovjg4fjg7zjgr/jgILmi6HlvLXjgZfjgabkvb/nlKjlj6/og71cclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBJbnRlbnQge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBlbiBhbnkgcGFyYW1ldGVyLiA8YnI+XHJcbiAgICAgICAgICogICAgIHBhcmFtc1tcInF1ZXJ5UGFyYW1zXCJdIGlzIHVzZWQgYnkgZnJhbWV3b3JrIGZvciBxdWVyeSBwYXJhbWV0ZXJzLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQGphIOS7u+aEj+OBruODkeODqeODoeODvOOCvyA8YnI+XHJcbiAgICAgICAgICogICAgIHBhcmFtc1tcInF1ZXJ5UGFyYW1zXCJdIOOBq+OBr+OAgXF1ZXJ5IHBhcmFtZXRlciDjgYzjg5Xjg6zjg7zjg6Djg6/jg7zjgq/jgavjgojjgormoLzntI3jgZXjgozjgovjgIJcclxuICAgICAgICAgKi9cclxuICAgICAgICBwYXJhbXM/OiBvYmplY3Q7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogYW55IHBhcmFtZXRlcnNcclxuICAgICAgICAgKi9cclxuICAgICAgICBba2V5OiBzdHJpbmddOiBhbnk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZW4gQXJndW1lbnRzIGludGVyZmFjZSBvZiBSb3V0ZXIucmVnaXN0ZXJQYWdlU3RhY2soKSBtZXRob2QuXHJcbiAgICAgKiBAamEgUm91dGVyLnJlZ2lzdGVyUGFnZVN0YWNrKCkg44Gr5oyH5a6a44GZ44KL44Kk44Oz44K/44O844OV44Kn44Kk44K5XHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgUGFnZVN0YWNrIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAZW4gcm91dGUgc3RyaW5nLCBpdCBjYW4gYmUgcmVndWxhciBleHByZXNzaW9uLlxyXG4gICAgICAgICAqIEBqYSDjg6vjg7zjg4bjgqPjg7PjgrDmloflrZfliJcgLyDmraPopo/ooajnj75cclxuICAgICAgICAgKi9cclxuICAgICAgICByb3V0ZTogc3RyaW5nO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAZW4gcGFnZSB0aXRsZSBzdHJpbmcuXHJcbiAgICAgICAgICogQGphIOODmuODvOOCuOOCv+OCpOODiOODq+aWh+Wtl+WIl1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRpdGxlPzogc3RyaW5nO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAZW4gcGFnZSB0cmFuc2l0aW9uIHN0cmluZy5cclxuICAgICAgICAgKiBAamEg6YG356e744OI44Op44Oz44K444K344On44Oz5paH5a2X5YiXXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdHJhbnNpdGlvbj86IHN0cmluZztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBlbiBpbnRlcmZhY2Ugb2YgUm91dGVyJ3MgU3ViIEZsb3cgcGFyYW1lbnRlcnMuXHJcbiAgICAgKiBAamEgUm91dGVyIOOBriBTdWIgRmxvdyDjgavmjIflrprjgZnjgovjg5Hjg6njg6Hjg7zjgr/jgqTjg7Pjgr/jg7zjg5XjgqfjgqTjgrlcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBTdWJGbG93UGFyYW0ge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBlbiBzZXQgc3ViIGZsb3cgb3BlcmF0aW9uIFtiZWdpbiB8IGVuZF0uIDxicj5cclxuICAgICAgICAgKiAgICAgV2hlbiBcImJlZ2luXCIgaXMgc2V0IGFuZCB0aGVuIFwiZW5kXCIgaXMgY2FsbGVkLCBpdCBjYW4gcmV0dXJuIHRvIHRoZSBVUkwgc3BlY2lmaWVkIGFzIFwiYmFzZVwiIHdpdGggdHJlYXRpbmcgYnJvd3NlciBoaXN0b3J5LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQGphIFN1YiBGbG93IOWHpueQhuOCkuaMh+WumiBbYmVnaW4gfCBlbmRdIDxicj5cclxuICAgICAgICAgKiAgICAgXCJiZWdpblwiIOOBjOaMh+WumuOBleOCjOOAgeasoeOBqyBcImVuZFwiIOOCkuWRvOOBtuOBqOOBjeOAgVwiYmFzZVwiIOOBq+aMh+WumuOBl+OBnyB1cmwg44G+44Gn44OW44Op44Km44K25bGl5q2044KS44Gf44Gp44KL44CCXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgb3BlcmF0aW9uOiBcImJlZ2luXCIgfCBcImVuZFwiO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAZW4gUGFnZSBVUkwvSGFzaCB1c2VkIGFzIHRoZSByZWZlcmVuY2UgcG9pbnQgb2YgU3ViIEZsb3cgaXMgc3BlY2lmaWVkLiA8YnI+XHJcbiAgICAgICAgICogICAgIFdoZW4gU3ViIEZsb3cgb3BlcmF0aW9uID09IFwiZW5kXCIgaXMgc3BlY2lmaWVkLCBVUkwgc3BlY2lmaWVkIGFzIG5hdmlnYXRlIGlzIGRpc3JlZ2FyZGVkLiA8YnI+XHJcbiAgICAgICAgICogICAgIElmIG5vdCBzZXQsIHRoaXMgcGFyYW1ldGVyIGlzIGFzc2lnbmVkIHRoZSBwYWdlIGNhbGxlZCBSb3V0ZXIubmF2aWdhdGUoKSB3aXRoIHN1YkZsb3cgcHJvcGVydHkuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAamEgU3ViIEZsb3cg44Gu5Z+654K544Go44Gq44KL44Oa44O844K4IFVSTC9IYXNoIOOCkuaMh+WumuOAgiA8YnI+XHJcbiAgICAgICAgICogICAgIFN1YiBGbG93IG9wZXJhdGlvbiA9PSBcImVuZFwiIOOBjOaMh+WumuOBleOCjOOCi+WgtOWQiOOBr+OAgW5hdmlnYXRlIOOBq+aMh+WumuOBleOCjOOCiyBVUkwg44Gv54Sh6KaW44GV44KM44KL44CCIDxicj5cclxuICAgICAgICAgKiAgICAg5oyH5a6a44GM44Gq44GE5aC05ZCI44GvIFJvdXRlci5uYXZpZ2F0ZSgpIOaZguOBqyBzdWJGbG93IOOCkuaMh+WumuOBruWRvOOBs+WHuuOBl+WFg+OBjOOCouOCteOCpOODs+OBleOCjOOCi+OAglxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGRlc3RCYXNlPzogc3RyaW5nO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAZW4gUGFnZVN0YWNrIGZyb20gXCJkZXN0QmFzZVwiIHdoaWNoIGNoYW5nZXMgcGFnZSBhdCB0aGUgdGltZSBvZiB0aGUgZW5kIG9mIFN1YiBGbG93IGlzIHNwZWNpZmllZC4gPGJyPlxyXG4gICAgICAgICAqICAgICBXaGVuIHRoaXMgcGFyYW1ldGVyIGlzIG5vIHNldCwgaXQgY2hhbmdlcyBwYWdlIHRvIFwiZGVzdEJhc2VcIi5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBqYSBTdWIgRmxvdyDntYLkuobmmYLjgavpgbfnp7vjgZnjgosgXCJkZXN0QmFzZVwiIOOBi+OCieOBriBQYWdlU3RhY2sg44KS5oyH5a6a44CC5oyH5a6a44GM44Gq44GE5aC05ZCI44Gv44CBXCJkZXN0QmFzZVwiIOOBq+mBt+enu+OBmeOCi+OAglxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGRlc3RTdGFja3M/OiBQYWdlU3RhY2tbXTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBlbiBPcHRpb25zIGludGVyZmFjZSBvZiBSb3V0ZXIuc3RhcnQoKSBtZXRob2QuXHJcbiAgICAgKiBAamEgUm91dGVyLnN0YXJ0KCkg44Gr5oyH5a6a44GZ44KL44Kq44OX44K344On44Oz44Kk44Oz44K/44O844OV44Kn44Kk44K5XHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgUm91dGVyT3B0aW9ucyBleHRlbmRzIEJhY2tib25lLkhpc3RvcnlPcHRpb25zIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAZW4gSWYgY29uc3RydWN0IHJlZ2lzdGVyZWQgcGFnZSBpbnN0YW5jZSwgdGhpcyBwYXJhbSBzZXQgdHJ1ZS4gZGVmYXVsdDogdHJ1ZS5cclxuICAgICAgICAgKiBAamEg55m76Yyy5riI44G/44Oa44O844K444KS5qeL56+J44GZ44KL5aC05ZCIIHRydWUuIGRlZmF1bHQ6IHRydWVcclxuICAgICAgICAgKi9cclxuICAgICAgICBwYWdlQ29uc3RydWN0PzogYm9vbGVhbjtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBlbiBPcHRpb25zIGludGVyZmFjZSBvZiBSb3V0ZXIubmF2aWdhdGUoKSBtZXRob2QuXHJcbiAgICAgKiBAamEgUm91dGVyLm5hdmlnYXRlKCkg44Gr5oyH5a6a44GZ44KL44Kq44OX44K344On44Oz44Kk44Oz44K/44O844OV44Kn44Kk44K5XHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgTmF2aWdhdGVPcHRpb25zIGV4dGVuZHMgQmFja2JvbmUuTmF2aWdhdGVPcHRpb25zIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAZW4gb3ZlcndyaXRlOiB0cmlnZ2VyIGRlZmF1bHQgdmFsdWUgaXMgdHJ1ZS5cclxuICAgICAgICAgKiBAamEgdHJpZ2dlciDjga7ml6LlrprlgKTjga8gdHJ1ZSDjgajjgZfjgabmibHjgYZcclxuICAgICAgICAgKi9cclxuICAgICAgICB0cmlnZ2VyPzogYm9vbGVhbjtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQGVuIFN1YkZsb3dQYXJhbSBpcyBzcGVjaWZpZWQgd2hlbiBwZXJmb3JtaW5nIFN1YiBGbG93IHByb2Nlc3NpbmcuXHJcbiAgICAgICAgICogQGphIFN1YiBGbG93IOWHpueQhuOCkuihjOOBhuWgtOWQiOOAgVN1YkZsb3dQYXJhbSDjgpLmjIflrppcclxuICAgICAgICAgKi9cclxuICAgICAgICBzdWJGbG93PzogU3ViRmxvd1BhcmFtO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAZW4gc2V0IGJhY2sgb3BlcmF0aW9uIGRlc3RpbmF0aW9uLlxyXG4gICAgICAgICAqIEBqYSBb5oi744KLXSDmmYLjgavpgbfnp7vjgZnjgovjg5rjg7zjgrggVVJMIOOCkuaMh+WumlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGJhY2tEZXN0aW5hdGlvbj86IHN0cmluZztcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQGVuIG5vIGhhc2ggY2hhbmdlIGZsYWcgaW4gbmF2aWdhdGUgb3BlcmF0aW9uLlxyXG4gICAgICAgICAqIEBqYSBOYXZpZ2F0ZSDmmYLjgasgSGFzaCDlpInmm7TjgZfjgarjgYTjg5Xjg6njgrBcclxuICAgICAgICAgKi9cclxuICAgICAgICBub0hhc2hDaGFuZ2U/OiBib29sZWFuO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAZW4gYWRkaXRpb25hbCBpbmZvIGludGVyZmFjZS5cclxuICAgICAgICAgKiBAamEg5LuY5Yqg5oOF5aCx44Kk44Oz44K/44O844OV44Kn44Kk44K5XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgaW50ZW50PzogSW50ZW50O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGVuIEhhbmRsZSBvcmllbnRhdGlvbiBjaGFuZ2VkIG5vdGlmeSBpbnRlcmZhY2UuXHJcbiAgICAgKiBAamEgT3JpZW50YXRpb24g44Gu5aSJ5pu05qSc55+l44KS5Y+X5L+h44GZ44KL44Kk44Oz44K/44O844OV44Kn44Kk44K5XHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgSU9yaWVudGF0aW9uQ2hhbmdlZExpc3RlbmVyIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAZW4gUmVjZWl2ZWQgb3JpZW50YXRpb24gY29kZSB3aGVuIHRoYXQgaXMgY2hhbmdlZC5cclxuICAgICAgICAgKiBAamEgT3JpZW50YXRpb24g44Gu5aSJ5pu044KS5Y+X5L+hXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gbmV3T3JpZW50YXRpb25cclxuICAgICAgICAgKiAtIGBlbmAgbmV3IG9yaWVudGF0aW9uIGNvZGUuXHJcbiAgICAgICAgICogLSBgamFgIOWkieabtOW+jOOBriBvcmllbnRhdGlvbiBjb2RlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgb25PcmllbnRhdGlvbkNoYW5nZWQobmV3T3JpZW50YXRpb246IE9yaWVudGF0aW9uKTogdm9pZDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBlbiBIYW5kbGUgSC9XIGJhY2sgYnV0dG9uIGV2ZW50IG5vdGlmeSBpbnRlcmZhY2UuXHJcbiAgICAgKiBAamEgSC9XIEJhY2sgYnV0dG9uIOOBriBldmVudCDjgpLlj5fkv6HjgZnjgovjgqTjg7Pjgr/jg7zjg5XjgqfjgqTjgrlcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBJQmFja0J1dHRvbkV2ZW50TGlzdGVuZXIge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBlbiBSZWNlaXZlZCBIL1cgQmFjayBCdXR0b24gZXZlbnRcclxuICAgICAgICAgKiBAamEgSC9XIEJhY2sgQnV0dG9uIOODj+ODs+ODieODqVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGV2ZW50XHJcbiAgICAgICAgICogIC0gYGVuYCBldmVudCBvYmplY3RcclxuICAgICAgICAgKiAgLSBgamFgIOOCpOODmeODs+ODiOOCquODluOCuOOCp+OCr+ODiFxyXG4gICAgICAgICAqIEByZXR1cm5zXHJcbiAgICAgICAgICogIC0gYGVuYCB0cnVlOiBjb250aW51ZSBkZWZhdWx0IG9wZXJhdGlvbiAvIGZhbHNlOiBzdG9wIGRlZmF1bHQgb3BlcmF0aW9uXHJcbiAgICAgICAgICogIC0gYGphYCB0cnVlOiDml6Llrprjga7lh6bnkIbjgpLooYzjgo/jgarjgYQgLyBmYWxzZTog5pei5a6a44Gu5Yem55CG44KS6KGM44GGXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgb25IYXJkd2FyZUJhY2tCdXR0b24oZXZlbnQ/OiBKUXVlcnkuRXZlbnQpOiBib29sZWFuO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGVuIEZyYW1ld29yayBnZW5lcmljIGNvbW1hbmQgY2FsbGJhY2sgaW50ZXJmYWNlLlxyXG4gICAgICogQGphIOaxjueUqOOCs+ODnuODs+ODieOCs+ODvOODq+ODkOODg+OCr+OCpOODs+OCv+ODvOODleOCp+OCpOOCuVxyXG4gICAgICovXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIElDb21tYW5kTGlzdGVuZXIge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBlbiBSZWNlaXZlZCBnZW5lcmljIGNvbW1hbmRcclxuICAgICAgICAgKiBAamEg5rGO55So44Kz44Oe44Oz44OJ44KS5Y+X5L+hXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gIGV2ZW50XHJcbiAgICAgICAgICogIC0gYGVuYCBldmVudCBvYmplY3RcclxuICAgICAgICAgKiAgLSBgamFgIOOCpOODmeODs+ODiOOCquODluOCuOOCp+OCr+ODiFxyXG4gICAgICAgICAqIEBwYXJhbSAga2luZFxyXG4gICAgICAgICAqICAtIGBlbmAgY29tbWFuZCBraW5kIGlkZW50aWZpZXJcclxuICAgICAgICAgKiAgLSBgamFgIOOCs+ODnuODs+ODieeoruWIpeitmOWIpeWtkFxyXG4gICAgICAgICAqIEByZXR1cm5zXHJcbiAgICAgICAgICogIC0gYGVuYCB0cnVlOiBjb250aW51ZSBkZWZhdWx0IG9wZXJhdGlvbiAvIGZhbHNlOiBzdG9wIGRlZmF1bHQgb3BlcmF0aW9uXHJcbiAgICAgICAgICogIC0gYGphYCB0cnVlOiDml6Llrprjga7lh6bnkIbjgpLooYzjgo/jgarjgYQgLyBmYWxzZTog5pei5a6a44Gu5Yem55CG44KS6KGM44GGXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgb25Db21tYW5kKGV2ZW50PzogSlF1ZXJ5LkV2ZW50LCBraW5kPzogc3RyaW5nKTogYm9vbGVhbjtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBlbiBJbnRlcmZhY2UgY2xhc3MgZm9yIHN0b3JpbmcgcmVnaXN0cmF0aW9uIGluZm8sIHVzaW5nIGJ5IFJvdXRlci5yZWdpc3RlcigpIG1ldGhvZC5cclxuICAgICAqIEBqYSBSb3V0ZXIucmVnaXN0ZXIoKSDjgafmjIflrprjgZnjgovnmbvpjLLmg4XloLHjgpLmoLzntI3jgZnjgovjgqTjg7Pjgr/jg7zjg5XjgqfjgqTjgrnjgq/jg6njgrlcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBQYWdlQ29uc3RydWN0T3B0aW9ucyB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQGVuIHJvdXRlIGlkZW50aWZpZXJcclxuICAgICAgICAgKiBAamEgcm91dGUg6K2Y5Yil5a2QXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcm91dGU/OiBzdHJpbmc7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBlbiBjYWxsYmFjayBvbiBjaGFuZ2luZyByb3V0ZS5cclxuICAgICAgICAgKiBAamEgcm91dGUg5aSJ5pu05pmC44Gr5ZG844Gz5Ye644GV44KM44KL44Kz44O844Or44OQ44OD44KvXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgY2FsbGJhY2s/OiAoLi4uYXJnczogYW55W10pID0+IGJvb2xlYW47XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBlbiBzZXQgXCJ0cnVlXCIgaWYgYXBwbGljYXRpb24ncyB0b3Agdmlldy5cclxuICAgICAgICAgKiBAamEg44Ki44OX44Oq44Kx44O844K344On44Oz44GuIHRvcCDnlLvpnaLjgafjgYLjgovloLTlkIggdHJ1ZSDjgpLmjIflrppcclxuICAgICAgICAgKi9cclxuICAgICAgICB0b3A/OiBib29sZWFuO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAZW4gVGhlIGluc3RhbmNlIG9mIFBhZ2UgZXZlbnQgbGlzdGVuZXIgaW5zdGFuY2UuXHJcbiAgICAgICAgICogQGphIFBhZ2Ug44Kk44OZ44Oz44OI44KS5Y+X5L+h44GZ44KL44Oq44K544OK44O844Kk44Oz44K544K/44Oz44K5IDxicj5cclxuICAgICAgICAgKiAgICAg5qmf6IO95ouh5by15pmC44Gr5oyH5a6a44GZ44KLXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgb3duZXI/OiBJUGFnZTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQGVuIGludGVudCBpbnN0YW5jZSBpcyBjb21tdW5pY2F0ZWQgbmV4dCBwYWdlIHdoZW4gXCJpbnRlbnRcIiBpc24ndCBkZXNpZ25hdGVkIHNwZWNpZmljYWxseSBpbiBuYXZpZ2F0aW9uLlxyXG4gICAgICAgICAqIEBqYSDmmI7npLrnmoTjgasgaW50ZW50IOOBjOaMh+WumuOBleOCjOOBquOBhOWgtOWQiOOBq+OBiuOBhOOBpuOCgiBpbnRlbnQg44KS56C05qOE44GX44Gq44GE5aC05ZCI44GvIHRydWUg44KS5oyH5a6aXHJcbiAgICAgICAgICovXHJcbiAgICAgICAga2VlcEludGVudD86IGJvb2xlYW47XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZW4gSW50ZXJmYWNlIG9mIFBhZ2UgY2xhc3MuXHJcbiAgICAgKiBAamEg44Oa44O844K444Kv44Op44K544Gu44Kk44Oz44K/44O844OV44Kn44Kk44K544Kv44Op44K5XHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgSVBhZ2UgZXh0ZW5kcyBJT3JpZW50YXRpb25DaGFuZ2VkTGlzdGVuZXIsIElCYWNrQnV0dG9uRXZlbnRMaXN0ZW5lciwgSUNvbW1hbmRMaXN0ZW5lciB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQGVuIFJldHVybiB0cnVlIGlmIHBhZ2UgaXMgYWN0aXZlLlxyXG4gICAgICAgICAqIEBqYSDjg5rjg7zjgrjjgYzjgqLjgq/jg4bjgqPjg5bjgafjgYLjgovmmYIgdHJ1ZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGFjdGl2ZTogYm9vbGVhbjtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQGVuIFN0b3JlZCB0YXJnZXQgcGFnZSB1cmwuXHJcbiAgICAgICAgICogQGphIOWvvuixoeOBruODmuODvOOCuCBVUkwg44KS5qC857SNXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdXJsOiBzdHJpbmc7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBlbiBTdG9yZWQgdGFyZ2V0IHBhZ2UgSUQuXHJcbiAgICAgICAgICogQGphIOWvvuixoeOBruODmuODvOOCuCBJRCDjgpLmoLzntI1cclxuICAgICAgICAgKi9cclxuICAgICAgICBpZDogc3RyaW5nO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAZW4galF1ZXJ5IG9iamVjdCBvZiBwYWdlLlxyXG4gICAgICAgICAqIEBqYSDjg5rjg7zjgrjjga4galF1ZXJ5IOOCquODluOCuOOCp+OCr+ODiFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgICRwYWdlOiBKUXVlcnk7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBlbiBqUXVlcnkgb2JqZWN0IG9mIHBhZ2UncyBoZWFkZXIuXHJcbiAgICAgICAgICogQGphIOODmuODvOOCuOODmOODg+ODgOOBriBqUXVlcnkg44Kq44OW44K444Kn44Kv44OIXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgJGhlYWRlcjogSlF1ZXJ5O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAZW4galF1ZXJ5IG9iamVjdCBvZiBwYWdlJ3MgZm9vdGVyLlxyXG4gICAgICAgICAqIEBqYSDjg5rjg7zjgrjjg5Xjg4Pjgr/jga4galF1ZXJ5IOOCquODluOCuOOCp+OCr+ODiFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgICRmb290ZXI6IEpRdWVyeTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQGVuIGludGVudCBwYXJhbWV0ZXIgcGFzc2luZyBiZXR3ZWVuIHBhZ2VzLlxyXG4gICAgICAgICAqIEBqYSDjg5rjg7zjgrjplpPjgaflj5fjgZHmuKHjgZXjgozjgosgaW50ZW50IOOCquODluOCuOOCp+OCr+ODiFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGludGVudDogSW50ZW50O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAZW4gUmVjZWl2ZWQgUm91dGVyIFwiYmVmb3JlIHJvdXRlIGNoYW5nZVwiIGV2ZW50LlxyXG4gICAgICAgICAqIEBqYSBSb3V0ZXIgXCJiZWZvcmUgcm91dGUgY2hhbmdlXCIg44OP44Oz44OJ44OpIDxicj5cclxuICAgICAgICAgKiAgICAg44Oa44O844K46YG356e755u05YmN44Gr6Z2e5ZCM5pyf5Yem55CG44KS6KGM44GG44GT44Go44GM5Y+v6IO9XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJuc1xyXG4gICAgICAgICAqICAtIGBlbmAgcHJvbWlzZSBvYmplY3RcclxuICAgICAgICAgKiAgLSBgamFgIFByb21pc2Ug44Kq44OW44K444Kn44Kv44OIXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgb25CZWZvcmVSb3V0ZUNoYW5nZSgpOiBJUHJvbWlzZUJhc2U8YW55PjtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQGVuIEl0J3MgY2FsbGVkIG9ubHkgd2hlbiBiZWZvcmUgdGhlIGZpcnN0IE9uUGFnZUluaXQoKS5cclxuICAgICAgICAgKiBAamEg5pyA5Yid44GuIE9uUGFnZUluaXQoKSDjga7jgajjgY3jgavjga7jgb/jgrPjg7zjg6vjgZXjgozjgotcclxuICAgICAgICAgKi9cclxuICAgICAgICBvbkluaXRpYWxpemUoZXZlbnQ6IEpRdWVyeS5FdmVudCk6IHZvaWQ7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBlbiBFdmVudCBoYW5kbGVyIG9mIGpRTSBldmVudDogXCJwYWdlYmVmb3JlY3JlYXRlXCIuXHJcbiAgICAgICAgICogQGphIGpRTSBldmVudDogXCJwYWdlYmVmb3JlY3JlYXRlXCIg44Gr5a++5b+cXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgb25QYWdlQmVmb3JlQ3JlYXRlKGV2ZW50OiBKUXVlcnkuRXZlbnQpOiB2b2lkO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAZW4gRXZlbnQgaGFuZGxlciBvZiBqUU0gZXZlbnQ6IFwicGFnZWNyZWF0ZVwiIChwcmV2aW91cyB2ZXJzaW9uIGRlZmluZWQgXCJwYWdlaW5pdFwiKS5cclxuICAgICAgICAgKiBAamEgalFNIGV2ZW50OiBcInBhZ2VjcmVhdGVcIiAo5penOlwicGFnZWluaXRcIikg44Gr5a++5b+cXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgb25QYWdlSW5pdChldmVudDogSlF1ZXJ5LkV2ZW50KTogdm9pZDtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQGVuIEV2ZW50IGhhbmRsZXIgb2YgalFNIGV2ZW50OiBcInBhZ2ViZWZvcmVzaG93XCJcclxuICAgICAgICAgKiBAamEgalFNIGV2ZW50OiBcInBhZ2ViZWZvcmVzaG93XCIg44Gr5a++5b+cXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gZXZlbnRcclxuICAgICAgICAgKiAgLSBgZW5gIGV2ZW50IG9iamVjdFxyXG4gICAgICAgICAqICAtIGBqYWAg44Kk44OZ44Oz44OI44Kq44OW44K444Kn44Kv44OIXHJcbiAgICAgICAgICogQHBhcmFtIGRhdGFcclxuICAgICAgICAgKiAgLSBgZW5gIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cclxuICAgICAgICAgKiAgLSBgamFgIOS7mOWKoOaDheWgsVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIG9uUGFnZUJlZm9yZVNob3coZXZlbnQ6IEpRdWVyeS5FdmVudCwgZGF0YT86IFNob3dFdmVudERhdGEpOiB2b2lkO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAZW4gRXZlbnQgaGFuZGxlciBvZiBqUU0gZXZlbnQ6IFwicGFnZWNvbnRhaW5lcnNob3dcIiAocHJldmlvdXMgdmVyc2lvbiBkZWZpbmVkIFwicGFnZXNob3dcIikuXHJcbiAgICAgICAgICogQGphIGpRTSBldmVudDogXCJwYWdlY29udGFpbmVyc2hvd1wiICjml6c6XCJwYWdlc2hvd1wiKSDjgavlr77lv5xcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBldmVudFxyXG4gICAgICAgICAqICAtIGBlbmAgZXZlbnQgb2JqZWN0XHJcbiAgICAgICAgICogIC0gYGphYCDjgqTjg5njg7Pjg4jjgqrjg5bjgrjjgqfjgq/jg4hcclxuICAgICAgICAgKiBAcGFyYW0gZGF0YVxyXG4gICAgICAgICAqICAtIGBlbmAgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxyXG4gICAgICAgICAqICAtIGBqYWAg5LuY5Yqg5oOF5aCxXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgb25QYWdlU2hvdyhldmVudDogSlF1ZXJ5LkV2ZW50LCBkYXRhPzogU2hvd0V2ZW50RGF0YSk6IHZvaWQ7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBlbiBFdmVudCBoYW5kbGVyIG9mIGpRTSBldmVudDogXCJwYWdlYmVmb3JlaGlkZVwiLlxyXG4gICAgICAgICAqIEBqYSBqUU0gZXZlbnQ6IFwicGFnZWJlZm9yZWhpZGVcIiDjgavlr77lv5xcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBldmVudFxyXG4gICAgICAgICAqICAtIGBlbmAgZXZlbnQgb2JqZWN0XHJcbiAgICAgICAgICogIC0gYGphYCDjgqTjg5njg7Pjg4jjgqrjg5bjgrjjgqfjgq/jg4hcclxuICAgICAgICAgKiBAcGFyYW0gZGF0YVxyXG4gICAgICAgICAqICAtIGBlbmAgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxyXG4gICAgICAgICAqICAtIGBqYWAg5LuY5Yqg5oOF5aCxXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgb25QYWdlQmVmb3JlSGlkZShldmVudDogSlF1ZXJ5LkV2ZW50LCBkYXRhPzogSGlkZUV2ZW50RGF0YSk6IHZvaWQ7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBlbiBFdmVudCBoYW5kbGVyIG9mIGpRTSBldmVudDogXCJwYWdlY29udGFpbmVyaGlkZVwiIChwcmV2aW91cyB2ZXJzaW9uIGRlZmluZWQgXCJwYWdlaGlkZVwiKS5cclxuICAgICAgICAgKiBAamEgalFNIGV2ZW50OiBcInBhZ2Vjb250YWluZXJoaWRlXCIgKOaXpzpcInBhZ2VoaWRlXCIpIOOBq+WvvuW/nFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGV2ZW50XHJcbiAgICAgICAgICogIC0gYGVuYCBldmVudCBvYmplY3RcclxuICAgICAgICAgKiAgLSBgamFgIOOCpOODmeODs+ODiOOCquODluOCuOOCp+OCr+ODiFxyXG4gICAgICAgICAqIEBwYXJhbSBkYXRhXHJcbiAgICAgICAgICogIC0gYGVuYCBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXHJcbiAgICAgICAgICogIC0gYGphYCDku5jliqDmg4XloLFcclxuICAgICAgICAgKi9cclxuICAgICAgICBvblBhZ2VIaWRlKGV2ZW50OiBKUXVlcnkuRXZlbnQsIGRhdGE/OiBIaWRlRXZlbnREYXRhKTogdm9pZDtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQGVuIEV2ZW50IGhhbmRsZXIgb2YgalFNIGV2ZW50OiBcInBhZ2VyZW1vdmVcIi5cclxuICAgICAgICAgKiBAamEgalFNIGV2ZW50OiBcInBhZ2VyZW1vdmVcIiDjgavlr77lv5xcclxuICAgICAgICAgKi9cclxuICAgICAgICBvblBhZ2VSZW1vdmUoZXZlbnQ6IEpRdWVyeS5FdmVudCk6IHZvaWQ7XHJcbiAgICB9XHJcbn1cclxuXHJcbmRlY2xhcmUgbW9kdWxlIFwiY2RwLmZyYW1ld29yay5qcW1cIiB7XHJcbiAgICBjb25zdCBGcmFtZXdvcms6IHR5cGVvZiBDRFAuRnJhbWV3b3JrO1xyXG4gICAgZXhwb3J0ID0gRnJhbWV3b3JrO1xyXG59XHJcbiIsIm5hbWVzcGFjZSBDRFAge1xyXG5cclxuICAgIC8vIEBpbnRlcm5hbCBFcnJvciBjb2RlIG9mZnNldCBkZWZpbml0aW9uIG9mIGBjZHAtZnJhbWV3b3JrLWpxbWAuXHJcbiAgICBleHBvcnQgZW51bSBSRVNVTFRfQ09ERV9CQVNFIHtcclxuICAgICAgICBDRFBfRlJBTUVXT1JLX0RFQ0xBUkVSQVRJT04gPSAwLCAgICAvLyBUUzI0MzIg5a++562WXHJcbiAgICAgICAgQ0RQX0ZSQU1FV09SSyA9IDQgKiBfTU9EVUxFX1JFU1VMVF9DT0RFX1JBTkdFX0NEUCxcclxuICAgIH1cclxuXHJcbiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgLy8gbW9kdWxlIGVycm9yIGRlY2xhcmF0aW9uOlxyXG5cclxuICAgIGNvbnN0IEZVTkNUSU9OX0NPREVfUkFOR0UgPSAxMDtcclxuXHJcbiAgICAvLyBAaW50ZXJuYWwgY2RwLmZyYW1ld29yay5qcW0g5YaF44Gu44Ot44O844Kr44Or44Kz44O844OJ44Kq44OV44K744OD44OI5YCkXHJcbiAgICBlbnVtIExPQ0FMX0NPREVfQkFTRSB7XHJcbiAgICAgICAgQ09SRV9BUEkgICAgPSAwLFxyXG4gICAgICAgIFJPVVRFUiAgICAgID0gMSAqIEZVTkNUSU9OX0NPREVfUkFOR0UsXHJcbiAgICAgICAgUEFHRSAgICAgICAgPSAyICogRlVOQ1RJT05fQ09ERV9SQU5HRSxcclxuICAgIH1cclxuXHJcbiAgICAvKiB0c2xpbnQ6ZGlzYWJsZTptYXgtbGluZS1sZW5ndGggKi9cclxuICAgIC8vIEVycm9yIGNvZGUgZGVmaW5pdGlvbiBvZiBgY2RwLWZyYW1ld29yay1qcW1gLlxyXG4gICAgZXhwb3J0IGVudW0gUkVTVUxUX0NPREUge1xyXG4gICAgICAgIEVSUk9SX0NEUF9GUkFNRVdPUktfREVDTEFSQVRJT04gICAgICAgICAgICAgICAgID0gMCwgLy8gVFMyNDMyIOWvvuetllxyXG4gICAgICAgIC8qKiBgZW5gIFtbQ0RQLkZyYW1ld29yay5pbml0aWFsaXplXV0oKSBmYWlsZXIgY29kZS4gPGJyPiBgamFgIFtbQ0RQLkZyYW1ld29yay5pbml0aWFsaXplXV0oKSDjga7jgqjjg6njg7zjgrPjg7zjg4kgKi9cclxuICAgICAgICBFUlJPUl9DRFBfRlJBTUVXT1JLX0lOSVRJQUxJWkVfRkFJTEVEICAgICAgICAgICA9IERFQ0xBUkVfRVJST1JfQ09ERShSRVNVTFRfQ09ERV9CQVNFLkNEUF9GUkFNRVdPUkssIExPQ0FMX0NPREVfQkFTRS5DT1JFX0FQSSArIDEsIFwiZnJhbWV3b3JrIGluaXRpYWxpemUgZmFpbGVkLlwiKSxcclxuICAgICAgICAvKiogYGVuYCBbW0NEUC5Sb3V0ZXIuX2luaXRpYWxpemVdXSgpIGZhaWxlciBjb2RlLiA8YnI+IGBqYWAgW1tDRFAuUm91dGVyLl9pbml0aWFsaXplXV0oKSDjga7jgqjjg6njg7zjgrPjg7zjg4kgKi9cclxuICAgICAgICBFUlJPUl9DRFBfRlJBTUVXT1JLX1JPVVRFUl9JTklUSUFMSVpFX0ZBSUxFRCAgICA9IERFQ0xBUkVfRVJST1JfQ09ERShSRVNVTFRfQ09ERV9CQVNFLkNEUF9GUkFNRVdPUkssIExPQ0FMX0NPREVfQkFTRS5ST1VURVIgKyAxLCBcInJvdXRlciBpbml0aWFsaXplIGZhaWxlZC5cIiksXHJcbiAgICB9XHJcbiAgICAvKiB0c2xpbnQ6ZW5hYmxlOm1heC1saW5lLWxlbmd0aCAqL1xyXG59XHJcbiIsIi8qIHRzbGludDpkaXNhYmxlOm1heC1saW5lLWxlbmd0aCAqL1xyXG5cclxubmFtZXNwYWNlIENEUC5GcmFtZXdvcmsge1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGVuIHBsYXRmb3JtIGp1ZGdlbWVudCB1dGlsaXR5XHJcbiAgICAgKiBAamEgcGxhdGZvcm0g5Yik5a6a44Kq44OW44K444Kn44Kv44OIXHJcbiAgICAgKlxyXG4gICAgICogQHNlZWh0dHBzOi8vdzNnLmpwL2Jsb2cvdG9vbHMvanNfYnJvd3Nlcl9zbmlmZmluZ1xyXG4gICAgICovXHJcbiAgICBleHBvcnQgY29uc3QgUGxhdGZvcm0gPSAoKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHVhID0gbmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpO1xyXG5cclxuICAgICAgICBjb25zdCBtYWpvclZlcnNpb24gPSBmdW5jdGlvbiAoYnJvd3Nlcjogc3RyaW5nKTogbnVtYmVyIHtcclxuICAgICAgICAgICAgY29uc3QgdmVyc2lvbiA9IHVhLm1hdGNoKG5ldyBSZWdFeHAoXCIoXCIgKyBicm93c2VyICsgXCIpKCB8LykoWzAtOV0rKVwiKSk7XHJcbiAgICAgICAgICAgIGlmICghdmVyc2lvbiB8fCB2ZXJzaW9uLmxlbmd0aCA8IDQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBwYXJzZUludCh2ZXJzaW9uWzNdLCAxMCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgbHRJRTY6IHR5cGVvZiB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lciA9PT0gXCJ1bmRlZmluZWRcIiAmJiB0eXBlb2YgKDxhbnk+ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KS5zdHlsZS5tYXhIZWlnaHQgPT09IFwidW5kZWZpbmVkXCIsXHJcbiAgICAgICAgICAgIGx0SUU3OiB0eXBlb2Ygd2luZG93LmFkZEV2ZW50TGlzdGVuZXIgPT09IFwidW5kZWZpbmVkXCIgJiYgdHlwZW9mIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwgPT09IFwidW5kZWZpbmVkXCIsXHJcbiAgICAgICAgICAgIGx0SUU4OiB0eXBlb2Ygd2luZG93LmFkZEV2ZW50TGlzdGVuZXIgPT09IFwidW5kZWZpbmVkXCIgJiYgdHlwZW9mIGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUgPT09IFwidW5kZWZpbmVkXCIsXHJcbiAgICAgICAgICAgIGx0SUU5OiAoPGFueT5kb2N1bWVudCkudW5pcXVlSUQgJiYgdHlwZW9mIHdpbmRvdy5tYXRjaE1lZGlhID09PSBcInVuZGVmaW5lZFwiLFxyXG4gICAgICAgICAgICBndElFMTA6ICg8YW55PmRvY3VtZW50KS51bmlxdWVJRCAmJiB3aW5kb3cubWF0Y2hNZWRpYSxcclxuICAgICAgICAgICAgVHJpZGVudDogKDxhbnk+ZG9jdW1lbnQpLnVuaXF1ZUlELFxyXG4gICAgICAgICAgICBHZWNrbzogXCJNb3pBcHBlYXJhbmNlXCIgaW4gKDxhbnk+ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KS5zdHlsZSxcclxuICAgICAgICAgICAgUHJlc3RvOiBnbG9iYWwub3BlcmEsXHJcbiAgICAgICAgICAgIEJsaW5rOiBnbG9iYWwuY2hyb21lLFxyXG4gICAgICAgICAgICBXZWJraXQ6IHR5cGVvZiBnbG9iYWwuY2hyb21lID09PSBcInVuZGVmaW5lZFwiICYmIFwiV2Via2l0QXBwZWFyYW5jZVwiIGluICg8YW55PmRvY3VtZW50LmRvY3VtZW50RWxlbWVudCkuc3R5bGUsXHJcbiAgICAgICAgICAgIFRvdWNoOiB0eXBlb2YgZ2xvYmFsLm9udG91Y2hzdGFydCAhPT0gXCJ1bmRlZmluZWRcIixcclxuICAgICAgICAgICAgTW9iaWxlOiAodHlwZW9mIGdsb2JhbC5vcmllbnRhdGlvbiAhPT0gXCJ1bmRlZmluZWRcIikgfHwgKHVhLmluZGV4T2YoXCJXaW5kb3dzIFBob25lXCIpICE9PSAtMSksXHJcbiAgICAgICAgICAgIGx0QWQ0XzQ6IHR5cGVvZiBnbG9iYWwub3JpZW50YXRpb24gIT09IFwidW5kZWZpbmVkXCIgJiYgKHR5cGVvZiBnbG9iYWwuRXZlbnRTb3VyY2UgPT09IFwidW5kZWZpbmVkXCIgfHwgMzAgPiBtYWpvclZlcnNpb24oXCJjaHJvbWVcIikpLFxyXG4gICAgICAgICAgICBQb2ludGVyOiBnbG9iYWwubmF2aWdhdG9yLnBvaW50ZXJFbmFibGVkLFxyXG4gICAgICAgICAgICBNU1Bvbml0ZXI6IGdsb2JhbC5uYXZpZ2F0b3IubXNQb2ludGVyRW5hYmxlZCxcclxuICAgICAgICAgICAgQW5kcm9pZDogKHVhLmluZGV4T2YoXCJhbmRyb2lkXCIpICE9PSAtMSksXHJcbiAgICAgICAgICAgIGlPUzogKHVhLmluZGV4T2YoXCJpcGhvbmVcIikgIT09IC0xIHx8IHVhLmluZGV4T2YoXCJpcGFkXCIpICE9PSAtMSB8fCB1YS5pbmRleE9mKFwiaXBvZFwiKSAhPT0gLTEpLFxyXG4gICAgICAgIH07XHJcbiAgICB9KSgpO1xyXG59XHJcbiIsIi8qIHRzbGludDpkaXNhYmxlOnR5cGVkZWYgbm8tYml0d2lzZSAqL1xyXG5cclxubmFtZXNwYWNlIENEUC5GcmFtZXdvcmsge1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogdmNsaWNrIHBhdGNoXHJcbiAgICAgKi9cclxuICAgIGNvbnN0IF92Y2xpY2tQYXRjaCA9ICgpOiB2b2lkID0+IHtcclxuICAgICAgICBjb25zdCBqcXVlcnlfb24gPSAkLmZuLm9uLFxyXG4gICAgICAgICAgICBqcXVlcnlfb2ZmID0gJC5mbi5vZmY7XHJcblxyXG4gICAgICAgIGNvbnN0IGN1c3RvbV9vbiA9IGZ1bmN0aW9uICh0eXBlcywgc2VsZWN0b3IsIGRhdGEsIGZuLCAvKklOVEVSTkFMKi8gb25lKSB7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdHlwZXMgPT09IFwic3RyaW5nXCIpIHtcclxuICAgICAgICAgICAgICAgIHR5cGVzID0gdHlwZXMucmVwbGFjZSgvdmNsaWNrL2csIFwiY2xpY2tcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuICg8YW55Pl8uYmluZChqcXVlcnlfb24sIHRoaXMpKSh0eXBlcywgc2VsZWN0b3IsIGRhdGEsIGZuLCBvbmUpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGNvbnN0IGN1c3RvbV9vZmYgPSBmdW5jdGlvbiAodHlwZXMsIHNlbGVjdG9yLCBmbikge1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIHR5cGVzID09PSBcInN0cmluZ1wiKSB7XHJcbiAgICAgICAgICAgICAgICB0eXBlcyA9IHR5cGVzLnJlcGxhY2UoL3ZjbGljay9nLCBcImNsaWNrXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiAoPGFueT5fLmJpbmQoanF1ZXJ5X29mZiwgdGhpcykpKHR5cGVzLCBzZWxlY3RvciwgZm4pO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vIHJlcGxhY2UgZnVuY3Rpb25zLlxyXG4gICAgICAgICg8YW55PiQuZm4pLm9uID0gY3VzdG9tX29uO1xyXG4gICAgICAgICg8YW55PiQuZm4pLm9mZiA9IGN1c3RvbV9vZmY7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogJC5tb2JpbGUud2lkZ2V0LnBvcHVwIHBhdGNoIGZvciBcIl9jcmVhdGVQcmVyZXF1aXNpdGVzXCJcclxuICAgICAqXHJcbiAgICAgKiBwYXRjaCBjb2RlIGZyb20ganFtIDEuNVxyXG4gICAgICogaHR0cHM6Ly9naXRodWIuY29tL2pxdWVyeS9qcXVlcnktbW9iaWxlL2NvbW1pdC9kMzRjODZhZTE0ZDRlYTYwMzM1N2JlNWUzMjZkZTFmYjhjMzFkYmY5XHJcbiAgICAgKi9cclxuICAgIGNvbnN0IF9hcHBseV9qcW1fcG9wdXBfY3JlYXRlUHJlcmVxdWlzaXRlcyA9ICgpOiB2b2lkID0+IHtcclxuICAgICAgICBjb25zdCBfc2FmZUNyZWF0ZVByZXJlcXVpc2l0ZXMgPSBmdW5jdGlvbiAoc2NyZWVuUHJlcmVxdWlzaXRlOiBhbnksIGNvbnRhaW5lclByZXJlcXVpc2l0ZTogYW55LCB3aGVuRG9uZTogYW55KTogdm9pZCB7XHJcbiAgICAgICAgICAgIGxldCBwcmVyZXF1aXNpdGVzO1xyXG4gICAgICAgICAgICBjb25zdCBzZWxmOiBhbnkgPSB0aGlzO1xyXG5cclxuICAgICAgICAgICAgcHJlcmVxdWlzaXRlcyA9IHtcclxuICAgICAgICAgICAgICAgIHNjcmVlbjogJC5EZWZlcnJlZCgpLFxyXG4gICAgICAgICAgICAgICAgY29udGFpbmVyOiAkLkRlZmVycmVkKClcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHByZXJlcXVpc2l0ZXMuc2NyZWVuLmRvbmUoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHByZXJlcXVpc2l0ZXMgPT09IHNlbGYuX3ByZXJlcXVpc2l0ZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICBzY3JlZW5QcmVyZXF1aXNpdGUoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBwcmVyZXF1aXNpdGVzLmNvbnRhaW5lci5kb25lKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGlmIChwcmVyZXF1aXNpdGVzID09PSBzZWxmLl9wcmVyZXF1aXNpdGVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyUHJlcmVxdWlzaXRlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgJC53aGVuKHByZXJlcXVpc2l0ZXMuc2NyZWVuLCBwcmVyZXF1aXNpdGVzLmNvbnRhaW5lcikuZG9uZShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocHJlcmVxdWlzaXRlcyA9PT0gc2VsZi5fcHJlcmVxdWlzaXRlcykge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuX3ByZXJlcXVpc2l0ZXMgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIHdoZW5Eb25lKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgc2VsZi5fcHJlcmVxdWlzaXRlcyA9IHByZXJlcXVpc2l0ZXM7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgY29uc3QgJG1vYmlsZTogYW55ID0gJC5tb2JpbGU7XHJcbiAgICAgICAgaWYgKCRtb2JpbGUud2lkZ2V0cyAmJiAkbW9iaWxlLndpZGdldHMucG9wdXApIHtcclxuICAgICAgICAgICAgJG1vYmlsZS53aWRnZXRzLnBvcHVwLnByb3RvdHlwZS5fY3JlYXRlUHJlcmVxdWlzaXRlcyA9IF9zYWZlQ3JlYXRlUHJlcmVxdWlzaXRlcztcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogJC5tb2JpbGUud2lkZ2V0LnBvcHVwIHBhdGNoIGZvciBcIl9oYW5kbGVXaW5kb3dSZXNpemVcIlxyXG4gICAgICpcclxuICAgICAqIHBhdGNoIGNvZGUgZnJvbSBzdGFjayBvdmVyZmxvd1xyXG4gICAgICogaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMjcwOTA0NDUvanFtb2JpbGUtcmUtcG9zaXRpb25zLXBvcHVwLXdpbmRvdy1ldmVyeS10aW1lLXdoZW4tYW5kcm9pZC1vcGVucy1vd24tdmlydHVhbC1rZXlcclxuICAgICAqL1xyXG4gICAgY29uc3QgX2FwcGx5X2pxbV9wb3B1cF9oYW5kbGVXaW5kb3dSZXNpemUgPSAoKTogdm9pZCA9PiB7XHJcbiAgICAgICAgY29uc3QgX3NhZmVIYW5kbGVXaW5kb3dSZXNpemUgPSBmdW5jdGlvbiAoLyogdGhlRXZlbnQgKi8pOiB2b2lkIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX2lzT3BlbiAmJiB0aGlzLl9pZ25vcmVSZXNpemVUbyA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCh0aGlzLl9leHBlY3RSZXNpemVFdmVudCgpIHx8IHRoaXMuX29yaWVudGF0aW9uY2hhbmdlSW5Qcm9ncmVzcykgJiZcclxuICAgICAgICAgICAgICAgICAgICAhdGhpcy5fdWkuY29udGFpbmVyLmhhc0NsYXNzKFwidWktcG9wdXAtaGlkZGVuXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gZWZmZWN0aXZlbHkgcmFwaWQtY2xvc2UgdGhlIHBvcHVwIHdoaWxlIGxlYXZpbmcgdGhlIHNjcmVlbiBpbnRhY3RcclxuICAgICAgICAgICAgICAgICAgICAvL2p1ZGdlIHVzZXIgaXMgaW4gaW5wdXQgbW9kZSBvciBub3QuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEoJChcIjpmb2N1c1wiKS5pcyhcImlucHV0XCIpIHx8ICQoXCI6Zm9jdXNcIikuaXMoXCJ0ZXh0YXJlYVwiKSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fdWkuY29udGFpbmVyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYWRkQ2xhc3MoXCJ1aS1wb3B1cC1oaWRkZW4gdWktcG9wdXAtdHJ1bmNhdGVcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZW1vdmVBdHRyKFwic3R5bGVcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgY29uc3QgJG1vYmlsZTogYW55ID0gJC5tb2JpbGU7XHJcbiAgICAgICAgaWYgKCRtb2JpbGUud2lkZ2V0cyAmJiAkbW9iaWxlLndpZGdldHMucG9wdXApIHtcclxuICAgICAgICAgICAgJG1vYmlsZS53aWRnZXRzLnBvcHVwLnByb3RvdHlwZS5faGFuZGxlV2luZG93UmVzaXplID0gX3NhZmVIYW5kbGVXaW5kb3dSZXNpemU7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqICQubW9iaWxlLndpZGdldC5wb3B1cCBwYXRjaFxyXG4gICAgICovXHJcbiAgICBjb25zdCBfbW9iaWxlUG9wdXBQYXRjaCA9ICgpOiB2b2lkID0+IHtcclxuICAgICAgICBjb25zdCBqcXVlcnlNYWpvciA9IH5+JC5mbi5qcXVlcnkuc3BsaXQoXCIuXCIpWzBdO1xyXG4gICAgICAgIGNvbnN0IGpxbVZlcnNpb24gPSAkLm1vYmlsZS52ZXJzaW9uLnNwbGl0KFwiLlwiKTtcclxuICAgICAgICBjb25zdCBqcW1NYWpvciA9IH5+anFtVmVyc2lvblswXTtcclxuICAgICAgICBjb25zdCBqcW1NaW5lciA9IH5+anFtVmVyc2lvblsxXTtcclxuXHJcbiAgICAgICAgaWYgKDMgPD0ganF1ZXJ5TWFqb3IgJiYganFtTWFqb3IgPCAyICYmIGpxbU1pbmVyIDwgNSkge1xyXG4gICAgICAgICAgICBfYXBwbHlfanFtX3BvcHVwX2NyZWF0ZVByZXJlcXVpc2l0ZXMoKTtcclxuICAgICAgICAgICAgX2FwcGx5X2pxbV9wb3B1cF9oYW5kbGVXaW5kb3dSZXNpemUoKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8vX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXy8vXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZW4gcGF0Y2ggY2xhc3MgZm9yIGpxbSBmcmFtZXdvcmsuXHJcbiAgICAgKiBAamEganFtIGZyYW1ld29yayDnlKjjg5Hjg4Pjg4HpgannlKjjgq/jg6njgrlcclxuICAgICAqXHJcbiAgICAgKiBAaW50ZXJuYWxcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGNsYXNzIFBhdGNoIHtcclxuXHJcbiAgICAgICAgc3RhdGljIHNfdmNsaWNrRXZlbnQgPSBcInZjbGlja1wiO1xyXG5cclxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgICAgIC8vIHB1YmxpYyBzdGF0aWMgbWV0aG9kc1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAZW4gQXBwbHkgcGF0Y2ggYmVmb3JlIGluaXRpYWxpemUuXHJcbiAgICAgICAgICogQGphIOWIneacn+WMluWJjeOBruODkeODg+ODgeOBrumBqeeUqFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYXBwbHlCZWZvcmVJbml0KCk6IHZvaWQge1xyXG4gICAgICAgICAgICBpZiAoIVBhdGNoLmlzU3VwcG9ydGVkVmNsaWNrKCkpIHtcclxuICAgICAgICAgICAgICAgIF92Y2xpY2tQYXRjaCgpO1xyXG4gICAgICAgICAgICAgICAgUGF0Y2guc192Y2xpY2tFdmVudCA9IFwiY2xpY2tcIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQGVuIEFwcGx5IHBhdGNoIGFmdGVyIGluaXRpYWxpemUuXHJcbiAgICAgICAgICogQGphIOWIneacn+WMluW+jOOBruODkeODg+ODgeOBrumBqeeUqFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYXBwbHlBZnRlckluaXQoKTogdm9pZCB7XHJcbiAgICAgICAgICAgIF9tb2JpbGVQb3B1cFBhdGNoKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAZW4gaWYgXCJ2Y2xpY2tcIiBldmVudCBpcyB1bnN1cHBvcnRlZCwgcmV0dXJucyBmYWxzZS4gZXg6IEFuZHJvaWQgNC40IChLaXRrYXQpXHJcbiAgICAgICAgICogQGphIFwidmNsaWNrXCIgZXZlbnQg44GM6Z2e44K144Od44O844OI44Gn44GC44KLIHBsYXRmb3JtIChLaXRLYXQpIOOBryBmYWxzZSDjgpLov5TjgZnjgIIgPGJyPlxyXG4gICAgICAgICAqICAgICAgalFNIOOBriB2ZXJzaW9uIHVwIOOBq+OCiOOCiuOAgeino+axuuOBleOCjOOCi+WgtOWQiOOBr+eEoeWKueOBi+OBmeOCi+OAglxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgaXNTdXBwb3J0ZWRWY2xpY2soKTogYm9vbGVhbiB7XHJcbiAgICAgICAgICAgIC8vIGZvciBBbmRyb2lkIDQuNCsgKEtpdGthdCDvvZ4pXHJcbiAgICAgICAgICAgIGlmIChQbGF0Zm9ybS5BbmRyb2lkICYmICFQbGF0Zm9ybS5sdEFkNF80KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIm5hbWVzcGFjZSBDRFAuRnJhbWV3b3JrIHtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBlbiBPcmllbnRhdGlvbiBjb2RlXHJcbiAgICAgKiBAamEgb3JpZW50YXRpb24g6K2Y5Yil5a2QXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBlbnVtIE9yaWVudGF0aW9uIHtcclxuICAgICAgICBQT1JUUkFJVCA9IDAsXHJcbiAgICAgICAgTEFORFNDQVBFID0gMSxcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBlbiBHZXQgT3JpZW50YXRpb24gZW51bSBjb2RlXHJcbiAgICAgKiBAamEgT3JpZW50YXRpb24g44Gu5Y+W5b6XXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBmdW5jdGlvbiBnZXRPcmllbnRhdGlvbigpOiBPcmllbnRhdGlvbiB7XHJcbiAgICAgICAgY29uc3QgJHdpbmRvdyA9ICQod2luZG93KTtcclxuICAgICAgICByZXR1cm4gKCR3aW5kb3cud2lkdGgoKSA8ICR3aW5kb3cuaGVpZ2h0KCkpID8gT3JpZW50YXRpb24uUE9SVFJBSVQgOiBPcmllbnRhdGlvbi5MQU5EU0NBUEU7XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uLy4uL0B0eXBlcy9qcXVlcnkubW9iaWxlLmQudHNcIiAvPlxyXG4vKiB0c2xpbnQ6ZGlzYWJsZTptYXgtbGluZS1sZW5ndGggZm9yaW4gbm8tYml0d2lzZSAqL1xyXG5cclxubmFtZXNwYWNlIENEUCB7XHJcblxyXG4gICAgaW1wb3J0IFByb21pc2UgPSBDRFAuUHJvbWlzZTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBlbiBUaGUgZnVuY3Rpb24gcmV0dXJuZWQgUHJvbWlzZSB3YWl0cyB1bnRpbCBgY29yZG92YWAgaXMgcmVhZHkuIDxicj5cclxuICAgICAqICAgICBbTm90ZV0gZW11bGF0ZSB3aGVuIFBDIGVudmlyb21lbnQuXHJcbiAgICAgKlxyXG4gICAgICogQGphIGBjb3Jkb3ZhYCDjgYzmnInlirnjgavjgarjgovjgb7jgaflvoXmqZ8gPGJyPlxyXG4gICAgICogICAgIFBDIOeSsOWig+OBp+OBr+OCqOODn+ODpeODrOODvOODiOOBleOCjOOCi+OAglxyXG4gICAgICovXHJcbiAgICBleHBvcnQgZnVuY3Rpb24gd2FpdEZvckRldmljZVJlYWR5KCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZTx2b2lkPigocmVzb2x2ZSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoIUNEUC5GcmFtZXdvcmsuUGxhdGZvcm0uTW9iaWxlKSB7XHJcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgICAgICAgICB9LCAxMDApO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKG51bGwgPT0gZ2xvYmFsLmNvcmRvdmEgfHwgbnVsbCA9PSBnbG9iYWwuY29yZG92YS5leGVjKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJChkb2N1bWVudCkub25lKFwiZGV2aWNlcmVhZHlcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBfZGVmYXVsdEJhY2tCdXR0b25IYW5kbGVyOiAoZXZlbnQ/OiBKUXVlcnkuRXZlbnQpID0+IHZvaWQgPSBudWxsO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGVuIFNldHVwIEgvVyBCYWNrIGtleSBoYW5kbGVyLlxyXG4gICAgICogQGphIEgvVyBCYWNrIGtleSDjg4/jg7Pjg4njg6njga7oqK3lrprplqLmlbBcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW1cclxuICAgICAqIC0gYGVuYCBoYW5kbGVyIGZ1bmN0aW9uLlxyXG4gICAgICogLSBgamFgIGhhbmRsZXIg5oyH5a6aLlxyXG4gICAgICogQHJldHVybnNcclxuICAgICAqIC0gYGVuYCBvbGQgaGFuZGxlciBmdW5jdGlvbi5cclxuICAgICAqIC0gYGphYCDku6XliY3jga4gaGFuZGxlci5cclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIHNldEJhY2tCdXR0b25IYW5kbGVyKGhhbmRsZXI6IChldmVudD86IEpRdWVyeS5FdmVudCkgPT4gdm9pZCk6IChldmVudD86IEpRdWVyeS5FdmVudCkgPT4gdm9pZCB7XHJcbiAgICAgICAgY29uc3Qgb2xkSGFuZGxlciA9IF9kZWZhdWx0QmFja0J1dHRvbkhhbmRsZXI7XHJcbiAgICAgICAgX2RlZmF1bHRCYWNrQnV0dG9uSGFuZGxlciA9IGhhbmRsZXI7XHJcbiAgICAgICAgcmV0dXJuIG9sZEhhbmRsZXI7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gYmFjayBrZXkgaGFuZGxlciBpbXBsZW1lbnQuXHJcbiAgICAoKCkgPT4ge1xyXG4gICAgICAgIHdhaXRGb3JEZXZpY2VSZWFkeSgpXHJcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICQoZG9jdW1lbnQpLm9uKFwiYmFja2J1dHRvblwiLCAoZXZlbnQ6IEpRdWVyeS5FdmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChfZGVmYXVsdEJhY2tCdXR0b25IYW5kbGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9kZWZhdWx0QmFja0J1dHRvbkhhbmRsZXIoZXZlbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgIH0pKCk7XHJcblxyXG5cclxuICAgIC8vX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXy8vXHJcblxyXG5cclxuICAgIGV4cG9ydCBuYW1lc3BhY2UgRnJhbWV3b3JrIHtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQGVuIEFueSBwYXJhbWV0ZXIgdHlwZXMgaW50ZXJmYWNlXHJcbiAgICAgICAgICogQGphIOS7u+aEj+OBruODkeODqeODoeODvOOCv+Wei+Wumue+qVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGV4cG9ydCBpbnRlcmZhY2UgUGxhaW5TZXR0aW5nczxUID0gYW55PiB7XHJcbiAgICAgICAgICAgIFtrZXk6IHN0cmluZ106IFQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAamEgU2V0dGluZyBwYXJhbWV0ZXJzIGZvciBqUXVlcnlcclxuICAgICAgICAgKiBAamEgalF1ZXJ5IOOBq+ioreWumuWPr+iDveOBquOCquODl+OCt+ODp+ODs1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGV4cG9ydCBpbnRlcmZhY2UgSlF1ZXJ5U2V0dGluZ3MgZXh0ZW5kcyBQbGFpblNldHRpbmdzIHtcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIEBlbiBkZWZhdWx0ICQuYWpheCBzZXR0aW5nc1xyXG4gICAgICAgICAgICAgKiBAamEgJC5hamF4IOOBruaXouWumuioreWumlxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgYWpheFNldHVwPzogSlF1ZXJ5LkFqYXhTZXR0aW5ncztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBlbiBBcHBsaWNhYmxlIG9wdGlvbnMgZm9yIFtbQ0RQLkZyYW1ld29ya11dXHJcbiAgICAgICAgICogQGphIFtbQ0RQLkZyYW1ld29ya11dIOOBq+ioreWumuWPr+iDveOBquOCquODl+OCt+ODp+ODs1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGV4cG9ydCBpbnRlcmZhY2UgRnJhbWV3b3JrT3B0aW9ucyB7XHJcbiAgICAgICAgICAgIGpxdWVyeT86IEpRdWVyeVNldHRpbmdzO1xyXG4gICAgICAgICAgICBqcXVlcnltb2JpbGU/OiBQbGFpblNldHRpbmdzO1xyXG4gICAgICAgICAgICBpMThuPzogQ0RQLkkxOE5TZXR0aW5ncztcclxuICAgICAgICAgICAgYXBwbHlKUXVlcnlDb25maWc/OiAoKSA9PiB2b2lkO1xyXG4gICAgICAgICAgICBhcHBseUpRdWVyeU1vYmlsZUNvbmZpZz86ICgpID0+IHZvaWQ7XHJcbiAgICAgICAgICAgIGFwcGx5UGF0Y2g/OiBib29sZWFuO1xyXG4gICAgICAgICAgICBhbmNob3JWY2xpY2s/OiBib29sZWFuO1xyXG4gICAgICAgICAgICBmaXJzdFBhZ2VUcmFuc2l0aW9uPzogYm9vbGVhbjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGludGVyZmFjZSBPcmllbnRhdGlvbkxpc3RlbmVySG9sZGVyIHtcclxuICAgICAgICAgICAgW2tleTogc3RyaW5nXTogSU9yaWVudGF0aW9uQ2hhbmdlZExpc3RlbmVyO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgVEFHID0gXCJbQ0RQLkZyYW1ld29ya10gXCI7XHJcblxyXG4gICAgICAgIGxldCBfZGZJbml0aWFsaXplOiBKUXVlcnlEZWZlcnJlZDx2b2lkPiA9ICQuRGVmZXJyZWQ8dm9pZD4oKTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQGVuIEluaXRpYWxpemF0aW9uIGZ1bmN0aW9uIG9mIEZyYW1ld29yay5cclxuICAgICAgICAgKiBAamEgRnJhbWV3b3JrIOOBruWIneacn+WMlumWouaVsFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGV4cG9ydCBmdW5jdGlvbiBpbml0aWFsaXplKG9wdGlvbnM/OiBGcmFtZXdvcmtPcHRpb25zKTogSVByb21pc2VCYXNlPHZvaWQ+IHtcclxuICAgICAgICAgICAgaWYgKFwicGVuZGluZ1wiICE9PSBfZGZJbml0aWFsaXplLnN0YXRlKCkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiA8YW55Pl9kZkluaXRpYWxpemUucHJvbWlzZSgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBDRFAg55Kw5aKD44Gu5Yid5pyf5YyWXHJcbiAgICAgICAgICAgIC8vIOePvueKtuOBr+OAgWNvbnNvbGUg44Kq44OW44K444Kn44Kv44OI44Gu5L+d6Ki844GoIGpRdWVyeSDjga4gV2luUlQg5a++5b+c44CCXHJcbiAgICAgICAgICAgIENEUC5pbml0aWFsaXplKHtcclxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6ICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjb25maWcgPSBnZXRDb25maWcob3B0aW9ucyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIEZyYW1ld29yayDnlKjjga4gUGF0Y2gg6YGp55SoIChGcmFtZXdvcmsg5Yid5pyf5YyW5YmNKVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjb25maWcuYXBwbHlQYXRjaCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBGcmFtZXdvcmsuUGF0Y2guYXBwbHlCZWZvcmVJbml0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBjb25maWcg44Gu5Y+N5pigOiBqcXVlcnlcclxuICAgICAgICAgICAgICAgICAgICBjb25maWcuYXBwbHlKUXVlcnlDb25maWcoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8galF1ZXJ5IE1vYmlsZSDjga7liJ3mnJ/ljJZcclxuICAgICAgICAgICAgICAgICAgICAkKGRvY3VtZW50KS5vbihcIm1vYmlsZWluaXRcIiwgKCk6IHZvaWQgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25maWcg44Gu5Y+N5pigOiBqcXVlcnkgbW9iaWxlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZy5hcHBseUpRdWVyeU1vYmlsZUNvbmZpZygpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2RwLmkxOG4g44Gu5Yid5pyf5YyWXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIENEUC5pbml0aWFsaXplSTE4Tihjb25maWcuaTE4bilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hbHdheXMoKGluZm8pID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpMThuZXh0IOOBruWIneacn+WMluaZguOBruOCqOODqeODvOOBr+eEoeimluOBmeOCiy4gaW5mbyDjgYwgYXJyYXkg44Gu5aC05ZCI44CB44Ko44Op44O85oOF5aCx44GM5qC857SN44GV44KM44Gm44GE44KLLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoZG9jdW1lbnQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5vbmUoXCJwYWdlYmVmb3JlY2hhbmdlXCIsIChldmVudDogSlF1ZXJ5LkV2ZW50LCBkYXRhOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICg8Q2hhbmdlUGFnZU9wdGlvbnM+ZGF0YS5vcHRpb25zKS5zaG93TG9hZE1zZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAub24oXCJwYWdlYmVmb3JlY3JlYXRlXCIsIChldmVudDogSlF1ZXJ5LkV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpMThuZXh044Op44Kk44OW44Op44Oq44Gr44KI44KLaHRtbCBmcmFnbWVudOOBrue/u+ios+WHpueQhlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKDxhbnk+JChldmVudC50YXJnZXQpKS5sb2NhbGl6ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUm91dGVyIOOBruWIneacn+WMllxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChSb3V0ZXIuX2luaXRpYWxpemUoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbmNob3JWY2xpY2s6IGNvbmZpZy5hbmNob3JWY2xpY2ssXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpcnN0UGFnZVRyYW5zaXRpb246IGNvbmZpZy5maXJzdFBhZ2VUcmFuc2l0aW9uLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZyYW1ld29yayDnlKjjga4gUGF0Y2gg6YGp55SoIChGcmFtZXdvcmsg5Yid5pyf5YyW5b6MKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29uZmlnLmFwcGx5UGF0Y2gpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZyYW1ld29yay5QYXRjaC5hcHBseUFmdGVySW5pdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9kZkluaXRpYWxpemUucmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9kZkluaXRpYWxpemUucmVqZWN0KG1ha2VFcnJvckluZm8oXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSRVNVTFRfQ09ERS5FUlJPUl9DRFBfRlJBTUVXT1JLX1JPVVRFUl9JTklUSUFMSVpFX0ZBSUxFRCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRBRyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZXJyb3IuIENEUC5GcmFtZXdvcmsuUm91dGVyLmluaXRpYWxpemUoKSBmYWlsZWQuXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9kZkluaXRpYWxpemUgPSAkLkRlZmVycmVkPHZvaWQ+KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHsgLy8galF1ZXJ5IE1vYmlsZSDjga7jg63jg7zjg4lcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8ganF1ZXJ5IDMrXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGpxdWVyeU1ham9yID0gfn4kLmZuLmpxdWVyeS5zcGxpdChcIi5cIilbMF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgzIDw9IGpxdWVyeU1ham9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoNCA8PSBqcXVlcnlNYWpvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihUQUcgKyBcImpxdWVyeS1taWdyYXRlIGZvciAzLjAuMCsgaW4gdXNlLlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmUoW1wianF1ZXJ5LW1pZ3JhdGVcIl0sICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlKFtcImpxdWVyeS5tb2JpbGVcIl0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlKFtcImpxdWVyeS5tb2JpbGVcIl0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGZhaWw6IChlcnJvcjogRXJyb3JJbmZvKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgX2RmSW5pdGlhbGl6ZS5yZWplY3QobWFrZUVycm9ySW5mbyhcclxuICAgICAgICAgICAgICAgICAgICAgICAgUkVTVUxUX0NPREUuRVJST1JfQ0RQX0ZSQU1FV09SS19JTklUSUFMSVpFX0ZBSUxFRCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgVEFHLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcImVycm9yLiBDRFAuaW5pdGlhbGl6ZSgpIGZhaWxlZC5cIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JcclxuICAgICAgICAgICAgICAgICAgICApKTtcclxuICAgICAgICAgICAgICAgICAgICBfZGZJbml0aWFsaXplID0gJC5EZWZlcnJlZDx2b2lkPigpO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gPGFueT5fZGZJbml0aWFsaXplLnByb21pc2UoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBlbiBDaGVjayBmb3IgaW5pdGlhbGl6YXRpb24gc3RhdHVzLlxyXG4gICAgICAgICAqIEBqYSDliJ3mnJ/ljJbmuIjjgb/jgYvliKTlrppcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm5zXHJcbiAgICAgICAgICogLSBgZW5gIHRydWU6IGluaXRpYWxpemVkIC8gZmFsc2U6IHVuaW5pdGlhbGl6ZWRcclxuICAgICAgICAgKiAtIGBqYWAgdHJ1ZTog5Yid5pyf5YyW5riI44G/IC8gZmFsc2U6IOacquWIneacn+WMllxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGV4cG9ydCBmdW5jdGlvbiBpc0luaXRpYWxpemVkKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICByZXR1cm4gXCJyZXNvbHZlZFwiID09PSBfZGZJbml0aWFsaXplLnN0YXRlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAZW4gV2FpdCBmb3IgaW5pdGlhbGl6YXRpb24gc3RhdHVzLlxyXG4gICAgICAgICAqIEBqYSDliJ3mnJ/ljJblvoXjgaFcclxuICAgICAgICAgKi9cclxuICAgICAgICBleHBvcnQgZnVuY3Rpb24gd2FpdEZvckluaXRpYWxpemUoKTogSVByb21pc2VCYXNlPHZvaWQ+IHtcclxuICAgICAgICAgICAgcmV0dXJuIDxhbnk+X2RmSW5pdGlhbGl6ZS5wcm9taXNlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBfb3JpZW50YXRpb25MaXN0ZW5lckhvbGRlcjogT3JpZW50YXRpb25MaXN0ZW5lckhvbGRlciA9IHt9O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAZW4gUmVnaXN0ZXIgSU9yaWVudGF0aW9uQ2hhbmdlZExpc3RlbmVyIHRvIGZyYW1ld29yay5cclxuICAgICAgICAgKiBAamEgSU9yaWVudGF0aW9uQ2hhbmdlZExpc3RlbmVyIOOCkiBGcmFtZXdvcmsg44Gr55m76YyyXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0ga2V5XHJcbiAgICAgICAgICogIC0gYGVuYCBJRCBrZXlcclxuICAgICAgICAgKiAgLSBgamFgIOOCr+ODqeOCpOOCouODs+ODiOOBp+euoeeQhuWPr+iDveOBqiBJRFxyXG4gICAgICAgICAqIEBwYXJhbSBsaXN0ZW5lclxyXG4gICAgICAgICAqICAtIGBlbmAgSU9yaWVudGF0aW9uQ2hhbmdlZExpc3RlbmVyIGluc3RhbmNlXHJcbiAgICAgICAgICogIC0gYGphYCBJT3JpZW50YXRpb25DaGFuZ2VkTGlzdGVuZXIg44Kk44Oz44K544K/44Oz44K5XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZXhwb3J0IGZ1bmN0aW9uIHJlZ2lzdGVyT3JpZW50YXRpb25DaGFuZ2VkTGlzdGVuZXIoa2V5OiBzdHJpbmcsIGxpc3RlbmVyOiBJT3JpZW50YXRpb25DaGFuZ2VkTGlzdGVuZXIpOiB2b2lkIHtcclxuICAgICAgICAgICAgX29yaWVudGF0aW9uTGlzdGVuZXJIb2xkZXJba2V5XSA9IGxpc3RlbmVyO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQGVuIFVucmVnaXN0ZXIgSU9yaWVudGF0aW9uQ2hhbmdlZExpc3RlbmVyIGZyb20gZnJhbWV3b3JrLlxyXG4gICAgICAgICAqIEBqYSBJT3JpZW50YXRpb25DaGFuZ2VkTGlzdGVuZXIg44KSIEZyYW1ld29yayDjgYvjgonnmbvpjLLop6PpmaRcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBrZXlcclxuICAgICAgICAgKiAgLSBgZW5gIElEIGtleSBieSB1c2luZyByZWdpc3RlclxyXG4gICAgICAgICAqICAtIGBqYWAg55m76Yyy5pmC44Gr5L2/55So44GX44GfIElEXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZXhwb3J0IGZ1bmN0aW9uIHVucmVnaXN0ZXJPcmllbnRhdGlvbkNoYW5nZWRMaXN0ZW5lcihrZXk6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgICAgICAgICBkZWxldGUgX29yaWVudGF0aW9uTGlzdGVuZXJIb2xkZXJba2V5XTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBfYWN0aXZlUGFnZTogSVBhZ2UgPSBudWxsO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAZW4gU2V0dXAgZXZlbnQgaGFuZGxlcnMgd2hlbiBhZnRlciByb3V0ZXIgaW5pdGlhbGl6ZWQuXHJcbiAgICAgICAgICogQGphIOOCpOODmeODs+ODiOODj+ODs+ODieODqeOBruioreWumi4gUm91dGVyIOWIneacn+WMluW+jOOBqyBGcmFtZXdvcmsg44GM44Kz44O844Or44GZ44KLLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQGludGVybmFsXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZXhwb3J0IGZ1bmN0aW9uIF9zZXR1cEV2ZW50SGFuZGxlcnMoKTogdm9pZCB7XHJcbiAgICAgICAgICAgICgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBvbGRCYWNrQnV0dG9uSGFuZGxlciA9IENEUC5zZXRCYWNrQnV0dG9uSGFuZGxlcihudWxsKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGJhc2VCYWNrQnV0dG9uSGFuZGxlciA9IChldmVudD86IEpRdWVyeS5FdmVudCk6IHZvaWQgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChfYWN0aXZlUGFnZSAmJiBfYWN0aXZlUGFnZS5vbkhhcmR3YXJlQmFja0J1dHRvbihldmVudCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8g44Kv44Op44Kk44Ki44Oz44OI5YG044Gn44OP44Oz44OJ44Oq44Oz44Kw5riI44G/44Go5oyH5a6a44GV44KM44Gf5aC05ZCI44CB5pei5a6a44Gu5Yem55CG44KS6KGM44KP44Gq44GEXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbGRCYWNrQnV0dG9uSGFuZGxlcihldmVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIENEUC5zZXRCYWNrQnV0dG9uSGFuZGxlcihiYXNlQmFja0J1dHRvbkhhbmRsZXIpO1xyXG4gICAgICAgICAgICB9KSgpO1xyXG4gICAgICAgICAgICAoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgb2xkUm91dGVDaGFuZ2VIYW5kbGVyID0gQ0RQLkZyYW1ld29yay5zZXRCZWZvcmVSb3V0ZUNoYW5nZUhhbmRsZXIobnVsbCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBiYXNlUm91dGVDaGFuZ2VIYW5kbGVyID0gKCk6IElQcm9taXNlQmFzZTxhbnk+ID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoX2FjdGl2ZVBhZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9hY3RpdmVQYWdlLm9uQmVmb3JlUm91dGVDaGFuZ2UoKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gb2xkUm91dGVDaGFuZ2VIYW5kbGVyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIENEUC5GcmFtZXdvcmsuc2V0QmVmb3JlUm91dGVDaGFuZ2VIYW5kbGVyKGJhc2VSb3V0ZUNoYW5nZUhhbmRsZXIpO1xyXG4gICAgICAgICAgICB9KSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IF9sYXN0T3JpZW50YXRpb246IE9yaWVudGF0aW9uID0gbnVsbDtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQGVuIFNldHVwIGFjdGl2ZSBJUGFnZSBpbnN0YW5jZS5cclxuICAgICAgICAgKiBAamEgYWN0aXZlIFBhZ2Ug44Gu6Kit5a6aLiBGcmFtZXdvcmsg44GM44Kz44O844Or44GZ44KLLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQGludGVybmFsXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZXhwb3J0IGZ1bmN0aW9uIF9zZXRBY3RpdmVQYWdlKHBhZ2U6IElQYWdlKTogdm9pZCB7XHJcbiAgICAgICAgICAgIF9hY3RpdmVQYWdlID0gcGFnZTtcclxuICAgICAgICAgICAgaWYgKF9hY3RpdmVQYWdlKSB7XHJcbiAgICAgICAgICAgICAgICBfbGFzdE9yaWVudGF0aW9uID0gZ2V0T3JpZW50YXRpb24oKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQGVuIFJldGVybnMgZnJhbWV3b3JrIGRlZmF1bHQgY2xpY2sgZXZlbnQgc3RyaW5nLlxyXG4gICAgICAgICAqIEBqYSBGcmFtZXdvcmsg44GM5pei5a6a44Gr5L2/55So44GZ44KL44Kv44Oq44OD44Kv44Kk44OZ44Oz44OI5paH5a2X5YiX44KS5Y+W5b6XXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJucyBcInZjbGlja1wiIC8gXCJjbGlja1wiXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZXhwb3J0IGZ1bmN0aW9uIGdldERlZmF1bHRDbGlja0V2ZW50KCk6IHN0cmluZyB7XHJcbiAgICAgICAgICAgIHJldHVybiBQYXRjaC5zX3ZjbGlja0V2ZW50O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IF9wYWdlQ29uc3RydWN0b3JzOiAobmV3ICgpID0+IElQYWdlKVtdID0gW107XHJcbiAgICAgICAgbGV0IF9wYWdlSW5zdGFuY2VzOiBJUGFnZVtdID0gW107XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBlbiBSZWdpc3RlciBDb25jcmV0ZSBJUGFnZSBjbGFzcy4gPGJyPlxyXG4gICAgICAgICAqICAgICBJZiBjb25zdHJ1Y3RvciBuZWVkcyBhcmd1bWVudHMsIHVzZSBiaW5kKCkgZnVuY3Rpb24uXHJcbiAgICAgICAgICogQGphIFBhZ2Ug44Gu55m76YyyIDxicj5cclxuICAgICAgICAgKiAgICAgY29uc3RydWN0b3Ig44KS5oyH5a6a44GZ44KLLiDlvJXmlbDjgYzjgYLjgovloLTlkIjjga/jgIFiaW5kIOOCkuihjOOBhuOBk+OBqFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGN0b3JcclxuICAgICAgICAgKiAgLSBgZW5gIENvbmNyZXRlIElQYWdlIGNsYXNzIGNvbnN0cnVjdG9yXHJcbiAgICAgICAgICogIC0gYGphYCDjgrPjg7Pjgrnjg4jjg6njgq/jgr/jgpLmjIflrppcclxuICAgICAgICAgKi9cclxuICAgICAgICBleHBvcnQgZnVuY3Rpb24gcmVnaXN0ZXJQYWdlKGN0b3I6IG5ldyAoKSA9PiBJUGFnZSk6IHZvaWQge1xyXG4gICAgICAgICAgICBfcGFnZUNvbnN0cnVjdG9ycy5wdXNoKGN0b3IpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQGVuIFBhZ2UgaW5zdGFuY2VzIGFyZSBnZW5lcmF0ZWQgZnJvbSB0aGUgcmVzZXJ2ZWQgY29uc3RydWN0b3IuXHJcbiAgICAgICAgICogQGphIOS6iOe0hOOBleOCjOOBn+OCs+ODs+OCueODiOODqeOCr+OCv+OBi+OCiVBhZ2Ug44Kk44Oz44K544K/44Oz44K544KS55Sf5oiQXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZXhwb3J0IGZ1bmN0aW9uIGNvbnN0cnVjdFBhZ2VzKCk6IHZvaWQge1xyXG4gICAgICAgICAgICBfcGFnZUNvbnN0cnVjdG9ycy5mb3JFYWNoKChjdG9yOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgIF9wYWdlSW5zdGFuY2VzLnB1c2gobmV3IGN0b3IoKSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBfcGFnZUNvbnN0cnVjdG9ycyA9IFtdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQGVuIFJlbGVhc2UgUGFnZSBpbnN0YW5jZSByZWZlcmVuY2VcclxuICAgICAgICAgKiBAamEgUGFnZSDjgqTjg7Pjgrnjgr/jg7Pjgrnjga7lj4LnhafjgpLnoLTmo4RcclxuICAgICAgICAgKi9cclxuICAgICAgICBleHBvcnQgZnVuY3Rpb24gZGlzcG9zZVBhZ2VzKCk6IHZvaWQge1xyXG4gICAgICAgICAgICBfcGFnZUluc3RhbmNlcyA9IFtdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQGVuIEdldCBDb25maWcgb2JqZWN0LlxyXG4gICAgICAgICAqIEBqYSBDb25maWcgb2JqZWN0IOOBruWPluW+l1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQGludGVybmFsXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gZ2V0Q29uZmlnKG9wdGlvbnM6IEZyYW1ld29ya09wdGlvbnMpOiBGcmFtZXdvcmtPcHRpb25zIHtcclxuICAgICAgICAgICAgY29uc3QgZGVmQ29uZmlnID0ge1xyXG4gICAgICAgICAgICAgICAgLy8gZm9yIGZhaWwgc2FmZSwgZGVmYXVsdCBzZXR0aW5ncy5cclxuICAgICAgICAgICAgICAgIGpxdWVyeToge1xyXG4gICAgICAgICAgICAgICAgICAgIGFqYXhTZXR1cDogeyBjYWNoZTogZmFsc2UgfSxcclxuICAgICAgICAgICAgICAgICAgICBtaWdyYXRlTXV0ZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICAgICAganF1ZXJ5bW9iaWxlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgYWxsb3dDcm9zc0RvbWFpblBhZ2VzOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHRQYWdlVHJhbnNpdGlvbjogXCJwbGF0Zm9ybS1kZWZhdWx0XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdERpYWxvZ1RyYW5zaXRpb246IFwicGxhdGZvcm0tZGVmYXVsdFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIGhhc2hMaXN0ZW5pbmdFbmFibGVkOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICBwdXNoU3RhdGVFbmFibGVkOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICAvLyBAc2VlIGpxdWVyeS5tb2JpbGUuanMgTElORSA2Mzk0XHJcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNpdGlvbkhhbmRsZXI6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdEhhbmRsZXI6IFwic2ltdWx0YW5lb3VzXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlcXVlbnRpYWw6IFtcImZhZGVcIiwgXCJmbGlwXCIsIFwiZmxvd1wiXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2ltdWx0YW5lb3VzOiBbXSxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgICAgICBpMThuOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZmFsbGJhY2tSZXNvdXJjZXM6IHt9LFxyXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnM6IHt9LFxyXG4gICAgICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgICAgICBhcHBseVBhdGNoOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgYW5jaG9yVmNsaWNrOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgZmlyc3RQYWdlVHJhbnNpdGlvbjogZmFsc2UsXHJcblxyXG4gICAgICAgICAgICAgICAgYXBwbHlKUXVlcnlDb25maWc6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyh0aGlzLmpxdWVyeSkuZm9yRWFjaCgoa2V5KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcImFqYXhTZXR1cFwiID09PSBrZXkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQuYWpheFNldHVwKHRoaXMuanF1ZXJ5LmFqYXhTZXR1cCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkW2tleV0gPSB0aGlzLmpxdWVyeVtrZXldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgICAgIGFwcGx5SlF1ZXJ5TW9iaWxlQ29uZmlnOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJC5tb2JpbGUubG9hZGVyLnByb3RvdHlwZS5vcHRpb25zLnRleHQgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmtleXModGhpcy5qcXVlcnltb2JpbGUpLmZvckVhY2goKGtleSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoXCJ0cmFuc2l0aW9uSGFuZGxlclwiID09PSBrZXkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0ICRtb2JpbGU6IGFueSA9ICQubW9iaWxlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGVmYXVsdCBoYW5kbGVyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkbW9iaWxlLmRlZmF1bHRUcmFuc2l0aW9uSGFuZGxlclxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID0gJG1vYmlsZS50cmFuc2l0aW9uSGFuZGxlcnNbdGhpcy5qcXVlcnltb2JpbGUudHJhbnNpdGlvbkhhbmRsZXIuZGVmYXVsdEhhbmRsZXJdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2ltdWx0YW5lb3VzIGhhbmRsZXJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuanF1ZXJ5bW9iaWxlLnRyYW5zaXRpb25IYW5kbGVyLnNpbXVsdGFuZW91cy5mb3JFYWNoKCh0cmFuc2l0aW9uKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJG1vYmlsZS50cmFuc2l0aW9uSGFuZGxlcnNbdHJhbnNpdGlvbl0gPSAkbW9iaWxlLnRyYW5zaXRpb25IYW5kbGVycy5zaW11bHRhbmVvdXM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNlcXVlbnRpYWwgaGFuZGxlclxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5qcXVlcnltb2JpbGUudHJhbnNpdGlvbkhhbmRsZXIuc2VxdWVudGlhbC5mb3JFYWNoKCh0cmFuc2l0aW9uKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJG1vYmlsZS50cmFuc2l0aW9uSGFuZGxlcnNbdHJhbnNpdGlvbl0gPSAkbW9iaWxlLnRyYW5zaXRpb25IYW5kbGVycy5zZXF1ZW50aWFsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkLm1vYmlsZVtrZXldID0gdGhpcy5qcXVlcnltb2JpbGVba2V5XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiAkLmV4dGVuZCh0cnVlLCB7fSwgZGVmQ29uZmlnLCBDRFAuQ29uZmlnLCBvcHRpb25zKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAgICAgLy8gY2xvc3VyZSBtZXRob2RzXHJcblxyXG4gICAgICAgIC8vIHJlc2l6ZSBoYW5kbGVyXHJcbiAgICAgICAgJCh3aW5kb3cpLm9uKFwicmVzaXplXCIsIChldmVudDogSlF1ZXJ5LkV2ZW50KTogdm9pZCA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG5ld09yaWVudGF0aW9uID0gZ2V0T3JpZW50YXRpb24oKTtcclxuICAgICAgICAgICAgaWYgKF9sYXN0T3JpZW50YXRpb24gIT09IG5ld09yaWVudGF0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBfb3JpZW50YXRpb25MaXN0ZW5lckhvbGRlcikge1xyXG4gICAgICAgICAgICAgICAgICAgIF9vcmllbnRhdGlvbkxpc3RlbmVySG9sZGVyW2tleV0ub25PcmllbnRhdGlvbkNoYW5nZWQobmV3T3JpZW50YXRpb24pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKF9hY3RpdmVQYWdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX2FjdGl2ZVBhZ2Uub25PcmllbnRhdGlvbkNoYW5nZWQobmV3T3JpZW50YXRpb24pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgX2xhc3RPcmllbnRhdGlvbiA9IG5ld09yaWVudGF0aW9uO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uLy4uL0B0eXBlcy9qcXVlcnkubW9iaWxlLmQudHNcIiAvPlxyXG4vKiB0c2xpbnQ6ZGlzYWJsZTptYXgtbGluZS1sZW5ndGggbm8tc3RyaW5nLWxpdGVyYWwgKi9cclxuXHJcbm5hbWVzcGFjZSBDRFAuRnJhbWV3b3JrIHtcclxuXHJcbiAgICBpbXBvcnQgUHJvbWlzZSA9IENEUC5Qcm9taXNlO1xyXG5cclxuICAgIGNvbnN0IFRBRyA9IFwiW0NEUC5GcmFtZXdvcmsuUm91dGVyXSBcIjtcclxuXHJcbiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgLy8gY2xvc3VyZSBtZXRob2RzXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZW4gQ29udmVydCBwYXRoIHRvIFVSTC4gPGJyPlxyXG4gICAgICogICAgIElmIHRoZSBwYXRoIHN0YXJ0cyBmcm9tIFwiL1wiLCB0aGUgZnVuY3Rpb24gdHJhbnNsYXRlIHRoZSBwYXRoIGFzIGNoaWxkIGZvbGRlciBvZiBcIndlYiByb290XCIuIDxicj5cclxuICAgICAqICAgICBPdGhlcndpc2UsIGl0IGludGVycHJldHMgYXMgcmVsYXRpdmUgcGF0aCBmcm9tIGN1cnJlbnQgcGFnZS4gPGJyPlxyXG4gICAgICogICAgIFtOb3RlXSBUaGlzIGJlaGF2aW9yIGdvIGFsb25nIHdpdGggalFNLCBOT1Qgd2l0aCByZXF1aXJlLnRvVXJsKCkuXHJcbiAgICAgKlxyXG4gICAgICogQGphIHBhdGgg44KSIFVSTCDjgavlpInmj5sgPGJyPlxyXG4gICAgICogICAgIFwiL1wiIOOBi+OCieWni+OBvuOCi+OCguOBruOBryB3ZWIgcm9vdCDjgYvjgonjgIHjgZ3jgozku6XlpJbjga/nj77lnKjjga7jg5rjg7zjgrjjgYvjgonntbblr77jg5HjgrlVUkzjgavlpInmj5vjgZnjgovjgIIgPGJyPlxyXG4gICAgICogICAgIGpRTSDjga7mjJnli5XjgavjgYLjgo/jgZvjgabjgYrjgorjgIFyZXF1aXJlLnRvVXJsKCkg44Go55Ww44Gq44KL44Gu44Gn5rOo5oSP44CCXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHBhdGhcclxuICAgICAqICAtIGBlbmAgc2V0IHJlbGF0aXZlIHBhdGggZnJvbSBbW3dlYlJvb3RdXSwgb3IgcmVsYXRpdmUgcGF0aCBmcm9tIGN1cnJlbnQgc2NpcnB0IG93bmVyIGh0bWwgKEl0IGRvZXNuJ3Qgc3RhcnQgZnJvbSBcIi9cIikuXHJcbiAgICAgKiAgLSBgamFgIFtbd2ViUm9vdF1dIOOBi+OCieOBruebuOWvvuODkeOCuSwg44KC44GX44GP44Gv44Kr44Os44Oz44OI44K544Kv44Oq44OX44OI44KS6LWw44KJ44Gb44Gm44GE44KLIEhUTUwg44GL44KJ44Gu55u45a++44OR44K5IChcIi9cIiDjgarjgZcpLlxyXG4gICAgICovXHJcbiAgICBleHBvcnQgZnVuY3Rpb24gdG9VcmwocGF0aDogc3RyaW5nKTogc3RyaW5nIHtcclxuICAgICAgICBpZiAobnVsbCAhPSBwYXRoWzBdICYmIFwiL1wiID09PSBwYXRoWzBdKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBDRFAudG9VcmwocGF0aCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuICQubW9iaWxlLnBhdGgubWFrZVVybEFic29sdXRlKHBhdGgsIGdldEN1cnJlbnREb2N1bWVudFVybCgpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZW4gR2V0IGN1cnJlbnQgZG9jdW1lbnQgdXJsLlxyXG4gICAgICogQGphIOePvuWcqOihqOekuuOBl+OBpuOBhOOCi+ODieOCreODpeODoeODs+ODiOOBriBVUkwg44KS5Y+W5b6XXHJcbiAgICAgKlxyXG4gICAgICogQGludGVybmFsXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIGdldEN1cnJlbnREb2N1bWVudFVybCgpOiBzdHJpbmcge1xyXG4gICAgICAgIGNvbnN0ICRhY3RpdmVQYWdlID0gKDxhbnk+JChcImJvZHlcIikpLnBhZ2Vjb250YWluZXIoXCJnZXRBY3RpdmVQYWdlXCIpO1xyXG4gICAgICAgIGlmIChudWxsID09ICRhY3RpdmVQYWdlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAkLm1vYmlsZS5wYXRoLmRvY3VtZW50QmFzZS5ocmVmTm9IYXNoO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgYmFzZSA9ICQubW9iaWxlLnBhdGguZG9jdW1lbnRCYXNlLmhyZWZOb0hhc2g7XHJcbiAgICAgICAgbGV0IHVybCA9ICQubW9iaWxlLmFjdGl2ZVBhZ2UuY2xvc2VzdChcIi51aS1wYWdlXCIpLmpxbURhdGEoXCJ1cmxcIik7XHJcblxyXG4gICAgICAgIGlmICghdXJsIHx8ICEkLm1vYmlsZS5wYXRoLmlzUGF0aCh1cmwpKSB7XHJcbiAgICAgICAgICAgIHVybCA9IGJhc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gJC5tb2JpbGUucGF0aC5tYWtlVXJsQWJzb2x1dGUodXJsLCBiYXNlKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBlbiBEZWZhdWx0IFwiYmVmb3JlIHJvdXRlIGNoYW5nZVwiIGhhbmRsZXIuXHJcbiAgICAgKiBAamEg5pei5a6a44GuIFwiYmVmb3JlIHJvdXRlIGNoYW5nZVwiIOODj+ODs+ODieODqVxyXG4gICAgICpcclxuICAgICAqIEBpbnRlcm5hbFxyXG4gICAgICovXHJcbiAgICBsZXQgX2JlZm9yZVJvdXRlQ2hhbmdlID0gKCk6IElQcm9taXNlQmFzZTxhbnk+ID0+IHtcclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIGRlZmF1bHQgXCJiZWZvcmUgcm91dGUgY2hhbmdlXCIgaGFubmRsZXJcclxuICAgIGNvbnN0IF9kZWZhdWx0QmVmb3JlUm91dGVDaGFuZ2UgPSBfYmVmb3JlUm91dGVDaGFuZ2U7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZW4gU2V0dXAgXCJiZWZvcmUgcm91dGUgY2hhbmdlXCIgaGFuZGxlci5cclxuICAgICAqIEBqYSBcImJlZm9yZSByb3V0ZSBjaGFuZ2VcIiDjg4/jg7Pjg4njg6noqK3lrppcclxuICAgICAqXHJcbiAgICAgKiBAaW50ZXJuYWxcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW1cclxuICAgICAqICAtIGBlbmAgaGFuZGxlciBmdW5jdGlvbi5cclxuICAgICAqICAtIGBqYWAgaGFuZGxlciDmjIflrpouXHJcbiAgICAgKiBAcmV0dXJuc1xyXG4gICAgICogIC0gYGVuYCBvbGQgaGFuZGxlciBmdW5jdGlvbi5cclxuICAgICAqICAtIGBqYWAg5Lul5YmN44GuIGhhbmRsZXIuXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBmdW5jdGlvbiBzZXRCZWZvcmVSb3V0ZUNoYW5nZUhhbmRsZXIoaGFuZGxlcjogKCkgPT4gSVByb21pc2VCYXNlPGFueT4pOiAoKSA9PiBJUHJvbWlzZUJhc2U8YW55PiB7XHJcbiAgICAgICAgaWYgKG51bGwgPT0gaGFuZGxlcikge1xyXG4gICAgICAgICAgICByZXR1cm4gX2JlZm9yZVJvdXRlQ2hhbmdlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG9sZEhhbmRsZXIgPSBfYmVmb3JlUm91dGVDaGFuZ2U7XHJcbiAgICAgICAgICAgIF9iZWZvcmVSb3V0ZUNoYW5nZSA9IGhhbmRsZXI7XHJcbiAgICAgICAgICAgIHJldHVybiBvbGRIYW5kbGVyO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvL19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18vL1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGVuIGluaXRpYWxpemUgb3B0aW9uIGRlZmluaXRpb24uXHJcbiAgICAgKiBAamEg5Yid5pyf5YyW44Kq44OX44K344On44OzXHJcbiAgICAgKlxyXG4gICAgICogQGludGVybmFsXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgSW5pdE9wdGlvbnMge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBlbiB0cnVlOiBzdXBwb3J0cyBpbXBsaWNpdCBhbmNob3IgXCJ2Y2xpY2tcIi5cclxuICAgICAgICAgKiBAamEgdHJ1ZTog5pqX6buZ44GuIGFuY2hvciB2Y2xpY2sg44KS44K144Od44O844OIXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgYW5jaG9yVmNsaWNrPzogYm9vbGVhbjtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQGVuIGp1ZGdlIHRoZSB0cmFuc2l0aW9uIGlzIGZpcnN0IHBhZ2Uncy5cclxuICAgICAgICAgKiBAamEg5Yid5pyf44Oa44O844K444OI44Op44Oz44K444K344On44Oz44Gn44GC44KL44GL5Yik5a6aXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZmlyc3RQYWdlVHJhbnNpdGlvbj86IGJvb2xlYW47XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZW4gTWFuYWdlbWVudCBpbmZvIGZvciBwYWdlLiA8YnI+XHJcbiAgICAgKiAgICAgVGhpcyBpbnRlcmZhY2Ugcm9sZSBpcyBub3Qgc2FtZSBhcyBCYWNrYm9uZS5Sb3V0ZXIucm91dGVzLiA8YnI+XHJcbiAgICAgKiAgICAgVXNpbmcgZm9yIHJlc29sdmluZyByZWxhdGlvbiBhIGtub3duIGZyYWdtZW50IHZhbHVlIGFuZCBhIHBhZ2UgcGF0aC5cclxuICAgICAqXHJcbiAgICAgKiBAamEg44Oa44O844K4566h55CG5oOF5aCxIDxicj5cclxuICAgICAqICAgICBCYWNrYm9uZS5Sb3V0ZXIucm91dGVzIOOBqOWQjOOBmOW9ueWJsuOBp+OBr+OBquOBhOOAgiA8YnI+XHJcbiAgICAgKiAgICAg6YG356e744GX44Gf44GT44Go44GM44GC44KL44OV44Op44Kw44Oh44Oz44OI5YCk44Go44Oa44O844K444Gu44OR44K544Gu6Kej5rG644Gr5L2/55So44GV44KM44KL44CCXHJcbiAgICAgKlxyXG4gICAgICogQGludGVybmFsXHJcbiAgICAgKi9cclxuICAgIGludGVyZmFjZSBSb3V0ZUNvbnRleHQge1xyXG4gICAgICAgIHJvdXRlOiBzdHJpbmc7XHJcbiAgICAgICAgcmVnZXhwOiBSZWdFeHA7XHJcbiAgICAgICAgcGFnZTogc3RyaW5nO1xyXG4gICAgICAgIHRvcDogYm9vbGVhbjtcclxuICAgICAgICBjYWxsYmFjazogKC4uLmFyZ3M6IGFueVtdKSA9PiBib29sZWFuO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGVuIFN0b3JlZCBhZGRpdGlvbmFsIGluZm8gaW50ZXJmYWNlIG9uIG5hdmlnYXRlLlxyXG4gICAgICogQGphIOODmuODvOOCuOmBt+enu+OBq+mWouOBmeOCi+S7mOWKoOaDheWgseOCkuagvOe0jeOBmeOCi+OCpOODs+OCv+ODvOODleOCp+OCpOOCuVxyXG4gICAgICpcclxuICAgICAqIEBpbnRlcm5hbFxyXG4gICAgICovXHJcbiAgICBpbnRlcmZhY2UgTmF2aWdhdGVJbmZvIHtcclxuICAgICAgICB1cmw/OiBzdHJpbmc7XHJcbiAgICAgICAgdHJhbnNpdGlvbj86IHN0cmluZztcclxuICAgICAgICByZXZlcnNlPzogYm9vbGVhbjtcclxuICAgICAgICBiYWNrRGVzdGluYXRpb24/OiBzdHJpbmc7XHJcbiAgICAgICAgbm9IYXNoQ2hhbmdlPzogYm9vbGVhbjtcclxuICAgICAgICBpbnRlbnQ/OiBJbnRlbnQ7XHJcbiAgICAgICAgLy8gc3RhdHVzIHBhcmFtc1xyXG4gICAgICAgIHBvc2l0aXZlTmF2aWdhdGU/OiBib29sZWFuO1xyXG4gICAgICAgIGNhbGxlZEJlZm9yZVJvdXRlQ2hhbmdlPzogYm9vbGVhbjtcclxuICAgICAgICBpbk5hdmlnYXRpb24/OiBib29sZWFuO1xyXG4gICAgICAgIGluQWRkaXRpb25hbEJhY2s/OiBib29sZWFuO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGVuIEV4dGVuZWQgU3ViRmxvd1BhcmFtIGludGVyZmFjZSBpbiBGcmFtZXdvcmsgdXNlLlxyXG4gICAgICogQGphIEZyYW1ld29yayDjgYzkvb/nlKjjgZnjgosgU3ViRmxvd1BhcmFtIOaLoeW8teOCpOODs+OCv+ODvOODleOCp+OCpOOCuVxyXG4gICAgICpcclxuICAgICAqIEBpbnRlcm5hbFxyXG4gICAgICovXHJcbiAgICBpbnRlcmZhY2UgU3ViRmxvd1BhcmFtRXggZXh0ZW5kcyBTdWJGbG93UGFyYW0ge1xyXG4gICAgICAgIGFkZGl0aW9uYWxEaXN0YW5jZT86IG51bWJlcjtcclxuICAgIH1cclxuXHJcbiAgICAvL19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18vL1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGVuIFJvdXRlciBjbGFzcyBmb3IgYWRqdXN0aW5nIGpRdWVyeU1vYmlsZSBmdW5jdGlvbnMgYW5kIEJhY2tib25lLlJvdXRlciBmdW5jdGlvbnMuIDxicj5cclxuICAgICAqICAgICBFdmVuIGlmIEJhY2tib25lLlJvdXRlciBkb2VzIG5vdCBzdGFydCByb3V0aW5nLCBuYXRpZ2F0ZSgpIG1ldGhvZCB3b3JrcyBnb29kIHdpdGggalFNIGZyYW1ld29yay5cclxuICAgICAqXHJcbiAgICAgKiBAamEgalF1ZXJ5TW9iaWxlIOOBqCBCYWNrYm9uZS5Sb3V0ZXIg44KS6Kq/5YGc44GZ44KLIFJvdXRlciDjgq/jg6njgrkgPGJyPlxyXG4gICAgICogICAgIOODq+ODvOODhuOCo+ODs+OCsOOCkumWi+Wni+OBl+OBpuOBhOOBquOBhOWgtOWQiOOBq+OCguOAgW5hdmlnYXRlKCkg44GvIGpRTSDjg5Xjg6zjg7zjg6Djg6/jg7zjgq/jgpLkvb/nlKjjgZfjgabmqZ/og73jgZnjgovjgIJcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGNsYXNzIFJvdXRlciB7XHJcblxyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIHNfaW5pdE9wdGlvbnM6IEluaXRPcHRpb25zID0ge307XHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgc19yb3V0ZXI6IEJhY2tib25lLlJvdXRlciA9IG51bGw7XHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgc19yb290Q29udGV4dHM6IE9iamVjdCA9IHt9O1xyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIHNfbGFzdE5hdmlnYXRlSW5mbzogTmF2aWdhdGVJbmZvID0ge307XHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgc19sYXN0Q2xpY2tlZFRpbWU6IG51bWJlciA9IG51bGw7XHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgc19sYXN0SW50ZW50OiBJbnRlbnQgPSB7fTtcclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBzX2ZpcnN0Q2hhbmdlUGFnZTogYm9vbGVhbiA9IHRydWU7XHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgc19sb2FkVXJsOiAoZnJhZ21lbnQ6IHN0cmluZykgPT4gYm9vbGVhbiA9IG51bGw7XHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgc19iYWNrOiAoKSA9PiB2b2lkID0gbnVsbDtcclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBERUxBWV9USU1FID0gMjAwOyAgICAgICAgLy8gVEJEOiDmmqvlrprlgKRcclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBEQVRBX0JBQ0tfREVTVElOQVRJT04gPSBcImRhdGEtYmFjay1kc3RcIjtcclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBEQVRBX05PX0hBU0hfQ0hBTkdFID0gXCJkYXRhLW5vLWhhc2gtY2hhbmdlXCI7XHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgREFUQV9OT19WQ0xJQ0tfSEFORExFID0gXCJkYXRhLW5vLXZjbGljay1oYW5kbGVcIjtcclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBCQUNLX0RFU1RJTkFUSU9OX1VSTCA9IFwiYmFja0RzdFVybFwiO1xyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIFNVQkZMT1dfUEFSQU0gPSBcInN1YkZsb3dQYXJhbVwiO1xyXG5cclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBzX2RlZmF1bHRJbml0T3B0aW9uczogSW5pdE9wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgIGFuY2hvclZjbGljazogdHJ1ZSxcclxuICAgICAgICAgICAgZmlyc3RQYWdlVHJhbnNpdGlvbjogZmFsc2UsXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgc19kZWZhdWx0TmF2aWdhdGVPcHRpb25zOiBOYXZpZ2F0ZU9wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgIHRyaWdnZXI6IHRydWUsXHJcbiAgICAgICAgICAgIHJlcGxhY2U6IGZhbHNlLFxyXG4gICAgICAgICAgICBpbnRlbnQ6IG51bGwsXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgICAgICAvLyBwdWJsaWMgc3RhdGljIG1ldGhvZHNcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQGVuIGZvciBpbml0aWFsaXplIFJvdXRlci4gdGhpcyBmdW5jdGlvbiBpcyBjYWxsZWQgaW4gZnJhbWV3b3JrLlxyXG4gICAgICAgICAqIEBqYSDjgZPjga7plqLmlbDjga/jg5Xjg6zjg7zjg6Djg6/jg7zjgq/lhoXpg6jjgafkvb/nlKjjgZXjgozjgovjgIJcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBpbnRlcm5hbFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtICBvcHRpb25zXHJcbiAgICAgICAgICogIC0gYGVuYCBpbml0IG9wdGlvbnNcclxuICAgICAgICAgKiAgLSBgamFgIOWIneacn+WMluOCquODl+OCt+ODp+ODs1xyXG4gICAgICAgICAqIEByZXR1cm5zXHJcbiAgICAgICAgICogIC0gYGVuYCB0cnVlOiBzdWNjZWVkZWQgLyBmYWxzZTogZmFpbGVkLlxyXG4gICAgICAgICAqICAtIGBqYWAgdHJ1ZTog5oiQ5YqfIC8g5aSx5pWXXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBfaW5pdGlhbGl6ZShvcHRpb25zOiBJbml0T3B0aW9ucyk6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICBjb25zdCAkYm9keSA9ICQoXCJib2R5XCIpO1xyXG4gICAgICAgICAgICBpZiAoISFSb3V0ZXIuc19yb3V0ZXIpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihUQUcgKyBcImxvZ2ljIGVycm9yLiBpbml0aWFsaXplIGNhbGwgdHdpY2UuXCIpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBSb3V0ZXIuc19pbml0T3B0aW9ucyA9ICQuZXh0ZW5kKHt9LCBSb3V0ZXIuc19kZWZhdWx0SW5pdE9wdGlvbnMsIG9wdGlvbnMpO1xyXG4gICAgICAgICAgICBpZiAoUm91dGVyLnNfaW5pdE9wdGlvbnMuZmlyc3RQYWdlVHJhbnNpdGlvbikge1xyXG4gICAgICAgICAgICAgICAgUm91dGVyLnNfZmlyc3RDaGFuZ2VQYWdlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIEJhY2tib25lLlJvdXRlciDjgYzjgIFyb3V0ZSDjgpLop6PmsbrjgafjgY3jgarjgYvjgaPjgZ/loLTlkIjjgavjgoLpgJrnn6XjgpLmjZXmjYnjgZnjgovjgZ/jgoHjga7jgrPjg7zjg6vjg5Djg4Pjgq/jgpLoqK3lrppcclxuICAgICAgICAgICAgUm91dGVyLnNfbG9hZFVybCA9IF8uYmluZChCYWNrYm9uZS5oaXN0b3J5LmxvYWRVcmwsIEJhY2tib25lLmhpc3RvcnkpO1xyXG4gICAgICAgICAgICBCYWNrYm9uZS5oaXN0b3J5LmxvYWRVcmwgPSBSb3V0ZXIuY3VzdG9tTG9hZFVybDtcclxuICAgICAgICAgICAgUm91dGVyLnNfcm91dGVyID0gbmV3IEJhY2tib25lLlJvdXRlcigpO1xyXG4gICAgICAgICAgICBSb3V0ZXIuc19yb3V0ZXIub24oXCJyb3V0ZVwiLCBSb3V0ZXIub25Sb3V0ZVN1Y2NlZWRlZCk7XHJcblxyXG4gICAgICAgICAgICAvLyBCYWNrYm9uZS5Sb3V0ZXIg44KS5L2/55So44GX44Gm44GE44KL5aC05ZCI44CBJC5tb2JpbGUuYmFjaygpIOOBruaMmeWLleOCkuODluODqeOCpuOCtuOBrlvmiLvjgotd44Gr57Wx5LiAXHJcbiAgICAgICAgICAgIGlmICghJC5tb2JpbGUuaGFzaExpc3RlbmluZ0VuYWJsZWQpIHtcclxuICAgICAgICAgICAgICAgIFJvdXRlci5zX2JhY2sgPSBfLmJpbmQoJC5tb2JpbGUuYmFjaywgJC5tb2JpbGUpO1xyXG4gICAgICAgICAgICAgICAgJC5tb2JpbGUuYmFjayA9IFJvdXRlci5jdXN0b21KcW1CYWNrO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBjaGFuZ2VQYWdlIOOCkuOCteODneODvOODiFxyXG4gICAgICAgICAgICBpZiAobnVsbCA9PSAkLm1vYmlsZS5jaGFuZ2VQYWdlKSB7XHJcbiAgICAgICAgICAgICAgICAkLm1vYmlsZS5jaGFuZ2VQYWdlID0gKHRvOiBhbnksIG9wdD86IENoYW5nZVBhZ2VPcHRpb25zKTogdm9pZCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgKDxhbnk+JGJvZHkpLnBhZ2Vjb250YWluZXIoXCJjaGFuZ2VcIiwgdG8sIG9wdCk7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBSb3V0ZXIuYmluZEV2ZW50cygpO1xyXG4gICAgICAgICAgICAvLyBGcmFtZXdvcmsg44Gu44Kk44OZ44Oz44OI44OP44Oz44OJ44Op44KS5pu05pawXHJcbiAgICAgICAgICAgIEZyYW1ld29yay5fc2V0dXBFdmVudEhhbmRsZXJzKCk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBlbiBSZWdpc3RlciB0byBSb3V0ZXIuXHJcbiAgICAgICAgICogQGphIFJvdXRlciDjgbjjga7nmbvpjLIuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gcm91dGVcclxuICAgICAgICAgKiAgLSBgZW5gIHJvdXRlIHN0cmluZywgaXQgY2FuIGJlIHJlZ3VsYXIgZXhwcmVzc2lvbi5cclxuICAgICAgICAgKiAgLSBgamFgIOODq+ODvOODhuOCo+ODs+OCsOaWh+Wtl+WIlyAvIOato+imj+ihqOePvlxyXG4gICAgICAgICAqIEBwYXJhbSBwYWdlXHJcbiAgICAgICAgICogIC0gYGVuYCBwYWdlIHRlbXBsYXRlIHBhdGguXHJcbiAgICAgICAgICogIC0gYGphYCBwYWdlIHRlbXBsYXRlIHBhdGguIOOCpOODmeODs+ODiOWQjeOBq+OCguS9v+eUqOOBleOCjOOCi1xyXG4gICAgICAgICAqIEBwYXJhbSB0b3BcclxuICAgICAgICAgKiAgLSBgZW5gIHNldCBcInRydWVcIiBpZiBhcHBsaWNhdGlvbidzIHRvcCB2aWV3LiAob3B0aW9uYWwpXHJcbiAgICAgICAgICogIC0gYGphYCBUb3Ag44Oa44O844K444Gu5aC05ZCI44GvIHRydWUg44KS5oyH5a6aICjku7vmhI8pXHJcbiAgICAgICAgICogQHBhcmFtIGNhbGxiYWNrXHJcbiAgICAgICAgICogIC0gYGVuYCBjYWxsYmFjayBmb3IgY3VzdG9tIHBhZ2UgdHJhbnNpdGlvbi4gSWYgeW91IGRvbid0IHdhbnQgdG8gdHJpZ2dlciBqUU0uY2hhbmdlUGFnZSgpLCByZXR1cm4gdHJ1ZSBieSB0aGlzIGNhbGxiYWNrLiAob3B0aW9uYWwpXHJcbiAgICAgICAgICogIC0gYGphYCDpgbfnp7vjgpLoh6rouqvjgafnrqHnkIbjgZnjgovloLTlkIjjgavmjIflrprjgZfjgIHmiLvjgorlgKTjgpIgdHJ1ZSDjgavoqK3lrprjgZnjgovjgaggY2hhbmdlUGFnZSDjgpLjgrPjg7zjg6vjgZfjgarjgYQgKOS7u+aEjylcclxuICAgICAgICAgKiBAcmV0dXJuc1xyXG4gICAgICAgICAqICAtIGBlbmAgUm91dGVyIGluc3RhbmNlLlxyXG4gICAgICAgICAqICAtIGBqYWAg44Kk44Oz44K544K/44Oz44K544CC44Gf44Gg44GXIG1ldGhvZCBjaGFpbiDjgpLjgZfjgZ/jgYTloLTlkIjjga/jgIFhbnkgY2FzdCDjgYzlv4XopoHjgIJcclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHJlZ2lzdGVyKHJvdXRlOiBzdHJpbmcsIHBhZ2U6IHN0cmluZywgdG9wOiBib29sZWFuID0gZmFsc2UsIGNhbGxiYWNrPzogKC4uLmFyZ3M6IGFueVtdKSA9PiBib29sZWFuKTogUm91dGVyIHtcclxuICAgICAgICAgICAgLy8gQmFja2JvbmUuUm91dGVyIOOBuOOBrueZu+mMsuOBryBoaXN0b3J5IOOBruWBnOatouOBjOW/heimgVxyXG4gICAgICAgICAgICBjb25zdCByZXN0YXJ0ID0gUm91dGVyLnN0b3AoKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IG5hbWUgPSByb3V0ZSArIHBhZ2U7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRleHQ6IFJvdXRlQ29udGV4dCA9IHtcclxuICAgICAgICAgICAgICAgIHJvdXRlOiByb3V0ZSxcclxuICAgICAgICAgICAgICAgIHJlZ2V4cDogKDxhbnk+Um91dGVyLnNfcm91dGVyKS5fcm91dGVUb1JlZ0V4cChyb3V0ZSksXHJcbiAgICAgICAgICAgICAgICBwYWdlOiBwYWdlLFxyXG4gICAgICAgICAgICAgICAgdG9wOiB0b3AsXHJcbiAgICAgICAgICAgICAgICBjYWxsYmFjazogY2FsbGJhY2sgfHwgZnVuY3Rpb24gKCkgeyByZXR1cm4gZmFsc2U7IH1cclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIGlmIChSb3V0ZXIucHVzaENvbnRleHQobmFtZSwgY29udGV4dCkpIHtcclxuICAgICAgICAgICAgICAgIFJvdXRlci5zX3JvdXRlci5yb3V0ZShyb3V0ZSwgbmFtZSwgKCkgPT4gey8qIG5vb3AgKi8gfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChyZXN0YXJ0KSB7XHJcbiAgICAgICAgICAgICAgICAvLyDlho3plovmmYLjga/lho3oqq3jgb/ovrzjgb/jgZfjgarjgYTjgIJcclxuICAgICAgICAgICAgICAgIFJvdXRlci5zdGFydCh7IHNpbGVudDogdHJ1ZSwgcGFnZUNvbnN0cnVjdDogZmFsc2UgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBSb3V0ZXI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAZW4gU3RhcnQgbGlzdGVuaW5nIGhhc2ggY2hhbmdlLiA8YnI+XHJcbiAgICAgICAgICogICAgIEl0IHNob3VsZCBiZSBjYWxsZWQgYWZ0ZXIgcmVnaXN0ZXIoKS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBqYSDlsaXmrbTnm6Poppbjga7plovlp4sgPGJyPlxyXG4gICAgICAgICAqICAgICDnmbvpjLLlrozkuoblvozjgavjgq/jg6njgqTjgqLjg7Pjg4jjgYzlkbzjgbbjgZPjgajjgafjg5rjg7zjgrjpgbfnp7vjgYzplovlp4vjgZXjgozjgovjgIJcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBvcHRpb25zXHJcbiAgICAgICAgICogIC0gYGVuYCBvcHRpb25zIG9iamVjdCBmb3IgQmFja2JvbmUuSGlzdG9yeS5cclxuICAgICAgICAgKiAgLSBgamFgIEJhY2tib25lLkhpc3Rvcnkg44Gr44KP44Gf44KL44Kq44OX44K344On44OzXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBzdGFydChvcHRpb25zPzogUm91dGVyT3B0aW9ucyk6IHZvaWQge1xyXG4gICAgICAgICAgICBjb25zdCBvcHQgPSAkLmV4dGVuZCh7IHBhZ2VDb25zdHJ1Y3Q6IHRydWUgfSwgb3B0aW9ucyk7XHJcbiAgICAgICAgICAgIGlmIChvcHQucGFnZUNvbnN0cnVjdCkge1xyXG4gICAgICAgICAgICAgICAgRnJhbWV3b3JrLmNvbnN0cnVjdFBhZ2VzKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKCQubW9iaWxlLmhhc2hMaXN0ZW5pbmdFbmFibGVkKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFRBRyArIFwic2V0dGluZyBlcnJvci4gY29uZmljdDogJC5tb2JpbGUuaGFzaExpc3RlbmluZ0VuYWJsZWQgPSB0cnVlLCBjYW5ub3Qgc3RhcnQuXCIpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIEJhY2tib25lLmhpc3Rvcnkuc3RhcnQob3B0KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBlbiBTdG9wIGxpc3RlbmluZyBoYXNoIGNoYW5nZS5cclxuICAgICAgICAgKiBAamEg5bGl5q2055uj6KaW44Gu5YGc5q2iXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJuc1xyXG4gICAgICAgICAqICAtIGBlbmAgcHJldmlvdXMgc3RhdHVzLlxyXG4gICAgICAgICAqICAtIGBqYWAg5Lul5YmN44Gu6ZaL5aeL54q25oWL44KS6L+U5Y20XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBzdG9wKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICBjb25zdCBwcmV2U3RhdGUgPSAoPGFueT5CYWNrYm9uZS5IaXN0b3J5KS5zdGFydGVkO1xyXG4gICAgICAgICAgICBCYWNrYm9uZS5oaXN0b3J5LnN0b3AoKTtcclxuICAgICAgICAgICAgcmV0dXJuIHByZXZTdGF0ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBlbiBDaGVjayByb3V0aW5nIHN0YXR1cy5cclxuICAgICAgICAgKiBAamEg44Or44O844OG44Kj44Oz44Kw44KS6ZaL5aeL44GX44Gm44GE44KL44GL5Yik5a6aXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJuc1xyXG4gICAgICAgICAqICAtIGBlbmAgdHJ1ZTogcm91dGluZyAvIGZhbHNlOiBub3Qgcm91dGluZ1xyXG4gICAgICAgICAqICAtIGBlbmAgdHJ1ZTog5pyJ5Yq5IC8gZmFsc2U6IOeEoeWKuVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgaXNSb3V0aW5nKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICByZXR1cm4gKDxhbnk+QmFja2JvbmUuSGlzdG9yeSkuc3RhcnRlZDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBlbiBVUkwgbmF2aWdhdGlvbi5cclxuICAgICAgICAgKiBAamEgVVJM6YG356e7XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gdXJsXHJcbiAgICAgICAgICogIC0gYGVuYCBzZXQgYSBuYXZpZ2F0ZSBVUkwuIChyZWxhdGl2ZSBwYXRoIC8gYWJzb2x1dGUgcGF0aCAvIGZyYWdtZW50KVxyXG4gICAgICAgICAqICAtIGBqYWAg6YG356e7IFVSTCDjgpLmjIflrpogKOebuOWvvuODkeOCuS/ntbblr77jg5Hjgrkv44OV44Op44Kw44Oh44Oz44OIKVxyXG4gICAgICAgICAqIEBwYXJhbSB0cmFuc2l0aW9uXHJcbiAgICAgICAgICogIC0gYGVuYCBzZXQgYSB0cmFuc2l0aW9uIHN0cmluZy5cclxuICAgICAgICAgKiAgLSBgamFgIHRyYW5zaXRpb24g44Gr5L2/55So44GZ44KLIGVmZmVjdCDjgpLmjIflrppcclxuICAgICAgICAgKiBAcGFyYW0gcmV2ZXJzZVxyXG4gICAgICAgICAqICAtIGBlbmAgc2V0IGEgZGlyZWN0aW9uIHN0cmluZyBmb3IgdHJhbnNpdGlvbi4gdHJ1ZTpyZXZlcnNlIC8gZmFsc2U6bm9tYWxcclxuICAgICAgICAgKiAgLSBgamFgIHRyYW5zaXRpb24g44Gr5L2/55So44GZ44KLIGRpcmVjdGlvbiDjgpLmjIflrpogdHJ1ZTpyZXZlcnNlL2ZhbHNlOumAmuW4uFxyXG4gICAgICAgICAqIEBwYXJhbSBvcHRpb25zXHJcbiAgICAgICAgICogIC0gYGVuYCBzZXQgYSBvcHRpb25zIG9iamVjdCBmb3IgQmFja2JvbmUuUm91dGVyLm5hdmlnYXRlKCkuXHJcbiAgICAgICAgICogIC0gYGphYCBCYWNrYm9uZS5Sb3V0ZXIubmF2aWdhdGUoKSDjgavmuKHjgZXjgozjgovjgqrjg5fjgrfjg6fjg7NcclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgc3RhdGljIG5hdmlnYXRlKHVybDogc3RyaW5nLCB0cmFuc2l0aW9uPzogc3RyaW5nLCByZXZlcnNlPzogYm9vbGVhbiwgb3B0aW9ucz86IE5hdmlnYXRlT3B0aW9ucyk6IHZvaWQge1xyXG4gICAgICAgICAgICBpZiAoISFSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvLmluTmF2aWdhdGlvbikge1xyXG4gICAgICAgICAgICAgICAgLy8g44GZ44Gn44GrIE5hdmlnYXRpb24g5Lit44Gn44GC44KM44Gw5oqR5q2iXHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oVEFHICsgXCJSb3V0ZXIubmF2aWdhdGUoKSBjYWxsZWQgaW4gbmF2aWdhdGlvbiBwcm9jLlwiKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChSb3V0ZXIuaW5pdEZpcnN0UGFnZUlmTmVlZGVkKHVybCkpIHsgLy8gYXV0b0luaXRpYWxpemVQYWdlIOOBjOaMh+WumuOBleOCjOOBpuOBhOOBquOBhOOBqOOBjVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCBuYXZPcHRpb25zOiBOYXZpZ2F0ZU9wdGlvbnMgPSAkLmV4dGVuZCh7fSwgUm91dGVyLnNfZGVmYXVsdE5hdmlnYXRlT3B0aW9ucywgb3B0aW9ucyk7XHJcblxyXG4gICAgICAgICAgICAvLyDjg5rjg7zjgrjpgbfnp7vplovlp4vpgJrnn6UuIFN1YiBGbG93IOOBq+OBpuOBmeOBp+OBq+OCs+ODvOODq+OBleOCjOOBpuOBhOOCi+WgtOWQiOOBr+aXouWumuOBruS9leOCguOBl+OBquOBhOOCs+ODvOODq+ODkOODg+OCr+OCkuS9v+eUqOOBmeOCiy5cclxuICAgICAgICAgICAgY29uc3Qgbm90aWZ5QmVmb3JlUm91dGVDaGFuZ2UgPSBSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvLmNhbGxlZEJlZm9yZVJvdXRlQ2hhbmdlID8gX2RlZmF1bHRCZWZvcmVSb3V0ZUNoYW5nZSA6IF9iZWZvcmVSb3V0ZUNoYW5nZTtcclxuXHJcbiAgICAgICAgICAgIFJvdXRlci5zX2xhc3ROYXZpZ2F0ZUluZm8gPSB7XHJcbiAgICAgICAgICAgICAgICB1cmw6IHVybCxcclxuICAgICAgICAgICAgICAgIHRyYW5zaXRpb246IHRyYW5zaXRpb24sXHJcbiAgICAgICAgICAgICAgICByZXZlcnNlOiByZXZlcnNlLFxyXG4gICAgICAgICAgICAgICAgYmFja0Rlc3RpbmF0aW9uOiBuYXZPcHRpb25zLmJhY2tEZXN0aW5hdGlvbixcclxuICAgICAgICAgICAgICAgIG5vSGFzaENoYW5nZTogbmF2T3B0aW9ucy5ub0hhc2hDaGFuZ2UsXHJcbiAgICAgICAgICAgICAgICBpbnRlbnQ6IG5hdk9wdGlvbnMuaW50ZW50IHx8IHt9LFxyXG4gICAgICAgICAgICAgICAgcG9zaXRpdmVOYXZpZ2F0ZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGNhbGxlZEJlZm9yZVJvdXRlQ2hhbmdlOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgaW5OYXZpZ2F0aW9uOiB0cnVlLFxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLy8g44Oa44O844K46YG356e76ZaL5aeL6YCa55+lXHJcbiAgICAgICAgICAgIG5vdGlmeUJlZm9yZVJvdXRlQ2hhbmdlKClcclxuICAgICAgICAgICAgICAgIC5mYWlsKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBiZWZvcmVSb3V0ZUNoYW5nZSgpIOOBjOWkseaVl+OBl+OBn+WgtOWQiOOAgeiHtOWRveeahOOBquS4jeWFt+WQiOOBqOOBquOCi+OBn+OCgeOAgWVycm9yIOiomOmMsuOBruOBv+OBq+OBl+OBpuWFiOOBq+mAsuOCgOOAglxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoVEFHICsgXCJiZWZvcmUgcm91dGUgY2hhbmdlIGNhbGwsIGZhaWxlZC5cIik7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLmFsd2F5cygoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKFJvdXRlci5pc1JvdXRpbmcoKSAmJiAhUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mby5ub0hhc2hDaGFuZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5hdk9wdGlvbnMuc3ViRmxvdykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChuYXZPcHRpb25zLnN1YkZsb3cub3BlcmF0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImJlZ2luXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJvdXRlci5zdGFydFN1YkZsb3cobmF2T3B0aW9ucy5zdWJGbG93KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImVuZFwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSb3V0ZXIuZmluaXNoU3ViRmxvdyhuYXZPcHRpb25zKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOyAvLyBuYXZpZ2F0aW9uIOOBr+WRvOOBsOOBquOBhFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihUQUcgKyBcInVua25vd24gc3ViRmxvdy5vcGVyYXRpb24uIG9wZXJhdGlvbjogXCIgKyBuYXZPcHRpb25zLnN1YkZsb3cub3BlcmF0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gQmFja2JvbmUuaGlzdG9yeS5uYXZpZ2F0ZSh1cmwsIG5hdk9wdGlvbnMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBCYWNrYm9uZS5oaXN0b3J5LmxvYWRVcmwoKSDjgYzjgrPjg7zjg6vjgZXjgozjgarjgYvjgaPjgZ/loLTlkIgsIG5hdmlnYXRpb24g57WC5LqGXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcmVzdWx0IHx8IFwic3RyaW5nXCIgPT09IHR5cGVvZiByZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJvdXRlci5zX2xhc3ROYXZpZ2F0ZUluZm8uaW5OYXZpZ2F0aW9uID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobmF2T3B0aW9ucy5zdWJGbG93KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oVEFHICsgXCJzdWJGbG93IG9ubHkgc3VwcG9ydGVkIHVuZGVyIHJvdXRpbmcgYW5kIGhhc2ggY2hhbmdlIGNvbmRpdGlvbi5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZnJhZ21lbnQgPSBCYWNrYm9uZS5oaXN0b3J5LmdldEZyYWdtZW50KHVybCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjb250ZXh0OiBSb3V0ZUNvbnRleHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvLm5vSGFzaENoYW5nZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gbm9IYXNoQ2hhbmdlIOOBjOaMh+WumuOBleOCjOOBn+OBqOOBjVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dCA9IDxSb3V0ZUNvbnRleHQ+Xy5maW5kKDxhbnk+Um91dGVyLnNfcm9vdENvbnRleHRzLCAoY3R4OiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY3R4LnJlZ2V4cC50ZXN0KGZyYWdtZW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQmFja2JvbmUuUm91dGVyIOOBjOacieWKueOBp+OBquOBhOOBqOOBjVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dCA9IDxSb3V0ZUNvbnRleHQ+Xy5maW5kV2hlcmUoPGFueT5Sb3V0ZXIuc19yb290Q29udGV4dHMsIHsgcm91dGU6IGZyYWdtZW50IH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb250ZXh0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cmwgPSBjb250ZXh0LnBhZ2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgUm91dGVyLmNoYW5nZVBhZ2UodXJsKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBlbiBOYXZpZ2F0ZSBmcm9tIFRvcCBQYWdlLiA8YnI+XHJcbiAgICAgICAgICogICAgIElmIFN1YkZsb3cgc2V0IHVwLCB0aGUgcGFyYW0gaXMgY2xlYXJlZC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBqYSDjg4jjg4Pjg5fjg5rjg7zjgrjjgYvjgonjga7nlLvpnaLpgbfnp7sgPGJyPlxyXG4gICAgICAgICAqICAgICBTdWJGbG93IOOBjOaMh+WumuOBleOCjOOBpuOBhOOBn+WgtOWQiOOBr+OCr+ODquOCouOBleOCjOOCi1xyXG4gICAgICAgICAqIEBwYXJhbSB0b1xyXG4gICAgICAgICAqICAtIGBlbmAgc2V0IGEgbmF2aWdhdGUgVVJMIG9yIFBhZ2VTdGFja09wdGlvbnMgb2JqZWN0IG9yIGFycmF5LlxyXG4gICAgICAgICAqICAtIGBqYWAg6YG356e7IFVSTCAvIFBhZ2VTdGFja09wdGlvbnMg44Kq44OW44K444Kn44Kv44OIL+mFjeWIl1xyXG4gICAgICAgICAqIEBwYXJhbSB0cmFuc2l0aW9uXHJcbiAgICAgICAgICogIC0gYGVuYCBzZXQgYSB0cmFuc2l0aW9uIHN0cmluZ1xyXG4gICAgICAgICAqICAtIGBqYWAgdHJhbnNpdGlvbiDjgavkvb/nlKjjgZnjgosgZWZmZWN0IOOCkuaMh+WumlxyXG4gICAgICAgICAqIEBwYXJhbSByZXZlcnNlXHJcbiAgICAgICAgICogIC0gYGVuYCBzZXQgYSBkaXJlY3Rpb24gc3RyaW5nIGZvciB0cmFuc2l0aW9uLiB0cnVlOnJldmVyc2UgLyBmYWxzZTpub21hbFxyXG4gICAgICAgICAqICAtIGBqYWAgdHJhbnNpdGlvbiDjgavkvb/nlKjjgZnjgosgZGlyZWN0aW9uIOOCkuaMh+WumiB0cnVlOnJldmVyc2UvZmFsc2U66YCa5bi4XHJcbiAgICAgICAgICogQHBhcmFtIG9wdGlvbnNcclxuICAgICAgICAgKiAgLSBgZW5gIHNldCBhIG9wdGlvbnMgb2JqZWN0IGZvciBCYWNrYm9uZS5Sb3V0ZXIubmF2aWdhdGUoKS5cclxuICAgICAgICAgKiAgLSBgamFgIEJhY2tib25lLlJvdXRlci5uYXZpZ2F0ZSgpIOOBq+a4oeOBleOCjOOCi+OCquODl+OCt+ODp+ODs1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgbmF2aWdhdGVGcm9tVG9wKFxyXG4gICAgICAgICAgICB0bz86IHN0cmluZyB8IFBhZ2VTdGFjayB8IFBhZ2VTdGFja1tdLFxyXG4gICAgICAgICAgICB0cmFuc2l0aW9uPzogc3RyaW5nLFxyXG4gICAgICAgICAgICByZXZlcnNlPzogYm9vbGVhbixcclxuICAgICAgICAgICAgb3B0aW9ucz86IE5hdmlnYXRlT3B0aW9uc1xyXG4gICAgICAgICk6IHZvaWQge1xyXG4gICAgICAgICAgICBjb25zdCBzdGFjayA9IFJvdXRlci5fZ2V0SnFtSGlzdG9yeSgpLnN0YWNrO1xyXG4gICAgICAgICAgICBjb25zdCBjdXJyZW50UGFnZSA9IHN0YWNrW1JvdXRlci5fZ2V0SnFtSGlzdG9yeSgpLmFjdGl2ZUluZGV4XTtcclxuICAgICAgICAgICAgY29uc3QgX3RyYW5zaXRpb24gPSB0cmFuc2l0aW9uIHx8IGN1cnJlbnRQYWdlLnRyYW5zaXRpb247XHJcbiAgICAgICAgICAgIGNvbnN0IF9yZXZlcnNlID0gKG51bGwgIT0gcmV2ZXJzZSkgPyByZXZlcnNlIDogdHJ1ZTtcclxuICAgICAgICAgICAgY29uc3QgZGVzdFN0YWNrczogUGFnZVN0YWNrW10gPSAoKCk6IFBhZ2VTdGFja1tdID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICghdG8pIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoXCJzdHJpbmdcIiA9PT0gdHlwZW9mIHRvKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDxQYWdlU3RhY2tbXT5beyByb3V0ZTogdG8gfV07XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRvIGluc3RhbmNlb2YgQXJyYXkpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdG87XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiA8UGFnZVN0YWNrW10+W3RvXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSkoKTtcclxuXHJcbiAgICAgICAgICAgIC8vIOaMh+WumuOBleOCjOOBnyBTdWJGbG93IOOCkuWJiumZpFxyXG4gICAgICAgICAgICBzdGFjay5mb3JFYWNoKCh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgZGVsZXRlIHZhbHVlW1JvdXRlci5TVUJGTE9XX1BBUkFNXTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAvLyDliJ3mnJ/jg5rjg7zjgrjjgasgU3ViRmxvdyDjg5Hjg6njg6Hjg7zjgr/jgpLmjIflrppcclxuICAgICAgICAgICAgc3RhY2tbMF1bUm91dGVyLlNVQkZMT1dfUEFSQU1dID0ge1xyXG4gICAgICAgICAgICAgICAgb3BlcmF0aW9uOiBcImJlZ2luXCIsXHJcbiAgICAgICAgICAgICAgICBkZXN0QmFzZTogc3RhY2tbMF0uaGFzaCwgICAgLy8g5Yid5pyf44Oa44O844K444Gu44OP44OD44K344OlXHJcbiAgICAgICAgICAgICAgICBkZXN0U3RhY2tzOiBkZXN0U3RhY2tzLFxyXG4gICAgICAgICAgICAgICAgYWRkaXRpb25hbERpc3RhbmNlOiAwLFxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgUm91dGVyLm5hdmlnYXRlKG51bGwsIF90cmFuc2l0aW9uLCBfcmV2ZXJzZSwgJC5leHRlbmQoe30sIG9wdGlvbnMsIHtcclxuICAgICAgICAgICAgICAgIHN1YkZsb3c6IHtcclxuICAgICAgICAgICAgICAgICAgICBvcGVyYXRpb246IFwiZW5kXCIsXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEAgZW4gQmFjayB0byBwcmV2aW91cyBoaXN0b3J5LiA8YnI+XHJcbiAgICAgICAgICogICAgICBJdCdzIHNhbWUgYXMgYnJvd3NlciBiYWNrIGJ1dHRvbidzIGJlaGF2aW91ci4gPGJyPlxyXG4gICAgICAgICAqICAgICAgW05vdGVdIElmIHNldCB0aGUgalFNOiBkYXRhLXJlbD1cImJhY2tcIiwgd29yayBhcyB3ZWxsLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQGphIOWxpeattOOCkuaIu+OCiyA8YnI+XHJcbiAgICAgICAgICogICAgIOODluODqeOCpuOCtuOBruaIu+OCi+ODnOOCv+ODs+OBqOWQjOOBmOaMmeWLleOAgiA8YnI+XHJcbiAgICAgICAgICogICAgIGpRTTogZGF0YS1yZWw9XCJiYWNrXCIg44KS5oyH5a6a44GX44Gm44KC5ZCM44GY44Gn44GC44KL44GT44Go44Gr5rOo5oSP44CCXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBiYWNrKCk6IHZvaWQge1xyXG4gICAgICAgICAgICBpZiAoISFSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvLmluTmF2aWdhdGlvbikge1xyXG4gICAgICAgICAgICAgICAgLy8g44GZ44Gn44GrIE5hdmlnYXRpb24g5Lit44Gn44GC44KM44Gw5oqR5q2iXHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oVEFHICsgXCJSb3V0ZXIuYmFjaygpIGNhbGxlZCBpbiBuYXZpZ2F0aW9uIHByb2MuXCIpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKFJvdXRlci5pc1RvcFBhZ2UoKSkge1xyXG4gICAgICAgICAgICAgICAgLy8gVG9wIOODmuODvOOCuOOBq+aMh+WumuOBleOCjOOBpuOBhOOCjOOBsOe1guS6hlxyXG4gICAgICAgICAgICAgICAgY29uc3QgYXBwID0gKDxhbnk+bmF2aWdhdG9yKS5hcHAgfHwge307XHJcbiAgICAgICAgICAgICAgICBpZiAoISFhcHAuZXhpdEFwcCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFwcC5leGl0QXBwKCk7ICAgIC8vIG5vdGU6IG5ldmVyIGV4aXQgb24gaU9TXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvID0ge1xyXG4gICAgICAgICAgICAgICAgaW5OYXZpZ2F0aW9uOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgY2FsbGVkQmVmb3JlUm91dGVDaGFuZ2U6IHRydWUsXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvLyDjg5rjg7zjgrjpgbfnp7vplovlp4vpgJrnn6VcclxuICAgICAgICAgICAgX2JlZm9yZVJvdXRlQ2hhbmdlKClcclxuICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAkLm1vYmlsZS5iYWNrKCk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLmZhaWwoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJiZWZvcmUgcm91dGUgY2hhbmdlIGNhbGwsIGZhaWxlZC5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mbyA9IHt9O1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAZW4gU3RvcmUgSW50ZW50IG9iamVjdCBieSBmcmFtd29yay5cclxuICAgICAgICAgKiBAamEgSW50ZW50IOOCkuagvOe0jeOAgiDjg5Xjg6zjg7zjg6Djg6/jg7zjgq/jgYzkvb/nlKjjgZnjgovjgIJcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBpbnRlcm5hbFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgX3B1c2hJbnRlbnQoaW50ZW50OiBJbnRlbnQpOiB2b2lkIHtcclxuICAgICAgICAgICAgUm91dGVyLnNfbGFzdEludGVudCA9ICQuZXh0ZW5kKHRydWUsIFJvdXRlci5zX2xhc3RJbnRlbnQsIGludGVudCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAZW4gR2V0IEludGVudCBvYmplY3QgYnkgZnJhbWV3b3JrLlxyXG4gICAgICAgICAqIEBqYSBJbnRlbnQg44KS5Y+W5b6X44CC44OV44Os44O844Og44Ov44O844Kv44GM5L2/55So44GZ44KL44CCXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAaW50ZXJuYWxcclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgc3RhdGljIF9wb3BJbnRlbnQoKTogSW50ZW50IHtcclxuICAgICAgICAgICAgY29uc3QgaW50ZW50ID0gUm91dGVyLnNfbGFzdEludGVudDtcclxuICAgICAgICAgICAgUm91dGVyLnNfbGFzdEludGVudCA9IHt9O1xyXG4gICAgICAgICAgICByZXR1cm4gaW50ZW50O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQGVuIEdldCBxdWVyeSBwYXJhbWV0ZXJzLiA8YnI+XHJcbiAgICAgICAgICogICAgIEl0IGNhbiBiZSBhY2Nlc3NlZCBkdXJpbmcgXCJwYWdlYmVmb3JlY3JlYXRlXCIgdG8gXCJwYWdlY2hhbmdlXCIuXHJcbiAgICAgICAgICogQGphIHF1ZXJ5IHBhcmFtZXRlciDjgavmjIflrprjgZXjgozjgZ/lvJXmlbDjga7lj5blvpcgPGJyPlxyXG4gICAgICAgICAqICAgICDjg5rjg7zjgrjpgbfnp7vkuK3jgavjga7jgb/jgqLjgq/jgrvjgrnlj6/og70gKHBhZ2ViZWZvcmVjcmVhdGUg772eIHBhZ2VjaGFuZ2UpXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBnZXRRdWVyeVBhcmFtZXRlcnMoKTogYW55IHtcclxuICAgICAgICAgICAgaWYgKFJvdXRlci5zX2xhc3ROYXZpZ2F0ZUluZm8uaW50ZW50ICYmIFJvdXRlci5zX2xhc3ROYXZpZ2F0ZUluZm8uaW50ZW50LnBhcmFtcykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFJvdXRlci5zX2xhc3ROYXZpZ2F0ZUluZm8uaW50ZW50LnBhcmFtc1tcInF1ZXJ5UGFyYW1zXCJdO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBlbiBCZWdpbiBzdWIgZmxvdyB0cmFuc2FjdGlvbi5cclxuICAgICAgICAgKiBAamEgc3ViIGZsb3cg44OI44Op44Oz44K244Kv44K344On44Oz44Gu6ZaL5aeLXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gdXJsXHJcbiAgICAgICAgICogIC0gYGVuYCBzZXQgYSBuYXZpZ2F0ZSBVUkwuIChyZWxhdGl2ZSBwYXRoIC8gYWJzb2x1dGUgcGF0aCAvIGZyYWdtZW50KVxyXG4gICAgICAgICAqICAtIGBqYWAg6YG356e7IFVSTCDjgpLmjIflrpogKOebuOWvvuODkeOCuS/ntbblr77jg5Hjgrkv44OV44Op44Kw44Oh44Oz44OIKVxyXG4gICAgICAgICAqIEBwYXJhbSBvcHRpb25zXHJcbiAgICAgICAgICogIC0gYGVuYCBzZXQgYSBvcHRpb25zIG9iamVjdCBmb3IgQmFja2JvbmUuUm91dGVyLm5hdmlnYXRlKCkuXHJcbiAgICAgICAgICogIC0gYGphYCBCYWNrYm9uZS5Sb3V0ZXIubmF2aWdhdGUoKSDjgavmuKHjgZXjgozjgovjgqrjg5fjgrfjg6fjg7NcclxuICAgICAgICAgKiBAcGFyYW0gdHJhbnNpdGlvblxyXG4gICAgICAgICAqICAtIGBlbmAgc2V0IGEgdHJhbnNpdGlvbiBzdHJpbmdcclxuICAgICAgICAgKiAgLSBgamFgIHRyYW5zaXRpb24g44Gr5L2/55So44GZ44KLIGVmZmVjdCDjgpLmjIflrppcclxuICAgICAgICAgKiBAcGFyYW0gcmV2ZXJzZVxyXG4gICAgICAgICAqICAtIGBlbmAgc2V0IGEgZGlyZWN0aW9uIHN0cmluZyBmb3IgdHJhbnNpdGlvbi4gdHJ1ZTpyZXZlcnNlIC8gZmFsc2U6bm9tYWxcclxuICAgICAgICAgKiAgLSBgamFgIHRyYW5zaXRpb24g44Gr5L2/55So44GZ44KLIGRpcmVjdGlvbiDjgpLmjIflrpogdHJ1ZTpyZXZlcnNlL2ZhbHNlOumAmuW4uFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYmVnaW5TdWJGbG93KHVybDogc3RyaW5nLCBvcHRpb25zOiBOYXZpZ2F0ZU9wdGlvbnMsIHRyYW5zaXRpb24/OiBzdHJpbmcsIHJldmVyc2U/OiBib29sZWFuKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGNvbnN0IG9wdDogTmF2aWdhdGVPcHRpb25zID0gJC5leHRlbmQoe30sIG9wdGlvbnMpO1xyXG4gICAgICAgICAgICBvcHQuc3ViRmxvdyA9IG9wdC5zdWJGbG93IHx8IHsgb3BlcmF0aW9uOiBcImJlZ2luXCIgfTtcclxuICAgICAgICAgICAgaWYgKFwiYmVnaW5cIiAhPT0gb3B0LnN1YkZsb3cub3BlcmF0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFRBRyArIFwibG9naWMgZXJyb3IuIGludmFsaWQgc3ViZmxvdyBvcGVyYXRpb24uIFtvcGVyYXRpb246IFwiICsgb3B0LnN1YkZsb3cub3BlcmF0aW9uICsgXCJdXCIpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFJvdXRlci5uYXZpZ2F0ZSh1cmwsIHRyYW5zaXRpb24sIHJldmVyc2UsIG9wdCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAZW4gQ29tbWl0IHN1YiBmbG93IHRyYW5zYWN0aW9uLlxyXG4gICAgICAgICAqIEBqYSBzdWIgZmxvdyDjg4jjg6njg7Pjgrbjgq/jgrfjg6fjg7Pjga7ntYLkuoZcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB0cmFuc2l0aW9uXHJcbiAgICAgICAgICogLSBgZW5gIHNldCBhIHRyYW5zaXRpb24gc3RyaW5nXHJcbiAgICAgICAgICogLSBgamFgIHRyYW5zaXRpb24g44Gr5L2/55So44GZ44KLIGVmZmVjdCDjgpLmjIflrppcclxuICAgICAgICAgKiBAcGFyYW0gcmV2ZXJzZVxyXG4gICAgICAgICAqIC0gYGVuYCBzZXQgYSBkaXJlY3Rpb24gc3RyaW5nIGZvciB0cmFuc2l0aW9uLiB0cnVlOnJldmVyc2UgLyBmYWxzZTpub21hbFxyXG4gICAgICAgICAqIC0gYGphYCB0cmFuc2l0aW9uIOOBq+S9v+eUqOOBmeOCiyBkaXJlY3Rpb24g44KS5oyH5a6aIHRydWU6cmV2ZXJzZS9mYWxzZTrpgJrluLhcclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGNvbW1pdFN1YkZsb3codHJhbnNpdGlvbj86IHN0cmluZywgcmV2ZXJzZT86IGJvb2xlYW4pOiB2b2lkIHtcclxuICAgICAgICAgICAgUm91dGVyLm5hdmlnYXRlKG51bGwsIHRyYW5zaXRpb24sIHJldmVyc2UsIHtcclxuICAgICAgICAgICAgICAgIHN1YkZsb3c6IHtcclxuICAgICAgICAgICAgICAgICAgICBvcGVyYXRpb246IFwiZW5kXCIsXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQGVuIENhbmNlbCBzdWIgZmxvdyB0cmFuc2FjdGlvbi5cclxuICAgICAgICAgKiBAamEgc3ViIGZsb3cg44OI44Op44Oz44K244Kv44K344On44Oz44Gu44Kt44Oj44Oz44K744OrXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gdHJhbnNpdGlvblxyXG4gICAgICAgICAqICAtIGBlbmAgc2V0IGEgdHJhbnNpdGlvbiBzdHJpbmdcclxuICAgICAgICAgKiAgLSBgamFgIHRyYW5zaXRpb24g44Gr5L2/55So44GZ44KLIGVmZmVjdCDjgpLmjIflrppcclxuICAgICAgICAgKiBAcGFyYW0gcmV2ZXJzZVxyXG4gICAgICAgICAqICAtIGBlbmAgc2V0IGEgZGlyZWN0aW9uIHN0cmluZyBmb3IgdHJhbnNpdGlvbi4gdHJ1ZTpyZXZlcnNlW2RlZmF1bHRdIC8gZmFsc2U6bm9tYWxcclxuICAgICAgICAgKiAgLSBgamFgIHRyYW5zaXRpb24g44Gr5L2/55So44GZ44KLIGRpcmVjdGlvbiDjgpLmjIflrpogdHJ1ZTpyZXZlcnNlW+aXouWuml0vZmFsc2U66YCa5bi4XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBjYW5jZWxTdWJGbG93KHRyYW5zaXRpb24/OiBzdHJpbmcsIHJldmVyc2U/OiBib29sZWFuKTogdm9pZCB7XHJcbiAgICAgICAgICAgIC8vIOi1t+eCueOBruODmuODvOOCuOOBq+aIu+OCi1xyXG4gICAgICAgICAgICBjb25zdCBiYXNlSW5mbyA9IFJvdXRlci5kZXRlY3RTdWJGbG93QmFzZUluZm8oKTtcclxuICAgICAgICAgICAgYmFzZUluZm8uc3ViRmxvd1BhcmFtLmFkZGl0aW9uYWxEaXN0YW5jZSA9IDA7XHJcbiAgICAgICAgICAgIFJvdXRlci5uYXZpZ2F0ZShudWxsLCB0cmFuc2l0aW9uLFxyXG4gICAgICAgICAgICAgICAgKG51bGwgIT0gcmV2ZXJzZSkgPyByZXZlcnNlIDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBzdWJGbG93OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wZXJhdGlvbjogXCJlbmRcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVzdFN0YWNrczogbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBlbiBDaGVjayBpbiBzdWIgZmxvdy5cclxuICAgICAgICAgKiBAamEgc3ViIGZsb3cg5YaF44Gn44GC44KL44GL5Yik5a6aXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBpc0luU3ViRmxvdygpOiBib29sZWFuIHtcclxuICAgICAgICAgICAgY29uc3Qgc3RhY2sgPSBSb3V0ZXIuX2dldEpxbUhpc3RvcnkoKS5zdGFjaztcclxuICAgICAgICAgICAgY29uc3QgaGFzID0gXy5zb21lKHN0YWNrLCAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAhIXZhbHVlW1JvdXRlci5TVUJGTE9XX1BBUkFNXTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiBoYXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAZW4gQ2hlY2sgZnJvbSBoYXNoIGNoYW5nZWQgbmF2aWdhdGlvbi5cclxuICAgICAgICAgKiBAamEgSGFzaCDlpInmm7TjgavjgojjgaPjgaYgTmF2aWdhdGUg44GM6LW344GT44Gj44Gf44GL5Yik5a6aLiBcInBhZ2VjaGFuZ2VcIiDjgYznmbrnlJ/jgZnjgovjgb7jgafjgavliKTlrprlj6/og71cclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGZyb21IYXNoQ2hhbmdlZCgpOiBib29sZWFuIHtcclxuICAgICAgICAgICAgLy8gcG9zaXRpdmVOYXZpZ2F0ZSA9IGZhbHNlIOOBr+WQq+OCgeOBquOBhFxyXG4gICAgICAgICAgICByZXR1cm4gUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mby5pbk5hdmlnYXRpb24gJiYgKG51bGwgPT0gUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mby5wb3NpdGl2ZU5hdmlnYXRlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBlbiBSZWdpc3RlciBwYWdlIHN0YWNrLiA8YnI+XHJcbiAgICAgICAgICogICAgIFNldCByZWdpc3RlcmVkIHJvdXRlKHMpIHRvIGFkZCB0byBwYWdlIHN0YWNrIG9uIHRoZSBiYXNpcyBvZiB0aGUgcHJlc2VudCBzdGFjayBwb3NpdGlvbi5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBqYSDjg5rjg7zjgrjjgrnjgr/jg4Pjgq/nmbvpjLIgPGJyPlxyXG4gICAgICAgICAqICAgICDnmbvpjLLmuIjjgb/jga4gcm91dGUg44KS5oyH5a6a44GX44Gm44CB54++5Zyo44Gu5L2N572u44KS5Z+654K544Gr44Oa44O844K444K544K/44OD44Kv44Gr55m76YyyXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gcGFnZVN0YWNrXHJcbiAgICAgICAgICogIC0gYGVuYCBQYWdlU3RhY2tPcHRpb25zIG9iamVjdCBvciBhcnJheS5cclxuICAgICAgICAgKiAgLSBgamFgIFBhZ2VTdGFja09wdGlvbnMg44Kq44OW44K444Kn44Kv44OIL+mFjeWIl1xyXG4gICAgICAgICAqIEBwYXJhbSB3aXRoTmF2aWdhdGVcclxuICAgICAgICAgKiAgLSBgZW5gIHRydWU6IHdpdGggbmF2aWdhdGUgZmluYWwgc3RhY2suIChkZWZhdWx0KSAvIGZhbHNlOiBub3QgbmF2aWdhdGUuXHJcbiAgICAgICAgICogIC0gYGphYCB0cnVlOiDmnIDlvozjga7jgrnjgr/jg4Pjgq/jgavlr77jgZfjgabjg5rjg7zjgrjpgbfnp7vjgZnjgosuIChkZWZhdWx0KSAvIGZhbHNlOiDjg5rjg7zjgrjpgbfnp7vjgZfjgarjgYQuXHJcbiAgICAgICAgICogQHBhcmFtIG9wdGlvbnNcclxuICAgICAgICAgKiAgLSBgZW5gIHNldCBhIG9wdGlvbnMgb2JqZWN0IGZvciBCYWNrYm9uZS5Sb3V0ZXIubmF2aWdhdGUoKS5cclxuICAgICAgICAgKiAgLSBgamFgIEJhY2tib25lLlJvdXRlci5uYXZpZ2F0ZSgpIOOBq+a4oeOBleOCjOOCi+OCquODl+OCt+ODp+ODs1xyXG4gICAgICAgICAqIEByZXR1cm5zXHJcbiAgICAgICAgICogIC0gYGVuYCB0cnVlOiBzdWNjZWVkZWQgLyBmYWxzZTogZmFpbGVkXHJcbiAgICAgICAgICogIC0gYGphYCB0cnVlOiDmiJDlip8gLyBmYWxzZTog5aSx5pWX44CCXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyByZWdpc3RlclBhZ2VTdGFjayhwYWdlU3RhY2s6IFBhZ2VTdGFjaywgd2l0aE5hdmlnYXRlPzogYm9vbGVhbiwgb3B0aW9ucz86IE5hdmlnYXRlT3B0aW9ucyk6IGJvb2xlYW47XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyByZWdpc3RlclBhZ2VTdGFjayhwYWdlU3RhY2s6IFBhZ2VTdGFja1tdLCB3aXRoTmF2aWdhdGU/OiBib29sZWFuLCBvcHRpb25zPzogTmF2aWdhdGVPcHRpb25zKTogYm9vbGVhbjtcclxuICAgICAgICBwdWJsaWMgc3RhdGljIHJlZ2lzdGVyUGFnZVN0YWNrKHBhZ2VTdGFjazogYW55LCB3aXRoTmF2aWdhdGU/OiBib29sZWFuLCBvcHRpb25zPzogTmF2aWdhdGVPcHRpb25zKTogYm9vbGVhbiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG5ld1N0YWNrcyA9IFtdO1xyXG4gICAgICAgICAgICBsZXQgZmFpbGVkID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICBwYWdlU3RhY2sgPSAocGFnZVN0YWNrIGluc3RhbmNlb2YgQXJyYXkpID8gcGFnZVN0YWNrIDogW3BhZ2VTdGFja107XHJcbiAgICAgICAgICAgIHdpdGhOYXZpZ2F0ZSA9IChudWxsID09IHdpdGhOYXZpZ2F0ZSkgPyBmYWxzZSA6IHdpdGhOYXZpZ2F0ZTtcclxuXHJcbiAgICAgICAgICAgICgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtYWtlU3RhY2sgPSAoaW5mbzogUGFnZVN0YWNrKTogYW55ID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgdXJsOiBzdHJpbmc7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZyYWdtZW50ID0gQmFja2JvbmUuaGlzdG9yeS5nZXRGcmFnbWVudChpbmZvLnJvdXRlKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjb250ZXh0ID0gPFJvdXRlQ29udGV4dD5fLmZpbmQoPGFueT5Sb3V0ZXIuc19yb290Q29udGV4dHMsIChjdHg6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY3R4LnJlZ2V4cC50ZXN0KGZyYWdtZW50KTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWNvbnRleHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFRBRyArIFwicm91dGUgaXMgbm90IHJlZ2lzdGVyZWQuIHJvdXRlOiBcIiArIGluZm8ucm91dGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1cmwgPSBSb3V0ZXIucGF0aFRvSnFtRGF0YVVybChjb250ZXh0LnBhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3RhY2sgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvdXRlOiBpbmZvLnJvdXRlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYWdlVXJsOiB1cmwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiBpbmZvLnRpdGxlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2l0aW9uOiBpbmZvLnRyYW5zaXRpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVybDogdXJsLFxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN0YWNrO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMCwgbiA9IHBhZ2VTdGFjay5sZW5ndGg7IGkgPCBuOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBzdGFjayA9IG1ha2VTdGFjayhwYWdlU3RhY2tbaV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghc3RhY2spIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmFpbGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3U3RhY2tzLnB1c2goc3RhY2spO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSkoKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChmYWlsZWQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIC8vIFJvdXRlciDjga7lgZzmraJcclxuICAgICAgICAgICAgICAgIGxldCByZXN0YXJ0ID0gUm91dGVyLnN0b3AoKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNpbGVudExlbmd0aCA9IG5ld1N0YWNrcy5sZW5ndGggLSAxO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZmluYWxJbmRleCA9IG5ld1N0YWNrcy5sZW5ndGggLSAxO1xyXG5cclxuICAgICAgICAgICAgICAgIFJvdXRlci5fZ2V0SnFtSGlzdG9yeSgpLmNsZWFyRm9yd2FyZCgpO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwLCBuID0gc2lsZW50TGVuZ3RoOyBpIDwgbjsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24uaGFzaCA9IG5ld1N0YWNrc1tpXS5yb3V0ZTtcclxuICAgICAgICAgICAgICAgICAgICBSb3V0ZXIuX2dldEpxbUhpc3RvcnkoKS5zdGFjay5wdXNoKG5ld1N0YWNrc1tpXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgUm91dGVyLl9nZXRKcW1IaXN0b3J5KCkuYWN0aXZlSW5kZXggPSBSb3V0ZXIuX2dldEpxbUhpc3RvcnkoKS5zdGFjay5sZW5ndGggLSAxO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIGZpbmFsIHN0YWNrIHdpdGggbmF2aWdhdGVcclxuICAgICAgICAgICAgICAgIGlmICh3aXRoTmF2aWdhdGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB0cmFuc2l0aW9uID0gKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgIT0gUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mby50cmFuc2l0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mby50cmFuc2l0aW9uO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ld1N0YWNrc1tmaW5hbEluZGV4XS50cmFuc2l0aW9uO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSkoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmV2ZXJzZSA9ICgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChudWxsICE9IFJvdXRlci5zX2xhc3ROYXZpZ2F0ZUluZm8ucmV2ZXJzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFJvdXRlci5zX2xhc3ROYXZpZ2F0ZUluZm8ucmV2ZXJzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJlc3RhcnQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICBSb3V0ZXIuc3RhcnQoeyBzaWxlbnQ6IHRydWUgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgUm91dGVyLm5hdmlnYXRlKG5ld1N0YWNrc1tmaW5hbEluZGV4XS5yb3V0ZSwgdHJhbnNpdGlvbiwgcmV2ZXJzZSwgb3B0aW9ucyk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLmhhc2ggPSBuZXdTdGFja3NbZmluYWxJbmRleF0ucm91dGU7XHJcbiAgICAgICAgICAgICAgICAgICAgUm91dGVyLl9nZXRKcW1IaXN0b3J5KCkuc3RhY2sucHVzaChuZXdTdGFja3NbZmluYWxJbmRleF0pO1xyXG4gICAgICAgICAgICAgICAgICAgIFJvdXRlci5fZ2V0SnFtSGlzdG9yeSgpLmFjdGl2ZUluZGV4ID0gUm91dGVyLl9nZXRKcW1IaXN0b3J5KCkuc3RhY2subGVuZ3RoIC0gMTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyBSb3V0ZXIg44Gu5YaN6ZaLXHJcbiAgICAgICAgICAgICAgICBpZiAocmVzdGFydCkge1xyXG4gICAgICAgICAgICAgICAgICAgIFJvdXRlci5zdGFydCh7IHNpbGVudDogdHJ1ZSB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSkoKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQGVuIEdldCBqUU0ncyBoaXN0b3J5IG9iamVjdFxyXG4gICAgICAgICAqIEBqYSBqUU0g44GuIEhpc3Rvcnkg44Kq44OW44K444Kn44Kv44OI44Gu5Y+W5b6XXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAaW50ZXJuYWxcclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgc3RhdGljIF9nZXRKcW1IaXN0b3J5KCk6IGFueSB7XHJcbiAgICAgICAgICAgIHJldHVybiAkLm1vYmlsZS5uYXZpZ2F0ZS5oaXN0b3J5O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgICAgICAvLyBwcml2YXRlIHN0YXRpYyBtZXRob2RzXHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBlbiBPdmVycmlkZTogQmFja2JvbmUuSGlzdG9yeS5sb2FkVXJsKCkuXHJcbiAgICAgICAgICogQGphIEJhY2tib25lLkhpc3RvcnkubG9hZFVybCgpIOOBruOCquODvOODkOODvOODqeOCpOODiVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIGN1c3RvbUxvYWRVcmwoZnJhZ21lbnQ6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICBjb25zdCBoYW5kbGVkID0gUm91dGVyLnNfbG9hZFVybChmcmFnbWVudCk7XHJcbiAgICAgICAgICAgIGlmICghaGFuZGxlZCkge1xyXG4gICAgICAgICAgICAgICAgUm91dGVyLm9uUm91dGVGYWlsZWQoZnJhZ21lbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQGVuIE92ZXJyaWRlOiAkLm1vYmlsZS5iYWNrKCkuXHJcbiAgICAgICAgICogIC0gZmFpbCBzYWZlIHByb2Nlc3NpbmcuIDxicj5cclxuICAgICAgICAgKiAgICBJZiB1c2luZyBCYWNrYm9uZSdzIFJvdXRlciwgPGJyPlxyXG4gICAgICAgICAqICAgIHRoaXMgY2xhc3MgdW51c2VzIGhpc3Rvcnkgb2JqZWN0IG9mIGpRdWVyeSBNb2JpbGUgMS40LCA8YnI+XHJcbiAgICAgICAgICogICAgYW5kIHN0YW5kYXJkaXplIGFzIGJyb3dzZXIgYmFjayBidXR0b24ncyBiZWhhdmlvdXIuIChqUU0gMS4zIGNvbXBhcmFibGUpXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAamEgJC5tb2JpbGUuYmFjaygpIOOBruOCquODvOODkOODvOODqeOCpOODiVxyXG4gICAgICAgICAqICAtIFtUQkRdIGZhaWwgc2FmZSDlh6bnkIYgPGJyPlxyXG4gICAgICAgICAqICAgIEJhY2tib25lIOOBriBSb3V0ZXIg44KS5L2/55So44GX44Gm44GE44KL5aC05ZCI44CBIDxicj5cclxuICAgICAgICAgKiAgICBqUXVlcnkgTW9iaWxlIDEuNCDku6XpmY3jga7lhoXpg6jjga4gSGlzdG9yeSDnrqHnkIbjga/kvb/nlKjjgZvjgZrjgasgPGJyPlxyXG4gICAgICAgICAqICAgIDEuMyDnm7jlvZPjga7jg5bjg6njgqbjgrbjga5b5oi744KLXeOBruaMmeWLleOBq+e1seS4gOOBmeOCi+OAglxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIGN1c3RvbUpxbUJhY2soKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGlmIChSb3V0ZXIuaXNSb3V0aW5nKCkpIHtcclxuICAgICAgICAgICAgICAgIGhpc3RvcnkuYmFjaygpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8galFNIOaXouWumuWHpueQhlxyXG4gICAgICAgICAgICAgICAgUm91dGVyLnNfYmFjaygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogQmluZCBldmVudHMuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiDjgqTjg5njg7Pjg4jjg5DjgqTjg7Pjg4lcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgYmluZEV2ZW50cygpOiB2b2lkIHtcclxuICAgICAgICAgICAgJChkb2N1bWVudClcclxuICAgICAgICAgICAgICAgIC5vbmUoXCJwYWdlY2hhbmdlXCIsICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoUm91dGVyLnNfaW5pdE9wdGlvbnMuYW5jaG9yVmNsaWNrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFuY2hvciB2Y2xpY2tcclxuICAgICAgICAgICAgICAgICAgICAgICAgJChkb2N1bWVudCkub24oXCJ2Y2xpY2tcIiwgXCJbaHJlZl1cIiwgKGV2ZW50OiBKUXVlcnkuRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJvdXRlci5vbkFuY2hvclZjbGlja2VkKGV2ZW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5vbihcInBhZ2ViZWZvcmVzaG93XCIsIChldmVudDogSlF1ZXJ5LkV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gXCJkYXRhLWJhY2stZHN0XCIg44KSIHBhZ2Ug44Gr6Kit5a6aXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgIT0gUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mby5iYWNrRGVzdGluYXRpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYWN0aXZlOiBPYmplY3QgPSBSb3V0ZXIuX2dldEpxbUhpc3RvcnkoKS5nZXRBY3RpdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlW1JvdXRlci5CQUNLX0RFU1RJTkFUSU9OX1VSTF0gPSBSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvLmJhY2tEZXN0aW5hdGlvbjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLm9uKFwicGFnZXNob3dcIiwgKGV2ZW50OiBKUXVlcnkuRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBhY3RpdmU6IE9iamVjdCA9IFJvdXRlci5fZ2V0SnFtSGlzdG9yeSgpLmdldEFjdGl2ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChhY3RpdmVbUm91dGVyLlNVQkZMT1dfUEFSQU1dKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBhY3RpdmVbUm91dGVyLlNVQkZMT1dfUEFSQU1dO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAub24oXCJwYWdlY2hhbmdlIHBhZ2Vjb250YWluZXJsb2FkZmFpbGVkXCIsIChldmVudDogSlF1ZXJ5LkV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mbyA9IHt9O1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIDtcclxuXHJcbiAgICAgICAgICAgIC8vIGJhY2sga2V5IGFzc2lnblxyXG4gICAgICAgICAgICBDRFAuc2V0QmFja0J1dHRvbkhhbmRsZXIoUm91dGVyLmJhY2spO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQGVuIFN0b3JlIHRoZSBSb290Q29udGV4dC5cclxuICAgICAgICAgKiBAamEgUm9vdENvbnRleHQg44Gu5qC857SNXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gbmFtZVxyXG4gICAgICAgICAqICAtIGBlbmAgbmFtZSBvZiByb3V0ZVxyXG4gICAgICAgICAqICAtIGBqYWAgcm91dGUg5ZCNXHJcbiAgICAgICAgICogQHBhcmFtIGNvbnRleHRcclxuICAgICAgICAgKiAgLSBgZW5gIGNvbnRleHQgb2JqZWN0XHJcbiAgICAgICAgICogIC0gYGphYCBjb250ZXh0IOOCquODluOCuOOCp+OCr+ODiFxyXG4gICAgICAgICAqIEByZXR1cm5zXHJcbiAgICAgICAgICogIC0gYGVuYCB0cnVlOiBzdWNjZWVkZWQgLyBmYWxzZTogYWxyZWFkeSByZWdpc3RlcmVkXHJcbiAgICAgICAgICogIC0gYGphYCB0cnVlOiDnmbvpjLLmiJDlip8gLyBmYWxzZTog44GZ44Gn44Gr55m76Yyy44GV44KM44Gm44GE44KLXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgcHVzaENvbnRleHQobmFtZTogc3RyaW5nLCBjb250ZXh0OiBSb3V0ZUNvbnRleHQpOiBib29sZWFuIHtcclxuICAgICAgICAgICAgaWYgKCEhUm91dGVyLnNfcm9vdENvbnRleHRzW25hbWVdKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFRBRyArIFwibG9naWMgZXJyb3IuIHJvdXRlIGlzIGFscmVhZHkgcmVnaXN0ZXJlZC4gbmFtZTogXCIgKyBuYW1lKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBSb3V0ZXIuc19yb290Q29udGV4dHNbbmFtZV0gPSBjb250ZXh0O1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBlbiBDaGVjayBpZiAkLm1vYmlsZS5pbml0aWFsaXplUGFnZSgpIGlzIGNhbGxlZCBvciBub3QsIGFuZCBjYWxsIGl0IGlmIG5lZWRlZC5cclxuICAgICAgICAgKiBAamEgICQubW9iaWxlLmluaXRpYWxpemVQYWdlKCkg44GM5ZG844Gw44KM44Gm44GE44KL44GL56K66KqN44GX44CB5b+F6KaB44Gq44KJ5Yid5pyf5YyW44GZ44KL44CCXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gdXJsXHJcbiAgICAgICAgICogIC0gYGVuYCBzZXQgYSBuYXZpZ2F0ZSBVUkwuIChyZWxhdGl2ZSBwYXRoIC8gYWJzb2x1dGUgcGF0aCAvIGZyYWdtZW50KVxyXG4gICAgICAgICAqICAtIGBqYWAg6YG356e7IFVSTCDjgpLmjIflrpogKOebuOWvvuODkeOCuS/ntbblr77jg5Hjgrkv44OV44Op44Kw44Oh44Oz44OIKVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIGluaXRGaXJzdFBhZ2VJZk5lZWRlZCh1cmw6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICBpZiAoISQubW9iaWxlLmF1dG9Jbml0aWFsaXplUGFnZSkge1xyXG4gICAgICAgICAgICAgICAgJChkb2N1bWVudCkub25lKFwicGFnZWJlZm9yZWNoYW5nZVwiLCAoZXZlbnQ6IEpRdWVyeS5FdmVudCwgZGF0YTogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YS50b1BhZ2UgPSBGcmFtZXdvcmsudG9VcmwodXJsKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgJC5tb2JpbGUuaW5pdGlhbGl6ZVBhZ2UoKTtcclxuICAgICAgICAgICAgICAgICQubW9iaWxlLmF1dG9Jbml0aWFsaXplUGFnZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAZW4gQ2hlY2sgZm9yIGN1cnJlbnQgcGFnZSBpcyB0b3AuXHJcbiAgICAgICAgICogQGphIOePvuWcqOOBruODmuODvOOCuOOBjCB0b3Ag44Gr5oyH5a6a44GV44KM44Gm44GE44KL44GL5Yik5a6aXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJuc1xyXG4gICAgICAgICAqICAtIGBlbmAgdHJ1ZTogdG9wIHBhZ2UgLyBmYWxzZTogbm90IHRvcCBwYWdlXHJcbiAgICAgICAgICogIC0gYGphYCB0cnVlOiB0b3Ag5oyH5a6aIC8gZmFsc2U6IHRvcCDjgafjga/jgarjgYRcclxuICAgICAgICAgKi9cclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBpc1RvcFBhZ2UoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGZyYWdtZW50ID0gQmFja2JvbmUuaGlzdG9yeS5nZXRGcmFnbWVudCgkLm1vYmlsZS5wYXRoLnBhcnNlVXJsKGxvY2F0aW9uLmhyZWYpLmhhc2gpO1xyXG4gICAgICAgICAgICBjb25zdCBjb250ZXh0ID0gPFJvdXRlQ29udGV4dD5fLmZpbmQoPGFueT5Sb3V0ZXIuc19yb290Q29udGV4dHMsIChjdHg6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGN0eC5yZWdleHAudGVzdChmcmFnbWVudCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gKG51bGwgPT0gY29udGV4dCkgPyBmYWxzZSA6IGNvbnRleHQudG9wO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQGVuIENhbGxlZCB3aGVuIGFuY2hvciByZWNlaXZlZCBcInZjbGlja1wiIGV2ZW50LlxyXG4gICAgICAgICAqIEBqYSBhbmNob3Ig44GMIHZjbGljayDjgZXjgozjgZ/jgajjgY3jgavjgrPjg7zjg6vjgZXjgozjgotcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm5zXHJcbiAgICAgICAgICogIC0gYGVuYCB0cnVlOiBuZWVkIGRlZmF1bHQgcHJvY2Vzc2luZyAvIGZhbHNlOiBuZWVkIGN1c3RvbSBwcm9jZXNzaW5nXHJcbiAgICAgICAgICogIC0gYGphYCB0cnVlOiBkZWZhdWx0IOWHpueQhiAvIGZhbHNlOiDjgqvjgrnjgr/jg6Dlh6bnkIZcclxuICAgICAgICAgKi9cclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBvbkFuY2hvclZjbGlja2VkKGV2ZW50OiBKUXVlcnkuRXZlbnQpOiBib29sZWFuIHtcclxuICAgICAgICAgICAgaWYgKFJvdXRlci5pc0p1c3RCZWZvcmVWY2xpY2tlZCgpKSB7XHJcbiAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBSb3V0ZXIuZm9sbG93QW5jaG9yKGV2ZW50KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBlbiBBbmNob3IgcHJvY2Vzc2luZy5cclxuICAgICAgICAgKiBAamEgYW5jaG9yIOWHpueQhlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIGZvbGxvd0FuY2hvcihldmVudDogSlF1ZXJ5LkV2ZW50KTogYm9vbGVhbiB7XHJcbiAgICAgICAgICAgIGNvbnN0ICR0YXJnZXQgPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpO1xyXG4gICAgICAgICAgICBjb25zdCB1cmw6IHN0cmluZyA9ICR0YXJnZXQuanFtRGF0YShcImhyZWZcIikgfHwgJHRhcmdldC5hdHRyKFwiaHJlZlwiKTtcclxuICAgICAgICAgICAgY29uc3QgdHJhbnNpdGlvbjogc3RyaW5nID0gJHRhcmdldC5qcW1EYXRhKFwidHJhbnNpdGlvblwiKTtcclxuICAgICAgICAgICAgY29uc3QgZGlyZWN0aW9uOiBzdHJpbmcgPSAkdGFyZ2V0LmpxbURhdGEoXCJkaXJlY3Rpb25cIik7XHJcbiAgICAgICAgICAgIGNvbnN0IGJhY2tEc3Q6IGFueSA9ICR0YXJnZXQuYXR0cihSb3V0ZXIuREFUQV9CQUNLX0RFU1RJTkFUSU9OKTtcclxuICAgICAgICAgICAgY29uc3Qgbm9IYXNoQ2hhbmdlOiBib29sZWFuID0gJHRhcmdldC5hdHRyKFJvdXRlci5EQVRBX05PX0hBU0hfQ0hBTkdFKSA/XHJcbiAgICAgICAgICAgICAgICAkdGFyZ2V0LmF0dHIoUm91dGVyLkRBVEFfTk9fSEFTSF9DSEFOR0UpID09PSBcInRydWVcIiA6IGZhbHNlO1xyXG4gICAgICAgICAgICBjb25zdCBub0hyZWZIYW5kbGU6IGJvb2xlYW4gPSAkdGFyZ2V0LmF0dHIoUm91dGVyLkRBVEFfTk9fVkNMSUNLX0hBTkRMRSkgP1xyXG4gICAgICAgICAgICAgICAgJHRhcmdldC5hdHRyKFJvdXRlci5EQVRBX05PX1ZDTElDS19IQU5ETEUpID09PSBcInRydWVcIiA6IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgLypcclxuICAgICAgICAgICAgICogLSDmmI7npLrnmoTjgavjg4/jg7Pjg4njg6vjgZfjgarjgYTmjIflrprjgYzjgYLjgovloLTlkIhcclxuICAgICAgICAgICAgICogLSBqUU0g44Gu44OV44Op44Kw44Oh44Oz44OI44Gu5aC05ZCIXHJcbiAgICAgICAgICAgICAqIOaXouWumuOBruWHpueQhuOCkuihjOOBhlxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgaWYgKG5vSHJlZkhhbmRsZSB8fCBSb3V0ZXIubmVlZERlZmF1bHRPcGVyYXRpb24odXJsKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIGN1c3RvbSBiZWhhdmllclxyXG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgICAgICAgICAgaWYgKFJvdXRlci5pc0JhY2tCdXR0b25DbGlja2VkKGV2ZW50KSkge1xyXG4gICAgICAgICAgICAgICAgUm91dGVyLmJhY2soKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIFJvdXRlci5uYXZpZ2F0ZSh1cmwsIHRyYW5zaXRpb24sICEhZGlyZWN0aW9uLCB7IG5vSGFzaENoYW5nZTogbm9IYXNoQ2hhbmdlLCBiYWNrRGVzdGluYXRpb246IGJhY2tEc3QgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBlbiBDaGVjayBkZWZhdWx0IHByb2Nlc3NpbmcgbmVlZGVkLlxyXG4gICAgICAgICAqIEBqYSDml6Llrprjga7lh6bnkIbjgpLooYzjgo/jgZvjgovjgYvliKTlrppcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSAgdXJsXHJcbiAgICAgICAgICogIC0gYGVuYCB1cmwgc3RyaW5nXHJcbiAgICAgICAgICogIC0gYGphYCB1cmwg5paH5a2X5YiXXHJcbiAgICAgICAgICogQHJldHVybnNcclxuICAgICAgICAgKiAgLSBgZW5gIHRydWU6IG5lZWQgZGVmYXVsdCBwcm9jZXNzaW5nIC8gZmFsc2U6IG5lZWQgbm90XHJcbiAgICAgICAgICogIC0gYGphYCB0cnVlOiDml6Llrprjga7lh6bnkIbjgYzlv4XopoEgLyBmYWxzZTog5LiN6KaBXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgbmVlZERlZmF1bHRPcGVyYXRpb24odXJsOiBzdHJpbmcpOiBib29sZWFuIHtcclxuICAgICAgICAgICAgaWYgKCF1cmwgfHwgKFwiI1wiID09PSB1cmwpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChcIiNcIiA9PT0gdXJsWzBdKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gIVJvdXRlci5jYW5SZXNvbHZlUm91dGUodXJsKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQGVuIENoZWNrIHN0YXR1cyBvZiBCYWNrYm9uZS5Sb3V0ZXIgaWYgdGhleSBjYW4gcmVzb2x2ZSByb3V0ZS5cclxuICAgICAgICAgKiBAamEgQmFja2JvbmUuUm91dGVyIOOBjCByb3V0ZSDjgpLop6Pmsbrlj6/og73jgYvliKTlrppcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSAgdXJsXHJcbiAgICAgICAgICogIC0gYGVuYCB1cmwgc3RyaW5nXHJcbiAgICAgICAgICogIC0gYGphYCB1cmwg5paH5a2X5YiXXHJcbiAgICAgICAgICogQHJldHVybnNcclxuICAgICAgICAgKiAgLSBgZW5gIHRydWU6IGNhbiByZXNvbHZlIC8gZmFsc2U6IGNhbiBub3RcclxuICAgICAgICAgKiAgLSBgamFgIHRydWU6IOino+axuuWPr+iDvSAvIGZhbHNlOiDop6PmsbrkuI3lj69cclxuICAgICAgICAgKi9cclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBjYW5SZXNvbHZlUm91dGUodXJsOiBzdHJpbmcpOiBib29sZWFuIHtcclxuICAgICAgICAgICAgY29uc3QgZnJhZ21lbnQgPSBCYWNrYm9uZS5oaXN0b3J5LmdldEZyYWdtZW50KHVybCk7XHJcbiAgICAgICAgICAgIHJldHVybiBfLmFueShCYWNrYm9uZS5oaXN0b3J5LmhhbmRsZXJzLCBmdW5jdGlvbiAoaGFuZGxlcjogYW55KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaGFuZGxlci5yb3V0ZS50ZXN0KGZyYWdtZW50KSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBlbiBDaGVjayBcInZjbGlja1wiIGZpcmVkIGF0IHRoZSBsYXN0IG1pbnV0ZS5cclxuICAgICAgICAgKiBAamEg55u05YmN44GrIHZjbGljayDjgYzlkbzjgbDjgozjgZ/jgYvliKTlrppcclxuICAgICAgICAgKi9cclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBpc0p1c3RCZWZvcmVWY2xpY2tlZCgpOiBib29sZWFuIHtcclxuICAgICAgICAgICAgY29uc3QgaXNCZWZvcmUgPSAoRGF0ZS5ub3coKSAtIFJvdXRlci5zX2xhc3RDbGlja2VkVGltZSkgPCBSb3V0ZXIuREVMQVlfVElNRSAqIDI7XHJcbiAgICAgICAgICAgIFJvdXRlci5zX2xhc3RDbGlja2VkVGltZSA9IERhdGUubm93KCk7XHJcbiAgICAgICAgICAgIHJldHVybiBpc0JlZm9yZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBlbiBDaGVjayBiYWNrIGJ1dHRvbiBjbGlja2VkLlxyXG4gICAgICAgICAqIEBqYSBCYWNrIEJ1dHRvbiDjgYzjgq/jg6rjg4Pjgq/jgZXjgozjgZ/jgYvliKTlrppcclxuICAgICAgICAgKi9cclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBpc0JhY2tCdXR0b25DbGlja2VkKGV2ZW50OiBKUXVlcnkuRXZlbnQpOiBib29sZWFuIHtcclxuICAgICAgICAgICAgaWYgKCQoZXZlbnQuY3VycmVudFRhcmdldCkuanFtRGF0YShcInJlbFwiKSA9PT0gXCJiYWNrXCIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAZW4gSXQgY2FsbGVkIG9uIHN1Y2NlZWQgcm91dGluZyB0cmlnZ2VyZWQgYnkgY2hhbmdpbmcgaGFzaC5cclxuICAgICAgICAgKiBAamEg44OP44OD44K344Ol5YCk44GM5aSJ5pu044GV44KM44CB44Or44O844OG44Kj44Oz44Kw44GM5oiQ5Yqf44GX44Gf44Go44GN44Gr44Kz44O844Or44GV44KM44KLXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gbmFtZVxyXG4gICAgICAgICAqICAtIGBlbmAgbmFtZSBvZiByb3V0ZVxyXG4gICAgICAgICAqICAtIGBqYWAgcm91dGUg5ZCN44CCcGFnZSDjga7lgKTjgYzmuKHjgovjgIJcclxuICAgICAgICAgKiBAcGFyYW0gYXJnc1xyXG4gICAgICAgICAqICAtIGBlbmAgYXJyYXkgb2YgcGFyYW10ZXJcclxuICAgICAgICAgKiAgLSBgamFgIOODkeODqeODoeODvOOCv+mFjeWIl+OAglxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIG9uUm91dGVTdWNjZWVkZWQobmFtZTogc3RyaW5nLCAuLi5hcmdzOiBhbnlbXSk6IHZvaWQge1xyXG4gICAgICAgICAgICBjb25zdCBjb250ZXh0ID0gPFJvdXRlQ29udGV4dD5Sb3V0ZXIuc19yb290Q29udGV4dHNbbmFtZV07XHJcbiAgICAgICAgICAgIGlmICghIWNvbnRleHQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGludGVudCA9IHsgcGFyYW1zOiB7IHF1ZXJ5UGFyYW1zOiBhcmdzIH0gfTtcclxuICAgICAgICAgICAgICAgIFJvdXRlci5zX2xhc3ROYXZpZ2F0ZUluZm8uaW5OYXZpZ2F0aW9uID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGlmIChudWxsICE9IFJvdXRlci5zX2xhc3ROYXZpZ2F0ZUluZm8uaW50ZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaW50ZW50LnBhcmFtcyA9ICQuZXh0ZW5kKHt9LCBpbnRlbnQucGFyYW1zLCBSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvLmludGVudC5wYXJhbXMgfHwge30pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mby5pbnRlbnQgPSAkLmV4dGVuZCh7fSwgUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mby5pbnRlbnQsIGludGVudCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBoYW5kbGVkID0gY29udGV4dC5jYWxsYmFjayhhcmdzKTtcclxuICAgICAgICAgICAgICAgIGlmICghaGFuZGxlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIFJvdXRlci5jaGFuZ2VQYWdlKGNvbnRleHQucGFnZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBlbiBJdCBjYWxsZWQgb24gZmFpbGVkIHJvdXRpbmcgdHJpZ2dlcmVkIGJ5IGNoYW5naW5nIGhhc2guXHJcbiAgICAgICAgICogQGphIOODj+ODg+OCt+ODpeWApOOBjOWkieabtOOBleOCjOOAgeODq+ODvOODhuOCo+ODs+OCsOOBjOWkseaVl+OBl+OBn+OBqOOBjeOBq+OCs+ODvOODq+OBleOCjOOCi1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIG5hbWVcclxuICAgICAgICAgKiAgLSBgZW5gIG5hbWUgb2Ygcm91dGVcclxuICAgICAgICAgKiAgLSBgamFgIHJvdXRlIOWQjeOAgnBhZ2Ug44Gu5YCk44GM5rih44KL44CCXHJcbiAgICAgICAgICogQHBhcmFtIGFyZ3NcclxuICAgICAgICAgKiAgLSBgZW5gIGFycmF5IG9mIHBhcmFtdGVyc1xyXG4gICAgICAgICAqICAtIGBqYWAg44OR44Op44Oh44O844K/6YWN5YiX44CCXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgb25Sb3V0ZUZhaWxlZChmcmFnbWVudDogc3RyaW5nKTogdm9pZCB7XHJcbiAgICAgICAgICAgIFJvdXRlci5zX2xhc3ROYXZpZ2F0ZUluZm8uaW5OYXZpZ2F0aW9uID0gdHJ1ZTtcclxuICAgICAgICAgICAgaWYgKG51bGwgPT0gZnJhZ21lbnQpIHtcclxuICAgICAgICAgICAgICAgIGZyYWdtZW50ID0gQmFja2JvbmUuaGlzdG9yeS5nZXRGcmFnbWVudCgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyByb3V0ZSDjgYzop6PmsbrjgafjgY3jgarjgYvjgaPjgZ/jgoLjga7jgpLnrqHnkIbkuIvjgatcclxuICAgICAgICAgICAgaWYgKFJvdXRlci5zX2xhc3ROYXZpZ2F0ZUluZm8ucG9zaXRpdmVOYXZpZ2F0ZSkge1xyXG4gICAgICAgICAgICAgICAgbGV0IGNvbnRleHQgPSA8Um91dGVDb250ZXh0PlJvdXRlci5zX3Jvb3RDb250ZXh0c1tmcmFnbWVudF07XHJcbiAgICAgICAgICAgICAgICBpZiAobnVsbCA9PSBjb250ZXh0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGV4dCA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcm91dGU6IGZyYWdtZW50LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWdleHA6ICg8YW55PlJvdXRlci5zX3JvdXRlcikuX3JvdXRlVG9SZWdFeHAoZnJhZ21lbnQpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYWdlOiBSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvLnVybCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG9wOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2s6IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICBSb3V0ZXIucHVzaENvbnRleHQoZnJhZ21lbnQsIGNvbnRleHQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBmcmFnbWVudCDjgYvjgokgcGF0aCDjgpLop6PmsbpcclxuICAgICAgICAgICAgbGV0IHBhdGggPSBmcmFnbWVudDtcclxuICAgICAgICAgICAgaWYgKG51bGwgIT0gUm91dGVyLnNfcm9vdENvbnRleHRzW2ZyYWdtZW50XSkge1xyXG4gICAgICAgICAgICAgICAgcGF0aCA9IFJvdXRlci5zX3Jvb3RDb250ZXh0c1tmcmFnbWVudF0ucGFnZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgUm91dGVyLmNoYW5nZVBhZ2UocGF0aCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAZW4gVGhpcyBmdW5jdGlvbiBqdXN0IGNhbGxzIGpRdWVyeSBNb2JpbGUncyBuYXZpZ2F0aW9uIG1ldGhvZC5cclxuICAgICAgICAgKiBAamEgalF1ZXJ5IE1vYmlsZSDjgavjgojjgovjg5rjg7zjgrjpgbfnp7vmjIflrppcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBwYXRoXHJcbiAgICAgICAgICogIC0gYGVuYCB0byBwYWdlIHBhdGhcclxuICAgICAgICAgKiAgLSBgamFgIOmBt+enu+WFiOODkeOCueOCkuaMh+WumlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIGNoYW5nZVBhZ2UocGF0aDogc3RyaW5nKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGxldCBub3RpZnlCZWZvcmVSb3V0ZUNoYW5nZTogKCkgPT4gSVByb21pc2VCYXNlPGFueT47XHJcblxyXG4gICAgICAgICAgICAvLyBkYXRhLXJlbD1cImJhY2tcIiwg44OW44Op44Km44K244Oc44K/44OzLCBIL1cgQmFjayBLZXkg44GM5oq85LiL44GV44KM44Gf44Go44GNXHJcbiAgICAgICAgICAgIGlmICghUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mby5wb3NpdGl2ZU5hdmlnYXRlKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mby5pbkFkZGl0aW9uYWxCYWNrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mby5pbkFkZGl0aW9uYWxCYWNrID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIFJvdXRlci5kZWNpZGVEaXJlY3Rpb24ocGF0aCk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8g5oyH5a6a5YWI44Gr5oi744KL44GL5Yik5a6aXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYWRkaXRpb25hbCA9IFJvdXRlci5kZXRlY3RBZGRpdGlvbmFsQmFja0Rpc3RhbmNlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKDAgPCBhZGRpdGlvbmFsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIDLlm57nm67ku6XpmY3jga4gaGFzaCBjaGFuZ2Ug44Gr44Gv5Y+N5b+c44GV44Gb44Gq44GELlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvLmluQWRkaXRpb25hbEJhY2sgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBSb3V0ZXIuX2dldEpxbUhpc3RvcnkoKS5hY3RpdmVJbmRleCAtPSBhZGRpdGlvbmFsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBoaXN0b3J5LmdvKC1hZGRpdGlvbmFsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyDpgbfnp7vlhYjjgYwgc3ViZmxvdyDplovlp4vngrnjgafjgYLjgovloLTlkIjjgIFwYXJhbSDjgpLliYrpmaRcclxuICAgICAgICAgICAgICAgIGNvbnN0IHN1YkZsb3dJbmZvID0gUm91dGVyLmRldGVjdFN1YkZsb3dCYXNlSW5mbygpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHN1YkZsb3dJbmZvLmlzQ3VycmVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBzdWJGbG93SW5mby5zdGFja1tSb3V0ZXIuU1VCRkxPV19QQVJBTV07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyDog73li5XnmoTpgbfnp7vjga7loLTlkIggcHJldmlvdXNJbmRleCDjgpLmm7TmlrBcclxuICAgICAgICAgICAgICAgIFJvdXRlci5fZ2V0SnFtSGlzdG9yeSgpLnByZXZpb3VzSW5kZXggPSBSb3V0ZXIuX2dldEpxbUhpc3RvcnkoKS5hY3RpdmVJbmRleDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8g44Oa44O844K46YG356e76ZaL5aeL6YCa55+lLiDjgZnjgafjgavjgrPjg7zjg6vjgZXjgozjgabjgYTjgovloLTlkIjjga/ml6Llrprjga7kvZXjgoLjgZfjgarjgYTjgrPjg7zjg6vjg5Djg4Pjgq/jgpLkvb/nlKjjgZnjgosuXHJcbiAgICAgICAgICAgIG5vdGlmeUJlZm9yZVJvdXRlQ2hhbmdlID0gUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mby5jYWxsZWRCZWZvcmVSb3V0ZUNoYW5nZSA/IF9kZWZhdWx0QmVmb3JlUm91dGVDaGFuZ2UgOiBfYmVmb3JlUm91dGVDaGFuZ2U7XHJcblxyXG4gICAgICAgICAgICBub3RpZnlCZWZvcmVSb3V0ZUNoYW5nZSgpXHJcbiAgICAgICAgICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8g5LuY5Yqg5oOF5aCxXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKFJvdXRlci5zX2xhc3ROYXZpZ2F0ZUluZm8uaW50ZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFJvdXRlci5fcHVzaEludGVudChSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvLmludGVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBSb3V0ZXIudHJlYXRVcmxIaXN0b3J5KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhZ2VUcmFuc2l0aW9uID0gKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFJvdXRlci5zX2xhc3ROYXZpZ2F0ZUluZm8udHJhbnNpdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFJvdXRlci5zX2xhc3ROYXZpZ2F0ZUluZm8udHJhbnNpdGlvbjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChSb3V0ZXIuc19maXJzdENoYW5nZVBhZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJvdXRlci5zX2ZpcnN0Q2hhbmdlUGFnZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwibm9uZVwiOyAgLy8gc3BsYXNoIOOBi+OCieOBrumBt+enu1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICQubW9iaWxlLmRlZmF1bHRQYWdlVHJhbnNpdGlvbjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICQubW9iaWxlLmNoYW5nZVBhZ2UoRnJhbWV3b3JrLnRvVXJsKHBhdGgpLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNob3dMb2FkTXNnOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWxsb3dTYW1lUGFnZVRyYW5zaXRpb246IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zaXRpb246IHBhZ2VUcmFuc2l0aW9uLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXZlcnNlOiBSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvLnJldmVyc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZyb21IYXNoQ2hhbmdlOiAhUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mby5wb3NpdGl2ZU5hdmlnYXRlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VIYXNoOiAhUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mby5ub0hhc2hDaGFuZ2UsXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLmZhaWwoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoVEFHICsgXCJiZWZvcmUgcm91dGUgY2hhbmdlIGNhbGwsIGZhaWxlZC5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mbyA9IHt9O1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAZW4gRGVjaWRlIGRpcmVjdGlvbiBwYXJhbWV0ZXIuIDxicj5cclxuICAgICAgICAgKiAgICAgSXQncyBhcyBzYW1lIGFzIGpRTSBpbnRlcm5hbCBpbXBsZW1lbnQuIChpbXBlcmZlY3Rpb24pXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAamEgZGlyZWN0aW9uIOOBruWIpOWumiA8YnI+XHJcbiAgICAgICAgICogICAgIGpRTSDjga7lhoXpg6jlrp/oo4XjgajnrYnkvqEgKOS4jeWujOWFqClcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBwYXRoXHJcbiAgICAgICAgICogIC0gYGVuYCB0byBwYWdlIHBhdGhcclxuICAgICAgICAgKiAgLSBgamFgIOmBt+enu+WFiOODkeOCueOCkuaMh+WumlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIGRlY2lkZURpcmVjdGlvbihwYXRoOiBzdHJpbmcpOiB2b2lkIHtcclxuICAgICAgICAgICAgY29uc3QgdXJsID0gJC5tb2JpbGUucGF0aC5jb252ZXJ0VXJsVG9EYXRhVXJsKEZyYW1ld29yay50b1VybChwYXRoKSk7XHJcblxyXG4gICAgICAgICAgICBpZiAobnVsbCA9PSBSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvLnRyYW5zaXRpb24pIHtcclxuICAgICAgICAgICAgICAgIFJvdXRlci5zX2xhc3ROYXZpZ2F0ZUluZm8udHJhbnNpdGlvbiA9IFJvdXRlci5fZ2V0SnFtSGlzdG9yeSgpLmdldEFjdGl2ZSgpLnRyYW5zaXRpb247XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIFJvdXRlci5fZ2V0SnFtSGlzdG9yeSgpLmRpcmVjdCh7XHJcbiAgICAgICAgICAgICAgICB1cmw6IHVybCxcclxuICAgICAgICAgICAgICAgIHByZXNlbnQ6IGZ1bmN0aW9uIChuZXdQYWdlOiBhbnksIGRpcmVjdGlvbjogc3RyaW5nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChkaXJlY3Rpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImJhY2tcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChudWxsID09IFJvdXRlci5zX2xhc3ROYXZpZ2F0ZUluZm8ucmV2ZXJzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJvdXRlci5zX2xhc3ROYXZpZ2F0ZUluZm8ucmV2ZXJzZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImZvcndhcmRcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChudWxsID09IFJvdXRlci5zX2xhc3ROYXZpZ2F0ZUluZm8udHJhbnNpdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJvdXRlci5zX2xhc3ROYXZpZ2F0ZUluZm8udHJhbnNpdGlvbiA9IG5ld1BhZ2UudHJhbnNpdGlvbjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFRBRyArIFwidW5rbm93biBkaXJlY3Rpb246IFwiICsgZGlyZWN0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBtaXNzaW5nOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8g5Yid5pyf44Oa44O844K4IFVSTCDjga/liKTlrprjgafjgY3jgarjgYTjgILmraPluLjns7vjgIJcclxuICAgICAgICAgICAgICAgICAgICBpZiAoMSA9PT0gUm91dGVyLl9nZXRKcW1IaXN0b3J5KCkuYWN0aXZlSW5kZXgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgUm91dGVyLl9nZXRKcW1IaXN0b3J5KCkucHJldmlvdXNJbmRleCA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFJvdXRlci5fZ2V0SnFtSGlzdG9yeSgpLmFjdGl2ZUluZGV4ID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgPT0gUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mby5yZXZlcnNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvLnJldmVyc2UgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICgwICE9PSBSb3V0ZXIuX2dldEpxbUhpc3RvcnkoKS5hY3RpdmVJbmRleCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oVEFHICsgXCJ1bmtub3duIGRpcmVjdGlvbi5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBlbiBSZXR1cm4gYWRkaXRpb25hbCBiYWNrIGRpc3RhbmNlIGNvdW50IHdoZW4gYmFjayBkZXN0aW5hdGlvbiBzZXQuIChjb25zdCBmdW5jdGlvbilcclxuICAgICAgICAgKiBAamEg5oi744KK5YWI44GM5oyH5a6a44GV44KM44Gm44GE44KL44Go44GN44CB6L+95Yqg44GuIEJhY2sg5pWw44KS6L+U44GZ44CCKOOBk+OBrumWouaVsOOBryBSb3V0ZXIg44Gu54q25oWL44KS5aSJ5pu044GX44Gq44GE44CCKVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybnNcclxuICAgICAgICAgKiAgLSBgZW5gIGNvdW50IG9mIGFkZGl0aW9uYSBiYWNrIGRpc3RhbmNlLlxyXG4gICAgICAgICAqICAtIGBqYWDov73liqDjgacgQmFjayDjgavlv4XopoHjgarot53pm6IuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgZGV0ZWN0QWRkaXRpb25hbEJhY2tEaXN0YW5jZSgpOiBudW1iZXIge1xyXG4gICAgICAgICAgICBjb25zdCBzdGFjayA9IFJvdXRlci5fZ2V0SnFtSGlzdG9yeSgpLnN0YWNrO1xyXG4gICAgICAgICAgICBjb25zdCBoaXN0b3J5QWN0aXZlSW5kZXggPSBSb3V0ZXIuX2dldEpxbUhpc3RvcnkoKS5hY3RpdmVJbmRleDsgICAgLy8gZGVjaWRlRGlyZWN0aW9uKCkg44GuIFJvdXRlci5fZ2V0SnFtSGlzdG9yeSgpLmRpcmVjdCgpIOOBq+OCiOOBo+OBpuOAgWhpc3Rvcnkg44GuIGFjdGl2ZUluZGV4IOOBr+OBmeOBp+OBq+WkieOCj+OBo+OBpuOBhOOCi1xyXG4gICAgICAgICAgICBjb25zdCBwcmV2aW91c0luZGV4ID0gUm91dGVyLl9nZXRKcW1IaXN0b3J5KCkucHJldmlvdXNJbmRleDsgICAgICAgLy8gW+aIu+OCi13jgYzmirzkuIvjgZXjgozjgZ/loLTlkIjjgavlgKTjgYzlhaXjgotcclxuICAgICAgICAgICAgbGV0IGksIGJhY2tEc3QsIGRpc3RhbmNlLCBmcmFnbWVudCwgY29udGV4dCwganFtRGF0YVVybDtcclxuXHJcbiAgICAgICAgICAgIC8vIGNoZWNrIFwib3BlcmF0aW9uXCIuIFvmiLvjgotd44GK44KI44GzIGNsZWFyRm9yd2FyZCgpIOOBleOCjOOBpuOBhOOBquOBhOeKtuazgeOCkuODgeOCp+ODg+OCr1xyXG4gICAgICAgICAgICBpZiAoIVJvdXRlci5zX2xhc3ROYXZpZ2F0ZUluZm8ucmV2ZXJzZSB8fCBudWxsID09IHByZXZpb3VzSW5kZXggfHwgIXN0YWNrW3ByZXZpb3VzSW5kZXhdKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gMDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gXCJiYWNrRHN0IGV4aXN0c1wiLiBb5oi744KK5YWIXeOBjOaMh+WumuOBleOCjOOBpuOBhOOCi+OBi+ODgeOCp+ODg+OCr1xyXG4gICAgICAgICAgICBiYWNrRHN0ID0gc3RhY2tbcHJldmlvdXNJbmRleF1bUm91dGVyLkJBQ0tfREVTVElOQVRJT05fVVJMXTtcclxuICAgICAgICAgICAgaWYgKChudWxsID09IGJhY2tEc3QpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gMDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZnJhZ21lbnQgPSBCYWNrYm9uZS5oaXN0b3J5LmdldEZyYWdtZW50KGJhY2tEc3QpO1xyXG5cclxuICAgICAgICAgICAgLy8g5Yid5pyf44Oa44O844K4XHJcbiAgICAgICAgICAgIGlmIChcIlwiID09PSBmcmFnbWVudCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGhpc3RvcnlBY3RpdmVJbmRleDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gcm9vdENvbnRleHQg44GL44KJIHBhdGgg44KS6YCG5byV44GNXHJcbiAgICAgICAgICAgIGNvbnRleHQgPSA8Um91dGVDb250ZXh0Pl8uZmluZCg8YW55PlJvdXRlci5zX3Jvb3RDb250ZXh0cywgKGN0eDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY3R4LnJlZ2V4cC50ZXN0KGZyYWdtZW50KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGlmIChudWxsID09IGNvbnRleHQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihUQUcgKyBcImJhY2sgZGVzdGluYXRpb24gaXMgbm90IHJlZ2lzdGVyZWQuIGJhY2stZHN0OiBcIiArIGJhY2tEc3QpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIGRhdGFVcmwg44KS5YWD44GrIGpRTSBIaXN0b3J5IOOCkuaknOe0olxyXG4gICAgICAgICAgICBqcW1EYXRhVXJsID0gUm91dGVyLnBhdGhUb0pxbURhdGFVcmwoY29udGV4dC5wYWdlKTtcclxuICAgICAgICAgICAgZm9yIChpID0gaGlzdG9yeUFjdGl2ZUluZGV4LCBkaXN0YW5jZSA9IDA7IDAgPD0gaTsgaS0tICwgZGlzdGFuY2UrKykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGpxbURhdGFVcmwgPT09IHN0YWNrW2ldLnBhZ2VVcmwpIHtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoaSA8IDApIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihUQUcgKyBcImJhY2sgZGVzdGluYXRpb24gZG9lcyBub3QgZXhpc3QgaW4gaGlzdG9yeS4gYmFjay1kc3Q6IFwiICsgYmFja0RzdCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gMDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGRpc3RhbmNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQGVuIFN0YXJ0IHN1YiBmbG93LiA8YnI+XHJcbiAgICAgICAgICogICAgIEF0dGFjaCBTdWJGbG93UGFyYW0gdG8ganFtIGhpc3Rvcnkgc3RhY2sgb2JqZWN0LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQGphIFN1YiBGbG93IOOBrumWi+WniyA8YnI+XHJcbiAgICAgICAgICogICAgIFN1YkZsb3dQYXJhbSDjgpIganFtIGhpc3Rvcnkgc3RhY2sg44Gr44Ki44K/44OD44OBXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gc3ViRmxvd1BhcmFtXHJcbiAgICAgICAgICogIC0gYGVuYCBTdWIgRmxvdyBwYXJhbWV0ZXIuXHJcbiAgICAgICAgICogIC0gYGphYCBTdWIgRmxvdyDjg5Hjg6njg6Hjg7zjgr9cclxuICAgICAgICAgKi9cclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBzdGFydFN1YkZsb3coc3ViRmxvd1BhcmFtOiBTdWJGbG93UGFyYW0pOiB2b2lkIHtcclxuICAgICAgICAgICAgY29uc3QgYWN0aXZlID0gUm91dGVyLl9nZXRKcW1IaXN0b3J5KCkuZ2V0QWN0aXZlKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHBhcmFtID0gPFN1YkZsb3dQYXJhbUV4PnN1YkZsb3dQYXJhbTtcclxuICAgICAgICAgICAgaWYgKHN1YkZsb3dQYXJhbS5kZXN0QmFzZSkge1xyXG4gICAgICAgICAgICAgICAgbGV0IGRpc3RhbmNlID0gMDtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGZyYWdtZW50ID0gQmFja2JvbmUuaGlzdG9yeS5nZXRGcmFnbWVudChzdWJGbG93UGFyYW0uZGVzdEJhc2UpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY29udGV4dCA9IDxSb3V0ZUNvbnRleHQ+Xy5maW5kKDxhbnk+Um91dGVyLnNfcm9vdENvbnRleHRzLCAoY3R4OiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY3R4LnJlZ2V4cC50ZXN0KGZyYWdtZW50KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgaWYgKG51bGwgPT0gY29udGV4dCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihUQUcgKyBcImJhc2UgZGVzdGluYXRpb24gaXMgbm90IHJlZ2lzdGVyZWQuIGRlc3RCYXNlOiBcIiArIHN1YkZsb3dQYXJhbS5kZXN0QmFzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIGRhdGFVcmwg44KS5YWD44GrIGpRTSBIaXN0b3J5IOOCkuaknOe0olxyXG4gICAgICAgICAgICAgICAgY29uc3QganFtRGF0YVVybCA9IFJvdXRlci5wYXRoVG9KcW1EYXRhVXJsKGNvbnRleHQucGFnZSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzdGFjayA9IFJvdXRlci5fZ2V0SnFtSGlzdG9yeSgpLnN0YWNrO1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IFJvdXRlci5fZ2V0SnFtSGlzdG9yeSgpLmFjdGl2ZUluZGV4OyAwIDw9IGk7IGktLSAsIGRpc3RhbmNlKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoanFtRGF0YVVybCA9PT0gc3RhY2tbaV0ucGFnZVVybCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJhbS5hZGRpdGlvbmFsRGlzdGFuY2UgPSBkaXN0YW5jZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcGFyYW0uZGVzdEJhc2UgPSBsb2NhdGlvbi5oYXNoO1xyXG4gICAgICAgICAgICAgICAgcGFyYW0uYWRkaXRpb25hbERpc3RhbmNlID0gMDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgYWN0aXZlW1JvdXRlci5TVUJGTE9XX1BBUkFNXSA9IHBhcmFtO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQGVuIEVuZCBzdWIgZmxvdyA8YnI+XHJcbiAgICAgICAgICogICAgIG5hdmlnYXRlIGFuZCBkZWxldGUgU3ViRmxvd1BhcmFtIGZyb20ganFtIGhpc3Rvcnkgc3RhY2sgb2JqZWN0LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQGphIFN1YiBGbG93IOOBrue1guS6hiA8YnI+XHJcbiAgICAgICAgICogICAgIOmBt+enu+OBqCBTdWJGbG93UGFyYW0g44KSIGpxbSBoaXN0b3J5IHN0YWNrIOOBi+OCieWJiumZpFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIG5hdk9wdGlvbnNcclxuICAgICAgICAgKiAgLSBgZW5gIFN1YiBGbG93IHBhcmFtZXRlci5cclxuICAgICAgICAgKiAgLSBgamFgIFN1YiBGbG93IOODkeODqeODoeODvOOCv1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIGZpbmlzaFN1YkZsb3cob3B0aW9uczogTmF2aWdhdGVPcHRpb25zKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGNvbnN0IG5hdk9wdGlvbnM6IE5hdmlnYXRlT3B0aW9ucyA9ICQuZXh0ZW5kKHRydWUsIHt9LCBvcHRpb25zKTtcclxuICAgICAgICAgICAgY29uc3QgYmFzZUluZm8gPSBSb3V0ZXIuZGV0ZWN0U3ViRmxvd0Jhc2VJbmZvKCk7XHJcbiAgICAgICAgICAgIC8vIFwiZW5kXCIg5pmC44Gr5pu05paw44GV44KM44Gf44KC44Gu44KS5LiK5pu444GNXHJcbiAgICAgICAgICAgIGNvbnN0IHBhcmFtOiBTdWJGbG93UGFyYW0gPSAkLmV4dGVuZCh7fSwgYmFzZUluZm8uc3ViRmxvd1BhcmFtLCBuYXZPcHRpb25zLnN1YkZsb3cpO1xyXG4gICAgICAgICAgICBjb25zdCBkaXN0YW5jZSA9IGJhc2VJbmZvLmRpc3RhbmNlO1xyXG4gICAgICAgICAgICBjb25zdCBzdGFjayA9IGJhc2VJbmZvLnN0YWNrO1xyXG4gICAgICAgICAgICBsZXQgcmV0cnkgPSAwO1xyXG4gICAgICAgICAgICBjb25zdCBOQVZJR0FURV9JTlRFUlZBTCA9IDEwMDtcclxuICAgICAgICAgICAgY29uc3QgTUFYX1JFVFJZX0NPVU5UID0gMTA7XHJcblxyXG4gICAgICAgICAgICAvLyBoYXNoIOWkieabtOOBjOWujOS6huOBl+OBn+W+jOOBqyBuYXZpZ2F0ZSDjgpLlrp/ooYxcclxuICAgICAgICAgICAgY29uc3QgX25hdmlnYXRlID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKE1BWF9SRVRSWV9DT1VOVCA8PSByZXRyeSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoVEFHICsgXCJyZWFjaGVkIG5hdmlnYXRlIG1heCByZXRyeSBjb3VudC5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mbyA9IHt9O1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChwYXJhbS5kZXN0QmFzZSAhPT0gbG9jYXRpb24uaGFzaCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHJ5Kys7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChfbmF2aWdhdGUsIE5BVklHQVRFX0lOVEVSVkFMKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mby5pbk5hdmlnYXRpb24gPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICBSb3V0ZXIucmVnaXN0ZXJQYWdlU3RhY2socGFyYW0uZGVzdFN0YWNrcywgdHJ1ZSwgbmF2T3B0aW9ucyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBpZiAoc3RhY2spIHtcclxuICAgICAgICAgICAgICAgIGRlbGV0ZSBzdGFja1tSb3V0ZXIuU1VCRkxPV19QQVJBTV07XHJcblxyXG4gICAgICAgICAgICAgICAgUm91dGVyLl9nZXRKcW1IaXN0b3J5KCkuYWN0aXZlSW5kZXggLT0gZGlzdGFuY2U7XHJcbiAgICAgICAgICAgICAgICBSb3V0ZXIuX2dldEpxbUhpc3RvcnkoKS5jbGVhckZvcndhcmQoKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAocGFyYW0uZGVzdFN0YWNrcykge1xyXG4gICAgICAgICAgICAgICAgICAgIFJvdXRlci5zdG9wKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gaU9TIOeSsOWig+OBq+OBiuOBhOOBpiBpbmRleC5odG1sIOOCiOOCiiBoaXN0b3J5LmdvKDApIOOBjOeZuueUn+OBmeOCi+OBqOODquODreODvOODieOBjOeZuueUn+OBmeOCiy5cclxuICAgICAgICAgICAgICAgICAgICAvLyDjgZ3jga7lvoznlLvpnaLpgbfnp7vjgpLmjqfjgYjjgovjgZ/jgoEsIOWxpeattOOCkuaIu+OCi+W/heimgeOBjOOBguOCi+OBqOOBjeOBq+OBruOBv+mZkOWumuOBmeOCiy5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoMCAhPT0gZGlzdGFuY2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGlzdG9yeS5nbygtZGlzdGFuY2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBkZWxldGUgbmF2T3B0aW9ucy5zdWJGbG93OyAgICAvLyBzdWJGbG93IOODl+ODreODkeODhuOCo+OBruegtOajhFxyXG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoX25hdmlnYXRlLCAwKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mby5wb3NpdGl2ZU5hdmlnYXRlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgaGlzdG9yeS5nbygtZGlzdGFuY2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFRBRyArIFwic3ViRmxvdyBiZWdpbiBzdGF0dXMgZG9lcyBub3QgZXhpc3QgaW4gaGlzdG9yeS5cIik7XHJcbiAgICAgICAgICAgICAgICBSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvID0ge307XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBlbiBSZXR1cm4gZGVzdGluYXRpb24gU3ViIEZsb3cgaW5mb3JtYXRpb24uIChjb25zdCBmdW5jdGlvbilcclxuICAgICAgICAgKiBAamEgU3ViIEZsb3cg5oOF5aCx44KS6L+U5Y20ICjjgZPjga7plqLmlbDjga8gUm91dGVyIOOBrueKtuaFi+OCkuWkieabtOOBl+OBquOBhOOAgilcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm5zXHJcbiAgICAgICAgICogIC0gYGVuYCBzdWIgZmxvdyBpbmZvLlxyXG4gICAgICAgICAqICAtIGBqYWAgU3ViIEZsb3cg5oOF5aCxLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIGRldGVjdFN1YkZsb3dCYXNlSW5mbygpOiBhbnkge1xyXG4gICAgICAgICAgICBjb25zdCBzdGFjayA9IFJvdXRlci5fZ2V0SnFtSGlzdG9yeSgpLnN0YWNrO1xyXG4gICAgICAgICAgICBjb25zdCBoaXN0b3J5QWN0aXZlSW5kZXggPSBSb3V0ZXIuX2dldEpxbUhpc3RvcnkoKS5hY3RpdmVJbmRleDtcclxuICAgICAgICAgICAgbGV0IGk6IG51bWJlciwgZGlzdGFuY2U6IG51bWJlcjtcclxuICAgICAgICAgICAgbGV0IHBhcmFtOiBTdWJGbG93UGFyYW1FeCA9IDxTdWJGbG93UGFyYW1FeD57fTtcclxuICAgICAgICAgICAgbGV0IHRhcmdldDogT2JqZWN0O1xyXG5cclxuICAgICAgICAgICAgZm9yIChpID0gaGlzdG9yeUFjdGl2ZUluZGV4LCBkaXN0YW5jZSA9IDA7IDAgPD0gaTsgaS0tICwgZGlzdGFuY2UrKykge1xyXG4gICAgICAgICAgICAgICAgaWYgKHN0YWNrW2ldW1JvdXRlci5TVUJGTE9XX1BBUkFNXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldCA9IHN0YWNrW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgIHBhcmFtID0gPFN1YkZsb3dQYXJhbUV4PnN0YWNrW2ldW1JvdXRlci5TVUJGTE9XX1BBUkFNXTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKG51bGwgPT0gcGFyYW0uYWRkaXRpb25hbERpc3RhbmNlKSB7XHJcbiAgICAgICAgICAgICAgICBwYXJhbS5hZGRpdGlvbmFsRGlzdGFuY2UgPSAwO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgc3RhY2s6IHRhcmdldCxcclxuICAgICAgICAgICAgICAgIHN1YkZsb3dQYXJhbTogcGFyYW0sXHJcbiAgICAgICAgICAgICAgICBkaXN0YW5jZTogZGlzdGFuY2UgKyBwYXJhbS5hZGRpdGlvbmFsRGlzdGFuY2UsXHJcbiAgICAgICAgICAgICAgICBpc0N1cnJlbnQ6ICgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRhcmdldCAmJiAwID09PSBkaXN0YW5jZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSkoKSxcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBlbiBDb252ZXJ0IHBhdGggdG8galFNIGRhdGFVcmwuXHJcbiAgICAgICAgICogQGphIOODkeOCueOCkiBqUU0gZGF0YVVybCDjgavlpInmj5tcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm5zIGpRTSBkYXRhIHVybC5cclxuICAgICAgICAgKi9cclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBwYXRoVG9KcW1EYXRhVXJsKHBhdGg6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICAgICAgICAgIGNvbnN0IHVybCA9IEZyYW1ld29yay50b1VybChwYXRoKTtcclxuICAgICAgICAgICAgY29uc3QgZGF0YVVybCA9ICQubW9iaWxlLnBhdGguY29udmVydFVybFRvRGF0YVVybCh1cmwpO1xyXG4gICAgICAgICAgICByZXR1cm4gZGF0YVVybDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBlbiBVcGRhdGUgalFNIHVybEhpc3RvcnkgYnkgd2luZG93Lmhpc3Rvcnkgb2JqZWN0LiA8YnI+XHJcbiAgICAgICAgICogICAgIFRvIGJlIG5hdHVyYWwgYnJvd3NpbmcgaGlzdG9yeSBiZWhhdmlvciwgYXBwbGljYXRpb24gbmVlZHMgdG8gdXBkYXRlIGpRTSB1cmxIaXN0b3J5IDxicj5cclxuICAgICAgICAgKiAgICAgd2hlbiBjbGlja2luZyBiYWNrIG9yIG5leHQgYnV0dG9uIG9mIGJyb3dzZXIuIChpbXBlcmZlY3Rpb24gZm9yIGRlY2lkZURpcmVjdGlvbigpKVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQGphIOODluODqeOCpuOCtuOBruWxpeattOOBq+WfuuOBpeOBjSBqUU0gdXJsSGlzdG9yeSDjgpLmm7TmlrAgPGJyPlxyXG4gICAgICAgICAqICAgICBb5oi744KLXS9b6YCy44KAXeOBjOaKvOS4i+OBleOCjOOBn+W+jOOAgeODmuODvOOCuOmBt+enu+OBleOCjOOCi+OBqOOBjeOAgWpRTSB1cmxIaXN0b3J5IOOCkuabtOaWsOOBmeOCi+OAgihkZWNpZGVEaXJlY3Rpb24oKSDjgavjgojjgorkuI3lrozlhagpXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgdHJlYXRVcmxIaXN0b3J5KCk6IHZvaWQge1xyXG4gICAgICAgICAgICBpZiAoUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mby5wb3NpdGl2ZU5hdmlnYXRlIHx8IGhpc3RvcnkubGVuZ3RoIDwgUm91dGVyLl9nZXRKcW1IaXN0b3J5KCkuc3RhY2subGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICBSb3V0ZXIuX2dldEpxbUhpc3RvcnkoKS5jbGVhckZvcndhcmQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJuYW1lc3BhY2UgQ0RQLkZyYW1ld29yayB7XHJcblxyXG4gICAgaW1wb3J0IFByb21pc2UgPSBDRFAuUHJvbWlzZTtcclxuXHJcbiAgICBjb25zdCBUQUcgPSBcIltDRFAuRnJhbWV3b3JrLlBhZ2VdIFwiO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGVuIEludGVybmFsIEludGVudCBpbnRlcmZhY2UgZm9yIG1hbmFnZWQgdXBkYXRlIGluZm8uXHJcbiAgICAgKiBAamEg5pu05paw5oOF5aCx44GM566h55CG44GV44KM44Gf5YaF6YOoIEludGVudCDjgqTjg7Pjgr/jg7zjg5XjgqfjgqTjgrnjgq/jg6njgrlcclxuICAgICAqXHJcbiAgICAgKiBAaW50ZXJuYWxcclxuICAgICAqL1xyXG4gICAgaW50ZXJmYWNlIE1hbmFnZWRJbnRlbnQgZXh0ZW5kcyBJbnRlbnQge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBlbiBzZXQgXCJ0cnVlXCIgd2hlbiB1cGRhdGUgaW4gUGFnZSBjbGFzcy5cclxuICAgICAgICAgKiBAamEg44Oa44O844K45YaF44Gn5pu05paw44GV44KM44Gf5aC05ZCIIHRydWVcclxuICAgICAgICAgKi9cclxuICAgICAgICBfdXBkYXRlOiBib29sZWFuO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGVuIEJhc2UgY2xhc3Mgb2YgYWxsIHBhZ2UgdW5pdC5cclxuICAgICAqIEBqYSDjgZnjgbnjgabjga7jg5rjg7zjgrjjga7ln7rmnKzjgajjgarjgovml6Llrprjgq/jg6njgrlcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGNsYXNzIFBhZ2UgaW1wbGVtZW50cyBJUGFnZSB7XHJcblxyXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgICAgIC8vIGRhdGEgbWVtYmVyXHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBfb3duZXI6IElQYWdlO1xyXG4gICAgICAgIHByaXZhdGUgXyRwYWdlOiBKUXVlcnk7XHJcbiAgICAgICAgcHJpdmF0ZSBfJGhlYWRlcjogSlF1ZXJ5O1xyXG4gICAgICAgIHByaXZhdGUgXyRmb290ZXI6IEpRdWVyeTtcclxuICAgICAgICBwcml2YXRlIF9pbnRlbnQ6IE1hbmFnZWRJbnRlbnQ7XHJcbiAgICAgICAgcHJpdmF0ZSBfa2VlcEludGVudDogYm9vbGVhbjtcclxuICAgICAgICBwcml2YXRlIF9pbml0aWFsaXplZDogYm9vbGVhbjtcclxuXHJcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAgICAgLy8gcHVibGljIG1ldGhvZHNcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQHBhcmFtIF91cmxcclxuICAgICAgICAgKiAgLSBgZW5gIHBhZ2UncyBVUkxcclxuICAgICAgICAgKiAgLSBgamFgIOODmuODvOOCuCBVUkxcclxuICAgICAgICAgKiBAcGFyYW0gX2lkXHJcbiAgICAgICAgICogIC0gYGVuYCBwYWdlJ3MgSURcclxuICAgICAgICAgKiAgLSBgamFgIOODmuODvOOCuCBJRFxyXG4gICAgICAgICAqIEBwYXJhbSBvcHRpb25zXHJcbiAgICAgICAgICogIC0gYGVuYCBjb25zdHJ1Y3Rpb24gb3B0aW9uc1xyXG4gICAgICAgICAqICAtIGBqYWAg5qeL56+J44Kq44OX44K344On44OzXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgY29uc3RydWN0b3IocHJpdmF0ZSBfdXJsOiBzdHJpbmcsIHByaXZhdGUgX2lkOiBzdHJpbmcsIG9wdGlvbnM/OiBQYWdlQ29uc3RydWN0T3B0aW9ucykge1xyXG4gICAgICAgICAgICB0aGlzLnNldHVwKG9wdGlvbnMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAgICAgLy8gcHVibGljIGFjY2Vzc29yXHJcblxyXG4gICAgICAgIGdldCBhY3RpdmUoKTogYm9vbGVhbiAgICAgICAgICAgeyByZXR1cm4gISF0aGlzLl8kcGFnZSAmJiB0aGlzLl8kcGFnZS5oYXNDbGFzcyhcInVpLXBhZ2UtYWN0aXZlXCIpOyAgIH1cclxuICAgICAgICBnZXQgdXJsKCk6IHN0cmluZyAgICAgICAgICAgICAgIHsgcmV0dXJuIHRoaXMuX3VybDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgIGdldCBpZCgpOiBzdHJpbmcgICAgICAgICAgICAgICAgeyByZXR1cm4gdGhpcy5faWQ7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgZ2V0ICRwYWdlKCk6IEpRdWVyeSAgICAgICAgICAgICB7IHJldHVybiB0aGlzLl8kcGFnZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICBnZXQgJGhlYWRlcigpOiBKUXVlcnkgICAgICAgICAgIHsgcmV0dXJuIHRoaXMuXyRoZWFkZXI7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgIGdldCAkZm9vdGVyKCk6IEpRdWVyeSAgICAgICAgICAgeyByZXR1cm4gdGhpcy5fJGZvb3RlcjsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgZ2V0IGludGVudCgpOiBJbnRlbnQgICAgICAgICAgICB7IHJldHVybiB0aGlzLl9pbnRlbnQ7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICBzZXQgaW50ZW50KG5ld0ludGVudDogSW50ZW50KSAgIHsgdGhpcy5faW50ZW50ID0gPGFueT5uZXdJbnRlbnQ7IHRoaXMuX2ludGVudC5fdXBkYXRlID0gdHJ1ZTsgICAgICAgfVxyXG5cclxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgICAgICAvLyBJbXBsZW10ZW50czogSVBhZ2VcclxuXHJcbiAgICAgICAgLy8gT3JpZW50YXRpb24g44Gu5aSJ5pu044KS5Y+X5L+hXHJcbiAgICAgICAgcHVibGljIG9uT3JpZW50YXRpb25DaGFuZ2VkKG5ld09yaWVudGF0aW9uOiBPcmllbnRhdGlvbik6IHZvaWQge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fb3duZXIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX293bmVyLm9uT3JpZW50YXRpb25DaGFuZ2VkKG5ld09yaWVudGF0aW9uKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gSC9XIEJhY2sgQnV0dG9uIOODj+ODs+ODieODqVxyXG4gICAgICAgIHB1YmxpYyBvbkhhcmR3YXJlQmFja0J1dHRvbihldmVudD86IEpRdWVyeS5FdmVudCk6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fb3duZXIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9vd25lci5vbkhhcmR3YXJlQmFja0J1dHRvbihldmVudCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFJvdXRlciBcImJlZm9yZSByb3V0ZSBjaGFuZ2VcIiDjg4/jg7Pjg4njg6lcclxuICAgICAgICBwdWJsaWMgb25CZWZvcmVSb3V0ZUNoYW5nZSgpOiBJUHJvbWlzZUJhc2U8YW55PiB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9vd25lcikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX293bmVyLm9uQmVmb3JlUm91dGVDaGFuZ2UoKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8g5rGO55So44Kz44Oe44Oz44OJ44KS5Y+X5L+hXHJcbiAgICAgICAgcHVibGljIG9uQ29tbWFuZChldmVudD86IEpRdWVyeS5FdmVudCwga2luZD86IHN0cmluZyk6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fb3duZXIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9vd25lci5vbkNvbW1hbmQoZXZlbnQsIGtpbmQpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyDmnIDliJ3jga4gT25QYWdlSW5pdCgpIOOBruOBqOOBjeOBq+OBruOBv+OCs+ODvOODq+OBleOCjOOCi1xyXG4gICAgICAgIHB1YmxpYyBvbkluaXRpYWxpemUoZXZlbnQ6IEpRdWVyeS5FdmVudCk6IHZvaWQge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fb3duZXIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX293bmVyLm9uSW5pdGlhbGl6ZShldmVudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGpRTSBldmVudDogXCJwYWdlYmVmb3JlY3JlYXRlXCIg44Gr5a++5b+cXHJcbiAgICAgICAgcHVibGljIG9uUGFnZUJlZm9yZUNyZWF0ZShldmVudDogSlF1ZXJ5LkV2ZW50KTogdm9pZCB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9vd25lcikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fb3duZXIub25QYWdlQmVmb3JlQ3JlYXRlKGV2ZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8galFNIGV2ZW50OiBcInBhZ2VjcmVhdGVcIiAo5penOlwicGFnZWluaXRcIikg44Gr5a++5b+cXHJcbiAgICAgICAgcHVibGljIG9uUGFnZUluaXQoZXZlbnQ6IEpRdWVyeS5FdmVudCk6IHZvaWQge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fb3duZXIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX293bmVyLm9uUGFnZUluaXQoZXZlbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBqUU0gZXZlbnQ6IFwicGFnZWJlZm9yZXNob3dcIiDjgavlr77lv5xcclxuICAgICAgICBwdWJsaWMgb25QYWdlQmVmb3JlU2hvdyhldmVudDogSlF1ZXJ5LkV2ZW50LCBkYXRhPzogU2hvd0V2ZW50RGF0YSk6IHZvaWQge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fb3duZXIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX293bmVyLm9uUGFnZUJlZm9yZVNob3coZXZlbnQsIGRhdGEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBqUU0gZXZlbnQ6IFwicGFnZWNvbnRhaW5lcnNob3dcIiAo5penOlwicGFnZXNob3dcIikg44Gr5a++5b+cXHJcbiAgICAgICAgcHVibGljIG9uUGFnZVNob3coZXZlbnQ6IEpRdWVyeS5FdmVudCwgZGF0YT86IFNob3dFdmVudERhdGEpOiB2b2lkIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX293bmVyKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9vd25lci5vblBhZ2VTaG93KGV2ZW50LCBkYXRhKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8galFNIGV2ZW50OiBcInBhZ2ViZWZvcmVoaWRlXCIg44Gr5a++5b+cXHJcbiAgICAgICAgcHVibGljIG9uUGFnZUJlZm9yZUhpZGUoZXZlbnQ6IEpRdWVyeS5FdmVudCwgZGF0YT86IEhpZGVFdmVudERhdGEpOiB2b2lkIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX293bmVyKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9vd25lci5vblBhZ2VCZWZvcmVIaWRlKGV2ZW50LCBkYXRhKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8galFNIGV2ZW50OiBcInBhZ2Vjb250YWluZXJoaWRlXCIgKOaXpzpcInBhZ2VoaWRlXCIpIOOBq+WvvuW/nFxyXG4gICAgICAgIHB1YmxpYyBvblBhZ2VIaWRlKGV2ZW50OiBKUXVlcnkuRXZlbnQsIGRhdGE/OiBIaWRlRXZlbnREYXRhKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9vd25lcikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fb3duZXIub25QYWdlSGlkZShldmVudCwgZGF0YSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGpRTSBldmVudDogXCJwYWdlcmVtb3ZlXCIg44Gr5a++5b+cXHJcbiAgICAgICAgcHVibGljIG9uUGFnZVJlbW92ZShldmVudDogSlF1ZXJ5LkV2ZW50KTogdm9pZCB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9vd25lcikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fb3duZXIub25QYWdlUmVtb3ZlKGV2ZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAgICAgLy8gcHJpdmF0ZSBtZXRob2RzXHJcblxyXG4gICAgICAgIC8vIG1peGluIOeUqOeWkeS8vOOCs+ODs+OCueODiOODqeOCr+OCv1xyXG4gICAgICAgIHByaXZhdGUgc2V0dXAob3B0aW9uczogUGFnZUNvbnN0cnVjdE9wdGlvbnMpOiB2b2lkIHtcclxuICAgICAgICAgICAgLy8gbWl4aW4gZGVzdGluYXRpb24g55So44Gu5YaN5Yid5pyf5YyWXHJcbiAgICAgICAgICAgIHRoaXMuX2luaXRpYWxpemVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHRoaXMuX2ludGVudCA9IG51bGw7XHJcblxyXG4gICAgICAgICAgICAvLyDjgqTjg5njg7Pjg4jjg5DjgqTjg7Pjg4lcclxuICAgICAgICAgICAgY29uc3Qgc2VsZWN0b3I6IHN0cmluZyA9IFwiI1wiICsgdGhpcy5faWQ7XHJcbiAgICAgICAgICAgICQoZG9jdW1lbnQpXHJcbiAgICAgICAgICAgICAgICAub2ZmKFwicGFnZWJlZm9yZWNyZWF0ZVwiLCBzZWxlY3RvcilcclxuICAgICAgICAgICAgICAgIC5vbihcInBhZ2ViZWZvcmVjcmVhdGVcIiwgc2VsZWN0b3IsIChldmVudDogSlF1ZXJ5LkV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fJHBhZ2UgPSAkKHNlbGVjdG9yKS5maXJzdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuXyRoZWFkZXIgPSB0aGlzLl8kcGFnZS5jaGlsZHJlbihcIjpqcW1EYXRhKHJvbGU9aGVhZGVyKVwiKS5maXJzdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuXyRmb290ZXIgPSB0aGlzLl8kcGFnZS5jaGlsZHJlbihcIjpqcW1EYXRhKHJvbGU9Zm9vdGVyKVwiKS5maXJzdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuXyRwYWdlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbihcInBhZ2VjcmVhdGVcIiwgKGV2OiBKUXVlcnkuRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGFnZUluaXQoZXYpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAub24oXCJwYWdlYmVmb3Jlc2hvd1wiLCAoZXY6IEpRdWVyeS5FdmVudCwgZGF0YTogU2hvd0V2ZW50RGF0YSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYWdlQmVmb3JlU2hvdyhldiwgZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFtOb3RlXWluc3RlYWQgZnV0dXJlIHZlcnNpb24gXCJwYWdlY29udGFpbmVyc2hvd1wiLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAub24oXCJwYWdlc2hvd1wiLCAoZXY6IEpRdWVyeS5FdmVudCwgZGF0YTogU2hvd0V2ZW50RGF0YSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYWdlU2hvdyhldiwgZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbihcInBhZ2ViZWZvcmVoaWRlXCIsIChldjogSlF1ZXJ5LkV2ZW50LCBkYXRhOiBIaWRlRXZlbnREYXRhKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhZ2VCZWZvcmVIaWRlKGV2LCBkYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gW05vdGVdaW5zdGVhZCBmdXR1cmUgdmVyc2lvbiBcInBhZ2Vjb250YWluZXJoaWRlXCIuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbihcInBhZ2VoaWRlXCIsIChldjogSlF1ZXJ5LkV2ZW50LCBkYXRhOiBIaWRlRXZlbnREYXRhKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhZ2VIaWRlKGV2LCBkYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uKFwicGFnZXJlbW92ZVwiLCAoZXY6IEpRdWVyeS5FdmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYWdlUmVtb3ZlKGV2KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYWdlQmVmb3JlQ3JlYXRlKGV2ZW50KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XHJcblxyXG4gICAgICAgICAgICAvLyBvd25lciDoqK3lrppcclxuICAgICAgICAgICAgdGhpcy5fb3duZXIgPSBvcHRpb25zLm93bmVyO1xyXG4gICAgICAgICAgICAvLyBpbnRlbnQg6Kit5a6aXHJcbiAgICAgICAgICAgIHRoaXMuX2tlZXBJbnRlbnQgPSBvcHRpb25zLmtlZXBJbnRlbnQ7XHJcblxyXG4gICAgICAgICAgICAvLyBSb3V0ZXIg44G455m76YyyXHJcbiAgICAgICAgICAgIGlmIChudWxsID09IG9wdGlvbnMucm91dGUpIHtcclxuICAgICAgICAgICAgICAgIG9wdGlvbnMucm91dGUgPSB0aGlzLl9pZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBSb3V0ZXIucmVnaXN0ZXIob3B0aW9ucy5yb3V0ZSwgdGhpcy5fdXJsLCBvcHRpb25zLnRvcCwgb3B0aW9ucy5jYWxsYmFjayk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBQYWdlVHJhbnNpdGlvbkRpcmVjdGlvbiDjga7liKTlrppcclxuICAgICAgICBwcml2YXRlIGdldERpcmVjdGlvbigpOiBQYWdlVHJhbnNpdGlvbkRpcmVjdGlvbiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGFjdGl2ZUluZGV4ID0gUm91dGVyLl9nZXRKcW1IaXN0b3J5KCkuYWN0aXZlSW5kZXg7XHJcbiAgICAgICAgICAgIGNvbnN0IHByZXZJbmRleCA9IFJvdXRlci5fZ2V0SnFtSGlzdG9yeSgpLnByZXZpb3VzSW5kZXg7XHJcblxyXG4gICAgICAgICAgICBpZiAobnVsbCA9PSBhY3RpdmVJbmRleCB8fCBudWxsID09IHByZXZJbmRleCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwidW5rbm93blwiO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHByZXZJbmRleCA9PT0gYWN0aXZlSW5kZXgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBcInNhbWVcIjtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChhY3RpdmVJbmRleCA8IHByZXZJbmRleCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiYmFja1wiO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiZm9yd2FyZFwiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHBhZ2VCZWZvcmVDcmVhdGUoZXZlbnQ6IEpRdWVyeS5FdmVudCk6IHZvaWQge1xyXG4gICAgICAgICAgICB0aGlzLm9uUGFnZUJlZm9yZUNyZWF0ZShldmVudCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHBhZ2VJbml0KGV2ZW50OiBKUXVlcnkuRXZlbnQpOiB2b2lkIHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLl9pbml0aWFsaXplZCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vbkluaXRpYWxpemUoZXZlbnQpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5faW5pdGlhbGl6ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMub25QYWdlSW5pdChldmVudCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHBhZ2VCZWZvcmVTaG93KGV2ZW50OiBKUXVlcnkuRXZlbnQsIGRhdGE6IFNob3dFdmVudERhdGEpOiB2b2lkIHtcclxuICAgICAgICAgICAgRnJhbWV3b3JrLl9zZXRBY3RpdmVQYWdlKHRoaXMpO1xyXG4gICAgICAgICAgICB0aGlzLl9pbnRlbnQgPSA8TWFuYWdlZEludGVudD5Sb3V0ZXIuX3BvcEludGVudCgpO1xyXG4gICAgICAgICAgICB0aGlzLm9uUGFnZUJlZm9yZVNob3coZXZlbnQsICQuZXh0ZW5kKGRhdGEsIHsgZGlyZWN0aW9uOiB0aGlzLmdldERpcmVjdGlvbigpIH0pKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgcGFnZVNob3coZXZlbnQ6IEpRdWVyeS5FdmVudCwgZGF0YTogU2hvd0V2ZW50RGF0YSk6IHZvaWQge1xyXG4gICAgICAgICAgICB0aGlzLm9uUGFnZVNob3coZXZlbnQsICQuZXh0ZW5kKGRhdGEsIHsgZGlyZWN0aW9uOiB0aGlzLmdldERpcmVjdGlvbigpIH0pKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgcGFnZUJlZm9yZUhpZGUoZXZlbnQ6IEpRdWVyeS5FdmVudCwgZGF0YTogSGlkZUV2ZW50RGF0YSk6IHZvaWQge1xyXG4gICAgICAgICAgICB0aGlzLm9uUGFnZUJlZm9yZUhpZGUoZXZlbnQsICQuZXh0ZW5kKGRhdGEsIHsgZGlyZWN0aW9uOiB0aGlzLmdldERpcmVjdGlvbigpIH0pKTtcclxuICAgICAgICAgICAgaWYgKG51bGwgIT0gdGhpcy5faW50ZW50ICYmICh0aGlzLl9rZWVwSW50ZW50IHx8IHRoaXMuX2ludGVudC5fdXBkYXRlKSkgeyAgICAvLyBpbnRlbnQg44Gr5pu05paw44GM44GC44Gj44Gf5aC05ZCIXHJcbiAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5faW50ZW50Ll91cGRhdGU7XHJcbiAgICAgICAgICAgICAgICBSb3V0ZXIuX3B1c2hJbnRlbnQodGhpcy5faW50ZW50KTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChSb3V0ZXIuZnJvbUhhc2hDaGFuZ2VkKCkgJiYgUm91dGVyLmlzSW5TdWJGbG93KCkpIHsgICAgLy8gU3ViIEZsb3cg5YaF44GnIGJhY2sg44GV44KM44Gf5aC05ZCIXHJcbiAgICAgICAgICAgICAgICBSb3V0ZXIuX3B1c2hJbnRlbnQodGhpcy5faW50ZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLl9pbnRlbnQgPSBudWxsO1xyXG4gICAgICAgICAgICBGcmFtZXdvcmsuX3NldEFjdGl2ZVBhZ2UobnVsbCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHBhZ2VIaWRlKGV2ZW50OiBKUXVlcnkuRXZlbnQsIGRhdGE6IEhpZGVFdmVudERhdGEpOiB2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy5vblBhZ2VIaWRlKGV2ZW50LCAkLmV4dGVuZChkYXRhLCB7IGRpcmVjdGlvbjogdGhpcy5nZXREaXJlY3Rpb24oKSB9KSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHBhZ2VSZW1vdmUoZXZlbnQ6IEpRdWVyeS5FdmVudCk6IHZvaWQge1xyXG4gICAgICAgICAgICB0aGlzLm9uUGFnZVJlbW92ZShldmVudCk7XHJcbiAgICAgICAgICAgIHRoaXMuXyRwYWdlLm9mZigpO1xyXG4gICAgICAgICAgICB0aGlzLl8kcGFnZSA9IG51bGw7XHJcbiAgICAgICAgICAgIHRoaXMuXyRoZWFkZXIub2ZmKCk7XHJcbiAgICAgICAgICAgIHRoaXMuXyRoZWFkZXIgPSBudWxsO1xyXG4gICAgICAgICAgICB0aGlzLl8kZm9vdGVyLm9mZigpO1xyXG4gICAgICAgICAgICB0aGlzLl8kZm9vdGVyID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgIC8vIGNsb3N1cmUgbWV0aG9kc1xyXG5cclxuICAgIC8qXHJcbiAgICAgKiBqUU0xLjQg44Gr44Gm44CBZHVwbGljYXRlIOOBqOOBleOCjOOBpuOBhOOCiyBcInBhZ2VzaG93XCIsIFwicGFnZWhpZGVcIiDjga/jgb7jgaDmja7jgYjnva7jgY3jgIJcclxuICAgICAqIGh0dHA6Ly9qcXVlcnltb2JpbGUuY29tL3VwZ3JhZGUtZ3VpZGUvMS40LyNuYXZpZ2F0aW9uXHJcbiAgICAgKlxyXG4gICAgICog54m55a6a44Oa44O844K444Gr5a++44GX44Gm44CB44Kk44OZ44Oz44OI44KS5Y+W5b6X44Gn44GN44Gq44GE44Gf44KB44CCXHJcbiAgICAgKiBGb3J1bSDjgafjgoLorbDoq5bkuK3jgarjga7jgafjgIHmsbrnnYDjgYzjgaTjgYTjgabjgYvjgonlr77lv5zjgpLogIPmha7jgZnjgovjgIJcclxuICAgICAqIGh0dHBzOi8vZ2l0aHViLmNvbS9qcXVlcnkvanF1ZXJ5LW1vYmlsZS9pc3N1ZXMvNjg2NVxyXG4gICAgICpcclxuICAgICAqIFvlj4LogINdIOOCiOOBj+OCj+OBi+OCi+OCpOODmeODs+ODiOODgeODvOODiOOCt+ODvOODiFxyXG4gICAgICogIC0g5pys5a62KDEuNCspIGh0dHA6Ly9qcW10cmlja3Mud29yZHByZXNzLmNvbS8yMDE0LzAzLzI2L2pxdWVyeS1tb2JpbGUtcGFnZS1ldmVudHMvXHJcbiAgICAgKiAgLSDmnInlv5cofjEuMykgaHR0cDovL2Rldi5zY3Jldy1heGlzLmNvbS9kb2MvanF1ZXJ5X21vYmlsZS9yZXNvdXJjZXMvY2hlYXRzaGVldC9cclxuICAgICAqXHJcbiAgICAgKiDku6XkuIvjga/kuI3lrozlhajjgarlr77lv5zkuojlrprjgrPjg7zjg4lcclxuICAgICAqXHJcbiAgICAgKiDnibnjgavmjK/jgovoiJ7jgYTjgYzlpInjgo/jgovjga7jga/jgIFcInBhZ2VoaWRlXCIg44Gn44CB5qSc6KiO44GV44KM44Gm44GE44KL5LuV5qeY44Gn44GvXHJcbiAgICAgKiBET00g44KS54m55a6a44Gn44GN44Gq44GE44Gf44KB44CBb25QYWdlSGlkZSgpIOOCkuOCpOODs+OCueOCv+ODs+OCueOBq+S8neOBiOOCi+OBk+OBqOOBjOOBp+OBjeOBquOBhOOAglxyXG4gICAgICpcclxuICAgICAqIOS7leanmOOBjOWkieOCj+OCieOBquOBhOWgtOWQiOOBr1xyXG4gICAgICogb25QYWdlQmVmb3JlSGlkZSgpIOOBruS4reOBpyBwb3N0IOOBl+OBpiBvblBhZ2VIaWRlKCkg44KS55m66KGM44GZ44KL5LqI5a6aKOmBjuWOu+S6kuaPm+S/neiovClcclxuICAgICAqXHJcbiAgICAgKiAyMDE1LzAzLzI1IOi/veiomDpcclxuICAgICAqIOS7leanmOOBr+eiuuWumi4galFNMS42IOOCiOOCiuWJiumZpOOBleOCjOOCi+S6iOWumlxyXG4gICAgICogIGpRTTEuNCDnm7jlvZPjga7lj4LogIPlrp/oo4UgcGx1Z2luIOOBjOOBguOCiuOAgeOBk+OBruWun+ijheebuOW9k+OBruapn+iDveOCkiBjZHAuZnJhbWV3b3JrLmpxbSDjgafmirHjgYjjgovkuojlrppcclxuICAgICAqICBodHRwczovL2dpdGh1Yi5jb20vYXJzY2htaXR6L2pxdWVyeS1tb2JpbGUtb25wYWdlXHJcbiAgICAgKlxyXG4gICAgICog5YWs5byP6KaL6KejXHJcbiAgICAgKiBodHRwczovL2dpdGh1Yi5jb20vanF1ZXJ5L2pxdWVyeS1tb2JpbGUvaXNzdWVzLzcyODMjaXNzdWVjb21tZW50LTQwNzQ2NjIyXHJcbiAgICAgKi9cclxuLypcclxuICAgIC8vIGJpbmQgXCJwYWdlY29udGFpbmVyc2hvd1wiLCBhbmQgXCJwYWdlY29udGFpbmVyaGlkZVwiLlxyXG4gICAgKCgpID0+IHtcclxuICAgICAgICBsZXQgJGJvZHk6IGFueSA9ICQoXCJib2R5XCIpO1xyXG4gICAgICAgICQoZG9jdW1lbnQpXHJcbiAgICAgICAgICAgIC5vbihcInBhZ2Vjb250YWluZXJzaG93XCIsIChldmVudDogSlF1ZXJ5LkV2ZW50LCBkYXRhOiBTaG93RXZlbnREYXRhKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoMCA8IGRhdGEucHJldlBhZ2UubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gXCJwYWdlY29udGFpbmVyc2hvd1wiIOOBryBcInBhZ2Vjb250YWluZXJoaWRlXCIg44KI44KK44KC6YGF44GE44Gu44Gn44CB44KE44Gv44KKIERPTSDjgavjga/jgqLjgq/jgrvjgrnjgafjgY3jgarjgYRcclxuICAgICAgICAgICAgICAgICAgICBsZXQgJHByZXZwYWdlID0gJChcIiNcIiArIGRhdGEucHJldlBhZ2VbMF0uaWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICRwcmV2cGFnZS50cmlnZ2VyKFwiX3BhZ2VoaWRlXCIsIGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8g5Lul5LiL44Gu5a++5b+c44Gn44CBXCJwYWdlY29udGFpbmVyc2hvd1wiIOOBryBcInBhZ2VzaG93XCIg5ZCM562J44Gu5oyv44KL6Iie44GE44Gr44GZ44KL44GT44Go44GM5Y+v6IO9XHJcbiAgICAgICAgICAgICAgICBsZXQgcGFnZUlkID0gJGJvZHkucGFnZWNvbnRhaW5lcihcImdldEFjdGl2ZVBhZ2VcIikucHJvcChcImlkXCIpO1xyXG4gICAgICAgICAgICAgICAgbGV0ICRwYWdlID0gJChcIiNcIiArIHBhZ2VJZCk7XHJcbiAgICAgICAgICAgICAgICAkcGFnZS50cmlnZ2VyKFwiX3BhZ2VzaG93XCIsIGRhdGEpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAub24oXCJwYWdlY29udGFpbmVyaGlkZVwiLCAoZXZlbnQ6IEpRdWVyeS5FdmVudCwgZGF0YTogSGlkZUV2ZW50RGF0YSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgLy8gXCJwYWdlY29udGFpbmVyaGlkZVwiIOOCkuWPl+OBkeOBn+OBqOOBjeOBr+aXouOBqyBET00g44GL44KJ5raI44GI44Gm44GE44KL44Gf44KB44CBcGFnZSDjga/nibnlrprjgafjgY3jgarjgYTjgIJcclxuICAgICAgICAgICAgICAgIC8vbGV0IHBhZ2VJZCA9ICRib2R5LnBhZ2Vjb250YWluZXIoJ2dldEFjdGl2ZVBhZ2UnKS5wcm9wKFwiaWRcIik7XHJcbiAgICAgICAgICAgICAgICAvL2xldCAkcGFnZSA9ICQoXCIjXCIgKyBwYWdlSWQpO1xyXG4gICAgICAgICAgICAgICAgLy8kcGFnZS50cmlnZ2VyKFwiX3BhZ2VoaWRlXCIsIGRhdGEpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAub24oXCJwYWdlY29udGFpbmVydHJhbnNpdGlvblwiLCAoZXZlbnQ6IEpRdWVyeS5FdmVudCwgZGF0YTogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAvLyBcInBhZ2Vjb250YWluZXJ0cmFuc2l0aW9uXCIg44Gr44GvIHRvUGFnZSDjgavjgZfjgYvjgqLjgq/jgrvjgrnjga/jgafjgY3jgarjgYRcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICA7XHJcbiAgICB9KSgpO1xyXG4qL1xyXG59XHJcbiIsIi8qKiogSU1QT1JUUyBGUk9NIGltcG9ydHMtbG9hZGVyICoqKi9cbihmdW5jdGlvbigpIHtcblxuLyohXHJcbiAqIGpRdWVyeSBNaWdyYXRlIC0gdjMuMC4xLWhvdGZpeCAtIDIwMTctMDEtMTFcclxuICogQ29weXJpZ2h0IGpRdWVyeSBGb3VuZGF0aW9uIGFuZCBvdGhlciBjb250cmlidXRvcnNcclxuICovXHJcbjsgKGZ1bmN0aW9uIChmYWN0b3J5KSB7XHJcbiAgICBpZiAodHlwZW9mIGRlZmluZSA9PT0gXCJmdW5jdGlvblwiICYmIGRlZmluZS5hbWQpIHtcclxuICAgICAgICAvLyBBTUQuIFJlZ2lzdGVyIGFzIGFuIGFub255bW91cyBtb2R1bGUuXHJcbiAgICAgICAgZGVmaW5lKFtcImpxdWVyeVwiXSwgZnVuY3Rpb24gKCQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhY3RvcnkoJCwgd2luZG93KTtcclxuICAgICAgICB9KTtcclxuICAgIH0gZWxzZSBpZiAodHlwZW9mIG1vZHVsZSA9PT0gXCJvYmplY3RcIiAmJiBtb2R1bGUuZXhwb3J0cykge1xyXG4gICAgICAgIC8vIE5vZGUvQ29tbW9uSlNcclxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW5kZWZcclxuICAgICAgICBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkocmVxdWlyZShcImpxdWVyeVwiKSwgd2luZG93KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy8gQnJvd3NlciBnbG9iYWxzXHJcbiAgICAgICAgZmFjdG9yeShqUXVlcnksIHdpbmRvdyk7XHJcbiAgICB9XHJcbn0pKGZ1bmN0aW9uIChqUXVlcnksIHdpbmRvdykge1xyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4gICAgalF1ZXJ5Lm1pZ3JhdGVWZXJzaW9uID0gXCIzLjAuMS1ob3RmaXhcIjsgLy8gd2l0aCBob3RmaXhcclxuXHJcbiAgICAvKiBleHBvcnRlZCBtaWdyYXRlV2FybiwgbWlncmF0ZVdhcm5GdW5jLCBtaWdyYXRlV2FyblByb3AgKi9cclxuXHJcbiAgICAoZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAvLyBTdXBwb3J0OiBJRTkgb25seVxyXG4gICAgICAgIC8vIElFOSBvbmx5IGNyZWF0ZXMgY29uc29sZSBvYmplY3Qgd2hlbiBkZXYgdG9vbHMgYXJlIGZpcnN0IG9wZW5lZFxyXG4gICAgICAgIC8vIEFsc28sIGF2b2lkIEZ1bmN0aW9uI2JpbmQgaGVyZSB0byBzaW1wbGlmeSBQaGFudG9tSlMgdXNhZ2VcclxuICAgICAgICB2YXIgbG9nID0gd2luZG93LmNvbnNvbGUgJiYgd2luZG93LmNvbnNvbGUubG9nICYmXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHdpbmRvdy5jb25zb2xlLmxvZy5hcHBseSh3aW5kb3cuY29uc29sZSwgYXJndW1lbnRzKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgcmJhZFZlcnNpb25zID0gL15bMTJdXFwuLztcclxuXHJcbiAgICAgICAgaWYgKCFsb2cpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gTmVlZCBqUXVlcnkgMy4wLjArIGFuZCBubyBvbGRlciBNaWdyYXRlIGxvYWRlZFxyXG4gICAgICAgIGlmICghalF1ZXJ5IHx8IHJiYWRWZXJzaW9ucy50ZXN0KGpRdWVyeS5mbi5qcXVlcnkpKSB7XHJcbiAgICAgICAgICAgIGxvZyhcIkpRTUlHUkFURTogalF1ZXJ5IDMuMC4wKyBSRVFVSVJFRFwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGpRdWVyeS5taWdyYXRlV2FybmluZ3MpIHtcclxuICAgICAgICAgICAgbG9nKFwiSlFNSUdSQVRFOiBNaWdyYXRlIHBsdWdpbiBsb2FkZWQgbXVsdGlwbGUgdGltZXNcIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBTaG93IGEgbWVzc2FnZSBvbiB0aGUgY29uc29sZSBzbyBkZXZzIGtub3cgd2UncmUgYWN0aXZlXHJcbiAgICAgICAgaWYgKCFqUXVlcnkubWlncmF0ZU11dGUpIHtcclxuICAgICAgICAgICAgbG9nKFwiSlFNSUdSQVRFOiBNaWdyYXRlIGlzIGluc3RhbGxlZFwiICtcclxuICAgICAgICAgICAgICAgIChqUXVlcnkubWlncmF0ZU11dGUgPyBcIlwiIDogXCIgd2l0aCBsb2dnaW5nIGFjdGl2ZVwiKSArXHJcbiAgICAgICAgICAgICAgICBcIiwgdmVyc2lvbiBcIiArIGpRdWVyeS5taWdyYXRlVmVyc2lvbik7XHJcbiAgICAgICAgfVxyXG4gICAgfSkoKTtcclxuXHJcbiAgICB2YXIgd2FybmVkQWJvdXQgPSB7fTtcclxuXHJcbiAgICAvLyBMaXN0IG9mIHdhcm5pbmdzIGFscmVhZHkgZ2l2ZW47IHB1YmxpYyByZWFkIG9ubHlcclxuICAgIGpRdWVyeS5taWdyYXRlV2FybmluZ3MgPSBbXTtcclxuXHJcbiAgICAvLyBTZXQgdG8gZmFsc2UgdG8gZGlzYWJsZSB0cmFjZXMgdGhhdCBhcHBlYXIgd2l0aCB3YXJuaW5nc1xyXG4gICAgaWYgKGpRdWVyeS5taWdyYXRlVHJhY2UgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIGpRdWVyeS5taWdyYXRlVHJhY2UgPSB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEZvcmdldCBhbnkgd2FybmluZ3Mgd2UndmUgYWxyZWFkeSBnaXZlbjsgcHVibGljXHJcbiAgICBqUXVlcnkubWlncmF0ZVJlc2V0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHdhcm5lZEFib3V0ID0ge307XHJcbiAgICAgICAgalF1ZXJ5Lm1pZ3JhdGVXYXJuaW5ncy5sZW5ndGggPSAwO1xyXG4gICAgfTtcclxuXHJcbiAgICBmdW5jdGlvbiBtaWdyYXRlV2Fybihtc2cpIHtcclxuICAgICAgICB2YXIgY29uc29sZSA9IHdpbmRvdy5jb25zb2xlO1xyXG4gICAgICAgIGlmICghd2FybmVkQWJvdXRbbXNnXSkge1xyXG4gICAgICAgICAgICB3YXJuZWRBYm91dFttc2ddID0gdHJ1ZTtcclxuICAgICAgICAgICAgalF1ZXJ5Lm1pZ3JhdGVXYXJuaW5ncy5wdXNoKG1zZyk7XHJcbiAgICAgICAgICAgIGlmIChjb25zb2xlICYmIGNvbnNvbGUud2FybiAmJiAhalF1ZXJ5Lm1pZ3JhdGVNdXRlKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXCJKUU1JR1JBVEU6IFwiICsgbXNnKTtcclxuICAgICAgICAgICAgICAgIGlmIChqUXVlcnkubWlncmF0ZVRyYWNlICYmIGNvbnNvbGUudHJhY2UpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLnRyYWNlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gbWlncmF0ZVdhcm5Qcm9wKG9iaiwgcHJvcCwgdmFsdWUsIG1zZykge1xyXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIHByb3AsIHtcclxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxyXG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIG1pZ3JhdGVXYXJuKG1zZyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWU7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHNldDogZnVuY3Rpb24gKG5ld1ZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICBtaWdyYXRlV2Fybihtc2cpO1xyXG4gICAgICAgICAgICAgICAgdmFsdWUgPSBuZXdWYWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIG1pZ3JhdGVXYXJuRnVuYyhvYmosIHByb3AsIG5ld0Z1bmMsIG1zZykge1xyXG4gICAgICAgIG9ialtwcm9wXSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgbWlncmF0ZVdhcm4obXNnKTtcclxuICAgICAgICAgICAgcmV0dXJuIG5ld0Z1bmMuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh3aW5kb3cuZG9jdW1lbnQuY29tcGF0TW9kZSA9PT0gXCJCYWNrQ29tcGF0XCIpIHtcclxuICAgICAgICAvLyBKUXVlcnkgaGFzIG5ldmVyIHN1cHBvcnRlZCBvciB0ZXN0ZWQgUXVpcmtzIE1vZGVcclxuICAgICAgICBtaWdyYXRlV2FybihcImpRdWVyeSBpcyBub3QgY29tcGF0aWJsZSB3aXRoIFF1aXJrcyBNb2RlXCIpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICB2YXIgb2xkSW5pdCA9IGpRdWVyeS5mbi5pbml0LFxyXG4gICAgICAgIG9sZElzTnVtZXJpYyA9IGpRdWVyeS5pc051bWVyaWMsXHJcbiAgICAgICAgb2xkRmluZCA9IGpRdWVyeS5maW5kLFxyXG4gICAgICAgIHJhdHRySGFzaFRlc3QgPSAvXFxbKFxccypbLVxcd10rXFxzKikoW358XiQqXT89KVxccyooWy1cXHcjXSo/I1stXFx3I10qKVxccypcXF0vLFxyXG4gICAgICAgIHJhdHRySGFzaEdsb2IgPSAvXFxbKFxccypbLVxcd10rXFxzKikoW358XiQqXT89KVxccyooWy1cXHcjXSo/I1stXFx3I10qKVxccypcXF0vZztcclxuXHJcbiAgICBqUXVlcnkuZm4uaW5pdCA9IGZ1bmN0aW9uIChhcmcxKSB7XHJcbiAgICAgICAgdmFyIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpO1xyXG5cclxuICAgICAgICBpZiAodHlwZW9mIGFyZzEgPT09IFwic3RyaW5nXCIgJiYgYXJnMSA9PT0gXCIjXCIpIHtcclxuICAgICAgICAgICAgLy8gSlF1ZXJ5KCBcIiNcIiApIGlzIGEgYm9ndXMgSUQgc2VsZWN0b3IsIGJ1dCBpdCByZXR1cm5lZCBhbiBlbXB0eSBzZXQgYmVmb3JlIGpRdWVyeSAzLjBcclxuICAgICAgICAgICAgbWlncmF0ZVdhcm4oXCJqUXVlcnkoICcjJyApIGlzIG5vdCBhIHZhbGlkIHNlbGVjdG9yXCIpO1xyXG4gICAgICAgICAgICBhcmdzWzBdID0gW107XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gb2xkSW5pdC5hcHBseSh0aGlzLCBhcmdzKTtcclxuICAgIH07XHJcbiAgICBqUXVlcnkuZm4uaW5pdC5wcm90b3R5cGUgPSBqUXVlcnkuZm47XHJcblxyXG4gICAgalF1ZXJ5LmZpbmQgPSBmdW5jdGlvbiAoc2VsZWN0b3IpIHtcclxuICAgICAgICB2YXIgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7XHJcblxyXG4gICAgICAgIC8vIFN1cHBvcnQ6IFBoYW50b21KUyAxLnhcclxuICAgICAgICAvLyBTdHJpbmcjbWF0Y2ggZmFpbHMgdG8gbWF0Y2ggd2hlbiB1c2VkIHdpdGggYSAvL2cgUmVnRXhwLCBvbmx5IG9uIHNvbWUgc3RyaW5nc1xyXG4gICAgICAgIGlmICh0eXBlb2Ygc2VsZWN0b3IgPT09IFwic3RyaW5nXCIgJiYgcmF0dHJIYXNoVGVzdC50ZXN0KHNlbGVjdG9yKSkge1xyXG4gICAgICAgICAgICAvLyBUaGUgbm9uc3RhbmRhcmQgYW5kIHVuZG9jdW1lbnRlZCB1bnF1b3RlZC1oYXNoIHdhcyByZW1vdmVkIGluIGpRdWVyeSAxLjEyLjBcclxuICAgICAgICAgICAgLy8gRmlyc3Qgc2VlIGlmIHFTIHRoaW5rcyBpdCdzIGEgdmFsaWQgc2VsZWN0b3IsIGlmIHNvIGF2b2lkIGEgZmFsc2UgcG9zaXRpdmVcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIHdpbmRvdy5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTtcclxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyMSkge1xyXG4gICAgICAgICAgICAgICAgLy8gRGlkbid0ICpsb29rKiB2YWxpZCB0byBxU0EsIHdhcm4gYW5kIHRyeSBxdW90aW5nIHdoYXQgd2UgdGhpbmsgaXMgdGhlIHZhbHVlXHJcbiAgICAgICAgICAgICAgICBzZWxlY3RvciA9IHNlbGVjdG9yLnJlcGxhY2UocmF0dHJIYXNoR2xvYiwgZnVuY3Rpb24gKF8sIGF0dHIsIG9wLCB2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcIltcIiArIGF0dHIgKyBvcCArIFwiXFxcIlwiICsgdmFsdWUgKyBcIlxcXCJdXCI7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBJZiB0aGUgcmVnZXhwICptYXkqIGhhdmUgY3JlYXRlZCBhbiBpbnZhbGlkIHNlbGVjdG9yLCBkb24ndCB1cGRhdGUgaXRcclxuICAgICAgICAgICAgICAgIC8vIE5vdGUgdGhhdCB0aGVyZSBtYXkgYmUgZmFsc2UgYWxhcm1zIGlmIHNlbGVjdG9yIHVzZXMgalF1ZXJ5IGV4dGVuc2lvbnNcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpO1xyXG4gICAgICAgICAgICAgICAgICAgIG1pZ3JhdGVXYXJuKFwiQXR0cmlidXRlIHNlbGVjdG9yIHdpdGggJyMnIG11c3QgYmUgcXVvdGVkOiBcIiArIGFyZ3NbMF0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGFyZ3NbMF0gPSBzZWxlY3RvcjtcclxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycjIpIHtcclxuICAgICAgICAgICAgICAgICAgICBtaWdyYXRlV2FybihcIkF0dHJpYnV0ZSBzZWxlY3RvciB3aXRoICcjJyB3YXMgbm90IGZpeGVkOiBcIiArIGFyZ3NbMF0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gb2xkRmluZC5hcHBseSh0aGlzLCBhcmdzKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gQ29weSBwcm9wZXJ0aWVzIGF0dGFjaGVkIHRvIG9yaWdpbmFsIGpRdWVyeS5maW5kIG1ldGhvZCAoZS5nLiAuYXR0ciwgLmlzWE1MKVxyXG4gICAgdmFyIGZpbmRQcm9wO1xyXG4gICAgZm9yIChmaW5kUHJvcCBpbiBvbGRGaW5kKSB7XHJcbiAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvbGRGaW5kLCBmaW5kUHJvcCkpIHtcclxuICAgICAgICAgICAgalF1ZXJ5LmZpbmRbZmluZFByb3BdID0gb2xkRmluZFtmaW5kUHJvcF07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIFRoZSBudW1iZXIgb2YgZWxlbWVudHMgY29udGFpbmVkIGluIHRoZSBtYXRjaGVkIGVsZW1lbnQgc2V0XHJcbiAgICBqUXVlcnkuZm4uc2l6ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBtaWdyYXRlV2FybihcImpRdWVyeS5mbi5zaXplKCkgaXMgZGVwcmVjYXRlZCBhbmQgcmVtb3ZlZDsgdXNlIHRoZSAubGVuZ3RoIHByb3BlcnR5XCIpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmxlbmd0aDtcclxuICAgIH07XHJcblxyXG4gICAgalF1ZXJ5LnBhcnNlSlNPTiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBtaWdyYXRlV2FybihcImpRdWVyeS5wYXJzZUpTT04gaXMgZGVwcmVjYXRlZDsgdXNlIEpTT04ucGFyc2VcIik7XHJcbiAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UuYXBwbHkobnVsbCwgYXJndW1lbnRzKTtcclxuICAgIH07XHJcblxyXG4gICAgalF1ZXJ5LmlzTnVtZXJpYyA9IGZ1bmN0aW9uICh2YWwpIHtcclxuICAgICAgICAvLyBUaGUgalF1ZXJ5IDIuMi4zIGltcGxlbWVudGF0aW9uIG9mIGlzTnVtZXJpY1xyXG4gICAgICAgIGZ1bmN0aW9uIGlzTnVtZXJpYzIob2JqKSB7XHJcbiAgICAgICAgICAgIHZhciByZWFsU3RyaW5nT2JqID0gb2JqICYmIG9iai50b1N0cmluZygpO1xyXG4gICAgICAgICAgICByZXR1cm4gIWpRdWVyeS5pc0FycmF5KG9iaikgJiYgKHJlYWxTdHJpbmdPYmogLSBwYXJzZUZsb2F0KHJlYWxTdHJpbmdPYmopICsgMSkgPj0gMDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBuZXdWYWx1ZSA9IG9sZElzTnVtZXJpYyh2YWwpLFxyXG4gICAgICAgICAgICBvbGRWYWx1ZSA9IGlzTnVtZXJpYzIodmFsKTtcclxuXHJcbiAgICAgICAgaWYgKG5ld1ZhbHVlICE9PSBvbGRWYWx1ZSkge1xyXG4gICAgICAgICAgICBtaWdyYXRlV2FybihcImpRdWVyeS5pc051bWVyaWMoKSBzaG91bGQgbm90IGJlIGNhbGxlZCBvbiBjb25zdHJ1Y3RlZCBvYmplY3RzXCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIG9sZFZhbHVlO1xyXG4gICAgfTtcclxuXHJcbiAgICBtaWdyYXRlV2FybkZ1bmMoalF1ZXJ5LCBcInVuaXF1ZVwiLCBqUXVlcnkudW5pcXVlU29ydCxcclxuICAgICAgICBcImpRdWVyeS51bmlxdWUgaXMgZGVwcmVjYXRlZDsgdXNlIGpRdWVyeS51bmlxdWVTb3J0XCIpO1xyXG5cclxuICAgIC8vIE5vdyBqUXVlcnkuZXhwci5wc2V1ZG9zIGlzIHRoZSBzdGFuZGFyZCBpbmNhbnRhdGlvblxyXG4gICAgbWlncmF0ZVdhcm5Qcm9wKGpRdWVyeS5leHByLCBcImZpbHRlcnNcIiwgalF1ZXJ5LmV4cHIucHNldWRvcyxcclxuICAgICAgICBcImpRdWVyeS5leHByLmZpbHRlcnMgaXMgZGVwcmVjYXRlZDsgdXNlIGpRdWVyeS5leHByLnBzZXVkb3NcIik7XHJcbiAgICBtaWdyYXRlV2FyblByb3AoalF1ZXJ5LmV4cHIsIFwiOlwiLCBqUXVlcnkuZXhwci5wc2V1ZG9zLFxyXG4gICAgICAgIFwialF1ZXJ5LmV4cHJbJzonXSBpcyBkZXByZWNhdGVkOyB1c2UgalF1ZXJ5LmV4cHIucHNldWRvc1wiKTtcclxuXHJcblxyXG4gICAgdmFyIG9sZEFqYXggPSBqUXVlcnkuYWpheDtcclxuXHJcbiAgICBqUXVlcnkuYWpheCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgalFYSFIgPSBvbGRBamF4LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcblxyXG4gICAgICAgIC8vIEJlIHN1cmUgd2UgZ290IGEgalFYSFIgKGUuZy4sIG5vdCBzeW5jKVxyXG4gICAgICAgIGlmIChqUVhIUi5wcm9taXNlKSB7XHJcbiAgICAgICAgICAgIG1pZ3JhdGVXYXJuRnVuYyhqUVhIUiwgXCJzdWNjZXNzXCIsIGpRWEhSLmRvbmUsXHJcbiAgICAgICAgICAgICAgICBcImpRWEhSLnN1Y2Nlc3MgaXMgZGVwcmVjYXRlZCBhbmQgcmVtb3ZlZFwiKTtcclxuICAgICAgICAgICAgbWlncmF0ZVdhcm5GdW5jKGpRWEhSLCBcImVycm9yXCIsIGpRWEhSLmZhaWwsXHJcbiAgICAgICAgICAgICAgICBcImpRWEhSLmVycm9yIGlzIGRlcHJlY2F0ZWQgYW5kIHJlbW92ZWRcIik7XHJcbiAgICAgICAgICAgIG1pZ3JhdGVXYXJuRnVuYyhqUVhIUiwgXCJjb21wbGV0ZVwiLCBqUVhIUi5hbHdheXMsXHJcbiAgICAgICAgICAgICAgICBcImpRWEhSLmNvbXBsZXRlIGlzIGRlcHJlY2F0ZWQgYW5kIHJlbW92ZWRcIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4galFYSFI7XHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICB2YXIgb2xkUmVtb3ZlQXR0ciA9IGpRdWVyeS5mbi5yZW1vdmVBdHRyLFxyXG4gICAgICAgIG9sZFRvZ2dsZUNsYXNzID0galF1ZXJ5LmZuLnRvZ2dsZUNsYXNzLFxyXG4gICAgICAgIHJtYXRjaE5vblNwYWNlID0gL1xcUysvZztcclxuXHJcbiAgICBqUXVlcnkuZm4ucmVtb3ZlQXR0ciA9IGZ1bmN0aW9uIChuYW1lKSB7XHJcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG5cclxuICAgICAgICBqUXVlcnkuZWFjaChuYW1lLm1hdGNoKHJtYXRjaE5vblNwYWNlKSwgZnVuY3Rpb24gKGksIGF0dHIpIHtcclxuICAgICAgICAgICAgaWYgKGpRdWVyeS5leHByLm1hdGNoLmJvb2wudGVzdChhdHRyKSkge1xyXG4gICAgICAgICAgICAgICAgbWlncmF0ZVdhcm4oXCJqUXVlcnkuZm4ucmVtb3ZlQXR0ciBubyBsb25nZXIgc2V0cyBib29sZWFuIHByb3BlcnRpZXM6IFwiICsgYXR0cik7XHJcbiAgICAgICAgICAgICAgICBzZWxmLnByb3AoYXR0ciwgZmFsc2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiBvbGRSZW1vdmVBdHRyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcbiAgICB9O1xyXG5cclxuICAgIGpRdWVyeS5mbi50b2dnbGVDbGFzcyA9IGZ1bmN0aW9uIChzdGF0ZSkge1xyXG4gICAgICAgIC8vIE9ubHkgZGVwcmVjYXRpbmcgbm8tYXJncyBvciBzaW5nbGUgYm9vbGVhbiBhcmdcclxuICAgICAgICBpZiAoc3RhdGUgIT09IHVuZGVmaW5lZCAmJiB0eXBlb2Ygc3RhdGUgIT09IFwiYm9vbGVhblwiKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBvbGRUb2dnbGVDbGFzcy5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbWlncmF0ZVdhcm4oXCJqUXVlcnkuZm4udG9nZ2xlQ2xhc3MoIGJvb2xlYW4gKSBpcyBkZXByZWNhdGVkXCIpO1xyXG5cclxuICAgICAgICAvLyBUb2dnbGUgZW50aXJlIGNsYXNzIG5hbWUgb2YgZWFjaCBlbGVtZW50XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBjbGFzc05hbWUgPSB0aGlzLmdldEF0dHJpYnV0ZSAmJiB0aGlzLmdldEF0dHJpYnV0ZShcImNsYXNzXCIpIHx8IFwiXCI7XHJcblxyXG4gICAgICAgICAgICBpZiAoY2xhc3NOYW1lKSB7XHJcbiAgICAgICAgICAgICAgICBqUXVlcnkuZGF0YSh0aGlzLCBcIl9fY2xhc3NOYW1lX19cIiwgY2xhc3NOYW1lKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gSWYgdGhlIGVsZW1lbnQgaGFzIGEgY2xhc3MgbmFtZSBvciBpZiB3ZSdyZSBwYXNzZWQgYGZhbHNlYCxcclxuICAgICAgICAgICAgLy8gdGhlbiByZW1vdmUgdGhlIHdob2xlIGNsYXNzbmFtZSAoaWYgdGhlcmUgd2FzIG9uZSwgdGhlIGFib3ZlIHNhdmVkIGl0KS5cclxuICAgICAgICAgICAgLy8gT3RoZXJ3aXNlIGJyaW5nIGJhY2sgd2hhdGV2ZXIgd2FzIHByZXZpb3VzbHkgc2F2ZWQgKGlmIGFueXRoaW5nKSxcclxuICAgICAgICAgICAgLy8gZmFsbGluZyBiYWNrIHRvIHRoZSBlbXB0eSBzdHJpbmcgaWYgbm90aGluZyB3YXMgc3RvcmVkLlxyXG4gICAgICAgICAgICBpZiAodGhpcy5zZXRBdHRyaWJ1dGUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0QXR0cmlidXRlKFwiY2xhc3NcIixcclxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWUgfHwgc3RhdGUgPT09IGZhbHNlID9cclxuICAgICAgICAgICAgICAgICAgICBcIlwiIDpcclxuICAgICAgICAgICAgICAgICAgICBqUXVlcnkuZGF0YSh0aGlzLCBcIl9fY2xhc3NOYW1lX19cIikgfHwgXCJcIlxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcblxyXG4gICAgdmFyIGludGVybmFsU3dhcENhbGwgPSBmYWxzZTtcclxuXHJcbiAgICAvLyBJZiB0aGlzIHZlcnNpb24gb2YgalF1ZXJ5IGhhcyAuc3dhcCgpLCBkb24ndCBmYWxzZS1hbGFybSBvbiBpbnRlcm5hbCB1c2VzXHJcbiAgICBpZiAoalF1ZXJ5LnN3YXApIHtcclxuICAgICAgICBqUXVlcnkuZWFjaChbXCJoZWlnaHRcIiwgXCJ3aWR0aFwiLCBcInJlbGlhYmxlTWFyZ2luUmlnaHRcIl0sIGZ1bmN0aW9uIChfLCBuYW1lKSB7XHJcbiAgICAgICAgICAgIHZhciBvbGRIb29rID0galF1ZXJ5LmNzc0hvb2tzW25hbWVdICYmIGpRdWVyeS5jc3NIb29rc1tuYW1lXS5nZXQ7XHJcblxyXG4gICAgICAgICAgICBpZiAob2xkSG9vaykge1xyXG4gICAgICAgICAgICAgICAgalF1ZXJ5LmNzc0hvb2tzW25hbWVdLmdldCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcmV0O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpbnRlcm5hbFN3YXBDYWxsID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICByZXQgPSBvbGRIb29rLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaW50ZXJuYWxTd2FwQ2FsbCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXQ7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgalF1ZXJ5LnN3YXAgPSBmdW5jdGlvbiAoZWxlbSwgb3B0aW9ucywgY2FsbGJhY2ssIGFyZ3MpIHtcclxuICAgICAgICB2YXIgcmV0LCBuYW1lLFxyXG4gICAgICAgICAgICBvbGQgPSB7fTtcclxuXHJcbiAgICAgICAgaWYgKCFpbnRlcm5hbFN3YXBDYWxsKSB7XHJcbiAgICAgICAgICAgIG1pZ3JhdGVXYXJuKFwialF1ZXJ5LnN3YXAoKSBpcyB1bmRvY3VtZW50ZWQgYW5kIGRlcHJlY2F0ZWRcIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBSZW1lbWJlciB0aGUgb2xkIHZhbHVlcywgYW5kIGluc2VydCB0aGUgbmV3IG9uZXNcclxuICAgICAgICBmb3IgKG5hbWUgaW4gb3B0aW9ucykge1xyXG4gICAgICAgICAgICBvbGRbbmFtZV0gPSBlbGVtLnN0eWxlW25hbWVdO1xyXG4gICAgICAgICAgICBlbGVtLnN0eWxlW25hbWVdID0gb3B0aW9uc1tuYW1lXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldCA9IGNhbGxiYWNrLmFwcGx5KGVsZW0sIGFyZ3MgfHwgW10pO1xyXG5cclxuICAgICAgICAvLyBSZXZlcnQgdGhlIG9sZCB2YWx1ZXNcclxuICAgICAgICBmb3IgKG5hbWUgaW4gb3B0aW9ucykge1xyXG4gICAgICAgICAgICBlbGVtLnN0eWxlW25hbWVdID0gb2xkW25hbWVdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHJldDtcclxuICAgIH07XHJcblxyXG4gICAgdmFyIG9sZERhdGEgPSBqUXVlcnkuZGF0YTtcclxuXHJcbiAgICBqUXVlcnkuZGF0YSA9IGZ1bmN0aW9uIChlbGVtLCBuYW1lLCB2YWx1ZSkge1xyXG4gICAgICAgIHZhciBjdXJEYXRhO1xyXG5cclxuICAgICAgICAvLyBOYW1lIGNhbiBiZSBhbiBvYmplY3QsIGFuZCBlYWNoIGVudHJ5IGluIHRoZSBvYmplY3QgaXMgbWVhbnQgdG8gYmUgc2V0IGFzIGRhdGFcclxuICAgICAgICBpZiAobmFtZSAmJiB0eXBlb2YgbmFtZSA9PT0gXCJvYmplY3RcIiAmJiBhcmd1bWVudHMubGVuZ3RoID09PSAyKSB7XHJcbiAgICAgICAgICAgIGN1ckRhdGEgPSBqUXVlcnkuaGFzRGF0YShlbGVtKSAmJiBvbGREYXRhLmNhbGwodGhpcywgZWxlbSk7XHJcbiAgICAgICAgICAgIHZhciBzYW1lS2V5cyA9IHt9O1xyXG4gICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gbmFtZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGtleSAhPT0galF1ZXJ5LmNhbWVsQ2FzZShrZXkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWlncmF0ZVdhcm4oXCJqUXVlcnkuZGF0YSgpIGFsd2F5cyBzZXRzL2dldHMgY2FtZWxDYXNlZCBuYW1lczogXCIgKyBrZXkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGN1ckRhdGFba2V5XSA9IG5hbWVba2V5XTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2FtZUtleXNba2V5XSA9IG5hbWVba2V5XTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgb2xkRGF0YS5jYWxsKHRoaXMsIGVsZW0sIHNhbWVLZXlzKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBuYW1lO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gSWYgdGhlIG5hbWUgaXMgdHJhbnNmb3JtZWQsIGxvb2sgZm9yIHRoZSB1bi10cmFuc2Zvcm1lZCBuYW1lIGluIHRoZSBkYXRhIG9iamVjdFxyXG4gICAgICAgIGlmIChuYW1lICYmIHR5cGVvZiBuYW1lID09PSBcInN0cmluZ1wiICYmIG5hbWUgIT09IGpRdWVyeS5jYW1lbENhc2UobmFtZSkpIHtcclxuICAgICAgICAgICAgY3VyRGF0YSA9IGpRdWVyeS5oYXNEYXRhKGVsZW0pICYmIG9sZERhdGEuY2FsbCh0aGlzLCBlbGVtKTtcclxuICAgICAgICAgICAgaWYgKGN1ckRhdGEgJiYgbmFtZSBpbiBjdXJEYXRhKSB7XHJcbiAgICAgICAgICAgICAgICBtaWdyYXRlV2FybihcImpRdWVyeS5kYXRhKCkgYWx3YXlzIHNldHMvZ2V0cyBjYW1lbENhc2VkIG5hbWVzOiBcIiArIG5hbWUpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY3VyRGF0YVtuYW1lXSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGN1ckRhdGFbbmFtZV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBvbGREYXRhLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcbiAgICB9O1xyXG5cclxuICAgIHZhciBvbGRUd2VlblJ1biA9IGpRdWVyeS5Ud2Vlbi5wcm90b3R5cGUucnVuO1xyXG5cclxuICAgIGpRdWVyeS5Ud2Vlbi5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmIChqUXVlcnkuZWFzaW5nW3RoaXMuZWFzaW5nXS5sZW5ndGggPiAxKSB7XHJcbiAgICAgICAgICAgIG1pZ3JhdGVXYXJuKFxyXG4gICAgICAgICAgICAgICAgXCJlYXNpbmcgZnVuY3Rpb24gXCIgK1xyXG4gICAgICAgICAgICAgICAgXCJcXFwialF1ZXJ5LmVhc2luZy5cIiArIHRoaXMuZWFzaW5nLnRvU3RyaW5nKCkgK1xyXG4gICAgICAgICAgICAgICAgXCJcXFwiIHNob3VsZCB1c2Ugb25seSBmaXJzdCBhcmd1bWVudFwiXHJcbiAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICB2YXIgb2xkRWFzaW5nID0galF1ZXJ5LmVhc2luZ1t0aGlzLmVhc2luZ107XHJcbiAgICAgICAgICAgIGpRdWVyeS5lYXNpbmdbdGhpcy5lYXNpbmddID0gZnVuY3Rpb24gKHBlcmNlbnQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBvbGRFYXNpbmcuY2FsbChqUXVlcnkuZWFzaW5nLCBwZXJjZW50LCBwZXJjZW50LCAwLCAxLCAxKTtcclxuICAgICAgICAgICAgfS5iaW5kKHRoaXMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgb2xkVHdlZW5SdW4uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxuICAgIH07XHJcblxyXG4gICAgalF1ZXJ5LmZ4LmludGVydmFsID0galF1ZXJ5LmZ4LmludGVydmFsIHx8IDEzO1xyXG5cclxuICAgIC8vIFN1cHBvcnQ6IElFOSwgQW5kcm9pZCA8PTQuNFxyXG4gICAgLy8gQXZvaWQgZmFsc2UgcG9zaXRpdmVzIG9uIGJyb3dzZXJzIHRoYXQgbGFjayByQUZcclxuICAgIGlmICh3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKSB7XHJcbiAgICAgICAgbWlncmF0ZVdhcm5Qcm9wKGpRdWVyeS5meCwgXCJpbnRlcnZhbFwiLCBqUXVlcnkuZnguaW50ZXJ2YWwsXHJcbiAgICAgICAgICAgIFwialF1ZXJ5LmZ4LmludGVydmFsIGlzIGRlcHJlY2F0ZWRcIik7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIG9sZExvYWQgPSBqUXVlcnkuZm4ubG9hZCxcclxuICAgICAgICBvbGRFdmVudEFkZCA9IGpRdWVyeS5ldmVudC5hZGQsXHJcbiAgICAgICAgb3JpZ2luYWxGaXggPSBqUXVlcnkuZXZlbnQuZml4O1xyXG5cclxuICAgIGpRdWVyeS5ldmVudC5wcm9wcyA9IFtdO1xyXG4gICAgalF1ZXJ5LmV2ZW50LmZpeEhvb2tzID0ge307XHJcblxyXG4gICAgbWlncmF0ZVdhcm5Qcm9wKGpRdWVyeS5ldmVudC5wcm9wcywgXCJjb25jYXRcIiwgalF1ZXJ5LmV2ZW50LnByb3BzLmNvbmNhdCxcclxuICAgICAgICBcImpRdWVyeS5ldmVudC5wcm9wcy5jb25jYXQoKSBpcyBkZXByZWNhdGVkIGFuZCByZW1vdmVkXCIpO1xyXG5cclxuICAgIGpRdWVyeS5ldmVudC5maXggPSBmdW5jdGlvbiAob3JpZ2luYWxFdmVudCkge1xyXG4gICAgICAgIHZhciBldmVudCxcclxuICAgICAgICAgICAgdHlwZSA9IG9yaWdpbmFsRXZlbnQudHlwZSxcclxuICAgICAgICAgICAgZml4SG9vayA9IHRoaXMuZml4SG9va3NbdHlwZV0sXHJcbiAgICAgICAgICAgIHByb3BzID0galF1ZXJ5LmV2ZW50LnByb3BzO1xyXG5cclxuICAgICAgICBpZiAocHJvcHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIG1pZ3JhdGVXYXJuKFwialF1ZXJ5LmV2ZW50LnByb3BzIGFyZSBkZXByZWNhdGVkIGFuZCByZW1vdmVkOiBcIiArIHByb3BzLmpvaW4oKSk7XHJcbiAgICAgICAgICAgIHdoaWxlIChwcm9wcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIGpRdWVyeS5ldmVudC5hZGRQcm9wKHByb3BzLnBvcCgpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGZpeEhvb2sgJiYgIWZpeEhvb2suX21pZ3JhdGVkXykge1xyXG4gICAgICAgICAgICBmaXhIb29rLl9taWdyYXRlZF8gPSB0cnVlO1xyXG4gICAgICAgICAgICBtaWdyYXRlV2FybihcImpRdWVyeS5ldmVudC5maXhIb29rcyBhcmUgZGVwcmVjYXRlZCBhbmQgcmVtb3ZlZDogXCIgKyB0eXBlKTtcclxuICAgICAgICAgICAgaWYgKChwcm9wcyA9IGZpeEhvb2sucHJvcHMpICYmIHByb3BzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKHByb3BzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGpRdWVyeS5ldmVudC5hZGRQcm9wKHByb3BzLnBvcCgpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZXZlbnQgPSBvcmlnaW5hbEZpeC5jYWxsKHRoaXMsIG9yaWdpbmFsRXZlbnQpO1xyXG5cclxuICAgICAgICByZXR1cm4gZml4SG9vayAmJiBmaXhIb29rLmZpbHRlciA/IGZpeEhvb2suZmlsdGVyKGV2ZW50LCBvcmlnaW5hbEV2ZW50KSA6IGV2ZW50O1xyXG4gICAgfTtcclxuXHJcbiAgICBqUXVlcnkuZXZlbnQuYWRkID0gZnVuY3Rpb24gKGVsZW0sIHR5cGVzKSB7XHJcbiAgICAgICAgLy8gVGhpcyBtaXNzZXMgdGhlIG11bHRpcGxlLXR5cGVzIGNhc2UgYnV0IHRoYXQgc2VlbXMgYXdmdWxseSByYXJlXHJcbiAgICAgICAgaWYgKGVsZW0gPT09IHdpbmRvdyAmJiB0eXBlcyA9PT0gXCJsb2FkXCIgJiYgd2luZG93LmRvY3VtZW50LnJlYWR5U3RhdGUgPT09IFwiY29tcGxldGVcIikge1xyXG4gICAgICAgICAgICBtaWdyYXRlV2FybihcImpRdWVyeSh3aW5kb3cpLm9uKCdsb2FkJy4uLikgY2FsbGVkIGFmdGVyIGxvYWQgZXZlbnQgb2NjdXJyZWRcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBvbGRFdmVudEFkZC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG4gICAgfTtcclxuXHJcbiAgICBqUXVlcnkuZWFjaChbXCJsb2FkXCIsIFwidW5sb2FkXCIsIFwiZXJyb3JcIl0sIGZ1bmN0aW9uIChfLCBuYW1lKSB7XHJcblxyXG4gICAgICAgIGpRdWVyeS5mbltuYW1lXSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDApO1xyXG5cclxuICAgICAgICAgICAgLy8gSWYgdGhpcyBpcyBhbiBhamF4IGxvYWQoKSB0aGUgZmlyc3QgYXJnIHNob3VsZCBiZSB0aGUgc3RyaW5nIFVSTDtcclxuICAgICAgICAgICAgLy8gdGVjaG5pY2FsbHkgdGhpcyBjb3VsZCBhbHNvIGJlIHRoZSBcIkFueXRoaW5nXCIgYXJnIG9mIHRoZSBldmVudCAubG9hZCgpXHJcbiAgICAgICAgICAgIC8vIHdoaWNoIGp1c3QgZ29lcyB0byBzaG93IHdoeSB0aGlzIGR1bWIgc2lnbmF0dXJlIGhhcyBiZWVuIGRlcHJlY2F0ZWQhXHJcbiAgICAgICAgICAgIC8vIGpRdWVyeSBjdXN0b20gYnVpbGRzIHRoYXQgZXhjbHVkZSB0aGUgQWpheCBtb2R1bGUganVzdGlmaWFibHkgZGllIGhlcmUuXHJcbiAgICAgICAgICAgIGlmIChuYW1lID09PSBcImxvYWRcIiAmJiB0eXBlb2YgYXJnc1swXSA9PT0gXCJzdHJpbmdcIikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG9sZExvYWQuYXBwbHkodGhpcywgYXJncyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIG1pZ3JhdGVXYXJuKFwialF1ZXJ5LmZuLlwiICsgbmFtZSArIFwiKCkgaXMgZGVwcmVjYXRlZFwiKTtcclxuXHJcbiAgICAgICAgICAgIGFyZ3Muc3BsaWNlKDAsIDAsIG5hbWUpO1xyXG4gICAgICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMub24uYXBwbHkodGhpcywgYXJncyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIFVzZSAudHJpZ2dlckhhbmRsZXIgaGVyZSBiZWNhdXNlOlxyXG4gICAgICAgICAgICAvLyAtIGxvYWQgYW5kIHVubG9hZCBldmVudHMgZG9uJ3QgbmVlZCB0byBidWJibGUsIG9ubHkgYXBwbGllZCB0byB3aW5kb3cgb3IgaW1hZ2VcclxuICAgICAgICAgICAgLy8gLSBlcnJvciBldmVudCBzaG91bGQgbm90IGJ1YmJsZSB0byB3aW5kb3csIGFsdGhvdWdoIGl0IGRvZXMgcHJlLTEuN1xyXG4gICAgICAgICAgICAvLyBTZWUgaHR0cDovL2J1Z3MuanF1ZXJ5LmNvbS90aWNrZXQvMTE4MjBcclxuICAgICAgICAgICAgdGhpcy50cmlnZ2VySGFuZGxlci5hcHBseSh0aGlzLCBhcmdzKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBUcmlnZ2VyIFwicmVhZHlcIiBldmVudCBvbmx5IG9uY2UsIG9uIGRvY3VtZW50IHJlYWR5XHJcbiAgICBqUXVlcnkoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGpRdWVyeSh3aW5kb3cuZG9jdW1lbnQpLnRyaWdnZXJIYW5kbGVyKFwicmVhZHlcIik7XHJcbiAgICB9KTtcclxuXHJcbiAgICBqUXVlcnkuZXZlbnQuc3BlY2lhbC5yZWFkeSA9IHtcclxuICAgICAgICBzZXR1cDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAodGhpcyA9PT0gd2luZG93LmRvY3VtZW50KSB7XHJcbiAgICAgICAgICAgICAgICBtaWdyYXRlV2FybihcIidyZWFkeScgZXZlbnQgaXMgZGVwcmVjYXRlZFwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgalF1ZXJ5LmZuLmV4dGVuZCh7XHJcbiAgICAgICAgYmluZDogZnVuY3Rpb24gKHR5cGVzLCBkYXRhLCBmbikge1xyXG4gICAgICAgICAgICBtaWdyYXRlV2FybihcImpRdWVyeS5mbi5iaW5kKCkgaXMgZGVwcmVjYXRlZFwiKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMub24odHlwZXMsIG51bGwsIGRhdGEsIGZuKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHVuYmluZDogZnVuY3Rpb24gKHR5cGVzLCBmbikge1xyXG4gICAgICAgICAgICBtaWdyYXRlV2FybihcImpRdWVyeS5mbi51bmJpbmQoKSBpcyBkZXByZWNhdGVkXCIpO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5vZmYodHlwZXMsIG51bGwsIGZuKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGRlbGVnYXRlOiBmdW5jdGlvbiAoc2VsZWN0b3IsIHR5cGVzLCBkYXRhLCBmbikge1xyXG4gICAgICAgICAgICBtaWdyYXRlV2FybihcImpRdWVyeS5mbi5kZWxlZ2F0ZSgpIGlzIGRlcHJlY2F0ZWRcIik7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm9uKHR5cGVzLCBzZWxlY3RvciwgZGF0YSwgZm4pO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgdW5kZWxlZ2F0ZTogZnVuY3Rpb24gKHNlbGVjdG9yLCB0eXBlcywgZm4pIHtcclxuICAgICAgICAgICAgbWlncmF0ZVdhcm4oXCJqUXVlcnkuZm4udW5kZWxlZ2F0ZSgpIGlzIGRlcHJlY2F0ZWRcIik7XHJcbiAgICAgICAgICAgIHJldHVybiBhcmd1bWVudHMubGVuZ3RoID09PSAxID9cclxuICAgICAgICAgICAgICAgIHRoaXMub2ZmKHNlbGVjdG9yLCBcIioqXCIpIDpcclxuICAgICAgICAgICAgICAgIHRoaXMub2ZmKHR5cGVzLCBzZWxlY3RvciB8fCBcIioqXCIsIGZuKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcblxyXG4gICAgdmFyIG9sZE9mZnNldCA9IGpRdWVyeS5mbi5vZmZzZXQ7XHJcblxyXG4gICAgalF1ZXJ5LmZuLm9mZnNldCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgZG9jRWxlbSxcclxuICAgICAgICAgICAgZWxlbSA9IHRoaXNbMF0sXHJcbiAgICAgICAgICAgIG9yaWdpbiA9IHsgdG9wOiAwLCBsZWZ0OiAwIH07XHJcblxyXG4gICAgICAgIGlmICghZWxlbSB8fCAhZWxlbS5ub2RlVHlwZSkge1xyXG4gICAgICAgICAgICBtaWdyYXRlV2FybihcImpRdWVyeS5mbi5vZmZzZXQoKSByZXF1aXJlcyBhIHZhbGlkIERPTSBlbGVtZW50XCIpO1xyXG4gICAgICAgICAgICByZXR1cm4gb3JpZ2luO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZG9jRWxlbSA9IChlbGVtLm93bmVyRG9jdW1lbnQgfHwgd2luZG93LmRvY3VtZW50KS5kb2N1bWVudEVsZW1lbnQ7XHJcbiAgICAgICAgaWYgKCFqUXVlcnkuY29udGFpbnMoZG9jRWxlbSwgZWxlbSkpIHtcclxuICAgICAgICAgICAgbWlncmF0ZVdhcm4oXCJqUXVlcnkuZm4ub2Zmc2V0KCkgcmVxdWlyZXMgYW4gZWxlbWVudCBjb25uZWN0ZWQgdG8gYSBkb2N1bWVudFwiKTtcclxuICAgICAgICAgICAgcmV0dXJuIG9yaWdpbjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBvbGRPZmZzZXQuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxuICAgIH07XHJcblxyXG5cclxuICAgIHZhciBvbGRQYXJhbSA9IGpRdWVyeS5wYXJhbTtcclxuXHJcbiAgICBqUXVlcnkucGFyYW0gPSBmdW5jdGlvbiAoZGF0YSwgdHJhZGl0aW9uYWwpIHtcclxuICAgICAgICB2YXIgYWpheFRyYWRpdGlvbmFsID0galF1ZXJ5LmFqYXhTZXR0aW5ncyAmJiBqUXVlcnkuYWpheFNldHRpbmdzLnRyYWRpdGlvbmFsO1xyXG5cclxuICAgICAgICBpZiAodHJhZGl0aW9uYWwgPT09IHVuZGVmaW5lZCAmJiBhamF4VHJhZGl0aW9uYWwpIHtcclxuICAgICAgICAgICAgbWlncmF0ZVdhcm4oXCJqUXVlcnkucGFyYW0oKSBubyBsb25nZXIgdXNlcyBqUXVlcnkuYWpheFNldHRpbmdzLnRyYWRpdGlvbmFsXCIpO1xyXG4gICAgICAgICAgICB0cmFkaXRpb25hbCA9IGFqYXhUcmFkaXRpb25hbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBvbGRQYXJhbS5jYWxsKHRoaXMsIGRhdGEsIHRyYWRpdGlvbmFsKTtcclxuICAgIH07XHJcblxyXG4gICAgdmFyIG9sZFNlbGYgPSBqUXVlcnkuZm4uYW5kU2VsZiB8fCBqUXVlcnkuZm4uYWRkQmFjaztcclxuXHJcbiAgICBqUXVlcnkuZm4uYW5kU2VsZiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBtaWdyYXRlV2FybihcImpRdWVyeS5mbi5hbmRTZWxmKCkgaXMgZGVwcmVjYXRlZCBhbmQgcmVtb3ZlZCwgdXNlIGpRdWVyeS5mbi5hZGRCYWNrKClcIik7XHJcbiAgICAgICAgcmV0dXJuIG9sZFNlbGYuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxuICAgIH07XHJcblxyXG5cclxuICAgIHZhciBvbGREZWZlcnJlZCA9IGpRdWVyeS5EZWZlcnJlZCxcclxuICAgICAgICB0dXBsZXMgPSBbXHJcbiAgICAgICAgICAgIC8vIEFjdGlvbiwgYWRkIGxpc3RlbmVyLCBjYWxsYmFja3MsIC50aGVuIGhhbmRsZXJzLCBmaW5hbCBzdGF0ZVxyXG4gICAgICAgICAgICBbXCJyZXNvbHZlXCIsIFwiZG9uZVwiLCBqUXVlcnkuQ2FsbGJhY2tzKFwib25jZSBtZW1vcnlcIiksXHJcbiAgICAgICAgICAgICAgICBqUXVlcnkuQ2FsbGJhY2tzKFwib25jZSBtZW1vcnlcIiksIFwicmVzb2x2ZWRcIl0sXHJcbiAgICAgICAgICAgIFtcInJlamVjdFwiLCBcImZhaWxcIiwgalF1ZXJ5LkNhbGxiYWNrcyhcIm9uY2UgbWVtb3J5XCIpLFxyXG4gICAgICAgICAgICAgICAgalF1ZXJ5LkNhbGxiYWNrcyhcIm9uY2UgbWVtb3J5XCIpLCBcInJlamVjdGVkXCJdLFxyXG4gICAgICAgICAgICBbXCJub3RpZnlcIiwgXCJwcm9ncmVzc1wiLCBqUXVlcnkuQ2FsbGJhY2tzKFwibWVtb3J5XCIpLFxyXG4gICAgICAgICAgICAgICAgalF1ZXJ5LkNhbGxiYWNrcyhcIm1lbW9yeVwiKV1cclxuICAgICAgICBdO1xyXG5cclxuICAgIGpRdWVyeS5EZWZlcnJlZCA9IGZ1bmN0aW9uIChmdW5jKSB7XHJcbiAgICAgICAgdmFyIGRlZmVycmVkID0gb2xkRGVmZXJyZWQoKSxcclxuICAgICAgICAgICAgcHJvbWlzZSA9IGRlZmVycmVkLnByb21pc2UoKTtcclxuXHJcbiAgICAgICAgZGVmZXJyZWQucGlwZSA9IHByb21pc2UucGlwZSA9IGZ1bmN0aW9uICggLyogZm5Eb25lLCBmbkZhaWwsIGZuUHJvZ3Jlc3MgKi8pIHtcclxuICAgICAgICAgICAgdmFyIGZucyA9IGFyZ3VtZW50cztcclxuXHJcbiAgICAgICAgICAgIG1pZ3JhdGVXYXJuKFwiZGVmZXJyZWQucGlwZSgpIGlzIGRlcHJlY2F0ZWRcIik7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4galF1ZXJ5LkRlZmVycmVkKGZ1bmN0aW9uIChuZXdEZWZlcikge1xyXG4gICAgICAgICAgICAgICAgalF1ZXJ5LmVhY2godHVwbGVzLCBmdW5jdGlvbiAoaSwgdHVwbGUpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZm4gPSBqUXVlcnkuaXNGdW5jdGlvbihmbnNbaV0pICYmIGZuc1tpXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gRGVmZXJyZWQuZG9uZShmdW5jdGlvbigpIHsgYmluZCB0byBuZXdEZWZlciBvciBuZXdEZWZlci5yZXNvbHZlIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gZGVmZXJyZWQuZmFpbChmdW5jdGlvbigpIHsgYmluZCB0byBuZXdEZWZlciBvciBuZXdEZWZlci5yZWplY3QgfSlcclxuICAgICAgICAgICAgICAgICAgICAvLyBkZWZlcnJlZC5wcm9ncmVzcyhmdW5jdGlvbigpIHsgYmluZCB0byBuZXdEZWZlciBvciBuZXdEZWZlci5ub3RpZnkgfSlcclxuICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZFt0dXBsZVsxXV0oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmV0dXJuZWQgPSBmbiAmJiBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmV0dXJuZWQgJiYgalF1ZXJ5LmlzRnVuY3Rpb24ocmV0dXJuZWQucHJvbWlzZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybmVkLnByb21pc2UoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5kb25lKG5ld0RlZmVyLnJlc29sdmUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZhaWwobmV3RGVmZXIucmVqZWN0KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5wcm9ncmVzcyhuZXdEZWZlci5ub3RpZnkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3RGVmZXJbdHVwbGVbMF0gKyBcIldpdGhcIl0oXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyA9PT0gcHJvbWlzZSA/IG5ld0RlZmVyLnByb21pc2UoKSA6IHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm4gPyBbcmV0dXJuZWRdIDogYXJndW1lbnRzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGZucyA9IG51bGw7XHJcbiAgICAgICAgICAgIH0pLnByb21pc2UoKTtcclxuXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgaWYgKGZ1bmMpIHtcclxuICAgICAgICAgICAgZnVuYy5jYWxsKGRlZmVycmVkLCBkZWZlcnJlZCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZGVmZXJyZWQ7XHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICByZXR1cm4galF1ZXJ5O1xyXG59KTtcclxuXG59LmNhbGwod2luZG93KSk7IiwiLyoqKiBJTVBPUlRTIEZST00gaW1wb3J0cy1sb2FkZXIgKioqL1xuKGZ1bmN0aW9uKCkge1xuXG4vKiFcclxuKiBqUXVlcnkgTW9iaWxlIDEuNC41XHJcbiogR2l0IEhFQUQgaGFzaDogNjhlNTVlNzhiMjkyNjM0ZDM5OTFjNzk1ZjA2ZjVlMzdhNTEyZGVjYyA8PiBEYXRlOiBGcmkgT2N0IDMxIDIwMTQgMTc6MzM6MzAgVVRDXHJcbiogaHR0cDovL2pxdWVyeW1vYmlsZS5jb21cclxuKlxyXG4qIENvcHlyaWdodCAyMDEwLCAyMDE0IGpRdWVyeSBGb3VuZGF0aW9uLCBJbmMuIGFuZCBvdGhlcmNvbnRyaWJ1dG9yc1xyXG4qIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cclxuKiBodHRwOi8vanF1ZXJ5Lm9yZy9saWNlbnNlXHJcbipcclxuKi9cclxuXHJcblxyXG4oZnVuY3Rpb24gKCByb290LCBkb2MsIGZhY3RvcnkgKSB7XHJcblx0aWYgKCB0eXBlb2YgZGVmaW5lID09PSBcImZ1bmN0aW9uXCIgJiYgZGVmaW5lLmFtZCApIHtcclxuXHRcdC8vIEFNRC4gUmVnaXN0ZXIgYXMgYW4gYW5vbnltb3VzIG1vZHVsZS5cclxuXHRcdGRlZmluZSggWyBcImpxdWVyeVwiIF0sIGZ1bmN0aW9uICggJCApIHtcclxuXHRcdFx0ZmFjdG9yeSggJCwgcm9vdCwgZG9jICk7XHJcblx0XHRcdHJldHVybiAkLm1vYmlsZTtcclxuXHRcdH0pO1xyXG5cdH0gZWxzZSB7XHJcblx0XHQvLyBCcm93c2VyIGdsb2JhbHNcclxuXHRcdGZhY3RvcnkoIHJvb3QualF1ZXJ5LCByb290LCBkb2MgKTtcclxuXHR9XHJcbn0oIHRoaXMsIGRvY3VtZW50LCBmdW5jdGlvbiAoIGpRdWVyeSwgd2luZG93LCBkb2N1bWVudCwgdW5kZWZpbmVkICkge1xyXG4oZnVuY3Rpb24oICQgKSB7XHJcblx0JC5tb2JpbGUgPSB7fTtcclxufSggalF1ZXJ5ICkpO1xyXG5cclxuLyohXHJcbiAqIGpRdWVyeSBVSSBDb3JlIGMwYWI3MTA1NmI5MzY2MjdlOGE3ODIxZjAzYzA0NGFlYzYyODBhNDBcclxuICogaHR0cDovL2pxdWVyeXVpLmNvbVxyXG4gKlxyXG4gKiBDb3B5cmlnaHQgMjAxMyBqUXVlcnkgRm91bmRhdGlvbiBhbmQgb3RoZXIgY29udHJpYnV0b3JzXHJcbiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cclxuICogaHR0cDovL2pxdWVyeS5vcmcvbGljZW5zZVxyXG4gKlxyXG4gKiBodHRwOi8vYXBpLmpxdWVyeXVpLmNvbS9jYXRlZ29yeS91aS1jb3JlL1xyXG4gKi9cclxuKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7XHJcblxyXG52YXIgdXVpZCA9IDAsXHJcblx0cnVuaXF1ZUlkID0gL151aS1pZC1cXGQrJC87XHJcblxyXG4vLyAkLnVpIG1pZ2h0IGV4aXN0IGZyb20gY29tcG9uZW50cyB3aXRoIG5vIGRlcGVuZGVuY2llcywgZS5nLiwgJC51aS5wb3NpdGlvblxyXG4kLnVpID0gJC51aSB8fCB7fTtcclxuXHJcbiQuZXh0ZW5kKCAkLnVpLCB7XHJcblx0dmVyc2lvbjogXCJjMGFiNzEwNTZiOTM2NjI3ZThhNzgyMWYwM2MwNDRhZWM2MjgwYTQwXCIsXHJcblxyXG5cdGtleUNvZGU6IHtcclxuXHRcdEJBQ0tTUEFDRTogOCxcclxuXHRcdENPTU1BOiAxODgsXHJcblx0XHRERUxFVEU6IDQ2LFxyXG5cdFx0RE9XTjogNDAsXHJcblx0XHRFTkQ6IDM1LFxyXG5cdFx0RU5URVI6IDEzLFxyXG5cdFx0RVNDQVBFOiAyNyxcclxuXHRcdEhPTUU6IDM2LFxyXG5cdFx0TEVGVDogMzcsXHJcblx0XHRQQUdFX0RPV046IDM0LFxyXG5cdFx0UEFHRV9VUDogMzMsXHJcblx0XHRQRVJJT0Q6IDE5MCxcclxuXHRcdFJJR0hUOiAzOSxcclxuXHRcdFNQQUNFOiAzMixcclxuXHRcdFRBQjogOSxcclxuXHRcdFVQOiAzOFxyXG5cdH1cclxufSk7XHJcblxyXG4vLyBwbHVnaW5zXHJcbiQuZm4uZXh0ZW5kKHtcclxuXHRmb2N1czogKGZ1bmN0aW9uKCBvcmlnICkge1xyXG5cdFx0cmV0dXJuIGZ1bmN0aW9uKCBkZWxheSwgZm4gKSB7XHJcblx0XHRcdHJldHVybiB0eXBlb2YgZGVsYXkgPT09IFwibnVtYmVyXCIgP1xyXG5cdFx0XHRcdHRoaXMuZWFjaChmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdHZhciBlbGVtID0gdGhpcztcclxuXHRcdFx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHRcdCQoIGVsZW0gKS5mb2N1cygpO1xyXG5cdFx0XHRcdFx0XHRpZiAoIGZuICkge1xyXG5cdFx0XHRcdFx0XHRcdGZuLmNhbGwoIGVsZW0gKTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fSwgZGVsYXkgKTtcclxuXHRcdFx0XHR9KSA6XHJcblx0XHRcdFx0b3JpZy5hcHBseSggdGhpcywgYXJndW1lbnRzICk7XHJcblx0XHR9O1xyXG5cdH0pKCAkLmZuLmZvY3VzICksXHJcblxyXG5cdHNjcm9sbFBhcmVudDogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgc2Nyb2xsUGFyZW50O1xyXG5cdFx0aWYgKCgkLnVpLmllICYmICgvKHN0YXRpY3xyZWxhdGl2ZSkvKS50ZXN0KHRoaXMuY3NzKFwicG9zaXRpb25cIikpKSB8fCAoL2Fic29sdXRlLykudGVzdCh0aGlzLmNzcyhcInBvc2l0aW9uXCIpKSkge1xyXG5cdFx0XHRzY3JvbGxQYXJlbnQgPSB0aGlzLnBhcmVudHMoKS5maWx0ZXIoZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0cmV0dXJuICgvKHJlbGF0aXZlfGFic29sdXRlfGZpeGVkKS8pLnRlc3QoJC5jc3ModGhpcyxcInBvc2l0aW9uXCIpKSAmJiAoLyhhdXRvfHNjcm9sbCkvKS50ZXN0KCQuY3NzKHRoaXMsXCJvdmVyZmxvd1wiKSskLmNzcyh0aGlzLFwib3ZlcmZsb3cteVwiKSskLmNzcyh0aGlzLFwib3ZlcmZsb3cteFwiKSk7XHJcblx0XHRcdH0pLmVxKDApO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0c2Nyb2xsUGFyZW50ID0gdGhpcy5wYXJlbnRzKCkuZmlsdGVyKGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHJldHVybiAoLyhhdXRvfHNjcm9sbCkvKS50ZXN0KCQuY3NzKHRoaXMsXCJvdmVyZmxvd1wiKSskLmNzcyh0aGlzLFwib3ZlcmZsb3cteVwiKSskLmNzcyh0aGlzLFwib3ZlcmZsb3cteFwiKSk7XHJcblx0XHRcdH0pLmVxKDApO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiAoIC9maXhlZC8gKS50ZXN0KCB0aGlzLmNzcyggXCJwb3NpdGlvblwiKSApIHx8ICFzY3JvbGxQYXJlbnQubGVuZ3RoID8gJCggdGhpc1sgMCBdLm93bmVyRG9jdW1lbnQgfHwgZG9jdW1lbnQgKSA6IHNjcm9sbFBhcmVudDtcclxuXHR9LFxyXG5cclxuXHR1bmlxdWVJZDogZnVuY3Rpb24oKSB7XHJcblx0XHRyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRpZiAoICF0aGlzLmlkICkge1xyXG5cdFx0XHRcdHRoaXMuaWQgPSBcInVpLWlkLVwiICsgKCsrdXVpZCk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdH0sXHJcblxyXG5cdHJlbW92ZVVuaXF1ZUlkOiBmdW5jdGlvbigpIHtcclxuXHRcdHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XHJcblx0XHRcdGlmICggcnVuaXF1ZUlkLnRlc3QoIHRoaXMuaWQgKSApIHtcclxuXHRcdFx0XHQkKCB0aGlzICkucmVtb3ZlQXR0ciggXCJpZFwiICk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdH1cclxufSk7XHJcblxyXG4vLyBzZWxlY3RvcnNcclxuZnVuY3Rpb24gZm9jdXNhYmxlKCBlbGVtZW50LCBpc1RhYkluZGV4Tm90TmFOICkge1xyXG5cdHZhciBtYXAsIG1hcE5hbWUsIGltZyxcclxuXHRcdG5vZGVOYW1lID0gZWxlbWVudC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO1xyXG5cdGlmICggXCJhcmVhXCIgPT09IG5vZGVOYW1lICkge1xyXG5cdFx0bWFwID0gZWxlbWVudC5wYXJlbnROb2RlO1xyXG5cdFx0bWFwTmFtZSA9IG1hcC5uYW1lO1xyXG5cdFx0aWYgKCAhZWxlbWVudC5ocmVmIHx8ICFtYXBOYW1lIHx8IG1hcC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpICE9PSBcIm1hcFwiICkge1xyXG5cdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHR9XHJcblx0XHRpbWcgPSAkKCBcImltZ1t1c2VtYXA9I1wiICsgbWFwTmFtZSArIFwiXVwiIClbMF07XHJcblx0XHRyZXR1cm4gISFpbWcgJiYgdmlzaWJsZSggaW1nICk7XHJcblx0fVxyXG5cdHJldHVybiAoIC9pbnB1dHxzZWxlY3R8dGV4dGFyZWF8YnV0dG9ufG9iamVjdC8udGVzdCggbm9kZU5hbWUgKSA/XHJcblx0XHQhZWxlbWVudC5kaXNhYmxlZCA6XHJcblx0XHRcImFcIiA9PT0gbm9kZU5hbWUgP1xyXG5cdFx0XHRlbGVtZW50LmhyZWYgfHwgaXNUYWJJbmRleE5vdE5hTiA6XHJcblx0XHRcdGlzVGFiSW5kZXhOb3ROYU4pICYmXHJcblx0XHQvLyB0aGUgZWxlbWVudCBhbmQgYWxsIG9mIGl0cyBhbmNlc3RvcnMgbXVzdCBiZSB2aXNpYmxlXHJcblx0XHR2aXNpYmxlKCBlbGVtZW50ICk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHZpc2libGUoIGVsZW1lbnQgKSB7XHJcblx0cmV0dXJuICQuZXhwci5maWx0ZXJzLnZpc2libGUoIGVsZW1lbnQgKSAmJlxyXG5cdFx0ISQoIGVsZW1lbnQgKS5wYXJlbnRzKCkuYWRkQmFjaygpLmZpbHRlcihmdW5jdGlvbigpIHtcclxuXHRcdFx0cmV0dXJuICQuY3NzKCB0aGlzLCBcInZpc2liaWxpdHlcIiApID09PSBcImhpZGRlblwiO1xyXG5cdFx0fSkubGVuZ3RoO1xyXG59XHJcblxyXG4kLmV4dGVuZCggJC5leHByWyBcIjpcIiBdLCB7XHJcblx0ZGF0YTogJC5leHByLmNyZWF0ZVBzZXVkbyA/XHJcblx0XHQkLmV4cHIuY3JlYXRlUHNldWRvKGZ1bmN0aW9uKCBkYXRhTmFtZSApIHtcclxuXHRcdFx0cmV0dXJuIGZ1bmN0aW9uKCBlbGVtICkge1xyXG5cdFx0XHRcdHJldHVybiAhISQuZGF0YSggZWxlbSwgZGF0YU5hbWUgKTtcclxuXHRcdFx0fTtcclxuXHRcdH0pIDpcclxuXHRcdC8vIHN1cHBvcnQ6IGpRdWVyeSA8MS44XHJcblx0XHRmdW5jdGlvbiggZWxlbSwgaSwgbWF0Y2ggKSB7XHJcblx0XHRcdHJldHVybiAhISQuZGF0YSggZWxlbSwgbWF0Y2hbIDMgXSApO1xyXG5cdFx0fSxcclxuXHJcblx0Zm9jdXNhYmxlOiBmdW5jdGlvbiggZWxlbWVudCApIHtcclxuXHRcdHJldHVybiBmb2N1c2FibGUoIGVsZW1lbnQsICFpc05hTiggJC5hdHRyKCBlbGVtZW50LCBcInRhYmluZGV4XCIgKSApICk7XHJcblx0fSxcclxuXHJcblx0dGFiYmFibGU6IGZ1bmN0aW9uKCBlbGVtZW50ICkge1xyXG5cdFx0dmFyIHRhYkluZGV4ID0gJC5hdHRyKCBlbGVtZW50LCBcInRhYmluZGV4XCIgKSxcclxuXHRcdFx0aXNUYWJJbmRleE5hTiA9IGlzTmFOKCB0YWJJbmRleCApO1xyXG5cdFx0cmV0dXJuICggaXNUYWJJbmRleE5hTiB8fCB0YWJJbmRleCA+PSAwICkgJiYgZm9jdXNhYmxlKCBlbGVtZW50LCAhaXNUYWJJbmRleE5hTiApO1xyXG5cdH1cclxufSk7XHJcblxyXG4vLyBzdXBwb3J0OiBqUXVlcnkgPDEuOFxyXG5pZiAoICEkKCBcIjxhPlwiICkub3V0ZXJXaWR0aCggMSApLmpxdWVyeSApIHtcclxuXHQkLmVhY2goIFsgXCJXaWR0aFwiLCBcIkhlaWdodFwiIF0sIGZ1bmN0aW9uKCBpLCBuYW1lICkge1xyXG5cdFx0dmFyIHNpZGUgPSBuYW1lID09PSBcIldpZHRoXCIgPyBbIFwiTGVmdFwiLCBcIlJpZ2h0XCIgXSA6IFsgXCJUb3BcIiwgXCJCb3R0b21cIiBdLFxyXG5cdFx0XHR0eXBlID0gbmFtZS50b0xvd2VyQ2FzZSgpLFxyXG5cdFx0XHRvcmlnID0ge1xyXG5cdFx0XHRcdGlubmVyV2lkdGg6ICQuZm4uaW5uZXJXaWR0aCxcclxuXHRcdFx0XHRpbm5lckhlaWdodDogJC5mbi5pbm5lckhlaWdodCxcclxuXHRcdFx0XHRvdXRlcldpZHRoOiAkLmZuLm91dGVyV2lkdGgsXHJcblx0XHRcdFx0b3V0ZXJIZWlnaHQ6ICQuZm4ub3V0ZXJIZWlnaHRcclxuXHRcdFx0fTtcclxuXHJcblx0XHRmdW5jdGlvbiByZWR1Y2UoIGVsZW0sIHNpemUsIGJvcmRlciwgbWFyZ2luICkge1xyXG5cdFx0XHQkLmVhY2goIHNpZGUsIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHNpemUgLT0gcGFyc2VGbG9hdCggJC5jc3MoIGVsZW0sIFwicGFkZGluZ1wiICsgdGhpcyApICkgfHwgMDtcclxuXHRcdFx0XHRpZiAoIGJvcmRlciApIHtcclxuXHRcdFx0XHRcdHNpemUgLT0gcGFyc2VGbG9hdCggJC5jc3MoIGVsZW0sIFwiYm9yZGVyXCIgKyB0aGlzICsgXCJXaWR0aFwiICkgKSB8fCAwO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRpZiAoIG1hcmdpbiApIHtcclxuXHRcdFx0XHRcdHNpemUgLT0gcGFyc2VGbG9hdCggJC5jc3MoIGVsZW0sIFwibWFyZ2luXCIgKyB0aGlzICkgKSB8fCAwO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblx0XHRcdHJldHVybiBzaXplO1xyXG5cdFx0fVxyXG5cclxuXHRcdCQuZm5bIFwiaW5uZXJcIiArIG5hbWUgXSA9IGZ1bmN0aW9uKCBzaXplICkge1xyXG5cdFx0XHRpZiAoIHNpemUgPT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0XHRyZXR1cm4gb3JpZ1sgXCJpbm5lclwiICsgbmFtZSBdLmNhbGwoIHRoaXMgKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcclxuXHRcdFx0XHQkKCB0aGlzICkuY3NzKCB0eXBlLCByZWR1Y2UoIHRoaXMsIHNpemUgKSArIFwicHhcIiApO1xyXG5cdFx0XHR9KTtcclxuXHRcdH07XHJcblxyXG5cdFx0JC5mblsgXCJvdXRlclwiICsgbmFtZV0gPSBmdW5jdGlvbiggc2l6ZSwgbWFyZ2luICkge1xyXG5cdFx0XHRpZiAoIHR5cGVvZiBzaXplICE9PSBcIm51bWJlclwiICkge1xyXG5cdFx0XHRcdHJldHVybiBvcmlnWyBcIm91dGVyXCIgKyBuYW1lIF0uY2FsbCggdGhpcywgc2l6ZSApO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdCQoIHRoaXMpLmNzcyggdHlwZSwgcmVkdWNlKCB0aGlzLCBzaXplLCB0cnVlLCBtYXJnaW4gKSArIFwicHhcIiApO1xyXG5cdFx0XHR9KTtcclxuXHRcdH07XHJcblx0fSk7XHJcbn1cclxuXHJcbi8vIHN1cHBvcnQ6IGpRdWVyeSA8MS44XHJcbmlmICggISQuZm4uYWRkQmFjayApIHtcclxuXHQkLmZuLmFkZEJhY2sgPSBmdW5jdGlvbiggc2VsZWN0b3IgKSB7XHJcblx0XHRyZXR1cm4gdGhpcy5hZGQoIHNlbGVjdG9yID09IG51bGwgP1xyXG5cdFx0XHR0aGlzLnByZXZPYmplY3QgOiB0aGlzLnByZXZPYmplY3QuZmlsdGVyKCBzZWxlY3RvciApXHJcblx0XHQpO1xyXG5cdH07XHJcbn1cclxuXHJcbi8vIHN1cHBvcnQ6IGpRdWVyeSAxLjYuMSwgMS42LjIgKGh0dHA6Ly9idWdzLmpxdWVyeS5jb20vdGlja2V0Lzk0MTMpXHJcbmlmICggJCggXCI8YT5cIiApLmRhdGEoIFwiYS1iXCIsIFwiYVwiICkucmVtb3ZlRGF0YSggXCJhLWJcIiApLmRhdGEoIFwiYS1iXCIgKSApIHtcclxuXHQkLmZuLnJlbW92ZURhdGEgPSAoZnVuY3Rpb24oIHJlbW92ZURhdGEgKSB7XHJcblx0XHRyZXR1cm4gZnVuY3Rpb24oIGtleSApIHtcclxuXHRcdFx0aWYgKCBhcmd1bWVudHMubGVuZ3RoICkge1xyXG5cdFx0XHRcdHJldHVybiByZW1vdmVEYXRhLmNhbGwoIHRoaXMsICQuY2FtZWxDYXNlKCBrZXkgKSApO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdHJldHVybiByZW1vdmVEYXRhLmNhbGwoIHRoaXMgKTtcclxuXHRcdFx0fVxyXG5cdFx0fTtcclxuXHR9KSggJC5mbi5yZW1vdmVEYXRhICk7XHJcbn1cclxuXHJcblxyXG5cclxuXHJcblxyXG4vLyBkZXByZWNhdGVkXHJcbiQudWkuaWUgPSAhIS9tc2llIFtcXHcuXSsvLmV4ZWMoIG5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKSApO1xyXG5cclxuJC5zdXBwb3J0LnNlbGVjdHN0YXJ0ID0gXCJvbnNlbGVjdHN0YXJ0XCIgaW4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJkaXZcIiApO1xyXG4kLmZuLmV4dGVuZCh7XHJcblx0ZGlzYWJsZVNlbGVjdGlvbjogZnVuY3Rpb24oKSB7XHJcblx0XHRyZXR1cm4gdGhpcy5iaW5kKCAoICQuc3VwcG9ydC5zZWxlY3RzdGFydCA/IFwic2VsZWN0c3RhcnRcIiA6IFwibW91c2Vkb3duXCIgKSArXHJcblx0XHRcdFwiLnVpLWRpc2FibGVTZWxlY3Rpb25cIiwgZnVuY3Rpb24oIGV2ZW50ICkge1xyXG5cdFx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdH0pO1xyXG5cdH0sXHJcblxyXG5cdGVuYWJsZVNlbGVjdGlvbjogZnVuY3Rpb24oKSB7XHJcblx0XHRyZXR1cm4gdGhpcy51bmJpbmQoIFwiLnVpLWRpc2FibGVTZWxlY3Rpb25cIiApO1xyXG5cdH0sXHJcblxyXG5cdHpJbmRleDogZnVuY3Rpb24oIHpJbmRleCApIHtcclxuXHRcdGlmICggekluZGV4ICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdHJldHVybiB0aGlzLmNzcyggXCJ6SW5kZXhcIiwgekluZGV4ICk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCB0aGlzLmxlbmd0aCApIHtcclxuXHRcdFx0dmFyIGVsZW0gPSAkKCB0aGlzWyAwIF0gKSwgcG9zaXRpb24sIHZhbHVlO1xyXG5cdFx0XHR3aGlsZSAoIGVsZW0ubGVuZ3RoICYmIGVsZW1bIDAgXSAhPT0gZG9jdW1lbnQgKSB7XHJcblx0XHRcdFx0Ly8gSWdub3JlIHotaW5kZXggaWYgcG9zaXRpb24gaXMgc2V0IHRvIGEgdmFsdWUgd2hlcmUgei1pbmRleCBpcyBpZ25vcmVkIGJ5IHRoZSBicm93c2VyXHJcblx0XHRcdFx0Ly8gVGhpcyBtYWtlcyBiZWhhdmlvciBvZiB0aGlzIGZ1bmN0aW9uIGNvbnNpc3RlbnQgYWNyb3NzIGJyb3dzZXJzXHJcblx0XHRcdFx0Ly8gV2ViS2l0IGFsd2F5cyByZXR1cm5zIGF1dG8gaWYgdGhlIGVsZW1lbnQgaXMgcG9zaXRpb25lZFxyXG5cdFx0XHRcdHBvc2l0aW9uID0gZWxlbS5jc3MoIFwicG9zaXRpb25cIiApO1xyXG5cdFx0XHRcdGlmICggcG9zaXRpb24gPT09IFwiYWJzb2x1dGVcIiB8fCBwb3NpdGlvbiA9PT0gXCJyZWxhdGl2ZVwiIHx8IHBvc2l0aW9uID09PSBcImZpeGVkXCIgKSB7XHJcblx0XHRcdFx0XHQvLyBJRSByZXR1cm5zIDAgd2hlbiB6SW5kZXggaXMgbm90IHNwZWNpZmllZFxyXG5cdFx0XHRcdFx0Ly8gb3RoZXIgYnJvd3NlcnMgcmV0dXJuIGEgc3RyaW5nXHJcblx0XHRcdFx0XHQvLyB3ZSBpZ25vcmUgdGhlIGNhc2Ugb2YgbmVzdGVkIGVsZW1lbnRzIHdpdGggYW4gZXhwbGljaXQgdmFsdWUgb2YgMFxyXG5cdFx0XHRcdFx0Ly8gPGRpdiBzdHlsZT1cInotaW5kZXg6IC0xMDtcIj48ZGl2IHN0eWxlPVwiei1pbmRleDogMDtcIj48L2Rpdj48L2Rpdj5cclxuXHRcdFx0XHRcdHZhbHVlID0gcGFyc2VJbnQoIGVsZW0uY3NzKCBcInpJbmRleFwiICksIDEwICk7XHJcblx0XHRcdFx0XHRpZiAoICFpc05hTiggdmFsdWUgKSAmJiB2YWx1ZSAhPT0gMCApIHtcclxuXHRcdFx0XHRcdFx0cmV0dXJuIHZhbHVlO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRlbGVtID0gZWxlbS5wYXJlbnQoKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiAwO1xyXG5cdH1cclxufSk7XHJcblxyXG4vLyAkLnVpLnBsdWdpbiBpcyBkZXByZWNhdGVkLiBVc2UgJC53aWRnZXQoKSBleHRlbnNpb25zIGluc3RlYWQuXHJcbiQudWkucGx1Z2luID0ge1xyXG5cdGFkZDogZnVuY3Rpb24oIG1vZHVsZSwgb3B0aW9uLCBzZXQgKSB7XHJcblx0XHR2YXIgaSxcclxuXHRcdFx0cHJvdG8gPSAkLnVpWyBtb2R1bGUgXS5wcm90b3R5cGU7XHJcblx0XHRmb3IgKCBpIGluIHNldCApIHtcclxuXHRcdFx0cHJvdG8ucGx1Z2luc1sgaSBdID0gcHJvdG8ucGx1Z2luc1sgaSBdIHx8IFtdO1xyXG5cdFx0XHRwcm90by5wbHVnaW5zWyBpIF0ucHVzaCggWyBvcHRpb24sIHNldFsgaSBdIF0gKTtcclxuXHRcdH1cclxuXHR9LFxyXG5cdGNhbGw6IGZ1bmN0aW9uKCBpbnN0YW5jZSwgbmFtZSwgYXJncywgYWxsb3dEaXNjb25uZWN0ZWQgKSB7XHJcblx0XHR2YXIgaSxcclxuXHRcdFx0c2V0ID0gaW5zdGFuY2UucGx1Z2luc1sgbmFtZSBdO1xyXG5cclxuXHRcdGlmICggIXNldCApIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggIWFsbG93RGlzY29ubmVjdGVkICYmICggIWluc3RhbmNlLmVsZW1lbnRbIDAgXS5wYXJlbnROb2RlIHx8IGluc3RhbmNlLmVsZW1lbnRbIDAgXS5wYXJlbnROb2RlLm5vZGVUeXBlID09PSAxMSApICkge1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0Zm9yICggaSA9IDA7IGkgPCBzZXQubGVuZ3RoOyBpKysgKSB7XHJcblx0XHRcdGlmICggaW5zdGFuY2Uub3B0aW9uc1sgc2V0WyBpIF1bIDAgXSBdICkge1xyXG5cdFx0XHRcdHNldFsgaSBdWyAxIF0uYXBwbHkoIGluc3RhbmNlLmVsZW1lbnQsIGFyZ3MgKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxufTtcclxuXHJcbn0pKCBqUXVlcnkgKTtcclxuXHJcbihmdW5jdGlvbiggJCwgd2luZG93LCB1bmRlZmluZWQgKSB7XHJcblxyXG5cdC8vIFN1YnRyYWN0IHRoZSBoZWlnaHQgb2YgZXh0ZXJuYWwgdG9vbGJhcnMgZnJvbSB0aGUgcGFnZSBoZWlnaHQsIGlmIHRoZSBwYWdlIGRvZXMgbm90IGhhdmVcclxuXHQvLyBpbnRlcm5hbCB0b29sYmFycyBvZiB0aGUgc2FtZSB0eXBlLiBXZSB0YWtlIGNhcmUgdG8gdXNlIHRoZSB3aWRnZXQgb3B0aW9ucyBpZiB3ZSBmaW5kIGFcclxuXHQvLyB3aWRnZXQgaW5zdGFuY2UgYW5kIHRoZSBlbGVtZW50J3MgZGF0YS1hdHRyaWJ1dGVzIG90aGVyd2lzZS5cclxuXHR2YXIgY29tcGVuc2F0ZVRvb2xiYXJzID0gZnVuY3Rpb24oIHBhZ2UsIGRlc2lyZWRIZWlnaHQgKSB7XHJcblx0XHR2YXIgcGFnZVBhcmVudCA9IHBhZ2UucGFyZW50KCksXHJcblx0XHRcdHRvb2xiYXJzQWZmZWN0aW5nSGVpZ2h0ID0gW10sXHJcblxyXG5cdFx0XHQvLyBXZSB1c2UgdGhpcyBmdW5jdGlvbiB0byBmaWx0ZXIgZml4ZWQgdG9vbGJhcnMgd2l0aCBvcHRpb24gdXBkYXRlUGFnZVBhZGRpbmcgc2V0IHRvXHJcblx0XHRcdC8vIHRydWUgKHdoaWNoIGlzIHRoZSBkZWZhdWx0KSBmcm9tIG91ciBoZWlnaHQgc3VidHJhY3Rpb24sIGJlY2F1c2UgZml4ZWQgdG9vbGJhcnMgd2l0aFxyXG5cdFx0XHQvLyBvcHRpb24gdXBkYXRlUGFnZVBhZGRpbmcgc2V0IHRvIHRydWUgY29tcGVuc2F0ZSBmb3IgdGhlaXIgcHJlc2VuY2UgYnkgYWRkaW5nIHBhZGRpbmdcclxuXHRcdFx0Ly8gdG8gdGhlIGFjdGl2ZSBwYWdlLiBXZSB3YW50IHRvIGF2b2lkIGRvdWJsZS1jb3VudGluZyBieSBhbHNvIHN1YnRyYWN0aW5nIHRoZWlyXHJcblx0XHRcdC8vIGhlaWdodCBmcm9tIHRoZSBkZXNpcmVkIHBhZ2UgaGVpZ2h0LlxyXG5cdFx0XHRub1BhZGRlcnMgPSBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHR2YXIgdGhlRWxlbWVudCA9ICQoIHRoaXMgKSxcclxuXHRcdFx0XHRcdHdpZGdldE9wdGlvbnMgPSAkLm1vYmlsZS50b29sYmFyICYmIHRoZUVsZW1lbnQuZGF0YSggXCJtb2JpbGUtdG9vbGJhclwiICkgP1xyXG5cdFx0XHRcdFx0XHR0aGVFbGVtZW50LnRvb2xiYXIoIFwib3B0aW9uXCIgKSA6IHtcclxuXHRcdFx0XHRcdFx0XHRwb3NpdGlvbjogdGhlRWxlbWVudC5hdHRyKCBcImRhdGEtXCIgKyAkLm1vYmlsZS5ucyArIFwicG9zaXRpb25cIiApLFxyXG5cdFx0XHRcdFx0XHRcdHVwZGF0ZVBhZ2VQYWRkaW5nOiAoIHRoZUVsZW1lbnQuYXR0ciggXCJkYXRhLVwiICsgJC5tb2JpbGUubnMgK1xyXG5cdFx0XHRcdFx0XHRcdFx0XCJ1cGRhdGUtcGFnZS1wYWRkaW5nXCIgKSAhPT0gZmFsc2UgKVxyXG5cdFx0XHRcdFx0XHR9O1xyXG5cclxuXHRcdFx0XHRyZXR1cm4gISggd2lkZ2V0T3B0aW9ucy5wb3NpdGlvbiA9PT0gXCJmaXhlZFwiICYmXHJcblx0XHRcdFx0XHR3aWRnZXRPcHRpb25zLnVwZGF0ZVBhZ2VQYWRkaW5nID09PSB0cnVlICk7XHJcblx0XHRcdH0sXHJcblx0XHRcdGV4dGVybmFsSGVhZGVycyA9IHBhZ2VQYXJlbnQuY2hpbGRyZW4oIFwiOmpxbURhdGEocm9sZT0naGVhZGVyJylcIiApLmZpbHRlciggbm9QYWRkZXJzICksXHJcblx0XHRcdGludGVybmFsSGVhZGVycyA9IHBhZ2UuY2hpbGRyZW4oIFwiOmpxbURhdGEocm9sZT0naGVhZGVyJylcIiApLFxyXG5cdFx0XHRleHRlcm5hbEZvb3RlcnMgPSBwYWdlUGFyZW50LmNoaWxkcmVuKCBcIjpqcW1EYXRhKHJvbGU9J2Zvb3RlcicpXCIgKS5maWx0ZXIoIG5vUGFkZGVycyApLFxyXG5cdFx0XHRpbnRlcm5hbEZvb3RlcnMgPSBwYWdlLmNoaWxkcmVuKCBcIjpqcW1EYXRhKHJvbGU9J2Zvb3RlcicpXCIgKTtcclxuXHJcblx0XHQvLyBJZiB3ZSBoYXZlIG5vIGludGVybmFsIGhlYWRlcnMsIGJ1dCB3ZSBkbyBoYXZlIGV4dGVybmFsIGhlYWRlcnMsIHRoZW4gdGhlaXIgaGVpZ2h0XHJcblx0XHQvLyByZWR1Y2VzIHRoZSBwYWdlIGhlaWdodFxyXG5cdFx0aWYgKCBpbnRlcm5hbEhlYWRlcnMubGVuZ3RoID09PSAwICYmIGV4dGVybmFsSGVhZGVycy5sZW5ndGggPiAwICkge1xyXG5cdFx0XHR0b29sYmFyc0FmZmVjdGluZ0hlaWdodCA9IHRvb2xiYXJzQWZmZWN0aW5nSGVpZ2h0LmNvbmNhdCggZXh0ZXJuYWxIZWFkZXJzLnRvQXJyYXkoKSApO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIElmIHdlIGhhdmUgbm8gaW50ZXJuYWwgZm9vdGVycywgYnV0IHdlIGRvIGhhdmUgZXh0ZXJuYWwgZm9vdGVycywgdGhlbiB0aGVpciBoZWlnaHRcclxuXHRcdC8vIHJlZHVjZXMgdGhlIHBhZ2UgaGVpZ2h0XHJcblx0XHRpZiAoIGludGVybmFsRm9vdGVycy5sZW5ndGggPT09IDAgJiYgZXh0ZXJuYWxGb290ZXJzLmxlbmd0aCA+IDAgKSB7XHJcblx0XHRcdHRvb2xiYXJzQWZmZWN0aW5nSGVpZ2h0ID0gdG9vbGJhcnNBZmZlY3RpbmdIZWlnaHQuY29uY2F0KCBleHRlcm5hbEZvb3RlcnMudG9BcnJheSgpICk7XHJcblx0XHR9XHJcblxyXG5cdFx0JC5lYWNoKCB0b29sYmFyc0FmZmVjdGluZ0hlaWdodCwgZnVuY3Rpb24oIGluZGV4LCB2YWx1ZSApIHtcclxuXHRcdFx0ZGVzaXJlZEhlaWdodCAtPSAkKCB2YWx1ZSApLm91dGVySGVpZ2h0KCk7XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBIZWlnaHQgbXVzdCBiZSBhdCBsZWFzdCB6ZXJvXHJcblx0XHRyZXR1cm4gTWF0aC5tYXgoIDAsIGRlc2lyZWRIZWlnaHQgKTtcclxuXHR9O1xyXG5cclxuXHQkLmV4dGVuZCggJC5tb2JpbGUsIHtcclxuXHRcdC8vIGRlZmluZSB0aGUgd2luZG93IGFuZCB0aGUgZG9jdW1lbnQgb2JqZWN0c1xyXG5cdFx0d2luZG93OiAkKCB3aW5kb3cgKSxcclxuXHRcdGRvY3VtZW50OiAkKCBkb2N1bWVudCApLFxyXG5cclxuXHRcdC8vIFRPRE86IFJlbW92ZSBhbmQgdXNlICQudWkua2V5Q29kZSBkaXJlY3RseVxyXG5cdFx0a2V5Q29kZTogJC51aS5rZXlDb2RlLFxyXG5cclxuXHRcdC8vIFBsYWNlIHRvIHN0b3JlIHZhcmlvdXMgd2lkZ2V0IGV4dGVuc2lvbnNcclxuXHRcdGJlaGF2aW9yczoge30sXHJcblxyXG5cdFx0Ly8gU2Nyb2xsIHBhZ2UgdmVydGljYWxseTogc2Nyb2xsIHRvIDAgdG8gaGlkZSBpT1MgYWRkcmVzcyBiYXIsIG9yIHBhc3MgYSBZIHZhbHVlXHJcblx0XHRzaWxlbnRTY3JvbGw6IGZ1bmN0aW9uKCB5cG9zICkge1xyXG5cdFx0XHRpZiAoICQudHlwZSggeXBvcyApICE9PSBcIm51bWJlclwiICkge1xyXG5cdFx0XHRcdHlwb3MgPSAkLm1vYmlsZS5kZWZhdWx0SG9tZVNjcm9sbDtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gcHJldmVudCBzY3JvbGxzdGFydCBhbmQgc2Nyb2xsc3RvcCBldmVudHNcclxuXHRcdFx0JC5ldmVudC5zcGVjaWFsLnNjcm9sbHN0YXJ0LmVuYWJsZWQgPSBmYWxzZTtcclxuXHJcblx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0d2luZG93LnNjcm9sbFRvKCAwLCB5cG9zICk7XHJcblx0XHRcdFx0JC5tb2JpbGUuZG9jdW1lbnQudHJpZ2dlciggXCJzaWxlbnRzY3JvbGxcIiwgeyB4OiAwLCB5OiB5cG9zIH0pO1xyXG5cdFx0XHR9LCAyMCApO1xyXG5cclxuXHRcdFx0c2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuXHRcdFx0XHQkLmV2ZW50LnNwZWNpYWwuc2Nyb2xsc3RhcnQuZW5hYmxlZCA9IHRydWU7XHJcblx0XHRcdH0sIDE1MCApO1xyXG5cdFx0fSxcclxuXHJcblx0XHRnZXRDbG9zZXN0QmFzZVVybDogZnVuY3Rpb24oIGVsZSApXHR7XHJcblx0XHRcdC8vIEZpbmQgdGhlIGNsb3Nlc3QgcGFnZSBhbmQgZXh0cmFjdCBvdXQgaXRzIHVybC5cclxuXHRcdFx0dmFyIHVybCA9ICQoIGVsZSApLmNsb3Nlc3QoIFwiLnVpLXBhZ2VcIiApLmpxbURhdGEoIFwidXJsXCIgKSxcclxuXHRcdFx0XHRiYXNlID0gJC5tb2JpbGUucGF0aC5kb2N1bWVudEJhc2UuaHJlZk5vSGFzaDtcclxuXHJcblx0XHRcdGlmICggISQubW9iaWxlLmR5bmFtaWNCYXNlRW5hYmxlZCB8fCAhdXJsIHx8ICEkLm1vYmlsZS5wYXRoLmlzUGF0aCggdXJsICkgKSB7XHJcblx0XHRcdFx0dXJsID0gYmFzZTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0cmV0dXJuICQubW9iaWxlLnBhdGgubWFrZVVybEFic29sdXRlKCB1cmwsIGJhc2UgKTtcclxuXHRcdH0sXHJcblx0XHRyZW1vdmVBY3RpdmVMaW5rQ2xhc3M6IGZ1bmN0aW9uKCBmb3JjZVJlbW92YWwgKSB7XHJcblx0XHRcdGlmICggISEkLm1vYmlsZS5hY3RpdmVDbGlja2VkTGluayAmJlxyXG5cdFx0XHRcdCggISQubW9iaWxlLmFjdGl2ZUNsaWNrZWRMaW5rLmNsb3Nlc3QoIFwiLlwiICsgJC5tb2JpbGUuYWN0aXZlUGFnZUNsYXNzICkubGVuZ3RoIHx8XHJcblx0XHRcdFx0XHRmb3JjZVJlbW92YWwgKSApIHtcclxuXHJcblx0XHRcdFx0JC5tb2JpbGUuYWN0aXZlQ2xpY2tlZExpbmsucmVtb3ZlQ2xhc3MoICQubW9iaWxlLmFjdGl2ZUJ0bkNsYXNzICk7XHJcblx0XHRcdH1cclxuXHRcdFx0JC5tb2JpbGUuYWN0aXZlQ2xpY2tlZExpbmsgPSBudWxsO1xyXG5cdFx0fSxcclxuXHJcblx0XHQvLyBERVBSRUNBVEVEIGluIDEuNFxyXG5cdFx0Ly8gRmluZCB0aGUgY2xvc2VzdCBwYXJlbnQgd2l0aCBhIHRoZW1lIGNsYXNzIG9uIGl0LiBOb3RlIHRoYXRcclxuXHRcdC8vIHdlIGFyZSBub3QgdXNpbmcgJC5mbi5jbG9zZXN0KCkgb24gcHVycG9zZSBoZXJlIGJlY2F1c2UgdGhpc1xyXG5cdFx0Ly8gbWV0aG9kIGdldHMgY2FsbGVkIHF1aXRlIGEgYml0IGFuZCB3ZSBuZWVkIGl0IHRvIGJlIGFzIGZhc3RcclxuXHRcdC8vIGFzIHBvc3NpYmxlLlxyXG5cdFx0Z2V0SW5oZXJpdGVkVGhlbWU6IGZ1bmN0aW9uKCBlbCwgZGVmYXVsdFRoZW1lICkge1xyXG5cdFx0XHR2YXIgZSA9IGVsWyAwIF0sXHJcblx0XHRcdFx0bHRyID0gXCJcIixcclxuXHRcdFx0XHRyZSA9IC91aS0oYmFyfGJvZHl8b3ZlcmxheSktKFthLXpdKVxcYi8sXHJcblx0XHRcdFx0YywgbTtcclxuXHRcdFx0d2hpbGUgKCBlICkge1xyXG5cdFx0XHRcdGMgPSBlLmNsYXNzTmFtZSB8fCBcIlwiO1xyXG5cdFx0XHRcdGlmICggYyAmJiAoIG0gPSByZS5leGVjKCBjICkgKSAmJiAoIGx0ciA9IG1bIDIgXSApICkge1xyXG5cdFx0XHRcdFx0Ly8gV2UgZm91bmQgYSBwYXJlbnQgd2l0aCBhIHRoZW1lIGNsYXNzXHJcblx0XHRcdFx0XHQvLyBvbiBpdCBzbyBiYWlsIGZyb20gdGhpcyBsb29wLlxyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRlID0gZS5wYXJlbnROb2RlO1xyXG5cdFx0XHR9XHJcblx0XHRcdC8vIFJldHVybiB0aGUgdGhlbWUgbGV0dGVyIHdlIGZvdW5kLCBpZiBub25lLCByZXR1cm4gdGhlXHJcblx0XHRcdC8vIHNwZWNpZmllZCBkZWZhdWx0LlxyXG5cdFx0XHRyZXR1cm4gbHRyIHx8IGRlZmF1bHRUaGVtZSB8fCBcImFcIjtcclxuXHRcdH0sXHJcblxyXG5cdFx0ZW5oYW5jZWFibGU6IGZ1bmN0aW9uKCBlbGVtZW50cyApIHtcclxuXHRcdFx0cmV0dXJuIHRoaXMuaGF2ZVBhcmVudHMoIGVsZW1lbnRzLCBcImVuaGFuY2VcIiApO1xyXG5cdFx0fSxcclxuXHJcblx0XHRoaWphY2thYmxlOiBmdW5jdGlvbiggZWxlbWVudHMgKSB7XHJcblx0XHRcdHJldHVybiB0aGlzLmhhdmVQYXJlbnRzKCBlbGVtZW50cywgXCJhamF4XCIgKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0aGF2ZVBhcmVudHM6IGZ1bmN0aW9uKCBlbGVtZW50cywgYXR0ciApIHtcclxuXHRcdFx0aWYgKCAhJC5tb2JpbGUuaWdub3JlQ29udGVudEVuYWJsZWQgKSB7XHJcblx0XHRcdFx0cmV0dXJuIGVsZW1lbnRzO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHR2YXIgY291bnQgPSBlbGVtZW50cy5sZW5ndGgsXHJcblx0XHRcdFx0JG5ld1NldCA9ICQoKSxcclxuXHRcdFx0XHRlLCAkZWxlbWVudCwgZXhjbHVkZWQsXHJcblx0XHRcdFx0aSwgYztcclxuXHJcblx0XHRcdGZvciAoIGkgPSAwOyBpIDwgY291bnQ7IGkrKyApIHtcclxuXHRcdFx0XHQkZWxlbWVudCA9IGVsZW1lbnRzLmVxKCBpICk7XHJcblx0XHRcdFx0ZXhjbHVkZWQgPSBmYWxzZTtcclxuXHRcdFx0XHRlID0gZWxlbWVudHNbIGkgXTtcclxuXHJcblx0XHRcdFx0d2hpbGUgKCBlICkge1xyXG5cdFx0XHRcdFx0YyA9IGUuZ2V0QXR0cmlidXRlID8gZS5nZXRBdHRyaWJ1dGUoIFwiZGF0YS1cIiArICQubW9iaWxlLm5zICsgYXR0ciApIDogXCJcIjtcclxuXHJcblx0XHRcdFx0XHRpZiAoIGMgPT09IFwiZmFsc2VcIiApIHtcclxuXHRcdFx0XHRcdFx0ZXhjbHVkZWQgPSB0cnVlO1xyXG5cdFx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHRlID0gZS5wYXJlbnROb2RlO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0aWYgKCAhZXhjbHVkZWQgKSB7XHJcblx0XHRcdFx0XHQkbmV3U2V0ID0gJG5ld1NldC5hZGQoICRlbGVtZW50ICk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRyZXR1cm4gJG5ld1NldDtcclxuXHRcdH0sXHJcblxyXG5cdFx0Z2V0U2NyZWVuSGVpZ2h0OiBmdW5jdGlvbigpIHtcclxuXHRcdFx0Ly8gTmF0aXZlIGlubmVySGVpZ2h0IHJldHVybnMgbW9yZSBhY2N1cmF0ZSB2YWx1ZSBmb3IgdGhpcyBhY3Jvc3MgcGxhdGZvcm1zLFxyXG5cdFx0XHQvLyBqUXVlcnkgdmVyc2lvbiBpcyBoZXJlIGFzIGEgbm9ybWFsaXplZCBmYWxsYmFjayBmb3IgcGxhdGZvcm1zIGxpa2UgU3ltYmlhblxyXG5cdFx0XHRyZXR1cm4gd2luZG93LmlubmVySGVpZ2h0IHx8ICQubW9iaWxlLndpbmRvdy5oZWlnaHQoKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0Ly9zaW1wbHkgc2V0IHRoZSBhY3RpdmUgcGFnZSdzIG1pbmltdW0gaGVpZ2h0IHRvIHNjcmVlbiBoZWlnaHQsIGRlcGVuZGluZyBvbiBvcmllbnRhdGlvblxyXG5cdFx0cmVzZXRBY3RpdmVQYWdlSGVpZ2h0OiBmdW5jdGlvbiggaGVpZ2h0ICkge1xyXG5cdFx0XHR2YXIgcGFnZSA9ICQoIFwiLlwiICsgJC5tb2JpbGUuYWN0aXZlUGFnZUNsYXNzICksXHJcblx0XHRcdFx0cGFnZUhlaWdodCA9IHBhZ2UuaGVpZ2h0KCksXHJcblx0XHRcdFx0cGFnZU91dGVySGVpZ2h0ID0gcGFnZS5vdXRlckhlaWdodCggdHJ1ZSApO1xyXG5cclxuXHRcdFx0aGVpZ2h0ID0gY29tcGVuc2F0ZVRvb2xiYXJzKCBwYWdlLFxyXG5cdFx0XHRcdCggdHlwZW9mIGhlaWdodCA9PT0gXCJudW1iZXJcIiApID8gaGVpZ2h0IDogJC5tb2JpbGUuZ2V0U2NyZWVuSGVpZ2h0KCkgKTtcclxuXHJcblx0XHRcdC8vIFJlbW92ZSBhbnkgcHJldmlvdXMgbWluLWhlaWdodCBzZXR0aW5nXHJcblx0XHRcdHBhZ2UuY3NzKCBcIm1pbi1oZWlnaHRcIiwgXCJcIiApO1xyXG5cclxuXHRcdFx0Ly8gU2V0IHRoZSBtaW5pbXVtIGhlaWdodCBvbmx5IGlmIHRoZSBoZWlnaHQgYXMgZGV0ZXJtaW5lZCBieSBDU1MgaXMgaW5zdWZmaWNpZW50XHJcblx0XHRcdGlmICggcGFnZS5oZWlnaHQoKSA8IGhlaWdodCApIHtcclxuXHRcdFx0XHRwYWdlLmNzcyggXCJtaW4taGVpZ2h0XCIsIGhlaWdodCAtICggcGFnZU91dGVySGVpZ2h0IC0gcGFnZUhlaWdodCApICk7XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblxyXG5cdFx0bG9hZGluZzogZnVuY3Rpb24oKSB7XHJcblx0XHRcdC8vIElmIHRoaXMgaXMgdGhlIGZpcnN0IGNhbGwgdG8gdGhpcyBmdW5jdGlvbiwgaW5zdGFudGlhdGUgYSBsb2FkZXIgd2lkZ2V0XHJcblx0XHRcdHZhciBsb2FkZXIgPSB0aGlzLmxvYWRpbmcuX3dpZGdldCB8fCAkKCAkLm1vYmlsZS5sb2FkZXIucHJvdG90eXBlLmRlZmF1bHRIdG1sICkubG9hZGVyKCksXHJcblxyXG5cdFx0XHRcdC8vIENhbGwgdGhlIGFwcHJvcHJpYXRlIG1ldGhvZCBvbiB0aGUgbG9hZGVyXHJcblx0XHRcdFx0cmV0dXJuVmFsdWUgPSBsb2FkZXIubG9hZGVyLmFwcGx5KCBsb2FkZXIsIGFyZ3VtZW50cyApO1xyXG5cclxuXHRcdFx0Ly8gTWFrZSBzdXJlIHRoZSBsb2FkZXIgaXMgcmV0YWluZWQgZm9yIGZ1dHVyZSBjYWxscyB0byB0aGlzIGZ1bmN0aW9uLlxyXG5cdFx0XHR0aGlzLmxvYWRpbmcuX3dpZGdldCA9IGxvYWRlcjtcclxuXHJcblx0XHRcdHJldHVybiByZXR1cm5WYWx1ZTtcclxuXHRcdH1cclxuXHR9KTtcclxuXHJcblx0JC5hZGREZXBlbmRlbnRzID0gZnVuY3Rpb24oIGVsZW0sIG5ld0RlcGVuZGVudHMgKSB7XHJcblx0XHR2YXIgJGVsZW0gPSAkKCBlbGVtICksXHJcblx0XHRcdGRlcGVuZGVudHMgPSAkZWxlbS5qcW1EYXRhKCBcImRlcGVuZGVudHNcIiApIHx8ICQoKTtcclxuXHJcblx0XHQkZWxlbS5qcW1EYXRhKCBcImRlcGVuZGVudHNcIiwgJCggZGVwZW5kZW50cyApLmFkZCggbmV3RGVwZW5kZW50cyApICk7XHJcblx0fTtcclxuXHJcblx0Ly8gcGx1Z2luc1xyXG5cdCQuZm4uZXh0ZW5kKHtcclxuXHRcdHJlbW92ZVdpdGhEZXBlbmRlbnRzOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0JC5yZW1vdmVXaXRoRGVwZW5kZW50cyggdGhpcyApO1xyXG5cdFx0fSxcclxuXHJcblx0XHQvLyBFbmhhbmNlIGNoaWxkIGVsZW1lbnRzXHJcblx0XHRlbmhhbmNlV2l0aGluOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dmFyIGluZGV4LFxyXG5cdFx0XHRcdHdpZGdldEVsZW1lbnRzID0ge30sXHJcblx0XHRcdFx0a2VlcE5hdGl2ZSA9ICQubW9iaWxlLnBhZ2UucHJvdG90eXBlLmtlZXBOYXRpdmVTZWxlY3RvcigpLFxyXG5cdFx0XHRcdHRoYXQgPSB0aGlzO1xyXG5cclxuXHRcdFx0Ly8gQWRkIG5vIGpzIGNsYXNzIHRvIGVsZW1lbnRzXHJcblx0XHRcdGlmICggJC5tb2JpbGUubm9qcyApIHtcclxuXHRcdFx0XHQkLm1vYmlsZS5ub2pzKCB0aGlzICk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIEJpbmQgbGlua3MgZm9yIGFqYXggbmF2XHJcblx0XHRcdGlmICggJC5tb2JpbGUubGlua3MgKSB7XHJcblx0XHRcdFx0JC5tb2JpbGUubGlua3MoIHRoaXMgKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gRGVncmFkZSBpbnB1dHMgZm9yIHN0eWxlaW5nXHJcblx0XHRcdGlmICggJC5tb2JpbGUuZGVncmFkZUlucHV0c1dpdGhpbiApIHtcclxuXHRcdFx0XHQkLm1vYmlsZS5kZWdyYWRlSW5wdXRzV2l0aGluKCB0aGlzICk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIFJ1biBidXR0b25tYXJrdXBcclxuXHRcdFx0aWYgKCAkLmZuLmJ1dHRvbk1hcmt1cCApIHtcclxuXHRcdFx0XHR0aGlzLmZpbmQoICQuZm4uYnV0dG9uTWFya3VwLmluaXRTZWxlY3RvciApLm5vdCgga2VlcE5hdGl2ZSApXHJcblx0XHRcdFx0LmpxbUVuaGFuY2VhYmxlKCkuYnV0dG9uTWFya3VwKCk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIEFkZCBjbGFzc2VzIGZvciBmaWVsZENvbnRhaW5cclxuXHRcdFx0aWYgKCAkLmZuLmZpZWxkY29udGFpbiApIHtcclxuXHRcdFx0XHR0aGlzLmZpbmQoIFwiOmpxbURhdGEocm9sZT0nZmllbGRjb250YWluJylcIiApLm5vdCgga2VlcE5hdGl2ZSApXHJcblx0XHRcdFx0LmpxbUVuaGFuY2VhYmxlKCkuZmllbGRjb250YWluKCk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIEVuaGFuY2Ugd2lkZ2V0c1xyXG5cdFx0XHQkLmVhY2goICQubW9iaWxlLndpZGdldHMsIGZ1bmN0aW9uKCBuYW1lLCBjb25zdHJ1Y3RvciApIHtcclxuXHJcblx0XHRcdFx0Ly8gSWYgaW5pdFNlbGVjdG9yIG5vdCBmYWxzZSBmaW5kIGVsZW1lbnRzXHJcblx0XHRcdFx0aWYgKCBjb25zdHJ1Y3Rvci5pbml0U2VsZWN0b3IgKSB7XHJcblxyXG5cdFx0XHRcdFx0Ly8gRmlsdGVyIGVsZW1lbnRzIHRoYXQgc2hvdWxkIG5vdCBiZSBlbmhhbmNlZCBiYXNlZCBvbiBwYXJlbnRzXHJcblx0XHRcdFx0XHR2YXIgZWxlbWVudHMgPSAkLm1vYmlsZS5lbmhhbmNlYWJsZSggdGhhdC5maW5kKCBjb25zdHJ1Y3Rvci5pbml0U2VsZWN0b3IgKSApO1xyXG5cclxuXHRcdFx0XHRcdC8vIElmIGFueSBtYXRjaGluZyBlbGVtZW50cyByZW1haW4gZmlsdGVyIG9uZXMgd2l0aCBrZWVwTmF0aXZlU2VsZWN0b3JcclxuXHRcdFx0XHRcdGlmICggZWxlbWVudHMubGVuZ3RoID4gMCApIHtcclxuXHJcblx0XHRcdFx0XHRcdC8vICQubW9iaWxlLnBhZ2UucHJvdG90eXBlLmtlZXBOYXRpdmVTZWxlY3RvciBpcyBkZXByZWNhdGVkIHRoaXMgaXMganVzdCBmb3IgYmFja2NvbXBhdFxyXG5cdFx0XHRcdFx0XHQvLyBTd2l0Y2ggdG8gJC5tb2JpbGUua2VlcE5hdGl2ZSBpbiAxLjUgd2hpY2ggaXMganVzdCBhIHZhbHVlIG5vdCBhIGZ1bmN0aW9uXHJcblx0XHRcdFx0XHRcdGVsZW1lbnRzID0gZWxlbWVudHMubm90KCBrZWVwTmF0aXZlICk7XHJcblx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0Ly8gRW5oYW5jZSB3aGF0ZXZlciBpcyBsZWZ0XHJcblx0XHRcdFx0XHRpZiAoIGVsZW1lbnRzLmxlbmd0aCA+IDAgKSB7XHJcblx0XHRcdFx0XHRcdHdpZGdldEVsZW1lbnRzWyBjb25zdHJ1Y3Rvci5wcm90b3R5cGUud2lkZ2V0TmFtZSBdID0gZWxlbWVudHM7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdGZvciAoIGluZGV4IGluIHdpZGdldEVsZW1lbnRzICkge1xyXG5cdFx0XHRcdHdpZGdldEVsZW1lbnRzWyBpbmRleCBdWyBpbmRleCBdKCk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHJldHVybiB0aGlzO1xyXG5cdFx0fSxcclxuXHJcblx0XHRhZGREZXBlbmRlbnRzOiBmdW5jdGlvbiggbmV3RGVwZW5kZW50cyApIHtcclxuXHRcdFx0JC5hZGREZXBlbmRlbnRzKCB0aGlzLCBuZXdEZXBlbmRlbnRzICk7XHJcblx0XHR9LFxyXG5cclxuXHRcdC8vIG5vdGUgdGhhdCB0aGlzIGhlbHBlciBkb2Vzbid0IGF0dGVtcHQgdG8gaGFuZGxlIHRoZSBjYWxsYmFja1xyXG5cdFx0Ly8gb3Igc2V0dGluZyBvZiBhbiBodG1sIGVsZW1lbnQncyB0ZXh0LCBpdHMgb25seSBwdXJwb3NlIGlzXHJcblx0XHQvLyB0byByZXR1cm4gdGhlIGh0bWwgZW5jb2RlZCB2ZXJzaW9uIG9mIHRoZSB0ZXh0IGluIGFsbCBjYXNlcy4gKHRodXMgdGhlIG5hbWUpXHJcblx0XHRnZXRFbmNvZGVkVGV4dDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHJldHVybiAkKCBcIjxhPlwiICkudGV4dCggdGhpcy50ZXh0KCkgKS5odG1sKCk7XHJcblx0XHR9LFxyXG5cclxuXHRcdC8vIGZsdWVudCBoZWxwZXIgZnVuY3Rpb24gZm9yIHRoZSBtb2JpbGUgbmFtZXNwYWNlZCBlcXVpdmFsZW50XHJcblx0XHRqcW1FbmhhbmNlYWJsZTogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHJldHVybiAkLm1vYmlsZS5lbmhhbmNlYWJsZSggdGhpcyApO1xyXG5cdFx0fSxcclxuXHJcblx0XHRqcW1IaWphY2thYmxlOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0cmV0dXJuICQubW9iaWxlLmhpamFja2FibGUoIHRoaXMgKTtcclxuXHRcdH1cclxuXHR9KTtcclxuXHJcblx0JC5yZW1vdmVXaXRoRGVwZW5kZW50cyA9IGZ1bmN0aW9uKCBuYXRpdmVFbGVtZW50ICkge1xyXG5cdFx0dmFyIGVsZW1lbnQgPSAkKCBuYXRpdmVFbGVtZW50ICk7XHJcblxyXG5cdFx0KCBlbGVtZW50LmpxbURhdGEoIFwiZGVwZW5kZW50c1wiICkgfHwgJCgpICkucmVtb3ZlKCk7XHJcblx0XHRlbGVtZW50LnJlbW92ZSgpO1xyXG5cdH07XHJcblx0JC5hZGREZXBlbmRlbnRzID0gZnVuY3Rpb24oIG5hdGl2ZUVsZW1lbnQsIG5ld0RlcGVuZGVudHMgKSB7XHJcblx0XHR2YXIgZWxlbWVudCA9ICQoIG5hdGl2ZUVsZW1lbnQgKSxcclxuXHRcdFx0ZGVwZW5kZW50cyA9IGVsZW1lbnQuanFtRGF0YSggXCJkZXBlbmRlbnRzXCIgKSB8fCAkKCk7XHJcblxyXG5cdFx0ZWxlbWVudC5qcW1EYXRhKCBcImRlcGVuZGVudHNcIiwgJCggZGVwZW5kZW50cyApLmFkZCggbmV3RGVwZW5kZW50cyApICk7XHJcblx0fTtcclxuXHJcblx0JC5maW5kLm1hdGNoZXMgPSBmdW5jdGlvbiggZXhwciwgc2V0ICkge1xyXG5cdFx0cmV0dXJuICQuZmluZCggZXhwciwgbnVsbCwgbnVsbCwgc2V0ICk7XHJcblx0fTtcclxuXHJcblx0JC5maW5kLm1hdGNoZXNTZWxlY3RvciA9IGZ1bmN0aW9uKCBub2RlLCBleHByICkge1xyXG5cdFx0cmV0dXJuICQuZmluZCggZXhwciwgbnVsbCwgbnVsbCwgWyBub2RlIF0gKS5sZW5ndGggPiAwO1xyXG5cdH07XHJcblxyXG59KSggalF1ZXJ5LCB0aGlzICk7XHJcblxyXG4oZnVuY3Rpb24oICQsIHdpbmRvdywgdW5kZWZpbmVkICkge1xyXG5cdCQuZXh0ZW5kKCAkLm1vYmlsZSwge1xyXG5cclxuXHRcdC8vIFZlcnNpb24gb2YgdGhlIGpRdWVyeSBNb2JpbGUgRnJhbWV3b3JrXHJcblx0XHR2ZXJzaW9uOiBcIjEuNC41XCIsXHJcblxyXG5cdFx0Ly8gRGVwcmVjYXRlZCBhbmQgbm8gbG9uZ2VyIHVzZWQgaW4gMS40IHJlbW92ZSBpbiAxLjVcclxuXHRcdC8vIERlZmluZSB0aGUgdXJsIHBhcmFtZXRlciB1c2VkIGZvciByZWZlcmVuY2luZyB3aWRnZXQtZ2VuZXJhdGVkIHN1Yi1wYWdlcy5cclxuXHRcdC8vIFRyYW5zbGF0ZXMgdG8gZXhhbXBsZS5odG1sJnVpLXBhZ2U9c3VicGFnZUlkZW50aWZpZXJcclxuXHRcdC8vIGhhc2ggc2VnbWVudCBiZWZvcmUgJnVpLXBhZ2U9IGlzIHVzZWQgdG8gbWFrZSBBamF4IHJlcXVlc3RcclxuXHRcdHN1YlBhZ2VVcmxLZXk6IFwidWktcGFnZVwiLFxyXG5cclxuXHRcdGhpZGVVcmxCYXI6IHRydWUsXHJcblxyXG5cdFx0Ly8gS2VlcG5hdGl2ZSBTZWxlY3RvclxyXG5cdFx0a2VlcE5hdGl2ZTogXCI6anFtRGF0YShyb2xlPSdub25lJyksIDpqcW1EYXRhKHJvbGU9J25vanMnKVwiLFxyXG5cclxuXHRcdC8vIERlcHJlY2F0ZWQgaW4gMS40IHJlbW92ZSBpbiAxLjVcclxuXHRcdC8vIENsYXNzIGFzc2lnbmVkIHRvIHBhZ2UgY3VycmVudGx5IGluIHZpZXcsIGFuZCBkdXJpbmcgdHJhbnNpdGlvbnNcclxuXHRcdGFjdGl2ZVBhZ2VDbGFzczogXCJ1aS1wYWdlLWFjdGl2ZVwiLFxyXG5cclxuXHRcdC8vIERlcHJlY2F0ZWQgaW4gMS40IHJlbW92ZSBpbiAxLjVcclxuXHRcdC8vIENsYXNzIHVzZWQgZm9yIFwiYWN0aXZlXCIgYnV0dG9uIHN0YXRlLCBmcm9tIENTUyBmcmFtZXdvcmtcclxuXHRcdGFjdGl2ZUJ0bkNsYXNzOiBcInVpLWJ0bi1hY3RpdmVcIixcclxuXHJcblx0XHQvLyBEZXByZWNhdGVkIGluIDEuNCByZW1vdmUgaW4gMS41XHJcblx0XHQvLyBDbGFzcyB1c2VkIGZvciBcImZvY3VzXCIgZm9ybSBlbGVtZW50IHN0YXRlLCBmcm9tIENTUyBmcmFtZXdvcmtcclxuXHRcdGZvY3VzQ2xhc3M6IFwidWktZm9jdXNcIixcclxuXHJcblx0XHQvLyBBdXRvbWF0aWNhbGx5IGhhbmRsZSBjbGlja3MgYW5kIGZvcm0gc3VibWlzc2lvbnMgdGhyb3VnaCBBamF4LCB3aGVuIHNhbWUtZG9tYWluXHJcblx0XHRhamF4RW5hYmxlZDogdHJ1ZSxcclxuXHJcblx0XHQvLyBBdXRvbWF0aWNhbGx5IGxvYWQgYW5kIHNob3cgcGFnZXMgYmFzZWQgb24gbG9jYXRpb24uaGFzaFxyXG5cdFx0aGFzaExpc3RlbmluZ0VuYWJsZWQ6IHRydWUsXHJcblxyXG5cdFx0Ly8gZGlzYWJsZSB0byBwcmV2ZW50IGpxdWVyeSBmcm9tIGJvdGhlcmluZyB3aXRoIGxpbmtzXHJcblx0XHRsaW5rQmluZGluZ0VuYWJsZWQ6IHRydWUsXHJcblxyXG5cdFx0Ly8gU2V0IGRlZmF1bHQgcGFnZSB0cmFuc2l0aW9uIC0gJ25vbmUnIGZvciBubyB0cmFuc2l0aW9uc1xyXG5cdFx0ZGVmYXVsdFBhZ2VUcmFuc2l0aW9uOiBcImZhZGVcIixcclxuXHJcblx0XHQvLyBTZXQgbWF4aW11bSB3aW5kb3cgd2lkdGggZm9yIHRyYW5zaXRpb25zIHRvIGFwcGx5IC0gJ2ZhbHNlJyBmb3Igbm8gbGltaXRcclxuXHRcdG1heFRyYW5zaXRpb25XaWR0aDogZmFsc2UsXHJcblxyXG5cdFx0Ly8gTWluaW11bSBzY3JvbGwgZGlzdGFuY2UgdGhhdCB3aWxsIGJlIHJlbWVtYmVyZWQgd2hlbiByZXR1cm5pbmcgdG8gYSBwYWdlXHJcblx0XHQvLyBEZXByZWNhdGVkIHJlbW92ZSBpbiAxLjVcclxuXHRcdG1pblNjcm9sbEJhY2s6IDAsXHJcblxyXG5cdFx0Ly8gU2V0IGRlZmF1bHQgZGlhbG9nIHRyYW5zaXRpb24gLSAnbm9uZScgZm9yIG5vIHRyYW5zaXRpb25zXHJcblx0XHRkZWZhdWx0RGlhbG9nVHJhbnNpdGlvbjogXCJwb3BcIixcclxuXHJcblx0XHQvLyBFcnJvciByZXNwb25zZSBtZXNzYWdlIC0gYXBwZWFycyB3aGVuIGFuIEFqYXggcGFnZSByZXF1ZXN0IGZhaWxzXHJcblx0XHRwYWdlTG9hZEVycm9yTWVzc2FnZTogXCJFcnJvciBMb2FkaW5nIFBhZ2VcIixcclxuXHJcblx0XHQvLyBGb3IgZXJyb3IgbWVzc2FnZXMsIHdoaWNoIHRoZW1lIGRvZXMgdGhlIGJveCB1c2U/XHJcblx0XHRwYWdlTG9hZEVycm9yTWVzc2FnZVRoZW1lOiBcImFcIixcclxuXHJcblx0XHQvLyByZXBsYWNlIGNhbGxzIHRvIHdpbmRvdy5oaXN0b3J5LmJhY2sgd2l0aCBwaG9uZWdhcHMgbmF2aWdhdGlvbiBoZWxwZXJcclxuXHRcdC8vIHdoZXJlIGl0IGlzIHByb3ZpZGVkIG9uIHRoZSB3aW5kb3cgb2JqZWN0XHJcblx0XHRwaG9uZWdhcE5hdmlnYXRpb25FbmFibGVkOiBmYWxzZSxcclxuXHJcblx0XHQvL2F1dG9tYXRpY2FsbHkgaW5pdGlhbGl6ZSB0aGUgRE9NIHdoZW4gaXQncyByZWFkeVxyXG5cdFx0YXV0b0luaXRpYWxpemVQYWdlOiB0cnVlLFxyXG5cclxuXHRcdHB1c2hTdGF0ZUVuYWJsZWQ6IHRydWUsXHJcblxyXG5cdFx0Ly8gYWxsb3dzIHVzZXJzIHRvIG9wdCBpbiB0byBpZ25vcmluZyBjb250ZW50IGJ5IG1hcmtpbmcgYSBwYXJlbnQgZWxlbWVudCBhc1xyXG5cdFx0Ly8gZGF0YS1pZ25vcmVkXHJcblx0XHRpZ25vcmVDb250ZW50RW5hYmxlZDogZmFsc2UsXHJcblxyXG5cdFx0YnV0dG9uTWFya3VwOiB7XHJcblx0XHRcdGhvdmVyRGVsYXk6IDIwMFxyXG5cdFx0fSxcclxuXHJcblx0XHQvLyBkaXNhYmxlIHRoZSBhbHRlcmF0aW9uIG9mIHRoZSBkeW5hbWljIGJhc2UgdGFnIG9yIGxpbmtzIGluIHRoZSBjYXNlXHJcblx0XHQvLyB0aGF0IGEgZHluYW1pYyBiYXNlIHRhZyBpc24ndCBzdXBwb3J0ZWRcclxuXHRcdGR5bmFtaWNCYXNlRW5hYmxlZDogdHJ1ZSxcclxuXHJcblx0XHQvLyBkZWZhdWx0IHRoZSBwcm9wZXJ0eSB0byByZW1vdmUgZGVwZW5kZW5jeSBvbiBhc3NpZ25tZW50IGluIGluaXQgbW9kdWxlXHJcblx0XHRwYWdlQ29udGFpbmVyOiAkKCksXHJcblxyXG5cdFx0Ly9lbmFibGUgY3Jvc3MtZG9tYWluIHBhZ2Ugc3VwcG9ydFxyXG5cdFx0YWxsb3dDcm9zc0RvbWFpblBhZ2VzOiBmYWxzZSxcclxuXHJcblx0XHRkaWFsb2dIYXNoS2V5OiBcIiZ1aS1zdGF0ZT1kaWFsb2dcIlxyXG5cdH0pO1xyXG59KSggalF1ZXJ5LCB0aGlzICk7XHJcblxyXG4vKiFcclxuICogalF1ZXJ5IFVJIFdpZGdldCBjMGFiNzEwNTZiOTM2NjI3ZThhNzgyMWYwM2MwNDRhZWM2MjgwYTQwXHJcbiAqIGh0dHA6Ly9qcXVlcnl1aS5jb21cclxuICpcclxuICogQ29weXJpZ2h0IDIwMTMgalF1ZXJ5IEZvdW5kYXRpb24gYW5kIG90aGVyIGNvbnRyaWJ1dG9yc1xyXG4gKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXHJcbiAqIGh0dHA6Ly9qcXVlcnkub3JnL2xpY2Vuc2VcclxuICpcclxuICogaHR0cDovL2FwaS5qcXVlcnl1aS5jb20valF1ZXJ5LndpZGdldC9cclxuICovXHJcbihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xyXG5cclxudmFyIHV1aWQgPSAwLFxyXG5cdHNsaWNlID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLFxyXG5cdF9jbGVhbkRhdGEgPSAkLmNsZWFuRGF0YTtcclxuJC5jbGVhbkRhdGEgPSBmdW5jdGlvbiggZWxlbXMgKSB7XHJcblx0Zm9yICggdmFyIGkgPSAwLCBlbGVtOyAoZWxlbSA9IGVsZW1zW2ldKSAhPSBudWxsOyBpKysgKSB7XHJcblx0XHR0cnkge1xyXG5cdFx0XHQkKCBlbGVtICkudHJpZ2dlckhhbmRsZXIoIFwicmVtb3ZlXCIgKTtcclxuXHRcdC8vIGh0dHA6Ly9idWdzLmpxdWVyeS5jb20vdGlja2V0LzgyMzVcclxuXHRcdH0gY2F0Y2goIGUgKSB7fVxyXG5cdH1cclxuXHRfY2xlYW5EYXRhKCBlbGVtcyApO1xyXG59O1xyXG5cclxuJC53aWRnZXQgPSBmdW5jdGlvbiggbmFtZSwgYmFzZSwgcHJvdG90eXBlICkge1xyXG5cdHZhciBmdWxsTmFtZSwgZXhpc3RpbmdDb25zdHJ1Y3RvciwgY29uc3RydWN0b3IsIGJhc2VQcm90b3R5cGUsXHJcblx0XHQvLyBwcm94aWVkUHJvdG90eXBlIGFsbG93cyB0aGUgcHJvdmlkZWQgcHJvdG90eXBlIHRvIHJlbWFpbiB1bm1vZGlmaWVkXHJcblx0XHQvLyBzbyB0aGF0IGl0IGNhbiBiZSB1c2VkIGFzIGEgbWl4aW4gZm9yIG11bHRpcGxlIHdpZGdldHMgKCM4ODc2KVxyXG5cdFx0cHJveGllZFByb3RvdHlwZSA9IHt9LFxyXG5cdFx0bmFtZXNwYWNlID0gbmFtZS5zcGxpdCggXCIuXCIgKVsgMCBdO1xyXG5cclxuXHRuYW1lID0gbmFtZS5zcGxpdCggXCIuXCIgKVsgMSBdO1xyXG5cdGZ1bGxOYW1lID0gbmFtZXNwYWNlICsgXCItXCIgKyBuYW1lO1xyXG5cclxuXHRpZiAoICFwcm90b3R5cGUgKSB7XHJcblx0XHRwcm90b3R5cGUgPSBiYXNlO1xyXG5cdFx0YmFzZSA9ICQuV2lkZ2V0O1xyXG5cdH1cclxuXHJcblx0Ly8gY3JlYXRlIHNlbGVjdG9yIGZvciBwbHVnaW5cclxuXHQkLmV4cHJbIFwiOlwiIF1bIGZ1bGxOYW1lLnRvTG93ZXJDYXNlKCkgXSA9IGZ1bmN0aW9uKCBlbGVtICkge1xyXG5cdFx0cmV0dXJuICEhJC5kYXRhKCBlbGVtLCBmdWxsTmFtZSApO1xyXG5cdH07XHJcblxyXG5cdCRbIG5hbWVzcGFjZSBdID0gJFsgbmFtZXNwYWNlIF0gfHwge307XHJcblx0ZXhpc3RpbmdDb25zdHJ1Y3RvciA9ICRbIG5hbWVzcGFjZSBdWyBuYW1lIF07XHJcblx0Y29uc3RydWN0b3IgPSAkWyBuYW1lc3BhY2UgXVsgbmFtZSBdID0gZnVuY3Rpb24oIG9wdGlvbnMsIGVsZW1lbnQgKSB7XHJcblx0XHQvLyBhbGxvdyBpbnN0YW50aWF0aW9uIHdpdGhvdXQgXCJuZXdcIiBrZXl3b3JkXHJcblx0XHRpZiAoICF0aGlzLl9jcmVhdGVXaWRnZXQgKSB7XHJcblx0XHRcdHJldHVybiBuZXcgY29uc3RydWN0b3IoIG9wdGlvbnMsIGVsZW1lbnQgKTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBhbGxvdyBpbnN0YW50aWF0aW9uIHdpdGhvdXQgaW5pdGlhbGl6aW5nIGZvciBzaW1wbGUgaW5oZXJpdGFuY2VcclxuXHRcdC8vIG11c3QgdXNlIFwibmV3XCIga2V5d29yZCAodGhlIGNvZGUgYWJvdmUgYWx3YXlzIHBhc3NlcyBhcmdzKVxyXG5cdFx0aWYgKCBhcmd1bWVudHMubGVuZ3RoICkge1xyXG5cdFx0XHR0aGlzLl9jcmVhdGVXaWRnZXQoIG9wdGlvbnMsIGVsZW1lbnQgKTtcclxuXHRcdH1cclxuXHR9O1xyXG5cdC8vIGV4dGVuZCB3aXRoIHRoZSBleGlzdGluZyBjb25zdHJ1Y3RvciB0byBjYXJyeSBvdmVyIGFueSBzdGF0aWMgcHJvcGVydGllc1xyXG5cdCQuZXh0ZW5kKCBjb25zdHJ1Y3RvciwgZXhpc3RpbmdDb25zdHJ1Y3Rvciwge1xyXG5cdFx0dmVyc2lvbjogcHJvdG90eXBlLnZlcnNpb24sXHJcblx0XHQvLyBjb3B5IHRoZSBvYmplY3QgdXNlZCB0byBjcmVhdGUgdGhlIHByb3RvdHlwZSBpbiBjYXNlIHdlIG5lZWQgdG9cclxuXHRcdC8vIHJlZGVmaW5lIHRoZSB3aWRnZXQgbGF0ZXJcclxuXHRcdF9wcm90bzogJC5leHRlbmQoIHt9LCBwcm90b3R5cGUgKSxcclxuXHRcdC8vIHRyYWNrIHdpZGdldHMgdGhhdCBpbmhlcml0IGZyb20gdGhpcyB3aWRnZXQgaW4gY2FzZSB0aGlzIHdpZGdldCBpc1xyXG5cdFx0Ly8gcmVkZWZpbmVkIGFmdGVyIGEgd2lkZ2V0IGluaGVyaXRzIGZyb20gaXRcclxuXHRcdF9jaGlsZENvbnN0cnVjdG9yczogW11cclxuXHR9KTtcclxuXHJcblx0YmFzZVByb3RvdHlwZSA9IG5ldyBiYXNlKCk7XHJcblx0Ly8gd2UgbmVlZCB0byBtYWtlIHRoZSBvcHRpb25zIGhhc2ggYSBwcm9wZXJ0eSBkaXJlY3RseSBvbiB0aGUgbmV3IGluc3RhbmNlXHJcblx0Ly8gb3RoZXJ3aXNlIHdlJ2xsIG1vZGlmeSB0aGUgb3B0aW9ucyBoYXNoIG9uIHRoZSBwcm90b3R5cGUgdGhhdCB3ZSdyZVxyXG5cdC8vIGluaGVyaXRpbmcgZnJvbVxyXG5cdGJhc2VQcm90b3R5cGUub3B0aW9ucyA9ICQud2lkZ2V0LmV4dGVuZCgge30sIGJhc2VQcm90b3R5cGUub3B0aW9ucyApO1xyXG5cdCQuZWFjaCggcHJvdG90eXBlLCBmdW5jdGlvbiggcHJvcCwgdmFsdWUgKSB7XHJcblx0XHRpZiAoICEkLmlzRnVuY3Rpb24oIHZhbHVlICkgKSB7XHJcblx0XHRcdHByb3hpZWRQcm90b3R5cGVbIHByb3AgXSA9IHZhbHVlO1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblx0XHRwcm94aWVkUHJvdG90eXBlWyBwcm9wIF0gPSAoZnVuY3Rpb24oKSB7XHJcblx0XHRcdHZhciBfc3VwZXIgPSBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdHJldHVybiBiYXNlLnByb3RvdHlwZVsgcHJvcCBdLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTtcclxuXHRcdFx0XHR9LFxyXG5cdFx0XHRcdF9zdXBlckFwcGx5ID0gZnVuY3Rpb24oIGFyZ3MgKSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gYmFzZS5wcm90b3R5cGVbIHByb3AgXS5hcHBseSggdGhpcywgYXJncyApO1xyXG5cdFx0XHRcdH07XHJcblx0XHRcdHJldHVybiBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHR2YXIgX19zdXBlciA9IHRoaXMuX3N1cGVyLFxyXG5cdFx0XHRcdFx0X19zdXBlckFwcGx5ID0gdGhpcy5fc3VwZXJBcHBseSxcclxuXHRcdFx0XHRcdHJldHVyblZhbHVlO1xyXG5cclxuXHRcdFx0XHR0aGlzLl9zdXBlciA9IF9zdXBlcjtcclxuXHRcdFx0XHR0aGlzLl9zdXBlckFwcGx5ID0gX3N1cGVyQXBwbHk7XHJcblxyXG5cdFx0XHRcdHJldHVyblZhbHVlID0gdmFsdWUuYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApO1xyXG5cclxuXHRcdFx0XHR0aGlzLl9zdXBlciA9IF9fc3VwZXI7XHJcblx0XHRcdFx0dGhpcy5fc3VwZXJBcHBseSA9IF9fc3VwZXJBcHBseTtcclxuXHJcblx0XHRcdFx0cmV0dXJuIHJldHVyblZhbHVlO1xyXG5cdFx0XHR9O1xyXG5cdFx0fSkoKTtcclxuXHR9KTtcclxuXHRjb25zdHJ1Y3Rvci5wcm90b3R5cGUgPSAkLndpZGdldC5leHRlbmQoIGJhc2VQcm90b3R5cGUsIHtcclxuXHRcdC8vIFRPRE86IHJlbW92ZSBzdXBwb3J0IGZvciB3aWRnZXRFdmVudFByZWZpeFxyXG5cdFx0Ly8gYWx3YXlzIHVzZSB0aGUgbmFtZSArIGEgY29sb24gYXMgdGhlIHByZWZpeCwgZS5nLiwgZHJhZ2dhYmxlOnN0YXJ0XHJcblx0XHQvLyBkb24ndCBwcmVmaXggZm9yIHdpZGdldHMgdGhhdCBhcmVuJ3QgRE9NLWJhc2VkXHJcblx0XHR3aWRnZXRFdmVudFByZWZpeDogZXhpc3RpbmdDb25zdHJ1Y3RvciA/IChiYXNlUHJvdG90eXBlLndpZGdldEV2ZW50UHJlZml4IHx8IG5hbWUpIDogbmFtZVxyXG5cdH0sIHByb3hpZWRQcm90b3R5cGUsIHtcclxuXHRcdGNvbnN0cnVjdG9yOiBjb25zdHJ1Y3RvcixcclxuXHRcdG5hbWVzcGFjZTogbmFtZXNwYWNlLFxyXG5cdFx0d2lkZ2V0TmFtZTogbmFtZSxcclxuXHRcdHdpZGdldEZ1bGxOYW1lOiBmdWxsTmFtZVxyXG5cdH0pO1xyXG5cclxuXHQvLyBJZiB0aGlzIHdpZGdldCBpcyBiZWluZyByZWRlZmluZWQgdGhlbiB3ZSBuZWVkIHRvIGZpbmQgYWxsIHdpZGdldHMgdGhhdFxyXG5cdC8vIGFyZSBpbmhlcml0aW5nIGZyb20gaXQgYW5kIHJlZGVmaW5lIGFsbCBvZiB0aGVtIHNvIHRoYXQgdGhleSBpbmhlcml0IGZyb21cclxuXHQvLyB0aGUgbmV3IHZlcnNpb24gb2YgdGhpcyB3aWRnZXQuIFdlJ3JlIGVzc2VudGlhbGx5IHRyeWluZyB0byByZXBsYWNlIG9uZVxyXG5cdC8vIGxldmVsIGluIHRoZSBwcm90b3R5cGUgY2hhaW4uXHJcblx0aWYgKCBleGlzdGluZ0NvbnN0cnVjdG9yICkge1xyXG5cdFx0JC5lYWNoKCBleGlzdGluZ0NvbnN0cnVjdG9yLl9jaGlsZENvbnN0cnVjdG9ycywgZnVuY3Rpb24oIGksIGNoaWxkICkge1xyXG5cdFx0XHR2YXIgY2hpbGRQcm90b3R5cGUgPSBjaGlsZC5wcm90b3R5cGU7XHJcblxyXG5cdFx0XHQvLyByZWRlZmluZSB0aGUgY2hpbGQgd2lkZ2V0IHVzaW5nIHRoZSBzYW1lIHByb3RvdHlwZSB0aGF0IHdhc1xyXG5cdFx0XHQvLyBvcmlnaW5hbGx5IHVzZWQsIGJ1dCBpbmhlcml0IGZyb20gdGhlIG5ldyB2ZXJzaW9uIG9mIHRoZSBiYXNlXHJcblx0XHRcdCQud2lkZ2V0KCBjaGlsZFByb3RvdHlwZS5uYW1lc3BhY2UgKyBcIi5cIiArIGNoaWxkUHJvdG90eXBlLndpZGdldE5hbWUsIGNvbnN0cnVjdG9yLCBjaGlsZC5fcHJvdG8gKTtcclxuXHRcdH0pO1xyXG5cdFx0Ly8gcmVtb3ZlIHRoZSBsaXN0IG9mIGV4aXN0aW5nIGNoaWxkIGNvbnN0cnVjdG9ycyBmcm9tIHRoZSBvbGQgY29uc3RydWN0b3JcclxuXHRcdC8vIHNvIHRoZSBvbGQgY2hpbGQgY29uc3RydWN0b3JzIGNhbiBiZSBnYXJiYWdlIGNvbGxlY3RlZFxyXG5cdFx0ZGVsZXRlIGV4aXN0aW5nQ29uc3RydWN0b3IuX2NoaWxkQ29uc3RydWN0b3JzO1xyXG5cdH0gZWxzZSB7XHJcblx0XHRiYXNlLl9jaGlsZENvbnN0cnVjdG9ycy5wdXNoKCBjb25zdHJ1Y3RvciApO1xyXG5cdH1cclxuXHJcblx0JC53aWRnZXQuYnJpZGdlKCBuYW1lLCBjb25zdHJ1Y3RvciApO1xyXG5cclxuXHRyZXR1cm4gY29uc3RydWN0b3I7XHJcbn07XHJcblxyXG4kLndpZGdldC5leHRlbmQgPSBmdW5jdGlvbiggdGFyZ2V0ICkge1xyXG5cdHZhciBpbnB1dCA9IHNsaWNlLmNhbGwoIGFyZ3VtZW50cywgMSApLFxyXG5cdFx0aW5wdXRJbmRleCA9IDAsXHJcblx0XHRpbnB1dExlbmd0aCA9IGlucHV0Lmxlbmd0aCxcclxuXHRcdGtleSxcclxuXHRcdHZhbHVlO1xyXG5cdGZvciAoIDsgaW5wdXRJbmRleCA8IGlucHV0TGVuZ3RoOyBpbnB1dEluZGV4KysgKSB7XHJcblx0XHRmb3IgKCBrZXkgaW4gaW5wdXRbIGlucHV0SW5kZXggXSApIHtcclxuXHRcdFx0dmFsdWUgPSBpbnB1dFsgaW5wdXRJbmRleCBdWyBrZXkgXTtcclxuXHRcdFx0aWYgKCBpbnB1dFsgaW5wdXRJbmRleCBdLmhhc093blByb3BlcnR5KCBrZXkgKSAmJiB2YWx1ZSAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRcdC8vIENsb25lIG9iamVjdHNcclxuXHRcdFx0XHRpZiAoICQuaXNQbGFpbk9iamVjdCggdmFsdWUgKSApIHtcclxuXHRcdFx0XHRcdHRhcmdldFsga2V5IF0gPSAkLmlzUGxhaW5PYmplY3QoIHRhcmdldFsga2V5IF0gKSA/XHJcblx0XHRcdFx0XHRcdCQud2lkZ2V0LmV4dGVuZCgge30sIHRhcmdldFsga2V5IF0sIHZhbHVlICkgOlxyXG5cdFx0XHRcdFx0XHQvLyBEb24ndCBleHRlbmQgc3RyaW5ncywgYXJyYXlzLCBldGMuIHdpdGggb2JqZWN0c1xyXG5cdFx0XHRcdFx0XHQkLndpZGdldC5leHRlbmQoIHt9LCB2YWx1ZSApO1xyXG5cdFx0XHRcdC8vIENvcHkgZXZlcnl0aGluZyBlbHNlIGJ5IHJlZmVyZW5jZVxyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHR0YXJnZXRbIGtleSBdID0gdmFsdWU7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG5cdHJldHVybiB0YXJnZXQ7XHJcbn07XHJcblxyXG4kLndpZGdldC5icmlkZ2UgPSBmdW5jdGlvbiggbmFtZSwgb2JqZWN0ICkge1xyXG5cdHZhciBmdWxsTmFtZSA9IG9iamVjdC5wcm90b3R5cGUud2lkZ2V0RnVsbE5hbWUgfHwgbmFtZTtcclxuXHQkLmZuWyBuYW1lIF0gPSBmdW5jdGlvbiggb3B0aW9ucyApIHtcclxuXHRcdHZhciBpc01ldGhvZENhbGwgPSB0eXBlb2Ygb3B0aW9ucyA9PT0gXCJzdHJpbmdcIixcclxuXHRcdFx0YXJncyA9IHNsaWNlLmNhbGwoIGFyZ3VtZW50cywgMSApLFxyXG5cdFx0XHRyZXR1cm5WYWx1ZSA9IHRoaXM7XHJcblxyXG5cdFx0Ly8gYWxsb3cgbXVsdGlwbGUgaGFzaGVzIHRvIGJlIHBhc3NlZCBvbiBpbml0XHJcblx0XHRvcHRpb25zID0gIWlzTWV0aG9kQ2FsbCAmJiBhcmdzLmxlbmd0aCA/XHJcblx0XHRcdCQud2lkZ2V0LmV4dGVuZC5hcHBseSggbnVsbCwgWyBvcHRpb25zIF0uY29uY2F0KGFyZ3MpICkgOlxyXG5cdFx0XHRvcHRpb25zO1xyXG5cclxuXHRcdGlmICggaXNNZXRob2RDYWxsICkge1xyXG5cdFx0XHR0aGlzLmVhY2goZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0dmFyIG1ldGhvZFZhbHVlLFxyXG5cdFx0XHRcdFx0aW5zdGFuY2UgPSAkLmRhdGEoIHRoaXMsIGZ1bGxOYW1lICk7XHJcblx0XHRcdFx0aWYgKCBvcHRpb25zID09PSBcImluc3RhbmNlXCIgKSB7XHJcblx0XHRcdFx0XHRyZXR1cm5WYWx1ZSA9IGluc3RhbmNlO1xyXG5cdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRpZiAoICFpbnN0YW5jZSApIHtcclxuXHRcdFx0XHRcdHJldHVybiAkLmVycm9yKCBcImNhbm5vdCBjYWxsIG1ldGhvZHMgb24gXCIgKyBuYW1lICsgXCIgcHJpb3IgdG8gaW5pdGlhbGl6YXRpb247IFwiICtcclxuXHRcdFx0XHRcdFx0XCJhdHRlbXB0ZWQgdG8gY2FsbCBtZXRob2QgJ1wiICsgb3B0aW9ucyArIFwiJ1wiICk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGlmICggISQuaXNGdW5jdGlvbiggaW5zdGFuY2Vbb3B0aW9uc10gKSB8fCBvcHRpb25zLmNoYXJBdCggMCApID09PSBcIl9cIiApIHtcclxuXHRcdFx0XHRcdHJldHVybiAkLmVycm9yKCBcIm5vIHN1Y2ggbWV0aG9kICdcIiArIG9wdGlvbnMgKyBcIicgZm9yIFwiICsgbmFtZSArIFwiIHdpZGdldCBpbnN0YW5jZVwiICk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdG1ldGhvZFZhbHVlID0gaW5zdGFuY2VbIG9wdGlvbnMgXS5hcHBseSggaW5zdGFuY2UsIGFyZ3MgKTtcclxuXHRcdFx0XHRpZiAoIG1ldGhvZFZhbHVlICE9PSBpbnN0YW5jZSAmJiBtZXRob2RWYWx1ZSAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRcdFx0cmV0dXJuVmFsdWUgPSBtZXRob2RWYWx1ZSAmJiBtZXRob2RWYWx1ZS5qcXVlcnkgP1xyXG5cdFx0XHRcdFx0XHRyZXR1cm5WYWx1ZS5wdXNoU3RhY2soIG1ldGhvZFZhbHVlLmdldCgpICkgOlxyXG5cdFx0XHRcdFx0XHRtZXRob2RWYWx1ZTtcclxuXHRcdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0dGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHZhciBpbnN0YW5jZSA9ICQuZGF0YSggdGhpcywgZnVsbE5hbWUgKTtcclxuXHRcdFx0XHRpZiAoIGluc3RhbmNlICkge1xyXG5cdFx0XHRcdFx0aW5zdGFuY2Uub3B0aW9uKCBvcHRpb25zIHx8IHt9ICkuX2luaXQoKTtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0JC5kYXRhKCB0aGlzLCBmdWxsTmFtZSwgbmV3IG9iamVjdCggb3B0aW9ucywgdGhpcyApICk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gcmV0dXJuVmFsdWU7XHJcblx0fTtcclxufTtcclxuXHJcbiQuV2lkZ2V0ID0gZnVuY3Rpb24oIC8qIG9wdGlvbnMsIGVsZW1lbnQgKi8gKSB7fTtcclxuJC5XaWRnZXQuX2NoaWxkQ29uc3RydWN0b3JzID0gW107XHJcblxyXG4kLldpZGdldC5wcm90b3R5cGUgPSB7XHJcblx0d2lkZ2V0TmFtZTogXCJ3aWRnZXRcIixcclxuXHR3aWRnZXRFdmVudFByZWZpeDogXCJcIixcclxuXHRkZWZhdWx0RWxlbWVudDogXCI8ZGl2PlwiLFxyXG5cdG9wdGlvbnM6IHtcclxuXHRcdGRpc2FibGVkOiBmYWxzZSxcclxuXHJcblx0XHQvLyBjYWxsYmFja3NcclxuXHRcdGNyZWF0ZTogbnVsbFxyXG5cdH0sXHJcblx0X2NyZWF0ZVdpZGdldDogZnVuY3Rpb24oIG9wdGlvbnMsIGVsZW1lbnQgKSB7XHJcblx0XHRlbGVtZW50ID0gJCggZWxlbWVudCB8fCB0aGlzLmRlZmF1bHRFbGVtZW50IHx8IHRoaXMgKVsgMCBdO1xyXG5cdFx0dGhpcy5lbGVtZW50ID0gJCggZWxlbWVudCApO1xyXG5cdFx0dGhpcy51dWlkID0gdXVpZCsrO1xyXG5cdFx0dGhpcy5ldmVudE5hbWVzcGFjZSA9IFwiLlwiICsgdGhpcy53aWRnZXROYW1lICsgdGhpcy51dWlkO1xyXG5cdFx0dGhpcy5vcHRpb25zID0gJC53aWRnZXQuZXh0ZW5kKCB7fSxcclxuXHRcdFx0dGhpcy5vcHRpb25zLFxyXG5cdFx0XHR0aGlzLl9nZXRDcmVhdGVPcHRpb25zKCksXHJcblx0XHRcdG9wdGlvbnMgKTtcclxuXHJcblx0XHR0aGlzLmJpbmRpbmdzID0gJCgpO1xyXG5cdFx0dGhpcy5ob3ZlcmFibGUgPSAkKCk7XHJcblx0XHR0aGlzLmZvY3VzYWJsZSA9ICQoKTtcclxuXHJcblx0XHRpZiAoIGVsZW1lbnQgIT09IHRoaXMgKSB7XHJcblx0XHRcdCQuZGF0YSggZWxlbWVudCwgdGhpcy53aWRnZXRGdWxsTmFtZSwgdGhpcyApO1xyXG5cdFx0XHR0aGlzLl9vbiggdHJ1ZSwgdGhpcy5lbGVtZW50LCB7XHJcblx0XHRcdFx0cmVtb3ZlOiBmdW5jdGlvbiggZXZlbnQgKSB7XHJcblx0XHRcdFx0XHRpZiAoIGV2ZW50LnRhcmdldCA9PT0gZWxlbWVudCApIHtcclxuXHRcdFx0XHRcdFx0dGhpcy5kZXN0cm95KCk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHRcdFx0dGhpcy5kb2N1bWVudCA9ICQoIGVsZW1lbnQuc3R5bGUgP1xyXG5cdFx0XHRcdC8vIGVsZW1lbnQgd2l0aGluIHRoZSBkb2N1bWVudFxyXG5cdFx0XHRcdGVsZW1lbnQub3duZXJEb2N1bWVudCA6XHJcblx0XHRcdFx0Ly8gZWxlbWVudCBpcyB3aW5kb3cgb3IgZG9jdW1lbnRcclxuXHRcdFx0XHRlbGVtZW50LmRvY3VtZW50IHx8IGVsZW1lbnQgKTtcclxuXHRcdFx0dGhpcy53aW5kb3cgPSAkKCB0aGlzLmRvY3VtZW50WzBdLmRlZmF1bHRWaWV3IHx8IHRoaXMuZG9jdW1lbnRbMF0ucGFyZW50V2luZG93ICk7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5fY3JlYXRlKCk7XHJcblx0XHR0aGlzLl90cmlnZ2VyKCBcImNyZWF0ZVwiLCBudWxsLCB0aGlzLl9nZXRDcmVhdGVFdmVudERhdGEoKSApO1xyXG5cdFx0dGhpcy5faW5pdCgpO1xyXG5cdH0sXHJcblx0X2dldENyZWF0ZU9wdGlvbnM6ICQubm9vcCxcclxuXHRfZ2V0Q3JlYXRlRXZlbnREYXRhOiAkLm5vb3AsXHJcblx0X2NyZWF0ZTogJC5ub29wLFxyXG5cdF9pbml0OiAkLm5vb3AsXHJcblxyXG5cdGRlc3Ryb3k6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5fZGVzdHJveSgpO1xyXG5cdFx0Ly8gd2UgY2FuIHByb2JhYmx5IHJlbW92ZSB0aGUgdW5iaW5kIGNhbGxzIGluIDIuMFxyXG5cdFx0Ly8gYWxsIGV2ZW50IGJpbmRpbmdzIHNob3VsZCBnbyB0aHJvdWdoIHRoaXMuX29uKClcclxuXHRcdHRoaXMuZWxlbWVudFxyXG5cdFx0XHQudW5iaW5kKCB0aGlzLmV2ZW50TmFtZXNwYWNlIClcclxuXHRcdFx0LnJlbW92ZURhdGEoIHRoaXMud2lkZ2V0RnVsbE5hbWUgKVxyXG5cdFx0XHQvLyBzdXBwb3J0OiBqcXVlcnkgPDEuNi4zXHJcblx0XHRcdC8vIGh0dHA6Ly9idWdzLmpxdWVyeS5jb20vdGlja2V0Lzk0MTNcclxuXHRcdFx0LnJlbW92ZURhdGEoICQuY2FtZWxDYXNlKCB0aGlzLndpZGdldEZ1bGxOYW1lICkgKTtcclxuXHRcdHRoaXMud2lkZ2V0KClcclxuXHRcdFx0LnVuYmluZCggdGhpcy5ldmVudE5hbWVzcGFjZSApXHJcblx0XHRcdC5yZW1vdmVBdHRyKCBcImFyaWEtZGlzYWJsZWRcIiApXHJcblx0XHRcdC5yZW1vdmVDbGFzcyhcclxuXHRcdFx0XHR0aGlzLndpZGdldEZ1bGxOYW1lICsgXCItZGlzYWJsZWQgXCIgK1xyXG5cdFx0XHRcdFwidWktc3RhdGUtZGlzYWJsZWRcIiApO1xyXG5cclxuXHRcdC8vIGNsZWFuIHVwIGV2ZW50cyBhbmQgc3RhdGVzXHJcblx0XHR0aGlzLmJpbmRpbmdzLnVuYmluZCggdGhpcy5ldmVudE5hbWVzcGFjZSApO1xyXG5cdFx0dGhpcy5ob3ZlcmFibGUucmVtb3ZlQ2xhc3MoIFwidWktc3RhdGUtaG92ZXJcIiApO1xyXG5cdFx0dGhpcy5mb2N1c2FibGUucmVtb3ZlQ2xhc3MoIFwidWktc3RhdGUtZm9jdXNcIiApO1xyXG5cdH0sXHJcblx0X2Rlc3Ryb3k6ICQubm9vcCxcclxuXHJcblx0d2lkZ2V0OiBmdW5jdGlvbigpIHtcclxuXHRcdHJldHVybiB0aGlzLmVsZW1lbnQ7XHJcblx0fSxcclxuXHJcblx0b3B0aW9uOiBmdW5jdGlvbigga2V5LCB2YWx1ZSApIHtcclxuXHRcdHZhciBvcHRpb25zID0ga2V5LFxyXG5cdFx0XHRwYXJ0cyxcclxuXHRcdFx0Y3VyT3B0aW9uLFxyXG5cdFx0XHRpO1xyXG5cclxuXHRcdGlmICggYXJndW1lbnRzLmxlbmd0aCA9PT0gMCApIHtcclxuXHRcdFx0Ly8gZG9uJ3QgcmV0dXJuIGEgcmVmZXJlbmNlIHRvIHRoZSBpbnRlcm5hbCBoYXNoXHJcblx0XHRcdHJldHVybiAkLndpZGdldC5leHRlbmQoIHt9LCB0aGlzLm9wdGlvbnMgKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIHR5cGVvZiBrZXkgPT09IFwic3RyaW5nXCIgKSB7XHJcblx0XHRcdC8vIGhhbmRsZSBuZXN0ZWQga2V5cywgZS5nLiwgXCJmb28uYmFyXCIgPT4geyBmb286IHsgYmFyOiBfX18gfSB9XHJcblx0XHRcdG9wdGlvbnMgPSB7fTtcclxuXHRcdFx0cGFydHMgPSBrZXkuc3BsaXQoIFwiLlwiICk7XHJcblx0XHRcdGtleSA9IHBhcnRzLnNoaWZ0KCk7XHJcblx0XHRcdGlmICggcGFydHMubGVuZ3RoICkge1xyXG5cdFx0XHRcdGN1ck9wdGlvbiA9IG9wdGlvbnNbIGtleSBdID0gJC53aWRnZXQuZXh0ZW5kKCB7fSwgdGhpcy5vcHRpb25zWyBrZXkgXSApO1xyXG5cdFx0XHRcdGZvciAoIGkgPSAwOyBpIDwgcGFydHMubGVuZ3RoIC0gMTsgaSsrICkge1xyXG5cdFx0XHRcdFx0Y3VyT3B0aW9uWyBwYXJ0c1sgaSBdIF0gPSBjdXJPcHRpb25bIHBhcnRzWyBpIF0gXSB8fCB7fTtcclxuXHRcdFx0XHRcdGN1ck9wdGlvbiA9IGN1ck9wdGlvblsgcGFydHNbIGkgXSBdO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRrZXkgPSBwYXJ0cy5wb3AoKTtcclxuXHRcdFx0XHRpZiAoIHZhbHVlID09PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gY3VyT3B0aW9uWyBrZXkgXSA9PT0gdW5kZWZpbmVkID8gbnVsbCA6IGN1ck9wdGlvblsga2V5IF07XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGN1ck9wdGlvblsga2V5IF0gPSB2YWx1ZTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRpZiAoIHZhbHVlID09PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gdGhpcy5vcHRpb25zWyBrZXkgXSA9PT0gdW5kZWZpbmVkID8gbnVsbCA6IHRoaXMub3B0aW9uc1sga2V5IF07XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdG9wdGlvbnNbIGtleSBdID0gdmFsdWU7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLl9zZXRPcHRpb25zKCBvcHRpb25zICk7XHJcblxyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblx0fSxcclxuXHRfc2V0T3B0aW9uczogZnVuY3Rpb24oIG9wdGlvbnMgKSB7XHJcblx0XHR2YXIga2V5O1xyXG5cclxuXHRcdGZvciAoIGtleSBpbiBvcHRpb25zICkge1xyXG5cdFx0XHR0aGlzLl9zZXRPcHRpb24oIGtleSwgb3B0aW9uc1sga2V5IF0gKTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHR9LFxyXG5cdF9zZXRPcHRpb246IGZ1bmN0aW9uKCBrZXksIHZhbHVlICkge1xyXG5cdFx0dGhpcy5vcHRpb25zWyBrZXkgXSA9IHZhbHVlO1xyXG5cclxuXHRcdGlmICgga2V5ID09PSBcImRpc2FibGVkXCIgKSB7XHJcblx0XHRcdHRoaXMud2lkZ2V0KClcclxuXHRcdFx0XHQudG9nZ2xlQ2xhc3MoIHRoaXMud2lkZ2V0RnVsbE5hbWUgKyBcIi1kaXNhYmxlZFwiLCAhIXZhbHVlICk7XHJcblx0XHRcdHRoaXMuaG92ZXJhYmxlLnJlbW92ZUNsYXNzKCBcInVpLXN0YXRlLWhvdmVyXCIgKTtcclxuXHRcdFx0dGhpcy5mb2N1c2FibGUucmVtb3ZlQ2xhc3MoIFwidWktc3RhdGUtZm9jdXNcIiApO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiB0aGlzO1xyXG5cdH0sXHJcblxyXG5cdGVuYWJsZTogZnVuY3Rpb24oKSB7XHJcblx0XHRyZXR1cm4gdGhpcy5fc2V0T3B0aW9ucyh7IGRpc2FibGVkOiBmYWxzZSB9KTtcclxuXHR9LFxyXG5cdGRpc2FibGU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0cmV0dXJuIHRoaXMuX3NldE9wdGlvbnMoeyBkaXNhYmxlZDogdHJ1ZSB9KTtcclxuXHR9LFxyXG5cclxuXHRfb246IGZ1bmN0aW9uKCBzdXBwcmVzc0Rpc2FibGVkQ2hlY2ssIGVsZW1lbnQsIGhhbmRsZXJzICkge1xyXG5cdFx0dmFyIGRlbGVnYXRlRWxlbWVudCxcclxuXHRcdFx0aW5zdGFuY2UgPSB0aGlzO1xyXG5cclxuXHRcdC8vIG5vIHN1cHByZXNzRGlzYWJsZWRDaGVjayBmbGFnLCBzaHVmZmxlIGFyZ3VtZW50c1xyXG5cdFx0aWYgKCB0eXBlb2Ygc3VwcHJlc3NEaXNhYmxlZENoZWNrICE9PSBcImJvb2xlYW5cIiApIHtcclxuXHRcdFx0aGFuZGxlcnMgPSBlbGVtZW50O1xyXG5cdFx0XHRlbGVtZW50ID0gc3VwcHJlc3NEaXNhYmxlZENoZWNrO1xyXG5cdFx0XHRzdXBwcmVzc0Rpc2FibGVkQ2hlY2sgPSBmYWxzZTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBubyBlbGVtZW50IGFyZ3VtZW50LCBzaHVmZmxlIGFuZCB1c2UgdGhpcy5lbGVtZW50XHJcblx0XHRpZiAoICFoYW5kbGVycyApIHtcclxuXHRcdFx0aGFuZGxlcnMgPSBlbGVtZW50O1xyXG5cdFx0XHRlbGVtZW50ID0gdGhpcy5lbGVtZW50O1xyXG5cdFx0XHRkZWxlZ2F0ZUVsZW1lbnQgPSB0aGlzLndpZGdldCgpO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0Ly8gYWNjZXB0IHNlbGVjdG9ycywgRE9NIGVsZW1lbnRzXHJcblx0XHRcdGVsZW1lbnQgPSBkZWxlZ2F0ZUVsZW1lbnQgPSAkKCBlbGVtZW50ICk7XHJcblx0XHRcdHRoaXMuYmluZGluZ3MgPSB0aGlzLmJpbmRpbmdzLmFkZCggZWxlbWVudCApO1xyXG5cdFx0fVxyXG5cclxuXHRcdCQuZWFjaCggaGFuZGxlcnMsIGZ1bmN0aW9uKCBldmVudCwgaGFuZGxlciApIHtcclxuXHRcdFx0ZnVuY3Rpb24gaGFuZGxlclByb3h5KCkge1xyXG5cdFx0XHRcdC8vIGFsbG93IHdpZGdldHMgdG8gY3VzdG9taXplIHRoZSBkaXNhYmxlZCBoYW5kbGluZ1xyXG5cdFx0XHRcdC8vIC0gZGlzYWJsZWQgYXMgYW4gYXJyYXkgaW5zdGVhZCBvZiBib29sZWFuXHJcblx0XHRcdFx0Ly8gLSBkaXNhYmxlZCBjbGFzcyBhcyBtZXRob2QgZm9yIGRpc2FibGluZyBpbmRpdmlkdWFsIHBhcnRzXHJcblx0XHRcdFx0aWYgKCAhc3VwcHJlc3NEaXNhYmxlZENoZWNrICYmXHJcblx0XHRcdFx0XHRcdCggaW5zdGFuY2Uub3B0aW9ucy5kaXNhYmxlZCA9PT0gdHJ1ZSB8fFxyXG5cdFx0XHRcdFx0XHRcdCQoIHRoaXMgKS5oYXNDbGFzcyggXCJ1aS1zdGF0ZS1kaXNhYmxlZFwiICkgKSApIHtcclxuXHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0cmV0dXJuICggdHlwZW9mIGhhbmRsZXIgPT09IFwic3RyaW5nXCIgPyBpbnN0YW5jZVsgaGFuZGxlciBdIDogaGFuZGxlciApXHJcblx0XHRcdFx0XHQuYXBwbHkoIGluc3RhbmNlLCBhcmd1bWVudHMgKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gY29weSB0aGUgZ3VpZCBzbyBkaXJlY3QgdW5iaW5kaW5nIHdvcmtzXHJcblx0XHRcdGlmICggdHlwZW9mIGhhbmRsZXIgIT09IFwic3RyaW5nXCIgKSB7XHJcblx0XHRcdFx0aGFuZGxlclByb3h5Lmd1aWQgPSBoYW5kbGVyLmd1aWQgPVxyXG5cdFx0XHRcdFx0aGFuZGxlci5ndWlkIHx8IGhhbmRsZXJQcm94eS5ndWlkIHx8ICQuZ3VpZCsrO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHR2YXIgbWF0Y2ggPSBldmVudC5tYXRjaCggL14oXFx3KylcXHMqKC4qKSQvICksXHJcblx0XHRcdFx0ZXZlbnROYW1lID0gbWF0Y2hbMV0gKyBpbnN0YW5jZS5ldmVudE5hbWVzcGFjZSxcclxuXHRcdFx0XHRzZWxlY3RvciA9IG1hdGNoWzJdO1xyXG5cdFx0XHRpZiAoIHNlbGVjdG9yICkge1xyXG5cdFx0XHRcdGRlbGVnYXRlRWxlbWVudC5kZWxlZ2F0ZSggc2VsZWN0b3IsIGV2ZW50TmFtZSwgaGFuZGxlclByb3h5ICk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0ZWxlbWVudC5iaW5kKCBldmVudE5hbWUsIGhhbmRsZXJQcm94eSApO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHR9LFxyXG5cclxuXHRfb2ZmOiBmdW5jdGlvbiggZWxlbWVudCwgZXZlbnROYW1lICkge1xyXG5cdFx0ZXZlbnROYW1lID0gKGV2ZW50TmFtZSB8fCBcIlwiKS5zcGxpdCggXCIgXCIgKS5qb2luKCB0aGlzLmV2ZW50TmFtZXNwYWNlICsgXCIgXCIgKSArIHRoaXMuZXZlbnROYW1lc3BhY2U7XHJcblx0XHRlbGVtZW50LnVuYmluZCggZXZlbnROYW1lICkudW5kZWxlZ2F0ZSggZXZlbnROYW1lICk7XHJcblx0fSxcclxuXHJcblx0X2RlbGF5OiBmdW5jdGlvbiggaGFuZGxlciwgZGVsYXkgKSB7XHJcblx0XHRmdW5jdGlvbiBoYW5kbGVyUHJveHkoKSB7XHJcblx0XHRcdHJldHVybiAoIHR5cGVvZiBoYW5kbGVyID09PSBcInN0cmluZ1wiID8gaW5zdGFuY2VbIGhhbmRsZXIgXSA6IGhhbmRsZXIgKVxyXG5cdFx0XHRcdC5hcHBseSggaW5zdGFuY2UsIGFyZ3VtZW50cyApO1xyXG5cdFx0fVxyXG5cdFx0dmFyIGluc3RhbmNlID0gdGhpcztcclxuXHRcdHJldHVybiBzZXRUaW1lb3V0KCBoYW5kbGVyUHJveHksIGRlbGF5IHx8IDAgKTtcclxuXHR9LFxyXG5cclxuXHRfaG92ZXJhYmxlOiBmdW5jdGlvbiggZWxlbWVudCApIHtcclxuXHRcdHRoaXMuaG92ZXJhYmxlID0gdGhpcy5ob3ZlcmFibGUuYWRkKCBlbGVtZW50ICk7XHJcblx0XHR0aGlzLl9vbiggZWxlbWVudCwge1xyXG5cdFx0XHRtb3VzZWVudGVyOiBmdW5jdGlvbiggZXZlbnQgKSB7XHJcblx0XHRcdFx0JCggZXZlbnQuY3VycmVudFRhcmdldCApLmFkZENsYXNzKCBcInVpLXN0YXRlLWhvdmVyXCIgKTtcclxuXHRcdFx0fSxcclxuXHRcdFx0bW91c2VsZWF2ZTogZnVuY3Rpb24oIGV2ZW50ICkge1xyXG5cdFx0XHRcdCQoIGV2ZW50LmN1cnJlbnRUYXJnZXQgKS5yZW1vdmVDbGFzcyggXCJ1aS1zdGF0ZS1ob3ZlclwiICk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdH0sXHJcblxyXG5cdF9mb2N1c2FibGU6IGZ1bmN0aW9uKCBlbGVtZW50ICkge1xyXG5cdFx0dGhpcy5mb2N1c2FibGUgPSB0aGlzLmZvY3VzYWJsZS5hZGQoIGVsZW1lbnQgKTtcclxuXHRcdHRoaXMuX29uKCBlbGVtZW50LCB7XHJcblx0XHRcdGZvY3VzaW46IGZ1bmN0aW9uKCBldmVudCApIHtcclxuXHRcdFx0XHQkKCBldmVudC5jdXJyZW50VGFyZ2V0ICkuYWRkQ2xhc3MoIFwidWktc3RhdGUtZm9jdXNcIiApO1xyXG5cdFx0XHR9LFxyXG5cdFx0XHRmb2N1c291dDogZnVuY3Rpb24oIGV2ZW50ICkge1xyXG5cdFx0XHRcdCQoIGV2ZW50LmN1cnJlbnRUYXJnZXQgKS5yZW1vdmVDbGFzcyggXCJ1aS1zdGF0ZS1mb2N1c1wiICk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdH0sXHJcblxyXG5cdF90cmlnZ2VyOiBmdW5jdGlvbiggdHlwZSwgZXZlbnQsIGRhdGEgKSB7XHJcblx0XHR2YXIgcHJvcCwgb3JpZyxcclxuXHRcdFx0Y2FsbGJhY2sgPSB0aGlzLm9wdGlvbnNbIHR5cGUgXTtcclxuXHJcblx0XHRkYXRhID0gZGF0YSB8fCB7fTtcclxuXHRcdGV2ZW50ID0gJC5FdmVudCggZXZlbnQgKTtcclxuXHRcdGV2ZW50LnR5cGUgPSAoIHR5cGUgPT09IHRoaXMud2lkZ2V0RXZlbnRQcmVmaXggP1xyXG5cdFx0XHR0eXBlIDpcclxuXHRcdFx0dGhpcy53aWRnZXRFdmVudFByZWZpeCArIHR5cGUgKS50b0xvd2VyQ2FzZSgpO1xyXG5cdFx0Ly8gdGhlIG9yaWdpbmFsIGV2ZW50IG1heSBjb21lIGZyb20gYW55IGVsZW1lbnRcclxuXHRcdC8vIHNvIHdlIG5lZWQgdG8gcmVzZXQgdGhlIHRhcmdldCBvbiB0aGUgbmV3IGV2ZW50XHJcblx0XHRldmVudC50YXJnZXQgPSB0aGlzLmVsZW1lbnRbIDAgXTtcclxuXHJcblx0XHQvLyBjb3B5IG9yaWdpbmFsIGV2ZW50IHByb3BlcnRpZXMgb3ZlciB0byB0aGUgbmV3IGV2ZW50XHJcblx0XHRvcmlnID0gZXZlbnQub3JpZ2luYWxFdmVudDtcclxuXHRcdGlmICggb3JpZyApIHtcclxuXHRcdFx0Zm9yICggcHJvcCBpbiBvcmlnICkge1xyXG5cdFx0XHRcdGlmICggISggcHJvcCBpbiBldmVudCApICkge1xyXG5cdFx0XHRcdFx0ZXZlbnRbIHByb3AgXSA9IG9yaWdbIHByb3AgXTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLmVsZW1lbnQudHJpZ2dlciggZXZlbnQsIGRhdGEgKTtcclxuXHRcdHJldHVybiAhKCAkLmlzRnVuY3Rpb24oIGNhbGxiYWNrICkgJiZcclxuXHRcdFx0Y2FsbGJhY2suYXBwbHkoIHRoaXMuZWxlbWVudFswXSwgWyBldmVudCBdLmNvbmNhdCggZGF0YSApICkgPT09IGZhbHNlIHx8XHJcblx0XHRcdGV2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpICk7XHJcblx0fVxyXG59O1xyXG5cclxuJC5lYWNoKCB7IHNob3c6IFwiZmFkZUluXCIsIGhpZGU6IFwiZmFkZU91dFwiIH0sIGZ1bmN0aW9uKCBtZXRob2QsIGRlZmF1bHRFZmZlY3QgKSB7XHJcblx0JC5XaWRnZXQucHJvdG90eXBlWyBcIl9cIiArIG1ldGhvZCBdID0gZnVuY3Rpb24oIGVsZW1lbnQsIG9wdGlvbnMsIGNhbGxiYWNrICkge1xyXG5cdFx0aWYgKCB0eXBlb2Ygb3B0aW9ucyA9PT0gXCJzdHJpbmdcIiApIHtcclxuXHRcdFx0b3B0aW9ucyA9IHsgZWZmZWN0OiBvcHRpb25zIH07XHJcblx0XHR9XHJcblx0XHR2YXIgaGFzT3B0aW9ucyxcclxuXHRcdFx0ZWZmZWN0TmFtZSA9ICFvcHRpb25zID9cclxuXHRcdFx0XHRtZXRob2QgOlxyXG5cdFx0XHRcdG9wdGlvbnMgPT09IHRydWUgfHwgdHlwZW9mIG9wdGlvbnMgPT09IFwibnVtYmVyXCIgP1xyXG5cdFx0XHRcdFx0ZGVmYXVsdEVmZmVjdCA6XHJcblx0XHRcdFx0XHRvcHRpb25zLmVmZmVjdCB8fCBkZWZhdWx0RWZmZWN0O1xyXG5cdFx0b3B0aW9ucyA9IG9wdGlvbnMgfHwge307XHJcblx0XHRpZiAoIHR5cGVvZiBvcHRpb25zID09PSBcIm51bWJlclwiICkge1xyXG5cdFx0XHRvcHRpb25zID0geyBkdXJhdGlvbjogb3B0aW9ucyB9O1xyXG5cdFx0fVxyXG5cdFx0aGFzT3B0aW9ucyA9ICEkLmlzRW1wdHlPYmplY3QoIG9wdGlvbnMgKTtcclxuXHRcdG9wdGlvbnMuY29tcGxldGUgPSBjYWxsYmFjaztcclxuXHRcdGlmICggb3B0aW9ucy5kZWxheSApIHtcclxuXHRcdFx0ZWxlbWVudC5kZWxheSggb3B0aW9ucy5kZWxheSApO1xyXG5cdFx0fVxyXG5cdFx0aWYgKCBoYXNPcHRpb25zICYmICQuZWZmZWN0cyAmJiAkLmVmZmVjdHMuZWZmZWN0WyBlZmZlY3ROYW1lIF0gKSB7XHJcblx0XHRcdGVsZW1lbnRbIG1ldGhvZCBdKCBvcHRpb25zICk7XHJcblx0XHR9IGVsc2UgaWYgKCBlZmZlY3ROYW1lICE9PSBtZXRob2QgJiYgZWxlbWVudFsgZWZmZWN0TmFtZSBdICkge1xyXG5cdFx0XHRlbGVtZW50WyBlZmZlY3ROYW1lIF0oIG9wdGlvbnMuZHVyYXRpb24sIG9wdGlvbnMuZWFzaW5nLCBjYWxsYmFjayApO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0ZWxlbWVudC5xdWV1ZShmdW5jdGlvbiggbmV4dCApIHtcclxuXHRcdFx0XHQkKCB0aGlzIClbIG1ldGhvZCBdKCk7XHJcblx0XHRcdFx0aWYgKCBjYWxsYmFjayApIHtcclxuXHRcdFx0XHRcdGNhbGxiYWNrLmNhbGwoIGVsZW1lbnRbIDAgXSApO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRuZXh0KCk7XHJcblx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cdH07XHJcbn0pO1xyXG5cclxufSkoIGpRdWVyeSApO1xyXG5cclxuKGZ1bmN0aW9uKCAkLCB3aW5kb3csIHVuZGVmaW5lZCApIHtcclxuXHR2YXIgbnNOb3JtYWxpemVEaWN0ID0ge30sXHJcblx0XHRvbGRGaW5kID0gJC5maW5kLFxyXG5cdFx0cmJyYWNlID0gLyg/Olxce1tcXHNcXFNdKlxcfXxcXFtbXFxzXFxTXSpcXF0pJC8sXHJcblx0XHRqcW1EYXRhUkUgPSAvOmpxbURhdGFcXCgoW14pXSopXFwpL2c7XHJcblxyXG5cdCQuZXh0ZW5kKCAkLm1vYmlsZSwge1xyXG5cclxuXHRcdC8vIE5hbWVzcGFjZSB1c2VkIGZyYW1ld29yay13aWRlIGZvciBkYXRhLWF0dHJzLiBEZWZhdWx0IGlzIG5vIG5hbWVzcGFjZVxyXG5cclxuXHRcdG5zOiBcIlwiLFxyXG5cclxuXHRcdC8vIFJldHJpZXZlIGFuIGF0dHJpYnV0ZSBmcm9tIGFuIGVsZW1lbnQgYW5kIHBlcmZvcm0gc29tZSBtYXNzYWdpbmcgb2YgdGhlIHZhbHVlXHJcblxyXG5cdFx0Z2V0QXR0cmlidXRlOiBmdW5jdGlvbiggZWxlbWVudCwga2V5ICkge1xyXG5cdFx0XHR2YXIgZGF0YTtcclxuXHJcblx0XHRcdGVsZW1lbnQgPSBlbGVtZW50LmpxdWVyeSA/IGVsZW1lbnRbMF0gOiBlbGVtZW50O1xyXG5cclxuXHRcdFx0aWYgKCBlbGVtZW50ICYmIGVsZW1lbnQuZ2V0QXR0cmlidXRlICkge1xyXG5cdFx0XHRcdGRhdGEgPSBlbGVtZW50LmdldEF0dHJpYnV0ZSggXCJkYXRhLVwiICsgJC5tb2JpbGUubnMgKyBrZXkgKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gQ29waWVkIGZyb20gY29yZSdzIHNyYy9kYXRhLmpzOmRhdGFBdHRyKClcclxuXHRcdFx0Ly8gQ29udmVydCBmcm9tIGEgc3RyaW5nIHRvIGEgcHJvcGVyIGRhdGEgdHlwZVxyXG5cdFx0XHR0cnkge1xyXG5cdFx0XHRcdGRhdGEgPSBkYXRhID09PSBcInRydWVcIiA/IHRydWUgOlxyXG5cdFx0XHRcdFx0ZGF0YSA9PT0gXCJmYWxzZVwiID8gZmFsc2UgOlxyXG5cdFx0XHRcdFx0ZGF0YSA9PT0gXCJudWxsXCIgPyBudWxsIDpcclxuXHRcdFx0XHRcdC8vIE9ubHkgY29udmVydCB0byBhIG51bWJlciBpZiBpdCBkb2Vzbid0IGNoYW5nZSB0aGUgc3RyaW5nXHJcblx0XHRcdFx0XHQrZGF0YSArIFwiXCIgPT09IGRhdGEgPyArZGF0YSA6XHJcblx0XHRcdFx0XHRyYnJhY2UudGVzdCggZGF0YSApID8gSlNPTi5wYXJzZSggZGF0YSApIDpcclxuXHRcdFx0XHRcdGRhdGE7XHJcblx0XHRcdH0gY2F0Y2goIGVyciApIHt9XHJcblxyXG5cdFx0XHRyZXR1cm4gZGF0YTtcclxuXHRcdH0sXHJcblxyXG5cdFx0Ly8gRXhwb3NlIG91ciBjYWNoZSBmb3IgdGVzdGluZyBwdXJwb3Nlcy5cclxuXHRcdG5zTm9ybWFsaXplRGljdDogbnNOb3JtYWxpemVEaWN0LFxyXG5cclxuXHRcdC8vIFRha2UgYSBkYXRhIGF0dHJpYnV0ZSBwcm9wZXJ0eSwgcHJlcGVuZCB0aGUgbmFtZXNwYWNlXHJcblx0XHQvLyBhbmQgdGhlbiBjYW1lbCBjYXNlIHRoZSBhdHRyaWJ1dGUgc3RyaW5nLiBBZGQgdGhlIHJlc3VsdFxyXG5cdFx0Ly8gdG8gb3VyIG5zTm9ybWFsaXplRGljdCBzbyB3ZSBkb24ndCBoYXZlIHRvIGRvIHRoaXMgYWdhaW4uXHJcblx0XHRuc05vcm1hbGl6ZTogZnVuY3Rpb24oIHByb3AgKSB7XHJcblx0XHRcdHJldHVybiBuc05vcm1hbGl6ZURpY3RbIHByb3AgXSB8fFxyXG5cdFx0XHRcdCggbnNOb3JtYWxpemVEaWN0WyBwcm9wIF0gPSAkLmNhbWVsQ2FzZSggJC5tb2JpbGUubnMgKyBwcm9wICkgKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0Ly8gRmluZCB0aGUgY2xvc2VzdCBqYXZhc2NyaXB0IHBhZ2UgZWxlbWVudCB0byBnYXRoZXIgc2V0dGluZ3MgZGF0YSBqc3BlcmYgdGVzdFxyXG5cdFx0Ly8gaHR0cDovL2pzcGVyZi5jb20vc2luZ2xlLWNvbXBsZXgtc2VsZWN0b3ItdnMtbWFueS1jb21wbGV4LXNlbGVjdG9ycy9lZGl0XHJcblx0XHQvLyBwb3NzaWJseSBuYWl2ZSwgYnV0IGl0IHNob3dzIHRoYXQgdGhlIHBhcnNpbmcgb3ZlcmhlYWQgZm9yICpqdXN0KiB0aGUgcGFnZSBzZWxlY3RvciB2c1xyXG5cdFx0Ly8gdGhlIHBhZ2UgYW5kIGRpYWxvZyBzZWxlY3RvciBpcyBuZWdsaWdhYmxlLiBUaGlzIGNvdWxkIHByb2JhYmx5IGJlIHNwZWVkIHVwIGJ5XHJcblx0XHQvLyBkb2luZyBhIHNpbWlsYXIgcGFyZW50IG5vZGUgdHJhdmVyc2FsIHRvIHRoZSBvbmUgZm91bmQgaW4gdGhlIGluaGVyaXRlZCB0aGVtZSBjb2RlIGFib3ZlXHJcblx0XHRjbG9zZXN0UGFnZURhdGE6IGZ1bmN0aW9uKCAkdGFyZ2V0ICkge1xyXG5cdFx0XHRyZXR1cm4gJHRhcmdldFxyXG5cdFx0XHRcdC5jbG9zZXN0KCBcIjpqcW1EYXRhKHJvbGU9J3BhZ2UnKSwgOmpxbURhdGEocm9sZT0nZGlhbG9nJylcIiApXHJcblx0XHRcdFx0LmRhdGEoIFwibW9iaWxlLXBhZ2VcIiApO1xyXG5cdFx0fVxyXG5cclxuXHR9KTtcclxuXHJcblx0Ly8gTW9iaWxlIHZlcnNpb24gb2YgZGF0YSBhbmQgcmVtb3ZlRGF0YSBhbmQgaGFzRGF0YSBtZXRob2RzXHJcblx0Ly8gZW5zdXJlcyBhbGwgZGF0YSBpcyBzZXQgYW5kIHJldHJpZXZlZCB1c2luZyBqUXVlcnkgTW9iaWxlJ3MgZGF0YSBuYW1lc3BhY2VcclxuXHQkLmZuLmpxbURhdGEgPSBmdW5jdGlvbiggcHJvcCwgdmFsdWUgKSB7XHJcblx0XHR2YXIgcmVzdWx0O1xyXG5cdFx0aWYgKCB0eXBlb2YgcHJvcCAhPT0gXCJ1bmRlZmluZWRcIiApIHtcclxuXHRcdFx0aWYgKCBwcm9wICkge1xyXG5cdFx0XHRcdHByb3AgPSAkLm1vYmlsZS5uc05vcm1hbGl6ZSggcHJvcCApO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyB1bmRlZmluZWQgaXMgcGVybWl0dGVkIGFzIGFuIGV4cGxpY2l0IGlucHV0IGZvciB0aGUgc2Vjb25kIHBhcmFtXHJcblx0XHRcdC8vIGluIHRoaXMgY2FzZSBpdCByZXR1cm5zIHRoZSB2YWx1ZSBhbmQgZG9lcyBub3Qgc2V0IGl0IHRvIHVuZGVmaW5lZFxyXG5cdFx0XHRpZiAoIGFyZ3VtZW50cy5sZW5ndGggPCAyIHx8IHZhbHVlID09PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdFx0cmVzdWx0ID0gdGhpcy5kYXRhKCBwcm9wICk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0cmVzdWx0ID0gdGhpcy5kYXRhKCBwcm9wLCB2YWx1ZSApO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gcmVzdWx0O1xyXG5cdH07XHJcblxyXG5cdCQuanFtRGF0YSA9IGZ1bmN0aW9uKCBlbGVtLCBwcm9wLCB2YWx1ZSApIHtcclxuXHRcdHZhciByZXN1bHQ7XHJcblx0XHRpZiAoIHR5cGVvZiBwcm9wICE9PSBcInVuZGVmaW5lZFwiICkge1xyXG5cdFx0XHRyZXN1bHQgPSAkLmRhdGEoIGVsZW0sIHByb3AgPyAkLm1vYmlsZS5uc05vcm1hbGl6ZSggcHJvcCApIDogcHJvcCwgdmFsdWUgKTtcclxuXHRcdH1cclxuXHRcdHJldHVybiByZXN1bHQ7XHJcblx0fTtcclxuXHJcblx0JC5mbi5qcW1SZW1vdmVEYXRhID0gZnVuY3Rpb24oIHByb3AgKSB7XHJcblx0XHRyZXR1cm4gdGhpcy5yZW1vdmVEYXRhKCAkLm1vYmlsZS5uc05vcm1hbGl6ZSggcHJvcCApICk7XHJcblx0fTtcclxuXHJcblx0JC5qcW1SZW1vdmVEYXRhID0gZnVuY3Rpb24oIGVsZW0sIHByb3AgKSB7XHJcblx0XHRyZXR1cm4gJC5yZW1vdmVEYXRhKCBlbGVtLCAkLm1vYmlsZS5uc05vcm1hbGl6ZSggcHJvcCApICk7XHJcblx0fTtcclxuXHJcblx0JC5maW5kID0gZnVuY3Rpb24oIHNlbGVjdG9yLCBjb250ZXh0LCByZXQsIGV4dHJhICkge1xyXG5cdFx0aWYgKCBzZWxlY3Rvci5pbmRleE9mKCBcIjpqcW1EYXRhXCIgKSA+IC0xICkge1xyXG5cdFx0XHRzZWxlY3RvciA9IHNlbGVjdG9yLnJlcGxhY2UoIGpxbURhdGFSRSwgXCJbZGF0YS1cIiArICggJC5tb2JpbGUubnMgfHwgXCJcIiApICsgXCIkMV1cIiApO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiBvbGRGaW5kLmNhbGwoIHRoaXMsIHNlbGVjdG9yLCBjb250ZXh0LCByZXQsIGV4dHJhICk7XHJcblx0fTtcclxuXHJcblx0JC5leHRlbmQoICQuZmluZCwgb2xkRmluZCApO1xyXG5cclxufSkoIGpRdWVyeSwgdGhpcyApO1xyXG5cclxuKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7XHJcblxyXG52YXIgcmNhcGl0YWxzID0gL1tBLVpdL2csXHJcblx0cmVwbGFjZUZ1bmN0aW9uID0gZnVuY3Rpb24oIGMgKSB7XHJcblx0XHRyZXR1cm4gXCItXCIgKyBjLnRvTG93ZXJDYXNlKCk7XHJcblx0fTtcclxuXHJcbiQuZXh0ZW5kKCAkLldpZGdldC5wcm90b3R5cGUsIHtcclxuXHRfZ2V0Q3JlYXRlT3B0aW9uczogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgb3B0aW9uLCB2YWx1ZSxcclxuXHRcdFx0ZWxlbSA9IHRoaXMuZWxlbWVudFsgMCBdLFxyXG5cdFx0XHRvcHRpb25zID0ge307XHJcblxyXG5cdFx0Ly9cclxuXHRcdGlmICggISQubW9iaWxlLmdldEF0dHJpYnV0ZSggZWxlbSwgXCJkZWZhdWx0c1wiICkgKSB7XHJcblx0XHRcdGZvciAoIG9wdGlvbiBpbiB0aGlzLm9wdGlvbnMgKSB7XHJcblx0XHRcdFx0dmFsdWUgPSAkLm1vYmlsZS5nZXRBdHRyaWJ1dGUoIGVsZW0sIG9wdGlvbi5yZXBsYWNlKCByY2FwaXRhbHMsIHJlcGxhY2VGdW5jdGlvbiApICk7XHJcblxyXG5cdFx0XHRcdGlmICggdmFsdWUgIT0gbnVsbCApIHtcclxuXHRcdFx0XHRcdG9wdGlvbnNbIG9wdGlvbiBdID0gdmFsdWU7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIG9wdGlvbnM7XHJcblx0fVxyXG59KTtcclxuXHJcbi8vVE9ETzogUmVtb3ZlIGluIDEuNSBmb3IgYmFja2NvbXBhdCBvbmx5XHJcbiQubW9iaWxlLndpZGdldCA9ICQuV2lkZ2V0O1xyXG5cclxufSkoIGpRdWVyeSApO1xyXG5cclxuXHJcbihmdW5jdGlvbiggJCApIHtcclxuXHQvLyBUT0RPIG1vdmUgbG9hZGVyIGNsYXNzIGRvd24gaW50byB0aGUgd2lkZ2V0IHNldHRpbmdzXHJcblx0dmFyIGxvYWRlckNsYXNzID0gXCJ1aS1sb2FkZXJcIiwgJGh0bWwgPSAkKCBcImh0bWxcIiApO1xyXG5cclxuXHQkLndpZGdldCggXCJtb2JpbGUubG9hZGVyXCIsIHtcclxuXHRcdC8vIE5PVEUgaWYgdGhlIGdsb2JhbCBjb25maWcgc2V0dGluZ3MgYXJlIGRlZmluZWQgdGhleSB3aWxsIG92ZXJyaWRlIHRoZXNlXHJcblx0XHQvLyAgICAgIG9wdGlvbnNcclxuXHRcdG9wdGlvbnM6IHtcclxuXHRcdFx0Ly8gdGhlIHRoZW1lIGZvciB0aGUgbG9hZGluZyBtZXNzYWdlXHJcblx0XHRcdHRoZW1lOiBcImFcIixcclxuXHJcblx0XHRcdC8vIHdoZXRoZXIgdGhlIHRleHQgaW4gdGhlIGxvYWRpbmcgbWVzc2FnZSBpcyBzaG93blxyXG5cdFx0XHR0ZXh0VmlzaWJsZTogZmFsc2UsXHJcblxyXG5cdFx0XHQvLyBjdXN0b20gaHRtbCBmb3IgdGhlIGlubmVyIGNvbnRlbnQgb2YgdGhlIGxvYWRpbmcgbWVzc2FnZVxyXG5cdFx0XHRodG1sOiBcIlwiLFxyXG5cclxuXHRcdFx0Ly8gdGhlIHRleHQgdG8gYmUgZGlzcGxheWVkIHdoZW4gdGhlIHBvcHVwIGlzIHNob3duXHJcblx0XHRcdHRleHQ6IFwibG9hZGluZ1wiXHJcblx0XHR9LFxyXG5cclxuXHRcdGRlZmF1bHRIdG1sOiBcIjxkaXYgY2xhc3M9J1wiICsgbG9hZGVyQ2xhc3MgKyBcIic+XCIgK1xyXG5cdFx0XHRcIjxzcGFuIGNsYXNzPSd1aS1pY29uLWxvYWRpbmcnPjwvc3Bhbj5cIiArXHJcblx0XHRcdFwiPGgxPjwvaDE+XCIgK1xyXG5cdFx0XHRcIjwvZGl2PlwiLFxyXG5cclxuXHRcdC8vIEZvciBub24tZml4ZWQgc3VwcG9ydGluIGJyb3dzZXJzLiBQb3NpdGlvbiBhdCB5IGNlbnRlciAoaWYgc2Nyb2xsVG9wIHN1cHBvcnRlZCksIGFib3ZlIHRoZSBhY3RpdmVCdG4gKGlmIGRlZmluZWQpLCBvciBqdXN0IDEwMHB4IGZyb20gdG9wXHJcblx0XHRmYWtlRml4TG9hZGVyOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dmFyIGFjdGl2ZUJ0biA9ICQoIFwiLlwiICsgJC5tb2JpbGUuYWN0aXZlQnRuQ2xhc3MgKS5maXJzdCgpO1xyXG5cclxuXHRcdFx0dGhpcy5lbGVtZW50XHJcblx0XHRcdFx0LmNzcyh7XHJcblx0XHRcdFx0XHR0b3A6ICQuc3VwcG9ydC5zY3JvbGxUb3AgJiYgdGhpcy53aW5kb3cuc2Nyb2xsVG9wKCkgKyB0aGlzLndpbmRvdy5oZWlnaHQoKSAvIDIgfHxcclxuXHRcdFx0XHRcdFx0YWN0aXZlQnRuLmxlbmd0aCAmJiBhY3RpdmVCdG4ub2Zmc2V0KCkudG9wIHx8IDEwMFxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0fSxcclxuXHJcblx0XHQvLyBjaGVjayBwb3NpdGlvbiBvZiBsb2FkZXIgdG8gc2VlIGlmIGl0IGFwcGVhcnMgdG8gYmUgXCJmaXhlZFwiIHRvIGNlbnRlclxyXG5cdFx0Ly8gaWYgbm90LCB1c2UgYWJzIHBvc2l0aW9uaW5nXHJcblx0XHRjaGVja0xvYWRlclBvc2l0aW9uOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dmFyIG9mZnNldCA9IHRoaXMuZWxlbWVudC5vZmZzZXQoKSxcclxuXHRcdFx0XHRzY3JvbGxUb3AgPSB0aGlzLndpbmRvdy5zY3JvbGxUb3AoKSxcclxuXHRcdFx0XHRzY3JlZW5IZWlnaHQgPSAkLm1vYmlsZS5nZXRTY3JlZW5IZWlnaHQoKTtcclxuXHJcblx0XHRcdGlmICggb2Zmc2V0LnRvcCA8IHNjcm9sbFRvcCB8fCAoIG9mZnNldC50b3AgLSBzY3JvbGxUb3AgKSA+IHNjcmVlbkhlaWdodCApIHtcclxuXHRcdFx0XHR0aGlzLmVsZW1lbnQuYWRkQ2xhc3MoIFwidWktbG9hZGVyLWZha2VmaXhcIiApO1xyXG5cdFx0XHRcdHRoaXMuZmFrZUZpeExvYWRlcigpO1xyXG5cdFx0XHRcdHRoaXMud2luZG93XHJcblx0XHRcdFx0XHQudW5iaW5kKCBcInNjcm9sbFwiLCB0aGlzLmNoZWNrTG9hZGVyUG9zaXRpb24gKVxyXG5cdFx0XHRcdFx0LmJpbmQoIFwic2Nyb2xsXCIsICQucHJveHkoIHRoaXMuZmFrZUZpeExvYWRlciwgdGhpcyApICk7XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblxyXG5cdFx0cmVzZXRIdG1sOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dGhpcy5lbGVtZW50Lmh0bWwoICQoIHRoaXMuZGVmYXVsdEh0bWwgKS5odG1sKCkgKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0Ly8gVHVybiBvbi9vZmYgcGFnZSBsb2FkaW5nIG1lc3NhZ2UuIFRoZW1lIGRvdWJsZXMgYXMgYW4gb2JqZWN0IGFyZ3VtZW50XHJcblx0XHQvLyB3aXRoIHRoZSBmb2xsb3dpbmcgc2hhcGU6IHsgdGhlbWU6ICcnLCB0ZXh0OiAnJywgaHRtbDogJycsIHRleHRWaXNpYmxlOiAnJyB9XHJcblx0XHQvLyBOT1RFIHRoYXQgdGhlICQubW9iaWxlLmxvYWRpbmcqIHNldHRpbmdzIGFuZCBwYXJhbXMgcGFzdCB0aGUgZmlyc3QgYXJlIGRlcHJlY2F0ZWRcclxuXHRcdC8vIFRPRE8gc3dlZXQgamVzdXMgd2UgbmVlZCB0byBicmVhayBzb21lIG9mIHRoaXMgb3V0XHJcblx0XHRzaG93OiBmdW5jdGlvbiggdGhlbWUsIG1zZ1RleHQsIHRleHRvbmx5ICkge1xyXG5cdFx0XHR2YXIgdGV4dFZpc2libGUsIG1lc3NhZ2UsIGxvYWRTZXR0aW5ncztcclxuXHJcblx0XHRcdHRoaXMucmVzZXRIdG1sKCk7XHJcblxyXG5cdFx0XHQvLyB1c2UgdGhlIHByb3RvdHlwZSBvcHRpb25zIHNvIHRoYXQgcGVvcGxlIGNhbiBzZXQgdGhlbSBnbG9iYWxseSBhdFxyXG5cdFx0XHQvLyBtb2JpbGUgaW5pdC4gQ29uc2lzdGVuY3ksIGl0J3Mgd2hhdCdzIGZvciBkaW5uZXJcclxuXHRcdFx0aWYgKCAkLnR5cGUoIHRoZW1lICkgPT09IFwib2JqZWN0XCIgKSB7XHJcblx0XHRcdFx0bG9hZFNldHRpbmdzID0gJC5leHRlbmQoIHt9LCB0aGlzLm9wdGlvbnMsIHRoZW1lICk7XHJcblxyXG5cdFx0XHRcdHRoZW1lID0gbG9hZFNldHRpbmdzLnRoZW1lO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdGxvYWRTZXR0aW5ncyA9IHRoaXMub3B0aW9ucztcclxuXHJcblx0XHRcdFx0Ly8gaGVyZSB3ZSBwcmVmZXIgdGhlIHRoZW1lIHZhbHVlIHBhc3NlZCBhcyBhIHN0cmluZyBhcmd1bWVudCwgdGhlblxyXG5cdFx0XHRcdC8vIHdlIHByZWZlciB0aGUgZ2xvYmFsIG9wdGlvbiBiZWNhdXNlIHdlIGNhbid0IHVzZSB1bmRlZmluZWQgZGVmYXVsdFxyXG5cdFx0XHRcdC8vIHByb3RvdHlwZSBvcHRpb25zLCB0aGVuIHRoZSBwcm90b3R5cGUgb3B0aW9uXHJcblx0XHRcdFx0dGhlbWUgPSB0aGVtZSB8fCBsb2FkU2V0dGluZ3MudGhlbWU7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIHNldCB0aGUgbWVzc2FnZSB0ZXh0LCBwcmVmZXIgdGhlIHBhcmFtLCB0aGVuIHRoZSBzZXR0aW5ncyBvYmplY3RcclxuXHRcdFx0Ly8gdGhlbiBsb2FkaW5nIG1lc3NhZ2VcclxuXHRcdFx0bWVzc2FnZSA9IG1zZ1RleHQgfHwgKCBsb2FkU2V0dGluZ3MudGV4dCA9PT0gZmFsc2UgPyBcIlwiIDogbG9hZFNldHRpbmdzLnRleHQgKTtcclxuXHJcblx0XHRcdC8vIHByZXBhcmUgdGhlIGRvbVxyXG5cdFx0XHQkaHRtbC5hZGRDbGFzcyggXCJ1aS1sb2FkaW5nXCIgKTtcclxuXHJcblx0XHRcdHRleHRWaXNpYmxlID0gbG9hZFNldHRpbmdzLnRleHRWaXNpYmxlO1xyXG5cclxuXHRcdFx0Ly8gYWRkIHRoZSBwcm9wZXIgY3NzIGdpdmVuIHRoZSBvcHRpb25zICh0aGVtZSwgdGV4dCwgZXRjKVxyXG5cdFx0XHQvLyBGb3JjZSB0ZXh0IHZpc2liaWxpdHkgaWYgdGhlIHNlY29uZCBhcmd1bWVudCB3YXMgc3VwcGxpZWQsIG9yXHJcblx0XHRcdC8vIGlmIHRoZSB0ZXh0IHdhcyBleHBsaWNpdGx5IHNldCBpbiB0aGUgb2JqZWN0IGFyZ3NcclxuXHRcdFx0dGhpcy5lbGVtZW50LmF0dHIoXCJjbGFzc1wiLCBsb2FkZXJDbGFzcyArXHJcblx0XHRcdFx0XCIgdWktY29ybmVyLWFsbCB1aS1ib2R5LVwiICsgdGhlbWUgK1xyXG5cdFx0XHRcdFwiIHVpLWxvYWRlci1cIiArICggdGV4dFZpc2libGUgfHwgbXNnVGV4dCB8fCB0aGVtZS50ZXh0ID8gXCJ2ZXJib3NlXCIgOiBcImRlZmF1bHRcIiApICtcclxuXHRcdFx0XHQoIGxvYWRTZXR0aW5ncy50ZXh0b25seSB8fCB0ZXh0b25seSA/IFwiIHVpLWxvYWRlci10ZXh0b25seVwiIDogXCJcIiApICk7XHJcblxyXG5cdFx0XHQvLyBUT0RPIHZlcmlmeSB0aGF0IGpxdWVyeS5mbi5odG1sIGlzIG9rIHRvIHVzZSBpbiBib3RoIGNhc2VzIGhlcmVcclxuXHRcdFx0Ly8gICAgICB0aGlzIG1pZ2h0IGJlIG92ZXJseSBkZWZlbnNpdmUgaW4gcHJldmVudGluZyB1bmtub3dpbmcgeHNzXHJcblx0XHRcdC8vIGlmIHRoZSBodG1sIGF0dHJpYnV0ZSBpcyBkZWZpbmVkIG9uIHRoZSBsb2FkaW5nIHNldHRpbmdzLCB1c2UgdGhhdFxyXG5cdFx0XHQvLyBvdGhlcndpc2UgdXNlIHRoZSBmYWxsYmFja3MgZnJvbSBhYm92ZVxyXG5cdFx0XHRpZiAoIGxvYWRTZXR0aW5ncy5odG1sICkge1xyXG5cdFx0XHRcdHRoaXMuZWxlbWVudC5odG1sKCBsb2FkU2V0dGluZ3MuaHRtbCApO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdHRoaXMuZWxlbWVudC5maW5kKCBcImgxXCIgKS50ZXh0KCBtZXNzYWdlICk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIElmIHRoZSBwYWdlY29udGFpbmVyIHdpZGdldCBoYXMgYmVlbiBkZWZpbmVkIHdlIG1heSB1c2UgdGhlIDptb2JpbGUtcGFnZWNvbnRhaW5lclxyXG5cdFx0XHQvLyBhbmQgYXR0YWNoIHRvIHRoZSBlbGVtZW50IG9uIHdoaWNoIHRoZSBwYWdlY29udGFpbmVyIHdpZGdldCBoYXMgYmVlbiBkZWZpbmVkLiBJZiBub3QsXHJcblx0XHRcdC8vIHdlIGF0dGFjaCB0byB0aGUgYm9keS5cclxuXHRcdFx0dGhpcy5lbGVtZW50LmFwcGVuZFRvKCAkLm1vYmlsZS5wYWdlY29udGFpbmVyID9cclxuXHRcdFx0XHQkKCBcIjptb2JpbGUtcGFnZWNvbnRhaW5lclwiICkgOiAkKCBcImJvZHlcIiApICk7XHJcblxyXG5cdFx0XHQvLyBjaGVjayB0aGF0IHRoZSBsb2FkZXIgaXMgdmlzaWJsZVxyXG5cdFx0XHR0aGlzLmNoZWNrTG9hZGVyUG9zaXRpb24oKTtcclxuXHJcblx0XHRcdC8vIG9uIHNjcm9sbCBjaGVjayB0aGUgbG9hZGVyIHBvc2l0aW9uXHJcblx0XHRcdHRoaXMud2luZG93LmJpbmQoIFwic2Nyb2xsXCIsICQucHJveHkoIHRoaXMuY2hlY2tMb2FkZXJQb3NpdGlvbiwgdGhpcyApICk7XHJcblx0XHR9LFxyXG5cclxuXHRcdGhpZGU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHQkaHRtbC5yZW1vdmVDbGFzcyggXCJ1aS1sb2FkaW5nXCIgKTtcclxuXHJcblx0XHRcdGlmICggdGhpcy5vcHRpb25zLnRleHQgKSB7XHJcblx0XHRcdFx0dGhpcy5lbGVtZW50LnJlbW92ZUNsYXNzKCBcInVpLWxvYWRlci1mYWtlZml4XCIgKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0dGhpcy53aW5kb3cudW5iaW5kKCBcInNjcm9sbFwiLCB0aGlzLmZha2VGaXhMb2FkZXIgKTtcclxuXHRcdFx0dGhpcy53aW5kb3cudW5iaW5kKCBcInNjcm9sbFwiLCB0aGlzLmNoZWNrTG9hZGVyUG9zaXRpb24gKTtcclxuXHRcdH1cclxuXHR9KTtcclxuXHJcbn0pKGpRdWVyeSwgdGhpcyk7XHJcblxyXG5cclxuLyohXHJcbiAqIGpRdWVyeSBoYXNoY2hhbmdlIGV2ZW50IC0gdjEuMyAtIDcvMjEvMjAxMFxyXG4gKiBodHRwOi8vYmVuYWxtYW4uY29tL3Byb2plY3RzL2pxdWVyeS1oYXNoY2hhbmdlLXBsdWdpbi9cclxuICogXHJcbiAqIENvcHlyaWdodCAoYykgMjAxMCBcIkNvd2JveVwiIEJlbiBBbG1hblxyXG4gKiBEdWFsIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgYW5kIEdQTCBsaWNlbnNlcy5cclxuICogaHR0cDovL2JlbmFsbWFuLmNvbS9hYm91dC9saWNlbnNlL1xyXG4gKi9cclxuXHJcbi8vIFNjcmlwdDogalF1ZXJ5IGhhc2hjaGFuZ2UgZXZlbnRcclxuLy9cclxuLy8gKlZlcnNpb246IDEuMywgTGFzdCB1cGRhdGVkOiA3LzIxLzIwMTAqXHJcbi8vIFxyXG4vLyBQcm9qZWN0IEhvbWUgLSBodHRwOi8vYmVuYWxtYW4uY29tL3Byb2plY3RzL2pxdWVyeS1oYXNoY2hhbmdlLXBsdWdpbi9cclxuLy8gR2l0SHViICAgICAgIC0gaHR0cDovL2dpdGh1Yi5jb20vY293Ym95L2pxdWVyeS1oYXNoY2hhbmdlL1xyXG4vLyBTb3VyY2UgICAgICAgLSBodHRwOi8vZ2l0aHViLmNvbS9jb3dib3kvanF1ZXJ5LWhhc2hjaGFuZ2UvcmF3L21hc3Rlci9qcXVlcnkuYmEtaGFzaGNoYW5nZS5qc1xyXG4vLyAoTWluaWZpZWQpICAgLSBodHRwOi8vZ2l0aHViLmNvbS9jb3dib3kvanF1ZXJ5LWhhc2hjaGFuZ2UvcmF3L21hc3Rlci9qcXVlcnkuYmEtaGFzaGNoYW5nZS5taW4uanMgKDAuOGtiIGd6aXBwZWQpXHJcbi8vIFxyXG4vLyBBYm91dDogTGljZW5zZVxyXG4vLyBcclxuLy8gQ29weXJpZ2h0IChjKSAyMDEwIFwiQ293Ym95XCIgQmVuIEFsbWFuLFxyXG4vLyBEdWFsIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgYW5kIEdQTCBsaWNlbnNlcy5cclxuLy8gaHR0cDovL2JlbmFsbWFuLmNvbS9hYm91dC9saWNlbnNlL1xyXG4vLyBcclxuLy8gQWJvdXQ6IEV4YW1wbGVzXHJcbi8vIFxyXG4vLyBUaGVzZSB3b3JraW5nIGV4YW1wbGVzLCBjb21wbGV0ZSB3aXRoIGZ1bGx5IGNvbW1lbnRlZCBjb2RlLCBpbGx1c3RyYXRlIGEgZmV3XHJcbi8vIHdheXMgaW4gd2hpY2ggdGhpcyBwbHVnaW4gY2FuIGJlIHVzZWQuXHJcbi8vIFxyXG4vLyBoYXNoY2hhbmdlIGV2ZW50IC0gaHR0cDovL2JlbmFsbWFuLmNvbS9jb2RlL3Byb2plY3RzL2pxdWVyeS1oYXNoY2hhbmdlL2V4YW1wbGVzL2hhc2hjaGFuZ2UvXHJcbi8vIGRvY3VtZW50LmRvbWFpbiAtIGh0dHA6Ly9iZW5hbG1hbi5jb20vY29kZS9wcm9qZWN0cy9qcXVlcnktaGFzaGNoYW5nZS9leGFtcGxlcy9kb2N1bWVudF9kb21haW4vXHJcbi8vIFxyXG4vLyBBYm91dDogU3VwcG9ydCBhbmQgVGVzdGluZ1xyXG4vLyBcclxuLy8gSW5mb3JtYXRpb24gYWJvdXQgd2hhdCB2ZXJzaW9uIG9yIHZlcnNpb25zIG9mIGpRdWVyeSB0aGlzIHBsdWdpbiBoYXMgYmVlblxyXG4vLyB0ZXN0ZWQgd2l0aCwgd2hhdCBicm93c2VycyBpdCBoYXMgYmVlbiB0ZXN0ZWQgaW4sIGFuZCB3aGVyZSB0aGUgdW5pdCB0ZXN0c1xyXG4vLyByZXNpZGUgKHNvIHlvdSBjYW4gdGVzdCBpdCB5b3Vyc2VsZikuXHJcbi8vIFxyXG4vLyBqUXVlcnkgVmVyc2lvbnMgLSAxLjIuNiwgMS4zLjIsIDEuNC4xLCAxLjQuMlxyXG4vLyBCcm93c2VycyBUZXN0ZWQgLSBJbnRlcm5ldCBFeHBsb3JlciA2LTgsIEZpcmVmb3ggMi00LCBDaHJvbWUgNS02LCBTYWZhcmkgMy4yLTUsXHJcbi8vICAgICAgICAgICAgICAgICAgIE9wZXJhIDkuNi0xMC42MCwgaVBob25lIDMuMSwgQW5kcm9pZCAxLjYtMi4yLCBCbGFja0JlcnJ5IDQuNi01LlxyXG4vLyBVbml0IFRlc3RzICAgICAgLSBodHRwOi8vYmVuYWxtYW4uY29tL2NvZGUvcHJvamVjdHMvanF1ZXJ5LWhhc2hjaGFuZ2UvdW5pdC9cclxuLy8gXHJcbi8vIEFib3V0OiBLbm93biBpc3N1ZXNcclxuLy8gXHJcbi8vIFdoaWxlIHRoaXMgalF1ZXJ5IGhhc2hjaGFuZ2UgZXZlbnQgaW1wbGVtZW50YXRpb24gaXMgcXVpdGUgc3RhYmxlIGFuZFxyXG4vLyByb2J1c3QsIHRoZXJlIGFyZSBhIGZldyB1bmZvcnR1bmF0ZSBicm93c2VyIGJ1Z3Mgc3Vycm91bmRpbmcgZXhwZWN0ZWRcclxuLy8gaGFzaGNoYW5nZSBldmVudC1iYXNlZCBiZWhhdmlvcnMsIGluZGVwZW5kZW50IG9mIGFueSBKYXZhU2NyaXB0XHJcbi8vIHdpbmRvdy5vbmhhc2hjaGFuZ2UgYWJzdHJhY3Rpb24uIFNlZSB0aGUgZm9sbG93aW5nIGV4YW1wbGVzIGZvciBtb3JlXHJcbi8vIGluZm9ybWF0aW9uOlxyXG4vLyBcclxuLy8gQ2hyb21lOiBCYWNrIEJ1dHRvbiAtIGh0dHA6Ly9iZW5hbG1hbi5jb20vY29kZS9wcm9qZWN0cy9qcXVlcnktaGFzaGNoYW5nZS9leGFtcGxlcy9idWctY2hyb21lLWJhY2stYnV0dG9uL1xyXG4vLyBGaXJlZm94OiBSZW1vdGUgWE1MSHR0cFJlcXVlc3QgLSBodHRwOi8vYmVuYWxtYW4uY29tL2NvZGUvcHJvamVjdHMvanF1ZXJ5LWhhc2hjaGFuZ2UvZXhhbXBsZXMvYnVnLWZpcmVmb3gtcmVtb3RlLXhoci9cclxuLy8gV2ViS2l0OiBCYWNrIEJ1dHRvbiBpbiBhbiBJZnJhbWUgLSBodHRwOi8vYmVuYWxtYW4uY29tL2NvZGUvcHJvamVjdHMvanF1ZXJ5LWhhc2hjaGFuZ2UvZXhhbXBsZXMvYnVnLXdlYmtpdC1oYXNoLWlmcmFtZS9cclxuLy8gU2FmYXJpOiBCYWNrIEJ1dHRvbiBmcm9tIGEgZGlmZmVyZW50IGRvbWFpbiAtIGh0dHA6Ly9iZW5hbG1hbi5jb20vY29kZS9wcm9qZWN0cy9qcXVlcnktaGFzaGNoYW5nZS9leGFtcGxlcy9idWctc2FmYXJpLWJhY2stZnJvbS1kaWZmLWRvbWFpbi9cclxuLy8gXHJcbi8vIEFsc28gbm90ZSB0aGF0IHNob3VsZCBhIGJyb3dzZXIgbmF0aXZlbHkgc3VwcG9ydCB0aGUgd2luZG93Lm9uaGFzaGNoYW5nZSBcclxuLy8gZXZlbnQsIGJ1dCBub3QgcmVwb3J0IHRoYXQgaXQgZG9lcywgdGhlIGZhbGxiYWNrIHBvbGxpbmcgbG9vcCB3aWxsIGJlIHVzZWQuXHJcbi8vIFxyXG4vLyBBYm91dDogUmVsZWFzZSBIaXN0b3J5XHJcbi8vIFxyXG4vLyAxLjMgICAtICg3LzIxLzIwMTApIFJlb3JnYW5pemVkIElFNi83IElmcmFtZSBjb2RlIHRvIG1ha2UgaXQgbW9yZVxyXG4vLyAgICAgICAgIFwicmVtb3ZhYmxlXCIgZm9yIG1vYmlsZS1vbmx5IGRldmVsb3BtZW50LiBBZGRlZCBJRTYvNyBkb2N1bWVudC50aXRsZVxyXG4vLyAgICAgICAgIHN1cHBvcnQuIEF0dGVtcHRlZCB0byBtYWtlIElmcmFtZSBhcyBoaWRkZW4gYXMgcG9zc2libGUgYnkgdXNpbmdcclxuLy8gICAgICAgICB0ZWNobmlxdWVzIGZyb20gaHR0cDovL3d3dy5wYWNpZWxsb2dyb3VwLmNvbS9ibG9nLz9wPTYwNC4gQWRkZWQgXHJcbi8vICAgICAgICAgc3VwcG9ydCBmb3IgdGhlIFwic2hvcnRjdXRcIiBmb3JtYXQgJCh3aW5kb3cpLmhhc2hjaGFuZ2UoIGZuICkgYW5kXHJcbi8vICAgICAgICAgJCh3aW5kb3cpLmhhc2hjaGFuZ2UoKSBsaWtlIGpRdWVyeSBwcm92aWRlcyBmb3IgYnVpbHQtaW4gZXZlbnRzLlxyXG4vLyAgICAgICAgIFJlbmFtZWQgalF1ZXJ5Lmhhc2hjaGFuZ2VEZWxheSB0byA8alF1ZXJ5LmZuLmhhc2hjaGFuZ2UuZGVsYXk+IGFuZFxyXG4vLyAgICAgICAgIGxvd2VyZWQgaXRzIGRlZmF1bHQgdmFsdWUgdG8gNTAuIEFkZGVkIDxqUXVlcnkuZm4uaGFzaGNoYW5nZS5kb21haW4+XHJcbi8vICAgICAgICAgYW5kIDxqUXVlcnkuZm4uaGFzaGNoYW5nZS5zcmM+IHByb3BlcnRpZXMgcGx1cyBkb2N1bWVudC1kb21haW4uaHRtbFxyXG4vLyAgICAgICAgIGZpbGUgdG8gYWRkcmVzcyBhY2Nlc3MgZGVuaWVkIGlzc3VlcyB3aGVuIHNldHRpbmcgZG9jdW1lbnQuZG9tYWluIGluXHJcbi8vICAgICAgICAgSUU2LzcuXHJcbi8vIDEuMiAgIC0gKDIvMTEvMjAxMCkgRml4ZWQgYSBidWcgd2hlcmUgY29taW5nIGJhY2sgdG8gYSBwYWdlIHVzaW5nIHRoaXMgcGx1Z2luXHJcbi8vICAgICAgICAgZnJvbSBhIHBhZ2Ugb24gYW5vdGhlciBkb21haW4gd291bGQgY2F1c2UgYW4gZXJyb3IgaW4gU2FmYXJpIDQuIEFsc28sXHJcbi8vICAgICAgICAgSUU2LzcgSWZyYW1lIGlzIG5vdyBpbnNlcnRlZCBhZnRlciB0aGUgYm9keSAodGhpcyBhY3R1YWxseSB3b3JrcyksXHJcbi8vICAgICAgICAgd2hpY2ggcHJldmVudHMgdGhlIHBhZ2UgZnJvbSBzY3JvbGxpbmcgd2hlbiB0aGUgZXZlbnQgaXMgZmlyc3QgYm91bmQuXHJcbi8vICAgICAgICAgRXZlbnQgY2FuIGFsc28gbm93IGJlIGJvdW5kIGJlZm9yZSBET00gcmVhZHksIGJ1dCBpdCB3b24ndCBiZSB1c2FibGVcclxuLy8gICAgICAgICBiZWZvcmUgdGhlbiBpbiBJRTYvNy5cclxuLy8gMS4xICAgLSAoMS8yMS8yMDEwKSBJbmNvcnBvcmF0ZWQgZG9jdW1lbnQuZG9jdW1lbnRNb2RlIHRlc3QgdG8gZml4IElFOCBidWdcclxuLy8gICAgICAgICB3aGVyZSBicm93c2VyIHZlcnNpb24gaXMgaW5jb3JyZWN0bHkgcmVwb3J0ZWQgYXMgOC4wLCBkZXNwaXRlXHJcbi8vICAgICAgICAgaW5jbHVzaW9uIG9mIHRoZSBYLVVBLUNvbXBhdGlibGUgSUU9RW11bGF0ZUlFNyBtZXRhIHRhZy5cclxuLy8gMS4wICAgLSAoMS85LzIwMTApIEluaXRpYWwgUmVsZWFzZS4gQnJva2Ugb3V0IHRoZSBqUXVlcnkgQkJRIGV2ZW50LnNwZWNpYWxcclxuLy8gICAgICAgICB3aW5kb3cub25oYXNoY2hhbmdlIGZ1bmN0aW9uYWxpdHkgaW50byBhIHNlcGFyYXRlIHBsdWdpbiBmb3IgdXNlcnNcclxuLy8gICAgICAgICB3aG8gd2FudCBqdXN0IHRoZSBiYXNpYyBldmVudCAmIGJhY2sgYnV0dG9uIHN1cHBvcnQsIHdpdGhvdXQgYWxsIHRoZVxyXG4vLyAgICAgICAgIGV4dHJhIGF3ZXNvbWVuZXNzIHRoYXQgQkJRIHByb3ZpZGVzLiBUaGlzIHBsdWdpbiB3aWxsIGJlIGluY2x1ZGVkIGFzXHJcbi8vICAgICAgICAgcGFydCBvZiBqUXVlcnkgQkJRLCBidXQgYWxzbyBiZSBhdmFpbGFibGUgc2VwYXJhdGVseS5cclxuXHJcbihmdW5jdGlvbigkLHdpbmRvdyx1bmRlZmluZWQpe1xyXG4gICckOm5vbXVuZ2UnOyAvLyBVc2VkIGJ5IFlVSSBjb21wcmVzc29yLlxyXG4gIFxyXG4gIC8vIFJldXNlZCBzdHJpbmcuXHJcbiAgdmFyIHN0cl9oYXNoY2hhbmdlID0gJ2hhc2hjaGFuZ2UnLFxyXG4gICAgXHJcbiAgICAvLyBNZXRob2QgLyBvYmplY3QgcmVmZXJlbmNlcy5cclxuICAgIGRvYyA9IGRvY3VtZW50LFxyXG4gICAgZmFrZV9vbmhhc2hjaGFuZ2UsXHJcbiAgICBzcGVjaWFsID0gJC5ldmVudC5zcGVjaWFsLFxyXG4gICAgXHJcbiAgICAvLyBEb2VzIHRoZSBicm93c2VyIHN1cHBvcnQgd2luZG93Lm9uaGFzaGNoYW5nZT8gTm90ZSB0aGF0IElFOCBydW5uaW5nIGluXHJcbiAgICAvLyBJRTcgY29tcGF0aWJpbGl0eSBtb2RlIHJlcG9ydHMgdHJ1ZSBmb3IgJ29uaGFzaGNoYW5nZScgaW4gd2luZG93LCBldmVuXHJcbiAgICAvLyB0aG91Z2ggdGhlIGV2ZW50IGlzbid0IHN1cHBvcnRlZCwgc28gYWxzbyB0ZXN0IGRvY3VtZW50LmRvY3VtZW50TW9kZS5cclxuICAgIGRvY19tb2RlID0gZG9jLmRvY3VtZW50TW9kZSxcclxuICAgIHN1cHBvcnRzX29uaGFzaGNoYW5nZSA9ICdvbicgKyBzdHJfaGFzaGNoYW5nZSBpbiB3aW5kb3cgJiYgKCBkb2NfbW9kZSA9PT0gdW5kZWZpbmVkIHx8IGRvY19tb2RlID4gNyApO1xyXG4gIFxyXG4gIC8vIEdldCBsb2NhdGlvbi5oYXNoIChvciB3aGF0IHlvdSdkIGV4cGVjdCBsb2NhdGlvbi5oYXNoIHRvIGJlKSBzYW5zIGFueVxyXG4gIC8vIGxlYWRpbmcgIy4gVGhhbmtzIGZvciBtYWtpbmcgdGhpcyBuZWNlc3NhcnksIEZpcmVmb3ghXHJcbiAgZnVuY3Rpb24gZ2V0X2ZyYWdtZW50KCB1cmwgKSB7XHJcbiAgICB1cmwgPSB1cmwgfHwgbG9jYXRpb24uaHJlZjtcclxuICAgIHJldHVybiAnIycgKyB1cmwucmVwbGFjZSggL15bXiNdKiM/KC4qKSQvLCAnJDEnICk7XHJcbiAgfTtcclxuICBcclxuICAvLyBNZXRob2Q6IGpRdWVyeS5mbi5oYXNoY2hhbmdlXHJcbiAgLy8gXHJcbiAgLy8gQmluZCBhIGhhbmRsZXIgdG8gdGhlIHdpbmRvdy5vbmhhc2hjaGFuZ2UgZXZlbnQgb3IgdHJpZ2dlciBhbGwgYm91bmRcclxuICAvLyB3aW5kb3cub25oYXNoY2hhbmdlIGV2ZW50IGhhbmRsZXJzLiBUaGlzIGJlaGF2aW9yIGlzIGNvbnNpc3RlbnQgd2l0aFxyXG4gIC8vIGpRdWVyeSdzIGJ1aWx0LWluIGV2ZW50IGhhbmRsZXJzLlxyXG4gIC8vIFxyXG4gIC8vIFVzYWdlOlxyXG4gIC8vIFxyXG4gIC8vID4galF1ZXJ5KHdpbmRvdykuaGFzaGNoYW5nZSggWyBoYW5kbGVyIF0gKTtcclxuICAvLyBcclxuICAvLyBBcmd1bWVudHM6XHJcbiAgLy8gXHJcbiAgLy8gIGhhbmRsZXIgLSAoRnVuY3Rpb24pIE9wdGlvbmFsIGhhbmRsZXIgdG8gYmUgYm91bmQgdG8gdGhlIGhhc2hjaGFuZ2VcclxuICAvLyAgICBldmVudC4gVGhpcyBpcyBhIFwic2hvcnRjdXRcIiBmb3IgdGhlIG1vcmUgdmVyYm9zZSBmb3JtOlxyXG4gIC8vICAgIGpRdWVyeSh3aW5kb3cpLmJpbmQoICdoYXNoY2hhbmdlJywgaGFuZGxlciApLiBJZiBoYW5kbGVyIGlzIG9taXR0ZWQsXHJcbiAgLy8gICAgYWxsIGJvdW5kIHdpbmRvdy5vbmhhc2hjaGFuZ2UgZXZlbnQgaGFuZGxlcnMgd2lsbCBiZSB0cmlnZ2VyZWQuIFRoaXNcclxuICAvLyAgICBpcyBhIHNob3J0Y3V0IGZvciB0aGUgbW9yZSB2ZXJib3NlXHJcbiAgLy8gICAgalF1ZXJ5KHdpbmRvdykudHJpZ2dlciggJ2hhc2hjaGFuZ2UnICkuIFRoZXNlIGZvcm1zIGFyZSBkZXNjcmliZWQgaW5cclxuICAvLyAgICB0aGUgPGhhc2hjaGFuZ2UgZXZlbnQ+IHNlY3Rpb24uXHJcbiAgLy8gXHJcbiAgLy8gUmV0dXJuczpcclxuICAvLyBcclxuICAvLyAgKGpRdWVyeSkgVGhlIGluaXRpYWwgalF1ZXJ5IGNvbGxlY3Rpb24gb2YgZWxlbWVudHMuXHJcbiAgXHJcbiAgLy8gQWxsb3cgdGhlIFwic2hvcnRjdXRcIiBmb3JtYXQgJChlbGVtKS5oYXNoY2hhbmdlKCBmbiApIGZvciBiaW5kaW5nIGFuZFxyXG4gIC8vICQoZWxlbSkuaGFzaGNoYW5nZSgpIGZvciB0cmlnZ2VyaW5nLCBsaWtlIGpRdWVyeSBkb2VzIGZvciBidWlsdC1pbiBldmVudHMuXHJcbiAgJC5mblsgc3RyX2hhc2hjaGFuZ2UgXSA9IGZ1bmN0aW9uKCBmbiApIHtcclxuICAgIHJldHVybiBmbiA/IHRoaXMuYmluZCggc3RyX2hhc2hjaGFuZ2UsIGZuICkgOiB0aGlzLnRyaWdnZXIoIHN0cl9oYXNoY2hhbmdlICk7XHJcbiAgfTtcclxuICBcclxuICAvLyBQcm9wZXJ0eTogalF1ZXJ5LmZuLmhhc2hjaGFuZ2UuZGVsYXlcclxuICAvLyBcclxuICAvLyBUaGUgbnVtZXJpYyBpbnRlcnZhbCAoaW4gbWlsbGlzZWNvbmRzKSBhdCB3aGljaCB0aGUgPGhhc2hjaGFuZ2UgZXZlbnQ+XHJcbiAgLy8gcG9sbGluZyBsb29wIGV4ZWN1dGVzLiBEZWZhdWx0cyB0byA1MC5cclxuICBcclxuICAvLyBQcm9wZXJ0eTogalF1ZXJ5LmZuLmhhc2hjaGFuZ2UuZG9tYWluXHJcbiAgLy8gXHJcbiAgLy8gSWYgeW91J3JlIHNldHRpbmcgZG9jdW1lbnQuZG9tYWluIGluIHlvdXIgSmF2YVNjcmlwdCwgYW5kIHlvdSB3YW50IGhhc2hcclxuICAvLyBoaXN0b3J5IHRvIHdvcmsgaW4gSUU2LzcsIG5vdCBvbmx5IG11c3QgdGhpcyBwcm9wZXJ0eSBiZSBzZXQsIGJ1dCB5b3UgbXVzdFxyXG4gIC8vIGFsc28gc2V0IGRvY3VtZW50LmRvbWFpbiBCRUZPUkUgalF1ZXJ5IGlzIGxvYWRlZCBpbnRvIHRoZSBwYWdlLiBUaGlzXHJcbiAgLy8gcHJvcGVydHkgaXMgb25seSBhcHBsaWNhYmxlIGlmIHlvdSBhcmUgc3VwcG9ydGluZyBJRTYvNyAob3IgSUU4IG9wZXJhdGluZ1xyXG4gIC8vIGluIFwiSUU3IGNvbXBhdGliaWxpdHlcIiBtb2RlKS5cclxuICAvLyBcclxuICAvLyBJbiBhZGRpdGlvbiwgdGhlIDxqUXVlcnkuZm4uaGFzaGNoYW5nZS5zcmM+IHByb3BlcnR5IG11c3QgYmUgc2V0IHRvIHRoZVxyXG4gIC8vIHBhdGggb2YgdGhlIGluY2x1ZGVkIFwiZG9jdW1lbnQtZG9tYWluLmh0bWxcIiBmaWxlLCB3aGljaCBjYW4gYmUgcmVuYW1lZCBvclxyXG4gIC8vIG1vZGlmaWVkIGlmIG5lY2Vzc2FyeSAobm90ZSB0aGF0IHRoZSBkb2N1bWVudC5kb21haW4gc3BlY2lmaWVkIG11c3QgYmUgdGhlXHJcbiAgLy8gc2FtZSBpbiBib3RoIHlvdXIgbWFpbiBKYXZhU2NyaXB0IGFzIHdlbGwgYXMgaW4gdGhpcyBmaWxlKS5cclxuICAvLyBcclxuICAvLyBVc2FnZTpcclxuICAvLyBcclxuICAvLyBqUXVlcnkuZm4uaGFzaGNoYW5nZS5kb21haW4gPSBkb2N1bWVudC5kb21haW47XHJcbiAgXHJcbiAgLy8gUHJvcGVydHk6IGpRdWVyeS5mbi5oYXNoY2hhbmdlLnNyY1xyXG4gIC8vIFxyXG4gIC8vIElmLCBmb3Igc29tZSByZWFzb24sIHlvdSBuZWVkIHRvIHNwZWNpZnkgYW4gSWZyYW1lIHNyYyBmaWxlIChmb3IgZXhhbXBsZSxcclxuICAvLyB3aGVuIHNldHRpbmcgZG9jdW1lbnQuZG9tYWluIGFzIGluIDxqUXVlcnkuZm4uaGFzaGNoYW5nZS5kb21haW4+KSwgeW91IGNhblxyXG4gIC8vIGRvIHNvIHVzaW5nIHRoaXMgcHJvcGVydHkuIE5vdGUgdGhhdCB3aGVuIHVzaW5nIHRoaXMgcHJvcGVydHksIGhpc3RvcnlcclxuICAvLyB3b24ndCBiZSByZWNvcmRlZCBpbiBJRTYvNyB1bnRpbCB0aGUgSWZyYW1lIHNyYyBmaWxlIGxvYWRzLiBUaGlzIHByb3BlcnR5XHJcbiAgLy8gaXMgb25seSBhcHBsaWNhYmxlIGlmIHlvdSBhcmUgc3VwcG9ydGluZyBJRTYvNyAob3IgSUU4IG9wZXJhdGluZyBpbiBcIklFN1xyXG4gIC8vIGNvbXBhdGliaWxpdHlcIiBtb2RlKS5cclxuICAvLyBcclxuICAvLyBVc2FnZTpcclxuICAvLyBcclxuICAvLyBqUXVlcnkuZm4uaGFzaGNoYW5nZS5zcmMgPSAncGF0aC90by9maWxlLmh0bWwnO1xyXG4gIFxyXG4gICQuZm5bIHN0cl9oYXNoY2hhbmdlIF0uZGVsYXkgPSA1MDtcclxuICAvKlxyXG4gICQuZm5bIHN0cl9oYXNoY2hhbmdlIF0uZG9tYWluID0gbnVsbDtcclxuICAkLmZuWyBzdHJfaGFzaGNoYW5nZSBdLnNyYyA9IG51bGw7XHJcbiAgKi9cclxuICBcclxuICAvLyBFdmVudDogaGFzaGNoYW5nZSBldmVudFxyXG4gIC8vIFxyXG4gIC8vIEZpcmVkIHdoZW4gbG9jYXRpb24uaGFzaCBjaGFuZ2VzLiBJbiBicm93c2VycyB0aGF0IHN1cHBvcnQgaXQsIHRoZSBuYXRpdmVcclxuICAvLyBIVE1MNSB3aW5kb3cub25oYXNoY2hhbmdlIGV2ZW50IGlzIHVzZWQsIG90aGVyd2lzZSBhIHBvbGxpbmcgbG9vcCBpc1xyXG4gIC8vIGluaXRpYWxpemVkLCBydW5uaW5nIGV2ZXJ5IDxqUXVlcnkuZm4uaGFzaGNoYW5nZS5kZWxheT4gbWlsbGlzZWNvbmRzIHRvXHJcbiAgLy8gc2VlIGlmIHRoZSBoYXNoIGhhcyBjaGFuZ2VkLiBJbiBJRTYvNyAoYW5kIElFOCBvcGVyYXRpbmcgaW4gXCJJRTdcclxuICAvLyBjb21wYXRpYmlsaXR5XCIgbW9kZSksIGEgaGlkZGVuIElmcmFtZSBpcyBjcmVhdGVkIHRvIGFsbG93IHRoZSBiYWNrIGJ1dHRvblxyXG4gIC8vIGFuZCBoYXNoLWJhc2VkIGhpc3RvcnkgdG8gd29yay5cclxuICAvLyBcclxuICAvLyBVc2FnZSBhcyBkZXNjcmliZWQgaW4gPGpRdWVyeS5mbi5oYXNoY2hhbmdlPjpcclxuICAvLyBcclxuICAvLyA+IC8vIEJpbmQgYW4gZXZlbnQgaGFuZGxlci5cclxuICAvLyA+IGpRdWVyeSh3aW5kb3cpLmhhc2hjaGFuZ2UoIGZ1bmN0aW9uKGUpIHtcclxuICAvLyA+ICAgdmFyIGhhc2ggPSBsb2NhdGlvbi5oYXNoO1xyXG4gIC8vID4gICAuLi5cclxuICAvLyA+IH0pO1xyXG4gIC8vID4gXHJcbiAgLy8gPiAvLyBNYW51YWxseSB0cmlnZ2VyIHRoZSBldmVudCBoYW5kbGVyLlxyXG4gIC8vID4galF1ZXJ5KHdpbmRvdykuaGFzaGNoYW5nZSgpO1xyXG4gIC8vIFxyXG4gIC8vIEEgbW9yZSB2ZXJib3NlIHVzYWdlIHRoYXQgYWxsb3dzIGZvciBldmVudCBuYW1lc3BhY2luZzpcclxuICAvLyBcclxuICAvLyA+IC8vIEJpbmQgYW4gZXZlbnQgaGFuZGxlci5cclxuICAvLyA+IGpRdWVyeSh3aW5kb3cpLmJpbmQoICdoYXNoY2hhbmdlJywgZnVuY3Rpb24oZSkge1xyXG4gIC8vID4gICB2YXIgaGFzaCA9IGxvY2F0aW9uLmhhc2g7XHJcbiAgLy8gPiAgIC4uLlxyXG4gIC8vID4gfSk7XHJcbiAgLy8gPiBcclxuICAvLyA+IC8vIE1hbnVhbGx5IHRyaWdnZXIgdGhlIGV2ZW50IGhhbmRsZXIuXHJcbiAgLy8gPiBqUXVlcnkod2luZG93KS50cmlnZ2VyKCAnaGFzaGNoYW5nZScgKTtcclxuICAvLyBcclxuICAvLyBBZGRpdGlvbmFsIE5vdGVzOlxyXG4gIC8vIFxyXG4gIC8vICogVGhlIHBvbGxpbmcgbG9vcCBhbmQgSWZyYW1lIGFyZSBub3QgY3JlYXRlZCB1bnRpbCBhdCBsZWFzdCBvbmUgaGFuZGxlclxyXG4gIC8vICAgaXMgYWN0dWFsbHkgYm91bmQgdG8gdGhlICdoYXNoY2hhbmdlJyBldmVudC5cclxuICAvLyAqIElmIHlvdSBuZWVkIHRoZSBib3VuZCBoYW5kbGVyKHMpIHRvIGV4ZWN1dGUgaW1tZWRpYXRlbHksIGluIGNhc2VzIHdoZXJlXHJcbiAgLy8gICBhIGxvY2F0aW9uLmhhc2ggZXhpc3RzIG9uIHBhZ2UgbG9hZCwgdmlhIGJvb2ttYXJrIG9yIHBhZ2UgcmVmcmVzaCBmb3JcclxuICAvLyAgIGV4YW1wbGUsIHVzZSBqUXVlcnkod2luZG93KS5oYXNoY2hhbmdlKCkgb3IgdGhlIG1vcmUgdmVyYm9zZSBcclxuICAvLyAgIGpRdWVyeSh3aW5kb3cpLnRyaWdnZXIoICdoYXNoY2hhbmdlJyApLlxyXG4gIC8vICogVGhlIGV2ZW50IGNhbiBiZSBib3VuZCBiZWZvcmUgRE9NIHJlYWR5LCBidXQgc2luY2UgaXQgd29uJ3QgYmUgdXNhYmxlXHJcbiAgLy8gICBiZWZvcmUgdGhlbiBpbiBJRTYvNyAoZHVlIHRvIHRoZSBuZWNlc3NhcnkgSWZyYW1lKSwgcmVjb21tZW5kZWQgdXNhZ2UgaXNcclxuICAvLyAgIHRvIGJpbmQgaXQgaW5zaWRlIGEgRE9NIHJlYWR5IGhhbmRsZXIuXHJcbiAgXHJcbiAgLy8gT3ZlcnJpZGUgZXhpc3RpbmcgJC5ldmVudC5zcGVjaWFsLmhhc2hjaGFuZ2UgbWV0aG9kcyAoYWxsb3dpbmcgdGhpcyBwbHVnaW5cclxuICAvLyB0byBiZSBkZWZpbmVkIGFmdGVyIGpRdWVyeSBCQlEgaW4gQkJRJ3Mgc291cmNlIGNvZGUpLlxyXG4gIHNwZWNpYWxbIHN0cl9oYXNoY2hhbmdlIF0gPSAkLmV4dGVuZCggc3BlY2lhbFsgc3RyX2hhc2hjaGFuZ2UgXSwge1xyXG4gICAgXHJcbiAgICAvLyBDYWxsZWQgb25seSB3aGVuIHRoZSBmaXJzdCAnaGFzaGNoYW5nZScgZXZlbnQgaXMgYm91bmQgdG8gd2luZG93LlxyXG4gICAgc2V0dXA6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAvLyBJZiB3aW5kb3cub25oYXNoY2hhbmdlIGlzIHN1cHBvcnRlZCBuYXRpdmVseSwgdGhlcmUncyBub3RoaW5nIHRvIGRvLi5cclxuICAgICAgaWYgKCBzdXBwb3J0c19vbmhhc2hjaGFuZ2UgKSB7IHJldHVybiBmYWxzZTsgfVxyXG4gICAgICBcclxuICAgICAgLy8gT3RoZXJ3aXNlLCB3ZSBuZWVkIHRvIGNyZWF0ZSBvdXIgb3duLiBBbmQgd2UgZG9uJ3Qgd2FudCB0byBjYWxsIHRoaXNcclxuICAgICAgLy8gdW50aWwgdGhlIHVzZXIgYmluZHMgdG8gdGhlIGV2ZW50LCBqdXN0IGluIGNhc2UgdGhleSBuZXZlciBkbywgc2luY2UgaXRcclxuICAgICAgLy8gd2lsbCBjcmVhdGUgYSBwb2xsaW5nIGxvb3AgYW5kIHBvc3NpYmx5IGV2ZW4gYSBoaWRkZW4gSWZyYW1lLlxyXG4gICAgICAkKCBmYWtlX29uaGFzaGNoYW5nZS5zdGFydCApO1xyXG4gICAgfSxcclxuICAgIFxyXG4gICAgLy8gQ2FsbGVkIG9ubHkgd2hlbiB0aGUgbGFzdCAnaGFzaGNoYW5nZScgZXZlbnQgaXMgdW5ib3VuZCBmcm9tIHdpbmRvdy5cclxuICAgIHRlYXJkb3duOiBmdW5jdGlvbigpIHtcclxuICAgICAgLy8gSWYgd2luZG93Lm9uaGFzaGNoYW5nZSBpcyBzdXBwb3J0ZWQgbmF0aXZlbHksIHRoZXJlJ3Mgbm90aGluZyB0byBkby4uXHJcbiAgICAgIGlmICggc3VwcG9ydHNfb25oYXNoY2hhbmdlICkgeyByZXR1cm4gZmFsc2U7IH1cclxuICAgICAgXHJcbiAgICAgIC8vIE90aGVyd2lzZSwgd2UgbmVlZCB0byBzdG9wIG91cnMgKGlmIHBvc3NpYmxlKS5cclxuICAgICAgJCggZmFrZV9vbmhhc2hjaGFuZ2Uuc3RvcCApO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgfSk7XHJcbiAgXHJcbiAgLy8gZmFrZV9vbmhhc2hjaGFuZ2UgZG9lcyBhbGwgdGhlIHdvcmsgb2YgdHJpZ2dlcmluZyB0aGUgd2luZG93Lm9uaGFzaGNoYW5nZVxyXG4gIC8vIGV2ZW50IGZvciBicm93c2VycyB0aGF0IGRvbid0IG5hdGl2ZWx5IHN1cHBvcnQgaXQsIGluY2x1ZGluZyBjcmVhdGluZyBhXHJcbiAgLy8gcG9sbGluZyBsb29wIHRvIHdhdGNoIGZvciBoYXNoIGNoYW5nZXMgYW5kIGluIElFIDYvNyBjcmVhdGluZyBhIGhpZGRlblxyXG4gIC8vIElmcmFtZSB0byBlbmFibGUgYmFjayBhbmQgZm9yd2FyZC5cclxuICBmYWtlX29uaGFzaGNoYW5nZSA9IChmdW5jdGlvbigpe1xyXG4gICAgdmFyIHNlbGYgPSB7fSxcclxuICAgICAgdGltZW91dF9pZCxcclxuICAgICAgXHJcbiAgICAgIC8vIFJlbWVtYmVyIHRoZSBpbml0aWFsIGhhc2ggc28gaXQgZG9lc24ndCBnZXQgdHJpZ2dlcmVkIGltbWVkaWF0ZWx5LlxyXG4gICAgICBsYXN0X2hhc2ggPSBnZXRfZnJhZ21lbnQoKSxcclxuICAgICAgXHJcbiAgICAgIGZuX3JldHZhbCA9IGZ1bmN0aW9uKHZhbCl7IHJldHVybiB2YWw7IH0sXHJcbiAgICAgIGhpc3Rvcnlfc2V0ID0gZm5fcmV0dmFsLFxyXG4gICAgICBoaXN0b3J5X2dldCA9IGZuX3JldHZhbDtcclxuICAgIFxyXG4gICAgLy8gU3RhcnQgdGhlIHBvbGxpbmcgbG9vcC5cclxuICAgIHNlbGYuc3RhcnQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgdGltZW91dF9pZCB8fCBwb2xsKCk7XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICAvLyBTdG9wIHRoZSBwb2xsaW5nIGxvb3AuXHJcbiAgICBzZWxmLnN0b3AgPSBmdW5jdGlvbigpIHtcclxuICAgICAgdGltZW91dF9pZCAmJiBjbGVhclRpbWVvdXQoIHRpbWVvdXRfaWQgKTtcclxuICAgICAgdGltZW91dF9pZCA9IHVuZGVmaW5lZDtcclxuICAgIH07XHJcbiAgICBcclxuICAgIC8vIFRoaXMgcG9sbGluZyBsb29wIGNoZWNrcyBldmVyeSAkLmZuLmhhc2hjaGFuZ2UuZGVsYXkgbWlsbGlzZWNvbmRzIHRvIHNlZVxyXG4gICAgLy8gaWYgbG9jYXRpb24uaGFzaCBoYXMgY2hhbmdlZCwgYW5kIHRyaWdnZXJzIHRoZSAnaGFzaGNoYW5nZScgZXZlbnQgb25cclxuICAgIC8vIHdpbmRvdyB3aGVuIG5lY2Vzc2FyeS5cclxuICAgIGZ1bmN0aW9uIHBvbGwoKSB7XHJcbiAgICAgIHZhciBoYXNoID0gZ2V0X2ZyYWdtZW50KCksXHJcbiAgICAgICAgaGlzdG9yeV9oYXNoID0gaGlzdG9yeV9nZXQoIGxhc3RfaGFzaCApO1xyXG4gICAgICBcclxuICAgICAgaWYgKCBoYXNoICE9PSBsYXN0X2hhc2ggKSB7XHJcbiAgICAgICAgaGlzdG9yeV9zZXQoIGxhc3RfaGFzaCA9IGhhc2gsIGhpc3RvcnlfaGFzaCApO1xyXG4gICAgICAgIFxyXG4gICAgICAgICQod2luZG93KS50cmlnZ2VyKCBzdHJfaGFzaGNoYW5nZSApO1xyXG4gICAgICAgIFxyXG4gICAgICB9IGVsc2UgaWYgKCBoaXN0b3J5X2hhc2ggIT09IGxhc3RfaGFzaCApIHtcclxuICAgICAgICBsb2NhdGlvbi5ocmVmID0gbG9jYXRpb24uaHJlZi5yZXBsYWNlKCAvIy4qLywgJycgKSArIGhpc3RvcnlfaGFzaDtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgdGltZW91dF9pZCA9IHNldFRpbWVvdXQoIHBvbGwsICQuZm5bIHN0cl9oYXNoY2hhbmdlIF0uZGVsYXkgKTtcclxuICAgIH07XHJcbiAgICBcclxuICAgIC8vIHZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dlxyXG4gICAgLy8gdnZ2dnZ2dnZ2dnZ2dnZ2dnZ2diBSRU1PVkUgSUYgTk9UIFNVUFBPUlRJTkcgSUU2LzcvOCB2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2XHJcbiAgICAvLyB2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZcclxuICAgIHdpbmRvdy5hdHRhY2hFdmVudCAmJiAhd2luZG93LmFkZEV2ZW50TGlzdGVuZXIgJiYgIXN1cHBvcnRzX29uaGFzaGNoYW5nZSAmJiAoZnVuY3Rpb24oKXtcclxuICAgICAgLy8gTm90IG9ubHkgZG8gSUU2LzcgbmVlZCB0aGUgXCJtYWdpY2FsXCIgSWZyYW1lIHRyZWF0bWVudCwgYnV0IHNvIGRvZXMgSUU4XHJcbiAgICAgIC8vIHdoZW4gcnVubmluZyBpbiBcIklFNyBjb21wYXRpYmlsaXR5XCIgbW9kZS5cclxuICAgICAgXHJcbiAgICAgIHZhciBpZnJhbWUsXHJcbiAgICAgICAgaWZyYW1lX3NyYztcclxuICAgICAgXHJcbiAgICAgIC8vIFdoZW4gdGhlIGV2ZW50IGlzIGJvdW5kIGFuZCBwb2xsaW5nIHN0YXJ0cyBpbiBJRSA2LzcsIGNyZWF0ZSBhIGhpZGRlblxyXG4gICAgICAvLyBJZnJhbWUgZm9yIGhpc3RvcnkgaGFuZGxpbmcuXHJcbiAgICAgIHNlbGYuc3RhcnQgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgIGlmICggIWlmcmFtZSApIHtcclxuICAgICAgICAgIGlmcmFtZV9zcmMgPSAkLmZuWyBzdHJfaGFzaGNoYW5nZSBdLnNyYztcclxuICAgICAgICAgIGlmcmFtZV9zcmMgPSBpZnJhbWVfc3JjICYmIGlmcmFtZV9zcmMgKyBnZXRfZnJhZ21lbnQoKTtcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgLy8gQ3JlYXRlIGhpZGRlbiBJZnJhbWUuIEF0dGVtcHQgdG8gbWFrZSBJZnJhbWUgYXMgaGlkZGVuIGFzIHBvc3NpYmxlXHJcbiAgICAgICAgICAvLyBieSB1c2luZyB0ZWNobmlxdWVzIGZyb20gaHR0cDovL3d3dy5wYWNpZWxsb2dyb3VwLmNvbS9ibG9nLz9wPTYwNC5cclxuICAgICAgICAgIGlmcmFtZSA9ICQoJzxpZnJhbWUgdGFiaW5kZXg9XCItMVwiIHRpdGxlPVwiZW1wdHlcIi8+JykuaGlkZSgpXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBXaGVuIElmcmFtZSBoYXMgY29tcGxldGVseSBsb2FkZWQsIGluaXRpYWxpemUgdGhlIGhpc3RvcnkgYW5kXHJcbiAgICAgICAgICAgIC8vIHN0YXJ0IHBvbGxpbmcuXHJcbiAgICAgICAgICAgIC5vbmUoICdsb2FkJywgZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICBpZnJhbWVfc3JjIHx8IGhpc3Rvcnlfc2V0KCBnZXRfZnJhZ21lbnQoKSApO1xyXG4gICAgICAgICAgICAgIHBvbGwoKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIExvYWQgSWZyYW1lIHNyYyBpZiBzcGVjaWZpZWQsIG90aGVyd2lzZSBub3RoaW5nLlxyXG4gICAgICAgICAgICAuYXR0ciggJ3NyYycsIGlmcmFtZV9zcmMgfHwgJ2phdmFzY3JpcHQ6MCcgKVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gQXBwZW5kIElmcmFtZSBhZnRlciB0aGUgZW5kIG9mIHRoZSBib2R5IHRvIHByZXZlbnQgdW5uZWNlc3NhcnlcclxuICAgICAgICAgICAgLy8gaW5pdGlhbCBwYWdlIHNjcm9sbGluZyAoeWVzLCB0aGlzIHdvcmtzKS5cclxuICAgICAgICAgICAgLmluc2VydEFmdGVyKCAnYm9keScgKVswXS5jb250ZW50V2luZG93O1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICAvLyBXaGVuZXZlciBgZG9jdW1lbnQudGl0bGVgIGNoYW5nZXMsIHVwZGF0ZSB0aGUgSWZyYW1lJ3MgdGl0bGUgdG9cclxuICAgICAgICAgIC8vIHByZXR0aWZ5IHRoZSBiYWNrL25leHQgaGlzdG9yeSBtZW51IGVudHJpZXMuIFNpbmNlIElFIHNvbWV0aW1lc1xyXG4gICAgICAgICAgLy8gZXJyb3JzIHdpdGggXCJVbnNwZWNpZmllZCBlcnJvclwiIHRoZSB2ZXJ5IGZpcnN0IHRpbWUgdGhpcyBpcyBzZXRcclxuICAgICAgICAgIC8vICh5ZXMsIHZlcnkgdXNlZnVsKSB3cmFwIHRoaXMgd2l0aCBhIHRyeS9jYXRjaCBibG9jay5cclxuICAgICAgICAgIGRvYy5vbnByb3BlcnR5Y2hhbmdlID0gZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICBpZiAoIGV2ZW50LnByb3BlcnR5TmFtZSA9PT0gJ3RpdGxlJyApIHtcclxuICAgICAgICAgICAgICAgIGlmcmFtZS5kb2N1bWVudC50aXRsZSA9IGRvYy50aXRsZTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gY2F0Y2goZSkge31cclxuICAgICAgICAgIH07XHJcbiAgICAgICAgICBcclxuICAgICAgICB9XHJcbiAgICAgIH07XHJcbiAgICAgIFxyXG4gICAgICAvLyBPdmVycmlkZSB0aGUgXCJzdG9wXCIgbWV0aG9kIHNpbmNlIGFuIElFNi83IElmcmFtZSB3YXMgY3JlYXRlZC4gRXZlblxyXG4gICAgICAvLyBpZiB0aGVyZSBhcmUgbm8gbG9uZ2VyIGFueSBib3VuZCBldmVudCBoYW5kbGVycywgdGhlIHBvbGxpbmcgbG9vcFxyXG4gICAgICAvLyBpcyBzdGlsbCBuZWNlc3NhcnkgZm9yIGJhY2svbmV4dCB0byB3b3JrIGF0IGFsbCFcclxuICAgICAgc2VsZi5zdG9wID0gZm5fcmV0dmFsO1xyXG4gICAgICBcclxuICAgICAgLy8gR2V0IGhpc3RvcnkgYnkgbG9va2luZyBhdCB0aGUgaGlkZGVuIElmcmFtZSdzIGxvY2F0aW9uLmhhc2guXHJcbiAgICAgIGhpc3RvcnlfZ2V0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIGdldF9mcmFnbWVudCggaWZyYW1lLmxvY2F0aW9uLmhyZWYgKTtcclxuICAgICAgfTtcclxuICAgICAgXHJcbiAgICAgIC8vIFNldCBhIG5ldyBoaXN0b3J5IGl0ZW0gYnkgb3BlbmluZyBhbmQgdGhlbiBjbG9zaW5nIHRoZSBJZnJhbWVcclxuICAgICAgLy8gZG9jdW1lbnQsICp0aGVuKiBzZXR0aW5nIGl0cyBsb2NhdGlvbi5oYXNoLiBJZiBkb2N1bWVudC5kb21haW4gaGFzXHJcbiAgICAgIC8vIGJlZW4gc2V0LCB1cGRhdGUgdGhhdCBhcyB3ZWxsLlxyXG4gICAgICBoaXN0b3J5X3NldCA9IGZ1bmN0aW9uKCBoYXNoLCBoaXN0b3J5X2hhc2ggKSB7XHJcbiAgICAgICAgdmFyIGlmcmFtZV9kb2MgPSBpZnJhbWUuZG9jdW1lbnQsXHJcbiAgICAgICAgICBkb21haW4gPSAkLmZuWyBzdHJfaGFzaGNoYW5nZSBdLmRvbWFpbjtcclxuICAgICAgICBcclxuICAgICAgICBpZiAoIGhhc2ggIT09IGhpc3RvcnlfaGFzaCApIHtcclxuICAgICAgICAgIC8vIFVwZGF0ZSBJZnJhbWUgd2l0aCBhbnkgaW5pdGlhbCBgZG9jdW1lbnQudGl0bGVgIHRoYXQgbWlnaHQgYmUgc2V0LlxyXG4gICAgICAgICAgaWZyYW1lX2RvYy50aXRsZSA9IGRvYy50aXRsZTtcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgLy8gT3BlbmluZyB0aGUgSWZyYW1lJ3MgZG9jdW1lbnQgYWZ0ZXIgaXQgaGFzIGJlZW4gY2xvc2VkIGlzIHdoYXRcclxuICAgICAgICAgIC8vIGFjdHVhbGx5IGFkZHMgYSBoaXN0b3J5IGVudHJ5LlxyXG4gICAgICAgICAgaWZyYW1lX2RvYy5vcGVuKCk7XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIC8vIFNldCBkb2N1bWVudC5kb21haW4gZm9yIHRoZSBJZnJhbWUgZG9jdW1lbnQgYXMgd2VsbCwgaWYgbmVjZXNzYXJ5LlxyXG4gICAgICAgICAgZG9tYWluICYmIGlmcmFtZV9kb2Mud3JpdGUoICdcXHgzY3NjcmlwdD5kb2N1bWVudC5kb21haW49XCInICsgZG9tYWluICsgJ1wiXFx4M2Mvc2NyaXB0PicgKTtcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgaWZyYW1lX2RvYy5jbG9zZSgpO1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICAvLyBVcGRhdGUgdGhlIElmcmFtZSdzIGhhc2gsIGZvciBncmVhdCBqdXN0aWNlLlxyXG4gICAgICAgICAgaWZyYW1lLmxvY2F0aW9uLmhhc2ggPSBoYXNoO1xyXG4gICAgICAgIH1cclxuICAgICAgfTtcclxuICAgICAgXHJcbiAgICB9KSgpO1xyXG4gICAgLy8gXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXHJcbiAgICAvLyBeXl5eXl5eXl5eXl5eXl5eXl5eIFJFTU9WRSBJRiBOT1QgU1VQUE9SVElORyBJRTYvNy84IF5eXl5eXl5eXl5eXl5eXl5eXl5cclxuICAgIC8vIF5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXlxyXG4gICAgXHJcbiAgICByZXR1cm4gc2VsZjtcclxuICB9KSgpO1xyXG4gIFxyXG59KShqUXVlcnksdGhpcyk7XHJcblxyXG5cclxuKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7XHJcblxyXG5cdC8qISBtYXRjaE1lZGlhKCkgcG9seWZpbGwgLSBUZXN0IGEgQ1NTIG1lZGlhIHR5cGUvcXVlcnkgaW4gSlMuIEF1dGhvcnMgJiBjb3B5cmlnaHQgKGMpIDIwMTI6IFNjb3R0IEplaGwsIFBhdWwgSXJpc2gsIE5pY2hvbGFzIFpha2FzLiBEdWFsIE1JVC9CU0QgbGljZW5zZSAqL1xyXG5cdHdpbmRvdy5tYXRjaE1lZGlhID0gd2luZG93Lm1hdGNoTWVkaWEgfHwgKGZ1bmN0aW9uKCBkb2MsIHVuZGVmaW5lZCApIHtcclxuXHJcblx0XHR2YXIgYm9vbCxcclxuXHRcdFx0ZG9jRWxlbSA9IGRvYy5kb2N1bWVudEVsZW1lbnQsXHJcblx0XHRcdHJlZk5vZGUgPSBkb2NFbGVtLmZpcnN0RWxlbWVudENoaWxkIHx8IGRvY0VsZW0uZmlyc3RDaGlsZCxcclxuXHRcdFx0Ly8gZmFrZUJvZHkgcmVxdWlyZWQgZm9yIDxGRjQgd2hlbiBleGVjdXRlZCBpbiA8aGVhZD5cclxuXHRcdFx0ZmFrZUJvZHkgPSBkb2MuY3JlYXRlRWxlbWVudCggXCJib2R5XCIgKSxcclxuXHRcdFx0ZGl2ID0gZG9jLmNyZWF0ZUVsZW1lbnQoIFwiZGl2XCIgKTtcclxuXHJcblx0XHRkaXYuaWQgPSBcIm1xLXRlc3QtMVwiO1xyXG5cdFx0ZGl2LnN0eWxlLmNzc1RleHQgPSBcInBvc2l0aW9uOmFic29sdXRlO3RvcDotMTAwZW1cIjtcclxuXHRcdGZha2VCb2R5LnN0eWxlLmJhY2tncm91bmQgPSBcIm5vbmVcIjtcclxuXHRcdGZha2VCb2R5LmFwcGVuZENoaWxkKGRpdik7XHJcblxyXG5cdFx0cmV0dXJuIGZ1bmN0aW9uKHEpe1xyXG5cclxuXHRcdFx0ZGl2LmlubmVySFRNTCA9IFwiJnNoeTs8c3R5bGUgbWVkaWE9XFxcIlwiICsgcSArIFwiXFxcIj4gI21xLXRlc3QtMSB7IHdpZHRoOiA0MnB4OyB9PC9zdHlsZT5cIjtcclxuXHJcblx0XHRcdGRvY0VsZW0uaW5zZXJ0QmVmb3JlKCBmYWtlQm9keSwgcmVmTm9kZSApO1xyXG5cdFx0XHRib29sID0gZGl2Lm9mZnNldFdpZHRoID09PSA0MjtcclxuXHRcdFx0ZG9jRWxlbS5yZW1vdmVDaGlsZCggZmFrZUJvZHkgKTtcclxuXHJcblx0XHRcdHJldHVybiB7XHJcblx0XHRcdFx0bWF0Y2hlczogYm9vbCxcclxuXHRcdFx0XHRtZWRpYTogcVxyXG5cdFx0XHR9O1xyXG5cclxuXHRcdH07XHJcblxyXG5cdH0oIGRvY3VtZW50ICkpO1xyXG5cclxuXHQvLyAkLm1vYmlsZS5tZWRpYSB1c2VzIG1hdGNoTWVkaWEgdG8gcmV0dXJuIGEgYm9vbGVhbi5cclxuXHQkLm1vYmlsZS5tZWRpYSA9IGZ1bmN0aW9uKCBxICkge1xyXG5cdFx0cmV0dXJuIHdpbmRvdy5tYXRjaE1lZGlhKCBxICkubWF0Y2hlcztcclxuXHR9O1xyXG5cclxufSkoalF1ZXJ5KTtcclxuXHJcblx0KGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7XHJcblx0XHR2YXIgc3VwcG9ydCA9IHtcclxuXHRcdFx0dG91Y2g6IFwib250b3VjaGVuZFwiIGluIGRvY3VtZW50XHJcblx0XHR9O1xyXG5cclxuXHRcdCQubW9iaWxlLnN1cHBvcnQgPSAkLm1vYmlsZS5zdXBwb3J0IHx8IHt9O1xyXG5cdFx0JC5leHRlbmQoICQuc3VwcG9ydCwgc3VwcG9ydCApO1xyXG5cdFx0JC5leHRlbmQoICQubW9iaWxlLnN1cHBvcnQsIHN1cHBvcnQgKTtcclxuXHR9KCBqUXVlcnkgKSk7XHJcblxyXG5cdChmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xyXG5cdFx0JC5leHRlbmQoICQuc3VwcG9ydCwge1xyXG5cdFx0XHRvcmllbnRhdGlvbjogXCJvcmllbnRhdGlvblwiIGluIHdpbmRvdyAmJiBcIm9ub3JpZW50YXRpb25jaGFuZ2VcIiBpbiB3aW5kb3dcclxuXHRcdH0pO1xyXG5cdH0oIGpRdWVyeSApKTtcclxuXHJcbihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xyXG5cclxuLy8gdGh4IE1vZGVybml6clxyXG5mdW5jdGlvbiBwcm9wRXhpc3RzKCBwcm9wICkge1xyXG5cdHZhciB1Y19wcm9wID0gcHJvcC5jaGFyQXQoIDAgKS50b1VwcGVyQ2FzZSgpICsgcHJvcC5zdWJzdHIoIDEgKSxcclxuXHRcdHByb3BzID0gKCBwcm9wICsgXCIgXCIgKyB2ZW5kb3JzLmpvaW4oIHVjX3Byb3AgKyBcIiBcIiApICsgdWNfcHJvcCApLnNwbGl0KCBcIiBcIiApLFxyXG5cdFx0djtcclxuXHJcblx0Zm9yICggdiBpbiBwcm9wcyApIHtcclxuXHRcdGlmICggZmJDU1NbIHByb3BzWyB2IF0gXSAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdH1cclxuXHR9XHJcbn1cclxuXHJcbnZhciBmYWtlQm9keSA9ICQoIFwiPGJvZHk+XCIgKS5wcmVwZW5kVG8oIFwiaHRtbFwiICksXHJcblx0ZmJDU1MgPSBmYWtlQm9keVsgMCBdLnN0eWxlLFxyXG5cdHZlbmRvcnMgPSBbIFwiV2Via2l0XCIsIFwiTW96XCIsIFwiT1wiIF0sXHJcblx0d2Vib3MgPSBcInBhbG1HZXRSZXNvdXJjZVwiIGluIHdpbmRvdywgLy9vbmx5IHVzZWQgdG8gcnVsZSBvdXQgc2Nyb2xsVG9wXHJcblx0b3BlcmFtaW5pID0gd2luZG93Lm9wZXJhbWluaSAmJiAoe30pLnRvU3RyaW5nLmNhbGwoIHdpbmRvdy5vcGVyYW1pbmkgKSA9PT0gXCJbb2JqZWN0IE9wZXJhTWluaV1cIixcclxuXHRiYiA9IHdpbmRvdy5ibGFja2JlcnJ5ICYmICFwcm9wRXhpc3RzKCBcIi13ZWJraXQtdHJhbnNmb3JtXCIgKSwgLy9vbmx5IHVzZWQgdG8gcnVsZSBvdXQgYm94IHNoYWRvdywgYXMgaXQncyBmaWxsZWQgb3BhcXVlIG9uIEJCIDUgYW5kIGxvd2VyXHJcblx0bm9raWFMVEU3XzM7XHJcblxyXG4vLyBpbmxpbmUgU1ZHIHN1cHBvcnQgdGVzdFxyXG5mdW5jdGlvbiBpbmxpbmVTVkcoKSB7XHJcblx0Ly8gVGhhbmtzIE1vZGVybml6ciAmIEVyaWsgRGFobHN0cm9tXHJcblx0dmFyIHcgPSB3aW5kb3csXHJcblx0XHRzdmcgPSAhIXcuZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TICYmICEhdy5kb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoIFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiwgXCJzdmdcIiApLmNyZWF0ZVNWR1JlY3QgJiYgISggdy5vcGVyYSAmJiBuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoIFwiQ2hyb21lXCIgKSA9PT0gLTEgKSxcclxuXHRcdHN1cHBvcnQgPSBmdW5jdGlvbiggZGF0YSApIHtcclxuXHRcdFx0aWYgKCAhKCBkYXRhICYmIHN2ZyApICkge1xyXG5cdFx0XHRcdCQoIFwiaHRtbFwiICkuYWRkQ2xhc3MoIFwidWktbm9zdmdcIiApO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cdFx0aW1nID0gbmV3IHcuSW1hZ2UoKTtcclxuXHJcblx0aW1nLm9uZXJyb3IgPSBmdW5jdGlvbigpIHtcclxuXHRcdHN1cHBvcnQoIGZhbHNlICk7XHJcblx0fTtcclxuXHRpbWcub25sb2FkID0gZnVuY3Rpb24oKSB7XHJcblx0XHRzdXBwb3J0KCBpbWcud2lkdGggPT09IDEgJiYgaW1nLmhlaWdodCA9PT0gMSApO1xyXG5cdH07XHJcblx0aW1nLnNyYyA9IFwiZGF0YTppbWFnZS9naWY7YmFzZTY0LFIwbEdPRGxoQVFBQkFJQUFBQUFBQVAvLy95d0FBQUFBQVFBQkFBQUNBVXdBT3c9PVwiO1xyXG59XHJcblxyXG5mdW5jdGlvbiB0cmFuc2Zvcm0zZFRlc3QoKSB7XHJcblx0dmFyIG1xUHJvcCA9IFwidHJhbnNmb3JtLTNkXCIsXHJcblx0XHQvLyBCZWNhdXNlIHRoZSBgdHJhbnNsYXRlM2RgIHRlc3QgYmVsb3cgdGhyb3dzIGZhbHNlIHBvc2l0aXZlcyBpbiBBbmRyb2lkOlxyXG5cdFx0cmV0ID0gJC5tb2JpbGUubWVkaWEoIFwiKC1cIiArIHZlbmRvcnMuam9pbiggXCItXCIgKyBtcVByb3AgKyBcIiksKC1cIiApICsgXCItXCIgKyBtcVByb3AgKyBcIiksKFwiICsgbXFQcm9wICsgXCIpXCIgKSxcclxuXHRcdGVsLCB0cmFuc2Zvcm1zLCB0O1xyXG5cclxuXHRpZiAoIHJldCApIHtcclxuXHRcdHJldHVybiAhIXJldDtcclxuXHR9XHJcblxyXG5cdGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJkaXZcIiApO1xyXG5cdHRyYW5zZm9ybXMgPSB7XHJcblx0XHQvLyBXZeKAmXJlIG9taXR0aW5nIE9wZXJhIGZvciB0aGUgdGltZSBiZWluZzsgTVMgdXNlcyB1bnByZWZpeGVkLlxyXG5cdFx0XCJNb3pUcmFuc2Zvcm1cIjogXCItbW96LXRyYW5zZm9ybVwiLFxyXG5cdFx0XCJ0cmFuc2Zvcm1cIjogXCJ0cmFuc2Zvcm1cIlxyXG5cdH07XHJcblxyXG5cdGZha2VCb2R5LmFwcGVuZCggZWwgKTtcclxuXHJcblx0Zm9yICggdCBpbiB0cmFuc2Zvcm1zICkge1xyXG5cdFx0aWYgKCBlbC5zdHlsZVsgdCBdICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdGVsLnN0eWxlWyB0IF0gPSBcInRyYW5zbGF0ZTNkKCAxMDBweCwgMXB4LCAxcHggKVwiO1xyXG5cdFx0XHRyZXQgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSggZWwgKS5nZXRQcm9wZXJ0eVZhbHVlKCB0cmFuc2Zvcm1zWyB0IF0gKTtcclxuXHRcdH1cclxuXHR9XHJcblx0cmV0dXJuICggISFyZXQgJiYgcmV0ICE9PSBcIm5vbmVcIiApO1xyXG59XHJcblxyXG4vLyBUZXN0IGZvciBkeW5hbWljLXVwZGF0aW5nIGJhc2UgdGFnIHN1cHBvcnQgKCBhbGxvd3MgdXMgdG8gYXZvaWQgaHJlZixzcmMgYXR0ciByZXdyaXRpbmcgKVxyXG5mdW5jdGlvbiBiYXNlVGFnVGVzdCgpIHtcclxuXHR2YXIgZmF1eEJhc2UgPSBsb2NhdGlvbi5wcm90b2NvbCArIFwiLy9cIiArIGxvY2F0aW9uLmhvc3QgKyBsb2NhdGlvbi5wYXRobmFtZSArIFwidWktZGlyL1wiLFxyXG5cdFx0YmFzZSA9ICQoIFwiaGVhZCBiYXNlXCIgKSxcclxuXHRcdGZhdXhFbGUgPSBudWxsLFxyXG5cdFx0aHJlZiA9IFwiXCIsXHJcblx0XHRsaW5rLCByZWJhc2U7XHJcblxyXG5cdGlmICggIWJhc2UubGVuZ3RoICkge1xyXG5cdFx0YmFzZSA9IGZhdXhFbGUgPSAkKCBcIjxiYXNlPlwiLCB7IFwiaHJlZlwiOiBmYXV4QmFzZSB9KS5hcHBlbmRUbyggXCJoZWFkXCIgKTtcclxuXHR9IGVsc2Uge1xyXG5cdFx0aHJlZiA9IGJhc2UuYXR0ciggXCJocmVmXCIgKTtcclxuXHR9XHJcblxyXG5cdGxpbmsgPSAkKCBcIjxhIGhyZWY9J3Rlc3R1cmwnIC8+XCIgKS5wcmVwZW5kVG8oIGZha2VCb2R5ICk7XHJcblx0cmViYXNlID0gbGlua1sgMCBdLmhyZWY7XHJcblx0YmFzZVsgMCBdLmhyZWYgPSBocmVmIHx8IGxvY2F0aW9uLnBhdGhuYW1lO1xyXG5cclxuXHRpZiAoIGZhdXhFbGUgKSB7XHJcblx0XHRmYXV4RWxlLnJlbW92ZSgpO1xyXG5cdH1cclxuXHRyZXR1cm4gcmViYXNlLmluZGV4T2YoIGZhdXhCYXNlICkgPT09IDA7XHJcbn1cclxuXHJcbi8vIFRoYW5rcyBNb2Rlcm5penJcclxuZnVuY3Rpb24gY3NzUG9pbnRlckV2ZW50c1Rlc3QoKSB7XHJcblx0dmFyIGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcInhcIiApLFxyXG5cdFx0ZG9jdW1lbnRFbGVtZW50ID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LFxyXG5cdFx0Z2V0Q29tcHV0ZWRTdHlsZSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlLFxyXG5cdFx0c3VwcG9ydHM7XHJcblxyXG5cdGlmICggISggXCJwb2ludGVyRXZlbnRzXCIgaW4gZWxlbWVudC5zdHlsZSApICkge1xyXG5cdFx0cmV0dXJuIGZhbHNlO1xyXG5cdH1cclxuXHJcblx0ZWxlbWVudC5zdHlsZS5wb2ludGVyRXZlbnRzID0gXCJhdXRvXCI7XHJcblx0ZWxlbWVudC5zdHlsZS5wb2ludGVyRXZlbnRzID0gXCJ4XCI7XHJcblx0ZG9jdW1lbnRFbGVtZW50LmFwcGVuZENoaWxkKCBlbGVtZW50ICk7XHJcblx0c3VwcG9ydHMgPSBnZXRDb21wdXRlZFN0eWxlICYmXHJcblx0Z2V0Q29tcHV0ZWRTdHlsZSggZWxlbWVudCwgXCJcIiApLnBvaW50ZXJFdmVudHMgPT09IFwiYXV0b1wiO1xyXG5cdGRvY3VtZW50RWxlbWVudC5yZW1vdmVDaGlsZCggZWxlbWVudCApO1xyXG5cdHJldHVybiAhIXN1cHBvcnRzO1xyXG59XHJcblxyXG5mdW5jdGlvbiBib3VuZGluZ1JlY3QoKSB7XHJcblx0dmFyIGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwiZGl2XCIgKTtcclxuXHRyZXR1cm4gdHlwZW9mIGRpdi5nZXRCb3VuZGluZ0NsaWVudFJlY3QgIT09IFwidW5kZWZpbmVkXCI7XHJcbn1cclxuXHJcbi8vIG5vbi1VQS1iYXNlZCBJRSB2ZXJzaW9uIGNoZWNrIGJ5IEphbWVzIFBhZG9sc2V5LCBtb2RpZmllZCBieSBqZGFsdG9uIC0gZnJvbSBodHRwOi8vZ2lzdC5naXRodWIuY29tLzUyNzY4M1xyXG4vLyBhbGxvd3MgZm9yIGluY2x1c2lvbiBvZiBJRSA2KywgaW5jbHVkaW5nIFdpbmRvd3MgTW9iaWxlIDdcclxuJC5leHRlbmQoICQubW9iaWxlLCB7IGJyb3dzZXI6IHt9IH0gKTtcclxuJC5tb2JpbGUuYnJvd3Nlci5vbGRJRSA9IChmdW5jdGlvbigpIHtcclxuXHR2YXIgdiA9IDMsXHJcblx0XHRkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcImRpdlwiICksXHJcblx0XHRhID0gZGl2LmFsbCB8fCBbXTtcclxuXHJcblx0ZG8ge1xyXG5cdFx0ZGl2LmlubmVySFRNTCA9IFwiPCEtLVtpZiBndCBJRSBcIiArICggKyt2ICkgKyBcIl0+PGJyPjwhW2VuZGlmXS0tPlwiO1xyXG5cdH0gd2hpbGUoIGFbMF0gKTtcclxuXHJcblx0cmV0dXJuIHYgPiA0ID8gdiA6ICF2O1xyXG59KSgpO1xyXG5cclxuZnVuY3Rpb24gZml4ZWRQb3NpdGlvbigpIHtcclxuXHR2YXIgdyA9IHdpbmRvdyxcclxuXHRcdHVhID0gbmF2aWdhdG9yLnVzZXJBZ2VudCxcclxuXHRcdHBsYXRmb3JtID0gbmF2aWdhdG9yLnBsYXRmb3JtLFxyXG5cdFx0Ly8gUmVuZGVyaW5nIGVuZ2luZSBpcyBXZWJraXQsIGFuZCBjYXB0dXJlIG1ham9yIHZlcnNpb25cclxuXHRcdHdrbWF0Y2ggPSB1YS5tYXRjaCggL0FwcGxlV2ViS2l0XFwvKFswLTldKykvICksXHJcblx0XHR3a3ZlcnNpb24gPSAhIXdrbWF0Y2ggJiYgd2ttYXRjaFsgMSBdLFxyXG5cdFx0ZmZtYXRjaCA9IHVhLm1hdGNoKCAvRmVubmVjXFwvKFswLTldKykvICksXHJcblx0XHRmZnZlcnNpb24gPSAhIWZmbWF0Y2ggJiYgZmZtYXRjaFsgMSBdLFxyXG5cdFx0b3BlcmFtbW9iaWxlbWF0Y2ggPSB1YS5tYXRjaCggL09wZXJhIE1vYmlcXC8oWzAtOV0rKS8gKSxcclxuXHRcdG9tdmVyc2lvbiA9ICEhb3BlcmFtbW9iaWxlbWF0Y2ggJiYgb3BlcmFtbW9iaWxlbWF0Y2hbIDEgXTtcclxuXHJcblx0aWYgKFxyXG5cdFx0Ly8gaU9TIDQuMyBhbmQgb2xkZXIgOiBQbGF0Zm9ybSBpcyBpUGhvbmUvUGFkL1RvdWNoIGFuZCBXZWJraXQgdmVyc2lvbiBpcyBsZXNzIHRoYW4gNTM0IChpb3M1KVxyXG5cdFx0KCAoIHBsYXRmb3JtLmluZGV4T2YoIFwiaVBob25lXCIgKSA+IC0xIHx8IHBsYXRmb3JtLmluZGV4T2YoIFwiaVBhZFwiICkgPiAtMSAgfHwgcGxhdGZvcm0uaW5kZXhPZiggXCJpUG9kXCIgKSA+IC0xICkgJiYgd2t2ZXJzaW9uICYmIHdrdmVyc2lvbiA8IDUzNCApIHx8XHJcblx0XHQvLyBPcGVyYSBNaW5pXHJcblx0XHQoIHcub3BlcmFtaW5pICYmICh7fSkudG9TdHJpbmcuY2FsbCggdy5vcGVyYW1pbmkgKSA9PT0gXCJbb2JqZWN0IE9wZXJhTWluaV1cIiApIHx8XHJcblx0XHQoIG9wZXJhbW1vYmlsZW1hdGNoICYmIG9tdmVyc2lvbiA8IDc0NTggKVx0fHxcclxuXHRcdC8vQW5kcm9pZCBsdGUgMi4xOiBQbGF0Zm9ybSBpcyBBbmRyb2lkIGFuZCBXZWJraXQgdmVyc2lvbiBpcyBsZXNzIHRoYW4gNTMzIChBbmRyb2lkIDIuMilcclxuXHRcdCggdWEuaW5kZXhPZiggXCJBbmRyb2lkXCIgKSA+IC0xICYmIHdrdmVyc2lvbiAmJiB3a3ZlcnNpb24gPCA1MzMgKSB8fFxyXG5cdFx0Ly8gRmlyZWZveCBNb2JpbGUgYmVmb3JlIDYuMCAtXHJcblx0XHQoIGZmdmVyc2lvbiAmJiBmZnZlcnNpb24gPCA2ICkgfHxcclxuXHRcdC8vIFdlYk9TIGxlc3MgdGhhbiAzXHJcblx0XHQoIFwicGFsbUdldFJlc291cmNlXCIgaW4gd2luZG93ICYmIHdrdmVyc2lvbiAmJiB3a3ZlcnNpb24gPCA1MzQgKVx0fHxcclxuXHRcdC8vIE1lZUdvXHJcblx0XHQoIHVhLmluZGV4T2YoIFwiTWVlR29cIiApID4gLTEgJiYgdWEuaW5kZXhPZiggXCJOb2tpYUJyb3dzZXIvOC41LjBcIiApID4gLTEgKSApIHtcclxuXHRcdHJldHVybiBmYWxzZTtcclxuXHR9XHJcblxyXG5cdHJldHVybiB0cnVlO1xyXG59XHJcblxyXG4kLmV4dGVuZCggJC5zdXBwb3J0LCB7XHJcblx0Ly8gTm90ZSwgQ2hyb21lIGZvciBpT1MgaGFzIGFuIGV4dHJlbWVseSBxdWlya3kgaW1wbGVtZW50YXRpb24gb2YgcG9wc3RhdGUuXHJcblx0Ly8gV2UndmUgY2hvc2VuIHRvIHRha2UgdGhlIHNob3J0ZXN0IHBhdGggdG8gYSBidWcgZml4IGhlcmUgZm9yIGlzc3VlICM1NDI2XHJcblx0Ly8gU2VlIHRoZSBmb2xsb3dpbmcgbGluayBmb3IgaW5mb3JtYXRpb24gYWJvdXQgdGhlIHJlZ2V4IGNob3NlblxyXG5cdC8vIGh0dHBzOi8vZGV2ZWxvcGVycy5nb29nbGUuY29tL2Nocm9tZS9tb2JpbGUvZG9jcy91c2VyLWFnZW50I2Nocm9tZV9mb3JfaW9zX3VzZXItYWdlbnRcclxuXHRwdXNoU3RhdGU6IFwicHVzaFN0YXRlXCIgaW4gaGlzdG9yeSAmJlxyXG5cdFx0XCJyZXBsYWNlU3RhdGVcIiBpbiBoaXN0b3J5ICYmXHJcblx0XHQvLyBXaGVuIHJ1bm5pbmcgaW5zaWRlIGEgRkYgaWZyYW1lLCBjYWxsaW5nIHJlcGxhY2VTdGF0ZSBjYXVzZXMgYW4gZXJyb3JcclxuXHRcdCEoIHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoIFwiRmlyZWZveFwiICkgPj0gMCAmJiB3aW5kb3cudG9wICE9PSB3aW5kb3cgKSAmJlxyXG5cdFx0KCB3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudC5zZWFyY2goL0NyaU9TLykgPT09IC0xICksXHJcblxyXG5cdG1lZGlhcXVlcnk6ICQubW9iaWxlLm1lZGlhKCBcIm9ubHkgYWxsXCIgKSxcclxuXHRjc3NQc2V1ZG9FbGVtZW50OiAhIXByb3BFeGlzdHMoIFwiY29udGVudFwiICksXHJcblx0dG91Y2hPdmVyZmxvdzogISFwcm9wRXhpc3RzKCBcIm92ZXJmbG93U2Nyb2xsaW5nXCIgKSxcclxuXHRjc3NUcmFuc2Zvcm0zZDogdHJhbnNmb3JtM2RUZXN0KCksXHJcblx0Ym94U2hhZG93OiAhIXByb3BFeGlzdHMoIFwiYm94U2hhZG93XCIgKSAmJiAhYmIsXHJcblx0Zml4ZWRQb3NpdGlvbjogZml4ZWRQb3NpdGlvbigpLFxyXG5cdHNjcm9sbFRvcDogKFwicGFnZVhPZmZzZXRcIiBpbiB3aW5kb3cgfHxcclxuXHRcdFwic2Nyb2xsVG9wXCIgaW4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50IHx8XHJcblx0XHRcInNjcm9sbFRvcFwiIGluIGZha2VCb2R5WyAwIF0pICYmICF3ZWJvcyAmJiAhb3BlcmFtaW5pLFxyXG5cclxuXHRkeW5hbWljQmFzZVRhZzogYmFzZVRhZ1Rlc3QoKSxcclxuXHRjc3NQb2ludGVyRXZlbnRzOiBjc3NQb2ludGVyRXZlbnRzVGVzdCgpLFxyXG5cdGJvdW5kaW5nUmVjdDogYm91bmRpbmdSZWN0KCksXHJcblx0aW5saW5lU1ZHOiBpbmxpbmVTVkdcclxufSk7XHJcblxyXG5mYWtlQm9keS5yZW1vdmUoKTtcclxuXHJcbi8vICQubW9iaWxlLmFqYXhCbGFja2xpc3QgaXMgdXNlZCB0byBvdmVycmlkZSBhamF4RW5hYmxlZCBvbiBwbGF0Zm9ybXMgdGhhdCBoYXZlIGtub3duIGNvbmZsaWN0cyB3aXRoIGhhc2ggaGlzdG9yeSB1cGRhdGVzIChCQjUsIFN5bWJpYW4pXHJcbi8vIG9yIHRoYXQgZ2VuZXJhbGx5IHdvcmsgYmV0dGVyIGJyb3dzaW5nIGluIHJlZ3VsYXIgaHR0cCBmb3IgZnVsbCBwYWdlIHJlZnJlc2hlcyAoT3BlcmEgTWluaSlcclxuLy8gTm90ZTogVGhpcyBkZXRlY3Rpb24gYmVsb3cgaXMgdXNlZCBhcyBhIGxhc3QgcmVzb3J0LlxyXG4vLyBXZSByZWNvbW1lbmQgb25seSB1c2luZyB0aGVzZSBkZXRlY3Rpb24gbWV0aG9kcyB3aGVuIGFsbCBvdGhlciBtb3JlIHJlbGlhYmxlL2ZvcndhcmQtbG9va2luZyBhcHByb2FjaGVzIGFyZSBub3QgcG9zc2libGVcclxubm9raWFMVEU3XzMgPSAoZnVuY3Rpb24oKSB7XHJcblxyXG5cdHZhciB1YSA9IHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50O1xyXG5cclxuXHQvL1RoZSBmb2xsb3dpbmcgaXMgYW4gYXR0ZW1wdCB0byBtYXRjaCBOb2tpYSBicm93c2VycyB0aGF0IGFyZSBydW5uaW5nIFN5bWJpYW4vczYwLCB3aXRoIHdlYmtpdCwgdmVyc2lvbiA3LjMgb3Igb2xkZXJcclxuXHRyZXR1cm4gdWEuaW5kZXhPZiggXCJOb2tpYVwiICkgPiAtMSAmJlxyXG5cdFx0XHQoIHVhLmluZGV4T2YoIFwiU3ltYmlhbi8zXCIgKSA+IC0xIHx8IHVhLmluZGV4T2YoIFwiU2VyaWVzNjAvNVwiICkgPiAtMSApICYmXHJcblx0XHRcdHVhLmluZGV4T2YoIFwiQXBwbGVXZWJLaXRcIiApID4gLTEgJiZcclxuXHRcdFx0dWEubWF0Y2goIC8oQnJvd3Nlck5HfE5va2lhQnJvd3NlcilcXC83XFwuWzAtM10vICk7XHJcbn0pKCk7XHJcblxyXG4vLyBTdXBwb3J0IGNvbmRpdGlvbnMgdGhhdCBtdXN0IGJlIG1ldCBpbiBvcmRlciB0byBwcm9jZWVkXHJcbi8vIGRlZmF1bHQgZW5oYW5jZWQgcXVhbGlmaWNhdGlvbnMgYXJlIG1lZGlhIHF1ZXJ5IHN1cHBvcnQgT1IgSUUgNytcclxuXHJcbiQubW9iaWxlLmdyYWRlQSA9IGZ1bmN0aW9uKCkge1xyXG5cdHJldHVybiAoICggJC5zdXBwb3J0Lm1lZGlhcXVlcnkgJiYgJC5zdXBwb3J0LmNzc1BzZXVkb0VsZW1lbnQgKSB8fCAkLm1vYmlsZS5icm93c2VyLm9sZElFICYmICQubW9iaWxlLmJyb3dzZXIub2xkSUUgPj0gOCApICYmICggJC5zdXBwb3J0LmJvdW5kaW5nUmVjdCB8fCAkLmZuLmpxdWVyeS5tYXRjaCgvMVxcLlswLTcrXVxcLlswLTkrXT8vKSAhPT0gbnVsbCApO1xyXG59O1xyXG5cclxuJC5tb2JpbGUuYWpheEJsYWNrbGlzdCA9XHJcblx0XHRcdC8vIEJsYWNrQmVycnkgYnJvd3NlcnMsIHByZS13ZWJraXRcclxuXHRcdFx0d2luZG93LmJsYWNrYmVycnkgJiYgIXdpbmRvdy5XZWJLaXRQb2ludCB8fFxyXG5cdFx0XHQvLyBPcGVyYSBNaW5pXHJcblx0XHRcdG9wZXJhbWluaSB8fFxyXG5cdFx0XHQvLyBTeW1iaWFuIHdlYmtpdHMgcHJlIDcuM1xyXG5cdFx0XHRub2tpYUxURTdfMztcclxuXHJcbi8vIExhc3RseSwgdGhpcyB3b3JrYXJvdW5kIGlzIHRoZSBvbmx5IHdheSB3ZSd2ZSBmb3VuZCBzbyBmYXIgdG8gZ2V0IHByZSA3LjMgU3ltYmlhbiB3ZWJraXQgZGV2aWNlc1xyXG4vLyB0byByZW5kZXIgdGhlIHN0eWxlc2hlZXRzIHdoZW4gdGhleSdyZSByZWZlcmVuY2VkIGJlZm9yZSB0aGlzIHNjcmlwdCwgYXMgd2UnZCByZWNvbW1lbmQgZG9pbmcuXHJcbi8vIFRoaXMgc2ltcGx5IHJlYXBwZW5kcyB0aGUgQ1NTIGluIHBsYWNlLCB3aGljaCBmb3Igc29tZSByZWFzb24gbWFrZXMgaXQgYXBwbHlcclxuaWYgKCBub2tpYUxURTdfMyApIHtcclxuXHQkKGZ1bmN0aW9uKCkge1xyXG5cdFx0JCggXCJoZWFkIGxpbmtbcmVsPSdzdHlsZXNoZWV0J11cIiApLmF0dHIoIFwicmVsXCIsIFwiYWx0ZXJuYXRlIHN0eWxlc2hlZXRcIiApLmF0dHIoIFwicmVsXCIsIFwic3R5bGVzaGVldFwiICk7XHJcblx0fSk7XHJcbn1cclxuXHJcbi8vIEZvciBydWxpbmcgb3V0IHNoYWRvd3MgdmlhIGNzc1xyXG5pZiAoICEkLnN1cHBvcnQuYm94U2hhZG93ICkge1xyXG5cdCQoIFwiaHRtbFwiICkuYWRkQ2xhc3MoIFwidWktbm9ib3hzaGFkb3dcIiApO1xyXG59XHJcblxyXG59KSggalF1ZXJ5ICk7XHJcblxyXG5cclxuKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7XHJcblx0dmFyICR3aW4gPSAkLm1vYmlsZS53aW5kb3csIHNlbGYsXHJcblx0XHRkdW1teUZuVG9Jbml0TmF2aWdhdGUgPSBmdW5jdGlvbigpIHtcclxuXHRcdH07XHJcblxyXG5cdCQuZXZlbnQuc3BlY2lhbC5iZWZvcmVuYXZpZ2F0ZSA9IHtcclxuXHRcdHNldHVwOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0JHdpbi5vbiggXCJuYXZpZ2F0ZVwiLCBkdW1teUZuVG9Jbml0TmF2aWdhdGUgKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0dGVhcmRvd246IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHQkd2luLm9mZiggXCJuYXZpZ2F0ZVwiLCBkdW1teUZuVG9Jbml0TmF2aWdhdGUgKTtcclxuXHRcdH1cclxuXHR9O1xyXG5cclxuXHQkLmV2ZW50LnNwZWNpYWwubmF2aWdhdGUgPSBzZWxmID0ge1xyXG5cdFx0Ym91bmQ6IGZhbHNlLFxyXG5cclxuXHRcdHB1c2hTdGF0ZUVuYWJsZWQ6IHRydWUsXHJcblxyXG5cdFx0b3JpZ2luYWxFdmVudE5hbWU6IHVuZGVmaW5lZCxcclxuXHJcblx0XHQvLyBJZiBwdXNoc3RhdGUgc3VwcG9ydCBpcyBwcmVzZW50IGFuZCBwdXNoIHN0YXRlIHN1cHBvcnQgaXMgZGVmaW5lZCB0b1xyXG5cdFx0Ly8gYmUgdHJ1ZSBvbiB0aGUgbW9iaWxlIG5hbWVzcGFjZS5cclxuXHRcdGlzUHVzaFN0YXRlRW5hYmxlZDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHJldHVybiAkLnN1cHBvcnQucHVzaFN0YXRlICYmXHJcblx0XHRcdFx0JC5tb2JpbGUucHVzaFN0YXRlRW5hYmxlZCA9PT0gdHJ1ZSAmJlxyXG5cdFx0XHRcdHRoaXMuaXNIYXNoQ2hhbmdlRW5hYmxlZCgpO1xyXG5cdFx0fSxcclxuXHJcblx0XHQvLyAhISBhc3N1bWVzIG1vYmlsZSBuYW1lc3BhY2UgaXMgcHJlc2VudFxyXG5cdFx0aXNIYXNoQ2hhbmdlRW5hYmxlZDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHJldHVybiAkLm1vYmlsZS5oYXNoTGlzdGVuaW5nRW5hYmxlZCA9PT0gdHJ1ZTtcclxuXHRcdH0sXHJcblxyXG5cdFx0Ly8gVE9ETyBhIGxvdCBvZiBkdXBsaWNhdGlvbiBiZXR3ZWVuIHBvcHN0YXRlIGFuZCBoYXNoY2hhbmdlXHJcblx0XHRwb3BzdGF0ZTogZnVuY3Rpb24oIGV2ZW50ICkge1xyXG5cdFx0XHR2YXIgbmV3RXZlbnQgPSBuZXcgJC5FdmVudCggXCJuYXZpZ2F0ZVwiICksXHJcblx0XHRcdFx0YmVmb3JlTmF2aWdhdGUgPSBuZXcgJC5FdmVudCggXCJiZWZvcmVuYXZpZ2F0ZVwiICksXHJcblx0XHRcdFx0c3RhdGUgPSBldmVudC5vcmlnaW5hbEV2ZW50LnN0YXRlIHx8IHt9O1xyXG5cclxuXHRcdFx0YmVmb3JlTmF2aWdhdGUub3JpZ2luYWxFdmVudCA9IGV2ZW50O1xyXG5cdFx0XHQkd2luLnRyaWdnZXIoIGJlZm9yZU5hdmlnYXRlICk7XHJcblxyXG5cdFx0XHRpZiAoIGJlZm9yZU5hdmlnYXRlLmlzRGVmYXVsdFByZXZlbnRlZCgpICkge1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aWYgKCBldmVudC5oaXN0b3J5U3RhdGUgKSB7XHJcblx0XHRcdFx0JC5leHRlbmQoc3RhdGUsIGV2ZW50Lmhpc3RvcnlTdGF0ZSk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIE1ha2Ugc3VyZSB0aGUgb3JpZ2luYWwgZXZlbnQgaXMgdHJhY2tlZCBmb3IgdGhlIGVuZFxyXG5cdFx0XHQvLyB1c2VyIHRvIGluc3BlY3QgaW5jYXNlIHRoZXkgd2FudCB0byBkbyBzb21ldGhpbmcgc3BlY2lhbFxyXG5cdFx0XHRuZXdFdmVudC5vcmlnaW5hbEV2ZW50ID0gZXZlbnQ7XHJcblxyXG5cdFx0XHQvLyBOT1RFIHdlIGxldCB0aGUgY3VycmVudCBzdGFjayB1bndpbmQgYmVjYXVzZSBhbnkgYXNzaWdubWVudCB0b1xyXG5cdFx0XHQvLyAgICAgIGxvY2F0aW9uLmhhc2ggd2lsbCBzdG9wIHRoZSB3b3JsZCBhbmQgcnVuIHRoaXMgZXZlbnQgaGFuZGxlci4gQnlcclxuXHRcdFx0Ly8gICAgICBkb2luZyB0aGlzIHdlIGNyZWF0ZSBhIHNpbWlsYXIgYmVoYXZpb3IgdG8gaGFzaGNoYW5nZSBvbiBoYXNoXHJcblx0XHRcdC8vICAgICAgYXNzaWdubWVudFxyXG5cdFx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdCR3aW4udHJpZ2dlciggbmV3RXZlbnQsIHtcclxuXHRcdFx0XHRcdHN0YXRlOiBzdGF0ZVxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9LCAwKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0aGFzaGNoYW5nZTogZnVuY3Rpb24oIGV2ZW50IC8qLCBkYXRhICovICkge1xyXG5cdFx0XHR2YXIgbmV3RXZlbnQgPSBuZXcgJC5FdmVudCggXCJuYXZpZ2F0ZVwiICksXHJcblx0XHRcdFx0YmVmb3JlTmF2aWdhdGUgPSBuZXcgJC5FdmVudCggXCJiZWZvcmVuYXZpZ2F0ZVwiICk7XHJcblxyXG5cdFx0XHRiZWZvcmVOYXZpZ2F0ZS5vcmlnaW5hbEV2ZW50ID0gZXZlbnQ7XHJcblx0XHRcdCR3aW4udHJpZ2dlciggYmVmb3JlTmF2aWdhdGUgKTtcclxuXHJcblx0XHRcdGlmICggYmVmb3JlTmF2aWdhdGUuaXNEZWZhdWx0UHJldmVudGVkKCkgKSB7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBNYWtlIHN1cmUgdGhlIG9yaWdpbmFsIGV2ZW50IGlzIHRyYWNrZWQgZm9yIHRoZSBlbmRcclxuXHRcdFx0Ly8gdXNlciB0byBpbnNwZWN0IGluY2FzZSB0aGV5IHdhbnQgdG8gZG8gc29tZXRoaW5nIHNwZWNpYWxcclxuXHRcdFx0bmV3RXZlbnQub3JpZ2luYWxFdmVudCA9IGV2ZW50O1xyXG5cclxuXHRcdFx0Ly8gVHJpZ2dlciB0aGUgaGFzaGNoYW5nZSB3aXRoIHN0YXRlIHByb3ZpZGVkIGJ5IHRoZSB1c2VyXHJcblx0XHRcdC8vIHRoYXQgYWx0ZXJlZCB0aGUgaGFzaFxyXG5cdFx0XHQkd2luLnRyaWdnZXIoIG5ld0V2ZW50LCB7XHJcblx0XHRcdFx0Ly8gVXNlcnMgdGhhdCB3YW50IHRvIGZ1bGx5IG5vcm1hbGl6ZSB0aGUgdHdvIGV2ZW50c1xyXG5cdFx0XHRcdC8vIHdpbGwgbmVlZCB0byBkbyBoaXN0b3J5IG1hbmFnZW1lbnQgZG93biB0aGUgc3RhY2sgYW5kXHJcblx0XHRcdFx0Ly8gYWRkIHRoZSBzdGF0ZSB0byB0aGUgZXZlbnQgYmVmb3JlIHRoaXMgYmluZGluZyBpcyBmaXJlZFxyXG5cdFx0XHRcdC8vIFRPRE8gY29uc2lkZXIgYWxsb3dpbmcgZm9yIHRoZSBleHBsaWNpdCBhZGRpdGlvbiBvZiBjYWxsYmFja3NcclxuXHRcdFx0XHQvLyAgICAgIHRvIGJlIGZpcmVkIGJlZm9yZSB0aGlzIHZhbHVlIGlzIHNldCB0byBhdm9pZCBldmVudCB0aW1pbmcgaXNzdWVzXHJcblx0XHRcdFx0c3RhdGU6IGV2ZW50Lmhhc2hjaGFuZ2VTdGF0ZSB8fCB7fVxyXG5cdFx0XHR9KTtcclxuXHRcdH0sXHJcblxyXG5cdFx0Ly8gVE9ETyBXZSByZWFsbHkgb25seSB3YW50IHRvIHNldCB0aGlzIHVwIG9uY2VcclxuXHRcdC8vICAgICAgYnV0IEknbSBub3QgY2xlYXIgaWYgdGhlcmUncyBhIGJldGVyIHdheSB0byBhY2hpZXZlXHJcblx0XHQvLyAgICAgIHRoaXMgd2l0aCB0aGUgalF1ZXJ5IHNwZWNpYWwgZXZlbnQgc3RydWN0dXJlXHJcblx0XHRzZXR1cDogZnVuY3Rpb24oIC8qIGRhdGEsIG5hbWVzcGFjZXMgKi8gKSB7XHJcblx0XHRcdGlmICggc2VsZi5ib3VuZCApIHtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHNlbGYuYm91bmQgPSB0cnVlO1xyXG5cclxuXHRcdFx0aWYgKCBzZWxmLmlzUHVzaFN0YXRlRW5hYmxlZCgpICkge1xyXG5cdFx0XHRcdHNlbGYub3JpZ2luYWxFdmVudE5hbWUgPSBcInBvcHN0YXRlXCI7XHJcblx0XHRcdFx0JHdpbi5iaW5kKCBcInBvcHN0YXRlLm5hdmlnYXRlXCIsIHNlbGYucG9wc3RhdGUgKTtcclxuXHRcdFx0fSBlbHNlIGlmICggc2VsZi5pc0hhc2hDaGFuZ2VFbmFibGVkKCkgKSB7XHJcblx0XHRcdFx0c2VsZi5vcmlnaW5hbEV2ZW50TmFtZSA9IFwiaGFzaGNoYW5nZVwiO1xyXG5cdFx0XHRcdCR3aW4uYmluZCggXCJoYXNoY2hhbmdlLm5hdmlnYXRlXCIsIHNlbGYuaGFzaGNoYW5nZSApO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fTtcclxufSkoIGpRdWVyeSApO1xyXG5cclxuXHJcblxyXG4oZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcclxuXHRcdHZhciBwYXRoLCAkYmFzZSwgZGlhbG9nSGFzaEtleSA9IFwiJnVpLXN0YXRlPWRpYWxvZ1wiO1xyXG5cclxuXHRcdCQubW9iaWxlLnBhdGggPSBwYXRoID0ge1xyXG5cdFx0XHR1aVN0YXRlS2V5OiBcIiZ1aS1zdGF0ZVwiLFxyXG5cclxuXHRcdFx0Ly8gVGhpcyBzY2FyeSBsb29raW5nIHJlZ3VsYXIgZXhwcmVzc2lvbiBwYXJzZXMgYW4gYWJzb2x1dGUgVVJMIG9yIGl0cyByZWxhdGl2ZVxyXG5cdFx0XHQvLyB2YXJpYW50cyAocHJvdG9jb2wsIHNpdGUsIGRvY3VtZW50LCBxdWVyeSwgYW5kIGhhc2gpLCBpbnRvIHRoZSB2YXJpb3VzXHJcblx0XHRcdC8vIGNvbXBvbmVudHMgKHByb3RvY29sLCBob3N0LCBwYXRoLCBxdWVyeSwgZnJhZ21lbnQsIGV0YyB0aGF0IG1ha2UgdXAgdGhlXHJcblx0XHRcdC8vIFVSTCBhcyB3ZWxsIGFzIHNvbWUgb3RoZXIgY29tbW9ubHkgdXNlZCBzdWItcGFydHMuIFdoZW4gdXNlZCB3aXRoIFJlZ0V4cC5leGVjKClcclxuXHRcdFx0Ly8gb3IgU3RyaW5nLm1hdGNoLCBpdCBwYXJzZXMgdGhlIFVSTCBpbnRvIGEgcmVzdWx0cyBhcnJheSB0aGF0IGxvb2tzIGxpa2UgdGhpczpcclxuXHRcdFx0Ly9cclxuXHRcdFx0Ly8gICAgIFswXTogaHR0cDovL2pibGFzOnBhc3N3b3JkQG15Y29tcGFueS5jb206ODA4MC9tYWlsL2luYm94P21zZz0xMjM0JnR5cGU9dW5yZWFkI21zZy1jb250ZW50XHJcblx0XHRcdC8vICAgICBbMV06IGh0dHA6Ly9qYmxhczpwYXNzd29yZEBteWNvbXBhbnkuY29tOjgwODAvbWFpbC9pbmJveD9tc2c9MTIzNCZ0eXBlPXVucmVhZFxyXG5cdFx0XHQvLyAgICAgWzJdOiBodHRwOi8vamJsYXM6cGFzc3dvcmRAbXljb21wYW55LmNvbTo4MDgwL21haWwvaW5ib3hcclxuXHRcdFx0Ly8gICAgIFszXTogaHR0cDovL2pibGFzOnBhc3N3b3JkQG15Y29tcGFueS5jb206ODA4MFxyXG5cdFx0XHQvLyAgICAgWzRdOiBodHRwOlxyXG5cdFx0XHQvLyAgICAgWzVdOiAvL1xyXG5cdFx0XHQvLyAgICAgWzZdOiBqYmxhczpwYXNzd29yZEBteWNvbXBhbnkuY29tOjgwODBcclxuXHRcdFx0Ly8gICAgIFs3XTogamJsYXM6cGFzc3dvcmRcclxuXHRcdFx0Ly8gICAgIFs4XTogamJsYXNcclxuXHRcdFx0Ly8gICAgIFs5XTogcGFzc3dvcmRcclxuXHRcdFx0Ly8gICAgWzEwXTogbXljb21wYW55LmNvbTo4MDgwXHJcblx0XHRcdC8vICAgIFsxMV06IG15Y29tcGFueS5jb21cclxuXHRcdFx0Ly8gICAgWzEyXTogODA4MFxyXG5cdFx0XHQvLyAgICBbMTNdOiAvbWFpbC9pbmJveFxyXG5cdFx0XHQvLyAgICBbMTRdOiAvbWFpbC9cclxuXHRcdFx0Ly8gICAgWzE1XTogaW5ib3hcclxuXHRcdFx0Ly8gICAgWzE2XTogP21zZz0xMjM0JnR5cGU9dW5yZWFkXHJcblx0XHRcdC8vICAgIFsxN106ICNtc2ctY29udGVudFxyXG5cdFx0XHQvL1xyXG5cdFx0XHR1cmxQYXJzZVJFOiAvXlxccyooKCgoW146XFwvI1xcP10rOik/KD86KFxcL1xcLykoKD86KChbXjpAXFwvI1xcP10rKSg/OlxcOihbXjpAXFwvI1xcP10rKSk/KUApPygoW146XFwvI1xcP1xcXVxcW10rfFxcW1teXFwvXFxdQCM/XStcXF0pKD86XFw6KFswLTldKykpPykpPyk/KT8oKFxcLz8oPzpbXlxcL1xcPyNdK1xcLyspKikoW15cXD8jXSopKSk/KFxcP1teI10rKT8pKCMuKik/LyxcclxuXHJcblx0XHRcdC8vIEFic3RyYWN0aW9uIHRvIGFkZHJlc3MgeHNzIChJc3N1ZSAjNDc4NykgYnkgcmVtb3ZpbmcgdGhlIGF1dGhvcml0eSBpblxyXG5cdFx0XHQvLyBicm93c2VycyB0aGF0IGF1dG8tZGVjb2RlIGl0LiBBbGwgcmVmZXJlbmNlcyB0byBsb2NhdGlvbi5ocmVmIHNob3VsZCBiZVxyXG5cdFx0XHQvLyByZXBsYWNlZCB3aXRoIGEgY2FsbCB0byB0aGlzIG1ldGhvZCBzbyB0aGF0IGl0IGNhbiBiZSBkZWFsdCB3aXRoIHByb3Blcmx5IGhlcmVcclxuXHRcdFx0Z2V0TG9jYXRpb246IGZ1bmN0aW9uKCB1cmwgKSB7XHJcblx0XHRcdFx0dmFyIHBhcnNlZFVybCA9IHRoaXMucGFyc2VVcmwoIHVybCB8fCBsb2NhdGlvbi5ocmVmICksXHJcblx0XHRcdFx0XHR1cmkgPSB1cmwgPyBwYXJzZWRVcmwgOiBsb2NhdGlvbixcclxuXHJcblx0XHRcdFx0XHQvLyBNYWtlIHN1cmUgdG8gcGFyc2UgdGhlIHVybCBvciB0aGUgbG9jYXRpb24gb2JqZWN0IGZvciB0aGUgaGFzaCBiZWNhdXNlIHVzaW5nXHJcblx0XHRcdFx0XHQvLyBsb2NhdGlvbi5oYXNoIGlzIGF1dG9kZWNvZGVkIGluIGZpcmVmb3gsIHRoZSByZXN0IG9mIHRoZSB1cmwgc2hvdWxkIGJlIGZyb21cclxuXHRcdFx0XHRcdC8vIHRoZSBvYmplY3QgKGxvY2F0aW9uIHVubGVzcyB3ZSdyZSB0ZXN0aW5nKSB0byBhdm9pZCB0aGUgaW5jbHVzaW9uIG9mIHRoZVxyXG5cdFx0XHRcdFx0Ly8gYXV0aG9yaXR5XHJcblx0XHRcdFx0XHRoYXNoID0gcGFyc2VkVXJsLmhhc2g7XHJcblxyXG5cdFx0XHRcdC8vIG1pbWljIHRoZSBicm93c2VyIHdpdGggYW4gZW1wdHkgc3RyaW5nIHdoZW4gdGhlIGhhc2ggaXMgZW1wdHlcclxuXHRcdFx0XHRoYXNoID0gaGFzaCA9PT0gXCIjXCIgPyBcIlwiIDogaGFzaDtcclxuXHJcblx0XHRcdFx0cmV0dXJuIHVyaS5wcm90b2NvbCArXHJcblx0XHRcdFx0XHRwYXJzZWRVcmwuZG91YmxlU2xhc2ggK1xyXG5cdFx0XHRcdFx0dXJpLmhvc3QgK1xyXG5cclxuXHRcdFx0XHRcdC8vIFRoZSBwYXRobmFtZSBtdXN0IHN0YXJ0IHdpdGggYSBzbGFzaCBpZiB0aGVyZSdzIGEgcHJvdG9jb2wsIGJlY2F1c2UgeW91XHJcblx0XHRcdFx0XHQvLyBjYW4ndCBoYXZlIGEgcHJvdG9jb2wgZm9sbG93ZWQgYnkgYSByZWxhdGl2ZSBwYXRoLiBBbHNvLCBpdCdzIGltcG9zc2libGUgdG9cclxuXHRcdFx0XHRcdC8vIGNhbGN1bGF0ZSBhYnNvbHV0ZSBVUkxzIGZyb20gcmVsYXRpdmUgb25lcyBpZiB0aGUgYWJzb2x1dGUgb25lIGRvZXNuJ3QgaGF2ZVxyXG5cdFx0XHRcdFx0Ly8gYSBsZWFkaW5nIFwiL1wiLlxyXG5cdFx0XHRcdFx0KCAoIHVyaS5wcm90b2NvbCAhPT0gXCJcIiAmJiB1cmkucGF0aG5hbWUuc3Vic3RyaW5nKCAwLCAxICkgIT09IFwiL1wiICkgP1xyXG5cdFx0XHRcdFx0XHRcIi9cIiA6IFwiXCIgKSArXHJcblx0XHRcdFx0XHR1cmkucGF0aG5hbWUgK1xyXG5cdFx0XHRcdFx0dXJpLnNlYXJjaCArXHJcblx0XHRcdFx0XHRoYXNoO1xyXG5cdFx0XHR9LFxyXG5cclxuXHRcdFx0Ly9yZXR1cm4gdGhlIG9yaWdpbmFsIGRvY3VtZW50IHVybFxyXG5cdFx0XHRnZXREb2N1bWVudFVybDogZnVuY3Rpb24oIGFzUGFyc2VkT2JqZWN0ICkge1xyXG5cdFx0XHRcdHJldHVybiBhc1BhcnNlZE9iamVjdCA/ICQuZXh0ZW5kKCB7fSwgcGF0aC5kb2N1bWVudFVybCApIDogcGF0aC5kb2N1bWVudFVybC5ocmVmO1xyXG5cdFx0XHR9LFxyXG5cclxuXHRcdFx0cGFyc2VMb2NhdGlvbjogZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0cmV0dXJuIHRoaXMucGFyc2VVcmwoIHRoaXMuZ2V0TG9jYXRpb24oKSApO1xyXG5cdFx0XHR9LFxyXG5cclxuXHRcdFx0Ly9QYXJzZSBhIFVSTCBpbnRvIGEgc3RydWN0dXJlIHRoYXQgYWxsb3dzIGVhc3kgYWNjZXNzIHRvXHJcblx0XHRcdC8vYWxsIG9mIHRoZSBVUkwgY29tcG9uZW50cyBieSBuYW1lLlxyXG5cdFx0XHRwYXJzZVVybDogZnVuY3Rpb24oIHVybCApIHtcclxuXHRcdFx0XHQvLyBJZiB3ZSdyZSBwYXNzZWQgYW4gb2JqZWN0LCB3ZSdsbCBhc3N1bWUgdGhhdCBpdCBpc1xyXG5cdFx0XHRcdC8vIGEgcGFyc2VkIHVybCBvYmplY3QgYW5kIGp1c3QgcmV0dXJuIGl0IGJhY2sgdG8gdGhlIGNhbGxlci5cclxuXHRcdFx0XHRpZiAoICQudHlwZSggdXJsICkgPT09IFwib2JqZWN0XCIgKSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gdXJsO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0dmFyIG1hdGNoZXMgPSBwYXRoLnVybFBhcnNlUkUuZXhlYyggdXJsIHx8IFwiXCIgKSB8fCBbXTtcclxuXHJcblx0XHRcdFx0XHQvLyBDcmVhdGUgYW4gb2JqZWN0IHRoYXQgYWxsb3dzIHRoZSBjYWxsZXIgdG8gYWNjZXNzIHRoZSBzdWItbWF0Y2hlc1xyXG5cdFx0XHRcdFx0Ly8gYnkgbmFtZS4gTm90ZSB0aGF0IElFIHJldHVybnMgYW4gZW1wdHkgc3RyaW5nIGluc3RlYWQgb2YgdW5kZWZpbmVkLFxyXG5cdFx0XHRcdFx0Ly8gbGlrZSBhbGwgb3RoZXIgYnJvd3NlcnMgZG8sIHNvIHdlIG5vcm1hbGl6ZSBldmVyeXRoaW5nIHNvIGl0cyBjb25zaXN0ZW50XHJcblx0XHRcdFx0XHQvLyBubyBtYXR0ZXIgd2hhdCBicm93c2VyIHdlJ3JlIHJ1bm5pbmcgb24uXHJcblx0XHRcdFx0XHRyZXR1cm4ge1xyXG5cdFx0XHRcdFx0XHRocmVmOiAgICAgICAgIG1hdGNoZXNbICAwIF0gfHwgXCJcIixcclxuXHRcdFx0XHRcdFx0aHJlZk5vSGFzaDogICBtYXRjaGVzWyAgMSBdIHx8IFwiXCIsXHJcblx0XHRcdFx0XHRcdGhyZWZOb1NlYXJjaDogbWF0Y2hlc1sgIDIgXSB8fCBcIlwiLFxyXG5cdFx0XHRcdFx0XHRkb21haW46ICAgICAgIG1hdGNoZXNbICAzIF0gfHwgXCJcIixcclxuXHRcdFx0XHRcdFx0cHJvdG9jb2w6ICAgICBtYXRjaGVzWyAgNCBdIHx8IFwiXCIsXHJcblx0XHRcdFx0XHRcdGRvdWJsZVNsYXNoOiAgbWF0Y2hlc1sgIDUgXSB8fCBcIlwiLFxyXG5cdFx0XHRcdFx0XHRhdXRob3JpdHk6ICAgIG1hdGNoZXNbICA2IF0gfHwgXCJcIixcclxuXHRcdFx0XHRcdFx0dXNlcm5hbWU6ICAgICBtYXRjaGVzWyAgOCBdIHx8IFwiXCIsXHJcblx0XHRcdFx0XHRcdHBhc3N3b3JkOiAgICAgbWF0Y2hlc1sgIDkgXSB8fCBcIlwiLFxyXG5cdFx0XHRcdFx0XHRob3N0OiAgICAgICAgIG1hdGNoZXNbIDEwIF0gfHwgXCJcIixcclxuXHRcdFx0XHRcdFx0aG9zdG5hbWU6ICAgICBtYXRjaGVzWyAxMSBdIHx8IFwiXCIsXHJcblx0XHRcdFx0XHRcdHBvcnQ6ICAgICAgICAgbWF0Y2hlc1sgMTIgXSB8fCBcIlwiLFxyXG5cdFx0XHRcdFx0XHRwYXRobmFtZTogICAgIG1hdGNoZXNbIDEzIF0gfHwgXCJcIixcclxuXHRcdFx0XHRcdFx0ZGlyZWN0b3J5OiAgICBtYXRjaGVzWyAxNCBdIHx8IFwiXCIsXHJcblx0XHRcdFx0XHRcdGZpbGVuYW1lOiAgICAgbWF0Y2hlc1sgMTUgXSB8fCBcIlwiLFxyXG5cdFx0XHRcdFx0XHRzZWFyY2g6ICAgICAgIG1hdGNoZXNbIDE2IF0gfHwgXCJcIixcclxuXHRcdFx0XHRcdFx0aGFzaDogICAgICAgICBtYXRjaGVzWyAxNyBdIHx8IFwiXCJcclxuXHRcdFx0XHRcdH07XHJcblx0XHRcdH0sXHJcblxyXG5cdFx0XHQvL1R1cm4gcmVsUGF0aCBpbnRvIGFuIGFzYm9sdXRlIHBhdGguIGFic1BhdGggaXNcclxuXHRcdFx0Ly9hbiBvcHRpb25hbCBhYnNvbHV0ZSBwYXRoIHdoaWNoIGRlc2NyaWJlcyB3aGF0XHJcblx0XHRcdC8vcmVsUGF0aCBpcyByZWxhdGl2ZSB0by5cclxuXHRcdFx0bWFrZVBhdGhBYnNvbHV0ZTogZnVuY3Rpb24oIHJlbFBhdGgsIGFic1BhdGggKSB7XHJcblx0XHRcdFx0dmFyIGFic1N0YWNrLFxyXG5cdFx0XHRcdFx0cmVsU3RhY2ssXHJcblx0XHRcdFx0XHRpLCBkO1xyXG5cclxuXHRcdFx0XHRpZiAoIHJlbFBhdGggJiYgcmVsUGF0aC5jaGFyQXQoIDAgKSA9PT0gXCIvXCIgKSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gcmVsUGF0aDtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdHJlbFBhdGggPSByZWxQYXRoIHx8IFwiXCI7XHJcblx0XHRcdFx0YWJzUGF0aCA9IGFic1BhdGggPyBhYnNQYXRoLnJlcGxhY2UoIC9eXFwvfChcXC9bXlxcL10qfFteXFwvXSspJC9nLCBcIlwiICkgOiBcIlwiO1xyXG5cclxuXHRcdFx0XHRhYnNTdGFjayA9IGFic1BhdGggPyBhYnNQYXRoLnNwbGl0KCBcIi9cIiApIDogW107XHJcblx0XHRcdFx0cmVsU3RhY2sgPSByZWxQYXRoLnNwbGl0KCBcIi9cIiApO1xyXG5cclxuXHRcdFx0XHRmb3IgKCBpID0gMDsgaSA8IHJlbFN0YWNrLmxlbmd0aDsgaSsrICkge1xyXG5cdFx0XHRcdFx0ZCA9IHJlbFN0YWNrWyBpIF07XHJcblx0XHRcdFx0XHRzd2l0Y2ggKCBkICkge1xyXG5cdFx0XHRcdFx0XHRjYXNlIFwiLlwiOlxyXG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdFx0XHRjYXNlIFwiLi5cIjpcclxuXHRcdFx0XHRcdFx0XHRpZiAoIGFic1N0YWNrLmxlbmd0aCApIHtcclxuXHRcdFx0XHRcdFx0XHRcdGFic1N0YWNrLnBvcCgpO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRcdFx0ZGVmYXVsdDpcclxuXHRcdFx0XHRcdFx0XHRhYnNTdGFjay5wdXNoKCBkICk7XHJcblx0XHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdHJldHVybiBcIi9cIiArIGFic1N0YWNrLmpvaW4oIFwiL1wiICk7XHJcblx0XHRcdH0sXHJcblxyXG5cdFx0XHQvL1JldHVybnMgdHJ1ZSBpZiBib3RoIHVybHMgaGF2ZSB0aGUgc2FtZSBkb21haW4uXHJcblx0XHRcdGlzU2FtZURvbWFpbjogZnVuY3Rpb24oIGFic1VybDEsIGFic1VybDIgKSB7XHJcblx0XHRcdFx0cmV0dXJuIHBhdGgucGFyc2VVcmwoIGFic1VybDEgKS5kb21haW4udG9Mb3dlckNhc2UoKSA9PT1cclxuXHRcdFx0XHRcdHBhdGgucGFyc2VVcmwoIGFic1VybDIgKS5kb21haW4udG9Mb3dlckNhc2UoKTtcclxuXHRcdFx0fSxcclxuXHJcblx0XHRcdC8vUmV0dXJucyB0cnVlIGZvciBhbnkgcmVsYXRpdmUgdmFyaWFudC5cclxuXHRcdFx0aXNSZWxhdGl2ZVVybDogZnVuY3Rpb24oIHVybCApIHtcclxuXHRcdFx0XHQvLyBBbGwgcmVsYXRpdmUgVXJsIHZhcmlhbnRzIGhhdmUgb25lIHRoaW5nIGluIGNvbW1vbiwgbm8gcHJvdG9jb2wuXHJcblx0XHRcdFx0cmV0dXJuIHBhdGgucGFyc2VVcmwoIHVybCApLnByb3RvY29sID09PSBcIlwiO1xyXG5cdFx0XHR9LFxyXG5cclxuXHRcdFx0Ly9SZXR1cm5zIHRydWUgZm9yIGFuIGFic29sdXRlIHVybC5cclxuXHRcdFx0aXNBYnNvbHV0ZVVybDogZnVuY3Rpb24oIHVybCApIHtcclxuXHRcdFx0XHRyZXR1cm4gcGF0aC5wYXJzZVVybCggdXJsICkucHJvdG9jb2wgIT09IFwiXCI7XHJcblx0XHRcdH0sXHJcblxyXG5cdFx0XHQvL1R1cm4gdGhlIHNwZWNpZmllZCByZWFsdGl2ZSBVUkwgaW50byBhbiBhYnNvbHV0ZSBvbmUuIFRoaXMgZnVuY3Rpb25cclxuXHRcdFx0Ly9jYW4gaGFuZGxlIGFsbCByZWxhdGl2ZSB2YXJpYW50cyAocHJvdG9jb2wsIHNpdGUsIGRvY3VtZW50LCBxdWVyeSwgZnJhZ21lbnQpLlxyXG5cdFx0XHRtYWtlVXJsQWJzb2x1dGU6IGZ1bmN0aW9uKCByZWxVcmwsIGFic1VybCApIHtcclxuXHRcdFx0XHRpZiAoICFwYXRoLmlzUmVsYXRpdmVVcmwoIHJlbFVybCApICkge1xyXG5cdFx0XHRcdFx0cmV0dXJuIHJlbFVybDtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdGlmICggYWJzVXJsID09PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdFx0XHRhYnNVcmwgPSB0aGlzLmRvY3VtZW50QmFzZTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdHZhciByZWxPYmogPSBwYXRoLnBhcnNlVXJsKCByZWxVcmwgKSxcclxuXHRcdFx0XHRcdGFic09iaiA9IHBhdGgucGFyc2VVcmwoIGFic1VybCApLFxyXG5cdFx0XHRcdFx0cHJvdG9jb2wgPSByZWxPYmoucHJvdG9jb2wgfHwgYWJzT2JqLnByb3RvY29sLFxyXG5cdFx0XHRcdFx0ZG91YmxlU2xhc2ggPSByZWxPYmoucHJvdG9jb2wgPyByZWxPYmouZG91YmxlU2xhc2ggOiAoIHJlbE9iai5kb3VibGVTbGFzaCB8fCBhYnNPYmouZG91YmxlU2xhc2ggKSxcclxuXHRcdFx0XHRcdGF1dGhvcml0eSA9IHJlbE9iai5hdXRob3JpdHkgfHwgYWJzT2JqLmF1dGhvcml0eSxcclxuXHRcdFx0XHRcdGhhc1BhdGggPSByZWxPYmoucGF0aG5hbWUgIT09IFwiXCIsXHJcblx0XHRcdFx0XHRwYXRobmFtZSA9IHBhdGgubWFrZVBhdGhBYnNvbHV0ZSggcmVsT2JqLnBhdGhuYW1lIHx8IGFic09iai5maWxlbmFtZSwgYWJzT2JqLnBhdGhuYW1lICksXHJcblx0XHRcdFx0XHRzZWFyY2ggPSByZWxPYmouc2VhcmNoIHx8ICggIWhhc1BhdGggJiYgYWJzT2JqLnNlYXJjaCApIHx8IFwiXCIsXHJcblx0XHRcdFx0XHRoYXNoID0gcmVsT2JqLmhhc2g7XHJcblxyXG5cdFx0XHRcdHJldHVybiBwcm90b2NvbCArIGRvdWJsZVNsYXNoICsgYXV0aG9yaXR5ICsgcGF0aG5hbWUgKyBzZWFyY2ggKyBoYXNoO1xyXG5cdFx0XHR9LFxyXG5cclxuXHRcdFx0Ly9BZGQgc2VhcmNoIChha2EgcXVlcnkpIHBhcmFtcyB0byB0aGUgc3BlY2lmaWVkIHVybC5cclxuXHRcdFx0YWRkU2VhcmNoUGFyYW1zOiBmdW5jdGlvbiggdXJsLCBwYXJhbXMgKSB7XHJcblx0XHRcdFx0dmFyIHUgPSBwYXRoLnBhcnNlVXJsKCB1cmwgKSxcclxuXHRcdFx0XHRcdHAgPSAoIHR5cGVvZiBwYXJhbXMgPT09IFwib2JqZWN0XCIgKSA/ICQucGFyYW0oIHBhcmFtcyApIDogcGFyYW1zLFxyXG5cdFx0XHRcdFx0cyA9IHUuc2VhcmNoIHx8IFwiP1wiO1xyXG5cdFx0XHRcdHJldHVybiB1LmhyZWZOb1NlYXJjaCArIHMgKyAoIHMuY2hhckF0KCBzLmxlbmd0aCAtIDEgKSAhPT0gXCI/XCIgPyBcIiZcIiA6IFwiXCIgKSArIHAgKyAoIHUuaGFzaCB8fCBcIlwiICk7XHJcblx0XHRcdH0sXHJcblxyXG5cdFx0XHRjb252ZXJ0VXJsVG9EYXRhVXJsOiBmdW5jdGlvbiggYWJzVXJsICkge1xyXG5cdFx0XHRcdHZhciByZXN1bHQgPSBhYnNVcmwsXHJcblx0XHRcdFx0XHR1ID0gcGF0aC5wYXJzZVVybCggYWJzVXJsICk7XHJcblxyXG5cdFx0XHRcdGlmICggcGF0aC5pc0VtYmVkZGVkUGFnZSggdSApICkge1xyXG5cdFx0XHRcdFx0Ly8gRm9yIGVtYmVkZGVkIHBhZ2VzLCByZW1vdmUgdGhlIGRpYWxvZyBoYXNoIGtleSBhcyBpbiBnZXRGaWxlUGF0aCgpLFxyXG5cdFx0XHRcdFx0Ly8gYW5kIHJlbW92ZSBvdGhlcndpc2UgdGhlIERhdGEgVXJsIHdvbid0IG1hdGNoIHRoZSBpZCBvZiB0aGUgZW1iZWRkZWQgUGFnZS5cclxuXHRcdFx0XHRcdHJlc3VsdCA9IHUuaGFzaFxyXG5cdFx0XHRcdFx0XHQuc3BsaXQoIGRpYWxvZ0hhc2hLZXkgKVswXVxyXG5cdFx0XHRcdFx0XHQucmVwbGFjZSggL14jLywgXCJcIiApXHJcblx0XHRcdFx0XHRcdC5yZXBsYWNlKCAvXFw/LiokLywgXCJcIiApO1xyXG5cdFx0XHRcdH0gZWxzZSBpZiAoIHBhdGguaXNTYW1lRG9tYWluKCB1LCB0aGlzLmRvY3VtZW50QmFzZSApICkge1xyXG5cdFx0XHRcdFx0cmVzdWx0ID0gdS5ocmVmTm9IYXNoLnJlcGxhY2UoIHRoaXMuZG9jdW1lbnRCYXNlLmRvbWFpbiwgXCJcIiApLnNwbGl0KCBkaWFsb2dIYXNoS2V5IClbMF07XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRyZXR1cm4gd2luZG93LmRlY29kZVVSSUNvbXBvbmVudCggcmVzdWx0ICk7XHJcblx0XHRcdH0sXHJcblxyXG5cdFx0XHQvL2dldCBwYXRoIGZyb20gY3VycmVudCBoYXNoLCBvciBmcm9tIGEgZmlsZSBwYXRoXHJcblx0XHRcdGdldDogZnVuY3Rpb24oIG5ld1BhdGggKSB7XHJcblx0XHRcdFx0aWYgKCBuZXdQYXRoID09PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdFx0XHRuZXdQYXRoID0gcGF0aC5wYXJzZUxvY2F0aW9uKCkuaGFzaDtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0cmV0dXJuIHBhdGguc3RyaXBIYXNoKCBuZXdQYXRoICkucmVwbGFjZSggL1teXFwvXSpcXC5bXlxcLypdKyQvLCBcIlwiICk7XHJcblx0XHRcdH0sXHJcblxyXG5cdFx0XHQvL3NldCBsb2NhdGlvbiBoYXNoIHRvIHBhdGhcclxuXHRcdFx0c2V0OiBmdW5jdGlvbiggcGF0aCApIHtcclxuXHRcdFx0XHRsb2NhdGlvbi5oYXNoID0gcGF0aDtcclxuXHRcdFx0fSxcclxuXHJcblx0XHRcdC8vdGVzdCBpZiBhIGdpdmVuIHVybCAoc3RyaW5nKSBpcyBhIHBhdGhcclxuXHRcdFx0Ly9OT1RFIG1pZ2h0IGJlIGV4Y2VwdGlvbmFsbHkgbmFpdmVcclxuXHRcdFx0aXNQYXRoOiBmdW5jdGlvbiggdXJsICkge1xyXG5cdFx0XHRcdHJldHVybiAoIC9cXC8vICkudGVzdCggdXJsICk7XHJcblx0XHRcdH0sXHJcblxyXG5cdFx0XHQvL3JldHVybiBhIHVybCBwYXRoIHdpdGggdGhlIHdpbmRvdydzIGxvY2F0aW9uIHByb3RvY29sL2hvc3RuYW1lL3BhdGhuYW1lIHJlbW92ZWRcclxuXHRcdFx0Y2xlYW46IGZ1bmN0aW9uKCB1cmwgKSB7XHJcblx0XHRcdFx0cmV0dXJuIHVybC5yZXBsYWNlKCB0aGlzLmRvY3VtZW50QmFzZS5kb21haW4sIFwiXCIgKTtcclxuXHRcdFx0fSxcclxuXHJcblx0XHRcdC8vanVzdCByZXR1cm4gdGhlIHVybCB3aXRob3V0IGFuIGluaXRpYWwgI1xyXG5cdFx0XHRzdHJpcEhhc2g6IGZ1bmN0aW9uKCB1cmwgKSB7XHJcblx0XHRcdFx0cmV0dXJuIHVybC5yZXBsYWNlKCAvXiMvLCBcIlwiICk7XHJcblx0XHRcdH0sXHJcblxyXG5cdFx0XHRzdHJpcFF1ZXJ5UGFyYW1zOiBmdW5jdGlvbiggdXJsICkge1xyXG5cdFx0XHRcdHJldHVybiB1cmwucmVwbGFjZSggL1xcPy4qJC8sIFwiXCIgKTtcclxuXHRcdFx0fSxcclxuXHJcblx0XHRcdC8vcmVtb3ZlIHRoZSBwcmVjZWRpbmcgaGFzaCwgYW55IHF1ZXJ5IHBhcmFtcywgYW5kIGRpYWxvZyBub3RhdGlvbnNcclxuXHRcdFx0Y2xlYW5IYXNoOiBmdW5jdGlvbiggaGFzaCApIHtcclxuXHRcdFx0XHRyZXR1cm4gcGF0aC5zdHJpcEhhc2goIGhhc2gucmVwbGFjZSggL1xcPy4qJC8sIFwiXCIgKS5yZXBsYWNlKCBkaWFsb2dIYXNoS2V5LCBcIlwiICkgKTtcclxuXHRcdFx0fSxcclxuXHJcblx0XHRcdGlzSGFzaFZhbGlkOiBmdW5jdGlvbiggaGFzaCApIHtcclxuXHRcdFx0XHRyZXR1cm4gKCAvXiNbXiNdKyQvICkudGVzdCggaGFzaCApO1xyXG5cdFx0XHR9LFxyXG5cclxuXHRcdFx0Ly9jaGVjayB3aGV0aGVyIGEgdXJsIGlzIHJlZmVyZW5jaW5nIHRoZSBzYW1lIGRvbWFpbiwgb3IgYW4gZXh0ZXJuYWwgZG9tYWluIG9yIGRpZmZlcmVudCBwcm90b2NvbFxyXG5cdFx0XHQvL2NvdWxkIGJlIG1haWx0bywgZXRjXHJcblx0XHRcdGlzRXh0ZXJuYWw6IGZ1bmN0aW9uKCB1cmwgKSB7XHJcblx0XHRcdFx0dmFyIHUgPSBwYXRoLnBhcnNlVXJsKCB1cmwgKTtcclxuXHJcblx0XHRcdFx0cmV0dXJuICEhKCB1LnByb3RvY29sICYmXHJcblx0XHRcdFx0XHQoIHUuZG9tYWluLnRvTG93ZXJDYXNlKCkgIT09IHRoaXMuZG9jdW1lbnRVcmwuZG9tYWluLnRvTG93ZXJDYXNlKCkgKSApO1xyXG5cdFx0XHR9LFxyXG5cclxuXHRcdFx0aGFzUHJvdG9jb2w6IGZ1bmN0aW9uKCB1cmwgKSB7XHJcblx0XHRcdFx0cmV0dXJuICggL14oOj9cXHcrOikvICkudGVzdCggdXJsICk7XHJcblx0XHRcdH0sXHJcblxyXG5cdFx0XHRpc0VtYmVkZGVkUGFnZTogZnVuY3Rpb24oIHVybCApIHtcclxuXHRcdFx0XHR2YXIgdSA9IHBhdGgucGFyc2VVcmwoIHVybCApO1xyXG5cclxuXHRcdFx0XHQvL2lmIHRoZSBwYXRoIGlzIGFic29sdXRlLCB0aGVuIHdlIG5lZWQgdG8gY29tcGFyZSB0aGUgdXJsIGFnYWluc3RcclxuXHRcdFx0XHQvL2JvdGggdGhlIHRoaXMuZG9jdW1lbnRVcmwgYW5kIHRoZSBkb2N1bWVudEJhc2UuIFRoZSBtYWluIHJlYXNvbiBmb3IgdGhpc1xyXG5cdFx0XHRcdC8vaXMgdGhhdCBsaW5rcyBlbWJlZGRlZCB3aXRoaW4gZXh0ZXJuYWwgZG9jdW1lbnRzIHdpbGwgcmVmZXIgdG8gdGhlXHJcblx0XHRcdFx0Ly9hcHBsaWNhdGlvbiBkb2N1bWVudCwgd2hlcmVhcyBsaW5rcyBlbWJlZGRlZCB3aXRoaW4gdGhlIGFwcGxpY2F0aW9uXHJcblx0XHRcdFx0Ly9kb2N1bWVudCB3aWxsIGJlIHJlc29sdmVkIGFnYWluc3QgdGhlIGRvY3VtZW50IGJhc2UuXHJcblx0XHRcdFx0aWYgKCB1LnByb3RvY29sICE9PSBcIlwiICkge1xyXG5cdFx0XHRcdFx0cmV0dXJuICggIXRoaXMuaXNQYXRoKHUuaGFzaCkgJiYgdS5oYXNoICYmICggdS5ocmVmTm9IYXNoID09PSB0aGlzLmRvY3VtZW50VXJsLmhyZWZOb0hhc2ggfHwgKCB0aGlzLmRvY3VtZW50QmFzZURpZmZlcnMgJiYgdS5ocmVmTm9IYXNoID09PSB0aGlzLmRvY3VtZW50QmFzZS5ocmVmTm9IYXNoICkgKSApO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRyZXR1cm4gKCAvXiMvICkudGVzdCggdS5ocmVmICk7XHJcblx0XHRcdH0sXHJcblxyXG5cdFx0XHRzcXVhc2g6IGZ1bmN0aW9uKCB1cmwsIHJlc29sdXRpb25VcmwgKSB7XHJcblx0XHRcdFx0dmFyIGhyZWYsIGNsZWFuZWRVcmwsIHNlYXJjaCwgc3RhdGVJbmRleCwgZG9jVXJsLFxyXG5cdFx0XHRcdFx0aXNQYXRoID0gdGhpcy5pc1BhdGgoIHVybCApLFxyXG5cdFx0XHRcdFx0dXJpID0gdGhpcy5wYXJzZVVybCggdXJsICksXHJcblx0XHRcdFx0XHRwcmVzZXJ2ZWRIYXNoID0gdXJpLmhhc2gsXHJcblx0XHRcdFx0XHR1aVN0YXRlID0gXCJcIjtcclxuXHJcblx0XHRcdFx0Ly8gcHJvZHVjZSBhIHVybCBhZ2FpbnN0IHdoaWNoIHdlIGNhbiByZXNvbHZlIHRoZSBwcm92aWRlZCBwYXRoXHJcblx0XHRcdFx0aWYgKCAhcmVzb2x1dGlvblVybCApIHtcclxuXHRcdFx0XHRcdGlmICggaXNQYXRoICkge1xyXG5cdFx0XHRcdFx0XHRyZXNvbHV0aW9uVXJsID0gcGF0aC5nZXRMb2NhdGlvbigpO1xyXG5cdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0ZG9jVXJsID0gcGF0aC5nZXREb2N1bWVudFVybCggdHJ1ZSApO1xyXG5cdFx0XHRcdFx0XHRpZiAoIHBhdGguaXNQYXRoKCBkb2NVcmwuaGFzaCApICkge1xyXG5cdFx0XHRcdFx0XHRcdHJlc29sdXRpb25VcmwgPSBwYXRoLnNxdWFzaCggZG9jVXJsLmhyZWYgKTtcclxuXHRcdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0XHRyZXNvbHV0aW9uVXJsID0gZG9jVXJsLmhyZWY7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdC8vIElmIHRoZSB1cmwgaXMgYW55dGhpbmcgYnV0IGEgc2ltcGxlIHN0cmluZywgcmVtb3ZlIGFueSBwcmVjZWRpbmcgaGFzaFxyXG5cdFx0XHRcdC8vIGVnICNmb28vYmFyIC0+IGZvby9iYXJcclxuXHRcdFx0XHQvLyAgICAjZm9vIC0+ICNmb29cclxuXHRcdFx0XHRjbGVhbmVkVXJsID0gaXNQYXRoID8gcGF0aC5zdHJpcEhhc2goIHVybCApIDogdXJsO1xyXG5cclxuXHRcdFx0XHQvLyBJZiB0aGUgdXJsIGlzIGEgZnVsbCB1cmwgd2l0aCBhIGhhc2ggY2hlY2sgaWYgdGhlIHBhcnNlZCBoYXNoIGlzIGEgcGF0aFxyXG5cdFx0XHRcdC8vIGlmIGl0IGlzLCBzdHJpcCB0aGUgIywgYW5kIHVzZSBpdCBvdGhlcndpc2UgY29udGludWUgd2l0aG91dCBjaGFuZ2VcclxuXHRcdFx0XHRjbGVhbmVkVXJsID0gcGF0aC5pc1BhdGgoIHVyaS5oYXNoICkgPyBwYXRoLnN0cmlwSGFzaCggdXJpLmhhc2ggKSA6IGNsZWFuZWRVcmw7XHJcblxyXG5cdFx0XHRcdC8vIFNwbGl0IHRoZSBVSSBTdGF0ZSBrZXlzIG9mZiB0aGUgaHJlZlxyXG5cdFx0XHRcdHN0YXRlSW5kZXggPSBjbGVhbmVkVXJsLmluZGV4T2YoIHRoaXMudWlTdGF0ZUtleSApO1xyXG5cclxuXHRcdFx0XHQvLyBzdG9yZSB0aGUgdWkgc3RhdGUga2V5cyBmb3IgdXNlXHJcblx0XHRcdFx0aWYgKCBzdGF0ZUluZGV4ID4gLTEgKSB7XHJcblx0XHRcdFx0XHR1aVN0YXRlID0gY2xlYW5lZFVybC5zbGljZSggc3RhdGVJbmRleCApO1xyXG5cdFx0XHRcdFx0Y2xlYW5lZFVybCA9IGNsZWFuZWRVcmwuc2xpY2UoIDAsIHN0YXRlSW5kZXggKTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdC8vIG1ha2UgdGhlIGNsZWFuZWRVcmwgYWJzb2x1dGUgcmVsYXRpdmUgdG8gdGhlIHJlc29sdXRpb24gdXJsXHJcblx0XHRcdFx0aHJlZiA9IHBhdGgubWFrZVVybEFic29sdXRlKCBjbGVhbmVkVXJsLCByZXNvbHV0aW9uVXJsICk7XHJcblxyXG5cdFx0XHRcdC8vIGdyYWIgdGhlIHNlYXJjaCBmcm9tIHRoZSByZXNvbHZlZCB1cmwgc2luY2UgcGFyc2luZyBmcm9tXHJcblx0XHRcdFx0Ly8gdGhlIHBhc3NlZCB1cmwgbWF5IG5vdCB5aWVsZCB0aGUgY29ycmVjdCByZXN1bHRcclxuXHRcdFx0XHRzZWFyY2ggPSB0aGlzLnBhcnNlVXJsKCBocmVmICkuc2VhcmNoO1xyXG5cclxuXHRcdFx0XHQvLyBUT0RPIGFsbCB0aGlzIGNyYXAgaXMgdGVycmlibGUsIGNsZWFuIGl0IHVwXHJcblx0XHRcdFx0aWYgKCBpc1BhdGggKSB7XHJcblx0XHRcdFx0XHQvLyByZWplY3QgdGhlIGhhc2ggaWYgaXQncyBhIHBhdGggb3IgaXQncyBqdXN0IGEgZGlhbG9nIGtleVxyXG5cdFx0XHRcdFx0aWYgKCBwYXRoLmlzUGF0aCggcHJlc2VydmVkSGFzaCApIHx8IHByZXNlcnZlZEhhc2gucmVwbGFjZShcIiNcIiwgXCJcIikuaW5kZXhPZiggdGhpcy51aVN0YXRlS2V5ICkgPT09IDApIHtcclxuXHRcdFx0XHRcdFx0cHJlc2VydmVkSGFzaCA9IFwiXCI7XHJcblx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0Ly8gQXBwZW5kIHRoZSBVSSBTdGF0ZSBrZXlzIHdoZXJlIGl0IGV4aXN0cyBhbmQgaXQncyBiZWVuIHJlbW92ZWRcclxuXHRcdFx0XHRcdC8vIGZyb20gdGhlIHVybFxyXG5cdFx0XHRcdFx0aWYgKCB1aVN0YXRlICYmIHByZXNlcnZlZEhhc2guaW5kZXhPZiggdGhpcy51aVN0YXRlS2V5ICkgPT09IC0xKSB7XHJcblx0XHRcdFx0XHRcdHByZXNlcnZlZEhhc2ggKz0gdWlTdGF0ZTtcclxuXHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHQvLyBtYWtlIHN1cmUgdGhhdCBwb3VuZCBpcyBvbiB0aGUgZnJvbnQgb2YgdGhlIGhhc2hcclxuXHRcdFx0XHRcdGlmICggcHJlc2VydmVkSGFzaC5pbmRleE9mKCBcIiNcIiApID09PSAtMSAmJiBwcmVzZXJ2ZWRIYXNoICE9PSBcIlwiICkge1xyXG5cdFx0XHRcdFx0XHRwcmVzZXJ2ZWRIYXNoID0gXCIjXCIgKyBwcmVzZXJ2ZWRIYXNoO1xyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdC8vIHJlY29uc3RydWN0IGVhY2ggb2YgdGhlIHBpZWNlcyB3aXRoIHRoZSBuZXcgc2VhcmNoIHN0cmluZyBhbmQgaGFzaFxyXG5cdFx0XHRcdFx0aHJlZiA9IHBhdGgucGFyc2VVcmwoIGhyZWYgKTtcclxuXHRcdFx0XHRcdGhyZWYgPSBocmVmLnByb3RvY29sICsgaHJlZi5kb3VibGVTbGFzaCArIGhyZWYuaG9zdCArIGhyZWYucGF0aG5hbWUgKyBzZWFyY2ggK1xyXG5cdFx0XHRcdFx0XHRwcmVzZXJ2ZWRIYXNoO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRocmVmICs9IGhyZWYuaW5kZXhPZiggXCIjXCIgKSA+IC0xID8gdWlTdGF0ZSA6IFwiI1wiICsgdWlTdGF0ZTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdHJldHVybiBocmVmO1xyXG5cdFx0XHR9LFxyXG5cclxuXHRcdFx0aXNQcmVzZXJ2YWJsZUhhc2g6IGZ1bmN0aW9uKCBoYXNoICkge1xyXG5cdFx0XHRcdHJldHVybiBoYXNoLnJlcGxhY2UoIFwiI1wiLCBcIlwiICkuaW5kZXhPZiggdGhpcy51aVN0YXRlS2V5ICkgPT09IDA7XHJcblx0XHRcdH0sXHJcblxyXG5cdFx0XHQvLyBFc2NhcGUgd2VpcmQgY2hhcmFjdGVycyBpbiB0aGUgaGFzaCBpZiBpdCBpcyB0byBiZSB1c2VkIGFzIGEgc2VsZWN0b3JcclxuXHRcdFx0aGFzaFRvU2VsZWN0b3I6IGZ1bmN0aW9uKCBoYXNoICkge1xyXG5cdFx0XHRcdHZhciBoYXNIYXNoID0gKCBoYXNoLnN1YnN0cmluZyggMCwgMSApID09PSBcIiNcIiApO1xyXG5cdFx0XHRcdGlmICggaGFzSGFzaCApIHtcclxuXHRcdFx0XHRcdGhhc2ggPSBoYXNoLnN1YnN0cmluZyggMSApO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRyZXR1cm4gKCBoYXNIYXNoID8gXCIjXCIgOiBcIlwiICkgKyBoYXNoLnJlcGxhY2UoIC8oWyFcIiMkJSYnKCkqKywuLzo7PD0+P0BbXFxdXmB7fH1+XSkvZywgXCJcXFxcJDFcIiApO1xyXG5cdFx0XHR9LFxyXG5cclxuXHRcdFx0Ly8gcmV0dXJuIHRoZSBzdWJzdHJpbmcgb2YgYSBmaWxlcGF0aCBiZWZvcmUgdGhlIGRpYWxvZ0hhc2hLZXksIGZvciBtYWtpbmcgYSBzZXJ2ZXJcclxuXHRcdFx0Ly8gcmVxdWVzdFxyXG5cdFx0XHRnZXRGaWxlUGF0aDogZnVuY3Rpb24oIHBhdGggKSB7XHJcblx0XHRcdFx0cmV0dXJuIHBhdGggJiYgcGF0aC5zcGxpdCggZGlhbG9nSGFzaEtleSApWzBdO1xyXG5cdFx0XHR9LFxyXG5cclxuXHRcdFx0Ly8gY2hlY2sgaWYgdGhlIHNwZWNpZmllZCB1cmwgcmVmZXJzIHRvIHRoZSBmaXJzdCBwYWdlIGluIHRoZSBtYWluXHJcblx0XHRcdC8vIGFwcGxpY2F0aW9uIGRvY3VtZW50LlxyXG5cdFx0XHRpc0ZpcnN0UGFnZVVybDogZnVuY3Rpb24oIHVybCApIHtcclxuXHRcdFx0XHQvLyBXZSBvbmx5IGRlYWwgd2l0aCBhYnNvbHV0ZSBwYXRocy5cclxuXHRcdFx0XHR2YXIgdSA9IHBhdGgucGFyc2VVcmwoIHBhdGgubWFrZVVybEFic29sdXRlKCB1cmwsIHRoaXMuZG9jdW1lbnRCYXNlICkgKSxcclxuXHJcblx0XHRcdFx0XHQvLyBEb2VzIHRoZSB1cmwgaGF2ZSB0aGUgc2FtZSBwYXRoIGFzIHRoZSBkb2N1bWVudD9cclxuXHRcdFx0XHRcdHNhbWVQYXRoID0gdS5ocmVmTm9IYXNoID09PSB0aGlzLmRvY3VtZW50VXJsLmhyZWZOb0hhc2ggfHxcclxuXHRcdFx0XHRcdFx0KCB0aGlzLmRvY3VtZW50QmFzZURpZmZlcnMgJiZcclxuXHRcdFx0XHRcdFx0XHR1LmhyZWZOb0hhc2ggPT09IHRoaXMuZG9jdW1lbnRCYXNlLmhyZWZOb0hhc2ggKSxcclxuXHJcblx0XHRcdFx0XHQvLyBHZXQgdGhlIGZpcnN0IHBhZ2UgZWxlbWVudC5cclxuXHRcdFx0XHRcdGZwID0gJC5tb2JpbGUuZmlyc3RQYWdlLFxyXG5cclxuXHRcdFx0XHRcdC8vIEdldCB0aGUgaWQgb2YgdGhlIGZpcnN0IHBhZ2UgZWxlbWVudCBpZiBpdCBoYXMgb25lLlxyXG5cdFx0XHRcdFx0ZnBJZCA9IGZwICYmIGZwWzBdID8gZnBbMF0uaWQgOiB1bmRlZmluZWQ7XHJcblxyXG5cdFx0XHRcdC8vIFRoZSB1cmwgcmVmZXJzIHRvIHRoZSBmaXJzdCBwYWdlIGlmIHRoZSBwYXRoIG1hdGNoZXMgdGhlIGRvY3VtZW50IGFuZFxyXG5cdFx0XHRcdC8vIGl0IGVpdGhlciBoYXMgbm8gaGFzaCB2YWx1ZSwgb3IgdGhlIGhhc2ggaXMgZXhhY3RseSBlcXVhbCB0byB0aGUgaWRcclxuXHRcdFx0XHQvLyBvZiB0aGUgZmlyc3QgcGFnZSBlbGVtZW50LlxyXG5cdFx0XHRcdHJldHVybiBzYW1lUGF0aCAmJlxyXG5cdFx0XHRcdFx0KCAhdS5oYXNoIHx8XHJcblx0XHRcdFx0XHRcdHUuaGFzaCA9PT0gXCIjXCIgfHxcclxuXHRcdFx0XHRcdFx0KCBmcElkICYmIHUuaGFzaC5yZXBsYWNlKCAvXiMvLCBcIlwiICkgPT09IGZwSWQgKSApO1xyXG5cdFx0XHR9LFxyXG5cclxuXHRcdFx0Ly8gU29tZSBlbWJlZGRlZCBicm93c2VycywgbGlrZSB0aGUgd2ViIHZpZXcgaW4gUGhvbmUgR2FwLCBhbGxvd1xyXG5cdFx0XHQvLyBjcm9zcy1kb21haW4gWEhSIHJlcXVlc3RzIGlmIHRoZSBkb2N1bWVudCBkb2luZyB0aGUgcmVxdWVzdCB3YXMgbG9hZGVkXHJcblx0XHRcdC8vIHZpYSB0aGUgZmlsZTovLyBwcm90b2NvbC4gVGhpcyBpcyB1c3VhbGx5IHRvIGFsbG93IHRoZSBhcHBsaWNhdGlvbiB0b1xyXG5cdFx0XHQvLyBcInBob25lIGhvbWVcIiBhbmQgZmV0Y2ggYXBwIHNwZWNpZmljIGRhdGEuIFdlIG5vcm1hbGx5IGxldCB0aGUgYnJvd3NlclxyXG5cdFx0XHQvLyBoYW5kbGUgZXh0ZXJuYWwvY3Jvc3MtZG9tYWluIHVybHMsIGJ1dCBpZiB0aGUgYWxsb3dDcm9zc0RvbWFpblBhZ2VzXHJcblx0XHRcdC8vIG9wdGlvbiBpcyB0cnVlLCB3ZSB3aWxsIGFsbG93IGNyb3NzLWRvbWFpbiBodHRwL2h0dHBzIHJlcXVlc3RzIHRvIGdvXHJcblx0XHRcdC8vIHRocm91Z2ggb3VyIHBhZ2UgbG9hZGluZyBsb2dpYy5cclxuXHRcdFx0aXNQZXJtaXR0ZWRDcm9zc0RvbWFpblJlcXVlc3Q6IGZ1bmN0aW9uKCBkb2NVcmwsIHJlcVVybCApIHtcclxuXHRcdFx0XHRyZXR1cm4gJC5tb2JpbGUuYWxsb3dDcm9zc0RvbWFpblBhZ2VzICYmXHJcblx0XHRcdFx0XHQoZG9jVXJsLnByb3RvY29sID09PSBcImZpbGU6XCIgfHwgZG9jVXJsLnByb3RvY29sID09PSBcImNvbnRlbnQ6XCIpICYmXHJcblx0XHRcdFx0XHRyZXFVcmwuc2VhcmNoKCAvXmh0dHBzPzovICkgIT09IC0xO1xyXG5cdFx0XHR9XHJcblx0XHR9O1xyXG5cclxuXHRcdHBhdGguZG9jdW1lbnRVcmwgPSBwYXRoLnBhcnNlTG9jYXRpb24oKTtcclxuXHJcblx0XHQkYmFzZSA9ICQoIFwiaGVhZFwiICkuZmluZCggXCJiYXNlXCIgKTtcclxuXHJcblx0XHRwYXRoLmRvY3VtZW50QmFzZSA9ICRiYXNlLmxlbmd0aCA/XHJcblx0XHRcdHBhdGgucGFyc2VVcmwoIHBhdGgubWFrZVVybEFic29sdXRlKCAkYmFzZS5hdHRyKCBcImhyZWZcIiApLCBwYXRoLmRvY3VtZW50VXJsLmhyZWYgKSApIDpcclxuXHRcdFx0cGF0aC5kb2N1bWVudFVybDtcclxuXHJcblx0XHRwYXRoLmRvY3VtZW50QmFzZURpZmZlcnMgPSAocGF0aC5kb2N1bWVudFVybC5ocmVmTm9IYXNoICE9PSBwYXRoLmRvY3VtZW50QmFzZS5ocmVmTm9IYXNoKTtcclxuXHJcblx0XHQvL3JldHVybiB0aGUgb3JpZ2luYWwgZG9jdW1lbnQgYmFzZSB1cmxcclxuXHRcdHBhdGguZ2V0RG9jdW1lbnRCYXNlID0gZnVuY3Rpb24oIGFzUGFyc2VkT2JqZWN0ICkge1xyXG5cdFx0XHRyZXR1cm4gYXNQYXJzZWRPYmplY3QgPyAkLmV4dGVuZCgge30sIHBhdGguZG9jdW1lbnRCYXNlICkgOiBwYXRoLmRvY3VtZW50QmFzZS5ocmVmO1xyXG5cdFx0fTtcclxuXHJcblx0XHQvLyBERVBSRUNBVEVEIGFzIG9mIDEuNC4wIC0gcmVtb3ZlIGluIDEuNS4wXHJcblx0XHQkLmV4dGVuZCggJC5tb2JpbGUsIHtcclxuXHJcblx0XHRcdC8vcmV0dXJuIHRoZSBvcmlnaW5hbCBkb2N1bWVudCB1cmxcclxuXHRcdFx0Z2V0RG9jdW1lbnRVcmw6IHBhdGguZ2V0RG9jdW1lbnRVcmwsXHJcblxyXG5cdFx0XHQvL3JldHVybiB0aGUgb3JpZ2luYWwgZG9jdW1lbnQgYmFzZSB1cmxcclxuXHRcdFx0Z2V0RG9jdW1lbnRCYXNlOiBwYXRoLmdldERvY3VtZW50QmFzZVxyXG5cdFx0fSk7XHJcbn0pKCBqUXVlcnkgKTtcclxuXHJcblxyXG5cclxuKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7XHJcblx0JC5tb2JpbGUuSGlzdG9yeSA9IGZ1bmN0aW9uKCBzdGFjaywgaW5kZXggKSB7XHJcblx0XHR0aGlzLnN0YWNrID0gc3RhY2sgfHwgW107XHJcblx0XHR0aGlzLmFjdGl2ZUluZGV4ID0gaW5kZXggfHwgMDtcclxuXHR9O1xyXG5cclxuXHQkLmV4dGVuZCgkLm1vYmlsZS5IaXN0b3J5LnByb3RvdHlwZSwge1xyXG5cdFx0Z2V0QWN0aXZlOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0cmV0dXJuIHRoaXMuc3RhY2tbIHRoaXMuYWN0aXZlSW5kZXggXTtcclxuXHRcdH0sXHJcblxyXG5cdFx0Z2V0TGFzdDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHJldHVybiB0aGlzLnN0YWNrWyB0aGlzLnByZXZpb3VzSW5kZXggXTtcclxuXHRcdH0sXHJcblxyXG5cdFx0Z2V0TmV4dDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHJldHVybiB0aGlzLnN0YWNrWyB0aGlzLmFjdGl2ZUluZGV4ICsgMSBdO1xyXG5cdFx0fSxcclxuXHJcblx0XHRnZXRQcmV2OiBmdW5jdGlvbigpIHtcclxuXHRcdFx0cmV0dXJuIHRoaXMuc3RhY2tbIHRoaXMuYWN0aXZlSW5kZXggLSAxIF07XHJcblx0XHR9LFxyXG5cclxuXHRcdC8vIGFkZE5ldyBpcyB1c2VkIHdoZW5ldmVyIGEgbmV3IHBhZ2UgaXMgYWRkZWRcclxuXHRcdGFkZDogZnVuY3Rpb24oIHVybCwgZGF0YSApIHtcclxuXHRcdFx0ZGF0YSA9IGRhdGEgfHwge307XHJcblxyXG5cdFx0XHQvL2lmIHRoZXJlJ3MgZm9yd2FyZCBoaXN0b3J5LCB3aXBlIGl0XHJcblx0XHRcdGlmICggdGhpcy5nZXROZXh0KCkgKSB7XHJcblx0XHRcdFx0dGhpcy5jbGVhckZvcndhcmQoKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gaWYgdGhlIGhhc2ggaXMgaW5jbHVkZWQgaW4gdGhlIGRhdGEgbWFrZSBzdXJlIHRoZSBzaGFwZVxyXG5cdFx0XHQvLyBpcyBjb25zaXN0ZW50IGZvciBjb21wYXJpc29uXHJcblx0XHRcdGlmICggZGF0YS5oYXNoICYmIGRhdGEuaGFzaC5pbmRleE9mKCBcIiNcIiApID09PSAtMSkge1xyXG5cdFx0XHRcdGRhdGEuaGFzaCA9IFwiI1wiICsgZGF0YS5oYXNoO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRkYXRhLnVybCA9IHVybDtcclxuXHRcdFx0dGhpcy5zdGFjay5wdXNoKCBkYXRhICk7XHJcblx0XHRcdHRoaXMuYWN0aXZlSW5kZXggPSB0aGlzLnN0YWNrLmxlbmd0aCAtIDE7XHJcblx0XHR9LFxyXG5cclxuXHRcdC8vd2lwZSB1cmxzIGFoZWFkIG9mIGFjdGl2ZSBpbmRleFxyXG5cdFx0Y2xlYXJGb3J3YXJkOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dGhpcy5zdGFjayA9IHRoaXMuc3RhY2suc2xpY2UoIDAsIHRoaXMuYWN0aXZlSW5kZXggKyAxICk7XHJcblx0XHR9LFxyXG5cclxuXHRcdGZpbmQ6IGZ1bmN0aW9uKCB1cmwsIHN0YWNrLCBlYXJseVJldHVybiApIHtcclxuXHRcdFx0c3RhY2sgPSBzdGFjayB8fCB0aGlzLnN0YWNrO1xyXG5cclxuXHRcdFx0dmFyIGVudHJ5LCBpLCBsZW5ndGggPSBzdGFjay5sZW5ndGgsIGluZGV4O1xyXG5cclxuXHRcdFx0Zm9yICggaSA9IDA7IGkgPCBsZW5ndGg7IGkrKyApIHtcclxuXHRcdFx0XHRlbnRyeSA9IHN0YWNrW2ldO1xyXG5cclxuXHRcdFx0XHRpZiAoIGRlY29kZVVSSUNvbXBvbmVudCh1cmwpID09PSBkZWNvZGVVUklDb21wb25lbnQoZW50cnkudXJsKSB8fFxyXG5cdFx0XHRcdFx0ZGVjb2RlVVJJQ29tcG9uZW50KHVybCkgPT09IGRlY29kZVVSSUNvbXBvbmVudChlbnRyeS5oYXNoKSApIHtcclxuXHRcdFx0XHRcdGluZGV4ID0gaTtcclxuXHJcblx0XHRcdFx0XHRpZiAoIGVhcmx5UmV0dXJuICkge1xyXG5cdFx0XHRcdFx0XHRyZXR1cm4gaW5kZXg7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRyZXR1cm4gaW5kZXg7XHJcblx0XHR9LFxyXG5cclxuXHRcdGNsb3Nlc3Q6IGZ1bmN0aW9uKCB1cmwgKSB7XHJcblx0XHRcdHZhciBjbG9zZXN0LCBhID0gdGhpcy5hY3RpdmVJbmRleDtcclxuXHJcblx0XHRcdC8vIEZpcnN0LCB0YWtlIHRoZSBzbGljZSBvZiB0aGUgaGlzdG9yeSBzdGFjayBiZWZvcmUgdGhlIGN1cnJlbnQgaW5kZXggYW5kIHNlYXJjaFxyXG5cdFx0XHQvLyBmb3IgYSB1cmwgbWF0Y2guIElmIG9uZSBpcyBmb3VuZCwgd2UnbGwgYXZvaWQgYXZvaWQgbG9va2luZyB0aHJvdWdoIGZvcndhcmQgaGlzdG9yeVxyXG5cdFx0XHQvLyBOT1RFIHRoZSBwcmVmZXJlbmNlIGZvciBiYWNrd2FyZCBoaXN0b3J5IG1vdmVtZW50IGlzIGRyaXZlbiBieSB0aGUgZmFjdCB0aGF0XHJcblx0XHRcdC8vICAgICAgbW9zdCBtb2JpbGUgYnJvd3NlcnMgb25seSBoYXZlIGEgZGVkaWNhdGVkIGJhY2sgYnV0dG9uLCBhbmQgdXNlcnMgcmFyZWx5IHVzZVxyXG5cdFx0XHQvLyAgICAgIHRoZSBmb3J3YXJkIGJ1dHRvbiBpbiBkZXNrdG9wIGJyb3dzZXIgYW55aG93XHJcblx0XHRcdGNsb3Nlc3QgPSB0aGlzLmZpbmQoIHVybCwgdGhpcy5zdGFjay5zbGljZSgwLCBhKSApO1xyXG5cclxuXHRcdFx0Ly8gSWYgbm90aGluZyB3YXMgZm91bmQgaW4gYmFja3dhcmQgaGlzdG9yeSBjaGVjayBmb3J3YXJkLiBUaGUgYHRydWVgXHJcblx0XHRcdC8vIHZhbHVlIHBhc3NlZCBhcyB0aGUgdGhpcmQgcGFyYW1ldGVyIGNhdXNlcyB0aGUgZmluZCBtZXRob2QgdG8gYnJlYWtcclxuXHRcdFx0Ly8gb24gdGhlIGZpcnN0IG1hdGNoIGluIHRoZSBmb3J3YXJkIGhpc3Rvcnkgc2xpY2UuIFRoZSBzdGFydGluZyBpbmRleFxyXG5cdFx0XHQvLyBvZiB0aGUgc2xpY2UgbXVzdCB0aGVuIGJlIGFkZGVkIHRvIHRoZSByZXN1bHQgdG8gZ2V0IHRoZSBlbGVtZW50IGluZGV4XHJcblx0XHRcdC8vIGluIHRoZSBvcmlnaW5hbCBoaXN0b3J5IHN0YWNrIDooIDooXHJcblx0XHRcdC8vXHJcblx0XHRcdC8vIFRPRE8gdGhpcyBpcyBoeXBlciBjb25mdXNpbmcgYW5kIHNob3VsZCBiZSBjbGVhbmVkIHVwICh1Z2ggc28gYmFkKVxyXG5cdFx0XHRpZiAoIGNsb3Nlc3QgPT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0XHRjbG9zZXN0ID0gdGhpcy5maW5kKCB1cmwsIHRoaXMuc3RhY2suc2xpY2UoYSksIHRydWUgKTtcclxuXHRcdFx0XHRjbG9zZXN0ID0gY2xvc2VzdCA9PT0gdW5kZWZpbmVkID8gY2xvc2VzdCA6IGNsb3Nlc3QgKyBhO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRyZXR1cm4gY2xvc2VzdDtcclxuXHRcdH0sXHJcblxyXG5cdFx0ZGlyZWN0OiBmdW5jdGlvbiggb3B0cyApIHtcclxuXHRcdFx0dmFyIG5ld0FjdGl2ZUluZGV4ID0gdGhpcy5jbG9zZXN0KCBvcHRzLnVybCApLCBhID0gdGhpcy5hY3RpdmVJbmRleDtcclxuXHJcblx0XHRcdC8vIHNhdmUgbmV3IHBhZ2UgaW5kZXgsIG51bGwgY2hlY2sgdG8gcHJldmVudCBmYWxzZXkgMCByZXN1bHRcclxuXHRcdFx0Ly8gcmVjb3JkIHRoZSBwcmV2aW91cyBpbmRleCBmb3IgcmVmZXJlbmNlXHJcblx0XHRcdGlmICggbmV3QWN0aXZlSW5kZXggIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0XHR0aGlzLmFjdGl2ZUluZGV4ID0gbmV3QWN0aXZlSW5kZXg7XHJcblx0XHRcdFx0dGhpcy5wcmV2aW91c0luZGV4ID0gYTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gaW52b2tlIGNhbGxiYWNrcyB3aGVyZSBhcHByb3ByaWF0ZVxyXG5cdFx0XHQvL1xyXG5cdFx0XHQvLyBUT0RPIHRoaXMgaXMgYWxzbyBjb252b2x1dGVkIGFuZCBjb25mdXNpbmdcclxuXHRcdFx0aWYgKCBuZXdBY3RpdmVJbmRleCA8IGEgKSB7XHJcblx0XHRcdFx0KCBvcHRzLnByZXNlbnQgfHwgb3B0cy5iYWNrIHx8ICQubm9vcCApKCB0aGlzLmdldEFjdGl2ZSgpLCBcImJhY2tcIiApO1xyXG5cdFx0XHR9IGVsc2UgaWYgKCBuZXdBY3RpdmVJbmRleCA+IGEgKSB7XHJcblx0XHRcdFx0KCBvcHRzLnByZXNlbnQgfHwgb3B0cy5mb3J3YXJkIHx8ICQubm9vcCApKCB0aGlzLmdldEFjdGl2ZSgpLCBcImZvcndhcmRcIiApO1xyXG5cdFx0XHR9IGVsc2UgaWYgKCBuZXdBY3RpdmVJbmRleCA9PT0gdW5kZWZpbmVkICYmIG9wdHMubWlzc2luZyApIHtcclxuXHRcdFx0XHRvcHRzLm1pc3NpbmcoIHRoaXMuZ2V0QWN0aXZlKCkgKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH0pO1xyXG59KSggalF1ZXJ5ICk7XHJcblxyXG5cclxuXHJcbihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xyXG5cdHZhciBwYXRoID0gJC5tb2JpbGUucGF0aCxcclxuXHRcdGluaXRpYWxIcmVmID0gbG9jYXRpb24uaHJlZjtcclxuXHJcblx0JC5tb2JpbGUuTmF2aWdhdG9yID0gZnVuY3Rpb24oIGhpc3RvcnkgKSB7XHJcblx0XHR0aGlzLmhpc3RvcnkgPSBoaXN0b3J5O1xyXG5cdFx0dGhpcy5pZ25vcmVJbml0aWFsSGFzaENoYW5nZSA9IHRydWU7XHJcblxyXG5cdFx0JC5tb2JpbGUud2luZG93LmJpbmQoe1xyXG5cdFx0XHRcInBvcHN0YXRlLmhpc3RvcnlcIjogJC5wcm94eSggdGhpcy5wb3BzdGF0ZSwgdGhpcyApLFxyXG5cdFx0XHRcImhhc2hjaGFuZ2UuaGlzdG9yeVwiOiAkLnByb3h5KCB0aGlzLmhhc2hjaGFuZ2UsIHRoaXMgKVxyXG5cdFx0fSk7XHJcblx0fTtcclxuXHJcblx0JC5leHRlbmQoJC5tb2JpbGUuTmF2aWdhdG9yLnByb3RvdHlwZSwge1xyXG5cdFx0c3F1YXNoOiBmdW5jdGlvbiggdXJsLCBkYXRhICkge1xyXG5cdFx0XHR2YXIgc3RhdGUsIGhyZWYsIGhhc2ggPSBwYXRoLmlzUGF0aCh1cmwpID8gcGF0aC5zdHJpcEhhc2godXJsKSA6IHVybDtcclxuXHJcblx0XHRcdGhyZWYgPSBwYXRoLnNxdWFzaCggdXJsICk7XHJcblxyXG5cdFx0XHQvLyBtYWtlIHN1cmUgdG8gcHJvdmlkZSB0aGlzIGluZm9ybWF0aW9uIHdoZW4gaXQgaXNuJ3QgZXhwbGljaXRseSBzZXQgaW4gdGhlXHJcblx0XHRcdC8vIGRhdGEgb2JqZWN0IHRoYXQgd2FzIHBhc3NlZCB0byB0aGUgc3F1YXNoIG1ldGhvZFxyXG5cdFx0XHRzdGF0ZSA9ICQuZXh0ZW5kKHtcclxuXHRcdFx0XHRoYXNoOiBoYXNoLFxyXG5cdFx0XHRcdHVybDogaHJlZlxyXG5cdFx0XHR9LCBkYXRhKTtcclxuXHJcblx0XHRcdC8vIHJlcGxhY2UgdGhlIGN1cnJlbnQgdXJsIHdpdGggdGhlIG5ldyBocmVmIGFuZCBzdG9yZSB0aGUgc3RhdGVcclxuXHRcdFx0Ly8gTm90ZSB0aGF0IGluIHNvbWUgY2FzZXMgd2UgbWlnaHQgYmUgcmVwbGFjaW5nIGFuIHVybCB3aXRoIHRoZVxyXG5cdFx0XHQvLyBzYW1lIHVybC4gV2UgZG8gdGhpcyBhbnl3YXlzIGJlY2F1c2Ugd2UgbmVlZCB0byBtYWtlIHN1cmUgdGhhdFxyXG5cdFx0XHQvLyBhbGwgb2Ygb3VyIGhpc3RvcnkgZW50cmllcyBoYXZlIGEgc3RhdGUgb2JqZWN0IGFzc29jaWF0ZWQgd2l0aFxyXG5cdFx0XHQvLyB0aGVtLiBUaGlzIGFsbG93cyB1cyB0byB3b3JrIGFyb3VuZCB0aGUgY2FzZSB3aGVyZSAkLm1vYmlsZS5iYWNrKClcclxuXHRcdFx0Ly8gaXMgY2FsbGVkIHRvIHRyYW5zaXRpb24gZnJvbSBhbiBleHRlcm5hbCBwYWdlIHRvIGFuIGVtYmVkZGVkIHBhZ2UuXHJcblx0XHRcdC8vIEluIHRoYXQgcGFydGljdWxhciBjYXNlLCBhIGhhc2hjaGFuZ2UgZXZlbnQgaXMgKk5PVCogZ2VuZXJhdGVkIGJ5IHRoZSBicm93c2VyLlxyXG5cdFx0XHQvLyBFbnN1cmluZyBlYWNoIGhpc3RvcnkgZW50cnkgaGFzIGEgc3RhdGUgb2JqZWN0IG1lYW5zIHRoYXQgb25Qb3BTdGF0ZSgpXHJcblx0XHRcdC8vIHdpbGwgYWx3YXlzIHRyaWdnZXIgb3VyIGhhc2hjaGFuZ2UgY2FsbGJhY2sgZXZlbiB3aGVuIGEgaGFzaGNoYW5nZSBldmVudFxyXG5cdFx0XHQvLyBpcyBub3QgZmlyZWQuXHJcblx0XHRcdHdpbmRvdy5oaXN0b3J5LnJlcGxhY2VTdGF0ZSggc3RhdGUsIHN0YXRlLnRpdGxlIHx8IGRvY3VtZW50LnRpdGxlLCBocmVmICk7XHJcblxyXG5cdFx0XHRyZXR1cm4gc3RhdGU7XHJcblx0XHR9LFxyXG5cclxuXHRcdGhhc2g6IGZ1bmN0aW9uKCB1cmwsIGhyZWYgKSB7XHJcblx0XHRcdHZhciBwYXJzZWQsIGxvYywgaGFzaCwgcmVzb2x2ZWQ7XHJcblxyXG5cdFx0XHQvLyBHcmFiIHRoZSBoYXNoIGZvciByZWNvcmRpbmcuIElmIHRoZSBwYXNzZWQgdXJsIGlzIGEgcGF0aFxyXG5cdFx0XHQvLyB3ZSB1c2VkIHRoZSBwYXJzZWQgdmVyc2lvbiBvZiB0aGUgc3F1YXNoZWQgdXJsIHRvIHJlY29uc3RydWN0LFxyXG5cdFx0XHQvLyBvdGhlcndpc2Ugd2UgYXNzdW1lIGl0J3MgYSBoYXNoIGFuZCBzdG9yZSBpdCBkaXJlY3RseVxyXG5cdFx0XHRwYXJzZWQgPSBwYXRoLnBhcnNlVXJsKCB1cmwgKTtcclxuXHRcdFx0bG9jID0gcGF0aC5wYXJzZUxvY2F0aW9uKCk7XHJcblxyXG5cdFx0XHRpZiAoIGxvYy5wYXRobmFtZSArIGxvYy5zZWFyY2ggPT09IHBhcnNlZC5wYXRobmFtZSArIHBhcnNlZC5zZWFyY2ggKSB7XHJcblx0XHRcdFx0Ly8gSWYgdGhlIHBhdGhuYW1lIGFuZCBzZWFyY2ggb2YgdGhlIHBhc3NlZCB1cmwgaXMgaWRlbnRpY2FsIHRvIHRoZSBjdXJyZW50IGxvY1xyXG5cdFx0XHRcdC8vIHRoZW4gd2UgbXVzdCB1c2UgdGhlIGhhc2guIE90aGVyd2lzZSB0aGVyZSB3aWxsIGJlIG5vIGV2ZW50XHJcblx0XHRcdFx0Ly8gZWcsIHVybCA9IFwiL2Zvby9iYXI/YmF6I2JhbmdcIiwgbG9jYXRpb24uaHJlZiA9IFwiaHR0cDovL2V4YW1wbGUuY29tL2Zvby9iYXI/YmF6XCJcclxuXHRcdFx0XHRoYXNoID0gcGFyc2VkLmhhc2ggPyBwYXJzZWQuaGFzaCA6IHBhcnNlZC5wYXRobmFtZSArIHBhcnNlZC5zZWFyY2g7XHJcblx0XHRcdH0gZWxzZSBpZiAoIHBhdGguaXNQYXRoKHVybCkgKSB7XHJcblx0XHRcdFx0cmVzb2x2ZWQgPSBwYXRoLnBhcnNlVXJsKCBocmVmICk7XHJcblx0XHRcdFx0Ly8gSWYgdGhlIHBhc3NlZCB1cmwgaXMgYSBwYXRoLCBtYWtlIGl0IGRvbWFpbiByZWxhdGl2ZSBhbmQgcmVtb3ZlIGFueSB0cmFpbGluZyBoYXNoXHJcblx0XHRcdFx0aGFzaCA9IHJlc29sdmVkLnBhdGhuYW1lICsgcmVzb2x2ZWQuc2VhcmNoICsgKHBhdGguaXNQcmVzZXJ2YWJsZUhhc2goIHJlc29sdmVkLmhhc2ggKT8gcmVzb2x2ZWQuaGFzaC5yZXBsYWNlKCBcIiNcIiwgXCJcIiApIDogXCJcIik7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0aGFzaCA9IHVybDtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0cmV0dXJuIGhhc2g7XHJcblx0XHR9LFxyXG5cclxuXHRcdC8vIFRPRE8gcmVjb25zaWRlciBuYW1lXHJcblx0XHRnbzogZnVuY3Rpb24oIHVybCwgZGF0YSwgbm9FdmVudHMgKSB7XHJcblx0XHRcdHZhciBzdGF0ZSwgaHJlZiwgaGFzaCwgcG9wc3RhdGVFdmVudCxcclxuXHRcdFx0XHRpc1BvcFN0YXRlRXZlbnQgPSAkLmV2ZW50LnNwZWNpYWwubmF2aWdhdGUuaXNQdXNoU3RhdGVFbmFibGVkKCk7XHJcblxyXG5cdFx0XHQvLyBHZXQgdGhlIHVybCBhcyBpdCB3b3VsZCBsb29rIHNxdWFzaGVkIG9uIHRvIHRoZSBjdXJyZW50IHJlc29sdXRpb24gdXJsXHJcblx0XHRcdGhyZWYgPSBwYXRoLnNxdWFzaCggdXJsICk7XHJcblxyXG5cdFx0XHQvLyBzb3J0IG91dCB3aGF0IHRoZSBoYXNoIHNvdWxkIGJlIGZyb20gdGhlIHVybFxyXG5cdFx0XHRoYXNoID0gdGhpcy5oYXNoKCB1cmwsIGhyZWYgKTtcclxuXHJcblx0XHRcdC8vIEhlcmUgd2UgcHJldmVudCB0aGUgbmV4dCBoYXNoIGNoYW5nZSBvciBwb3BzdGF0ZSBldmVudCBmcm9tIGRvaW5nIGFueVxyXG5cdFx0XHQvLyBoaXN0b3J5IG1hbmFnZW1lbnQuIEluIHRoZSBjYXNlIG9mIGhhc2hjaGFuZ2Ugd2UgZG9uJ3Qgc3dhbGxvdyBpdFxyXG5cdFx0XHQvLyBpZiB0aGVyZSB3aWxsIGJlIG5vIGhhc2hjaGFuZ2UgZmlyZWQgKHNpbmNlIHRoYXQgd29uJ3QgcmVzZXQgdGhlIHZhbHVlKVxyXG5cdFx0XHQvLyBhbmQgd2lsbCBzd2FsbG93IHRoZSBmb2xsb3dpbmcgaGFzaGNoYW5nZVxyXG5cdFx0XHRpZiAoIG5vRXZlbnRzICYmIGhhc2ggIT09IHBhdGguc3RyaXBIYXNoKHBhdGgucGFyc2VMb2NhdGlvbigpLmhhc2gpICkge1xyXG5cdFx0XHRcdHRoaXMucHJldmVudE5leHRIYXNoQ2hhbmdlID0gbm9FdmVudHM7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIElNUE9SVEFOVCBpbiB0aGUgY2FzZSB3aGVyZSBwb3BzdGF0ZSBpcyBzdXBwb3J0ZWQgdGhlIGV2ZW50IHdpbGwgYmUgdHJpZ2dlcmVkXHJcblx0XHRcdC8vICAgICAgZGlyZWN0bHksIHN0b3BwaW5nIGZ1cnRoZXIgZXhlY3V0aW9uIC0gaWUsIGludGVydXB0aW5nIHRoZSBmbG93IG9mIHRoaXNcclxuXHRcdFx0Ly8gICAgICBtZXRob2QgY2FsbCB0byBmaXJlIGJpbmRpbmdzIGF0IHRoaXMgZXhwcmVzc2lvbi4gQmVsb3cgdGhlIG5hdmlnYXRlIG1ldGhvZFxyXG5cdFx0XHQvLyAgICAgIHRoZXJlIGlzIGEgYmluZGluZyB0byBjYXRjaCB0aGlzIGV2ZW50IGFuZCBzdG9wIGl0cyBwcm9wYWdhdGlvbi5cclxuXHRcdFx0Ly9cclxuXHRcdFx0Ly8gICAgICBXZSB0aGVuIHRyaWdnZXIgYSBuZXcgcG9wc3RhdGUgZXZlbnQgb24gdGhlIHdpbmRvdyB3aXRoIGEgbnVsbCBzdGF0ZVxyXG5cdFx0XHQvLyAgICAgIHNvIHRoYXQgdGhlIG5hdmlnYXRlIGV2ZW50cyBjYW4gY29uY2x1ZGUgdGhlaXIgd29yayBwcm9wZXJseVxyXG5cdFx0XHQvL1xyXG5cdFx0XHQvLyBpZiB0aGUgdXJsIGlzIGEgcGF0aCB3ZSB3YW50IHRvIHByZXNlcnZlIHRoZSBxdWVyeSBwYXJhbXMgdGhhdCBhcmUgYXZhaWxhYmxlIG9uXHJcblx0XHRcdC8vIHRoZSBjdXJyZW50IHVybC5cclxuXHRcdFx0dGhpcy5wcmV2ZW50SGFzaEFzc2lnblBvcFN0YXRlID0gdHJ1ZTtcclxuXHRcdFx0d2luZG93LmxvY2F0aW9uLmhhc2ggPSBoYXNoO1xyXG5cclxuXHRcdFx0Ly8gSWYgcG9wc3RhdGUgaXMgZW5hYmxlZCBhbmQgdGhlIGJyb3dzZXIgdHJpZ2dlcnMgYHBvcHN0YXRlYCBldmVudHMgd2hlbiB0aGUgaGFzaFxyXG5cdFx0XHQvLyBpcyBzZXQgKHRoaXMgb2Z0ZW4gaGFwcGVucyBpbW1lZGlhdGVseSBpbiBicm93c2VycyBsaWtlIENocm9tZSksIHRoZW4gdGhlXHJcblx0XHRcdC8vIHRoaXMgZmxhZyB3aWxsIGJlIHNldCB0byBmYWxzZSBhbHJlYWR5LiBJZiBpdCdzIGEgYnJvd3NlciB0aGF0IGRvZXMgbm90IHRyaWdnZXJcclxuXHRcdFx0Ly8gYSBgcG9wc3RhdGVgIG9uIGhhc2ggYXNzaWduZW1lbnQgb3IgYHJlcGxhY2VTdGF0ZWAgdGhlbiB3ZSBuZWVkIGF2b2lkIHRoZSBicmFuY2hcclxuXHRcdFx0Ly8gdGhhdCBzd2FsbG93cyB0aGUgZXZlbnQgY3JlYXRlZCBieSB0aGUgcG9wc3RhdGUgZ2VuZXJhdGVkIGJ5IHRoZSBoYXNoIGFzc2lnbm1lbnRcclxuXHRcdFx0Ly8gQXQgdGhlIHRpbWUgb2YgdGhpcyB3cml0aW5nIHRoaXMgaGFwcGVucyB3aXRoIE9wZXJhIDEyIGFuZCBzb21lIHZlcnNpb24gb2YgSUVcclxuXHRcdFx0dGhpcy5wcmV2ZW50SGFzaEFzc2lnblBvcFN0YXRlID0gZmFsc2U7XHJcblxyXG5cdFx0XHRzdGF0ZSA9ICQuZXh0ZW5kKHtcclxuXHRcdFx0XHR1cmw6IGhyZWYsXHJcblx0XHRcdFx0aGFzaDogaGFzaCxcclxuXHRcdFx0XHR0aXRsZTogZG9jdW1lbnQudGl0bGVcclxuXHRcdFx0fSwgZGF0YSk7XHJcblxyXG5cdFx0XHRpZiAoIGlzUG9wU3RhdGVFdmVudCApIHtcclxuXHRcdFx0XHRwb3BzdGF0ZUV2ZW50ID0gbmV3ICQuRXZlbnQoIFwicG9wc3RhdGVcIiApO1xyXG5cdFx0XHRcdHBvcHN0YXRlRXZlbnQub3JpZ2luYWxFdmVudCA9IHtcclxuXHRcdFx0XHRcdHR5cGU6IFwicG9wc3RhdGVcIixcclxuXHRcdFx0XHRcdHN0YXRlOiBudWxsXHJcblx0XHRcdFx0fTtcclxuXHJcblx0XHRcdFx0dGhpcy5zcXVhc2goIHVybCwgc3RhdGUgKTtcclxuXHJcblx0XHRcdFx0Ly8gVHJpZ2dlciBhIG5ldyBmYXV4IHBvcHN0YXRlIGV2ZW50IHRvIHJlcGxhY2UgdGhlIG9uZSB0aGF0IHdlXHJcblx0XHRcdFx0Ly8gY2F1Z2h0IHRoYXQgd2FzIHRyaWdnZXJlZCBieSB0aGUgaGFzaCBzZXR0aW5nIGFib3ZlLlxyXG5cdFx0XHRcdGlmICggIW5vRXZlbnRzICkge1xyXG5cdFx0XHRcdFx0dGhpcy5pZ25vcmVQb3BTdGF0ZSA9IHRydWU7XHJcblx0XHRcdFx0XHQkLm1vYmlsZS53aW5kb3cudHJpZ2dlciggcG9wc3RhdGVFdmVudCApO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gcmVjb3JkIHRoZSBoaXN0b3J5IGVudHJ5IHNvIHRoYXQgdGhlIGluZm9ybWF0aW9uIGNhbiBiZSBpbmNsdWRlZFxyXG5cdFx0XHQvLyBpbiBoYXNoY2hhbmdlIGV2ZW50IGRyaXZlbiBuYXZpZ2F0ZSBldmVudHMgaW4gYSBzaW1pbGFyIGZhc2hpb24gdG9cclxuXHRcdFx0Ly8gdGhlIHN0YXRlIHRoYXQncyBwcm92aWRlZCBieSBwb3BzdGF0ZVxyXG5cdFx0XHR0aGlzLmhpc3RvcnkuYWRkKCBzdGF0ZS51cmwsIHN0YXRlICk7XHJcblx0XHR9LFxyXG5cclxuXHRcdC8vIFRoaXMgYmluZGluZyBpcyBpbnRlbmRlZCB0byBjYXRjaCB0aGUgcG9wc3RhdGUgZXZlbnRzIHRoYXQgYXJlIGZpcmVkXHJcblx0XHQvLyB3aGVuIGV4ZWN1dGlvbiBvZiB0aGUgYCQubmF2aWdhdGVgIG1ldGhvZCBzdG9wcyBhdCB3aW5kb3cubG9jYXRpb24uaGFzaCA9IHVybDtcclxuXHRcdC8vIGFuZCBjb21wbGV0ZWx5IHByZXZlbnQgdGhlbSBmcm9tIHByb3BhZ2F0aW5nLiBUaGUgcG9wc3RhdGUgZXZlbnQgd2lsbCB0aGVuIGJlXHJcblx0XHQvLyByZXRyaWdnZXJlZCBhZnRlciBleGVjdXRpb24gcmVzdW1lc1xyXG5cdFx0Ly9cclxuXHRcdC8vIFRPRE8gZ3JhYiB0aGUgb3JpZ2luYWwgZXZlbnQgaGVyZSBhbmQgdXNlIGl0IGZvciB0aGUgc3ludGhldGljIGV2ZW50IGluIHRoZVxyXG5cdFx0Ly8gICAgICBzZWNvbmQgaGFsZiBvZiB0aGUgbmF2aWdhdGUgZXhlY3V0aW9uIHRoYXQgd2lsbCBmb2xsb3cgdGhpcyBiaW5kaW5nXHJcblx0XHRwb3BzdGF0ZTogZnVuY3Rpb24oIGV2ZW50ICkge1xyXG5cdFx0XHR2YXIgaGFzaCwgc3RhdGU7XHJcblxyXG5cdFx0XHQvLyBQYXJ0bHkgdG8gc3VwcG9ydCBvdXIgdGVzdCBzdWl0ZSB3aGljaCBtYW51YWxseSBhbHRlcnMgdGhlIHN1cHBvcnRcclxuXHRcdFx0Ly8gdmFsdWUgdG8gdGVzdCBoYXNoY2hhbmdlLiBQYXJ0bHkgdG8gcHJldmVudCBhbGwgYXJvdW5kIHdlaXJkbmVzc1xyXG5cdFx0XHRpZiAoICEkLmV2ZW50LnNwZWNpYWwubmF2aWdhdGUuaXNQdXNoU3RhdGVFbmFibGVkKCkgKSB7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBJZiB0aGlzIGlzIHRoZSBwb3BzdGF0ZSB0cmlnZ2VyZWQgYnkgdGhlIGFjdHVhbCBhbHRlcmF0aW9uIG9mIHRoZSBoYXNoXHJcblx0XHRcdC8vIHByZXZlbnQgaXQgY29tcGxldGVseS4gSGlzdG9yeSBpcyB0cmFja2VkIG1hbnVhbGx5XHJcblx0XHRcdGlmICggdGhpcy5wcmV2ZW50SGFzaEFzc2lnblBvcFN0YXRlICkge1xyXG5cdFx0XHRcdHRoaXMucHJldmVudEhhc2hBc3NpZ25Qb3BTdGF0ZSA9IGZhbHNlO1xyXG5cdFx0XHRcdGV2ZW50LnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gaWYgdGhpcyBpcyB0aGUgcG9wc3RhdGUgdHJpZ2dlcmVkIGFmdGVyIHRoZSBgcmVwbGFjZVN0YXRlYCBjYWxsIGluIHRoZSBnb1xyXG5cdFx0XHQvLyBtZXRob2QsIHRoZW4gc2ltcGx5IGlnbm9yZSBpdC4gVGhlIGhpc3RvcnkgZW50cnkgaGFzIGFscmVhZHkgYmVlbiBjYXB0dXJlZFxyXG5cdFx0XHRpZiAoIHRoaXMuaWdub3JlUG9wU3RhdGUgKSB7XHJcblx0XHRcdFx0dGhpcy5pZ25vcmVQb3BTdGF0ZSA9IGZhbHNlO1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gSWYgdGhlcmUgaXMgbm8gc3RhdGUsIGFuZCB0aGUgaGlzdG9yeSBzdGFjayBsZW5ndGggaXMgb25lIHdlcmVcclxuXHRcdFx0Ly8gcHJvYmFibHkgZ2V0dGluZyB0aGUgcGFnZSBsb2FkIHBvcHN0YXRlIGZpcmVkIGJ5IGJyb3dzZXJzIGxpa2UgY2hyb21lXHJcblx0XHRcdC8vIGF2b2lkIGl0IGFuZCBzZXQgdGhlIG9uZSB0aW1lIGZsYWcgdG8gZmFsc2UuXHJcblx0XHRcdC8vIFRPRE86IERvIHdlIHJlYWxseSBuZWVkIGFsbCB0aGVzZSBjb25kaXRpb25zPyBDb21wYXJpbmcgbG9jYXRpb24gaHJlZnNcclxuXHRcdFx0Ly8gc2hvdWxkIGJlIHN1ZmZpY2llbnQuXHJcblx0XHRcdGlmICggIWV2ZW50Lm9yaWdpbmFsRXZlbnQuc3RhdGUgJiZcclxuXHRcdFx0XHR0aGlzLmhpc3Rvcnkuc3RhY2subGVuZ3RoID09PSAxICYmXHJcblx0XHRcdFx0dGhpcy5pZ25vcmVJbml0aWFsSGFzaENoYW5nZSApIHtcclxuXHRcdFx0XHR0aGlzLmlnbm9yZUluaXRpYWxIYXNoQ2hhbmdlID0gZmFsc2U7XHJcblxyXG5cdFx0XHRcdGlmICggbG9jYXRpb24uaHJlZiA9PT0gaW5pdGlhbEhyZWYgKSB7XHJcblx0XHRcdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gYWNjb3VudCBmb3IgZGlyZWN0IG1hbmlwdWxhdGlvbiBvZiB0aGUgaGFzaC4gVGhhdCBpcywgd2Ugd2lsbCByZWNlaXZlIGEgcG9wc3RhdGVcclxuXHRcdFx0Ly8gd2hlbiB0aGUgaGFzaCBpcyBjaGFuZ2VkIGJ5IGFzc2lnbm1lbnQsIGFuZCBpdCB3b24ndCBoYXZlIGEgc3RhdGUgYXNzb2NpYXRlZC4gV2VcclxuXHRcdFx0Ly8gdGhlbiBuZWVkIHRvIHNxdWFzaCB0aGUgaGFzaC4gU2VlIGJlbG93IGZvciBoYW5kbGluZyBvZiBoYXNoIGFzc2lnbm1lbnQgdGhhdFxyXG5cdFx0XHQvLyBtYXRjaGVzIGFuIGV4aXN0aW5nIGhpc3RvcnkgZW50cnlcclxuXHRcdFx0Ly8gVE9ETyBpdCBtaWdodCBiZSBiZXR0ZXIgdG8gb25seSBhZGQgdG8gdGhlIGhpc3Rvcnkgc3RhY2tcclxuXHRcdFx0Ly8gICAgICB3aGVuIHRoZSBoYXNoIGlzIGFkamFjZW50IHRvIHRoZSBhY3RpdmUgaGlzdG9yeSBlbnRyeVxyXG5cdFx0XHRoYXNoID0gcGF0aC5wYXJzZUxvY2F0aW9uKCkuaGFzaDtcclxuXHRcdFx0aWYgKCAhZXZlbnQub3JpZ2luYWxFdmVudC5zdGF0ZSAmJiBoYXNoICkge1xyXG5cdFx0XHRcdC8vIHNxdWFzaCB0aGUgaGFzaCB0aGF0J3MgYmVlbiBhc3NpZ25lZCBvbiB0aGUgVVJMIHdpdGggcmVwbGFjZVN0YXRlXHJcblx0XHRcdFx0Ly8gYWxzbyBncmFiIHRoZSByZXN1bHRpbmcgc3RhdGUgb2JqZWN0IGZvciBzdG9yYWdlXHJcblx0XHRcdFx0c3RhdGUgPSB0aGlzLnNxdWFzaCggaGFzaCApO1xyXG5cclxuXHRcdFx0XHQvLyByZWNvcmQgdGhlIG5ldyBoYXNoIGFzIGFuIGFkZGl0aW9uYWwgaGlzdG9yeSBlbnRyeVxyXG5cdFx0XHRcdC8vIHRvIG1hdGNoIHRoZSBicm93c2VyJ3MgdHJlYXRtZW50IG9mIGhhc2ggYXNzaWdubWVudFxyXG5cdFx0XHRcdHRoaXMuaGlzdG9yeS5hZGQoIHN0YXRlLnVybCwgc3RhdGUgKTtcclxuXHJcblx0XHRcdFx0Ly8gcGFzcyB0aGUgbmV3bHkgY3JlYXRlZCBzdGF0ZSBpbmZvcm1hdGlvblxyXG5cdFx0XHRcdC8vIGFsb25nIHdpdGggdGhlIGV2ZW50XHJcblx0XHRcdFx0ZXZlbnQuaGlzdG9yeVN0YXRlID0gc3RhdGU7XHJcblxyXG5cdFx0XHRcdC8vIGRvIG5vdCBhbHRlciBoaXN0b3J5LCB3ZSd2ZSBhZGRlZCBhIG5ldyBoaXN0b3J5IGVudHJ5XHJcblx0XHRcdFx0Ly8gc28gd2Uga25vdyB3aGVyZSB3ZSBhcmVcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIElmIGFsbCBlbHNlIGZhaWxzIHRoaXMgaXMgYSBwb3BzdGF0ZSB0aGF0IGNvbWVzIGZyb20gdGhlIGJhY2sgb3IgZm9yd2FyZCBidXR0b25zXHJcblx0XHRcdC8vIG1ha2Ugc3VyZSB0byBzZXQgdGhlIHN0YXRlIG9mIG91ciBoaXN0b3J5IHN0YWNrIHByb3Blcmx5LCBhbmQgcmVjb3JkIHRoZSBkaXJlY3Rpb25hbGl0eVxyXG5cdFx0XHR0aGlzLmhpc3RvcnkuZGlyZWN0KHtcclxuXHRcdFx0XHR1cmw6IChldmVudC5vcmlnaW5hbEV2ZW50LnN0YXRlIHx8IHt9KS51cmwgfHwgaGFzaCxcclxuXHJcblx0XHRcdFx0Ly8gV2hlbiB0aGUgdXJsIGlzIGVpdGhlciBmb3J3YXJkIG9yIGJhY2t3YXJkIGluIGhpc3RvcnkgaW5jbHVkZSB0aGUgZW50cnlcclxuXHRcdFx0XHQvLyBhcyBkYXRhIG9uIHRoZSBldmVudCBvYmplY3QgZm9yIG1lcmdpbmcgYXMgZGF0YSBpbiB0aGUgbmF2aWdhdGUgZXZlbnRcclxuXHRcdFx0XHRwcmVzZW50OiBmdW5jdGlvbiggaGlzdG9yeUVudHJ5LCBkaXJlY3Rpb24gKSB7XHJcblx0XHRcdFx0XHQvLyBtYWtlIHN1cmUgdG8gY3JlYXRlIGEgbmV3IG9iamVjdCB0byBwYXNzIGRvd24gYXMgdGhlIG5hdmlnYXRlIGV2ZW50IGRhdGFcclxuXHRcdFx0XHRcdGV2ZW50Lmhpc3RvcnlTdGF0ZSA9ICQuZXh0ZW5kKHt9LCBoaXN0b3J5RW50cnkpO1xyXG5cdFx0XHRcdFx0ZXZlbnQuaGlzdG9yeVN0YXRlLmRpcmVjdGlvbiA9IGRpcmVjdGlvbjtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cdFx0fSxcclxuXHJcblx0XHQvLyBOT1RFIG11c3QgYmluZCBiZWZvcmUgYG5hdmlnYXRlYCBzcGVjaWFsIGV2ZW50IGhhc2hjaGFuZ2UgYmluZGluZyBvdGhlcndpc2UgdGhlXHJcblx0XHQvLyAgICAgIG5hdmlnYXRpb24gZGF0YSB3b24ndCBiZSBhdHRhY2hlZCB0byB0aGUgaGFzaGNoYW5nZSBldmVudCBpbiB0aW1lIGZvciB0aG9zZVxyXG5cdFx0Ly8gICAgICBiaW5kaW5ncyB0byBhdHRhY2ggaXQgdG8gdGhlIGBuYXZpZ2F0ZWAgc3BlY2lhbCBldmVudFxyXG5cdFx0Ly8gVE9ETyBhZGQgYSBjaGVjayBoZXJlIHRoYXQgYGhhc2hjaGFuZ2UubmF2aWdhdGVgIGlzIGJvdW5kIGFscmVhZHkgb3RoZXJ3aXNlIGl0J3NcclxuXHRcdC8vICAgICAgYnJva2VuIChleGNlcHRpb24/KVxyXG5cdFx0aGFzaGNoYW5nZTogZnVuY3Rpb24oIGV2ZW50ICkge1xyXG5cdFx0XHR2YXIgaGlzdG9yeSwgaGFzaDtcclxuXHJcblx0XHRcdC8vIElmIGhhc2hjaGFuZ2UgbGlzdGVuaW5nIGlzIGV4cGxpY2l0bHkgZGlzYWJsZWQgb3IgcHVzaHN0YXRlIGlzIHN1cHBvcnRlZFxyXG5cdFx0XHQvLyBhdm9pZCBtYWtpbmcgdXNlIG9mIHRoZSBoYXNoY2hhbmdlIGhhbmRsZXIuXHJcblx0XHRcdGlmICghJC5ldmVudC5zcGVjaWFsLm5hdmlnYXRlLmlzSGFzaENoYW5nZUVuYWJsZWQoKSB8fFxyXG5cdFx0XHRcdCQuZXZlbnQuc3BlY2lhbC5uYXZpZ2F0ZS5pc1B1c2hTdGF0ZUVuYWJsZWQoKSApIHtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIE9uIG9jY2FzaW9uIGV4cGxpY2l0bHkgd2FudCB0byBwcmV2ZW50IHRoZSBuZXh0IGhhc2ggZnJvbSBwcm9wb2dhdGluZyBiZWNhdXNlIHdlIG9ubHlcclxuXHRcdFx0Ly8gd2l0aCB0byBhbHRlciB0aGUgdXJsIHRvIHJlcHJlc2VudCB0aGUgbmV3IHN0YXRlIGRvIHNvIGhlcmVcclxuXHRcdFx0aWYgKCB0aGlzLnByZXZlbnROZXh0SGFzaENoYW5nZSApIHtcclxuXHRcdFx0XHR0aGlzLnByZXZlbnROZXh0SGFzaENoYW5nZSA9IGZhbHNlO1xyXG5cdFx0XHRcdGV2ZW50LnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aGlzdG9yeSA9IHRoaXMuaGlzdG9yeTtcclxuXHRcdFx0aGFzaCA9IHBhdGgucGFyc2VMb2NhdGlvbigpLmhhc2g7XHJcblxyXG5cdFx0XHQvLyBJZiB0aGlzIGlzIGEgaGFzaGNoYW5nZSBjYXVzZWQgYnkgdGhlIGJhY2sgb3IgZm9yd2FyZCBidXR0b25cclxuXHRcdFx0Ly8gbWFrZSBzdXJlIHRvIHNldCB0aGUgc3RhdGUgb2Ygb3VyIGhpc3Rvcnkgc3RhY2sgcHJvcGVybHlcclxuXHRcdFx0dGhpcy5oaXN0b3J5LmRpcmVjdCh7XHJcblx0XHRcdFx0dXJsOiBoYXNoLFxyXG5cclxuXHRcdFx0XHQvLyBXaGVuIHRoZSB1cmwgaXMgZWl0aGVyIGZvcndhcmQgb3IgYmFja3dhcmQgaW4gaGlzdG9yeSBpbmNsdWRlIHRoZSBlbnRyeVxyXG5cdFx0XHRcdC8vIGFzIGRhdGEgb24gdGhlIGV2ZW50IG9iamVjdCBmb3IgbWVyZ2luZyBhcyBkYXRhIGluIHRoZSBuYXZpZ2F0ZSBldmVudFxyXG5cdFx0XHRcdHByZXNlbnQ6IGZ1bmN0aW9uKCBoaXN0b3J5RW50cnksIGRpcmVjdGlvbiApIHtcclxuXHRcdFx0XHRcdC8vIG1ha2Ugc3VyZSB0byBjcmVhdGUgYSBuZXcgb2JqZWN0IHRvIHBhc3MgZG93biBhcyB0aGUgbmF2aWdhdGUgZXZlbnQgZGF0YVxyXG5cdFx0XHRcdFx0ZXZlbnQuaGFzaGNoYW5nZVN0YXRlID0gJC5leHRlbmQoe30sIGhpc3RvcnlFbnRyeSk7XHJcblx0XHRcdFx0XHRldmVudC5oYXNoY2hhbmdlU3RhdGUuZGlyZWN0aW9uID0gZGlyZWN0aW9uO1xyXG5cdFx0XHRcdH0sXHJcblxyXG5cdFx0XHRcdC8vIFdoZW4gd2UgZG9uJ3QgZmluZCBhIGhhc2ggaW4gb3VyIGhpc3RvcnkgY2xlYXJseSB3ZSdyZSBhaW1pbmcgdG8gZ28gdGhlcmVcclxuXHRcdFx0XHQvLyByZWNvcmQgdGhlIGVudHJ5IGFzIG5ldyBmb3IgZnV0dXJlIHRyYXZlcnNhbFxyXG5cdFx0XHRcdC8vXHJcblx0XHRcdFx0Ly8gTk9URSBpdCdzIG5vdCBlbnRpcmVseSBjbGVhciB0aGF0IHRoaXMgaXMgdGhlIHJpZ2h0IHRoaW5nIHRvIGRvIGdpdmVuIHRoYXQgd2VcclxuXHRcdFx0XHQvLyAgICAgIGNhbid0IGtub3cgdGhlIHVzZXJzIGludGVudGlvbi4gSXQgbWlnaHQgYmUgYmV0dGVyIHRvIGV4cGxpY2l0bHkgX25vdF9cclxuXHRcdFx0XHQvLyAgICAgIHN1cHBvcnQgbG9jYXRpb24uaGFzaCBhc3NpZ25tZW50IGluIHByZWZlcmVuY2UgdG8gJC5uYXZpZ2F0ZSBjYWxsc1xyXG5cdFx0XHRcdC8vIFRPRE8gZmlyc3QgYXJnIHRvIGFkZCBzaG91bGQgYmUgdGhlIGhyZWYsIGJ1dCBpdCBjYXVzZXMgaXNzdWVzIGluIGlkZW50aWZ5aW5nXHJcblx0XHRcdFx0Ly8gICAgICBlbWJlZGVkIHBhZ2VzXHJcblx0XHRcdFx0bWlzc2luZzogZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHRoaXN0b3J5LmFkZCggaGFzaCwge1xyXG5cdFx0XHRcdFx0XHRoYXNoOiBoYXNoLFxyXG5cdFx0XHRcdFx0XHR0aXRsZTogZG9jdW1lbnQudGl0bGVcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblx0fSk7XHJcbn0pKCBqUXVlcnkgKTtcclxuXHJcblxyXG5cclxuKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7XHJcblx0Ly8gVE9ETyBjb25zaWRlciBxdWV1ZWluZyBuYXZpZ2F0aW9uIGFjdGl2aXR5IHVudGlsIHByZXZpb3VzIGFjdGl2aXRpZXMgaGF2ZSBjb21wbGV0ZWRcclxuXHQvLyAgICAgIHNvIHRoYXQgZW5kIHVzZXJzIGRvbid0IGhhdmUgdG8gdGhpbmsgYWJvdXQgaXQuIFB1bnRpbmcgZm9yIG5vd1xyXG5cdC8vIFRPRE8gISEgbW92ZSB0aGUgZXZlbnQgYmluZGluZ3MgaW50byBjYWxsYmFja3Mgb24gdGhlIG5hdmlnYXRlIGV2ZW50XHJcblx0JC5tb2JpbGUubmF2aWdhdGUgPSBmdW5jdGlvbiggdXJsLCBkYXRhLCBub0V2ZW50cyApIHtcclxuXHRcdCQubW9iaWxlLm5hdmlnYXRlLm5hdmlnYXRvci5nbyggdXJsLCBkYXRhLCBub0V2ZW50cyApO1xyXG5cdH07XHJcblxyXG5cdC8vIGV4cG9zZSB0aGUgaGlzdG9yeSBvbiB0aGUgbmF2aWdhdGUgbWV0aG9kIGluIGFudGljaXBhdGlvbiBvZiBmdWxsIGludGVncmF0aW9uIHdpdGhcclxuXHQvLyBleGlzdGluZyBuYXZpZ2F0aW9uIGZ1bmN0aW9uYWx0eSB0aGF0IGlzIHRpZ2h0bHkgY291cGxlZCB0byB0aGUgaGlzdG9yeSBpbmZvcm1hdGlvblxyXG5cdCQubW9iaWxlLm5hdmlnYXRlLmhpc3RvcnkgPSBuZXcgJC5tb2JpbGUuSGlzdG9yeSgpO1xyXG5cclxuXHQvLyBpbnN0YW50aWF0ZSBhbiBpbnN0YW5jZSBvZiB0aGUgbmF2aWdhdG9yIGZvciB1c2Ugd2l0aGluIHRoZSAkLm5hdmlnYXRlIG1ldGhvZFxyXG5cdCQubW9iaWxlLm5hdmlnYXRlLm5hdmlnYXRvciA9IG5ldyAkLm1vYmlsZS5OYXZpZ2F0b3IoICQubW9iaWxlLm5hdmlnYXRlLmhpc3RvcnkgKTtcclxuXHJcblx0dmFyIGxvYyA9ICQubW9iaWxlLnBhdGgucGFyc2VMb2NhdGlvbigpO1xyXG5cdCQubW9iaWxlLm5hdmlnYXRlLmhpc3RvcnkuYWRkKCBsb2MuaHJlZiwge2hhc2g6IGxvYy5oYXNofSApO1xyXG59KSggalF1ZXJ5ICk7XHJcblxyXG5cclxuKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7XHJcblx0dmFyIHByb3BzID0ge1xyXG5cdFx0XHRcImFuaW1hdGlvblwiOiB7fSxcclxuXHRcdFx0XCJ0cmFuc2l0aW9uXCI6IHt9XHJcblx0XHR9LFxyXG5cdFx0dGVzdEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcImFcIiApLFxyXG5cdFx0dmVuZG9yUHJlZml4ZXMgPSBbIFwiXCIsIFwid2Via2l0LVwiLCBcIm1vei1cIiwgXCJvLVwiIF07XHJcblxyXG5cdCQuZWFjaCggWyBcImFuaW1hdGlvblwiLCBcInRyYW5zaXRpb25cIiBdLCBmdW5jdGlvbiggaSwgdGVzdCApIHtcclxuXHJcblx0XHQvLyBHZXQgY29ycmVjdCBuYW1lIGZvciB0ZXN0XHJcblx0XHR2YXIgdGVzdE5hbWUgPSAoIGkgPT09IDAgKSA/IHRlc3QgKyBcIi1cIiArIFwibmFtZVwiIDogdGVzdDtcclxuXHJcblx0XHQkLmVhY2goIHZlbmRvclByZWZpeGVzLCBmdW5jdGlvbiggaiwgcHJlZml4ICkge1xyXG5cdFx0XHRpZiAoIHRlc3RFbGVtZW50LnN0eWxlWyAkLmNhbWVsQ2FzZSggcHJlZml4ICsgdGVzdE5hbWUgKSBdICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdFx0IHByb3BzWyB0ZXN0IF1bIFwicHJlZml4XCIgXSA9IHByZWZpeDtcclxuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIFNldCBldmVudCBhbmQgZHVyYXRpb24gbmFtZXMgZm9yIGxhdGVyIHVzZVxyXG5cdFx0cHJvcHNbIHRlc3QgXVsgXCJkdXJhdGlvblwiIF0gPVxyXG5cdFx0XHQkLmNhbWVsQ2FzZSggcHJvcHNbIHRlc3QgXVsgXCJwcmVmaXhcIiBdICsgdGVzdCArIFwiLVwiICsgXCJkdXJhdGlvblwiICk7XHJcblx0XHRwcm9wc1sgdGVzdCBdWyBcImV2ZW50XCIgXSA9XHJcblx0XHRcdCQuY2FtZWxDYXNlKCBwcm9wc1sgdGVzdCBdWyBcInByZWZpeFwiIF0gKyB0ZXN0ICsgXCItXCIgKyBcImVuZFwiICk7XHJcblxyXG5cdFx0Ly8gQWxsIGxvd2VyIGNhc2UgaWYgbm90IGEgdmVuZG9yIHByb3BcclxuXHRcdGlmICggcHJvcHNbIHRlc3QgXVsgXCJwcmVmaXhcIiBdID09PSBcIlwiICkge1xyXG5cdFx0XHRwcm9wc1sgdGVzdCBdWyBcImV2ZW50XCIgXSA9IHByb3BzWyB0ZXN0IF1bIFwiZXZlbnRcIiBdLnRvTG93ZXJDYXNlKCk7XHJcblx0XHR9XHJcblx0fSk7XHJcblxyXG5cdC8vIElmIGEgdmFsaWQgcHJlZml4IHdhcyBmb3VuZCB0aGVuIHRoZSBpdCBpcyBzdXBwb3J0ZWQgYnkgdGhlIGJyb3dzZXJcclxuXHQkLnN1cHBvcnQuY3NzVHJhbnNpdGlvbnMgPSAoIHByb3BzWyBcInRyYW5zaXRpb25cIiBdWyBcInByZWZpeFwiIF0gIT09IHVuZGVmaW5lZCApO1xyXG5cdCQuc3VwcG9ydC5jc3NBbmltYXRpb25zID0gKCBwcm9wc1sgXCJhbmltYXRpb25cIiBdWyBcInByZWZpeFwiIF0gIT09IHVuZGVmaW5lZCApO1xyXG5cclxuXHQvLyBSZW1vdmUgdGhlIHRlc3RFbGVtZW50XHJcblx0JCggdGVzdEVsZW1lbnQgKS5yZW1vdmUoKTtcclxuXHJcblx0Ly8gQW5pbWF0aW9uIGNvbXBsZXRlIGNhbGxiYWNrXHJcblx0JC5mbi5hbmltYXRpb25Db21wbGV0ZSA9IGZ1bmN0aW9uKCBjYWxsYmFjaywgdHlwZSwgZmFsbGJhY2tUaW1lICkge1xyXG5cdFx0dmFyIHRpbWVyLCBkdXJhdGlvbixcclxuXHRcdFx0dGhhdCA9IHRoaXMsXHJcblx0XHRcdGV2ZW50QmluZGluZyA9IGZ1bmN0aW9uKCkge1xyXG5cclxuXHRcdFx0XHQvLyBDbGVhciB0aGUgdGltZXIgc28gd2UgZG9uJ3QgY2FsbCBjYWxsYmFjayB0d2ljZVxyXG5cdFx0XHRcdGNsZWFyVGltZW91dCggdGltZXIgKTtcclxuXHRcdFx0XHRjYWxsYmFjay5hcHBseSggdGhpcywgYXJndW1lbnRzICk7XHJcblx0XHRcdH0sXHJcblx0XHRcdGFuaW1hdGlvblR5cGUgPSAoICF0eXBlIHx8IHR5cGUgPT09IFwiYW5pbWF0aW9uXCIgKSA/IFwiYW5pbWF0aW9uXCIgOiBcInRyYW5zaXRpb25cIjtcclxuXHJcblx0XHQvLyBNYWtlIHN1cmUgc2VsZWN0ZWQgdHlwZSBpcyBzdXBwb3J0ZWQgYnkgYnJvd3NlclxyXG5cdFx0aWYgKCAoICQuc3VwcG9ydC5jc3NUcmFuc2l0aW9ucyAmJiBhbmltYXRpb25UeXBlID09PSBcInRyYW5zaXRpb25cIiApIHx8XHJcblx0XHRcdCggJC5zdXBwb3J0LmNzc0FuaW1hdGlvbnMgJiYgYW5pbWF0aW9uVHlwZSA9PT0gXCJhbmltYXRpb25cIiApICkge1xyXG5cclxuXHRcdFx0Ly8gSWYgYSBmYWxsYmFjayB0aW1lIHdhcyBub3QgcGFzc2VkIHNldCBvbmVcclxuXHRcdFx0aWYgKCBmYWxsYmFja1RpbWUgPT09IHVuZGVmaW5lZCApIHtcclxuXHJcblx0XHRcdFx0Ly8gTWFrZSBzdXJlIHRoZSB3YXMgbm90IGJvdW5kIHRvIGRvY3VtZW50IGJlZm9yZSBjaGVja2luZyAuY3NzXHJcblx0XHRcdFx0aWYgKCAkKCB0aGlzICkuY29udGV4dCAhPT0gZG9jdW1lbnQgKSB7XHJcblxyXG5cdFx0XHRcdFx0Ly8gUGFyc2UgdGhlIGR1cnJhdGlvbiBzaW5jZSBpdHMgaW4gc2Vjb25kIG11bHRpcGxlIGJ5IDEwMDAgZm9yIG1pbGxpc2Vjb25kc1xyXG5cdFx0XHRcdFx0Ly8gTXVsdGlwbHkgYnkgMyB0byBtYWtlIHN1cmUgd2UgZ2l2ZSB0aGUgYW5pbWF0aW9uIHBsZW50eSBvZiB0aW1lLlxyXG5cdFx0XHRcdFx0ZHVyYXRpb24gPSBwYXJzZUZsb2F0KFxyXG5cdFx0XHRcdFx0XHQkKCB0aGlzICkuY3NzKCBwcm9wc1sgYW5pbWF0aW9uVHlwZSBdLmR1cmF0aW9uIClcclxuXHRcdFx0XHRcdCkgKiAzMDAwO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Ly8gSWYgd2UgY291bGQgbm90IHJlYWQgYSBkdXJhdGlvbiB1c2UgdGhlIGRlZmF1bHRcclxuXHRcdFx0XHRpZiAoIGR1cmF0aW9uID09PSAwIHx8IGR1cmF0aW9uID09PSB1bmRlZmluZWQgfHwgaXNOYU4oIGR1cmF0aW9uICkgKSB7XHJcblx0XHRcdFx0XHRkdXJhdGlvbiA9ICQuZm4uYW5pbWF0aW9uQ29tcGxldGUuZGVmYXVsdER1cmF0aW9uO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gU2V0cyB1cCB0aGUgZmFsbGJhY2sgaWYgZXZlbnQgbmV2ZXIgY29tZXNcclxuXHRcdFx0dGltZXIgPSBzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHQkKCB0aGF0ICkub2ZmKCBwcm9wc1sgYW5pbWF0aW9uVHlwZSBdLmV2ZW50LCBldmVudEJpbmRpbmcgKTtcclxuXHRcdFx0XHRjYWxsYmFjay5hcHBseSggdGhhdCApO1xyXG5cdFx0XHR9LCBkdXJhdGlvbiApO1xyXG5cclxuXHRcdFx0Ly8gQmluZCB0aGUgZXZlbnRcclxuXHRcdFx0cmV0dXJuICQoIHRoaXMgKS5vbmUoIHByb3BzWyBhbmltYXRpb25UeXBlIF0uZXZlbnQsIGV2ZW50QmluZGluZyApO1xyXG5cdFx0fSBlbHNlIHtcclxuXHJcblx0XHRcdC8vIENTUyBhbmltYXRpb24gLyB0cmFuc2l0aW9ucyBub3Qgc3VwcG9ydGVkXHJcblx0XHRcdC8vIERlZmVyIGV4ZWN1dGlvbiBmb3IgY29uc2lzdGVuY3kgYmV0d2VlbiB3ZWJraXQvbm9uIHdlYmtpdFxyXG5cdFx0XHRzZXRUaW1lb3V0KCAkLnByb3h5KCBjYWxsYmFjaywgdGhpcyApLCAwICk7XHJcblx0XHRcdHJldHVybiAkKCB0aGlzICk7XHJcblx0XHR9XHJcblx0fTtcclxuXHJcblx0Ly8gQWxsb3cgZGVmYXVsdCBjYWxsYmFjayB0byBiZSBjb25maWd1cmVkIG9uIG1vYmlsZUluaXRcclxuXHQkLmZuLmFuaW1hdGlvbkNvbXBsZXRlLmRlZmF1bHREdXJhdGlvbiA9IDEwMDA7XHJcbn0pKCBqUXVlcnkgKTtcclxuXHJcbi8vIFRoaXMgcGx1Z2luIGlzIGFuIGV4cGVyaW1lbnQgZm9yIGFic3RyYWN0aW5nIGF3YXkgdGhlIHRvdWNoIGFuZCBtb3VzZVxyXG4vLyBldmVudHMgc28gdGhhdCBkZXZlbG9wZXJzIGRvbid0IGhhdmUgdG8gd29ycnkgYWJvdXQgd2hpY2ggbWV0aG9kIG9mIGlucHV0XHJcbi8vIHRoZSBkZXZpY2UgdGhlaXIgZG9jdW1lbnQgaXMgbG9hZGVkIG9uIHN1cHBvcnRzLlxyXG4vL1xyXG4vLyBUaGUgaWRlYSBoZXJlIGlzIHRvIGFsbG93IHRoZSBkZXZlbG9wZXIgdG8gcmVnaXN0ZXIgbGlzdGVuZXJzIGZvciB0aGVcclxuLy8gYmFzaWMgbW91c2UgZXZlbnRzLCBzdWNoIGFzIG1vdXNlZG93biwgbW91c2Vtb3ZlLCBtb3VzZXVwLCBhbmQgY2xpY2ssXHJcbi8vIGFuZCB0aGUgcGx1Z2luIHdpbGwgdGFrZSBjYXJlIG9mIHJlZ2lzdGVyaW5nIHRoZSBjb3JyZWN0IGxpc3RlbmVyc1xyXG4vLyBiZWhpbmQgdGhlIHNjZW5lcyB0byBpbnZva2UgdGhlIGxpc3RlbmVyIGF0IHRoZSBmYXN0ZXN0IHBvc3NpYmxlIHRpbWVcclxuLy8gZm9yIHRoYXQgZGV2aWNlLCB3aGlsZSBzdGlsbCByZXRhaW5pbmcgdGhlIG9yZGVyIG9mIGV2ZW50IGZpcmluZyBpblxyXG4vLyB0aGUgdHJhZGl0aW9uYWwgbW91c2UgZW52aXJvbm1lbnQsIHNob3VsZCBtdWx0aXBsZSBoYW5kbGVycyBiZSByZWdpc3RlcmVkXHJcbi8vIG9uIHRoZSBzYW1lIGVsZW1lbnQgZm9yIGRpZmZlcmVudCBldmVudHMuXHJcbi8vXHJcbi8vIFRoZSBjdXJyZW50IHZlcnNpb24gZXhwb3NlcyB0aGUgZm9sbG93aW5nIHZpcnR1YWwgZXZlbnRzIHRvIGpRdWVyeSBiaW5kIG1ldGhvZHM6XHJcbi8vIFwidm1vdXNlb3ZlciB2bW91c2Vkb3duIHZtb3VzZW1vdmUgdm1vdXNldXAgdmNsaWNrIHZtb3VzZW91dCB2bW91c2VjYW5jZWxcIlxyXG5cclxuKGZ1bmN0aW9uKCAkLCB3aW5kb3csIGRvY3VtZW50LCB1bmRlZmluZWQgKSB7XHJcblxyXG52YXIgZGF0YVByb3BlcnR5TmFtZSA9IFwidmlydHVhbE1vdXNlQmluZGluZ3NcIixcclxuXHR0b3VjaFRhcmdldFByb3BlcnR5TmFtZSA9IFwidmlydHVhbFRvdWNoSURcIixcclxuXHR2aXJ0dWFsRXZlbnROYW1lcyA9IFwidm1vdXNlb3ZlciB2bW91c2Vkb3duIHZtb3VzZW1vdmUgdm1vdXNldXAgdmNsaWNrIHZtb3VzZW91dCB2bW91c2VjYW5jZWxcIi5zcGxpdCggXCIgXCIgKSxcclxuXHR0b3VjaEV2ZW50UHJvcHMgPSBcImNsaWVudFggY2xpZW50WSBwYWdlWCBwYWdlWSBzY3JlZW5YIHNjcmVlbllcIi5zcGxpdCggXCIgXCIgKSxcclxuXHRtb3VzZUhvb2tQcm9wcyA9ICQuZXZlbnQubW91c2VIb29rcyA/ICQuZXZlbnQubW91c2VIb29rcy5wcm9wcyA6IFtdLFxyXG5cdG1vdXNlRXZlbnRQcm9wcyA9ICQuZXZlbnQucHJvcHMuY29uY2F0KCBtb3VzZUhvb2tQcm9wcyApLFxyXG5cdGFjdGl2ZURvY0hhbmRsZXJzID0ge30sXHJcblx0cmVzZXRUaW1lcklEID0gMCxcclxuXHRzdGFydFggPSAwLFxyXG5cdHN0YXJ0WSA9IDAsXHJcblx0ZGlkU2Nyb2xsID0gZmFsc2UsXHJcblx0Y2xpY2tCbG9ja0xpc3QgPSBbXSxcclxuXHRibG9ja01vdXNlVHJpZ2dlcnMgPSBmYWxzZSxcclxuXHRibG9ja1RvdWNoVHJpZ2dlcnMgPSBmYWxzZSxcclxuXHRldmVudENhcHR1cmVTdXBwb3J0ZWQgPSBcImFkZEV2ZW50TGlzdGVuZXJcIiBpbiBkb2N1bWVudCxcclxuXHQkZG9jdW1lbnQgPSAkKCBkb2N1bWVudCApLFxyXG5cdG5leHRUb3VjaElEID0gMSxcclxuXHRsYXN0VG91Y2hJRCA9IDAsIHRocmVzaG9sZCxcclxuXHRpO1xyXG5cclxuJC52bW91c2UgPSB7XHJcblx0bW92ZURpc3RhbmNlVGhyZXNob2xkOiAxMCxcclxuXHRjbGlja0Rpc3RhbmNlVGhyZXNob2xkOiAxMCxcclxuXHRyZXNldFRpbWVyRHVyYXRpb246IDE1MDBcclxufTtcclxuXHJcbmZ1bmN0aW9uIGdldE5hdGl2ZUV2ZW50KCBldmVudCApIHtcclxuXHJcblx0d2hpbGUgKCBldmVudCAmJiB0eXBlb2YgZXZlbnQub3JpZ2luYWxFdmVudCAhPT0gXCJ1bmRlZmluZWRcIiApIHtcclxuXHRcdGV2ZW50ID0gZXZlbnQub3JpZ2luYWxFdmVudDtcclxuXHR9XHJcblx0cmV0dXJuIGV2ZW50O1xyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVWaXJ0dWFsRXZlbnQoIGV2ZW50LCBldmVudFR5cGUgKSB7XHJcblxyXG5cdHZhciB0ID0gZXZlbnQudHlwZSxcclxuXHRcdG9lLCBwcm9wcywgbmUsIHByb3AsIGN0LCB0b3VjaCwgaSwgaiwgbGVuO1xyXG5cclxuXHRldmVudCA9ICQuRXZlbnQoIGV2ZW50ICk7XHJcblx0ZXZlbnQudHlwZSA9IGV2ZW50VHlwZTtcclxuXHJcblx0b2UgPSBldmVudC5vcmlnaW5hbEV2ZW50O1xyXG5cdHByb3BzID0gJC5ldmVudC5wcm9wcztcclxuXHJcblx0Ly8gYWRkcmVzc2VzIHNlcGFyYXRpb24gb2YgJC5ldmVudC5wcm9wcyBpbiB0byAkLmV2ZW50Lm1vdXNlSG9vay5wcm9wcyBhbmQgSXNzdWUgMzI4MFxyXG5cdC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9qcXVlcnkvanF1ZXJ5LW1vYmlsZS9pc3N1ZXMvMzI4MFxyXG5cdGlmICggdC5zZWFyY2goIC9eKG1vdXNlfGNsaWNrKS8gKSA+IC0xICkge1xyXG5cdFx0cHJvcHMgPSBtb3VzZUV2ZW50UHJvcHM7XHJcblx0fVxyXG5cclxuXHQvLyBjb3B5IG9yaWdpbmFsIGV2ZW50IHByb3BlcnRpZXMgb3ZlciB0byB0aGUgbmV3IGV2ZW50XHJcblx0Ly8gdGhpcyB3b3VsZCBoYXBwZW4gaWYgd2UgY291bGQgY2FsbCAkLmV2ZW50LmZpeCBpbnN0ZWFkIG9mICQuRXZlbnRcclxuXHQvLyBidXQgd2UgZG9uJ3QgaGF2ZSBhIHdheSB0byBmb3JjZSBhbiBldmVudCB0byBiZSBmaXhlZCBtdWx0aXBsZSB0aW1lc1xyXG5cdGlmICggb2UgKSB7XHJcblx0XHRmb3IgKCBpID0gcHJvcHMubGVuZ3RoLCBwcm9wOyBpOyApIHtcclxuXHRcdFx0cHJvcCA9IHByb3BzWyAtLWkgXTtcclxuXHRcdFx0ZXZlbnRbIHByb3AgXSA9IG9lWyBwcm9wIF07XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvLyBtYWtlIHN1cmUgdGhhdCBpZiB0aGUgbW91c2UgYW5kIGNsaWNrIHZpcnR1YWwgZXZlbnRzIGFyZSBnZW5lcmF0ZWRcclxuXHQvLyB3aXRob3V0IGEgLndoaWNoIG9uZSBpcyBkZWZpbmVkXHJcblx0aWYgKCB0LnNlYXJjaCgvbW91c2UoZG93bnx1cCl8Y2xpY2svKSA+IC0xICYmICFldmVudC53aGljaCApIHtcclxuXHRcdGV2ZW50LndoaWNoID0gMTtcclxuXHR9XHJcblxyXG5cdGlmICggdC5zZWFyY2goL150b3VjaC8pICE9PSAtMSApIHtcclxuXHRcdG5lID0gZ2V0TmF0aXZlRXZlbnQoIG9lICk7XHJcblx0XHR0ID0gbmUudG91Y2hlcztcclxuXHRcdGN0ID0gbmUuY2hhbmdlZFRvdWNoZXM7XHJcblx0XHR0b3VjaCA9ICggdCAmJiB0Lmxlbmd0aCApID8gdFswXSA6ICggKCBjdCAmJiBjdC5sZW5ndGggKSA/IGN0WyAwIF0gOiB1bmRlZmluZWQgKTtcclxuXHJcblx0XHRpZiAoIHRvdWNoICkge1xyXG5cdFx0XHRmb3IgKCBqID0gMCwgbGVuID0gdG91Y2hFdmVudFByb3BzLmxlbmd0aDsgaiA8IGxlbjsgaisrKSB7XHJcblx0XHRcdFx0cHJvcCA9IHRvdWNoRXZlbnRQcm9wc1sgaiBdO1xyXG5cdFx0XHRcdGV2ZW50WyBwcm9wIF0gPSB0b3VjaFsgcHJvcCBdO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRyZXR1cm4gZXZlbnQ7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldFZpcnR1YWxCaW5kaW5nRmxhZ3MoIGVsZW1lbnQgKSB7XHJcblxyXG5cdHZhciBmbGFncyA9IHt9LFxyXG5cdFx0YiwgaztcclxuXHJcblx0d2hpbGUgKCBlbGVtZW50ICkge1xyXG5cclxuXHRcdGIgPSAkLmRhdGEoIGVsZW1lbnQsIGRhdGFQcm9wZXJ0eU5hbWUgKTtcclxuXHJcblx0XHRmb3IgKCAgayBpbiBiICkge1xyXG5cdFx0XHRpZiAoIGJbIGsgXSApIHtcclxuXHRcdFx0XHRmbGFnc1sgayBdID0gZmxhZ3MuaGFzVmlydHVhbEJpbmRpbmcgPSB0cnVlO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRlbGVtZW50ID0gZWxlbWVudC5wYXJlbnROb2RlO1xyXG5cdH1cclxuXHRyZXR1cm4gZmxhZ3M7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldENsb3Nlc3RFbGVtZW50V2l0aFZpcnR1YWxCaW5kaW5nKCBlbGVtZW50LCBldmVudFR5cGUgKSB7XHJcblx0dmFyIGI7XHJcblx0d2hpbGUgKCBlbGVtZW50ICkge1xyXG5cclxuXHRcdGIgPSAkLmRhdGEoIGVsZW1lbnQsIGRhdGFQcm9wZXJ0eU5hbWUgKTtcclxuXHJcblx0XHRpZiAoIGIgJiYgKCAhZXZlbnRUeXBlIHx8IGJbIGV2ZW50VHlwZSBdICkgKSB7XHJcblx0XHRcdHJldHVybiBlbGVtZW50O1xyXG5cdFx0fVxyXG5cdFx0ZWxlbWVudCA9IGVsZW1lbnQucGFyZW50Tm9kZTtcclxuXHR9XHJcblx0cmV0dXJuIG51bGw7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGVuYWJsZVRvdWNoQmluZGluZ3MoKSB7XHJcblx0YmxvY2tUb3VjaFRyaWdnZXJzID0gZmFsc2U7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGRpc2FibGVUb3VjaEJpbmRpbmdzKCkge1xyXG5cdGJsb2NrVG91Y2hUcmlnZ2VycyA9IHRydWU7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGVuYWJsZU1vdXNlQmluZGluZ3MoKSB7XHJcblx0bGFzdFRvdWNoSUQgPSAwO1xyXG5cdGNsaWNrQmxvY2tMaXN0Lmxlbmd0aCA9IDA7XHJcblx0YmxvY2tNb3VzZVRyaWdnZXJzID0gZmFsc2U7XHJcblxyXG5cdC8vIFdoZW4gbW91c2UgYmluZGluZ3MgYXJlIGVuYWJsZWQsIG91clxyXG5cdC8vIHRvdWNoIGJpbmRpbmdzIGFyZSBkaXNhYmxlZC5cclxuXHRkaXNhYmxlVG91Y2hCaW5kaW5ncygpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBkaXNhYmxlTW91c2VCaW5kaW5ncygpIHtcclxuXHQvLyBXaGVuIG1vdXNlIGJpbmRpbmdzIGFyZSBkaXNhYmxlZCwgb3VyXHJcblx0Ly8gdG91Y2ggYmluZGluZ3MgYXJlIGVuYWJsZWQuXHJcblx0ZW5hYmxlVG91Y2hCaW5kaW5ncygpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzdGFydFJlc2V0VGltZXIoKSB7XHJcblx0Y2xlYXJSZXNldFRpbWVyKCk7XHJcblx0cmVzZXRUaW1lcklEID0gc2V0VGltZW91dCggZnVuY3Rpb24oKSB7XHJcblx0XHRyZXNldFRpbWVySUQgPSAwO1xyXG5cdFx0ZW5hYmxlTW91c2VCaW5kaW5ncygpO1xyXG5cdH0sICQudm1vdXNlLnJlc2V0VGltZXJEdXJhdGlvbiApO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjbGVhclJlc2V0VGltZXIoKSB7XHJcblx0aWYgKCByZXNldFRpbWVySUQgKSB7XHJcblx0XHRjbGVhclRpbWVvdXQoIHJlc2V0VGltZXJJRCApO1xyXG5cdFx0cmVzZXRUaW1lcklEID0gMDtcclxuXHR9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHRyaWdnZXJWaXJ0dWFsRXZlbnQoIGV2ZW50VHlwZSwgZXZlbnQsIGZsYWdzICkge1xyXG5cdHZhciB2ZTtcclxuXHJcblx0aWYgKCAoIGZsYWdzICYmIGZsYWdzWyBldmVudFR5cGUgXSApIHx8XHJcblx0XHRcdFx0KCAhZmxhZ3MgJiYgZ2V0Q2xvc2VzdEVsZW1lbnRXaXRoVmlydHVhbEJpbmRpbmcoIGV2ZW50LnRhcmdldCwgZXZlbnRUeXBlICkgKSApIHtcclxuXHJcblx0XHR2ZSA9IGNyZWF0ZVZpcnR1YWxFdmVudCggZXZlbnQsIGV2ZW50VHlwZSApO1xyXG5cclxuXHRcdCQoIGV2ZW50LnRhcmdldCkudHJpZ2dlciggdmUgKTtcclxuXHR9XHJcblxyXG5cdHJldHVybiB2ZTtcclxufVxyXG5cclxuZnVuY3Rpb24gbW91c2VFdmVudENhbGxiYWNrKCBldmVudCApIHtcclxuXHR2YXIgdG91Y2hJRCA9ICQuZGF0YSggZXZlbnQudGFyZ2V0LCB0b3VjaFRhcmdldFByb3BlcnR5TmFtZSApLFxyXG5cdFx0dmU7XHJcblxyXG5cdGlmICggIWJsb2NrTW91c2VUcmlnZ2VycyAmJiAoICFsYXN0VG91Y2hJRCB8fCBsYXN0VG91Y2hJRCAhPT0gdG91Y2hJRCApICkge1xyXG5cdFx0dmUgPSB0cmlnZ2VyVmlydHVhbEV2ZW50KCBcInZcIiArIGV2ZW50LnR5cGUsIGV2ZW50ICk7XHJcblx0XHRpZiAoIHZlICkge1xyXG5cdFx0XHRpZiAoIHZlLmlzRGVmYXVsdFByZXZlbnRlZCgpICkge1xyXG5cdFx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKCB2ZS5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpICkge1xyXG5cdFx0XHRcdGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmICggdmUuaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQoKSApIHtcclxuXHRcdFx0XHRldmVudC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlVG91Y2hTdGFydCggZXZlbnQgKSB7XHJcblxyXG5cdHZhciB0b3VjaGVzID0gZ2V0TmF0aXZlRXZlbnQoIGV2ZW50ICkudG91Y2hlcyxcclxuXHRcdHRhcmdldCwgZmxhZ3MsIHQ7XHJcblxyXG5cdGlmICggdG91Y2hlcyAmJiB0b3VjaGVzLmxlbmd0aCA9PT0gMSApIHtcclxuXHJcblx0XHR0YXJnZXQgPSBldmVudC50YXJnZXQ7XHJcblx0XHRmbGFncyA9IGdldFZpcnR1YWxCaW5kaW5nRmxhZ3MoIHRhcmdldCApO1xyXG5cclxuXHRcdGlmICggZmxhZ3MuaGFzVmlydHVhbEJpbmRpbmcgKSB7XHJcblxyXG5cdFx0XHRsYXN0VG91Y2hJRCA9IG5leHRUb3VjaElEKys7XHJcblx0XHRcdCQuZGF0YSggdGFyZ2V0LCB0b3VjaFRhcmdldFByb3BlcnR5TmFtZSwgbGFzdFRvdWNoSUQgKTtcclxuXHJcblx0XHRcdGNsZWFyUmVzZXRUaW1lcigpO1xyXG5cclxuXHRcdFx0ZGlzYWJsZU1vdXNlQmluZGluZ3MoKTtcclxuXHRcdFx0ZGlkU2Nyb2xsID0gZmFsc2U7XHJcblxyXG5cdFx0XHR0ID0gZ2V0TmF0aXZlRXZlbnQoIGV2ZW50ICkudG91Y2hlc1sgMCBdO1xyXG5cdFx0XHRzdGFydFggPSB0LnBhZ2VYO1xyXG5cdFx0XHRzdGFydFkgPSB0LnBhZ2VZO1xyXG5cclxuXHRcdFx0dHJpZ2dlclZpcnR1YWxFdmVudCggXCJ2bW91c2VvdmVyXCIsIGV2ZW50LCBmbGFncyApO1xyXG5cdFx0XHR0cmlnZ2VyVmlydHVhbEV2ZW50KCBcInZtb3VzZWRvd25cIiwgZXZlbnQsIGZsYWdzICk7XHJcblx0XHR9XHJcblx0fVxyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVTY3JvbGwoIGV2ZW50ICkge1xyXG5cdGlmICggYmxvY2tUb3VjaFRyaWdnZXJzICkge1xyXG5cdFx0cmV0dXJuO1xyXG5cdH1cclxuXHJcblx0aWYgKCAhZGlkU2Nyb2xsICkge1xyXG5cdFx0dHJpZ2dlclZpcnR1YWxFdmVudCggXCJ2bW91c2VjYW5jZWxcIiwgZXZlbnQsIGdldFZpcnR1YWxCaW5kaW5nRmxhZ3MoIGV2ZW50LnRhcmdldCApICk7XHJcblx0fVxyXG5cclxuXHRkaWRTY3JvbGwgPSB0cnVlO1xyXG5cdHN0YXJ0UmVzZXRUaW1lcigpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVUb3VjaE1vdmUoIGV2ZW50ICkge1xyXG5cdGlmICggYmxvY2tUb3VjaFRyaWdnZXJzICkge1xyXG5cdFx0cmV0dXJuO1xyXG5cdH1cclxuXHJcblx0dmFyIHQgPSBnZXROYXRpdmVFdmVudCggZXZlbnQgKS50b3VjaGVzWyAwIF0sXHJcblx0XHRkaWRDYW5jZWwgPSBkaWRTY3JvbGwsXHJcblx0XHRtb3ZlVGhyZXNob2xkID0gJC52bW91c2UubW92ZURpc3RhbmNlVGhyZXNob2xkLFxyXG5cdFx0ZmxhZ3MgPSBnZXRWaXJ0dWFsQmluZGluZ0ZsYWdzKCBldmVudC50YXJnZXQgKTtcclxuXHJcblx0XHRkaWRTY3JvbGwgPSBkaWRTY3JvbGwgfHxcclxuXHRcdFx0KCBNYXRoLmFicyggdC5wYWdlWCAtIHN0YXJ0WCApID4gbW92ZVRocmVzaG9sZCB8fFxyXG5cdFx0XHRcdE1hdGguYWJzKCB0LnBhZ2VZIC0gc3RhcnRZICkgPiBtb3ZlVGhyZXNob2xkICk7XHJcblxyXG5cdGlmICggZGlkU2Nyb2xsICYmICFkaWRDYW5jZWwgKSB7XHJcblx0XHR0cmlnZ2VyVmlydHVhbEV2ZW50KCBcInZtb3VzZWNhbmNlbFwiLCBldmVudCwgZmxhZ3MgKTtcclxuXHR9XHJcblxyXG5cdHRyaWdnZXJWaXJ0dWFsRXZlbnQoIFwidm1vdXNlbW92ZVwiLCBldmVudCwgZmxhZ3MgKTtcclxuXHRzdGFydFJlc2V0VGltZXIoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlVG91Y2hFbmQoIGV2ZW50ICkge1xyXG5cdGlmICggYmxvY2tUb3VjaFRyaWdnZXJzICkge1xyXG5cdFx0cmV0dXJuO1xyXG5cdH1cclxuXHJcblx0ZGlzYWJsZVRvdWNoQmluZGluZ3MoKTtcclxuXHJcblx0dmFyIGZsYWdzID0gZ2V0VmlydHVhbEJpbmRpbmdGbGFncyggZXZlbnQudGFyZ2V0ICksXHJcblx0XHR2ZSwgdDtcclxuXHR0cmlnZ2VyVmlydHVhbEV2ZW50KCBcInZtb3VzZXVwXCIsIGV2ZW50LCBmbGFncyApO1xyXG5cclxuXHRpZiAoICFkaWRTY3JvbGwgKSB7XHJcblx0XHR2ZSA9IHRyaWdnZXJWaXJ0dWFsRXZlbnQoIFwidmNsaWNrXCIsIGV2ZW50LCBmbGFncyApO1xyXG5cdFx0aWYgKCB2ZSAmJiB2ZS5pc0RlZmF1bHRQcmV2ZW50ZWQoKSApIHtcclxuXHRcdFx0Ly8gVGhlIHRhcmdldCBvZiB0aGUgbW91c2UgZXZlbnRzIHRoYXQgZm9sbG93IHRoZSB0b3VjaGVuZFxyXG5cdFx0XHQvLyBldmVudCBkb24ndCBuZWNlc3NhcmlseSBtYXRjaCB0aGUgdGFyZ2V0IHVzZWQgZHVyaW5nIHRoZVxyXG5cdFx0XHQvLyB0b3VjaC4gVGhpcyBtZWFucyB3ZSBuZWVkIHRvIHJlbHkgb24gY29vcmRpbmF0ZXMgZm9yIGJsb2NraW5nXHJcblx0XHRcdC8vIGFueSBjbGljayB0aGF0IGlzIGdlbmVyYXRlZC5cclxuXHRcdFx0dCA9IGdldE5hdGl2ZUV2ZW50KCBldmVudCApLmNoYW5nZWRUb3VjaGVzWyAwIF07XHJcblx0XHRcdGNsaWNrQmxvY2tMaXN0LnB1c2goe1xyXG5cdFx0XHRcdHRvdWNoSUQ6IGxhc3RUb3VjaElELFxyXG5cdFx0XHRcdHg6IHQuY2xpZW50WCxcclxuXHRcdFx0XHR5OiB0LmNsaWVudFlcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHQvLyBQcmV2ZW50IGFueSBtb3VzZSBldmVudHMgdGhhdCBmb2xsb3cgZnJvbSB0cmlnZ2VyaW5nXHJcblx0XHRcdC8vIHZpcnR1YWwgZXZlbnQgbm90aWZpY2F0aW9ucy5cclxuXHRcdFx0YmxvY2tNb3VzZVRyaWdnZXJzID0gdHJ1ZTtcclxuXHRcdH1cclxuXHR9XHJcblx0dHJpZ2dlclZpcnR1YWxFdmVudCggXCJ2bW91c2VvdXRcIiwgZXZlbnQsIGZsYWdzKTtcclxuXHRkaWRTY3JvbGwgPSBmYWxzZTtcclxuXHJcblx0c3RhcnRSZXNldFRpbWVyKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhc1ZpcnR1YWxCaW5kaW5ncyggZWxlICkge1xyXG5cdHZhciBiaW5kaW5ncyA9ICQuZGF0YSggZWxlLCBkYXRhUHJvcGVydHlOYW1lICksXHJcblx0XHRrO1xyXG5cclxuXHRpZiAoIGJpbmRpbmdzICkge1xyXG5cdFx0Zm9yICggayBpbiBiaW5kaW5ncyApIHtcclxuXHRcdFx0aWYgKCBiaW5kaW5nc1sgayBdICkge1xyXG5cdFx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG5cdHJldHVybiBmYWxzZTtcclxufVxyXG5cclxuZnVuY3Rpb24gZHVtbXlNb3VzZUhhbmRsZXIoKSB7fVxyXG5cclxuZnVuY3Rpb24gZ2V0U3BlY2lhbEV2ZW50T2JqZWN0KCBldmVudFR5cGUgKSB7XHJcblx0dmFyIHJlYWxUeXBlID0gZXZlbnRUeXBlLnN1YnN0ciggMSApO1xyXG5cclxuXHRyZXR1cm4ge1xyXG5cdFx0c2V0dXA6IGZ1bmN0aW9uKC8qIGRhdGEsIG5hbWVzcGFjZSAqLykge1xyXG5cdFx0XHQvLyBJZiB0aGlzIGlzIHRoZSBmaXJzdCB2aXJ0dWFsIG1vdXNlIGJpbmRpbmcgZm9yIHRoaXMgZWxlbWVudCxcclxuXHRcdFx0Ly8gYWRkIGEgYmluZGluZ3Mgb2JqZWN0IHRvIGl0cyBkYXRhLlxyXG5cclxuXHRcdFx0aWYgKCAhaGFzVmlydHVhbEJpbmRpbmdzKCB0aGlzICkgKSB7XHJcblx0XHRcdFx0JC5kYXRhKCB0aGlzLCBkYXRhUHJvcGVydHlOYW1lLCB7fSApO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBJZiBzZXR1cCBpcyBjYWxsZWQsIHdlIGtub3cgaXQgaXMgdGhlIGZpcnN0IGJpbmRpbmcgZm9yIHRoaXNcclxuXHRcdFx0Ly8gZXZlbnRUeXBlLCBzbyBpbml0aWFsaXplIHRoZSBjb3VudCBmb3IgdGhlIGV2ZW50VHlwZSB0byB6ZXJvLlxyXG5cdFx0XHR2YXIgYmluZGluZ3MgPSAkLmRhdGEoIHRoaXMsIGRhdGFQcm9wZXJ0eU5hbWUgKTtcclxuXHRcdFx0YmluZGluZ3NbIGV2ZW50VHlwZSBdID0gdHJ1ZTtcclxuXHJcblx0XHRcdC8vIElmIHRoaXMgaXMgdGhlIGZpcnN0IHZpcnR1YWwgbW91c2UgZXZlbnQgZm9yIHRoaXMgdHlwZSxcclxuXHRcdFx0Ly8gcmVnaXN0ZXIgYSBnbG9iYWwgaGFuZGxlciBvbiB0aGUgZG9jdW1lbnQuXHJcblxyXG5cdFx0XHRhY3RpdmVEb2NIYW5kbGVyc1sgZXZlbnRUeXBlIF0gPSAoIGFjdGl2ZURvY0hhbmRsZXJzWyBldmVudFR5cGUgXSB8fCAwICkgKyAxO1xyXG5cclxuXHRcdFx0aWYgKCBhY3RpdmVEb2NIYW5kbGVyc1sgZXZlbnRUeXBlIF0gPT09IDEgKSB7XHJcblx0XHRcdFx0JGRvY3VtZW50LmJpbmQoIHJlYWxUeXBlLCBtb3VzZUV2ZW50Q2FsbGJhY2sgKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gU29tZSBicm93c2VycywgbGlrZSBPcGVyYSBNaW5pLCB3b24ndCBkaXNwYXRjaCBtb3VzZS9jbGljayBldmVudHNcclxuXHRcdFx0Ly8gZm9yIGVsZW1lbnRzIHVubGVzcyB0aGV5IGFjdHVhbGx5IGhhdmUgaGFuZGxlcnMgcmVnaXN0ZXJlZCBvbiB0aGVtLlxyXG5cdFx0XHQvLyBUbyBnZXQgYXJvdW5kIHRoaXMsIHdlIHJlZ2lzdGVyIGR1bW15IGhhbmRsZXJzIG9uIHRoZSBlbGVtZW50cy5cclxuXHJcblx0XHRcdCQoIHRoaXMgKS5iaW5kKCByZWFsVHlwZSwgZHVtbXlNb3VzZUhhbmRsZXIgKTtcclxuXHJcblx0XHRcdC8vIEZvciBub3csIGlmIGV2ZW50IGNhcHR1cmUgaXMgbm90IHN1cHBvcnRlZCwgd2UgcmVseSBvbiBtb3VzZSBoYW5kbGVycy5cclxuXHRcdFx0aWYgKCBldmVudENhcHR1cmVTdXBwb3J0ZWQgKSB7XHJcblx0XHRcdFx0Ly8gSWYgdGhpcyBpcyB0aGUgZmlyc3QgdmlydHVhbCBtb3VzZSBiaW5kaW5nIGZvciB0aGUgZG9jdW1lbnQsXHJcblx0XHRcdFx0Ly8gcmVnaXN0ZXIgb3VyIHRvdWNoc3RhcnQgaGFuZGxlciBvbiB0aGUgZG9jdW1lbnQuXHJcblxyXG5cdFx0XHRcdGFjdGl2ZURvY0hhbmRsZXJzWyBcInRvdWNoc3RhcnRcIiBdID0gKCBhY3RpdmVEb2NIYW5kbGVyc1sgXCJ0b3VjaHN0YXJ0XCIgXSB8fCAwKSArIDE7XHJcblxyXG5cdFx0XHRcdGlmICggYWN0aXZlRG9jSGFuZGxlcnNbIFwidG91Y2hzdGFydFwiIF0gPT09IDEgKSB7XHJcblx0XHRcdFx0XHQkZG9jdW1lbnQuYmluZCggXCJ0b3VjaHN0YXJ0XCIsIGhhbmRsZVRvdWNoU3RhcnQgKVxyXG5cdFx0XHRcdFx0XHQuYmluZCggXCJ0b3VjaGVuZFwiLCBoYW5kbGVUb3VjaEVuZCApXHJcblxyXG5cdFx0XHRcdFx0XHQvLyBPbiB0b3VjaCBwbGF0Zm9ybXMsIHRvdWNoaW5nIHRoZSBzY3JlZW4gYW5kIHRoZW4gZHJhZ2dpbmcgeW91ciBmaW5nZXJcclxuXHRcdFx0XHRcdFx0Ly8gY2F1c2VzIHRoZSB3aW5kb3cgY29udGVudCB0byBzY3JvbGwgYWZ0ZXIgc29tZSBkaXN0YW5jZSB0aHJlc2hvbGQgaXNcclxuXHRcdFx0XHRcdFx0Ly8gZXhjZWVkZWQuIE9uIHRoZXNlIHBsYXRmb3JtcywgYSBzY3JvbGwgcHJldmVudHMgYSBjbGljayBldmVudCBmcm9tIGJlaW5nXHJcblx0XHRcdFx0XHRcdC8vIGRpc3BhdGNoZWQsIGFuZCBvbiBzb21lIHBsYXRmb3JtcywgZXZlbiB0aGUgdG91Y2hlbmQgaXMgc3VwcHJlc3NlZC4gVG9cclxuXHRcdFx0XHRcdFx0Ly8gbWltaWMgdGhlIHN1cHByZXNzaW9uIG9mIHRoZSBjbGljayBldmVudCwgd2UgbmVlZCB0byB3YXRjaCBmb3IgYSBzY3JvbGxcclxuXHRcdFx0XHRcdFx0Ly8gZXZlbnQuIFVuZm9ydHVuYXRlbHksIHNvbWUgcGxhdGZvcm1zIGxpa2UgaU9TIGRvbid0IGRpc3BhdGNoIHNjcm9sbFxyXG5cdFx0XHRcdFx0XHQvLyBldmVudHMgdW50aWwgKkFGVEVSKiB0aGUgdXNlciBsaWZ0cyB0aGVpciBmaW5nZXIgKHRvdWNoZW5kKS4gVGhpcyBtZWFuc1xyXG5cdFx0XHRcdFx0XHQvLyB3ZSBuZWVkIHRvIHdhdGNoIGJvdGggc2Nyb2xsIGFuZCB0b3VjaG1vdmUgZXZlbnRzIHRvIGZpZ3VyZSBvdXQgd2hldGhlclxyXG5cdFx0XHRcdFx0XHQvLyBvciBub3QgYSBzY3JvbGwgaGFwcGVuZW5zIGJlZm9yZSB0aGUgdG91Y2hlbmQgZXZlbnQgaXMgZmlyZWQuXHJcblxyXG5cdFx0XHRcdFx0XHQuYmluZCggXCJ0b3VjaG1vdmVcIiwgaGFuZGxlVG91Y2hNb3ZlIClcclxuXHRcdFx0XHRcdFx0LmJpbmQoIFwic2Nyb2xsXCIsIGhhbmRsZVNjcm9sbCApO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHJcblx0XHR0ZWFyZG93bjogZnVuY3Rpb24oLyogZGF0YSwgbmFtZXNwYWNlICovKSB7XHJcblx0XHRcdC8vIElmIHRoaXMgaXMgdGhlIGxhc3QgdmlydHVhbCBiaW5kaW5nIGZvciB0aGlzIGV2ZW50VHlwZSxcclxuXHRcdFx0Ly8gcmVtb3ZlIGl0cyBnbG9iYWwgaGFuZGxlciBmcm9tIHRoZSBkb2N1bWVudC5cclxuXHJcblx0XHRcdC0tYWN0aXZlRG9jSGFuZGxlcnNbIGV2ZW50VHlwZSBdO1xyXG5cclxuXHRcdFx0aWYgKCAhYWN0aXZlRG9jSGFuZGxlcnNbIGV2ZW50VHlwZSBdICkge1xyXG5cdFx0XHRcdCRkb2N1bWVudC51bmJpbmQoIHJlYWxUeXBlLCBtb3VzZUV2ZW50Q2FsbGJhY2sgKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aWYgKCBldmVudENhcHR1cmVTdXBwb3J0ZWQgKSB7XHJcblx0XHRcdFx0Ly8gSWYgdGhpcyBpcyB0aGUgbGFzdCB2aXJ0dWFsIG1vdXNlIGJpbmRpbmcgaW4gZXhpc3RlbmNlLFxyXG5cdFx0XHRcdC8vIHJlbW92ZSBvdXIgZG9jdW1lbnQgdG91Y2hzdGFydCBsaXN0ZW5lci5cclxuXHJcblx0XHRcdFx0LS1hY3RpdmVEb2NIYW5kbGVyc1sgXCJ0b3VjaHN0YXJ0XCIgXTtcclxuXHJcblx0XHRcdFx0aWYgKCAhYWN0aXZlRG9jSGFuZGxlcnNbIFwidG91Y2hzdGFydFwiIF0gKSB7XHJcblx0XHRcdFx0XHQkZG9jdW1lbnQudW5iaW5kKCBcInRvdWNoc3RhcnRcIiwgaGFuZGxlVG91Y2hTdGFydCApXHJcblx0XHRcdFx0XHRcdC51bmJpbmQoIFwidG91Y2htb3ZlXCIsIGhhbmRsZVRvdWNoTW92ZSApXHJcblx0XHRcdFx0XHRcdC51bmJpbmQoIFwidG91Y2hlbmRcIiwgaGFuZGxlVG91Y2hFbmQgKVxyXG5cdFx0XHRcdFx0XHQudW5iaW5kKCBcInNjcm9sbFwiLCBoYW5kbGVTY3JvbGwgKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHZhciAkdGhpcyA9ICQoIHRoaXMgKSxcclxuXHRcdFx0XHRiaW5kaW5ncyA9ICQuZGF0YSggdGhpcywgZGF0YVByb3BlcnR5TmFtZSApO1xyXG5cclxuXHRcdFx0Ly8gdGVhcmRvd24gbWF5IGJlIGNhbGxlZCB3aGVuIGFuIGVsZW1lbnQgd2FzXHJcblx0XHRcdC8vIHJlbW92ZWQgZnJvbSB0aGUgRE9NLiBJZiB0aGlzIGlzIHRoZSBjYXNlLFxyXG5cdFx0XHQvLyBqUXVlcnkgY29yZSBtYXkgaGF2ZSBhbHJlYWR5IHN0cmlwcGVkIHRoZSBlbGVtZW50XHJcblx0XHRcdC8vIG9mIGFueSBkYXRhIGJpbmRpbmdzIHNvIHdlIG5lZWQgdG8gY2hlY2sgaXQgYmVmb3JlXHJcblx0XHRcdC8vIHVzaW5nIGl0LlxyXG5cdFx0XHRpZiAoIGJpbmRpbmdzICkge1xyXG5cdFx0XHRcdGJpbmRpbmdzWyBldmVudFR5cGUgXSA9IGZhbHNlO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBVbnJlZ2lzdGVyIHRoZSBkdW1teSBldmVudCBoYW5kbGVyLlxyXG5cclxuXHRcdFx0JHRoaXMudW5iaW5kKCByZWFsVHlwZSwgZHVtbXlNb3VzZUhhbmRsZXIgKTtcclxuXHJcblx0XHRcdC8vIElmIHRoaXMgaXMgdGhlIGxhc3QgdmlydHVhbCBtb3VzZSBiaW5kaW5nIG9uIHRoZVxyXG5cdFx0XHQvLyBlbGVtZW50LCByZW1vdmUgdGhlIGJpbmRpbmcgZGF0YSBmcm9tIHRoZSBlbGVtZW50LlxyXG5cclxuXHRcdFx0aWYgKCAhaGFzVmlydHVhbEJpbmRpbmdzKCB0aGlzICkgKSB7XHJcblx0XHRcdFx0JHRoaXMucmVtb3ZlRGF0YSggZGF0YVByb3BlcnR5TmFtZSApO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fTtcclxufVxyXG5cclxuLy8gRXhwb3NlIG91ciBjdXN0b20gZXZlbnRzIHRvIHRoZSBqUXVlcnkgYmluZC91bmJpbmQgbWVjaGFuaXNtLlxyXG5cclxuZm9yICggaSA9IDA7IGkgPCB2aXJ0dWFsRXZlbnROYW1lcy5sZW5ndGg7IGkrKyApIHtcclxuXHQkLmV2ZW50LnNwZWNpYWxbIHZpcnR1YWxFdmVudE5hbWVzWyBpIF0gXSA9IGdldFNwZWNpYWxFdmVudE9iamVjdCggdmlydHVhbEV2ZW50TmFtZXNbIGkgXSApO1xyXG59XHJcblxyXG4vLyBBZGQgYSBjYXB0dXJlIGNsaWNrIGhhbmRsZXIgdG8gYmxvY2sgY2xpY2tzLlxyXG4vLyBOb3RlIHRoYXQgd2UgcmVxdWlyZSBldmVudCBjYXB0dXJlIHN1cHBvcnQgZm9yIHRoaXMgc28gaWYgdGhlIGRldmljZVxyXG4vLyBkb2Vzbid0IHN1cHBvcnQgaXQsIHdlIHB1bnQgZm9yIG5vdyBhbmQgcmVseSBzb2xlbHkgb24gbW91c2UgZXZlbnRzLlxyXG5pZiAoIGV2ZW50Q2FwdHVyZVN1cHBvcnRlZCApIHtcclxuXHRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCBcImNsaWNrXCIsIGZ1bmN0aW9uKCBlICkge1xyXG5cdFx0dmFyIGNudCA9IGNsaWNrQmxvY2tMaXN0Lmxlbmd0aCxcclxuXHRcdFx0dGFyZ2V0ID0gZS50YXJnZXQsXHJcblx0XHRcdHgsIHksIGVsZSwgaSwgbywgdG91Y2hJRDtcclxuXHJcblx0XHRpZiAoIGNudCApIHtcclxuXHRcdFx0eCA9IGUuY2xpZW50WDtcclxuXHRcdFx0eSA9IGUuY2xpZW50WTtcclxuXHRcdFx0dGhyZXNob2xkID0gJC52bW91c2UuY2xpY2tEaXN0YW5jZVRocmVzaG9sZDtcclxuXHJcblx0XHRcdC8vIFRoZSBpZGVhIGhlcmUgaXMgdG8gcnVuIHRocm91Z2ggdGhlIGNsaWNrQmxvY2tMaXN0IHRvIHNlZSBpZlxyXG5cdFx0XHQvLyB0aGUgY3VycmVudCBjbGljayBldmVudCBpcyBpbiB0aGUgcHJveGltaXR5IG9mIG9uZSBvZiBvdXJcclxuXHRcdFx0Ly8gdmNsaWNrIGV2ZW50cyB0aGF0IGhhZCBwcmV2ZW50RGVmYXVsdCgpIGNhbGxlZCBvbiBpdC4gSWYgd2UgZmluZFxyXG5cdFx0XHQvLyBvbmUsIHRoZW4gd2UgYmxvY2sgdGhlIGNsaWNrLlxyXG5cdFx0XHQvL1xyXG5cdFx0XHQvLyBXaHkgZG8gd2UgaGF2ZSB0byByZWx5IG9uIHByb3hpbWl0eT9cclxuXHRcdFx0Ly9cclxuXHRcdFx0Ly8gQmVjYXVzZSB0aGUgdGFyZ2V0IG9mIHRoZSB0b3VjaCBldmVudCB0aGF0IHRyaWdnZXJlZCB0aGUgdmNsaWNrXHJcblx0XHRcdC8vIGNhbiBiZSBkaWZmZXJlbnQgZnJvbSB0aGUgdGFyZ2V0IG9mIHRoZSBjbGljayBldmVudCBzeW50aGVzaXplZFxyXG5cdFx0XHQvLyBieSB0aGUgYnJvd3Nlci4gVGhlIHRhcmdldCBvZiBhIG1vdXNlL2NsaWNrIGV2ZW50IHRoYXQgaXMgc3ludGhlc2l6ZWRcclxuXHRcdFx0Ly8gZnJvbSBhIHRvdWNoIGV2ZW50IHNlZW1zIHRvIGJlIGltcGxlbWVudGF0aW9uIHNwZWNpZmljLiBGb3IgZXhhbXBsZSxcclxuXHRcdFx0Ly8gc29tZSBicm93c2VycyB3aWxsIGZpcmUgbW91c2UvY2xpY2sgZXZlbnRzIGZvciBhIGxpbmsgdGhhdCBpcyBuZWFyXHJcblx0XHRcdC8vIGEgdG91Y2ggZXZlbnQsIGV2ZW4gdGhvdWdoIHRoZSB0YXJnZXQgb2YgdGhlIHRvdWNoc3RhcnQvdG91Y2hlbmQgZXZlbnRcclxuXHRcdFx0Ly8gc2F5cyB0aGUgdXNlciB0b3VjaGVkIG91dHNpZGUgdGhlIGxpbmsuIEFsc28sIGl0IHNlZW1zIHRoYXQgd2l0aCBtb3N0XHJcblx0XHRcdC8vIGJyb3dzZXJzLCB0aGUgdGFyZ2V0IG9mIHRoZSBtb3VzZS9jbGljayBldmVudCBpcyBub3QgY2FsY3VsYXRlZCB1bnRpbCB0aGVcclxuXHRcdFx0Ly8gdGltZSBpdCBpcyBkaXNwYXRjaGVkLCBzbyBpZiB5b3UgcmVwbGFjZSBhbiBlbGVtZW50IHRoYXQgeW91IHRvdWNoZWRcclxuXHRcdFx0Ly8gd2l0aCBhbm90aGVyIGVsZW1lbnQsIHRoZSB0YXJnZXQgb2YgdGhlIG1vdXNlL2NsaWNrIHdpbGwgYmUgdGhlIG5ld1xyXG5cdFx0XHQvLyBlbGVtZW50IHVuZGVybmVhdGggdGhhdCBwb2ludC5cclxuXHRcdFx0Ly9cclxuXHRcdFx0Ly8gQXNpZGUgZnJvbSBwcm94aW1pdHksIHdlIGFsc28gY2hlY2sgdG8gc2VlIGlmIHRoZSB0YXJnZXQgYW5kIGFueVxyXG5cdFx0XHQvLyBvZiBpdHMgYW5jZXN0b3JzIHdlcmUgdGhlIG9uZXMgdGhhdCBibG9ja2VkIGEgY2xpY2suIFRoaXMgaXMgbmVjZXNzYXJ5XHJcblx0XHRcdC8vIGJlY2F1c2Ugb2YgdGhlIHN0cmFuZ2UgbW91c2UvY2xpY2sgdGFyZ2V0IGNhbGN1bGF0aW9uIGRvbmUgaW4gdGhlXHJcblx0XHRcdC8vIEFuZHJvaWQgMi4xIGJyb3dzZXIsIHdoZXJlIGlmIHlvdSBjbGljayBvbiBhbiBlbGVtZW50LCBhbmQgdGhlcmUgaXMgYVxyXG5cdFx0XHQvLyBtb3VzZS9jbGljayBoYW5kbGVyIG9uIG9uZSBvZiBpdHMgYW5jZXN0b3JzLCB0aGUgdGFyZ2V0IHdpbGwgYmUgdGhlXHJcblx0XHRcdC8vIGlubmVybW9zdCBjaGlsZCBvZiB0aGUgdG91Y2hlZCBlbGVtZW50LCBldmVuIGlmIHRoYXQgY2hpbGQgaXMgbm8gd2hlcmVcclxuXHRcdFx0Ly8gbmVhciB0aGUgcG9pbnQgb2YgdG91Y2guXHJcblxyXG5cdFx0XHRlbGUgPSB0YXJnZXQ7XHJcblxyXG5cdFx0XHR3aGlsZSAoIGVsZSApIHtcclxuXHRcdFx0XHRmb3IgKCBpID0gMDsgaSA8IGNudDsgaSsrICkge1xyXG5cdFx0XHRcdFx0byA9IGNsaWNrQmxvY2tMaXN0WyBpIF07XHJcblx0XHRcdFx0XHR0b3VjaElEID0gMDtcclxuXHJcblx0XHRcdFx0XHRpZiAoICggZWxlID09PSB0YXJnZXQgJiYgTWF0aC5hYnMoIG8ueCAtIHggKSA8IHRocmVzaG9sZCAmJiBNYXRoLmFicyggby55IC0geSApIDwgdGhyZXNob2xkICkgfHxcclxuXHRcdFx0XHRcdFx0XHRcdCQuZGF0YSggZWxlLCB0b3VjaFRhcmdldFByb3BlcnR5TmFtZSApID09PSBvLnRvdWNoSUQgKSB7XHJcblx0XHRcdFx0XHRcdC8vIFhYWDogV2UgbWF5IHdhbnQgdG8gY29uc2lkZXIgcmVtb3ZpbmcgbWF0Y2hlcyBmcm9tIHRoZSBibG9jayBsaXN0XHJcblx0XHRcdFx0XHRcdC8vICAgICAgaW5zdGVhZCBvZiB3YWl0aW5nIGZvciB0aGUgcmVzZXQgdGltZXIgdG8gZmlyZS5cclxuXHRcdFx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHRcdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGVsZSA9IGVsZS5wYXJlbnROb2RlO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fSwgdHJ1ZSk7XHJcbn1cclxufSkoIGpRdWVyeSwgd2luZG93LCBkb2N1bWVudCApO1xyXG5cclxuXHJcbihmdW5jdGlvbiggJCwgd2luZG93LCB1bmRlZmluZWQgKSB7XHJcblx0dmFyICRkb2N1bWVudCA9ICQoIGRvY3VtZW50ICksXHJcblx0XHRzdXBwb3J0VG91Y2ggPSAkLm1vYmlsZS5zdXBwb3J0LnRvdWNoLFxyXG5cdFx0c2Nyb2xsRXZlbnQgPSBcInRvdWNobW92ZSBzY3JvbGxcIixcclxuXHRcdHRvdWNoU3RhcnRFdmVudCA9IHN1cHBvcnRUb3VjaCA/IFwidG91Y2hzdGFydFwiIDogXCJtb3VzZWRvd25cIixcclxuXHRcdHRvdWNoU3RvcEV2ZW50ID0gc3VwcG9ydFRvdWNoID8gXCJ0b3VjaGVuZFwiIDogXCJtb3VzZXVwXCIsXHJcblx0XHR0b3VjaE1vdmVFdmVudCA9IHN1cHBvcnRUb3VjaCA/IFwidG91Y2htb3ZlXCIgOiBcIm1vdXNlbW92ZVwiO1xyXG5cclxuXHQvLyBzZXR1cCBuZXcgZXZlbnQgc2hvcnRjdXRzXHJcblx0JC5lYWNoKCAoIFwidG91Y2hzdGFydCB0b3VjaG1vdmUgdG91Y2hlbmQgXCIgK1xyXG5cdFx0XCJ0YXAgdGFwaG9sZCBcIiArXHJcblx0XHRcInN3aXBlIHN3aXBlbGVmdCBzd2lwZXJpZ2h0IFwiICtcclxuXHRcdFwic2Nyb2xsc3RhcnQgc2Nyb2xsc3RvcFwiICkuc3BsaXQoIFwiIFwiICksIGZ1bmN0aW9uKCBpLCBuYW1lICkge1xyXG5cclxuXHRcdCQuZm5bIG5hbWUgXSA9IGZ1bmN0aW9uKCBmbiApIHtcclxuXHRcdFx0cmV0dXJuIGZuID8gdGhpcy5iaW5kKCBuYW1lLCBmbiApIDogdGhpcy50cmlnZ2VyKCBuYW1lICk7XHJcblx0XHR9O1xyXG5cclxuXHRcdC8vIGpRdWVyeSA8IDEuOFxyXG5cdFx0aWYgKCAkLmF0dHJGbiApIHtcclxuXHRcdFx0JC5hdHRyRm5bIG5hbWUgXSA9IHRydWU7XHJcblx0XHR9XHJcblx0fSk7XHJcblxyXG5cdGZ1bmN0aW9uIHRyaWdnZXJDdXN0b21FdmVudCggb2JqLCBldmVudFR5cGUsIGV2ZW50LCBidWJibGUgKSB7XHJcblx0XHR2YXIgb3JpZ2luYWxUeXBlID0gZXZlbnQudHlwZTtcclxuXHRcdGV2ZW50LnR5cGUgPSBldmVudFR5cGU7XHJcblx0XHRpZiAoIGJ1YmJsZSApIHtcclxuXHRcdFx0JC5ldmVudC50cmlnZ2VyKCBldmVudCwgdW5kZWZpbmVkLCBvYmogKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdCQuZXZlbnQuZGlzcGF0Y2guY2FsbCggb2JqLCBldmVudCApO1xyXG5cdFx0fVxyXG5cdFx0ZXZlbnQudHlwZSA9IG9yaWdpbmFsVHlwZTtcclxuXHR9XHJcblxyXG5cdC8vIGFsc28gaGFuZGxlcyBzY3JvbGxzdG9wXHJcblx0JC5ldmVudC5zcGVjaWFsLnNjcm9sbHN0YXJ0ID0ge1xyXG5cclxuXHRcdGVuYWJsZWQ6IHRydWUsXHJcblx0XHRzZXR1cDogZnVuY3Rpb24oKSB7XHJcblxyXG5cdFx0XHR2YXIgdGhpc09iamVjdCA9IHRoaXMsXHJcblx0XHRcdFx0JHRoaXMgPSAkKCB0aGlzT2JqZWN0ICksXHJcblx0XHRcdFx0c2Nyb2xsaW5nLFxyXG5cdFx0XHRcdHRpbWVyO1xyXG5cclxuXHRcdFx0ZnVuY3Rpb24gdHJpZ2dlciggZXZlbnQsIHN0YXRlICkge1xyXG5cdFx0XHRcdHNjcm9sbGluZyA9IHN0YXRlO1xyXG5cdFx0XHRcdHRyaWdnZXJDdXN0b21FdmVudCggdGhpc09iamVjdCwgc2Nyb2xsaW5nID8gXCJzY3JvbGxzdGFydFwiIDogXCJzY3JvbGxzdG9wXCIsIGV2ZW50ICk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIGlQaG9uZSB0cmlnZ2VycyBzY3JvbGwgYWZ0ZXIgYSBzbWFsbCBkZWxheTsgdXNlIHRvdWNobW92ZSBpbnN0ZWFkXHJcblx0XHRcdCR0aGlzLmJpbmQoIHNjcm9sbEV2ZW50LCBmdW5jdGlvbiggZXZlbnQgKSB7XHJcblxyXG5cdFx0XHRcdGlmICggISQuZXZlbnQuc3BlY2lhbC5zY3JvbGxzdGFydC5lbmFibGVkICkge1xyXG5cdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0aWYgKCAhc2Nyb2xsaW5nICkge1xyXG5cdFx0XHRcdFx0dHJpZ2dlciggZXZlbnQsIHRydWUgKTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdGNsZWFyVGltZW91dCggdGltZXIgKTtcclxuXHRcdFx0XHR0aW1lciA9IHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0dHJpZ2dlciggZXZlbnQsIGZhbHNlICk7XHJcblx0XHRcdFx0fSwgNTAgKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9LFxyXG5cdFx0dGVhcmRvd246IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHQkKCB0aGlzICkudW5iaW5kKCBzY3JvbGxFdmVudCApO1xyXG5cdFx0fVxyXG5cdH07XHJcblxyXG5cdC8vIGFsc28gaGFuZGxlcyB0YXBob2xkXHJcblx0JC5ldmVudC5zcGVjaWFsLnRhcCA9IHtcclxuXHRcdHRhcGhvbGRUaHJlc2hvbGQ6IDc1MCxcclxuXHRcdGVtaXRUYXBPblRhcGhvbGQ6IHRydWUsXHJcblx0XHRzZXR1cDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHZhciB0aGlzT2JqZWN0ID0gdGhpcyxcclxuXHRcdFx0XHQkdGhpcyA9ICQoIHRoaXNPYmplY3QgKSxcclxuXHRcdFx0XHRpc1RhcGhvbGQgPSBmYWxzZTtcclxuXHJcblx0XHRcdCR0aGlzLmJpbmQoIFwidm1vdXNlZG93blwiLCBmdW5jdGlvbiggZXZlbnQgKSB7XHJcblx0XHRcdFx0aXNUYXBob2xkID0gZmFsc2U7XHJcblx0XHRcdFx0aWYgKCBldmVudC53aGljaCAmJiBldmVudC53aGljaCAhPT0gMSApIHtcclxuXHRcdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdHZhciBvcmlnVGFyZ2V0ID0gZXZlbnQudGFyZ2V0LFxyXG5cdFx0XHRcdFx0dGltZXI7XHJcblxyXG5cdFx0XHRcdGZ1bmN0aW9uIGNsZWFyVGFwVGltZXIoKSB7XHJcblx0XHRcdFx0XHRjbGVhclRpbWVvdXQoIHRpbWVyICk7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRmdW5jdGlvbiBjbGVhclRhcEhhbmRsZXJzKCkge1xyXG5cdFx0XHRcdFx0Y2xlYXJUYXBUaW1lcigpO1xyXG5cclxuXHRcdFx0XHRcdCR0aGlzLnVuYmluZCggXCJ2Y2xpY2tcIiwgY2xpY2tIYW5kbGVyIClcclxuXHRcdFx0XHRcdFx0LnVuYmluZCggXCJ2bW91c2V1cFwiLCBjbGVhclRhcFRpbWVyICk7XHJcblx0XHRcdFx0XHQkZG9jdW1lbnQudW5iaW5kKCBcInZtb3VzZWNhbmNlbFwiLCBjbGVhclRhcEhhbmRsZXJzICk7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRmdW5jdGlvbiBjbGlja0hhbmRsZXIoIGV2ZW50ICkge1xyXG5cdFx0XHRcdFx0Y2xlYXJUYXBIYW5kbGVycygpO1xyXG5cclxuXHRcdFx0XHRcdC8vIE9OTFkgdHJpZ2dlciBhICd0YXAnIGV2ZW50IGlmIHRoZSBzdGFydCB0YXJnZXQgaXNcclxuXHRcdFx0XHRcdC8vIHRoZSBzYW1lIGFzIHRoZSBzdG9wIHRhcmdldC5cclxuXHRcdFx0XHRcdGlmICggIWlzVGFwaG9sZCAmJiBvcmlnVGFyZ2V0ID09PSBldmVudC50YXJnZXQgKSB7XHJcblx0XHRcdFx0XHRcdHRyaWdnZXJDdXN0b21FdmVudCggdGhpc09iamVjdCwgXCJ0YXBcIiwgZXZlbnQgKTtcclxuXHRcdFx0XHRcdH0gZWxzZSBpZiAoIGlzVGFwaG9sZCApIHtcclxuXHRcdFx0XHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdCR0aGlzLmJpbmQoIFwidm1vdXNldXBcIiwgY2xlYXJUYXBUaW1lciApXHJcblx0XHRcdFx0XHQuYmluZCggXCJ2Y2xpY2tcIiwgY2xpY2tIYW5kbGVyICk7XHJcblx0XHRcdFx0JGRvY3VtZW50LmJpbmQoIFwidm1vdXNlY2FuY2VsXCIsIGNsZWFyVGFwSGFuZGxlcnMgKTtcclxuXHJcblx0XHRcdFx0dGltZXIgPSBzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdGlmICggISQuZXZlbnQuc3BlY2lhbC50YXAuZW1pdFRhcE9uVGFwaG9sZCApIHtcclxuXHRcdFx0XHRcdFx0aXNUYXBob2xkID0gdHJ1ZTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdHRyaWdnZXJDdXN0b21FdmVudCggdGhpc09iamVjdCwgXCJ0YXBob2xkXCIsICQuRXZlbnQoIFwidGFwaG9sZFwiLCB7IHRhcmdldDogb3JpZ1RhcmdldCB9ICkgKTtcclxuXHRcdFx0XHR9LCAkLmV2ZW50LnNwZWNpYWwudGFwLnRhcGhvbGRUaHJlc2hvbGQgKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9LFxyXG5cdFx0dGVhcmRvd246IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHQkKCB0aGlzICkudW5iaW5kKCBcInZtb3VzZWRvd25cIiApLnVuYmluZCggXCJ2Y2xpY2tcIiApLnVuYmluZCggXCJ2bW91c2V1cFwiICk7XHJcblx0XHRcdCRkb2N1bWVudC51bmJpbmQoIFwidm1vdXNlY2FuY2VsXCIgKTtcclxuXHRcdH1cclxuXHR9O1xyXG5cclxuXHQvLyBBbHNvIGhhbmRsZXMgc3dpcGVsZWZ0LCBzd2lwZXJpZ2h0XHJcblx0JC5ldmVudC5zcGVjaWFsLnN3aXBlID0ge1xyXG5cclxuXHRcdC8vIE1vcmUgdGhhbiB0aGlzIGhvcml6b250YWwgZGlzcGxhY2VtZW50LCBhbmQgd2Ugd2lsbCBzdXBwcmVzcyBzY3JvbGxpbmcuXHJcblx0XHRzY3JvbGxTdXByZXNzaW9uVGhyZXNob2xkOiAzMCxcclxuXHJcblx0XHQvLyBNb3JlIHRpbWUgdGhhbiB0aGlzLCBhbmQgaXQgaXNuJ3QgYSBzd2lwZS5cclxuXHRcdGR1cmF0aW9uVGhyZXNob2xkOiAxMDAwLFxyXG5cclxuXHRcdC8vIFN3aXBlIGhvcml6b250YWwgZGlzcGxhY2VtZW50IG11c3QgYmUgbW9yZSB0aGFuIHRoaXMuXHJcblx0XHRob3Jpem9udGFsRGlzdGFuY2VUaHJlc2hvbGQ6IDMwLFxyXG5cclxuXHRcdC8vIFN3aXBlIHZlcnRpY2FsIGRpc3BsYWNlbWVudCBtdXN0IGJlIGxlc3MgdGhhbiB0aGlzLlxyXG5cdFx0dmVydGljYWxEaXN0YW5jZVRocmVzaG9sZDogMzAsXHJcblxyXG5cdFx0Z2V0TG9jYXRpb246IGZ1bmN0aW9uICggZXZlbnQgKSB7XHJcblx0XHRcdHZhciB3aW5QYWdlWCA9IHdpbmRvdy5wYWdlWE9mZnNldCxcclxuXHRcdFx0XHR3aW5QYWdlWSA9IHdpbmRvdy5wYWdlWU9mZnNldCxcclxuXHRcdFx0XHR4ID0gZXZlbnQuY2xpZW50WCxcclxuXHRcdFx0XHR5ID0gZXZlbnQuY2xpZW50WTtcclxuXHJcblx0XHRcdGlmICggZXZlbnQucGFnZVkgPT09IDAgJiYgTWF0aC5mbG9vciggeSApID4gTWF0aC5mbG9vciggZXZlbnQucGFnZVkgKSB8fFxyXG5cdFx0XHRcdGV2ZW50LnBhZ2VYID09PSAwICYmIE1hdGguZmxvb3IoIHggKSA+IE1hdGguZmxvb3IoIGV2ZW50LnBhZ2VYICkgKSB7XHJcblxyXG5cdFx0XHRcdC8vIGlPUzQgY2xpZW50WC9jbGllbnRZIGhhdmUgdGhlIHZhbHVlIHRoYXQgc2hvdWxkIGhhdmUgYmVlblxyXG5cdFx0XHRcdC8vIGluIHBhZ2VYL3BhZ2VZLiBXaGlsZSBwYWdlWC9wYWdlLyBoYXZlIHRoZSB2YWx1ZSAwXHJcblx0XHRcdFx0eCA9IHggLSB3aW5QYWdlWDtcclxuXHRcdFx0XHR5ID0geSAtIHdpblBhZ2VZO1xyXG5cdFx0XHR9IGVsc2UgaWYgKCB5IDwgKCBldmVudC5wYWdlWSAtIHdpblBhZ2VZKSB8fCB4IDwgKCBldmVudC5wYWdlWCAtIHdpblBhZ2VYICkgKSB7XHJcblxyXG5cdFx0XHRcdC8vIFNvbWUgQW5kcm9pZCBicm93c2VycyBoYXZlIHRvdGFsbHkgYm9ndXMgdmFsdWVzIGZvciBjbGllbnRYL1lcclxuXHRcdFx0XHQvLyB3aGVuIHNjcm9sbGluZy96b29taW5nIGEgcGFnZS4gRGV0ZWN0YWJsZSBzaW5jZSBjbGllbnRYL2NsaWVudFlcclxuXHRcdFx0XHQvLyBzaG91bGQgbmV2ZXIgYmUgc21hbGxlciB0aGFuIHBhZ2VYL3BhZ2VZIG1pbnVzIHBhZ2Ugc2Nyb2xsXHJcblx0XHRcdFx0eCA9IGV2ZW50LnBhZ2VYIC0gd2luUGFnZVg7XHJcblx0XHRcdFx0eSA9IGV2ZW50LnBhZ2VZIC0gd2luUGFnZVk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHJldHVybiB7XHJcblx0XHRcdFx0eDogeCxcclxuXHRcdFx0XHR5OiB5XHJcblx0XHRcdH07XHJcblx0XHR9LFxyXG5cclxuXHRcdHN0YXJ0OiBmdW5jdGlvbiggZXZlbnQgKSB7XHJcblx0XHRcdHZhciBkYXRhID0gZXZlbnQub3JpZ2luYWxFdmVudC50b3VjaGVzID9cclxuXHRcdFx0XHRcdGV2ZW50Lm9yaWdpbmFsRXZlbnQudG91Y2hlc1sgMCBdIDogZXZlbnQsXHJcblx0XHRcdFx0bG9jYXRpb24gPSAkLmV2ZW50LnNwZWNpYWwuc3dpcGUuZ2V0TG9jYXRpb24oIGRhdGEgKTtcclxuXHRcdFx0cmV0dXJuIHtcclxuXHRcdFx0XHRcdFx0dGltZTogKCBuZXcgRGF0ZSgpICkuZ2V0VGltZSgpLFxyXG5cdFx0XHRcdFx0XHRjb29yZHM6IFsgbG9jYXRpb24ueCwgbG9jYXRpb24ueSBdLFxyXG5cdFx0XHRcdFx0XHRvcmlnaW46ICQoIGV2ZW50LnRhcmdldCApXHJcblx0XHRcdFx0XHR9O1xyXG5cdFx0fSxcclxuXHJcblx0XHRzdG9wOiBmdW5jdGlvbiggZXZlbnQgKSB7XHJcblx0XHRcdHZhciBkYXRhID0gZXZlbnQub3JpZ2luYWxFdmVudC50b3VjaGVzID9cclxuXHRcdFx0XHRcdGV2ZW50Lm9yaWdpbmFsRXZlbnQudG91Y2hlc1sgMCBdIDogZXZlbnQsXHJcblx0XHRcdFx0bG9jYXRpb24gPSAkLmV2ZW50LnNwZWNpYWwuc3dpcGUuZ2V0TG9jYXRpb24oIGRhdGEgKTtcclxuXHRcdFx0cmV0dXJuIHtcclxuXHRcdFx0XHRcdFx0dGltZTogKCBuZXcgRGF0ZSgpICkuZ2V0VGltZSgpLFxyXG5cdFx0XHRcdFx0XHRjb29yZHM6IFsgbG9jYXRpb24ueCwgbG9jYXRpb24ueSBdXHJcblx0XHRcdFx0XHR9O1xyXG5cdFx0fSxcclxuXHJcblx0XHRoYW5kbGVTd2lwZTogZnVuY3Rpb24oIHN0YXJ0LCBzdG9wLCB0aGlzT2JqZWN0LCBvcmlnVGFyZ2V0ICkge1xyXG5cdFx0XHRpZiAoIHN0b3AudGltZSAtIHN0YXJ0LnRpbWUgPCAkLmV2ZW50LnNwZWNpYWwuc3dpcGUuZHVyYXRpb25UaHJlc2hvbGQgJiZcclxuXHRcdFx0XHRNYXRoLmFicyggc3RhcnQuY29vcmRzWyAwIF0gLSBzdG9wLmNvb3Jkc1sgMCBdICkgPiAkLmV2ZW50LnNwZWNpYWwuc3dpcGUuaG9yaXpvbnRhbERpc3RhbmNlVGhyZXNob2xkICYmXHJcblx0XHRcdFx0TWF0aC5hYnMoIHN0YXJ0LmNvb3Jkc1sgMSBdIC0gc3RvcC5jb29yZHNbIDEgXSApIDwgJC5ldmVudC5zcGVjaWFsLnN3aXBlLnZlcnRpY2FsRGlzdGFuY2VUaHJlc2hvbGQgKSB7XHJcblx0XHRcdFx0dmFyIGRpcmVjdGlvbiA9IHN0YXJ0LmNvb3Jkc1swXSA+IHN0b3AuY29vcmRzWyAwIF0gPyBcInN3aXBlbGVmdFwiIDogXCJzd2lwZXJpZ2h0XCI7XHJcblxyXG5cdFx0XHRcdHRyaWdnZXJDdXN0b21FdmVudCggdGhpc09iamVjdCwgXCJzd2lwZVwiLCAkLkV2ZW50KCBcInN3aXBlXCIsIHsgdGFyZ2V0OiBvcmlnVGFyZ2V0LCBzd2lwZXN0YXJ0OiBzdGFydCwgc3dpcGVzdG9wOiBzdG9wIH0pLCB0cnVlICk7XHJcblx0XHRcdFx0dHJpZ2dlckN1c3RvbUV2ZW50KCB0aGlzT2JqZWN0LCBkaXJlY3Rpb24sJC5FdmVudCggZGlyZWN0aW9uLCB7IHRhcmdldDogb3JpZ1RhcmdldCwgc3dpcGVzdGFydDogc3RhcnQsIHN3aXBlc3RvcDogc3RvcCB9ICksIHRydWUgKTtcclxuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdFx0fVxyXG5cdFx0XHRyZXR1cm4gZmFsc2U7XHJcblxyXG5cdFx0fSxcclxuXHJcblx0XHQvLyBUaGlzIHNlcnZlcyBhcyBhIGZsYWcgdG8gZW5zdXJlIHRoYXQgYXQgbW9zdCBvbmUgc3dpcGUgZXZlbnQgZXZlbnQgaXNcclxuXHRcdC8vIGluIHdvcmsgYXQgYW55IGdpdmVuIHRpbWVcclxuXHRcdGV2ZW50SW5Qcm9ncmVzczogZmFsc2UsXHJcblxyXG5cdFx0c2V0dXA6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR2YXIgZXZlbnRzLFxyXG5cdFx0XHRcdHRoaXNPYmplY3QgPSB0aGlzLFxyXG5cdFx0XHRcdCR0aGlzID0gJCggdGhpc09iamVjdCApLFxyXG5cdFx0XHRcdGNvbnRleHQgPSB7fTtcclxuXHJcblx0XHRcdC8vIFJldHJpZXZlIHRoZSBldmVudHMgZGF0YSBmb3IgdGhpcyBlbGVtZW50IGFuZCBhZGQgdGhlIHN3aXBlIGNvbnRleHRcclxuXHRcdFx0ZXZlbnRzID0gJC5kYXRhKCB0aGlzLCBcIm1vYmlsZS1ldmVudHNcIiApO1xyXG5cdFx0XHRpZiAoICFldmVudHMgKSB7XHJcblx0XHRcdFx0ZXZlbnRzID0geyBsZW5ndGg6IDAgfTtcclxuXHRcdFx0XHQkLmRhdGEoIHRoaXMsIFwibW9iaWxlLWV2ZW50c1wiLCBldmVudHMgKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRldmVudHMubGVuZ3RoKys7XHJcblx0XHRcdGV2ZW50cy5zd2lwZSA9IGNvbnRleHQ7XHJcblxyXG5cdFx0XHRjb250ZXh0LnN0YXJ0ID0gZnVuY3Rpb24oIGV2ZW50ICkge1xyXG5cclxuXHRcdFx0XHQvLyBCYWlsIGlmIHdlJ3JlIGFscmVhZHkgd29ya2luZyBvbiBhIHN3aXBlIGV2ZW50XHJcblx0XHRcdFx0aWYgKCAkLmV2ZW50LnNwZWNpYWwuc3dpcGUuZXZlbnRJblByb2dyZXNzICkge1xyXG5cdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHQkLmV2ZW50LnNwZWNpYWwuc3dpcGUuZXZlbnRJblByb2dyZXNzID0gdHJ1ZTtcclxuXHJcblx0XHRcdFx0dmFyIHN0b3AsXHJcblx0XHRcdFx0XHRzdGFydCA9ICQuZXZlbnQuc3BlY2lhbC5zd2lwZS5zdGFydCggZXZlbnQgKSxcclxuXHRcdFx0XHRcdG9yaWdUYXJnZXQgPSBldmVudC50YXJnZXQsXHJcblx0XHRcdFx0XHRlbWl0dGVkID0gZmFsc2U7XHJcblxyXG5cdFx0XHRcdGNvbnRleHQubW92ZSA9IGZ1bmN0aW9uKCBldmVudCApIHtcclxuXHRcdFx0XHRcdGlmICggIXN0YXJ0IHx8IGV2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpICkge1xyXG5cdFx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0c3RvcCA9ICQuZXZlbnQuc3BlY2lhbC5zd2lwZS5zdG9wKCBldmVudCApO1xyXG5cdFx0XHRcdFx0aWYgKCAhZW1pdHRlZCApIHtcclxuXHRcdFx0XHRcdFx0ZW1pdHRlZCA9ICQuZXZlbnQuc3BlY2lhbC5zd2lwZS5oYW5kbGVTd2lwZSggc3RhcnQsIHN0b3AsIHRoaXNPYmplY3QsIG9yaWdUYXJnZXQgKTtcclxuXHRcdFx0XHRcdFx0aWYgKCBlbWl0dGVkICkge1xyXG5cclxuXHRcdFx0XHRcdFx0XHQvLyBSZXNldCB0aGUgY29udGV4dCB0byBtYWtlIHdheSBmb3IgdGhlIG5leHQgc3dpcGUgZXZlbnRcclxuXHRcdFx0XHRcdFx0XHQkLmV2ZW50LnNwZWNpYWwuc3dpcGUuZXZlbnRJblByb2dyZXNzID0gZmFsc2U7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdC8vIHByZXZlbnQgc2Nyb2xsaW5nXHJcblx0XHRcdFx0XHRpZiAoIE1hdGguYWJzKCBzdGFydC5jb29yZHNbIDAgXSAtIHN0b3AuY29vcmRzWyAwIF0gKSA+ICQuZXZlbnQuc3BlY2lhbC5zd2lwZS5zY3JvbGxTdXByZXNzaW9uVGhyZXNob2xkICkge1xyXG5cdFx0XHRcdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH07XHJcblxyXG5cdFx0XHRcdGNvbnRleHQuc3RvcCA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0XHRlbWl0dGVkID0gdHJ1ZTtcclxuXHJcblx0XHRcdFx0XHRcdC8vIFJlc2V0IHRoZSBjb250ZXh0IHRvIG1ha2Ugd2F5IGZvciB0aGUgbmV4dCBzd2lwZSBldmVudFxyXG5cdFx0XHRcdFx0XHQkLmV2ZW50LnNwZWNpYWwuc3dpcGUuZXZlbnRJblByb2dyZXNzID0gZmFsc2U7XHJcblx0XHRcdFx0XHRcdCRkb2N1bWVudC5vZmYoIHRvdWNoTW92ZUV2ZW50LCBjb250ZXh0Lm1vdmUgKTtcclxuXHRcdFx0XHRcdFx0Y29udGV4dC5tb3ZlID0gbnVsbDtcclxuXHRcdFx0XHR9O1xyXG5cclxuXHRcdFx0XHQkZG9jdW1lbnQub24oIHRvdWNoTW92ZUV2ZW50LCBjb250ZXh0Lm1vdmUgKVxyXG5cdFx0XHRcdFx0Lm9uZSggdG91Y2hTdG9wRXZlbnQsIGNvbnRleHQuc3RvcCApO1xyXG5cdFx0XHR9O1xyXG5cdFx0XHQkdGhpcy5vbiggdG91Y2hTdGFydEV2ZW50LCBjb250ZXh0LnN0YXJ0ICk7XHJcblx0XHR9LFxyXG5cclxuXHRcdHRlYXJkb3duOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dmFyIGV2ZW50cywgY29udGV4dDtcclxuXHJcblx0XHRcdGV2ZW50cyA9ICQuZGF0YSggdGhpcywgXCJtb2JpbGUtZXZlbnRzXCIgKTtcclxuXHRcdFx0aWYgKCBldmVudHMgKSB7XHJcblx0XHRcdFx0Y29udGV4dCA9IGV2ZW50cy5zd2lwZTtcclxuXHRcdFx0XHRkZWxldGUgZXZlbnRzLnN3aXBlO1xyXG5cdFx0XHRcdGV2ZW50cy5sZW5ndGgtLTtcclxuXHRcdFx0XHRpZiAoIGV2ZW50cy5sZW5ndGggPT09IDAgKSB7XHJcblx0XHRcdFx0XHQkLnJlbW92ZURhdGEoIHRoaXMsIFwibW9iaWxlLWV2ZW50c1wiICk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpZiAoIGNvbnRleHQgKSB7XHJcblx0XHRcdFx0aWYgKCBjb250ZXh0LnN0YXJ0ICkge1xyXG5cdFx0XHRcdFx0JCggdGhpcyApLm9mZiggdG91Y2hTdGFydEV2ZW50LCBjb250ZXh0LnN0YXJ0ICk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGlmICggY29udGV4dC5tb3ZlICkge1xyXG5cdFx0XHRcdFx0JGRvY3VtZW50Lm9mZiggdG91Y2hNb3ZlRXZlbnQsIGNvbnRleHQubW92ZSApO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRpZiAoIGNvbnRleHQuc3RvcCApIHtcclxuXHRcdFx0XHRcdCRkb2N1bWVudC5vZmYoIHRvdWNoU3RvcEV2ZW50LCBjb250ZXh0LnN0b3AgKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9O1xyXG5cdCQuZWFjaCh7XHJcblx0XHRzY3JvbGxzdG9wOiBcInNjcm9sbHN0YXJ0XCIsXHJcblx0XHR0YXBob2xkOiBcInRhcFwiLFxyXG5cdFx0c3dpcGVsZWZ0OiBcInN3aXBlLmxlZnRcIixcclxuXHRcdHN3aXBlcmlnaHQ6IFwic3dpcGUucmlnaHRcIlxyXG5cdH0sIGZ1bmN0aW9uKCBldmVudCwgc291cmNlRXZlbnQgKSB7XHJcblxyXG5cdFx0JC5ldmVudC5zcGVjaWFsWyBldmVudCBdID0ge1xyXG5cdFx0XHRzZXR1cDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0JCggdGhpcyApLmJpbmQoIHNvdXJjZUV2ZW50LCAkLm5vb3AgKTtcclxuXHRcdFx0fSxcclxuXHRcdFx0dGVhcmRvd246IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdCQoIHRoaXMgKS51bmJpbmQoIHNvdXJjZUV2ZW50ICk7XHJcblx0XHRcdH1cclxuXHRcdH07XHJcblx0fSk7XHJcblxyXG59KSggalF1ZXJ5LCB0aGlzICk7XHJcblxyXG5cclxuXHQvLyB0aHJvdHRsZWQgcmVzaXplIGV2ZW50XHJcblx0KGZ1bmN0aW9uKCAkICkge1xyXG5cdFx0JC5ldmVudC5zcGVjaWFsLnRocm90dGxlZHJlc2l6ZSA9IHtcclxuXHRcdFx0c2V0dXA6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdCQoIHRoaXMgKS5iaW5kKCBcInJlc2l6ZVwiLCBoYW5kbGVyICk7XHJcblx0XHRcdH0sXHJcblx0XHRcdHRlYXJkb3duOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHQkKCB0aGlzICkudW5iaW5kKCBcInJlc2l6ZVwiLCBoYW5kbGVyICk7XHJcblx0XHRcdH1cclxuXHRcdH07XHJcblxyXG5cdFx0dmFyIHRocm90dGxlID0gMjUwLFxyXG5cdFx0XHRoYW5kbGVyID0gZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0Y3VyciA9ICggbmV3IERhdGUoKSApLmdldFRpbWUoKTtcclxuXHRcdFx0XHRkaWZmID0gY3VyciAtIGxhc3RDYWxsO1xyXG5cclxuXHRcdFx0XHRpZiAoIGRpZmYgPj0gdGhyb3R0bGUgKSB7XHJcblxyXG5cdFx0XHRcdFx0bGFzdENhbGwgPSBjdXJyO1xyXG5cdFx0XHRcdFx0JCggdGhpcyApLnRyaWdnZXIoIFwidGhyb3R0bGVkcmVzaXplXCIgKTtcclxuXHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHJcblx0XHRcdFx0XHRpZiAoIGhlbGRDYWxsICkge1xyXG5cdFx0XHRcdFx0XHRjbGVhclRpbWVvdXQoIGhlbGRDYWxsICk7XHJcblx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0Ly8gUHJvbWlzZSBhIGhlbGQgY2FsbCB3aWxsIHN0aWxsIGV4ZWN1dGVcclxuXHRcdFx0XHRcdGhlbGRDYWxsID0gc2V0VGltZW91dCggaGFuZGxlciwgdGhyb3R0bGUgLSBkaWZmICk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9LFxyXG5cdFx0XHRsYXN0Q2FsbCA9IDAsXHJcblx0XHRcdGhlbGRDYWxsLFxyXG5cdFx0XHRjdXJyLFxyXG5cdFx0XHRkaWZmO1xyXG5cdH0pKCBqUXVlcnkgKTtcclxuXHJcblxyXG4oZnVuY3Rpb24oICQsIHdpbmRvdyApIHtcclxuXHR2YXIgd2luID0gJCggd2luZG93ICksXHJcblx0XHRldmVudF9uYW1lID0gXCJvcmllbnRhdGlvbmNoYW5nZVwiLFxyXG5cdFx0Z2V0X29yaWVudGF0aW9uLFxyXG5cdFx0bGFzdF9vcmllbnRhdGlvbixcclxuXHRcdGluaXRpYWxfb3JpZW50YXRpb25faXNfbGFuZHNjYXBlLFxyXG5cdFx0aW5pdGlhbF9vcmllbnRhdGlvbl9pc19kZWZhdWx0LFxyXG5cdFx0cG9ydHJhaXRfbWFwID0geyBcIjBcIjogdHJ1ZSwgXCIxODBcIjogdHJ1ZSB9LFxyXG5cdFx0d3csIHdoLCBsYW5kc2NhcGVfdGhyZXNob2xkO1xyXG5cclxuXHQvLyBJdCBzZWVtcyB0aGF0IHNvbWUgZGV2aWNlL2Jyb3dzZXIgdmVuZG9ycyB1c2Ugd2luZG93Lm9yaWVudGF0aW9uIHZhbHVlcyAwIGFuZCAxODAgdG9cclxuXHQvLyBkZW5vdGUgdGhlIFwiZGVmYXVsdFwiIG9yaWVudGF0aW9uLiBGb3IgaU9TIGRldmljZXMsIGFuZCBtb3N0IG90aGVyIHNtYXJ0LXBob25lcyB0ZXN0ZWQsXHJcblx0Ly8gdGhlIGRlZmF1bHQgb3JpZW50YXRpb24gaXMgYWx3YXlzIFwicG9ydHJhaXRcIiwgYnV0IGluIHNvbWUgQW5kcm9pZCBhbmQgUklNIGJhc2VkIHRhYmxldHMsXHJcblx0Ly8gdGhlIGRlZmF1bHQgb3JpZW50YXRpb24gaXMgXCJsYW5kc2NhcGVcIi4gVGhlIGZvbGxvd2luZyBjb2RlIGF0dGVtcHRzIHRvIHVzZSB0aGUgd2luZG93XHJcblx0Ly8gZGltZW5zaW9ucyB0byBmaWd1cmUgb3V0IHdoYXQgdGhlIGN1cnJlbnQgb3JpZW50YXRpb24gaXMsIGFuZCB0aGVuIG1ha2VzIGFkanVzdG1lbnRzXHJcblx0Ly8gdG8gdGhlIHRvIHRoZSBwb3J0cmFpdF9tYXAgaWYgbmVjZXNzYXJ5LCBzbyB0aGF0IHdlIGNhbiBwcm9wZXJseSBkZWNvZGUgdGhlXHJcblx0Ly8gd2luZG93Lm9yaWVudGF0aW9uIHZhbHVlIHdoZW5ldmVyIGdldF9vcmllbnRhdGlvbigpIGlzIGNhbGxlZC5cclxuXHQvL1xyXG5cdC8vIE5vdGUgdGhhdCB3ZSB1c2VkIHRvIHVzZSBhIG1lZGlhIHF1ZXJ5IHRvIGZpZ3VyZSBvdXQgd2hhdCB0aGUgb3JpZW50YXRpb24gdGhlIGJyb3dzZXJcclxuXHQvLyB0aGlua3MgaXQgaXMgaW46XHJcblx0Ly9cclxuXHQvLyAgICAgaW5pdGlhbF9vcmllbnRhdGlvbl9pc19sYW5kc2NhcGUgPSAkLm1vYmlsZS5tZWRpYShcImFsbCBhbmQgKG9yaWVudGF0aW9uOiBsYW5kc2NhcGUpXCIpO1xyXG5cdC8vXHJcblx0Ly8gYnV0IHRoZXJlIHdhcyBhbiBpUGhvbmUvaVBvZCBUb3VjaCBidWcgYmVnaW5uaW5nIHdpdGggaU9TIDQuMiwgdXAgdGhyb3VnaCBpT1MgNS4xLFxyXG5cdC8vIHdoZXJlIHRoZSBicm93c2VyICpBTFdBWVMqIGFwcGxpZWQgdGhlIGxhbmRzY2FwZSBtZWRpYSBxdWVyeS4gVGhpcyBidWcgZG9lcyBub3RcclxuXHQvLyBoYXBwZW4gb24gaVBhZC5cclxuXHJcblx0aWYgKCAkLnN1cHBvcnQub3JpZW50YXRpb24gKSB7XHJcblxyXG5cdFx0Ly8gQ2hlY2sgdGhlIHdpbmRvdyB3aWR0aCBhbmQgaGVpZ2h0IHRvIGZpZ3VyZSBvdXQgd2hhdCB0aGUgY3VycmVudCBvcmllbnRhdGlvblxyXG5cdFx0Ly8gb2YgdGhlIGRldmljZSBpcyBhdCB0aGlzIG1vbWVudC4gTm90ZSB0aGF0IHdlJ3ZlIGluaXRpYWxpemVkIHRoZSBwb3J0cmFpdCBtYXBcclxuXHRcdC8vIHZhbHVlcyB0byAwIGFuZCAxODAsICpBTkQqIHdlIHB1cnBvc2VseSBjaGVjayBmb3IgbGFuZHNjYXBlIHNvIHRoYXQgaWYgd2UgZ3Vlc3NcclxuXHRcdC8vIHdyb25nLCAsIHdlIGRlZmF1bHQgdG8gdGhlIGFzc3VtcHRpb24gdGhhdCBwb3J0cmFpdCBpcyB0aGUgZGVmYXVsdCBvcmllbnRhdGlvbi5cclxuXHRcdC8vIFdlIHVzZSBhIHRocmVzaG9sZCBjaGVjayBiZWxvdyBiZWNhdXNlIG9uIHNvbWUgcGxhdGZvcm1zIGxpa2UgaU9TLCB0aGUgaVBob25lXHJcblx0XHQvLyBmb3JtLWZhY3RvciBjYW4gcmVwb3J0IGEgbGFyZ2VyIHdpZHRoIHRoYW4gaGVpZ2h0IGlmIHRoZSB1c2VyIHR1cm5zIG9uIHRoZVxyXG5cdFx0Ly8gZGV2ZWxvcGVyIGNvbnNvbGUuIFRoZSBhY3R1YWwgdGhyZXNob2xkIHZhbHVlIGlzIHNvbWV3aGF0IGFyYml0cmFyeSwgd2UganVzdFxyXG5cdFx0Ly8gbmVlZCB0byBtYWtlIHN1cmUgaXQgaXMgbGFyZ2UgZW5vdWdoIHRvIGV4Y2x1ZGUgdGhlIGRldmVsb3BlciBjb25zb2xlIGNhc2UuXHJcblxyXG5cdFx0d3cgPSB3aW5kb3cuaW5uZXJXaWR0aCB8fCB3aW4ud2lkdGgoKTtcclxuXHRcdHdoID0gd2luZG93LmlubmVySGVpZ2h0IHx8IHdpbi5oZWlnaHQoKTtcclxuXHRcdGxhbmRzY2FwZV90aHJlc2hvbGQgPSA1MDtcclxuXHJcblx0XHRpbml0aWFsX29yaWVudGF0aW9uX2lzX2xhbmRzY2FwZSA9IHd3ID4gd2ggJiYgKCB3dyAtIHdoICkgPiBsYW5kc2NhcGVfdGhyZXNob2xkO1xyXG5cclxuXHRcdC8vIE5vdyBjaGVjayB0byBzZWUgaWYgdGhlIGN1cnJlbnQgd2luZG93Lm9yaWVudGF0aW9uIGlzIDAgb3IgMTgwLlxyXG5cdFx0aW5pdGlhbF9vcmllbnRhdGlvbl9pc19kZWZhdWx0ID0gcG9ydHJhaXRfbWFwWyB3aW5kb3cub3JpZW50YXRpb24gXTtcclxuXHJcblx0XHQvLyBJZiB0aGUgaW5pdGlhbCBvcmllbnRhdGlvbiBpcyBsYW5kc2NhcGUsIGJ1dCB3aW5kb3cub3JpZW50YXRpb24gcmVwb3J0cyAwIG9yIDE4MCwgKk9SKlxyXG5cdFx0Ly8gaWYgdGhlIGluaXRpYWwgb3JpZW50YXRpb24gaXMgcG9ydHJhaXQsIGJ1dCB3aW5kb3cub3JpZW50YXRpb24gcmVwb3J0cyA5MCBvciAtOTAsIHdlXHJcblx0XHQvLyBuZWVkIHRvIGZsaXAgb3VyIHBvcnRyYWl0X21hcCB2YWx1ZXMgYmVjYXVzZSBsYW5kc2NhcGUgaXMgdGhlIGRlZmF1bHQgb3JpZW50YXRpb24gZm9yXHJcblx0XHQvLyB0aGlzIGRldmljZS9icm93c2VyLlxyXG5cdFx0aWYgKCAoIGluaXRpYWxfb3JpZW50YXRpb25faXNfbGFuZHNjYXBlICYmIGluaXRpYWxfb3JpZW50YXRpb25faXNfZGVmYXVsdCApIHx8ICggIWluaXRpYWxfb3JpZW50YXRpb25faXNfbGFuZHNjYXBlICYmICFpbml0aWFsX29yaWVudGF0aW9uX2lzX2RlZmF1bHQgKSApIHtcclxuXHRcdFx0cG9ydHJhaXRfbWFwID0geyBcIi05MFwiOiB0cnVlLCBcIjkwXCI6IHRydWUgfTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdCQuZXZlbnQuc3BlY2lhbC5vcmllbnRhdGlvbmNoYW5nZSA9ICQuZXh0ZW5kKCB7fSwgJC5ldmVudC5zcGVjaWFsLm9yaWVudGF0aW9uY2hhbmdlLCB7XHJcblx0XHRzZXR1cDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdC8vIElmIHRoZSBldmVudCBpcyBzdXBwb3J0ZWQgbmF0aXZlbHksIHJldHVybiBmYWxzZSBzbyB0aGF0IGpRdWVyeVxyXG5cdFx0XHQvLyB3aWxsIGJpbmQgdG8gdGhlIGV2ZW50IHVzaW5nIERPTSBtZXRob2RzLlxyXG5cdFx0XHRpZiAoICQuc3VwcG9ydC5vcmllbnRhdGlvbiAmJiAhJC5ldmVudC5zcGVjaWFsLm9yaWVudGF0aW9uY2hhbmdlLmRpc2FibGVkICkge1xyXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gR2V0IHRoZSBjdXJyZW50IG9yaWVudGF0aW9uIHRvIGF2b2lkIGluaXRpYWwgZG91YmxlLXRyaWdnZXJpbmcuXHJcblx0XHRcdGxhc3Rfb3JpZW50YXRpb24gPSBnZXRfb3JpZW50YXRpb24oKTtcclxuXHJcblx0XHRcdC8vIEJlY2F1c2UgdGhlIG9yaWVudGF0aW9uY2hhbmdlIGV2ZW50IGRvZXNuJ3QgZXhpc3QsIHNpbXVsYXRlIHRoZVxyXG5cdFx0XHQvLyBldmVudCBieSB0ZXN0aW5nIHdpbmRvdyBkaW1lbnNpb25zIG9uIHJlc2l6ZS5cclxuXHRcdFx0d2luLmJpbmQoIFwidGhyb3R0bGVkcmVzaXplXCIsIGhhbmRsZXIgKTtcclxuXHRcdH0sXHJcblx0XHR0ZWFyZG93bjogZnVuY3Rpb24oKSB7XHJcblx0XHRcdC8vIElmIHRoZSBldmVudCBpcyBub3Qgc3VwcG9ydGVkIG5hdGl2ZWx5LCByZXR1cm4gZmFsc2Ugc28gdGhhdFxyXG5cdFx0XHQvLyBqUXVlcnkgd2lsbCB1bmJpbmQgdGhlIGV2ZW50IHVzaW5nIERPTSBtZXRob2RzLlxyXG5cdFx0XHRpZiAoICQuc3VwcG9ydC5vcmllbnRhdGlvbiAmJiAhJC5ldmVudC5zcGVjaWFsLm9yaWVudGF0aW9uY2hhbmdlLmRpc2FibGVkICkge1xyXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gQmVjYXVzZSB0aGUgb3JpZW50YXRpb25jaGFuZ2UgZXZlbnQgZG9lc24ndCBleGlzdCwgdW5iaW5kIHRoZVxyXG5cdFx0XHQvLyByZXNpemUgZXZlbnQgaGFuZGxlci5cclxuXHRcdFx0d2luLnVuYmluZCggXCJ0aHJvdHRsZWRyZXNpemVcIiwgaGFuZGxlciApO1xyXG5cdFx0fSxcclxuXHRcdGFkZDogZnVuY3Rpb24oIGhhbmRsZU9iaiApIHtcclxuXHRcdFx0Ly8gU2F2ZSBhIHJlZmVyZW5jZSB0byB0aGUgYm91bmQgZXZlbnQgaGFuZGxlci5cclxuXHRcdFx0dmFyIG9sZF9oYW5kbGVyID0gaGFuZGxlT2JqLmhhbmRsZXI7XHJcblxyXG5cdFx0XHRoYW5kbGVPYmouaGFuZGxlciA9IGZ1bmN0aW9uKCBldmVudCApIHtcclxuXHRcdFx0XHQvLyBNb2RpZnkgZXZlbnQgb2JqZWN0LCBhZGRpbmcgdGhlIC5vcmllbnRhdGlvbiBwcm9wZXJ0eS5cclxuXHRcdFx0XHRldmVudC5vcmllbnRhdGlvbiA9IGdldF9vcmllbnRhdGlvbigpO1xyXG5cclxuXHRcdFx0XHQvLyBDYWxsIHRoZSBvcmlnaW5hbGx5LWJvdW5kIGV2ZW50IGhhbmRsZXIgYW5kIHJldHVybiBpdHMgcmVzdWx0LlxyXG5cdFx0XHRcdHJldHVybiBvbGRfaGFuZGxlci5hcHBseSggdGhpcywgYXJndW1lbnRzICk7XHJcblx0XHRcdH07XHJcblx0XHR9XHJcblx0fSk7XHJcblxyXG5cdC8vIElmIHRoZSBldmVudCBpcyBub3Qgc3VwcG9ydGVkIG5hdGl2ZWx5LCB0aGlzIGhhbmRsZXIgd2lsbCBiZSBib3VuZCB0b1xyXG5cdC8vIHRoZSB3aW5kb3cgcmVzaXplIGV2ZW50IHRvIHNpbXVsYXRlIHRoZSBvcmllbnRhdGlvbmNoYW5nZSBldmVudC5cclxuXHRmdW5jdGlvbiBoYW5kbGVyKCkge1xyXG5cdFx0Ly8gR2V0IHRoZSBjdXJyZW50IG9yaWVudGF0aW9uLlxyXG5cdFx0dmFyIG9yaWVudGF0aW9uID0gZ2V0X29yaWVudGF0aW9uKCk7XHJcblxyXG5cdFx0aWYgKCBvcmllbnRhdGlvbiAhPT0gbGFzdF9vcmllbnRhdGlvbiApIHtcclxuXHRcdFx0Ly8gVGhlIG9yaWVudGF0aW9uIGhhcyBjaGFuZ2VkLCBzbyB0cmlnZ2VyIHRoZSBvcmllbnRhdGlvbmNoYW5nZSBldmVudC5cclxuXHRcdFx0bGFzdF9vcmllbnRhdGlvbiA9IG9yaWVudGF0aW9uO1xyXG5cdFx0XHR3aW4udHJpZ2dlciggZXZlbnRfbmFtZSApO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0Ly8gR2V0IHRoZSBjdXJyZW50IHBhZ2Ugb3JpZW50YXRpb24uIFRoaXMgbWV0aG9kIGlzIGV4cG9zZWQgcHVibGljbHksIHNob3VsZCBpdFxyXG5cdC8vIGJlIG5lZWRlZCwgYXMgalF1ZXJ5LmV2ZW50LnNwZWNpYWwub3JpZW50YXRpb25jaGFuZ2Uub3JpZW50YXRpb24oKVxyXG5cdCQuZXZlbnQuc3BlY2lhbC5vcmllbnRhdGlvbmNoYW5nZS5vcmllbnRhdGlvbiA9IGdldF9vcmllbnRhdGlvbiA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIGlzUG9ydHJhaXQgPSB0cnVlLCBlbGVtID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O1xyXG5cclxuXHRcdC8vIHByZWZlciB3aW5kb3cgb3JpZW50YXRpb24gdG8gdGhlIGNhbGN1bGF0aW9uIGJhc2VkIG9uIHNjcmVlbnNpemUgYXNcclxuXHRcdC8vIHRoZSBhY3R1YWwgc2NyZWVuIHJlc2l6ZSB0YWtlcyBwbGFjZSBiZWZvcmUgb3IgYWZ0ZXIgdGhlIG9yaWVudGF0aW9uIGNoYW5nZSBldmVudFxyXG5cdFx0Ly8gaGFzIGJlZW4gZmlyZWQgZGVwZW5kaW5nIG9uIGltcGxlbWVudGF0aW9uIChlZyBhbmRyb2lkIDIuMyBpcyBiZWZvcmUsIGlwaG9uZSBhZnRlcikuXHJcblx0XHQvLyBNb3JlIHRlc3RpbmcgaXMgcmVxdWlyZWQgdG8gZGV0ZXJtaW5lIGlmIGEgbW9yZSByZWxpYWJsZSBtZXRob2Qgb2YgZGV0ZXJtaW5pbmcgdGhlIG5ldyBzY3JlZW5zaXplXHJcblx0XHQvLyBpcyBwb3NzaWJsZSB3aGVuIG9yaWVudGF0aW9uY2hhbmdlIGlzIGZpcmVkLiAoZWcsIHVzZSBtZWRpYSBxdWVyaWVzICsgZWxlbWVudCArIG9wYWNpdHkpXHJcblx0XHRpZiAoICQuc3VwcG9ydC5vcmllbnRhdGlvbiApIHtcclxuXHRcdFx0Ly8gaWYgdGhlIHdpbmRvdyBvcmllbnRhdGlvbiByZWdpc3RlcnMgYXMgMCBvciAxODAgZGVncmVlcyByZXBvcnRcclxuXHRcdFx0Ly8gcG9ydHJhaXQsIG90aGVyd2lzZSBsYW5kc2NhcGVcclxuXHRcdFx0aXNQb3J0cmFpdCA9IHBvcnRyYWl0X21hcFsgd2luZG93Lm9yaWVudGF0aW9uIF07XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRpc1BvcnRyYWl0ID0gZWxlbSAmJiBlbGVtLmNsaWVudFdpZHRoIC8gZWxlbS5jbGllbnRIZWlnaHQgPCAxLjE7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIGlzUG9ydHJhaXQgPyBcInBvcnRyYWl0XCIgOiBcImxhbmRzY2FwZVwiO1xyXG5cdH07XHJcblxyXG5cdCQuZm5bIGV2ZW50X25hbWUgXSA9IGZ1bmN0aW9uKCBmbiApIHtcclxuXHRcdHJldHVybiBmbiA/IHRoaXMuYmluZCggZXZlbnRfbmFtZSwgZm4gKSA6IHRoaXMudHJpZ2dlciggZXZlbnRfbmFtZSApO1xyXG5cdH07XHJcblxyXG5cdC8vIGpRdWVyeSA8IDEuOFxyXG5cdGlmICggJC5hdHRyRm4gKSB7XHJcblx0XHQkLmF0dHJGblsgZXZlbnRfbmFtZSBdID0gdHJ1ZTtcclxuXHR9XHJcblxyXG59KCBqUXVlcnksIHRoaXMgKSk7XHJcblxyXG5cclxuXHJcblxyXG4oZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcclxuXHJcblx0Ly8gZXhpc3RpbmcgYmFzZSB0YWc/XHJcblx0dmFyIGJhc2VFbGVtZW50ID0gJCggXCJoZWFkXCIgKS5jaGlsZHJlbiggXCJiYXNlXCIgKSxcclxuXHJcblx0Ly8gYmFzZSBlbGVtZW50IG1hbmFnZW1lbnQsIGRlZmluZWQgZGVwZW5kaW5nIG9uIGR5bmFtaWMgYmFzZSB0YWcgc3VwcG9ydFxyXG5cdC8vIFRPRE8gbW92ZSB0byBleHRlcm5hbCB3aWRnZXRcclxuXHRiYXNlID0ge1xyXG5cclxuXHRcdC8vIGRlZmluZSBiYXNlIGVsZW1lbnQsIGZvciB1c2UgaW4gcm91dGluZyBhc3NldCB1cmxzIHRoYXQgYXJlIHJlZmVyZW5jZWRcclxuXHRcdC8vIGluIEFqYXgtcmVxdWVzdGVkIG1hcmt1cFxyXG5cdFx0ZWxlbWVudDogKCBiYXNlRWxlbWVudC5sZW5ndGggPyBiYXNlRWxlbWVudCA6XHJcblx0XHRcdCQoIFwiPGJhc2U+XCIsIHsgaHJlZjogJC5tb2JpbGUucGF0aC5kb2N1bWVudEJhc2UuaHJlZk5vSGFzaCB9ICkucHJlcGVuZFRvKCAkKCBcImhlYWRcIiApICkgKSxcclxuXHJcblx0XHRsaW5rU2VsZWN0b3I6IFwiW3NyY10sIGxpbmtbaHJlZl0sIGFbcmVsPSdleHRlcm5hbCddLCA6anFtRGF0YShhamF4PSdmYWxzZScpLCBhW3RhcmdldF1cIixcclxuXHJcblx0XHQvLyBzZXQgdGhlIGdlbmVyYXRlZCBCQVNFIGVsZW1lbnQncyBocmVmIHRvIGEgbmV3IHBhZ2UncyBiYXNlIHBhdGhcclxuXHRcdHNldDogZnVuY3Rpb24oIGhyZWYgKSB7XHJcblxyXG5cdFx0XHQvLyB3ZSBzaG91bGQgZG8gbm90aGluZyBpZiB0aGUgdXNlciB3YW50cyB0byBtYW5hZ2UgdGhlaXIgdXJsIGJhc2VcclxuXHRcdFx0Ly8gbWFudWFsbHlcclxuXHRcdFx0aWYgKCAhJC5tb2JpbGUuZHluYW1pY0Jhc2VFbmFibGVkICkge1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gd2Ugc2hvdWxkIHVzZSB0aGUgYmFzZSB0YWcgaWYgd2UgY2FuIG1hbmlwdWxhdGUgaXQgZHluYW1pY2FsbHlcclxuXHRcdFx0aWYgKCAkLnN1cHBvcnQuZHluYW1pY0Jhc2VUYWcgKSB7XHJcblx0XHRcdFx0YmFzZS5lbGVtZW50LmF0dHIoIFwiaHJlZlwiLFxyXG5cdFx0XHRcdFx0JC5tb2JpbGUucGF0aC5tYWtlVXJsQWJzb2x1dGUoIGhyZWYsICQubW9iaWxlLnBhdGguZG9jdW1lbnRCYXNlICkgKTtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHJcblx0XHRyZXdyaXRlOiBmdW5jdGlvbiggaHJlZiwgcGFnZSApIHtcclxuXHRcdFx0dmFyIG5ld1BhdGggPSAkLm1vYmlsZS5wYXRoLmdldCggaHJlZiApO1xyXG5cclxuXHRcdFx0cGFnZS5maW5kKCBiYXNlLmxpbmtTZWxlY3RvciApLmVhY2goZnVuY3Rpb24oIGksIGxpbmsgKSB7XHJcblx0XHRcdFx0dmFyIHRoaXNBdHRyID0gJCggbGluayApLmlzKCBcIltocmVmXVwiICkgPyBcImhyZWZcIiA6XHJcblx0XHRcdFx0XHQkKCBsaW5rICkuaXMoIFwiW3NyY11cIiApID8gXCJzcmNcIiA6IFwiYWN0aW9uXCIsXHJcblx0XHRcdFx0dGhlTG9jYXRpb24gPSAkLm1vYmlsZS5wYXRoLnBhcnNlTG9jYXRpb24oKSxcclxuXHRcdFx0XHR0aGlzVXJsID0gJCggbGluayApLmF0dHIoIHRoaXNBdHRyICk7XHJcblxyXG5cdFx0XHRcdC8vIFhYWF9qYmxhczogV2UgbmVlZCB0byBmaXggdGhpcyBzbyB0aGF0IGl0IHJlbW92ZXMgdGhlIGRvY3VtZW50XHJcblx0XHRcdFx0Ly8gICAgICAgICAgICBiYXNlIFVSTCwgYW5kIHRoZW4gcHJlcGVuZHMgd2l0aCB0aGUgbmV3IHBhZ2UgVVJMLlxyXG5cdFx0XHRcdC8vIGlmIGZ1bGwgcGF0aCBleGlzdHMgYW5kIGlzIHNhbWUsIGNob3AgaXQgLSBoZWxwcyBJRSBvdXRcclxuXHRcdFx0XHR0aGlzVXJsID0gdGhpc1VybC5yZXBsYWNlKCB0aGVMb2NhdGlvbi5wcm90b2NvbCArIHRoZUxvY2F0aW9uLmRvdWJsZVNsYXNoICtcclxuXHRcdFx0XHRcdHRoZUxvY2F0aW9uLmhvc3QgKyB0aGVMb2NhdGlvbi5wYXRobmFtZSwgXCJcIiApO1xyXG5cclxuXHRcdFx0XHRpZiAoICEvXihcXHcrOnwjfFxcLykvLnRlc3QoIHRoaXNVcmwgKSApIHtcclxuXHRcdFx0XHRcdCQoIGxpbmsgKS5hdHRyKCB0aGlzQXR0ciwgbmV3UGF0aCArIHRoaXNVcmwgKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cdFx0fSxcclxuXHJcblx0XHQvLyBzZXQgdGhlIGdlbmVyYXRlZCBCQVNFIGVsZW1lbnQncyBocmVmIHRvIGEgbmV3IHBhZ2UncyBiYXNlIHBhdGhcclxuXHRcdHJlc2V0OiBmdW5jdGlvbigvKiBocmVmICovKSB7XHJcblx0XHRcdGJhc2UuZWxlbWVudC5hdHRyKCBcImhyZWZcIiwgJC5tb2JpbGUucGF0aC5kb2N1bWVudEJhc2UuaHJlZk5vU2VhcmNoICk7XHJcblx0XHR9XHJcblx0fTtcclxuXHJcblx0JC5tb2JpbGUuYmFzZSA9IGJhc2U7XHJcblxyXG59KSggalF1ZXJ5ICk7XHJcblxyXG5cclxuKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7XHJcbiQubW9iaWxlLndpZGdldHMgPSB7fTtcclxuXHJcbnZhciBvcmlnaW5hbFdpZGdldCA9ICQud2lkZ2V0LFxyXG5cclxuXHQvLyBSZWNvcmQgdGhlIG9yaWdpbmFsLCBub24tbW9iaWxlaW5pdC1tb2RpZmllZCB2ZXJzaW9uIG9mICQubW9iaWxlLmtlZXBOYXRpdmVcclxuXHQvLyBzbyB3ZSBjYW4gbGF0ZXIgZGV0ZXJtaW5lIHdoZXRoZXIgc29tZW9uZSBoYXMgbW9kaWZpZWQgJC5tb2JpbGUua2VlcE5hdGl2ZVxyXG5cdGtlZXBOYXRpdmVGYWN0b3J5RGVmYXVsdCA9ICQubW9iaWxlLmtlZXBOYXRpdmU7XHJcblxyXG4kLndpZGdldCA9IChmdW5jdGlvbiggb3JpZyApIHtcclxuXHRyZXR1cm4gZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgY29uc3RydWN0b3IgPSBvcmlnLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKSxcclxuXHRcdFx0bmFtZSA9IGNvbnN0cnVjdG9yLnByb3RvdHlwZS53aWRnZXROYW1lO1xyXG5cclxuXHRcdGNvbnN0cnVjdG9yLmluaXRTZWxlY3RvciA9ICggKCBjb25zdHJ1Y3Rvci5wcm90b3R5cGUuaW5pdFNlbGVjdG9yICE9PSB1bmRlZmluZWQgKSA/XHJcblx0XHRcdGNvbnN0cnVjdG9yLnByb3RvdHlwZS5pbml0U2VsZWN0b3IgOiBcIjpqcW1EYXRhKHJvbGU9J1wiICsgbmFtZSArIFwiJylcIiApO1xyXG5cclxuXHRcdCQubW9iaWxlLndpZGdldHNbIG5hbWUgXSA9IGNvbnN0cnVjdG9yO1xyXG5cclxuXHRcdHJldHVybiBjb25zdHJ1Y3RvcjtcclxuXHR9O1xyXG59KSggJC53aWRnZXQgKTtcclxuXHJcbi8vIE1ha2Ugc3VyZSAkLndpZGdldCBzdGlsbCBoYXMgYnJpZGdlIGFuZCBleHRlbmQgbWV0aG9kc1xyXG4kLmV4dGVuZCggJC53aWRnZXQsIG9yaWdpbmFsV2lkZ2V0ICk7XHJcblxyXG4vLyBGb3IgYmFja2NvbXBhdCByZW1vdmUgaW4gMS41XHJcbiQubW9iaWxlLmRvY3VtZW50Lm9uKCBcImNyZWF0ZVwiLCBmdW5jdGlvbiggZXZlbnQgKSB7XHJcblx0JCggZXZlbnQudGFyZ2V0ICkuZW5oYW5jZVdpdGhpbigpO1xyXG59KTtcclxuXHJcbiQud2lkZ2V0KCBcIm1vYmlsZS5wYWdlXCIsIHtcclxuXHRvcHRpb25zOiB7XHJcblx0XHR0aGVtZTogXCJhXCIsXHJcblx0XHRkb21DYWNoZTogZmFsc2UsXHJcblxyXG5cdFx0Ly8gRGVwcmVjYXRlZCBpbiAxLjQgcmVtb3ZlIGluIDEuNVxyXG5cdFx0a2VlcE5hdGl2ZURlZmF1bHQ6ICQubW9iaWxlLmtlZXBOYXRpdmUsXHJcblxyXG5cdFx0Ly8gRGVwcmVjYXRlZCBpbiAxLjQgcmVtb3ZlIGluIDEuNVxyXG5cdFx0Y29udGVudFRoZW1lOiBudWxsLFxyXG5cdFx0ZW5oYW5jZWQ6IGZhbHNlXHJcblx0fSxcclxuXHJcblx0Ly8gREVQUkVDQVRFRCBmb3IgPiAxLjRcclxuXHQvLyBUT0RPIHJlbW92ZSBhdCAxLjVcclxuXHRfY3JlYXRlV2lkZ2V0OiBmdW5jdGlvbigpIHtcclxuXHRcdCQuV2lkZ2V0LnByb3RvdHlwZS5fY3JlYXRlV2lkZ2V0LmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTtcclxuXHRcdHRoaXMuX3RyaWdnZXIoIFwiaW5pdFwiICk7XHJcblx0fSxcclxuXHJcblx0X2NyZWF0ZTogZnVuY3Rpb24oKSB7XHJcblx0XHQvLyBJZiBmYWxzZSBpcyByZXR1cm5lZCBieSB0aGUgY2FsbGJhY2tzIGRvIG5vdCBjcmVhdGUgdGhlIHBhZ2VcclxuXHRcdGlmICggdGhpcy5fdHJpZ2dlciggXCJiZWZvcmVjcmVhdGVcIiApID09PSBmYWxzZSApIHtcclxuXHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggIXRoaXMub3B0aW9ucy5lbmhhbmNlZCApIHtcclxuXHRcdFx0dGhpcy5fZW5oYW5jZSgpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuX29uKCB0aGlzLmVsZW1lbnQsIHtcclxuXHRcdFx0cGFnZWJlZm9yZWhpZGU6IFwicmVtb3ZlQ29udGFpbmVyQmFja2dyb3VuZFwiLFxyXG5cdFx0XHRwYWdlYmVmb3Jlc2hvdzogXCJfaGFuZGxlUGFnZUJlZm9yZVNob3dcIlxyXG5cdFx0fSk7XHJcblxyXG5cdFx0dGhpcy5lbGVtZW50LmVuaGFuY2VXaXRoaW4oKTtcclxuXHRcdC8vIERpYWxvZyB3aWRnZXQgaXMgZGVwcmVjYXRlZCBpbiAxLjQgcmVtb3ZlIHRoaXMgaW4gMS41XHJcblx0XHRpZiAoICQubW9iaWxlLmdldEF0dHJpYnV0ZSggdGhpcy5lbGVtZW50WzBdLCBcInJvbGVcIiApID09PSBcImRpYWxvZ1wiICYmICQubW9iaWxlLmRpYWxvZyApIHtcclxuXHRcdFx0dGhpcy5lbGVtZW50LmRpYWxvZygpO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9lbmhhbmNlOiBmdW5jdGlvbiAoKSB7XHJcblx0XHR2YXIgYXR0clByZWZpeCA9IFwiZGF0YS1cIiArICQubW9iaWxlLm5zLFxyXG5cdFx0XHRzZWxmID0gdGhpcztcclxuXHJcblx0XHRpZiAoIHRoaXMub3B0aW9ucy5yb2xlICkge1xyXG5cdFx0XHR0aGlzLmVsZW1lbnQuYXR0ciggXCJkYXRhLVwiICsgJC5tb2JpbGUubnMgKyBcInJvbGVcIiwgdGhpcy5vcHRpb25zLnJvbGUgKTtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLmVsZW1lbnRcclxuXHRcdFx0LmF0dHIoIFwidGFiaW5kZXhcIiwgXCIwXCIgKVxyXG5cdFx0XHQuYWRkQ2xhc3MoIFwidWktcGFnZSB1aS1wYWdlLXRoZW1lLVwiICsgdGhpcy5vcHRpb25zLnRoZW1lICk7XHJcblxyXG5cdFx0Ly8gTWFuaXB1bGF0aW9uIG9mIGNvbnRlbnQgb3MgRGVwcmVjYXRlZCBhcyBvZiAxLjQgcmVtb3ZlIGluIDEuNVxyXG5cdFx0dGhpcy5lbGVtZW50LmZpbmQoIFwiW1wiICsgYXR0clByZWZpeCArIFwicm9sZT0nY29udGVudCddXCIgKS5lYWNoKCBmdW5jdGlvbigpIHtcclxuXHRcdFx0dmFyICR0aGlzID0gJCggdGhpcyApLFxyXG5cdFx0XHRcdHRoZW1lID0gdGhpcy5nZXRBdHRyaWJ1dGUoIGF0dHJQcmVmaXggKyBcInRoZW1lXCIgKSB8fCB1bmRlZmluZWQ7XHJcblx0XHRcdFx0c2VsZi5vcHRpb25zLmNvbnRlbnRUaGVtZSA9IHRoZW1lIHx8IHNlbGYub3B0aW9ucy5jb250ZW50VGhlbWUgfHwgKCBzZWxmLm9wdGlvbnMuZGlhbG9nICYmIHNlbGYub3B0aW9ucy50aGVtZSApIHx8ICggc2VsZi5lbGVtZW50LmpxbURhdGEoXCJyb2xlXCIpID09PSBcImRpYWxvZ1wiICYmICBzZWxmLm9wdGlvbnMudGhlbWUgKTtcclxuXHRcdFx0XHQkdGhpcy5hZGRDbGFzcyggXCJ1aS1jb250ZW50XCIgKTtcclxuXHRcdFx0XHRpZiAoIHNlbGYub3B0aW9ucy5jb250ZW50VGhlbWUgKSB7XHJcblx0XHRcdFx0XHQkdGhpcy5hZGRDbGFzcyggXCJ1aS1ib2R5LVwiICsgKCBzZWxmLm9wdGlvbnMuY29udGVudFRoZW1lICkgKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0Ly8gQWRkIEFSSUEgcm9sZVxyXG5cdFx0XHRcdCR0aGlzLmF0dHIoIFwicm9sZVwiLCBcIm1haW5cIiApLmFkZENsYXNzKCBcInVpLWNvbnRlbnRcIiApO1xyXG5cdFx0fSk7XHJcblx0fSxcclxuXHJcblx0YmluZFJlbW92ZTogZnVuY3Rpb24oIGNhbGxiYWNrICkge1xyXG5cdFx0dmFyIHBhZ2UgPSB0aGlzLmVsZW1lbnQ7XHJcblxyXG5cdFx0Ly8gd2hlbiBkb20gY2FjaGluZyBpcyBub3QgZW5hYmxlZCBvciB0aGUgcGFnZSBpcyBlbWJlZGRlZCBiaW5kIHRvIHJlbW92ZSB0aGUgcGFnZSBvbiBoaWRlXHJcblx0XHRpZiAoICFwYWdlLmRhdGEoIFwibW9iaWxlLXBhZ2VcIiApLm9wdGlvbnMuZG9tQ2FjaGUgJiZcclxuXHRcdFx0cGFnZS5pcyggXCI6anFtRGF0YShleHRlcm5hbC1wYWdlPSd0cnVlJylcIiApICkge1xyXG5cclxuXHRcdFx0Ly8gVE9ETyB1c2UgX29uIC0gdGhhdCBpcywgc29ydCBvdXQgd2h5IGl0IGRvZXNuJ3Qgd29yayBpbiB0aGlzIGNhc2VcclxuXHRcdFx0cGFnZS5iaW5kKCBcInBhZ2VoaWRlLnJlbW92ZVwiLCBjYWxsYmFjayB8fCBmdW5jdGlvbiggZSwgZGF0YSApIHtcclxuXHJcblx0XHRcdFx0Ly9jaGVjayBpZiB0aGlzIGlzIGEgc2FtZSBwYWdlIHRyYW5zaXRpb24gYW5kIGlmIHNvIGRvbid0IHJlbW92ZSB0aGUgcGFnZVxyXG5cdFx0XHRcdGlmKCAhZGF0YS5zYW1lUGFnZSApe1xyXG5cdFx0XHRcdFx0dmFyICR0aGlzID0gJCggdGhpcyApLFxyXG5cdFx0XHRcdFx0XHRwckV2ZW50ID0gbmV3ICQuRXZlbnQoIFwicGFnZXJlbW92ZVwiICk7XHJcblxyXG5cdFx0XHRcdFx0JHRoaXMudHJpZ2dlciggcHJFdmVudCApO1xyXG5cclxuXHRcdFx0XHRcdGlmICggIXByRXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkgKSB7XHJcblx0XHRcdFx0XHRcdCR0aGlzLnJlbW92ZVdpdGhEZXBlbmRlbnRzKCk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfc2V0T3B0aW9uczogZnVuY3Rpb24oIG8gKSB7XHJcblx0XHRpZiAoIG8udGhlbWUgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0dGhpcy5lbGVtZW50LnJlbW92ZUNsYXNzKCBcInVpLXBhZ2UtdGhlbWUtXCIgKyB0aGlzLm9wdGlvbnMudGhlbWUgKS5hZGRDbGFzcyggXCJ1aS1wYWdlLXRoZW1lLVwiICsgby50aGVtZSApO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggby5jb250ZW50VGhlbWUgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0dGhpcy5lbGVtZW50LmZpbmQoIFwiW2RhdGEtXCIgKyAkLm1vYmlsZS5ucyArIFwiPSdjb250ZW50J11cIiApLnJlbW92ZUNsYXNzKCBcInVpLWJvZHktXCIgKyB0aGlzLm9wdGlvbnMuY29udGVudFRoZW1lIClcclxuXHRcdFx0XHQuYWRkQ2xhc3MoIFwidWktYm9keS1cIiArIG8uY29udGVudFRoZW1lICk7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X2hhbmRsZVBhZ2VCZWZvcmVTaG93OiBmdW5jdGlvbigvKiBlICovKSB7XHJcblx0XHR0aGlzLnNldENvbnRhaW5lckJhY2tncm91bmQoKTtcclxuXHR9LFxyXG5cdC8vIERlcHJlY2F0ZWQgaW4gMS40IHJlbW92ZSBpbiAxLjVcclxuXHRyZW1vdmVDb250YWluZXJCYWNrZ3JvdW5kOiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuZWxlbWVudC5jbG9zZXN0KCBcIjptb2JpbGUtcGFnZWNvbnRhaW5lclwiICkucGFnZWNvbnRhaW5lcih7IFwidGhlbWVcIjogXCJub25lXCIgfSk7XHJcblx0fSxcclxuXHQvLyBEZXByZWNhdGVkIGluIDEuNCByZW1vdmUgaW4gMS41XHJcblx0Ly8gc2V0IHRoZSBwYWdlIGNvbnRhaW5lciBiYWNrZ3JvdW5kIHRvIHRoZSBwYWdlIHRoZW1lXHJcblx0c2V0Q29udGFpbmVyQmFja2dyb3VuZDogZnVuY3Rpb24oIHRoZW1lICkge1xyXG5cdFx0dGhpcy5lbGVtZW50LnBhcmVudCgpLnBhZ2Vjb250YWluZXIoIHsgXCJ0aGVtZVwiOiB0aGVtZSB8fCB0aGlzLm9wdGlvbnMudGhlbWUgfSApO1xyXG5cdH0sXHJcblx0Ly8gRGVwcmVjYXRlZCBpbiAxLjQgcmVtb3ZlIGluIDEuNVxyXG5cdGtlZXBOYXRpdmVTZWxlY3RvcjogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgb3B0aW9ucyA9IHRoaXMub3B0aW9ucyxcclxuXHRcdFx0a2VlcE5hdGl2ZSA9ICQudHJpbSggb3B0aW9ucy5rZWVwTmF0aXZlIHx8IFwiXCIgKSxcclxuXHRcdFx0Z2xvYmFsVmFsdWUgPSAkLnRyaW0oICQubW9iaWxlLmtlZXBOYXRpdmUgKSxcclxuXHRcdFx0b3B0aW9uVmFsdWUgPSAkLnRyaW0oIG9wdGlvbnMua2VlcE5hdGl2ZURlZmF1bHQgKSxcclxuXHJcblx0XHRcdC8vIENoZWNrIGlmICQubW9iaWxlLmtlZXBOYXRpdmUgaGFzIGNoYW5nZWQgZnJvbSB0aGUgZmFjdG9yeSBkZWZhdWx0XHJcblx0XHRcdG5ld0RlZmF1bHQgPSAoIGtlZXBOYXRpdmVGYWN0b3J5RGVmYXVsdCA9PT0gZ2xvYmFsVmFsdWUgP1xyXG5cdFx0XHRcdFwiXCIgOiBnbG9iYWxWYWx1ZSApLFxyXG5cclxuXHRcdFx0Ly8gSWYgJC5tb2JpbGUua2VlcE5hdGl2ZSBoYXMgbm90IGNoYW5nZWQsIHVzZSBvcHRpb25zLmtlZXBOYXRpdmVEZWZhdWx0XHJcblx0XHRcdG9sZERlZmF1bHQgPSAoIG5ld0RlZmF1bHQgPT09IFwiXCIgPyBvcHRpb25WYWx1ZSA6IFwiXCIgKTtcclxuXHJcblx0XHQvLyBDb25jYXRlbmF0ZSBrZWVwTmF0aXZlIHNlbGVjdG9ycyBmcm9tIGFsbCBzb3VyY2VzIHdoZXJlIHRoZSB2YWx1ZSBoYXNcclxuXHRcdC8vIGNoYW5nZWQgb3IsIGlmIG5vdGhpbmcgaGFzIGNoYW5nZWQsIHJldHVybiB0aGUgZGVmYXVsdFxyXG5cdFx0cmV0dXJuICggKCBrZWVwTmF0aXZlID8gWyBrZWVwTmF0aXZlIF0gOiBbXSApXHJcblx0XHRcdC5jb25jYXQoIG5ld0RlZmF1bHQgPyBbIG5ld0RlZmF1bHQgXSA6IFtdIClcclxuXHRcdFx0LmNvbmNhdCggb2xkRGVmYXVsdCA/IFsgb2xkRGVmYXVsdCBdIDogW10gKVxyXG5cdFx0XHQuam9pbiggXCIsIFwiICkgKTtcclxuXHR9XHJcbn0pO1xyXG59KSggalF1ZXJ5ICk7XHJcblxyXG4oZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcclxuXHJcblx0JC53aWRnZXQoIFwibW9iaWxlLnBhZ2Vjb250YWluZXJcIiwge1xyXG5cdFx0b3B0aW9uczoge1xyXG5cdFx0XHR0aGVtZTogXCJhXCJcclxuXHRcdH0sXHJcblxyXG5cdFx0aW5pdFNlbGVjdG9yOiBmYWxzZSxcclxuXHJcblx0XHRfY3JlYXRlOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dGhpcy5fdHJpZ2dlciggXCJiZWZvcmVjcmVhdGVcIiApO1xyXG5cdFx0XHR0aGlzLnNldExhc3RTY3JvbGxFbmFibGVkID0gdHJ1ZTtcclxuXHJcblx0XHRcdHRoaXMuX29uKCB0aGlzLndpbmRvdywge1xyXG5cdFx0XHRcdC8vIGRpc2FibGUgYW4gc2Nyb2xsIHNldHRpbmcgd2hlbiBhIGhhc2hjaGFuZ2UgaGFzIGJlZW4gZmlyZWQsXHJcblx0XHRcdFx0Ly8gdGhpcyBvbmx5IHdvcmtzIGJlY2F1c2UgdGhlIHJlY29yZGluZyBvZiB0aGUgc2Nyb2xsIHBvc2l0aW9uXHJcblx0XHRcdFx0Ly8gaXMgZGVsYXllZCBmb3IgMTAwbXMgYWZ0ZXIgdGhlIGJyb3dzZXIgbWlnaHQgaGF2ZSBjaGFuZ2VkIHRoZVxyXG5cdFx0XHRcdC8vIHBvc2l0aW9uIGJlY2F1c2Ugb2YgdGhlIGhhc2hjaGFuZ2VcclxuXHRcdFx0XHRuYXZpZ2F0ZTogXCJfZGlzYWJsZVJlY29yZFNjcm9sbFwiLFxyXG5cclxuXHRcdFx0XHQvLyBiaW5kIHRvIHNjcm9sbHN0b3AgZm9yIHRoZSBmaXJzdCBwYWdlLCBcInBhZ2VjaGFuZ2VcIiB3b24ndCBiZVxyXG5cdFx0XHRcdC8vIGZpcmVkIGluIHRoYXQgY2FzZVxyXG5cdFx0XHRcdHNjcm9sbHN0b3A6IFwiX2RlbGF5ZWRSZWNvcmRTY3JvbGxcIlxyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdC8vIFRPRE8gY29uc2lkZXIgbW92aW5nIHRoZSBuYXZpZ2F0aW9uIGhhbmRsZXIgT1VUIG9mIHdpZGdldCBpbnRvXHJcblx0XHRcdC8vICAgICAgc29tZSBvdGhlciBvYmplY3QgYXMgZ2x1ZSBiZXR3ZWVuIHRoZSBuYXZpZ2F0ZSBldmVudCBhbmQgdGhlXHJcblx0XHRcdC8vICAgICAgY29udGVudCB3aWRnZXQgbG9hZCBhbmQgY2hhbmdlIG1ldGhvZHNcclxuXHRcdFx0dGhpcy5fb24oIHRoaXMud2luZG93LCB7IG5hdmlnYXRlOiBcIl9maWx0ZXJOYXZpZ2F0ZUV2ZW50c1wiIH0pO1xyXG5cclxuXHRcdFx0Ly8gVE9ETyBtb3ZlIGZyb20gcGFnZSogZXZlbnRzIHRvIGNvbnRlbnQqIGV2ZW50c1xyXG5cdFx0XHR0aGlzLl9vbih7IHBhZ2VjaGFuZ2U6IFwiX2FmdGVyQ29udGVudENoYW5nZVwiIH0pO1xyXG5cclxuXHRcdFx0Ly8gaGFuZGxlIGluaXRpYWwgaGFzaGNoYW5nZSBmcm9tIGNocm9tZSA6KFxyXG5cdFx0XHR0aGlzLndpbmRvdy5vbmUoIFwibmF2aWdhdGVcIiwgJC5wcm94eShmdW5jdGlvbigpIHtcclxuXHRcdFx0XHR0aGlzLnNldExhc3RTY3JvbGxFbmFibGVkID0gdHJ1ZTtcclxuXHRcdFx0fSwgdGhpcykpO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfc2V0T3B0aW9uczogZnVuY3Rpb24oIG9wdGlvbnMgKSB7XHJcblx0XHRcdGlmICggb3B0aW9ucy50aGVtZSAhPT0gdW5kZWZpbmVkICYmIG9wdGlvbnMudGhlbWUgIT09IFwibm9uZVwiICkge1xyXG5cdFx0XHRcdHRoaXMuZWxlbWVudC5yZW1vdmVDbGFzcyggXCJ1aS1vdmVybGF5LVwiICsgdGhpcy5vcHRpb25zLnRoZW1lIClcclxuXHRcdFx0XHRcdC5hZGRDbGFzcyggXCJ1aS1vdmVybGF5LVwiICsgb3B0aW9ucy50aGVtZSApO1xyXG5cdFx0XHR9IGVsc2UgaWYgKCBvcHRpb25zLnRoZW1lICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdFx0dGhpcy5lbGVtZW50LnJlbW92ZUNsYXNzKCBcInVpLW92ZXJsYXktXCIgKyB0aGlzLm9wdGlvbnMudGhlbWUgKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0dGhpcy5fc3VwZXIoIG9wdGlvbnMgKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0X2Rpc2FibGVSZWNvcmRTY3JvbGw6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR0aGlzLnNldExhc3RTY3JvbGxFbmFibGVkID0gZmFsc2U7XHJcblx0XHR9LFxyXG5cclxuXHRcdF9lbmFibGVSZWNvcmRTY3JvbGw6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR0aGlzLnNldExhc3RTY3JvbGxFbmFibGVkID0gdHJ1ZTtcclxuXHRcdH0sXHJcblxyXG5cdFx0Ly8gVE9ETyBjb25zaWRlciB0aGUgbmFtZSBoZXJlLCBzaW5jZSBpdCdzIHB1cnBvc2Ugc3BlY2lmaWNcclxuXHRcdF9hZnRlckNvbnRlbnRDaGFuZ2U6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHQvLyBvbmNlIHRoZSBwYWdlIGhhcyBjaGFuZ2VkLCByZS1lbmFibGUgdGhlIHNjcm9sbCByZWNvcmRpbmdcclxuXHRcdFx0dGhpcy5zZXRMYXN0U2Nyb2xsRW5hYmxlZCA9IHRydWU7XHJcblxyXG5cdFx0XHQvLyByZW1vdmUgYW55IGJpbmRpbmcgdGhhdCBwcmV2aW91c2x5IGV4aXN0ZWQgb24gdGhlIGdldCBzY3JvbGxcclxuXHRcdFx0Ly8gd2hpY2ggbWF5IG9yIG1heSBub3QgYmUgZGlmZmVyZW50IHRoYW4gdGhlIHNjcm9sbCBlbGVtZW50XHJcblx0XHRcdC8vIGRldGVybWluZWQgZm9yIHRoaXMgcGFnZSBwcmV2aW91c2x5XHJcblx0XHRcdHRoaXMuX29mZiggdGhpcy53aW5kb3csIFwic2Nyb2xsc3RvcFwiICk7XHJcblxyXG5cdFx0XHQvLyBkZXRlcm1pbmUgYW5kIGJpbmQgdG8gdGhlIGN1cnJlbnQgc2NvbGwgZWxlbWVudCB3aGljaCBtYXkgYmUgdGhlXHJcblx0XHRcdC8vIHdpbmRvdyBvciBpbiB0aGUgY2FzZSBvZiB0b3VjaCBvdmVyZmxvdyB0aGUgZWxlbWVudCB0b3VjaCBvdmVyZmxvd1xyXG5cdFx0XHR0aGlzLl9vbiggdGhpcy53aW5kb3csIHsgc2Nyb2xsc3RvcDogXCJfZGVsYXllZFJlY29yZFNjcm9sbFwiIH0pO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfcmVjb3JkU2Nyb2xsOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0Ly8gdGhpcyBiYXJyaWVyIHByZXZlbnRzIHNldHRpbmcgdGhlIHNjcm9sbCB2YWx1ZSBiYXNlZCBvblxyXG5cdFx0XHQvLyB0aGUgYnJvd3NlciBzY3JvbGxpbmcgdGhlIHdpbmRvdyBiYXNlZCBvbiBhIGhhc2hjaGFuZ2VcclxuXHRcdFx0aWYgKCAhdGhpcy5zZXRMYXN0U2Nyb2xsRW5hYmxlZCApIHtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHZhciBhY3RpdmUgPSB0aGlzLl9nZXRBY3RpdmVIaXN0b3J5KCksXHJcblx0XHRcdFx0Y3VycmVudFNjcm9sbCwgbWluU2Nyb2xsLCBkZWZhdWx0U2Nyb2xsO1xyXG5cclxuXHRcdFx0aWYgKCBhY3RpdmUgKSB7XHJcblx0XHRcdFx0Y3VycmVudFNjcm9sbCA9IHRoaXMuX2dldFNjcm9sbCgpO1xyXG5cdFx0XHRcdG1pblNjcm9sbCA9IHRoaXMuX2dldE1pblNjcm9sbCgpO1xyXG5cdFx0XHRcdGRlZmF1bHRTY3JvbGwgPSB0aGlzLl9nZXREZWZhdWx0U2Nyb2xsKCk7XHJcblxyXG5cdFx0XHRcdC8vIFNldCBhY3RpdmUgcGFnZSdzIGxhc3RTY3JvbGwgcHJvcC4gSWYgdGhlIGxvY2F0aW9uIHdlJ3JlXHJcblx0XHRcdFx0Ly8gc2Nyb2xsaW5nIHRvIGlzIGxlc3MgdGhhbiBtaW5TY3JvbGxCYWNrLCBsZXQgaXQgZ28uXHJcblx0XHRcdFx0YWN0aXZlLmxhc3RTY3JvbGwgPSBjdXJyZW50U2Nyb2xsIDwgbWluU2Nyb2xsID8gZGVmYXVsdFNjcm9sbCA6IGN1cnJlbnRTY3JvbGw7XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblxyXG5cdFx0X2RlbGF5ZWRSZWNvcmRTY3JvbGw6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRzZXRUaW1lb3V0KCAkLnByb3h5KHRoaXMsIFwiX3JlY29yZFNjcm9sbFwiKSwgMTAwICk7XHJcblx0XHR9LFxyXG5cclxuXHRcdF9nZXRTY3JvbGw6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRyZXR1cm4gdGhpcy53aW5kb3cuc2Nyb2xsVG9wKCk7XHJcblx0XHR9LFxyXG5cclxuXHRcdF9nZXRNaW5TY3JvbGw6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRyZXR1cm4gJC5tb2JpbGUubWluU2Nyb2xsQmFjaztcclxuXHRcdH0sXHJcblxyXG5cdFx0X2dldERlZmF1bHRTY3JvbGw6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRyZXR1cm4gJC5tb2JpbGUuZGVmYXVsdEhvbWVTY3JvbGw7XHJcblx0XHR9LFxyXG5cclxuXHRcdF9maWx0ZXJOYXZpZ2F0ZUV2ZW50czogZnVuY3Rpb24oIGUsIGRhdGEgKSB7XHJcblx0XHRcdHZhciB1cmw7XHJcblxyXG5cdFx0XHRpZiAoIGUub3JpZ2luYWxFdmVudCAmJiBlLm9yaWdpbmFsRXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkgKSB7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHR1cmwgPSBlLm9yaWdpbmFsRXZlbnQudHlwZS5pbmRleE9mKCBcImhhc2hjaGFuZ2VcIiApID4gLTEgPyBkYXRhLnN0YXRlLmhhc2ggOiBkYXRhLnN0YXRlLnVybDtcclxuXHJcblx0XHRcdGlmICggIXVybCApIHtcclxuXHRcdFx0XHR1cmwgPSB0aGlzLl9nZXRIYXNoKCk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmICggIXVybCB8fCB1cmwgPT09IFwiI1wiIHx8IHVybC5pbmRleE9mKCBcIiNcIiArICQubW9iaWxlLnBhdGgudWlTdGF0ZUtleSApID09PSAwICkge1xyXG5cdFx0XHRcdHVybCA9IGxvY2F0aW9uLmhyZWY7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHRoaXMuX2hhbmRsZU5hdmlnYXRlKCB1cmwsIGRhdGEuc3RhdGUgKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0X2dldEhhc2g6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRyZXR1cm4gJC5tb2JpbGUucGF0aC5wYXJzZUxvY2F0aW9uKCkuaGFzaDtcclxuXHRcdH0sXHJcblxyXG5cdFx0Ly8gVE9ETyBhY3RpdmUgcGFnZSBzaG91bGQgYmUgbWFuYWdlZCBieSB0aGUgY29udGFpbmVyIChpZSwgaXQgc2hvdWxkIGJlIGEgcHJvcGVydHkpXHJcblx0XHRnZXRBY3RpdmVQYWdlOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0cmV0dXJuIHRoaXMuYWN0aXZlUGFnZTtcclxuXHRcdH0sXHJcblxyXG5cdFx0Ly8gVE9ETyB0aGUgZmlyc3QgcGFnZSBzaG91bGQgYmUgYSBwcm9wZXJ0eSBzZXQgZHVyaW5nIF9jcmVhdGUgdXNpbmcgdGhlIGxvZ2ljXHJcblx0XHQvLyAgICAgIHRoYXQgY3VycmVudGx5IHJlc2lkZXMgaW4gaW5pdFxyXG5cdFx0X2dldEluaXRpYWxDb250ZW50OiBmdW5jdGlvbigpIHtcclxuXHRcdFx0cmV0dXJuICQubW9iaWxlLmZpcnN0UGFnZTtcclxuXHRcdH0sXHJcblxyXG5cdFx0Ly8gVE9ETyBlYWNoIGNvbnRlbnQgY29udGFpbmVyIHNob3VsZCBoYXZlIGEgaGlzdG9yeSBvYmplY3RcclxuXHRcdF9nZXRIaXN0b3J5OiBmdW5jdGlvbigpIHtcclxuXHRcdFx0cmV0dXJuICQubW9iaWxlLm5hdmlnYXRlLmhpc3Rvcnk7XHJcblx0XHR9LFxyXG5cclxuXHRcdF9nZXRBY3RpdmVIaXN0b3J5OiBmdW5jdGlvbigpIHtcclxuXHRcdFx0cmV0dXJuIHRoaXMuX2dldEhpc3RvcnkoKS5nZXRBY3RpdmUoKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0Ly8gVE9ETyB0aGUgZG9jdW1lbnQgYmFzZSBzaG91bGQgYmUgZGV0ZXJtaW5lZCBhdCBjcmVhdGlvblxyXG5cdFx0X2dldERvY3VtZW50QmFzZTogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHJldHVybiAkLm1vYmlsZS5wYXRoLmRvY3VtZW50QmFzZTtcclxuXHRcdH0sXHJcblxyXG5cdFx0YmFjazogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHRoaXMuZ28oIC0xICk7XHJcblx0XHR9LFxyXG5cclxuXHRcdGZvcndhcmQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR0aGlzLmdvKCAxICk7XHJcblx0XHR9LFxyXG5cclxuXHRcdGdvOiBmdW5jdGlvbiggc3RlcHMgKSB7XHJcblxyXG5cdFx0XHQvL2lmIGhhc2hsaXN0ZW5pbmcgaXMgZW5hYmxlZCB1c2UgbmF0aXZlIGhpc3RvcnkgbWV0aG9kXHJcblx0XHRcdGlmICggJC5tb2JpbGUuaGFzaExpc3RlbmluZ0VuYWJsZWQgKSB7XHJcblx0XHRcdFx0d2luZG93Lmhpc3RvcnkuZ28oIHN0ZXBzICk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblxyXG5cdFx0XHRcdC8vd2UgYXJlIG5vdCBsaXN0ZW5pbmcgdG8gdGhlIGhhc2ggc28gaGFuZGxlIGhpc3RvcnkgaW50ZXJuYWxseVxyXG5cdFx0XHRcdHZhciBhY3RpdmVJbmRleCA9ICQubW9iaWxlLm5hdmlnYXRlLmhpc3RvcnkuYWN0aXZlSW5kZXgsXHJcblx0XHRcdFx0XHRpbmRleCA9IGFjdGl2ZUluZGV4ICsgcGFyc2VJbnQoIHN0ZXBzLCAxMCApLFxyXG5cdFx0XHRcdFx0dXJsID0gJC5tb2JpbGUubmF2aWdhdGUuaGlzdG9yeS5zdGFja1sgaW5kZXggXS51cmwsXHJcblx0XHRcdFx0XHRkaXJlY3Rpb24gPSAoIHN0ZXBzID49IDEgKT8gXCJmb3J3YXJkXCIgOiBcImJhY2tcIjtcclxuXHJcblx0XHRcdFx0Ly91cGRhdGUgdGhlIGhpc3Rvcnkgb2JqZWN0XHJcblx0XHRcdFx0JC5tb2JpbGUubmF2aWdhdGUuaGlzdG9yeS5hY3RpdmVJbmRleCA9IGluZGV4O1xyXG5cdFx0XHRcdCQubW9iaWxlLm5hdmlnYXRlLmhpc3RvcnkucHJldmlvdXNJbmRleCA9IGFjdGl2ZUluZGV4O1xyXG5cclxuXHRcdFx0XHQvL2NoYW5nZSB0byB0aGUgbmV3IHBhZ2VcclxuXHRcdFx0XHR0aGlzLmNoYW5nZSggdXJsLCB7IGRpcmVjdGlvbjogZGlyZWN0aW9uLCBjaGFuZ2VIYXNoOiBmYWxzZSwgZnJvbUhhc2hDaGFuZ2U6IHRydWUgfSApO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cclxuXHRcdC8vIFRPRE8gcmVuYW1lIF9oYW5kbGVEZXN0aW5hdGlvblxyXG5cdFx0X2hhbmRsZURlc3RpbmF0aW9uOiBmdW5jdGlvbiggdG8gKSB7XHJcblx0XHRcdHZhciBoaXN0b3J5O1xyXG5cclxuXHRcdFx0Ly8gY2xlYW4gdGhlIGhhc2ggZm9yIGNvbXBhcmlzb24gaWYgaXQncyBhIHVybFxyXG5cdFx0XHRpZiAoICQudHlwZSh0bykgPT09IFwic3RyaW5nXCIgKSB7XHJcblx0XHRcdFx0dG8gPSAkLm1vYmlsZS5wYXRoLnN0cmlwSGFzaCggdG8gKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aWYgKCB0byApIHtcclxuXHRcdFx0XHRoaXN0b3J5ID0gdGhpcy5fZ2V0SGlzdG9yeSgpO1xyXG5cclxuXHRcdFx0XHQvLyBBdCB0aGlzIHBvaW50LCAndG8nIGNhbiBiZSBvbmUgb2YgMyB0aGluZ3MsIGEgY2FjaGVkIHBhZ2VcclxuXHRcdFx0XHQvLyBlbGVtZW50IGZyb20gYSBoaXN0b3J5IHN0YWNrIGVudHJ5LCBhbiBpZCwgb3Igc2l0ZS1yZWxhdGl2ZSAvXHJcblx0XHRcdFx0Ly8gYWJzb2x1dGUgVVJMLiBJZiAndG8nIGlzIGFuIGlkLCB3ZSBuZWVkIHRvIHJlc29sdmUgaXQgYWdhaW5zdFxyXG5cdFx0XHRcdC8vIHRoZSBkb2N1bWVudEJhc2UsIG5vdCB0aGUgbG9jYXRpb24uaHJlZiwgc2luY2UgdGhlIGhhc2hjaGFuZ2VcclxuXHRcdFx0XHQvLyBjb3VsZCd2ZSBiZWVuIHRoZSByZXN1bHQgb2YgYSBmb3J3YXJkL2JhY2t3YXJkIG5hdmlnYXRpb25cclxuXHRcdFx0XHQvLyB0aGF0IGNyb3NzZXMgZnJvbSBhbiBleHRlcm5hbCBwYWdlL2RpYWxvZyB0byBhbiBpbnRlcm5hbFxyXG5cdFx0XHRcdC8vIHBhZ2UvZGlhbG9nLlxyXG5cdFx0XHRcdC8vXHJcblx0XHRcdFx0Ly8gVE9ETyBtb3ZlIGNoZWNrIHRvIGhpc3Rvcnkgb2JqZWN0IG9yIHBhdGggb2JqZWN0P1xyXG5cdFx0XHRcdHRvID0gISQubW9iaWxlLnBhdGguaXNQYXRoKCB0byApID8gKCAkLm1vYmlsZS5wYXRoLm1ha2VVcmxBYnNvbHV0ZSggXCIjXCIgKyB0bywgdGhpcy5fZ2V0RG9jdW1lbnRCYXNlKCkgKSApIDogdG87XHJcblx0XHRcdH1cclxuXHRcdFx0cmV0dXJuIHRvIHx8IHRoaXMuX2dldEluaXRpYWxDb250ZW50KCk7XHJcblx0XHR9LFxyXG5cclxuXHRcdF90cmFuc2l0aW9uRnJvbUhpc3Rvcnk6IGZ1bmN0aW9uKCBkaXJlY3Rpb24sIGRlZmF1bHRUcmFuc2l0aW9uICkge1xyXG5cdFx0XHR2YXIgaGlzdG9yeSA9IHRoaXMuX2dldEhpc3RvcnkoKSxcclxuXHRcdFx0XHRlbnRyeSA9ICggZGlyZWN0aW9uID09PSBcImJhY2tcIiA/IGhpc3RvcnkuZ2V0TGFzdCgpIDogaGlzdG9yeS5nZXRBY3RpdmUoKSApO1xyXG5cclxuXHRcdFx0cmV0dXJuICggZW50cnkgJiYgZW50cnkudHJhbnNpdGlvbiApIHx8IGRlZmF1bHRUcmFuc2l0aW9uO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfaGFuZGxlRGlhbG9nOiBmdW5jdGlvbiggY2hhbmdlUGFnZU9wdGlvbnMsIGRhdGEgKSB7XHJcblx0XHRcdHZhciB0bywgYWN0aXZlLCBhY3RpdmVDb250ZW50ID0gdGhpcy5nZXRBY3RpdmVQYWdlKCk7XHJcblxyXG5cdFx0XHQvLyBJZiBjdXJyZW50IGFjdGl2ZSBwYWdlIGlzIG5vdCBhIGRpYWxvZyBza2lwIHRoZSBkaWFsb2cgYW5kIGNvbnRpbnVlXHJcblx0XHRcdC8vIGluIHRoZSBzYW1lIGRpcmVjdGlvblxyXG5cdFx0XHQvLyBOb3RlOiBUaGUgZGlhbG9nIHdpZGdldCBpcyBkZXByZWNhdGVkIGFzIG9mIDEuNC4wIGFuZCB3aWxsIGJlIHJlbW92ZWQgaW4gMS41LjAuXHJcblx0XHRcdC8vIFRodXMsIGFzIG9mIDEuNS4wIGFjdGl2ZUNvbnRlbnQuZGF0YSggXCJtb2JpbGUtZGlhbG9nXCIgKSB3aWxsIGFsd2F5cyBldmFsdWF0ZSB0b1xyXG5cdFx0XHQvLyBmYWxzeSwgc28gdGhlIHNlY29uZCBjb25kaXRpb24gaW4gdGhlIGlmLXN0YXRlbWVudCBiZWxvdyBjYW4gYmUgcmVtb3ZlZCBhbHRvZ2V0aGVyLlxyXG5cdFx0XHRpZiAoIGFjdGl2ZUNvbnRlbnQgJiYgIWFjdGl2ZUNvbnRlbnQuZGF0YSggXCJtb2JpbGUtZGlhbG9nXCIgKSApIHtcclxuXHRcdFx0XHQvLyBkZXRlcm1pbmUgaWYgd2UncmUgaGVhZGluZyBmb3J3YXJkIG9yIGJhY2t3YXJkIGFuZCBjb250aW51ZVxyXG5cdFx0XHRcdC8vIGFjY29yZGluZ2x5IHBhc3QgdGhlIGN1cnJlbnQgZGlhbG9nXHJcblx0XHRcdFx0aWYgKCBkYXRhLmRpcmVjdGlvbiA9PT0gXCJiYWNrXCIgKSB7XHJcblx0XHRcdFx0XHR0aGlzLmJhY2soKTtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0dGhpcy5mb3J3YXJkKCk7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHQvLyBwcmV2ZW50IGNoYW5nZVBhZ2UgY2FsbFxyXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHQvLyBpZiB0aGUgY3VycmVudCBhY3RpdmUgcGFnZSBpcyBhIGRpYWxvZyBhbmQgd2UncmUgbmF2aWdhdGluZ1xyXG5cdFx0XHRcdC8vIHRvIGEgZGlhbG9nIHVzZSB0aGUgZGlhbG9nIG9iamVjdGVkIHNhdmVkIGluIHRoZSBzdGFja1xyXG5cdFx0XHRcdHRvID0gZGF0YS5wYWdlVXJsO1xyXG5cdFx0XHRcdGFjdGl2ZSA9IHRoaXMuX2dldEFjdGl2ZUhpc3RvcnkoKTtcclxuXHJcblx0XHRcdFx0Ly8gbWFrZSBzdXJlIHRvIHNldCB0aGUgcm9sZSwgdHJhbnNpdGlvbiBhbmQgcmV2ZXJzYWxcclxuXHRcdFx0XHQvLyBhcyBtb3N0IG9mIHRoaXMgaXMgbG9zdCBieSB0aGUgZG9tQ2FjaGUgY2xlYW5pbmdcclxuXHRcdFx0XHQkLmV4dGVuZCggY2hhbmdlUGFnZU9wdGlvbnMsIHtcclxuXHRcdFx0XHRcdHJvbGU6IGFjdGl2ZS5yb2xlLFxyXG5cdFx0XHRcdFx0dHJhbnNpdGlvbjogdGhpcy5fdHJhbnNpdGlvbkZyb21IaXN0b3J5KFxyXG5cdFx0XHRcdFx0XHRkYXRhLmRpcmVjdGlvbixcclxuXHRcdFx0XHRcdFx0Y2hhbmdlUGFnZU9wdGlvbnMudHJhbnNpdGlvbiApLFxyXG5cdFx0XHRcdFx0cmV2ZXJzZTogZGF0YS5kaXJlY3Rpb24gPT09IFwiYmFja1wiXHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHJldHVybiB0bztcclxuXHRcdH0sXHJcblxyXG5cdFx0X2hhbmRsZU5hdmlnYXRlOiBmdW5jdGlvbiggdXJsLCBkYXRhICkge1xyXG5cdFx0XHQvL2ZpbmQgZmlyc3QgcGFnZSB2aWEgaGFzaFxyXG5cdFx0XHQvLyBUT0RPIHN0cmlwcGluZyB0aGUgaGFzaCB0d2ljZSB3aXRoIGhhbmRsZVVybFxyXG5cdFx0XHR2YXIgdG8gPSAkLm1vYmlsZS5wYXRoLnN0cmlwSGFzaCggdXJsICksIGhpc3RvcnkgPSB0aGlzLl9nZXRIaXN0b3J5KCksXHJcblxyXG5cdFx0XHRcdC8vIHRyYW5zaXRpb24gaXMgZmFsc2UgaWYgaXQncyB0aGUgZmlyc3QgcGFnZSwgdW5kZWZpbmVkXHJcblx0XHRcdFx0Ly8gb3RoZXJ3aXNlIChhbmQgbWF5IGJlIG92ZXJyaWRkZW4gYnkgZGVmYXVsdClcclxuXHRcdFx0XHR0cmFuc2l0aW9uID0gaGlzdG9yeS5zdGFjay5sZW5ndGggPT09IDAgPyBcIm5vbmVcIiA6XHJcblx0XHRcdFx0XHR0aGlzLl90cmFuc2l0aW9uRnJvbUhpc3RvcnkoIGRhdGEuZGlyZWN0aW9uICksXHJcblxyXG5cdFx0XHRcdC8vIGRlZmF1bHQgb3B0aW9ucyBmb3IgdGhlIGNoYW5nUGFnZSBjYWxscyBtYWRlIGFmdGVyIGV4YW1pbmluZ1xyXG5cdFx0XHRcdC8vIHRoZSBjdXJyZW50IHN0YXRlIG9mIHRoZSBwYWdlIGFuZCB0aGUgaGFzaCwgTk9URSB0aGF0IHRoZVxyXG5cdFx0XHRcdC8vIHRyYW5zaXRpb24gaXMgZGVyaXZlZCBmcm9tIHRoZSBwcmV2aW91cyBoaXN0b3J5IGVudHJ5XHJcblx0XHRcdFx0Y2hhbmdlUGFnZU9wdGlvbnMgPSB7XHJcblx0XHRcdFx0XHRjaGFuZ2VIYXNoOiBmYWxzZSxcclxuXHRcdFx0XHRcdGZyb21IYXNoQ2hhbmdlOiB0cnVlLFxyXG5cdFx0XHRcdFx0cmV2ZXJzZTogZGF0YS5kaXJlY3Rpb24gPT09IFwiYmFja1wiXHJcblx0XHRcdFx0fTtcclxuXHJcblx0XHRcdCQuZXh0ZW5kKCBjaGFuZ2VQYWdlT3B0aW9ucywgZGF0YSwge1xyXG5cdFx0XHRcdHRyYW5zaXRpb246IHRyYW5zaXRpb25cclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHQvLyBUT0RPIG1vdmUgdG8gX2hhbmRsZURlc3RpbmF0aW9uID9cclxuXHRcdFx0Ly8gSWYgdGhpcyBpc24ndCB0aGUgZmlyc3QgcGFnZSwgaWYgdGhlIGN1cnJlbnQgdXJsIGlzIGEgZGlhbG9nIGhhc2hcclxuXHRcdFx0Ly8ga2V5LCBhbmQgdGhlIGluaXRpYWwgZGVzdGluYXRpb24gaXNuJ3QgZXF1YWwgdG8gdGhlIGN1cnJlbnQgdGFyZ2V0XHJcblx0XHRcdC8vIHBhZ2UsIHVzZSB0aGUgc3BlY2lhbCBkaWFsb2cgaGFuZGxpbmdcclxuXHRcdFx0aWYgKCBoaXN0b3J5LmFjdGl2ZUluZGV4ID4gMCAmJlxyXG5cdFx0XHRcdHRvLmluZGV4T2YoICQubW9iaWxlLmRpYWxvZ0hhc2hLZXkgKSA+IC0xICkge1xyXG5cclxuXHRcdFx0XHR0byA9IHRoaXMuX2hhbmRsZURpYWxvZyggY2hhbmdlUGFnZU9wdGlvbnMsIGRhdGEgKTtcclxuXHJcblx0XHRcdFx0aWYgKCB0byA9PT0gZmFsc2UgKSB7XHJcblx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHR0aGlzLl9jaGFuZ2VDb250ZW50KCB0aGlzLl9oYW5kbGVEZXN0aW5hdGlvbiggdG8gKSwgY2hhbmdlUGFnZU9wdGlvbnMgKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0X2NoYW5nZUNvbnRlbnQ6IGZ1bmN0aW9uKCB0bywgb3B0cyApIHtcclxuXHRcdFx0JC5tb2JpbGUuY2hhbmdlUGFnZSggdG8sIG9wdHMgKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0X2dldEJhc2U6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRyZXR1cm4gJC5tb2JpbGUuYmFzZTtcclxuXHRcdH0sXHJcblxyXG5cdFx0X2dldE5zOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0cmV0dXJuICQubW9iaWxlLm5zO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfZW5oYW5jZTogZnVuY3Rpb24oIGNvbnRlbnQsIHJvbGUgKSB7XHJcblx0XHRcdC8vIFRPRE8gY29uc2lkZXIgc3VwcG9ydGluZyBhIGN1c3RvbSBjYWxsYmFjaywgYW5kIHBhc3NpbmcgaW5cclxuXHRcdFx0Ly8gdGhlIHNldHRpbmdzIHdoaWNoIGluY2x1ZGVzIHRoZSByb2xlXHJcblx0XHRcdHJldHVybiBjb250ZW50LnBhZ2UoeyByb2xlOiByb2xlIH0pO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfaW5jbHVkZTogZnVuY3Rpb24oIHBhZ2UsIHNldHRpbmdzICkge1xyXG5cdFx0XHQvLyBhcHBlbmQgdG8gcGFnZSBhbmQgZW5oYW5jZVxyXG5cdFx0XHRwYWdlLmFwcGVuZFRvKCB0aGlzLmVsZW1lbnQgKTtcclxuXHJcblx0XHRcdC8vIHVzZSB0aGUgcGFnZSB3aWRnZXQgdG8gZW5oYW5jZVxyXG5cdFx0XHR0aGlzLl9lbmhhbmNlKCBwYWdlLCBzZXR0aW5ncy5yb2xlICk7XHJcblxyXG5cdFx0XHQvLyByZW1vdmUgcGFnZSBvbiBoaWRlXHJcblx0XHRcdHBhZ2UucGFnZSggXCJiaW5kUmVtb3ZlXCIgKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0X2ZpbmQ6IGZ1bmN0aW9uKCBhYnNVcmwgKSB7XHJcblx0XHRcdC8vIFRPRE8gY29uc2lkZXIgc3VwcG9ydGluZyBhIGN1c3RvbSBjYWxsYmFja1xyXG5cdFx0XHR2YXIgZmlsZVVybCA9IHRoaXMuX2NyZWF0ZUZpbGVVcmwoIGFic1VybCApLFxyXG5cdFx0XHRcdGRhdGFVcmwgPSB0aGlzLl9jcmVhdGVEYXRhVXJsKCBhYnNVcmwgKSxcclxuXHRcdFx0XHRwYWdlLCBpbml0aWFsQ29udGVudCA9IHRoaXMuX2dldEluaXRpYWxDb250ZW50KCk7XHJcblxyXG5cdFx0XHQvLyBDaGVjayB0byBzZWUgaWYgdGhlIHBhZ2UgYWxyZWFkeSBleGlzdHMgaW4gdGhlIERPTS5cclxuXHRcdFx0Ly8gTk9URSBkbyBfbm90XyB1c2UgdGhlIDpqcW1EYXRhIHBzZXVkbyBzZWxlY3RvciBiZWNhdXNlIHBhcmVudGhlc2lzXHJcblx0XHRcdC8vICAgICAgYXJlIGEgdmFsaWQgdXJsIGNoYXIgYW5kIGl0IGJyZWFrcyBvbiB0aGUgZmlyc3Qgb2NjdXJlbmNlXHJcblx0XHRcdHBhZ2UgPSB0aGlzLmVsZW1lbnRcclxuXHRcdFx0XHQuY2hpbGRyZW4oIFwiW2RhdGEtXCIgKyB0aGlzLl9nZXROcygpICtcclxuXHRcdFx0XHRcdFwidXJsPSdcIiArICQubW9iaWxlLnBhdGguaGFzaFRvU2VsZWN0b3IoIGRhdGFVcmwgKSArIFwiJ11cIiApO1xyXG5cclxuXHRcdFx0Ly8gSWYgd2UgZmFpbGVkIHRvIGZpbmQgdGhlIHBhZ2UsIGNoZWNrIHRvIHNlZSBpZiB0aGUgdXJsIGlzIGFcclxuXHRcdFx0Ly8gcmVmZXJlbmNlIHRvIGFuIGVtYmVkZGVkIHBhZ2UuIElmIHNvLCBpdCBtYXkgaGF2ZSBiZWVuIGR5bmFtaWNhbGx5XHJcblx0XHRcdC8vIGluamVjdGVkIGJ5IGEgZGV2ZWxvcGVyLCBpbiB3aGljaCBjYXNlIGl0IHdvdWxkIGJlIGxhY2tpbmcgYVxyXG5cdFx0XHQvLyBkYXRhLXVybCBhdHRyaWJ1dGUgYW5kIGluIG5lZWQgb2YgZW5oYW5jZW1lbnQuXHJcblx0XHRcdGlmICggcGFnZS5sZW5ndGggPT09IDAgJiYgZGF0YVVybCAmJiAhJC5tb2JpbGUucGF0aC5pc1BhdGgoIGRhdGFVcmwgKSApIHtcclxuXHRcdFx0XHRwYWdlID0gdGhpcy5lbGVtZW50LmNoaWxkcmVuKCAkLm1vYmlsZS5wYXRoLmhhc2hUb1NlbGVjdG9yKFwiI1wiICsgZGF0YVVybCkgKVxyXG5cdFx0XHRcdFx0LmF0dHIoIFwiZGF0YS1cIiArIHRoaXMuX2dldE5zKCkgKyBcInVybFwiLCBkYXRhVXJsIClcclxuXHRcdFx0XHRcdC5qcW1EYXRhKCBcInVybFwiLCBkYXRhVXJsICk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIElmIHdlIGZhaWxlZCB0byBmaW5kIGEgcGFnZSBpbiB0aGUgRE9NLCBjaGVjayB0aGUgVVJMIHRvIHNlZSBpZiBpdFxyXG5cdFx0XHQvLyByZWZlcnMgdG8gdGhlIGZpcnN0IHBhZ2UgaW4gdGhlIGFwcGxpY2F0aW9uLiBBbHNvIGNoZWNrIHRvIG1ha2Ugc3VyZVxyXG5cdFx0XHQvLyBvdXIgY2FjaGVkLWZpcnN0LXBhZ2UgaXMgYWN0dWFsbHkgaW4gdGhlIERPTS4gU29tZSB1c2VyIGRlcGxveWVkXHJcblx0XHRcdC8vIGFwcHMgYXJlIHBydW5pbmcgdGhlIGZpcnN0IHBhZ2UgZnJvbSB0aGUgRE9NIGZvciB2YXJpb3VzIHJlYXNvbnMuXHJcblx0XHRcdC8vIFdlIGNoZWNrIGZvciB0aGlzIGNhc2UgaGVyZSBiZWNhdXNlIHdlIGRvbid0IHdhbnQgYSBmaXJzdC1wYWdlIHdpdGhcclxuXHRcdFx0Ly8gYW4gaWQgZmFsbGluZyB0aHJvdWdoIHRvIHRoZSBub24tZXhpc3RlbnQgZW1iZWRkZWQgcGFnZSBlcnJvciBjYXNlLlxyXG5cdFx0XHRpZiAoIHBhZ2UubGVuZ3RoID09PSAwICYmXHJcblx0XHRcdFx0JC5tb2JpbGUucGF0aC5pc0ZpcnN0UGFnZVVybCggZmlsZVVybCApICYmXHJcblx0XHRcdFx0aW5pdGlhbENvbnRlbnQgJiZcclxuXHRcdFx0XHRpbml0aWFsQ29udGVudC5wYXJlbnQoKS5sZW5ndGggKSB7XHJcblx0XHRcdFx0cGFnZSA9ICQoIGluaXRpYWxDb250ZW50ICk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHJldHVybiBwYWdlO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfZ2V0TG9hZGVyOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0cmV0dXJuICQubW9iaWxlLmxvYWRpbmcoKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0X3Nob3dMb2FkaW5nOiBmdW5jdGlvbiggZGVsYXksIHRoZW1lLCBtc2csIHRleHRvbmx5ICkge1xyXG5cdFx0XHQvLyBUaGlzIGNvbmZpZ3VyYWJsZSB0aW1lb3V0IGFsbG93cyBjYWNoZWQgcGFnZXMgYSBicmllZlxyXG5cdFx0XHQvLyBkZWxheSB0byBsb2FkIHdpdGhvdXQgc2hvd2luZyBhIG1lc3NhZ2VcclxuXHRcdFx0aWYgKCB0aGlzLl9sb2FkTXNnICkge1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0dGhpcy5fbG9hZE1zZyA9IHNldFRpbWVvdXQoJC5wcm94eShmdW5jdGlvbigpIHtcclxuXHRcdFx0XHR0aGlzLl9nZXRMb2FkZXIoKS5sb2FkZXIoIFwic2hvd1wiLCB0aGVtZSwgbXNnLCB0ZXh0b25seSApO1xyXG5cdFx0XHRcdHRoaXMuX2xvYWRNc2cgPSAwO1xyXG5cdFx0XHR9LCB0aGlzKSwgZGVsYXkgKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0X2hpZGVMb2FkaW5nOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0Ly8gU3RvcCBtZXNzYWdlIHNob3cgdGltZXJcclxuXHRcdFx0Y2xlYXJUaW1lb3V0KCB0aGlzLl9sb2FkTXNnICk7XHJcblx0XHRcdHRoaXMuX2xvYWRNc2cgPSAwO1xyXG5cclxuXHRcdFx0Ly8gSGlkZSBsb2FkaW5nIG1lc3NhZ2VcclxuXHRcdFx0dGhpcy5fZ2V0TG9hZGVyKCkubG9hZGVyKCBcImhpZGVcIiApO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfc2hvd0Vycm9yOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0Ly8gbWFrZSBzdXJlIHRvIHJlbW92ZSB0aGUgY3VycmVudCBsb2FkaW5nIG1lc3NhZ2VcclxuXHRcdFx0dGhpcy5faGlkZUxvYWRpbmcoKTtcclxuXHJcblx0XHRcdC8vIHNob3cgdGhlIGVycm9yIG1lc3NhZ2VcclxuXHRcdFx0dGhpcy5fc2hvd0xvYWRpbmcoIDAsICQubW9iaWxlLnBhZ2VMb2FkRXJyb3JNZXNzYWdlVGhlbWUsICQubW9iaWxlLnBhZ2VMb2FkRXJyb3JNZXNzYWdlLCB0cnVlICk7XHJcblxyXG5cdFx0XHQvLyBoaWRlIHRoZSBlcnJvciBtZXNzYWdlIGFmdGVyIGEgZGVsYXlcclxuXHRcdFx0Ly8gVE9ETyBjb25maWd1cmF0aW9uXHJcblx0XHRcdHNldFRpbWVvdXQoICQucHJveHkodGhpcywgXCJfaGlkZUxvYWRpbmdcIiksIDE1MDAgKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0X3BhcnNlOiBmdW5jdGlvbiggaHRtbCwgZmlsZVVybCApIHtcclxuXHRcdFx0Ly8gVE9ETyBjb25zaWRlciBhbGxvd2luZyBjdXN0b21pemF0aW9uIG9mIHRoaXMgbWV0aG9kLiBJdCdzIHZlcnkgSlFNIHNwZWNpZmljXHJcblx0XHRcdHZhciBwYWdlLCBhbGwgPSAkKCBcIjxkaXY+PC9kaXY+XCIgKTtcclxuXHJcblx0XHRcdC8vd29ya2Fyb3VuZCB0byBhbGxvdyBzY3JpcHRzIHRvIGV4ZWN1dGUgd2hlbiBpbmNsdWRlZCBpbiBwYWdlIGRpdnNcclxuXHRcdFx0YWxsLmdldCggMCApLmlubmVySFRNTCA9IGh0bWw7XHJcblxyXG5cdFx0XHRwYWdlID0gYWxsLmZpbmQoIFwiOmpxbURhdGEocm9sZT0ncGFnZScpLCA6anFtRGF0YShyb2xlPSdkaWFsb2cnKVwiICkuZmlyc3QoKTtcclxuXHJcblx0XHRcdC8vaWYgcGFnZSBlbGVtIGNvdWxkbid0IGJlIGZvdW5kLCBjcmVhdGUgb25lIGFuZCBpbnNlcnQgdGhlIGJvZHkgZWxlbWVudCdzIGNvbnRlbnRzXHJcblx0XHRcdGlmICggIXBhZ2UubGVuZ3RoICkge1xyXG5cdFx0XHRcdHBhZ2UgPSAkKCBcIjxkaXYgZGF0YS1cIiArIHRoaXMuX2dldE5zKCkgKyBcInJvbGU9J3BhZ2UnPlwiICtcclxuXHRcdFx0XHRcdCggaHRtbC5zcGxpdCggLzxcXC8/Ym9keVtePl0qPi9nbWkgKVsxXSB8fCBcIlwiICkgK1xyXG5cdFx0XHRcdFx0XCI8L2Rpdj5cIiApO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBUT0RPIHRhZ2dpbmcgYSBwYWdlIHdpdGggZXh0ZXJuYWwgdG8gbWFrZSBzdXJlIHRoYXQgZW1iZWRkZWQgcGFnZXMgYXJlbid0XHJcblx0XHRcdC8vIHJlbW92ZWQgYnkgdGhlIHZhcmlvdXMgcGFnZSBoYW5kbGluZyBjb2RlIGlzIGJhZC4gSGF2aW5nIHBhZ2UgaGFuZGxpbmcgY29kZVxyXG5cdFx0XHQvLyBpbiBtYW55IHBsYWNlcyBpcyBiYWQuIFNvbHV0aW9ucyBwb3N0IDEuMFxyXG5cdFx0XHRwYWdlLmF0dHIoIFwiZGF0YS1cIiArIHRoaXMuX2dldE5zKCkgKyBcInVybFwiLCB0aGlzLl9jcmVhdGVEYXRhVXJsKCBmaWxlVXJsICkgKVxyXG5cdFx0XHRcdC5hdHRyKCBcImRhdGEtXCIgKyB0aGlzLl9nZXROcygpICsgXCJleHRlcm5hbC1wYWdlXCIsIHRydWUgKTtcclxuXHJcblx0XHRcdHJldHVybiBwYWdlO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfc2V0TG9hZGVkVGl0bGU6IGZ1bmN0aW9uKCBwYWdlLCBodG1sICkge1xyXG5cdFx0XHQvL3BhZ2UgdGl0bGUgcmVnZXhwXHJcblx0XHRcdHZhciBuZXdQYWdlVGl0bGUgPSBodG1sLm1hdGNoKCAvPHRpdGxlW14+XSo+KFtePF0qKS8gKSAmJiBSZWdFeHAuJDE7XHJcblxyXG5cdFx0XHRpZiAoIG5ld1BhZ2VUaXRsZSAmJiAhcGFnZS5qcW1EYXRhKFwidGl0bGVcIikgKSB7XHJcblx0XHRcdFx0bmV3UGFnZVRpdGxlID0gJCggXCI8ZGl2PlwiICsgbmV3UGFnZVRpdGxlICsgXCI8L2Rpdj5cIiApLnRleHQoKTtcclxuXHRcdFx0XHRwYWdlLmpxbURhdGEoIFwidGl0bGVcIiwgbmV3UGFnZVRpdGxlICk7XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblxyXG5cdFx0X2lzUmV3cml0YWJsZUJhc2VUYWc6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRyZXR1cm4gJC5tb2JpbGUuZHluYW1pY0Jhc2VFbmFibGVkICYmICEkLnN1cHBvcnQuZHluYW1pY0Jhc2VUYWc7XHJcblx0XHR9LFxyXG5cclxuXHRcdF9jcmVhdGVEYXRhVXJsOiBmdW5jdGlvbiggYWJzb2x1dGVVcmwgKSB7XHJcblx0XHRcdHJldHVybiAkLm1vYmlsZS5wYXRoLmNvbnZlcnRVcmxUb0RhdGFVcmwoIGFic29sdXRlVXJsICk7XHJcblx0XHR9LFxyXG5cclxuXHRcdF9jcmVhdGVGaWxlVXJsOiBmdW5jdGlvbiggYWJzb2x1dGVVcmwgKSB7XHJcblx0XHRcdHJldHVybiAkLm1vYmlsZS5wYXRoLmdldEZpbGVQYXRoKCBhYnNvbHV0ZVVybCApO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfdHJpZ2dlcldpdGhEZXByZWNhdGVkOiBmdW5jdGlvbiggbmFtZSwgZGF0YSwgcGFnZSApIHtcclxuXHRcdFx0dmFyIGRlcHJlY2F0ZWRFdmVudCA9ICQuRXZlbnQoIFwicGFnZVwiICsgbmFtZSApLFxyXG5cdFx0XHRcdG5ld0V2ZW50ID0gJC5FdmVudCggdGhpcy53aWRnZXROYW1lICsgbmFtZSApO1xyXG5cclxuXHRcdFx0Ly8gREVQUkVDQVRFRFxyXG5cdFx0XHQvLyB0cmlnZ2VyIHRoZSBvbGQgZGVwcmVjYXRlZCBldmVudCBvbiB0aGUgcGFnZSBpZiBpdCdzIHByb3ZpZGVkXHJcblx0XHRcdCggcGFnZSB8fCB0aGlzLmVsZW1lbnQgKS50cmlnZ2VyKCBkZXByZWNhdGVkRXZlbnQsIGRhdGEgKTtcclxuXHJcblx0XHRcdC8vIHVzZSB0aGUgd2lkZ2V0IHRyaWdnZXIgbWV0aG9kIGZvciB0aGUgbmV3IGNvbnRlbnQqIGV2ZW50XHJcblx0XHRcdHRoaXMuX3RyaWdnZXIoIG5hbWUsIG5ld0V2ZW50LCBkYXRhICk7XHJcblxyXG5cdFx0XHRyZXR1cm4ge1xyXG5cdFx0XHRcdGRlcHJlY2F0ZWRFdmVudDogZGVwcmVjYXRlZEV2ZW50LFxyXG5cdFx0XHRcdGV2ZW50OiBuZXdFdmVudFxyXG5cdFx0XHR9O1xyXG5cdFx0fSxcclxuXHJcblx0XHQvLyBUT0RPIGl0IHdvdWxkIGJlIG5pY2UgdG8gc3BsaXQgdGhpcyB1cCBtb3JlIGJ1dCBldmVyeXRoaW5nIGFwcGVhcnMgdG8gYmUgXCJvbmUgb2ZmXCJcclxuXHRcdC8vICAgICAgb3IgcmVxdWlyZSBvcmRlcmluZyBzdWNoIHRoYXQgb3RoZXIgYml0cyBhcmUgc3ByaW5rbGVkIGluIGJldHdlZW4gcGFydHMgdGhhdFxyXG5cdFx0Ly8gICAgICBjb3VsZCBiZSBhYnN0cmFjdGVkIG91dCBhcyBhIGdyb3VwXHJcblx0XHRfbG9hZFN1Y2Nlc3M6IGZ1bmN0aW9uKCBhYnNVcmwsIHRyaWdnZXJEYXRhLCBzZXR0aW5ncywgZGVmZXJyZWQgKSB7XHJcblx0XHRcdHZhciBmaWxlVXJsID0gdGhpcy5fY3JlYXRlRmlsZVVybCggYWJzVXJsICk7XHJcblxyXG5cdFx0XHRyZXR1cm4gJC5wcm94eShmdW5jdGlvbiggaHRtbCwgdGV4dFN0YXR1cywgeGhyICkge1xyXG5cdFx0XHRcdC8vcHJlLXBhcnNlIGh0bWwgdG8gY2hlY2sgZm9yIGEgZGF0YS11cmwsXHJcblx0XHRcdFx0Ly91c2UgaXQgYXMgdGhlIG5ldyBmaWxlVXJsLCBiYXNlIHBhdGgsIGV0Y1xyXG5cdFx0XHRcdHZhciBjb250ZW50LFxyXG5cclxuXHRcdFx0XHRcdC8vIFRPRE8gaGFuZGxlIGRpYWxvZ3MgYWdhaW5cclxuXHRcdFx0XHRcdHBhZ2VFbGVtUmVnZXggPSBuZXcgUmVnRXhwKCBcIig8W14+XStcXFxcYmRhdGEtXCIgKyB0aGlzLl9nZXROcygpICsgXCJyb2xlPVtcXFwiJ10/cGFnZVtcXFwiJ10/W14+XSo+KVwiICksXHJcblxyXG5cdFx0XHRcdFx0ZGF0YVVybFJlZ2V4ID0gbmV3IFJlZ0V4cCggXCJcXFxcYmRhdGEtXCIgKyB0aGlzLl9nZXROcygpICsgXCJ1cmw9W1xcXCInXT8oW15cXFwiJz5dKilbXFxcIiddP1wiICk7XHJcblxyXG5cdFx0XHRcdC8vIGRhdGEtdXJsIG11c3QgYmUgcHJvdmlkZWQgZm9yIHRoZSBiYXNlIHRhZyBzbyByZXNvdXJjZSByZXF1ZXN0c1xyXG5cdFx0XHRcdC8vIGNhbiBiZSBkaXJlY3RlZCB0byB0aGUgY29ycmVjdCB1cmwuIGxvYWRpbmcgaW50byBhIHRlbXByb3JhcnlcclxuXHRcdFx0XHQvLyBlbGVtZW50IG1ha2VzIHRoZXNlIHJlcXVlc3RzIGltbWVkaWF0ZWx5XHJcblx0XHRcdFx0aWYgKCBwYWdlRWxlbVJlZ2V4LnRlc3QoIGh0bWwgKSAmJlxyXG5cdFx0XHRcdFx0UmVnRXhwLiQxICYmXHJcblx0XHRcdFx0XHRkYXRhVXJsUmVnZXgudGVzdCggUmVnRXhwLiQxICkgJiZcclxuXHRcdFx0XHRcdFJlZ0V4cC4kMSApIHtcclxuXHRcdFx0XHRcdGZpbGVVcmwgPSAkLm1vYmlsZS5wYXRoLmdldEZpbGVQYXRoKCAkKFwiPGRpdj5cIiArIFJlZ0V4cC4kMSArIFwiPC9kaXY+XCIpLnRleHQoKSApO1xyXG5cclxuXHRcdFx0XHRcdC8vIFdlIHNwZWNpZnkgdGhhdCwgaWYgYSBkYXRhLXVybCBhdHRyaWJ1dGUgaXMgZ2l2ZW4gb24gdGhlIHBhZ2UgZGl2LCBpdHMgdmFsdWVcclxuXHRcdFx0XHRcdC8vIG11c3QgYmUgZ2l2ZW4gbm9uLVVSTC1lbmNvZGVkLiBIb3dldmVyLCBpbiB0aGlzIHBhcnQgb2YgdGhlIGNvZGUsIGZpbGVVcmwgaXNcclxuXHRcdFx0XHRcdC8vIGFzc3VtZWQgdG8gYmUgVVJMLWVuY29kZWQsIHNvIHdlIFVSTC1lbmNvZGUgdGhlIHJldHJpZXZlZCB2YWx1ZSBoZXJlXHJcblx0XHRcdFx0XHRmaWxlVXJsID0gdGhpcy53aW5kb3dbIDAgXS5lbmNvZGVVUklDb21wb25lbnQoIGZpbGVVcmwgKTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdC8vZG9udCB1cGRhdGUgdGhlIGJhc2UgdGFnIGlmIHdlIGFyZSBwcmVmZXRjaGluZ1xyXG5cdFx0XHRcdGlmICggc2V0dGluZ3MucHJlZmV0Y2ggPT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0XHRcdHRoaXMuX2dldEJhc2UoKS5zZXQoIGZpbGVVcmwgKTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdGNvbnRlbnQgPSB0aGlzLl9wYXJzZSggaHRtbCwgZmlsZVVybCApO1xyXG5cclxuXHRcdFx0XHR0aGlzLl9zZXRMb2FkZWRUaXRsZSggY29udGVudCwgaHRtbCApO1xyXG5cclxuXHRcdFx0XHQvLyBBZGQgdGhlIGNvbnRlbnQgcmVmZXJlbmNlIGFuZCB4aHIgdG8gb3VyIHRyaWdnZXJEYXRhLlxyXG5cdFx0XHRcdHRyaWdnZXJEYXRhLnhociA9IHhocjtcclxuXHRcdFx0XHR0cmlnZ2VyRGF0YS50ZXh0U3RhdHVzID0gdGV4dFN0YXR1cztcclxuXHJcblx0XHRcdFx0Ly8gREVQUkVDQVRFRFxyXG5cdFx0XHRcdHRyaWdnZXJEYXRhLnBhZ2UgPSBjb250ZW50O1xyXG5cclxuXHRcdFx0XHR0cmlnZ2VyRGF0YS5jb250ZW50ID0gY29udGVudDtcclxuXHJcblx0XHRcdFx0dHJpZ2dlckRhdGEudG9QYWdlID0gY29udGVudDtcclxuXHJcblx0XHRcdFx0Ly8gSWYgdGhlIGRlZmF1bHQgYmVoYXZpb3IgaXMgcHJldmVudGVkLCBzdG9wIGhlcmUhXHJcblx0XHRcdFx0Ly8gTm90ZSB0aGF0IGl0IGlzIHRoZSByZXNwb25zaWJpbGl0eSBvZiB0aGUgbGlzdGVuZXIvaGFuZGxlclxyXG5cdFx0XHRcdC8vIHRoYXQgY2FsbGVkIHByZXZlbnREZWZhdWx0KCksIHRvIHJlc29sdmUvcmVqZWN0IHRoZVxyXG5cdFx0XHRcdC8vIGRlZmVycmVkIG9iamVjdCB3aXRoaW4gdGhlIHRyaWdnZXJEYXRhLlxyXG5cdFx0XHRcdGlmICggdGhpcy5fdHJpZ2dlcldpdGhEZXByZWNhdGVkKCBcImxvYWRcIiwgdHJpZ2dlckRhdGEgKS5ldmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSApIHtcclxuXHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdC8vIHJld3JpdGUgc3JjIGFuZCBocmVmIGF0dHJzIHRvIHVzZSBhIGJhc2UgdXJsIGlmIHRoZSBiYXNlIHRhZyB3b24ndCB3b3JrXHJcblx0XHRcdFx0aWYgKCB0aGlzLl9pc1Jld3JpdGFibGVCYXNlVGFnKCkgJiYgY29udGVudCApIHtcclxuXHRcdFx0XHRcdHRoaXMuX2dldEJhc2UoKS5yZXdyaXRlKCBmaWxlVXJsLCBjb250ZW50ICk7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHR0aGlzLl9pbmNsdWRlKCBjb250ZW50LCBzZXR0aW5ncyApO1xyXG5cclxuXHRcdFx0XHQvLyBSZW1vdmUgbG9hZGluZyBtZXNzYWdlLlxyXG5cdFx0XHRcdGlmICggc2V0dGluZ3Muc2hvd0xvYWRNc2cgKSB7XHJcblx0XHRcdFx0XHR0aGlzLl9oaWRlTG9hZGluZygpO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0ZGVmZXJyZWQucmVzb2x2ZSggYWJzVXJsLCBzZXR0aW5ncywgY29udGVudCApO1xyXG5cdFx0XHR9LCB0aGlzKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0X2xvYWREZWZhdWx0czoge1xyXG5cdFx0XHR0eXBlOiBcImdldFwiLFxyXG5cdFx0XHRkYXRhOiB1bmRlZmluZWQsXHJcblxyXG5cdFx0XHQvLyBERVBSRUNBVEVEXHJcblx0XHRcdHJlbG9hZFBhZ2U6IGZhbHNlLFxyXG5cclxuXHRcdFx0cmVsb2FkOiBmYWxzZSxcclxuXHJcblx0XHRcdC8vIEJ5IGRlZmF1bHQgd2UgcmVseSBvbiB0aGUgcm9sZSBkZWZpbmVkIGJ5IHRoZSBAZGF0YS1yb2xlIGF0dHJpYnV0ZS5cclxuXHRcdFx0cm9sZTogdW5kZWZpbmVkLFxyXG5cclxuXHRcdFx0c2hvd0xvYWRNc2c6IGZhbHNlLFxyXG5cclxuXHRcdFx0Ly8gVGhpcyBkZWxheSBhbGxvd3MgbG9hZHMgdGhhdCBwdWxsIGZyb20gYnJvd3NlciBjYWNoZSB0b1xyXG5cdFx0XHQvLyBvY2N1ciB3aXRob3V0IHNob3dpbmcgdGhlIGxvYWRpbmcgbWVzc2FnZS5cclxuXHRcdFx0bG9hZE1zZ0RlbGF5OiA1MFxyXG5cdFx0fSxcclxuXHJcblx0XHRsb2FkOiBmdW5jdGlvbiggdXJsLCBvcHRpb25zICkge1xyXG5cdFx0XHQvLyBUaGlzIGZ1bmN0aW9uIHVzZXMgZGVmZXJyZWQgbm90aWZpY2F0aW9ucyB0byBsZXQgY2FsbGVyc1xyXG5cdFx0XHQvLyBrbm93IHdoZW4gdGhlIGNvbnRlbnQgaXMgZG9uZSBsb2FkaW5nLCBvciBpZiBhbiBlcnJvciBoYXMgb2NjdXJyZWQuXHJcblx0XHRcdHZhciBkZWZlcnJlZCA9ICggb3B0aW9ucyAmJiBvcHRpb25zLmRlZmVycmVkICkgfHwgJC5EZWZlcnJlZCgpLFxyXG5cclxuXHRcdFx0XHQvLyBFeGFtaW5pbmcgdGhlIG9wdGlvbiBcInJlbG9hZFBhZ2VcIiBwYXNzZWQgYnkgdGhlIHVzZXIgaXMgZGVwcmVjYXRlZCBhcyBvZiAxLjQuMFxyXG5cdFx0XHRcdC8vIGFuZCB3aWxsIGJlIHJlbW92ZWQgaW4gMS41LjAuXHJcblx0XHRcdFx0Ly8gQ29weSBvcHRpb24gXCJyZWxvYWRQYWdlXCIgdG8gXCJyZWxvYWRcIiwgYnV0IG9ubHkgaWYgb3B0aW9uIFwicmVsb2FkXCIgaXMgbm90IHByZXNlbnRcclxuXHRcdFx0XHRyZWxvYWRPcHRpb25FeHRlbnNpb24gPVxyXG5cdFx0XHRcdFx0KCAoIG9wdGlvbnMgJiYgb3B0aW9ucy5yZWxvYWQgPT09IHVuZGVmaW5lZCAmJlxyXG5cdFx0XHRcdFx0XHRvcHRpb25zLnJlbG9hZFBhZ2UgIT09IHVuZGVmaW5lZCApID9cclxuXHRcdFx0XHRcdFx0XHR7IHJlbG9hZDogb3B0aW9ucy5yZWxvYWRQYWdlIH0gOiB7fSApLFxyXG5cclxuXHRcdFx0XHQvLyBUaGUgZGVmYXVsdCBsb2FkIG9wdGlvbnMgd2l0aCBvdmVycmlkZXMgc3BlY2lmaWVkIGJ5IHRoZSBjYWxsZXIuXHJcblx0XHRcdFx0c2V0dGluZ3MgPSAkLmV4dGVuZCgge30sIHRoaXMuX2xvYWREZWZhdWx0cywgb3B0aW9ucywgcmVsb2FkT3B0aW9uRXh0ZW5zaW9uICksXHJcblxyXG5cdFx0XHRcdC8vIFRoZSBET00gZWxlbWVudCBmb3IgdGhlIGNvbnRlbnQgYWZ0ZXIgaXQgaGFzIGJlZW4gbG9hZGVkLlxyXG5cdFx0XHRcdGNvbnRlbnQgPSBudWxsLFxyXG5cclxuXHRcdFx0XHQvLyBUaGUgYWJzb2x1dGUgdmVyc2lvbiBvZiB0aGUgVVJMIHBhc3NlZCBpbnRvIHRoZSBmdW5jdGlvbi4gVGhpc1xyXG5cdFx0XHRcdC8vIHZlcnNpb24gb2YgdGhlIFVSTCBtYXkgY29udGFpbiBkaWFsb2cvc3ViY29udGVudCBwYXJhbXMgaW4gaXQuXHJcblx0XHRcdFx0YWJzVXJsID0gJC5tb2JpbGUucGF0aC5tYWtlVXJsQWJzb2x1dGUoIHVybCwgdGhpcy5fZmluZEJhc2VXaXRoRGVmYXVsdCgpICksXHJcblx0XHRcdFx0ZmlsZVVybCwgZGF0YVVybCwgcGJsRXZlbnQsIHRyaWdnZXJEYXRhO1xyXG5cclxuXHRcdFx0Ly8gSWYgdGhlIGNhbGxlciBwcm92aWRlZCBkYXRhLCBhbmQgd2UncmUgdXNpbmcgXCJnZXRcIiByZXF1ZXN0LFxyXG5cdFx0XHQvLyBhcHBlbmQgdGhlIGRhdGEgdG8gdGhlIFVSTC5cclxuXHRcdFx0aWYgKCBzZXR0aW5ncy5kYXRhICYmIHNldHRpbmdzLnR5cGUgPT09IFwiZ2V0XCIgKSB7XHJcblx0XHRcdFx0YWJzVXJsID0gJC5tb2JpbGUucGF0aC5hZGRTZWFyY2hQYXJhbXMoIGFic1VybCwgc2V0dGluZ3MuZGF0YSApO1xyXG5cdFx0XHRcdHNldHRpbmdzLmRhdGEgPSB1bmRlZmluZWQ7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIElmIHRoZSBjYWxsZXIgaXMgdXNpbmcgYSBcInBvc3RcIiByZXF1ZXN0LCByZWxvYWQgbXVzdCBiZSB0cnVlXHJcblx0XHRcdGlmICggc2V0dGluZ3MuZGF0YSAmJiBzZXR0aW5ncy50eXBlID09PSBcInBvc3RcIiApIHtcclxuXHRcdFx0XHRzZXR0aW5ncy5yZWxvYWQgPSB0cnVlO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBUaGUgYWJzb2x1dGUgdmVyc2lvbiBvZiB0aGUgVVJMIG1pbnVzIGFueSBkaWFsb2cvc3ViY29udGVudCBwYXJhbXMuXHJcblx0XHRcdC8vIEluIG90aGVyd29yZHMgdGhlIHJlYWwgVVJMIG9mIHRoZSBjb250ZW50IHRvIGJlIGxvYWRlZC5cclxuXHRcdFx0ZmlsZVVybCA9IHRoaXMuX2NyZWF0ZUZpbGVVcmwoIGFic1VybCApO1xyXG5cclxuXHRcdFx0Ly8gVGhlIHZlcnNpb24gb2YgdGhlIFVybCBhY3R1YWxseSBzdG9yZWQgaW4gdGhlIGRhdGEtdXJsIGF0dHJpYnV0ZSBvZlxyXG5cdFx0XHQvLyB0aGUgY29udGVudC4gRm9yIGVtYmVkZGVkIGNvbnRlbnQsIGl0IGlzIGp1c3QgdGhlIGlkIG9mIHRoZSBwYWdlLiBGb3JcclxuXHRcdFx0Ly8gY29udGVudCB3aXRoaW4gdGhlIHNhbWUgZG9tYWluIGFzIHRoZSBkb2N1bWVudCBiYXNlLCBpdCBpcyB0aGUgc2l0ZVxyXG5cdFx0XHQvLyByZWxhdGl2ZSBwYXRoLiBGb3IgY3Jvc3MtZG9tYWluIGNvbnRlbnQgKFBob25lIEdhcCBvbmx5KSB0aGUgZW50aXJlXHJcblx0XHRcdC8vIGFic29sdXRlIFVybCBpcyB1c2VkIHRvIGxvYWQgdGhlIGNvbnRlbnQuXHJcblx0XHRcdGRhdGFVcmwgPSB0aGlzLl9jcmVhdGVEYXRhVXJsKCBhYnNVcmwgKTtcclxuXHJcblx0XHRcdGNvbnRlbnQgPSB0aGlzLl9maW5kKCBhYnNVcmwgKTtcclxuXHJcblx0XHRcdC8vIElmIGl0IGlzbid0IGEgcmVmZXJlbmNlIHRvIHRoZSBmaXJzdCBjb250ZW50IGFuZCByZWZlcnMgdG8gbWlzc2luZ1xyXG5cdFx0XHQvLyBlbWJlZGRlZCBjb250ZW50IHJlamVjdCB0aGUgZGVmZXJyZWQgYW5kIHJldHVyblxyXG5cdFx0XHRpZiAoIGNvbnRlbnQubGVuZ3RoID09PSAwICYmXHJcblx0XHRcdFx0JC5tb2JpbGUucGF0aC5pc0VtYmVkZGVkUGFnZShmaWxlVXJsKSAmJlxyXG5cdFx0XHRcdCEkLm1vYmlsZS5wYXRoLmlzRmlyc3RQYWdlVXJsKGZpbGVVcmwpICkge1xyXG5cdFx0XHRcdGRlZmVycmVkLnJlamVjdCggYWJzVXJsLCBzZXR0aW5ncyApO1xyXG5cdFx0XHRcdHJldHVybiBkZWZlcnJlZC5wcm9taXNlKCk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIFJlc2V0IGJhc2UgdG8gdGhlIGRlZmF1bHQgZG9jdW1lbnQgYmFzZVxyXG5cdFx0XHQvLyBUT0RPIGZpZ3VyZSBvdXQgd2h5IHdlIGRvZSB0aGlzXHJcblx0XHRcdHRoaXMuX2dldEJhc2UoKS5yZXNldCgpO1xyXG5cclxuXHRcdFx0Ly8gSWYgdGhlIGNvbnRlbnQgd2UgYXJlIGludGVyZXN0ZWQgaW4gaXMgYWxyZWFkeSBpbiB0aGUgRE9NLFxyXG5cdFx0XHQvLyBhbmQgdGhlIGNhbGxlciBkaWQgbm90IGluZGljYXRlIHRoYXQgd2Ugc2hvdWxkIGZvcmNlIGFcclxuXHRcdFx0Ly8gcmVsb2FkIG9mIHRoZSBmaWxlLCB3ZSBhcmUgZG9uZS4gUmVzb2x2ZSB0aGUgZGVmZXJycmVkIHNvIHRoYXRcclxuXHRcdFx0Ly8gdXNlcnMgY2FuIGJpbmQgdG8gLmRvbmUgb24gdGhlIHByb21pc2VcclxuXHRcdFx0aWYgKCBjb250ZW50Lmxlbmd0aCAmJiAhc2V0dGluZ3MucmVsb2FkICkge1xyXG5cdFx0XHRcdHRoaXMuX2VuaGFuY2UoIGNvbnRlbnQsIHNldHRpbmdzLnJvbGUgKTtcclxuXHRcdFx0XHRkZWZlcnJlZC5yZXNvbHZlKCBhYnNVcmwsIHNldHRpbmdzLCBjb250ZW50ICk7XHJcblxyXG5cdFx0XHRcdC8vaWYgd2UgYXJlIHJlbG9hZGluZyB0aGUgY29udGVudCBtYWtlIHN1cmUgd2UgdXBkYXRlXHJcblx0XHRcdFx0Ly8gdGhlIGJhc2UgaWYgaXRzIG5vdCBhIHByZWZldGNoXHJcblx0XHRcdFx0aWYgKCAhc2V0dGluZ3MucHJlZmV0Y2ggKSB7XHJcblx0XHRcdFx0XHR0aGlzLl9nZXRCYXNlKCkuc2V0KHVybCk7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRyZXR1cm4gZGVmZXJyZWQucHJvbWlzZSgpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHR0cmlnZ2VyRGF0YSA9IHtcclxuXHRcdFx0XHR1cmw6IHVybCxcclxuXHRcdFx0XHRhYnNVcmw6IGFic1VybCxcclxuXHRcdFx0XHR0b1BhZ2U6IHVybCxcclxuXHRcdFx0XHRwcmV2UGFnZTogb3B0aW9ucyA/IG9wdGlvbnMuZnJvbVBhZ2UgOiB1bmRlZmluZWQsXHJcblx0XHRcdFx0ZGF0YVVybDogZGF0YVVybCxcclxuXHRcdFx0XHRkZWZlcnJlZDogZGVmZXJyZWQsXHJcblx0XHRcdFx0b3B0aW9uczogc2V0dGluZ3NcclxuXHRcdFx0fTtcclxuXHJcblx0XHRcdC8vIExldCBsaXN0ZW5lcnMga25vdyB3ZSdyZSBhYm91dCB0byBsb2FkIGNvbnRlbnQuXHJcblx0XHRcdHBibEV2ZW50ID0gdGhpcy5fdHJpZ2dlcldpdGhEZXByZWNhdGVkKCBcImJlZm9yZWxvYWRcIiwgdHJpZ2dlckRhdGEgKTtcclxuXHJcblx0XHRcdC8vIElmIHRoZSBkZWZhdWx0IGJlaGF2aW9yIGlzIHByZXZlbnRlZCwgc3RvcCBoZXJlIVxyXG5cdFx0XHRpZiAoIHBibEV2ZW50LmRlcHJlY2F0ZWRFdmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSB8fFxyXG5cdFx0XHRcdHBibEV2ZW50LmV2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpICkge1xyXG5cdFx0XHRcdHJldHVybiBkZWZlcnJlZC5wcm9taXNlKCk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmICggc2V0dGluZ3Muc2hvd0xvYWRNc2cgKSB7XHJcblx0XHRcdFx0dGhpcy5fc2hvd0xvYWRpbmcoIHNldHRpbmdzLmxvYWRNc2dEZWxheSApO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBSZXNldCBiYXNlIHRvIHRoZSBkZWZhdWx0IGRvY3VtZW50IGJhc2UuXHJcblx0XHRcdC8vIG9ubHkgcmVzZXQgaWYgd2UgYXJlIG5vdCBwcmVmZXRjaGluZ1xyXG5cdFx0XHRpZiAoIHNldHRpbmdzLnByZWZldGNoID09PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdFx0dGhpcy5fZ2V0QmFzZSgpLnJlc2V0KCk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmICggISggJC5tb2JpbGUuYWxsb3dDcm9zc0RvbWFpblBhZ2VzIHx8XHJcblx0XHRcdFx0JC5tb2JpbGUucGF0aC5pc1NhbWVEb21haW4oJC5tb2JpbGUucGF0aC5kb2N1bWVudFVybCwgYWJzVXJsICkgKSApIHtcclxuXHRcdFx0XHRkZWZlcnJlZC5yZWplY3QoIGFic1VybCwgc2V0dGluZ3MgKTtcclxuXHRcdFx0XHRyZXR1cm4gZGVmZXJyZWQucHJvbWlzZSgpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBMb2FkIHRoZSBuZXcgY29udGVudC5cclxuXHRcdFx0JC5hamF4KHtcclxuXHRcdFx0XHR1cmw6IGZpbGVVcmwsXHJcblx0XHRcdFx0dHlwZTogc2V0dGluZ3MudHlwZSxcclxuXHRcdFx0XHRkYXRhOiBzZXR0aW5ncy5kYXRhLFxyXG5cdFx0XHRcdGNvbnRlbnRUeXBlOiBzZXR0aW5ncy5jb250ZW50VHlwZSxcclxuXHRcdFx0XHRkYXRhVHlwZTogXCJodG1sXCIsXHJcblx0XHRcdFx0c3VjY2VzczogdGhpcy5fbG9hZFN1Y2Nlc3MoIGFic1VybCwgdHJpZ2dlckRhdGEsIHNldHRpbmdzLCBkZWZlcnJlZCApLFxyXG5cdFx0XHRcdGVycm9yOiB0aGlzLl9sb2FkRXJyb3IoIGFic1VybCwgdHJpZ2dlckRhdGEsIHNldHRpbmdzLCBkZWZlcnJlZCApXHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0cmV0dXJuIGRlZmVycmVkLnByb21pc2UoKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0X2xvYWRFcnJvcjogZnVuY3Rpb24oIGFic1VybCwgdHJpZ2dlckRhdGEsIHNldHRpbmdzLCBkZWZlcnJlZCApIHtcclxuXHRcdFx0cmV0dXJuICQucHJveHkoZnVuY3Rpb24oIHhociwgdGV4dFN0YXR1cywgZXJyb3JUaHJvd24gKSB7XHJcblx0XHRcdFx0Ly9zZXQgYmFzZSBiYWNrIHRvIGN1cnJlbnQgcGF0aFxyXG5cdFx0XHRcdHRoaXMuX2dldEJhc2UoKS5zZXQoICQubW9iaWxlLnBhdGguZ2V0KCkgKTtcclxuXHJcblx0XHRcdFx0Ly8gQWRkIGVycm9yIGluZm8gdG8gb3VyIHRyaWdnZXJEYXRhLlxyXG5cdFx0XHRcdHRyaWdnZXJEYXRhLnhociA9IHhocjtcclxuXHRcdFx0XHR0cmlnZ2VyRGF0YS50ZXh0U3RhdHVzID0gdGV4dFN0YXR1cztcclxuXHRcdFx0XHR0cmlnZ2VyRGF0YS5lcnJvclRocm93biA9IGVycm9yVGhyb3duO1xyXG5cclxuXHRcdFx0XHQvLyBMZXQgbGlzdGVuZXJzIGtub3cgdGhlIHBhZ2UgbG9hZCBmYWlsZWQuXHJcblx0XHRcdFx0dmFyIHBsZkV2ZW50ID0gdGhpcy5fdHJpZ2dlcldpdGhEZXByZWNhdGVkKCBcImxvYWRmYWlsZWRcIiwgdHJpZ2dlckRhdGEgKTtcclxuXHJcblx0XHRcdFx0Ly8gSWYgdGhlIGRlZmF1bHQgYmVoYXZpb3IgaXMgcHJldmVudGVkLCBzdG9wIGhlcmUhXHJcblx0XHRcdFx0Ly8gTm90ZSB0aGF0IGl0IGlzIHRoZSByZXNwb25zaWJpbGl0eSBvZiB0aGUgbGlzdGVuZXIvaGFuZGxlclxyXG5cdFx0XHRcdC8vIHRoYXQgY2FsbGVkIHByZXZlbnREZWZhdWx0KCksIHRvIHJlc29sdmUvcmVqZWN0IHRoZVxyXG5cdFx0XHRcdC8vIGRlZmVycmVkIG9iamVjdCB3aXRoaW4gdGhlIHRyaWdnZXJEYXRhLlxyXG5cdFx0XHRcdGlmICggcGxmRXZlbnQuZGVwcmVjYXRlZEV2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpIHx8XHJcblx0XHRcdFx0XHRwbGZFdmVudC5ldmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSApIHtcclxuXHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdC8vIFJlbW92ZSBsb2FkaW5nIG1lc3NhZ2UuXHJcblx0XHRcdFx0aWYgKCBzZXR0aW5ncy5zaG93TG9hZE1zZyApIHtcclxuXHRcdFx0XHRcdHRoaXMuX3Nob3dFcnJvcigpO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0ZGVmZXJyZWQucmVqZWN0KCBhYnNVcmwsIHNldHRpbmdzICk7XHJcblx0XHRcdH0sIHRoaXMpO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfZ2V0VHJhbnNpdGlvbkhhbmRsZXI6IGZ1bmN0aW9uKCB0cmFuc2l0aW9uICkge1xyXG5cdFx0XHR0cmFuc2l0aW9uID0gJC5tb2JpbGUuX21heWJlRGVncmFkZVRyYW5zaXRpb24oIHRyYW5zaXRpb24gKTtcclxuXHJcblx0XHRcdC8vZmluZCB0aGUgdHJhbnNpdGlvbiBoYW5kbGVyIGZvciB0aGUgc3BlY2lmaWVkIHRyYW5zaXRpb24uIElmIHRoZXJlXHJcblx0XHRcdC8vaXNuJ3Qgb25lIGluIG91ciB0cmFuc2l0aW9uSGFuZGxlcnMgZGljdGlvbmFyeSwgdXNlIHRoZSBkZWZhdWx0IG9uZS5cclxuXHRcdFx0Ly9jYWxsIHRoZSBoYW5kbGVyIGltbWVkaWF0ZWx5IHRvIGtpY2stb2ZmIHRoZSB0cmFuc2l0aW9uLlxyXG5cdFx0XHRyZXR1cm4gJC5tb2JpbGUudHJhbnNpdGlvbkhhbmRsZXJzWyB0cmFuc2l0aW9uIF0gfHwgJC5tb2JpbGUuZGVmYXVsdFRyYW5zaXRpb25IYW5kbGVyO1xyXG5cdFx0fSxcclxuXHJcblx0XHQvLyBUT0RPIG1vdmUgaW50byB0cmFuc2l0aW9uIGhhbmRsZXJzP1xyXG5cdFx0X3RyaWdnZXJDc3NUcmFuc2l0aW9uRXZlbnRzOiBmdW5jdGlvbiggdG8sIGZyb20sIHByZWZpeCApIHtcclxuXHRcdFx0dmFyIHNhbWVQYWdlID0gZmFsc2U7XHJcblxyXG5cdFx0XHRwcmVmaXggPSBwcmVmaXggfHwgXCJcIjtcclxuXHJcblx0XHRcdC8vIFRPRE8gZGVjaWRlIGlmIHRoZXNlIGV2ZW50cyBzaG91bGQgaW4gZmFjdCBiZSB0cmlnZ2VyZWQgb24gdGhlIGNvbnRhaW5lclxyXG5cdFx0XHRpZiAoIGZyb20gKSB7XHJcblxyXG5cdFx0XHRcdC8vQ2hlY2sgaWYgdGhpcyBpcyBhIHNhbWUgcGFnZSB0cmFuc2l0aW9uIGFuZCB0ZWxsIHRoZSBoYW5kbGVyIGluIHBhZ2VcclxuXHRcdFx0XHRpZiggdG9bMF0gPT09IGZyb21bMF0gKXtcclxuXHRcdFx0XHRcdHNhbWVQYWdlID0gdHJ1ZTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdC8vdHJpZ2dlciBiZWZvcmUgc2hvdy9oaWRlIGV2ZW50c1xyXG5cdFx0XHRcdC8vIFRPRE8gZGVwcmVjYXRlIG5leHRQYWdlIGluIGZhdm9yIG9mIG5leHRcclxuXHRcdFx0XHR0aGlzLl90cmlnZ2VyV2l0aERlcHJlY2F0ZWQoIHByZWZpeCArIFwiaGlkZVwiLCB7XHJcblxyXG5cdFx0XHRcdFx0Ly8gRGVwcmVjYXRlZCBpbiAxLjQgcmVtb3ZlIGluIDEuNVxyXG5cdFx0XHRcdFx0bmV4dFBhZ2U6IHRvLFxyXG5cdFx0XHRcdFx0dG9QYWdlOiB0byxcclxuXHRcdFx0XHRcdHByZXZQYWdlOiBmcm9tLFxyXG5cdFx0XHRcdFx0c2FtZVBhZ2U6IHNhbWVQYWdlXHJcblx0XHRcdFx0fSwgZnJvbSApO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBUT0RPIGRlcHJlY2F0ZSBwcmV2UGFnZSBpbiBmYXZvciBvZiBwcmV2aW91c1xyXG5cdFx0XHR0aGlzLl90cmlnZ2VyV2l0aERlcHJlY2F0ZWQoIHByZWZpeCArIFwic2hvd1wiLCB7XHJcblx0XHRcdFx0cHJldlBhZ2U6IGZyb20gfHwgJCggXCJcIiApLFxyXG5cdFx0XHRcdHRvUGFnZTogdG9cclxuXHRcdFx0fSwgdG8gKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0Ly8gVE9ETyBtYWtlIHByaXZhdGUgb25jZSBjaGFuZ2UgaGFzIGJlZW4gZGVmaW5lZCBpbiB0aGUgd2lkZ2V0XHJcblx0XHRfY3NzVHJhbnNpdGlvbjogZnVuY3Rpb24oIHRvLCBmcm9tLCBvcHRpb25zICkge1xyXG5cdFx0XHR2YXIgdHJhbnNpdGlvbiA9IG9wdGlvbnMudHJhbnNpdGlvbixcclxuXHRcdFx0XHRyZXZlcnNlID0gb3B0aW9ucy5yZXZlcnNlLFxyXG5cdFx0XHRcdGRlZmVycmVkID0gb3B0aW9ucy5kZWZlcnJlZCxcclxuXHRcdFx0XHRUcmFuc2l0aW9uSGFuZGxlcixcclxuXHRcdFx0XHRwcm9taXNlO1xyXG5cclxuXHRcdFx0dGhpcy5fdHJpZ2dlckNzc1RyYW5zaXRpb25FdmVudHMoIHRvLCBmcm9tLCBcImJlZm9yZVwiICk7XHJcblxyXG5cdFx0XHQvLyBUT0RPIHB1dCB0aGlzIGluIGEgYmluZGluZyB0byBldmVudHMgKm91dHNpZGUqIHRoZSB3aWRnZXRcclxuXHRcdFx0dGhpcy5faGlkZUxvYWRpbmcoKTtcclxuXHJcblx0XHRcdFRyYW5zaXRpb25IYW5kbGVyID0gdGhpcy5fZ2V0VHJhbnNpdGlvbkhhbmRsZXIoIHRyYW5zaXRpb24gKTtcclxuXHJcblx0XHRcdHByb21pc2UgPSAoIG5ldyBUcmFuc2l0aW9uSGFuZGxlciggdHJhbnNpdGlvbiwgcmV2ZXJzZSwgdG8sIGZyb20gKSApLnRyYW5zaXRpb24oKTtcclxuXHJcblx0XHRcdHByb21pc2UuZG9uZSggJC5wcm94eSggZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0dGhpcy5fdHJpZ2dlckNzc1RyYW5zaXRpb25FdmVudHMoIHRvLCBmcm9tICk7XHJcblx0XHRcdH0sIHRoaXMgKSk7XHJcblxyXG5cdFx0XHQvLyBUT0RPIHRlbXBvcmFyeSBhY2NvbW9kYXRpb24gb2YgYXJndW1lbnQgZGVmZXJyZWRcclxuXHRcdFx0cHJvbWlzZS5kb25lKGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdGRlZmVycmVkLnJlc29sdmUuYXBwbHkoIGRlZmVycmVkLCBhcmd1bWVudHMgKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9LFxyXG5cclxuXHRcdF9yZWxlYXNlVHJhbnNpdGlvbkxvY2s6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHQvL3JlbGVhc2UgdHJhbnNpdGlvbiBsb2NrIHNvIG5hdmlnYXRpb24gaXMgZnJlZSBhZ2FpblxyXG5cdFx0XHRpc1BhZ2VUcmFuc2l0aW9uaW5nID0gZmFsc2U7XHJcblx0XHRcdGlmICggcGFnZVRyYW5zaXRpb25RdWV1ZS5sZW5ndGggPiAwICkge1xyXG5cdFx0XHRcdCQubW9iaWxlLmNoYW5nZVBhZ2UuYXBwbHkoIG51bGwsIHBhZ2VUcmFuc2l0aW9uUXVldWUucG9wKCkgKTtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHJcblx0XHRfcmVtb3ZlQWN0aXZlTGlua0NsYXNzOiBmdW5jdGlvbiggZm9yY2UgKSB7XHJcblx0XHRcdC8vY2xlYXIgb3V0IHRoZSBhY3RpdmUgYnV0dG9uIHN0YXRlXHJcblx0XHRcdCQubW9iaWxlLnJlbW92ZUFjdGl2ZUxpbmtDbGFzcyggZm9yY2UgKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0X2xvYWRVcmw6IGZ1bmN0aW9uKCB0bywgdHJpZ2dlckRhdGEsIHNldHRpbmdzICkge1xyXG5cdFx0XHQvLyBwcmVzZXJ2ZSB0aGUgb3JpZ2luYWwgdGFyZ2V0IGFzIHRoZSBkYXRhVXJsIHZhbHVlIHdpbGwgYmVcclxuXHRcdFx0Ly8gc2ltcGxpZmllZCBlZywgcmVtb3ZpbmcgdWktc3RhdGUsIGFuZCByZW1vdmluZyBxdWVyeSBwYXJhbXNcclxuXHRcdFx0Ly8gZnJvbSB0aGUgaGFzaCB0aGlzIGlzIHNvIHRoYXQgdXNlcnMgd2hvIHdhbnQgdG8gdXNlIHF1ZXJ5XHJcblx0XHRcdC8vIHBhcmFtcyBoYXZlIGFjY2VzcyB0byB0aGVtIGluIHRoZSBldmVudCBiaW5kaW5ncyBmb3IgdGhlIHBhZ2VcclxuXHRcdFx0Ly8gbGlmZSBjeWNsZSBTZWUgaXNzdWUgIzUwODVcclxuXHRcdFx0c2V0dGluZ3MudGFyZ2V0ID0gdG87XHJcblx0XHRcdHNldHRpbmdzLmRlZmVycmVkID0gJC5EZWZlcnJlZCgpO1xyXG5cclxuXHRcdFx0dGhpcy5sb2FkKCB0bywgc2V0dGluZ3MgKTtcclxuXHJcblx0XHRcdHNldHRpbmdzLmRlZmVycmVkLmRvbmUoJC5wcm94eShmdW5jdGlvbiggdXJsLCBvcHRpb25zLCBjb250ZW50ICkge1xyXG5cdFx0XHRcdGlzUGFnZVRyYW5zaXRpb25pbmcgPSBmYWxzZTtcclxuXHJcblx0XHRcdFx0Ly8gc3RvcmUgdGhlIG9yaWdpbmFsIGFic29sdXRlIHVybCBzbyB0aGF0IGl0IGNhbiBiZSBwcm92aWRlZFxyXG5cdFx0XHRcdC8vIHRvIGV2ZW50cyBpbiB0aGUgdHJpZ2dlckRhdGEgb2YgdGhlIHN1YnNlcXVlbnQgY2hhbmdlUGFnZSBjYWxsXHJcblx0XHRcdFx0b3B0aW9ucy5hYnNVcmwgPSB0cmlnZ2VyRGF0YS5hYnNVcmw7XHJcblxyXG5cdFx0XHRcdHRoaXMudHJhbnNpdGlvbiggY29udGVudCwgdHJpZ2dlckRhdGEsIG9wdGlvbnMgKTtcclxuXHRcdFx0fSwgdGhpcykpO1xyXG5cclxuXHRcdFx0c2V0dGluZ3MuZGVmZXJyZWQuZmFpbCgkLnByb3h5KGZ1bmN0aW9uKC8qIHVybCwgb3B0aW9ucyAqLykge1xyXG5cdFx0XHRcdHRoaXMuX3JlbW92ZUFjdGl2ZUxpbmtDbGFzcyggdHJ1ZSApO1xyXG5cdFx0XHRcdHRoaXMuX3JlbGVhc2VUcmFuc2l0aW9uTG9jaygpO1xyXG5cdFx0XHRcdHRoaXMuX3RyaWdnZXJXaXRoRGVwcmVjYXRlZCggXCJjaGFuZ2VmYWlsZWRcIiwgdHJpZ2dlckRhdGEgKTtcclxuXHRcdFx0fSwgdGhpcykpO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfdHJpZ2dlclBhZ2VCZWZvcmVDaGFuZ2U6IGZ1bmN0aW9uKCB0bywgdHJpZ2dlckRhdGEsIHNldHRpbmdzICkge1xyXG5cdFx0XHR2YXIgcmV0dXJuRXZlbnRzO1xyXG5cclxuXHRcdFx0dHJpZ2dlckRhdGEucHJldlBhZ2UgPSB0aGlzLmFjdGl2ZVBhZ2U7XHJcblx0XHRcdCQuZXh0ZW5kKCB0cmlnZ2VyRGF0YSwge1xyXG5cdFx0XHRcdHRvUGFnZTogdG8sXHJcblx0XHRcdFx0b3B0aW9uczogc2V0dGluZ3NcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHQvLyBOT1RFOiBwcmVzZXJ2ZSB0aGUgb3JpZ2luYWwgdGFyZ2V0IGFzIHRoZSBkYXRhVXJsIHZhbHVlIHdpbGwgYmVcclxuXHRcdFx0Ly8gc2ltcGxpZmllZCBlZywgcmVtb3ZpbmcgdWktc3RhdGUsIGFuZCByZW1vdmluZyBxdWVyeSBwYXJhbXMgZnJvbVxyXG5cdFx0XHQvLyB0aGUgaGFzaCB0aGlzIGlzIHNvIHRoYXQgdXNlcnMgd2hvIHdhbnQgdG8gdXNlIHF1ZXJ5IHBhcmFtcyBoYXZlXHJcblx0XHRcdC8vIGFjY2VzcyB0byB0aGVtIGluIHRoZSBldmVudCBiaW5kaW5ncyBmb3IgdGhlIHBhZ2UgbGlmZSBjeWNsZVxyXG5cdFx0XHQvLyBTZWUgaXNzdWUgIzUwODVcclxuXHRcdFx0aWYgKCAkLnR5cGUodG8pID09PSBcInN0cmluZ1wiICkge1xyXG5cdFx0XHRcdC8vIGlmIHRoZSB0b1BhZ2UgaXMgYSBzdHJpbmcgc2ltcGx5IGNvbnZlcnQgaXRcclxuXHRcdFx0XHR0cmlnZ2VyRGF0YS5hYnNVcmwgPSAkLm1vYmlsZS5wYXRoLm1ha2VVcmxBYnNvbHV0ZSggdG8sIHRoaXMuX2ZpbmRCYXNlV2l0aERlZmF1bHQoKSApO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdC8vIGlmIHRoZSB0b1BhZ2UgaXMgYSBqUXVlcnkgb2JqZWN0IGdyYWIgdGhlIGFic29sdXRlIHVybCBzdG9yZWRcclxuXHRcdFx0XHQvLyBpbiB0aGUgbG9hZFBhZ2UgY2FsbGJhY2sgd2hlcmUgaXQgZXhpc3RzXHJcblx0XHRcdFx0dHJpZ2dlckRhdGEuYWJzVXJsID0gc2V0dGluZ3MuYWJzVXJsO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBMZXQgbGlzdGVuZXJzIGtub3cgd2UncmUgYWJvdXQgdG8gY2hhbmdlIHRoZSBjdXJyZW50IHBhZ2UuXHJcblx0XHRcdHJldHVybkV2ZW50cyA9IHRoaXMuX3RyaWdnZXJXaXRoRGVwcmVjYXRlZCggXCJiZWZvcmVjaGFuZ2VcIiwgdHJpZ2dlckRhdGEgKTtcclxuXHJcblx0XHRcdC8vIElmIHRoZSBkZWZhdWx0IGJlaGF2aW9yIGlzIHByZXZlbnRlZCwgc3RvcCBoZXJlIVxyXG5cdFx0XHRpZiAoIHJldHVybkV2ZW50cy5ldmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSB8fFxyXG5cdFx0XHRcdHJldHVybkV2ZW50cy5kZXByZWNhdGVkRXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkgKSB7XHJcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdH0sXHJcblxyXG5cdFx0Y2hhbmdlOiBmdW5jdGlvbiggdG8sIG9wdGlvbnMgKSB7XHJcblx0XHRcdC8vIElmIHdlIGFyZSBpbiB0aGUgbWlkc3Qgb2YgYSB0cmFuc2l0aW9uLCBxdWV1ZSB0aGUgY3VycmVudCByZXF1ZXN0LlxyXG5cdFx0XHQvLyBXZSdsbCBjYWxsIGNoYW5nZVBhZ2UoKSBvbmNlIHdlJ3JlIGRvbmUgd2l0aCB0aGUgY3VycmVudCB0cmFuc2l0aW9uXHJcblx0XHRcdC8vIHRvIHNlcnZpY2UgdGhlIHJlcXVlc3QuXHJcblx0XHRcdGlmICggaXNQYWdlVHJhbnNpdGlvbmluZyApIHtcclxuXHRcdFx0XHRwYWdlVHJhbnNpdGlvblF1ZXVlLnVuc2hpZnQoIGFyZ3VtZW50cyApO1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0dmFyIHNldHRpbmdzID0gJC5leHRlbmQoIHt9LCAkLm1vYmlsZS5jaGFuZ2VQYWdlLmRlZmF1bHRzLCBvcHRpb25zICksXHJcblx0XHRcdFx0dHJpZ2dlckRhdGEgPSB7fTtcclxuXHJcblx0XHRcdC8vIE1ha2Ugc3VyZSB3ZSBoYXZlIGEgZnJvbVBhZ2UuXHJcblx0XHRcdHNldHRpbmdzLmZyb21QYWdlID0gc2V0dGluZ3MuZnJvbVBhZ2UgfHwgdGhpcy5hY3RpdmVQYWdlO1xyXG5cclxuXHRcdFx0Ly8gaWYgdGhlIHBhZ2UgYmVmb3JlY2hhbmdlIGRlZmF1bHQgaXMgcHJldmVudGVkIHJldHVybiBlYXJseVxyXG5cdFx0XHRpZiAoICF0aGlzLl90cmlnZ2VyUGFnZUJlZm9yZUNoYW5nZSh0bywgdHJpZ2dlckRhdGEsIHNldHRpbmdzKSApIHtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIFdlIGFsbG93IFwicGFnZWJlZm9yZWNoYW5nZVwiIG9ic2VydmVycyB0byBtb2RpZnkgdGhlIHRvIGluXHJcblx0XHRcdC8vIHRoZSB0cmlnZ2VyIGRhdGEgdG8gYWxsb3cgZm9yIHJlZGlyZWN0cy4gTWFrZSBzdXJlIG91ciB0byBpc1xyXG5cdFx0XHQvLyB1cGRhdGVkLiBXZSBhbHNvIG5lZWQgdG8gcmUtZXZhbHVhdGUgd2hldGhlciBpdCBpcyBhIHN0cmluZyxcclxuXHRcdFx0Ly8gYmVjYXVzZSBhbiBvYmplY3QgY2FuIGFsc28gYmUgcmVwbGFjZWQgYnkgYSBzdHJpbmdcclxuXHRcdFx0dG8gPSB0cmlnZ2VyRGF0YS50b1BhZ2U7XHJcblxyXG5cdFx0XHQvLyBJZiB0aGUgY2FsbGVyIHBhc3NlZCB1cyBhIHVybCwgY2FsbCBsb2FkUGFnZSgpXHJcblx0XHRcdC8vIHRvIG1ha2Ugc3VyZSBpdCBpcyBsb2FkZWQgaW50byB0aGUgRE9NLiBXZSdsbCBsaXN0ZW5cclxuXHRcdFx0Ly8gdG8gdGhlIHByb21pc2Ugb2JqZWN0IGl0IHJldHVybnMgc28gd2Uga25vdyB3aGVuXHJcblx0XHRcdC8vIGl0IGlzIGRvbmUgbG9hZGluZyBvciBpZiBhbiBlcnJvciBvY3VycmVkLlxyXG5cdFx0XHRpZiAoICQudHlwZSh0bykgPT09IFwic3RyaW5nXCIgKSB7XHJcblx0XHRcdFx0Ly8gU2V0IHRoZSBpc1BhZ2VUcmFuc2l0aW9uaW5nIGZsYWcgdG8gcHJldmVudCBhbnkgcmVxdWVzdHMgZnJvbVxyXG5cdFx0XHRcdC8vIGVudGVyaW5nIHRoaXMgbWV0aG9kIHdoaWxlIHdlIGFyZSBpbiB0aGUgbWlkc3Qgb2YgbG9hZGluZyBhIHBhZ2VcclxuXHRcdFx0XHQvLyBvciB0cmFuc2l0aW9uaW5nLlxyXG5cdFx0XHRcdGlzUGFnZVRyYW5zaXRpb25pbmcgPSB0cnVlO1xyXG5cclxuXHRcdFx0XHR0aGlzLl9sb2FkVXJsKCB0bywgdHJpZ2dlckRhdGEsIHNldHRpbmdzICk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0dGhpcy50cmFuc2l0aW9uKCB0bywgdHJpZ2dlckRhdGEsIHNldHRpbmdzICk7XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblxyXG5cdFx0dHJhbnNpdGlvbjogZnVuY3Rpb24oIHRvUGFnZSwgdHJpZ2dlckRhdGEsIHNldHRpbmdzICkge1xyXG5cdFx0XHR2YXIgZnJvbVBhZ2UsIHVybCwgcGFnZVVybCwgZmlsZVVybCxcclxuXHRcdFx0XHRhY3RpdmUsIGFjdGl2ZUlzSW5pdGlhbFBhZ2UsXHJcblx0XHRcdFx0aGlzdG9yeURpciwgcGFnZVRpdGxlLCBpc0RpYWxvZyxcclxuXHRcdFx0XHRhbHJlYWR5VGhlcmUsIG5ld1BhZ2VUaXRsZSxcclxuXHRcdFx0XHRwYXJhbXMsXHRjc3NUcmFuc2l0aW9uRGVmZXJyZWQsXHJcblx0XHRcdFx0YmVmb3JlVHJhbnNpdGlvbjtcclxuXHJcblx0XHRcdC8vIElmIHdlIGFyZSBpbiB0aGUgbWlkc3Qgb2YgYSB0cmFuc2l0aW9uLCBxdWV1ZSB0aGUgY3VycmVudCByZXF1ZXN0LlxyXG5cdFx0XHQvLyBXZSdsbCBjYWxsIGNoYW5nZVBhZ2UoKSBvbmNlIHdlJ3JlIGRvbmUgd2l0aCB0aGUgY3VycmVudCB0cmFuc2l0aW9uXHJcblx0XHRcdC8vIHRvIHNlcnZpY2UgdGhlIHJlcXVlc3QuXHJcblx0XHRcdGlmICggaXNQYWdlVHJhbnNpdGlvbmluZyApIHtcclxuXHRcdFx0XHQvLyBtYWtlIHN1cmUgdG8gb25seSBxdWV1ZSB0aGUgdG8gYW5kIHNldHRpbmdzIHZhbHVlcyBzbyB0aGUgYXJndW1lbnRzXHJcblx0XHRcdFx0Ly8gd29yayB3aXRoIGEgY2FsbCB0byB0aGUgY2hhbmdlIG1ldGhvZFxyXG5cdFx0XHRcdHBhZ2VUcmFuc2l0aW9uUXVldWUudW5zaGlmdCggW3RvUGFnZSwgc2V0dGluZ3NdICk7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBERVBSRUNBVEVEIC0gdGhpcyBjYWxsIG9ubHksIGluIGZhdm9yIG9mIHRoZSBiZWZvcmUgdHJhbnNpdGlvblxyXG5cdFx0XHQvLyBpZiB0aGUgcGFnZSBiZWZvcmVjaGFuZ2UgZGVmYXVsdCBpcyBwcmV2ZW50ZWQgcmV0dXJuIGVhcmx5XHJcblx0XHRcdGlmICggIXRoaXMuX3RyaWdnZXJQYWdlQmVmb3JlQ2hhbmdlKHRvUGFnZSwgdHJpZ2dlckRhdGEsIHNldHRpbmdzKSApIHtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHRyaWdnZXJEYXRhLnByZXZQYWdlID0gc2V0dGluZ3MuZnJvbVBhZ2U7XHJcblx0XHRcdC8vIGlmIHRoZSAoY29udGVudHxwYWdlKWJlZm9yZXRyYW5zaXRpb24gZGVmYXVsdCBpcyBwcmV2ZW50ZWQgcmV0dXJuIGVhcmx5XHJcblx0XHRcdC8vIE5vdGUsIHdlIGhhdmUgdG8gY2hlY2sgZm9yIGJvdGggdGhlIGRlcHJlY2F0ZWQgYW5kIG5ldyBldmVudHNcclxuXHRcdFx0YmVmb3JlVHJhbnNpdGlvbiA9IHRoaXMuX3RyaWdnZXJXaXRoRGVwcmVjYXRlZCggXCJiZWZvcmV0cmFuc2l0aW9uXCIsIHRyaWdnZXJEYXRhICk7XHJcblx0XHRcdGlmIChiZWZvcmVUcmFuc2l0aW9uLmRlcHJlY2F0ZWRFdmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSB8fFxyXG5cdFx0XHRcdGJlZm9yZVRyYW5zaXRpb24uZXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkgKSB7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBTZXQgdGhlIGlzUGFnZVRyYW5zaXRpb25pbmcgZmxhZyB0byBwcmV2ZW50IGFueSByZXF1ZXN0cyBmcm9tXHJcblx0XHRcdC8vIGVudGVyaW5nIHRoaXMgbWV0aG9kIHdoaWxlIHdlIGFyZSBpbiB0aGUgbWlkc3Qgb2YgbG9hZGluZyBhIHBhZ2VcclxuXHRcdFx0Ly8gb3IgdHJhbnNpdGlvbmluZy5cclxuXHRcdFx0aXNQYWdlVHJhbnNpdGlvbmluZyA9IHRydWU7XHJcblxyXG5cdFx0XHQvLyBJZiB3ZSBhcmUgZ29pbmcgdG8gdGhlIGZpcnN0LXBhZ2Ugb2YgdGhlIGFwcGxpY2F0aW9uLCB3ZSBuZWVkIHRvIG1ha2VcclxuXHRcdFx0Ly8gc3VyZSBzZXR0aW5ncy5kYXRhVXJsIGlzIHNldCB0byB0aGUgYXBwbGljYXRpb24gZG9jdW1lbnQgdXJsLiBUaGlzIGFsbG93c1xyXG5cdFx0XHQvLyB1cyB0byBhdm9pZCBnZW5lcmF0aW5nIGEgZG9jdW1lbnQgdXJsIHdpdGggYW4gaWQgaGFzaCBpbiB0aGUgY2FzZSB3aGVyZSB0aGVcclxuXHRcdFx0Ly8gZmlyc3QtcGFnZSBvZiB0aGUgZG9jdW1lbnQgaGFzIGFuIGlkIGF0dHJpYnV0ZSBzcGVjaWZpZWQuXHJcblx0XHRcdGlmICggdG9QYWdlWyAwIF0gPT09ICQubW9iaWxlLmZpcnN0UGFnZVsgMCBdICYmICFzZXR0aW5ncy5kYXRhVXJsICkge1xyXG5cdFx0XHRcdHNldHRpbmdzLmRhdGFVcmwgPSAkLm1vYmlsZS5wYXRoLmRvY3VtZW50VXJsLmhyZWZOb0hhc2g7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIFRoZSBjYWxsZXIgcGFzc2VkIHVzIGEgcmVhbCBwYWdlIERPTSBlbGVtZW50LiBVcGRhdGUgb3VyXHJcblx0XHRcdC8vIGludGVybmFsIHN0YXRlIGFuZCB0aGVuIHRyaWdnZXIgYSB0cmFuc2l0aW9uIHRvIHRoZSBwYWdlLlxyXG5cdFx0XHRmcm9tUGFnZSA9IHNldHRpbmdzLmZyb21QYWdlO1xyXG5cdFx0XHR1cmwgPSAoIHNldHRpbmdzLmRhdGFVcmwgJiYgJC5tb2JpbGUucGF0aC5jb252ZXJ0VXJsVG9EYXRhVXJsKHNldHRpbmdzLmRhdGFVcmwpICkgfHxcclxuXHRcdFx0XHR0b1BhZ2UuanFtRGF0YSggXCJ1cmxcIiApO1xyXG5cclxuXHRcdFx0Ly8gVGhlIHBhZ2VVcmwgdmFyIGlzIHVzdWFsbHkgdGhlIHNhbWUgYXMgdXJsLCBleGNlcHQgd2hlbiB1cmwgaXMgb2JzY3VyZWRcclxuXHRcdFx0Ly8gYXMgYSBkaWFsb2cgdXJsLiBwYWdlVXJsIGFsd2F5cyBjb250YWlucyB0aGUgZmlsZSBwYXRoXHJcblx0XHRcdHBhZ2VVcmwgPSB1cmw7XHJcblx0XHRcdGZpbGVVcmwgPSAkLm1vYmlsZS5wYXRoLmdldEZpbGVQYXRoKCB1cmwgKTtcclxuXHRcdFx0YWN0aXZlID0gJC5tb2JpbGUubmF2aWdhdGUuaGlzdG9yeS5nZXRBY3RpdmUoKTtcclxuXHRcdFx0YWN0aXZlSXNJbml0aWFsUGFnZSA9ICQubW9iaWxlLm5hdmlnYXRlLmhpc3RvcnkuYWN0aXZlSW5kZXggPT09IDA7XHJcblx0XHRcdGhpc3RvcnlEaXIgPSAwO1xyXG5cdFx0XHRwYWdlVGl0bGUgPSBkb2N1bWVudC50aXRsZTtcclxuXHRcdFx0aXNEaWFsb2cgPSAoIHNldHRpbmdzLnJvbGUgPT09IFwiZGlhbG9nXCIgfHxcclxuXHRcdFx0XHR0b1BhZ2UuanFtRGF0YSggXCJyb2xlXCIgKSA9PT0gXCJkaWFsb2dcIiApICYmXHJcblx0XHRcdFx0dG9QYWdlLmpxbURhdGEoIFwiZGlhbG9nXCIgKSAhPT0gdHJ1ZTtcclxuXHJcblx0XHRcdC8vIEJ5IGRlZmF1bHQsIHdlIHByZXZlbnQgY2hhbmdlUGFnZSByZXF1ZXN0cyB3aGVuIHRoZSBmcm9tUGFnZSBhbmQgdG9QYWdlXHJcblx0XHRcdC8vIGFyZSB0aGUgc2FtZSBlbGVtZW50LCBidXQgZm9sa3MgdGhhdCBnZW5lcmF0ZSBjb250ZW50XHJcblx0XHRcdC8vIG1hbnVhbGx5L2R5bmFtaWNhbGx5IGFuZCByZXVzZSBwYWdlcyB3YW50IHRvIGJlIGFibGUgdG8gdHJhbnNpdGlvbiB0b1xyXG5cdFx0XHQvLyB0aGUgc2FtZSBwYWdlLiBUbyBhbGxvdyB0aGlzLCB0aGV5IHdpbGwgbmVlZCB0byBjaGFuZ2UgdGhlIGRlZmF1bHRcclxuXHRcdFx0Ly8gdmFsdWUgb2YgYWxsb3dTYW1lUGFnZVRyYW5zaXRpb24gdG8gdHJ1ZSwgKk9SKiwgcGFzcyBpdCBpbiBhcyBhblxyXG5cdFx0XHQvLyBvcHRpb24gd2hlbiB0aGV5IG1hbnVhbGx5IGNhbGwgY2hhbmdlUGFnZSgpLiBJdCBzaG91bGQgYmUgbm90ZWQgdGhhdFxyXG5cdFx0XHQvLyBvdXIgZGVmYXVsdCB0cmFuc2l0aW9uIGFuaW1hdGlvbnMgYXNzdW1lIHRoYXQgdGhlIGZvcm1QYWdlIGFuZCB0b1BhZ2VcclxuXHRcdFx0Ly8gYXJlIGRpZmZlcmVudCBlbGVtZW50cywgc28gdGhleSBtYXkgYmVoYXZlIHVuZXhwZWN0ZWRseS4gSXQgaXMgdXAgdG9cclxuXHRcdFx0Ly8gdGhlIGRldmVsb3BlciB0aGF0IHR1cm5zIG9uIHRoZSBhbGxvd1NhbWVQYWdlVHJhbnNpdGlvbmEgb3B0aW9uIHRvXHJcblx0XHRcdC8vIGVpdGhlciB0dXJuIG9mZiB0cmFuc2l0aW9uIGFuaW1hdGlvbnMsIG9yIG1ha2Ugc3VyZSB0aGF0IGFuIGFwcHJvcHJpYXRlXHJcblx0XHRcdC8vIGFuaW1hdGlvbiB0cmFuc2l0aW9uIGlzIHVzZWQuXHJcblx0XHRcdGlmICggZnJvbVBhZ2UgJiYgZnJvbVBhZ2VbMF0gPT09IHRvUGFnZVswXSAmJlxyXG5cdFx0XHRcdCFzZXR0aW5ncy5hbGxvd1NhbWVQYWdlVHJhbnNpdGlvbiApIHtcclxuXHJcblx0XHRcdFx0aXNQYWdlVHJhbnNpdGlvbmluZyA9IGZhbHNlO1xyXG5cdFx0XHRcdHRoaXMuX3RyaWdnZXJXaXRoRGVwcmVjYXRlZCggXCJ0cmFuc2l0aW9uXCIsIHRyaWdnZXJEYXRhICk7XHJcblx0XHRcdFx0dGhpcy5fdHJpZ2dlcldpdGhEZXByZWNhdGVkKCBcImNoYW5nZVwiLCB0cmlnZ2VyRGF0YSApO1xyXG5cclxuXHRcdFx0XHQvLyBFdmVuIGlmIHRoZXJlIGlzIG5vIHBhZ2UgY2hhbmdlIHRvIGJlIGRvbmUsIHdlIHNob3VsZCBrZWVwIHRoZVxyXG5cdFx0XHRcdC8vIHVybEhpc3RvcnkgaW4gc3luYyB3aXRoIHRoZSBoYXNoIGNoYW5nZXNcclxuXHRcdFx0XHRpZiAoIHNldHRpbmdzLmZyb21IYXNoQ2hhbmdlICkge1xyXG5cdFx0XHRcdFx0JC5tb2JpbGUubmF2aWdhdGUuaGlzdG9yeS5kaXJlY3QoeyB1cmw6IHVybCB9KTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gV2UgbmVlZCB0byBtYWtlIHN1cmUgdGhlIHBhZ2Ugd2UgYXJlIGdpdmVuIGhhcyBhbHJlYWR5IGJlZW4gZW5oYW5jZWQuXHJcblx0XHRcdHRvUGFnZS5wYWdlKHsgcm9sZTogc2V0dGluZ3Mucm9sZSB9KTtcclxuXHJcblx0XHRcdC8vIElmIHRoZSBjaGFuZ2VQYWdlIHJlcXVlc3Qgd2FzIHNlbnQgZnJvbSBhIGhhc2hDaGFuZ2UgZXZlbnQsIGNoZWNrIHRvXHJcblx0XHRcdC8vIHNlZSBpZiB0aGUgcGFnZSBpcyBhbHJlYWR5IHdpdGhpbiB0aGUgdXJsSGlzdG9yeSBzdGFjay4gSWYgc28sIHdlJ2xsXHJcblx0XHRcdC8vIGFzc3VtZSB0aGUgdXNlciBoaXQgdGhlIGZvcndhcmQvYmFjayBidXR0b24gYW5kIHdpbGwgdHJ5IHRvIG1hdGNoIHRoZVxyXG5cdFx0XHQvLyB0cmFuc2l0aW9uIGFjY29yZGluZ2x5LlxyXG5cdFx0XHRpZiAoIHNldHRpbmdzLmZyb21IYXNoQ2hhbmdlICkge1xyXG5cdFx0XHRcdGhpc3RvcnlEaXIgPSBzZXR0aW5ncy5kaXJlY3Rpb24gPT09IFwiYmFja1wiID8gLTEgOiAxO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBLaWxsIHRoZSBrZXlib2FyZC5cclxuXHRcdFx0Ly8gWFhYX2pibGFzOiBXZSBuZWVkIHRvIHN0b3AgY3Jhd2xpbmcgdGhlIGVudGlyZSBkb2N1bWVudCB0byBraWxsIGZvY3VzLlxyXG5cdFx0XHQvLyAgICAgICAgICAgIEluc3RlYWQsIHdlIHNob3VsZCBiZSB0cmFja2luZyBmb2N1cyB3aXRoIGEgZGVsZWdhdGUoKVxyXG5cdFx0XHQvLyAgICAgICAgICAgIGhhbmRsZXIgc28gd2UgYWxyZWFkeSBoYXZlIHRoZSBlbGVtZW50IGluIGhhbmQgYXQgdGhpc1xyXG5cdFx0XHQvLyAgICAgICAgICAgIHBvaW50LlxyXG5cdFx0XHQvLyBXcmFwIHRoaXMgaW4gYSB0cnkvY2F0Y2ggYmxvY2sgc2luY2UgSUU5IHRocm93IFwiVW5zcGVjaWZpZWQgZXJyb3JcIiBpZlxyXG5cdFx0XHQvLyBkb2N1bWVudC5hY3RpdmVFbGVtZW50IGlzIHVuZGVmaW5lZCB3aGVuIHdlIGFyZSBpbiBhbiBJRnJhbWUuXHJcblx0XHRcdHRyeSB7XHJcblx0XHRcdFx0aWYgKCBkb2N1bWVudC5hY3RpdmVFbGVtZW50ICYmXHJcblx0XHRcdFx0XHRkb2N1bWVudC5hY3RpdmVFbGVtZW50Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgIT09IFwiYm9keVwiICkge1xyXG5cclxuXHRcdFx0XHRcdCQoIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgKS5ibHVyKCk7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdCQoIFwiaW5wdXQ6Zm9jdXMsIHRleHRhcmVhOmZvY3VzLCBzZWxlY3Q6Zm9jdXNcIiApLmJsdXIoKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0gY2F0Y2goIGUgKSB7fVxyXG5cclxuXHRcdFx0Ly8gUmVjb3JkIHdoZXRoZXIgd2UgYXJlIGF0IGEgcGxhY2UgaW4gaGlzdG9yeSB3aGVyZSBhIGRpYWxvZyB1c2VkIHRvIGJlIC1cclxuXHRcdFx0Ly8gaWYgc28sIGRvIG5vdCBhZGQgYSBuZXcgaGlzdG9yeSBlbnRyeSBhbmQgZG8gbm90IGNoYW5nZSB0aGUgaGFzaCBlaXRoZXJcclxuXHRcdFx0YWxyZWFkeVRoZXJlID0gZmFsc2U7XHJcblxyXG5cdFx0XHQvLyBJZiB3ZSdyZSBkaXNwbGF5aW5nIHRoZSBwYWdlIGFzIGEgZGlhbG9nLCB3ZSBkb24ndCB3YW50IHRoZSB1cmxcclxuXHRcdFx0Ly8gZm9yIHRoZSBkaWFsb2cgY29udGVudCB0byBiZSB1c2VkIGluIHRoZSBoYXNoLiBJbnN0ZWFkLCB3ZSB3YW50XHJcblx0XHRcdC8vIHRvIGFwcGVuZCB0aGUgZGlhbG9nSGFzaEtleSB0byB0aGUgdXJsIG9mIHRoZSBjdXJyZW50IHBhZ2UuXHJcblx0XHRcdGlmICggaXNEaWFsb2cgJiYgYWN0aXZlICkge1xyXG5cdFx0XHRcdC8vIG9uIHRoZSBpbml0aWFsIHBhZ2UgbG9hZCBhY3RpdmUudXJsIGlzIHVuZGVmaW5lZCBhbmQgaW4gdGhhdCBjYXNlXHJcblx0XHRcdFx0Ly8gc2hvdWxkIGJlIGFuIGVtcHR5IHN0cmluZy4gTW92aW5nIHRoZSB1bmRlZmluZWQgLT4gZW1wdHkgc3RyaW5nIGJhY2tcclxuXHRcdFx0XHQvLyBpbnRvIHVybEhpc3RvcnkuYWRkTmV3IHNlZW1lZCBpbXBydWRlbnQgZ2l2ZW4gdW5kZWZpbmVkIGJldHRlclxyXG5cdFx0XHRcdC8vIHJlcHJlc2VudHMgdGhlIHVybCBzdGF0ZVxyXG5cclxuXHRcdFx0XHQvLyBJZiB3ZSBhcmUgYXQgYSBwbGFjZSBpbiBoaXN0b3J5IHRoYXQgb25jZSBiZWxvbmdlZCB0byBhIGRpYWxvZywgcmV1c2VcclxuXHRcdFx0XHQvLyB0aGlzIHN0YXRlIHdpdGhvdXQgYWRkaW5nIHRvIHVybEhpc3RvcnkgYW5kIHdpdGhvdXQgbW9kaWZ5aW5nIHRoZVxyXG5cdFx0XHRcdC8vIGhhc2guIEhvd2V2ZXIsIGlmIGEgZGlhbG9nIGlzIGFscmVhZHkgZGlzcGxheWVkIGF0IHRoaXMgcG9pbnQsIGFuZFxyXG5cdFx0XHRcdC8vIHdlJ3JlIGFib3V0IHRvIGRpc3BsYXkgYW5vdGhlciBkaWFsb2csIHRoZW4gd2UgbXVzdCBhZGQgYW5vdGhlciBoYXNoXHJcblx0XHRcdFx0Ly8gYW5kIGhpc3RvcnkgZW50cnkgb24gdG9wIHNvIHRoYXQgb25lIG1heSBuYXZpZ2F0ZSBiYWNrIHRvIHRoZVxyXG5cdFx0XHRcdC8vIG9yaWdpbmFsIGRpYWxvZ1xyXG5cdFx0XHRcdGlmICggYWN0aXZlLnVybCAmJlxyXG5cdFx0XHRcdFx0YWN0aXZlLnVybC5pbmRleE9mKCAkLm1vYmlsZS5kaWFsb2dIYXNoS2V5ICkgPiAtMSAmJlxyXG5cdFx0XHRcdFx0dGhpcy5hY3RpdmVQYWdlICYmXHJcblx0XHRcdFx0XHQhdGhpcy5hY3RpdmVQYWdlLmhhc0NsYXNzKCBcInVpLWRpYWxvZ1wiICkgJiZcclxuXHRcdFx0XHRcdCQubW9iaWxlLm5hdmlnYXRlLmhpc3RvcnkuYWN0aXZlSW5kZXggPiAwICkge1xyXG5cclxuXHRcdFx0XHRcdHNldHRpbmdzLmNoYW5nZUhhc2ggPSBmYWxzZTtcclxuXHRcdFx0XHRcdGFscmVhZHlUaGVyZSA9IHRydWU7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHQvLyBOb3JtYWxseSwgd2UgdGFjayBvbiBhIGRpYWxvZyBoYXNoIGtleSwgYnV0IGlmIHRoaXMgaXMgdGhlIGxvY2F0aW9uXHJcblx0XHRcdFx0Ly8gb2YgYSBzdGFsZSBkaWFsb2csIHdlIHJldXNlIHRoZSBVUkwgZnJvbSB0aGUgZW50cnlcclxuXHRcdFx0XHR1cmwgPSAoIGFjdGl2ZS51cmwgfHwgXCJcIiApO1xyXG5cclxuXHRcdFx0XHQvLyBhY2NvdW50IGZvciBhYnNvbHV0ZSB1cmxzIGluc3RlYWQgb2YganVzdCByZWxhdGl2ZSB1cmxzIHVzZSBhcyBoYXNoZXNcclxuXHRcdFx0XHRpZiAoICFhbHJlYWR5VGhlcmUgJiYgdXJsLmluZGV4T2YoXCIjXCIpID4gLTEgKSB7XHJcblx0XHRcdFx0XHR1cmwgKz0gJC5tb2JpbGUuZGlhbG9nSGFzaEtleTtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0dXJsICs9IFwiI1wiICsgJC5tb2JpbGUuZGlhbG9nSGFzaEtleTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIGlmIHRpdGxlIGVsZW1lbnQgd2Fzbid0IGZvdW5kLCB0cnkgdGhlIHBhZ2UgZGl2IGRhdGEgYXR0ciB0b29cclxuXHRcdFx0Ly8gSWYgdGhpcyBpcyBhIGRlZXAtbGluayBvciBhIHJlbG9hZCAoIGFjdGl2ZSA9PT0gdW5kZWZpbmVkICkgdGhlbiBqdXN0XHJcblx0XHRcdC8vIHVzZSBwYWdlVGl0bGVcclxuXHRcdFx0bmV3UGFnZVRpdGxlID0gKCAhYWN0aXZlICkgPyBwYWdlVGl0bGUgOiB0b1BhZ2UuanFtRGF0YSggXCJ0aXRsZVwiICkgfHxcclxuXHRcdFx0XHR0b1BhZ2UuY2hpbGRyZW4oIFwiOmpxbURhdGEocm9sZT0naGVhZGVyJylcIiApLmZpbmQoIFwiLnVpLXRpdGxlXCIgKS50ZXh0KCk7XHJcblx0XHRcdGlmICggISFuZXdQYWdlVGl0bGUgJiYgcGFnZVRpdGxlID09PSBkb2N1bWVudC50aXRsZSApIHtcclxuXHRcdFx0XHRwYWdlVGl0bGUgPSBuZXdQYWdlVGl0bGU7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKCAhdG9QYWdlLmpxbURhdGEoIFwidGl0bGVcIiApICkge1xyXG5cdFx0XHRcdHRvUGFnZS5qcW1EYXRhKCBcInRpdGxlXCIsIHBhZ2VUaXRsZSApO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBNYWtlIHN1cmUgd2UgaGF2ZSBhIHRyYW5zaXRpb24gZGVmaW5lZC5cclxuXHRcdFx0c2V0dGluZ3MudHJhbnNpdGlvbiA9IHNldHRpbmdzLnRyYW5zaXRpb24gfHxcclxuXHRcdFx0XHQoICggaGlzdG9yeURpciAmJiAhYWN0aXZlSXNJbml0aWFsUGFnZSApID8gYWN0aXZlLnRyYW5zaXRpb24gOiB1bmRlZmluZWQgKSB8fFxyXG5cdFx0XHRcdCggaXNEaWFsb2cgPyAkLm1vYmlsZS5kZWZhdWx0RGlhbG9nVHJhbnNpdGlvbiA6ICQubW9iaWxlLmRlZmF1bHRQYWdlVHJhbnNpdGlvbiApO1xyXG5cclxuXHRcdFx0Ly9hZGQgcGFnZSB0byBoaXN0b3J5IHN0YWNrIGlmIGl0J3Mgbm90IGJhY2sgb3IgZm9yd2FyZFxyXG5cdFx0XHRpZiAoICFoaXN0b3J5RGlyICYmIGFscmVhZHlUaGVyZSApIHtcclxuXHRcdFx0XHQkLm1vYmlsZS5uYXZpZ2F0ZS5oaXN0b3J5LmdldEFjdGl2ZSgpLnBhZ2VVcmwgPSBwYWdlVXJsO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBTZXQgdGhlIGxvY2F0aW9uIGhhc2guXHJcblx0XHRcdGlmICggdXJsICYmICFzZXR0aW5ncy5mcm9tSGFzaENoYW5nZSApIHtcclxuXHJcblx0XHRcdFx0Ly8gcmVidWlsZGluZyB0aGUgaGFzaCBoZXJlIHNpbmNlIHdlIGxvb3NlIGl0IGVhcmxpZXIgb25cclxuXHRcdFx0XHQvLyBUT0RPIHByZXNlcnZlIHRoZSBvcmlnaW5hbGx5IHBhc3NlZCBpbiBwYXRoXHJcblx0XHRcdFx0aWYgKCAhJC5tb2JpbGUucGF0aC5pc1BhdGgoIHVybCApICYmIHVybC5pbmRleE9mKCBcIiNcIiApIDwgMCApIHtcclxuXHRcdFx0XHRcdHVybCA9IFwiI1wiICsgdXJsO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Ly8gVE9ETyB0aGUgcHJvcGVydHkgbmFtZXMgaGVyZSBhcmUganVzdCBzaWxseVxyXG5cdFx0XHRcdHBhcmFtcyA9IHtcclxuXHRcdFx0XHRcdHRyYW5zaXRpb246IHNldHRpbmdzLnRyYW5zaXRpb24sXHJcblx0XHRcdFx0XHR0aXRsZTogcGFnZVRpdGxlLFxyXG5cdFx0XHRcdFx0cGFnZVVybDogcGFnZVVybCxcclxuXHRcdFx0XHRcdHJvbGU6IHNldHRpbmdzLnJvbGVcclxuXHRcdFx0XHR9O1xyXG5cclxuXHRcdFx0XHRpZiAoIHNldHRpbmdzLmNoYW5nZUhhc2ggIT09IGZhbHNlICYmICQubW9iaWxlLmhhc2hMaXN0ZW5pbmdFbmFibGVkICkge1xyXG5cdFx0XHRcdFx0JC5tb2JpbGUubmF2aWdhdGUoIHRoaXMud2luZG93WyAwIF0uZW5jb2RlVVJJKCB1cmwgKSwgcGFyYW1zLCB0cnVlKTtcclxuXHRcdFx0XHR9IGVsc2UgaWYgKCB0b1BhZ2VbIDAgXSAhPT0gJC5tb2JpbGUuZmlyc3RQYWdlWyAwIF0gKSB7XHJcblx0XHRcdFx0XHQkLm1vYmlsZS5uYXZpZ2F0ZS5oaXN0b3J5LmFkZCggdXJsLCBwYXJhbXMgKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vc2V0IHBhZ2UgdGl0bGVcclxuXHRcdFx0ZG9jdW1lbnQudGl0bGUgPSBwYWdlVGl0bGU7XHJcblxyXG5cdFx0XHQvL3NldCBcInRvUGFnZVwiIGFzIGFjdGl2ZVBhZ2UgZGVwcmVjYXRlZCBpbiAxLjQgcmVtb3ZlIGluIDEuNVxyXG5cdFx0XHQkLm1vYmlsZS5hY3RpdmVQYWdlID0gdG9QYWdlO1xyXG5cclxuXHRcdFx0Ly9uZXcgd2F5IHRvIGhhbmRsZSBhY3RpdmVQYWdlXHJcblx0XHRcdHRoaXMuYWN0aXZlUGFnZSA9IHRvUGFnZTtcclxuXHJcblx0XHRcdC8vIElmIHdlJ3JlIG5hdmlnYXRpbmcgYmFjayBpbiB0aGUgVVJMIGhpc3RvcnksIHNldCByZXZlcnNlIGFjY29yZGluZ2x5LlxyXG5cdFx0XHRzZXR0aW5ncy5yZXZlcnNlID0gc2V0dGluZ3MucmV2ZXJzZSB8fCBoaXN0b3J5RGlyIDwgMDtcclxuXHJcblx0XHRcdGNzc1RyYW5zaXRpb25EZWZlcnJlZCA9ICQuRGVmZXJyZWQoKTtcclxuXHJcblx0XHRcdHRoaXMuX2Nzc1RyYW5zaXRpb24odG9QYWdlLCBmcm9tUGFnZSwge1xyXG5cdFx0XHRcdHRyYW5zaXRpb246IHNldHRpbmdzLnRyYW5zaXRpb24sXHJcblx0XHRcdFx0cmV2ZXJzZTogc2V0dGluZ3MucmV2ZXJzZSxcclxuXHRcdFx0XHRkZWZlcnJlZDogY3NzVHJhbnNpdGlvbkRlZmVycmVkXHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0Y3NzVHJhbnNpdGlvbkRlZmVycmVkLmRvbmUoJC5wcm94eShmdW5jdGlvbiggbmFtZSwgcmV2ZXJzZSwgJHRvLCAkZnJvbSwgYWxyZWFkeUZvY3VzZWQgKSB7XHJcblx0XHRcdFx0JC5tb2JpbGUucmVtb3ZlQWN0aXZlTGlua0NsYXNzKCk7XHJcblxyXG5cdFx0XHRcdC8vaWYgdGhlcmUncyBhIGR1cGxpY2F0ZUNhY2hlZFBhZ2UsIHJlbW92ZSBpdCBmcm9tIHRoZSBET00gbm93IHRoYXQgaXQncyBoaWRkZW5cclxuXHRcdFx0XHRpZiAoIHNldHRpbmdzLmR1cGxpY2F0ZUNhY2hlZFBhZ2UgKSB7XHJcblx0XHRcdFx0XHRzZXR0aW5ncy5kdXBsaWNhdGVDYWNoZWRQYWdlLnJlbW92ZSgpO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Ly8gZGVzcGl0ZSB2aXNpYmlsaXR5OiBoaWRkZW4gYWRkcmVzc2VzIGlzc3VlICMyOTY1XHJcblx0XHRcdFx0Ly8gaHR0cHM6Ly9naXRodWIuY29tL2pxdWVyeS9qcXVlcnktbW9iaWxlL2lzc3Vlcy8yOTY1XHJcblx0XHRcdFx0aWYgKCAhYWxyZWFkeUZvY3VzZWQgKSB7XHJcblx0XHRcdFx0XHQkLm1vYmlsZS5mb2N1c1BhZ2UoIHRvUGFnZSApO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0dGhpcy5fcmVsZWFzZVRyYW5zaXRpb25Mb2NrKCk7XHJcblx0XHRcdFx0dGhpcy5fdHJpZ2dlcldpdGhEZXByZWNhdGVkKCBcInRyYW5zaXRpb25cIiwgdHJpZ2dlckRhdGEgKTtcclxuXHRcdFx0XHR0aGlzLl90cmlnZ2VyV2l0aERlcHJlY2F0ZWQoIFwiY2hhbmdlXCIsIHRyaWdnZXJEYXRhICk7XHJcblx0XHRcdH0sIHRoaXMpKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0Ly8gZGV0ZXJtaW5lIHRoZSBjdXJyZW50IGJhc2UgdXJsXHJcblx0XHRfZmluZEJhc2VXaXRoRGVmYXVsdDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHZhciBjbG9zZXN0QmFzZSA9ICggdGhpcy5hY3RpdmVQYWdlICYmXHJcblx0XHRcdCQubW9iaWxlLmdldENsb3Nlc3RCYXNlVXJsKCB0aGlzLmFjdGl2ZVBhZ2UgKSApO1xyXG5cdFx0cmV0dXJuIGNsb3Nlc3RCYXNlIHx8ICQubW9iaWxlLnBhdGguZG9jdW1lbnRCYXNlLmhyZWZOb0hhc2g7XHJcblx0XHR9XHJcblx0fSk7XHJcblxyXG5cdC8vIFRoZSBmb2xsb3dpbmcgaGFuZGxlcnMgc2hvdWxkIGJlIGJvdW5kIGFmdGVyIG1vYmlsZWluaXQgaGFzIGJlZW4gdHJpZ2dlcmVkXHJcblx0Ly8gdGhlIGZvbGxvd2luZyBkZWZlcnJlZCBpcyByZXNvbHZlZCBpbiB0aGUgaW5pdCBmaWxlXHJcblx0JC5tb2JpbGUubmF2cmVhZHlEZWZlcnJlZCA9ICQuRGVmZXJyZWQoKTtcclxuXHJcblx0Ly90aGVzZSB2YXJpYWJsZXMgbWFrZSBhbGwgcGFnZSBjb250YWluZXJzIHVzZSB0aGUgc2FtZSBxdWV1ZSBhbmQgb25seSBuYXZpZ2F0ZSBvbmUgYXQgYSB0aW1lXHJcblx0Ly8gcXVldWUgdG8gaG9sZCBzaW11bHRhbmlvdXMgcGFnZSB0cmFuc2l0aW9uc1xyXG5cdHZhciBwYWdlVHJhbnNpdGlvblF1ZXVlID0gW10sXHJcblxyXG5cdFx0Ly8gaW5kaWNhdGVzIHdoZXRoZXIgb3Igbm90IHBhZ2UgaXMgaW4gcHJvY2VzcyBvZiB0cmFuc2l0aW9uaW5nXHJcblx0XHRpc1BhZ2VUcmFuc2l0aW9uaW5nID0gZmFsc2U7XHJcblxyXG59KSggalF1ZXJ5ICk7XHJcblxyXG4oZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcclxuXHJcblx0XHQvLyByZXNvbHZlZCBvbiBkb21yZWFkeVxyXG5cdHZhciBkb21yZWFkeURlZmVycmVkID0gJC5EZWZlcnJlZCgpLFxyXG5cclxuXHRcdC8vIHJlc29sdmVkIGFuZCBudWxsZWQgb24gd2luZG93LmxvYWQoKVxyXG5cdFx0bG9hZERlZmVycmVkID0gJC5EZWZlcnJlZCgpLFxyXG5cclxuXHRcdC8vIGZ1bmN0aW9uIHRoYXQgcmVzb2x2ZXMgdGhlIGFib3ZlIGRlZmVycmVkXHJcblx0XHRwYWdlSXNGdWxseUxvYWRlZCA9IGZ1bmN0aW9uKCkge1xyXG5cclxuXHRcdFx0Ly8gUmVzb2x2ZSBhbmQgbnVsbCB0aGUgZGVmZXJyZWRcclxuXHRcdFx0bG9hZERlZmVycmVkLnJlc29sdmUoKTtcclxuXHRcdFx0bG9hZERlZmVycmVkID0gbnVsbDtcclxuXHRcdH0sXHJcblxyXG5cdFx0ZG9jdW1lbnRVcmwgPSAkLm1vYmlsZS5wYXRoLmRvY3VtZW50VXJsLFxyXG5cclxuXHRcdC8vIHVzZWQgdG8gdHJhY2sgbGFzdCB2Y2xpY2tlZCBlbGVtZW50IHRvIG1ha2Ugc3VyZSBpdHMgdmFsdWUgaXMgYWRkZWQgdG8gZm9ybSBkYXRhXHJcblx0XHQkbGFzdFZDbGlja2VkID0gbnVsbDtcclxuXHJcblx0LyogRXZlbnQgQmluZGluZ3MgLSBoYXNoY2hhbmdlLCBzdWJtaXQsIGFuZCBjbGljayAqL1xyXG5cdGZ1bmN0aW9uIGZpbmRDbG9zZXN0TGluayggZWxlIClcdHtcclxuXHRcdHdoaWxlICggZWxlICkge1xyXG5cdFx0XHQvLyBMb29rIGZvciB0aGUgY2xvc2VzdCBlbGVtZW50IHdpdGggYSBub2RlTmFtZSBvZiBcImFcIi5cclxuXHRcdFx0Ly8gTm90ZSB0aGF0IHdlIGFyZSBjaGVja2luZyBpZiB3ZSBoYXZlIGEgdmFsaWQgbm9kZU5hbWVcclxuXHRcdFx0Ly8gYmVmb3JlIGF0dGVtcHRpbmcgdG8gYWNjZXNzIGl0LiBUaGlzIGlzIGJlY2F1c2UgdGhlXHJcblx0XHRcdC8vIG5vZGUgd2UgZ2V0IGNhbGxlZCB3aXRoIGNvdWxkIGhhdmUgb3JpZ2luYXRlZCBmcm9tIHdpdGhpblxyXG5cdFx0XHQvLyBhbiBlbWJlZGRlZCBTVkcgZG9jdW1lbnQgd2hlcmUgc29tZSBzeW1ib2wgaW5zdGFuY2UgZWxlbWVudHNcclxuXHRcdFx0Ly8gZG9uJ3QgaGF2ZSBub2RlTmFtZSBkZWZpbmVkIG9uIHRoZW0sIG9yIHN0cmluZ3MgYXJlIG9mIHR5cGVcclxuXHRcdFx0Ly8gU1ZHQW5pbWF0ZWRTdHJpbmcuXHJcblx0XHRcdGlmICggKCB0eXBlb2YgZWxlLm5vZGVOYW1lID09PSBcInN0cmluZ1wiICkgJiYgZWxlLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09IFwiYVwiICkge1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHR9XHJcblx0XHRcdGVsZSA9IGVsZS5wYXJlbnROb2RlO1xyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIGVsZTtcclxuXHR9XHJcblxyXG5cdCQubW9iaWxlLmxvYWRQYWdlID0gZnVuY3Rpb24oIHVybCwgb3B0cyApIHtcclxuXHRcdHZhciBjb250YWluZXI7XHJcblxyXG5cdFx0b3B0cyA9IG9wdHMgfHwge307XHJcblx0XHRjb250YWluZXIgPSAoIG9wdHMucGFnZUNvbnRhaW5lciB8fCAkLm1vYmlsZS5wYWdlQ29udGFpbmVyICk7XHJcblxyXG5cdFx0Ly8gY3JlYXRlIHRoZSBkZWZlcnJlZCB0aGF0IHdpbGwgYmUgc3VwcGxpZWQgdG8gbG9hZFBhZ2UgY2FsbGVyc1xyXG5cdFx0Ly8gYW5kIHJlc29sdmVkIGJ5IHRoZSBjb250ZW50IHdpZGdldCdzIGxvYWQgbWV0aG9kXHJcblx0XHRvcHRzLmRlZmVycmVkID0gJC5EZWZlcnJlZCgpO1xyXG5cclxuXHRcdC8vIFByZWZlcnJpbmcgdG8gYWxsb3cgZXhjZXB0aW9ucyBmb3IgdW5pbml0aWFsaXplZCBvcHRzLnBhZ2VDb250YWluZXJcclxuXHRcdC8vIHdpZGdldHMgc28gd2Uga25vdyBpZiB3ZSBuZWVkIHRvIGZvcmNlIGluaXQgaGVyZSBmb3IgdXNlcnNcclxuXHRcdGNvbnRhaW5lci5wYWdlY29udGFpbmVyKCBcImxvYWRcIiwgdXJsLCBvcHRzICk7XHJcblxyXG5cdFx0Ly8gcHJvdmlkZSB0aGUgZGVmZXJyZWRcclxuXHRcdHJldHVybiBvcHRzLmRlZmVycmVkLnByb21pc2UoKTtcclxuXHR9O1xyXG5cclxuXHQvL2RlZmluZSB2YXJzIGZvciBpbnRlcmFsIHVzZVxyXG5cclxuXHQvKiBpbnRlcm5hbCB1dGlsaXR5IGZ1bmN0aW9ucyAqL1xyXG5cclxuXHQvLyBOT1RFIElzc3VlICM0OTUwIEFuZHJvaWQgcGhvbmVnYXAgZG9lc24ndCBuYXZpZ2F0ZSBiYWNrIHByb3Blcmx5XHJcblx0Ly8gICAgICB3aGVuIGEgZnVsbCBwYWdlIHJlZnJlc2ggaGFzIHRha2VuIHBsYWNlLiBJdCBhcHBlYXJzIHRoYXQgaGFzaGNoYW5nZVxyXG5cdC8vICAgICAgYW5kIHJlcGxhY2VzdGF0ZSBoaXN0b3J5IGFsdGVyYXRpb25zIHdvcmsgZmluZSBidXQgd2UgbmVlZCB0byBzdXBwb3J0XHJcblx0Ly8gICAgICBib3RoIGZvcm1zIG9mIGhpc3RvcnkgdHJhdmVyc2FsIGluIG91ciBjb2RlIHRoYXQgdXNlcyBiYWNrd2FyZCBoaXN0b3J5XHJcblx0Ly8gICAgICBtb3ZlbWVudFxyXG5cdCQubW9iaWxlLmJhY2sgPSBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBuYXYgPSB3aW5kb3cubmF2aWdhdG9yO1xyXG5cclxuXHRcdC8vIGlmIHRoZSBzZXR0aW5nIGlzIG9uIGFuZCB0aGUgbmF2aWdhdG9yIG9iamVjdCBpc1xyXG5cdFx0Ly8gYXZhaWxhYmxlIHVzZSB0aGUgcGhvbmVnYXAgbmF2aWdhdGlvbiBjYXBhYmlsaXR5XHJcblx0XHRpZiAoIHRoaXMucGhvbmVnYXBOYXZpZ2F0aW9uRW5hYmxlZCAmJlxyXG5cdFx0XHRuYXYgJiZcclxuXHRcdFx0bmF2LmFwcCAmJlxyXG5cdFx0XHRuYXYuYXBwLmJhY2tIaXN0b3J5ICkge1xyXG5cdFx0XHRuYXYuYXBwLmJhY2tIaXN0b3J5KCk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHQkLm1vYmlsZS5wYWdlQ29udGFpbmVyLnBhZ2Vjb250YWluZXIoIFwiYmFja1wiICk7XHJcblx0XHR9XHJcblx0fTtcclxuXHJcblx0Ly8gRGlyZWN0IGZvY3VzIHRvIHRoZSBwYWdlIHRpdGxlLCBvciBvdGhlcndpc2UgZmlyc3QgZm9jdXNhYmxlIGVsZW1lbnRcclxuXHQkLm1vYmlsZS5mb2N1c1BhZ2UgPSBmdW5jdGlvbiAoIHBhZ2UgKSB7XHJcblx0XHR2YXIgYXV0b2ZvY3VzID0gcGFnZS5maW5kKCBcIlthdXRvZm9jdXNdXCIgKSxcclxuXHRcdFx0cGFnZVRpdGxlID0gcGFnZS5maW5kKCBcIi51aS10aXRsZTplcSgwKVwiICk7XHJcblxyXG5cdFx0aWYgKCBhdXRvZm9jdXMubGVuZ3RoICkge1xyXG5cdFx0XHRhdXRvZm9jdXMuZm9jdXMoKTtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggcGFnZVRpdGxlLmxlbmd0aCApIHtcclxuXHRcdFx0cGFnZVRpdGxlLmZvY3VzKCk7XHJcblx0XHR9IGVsc2V7XHJcblx0XHRcdHBhZ2UuZm9jdXMoKTtcclxuXHRcdH1cclxuXHR9O1xyXG5cclxuXHQvLyBOby1vcCBpbXBsZW1lbnRhdGlvbiBvZiB0cmFuc2l0aW9uIGRlZ3JhZGF0aW9uXHJcblx0JC5tb2JpbGUuX21heWJlRGVncmFkZVRyYW5zaXRpb24gPSAkLm1vYmlsZS5fbWF5YmVEZWdyYWRlVHJhbnNpdGlvbiB8fCBmdW5jdGlvbiggdHJhbnNpdGlvbiApIHtcclxuXHRcdHJldHVybiB0cmFuc2l0aW9uO1xyXG5cdH07XHJcblxyXG5cdC8vIEV4cG9zZWQgJC5tb2JpbGUgbWV0aG9kc1xyXG5cclxuXHQkLm1vYmlsZS5jaGFuZ2VQYWdlID0gZnVuY3Rpb24oIHRvLCBvcHRpb25zICkge1xyXG5cdFx0JC5tb2JpbGUucGFnZUNvbnRhaW5lci5wYWdlY29udGFpbmVyKCBcImNoYW5nZVwiLCB0bywgb3B0aW9ucyApO1xyXG5cdH07XHJcblxyXG5cdCQubW9iaWxlLmNoYW5nZVBhZ2UuZGVmYXVsdHMgPSB7XHJcblx0XHR0cmFuc2l0aW9uOiB1bmRlZmluZWQsXHJcblx0XHRyZXZlcnNlOiBmYWxzZSxcclxuXHRcdGNoYW5nZUhhc2g6IHRydWUsXHJcblx0XHRmcm9tSGFzaENoYW5nZTogZmFsc2UsXHJcblx0XHRyb2xlOiB1bmRlZmluZWQsIC8vIEJ5IGRlZmF1bHQgd2UgcmVseSBvbiB0aGUgcm9sZSBkZWZpbmVkIGJ5IHRoZSBAZGF0YS1yb2xlIGF0dHJpYnV0ZS5cclxuXHRcdGR1cGxpY2F0ZUNhY2hlZFBhZ2U6IHVuZGVmaW5lZCxcclxuXHRcdHBhZ2VDb250YWluZXI6IHVuZGVmaW5lZCxcclxuXHRcdHNob3dMb2FkTXNnOiB0cnVlLCAvL2xvYWRpbmcgbWVzc2FnZSBzaG93cyBieSBkZWZhdWx0IHdoZW4gcGFnZXMgYXJlIGJlaW5nIGZldGNoZWQgZHVyaW5nIGNoYW5nZVBhZ2VcclxuXHRcdGRhdGFVcmw6IHVuZGVmaW5lZCxcclxuXHRcdGZyb21QYWdlOiB1bmRlZmluZWQsXHJcblx0XHRhbGxvd1NhbWVQYWdlVHJhbnNpdGlvbjogZmFsc2VcclxuXHR9O1xyXG5cclxuXHQkLm1vYmlsZS5fcmVnaXN0ZXJJbnRlcm5hbEV2ZW50cyA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIGdldEFqYXhGb3JtRGF0YSA9IGZ1bmN0aW9uKCAkZm9ybSwgY2FsY3VsYXRlT25seSApIHtcclxuXHRcdFx0dmFyIHVybCwgcmV0ID0gdHJ1ZSwgZm9ybURhdGEsIHZjbGlja2VkTmFtZSwgbWV0aG9kO1xyXG5cdFx0XHRpZiAoICEkLm1vYmlsZS5hamF4RW5hYmxlZCB8fFxyXG5cdFx0XHRcdFx0Ly8gdGVzdCB0aGF0IHRoZSBmb3JtIGlzLCBpdHNlbGYsIGFqYXggZmFsc2VcclxuXHRcdFx0XHRcdCRmb3JtLmlzKCBcIjpqcW1EYXRhKGFqYXg9J2ZhbHNlJylcIiApIHx8XHJcblx0XHRcdFx0XHQvLyB0ZXN0IHRoYXQgJC5tb2JpbGUuaWdub3JlQ29udGVudEVuYWJsZWQgaXMgc2V0IGFuZFxyXG5cdFx0XHRcdFx0Ly8gdGhlIGZvcm0gb3Igb25lIG9mIGl0J3MgcGFyZW50cyBpcyBhamF4PWZhbHNlXHJcblx0XHRcdFx0XHQhJGZvcm0uanFtSGlqYWNrYWJsZSgpLmxlbmd0aCB8fFxyXG5cdFx0XHRcdFx0JGZvcm0uYXR0ciggXCJ0YXJnZXRcIiApICkge1xyXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0dXJsID0gKCAkbGFzdFZDbGlja2VkICYmICRsYXN0VkNsaWNrZWQuYXR0ciggXCJmb3JtYWN0aW9uXCIgKSApIHx8XHJcblx0XHRcdFx0JGZvcm0uYXR0ciggXCJhY3Rpb25cIiApO1xyXG5cdFx0XHRtZXRob2QgPSAoICRmb3JtLmF0dHIoIFwibWV0aG9kXCIgKSB8fCBcImdldFwiICkudG9Mb3dlckNhc2UoKTtcclxuXHJcblx0XHRcdC8vIElmIG5vIGFjdGlvbiBpcyBzcGVjaWZpZWQsIGJyb3dzZXJzIGRlZmF1bHQgdG8gdXNpbmcgdGhlXHJcblx0XHRcdC8vIFVSTCBvZiB0aGUgZG9jdW1lbnQgY29udGFpbmluZyB0aGUgZm9ybS4gU2luY2Ugd2UgZHluYW1pY2FsbHlcclxuXHRcdFx0Ly8gcHVsbCBpbiBwYWdlcyBmcm9tIGV4dGVybmFsIGRvY3VtZW50cywgdGhlIGZvcm0gc2hvdWxkIHN1Ym1pdFxyXG5cdFx0XHQvLyB0byB0aGUgVVJMIGZvciB0aGUgc291cmNlIGRvY3VtZW50IG9mIHRoZSBwYWdlIGNvbnRhaW5pbmdcclxuXHRcdFx0Ly8gdGhlIGZvcm0uXHJcblx0XHRcdGlmICggIXVybCApIHtcclxuXHRcdFx0XHQvLyBHZXQgdGhlIEBkYXRhLXVybCBmb3IgdGhlIHBhZ2UgY29udGFpbmluZyB0aGUgZm9ybS5cclxuXHRcdFx0XHR1cmwgPSAkLm1vYmlsZS5nZXRDbG9zZXN0QmFzZVVybCggJGZvcm0gKTtcclxuXHJcblx0XHRcdFx0Ly8gTk9URTogSWYgdGhlIG1ldGhvZCBpcyBcImdldFwiLCB3ZSBuZWVkIHRvIHN0cmlwIG9mZiB0aGUgcXVlcnkgc3RyaW5nXHJcblx0XHRcdFx0Ly8gYmVjYXVzZSBpdCB3aWxsIGdldCByZXBsYWNlZCB3aXRoIHRoZSBuZXcgZm9ybSBkYXRhLiBTZWUgaXNzdWUgIzU3MTAuXHJcblx0XHRcdFx0aWYgKCBtZXRob2QgPT09IFwiZ2V0XCIgKSB7XHJcblx0XHRcdFx0XHR1cmwgPSAkLm1vYmlsZS5wYXRoLnBhcnNlVXJsKCB1cmwgKS5ocmVmTm9TZWFyY2g7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRpZiAoIHVybCA9PT0gJC5tb2JpbGUucGF0aC5kb2N1bWVudEJhc2UuaHJlZk5vSGFzaCApIHtcclxuXHRcdFx0XHRcdC8vIFRoZSB1cmwgd2UgZ290IGJhY2sgbWF0Y2hlcyB0aGUgZG9jdW1lbnQgYmFzZSxcclxuXHRcdFx0XHRcdC8vIHdoaWNoIG1lYW5zIHRoZSBwYWdlIG11c3QgYmUgYW4gaW50ZXJuYWwvZW1iZWRkZWQgcGFnZSxcclxuXHRcdFx0XHRcdC8vIHNvIGRlZmF1bHQgdG8gdXNpbmcgdGhlIGFjdHVhbCBkb2N1bWVudCB1cmwgYXMgYSBicm93c2VyXHJcblx0XHRcdFx0XHQvLyB3b3VsZC5cclxuXHRcdFx0XHRcdHVybCA9IGRvY3VtZW50VXJsLmhyZWZOb1NlYXJjaDtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHVybCA9ICQubW9iaWxlLnBhdGgubWFrZVVybEFic29sdXRlKCAgdXJsLCAkLm1vYmlsZS5nZXRDbG9zZXN0QmFzZVVybCggJGZvcm0gKSApO1xyXG5cclxuXHRcdFx0aWYgKCAoICQubW9iaWxlLnBhdGguaXNFeHRlcm5hbCggdXJsICkgJiYgISQubW9iaWxlLnBhdGguaXNQZXJtaXR0ZWRDcm9zc0RvbWFpblJlcXVlc3QoIGRvY3VtZW50VXJsLCB1cmwgKSApICkge1xyXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aWYgKCAhY2FsY3VsYXRlT25seSApIHtcclxuXHRcdFx0XHRmb3JtRGF0YSA9ICRmb3JtLnNlcmlhbGl6ZUFycmF5KCk7XHJcblxyXG5cdFx0XHRcdGlmICggJGxhc3RWQ2xpY2tlZCAmJiAkbGFzdFZDbGlja2VkWyAwIF0uZm9ybSA9PT0gJGZvcm1bIDAgXSApIHtcclxuXHRcdFx0XHRcdHZjbGlja2VkTmFtZSA9ICRsYXN0VkNsaWNrZWQuYXR0ciggXCJuYW1lXCIgKTtcclxuXHRcdFx0XHRcdGlmICggdmNsaWNrZWROYW1lICkge1xyXG5cdFx0XHRcdFx0XHQvLyBNYWtlIHN1cmUgdGhlIGxhc3QgY2xpY2tlZCBlbGVtZW50IGlzIGluY2x1ZGVkIGluIHRoZSBmb3JtXHJcblx0XHRcdFx0XHRcdCQuZWFjaCggZm9ybURhdGEsIGZ1bmN0aW9uKCBrZXksIHZhbHVlICkge1xyXG5cdFx0XHRcdFx0XHRcdGlmICggdmFsdWUubmFtZSA9PT0gdmNsaWNrZWROYW1lICkge1xyXG5cdFx0XHRcdFx0XHRcdFx0Ly8gVW5zZXQgdmNsaWNrZWROYW1lIC0gd2UndmUgZm91bmQgaXQgaW4gdGhlIHNlcmlhbGl6ZWQgZGF0YSBhbHJlYWR5XHJcblx0XHRcdFx0XHRcdFx0XHR2Y2xpY2tlZE5hbWUgPSBcIlwiO1xyXG5cdFx0XHRcdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcdGlmICggdmNsaWNrZWROYW1lICkge1xyXG5cdFx0XHRcdFx0XHRcdGZvcm1EYXRhLnB1c2goIHsgbmFtZTogdmNsaWNrZWROYW1lLCB2YWx1ZTogJGxhc3RWQ2xpY2tlZC5hdHRyKCBcInZhbHVlXCIgKSB9ICk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdHJldCA9IHtcclxuXHRcdFx0XHRcdHVybDogdXJsLFxyXG5cdFx0XHRcdFx0b3B0aW9uczoge1xyXG5cdFx0XHRcdFx0XHR0eXBlOlx0XHRtZXRob2QsXHJcblx0XHRcdFx0XHRcdGRhdGE6XHRcdCQucGFyYW0oIGZvcm1EYXRhICksXHJcblx0XHRcdFx0XHRcdHRyYW5zaXRpb246XHQkZm9ybS5qcW1EYXRhKCBcInRyYW5zaXRpb25cIiApLFxyXG5cdFx0XHRcdFx0XHRyZXZlcnNlOlx0JGZvcm0uanFtRGF0YSggXCJkaXJlY3Rpb25cIiApID09PSBcInJldmVyc2VcIixcclxuXHRcdFx0XHRcdFx0cmVsb2FkUGFnZTpcdHRydWVcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9O1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRyZXR1cm4gcmV0O1xyXG5cdFx0fTtcclxuXHJcblx0XHQvL2JpbmQgdG8gZm9ybSBzdWJtaXQgZXZlbnRzLCBoYW5kbGUgd2l0aCBBamF4XHJcblx0XHQkLm1vYmlsZS5kb2N1bWVudC5kZWxlZ2F0ZSggXCJmb3JtXCIsIFwic3VibWl0XCIsIGZ1bmN0aW9uKCBldmVudCApIHtcclxuXHRcdFx0dmFyIGZvcm1EYXRhO1xyXG5cclxuXHRcdFx0aWYgKCAhZXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkgKSB7XHJcblx0XHRcdFx0Zm9ybURhdGEgPSBnZXRBamF4Rm9ybURhdGEoICQoIHRoaXMgKSApO1xyXG5cdFx0XHRcdGlmICggZm9ybURhdGEgKSB7XHJcblx0XHRcdFx0XHQkLm1vYmlsZS5jaGFuZ2VQYWdlKCBmb3JtRGF0YS51cmwsIGZvcm1EYXRhLm9wdGlvbnMgKTtcclxuXHRcdFx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHJcblx0XHQvL2FkZCBhY3RpdmUgc3RhdGUgb24gdmNsaWNrXHJcblx0XHQkLm1vYmlsZS5kb2N1bWVudC5iaW5kKCBcInZjbGlja1wiLCBmdW5jdGlvbiggZXZlbnQgKSB7XHJcblx0XHRcdHZhciAkYnRuLCBidG5FbHMsIHRhcmdldCA9IGV2ZW50LnRhcmdldCwgbmVlZENsb3Nlc3QgPSBmYWxzZTtcclxuXHRcdFx0Ly8gaWYgdGhpcyBpc24ndCBhIGxlZnQgY2xpY2sgd2UgZG9uJ3QgY2FyZS4gSXRzIGltcG9ydGFudCB0byBub3RlXHJcblx0XHRcdC8vIHRoYXQgd2hlbiB0aGUgdmlydHVhbCBldmVudCBpcyBnZW5lcmF0ZWQgaXQgd2lsbCBjcmVhdGUgdGhlIHdoaWNoIGF0dHJcclxuXHRcdFx0aWYgKCBldmVudC53aGljaCA+IDEgfHwgISQubW9iaWxlLmxpbmtCaW5kaW5nRW5hYmxlZCApIHtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIFJlY29yZCB0aGF0IHRoaXMgZWxlbWVudCB3YXMgY2xpY2tlZCwgaW4gY2FzZSB3ZSBuZWVkIGl0IGZvciBjb3JyZWN0XHJcblx0XHRcdC8vIGZvcm0gc3VibWlzc2lvbiBkdXJpbmcgdGhlIFwic3VibWl0XCIgaGFuZGxlciBhYm92ZVxyXG5cdFx0XHQkbGFzdFZDbGlja2VkID0gJCggdGFyZ2V0ICk7XHJcblxyXG5cdFx0XHQvLyBUcnkgdG8gZmluZCBhIHRhcmdldCBlbGVtZW50IHRvIHdoaWNoIHRoZSBhY3RpdmUgY2xhc3Mgd2lsbCBiZSBhcHBsaWVkXHJcblx0XHRcdGlmICggJC5kYXRhKCB0YXJnZXQsIFwibW9iaWxlLWJ1dHRvblwiICkgKSB7XHJcblx0XHRcdFx0Ly8gSWYgdGhlIGZvcm0gd2lsbCBub3QgYmUgc3VibWl0dGVkIHZpYSBBSkFYLCBkbyBub3QgYWRkIGFjdGl2ZSBjbGFzc1xyXG5cdFx0XHRcdGlmICggIWdldEFqYXhGb3JtRGF0YSggJCggdGFyZ2V0ICkuY2xvc2VzdCggXCJmb3JtXCIgKSwgdHJ1ZSApICkge1xyXG5cdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHQvLyBXZSB3aWxsIGFwcGx5IHRoZSBhY3RpdmUgc3RhdGUgdG8gdGhpcyBidXR0b24gd2lkZ2V0IC0gdGhlIHBhcmVudFxyXG5cdFx0XHRcdC8vIG9mIHRoZSBpbnB1dCB0aGF0IHdhcyBjbGlja2VkIHdpbGwgaGF2ZSB0aGUgYXNzb2NpYXRlZCBkYXRhXHJcblx0XHRcdFx0aWYgKCB0YXJnZXQucGFyZW50Tm9kZSApIHtcclxuXHRcdFx0XHRcdHRhcmdldCA9IHRhcmdldC5wYXJlbnROb2RlO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHR0YXJnZXQgPSBmaW5kQ2xvc2VzdExpbmsoIHRhcmdldCApO1xyXG5cdFx0XHRcdGlmICggISggdGFyZ2V0ICYmICQubW9iaWxlLnBhdGgucGFyc2VVcmwoIHRhcmdldC5nZXRBdHRyaWJ1dGUoIFwiaHJlZlwiICkgfHwgXCIjXCIgKS5oYXNoICE9PSBcIiNcIiApICkge1xyXG5cdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Ly8gVE9ETyB0ZWFjaCAkLm1vYmlsZS5oaWphY2thYmxlIHRvIG9wZXJhdGUgb24gcmF3IGRvbSBlbGVtZW50cyBzbyB0aGVcclxuXHRcdFx0XHQvLyBsaW5rIHdyYXBwaW5nIGNhbiBiZSBhdm9pZGVkXHJcblx0XHRcdFx0aWYgKCAhJCggdGFyZ2V0ICkuanFtSGlqYWNrYWJsZSgpLmxlbmd0aCApIHtcclxuXHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIEF2b2lkIGNhbGxpbmcgLmNsb3Nlc3QgYnkgdXNpbmcgdGhlIGRhdGEgc2V0IGR1cmluZyAuYnV0dG9uTWFya3VwKClcclxuXHRcdFx0Ly8gTGlzdCBpdGVtcyBoYXZlIHRoZSBidXR0b24gZGF0YSBpbiB0aGUgcGFyZW50IG9mIHRoZSBlbGVtZW50IGNsaWNrZWRcclxuXHRcdFx0aWYgKCAhIX50YXJnZXQuY2xhc3NOYW1lLmluZGV4T2YoIFwidWktbGluay1pbmhlcml0XCIgKSApIHtcclxuXHRcdFx0XHRpZiAoIHRhcmdldC5wYXJlbnROb2RlICkge1xyXG5cdFx0XHRcdFx0YnRuRWxzID0gJC5kYXRhKCB0YXJnZXQucGFyZW50Tm9kZSwgXCJidXR0b25FbGVtZW50c1wiICk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHQvLyBPdGhlcndpc2UsIGxvb2sgZm9yIHRoZSBkYXRhIG9uIHRoZSB0YXJnZXQgaXRzZWxmXHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0YnRuRWxzID0gJC5kYXRhKCB0YXJnZXQsIFwiYnV0dG9uRWxlbWVudHNcIiApO1xyXG5cdFx0XHR9XHJcblx0XHRcdC8vIElmIGZvdW5kLCBncmFiIHRoZSBidXR0b24ncyBvdXRlciBlbGVtZW50XHJcblx0XHRcdGlmICggYnRuRWxzICkge1xyXG5cdFx0XHRcdHRhcmdldCA9IGJ0bkVscy5vdXRlcjtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRuZWVkQ2xvc2VzdCA9IHRydWU7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdCRidG4gPSAkKCB0YXJnZXQgKTtcclxuXHRcdFx0Ly8gSWYgdGhlIG91dGVyIGVsZW1lbnQgd2Fzbid0IGZvdW5kIGJ5IHRoZSBvdXIgaGV1cmlzdGljcywgdXNlIC5jbG9zZXN0KClcclxuXHRcdFx0aWYgKCBuZWVkQ2xvc2VzdCApIHtcclxuXHRcdFx0XHQkYnRuID0gJGJ0bi5jbG9zZXN0KCBcIi51aS1idG5cIiApO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpZiAoICRidG4ubGVuZ3RoID4gMCAmJlxyXG5cdFx0XHRcdCEoICRidG4uaGFzQ2xhc3MoIFwidWktc3RhdGUtZGlzYWJsZWRcIiB8fFxyXG5cclxuXHRcdFx0XHRcdC8vIERFUFJFQ0FURUQgYXMgb2YgMS40LjAgLSByZW1vdmUgYWZ0ZXIgMS40LjAgcmVsZWFzZVxyXG5cdFx0XHRcdFx0Ly8gb25seSB1aS1zdGF0ZS1kaXNhYmxlZCBzaG91bGQgYmUgcHJlc2VudCB0aGVyZWFmdGVyXHJcblx0XHRcdFx0XHQkYnRuLmhhc0NsYXNzKCBcInVpLWRpc2FibGVkXCIgKSApICkgKSB7XHJcblx0XHRcdFx0JC5tb2JpbGUucmVtb3ZlQWN0aXZlTGlua0NsYXNzKCB0cnVlICk7XHJcblx0XHRcdFx0JC5tb2JpbGUuYWN0aXZlQ2xpY2tlZExpbmsgPSAkYnRuO1xyXG5cdFx0XHRcdCQubW9iaWxlLmFjdGl2ZUNsaWNrZWRMaW5rLmFkZENsYXNzKCAkLm1vYmlsZS5hY3RpdmVCdG5DbGFzcyApO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBjbGljayByb3V0aW5nIC0gZGlyZWN0IHRvIEhUVFAgb3IgQWpheCwgYWNjb3JkaW5nbHlcclxuXHRcdCQubW9iaWxlLmRvY3VtZW50LmJpbmQoIFwiY2xpY2tcIiwgZnVuY3Rpb24oIGV2ZW50ICkge1xyXG5cdFx0XHRpZiAoICEkLm1vYmlsZS5saW5rQmluZGluZ0VuYWJsZWQgfHwgZXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkgKSB7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHR2YXIgbGluayA9IGZpbmRDbG9zZXN0TGluayggZXZlbnQudGFyZ2V0ICksXHJcblx0XHRcdFx0JGxpbmsgPSAkKCBsaW5rICksXHJcblxyXG5cdFx0XHRcdC8vcmVtb3ZlIGFjdGl2ZSBsaW5rIGNsYXNzIGlmIGV4dGVybmFsICh0aGVuIGl0IHdvbid0IGJlIHRoZXJlIGlmIHlvdSBjb21lIGJhY2spXHJcblx0XHRcdFx0aHR0cENsZWFudXAgPSBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCkgeyAkLm1vYmlsZS5yZW1vdmVBY3RpdmVMaW5rQ2xhc3MoIHRydWUgKTsgfSwgMjAwICk7XHJcblx0XHRcdFx0fSxcclxuXHRcdFx0XHRiYXNlVXJsLCBocmVmLFxyXG5cdFx0XHRcdHVzZURlZmF1bHRVcmxIYW5kbGluZywgaXNFeHRlcm5hbCxcclxuXHRcdFx0XHR0cmFuc2l0aW9uLCByZXZlcnNlLCByb2xlO1xyXG5cclxuXHRcdFx0Ly8gSWYgYSBidXR0b24gd2FzIGNsaWNrZWQsIGNsZWFuIHVwIHRoZSBhY3RpdmUgY2xhc3MgYWRkZWQgYnkgdmNsaWNrIGFib3ZlXHJcblx0XHRcdGlmICggJC5tb2JpbGUuYWN0aXZlQ2xpY2tlZExpbmsgJiZcclxuXHRcdFx0XHQkLm1vYmlsZS5hY3RpdmVDbGlja2VkTGlua1sgMCBdID09PSBldmVudC50YXJnZXQucGFyZW50Tm9kZSApIHtcclxuXHRcdFx0XHRodHRwQ2xlYW51cCgpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBJZiB0aGVyZSBpcyBubyBsaW5rIGFzc29jaWF0ZWQgd2l0aCB0aGUgY2xpY2sgb3IgaXRzIG5vdCBhIGxlZnRcclxuXHRcdFx0Ly8gY2xpY2sgd2Ugd2FudCB0byBpZ25vcmUgdGhlIGNsaWNrXHJcblx0XHRcdC8vIFRPRE8gdGVhY2ggJC5tb2JpbGUuaGlqYWNrYWJsZSB0byBvcGVyYXRlIG9uIHJhdyBkb20gZWxlbWVudHMgc28gdGhlIGxpbmsgd3JhcHBpbmdcclxuXHRcdFx0Ly8gY2FuIGJlIGF2b2lkZWRcclxuXHRcdFx0aWYgKCAhbGluayB8fCBldmVudC53aGljaCA+IDEgfHwgISRsaW5rLmpxbUhpamFja2FibGUoKS5sZW5ndGggKSB7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvL2lmIHRoZXJlJ3MgYSBkYXRhLXJlbD1iYWNrIGF0dHIsIGdvIGJhY2sgaW4gaGlzdG9yeVxyXG5cdFx0XHRpZiAoICRsaW5rLmlzKCBcIjpqcW1EYXRhKHJlbD0nYmFjaycpXCIgKSApIHtcclxuXHRcdFx0XHQkLm1vYmlsZS5iYWNrKCk7XHJcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRiYXNlVXJsID0gJC5tb2JpbGUuZ2V0Q2xvc2VzdEJhc2VVcmwoICRsaW5rICk7XHJcblxyXG5cdFx0XHQvL2dldCBocmVmLCBpZiBkZWZpbmVkLCBvdGhlcndpc2UgZGVmYXVsdCB0byBlbXB0eSBoYXNoXHJcblx0XHRcdGhyZWYgPSAkLm1vYmlsZS5wYXRoLm1ha2VVcmxBYnNvbHV0ZSggJGxpbmsuYXR0ciggXCJocmVmXCIgKSB8fCBcIiNcIiwgYmFzZVVybCApO1xyXG5cclxuXHRcdFx0Ly9pZiBhamF4IGlzIGRpc2FibGVkLCBleGl0IGVhcmx5XHJcblx0XHRcdGlmICggISQubW9iaWxlLmFqYXhFbmFibGVkICYmICEkLm1vYmlsZS5wYXRoLmlzRW1iZWRkZWRQYWdlKCBocmVmICkgKSB7XHJcblx0XHRcdFx0aHR0cENsZWFudXAoKTtcclxuXHRcdFx0XHQvL3VzZSBkZWZhdWx0IGNsaWNrIGhhbmRsaW5nXHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBYWFhfamJsYXM6IElkZWFsbHkgbGlua3MgdG8gYXBwbGljYXRpb24gcGFnZXMgc2hvdWxkIGJlIHNwZWNpZmllZCBhc1xyXG5cdFx0XHQvLyAgICAgICAgICAgIGFuIHVybCB0byB0aGUgYXBwbGljYXRpb24gZG9jdW1lbnQgd2l0aCBhIGhhc2ggdGhhdCBpcyBlaXRoZXJcclxuXHRcdFx0Ly8gICAgICAgICAgICB0aGUgc2l0ZSByZWxhdGl2ZSBwYXRoIG9yIGlkIHRvIHRoZSBwYWdlLiBCdXQgc29tZSBvZiB0aGVcclxuXHRcdFx0Ly8gICAgICAgICAgICBpbnRlcm5hbCBjb2RlIHRoYXQgZHluYW1pY2FsbHkgZ2VuZXJhdGVzIHN1Yi1wYWdlcyBmb3IgbmVzdGVkXHJcblx0XHRcdC8vICAgICAgICAgICAgbGlzdHMgYW5kIHNlbGVjdCBkaWFsb2dzLCBqdXN0IHdyaXRlIGEgaGFzaCBpbiB0aGUgbGluayB0aGV5XHJcblx0XHRcdC8vICAgICAgICAgICAgY3JlYXRlLiBUaGlzIG1lYW5zIHRoZSBhY3R1YWwgVVJMIHBhdGggaXMgYmFzZWQgb24gd2hhdGV2ZXJcclxuXHRcdFx0Ly8gICAgICAgICAgICB0aGUgY3VycmVudCB2YWx1ZSBvZiB0aGUgYmFzZSB0YWcgaXMgYXQgdGhlIHRpbWUgdGhpcyBjb2RlXHJcblx0XHRcdC8vICAgICAgICAgICAgaXMgY2FsbGVkLlxyXG5cdFx0XHRpZiAoIGhyZWYuc2VhcmNoKCBcIiNcIiApICE9PSAtMSAmJlxyXG5cdFx0XHRcdCEoICQubW9iaWxlLnBhdGguaXNFeHRlcm5hbCggaHJlZiApICYmICQubW9iaWxlLnBhdGguaXNBYnNvbHV0ZVVybCggaHJlZiApICkgKSB7XHJcblxyXG5cdFx0XHRcdGhyZWYgPSBocmVmLnJlcGxhY2UoIC9bXiNdKiMvLCBcIlwiICk7XHJcblx0XHRcdFx0aWYgKCAhaHJlZiApIHtcclxuXHRcdFx0XHRcdC8vbGluayB3YXMgYW4gZW1wdHkgaGFzaCBtZWFudCBwdXJlbHlcclxuXHRcdFx0XHRcdC8vZm9yIGludGVyYWN0aW9uLCBzbyB3ZSBpZ25vcmUgaXQuXHJcblx0XHRcdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdH0gZWxzZSBpZiAoICQubW9iaWxlLnBhdGguaXNQYXRoKCBocmVmICkgKSB7XHJcblx0XHRcdFx0XHQvL3dlIGhhdmUgYXBhdGggc28gbWFrZSBpdCB0aGUgaHJlZiB3ZSB3YW50IHRvIGxvYWQuXHJcblx0XHRcdFx0XHRocmVmID0gJC5tb2JpbGUucGF0aC5tYWtlVXJsQWJzb2x1dGUoIGhyZWYsIGJhc2VVcmwgKTtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0Ly93ZSBoYXZlIGEgc2ltcGxlIGlkIHNvIHVzZSB0aGUgZG9jdW1lbnRVcmwgYXMgaXRzIGJhc2UuXHJcblx0XHRcdFx0XHRocmVmID0gJC5tb2JpbGUucGF0aC5tYWtlVXJsQWJzb2x1dGUoIFwiI1wiICsgaHJlZiwgZG9jdW1lbnRVcmwuaHJlZk5vSGFzaCApO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gU2hvdWxkIHdlIGhhbmRsZSB0aGlzIGxpbmssIG9yIGxldCB0aGUgYnJvd3NlciBkZWFsIHdpdGggaXQ/XHJcblx0XHRcdHVzZURlZmF1bHRVcmxIYW5kbGluZyA9ICRsaW5rLmlzKCBcIltyZWw9J2V4dGVybmFsJ11cIiApIHx8ICRsaW5rLmlzKCBcIjpqcW1EYXRhKGFqYXg9J2ZhbHNlJylcIiApIHx8ICRsaW5rLmlzKCBcIlt0YXJnZXRdXCIgKTtcclxuXHJcblx0XHRcdC8vIFNvbWUgZW1iZWRkZWQgYnJvd3NlcnMsIGxpa2UgdGhlIHdlYiB2aWV3IGluIFBob25lIEdhcCwgYWxsb3cgY3Jvc3MtZG9tYWluIFhIUlxyXG5cdFx0XHQvLyByZXF1ZXN0cyBpZiB0aGUgZG9jdW1lbnQgZG9pbmcgdGhlIHJlcXVlc3Qgd2FzIGxvYWRlZCB2aWEgdGhlIGZpbGU6Ly8gcHJvdG9jb2wuXHJcblx0XHRcdC8vIFRoaXMgaXMgdXN1YWxseSB0byBhbGxvdyB0aGUgYXBwbGljYXRpb24gdG8gXCJwaG9uZSBob21lXCIgYW5kIGZldGNoIGFwcCBzcGVjaWZpY1xyXG5cdFx0XHQvLyBkYXRhLiBXZSBub3JtYWxseSBsZXQgdGhlIGJyb3dzZXIgaGFuZGxlIGV4dGVybmFsL2Nyb3NzLWRvbWFpbiB1cmxzLCBidXQgaWYgdGhlXHJcblx0XHRcdC8vIGFsbG93Q3Jvc3NEb21haW5QYWdlcyBvcHRpb24gaXMgdHJ1ZSwgd2Ugd2lsbCBhbGxvdyBjcm9zcy1kb21haW4gaHR0cC9odHRwc1xyXG5cdFx0XHQvLyByZXF1ZXN0cyB0byBnbyB0aHJvdWdoIG91ciBwYWdlIGxvYWRpbmcgbG9naWMuXHJcblxyXG5cdFx0XHQvL2NoZWNrIGZvciBwcm90b2NvbCBvciByZWwgYW5kIGl0cyBub3QgYW4gZW1iZWRkZWQgcGFnZVxyXG5cdFx0XHQvL1RPRE8gb3ZlcmxhcCBpbiBsb2dpYyBmcm9tIGlzRXh0ZXJuYWwsIHJlbD1leHRlcm5hbCBjaGVjayBzaG91bGQgYmVcclxuXHRcdFx0Ly8gICAgIG1vdmVkIGludG8gbW9yZSBjb21wcmVoZW5zaXZlIGlzRXh0ZXJuYWxMaW5rXHJcblx0XHRcdGlzRXh0ZXJuYWwgPSB1c2VEZWZhdWx0VXJsSGFuZGxpbmcgfHwgKCAkLm1vYmlsZS5wYXRoLmlzRXh0ZXJuYWwoIGhyZWYgKSAmJiAhJC5tb2JpbGUucGF0aC5pc1Blcm1pdHRlZENyb3NzRG9tYWluUmVxdWVzdCggZG9jdW1lbnRVcmwsIGhyZWYgKSApO1xyXG5cclxuXHRcdFx0aWYgKCBpc0V4dGVybmFsICkge1xyXG5cdFx0XHRcdGh0dHBDbGVhbnVwKCk7XHJcblx0XHRcdFx0Ly91c2UgZGVmYXVsdCBjbGljayBoYW5kbGluZ1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly91c2UgYWpheFxyXG5cdFx0XHR0cmFuc2l0aW9uID0gJGxpbmsuanFtRGF0YSggXCJ0cmFuc2l0aW9uXCIgKTtcclxuXHRcdFx0cmV2ZXJzZSA9ICRsaW5rLmpxbURhdGEoIFwiZGlyZWN0aW9uXCIgKSA9PT0gXCJyZXZlcnNlXCIgfHxcclxuXHRcdFx0XHRcdFx0Ly8gZGVwcmVjYXRlZCAtIHJlbW92ZSBieSAxLjBcclxuXHRcdFx0XHRcdFx0JGxpbmsuanFtRGF0YSggXCJiYWNrXCIgKTtcclxuXHJcblx0XHRcdC8vdGhpcyBtYXkgbmVlZCB0byBiZSBtb3JlIHNwZWNpZmljIGFzIHdlIHVzZSBkYXRhLXJlbCBtb3JlXHJcblx0XHRcdHJvbGUgPSAkbGluay5hdHRyKCBcImRhdGEtXCIgKyAkLm1vYmlsZS5ucyArIFwicmVsXCIgKSB8fCB1bmRlZmluZWQ7XHJcblxyXG5cdFx0XHQkLm1vYmlsZS5jaGFuZ2VQYWdlKCBocmVmLCB7IHRyYW5zaXRpb246IHRyYW5zaXRpb24sIHJldmVyc2U6IHJldmVyc2UsIHJvbGU6IHJvbGUsIGxpbms6ICRsaW5rIH0gKTtcclxuXHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vcHJlZmV0Y2ggcGFnZXMgd2hlbiBhbmNob3JzIHdpdGggZGF0YS1wcmVmZXRjaCBhcmUgZW5jb3VudGVyZWRcclxuXHRcdCQubW9iaWxlLmRvY3VtZW50LmRlbGVnYXRlKCBcIi51aS1wYWdlXCIsIFwicGFnZXNob3cucHJlZmV0Y2hcIiwgZnVuY3Rpb24oKSB7XHJcblx0XHRcdHZhciB1cmxzID0gW107XHJcblx0XHRcdCQoIHRoaXMgKS5maW5kKCBcImE6anFtRGF0YShwcmVmZXRjaClcIiApLmVhY2goZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0dmFyICRsaW5rID0gJCggdGhpcyApLFxyXG5cdFx0XHRcdFx0dXJsID0gJGxpbmsuYXR0ciggXCJocmVmXCIgKTtcclxuXHJcblx0XHRcdFx0aWYgKCB1cmwgJiYgJC5pbkFycmF5KCB1cmwsIHVybHMgKSA9PT0gLTEgKSB7XHJcblx0XHRcdFx0XHR1cmxzLnB1c2goIHVybCApO1xyXG5cclxuXHRcdFx0XHRcdCQubW9iaWxlLmxvYWRQYWdlKCB1cmwsIHsgcm9sZTogJGxpbmsuYXR0ciggXCJkYXRhLVwiICsgJC5tb2JpbGUubnMgKyBcInJlbFwiICkscHJlZmV0Y2g6IHRydWUgfSApO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBUT0RPIGVuc3VyZSB0aGF0IHRoZSBuYXZpZ2F0ZSBiaW5kaW5nIGluIHRoZSBjb250ZW50IHdpZGdldCBoYXBwZW5zIGF0IHRoZSByaWdodCB0aW1lXHJcblx0XHQkLm1vYmlsZS5wYWdlQ29udGFpbmVyLnBhZ2Vjb250YWluZXIoKTtcclxuXHJcblx0XHQvL3NldCBwYWdlIG1pbi1oZWlnaHRzIHRvIGJlIGRldmljZSBzcGVjaWZpY1xyXG5cdFx0JC5tb2JpbGUuZG9jdW1lbnQuYmluZCggXCJwYWdlc2hvd1wiLCBmdW5jdGlvbigpIHtcclxuXHJcblx0XHRcdC8vIFdlIG5lZWQgdG8gd2FpdCBmb3Igd2luZG93LmxvYWQgdG8gbWFrZSBzdXJlIHRoYXQgc3R5bGVzIGhhdmUgYWxyZWFkeSBiZWVuIHJlbmRlcmVkLFxyXG5cdFx0XHQvLyBvdGhlcndpc2UgaGVpZ2h0cyBvZiBleHRlcm5hbCB0b29sYmFycyB3aWxsIGhhdmUgdGhlIHdyb25nIHZhbHVlXHJcblx0XHRcdGlmICggbG9hZERlZmVycmVkICkge1xyXG5cdFx0XHRcdGxvYWREZWZlcnJlZC5kb25lKCAkLm1vYmlsZS5yZXNldEFjdGl2ZVBhZ2VIZWlnaHQgKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHQkLm1vYmlsZS5yZXNldEFjdGl2ZVBhZ2VIZWlnaHQoKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0XHQkLm1vYmlsZS53aW5kb3cuYmluZCggXCJ0aHJvdHRsZWRyZXNpemVcIiwgJC5tb2JpbGUucmVzZXRBY3RpdmVQYWdlSGVpZ2h0ICk7XHJcblxyXG5cdH07Ly9uYXZyZWFkeURlZmVycmVkIGRvbmUgY2FsbGJhY2tcclxuXHJcblx0JCggZnVuY3Rpb24oKSB7IGRvbXJlYWR5RGVmZXJyZWQucmVzb2x2ZSgpOyB9ICk7XHJcblxyXG5cdC8vIEFjY291bnQgZm9yIHRoZSBwb3NzaWJpbGl0eSB0aGF0IHRoZSBsb2FkIGV2ZW50IGhhcyBhbHJlYWR5IGZpcmVkXHJcblx0aWYgKCBkb2N1bWVudC5yZWFkeVN0YXRlID09PSBcImNvbXBsZXRlXCIgKSB7XHJcblx0XHRwYWdlSXNGdWxseUxvYWRlZCgpO1xyXG5cdH0gZWxzZSB7XHJcblx0XHQkLm1vYmlsZS53aW5kb3cubG9hZCggcGFnZUlzRnVsbHlMb2FkZWQgKTtcclxuXHR9XHJcblxyXG5cdCQud2hlbiggZG9tcmVhZHlEZWZlcnJlZCwgJC5tb2JpbGUubmF2cmVhZHlEZWZlcnJlZCApLmRvbmUoIGZ1bmN0aW9uKCkgeyAkLm1vYmlsZS5fcmVnaXN0ZXJJbnRlcm5hbEV2ZW50cygpOyB9ICk7XHJcbn0pKCBqUXVlcnkgKTtcclxuXHJcblxyXG4oZnVuY3Rpb24oICQsIHdpbmRvdywgdW5kZWZpbmVkICkge1xyXG5cclxuXHQvLyBUT0RPIHJlbW92ZSBkaXJlY3QgcmVmZXJlbmNlcyB0byAkLm1vYmlsZSBhbmQgcHJvcGVydGllcywgd2Ugc2hvdWxkXHJcblx0Ly8gICAgICBmYXZvciBpbmplY3Rpb24gd2l0aCBwYXJhbXMgdG8gdGhlIGNvbnN0cnVjdG9yXHJcblx0JC5tb2JpbGUuVHJhbnNpdGlvbiA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5pbml0LmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTtcclxuXHR9O1xyXG5cclxuXHQkLmV4dGVuZCgkLm1vYmlsZS5UcmFuc2l0aW9uLnByb3RvdHlwZSwge1xyXG5cdFx0dG9QcmVDbGFzczogXCIgdWktcGFnZS1wcmUtaW5cIixcclxuXHJcblx0XHRpbml0OiBmdW5jdGlvbiggbmFtZSwgcmV2ZXJzZSwgJHRvLCAkZnJvbSApIHtcclxuXHRcdFx0JC5leHRlbmQodGhpcywge1xyXG5cdFx0XHRcdG5hbWU6IG5hbWUsXHJcblx0XHRcdFx0cmV2ZXJzZTogcmV2ZXJzZSxcclxuXHRcdFx0XHQkdG86ICR0byxcclxuXHRcdFx0XHQkZnJvbTogJGZyb20sXHJcblx0XHRcdFx0ZGVmZXJyZWQ6IG5ldyAkLkRlZmVycmVkKClcclxuXHRcdFx0fSk7XHJcblx0XHR9LFxyXG5cclxuXHRcdGNsZWFuRnJvbTogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHRoaXMuJGZyb21cclxuXHRcdFx0XHQucmVtb3ZlQ2xhc3MoICQubW9iaWxlLmFjdGl2ZVBhZ2VDbGFzcyArIFwiIG91dCBpbiByZXZlcnNlIFwiICsgdGhpcy5uYW1lIClcclxuXHRcdFx0XHQuaGVpZ2h0KCBcIlwiICk7XHJcblx0XHR9LFxyXG5cclxuXHRcdC8vIE5PVEUgb3ZlcnJpZGRlbiBieSBjaGlsZCBvYmplY3QgcHJvdG90eXBlcywgbm9vcCdkIGhlcmUgYXMgZGVmYXVsdHNcclxuXHRcdGJlZm9yZURvbmVJbjogZnVuY3Rpb24oKSB7fSxcclxuXHRcdGJlZm9yZURvbmVPdXQ6IGZ1bmN0aW9uKCkge30sXHJcblx0XHRiZWZvcmVTdGFydE91dDogZnVuY3Rpb24oKSB7fSxcclxuXHJcblx0XHRkb25lSW46IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR0aGlzLmJlZm9yZURvbmVJbigpO1xyXG5cclxuXHRcdFx0dGhpcy4kdG8ucmVtb3ZlQ2xhc3MoIFwib3V0IGluIHJldmVyc2UgXCIgKyB0aGlzLm5hbWUgKS5oZWlnaHQoIFwiXCIgKTtcclxuXHJcblx0XHRcdHRoaXMudG9nZ2xlVmlld3BvcnRDbGFzcygpO1xyXG5cclxuXHRcdFx0Ly8gSW4gc29tZSBicm93c2VycyAoaU9TNSksIDNEIHRyYW5zaXRpb25zIGJsb2NrIHRoZSBhYmlsaXR5IHRvIHNjcm9sbCB0byB0aGUgZGVzaXJlZCBsb2NhdGlvbiBkdXJpbmcgdHJhbnNpdGlvblxyXG5cdFx0XHQvLyBUaGlzIGVuc3VyZXMgd2UganVtcCB0byB0aGF0IHNwb3QgYWZ0ZXIgdGhlIGZhY3QsIGlmIHdlIGFyZW4ndCB0aGVyZSBhbHJlYWR5LlxyXG5cdFx0XHRpZiAoICQubW9iaWxlLndpbmRvdy5zY3JvbGxUb3AoKSAhPT0gdGhpcy50b1Njcm9sbCApIHtcclxuXHRcdFx0XHR0aGlzLnNjcm9sbFBhZ2UoKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAoICF0aGlzLnNlcXVlbnRpYWwgKSB7XHJcblx0XHRcdFx0dGhpcy4kdG8uYWRkQ2xhc3MoICQubW9iaWxlLmFjdGl2ZVBhZ2VDbGFzcyApO1xyXG5cdFx0XHR9XHJcblx0XHRcdHRoaXMuZGVmZXJyZWQucmVzb2x2ZSggdGhpcy5uYW1lLCB0aGlzLnJldmVyc2UsIHRoaXMuJHRvLCB0aGlzLiRmcm9tLCB0cnVlICk7XHJcblx0XHR9LFxyXG5cclxuXHRcdGRvbmVPdXQ6IGZ1bmN0aW9uKCBzY3JlZW5IZWlnaHQsIHJldmVyc2VDbGFzcywgbm9uZSwgcHJldmVudEZvY3VzICkge1xyXG5cdFx0XHR0aGlzLmJlZm9yZURvbmVPdXQoKTtcclxuXHRcdFx0dGhpcy5zdGFydEluKCBzY3JlZW5IZWlnaHQsIHJldmVyc2VDbGFzcywgbm9uZSwgcHJldmVudEZvY3VzICk7XHJcblx0XHR9LFxyXG5cclxuXHRcdGhpZGVJbjogZnVuY3Rpb24oIGNhbGxiYWNrICkge1xyXG5cdFx0XHQvLyBQcmV2ZW50IGZsaWNrZXJpbmcgaW4gcGhvbmVnYXAgY29udGFpbmVyOiBzZWUgY29tbWVudHMgYXQgIzQwMjQgcmVnYXJkaW5nIGlPU1xyXG5cdFx0XHR0aGlzLiR0by5jc3MoIFwiei1pbmRleFwiLCAtMTAgKTtcclxuXHRcdFx0Y2FsbGJhY2suY2FsbCggdGhpcyApO1xyXG5cdFx0XHR0aGlzLiR0by5jc3MoIFwiei1pbmRleFwiLCBcIlwiICk7XHJcblx0XHR9LFxyXG5cclxuXHRcdHNjcm9sbFBhZ2U6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHQvLyBCeSB1c2luZyBzY3JvbGxUbyBpbnN0ZWFkIG9mIHNpbGVudFNjcm9sbCwgd2UgY2FuIGtlZXAgdGhpbmdzIGJldHRlciBpbiBvcmRlclxyXG5cdFx0XHQvLyBKdXN0IHRvIGJlIHByZWNhdXRpb3MsIGRpc2FibGUgc2Nyb2xsc3RhcnQgbGlzdGVuaW5nIGxpa2Ugc2lsZW50U2Nyb2xsIHdvdWxkXHJcblx0XHRcdCQuZXZlbnQuc3BlY2lhbC5zY3JvbGxzdGFydC5lbmFibGVkID0gZmFsc2U7XHJcblx0XHRcdC8vaWYgd2UgYXJlIGhpZGluZyB0aGUgdXJsIGJhciBvciB0aGUgcGFnZSB3YXMgcHJldmlvdXNseSBzY3JvbGxlZCBzY3JvbGwgdG8gaGlkZSBvciByZXR1cm4gdG8gcG9zaXRpb25cclxuXHRcdFx0aWYgKCAkLm1vYmlsZS5oaWRlVXJsQmFyIHx8IHRoaXMudG9TY3JvbGwgIT09ICQubW9iaWxlLmRlZmF1bHRIb21lU2Nyb2xsICkge1xyXG5cdFx0XHRcdHdpbmRvdy5zY3JvbGxUbyggMCwgdGhpcy50b1Njcm9sbCApO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyByZWVuYWJsZSBzY3JvbGxzdGFydCBsaXN0ZW5pbmcgbGlrZSBzaWxlbnRTY3JvbGwgd291bGRcclxuXHRcdFx0c2V0VGltZW91dCggZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0JC5ldmVudC5zcGVjaWFsLnNjcm9sbHN0YXJ0LmVuYWJsZWQgPSB0cnVlO1xyXG5cdFx0XHR9LCAxNTAgKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0c3RhcnRJbjogZnVuY3Rpb24oIHNjcmVlbkhlaWdodCwgcmV2ZXJzZUNsYXNzLCBub25lLCBwcmV2ZW50Rm9jdXMgKSB7XHJcblx0XHRcdHRoaXMuaGlkZUluKGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHRoaXMuJHRvLmFkZENsYXNzKCAkLm1vYmlsZS5hY3RpdmVQYWdlQ2xhc3MgKyB0aGlzLnRvUHJlQ2xhc3MgKTtcclxuXHJcblx0XHRcdFx0Ly8gU2VuZCBmb2N1cyB0byBwYWdlIGFzIGl0IGlzIG5vdyBkaXNwbGF5OiBibG9ja1xyXG5cdFx0XHRcdGlmICggIXByZXZlbnRGb2N1cyApIHtcclxuXHRcdFx0XHRcdCQubW9iaWxlLmZvY3VzUGFnZSggdGhpcy4kdG8gKTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdC8vIFNldCB0byBwYWdlIGhlaWdodFxyXG5cdFx0XHRcdHRoaXMuJHRvLmhlaWdodCggc2NyZWVuSGVpZ2h0ICsgdGhpcy50b1Njcm9sbCApO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICggIW5vbmUgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zY3JvbGxQYWdlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0dGhpcy4kdG9cclxuXHRcdFx0XHQucmVtb3ZlQ2xhc3MoIHRoaXMudG9QcmVDbGFzcyApXHJcblx0XHRcdFx0LmFkZENsYXNzKCB0aGlzLm5hbWUgKyBcIiBpbiBcIiArIHJldmVyc2VDbGFzcyApO1xyXG5cclxuXHRcdFx0aWYgKCAhbm9uZSApIHtcclxuXHRcdFx0XHR0aGlzLiR0by5hbmltYXRpb25Db21wbGV0ZSggJC5wcm94eShmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdHRoaXMuZG9uZUluKCk7XHJcblx0XHRcdFx0fSwgdGhpcyApKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHR0aGlzLmRvbmVJbigpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0fSxcclxuXHJcblx0XHRzdGFydE91dDogZnVuY3Rpb24oIHNjcmVlbkhlaWdodCwgcmV2ZXJzZUNsYXNzLCBub25lICkge1xyXG5cdFx0XHR0aGlzLmJlZm9yZVN0YXJ0T3V0KCBzY3JlZW5IZWlnaHQsIHJldmVyc2VDbGFzcywgbm9uZSApO1xyXG5cclxuXHRcdFx0Ly8gU2V0IHRoZSBmcm9tIHBhZ2UncyBoZWlnaHQgYW5kIHN0YXJ0IGl0IHRyYW5zaXRpb25pbmcgb3V0XHJcblx0XHRcdC8vIE5vdGU6IHNldHRpbmcgYW4gZXhwbGljaXQgaGVpZ2h0IGhlbHBzIGVsaW1pbmF0ZSB0aWxpbmcgaW4gdGhlIHRyYW5zaXRpb25zXHJcblx0XHRcdHRoaXMuJGZyb21cclxuXHRcdFx0XHQuaGVpZ2h0KCBzY3JlZW5IZWlnaHQgKyAkLm1vYmlsZS53aW5kb3cuc2Nyb2xsVG9wKCkgKVxyXG5cdFx0XHRcdC5hZGRDbGFzcyggdGhpcy5uYW1lICsgXCIgb3V0XCIgKyByZXZlcnNlQ2xhc3MgKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0dG9nZ2xlVmlld3BvcnRDbGFzczogZnVuY3Rpb24oKSB7XHJcblx0XHRcdCQubW9iaWxlLnBhZ2VDb250YWluZXIudG9nZ2xlQ2xhc3MoIFwidWktbW9iaWxlLXZpZXdwb3J0LXRyYW5zaXRpb25pbmcgdmlld3BvcnQtXCIgKyB0aGlzLm5hbWUgKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0dHJhbnNpdGlvbjogZnVuY3Rpb24oKSB7XHJcblx0XHRcdC8vIE5PVEUgbWFueSBvZiB0aGVzZSBjb3VsZCBiZSBjYWxjdWxhdGVkL3JlY29yZGVkIGluIHRoZSBjb25zdHJ1Y3RvciwgaXQncyBteVxyXG5cdFx0XHQvLyAgICAgIG9waW5pb24gdGhhdCBiaW5kaW5nIHRoZW0gYXMgbGF0ZSBhcyBwb3NzaWJsZSBoYXMgdmFsdWUgd2l0aCByZWdhcmRzIHRvXHJcblx0XHRcdC8vICAgICAgYmV0dGVyIHRyYW5zaXRpb25zIHdpdGggZmV3ZXIgYnVncy4gSWUsIGl0J3Mgbm90IGd1YXJhbnRlZWQgdGhhdCB0aGVcclxuXHRcdFx0Ly8gICAgICBvYmplY3Qgd2lsbCBiZSBjcmVhdGVkIGFuZCB0cmFuc2l0aW9uIHdpbGwgYmUgcnVuIGltbWVkaWF0ZWx5IGFmdGVyIGFzXHJcblx0XHRcdC8vICAgICAgaXQgaXMgdG9kYXkuIFNvIHdlIHdhaXQgdW50aWwgdHJhbnNpdGlvbiBpcyBpbnZva2VkIHRvIGdhdGhlciB0aGUgZm9sbG93aW5nXHJcblx0XHRcdHZhciBub25lLFxyXG5cdFx0XHRcdHJldmVyc2VDbGFzcyA9IHRoaXMucmV2ZXJzZSA/IFwiIHJldmVyc2VcIiA6IFwiXCIsXHJcblx0XHRcdFx0c2NyZWVuSGVpZ2h0ID0gJC5tb2JpbGUuZ2V0U2NyZWVuSGVpZ2h0KCksXHJcblx0XHRcdFx0bWF4VHJhbnNpdGlvbk92ZXJyaWRlID0gJC5tb2JpbGUubWF4VHJhbnNpdGlvbldpZHRoICE9PSBmYWxzZSAmJlxyXG5cdFx0XHRcdFx0JC5tb2JpbGUud2luZG93LndpZHRoKCkgPiAkLm1vYmlsZS5tYXhUcmFuc2l0aW9uV2lkdGg7XHJcblxyXG5cdFx0XHR0aGlzLnRvU2Nyb2xsID0gJC5tb2JpbGUubmF2aWdhdGUuaGlzdG9yeS5nZXRBY3RpdmUoKS5sYXN0U2Nyb2xsIHx8ICQubW9iaWxlLmRlZmF1bHRIb21lU2Nyb2xsO1xyXG5cclxuXHRcdFx0bm9uZSA9ICEkLnN1cHBvcnQuY3NzVHJhbnNpdGlvbnMgfHwgISQuc3VwcG9ydC5jc3NBbmltYXRpb25zIHx8XHJcblx0XHRcdFx0bWF4VHJhbnNpdGlvbk92ZXJyaWRlIHx8ICF0aGlzLm5hbWUgfHwgdGhpcy5uYW1lID09PSBcIm5vbmVcIiB8fFxyXG5cdFx0XHRcdE1hdGgubWF4KCAkLm1vYmlsZS53aW5kb3cuc2Nyb2xsVG9wKCksIHRoaXMudG9TY3JvbGwgKSA+XHJcblx0XHRcdFx0XHQkLm1vYmlsZS5nZXRNYXhTY3JvbGxGb3JUcmFuc2l0aW9uKCk7XHJcblxyXG5cdFx0XHR0aGlzLnRvZ2dsZVZpZXdwb3J0Q2xhc3MoKTtcclxuXHJcblx0XHRcdGlmICggdGhpcy4kZnJvbSAmJiAhbm9uZSApIHtcclxuXHRcdFx0XHR0aGlzLnN0YXJ0T3V0KCBzY3JlZW5IZWlnaHQsIHJldmVyc2VDbGFzcywgbm9uZSApO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdHRoaXMuZG9uZU91dCggc2NyZWVuSGVpZ2h0LCByZXZlcnNlQ2xhc3MsIG5vbmUsIHRydWUgKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0cmV0dXJuIHRoaXMuZGVmZXJyZWQucHJvbWlzZSgpO1xyXG5cdFx0fVxyXG5cdH0pO1xyXG59KSggalF1ZXJ5LCB0aGlzICk7XHJcblxyXG5cclxuKGZ1bmN0aW9uKCAkICkge1xyXG5cclxuXHQkLm1vYmlsZS5TZXJpYWxUcmFuc2l0aW9uID0gZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLmluaXQuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxuXHR9O1xyXG5cclxuXHQkLmV4dGVuZCgkLm1vYmlsZS5TZXJpYWxUcmFuc2l0aW9uLnByb3RvdHlwZSwgJC5tb2JpbGUuVHJhbnNpdGlvbi5wcm90b3R5cGUsIHtcclxuXHRcdHNlcXVlbnRpYWw6IHRydWUsXHJcblxyXG5cdFx0YmVmb3JlRG9uZU91dDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdGlmICggdGhpcy4kZnJvbSApIHtcclxuXHRcdFx0XHR0aGlzLmNsZWFuRnJvbSgpO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cclxuXHRcdGJlZm9yZVN0YXJ0T3V0OiBmdW5jdGlvbiggc2NyZWVuSGVpZ2h0LCByZXZlcnNlQ2xhc3MsIG5vbmUgKSB7XHJcblx0XHRcdHRoaXMuJGZyb20uYW5pbWF0aW9uQ29tcGxldGUoJC5wcm94eShmdW5jdGlvbigpIHtcclxuXHRcdFx0XHR0aGlzLmRvbmVPdXQoIHNjcmVlbkhlaWdodCwgcmV2ZXJzZUNsYXNzLCBub25lICk7XHJcblx0XHRcdH0sIHRoaXMgKSk7XHJcblx0XHR9XHJcblx0fSk7XHJcblxyXG59KSggalF1ZXJ5ICk7XHJcblxyXG5cclxuKGZ1bmN0aW9uKCAkICkge1xyXG5cclxuXHQkLm1vYmlsZS5Db25jdXJyZW50VHJhbnNpdGlvbiA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5pbml0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcblx0fTtcclxuXHJcblx0JC5leHRlbmQoJC5tb2JpbGUuQ29uY3VycmVudFRyYW5zaXRpb24ucHJvdG90eXBlLCAkLm1vYmlsZS5UcmFuc2l0aW9uLnByb3RvdHlwZSwge1xyXG5cdFx0c2VxdWVudGlhbDogZmFsc2UsXHJcblxyXG5cdFx0YmVmb3JlRG9uZUluOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0aWYgKCB0aGlzLiRmcm9tICkge1xyXG5cdFx0XHRcdHRoaXMuY2xlYW5Gcm9tKCk7XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblxyXG5cdFx0YmVmb3JlU3RhcnRPdXQ6IGZ1bmN0aW9uKCBzY3JlZW5IZWlnaHQsIHJldmVyc2VDbGFzcywgbm9uZSApIHtcclxuXHRcdFx0dGhpcy5kb25lT3V0KCBzY3JlZW5IZWlnaHQsIHJldmVyc2VDbGFzcywgbm9uZSApO1xyXG5cdFx0fVxyXG5cdH0pO1xyXG5cclxufSkoIGpRdWVyeSApO1xyXG5cclxuXHJcbihmdW5jdGlvbiggJCApIHtcclxuXHJcblx0Ly8gZ2VuZXJhdGUgdGhlIGhhbmRsZXJzIGZyb20gdGhlIGFib3ZlXHJcblx0dmFyIGRlZmF1bHRHZXRNYXhTY3JvbGxGb3JUcmFuc2l0aW9uID0gZnVuY3Rpb24oKSB7XHJcblx0XHRyZXR1cm4gJC5tb2JpbGUuZ2V0U2NyZWVuSGVpZ2h0KCkgKiAzO1xyXG5cdH07XHJcblxyXG5cdC8vdHJhbnNpdGlvbiBoYW5kbGVyIGRpY3Rpb25hcnkgZm9yIDNyZCBwYXJ0eSB0cmFuc2l0aW9uc1xyXG5cdCQubW9iaWxlLnRyYW5zaXRpb25IYW5kbGVycyA9IHtcclxuXHRcdFwic2VxdWVudGlhbFwiOiAkLm1vYmlsZS5TZXJpYWxUcmFuc2l0aW9uLFxyXG5cdFx0XCJzaW11bHRhbmVvdXNcIjogJC5tb2JpbGUuQ29uY3VycmVudFRyYW5zaXRpb25cclxuXHR9O1xyXG5cclxuXHQvLyBNYWtlIG91ciB0cmFuc2l0aW9uIGhhbmRsZXIgdGhlIHB1YmxpYyBkZWZhdWx0LlxyXG5cdCQubW9iaWxlLmRlZmF1bHRUcmFuc2l0aW9uSGFuZGxlciA9ICQubW9iaWxlLnRyYW5zaXRpb25IYW5kbGVycy5zZXF1ZW50aWFsO1xyXG5cclxuXHQkLm1vYmlsZS50cmFuc2l0aW9uRmFsbGJhY2tzID0ge307XHJcblxyXG5cdC8vIElmIHRyYW5zaXRpb24gaXMgZGVmaW5lZCwgY2hlY2sgaWYgY3NzIDNEIHRyYW5zZm9ybXMgYXJlIHN1cHBvcnRlZCwgYW5kIGlmIG5vdCwgaWYgYSBmYWxsYmFjayBpcyBzcGVjaWZpZWRcclxuXHQkLm1vYmlsZS5fbWF5YmVEZWdyYWRlVHJhbnNpdGlvbiA9IGZ1bmN0aW9uKCB0cmFuc2l0aW9uICkge1xyXG5cdFx0aWYgKCB0cmFuc2l0aW9uICYmICEkLnN1cHBvcnQuY3NzVHJhbnNmb3JtM2QgJiYgJC5tb2JpbGUudHJhbnNpdGlvbkZhbGxiYWNrc1sgdHJhbnNpdGlvbiBdICkge1xyXG5cdFx0XHR0cmFuc2l0aW9uID0gJC5tb2JpbGUudHJhbnNpdGlvbkZhbGxiYWNrc1sgdHJhbnNpdGlvbiBdO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiB0cmFuc2l0aW9uO1xyXG5cdH07XHJcblxyXG5cdC8vIFNldCB0aGUgZ2V0TWF4U2Nyb2xsRm9yVHJhbnNpdGlvbiB0byBkZWZhdWx0IGlmIG5vIGltcGxlbWVudGF0aW9uIHdhcyBzZXQgYnkgdXNlclxyXG5cdCQubW9iaWxlLmdldE1heFNjcm9sbEZvclRyYW5zaXRpb24gPSAkLm1vYmlsZS5nZXRNYXhTY3JvbGxGb3JUcmFuc2l0aW9uIHx8IGRlZmF1bHRHZXRNYXhTY3JvbGxGb3JUcmFuc2l0aW9uO1xyXG5cclxufSkoIGpRdWVyeSApO1xyXG5cclxuLypcclxuKiBmYWxsYmFjayB0cmFuc2l0aW9uIGZvciBmbGlwIGluIG5vbi0zRCBzdXBwb3J0aW5nIGJyb3dzZXJzICh3aGljaCB0ZW5kIHRvIGhhbmRsZSBjb21wbGV4IHRyYW5zaXRpb25zIHBvb3JseSBpbiBnZW5lcmFsXHJcbiovXHJcblxyXG4oZnVuY3Rpb24oICQsIHdpbmRvdywgdW5kZWZpbmVkICkge1xyXG5cclxuJC5tb2JpbGUudHJhbnNpdGlvbkZhbGxiYWNrcy5mbGlwID0gXCJmYWRlXCI7XHJcblxyXG59KSggalF1ZXJ5LCB0aGlzICk7XHJcblxyXG4vKlxyXG4qIGZhbGxiYWNrIHRyYW5zaXRpb24gZm9yIGZsb3cgaW4gbm9uLTNEIHN1cHBvcnRpbmcgYnJvd3NlcnMgKHdoaWNoIHRlbmQgdG8gaGFuZGxlIGNvbXBsZXggdHJhbnNpdGlvbnMgcG9vcmx5IGluIGdlbmVyYWxcclxuKi9cclxuXHJcbihmdW5jdGlvbiggJCwgd2luZG93LCB1bmRlZmluZWQgKSB7XHJcblxyXG4kLm1vYmlsZS50cmFuc2l0aW9uRmFsbGJhY2tzLmZsb3cgPSBcImZhZGVcIjtcclxuXHJcbn0pKCBqUXVlcnksIHRoaXMgKTtcclxuXHJcbi8qXHJcbiogZmFsbGJhY2sgdHJhbnNpdGlvbiBmb3IgcG9wIGluIG5vbi0zRCBzdXBwb3J0aW5nIGJyb3dzZXJzICh3aGljaCB0ZW5kIHRvIGhhbmRsZSBjb21wbGV4IHRyYW5zaXRpb25zIHBvb3JseSBpbiBnZW5lcmFsXHJcbiovXHJcblxyXG4oZnVuY3Rpb24oICQsIHdpbmRvdywgdW5kZWZpbmVkICkge1xyXG5cclxuJC5tb2JpbGUudHJhbnNpdGlvbkZhbGxiYWNrcy5wb3AgPSBcImZhZGVcIjtcclxuXHJcbn0pKCBqUXVlcnksIHRoaXMgKTtcclxuXHJcbi8qXHJcbiogZmFsbGJhY2sgdHJhbnNpdGlvbiBmb3Igc2xpZGUgaW4gbm9uLTNEIHN1cHBvcnRpbmcgYnJvd3NlcnMgKHdoaWNoIHRlbmQgdG8gaGFuZGxlIGNvbXBsZXggdHJhbnNpdGlvbnMgcG9vcmx5IGluIGdlbmVyYWxcclxuKi9cclxuXHJcbihmdW5jdGlvbiggJCwgd2luZG93LCB1bmRlZmluZWQgKSB7XHJcblxyXG4vLyBVc2UgdGhlIHNpbXVsdGFuZW91cyB0cmFuc2l0aW9ucyBoYW5kbGVyIGZvciBzbGlkZSB0cmFuc2l0aW9uc1xyXG4kLm1vYmlsZS50cmFuc2l0aW9uSGFuZGxlcnMuc2xpZGUgPSAkLm1vYmlsZS50cmFuc2l0aW9uSGFuZGxlcnMuc2ltdWx0YW5lb3VzO1xyXG5cclxuLy8gU2V0IHRoZSBzbGlkZSB0cmFuc2l0aW9ucydzIGZhbGxiYWNrIHRvIFwiZmFkZVwiXHJcbiQubW9iaWxlLnRyYW5zaXRpb25GYWxsYmFja3Muc2xpZGUgPSBcImZhZGVcIjtcclxuXHJcbn0pKCBqUXVlcnksIHRoaXMgKTtcclxuXHJcbi8qXHJcbiogZmFsbGJhY2sgdHJhbnNpdGlvbiBmb3Igc2xpZGVkb3duIGluIG5vbi0zRCBzdXBwb3J0aW5nIGJyb3dzZXJzICh3aGljaCB0ZW5kIHRvIGhhbmRsZSBjb21wbGV4IHRyYW5zaXRpb25zIHBvb3JseSBpbiBnZW5lcmFsXHJcbiovXHJcblxyXG4oZnVuY3Rpb24oICQsIHdpbmRvdywgdW5kZWZpbmVkICkge1xyXG5cclxuJC5tb2JpbGUudHJhbnNpdGlvbkZhbGxiYWNrcy5zbGlkZWRvd24gPSBcImZhZGVcIjtcclxuXHJcbn0pKCBqUXVlcnksIHRoaXMgKTtcclxuXHJcbi8qXHJcbiogZmFsbGJhY2sgdHJhbnNpdGlvbiBmb3Igc2xpZGVmYWRlIGluIG5vbi0zRCBzdXBwb3J0aW5nIGJyb3dzZXJzICh3aGljaCB0ZW5kIHRvIGhhbmRsZSBjb21wbGV4IHRyYW5zaXRpb25zIHBvb3JseSBpbiBnZW5lcmFsXHJcbiovXHJcblxyXG4oZnVuY3Rpb24oICQsIHdpbmRvdywgdW5kZWZpbmVkICkge1xyXG5cclxuLy8gU2V0IHRoZSBzbGlkZSB0cmFuc2l0aW9ucydzIGZhbGxiYWNrIHRvIFwiZmFkZVwiXHJcbiQubW9iaWxlLnRyYW5zaXRpb25GYWxsYmFja3Muc2xpZGVmYWRlID0gXCJmYWRlXCI7XHJcblxyXG59KSggalF1ZXJ5LCB0aGlzICk7XHJcblxyXG4vKlxyXG4qIGZhbGxiYWNrIHRyYW5zaXRpb24gZm9yIHNsaWRldXAgaW4gbm9uLTNEIHN1cHBvcnRpbmcgYnJvd3NlcnMgKHdoaWNoIHRlbmQgdG8gaGFuZGxlIGNvbXBsZXggdHJhbnNpdGlvbnMgcG9vcmx5IGluIGdlbmVyYWxcclxuKi9cclxuXHJcbihmdW5jdGlvbiggJCwgd2luZG93LCB1bmRlZmluZWQgKSB7XHJcblxyXG4kLm1vYmlsZS50cmFuc2l0aW9uRmFsbGJhY2tzLnNsaWRldXAgPSBcImZhZGVcIjtcclxuXHJcbn0pKCBqUXVlcnksIHRoaXMgKTtcclxuXHJcbi8qXHJcbiogZmFsbGJhY2sgdHJhbnNpdGlvbiBmb3IgdHVybiBpbiBub24tM0Qgc3VwcG9ydGluZyBicm93c2VycyAod2hpY2ggdGVuZCB0byBoYW5kbGUgY29tcGxleCB0cmFuc2l0aW9ucyBwb29ybHkgaW4gZ2VuZXJhbFxyXG4qL1xyXG5cclxuKGZ1bmN0aW9uKCAkLCB3aW5kb3csIHVuZGVmaW5lZCApIHtcclxuXHJcbiQubW9iaWxlLnRyYW5zaXRpb25GYWxsYmFja3MudHVybiA9IFwiZmFkZVwiO1xyXG5cclxufSkoIGpRdWVyeSwgdGhpcyApO1xyXG5cclxuXHJcbihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xyXG5cclxuJC5tb2JpbGUuZGVncmFkZUlucHV0cyA9IHtcclxuXHRjb2xvcjogZmFsc2UsXHJcblx0ZGF0ZTogZmFsc2UsXHJcblx0ZGF0ZXRpbWU6IGZhbHNlLFxyXG5cdFwiZGF0ZXRpbWUtbG9jYWxcIjogZmFsc2UsXHJcblx0ZW1haWw6IGZhbHNlLFxyXG5cdG1vbnRoOiBmYWxzZSxcclxuXHRudW1iZXI6IGZhbHNlLFxyXG5cdHJhbmdlOiBcIm51bWJlclwiLFxyXG5cdHNlYXJjaDogXCJ0ZXh0XCIsXHJcblx0dGVsOiBmYWxzZSxcclxuXHR0aW1lOiBmYWxzZSxcclxuXHR1cmw6IGZhbHNlLFxyXG5cdHdlZWs6IGZhbHNlXHJcbn07XHJcbi8vIEJhY2tjb21wYXQgcmVtb3ZlIGluIDEuNVxyXG4kLm1vYmlsZS5wYWdlLnByb3RvdHlwZS5vcHRpb25zLmRlZ3JhZGVJbnB1dHMgPSAkLm1vYmlsZS5kZWdyYWRlSW5wdXRzO1xyXG5cclxuLy8gQXV0byBzZWxmLWluaXQgd2lkZ2V0c1xyXG4kLm1vYmlsZS5kZWdyYWRlSW5wdXRzV2l0aGluID0gZnVuY3Rpb24oIHRhcmdldCApIHtcclxuXHJcblx0dGFyZ2V0ID0gJCggdGFyZ2V0ICk7XHJcblxyXG5cdC8vIERlZ3JhZGUgaW5wdXRzIHRvIGF2b2lkIHBvb3JseSBpbXBsZW1lbnRlZCBuYXRpdmUgZnVuY3Rpb25hbGl0eVxyXG5cdHRhcmdldC5maW5kKCBcImlucHV0XCIgKS5ub3QoICQubW9iaWxlLnBhZ2UucHJvdG90eXBlLmtlZXBOYXRpdmVTZWxlY3RvcigpICkuZWFjaChmdW5jdGlvbigpIHtcclxuXHRcdHZhciBlbGVtZW50ID0gJCggdGhpcyApLFxyXG5cdFx0XHR0eXBlID0gdGhpcy5nZXRBdHRyaWJ1dGUoIFwidHlwZVwiICksXHJcblx0XHRcdG9wdFR5cGUgPSAkLm1vYmlsZS5kZWdyYWRlSW5wdXRzWyB0eXBlIF0gfHwgXCJ0ZXh0XCIsXHJcblx0XHRcdGh0bWwsIGhhc1R5cGUsIGZpbmRzdHIsIHJlcHN0cjtcclxuXHJcblx0XHRpZiAoICQubW9iaWxlLmRlZ3JhZGVJbnB1dHNbIHR5cGUgXSApIHtcclxuXHRcdFx0aHRtbCA9ICQoIFwiPGRpdj5cIiApLmh0bWwoIGVsZW1lbnQuY2xvbmUoKSApLmh0bWwoKTtcclxuXHRcdFx0Ly8gSW4gSUUgYnJvd3NlcnMsIHRoZSB0eXBlIHNvbWV0aW1lcyBkb2Vzbid0IGV4aXN0IGluIHRoZSBjbG9uZWQgbWFya3VwLCBzbyB3ZSByZXBsYWNlIHRoZSBjbG9zaW5nIHRhZyBpbnN0ZWFkXHJcblx0XHRcdGhhc1R5cGUgPSBodG1sLmluZGV4T2YoIFwiIHR5cGU9XCIgKSA+IC0xO1xyXG5cdFx0XHRmaW5kc3RyID0gaGFzVHlwZSA/IC9cXHMrdHlwZT1bXCInXT9cXHcrWydcIl0/LyA6IC9cXC8/Pi87XHJcblx0XHRcdHJlcHN0ciA9IFwiIHR5cGU9XFxcIlwiICsgb3B0VHlwZSArIFwiXFxcIiBkYXRhLVwiICsgJC5tb2JpbGUubnMgKyBcInR5cGU9XFxcIlwiICsgdHlwZSArIFwiXFxcIlwiICsgKCBoYXNUeXBlID8gXCJcIiA6IFwiPlwiICk7XHJcblxyXG5cdFx0XHRlbGVtZW50LnJlcGxhY2VXaXRoKCBodG1sLnJlcGxhY2UoIGZpbmRzdHIsIHJlcHN0ciApICk7XHJcblx0XHR9XHJcblx0fSk7XHJcblxyXG59O1xyXG5cclxufSkoIGpRdWVyeSApO1xyXG5cclxuKGZ1bmN0aW9uKCAkLCB3aW5kb3csIHVuZGVmaW5lZCApIHtcclxuXHJcbiQud2lkZ2V0KCBcIm1vYmlsZS5wYWdlXCIsICQubW9iaWxlLnBhZ2UsIHtcclxuXHRvcHRpb25zOiB7XHJcblxyXG5cdFx0Ly8gQWNjZXB0cyBsZWZ0LCByaWdodCBhbmQgbm9uZVxyXG5cdFx0Y2xvc2VCdG46IFwibGVmdFwiLFxyXG5cdFx0Y2xvc2VCdG5UZXh0OiBcIkNsb3NlXCIsXHJcblx0XHRvdmVybGF5VGhlbWU6IFwiYVwiLFxyXG5cdFx0Y29ybmVyczogdHJ1ZSxcclxuXHRcdGRpYWxvZzogZmFsc2VcclxuXHR9LFxyXG5cclxuXHRfY3JlYXRlOiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuX3N1cGVyKCk7XHJcblx0XHRpZiAoIHRoaXMub3B0aW9ucy5kaWFsb2cgKSB7XHJcblxyXG5cdFx0XHQkLmV4dGVuZCggdGhpcywge1xyXG5cdFx0XHRcdF9pbm5lcjogdGhpcy5lbGVtZW50LmNoaWxkcmVuKCksXHJcblx0XHRcdFx0X2hlYWRlckNsb3NlQnV0dG9uOiBudWxsXHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0aWYgKCAhdGhpcy5vcHRpb25zLmVuaGFuY2VkICkge1xyXG5cdFx0XHRcdHRoaXMuX3NldENsb3NlQnRuKCB0aGlzLm9wdGlvbnMuY2xvc2VCdG4gKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9lbmhhbmNlOiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuX3N1cGVyKCk7XHJcblxyXG5cdFx0Ly8gQ2xhc3MgdGhlIG1hcmt1cCBmb3IgZGlhbG9nIHN0eWxpbmcgYW5kIHdyYXAgaW50ZXJpb3JcclxuXHRcdGlmICggdGhpcy5vcHRpb25zLmRpYWxvZyApIHtcclxuXHRcdFx0dGhpcy5lbGVtZW50LmFkZENsYXNzKCBcInVpLWRpYWxvZ1wiIClcclxuXHRcdFx0XHQud3JhcElubmVyKCAkKCBcIjxkaXYvPlwiLCB7XHJcblxyXG5cdFx0XHRcdFx0Ly8gQVJJQSByb2xlXHJcblx0XHRcdFx0XHRcInJvbGVcIiA6IFwiZGlhbG9nXCIsXHJcblx0XHRcdFx0XHRcImNsYXNzXCIgOiBcInVpLWRpYWxvZy1jb250YWluIHVpLW92ZXJsYXktc2hhZG93XCIgK1xyXG5cdFx0XHRcdFx0XHQoIHRoaXMub3B0aW9ucy5jb3JuZXJzID8gXCIgdWktY29ybmVyLWFsbFwiIDogXCJcIiApXHJcblx0XHRcdFx0fSkpO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9zZXRPcHRpb25zOiBmdW5jdGlvbiggb3B0aW9ucyApIHtcclxuXHRcdHZhciBjbG9zZUJ1dHRvbkxvY2F0aW9uLCBjbG9zZUJ1dHRvblRleHQsXHJcblx0XHRcdGN1cnJlbnRPcHRzID0gdGhpcy5vcHRpb25zO1xyXG5cclxuXHRcdGlmICggb3B0aW9ucy5jb3JuZXJzICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdHRoaXMuX2lubmVyLnRvZ2dsZUNsYXNzKCBcInVpLWNvcm5lci1hbGxcIiwgISFvcHRpb25zLmNvcm5lcnMgKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIG9wdGlvbnMub3ZlcmxheVRoZW1lICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdGlmICggJC5tb2JpbGUuYWN0aXZlUGFnZVsgMCBdID09PSB0aGlzLmVsZW1lbnRbIDAgXSApIHtcclxuXHRcdFx0XHRjdXJyZW50T3B0cy5vdmVybGF5VGhlbWUgPSBvcHRpb25zLm92ZXJsYXlUaGVtZTtcclxuXHRcdFx0XHR0aGlzLl9oYW5kbGVQYWdlQmVmb3JlU2hvdygpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBvcHRpb25zLmNsb3NlQnRuVGV4dCAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRjbG9zZUJ1dHRvbkxvY2F0aW9uID0gY3VycmVudE9wdHMuY2xvc2VCdG47XHJcblx0XHRcdGNsb3NlQnV0dG9uVGV4dCA9IG9wdGlvbnMuY2xvc2VCdG5UZXh0O1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggb3B0aW9ucy5jbG9zZUJ0biAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRjbG9zZUJ1dHRvbkxvY2F0aW9uID0gb3B0aW9ucy5jbG9zZUJ0bjtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIGNsb3NlQnV0dG9uTG9jYXRpb24gKSB7XHJcblx0XHRcdHRoaXMuX3NldENsb3NlQnRuKCBjbG9zZUJ1dHRvbkxvY2F0aW9uLCBjbG9zZUJ1dHRvblRleHQgKTtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLl9zdXBlciggb3B0aW9ucyApO1xyXG5cdH0sXHJcblxyXG5cdF9oYW5kbGVQYWdlQmVmb3JlU2hvdzogZnVuY3Rpb24gKCkge1xyXG5cdFx0aWYgKCB0aGlzLm9wdGlvbnMub3ZlcmxheVRoZW1lICYmIHRoaXMub3B0aW9ucy5kaWFsb2cgKSB7XHJcblx0XHRcdHRoaXMucmVtb3ZlQ29udGFpbmVyQmFja2dyb3VuZCgpO1xyXG5cdFx0XHR0aGlzLnNldENvbnRhaW5lckJhY2tncm91bmQoIHRoaXMub3B0aW9ucy5vdmVybGF5VGhlbWUgKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHRoaXMuX3N1cGVyKCk7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X3NldENsb3NlQnRuOiBmdW5jdGlvbiggbG9jYXRpb24sIHRleHQgKSB7XHJcblx0XHR2YXIgZHN0LFxyXG5cdFx0XHRidG4gPSB0aGlzLl9oZWFkZXJDbG9zZUJ1dHRvbjtcclxuXHJcblx0XHQvLyBTYW5pdGl6ZSB2YWx1ZVxyXG5cdFx0bG9jYXRpb24gPSBcImxlZnRcIiA9PT0gbG9jYXRpb24gPyBcImxlZnRcIiA6IFwicmlnaHRcIiA9PT0gbG9jYXRpb24gPyBcInJpZ2h0XCIgOiBcIm5vbmVcIjtcclxuXHJcblx0XHRpZiAoIFwibm9uZVwiID09PSBsb2NhdGlvbiApIHtcclxuXHRcdFx0aWYgKCBidG4gKSB7XHJcblx0XHRcdFx0YnRuLnJlbW92ZSgpO1xyXG5cdFx0XHRcdGJ0biA9IG51bGw7XHJcblx0XHRcdH1cclxuXHRcdH0gZWxzZSBpZiAoIGJ0biApIHtcclxuXHRcdFx0YnRuLnJlbW92ZUNsYXNzKCBcInVpLWJ0bi1sZWZ0IHVpLWJ0bi1yaWdodFwiICkuYWRkQ2xhc3MoIFwidWktYnRuLVwiICsgbG9jYXRpb24gKTtcclxuXHRcdFx0aWYgKCB0ZXh0ICkge1xyXG5cdFx0XHRcdGJ0bi50ZXh0KCB0ZXh0ICk7XHJcblx0XHRcdH1cclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdGRzdCA9IHRoaXMuX2lubmVyLmZpbmQoIFwiOmpxbURhdGEocm9sZT0naGVhZGVyJylcIiApLmZpcnN0KCk7XHJcblx0XHRcdGJ0biA9ICQoIFwiPGE+PC9hPlwiLCB7XHJcblx0XHRcdFx0XHRcImhyZWZcIjogXCIjXCIsXHJcblx0XHRcdFx0XHRcImNsYXNzXCI6IFwidWktYnRuIHVpLWNvcm5lci1hbGwgdWktaWNvbi1kZWxldGUgdWktYnRuLWljb24tbm90ZXh0IHVpLWJ0bi1cIiArIGxvY2F0aW9uXHJcblx0XHRcdFx0fSlcclxuXHRcdFx0XHQuYXR0ciggXCJkYXRhLVwiICsgJC5tb2JpbGUubnMgKyBcInJlbFwiLCBcImJhY2tcIiApXHJcblx0XHRcdFx0LnRleHQoIHRleHQgfHwgdGhpcy5vcHRpb25zLmNsb3NlQnRuVGV4dCB8fCBcIlwiIClcclxuXHRcdFx0XHQucHJlcGVuZFRvKCBkc3QgKTtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLl9oZWFkZXJDbG9zZUJ1dHRvbiA9IGJ0bjtcclxuXHR9XHJcbn0pO1xyXG5cclxufSkoIGpRdWVyeSwgdGhpcyApO1xyXG5cclxuKGZ1bmN0aW9uKCAkLCB3aW5kb3csIHVuZGVmaW5lZCApIHtcclxuXHJcbiQud2lkZ2V0KCBcIm1vYmlsZS5kaWFsb2dcIiwge1xyXG5cdG9wdGlvbnM6IHtcclxuXHJcblx0XHQvLyBBY2NlcHRzIGxlZnQsIHJpZ2h0IGFuZCBub25lXHJcblx0XHRjbG9zZUJ0bjogXCJsZWZ0XCIsXHJcblx0XHRjbG9zZUJ0blRleHQ6IFwiQ2xvc2VcIixcclxuXHRcdG92ZXJsYXlUaGVtZTogXCJhXCIsXHJcblx0XHRjb3JuZXJzOiB0cnVlXHJcblx0fSxcclxuXHJcblx0Ly8gT3ZlcnJpZGUgdGhlIHRoZW1lIHNldCBieSB0aGUgcGFnZSBwbHVnaW4gb24gcGFnZXNob3dcclxuXHRfaGFuZGxlUGFnZUJlZm9yZVNob3c6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5faXNDbG9zZWFibGUgPSB0cnVlO1xyXG5cdFx0aWYgKCB0aGlzLm9wdGlvbnMub3ZlcmxheVRoZW1lICkge1xyXG5cdFx0XHR0aGlzLmVsZW1lbnRcclxuXHRcdFx0XHQucGFnZSggXCJyZW1vdmVDb250YWluZXJCYWNrZ3JvdW5kXCIgKVxyXG5cdFx0XHRcdC5wYWdlKCBcInNldENvbnRhaW5lckJhY2tncm91bmRcIiwgdGhpcy5vcHRpb25zLm92ZXJsYXlUaGVtZSApO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9oYW5kbGVQYWdlQmVmb3JlSGlkZTogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLl9pc0Nsb3NlYWJsZSA9IGZhbHNlO1xyXG5cdH0sXHJcblxyXG5cdC8vIGNsaWNrIGFuZCBzdWJtaXQgZXZlbnRzOlxyXG5cdC8vIC0gY2xpY2tzIGFuZCBzdWJtaXRzIHNob3VsZCB1c2UgdGhlIGNsb3NpbmcgdHJhbnNpdGlvbiB0aGF0IHRoZSBkaWFsb2dcclxuXHQvLyAgIG9wZW5lZCB3aXRoIHVubGVzcyBhIGRhdGEtdHJhbnNpdGlvbiBpcyBzcGVjaWZpZWQgb24gdGhlIGxpbmsvZm9ybVxyXG5cdC8vIC0gaWYgdGhlIGNsaWNrIHdhcyBvbiB0aGUgY2xvc2UgYnV0dG9uLCBvciB0aGUgbGluayBoYXMgYSBkYXRhLXJlbD1cImJhY2tcIlxyXG5cdC8vICAgaXQnbGwgZ28gYmFjayBpbiBoaXN0b3J5IG5hdHVyYWxseVxyXG5cdF9oYW5kbGVWQ2xpY2tTdWJtaXQ6IGZ1bmN0aW9uKCBldmVudCApIHtcclxuXHRcdHZhciBhdHRycyxcclxuXHRcdFx0JHRhcmdldCA9ICQoIGV2ZW50LnRhcmdldCApLmNsb3Nlc3QoIGV2ZW50LnR5cGUgPT09IFwidmNsaWNrXCIgPyBcImFcIiA6IFwiZm9ybVwiICk7XHJcblxyXG5cdFx0aWYgKCAkdGFyZ2V0Lmxlbmd0aCAmJiAhJHRhcmdldC5qcW1EYXRhKCBcInRyYW5zaXRpb25cIiApICkge1xyXG5cdFx0XHRhdHRycyA9IHt9O1xyXG5cdFx0XHRhdHRyc1sgXCJkYXRhLVwiICsgJC5tb2JpbGUubnMgKyBcInRyYW5zaXRpb25cIiBdID1cclxuXHRcdFx0XHQoICQubW9iaWxlLm5hdmlnYXRlLmhpc3RvcnkuZ2V0QWN0aXZlKCkgfHwge30gKVsgXCJ0cmFuc2l0aW9uXCIgXSB8fFxyXG5cdFx0XHRcdCQubW9iaWxlLmRlZmF1bHREaWFsb2dUcmFuc2l0aW9uO1xyXG5cdFx0XHRhdHRyc1sgXCJkYXRhLVwiICsgJC5tb2JpbGUubnMgKyBcImRpcmVjdGlvblwiIF0gPSBcInJldmVyc2VcIjtcclxuXHRcdFx0JHRhcmdldC5hdHRyKCBhdHRycyApO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9jcmVhdGU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIGVsZW0gPSB0aGlzLmVsZW1lbnQsXHJcblx0XHRcdG9wdHMgPSB0aGlzLm9wdGlvbnM7XHJcblxyXG5cdFx0Ly8gQ2xhc3MgdGhlIG1hcmt1cCBmb3IgZGlhbG9nIHN0eWxpbmcgYW5kIHdyYXAgaW50ZXJpb3JcclxuXHRcdGVsZW0uYWRkQ2xhc3MoIFwidWktZGlhbG9nXCIgKVxyXG5cdFx0XHQud3JhcElubmVyKCAkKCBcIjxkaXYvPlwiLCB7XHJcblxyXG5cdFx0XHRcdC8vIEFSSUEgcm9sZVxyXG5cdFx0XHRcdFwicm9sZVwiIDogXCJkaWFsb2dcIixcclxuXHRcdFx0XHRcImNsYXNzXCIgOiBcInVpLWRpYWxvZy1jb250YWluIHVpLW92ZXJsYXktc2hhZG93XCIgK1xyXG5cdFx0XHRcdFx0KCAhIW9wdHMuY29ybmVycyA/IFwiIHVpLWNvcm5lci1hbGxcIiA6IFwiXCIgKVxyXG5cdFx0XHR9KSk7XHJcblxyXG5cdFx0JC5leHRlbmQoIHRoaXMsIHtcclxuXHRcdFx0X2lzQ2xvc2VhYmxlOiBmYWxzZSxcclxuXHRcdFx0X2lubmVyOiBlbGVtLmNoaWxkcmVuKCksXHJcblx0XHRcdF9oZWFkZXJDbG9zZUJ1dHRvbjogbnVsbFxyXG5cdFx0fSk7XHJcblxyXG5cdFx0dGhpcy5fb24oIGVsZW0sIHtcclxuXHRcdFx0dmNsaWNrOiBcIl9oYW5kbGVWQ2xpY2tTdWJtaXRcIixcclxuXHRcdFx0c3VibWl0OiBcIl9oYW5kbGVWQ2xpY2tTdWJtaXRcIixcclxuXHRcdFx0cGFnZWJlZm9yZXNob3c6IFwiX2hhbmRsZVBhZ2VCZWZvcmVTaG93XCIsXHJcblx0XHRcdHBhZ2ViZWZvcmVoaWRlOiBcIl9oYW5kbGVQYWdlQmVmb3JlSGlkZVwiXHJcblx0XHR9KTtcclxuXHJcblx0XHR0aGlzLl9zZXRDbG9zZUJ0biggb3B0cy5jbG9zZUJ0biApO1xyXG5cdH0sXHJcblxyXG5cdF9zZXRPcHRpb25zOiBmdW5jdGlvbiggb3B0aW9ucyApIHtcclxuXHRcdHZhciBjbG9zZUJ1dHRvbkxvY2F0aW9uLCBjbG9zZUJ1dHRvblRleHQsXHJcblx0XHRcdGN1cnJlbnRPcHRzID0gdGhpcy5vcHRpb25zO1xyXG5cclxuXHRcdGlmICggb3B0aW9ucy5jb3JuZXJzICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdHRoaXMuX2lubmVyLnRvZ2dsZUNsYXNzKCBcInVpLWNvcm5lci1hbGxcIiwgISFvcHRpb25zLmNvcm5lcnMgKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIG9wdGlvbnMub3ZlcmxheVRoZW1lICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdGlmICggJC5tb2JpbGUuYWN0aXZlUGFnZVsgMCBdID09PSB0aGlzLmVsZW1lbnRbIDAgXSApIHtcclxuXHRcdFx0XHRjdXJyZW50T3B0cy5vdmVybGF5VGhlbWUgPSBvcHRpb25zLm92ZXJsYXlUaGVtZTtcclxuXHRcdFx0XHR0aGlzLl9oYW5kbGVQYWdlQmVmb3JlU2hvdygpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBvcHRpb25zLmNsb3NlQnRuVGV4dCAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRjbG9zZUJ1dHRvbkxvY2F0aW9uID0gY3VycmVudE9wdHMuY2xvc2VCdG47XHJcblx0XHRcdGNsb3NlQnV0dG9uVGV4dCA9IG9wdGlvbnMuY2xvc2VCdG5UZXh0O1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggb3B0aW9ucy5jbG9zZUJ0biAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRjbG9zZUJ1dHRvbkxvY2F0aW9uID0gb3B0aW9ucy5jbG9zZUJ0bjtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIGNsb3NlQnV0dG9uTG9jYXRpb24gKSB7XHJcblx0XHRcdHRoaXMuX3NldENsb3NlQnRuKCBjbG9zZUJ1dHRvbkxvY2F0aW9uLCBjbG9zZUJ1dHRvblRleHQgKTtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLl9zdXBlciggb3B0aW9ucyApO1xyXG5cdH0sXHJcblxyXG5cdF9zZXRDbG9zZUJ0bjogZnVuY3Rpb24oIGxvY2F0aW9uLCB0ZXh0ICkge1xyXG5cdFx0dmFyIGRzdCxcclxuXHRcdFx0YnRuID0gdGhpcy5faGVhZGVyQ2xvc2VCdXR0b247XHJcblxyXG5cdFx0Ly8gU2FuaXRpemUgdmFsdWVcclxuXHRcdGxvY2F0aW9uID0gXCJsZWZ0XCIgPT09IGxvY2F0aW9uID8gXCJsZWZ0XCIgOiBcInJpZ2h0XCIgPT09IGxvY2F0aW9uID8gXCJyaWdodFwiIDogXCJub25lXCI7XHJcblxyXG5cdFx0aWYgKCBcIm5vbmVcIiA9PT0gbG9jYXRpb24gKSB7XHJcblx0XHRcdGlmICggYnRuICkge1xyXG5cdFx0XHRcdGJ0bi5yZW1vdmUoKTtcclxuXHRcdFx0XHRidG4gPSBudWxsO1xyXG5cdFx0XHR9XHJcblx0XHR9IGVsc2UgaWYgKCBidG4gKSB7XHJcblx0XHRcdGJ0bi5yZW1vdmVDbGFzcyggXCJ1aS1idG4tbGVmdCB1aS1idG4tcmlnaHRcIiApLmFkZENsYXNzKCBcInVpLWJ0bi1cIiArIGxvY2F0aW9uICk7XHJcblx0XHRcdGlmICggdGV4dCApIHtcclxuXHRcdFx0XHRidG4udGV4dCggdGV4dCApO1xyXG5cdFx0XHR9XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRkc3QgPSB0aGlzLl9pbm5lci5maW5kKCBcIjpqcW1EYXRhKHJvbGU9J2hlYWRlcicpXCIgKS5maXJzdCgpO1xyXG5cdFx0XHRidG4gPSAkKCBcIjxhPjwvYT5cIiwge1xyXG5cdFx0XHRcdFx0XCJyb2xlXCI6IFwiYnV0dG9uXCIsXHJcblx0XHRcdFx0XHRcImhyZWZcIjogXCIjXCIsXHJcblx0XHRcdFx0XHRcImNsYXNzXCI6IFwidWktYnRuIHVpLWNvcm5lci1hbGwgdWktaWNvbi1kZWxldGUgdWktYnRuLWljb24tbm90ZXh0IHVpLWJ0bi1cIiArIGxvY2F0aW9uXHJcblx0XHRcdFx0fSlcclxuXHRcdFx0XHQudGV4dCggdGV4dCB8fCB0aGlzLm9wdGlvbnMuY2xvc2VCdG5UZXh0IHx8IFwiXCIgKVxyXG5cdFx0XHRcdC5wcmVwZW5kVG8oIGRzdCApO1xyXG5cdFx0XHR0aGlzLl9vbiggYnRuLCB7IGNsaWNrOiBcImNsb3NlXCIgfSApO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuX2hlYWRlckNsb3NlQnV0dG9uID0gYnRuO1xyXG5cdH0sXHJcblxyXG5cdC8vIENsb3NlIG1ldGhvZCBnb2VzIGJhY2sgaW4gaGlzdG9yeVxyXG5cdGNsb3NlOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBoaXN0ID0gJC5tb2JpbGUubmF2aWdhdGUuaGlzdG9yeTtcclxuXHJcblx0XHRpZiAoIHRoaXMuX2lzQ2xvc2VhYmxlICkge1xyXG5cdFx0XHR0aGlzLl9pc0Nsb3NlYWJsZSA9IGZhbHNlO1xyXG5cdFx0XHQvLyBJZiB0aGUgaGFzaCBsaXN0ZW5pbmcgaXMgZW5hYmxlZCBhbmQgdGhlcmUgaXMgYXQgbGVhc3Qgb25lIHByZWNlZGluZyBoaXN0b3J5XHJcblx0XHRcdC8vIGVudHJ5IGl0J3Mgb2sgdG8gZ28gYmFjay4gSW5pdGlhbCBwYWdlcyB3aXRoIHRoZSBkaWFsb2cgaGFzaCBzdGF0ZSBhcmUgYW4gZXhhbXBsZVxyXG5cdFx0XHQvLyB3aGVyZSB0aGUgc3RhY2sgY2hlY2sgaXMgbmVjZXNzYXJ5XHJcblx0XHRcdGlmICggJC5tb2JpbGUuaGFzaExpc3RlbmluZ0VuYWJsZWQgJiYgaGlzdC5hY3RpdmVJbmRleCA+IDAgKSB7XHJcblx0XHRcdFx0JC5tb2JpbGUuYmFjaygpO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdCQubW9iaWxlLnBhZ2VDb250YWluZXIucGFnZWNvbnRhaW5lciggXCJiYWNrXCIgKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxufSk7XHJcblxyXG59KSggalF1ZXJ5LCB0aGlzICk7XHJcblxyXG4oZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcclxuXHJcbnZhciBySW5pdGlhbExldHRlciA9IC8oW0EtWl0pL2csXHJcblxyXG5cdC8vIENvbnN0cnVjdCBpY29ucG9zIGNsYXNzIGZyb20gaWNvbnBvcyB2YWx1ZVxyXG5cdGljb25wb3NDbGFzcyA9IGZ1bmN0aW9uKCBpY29ucG9zICkge1xyXG5cdFx0cmV0dXJuICggXCJ1aS1idG4taWNvbi1cIiArICggaWNvbnBvcyA9PT0gbnVsbCA/IFwibGVmdFwiIDogaWNvbnBvcyApICk7XHJcblx0fTtcclxuXHJcbiQud2lkZ2V0KCBcIm1vYmlsZS5jb2xsYXBzaWJsZVwiLCB7XHJcblx0b3B0aW9uczoge1xyXG5cdFx0ZW5oYW5jZWQ6IGZhbHNlLFxyXG5cdFx0ZXhwYW5kQ3VlVGV4dDogbnVsbCxcclxuXHRcdGNvbGxhcHNlQ3VlVGV4dDogbnVsbCxcclxuXHRcdGNvbGxhcHNlZDogdHJ1ZSxcclxuXHRcdGhlYWRpbmc6IFwiaDEsaDIsaDMsaDQsaDUsaDYsbGVnZW5kXCIsXHJcblx0XHRjb2xsYXBzZWRJY29uOiBudWxsLFxyXG5cdFx0ZXhwYW5kZWRJY29uOiBudWxsLFxyXG5cdFx0aWNvbnBvczogbnVsbCxcclxuXHRcdHRoZW1lOiBudWxsLFxyXG5cdFx0Y29udGVudFRoZW1lOiBudWxsLFxyXG5cdFx0aW5zZXQ6IG51bGwsXHJcblx0XHRjb3JuZXJzOiBudWxsLFxyXG5cdFx0bWluaTogbnVsbFxyXG5cdH0sXHJcblxyXG5cdF9jcmVhdGU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIGVsZW0gPSB0aGlzLmVsZW1lbnQsXHJcblx0XHRcdHVpID0ge1xyXG5cdFx0XHRcdGFjY29yZGlvbjogZWxlbVxyXG5cdFx0XHRcdFx0LmNsb3Nlc3QoIFwiOmpxbURhdGEocm9sZT0nY29sbGFwc2libGUtc2V0JyksXCIgK1xyXG5cdFx0XHRcdFx0XHRcIjpqcW1EYXRhKHJvbGU9J2NvbGxhcHNpYmxlc2V0JylcIiArXHJcblx0XHRcdFx0XHRcdCggJC5tb2JpbGUuY29sbGFwc2libGVzZXQgPyBcIiwgOm1vYmlsZS1jb2xsYXBzaWJsZXNldFwiIDpcclxuXHRcdFx0XHRcdFx0XHRcIlwiICkgKVxyXG5cdFx0XHRcdFx0LmFkZENsYXNzKCBcInVpLWNvbGxhcHNpYmxlLXNldFwiIClcclxuXHRcdFx0fTtcclxuXHJcblx0XHR0aGlzLl91aSA9IHVpO1xyXG5cdFx0dGhpcy5fcmVuZGVyZWRPcHRpb25zID0gdGhpcy5fZ2V0T3B0aW9ucyggdGhpcy5vcHRpb25zICk7XHJcblxyXG5cdFx0aWYgKCB0aGlzLm9wdGlvbnMuZW5oYW5jZWQgKSB7XHJcblx0XHRcdHVpLmhlYWRpbmcgPSB0aGlzLmVsZW1lbnQuY2hpbGRyZW4oIFwiLnVpLWNvbGxhcHNpYmxlLWhlYWRpbmdcIiApO1xyXG5cdFx0XHR1aS5jb250ZW50ID0gdWkuaGVhZGluZy5uZXh0KCk7XHJcblx0XHRcdHVpLmFuY2hvciA9IHVpLmhlYWRpbmcuY2hpbGRyZW4oKTtcclxuXHRcdFx0dWkuc3RhdHVzID0gdWkuYW5jaG9yLmNoaWxkcmVuKCBcIi51aS1jb2xsYXBzaWJsZS1oZWFkaW5nLXN0YXR1c1wiICk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHR0aGlzLl9lbmhhbmNlKCBlbGVtLCB1aSApO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuX29uKCB1aS5oZWFkaW5nLCB7XHJcblx0XHRcdFwidGFwXCI6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHVpLmhlYWRpbmcuZmluZCggXCJhXCIgKS5maXJzdCgpLmFkZENsYXNzKCAkLm1vYmlsZS5hY3RpdmVCdG5DbGFzcyApO1xyXG5cdFx0XHR9LFxyXG5cclxuXHRcdFx0XCJjbGlja1wiOiBmdW5jdGlvbiggZXZlbnQgKSB7XHJcblx0XHRcdFx0dGhpcy5faGFuZGxlRXhwYW5kQ29sbGFwc2UoICF1aS5oZWFkaW5nLmhhc0NsYXNzKCBcInVpLWNvbGxhcHNpYmxlLWhlYWRpbmctY29sbGFwc2VkXCIgKSApO1xyXG5cdFx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFx0ZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdH0sXHJcblxyXG5cdC8vIEFkanVzdCB0aGUga2V5cyBpbnNpZGUgb3B0aW9ucyBmb3IgaW5oZXJpdGVkIHZhbHVlc1xyXG5cdF9nZXRPcHRpb25zOiBmdW5jdGlvbiggb3B0aW9ucyApIHtcclxuXHRcdHZhciBrZXksXHJcblx0XHRcdGFjY29yZGlvbiA9IHRoaXMuX3VpLmFjY29yZGlvbixcclxuXHRcdFx0YWNjb3JkaW9uV2lkZ2V0ID0gdGhpcy5fdWkuYWNjb3JkaW9uV2lkZ2V0O1xyXG5cclxuXHRcdC8vIENvcHkgb3B0aW9uc1xyXG5cdFx0b3B0aW9ucyA9ICQuZXh0ZW5kKCB7fSwgb3B0aW9ucyApO1xyXG5cclxuXHRcdGlmICggYWNjb3JkaW9uLmxlbmd0aCAmJiAhYWNjb3JkaW9uV2lkZ2V0ICkge1xyXG5cdFx0XHR0aGlzLl91aS5hY2NvcmRpb25XaWRnZXQgPVxyXG5cdFx0XHRhY2NvcmRpb25XaWRnZXQgPSBhY2NvcmRpb24uZGF0YSggXCJtb2JpbGUtY29sbGFwc2libGVzZXRcIiApO1xyXG5cdFx0fVxyXG5cclxuXHRcdGZvciAoIGtleSBpbiBvcHRpb25zICkge1xyXG5cclxuXHRcdFx0Ly8gUmV0cmlldmUgdGhlIG9wdGlvbiB2YWx1ZSBmaXJzdCBmcm9tIHRoZSBvcHRpb25zIG9iamVjdCBwYXNzZWQgaW4gYW5kLCBpZlxyXG5cdFx0XHQvLyBudWxsLCBmcm9tIHRoZSBwYXJlbnQgYWNjb3JkaW9uIG9yLCBpZiB0aGF0J3MgbnVsbCB0b28sIG9yIGlmIHRoZXJlJ3Mgbm9cclxuXHRcdFx0Ly8gcGFyZW50IGFjY29yZGlvbiwgdGhlbiBmcm9tIHRoZSBkZWZhdWx0cy5cclxuXHRcdFx0b3B0aW9uc1sga2V5IF0gPVxyXG5cdFx0XHRcdCggb3B0aW9uc1sga2V5IF0gIT0gbnVsbCApID8gb3B0aW9uc1sga2V5IF0gOlxyXG5cdFx0XHRcdCggYWNjb3JkaW9uV2lkZ2V0ICkgPyBhY2NvcmRpb25XaWRnZXQub3B0aW9uc1sga2V5IF0gOlxyXG5cdFx0XHRcdGFjY29yZGlvbi5sZW5ndGggPyAkLm1vYmlsZS5nZXRBdHRyaWJ1dGUoIGFjY29yZGlvblsgMCBdLFxyXG5cdFx0XHRcdFx0a2V5LnJlcGxhY2UoIHJJbml0aWFsTGV0dGVyLCBcIi0kMVwiICkudG9Mb3dlckNhc2UoKSApOlxyXG5cdFx0XHRcdG51bGw7XHJcblxyXG5cdFx0XHRpZiAoIG51bGwgPT0gb3B0aW9uc1sga2V5IF0gKSB7XHJcblx0XHRcdFx0b3B0aW9uc1sga2V5IF0gPSAkLm1vYmlsZS5jb2xsYXBzaWJsZS5kZWZhdWx0c1sga2V5IF07XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gb3B0aW9ucztcclxuXHR9LFxyXG5cclxuXHRfdGhlbWVDbGFzc0Zyb21PcHRpb246IGZ1bmN0aW9uKCBwcmVmaXgsIHZhbHVlICkge1xyXG5cdFx0cmV0dXJuICggdmFsdWUgPyAoIHZhbHVlID09PSBcIm5vbmVcIiA/IFwiXCIgOiBwcmVmaXggKyB2YWx1ZSApIDogXCJcIiApO1xyXG5cdH0sXHJcblxyXG5cdF9lbmhhbmNlOiBmdW5jdGlvbiggZWxlbSwgdWkgKSB7XHJcblx0XHR2YXIgaWNvbmNsYXNzLFxyXG5cdFx0XHRvcHRzID0gdGhpcy5fcmVuZGVyZWRPcHRpb25zLFxyXG5cdFx0XHRjb250ZW50VGhlbWVDbGFzcyA9IHRoaXMuX3RoZW1lQ2xhc3NGcm9tT3B0aW9uKCBcInVpLWJvZHktXCIsIG9wdHMuY29udGVudFRoZW1lICk7XHJcblxyXG5cdFx0ZWxlbS5hZGRDbGFzcyggXCJ1aS1jb2xsYXBzaWJsZSBcIiArXHJcblx0XHRcdCggb3B0cy5pbnNldCA/IFwidWktY29sbGFwc2libGUtaW5zZXQgXCIgOiBcIlwiICkgK1xyXG5cdFx0XHQoIG9wdHMuaW5zZXQgJiYgb3B0cy5jb3JuZXJzID8gXCJ1aS1jb3JuZXItYWxsIFwiIDogXCJcIiApICtcclxuXHRcdFx0KCBjb250ZW50VGhlbWVDbGFzcyA/IFwidWktY29sbGFwc2libGUtdGhlbWVkLWNvbnRlbnQgXCIgOiBcIlwiICkgKTtcclxuXHRcdHVpLm9yaWdpbmFsSGVhZGluZyA9IGVsZW0uY2hpbGRyZW4oIHRoaXMub3B0aW9ucy5oZWFkaW5nICkuZmlyc3QoKSxcclxuXHRcdHVpLmNvbnRlbnQgPSBlbGVtXHJcblx0XHRcdC53cmFwSW5uZXIoIFwiPGRpdiBcIiArXHJcblx0XHRcdFx0XCJjbGFzcz0ndWktY29sbGFwc2libGUtY29udGVudCBcIiArXHJcblx0XHRcdFx0Y29udGVudFRoZW1lQ2xhc3MgKyBcIic+PC9kaXY+XCIgKVxyXG5cdFx0XHQuY2hpbGRyZW4oIFwiLnVpLWNvbGxhcHNpYmxlLWNvbnRlbnRcIiApLFxyXG5cdFx0dWkuaGVhZGluZyA9IHVpLm9yaWdpbmFsSGVhZGluZztcclxuXHJcblx0XHQvLyBSZXBsYWNlIGNvbGxhcHNpYmxlSGVhZGluZyBpZiBpdCdzIGEgbGVnZW5kXHJcblx0XHRpZiAoIHVpLmhlYWRpbmcuaXMoIFwibGVnZW5kXCIgKSApIHtcclxuXHRcdFx0dWkuaGVhZGluZyA9ICQoIFwiPGRpdiByb2xlPSdoZWFkaW5nJz5cIisgdWkuaGVhZGluZy5odG1sKCkgK1wiPC9kaXY+XCIgKTtcclxuXHRcdFx0dWkucGxhY2Vob2xkZXIgPSAkKCBcIjxkaXY+PCEtLSBwbGFjZWhvbGRlciBmb3IgbGVnZW5kIC0tPjwvZGl2PlwiICkuaW5zZXJ0QmVmb3JlKCB1aS5vcmlnaW5hbEhlYWRpbmcgKTtcclxuXHRcdFx0dWkub3JpZ2luYWxIZWFkaW5nLnJlbW92ZSgpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGljb25jbGFzcyA9ICggb3B0cy5jb2xsYXBzZWQgPyAoIG9wdHMuY29sbGFwc2VkSWNvbiA/IFwidWktaWNvbi1cIiArIG9wdHMuY29sbGFwc2VkSWNvbiA6IFwiXCIgKTpcclxuXHRcdFx0KCBvcHRzLmV4cGFuZGVkSWNvbiA/IFwidWktaWNvbi1cIiArIG9wdHMuZXhwYW5kZWRJY29uIDogXCJcIiApICk7XHJcblxyXG5cdFx0dWkuc3RhdHVzID0gJCggXCI8c3BhbiBjbGFzcz0ndWktY29sbGFwc2libGUtaGVhZGluZy1zdGF0dXMnPjwvc3Bhbj5cIiApO1xyXG5cdFx0dWkuYW5jaG9yID0gdWkuaGVhZGluZ1xyXG5cdFx0XHQuZGV0YWNoKClcclxuXHRcdFx0Ly9tb2RpZnkgbWFya3VwICYgYXR0cmlidXRlc1xyXG5cdFx0XHQuYWRkQ2xhc3MoIFwidWktY29sbGFwc2libGUtaGVhZGluZ1wiIClcclxuXHRcdFx0LmFwcGVuZCggdWkuc3RhdHVzIClcclxuXHRcdFx0LndyYXBJbm5lciggXCI8YSBocmVmPScjJyBjbGFzcz0ndWktY29sbGFwc2libGUtaGVhZGluZy10b2dnbGUnPjwvYT5cIiApXHJcblx0XHRcdC5maW5kKCBcImFcIiApXHJcblx0XHRcdFx0LmZpcnN0KClcclxuXHRcdFx0XHQuYWRkQ2xhc3MoIFwidWktYnRuIFwiICtcclxuXHRcdFx0XHRcdCggaWNvbmNsYXNzID8gaWNvbmNsYXNzICsgXCIgXCIgOiBcIlwiICkgK1xyXG5cdFx0XHRcdFx0KCBpY29uY2xhc3MgPyBpY29ucG9zQ2xhc3MoIG9wdHMuaWNvbnBvcyApICtcclxuXHRcdFx0XHRcdFx0XCIgXCIgOiBcIlwiICkgK1xyXG5cdFx0XHRcdFx0dGhpcy5fdGhlbWVDbGFzc0Zyb21PcHRpb24oIFwidWktYnRuLVwiLCBvcHRzLnRoZW1lICkgKyBcIiBcIiArXHJcblx0XHRcdFx0XHQoIG9wdHMubWluaSA/IFwidWktbWluaSBcIiA6IFwiXCIgKSApO1xyXG5cclxuXHRcdC8vZHJvcCBoZWFkaW5nIGluIGJlZm9yZSBjb250ZW50XHJcblx0XHR1aS5oZWFkaW5nLmluc2VydEJlZm9yZSggdWkuY29udGVudCApO1xyXG5cclxuXHRcdHRoaXMuX2hhbmRsZUV4cGFuZENvbGxhcHNlKCB0aGlzLm9wdGlvbnMuY29sbGFwc2VkICk7XHJcblxyXG5cdFx0cmV0dXJuIHVpO1xyXG5cdH0sXHJcblxyXG5cdHJlZnJlc2g6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5fYXBwbHlPcHRpb25zKCB0aGlzLm9wdGlvbnMgKTtcclxuXHRcdHRoaXMuX3JlbmRlcmVkT3B0aW9ucyA9IHRoaXMuX2dldE9wdGlvbnMoIHRoaXMub3B0aW9ucyApO1xyXG5cdH0sXHJcblxyXG5cdF9hcHBseU9wdGlvbnM6IGZ1bmN0aW9uKCBvcHRpb25zICkge1xyXG5cdFx0dmFyIGlzQ29sbGFwc2VkLCBuZXdUaGVtZSwgb2xkVGhlbWUsIGhhc0Nvcm5lcnMsIGhhc0ljb24sXHJcblx0XHRcdGVsZW0gPSB0aGlzLmVsZW1lbnQsXHJcblx0XHRcdGN1cnJlbnRPcHRzID0gdGhpcy5fcmVuZGVyZWRPcHRpb25zLFxyXG5cdFx0XHR1aSA9IHRoaXMuX3VpLFxyXG5cdFx0XHRhbmNob3IgPSB1aS5hbmNob3IsXHJcblx0XHRcdHN0YXR1cyA9IHVpLnN0YXR1cyxcclxuXHRcdFx0b3B0cyA9IHRoaXMuX2dldE9wdGlvbnMoIG9wdGlvbnMgKTtcclxuXHJcblx0XHQvLyBGaXJzdCBhbmQgZm9yZW1vc3Qgd2UgbmVlZCB0byBtYWtlIHN1cmUgdGhlIGNvbGxhcHNpYmxlIGlzIGluIHRoZSBwcm9wZXJcclxuXHRcdC8vIHN0YXRlLCBpbiBjYXNlIHNvbWVib2R5IGRlY2lkZWQgdG8gY2hhbmdlIHRoZSBjb2xsYXBzZWQgb3B0aW9uIGF0IHRoZVxyXG5cdFx0Ly8gc2FtZSB0aW1lIGFzIGFub3RoZXIgb3B0aW9uXHJcblx0XHRpZiAoIG9wdGlvbnMuY29sbGFwc2VkICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdHRoaXMuX2hhbmRsZUV4cGFuZENvbGxhcHNlKCBvcHRpb25zLmNvbGxhcHNlZCApO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlzQ29sbGFwc2VkID0gZWxlbS5oYXNDbGFzcyggXCJ1aS1jb2xsYXBzaWJsZS1jb2xsYXBzZWRcIiApO1xyXG5cclxuXHRcdC8vIFdlIG9ubHkgbmVlZCB0byBhcHBseSB0aGUgY3VlIHRleHQgZm9yIHRoZSBjdXJyZW50IHN0YXRlIHJpZ2h0IGF3YXkuXHJcblx0XHQvLyBUaGUgY3VlIHRleHQgZm9yIHRoZSBhbHRlcm5hdGUgc3RhdGUgd2lsbCBiZSBzdG9yZWQgaW4gdGhlIG9wdGlvbnNcclxuXHRcdC8vIGFuZCBhcHBsaWVkIHRoZSBuZXh0IHRpbWUgdGhlIGNvbGxhcHNpYmxlJ3Mgc3RhdGUgaXMgdG9nZ2xlZFxyXG5cdFx0aWYgKCBpc0NvbGxhcHNlZCApIHtcclxuXHRcdFx0aWYgKCBvcHRzLmV4cGFuZEN1ZVRleHQgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0XHRzdGF0dXMudGV4dCggb3B0cy5leHBhbmRDdWVUZXh0ICk7XHJcblx0XHRcdH1cclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdGlmICggb3B0cy5jb2xsYXBzZUN1ZVRleHQgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0XHRzdGF0dXMudGV4dCggb3B0cy5jb2xsYXBzZUN1ZVRleHQgKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdC8vIFVwZGF0ZSBpY29uXHJcblxyXG5cdFx0Ly8gSXMgaXQgc3VwcG9zZWQgdG8gaGF2ZSBhbiBpY29uP1xyXG5cdFx0aGFzSWNvbiA9XHJcblxyXG5cdFx0XHQvLyBJZiB0aGUgY29sbGFwc2VkSWNvbiBpcyBiZWluZyBzZXQsIGNvbnN1bHQgdGhhdFxyXG5cdFx0XHQoIG9wdHMuY29sbGFwc2VkSWNvbiAhPT0gdW5kZWZpbmVkID8gb3B0cy5jb2xsYXBzZWRJY29uICE9PSBmYWxzZSA6XHJcblxyXG5cdFx0XHRcdC8vIE90aGVyd2lzZSBjb25zdWx0IHRoZSBleGlzdGluZyBvcHRpb24gdmFsdWVcclxuXHRcdFx0XHRjdXJyZW50T3B0cy5jb2xsYXBzZWRJY29uICE9PSBmYWxzZSApO1xyXG5cclxuXHJcblx0XHQvLyBJZiBhbnkgaWNvbi1yZWxhdGVkIG9wdGlvbnMgaGF2ZSBjaGFuZ2VkLCBtYWtlIHN1cmUgdGhlIG5ldyBpY29uXHJcblx0XHQvLyBzdGF0ZSBpcyByZWZsZWN0ZWQgYnkgZmlyc3QgcmVtb3ZpbmcgYWxsIGljb24tcmVsYXRlZCBjbGFzc2VzXHJcblx0XHQvLyByZWZsZWN0aW5nIHRoZSBjdXJyZW50IHN0YXRlIGFuZCB0aGVuIGFkZGluZyBhbGwgaWNvbi1yZWxhdGVkXHJcblx0XHQvLyBjbGFzc2VzIGZvciB0aGUgbmV3IHN0YXRlXHJcblx0XHRpZiAoICEoIG9wdHMuaWNvbnBvcyA9PT0gdW5kZWZpbmVkICYmXHJcblx0XHRcdG9wdHMuY29sbGFwc2VkSWNvbiA9PT0gdW5kZWZpbmVkICYmXHJcblx0XHRcdG9wdHMuZXhwYW5kZWRJY29uID09PSB1bmRlZmluZWQgKSApIHtcclxuXHJcblx0XHRcdC8vIFJlbW92ZSBhbGwgY3VycmVudCBpY29uLXJlbGF0ZWQgY2xhc3Nlc1xyXG5cdFx0XHRhbmNob3IucmVtb3ZlQ2xhc3MoIFsgaWNvbnBvc0NsYXNzKCBjdXJyZW50T3B0cy5pY29ucG9zICkgXVxyXG5cdFx0XHRcdC5jb25jYXQoICggY3VycmVudE9wdHMuZXhwYW5kZWRJY29uID9cclxuXHRcdFx0XHRcdFsgXCJ1aS1pY29uLVwiICsgY3VycmVudE9wdHMuZXhwYW5kZWRJY29uIF0gOiBbXSApIClcclxuXHRcdFx0XHQuY29uY2F0KCAoIGN1cnJlbnRPcHRzLmNvbGxhcHNlZEljb24gP1xyXG5cdFx0XHRcdFx0WyBcInVpLWljb24tXCIgKyBjdXJyZW50T3B0cy5jb2xsYXBzZWRJY29uIF0gOiBbXSApIClcclxuXHRcdFx0XHQuam9pbiggXCIgXCIgKSApO1xyXG5cclxuXHRcdFx0Ly8gQWRkIG5ldyBjbGFzc2VzIGlmIGFuIGljb24gaXMgc3VwcG9zZWQgdG8gYmUgcHJlc2VudFxyXG5cdFx0XHRpZiAoIGhhc0ljb24gKSB7XHJcblx0XHRcdFx0YW5jaG9yLmFkZENsYXNzKFxyXG5cdFx0XHRcdFx0WyBpY29ucG9zQ2xhc3MoIG9wdHMuaWNvbnBvcyAhPT0gdW5kZWZpbmVkID9cclxuXHRcdFx0XHRcdFx0b3B0cy5pY29ucG9zIDogY3VycmVudE9wdHMuaWNvbnBvcyApIF1cclxuXHRcdFx0XHRcdFx0LmNvbmNhdCggaXNDb2xsYXBzZWQgP1xyXG5cdFx0XHRcdFx0XHRcdFsgXCJ1aS1pY29uLVwiICsgKCBvcHRzLmNvbGxhcHNlZEljb24gIT09IHVuZGVmaW5lZCA/XHJcblx0XHRcdFx0XHRcdFx0XHRvcHRzLmNvbGxhcHNlZEljb24gOlxyXG5cdFx0XHRcdFx0XHRcdFx0Y3VycmVudE9wdHMuY29sbGFwc2VkSWNvbiApIF0gOlxyXG5cdFx0XHRcdFx0XHRcdFsgXCJ1aS1pY29uLVwiICsgKCBvcHRzLmV4cGFuZGVkSWNvbiAhPT0gdW5kZWZpbmVkID9cclxuXHRcdFx0XHRcdFx0XHRcdG9wdHMuZXhwYW5kZWRJY29uIDpcclxuXHRcdFx0XHRcdFx0XHRcdGN1cnJlbnRPcHRzLmV4cGFuZGVkSWNvbiApIF0gKVxyXG5cdFx0XHRcdFx0XHQuam9pbiggXCIgXCIgKSApO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBvcHRzLnRoZW1lICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdG9sZFRoZW1lID0gdGhpcy5fdGhlbWVDbGFzc0Zyb21PcHRpb24oIFwidWktYnRuLVwiLCBjdXJyZW50T3B0cy50aGVtZSApO1xyXG5cdFx0XHRuZXdUaGVtZSA9IHRoaXMuX3RoZW1lQ2xhc3NGcm9tT3B0aW9uKCBcInVpLWJ0bi1cIiwgb3B0cy50aGVtZSApO1xyXG5cdFx0XHRhbmNob3IucmVtb3ZlQ2xhc3MoIG9sZFRoZW1lICkuYWRkQ2xhc3MoIG5ld1RoZW1lICk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBvcHRzLmNvbnRlbnRUaGVtZSAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRvbGRUaGVtZSA9IHRoaXMuX3RoZW1lQ2xhc3NGcm9tT3B0aW9uKCBcInVpLWJvZHktXCIsXHJcblx0XHRcdFx0Y3VycmVudE9wdHMuY29udGVudFRoZW1lICk7XHJcblx0XHRcdG5ld1RoZW1lID0gdGhpcy5fdGhlbWVDbGFzc0Zyb21PcHRpb24oIFwidWktYm9keS1cIixcclxuXHRcdFx0XHRvcHRzLmNvbnRlbnRUaGVtZSApO1xyXG5cdFx0XHR1aS5jb250ZW50LnJlbW92ZUNsYXNzKCBvbGRUaGVtZSApLmFkZENsYXNzKCBuZXdUaGVtZSApO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggb3B0cy5pbnNldCAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRlbGVtLnRvZ2dsZUNsYXNzKCBcInVpLWNvbGxhcHNpYmxlLWluc2V0XCIsIG9wdHMuaW5zZXQgKTtcclxuXHRcdFx0aGFzQ29ybmVycyA9ICEhKCBvcHRzLmluc2V0ICYmICggb3B0cy5jb3JuZXJzIHx8IGN1cnJlbnRPcHRzLmNvcm5lcnMgKSApO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggb3B0cy5jb3JuZXJzICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdGhhc0Nvcm5lcnMgPSAhISggb3B0cy5jb3JuZXJzICYmICggb3B0cy5pbnNldCB8fCBjdXJyZW50T3B0cy5pbnNldCApICk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBoYXNDb3JuZXJzICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdGVsZW0udG9nZ2xlQ2xhc3MoIFwidWktY29ybmVyLWFsbFwiLCBoYXNDb3JuZXJzICk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBvcHRzLm1pbmkgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0YW5jaG9yLnRvZ2dsZUNsYXNzKCBcInVpLW1pbmlcIiwgb3B0cy5taW5pICk7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X3NldE9wdGlvbnM6IGZ1bmN0aW9uKCBvcHRpb25zICkge1xyXG5cdFx0dGhpcy5fYXBwbHlPcHRpb25zKCBvcHRpb25zICk7XHJcblx0XHR0aGlzLl9zdXBlciggb3B0aW9ucyApO1xyXG5cdFx0dGhpcy5fcmVuZGVyZWRPcHRpb25zID0gdGhpcy5fZ2V0T3B0aW9ucyggdGhpcy5vcHRpb25zICk7XHJcblx0fSxcclxuXHJcblx0X2hhbmRsZUV4cGFuZENvbGxhcHNlOiBmdW5jdGlvbiggaXNDb2xsYXBzZSApIHtcclxuXHRcdHZhciBvcHRzID0gdGhpcy5fcmVuZGVyZWRPcHRpb25zLFxyXG5cdFx0XHR1aSA9IHRoaXMuX3VpO1xyXG5cclxuXHRcdHVpLnN0YXR1cy50ZXh0KCBpc0NvbGxhcHNlID8gb3B0cy5leHBhbmRDdWVUZXh0IDogb3B0cy5jb2xsYXBzZUN1ZVRleHQgKTtcclxuXHRcdHVpLmhlYWRpbmdcclxuXHRcdFx0LnRvZ2dsZUNsYXNzKCBcInVpLWNvbGxhcHNpYmxlLWhlYWRpbmctY29sbGFwc2VkXCIsIGlzQ29sbGFwc2UgKVxyXG5cdFx0XHQuZmluZCggXCJhXCIgKS5maXJzdCgpXHJcblx0XHRcdC50b2dnbGVDbGFzcyggXCJ1aS1pY29uLVwiICsgb3B0cy5leHBhbmRlZEljb24sICFpc0NvbGxhcHNlIClcclxuXHJcblx0XHRcdC8vIGxvZ2ljIG9yIGNhdXNlIHNhbWUgaWNvbiBmb3IgZXhwYW5kZWQvY29sbGFwc2VkIHN0YXRlIHdvdWxkIHJlbW92ZSB0aGUgdWktaWNvbi1jbGFzc1xyXG5cdFx0XHQudG9nZ2xlQ2xhc3MoIFwidWktaWNvbi1cIiArIG9wdHMuY29sbGFwc2VkSWNvbiwgKCBpc0NvbGxhcHNlIHx8IG9wdHMuZXhwYW5kZWRJY29uID09PSBvcHRzLmNvbGxhcHNlZEljb24gKSApXHJcblx0XHRcdC5yZW1vdmVDbGFzcyggJC5tb2JpbGUuYWN0aXZlQnRuQ2xhc3MgKTtcclxuXHJcblx0XHR0aGlzLmVsZW1lbnQudG9nZ2xlQ2xhc3MoIFwidWktY29sbGFwc2libGUtY29sbGFwc2VkXCIsIGlzQ29sbGFwc2UgKTtcclxuXHRcdHVpLmNvbnRlbnRcclxuXHRcdFx0LnRvZ2dsZUNsYXNzKCBcInVpLWNvbGxhcHNpYmxlLWNvbnRlbnQtY29sbGFwc2VkXCIsIGlzQ29sbGFwc2UgKVxyXG5cdFx0XHQuYXR0ciggXCJhcmlhLWhpZGRlblwiLCBpc0NvbGxhcHNlIClcclxuXHRcdFx0LnRyaWdnZXIoIFwidXBkYXRlbGF5b3V0XCIgKTtcclxuXHRcdHRoaXMub3B0aW9ucy5jb2xsYXBzZWQgPSBpc0NvbGxhcHNlO1xyXG5cdFx0dGhpcy5fdHJpZ2dlciggaXNDb2xsYXBzZSA/IFwiY29sbGFwc2VcIiA6IFwiZXhwYW5kXCIgKTtcclxuXHR9LFxyXG5cclxuXHRleHBhbmQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5faGFuZGxlRXhwYW5kQ29sbGFwc2UoIGZhbHNlICk7XHJcblx0fSxcclxuXHJcblx0Y29sbGFwc2U6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5faGFuZGxlRXhwYW5kQ29sbGFwc2UoIHRydWUgKTtcclxuXHR9LFxyXG5cclxuXHRfZGVzdHJveTogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgdWkgPSB0aGlzLl91aSxcclxuXHRcdFx0b3B0cyA9IHRoaXMub3B0aW9ucztcclxuXHJcblx0XHRpZiAoIG9wdHMuZW5oYW5jZWQgKSB7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIHVpLnBsYWNlaG9sZGVyICkge1xyXG5cdFx0XHR1aS5vcmlnaW5hbEhlYWRpbmcuaW5zZXJ0QmVmb3JlKCB1aS5wbGFjZWhvbGRlciApO1xyXG5cdFx0XHR1aS5wbGFjZWhvbGRlci5yZW1vdmUoKTtcclxuXHRcdFx0dWkuaGVhZGluZy5yZW1vdmUoKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHVpLnN0YXR1cy5yZW1vdmUoKTtcclxuXHRcdFx0dWkuaGVhZGluZ1xyXG5cdFx0XHRcdC5yZW1vdmVDbGFzcyggXCJ1aS1jb2xsYXBzaWJsZS1oZWFkaW5nIHVpLWNvbGxhcHNpYmxlLWhlYWRpbmctY29sbGFwc2VkXCIgKVxyXG5cdFx0XHRcdC5jaGlsZHJlbigpXHJcblx0XHRcdFx0XHQuY29udGVudHMoKVxyXG5cdFx0XHRcdFx0XHQudW53cmFwKCk7XHJcblx0XHR9XHJcblxyXG5cdFx0dWkuYW5jaG9yLmNvbnRlbnRzKCkudW53cmFwKCk7XHJcblx0XHR1aS5jb250ZW50LmNvbnRlbnRzKCkudW53cmFwKCk7XHJcblx0XHR0aGlzLmVsZW1lbnRcclxuXHRcdFx0LnJlbW92ZUNsYXNzKCBcInVpLWNvbGxhcHNpYmxlIHVpLWNvbGxhcHNpYmxlLWNvbGxhcHNlZCBcIiArXHJcblx0XHRcdFx0XCJ1aS1jb2xsYXBzaWJsZS10aGVtZWQtY29udGVudCB1aS1jb2xsYXBzaWJsZS1pbnNldCB1aS1jb3JuZXItYWxsXCIgKTtcclxuXHR9XHJcbn0pO1xyXG5cclxuLy8gRGVmYXVsdHMgdG8gYmUgdXNlZCBieSBhbGwgaW5zdGFuY2VzIG9mIGNvbGxhcHNpYmxlIGlmIHBlci1pbnN0YW5jZSB2YWx1ZXNcclxuLy8gYXJlIHVuc2V0IG9yIGlmIG5vdGhpbmcgaXMgc3BlY2lmaWVkIGJ5IHdheSBvZiBpbmhlcml0YW5jZSBmcm9tIGFuIGFjY29yZGlvbi5cclxuLy8gTm90ZSB0aGF0IHRoaXMgaGFzaCBkb2VzIG5vdCBjb250YWluIG9wdGlvbnMgXCJjb2xsYXBzZWRcIiBvciBcImhlYWRpbmdcIixcclxuLy8gYmVjYXVzZSB0aG9zZSBhcmUgbm90IGluaGVyaXRhYmxlLlxyXG4kLm1vYmlsZS5jb2xsYXBzaWJsZS5kZWZhdWx0cyA9IHtcclxuXHRleHBhbmRDdWVUZXh0OiBcIiBjbGljayB0byBleHBhbmQgY29udGVudHNcIixcclxuXHRjb2xsYXBzZUN1ZVRleHQ6IFwiIGNsaWNrIHRvIGNvbGxhcHNlIGNvbnRlbnRzXCIsXHJcblx0Y29sbGFwc2VkSWNvbjogXCJwbHVzXCIsXHJcblx0Y29udGVudFRoZW1lOiBcImluaGVyaXRcIixcclxuXHRleHBhbmRlZEljb246IFwibWludXNcIixcclxuXHRpY29ucG9zOiBcImxlZnRcIixcclxuXHRpbnNldDogdHJ1ZSxcclxuXHRjb3JuZXJzOiB0cnVlLFxyXG5cdHRoZW1lOiBcImluaGVyaXRcIixcclxuXHRtaW5pOiBmYWxzZVxyXG59O1xyXG5cclxufSkoIGpRdWVyeSApO1xyXG5cclxuKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7XHJcblxyXG52YXIgdWlTY3JlZW5IaWRkZW5SZWdleCA9IC9cXGJ1aS1zY3JlZW4taGlkZGVuXFxiLztcclxuZnVuY3Rpb24gbm9IaWRkZW5DbGFzcyggZWxlbWVudHMgKSB7XHJcblx0dmFyIGluZGV4LFxyXG5cdFx0bGVuZ3RoID0gZWxlbWVudHMubGVuZ3RoLFxyXG5cdFx0cmVzdWx0ID0gW107XHJcblxyXG5cdGZvciAoIGluZGV4ID0gMDsgaW5kZXggPCBsZW5ndGg7IGluZGV4KysgKSB7XHJcblx0XHRpZiAoICFlbGVtZW50c1sgaW5kZXggXS5jbGFzc05hbWUubWF0Y2goIHVpU2NyZWVuSGlkZGVuUmVnZXggKSApIHtcclxuXHRcdFx0cmVzdWx0LnB1c2goIGVsZW1lbnRzWyBpbmRleCBdICk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRyZXR1cm4gJCggcmVzdWx0ICk7XHJcbn1cclxuXHJcbiQubW9iaWxlLmJlaGF2aW9ycy5hZGRGaXJzdExhc3RDbGFzc2VzID0ge1xyXG5cdF9nZXRWaXNpYmxlczogZnVuY3Rpb24oICRlbHMsIGNyZWF0ZSApIHtcclxuXHRcdHZhciB2aXNpYmxlcztcclxuXHJcblx0XHRpZiAoIGNyZWF0ZSApIHtcclxuXHRcdFx0dmlzaWJsZXMgPSBub0hpZGRlbkNsYXNzKCAkZWxzICk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHR2aXNpYmxlcyA9ICRlbHMuZmlsdGVyKCBcIjp2aXNpYmxlXCIgKTtcclxuXHRcdFx0aWYgKCB2aXNpYmxlcy5sZW5ndGggPT09IDAgKSB7XHJcblx0XHRcdFx0dmlzaWJsZXMgPSBub0hpZGRlbkNsYXNzKCAkZWxzICk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gdmlzaWJsZXM7XHJcblx0fSxcclxuXHJcblx0X2FkZEZpcnN0TGFzdENsYXNzZXM6IGZ1bmN0aW9uKCAkZWxzLCAkdmlzaWJsZXMsIGNyZWF0ZSApIHtcclxuXHRcdCRlbHMucmVtb3ZlQ2xhc3MoIFwidWktZmlyc3QtY2hpbGQgdWktbGFzdC1jaGlsZFwiICk7XHJcblx0XHQkdmlzaWJsZXMuZXEoIDAgKS5hZGRDbGFzcyggXCJ1aS1maXJzdC1jaGlsZFwiICkuZW5kKCkubGFzdCgpLmFkZENsYXNzKCBcInVpLWxhc3QtY2hpbGRcIiApO1xyXG5cdFx0aWYgKCAhY3JlYXRlICkge1xyXG5cdFx0XHR0aGlzLmVsZW1lbnQudHJpZ2dlciggXCJ1cGRhdGVsYXlvdXRcIiApO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9yZW1vdmVGaXJzdExhc3RDbGFzc2VzOiBmdW5jdGlvbiggJGVscyApIHtcclxuXHRcdCRlbHMucmVtb3ZlQ2xhc3MoIFwidWktZmlyc3QtY2hpbGQgdWktbGFzdC1jaGlsZFwiICk7XHJcblx0fVxyXG59O1xyXG5cclxufSkoIGpRdWVyeSApO1xyXG5cclxuKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7XHJcblxyXG52YXIgY2hpbGRDb2xsYXBzaWJsZXNTZWxlY3RvciA9IFwiOm1vYmlsZS1jb2xsYXBzaWJsZSwgXCIgKyAkLm1vYmlsZS5jb2xsYXBzaWJsZS5pbml0U2VsZWN0b3I7XHJcblxyXG4kLndpZGdldCggXCJtb2JpbGUuY29sbGFwc2libGVzZXRcIiwgJC5leHRlbmQoIHtcclxuXHJcblx0Ly8gVGhlIGluaXRTZWxlY3RvciBpcyBkZXByZWNhdGVkIGFzIG9mIDEuNC4wLiBJbiAxLjUuMCB3ZSB3aWxsIHVzZVxyXG5cdC8vIDpqcW1EYXRhKHJvbGU9J2NvbGxhcHNpYmxlc2V0Jykgd2hpY2ggd2lsbCBhbGxvdyB1cyB0byBnZXQgcmlkIG9mIHRoZSBsaW5lXHJcblx0Ly8gYmVsb3cgYWx0b2dldGhlciwgYmVjYXVzZSB0aGUgYXV0b2luaXQgd2lsbCBnZW5lcmF0ZSBzdWNoIGFuIGluaXRTZWxlY3RvclxyXG5cdGluaXRTZWxlY3RvcjogXCI6anFtRGF0YShyb2xlPSdjb2xsYXBzaWJsZS1zZXQnKSw6anFtRGF0YShyb2xlPSdjb2xsYXBzaWJsZXNldCcpXCIsXHJcblxyXG5cdG9wdGlvbnM6ICQuZXh0ZW5kKCB7XHJcblx0XHRlbmhhbmNlZDogZmFsc2VcclxuXHR9LCAkLm1vYmlsZS5jb2xsYXBzaWJsZS5kZWZhdWx0cyApLFxyXG5cclxuXHRfaGFuZGxlQ29sbGFwc2libGVFeHBhbmQ6IGZ1bmN0aW9uKCBldmVudCApIHtcclxuXHRcdHZhciBjbG9zZXN0Q29sbGFwc2libGUgPSAkKCBldmVudC50YXJnZXQgKS5jbG9zZXN0KCBcIi51aS1jb2xsYXBzaWJsZVwiICk7XHJcblxyXG5cdFx0aWYgKCBjbG9zZXN0Q29sbGFwc2libGUucGFyZW50KCkuaXMoIFwiOm1vYmlsZS1jb2xsYXBzaWJsZXNldCwgOmpxbURhdGEocm9sZT0nY29sbGFwc2libGUtc2V0JylcIiApICkge1xyXG5cdFx0XHRjbG9zZXN0Q29sbGFwc2libGVcclxuXHRcdFx0XHQuc2libGluZ3MoIFwiLnVpLWNvbGxhcHNpYmxlOm5vdCgudWktY29sbGFwc2libGUtY29sbGFwc2VkKVwiIClcclxuXHRcdFx0XHQuY29sbGFwc2libGUoIFwiY29sbGFwc2VcIiApO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9jcmVhdGU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIGVsZW0gPSB0aGlzLmVsZW1lbnQsXHJcblx0XHRcdG9wdHMgPSB0aGlzLm9wdGlvbnM7XHJcblxyXG5cdFx0JC5leHRlbmQoIHRoaXMsIHtcclxuXHRcdFx0X2NsYXNzZXM6IFwiXCJcclxuXHRcdH0pO1xyXG5cclxuXHRcdGlmICggIW9wdHMuZW5oYW5jZWQgKSB7XHJcblx0XHRcdGVsZW0uYWRkQ2xhc3MoIFwidWktY29sbGFwc2libGUtc2V0IFwiICtcclxuXHRcdFx0XHR0aGlzLl90aGVtZUNsYXNzRnJvbU9wdGlvbiggXCJ1aS1ncm91cC10aGVtZS1cIiwgb3B0cy50aGVtZSApICsgXCIgXCIgK1xyXG5cdFx0XHRcdCggb3B0cy5jb3JuZXJzICYmIG9wdHMuaW5zZXQgPyBcInVpLWNvcm5lci1hbGwgXCIgOiBcIlwiICkgKTtcclxuXHRcdFx0dGhpcy5lbGVtZW50LmZpbmQoICQubW9iaWxlLmNvbGxhcHNpYmxlLmluaXRTZWxlY3RvciApLmNvbGxhcHNpYmxlKCk7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5fb24oIGVsZW0sIHsgY29sbGFwc2libGVleHBhbmQ6IFwiX2hhbmRsZUNvbGxhcHNpYmxlRXhwYW5kXCIgfSApO1xyXG5cdH0sXHJcblxyXG5cdF90aGVtZUNsYXNzRnJvbU9wdGlvbjogZnVuY3Rpb24oIHByZWZpeCwgdmFsdWUgKSB7XHJcblx0XHRyZXR1cm4gKCB2YWx1ZSA/ICggdmFsdWUgPT09IFwibm9uZVwiID8gXCJcIiA6IHByZWZpeCArIHZhbHVlICkgOiBcIlwiICk7XHJcblx0fSxcclxuXHJcblx0X2luaXQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5fcmVmcmVzaCggdHJ1ZSApO1xyXG5cclxuXHRcdC8vIEJlY2F1c2UgdGhlIGNvcm5lcnMgYXJlIGhhbmRsZWQgYnkgdGhlIGNvbGxhcHNpYmxlIGl0c2VsZiBhbmQgdGhlIGRlZmF1bHQgc3RhdGUgaXMgY29sbGFwc2VkXHJcblx0XHQvLyBUaGF0IHdhcyBjYXVzaW5nIGh0dHBzOi8vZ2l0aHViLmNvbS9qcXVlcnkvanF1ZXJ5LW1vYmlsZS9pc3N1ZXMvNDExNlxyXG5cdFx0dGhpcy5lbGVtZW50XHJcblx0XHRcdC5jaGlsZHJlbiggY2hpbGRDb2xsYXBzaWJsZXNTZWxlY3RvciApXHJcblx0XHRcdC5maWx0ZXIoIFwiOmpxbURhdGEoY29sbGFwc2VkPSdmYWxzZScpXCIgKVxyXG5cdFx0XHQuY29sbGFwc2libGUoIFwiZXhwYW5kXCIgKTtcclxuXHR9LFxyXG5cclxuXHRfc2V0T3B0aW9uczogZnVuY3Rpb24oIG9wdGlvbnMgKSB7XHJcblx0XHR2YXIgcmV0LCBoYXNDb3JuZXJzLFxyXG5cdFx0XHRlbGVtID0gdGhpcy5lbGVtZW50LFxyXG5cdFx0XHR0aGVtZUNsYXNzID0gdGhpcy5fdGhlbWVDbGFzc0Zyb21PcHRpb24oIFwidWktZ3JvdXAtdGhlbWUtXCIsIG9wdGlvbnMudGhlbWUgKTtcclxuXHJcblx0XHRpZiAoIHRoZW1lQ2xhc3MgKSB7XHJcblx0XHRcdGVsZW1cclxuXHRcdFx0XHQucmVtb3ZlQ2xhc3MoIHRoaXMuX3RoZW1lQ2xhc3NGcm9tT3B0aW9uKCBcInVpLWdyb3VwLXRoZW1lLVwiLCB0aGlzLm9wdGlvbnMudGhlbWUgKSApXHJcblx0XHRcdFx0LmFkZENsYXNzKCB0aGVtZUNsYXNzICk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBvcHRpb25zLmluc2V0ICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdGhhc0Nvcm5lcnMgPSAhISggb3B0aW9ucy5pbnNldCAmJiAoIG9wdGlvbnMuY29ybmVycyB8fCB0aGlzLm9wdGlvbnMuY29ybmVycyApICk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBvcHRpb25zLmNvcm5lcnMgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0aGFzQ29ybmVycyA9ICEhKCBvcHRpb25zLmNvcm5lcnMgJiYgKCBvcHRpb25zLmluc2V0IHx8IHRoaXMub3B0aW9ucy5pbnNldCApICk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBoYXNDb3JuZXJzICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdGVsZW0udG9nZ2xlQ2xhc3MoIFwidWktY29ybmVyLWFsbFwiLCBoYXNDb3JuZXJzICk7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0ID0gdGhpcy5fc3VwZXIoIG9wdGlvbnMgKTtcclxuXHRcdHRoaXMuZWxlbWVudC5jaGlsZHJlbiggXCI6bW9iaWxlLWNvbGxhcHNpYmxlXCIgKS5jb2xsYXBzaWJsZSggXCJyZWZyZXNoXCIgKTtcclxuXHRcdHJldHVybiByZXQ7XHJcblx0fSxcclxuXHJcblx0X2Rlc3Ryb3k6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIGVsID0gdGhpcy5lbGVtZW50O1xyXG5cclxuXHRcdHRoaXMuX3JlbW92ZUZpcnN0TGFzdENsYXNzZXMoIGVsLmNoaWxkcmVuKCBjaGlsZENvbGxhcHNpYmxlc1NlbGVjdG9yICkgKTtcclxuXHRcdGVsXHJcblx0XHRcdC5yZW1vdmVDbGFzcyggXCJ1aS1jb2xsYXBzaWJsZS1zZXQgdWktY29ybmVyLWFsbCBcIiArXHJcblx0XHRcdFx0dGhpcy5fdGhlbWVDbGFzc0Zyb21PcHRpb24oIFwidWktZ3JvdXAtdGhlbWUtXCIsIHRoaXMub3B0aW9ucy50aGVtZSApIClcclxuXHRcdFx0LmNoaWxkcmVuKCBcIjptb2JpbGUtY29sbGFwc2libGVcIiApXHJcblx0XHRcdC5jb2xsYXBzaWJsZSggXCJkZXN0cm95XCIgKTtcclxuXHR9LFxyXG5cclxuXHRfcmVmcmVzaDogZnVuY3Rpb24oIGNyZWF0ZSApIHtcclxuXHRcdHZhciBjb2xsYXBzaWJsZXNJblNldCA9IHRoaXMuZWxlbWVudC5jaGlsZHJlbiggY2hpbGRDb2xsYXBzaWJsZXNTZWxlY3RvciApO1xyXG5cclxuXHRcdHRoaXMuZWxlbWVudC5maW5kKCAkLm1vYmlsZS5jb2xsYXBzaWJsZS5pbml0U2VsZWN0b3IgKS5ub3QoIFwiLnVpLWNvbGxhcHNpYmxlXCIgKS5jb2xsYXBzaWJsZSgpO1xyXG5cclxuXHRcdHRoaXMuX2FkZEZpcnN0TGFzdENsYXNzZXMoIGNvbGxhcHNpYmxlc0luU2V0LCB0aGlzLl9nZXRWaXNpYmxlcyggY29sbGFwc2libGVzSW5TZXQsIGNyZWF0ZSApLCBjcmVhdGUgKTtcclxuXHR9LFxyXG5cclxuXHRyZWZyZXNoOiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuX3JlZnJlc2goIGZhbHNlICk7XHJcblx0fVxyXG59LCAkLm1vYmlsZS5iZWhhdmlvcnMuYWRkRmlyc3RMYXN0Q2xhc3NlcyApICk7XHJcblxyXG59KSggalF1ZXJ5ICk7XHJcblxyXG4oZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcclxuXHJcbi8vIERlcHJlY2F0ZWQgaW4gMS40XHJcbiQuZm4uZmllbGRjb250YWluID0gZnVuY3Rpb24oLyogb3B0aW9ucyAqLykge1xyXG5cdHJldHVybiB0aGlzLmFkZENsYXNzKCBcInVpLWZpZWxkLWNvbnRhaW5cIiApO1xyXG59O1xyXG5cclxufSkoIGpRdWVyeSApO1xyXG5cclxuKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7XHJcblxyXG4kLmZuLmdyaWQgPSBmdW5jdGlvbiggb3B0aW9ucyApIHtcclxuXHRyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xyXG5cclxuXHRcdHZhciAkdGhpcyA9ICQoIHRoaXMgKSxcclxuXHRcdFx0byA9ICQuZXh0ZW5kKHtcclxuXHRcdFx0XHRncmlkOiBudWxsXHJcblx0XHRcdH0sIG9wdGlvbnMgKSxcclxuXHRcdFx0JGtpZHMgPSAkdGhpcy5jaGlsZHJlbigpLFxyXG5cdFx0XHRncmlkQ29scyA9IHsgc29sbzoxLCBhOjIsIGI6MywgYzo0LCBkOjUgfSxcclxuXHRcdFx0Z3JpZCA9IG8uZ3JpZCxcclxuXHRcdFx0aXRlcmF0b3IsXHJcblx0XHRcdGxldHRlcjtcclxuXHJcblx0XHRcdGlmICggIWdyaWQgKSB7XHJcblx0XHRcdFx0aWYgKCAka2lkcy5sZW5ndGggPD0gNSApIHtcclxuXHRcdFx0XHRcdGZvciAoIGxldHRlciBpbiBncmlkQ29scyApIHtcclxuXHRcdFx0XHRcdFx0aWYgKCBncmlkQ29sc1sgbGV0dGVyIF0gPT09ICRraWRzLmxlbmd0aCApIHtcclxuXHRcdFx0XHRcdFx0XHRncmlkID0gbGV0dGVyO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdGdyaWQgPSBcImFcIjtcclxuXHRcdFx0XHRcdCR0aGlzLmFkZENsYXNzKCBcInVpLWdyaWQtZHVvXCIgKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdFx0aXRlcmF0b3IgPSBncmlkQ29sc1tncmlkXTtcclxuXHJcblx0XHQkdGhpcy5hZGRDbGFzcyggXCJ1aS1ncmlkLVwiICsgZ3JpZCApO1xyXG5cclxuXHRcdCRraWRzLmZpbHRlciggXCI6bnRoLWNoaWxkKFwiICsgaXRlcmF0b3IgKyBcIm4rMSlcIiApLmFkZENsYXNzKCBcInVpLWJsb2NrLWFcIiApO1xyXG5cclxuXHRcdGlmICggaXRlcmF0b3IgPiAxICkge1xyXG5cdFx0XHQka2lkcy5maWx0ZXIoIFwiOm50aC1jaGlsZChcIiArIGl0ZXJhdG9yICsgXCJuKzIpXCIgKS5hZGRDbGFzcyggXCJ1aS1ibG9jay1iXCIgKTtcclxuXHRcdH1cclxuXHRcdGlmICggaXRlcmF0b3IgPiAyICkge1xyXG5cdFx0XHQka2lkcy5maWx0ZXIoIFwiOm50aC1jaGlsZChcIiArIGl0ZXJhdG9yICsgXCJuKzMpXCIgKS5hZGRDbGFzcyggXCJ1aS1ibG9jay1jXCIgKTtcclxuXHRcdH1cclxuXHRcdGlmICggaXRlcmF0b3IgPiAzICkge1xyXG5cdFx0XHQka2lkcy5maWx0ZXIoIFwiOm50aC1jaGlsZChcIiArIGl0ZXJhdG9yICsgXCJuKzQpXCIgKS5hZGRDbGFzcyggXCJ1aS1ibG9jay1kXCIgKTtcclxuXHRcdH1cclxuXHRcdGlmICggaXRlcmF0b3IgPiA0ICkge1xyXG5cdFx0XHQka2lkcy5maWx0ZXIoIFwiOm50aC1jaGlsZChcIiArIGl0ZXJhdG9yICsgXCJuKzUpXCIgKS5hZGRDbGFzcyggXCJ1aS1ibG9jay1lXCIgKTtcclxuXHRcdH1cclxuXHR9KTtcclxufTtcclxufSkoIGpRdWVyeSApO1xyXG5cclxuKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7XHJcblxyXG4kLndpZGdldCggXCJtb2JpbGUubmF2YmFyXCIsIHtcclxuXHRvcHRpb25zOiB7XHJcblx0XHRpY29ucG9zOiBcInRvcFwiLFxyXG5cdFx0Z3JpZDogbnVsbFxyXG5cdH0sXHJcblxyXG5cdF9jcmVhdGU6IGZ1bmN0aW9uKCkge1xyXG5cclxuXHRcdHZhciAkbmF2YmFyID0gdGhpcy5lbGVtZW50LFxyXG5cdFx0XHQkbmF2YnRucyA9ICRuYXZiYXIuZmluZCggXCJhLCBidXR0b25cIiApLFxyXG5cdFx0XHRpY29ucG9zID0gJG5hdmJ0bnMuZmlsdGVyKCBcIjpqcW1EYXRhKGljb24pXCIgKS5sZW5ndGggPyB0aGlzLm9wdGlvbnMuaWNvbnBvcyA6IHVuZGVmaW5lZDtcclxuXHJcblx0XHQkbmF2YmFyLmFkZENsYXNzKCBcInVpLW5hdmJhclwiIClcclxuXHRcdFx0LmF0dHIoIFwicm9sZVwiLCBcIm5hdmlnYXRpb25cIiApXHJcblx0XHRcdC5maW5kKCBcInVsXCIgKVxyXG5cdFx0XHQuanFtRW5oYW5jZWFibGUoKVxyXG5cdFx0XHQuZ3JpZCh7IGdyaWQ6IHRoaXMub3B0aW9ucy5ncmlkIH0pO1xyXG5cclxuXHRcdCRuYXZidG5zXHJcblx0XHRcdC5lYWNoKCBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHR2YXIgaWNvbiA9ICQubW9iaWxlLmdldEF0dHJpYnV0ZSggdGhpcywgXCJpY29uXCIgKSxcclxuXHRcdFx0XHRcdHRoZW1lID0gJC5tb2JpbGUuZ2V0QXR0cmlidXRlKCB0aGlzLCBcInRoZW1lXCIgKSxcclxuXHRcdFx0XHRcdGNsYXNzZXMgPSBcInVpLWJ0blwiO1xyXG5cclxuXHRcdFx0XHRpZiAoIHRoZW1lICkge1xyXG5cdFx0XHRcdFx0Y2xhc3NlcyArPSBcIiB1aS1idG4tXCIgKyB0aGVtZTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0aWYgKCBpY29uICkge1xyXG5cdFx0XHRcdFx0Y2xhc3NlcyArPSBcIiB1aS1pY29uLVwiICsgaWNvbiArIFwiIHVpLWJ0bi1pY29uLVwiICsgaWNvbnBvcztcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0JCggdGhpcyApLmFkZENsYXNzKCBjbGFzc2VzICk7XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdCRuYXZiYXIuZGVsZWdhdGUoIFwiYVwiLCBcInZjbGlja1wiLCBmdW5jdGlvbiggLyogZXZlbnQgKi8gKSB7XHJcblx0XHRcdHZhciBhY3RpdmVCdG4gPSAkKCB0aGlzICk7XHJcblxyXG5cdFx0XHRpZiAoICEoIGFjdGl2ZUJ0bi5oYXNDbGFzcyggXCJ1aS1zdGF0ZS1kaXNhYmxlZFwiICkgfHxcclxuXHJcblx0XHRcdFx0Ly8gREVQUkVDQVRFRCBhcyBvZiAxLjQuMCAtIHJlbW92ZSBhZnRlciAxLjQuMCByZWxlYXNlXHJcblx0XHRcdFx0Ly8gb25seSB1aS1zdGF0ZS1kaXNhYmxlZCBzaG91bGQgYmUgcHJlc2VudCB0aGVyZWFmdGVyXHJcblx0XHRcdFx0YWN0aXZlQnRuLmhhc0NsYXNzKCBcInVpLWRpc2FibGVkXCIgKSB8fFxyXG5cdFx0XHRcdGFjdGl2ZUJ0bi5oYXNDbGFzcyggJC5tb2JpbGUuYWN0aXZlQnRuQ2xhc3MgKSApICkge1xyXG5cclxuXHRcdFx0XHQkbmF2YnRucy5yZW1vdmVDbGFzcyggJC5tb2JpbGUuYWN0aXZlQnRuQ2xhc3MgKTtcclxuXHRcdFx0XHRhY3RpdmVCdG4uYWRkQ2xhc3MoICQubW9iaWxlLmFjdGl2ZUJ0bkNsYXNzICk7XHJcblxyXG5cdFx0XHRcdC8vIFRoZSBjb2RlIGJlbG93IGlzIGEgd29ya2Fyb3VuZCB0byBmaXggIzExODFcclxuXHRcdFx0XHQkKCBkb2N1bWVudCApLm9uZSggXCJwYWdlaGlkZVwiLCBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdGFjdGl2ZUJ0bi5yZW1vdmVDbGFzcyggJC5tb2JpbGUuYWN0aXZlQnRuQ2xhc3MgKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gQnV0dG9ucyBpbiB0aGUgbmF2YmFyIHdpdGggdWktc3RhdGUtcGVyc2lzdCBjbGFzcyBzaG91bGQgcmVnYWluIHRoZWlyIGFjdGl2ZSBzdGF0ZSBiZWZvcmUgcGFnZSBzaG93XHJcblx0XHQkbmF2YmFyLmNsb3Nlc3QoIFwiLnVpLXBhZ2VcIiApLmJpbmQoIFwicGFnZWJlZm9yZXNob3dcIiwgZnVuY3Rpb24oKSB7XHJcblx0XHRcdCRuYXZidG5zLmZpbHRlciggXCIudWktc3RhdGUtcGVyc2lzdFwiICkuYWRkQ2xhc3MoICQubW9iaWxlLmFjdGl2ZUJ0bkNsYXNzICk7XHJcblx0XHR9KTtcclxuXHR9XHJcbn0pO1xyXG5cclxufSkoIGpRdWVyeSApO1xyXG5cclxuKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7XHJcblxyXG52YXIgZ2V0QXR0ciA9ICQubW9iaWxlLmdldEF0dHJpYnV0ZTtcclxuXHJcbiQud2lkZ2V0KCBcIm1vYmlsZS5saXN0dmlld1wiLCAkLmV4dGVuZCgge1xyXG5cclxuXHRvcHRpb25zOiB7XHJcblx0XHR0aGVtZTogbnVsbCxcclxuXHRcdGNvdW50VGhlbWU6IG51bGwsIC8qIERlcHJlY2F0ZWQgaW4gMS40ICovXHJcblx0XHRkaXZpZGVyVGhlbWU6IG51bGwsXHJcblx0XHRpY29uOiBcImNhcmF0LXJcIixcclxuXHRcdHNwbGl0SWNvbjogXCJjYXJhdC1yXCIsXHJcblx0XHRzcGxpdFRoZW1lOiBudWxsLFxyXG5cdFx0Y29ybmVyczogdHJ1ZSxcclxuXHRcdHNoYWRvdzogdHJ1ZSxcclxuXHRcdGluc2V0OiBmYWxzZVxyXG5cdH0sXHJcblxyXG5cdF9jcmVhdGU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIHQgPSB0aGlzLFxyXG5cdFx0XHRsaXN0dmlld0NsYXNzZXMgPSBcIlwiO1xyXG5cclxuXHRcdGxpc3R2aWV3Q2xhc3NlcyArPSB0Lm9wdGlvbnMuaW5zZXQgPyBcIiB1aS1saXN0dmlldy1pbnNldFwiIDogXCJcIjtcclxuXHJcblx0XHRpZiAoICEhdC5vcHRpb25zLmluc2V0ICkge1xyXG5cdFx0XHRsaXN0dmlld0NsYXNzZXMgKz0gdC5vcHRpb25zLmNvcm5lcnMgPyBcIiB1aS1jb3JuZXItYWxsXCIgOiBcIlwiO1xyXG5cdFx0XHRsaXN0dmlld0NsYXNzZXMgKz0gdC5vcHRpb25zLnNoYWRvdyA/IFwiIHVpLXNoYWRvd1wiIDogXCJcIjtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBjcmVhdGUgbGlzdHZpZXcgbWFya3VwXHJcblx0XHR0LmVsZW1lbnQuYWRkQ2xhc3MoIFwiIHVpLWxpc3R2aWV3XCIgKyBsaXN0dmlld0NsYXNzZXMgKTtcclxuXHJcblx0XHR0LnJlZnJlc2goIHRydWUgKTtcclxuXHR9LFxyXG5cclxuXHQvLyBUT0RPOiBSZW1vdmUgaW4gMS41XHJcblx0X2ZpbmRGaXJzdEVsZW1lbnRCeVRhZ05hbWU6IGZ1bmN0aW9uKCBlbGUsIG5leHRQcm9wLCBsY05hbWUsIHVjTmFtZSApIHtcclxuXHRcdHZhciBkaWN0ID0ge307XHJcblx0XHRkaWN0WyBsY05hbWUgXSA9IGRpY3RbIHVjTmFtZSBdID0gdHJ1ZTtcclxuXHRcdHdoaWxlICggZWxlICkge1xyXG5cdFx0XHRpZiAoIGRpY3RbIGVsZS5ub2RlTmFtZSBdICkge1xyXG5cdFx0XHRcdHJldHVybiBlbGU7XHJcblx0XHRcdH1cclxuXHRcdFx0ZWxlID0gZWxlWyBuZXh0UHJvcCBdO1xyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIG51bGw7XHJcblx0fSxcclxuXHQvLyBUT0RPOiBSZW1vdmUgaW4gMS41XHJcblx0X2FkZFRodW1iQ2xhc3NlczogZnVuY3Rpb24oIGNvbnRhaW5lcnMgKSB7XHJcblx0XHR2YXIgaSwgaW1nLCBsZW4gPSBjb250YWluZXJzLmxlbmd0aDtcclxuXHRcdGZvciAoIGkgPSAwOyBpIDwgbGVuOyBpKysgKSB7XHJcblx0XHRcdGltZyA9ICQoIHRoaXMuX2ZpbmRGaXJzdEVsZW1lbnRCeVRhZ05hbWUoIGNvbnRhaW5lcnNbIGkgXS5maXJzdENoaWxkLCBcIm5leHRTaWJsaW5nXCIsIFwiaW1nXCIsIFwiSU1HXCIgKSApO1xyXG5cdFx0XHRpZiAoIGltZy5sZW5ndGggKSB7XHJcblx0XHRcdFx0JCggdGhpcy5fZmluZEZpcnN0RWxlbWVudEJ5VGFnTmFtZSggaW1nWyAwIF0ucGFyZW50Tm9kZSwgXCJwYXJlbnROb2RlXCIsIFwibGlcIiwgXCJMSVwiICkgKS5hZGRDbGFzcyggaW1nLmhhc0NsYXNzKCBcInVpLWxpLWljb25cIiApID8gXCJ1aS1saS1oYXMtaWNvblwiIDogXCJ1aS1saS1oYXMtdGh1bWJcIiApO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X2dldENoaWxkcmVuQnlUYWdOYW1lOiBmdW5jdGlvbiggZWxlLCBsY05hbWUsIHVjTmFtZSApIHtcclxuXHRcdHZhciByZXN1bHRzID0gW10sXHJcblx0XHRcdGRpY3QgPSB7fTtcclxuXHRcdGRpY3RbIGxjTmFtZSBdID0gZGljdFsgdWNOYW1lIF0gPSB0cnVlO1xyXG5cdFx0ZWxlID0gZWxlLmZpcnN0Q2hpbGQ7XHJcblx0XHR3aGlsZSAoIGVsZSApIHtcclxuXHRcdFx0aWYgKCBkaWN0WyBlbGUubm9kZU5hbWUgXSApIHtcclxuXHRcdFx0XHRyZXN1bHRzLnB1c2goIGVsZSApO1xyXG5cdFx0XHR9XHJcblx0XHRcdGVsZSA9IGVsZS5uZXh0U2libGluZztcclxuXHRcdH1cclxuXHRcdHJldHVybiAkKCByZXN1bHRzICk7XHJcblx0fSxcclxuXHJcblx0X2JlZm9yZUxpc3R2aWV3UmVmcmVzaDogJC5ub29wLFxyXG5cdF9hZnRlckxpc3R2aWV3UmVmcmVzaDogJC5ub29wLFxyXG5cclxuXHRyZWZyZXNoOiBmdW5jdGlvbiggY3JlYXRlICkge1xyXG5cdFx0dmFyIGJ1dHRvbkNsYXNzLCBwb3MsIG51bWxpLCBpdGVtLCBpdGVtQ2xhc3MsIGl0ZW1UaGVtZSwgaXRlbUljb24sIGljb24sIGEsXHJcblx0XHRcdGlzRGl2aWRlciwgc3RhcnRDb3VudCwgbmV3U3RhcnRDb3VudCwgdmFsdWUsIGxhc3QsIHNwbGl0dGhlbWUsIHNwbGl0VGhlbWVDbGFzcywgc3BsaXRpY29uLFxyXG5cdFx0XHRhbHRCdXR0b25DbGFzcywgZGl2aWRlclRoZW1lLCBsaSxcclxuXHRcdFx0byA9IHRoaXMub3B0aW9ucyxcclxuXHRcdFx0JGxpc3QgPSB0aGlzLmVsZW1lbnQsXHJcblx0XHRcdG9sID0gISEkLm5vZGVOYW1lKCAkbGlzdFsgMCBdLCBcIm9sXCIgKSxcclxuXHRcdFx0c3RhcnQgPSAkbGlzdC5hdHRyKCBcInN0YXJ0XCIgKSxcclxuXHRcdFx0aXRlbUNsYXNzRGljdCA9IHt9LFxyXG5cdFx0XHRjb3VudEJ1YmJsZXMgPSAkbGlzdC5maW5kKCBcIi51aS1saS1jb3VudFwiICksXHJcblx0XHRcdGNvdW50VGhlbWUgPSBnZXRBdHRyKCAkbGlzdFsgMCBdLCBcImNvdW50dGhlbWVcIiApIHx8IHRoaXMub3B0aW9ucy5jb3VudFRoZW1lLFxyXG5cdFx0XHRjb3VudFRoZW1lQ2xhc3MgPSBjb3VudFRoZW1lID8gXCJ1aS1ib2R5LVwiICsgY291bnRUaGVtZSA6IFwidWktYm9keS1pbmhlcml0XCI7XHJcblxyXG5cdFx0aWYgKCBvLnRoZW1lICkge1xyXG5cdFx0XHQkbGlzdC5hZGRDbGFzcyggXCJ1aS1ncm91cC10aGVtZS1cIiArIG8udGhlbWUgKTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBDaGVjayBpZiBhIHN0YXJ0IGF0dHJpYnV0ZSBoYXMgYmVlbiBzZXQgd2hpbGUgdGFraW5nIGEgdmFsdWUgb2YgMCBpbnRvIGFjY291bnRcclxuXHRcdGlmICggb2wgJiYgKCBzdGFydCB8fCBzdGFydCA9PT0gMCApICkge1xyXG5cdFx0XHRzdGFydENvdW50ID0gcGFyc2VJbnQoIHN0YXJ0LCAxMCApIC0gMTtcclxuXHRcdFx0JGxpc3QuY3NzKCBcImNvdW50ZXItcmVzZXRcIiwgXCJsaXN0bnVtYmVyaW5nIFwiICsgc3RhcnRDb3VudCApO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuX2JlZm9yZUxpc3R2aWV3UmVmcmVzaCgpO1xyXG5cclxuXHRcdGxpID0gdGhpcy5fZ2V0Q2hpbGRyZW5CeVRhZ05hbWUoICRsaXN0WyAwIF0sIFwibGlcIiwgXCJMSVwiICk7XHJcblxyXG5cdFx0Zm9yICggcG9zID0gMCwgbnVtbGkgPSBsaS5sZW5ndGg7IHBvcyA8IG51bWxpOyBwb3MrKyApIHtcclxuXHRcdFx0aXRlbSA9IGxpLmVxKCBwb3MgKTtcclxuXHRcdFx0aXRlbUNsYXNzID0gXCJcIjtcclxuXHJcblx0XHRcdGlmICggY3JlYXRlIHx8IGl0ZW1bIDAgXS5jbGFzc05hbWUuc2VhcmNoKCAvXFxidWktbGktc3RhdGljXFxifFxcYnVpLWxpLWRpdmlkZXJcXGIvICkgPCAwICkge1xyXG5cdFx0XHRcdGEgPSB0aGlzLl9nZXRDaGlsZHJlbkJ5VGFnTmFtZSggaXRlbVsgMCBdLCBcImFcIiwgXCJBXCIgKTtcclxuXHRcdFx0XHRpc0RpdmlkZXIgPSAoIGdldEF0dHIoIGl0ZW1bIDAgXSwgXCJyb2xlXCIgKSA9PT0gXCJsaXN0LWRpdmlkZXJcIiApO1xyXG5cdFx0XHRcdHZhbHVlID0gaXRlbS5hdHRyKCBcInZhbHVlXCIgKTtcclxuXHRcdFx0XHRpdGVtVGhlbWUgPSBnZXRBdHRyKCBpdGVtWyAwIF0sIFwidGhlbWVcIiApO1xyXG5cclxuXHRcdFx0XHRpZiAoIGEubGVuZ3RoICYmIGFbIDAgXS5jbGFzc05hbWUuc2VhcmNoKCAvXFxidWktYnRuXFxiLyApIDwgMCAmJiAhaXNEaXZpZGVyICkge1xyXG5cdFx0XHRcdFx0aXRlbUljb24gPSBnZXRBdHRyKCBpdGVtWyAwIF0sIFwiaWNvblwiICk7XHJcblx0XHRcdFx0XHRpY29uID0gKCBpdGVtSWNvbiA9PT0gZmFsc2UgKSA/IGZhbHNlIDogKCBpdGVtSWNvbiB8fCBvLmljb24gKTtcclxuXHJcblx0XHRcdFx0XHQvLyBUT0RPOiBSZW1vdmUgaW4gMS41IHRvZ2V0aGVyIHdpdGggbGlua3MuanMgKGxpbmtzLmpzIC8gLnVpLWxpbmsgZGVwcmVjYXRlZCBpbiAxLjQpXHJcblx0XHRcdFx0XHRhLnJlbW92ZUNsYXNzKCBcInVpLWxpbmtcIiApO1xyXG5cclxuXHRcdFx0XHRcdGJ1dHRvbkNsYXNzID0gXCJ1aS1idG5cIjtcclxuXHJcblx0XHRcdFx0XHRpZiAoIGl0ZW1UaGVtZSApIHtcclxuXHRcdFx0XHRcdFx0YnV0dG9uQ2xhc3MgKz0gXCIgdWktYnRuLVwiICsgaXRlbVRoZW1lO1xyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdGlmICggYS5sZW5ndGggPiAxICkge1xyXG5cdFx0XHRcdFx0XHRpdGVtQ2xhc3MgPSBcInVpLWxpLWhhcy1hbHRcIjtcclxuXHJcblx0XHRcdFx0XHRcdGxhc3QgPSBhLmxhc3QoKTtcclxuXHRcdFx0XHRcdFx0c3BsaXR0aGVtZSA9IGdldEF0dHIoIGxhc3RbIDAgXSwgXCJ0aGVtZVwiICkgfHwgby5zcGxpdFRoZW1lIHx8IGdldEF0dHIoIGl0ZW1bIDAgXSwgXCJ0aGVtZVwiLCB0cnVlICk7XHJcblx0XHRcdFx0XHRcdHNwbGl0VGhlbWVDbGFzcyA9IHNwbGl0dGhlbWUgPyBcIiB1aS1idG4tXCIgKyBzcGxpdHRoZW1lIDogXCJcIjtcclxuXHRcdFx0XHRcdFx0c3BsaXRpY29uID0gZ2V0QXR0ciggbGFzdFsgMCBdLCBcImljb25cIiApIHx8IGdldEF0dHIoIGl0ZW1bIDAgXSwgXCJpY29uXCIgKSB8fCBvLnNwbGl0SWNvbjtcclxuXHRcdFx0XHRcdFx0YWx0QnV0dG9uQ2xhc3MgPSBcInVpLWJ0biB1aS1idG4taWNvbi1ub3RleHQgdWktaWNvbi1cIiArIHNwbGl0aWNvbiArIHNwbGl0VGhlbWVDbGFzcztcclxuXHJcblx0XHRcdFx0XHRcdGxhc3RcclxuXHRcdFx0XHRcdFx0XHQuYXR0ciggXCJ0aXRsZVwiLCAkLnRyaW0oIGxhc3QuZ2V0RW5jb2RlZFRleHQoKSApIClcclxuXHRcdFx0XHRcdFx0XHQuYWRkQ2xhc3MoIGFsdEJ1dHRvbkNsYXNzIClcclxuXHRcdFx0XHRcdFx0XHQuZW1wdHkoKTtcclxuXHJcblx0XHRcdFx0XHRcdC8vIFJlZHVjZSB0byB0aGUgZmlyc3QgYW5jaG9yLCBiZWNhdXNlIG9ubHkgdGhlIGZpcnN0IGdldHMgdGhlIGJ1dHRvbkNsYXNzXHJcblx0XHRcdFx0XHRcdGEgPSBhLmZpcnN0KCk7XHJcblx0XHRcdFx0XHR9IGVsc2UgaWYgKCBpY29uICkge1xyXG5cdFx0XHRcdFx0XHRidXR0b25DbGFzcyArPSBcIiB1aS1idG4taWNvbi1yaWdodCB1aS1pY29uLVwiICsgaWNvbjtcclxuXHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHQvLyBBcHBseSBidXR0b25DbGFzcyB0byB0aGUgKGZpcnN0KSBhbmNob3JcclxuXHRcdFx0XHRcdGEuYWRkQ2xhc3MoIGJ1dHRvbkNsYXNzICk7XHJcblx0XHRcdFx0fSBlbHNlIGlmICggaXNEaXZpZGVyICkge1xyXG5cdFx0XHRcdFx0ZGl2aWRlclRoZW1lID0gKCBnZXRBdHRyKCBpdGVtWyAwIF0sIFwidGhlbWVcIiApIHx8IG8uZGl2aWRlclRoZW1lIHx8IG8udGhlbWUgKTtcclxuXHJcblx0XHRcdFx0XHRpdGVtQ2xhc3MgPSBcInVpLWxpLWRpdmlkZXIgdWktYmFyLVwiICsgKCBkaXZpZGVyVGhlbWUgPyBkaXZpZGVyVGhlbWUgOiBcImluaGVyaXRcIiApO1xyXG5cclxuXHRcdFx0XHRcdGl0ZW0uYXR0ciggXCJyb2xlXCIsIFwiaGVhZGluZ1wiICk7XHJcblx0XHRcdFx0fSBlbHNlIGlmICggYS5sZW5ndGggPD0gMCApIHtcclxuXHRcdFx0XHRcdGl0ZW1DbGFzcyA9IFwidWktbGktc3RhdGljIHVpLWJvZHktXCIgKyAoIGl0ZW1UaGVtZSA/IGl0ZW1UaGVtZSA6IFwiaW5oZXJpdFwiICk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGlmICggb2wgJiYgdmFsdWUgKSB7XHJcblx0XHRcdFx0XHRuZXdTdGFydENvdW50ID0gcGFyc2VJbnQoIHZhbHVlICwgMTAgKSAtIDE7XHJcblxyXG5cdFx0XHRcdFx0aXRlbS5jc3MoIFwiY291bnRlci1yZXNldFwiLCBcImxpc3RudW1iZXJpbmcgXCIgKyBuZXdTdGFydENvdW50ICk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBJbnN0ZWFkIG9mIHNldHRpbmcgaXRlbSBjbGFzcyBkaXJlY3RseSBvbiB0aGUgbGlzdCBpdGVtXHJcblx0XHRcdC8vIGF0IHRoaXMgcG9pbnQgaW4gdGltZSwgcHVzaCB0aGUgaXRlbSBpbnRvIGEgZGljdGlvbmFyeVxyXG5cdFx0XHQvLyB0aGF0IHRlbGxzIHVzIHdoYXQgY2xhc3MgdG8gc2V0IG9uIGl0IHNvIHdlIGNhbiBkbyB0aGlzIGFmdGVyIHRoaXNcclxuXHRcdFx0Ly8gcHJvY2Vzc2luZyBsb29wIGlzIGZpbmlzaGVkLlxyXG5cclxuXHRcdFx0aWYgKCAhaXRlbUNsYXNzRGljdFsgaXRlbUNsYXNzIF0gKSB7XHJcblx0XHRcdFx0aXRlbUNsYXNzRGljdFsgaXRlbUNsYXNzIF0gPSBbXTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aXRlbUNsYXNzRGljdFsgaXRlbUNsYXNzIF0ucHVzaCggaXRlbVsgMCBdICk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gU2V0IHRoZSBhcHByb3ByaWF0ZSBsaXN0dmlldyBpdGVtIGNsYXNzZXMgb24gZWFjaCBsaXN0IGl0ZW0uXHJcblx0XHQvLyBUaGUgbWFpbiByZWFzb24gd2UgZGlkbid0IGRvIHRoaXNcclxuXHRcdC8vIGluIHRoZSBmb3ItbG9vcCBhYm92ZSBpcyBiZWNhdXNlIHdlIGNhbiBlbGltaW5hdGUgcGVyLWl0ZW0gZnVuY3Rpb24gb3ZlcmhlYWRcclxuXHRcdC8vIGJ5IGNhbGxpbmcgYWRkQ2xhc3MoKSBhbmQgY2hpbGRyZW4oKSBvbmNlIG9yIHR3aWNlIGFmdGVyd2FyZHMuIFRoaXNcclxuXHRcdC8vIGNhbiBnaXZlIHVzIGEgc2lnbmlmaWNhbnQgYm9vc3Qgb24gcGxhdGZvcm1zIGxpa2UgV1A3LjUuXHJcblxyXG5cdFx0Zm9yICggaXRlbUNsYXNzIGluIGl0ZW1DbGFzc0RpY3QgKSB7XHJcblx0XHRcdCQoIGl0ZW1DbGFzc0RpY3RbIGl0ZW1DbGFzcyBdICkuYWRkQ2xhc3MoIGl0ZW1DbGFzcyApO1xyXG5cdFx0fVxyXG5cclxuXHRcdGNvdW50QnViYmxlcy5lYWNoKCBmdW5jdGlvbigpIHtcclxuXHRcdFx0JCggdGhpcyApLmNsb3Nlc3QoIFwibGlcIiApLmFkZENsYXNzKCBcInVpLWxpLWhhcy1jb3VudFwiICk7XHJcblx0XHR9KTtcclxuXHRcdGlmICggY291bnRUaGVtZUNsYXNzICkge1xyXG5cdFx0XHRjb3VudEJ1YmJsZXMubm90KCBcIltjbGFzcyo9J3VpLWJvZHktJ11cIiApLmFkZENsYXNzKCBjb3VudFRoZW1lQ2xhc3MgKTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBEZXByZWNhdGVkIGluIDEuNC4gRnJvbSAxLjUgeW91IGhhdmUgdG8gYWRkIGNsYXNzIHVpLWxpLWhhcy10aHVtYiBvciB1aS1saS1oYXMtaWNvbiB0byB0aGUgTEkuXHJcblx0XHR0aGlzLl9hZGRUaHVtYkNsYXNzZXMoIGxpICk7XHJcblx0XHR0aGlzLl9hZGRUaHVtYkNsYXNzZXMoIGxpLmZpbmQoIFwiLnVpLWJ0blwiICkgKTtcclxuXHJcblx0XHR0aGlzLl9hZnRlckxpc3R2aWV3UmVmcmVzaCgpO1xyXG5cclxuXHRcdHRoaXMuX2FkZEZpcnN0TGFzdENsYXNzZXMoIGxpLCB0aGlzLl9nZXRWaXNpYmxlcyggbGksIGNyZWF0ZSApLCBjcmVhdGUgKTtcclxuXHR9XHJcbn0sICQubW9iaWxlLmJlaGF2aW9ycy5hZGRGaXJzdExhc3RDbGFzc2VzICkgKTtcclxuXHJcbn0pKCBqUXVlcnkgKTtcclxuXHJcbihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xyXG5cclxuZnVuY3Rpb24gZGVmYXVsdEF1dG9kaXZpZGVyc1NlbGVjdG9yKCBlbHQgKSB7XHJcblx0Ly8gbG9vayBmb3IgdGhlIHRleHQgaW4gdGhlIGdpdmVuIGVsZW1lbnRcclxuXHR2YXIgdGV4dCA9ICQudHJpbSggZWx0LnRleHQoKSApIHx8IG51bGw7XHJcblxyXG5cdGlmICggIXRleHQgKSB7XHJcblx0XHRyZXR1cm4gbnVsbDtcclxuXHR9XHJcblxyXG5cdC8vIGNyZWF0ZSB0aGUgdGV4dCBmb3IgdGhlIGRpdmlkZXIgKGZpcnN0IHVwcGVyY2FzZWQgbGV0dGVyKVxyXG5cdHRleHQgPSB0ZXh0LnNsaWNlKCAwLCAxICkudG9VcHBlckNhc2UoKTtcclxuXHJcblx0cmV0dXJuIHRleHQ7XHJcbn1cclxuXHJcbiQud2lkZ2V0KCBcIm1vYmlsZS5saXN0dmlld1wiLCAkLm1vYmlsZS5saXN0dmlldywge1xyXG5cdG9wdGlvbnM6IHtcclxuXHRcdGF1dG9kaXZpZGVyczogZmFsc2UsXHJcblx0XHRhdXRvZGl2aWRlcnNTZWxlY3RvcjogZGVmYXVsdEF1dG9kaXZpZGVyc1NlbGVjdG9yXHJcblx0fSxcclxuXHJcblx0X2JlZm9yZUxpc3R2aWV3UmVmcmVzaDogZnVuY3Rpb24oKSB7XHJcblx0XHRpZiAoIHRoaXMub3B0aW9ucy5hdXRvZGl2aWRlcnMgKSB7XHJcblx0XHRcdHRoaXMuX3JlcGxhY2VEaXZpZGVycygpO1xyXG5cdFx0XHR0aGlzLl9zdXBlckFwcGx5KCBhcmd1bWVudHMgKTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfcmVwbGFjZURpdmlkZXJzOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBpLCBsaXMsIGxpLCBkaXZpZGVyVGV4dCxcclxuXHRcdFx0bGFzdERpdmlkZXJUZXh0ID0gbnVsbCxcclxuXHRcdFx0bGlzdCA9IHRoaXMuZWxlbWVudCxcclxuXHRcdFx0ZGl2aWRlcjtcclxuXHJcblx0XHRsaXN0LmNoaWxkcmVuKCBcImxpOmpxbURhdGEocm9sZT0nbGlzdC1kaXZpZGVyJylcIiApLnJlbW92ZSgpO1xyXG5cclxuXHRcdGxpcyA9IGxpc3QuY2hpbGRyZW4oIFwibGlcIiApO1xyXG5cclxuXHRcdGZvciAoIGkgPSAwOyBpIDwgbGlzLmxlbmd0aCA7IGkrKyApIHtcclxuXHRcdFx0bGkgPSBsaXNbIGkgXTtcclxuXHRcdFx0ZGl2aWRlclRleHQgPSB0aGlzLm9wdGlvbnMuYXV0b2RpdmlkZXJzU2VsZWN0b3IoICQoIGxpICkgKTtcclxuXHJcblx0XHRcdGlmICggZGl2aWRlclRleHQgJiYgbGFzdERpdmlkZXJUZXh0ICE9PSBkaXZpZGVyVGV4dCApIHtcclxuXHRcdFx0XHRkaXZpZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJsaVwiICk7XHJcblx0XHRcdFx0ZGl2aWRlci5hcHBlbmRDaGlsZCggZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoIGRpdmlkZXJUZXh0ICkgKTtcclxuXHRcdFx0XHRkaXZpZGVyLnNldEF0dHJpYnV0ZSggXCJkYXRhLVwiICsgJC5tb2JpbGUubnMgKyBcInJvbGVcIiwgXCJsaXN0LWRpdmlkZXJcIiApO1xyXG5cdFx0XHRcdGxpLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKCBkaXZpZGVyLCBsaSApO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRsYXN0RGl2aWRlclRleHQgPSBkaXZpZGVyVGV4dDtcclxuXHRcdH1cclxuXHR9XHJcbn0pO1xyXG5cclxufSkoIGpRdWVyeSApO1xyXG5cclxuKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7XHJcblxyXG52YXIgcmRpdmlkZXIgPSAvKF58XFxzKXVpLWxpLWRpdmlkZXIoJHxcXHMpLyxcclxuXHRyaGlkZGVuID0gLyhefFxccyl1aS1zY3JlZW4taGlkZGVuKCR8XFxzKS87XHJcblxyXG4kLndpZGdldCggXCJtb2JpbGUubGlzdHZpZXdcIiwgJC5tb2JpbGUubGlzdHZpZXcsIHtcclxuXHRvcHRpb25zOiB7XHJcblx0XHRoaWRlRGl2aWRlcnM6IGZhbHNlXHJcblx0fSxcclxuXHJcblx0X2FmdGVyTGlzdHZpZXdSZWZyZXNoOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBpdGVtcywgaWR4LCBpdGVtLCBoaWRlRGl2aWRlciA9IHRydWU7XHJcblxyXG5cdFx0dGhpcy5fc3VwZXJBcHBseSggYXJndW1lbnRzICk7XHJcblxyXG5cdFx0aWYgKCB0aGlzLm9wdGlvbnMuaGlkZURpdmlkZXJzICkge1xyXG5cdFx0XHRpdGVtcyA9IHRoaXMuX2dldENoaWxkcmVuQnlUYWdOYW1lKCB0aGlzLmVsZW1lbnRbIDAgXSwgXCJsaVwiLCBcIkxJXCIgKTtcclxuXHRcdFx0Zm9yICggaWR4ID0gaXRlbXMubGVuZ3RoIC0gMSA7IGlkeCA+IC0xIDsgaWR4LS0gKSB7XHJcblx0XHRcdFx0aXRlbSA9IGl0ZW1zWyBpZHggXTtcclxuXHRcdFx0XHRpZiAoIGl0ZW0uY2xhc3NOYW1lLm1hdGNoKCByZGl2aWRlciApICkge1xyXG5cdFx0XHRcdFx0aWYgKCBoaWRlRGl2aWRlciApIHtcclxuXHRcdFx0XHRcdFx0aXRlbS5jbGFzc05hbWUgPSBpdGVtLmNsYXNzTmFtZSArIFwiIHVpLXNjcmVlbi1oaWRkZW5cIjtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdGhpZGVEaXZpZGVyID0gdHJ1ZTtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0aWYgKCAhaXRlbS5jbGFzc05hbWUubWF0Y2goIHJoaWRkZW4gKSApIHtcclxuXHRcdFx0XHRcdFx0aGlkZURpdmlkZXIgPSBmYWxzZTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcbn0pO1xyXG5cclxufSkoIGpRdWVyeSApO1xyXG5cclxuKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7XHJcblxyXG4kLm1vYmlsZS5ub2pzID0gZnVuY3Rpb24oIHRhcmdldCApIHtcclxuXHQkKCBcIjpqcW1EYXRhKHJvbGU9J25vanMnKVwiLCB0YXJnZXQgKS5hZGRDbGFzcyggXCJ1aS1ub2pzXCIgKTtcclxufTtcclxuXHJcbn0pKCBqUXVlcnkgKTtcclxuXHJcbihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xyXG5cclxuJC5tb2JpbGUuYmVoYXZpb3JzLmZvcm1SZXNldCA9IHtcclxuXHRfaGFuZGxlRm9ybVJlc2V0OiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuX29uKCB0aGlzLmVsZW1lbnQuY2xvc2VzdCggXCJmb3JtXCIgKSwge1xyXG5cdFx0XHRyZXNldDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0dGhpcy5fZGVsYXkoIFwiX3Jlc2V0XCIgKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0fVxyXG59O1xyXG5cclxufSkoIGpRdWVyeSApO1xyXG5cclxuLypcclxuKiBcImNoZWNrYm94cmFkaW9cIiBwbHVnaW5cclxuKi9cclxuXHJcbihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xyXG5cclxudmFyIGVzY2FwZUlkID0gJC5tb2JpbGUucGF0aC5oYXNoVG9TZWxlY3RvcjtcclxuXHJcbiQud2lkZ2V0KCBcIm1vYmlsZS5jaGVja2JveHJhZGlvXCIsICQuZXh0ZW5kKCB7XHJcblxyXG5cdGluaXRTZWxlY3RvcjogXCJpbnB1dDpub3QoIDpqcW1EYXRhKHJvbGU9J2ZsaXBzd2l0Y2gnICkgKVt0eXBlPSdjaGVja2JveCddLGlucHV0W3R5cGU9J3JhZGlvJ106bm90KCA6anFtRGF0YShyb2xlPSdmbGlwc3dpdGNoJyApKVwiLFxyXG5cclxuXHRvcHRpb25zOiB7XHJcblx0XHR0aGVtZTogXCJpbmhlcml0XCIsXHJcblx0XHRtaW5pOiBmYWxzZSxcclxuXHRcdHdyYXBwZXJDbGFzczogbnVsbCxcclxuXHRcdGVuaGFuY2VkOiBmYWxzZSxcclxuXHRcdGljb25wb3M6IFwibGVmdFwiXHJcblxyXG5cdH0sXHJcblx0X2NyZWF0ZTogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgaW5wdXQgPSB0aGlzLmVsZW1lbnQsXHJcblx0XHRcdG8gPSB0aGlzLm9wdGlvbnMsXHJcblx0XHRcdGluaGVyaXRBdHRyID0gZnVuY3Rpb24oIGlucHV0LCBkYXRhQXR0ciApIHtcclxuXHRcdFx0XHRyZXR1cm4gaW5wdXQuanFtRGF0YSggZGF0YUF0dHIgKSB8fFxyXG5cdFx0XHRcdFx0aW5wdXQuY2xvc2VzdCggXCJmb3JtLCBmaWVsZHNldFwiICkuanFtRGF0YSggZGF0YUF0dHIgKTtcclxuXHRcdFx0fSxcclxuXHRcdFx0bGFiZWwgPSB0aGlzLm9wdGlvbnMuZW5oYW5jZWQgP1xyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdGVsZW1lbnQ6IHRoaXMuZWxlbWVudC5zaWJsaW5ncyggXCJsYWJlbFwiICksXHJcblx0XHRcdFx0XHRpc1BhcmVudDogZmFsc2VcclxuXHRcdFx0XHR9IDpcclxuXHRcdFx0XHR0aGlzLl9maW5kTGFiZWwoKSxcclxuXHRcdFx0aW5wdXR0eXBlID0gaW5wdXRbMF0udHlwZSxcclxuXHRcdFx0Y2hlY2tlZENsYXNzID0gXCJ1aS1cIiArIGlucHV0dHlwZSArIFwiLW9uXCIsXHJcblx0XHRcdHVuY2hlY2tlZENsYXNzID0gXCJ1aS1cIiArIGlucHV0dHlwZSArIFwiLW9mZlwiO1xyXG5cclxuXHRcdGlmICggaW5wdXR0eXBlICE9PSBcImNoZWNrYm94XCIgJiYgaW5wdXR0eXBlICE9PSBcInJhZGlvXCIgKSB7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIHRoaXMuZWxlbWVudFswXS5kaXNhYmxlZCApIHtcclxuXHRcdFx0dGhpcy5vcHRpb25zLmRpc2FibGVkID0gdHJ1ZTtcclxuXHRcdH1cclxuXHJcblx0XHRvLmljb25wb3MgPSBpbmhlcml0QXR0ciggaW5wdXQsIFwiaWNvbnBvc1wiICkgfHxcclxuXHRcdFx0bGFiZWwuZWxlbWVudC5hdHRyKCBcImRhdGEtXCIgKyAkLm1vYmlsZS5ucyArIFwiaWNvbnBvc1wiICkgfHwgby5pY29ucG9zLFxyXG5cclxuXHRcdC8vIEVzdGFibGlzaCBvcHRpb25zXHJcblx0XHRvLm1pbmkgPSBpbmhlcml0QXR0ciggaW5wdXQsIFwibWluaVwiICkgfHwgby5taW5pO1xyXG5cclxuXHRcdC8vIEV4cG9zZSBmb3Igb3RoZXIgbWV0aG9kc1xyXG5cdFx0JC5leHRlbmQoIHRoaXMsIHtcclxuXHRcdFx0aW5wdXQ6IGlucHV0LFxyXG5cdFx0XHRsYWJlbDogbGFiZWwuZWxlbWVudCxcclxuXHRcdFx0bGFiZWxJc1BhcmVudDogbGFiZWwuaXNQYXJlbnQsXHJcblx0XHRcdGlucHV0dHlwZTogaW5wdXR0eXBlLFxyXG5cdFx0XHRjaGVja2VkQ2xhc3M6IGNoZWNrZWRDbGFzcyxcclxuXHRcdFx0dW5jaGVja2VkQ2xhc3M6IHVuY2hlY2tlZENsYXNzXHJcblx0XHR9KTtcclxuXHJcblx0XHRpZiAoICF0aGlzLm9wdGlvbnMuZW5oYW5jZWQgKSB7XHJcblx0XHRcdHRoaXMuX2VuaGFuY2UoKTtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLl9vbiggbGFiZWwuZWxlbWVudCwge1xyXG5cdFx0XHR2bW91c2VvdmVyOiBcIl9oYW5kbGVMYWJlbFZNb3VzZU92ZXJcIixcclxuXHRcdFx0dmNsaWNrOiBcIl9oYW5kbGVMYWJlbFZDbGlja1wiXHJcblx0XHR9KTtcclxuXHJcblx0XHR0aGlzLl9vbiggaW5wdXQsIHtcclxuXHRcdFx0dm1vdXNlZG93bjogXCJfY2FjaGVWYWxzXCIsXHJcblx0XHRcdHZjbGljazogXCJfaGFuZGxlSW5wdXRWQ2xpY2tcIixcclxuXHRcdFx0Zm9jdXM6IFwiX2hhbmRsZUlucHV0Rm9jdXNcIixcclxuXHRcdFx0Ymx1cjogXCJfaGFuZGxlSW5wdXRCbHVyXCJcclxuXHRcdH0pO1xyXG5cclxuXHRcdHRoaXMuX2hhbmRsZUZvcm1SZXNldCgpO1xyXG5cdFx0dGhpcy5yZWZyZXNoKCk7XHJcblx0fSxcclxuXHJcblx0X2ZpbmRMYWJlbDogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgcGFyZW50TGFiZWwsIGxhYmVsLCBpc1BhcmVudCxcclxuXHRcdFx0aW5wdXQgPSB0aGlzLmVsZW1lbnQsXHJcblx0XHRcdGxhYmVsc0xpc3QgPSBpbnB1dFsgMCBdLmxhYmVscztcclxuXHJcblx0XHRpZiggbGFiZWxzTGlzdCAmJiBsYWJlbHNMaXN0Lmxlbmd0aCA+IDAgKSB7XHJcblx0XHRcdGxhYmVsID0gJCggbGFiZWxzTGlzdFsgMCBdICk7XHJcblx0XHRcdGlzUGFyZW50ID0gJC5jb250YWlucyggbGFiZWxbIDAgXSwgaW5wdXRbIDAgXSApO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0cGFyZW50TGFiZWwgPSBpbnB1dC5jbG9zZXN0KCBcImxhYmVsXCIgKTtcclxuXHRcdFx0aXNQYXJlbnQgPSAoIHBhcmVudExhYmVsLmxlbmd0aCA+IDAgKTtcclxuXHJcblx0XHRcdC8vIE5PVEU6IFdpbmRvd3MgUGhvbmUgY291bGQgbm90IGZpbmQgdGhlIGxhYmVsIHRocm91Z2ggYSBzZWxlY3RvclxyXG5cdFx0XHQvLyBmaWx0ZXIgd29ya3MgdGhvdWdoLlxyXG5cdFx0XHRsYWJlbCA9IGlzUGFyZW50ID8gcGFyZW50TGFiZWwgOlxyXG5cdFx0XHRcdCQoIHRoaXMuZG9jdW1lbnRbIDAgXS5nZXRFbGVtZW50c0J5VGFnTmFtZSggXCJsYWJlbFwiICkgKVxyXG5cdFx0XHRcdFx0LmZpbHRlciggXCJbZm9yPSdcIiArIGVzY2FwZUlkKCBpbnB1dFsgMCBdLmlkICkgKyBcIiddXCIgKVxyXG5cdFx0XHRcdFx0LmZpcnN0KCk7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHtcclxuXHRcdFx0ZWxlbWVudDogbGFiZWwsXHJcblx0XHRcdGlzUGFyZW50OiBpc1BhcmVudFxyXG5cdFx0fTtcclxuXHR9LFxyXG5cclxuXHRfZW5oYW5jZTogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLmxhYmVsLmFkZENsYXNzKCBcInVpLWJ0biB1aS1jb3JuZXItYWxsXCIpO1xyXG5cclxuXHRcdGlmICggdGhpcy5sYWJlbElzUGFyZW50ICkge1xyXG5cdFx0XHR0aGlzLmlucHV0LmFkZCggdGhpcy5sYWJlbCApLndyYXBBbGwoIHRoaXMuX3dyYXBwZXIoKSApO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0Ly90aGlzLmVsZW1lbnQucmVwbGFjZVdpdGgoIHRoaXMuaW5wdXQuYWRkKCB0aGlzLmxhYmVsICkud3JhcEFsbCggdGhpcy5fd3JhcHBlcigpICkgKTtcclxuXHRcdFx0dGhpcy5lbGVtZW50LndyYXAoIHRoaXMuX3dyYXBwZXIoKSApO1xyXG5cdFx0XHR0aGlzLmVsZW1lbnQucGFyZW50KCkucHJlcGVuZCggdGhpcy5sYWJlbCApO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIFdyYXAgdGhlIGlucHV0ICsgbGFiZWwgaW4gYSBkaXZcclxuXHJcblx0XHR0aGlzLl9zZXRPcHRpb25zKHtcclxuXHRcdFx0XCJ0aGVtZVwiOiB0aGlzLm9wdGlvbnMudGhlbWUsXHJcblx0XHRcdFwiaWNvbnBvc1wiOiB0aGlzLm9wdGlvbnMuaWNvbnBvcyxcclxuXHRcdFx0XCJtaW5pXCI6IHRoaXMub3B0aW9ucy5taW5pXHJcblx0XHR9KTtcclxuXHJcblx0fSxcclxuXHJcblx0X3dyYXBwZXI6IGZ1bmN0aW9uKCkge1xyXG5cdFx0cmV0dXJuICQoIFwiPGRpdiBjbGFzcz0nXCIgICtcclxuXHRcdFx0KCB0aGlzLm9wdGlvbnMud3JhcHBlckNsYXNzID8gdGhpcy5vcHRpb25zLndyYXBwZXJDbGFzcyA6IFwiXCIgKSArXHJcblx0XHRcdFwiIHVpLVwiICsgdGhpcy5pbnB1dHR5cGUgK1xyXG5cdFx0XHQoIHRoaXMub3B0aW9ucy5kaXNhYmxlZCA/IFwiIHVpLXN0YXRlLWRpc2FibGVkXCIgOiBcIlwiICkgKyBcIicgPjwvZGl2PlwiICk7XHJcblx0fSxcclxuXHJcblx0X2hhbmRsZUlucHV0Rm9jdXM6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5sYWJlbC5hZGRDbGFzcyggJC5tb2JpbGUuZm9jdXNDbGFzcyApO1xyXG5cdH0sXHJcblxyXG5cdF9oYW5kbGVJbnB1dEJsdXI6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5sYWJlbC5yZW1vdmVDbGFzcyggJC5tb2JpbGUuZm9jdXNDbGFzcyApO1xyXG5cdH0sXHJcblxyXG5cdF9oYW5kbGVJbnB1dFZDbGljazogZnVuY3Rpb24oKSB7XHJcblx0XHQvLyBBZGRzIGNoZWNrZWQgYXR0cmlidXRlIHRvIGNoZWNrZWQgaW5wdXQgd2hlbiBrZXlib2FyZCBpcyB1c2VkXHJcblx0XHR0aGlzLmVsZW1lbnQucHJvcCggXCJjaGVja2VkXCIsIHRoaXMuZWxlbWVudC5pcyggXCI6Y2hlY2tlZFwiICkgKTtcclxuXHRcdHRoaXMuX2dldElucHV0U2V0KCkubm90KCB0aGlzLmVsZW1lbnQgKS5wcm9wKCBcImNoZWNrZWRcIiwgZmFsc2UgKTtcclxuXHRcdHRoaXMuX3VwZGF0ZUFsbCggdHJ1ZSApO1xyXG5cdH0sXHJcblxyXG5cdF9oYW5kbGVMYWJlbFZNb3VzZU92ZXI6IGZ1bmN0aW9uKCBldmVudCApIHtcclxuXHRcdGlmICggdGhpcy5sYWJlbC5wYXJlbnQoKS5oYXNDbGFzcyggXCJ1aS1zdGF0ZS1kaXNhYmxlZFwiICkgKSB7XHJcblx0XHRcdGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9oYW5kbGVMYWJlbFZDbGljazogZnVuY3Rpb24oIGV2ZW50ICkge1xyXG5cdFx0dmFyIGlucHV0ID0gdGhpcy5lbGVtZW50O1xyXG5cclxuXHRcdGlmICggaW5wdXQuaXMoIFwiOmRpc2FibGVkXCIgKSApIHtcclxuXHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuX2NhY2hlVmFscygpO1xyXG5cclxuXHRcdGlucHV0LnByb3AoIFwiY2hlY2tlZFwiLCB0aGlzLmlucHV0dHlwZSA9PT0gXCJyYWRpb1wiICYmIHRydWUgfHwgIWlucHV0LnByb3AoIFwiY2hlY2tlZFwiICkgKTtcclxuXHJcblx0XHQvLyB0cmlnZ2VyIGNsaWNrIGhhbmRsZXIncyBib3VuZCBkaXJlY3RseSB0byB0aGUgaW5wdXQgYXMgYSBzdWJzdGl0dXRlIGZvclxyXG5cdFx0Ly8gaG93IGxhYmVsIGNsaWNrcyBiZWhhdmUgbm9ybWFsbHkgaW4gdGhlIGJyb3dzZXJzXHJcblx0XHQvLyBUT0RPOiBpdCB3b3VsZCBiZSBuaWNlIHRvIGxldCB0aGUgYnJvd3NlcidzIGhhbmRsZSB0aGUgY2xpY2tzIGFuZCBwYXNzIHRoZW1cclxuXHRcdC8vICAgICAgIHRocm91Z2ggdG8gdGhlIGFzc29jaWF0ZSBpbnB1dC4gd2UgY2FuIHN3YWxsb3cgdGhhdCBjbGljayBhdCB0aGUgcGFyZW50XHJcblx0XHQvLyAgICAgICB3cmFwcGVyIGVsZW1lbnQgbGV2ZWxcclxuXHRcdGlucHV0LnRyaWdnZXJIYW5kbGVyKCBcImNsaWNrXCIgKTtcclxuXHJcblx0XHQvLyBJbnB1dCBzZXQgZm9yIGNvbW1vbiByYWRpbyBidXR0b25zIHdpbGwgY29udGFpbiBhbGwgdGhlIHJhZGlvXHJcblx0XHQvLyBidXR0b25zLCBidXQgd2lsbCBub3QgZm9yIGNoZWNrYm94ZXMuIGNsZWFyaW5nIHRoZSBjaGVja2VkIHN0YXR1c1xyXG5cdFx0Ly8gb2Ygb3RoZXIgcmFkaW9zIGVuc3VyZXMgdGhlIGFjdGl2ZSBidXR0b24gc3RhdGUgaXMgYXBwbGllZCBwcm9wZXJseVxyXG5cdFx0dGhpcy5fZ2V0SW5wdXRTZXQoKS5ub3QoIGlucHV0ICkucHJvcCggXCJjaGVja2VkXCIsIGZhbHNlICk7XHJcblxyXG5cdFx0dGhpcy5fdXBkYXRlQWxsKCk7XHJcblx0XHRyZXR1cm4gZmFsc2U7XHJcblx0fSxcclxuXHJcblx0X2NhY2hlVmFsczogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLl9nZXRJbnB1dFNldCgpLmVhY2goIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHQkKCB0aGlzICkuYXR0cihcImRhdGEtXCIgKyAkLm1vYmlsZS5ucyArIFwiY2FjaGVWYWxcIiwgdGhpcy5jaGVja2VkICk7XHJcblx0XHR9KTtcclxuXHR9LFxyXG5cclxuXHQvLyBSZXR1cm5zIHRob3NlIHJhZGlvIGJ1dHRvbnMgdGhhdCBhcmUgc3VwcG9zZWQgdG8gYmUgaW4gdGhlIHNhbWUgZ3JvdXAgYXNcclxuXHQvLyB0aGlzIHJhZGlvIGJ1dHRvbi4gSW4gdGhlIGNhc2Ugb2YgYSBjaGVja2JveCBvciBhIHJhZGlvIGxhY2tpbmcgYSBuYW1lXHJcblx0Ly8gYXR0cmlidXRlLCBpdCByZXR1cm5zIHRoaXMuZWxlbWVudC5cclxuXHRfZ2V0SW5wdXRTZXQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIHNlbGVjdG9yLCBmb3JtSWQsXHJcblx0XHRcdHJhZGlvID0gdGhpcy5lbGVtZW50WyAwIF0sXHJcblx0XHRcdG5hbWUgPSByYWRpby5uYW1lLFxyXG5cdFx0XHRmb3JtID0gcmFkaW8uZm9ybSxcclxuXHRcdFx0ZG9jID0gdGhpcy5lbGVtZW50LnBhcmVudHMoKS5sYXN0KCkuZ2V0KCAwICksXHJcblxyXG5cdFx0XHQvLyBBIHJhZGlvIGlzIGFsd2F5cyBhIG1lbWJlciBvZiBpdHMgb3duIGdyb3VwXHJcblx0XHRcdHJhZGlvcyA9IHRoaXMuZWxlbWVudDtcclxuXHJcblx0XHQvLyBPbmx5IHN0YXJ0IHJ1bm5pbmcgc2VsZWN0b3JzIGlmIHRoaXMgaXMgYW4gYXR0YWNoZWQgcmFkaW8gYnV0dG9uIHdpdGggYSBuYW1lXHJcblx0XHRpZiAoIG5hbWUgJiYgdGhpcy5pbnB1dHR5cGUgPT09IFwicmFkaW9cIiAmJiBkb2MgKSB7XHJcblx0XHRcdHNlbGVjdG9yID0gXCJpbnB1dFt0eXBlPSdyYWRpbyddW25hbWU9J1wiICsgZXNjYXBlSWQoIG5hbWUgKSArIFwiJ11cIjtcclxuXHJcblx0XHRcdC8vIElmIHdlJ3JlIGluc2lkZSBhIGZvcm1cclxuXHRcdFx0aWYgKCBmb3JtICkge1xyXG5cdFx0XHRcdGZvcm1JZCA9IGZvcm0uZ2V0QXR0cmlidXRlKCBcImlkXCIgKTtcclxuXHJcblx0XHRcdFx0Ly8gSWYgdGhlIGZvcm0gaGFzIGFuIElELCBjb2xsZWN0IHJhZGlvcyBzY2F0dGVyZWQgdGhyb3VnaHQgdGhlIGRvY3VtZW50IHdoaWNoXHJcblx0XHRcdFx0Ly8gbmV2ZXJ0aGVsZXNzIGFyZSBwYXJ0IG9mIHRoZSBmb3JtIGJ5IHdheSBvZiB0aGUgdmFsdWUgb2YgdGhlaXIgZm9ybSBhdHRyaWJ1dGVcclxuXHRcdFx0XHRpZiAoIGZvcm1JZCApIHtcclxuXHRcdFx0XHRcdHJhZGlvcyA9ICQoIHNlbGVjdG9yICsgXCJbZm9ybT0nXCIgKyBlc2NhcGVJZCggZm9ybUlkICkgKyBcIiddXCIsIGRvYyApO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Ly8gQWxzbyBhZGQgdG8gdGhvc2UgdGhlIHJhZGlvcyBpbiB0aGUgZm9ybSBpdHNlbGZcclxuXHRcdFx0XHRyYWRpb3MgPSAkKCBmb3JtICkuZmluZCggc2VsZWN0b3IgKS5maWx0ZXIoIGZ1bmN0aW9uKCkge1xyXG5cclxuXHRcdFx0XHRcdC8vIFNvbWUgcmFkaW9zIGluc2lkZSB0aGUgZm9ybSBtYXkgYmVsb25nIHRvIHNvbWUgb3RoZXIgZm9ybSBieSB2aXJ0dWUgb2ZcclxuXHRcdFx0XHRcdC8vIGhhdmluZyBhIGZvcm0gYXR0cmlidXRlIGRlZmluZWQgb24gdGhlbSwgc28gd2UgbXVzdCBmaWx0ZXIgdGhlbSBvdXQgaGVyZVxyXG5cdFx0XHRcdFx0cmV0dXJuICggdGhpcy5mb3JtID09PSBmb3JtICk7XHJcblx0XHRcdFx0fSkuYWRkKCByYWRpb3MgKTtcclxuXHJcblx0XHRcdC8vIElmIHdlJ3JlIG91dHNpZGUgYSBmb3JtXHJcblx0XHRcdH0gZWxzZSB7XHJcblxyXG5cdFx0XHRcdC8vIENvbGxlY3QgYWxsIHRob3NlIHJhZGlvcyB3aGljaCBhcmUgYWxzbyBvdXRzaWRlIG9mIGEgZm9ybSBhbmQgbWF0Y2ggb3VyIG5hbWVcclxuXHRcdFx0XHRyYWRpb3MgPSAkKCBzZWxlY3RvciwgZG9jICkuZmlsdGVyKCBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdHJldHVybiAhdGhpcy5mb3JtO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gcmFkaW9zO1xyXG5cdH0sXHJcblxyXG5cdF91cGRhdGVBbGw6IGZ1bmN0aW9uKCBjaGFuZ2VUcmlnZ2VyZWQgKSB7XHJcblx0XHR2YXIgc2VsZiA9IHRoaXM7XHJcblxyXG5cdFx0dGhpcy5fZ2V0SW5wdXRTZXQoKS5lYWNoKCBmdW5jdGlvbigpIHtcclxuXHRcdFx0dmFyICR0aGlzID0gJCggdGhpcyApO1xyXG5cclxuXHRcdFx0aWYgKCAoIHRoaXMuY2hlY2tlZCB8fCBzZWxmLmlucHV0dHlwZSA9PT0gXCJjaGVja2JveFwiICkgJiYgIWNoYW5nZVRyaWdnZXJlZCApIHtcclxuXHRcdFx0XHQkdGhpcy50cmlnZ2VyKCBcImNoYW5nZVwiICk7XHJcblx0XHRcdH1cclxuXHRcdH0pXHJcblx0XHQuY2hlY2tib3hyYWRpbyggXCJyZWZyZXNoXCIgKTtcclxuXHR9LFxyXG5cclxuXHRfcmVzZXQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5yZWZyZXNoKCk7XHJcblx0fSxcclxuXHJcblx0Ly8gSXMgdGhlIHdpZGdldCBzdXBwb3NlZCB0byBkaXNwbGF5IGFuIGljb24/XHJcblx0X2hhc0ljb246IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIGNvbnRyb2xncm91cCwgY29udHJvbGdyb3VwV2lkZ2V0LFxyXG5cdFx0XHRjb250cm9sZ3JvdXBDb25zdHJ1Y3RvciA9ICQubW9iaWxlLmNvbnRyb2xncm91cDtcclxuXHJcblx0XHQvLyBJZiB0aGUgY29udHJvbGdyb3VwIHdpZGdldCBpcyBkZWZpbmVkIC4uLlxyXG5cdFx0aWYgKCBjb250cm9sZ3JvdXBDb25zdHJ1Y3RvciApIHtcclxuXHRcdFx0Y29udHJvbGdyb3VwID0gdGhpcy5lbGVtZW50LmNsb3Nlc3QoXHJcblx0XHRcdFx0XCI6bW9iaWxlLWNvbnRyb2xncm91cCxcIiArXHJcblx0XHRcdFx0Y29udHJvbGdyb3VwQ29uc3RydWN0b3IucHJvdG90eXBlLmluaXRTZWxlY3RvciApO1xyXG5cclxuXHRcdFx0Ly8gLi4uIGFuZCB0aGUgY2hlY2tib3ggaXMgaW4gYSBjb250cm9sZ3JvdXAgLi4uXHJcblx0XHRcdGlmICggY29udHJvbGdyb3VwLmxlbmd0aCA+IDAgKSB7XHJcblxyXG5cdFx0XHRcdC8vIC4uLiBsb29rIGZvciBhIGNvbnRyb2xncm91cCB3aWRnZXQgaW5zdGFuY2UsIGFuZCAuLi5cclxuXHRcdFx0XHRjb250cm9sZ3JvdXBXaWRnZXQgPSAkLmRhdGEoIGNvbnRyb2xncm91cFsgMCBdLCBcIm1vYmlsZS1jb250cm9sZ3JvdXBcIiApO1xyXG5cclxuXHRcdFx0XHQvLyAuLi4gaWYgZm91bmQsIGRlY2lkZSBiYXNlZCBvbiB0aGUgb3B0aW9uIHZhbHVlLCAuLi5cclxuXHRcdFx0XHRyZXR1cm4gKCAoIGNvbnRyb2xncm91cFdpZGdldCA/IGNvbnRyb2xncm91cFdpZGdldC5vcHRpb25zLnR5cGUgOlxyXG5cclxuXHRcdFx0XHRcdC8vIC4uLiBvdGhlcndpc2UgZGVjaWRlIGJhc2VkIG9uIHRoZSBcInR5cGVcIiBkYXRhIGF0dHJpYnV0ZS5cclxuXHRcdFx0XHRcdGNvbnRyb2xncm91cC5hdHRyKCBcImRhdGEtXCIgKyAkLm1vYmlsZS5ucyArIFwidHlwZVwiICkgKSAhPT0gXCJob3Jpem9udGFsXCIgKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdC8vIE5vcm1hbGx5LCB0aGUgd2lkZ2V0IGRpc3BsYXlzIGFuIGljb24uXHJcblx0XHRyZXR1cm4gdHJ1ZTtcclxuXHR9LFxyXG5cclxuXHRyZWZyZXNoOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBpc0NoZWNrZWQgPSB0aGlzLmVsZW1lbnRbIDAgXS5jaGVja2VkLFxyXG5cdFx0XHRhY3RpdmUgPSAkLm1vYmlsZS5hY3RpdmVCdG5DbGFzcyxcclxuXHRcdFx0aWNvbnBvc0NsYXNzID0gXCJ1aS1idG4taWNvbi1cIiArIHRoaXMub3B0aW9ucy5pY29ucG9zLFxyXG5cdFx0XHRhZGRDbGFzc2VzID0gW10sXHJcblx0XHRcdHJlbW92ZUNsYXNzZXMgPSBbXTtcclxuXHJcblx0XHRpZiAoIHRoaXMuX2hhc0ljb24oKSApIHtcclxuXHRcdFx0cmVtb3ZlQ2xhc3Nlcy5wdXNoKCBhY3RpdmUgKTtcclxuXHRcdFx0YWRkQ2xhc3Nlcy5wdXNoKCBpY29ucG9zQ2xhc3MgKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHJlbW92ZUNsYXNzZXMucHVzaCggaWNvbnBvc0NsYXNzICk7XHJcblx0XHRcdCggaXNDaGVja2VkID8gYWRkQ2xhc3NlcyA6IHJlbW92ZUNsYXNzZXMgKS5wdXNoKCBhY3RpdmUgKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIGlzQ2hlY2tlZCApIHtcclxuXHRcdFx0YWRkQ2xhc3Nlcy5wdXNoKCB0aGlzLmNoZWNrZWRDbGFzcyApO1xyXG5cdFx0XHRyZW1vdmVDbGFzc2VzLnB1c2goIHRoaXMudW5jaGVja2VkQ2xhc3MgKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdGFkZENsYXNzZXMucHVzaCggdGhpcy51bmNoZWNrZWRDbGFzcyApO1xyXG5cdFx0XHRyZW1vdmVDbGFzc2VzLnB1c2goIHRoaXMuY2hlY2tlZENsYXNzICk7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy53aWRnZXQoKS50b2dnbGVDbGFzcyggXCJ1aS1zdGF0ZS1kaXNhYmxlZFwiLCB0aGlzLmVsZW1lbnQucHJvcCggXCJkaXNhYmxlZFwiICkgKTtcclxuXHJcblx0XHR0aGlzLmxhYmVsXHJcblx0XHRcdC5hZGRDbGFzcyggYWRkQ2xhc3Nlcy5qb2luKCBcIiBcIiApIClcclxuXHRcdFx0LnJlbW92ZUNsYXNzKCByZW1vdmVDbGFzc2VzLmpvaW4oIFwiIFwiICkgKTtcclxuXHR9LFxyXG5cclxuXHR3aWRnZXQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0cmV0dXJuIHRoaXMubGFiZWwucGFyZW50KCk7XHJcblx0fSxcclxuXHJcblx0X3NldE9wdGlvbnM6IGZ1bmN0aW9uKCBvcHRpb25zICkge1xyXG5cdFx0dmFyIGxhYmVsID0gdGhpcy5sYWJlbCxcclxuXHRcdFx0Y3VycmVudE9wdGlvbnMgPSB0aGlzLm9wdGlvbnMsXHJcblx0XHRcdG91dGVyID0gdGhpcy53aWRnZXQoKSxcclxuXHRcdFx0aGFzSWNvbiA9IHRoaXMuX2hhc0ljb24oKTtcclxuXHJcblx0XHRpZiAoIG9wdGlvbnMuZGlzYWJsZWQgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0dGhpcy5pbnB1dC5wcm9wKCBcImRpc2FibGVkXCIsICEhb3B0aW9ucy5kaXNhYmxlZCApO1xyXG5cdFx0XHRvdXRlci50b2dnbGVDbGFzcyggXCJ1aS1zdGF0ZS1kaXNhYmxlZFwiLCAhIW9wdGlvbnMuZGlzYWJsZWQgKTtcclxuXHRcdH1cclxuXHRcdGlmICggb3B0aW9ucy5taW5pICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdG91dGVyLnRvZ2dsZUNsYXNzKCBcInVpLW1pbmlcIiwgISFvcHRpb25zLm1pbmkgKTtcclxuXHRcdH1cclxuXHRcdGlmICggb3B0aW9ucy50aGVtZSAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRsYWJlbFxyXG5cdFx0XHRcdC5yZW1vdmVDbGFzcyggXCJ1aS1idG4tXCIgKyBjdXJyZW50T3B0aW9ucy50aGVtZSApXHJcblx0XHRcdFx0LmFkZENsYXNzKCBcInVpLWJ0bi1cIiArIG9wdGlvbnMudGhlbWUgKTtcclxuXHRcdH1cclxuXHRcdGlmICggb3B0aW9ucy53cmFwcGVyQ2xhc3MgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0b3V0ZXJcclxuXHRcdFx0XHQucmVtb3ZlQ2xhc3MoIGN1cnJlbnRPcHRpb25zLndyYXBwZXJDbGFzcyApXHJcblx0XHRcdFx0LmFkZENsYXNzKCBvcHRpb25zLndyYXBwZXJDbGFzcyApO1xyXG5cdFx0fVxyXG5cdFx0aWYgKCBvcHRpb25zLmljb25wb3MgIT09IHVuZGVmaW5lZCAmJiBoYXNJY29uICkge1xyXG5cdFx0XHRsYWJlbC5yZW1vdmVDbGFzcyggXCJ1aS1idG4taWNvbi1cIiArIGN1cnJlbnRPcHRpb25zLmljb25wb3MgKS5hZGRDbGFzcyggXCJ1aS1idG4taWNvbi1cIiArIG9wdGlvbnMuaWNvbnBvcyApO1xyXG5cdFx0fSBlbHNlIGlmICggIWhhc0ljb24gKSB7XHJcblx0XHRcdGxhYmVsLnJlbW92ZUNsYXNzKCBcInVpLWJ0bi1pY29uLVwiICsgY3VycmVudE9wdGlvbnMuaWNvbnBvcyApO1xyXG5cdFx0fVxyXG5cdFx0dGhpcy5fc3VwZXIoIG9wdGlvbnMgKTtcclxuXHR9XHJcblxyXG59LCAkLm1vYmlsZS5iZWhhdmlvcnMuZm9ybVJlc2V0ICkgKTtcclxuXHJcbn0pKCBqUXVlcnkgKTtcclxuXHJcbihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xyXG5cclxuJC53aWRnZXQoIFwibW9iaWxlLmJ1dHRvblwiLCB7XHJcblxyXG5cdGluaXRTZWxlY3RvcjogXCJpbnB1dFt0eXBlPSdidXR0b24nXSwgaW5wdXRbdHlwZT0nc3VibWl0J10sIGlucHV0W3R5cGU9J3Jlc2V0J11cIixcclxuXHJcblx0b3B0aW9uczoge1xyXG5cdFx0dGhlbWU6IG51bGwsXHJcblx0XHRpY29uOiBudWxsLFxyXG5cdFx0aWNvbnBvczogXCJsZWZ0XCIsXHJcblx0XHRpY29uc2hhZG93OiBmYWxzZSwgLyogVE9ETzogRGVwcmVjYXRlZCBpbiAxLjQsIHJlbW92ZSBpbiAxLjUuICovXHJcblx0XHRjb3JuZXJzOiB0cnVlLFxyXG5cdFx0c2hhZG93OiB0cnVlLFxyXG5cdFx0aW5saW5lOiBudWxsLFxyXG5cdFx0bWluaTogbnVsbCxcclxuXHRcdHdyYXBwZXJDbGFzczogbnVsbCxcclxuXHRcdGVuaGFuY2VkOiBmYWxzZVxyXG5cdH0sXHJcblxyXG5cdF9jcmVhdGU6IGZ1bmN0aW9uKCkge1xyXG5cclxuXHRcdGlmICggdGhpcy5lbGVtZW50LmlzKCBcIjpkaXNhYmxlZFwiICkgKSB7XHJcblx0XHRcdHRoaXMub3B0aW9ucy5kaXNhYmxlZCA9IHRydWU7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCAhdGhpcy5vcHRpb25zLmVuaGFuY2VkICkge1xyXG5cdFx0XHR0aGlzLl9lbmhhbmNlKCk7XHJcblx0XHR9XHJcblxyXG5cdFx0JC5leHRlbmQoIHRoaXMsIHtcclxuXHRcdFx0d3JhcHBlcjogdGhpcy5lbGVtZW50LnBhcmVudCgpXHJcblx0XHR9KTtcclxuXHJcblx0XHR0aGlzLl9vbigge1xyXG5cdFx0XHRmb2N1czogZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0dGhpcy53aWRnZXQoKS5hZGRDbGFzcyggJC5tb2JpbGUuZm9jdXNDbGFzcyApO1xyXG5cdFx0XHR9LFxyXG5cclxuXHRcdFx0Ymx1cjogZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0dGhpcy53aWRnZXQoKS5yZW1vdmVDbGFzcyggJC5tb2JpbGUuZm9jdXNDbGFzcyApO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHJcblx0XHR0aGlzLnJlZnJlc2goIHRydWUgKTtcclxuXHR9LFxyXG5cclxuXHRfZW5oYW5jZTogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLmVsZW1lbnQud3JhcCggdGhpcy5fYnV0dG9uKCkgKTtcclxuXHR9LFxyXG5cclxuXHRfYnV0dG9uOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBvcHRpb25zID0gdGhpcy5vcHRpb25zLFxyXG5cdFx0XHRpY29uQ2xhc3NlcyA9IHRoaXMuX2dldEljb25DbGFzc2VzKCB0aGlzLm9wdGlvbnMgKTtcclxuXHJcblx0XHRyZXR1cm4gJChcIjxkaXYgY2xhc3M9J3VpLWJ0biB1aS1pbnB1dC1idG5cIiArXHJcblx0XHRcdCggb3B0aW9ucy53cmFwcGVyQ2xhc3MgPyBcIiBcIiArIG9wdGlvbnMud3JhcHBlckNsYXNzIDogXCJcIiApICtcclxuXHRcdFx0KCBvcHRpb25zLnRoZW1lID8gXCIgdWktYnRuLVwiICsgb3B0aW9ucy50aGVtZSA6IFwiXCIgKSArXHJcblx0XHRcdCggb3B0aW9ucy5jb3JuZXJzID8gXCIgdWktY29ybmVyLWFsbFwiIDogXCJcIiApICtcclxuXHRcdFx0KCBvcHRpb25zLnNoYWRvdyA/IFwiIHVpLXNoYWRvd1wiIDogXCJcIiApICtcclxuXHRcdFx0KCBvcHRpb25zLmlubGluZSA/IFwiIHVpLWJ0bi1pbmxpbmVcIiA6IFwiXCIgKSArXHJcblx0XHRcdCggb3B0aW9ucy5taW5pID8gXCIgdWktbWluaVwiIDogXCJcIiApICtcclxuXHRcdFx0KCBvcHRpb25zLmRpc2FibGVkID8gXCIgdWktc3RhdGUtZGlzYWJsZWRcIiA6IFwiXCIgKSArXHJcblx0XHRcdCggaWNvbkNsYXNzZXMgPyAoIFwiIFwiICsgaWNvbkNsYXNzZXMgKSA6IFwiXCIgKSArXHJcblx0XHRcdFwiJyA+XCIgKyB0aGlzLmVsZW1lbnQudmFsKCkgKyBcIjwvZGl2PlwiICk7XHJcblx0fSxcclxuXHJcblx0d2lkZ2V0OiBmdW5jdGlvbigpIHtcclxuXHRcdHJldHVybiB0aGlzLndyYXBwZXI7XHJcblx0fSxcclxuXHJcblx0X2Rlc3Ryb3k6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR0aGlzLmVsZW1lbnQuaW5zZXJ0QmVmb3JlKCB0aGlzLndyYXBwZXIgKTtcclxuXHRcdFx0dGhpcy53cmFwcGVyLnJlbW92ZSgpO1xyXG5cdH0sXHJcblxyXG5cdF9nZXRJY29uQ2xhc3NlczogZnVuY3Rpb24oIG9wdGlvbnMgKSB7XHJcblx0XHRyZXR1cm4gKCBvcHRpb25zLmljb24gPyAoIFwidWktaWNvbi1cIiArIG9wdGlvbnMuaWNvbiArXHJcblx0XHRcdCggb3B0aW9ucy5pY29uc2hhZG93ID8gXCIgdWktc2hhZG93LWljb25cIiA6IFwiXCIgKSArIC8qIFRPRE86IERlcHJlY2F0ZWQgaW4gMS40LCByZW1vdmUgaW4gMS41LiAqL1xyXG5cdFx0XHRcIiB1aS1idG4taWNvbi1cIiArIG9wdGlvbnMuaWNvbnBvcyApIDogXCJcIiApO1xyXG5cdH0sXHJcblxyXG5cdF9zZXRPcHRpb25zOiBmdW5jdGlvbiggb3B0aW9ucyApIHtcclxuXHRcdHZhciBvdXRlciA9IHRoaXMud2lkZ2V0KCk7XHJcblxyXG5cdFx0aWYgKCBvcHRpb25zLnRoZW1lICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdG91dGVyXHJcblx0XHRcdFx0LnJlbW92ZUNsYXNzKCB0aGlzLm9wdGlvbnMudGhlbWUgKVxyXG5cdFx0XHRcdC5hZGRDbGFzcyggXCJ1aS1idG4tXCIgKyBvcHRpb25zLnRoZW1lICk7XHJcblx0XHR9XHJcblx0XHRpZiAoIG9wdGlvbnMuY29ybmVycyAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRvdXRlci50b2dnbGVDbGFzcyggXCJ1aS1jb3JuZXItYWxsXCIsIG9wdGlvbnMuY29ybmVycyApO1xyXG5cdFx0fVxyXG5cdFx0aWYgKCBvcHRpb25zLnNoYWRvdyAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRvdXRlci50b2dnbGVDbGFzcyggXCJ1aS1zaGFkb3dcIiwgb3B0aW9ucy5zaGFkb3cgKTtcclxuXHRcdH1cclxuXHRcdGlmICggb3B0aW9ucy5pbmxpbmUgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0b3V0ZXIudG9nZ2xlQ2xhc3MoIFwidWktYnRuLWlubGluZVwiLCBvcHRpb25zLmlubGluZSApO1xyXG5cdFx0fVxyXG5cdFx0aWYgKCBvcHRpb25zLm1pbmkgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0b3V0ZXIudG9nZ2xlQ2xhc3MoIFwidWktbWluaVwiLCBvcHRpb25zLm1pbmkgKTtcclxuXHRcdH1cclxuXHRcdGlmICggb3B0aW9ucy5kaXNhYmxlZCAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHR0aGlzLmVsZW1lbnQucHJvcCggXCJkaXNhYmxlZFwiLCBvcHRpb25zLmRpc2FibGVkICk7XHJcblx0XHRcdG91dGVyLnRvZ2dsZUNsYXNzKCBcInVpLXN0YXRlLWRpc2FibGVkXCIsIG9wdGlvbnMuZGlzYWJsZWQgKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIG9wdGlvbnMuaWNvbiAhPT0gdW5kZWZpbmVkIHx8XHJcblx0XHRcdFx0b3B0aW9ucy5pY29uc2hhZG93ICE9PSB1bmRlZmluZWQgfHwgLyogVE9ETzogRGVwcmVjYXRlZCBpbiAxLjQsIHJlbW92ZSBpbiAxLjUuICovXHJcblx0XHRcdFx0b3B0aW9ucy5pY29ucG9zICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdG91dGVyXHJcblx0XHRcdFx0LnJlbW92ZUNsYXNzKCB0aGlzLl9nZXRJY29uQ2xhc3NlcyggdGhpcy5vcHRpb25zICkgKVxyXG5cdFx0XHRcdC5hZGRDbGFzcyggdGhpcy5fZ2V0SWNvbkNsYXNzZXMoXHJcblx0XHRcdFx0XHQkLmV4dGVuZCgge30sIHRoaXMub3B0aW9ucywgb3B0aW9ucyApICkgKTtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLl9zdXBlciggb3B0aW9ucyApO1xyXG5cdH0sXHJcblxyXG5cdHJlZnJlc2g6IGZ1bmN0aW9uKCBjcmVhdGUgKSB7XHJcblx0XHR2YXIgb3JpZ2luYWxFbGVtZW50LFxyXG5cdFx0XHRpc0Rpc2FibGVkID0gdGhpcy5lbGVtZW50LnByb3AoIFwiZGlzYWJsZWRcIiApO1xyXG5cclxuXHRcdGlmICggdGhpcy5vcHRpb25zLmljb24gJiYgdGhpcy5vcHRpb25zLmljb25wb3MgPT09IFwibm90ZXh0XCIgJiYgdGhpcy5lbGVtZW50LmF0dHIoIFwidGl0bGVcIiApICkge1xyXG5cdFx0XHR0aGlzLmVsZW1lbnQuYXR0ciggXCJ0aXRsZVwiLCB0aGlzLmVsZW1lbnQudmFsKCkgKTtcclxuXHRcdH1cclxuXHRcdGlmICggIWNyZWF0ZSApIHtcclxuXHRcdFx0b3JpZ2luYWxFbGVtZW50ID0gdGhpcy5lbGVtZW50LmRldGFjaCgpO1xyXG5cdFx0XHQkKCB0aGlzLndyYXBwZXIgKS50ZXh0KCB0aGlzLmVsZW1lbnQudmFsKCkgKS5hcHBlbmQoIG9yaWdpbmFsRWxlbWVudCApO1xyXG5cdFx0fVxyXG5cdFx0aWYgKCB0aGlzLm9wdGlvbnMuZGlzYWJsZWQgIT09IGlzRGlzYWJsZWQgKSB7XHJcblx0XHRcdHRoaXMuX3NldE9wdGlvbnMoeyBkaXNhYmxlZDogaXNEaXNhYmxlZCB9KTtcclxuXHRcdH1cclxuXHR9XHJcbn0pO1xyXG5cclxufSkoIGpRdWVyeSApO1xyXG5cclxuKGZ1bmN0aW9uKCAkICkge1xyXG5cdHZhclx0bWV0YSA9ICQoIFwibWV0YVtuYW1lPXZpZXdwb3J0XVwiICksXHJcblx0XHRpbml0aWFsQ29udGVudCA9IG1ldGEuYXR0ciggXCJjb250ZW50XCIgKSxcclxuXHRcdGRpc2FibGVkWm9vbSA9IGluaXRpYWxDb250ZW50ICsgXCIsbWF4aW11bS1zY2FsZT0xLCB1c2VyLXNjYWxhYmxlPW5vXCIsXHJcblx0XHRlbmFibGVkWm9vbSA9IGluaXRpYWxDb250ZW50ICsgXCIsbWF4aW11bS1zY2FsZT0xMCwgdXNlci1zY2FsYWJsZT15ZXNcIixcclxuXHRcdGRpc2FibGVkSW5pdGlhbGx5ID0gLyh1c2VyLXNjYWxhYmxlW1xcc10qPVtcXHNdKm5vKXwobWF4aW11bS1zY2FsZVtcXHNdKj1bXFxzXSoxKVskLFxcc10vLnRlc3QoIGluaXRpYWxDb250ZW50ICk7XHJcblxyXG5cdCQubW9iaWxlLnpvb20gPSAkLmV4dGVuZCgge30sIHtcclxuXHRcdGVuYWJsZWQ6ICFkaXNhYmxlZEluaXRpYWxseSxcclxuXHRcdGxvY2tlZDogZmFsc2UsXHJcblx0XHRkaXNhYmxlOiBmdW5jdGlvbiggbG9jayApIHtcclxuXHRcdFx0aWYgKCAhZGlzYWJsZWRJbml0aWFsbHkgJiYgISQubW9iaWxlLnpvb20ubG9ja2VkICkge1xyXG5cdFx0XHRcdG1ldGEuYXR0ciggXCJjb250ZW50XCIsIGRpc2FibGVkWm9vbSApO1xyXG5cdFx0XHRcdCQubW9iaWxlLnpvb20uZW5hYmxlZCA9IGZhbHNlO1xyXG5cdFx0XHRcdCQubW9iaWxlLnpvb20ubG9ja2VkID0gbG9jayB8fCBmYWxzZTtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHRcdGVuYWJsZTogZnVuY3Rpb24oIHVubG9jayApIHtcclxuXHRcdFx0aWYgKCAhZGlzYWJsZWRJbml0aWFsbHkgJiYgKCAhJC5tb2JpbGUuem9vbS5sb2NrZWQgfHwgdW5sb2NrID09PSB0cnVlICkgKSB7XHJcblx0XHRcdFx0bWV0YS5hdHRyKCBcImNvbnRlbnRcIiwgZW5hYmxlZFpvb20gKTtcclxuXHRcdFx0XHQkLm1vYmlsZS56b29tLmVuYWJsZWQgPSB0cnVlO1xyXG5cdFx0XHRcdCQubW9iaWxlLnpvb20ubG9ja2VkID0gZmFsc2U7XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblx0XHRyZXN0b3JlOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0aWYgKCAhZGlzYWJsZWRJbml0aWFsbHkgKSB7XHJcblx0XHRcdFx0bWV0YS5hdHRyKCBcImNvbnRlbnRcIiwgaW5pdGlhbENvbnRlbnQgKTtcclxuXHRcdFx0XHQkLm1vYmlsZS56b29tLmVuYWJsZWQgPSB0cnVlO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fSk7XHJcblxyXG59KCBqUXVlcnkgKSk7XHJcblxyXG4oZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcclxuXHJcbiQud2lkZ2V0KCBcIm1vYmlsZS50ZXh0aW5wdXRcIiwge1xyXG5cdGluaXRTZWxlY3RvcjogXCJpbnB1dFt0eXBlPSd0ZXh0J10sXCIgK1xyXG5cdFx0XCJpbnB1dFt0eXBlPSdzZWFyY2gnXSxcIiArXHJcblx0XHRcIjpqcW1EYXRhKHR5cGU9J3NlYXJjaCcpLFwiICtcclxuXHRcdFwiaW5wdXRbdHlwZT0nbnVtYmVyJ10sXCIgK1xyXG5cdFx0XCI6anFtRGF0YSh0eXBlPSdudW1iZXInKSxcIiArXHJcblx0XHRcImlucHV0W3R5cGU9J3Bhc3N3b3JkJ10sXCIgK1xyXG5cdFx0XCJpbnB1dFt0eXBlPSdlbWFpbCddLFwiICtcclxuXHRcdFwiaW5wdXRbdHlwZT0ndXJsJ10sXCIgK1xyXG5cdFx0XCJpbnB1dFt0eXBlPSd0ZWwnXSxcIiArXHJcblx0XHRcInRleHRhcmVhLFwiICtcclxuXHRcdFwiaW5wdXRbdHlwZT0ndGltZSddLFwiICtcclxuXHRcdFwiaW5wdXRbdHlwZT0nZGF0ZSddLFwiICtcclxuXHRcdFwiaW5wdXRbdHlwZT0nbW9udGgnXSxcIiArXHJcblx0XHRcImlucHV0W3R5cGU9J3dlZWsnXSxcIiArXHJcblx0XHRcImlucHV0W3R5cGU9J2RhdGV0aW1lJ10sXCIgK1xyXG5cdFx0XCJpbnB1dFt0eXBlPSdkYXRldGltZS1sb2NhbCddLFwiICtcclxuXHRcdFwiaW5wdXRbdHlwZT0nY29sb3InXSxcIiArXHJcblx0XHRcImlucHV0Om5vdChbdHlwZV0pLFwiICtcclxuXHRcdFwiaW5wdXRbdHlwZT0nZmlsZSddXCIsXHJcblxyXG5cdG9wdGlvbnM6IHtcclxuXHRcdHRoZW1lOiBudWxsLFxyXG5cdFx0Y29ybmVyczogdHJ1ZSxcclxuXHRcdG1pbmk6IGZhbHNlLFxyXG5cdFx0Ly8gVGhpcyBvcHRpb24gZGVmYXVsdHMgdG8gdHJ1ZSBvbiBpT1MgZGV2aWNlcy5cclxuXHRcdHByZXZlbnRGb2N1c1pvb206IC9pUGhvbmV8aVBhZHxpUG9kLy50ZXN0KCBuYXZpZ2F0b3IucGxhdGZvcm0gKSAmJiBuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoIFwiQXBwbGVXZWJLaXRcIiApID4gLTEsXHJcblx0XHR3cmFwcGVyQ2xhc3M6IFwiXCIsXHJcblx0XHRlbmhhbmNlZDogZmFsc2VcclxuXHR9LFxyXG5cclxuXHRfY3JlYXRlOiBmdW5jdGlvbigpIHtcclxuXHJcblx0XHR2YXIgb3B0aW9ucyA9IHRoaXMub3B0aW9ucyxcclxuXHRcdFx0aXNTZWFyY2ggPSB0aGlzLmVsZW1lbnQuaXMoIFwiW3R5cGU9J3NlYXJjaCddLCA6anFtRGF0YSh0eXBlPSdzZWFyY2gnKVwiICksXHJcblx0XHRcdGlzVGV4dGFyZWEgPSB0aGlzLmVsZW1lbnRbIDAgXS50YWdOYW1lID09PSBcIlRFWFRBUkVBXCIsXHJcblx0XHRcdGlzUmFuZ2UgPSB0aGlzLmVsZW1lbnQuaXMoIFwiW2RhdGEtXCIgKyAoICQubW9iaWxlLm5zIHx8IFwiXCIgKSArIFwidHlwZT0ncmFuZ2UnXVwiICksXHJcblx0XHRcdGlucHV0TmVlZHNXcmFwID0gKCAodGhpcy5lbGVtZW50LmlzKCBcImlucHV0XCIgKSB8fFxyXG5cdFx0XHRcdHRoaXMuZWxlbWVudC5pcyggXCJbZGF0YS1cIiArICggJC5tb2JpbGUubnMgfHwgXCJcIiApICsgXCJ0eXBlPSdzZWFyY2gnXVwiICkgKSAmJlxyXG5cdFx0XHRcdFx0IWlzUmFuZ2UgKTtcclxuXHJcblx0XHRpZiAoIHRoaXMuZWxlbWVudC5wcm9wKCBcImRpc2FibGVkXCIgKSApIHtcclxuXHRcdFx0b3B0aW9ucy5kaXNhYmxlZCA9IHRydWU7XHJcblx0XHR9XHJcblxyXG5cdFx0JC5leHRlbmQoIHRoaXMsIHtcclxuXHRcdFx0Y2xhc3NlczogdGhpcy5fY2xhc3Nlc0Zyb21PcHRpb25zKCksXHJcblx0XHRcdGlzU2VhcmNoOiBpc1NlYXJjaCxcclxuXHRcdFx0aXNUZXh0YXJlYTogaXNUZXh0YXJlYSxcclxuXHRcdFx0aXNSYW5nZTogaXNSYW5nZSxcclxuXHRcdFx0aW5wdXROZWVkc1dyYXA6IGlucHV0TmVlZHNXcmFwXHJcblx0XHR9KTtcclxuXHJcblx0XHR0aGlzLl9hdXRvQ29ycmVjdCgpO1xyXG5cclxuXHRcdGlmICggIW9wdGlvbnMuZW5oYW5jZWQgKSB7XHJcblx0XHRcdHRoaXMuX2VuaGFuY2UoKTtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLl9vbigge1xyXG5cdFx0XHRcImZvY3VzXCI6IFwiX2hhbmRsZUZvY3VzXCIsXHJcblx0XHRcdFwiYmx1clwiOiBcIl9oYW5kbGVCbHVyXCJcclxuXHRcdH0pO1xyXG5cclxuXHR9LFxyXG5cclxuXHRyZWZyZXNoOiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuc2V0T3B0aW9ucyh7XHJcblx0XHRcdFwiZGlzYWJsZWRcIiA6IHRoaXMuZWxlbWVudC5pcyggXCI6ZGlzYWJsZWRcIiApXHJcblx0XHR9KTtcclxuXHR9LFxyXG5cclxuXHRfZW5oYW5jZTogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgZWxlbWVudENsYXNzZXMgPSBbXTtcclxuXHJcblx0XHRpZiAoIHRoaXMuaXNUZXh0YXJlYSApIHtcclxuXHRcdFx0ZWxlbWVudENsYXNzZXMucHVzaCggXCJ1aS1pbnB1dC10ZXh0XCIgKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIHRoaXMuaXNUZXh0YXJlYSB8fCB0aGlzLmlzUmFuZ2UgKSB7XHJcblx0XHRcdGVsZW1lbnRDbGFzc2VzLnB1c2goIFwidWktc2hhZG93LWluc2V0XCIgKTtcclxuXHRcdH1cclxuXHJcblx0XHQvL1wic2VhcmNoXCIgYW5kIFwidGV4dFwiIGlucHV0IHdpZGdldHNcclxuXHRcdGlmICggdGhpcy5pbnB1dE5lZWRzV3JhcCApIHtcclxuXHRcdFx0dGhpcy5lbGVtZW50LndyYXAoIHRoaXMuX3dyYXAoKSApO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0ZWxlbWVudENsYXNzZXMgPSBlbGVtZW50Q2xhc3Nlcy5jb25jYXQoIHRoaXMuY2xhc3NlcyApO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuZWxlbWVudC5hZGRDbGFzcyggZWxlbWVudENsYXNzZXMuam9pbiggXCIgXCIgKSApO1xyXG5cdH0sXHJcblxyXG5cdHdpZGdldDogZnVuY3Rpb24oKSB7XHJcblx0XHRyZXR1cm4gKCB0aGlzLmlucHV0TmVlZHNXcmFwICkgPyB0aGlzLmVsZW1lbnQucGFyZW50KCkgOiB0aGlzLmVsZW1lbnQ7XHJcblx0fSxcclxuXHJcblx0X2NsYXNzZXNGcm9tT3B0aW9uczogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgb3B0aW9ucyA9IHRoaXMub3B0aW9ucyxcclxuXHRcdFx0Y2xhc3NlcyA9IFtdO1xyXG5cclxuXHRcdGNsYXNzZXMucHVzaCggXCJ1aS1ib2R5LVwiICsgKCAoIG9wdGlvbnMudGhlbWUgPT09IG51bGwgKSA/IFwiaW5oZXJpdFwiIDogb3B0aW9ucy50aGVtZSApICk7XHJcblx0XHRpZiAoIG9wdGlvbnMuY29ybmVycyApIHtcclxuXHRcdFx0Y2xhc3Nlcy5wdXNoKCBcInVpLWNvcm5lci1hbGxcIiApO1xyXG5cdFx0fVxyXG5cdFx0aWYgKCBvcHRpb25zLm1pbmkgKSB7XHJcblx0XHRcdGNsYXNzZXMucHVzaCggXCJ1aS1taW5pXCIgKTtcclxuXHRcdH1cclxuXHRcdGlmICggb3B0aW9ucy5kaXNhYmxlZCApIHtcclxuXHRcdFx0Y2xhc3Nlcy5wdXNoKCBcInVpLXN0YXRlLWRpc2FibGVkXCIgKTtcclxuXHRcdH1cclxuXHRcdGlmICggb3B0aW9ucy53cmFwcGVyQ2xhc3MgKSB7XHJcblx0XHRcdGNsYXNzZXMucHVzaCggb3B0aW9ucy53cmFwcGVyQ2xhc3MgKTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gY2xhc3NlcztcclxuXHR9LFxyXG5cclxuXHRfd3JhcDogZnVuY3Rpb24oKSB7XHJcblx0XHRyZXR1cm4gJCggXCI8ZGl2IGNsYXNzPSdcIiArXHJcblx0XHRcdCggdGhpcy5pc1NlYXJjaCA/IFwidWktaW5wdXQtc2VhcmNoIFwiIDogXCJ1aS1pbnB1dC10ZXh0IFwiICkgK1xyXG5cdFx0XHR0aGlzLmNsYXNzZXMuam9pbiggXCIgXCIgKSArIFwiIFwiICtcclxuXHRcdFx0XCJ1aS1zaGFkb3ctaW5zZXQnPjwvZGl2PlwiICk7XHJcblx0fSxcclxuXHJcblx0X2F1dG9Db3JyZWN0OiBmdW5jdGlvbigpIHtcclxuXHRcdC8vIFhYWDogVGVtcG9yYXJ5IHdvcmthcm91bmQgZm9yIGlzc3VlIDc4NSAoQXBwbGUgYnVnIDg5MTA1ODkpLlxyXG5cdFx0Ly8gICAgICBUdXJuIG9mZiBhdXRvY29ycmVjdCBhbmQgYXV0b2NvbXBsZXRlIG9uIG5vbi1pT1MgNSBkZXZpY2VzXHJcblx0XHQvLyAgICAgIHNpbmNlIHRoZSBwb3B1cCB0aGV5IHVzZSBjYW4ndCBiZSBkaXNtaXNzZWQgYnkgdGhlIHVzZXIuIE5vdGVcclxuXHRcdC8vICAgICAgdGhhdCB3ZSB0ZXN0IGZvciB0aGUgcHJlc2VuY2Ugb2YgdGhlIGZlYXR1cmUgYnkgbG9va2luZyBmb3JcclxuXHRcdC8vICAgICAgdGhlIGF1dG9jb3JyZWN0IHByb3BlcnR5IG9uIHRoZSBpbnB1dCBlbGVtZW50LiBXZSBjdXJyZW50bHlcclxuXHRcdC8vICAgICAgaGF2ZSBubyB0ZXN0IGZvciBpT1MgNSBvciBuZXdlciBzbyB3ZSdyZSB0ZW1wb3JhcmlseSB1c2luZ1xyXG5cdFx0Ly8gICAgICB0aGUgdG91Y2hPdmVyZmxvdyBzdXBwb3J0IGZsYWcgZm9yIGpRTSAxLjAuIFllcywgSSBmZWVsIGRpcnR5LlxyXG5cdFx0Ly8gICAgICAtIGpibGFzXHJcblx0XHRpZiAoIHR5cGVvZiB0aGlzLmVsZW1lbnRbMF0uYXV0b2NvcnJlY3QgIT09IFwidW5kZWZpbmVkXCIgJiZcclxuXHRcdFx0ISQuc3VwcG9ydC50b3VjaE92ZXJmbG93ICkge1xyXG5cclxuXHRcdFx0Ly8gU2V0IHRoZSBhdHRyaWJ1dGUgaW5zdGVhZCBvZiB0aGUgcHJvcGVydHkganVzdCBpbiBjYXNlIHRoZXJlXHJcblx0XHRcdC8vIGlzIGNvZGUgdGhhdCBhdHRlbXB0cyB0byBtYWtlIG1vZGlmaWNhdGlvbnMgdmlhIEhUTUwuXHJcblx0XHRcdHRoaXMuZWxlbWVudFswXS5zZXRBdHRyaWJ1dGUoIFwiYXV0b2NvcnJlY3RcIiwgXCJvZmZcIiApO1xyXG5cdFx0XHR0aGlzLmVsZW1lbnRbMF0uc2V0QXR0cmlidXRlKCBcImF1dG9jb21wbGV0ZVwiLCBcIm9mZlwiICk7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X2hhbmRsZUJsdXI6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy53aWRnZXQoKS5yZW1vdmVDbGFzcyggJC5tb2JpbGUuZm9jdXNDbGFzcyApO1xyXG5cdFx0aWYgKCB0aGlzLm9wdGlvbnMucHJldmVudEZvY3VzWm9vbSApIHtcclxuXHRcdFx0JC5tb2JpbGUuem9vbS5lbmFibGUoIHRydWUgKTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfaGFuZGxlRm9jdXM6IGZ1bmN0aW9uKCkge1xyXG5cdFx0Ly8gSW4gbWFueSBzaXR1YXRpb25zLCBpT1Mgd2lsbCB6b29tIGludG8gdGhlIGlucHV0IHVwb24gdGFwLCB0aGlzXHJcblx0XHQvLyBwcmV2ZW50cyB0aGF0IGZyb20gaGFwcGVuaW5nXHJcblx0XHRpZiAoIHRoaXMub3B0aW9ucy5wcmV2ZW50Rm9jdXNab29tICkge1xyXG5cdFx0XHQkLm1vYmlsZS56b29tLmRpc2FibGUoIHRydWUgKTtcclxuXHRcdH1cclxuXHRcdHRoaXMud2lkZ2V0KCkuYWRkQ2xhc3MoICQubW9iaWxlLmZvY3VzQ2xhc3MgKTtcclxuXHR9LFxyXG5cclxuXHRfc2V0T3B0aW9uczogZnVuY3Rpb24gKCBvcHRpb25zICkge1xyXG5cdFx0dmFyIG91dGVyID0gdGhpcy53aWRnZXQoKTtcclxuXHJcblx0XHR0aGlzLl9zdXBlciggb3B0aW9ucyApO1xyXG5cclxuXHRcdGlmICggISggb3B0aW9ucy5kaXNhYmxlZCA9PT0gdW5kZWZpbmVkICYmXHJcblx0XHRcdG9wdGlvbnMubWluaSA9PT0gdW5kZWZpbmVkICYmXHJcblx0XHRcdG9wdGlvbnMuY29ybmVycyA9PT0gdW5kZWZpbmVkICYmXHJcblx0XHRcdG9wdGlvbnMudGhlbWUgPT09IHVuZGVmaW5lZCAmJlxyXG5cdFx0XHRvcHRpb25zLndyYXBwZXJDbGFzcyA9PT0gdW5kZWZpbmVkICkgKSB7XHJcblxyXG5cdFx0XHRvdXRlci5yZW1vdmVDbGFzcyggdGhpcy5jbGFzc2VzLmpvaW4oIFwiIFwiICkgKTtcclxuXHRcdFx0dGhpcy5jbGFzc2VzID0gdGhpcy5fY2xhc3Nlc0Zyb21PcHRpb25zKCk7XHJcblx0XHRcdG91dGVyLmFkZENsYXNzKCB0aGlzLmNsYXNzZXMuam9pbiggXCIgXCIgKSApO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggb3B0aW9ucy5kaXNhYmxlZCAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHR0aGlzLmVsZW1lbnQucHJvcCggXCJkaXNhYmxlZFwiLCAhIW9wdGlvbnMuZGlzYWJsZWQgKTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfZGVzdHJveTogZnVuY3Rpb24oKSB7XHJcblx0XHRpZiAoIHRoaXMub3B0aW9ucy5lbmhhbmNlZCApIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cdFx0aWYgKCB0aGlzLmlucHV0TmVlZHNXcmFwICkge1xyXG5cdFx0XHR0aGlzLmVsZW1lbnQudW53cmFwKCk7XHJcblx0XHR9XHJcblx0XHR0aGlzLmVsZW1lbnQucmVtb3ZlQ2xhc3MoIFwidWktaW5wdXQtdGV4dCBcIiArIHRoaXMuY2xhc3Nlcy5qb2luKCBcIiBcIiApICk7XHJcblx0fVxyXG59KTtcclxuXHJcbn0pKCBqUXVlcnkgKTtcclxuXHJcbihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xyXG5cclxuJC53aWRnZXQoIFwibW9iaWxlLnNsaWRlclwiLCAkLmV4dGVuZCgge1xyXG5cdGluaXRTZWxlY3RvcjogXCJpbnB1dFt0eXBlPSdyYW5nZSddLCA6anFtRGF0YSh0eXBlPSdyYW5nZScpLCA6anFtRGF0YShyb2xlPSdzbGlkZXInKVwiLFxyXG5cclxuXHR3aWRnZXRFdmVudFByZWZpeDogXCJzbGlkZVwiLFxyXG5cclxuXHRvcHRpb25zOiB7XHJcblx0XHR0aGVtZTogbnVsbCxcclxuXHRcdHRyYWNrVGhlbWU6IG51bGwsXHJcblx0XHRjb3JuZXJzOiB0cnVlLFxyXG5cdFx0bWluaTogZmFsc2UsXHJcblx0XHRoaWdobGlnaHQ6IGZhbHNlXHJcblx0fSxcclxuXHJcblx0X2NyZWF0ZTogZnVuY3Rpb24oKSB7XHJcblxyXG5cdFx0Ly8gVE9ETzogRWFjaCBvZiB0aGVzZSBzaG91bGQgaGF2ZSBjb21tZW50cyBleHBsYWluIHdoYXQgdGhleSdyZSBmb3JcclxuXHRcdHZhciBzZWxmID0gdGhpcyxcclxuXHRcdFx0Y29udHJvbCA9IHRoaXMuZWxlbWVudCxcclxuXHRcdFx0dHJhY2tUaGVtZSA9IHRoaXMub3B0aW9ucy50cmFja1RoZW1lIHx8ICQubW9iaWxlLmdldEF0dHJpYnV0ZSggY29udHJvbFsgMCBdLCBcInRoZW1lXCIgKSxcclxuXHRcdFx0dHJhY2tUaGVtZUNsYXNzID0gdHJhY2tUaGVtZSA/IFwiIHVpLWJhci1cIiArIHRyYWNrVGhlbWUgOiBcIiB1aS1iYXItaW5oZXJpdFwiLFxyXG5cdFx0XHRjb3JuZXJDbGFzcyA9ICggdGhpcy5vcHRpb25zLmNvcm5lcnMgfHwgY29udHJvbC5qcW1EYXRhKCBcImNvcm5lcnNcIiApICkgPyBcIiB1aS1jb3JuZXItYWxsXCIgOiBcIlwiLFxyXG5cdFx0XHRtaW5pQ2xhc3MgPSAoIHRoaXMub3B0aW9ucy5taW5pIHx8IGNvbnRyb2wuanFtRGF0YSggXCJtaW5pXCIgKSApID8gXCIgdWktbWluaVwiIDogXCJcIixcclxuXHRcdFx0Y1R5cGUgPSBjb250cm9sWyAwIF0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKSxcclxuXHRcdFx0aXNUb2dnbGVTd2l0Y2ggPSAoIGNUeXBlID09PSBcInNlbGVjdFwiICksXHJcblx0XHRcdGlzUmFuZ2VzbGlkZXIgPSBjb250cm9sLnBhcmVudCgpLmlzKCBcIjpqcW1EYXRhKHJvbGU9J3Jhbmdlc2xpZGVyJylcIiApLFxyXG5cdFx0XHRzZWxlY3RDbGFzcyA9ICggaXNUb2dnbGVTd2l0Y2ggKSA/IFwidWktc2xpZGVyLXN3aXRjaFwiIDogXCJcIixcclxuXHRcdFx0Y29udHJvbElEID0gY29udHJvbC5hdHRyKCBcImlkXCIgKSxcclxuXHRcdFx0JGxhYmVsID0gJCggXCJbZm9yPSdcIiArIGNvbnRyb2xJRCArIFwiJ11cIiApLFxyXG5cdFx0XHRsYWJlbElEID0gJGxhYmVsLmF0dHIoIFwiaWRcIiApIHx8IGNvbnRyb2xJRCArIFwiLWxhYmVsXCIsXHJcblx0XHRcdG1pbiA9ICFpc1RvZ2dsZVN3aXRjaCA/IHBhcnNlRmxvYXQoIGNvbnRyb2wuYXR0ciggXCJtaW5cIiApICkgOiAwLFxyXG5cdFx0XHRtYXggPSAgIWlzVG9nZ2xlU3dpdGNoID8gcGFyc2VGbG9hdCggY29udHJvbC5hdHRyKCBcIm1heFwiICkgKSA6IGNvbnRyb2wuZmluZCggXCJvcHRpb25cIiApLmxlbmd0aC0xLFxyXG5cdFx0XHRzdGVwID0gd2luZG93LnBhcnNlRmxvYXQoIGNvbnRyb2wuYXR0ciggXCJzdGVwXCIgKSB8fCAxICksXHJcblx0XHRcdGRvbUhhbmRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwiYVwiICksXHJcblx0XHRcdGhhbmRsZSA9ICQoIGRvbUhhbmRsZSApLFxyXG5cdFx0XHRkb21TbGlkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcImRpdlwiICksXHJcblx0XHRcdHNsaWRlciA9ICQoIGRvbVNsaWRlciApLFxyXG5cdFx0XHR2YWx1ZWJnID0gdGhpcy5vcHRpb25zLmhpZ2hsaWdodCAmJiAhaXNUb2dnbGVTd2l0Y2ggPyAoZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0dmFyIGJnID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJkaXZcIiApO1xyXG5cdFx0XHRcdGJnLmNsYXNzTmFtZSA9IFwidWktc2xpZGVyLWJnIFwiICsgJC5tb2JpbGUuYWN0aXZlQnRuQ2xhc3M7XHJcblx0XHRcdFx0cmV0dXJuICQoIGJnICkucHJlcGVuZFRvKCBzbGlkZXIgKTtcclxuXHRcdFx0fSkoKSA6IGZhbHNlLFxyXG5cdFx0XHRvcHRpb25zLFxyXG5cdFx0XHR3cmFwcGVyLFxyXG5cdFx0XHRqLCBsZW5ndGgsXHJcblx0XHRcdGksIG9wdGlvbnNDb3VudCwgb3JpZ1RhYkluZGV4LFxyXG5cdFx0XHRzaWRlLCBhY3RpdmVDbGFzcywgc2xpZGVySW1nO1xyXG5cclxuXHRcdCRsYWJlbC5hdHRyKCBcImlkXCIsIGxhYmVsSUQgKTtcclxuXHRcdHRoaXMuaXNUb2dnbGVTd2l0Y2ggPSBpc1RvZ2dsZVN3aXRjaDtcclxuXHJcblx0XHRkb21IYW5kbGUuc2V0QXR0cmlidXRlKCBcImhyZWZcIiwgXCIjXCIgKTtcclxuXHRcdGRvbVNsaWRlci5zZXRBdHRyaWJ1dGUoIFwicm9sZVwiLCBcImFwcGxpY2F0aW9uXCIgKTtcclxuXHRcdGRvbVNsaWRlci5jbGFzc05hbWUgPSBbIHRoaXMuaXNUb2dnbGVTd2l0Y2ggPyBcInVpLXNsaWRlciB1aS1zbGlkZXItdHJhY2sgdWktc2hhZG93LWluc2V0IFwiIDogXCJ1aS1zbGlkZXItdHJhY2sgdWktc2hhZG93LWluc2V0IFwiLCBzZWxlY3RDbGFzcywgdHJhY2tUaGVtZUNsYXNzLCBjb3JuZXJDbGFzcywgbWluaUNsYXNzIF0uam9pbiggXCJcIiApO1xyXG5cdFx0ZG9tSGFuZGxlLmNsYXNzTmFtZSA9IFwidWktc2xpZGVyLWhhbmRsZVwiO1xyXG5cdFx0ZG9tU2xpZGVyLmFwcGVuZENoaWxkKCBkb21IYW5kbGUgKTtcclxuXHJcblx0XHRoYW5kbGUuYXR0cih7XHJcblx0XHRcdFwicm9sZVwiOiBcInNsaWRlclwiLFxyXG5cdFx0XHRcImFyaWEtdmFsdWVtaW5cIjogbWluLFxyXG5cdFx0XHRcImFyaWEtdmFsdWVtYXhcIjogbWF4LFxyXG5cdFx0XHRcImFyaWEtdmFsdWVub3dcIjogdGhpcy5fdmFsdWUoKSxcclxuXHRcdFx0XCJhcmlhLXZhbHVldGV4dFwiOiB0aGlzLl92YWx1ZSgpLFxyXG5cdFx0XHRcInRpdGxlXCI6IHRoaXMuX3ZhbHVlKCksXHJcblx0XHRcdFwiYXJpYS1sYWJlbGxlZGJ5XCI6IGxhYmVsSURcclxuXHRcdH0pO1xyXG5cclxuXHRcdCQuZXh0ZW5kKCB0aGlzLCB7XHJcblx0XHRcdHNsaWRlcjogc2xpZGVyLFxyXG5cdFx0XHRoYW5kbGU6IGhhbmRsZSxcclxuXHRcdFx0Y29udHJvbDogY29udHJvbCxcclxuXHRcdFx0dHlwZTogY1R5cGUsXHJcblx0XHRcdHN0ZXA6IHN0ZXAsXHJcblx0XHRcdG1heDogbWF4LFxyXG5cdFx0XHRtaW46IG1pbixcclxuXHRcdFx0dmFsdWViZzogdmFsdWViZyxcclxuXHRcdFx0aXNSYW5nZXNsaWRlcjogaXNSYW5nZXNsaWRlcixcclxuXHRcdFx0ZHJhZ2dpbmc6IGZhbHNlLFxyXG5cdFx0XHRiZWZvcmVTdGFydDogbnVsbCxcclxuXHRcdFx0dXNlck1vZGlmaWVkOiBmYWxzZSxcclxuXHRcdFx0bW91c2VNb3ZlZDogZmFsc2VcclxuXHRcdH0pO1xyXG5cclxuXHRcdGlmICggaXNUb2dnbGVTd2l0Y2ggKSB7XHJcblx0XHRcdC8vIFRPRE86IHJlc3RvcmUgb3JpZ2luYWwgdGFiaW5kZXggKGlmIGFueSkgaW4gYSBkZXN0cm95IG1ldGhvZFxyXG5cdFx0XHRvcmlnVGFiSW5kZXggPSBjb250cm9sLmF0dHIoIFwidGFiaW5kZXhcIiApO1xyXG5cdFx0XHRpZiAoIG9yaWdUYWJJbmRleCApIHtcclxuXHRcdFx0XHRoYW5kbGUuYXR0ciggXCJ0YWJpbmRleFwiLCBvcmlnVGFiSW5kZXggKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRjb250cm9sLmF0dHIoIFwidGFiaW5kZXhcIiwgXCItMVwiICkuZm9jdXMoZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0JCggdGhpcyApLmJsdXIoKTtcclxuXHRcdFx0XHRoYW5kbGUuZm9jdXMoKTtcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHR3cmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJkaXZcIiApO1xyXG5cdFx0XHR3cmFwcGVyLmNsYXNzTmFtZSA9IFwidWktc2xpZGVyLWlubmVyb2Zmc2V0XCI7XHJcblxyXG5cdFx0XHRmb3IgKCBqID0gMCwgbGVuZ3RoID0gZG9tU2xpZGVyLmNoaWxkTm9kZXMubGVuZ3RoOyBqIDwgbGVuZ3RoOyBqKysgKSB7XHJcblx0XHRcdFx0d3JhcHBlci5hcHBlbmRDaGlsZCggZG9tU2xpZGVyLmNoaWxkTm9kZXNbal0gKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0ZG9tU2xpZGVyLmFwcGVuZENoaWxkKCB3cmFwcGVyICk7XHJcblxyXG5cdFx0XHQvLyBzbGlkZXIud3JhcElubmVyKCBcIjxkaXYgY2xhc3M9J3VpLXNsaWRlci1pbm5lcm9mZnNldCc+PC9kaXY+XCIgKTtcclxuXHJcblx0XHRcdC8vIG1ha2UgdGhlIGhhbmRsZSBtb3ZlIHdpdGggYSBzbW9vdGggdHJhbnNpdGlvblxyXG5cdFx0XHRoYW5kbGUuYWRkQ2xhc3MoIFwidWktc2xpZGVyLWhhbmRsZS1zbmFwcGluZ1wiICk7XHJcblxyXG5cdFx0XHRvcHRpb25zID0gY29udHJvbC5maW5kKCBcIm9wdGlvblwiICk7XHJcblxyXG5cdFx0XHRmb3IgKCBpID0gMCwgb3B0aW9uc0NvdW50ID0gb3B0aW9ucy5sZW5ndGg7IGkgPCBvcHRpb25zQ291bnQ7IGkrKyApIHtcclxuXHRcdFx0XHRzaWRlID0gIWkgPyBcImJcIiA6IFwiYVwiO1xyXG5cdFx0XHRcdGFjdGl2ZUNsYXNzID0gIWkgPyBcIlwiIDogXCIgXCIgKyAkLm1vYmlsZS5hY3RpdmVCdG5DbGFzcztcclxuXHRcdFx0XHRzbGlkZXJJbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcInNwYW5cIiApO1xyXG5cclxuXHRcdFx0XHRzbGlkZXJJbWcuY2xhc3NOYW1lID0gWyBcInVpLXNsaWRlci1sYWJlbCB1aS1zbGlkZXItbGFiZWwtXCIsIHNpZGUsIGFjdGl2ZUNsYXNzIF0uam9pbiggXCJcIiApO1xyXG5cdFx0XHRcdHNsaWRlckltZy5zZXRBdHRyaWJ1dGUoIFwicm9sZVwiLCBcImltZ1wiICk7XHJcblx0XHRcdFx0c2xpZGVySW1nLmFwcGVuZENoaWxkKCBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSggb3B0aW9uc1tpXS5pbm5lckhUTUwgKSApO1xyXG5cdFx0XHRcdCQoIHNsaWRlckltZyApLnByZXBlbmRUbyggc2xpZGVyICk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHNlbGYuX2xhYmVscyA9ICQoIFwiLnVpLXNsaWRlci1sYWJlbFwiLCBzbGlkZXIgKTtcclxuXHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gbW9uaXRvciB0aGUgaW5wdXQgZm9yIHVwZGF0ZWQgdmFsdWVzXHJcblx0XHRjb250cm9sLmFkZENsYXNzKCBpc1RvZ2dsZVN3aXRjaCA/IFwidWktc2xpZGVyLXN3aXRjaFwiIDogXCJ1aS1zbGlkZXItaW5wdXRcIiApO1xyXG5cclxuXHRcdHRoaXMuX29uKCBjb250cm9sLCB7XHJcblx0XHRcdFwiY2hhbmdlXCI6IFwiX2NvbnRyb2xDaGFuZ2VcIixcclxuXHRcdFx0XCJrZXl1cFwiOiBcIl9jb250cm9sS2V5dXBcIixcclxuXHRcdFx0XCJibHVyXCI6IFwiX2NvbnRyb2xCbHVyXCIsXHJcblx0XHRcdFwidm1vdXNldXBcIjogXCJfY29udHJvbFZNb3VzZVVwXCJcclxuXHRcdH0pO1xyXG5cclxuXHRcdHNsaWRlci5iaW5kKCBcInZtb3VzZWRvd25cIiwgJC5wcm94eSggdGhpcy5fc2xpZGVyVk1vdXNlRG93biwgdGhpcyApIClcclxuXHRcdFx0LmJpbmQoIFwidmNsaWNrXCIsIGZhbHNlICk7XHJcblxyXG5cdFx0Ly8gV2UgaGF2ZSB0byBpbnN0YW50aWF0ZSBhIG5ldyBmdW5jdGlvbiBvYmplY3QgZm9yIHRoZSB1bmJpbmQgdG8gd29yayBwcm9wZXJseVxyXG5cdFx0Ly8gc2luY2UgdGhlIG1ldGhvZCBpdHNlbGYgaXMgZGVmaW5lZCBpbiB0aGUgcHJvdG90eXBlIChjYXVzaW5nIGl0IHRvIHVuYmluZCBldmVyeXRoaW5nKVxyXG5cdFx0dGhpcy5fb24oIGRvY3VtZW50LCB7IFwidm1vdXNlbW92ZVwiOiBcIl9wcmV2ZW50RG9jdW1lbnREcmFnXCIgfSk7XHJcblx0XHR0aGlzLl9vbiggc2xpZGVyLmFkZCggZG9jdW1lbnQgKSwgeyBcInZtb3VzZXVwXCI6IFwiX3NsaWRlclZNb3VzZVVwXCIgfSk7XHJcblxyXG5cdFx0c2xpZGVyLmluc2VydEFmdGVyKCBjb250cm9sICk7XHJcblxyXG5cdFx0Ly8gd3JhcCBpbiBhIGRpdiBmb3Igc3R5bGluZyBwdXJwb3Nlc1xyXG5cdFx0aWYgKCAhaXNUb2dnbGVTd2l0Y2ggJiYgIWlzUmFuZ2VzbGlkZXIgKSB7XHJcblx0XHRcdHdyYXBwZXIgPSB0aGlzLm9wdGlvbnMubWluaSA/IFwiPGRpdiBjbGFzcz0ndWktc2xpZGVyIHVpLW1pbmknPlwiIDogXCI8ZGl2IGNsYXNzPSd1aS1zbGlkZXInPlwiO1xyXG5cclxuXHRcdFx0Y29udHJvbC5hZGQoIHNsaWRlciApLndyYXBBbGwoIHdyYXBwZXIgKTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBiaW5kIHRoZSBoYW5kbGUgZXZlbnQgY2FsbGJhY2tzIGFuZCBzZXQgdGhlIGNvbnRleHQgdG8gdGhlIHdpZGdldCBpbnN0YW5jZVxyXG5cdFx0dGhpcy5fb24oIHRoaXMuaGFuZGxlLCB7XHJcblx0XHRcdFwidm1vdXNlZG93blwiOiBcIl9oYW5kbGVWTW91c2VEb3duXCIsXHJcblx0XHRcdFwia2V5ZG93blwiOiBcIl9oYW5kbGVLZXlkb3duXCIsXHJcblx0XHRcdFwia2V5dXBcIjogXCJfaGFuZGxlS2V5dXBcIlxyXG5cdFx0fSk7XHJcblxyXG5cdFx0dGhpcy5oYW5kbGUuYmluZCggXCJ2Y2xpY2tcIiwgZmFsc2UgKTtcclxuXHJcblx0XHR0aGlzLl9oYW5kbGVGb3JtUmVzZXQoKTtcclxuXHJcblx0XHR0aGlzLnJlZnJlc2goIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB0cnVlICk7XHJcblx0fSxcclxuXHJcblx0X3NldE9wdGlvbnM6IGZ1bmN0aW9uKCBvcHRpb25zICkge1xyXG5cdFx0aWYgKCBvcHRpb25zLnRoZW1lICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdHRoaXMuX3NldFRoZW1lKCBvcHRpb25zLnRoZW1lICk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBvcHRpb25zLnRyYWNrVGhlbWUgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0dGhpcy5fc2V0VHJhY2tUaGVtZSggb3B0aW9ucy50cmFja1RoZW1lICk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBvcHRpb25zLmNvcm5lcnMgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0dGhpcy5fc2V0Q29ybmVycyggb3B0aW9ucy5jb3JuZXJzICk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBvcHRpb25zLm1pbmkgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0dGhpcy5fc2V0TWluaSggb3B0aW9ucy5taW5pICk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBvcHRpb25zLmhpZ2hsaWdodCAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHR0aGlzLl9zZXRIaWdobGlnaHQoIG9wdGlvbnMuaGlnaGxpZ2h0ICk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBvcHRpb25zLmRpc2FibGVkICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdHRoaXMuX3NldERpc2FibGVkKCBvcHRpb25zLmRpc2FibGVkICk7XHJcblx0XHR9XHJcblx0XHR0aGlzLl9zdXBlciggb3B0aW9ucyApO1xyXG5cdH0sXHJcblxyXG5cdF9jb250cm9sQ2hhbmdlOiBmdW5jdGlvbiggZXZlbnQgKSB7XHJcblx0XHQvLyBpZiB0aGUgdXNlciBkcmFnZ2VkIHRoZSBoYW5kbGUsIHRoZSBcImNoYW5nZVwiIGV2ZW50IHdhcyB0cmlnZ2VyZWQgZnJvbSBpbnNpZGUgcmVmcmVzaCgpOyBkb24ndCBjYWxsIHJlZnJlc2goKSBhZ2FpblxyXG5cdFx0aWYgKCB0aGlzLl90cmlnZ2VyKCBcImNvbnRyb2xjaGFuZ2VcIiwgZXZlbnQgKSA9PT0gZmFsc2UgKSB7XHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdH1cclxuXHRcdGlmICggIXRoaXMubW91c2VNb3ZlZCApIHtcclxuXHRcdFx0dGhpcy5yZWZyZXNoKCB0aGlzLl92YWx1ZSgpLCB0cnVlICk7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X2NvbnRyb2xLZXl1cDogZnVuY3Rpb24oLyogZXZlbnQgKi8pIHsgLy8gbmVjZXNzYXJ5P1xyXG5cdFx0dGhpcy5yZWZyZXNoKCB0aGlzLl92YWx1ZSgpLCB0cnVlLCB0cnVlICk7XHJcblx0fSxcclxuXHJcblx0X2NvbnRyb2xCbHVyOiBmdW5jdGlvbigvKiBldmVudCAqLykge1xyXG5cdFx0dGhpcy5yZWZyZXNoKCB0aGlzLl92YWx1ZSgpLCB0cnVlICk7XHJcblx0fSxcclxuXHJcblx0Ly8gaXQgYXBwZWFycyB0aGUgY2xpY2tpbmcgdGhlIHVwIGFuZCBkb3duIGJ1dHRvbnMgaW4gY2hyb21lIG9uXHJcblx0Ly8gcmFuZ2UvbnVtYmVyIGlucHV0cyBkb2Vzbid0IHRyaWdnZXIgYSBjaGFuZ2UgdW50aWwgdGhlIGZpZWxkIGlzXHJcblx0Ly8gYmx1cnJlZC4gSGVyZSB3ZSBjaGVjayB0aGlmIHRoZSB2YWx1ZSBoYXMgY2hhbmdlZCBhbmQgcmVmcmVzaFxyXG5cdF9jb250cm9sVk1vdXNlVXA6IGZ1bmN0aW9uKC8qIGV2ZW50ICovKSB7XHJcblx0XHR0aGlzLl9jaGVja2VkUmVmcmVzaCgpO1xyXG5cdH0sXHJcblxyXG5cdC8vIE5PVEUgZm9yY2UgZm9jdXMgb24gaGFuZGxlXHJcblx0X2hhbmRsZVZNb3VzZURvd246IGZ1bmN0aW9uKC8qIGV2ZW50ICovKSB7XHJcblx0XHR0aGlzLmhhbmRsZS5mb2N1cygpO1xyXG5cdH0sXHJcblxyXG5cdF9oYW5kbGVLZXlkb3duOiBmdW5jdGlvbiggZXZlbnQgKSB7XHJcblx0XHR2YXIgaW5kZXggPSB0aGlzLl92YWx1ZSgpO1xyXG5cdFx0aWYgKCB0aGlzLm9wdGlvbnMuZGlzYWJsZWQgKSB7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBJbiBhbGwgY2FzZXMgcHJldmVudCB0aGUgZGVmYXVsdCBhbmQgbWFyayB0aGUgaGFuZGxlIGFzIGFjdGl2ZVxyXG5cdFx0c3dpdGNoICggZXZlbnQua2V5Q29kZSApIHtcclxuXHRcdFx0Y2FzZSAkLm1vYmlsZS5rZXlDb2RlLkhPTUU6XHJcblx0XHRcdGNhc2UgJC5tb2JpbGUua2V5Q29kZS5FTkQ6XHJcblx0XHRcdGNhc2UgJC5tb2JpbGUua2V5Q29kZS5QQUdFX1VQOlxyXG5cdFx0XHRjYXNlICQubW9iaWxlLmtleUNvZGUuUEFHRV9ET1dOOlxyXG5cdFx0XHRjYXNlICQubW9iaWxlLmtleUNvZGUuVVA6XHJcblx0XHRcdGNhc2UgJC5tb2JpbGUua2V5Q29kZS5SSUdIVDpcclxuXHRcdFx0Y2FzZSAkLm1vYmlsZS5rZXlDb2RlLkRPV046XHJcblx0XHRcdGNhc2UgJC5tb2JpbGUua2V5Q29kZS5MRUZUOlxyXG5cdFx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG5cdFx0XHRcdGlmICggIXRoaXMuX2tleVNsaWRpbmcgKSB7XHJcblx0XHRcdFx0XHR0aGlzLl9rZXlTbGlkaW5nID0gdHJ1ZTtcclxuXHRcdFx0XHRcdHRoaXMuaGFuZGxlLmFkZENsYXNzKCBcInVpLXN0YXRlLWFjdGl2ZVwiICk7IC8qIFRPRE86IFdlIGRvbid0IHVzZSB0aGlzIGNsYXNzIGZvciBzdHlsaW5nLiBEbyB3ZSBuZWVkIHRvIGFkZCBpdD8gKi9cclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIG1vdmUgdGhlIHNsaWRlciBhY2NvcmRpbmcgdG8gdGhlIGtleXByZXNzXHJcblx0XHRzd2l0Y2ggKCBldmVudC5rZXlDb2RlICkge1xyXG5cdFx0XHRjYXNlICQubW9iaWxlLmtleUNvZGUuSE9NRTpcclxuXHRcdFx0XHR0aGlzLnJlZnJlc2goIHRoaXMubWluICk7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdGNhc2UgJC5tb2JpbGUua2V5Q29kZS5FTkQ6XHJcblx0XHRcdFx0dGhpcy5yZWZyZXNoKCB0aGlzLm1heCApO1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRjYXNlICQubW9iaWxlLmtleUNvZGUuUEFHRV9VUDpcclxuXHRcdFx0Y2FzZSAkLm1vYmlsZS5rZXlDb2RlLlVQOlxyXG5cdFx0XHRjYXNlICQubW9iaWxlLmtleUNvZGUuUklHSFQ6XHJcblx0XHRcdFx0dGhpcy5yZWZyZXNoKCBpbmRleCArIHRoaXMuc3RlcCApO1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRjYXNlICQubW9iaWxlLmtleUNvZGUuUEFHRV9ET1dOOlxyXG5cdFx0XHRjYXNlICQubW9iaWxlLmtleUNvZGUuRE9XTjpcclxuXHRcdFx0Y2FzZSAkLm1vYmlsZS5rZXlDb2RlLkxFRlQ6XHJcblx0XHRcdFx0dGhpcy5yZWZyZXNoKCBpbmRleCAtIHRoaXMuc3RlcCApO1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0fVxyXG5cdH0sIC8vIHJlbW92ZSBhY3RpdmUgbWFya1xyXG5cclxuXHRfaGFuZGxlS2V5dXA6IGZ1bmN0aW9uKC8qIGV2ZW50ICovKSB7XHJcblx0XHRpZiAoIHRoaXMuX2tleVNsaWRpbmcgKSB7XHJcblx0XHRcdHRoaXMuX2tleVNsaWRpbmcgPSBmYWxzZTtcclxuXHRcdFx0dGhpcy5oYW5kbGUucmVtb3ZlQ2xhc3MoIFwidWktc3RhdGUtYWN0aXZlXCIgKTsgLyogU2VlIGNvbW1lbnQgYWJvdmUuICovXHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X3NsaWRlclZNb3VzZURvd246IGZ1bmN0aW9uKCBldmVudCApIHtcclxuXHRcdC8vIE5PVEU6IHdlIGRvbid0IGRvIHRoaXMgaW4gcmVmcmVzaCBiZWNhdXNlIHdlIHN0aWxsIHdhbnQgdG9cclxuXHRcdC8vICAgICAgIHN1cHBvcnQgcHJvZ3JhbW1hdGljIGFsdGVyYXRpb24gb2YgZGlzYWJsZWQgaW5wdXRzXHJcblx0XHRpZiAoIHRoaXMub3B0aW9ucy5kaXNhYmxlZCB8fCAhKCBldmVudC53aGljaCA9PT0gMSB8fCBldmVudC53aGljaCA9PT0gMCB8fCBldmVudC53aGljaCA9PT0gdW5kZWZpbmVkICkgKSB7XHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdH1cclxuXHRcdGlmICggdGhpcy5fdHJpZ2dlciggXCJiZWZvcmVzdGFydFwiLCBldmVudCApID09PSBmYWxzZSApIHtcclxuXHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0fVxyXG5cdFx0dGhpcy5kcmFnZ2luZyA9IHRydWU7XHJcblx0XHR0aGlzLnVzZXJNb2RpZmllZCA9IGZhbHNlO1xyXG5cdFx0dGhpcy5tb3VzZU1vdmVkID0gZmFsc2U7XHJcblxyXG5cdFx0aWYgKCB0aGlzLmlzVG9nZ2xlU3dpdGNoICkge1xyXG5cdFx0XHR0aGlzLmJlZm9yZVN0YXJ0ID0gdGhpcy5lbGVtZW50WzBdLnNlbGVjdGVkSW5kZXg7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5yZWZyZXNoKCBldmVudCApO1xyXG5cdFx0dGhpcy5fdHJpZ2dlciggXCJzdGFydFwiICk7XHJcblx0XHRyZXR1cm4gZmFsc2U7XHJcblx0fSxcclxuXHJcblx0X3NsaWRlclZNb3VzZVVwOiBmdW5jdGlvbigpIHtcclxuXHRcdGlmICggdGhpcy5kcmFnZ2luZyApIHtcclxuXHRcdFx0dGhpcy5kcmFnZ2luZyA9IGZhbHNlO1xyXG5cclxuXHRcdFx0aWYgKCB0aGlzLmlzVG9nZ2xlU3dpdGNoICkge1xyXG5cdFx0XHRcdC8vIG1ha2UgdGhlIGhhbmRsZSBtb3ZlIHdpdGggYSBzbW9vdGggdHJhbnNpdGlvblxyXG5cdFx0XHRcdHRoaXMuaGFuZGxlLmFkZENsYXNzKCBcInVpLXNsaWRlci1oYW5kbGUtc25hcHBpbmdcIiApO1xyXG5cclxuXHRcdFx0XHRpZiAoIHRoaXMubW91c2VNb3ZlZCApIHtcclxuXHRcdFx0XHRcdC8vIHRoaXMgaXMgYSBkcmFnLCBjaGFuZ2UgdGhlIHZhbHVlIG9ubHkgaWYgdXNlciBkcmFnZ2VkIGVub3VnaFxyXG5cdFx0XHRcdFx0aWYgKCB0aGlzLnVzZXJNb2RpZmllZCApIHtcclxuXHRcdFx0XHRcdFx0dGhpcy5yZWZyZXNoKCB0aGlzLmJlZm9yZVN0YXJ0ID09PSAwID8gMSA6IDAgKTtcclxuXHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdHRoaXMucmVmcmVzaCggdGhpcy5iZWZvcmVTdGFydCApO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHQvLyB0aGlzIGlzIGp1c3QgYSBjbGljaywgY2hhbmdlIHRoZSB2YWx1ZVxyXG5cdFx0XHRcdFx0dGhpcy5yZWZyZXNoKCB0aGlzLmJlZm9yZVN0YXJ0ID09PSAwID8gMSA6IDAgKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHRoaXMubW91c2VNb3ZlZCA9IGZhbHNlO1xyXG5cdFx0XHR0aGlzLl90cmlnZ2VyKCBcInN0b3BcIiApO1xyXG5cdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X3ByZXZlbnREb2N1bWVudERyYWc6IGZ1bmN0aW9uKCBldmVudCApIHtcclxuXHRcdFx0Ly8gTk9URTogd2UgZG9uJ3QgZG8gdGhpcyBpbiByZWZyZXNoIGJlY2F1c2Ugd2Ugc3RpbGwgd2FudCB0b1xyXG5cdFx0XHQvLyAgICAgICBzdXBwb3J0IHByb2dyYW1tYXRpYyBhbHRlcmF0aW9uIG9mIGRpc2FibGVkIGlucHV0c1xyXG5cdFx0XHRpZiAoIHRoaXMuX3RyaWdnZXIoIFwiZHJhZ1wiLCBldmVudCApID09PSBmYWxzZSkge1xyXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAoIHRoaXMuZHJhZ2dpbmcgJiYgIXRoaXMub3B0aW9ucy5kaXNhYmxlZCApIHtcclxuXHJcblx0XHRcdFx0Ly8gdGhpcy5tb3VzZU1vdmVkIG11c3QgYmUgdXBkYXRlZCBiZWZvcmUgcmVmcmVzaCgpIGJlY2F1c2UgaXQgd2lsbCBiZSB1c2VkIGluIHRoZSBjb250cm9sIFwiY2hhbmdlXCIgZXZlbnRcclxuXHRcdFx0XHR0aGlzLm1vdXNlTW92ZWQgPSB0cnVlO1xyXG5cclxuXHRcdFx0XHRpZiAoIHRoaXMuaXNUb2dnbGVTd2l0Y2ggKSB7XHJcblx0XHRcdFx0XHQvLyBtYWtlIHRoZSBoYW5kbGUgbW92ZSBpbiBzeW5jIHdpdGggdGhlIG1vdXNlXHJcblx0XHRcdFx0XHR0aGlzLmhhbmRsZS5yZW1vdmVDbGFzcyggXCJ1aS1zbGlkZXItaGFuZGxlLXNuYXBwaW5nXCIgKTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdHRoaXMucmVmcmVzaCggZXZlbnQgKTtcclxuXHJcblx0XHRcdFx0Ly8gb25seSBhZnRlciByZWZyZXNoKCkgeW91IGNhbiBjYWxjdWxhdGUgdGhpcy51c2VyTW9kaWZpZWRcclxuXHRcdFx0XHR0aGlzLnVzZXJNb2RpZmllZCA9IHRoaXMuYmVmb3JlU3RhcnQgIT09IHRoaXMuZWxlbWVudFswXS5zZWxlY3RlZEluZGV4O1xyXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHJcblx0X2NoZWNrZWRSZWZyZXNoOiBmdW5jdGlvbigpIHtcclxuXHRcdGlmICggdGhpcy52YWx1ZSAhPT0gdGhpcy5fdmFsdWUoKSApIHtcclxuXHRcdFx0dGhpcy5yZWZyZXNoKCB0aGlzLl92YWx1ZSgpICk7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X3ZhbHVlOiBmdW5jdGlvbigpIHtcclxuXHRcdHJldHVybiAgdGhpcy5pc1RvZ2dsZVN3aXRjaCA/IHRoaXMuZWxlbWVudFswXS5zZWxlY3RlZEluZGV4IDogcGFyc2VGbG9hdCggdGhpcy5lbGVtZW50LnZhbCgpICkgO1xyXG5cdH0sXHJcblxyXG5cdF9yZXNldDogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLnJlZnJlc2goIHVuZGVmaW5lZCwgZmFsc2UsIHRydWUgKTtcclxuXHR9LFxyXG5cclxuXHRyZWZyZXNoOiBmdW5jdGlvbiggdmFsLCBpc2Zyb21Db250cm9sLCBwcmV2ZW50SW5wdXRVcGRhdGUgKSB7XHJcblx0XHQvLyBOT1RFOiB3ZSBkb24ndCByZXR1cm4gaGVyZSBiZWNhdXNlIHdlIHdhbnQgdG8gc3VwcG9ydCBwcm9ncmFtbWF0aWNcclxuXHRcdC8vICAgICAgIGFsdGVyYXRpb24gb2YgdGhlIGlucHV0IHZhbHVlLCB3aGljaCBzaG91bGQgc3RpbGwgdXBkYXRlIHRoZSBzbGlkZXJcclxuXHJcblx0XHR2YXIgc2VsZiA9IHRoaXMsXHJcblx0XHRcdHBhcmVudFRoZW1lID0gJC5tb2JpbGUuZ2V0QXR0cmlidXRlKCB0aGlzLmVsZW1lbnRbIDAgXSwgXCJ0aGVtZVwiICksXHJcblx0XHRcdHRoZW1lID0gdGhpcy5vcHRpb25zLnRoZW1lIHx8IHBhcmVudFRoZW1lLFxyXG5cdFx0XHR0aGVtZUNsYXNzID0gIHRoZW1lID8gXCIgdWktYnRuLVwiICsgdGhlbWUgOiBcIlwiLFxyXG5cdFx0XHR0cmFja1RoZW1lID0gdGhpcy5vcHRpb25zLnRyYWNrVGhlbWUgfHwgcGFyZW50VGhlbWUsXHJcblx0XHRcdHRyYWNrVGhlbWVDbGFzcyA9IHRyYWNrVGhlbWUgPyBcIiB1aS1iYXItXCIgKyB0cmFja1RoZW1lIDogXCIgdWktYmFyLWluaGVyaXRcIixcclxuXHRcdFx0Y29ybmVyQ2xhc3MgPSB0aGlzLm9wdGlvbnMuY29ybmVycyA/IFwiIHVpLWNvcm5lci1hbGxcIiA6IFwiXCIsXHJcblx0XHRcdG1pbmlDbGFzcyA9IHRoaXMub3B0aW9ucy5taW5pID8gXCIgdWktbWluaVwiIDogXCJcIixcclxuXHRcdFx0bGVmdCwgd2lkdGgsIGRhdGEsIHRvbCxcclxuXHRcdFx0cHhTdGVwLCBwZXJjZW50LFxyXG5cdFx0XHRjb250cm9sLCBpc0lucHV0LCBvcHRpb25FbGVtZW50cywgbWluLCBtYXgsIHN0ZXAsXHJcblx0XHRcdG5ld3ZhbCwgdmFsTW9kU3RlcCwgYWxpZ25WYWx1ZSwgcGVyY2VudFBlclN0ZXAsXHJcblx0XHRcdGhhbmRsZVBlcmNlbnQsIGFQZXJjZW50LCBiUGVyY2VudCxcclxuXHRcdFx0dmFsdWVDaGFuZ2VkO1xyXG5cclxuXHRcdHNlbGYuc2xpZGVyWzBdLmNsYXNzTmFtZSA9IFsgdGhpcy5pc1RvZ2dsZVN3aXRjaCA/IFwidWktc2xpZGVyIHVpLXNsaWRlci1zd2l0Y2ggdWktc2xpZGVyLXRyYWNrIHVpLXNoYWRvdy1pbnNldFwiIDogXCJ1aS1zbGlkZXItdHJhY2sgdWktc2hhZG93LWluc2V0XCIsIHRyYWNrVGhlbWVDbGFzcywgY29ybmVyQ2xhc3MsIG1pbmlDbGFzcyBdLmpvaW4oIFwiXCIgKTtcclxuXHRcdGlmICggdGhpcy5vcHRpb25zLmRpc2FibGVkIHx8IHRoaXMuZWxlbWVudC5wcm9wKCBcImRpc2FibGVkXCIgKSApIHtcclxuXHRcdFx0dGhpcy5kaXNhYmxlKCk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gc2V0IHRoZSBzdG9yZWQgdmFsdWUgZm9yIGNvbXBhcmlzb24gbGF0ZXJcclxuXHRcdHRoaXMudmFsdWUgPSB0aGlzLl92YWx1ZSgpO1xyXG5cdFx0aWYgKCB0aGlzLm9wdGlvbnMuaGlnaGxpZ2h0ICYmICF0aGlzLmlzVG9nZ2xlU3dpdGNoICYmIHRoaXMuc2xpZGVyLmZpbmQoIFwiLnVpLXNsaWRlci1iZ1wiICkubGVuZ3RoID09PSAwICkge1xyXG5cdFx0XHR0aGlzLnZhbHVlYmcgPSAoZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0dmFyIGJnID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJkaXZcIiApO1xyXG5cdFx0XHRcdGJnLmNsYXNzTmFtZSA9IFwidWktc2xpZGVyLWJnIFwiICsgJC5tb2JpbGUuYWN0aXZlQnRuQ2xhc3M7XHJcblx0XHRcdFx0cmV0dXJuICQoIGJnICkucHJlcGVuZFRvKCBzZWxmLnNsaWRlciApO1xyXG5cdFx0XHR9KSgpO1xyXG5cdFx0fVxyXG5cdFx0dGhpcy5oYW5kbGUuYWRkQ2xhc3MoIFwidWktYnRuXCIgKyB0aGVtZUNsYXNzICsgXCIgdWktc2hhZG93XCIgKTtcclxuXHJcblx0XHRjb250cm9sID0gdGhpcy5lbGVtZW50O1xyXG5cdFx0aXNJbnB1dCA9ICF0aGlzLmlzVG9nZ2xlU3dpdGNoO1xyXG5cdFx0b3B0aW9uRWxlbWVudHMgPSBpc0lucHV0ID8gW10gOiBjb250cm9sLmZpbmQoIFwib3B0aW9uXCIgKTtcclxuXHRcdG1pbiA9ICBpc0lucHV0ID8gcGFyc2VGbG9hdCggY29udHJvbC5hdHRyKCBcIm1pblwiICkgKSA6IDA7XHJcblx0XHRtYXggPSBpc0lucHV0ID8gcGFyc2VGbG9hdCggY29udHJvbC5hdHRyKCBcIm1heFwiICkgKSA6IG9wdGlvbkVsZW1lbnRzLmxlbmd0aCAtIDE7XHJcblx0XHRzdGVwID0gKCBpc0lucHV0ICYmIHBhcnNlRmxvYXQoIGNvbnRyb2wuYXR0ciggXCJzdGVwXCIgKSApID4gMCApID8gcGFyc2VGbG9hdCggY29udHJvbC5hdHRyKCBcInN0ZXBcIiApICkgOiAxO1xyXG5cclxuXHRcdGlmICggdHlwZW9mIHZhbCA9PT0gXCJvYmplY3RcIiApIHtcclxuXHRcdFx0ZGF0YSA9IHZhbDtcclxuXHRcdFx0Ly8gYSBzbGlnaHQgdG9sZXJhbmNlIGhlbHBlZCBnZXQgdG8gdGhlIGVuZHMgb2YgdGhlIHNsaWRlclxyXG5cdFx0XHR0b2wgPSA4O1xyXG5cclxuXHRcdFx0bGVmdCA9IHRoaXMuc2xpZGVyLm9mZnNldCgpLmxlZnQ7XHJcblx0XHRcdHdpZHRoID0gdGhpcy5zbGlkZXIud2lkdGgoKTtcclxuXHRcdFx0cHhTdGVwID0gd2lkdGgvKChtYXgtbWluKS9zdGVwKTtcclxuXHRcdFx0aWYgKCAhdGhpcy5kcmFnZ2luZyB8fFxyXG5cdFx0XHRcdFx0ZGF0YS5wYWdlWCA8IGxlZnQgLSB0b2wgfHxcclxuXHRcdFx0XHRcdGRhdGEucGFnZVggPiBsZWZ0ICsgd2lkdGggKyB0b2wgKSB7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmICggcHhTdGVwID4gMSApIHtcclxuXHRcdFx0XHRwZXJjZW50ID0gKCAoIGRhdGEucGFnZVggLSBsZWZ0ICkgLyB3aWR0aCApICogMTAwO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdHBlcmNlbnQgPSBNYXRoLnJvdW5kKCAoICggZGF0YS5wYWdlWCAtIGxlZnQgKSAvIHdpZHRoICkgKiAxMDAgKTtcclxuXHRcdFx0fVxyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0aWYgKCB2YWwgPT0gbnVsbCApIHtcclxuXHRcdFx0XHR2YWwgPSBpc0lucHV0ID8gcGFyc2VGbG9hdCggY29udHJvbC52YWwoKSB8fCAwICkgOiBjb250cm9sWzBdLnNlbGVjdGVkSW5kZXg7XHJcblx0XHRcdH1cclxuXHRcdFx0cGVyY2VudCA9ICggcGFyc2VGbG9hdCggdmFsICkgLSBtaW4gKSAvICggbWF4IC0gbWluICkgKiAxMDA7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBpc05hTiggcGVyY2VudCApICkge1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0bmV3dmFsID0gKCBwZXJjZW50IC8gMTAwICkgKiAoIG1heCAtIG1pbiApICsgbWluO1xyXG5cclxuXHRcdC8vZnJvbSBqUXVlcnkgVUkgc2xpZGVyLCB0aGUgZm9sbG93aW5nIHNvdXJjZSB3aWxsIHJvdW5kIHRvIHRoZSBuZWFyZXN0IHN0ZXBcclxuXHRcdHZhbE1vZFN0ZXAgPSAoIG5ld3ZhbCAtIG1pbiApICUgc3RlcDtcclxuXHRcdGFsaWduVmFsdWUgPSBuZXd2YWwgLSB2YWxNb2RTdGVwO1xyXG5cclxuXHRcdGlmICggTWF0aC5hYnMoIHZhbE1vZFN0ZXAgKSAqIDIgPj0gc3RlcCApIHtcclxuXHRcdFx0YWxpZ25WYWx1ZSArPSAoIHZhbE1vZFN0ZXAgPiAwICkgPyBzdGVwIDogKCAtc3RlcCApO1xyXG5cdFx0fVxyXG5cclxuXHRcdHBlcmNlbnRQZXJTdGVwID0gMTAwLygobWF4LW1pbikvc3RlcCk7XHJcblx0XHQvLyBTaW5jZSBKYXZhU2NyaXB0IGhhcyBwcm9ibGVtcyB3aXRoIGxhcmdlIGZsb2F0cywgcm91bmRcclxuXHRcdC8vIHRoZSBmaW5hbCB2YWx1ZSB0byA1IGRpZ2l0cyBhZnRlciB0aGUgZGVjaW1hbCBwb2ludCAoc2VlIGpRdWVyeVVJOiAjNDEyNClcclxuXHRcdG5ld3ZhbCA9IHBhcnNlRmxvYXQoIGFsaWduVmFsdWUudG9GaXhlZCg1KSApO1xyXG5cclxuXHRcdGlmICggdHlwZW9mIHB4U3RlcCA9PT0gXCJ1bmRlZmluZWRcIiApIHtcclxuXHRcdFx0cHhTdGVwID0gd2lkdGggLyAoIChtYXgtbWluKSAvIHN0ZXAgKTtcclxuXHRcdH1cclxuXHRcdGlmICggcHhTdGVwID4gMSAmJiBpc0lucHV0ICkge1xyXG5cdFx0XHRwZXJjZW50ID0gKCBuZXd2YWwgLSBtaW4gKSAqIHBlcmNlbnRQZXJTdGVwICogKCAxIC8gc3RlcCApO1xyXG5cdFx0fVxyXG5cdFx0aWYgKCBwZXJjZW50IDwgMCApIHtcclxuXHRcdFx0cGVyY2VudCA9IDA7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBwZXJjZW50ID4gMTAwICkge1xyXG5cdFx0XHRwZXJjZW50ID0gMTAwO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggbmV3dmFsIDwgbWluICkge1xyXG5cdFx0XHRuZXd2YWwgPSBtaW47XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBuZXd2YWwgPiBtYXggKSB7XHJcblx0XHRcdG5ld3ZhbCA9IG1heDtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLmhhbmRsZS5jc3MoIFwibGVmdFwiLCBwZXJjZW50ICsgXCIlXCIgKTtcclxuXHJcblx0XHR0aGlzLmhhbmRsZVswXS5zZXRBdHRyaWJ1dGUoIFwiYXJpYS12YWx1ZW5vd1wiLCBpc0lucHV0ID8gbmV3dmFsIDogb3B0aW9uRWxlbWVudHMuZXEoIG5ld3ZhbCApLmF0dHIoIFwidmFsdWVcIiApICk7XHJcblxyXG5cdFx0dGhpcy5oYW5kbGVbMF0uc2V0QXR0cmlidXRlKCBcImFyaWEtdmFsdWV0ZXh0XCIsIGlzSW5wdXQgPyBuZXd2YWwgOiBvcHRpb25FbGVtZW50cy5lcSggbmV3dmFsICkuZ2V0RW5jb2RlZFRleHQoKSApO1xyXG5cclxuXHRcdHRoaXMuaGFuZGxlWzBdLnNldEF0dHJpYnV0ZSggXCJ0aXRsZVwiLCBpc0lucHV0ID8gbmV3dmFsIDogb3B0aW9uRWxlbWVudHMuZXEoIG5ld3ZhbCApLmdldEVuY29kZWRUZXh0KCkgKTtcclxuXHJcblx0XHRpZiAoIHRoaXMudmFsdWViZyApIHtcclxuXHRcdFx0dGhpcy52YWx1ZWJnLmNzcyggXCJ3aWR0aFwiLCBwZXJjZW50ICsgXCIlXCIgKTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBkcmFnIHRoZSBsYWJlbCB3aWR0aHNcclxuXHRcdGlmICggdGhpcy5fbGFiZWxzICkge1xyXG5cdFx0XHRoYW5kbGVQZXJjZW50ID0gdGhpcy5oYW5kbGUud2lkdGgoKSAvIHRoaXMuc2xpZGVyLndpZHRoKCkgKiAxMDA7XHJcblx0XHRcdGFQZXJjZW50ID0gcGVyY2VudCAmJiBoYW5kbGVQZXJjZW50ICsgKCAxMDAgLSBoYW5kbGVQZXJjZW50ICkgKiBwZXJjZW50IC8gMTAwO1xyXG5cdFx0XHRiUGVyY2VudCA9IHBlcmNlbnQgPT09IDEwMCA/IDAgOiBNYXRoLm1pbiggaGFuZGxlUGVyY2VudCArIDEwMCAtIGFQZXJjZW50LCAxMDAgKTtcclxuXHJcblx0XHRcdHRoaXMuX2xhYmVscy5lYWNoKGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHZhciBhYiA9ICQoIHRoaXMgKS5oYXNDbGFzcyggXCJ1aS1zbGlkZXItbGFiZWwtYVwiICk7XHJcblx0XHRcdFx0JCggdGhpcyApLndpZHRoKCAoIGFiID8gYVBlcmNlbnQgOiBiUGVyY2VudCAgKSArIFwiJVwiICk7XHJcblx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggIXByZXZlbnRJbnB1dFVwZGF0ZSApIHtcclxuXHRcdFx0dmFsdWVDaGFuZ2VkID0gZmFsc2U7XHJcblxyXG5cdFx0XHQvLyB1cGRhdGUgY29udHJvbFwicyB2YWx1ZVxyXG5cdFx0XHRpZiAoIGlzSW5wdXQgKSB7XHJcblx0XHRcdFx0dmFsdWVDaGFuZ2VkID0gcGFyc2VGbG9hdCggY29udHJvbC52YWwoKSApICE9PSBuZXd2YWw7XHJcblx0XHRcdFx0Y29udHJvbC52YWwoIG5ld3ZhbCApO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdHZhbHVlQ2hhbmdlZCA9IGNvbnRyb2xbIDAgXS5zZWxlY3RlZEluZGV4ICE9PSBuZXd2YWw7XHJcblx0XHRcdFx0Y29udHJvbFsgMCBdLnNlbGVjdGVkSW5kZXggPSBuZXd2YWw7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKCB0aGlzLl90cmlnZ2VyKCBcImJlZm9yZWNoYW5nZVwiLCB2YWwgKSA9PT0gZmFsc2UpIHtcclxuXHRcdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAoICFpc2Zyb21Db250cm9sICYmIHZhbHVlQ2hhbmdlZCApIHtcclxuXHRcdFx0XHRjb250cm9sLnRyaWdnZXIoIFwiY2hhbmdlXCIgKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9zZXRIaWdobGlnaHQ6IGZ1bmN0aW9uKCB2YWx1ZSApIHtcclxuXHRcdHZhbHVlID0gISF2YWx1ZTtcclxuXHRcdGlmICggdmFsdWUgKSB7XHJcblx0XHRcdHRoaXMub3B0aW9ucy5oaWdobGlnaHQgPSAhIXZhbHVlO1xyXG5cdFx0XHR0aGlzLnJlZnJlc2goKTtcclxuXHRcdH0gZWxzZSBpZiAoIHRoaXMudmFsdWViZyApIHtcclxuXHRcdFx0dGhpcy52YWx1ZWJnLnJlbW92ZSgpO1xyXG5cdFx0XHR0aGlzLnZhbHVlYmcgPSBmYWxzZTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfc2V0VGhlbWU6IGZ1bmN0aW9uKCB2YWx1ZSApIHtcclxuXHRcdHRoaXMuaGFuZGxlXHJcblx0XHRcdC5yZW1vdmVDbGFzcyggXCJ1aS1idG4tXCIgKyB0aGlzLm9wdGlvbnMudGhlbWUgKVxyXG5cdFx0XHQuYWRkQ2xhc3MoIFwidWktYnRuLVwiICsgdmFsdWUgKTtcclxuXHJcblx0XHR2YXIgY3VycmVudFRoZW1lID0gdGhpcy5vcHRpb25zLnRoZW1lID8gdGhpcy5vcHRpb25zLnRoZW1lIDogXCJpbmhlcml0XCIsXHJcblx0XHRcdG5ld1RoZW1lID0gdmFsdWUgPyB2YWx1ZSA6IFwiaW5oZXJpdFwiO1xyXG5cclxuXHRcdHRoaXMuY29udHJvbFxyXG5cdFx0XHQucmVtb3ZlQ2xhc3MoIFwidWktYm9keS1cIiArIGN1cnJlbnRUaGVtZSApXHJcblx0XHRcdC5hZGRDbGFzcyggXCJ1aS1ib2R5LVwiICsgbmV3VGhlbWUgKTtcclxuXHR9LFxyXG5cclxuXHRfc2V0VHJhY2tUaGVtZTogZnVuY3Rpb24oIHZhbHVlICkge1xyXG5cdFx0dmFyIGN1cnJlbnRUcmFja1RoZW1lID0gdGhpcy5vcHRpb25zLnRyYWNrVGhlbWUgPyB0aGlzLm9wdGlvbnMudHJhY2tUaGVtZSA6IFwiaW5oZXJpdFwiLFxyXG5cdFx0XHRuZXdUcmFja1RoZW1lID0gdmFsdWUgPyB2YWx1ZSA6IFwiaW5oZXJpdFwiO1xyXG5cclxuXHRcdHRoaXMuc2xpZGVyXHJcblx0XHRcdC5yZW1vdmVDbGFzcyggXCJ1aS1ib2R5LVwiICsgY3VycmVudFRyYWNrVGhlbWUgKVxyXG5cdFx0XHQuYWRkQ2xhc3MoIFwidWktYm9keS1cIiArIG5ld1RyYWNrVGhlbWUgKTtcclxuXHR9LFxyXG5cclxuXHRfc2V0TWluaTogZnVuY3Rpb24oIHZhbHVlICkge1xyXG5cdFx0dmFsdWUgPSAhIXZhbHVlO1xyXG5cdFx0aWYgKCAhdGhpcy5pc1RvZ2dsZVN3aXRjaCAmJiAhdGhpcy5pc1Jhbmdlc2xpZGVyICkge1xyXG5cdFx0XHR0aGlzLnNsaWRlci5wYXJlbnQoKS50b2dnbGVDbGFzcyggXCJ1aS1taW5pXCIsIHZhbHVlICk7XHJcblx0XHRcdHRoaXMuZWxlbWVudC50b2dnbGVDbGFzcyggXCJ1aS1taW5pXCIsIHZhbHVlICk7XHJcblx0XHR9XHJcblx0XHR0aGlzLnNsaWRlci50b2dnbGVDbGFzcyggXCJ1aS1taW5pXCIsIHZhbHVlICk7XHJcblx0fSxcclxuXHJcblx0X3NldENvcm5lcnM6IGZ1bmN0aW9uKCB2YWx1ZSApIHtcclxuXHRcdHRoaXMuc2xpZGVyLnRvZ2dsZUNsYXNzKCBcInVpLWNvcm5lci1hbGxcIiwgdmFsdWUgKTtcclxuXHJcblx0XHRpZiAoICF0aGlzLmlzVG9nZ2xlU3dpdGNoICkge1xyXG5cdFx0XHR0aGlzLmNvbnRyb2wudG9nZ2xlQ2xhc3MoIFwidWktY29ybmVyLWFsbFwiLCB2YWx1ZSApO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9zZXREaXNhYmxlZDogZnVuY3Rpb24oIHZhbHVlICkge1xyXG5cdFx0dmFsdWUgPSAhIXZhbHVlO1xyXG5cdFx0dGhpcy5lbGVtZW50LnByb3AoIFwiZGlzYWJsZWRcIiwgdmFsdWUgKTtcclxuXHRcdHRoaXMuc2xpZGVyXHJcblx0XHRcdC50b2dnbGVDbGFzcyggXCJ1aS1zdGF0ZS1kaXNhYmxlZFwiLCB2YWx1ZSApXHJcblx0XHRcdC5hdHRyKCBcImFyaWEtZGlzYWJsZWRcIiwgdmFsdWUgKTtcclxuXHJcblx0XHR0aGlzLmVsZW1lbnQudG9nZ2xlQ2xhc3MoIFwidWktc3RhdGUtZGlzYWJsZWRcIiwgdmFsdWUgKTtcclxuXHR9XHJcblxyXG59LCAkLm1vYmlsZS5iZWhhdmlvcnMuZm9ybVJlc2V0ICkgKTtcclxuXHJcbn0pKCBqUXVlcnkgKTtcclxuXHJcbihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xyXG5cclxudmFyIHBvcHVwO1xyXG5cclxuZnVuY3Rpb24gZ2V0UG9wdXAoKSB7XHJcblx0aWYgKCAhcG9wdXAgKSB7XHJcblx0XHRwb3B1cCA9ICQoIFwiPGRpdj48L2Rpdj5cIiwge1xyXG5cdFx0XHRcImNsYXNzXCI6IFwidWktc2xpZGVyLXBvcHVwIHVpLXNoYWRvdyB1aS1jb3JuZXItYWxsXCJcclxuXHRcdH0pO1xyXG5cdH1cclxuXHRyZXR1cm4gcG9wdXAuY2xvbmUoKTtcclxufVxyXG5cclxuJC53aWRnZXQoIFwibW9iaWxlLnNsaWRlclwiLCAkLm1vYmlsZS5zbGlkZXIsIHtcclxuXHRvcHRpb25zOiB7XHJcblx0XHRwb3B1cEVuYWJsZWQ6IGZhbHNlLFxyXG5cdFx0c2hvd1ZhbHVlOiBmYWxzZVxyXG5cdH0sXHJcblxyXG5cdF9jcmVhdGU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5fc3VwZXIoKTtcclxuXHJcblx0XHQkLmV4dGVuZCggdGhpcywge1xyXG5cdFx0XHRfY3VycmVudFZhbHVlOiBudWxsLFxyXG5cdFx0XHRfcG9wdXA6IG51bGwsXHJcblx0XHRcdF9wb3B1cFZpc2libGU6IGZhbHNlXHJcblx0XHR9KTtcclxuXHJcblx0XHR0aGlzLl9zZXRPcHRpb24oIFwicG9wdXBFbmFibGVkXCIsIHRoaXMub3B0aW9ucy5wb3B1cEVuYWJsZWQgKTtcclxuXHJcblx0XHR0aGlzLl9vbiggdGhpcy5oYW5kbGUsIHsgXCJ2bW91c2Vkb3duXCIgOiBcIl9zaG93UG9wdXBcIiB9ICk7XHJcblx0XHR0aGlzLl9vbiggdGhpcy5zbGlkZXIuYWRkKCB0aGlzLmRvY3VtZW50ICksIHsgXCJ2bW91c2V1cFwiIDogXCJfaGlkZVBvcHVwXCIgfSApO1xyXG5cdFx0dGhpcy5fcmVmcmVzaCgpO1xyXG5cdH0sXHJcblxyXG5cdC8vIHBvc2l0aW9uIHRoZSBwb3B1cCBjZW50ZXJlZCA1cHggYWJvdmUgdGhlIGhhbmRsZVxyXG5cdF9wb3NpdGlvblBvcHVwOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBkc3RPZmZzZXQgPSB0aGlzLmhhbmRsZS5vZmZzZXQoKTtcclxuXHJcblx0XHR0aGlzLl9wb3B1cC5vZmZzZXQoIHtcclxuXHRcdFx0bGVmdDogZHN0T2Zmc2V0LmxlZnQgKyAoIHRoaXMuaGFuZGxlLndpZHRoKCkgLSB0aGlzLl9wb3B1cC53aWR0aCgpICkgLyAyLFxyXG5cdFx0XHR0b3A6IGRzdE9mZnNldC50b3AgLSB0aGlzLl9wb3B1cC5vdXRlckhlaWdodCgpIC0gNVxyXG5cdFx0fSk7XHJcblx0fSxcclxuXHJcblx0X3NldE9wdGlvbjogZnVuY3Rpb24oIGtleSwgdmFsdWUgKSB7XHJcblx0XHR0aGlzLl9zdXBlcigga2V5LCB2YWx1ZSApO1xyXG5cclxuXHRcdGlmICgga2V5ID09PSBcInNob3dWYWx1ZVwiICkge1xyXG5cdFx0XHR0aGlzLmhhbmRsZS5odG1sKCB2YWx1ZSAmJiAhdGhpcy5vcHRpb25zLm1pbmkgPyB0aGlzLl92YWx1ZSgpIDogXCJcIiApO1xyXG5cdFx0fSBlbHNlIGlmICgga2V5ID09PSBcInBvcHVwRW5hYmxlZFwiICkge1xyXG5cdFx0XHRpZiAoIHZhbHVlICYmICF0aGlzLl9wb3B1cCApIHtcclxuXHRcdFx0XHR0aGlzLl9wb3B1cCA9IGdldFBvcHVwKClcclxuXHRcdFx0XHRcdC5hZGRDbGFzcyggXCJ1aS1ib2R5LVwiICsgKCB0aGlzLm9wdGlvbnMudGhlbWUgfHwgXCJhXCIgKSApXHJcblx0XHRcdFx0XHQuaGlkZSgpXHJcblx0XHRcdFx0XHQuaW5zZXJ0QmVmb3JlKCB0aGlzLmVsZW1lbnQgKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdC8vIHNob3cgdmFsdWUgb24gdGhlIGhhbmRsZSBhbmQgaW4gcG9wdXBcclxuXHRyZWZyZXNoOiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuX3N1cGVyLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTtcclxuXHRcdHRoaXMuX3JlZnJlc2goKTtcclxuXHR9LFxyXG5cclxuXHRfcmVmcmVzaDogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgbyA9IHRoaXMub3B0aW9ucywgbmV3VmFsdWU7XHJcblxyXG5cdFx0aWYgKCBvLnBvcHVwRW5hYmxlZCApIHtcclxuXHRcdFx0Ly8gcmVtb3ZlIHRoZSB0aXRsZSBhdHRyaWJ1dGUgZnJvbSB0aGUgaGFuZGxlICh3aGljaCBpc1xyXG5cdFx0XHQvLyByZXNwb25zaWJsZSBmb3IgdGhlIGFubm95aW5nIHRvb2x0aXApOyBOQiB3ZSBoYXZlXHJcblx0XHRcdC8vIHRvIGRvIGl0IGhlcmUgYXMgdGhlIGpxbSBzbGlkZXIgc2V0cyBpdCBldmVyeSB0aW1lXHJcblx0XHRcdC8vIHRoZSBzbGlkZXIncyB2YWx1ZSBjaGFuZ2VzIDooXHJcblx0XHRcdHRoaXMuaGFuZGxlLnJlbW92ZUF0dHIoIFwidGl0bGVcIiApO1xyXG5cdFx0fVxyXG5cclxuXHRcdG5ld1ZhbHVlID0gdGhpcy5fdmFsdWUoKTtcclxuXHRcdGlmICggbmV3VmFsdWUgPT09IHRoaXMuX2N1cnJlbnRWYWx1ZSApIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cdFx0dGhpcy5fY3VycmVudFZhbHVlID0gbmV3VmFsdWU7XHJcblxyXG5cdFx0aWYgKCBvLnBvcHVwRW5hYmxlZCAmJiB0aGlzLl9wb3B1cCApIHtcclxuXHRcdFx0dGhpcy5fcG9zaXRpb25Qb3B1cCgpO1xyXG5cdFx0XHR0aGlzLl9wb3B1cC5odG1sKCBuZXdWYWx1ZSApO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggby5zaG93VmFsdWUgJiYgIXRoaXMub3B0aW9ucy5taW5pICkge1xyXG5cdFx0XHR0aGlzLmhhbmRsZS5odG1sKCBuZXdWYWx1ZSApO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9zaG93UG9wdXA6IGZ1bmN0aW9uKCkge1xyXG5cdFx0aWYgKCB0aGlzLm9wdGlvbnMucG9wdXBFbmFibGVkICYmICF0aGlzLl9wb3B1cFZpc2libGUgKSB7XHJcblx0XHRcdHRoaXMuaGFuZGxlLmh0bWwoIFwiXCIgKTtcclxuXHRcdFx0dGhpcy5fcG9wdXAuc2hvdygpO1xyXG5cdFx0XHR0aGlzLl9wb3NpdGlvblBvcHVwKCk7XHJcblx0XHRcdHRoaXMuX3BvcHVwVmlzaWJsZSA9IHRydWU7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X2hpZGVQb3B1cDogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgbyA9IHRoaXMub3B0aW9ucztcclxuXHJcblx0XHRpZiAoIG8ucG9wdXBFbmFibGVkICYmIHRoaXMuX3BvcHVwVmlzaWJsZSApIHtcclxuXHRcdFx0aWYgKCBvLnNob3dWYWx1ZSAmJiAhby5taW5pICkge1xyXG5cdFx0XHRcdHRoaXMuaGFuZGxlLmh0bWwoIHRoaXMuX3ZhbHVlKCkgKTtcclxuXHRcdFx0fVxyXG5cdFx0XHR0aGlzLl9wb3B1cC5oaWRlKCk7XHJcblx0XHRcdHRoaXMuX3BvcHVwVmlzaWJsZSA9IGZhbHNlO1xyXG5cdFx0fVxyXG5cdH1cclxufSk7XHJcblxyXG59KSggalF1ZXJ5ICk7XHJcblxyXG4oZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcclxuXHJcbiQud2lkZ2V0KCBcIm1vYmlsZS5mbGlwc3dpdGNoXCIsICQuZXh0ZW5kKHtcclxuXHJcblx0b3B0aW9uczoge1xyXG5cdFx0b25UZXh0OiBcIk9uXCIsXHJcblx0XHRvZmZUZXh0OiBcIk9mZlwiLFxyXG5cdFx0dGhlbWU6IG51bGwsXHJcblx0XHRlbmhhbmNlZDogZmFsc2UsXHJcblx0XHR3cmFwcGVyQ2xhc3M6IG51bGwsXHJcblx0XHRjb3JuZXJzOiB0cnVlLFxyXG5cdFx0bWluaTogZmFsc2VcclxuXHR9LFxyXG5cclxuXHRfY3JlYXRlOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0aWYgKCAhdGhpcy5vcHRpb25zLmVuaGFuY2VkICkge1xyXG5cdFx0XHRcdHRoaXMuX2VuaGFuY2UoKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHQkLmV4dGVuZCggdGhpcywge1xyXG5cdFx0XHRcdFx0ZmxpcHN3aXRjaDogdGhpcy5lbGVtZW50LnBhcmVudCgpLFxyXG5cdFx0XHRcdFx0b246IHRoaXMuZWxlbWVudC5maW5kKCBcIi51aS1mbGlwc3dpdGNoLW9uXCIgKS5lcSggMCApLFxyXG5cdFx0XHRcdFx0b2ZmOiB0aGlzLmVsZW1lbnQuZmluZCggXCIudWktZmxpcHN3aXRjaC1vZmZcIiApLmVxKDApLFxyXG5cdFx0XHRcdFx0dHlwZTogdGhpcy5lbGVtZW50LmdldCggMCApLnRhZ05hbWVcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0dGhpcy5faGFuZGxlRm9ybVJlc2V0KCk7XHJcblxyXG5cdFx0XHQvLyBUcmFuc2ZlciB0YWJpbmRleCB0byBcIm9uXCIgZWxlbWVudCBhbmQgbWFrZSBpbnB1dCB1bmZvY3VzYWJsZVxyXG5cdFx0XHR0aGlzLl9vcmlnaW5hbFRhYkluZGV4ID0gdGhpcy5lbGVtZW50LmF0dHIoIFwidGFiaW5kZXhcIiApO1xyXG5cdFx0XHRpZiAoIHRoaXMuX29yaWdpbmFsVGFiSW5kZXggIT0gbnVsbCApIHtcclxuXHRcdFx0XHR0aGlzLm9uLmF0dHIoIFwidGFiaW5kZXhcIiwgdGhpcy5fb3JpZ2luYWxUYWJJbmRleCApO1xyXG5cdFx0XHR9XHJcblx0XHRcdHRoaXMuZWxlbWVudC5hdHRyKCBcInRhYmluZGV4XCIsIFwiLTFcIiApO1xyXG5cdFx0XHR0aGlzLl9vbih7XHJcblx0XHRcdFx0XCJmb2N1c1wiIDogXCJfaGFuZGxlSW5wdXRGb2N1c1wiXHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0aWYgKCB0aGlzLmVsZW1lbnQuaXMoIFwiOmRpc2FibGVkXCIgKSApIHtcclxuXHRcdFx0XHR0aGlzLl9zZXRPcHRpb25zKHtcclxuXHRcdFx0XHRcdFwiZGlzYWJsZWRcIjogdHJ1ZVxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHR0aGlzLl9vbiggdGhpcy5mbGlwc3dpdGNoLCB7XHJcblx0XHRcdFx0XCJjbGlja1wiOiBcIl90b2dnbGVcIixcclxuXHRcdFx0XHRcInN3aXBlbGVmdFwiOiBcIl9sZWZ0XCIsXHJcblx0XHRcdFx0XCJzd2lwZXJpZ2h0XCI6IFwiX3JpZ2h0XCJcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHR0aGlzLl9vbiggdGhpcy5vbiwge1xyXG5cdFx0XHRcdFwia2V5ZG93blwiOiBcIl9rZXlkb3duXCJcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHR0aGlzLl9vbigge1xyXG5cdFx0XHRcdFwiY2hhbmdlXCI6IFwicmVmcmVzaFwiXHJcblx0XHRcdH0pO1xyXG5cdH0sXHJcblxyXG5cdF9oYW5kbGVJbnB1dEZvY3VzOiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMub24uZm9jdXMoKTtcclxuXHR9LFxyXG5cclxuXHR3aWRnZXQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0cmV0dXJuIHRoaXMuZmxpcHN3aXRjaDtcclxuXHR9LFxyXG5cclxuXHRfbGVmdDogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLmZsaXBzd2l0Y2gucmVtb3ZlQ2xhc3MoIFwidWktZmxpcHN3aXRjaC1hY3RpdmVcIiApO1xyXG5cdFx0aWYgKCB0aGlzLnR5cGUgPT09IFwiU0VMRUNUXCIgKSB7XHJcblx0XHRcdHRoaXMuZWxlbWVudC5nZXQoIDAgKS5zZWxlY3RlZEluZGV4ID0gMDtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHRoaXMuZWxlbWVudC5wcm9wKCBcImNoZWNrZWRcIiwgZmFsc2UgKTtcclxuXHRcdH1cclxuXHRcdHRoaXMuZWxlbWVudC50cmlnZ2VyKCBcImNoYW5nZVwiICk7XHJcblx0fSxcclxuXHJcblx0X3JpZ2h0OiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuZmxpcHN3aXRjaC5hZGRDbGFzcyggXCJ1aS1mbGlwc3dpdGNoLWFjdGl2ZVwiICk7XHJcblx0XHRpZiAoIHRoaXMudHlwZSA9PT0gXCJTRUxFQ1RcIiApIHtcclxuXHRcdFx0dGhpcy5lbGVtZW50LmdldCggMCApLnNlbGVjdGVkSW5kZXggPSAxO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0dGhpcy5lbGVtZW50LnByb3AoIFwiY2hlY2tlZFwiLCB0cnVlICk7XHJcblx0XHR9XHJcblx0XHR0aGlzLmVsZW1lbnQudHJpZ2dlciggXCJjaGFuZ2VcIiApO1xyXG5cdH0sXHJcblxyXG5cdF9lbmhhbmNlOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBmbGlwc3dpdGNoID0gJCggXCI8ZGl2PlwiICksXHJcblx0XHRcdG9wdGlvbnMgPSB0aGlzLm9wdGlvbnMsXHJcblx0XHRcdGVsZW1lbnQgPSB0aGlzLmVsZW1lbnQsXHJcblx0XHRcdHRoZW1lID0gb3B0aW9ucy50aGVtZSA/IG9wdGlvbnMudGhlbWUgOiBcImluaGVyaXRcIixcclxuXHJcblx0XHRcdC8vIFRoZSBcIm9uXCIgYnV0dG9uIGlzIGFuIGFuY2hvciBzbyBpdCdzIGZvY3VzYWJsZVxyXG5cdFx0XHRvbiA9ICQoIFwiPGE+PC9hPlwiLCB7XHJcblx0XHRcdFx0XCJocmVmXCI6IFwiI1wiXHJcblx0XHRcdH0pLFxyXG5cdFx0XHRvZmYgPSAkKCBcIjxzcGFuPjwvc3Bhbj5cIiApLFxyXG5cdFx0XHR0eXBlID0gZWxlbWVudC5nZXQoIDAgKS50YWdOYW1lLFxyXG5cdFx0XHRvblRleHQgPSAoIHR5cGUgPT09IFwiSU5QVVRcIiApID9cclxuXHRcdFx0XHRvcHRpb25zLm9uVGV4dCA6IGVsZW1lbnQuZmluZCggXCJvcHRpb25cIiApLmVxKCAxICkudGV4dCgpLFxyXG5cdFx0XHRvZmZUZXh0ID0gKCB0eXBlID09PSBcIklOUFVUXCIgKSA/XHJcblx0XHRcdFx0b3B0aW9ucy5vZmZUZXh0IDogZWxlbWVudC5maW5kKCBcIm9wdGlvblwiICkuZXEoIDAgKS50ZXh0KCk7XHJcblxyXG5cdFx0XHRvblxyXG5cdFx0XHRcdC5hZGRDbGFzcyggXCJ1aS1mbGlwc3dpdGNoLW9uIHVpLWJ0biB1aS1zaGFkb3cgdWktYnRuLWluaGVyaXRcIiApXHJcblx0XHRcdFx0LnRleHQoIG9uVGV4dCApO1xyXG5cdFx0XHRvZmZcclxuXHRcdFx0XHQuYWRkQ2xhc3MoIFwidWktZmxpcHN3aXRjaC1vZmZcIiApXHJcblx0XHRcdFx0LnRleHQoIG9mZlRleHQgKTtcclxuXHJcblx0XHRcdGZsaXBzd2l0Y2hcclxuXHRcdFx0XHQuYWRkQ2xhc3MoIFwidWktZmxpcHN3aXRjaCB1aS1zaGFkb3ctaW5zZXQgXCIgK1xyXG5cdFx0XHRcdFx0XCJ1aS1iYXItXCIgKyB0aGVtZSArIFwiIFwiICtcclxuXHRcdFx0XHRcdCggb3B0aW9ucy53cmFwcGVyQ2xhc3MgPyBvcHRpb25zLndyYXBwZXJDbGFzcyA6IFwiXCIgKSArIFwiIFwiICtcclxuXHRcdFx0XHRcdCggKCBlbGVtZW50LmlzKCBcIjpjaGVja2VkXCIgKSB8fFxyXG5cdFx0XHRcdFx0XHRlbGVtZW50XHJcblx0XHRcdFx0XHRcdFx0LmZpbmQoIFwib3B0aW9uXCIgKVxyXG5cdFx0XHRcdFx0XHRcdC5lcSggMSApXHJcblx0XHRcdFx0XHRcdFx0LmlzKCBcIjpzZWxlY3RlZFwiICkgKSA/IFwidWktZmxpcHN3aXRjaC1hY3RpdmVcIiA6IFwiXCIgKSArXHJcblx0XHRcdFx0XHQoIGVsZW1lbnQuaXMoXCI6ZGlzYWJsZWRcIikgPyBcIiB1aS1zdGF0ZS1kaXNhYmxlZFwiOiBcIlwiKSArXHJcblx0XHRcdFx0XHQoIG9wdGlvbnMuY29ybmVycyA/IFwiIHVpLWNvcm5lci1hbGxcIjogXCJcIiApICtcclxuXHRcdFx0XHRcdCggb3B0aW9ucy5taW5pID8gXCIgdWktbWluaVwiOiBcIlwiICkgKVxyXG5cdFx0XHRcdC5hcHBlbmQoIG9uLCBvZmYgKTtcclxuXHJcblx0XHRcdGVsZW1lbnRcclxuXHRcdFx0XHQuYWRkQ2xhc3MoIFwidWktZmxpcHN3aXRjaC1pbnB1dFwiIClcclxuXHRcdFx0XHQuYWZ0ZXIoIGZsaXBzd2l0Y2ggKVxyXG5cdFx0XHRcdC5hcHBlbmRUbyggZmxpcHN3aXRjaCApO1xyXG5cclxuXHRcdCQuZXh0ZW5kKCB0aGlzLCB7XHJcblx0XHRcdGZsaXBzd2l0Y2g6IGZsaXBzd2l0Y2gsXHJcblx0XHRcdG9uOiBvbixcclxuXHRcdFx0b2ZmOiBvZmYsXHJcblx0XHRcdHR5cGU6IHR5cGVcclxuXHRcdH0pO1xyXG5cdH0sXHJcblxyXG5cdF9yZXNldDogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLnJlZnJlc2goKTtcclxuXHR9LFxyXG5cclxuXHRyZWZyZXNoOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBkaXJlY3Rpb24sXHJcblx0XHRcdGV4aXN0aW5nRGlyZWN0aW9uID0gdGhpcy5mbGlwc3dpdGNoLmhhc0NsYXNzKCBcInVpLWZsaXBzd2l0Y2gtYWN0aXZlXCIgKSA/IFwiX3JpZ2h0XCIgOiBcIl9sZWZ0XCI7XHJcblxyXG5cdFx0aWYgKCB0aGlzLnR5cGUgPT09IFwiU0VMRUNUXCIgKSB7XHJcblx0XHRcdGRpcmVjdGlvbiA9ICggdGhpcy5lbGVtZW50LmdldCggMCApLnNlbGVjdGVkSW5kZXggPiAwICkgPyBcIl9yaWdodFwiOiBcIl9sZWZ0XCI7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRkaXJlY3Rpb24gPSB0aGlzLmVsZW1lbnQucHJvcCggXCJjaGVja2VkXCIgKSA/IFwiX3JpZ2h0XCI6IFwiX2xlZnRcIjtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIGRpcmVjdGlvbiAhPT0gZXhpc3RpbmdEaXJlY3Rpb24gKSB7XHJcblx0XHRcdHRoaXNbIGRpcmVjdGlvbiBdKCk7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X3RvZ2dsZTogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgZGlyZWN0aW9uID0gdGhpcy5mbGlwc3dpdGNoLmhhc0NsYXNzKCBcInVpLWZsaXBzd2l0Y2gtYWN0aXZlXCIgKSA/IFwiX2xlZnRcIiA6IFwiX3JpZ2h0XCI7XHJcblxyXG5cdFx0dGhpc1sgZGlyZWN0aW9uIF0oKTtcclxuXHR9LFxyXG5cclxuXHRfa2V5ZG93bjogZnVuY3Rpb24oIGUgKSB7XHJcblx0XHRpZiAoIGUud2hpY2ggPT09ICQubW9iaWxlLmtleUNvZGUuTEVGVCApIHtcclxuXHRcdFx0dGhpcy5fbGVmdCgpO1xyXG5cdFx0fSBlbHNlIGlmICggZS53aGljaCA9PT0gJC5tb2JpbGUua2V5Q29kZS5SSUdIVCApIHtcclxuXHRcdFx0dGhpcy5fcmlnaHQoKTtcclxuXHRcdH0gZWxzZSBpZiAoIGUud2hpY2ggPT09ICQubW9iaWxlLmtleUNvZGUuU1BBQ0UgKSB7XHJcblx0XHRcdHRoaXMuX3RvZ2dsZSgpO1xyXG5cdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X3NldE9wdGlvbnM6IGZ1bmN0aW9uKCBvcHRpb25zICkge1xyXG5cdFx0aWYgKCBvcHRpb25zLnRoZW1lICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdHZhciBjdXJyZW50VGhlbWUgPSBvcHRpb25zLnRoZW1lID8gb3B0aW9ucy50aGVtZSA6IFwiaW5oZXJpdFwiLFxyXG5cdFx0XHRcdG5ld1RoZW1lID0gb3B0aW9ucy50aGVtZSA/IG9wdGlvbnMudGhlbWUgOiBcImluaGVyaXRcIjtcclxuXHJcblx0XHRcdHRoaXMud2lkZ2V0KClcclxuXHRcdFx0XHQucmVtb3ZlQ2xhc3MoIFwidWktYmFyLVwiICsgY3VycmVudFRoZW1lIClcclxuXHRcdFx0XHQuYWRkQ2xhc3MoIFwidWktYmFyLVwiICsgbmV3VGhlbWUgKTtcclxuXHRcdH1cclxuXHRcdGlmICggb3B0aW9ucy5vblRleHQgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0dGhpcy5vbi50ZXh0KCBvcHRpb25zLm9uVGV4dCApO1xyXG5cdFx0fVxyXG5cdFx0aWYgKCBvcHRpb25zLm9mZlRleHQgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0dGhpcy5vZmYudGV4dCggb3B0aW9ucy5vZmZUZXh0ICk7XHJcblx0XHR9XHJcblx0XHRpZiAoIG9wdGlvbnMuZGlzYWJsZWQgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0dGhpcy53aWRnZXQoKS50b2dnbGVDbGFzcyggXCJ1aS1zdGF0ZS1kaXNhYmxlZFwiLCBvcHRpb25zLmRpc2FibGVkICk7XHJcblx0XHR9XHJcblx0XHRpZiAoIG9wdGlvbnMubWluaSAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHR0aGlzLndpZGdldCgpLnRvZ2dsZUNsYXNzKCBcInVpLW1pbmlcIiwgb3B0aW9ucy5taW5pICk7XHJcblx0XHR9XHJcblx0XHRpZiAoIG9wdGlvbnMuY29ybmVycyAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHR0aGlzLndpZGdldCgpLnRvZ2dsZUNsYXNzKCBcInVpLWNvcm5lci1hbGxcIiwgb3B0aW9ucy5jb3JuZXJzICk7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5fc3VwZXIoIG9wdGlvbnMgKTtcclxuXHR9LFxyXG5cclxuXHRfZGVzdHJveTogZnVuY3Rpb24oKSB7XHJcblx0XHRpZiAoIHRoaXMub3B0aW9ucy5lbmhhbmNlZCApIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cdFx0aWYgKCB0aGlzLl9vcmlnaW5hbFRhYkluZGV4ICE9IG51bGwgKSB7XHJcblx0XHRcdHRoaXMuZWxlbWVudC5hdHRyKCBcInRhYmluZGV4XCIsIHRoaXMuX29yaWdpbmFsVGFiSW5kZXggKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHRoaXMuZWxlbWVudC5yZW1vdmVBdHRyKCBcInRhYmluZGV4XCIgKTtcclxuXHRcdH1cclxuXHRcdHRoaXMub24ucmVtb3ZlKCk7XHJcblx0XHR0aGlzLm9mZi5yZW1vdmUoKTtcclxuXHRcdHRoaXMuZWxlbWVudC51bndyYXAoKTtcclxuXHRcdHRoaXMuZmxpcHN3aXRjaC5yZW1vdmUoKTtcclxuXHRcdHRoaXMucmVtb3ZlQ2xhc3MoIFwidWktZmxpcHN3aXRjaC1pbnB1dFwiICk7XHJcblx0fVxyXG5cclxufSwgJC5tb2JpbGUuYmVoYXZpb3JzLmZvcm1SZXNldCApICk7XHJcblxyXG59KSggalF1ZXJ5ICk7XHJcblxyXG4oZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcclxuXHQkLndpZGdldCggXCJtb2JpbGUucmFuZ2VzbGlkZXJcIiwgJC5leHRlbmQoIHtcclxuXHJcblx0XHRvcHRpb25zOiB7XHJcblx0XHRcdHRoZW1lOiBudWxsLFxyXG5cdFx0XHR0cmFja1RoZW1lOiBudWxsLFxyXG5cdFx0XHRjb3JuZXJzOiB0cnVlLFxyXG5cdFx0XHRtaW5pOiBmYWxzZSxcclxuXHRcdFx0aGlnaGxpZ2h0OiB0cnVlXHJcblx0XHR9LFxyXG5cclxuXHRcdF9jcmVhdGU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR2YXIgJGVsID0gdGhpcy5lbGVtZW50LFxyXG5cdFx0XHRlbENsYXNzID0gdGhpcy5vcHRpb25zLm1pbmkgPyBcInVpLXJhbmdlc2xpZGVyIHVpLW1pbmlcIiA6IFwidWktcmFuZ2VzbGlkZXJcIixcclxuXHRcdFx0X2lucHV0Rmlyc3QgPSAkZWwuZmluZCggXCJpbnB1dFwiICkuZmlyc3QoKSxcclxuXHRcdFx0X2lucHV0TGFzdCA9ICRlbC5maW5kKCBcImlucHV0XCIgKS5sYXN0KCksXHJcblx0XHRcdF9sYWJlbCA9ICRlbC5maW5kKCBcImxhYmVsXCIgKS5maXJzdCgpLFxyXG5cdFx0XHRfc2xpZGVyV2lkZ2V0Rmlyc3QgPSAkLmRhdGEoIF9pbnB1dEZpcnN0LmdldCggMCApLCBcIm1vYmlsZS1zbGlkZXJcIiApIHx8XHJcblx0XHRcdFx0JC5kYXRhKCBfaW5wdXRGaXJzdC5zbGlkZXIoKS5nZXQoIDAgKSwgXCJtb2JpbGUtc2xpZGVyXCIgKSxcclxuXHRcdFx0X3NsaWRlcldpZGdldExhc3QgPSAkLmRhdGEoIF9pbnB1dExhc3QuZ2V0KDApLCBcIm1vYmlsZS1zbGlkZXJcIiApIHx8XHJcblx0XHRcdFx0JC5kYXRhKCBfaW5wdXRMYXN0LnNsaWRlcigpLmdldCggMCApLCBcIm1vYmlsZS1zbGlkZXJcIiApLFxyXG5cdFx0XHRfc2xpZGVyRmlyc3QgPSBfc2xpZGVyV2lkZ2V0Rmlyc3Quc2xpZGVyLFxyXG5cdFx0XHRfc2xpZGVyTGFzdCA9IF9zbGlkZXJXaWRnZXRMYXN0LnNsaWRlcixcclxuXHRcdFx0Zmlyc3RIYW5kbGUgPSBfc2xpZGVyV2lkZ2V0Rmlyc3QuaGFuZGxlLFxyXG5cdFx0XHRfc2xpZGVycyA9ICQoIFwiPGRpdiBjbGFzcz0ndWktcmFuZ2VzbGlkZXItc2xpZGVycycgLz5cIiApLmFwcGVuZFRvKCAkZWwgKTtcclxuXHJcblx0XHRcdF9pbnB1dEZpcnN0LmFkZENsYXNzKCBcInVpLXJhbmdlc2xpZGVyLWZpcnN0XCIgKTtcclxuXHRcdFx0X2lucHV0TGFzdC5hZGRDbGFzcyggXCJ1aS1yYW5nZXNsaWRlci1sYXN0XCIgKTtcclxuXHRcdFx0JGVsLmFkZENsYXNzKCBlbENsYXNzICk7XHJcblxyXG5cdFx0XHRfc2xpZGVyRmlyc3QuYXBwZW5kVG8oIF9zbGlkZXJzICk7XHJcblx0XHRcdF9zbGlkZXJMYXN0LmFwcGVuZFRvKCBfc2xpZGVycyApO1xyXG5cdFx0XHRfbGFiZWwuaW5zZXJ0QmVmb3JlKCAkZWwgKTtcclxuXHRcdFx0Zmlyc3RIYW5kbGUucHJlcGVuZFRvKCBfc2xpZGVyTGFzdCApO1xyXG5cclxuXHRcdFx0JC5leHRlbmQoIHRoaXMsIHtcclxuXHRcdFx0XHRfaW5wdXRGaXJzdDogX2lucHV0Rmlyc3QsXHJcblx0XHRcdFx0X2lucHV0TGFzdDogX2lucHV0TGFzdCxcclxuXHRcdFx0XHRfc2xpZGVyRmlyc3Q6IF9zbGlkZXJGaXJzdCxcclxuXHRcdFx0XHRfc2xpZGVyTGFzdDogX3NsaWRlckxhc3QsXHJcblx0XHRcdFx0X2xhYmVsOiBfbGFiZWwsXHJcblx0XHRcdFx0X3RhcmdldFZhbDogbnVsbCxcclxuXHRcdFx0XHRfc2xpZGVyVGFyZ2V0OiBmYWxzZSxcclxuXHRcdFx0XHRfc2xpZGVyczogX3NsaWRlcnMsXHJcblx0XHRcdFx0X3Byb3h5OiBmYWxzZVxyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdHRoaXMucmVmcmVzaCgpO1xyXG5cdFx0XHR0aGlzLl9vbiggdGhpcy5lbGVtZW50LmZpbmQoIFwiaW5wdXQudWktc2xpZGVyLWlucHV0XCIgKSwge1xyXG5cdFx0XHRcdFwic2xpZGViZWZvcmVzdGFydFwiOiBcIl9zbGlkZWJlZm9yZXN0YXJ0XCIsXHJcblx0XHRcdFx0XCJzbGlkZXN0b3BcIjogXCJfc2xpZGVzdG9wXCIsXHJcblx0XHRcdFx0XCJzbGlkZWRyYWdcIjogXCJfc2xpZGVkcmFnXCIsXHJcblx0XHRcdFx0XCJzbGlkZWJlZm9yZWNoYW5nZVwiOiBcIl9jaGFuZ2VcIixcclxuXHRcdFx0XHRcImJsdXJcIjogXCJfY2hhbmdlXCIsXHJcblx0XHRcdFx0XCJrZXl1cFwiOiBcIl9jaGFuZ2VcIlxyXG5cdFx0XHR9KTtcclxuXHRcdFx0dGhpcy5fb24oe1xyXG5cdFx0XHRcdFwibW91c2Vkb3duXCI6XCJfY2hhbmdlXCJcclxuXHRcdFx0fSk7XHJcblx0XHRcdHRoaXMuX29uKCB0aGlzLmVsZW1lbnQuY2xvc2VzdCggXCJmb3JtXCIgKSwge1xyXG5cdFx0XHRcdFwicmVzZXRcIjpcIl9oYW5kbGVSZXNldFwiXHJcblx0XHRcdH0pO1xyXG5cdFx0XHR0aGlzLl9vbiggZmlyc3RIYW5kbGUsIHtcclxuXHRcdFx0XHRcInZtb3VzZWRvd25cIjogXCJfZHJhZ0ZpcnN0SGFuZGxlXCJcclxuXHRcdFx0fSk7XHJcblx0XHR9LFxyXG5cdFx0X2hhbmRsZVJlc2V0OiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xyXG5cdFx0XHQvL3dlIG11c3Qgd2FpdCBmb3IgdGhlIHN0YWNrIHRvIHVud2luZCBiZWZvcmUgdXBkYXRlaW5nIG90aGVyIHdpc2Ugc2xpZGVycyB3aWxsIG5vdCBoYXZlIHVwZGF0ZWQgeWV0XHJcblx0XHRcdHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHNlbGYuX3VwZGF0ZUhpZ2hsaWdodCgpO1xyXG5cdFx0XHR9LDApO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfZHJhZ0ZpcnN0SGFuZGxlOiBmdW5jdGlvbiggZXZlbnQgKSB7XHJcblx0XHRcdC8vaWYgdGhlIGZpcnN0IGhhbmRsZSBpcyBkcmFnZ2VkIHNlbmQgdGhlIGV2ZW50IHRvIHRoZSBmaXJzdCBzbGlkZXJcclxuXHRcdFx0JC5kYXRhKCB0aGlzLl9pbnB1dEZpcnN0LmdldCgwKSwgXCJtb2JpbGUtc2xpZGVyXCIgKS5kcmFnZ2luZyA9IHRydWU7XHJcblx0XHRcdCQuZGF0YSggdGhpcy5faW5wdXRGaXJzdC5nZXQoMCksIFwibW9iaWxlLXNsaWRlclwiICkucmVmcmVzaCggZXZlbnQgKTtcclxuXHRcdFx0JC5kYXRhKCB0aGlzLl9pbnB1dEZpcnN0LmdldCgwKSwgXCJtb2JpbGUtc2xpZGVyXCIgKS5fdHJpZ2dlciggXCJzdGFydFwiICk7XHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdH0sXHJcblxyXG5cdFx0X3NsaWRlZHJhZzogZnVuY3Rpb24oIGV2ZW50ICkge1xyXG5cdFx0XHR2YXIgZmlyc3QgPSAkKCBldmVudC50YXJnZXQgKS5pcyggdGhpcy5faW5wdXRGaXJzdCApLFxyXG5cdFx0XHRcdG90aGVyU2xpZGVyID0gKCBmaXJzdCApID8gdGhpcy5faW5wdXRMYXN0IDogdGhpcy5faW5wdXRGaXJzdDtcclxuXHJcblx0XHRcdHRoaXMuX3NsaWRlclRhcmdldCA9IGZhbHNlO1xyXG5cdFx0XHQvL2lmIHRoZSBkcmFnIHdhcyBpbml0aWF0ZWQgb24gYW4gZXh0cmVtZSBhbmQgdGhlIG90aGVyIGhhbmRsZSBpcyBmb2N1c2VkIHNlbmQgdGhlIGV2ZW50cyB0b1xyXG5cdFx0XHQvL3RoZSBjbG9zZXN0IGhhbmRsZVxyXG5cdFx0XHRpZiAoICggdGhpcy5fcHJveHkgPT09IFwiZmlyc3RcIiAmJiBmaXJzdCApIHx8ICggdGhpcy5fcHJveHkgPT09IFwibGFzdFwiICYmICFmaXJzdCApICkge1xyXG5cdFx0XHRcdCQuZGF0YSggb3RoZXJTbGlkZXIuZ2V0KDApLCBcIm1vYmlsZS1zbGlkZXJcIiApLmRyYWdnaW5nID0gdHJ1ZTtcclxuXHRcdFx0XHQkLmRhdGEoIG90aGVyU2xpZGVyLmdldCgwKSwgXCJtb2JpbGUtc2xpZGVyXCIgKS5yZWZyZXNoKCBldmVudCApO1xyXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHJcblx0XHRfc2xpZGVzdG9wOiBmdW5jdGlvbiggZXZlbnQgKSB7XHJcblx0XHRcdHZhciBmaXJzdCA9ICQoIGV2ZW50LnRhcmdldCApLmlzKCB0aGlzLl9pbnB1dEZpcnN0ICk7XHJcblxyXG5cdFx0XHR0aGlzLl9wcm94eSA9IGZhbHNlO1xyXG5cdFx0XHQvL3RoaXMgc3RvcHMgZHJhZ2dpbmcgb2YgdGhlIGhhbmRsZSBhbmQgYnJpbmdzIHRoZSBhY3RpdmUgdHJhY2sgdG8gdGhlIGZyb250XHJcblx0XHRcdC8vdGhpcyBtYWtlcyBjbGlja3Mgb24gdGhlIHRyYWNrIGdvIHRoZSB0aGUgbGFzdCBoYW5kbGUgdXNlZFxyXG5cdFx0XHR0aGlzLmVsZW1lbnQuZmluZCggXCJpbnB1dFwiICkudHJpZ2dlciggXCJ2bW91c2V1cFwiICk7XHJcblx0XHRcdHRoaXMuX3NsaWRlckZpcnN0LmNzcyggXCJ6LWluZGV4XCIsIGZpcnN0ID8gMSA6IFwiXCIgKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0X3NsaWRlYmVmb3Jlc3RhcnQ6IGZ1bmN0aW9uKCBldmVudCApIHtcclxuXHRcdFx0dGhpcy5fc2xpZGVyVGFyZ2V0ID0gZmFsc2U7XHJcblx0XHRcdC8vaWYgdGhlIHRyYWNrIGlzIHRoZSB0YXJnZXQgcmVtZW1iZXIgdGhpcyBhbmQgdGhlIG9yaWdpbmFsIHZhbHVlXHJcblx0XHRcdGlmICggJCggZXZlbnQub3JpZ2luYWxFdmVudC50YXJnZXQgKS5oYXNDbGFzcyggXCJ1aS1zbGlkZXItdHJhY2tcIiApICkge1xyXG5cdFx0XHRcdHRoaXMuX3NsaWRlclRhcmdldCA9IHRydWU7XHJcblx0XHRcdFx0dGhpcy5fdGFyZ2V0VmFsID0gJCggZXZlbnQudGFyZ2V0ICkudmFsKCk7XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblxyXG5cdFx0X3NldE9wdGlvbnM6IGZ1bmN0aW9uKCBvcHRpb25zICkge1xyXG5cdFx0XHRpZiAoIG9wdGlvbnMudGhlbWUgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0XHR0aGlzLl9zZXRUaGVtZSggb3B0aW9ucy50aGVtZSApO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpZiAoIG9wdGlvbnMudHJhY2tUaGVtZSAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRcdHRoaXMuX3NldFRyYWNrVGhlbWUoIG9wdGlvbnMudHJhY2tUaGVtZSApO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpZiAoIG9wdGlvbnMubWluaSAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRcdHRoaXMuX3NldE1pbmkoIG9wdGlvbnMubWluaSApO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpZiAoIG9wdGlvbnMuaGlnaGxpZ2h0ICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdFx0dGhpcy5fc2V0SGlnaGxpZ2h0KCBvcHRpb25zLmhpZ2hsaWdodCApO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpZiAoIG9wdGlvbnMuZGlzYWJsZWQgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0XHR0aGlzLl9zZXREaXNhYmxlZCggb3B0aW9ucy5kaXNhYmxlZCApO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHR0aGlzLl9zdXBlciggb3B0aW9ucyApO1xyXG5cdFx0XHR0aGlzLnJlZnJlc2goKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0cmVmcmVzaDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHZhciAkZWwgPSB0aGlzLmVsZW1lbnQsXHJcblx0XHRcdFx0byA9IHRoaXMub3B0aW9ucztcclxuXHJcblx0XHRcdGlmICggdGhpcy5faW5wdXRGaXJzdC5pcyggXCI6ZGlzYWJsZWRcIiApIHx8IHRoaXMuX2lucHV0TGFzdC5pcyggXCI6ZGlzYWJsZWRcIiApICkge1xyXG5cdFx0XHRcdHRoaXMub3B0aW9ucy5kaXNhYmxlZCA9IHRydWU7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdCRlbC5maW5kKCBcImlucHV0XCIgKS5zbGlkZXIoe1xyXG5cdFx0XHRcdHRoZW1lOiBvLnRoZW1lLFxyXG5cdFx0XHRcdHRyYWNrVGhlbWU6IG8udHJhY2tUaGVtZSxcclxuXHRcdFx0XHRkaXNhYmxlZDogby5kaXNhYmxlZCxcclxuXHRcdFx0XHRjb3JuZXJzOiBvLmNvcm5lcnMsXHJcblx0XHRcdFx0bWluaTogby5taW5pLFxyXG5cdFx0XHRcdGhpZ2hsaWdodDogby5oaWdobGlnaHRcclxuXHRcdFx0fSkuc2xpZGVyKCBcInJlZnJlc2hcIiApO1xyXG5cdFx0XHR0aGlzLl91cGRhdGVIaWdobGlnaHQoKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0X2NoYW5nZTogZnVuY3Rpb24oIGV2ZW50ICkge1xyXG5cdFx0XHRpZiAoIGV2ZW50LnR5cGUgPT09IFwia2V5dXBcIiApIHtcclxuXHRcdFx0XHR0aGlzLl91cGRhdGVIaWdobGlnaHQoKTtcclxuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHZhciBzZWxmID0gdGhpcyxcclxuXHRcdFx0XHRtaW4gPSBwYXJzZUZsb2F0KCB0aGlzLl9pbnB1dEZpcnN0LnZhbCgpLCAxMCApLFxyXG5cdFx0XHRcdG1heCA9IHBhcnNlRmxvYXQoIHRoaXMuX2lucHV0TGFzdC52YWwoKSwgMTAgKSxcclxuXHRcdFx0XHRmaXJzdCA9ICQoIGV2ZW50LnRhcmdldCApLmhhc0NsYXNzKCBcInVpLXJhbmdlc2xpZGVyLWZpcnN0XCIgKSxcclxuXHRcdFx0XHR0aGlzU2xpZGVyID0gZmlyc3QgPyB0aGlzLl9pbnB1dEZpcnN0IDogdGhpcy5faW5wdXRMYXN0LFxyXG5cdFx0XHRcdG90aGVyU2xpZGVyID0gZmlyc3QgPyB0aGlzLl9pbnB1dExhc3QgOiB0aGlzLl9pbnB1dEZpcnN0O1xyXG5cclxuXHRcdFx0aWYgKCAoIHRoaXMuX2lucHV0Rmlyc3QudmFsKCkgPiB0aGlzLl9pbnB1dExhc3QudmFsKCkgJiYgZXZlbnQudHlwZSA9PT0gXCJtb3VzZWRvd25cIiAmJiAhJChldmVudC50YXJnZXQpLmhhc0NsYXNzKFwidWktc2xpZGVyLWhhbmRsZVwiKSkgKSB7XHJcblx0XHRcdFx0dGhpc1NsaWRlci5ibHVyKCk7XHJcblx0XHRcdH0gZWxzZSBpZiAoIGV2ZW50LnR5cGUgPT09IFwibW91c2Vkb3duXCIgKSB7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmICggbWluID4gbWF4ICYmICF0aGlzLl9zbGlkZXJUYXJnZXQgKSB7XHJcblx0XHRcdFx0Ly90aGlzIHByZXZlbnRzIG1pbiBmcm9tIGJlaW5nIGdyZWF0ZXIgdGhlbiBtYXhcclxuXHRcdFx0XHR0aGlzU2xpZGVyLnZhbCggZmlyc3QgPyBtYXg6IG1pbiApLnNsaWRlciggXCJyZWZyZXNoXCIgKTtcclxuXHRcdFx0XHR0aGlzLl90cmlnZ2VyKCBcIm5vcm1hbGl6ZVwiICk7XHJcblx0XHRcdH0gZWxzZSBpZiAoIG1pbiA+IG1heCApIHtcclxuXHRcdFx0XHQvL3RoaXMgbWFrZXMgaXQgc28gY2xpY2tzIG9uIHRoZSB0YXJnZXQgb24gZWl0aGVyIGV4dHJlbWUgZ28gdG8gdGhlIGNsb3Nlc3QgaGFuZGxlXHJcblx0XHRcdFx0dGhpc1NsaWRlci52YWwoIHRoaXMuX3RhcmdldFZhbCApLnNsaWRlciggXCJyZWZyZXNoXCIgKTtcclxuXHJcblx0XHRcdFx0Ly9Zb3UgbXVzdCB3YWl0IGZvciB0aGUgc3RhY2sgdG8gdW53aW5kIHNvIGZpcnN0IHNsaWRlciBpcyB1cGRhdGVkIGJlZm9yZSB1cGRhdGluZyBzZWNvbmRcclxuXHRcdFx0XHRzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdG90aGVyU2xpZGVyLnZhbCggZmlyc3QgPyBtaW46IG1heCApLnNsaWRlciggXCJyZWZyZXNoXCIgKTtcclxuXHRcdFx0XHRcdCQuZGF0YSggb3RoZXJTbGlkZXIuZ2V0KDApLCBcIm1vYmlsZS1zbGlkZXJcIiApLmhhbmRsZS5mb2N1cygpO1xyXG5cdFx0XHRcdFx0c2VsZi5fc2xpZGVyRmlyc3QuY3NzKCBcInotaW5kZXhcIiwgZmlyc3QgPyBcIlwiIDogMSApO1xyXG5cdFx0XHRcdFx0c2VsZi5fdHJpZ2dlciggXCJub3JtYWxpemVcIiApO1xyXG5cdFx0XHRcdH0sIDAgKTtcclxuXHRcdFx0XHR0aGlzLl9wcm94eSA9ICggZmlyc3QgKSA/IFwiZmlyc3RcIiA6IFwibGFzdFwiO1xyXG5cdFx0XHR9XHJcblx0XHRcdC8vZml4ZXMgaXNzdWUgd2hlcmUgd2hlbiBib3RoIF9zbGlkZXJzIGFyZSBhdCBtaW4gdGhleSBjYW5ub3QgYmUgYWRqdXN0ZWRcclxuXHRcdFx0aWYgKCBtaW4gPT09IG1heCApIHtcclxuXHRcdFx0XHQkLmRhdGEoIHRoaXNTbGlkZXIuZ2V0KDApLCBcIm1vYmlsZS1zbGlkZXJcIiApLmhhbmRsZS5jc3MoIFwiei1pbmRleFwiLCAxICk7XHJcblx0XHRcdFx0JC5kYXRhKCBvdGhlclNsaWRlci5nZXQoMCksIFwibW9iaWxlLXNsaWRlclwiICkuaGFuZGxlLmNzcyggXCJ6LWluZGV4XCIsIDAgKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHQkLmRhdGEoIG90aGVyU2xpZGVyLmdldCgwKSwgXCJtb2JpbGUtc2xpZGVyXCIgKS5oYW5kbGUuY3NzKCBcInotaW5kZXhcIiwgXCJcIiApO1xyXG5cdFx0XHRcdCQuZGF0YSggdGhpc1NsaWRlci5nZXQoMCksIFwibW9iaWxlLXNsaWRlclwiICkuaGFuZGxlLmNzcyggXCJ6LWluZGV4XCIsIFwiXCIgKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0dGhpcy5fdXBkYXRlSGlnaGxpZ2h0KCk7XHJcblxyXG5cdFx0XHRpZiAoIG1pbiA+PSBtYXggKSB7XHJcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cclxuXHRcdF91cGRhdGVIaWdobGlnaHQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR2YXIgbWluID0gcGFyc2VJbnQoICQuZGF0YSggdGhpcy5faW5wdXRGaXJzdC5nZXQoMCksIFwibW9iaWxlLXNsaWRlclwiICkuaGFuZGxlLmdldCgwKS5zdHlsZS5sZWZ0LCAxMCApLFxyXG5cdFx0XHRcdG1heCA9IHBhcnNlSW50KCAkLmRhdGEoIHRoaXMuX2lucHV0TGFzdC5nZXQoMCksIFwibW9iaWxlLXNsaWRlclwiICkuaGFuZGxlLmdldCgwKS5zdHlsZS5sZWZ0LCAxMCApLFxyXG5cdFx0XHRcdHdpZHRoID0gKG1heCAtIG1pbik7XHJcblxyXG5cdFx0XHR0aGlzLmVsZW1lbnQuZmluZCggXCIudWktc2xpZGVyLWJnXCIgKS5jc3Moe1xyXG5cdFx0XHRcdFwibWFyZ2luLWxlZnRcIjogbWluICsgXCIlXCIsXHJcblx0XHRcdFx0XCJ3aWR0aFwiOiB3aWR0aCArIFwiJVwiXHJcblx0XHRcdH0pO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfc2V0VGhlbWU6IGZ1bmN0aW9uKCB2YWx1ZSApIHtcclxuXHRcdFx0dGhpcy5faW5wdXRGaXJzdC5zbGlkZXIoIFwib3B0aW9uXCIsIFwidGhlbWVcIiwgdmFsdWUgKTtcclxuXHRcdFx0dGhpcy5faW5wdXRMYXN0LnNsaWRlciggXCJvcHRpb25cIiwgXCJ0aGVtZVwiLCB2YWx1ZSApO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfc2V0VHJhY2tUaGVtZTogZnVuY3Rpb24oIHZhbHVlICkge1xyXG5cdFx0XHR0aGlzLl9pbnB1dEZpcnN0LnNsaWRlciggXCJvcHRpb25cIiwgXCJ0cmFja1RoZW1lXCIsIHZhbHVlICk7XHJcblx0XHRcdHRoaXMuX2lucHV0TGFzdC5zbGlkZXIoIFwib3B0aW9uXCIsIFwidHJhY2tUaGVtZVwiLCB2YWx1ZSApO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfc2V0TWluaTogZnVuY3Rpb24oIHZhbHVlICkge1xyXG5cdFx0XHR0aGlzLl9pbnB1dEZpcnN0LnNsaWRlciggXCJvcHRpb25cIiwgXCJtaW5pXCIsIHZhbHVlICk7XHJcblx0XHRcdHRoaXMuX2lucHV0TGFzdC5zbGlkZXIoIFwib3B0aW9uXCIsIFwibWluaVwiLCB2YWx1ZSApO1xyXG5cdFx0XHR0aGlzLmVsZW1lbnQudG9nZ2xlQ2xhc3MoIFwidWktbWluaVwiLCAhIXZhbHVlICk7XHJcblx0XHR9LFxyXG5cclxuXHRcdF9zZXRIaWdobGlnaHQ6IGZ1bmN0aW9uKCB2YWx1ZSApIHtcclxuXHRcdFx0dGhpcy5faW5wdXRGaXJzdC5zbGlkZXIoIFwib3B0aW9uXCIsIFwiaGlnaGxpZ2h0XCIsIHZhbHVlICk7XHJcblx0XHRcdHRoaXMuX2lucHV0TGFzdC5zbGlkZXIoIFwib3B0aW9uXCIsIFwiaGlnaGxpZ2h0XCIsIHZhbHVlICk7XHJcblx0XHR9LFxyXG5cclxuXHRcdF9zZXREaXNhYmxlZDogZnVuY3Rpb24oIHZhbHVlICkge1xyXG5cdFx0XHR0aGlzLl9pbnB1dEZpcnN0LnByb3AoIFwiZGlzYWJsZWRcIiwgdmFsdWUgKTtcclxuXHRcdFx0dGhpcy5faW5wdXRMYXN0LnByb3AoIFwiZGlzYWJsZWRcIiwgdmFsdWUgKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0X2Rlc3Ryb3k6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR0aGlzLl9sYWJlbC5wcmVwZW5kVG8oIHRoaXMuZWxlbWVudCApO1xyXG5cdFx0XHR0aGlzLmVsZW1lbnQucmVtb3ZlQ2xhc3MoIFwidWktcmFuZ2VzbGlkZXIgdWktbWluaVwiICk7XHJcblx0XHRcdHRoaXMuX2lucHV0Rmlyc3QuYWZ0ZXIoIHRoaXMuX3NsaWRlckZpcnN0ICk7XHJcblx0XHRcdHRoaXMuX2lucHV0TGFzdC5hZnRlciggdGhpcy5fc2xpZGVyTGFzdCApO1xyXG5cdFx0XHR0aGlzLl9zbGlkZXJzLnJlbW92ZSgpO1xyXG5cdFx0XHR0aGlzLmVsZW1lbnQuZmluZCggXCJpbnB1dFwiICkucmVtb3ZlQ2xhc3MoIFwidWktcmFuZ2VzbGlkZXItZmlyc3QgdWktcmFuZ2VzbGlkZXItbGFzdFwiICkuc2xpZGVyKCBcImRlc3Ryb3lcIiApO1xyXG5cdFx0fVxyXG5cclxuXHR9LCAkLm1vYmlsZS5iZWhhdmlvcnMuZm9ybVJlc2V0ICkgKTtcclxuXHJcbn0pKCBqUXVlcnkgKTtcclxuXHJcbihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xyXG5cclxuXHQkLndpZGdldCggXCJtb2JpbGUudGV4dGlucHV0XCIsICQubW9iaWxlLnRleHRpbnB1dCwge1xyXG5cdFx0b3B0aW9uczoge1xyXG5cdFx0XHRjbGVhckJ0bjogZmFsc2UsXHJcblx0XHRcdGNsZWFyQnRuVGV4dDogXCJDbGVhciB0ZXh0XCJcclxuXHRcdH0sXHJcblxyXG5cdFx0X2NyZWF0ZTogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHRoaXMuX3N1cGVyKCk7XHJcblxyXG5cdFx0XHRpZiAoIHRoaXMuaXNTZWFyY2ggKSB7XHJcblx0XHRcdFx0dGhpcy5vcHRpb25zLmNsZWFyQnRuID0gdHJ1ZTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aWYgKCAhIXRoaXMub3B0aW9ucy5jbGVhckJ0biAmJiB0aGlzLmlucHV0TmVlZHNXcmFwICkge1xyXG5cdFx0XHRcdHRoaXMuX2FkZENsZWFyQnRuKCk7XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblxyXG5cdFx0Y2xlYXJCdXR0b246IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRyZXR1cm4gJCggXCI8YSBocmVmPScjJyB0YWJpbmRleD0nLTEnIGFyaWEtaGlkZGVuPSd0cnVlJyBcIiArXHJcblx0XHRcdFx0XCJjbGFzcz0ndWktaW5wdXQtY2xlYXIgdWktYnRuIHVpLWljb24tZGVsZXRlIHVpLWJ0bi1pY29uLW5vdGV4dCB1aS1jb3JuZXItYWxsJz5cIiArXHJcblx0XHRcdFx0XCI8L2E+XCIgKVxyXG5cdFx0XHRcdFx0LmF0dHIoIFwidGl0bGVcIiwgdGhpcy5vcHRpb25zLmNsZWFyQnRuVGV4dCApXHJcblx0XHRcdFx0XHQudGV4dCggdGhpcy5vcHRpb25zLmNsZWFyQnRuVGV4dCApO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfY2xlYXJCdG5DbGljazogZnVuY3Rpb24oIGV2ZW50ICkge1xyXG5cdFx0XHR0aGlzLmVsZW1lbnQudmFsKCBcIlwiIClcclxuXHRcdFx0XHRcdC5mb2N1cygpXHJcblx0XHRcdFx0XHQudHJpZ2dlciggXCJjaGFuZ2VcIiApO1xyXG5cclxuXHRcdFx0dGhpcy5fY2xlYXJCdG4uYWRkQ2xhc3MoIFwidWktaW5wdXQtY2xlYXItaGlkZGVuXCIgKTtcclxuXHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0X2FkZENsZWFyQnRuOiBmdW5jdGlvbigpIHtcclxuXHJcblx0XHRcdGlmICggIXRoaXMub3B0aW9ucy5lbmhhbmNlZCApIHtcclxuXHRcdFx0XHR0aGlzLl9lbmhhbmNlQ2xlYXIoKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0JC5leHRlbmQoIHRoaXMsIHtcclxuXHRcdFx0XHRfY2xlYXJCdG46IHRoaXMud2lkZ2V0KCkuZmluZChcImEudWktaW5wdXQtY2xlYXJcIilcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHR0aGlzLl9iaW5kQ2xlYXJFdmVudHMoKTtcclxuXHJcblx0XHRcdHRoaXMuX3RvZ2dsZUNsZWFyKCk7XHJcblxyXG5cdFx0fSxcclxuXHJcblx0XHRfZW5oYW5jZUNsZWFyOiBmdW5jdGlvbigpIHtcclxuXHJcblx0XHRcdHRoaXMuY2xlYXJCdXR0b24oKS5hcHBlbmRUbyggdGhpcy53aWRnZXQoKSApO1xyXG5cdFx0XHR0aGlzLndpZGdldCgpLmFkZENsYXNzKCBcInVpLWlucHV0LWhhcy1jbGVhclwiICk7XHJcblxyXG5cdFx0fSxcclxuXHJcblx0XHRfYmluZENsZWFyRXZlbnRzOiBmdW5jdGlvbigpIHtcclxuXHJcblx0XHRcdHRoaXMuX29uKCB0aGlzLl9jbGVhckJ0biwge1xyXG5cdFx0XHRcdFwiY2xpY2tcIjogXCJfY2xlYXJCdG5DbGlja1wiXHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0dGhpcy5fb24oe1xyXG5cdFx0XHRcdFwia2V5dXBcIjogXCJfdG9nZ2xlQ2xlYXJcIixcclxuXHRcdFx0XHRcImNoYW5nZVwiOiBcIl90b2dnbGVDbGVhclwiLFxyXG5cdFx0XHRcdFwiaW5wdXRcIjogXCJfdG9nZ2xlQ2xlYXJcIixcclxuXHRcdFx0XHRcImZvY3VzXCI6IFwiX3RvZ2dsZUNsZWFyXCIsXHJcblx0XHRcdFx0XCJibHVyXCI6IFwiX3RvZ2dsZUNsZWFyXCIsXHJcblx0XHRcdFx0XCJjdXRcIjogXCJfdG9nZ2xlQ2xlYXJcIixcclxuXHRcdFx0XHRcInBhc3RlXCI6IFwiX3RvZ2dsZUNsZWFyXCJcclxuXHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdH0sXHJcblxyXG5cdFx0X3VuYmluZENsZWFyOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dGhpcy5fb2ZmKCB0aGlzLl9jbGVhckJ0biwgXCJjbGlja1wiKTtcclxuXHRcdFx0dGhpcy5fb2ZmKCB0aGlzLmVsZW1lbnQsIFwia2V5dXAgY2hhbmdlIGlucHV0IGZvY3VzIGJsdXIgY3V0IHBhc3RlXCIgKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0X3NldE9wdGlvbnM6IGZ1bmN0aW9uKCBvcHRpb25zICkge1xyXG5cdFx0XHR0aGlzLl9zdXBlciggb3B0aW9ucyApO1xyXG5cclxuXHRcdFx0aWYgKCBvcHRpb25zLmNsZWFyQnRuICE9PSB1bmRlZmluZWQgJiZcclxuXHRcdFx0XHQhdGhpcy5lbGVtZW50LmlzKCBcInRleHRhcmVhLCA6anFtRGF0YSh0eXBlPSdyYW5nZScpXCIgKSApIHtcclxuXHRcdFx0XHRpZiAoIG9wdGlvbnMuY2xlYXJCdG4gKSB7XHJcblx0XHRcdFx0XHR0aGlzLl9hZGRDbGVhckJ0bigpO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHR0aGlzLl9kZXN0cm95Q2xlYXIoKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmICggb3B0aW9ucy5jbGVhckJ0blRleHQgIT09IHVuZGVmaW5lZCAmJiB0aGlzLl9jbGVhckJ0biAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRcdHRoaXMuX2NsZWFyQnRuLnRleHQoIG9wdGlvbnMuY2xlYXJCdG5UZXh0IClcclxuXHRcdFx0XHRcdC5hdHRyKFwidGl0bGVcIiwgb3B0aW9ucy5jbGVhckJ0blRleHQpO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cclxuXHRcdF90b2dnbGVDbGVhcjogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHRoaXMuX2RlbGF5KCBcIl90b2dnbGVDbGVhckNsYXNzXCIsIDAgKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0X3RvZ2dsZUNsZWFyQ2xhc3M6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR0aGlzLl9jbGVhckJ0bi50b2dnbGVDbGFzcyggXCJ1aS1pbnB1dC1jbGVhci1oaWRkZW5cIiwgIXRoaXMuZWxlbWVudC52YWwoKSApO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfZGVzdHJveUNsZWFyOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dGhpcy53aWRnZXQoKS5yZW1vdmVDbGFzcyggXCJ1aS1pbnB1dC1oYXMtY2xlYXJcIiApO1xyXG5cdFx0XHR0aGlzLl91bmJpbmRDbGVhcigpO1xyXG5cdFx0XHR0aGlzLl9jbGVhckJ0bi5yZW1vdmUoKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0X2Rlc3Ryb3k6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR0aGlzLl9zdXBlcigpO1xyXG5cdFx0XHRpZiAoIHRoaXMub3B0aW9ucy5jbGVhckJ0biApIHtcclxuXHRcdFx0XHR0aGlzLl9kZXN0cm95Q2xlYXIoKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHR9KTtcclxuXHJcbn0pKCBqUXVlcnkgKTtcclxuXHJcbihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xyXG5cclxuXHQkLndpZGdldCggXCJtb2JpbGUudGV4dGlucHV0XCIsICQubW9iaWxlLnRleHRpbnB1dCwge1xyXG5cdFx0b3B0aW9uczoge1xyXG5cdFx0XHRhdXRvZ3Jvdzp0cnVlLFxyXG5cdFx0XHRrZXl1cFRpbWVvdXRCdWZmZXI6IDEwMFxyXG5cdFx0fSxcclxuXHJcblx0XHRfY3JlYXRlOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dGhpcy5fc3VwZXIoKTtcclxuXHJcblx0XHRcdGlmICggdGhpcy5vcHRpb25zLmF1dG9ncm93ICYmIHRoaXMuaXNUZXh0YXJlYSApIHtcclxuXHRcdFx0XHR0aGlzLl9hdXRvZ3JvdygpO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cclxuXHRcdF9hdXRvZ3JvdzogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHRoaXMuZWxlbWVudC5hZGRDbGFzcyggXCJ1aS10ZXh0aW5wdXQtYXV0b2dyb3dcIiApO1xyXG5cclxuXHRcdFx0dGhpcy5fb24oe1xyXG5cdFx0XHRcdFwia2V5dXBcIjogXCJfdGltZW91dFwiLFxyXG5cdFx0XHRcdFwiY2hhbmdlXCI6IFwiX3RpbWVvdXRcIixcclxuXHRcdFx0XHRcImlucHV0XCI6IFwiX3RpbWVvdXRcIixcclxuXHRcdFx0XHRcInBhc3RlXCI6IFwiX3RpbWVvdXRcIlxyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdC8vIEF0dGFjaCB0byB0aGUgdmFyaW91cyB5b3UtaGF2ZS1iZWNvbWUtdmlzaWJsZSBub3RpZmljYXRpb25zIHRoYXQgdGhlXHJcblx0XHRcdC8vIHZhcmlvdXMgZnJhbWV3b3JrIGVsZW1lbnRzIGVtaXQuXHJcblx0XHRcdC8vIFRPRE86IFJlbW92ZSBhbGwgYnV0IHRoZSB1cGRhdGVsYXlvdXQgaGFuZGxlciBvbmNlICM2NDI2IGlzIGZpeGVkLlxyXG5cdFx0XHR0aGlzLl9vbiggdHJ1ZSwgdGhpcy5kb2N1bWVudCwge1xyXG5cclxuXHRcdFx0XHQvLyBUT0RPOiBNb3ZlIHRvIG5vbi1kZXByZWNhdGVkIGV2ZW50XHJcblx0XHRcdFx0XCJwYWdlc2hvd1wiOiBcIl9oYW5kbGVTaG93XCIsXHJcblx0XHRcdFx0XCJwb3B1cGJlZm9yZXBvc2l0aW9uXCI6IFwiX2hhbmRsZVNob3dcIixcclxuXHRcdFx0XHRcInVwZGF0ZWxheW91dFwiOiBcIl9oYW5kbGVTaG93XCIsXHJcblx0XHRcdFx0XCJwYW5lbG9wZW5cIjogXCJfaGFuZGxlU2hvd1wiXHJcblx0XHRcdH0pO1xyXG5cdFx0fSxcclxuXHJcblx0XHQvLyBTeW5jaHJvbm91c2x5IGZpeCB0aGUgd2lkZ2V0IGhlaWdodCBpZiB0aGlzIHdpZGdldCdzIHBhcmVudHMgYXJlIHN1Y2hcclxuXHRcdC8vIHRoYXQgdGhleSBzaG93L2hpZGUgY29udGVudCBhdCBydW50aW1lLiBXZSBzdGlsbCBuZWVkIHRvIGNoZWNrIHdoZXRoZXJcclxuXHRcdC8vIHRoZSB3aWRnZXQgaXMgYWN0dWFsbHkgdmlzaWJsZSBpbiBjYXNlIGl0IGlzIGNvbnRhaW5lZCBpbnNpZGUgbXVsdGlwbGVcclxuXHRcdC8vIHN1Y2ggY29udGFpbmVycy4gRm9yIGV4YW1wbGU6IHBhbmVsIGNvbnRhaW5zIGNvbGxhcHNpYmxlIGNvbnRhaW5zXHJcblx0XHQvLyBhdXRvZ3JvdyB0ZXh0aW5wdXQuIFRoZSBwYW5lbCBtYXkgZW1pdCBcInBhbmVsb3BlblwiIGluZGljYXRpbmcgdGhhdCBpdHNcclxuXHRcdC8vIGNvbnRlbnQgaGFzIGJlY29tZSB2aXNpYmxlLCBidXQgdGhlIGNvbGxhcHNpYmxlIGlzIHN0aWxsIGNvbGxhcHNlZCwgc29cclxuXHRcdC8vIHRoZSBhdXRvZ3JvdyB0ZXh0YXJlYSBpcyBzdGlsbCBub3QgdmlzaWJsZS5cclxuXHRcdF9oYW5kbGVTaG93OiBmdW5jdGlvbiggZXZlbnQgKSB7XHJcblx0XHRcdGlmICggJC5jb250YWlucyggZXZlbnQudGFyZ2V0LCB0aGlzLmVsZW1lbnRbIDAgXSApICYmXHJcblx0XHRcdFx0dGhpcy5lbGVtZW50LmlzKCBcIjp2aXNpYmxlXCIgKSApIHtcclxuXHJcblx0XHRcdFx0aWYgKCBldmVudC50eXBlICE9PSBcInBvcHVwYmVmb3JlcG9zaXRpb25cIiApIHtcclxuXHRcdFx0XHRcdHRoaXMuZWxlbWVudFxyXG5cdFx0XHRcdFx0XHQuYWRkQ2xhc3MoIFwidWktdGV4dGlucHV0LWF1dG9ncm93LXJlc2l6ZVwiIClcclxuXHRcdFx0XHRcdFx0LmFuaW1hdGlvbkNvbXBsZXRlKFxyXG5cdFx0XHRcdFx0XHRcdCQucHJveHkoIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5lbGVtZW50LnJlbW92ZUNsYXNzKCBcInVpLXRleHRpbnB1dC1hdXRvZ3Jvdy1yZXNpemVcIiApO1xyXG5cdFx0XHRcdFx0XHRcdH0sIHRoaXMgKSxcclxuXHRcdFx0XHRcdFx0XCJ0cmFuc2l0aW9uXCIgKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0dGhpcy5fcHJlcGFyZUhlaWdodFVwZGF0ZSgpO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cclxuXHRcdF91bmJpbmRBdXRvZ3JvdzogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHRoaXMuZWxlbWVudC5yZW1vdmVDbGFzcyggXCJ1aS10ZXh0aW5wdXQtYXV0b2dyb3dcIiApO1xyXG5cdFx0XHR0aGlzLl9vZmYoIHRoaXMuZWxlbWVudCwgXCJrZXl1cCBjaGFuZ2UgaW5wdXQgcGFzdGVcIiApO1xyXG5cdFx0XHR0aGlzLl9vZmYoIHRoaXMuZG9jdW1lbnQsXHJcblx0XHRcdFx0XCJwYWdlc2hvdyBwb3B1cGJlZm9yZXBvc2l0aW9uIHVwZGF0ZWxheW91dCBwYW5lbG9wZW5cIiApO1xyXG5cdFx0fSxcclxuXHJcblx0XHRrZXl1cFRpbWVvdXQ6IG51bGwsXHJcblxyXG5cdFx0X3ByZXBhcmVIZWlnaHRVcGRhdGU6IGZ1bmN0aW9uKCBkZWxheSApIHtcclxuXHRcdFx0aWYgKCB0aGlzLmtleXVwVGltZW91dCApIHtcclxuXHRcdFx0XHRjbGVhclRpbWVvdXQoIHRoaXMua2V5dXBUaW1lb3V0ICk7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKCBkZWxheSA9PT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRcdHRoaXMuX3VwZGF0ZUhlaWdodCgpO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdHRoaXMua2V5dXBUaW1lb3V0ID0gdGhpcy5fZGVsYXkoIFwiX3VwZGF0ZUhlaWdodFwiLCBkZWxheSApO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cclxuXHRcdF90aW1lb3V0OiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dGhpcy5fcHJlcGFyZUhlaWdodFVwZGF0ZSggdGhpcy5vcHRpb25zLmtleXVwVGltZW91dEJ1ZmZlciApO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfdXBkYXRlSGVpZ2h0OiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dmFyIHBhZGRpbmdUb3AsIHBhZGRpbmdCb3R0b20sIHBhZGRpbmdIZWlnaHQsIHNjcm9sbEhlaWdodCwgY2xpZW50SGVpZ2h0LFxyXG5cdFx0XHRcdGJvcmRlclRvcCwgYm9yZGVyQm90dG9tLCBib3JkZXJIZWlnaHQsIGhlaWdodCxcclxuXHRcdFx0XHRzY3JvbGxUb3AgPSB0aGlzLndpbmRvdy5zY3JvbGxUb3AoKTtcclxuXHRcdFx0dGhpcy5rZXl1cFRpbWVvdXQgPSAwO1xyXG5cclxuXHRcdFx0Ly8gSUU4IHRleHRhcmVhcyBoYXZlIHRoZSBvbnBhZ2UgcHJvcGVydHkgLSBvdGhlcnMgZG8gbm90XHJcblx0XHRcdGlmICggISggXCJvbnBhZ2VcIiBpbiB0aGlzLmVsZW1lbnRbIDAgXSApICkge1xyXG5cdFx0XHRcdHRoaXMuZWxlbWVudC5jc3Moe1xyXG5cdFx0XHRcdFx0XCJoZWlnaHRcIjogMCxcclxuXHRcdFx0XHRcdFwibWluLWhlaWdodFwiOiAwLFxyXG5cdFx0XHRcdFx0XCJtYXgtaGVpZ2h0XCI6IDBcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0c2Nyb2xsSGVpZ2h0ID0gdGhpcy5lbGVtZW50WyAwIF0uc2Nyb2xsSGVpZ2h0O1xyXG5cdFx0XHRjbGllbnRIZWlnaHQgPSB0aGlzLmVsZW1lbnRbIDAgXS5jbGllbnRIZWlnaHQ7XHJcblx0XHRcdGJvcmRlclRvcCA9IHBhcnNlRmxvYXQoIHRoaXMuZWxlbWVudC5jc3MoIFwiYm9yZGVyLXRvcC13aWR0aFwiICkgKTtcclxuXHRcdFx0Ym9yZGVyQm90dG9tID0gcGFyc2VGbG9hdCggdGhpcy5lbGVtZW50LmNzcyggXCJib3JkZXItYm90dG9tLXdpZHRoXCIgKSApO1xyXG5cdFx0XHRib3JkZXJIZWlnaHQgPSBib3JkZXJUb3AgKyBib3JkZXJCb3R0b207XHJcblx0XHRcdGhlaWdodCA9IHNjcm9sbEhlaWdodCArIGJvcmRlckhlaWdodCArIDE1O1xyXG5cclxuXHRcdFx0Ly8gSXNzdWUgNjE3OTogUGFkZGluZyBpcyBub3QgaW5jbHVkZWQgaW4gc2Nyb2xsSGVpZ2h0IGFuZFxyXG5cdFx0XHQvLyBjbGllbnRIZWlnaHQgYnkgRmlyZWZveCBpZiBubyBzY3JvbGxiYXIgaXMgdmlzaWJsZS4gQmVjYXVzZVxyXG5cdFx0XHQvLyB0ZXh0YXJlYXMgdXNlIHRoZSBib3JkZXItYm94IGJveC1zaXppbmcgbW9kZWwsIHBhZGRpbmcgc2hvdWxkIGJlXHJcblx0XHRcdC8vIGluY2x1ZGVkIGluIHRoZSBuZXcgKGFzc2lnbmVkKSBoZWlnaHQuIEJlY2F1c2UgdGhlIGhlaWdodCBpcyBzZXRcclxuXHRcdFx0Ly8gdG8gMCwgY2xpZW50SGVpZ2h0ID09IDAgaW4gRmlyZWZveC4gVGhlcmVmb3JlLCB3ZSBjYW4gdXNlIHRoaXMgdG9cclxuXHRcdFx0Ly8gY2hlY2sgaWYgcGFkZGluZyBtdXN0IGJlIGFkZGVkLlxyXG5cdFx0XHRpZiAoIGNsaWVudEhlaWdodCA9PT0gMCApIHtcclxuXHRcdFx0XHRwYWRkaW5nVG9wID0gcGFyc2VGbG9hdCggdGhpcy5lbGVtZW50LmNzcyggXCJwYWRkaW5nLXRvcFwiICkgKTtcclxuXHRcdFx0XHRwYWRkaW5nQm90dG9tID0gcGFyc2VGbG9hdCggdGhpcy5lbGVtZW50LmNzcyggXCJwYWRkaW5nLWJvdHRvbVwiICkgKTtcclxuXHRcdFx0XHRwYWRkaW5nSGVpZ2h0ID0gcGFkZGluZ1RvcCArIHBhZGRpbmdCb3R0b207XHJcblxyXG5cdFx0XHRcdGhlaWdodCArPSBwYWRkaW5nSGVpZ2h0O1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHR0aGlzLmVsZW1lbnQuY3NzKHtcclxuXHRcdFx0XHRcImhlaWdodFwiOiBoZWlnaHQsXHJcblx0XHRcdFx0XCJtaW4taGVpZ2h0XCI6IFwiXCIsXHJcblx0XHRcdFx0XCJtYXgtaGVpZ2h0XCI6IFwiXCJcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHR0aGlzLndpbmRvdy5zY3JvbGxUb3AoIHNjcm9sbFRvcCApO1xyXG5cdFx0fSxcclxuXHJcblx0XHRyZWZyZXNoOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0aWYgKCB0aGlzLm9wdGlvbnMuYXV0b2dyb3cgJiYgdGhpcy5pc1RleHRhcmVhICkge1xyXG5cdFx0XHRcdHRoaXMuX3VwZGF0ZUhlaWdodCgpO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cclxuXHRcdF9zZXRPcHRpb25zOiBmdW5jdGlvbiggb3B0aW9ucyApIHtcclxuXHJcblx0XHRcdHRoaXMuX3N1cGVyKCBvcHRpb25zICk7XHJcblxyXG5cdFx0XHRpZiAoIG9wdGlvbnMuYXV0b2dyb3cgIT09IHVuZGVmaW5lZCAmJiB0aGlzLmlzVGV4dGFyZWEgKSB7XHJcblx0XHRcdFx0aWYgKCBvcHRpb25zLmF1dG9ncm93ICkge1xyXG5cdFx0XHRcdFx0dGhpcy5fYXV0b2dyb3coKTtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0dGhpcy5fdW5iaW5kQXV0b2dyb3coKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0fSk7XHJcbn0pKCBqUXVlcnkgKTtcclxuXHJcbihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xyXG5cclxuJC53aWRnZXQoIFwibW9iaWxlLnNlbGVjdG1lbnVcIiwgJC5leHRlbmQoIHtcclxuXHRpbml0U2VsZWN0b3I6IFwic2VsZWN0Om5vdCggOmpxbURhdGEocm9sZT0nc2xpZGVyJykpOm5vdCggOmpxbURhdGEocm9sZT0nZmxpcHN3aXRjaCcpIClcIixcclxuXHJcblx0b3B0aW9uczoge1xyXG5cdFx0dGhlbWU6IG51bGwsXHJcblx0XHRpY29uOiBcImNhcmF0LWRcIixcclxuXHRcdGljb25wb3M6IFwicmlnaHRcIixcclxuXHRcdGlubGluZTogZmFsc2UsXHJcblx0XHRjb3JuZXJzOiB0cnVlLFxyXG5cdFx0c2hhZG93OiB0cnVlLFxyXG5cdFx0aWNvbnNoYWRvdzogZmFsc2UsIC8qIFRPRE86IERlcHJlY2F0ZWQgaW4gMS40LCByZW1vdmUgaW4gMS41LiAqL1xyXG5cdFx0b3ZlcmxheVRoZW1lOiBudWxsLFxyXG5cdFx0ZGl2aWRlclRoZW1lOiBudWxsLFxyXG5cdFx0aGlkZVBsYWNlaG9sZGVyTWVudUl0ZW1zOiB0cnVlLFxyXG5cdFx0Y2xvc2VUZXh0OiBcIkNsb3NlXCIsXHJcblx0XHRuYXRpdmVNZW51OiB0cnVlLFxyXG5cdFx0Ly8gVGhpcyBvcHRpb24gZGVmYXVsdHMgdG8gdHJ1ZSBvbiBpT1MgZGV2aWNlcy5cclxuXHRcdHByZXZlbnRGb2N1c1pvb206IC9pUGhvbmV8aVBhZHxpUG9kLy50ZXN0KCBuYXZpZ2F0b3IucGxhdGZvcm0gKSAmJiBuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoIFwiQXBwbGVXZWJLaXRcIiApID4gLTEsXHJcblx0XHRtaW5pOiBmYWxzZVxyXG5cdH0sXHJcblxyXG5cdF9idXR0b246IGZ1bmN0aW9uKCkge1xyXG5cdFx0cmV0dXJuICQoIFwiPGRpdi8+XCIgKTtcclxuXHR9LFxyXG5cclxuXHRfc2V0RGlzYWJsZWQ6IGZ1bmN0aW9uKCB2YWx1ZSApIHtcclxuXHRcdHRoaXMuZWxlbWVudC5hdHRyKCBcImRpc2FibGVkXCIsIHZhbHVlICk7XHJcblx0XHR0aGlzLmJ1dHRvbi5hdHRyKCBcImFyaWEtZGlzYWJsZWRcIiwgdmFsdWUgKTtcclxuXHRcdHJldHVybiB0aGlzLl9zZXRPcHRpb24oIFwiZGlzYWJsZWRcIiwgdmFsdWUgKTtcclxuXHR9LFxyXG5cclxuXHRfZm9jdXNCdXR0b24gOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBzZWxmID0gdGhpcztcclxuXHJcblx0XHRzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcclxuXHRcdFx0c2VsZi5idXR0b24uZm9jdXMoKTtcclxuXHRcdH0sIDQwKTtcclxuXHR9LFxyXG5cclxuXHRfc2VsZWN0T3B0aW9uczogZnVuY3Rpb24oKSB7XHJcblx0XHRyZXR1cm4gdGhpcy5zZWxlY3QuZmluZCggXCJvcHRpb25cIiApO1xyXG5cdH0sXHJcblxyXG5cdC8vIHNldHVwIGl0ZW1zIHRoYXQgYXJlIGdlbmVyYWxseSBuZWNlc3NhcnkgZm9yIHNlbGVjdCBtZW51IGV4dGVuc2lvblxyXG5cdF9wcmVFeHRlbnNpb246IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIGlubGluZSA9IHRoaXMub3B0aW9ucy5pbmxpbmUgfHwgdGhpcy5lbGVtZW50LmpxbURhdGEoIFwiaW5saW5lXCIgKSxcclxuXHRcdFx0bWluaSA9IHRoaXMub3B0aW9ucy5taW5pIHx8IHRoaXMuZWxlbWVudC5qcW1EYXRhKCBcIm1pbmlcIiApLFxyXG5cdFx0XHRjbGFzc2VzID0gXCJcIjtcclxuXHRcdC8vIFRPRE86IFBvc3QgMS4xLS1vbmNlIHdlIGhhdmUgdGltZSB0byB0ZXN0IHRob3JvdWdobHktLWFueSBjbGFzc2VzIG1hbnVhbGx5IGFwcGxpZWQgdG8gdGhlIG9yaWdpbmFsIGVsZW1lbnQgc2hvdWxkIGJlIGNhcnJpZWQgb3ZlciB0byB0aGUgZW5oYW5jZWQgZWxlbWVudCwgd2l0aCBhbiBgLWVuaGFuY2VkYCBzdWZmaXguIFNlZSBodHRwczovL2dpdGh1Yi5jb20vanF1ZXJ5L2pxdWVyeS1tb2JpbGUvaXNzdWVzLzM1NzdcclxuXHRcdC8qIGlmICggJGVsWzBdLmNsYXNzTmFtZS5sZW5ndGggKSB7XHJcblx0XHRcdGNsYXNzZXMgPSAkZWxbMF0uY2xhc3NOYW1lO1xyXG5cdFx0fSAqL1xyXG5cdFx0aWYgKCAhIX50aGlzLmVsZW1lbnRbMF0uY2xhc3NOYW1lLmluZGV4T2YoIFwidWktYnRuLWxlZnRcIiApICkge1xyXG5cdFx0XHRjbGFzc2VzID0gXCIgdWktYnRuLWxlZnRcIjtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoICAhIX50aGlzLmVsZW1lbnRbMF0uY2xhc3NOYW1lLmluZGV4T2YoIFwidWktYnRuLXJpZ2h0XCIgKSApIHtcclxuXHRcdFx0Y2xhc3NlcyA9IFwiIHVpLWJ0bi1yaWdodFwiO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggaW5saW5lICkge1xyXG5cdFx0XHRjbGFzc2VzICs9IFwiIHVpLWJ0bi1pbmxpbmVcIjtcclxuXHRcdH1cclxuXHRcdGlmICggbWluaSApIHtcclxuXHRcdFx0Y2xhc3NlcyArPSBcIiB1aS1taW5pXCI7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5zZWxlY3QgPSB0aGlzLmVsZW1lbnQucmVtb3ZlQ2xhc3MoIFwidWktYnRuLWxlZnQgdWktYnRuLXJpZ2h0XCIgKS53cmFwKCBcIjxkaXYgY2xhc3M9J3VpLXNlbGVjdFwiICsgY2xhc3NlcyArIFwiJz5cIiApO1xyXG5cdFx0dGhpcy5zZWxlY3RJZCAgPSB0aGlzLnNlbGVjdC5hdHRyKCBcImlkXCIgKSB8fCAoIFwic2VsZWN0LVwiICsgdGhpcy51dWlkICk7XHJcblx0XHR0aGlzLmJ1dHRvbklkID0gdGhpcy5zZWxlY3RJZCArIFwiLWJ1dHRvblwiO1xyXG5cdFx0dGhpcy5sYWJlbCA9ICQoIFwibGFiZWxbZm9yPSdcIisgdGhpcy5zZWxlY3RJZCArXCInXVwiICk7XHJcblx0XHR0aGlzLmlzTXVsdGlwbGUgPSB0aGlzLnNlbGVjdFsgMCBdLm11bHRpcGxlO1xyXG5cdH0sXHJcblxyXG5cdF9kZXN0cm95OiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciB3cmFwcGVyID0gdGhpcy5lbGVtZW50LnBhcmVudHMoIFwiLnVpLXNlbGVjdFwiICk7XHJcblx0XHRpZiAoIHdyYXBwZXIubGVuZ3RoID4gMCApIHtcclxuXHRcdFx0aWYgKCB3cmFwcGVyLmlzKCBcIi51aS1idG4tbGVmdCwgLnVpLWJ0bi1yaWdodFwiICkgKSB7XHJcblx0XHRcdFx0dGhpcy5lbGVtZW50LmFkZENsYXNzKCB3cmFwcGVyLmhhc0NsYXNzKCBcInVpLWJ0bi1sZWZ0XCIgKSA/IFwidWktYnRuLWxlZnRcIiA6IFwidWktYnRuLXJpZ2h0XCIgKTtcclxuXHRcdFx0fVxyXG5cdFx0XHR0aGlzLmVsZW1lbnQuaW5zZXJ0QWZ0ZXIoIHdyYXBwZXIgKTtcclxuXHRcdFx0d3JhcHBlci5yZW1vdmUoKTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfY3JlYXRlOiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuX3ByZUV4dGVuc2lvbigpO1xyXG5cclxuXHRcdHRoaXMuYnV0dG9uID0gdGhpcy5fYnV0dG9uKCk7XHJcblxyXG5cdFx0dmFyIHNlbGYgPSB0aGlzLFxyXG5cclxuXHRcdFx0b3B0aW9ucyA9IHRoaXMub3B0aW9ucyxcclxuXHJcblx0XHRcdGljb25wb3MgPSBvcHRpb25zLmljb24gPyAoIG9wdGlvbnMuaWNvbnBvcyB8fCB0aGlzLnNlbGVjdC5qcW1EYXRhKCBcImljb25wb3NcIiApICkgOiBmYWxzZSxcclxuXHJcblx0XHRcdGJ1dHRvbiA9IHRoaXMuYnV0dG9uXHJcblx0XHRcdFx0Lmluc2VydEJlZm9yZSggdGhpcy5zZWxlY3QgKVxyXG5cdFx0XHRcdC5hdHRyKCBcImlkXCIsIHRoaXMuYnV0dG9uSWQgKVxyXG5cdFx0XHRcdC5hZGRDbGFzcyggXCJ1aS1idG5cIiArXHJcblx0XHRcdFx0XHQoIG9wdGlvbnMuaWNvbiA/ICggXCIgdWktaWNvbi1cIiArIG9wdGlvbnMuaWNvbiArIFwiIHVpLWJ0bi1pY29uLVwiICsgaWNvbnBvcyArXHJcblx0XHRcdFx0XHQoIG9wdGlvbnMuaWNvbnNoYWRvdyA/IFwiIHVpLXNoYWRvdy1pY29uXCIgOiBcIlwiICkgKSA6XHRcIlwiICkgKyAvKiBUT0RPOiBSZW1vdmUgaW4gMS41LiAqL1xyXG5cdFx0XHRcdFx0KCBvcHRpb25zLnRoZW1lID8gXCIgdWktYnRuLVwiICsgb3B0aW9ucy50aGVtZSA6IFwiXCIgKSArXHJcblx0XHRcdFx0XHQoIG9wdGlvbnMuY29ybmVycyA/IFwiIHVpLWNvcm5lci1hbGxcIiA6IFwiXCIgKSArXHJcblx0XHRcdFx0XHQoIG9wdGlvbnMuc2hhZG93ID8gXCIgdWktc2hhZG93XCIgOiBcIlwiICkgKTtcclxuXHJcblx0XHR0aGlzLnNldEJ1dHRvblRleHQoKTtcclxuXHJcblx0XHQvLyBPcGVyYSBkb2VzIG5vdCBwcm9wZXJseSBzdXBwb3J0IG9wYWNpdHkgb24gc2VsZWN0IGVsZW1lbnRzXHJcblx0XHQvLyBJbiBNaW5pLCBpdCBoaWRlcyB0aGUgZWxlbWVudCwgYnV0IG5vdCBpdHMgdGV4dFxyXG5cdFx0Ly8gT24gdGhlIGRlc2t0b3AsaXQgc2VlbXMgdG8gZG8gdGhlIG9wcG9zaXRlXHJcblx0XHQvLyBmb3IgdGhlc2UgcmVhc29ucywgdXNpbmcgdGhlIG5hdGl2ZU1lbnUgb3B0aW9uIHJlc3VsdHMgaW4gYSBmdWxsIG5hdGl2ZSBzZWxlY3QgaW4gT3BlcmFcclxuXHRcdGlmICggb3B0aW9ucy5uYXRpdmVNZW51ICYmIHdpbmRvdy5vcGVyYSAmJiB3aW5kb3cub3BlcmEudmVyc2lvbiApIHtcclxuXHRcdFx0YnV0dG9uLmFkZENsYXNzKCBcInVpLXNlbGVjdC1uYXRpdmVvbmx5XCIgKTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBBZGQgY291bnRlciBmb3IgbXVsdGkgc2VsZWN0c1xyXG5cdFx0aWYgKCB0aGlzLmlzTXVsdGlwbGUgKSB7XHJcblx0XHRcdHRoaXMuYnV0dG9uQ291bnQgPSAkKCBcIjxzcGFuPlwiIClcclxuXHRcdFx0XHQuYWRkQ2xhc3MoIFwidWktbGktY291bnQgdWktYm9keS1pbmhlcml0XCIgKVxyXG5cdFx0XHRcdC5oaWRlKClcclxuXHRcdFx0XHQuYXBwZW5kVG8oIGJ1dHRvbi5hZGRDbGFzcyggXCJ1aS1saS1oYXMtY291bnRcIiApICk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gRGlzYWJsZSBpZiBzcGVjaWZpZWRcclxuXHRcdGlmICggb3B0aW9ucy5kaXNhYmxlZCB8fCB0aGlzLmVsZW1lbnQuYXR0ciggXCJkaXNhYmxlZFwiICkpIHtcclxuXHRcdFx0dGhpcy5kaXNhYmxlKCk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gRXZlbnRzIG9uIG5hdGl2ZSBzZWxlY3RcclxuXHRcdHRoaXMuc2VsZWN0LmNoYW5nZShmdW5jdGlvbigpIHtcclxuXHRcdFx0c2VsZi5yZWZyZXNoKCk7XHJcblxyXG5cdFx0XHRpZiAoICEhb3B0aW9ucy5uYXRpdmVNZW51ICkge1xyXG5cdFx0XHRcdHNlbGYuX2RlbGF5KCBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdHNlbGYuc2VsZWN0LmJsdXIoKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblxyXG5cdFx0dGhpcy5faGFuZGxlRm9ybVJlc2V0KCk7XHJcblxyXG5cdFx0dGhpcy5fb24oIHRoaXMuYnV0dG9uLCB7XHJcblx0XHRcdGtleWRvd246IFwiX2hhbmRsZUtleWRvd25cIlxyXG5cdFx0fSk7XHJcblxyXG5cdFx0dGhpcy5idWlsZCgpO1xyXG5cdH0sXHJcblxyXG5cdGJ1aWxkOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBzZWxmID0gdGhpcztcclxuXHJcblx0XHR0aGlzLnNlbGVjdFxyXG5cdFx0XHQuYXBwZW5kVG8oIHNlbGYuYnV0dG9uIClcclxuXHRcdFx0LmJpbmQoIFwidm1vdXNlZG93blwiLCBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHQvLyBBZGQgYWN0aXZlIGNsYXNzIHRvIGJ1dHRvblxyXG5cdFx0XHRcdHNlbGYuYnV0dG9uLmFkZENsYXNzKCAkLm1vYmlsZS5hY3RpdmVCdG5DbGFzcyApO1xyXG5cdFx0XHR9KVxyXG5cdFx0XHQuYmluZCggXCJmb2N1c1wiLCBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRzZWxmLmJ1dHRvbi5hZGRDbGFzcyggJC5tb2JpbGUuZm9jdXNDbGFzcyApO1xyXG5cdFx0XHR9KVxyXG5cdFx0XHQuYmluZCggXCJibHVyXCIsIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHNlbGYuYnV0dG9uLnJlbW92ZUNsYXNzKCAkLm1vYmlsZS5mb2N1c0NsYXNzICk7XHJcblx0XHRcdH0pXHJcblx0XHRcdC5iaW5kKCBcImZvY3VzIHZtb3VzZW92ZXJcIiwgZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0c2VsZi5idXR0b24udHJpZ2dlciggXCJ2bW91c2VvdmVyXCIgKTtcclxuXHRcdFx0fSlcclxuXHRcdFx0LmJpbmQoIFwidm1vdXNlbW92ZVwiLCBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHQvLyBSZW1vdmUgYWN0aXZlIGNsYXNzIG9uIHNjcm9sbC90b3VjaG1vdmVcclxuXHRcdFx0XHRzZWxmLmJ1dHRvbi5yZW1vdmVDbGFzcyggJC5tb2JpbGUuYWN0aXZlQnRuQ2xhc3MgKTtcclxuXHRcdFx0fSlcclxuXHRcdFx0LmJpbmQoIFwiY2hhbmdlIGJsdXIgdm1vdXNlb3V0XCIsIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHNlbGYuYnV0dG9uLnRyaWdnZXIoIFwidm1vdXNlb3V0XCIgKVxyXG5cdFx0XHRcdFx0LnJlbW92ZUNsYXNzKCAkLm1vYmlsZS5hY3RpdmVCdG5DbGFzcyApO1xyXG5cdFx0XHR9KTtcclxuXHJcblx0XHQvLyBJbiBtYW55IHNpdHVhdGlvbnMsIGlPUyB3aWxsIHpvb20gaW50byB0aGUgc2VsZWN0IHVwb24gdGFwLCB0aGlzIHByZXZlbnRzIHRoYXQgZnJvbSBoYXBwZW5pbmdcclxuXHRcdHNlbGYuYnV0dG9uLmJpbmQoIFwidm1vdXNlZG93blwiLCBmdW5jdGlvbigpIHtcclxuXHRcdFx0aWYgKCBzZWxmLm9wdGlvbnMucHJldmVudEZvY3VzWm9vbSApIHtcclxuXHRcdFx0XHRcdCQubW9iaWxlLnpvb20uZGlzYWJsZSggdHJ1ZSApO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHRcdHNlbGYubGFiZWwuYmluZCggXCJjbGljayBmb2N1c1wiLCBmdW5jdGlvbigpIHtcclxuXHRcdFx0aWYgKCBzZWxmLm9wdGlvbnMucHJldmVudEZvY3VzWm9vbSApIHtcclxuXHRcdFx0XHRcdCQubW9iaWxlLnpvb20uZGlzYWJsZSggdHJ1ZSApO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHRcdHNlbGYuc2VsZWN0LmJpbmQoIFwiZm9jdXNcIiwgZnVuY3Rpb24oKSB7XHJcblx0XHRcdGlmICggc2VsZi5vcHRpb25zLnByZXZlbnRGb2N1c1pvb20gKSB7XHJcblx0XHRcdFx0XHQkLm1vYmlsZS56b29tLmRpc2FibGUoIHRydWUgKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0XHRzZWxmLmJ1dHRvbi5iaW5kKCBcIm1vdXNldXBcIiwgZnVuY3Rpb24oKSB7XHJcblx0XHRcdGlmICggc2VsZi5vcHRpb25zLnByZXZlbnRGb2N1c1pvb20gKSB7XHJcblx0XHRcdFx0c2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdCQubW9iaWxlLnpvb20uZW5hYmxlKCB0cnVlICk7XHJcblx0XHRcdFx0fSwgMCApO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHRcdHNlbGYuc2VsZWN0LmJpbmQoIFwiYmx1clwiLCBmdW5jdGlvbigpIHtcclxuXHRcdFx0aWYgKCBzZWxmLm9wdGlvbnMucHJldmVudEZvY3VzWm9vbSApIHtcclxuXHRcdFx0XHQkLm1vYmlsZS56b29tLmVuYWJsZSggdHJ1ZSApO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHJcblx0fSxcclxuXHJcblx0c2VsZWN0ZWQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0cmV0dXJuIHRoaXMuX3NlbGVjdE9wdGlvbnMoKS5maWx0ZXIoIFwiOnNlbGVjdGVkXCIgKTtcclxuXHR9LFxyXG5cclxuXHRzZWxlY3RlZEluZGljZXM6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIHNlbGYgPSB0aGlzO1xyXG5cclxuXHRcdHJldHVybiB0aGlzLnNlbGVjdGVkKCkubWFwKGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRyZXR1cm4gc2VsZi5fc2VsZWN0T3B0aW9ucygpLmluZGV4KCB0aGlzICk7XHJcblx0XHR9KS5nZXQoKTtcclxuXHR9LFxyXG5cclxuXHRzZXRCdXR0b25UZXh0OiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBzZWxmID0gdGhpcyxcclxuXHRcdFx0c2VsZWN0ZWQgPSB0aGlzLnNlbGVjdGVkKCksXHJcblx0XHRcdHRleHQgPSB0aGlzLnBsYWNlaG9sZGVyLFxyXG5cdFx0XHRzcGFuID0gJCggZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJzcGFuXCIgKSApO1xyXG5cclxuXHRcdHRoaXMuYnV0dG9uLmNoaWxkcmVuKCBcInNwYW5cIiApLm5vdCggXCIudWktbGktY291bnRcIiApLnJlbW92ZSgpLmVuZCgpLmVuZCgpLnByZXBlbmQoIChmdW5jdGlvbigpIHtcclxuXHRcdFx0aWYgKCBzZWxlY3RlZC5sZW5ndGggKSB7XHJcblx0XHRcdFx0dGV4dCA9IHNlbGVjdGVkLm1hcChmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdHJldHVybiAkKCB0aGlzICkudGV4dCgpO1xyXG5cdFx0XHRcdH0pLmdldCgpLmpvaW4oIFwiLCBcIiApO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdHRleHQgPSBzZWxmLnBsYWNlaG9sZGVyO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpZiAoIHRleHQgKSB7XHJcblx0XHRcdFx0c3Bhbi50ZXh0KCB0ZXh0ICk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblxyXG5cdFx0XHRcdC8vIFNldCB0aGUgY29udGVudHMgdG8gJm5ic3A7IHdoaWNoIHdlIHdyaXRlIGFzICYjMTYwOyB0byBiZSBYSFRNTCBjb21wbGlhbnQgLSBzZWUgZ2gtNjY5OVxyXG5cdFx0XHRcdHNwYW4uaHRtbCggXCImIzE2MDtcIiApO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBUT0RPIHBvc3NpYmx5IGFnZ3JlZ2F0ZSBtdWx0aXBsZSBzZWxlY3Qgb3B0aW9uIGNsYXNzZXNcclxuXHRcdFx0cmV0dXJuIHNwYW5cclxuXHRcdFx0XHQuYWRkQ2xhc3MoIHNlbGYuc2VsZWN0LmF0dHIoIFwiY2xhc3NcIiApIClcclxuXHRcdFx0XHQuYWRkQ2xhc3MoIHNlbGVjdGVkLmF0dHIoIFwiY2xhc3NcIiApIClcclxuXHRcdFx0XHQucmVtb3ZlQ2xhc3MoIFwidWktc2NyZWVuLWhpZGRlblwiICk7XHJcblx0XHR9KSgpKTtcclxuXHR9LFxyXG5cclxuXHRzZXRCdXR0b25Db3VudDogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgc2VsZWN0ZWQgPSB0aGlzLnNlbGVjdGVkKCk7XHJcblxyXG5cdFx0Ly8gbXVsdGlwbGUgY291bnQgaW5zaWRlIGJ1dHRvblxyXG5cdFx0aWYgKCB0aGlzLmlzTXVsdGlwbGUgKSB7XHJcblx0XHRcdHRoaXMuYnV0dG9uQ291bnRbIHNlbGVjdGVkLmxlbmd0aCA+IDEgPyBcInNob3dcIiA6IFwiaGlkZVwiIF0oKS50ZXh0KCBzZWxlY3RlZC5sZW5ndGggKTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfaGFuZGxlS2V5ZG93bjogZnVuY3Rpb24oIC8qIGV2ZW50ICovICkge1xyXG5cdFx0dGhpcy5fZGVsYXkoIFwiX3JlZnJlc2hCdXR0b25cIiApO1xyXG5cdH0sXHJcblxyXG5cdF9yZXNldDogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLnJlZnJlc2goKTtcclxuXHR9LFxyXG5cclxuXHRfcmVmcmVzaEJ1dHRvbjogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLnNldEJ1dHRvblRleHQoKTtcclxuXHRcdHRoaXMuc2V0QnV0dG9uQ291bnQoKTtcclxuXHR9LFxyXG5cclxuXHRyZWZyZXNoOiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuX3JlZnJlc2hCdXR0b24oKTtcclxuXHR9LFxyXG5cclxuXHQvLyBvcGVuIGFuZCBjbG9zZSBwcmVzZXJ2ZWQgaW4gbmF0aXZlIHNlbGVjdHNcclxuXHQvLyB0byBzaW1wbGlmeSB1c2VycyBjb2RlIHdoZW4gbG9vcGluZyBvdmVyIHNlbGVjdHNcclxuXHRvcGVuOiAkLm5vb3AsXHJcblx0Y2xvc2U6ICQubm9vcCxcclxuXHJcblx0ZGlzYWJsZTogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLl9zZXREaXNhYmxlZCggdHJ1ZSApO1xyXG5cdFx0dGhpcy5idXR0b24uYWRkQ2xhc3MoIFwidWktc3RhdGUtZGlzYWJsZWRcIiApO1xyXG5cdH0sXHJcblxyXG5cdGVuYWJsZTogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLl9zZXREaXNhYmxlZCggZmFsc2UgKTtcclxuXHRcdHRoaXMuYnV0dG9uLnJlbW92ZUNsYXNzKCBcInVpLXN0YXRlLWRpc2FibGVkXCIgKTtcclxuXHR9XHJcbn0sICQubW9iaWxlLmJlaGF2aW9ycy5mb3JtUmVzZXQgKSApO1xyXG5cclxufSkoIGpRdWVyeSApO1xyXG5cclxuKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7XHJcblxyXG4kLm1vYmlsZS5saW5rcyA9IGZ1bmN0aW9uKCB0YXJnZXQgKSB7XHJcblxyXG5cdC8vbGlua3Mgd2l0aGluIGNvbnRlbnQgYXJlYXMsIHRlc3RzIGluY2x1ZGVkIHdpdGggcGFnZVxyXG5cdCQoIHRhcmdldCApXHJcblx0XHQuZmluZCggXCJhXCIgKVxyXG5cdFx0LmpxbUVuaGFuY2VhYmxlKClcclxuXHRcdC5maWx0ZXIoIFwiOmpxbURhdGEocmVsPSdwb3B1cCcpW2hyZWZdW2hyZWYhPScnXVwiIClcclxuXHRcdC5lYWNoKCBmdW5jdGlvbigpIHtcclxuXHRcdFx0Ly8gQWNjZXNzaWJpbGl0eSBpbmZvIGZvciBwb3B1cHNcclxuXHRcdFx0dmFyIGVsZW1lbnQgPSB0aGlzLFxyXG5cdFx0XHRcdGlkcmVmID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoIFwiaHJlZlwiICkuc3Vic3RyaW5nKCAxICk7XHJcblxyXG5cdFx0XHRpZiAoIGlkcmVmICkge1xyXG5cdFx0XHRcdGVsZW1lbnQuc2V0QXR0cmlidXRlKCBcImFyaWEtaGFzcG9wdXBcIiwgdHJ1ZSApO1xyXG5cdFx0XHRcdGVsZW1lbnQuc2V0QXR0cmlidXRlKCBcImFyaWEtb3duc1wiLCBpZHJlZiApO1xyXG5cdFx0XHRcdGVsZW1lbnQuc2V0QXR0cmlidXRlKCBcImFyaWEtZXhwYW5kZWRcIiwgZmFsc2UgKTtcclxuXHRcdFx0fVxyXG5cdFx0fSlcclxuXHRcdC5lbmQoKVxyXG5cdFx0Lm5vdCggXCIudWktYnRuLCA6anFtRGF0YShyb2xlPSdub25lJyksIDpqcW1EYXRhKHJvbGU9J25vanMnKVwiIClcclxuXHRcdC5hZGRDbGFzcyggXCJ1aS1saW5rXCIgKTtcclxuXHJcbn07XHJcblxyXG59KSggalF1ZXJ5ICk7XHJcblxyXG5cclxuKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7XHJcblxyXG5mdW5jdGlvbiBmaXRTZWdtZW50SW5zaWRlU2VnbWVudCggd2luZG93U2l6ZSwgc2VnbWVudFNpemUsIG9mZnNldCwgZGVzaXJlZCApIHtcclxuXHR2YXIgcmV0dXJuVmFsdWUgPSBkZXNpcmVkO1xyXG5cclxuXHRpZiAoIHdpbmRvd1NpemUgPCBzZWdtZW50U2l6ZSApIHtcclxuXHRcdC8vIENlbnRlciBzZWdtZW50IGlmIGl0J3MgYmlnZ2VyIHRoYW4gdGhlIHdpbmRvd1xyXG5cdFx0cmV0dXJuVmFsdWUgPSBvZmZzZXQgKyAoIHdpbmRvd1NpemUgLSBzZWdtZW50U2l6ZSApIC8gMjtcclxuXHR9IGVsc2Uge1xyXG5cdFx0Ly8gT3RoZXJ3aXNlIGNlbnRlciBpdCBhdCB0aGUgZGVzaXJlZCBjb29yZGluYXRlIHdoaWxlIGtlZXBpbmcgaXQgY29tcGxldGVseSBpbnNpZGUgdGhlIHdpbmRvd1xyXG5cdFx0cmV0dXJuVmFsdWUgPSBNYXRoLm1pbiggTWF0aC5tYXgoIG9mZnNldCwgZGVzaXJlZCAtIHNlZ21lbnRTaXplIC8gMiApLCBvZmZzZXQgKyB3aW5kb3dTaXplIC0gc2VnbWVudFNpemUgKTtcclxuXHR9XHJcblxyXG5cdHJldHVybiByZXR1cm5WYWx1ZTtcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0V2luZG93Q29vcmRpbmF0ZXMoIHRoZVdpbmRvdyApIHtcclxuXHRyZXR1cm4ge1xyXG5cdFx0eDogdGhlV2luZG93LnNjcm9sbExlZnQoKSxcclxuXHRcdHk6IHRoZVdpbmRvdy5zY3JvbGxUb3AoKSxcclxuXHRcdGN4OiAoIHRoZVdpbmRvd1sgMCBdLmlubmVyV2lkdGggfHwgdGhlV2luZG93LndpZHRoKCkgKSxcclxuXHRcdGN5OiAoIHRoZVdpbmRvd1sgMCBdLmlubmVySGVpZ2h0IHx8IHRoZVdpbmRvdy5oZWlnaHQoKSApXHJcblx0fTtcclxufVxyXG5cclxuJC53aWRnZXQoIFwibW9iaWxlLnBvcHVwXCIsIHtcclxuXHRvcHRpb25zOiB7XHJcblx0XHR3cmFwcGVyQ2xhc3M6IG51bGwsXHJcblx0XHR0aGVtZTogbnVsbCxcclxuXHRcdG92ZXJsYXlUaGVtZTogbnVsbCxcclxuXHRcdHNoYWRvdzogdHJ1ZSxcclxuXHRcdGNvcm5lcnM6IHRydWUsXHJcblx0XHR0cmFuc2l0aW9uOiBcIm5vbmVcIixcclxuXHRcdHBvc2l0aW9uVG86IFwib3JpZ2luXCIsXHJcblx0XHR0b2xlcmFuY2U6IG51bGwsXHJcblx0XHRjbG9zZUxpbmtTZWxlY3RvcjogXCJhOmpxbURhdGEocmVsPSdiYWNrJylcIixcclxuXHRcdGNsb3NlTGlua0V2ZW50czogXCJjbGljay5wb3B1cFwiLFxyXG5cdFx0bmF2aWdhdGVFdmVudHM6IFwibmF2aWdhdGUucG9wdXBcIixcclxuXHRcdGNsb3NlRXZlbnRzOiBcIm5hdmlnYXRlLnBvcHVwIHBhZ2ViZWZvcmVjaGFuZ2UucG9wdXBcIixcclxuXHRcdGRpc21pc3NpYmxlOiB0cnVlLFxyXG5cdFx0ZW5oYW5jZWQ6IGZhbHNlLFxyXG5cclxuXHRcdC8vIE5PVEUgV2luZG93cyBQaG9uZSA3IGhhcyBhIHNjcm9sbCBwb3NpdGlvbiBjYWNoaW5nIGlzc3VlIHRoYXRcclxuXHRcdC8vICAgICAgcmVxdWlyZXMgdXMgdG8gZGlzYWJsZSBwb3B1cCBoaXN0b3J5IG1hbmFnZW1lbnQgYnkgZGVmYXVsdFxyXG5cdFx0Ly8gICAgICBodHRwczovL2dpdGh1Yi5jb20vanF1ZXJ5L2pxdWVyeS1tb2JpbGUvaXNzdWVzLzQ3ODRcclxuXHRcdC8vXHJcblx0XHQvLyBOT1RFIHRoaXMgb3B0aW9uIGlzIG1vZGlmaWVkIGluIF9jcmVhdGUhXHJcblx0XHRoaXN0b3J5OiAhJC5tb2JpbGUuYnJvd3Nlci5vbGRJRVxyXG5cdH0sXHJcblxyXG5cdC8vIFdoZW4gdGhlIHVzZXIgZGVwcmVzc2VzIHRoZSBtb3VzZS9maW5nZXIgb24gYW4gZWxlbWVudCBpbnNpZGUgdGhlIHBvcHVwIHdoaWxlIHRoZSBwb3B1cCBpc1xyXG5cdC8vIG9wZW4sIHdlIGlnbm9yZSByZXNpemUgZXZlbnRzIGZvciBhIHNob3J0IHdoaWxlLiBUaGlzIHByZXZlbnRzICM2OTYxLlxyXG5cdF9oYW5kbGVEb2N1bWVudFZtb3VzZWRvd246IGZ1bmN0aW9uKCB0aGVFdmVudCApIHtcclxuXHRcdGlmICggdGhpcy5faXNPcGVuICYmICQuY29udGFpbnMoIHRoaXMuX3VpLmNvbnRhaW5lclsgMCBdLCB0aGVFdmVudC50YXJnZXQgKSApIHtcclxuXHRcdFx0dGhpcy5faWdub3JlUmVzaXplRXZlbnRzKCk7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X2NyZWF0ZTogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgdGhlRWxlbWVudCA9IHRoaXMuZWxlbWVudCxcclxuXHRcdFx0bXlJZCA9IHRoZUVsZW1lbnQuYXR0ciggXCJpZFwiICksXHJcblx0XHRcdGN1cnJlbnRPcHRpb25zID0gdGhpcy5vcHRpb25zO1xyXG5cclxuXHRcdC8vIFdlIG5lZWQgdG8gYWRqdXN0IHRoZSBoaXN0b3J5IG9wdGlvbiB0byBiZSBmYWxzZSBpZiB0aGVyZSdzIG5vIEFKQVggbmF2LlxyXG5cdFx0Ly8gV2UgY2FuJ3QgZG8gaXQgaW4gdGhlIG9wdGlvbiBkZWNsYXJhdGlvbnMgYmVjYXVzZSB0aG9zZSBhcmUgcnVuIGJlZm9yZVxyXG5cdFx0Ly8gaXQgaXMgZGV0ZXJtaW5lZCB3aGV0aGVyIHRoZXJlIHNoYWxsIGJlIEFKQVggbmF2LlxyXG5cdFx0Y3VycmVudE9wdGlvbnMuaGlzdG9yeSA9IGN1cnJlbnRPcHRpb25zLmhpc3RvcnkgJiYgJC5tb2JpbGUuYWpheEVuYWJsZWQgJiYgJC5tb2JpbGUuaGFzaExpc3RlbmluZ0VuYWJsZWQ7XHJcblxyXG5cdFx0dGhpcy5fb24oIHRoaXMuZG9jdW1lbnQsIHtcclxuXHRcdFx0XCJ2bW91c2Vkb3duXCI6IFwiX2hhbmRsZURvY3VtZW50Vm1vdXNlZG93blwiXHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBEZWZpbmUgaW5zdGFuY2UgdmFyaWFibGVzXHJcblx0XHQkLmV4dGVuZCggdGhpcywge1xyXG5cdFx0XHRfc2Nyb2xsVG9wOiAwLFxyXG5cdFx0XHRfcGFnZTogdGhlRWxlbWVudC5jbG9zZXN0KCBcIi51aS1wYWdlXCIgKSxcclxuXHRcdFx0X3VpOiBudWxsLFxyXG5cdFx0XHRfZmFsbGJhY2tUcmFuc2l0aW9uOiBcIlwiLFxyXG5cdFx0XHRfY3VycmVudFRyYW5zaXRpb246IGZhbHNlLFxyXG5cdFx0XHRfcHJlcmVxdWlzaXRlczogbnVsbCxcclxuXHRcdFx0X2lzT3BlbjogZmFsc2UsXHJcblx0XHRcdF90b2xlcmFuY2U6IG51bGwsXHJcblx0XHRcdF9yZXNpemVEYXRhOiBudWxsLFxyXG5cdFx0XHRfaWdub3JlUmVzaXplVG86IDAsXHJcblx0XHRcdF9vcmllbnRhdGlvbmNoYW5nZUluUHJvZ3Jlc3M6IGZhbHNlXHJcblx0XHR9KTtcclxuXHJcblx0XHRpZiAoIHRoaXMuX3BhZ2UubGVuZ3RoID09PSAwICkge1xyXG5cdFx0XHR0aGlzLl9wYWdlID0gJCggXCJib2R5XCIgKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIGN1cnJlbnRPcHRpb25zLmVuaGFuY2VkICkge1xyXG5cdFx0XHR0aGlzLl91aSA9IHtcclxuXHRcdFx0XHRjb250YWluZXI6IHRoZUVsZW1lbnQucGFyZW50KCksXHJcblx0XHRcdFx0c2NyZWVuOiB0aGVFbGVtZW50LnBhcmVudCgpLnByZXYoKSxcclxuXHRcdFx0XHRwbGFjZWhvbGRlcjogJCggdGhpcy5kb2N1bWVudFsgMCBdLmdldEVsZW1lbnRCeUlkKCBteUlkICsgXCItcGxhY2Vob2xkZXJcIiApIClcclxuXHRcdFx0fTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHRoaXMuX3VpID0gdGhpcy5fZW5oYW5jZSggdGhlRWxlbWVudCwgbXlJZCApO1xyXG5cdFx0XHR0aGlzLl9hcHBseVRyYW5zaXRpb24oIGN1cnJlbnRPcHRpb25zLnRyYW5zaXRpb24gKTtcclxuXHRcdH1cclxuXHRcdHRoaXNcclxuXHRcdFx0Ll9zZXRUb2xlcmFuY2UoIGN1cnJlbnRPcHRpb25zLnRvbGVyYW5jZSApXHJcblx0XHRcdC5fdWkuZm9jdXNFbGVtZW50ID0gdGhpcy5fdWkuY29udGFpbmVyO1xyXG5cclxuXHRcdC8vIEV2ZW50IGhhbmRsZXJzXHJcblx0XHR0aGlzLl9vbiggdGhpcy5fdWkuc2NyZWVuLCB7IFwidmNsaWNrXCI6IFwiX2VhdEV2ZW50QW5kQ2xvc2VcIiB9ICk7XHJcblx0XHR0aGlzLl9vbiggdGhpcy53aW5kb3csIHtcclxuXHRcdFx0b3JpZW50YXRpb25jaGFuZ2U6ICQucHJveHkoIHRoaXMsIFwiX2hhbmRsZVdpbmRvd09yaWVudGF0aW9uY2hhbmdlXCIgKSxcclxuXHRcdFx0cmVzaXplOiAkLnByb3h5KCB0aGlzLCBcIl9oYW5kbGVXaW5kb3dSZXNpemVcIiApLFxyXG5cdFx0XHRrZXl1cDogJC5wcm94eSggdGhpcywgXCJfaGFuZGxlV2luZG93S2V5VXBcIiApXHJcblx0XHR9KTtcclxuXHRcdHRoaXMuX29uKCB0aGlzLmRvY3VtZW50LCB7IFwiZm9jdXNpblwiOiBcIl9oYW5kbGVEb2N1bWVudEZvY3VzSW5cIiB9ICk7XHJcblx0fSxcclxuXHJcblx0X2VuaGFuY2U6IGZ1bmN0aW9uKCB0aGVFbGVtZW50LCBteUlkICkge1xyXG5cdFx0dmFyIGN1cnJlbnRPcHRpb25zID0gdGhpcy5vcHRpb25zLFxyXG5cdFx0XHR3cmFwcGVyQ2xhc3MgPSBjdXJyZW50T3B0aW9ucy53cmFwcGVyQ2xhc3MsXHJcblx0XHRcdHVpID0ge1xyXG5cdFx0XHRcdHNjcmVlbjogJCggXCI8ZGl2IGNsYXNzPSd1aS1zY3JlZW4taGlkZGVuIHVpLXBvcHVwLXNjcmVlbiBcIiArXHJcblx0XHRcdFx0dGhpcy5fdGhlbWVDbGFzc0Zyb21PcHRpb24oIFwidWktb3ZlcmxheS1cIiwgY3VycmVudE9wdGlvbnMub3ZlcmxheVRoZW1lICkgKyBcIic+PC9kaXY+XCIgKSxcclxuXHRcdFx0XHRwbGFjZWhvbGRlcjogJCggXCI8ZGl2IHN0eWxlPSdkaXNwbGF5OiBub25lOyc+PCEtLSBwbGFjZWhvbGRlciAtLT48L2Rpdj5cIiApLFxyXG5cdFx0XHRcdGNvbnRhaW5lcjogJCggXCI8ZGl2IGNsYXNzPSd1aS1wb3B1cC1jb250YWluZXIgdWktcG9wdXAtaGlkZGVuIHVpLXBvcHVwLXRydW5jYXRlXCIgK1xyXG5cdFx0XHRcdFx0KCB3cmFwcGVyQ2xhc3MgPyAoIFwiIFwiICsgd3JhcHBlckNsYXNzICkgOiBcIlwiICkgKyBcIic+PC9kaXY+XCIgKVxyXG5cdFx0XHR9LFxyXG5cdFx0XHRmcmFnbWVudCA9IHRoaXMuZG9jdW1lbnRbIDAgXS5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XHJcblxyXG5cdFx0ZnJhZ21lbnQuYXBwZW5kQ2hpbGQoIHVpLnNjcmVlblsgMCBdICk7XHJcblx0XHRmcmFnbWVudC5hcHBlbmRDaGlsZCggdWkuY29udGFpbmVyWyAwIF0gKTtcclxuXHJcblx0XHRpZiAoIG15SWQgKSB7XHJcblx0XHRcdHVpLnNjcmVlbi5hdHRyKCBcImlkXCIsIG15SWQgKyBcIi1zY3JlZW5cIiApO1xyXG5cdFx0XHR1aS5jb250YWluZXIuYXR0ciggXCJpZFwiLCBteUlkICsgXCItcG9wdXBcIiApO1xyXG5cdFx0XHR1aS5wbGFjZWhvbGRlclxyXG5cdFx0XHRcdC5hdHRyKCBcImlkXCIsIG15SWQgKyBcIi1wbGFjZWhvbGRlclwiIClcclxuXHRcdFx0XHQuaHRtbCggXCI8IS0tIHBsYWNlaG9sZGVyIGZvciBcIiArIG15SWQgKyBcIiAtLT5cIiApO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIEFwcGx5IHRoZSBwcm90b1xyXG5cdFx0dGhpcy5fcGFnZVsgMCBdLmFwcGVuZENoaWxkKCBmcmFnbWVudCApO1xyXG5cdFx0Ly8gTGVhdmUgYSBwbGFjZWhvbGRlciB3aGVyZSB0aGUgZWxlbWVudCB1c2VkIHRvIGJlXHJcblx0XHR1aS5wbGFjZWhvbGRlci5pbnNlcnRBZnRlciggdGhlRWxlbWVudCApO1xyXG5cdFx0dGhlRWxlbWVudFxyXG5cdFx0XHQuZGV0YWNoKClcclxuXHRcdFx0LmFkZENsYXNzKCBcInVpLXBvcHVwIFwiICtcclxuXHRcdFx0XHR0aGlzLl90aGVtZUNsYXNzRnJvbU9wdGlvbiggXCJ1aS1ib2R5LVwiLCBjdXJyZW50T3B0aW9ucy50aGVtZSApICsgXCIgXCIgK1xyXG5cdFx0XHRcdCggY3VycmVudE9wdGlvbnMuc2hhZG93ID8gXCJ1aS1vdmVybGF5LXNoYWRvdyBcIiA6IFwiXCIgKSArXHJcblx0XHRcdFx0KCBjdXJyZW50T3B0aW9ucy5jb3JuZXJzID8gXCJ1aS1jb3JuZXItYWxsIFwiIDogXCJcIiApIClcclxuXHRcdFx0LmFwcGVuZFRvKCB1aS5jb250YWluZXIgKTtcclxuXHJcblx0XHRyZXR1cm4gdWk7XHJcblx0fSxcclxuXHJcblx0X2VhdEV2ZW50QW5kQ2xvc2U6IGZ1bmN0aW9uKCB0aGVFdmVudCApIHtcclxuXHRcdHRoZUV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHR0aGVFdmVudC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcclxuXHRcdGlmICggdGhpcy5vcHRpb25zLmRpc21pc3NpYmxlICkge1xyXG5cdFx0XHR0aGlzLmNsb3NlKCk7XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gZmFsc2U7XHJcblx0fSxcclxuXHJcblx0Ly8gTWFrZSBzdXJlIHRoZSBzY3JlZW4gY292ZXJzIHRoZSBlbnRpcmUgZG9jdW1lbnQgLSBDU1MgaXMgc29tZXRpbWVzIG5vdFxyXG5cdC8vIGVub3VnaCB0byBhY2NvbXBsaXNoIHRoaXMuXHJcblx0X3Jlc2l6ZVNjcmVlbjogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgc2NyZWVuID0gdGhpcy5fdWkuc2NyZWVuLFxyXG5cdFx0XHRwb3B1cEhlaWdodCA9IHRoaXMuX3VpLmNvbnRhaW5lci5vdXRlckhlaWdodCggdHJ1ZSApLFxyXG5cdFx0XHRzY3JlZW5IZWlnaHQgPSBzY3JlZW4ucmVtb3ZlQXR0ciggXCJzdHlsZVwiICkuaGVpZ2h0KCksXHJcblxyXG5cdFx0XHQvLyBTdWJ0cmFjdGluZyAxIGhlcmUgaXMgbmVjZXNzYXJ5IGZvciBhbiBvYnNjdXJlIEFuZHJkb2lkIDQuMCBidWcgd2hlcmVcclxuXHRcdFx0Ly8gdGhlIGJyb3dzZXIgaGFuZ3MgaWYgdGhlIHNjcmVlbiBjb3ZlcnMgdGhlIGVudGlyZSBkb2N1bWVudCA6L1xyXG5cdFx0XHRkb2N1bWVudEhlaWdodCA9IHRoaXMuZG9jdW1lbnQuaGVpZ2h0KCkgLSAxO1xyXG5cclxuXHRcdGlmICggc2NyZWVuSGVpZ2h0IDwgZG9jdW1lbnRIZWlnaHQgKSB7XHJcblx0XHRcdHNjcmVlbi5oZWlnaHQoIGRvY3VtZW50SGVpZ2h0ICk7XHJcblx0XHR9IGVsc2UgaWYgKCBwb3B1cEhlaWdodCA+IHNjcmVlbkhlaWdodCApIHtcclxuXHRcdFx0c2NyZWVuLmhlaWdodCggcG9wdXBIZWlnaHQgKTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfaGFuZGxlV2luZG93S2V5VXA6IGZ1bmN0aW9uKCB0aGVFdmVudCApIHtcclxuXHRcdGlmICggdGhpcy5faXNPcGVuICYmIHRoZUV2ZW50LmtleUNvZGUgPT09ICQubW9iaWxlLmtleUNvZGUuRVNDQVBFICkge1xyXG5cdFx0XHRyZXR1cm4gdGhpcy5fZWF0RXZlbnRBbmRDbG9zZSggdGhlRXZlbnQgKTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfZXhwZWN0UmVzaXplRXZlbnQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIHdpbmRvd0Nvb3JkaW5hdGVzID0gZ2V0V2luZG93Q29vcmRpbmF0ZXMoIHRoaXMud2luZG93ICk7XHJcblxyXG5cdFx0aWYgKCB0aGlzLl9yZXNpemVEYXRhICkge1xyXG5cdFx0XHRpZiAoIHdpbmRvd0Nvb3JkaW5hdGVzLnggPT09IHRoaXMuX3Jlc2l6ZURhdGEud2luZG93Q29vcmRpbmF0ZXMueCAmJlxyXG5cdFx0XHRcdHdpbmRvd0Nvb3JkaW5hdGVzLnkgPT09IHRoaXMuX3Jlc2l6ZURhdGEud2luZG93Q29vcmRpbmF0ZXMueSAmJlxyXG5cdFx0XHRcdHdpbmRvd0Nvb3JkaW5hdGVzLmN4ID09PSB0aGlzLl9yZXNpemVEYXRhLndpbmRvd0Nvb3JkaW5hdGVzLmN4ICYmXHJcblx0XHRcdFx0d2luZG93Q29vcmRpbmF0ZXMuY3kgPT09IHRoaXMuX3Jlc2l6ZURhdGEud2luZG93Q29vcmRpbmF0ZXMuY3kgKSB7XHJcblx0XHRcdFx0Ly8gdGltZW91dCBub3QgcmVmcmVzaGVkXHJcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdC8vIGNsZWFyIGV4aXN0aW5nIHRpbWVvdXQgLSBpdCB3aWxsIGJlIHJlZnJlc2hlZCBiZWxvd1xyXG5cdFx0XHRcdGNsZWFyVGltZW91dCggdGhpcy5fcmVzaXplRGF0YS50aW1lb3V0SWQgKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuX3Jlc2l6ZURhdGEgPSB7XHJcblx0XHRcdHRpbWVvdXRJZDogdGhpcy5fZGVsYXkoIFwiX3Jlc2l6ZVRpbWVvdXRcIiwgMjAwICksXHJcblx0XHRcdHdpbmRvd0Nvb3JkaW5hdGVzOiB3aW5kb3dDb29yZGluYXRlc1xyXG5cdFx0fTtcclxuXHJcblx0XHRyZXR1cm4gdHJ1ZTtcclxuXHR9LFxyXG5cclxuXHRfcmVzaXplVGltZW91dDogZnVuY3Rpb24oKSB7XHJcblx0XHRpZiAoIHRoaXMuX2lzT3BlbiApIHtcclxuXHRcdFx0aWYgKCAhdGhpcy5fZXhwZWN0UmVzaXplRXZlbnQoKSApIHtcclxuXHRcdFx0XHRpZiAoIHRoaXMuX3VpLmNvbnRhaW5lci5oYXNDbGFzcyggXCJ1aS1wb3B1cC1oaWRkZW5cIiApICkge1xyXG5cdFx0XHRcdFx0Ly8gZWZmZWN0aXZlbHkgcmFwaWQtb3BlbiB0aGUgcG9wdXAgd2hpbGUgbGVhdmluZyB0aGUgc2NyZWVuIGludGFjdFxyXG5cdFx0XHRcdFx0dGhpcy5fdWkuY29udGFpbmVyLnJlbW92ZUNsYXNzKCBcInVpLXBvcHVwLWhpZGRlbiB1aS1wb3B1cC10cnVuY2F0ZVwiICk7XHJcblx0XHRcdFx0XHR0aGlzLnJlcG9zaXRpb24oIHsgcG9zaXRpb25UbzogXCJ3aW5kb3dcIiB9ICk7XHJcblx0XHRcdFx0XHR0aGlzLl9pZ25vcmVSZXNpemVFdmVudHMoKTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdHRoaXMuX3Jlc2l6ZVNjcmVlbigpO1xyXG5cdFx0XHRcdHRoaXMuX3Jlc2l6ZURhdGEgPSBudWxsO1xyXG5cdFx0XHRcdHRoaXMuX29yaWVudGF0aW9uY2hhbmdlSW5Qcm9ncmVzcyA9IGZhbHNlO1xyXG5cdFx0XHR9XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHR0aGlzLl9yZXNpemVEYXRhID0gbnVsbDtcclxuXHRcdFx0dGhpcy5fb3JpZW50YXRpb25jaGFuZ2VJblByb2dyZXNzID0gZmFsc2U7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X3N0b3BJZ25vcmluZ1Jlc2l6ZUV2ZW50czogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLl9pZ25vcmVSZXNpemVUbyA9IDA7XHJcblx0fSxcclxuXHJcblx0X2lnbm9yZVJlc2l6ZUV2ZW50czogZnVuY3Rpb24oKSB7XHJcblx0XHRpZiAoIHRoaXMuX2lnbm9yZVJlc2l6ZVRvICkge1xyXG5cdFx0XHRjbGVhclRpbWVvdXQoIHRoaXMuX2lnbm9yZVJlc2l6ZVRvICk7XHJcblx0XHR9XHJcblx0XHR0aGlzLl9pZ25vcmVSZXNpemVUbyA9IHRoaXMuX2RlbGF5KCBcIl9zdG9wSWdub3JpbmdSZXNpemVFdmVudHNcIiwgMTAwMCApO1xyXG5cdH0sXHJcblxyXG5cdF9oYW5kbGVXaW5kb3dSZXNpemU6IGZ1bmN0aW9uKC8qIHRoZUV2ZW50ICovKSB7XHJcblx0XHRpZiAoIHRoaXMuX2lzT3BlbiAmJiB0aGlzLl9pZ25vcmVSZXNpemVUbyA9PT0gMCApIHtcclxuXHRcdFx0aWYgKCAoIHRoaXMuX2V4cGVjdFJlc2l6ZUV2ZW50KCkgfHwgdGhpcy5fb3JpZW50YXRpb25jaGFuZ2VJblByb2dyZXNzICkgJiZcclxuXHRcdFx0XHQhdGhpcy5fdWkuY29udGFpbmVyLmhhc0NsYXNzKCBcInVpLXBvcHVwLWhpZGRlblwiICkgKSB7XHJcblx0XHRcdFx0Ly8gZWZmZWN0aXZlbHkgcmFwaWQtY2xvc2UgdGhlIHBvcHVwIHdoaWxlIGxlYXZpbmcgdGhlIHNjcmVlbiBpbnRhY3RcclxuXHRcdFx0XHR0aGlzLl91aS5jb250YWluZXJcclxuXHRcdFx0XHRcdC5hZGRDbGFzcyggXCJ1aS1wb3B1cC1oaWRkZW4gdWktcG9wdXAtdHJ1bmNhdGVcIiApXHJcblx0XHRcdFx0XHQucmVtb3ZlQXR0ciggXCJzdHlsZVwiICk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfaGFuZGxlV2luZG93T3JpZW50YXRpb25jaGFuZ2U6IGZ1bmN0aW9uKC8qIHRoZUV2ZW50ICovKSB7XHJcblx0XHRpZiAoICF0aGlzLl9vcmllbnRhdGlvbmNoYW5nZUluUHJvZ3Jlc3MgJiYgdGhpcy5faXNPcGVuICYmIHRoaXMuX2lnbm9yZVJlc2l6ZVRvID09PSAwICkge1xyXG5cdFx0XHR0aGlzLl9leHBlY3RSZXNpemVFdmVudCgpO1xyXG5cdFx0XHR0aGlzLl9vcmllbnRhdGlvbmNoYW5nZUluUHJvZ3Jlc3MgPSB0cnVlO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdC8vIFdoZW4gdGhlIHBvcHVwIGlzIG9wZW4sIGF0dGVtcHRpbmcgdG8gZm9jdXMgb24gYW4gZWxlbWVudCB0aGF0IGlzIG5vdCBhXHJcblx0Ly8gY2hpbGQgb2YgdGhlIHBvcHVwIHdpbGwgcmVkaXJlY3QgZm9jdXMgdG8gdGhlIHBvcHVwXHJcblx0X2hhbmRsZURvY3VtZW50Rm9jdXNJbjogZnVuY3Rpb24oIHRoZUV2ZW50ICkge1xyXG5cdFx0dmFyIHRhcmdldCxcclxuXHRcdFx0dGFyZ2V0RWxlbWVudCA9IHRoZUV2ZW50LnRhcmdldCxcclxuXHRcdFx0dWkgPSB0aGlzLl91aTtcclxuXHJcblx0XHRpZiAoICF0aGlzLl9pc09wZW4gKSB7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIHRhcmdldEVsZW1lbnQgIT09IHVpLmNvbnRhaW5lclsgMCBdICkge1xyXG5cdFx0XHR0YXJnZXQgPSAkKCB0YXJnZXRFbGVtZW50ICk7XHJcblx0XHRcdGlmICggISQuY29udGFpbnMoIHVpLmNvbnRhaW5lclsgMCBdLCB0YXJnZXRFbGVtZW50ICkgKSB7XHJcblx0XHRcdFx0JCggdGhpcy5kb2N1bWVudFsgMCBdLmFjdGl2ZUVsZW1lbnQgKS5vbmUoIFwiZm9jdXNcIiwgJC5wcm94eSggZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHR0aGlzLl9zYWZlbHlCbHVyKCB0YXJnZXRFbGVtZW50ICk7XHJcblx0XHRcdFx0fSwgdGhpcyApICk7XHJcblx0XHRcdFx0dWkuZm9jdXNFbGVtZW50LmZvY3VzKCk7XHJcblx0XHRcdFx0dGhlRXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHR0aGVFdmVudC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdH0gZWxzZSBpZiAoIHVpLmZvY3VzRWxlbWVudFsgMCBdID09PSB1aS5jb250YWluZXJbIDAgXSApIHtcclxuXHRcdFx0XHR1aS5mb2N1c0VsZW1lbnQgPSB0YXJnZXQ7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLl9pZ25vcmVSZXNpemVFdmVudHMoKTtcclxuXHR9LFxyXG5cclxuXHRfdGhlbWVDbGFzc0Zyb21PcHRpb246IGZ1bmN0aW9uKCBwcmVmaXgsIHZhbHVlICkge1xyXG5cdFx0cmV0dXJuICggdmFsdWUgPyAoIHZhbHVlID09PSBcIm5vbmVcIiA/IFwiXCIgOiAoIHByZWZpeCArIHZhbHVlICkgKSA6ICggcHJlZml4ICsgXCJpbmhlcml0XCIgKSApO1xyXG5cdH0sXHJcblxyXG5cdF9hcHBseVRyYW5zaXRpb246IGZ1bmN0aW9uKCB2YWx1ZSApIHtcclxuXHRcdGlmICggdmFsdWUgKSB7XHJcblx0XHRcdHRoaXMuX3VpLmNvbnRhaW5lci5yZW1vdmVDbGFzcyggdGhpcy5fZmFsbGJhY2tUcmFuc2l0aW9uICk7XHJcblx0XHRcdGlmICggdmFsdWUgIT09IFwibm9uZVwiICkge1xyXG5cdFx0XHRcdHRoaXMuX2ZhbGxiYWNrVHJhbnNpdGlvbiA9ICQubW9iaWxlLl9tYXliZURlZ3JhZGVUcmFuc2l0aW9uKCB2YWx1ZSApO1xyXG5cdFx0XHRcdGlmICggdGhpcy5fZmFsbGJhY2tUcmFuc2l0aW9uID09PSBcIm5vbmVcIiApIHtcclxuXHRcdFx0XHRcdHRoaXMuX2ZhbGxiYWNrVHJhbnNpdGlvbiA9IFwiXCI7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdHRoaXMuX3VpLmNvbnRhaW5lci5hZGRDbGFzcyggdGhpcy5fZmFsbGJhY2tUcmFuc2l0aW9uICk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHR9LFxyXG5cclxuXHRfc2V0T3B0aW9uczogZnVuY3Rpb24oIG5ld09wdGlvbnMgKSB7XHJcblx0XHR2YXIgY3VycmVudE9wdGlvbnMgPSB0aGlzLm9wdGlvbnMsXHJcblx0XHRcdHRoZUVsZW1lbnQgPSB0aGlzLmVsZW1lbnQsXHJcblx0XHRcdHNjcmVlbiA9IHRoaXMuX3VpLnNjcmVlbjtcclxuXHJcblx0XHRpZiAoIG5ld09wdGlvbnMud3JhcHBlckNsYXNzICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdHRoaXMuX3VpLmNvbnRhaW5lclxyXG5cdFx0XHRcdC5yZW1vdmVDbGFzcyggY3VycmVudE9wdGlvbnMud3JhcHBlckNsYXNzIClcclxuXHRcdFx0XHQuYWRkQ2xhc3MoIG5ld09wdGlvbnMud3JhcHBlckNsYXNzICk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBuZXdPcHRpb25zLnRoZW1lICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdHRoZUVsZW1lbnRcclxuXHRcdFx0XHQucmVtb3ZlQ2xhc3MoIHRoaXMuX3RoZW1lQ2xhc3NGcm9tT3B0aW9uKCBcInVpLWJvZHktXCIsIGN1cnJlbnRPcHRpb25zLnRoZW1lICkgKVxyXG5cdFx0XHRcdC5hZGRDbGFzcyggdGhpcy5fdGhlbWVDbGFzc0Zyb21PcHRpb24oIFwidWktYm9keS1cIiwgbmV3T3B0aW9ucy50aGVtZSApICk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBuZXdPcHRpb25zLm92ZXJsYXlUaGVtZSAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRzY3JlZW5cclxuXHRcdFx0XHQucmVtb3ZlQ2xhc3MoIHRoaXMuX3RoZW1lQ2xhc3NGcm9tT3B0aW9uKCBcInVpLW92ZXJsYXktXCIsIGN1cnJlbnRPcHRpb25zLm92ZXJsYXlUaGVtZSApIClcclxuXHRcdFx0XHQuYWRkQ2xhc3MoIHRoaXMuX3RoZW1lQ2xhc3NGcm9tT3B0aW9uKCBcInVpLW92ZXJsYXktXCIsIG5ld09wdGlvbnMub3ZlcmxheVRoZW1lICkgKTtcclxuXHJcblx0XHRcdGlmICggdGhpcy5faXNPcGVuICkge1xyXG5cdFx0XHRcdHNjcmVlbi5hZGRDbGFzcyggXCJpblwiICk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIG5ld09wdGlvbnMuc2hhZG93ICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdHRoZUVsZW1lbnQudG9nZ2xlQ2xhc3MoIFwidWktb3ZlcmxheS1zaGFkb3dcIiwgbmV3T3B0aW9ucy5zaGFkb3cgKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIG5ld09wdGlvbnMuY29ybmVycyAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHR0aGVFbGVtZW50LnRvZ2dsZUNsYXNzKCBcInVpLWNvcm5lci1hbGxcIiwgbmV3T3B0aW9ucy5jb3JuZXJzICk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBuZXdPcHRpb25zLnRyYW5zaXRpb24gIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0aWYgKCAhdGhpcy5fY3VycmVudFRyYW5zaXRpb24gKSB7XHJcblx0XHRcdFx0dGhpcy5fYXBwbHlUcmFuc2l0aW9uKCBuZXdPcHRpb25zLnRyYW5zaXRpb24gKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggbmV3T3B0aW9ucy50b2xlcmFuY2UgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0dGhpcy5fc2V0VG9sZXJhbmNlKCBuZXdPcHRpb25zLnRvbGVyYW5jZSApO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggbmV3T3B0aW9ucy5kaXNhYmxlZCAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRpZiAoIG5ld09wdGlvbnMuZGlzYWJsZWQgKSB7XHJcblx0XHRcdFx0dGhpcy5jbG9zZSgpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHRoaXMuX3N1cGVyKCBuZXdPcHRpb25zICk7XHJcblx0fSxcclxuXHJcblx0X3NldFRvbGVyYW5jZTogZnVuY3Rpb24oIHZhbHVlICkge1xyXG5cdFx0dmFyIHRvbCA9IHsgdDogMzAsIHI6IDE1LCBiOiAzMCwgbDogMTUgfSxcclxuXHRcdFx0YXI7XHJcblxyXG5cdFx0aWYgKCB2YWx1ZSAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRhciA9IFN0cmluZyggdmFsdWUgKS5zcGxpdCggXCIsXCIgKTtcclxuXHJcblx0XHRcdCQuZWFjaCggYXIsIGZ1bmN0aW9uKCBpZHgsIHZhbCApIHsgYXJbIGlkeCBdID0gcGFyc2VJbnQoIHZhbCwgMTAgKTsgfSApO1xyXG5cclxuXHRcdFx0c3dpdGNoKCBhci5sZW5ndGggKSB7XHJcblx0XHRcdFx0Ly8gQWxsIHZhbHVlcyBhcmUgdG8gYmUgdGhlIHNhbWVcclxuXHRcdFx0XHRjYXNlIDE6XHJcblx0XHRcdFx0XHRpZiAoICFpc05hTiggYXJbIDAgXSApICkge1xyXG5cdFx0XHRcdFx0XHR0b2wudCA9IHRvbC5yID0gdG9sLmIgPSB0b2wubCA9IGFyWyAwIF07XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRicmVhaztcclxuXHJcblx0XHRcdFx0Ly8gVGhlIGZpcnN0IHZhbHVlIGRlbm90ZXMgdG9wL2JvdHRvbSB0b2xlcmFuY2UsIGFuZCB0aGUgc2Vjb25kIHZhbHVlIGRlbm90ZXMgbGVmdC9yaWdodCB0b2xlcmFuY2VcclxuXHRcdFx0XHRjYXNlIDI6XHJcblx0XHRcdFx0XHRpZiAoICFpc05hTiggYXJbIDAgXSApICkge1xyXG5cdFx0XHRcdFx0XHR0b2wudCA9IHRvbC5iID0gYXJbIDAgXTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdGlmICggIWlzTmFOKCBhclsgMSBdICkgKSB7XHJcblx0XHRcdFx0XHRcdHRvbC5sID0gdG9sLnIgPSBhclsgMSBdO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblxyXG5cdFx0XHRcdC8vIFRoZSBhcnJheSBjb250YWlucyB2YWx1ZXMgaW4gdGhlIG9yZGVyIHRvcCwgcmlnaHQsIGJvdHRvbSwgbGVmdFxyXG5cdFx0XHRcdGNhc2UgNDpcclxuXHRcdFx0XHRcdGlmICggIWlzTmFOKCBhclsgMCBdICkgKSB7XHJcblx0XHRcdFx0XHRcdHRvbC50ID0gYXJbIDAgXTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdGlmICggIWlzTmFOKCBhclsgMSBdICkgKSB7XHJcblx0XHRcdFx0XHRcdHRvbC5yID0gYXJbIDEgXTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdGlmICggIWlzTmFOKCBhclsgMiBdICkgKSB7XHJcblx0XHRcdFx0XHRcdHRvbC5iID0gYXJbIDIgXTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdGlmICggIWlzTmFOKCBhclsgMyBdICkgKSB7XHJcblx0XHRcdFx0XHRcdHRvbC5sID0gYXJbIDMgXTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cclxuXHRcdFx0XHRkZWZhdWx0OlxyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLl90b2xlcmFuY2UgPSB0b2w7XHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHR9LFxyXG5cclxuXHRfY2xhbXBQb3B1cFdpZHRoOiBmdW5jdGlvbiggaW5mb09ubHkgKSB7XHJcblx0XHR2YXIgbWVudVNpemUsXHJcblx0XHRcdHdpbmRvd0Nvb3JkaW5hdGVzID0gZ2V0V2luZG93Q29vcmRpbmF0ZXMoIHRoaXMud2luZG93ICksXHJcblx0XHRcdC8vIHJlY3RhbmdsZSB3aXRoaW4gd2hpY2ggdGhlIHBvcHVwIG11c3QgZml0XHJcblx0XHRcdHJlY3RhbmdsZSA9IHtcclxuXHRcdFx0XHR4OiB0aGlzLl90b2xlcmFuY2UubCxcclxuXHRcdFx0XHR5OiB3aW5kb3dDb29yZGluYXRlcy55ICsgdGhpcy5fdG9sZXJhbmNlLnQsXHJcblx0XHRcdFx0Y3g6IHdpbmRvd0Nvb3JkaW5hdGVzLmN4IC0gdGhpcy5fdG9sZXJhbmNlLmwgLSB0aGlzLl90b2xlcmFuY2UucixcclxuXHRcdFx0XHRjeTogd2luZG93Q29vcmRpbmF0ZXMuY3kgLSB0aGlzLl90b2xlcmFuY2UudCAtIHRoaXMuX3RvbGVyYW5jZS5iXHJcblx0XHRcdH07XHJcblxyXG5cdFx0aWYgKCAhaW5mb09ubHkgKSB7XHJcblx0XHRcdC8vIENsYW1wIHRoZSB3aWR0aCBvZiB0aGUgbWVudSBiZWZvcmUgZ3JhYmJpbmcgaXRzIHNpemVcclxuXHRcdFx0dGhpcy5fdWkuY29udGFpbmVyLmNzcyggXCJtYXgtd2lkdGhcIiwgcmVjdGFuZ2xlLmN4ICk7XHJcblx0XHR9XHJcblxyXG5cdFx0bWVudVNpemUgPSB7XHJcblx0XHRcdGN4OiB0aGlzLl91aS5jb250YWluZXIub3V0ZXJXaWR0aCggdHJ1ZSApLFxyXG5cdFx0XHRjeTogdGhpcy5fdWkuY29udGFpbmVyLm91dGVySGVpZ2h0KCB0cnVlIClcclxuXHRcdH07XHJcblxyXG5cdFx0cmV0dXJuIHsgcmM6IHJlY3RhbmdsZSwgbWVudVNpemU6IG1lbnVTaXplIH07XHJcblx0fSxcclxuXHJcblx0X2NhbGN1bGF0ZUZpbmFsTG9jYXRpb246IGZ1bmN0aW9uKCBkZXNpcmVkLCBjbGFtcEluZm8gKSB7XHJcblx0XHR2YXIgcmV0dXJuVmFsdWUsXHJcblx0XHRcdHJlY3RhbmdsZSA9IGNsYW1wSW5mby5yYyxcclxuXHRcdFx0bWVudVNpemUgPSBjbGFtcEluZm8ubWVudVNpemU7XHJcblxyXG5cdFx0Ly8gQ2VudGVyIHRoZSBtZW51IG92ZXIgdGhlIGRlc2lyZWQgY29vcmRpbmF0ZXMsIHdoaWxlIG5vdCBnb2luZyBvdXRzaWRlXHJcblx0XHQvLyB0aGUgd2luZG93IHRvbGVyYW5jZXMuIFRoaXMgd2lsbCBjZW50ZXIgd3J0LiB0aGUgd2luZG93IGlmIHRoZSBwb3B1cCBpc1xyXG5cdFx0Ly8gdG9vIGxhcmdlLlxyXG5cdFx0cmV0dXJuVmFsdWUgPSB7XHJcblx0XHRcdGxlZnQ6IGZpdFNlZ21lbnRJbnNpZGVTZWdtZW50KCByZWN0YW5nbGUuY3gsIG1lbnVTaXplLmN4LCByZWN0YW5nbGUueCwgZGVzaXJlZC54ICksXHJcblx0XHRcdHRvcDogZml0U2VnbWVudEluc2lkZVNlZ21lbnQoIHJlY3RhbmdsZS5jeSwgbWVudVNpemUuY3ksIHJlY3RhbmdsZS55LCBkZXNpcmVkLnkgKVxyXG5cdFx0fTtcclxuXHJcblx0XHQvLyBNYWtlIHN1cmUgdGhlIHRvcCBvZiB0aGUgbWVudSBpcyB2aXNpYmxlXHJcblx0XHRyZXR1cm5WYWx1ZS50b3AgPSBNYXRoLm1heCggMCwgcmV0dXJuVmFsdWUudG9wICk7XHJcblxyXG5cdFx0Ly8gSWYgdGhlIGhlaWdodCBvZiB0aGUgbWVudSBpcyBzbWFsbGVyIHRoYW4gdGhlIGhlaWdodCBvZiB0aGUgZG9jdW1lbnRcclxuXHRcdC8vIGFsaWduIHRoZSBib3R0b20gd2l0aCB0aGUgYm90dG9tIG9mIHRoZSBkb2N1bWVudFxyXG5cclxuXHRcdHJldHVyblZhbHVlLnRvcCAtPSBNYXRoLm1pbiggcmV0dXJuVmFsdWUudG9wLFxyXG5cdFx0XHRNYXRoLm1heCggMCwgcmV0dXJuVmFsdWUudG9wICsgbWVudVNpemUuY3kgLSB0aGlzLmRvY3VtZW50LmhlaWdodCgpICkgKTtcclxuXHJcblx0XHRyZXR1cm4gcmV0dXJuVmFsdWU7XHJcblx0fSxcclxuXHJcblx0Ly8gVHJ5IGFuZCBjZW50ZXIgdGhlIG92ZXJsYXkgb3ZlciB0aGUgZ2l2ZW4gY29vcmRpbmF0ZXNcclxuXHRfcGxhY2VtZW50Q29vcmRzOiBmdW5jdGlvbiggZGVzaXJlZCApIHtcclxuXHRcdHJldHVybiB0aGlzLl9jYWxjdWxhdGVGaW5hbExvY2F0aW9uKCBkZXNpcmVkLCB0aGlzLl9jbGFtcFBvcHVwV2lkdGgoKSApO1xyXG5cdH0sXHJcblxyXG5cdF9jcmVhdGVQcmVyZXF1aXNpdGVzOiBmdW5jdGlvbiggc2NyZWVuUHJlcmVxdWlzaXRlLCBjb250YWluZXJQcmVyZXF1aXNpdGUsIHdoZW5Eb25lICkge1xyXG5cdFx0dmFyIHByZXJlcXVpc2l0ZXMsXHJcblx0XHRcdHNlbGYgPSB0aGlzO1xyXG5cclxuXHRcdC8vIEl0IGlzIGltcG9ydGFudCB0byBtYWludGFpbiBib3RoIHRoZSBsb2NhbCB2YXJpYWJsZSBwcmVyZXF1aXNpdGVzIGFuZFxyXG5cdFx0Ly8gc2VsZi5fcHJlcmVxdWlzaXRlcy4gVGhlIGxvY2FsIHZhcmlhYmxlIHJlbWFpbnMgaW4gdGhlIGNsb3N1cmUgb2YgdGhlXHJcblx0XHQvLyBmdW5jdGlvbnMgd2hpY2ggY2FsbCB0aGUgY2FsbGJhY2tzIHBhc3NlZCBpbi4gVGhlIGNvbXBhcmlzb24gYmV0d2VlbiB0aGVcclxuXHRcdC8vIGxvY2FsIHZhcmlhYmxlIGFuZCBzZWxmLl9wcmVyZXF1aXNpdGVzIGlzIG5lY2Vzc2FyeSwgYmVjYXVzZSBvbmNlIGFcclxuXHRcdC8vIGZ1bmN0aW9uIGhhcyBiZWVuIHBhc3NlZCB0byAuYW5pbWF0aW9uQ29tcGxldGUoKSBpdCB3aWxsIGJlIGNhbGxlZCBuZXh0XHJcblx0XHQvLyB0aW1lIGFuIGFuaW1hdGlvbiBjb21wbGV0ZXMsIGV2ZW4gaWYgdGhhdCdzIG5vdCB0aGUgYW5pbWF0aW9uIHdob3NlIGVuZFxyXG5cdFx0Ly8gdGhlIGZ1bmN0aW9uIHdhcyBzdXBwb3NlZCB0byBjYXRjaCAoZm9yIGV4YW1wbGUsIGlmIGFuIGFib3J0IGhhcHBlbnNcclxuXHRcdC8vIGR1cmluZyB0aGUgb3BlbmluZyBhbmltYXRpb24sIHRoZSAuYW5pbWF0aW9uQ29tcGxldGUgaGFuZGxlciBpcyBub3RcclxuXHRcdC8vIGNhbGxlZCBmb3IgdGhhdCBhbmltYXRpb24gYW55bW9yZSwgYnV0IHRoZSBoYW5kbGVyIHJlbWFpbnMgYXR0YWNoZWQsIHNvXHJcblx0XHQvLyBpdCBpcyBjYWxsZWQgdGhlIG5leHQgdGltZSB0aGUgcG9wdXAgaXMgb3BlbmVkIC0gbWFraW5nIGl0IHN0YWxlLlxyXG5cdFx0Ly8gQ29tcGFyaW5nIHRoZSBsb2NhbCB2YXJpYWJsZSBwcmVyZXF1aXNpdGVzIHRvIHRoZSB3aWRnZXQtbGV2ZWwgdmFyaWFibGVcclxuXHRcdC8vIHNlbGYuX3ByZXJlcXVpc2l0ZXMgZW5zdXJlcyB0aGF0IGNhbGxiYWNrcyB0cmlnZ2VyZWQgYnkgYSBzdGFsZVxyXG5cdFx0Ly8gLmFuaW1hdGlvbkNvbXBsZXRlIHdpbGwgYmUgaWdub3JlZC5cclxuXHJcblx0XHRwcmVyZXF1aXNpdGVzID0ge1xyXG5cdFx0XHRzY3JlZW46ICQuRGVmZXJyZWQoKSxcclxuXHRcdFx0Y29udGFpbmVyOiAkLkRlZmVycmVkKClcclxuXHRcdH07XHJcblxyXG5cdFx0cHJlcmVxdWlzaXRlcy5zY3JlZW4udGhlbiggZnVuY3Rpb24oKSB7XHJcblx0XHRcdGlmICggcHJlcmVxdWlzaXRlcyA9PT0gc2VsZi5fcHJlcmVxdWlzaXRlcyApIHtcclxuXHRcdFx0XHRzY3JlZW5QcmVyZXF1aXNpdGUoKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblxyXG5cdFx0cHJlcmVxdWlzaXRlcy5jb250YWluZXIudGhlbiggZnVuY3Rpb24oKSB7XHJcblx0XHRcdGlmICggcHJlcmVxdWlzaXRlcyA9PT0gc2VsZi5fcHJlcmVxdWlzaXRlcyApIHtcclxuXHRcdFx0XHRjb250YWluZXJQcmVyZXF1aXNpdGUoKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblxyXG5cdFx0JC53aGVuKCBwcmVyZXF1aXNpdGVzLnNjcmVlbiwgcHJlcmVxdWlzaXRlcy5jb250YWluZXIgKS5kb25lKCBmdW5jdGlvbigpIHtcclxuXHRcdFx0aWYgKCBwcmVyZXF1aXNpdGVzID09PSBzZWxmLl9wcmVyZXF1aXNpdGVzICkge1xyXG5cdFx0XHRcdHNlbGYuX3ByZXJlcXVpc2l0ZXMgPSBudWxsO1xyXG5cdFx0XHRcdHdoZW5Eb25lKCk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cclxuXHRcdHNlbGYuX3ByZXJlcXVpc2l0ZXMgPSBwcmVyZXF1aXNpdGVzO1xyXG5cdH0sXHJcblxyXG5cdF9hbmltYXRlOiBmdW5jdGlvbiggYXJncyApIHtcclxuXHRcdC8vIE5PVEUgYmVmb3JlIHJlbW92aW5nIHRoZSBkZWZhdWx0IGFuaW1hdGlvbiBvZiB0aGUgc2NyZWVuXHJcblx0XHQvLyAgICAgIHRoaXMgaGFkIGFuIGFuaW1hdGUgY2FsbGJhY2sgdGhhdCB3b3VsZCByZXNvbHZlIHRoZSBkZWZlcnJlZFxyXG5cdFx0Ly8gICAgICBub3cgdGhlIGRlZmVycmVkIGlzIHJlc29sdmVkIGltbWVkaWF0ZWx5XHJcblx0XHQvLyBUT0RPIHJlbW92ZSB0aGUgZGVwZW5kZW5jeSBvbiB0aGUgc2NyZWVuIGRlZmVycmVkXHJcblx0XHR0aGlzLl91aS5zY3JlZW5cclxuXHRcdFx0LnJlbW92ZUNsYXNzKCBhcmdzLmNsYXNzVG9SZW1vdmUgKVxyXG5cdFx0XHQuYWRkQ2xhc3MoIGFyZ3Muc2NyZWVuQ2xhc3NUb0FkZCApO1xyXG5cclxuXHRcdGFyZ3MucHJlcmVxdWlzaXRlcy5zY3JlZW4ucmVzb2x2ZSgpO1xyXG5cclxuXHRcdGlmICggYXJncy50cmFuc2l0aW9uICYmIGFyZ3MudHJhbnNpdGlvbiAhPT0gXCJub25lXCIgKSB7XHJcblx0XHRcdGlmICggYXJncy5hcHBseVRyYW5zaXRpb24gKSB7XHJcblx0XHRcdFx0dGhpcy5fYXBwbHlUcmFuc2l0aW9uKCBhcmdzLnRyYW5zaXRpb24gKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAoIHRoaXMuX2ZhbGxiYWNrVHJhbnNpdGlvbiApIHtcclxuXHRcdFx0XHR0aGlzLl91aS5jb250YWluZXJcclxuXHRcdFx0XHRcdC5hZGRDbGFzcyggYXJncy5jb250YWluZXJDbGFzc1RvQWRkIClcclxuXHRcdFx0XHRcdC5yZW1vdmVDbGFzcyggYXJncy5jbGFzc1RvUmVtb3ZlIClcclxuXHRcdFx0XHRcdC5hbmltYXRpb25Db21wbGV0ZSggJC5wcm94eSggYXJncy5wcmVyZXF1aXNpdGVzLmNvbnRhaW5lciwgXCJyZXNvbHZlXCIgKSApO1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0dGhpcy5fdWkuY29udGFpbmVyLnJlbW92ZUNsYXNzKCBhcmdzLmNsYXNzVG9SZW1vdmUgKTtcclxuXHRcdGFyZ3MucHJlcmVxdWlzaXRlcy5jb250YWluZXIucmVzb2x2ZSgpO1xyXG5cdH0sXHJcblxyXG5cdC8vIFRoZSBkZXNpcmVkIGNvb3JkaW5hdGVzIHBhc3NlZCBpbiB3aWxsIGJlIHJldHVybmVkIHVudG91Y2hlZCBpZiBubyByZWZlcmVuY2UgZWxlbWVudCBjYW4gYmUgaWRlbnRpZmllZCB2aWFcclxuXHQvLyBkZXNpcmVkUG9zaXRpb24ucG9zaXRpb25Uby4gTmV2ZXJ0aGVsZXNzLCB0aGlzIGZ1bmN0aW9uIGVuc3VyZXMgdGhhdCBpdHMgcmV0dXJuIHZhbHVlIGFsd2F5cyBjb250YWlucyB2YWxpZFxyXG5cdC8vIHggYW5kIHkgY29vcmRpbmF0ZXMgYnkgc3BlY2lmeWluZyB0aGUgY2VudGVyIG1pZGRsZSBvZiB0aGUgd2luZG93IGlmIHRoZSBjb29yZGluYXRlcyBhcmUgYWJzZW50LlxyXG5cdC8vIG9wdGlvbnM6IHsgeDogY29vcmRpbmF0ZSwgeTogY29vcmRpbmF0ZSwgcG9zaXRpb25Ubzogc3RyaW5nOiBcIm9yaWdpblwiLCBcIndpbmRvd1wiLCBvciBqUXVlcnkgc2VsZWN0b3JcclxuXHRfZGVzaXJlZENvb3JkczogZnVuY3Rpb24oIG9wZW5PcHRpb25zICkge1xyXG5cdFx0dmFyIG9mZnNldCxcclxuXHRcdFx0ZHN0ID0gbnVsbCxcclxuXHRcdFx0d2luZG93Q29vcmRpbmF0ZXMgPSBnZXRXaW5kb3dDb29yZGluYXRlcyggdGhpcy53aW5kb3cgKSxcclxuXHRcdFx0eCA9IG9wZW5PcHRpb25zLngsXHJcblx0XHRcdHkgPSBvcGVuT3B0aW9ucy55LFxyXG5cdFx0XHRwVG8gPSBvcGVuT3B0aW9ucy5wb3NpdGlvblRvO1xyXG5cclxuXHRcdC8vIEVzdGFibGlzaCB3aGljaCBlbGVtZW50IHdpbGwgc2VydmUgYXMgdGhlIHJlZmVyZW5jZVxyXG5cdFx0aWYgKCBwVG8gJiYgcFRvICE9PSBcIm9yaWdpblwiICkge1xyXG5cdFx0XHRpZiAoIHBUbyA9PT0gXCJ3aW5kb3dcIiApIHtcclxuXHRcdFx0XHR4ID0gd2luZG93Q29vcmRpbmF0ZXMuY3ggLyAyICsgd2luZG93Q29vcmRpbmF0ZXMueDtcclxuXHRcdFx0XHR5ID0gd2luZG93Q29vcmRpbmF0ZXMuY3kgLyAyICsgd2luZG93Q29vcmRpbmF0ZXMueTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHR0cnkge1xyXG5cdFx0XHRcdFx0ZHN0ID0gJCggcFRvICk7XHJcblx0XHRcdFx0fSBjYXRjaCggZXJyICkge1xyXG5cdFx0XHRcdFx0ZHN0ID0gbnVsbDtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0aWYgKCBkc3QgKSB7XHJcblx0XHRcdFx0XHRkc3QuZmlsdGVyKCBcIjp2aXNpYmxlXCIgKTtcclxuXHRcdFx0XHRcdGlmICggZHN0Lmxlbmd0aCA9PT0gMCApIHtcclxuXHRcdFx0XHRcdFx0ZHN0ID0gbnVsbDtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHQvLyBJZiBhbiBlbGVtZW50IHdhcyBmb3VuZCwgY2VudGVyIG92ZXIgaXRcclxuXHRcdGlmICggZHN0ICkge1xyXG5cdFx0XHRvZmZzZXQgPSBkc3Qub2Zmc2V0KCk7XHJcblx0XHRcdHggPSBvZmZzZXQubGVmdCArIGRzdC5vdXRlcldpZHRoKCkgLyAyO1xyXG5cdFx0XHR5ID0gb2Zmc2V0LnRvcCArIGRzdC5vdXRlckhlaWdodCgpIC8gMjtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBNYWtlIHN1cmUgeCBhbmQgeSBhcmUgdmFsaWQgbnVtYmVycyAtIGNlbnRlciBvdmVyIHRoZSB3aW5kb3dcclxuXHRcdGlmICggJC50eXBlKCB4ICkgIT09IFwibnVtYmVyXCIgfHwgaXNOYU4oIHggKSApIHtcclxuXHRcdFx0eCA9IHdpbmRvd0Nvb3JkaW5hdGVzLmN4IC8gMiArIHdpbmRvd0Nvb3JkaW5hdGVzLng7XHJcblx0XHR9XHJcblx0XHRpZiAoICQudHlwZSggeSApICE9PSBcIm51bWJlclwiIHx8IGlzTmFOKCB5ICkgKSB7XHJcblx0XHRcdHkgPSB3aW5kb3dDb29yZGluYXRlcy5jeSAvIDIgKyB3aW5kb3dDb29yZGluYXRlcy55O1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiB7IHg6IHgsIHk6IHkgfTtcclxuXHR9LFxyXG5cclxuXHRfcmVwb3NpdGlvbjogZnVuY3Rpb24oIG9wZW5PcHRpb25zICkge1xyXG5cdFx0Ly8gV2Ugb25seSBjYXJlIGFib3V0IHBvc2l0aW9uLXJlbGF0ZWQgcGFyYW1ldGVycyBmb3IgcmVwb3NpdGlvbmluZ1xyXG5cdFx0b3Blbk9wdGlvbnMgPSB7XHJcblx0XHRcdHg6IG9wZW5PcHRpb25zLngsXHJcblx0XHRcdHk6IG9wZW5PcHRpb25zLnksXHJcblx0XHRcdHBvc2l0aW9uVG86IG9wZW5PcHRpb25zLnBvc2l0aW9uVG9cclxuXHRcdH07XHJcblx0XHR0aGlzLl90cmlnZ2VyKCBcImJlZm9yZXBvc2l0aW9uXCIsIHVuZGVmaW5lZCwgb3Blbk9wdGlvbnMgKTtcclxuXHRcdHRoaXMuX3VpLmNvbnRhaW5lci5vZmZzZXQoIHRoaXMuX3BsYWNlbWVudENvb3JkcyggdGhpcy5fZGVzaXJlZENvb3Jkcyggb3Blbk9wdGlvbnMgKSApICk7XHJcblx0fSxcclxuXHJcblx0cmVwb3NpdGlvbjogZnVuY3Rpb24oIG9wZW5PcHRpb25zICkge1xyXG5cdFx0aWYgKCB0aGlzLl9pc09wZW4gKSB7XHJcblx0XHRcdHRoaXMuX3JlcG9zaXRpb24oIG9wZW5PcHRpb25zICk7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X3NhZmVseUJsdXI6IGZ1bmN0aW9uKCBjdXJyZW50RWxlbWVudCApe1xyXG5cdFx0aWYgKCBjdXJyZW50RWxlbWVudCAhPT0gdGhpcy53aW5kb3dbIDAgXSAmJlxyXG5cdFx0XHRjdXJyZW50RWxlbWVudC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpICE9PSBcImJvZHlcIiApIHtcclxuXHRcdFx0XHQkKCBjdXJyZW50RWxlbWVudCApLmJsdXIoKTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfb3BlblByZXJlcXVpc2l0ZXNDb21wbGV0ZTogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgaWQgPSB0aGlzLmVsZW1lbnQuYXR0ciggXCJpZFwiICksXHJcblx0XHRcdGZpcnN0Rm9jdXMgPSB0aGlzLl91aS5jb250YWluZXIuZmluZCggXCI6Zm9jdXNhYmxlXCIgKS5maXJzdCgpO1xyXG5cclxuXHRcdHRoaXMuX3VpLmNvbnRhaW5lci5hZGRDbGFzcyggXCJ1aS1wb3B1cC1hY3RpdmVcIiApO1xyXG5cdFx0dGhpcy5faXNPcGVuID0gdHJ1ZTtcclxuXHRcdHRoaXMuX3Jlc2l6ZVNjcmVlbigpO1xyXG5cclxuXHRcdC8vIENoZWNrIHRvIHNlZSBpZiBjdXJyRWxlbWVudCBpcyBub3QgYSBjaGlsZCBvZiB0aGUgY29udGFpbmVyLiAgSWYgaXQncyBub3QsIGJsdXJcclxuXHRcdGlmICggISQuY29udGFpbnMoIHRoaXMuX3VpLmNvbnRhaW5lclsgMCBdLCB0aGlzLmRvY3VtZW50WyAwIF0uYWN0aXZlRWxlbWVudCApICkge1xyXG5cdFx0XHR0aGlzLl9zYWZlbHlCbHVyKCB0aGlzLmRvY3VtZW50WyAwIF0uYWN0aXZlRWxlbWVudCApO1xyXG5cdFx0fVxyXG5cdFx0aWYgKCBmaXJzdEZvY3VzLmxlbmd0aCA+IDAgKSB7XHJcblx0XHRcdHRoaXMuX3VpLmZvY3VzRWxlbWVudCA9IGZpcnN0Rm9jdXM7XHJcblx0XHR9XHJcblx0XHR0aGlzLl9pZ25vcmVSZXNpemVFdmVudHMoKTtcclxuXHRcdGlmICggaWQgKSB7XHJcblx0XHRcdHRoaXMuZG9jdW1lbnQuZmluZCggXCJbYXJpYS1oYXNwb3B1cD0ndHJ1ZSddW2FyaWEtb3ducz0nXCIgKyAgaWQgKyBcIiddXCIgKS5hdHRyKCBcImFyaWEtZXhwYW5kZWRcIiwgdHJ1ZSApO1xyXG5cdFx0fVxyXG5cdFx0dGhpcy5fdHJpZ2dlciggXCJhZnRlcm9wZW5cIiApO1xyXG5cdH0sXHJcblxyXG5cdF9vcGVuOiBmdW5jdGlvbiggb3B0aW9ucyApIHtcclxuXHRcdHZhciBvcGVuT3B0aW9ucyA9ICQuZXh0ZW5kKCB7fSwgdGhpcy5vcHRpb25zLCBvcHRpb25zICksXHJcblx0XHRcdC8vIFRPRE8gbW92ZSBibGFja2xpc3QgdG8gcHJpdmF0ZSBtZXRob2RcclxuXHRcdFx0YW5kcm9pZEJsYWNrbGlzdCA9ICggZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0dmFyIHVhID0gbmF2aWdhdG9yLnVzZXJBZ2VudCxcclxuXHRcdFx0XHRcdC8vIFJlbmRlcmluZyBlbmdpbmUgaXMgV2Via2l0LCBhbmQgY2FwdHVyZSBtYWpvciB2ZXJzaW9uXHJcblx0XHRcdFx0XHR3a21hdGNoID0gdWEubWF0Y2goIC9BcHBsZVdlYktpdFxcLyhbMC05XFwuXSspLyApLFxyXG5cdFx0XHRcdFx0d2t2ZXJzaW9uID0gISF3a21hdGNoICYmIHdrbWF0Y2hbIDEgXSxcclxuXHRcdFx0XHRcdGFuZHJvaWRtYXRjaCA9IHVhLm1hdGNoKCAvQW5kcm9pZCAoXFxkKyg/OlxcLlxcZCspKS8gKSxcclxuXHRcdFx0XHRcdGFuZHZlcnNpb24gPSAhIWFuZHJvaWRtYXRjaCAmJiBhbmRyb2lkbWF0Y2hbIDEgXSxcclxuXHRcdFx0XHRcdGNocm9tZW1hdGNoID0gdWEuaW5kZXhPZiggXCJDaHJvbWVcIiApID4gLTE7XHJcblxyXG5cdFx0XHRcdC8vIFBsYXRmb3JtIGlzIEFuZHJvaWQsIFdlYktpdCB2ZXJzaW9uIGlzIGdyZWF0ZXIgdGhhbiA1MzQuMTMgKCBBbmRyb2lkIDMuMi4xICkgYW5kIG5vdCBDaHJvbWUuXHJcblx0XHRcdFx0aWYgKCBhbmRyb2lkbWF0Y2ggIT09IG51bGwgJiYgYW5kdmVyc2lvbiA9PT0gXCI0LjBcIiAmJiB3a3ZlcnNpb24gJiYgd2t2ZXJzaW9uID4gNTM0LjEzICYmICFjaHJvbWVtYXRjaCApIHtcclxuXHRcdFx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdH0oKSk7XHJcblxyXG5cdFx0Ly8gQ291bnQgZG93biB0byB0cmlnZ2VyaW5nIFwicG9wdXBhZnRlcm9wZW5cIiAtIHdlIGhhdmUgdHdvIHByZXJlcXVpc2l0ZXM6XHJcblx0XHQvLyAxLiBUaGUgcG9wdXAgd2luZG93IGFuaW1hdGlvbiBjb21wbGV0ZXMgKGNvbnRhaW5lcigpKVxyXG5cdFx0Ly8gMi4gVGhlIHNjcmVlbiBvcGFjaXR5IGFuaW1hdGlvbiBjb21wbGV0ZXMgKHNjcmVlbigpKVxyXG5cdFx0dGhpcy5fY3JlYXRlUHJlcmVxdWlzaXRlcyhcclxuXHRcdFx0JC5ub29wLFxyXG5cdFx0XHQkLm5vb3AsXHJcblx0XHRcdCQucHJveHkoIHRoaXMsIFwiX29wZW5QcmVyZXF1aXNpdGVzQ29tcGxldGVcIiApICk7XHJcblxyXG5cdFx0dGhpcy5fY3VycmVudFRyYW5zaXRpb24gPSBvcGVuT3B0aW9ucy50cmFuc2l0aW9uO1xyXG5cdFx0dGhpcy5fYXBwbHlUcmFuc2l0aW9uKCBvcGVuT3B0aW9ucy50cmFuc2l0aW9uICk7XHJcblxyXG5cdFx0dGhpcy5fdWkuc2NyZWVuLnJlbW92ZUNsYXNzKCBcInVpLXNjcmVlbi1oaWRkZW5cIiApO1xyXG5cdFx0dGhpcy5fdWkuY29udGFpbmVyLnJlbW92ZUNsYXNzKCBcInVpLXBvcHVwLXRydW5jYXRlXCIgKTtcclxuXHJcblx0XHQvLyBHaXZlIGFwcGxpY2F0aW9ucyBhIGNoYW5jZSB0byBtb2RpZnkgdGhlIGNvbnRlbnRzIG9mIHRoZSBjb250YWluZXIgYmVmb3JlIGl0IGFwcGVhcnNcclxuXHRcdHRoaXMuX3JlcG9zaXRpb24oIG9wZW5PcHRpb25zICk7XHJcblxyXG5cdFx0dGhpcy5fdWkuY29udGFpbmVyLnJlbW92ZUNsYXNzKCBcInVpLXBvcHVwLWhpZGRlblwiICk7XHJcblxyXG5cdFx0aWYgKCB0aGlzLm9wdGlvbnMub3ZlcmxheVRoZW1lICYmIGFuZHJvaWRCbGFja2xpc3QgKSB7XHJcblx0XHRcdC8qIFRPRE86IFRoZSBuYXRpdmUgYnJvd3NlciBvbiBBbmRyb2lkIDQuMC5YIChcIkljZSBDcmVhbSBTYW5kd2ljaFwiKSBzdWZmZXJzIGZyb20gYW4gaXNzdWUgd2hlcmUgdGhlIHBvcHVwIG92ZXJsYXkgYXBwZWFycyB0byBiZSB6LWluZGV4ZWQgYWJvdmUgdGhlIHBvcHVwIGl0c2VsZiB3aGVuIGNlcnRhaW4gb3RoZXIgc3R5bGVzIGV4aXN0IG9uIHRoZSBzYW1lIHBhZ2UgLS0gbmFtZWx5LCBhbnkgZWxlbWVudCBzZXQgdG8gYHBvc2l0aW9uOiBmaXhlZGAgYW5kIGNlcnRhaW4gdHlwZXMgb2YgaW5wdXQuIFRoZXNlIGlzc3VlcyBhcmUgcmVtaW5pc2NlbnQgb2YgcHJldmlvdXNseSB1bmNvdmVyZWQgYnVncyBpbiBvbGRlciB2ZXJzaW9ucyBvZiBBbmRyb2lkJ3MgbmF0aXZlIGJyb3dzZXI6IGh0dHBzOi8vZ2l0aHViLmNvbS9zY290dGplaGwvRGV2aWNlLUJ1Z3MvaXNzdWVzLzNcclxuXHRcdFx0VGhpcyBmaXggY2xvc2VzIHRoZSBmb2xsb3dpbmcgYnVncyAoIEkgdXNlIFwiY2xvc2VzXCIgd2l0aCByZWx1Y3RhbmNlLCBhbmQgc3RyZXNzIHRoYXQgdGhpcyBpc3N1ZSBzaG91bGQgYmUgcmV2aXNpdGVkIGFzIHNvb24gYXMgcG9zc2libGUgKTpcclxuXHRcdFx0aHR0cHM6Ly9naXRodWIuY29tL2pxdWVyeS9qcXVlcnktbW9iaWxlL2lzc3Vlcy80ODE2XHJcblx0XHRcdGh0dHBzOi8vZ2l0aHViLmNvbS9qcXVlcnkvanF1ZXJ5LW1vYmlsZS9pc3N1ZXMvNDg0NFxyXG5cdFx0XHRodHRwczovL2dpdGh1Yi5jb20vanF1ZXJ5L2pxdWVyeS1tb2JpbGUvaXNzdWVzLzQ4NzRcclxuXHRcdFx0Ki9cclxuXHJcblx0XHRcdC8vIFRPRE8gc29ydCBvdXQgd2h5IHRoaXMuX3BhZ2UgaXNuJ3Qgd29ya2luZ1xyXG5cdFx0XHR0aGlzLmVsZW1lbnQuY2xvc2VzdCggXCIudWktcGFnZVwiICkuYWRkQ2xhc3MoIFwidWktcG9wdXAtb3BlblwiICk7XHJcblx0XHR9XHJcblx0XHR0aGlzLl9hbmltYXRlKHtcclxuXHRcdFx0YWRkaXRpb25hbENvbmRpdGlvbjogdHJ1ZSxcclxuXHRcdFx0dHJhbnNpdGlvbjogb3Blbk9wdGlvbnMudHJhbnNpdGlvbixcclxuXHRcdFx0Y2xhc3NUb1JlbW92ZTogXCJcIixcclxuXHRcdFx0c2NyZWVuQ2xhc3NUb0FkZDogXCJpblwiLFxyXG5cdFx0XHRjb250YWluZXJDbGFzc1RvQWRkOiBcImluXCIsXHJcblx0XHRcdGFwcGx5VHJhbnNpdGlvbjogZmFsc2UsXHJcblx0XHRcdHByZXJlcXVpc2l0ZXM6IHRoaXMuX3ByZXJlcXVpc2l0ZXNcclxuXHRcdH0pO1xyXG5cdH0sXHJcblxyXG5cdF9jbG9zZVByZXJlcXVpc2l0ZVNjcmVlbjogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLl91aS5zY3JlZW5cclxuXHRcdFx0LnJlbW92ZUNsYXNzKCBcIm91dFwiIClcclxuXHRcdFx0LmFkZENsYXNzKCBcInVpLXNjcmVlbi1oaWRkZW5cIiApO1xyXG5cdH0sXHJcblxyXG5cdF9jbG9zZVByZXJlcXVpc2l0ZUNvbnRhaW5lcjogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLl91aS5jb250YWluZXJcclxuXHRcdFx0LnJlbW92ZUNsYXNzKCBcInJldmVyc2Ugb3V0XCIgKVxyXG5cdFx0XHQuYWRkQ2xhc3MoIFwidWktcG9wdXAtaGlkZGVuIHVpLXBvcHVwLXRydW5jYXRlXCIgKVxyXG5cdFx0XHQucmVtb3ZlQXR0ciggXCJzdHlsZVwiICk7XHJcblx0fSxcclxuXHJcblx0X2Nsb3NlUHJlcmVxdWlzaXRlc0RvbmU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIGNvbnRhaW5lciA9IHRoaXMuX3VpLmNvbnRhaW5lcixcclxuXHRcdFx0aWQgPSB0aGlzLmVsZW1lbnQuYXR0ciggXCJpZFwiICk7XHJcblxyXG5cdFx0Ly8gcmVtb3ZlIHRoZSBnbG9iYWwgbXV0ZXggZm9yIHBvcHVwc1xyXG5cdFx0JC5tb2JpbGUucG9wdXAuYWN0aXZlID0gdW5kZWZpbmVkO1xyXG5cclxuXHRcdC8vIEJsdXIgZWxlbWVudHMgaW5zaWRlIHRoZSBjb250YWluZXIsIGluY2x1ZGluZyB0aGUgY29udGFpbmVyXHJcblx0XHQkKCBcIjpmb2N1c1wiLCBjb250YWluZXJbIDAgXSApLmFkZCggY29udGFpbmVyWyAwIF0gKS5ibHVyKCk7XHJcblxyXG5cdFx0aWYgKCBpZCApIHtcclxuXHRcdFx0dGhpcy5kb2N1bWVudC5maW5kKCBcIlthcmlhLWhhc3BvcHVwPSd0cnVlJ11bYXJpYS1vd25zPSdcIiArICBpZCArIFwiJ11cIiApLmF0dHIoIFwiYXJpYS1leHBhbmRlZFwiLCBmYWxzZSApO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIGFsZXJ0IHVzZXJzIHRoYXQgdGhlIHBvcHVwIGlzIGNsb3NlZFxyXG5cdFx0dGhpcy5fdHJpZ2dlciggXCJhZnRlcmNsb3NlXCIgKTtcclxuXHR9LFxyXG5cclxuXHRfY2xvc2U6IGZ1bmN0aW9uKCBpbW1lZGlhdGUgKSB7XHJcblx0XHR0aGlzLl91aS5jb250YWluZXIucmVtb3ZlQ2xhc3MoIFwidWktcG9wdXAtYWN0aXZlXCIgKTtcclxuXHRcdHRoaXMuX3BhZ2UucmVtb3ZlQ2xhc3MoIFwidWktcG9wdXAtb3BlblwiICk7XHJcblxyXG5cdFx0dGhpcy5faXNPcGVuID0gZmFsc2U7XHJcblxyXG5cdFx0Ly8gQ291bnQgZG93biB0byB0cmlnZ2VyaW5nIFwicG9wdXBhZnRlcmNsb3NlXCIgLSB3ZSBoYXZlIHR3byBwcmVyZXF1aXNpdGVzOlxyXG5cdFx0Ly8gMS4gVGhlIHBvcHVwIHdpbmRvdyByZXZlcnNlIGFuaW1hdGlvbiBjb21wbGV0ZXMgKGNvbnRhaW5lcigpKVxyXG5cdFx0Ly8gMi4gVGhlIHNjcmVlbiBvcGFjaXR5IGFuaW1hdGlvbiBjb21wbGV0ZXMgKHNjcmVlbigpKVxyXG5cdFx0dGhpcy5fY3JlYXRlUHJlcmVxdWlzaXRlcyhcclxuXHRcdFx0JC5wcm94eSggdGhpcywgXCJfY2xvc2VQcmVyZXF1aXNpdGVTY3JlZW5cIiApLFxyXG5cdFx0XHQkLnByb3h5KCB0aGlzLCBcIl9jbG9zZVByZXJlcXVpc2l0ZUNvbnRhaW5lclwiICksXHJcblx0XHRcdCQucHJveHkoIHRoaXMsIFwiX2Nsb3NlUHJlcmVxdWlzaXRlc0RvbmVcIiApICk7XHJcblxyXG5cdFx0dGhpcy5fYW5pbWF0ZSgge1xyXG5cdFx0XHRhZGRpdGlvbmFsQ29uZGl0aW9uOiB0aGlzLl91aS5zY3JlZW4uaGFzQ2xhc3MoIFwiaW5cIiApLFxyXG5cdFx0XHR0cmFuc2l0aW9uOiAoIGltbWVkaWF0ZSA/IFwibm9uZVwiIDogKCB0aGlzLl9jdXJyZW50VHJhbnNpdGlvbiApICksXHJcblx0XHRcdGNsYXNzVG9SZW1vdmU6IFwiaW5cIixcclxuXHRcdFx0c2NyZWVuQ2xhc3NUb0FkZDogXCJvdXRcIixcclxuXHRcdFx0Y29udGFpbmVyQ2xhc3NUb0FkZDogXCJyZXZlcnNlIG91dFwiLFxyXG5cdFx0XHRhcHBseVRyYW5zaXRpb246IHRydWUsXHJcblx0XHRcdHByZXJlcXVpc2l0ZXM6IHRoaXMuX3ByZXJlcXVpc2l0ZXNcclxuXHRcdH0pO1xyXG5cdH0sXHJcblxyXG5cdF91bmVuaGFuY2U6IGZ1bmN0aW9uKCkge1xyXG5cdFx0aWYgKCB0aGlzLm9wdGlvbnMuZW5oYW5jZWQgKSB7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBQdXQgdGhlIGVsZW1lbnQgYmFjayB0byB3aGVyZSB0aGUgcGxhY2Vob2xkZXIgd2FzIGFuZCByZW1vdmUgdGhlIFwidWktcG9wdXBcIiBjbGFzc1xyXG5cdFx0dGhpcy5fc2V0T3B0aW9ucyggeyB0aGVtZTogJC5tb2JpbGUucG9wdXAucHJvdG90eXBlLm9wdGlvbnMudGhlbWUgfSApO1xyXG5cdFx0dGhpcy5lbGVtZW50XHJcblx0XHRcdC8vIENhbm5vdCBkaXJlY3RseSBpbnNlcnRBZnRlcigpIC0gd2UgbmVlZCB0byBkZXRhY2goKSBmaXJzdCwgYmVjYXVzZVxyXG5cdFx0XHQvLyBpbnNlcnRBZnRlcigpIHdpbGwgZG8gbm90aGluZyBpZiB0aGUgcGF5bG9hZCBkaXYgd2FzIG5vdCBhdHRhY2hlZFxyXG5cdFx0XHQvLyB0byB0aGUgRE9NIGF0IHRoZSB0aW1lIHRoZSB3aWRnZXQgd2FzIGNyZWF0ZWQsIGFuZCBzbyB0aGUgcGF5bG9hZFxyXG5cdFx0XHQvLyB3aWxsIHJlbWFpbiBpbnNpZGUgdGhlIGNvbnRhaW5lciBldmVuIGFmdGVyIHdlIGNhbGwgaW5zZXJ0QWZ0ZXIoKS5cclxuXHRcdFx0Ly8gSWYgdGhhdCBoYXBwZW5zIGFuZCB3ZSByZW1vdmUgdGhlIGNvbnRhaW5lciBhIGZldyBsaW5lcyBiZWxvdywgd2VcclxuXHRcdFx0Ly8gd2lsbCBjYXVzZSBhbiBpbmZpbml0ZSByZWN1cnNpb24gLSAjNTI0NFxyXG5cdFx0XHQuZGV0YWNoKClcclxuXHRcdFx0Lmluc2VydEFmdGVyKCB0aGlzLl91aS5wbGFjZWhvbGRlciApXHJcblx0XHRcdC5yZW1vdmVDbGFzcyggXCJ1aS1wb3B1cCB1aS1vdmVybGF5LXNoYWRvdyB1aS1jb3JuZXItYWxsIHVpLWJvZHktaW5oZXJpdFwiICk7XHJcblx0XHR0aGlzLl91aS5zY3JlZW4ucmVtb3ZlKCk7XHJcblx0XHR0aGlzLl91aS5jb250YWluZXIucmVtb3ZlKCk7XHJcblx0XHR0aGlzLl91aS5wbGFjZWhvbGRlci5yZW1vdmUoKTtcclxuXHR9LFxyXG5cclxuXHRfZGVzdHJveTogZnVuY3Rpb24oKSB7XHJcblx0XHRpZiAoICQubW9iaWxlLnBvcHVwLmFjdGl2ZSA9PT0gdGhpcyApIHtcclxuXHRcdFx0dGhpcy5lbGVtZW50Lm9uZSggXCJwb3B1cGFmdGVyY2xvc2VcIiwgJC5wcm94eSggdGhpcywgXCJfdW5lbmhhbmNlXCIgKSApO1xyXG5cdFx0XHR0aGlzLmNsb3NlKCk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHR0aGlzLl91bmVuaGFuY2UoKTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHR9LFxyXG5cclxuXHRfY2xvc2VQb3B1cDogZnVuY3Rpb24oIHRoZUV2ZW50LCBkYXRhICkge1xyXG5cdFx0dmFyIHBhcnNlZERzdCwgdG9VcmwsXHJcblx0XHRcdGN1cnJlbnRPcHRpb25zID0gdGhpcy5vcHRpb25zLFxyXG5cdFx0XHRpbW1lZGlhdGUgPSBmYWxzZTtcclxuXHJcblx0XHRpZiAoICggdGhlRXZlbnQgJiYgdGhlRXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkgKSB8fCAkLm1vYmlsZS5wb3B1cC5hY3RpdmUgIT09IHRoaXMgKSB7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHQvLyByZXN0b3JlIGxvY2F0aW9uIG9uIHNjcmVlblxyXG5cdFx0d2luZG93LnNjcm9sbFRvKCAwLCB0aGlzLl9zY3JvbGxUb3AgKTtcclxuXHJcblx0XHRpZiAoIHRoZUV2ZW50ICYmIHRoZUV2ZW50LnR5cGUgPT09IFwicGFnZWJlZm9yZWNoYW5nZVwiICYmIGRhdGEgKSB7XHJcblx0XHRcdC8vIERldGVybWluZSB3aGV0aGVyIHdlIG5lZWQgdG8gcmFwaWQtY2xvc2UgdGhlIHBvcHVwLCBvciB3aGV0aGVyIHdlIGNhblxyXG5cdFx0XHQvLyB0YWtlIHRoZSB0aW1lIHRvIHJ1biB0aGUgY2xvc2luZyB0cmFuc2l0aW9uXHJcblx0XHRcdGlmICggdHlwZW9mIGRhdGEudG9QYWdlID09PSBcInN0cmluZ1wiICkge1xyXG5cdFx0XHRcdHBhcnNlZERzdCA9IGRhdGEudG9QYWdlO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdHBhcnNlZERzdCA9IGRhdGEudG9QYWdlLmpxbURhdGEoIFwidXJsXCIgKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRwYXJzZWREc3QgPSAkLm1vYmlsZS5wYXRoLnBhcnNlVXJsKCBwYXJzZWREc3QgKTtcclxuXHRcdFx0dG9VcmwgPSBwYXJzZWREc3QucGF0aG5hbWUgKyBwYXJzZWREc3Quc2VhcmNoICsgcGFyc2VkRHN0Lmhhc2g7XHJcblxyXG5cdFx0XHRpZiAoIHRoaXMuX215VXJsICE9PSAkLm1vYmlsZS5wYXRoLm1ha2VVcmxBYnNvbHV0ZSggdG9VcmwgKSApIHtcclxuXHRcdFx0XHQvLyBHb2luZyB0byBhIGRpZmZlcmVudCBwYWdlIC0gY2xvc2UgaW1tZWRpYXRlbHlcclxuXHRcdFx0XHRpbW1lZGlhdGUgPSB0cnVlO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdHRoZUV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHQvLyByZW1vdmUgbmF2IGJpbmRpbmdzXHJcblx0XHR0aGlzLndpbmRvdy5vZmYoIGN1cnJlbnRPcHRpb25zLmNsb3NlRXZlbnRzICk7XHJcblx0XHQvLyB1bmJpbmQgY2xpY2sgaGFuZGxlcnMgYWRkZWQgd2hlbiBoaXN0b3J5IGlzIGRpc2FibGVkXHJcblx0XHR0aGlzLmVsZW1lbnQudW5kZWxlZ2F0ZSggY3VycmVudE9wdGlvbnMuY2xvc2VMaW5rU2VsZWN0b3IsIGN1cnJlbnRPcHRpb25zLmNsb3NlTGlua0V2ZW50cyApO1xyXG5cclxuXHRcdHRoaXMuX2Nsb3NlKCBpbW1lZGlhdGUgKTtcclxuXHR9LFxyXG5cclxuXHQvLyBhbnkgbmF2aWdhdGlvbiBldmVudCBhZnRlciBhIHBvcHVwIGlzIG9wZW5lZCBzaG91bGQgY2xvc2UgdGhlIHBvcHVwXHJcblx0Ly8gTk9URSB0aGUgcGFnZWJlZm9yZWNoYW5nZSBpcyBib3VuZCB0byBjYXRjaCBuYXZpZ2F0aW9uIGV2ZW50cyB0aGF0IGRvbid0XHJcblx0Ly8gICAgICBhbHRlciB0aGUgdXJsIChlZywgZGlhbG9ncyBmcm9tIHBvcHVwcylcclxuXHRfYmluZENvbnRhaW5lckNsb3NlOiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMud2luZG93XHJcblx0XHRcdC5vbiggdGhpcy5vcHRpb25zLmNsb3NlRXZlbnRzLCAkLnByb3h5KCB0aGlzLCBcIl9jbG9zZVBvcHVwXCIgKSApO1xyXG5cdH0sXHJcblxyXG5cdHdpZGdldDogZnVuY3Rpb24oKSB7XHJcblx0XHRyZXR1cm4gdGhpcy5fdWkuY29udGFpbmVyO1xyXG5cdH0sXHJcblxyXG5cdC8vIFRPRE8gbm8gY2xlYXIgZGVsaW5pYXRpb24gb2Ygd2hhdCBzaG91bGQgYmUgaGVyZSBhbmRcclxuXHQvLyB3aGF0IHNob3VsZCBiZSBpbiBfb3Blbi4gU2VlbXMgdG8gYmUgXCJ2aXN1YWxcIiB2cyBcImhpc3RvcnlcIiBmb3Igbm93XHJcblx0b3BlbjogZnVuY3Rpb24oIG9wdGlvbnMgKSB7XHJcblx0XHR2YXIgdXJsLCBoYXNoa2V5LCBhY3RpdmVQYWdlLCBjdXJyZW50SXNEaWFsb2csIGhhc0hhc2gsIHVybEhpc3RvcnksXHJcblx0XHRcdHNlbGYgPSB0aGlzLFxyXG5cdFx0XHRjdXJyZW50T3B0aW9ucyA9IHRoaXMub3B0aW9ucztcclxuXHJcblx0XHQvLyBtYWtlIHN1cmUgb3BlbiBpcyBpZGVtcG90ZW50XHJcblx0XHRpZiAoICQubW9iaWxlLnBvcHVwLmFjdGl2ZSB8fCBjdXJyZW50T3B0aW9ucy5kaXNhYmxlZCApIHtcclxuXHRcdFx0cmV0dXJuIHRoaXM7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gc2V0IHRoZSBnbG9iYWwgcG9wdXAgbXV0ZXhcclxuXHRcdCQubW9iaWxlLnBvcHVwLmFjdGl2ZSA9IHRoaXM7XHJcblx0XHR0aGlzLl9zY3JvbGxUb3AgPSB0aGlzLndpbmRvdy5zY3JvbGxUb3AoKTtcclxuXHJcblx0XHQvLyBpZiBoaXN0b3J5IGFsdGVyYXRpb24gaXMgZGlzYWJsZWQgY2xvc2Ugb24gbmF2aWdhdGUgZXZlbnRzXHJcblx0XHQvLyBhbmQgbGVhdmUgdGhlIHVybCBhcyBpc1xyXG5cdFx0aWYgKCAhKCBjdXJyZW50T3B0aW9ucy5oaXN0b3J5ICkgKSB7XHJcblx0XHRcdHNlbGYuX29wZW4oIG9wdGlvbnMgKTtcclxuXHRcdFx0c2VsZi5fYmluZENvbnRhaW5lckNsb3NlKCk7XHJcblxyXG5cdFx0XHQvLyBXaGVuIGhpc3RveSBpcyBkaXNhYmxlZCB3ZSBoYXZlIHRvIGdyYWIgdGhlIGRhdGEtcmVsXHJcblx0XHRcdC8vIGJhY2sgbGluayBjbGlja3Mgc28gd2UgY2FuIGNsb3NlIHRoZSBwb3B1cCBpbnN0ZWFkIG9mXHJcblx0XHRcdC8vIHJlbHlpbmcgb24gaGlzdG9yeSB0byBkbyBpdCBmb3IgdXNcclxuXHRcdFx0c2VsZi5lbGVtZW50XHJcblx0XHRcdFx0LmRlbGVnYXRlKCBjdXJyZW50T3B0aW9ucy5jbG9zZUxpbmtTZWxlY3RvciwgY3VycmVudE9wdGlvbnMuY2xvc2VMaW5rRXZlbnRzLCBmdW5jdGlvbiggdGhlRXZlbnQgKSB7XHJcblx0XHRcdFx0XHRzZWxmLmNsb3NlKCk7XHJcblx0XHRcdFx0XHR0aGVFdmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHRcdH0pO1xyXG5cclxuXHRcdFx0cmV0dXJuIHRoaXM7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gY2FjaGUgc29tZSB2YWx1ZXMgZm9yIG1pbi9yZWFkYWJpbGl0eVxyXG5cdFx0dXJsSGlzdG9yeSA9ICQubW9iaWxlLm5hdmlnYXRlLmhpc3Rvcnk7XHJcblx0XHRoYXNoa2V5ID0gJC5tb2JpbGUuZGlhbG9nSGFzaEtleTtcclxuXHRcdGFjdGl2ZVBhZ2UgPSAkLm1vYmlsZS5hY3RpdmVQYWdlO1xyXG5cdFx0Y3VycmVudElzRGlhbG9nID0gKCBhY3RpdmVQYWdlID8gYWN0aXZlUGFnZS5oYXNDbGFzcyggXCJ1aS1kaWFsb2dcIiApIDogZmFsc2UgKTtcclxuXHRcdHRoaXMuX215VXJsID0gdXJsID0gdXJsSGlzdG9yeS5nZXRBY3RpdmUoKS51cmw7XHJcblx0XHRoYXNIYXNoID0gKCB1cmwuaW5kZXhPZiggaGFzaGtleSApID4gLTEgKSAmJiAhY3VycmVudElzRGlhbG9nICYmICggdXJsSGlzdG9yeS5hY3RpdmVJbmRleCA+IDAgKTtcclxuXHJcblx0XHRpZiAoIGhhc0hhc2ggKSB7XHJcblx0XHRcdHNlbGYuX29wZW4oIG9wdGlvbnMgKTtcclxuXHRcdFx0c2VsZi5fYmluZENvbnRhaW5lckNsb3NlKCk7XHJcblx0XHRcdHJldHVybiB0aGlzO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIGlmIHRoZSBjdXJyZW50IHVybCBoYXMgbm8gZGlhbG9nIGhhc2gga2V5IHByb2NlZWQgYXMgbm9ybWFsXHJcblx0XHQvLyBvdGhlcndpc2UsIGlmIHRoZSBwYWdlIGlzIGEgZGlhbG9nIHNpbXBseSB0YWNrIG9uIHRoZSBoYXNoIGtleVxyXG5cdFx0aWYgKCB1cmwuaW5kZXhPZiggaGFzaGtleSApID09PSAtMSAmJiAhY3VycmVudElzRGlhbG9nICkge1xyXG5cdFx0XHR1cmwgPSB1cmwgKyAodXJsLmluZGV4T2YoIFwiI1wiICkgPiAtMSA/IGhhc2hrZXkgOiBcIiNcIiArIGhhc2hrZXkpO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0dXJsID0gJC5tb2JpbGUucGF0aC5wYXJzZUxvY2F0aW9uKCkuaGFzaCArIGhhc2hrZXk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gc3dhbGxvdyB0aGUgdGhlIGluaXRpYWwgbmF2aWdhdGlvbiBldmVudCwgYW5kIGJpbmQgZm9yIHRoZSBuZXh0XHJcblx0XHR0aGlzLndpbmRvdy5vbmUoIFwiYmVmb3JlbmF2aWdhdGVcIiwgZnVuY3Rpb24oIHRoZUV2ZW50ICkge1xyXG5cdFx0XHR0aGVFdmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHRzZWxmLl9vcGVuKCBvcHRpb25zICk7XHJcblx0XHRcdHNlbGYuX2JpbmRDb250YWluZXJDbG9zZSgpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0dGhpcy51cmxBbHRlcmVkID0gdHJ1ZTtcclxuXHRcdCQubW9iaWxlLm5hdmlnYXRlKCB1cmwsIHsgcm9sZTogXCJkaWFsb2dcIiB9ICk7XHJcblxyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblx0fSxcclxuXHJcblx0Y2xvc2U6IGZ1bmN0aW9uKCkge1xyXG5cdFx0Ly8gbWFrZSBzdXJlIGNsb3NlIGlzIGlkZW1wb3RlbnRcclxuXHRcdGlmICggJC5tb2JpbGUucG9wdXAuYWN0aXZlICE9PSB0aGlzICkge1xyXG5cdFx0XHRyZXR1cm4gdGhpcztcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLl9zY3JvbGxUb3AgPSB0aGlzLndpbmRvdy5zY3JvbGxUb3AoKTtcclxuXHJcblx0XHRpZiAoIHRoaXMub3B0aW9ucy5oaXN0b3J5ICYmIHRoaXMudXJsQWx0ZXJlZCApIHtcclxuXHRcdFx0JC5tb2JpbGUuYmFjaygpO1xyXG5cdFx0XHR0aGlzLnVybEFsdGVyZWQgPSBmYWxzZTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdC8vIHNpbXVsYXRlIHRoZSBuYXYgYmluZGluZ3MgaGF2aW5nIGZpcmVkXHJcblx0XHRcdHRoaXMuX2Nsb3NlUG9wdXAoKTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHR9XHJcbn0pO1xyXG5cclxuLy8gVE9ETyB0aGlzIGNhbiBiZSBtb3ZlZCBpbnNpZGUgdGhlIHdpZGdldFxyXG4kLm1vYmlsZS5wb3B1cC5oYW5kbGVMaW5rID0gZnVuY3Rpb24oICRsaW5rICkge1xyXG5cdHZhciBvZmZzZXQsXHJcblx0XHRwYXRoID0gJC5tb2JpbGUucGF0aCxcclxuXHJcblx0XHQvLyBOT1RFIG1ha2Ugc3VyZSB0byBnZXQgb25seSB0aGUgaGFzaCBmcm9tIHRoZSBocmVmIGJlY2F1c2UgaWU3ICh3cDcpXHJcblx0XHQvLyAgICAgIHJldHVybnMgdGhlIGFic29sdXRlIGhyZWYgaW4gdGhpcyBjYXNlIHJ1aW5pbmcgdGhlIGVsZW1lbnQgc2VsZWN0aW9uXHJcblx0XHRwb3B1cCA9ICQoIHBhdGguaGFzaFRvU2VsZWN0b3IoIHBhdGgucGFyc2VVcmwoICRsaW5rLmF0dHIoIFwiaHJlZlwiICkgKS5oYXNoICkgKS5maXJzdCgpO1xyXG5cclxuXHRpZiAoIHBvcHVwLmxlbmd0aCA+IDAgJiYgcG9wdXAuZGF0YSggXCJtb2JpbGUtcG9wdXBcIiApICkge1xyXG5cdFx0b2Zmc2V0ID0gJGxpbmsub2Zmc2V0KCk7XHJcblx0XHRwb3B1cC5wb3B1cCggXCJvcGVuXCIsIHtcclxuXHRcdFx0eDogb2Zmc2V0LmxlZnQgKyAkbGluay5vdXRlcldpZHRoKCkgLyAyLFxyXG5cdFx0XHR5OiBvZmZzZXQudG9wICsgJGxpbmsub3V0ZXJIZWlnaHQoKSAvIDIsXHJcblx0XHRcdHRyYW5zaXRpb246ICRsaW5rLmpxbURhdGEoIFwidHJhbnNpdGlvblwiICksXHJcblx0XHRcdHBvc2l0aW9uVG86ICRsaW5rLmpxbURhdGEoIFwicG9zaXRpb24tdG9cIiApXHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdC8vcmVtb3ZlIGFmdGVyIGRlbGF5XHJcblx0c2V0VGltZW91dCggZnVuY3Rpb24oKSB7XHJcblx0XHQkbGluay5yZW1vdmVDbGFzcyggJC5tb2JpbGUuYWN0aXZlQnRuQ2xhc3MgKTtcclxuXHR9LCAzMDAgKTtcclxufTtcclxuXHJcbi8vIFRPRE8gbW92ZSBpbnNpZGUgX2NyZWF0ZVxyXG4kLm1vYmlsZS5kb2N1bWVudC5vbiggXCJwYWdlYmVmb3JlY2hhbmdlXCIsIGZ1bmN0aW9uKCB0aGVFdmVudCwgZGF0YSApIHtcclxuXHRpZiAoIGRhdGEub3B0aW9ucy5yb2xlID09PSBcInBvcHVwXCIgKSB7XHJcblx0XHQkLm1vYmlsZS5wb3B1cC5oYW5kbGVMaW5rKCBkYXRhLm9wdGlvbnMubGluayApO1xyXG5cdFx0dGhlRXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHR9XHJcbn0pO1xyXG5cclxufSkoIGpRdWVyeSApO1xyXG5cclxuLypcclxuKiBjdXN0b20gXCJzZWxlY3RtZW51XCIgcGx1Z2luXHJcbiovXHJcblxyXG4oZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcclxuXHJcbnZhciB1bmZvY3VzYWJsZUl0ZW1TZWxlY3RvciA9IFwiLnVpLWRpc2FibGVkLC51aS1zdGF0ZS1kaXNhYmxlZCwudWktbGktZGl2aWRlciwudWktc2NyZWVuLWhpZGRlbiw6anFtRGF0YShyb2xlPSdwbGFjZWhvbGRlcicpXCIsXHJcblx0Z29Ub0FkamFjZW50SXRlbSA9IGZ1bmN0aW9uKCBpdGVtLCB0YXJnZXQsIGRpcmVjdGlvbiApIHtcclxuXHRcdHZhciBhZGphY2VudCA9IGl0ZW1bIGRpcmVjdGlvbiArIFwiQWxsXCIgXSgpXHJcblx0XHRcdC5ub3QoIHVuZm9jdXNhYmxlSXRlbVNlbGVjdG9yIClcclxuXHRcdFx0LmZpcnN0KCk7XHJcblxyXG5cdFx0Ly8gaWYgdGhlcmUncyBhIHByZXZpb3VzIG9wdGlvbiwgZm9jdXMgaXRcclxuXHRcdGlmICggYWRqYWNlbnQubGVuZ3RoICkge1xyXG5cdFx0XHR0YXJnZXRcclxuXHRcdFx0XHQuYmx1cigpXHJcblx0XHRcdFx0LmF0dHIoIFwidGFiaW5kZXhcIiwgXCItMVwiICk7XHJcblxyXG5cdFx0XHRhZGphY2VudC5maW5kKCBcImFcIiApLmZpcnN0KCkuZm9jdXMoKTtcclxuXHRcdH1cclxuXHR9O1xyXG5cclxuJC53aWRnZXQoIFwibW9iaWxlLnNlbGVjdG1lbnVcIiwgJC5tb2JpbGUuc2VsZWN0bWVudSwge1xyXG5cdF9jcmVhdGU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIG8gPSB0aGlzLm9wdGlvbnM7XHJcblxyXG5cdFx0Ly8gQ3VzdG9tIHNlbGVjdHMgY2Fubm90IGV4aXN0IGluc2lkZSBwb3B1cHMsIHNvIHJldmVydCB0aGUgXCJuYXRpdmVNZW51XCJcclxuXHRcdC8vIG9wdGlvbiB0byB0cnVlIGlmIGEgcGFyZW50IGlzIGEgcG9wdXBcclxuXHRcdG8ubmF0aXZlTWVudSA9IG8ubmF0aXZlTWVudSB8fCAoIHRoaXMuZWxlbWVudC5wYXJlbnRzKCBcIjpqcW1EYXRhKHJvbGU9J3BvcHVwJyksOm1vYmlsZS1wb3B1cFwiICkubGVuZ3RoID4gMCApO1xyXG5cclxuXHRcdHJldHVybiB0aGlzLl9zdXBlcigpO1xyXG5cdH0sXHJcblxyXG5cdF9oYW5kbGVTZWxlY3RGb2N1czogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLmVsZW1lbnQuYmx1cigpO1xyXG5cdFx0dGhpcy5idXR0b24uZm9jdXMoKTtcclxuXHR9LFxyXG5cclxuXHRfaGFuZGxlS2V5ZG93bjogZnVuY3Rpb24oIGV2ZW50ICkge1xyXG5cdFx0dGhpcy5fc3VwZXIoIGV2ZW50ICk7XHJcblx0XHR0aGlzLl9oYW5kbGVCdXR0b25WY2xpY2tLZXlkb3duKCBldmVudCApO1xyXG5cdH0sXHJcblxyXG5cdF9oYW5kbGVCdXR0b25WY2xpY2tLZXlkb3duOiBmdW5jdGlvbiggZXZlbnQgKSB7XHJcblx0XHRpZiAoIHRoaXMub3B0aW9ucy5kaXNhYmxlZCB8fCB0aGlzLmlzT3BlbiB8fCB0aGlzLm9wdGlvbnMubmF0aXZlTWVudSApIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmIChldmVudC50eXBlID09PSBcInZjbGlja1wiIHx8XHJcblx0XHRcdFx0ZXZlbnQua2V5Q29kZSAmJiAoZXZlbnQua2V5Q29kZSA9PT0gJC5tb2JpbGUua2V5Q29kZS5FTlRFUiB8fCBldmVudC5rZXlDb2RlID09PSAkLm1vYmlsZS5rZXlDb2RlLlNQQUNFKSkge1xyXG5cclxuXHRcdFx0dGhpcy5fZGVjaWRlRm9ybWF0KCk7XHJcblx0XHRcdGlmICggdGhpcy5tZW51VHlwZSA9PT0gXCJvdmVybGF5XCIgKSB7XHJcblx0XHRcdFx0dGhpcy5idXR0b24uYXR0ciggXCJocmVmXCIsIFwiI1wiICsgdGhpcy5wb3B1cElkICkuYXR0ciggXCJkYXRhLVwiICsgKCAkLm1vYmlsZS5ucyB8fCBcIlwiICkgKyBcInJlbFwiLCBcInBvcHVwXCIgKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHR0aGlzLmJ1dHRvbi5hdHRyKCBcImhyZWZcIiwgXCIjXCIgKyB0aGlzLmRpYWxvZ0lkICkuYXR0ciggXCJkYXRhLVwiICsgKCAkLm1vYmlsZS5ucyB8fCBcIlwiICkgKyBcInJlbFwiLCBcImRpYWxvZ1wiICk7XHJcblx0XHRcdH1cclxuXHRcdFx0dGhpcy5pc09wZW4gPSB0cnVlO1xyXG5cdFx0XHQvLyBEbyBub3QgcHJldmVudCBkZWZhdWx0LCBzbyB0aGUgbmF2aWdhdGlvbiBtYXkgaGF2ZSBhIGNoYW5jZSB0byBhY3R1YWxseSBvcGVuIHRoZSBjaG9zZW4gZm9ybWF0XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X2hhbmRsZUxpc3RGb2N1czogZnVuY3Rpb24oIGUgKSB7XHJcblx0XHR2YXIgcGFyYW1zID0gKCBlLnR5cGUgPT09IFwiZm9jdXNpblwiICkgP1xyXG5cdFx0XHR7IHRhYmluZGV4OiBcIjBcIiwgZXZlbnQ6IFwidm1vdXNlb3ZlclwiIH06XHJcblx0XHRcdHsgdGFiaW5kZXg6IFwiLTFcIiwgZXZlbnQ6IFwidm1vdXNlb3V0XCIgfTtcclxuXHJcblx0XHQkKCBlLnRhcmdldCApXHJcblx0XHRcdC5hdHRyKCBcInRhYmluZGV4XCIsIHBhcmFtcy50YWJpbmRleCApXHJcblx0XHRcdC50cmlnZ2VyKCBwYXJhbXMuZXZlbnQgKTtcclxuXHR9LFxyXG5cclxuXHRfaGFuZGxlTGlzdEtleWRvd246IGZ1bmN0aW9uKCBldmVudCApIHtcclxuXHRcdHZhciB0YXJnZXQgPSAkKCBldmVudC50YXJnZXQgKSxcclxuXHRcdFx0bGkgPSB0YXJnZXQuY2xvc2VzdCggXCJsaVwiICk7XHJcblxyXG5cdFx0Ly8gc3dpdGNoIGxvZ2ljIGJhc2VkIG9uIHdoaWNoIGtleSB3YXMgcHJlc3NlZFxyXG5cdFx0c3dpdGNoICggZXZlbnQua2V5Q29kZSApIHtcclxuXHRcdFx0Ly8gdXAgb3IgbGVmdCBhcnJvdyBrZXlzXHJcblx0XHRjYXNlIDM4OlxyXG5cdFx0XHRnb1RvQWRqYWNlbnRJdGVtKCBsaSwgdGFyZ2V0LCBcInByZXZcIiApO1xyXG5cdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdC8vIGRvd24gb3IgcmlnaHQgYXJyb3cga2V5c1xyXG5cdFx0Y2FzZSA0MDpcclxuXHRcdFx0Z29Ub0FkamFjZW50SXRlbSggbGksIHRhcmdldCwgXCJuZXh0XCIgKTtcclxuXHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHQvLyBJZiBlbnRlciBvciBzcGFjZSBpcyBwcmVzc2VkLCB0cmlnZ2VyIGNsaWNrXHJcblx0XHRjYXNlIDEzOlxyXG5cdFx0Y2FzZSAzMjpcclxuXHRcdFx0dGFyZ2V0LnRyaWdnZXIoIFwiY2xpY2tcIiApO1xyXG5cdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X2hhbmRsZU1lbnVQYWdlSGlkZTogZnVuY3Rpb24oKSB7XHJcblxyXG5cdFx0Ly8gQWZ0ZXIgdGhlIGRpYWxvZydzIGRvbmUsIHdlIG1heSB3YW50IHRvIHRyaWdnZXIgY2hhbmdlIGlmIHRoZSB2YWx1ZSBoYXMgYWN0dWFsbHkgY2hhbmdlZFxyXG5cdFx0dGhpcy5fZGVsYXllZFRyaWdnZXIoKTtcclxuXHJcblx0XHQvLyBUT0RPIGNlbnRyYWxpemUgcGFnZSByZW1vdmFsIGJpbmRpbmcgLyBoYW5kbGluZyBpbiB0aGUgcGFnZSBwbHVnaW4uXHJcblx0XHQvLyBTdWdnZXN0aW9uIGZyb20gQGpibGFzIHRvIGRvIHJlZmNvdW50aW5nXHJcblx0XHQvL1xyXG5cdFx0Ly8gVE9ETyBleHRyZW1lbHkgY29uZnVzaW5nIGRlcGVuZGVuY3kgb24gdGhlIG9wZW4gbWV0aG9kIHdoZXJlIHRoZSBwYWdlaGlkZS5yZW1vdmVcclxuXHRcdC8vIGJpbmRpbmdzIGFyZSBzdHJpcHBlZCB0byBwcmV2ZW50IHRoZSBwYXJlbnQgcGFnZSBmcm9tIGRpc2FwcGVhcmluZy4gVGhlIHdheVxyXG5cdFx0Ly8gd2UncmUga2VlcGluZyBwYWdlcyBpbiB0aGUgRE9NIHJpZ2h0IG5vdyBzdWNrc1xyXG5cdFx0Ly9cclxuXHRcdC8vIHJlYmluZCB0aGUgcGFnZSByZW1vdmUgdGhhdCB3YXMgdW5ib3VuZCBpbiB0aGUgb3BlbiBmdW5jdGlvblxyXG5cdFx0Ly8gdG8gYWxsb3cgZm9yIHRoZSBwYXJlbnQgcGFnZSByZW1vdmFsIGZyb20gYWN0aW9ucyBvdGhlciB0aGFuIHRoZSB1c2VcclxuXHRcdC8vIG9mIGEgZGlhbG9nIHNpemVkIGN1c3RvbSBzZWxlY3RcclxuXHRcdC8vXHJcblx0XHQvLyBkb2luZyB0aGlzIGhlcmUgcHJvdmlkZXMgZm9yIHRoZSBiYWNrIGJ1dHRvbiBvbiB0aGUgY3VzdG9tIHNlbGVjdCBkaWFsb2dcclxuXHRcdHRoaXMudGhpc1BhZ2UucGFnZSggXCJiaW5kUmVtb3ZlXCIgKTtcclxuXHR9LFxyXG5cclxuXHRfaGFuZGxlSGVhZGVyQ2xvc2VDbGljazogZnVuY3Rpb24oKSB7XHJcblx0XHRpZiAoIHRoaXMubWVudVR5cGUgPT09IFwib3ZlcmxheVwiICkge1xyXG5cdFx0XHR0aGlzLmNsb3NlKCk7XHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfaGFuZGxlTGlzdEl0ZW1DbGljazogZnVuY3Rpb24oIGV2ZW50ICkge1xyXG5cdFx0dmFyIGxpc3RJdGVtID0gJCggZXZlbnQudGFyZ2V0ICkuY2xvc2VzdCggXCJsaVwiICksXHJcblxyXG5cdFx0XHQvLyBJbmRleCBvZiBvcHRpb24gdGFnIHRvIGJlIHNlbGVjdGVkXHJcblx0XHRcdG9sZEluZGV4ID0gdGhpcy5zZWxlY3RbIDAgXS5zZWxlY3RlZEluZGV4LFxyXG5cdFx0XHRuZXdJbmRleCA9ICQubW9iaWxlLmdldEF0dHJpYnV0ZSggbGlzdEl0ZW0sIFwib3B0aW9uLWluZGV4XCIgKSxcclxuXHRcdFx0b3B0aW9uID0gdGhpcy5fc2VsZWN0T3B0aW9ucygpLmVxKCBuZXdJbmRleCApWyAwIF07XHJcblxyXG5cdFx0Ly8gVG9nZ2xlIHNlbGVjdGVkIHN0YXR1cyBvbiB0aGUgdGFnIGZvciBtdWx0aSBzZWxlY3RzXHJcblx0XHRvcHRpb24uc2VsZWN0ZWQgPSB0aGlzLmlzTXVsdGlwbGUgPyAhb3B0aW9uLnNlbGVjdGVkIDogdHJ1ZTtcclxuXHJcblx0XHQvLyBUb2dnbGUgY2hlY2tib3ggY2xhc3MgZm9yIG11bHRpcGxlIHNlbGVjdHNcclxuXHRcdGlmICggdGhpcy5pc011bHRpcGxlICkge1xyXG5cdFx0XHRsaXN0SXRlbS5maW5kKCBcImFcIiApXHJcblx0XHRcdFx0LnRvZ2dsZUNsYXNzKCBcInVpLWNoZWNrYm94LW9uXCIsIG9wdGlvbi5zZWxlY3RlZCApXHJcblx0XHRcdFx0LnRvZ2dsZUNsYXNzKCBcInVpLWNoZWNrYm94LW9mZlwiLCAhb3B0aW9uLnNlbGVjdGVkICk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gSWYgaXQncyBub3QgYSBtdWx0aXBsZSBzZWxlY3QsIHRyaWdnZXIgY2hhbmdlIGFmdGVyIGl0IGhhcyBmaW5pc2hlZCBjbG9zaW5nXHJcblx0XHRpZiAoICF0aGlzLmlzTXVsdGlwbGUgJiYgb2xkSW5kZXggIT09IG5ld0luZGV4ICkge1xyXG5cdFx0XHR0aGlzLl90cmlnZ2VyQ2hhbmdlID0gdHJ1ZTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBUcmlnZ2VyIGNoYW5nZSBpZiBpdCdzIGEgbXVsdGlwbGUgc2VsZWN0XHJcblx0XHQvLyBIaWRlIGN1c3RvbSBzZWxlY3QgZm9yIHNpbmdsZSBzZWxlY3RzIG9ubHkgLSBvdGhlcndpc2UgZm9jdXMgY2xpY2tlZCBpdGVtXHJcblx0XHQvLyBXZSBuZWVkIHRvIGdyYWIgdGhlIGNsaWNrZWQgaXRlbSB0aGUgaGFyZCB3YXksIGJlY2F1c2UgdGhlIGxpc3QgbWF5IGhhdmUgYmVlbiByZWJ1aWx0XHJcblx0XHRpZiAoIHRoaXMuaXNNdWx0aXBsZSApIHtcclxuXHRcdFx0dGhpcy5zZWxlY3QudHJpZ2dlciggXCJjaGFuZ2VcIiApO1xyXG5cdFx0XHR0aGlzLmxpc3QuZmluZCggXCJsaTpub3QoLnVpLWxpLWRpdmlkZXIpXCIgKS5lcSggbmV3SW5kZXggKVxyXG5cdFx0XHRcdC5maW5kKCBcImFcIiApLmZpcnN0KCkuZm9jdXMoKTtcclxuXHRcdH1cclxuXHRcdGVsc2Uge1xyXG5cdFx0XHR0aGlzLmNsb3NlKCk7XHJcblx0XHR9XHJcblxyXG5cdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHR9LFxyXG5cclxuXHRidWlsZDogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgc2VsZWN0SWQsIHBvcHVwSWQsIGRpYWxvZ0lkLCBsYWJlbCwgdGhpc1BhZ2UsIGlzTXVsdGlwbGUsIG1lbnVJZCxcclxuXHRcdFx0dGhlbWVBdHRyLCBvdmVybGF5VGhlbWUsIG92ZXJsYXlUaGVtZUF0dHIsIGRpdmlkZXJUaGVtZUF0dHIsXHJcblx0XHRcdG1lbnVQYWdlLCBsaXN0Ym94LCBsaXN0LCBoZWFkZXIsIGhlYWRlclRpdGxlLCBtZW51UGFnZUNvbnRlbnQsXHJcblx0XHRcdG1lbnVQYWdlQ2xvc2UsIGhlYWRlckNsb3NlLFxyXG5cdFx0XHRvID0gdGhpcy5vcHRpb25zO1xyXG5cclxuXHRcdGlmICggby5uYXRpdmVNZW51ICkge1xyXG5cdFx0XHRyZXR1cm4gdGhpcy5fc3VwZXIoKTtcclxuXHRcdH1cclxuXHJcblx0XHRzZWxlY3RJZCA9IHRoaXMuc2VsZWN0SWQ7XHJcblx0XHRwb3B1cElkID0gc2VsZWN0SWQgKyBcIi1saXN0Ym94XCI7XHJcblx0XHRkaWFsb2dJZCA9IHNlbGVjdElkICsgXCItZGlhbG9nXCI7XHJcblx0XHRsYWJlbCA9IHRoaXMubGFiZWw7XHJcblx0XHR0aGlzUGFnZSA9IHRoaXMuZWxlbWVudC5jbG9zZXN0KCBcIi51aS1wYWdlXCIgKTtcclxuXHRcdGlzTXVsdGlwbGUgPSB0aGlzLmVsZW1lbnRbIDAgXS5tdWx0aXBsZTtcclxuXHRcdG1lbnVJZCA9IHNlbGVjdElkICsgXCItbWVudVwiO1xyXG5cdFx0dGhlbWVBdHRyID0gby50aGVtZSA/ICggXCIgZGF0YS1cIiArICQubW9iaWxlLm5zICsgXCJ0aGVtZT0nXCIgKyBvLnRoZW1lICsgXCInXCIgKSA6IFwiXCI7XHJcblx0XHRvdmVybGF5VGhlbWUgPSBvLm92ZXJsYXlUaGVtZSB8fCBvLnRoZW1lIHx8IG51bGw7XHJcblx0XHRvdmVybGF5VGhlbWVBdHRyID0gb3ZlcmxheVRoZW1lID8gKCBcIiBkYXRhLVwiICsgJC5tb2JpbGUubnMgK1xyXG5cdFx0XHRcIm92ZXJsYXktdGhlbWU9J1wiICsgb3ZlcmxheVRoZW1lICsgXCInXCIgKSA6IFwiXCI7XHJcblx0XHRkaXZpZGVyVGhlbWVBdHRyID0gKCBvLmRpdmlkZXJUaGVtZSAmJiBpc011bHRpcGxlICkgPyAoIFwiIGRhdGEtXCIgKyAkLm1vYmlsZS5ucyArIFwiZGl2aWRlci10aGVtZT0nXCIgKyBvLmRpdmlkZXJUaGVtZSArIFwiJ1wiICkgOiBcIlwiO1xyXG5cdFx0bWVudVBhZ2UgPSAkKCBcIjxkaXYgZGF0YS1cIiArICQubW9iaWxlLm5zICsgXCJyb2xlPSdkaWFsb2cnIGNsYXNzPSd1aS1zZWxlY3RtZW51JyBpZD0nXCIgKyBkaWFsb2dJZCArIFwiJ1wiICsgdGhlbWVBdHRyICsgb3ZlcmxheVRoZW1lQXR0ciArIFwiPlwiICtcclxuXHRcdFx0XCI8ZGl2IGRhdGEtXCIgKyAkLm1vYmlsZS5ucyArIFwicm9sZT0naGVhZGVyJz5cIiArXHJcblx0XHRcdFwiPGRpdiBjbGFzcz0ndWktdGl0bGUnPjwvZGl2PlwiK1xyXG5cdFx0XHRcIjwvZGl2PlwiK1xyXG5cdFx0XHRcIjxkaXYgZGF0YS1cIiArICQubW9iaWxlLm5zICsgXCJyb2xlPSdjb250ZW50Jz48L2Rpdj5cIitcclxuXHRcdFx0XCI8L2Rpdj5cIiApO1xyXG5cdFx0bGlzdGJveCA9ICQoIFwiPGRpdlwiICsgdGhlbWVBdHRyICsgb3ZlcmxheVRoZW1lQXR0ciArIFwiIGlkPSdcIiArIHBvcHVwSWQgK1xyXG5cdFx0XHRcdFwiJyBjbGFzcz0ndWktc2VsZWN0bWVudSc+PC9kaXY+XCIgKVxyXG5cdFx0XHQuaW5zZXJ0QWZ0ZXIoIHRoaXMuc2VsZWN0IClcclxuXHRcdFx0LnBvcHVwKCk7XHJcblx0XHRsaXN0ID0gJCggXCI8dWwgY2xhc3M9J3VpLXNlbGVjdG1lbnUtbGlzdCcgaWQ9J1wiICsgbWVudUlkICsgXCInIHJvbGU9J2xpc3Rib3gnIGFyaWEtbGFiZWxsZWRieT0nXCIgKyB0aGlzLmJ1dHRvbklkICsgXCInXCIgKyB0aGVtZUF0dHIgKyBkaXZpZGVyVGhlbWVBdHRyICsgXCI+PC91bD5cIiApLmFwcGVuZFRvKCBsaXN0Ym94ICk7XHJcblx0XHRoZWFkZXIgPSAkKCBcIjxkaXYgY2xhc3M9J3VpLWhlYWRlciB1aS1iYXItXCIgKyAoIG8udGhlbWUgPyBvLnRoZW1lIDogXCJpbmhlcml0XCIgKSArIFwiJz48L2Rpdj5cIiApLnByZXBlbmRUbyggbGlzdGJveCApO1xyXG5cdFx0aGVhZGVyVGl0bGUgPSAkKCBcIjxoMSBjbGFzcz0ndWktdGl0bGUnPjwvaDE+XCIgKS5hcHBlbmRUbyggaGVhZGVyICk7XHJcblxyXG5cdFx0aWYgKCB0aGlzLmlzTXVsdGlwbGUgKSB7XHJcblx0XHRcdGhlYWRlckNsb3NlID0gJCggXCI8YT5cIiwge1xyXG5cdFx0XHRcdFwicm9sZVwiOiBcImJ1dHRvblwiLFxyXG5cdFx0XHRcdFwidGV4dFwiOiBvLmNsb3NlVGV4dCxcclxuXHRcdFx0XHRcImhyZWZcIjogXCIjXCIsXHJcblx0XHRcdFx0XCJjbGFzc1wiOiBcInVpLWJ0biB1aS1jb3JuZXItYWxsIHVpLWJ0bi1sZWZ0IHVpLWJ0bi1pY29uLW5vdGV4dCB1aS1pY29uLWRlbGV0ZVwiXHJcblx0XHRcdH0pLmFwcGVuZFRvKCBoZWFkZXIgKTtcclxuXHRcdH1cclxuXHJcblx0XHQkLmV4dGVuZCggdGhpcywge1xyXG5cdFx0XHRzZWxlY3RJZDogc2VsZWN0SWQsXHJcblx0XHRcdG1lbnVJZDogbWVudUlkLFxyXG5cdFx0XHRwb3B1cElkOiBwb3B1cElkLFxyXG5cdFx0XHRkaWFsb2dJZDogZGlhbG9nSWQsXHJcblx0XHRcdHRoaXNQYWdlOiB0aGlzUGFnZSxcclxuXHRcdFx0bWVudVBhZ2U6IG1lbnVQYWdlLFxyXG5cdFx0XHRsYWJlbDogbGFiZWwsXHJcblx0XHRcdGlzTXVsdGlwbGU6IGlzTXVsdGlwbGUsXHJcblx0XHRcdHRoZW1lOiBvLnRoZW1lLFxyXG5cdFx0XHRsaXN0Ym94OiBsaXN0Ym94LFxyXG5cdFx0XHRsaXN0OiBsaXN0LFxyXG5cdFx0XHRoZWFkZXI6IGhlYWRlcixcclxuXHRcdFx0aGVhZGVyVGl0bGU6IGhlYWRlclRpdGxlLFxyXG5cdFx0XHRoZWFkZXJDbG9zZTogaGVhZGVyQ2xvc2UsXHJcblx0XHRcdG1lbnVQYWdlQ29udGVudDogbWVudVBhZ2VDb250ZW50LFxyXG5cdFx0XHRtZW51UGFnZUNsb3NlOiBtZW51UGFnZUNsb3NlLFxyXG5cdFx0XHRwbGFjZWhvbGRlcjogXCJcIlxyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gQ3JlYXRlIGxpc3QgZnJvbSBzZWxlY3QsIHVwZGF0ZSBzdGF0ZVxyXG5cdFx0dGhpcy5yZWZyZXNoKCk7XHJcblxyXG5cdFx0aWYgKCB0aGlzLl9vcmlnVGFiSW5kZXggPT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0Ly8gTWFwIHVuZGVmaW5lZCB0byBmYWxzZSwgYmVjYXVzZSB0aGlzLl9vcmlnVGFiSW5kZXggPT09IHVuZGVmaW5lZFxyXG5cdFx0XHQvLyBpbmRpY2F0ZXMgdGhhdCB3ZSBoYXZlIG5vdCB5ZXQgY2hlY2tlZCB3aGV0aGVyIHRoZSBzZWxlY3QgaGFzXHJcblx0XHRcdC8vIG9yaWdpbmFsbHkgaGFkIGEgdGFiaW5kZXggYXR0cmlidXRlLCB3aGVyZWFzIGZhbHNlIGluZGljYXRlcyB0aGF0XHJcblx0XHRcdC8vIHdlIGhhdmUgY2hlY2tlZCB0aGUgc2VsZWN0IGZvciBzdWNoIGFuIGF0dHJpYnV0ZSwgYW5kIGhhdmUgZm91bmRcclxuXHRcdFx0Ly8gbm9uZSBwcmVzZW50LlxyXG5cdFx0XHR0aGlzLl9vcmlnVGFiSW5kZXggPSAoIHRoaXMuc2VsZWN0WyAwIF0uZ2V0QXR0cmlidXRlKCBcInRhYmluZGV4XCIgKSA9PT0gbnVsbCApID8gZmFsc2UgOiB0aGlzLnNlbGVjdC5hdHRyKCBcInRhYmluZGV4XCIgKTtcclxuXHRcdH1cclxuXHRcdHRoaXMuc2VsZWN0LmF0dHIoIFwidGFiaW5kZXhcIiwgXCItMVwiICk7XHJcblx0XHR0aGlzLl9vbiggdGhpcy5zZWxlY3QsIHsgZm9jdXMgOiBcIl9oYW5kbGVTZWxlY3RGb2N1c1wiIH0gKTtcclxuXHJcblx0XHQvLyBCdXR0b24gZXZlbnRzXHJcblx0XHR0aGlzLl9vbiggdGhpcy5idXR0b24sIHtcclxuXHRcdFx0dmNsaWNrOiBcIl9oYW5kbGVCdXR0b25WY2xpY2tLZXlkb3duXCJcclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIEV2ZW50cyBmb3IgbGlzdCBpdGVtc1xyXG5cdFx0dGhpcy5saXN0LmF0dHIoIFwicm9sZVwiLCBcImxpc3Rib3hcIiApO1xyXG5cdFx0dGhpcy5fb24oIHRoaXMubGlzdCwge1xyXG5cdFx0XHRcImZvY3VzaW5cIjogXCJfaGFuZGxlTGlzdEZvY3VzXCIsXHJcblx0XHRcdFwiZm9jdXNvdXRcIjogXCJfaGFuZGxlTGlzdEZvY3VzXCIsXHJcblx0XHRcdFwia2V5ZG93blwiOiBcIl9oYW5kbGVMaXN0S2V5ZG93blwiLFxyXG5cdFx0XHRcImNsaWNrIGxpOm5vdCgudWktZGlzYWJsZWQsLnVpLXN0YXRlLWRpc2FibGVkLC51aS1saS1kaXZpZGVyKVwiOiBcIl9oYW5kbGVMaXN0SXRlbUNsaWNrXCJcclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIGJ1dHRvbiByZWZvY3VzIGVuc3VyZXMgcHJvcGVyIGhlaWdodCBjYWxjdWxhdGlvblxyXG5cdFx0Ly8gYnkgcmVtb3ZpbmcgdGhlIGlubGluZSBzdHlsZSBhbmQgZW5zdXJpbmcgcGFnZSBpbmNsdXNpb25cclxuXHRcdHRoaXMuX29uKCB0aGlzLm1lbnVQYWdlLCB7IHBhZ2VoaWRlOiBcIl9oYW5kbGVNZW51UGFnZUhpZGVcIiB9ICk7XHJcblxyXG5cdFx0Ly8gRXZlbnRzIG9uIHRoZSBwb3B1cFxyXG5cdFx0dGhpcy5fb24oIHRoaXMubGlzdGJveCwgeyBwb3B1cGFmdGVyY2xvc2U6IFwiX3BvcHVwQ2xvc2VkXCIgfSApO1xyXG5cclxuXHRcdC8vIENsb3NlIGJ1dHRvbiBvbiBzbWFsbCBvdmVybGF5c1xyXG5cdFx0aWYgKCB0aGlzLmlzTXVsdGlwbGUgKSB7XHJcblx0XHRcdHRoaXMuX29uKCB0aGlzLmhlYWRlckNsb3NlLCB7IGNsaWNrOiBcIl9oYW5kbGVIZWFkZXJDbG9zZUNsaWNrXCIgfSApO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiB0aGlzO1xyXG5cdH0sXHJcblxyXG5cdF9wb3B1cENsb3NlZDogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLmNsb3NlKCk7XHJcblx0XHR0aGlzLl9kZWxheWVkVHJpZ2dlcigpO1xyXG5cdH0sXHJcblxyXG5cdF9kZWxheWVkVHJpZ2dlcjogZnVuY3Rpb24oKSB7XHJcblx0XHRpZiAoIHRoaXMuX3RyaWdnZXJDaGFuZ2UgKSB7XHJcblx0XHRcdHRoaXMuZWxlbWVudC50cmlnZ2VyKCBcImNoYW5nZVwiICk7XHJcblx0XHR9XHJcblx0XHR0aGlzLl90cmlnZ2VyQ2hhbmdlID0gZmFsc2U7XHJcblx0fSxcclxuXHJcblx0X2lzUmVidWlsZFJlcXVpcmVkOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBsaXN0ID0gdGhpcy5saXN0LmZpbmQoIFwibGlcIiApLFxyXG5cdFx0XHRvcHRpb25zID0gdGhpcy5fc2VsZWN0T3B0aW9ucygpLm5vdCggXCIudWktc2NyZWVuLWhpZGRlblwiICk7XHJcblxyXG5cdFx0Ly8gVE9ETyBleGNlZWRpbmdseSBuYWl2ZSBtZXRob2QgdG8gZGV0ZXJtaW5lIGRpZmZlcmVuY2VcclxuXHRcdC8vIGlnbm9yZXMgdmFsdWUgY2hhbmdlcyBldGMgaW4gZmF2b3Igb2YgYSBmb3JjZWRSZWJ1aWxkXHJcblx0XHQvLyBmcm9tIHRoZSB1c2VyIGluIHRoZSByZWZyZXNoIG1ldGhvZFxyXG5cdFx0cmV0dXJuIG9wdGlvbnMudGV4dCgpICE9PSBsaXN0LnRleHQoKTtcclxuXHR9LFxyXG5cclxuXHRzZWxlY3RlZDogZnVuY3Rpb24oKSB7XHJcblx0XHRyZXR1cm4gdGhpcy5fc2VsZWN0T3B0aW9ucygpLmZpbHRlciggXCI6c2VsZWN0ZWQ6bm90KCA6anFtRGF0YShwbGFjZWhvbGRlcj0ndHJ1ZScpIClcIiApO1xyXG5cdH0sXHJcblxyXG5cdHJlZnJlc2g6IGZ1bmN0aW9uKCBmb3JjZSApIHtcclxuXHRcdHZhciBzZWxmLCBpbmRpY2VzO1xyXG5cclxuXHRcdGlmICggdGhpcy5vcHRpb25zLm5hdGl2ZU1lbnUgKSB7XHJcblx0XHRcdHJldHVybiB0aGlzLl9zdXBlciggZm9yY2UgKTtcclxuXHRcdH1cclxuXHJcblx0XHRzZWxmID0gdGhpcztcclxuXHRcdGlmICggZm9yY2UgfHwgdGhpcy5faXNSZWJ1aWxkUmVxdWlyZWQoKSApIHtcclxuXHRcdFx0c2VsZi5fYnVpbGRMaXN0KCk7XHJcblx0XHR9XHJcblxyXG5cdFx0aW5kaWNlcyA9IHRoaXMuc2VsZWN0ZWRJbmRpY2VzKCk7XHJcblxyXG5cdFx0c2VsZi5zZXRCdXR0b25UZXh0KCk7XHJcblx0XHRzZWxmLnNldEJ1dHRvbkNvdW50KCk7XHJcblxyXG5cdFx0c2VsZi5saXN0LmZpbmQoIFwibGk6bm90KC51aS1saS1kaXZpZGVyKVwiIClcclxuXHRcdFx0LmZpbmQoIFwiYVwiICkucmVtb3ZlQ2xhc3MoICQubW9iaWxlLmFjdGl2ZUJ0bkNsYXNzICkuZW5kKClcclxuXHRcdFx0LmF0dHIoIFwiYXJpYS1zZWxlY3RlZFwiLCBmYWxzZSApXHJcblx0XHRcdC5lYWNoKGZ1bmN0aW9uKCBpICkge1xyXG5cdFx0XHRcdHZhciBpdGVtID0gJCggdGhpcyApO1xyXG5cdFx0XHRcdGlmICggJC5pbkFycmF5KCBpLCBpbmRpY2VzICkgPiAtMSApIHtcclxuXHJcblx0XHRcdFx0XHQvLyBBcmlhIHNlbGVjdGVkIGF0dHJcclxuXHRcdFx0XHRcdGl0ZW0uYXR0ciggXCJhcmlhLXNlbGVjdGVkXCIsIHRydWUgKTtcclxuXHJcblx0XHRcdFx0XHQvLyBNdWx0aXBsZSBzZWxlY3RzOiBhZGQgdGhlIFwib25cIiBjaGVja2JveCBzdGF0ZSB0byB0aGUgaWNvblxyXG5cdFx0XHRcdFx0aWYgKCBzZWxmLmlzTXVsdGlwbGUgKSB7XHJcblx0XHRcdFx0XHRcdGl0ZW0uZmluZCggXCJhXCIgKS5yZW1vdmVDbGFzcyggXCJ1aS1jaGVja2JveC1vZmZcIiApLmFkZENsYXNzKCBcInVpLWNoZWNrYm94LW9uXCIgKTtcclxuXHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdGlmICggaXRlbS5oYXNDbGFzcyggXCJ1aS1zY3JlZW4taGlkZGVuXCIgKSApIHtcclxuXHRcdFx0XHRcdFx0XHRpdGVtLm5leHQoKS5maW5kKCBcImFcIiApLmFkZENsYXNzKCAkLm1vYmlsZS5hY3RpdmVCdG5DbGFzcyApO1xyXG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRcdGl0ZW0uZmluZCggXCJhXCIgKS5hZGRDbGFzcyggJC5tb2JpbGUuYWN0aXZlQnRuQ2xhc3MgKTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0gZWxzZSBpZiAoIHNlbGYuaXNNdWx0aXBsZSApIHtcclxuXHRcdFx0XHRcdGl0ZW0uZmluZCggXCJhXCIgKS5yZW1vdmVDbGFzcyggXCJ1aS1jaGVja2JveC1vblwiICkuYWRkQ2xhc3MoIFwidWktY2hlY2tib3gtb2ZmXCIgKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cdH0sXHJcblxyXG5cdGNsb3NlOiBmdW5jdGlvbigpIHtcclxuXHRcdGlmICggdGhpcy5vcHRpb25zLmRpc2FibGVkIHx8ICF0aGlzLmlzT3BlbiApIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdHZhciBzZWxmID0gdGhpcztcclxuXHJcblx0XHRpZiAoIHNlbGYubWVudVR5cGUgPT09IFwicGFnZVwiICkge1xyXG5cdFx0XHRzZWxmLm1lbnVQYWdlLmRpYWxvZyggXCJjbG9zZVwiICk7XHJcblx0XHRcdHNlbGYubGlzdC5hcHBlbmRUbyggc2VsZi5saXN0Ym94ICk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRzZWxmLmxpc3Rib3gucG9wdXAoIFwiY2xvc2VcIiApO1xyXG5cdFx0fVxyXG5cclxuXHRcdHNlbGYuX2ZvY3VzQnV0dG9uKCk7XHJcblx0XHQvLyBhbGxvdyB0aGUgZGlhbG9nIHRvIGJlIGNsb3NlZCBhZ2FpblxyXG5cdFx0c2VsZi5pc09wZW4gPSBmYWxzZTtcclxuXHR9LFxyXG5cclxuXHRvcGVuOiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuYnV0dG9uLmNsaWNrKCk7XHJcblx0fSxcclxuXHJcblx0X2ZvY3VzTWVudUl0ZW06IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIHNlbGVjdG9yID0gdGhpcy5saXN0LmZpbmQoIFwiYS5cIiArICQubW9iaWxlLmFjdGl2ZUJ0bkNsYXNzICk7XHJcblx0XHRpZiAoIHNlbGVjdG9yLmxlbmd0aCA9PT0gMCApIHtcclxuXHRcdFx0c2VsZWN0b3IgPSB0aGlzLmxpc3QuZmluZCggXCJsaTpub3QoXCIgKyB1bmZvY3VzYWJsZUl0ZW1TZWxlY3RvciArIFwiKSBhLnVpLWJ0blwiICk7XHJcblx0XHR9XHJcblx0XHRzZWxlY3Rvci5maXJzdCgpLmZvY3VzKCk7XHJcblx0fSxcclxuXHJcblx0X2RlY2lkZUZvcm1hdDogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgc2VsZiA9IHRoaXMsXHJcblx0XHRcdCR3aW5kb3cgPSB0aGlzLndpbmRvdyxcclxuXHRcdFx0c2VsZkxpc3RQYXJlbnQgPSBzZWxmLmxpc3QucGFyZW50KCksXHJcblx0XHRcdG1lbnVIZWlnaHQgPSBzZWxmTGlzdFBhcmVudC5vdXRlckhlaWdodCgpLFxyXG5cdFx0XHRzY3JvbGxUb3AgPSAkd2luZG93LnNjcm9sbFRvcCgpLFxyXG5cdFx0XHRidG5PZmZzZXQgPSBzZWxmLmJ1dHRvbi5vZmZzZXQoKS50b3AsXHJcblx0XHRcdHNjcmVlbkhlaWdodCA9ICR3aW5kb3cuaGVpZ2h0KCk7XHJcblxyXG5cdFx0aWYgKCBtZW51SGVpZ2h0ID4gc2NyZWVuSGVpZ2h0IC0gODAgfHwgISQuc3VwcG9ydC5zY3JvbGxUb3AgKSB7XHJcblxyXG5cdFx0XHRzZWxmLm1lbnVQYWdlLmFwcGVuZFRvKCAkLm1vYmlsZS5wYWdlQ29udGFpbmVyICkucGFnZSgpO1xyXG5cdFx0XHRzZWxmLm1lbnVQYWdlQ29udGVudCA9IHNlbGYubWVudVBhZ2UuZmluZCggXCIudWktY29udGVudFwiICk7XHJcblx0XHRcdHNlbGYubWVudVBhZ2VDbG9zZSA9IHNlbGYubWVudVBhZ2UuZmluZCggXCIudWktaGVhZGVyIGFcIiApO1xyXG5cclxuXHRcdFx0Ly8gcHJldmVudCB0aGUgcGFyZW50IHBhZ2UgZnJvbSBiZWluZyByZW1vdmVkIGZyb20gdGhlIERPTSxcclxuXHRcdFx0Ly8gb3RoZXJ3aXNlIHRoZSByZXN1bHRzIG9mIHNlbGVjdGluZyBhIGxpc3QgaXRlbSBpbiB0aGUgZGlhbG9nXHJcblx0XHRcdC8vIGZhbGwgaW50byBhIGJsYWNrIGhvbGVcclxuXHRcdFx0c2VsZi50aGlzUGFnZS51bmJpbmQoIFwicGFnZWhpZGUucmVtb3ZlXCIgKTtcclxuXHJcblx0XHRcdC8vZm9yIFdlYk9TL09wZXJhIE1pbmkgKHNldCBsYXN0c2Nyb2xsIHVzaW5nIGJ1dHRvbiBvZmZzZXQpXHJcblx0XHRcdGlmICggc2Nyb2xsVG9wID09PSAwICYmIGJ0bk9mZnNldCA+IHNjcmVlbkhlaWdodCApIHtcclxuXHRcdFx0XHRzZWxmLnRoaXNQYWdlLm9uZSggXCJwYWdlaGlkZVwiLCBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdCQoIHRoaXMgKS5qcW1EYXRhKCBcImxhc3RTY3JvbGxcIiwgYnRuT2Zmc2V0ICk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHNlbGYubWVudVBhZ2Uub25lKCB7XHJcblx0XHRcdFx0cGFnZXNob3c6ICQucHJveHkoIHRoaXMsIFwiX2ZvY3VzTWVudUl0ZW1cIiApLFxyXG5cdFx0XHRcdHBhZ2VoaWRlOiAkLnByb3h5KCB0aGlzLCBcImNsb3NlXCIgKVxyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdHNlbGYubWVudVR5cGUgPSBcInBhZ2VcIjtcclxuXHRcdFx0c2VsZi5tZW51UGFnZUNvbnRlbnQuYXBwZW5kKCBzZWxmLmxpc3QgKTtcclxuXHRcdFx0c2VsZi5tZW51UGFnZVxyXG5cdFx0XHRcdC5maW5kKCBcImRpdiAudWktdGl0bGVcIiApXHJcblx0XHRcdFx0XHQudGV4dCggc2VsZi5sYWJlbC5nZXRFbmNvZGVkVGV4dCgpIHx8IHNlbGYucGxhY2Vob2xkZXIgKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHNlbGYubWVudVR5cGUgPSBcIm92ZXJsYXlcIjtcclxuXHJcblx0XHRcdHNlbGYubGlzdGJveC5vbmUoIHsgcG9wdXBhZnRlcm9wZW46ICQucHJveHkoIHRoaXMsIFwiX2ZvY3VzTWVudUl0ZW1cIiApIH0gKTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfYnVpbGRMaXN0OiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBzZWxmID0gdGhpcyxcclxuXHRcdFx0byA9IHRoaXMub3B0aW9ucyxcclxuXHRcdFx0cGxhY2Vob2xkZXIgPSB0aGlzLnBsYWNlaG9sZGVyLFxyXG5cdFx0XHRuZWVkUGxhY2Vob2xkZXIgPSB0cnVlLFxyXG5cdFx0XHRkYXRhSWNvbiA9IFwiZmFsc2VcIixcclxuXHRcdFx0JG9wdGlvbnMsIG51bU9wdGlvbnMsIHNlbGVjdCxcclxuXHRcdFx0ZGF0YVByZWZpeCA9IFwiZGF0YS1cIiArICQubW9iaWxlLm5zLFxyXG5cdFx0XHRkYXRhSW5kZXhBdHRyID0gZGF0YVByZWZpeCArIFwib3B0aW9uLWluZGV4XCIsXHJcblx0XHRcdGRhdGFJY29uQXR0ciA9IGRhdGFQcmVmaXggKyBcImljb25cIixcclxuXHRcdFx0ZGF0YVJvbGVBdHRyID0gZGF0YVByZWZpeCArIFwicm9sZVwiLFxyXG5cdFx0XHRkYXRhUGxhY2Vob2xkZXJBdHRyID0gZGF0YVByZWZpeCArIFwicGxhY2Vob2xkZXJcIixcclxuXHRcdFx0ZnJhZ21lbnQgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksXHJcblx0XHRcdGlzUGxhY2Vob2xkZXJJdGVtID0gZmFsc2UsXHJcblx0XHRcdG9wdEdyb3VwLFxyXG5cdFx0XHRpLFxyXG5cdFx0XHRvcHRpb24sICRvcHRpb24sIHBhcmVudCwgdGV4dCwgYW5jaG9yLCBjbGFzc2VzLFxyXG5cdFx0XHRvcHRMYWJlbCwgZGl2aWRlciwgaXRlbTtcclxuXHJcblx0XHRzZWxmLmxpc3QuZW1wdHkoKS5maWx0ZXIoIFwiLnVpLWxpc3R2aWV3XCIgKS5saXN0dmlldyggXCJkZXN0cm95XCIgKTtcclxuXHRcdCRvcHRpb25zID0gdGhpcy5fc2VsZWN0T3B0aW9ucygpO1xyXG5cdFx0bnVtT3B0aW9ucyA9ICRvcHRpb25zLmxlbmd0aDtcclxuXHRcdHNlbGVjdCA9IHRoaXMuc2VsZWN0WyAwIF07XHJcblxyXG5cdFx0Zm9yICggaSA9IDA7IGkgPCBudW1PcHRpb25zO2krKywgaXNQbGFjZWhvbGRlckl0ZW0gPSBmYWxzZSkge1xyXG5cdFx0XHRvcHRpb24gPSAkb3B0aW9uc1tpXTtcclxuXHRcdFx0JG9wdGlvbiA9ICQoIG9wdGlvbiApO1xyXG5cclxuXHRcdFx0Ly8gRG8gbm90IGNyZWF0ZSBvcHRpb25zIGJhc2VkIG9uIHVpLXNjcmVlbi1oaWRkZW4gc2VsZWN0IG9wdGlvbnNcclxuXHRcdFx0aWYgKCAkb3B0aW9uLmhhc0NsYXNzKCBcInVpLXNjcmVlbi1oaWRkZW5cIiApICkge1xyXG5cdFx0XHRcdGNvbnRpbnVlO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRwYXJlbnQgPSBvcHRpb24ucGFyZW50Tm9kZTtcclxuXHRcdFx0Y2xhc3NlcyA9IFtdO1xyXG5cclxuXHRcdFx0Ly8gQWx0aG91Z2ggdXNpbmcgLnRleHQoKSBoZXJlIHJhaXNlcyB0aGUgcmlzayB0aGF0LCB3aGVuIHdlIGxhdGVyIHBhc3RlIHRoaXMgaW50byB0aGVcclxuXHRcdFx0Ly8gbGlzdCBpdGVtIHdlIGVuZCB1cCBwYXN0aW5nIHBvc3NpYmx5IG1hbGljaW91cyB0aGluZ3MgbGlrZSA8c2NyaXB0PiB0YWdzLCB0aGF0IHJpc2tcclxuXHRcdFx0Ly8gb25seSBhcmlzZXMgaWYgd2UgZG8gc29tZXRoaW5nIGxpa2UgJCggXCI8bGk+PGEgaHJlZj0nIyc+XCIgKyB0ZXh0ICsgXCI8L2E+PC9saT5cIiApLiBXZVxyXG5cdFx0XHQvLyBkb24ndCBkbyB0aGF0LiBXZSBkbyBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSggdGV4dCApIGluc3RlYWQsIHdoaWNoIGd1YXJhbnRlZXMgdGhhdFxyXG5cdFx0XHQvLyB3aGF0ZXZlciB3ZSBwYXN0ZSBpbiB3aWxsIGVuZCB1cCBhcyB0ZXh0LCB3aXRoIGNoYXJhY3RlcnMgbGlrZSA8LCA+IGFuZCAmIGVzY2FwZWQuXHJcblx0XHRcdHRleHQgPSAkb3B0aW9uLnRleHQoKTtcclxuXHRcdFx0YW5jaG9yID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJhXCIgKTtcclxuXHRcdFx0YW5jaG9yLnNldEF0dHJpYnV0ZSggXCJocmVmXCIsIFwiI1wiICk7XHJcblx0XHRcdGFuY2hvci5hcHBlbmRDaGlsZCggZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoIHRleHQgKSApO1xyXG5cclxuXHRcdFx0Ly8gQXJlIHdlIGluc2lkZSBhbiBvcHRncm91cD9cclxuXHRcdFx0aWYgKCBwYXJlbnQgIT09IHNlbGVjdCAmJiBwYXJlbnQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gXCJvcHRncm91cFwiICkge1xyXG5cdFx0XHRcdG9wdExhYmVsID0gcGFyZW50LmdldEF0dHJpYnV0ZSggXCJsYWJlbFwiICk7XHJcblx0XHRcdFx0aWYgKCBvcHRMYWJlbCAhPT0gb3B0R3JvdXAgKSB7XHJcblx0XHRcdFx0XHRkaXZpZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJsaVwiICk7XHJcblx0XHRcdFx0XHRkaXZpZGVyLnNldEF0dHJpYnV0ZSggZGF0YVJvbGVBdHRyLCBcImxpc3QtZGl2aWRlclwiICk7XHJcblx0XHRcdFx0XHRkaXZpZGVyLnNldEF0dHJpYnV0ZSggXCJyb2xlXCIsIFwib3B0aW9uXCIgKTtcclxuXHRcdFx0XHRcdGRpdmlkZXIuc2V0QXR0cmlidXRlKCBcInRhYmluZGV4XCIsIFwiLTFcIiApO1xyXG5cdFx0XHRcdFx0ZGl2aWRlci5hcHBlbmRDaGlsZCggZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoIG9wdExhYmVsICkgKTtcclxuXHRcdFx0XHRcdGZyYWdtZW50LmFwcGVuZENoaWxkKCBkaXZpZGVyICk7XHJcblx0XHRcdFx0XHRvcHRHcm91cCA9IG9wdExhYmVsO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aWYgKCBuZWVkUGxhY2Vob2xkZXIgJiYgKCAhb3B0aW9uLmdldEF0dHJpYnV0ZSggXCJ2YWx1ZVwiICkgfHwgdGV4dC5sZW5ndGggPT09IDAgfHwgJG9wdGlvbi5qcW1EYXRhKCBcInBsYWNlaG9sZGVyXCIgKSApICkge1xyXG5cdFx0XHRcdG5lZWRQbGFjZWhvbGRlciA9IGZhbHNlO1xyXG5cdFx0XHRcdGlzUGxhY2Vob2xkZXJJdGVtID0gdHJ1ZTtcclxuXHJcblx0XHRcdFx0Ly8gSWYgd2UgaGF2ZSBpZGVudGlmaWVkIGEgcGxhY2Vob2xkZXIsIHJlY29yZCB0aGUgZmFjdCB0aGF0IGl0IHdhc1xyXG5cdFx0XHRcdC8vIHVzIHdobyBoYXZlIGFkZGVkIHRoZSBwbGFjZWhvbGRlciB0byB0aGUgb3B0aW9uIGFuZCBtYXJrIGl0XHJcblx0XHRcdFx0Ly8gcmV0cm9hY3RpdmVseSBpbiB0aGUgc2VsZWN0IGFzIHdlbGxcclxuXHRcdFx0XHRpZiAoIG51bGwgPT09IG9wdGlvbi5nZXRBdHRyaWJ1dGUoIGRhdGFQbGFjZWhvbGRlckF0dHIgKSApIHtcclxuXHRcdFx0XHRcdHRoaXMuX3JlbW92ZVBsYWNlaG9sZGVyQXR0ciA9IHRydWU7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdG9wdGlvbi5zZXRBdHRyaWJ1dGUoIGRhdGFQbGFjZWhvbGRlckF0dHIsIHRydWUgKTtcclxuXHRcdFx0XHRpZiAoIG8uaGlkZVBsYWNlaG9sZGVyTWVudUl0ZW1zICkge1xyXG5cdFx0XHRcdFx0Y2xhc3Nlcy5wdXNoKCBcInVpLXNjcmVlbi1oaWRkZW5cIiApO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRpZiAoIHBsYWNlaG9sZGVyICE9PSB0ZXh0ICkge1xyXG5cdFx0XHRcdFx0cGxhY2Vob2xkZXIgPSBzZWxmLnBsYWNlaG9sZGVyID0gdGV4dDtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGl0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcImxpXCIgKTtcclxuXHRcdFx0aWYgKCBvcHRpb24uZGlzYWJsZWQgKSB7XHJcblx0XHRcdFx0Y2xhc3Nlcy5wdXNoKCBcInVpLXN0YXRlLWRpc2FibGVkXCIgKTtcclxuXHRcdFx0XHRpdGVtLnNldEF0dHJpYnV0ZSggXCJhcmlhLWRpc2FibGVkXCIsIHRydWUgKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRpdGVtLnNldEF0dHJpYnV0ZSggZGF0YUluZGV4QXR0ciwgaSApO1xyXG5cdFx0XHRpdGVtLnNldEF0dHJpYnV0ZSggZGF0YUljb25BdHRyLCBkYXRhSWNvbiApO1xyXG5cdFx0XHRpZiAoIGlzUGxhY2Vob2xkZXJJdGVtICkge1xyXG5cdFx0XHRcdGl0ZW0uc2V0QXR0cmlidXRlKCBkYXRhUGxhY2Vob2xkZXJBdHRyLCB0cnVlICk7XHJcblx0XHRcdH1cclxuXHRcdFx0aXRlbS5jbGFzc05hbWUgPSBjbGFzc2VzLmpvaW4oIFwiIFwiICk7XHJcblx0XHRcdGl0ZW0uc2V0QXR0cmlidXRlKCBcInJvbGVcIiwgXCJvcHRpb25cIiApO1xyXG5cdFx0XHRhbmNob3Iuc2V0QXR0cmlidXRlKCBcInRhYmluZGV4XCIsIFwiLTFcIiApO1xyXG5cdFx0XHRpZiAoIHRoaXMuaXNNdWx0aXBsZSApIHtcclxuXHRcdFx0XHQkKCBhbmNob3IgKS5hZGRDbGFzcyggXCJ1aS1idG4gdWktY2hlY2tib3gtb2ZmIHVpLWJ0bi1pY29uLXJpZ2h0XCIgKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aXRlbS5hcHBlbmRDaGlsZCggYW5jaG9yICk7XHJcblx0XHRcdGZyYWdtZW50LmFwcGVuZENoaWxkKCBpdGVtICk7XHJcblx0XHR9XHJcblxyXG5cdFx0c2VsZi5saXN0WzBdLmFwcGVuZENoaWxkKCBmcmFnbWVudCApO1xyXG5cclxuXHRcdC8vIEhpZGUgaGVhZGVyIGlmIGl0J3Mgbm90IGEgbXVsdGlzZWxlY3QgYW5kIHRoZXJlJ3Mgbm8gcGxhY2Vob2xkZXJcclxuXHRcdGlmICggIXRoaXMuaXNNdWx0aXBsZSAmJiAhcGxhY2Vob2xkZXIubGVuZ3RoICkge1xyXG5cdFx0XHR0aGlzLmhlYWRlci5hZGRDbGFzcyggXCJ1aS1zY3JlZW4taGlkZGVuXCIgKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHRoaXMuaGVhZGVyVGl0bGUudGV4dCggdGhpcy5wbGFjZWhvbGRlciApO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIE5vdyBwb3B1bGF0ZWQsIGNyZWF0ZSBsaXN0dmlld1xyXG5cdFx0c2VsZi5saXN0Lmxpc3R2aWV3KCk7XHJcblx0fSxcclxuXHJcblx0X2J1dHRvbjogZnVuY3Rpb24oKSB7XHJcblx0XHRyZXR1cm4gdGhpcy5vcHRpb25zLm5hdGl2ZU1lbnUgP1xyXG5cdFx0XHR0aGlzLl9zdXBlcigpIDpcclxuXHRcdFx0JCggXCI8YT5cIiwge1xyXG5cdFx0XHRcdFwiaHJlZlwiOiBcIiNcIixcclxuXHRcdFx0XHRcInJvbGVcIjogXCJidXR0b25cIixcclxuXHRcdFx0XHQvLyBUT0RPIHZhbHVlIGlzIHVuZGVmaW5lZCBhdCBjcmVhdGlvblxyXG5cdFx0XHRcdFwiaWRcIjogdGhpcy5idXR0b25JZCxcclxuXHRcdFx0XHRcImFyaWEtaGFzcG9wdXBcIjogXCJ0cnVlXCIsXHJcblxyXG5cdFx0XHRcdC8vIFRPRE8gdmFsdWUgaXMgdW5kZWZpbmVkIGF0IGNyZWF0aW9uXHJcblx0XHRcdFx0XCJhcmlhLW93bnNcIjogdGhpcy5tZW51SWRcclxuXHRcdFx0fSk7XHJcblx0fSxcclxuXHJcblx0X2Rlc3Ryb3k6IGZ1bmN0aW9uKCkge1xyXG5cclxuXHRcdGlmICggIXRoaXMub3B0aW9ucy5uYXRpdmVNZW51ICkge1xyXG5cdFx0XHR0aGlzLmNsb3NlKCk7XHJcblxyXG5cdFx0XHQvLyBSZXN0b3JlIHRoZSB0YWJpbmRleCBhdHRyaWJ1dGUgdG8gaXRzIG9yaWdpbmFsIHZhbHVlXHJcblx0XHRcdGlmICggdGhpcy5fb3JpZ1RhYkluZGV4ICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdFx0aWYgKCB0aGlzLl9vcmlnVGFiSW5kZXggIT09IGZhbHNlICkge1xyXG5cdFx0XHRcdFx0dGhpcy5zZWxlY3QuYXR0ciggXCJ0YWJpbmRleFwiLCB0aGlzLl9vcmlnVGFiSW5kZXggKTtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0dGhpcy5zZWxlY3QucmVtb3ZlQXR0ciggXCJ0YWJpbmRleFwiICk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBSZW1vdmUgdGhlIHBsYWNlaG9sZGVyIGF0dHJpYnV0ZSBpZiB3ZSB3ZXJlIHRoZSBvbmVzIHRvIGFkZCBpdFxyXG5cdFx0XHRpZiAoIHRoaXMuX3JlbW92ZVBsYWNlaG9sZGVyQXR0ciApIHtcclxuXHRcdFx0XHR0aGlzLl9zZWxlY3RPcHRpb25zKCkucmVtb3ZlQXR0ciggXCJkYXRhLVwiICsgJC5tb2JpbGUubnMgKyBcInBsYWNlaG9sZGVyXCIgKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gUmVtb3ZlIHRoZSBwb3B1cFxyXG5cdFx0XHR0aGlzLmxpc3Rib3gucmVtb3ZlKCk7XHJcblxyXG5cdFx0XHQvLyBSZW1vdmUgdGhlIGRpYWxvZ1xyXG5cdFx0XHR0aGlzLm1lbnVQYWdlLnJlbW92ZSgpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIENoYWluIHVwXHJcblx0XHR0aGlzLl9zdXBlcigpO1xyXG5cdH1cclxufSk7XHJcblxyXG59KSggalF1ZXJ5ICk7XHJcblxyXG5cclxuLy8gYnV0dG9uTWFya3VwIGlzIGRlcHJlY2F0ZWQgYXMgb2YgMS40LjAgYW5kIHdpbGwgYmUgcmVtb3ZlZCBpbiAxLjUuMC5cclxuXHJcbihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xyXG5cclxuLy8gR2VuZXJhbCBwb2xpY3k6IERvIG5vdCBhY2Nlc3MgZGF0YS0qIGF0dHJpYnV0ZXMgZXhjZXB0IGR1cmluZyBlbmhhbmNlbWVudC5cclxuLy8gSW4gYWxsIG90aGVyIGNhc2VzIHdlIGRldGVybWluZSB0aGUgc3RhdGUgb2YgdGhlIGJ1dHRvbiBleGNsdXNpdmVseSBmcm9tIGl0c1xyXG4vLyBjbGFzc05hbWUuIFRoYXQncyB3aHkgb3B0aW9uc1RvQ2xhc3NlcyBleHBlY3RzIGEgZnVsbCBjb21wbGVtZW50IG9mIG9wdGlvbnMsXHJcbi8vIGFuZCB0aGUgalF1ZXJ5IHBsdWdpbiBjb21wbGV0ZXMgdGhlIHNldCBvZiBvcHRpb25zIGZyb20gdGhlIGRlZmF1bHQgdmFsdWVzLlxyXG5cclxuLy8gTWFwIGNsYXNzZXMgdG8gYnV0dG9uTWFya3VwIGJvb2xlYW4gb3B0aW9ucyAtIHVzZWQgaW4gY2xhc3NOYW1lVG9PcHRpb25zKClcclxudmFyIHJldmVyc2VCb29sT3B0aW9uTWFwID0ge1xyXG5cdFx0XCJ1aS1zaGFkb3dcIiA6IFwic2hhZG93XCIsXHJcblx0XHRcInVpLWNvcm5lci1hbGxcIiA6IFwiY29ybmVyc1wiLFxyXG5cdFx0XCJ1aS1idG4taW5saW5lXCIgOiBcImlubGluZVwiLFxyXG5cdFx0XCJ1aS1zaGFkb3ctaWNvblwiIDogXCJpY29uc2hhZG93XCIsIC8qIFRPRE86IFJlbW92ZSBpbiAxLjUgKi9cclxuXHRcdFwidWktbWluaVwiIDogXCJtaW5pXCJcclxuXHR9LFxyXG5cdGdldEF0dHJGaXhlZCA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIHJldCA9ICQubW9iaWxlLmdldEF0dHJpYnV0ZS5hcHBseSggdGhpcywgYXJndW1lbnRzICk7XHJcblxyXG5cdFx0cmV0dXJuICggcmV0ID09IG51bGwgPyB1bmRlZmluZWQgOiByZXQgKTtcclxuXHR9LFxyXG5cdGNhcGl0YWxMZXR0ZXJzUkUgPSAvW0EtWl0vZztcclxuXHJcbi8vIG9wdGlvbnNUb0NsYXNzZXM6XHJcbi8vIEBvcHRpb25zOiBBIGNvbXBsZXRlIHNldCBvZiBvcHRpb25zIHRvIGNvbnZlcnQgdG8gY2xhc3MgbmFtZXMuXHJcbi8vIEBleGlzdGluZ0NsYXNzZXM6IGV4dHJhIGNsYXNzZXMgdG8gYWRkIHRvIHRoZSByZXN1bHRcclxuLy9cclxuLy8gQ29udmVydHMgQG9wdGlvbnMgdG8gYnV0dG9uTWFya3VwIGNsYXNzZXMgYW5kIHJldHVybnMgdGhlIHJlc3VsdCBhcyBhbiBhcnJheVxyXG4vLyB0aGF0IGNhbiBiZSBjb252ZXJ0ZWQgdG8gYW4gZWxlbWVudCdzIGNsYXNzTmFtZSB3aXRoIC5qb2luKCBcIiBcIiApLiBBbGxcclxuLy8gcG9zc2libGUgb3B0aW9ucyBtdXN0IGJlIHNldCBpbnNpZGUgQG9wdGlvbnMuIFVzZSAkLmZuLmJ1dHRvbk1hcmt1cC5kZWZhdWx0c1xyXG4vLyB0byBnZXQgYSBjb21wbGV0ZSBzZXQgYW5kIHVzZSAkLmV4dGVuZCB0byBvdmVycmlkZSB5b3VyIGNob2ljZSBvZiBvcHRpb25zXHJcbi8vIGZyb20gdGhhdCBzZXQuXHJcbmZ1bmN0aW9uIG9wdGlvbnNUb0NsYXNzZXMoIG9wdGlvbnMsIGV4aXN0aW5nQ2xhc3NlcyApIHtcclxuXHR2YXIgY2xhc3NlcyA9IGV4aXN0aW5nQ2xhc3NlcyA/IGV4aXN0aW5nQ2xhc3NlcyA6IFtdO1xyXG5cclxuXHQvLyBBZGQgY2xhc3NlcyB0byB0aGUgYXJyYXkgLSBmaXJzdCB1aS1idG5cclxuXHRjbGFzc2VzLnB1c2goIFwidWktYnRuXCIgKTtcclxuXHJcblx0Ly8gSWYgdGhlcmUgaXMgYSB0aGVtZVxyXG5cdGlmICggb3B0aW9ucy50aGVtZSApIHtcclxuXHRcdGNsYXNzZXMucHVzaCggXCJ1aS1idG4tXCIgKyBvcHRpb25zLnRoZW1lICk7XHJcblx0fVxyXG5cclxuXHQvLyBJZiB0aGVyZSdzIGFuIGljb24sIGFkZCB0aGUgaWNvbi1yZWxhdGVkIGNsYXNzZXNcclxuXHRpZiAoIG9wdGlvbnMuaWNvbiApIHtcclxuXHRcdGNsYXNzZXMgPSBjbGFzc2VzLmNvbmNhdChbXHJcblx0XHRcdFwidWktaWNvbi1cIiArIG9wdGlvbnMuaWNvbixcclxuXHRcdFx0XCJ1aS1idG4taWNvbi1cIiArIG9wdGlvbnMuaWNvbnBvc1xyXG5cdFx0XSk7XHJcblx0XHRpZiAoIG9wdGlvbnMuaWNvbnNoYWRvdyApIHtcclxuXHRcdFx0Y2xhc3Nlcy5wdXNoKCBcInVpLXNoYWRvdy1pY29uXCIgKTsgLyogVE9ETzogUmVtb3ZlIGluIDEuNSAqL1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0Ly8gQWRkIHRoZSBhcHByb3ByaWF0ZSBjbGFzcyBmb3IgZWFjaCBib29sZWFuIG9wdGlvblxyXG5cdGlmICggb3B0aW9ucy5pbmxpbmUgKSB7XHJcblx0XHRjbGFzc2VzLnB1c2goIFwidWktYnRuLWlubGluZVwiICk7XHJcblx0fVxyXG5cdGlmICggb3B0aW9ucy5zaGFkb3cgKSB7XHJcblx0XHRjbGFzc2VzLnB1c2goIFwidWktc2hhZG93XCIgKTtcclxuXHR9XHJcblx0aWYgKCBvcHRpb25zLmNvcm5lcnMgKSB7XHJcblx0XHRjbGFzc2VzLnB1c2goIFwidWktY29ybmVyLWFsbFwiICk7XHJcblx0fVxyXG5cdGlmICggb3B0aW9ucy5taW5pICkge1xyXG5cdFx0Y2xhc3Nlcy5wdXNoKCBcInVpLW1pbmlcIiApO1xyXG5cdH1cclxuXHJcblx0Ly8gQ3JlYXRlIGEgc3RyaW5nIGZyb20gdGhlIGFycmF5IGFuZCByZXR1cm4gaXRcclxuXHRyZXR1cm4gY2xhc3NlcztcclxufVxyXG5cclxuLy8gY2xhc3NOYW1lVG9PcHRpb25zOlxyXG4vLyBAY2xhc3NlczogQSBzdHJpbmcgY29udGFpbmluZyBhIC5jbGFzc05hbWUtc3R5bGUgc3BhY2Utc2VwYXJhdGVkIGNsYXNzIGxpc3RcclxuLy9cclxuLy8gTG9vcHMgb3ZlciBAY2xhc3NlcyBhbmQgY2FsY3VsYXRlcyBhbiBvcHRpb25zIG9iamVjdCBiYXNlZCBvbiB0aGVcclxuLy8gYnV0dG9uTWFya3VwLXJlbGF0ZWQgY2xhc3NlcyBpdCBmaW5kcy4gSXQgcmVjb3JkcyB1bnJlY29nbml6ZWQgY2xhc3NlcyBpbiBhblxyXG4vLyBhcnJheS5cclxuLy9cclxuLy8gUmV0dXJuczogQW4gb2JqZWN0IGNvbnRhaW5pbmcgdGhlIGZvbGxvd2luZyBpdGVtczpcclxuLy9cclxuLy8gXCJvcHRpb25zXCI6IGJ1dHRvbk1hcmt1cCBvcHRpb25zIGZvdW5kIHRvIGJlIHByZXNlbnQgYmVjYXVzZSBvZiB0aGVcclxuLy8gcHJlc2VuY2UvYWJzZW5jZSBvZiBjb3JyZXNwb25kaW5nIGNsYXNzZXNcclxuLy9cclxuLy8gXCJ1bmtub3duQ2xhc3Nlc1wiOiBhIHN0cmluZyBjb250YWluaW5nIGFsbCB0aGUgbm9uLWJ1dHRvbk1hcmt1cC1yZWxhdGVkXHJcbi8vIGNsYXNzZXMgZm91bmQgaW4gQGNsYXNzZXNcclxuLy9cclxuLy8gXCJhbHJlYWR5RW5oYW5jZWRcIjogQSBib29sZWFuIGluZGljYXRpbmcgd2hldGhlciB0aGUgdWktYnRuIGNsYXNzIHdhcyBhbW9uZ1xyXG4vLyB0aG9zZSBmb3VuZCB0byBiZSBwcmVzZW50XHJcbmZ1bmN0aW9uIGNsYXNzTmFtZVRvT3B0aW9ucyggY2xhc3NlcyApIHtcclxuXHR2YXIgaWR4LCBtYXAsIHVua25vd25DbGFzcyxcclxuXHRcdGFscmVhZHlFbmhhbmNlZCA9IGZhbHNlLFxyXG5cdFx0bm9JY29uID0gdHJ1ZSxcclxuXHRcdG8gPSB7XHJcblx0XHRcdGljb246IFwiXCIsXHJcblx0XHRcdGlubGluZTogZmFsc2UsXHJcblx0XHRcdHNoYWRvdzogZmFsc2UsXHJcblx0XHRcdGNvcm5lcnM6IGZhbHNlLFxyXG5cdFx0XHRpY29uc2hhZG93OiBmYWxzZSxcclxuXHRcdFx0bWluaTogZmFsc2VcclxuXHRcdH0sXHJcblx0XHR1bmtub3duQ2xhc3NlcyA9IFtdO1xyXG5cclxuXHRjbGFzc2VzID0gY2xhc3Nlcy5zcGxpdCggXCIgXCIgKTtcclxuXHJcblx0Ly8gTG9vcCBvdmVyIHRoZSBjbGFzc2VzXHJcblx0Zm9yICggaWR4ID0gMCA7IGlkeCA8IGNsYXNzZXMubGVuZ3RoIDsgaWR4KysgKSB7XHJcblxyXG5cdFx0Ly8gQXNzdW1lIGl0J3MgYW4gdW5yZWNvZ25pemVkIGNsYXNzXHJcblx0XHR1bmtub3duQ2xhc3MgPSB0cnVlO1xyXG5cclxuXHRcdC8vIFJlY29nbml6ZSBib29sZWFuIG9wdGlvbnMgZnJvbSB0aGUgcHJlc2VuY2Ugb2YgY2xhc3Nlc1xyXG5cdFx0bWFwID0gcmV2ZXJzZUJvb2xPcHRpb25NYXBbIGNsYXNzZXNbIGlkeCBdIF07XHJcblx0XHRpZiAoIG1hcCAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHR1bmtub3duQ2xhc3MgPSBmYWxzZTtcclxuXHRcdFx0b1sgbWFwIF0gPSB0cnVlO1xyXG5cclxuXHRcdC8vIFJlY29nbml6ZSB0aGUgcHJlc2VuY2Ugb2YgYW4gaWNvbiBhbmQgZXN0YWJsaXNoIHRoZSBpY29uIHBvc2l0aW9uXHJcblx0XHR9IGVsc2UgaWYgKCBjbGFzc2VzWyBpZHggXS5pbmRleE9mKCBcInVpLWJ0bi1pY29uLVwiICkgPT09IDAgKSB7XHJcblx0XHRcdHVua25vd25DbGFzcyA9IGZhbHNlO1xyXG5cdFx0XHRub0ljb24gPSBmYWxzZTtcclxuXHRcdFx0by5pY29ucG9zID0gY2xhc3Nlc1sgaWR4IF0uc3Vic3RyaW5nKCAxMiApO1xyXG5cclxuXHRcdC8vIEVzdGFibGlzaCB3aGljaCBpY29uIGlzIHByZXNlbnRcclxuXHRcdH0gZWxzZSBpZiAoIGNsYXNzZXNbIGlkeCBdLmluZGV4T2YoIFwidWktaWNvbi1cIiApID09PSAwICkge1xyXG5cdFx0XHR1bmtub3duQ2xhc3MgPSBmYWxzZTtcclxuXHRcdFx0by5pY29uID0gY2xhc3Nlc1sgaWR4IF0uc3Vic3RyaW5nKCA4ICk7XHJcblxyXG5cdFx0Ly8gRXN0YWJsaXNoIHRoZSB0aGVtZSAtIHRoaXMgcmVjb2duaXplcyBvbmUtbGV0dGVyIHRoZW1lIHN3YXRjaCBuYW1lc1xyXG5cdFx0fSBlbHNlIGlmICggY2xhc3Nlc1sgaWR4IF0uaW5kZXhPZiggXCJ1aS1idG4tXCIgKSA9PT0gMCAmJiBjbGFzc2VzWyBpZHggXS5sZW5ndGggPT09IDggKSB7XHJcblx0XHRcdHVua25vd25DbGFzcyA9IGZhbHNlO1xyXG5cdFx0XHRvLnRoZW1lID0gY2xhc3Nlc1sgaWR4IF0uc3Vic3RyaW5nKCA3ICk7XHJcblxyXG5cdFx0Ly8gUmVjb2duaXplIHRoYXQgdGhpcyBlbGVtZW50IGhhcyBhbHJlYWR5IGJlZW4gYnV0dG9uTWFya3VwLWVuaGFuY2VkXHJcblx0XHR9IGVsc2UgaWYgKCBjbGFzc2VzWyBpZHggXSA9PT0gXCJ1aS1idG5cIiApIHtcclxuXHRcdFx0dW5rbm93bkNsYXNzID0gZmFsc2U7XHJcblx0XHRcdGFscmVhZHlFbmhhbmNlZCA9IHRydWU7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gSWYgdGhpcyBjbGFzcyBoYXMgbm90IGJlZW4gcmVjb2duaXplZCwgYWRkIGl0IHRvIHRoZSBsaXN0XHJcblx0XHRpZiAoIHVua25vd25DbGFzcyApIHtcclxuXHRcdFx0dW5rbm93bkNsYXNzZXMucHVzaCggY2xhc3Nlc1sgaWR4IF0gKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8vIElmIGEgXCJ1aS1idG4taWNvbi0qXCIgaWNvbiBwb3NpdGlvbiBjbGFzcyBpcyBhYnNlbnQgdGhlcmUgY2Fubm90IGJlIGFuIGljb25cclxuXHRpZiAoIG5vSWNvbiApIHtcclxuXHRcdG8uaWNvbiA9IFwiXCI7XHJcblx0fVxyXG5cclxuXHRyZXR1cm4ge1xyXG5cdFx0b3B0aW9uczogbyxcclxuXHRcdHVua25vd25DbGFzc2VzOiB1bmtub3duQ2xhc3NlcyxcclxuXHRcdGFscmVhZHlFbmhhbmNlZDogYWxyZWFkeUVuaGFuY2VkXHJcblx0fTtcclxufVxyXG5cclxuZnVuY3Rpb24gY2FtZWxDYXNlMkh5cGhlbmF0ZWQoIGMgKSB7XHJcblx0cmV0dXJuIFwiLVwiICsgYy50b0xvd2VyQ2FzZSgpO1xyXG59XHJcblxyXG4vLyAkLmZuLmJ1dHRvbk1hcmt1cDpcclxuLy8gRE9NOiBnZXRzL3NldHMgLmNsYXNzTmFtZVxyXG4vL1xyXG4vLyBAb3B0aW9uczogb3B0aW9ucyB0byBhcHBseSB0byB0aGUgZWxlbWVudHMgaW4gdGhlIGpRdWVyeSBvYmplY3RcclxuLy8gQG92ZXJ3cml0ZUNsYXNzZXM6IGJvb2xlYW4gaW5kaWNhdGluZyB3aGV0aGVyIHRvIGhvbm91ciBleGlzdGluZyBjbGFzc2VzXHJcbi8vXHJcbi8vIENhbGN1bGF0ZXMgdGhlIGNsYXNzZXMgdG8gYXBwbHkgdG8gdGhlIGVsZW1lbnRzIGluIHRoZSBqUXVlcnkgb2JqZWN0IGJhc2VkIG9uXHJcbi8vIHRoZSBvcHRpb25zIHBhc3NlZCBpbi4gSWYgQG92ZXJ3cml0ZUNsYXNzZXMgaXMgdHJ1ZSwgaXQgc2V0cyB0aGUgY2xhc3NOYW1lXHJcbi8vIHByb3BlcnR5IG9mIGVhY2ggZWxlbWVudCBpbiB0aGUgalF1ZXJ5IG9iamVjdCB0byB0aGUgYnV0dG9uTWFya3VwIGNsYXNzZXNcclxuLy8gaXQgY2FsY3VsYXRlcyBiYXNlZCBvbiB0aGUgb3B0aW9ucyBwYXNzZWQgaW4uXHJcbi8vXHJcbi8vIElmIHlvdSB3aXNoIHRvIHByZXNlcnZlIGFueSBjbGFzc2VzIHRoYXQgYXJlIGFscmVhZHkgcHJlc2VudCBvbiB0aGUgZWxlbWVudHNcclxuLy8gaW5zaWRlIHRoZSBqUXVlcnkgb2JqZWN0LCBpbmNsdWRpbmcgYnV0dG9uTWFya3VwLXJlbGF0ZWQgY2xhc3NlcyB0aGF0IHdlcmVcclxuLy8gYWRkZWQgYnkgYSBwcmV2aW91cyBjYWxsIHRvICQuZm4uYnV0dG9uTWFya3VwKCkgb3IgZHVyaW5nIHBhZ2UgZW5oYW5jZW1lbnRcclxuLy8gdGhlbiB5b3Ugc2hvdWxkIG9taXQgQG92ZXJ3cml0ZUNsYXNzZXMgb3Igc2V0IGl0IHRvIGZhbHNlLlxyXG4kLmZuLmJ1dHRvbk1hcmt1cCA9IGZ1bmN0aW9uKCBvcHRpb25zLCBvdmVyd3JpdGVDbGFzc2VzICkge1xyXG5cdHZhciBpZHgsIGRhdGEsIGVsLCByZXRyaWV2ZWRPcHRpb25zLCBvcHRpb25LZXksXHJcblx0XHRkZWZhdWx0cyA9ICQuZm4uYnV0dG9uTWFya3VwLmRlZmF1bHRzO1xyXG5cclxuXHRmb3IgKCBpZHggPSAwIDsgaWR4IDwgdGhpcy5sZW5ndGggOyBpZHgrKyApIHtcclxuXHRcdGVsID0gdGhpc1sgaWR4IF07XHJcblx0XHRkYXRhID0gb3ZlcndyaXRlQ2xhc3NlcyA/XHJcblxyXG5cdFx0XHQvLyBBc3N1bWUgdGhpcyBlbGVtZW50IGlzIG5vdCBlbmhhbmNlZCBhbmQgaWdub3JlIGl0cyBjbGFzc2VzXHJcblx0XHRcdHsgYWxyZWFkeUVuaGFuY2VkOiBmYWxzZSwgdW5rbm93bkNsYXNzZXM6IFtdIH0gOlxyXG5cclxuXHRcdFx0Ly8gT3RoZXJ3aXNlIGFuYWx5emUgZXhpc3RpbmcgY2xhc3NlcyB0byBlc3RhYmxpc2ggZXhpc3Rpbmcgb3B0aW9ucyBhbmRcclxuXHRcdFx0Ly8gY2xhc3Nlc1xyXG5cdFx0XHRjbGFzc05hbWVUb09wdGlvbnMoIGVsLmNsYXNzTmFtZSApO1xyXG5cclxuXHRcdHJldHJpZXZlZE9wdGlvbnMgPSAkLmV4dGVuZCgge30sXHJcblxyXG5cdFx0XHQvLyBJZiB0aGUgZWxlbWVudCBhbHJlYWR5IGhhcyB0aGUgY2xhc3MgdWktYnRuLCB0aGVuIHdlIGFzc3VtZSB0aGF0XHJcblx0XHRcdC8vIGl0IGhhcyBwYXNzZWQgdGhyb3VnaCBidXR0b25NYXJrdXAgYmVmb3JlIC0gb3RoZXJ3aXNlLCB0aGUgb3B0aW9uc1xyXG5cdFx0XHQvLyByZXR1cm5lZCBieSBjbGFzc05hbWVUb09wdGlvbnMgZG8gbm90IGNvcnJlY3RseSByZWZsZWN0IHRoZSBzdGF0ZSBvZlxyXG5cdFx0XHQvLyB0aGUgZWxlbWVudFxyXG5cdFx0XHQoIGRhdGEuYWxyZWFkeUVuaGFuY2VkID8gZGF0YS5vcHRpb25zIDoge30gKSxcclxuXHJcblx0XHRcdC8vIEZpbmFsbHksIGFwcGx5IHRoZSBvcHRpb25zIHBhc3NlZCBpblxyXG5cdFx0XHRvcHRpb25zICk7XHJcblxyXG5cdFx0Ly8gSWYgdGhpcyBpcyB0aGUgZmlyc3QgY2FsbCBvbiB0aGlzIGVsZW1lbnQsIHJldHJpZXZlIHJlbWFpbmluZyBvcHRpb25zXHJcblx0XHQvLyBmcm9tIHRoZSBkYXRhLWF0dHJpYnV0ZXNcclxuXHRcdGlmICggIWRhdGEuYWxyZWFkeUVuaGFuY2VkICkge1xyXG5cdFx0XHRmb3IgKCBvcHRpb25LZXkgaW4gZGVmYXVsdHMgKSB7XHJcblx0XHRcdFx0aWYgKCByZXRyaWV2ZWRPcHRpb25zWyBvcHRpb25LZXkgXSA9PT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRcdFx0cmV0cmlldmVkT3B0aW9uc1sgb3B0aW9uS2V5IF0gPSBnZXRBdHRyRml4ZWQoIGVsLFxyXG5cdFx0XHRcdFx0XHRvcHRpb25LZXkucmVwbGFjZSggY2FwaXRhbExldHRlcnNSRSwgY2FtZWxDYXNlMkh5cGhlbmF0ZWQgKVxyXG5cdFx0XHRcdFx0KTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRlbC5jbGFzc05hbWUgPSBvcHRpb25zVG9DbGFzc2VzKFxyXG5cclxuXHRcdFx0Ly8gTWVyZ2UgYWxsIHRoZSBvcHRpb25zIGFuZCBhcHBseSB0aGVtIGFzIGNsYXNzZXNcclxuXHRcdFx0JC5leHRlbmQoIHt9LFxyXG5cclxuXHRcdFx0XHQvLyBUaGUgZGVmYXVsdHMgZm9ybSB0aGUgYmFzaXNcclxuXHRcdFx0XHRkZWZhdWx0cyxcclxuXHJcblx0XHRcdFx0Ly8gQWRkIHRoZSBjb21wdXRlZCBvcHRpb25zXHJcblx0XHRcdFx0cmV0cmlldmVkT3B0aW9uc1xyXG5cdFx0XHQpLFxyXG5cclxuXHRcdFx0Ly8gLi4uIGFuZCByZS1hcHBseSBhbnkgdW5yZWNvZ25pemVkIGNsYXNzZXMgdGhhdCB3ZXJlIGZvdW5kXHJcblx0XHRcdGRhdGEudW5rbm93bkNsYXNzZXMgKS5qb2luKCBcIiBcIiApO1xyXG5cdFx0aWYgKCBlbC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgIT09IFwiYnV0dG9uXCIgKSB7XHJcblx0XHRcdGVsLnNldEF0dHJpYnV0ZSggXCJyb2xlXCIsIFwiYnV0dG9uXCIgKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHJldHVybiB0aGlzO1xyXG59O1xyXG5cclxuLy8gYnV0dG9uTWFya3VwIGRlZmF1bHRzLiBUaGlzIG11c3QgYmUgYSBjb21wbGV0ZSBzZXQsIGkuZS4sIGEgdmFsdWUgbXVzdCBiZVxyXG4vLyBnaXZlbiBoZXJlIGZvciBhbGwgcmVjb2duaXplZCBvcHRpb25zXHJcbiQuZm4uYnV0dG9uTWFya3VwLmRlZmF1bHRzID0ge1xyXG5cdGljb246IFwiXCIsXHJcblx0aWNvbnBvczogXCJsZWZ0XCIsXHJcblx0dGhlbWU6IG51bGwsXHJcblx0aW5saW5lOiBmYWxzZSxcclxuXHRzaGFkb3c6IHRydWUsXHJcblx0Y29ybmVyczogdHJ1ZSxcclxuXHRpY29uc2hhZG93OiBmYWxzZSwgLyogVE9ETzogUmVtb3ZlIGluIDEuNS4gT3B0aW9uIGRlcHJlY2F0ZWQgaW4gMS40LiAqL1xyXG5cdG1pbmk6IGZhbHNlXHJcbn07XHJcblxyXG4kLmV4dGVuZCggJC5mbi5idXR0b25NYXJrdXAsIHtcclxuXHRpbml0U2VsZWN0b3I6IFwiYTpqcW1EYXRhKHJvbGU9J2J1dHRvbicpLCAudWktYmFyID4gYSwgLnVpLWJhciA+IDpqcW1EYXRhKHJvbGU9J2NvbnRyb2xncm91cCcpID4gYSwgYnV0dG9uOm5vdCg6anFtRGF0YShyb2xlPSduYXZiYXInKSBidXR0b24pXCJcclxufSk7XHJcblxyXG59KSggalF1ZXJ5ICk7XHJcblxyXG5cclxuKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7XHJcblxyXG4kLndpZGdldCggXCJtb2JpbGUuY29udHJvbGdyb3VwXCIsICQuZXh0ZW5kKCB7XHJcblx0b3B0aW9uczoge1xyXG5cdFx0ZW5oYW5jZWQ6IGZhbHNlLFxyXG5cdFx0dGhlbWU6IG51bGwsXHJcblx0XHRzaGFkb3c6IGZhbHNlLFxyXG5cdFx0Y29ybmVyczogdHJ1ZSxcclxuXHRcdGV4Y2x1ZGVJbnZpc2libGU6IHRydWUsXHJcblx0XHR0eXBlOiBcInZlcnRpY2FsXCIsXHJcblx0XHRtaW5pOiBmYWxzZVxyXG5cdH0sXHJcblxyXG5cdF9jcmVhdGU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIGVsZW0gPSB0aGlzLmVsZW1lbnQsXHJcblx0XHRcdG9wdHMgPSB0aGlzLm9wdGlvbnMsXHJcblx0XHRcdGtlZXBOYXRpdmUgPSAkLm1vYmlsZS5wYWdlLnByb3RvdHlwZS5rZWVwTmF0aXZlU2VsZWN0b3IoKTtcclxuXHJcblx0XHQvLyBSdW4gYnV0dG9ubWFya3VwXHJcblx0XHRpZiAoICQuZm4uYnV0dG9uTWFya3VwICkge1xyXG5cdFx0XHR0aGlzLmVsZW1lbnRcclxuXHRcdFx0XHQuZmluZCggJC5mbi5idXR0b25NYXJrdXAuaW5pdFNlbGVjdG9yIClcclxuXHRcdFx0XHQubm90KCBrZWVwTmF0aXZlIClcclxuXHRcdFx0XHQuYnV0dG9uTWFya3VwKCk7XHJcblx0XHR9XHJcblx0XHQvLyBFbmhhbmNlIGNoaWxkIHdpZGdldHNcclxuXHRcdCQuZWFjaCggdGhpcy5fY2hpbGRXaWRnZXRzLCAkLnByb3h5KCBmdW5jdGlvbiggbnVtYmVyLCB3aWRnZXROYW1lICkge1xyXG5cdFx0XHRpZiAoICQubW9iaWxlWyB3aWRnZXROYW1lIF0gKSB7XHJcblx0XHRcdFx0dGhpcy5lbGVtZW50XHJcblx0XHRcdFx0XHQuZmluZCggJC5tb2JpbGVbIHdpZGdldE5hbWUgXS5pbml0U2VsZWN0b3IgKVxyXG5cdFx0XHRcdFx0Lm5vdCgga2VlcE5hdGl2ZSApWyB3aWRnZXROYW1lIF0oKTtcclxuXHRcdFx0fVxyXG5cdFx0fSwgdGhpcyApKTtcclxuXHJcblx0XHQkLmV4dGVuZCggdGhpcywge1xyXG5cdFx0XHRfdWk6IG51bGwsXHJcblx0XHRcdF9pbml0aWFsUmVmcmVzaDogdHJ1ZVxyXG5cdFx0fSk7XHJcblxyXG5cdFx0aWYgKCBvcHRzLmVuaGFuY2VkICkge1xyXG5cdFx0XHR0aGlzLl91aSA9IHtcclxuXHRcdFx0XHRncm91cExlZ2VuZDogZWxlbS5jaGlsZHJlbiggXCIudWktY29udHJvbGdyb3VwLWxhYmVsXCIgKS5jaGlsZHJlbigpLFxyXG5cdFx0XHRcdGNoaWxkV3JhcHBlcjogZWxlbS5jaGlsZHJlbiggXCIudWktY29udHJvbGdyb3VwLWNvbnRyb2xzXCIgKVxyXG5cdFx0XHR9O1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0dGhpcy5fdWkgPSB0aGlzLl9lbmhhbmNlKCk7XHJcblx0XHR9XHJcblxyXG5cdH0sXHJcblxyXG5cdF9jaGlsZFdpZGdldHM6IFsgXCJjaGVja2JveHJhZGlvXCIsIFwic2VsZWN0bWVudVwiLCBcImJ1dHRvblwiIF0sXHJcblxyXG5cdF90aGVtZUNsYXNzRnJvbU9wdGlvbjogZnVuY3Rpb24oIHZhbHVlICkge1xyXG5cdFx0cmV0dXJuICggdmFsdWUgPyAoIHZhbHVlID09PSBcIm5vbmVcIiA/IFwiXCIgOiBcInVpLWdyb3VwLXRoZW1lLVwiICsgdmFsdWUgKSA6IFwiXCIgKTtcclxuXHR9LFxyXG5cclxuXHRfZW5oYW5jZTogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgZWxlbSA9IHRoaXMuZWxlbWVudCxcclxuXHRcdFx0b3B0cyA9IHRoaXMub3B0aW9ucyxcclxuXHRcdFx0dWkgPSB7XHJcblx0XHRcdFx0Z3JvdXBMZWdlbmQ6IGVsZW0uY2hpbGRyZW4oIFwibGVnZW5kXCIgKSxcclxuXHRcdFx0XHRjaGlsZFdyYXBwZXI6IGVsZW1cclxuXHRcdFx0XHRcdC5hZGRDbGFzcyggXCJ1aS1jb250cm9sZ3JvdXAgXCIgK1xyXG5cdFx0XHRcdFx0XHRcInVpLWNvbnRyb2xncm91cC1cIiArXHJcblx0XHRcdFx0XHRcdFx0KCBvcHRzLnR5cGUgPT09IFwiaG9yaXpvbnRhbFwiID8gXCJob3Jpem9udGFsXCIgOiBcInZlcnRpY2FsXCIgKSArIFwiIFwiICtcclxuXHRcdFx0XHRcdFx0dGhpcy5fdGhlbWVDbGFzc0Zyb21PcHRpb24oIG9wdHMudGhlbWUgKSArIFwiIFwiICtcclxuXHRcdFx0XHRcdFx0KCBvcHRzLmNvcm5lcnMgPyBcInVpLWNvcm5lci1hbGwgXCIgOiBcIlwiICkgK1xyXG5cdFx0XHRcdFx0XHQoIG9wdHMubWluaSA/IFwidWktbWluaSBcIiA6IFwiXCIgKSApXHJcblx0XHRcdFx0XHQud3JhcElubmVyKCBcIjxkaXYgXCIgK1xyXG5cdFx0XHRcdFx0XHRcImNsYXNzPSd1aS1jb250cm9sZ3JvdXAtY29udHJvbHMgXCIgK1xyXG5cdFx0XHRcdFx0XHRcdCggb3B0cy5zaGFkb3cgPT09IHRydWUgPyBcInVpLXNoYWRvd1wiIDogXCJcIiApICsgXCInPjwvZGl2PlwiIClcclxuXHRcdFx0XHRcdC5jaGlsZHJlbigpXHJcblx0XHRcdH07XHJcblxyXG5cdFx0aWYgKCB1aS5ncm91cExlZ2VuZC5sZW5ndGggPiAwICkge1xyXG5cdFx0XHQkKCBcIjxkaXYgcm9sZT0naGVhZGluZycgY2xhc3M9J3VpLWNvbnRyb2xncm91cC1sYWJlbCc+PC9kaXY+XCIgKVxyXG5cdFx0XHRcdC5hcHBlbmQoIHVpLmdyb3VwTGVnZW5kIClcclxuXHRcdFx0XHQucHJlcGVuZFRvKCBlbGVtICk7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHVpO1xyXG5cdH0sXHJcblxyXG5cdF9pbml0OiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMucmVmcmVzaCgpO1xyXG5cdH0sXHJcblxyXG5cdF9zZXRPcHRpb25zOiBmdW5jdGlvbiggb3B0aW9ucyApIHtcclxuXHRcdHZhciBjYWxsUmVmcmVzaCwgcmV0dXJuVmFsdWUsXHJcblx0XHRcdGVsZW0gPSB0aGlzLmVsZW1lbnQ7XHJcblxyXG5cdFx0Ly8gTXVzdCBoYXZlIG9uZSBvZiBob3Jpem9udGFsIG9yIHZlcnRpY2FsXHJcblx0XHRpZiAoIG9wdGlvbnMudHlwZSAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRlbGVtXHJcblx0XHRcdFx0LnJlbW92ZUNsYXNzKCBcInVpLWNvbnRyb2xncm91cC1ob3Jpem9udGFsIHVpLWNvbnRyb2xncm91cC12ZXJ0aWNhbFwiIClcclxuXHRcdFx0XHQuYWRkQ2xhc3MoIFwidWktY29udHJvbGdyb3VwLVwiICsgKCBvcHRpb25zLnR5cGUgPT09IFwiaG9yaXpvbnRhbFwiID8gXCJob3Jpem9udGFsXCIgOiBcInZlcnRpY2FsXCIgKSApO1xyXG5cdFx0XHRjYWxsUmVmcmVzaCA9IHRydWU7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBvcHRpb25zLnRoZW1lICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdGVsZW1cclxuXHRcdFx0XHQucmVtb3ZlQ2xhc3MoIHRoaXMuX3RoZW1lQ2xhc3NGcm9tT3B0aW9uKCB0aGlzLm9wdGlvbnMudGhlbWUgKSApXHJcblx0XHRcdFx0LmFkZENsYXNzKCB0aGlzLl90aGVtZUNsYXNzRnJvbU9wdGlvbiggb3B0aW9ucy50aGVtZSApICk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBvcHRpb25zLmNvcm5lcnMgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0ZWxlbS50b2dnbGVDbGFzcyggXCJ1aS1jb3JuZXItYWxsXCIsIG9wdGlvbnMuY29ybmVycyApO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggb3B0aW9ucy5taW5pICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdGVsZW0udG9nZ2xlQ2xhc3MoIFwidWktbWluaVwiLCBvcHRpb25zLm1pbmkgKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIG9wdGlvbnMuc2hhZG93ICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdHRoaXMuX3VpLmNoaWxkV3JhcHBlci50b2dnbGVDbGFzcyggXCJ1aS1zaGFkb3dcIiwgb3B0aW9ucy5zaGFkb3cgKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIG9wdGlvbnMuZXhjbHVkZUludmlzaWJsZSAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHR0aGlzLm9wdGlvbnMuZXhjbHVkZUludmlzaWJsZSA9IG9wdGlvbnMuZXhjbHVkZUludmlzaWJsZTtcclxuXHRcdFx0Y2FsbFJlZnJlc2ggPSB0cnVlO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVyblZhbHVlID0gdGhpcy5fc3VwZXIoIG9wdGlvbnMgKTtcclxuXHJcblx0XHRpZiAoIGNhbGxSZWZyZXNoICkge1xyXG5cdFx0XHR0aGlzLnJlZnJlc2goKTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gcmV0dXJuVmFsdWU7XHJcblx0fSxcclxuXHJcblx0Y29udGFpbmVyOiBmdW5jdGlvbigpIHtcclxuXHRcdHJldHVybiB0aGlzLl91aS5jaGlsZFdyYXBwZXI7XHJcblx0fSxcclxuXHJcblx0cmVmcmVzaDogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgJGVsID0gdGhpcy5jb250YWluZXIoKSxcclxuXHRcdFx0ZWxzID0gJGVsLmZpbmQoIFwiLnVpLWJ0blwiICkubm90KCBcIi51aS1zbGlkZXItaGFuZGxlXCIgKSxcclxuXHRcdFx0Y3JlYXRlID0gdGhpcy5faW5pdGlhbFJlZnJlc2g7XHJcblx0XHRpZiAoICQubW9iaWxlLmNoZWNrYm94cmFkaW8gKSB7XHJcblx0XHRcdCRlbC5maW5kKCBcIjptb2JpbGUtY2hlY2tib3hyYWRpb1wiICkuY2hlY2tib3hyYWRpbyggXCJyZWZyZXNoXCIgKTtcclxuXHRcdH1cclxuXHRcdHRoaXMuX2FkZEZpcnN0TGFzdENsYXNzZXMoIGVscyxcclxuXHRcdFx0dGhpcy5vcHRpb25zLmV4Y2x1ZGVJbnZpc2libGUgPyB0aGlzLl9nZXRWaXNpYmxlcyggZWxzLCBjcmVhdGUgKSA6IGVscyxcclxuXHRcdFx0Y3JlYXRlICk7XHJcblx0XHR0aGlzLl9pbml0aWFsUmVmcmVzaCA9IGZhbHNlO1xyXG5cdH0sXHJcblxyXG5cdC8vIENhdmVhdDogSWYgdGhlIGxlZ2VuZCBpcyBub3QgdGhlIGZpcnN0IGNoaWxkIG9mIHRoZSBjb250cm9sZ3JvdXAgYXQgZW5oYW5jZVxyXG5cdC8vIHRpbWUsIGl0IHdpbGwgYmUgYWZ0ZXIgX2Rlc3Ryb3koKS5cclxuXHRfZGVzdHJveTogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgdWksIGJ1dHRvbnMsXHJcblx0XHRcdG9wdHMgPSB0aGlzLm9wdGlvbnM7XHJcblxyXG5cdFx0aWYgKCBvcHRzLmVuaGFuY2VkICkge1xyXG5cdFx0XHRyZXR1cm4gdGhpcztcclxuXHRcdH1cclxuXHJcblx0XHR1aSA9IHRoaXMuX3VpO1xyXG5cdFx0YnV0dG9ucyA9IHRoaXMuZWxlbWVudFxyXG5cdFx0XHQucmVtb3ZlQ2xhc3MoIFwidWktY29udHJvbGdyb3VwIFwiICtcclxuXHRcdFx0XHRcInVpLWNvbnRyb2xncm91cC1ob3Jpem9udGFsIHVpLWNvbnRyb2xncm91cC12ZXJ0aWNhbCB1aS1jb3JuZXItYWxsIHVpLW1pbmkgXCIgK1xyXG5cdFx0XHRcdHRoaXMuX3RoZW1lQ2xhc3NGcm9tT3B0aW9uKCBvcHRzLnRoZW1lICkgKVxyXG5cdFx0XHQuZmluZCggXCIudWktYnRuXCIgKVxyXG5cdFx0XHQubm90KCBcIi51aS1zbGlkZXItaGFuZGxlXCIgKTtcclxuXHJcblx0XHR0aGlzLl9yZW1vdmVGaXJzdExhc3RDbGFzc2VzKCBidXR0b25zICk7XHJcblxyXG5cdFx0dWkuZ3JvdXBMZWdlbmQudW53cmFwKCk7XHJcblx0XHR1aS5jaGlsZFdyYXBwZXIuY2hpbGRyZW4oKS51bndyYXAoKTtcclxuXHR9XHJcbn0sICQubW9iaWxlLmJlaGF2aW9ycy5hZGRGaXJzdExhc3RDbGFzc2VzICkgKTtcclxuXHJcbn0pKGpRdWVyeSk7XHJcblxyXG4oZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcclxuXHJcblx0JC53aWRnZXQoIFwibW9iaWxlLnRvb2xiYXJcIiwge1xyXG5cdFx0aW5pdFNlbGVjdG9yOiBcIjpqcW1EYXRhKHJvbGU9J2Zvb3RlcicpLCA6anFtRGF0YShyb2xlPSdoZWFkZXInKVwiLFxyXG5cclxuXHRcdG9wdGlvbnM6IHtcclxuXHRcdFx0dGhlbWU6IG51bGwsXHJcblx0XHRcdGFkZEJhY2tCdG46IGZhbHNlLFxyXG5cdFx0XHRiYWNrQnRuVGhlbWU6IG51bGwsXHJcblx0XHRcdGJhY2tCdG5UZXh0OiBcIkJhY2tcIlxyXG5cdFx0fSxcclxuXHJcblx0XHRfY3JlYXRlOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dmFyIGxlZnRidG4sIHJpZ2h0YnRuLFxyXG5cdFx0XHRcdHJvbGUgPSAgdGhpcy5lbGVtZW50LmlzKCBcIjpqcW1EYXRhKHJvbGU9J2hlYWRlcicpXCIgKSA/IFwiaGVhZGVyXCIgOiBcImZvb3RlclwiLFxyXG5cdFx0XHRcdHBhZ2UgPSB0aGlzLmVsZW1lbnQuY2xvc2VzdCggXCIudWktcGFnZVwiICk7XHJcblx0XHRcdGlmICggcGFnZS5sZW5ndGggPT09IDAgKSB7XHJcblx0XHRcdFx0cGFnZSA9IGZhbHNlO1xyXG5cdFx0XHRcdHRoaXMuX29uKCB0aGlzLmRvY3VtZW50LCB7XHJcblx0XHRcdFx0XHRcInBhZ2VzaG93XCI6IFwicmVmcmVzaFwiXHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH1cclxuXHRcdFx0JC5leHRlbmQoIHRoaXMsIHtcclxuXHRcdFx0XHRyb2xlOiByb2xlLFxyXG5cdFx0XHRcdHBhZ2U6IHBhZ2UsXHJcblx0XHRcdFx0bGVmdGJ0bjogbGVmdGJ0bixcclxuXHRcdFx0XHRyaWdodGJ0bjogcmlnaHRidG5cclxuXHRcdFx0fSk7XHJcblx0XHRcdHRoaXMuZWxlbWVudC5hdHRyKCBcInJvbGVcIiwgcm9sZSA9PT0gXCJoZWFkZXJcIiA/IFwiYmFubmVyXCIgOiBcImNvbnRlbnRpbmZvXCIgKS5hZGRDbGFzcyggXCJ1aS1cIiArIHJvbGUgKTtcclxuXHRcdFx0dGhpcy5yZWZyZXNoKCk7XHJcblx0XHRcdHRoaXMuX3NldE9wdGlvbnMoIHRoaXMub3B0aW9ucyApO1xyXG5cdFx0fSxcclxuXHRcdF9zZXRPcHRpb25zOiBmdW5jdGlvbiggbyApIHtcclxuXHRcdFx0aWYgKCBvLmFkZEJhY2tCdG4gIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0XHR0aGlzLl91cGRhdGVCYWNrQnV0dG9uKCk7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKCBvLmJhY2tCdG5UaGVtZSAhPSBudWxsICkge1xyXG5cdFx0XHRcdHRoaXMuZWxlbWVudFxyXG5cdFx0XHRcdFx0LmZpbmQoIFwiLnVpLXRvb2xiYXItYmFjay1idG5cIiApXHJcblx0XHRcdFx0XHQuYWRkQ2xhc3MoIFwidWktYnRuIHVpLWJ0bi1cIiArIG8uYmFja0J0blRoZW1lICk7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKCBvLmJhY2tCdG5UZXh0ICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdFx0dGhpcy5lbGVtZW50LmZpbmQoIFwiLnVpLXRvb2xiYXItYmFjay1idG4gLnVpLWJ0bi10ZXh0XCIgKS50ZXh0KCBvLmJhY2tCdG5UZXh0ICk7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKCBvLnRoZW1lICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdFx0dmFyIGN1cnJlbnRUaGVtZSA9IHRoaXMub3B0aW9ucy50aGVtZSA/IHRoaXMub3B0aW9ucy50aGVtZSA6IFwiaW5oZXJpdFwiLFxyXG5cdFx0XHRcdFx0bmV3VGhlbWUgPSBvLnRoZW1lID8gby50aGVtZSA6IFwiaW5oZXJpdFwiO1xyXG5cclxuXHRcdFx0XHR0aGlzLmVsZW1lbnQucmVtb3ZlQ2xhc3MoIFwidWktYmFyLVwiICsgY3VycmVudFRoZW1lICkuYWRkQ2xhc3MoIFwidWktYmFyLVwiICsgbmV3VGhlbWUgKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0dGhpcy5fc3VwZXIoIG8gKTtcclxuXHRcdH0sXHJcblx0XHRyZWZyZXNoOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0aWYgKCB0aGlzLnJvbGUgPT09IFwiaGVhZGVyXCIgKSB7XHJcblx0XHRcdFx0dGhpcy5fYWRkSGVhZGVyQnV0dG9uQ2xhc3NlcygpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmICggIXRoaXMucGFnZSApIHtcclxuXHRcdFx0XHR0aGlzLl9zZXRSZWxhdGl2ZSgpO1xyXG5cdFx0XHRcdGlmICggdGhpcy5yb2xlID09PSBcImZvb3RlclwiICkge1xyXG5cdFx0XHRcdFx0dGhpcy5lbGVtZW50LmFwcGVuZFRvKCBcImJvZHlcIiApO1xyXG5cdFx0XHRcdH0gZWxzZSBpZiAoIHRoaXMucm9sZSA9PT0gXCJoZWFkZXJcIiApIHtcclxuXHRcdFx0XHRcdHRoaXMuX3VwZGF0ZUJhY2tCdXR0b24oKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdFx0dGhpcy5fYWRkSGVhZGluZ0NsYXNzZXMoKTtcclxuXHRcdFx0dGhpcy5fYnRuTWFya3VwKCk7XHJcblx0XHR9LFxyXG5cclxuXHRcdC8vd2Ugb25seSB3YW50IHRoaXMgdG8gcnVuIG9uIG5vbiBmaXhlZCB0b29sYmFycyBzbyBtYWtlIGl0IGVhc3kgdG8gb3ZlcnJpZGVcclxuXHRcdF9zZXRSZWxhdGl2ZTogZnVuY3Rpb24oKSB7XHJcblx0XHRcdCQoIFwiW2RhdGEtXCIrICQubW9iaWxlLm5zICsgXCJyb2xlPSdwYWdlJ11cIiApLmNzcyh7IFwicG9zaXRpb25cIjogXCJyZWxhdGl2ZVwiIH0pO1xyXG5cdFx0fSxcclxuXHJcblx0XHQvLyBEZXByZWNhdGVkIGluIDEuNC4gQXMgZnJvbSAxLjUgYnV0dG9uIGNsYXNzZXMgaGF2ZSB0byBiZSBwcmVzZW50IGluIHRoZSBtYXJrdXAuXHJcblx0XHRfYnRuTWFya3VwOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dGhpcy5lbGVtZW50XHJcblx0XHRcdFx0LmNoaWxkcmVuKCBcImFcIiApXHJcblx0XHRcdFx0LmZpbHRlciggXCI6bm90KFtkYXRhLVwiICsgJC5tb2JpbGUubnMgKyBcInJvbGU9J25vbmUnXSlcIiApXHJcblx0XHRcdFx0LmF0dHIoIFwiZGF0YS1cIiArICQubW9iaWxlLm5zICsgXCJyb2xlXCIsIFwiYnV0dG9uXCIgKTtcclxuXHRcdFx0dGhpcy5lbGVtZW50LnRyaWdnZXIoIFwiY3JlYXRlXCIgKTtcclxuXHRcdH0sXHJcblx0XHQvLyBEZXByZWNhdGVkIGluIDEuNC4gQXMgZnJvbSAxLjUgdWktYnRuLWxlZnQvcmlnaHQgY2xhc3NlcyBoYXZlIHRvIGJlIHByZXNlbnQgaW4gdGhlIG1hcmt1cC5cclxuXHRcdF9hZGRIZWFkZXJCdXR0b25DbGFzc2VzOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dmFyIGhlYWRlckFuY2hvcnMgPSB0aGlzLmVsZW1lbnQuY2hpbGRyZW4oIFwiYSwgYnV0dG9uXCIgKTtcclxuXHJcblx0XHRcdC8vIERvIG5vdCBtaXN0YWtlIGEgYmFjayBidXR0b24gZm9yIGEgbGVmdCB0b29sYmFyIGJ1dHRvblxyXG5cdFx0XHR0aGlzLmxlZnRidG4gPSBoZWFkZXJBbmNob3JzLmhhc0NsYXNzKCBcInVpLWJ0bi1sZWZ0XCIgKSAmJlxyXG5cdFx0XHRcdCFoZWFkZXJBbmNob3JzLmhhc0NsYXNzKCBcInVpLXRvb2xiYXItYmFjay1idG5cIiApO1xyXG5cclxuXHRcdFx0dGhpcy5yaWdodGJ0biA9IGhlYWRlckFuY2hvcnMuaGFzQ2xhc3MoIFwidWktYnRuLXJpZ2h0XCIgKTtcclxuXHJcblx0XHRcdC8vIEZpbHRlciBvdXQgcmlnaHQgYnV0dG9ucyBhbmQgYmFjayBidXR0b25zXHJcblx0XHRcdHRoaXMubGVmdGJ0biA9IHRoaXMubGVmdGJ0biB8fFxyXG5cdFx0XHRcdGhlYWRlckFuY2hvcnMuZXEoIDAgKVxyXG5cdFx0XHRcdFx0Lm5vdCggXCIudWktYnRuLXJpZ2h0LC51aS10b29sYmFyLWJhY2stYnRuXCIgKVxyXG5cdFx0XHRcdFx0LmFkZENsYXNzKCBcInVpLWJ0bi1sZWZ0XCIgKVxyXG5cdFx0XHRcdFx0Lmxlbmd0aDtcclxuXHJcblx0XHRcdHRoaXMucmlnaHRidG4gPSB0aGlzLnJpZ2h0YnRuIHx8IGhlYWRlckFuY2hvcnMuZXEoIDEgKS5hZGRDbGFzcyggXCJ1aS1idG4tcmlnaHRcIiApLmxlbmd0aDtcclxuXHRcdH0sXHJcblx0XHRfdXBkYXRlQmFja0J1dHRvbjogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHZhciBiYWNrQnV0dG9uLFxyXG5cdFx0XHRcdG9wdGlvbnMgPSB0aGlzLm9wdGlvbnMsXHJcblx0XHRcdFx0dGhlbWUgPSBvcHRpb25zLmJhY2tCdG5UaGVtZSB8fCBvcHRpb25zLnRoZW1lO1xyXG5cclxuXHRcdFx0Ly8gUmV0cmlldmUgdGhlIGJhY2sgYnV0dG9uIG9yIGNyZWF0ZSBhIG5ldywgZW1wdHkgb25lXHJcblx0XHRcdGJhY2tCdXR0b24gPSB0aGlzLl9iYWNrQnV0dG9uID0gKCB0aGlzLl9iYWNrQnV0dG9uIHx8IHt9ICk7XHJcblxyXG5cdFx0XHQvLyBXZSBhZGQgYSBiYWNrIGJ1dHRvbiBvbmx5IGlmIHRoZSBvcHRpb24gdG8gZG8gc28gaXMgb25cclxuXHRcdFx0aWYgKCB0aGlzLm9wdGlvbnMuYWRkQmFja0J0biAmJlxyXG5cclxuXHRcdFx0XHRcdC8vIFRoaXMgbXVzdCBhbHNvIGJlIGEgaGVhZGVyIHRvb2xiYXJcclxuXHRcdFx0XHRcdHRoaXMucm9sZSA9PT0gXCJoZWFkZXJcIiAmJlxyXG5cclxuXHRcdFx0XHRcdC8vIFRoZXJlIG11c3QgYmUgbXVsdGlwbGUgcGFnZXMgaW4gdGhlIERPTVxyXG5cdFx0XHRcdFx0JCggXCIudWktcGFnZVwiICkubGVuZ3RoID4gMSAmJlxyXG5cdFx0XHRcdFx0KCB0aGlzLnBhZ2UgP1xyXG5cclxuXHRcdFx0XHRcdFx0Ly8gSWYgdGhlIHRvb2xiYXIgaXMgaW50ZXJuYWwgdGhlIHBhZ2UncyBVUkwgbXVzdCBkaWZmZXIgZnJvbSB0aGUgaGFzaFxyXG5cdFx0XHRcdFx0XHQoIHRoaXMucGFnZVsgMCBdLmdldEF0dHJpYnV0ZSggXCJkYXRhLVwiICsgJC5tb2JpbGUubnMgKyBcInVybFwiICkgIT09XHJcblx0XHRcdFx0XHRcdFx0JC5tb2JpbGUucGF0aC5zdHJpcEhhc2goIGxvY2F0aW9uLmhhc2ggKSApIDpcclxuXHJcblx0XHRcdFx0XHRcdC8vIE90aGVyd2lzZSwgaWYgdGhlIHRvb2xiYXIgaXMgZXh0ZXJuYWwgdGhlcmUgbXVzdCBiZSBhdCBsZWFzdCBvbmVcclxuXHRcdFx0XHRcdFx0Ly8gaGlzdG9yeSBpdGVtIHRvIHdoaWNoIG9uZSBjYW4gZ28gYmFja1xyXG5cdFx0XHRcdFx0XHQoICQubW9iaWxlLm5hdmlnYXRlICYmICQubW9iaWxlLm5hdmlnYXRlLmhpc3RvcnkgJiZcclxuXHRcdFx0XHRcdFx0XHQkLm1vYmlsZS5uYXZpZ2F0ZS5oaXN0b3J5LmFjdGl2ZUluZGV4ID4gMCApICkgJiZcclxuXHJcblx0XHRcdFx0XHQvLyBUaGUgdG9vbGJhciBkb2VzIG5vdCBoYXZlIGEgbGVmdCBidXR0b25cclxuXHRcdFx0XHRcdCF0aGlzLmxlZnRidG4gKSB7XHJcblxyXG5cdFx0XHRcdC8vIFNraXAgYmFjayBidXR0b24gY3JlYXRpb24gaWYgb25lIGlzIGFscmVhZHkgcHJlc2VudFxyXG5cdFx0XHRcdGlmICggIWJhY2tCdXR0b24uYXR0YWNoZWQgKSB7XHJcblx0XHRcdFx0XHR0aGlzLmJhY2tCdXR0b24gPSBiYWNrQnV0dG9uLmVsZW1lbnQgPSAoIGJhY2tCdXR0b24uZWxlbWVudCB8fFxyXG5cdFx0XHRcdFx0XHQkKCBcIjxhIHJvbGU9J2J1dHRvbicgaHJlZj0namF2YXNjcmlwdDp2b2lkKDApOycgXCIgK1xyXG5cdFx0XHRcdFx0XHRcdFwiY2xhc3M9J3VpLWJ0biB1aS1jb3JuZXItYWxsIHVpLXNoYWRvdyB1aS1idG4tbGVmdCBcIiArXHJcblx0XHRcdFx0XHRcdFx0XHQoIHRoZW1lID8gXCJ1aS1idG4tXCIgKyB0aGVtZSArIFwiIFwiIDogXCJcIiApICtcclxuXHRcdFx0XHRcdFx0XHRcdFwidWktdG9vbGJhci1iYWNrLWJ0biB1aS1pY29uLWNhcmF0LWwgdWktYnRuLWljb24tbGVmdCcgXCIgK1xyXG5cdFx0XHRcdFx0XHRcdFwiZGF0YS1cIiArICQubW9iaWxlLm5zICsgXCJyZWw9J2JhY2snPlwiICsgb3B0aW9ucy5iYWNrQnRuVGV4dCArXHJcblx0XHRcdFx0XHRcdFx0XCI8L2E+XCIgKSApXHJcblx0XHRcdFx0XHRcdFx0LnByZXBlbmRUbyggdGhpcy5lbGVtZW50ICk7XHJcblx0XHRcdFx0XHRiYWNrQnV0dG9uLmF0dGFjaGVkID0gdHJ1ZTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBJZiB3ZSBhcmUgbm90IGFkZGluZyBhIGJhY2sgYnV0dG9uLCB0aGVuIHJlbW92ZSB0aGUgb25lIHByZXNlbnQsIGlmIGFueVxyXG5cdFx0XHR9IGVsc2UgaWYgKCBiYWNrQnV0dG9uLmVsZW1lbnQgKSB7XHJcblx0XHRcdFx0YmFja0J1dHRvbi5lbGVtZW50LmRldGFjaCgpO1xyXG5cdFx0XHRcdGJhY2tCdXR0b24uYXR0YWNoZWQgPSBmYWxzZTtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHRcdF9hZGRIZWFkaW5nQ2xhc3NlczogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHRoaXMuZWxlbWVudC5jaGlsZHJlbiggXCJoMSwgaDIsIGgzLCBoNCwgaDUsIGg2XCIgKVxyXG5cdFx0XHRcdC5hZGRDbGFzcyggXCJ1aS10aXRsZVwiIClcclxuXHRcdFx0XHQvLyBSZWdhcmRsZXNzIG9mIGggZWxlbWVudCBudW1iZXIgaW4gc3JjLCBpdCBiZWNvbWVzIGgxIGZvciB0aGUgZW5oYW5jZWQgcGFnZVxyXG5cdFx0XHRcdC5hdHRyKHtcclxuXHRcdFx0XHRcdFwicm9sZVwiOiBcImhlYWRpbmdcIixcclxuXHRcdFx0XHRcdFwiYXJpYS1sZXZlbFwiOiBcIjFcIlxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0fSxcclxuXHRcdF9kZXN0cm95OiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dmFyIGN1cnJlbnRUaGVtZTtcclxuXHJcblx0XHRcdHRoaXMuZWxlbWVudC5jaGlsZHJlbiggXCJoMSwgaDIsIGgzLCBoNCwgaDUsIGg2XCIgKVxyXG5cdFx0XHRcdC5yZW1vdmVDbGFzcyggXCJ1aS10aXRsZVwiIClcclxuXHRcdFx0XHQucmVtb3ZlQXR0ciggXCJyb2xlXCIgKVxyXG5cdFx0XHRcdC5yZW1vdmVBdHRyKCBcImFyaWEtbGV2ZWxcIiApO1xyXG5cclxuXHRcdFx0aWYgKCB0aGlzLnJvbGUgPT09IFwiaGVhZGVyXCIgKSB7XHJcblx0XHRcdFx0dGhpcy5lbGVtZW50LmNoaWxkcmVuKCBcImEsIGJ1dHRvblwiIClcclxuXHRcdFx0XHRcdC5yZW1vdmVDbGFzcyggXCJ1aS1idG4tbGVmdCB1aS1idG4tcmlnaHQgdWktYnRuIHVpLXNoYWRvdyB1aS1jb3JuZXItYWxsXCIgKTtcclxuXHRcdFx0XHRpZiAoIHRoaXMuYmFja0J1dHRvbikge1xyXG5cdFx0XHRcdFx0dGhpcy5iYWNrQnV0dG9uLnJlbW92ZSgpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Y3VycmVudFRoZW1lID0gdGhpcy5vcHRpb25zLnRoZW1lID8gdGhpcy5vcHRpb25zLnRoZW1lIDogXCJpbmhlcml0XCI7XHJcblx0XHRcdHRoaXMuZWxlbWVudC5yZW1vdmVDbGFzcyggXCJ1aS1iYXItXCIgKyBjdXJyZW50VGhlbWUgKTtcclxuXHJcblx0XHRcdHRoaXMuZWxlbWVudC5yZW1vdmVDbGFzcyggXCJ1aS1cIiArIHRoaXMucm9sZSApLnJlbW92ZUF0dHIoIFwicm9sZVwiICk7XHJcblx0XHR9XHJcblx0fSk7XHJcblxyXG59KSggalF1ZXJ5ICk7XHJcblxyXG4oZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcclxuXHJcblx0JC53aWRnZXQoIFwibW9iaWxlLnRvb2xiYXJcIiwgJC5tb2JpbGUudG9vbGJhciwge1xyXG5cdFx0b3B0aW9uczoge1xyXG5cdFx0XHRwb3NpdGlvbjpudWxsLFxyXG5cdFx0XHR2aXNpYmxlT25QYWdlU2hvdzogdHJ1ZSxcclxuXHRcdFx0ZGlzYWJsZVBhZ2Vab29tOiB0cnVlLFxyXG5cdFx0XHR0cmFuc2l0aW9uOiBcInNsaWRlXCIsIC8vY2FuIGJlIG5vbmUsIGZhZGUsIHNsaWRlIChzbGlkZSBtYXBzIHRvIHNsaWRldXAgb3Igc2xpZGVkb3duKVxyXG5cdFx0XHRmdWxsc2NyZWVuOiBmYWxzZSxcclxuXHRcdFx0dGFwVG9nZ2xlOiB0cnVlLFxyXG5cdFx0XHR0YXBUb2dnbGVCbGFja2xpc3Q6IFwiYSwgYnV0dG9uLCBpbnB1dCwgc2VsZWN0LCB0ZXh0YXJlYSwgLnVpLWhlYWRlci1maXhlZCwgLnVpLWZvb3Rlci1maXhlZCwgLnVpLWZsaXBzd2l0Y2gsIC51aS1wb3B1cCwgLnVpLXBhbmVsLCAudWktcGFuZWwtZGlzbWlzcy1vcGVuXCIsXHJcblx0XHRcdGhpZGVEdXJpbmdGb2N1czogXCJpbnB1dCwgdGV4dGFyZWEsIHNlbGVjdFwiLFxyXG5cdFx0XHR1cGRhdGVQYWdlUGFkZGluZzogdHJ1ZSxcclxuXHRcdFx0dHJhY2tQZXJzaXN0ZW50VG9vbGJhcnM6IHRydWUsXHJcblxyXG5cdFx0XHQvLyBCcm93c2VyIGRldGVjdGlvbiEgV2VlZWUsIGhlcmUgd2UgZ28uLi5cclxuXHRcdFx0Ly8gVW5mb3J0dW5hdGVseSwgcG9zaXRpb246Zml4ZWQgaXMgY29zdGx5LCBub3QgdG8gbWVudGlvbiBwcm9iYWJseSBpbXBvc3NpYmxlLCB0byBmZWF0dXJlLWRldGVjdCBhY2N1cmF0ZWx5LlxyXG5cdFx0XHQvLyBTb21lIHRlc3RzIGV4aXN0LCBidXQgdGhleSBjdXJyZW50bHkgcmV0dXJuIGZhbHNlIHJlc3VsdHMgaW4gY3JpdGljYWwgZGV2aWNlcyBhbmQgYnJvd3NlcnMsIHdoaWNoIGNvdWxkIGxlYWQgdG8gYSBicm9rZW4gZXhwZXJpZW5jZS5cclxuXHRcdFx0Ly8gVGVzdGluZyBmaXhlZCBwb3NpdGlvbmluZyBpcyBhbHNvIHByZXR0eSBvYnRydXNpdmUgdG8gcGFnZSBsb2FkLCByZXF1aXJpbmcgaW5qZWN0ZWQgZWxlbWVudHMgYW5kIHNjcm9sbGluZyB0aGUgd2luZG93XHJcblx0XHRcdC8vIFRoZSBmb2xsb3dpbmcgZnVuY3Rpb24gc2VydmVzIHRvIHJ1bGUgb3V0IHNvbWUgcG9wdWxhciBicm93c2VycyB3aXRoIGtub3duIGZpeGVkLXBvc2l0aW9uaW5nIGlzc3Vlc1xyXG5cdFx0XHQvLyBUaGlzIGlzIGEgcGx1Z2luIG9wdGlvbiBsaWtlIGFueSBvdGhlciwgc28gZmVlbCBmcmVlIHRvIGltcHJvdmUgb3Igb3ZlcndyaXRlIGl0XHJcblx0XHRcdHN1cHBvcnRCbGFja2xpc3Q6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHJldHVybiAhJC5zdXBwb3J0LmZpeGVkUG9zaXRpb247XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblxyXG5cdFx0X2NyZWF0ZTogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHRoaXMuX3N1cGVyKCk7XHJcblx0XHRcdHRoaXMucGFnZWNvbnRhaW5lciA9ICQoIFwiOm1vYmlsZS1wYWdlY29udGFpbmVyXCIgKTtcclxuXHRcdFx0aWYgKCB0aGlzLm9wdGlvbnMucG9zaXRpb24gPT09IFwiZml4ZWRcIiAmJiAhdGhpcy5vcHRpb25zLnN1cHBvcnRCbGFja2xpc3QoKSApIHtcclxuXHRcdFx0XHR0aGlzLl9tYWtlRml4ZWQoKTtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHJcblx0XHRfbWFrZUZpeGVkOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dGhpcy5lbGVtZW50LmFkZENsYXNzKCBcInVpLVwiKyB0aGlzLnJvbGUgK1wiLWZpeGVkXCIgKTtcclxuXHRcdFx0dGhpcy51cGRhdGVQYWdlUGFkZGluZygpO1xyXG5cdFx0XHR0aGlzLl9hZGRUcmFuc2l0aW9uQ2xhc3MoKTtcclxuXHRcdFx0dGhpcy5fYmluZFBhZ2VFdmVudHMoKTtcclxuXHRcdFx0dGhpcy5fYmluZFRvZ2dsZUhhbmRsZXJzKCk7XHJcblx0XHR9LFxyXG5cclxuXHRcdF9zZXRPcHRpb25zOiBmdW5jdGlvbiggbyApIHtcclxuXHRcdFx0aWYgKCBvLnBvc2l0aW9uID09PSBcImZpeGVkXCIgJiYgdGhpcy5vcHRpb25zLnBvc2l0aW9uICE9PSBcImZpeGVkXCIgKSB7XHJcblx0XHRcdFx0dGhpcy5fbWFrZUZpeGVkKCk7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKCB0aGlzLm9wdGlvbnMucG9zaXRpb24gPT09IFwiZml4ZWRcIiAmJiAhdGhpcy5vcHRpb25zLnN1cHBvcnRCbGFja2xpc3QoKSApIHtcclxuXHRcdFx0XHR2YXIgJHBhZ2UgPSAoICEhdGhpcy5wYWdlICk/IHRoaXMucGFnZTogKCAkKFwiLnVpLXBhZ2UtYWN0aXZlXCIpLmxlbmd0aCA+IDAgKT8gJChcIi51aS1wYWdlLWFjdGl2ZVwiKTogJChcIi51aS1wYWdlXCIpLmVxKDApO1xyXG5cclxuXHRcdFx0XHRpZiAoIG8uZnVsbHNjcmVlbiAhPT0gdW5kZWZpbmVkKSB7XHJcblx0XHRcdFx0XHRpZiAoIG8uZnVsbHNjcmVlbiApIHtcclxuXHRcdFx0XHRcdFx0dGhpcy5lbGVtZW50LmFkZENsYXNzKCBcInVpLVwiKyB0aGlzLnJvbGUgK1wiLWZ1bGxzY3JlZW5cIiApO1xyXG5cdFx0XHRcdFx0XHQkcGFnZS5hZGRDbGFzcyggXCJ1aS1wYWdlLVwiICsgdGhpcy5yb2xlICsgXCItZnVsbHNjcmVlblwiICk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHQvLyBJZiBub3QgZnVsbHNjcmVlbiwgYWRkIGNsYXNzIHRvIHBhZ2UgdG8gc2V0IHRvcCBvciBib3R0b20gcGFkZGluZ1xyXG5cdFx0XHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0XHRcdHRoaXMuZWxlbWVudC5yZW1vdmVDbGFzcyggXCJ1aS1cIisgdGhpcy5yb2xlICtcIi1mdWxsc2NyZWVuXCIgKTtcclxuXHRcdFx0XHRcdFx0JHBhZ2UucmVtb3ZlQ2xhc3MoIFwidWktcGFnZS1cIiArIHRoaXMucm9sZSArIFwiLWZ1bGxzY3JlZW5cIiApLmFkZENsYXNzKCBcInVpLXBhZ2UtXCIgKyB0aGlzLnJvbGUrIFwiLWZpeGVkXCIgKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdFx0dGhpcy5fc3VwZXIobyk7XHJcblx0XHR9LFxyXG5cclxuXHRcdF9hZGRUcmFuc2l0aW9uQ2xhc3M6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR2YXIgdGNsYXNzID0gdGhpcy5vcHRpb25zLnRyYW5zaXRpb247XHJcblxyXG5cdFx0XHRpZiAoIHRjbGFzcyAmJiB0Y2xhc3MgIT09IFwibm9uZVwiICkge1xyXG5cdFx0XHRcdC8vIHVzZSBhcHByb3ByaWF0ZSBzbGlkZSBmb3IgaGVhZGVyIG9yIGZvb3RlclxyXG5cdFx0XHRcdGlmICggdGNsYXNzID09PSBcInNsaWRlXCIgKSB7XHJcblx0XHRcdFx0XHR0Y2xhc3MgPSB0aGlzLmVsZW1lbnQuaGFzQ2xhc3MoIFwidWktaGVhZGVyXCIgKSA/IFwic2xpZGVkb3duXCIgOiBcInNsaWRldXBcIjtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdHRoaXMuZWxlbWVudC5hZGRDbGFzcyggdGNsYXNzICk7XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblxyXG5cdFx0X2JpbmRQYWdlRXZlbnRzOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dmFyIHBhZ2UgPSAoICEhdGhpcy5wYWdlICk/IHRoaXMuZWxlbWVudC5jbG9zZXN0KCBcIi51aS1wYWdlXCIgKTogdGhpcy5kb2N1bWVudDtcclxuXHRcdFx0Ly9wYWdlIGV2ZW50IGJpbmRpbmdzXHJcblx0XHRcdC8vIEZpeGVkIHRvb2xiYXJzIHJlcXVpcmUgcGFnZSB6b29tIHRvIGJlIGRpc2FibGVkLCBvdGhlcndpc2UgdXNhYmlsaXR5IGlzc3VlcyBjcm9wIHVwXHJcblx0XHRcdC8vIFRoaXMgbWV0aG9kIGlzIG1lYW50IHRvIGRpc2FibGUgem9vbSB3aGlsZSBhIGZpeGVkLXBvc2l0aW9uZWQgdG9vbGJhciBwYWdlIGlzIHZpc2libGVcclxuXHRcdFx0dGhpcy5fb24oIHBhZ2UgLCB7XHJcblx0XHRcdFx0XCJwYWdlYmVmb3Jlc2hvd1wiOiBcIl9oYW5kbGVQYWdlQmVmb3JlU2hvd1wiLFxyXG5cdFx0XHRcdFwid2Via2l0QW5pbWF0aW9uU3RhcnRcIjpcIl9oYW5kbGVBbmltYXRpb25TdGFydFwiLFxyXG5cdFx0XHRcdFwiYW5pbWF0aW9uc3RhcnRcIjpcIl9oYW5kbGVBbmltYXRpb25TdGFydFwiLFxyXG5cdFx0XHRcdFwidXBkYXRlbGF5b3V0XCI6IFwiX2hhbmRsZUFuaW1hdGlvblN0YXJ0XCIsXHJcblx0XHRcdFx0XCJwYWdlc2hvd1wiOiBcIl9oYW5kbGVQYWdlU2hvd1wiLFxyXG5cdFx0XHRcdFwicGFnZWJlZm9yZWhpZGVcIjogXCJfaGFuZGxlUGFnZUJlZm9yZUhpZGVcIlxyXG5cdFx0XHR9KTtcclxuXHRcdH0sXHJcblxyXG5cdFx0X2hhbmRsZVBhZ2VCZWZvcmVTaG93OiBmdW5jdGlvbiggKSB7XHJcblx0XHRcdHZhciBvID0gdGhpcy5vcHRpb25zO1xyXG5cdFx0XHRpZiAoIG8uZGlzYWJsZVBhZ2Vab29tICkge1xyXG5cdFx0XHRcdCQubW9iaWxlLnpvb20uZGlzYWJsZSggdHJ1ZSApO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmICggIW8udmlzaWJsZU9uUGFnZVNob3cgKSB7XHJcblx0XHRcdFx0dGhpcy5oaWRlKCB0cnVlICk7XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblxyXG5cdFx0X2hhbmRsZUFuaW1hdGlvblN0YXJ0OiBmdW5jdGlvbigpIHtcclxuXHRcdFx0aWYgKCB0aGlzLm9wdGlvbnMudXBkYXRlUGFnZVBhZGRpbmcgKSB7XHJcblx0XHRcdFx0dGhpcy51cGRhdGVQYWdlUGFkZGluZyggKCAhIXRoaXMucGFnZSApPyB0aGlzLnBhZ2U6IFwiLnVpLXBhZ2UtYWN0aXZlXCIgKTtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHJcblx0XHRfaGFuZGxlUGFnZVNob3c6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR0aGlzLnVwZGF0ZVBhZ2VQYWRkaW5nKCAoICEhdGhpcy5wYWdlICk/IHRoaXMucGFnZTogXCIudWktcGFnZS1hY3RpdmVcIiApO1xyXG5cdFx0XHRpZiAoIHRoaXMub3B0aW9ucy51cGRhdGVQYWdlUGFkZGluZyApIHtcclxuXHRcdFx0XHR0aGlzLl9vbiggdGhpcy53aW5kb3csIHsgXCJ0aHJvdHRsZWRyZXNpemVcIjogXCJ1cGRhdGVQYWdlUGFkZGluZ1wiIH0gKTtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHJcblx0XHRfaGFuZGxlUGFnZUJlZm9yZUhpZGU6IGZ1bmN0aW9uKCBlLCB1aSApIHtcclxuXHRcdFx0dmFyIG8gPSB0aGlzLm9wdGlvbnMsXHJcblx0XHRcdFx0dGhpc0Zvb3RlciwgdGhpc0hlYWRlciwgbmV4dEZvb3RlciwgbmV4dEhlYWRlcjtcclxuXHJcblx0XHRcdGlmICggby5kaXNhYmxlUGFnZVpvb20gKSB7XHJcblx0XHRcdFx0JC5tb2JpbGUuem9vbS5lbmFibGUoIHRydWUgKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAoIG8udXBkYXRlUGFnZVBhZGRpbmcgKSB7XHJcblx0XHRcdFx0dGhpcy5fb2ZmKCB0aGlzLndpbmRvdywgXCJ0aHJvdHRsZWRyZXNpemVcIiApO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpZiAoIG8udHJhY2tQZXJzaXN0ZW50VG9vbGJhcnMgKSB7XHJcblx0XHRcdFx0dGhpc0Zvb3RlciA9ICQoIFwiLnVpLWZvb3Rlci1maXhlZDpqcW1EYXRhKGlkKVwiLCB0aGlzLnBhZ2UgKTtcclxuXHRcdFx0XHR0aGlzSGVhZGVyID0gJCggXCIudWktaGVhZGVyLWZpeGVkOmpxbURhdGEoaWQpXCIsIHRoaXMucGFnZSApO1xyXG5cdFx0XHRcdG5leHRGb290ZXIgPSB0aGlzRm9vdGVyLmxlbmd0aCAmJiB1aS5uZXh0UGFnZSAmJiAkKCBcIi51aS1mb290ZXItZml4ZWQ6anFtRGF0YShpZD0nXCIgKyB0aGlzRm9vdGVyLmpxbURhdGEoIFwiaWRcIiApICsgXCInKVwiLCB1aS5uZXh0UGFnZSApIHx8ICQoKTtcclxuXHRcdFx0XHRuZXh0SGVhZGVyID0gdGhpc0hlYWRlci5sZW5ndGggJiYgdWkubmV4dFBhZ2UgJiYgJCggXCIudWktaGVhZGVyLWZpeGVkOmpxbURhdGEoaWQ9J1wiICsgdGhpc0hlYWRlci5qcW1EYXRhKCBcImlkXCIgKSArIFwiJylcIiwgdWkubmV4dFBhZ2UgKSB8fCAkKCk7XHJcblxyXG5cdFx0XHRcdGlmICggbmV4dEZvb3Rlci5sZW5ndGggfHwgbmV4dEhlYWRlci5sZW5ndGggKSB7XHJcblxyXG5cdFx0XHRcdFx0bmV4dEZvb3Rlci5hZGQoIG5leHRIZWFkZXIgKS5hcHBlbmRUbyggJC5tb2JpbGUucGFnZUNvbnRhaW5lciApO1xyXG5cclxuXHRcdFx0XHRcdHVpLm5leHRQYWdlLm9uZSggXCJwYWdlc2hvd1wiLCBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdFx0bmV4dEhlYWRlci5wcmVwZW5kVG8oIHRoaXMgKTtcclxuXHRcdFx0XHRcdFx0bmV4dEZvb3Rlci5hcHBlbmRUbyggdGhpcyApO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cclxuXHRcdF92aXNpYmxlOiB0cnVlLFxyXG5cclxuXHRcdC8vIFRoaXMgd2lsbCBzZXQgdGhlIGNvbnRlbnQgZWxlbWVudCdzIHRvcCBvciBib3R0b20gcGFkZGluZyBlcXVhbCB0byB0aGUgdG9vbGJhcidzIGhlaWdodFxyXG5cdFx0dXBkYXRlUGFnZVBhZGRpbmc6IGZ1bmN0aW9uKCB0YlBhZ2UgKSB7XHJcblx0XHRcdHZhciAkZWwgPSB0aGlzLmVsZW1lbnQsXHJcblx0XHRcdFx0aGVhZGVyID0gKCB0aGlzLnJvbGUgPT09XCJoZWFkZXJcIiApLFxyXG5cdFx0XHRcdHBvcyA9IHBhcnNlRmxvYXQoICRlbC5jc3MoIGhlYWRlciA/IFwidG9wXCIgOiBcImJvdHRvbVwiICkgKTtcclxuXHJcblx0XHRcdC8vIFRoaXMgYmVoYXZpb3Igb25seSBhcHBsaWVzIHRvIFwiZml4ZWRcIiwgbm90IFwiZnVsbHNjcmVlblwiXHJcblx0XHRcdGlmICggdGhpcy5vcHRpb25zLmZ1bGxzY3JlZW4gKSB7IHJldHVybjsgfVxyXG5cdFx0XHQvLyB0YlBhZ2UgYXJndW1lbnQgY2FuIGJlIGEgUGFnZSBvYmplY3Qgb3IgYW4gZXZlbnQsIGlmIGNvbWluZyBmcm9tIHRocm90dGxlZCByZXNpemUuXHJcblx0XHRcdHRiUGFnZSA9ICggdGJQYWdlICYmIHRiUGFnZS50eXBlID09PSB1bmRlZmluZWQgJiYgdGJQYWdlICkgfHwgdGhpcy5wYWdlIHx8ICRlbC5jbG9zZXN0KCBcIi51aS1wYWdlXCIgKTtcclxuXHRcdFx0dGJQYWdlID0gKCAhIXRoaXMucGFnZSApPyB0aGlzLnBhZ2U6IFwiLnVpLXBhZ2UtYWN0aXZlXCI7XHJcblx0XHRcdCQoIHRiUGFnZSApLmNzcyggXCJwYWRkaW5nLVwiICsgKCBoZWFkZXIgPyBcInRvcFwiIDogXCJib3R0b21cIiApLCAkZWwub3V0ZXJIZWlnaHQoKSArIHBvcyApO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfdXNlVHJhbnNpdGlvbjogZnVuY3Rpb24oIG5vdHJhbnNpdGlvbiApIHtcclxuXHRcdFx0dmFyICR3aW4gPSB0aGlzLndpbmRvdyxcclxuXHRcdFx0XHQkZWwgPSB0aGlzLmVsZW1lbnQsXHJcblx0XHRcdFx0c2Nyb2xsID0gJHdpbi5zY3JvbGxUb3AoKSxcclxuXHRcdFx0XHRlbEhlaWdodCA9ICRlbC5oZWlnaHQoKSxcclxuXHRcdFx0XHRwSGVpZ2h0ID0gKCAhIXRoaXMucGFnZSApPyAkZWwuY2xvc2VzdCggXCIudWktcGFnZVwiICkuaGVpZ2h0KCk6JChcIi51aS1wYWdlLWFjdGl2ZVwiKS5oZWlnaHQoKSxcclxuXHRcdFx0XHR2aWV3cG9ydEhlaWdodCA9ICQubW9iaWxlLmdldFNjcmVlbkhlaWdodCgpO1xyXG5cclxuXHRcdFx0cmV0dXJuICFub3RyYW5zaXRpb24gJiZcclxuXHRcdFx0XHQoIHRoaXMub3B0aW9ucy50cmFuc2l0aW9uICYmIHRoaXMub3B0aW9ucy50cmFuc2l0aW9uICE9PSBcIm5vbmVcIiAmJlxyXG5cdFx0XHRcdChcclxuXHRcdFx0XHRcdCggdGhpcy5yb2xlID09PSBcImhlYWRlclwiICYmICF0aGlzLm9wdGlvbnMuZnVsbHNjcmVlbiAmJiBzY3JvbGwgPiBlbEhlaWdodCApIHx8XHJcblx0XHRcdFx0XHQoIHRoaXMucm9sZSA9PT0gXCJmb290ZXJcIiAmJiAhdGhpcy5vcHRpb25zLmZ1bGxzY3JlZW4gJiYgc2Nyb2xsICsgdmlld3BvcnRIZWlnaHQgPCBwSGVpZ2h0IC0gZWxIZWlnaHQgKVxyXG5cdFx0XHRcdCkgfHwgdGhpcy5vcHRpb25zLmZ1bGxzY3JlZW5cclxuXHRcdFx0XHQpO1xyXG5cdFx0fSxcclxuXHJcblx0XHRzaG93OiBmdW5jdGlvbiggbm90cmFuc2l0aW9uICkge1xyXG5cdFx0XHR2YXIgaGlkZUNsYXNzID0gXCJ1aS1maXhlZC1oaWRkZW5cIixcclxuXHRcdFx0XHQkZWwgPSB0aGlzLmVsZW1lbnQ7XHJcblxyXG5cdFx0XHRpZiAoIHRoaXMuX3VzZVRyYW5zaXRpb24oIG5vdHJhbnNpdGlvbiApICkge1xyXG5cdFx0XHRcdCRlbFxyXG5cdFx0XHRcdFx0LnJlbW92ZUNsYXNzKCBcIm91dCBcIiArIGhpZGVDbGFzcyApXHJcblx0XHRcdFx0XHQuYWRkQ2xhc3MoIFwiaW5cIiApXHJcblx0XHRcdFx0XHQuYW5pbWF0aW9uQ29tcGxldGUoZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRcdFx0XHQkZWwucmVtb3ZlQ2xhc3MoIFwiaW5cIiApO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0JGVsLnJlbW92ZUNsYXNzKCBoaWRlQ2xhc3MgKTtcclxuXHRcdFx0fVxyXG5cdFx0XHR0aGlzLl92aXNpYmxlID0gdHJ1ZTtcclxuXHRcdH0sXHJcblxyXG5cdFx0aGlkZTogZnVuY3Rpb24oIG5vdHJhbnNpdGlvbiApIHtcclxuXHRcdFx0dmFyIGhpZGVDbGFzcyA9IFwidWktZml4ZWQtaGlkZGVuXCIsXHJcblx0XHRcdFx0JGVsID0gdGhpcy5lbGVtZW50LFxyXG5cdFx0XHRcdC8vIGlmIGl0J3MgYSBzbGlkZSB0cmFuc2l0aW9uLCBvdXIgbmV3IHRyYW5zaXRpb25zIG5lZWQgdGhlIHJldmVyc2UgY2xhc3MgYXMgd2VsbCB0byBzbGlkZSBvdXR3YXJkXHJcblx0XHRcdFx0b3V0Y2xhc3MgPSBcIm91dFwiICsgKCB0aGlzLm9wdGlvbnMudHJhbnNpdGlvbiA9PT0gXCJzbGlkZVwiID8gXCIgcmV2ZXJzZVwiIDogXCJcIiApO1xyXG5cclxuXHRcdFx0aWYgKCB0aGlzLl91c2VUcmFuc2l0aW9uKCBub3RyYW5zaXRpb24gKSApIHtcclxuXHRcdFx0XHQkZWxcclxuXHRcdFx0XHRcdC5hZGRDbGFzcyggb3V0Y2xhc3MgKVxyXG5cdFx0XHRcdFx0LnJlbW92ZUNsYXNzKCBcImluXCIgKVxyXG5cdFx0XHRcdFx0LmFuaW1hdGlvbkNvbXBsZXRlKGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0XHQkZWwuYWRkQ2xhc3MoIGhpZGVDbGFzcyApLnJlbW92ZUNsYXNzKCBvdXRjbGFzcyApO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0JGVsLmFkZENsYXNzKCBoaWRlQ2xhc3MgKS5yZW1vdmVDbGFzcyggb3V0Y2xhc3MgKTtcclxuXHRcdFx0fVxyXG5cdFx0XHR0aGlzLl92aXNpYmxlID0gZmFsc2U7XHJcblx0XHR9LFxyXG5cclxuXHRcdHRvZ2dsZTogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHRoaXNbIHRoaXMuX3Zpc2libGUgPyBcImhpZGVcIiA6IFwic2hvd1wiIF0oKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0X2JpbmRUb2dnbGVIYW5kbGVyczogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHZhciBzZWxmID0gdGhpcyxcclxuXHRcdFx0XHRvID0gc2VsZi5vcHRpb25zLFxyXG5cdFx0XHRcdGRlbGF5U2hvdywgZGVsYXlIaWRlLFxyXG5cdFx0XHRcdGlzVmlzaWJsZSA9IHRydWUsXHJcblx0XHRcdFx0cGFnZSA9ICggISF0aGlzLnBhZ2UgKT8gdGhpcy5wYWdlOiAkKFwiLnVpLXBhZ2VcIik7XHJcblxyXG5cdFx0XHQvLyB0YXAgdG9nZ2xlXHJcblx0XHRcdHBhZ2VcclxuXHRcdFx0XHQuYmluZCggXCJ2Y2xpY2tcIiwgZnVuY3Rpb24oIGUgKSB7XHJcblx0XHRcdFx0XHRpZiAoIG8udGFwVG9nZ2xlICYmICEkKCBlLnRhcmdldCApLmNsb3Nlc3QoIG8udGFwVG9nZ2xlQmxhY2tsaXN0ICkubGVuZ3RoICkge1xyXG5cdFx0XHRcdFx0XHRzZWxmLnRvZ2dsZSgpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0pXHJcblx0XHRcdFx0LmJpbmQoIFwiZm9jdXNpbiBmb2N1c291dFwiLCBmdW5jdGlvbiggZSApIHtcclxuXHRcdFx0XHRcdC8vdGhpcyBoaWRlcyB0aGUgdG9vbGJhcnMgb24gYSBrZXlib2FyZCBwb3AgdG8gZ2l2ZSBtb3JlIHNjcmVlbiByb29tIGFuZCBwcmV2ZW50IGlvcyBidWcgd2hpY2hcclxuXHRcdFx0XHRcdC8vcG9zaXRpb25zIGZpeGVkIHRvb2xiYXJzIGluIHRoZSBtaWRkbGUgb2YgdGhlIHNjcmVlbiBvbiBwb3AgaWYgdGhlIGlucHV0IGlzIG5lYXIgdGhlIHRvcCBvclxyXG5cdFx0XHRcdFx0Ly9ib3R0b20gb2YgdGhlIHNjcmVlbiBhZGRyZXNzZXMgaXNzdWVzICM0NDEwIEZvb3RlciBuYXZiYXIgbW92ZXMgdXAgd2hlbiBjbGlja2luZyBvbiBhIHRleHRib3ggaW4gYW4gQW5kcm9pZCBlbnZpcm9ubWVudFxyXG5cdFx0XHRcdFx0Ly9hbmQgaXNzdWUgIzQxMTMgSGVhZGVyIGFuZCBmb290ZXIgY2hhbmdlIHRoZWlyIHBvc2l0aW9uIGFmdGVyIGtleWJvYXJkIHBvcHVwIC0gaU9TXHJcblx0XHRcdFx0XHQvL2FuZCBpc3N1ZSAjNDQxMCBGb290ZXIgbmF2YmFyIG1vdmVzIHVwIHdoZW4gY2xpY2tpbmcgb24gYSB0ZXh0Ym94IGluIGFuIEFuZHJvaWQgZW52aXJvbm1lbnRcclxuXHRcdFx0XHRcdGlmICggc2NyZWVuLndpZHRoIDwgMTAyNSAmJiAkKCBlLnRhcmdldCApLmlzKCBvLmhpZGVEdXJpbmdGb2N1cyApICYmICEkKCBlLnRhcmdldCApLmNsb3Nlc3QoIFwiLnVpLWhlYWRlci1maXhlZCwgLnVpLWZvb3Rlci1maXhlZFwiICkubGVuZ3RoICkge1xyXG5cdFx0XHRcdFx0XHQvL0ZpeCBmb3IgaXNzdWUgIzQ3MjQgTW92aW5nIHRocm91Z2ggZm9ybSBpbiBNb2JpbGUgU2FmYXJpIHdpdGggXCJOZXh0XCIgYW5kIFwiUHJldmlvdXNcIiBzeXN0ZW1cclxuXHRcdFx0XHRcdFx0Ly9jb250cm9scyBjYXVzZXMgZml4ZWQgcG9zaXRpb24sIHRhcC10b2dnbGUgZmFsc2UgSGVhZGVyIHRvIHJldmVhbCBpdHNlbGZcclxuXHRcdFx0XHRcdFx0Ly8gaXNWaXNpYmxlIGluc3RlYWQgb2Ygc2VsZi5fdmlzaWJsZSBiZWNhdXNlIHRoZSBmb2N1c2luIGFuZCBmb2N1c291dCBldmVudHMgZmlyZSB0d2ljZSBhdCB0aGUgc2FtZSB0aW1lXHJcblx0XHRcdFx0XHRcdC8vIEFsc28gdXNlIGEgZGVsYXkgZm9yIGhpZGluZyB0aGUgdG9vbGJhcnMgYmVjYXVzZSBvbiBBbmRyb2lkIG5hdGl2ZSBicm93c2VyIGZvY3VzaW4gaXMgZGlyZWNsdHkgZm9sbG93ZWRcclxuXHRcdFx0XHRcdFx0Ly8gYnkgYSBmb2N1c291dCB3aGVuIGEgbmF0aXZlIHNlbGVjdHMgb3BlbnMgYW5kIHRoZSBvdGhlciB3YXkgYXJvdW5kIHdoZW4gaXQgY2xvc2VzLlxyXG5cdFx0XHRcdFx0XHRpZiAoIGUudHlwZSA9PT0gXCJmb2N1c291dFwiICYmICFpc1Zpc2libGUgKSB7XHJcblx0XHRcdFx0XHRcdFx0aXNWaXNpYmxlID0gdHJ1ZTtcclxuXHRcdFx0XHRcdFx0XHQvL3dhaXQgZm9yIHRoZSBzdGFjayB0byB1bndpbmQgYW5kIHNlZSBpZiB3ZSBoYXZlIGp1bXBlZCB0byBhbm90aGVyIGlucHV0XHJcblx0XHRcdFx0XHRcdFx0Y2xlYXJUaW1lb3V0KCBkZWxheUhpZGUgKTtcclxuXHRcdFx0XHRcdFx0XHRkZWxheVNob3cgPSBzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdFx0XHRcdHNlbGYuc2hvdygpO1xyXG5cdFx0XHRcdFx0XHRcdH0sIDAgKTtcclxuXHRcdFx0XHRcdFx0fSBlbHNlIGlmICggZS50eXBlID09PSBcImZvY3VzaW5cIiAmJiAhIWlzVmlzaWJsZSApIHtcclxuXHRcdFx0XHRcdFx0XHQvL2lmIHdlIGhhdmUganVtcGVkIHRvIGFub3RoZXIgaW5wdXQgY2xlYXIgdGhlIHRpbWUgb3V0IHRvIGNhbmNlbCB0aGUgc2hvdy5cclxuXHRcdFx0XHRcdFx0XHRjbGVhclRpbWVvdXQoIGRlbGF5U2hvdyApO1xyXG5cdFx0XHRcdFx0XHRcdGlzVmlzaWJsZSA9IGZhbHNlO1xyXG5cdFx0XHRcdFx0XHRcdGRlbGF5SGlkZSA9IHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0c2VsZi5oaWRlKCk7XHJcblx0XHRcdFx0XHRcdFx0fSwgMCApO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSk7XHJcblx0XHR9LFxyXG5cclxuXHRcdF9zZXRSZWxhdGl2ZTogZnVuY3Rpb24oKSB7XHJcblx0XHRcdGlmKCB0aGlzLm9wdGlvbnMucG9zaXRpb24gIT09IFwiZml4ZWRcIiApe1xyXG5cdFx0XHRcdCQoIFwiW2RhdGEtXCIrICQubW9iaWxlLm5zICsgXCJyb2xlPSdwYWdlJ11cIiApLmNzcyh7IFwicG9zaXRpb25cIjogXCJyZWxhdGl2ZVwiIH0pO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cclxuXHRcdF9kZXN0cm95OiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dmFyIHBhZ2VDbGFzc2VzLCB0b29sYmFyQ2xhc3NlcywgaGFzRml4ZWQsIGhlYWRlciwgaGFzRnVsbHNjcmVlbixcclxuXHRcdFx0XHRwYWdlID0gdGhpcy5wYWdlY29udGFpbmVyLnBhZ2Vjb250YWluZXIoIFwiZ2V0QWN0aXZlUGFnZVwiICk7XHJcblxyXG5cdFx0XHR0aGlzLl9zdXBlcigpO1xyXG5cdFx0XHRpZiAoIHRoaXMub3B0aW9ucy5wb3NpdGlvbiA9PT0gXCJmaXhlZFwiICkge1xyXG5cdFx0XHRcdGhhc0ZpeGVkID0gJCggIFwiYm9keT4udWktXCIgKyB0aGlzLnJvbGUgKyBcIi1maXhlZFwiIClcclxuXHRcdFx0XHRcdFx0XHQuYWRkKCBwYWdlLmZpbmQoIFwiLnVpLVwiICsgdGhpcy5vcHRpb25zLnJvbGUgKyBcIi1maXhlZFwiICkgKVxyXG5cdFx0XHRcdFx0XHRcdC5ub3QoIHRoaXMuZWxlbWVudCApLmxlbmd0aCA+IDA7XHJcblx0XHRcdFx0aGFzRnVsbHNjcmVlbiA9ICQoICBcImJvZHk+LnVpLVwiICsgdGhpcy5yb2xlICsgXCItZml4ZWRcIiApXHJcblx0XHRcdFx0XHRcdFx0LmFkZCggcGFnZS5maW5kKCBcIi51aS1cIiArIHRoaXMub3B0aW9ucy5yb2xlICsgXCItZnVsbHNjcmVlblwiICkgKVxyXG5cdFx0XHRcdFx0XHRcdC5ub3QoIHRoaXMuZWxlbWVudCApLmxlbmd0aCA+IDA7XHJcblx0XHRcdFx0dG9vbGJhckNsYXNzZXMgPSAgXCJ1aS1oZWFkZXItZml4ZWQgdWktZm9vdGVyLWZpeGVkIHVpLWhlYWRlci1mdWxsc2NyZWVuIGluIG91dFwiICtcclxuXHRcdFx0XHRcdFwiIHVpLWZvb3Rlci1mdWxsc2NyZWVuIGZhZGUgc2xpZGVkb3duIHNsaWRldXAgdWktZml4ZWQtaGlkZGVuXCI7XHJcblx0XHRcdFx0dGhpcy5lbGVtZW50LnJlbW92ZUNsYXNzKCB0b29sYmFyQ2xhc3NlcyApO1xyXG5cdFx0XHRcdGlmICggIWhhc0Z1bGxzY3JlZW4gKSB7XHJcblx0XHRcdFx0XHRwYWdlQ2xhc3NlcyA9IFwidWktcGFnZS1cIiArIHRoaXMucm9sZSArIFwiLWZ1bGxzY3JlZW5cIjtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0aWYgKCAhaGFzRml4ZWQgKSB7XHJcblx0XHRcdFx0XHRoZWFkZXIgPSB0aGlzLnJvbGUgPT09IFwiaGVhZGVyXCI7XHJcblx0XHRcdFx0XHRwYWdlQ2xhc3NlcyArPSBcIiB1aS1wYWdlLVwiICsgdGhpcy5yb2xlICsgXCItZml4ZWRcIjtcclxuXHRcdFx0XHRcdHBhZ2UuY3NzKCBcInBhZGRpbmctXCIgKyAoIGhlYWRlciA/IFwidG9wXCIgOiBcImJvdHRvbVwiICksIFwiXCIgKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0cGFnZS5yZW1vdmVDbGFzcyggcGFnZUNsYXNzZXMgKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHR9KTtcclxufSkoIGpRdWVyeSApO1xyXG5cclxuKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7XHJcblx0JC53aWRnZXQoIFwibW9iaWxlLnRvb2xiYXJcIiwgJC5tb2JpbGUudG9vbGJhciwge1xyXG5cclxuXHRcdF9tYWtlRml4ZWQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR0aGlzLl9zdXBlcigpO1xyXG5cdFx0XHR0aGlzLl93b3JrYXJvdW5kcygpO1xyXG5cdFx0fSxcclxuXHJcblx0XHQvL2NoZWNrIHRoZSBicm93c2VyIGFuZCB2ZXJzaW9uIGFuZCBydW4gbmVlZGVkIHdvcmthcm91bmRzXHJcblx0XHRfd29ya2Fyb3VuZHM6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR2YXIgdWEgPSBuYXZpZ2F0b3IudXNlckFnZW50LFxyXG5cdFx0XHRwbGF0Zm9ybSA9IG5hdmlnYXRvci5wbGF0Zm9ybSxcclxuXHRcdFx0Ly8gUmVuZGVyaW5nIGVuZ2luZSBpcyBXZWJraXQsIGFuZCBjYXB0dXJlIG1ham9yIHZlcnNpb25cclxuXHRcdFx0d2ttYXRjaCA9IHVhLm1hdGNoKCAvQXBwbGVXZWJLaXRcXC8oWzAtOV0rKS8gKSxcclxuXHRcdFx0d2t2ZXJzaW9uID0gISF3a21hdGNoICYmIHdrbWF0Y2hbIDEgXSxcclxuXHRcdFx0b3MgPSBudWxsLFxyXG5cdFx0XHRzZWxmID0gdGhpcztcclxuXHRcdFx0Ly9zZXQgdGhlIG9zIHdlIGFyZSB3b3JraW5nIGluIGlmIGl0IGRvc2VudCBtYXRjaCBvbmUgd2l0aCB3b3JrYXJvdW5kcyByZXR1cm5cclxuXHRcdFx0aWYgKCBwbGF0Zm9ybS5pbmRleE9mKCBcImlQaG9uZVwiICkgPiAtMSB8fCBwbGF0Zm9ybS5pbmRleE9mKCBcImlQYWRcIiApID4gLTEgIHx8IHBsYXRmb3JtLmluZGV4T2YoIFwiaVBvZFwiICkgPiAtMSApIHtcclxuXHRcdFx0XHRvcyA9IFwiaW9zXCI7XHJcblx0XHRcdH0gZWxzZSBpZiAoIHVhLmluZGV4T2YoIFwiQW5kcm9pZFwiICkgPiAtMSApIHtcclxuXHRcdFx0XHRvcyA9IFwiYW5kcm9pZFwiO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cdFx0XHQvL2NoZWNrIG9zIHZlcnNpb24gaWYgaXQgZG9zZW50IG1hdGNoIG9uZSB3aXRoIHdvcmthcm91bmRzIHJldHVyblxyXG5cdFx0XHRpZiAoIG9zID09PSBcImlvc1wiICkge1xyXG5cdFx0XHRcdC8vaU9TICB3b3JrYXJvdW5kc1xyXG5cdFx0XHRcdHNlbGYuX2JpbmRTY3JvbGxXb3JrYXJvdW5kKCk7XHJcblx0XHRcdH0gZWxzZSBpZiAoIG9zID09PSBcImFuZHJvaWRcIiAmJiB3a3ZlcnNpb24gJiYgd2t2ZXJzaW9uIDwgNTM0ICkge1xyXG5cdFx0XHRcdC8vQW5kcm9pZCAyLjMgcnVuIGFsbCBBbmRyb2lkIDIuMyB3b3JrYXJvdW5kXHJcblx0XHRcdFx0c2VsZi5fYmluZFNjcm9sbFdvcmthcm91bmQoKTtcclxuXHRcdFx0XHRzZWxmLl9iaW5kTGlzdFRodW1iV29ya2Fyb3VuZCgpO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHJcblx0XHQvL1V0aWxpdHkgY2xhc3MgZm9yIGNoZWNraW5nIGhlYWRlciBhbmQgZm9vdGVyIHBvc2l0aW9ucyByZWxhdGl2ZSB0byB2aWV3cG9ydFxyXG5cdFx0X3ZpZXdwb3J0T2Zmc2V0OiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dmFyICRlbCA9IHRoaXMuZWxlbWVudCxcclxuXHRcdFx0XHRoZWFkZXIgPSAkZWwuaGFzQ2xhc3MoIFwidWktaGVhZGVyXCIgKSxcclxuXHRcdFx0XHRvZmZzZXQgPSBNYXRoLmFicyggJGVsLm9mZnNldCgpLnRvcCAtIHRoaXMud2luZG93LnNjcm9sbFRvcCgpICk7XHJcblx0XHRcdGlmICggIWhlYWRlciApIHtcclxuXHRcdFx0XHRvZmZzZXQgPSBNYXRoLnJvdW5kKCBvZmZzZXQgLSB0aGlzLndpbmRvdy5oZWlnaHQoKSArICRlbC5vdXRlckhlaWdodCgpICkgLSA2MDtcclxuXHRcdFx0fVxyXG5cdFx0XHRyZXR1cm4gb2Zmc2V0O1xyXG5cdFx0fSxcclxuXHJcblx0XHQvL2JpbmQgZXZlbnRzIGZvciBfdHJpZ2dlclJlZHJhdygpIGZ1bmN0aW9uXHJcblx0XHRfYmluZFNjcm9sbFdvcmthcm91bmQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR2YXIgc2VsZiA9IHRoaXM7XHJcblx0XHRcdC8vYmluZCB0byBzY3JvbGxzdG9wIGFuZCBjaGVjayBpZiB0aGUgdG9vbGJhcnMgYXJlIGNvcnJlY3RseSBwb3NpdGlvbmVkXHJcblx0XHRcdHRoaXMuX29uKCB0aGlzLndpbmRvdywgeyBzY3JvbGxzdG9wOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHR2YXIgdmlld3BvcnRPZmZzZXQgPSBzZWxmLl92aWV3cG9ydE9mZnNldCgpO1xyXG5cdFx0XHRcdC8vY2hlY2sgaWYgdGhlIGhlYWRlciBpcyB2aXNpYmxlIGFuZCBpZiBpdHMgaW4gdGhlIHJpZ2h0IHBsYWNlXHJcblx0XHRcdFx0aWYgKCB2aWV3cG9ydE9mZnNldCA+IDIgJiYgc2VsZi5fdmlzaWJsZSApIHtcclxuXHRcdFx0XHRcdHNlbGYuX3RyaWdnZXJSZWRyYXcoKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH19KTtcclxuXHRcdH0sXHJcblxyXG5cdFx0Ly90aGlzIGFkZHJlc3NlcyBpc3N1ZSAjNDI1MCBQZXJzaXN0ZW50IGZvb3RlciBpbnN0YWJpbGl0eSBpbiB2MS4xIHdpdGggbG9uZyBzZWxlY3QgbGlzdHMgaW4gQW5kcm9pZCAyLjMuM1xyXG5cdFx0Ly9hbmQgaXNzdWUgIzM3NDggQW5kcm9pZCAyLng6IFBhZ2UgdHJhbnNpdGlvbnMgYnJva2VuIHdoZW4gZml4ZWQgdG9vbGJhcnMgdXNlZFxyXG5cdFx0Ly90aGUgYWJzb2x1dGVseSBwb3NpdGlvbmVkIHRodW1ibmFpbCBpbiBhIGxpc3QgdmlldyBjYXVzZXMgcHJvYmxlbXMgd2l0aCBmaXhlZCBwb3NpdGlvbiBidXR0b25zIGFib3ZlIGluIGEgbmF2IGJhclxyXG5cdFx0Ly9zZXR0aW5nIHRoZSBsaSdzIHRvIC13ZWJraXQtdHJhbnNmb3JtOnRyYW5zbGF0ZTNkKDAsMCwwKTsgc29sdmVzIHRoaXMgcHJvYmxlbSB0byBhdm9pZGUgcG90ZW50aWFsIGlzc3VlcyBpbiBvdGhlclxyXG5cdFx0Ly9wbGF0Zm9ybXMgd2Ugc2NvcGUgdGhpcyB3aXRoIHRoZSBjbGFzcyB1aS1hbmRyb2lkLTJ4LWZpeFxyXG5cdFx0X2JpbmRMaXN0VGh1bWJXb3JrYXJvdW5kOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dGhpcy5lbGVtZW50LmNsb3Nlc3QoIFwiLnVpLXBhZ2VcIiApLmFkZENsYXNzKCBcInVpLWFuZHJvaWQtMngtZml4ZWRcIiApO1xyXG5cdFx0fSxcclxuXHRcdC8vdGhpcyBhZGRyZXNzZXMgaXNzdWVzICM0MzM3IEZpeGVkIGhlYWRlciBwcm9ibGVtIGFmdGVyIHNjcm9sbGluZyBjb250ZW50IG9uIGlPUyBhbmQgQW5kcm9pZFxyXG5cdFx0Ly9hbmQgZGV2aWNlIGJ1Z3MgcHJvamVjdCBpc3N1ZSAjMSBGb3JtIGVsZW1lbnRzIGNhbiBsb3NlIGNsaWNrIGhpdCBhcmVhIGluIHBvc2l0aW9uOiBmaXhlZCBjb250YWluZXJzLlxyXG5cdFx0Ly90aGlzIGFsc28gYWRkcmVzc2VzIG5vdCBvbiBmaXhlZCB0b29sYmFycyBwYWdlIGluIGRvY3NcclxuXHRcdC8vYWRkaW5nIDFweCBvZiBwYWRkaW5nIHRvIHRoZSBib3R0b20gdGhlbiByZW1vdmluZyBpdCBjYXVzZXMgYSBcInJlZHJhd1wiXHJcblx0XHQvL3doaWNoIHBvc2l0aW9ucyB0aGUgdG9vbGJhcnMgY29ycmVjdGx5ICh0aGV5IHdpbGwgYWx3YXlzIGJlIHZpc3VhbGx5IGNvcnJlY3QpXHJcblx0XHRfdHJpZ2dlclJlZHJhdzogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHZhciBwYWRkaW5nQm90dG9tID0gcGFyc2VGbG9hdCggJCggXCIudWktcGFnZS1hY3RpdmVcIiApLmNzcyggXCJwYWRkaW5nLWJvdHRvbVwiICkgKTtcclxuXHRcdFx0Ly90cmlnZ2VyIHBhZ2UgcmVkcmF3IHRvIGZpeCBpbmNvcnJlY3RseSBwb3NpdGlvbmVkIGZpeGVkIGVsZW1lbnRzXHJcblx0XHRcdCQoIFwiLnVpLXBhZ2UtYWN0aXZlXCIgKS5jc3MoIFwicGFkZGluZy1ib3R0b21cIiwgKCBwYWRkaW5nQm90dG9tICsgMSApICsgXCJweFwiICk7XHJcblx0XHRcdC8vaWYgdGhlIHBhZGRpbmcgaXMgcmVzZXQgd2l0aCBvdXQgYSB0aW1lb3V0IHRoZSByZXBvc2l0aW9uIHdpbGwgbm90IG9jY3VyZS5cclxuXHRcdFx0Ly90aGlzIGlzIGluZGVwZW5kYW50IG9mIEpRTSB0aGUgYnJvd3NlciBzZWVtcyB0byBuZWVkIHRoZSB0aW1lIHRvIHJlYWN0LlxyXG5cdFx0XHRzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHQkKCBcIi51aS1wYWdlLWFjdGl2ZVwiICkuY3NzKCBcInBhZGRpbmctYm90dG9tXCIsIHBhZGRpbmdCb3R0b20gKyBcInB4XCIgKTtcclxuXHRcdFx0fSwgMCApO1xyXG5cdFx0fSxcclxuXHJcblx0XHRkZXN0cm95OiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dGhpcy5fc3VwZXIoKTtcclxuXHRcdFx0Ly9SZW1vdmUgdGhlIGNsYXNzIHdlIGFkZGVkIHRvIHRoZSBwYWdlIHByZXZpb3VzbHkgaW4gYW5kcm9pZCAyLnhcclxuXHRcdFx0dGhpcy5lbGVtZW50LmNsb3Nlc3QoIFwiLnVpLXBhZ2UtYWN0aXZlXCIgKS5yZW1vdmVDbGFzcyggXCJ1aS1hbmRyb2lkLTJ4LWZpeFwiICk7XHJcblx0XHR9XHJcblx0fSk7XHJcblxyXG59KSggalF1ZXJ5ICk7XHJcblxyXG5cclxuKCBmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xyXG5cclxudmFyIGllSGFjayA9ICggJC5tb2JpbGUuYnJvd3Nlci5vbGRJRSAmJiAkLm1vYmlsZS5icm93c2VyLm9sZElFIDw9IDggKSxcclxuXHR1aVRlbXBsYXRlID0gJChcclxuXHRcdFwiPGRpdiBjbGFzcz0ndWktcG9wdXAtYXJyb3ctZ3VpZGUnPjwvZGl2PlwiICtcclxuXHRcdFwiPGRpdiBjbGFzcz0ndWktcG9wdXAtYXJyb3ctY29udGFpbmVyXCIgKyAoIGllSGFjayA/IFwiIGllXCIgOiBcIlwiICkgKyBcIic+XCIgK1xyXG5cdFx0XHRcIjxkaXYgY2xhc3M9J3VpLXBvcHVwLWFycm93Jz48L2Rpdj5cIiArXHJcblx0XHRcIjwvZGl2PlwiXHJcblx0KTtcclxuXHJcbmZ1bmN0aW9uIGdldEFycm93KCkge1xyXG5cdHZhciBjbG9uZSA9IHVpVGVtcGxhdGUuY2xvbmUoKSxcclxuXHRcdGdkID0gY2xvbmUuZXEoIDAgKSxcclxuXHRcdGN0ID0gY2xvbmUuZXEoIDEgKSxcclxuXHRcdGFyID0gY3QuY2hpbGRyZW4oKTtcclxuXHJcblx0cmV0dXJuIHsgYXJFbHM6IGN0LmFkZCggZ2QgKSwgZ2Q6IGdkLCBjdDogY3QsIGFyOiBhciB9O1xyXG59XHJcblxyXG4kLndpZGdldCggXCJtb2JpbGUucG9wdXBcIiwgJC5tb2JpbGUucG9wdXAsIHtcclxuXHRvcHRpb25zOiB7XHJcblxyXG5cdFx0YXJyb3c6IFwiXCJcclxuXHR9LFxyXG5cclxuXHRfY3JlYXRlOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBhcixcclxuXHRcdFx0cmV0ID0gdGhpcy5fc3VwZXIoKTtcclxuXHJcblx0XHRpZiAoIHRoaXMub3B0aW9ucy5hcnJvdyApIHtcclxuXHRcdFx0dGhpcy5fdWkuYXJyb3cgPSBhciA9IHRoaXMuX2FkZEFycm93KCk7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHJldDtcclxuXHR9LFxyXG5cclxuXHRfYWRkQXJyb3c6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIHRoZW1lLFxyXG5cdFx0XHRvcHRzID0gdGhpcy5vcHRpb25zLFxyXG5cdFx0XHRhciA9IGdldEFycm93KCk7XHJcblxyXG5cdFx0dGhlbWUgPSB0aGlzLl90aGVtZUNsYXNzRnJvbU9wdGlvbiggXCJ1aS1ib2R5LVwiLCBvcHRzLnRoZW1lICk7XHJcblx0XHRhci5hci5hZGRDbGFzcyggdGhlbWUgKyAoIG9wdHMuc2hhZG93ID8gXCIgdWktb3ZlcmxheS1zaGFkb3dcIiA6IFwiXCIgKSApO1xyXG5cdFx0YXIuYXJFbHMuaGlkZSgpLmFwcGVuZFRvKCB0aGlzLmVsZW1lbnQgKTtcclxuXHJcblx0XHRyZXR1cm4gYXI7XHJcblx0fSxcclxuXHJcblx0X3VuZW5oYW5jZTogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgYXIgPSB0aGlzLl91aS5hcnJvdztcclxuXHJcblx0XHRpZiAoIGFyICkge1xyXG5cdFx0XHRhci5hckVscy5yZW1vdmUoKTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gdGhpcy5fc3VwZXIoKTtcclxuXHR9LFxyXG5cclxuXHQvLyBQcmV0ZW5kIHRvIHNob3cgYW4gYXJyb3cgZGVzY3JpYmVkIGJ5IEBwIGFuZCBAZGlyIGFuZCBjYWxjdWxhdGUgdGhlXHJcblx0Ly8gZGlzdGFuY2UgZnJvbSB0aGUgZGVzaXJlZCBwb2ludC4gSWYgYSBiZXN0LWRpc3RhbmNlIGlzIHBhc3NlZCBpbiwgcmV0dXJuXHJcblx0Ly8gdGhlIG1pbmltdW0gb2YgdGhlIG9uZSBwYXNzZWQgaW4gYW5kIHRoZSBvbmUgY2FsY3VsYXRlZC5cclxuXHRfdHJ5QW5BcnJvdzogZnVuY3Rpb24oIHAsIGRpciwgZGVzaXJlZCwgcywgYmVzdCApIHtcclxuXHRcdHZhciByZXN1bHQsIHIsIGRpZmYsIGRlc2lyZWRGb3JBcnJvdyA9IHt9LCB0aXAgPSB7fTtcclxuXHJcblx0XHQvLyBJZiB0aGUgYXJyb3cgaGFzIG5vIHdpZ2dsZSByb29tIGFsb25nIHRoZSBlZGdlIG9mIHRoZSBwb3B1cCwgaXQgY2Fubm90XHJcblx0XHQvLyBiZSBkaXNwbGF5ZWQgYWxvbmcgdGhlIHJlcXVlc3RlZCBlZGdlIHdpdGhvdXQgaXQgc3RpY2tpbmcgb3V0LlxyXG5cdFx0aWYgKCBzLmFyRnVsbFsgcC5kaW1LZXkgXSA+IHMuZ3VpZGVEaW1zWyBwLmRpbUtleSBdICkge1xyXG5cdFx0XHRyZXR1cm4gYmVzdDtcclxuXHRcdH1cclxuXHJcblx0XHRkZXNpcmVkRm9yQXJyb3dbIHAuZnN0IF0gPSBkZXNpcmVkWyBwLmZzdCBdICtcclxuXHRcdFx0KCBzLmFySGFsZlsgcC5vRGltS2V5IF0gKyBzLm1lbnVIYWxmWyBwLm9EaW1LZXkgXSApICogcC5vZmZzZXRGYWN0b3IgLVxyXG5cdFx0XHRzLmNvbnRlbnRCb3hbIHAuZnN0IF0gKyAoIHMuY2xhbXBJbmZvLm1lbnVTaXplWyBwLm9EaW1LZXkgXSAtIHMuY29udGVudEJveFsgcC5vRGltS2V5IF0gKSAqIHAuYXJyb3dPZmZzZXRGYWN0b3I7XHJcblx0XHRkZXNpcmVkRm9yQXJyb3dbIHAuc25kIF0gPSBkZXNpcmVkWyBwLnNuZCBdO1xyXG5cclxuXHRcdHJlc3VsdCA9IHMucmVzdWx0IHx8IHRoaXMuX2NhbGN1bGF0ZUZpbmFsTG9jYXRpb24oIGRlc2lyZWRGb3JBcnJvdywgcy5jbGFtcEluZm8gKTtcclxuXHRcdHIgPSB7IHg6IHJlc3VsdC5sZWZ0LCB5OiByZXN1bHQudG9wIH07XHJcblxyXG5cdFx0dGlwWyBwLmZzdCBdID0gclsgcC5mc3QgXSArIHMuY29udGVudEJveFsgcC5mc3QgXSArIHAudGlwT2Zmc2V0O1xyXG5cdFx0dGlwWyBwLnNuZCBdID0gTWF0aC5tYXgoIHJlc3VsdFsgcC5wcm9wIF0gKyBzLmd1aWRlT2Zmc2V0WyBwLnByb3AgXSArIHMuYXJIYWxmWyBwLmRpbUtleSBdLFxyXG5cdFx0XHRNYXRoLm1pbiggcmVzdWx0WyBwLnByb3AgXSArIHMuZ3VpZGVPZmZzZXRbIHAucHJvcCBdICsgcy5ndWlkZURpbXNbIHAuZGltS2V5IF0gLSBzLmFySGFsZlsgcC5kaW1LZXkgXSxcclxuXHRcdFx0XHRkZXNpcmVkWyBwLnNuZCBdICkgKTtcclxuXHJcblx0XHRkaWZmID0gTWF0aC5hYnMoIGRlc2lyZWQueCAtIHRpcC54ICkgKyBNYXRoLmFicyggZGVzaXJlZC55IC0gdGlwLnkgKTtcclxuXHRcdGlmICggIWJlc3QgfHwgZGlmZiA8IGJlc3QuZGlmZiApIHtcclxuXHRcdFx0Ly8gQ29udmVydCB0aXAgb2Zmc2V0IHRvIGNvb3JkaW5hdGVzIGluc2lkZSB0aGUgcG9wdXBcclxuXHRcdFx0dGlwWyBwLnNuZCBdIC09IHMuYXJIYWxmWyBwLmRpbUtleSBdICsgcmVzdWx0WyBwLnByb3AgXSArIHMuY29udGVudEJveFsgcC5zbmQgXTtcclxuXHRcdFx0YmVzdCA9IHsgZGlyOiBkaXIsIGRpZmY6IGRpZmYsIHJlc3VsdDogcmVzdWx0LCBwb3NQcm9wOiBwLnByb3AsIHBvc1ZhbDogdGlwWyBwLnNuZCBdIH07XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIGJlc3Q7XHJcblx0fSxcclxuXHJcblx0X2dldFBsYWNlbWVudFN0YXRlOiBmdW5jdGlvbiggY2xhbXAgKSB7XHJcblx0XHR2YXIgb2Zmc2V0LCBnZE9mZnNldCxcclxuXHRcdFx0YXIgPSB0aGlzLl91aS5hcnJvdyxcclxuXHRcdFx0c3RhdGUgPSB7XHJcblx0XHRcdFx0Y2xhbXBJbmZvOiB0aGlzLl9jbGFtcFBvcHVwV2lkdGgoICFjbGFtcCApLFxyXG5cdFx0XHRcdGFyRnVsbDogeyBjeDogYXIuY3Qud2lkdGgoKSwgY3k6IGFyLmN0LmhlaWdodCgpIH0sXHJcblx0XHRcdFx0Z3VpZGVEaW1zOiB7IGN4OiBhci5nZC53aWR0aCgpLCBjeTogYXIuZ2QuaGVpZ2h0KCkgfSxcclxuXHRcdFx0XHRndWlkZU9mZnNldDogYXIuZ2Qub2Zmc2V0KClcclxuXHRcdFx0fTtcclxuXHJcblx0XHRvZmZzZXQgPSB0aGlzLmVsZW1lbnQub2Zmc2V0KCk7XHJcblxyXG5cdFx0YXIuZ2QuY3NzKCB7IGxlZnQ6IDAsIHRvcDogMCwgcmlnaHQ6IDAsIGJvdHRvbTogMCB9ICk7XHJcblx0XHRnZE9mZnNldCA9IGFyLmdkLm9mZnNldCgpO1xyXG5cdFx0c3RhdGUuY29udGVudEJveCA9IHtcclxuXHRcdFx0eDogZ2RPZmZzZXQubGVmdCAtIG9mZnNldC5sZWZ0LFxyXG5cdFx0XHR5OiBnZE9mZnNldC50b3AgLSBvZmZzZXQudG9wLFxyXG5cdFx0XHRjeDogYXIuZ2Qud2lkdGgoKSxcclxuXHRcdFx0Y3k6IGFyLmdkLmhlaWdodCgpXHJcblx0XHR9O1xyXG5cdFx0YXIuZ2QucmVtb3ZlQXR0ciggXCJzdHlsZVwiICk7XHJcblxyXG5cdFx0Ly8gVGhlIGFycm93IGJveCBtb3ZlcyBiZXR3ZWVuIGd1aWRlT2Zmc2V0IGFuZCBndWlkZU9mZnNldCArIGd1aWRlRGltcyAtIGFyRnVsbFxyXG5cdFx0c3RhdGUuZ3VpZGVPZmZzZXQgPSB7IGxlZnQ6IHN0YXRlLmd1aWRlT2Zmc2V0LmxlZnQgLSBvZmZzZXQubGVmdCwgdG9wOiBzdGF0ZS5ndWlkZU9mZnNldC50b3AgLSBvZmZzZXQudG9wIH07XHJcblx0XHRzdGF0ZS5hckhhbGYgPSB7IGN4OiBzdGF0ZS5hckZ1bGwuY3ggLyAyLCBjeTogc3RhdGUuYXJGdWxsLmN5IC8gMiB9O1xyXG5cdFx0c3RhdGUubWVudUhhbGYgPSB7IGN4OiBzdGF0ZS5jbGFtcEluZm8ubWVudVNpemUuY3ggLyAyLCBjeTogc3RhdGUuY2xhbXBJbmZvLm1lbnVTaXplLmN5IC8gMiB9O1xyXG5cclxuXHRcdHJldHVybiBzdGF0ZTtcclxuXHR9LFxyXG5cclxuXHRfcGxhY2VtZW50Q29vcmRzOiBmdW5jdGlvbiggZGVzaXJlZCApIHtcclxuXHRcdHZhciBzdGF0ZSwgYmVzdCwgcGFyYW1zLCBlbE9mZnNldCwgYmdSZWYsXHJcblx0XHRcdG9wdGlvblZhbHVlID0gdGhpcy5vcHRpb25zLmFycm93LFxyXG5cdFx0XHRhciA9IHRoaXMuX3VpLmFycm93O1xyXG5cclxuXHRcdGlmICggIWFyICkge1xyXG5cdFx0XHRyZXR1cm4gdGhpcy5fc3VwZXIoIGRlc2lyZWQgKTtcclxuXHRcdH1cclxuXHJcblx0XHRhci5hckVscy5zaG93KCk7XHJcblxyXG5cdFx0YmdSZWYgPSB7fTtcclxuXHRcdHN0YXRlID0gdGhpcy5fZ2V0UGxhY2VtZW50U3RhdGUoIHRydWUgKTtcclxuXHRcdHBhcmFtcyA9IHtcclxuXHRcdFx0XCJsXCI6IHsgZnN0OiBcInhcIiwgc25kOiBcInlcIiwgcHJvcDogXCJ0b3BcIiwgZGltS2V5OiBcImN5XCIsIG9EaW1LZXk6IFwiY3hcIiwgb2Zmc2V0RmFjdG9yOiAxLCB0aXBPZmZzZXQ6ICAtc3RhdGUuYXJIYWxmLmN4LCBhcnJvd09mZnNldEZhY3RvcjogMCB9LFxyXG5cdFx0XHRcInJcIjogeyBmc3Q6IFwieFwiLCBzbmQ6IFwieVwiLCBwcm9wOiBcInRvcFwiLCBkaW1LZXk6IFwiY3lcIiwgb0RpbUtleTogXCJjeFwiLCBvZmZzZXRGYWN0b3I6IC0xLCB0aXBPZmZzZXQ6IHN0YXRlLmFySGFsZi5jeCArIHN0YXRlLmNvbnRlbnRCb3guY3gsIGFycm93T2Zmc2V0RmFjdG9yOiAxIH0sXHJcblx0XHRcdFwiYlwiOiB7IGZzdDogXCJ5XCIsIHNuZDogXCJ4XCIsIHByb3A6IFwibGVmdFwiLCBkaW1LZXk6IFwiY3hcIiwgb0RpbUtleTogXCJjeVwiLCBvZmZzZXRGYWN0b3I6IC0xLCB0aXBPZmZzZXQ6IHN0YXRlLmFySGFsZi5jeSArIHN0YXRlLmNvbnRlbnRCb3guY3ksIGFycm93T2Zmc2V0RmFjdG9yOiAxIH0sXHJcblx0XHRcdFwidFwiOiB7IGZzdDogXCJ5XCIsIHNuZDogXCJ4XCIsIHByb3A6IFwibGVmdFwiLCBkaW1LZXk6IFwiY3hcIiwgb0RpbUtleTogXCJjeVwiLCBvZmZzZXRGYWN0b3I6IDEsIHRpcE9mZnNldDogLXN0YXRlLmFySGFsZi5jeSwgYXJyb3dPZmZzZXRGYWN0b3I6IDAgfVxyXG5cdFx0fTtcclxuXHJcblx0XHQvLyBUcnkgZWFjaCBzaWRlIHNwZWNpZmllZCBpbiB0aGUgb3B0aW9ucyB0byBzZWUgb24gd2hpY2ggb25lIHRoZSBhcnJvd1xyXG5cdFx0Ly8gc2hvdWxkIGJlIHBsYWNlZCBzdWNoIHRoYXQgdGhlIGRpc3RhbmNlIGJldHdlZW4gdGhlIHRpcCBvZiB0aGUgYXJyb3cgYW5kXHJcblx0XHQvLyB0aGUgZGVzaXJlZCBjb29yZGluYXRlcyBpcyB0aGUgc2hvcnRlc3QuXHJcblx0XHQkLmVhY2goICggb3B0aW9uVmFsdWUgPT09IHRydWUgPyBcImwsdCxyLGJcIiA6IG9wdGlvblZhbHVlICkuc3BsaXQoIFwiLFwiICksXHJcblx0XHRcdCQucHJveHkoIGZ1bmN0aW9uKCBrZXksIHZhbHVlICkge1xyXG5cdFx0XHRcdGJlc3QgPSB0aGlzLl90cnlBbkFycm93KCBwYXJhbXNbIHZhbHVlIF0sIHZhbHVlLCBkZXNpcmVkLCBzdGF0ZSwgYmVzdCApO1xyXG5cdFx0XHR9LCB0aGlzICkgKTtcclxuXHJcblx0XHQvLyBDb3VsZCBub3QgcGxhY2UgdGhlIGFycm93IGFsb25nIGFueSBvZiB0aGUgZWRnZXMgLSBiZWhhdmUgYXMgaWYgc2hvd2luZ1xyXG5cdFx0Ly8gdGhlIGFycm93IHdhcyB0dXJuZWQgb2ZmLlxyXG5cdFx0aWYgKCAhYmVzdCApIHtcclxuXHRcdFx0YXIuYXJFbHMuaGlkZSgpO1xyXG5cdFx0XHRyZXR1cm4gdGhpcy5fc3VwZXIoIGRlc2lyZWQgKTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBNb3ZlIHRoZSBhcnJvdyBpbnRvIHBsYWNlXHJcblx0XHRhci5jdFxyXG5cdFx0XHQucmVtb3ZlQ2xhc3MoIFwidWktcG9wdXAtYXJyb3ctbCB1aS1wb3B1cC1hcnJvdy10IHVpLXBvcHVwLWFycm93LXIgdWktcG9wdXAtYXJyb3ctYlwiIClcclxuXHRcdFx0LmFkZENsYXNzKCBcInVpLXBvcHVwLWFycm93LVwiICsgYmVzdC5kaXIgKVxyXG5cdFx0XHQucmVtb3ZlQXR0ciggXCJzdHlsZVwiICkuY3NzKCBiZXN0LnBvc1Byb3AsIGJlc3QucG9zVmFsIClcclxuXHRcdFx0LnNob3coKTtcclxuXHJcblx0XHQvLyBEbyBub3QgbW92ZS9zaXplIHRoZSBiYWNrZ3JvdW5kIGRpdiBvbiBJRSwgYmVjYXVzZSB3ZSB1c2UgdGhlIGFycm93IGRpdiBmb3IgYmFja2dyb3VuZCBhcyB3ZWxsLlxyXG5cdFx0aWYgKCAhaWVIYWNrICkge1xyXG5cdFx0XHRlbE9mZnNldCA9IHRoaXMuZWxlbWVudC5vZmZzZXQoKTtcclxuXHRcdFx0YmdSZWZbIHBhcmFtc1sgYmVzdC5kaXIgXS5mc3QgXSA9IGFyLmN0Lm9mZnNldCgpO1xyXG5cdFx0XHRiZ1JlZlsgcGFyYW1zWyBiZXN0LmRpciBdLnNuZCBdID0ge1xyXG5cdFx0XHRcdGxlZnQ6IGVsT2Zmc2V0LmxlZnQgKyBzdGF0ZS5jb250ZW50Qm94LngsXHJcblx0XHRcdFx0dG9wOiBlbE9mZnNldC50b3AgKyBzdGF0ZS5jb250ZW50Qm94LnlcclxuXHRcdFx0fTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gYmVzdC5yZXN1bHQ7XHJcblx0fSxcclxuXHJcblx0X3NldE9wdGlvbnM6IGZ1bmN0aW9uKCBvcHRzICkge1xyXG5cdFx0dmFyIG5ld1RoZW1lLFxyXG5cdFx0XHRvbGRUaGVtZSA9IHRoaXMub3B0aW9ucy50aGVtZSxcclxuXHRcdFx0YXIgPSB0aGlzLl91aS5hcnJvdyxcclxuXHRcdFx0cmV0ID0gdGhpcy5fc3VwZXIoIG9wdHMgKTtcclxuXHJcblx0XHRpZiAoIG9wdHMuYXJyb3cgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0aWYgKCAhYXIgJiYgb3B0cy5hcnJvdyApIHtcclxuXHRcdFx0XHR0aGlzLl91aS5hcnJvdyA9IHRoaXMuX2FkZEFycm93KCk7XHJcblxyXG5cdFx0XHRcdC8vIEltcG9ydGFudCB0byByZXR1cm4gaGVyZSBzbyB3ZSBkb24ndCBzZXQgdGhlIHNhbWUgb3B0aW9ucyBhbGwgb3ZlclxyXG5cdFx0XHRcdC8vIGFnYWluIGJlbG93LlxyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fSBlbHNlIGlmICggYXIgJiYgIW9wdHMuYXJyb3cgKSB7XHJcblx0XHRcdFx0YXIuYXJFbHMucmVtb3ZlKCk7XHJcblx0XHRcdFx0dGhpcy5fdWkuYXJyb3cgPSBudWxsO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gUmVhc3NpZ24gd2l0aCBwb3RlbnRpYWxseSBuZXcgYXJyb3dcclxuXHRcdGFyID0gdGhpcy5fdWkuYXJyb3c7XHJcblxyXG5cdFx0aWYgKCBhciApIHtcclxuXHRcdFx0aWYgKCBvcHRzLnRoZW1lICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdFx0b2xkVGhlbWUgPSB0aGlzLl90aGVtZUNsYXNzRnJvbU9wdGlvbiggXCJ1aS1ib2R5LVwiLCBvbGRUaGVtZSApO1xyXG5cdFx0XHRcdG5ld1RoZW1lID0gdGhpcy5fdGhlbWVDbGFzc0Zyb21PcHRpb24oIFwidWktYm9keS1cIiwgb3B0cy50aGVtZSApO1xyXG5cdFx0XHRcdGFyLmFyLnJlbW92ZUNsYXNzKCBvbGRUaGVtZSApLmFkZENsYXNzKCBuZXdUaGVtZSApO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpZiAoIG9wdHMuc2hhZG93ICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdFx0YXIuYXIudG9nZ2xlQ2xhc3MoIFwidWktb3ZlcmxheS1zaGFkb3dcIiwgb3B0cy5zaGFkb3cgKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiByZXQ7XHJcblx0fSxcclxuXHJcblx0X2Rlc3Ryb3k6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIGFyID0gdGhpcy5fdWkuYXJyb3c7XHJcblxyXG5cdFx0aWYgKCBhciApIHtcclxuXHRcdFx0YXIuYXJFbHMucmVtb3ZlKCk7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHRoaXMuX3N1cGVyKCk7XHJcblx0fVxyXG59KTtcclxuXHJcbn0pKCBqUXVlcnkgKTtcclxuXHJcblxyXG4oZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcclxuXHJcbiQud2lkZ2V0KCBcIm1vYmlsZS5wYW5lbFwiLCB7XHJcblx0b3B0aW9uczoge1xyXG5cdFx0Y2xhc3Nlczoge1xyXG5cdFx0XHRwYW5lbDogXCJ1aS1wYW5lbFwiLFxyXG5cdFx0XHRwYW5lbE9wZW46IFwidWktcGFuZWwtb3BlblwiLFxyXG5cdFx0XHRwYW5lbENsb3NlZDogXCJ1aS1wYW5lbC1jbG9zZWRcIixcclxuXHRcdFx0cGFuZWxGaXhlZDogXCJ1aS1wYW5lbC1maXhlZFwiLFxyXG5cdFx0XHRwYW5lbElubmVyOiBcInVpLXBhbmVsLWlubmVyXCIsXHJcblx0XHRcdG1vZGFsOiBcInVpLXBhbmVsLWRpc21pc3NcIixcclxuXHRcdFx0bW9kYWxPcGVuOiBcInVpLXBhbmVsLWRpc21pc3Mtb3BlblwiLFxyXG5cdFx0XHRwYWdlQ29udGFpbmVyOiBcInVpLXBhbmVsLXBhZ2UtY29udGFpbmVyXCIsXHJcblx0XHRcdHBhZ2VXcmFwcGVyOiBcInVpLXBhbmVsLXdyYXBwZXJcIixcclxuXHRcdFx0cGFnZUZpeGVkVG9vbGJhcjogXCJ1aS1wYW5lbC1maXhlZC10b29sYmFyXCIsXHJcblx0XHRcdHBhZ2VDb250ZW50UHJlZml4OiBcInVpLXBhbmVsLXBhZ2UtY29udGVudFwiLCAvKiBVc2VkIGZvciB3cmFwcGVyIGFuZCBmaXhlZCB0b29sYmFycyBwb3NpdGlvbiwgZGlzcGxheSBhbmQgb3BlbiBjbGFzc2VzLiAqL1xyXG5cdFx0XHRhbmltYXRlOiBcInVpLXBhbmVsLWFuaW1hdGVcIlxyXG5cdFx0fSxcclxuXHRcdGFuaW1hdGU6IHRydWUsXHJcblx0XHR0aGVtZTogbnVsbCxcclxuXHRcdHBvc2l0aW9uOiBcImxlZnRcIixcclxuXHRcdGRpc21pc3NpYmxlOiB0cnVlLFxyXG5cdFx0ZGlzcGxheTogXCJyZXZlYWxcIiwgLy9hY2NlcHRzIHJldmVhbCwgcHVzaCwgb3ZlcmxheVxyXG5cdFx0c3dpcGVDbG9zZTogdHJ1ZSxcclxuXHRcdHBvc2l0aW9uRml4ZWQ6IGZhbHNlXHJcblx0fSxcclxuXHJcblx0X2Nsb3NlTGluazogbnVsbCxcclxuXHRfcGFyZW50UGFnZTogbnVsbCxcclxuXHRfcGFnZTogbnVsbCxcclxuXHRfbW9kYWw6IG51bGwsXHJcblx0X3BhbmVsSW5uZXI6IG51bGwsXHJcblx0X3dyYXBwZXI6IG51bGwsXHJcblx0X2ZpeGVkVG9vbGJhcnM6IG51bGwsXHJcblxyXG5cdF9jcmVhdGU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIGVsID0gdGhpcy5lbGVtZW50LFxyXG5cdFx0XHRwYXJlbnRQYWdlID0gZWwuY2xvc2VzdCggXCIudWktcGFnZSwgOmpxbURhdGEocm9sZT0ncGFnZScpXCIgKTtcclxuXHJcblx0XHQvLyBleHBvc2Ugc29tZSBwcml2YXRlIHByb3BzIHRvIG90aGVyIG1ldGhvZHNcclxuXHRcdCQuZXh0ZW5kKCB0aGlzLCB7XHJcblx0XHRcdF9jbG9zZUxpbms6IGVsLmZpbmQoIFwiOmpxbURhdGEocmVsPSdjbG9zZScpXCIgKSxcclxuXHRcdFx0X3BhcmVudFBhZ2U6ICggcGFyZW50UGFnZS5sZW5ndGggPiAwICkgPyBwYXJlbnRQYWdlIDogZmFsc2UsXHJcblx0XHRcdF9vcGVuZWRQYWdlOiBudWxsLFxyXG5cdFx0XHRfcGFnZTogdGhpcy5fZ2V0UGFnZSxcclxuXHRcdFx0X3BhbmVsSW5uZXI6IHRoaXMuX2dldFBhbmVsSW5uZXIoKSxcclxuXHRcdFx0X2ZpeGVkVG9vbGJhcnM6IHRoaXMuX2dldEZpeGVkVG9vbGJhcnNcclxuXHRcdH0pO1xyXG5cdFx0aWYgKCB0aGlzLm9wdGlvbnMuZGlzcGxheSAhPT0gXCJvdmVybGF5XCIgKXtcclxuXHRcdFx0dGhpcy5fZ2V0V3JhcHBlcigpO1xyXG5cdFx0fVxyXG5cdFx0dGhpcy5fYWRkUGFuZWxDbGFzc2VzKCk7XHJcblxyXG5cdFx0Ly8gaWYgYW5pbWF0aW5nLCBhZGQgdGhlIGNsYXNzIHRvIGRvIHNvXHJcblx0XHRpZiAoICQuc3VwcG9ydC5jc3NUcmFuc2Zvcm0zZCAmJiAhIXRoaXMub3B0aW9ucy5hbmltYXRlICkge1xyXG5cdFx0XHR0aGlzLmVsZW1lbnQuYWRkQ2xhc3MoIHRoaXMub3B0aW9ucy5jbGFzc2VzLmFuaW1hdGUgKTtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLl9iaW5kVXBkYXRlTGF5b3V0KCk7XHJcblx0XHR0aGlzLl9iaW5kQ2xvc2VFdmVudHMoKTtcclxuXHRcdHRoaXMuX2JpbmRMaW5rTGlzdGVuZXJzKCk7XHJcblx0XHR0aGlzLl9iaW5kUGFnZUV2ZW50cygpO1xyXG5cclxuXHRcdGlmICggISF0aGlzLm9wdGlvbnMuZGlzbWlzc2libGUgKSB7XHJcblx0XHRcdHRoaXMuX2NyZWF0ZU1vZGFsKCk7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5fYmluZFN3aXBlRXZlbnRzKCk7XHJcblx0fSxcclxuXHJcblx0X2dldFBhbmVsSW5uZXI6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIHBhbmVsSW5uZXIgPSB0aGlzLmVsZW1lbnQuZmluZCggXCIuXCIgKyB0aGlzLm9wdGlvbnMuY2xhc3Nlcy5wYW5lbElubmVyICk7XHJcblxyXG5cdFx0aWYgKCBwYW5lbElubmVyLmxlbmd0aCA9PT0gMCApIHtcclxuXHRcdFx0cGFuZWxJbm5lciA9IHRoaXMuZWxlbWVudC5jaGlsZHJlbigpLndyYXBBbGwoIFwiPGRpdiBjbGFzcz0nXCIgKyB0aGlzLm9wdGlvbnMuY2xhc3Nlcy5wYW5lbElubmVyICsgXCInIC8+XCIgKS5wYXJlbnQoKTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gcGFuZWxJbm5lcjtcclxuXHR9LFxyXG5cclxuXHRfY3JlYXRlTW9kYWw6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIHNlbGYgPSB0aGlzLFxyXG5cdFx0XHR0YXJnZXQgPSBzZWxmLl9wYXJlbnRQYWdlID8gc2VsZi5fcGFyZW50UGFnZS5wYXJlbnQoKSA6IHNlbGYuZWxlbWVudC5wYXJlbnQoKTtcclxuXHJcblx0XHRzZWxmLl9tb2RhbCA9ICQoIFwiPGRpdiBjbGFzcz0nXCIgKyBzZWxmLm9wdGlvbnMuY2xhc3Nlcy5tb2RhbCArIFwiJz48L2Rpdj5cIiApXHJcblx0XHRcdC5vbiggXCJtb3VzZWRvd25cIiwgZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0c2VsZi5jbG9zZSgpO1xyXG5cdFx0XHR9KVxyXG5cdFx0XHQuYXBwZW5kVG8oIHRhcmdldCApO1xyXG5cdH0sXHJcblxyXG5cdF9nZXRQYWdlOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBwYWdlID0gdGhpcy5fb3BlbmVkUGFnZSB8fCB0aGlzLl9wYXJlbnRQYWdlIHx8ICQoIFwiLlwiICsgJC5tb2JpbGUuYWN0aXZlUGFnZUNsYXNzICk7XHJcblxyXG5cdFx0cmV0dXJuIHBhZ2U7XHJcblx0fSxcclxuXHJcblx0X2dldFdyYXBwZXI6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIHdyYXBwZXIgPSB0aGlzLl9wYWdlKCkuZmluZCggXCIuXCIgKyB0aGlzLm9wdGlvbnMuY2xhc3Nlcy5wYWdlV3JhcHBlciApO1xyXG5cdFx0aWYgKCB3cmFwcGVyLmxlbmd0aCA9PT0gMCApIHtcclxuXHRcdFx0d3JhcHBlciA9IHRoaXMuX3BhZ2UoKS5jaGlsZHJlbiggXCIudWktaGVhZGVyOm5vdCgudWktaGVhZGVyLWZpeGVkKSwgLnVpLWNvbnRlbnQ6bm90KC51aS1wb3B1cCksIC51aS1mb290ZXI6bm90KC51aS1mb290ZXItZml4ZWQpXCIgKVxyXG5cdFx0XHRcdC53cmFwQWxsKCBcIjxkaXYgY2xhc3M9J1wiICsgdGhpcy5vcHRpb25zLmNsYXNzZXMucGFnZVdyYXBwZXIgKyBcIic+PC9kaXY+XCIgKVxyXG5cdFx0XHRcdC5wYXJlbnQoKTtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLl93cmFwcGVyID0gd3JhcHBlcjtcclxuXHR9LFxyXG5cclxuXHRfZ2V0Rml4ZWRUb29sYmFyczogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgZXh0Rml4ZWRUb29sYmFycyA9ICQoIFwiYm9keVwiICkuY2hpbGRyZW4oIFwiLnVpLWhlYWRlci1maXhlZCwgLnVpLWZvb3Rlci1maXhlZFwiICksXHJcblx0XHRcdGludEZpeGVkVG9vbGJhcnMgPSB0aGlzLl9wYWdlKCkuZmluZCggXCIudWktaGVhZGVyLWZpeGVkLCAudWktZm9vdGVyLWZpeGVkXCIgKSxcclxuXHRcdFx0Zml4ZWRUb29sYmFycyA9IGV4dEZpeGVkVG9vbGJhcnMuYWRkKCBpbnRGaXhlZFRvb2xiYXJzICkuYWRkQ2xhc3MoIHRoaXMub3B0aW9ucy5jbGFzc2VzLnBhZ2VGaXhlZFRvb2xiYXIgKTtcclxuXHJcblx0XHRyZXR1cm4gZml4ZWRUb29sYmFycztcclxuXHR9LFxyXG5cclxuXHRfZ2V0UG9zRGlzcGxheUNsYXNzZXM6IGZ1bmN0aW9uKCBwcmVmaXggKSB7XHJcblx0XHRyZXR1cm4gcHJlZml4ICsgXCItcG9zaXRpb24tXCIgKyB0aGlzLm9wdGlvbnMucG9zaXRpb24gKyBcIiBcIiArIHByZWZpeCArIFwiLWRpc3BsYXktXCIgKyB0aGlzLm9wdGlvbnMuZGlzcGxheTtcclxuXHR9LFxyXG5cclxuXHRfZ2V0UGFuZWxDbGFzc2VzOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBwYW5lbENsYXNzZXMgPSB0aGlzLm9wdGlvbnMuY2xhc3Nlcy5wYW5lbCArXHJcblx0XHRcdFwiIFwiICsgdGhpcy5fZ2V0UG9zRGlzcGxheUNsYXNzZXMoIHRoaXMub3B0aW9ucy5jbGFzc2VzLnBhbmVsICkgK1xyXG5cdFx0XHRcIiBcIiArIHRoaXMub3B0aW9ucy5jbGFzc2VzLnBhbmVsQ2xvc2VkICtcclxuXHRcdFx0XCIgXCIgKyBcInVpLWJvZHktXCIgKyAoIHRoaXMub3B0aW9ucy50aGVtZSA/IHRoaXMub3B0aW9ucy50aGVtZSA6IFwiaW5oZXJpdFwiICk7XHJcblxyXG5cdFx0aWYgKCAhIXRoaXMub3B0aW9ucy5wb3NpdGlvbkZpeGVkICkge1xyXG5cdFx0XHRwYW5lbENsYXNzZXMgKz0gXCIgXCIgKyB0aGlzLm9wdGlvbnMuY2xhc3Nlcy5wYW5lbEZpeGVkO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiBwYW5lbENsYXNzZXM7XHJcblx0fSxcclxuXHJcblx0X2FkZFBhbmVsQ2xhc3NlczogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLmVsZW1lbnQuYWRkQ2xhc3MoIHRoaXMuX2dldFBhbmVsQ2xhc3NlcygpICk7XHJcblx0fSxcclxuXHJcblx0X2hhbmRsZUNsb3NlQ2xpY2s6IGZ1bmN0aW9uKCBldmVudCApIHtcclxuXHRcdGlmICggIWV2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpICkge1xyXG5cdFx0XHR0aGlzLmNsb3NlKCk7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X2JpbmRDbG9zZUV2ZW50czogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLl9vbiggdGhpcy5fY2xvc2VMaW5rLCB7XHJcblx0XHRcdFwiY2xpY2tcIjogXCJfaGFuZGxlQ2xvc2VDbGlja1wiXHJcblx0XHR9KTtcclxuXHJcblx0XHR0aGlzLl9vbih7XHJcblx0XHRcdFwiY2xpY2sgYTpqcW1EYXRhKGFqYXg9J2ZhbHNlJylcIjogXCJfaGFuZGxlQ2xvc2VDbGlja1wiXHJcblx0XHR9KTtcclxuXHR9LFxyXG5cclxuXHRfcG9zaXRpb25QYW5lbDogZnVuY3Rpb24oIHNjcm9sbFRvVG9wICkge1xyXG5cdFx0dmFyIHNlbGYgPSB0aGlzLFxyXG5cdFx0XHRwYW5lbElubmVySGVpZ2h0ID0gc2VsZi5fcGFuZWxJbm5lci5vdXRlckhlaWdodCgpLFxyXG5cdFx0XHRleHBhbmQgPSBwYW5lbElubmVySGVpZ2h0ID4gJC5tb2JpbGUuZ2V0U2NyZWVuSGVpZ2h0KCk7XHJcblxyXG5cdFx0aWYgKCBleHBhbmQgfHwgIXNlbGYub3B0aW9ucy5wb3NpdGlvbkZpeGVkICkge1xyXG5cdFx0XHRpZiAoIGV4cGFuZCApIHtcclxuXHRcdFx0XHRzZWxmLl91bmZpeFBhbmVsKCk7XHJcblx0XHRcdFx0JC5tb2JpbGUucmVzZXRBY3RpdmVQYWdlSGVpZ2h0KCBwYW5lbElubmVySGVpZ2h0ICk7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKCBzY3JvbGxUb1RvcCApIHtcclxuXHRcdFx0XHR0aGlzLndpbmRvd1sgMCBdLnNjcm9sbFRvKCAwLCAkLm1vYmlsZS5kZWZhdWx0SG9tZVNjcm9sbCApO1xyXG5cdFx0XHR9XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRzZWxmLl9maXhQYW5lbCgpO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9iaW5kRml4TGlzdGVuZXI6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5fb24oICQoIHdpbmRvdyApLCB7IFwidGhyb3R0bGVkcmVzaXplXCI6IFwiX3Bvc2l0aW9uUGFuZWxcIiB9KTtcclxuXHR9LFxyXG5cclxuXHRfdW5iaW5kRml4TGlzdGVuZXI6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5fb2ZmKCAkKCB3aW5kb3cgKSwgXCJ0aHJvdHRsZWRyZXNpemVcIiApO1xyXG5cdH0sXHJcblxyXG5cdF91bmZpeFBhbmVsOiBmdW5jdGlvbigpIHtcclxuXHRcdGlmICggISF0aGlzLm9wdGlvbnMucG9zaXRpb25GaXhlZCAmJiAkLnN1cHBvcnQuZml4ZWRQb3NpdGlvbiApIHtcclxuXHRcdFx0dGhpcy5lbGVtZW50LnJlbW92ZUNsYXNzKCB0aGlzLm9wdGlvbnMuY2xhc3Nlcy5wYW5lbEZpeGVkICk7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X2ZpeFBhbmVsOiBmdW5jdGlvbigpIHtcclxuXHRcdGlmICggISF0aGlzLm9wdGlvbnMucG9zaXRpb25GaXhlZCAmJiAkLnN1cHBvcnQuZml4ZWRQb3NpdGlvbiApIHtcclxuXHRcdFx0dGhpcy5lbGVtZW50LmFkZENsYXNzKCB0aGlzLm9wdGlvbnMuY2xhc3Nlcy5wYW5lbEZpeGVkICk7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X2JpbmRVcGRhdGVMYXlvdXQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIHNlbGYgPSB0aGlzO1xyXG5cclxuXHRcdHNlbGYuZWxlbWVudC5vbiggXCJ1cGRhdGVsYXlvdXRcIiwgZnVuY3Rpb24oLyogZSAqLykge1xyXG5cdFx0XHRpZiAoIHNlbGYuX29wZW4gKSB7XHJcblx0XHRcdFx0c2VsZi5fcG9zaXRpb25QYW5lbCgpO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHR9LFxyXG5cclxuXHRfYmluZExpbmtMaXN0ZW5lcnM6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5fb24oIFwiYm9keVwiLCB7XHJcblx0XHRcdFwiY2xpY2sgYVwiOiBcIl9oYW5kbGVDbGlja1wiXHJcblx0XHR9KTtcclxuXHJcblx0fSxcclxuXHJcblx0X2hhbmRsZUNsaWNrOiBmdW5jdGlvbiggZSApIHtcclxuXHRcdHZhciBsaW5rLFxyXG5cdFx0XHRwYW5lbElkID0gdGhpcy5lbGVtZW50LmF0dHIoIFwiaWRcIiApO1xyXG5cclxuXHRcdGlmICggZS5jdXJyZW50VGFyZ2V0LmhyZWYuc3BsaXQoIFwiI1wiIClbIDEgXSA9PT0gcGFuZWxJZCAmJiBwYW5lbElkICE9PSB1bmRlZmluZWQgKSB7XHJcblxyXG5cdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdGxpbmsgPSAkKCBlLnRhcmdldCApO1xyXG5cdFx0XHRpZiAoIGxpbmsuaGFzQ2xhc3MoIFwidWktYnRuXCIgKSApIHtcclxuXHRcdFx0XHRsaW5rLmFkZENsYXNzKCAkLm1vYmlsZS5hY3RpdmVCdG5DbGFzcyApO1xyXG5cdFx0XHRcdHRoaXMuZWxlbWVudC5vbmUoIFwicGFuZWxvcGVuIHBhbmVsY2xvc2VcIiwgZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHRsaW5rLnJlbW92ZUNsYXNzKCAkLm1vYmlsZS5hY3RpdmVCdG5DbGFzcyApO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblx0XHRcdHRoaXMudG9nZ2xlKCk7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X2JpbmRTd2lwZUV2ZW50czogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgc2VsZiA9IHRoaXMsXHJcblx0XHRcdGFyZWEgPSBzZWxmLl9tb2RhbCA/IHNlbGYuZWxlbWVudC5hZGQoIHNlbGYuX21vZGFsICkgOiBzZWxmLmVsZW1lbnQ7XHJcblxyXG5cdFx0Ly8gb24gc3dpcGUsIGNsb3NlIHRoZSBwYW5lbFxyXG5cdFx0aWYgKCAhIXNlbGYub3B0aW9ucy5zd2lwZUNsb3NlICkge1xyXG5cdFx0XHRpZiAoIHNlbGYub3B0aW9ucy5wb3NpdGlvbiA9PT0gXCJsZWZ0XCIgKSB7XHJcblx0XHRcdFx0YXJlYS5vbiggXCJzd2lwZWxlZnQucGFuZWxcIiwgZnVuY3Rpb24oLyogZSAqLykge1xyXG5cdFx0XHRcdFx0c2VsZi5jbG9zZSgpO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdGFyZWEub24oIFwic3dpcGVyaWdodC5wYW5lbFwiLCBmdW5jdGlvbigvKiBlICovKSB7XHJcblx0XHRcdFx0XHRzZWxmLmNsb3NlKCk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfYmluZFBhZ2VFdmVudHM6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIHNlbGYgPSB0aGlzO1xyXG5cclxuXHRcdHRoaXMuZG9jdW1lbnRcclxuXHRcdFx0Ly8gQ2xvc2UgdGhlIHBhbmVsIGlmIGFub3RoZXIgcGFuZWwgb24gdGhlIHBhZ2Ugb3BlbnNcclxuXHRcdFx0Lm9uKCBcInBhbmVsYmVmb3Jlb3BlblwiLCBmdW5jdGlvbiggZSApIHtcclxuXHRcdFx0XHRpZiAoIHNlbGYuX29wZW4gJiYgZS50YXJnZXQgIT09IHNlbGYuZWxlbWVudFsgMCBdICkge1xyXG5cdFx0XHRcdFx0c2VsZi5jbG9zZSgpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSlcclxuXHRcdFx0Ly8gT24gZXNjYXBlLCBjbG9zZT8gbWlnaHQgbmVlZCB0byBoYXZlIGEgdGFyZ2V0IGNoZWNrIHRvby4uLlxyXG5cdFx0XHQub24oIFwia2V5dXAucGFuZWxcIiwgZnVuY3Rpb24oIGUgKSB7XHJcblx0XHRcdFx0aWYgKCBlLmtleUNvZGUgPT09IDI3ICYmIHNlbGYuX29wZW4gKSB7XHJcblx0XHRcdFx0XHRzZWxmLmNsb3NlKCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHRcdGlmICggIXRoaXMuX3BhcmVudFBhZ2UgJiYgdGhpcy5vcHRpb25zLmRpc3BsYXkgIT09IFwib3ZlcmxheVwiICkge1xyXG5cdFx0XHR0aGlzLl9vbiggdGhpcy5kb2N1bWVudCwge1xyXG5cdFx0XHRcdFwicGFnZXNob3dcIjogZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHR0aGlzLl9vcGVuZWRQYWdlID0gbnVsbDtcclxuXHRcdFx0XHRcdHRoaXMuX2dldFdyYXBwZXIoKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cdFx0Ly8gQ2xlYW4gdXAgb3BlbiBwYW5lbHMgYWZ0ZXIgcGFnZSBoaWRlXHJcblx0XHRpZiAoIHNlbGYuX3BhcmVudFBhZ2UgKSB7XHJcblx0XHRcdHRoaXMuZG9jdW1lbnQub24oIFwicGFnZWhpZGVcIiwgXCI6anFtRGF0YShyb2xlPSdwYWdlJylcIiwgZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0aWYgKCBzZWxmLl9vcGVuICkge1xyXG5cdFx0XHRcdFx0c2VsZi5jbG9zZSggdHJ1ZSApO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHR0aGlzLmRvY3VtZW50Lm9uKCBcInBhZ2ViZWZvcmVoaWRlXCIsIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdGlmICggc2VsZi5fb3BlbiApIHtcclxuXHRcdFx0XHRcdHNlbGYuY2xvc2UoIHRydWUgKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdC8vIHN0YXRlIHN0b3JhZ2Ugb2Ygb3BlbiBvciBjbG9zZWRcclxuXHRfb3BlbjogZmFsc2UsXHJcblx0X3BhZ2VDb250ZW50T3BlbkNsYXNzZXM6IG51bGwsXHJcblx0X21vZGFsT3BlbkNsYXNzZXM6IG51bGwsXHJcblxyXG5cdG9wZW46IGZ1bmN0aW9uKCBpbW1lZGlhdGUgKSB7XHJcblx0XHRpZiAoICF0aGlzLl9vcGVuICkge1xyXG5cdFx0XHR2YXIgc2VsZiA9IHRoaXMsXHJcblx0XHRcdFx0byA9IHNlbGYub3B0aW9ucyxcclxuXHJcblx0XHRcdFx0X29wZW5QYW5lbCA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0c2VsZi5fb2ZmKCBzZWxmLmRvY3VtZW50ICwgXCJwYW5lbGNsb3NlXCIgKTtcclxuXHRcdFx0XHRcdHNlbGYuX3BhZ2UoKS5qcW1EYXRhKCBcInBhbmVsXCIsIFwib3BlblwiICk7XHJcblxyXG5cdFx0XHRcdFx0aWYgKCAkLnN1cHBvcnQuY3NzVHJhbnNmb3JtM2QgJiYgISFvLmFuaW1hdGUgJiYgby5kaXNwbGF5ICE9PSBcIm92ZXJsYXlcIiApIHtcclxuXHRcdFx0XHRcdFx0c2VsZi5fd3JhcHBlci5hZGRDbGFzcyggby5jbGFzc2VzLmFuaW1hdGUgKTtcclxuXHRcdFx0XHRcdFx0c2VsZi5fZml4ZWRUb29sYmFycygpLmFkZENsYXNzKCBvLmNsYXNzZXMuYW5pbWF0ZSApO1xyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdGlmICggIWltbWVkaWF0ZSAmJiAkLnN1cHBvcnQuY3NzVHJhbnNmb3JtM2QgJiYgISFvLmFuaW1hdGUgKSB7XHJcblx0XHRcdFx0XHRcdCggc2VsZi5fd3JhcHBlciB8fCBzZWxmLmVsZW1lbnQgKVxyXG5cdFx0XHRcdFx0XHRcdC5hbmltYXRpb25Db21wbGV0ZSggY29tcGxldGUsIFwidHJhbnNpdGlvblwiICk7XHJcblx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRzZXRUaW1lb3V0KCBjb21wbGV0ZSwgMCApO1xyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdGlmICggby50aGVtZSAmJiBvLmRpc3BsYXkgIT09IFwib3ZlcmxheVwiICkge1xyXG5cdFx0XHRcdFx0XHRzZWxmLl9wYWdlKCkucGFyZW50KClcclxuXHRcdFx0XHRcdFx0XHQuYWRkQ2xhc3MoIG8uY2xhc3Nlcy5wYWdlQ29udGFpbmVyICsgXCItdGhlbWVkIFwiICsgby5jbGFzc2VzLnBhZ2VDb250YWluZXIgKyBcIi1cIiArIG8udGhlbWUgKTtcclxuXHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHRzZWxmLmVsZW1lbnRcclxuXHRcdFx0XHRcdFx0LnJlbW92ZUNsYXNzKCBvLmNsYXNzZXMucGFuZWxDbG9zZWQgKVxyXG5cdFx0XHRcdFx0XHQuYWRkQ2xhc3MoIG8uY2xhc3Nlcy5wYW5lbE9wZW4gKTtcclxuXHJcblx0XHRcdFx0XHRzZWxmLl9wb3NpdGlvblBhbmVsKCB0cnVlICk7XHJcblxyXG5cdFx0XHRcdFx0c2VsZi5fcGFnZUNvbnRlbnRPcGVuQ2xhc3NlcyA9IHNlbGYuX2dldFBvc0Rpc3BsYXlDbGFzc2VzKCBvLmNsYXNzZXMucGFnZUNvbnRlbnRQcmVmaXggKTtcclxuXHJcblx0XHRcdFx0XHRpZiAoIG8uZGlzcGxheSAhPT0gXCJvdmVybGF5XCIgKSB7XHJcblx0XHRcdFx0XHRcdHNlbGYuX3BhZ2UoKS5wYXJlbnQoKS5hZGRDbGFzcyggby5jbGFzc2VzLnBhZ2VDb250YWluZXIgKTtcclxuXHRcdFx0XHRcdFx0c2VsZi5fd3JhcHBlci5hZGRDbGFzcyggc2VsZi5fcGFnZUNvbnRlbnRPcGVuQ2xhc3NlcyApO1xyXG5cdFx0XHRcdFx0XHRzZWxmLl9maXhlZFRvb2xiYXJzKCkuYWRkQ2xhc3MoIHNlbGYuX3BhZ2VDb250ZW50T3BlbkNsYXNzZXMgKTtcclxuXHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHRzZWxmLl9tb2RhbE9wZW5DbGFzc2VzID0gc2VsZi5fZ2V0UG9zRGlzcGxheUNsYXNzZXMoIG8uY2xhc3Nlcy5tb2RhbCApICsgXCIgXCIgKyBvLmNsYXNzZXMubW9kYWxPcGVuO1xyXG5cdFx0XHRcdFx0aWYgKCBzZWxmLl9tb2RhbCApIHtcclxuXHRcdFx0XHRcdFx0c2VsZi5fbW9kYWxcclxuXHRcdFx0XHRcdFx0XHQuYWRkQ2xhc3MoIHNlbGYuX21vZGFsT3BlbkNsYXNzZXMgKVxyXG5cdFx0XHRcdFx0XHRcdC5oZWlnaHQoIE1hdGgubWF4KCBzZWxmLl9tb2RhbC5oZWlnaHQoKSwgc2VsZi5kb2N1bWVudC5oZWlnaHQoKSApICk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSxcclxuXHRcdFx0XHRjb21wbGV0ZSA9IGZ1bmN0aW9uKCkge1xyXG5cclxuXHRcdFx0XHRcdC8vIEJhaWwgaWYgdGhlIHBhbmVsIHdhcyBjbG9zZWQgYmVmb3JlIHRoZSBvcGVuaW5nIGFuaW1hdGlvbiBoYXMgY29tcGxldGVkXHJcblx0XHRcdFx0XHRpZiAoICFzZWxmLl9vcGVuICkge1xyXG5cdFx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0aWYgKCBvLmRpc3BsYXkgIT09IFwib3ZlcmxheVwiICkge1xyXG5cdFx0XHRcdFx0XHRzZWxmLl93cmFwcGVyLmFkZENsYXNzKCBvLmNsYXNzZXMucGFnZUNvbnRlbnRQcmVmaXggKyBcIi1vcGVuXCIgKTtcclxuXHRcdFx0XHRcdFx0c2VsZi5fZml4ZWRUb29sYmFycygpLmFkZENsYXNzKCBvLmNsYXNzZXMucGFnZUNvbnRlbnRQcmVmaXggKyBcIi1vcGVuXCIgKTtcclxuXHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHRzZWxmLl9iaW5kRml4TGlzdGVuZXIoKTtcclxuXHJcblx0XHRcdFx0XHRzZWxmLl90cmlnZ2VyKCBcIm9wZW5cIiApO1xyXG5cclxuXHRcdFx0XHRcdHNlbGYuX29wZW5lZFBhZ2UgPSBzZWxmLl9wYWdlKCk7XHJcblx0XHRcdFx0fTtcclxuXHJcblx0XHRcdHNlbGYuX3RyaWdnZXIoIFwiYmVmb3Jlb3BlblwiICk7XHJcblxyXG5cdFx0XHRpZiAoIHNlbGYuX3BhZ2UoKS5qcW1EYXRhKCBcInBhbmVsXCIgKSA9PT0gXCJvcGVuXCIgKSB7XHJcblx0XHRcdFx0c2VsZi5fb24oIHNlbGYuZG9jdW1lbnQsIHtcclxuXHRcdFx0XHRcdFwicGFuZWxjbG9zZVwiOiBfb3BlblBhbmVsXHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0X29wZW5QYW5lbCgpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRzZWxmLl9vcGVuID0gdHJ1ZTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRjbG9zZTogZnVuY3Rpb24oIGltbWVkaWF0ZSApIHtcclxuXHRcdGlmICggdGhpcy5fb3BlbiApIHtcclxuXHRcdFx0dmFyIHNlbGYgPSB0aGlzLFxyXG5cdFx0XHRcdG8gPSB0aGlzLm9wdGlvbnMsXHJcblxyXG5cdFx0XHRcdF9jbG9zZVBhbmVsID0gZnVuY3Rpb24oKSB7XHJcblxyXG5cdFx0XHRcdFx0c2VsZi5lbGVtZW50LnJlbW92ZUNsYXNzKCBvLmNsYXNzZXMucGFuZWxPcGVuICk7XHJcblxyXG5cdFx0XHRcdFx0aWYgKCBvLmRpc3BsYXkgIT09IFwib3ZlcmxheVwiICkge1xyXG5cdFx0XHRcdFx0XHRzZWxmLl93cmFwcGVyLnJlbW92ZUNsYXNzKCBzZWxmLl9wYWdlQ29udGVudE9wZW5DbGFzc2VzICk7XHJcblx0XHRcdFx0XHRcdHNlbGYuX2ZpeGVkVG9vbGJhcnMoKS5yZW1vdmVDbGFzcyggc2VsZi5fcGFnZUNvbnRlbnRPcGVuQ2xhc3NlcyApO1xyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdGlmICggIWltbWVkaWF0ZSAmJiAkLnN1cHBvcnQuY3NzVHJhbnNmb3JtM2QgJiYgISFvLmFuaW1hdGUgKSB7XHJcblx0XHRcdFx0XHRcdCggc2VsZi5fd3JhcHBlciB8fCBzZWxmLmVsZW1lbnQgKVxyXG5cdFx0XHRcdFx0XHRcdC5hbmltYXRpb25Db21wbGV0ZSggY29tcGxldGUsIFwidHJhbnNpdGlvblwiICk7XHJcblx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRzZXRUaW1lb3V0KCBjb21wbGV0ZSwgMCApO1xyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdGlmICggc2VsZi5fbW9kYWwgKSB7XHJcblx0XHRcdFx0XHRcdHNlbGYuX21vZGFsXHJcblx0XHRcdFx0XHRcdFx0LnJlbW92ZUNsYXNzKCBzZWxmLl9tb2RhbE9wZW5DbGFzc2VzIClcclxuXHRcdFx0XHRcdFx0XHQuaGVpZ2h0KCBcIlwiICk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSxcclxuXHRcdFx0XHRjb21wbGV0ZSA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0aWYgKCBvLnRoZW1lICYmIG8uZGlzcGxheSAhPT0gXCJvdmVybGF5XCIgKSB7XHJcblx0XHRcdFx0XHRcdHNlbGYuX3BhZ2UoKS5wYXJlbnQoKS5yZW1vdmVDbGFzcyggby5jbGFzc2VzLnBhZ2VDb250YWluZXIgKyBcIi10aGVtZWQgXCIgKyBvLmNsYXNzZXMucGFnZUNvbnRhaW5lciArIFwiLVwiICsgby50aGVtZSApO1xyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdHNlbGYuZWxlbWVudC5hZGRDbGFzcyggby5jbGFzc2VzLnBhbmVsQ2xvc2VkICk7XHJcblxyXG5cdFx0XHRcdFx0aWYgKCBvLmRpc3BsYXkgIT09IFwib3ZlcmxheVwiICkge1xyXG5cdFx0XHRcdFx0XHRzZWxmLl9wYWdlKCkucGFyZW50KCkucmVtb3ZlQ2xhc3MoIG8uY2xhc3Nlcy5wYWdlQ29udGFpbmVyICk7XHJcblx0XHRcdFx0XHRcdHNlbGYuX3dyYXBwZXIucmVtb3ZlQ2xhc3MoIG8uY2xhc3Nlcy5wYWdlQ29udGVudFByZWZpeCArIFwiLW9wZW5cIiApO1xyXG5cdFx0XHRcdFx0XHRzZWxmLl9maXhlZFRvb2xiYXJzKCkucmVtb3ZlQ2xhc3MoIG8uY2xhc3Nlcy5wYWdlQ29udGVudFByZWZpeCArIFwiLW9wZW5cIiApO1xyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdGlmICggJC5zdXBwb3J0LmNzc1RyYW5zZm9ybTNkICYmICEhby5hbmltYXRlICYmIG8uZGlzcGxheSAhPT0gXCJvdmVybGF5XCIgKSB7XHJcblx0XHRcdFx0XHRcdHNlbGYuX3dyYXBwZXIucmVtb3ZlQ2xhc3MoIG8uY2xhc3Nlcy5hbmltYXRlICk7XHJcblx0XHRcdFx0XHRcdHNlbGYuX2ZpeGVkVG9vbGJhcnMoKS5yZW1vdmVDbGFzcyggby5jbGFzc2VzLmFuaW1hdGUgKTtcclxuXHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHRzZWxmLl9maXhQYW5lbCgpO1xyXG5cdFx0XHRcdFx0c2VsZi5fdW5iaW5kRml4TGlzdGVuZXIoKTtcclxuXHRcdFx0XHRcdCQubW9iaWxlLnJlc2V0QWN0aXZlUGFnZUhlaWdodCgpO1xyXG5cclxuXHRcdFx0XHRcdHNlbGYuX3BhZ2UoKS5qcW1SZW1vdmVEYXRhKCBcInBhbmVsXCIgKTtcclxuXHJcblx0XHRcdFx0XHRzZWxmLl90cmlnZ2VyKCBcImNsb3NlXCIgKTtcclxuXHJcblx0XHRcdFx0XHRzZWxmLl9vcGVuZWRQYWdlID0gbnVsbDtcclxuXHRcdFx0XHR9O1xyXG5cclxuXHRcdFx0c2VsZi5fdHJpZ2dlciggXCJiZWZvcmVjbG9zZVwiICk7XHJcblxyXG5cdFx0XHRfY2xvc2VQYW5lbCgpO1xyXG5cclxuXHRcdFx0c2VsZi5fb3BlbiA9IGZhbHNlO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdHRvZ2dsZTogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzWyB0aGlzLl9vcGVuID8gXCJjbG9zZVwiIDogXCJvcGVuXCIgXSgpO1xyXG5cdH0sXHJcblxyXG5cdF9kZXN0cm95OiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBvdGhlclBhbmVscyxcclxuXHRcdG8gPSB0aGlzLm9wdGlvbnMsXHJcblx0XHRtdWx0aXBsZVBhbmVscyA9ICggJCggXCJib2R5ID4gOm1vYmlsZS1wYW5lbFwiICkubGVuZ3RoICsgJC5tb2JpbGUuYWN0aXZlUGFnZS5maW5kKCBcIjptb2JpbGUtcGFuZWxcIiApLmxlbmd0aCApID4gMTtcclxuXHJcblx0XHRpZiAoIG8uZGlzcGxheSAhPT0gXCJvdmVybGF5XCIgKSB7XHJcblxyXG5cdFx0XHQvLyAgcmVtb3ZlIHRoZSB3cmFwcGVyIGlmIG5vdCBpbiB1c2UgYnkgYW5vdGhlciBwYW5lbFxyXG5cdFx0XHRvdGhlclBhbmVscyA9ICQoIFwiYm9keSA+IDptb2JpbGUtcGFuZWxcIiApLmFkZCggJC5tb2JpbGUuYWN0aXZlUGFnZS5maW5kKCBcIjptb2JpbGUtcGFuZWxcIiApICk7XHJcblx0XHRcdGlmICggb3RoZXJQYW5lbHMubm90KCBcIi51aS1wYW5lbC1kaXNwbGF5LW92ZXJsYXlcIiApLm5vdCggdGhpcy5lbGVtZW50ICkubGVuZ3RoID09PSAwICkge1xyXG5cdFx0XHRcdHRoaXMuX3dyYXBwZXIuY2hpbGRyZW4oKS51bndyYXAoKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aWYgKCB0aGlzLl9vcGVuICkge1xyXG5cclxuXHRcdFx0XHR0aGlzLl9maXhlZFRvb2xiYXJzKCkucmVtb3ZlQ2xhc3MoIG8uY2xhc3Nlcy5wYWdlQ29udGVudFByZWZpeCArIFwiLW9wZW5cIiApO1xyXG5cclxuXHRcdFx0XHRpZiAoICQuc3VwcG9ydC5jc3NUcmFuc2Zvcm0zZCAmJiAhIW8uYW5pbWF0ZSApIHtcclxuXHRcdFx0XHRcdHRoaXMuX2ZpeGVkVG9vbGJhcnMoKS5yZW1vdmVDbGFzcyggby5jbGFzc2VzLmFuaW1hdGUgKTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdHRoaXMuX3BhZ2UoKS5wYXJlbnQoKS5yZW1vdmVDbGFzcyggby5jbGFzc2VzLnBhZ2VDb250YWluZXIgKTtcclxuXHJcblx0XHRcdFx0aWYgKCBvLnRoZW1lICkge1xyXG5cdFx0XHRcdFx0dGhpcy5fcGFnZSgpLnBhcmVudCgpLnJlbW92ZUNsYXNzKCBvLmNsYXNzZXMucGFnZUNvbnRhaW5lciArIFwiLXRoZW1lZCBcIiArIG8uY2xhc3Nlcy5wYWdlQ29udGFpbmVyICsgXCItXCIgKyBvLnRoZW1lICk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCAhbXVsdGlwbGVQYW5lbHMgKSB7XHJcblxyXG5cdFx0XHR0aGlzLmRvY3VtZW50Lm9mZiggXCJwYW5lbG9wZW4gcGFuZWxjbG9zZVwiICk7XHJcblxyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggdGhpcy5fb3BlbiApIHtcclxuXHRcdFx0dGhpcy5fcGFnZSgpLmpxbVJlbW92ZURhdGEoIFwicGFuZWxcIiApO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuX3BhbmVsSW5uZXIuY2hpbGRyZW4oKS51bndyYXAoKTtcclxuXHJcblx0XHR0aGlzLmVsZW1lbnRcclxuXHRcdFx0LnJlbW92ZUNsYXNzKCBbIHRoaXMuX2dldFBhbmVsQ2xhc3NlcygpLCBvLmNsYXNzZXMucGFuZWxPcGVuLCBvLmNsYXNzZXMuYW5pbWF0ZSBdLmpvaW4oIFwiIFwiICkgKVxyXG5cdFx0XHQub2ZmKCBcInN3aXBlbGVmdC5wYW5lbCBzd2lwZXJpZ2h0LnBhbmVsXCIgKVxyXG5cdFx0XHQub2ZmKCBcInBhbmVsYmVmb3Jlb3BlblwiIClcclxuXHRcdFx0Lm9mZiggXCJwYW5lbGhpZGVcIiApXHJcblx0XHRcdC5vZmYoIFwia2V5dXAucGFuZWxcIiApXHJcblx0XHRcdC5vZmYoIFwidXBkYXRlbGF5b3V0XCIgKTtcclxuXHJcblx0XHRpZiAoIHRoaXMuX21vZGFsICkge1xyXG5cdFx0XHR0aGlzLl9tb2RhbC5yZW1vdmUoKTtcclxuXHRcdH1cclxuXHR9XHJcbn0pO1xyXG5cclxufSkoIGpRdWVyeSApO1xyXG5cclxuKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7XHJcblxyXG4kLndpZGdldCggXCJtb2JpbGUudGFibGVcIiwge1xyXG5cdG9wdGlvbnM6IHtcclxuXHRcdGNsYXNzZXM6IHtcclxuXHRcdFx0dGFibGU6IFwidWktdGFibGVcIlxyXG5cdFx0fSxcclxuXHRcdGVuaGFuY2VkOiBmYWxzZVxyXG5cdH0sXHJcblxyXG5cdF9jcmVhdGU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0aWYgKCAhdGhpcy5vcHRpb25zLmVuaGFuY2VkICkge1xyXG5cdFx0XHR0aGlzLmVsZW1lbnQuYWRkQ2xhc3MoIHRoaXMub3B0aW9ucy5jbGFzc2VzLnRhYmxlICk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gZXh0ZW5kIGhlcmUsIGFzc2lnbiBvbiByZWZyZXNoID4gX3NldEhlYWRlcnNcclxuXHRcdCQuZXh0ZW5kKCB0aGlzLCB7XHJcblxyXG5cdFx0XHQvLyBFeHBvc2UgaGVhZGVycyBhbmQgYWxsSGVhZGVycyBwcm9wZXJ0aWVzIG9uIHRoZSB3aWRnZXRcclxuXHRcdFx0Ly8gaGVhZGVycyByZWZlcmVuY2VzIHRoZSBUSHMgd2l0aGluIHRoZSBmaXJzdCBUUiBpbiB0aGUgdGFibGVcclxuXHRcdFx0aGVhZGVyczogdW5kZWZpbmVkLFxyXG5cclxuXHRcdFx0Ly8gYWxsSGVhZGVycyByZWZlcmVuY2VzIGhlYWRlcnMsIHBsdXMgYWxsIFRIcyBpbiB0aGUgdGhlYWQsIHdoaWNoIG1heVxyXG5cdFx0XHQvLyBpbmNsdWRlIHNldmVyYWwgcm93cywgb3Igbm90XHJcblx0XHRcdGFsbEhlYWRlcnM6IHVuZGVmaW5lZFxyXG5cdFx0fSk7XHJcblxyXG5cdFx0dGhpcy5fcmVmcmVzaCggdHJ1ZSApO1xyXG5cdH0sXHJcblxyXG5cdF9zZXRIZWFkZXJzOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciB0cnMgPSB0aGlzLmVsZW1lbnQuZmluZCggXCJ0aGVhZCB0clwiICk7XHJcblxyXG5cdFx0dGhpcy5oZWFkZXJzID0gdGhpcy5lbGVtZW50LmZpbmQoIFwidHI6ZXEoMClcIiApLmNoaWxkcmVuKCk7XHJcblx0XHR0aGlzLmFsbEhlYWRlcnMgPSB0aGlzLmhlYWRlcnMuYWRkKCB0cnMuY2hpbGRyZW4oKSApO1xyXG5cdH0sXHJcblxyXG5cdHJlZnJlc2g6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5fcmVmcmVzaCgpO1xyXG5cdH0sXHJcblxyXG5cdHJlYnVpbGQ6ICQubm9vcCxcclxuXHJcblx0X3JlZnJlc2g6IGZ1bmN0aW9uKCAvKiBjcmVhdGUgKi8gKSB7XHJcblx0XHR2YXIgdGFibGUgPSB0aGlzLmVsZW1lbnQsXHJcblx0XHRcdHRycyA9IHRhYmxlLmZpbmQoIFwidGhlYWQgdHJcIiApO1xyXG5cclxuXHRcdC8vIHVwZGF0aW5nIGhlYWRlcnMgb24gcmVmcmVzaCAoZml4ZXMgIzU4ODApXHJcblx0XHR0aGlzLl9zZXRIZWFkZXJzKCk7XHJcblxyXG5cdFx0Ly8gSXRlcmF0ZSBvdmVyIHRoZSB0cnNcclxuXHRcdHRycy5lYWNoKCBmdW5jdGlvbigpIHtcclxuXHRcdFx0dmFyIGNvbHVtbkNvdW50ID0gMDtcclxuXHJcblx0XHRcdC8vIEl0ZXJhdGUgb3ZlciB0aGUgY2hpbGRyZW4gb2YgdGhlIHRyXHJcblx0XHRcdCQoIHRoaXMgKS5jaGlsZHJlbigpLmVhY2goIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHZhciBzcGFuID0gcGFyc2VJbnQoIHRoaXMuZ2V0QXR0cmlidXRlKCBcImNvbHNwYW5cIiApLCAxMCApLFxyXG5cdFx0XHRcdFx0c2VsZWN0b3IgPSBcIjpudGgtY2hpbGQoXCIgKyAoIGNvbHVtbkNvdW50ICsgMSApICsgXCIpXCIsXHJcblx0XHRcdFx0XHRqO1xyXG5cclxuXHRcdFx0XHR0aGlzLnNldEF0dHJpYnV0ZSggXCJkYXRhLVwiICsgJC5tb2JpbGUubnMgKyBcImNvbHN0YXJ0XCIsIGNvbHVtbkNvdW50ICsgMSApO1xyXG5cclxuXHRcdFx0XHRpZiAoIHNwYW4gKSB7XHJcblx0XHRcdFx0XHRmb3IoIGogPSAwOyBqIDwgc3BhbiAtIDE7IGorKyApIHtcclxuXHRcdFx0XHRcdFx0Y29sdW1uQ291bnQrKztcclxuXHRcdFx0XHRcdFx0c2VsZWN0b3IgKz0gXCIsIDpudGgtY2hpbGQoXCIgKyAoIGNvbHVtbkNvdW50ICsgMSApICsgXCIpXCI7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHQvLyBTdG9yZSBcImNlbGxzXCIgZGF0YSBvbiBoZWFkZXIgYXMgYSByZWZlcmVuY2UgdG8gYWxsIGNlbGxzIGluIHRoZVxyXG5cdFx0XHRcdC8vIHNhbWUgY29sdW1uIGFzIHRoaXMgVEhcclxuXHRcdFx0XHQkKCB0aGlzICkuanFtRGF0YSggXCJjZWxsc1wiLCB0YWJsZS5maW5kKCBcInRyXCIgKS5ub3QoIHRycy5lcSggMCApICkubm90KCB0aGlzICkuY2hpbGRyZW4oIHNlbGVjdG9yICkgKTtcclxuXHJcblx0XHRcdFx0Y29sdW1uQ291bnQrKztcclxuXHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHR9XHJcbn0pO1xyXG5cclxufSkoIGpRdWVyeSApO1xyXG5cclxuXHJcbihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xyXG5cclxuJC53aWRnZXQoIFwibW9iaWxlLnRhYmxlXCIsICQubW9iaWxlLnRhYmxlLCB7XHJcblx0b3B0aW9uczoge1xyXG5cdFx0bW9kZTogXCJjb2x1bW50b2dnbGVcIixcclxuXHRcdGNvbHVtbkJ0blRoZW1lOiBudWxsLFxyXG5cdFx0Y29sdW1uUG9wdXBUaGVtZTogbnVsbCxcclxuXHRcdGNvbHVtbkJ0blRleHQ6IFwiQ29sdW1ucy4uLlwiLFxyXG5cdFx0Y2xhc3NlczogJC5leHRlbmQoICQubW9iaWxlLnRhYmxlLnByb3RvdHlwZS5vcHRpb25zLmNsYXNzZXMsIHtcclxuXHRcdFx0cG9wdXA6IFwidWktdGFibGUtY29sdW1udG9nZ2xlLXBvcHVwXCIsXHJcblx0XHRcdGNvbHVtbkJ0bjogXCJ1aS10YWJsZS1jb2x1bW50b2dnbGUtYnRuXCIsXHJcblx0XHRcdHByaW9yaXR5UHJlZml4OiBcInVpLXRhYmxlLXByaW9yaXR5LVwiLFxyXG5cdFx0XHRjb2x1bW5Ub2dnbGVUYWJsZTogXCJ1aS10YWJsZS1jb2x1bW50b2dnbGVcIlxyXG5cdFx0fSlcclxuXHR9LFxyXG5cclxuXHRfY3JlYXRlOiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuX3N1cGVyKCk7XHJcblxyXG5cdFx0aWYgKCB0aGlzLm9wdGlvbnMubW9kZSAhPT0gXCJjb2x1bW50b2dnbGVcIiApIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdCQuZXh0ZW5kKCB0aGlzLCB7XHJcblx0XHRcdF9tZW51OiBudWxsXHJcblx0XHR9KTtcclxuXHJcblx0XHRpZiAoIHRoaXMub3B0aW9ucy5lbmhhbmNlZCApIHtcclxuXHRcdFx0dGhpcy5fbWVudSA9ICQoIHRoaXMuZG9jdW1lbnRbIDAgXS5nZXRFbGVtZW50QnlJZCggdGhpcy5faWQoKSArIFwiLXBvcHVwXCIgKSApLmNoaWxkcmVuKCkuZmlyc3QoKTtcclxuXHRcdFx0dGhpcy5fYWRkVG9nZ2xlcyggdGhpcy5fbWVudSwgdHJ1ZSApO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0dGhpcy5fbWVudSA9IHRoaXMuX2VuaGFuY2VDb2xUb2dnbGUoKTtcclxuXHRcdFx0dGhpcy5lbGVtZW50LmFkZENsYXNzKCB0aGlzLm9wdGlvbnMuY2xhc3Nlcy5jb2x1bW5Ub2dnbGVUYWJsZSApO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuX3NldHVwRXZlbnRzKCk7XHJcblxyXG5cdFx0dGhpcy5fc2V0VG9nZ2xlU3RhdGUoKTtcclxuXHR9LFxyXG5cclxuXHRfaWQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0cmV0dXJuICggdGhpcy5lbGVtZW50LmF0dHIoIFwiaWRcIiApIHx8ICggdGhpcy53aWRnZXROYW1lICsgdGhpcy51dWlkICkgKTtcclxuXHR9LFxyXG5cclxuXHRfc2V0dXBFdmVudHM6IGZ1bmN0aW9uKCkge1xyXG5cdFx0Ly9OT1RFOiBpbnB1dHMgYXJlIGJvdW5kIGluIGJpbmRUb2dnbGVzLFxyXG5cdFx0Ly8gc28gaXQgY2FuIGJlIGNhbGxlZCBvbiByZWZyZXNoLCB0b29cclxuXHJcblx0XHQvLyB1cGRhdGUgY29sdW1uIHRvZ2dsZXMgb24gcmVzaXplXHJcblx0XHR0aGlzLl9vbiggdGhpcy53aW5kb3csIHtcclxuXHRcdFx0dGhyb3R0bGVkcmVzaXplOiBcIl9zZXRUb2dnbGVTdGF0ZVwiXHJcblx0XHR9KTtcclxuXHRcdHRoaXMuX29uKCB0aGlzLl9tZW51LCB7XHJcblx0XHRcdFwiY2hhbmdlIGlucHV0XCI6IFwiX21lbnVJbnB1dENoYW5nZVwiXHJcblx0XHR9KTtcclxuXHR9LFxyXG5cclxuXHRfYWRkVG9nZ2xlczogZnVuY3Rpb24oIG1lbnUsIGtlZXAgKSB7XHJcblx0XHR2YXIgaW5wdXRzLFxyXG5cdFx0XHRjaGVja2JveEluZGV4ID0gMCxcclxuXHRcdFx0b3B0cyA9IHRoaXMub3B0aW9ucyxcclxuXHRcdFx0Y29udGFpbmVyID0gbWVudS5jb250cm9sZ3JvdXAoIFwiY29udGFpbmVyXCIgKTtcclxuXHJcblx0XHQvLyBhbGxvdyB1cGRhdGUgb2YgbWVudSBvbiByZWZyZXNoIChmaXhlcyAjNTg4MClcclxuXHRcdGlmICgga2VlcCApIHtcclxuXHRcdFx0aW5wdXRzID0gbWVudS5maW5kKCBcImlucHV0XCIgKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdGNvbnRhaW5lci5lbXB0eSgpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIGNyZWF0ZSB0aGUgaGlkZS9zaG93IHRvZ2dsZXNcclxuXHRcdHRoaXMuaGVhZGVycy5ub3QoIFwidGRcIiApLmVhY2goIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR2YXIgaW5wdXQsIGNlbGxzLFxyXG5cdFx0XHRcdGhlYWRlciA9ICQoIHRoaXMgKSxcclxuXHRcdFx0XHRwcmlvcml0eSA9ICQubW9iaWxlLmdldEF0dHJpYnV0ZSggdGhpcywgXCJwcmlvcml0eVwiICk7XHJcblxyXG5cdFx0XHRpZiAoIHByaW9yaXR5ICkge1xyXG5cdFx0XHRcdGNlbGxzID0gaGVhZGVyLmFkZCggaGVhZGVyLmpxbURhdGEoIFwiY2VsbHNcIiApICk7XHJcblx0XHRcdFx0Y2VsbHMuYWRkQ2xhc3MoIG9wdHMuY2xhc3Nlcy5wcmlvcml0eVByZWZpeCArIHByaW9yaXR5ICk7XHJcblxyXG5cdFx0XHRcdC8vIE1ha2Ugc3VyZSB0aGUgKG5ldz8pIGNoZWNrYm94IGlzIGFzc29jaWF0ZWQgd2l0aCBpdHMgaGVhZGVyIHZpYSAuanFtRGF0YSgpIGFuZFxyXG5cdFx0XHRcdC8vIHRoYXQsIHZpY2UgdmVyc2EsIHRoZSBoZWFkZXIgaXMgYWxzbyBhc3NvY2lhdGVkIHdpdGggdGhlIGNoZWNrYm94XHJcblx0XHRcdFx0aW5wdXQgPSAoIGtlZXAgPyBpbnB1dHMuZXEoIGNoZWNrYm94SW5kZXgrKyApIDpcclxuXHRcdFx0XHRcdCQoXCI8bGFiZWw+PGlucHV0IHR5cGU9J2NoZWNrYm94JyBjaGVja2VkIC8+XCIgK1xyXG5cdFx0XHRcdFx0XHQoIGhlYWRlci5jaGlsZHJlbiggXCJhYmJyXCIgKS5maXJzdCgpLmF0dHIoIFwidGl0bGVcIiApIHx8XHJcblx0XHRcdFx0XHRcdFx0aGVhZGVyLnRleHQoKSApICtcclxuXHRcdFx0XHRcdFx0XCI8L2xhYmVsPlwiIClcclxuXHRcdFx0XHRcdFx0LmFwcGVuZFRvKCBjb250YWluZXIgKVxyXG5cdFx0XHRcdFx0XHQuY2hpbGRyZW4oIDAgKVxyXG5cdFx0XHRcdFx0XHQuY2hlY2tib3hyYWRpbygge1xyXG5cdFx0XHRcdFx0XHRcdHRoZW1lOiBvcHRzLmNvbHVtblBvcHVwVGhlbWVcclxuXHRcdFx0XHRcdFx0fSkgKVxyXG5cclxuXHRcdFx0XHRcdFx0Ly8gQXNzb2NpYXRlIHRoZSBoZWFkZXIgd2l0aCB0aGUgY2hlY2tib3hcclxuXHRcdFx0XHRcdFx0LmpxbURhdGEoIFwiaGVhZGVyXCIsIGhlYWRlciApXHJcblx0XHRcdFx0XHRcdC5qcW1EYXRhKCBcImNlbGxzXCIsIGNlbGxzICk7XHJcblxyXG5cdFx0XHRcdC8vIEFzc29jaWF0ZSB0aGUgY2hlY2tib3ggd2l0aCB0aGUgaGVhZGVyXHJcblx0XHRcdFx0aGVhZGVyLmpxbURhdGEoIFwiaW5wdXRcIiwgaW5wdXQgKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gc2V0IGJpbmRpbmdzIGhlcmVcclxuXHRcdGlmICggIWtlZXAgKSB7XHJcblx0XHRcdG1lbnUuY29udHJvbGdyb3VwKCBcInJlZnJlc2hcIiApO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9tZW51SW5wdXRDaGFuZ2U6IGZ1bmN0aW9uKCBldnQgKSB7XHJcblx0XHR2YXIgaW5wdXQgPSAkKCBldnQudGFyZ2V0ICksXHJcblx0XHRcdGNoZWNrZWQgPSBpbnB1dFsgMCBdLmNoZWNrZWQ7XHJcblxyXG5cdFx0aW5wdXQuanFtRGF0YSggXCJjZWxsc1wiIClcclxuXHRcdFx0LnRvZ2dsZUNsYXNzKCBcInVpLXRhYmxlLWNlbGwtaGlkZGVuXCIsICFjaGVja2VkIClcclxuXHRcdFx0LnRvZ2dsZUNsYXNzKCBcInVpLXRhYmxlLWNlbGwtdmlzaWJsZVwiLCBjaGVja2VkICk7XHJcblx0fSxcclxuXHJcblx0X3VubG9ja0NlbGxzOiBmdW5jdGlvbiggY2VsbHMgKSB7XHJcblx0XHQvLyBhbGxvdyBoaWRlL3Nob3cgdmlhIENTUyBvbmx5ID0gcmVtb3ZlIGFsbCB0b2dnbGUtbG9ja3NcclxuXHRcdGNlbGxzLnJlbW92ZUNsYXNzKCBcInVpLXRhYmxlLWNlbGwtaGlkZGVuIHVpLXRhYmxlLWNlbGwtdmlzaWJsZVwiKTtcclxuXHR9LFxyXG5cclxuXHRfZW5oYW5jZUNvbFRvZ2dsZTogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgaWQgLCBtZW51QnV0dG9uLCBwb3B1cCwgbWVudSxcclxuXHRcdFx0dGFibGUgPSB0aGlzLmVsZW1lbnQsXHJcblx0XHRcdG9wdHMgPSB0aGlzLm9wdGlvbnMsXHJcblx0XHRcdG5zID0gJC5tb2JpbGUubnMsXHJcblx0XHRcdGZyYWdtZW50ID0gdGhpcy5kb2N1bWVudFsgMCBdLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcclxuXHJcblx0XHRpZCA9IHRoaXMuX2lkKCkgKyBcIi1wb3B1cFwiO1xyXG5cdFx0bWVudUJ1dHRvbiA9ICQoIFwiPGEgaHJlZj0nI1wiICsgaWQgKyBcIicgXCIgK1xyXG5cdFx0XHRcImNsYXNzPSdcIiArIG9wdHMuY2xhc3Nlcy5jb2x1bW5CdG4gKyBcIiB1aS1idG4gXCIgK1xyXG5cdFx0XHRcInVpLWJ0bi1cIiArICggb3B0cy5jb2x1bW5CdG5UaGVtZSB8fCBcImFcIiApICtcclxuXHRcdFx0XCIgdWktY29ybmVyLWFsbCB1aS1zaGFkb3cgdWktbWluaScgXCIgK1xyXG5cdFx0XHRcImRhdGEtXCIgKyBucyArIFwicmVsPSdwb3B1cCc+XCIgKyBvcHRzLmNvbHVtbkJ0blRleHQgKyBcIjwvYT5cIiApO1xyXG5cdFx0cG9wdXAgPSAkKCBcIjxkaXYgY2xhc3M9J1wiICsgb3B0cy5jbGFzc2VzLnBvcHVwICsgXCInIGlkPSdcIiArIGlkICsgXCInPjwvZGl2PlwiICk7XHJcblx0XHRtZW51ID0gJCggXCI8ZmllbGRzZXQ+PC9maWVsZHNldD5cIiApLmNvbnRyb2xncm91cCgpO1xyXG5cclxuXHRcdC8vIHNldCBleHRlbnNpb24gaGVyZSwgc2VuZCBcImZhbHNlXCIgdG8gdHJpZ2dlciBidWlsZC9yZWJ1aWxkXHJcblx0XHR0aGlzLl9hZGRUb2dnbGVzKCBtZW51LCBmYWxzZSApO1xyXG5cclxuXHRcdG1lbnUuYXBwZW5kVG8oIHBvcHVwICk7XHJcblxyXG5cdFx0ZnJhZ21lbnQuYXBwZW5kQ2hpbGQoIHBvcHVwWyAwIF0gKTtcclxuXHRcdGZyYWdtZW50LmFwcGVuZENoaWxkKCBtZW51QnV0dG9uWyAwIF0gKTtcclxuXHRcdHRhYmxlLmJlZm9yZSggZnJhZ21lbnQgKTtcclxuXHJcblx0XHRwb3B1cC5wb3B1cCgpO1xyXG5cclxuXHRcdHJldHVybiBtZW51O1xyXG5cdH0sXHJcblxyXG5cdHJlYnVpbGQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5fc3VwZXIoKTtcclxuXHJcblx0XHRpZiAoIHRoaXMub3B0aW9ucy5tb2RlID09PSBcImNvbHVtbnRvZ2dsZVwiICkge1xyXG5cdFx0XHQvLyBOT1RFOiByZWJ1aWxkIHBhc3NlcyBcImZhbHNlXCIsIHdoaWxlIHJlZnJlc2ggcGFzc2VzIFwidW5kZWZpbmVkXCJcclxuXHRcdFx0Ly8gYm90aCByZWZyZXNoIHRoZSB0YWJsZSwgYnV0IGluc2lkZSBhZGRUb2dnbGVzLCAhZmFsc2Ugd2lsbCBiZSB0cnVlLFxyXG5cdFx0XHQvLyBzbyBhIHJlYnVpbGQgY2FsbCBjYW4gYmUgaW5kZW50aWZpZWRcclxuXHRcdFx0dGhpcy5fcmVmcmVzaCggZmFsc2UgKTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfcmVmcmVzaDogZnVuY3Rpb24oIGNyZWF0ZSApIHtcclxuXHRcdHZhciBoZWFkZXJzLCBoaWRkZW5Db2x1bW5zLCBpbmRleDtcclxuXHJcblx0XHQvLyBDYWxsaW5nIF9zdXBlcigpIGhlcmUgdXBkYXRlcyB0aGlzLmhlYWRlcnNcclxuXHRcdHRoaXMuX3N1cGVyKCBjcmVhdGUgKTtcclxuXHJcblx0XHRpZiAoICFjcmVhdGUgJiYgdGhpcy5vcHRpb25zLm1vZGUgPT09IFwiY29sdW1udG9nZ2xlXCIgKSB7XHJcblx0XHRcdGhlYWRlcnMgPSB0aGlzLmhlYWRlcnM7XHJcblx0XHRcdGhpZGRlbkNvbHVtbnMgPSBbXTtcclxuXHJcblx0XHRcdC8vIEZpbmQgdGhlIGluZGV4IG9mIHRoZSBjb2x1bW4gaGVhZGVyIGFzc29jaWF0ZWQgd2l0aCBlYWNoIG9sZCBjaGVja2JveCBhbW9uZyB0aGVcclxuXHRcdFx0Ly8gcG9zdC1yZWZyZXNoIGhlYWRlcnMgYW5kLCBpZiB0aGUgaGVhZGVyIGlzIHN0aWxsIHRoZXJlLCBtYWtlIHN1cmUgdGhlIGNvcnJlc3BvbmRpbmdcclxuXHRcdFx0Ly8gY29sdW1uIHdpbGwgYmUgaGlkZGVuIGlmIHRoZSBwcmUtcmVmcmVzaCBjaGVja2JveCBpbmRpY2F0ZXMgdGhhdCB0aGUgY29sdW1uIGlzXHJcblx0XHRcdC8vIGhpZGRlbiBieSByZWNvcmRpbmcgaXRzIGluZGV4IGluIHRoZSBhcnJheSBvZiBoaWRkZW4gY29sdW1ucy5cclxuXHRcdFx0dGhpcy5fbWVudS5maW5kKCBcImlucHV0XCIgKS5lYWNoKCBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHR2YXIgaW5wdXQgPSAkKCB0aGlzICksXHJcblx0XHRcdFx0XHRoZWFkZXIgPSBpbnB1dC5qcW1EYXRhKCBcImhlYWRlclwiICksXHJcblx0XHRcdFx0XHRpbmRleCA9IGhlYWRlcnMuaW5kZXgoIGhlYWRlclsgMCBdICk7XHJcblxyXG5cdFx0XHRcdGlmICggaW5kZXggPiAtMSAmJiAhaW5wdXQucHJvcCggXCJjaGVja2VkXCIgKSApIHtcclxuXHJcblx0XHRcdFx0XHQvLyBUaGUgY29sdW1uIGhlYWRlciBhc3NvY2lhdGVkIHdpdGggL3RoaXMvIGNoZWNrYm94IGlzIHN0aWxsIHByZXNlbnQgaW4gdGhlXHJcblx0XHRcdFx0XHQvLyBwb3N0LXJlZnJlc2ggdGFibGUgYW5kIHRoZSBjaGVja2JveCBpcyBub3QgY2hlY2tlZCwgc28gdGhlIGNvbHVtbiBhc3NvY2lhdGVkXHJcblx0XHRcdFx0XHQvLyB3aXRoIHRoaXMgY29sdW1uIGhlYWRlciBpcyBjdXJyZW50bHkgaGlkZGVuLiBMZXQncyByZWNvcmQgdGhhdC5cclxuXHRcdFx0XHRcdGhpZGRlbkNvbHVtbnMucHVzaCggaW5kZXggKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0Ly8gY29sdW1ucyBub3QgYmVpbmcgcmVwbGFjZWQgbXVzdCBiZSBjbGVhcmVkIGZyb20gaW5wdXQgdG9nZ2xlLWxvY2tzXHJcblx0XHRcdHRoaXMuX3VubG9ja0NlbGxzKCB0aGlzLmVsZW1lbnQuZmluZCggXCIudWktdGFibGUtY2VsbC1oaWRkZW4sIFwiICtcclxuXHRcdFx0XHRcIi51aS10YWJsZS1jZWxsLXZpc2libGVcIiApICk7XHJcblxyXG5cdFx0XHQvLyB1cGRhdGUgY29sdW1udG9nZ2xlcyBhbmQgY2VsbHNcclxuXHRcdFx0dGhpcy5fYWRkVG9nZ2xlcyggdGhpcy5fbWVudSwgY3JlYXRlICk7XHJcblxyXG5cdFx0XHQvLyBBdCB0aGlzIHBvaW50IGFsbCBjb2x1bW5zIGFyZSB2aXNpYmxlLCBzbyB1bmNoZWNrIHRoZSBjaGVja2JveGVzIHRoYXQgY29ycmVzcG9uZCB0b1xyXG5cdFx0XHQvLyB0aG9zZSBjb2x1bW5zIHdlJ3ZlIGZvdW5kIHRvIGJlIGhpZGRlblxyXG5cdFx0XHRmb3IgKCBpbmRleCA9IGhpZGRlbkNvbHVtbnMubGVuZ3RoIC0gMSA7IGluZGV4ID4gLTEgOyBpbmRleC0tICkge1xyXG5cdFx0XHRcdGhlYWRlcnMuZXEoIGhpZGRlbkNvbHVtbnNbIGluZGV4IF0gKS5qcW1EYXRhKCBcImlucHV0XCIgKVxyXG5cdFx0XHRcdFx0LnByb3AoIFwiY2hlY2tlZFwiLCBmYWxzZSApXHJcblx0XHRcdFx0XHQuY2hlY2tib3hyYWRpbyggXCJyZWZyZXNoXCIgKVxyXG5cdFx0XHRcdFx0LnRyaWdnZXIoIFwiY2hhbmdlXCIgKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9zZXRUb2dnbGVTdGF0ZTogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLl9tZW51LmZpbmQoIFwiaW5wdXRcIiApLmVhY2goIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR2YXIgY2hlY2tib3ggPSAkKCB0aGlzICk7XHJcblxyXG5cdFx0XHR0aGlzLmNoZWNrZWQgPSBjaGVja2JveC5qcW1EYXRhKCBcImNlbGxzXCIgKS5lcSggMCApLmNzcyggXCJkaXNwbGF5XCIgKSA9PT0gXCJ0YWJsZS1jZWxsXCI7XHJcblx0XHRcdGNoZWNrYm94LmNoZWNrYm94cmFkaW8oIFwicmVmcmVzaFwiICk7XHJcblx0XHR9KTtcclxuXHR9LFxyXG5cclxuXHRfZGVzdHJveTogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLl9zdXBlcigpO1xyXG5cdH1cclxufSk7XHJcblxyXG59KSggalF1ZXJ5ICk7XHJcblxyXG4oZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcclxuXHJcbiQud2lkZ2V0KCBcIm1vYmlsZS50YWJsZVwiLCAkLm1vYmlsZS50YWJsZSwge1xyXG5cdG9wdGlvbnM6IHtcclxuXHRcdG1vZGU6IFwicmVmbG93XCIsXHJcblx0XHRjbGFzc2VzOiAkLmV4dGVuZCggJC5tb2JpbGUudGFibGUucHJvdG90eXBlLm9wdGlvbnMuY2xhc3Nlcywge1xyXG5cdFx0XHRyZWZsb3dUYWJsZTogXCJ1aS10YWJsZS1yZWZsb3dcIixcclxuXHRcdFx0Y2VsbExhYmVsczogXCJ1aS10YWJsZS1jZWxsLWxhYmVsXCJcclxuXHRcdH0pXHJcblx0fSxcclxuXHJcblx0X2NyZWF0ZTogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLl9zdXBlcigpO1xyXG5cclxuXHRcdC8vIElmIGl0J3Mgbm90IHJlZmxvdyBtb2RlLCByZXR1cm4gaGVyZS5cclxuXHRcdGlmICggdGhpcy5vcHRpb25zLm1vZGUgIT09IFwicmVmbG93XCIgKSB7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoICF0aGlzLm9wdGlvbnMuZW5oYW5jZWQgKSB7XHJcblx0XHRcdHRoaXMuZWxlbWVudC5hZGRDbGFzcyggdGhpcy5vcHRpb25zLmNsYXNzZXMucmVmbG93VGFibGUgKTtcclxuXHJcblx0XHRcdHRoaXMuX3VwZGF0ZVJlZmxvdygpO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdHJlYnVpbGQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5fc3VwZXIoKTtcclxuXHJcblx0XHRpZiAoIHRoaXMub3B0aW9ucy5tb2RlID09PSBcInJlZmxvd1wiICkge1xyXG5cdFx0XHR0aGlzLl9yZWZyZXNoKCBmYWxzZSApO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9yZWZyZXNoOiBmdW5jdGlvbiggY3JlYXRlICkge1xyXG5cdFx0dGhpcy5fc3VwZXIoIGNyZWF0ZSApO1xyXG5cdFx0aWYgKCAhY3JlYXRlICYmIHRoaXMub3B0aW9ucy5tb2RlID09PSBcInJlZmxvd1wiICkge1xyXG5cdFx0XHR0aGlzLl91cGRhdGVSZWZsb3coICk7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X3VwZGF0ZVJlZmxvdzogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgdGFibGUgPSB0aGlzLFxyXG5cdFx0XHRvcHRzID0gdGhpcy5vcHRpb25zO1xyXG5cclxuXHRcdC8vIGdldCBoZWFkZXJzIGluIHJldmVyc2Ugb3JkZXIgc28gdGhhdCB0b3AtbGV2ZWwgaGVhZGVycyBhcmUgYXBwZW5kZWQgbGFzdFxyXG5cdFx0JCggdGFibGUuYWxsSGVhZGVycy5nZXQoKS5yZXZlcnNlKCkgKS5lYWNoKCBmdW5jdGlvbigpIHtcclxuXHRcdFx0dmFyIGNlbGxzID0gJCggdGhpcyApLmpxbURhdGEoIFwiY2VsbHNcIiApLFxyXG5cdFx0XHRcdGNvbHN0YXJ0ID0gJC5tb2JpbGUuZ2V0QXR0cmlidXRlKCB0aGlzLCBcImNvbHN0YXJ0XCIgKSxcclxuXHRcdFx0XHRoaWVyYXJjaHlDbGFzcyA9IGNlbGxzLm5vdCggdGhpcyApLmZpbHRlciggXCJ0aGVhZCB0aFwiICkubGVuZ3RoICYmIFwiIHVpLXRhYmxlLWNlbGwtbGFiZWwtdG9wXCIsXHJcblx0XHRcdFx0Y29udGVudHMgPSAkKCB0aGlzICkuY2xvbmUoKS5jb250ZW50cygpLFxyXG5cdFx0XHRcdGl0ZXJhdGlvbiwgZmlsdGVyO1xyXG5cclxuXHRcdFx0XHRpZiAoIGNvbnRlbnRzLmxlbmd0aCA+IDAgICkge1xyXG5cclxuXHRcdFx0XHRcdGlmICggaGllcmFyY2h5Q2xhc3MgKSB7XHJcblx0XHRcdFx0XHRcdGl0ZXJhdGlvbiA9IHBhcnNlSW50KCB0aGlzLmdldEF0dHJpYnV0ZSggXCJjb2xzcGFuXCIgKSwgMTAgKTtcclxuXHRcdFx0XHRcdFx0ZmlsdGVyID0gXCJcIjtcclxuXHJcblx0XHRcdFx0XHRcdGlmICggaXRlcmF0aW9uICkge1xyXG5cdFx0XHRcdFx0XHRcdGZpbHRlciA9IFwidGQ6bnRoLWNoaWxkKFwiKyBpdGVyYXRpb24gK1wibiArIFwiICsgKCBjb2xzdGFydCApICtcIilcIjtcclxuXHRcdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdFx0dGFibGUuX2FkZExhYmVscyggY2VsbHMuZmlsdGVyKCBmaWx0ZXIgKSxcclxuXHRcdFx0XHRcdFx0XHRvcHRzLmNsYXNzZXMuY2VsbExhYmVscyArIGhpZXJhcmNoeUNsYXNzLCBjb250ZW50cyApO1xyXG5cdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0dGFibGUuX2FkZExhYmVscyggY2VsbHMsIG9wdHMuY2xhc3Nlcy5jZWxsTGFiZWxzLCBjb250ZW50cyApO1xyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHR9XHJcblx0XHR9KTtcclxuXHR9LFxyXG5cclxuXHRfYWRkTGFiZWxzOiBmdW5jdGlvbiggY2VsbHMsIGxhYmVsLCBjb250ZW50cyApIHtcclxuXHRcdGlmICggY29udGVudHMubGVuZ3RoID09PSAxICYmIGNvbnRlbnRzWyAwIF0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gXCJhYmJyXCIgKSB7XHJcblx0XHRcdGNvbnRlbnRzID0gY29udGVudHMuZXEoIDAgKS5hdHRyKCBcInRpdGxlXCIgKTtcclxuXHRcdH1cclxuXHRcdC8vIC5ub3QgZml4ZXMgIzYwMDZcclxuXHRcdGNlbGxzXHJcblx0XHRcdC5ub3QoIFwiOmhhcyhiLlwiICsgbGFiZWwgKyBcIilcIiApXHJcblx0XHRcdFx0LnByZXBlbmQoICQoIFwiPGIgY2xhc3M9J1wiICsgbGFiZWwgKyBcIic+PC9iPlwiICkuYXBwZW5kKCBjb250ZW50cyApICk7XHJcblx0fVxyXG59KTtcclxuXHJcbn0pKCBqUXVlcnkgKTtcclxuXHJcbihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xyXG5cclxuLy8gVE9ETyByZW5hbWUgZmlsdGVyQ2FsbGJhY2svZGVwcmVjYXRlIGFuZCBkZWZhdWx0IHRvIHRoZSBpdGVtIGl0c2VsZiBhcyB0aGUgZmlyc3QgYXJndW1lbnRcclxudmFyIGRlZmF1bHRGaWx0ZXJDYWxsYmFjayA9IGZ1bmN0aW9uKCBpbmRleCwgc2VhcmNoVmFsdWUgKSB7XHJcblx0cmV0dXJuICggKCBcIlwiICsgKCAkLm1vYmlsZS5nZXRBdHRyaWJ1dGUoIHRoaXMsIFwiZmlsdGVydGV4dFwiICkgfHwgJCggdGhpcyApLnRleHQoKSApIClcclxuXHRcdC50b0xvd2VyQ2FzZSgpLmluZGV4T2YoIHNlYXJjaFZhbHVlICkgPT09IC0xICk7XHJcbn07XHJcblxyXG4kLndpZGdldCggXCJtb2JpbGUuZmlsdGVyYWJsZVwiLCB7XHJcblxyXG5cdGluaXRTZWxlY3RvcjogXCI6anFtRGF0YShmaWx0ZXI9J3RydWUnKVwiLFxyXG5cclxuXHRvcHRpb25zOiB7XHJcblx0XHRmaWx0ZXJSZXZlYWw6IGZhbHNlLFxyXG5cdFx0ZmlsdGVyQ2FsbGJhY2s6IGRlZmF1bHRGaWx0ZXJDYWxsYmFjayxcclxuXHRcdGVuaGFuY2VkOiBmYWxzZSxcclxuXHRcdGlucHV0OiBudWxsLFxyXG5cdFx0Y2hpbGRyZW46IFwiPiBsaSwgPiBvcHRpb24sID4gb3B0Z3JvdXAgb3B0aW9uLCA+IHRib2R5IHRyLCA+IC51aS1jb250cm9sZ3JvdXAtY29udHJvbHMgPiAudWktYnRuLCA+IC51aS1jb250cm9sZ3JvdXAtY29udHJvbHMgPiAudWktY2hlY2tib3gsID4gLnVpLWNvbnRyb2xncm91cC1jb250cm9scyA+IC51aS1yYWRpb1wiXHJcblx0fSxcclxuXHJcblx0X2NyZWF0ZTogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgb3B0cyA9IHRoaXMub3B0aW9ucztcclxuXHJcblx0XHQkLmV4dGVuZCggdGhpcywge1xyXG5cdFx0XHRfc2VhcmNoOiBudWxsLFxyXG5cdFx0XHRfdGltZXI6IDBcclxuXHRcdH0pO1xyXG5cclxuXHRcdHRoaXMuX3NldElucHV0KCBvcHRzLmlucHV0ICk7XHJcblx0XHRpZiAoICFvcHRzLmVuaGFuY2VkICkge1xyXG5cdFx0XHR0aGlzLl9maWx0ZXJJdGVtcyggKCAoIHRoaXMuX3NlYXJjaCAmJiB0aGlzLl9zZWFyY2gudmFsKCkgKSB8fCBcIlwiICkudG9Mb3dlckNhc2UoKSApO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9vbktleVVwOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciB2YWwsIGxhc3R2YWwsXHJcblx0XHRcdHNlYXJjaCA9IHRoaXMuX3NlYXJjaDtcclxuXHJcblx0XHRpZiAoIHNlYXJjaCApIHtcclxuXHRcdFx0dmFsID0gc2VhcmNoLnZhbCgpLnRvTG93ZXJDYXNlKCksXHJcblx0XHRcdGxhc3R2YWwgPSAkLm1vYmlsZS5nZXRBdHRyaWJ1dGUoIHNlYXJjaFsgMCBdLCBcImxhc3R2YWxcIiApICsgXCJcIjtcclxuXHJcblx0XHRcdGlmICggbGFzdHZhbCAmJiBsYXN0dmFsID09PSB2YWwgKSB7XHJcblx0XHRcdFx0Ly8gRXhlY3V0ZSB0aGUgaGFuZGxlciBvbmx5IG9uY2UgcGVyIHZhbHVlIGNoYW5nZVxyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aWYgKCB0aGlzLl90aW1lciApIHtcclxuXHRcdFx0XHR3aW5kb3cuY2xlYXJUaW1lb3V0KCB0aGlzLl90aW1lciApO1xyXG5cdFx0XHRcdHRoaXMuX3RpbWVyID0gMDtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0dGhpcy5fdGltZXIgPSB0aGlzLl9kZWxheSggZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0aWYgKCB0aGlzLl90cmlnZ2VyKCBcImJlZm9yZWZpbHRlclwiLCBudWxsLCB7IGlucHV0OiBzZWFyY2ggfSApID09PSBmYWxzZSApIHtcclxuXHRcdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdC8vIENoYW5nZSB2YWwgYXMgbGFzdHZhbCBmb3IgbmV4dCBleGVjdXRpb25cclxuXHRcdFx0XHRzZWFyY2hbIDAgXS5zZXRBdHRyaWJ1dGUoIFwiZGF0YS1cIiArICQubW9iaWxlLm5zICsgXCJsYXN0dmFsXCIsIHZhbCApO1xyXG5cclxuXHRcdFx0XHR0aGlzLl9maWx0ZXJJdGVtcyggdmFsICk7XHJcblx0XHRcdFx0dGhpcy5fdGltZXIgPSAwO1xyXG5cdFx0XHR9LCAyNTAgKTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfZ2V0RmlsdGVyYWJsZUl0ZW1zOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBlbGVtID0gdGhpcy5lbGVtZW50LFxyXG5cdFx0XHRjaGlsZHJlbiA9IHRoaXMub3B0aW9ucy5jaGlsZHJlbixcclxuXHRcdFx0aXRlbXMgPSAhY2hpbGRyZW4gPyB7IGxlbmd0aDogMCB9OlxyXG5cdFx0XHRcdCQuaXNGdW5jdGlvbiggY2hpbGRyZW4gKSA/IGNoaWxkcmVuKCk6XHJcblx0XHRcdFx0Y2hpbGRyZW4ubm9kZU5hbWUgPyAkKCBjaGlsZHJlbiApOlxyXG5cdFx0XHRcdGNoaWxkcmVuLmpxdWVyeSA/IGNoaWxkcmVuOlxyXG5cdFx0XHRcdHRoaXMuZWxlbWVudC5maW5kKCBjaGlsZHJlbiApO1xyXG5cclxuXHRcdGlmICggaXRlbXMubGVuZ3RoID09PSAwICkge1xyXG5cdFx0XHRpdGVtcyA9IGVsZW0uY2hpbGRyZW4oKTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gaXRlbXM7XHJcblx0fSxcclxuXHJcblx0X2ZpbHRlckl0ZW1zOiBmdW5jdGlvbiggdmFsICkge1xyXG5cdFx0dmFyIGlkeCwgY2FsbGJhY2ssIGxlbmd0aCwgZHN0LFxyXG5cdFx0XHRzaG93ID0gW10sXHJcblx0XHRcdGhpZGUgPSBbXSxcclxuXHRcdFx0b3B0cyA9IHRoaXMub3B0aW9ucyxcclxuXHRcdFx0ZmlsdGVySXRlbXMgPSB0aGlzLl9nZXRGaWx0ZXJhYmxlSXRlbXMoKTtcclxuXHJcblx0XHRpZiAoIHZhbCAhPSBudWxsICkge1xyXG5cdFx0XHRjYWxsYmFjayA9IG9wdHMuZmlsdGVyQ2FsbGJhY2sgfHwgZGVmYXVsdEZpbHRlckNhbGxiYWNrO1xyXG5cdFx0XHRsZW5ndGggPSBmaWx0ZXJJdGVtcy5sZW5ndGg7XHJcblxyXG5cdFx0XHQvLyBQYXJ0aXRpb24gdGhlIGl0ZW1zIGludG8gdGhvc2UgdG8gYmUgaGlkZGVuIGFuZCB0aG9zZSB0byBiZSBzaG93blxyXG5cdFx0XHRmb3IgKCBpZHggPSAwIDsgaWR4IDwgbGVuZ3RoIDsgaWR4KysgKSB7XHJcblx0XHRcdFx0ZHN0ID0gKCBjYWxsYmFjay5jYWxsKCBmaWx0ZXJJdGVtc1sgaWR4IF0sIGlkeCwgdmFsICkgKSA/IGhpZGUgOiBzaG93O1xyXG5cdFx0XHRcdGRzdC5wdXNoKCBmaWx0ZXJJdGVtc1sgaWR4IF0gKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdC8vIElmIG5vdGhpbmcgaXMgaGlkZGVuLCB0aGVuIHRoZSBkZWNpc2lvbiB3aGV0aGVyIHRvIGhpZGUgb3Igc2hvdyB0aGUgaXRlbXNcclxuXHRcdC8vIGlzIGJhc2VkIG9uIHRoZSBcImZpbHRlclJldmVhbFwiIG9wdGlvbi5cclxuXHRcdGlmICggaGlkZS5sZW5ndGggPT09IDAgKSB7XHJcblx0XHRcdGZpbHRlckl0ZW1zWyAoIG9wdHMuZmlsdGVyUmV2ZWFsICYmIHZhbC5sZW5ndGggPT09IDAgKSA/XHJcblx0XHRcdFx0XCJhZGRDbGFzc1wiIDogXCJyZW1vdmVDbGFzc1wiIF0oIFwidWktc2NyZWVuLWhpZGRlblwiICk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHQkKCBoaWRlICkuYWRkQ2xhc3MoIFwidWktc2NyZWVuLWhpZGRlblwiICk7XHJcblx0XHRcdCQoIHNob3cgKS5yZW1vdmVDbGFzcyggXCJ1aS1zY3JlZW4taGlkZGVuXCIgKTtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLl9yZWZyZXNoQ2hpbGRXaWRnZXQoKTtcclxuXHJcblx0XHR0aGlzLl90cmlnZ2VyKCBcImZpbHRlclwiLCBudWxsLCB7XHJcblx0XHRcdGl0ZW1zOiBmaWx0ZXJJdGVtc1xyXG5cdFx0fSk7XHJcblx0fSxcclxuXHJcblx0Ly8gVGhlIERlZmF1bHQgaW1wbGVtZW50YXRpb24gb2YgX3JlZnJlc2hDaGlsZFdpZGdldCBhdHRlbXB0cyB0byBjYWxsXHJcblx0Ly8gcmVmcmVzaCBvbiBjb2xsYXBzaWJsZXNldCwgY29udHJvbGdyb3VwLCBzZWxlY3RtZW51LCBvciBsaXN0dmlld1xyXG5cdF9yZWZyZXNoQ2hpbGRXaWRnZXQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIHdpZGdldCwgaWR4LFxyXG5cdFx0XHRyZWNvZ25pemVkV2lkZ2V0cyA9IFsgXCJjb2xsYXBzaWJsZXNldFwiLCBcInNlbGVjdG1lbnVcIiwgXCJjb250cm9sZ3JvdXBcIiwgXCJsaXN0dmlld1wiIF07XHJcblxyXG5cdFx0Zm9yICggaWR4ID0gcmVjb2duaXplZFdpZGdldHMubGVuZ3RoIC0gMSA7IGlkeCA+IC0xIDsgaWR4LS0gKSB7XHJcblx0XHRcdHdpZGdldCA9IHJlY29nbml6ZWRXaWRnZXRzWyBpZHggXTtcclxuXHRcdFx0aWYgKCAkLm1vYmlsZVsgd2lkZ2V0IF0gKSB7XHJcblx0XHRcdFx0d2lkZ2V0ID0gdGhpcy5lbGVtZW50LmRhdGEoIFwibW9iaWxlLVwiICsgd2lkZ2V0ICk7XHJcblx0XHRcdFx0aWYgKCB3aWRnZXQgJiYgJC5pc0Z1bmN0aW9uKCB3aWRnZXQucmVmcmVzaCApICkge1xyXG5cdFx0XHRcdFx0d2lkZ2V0LnJlZnJlc2goKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHQvLyBUT0RPOiBXaGVuIHRoZSBpbnB1dCBpcyBub3QgaW50ZXJuYWwsIGRvIG5vdCBldmVuIHN0b3JlIGl0IGluIHRoaXMuX3NlYXJjaFxyXG5cdF9zZXRJbnB1dDogZnVuY3Rpb24gKCBzZWxlY3RvciApIHtcclxuXHRcdHZhciBzZWFyY2ggPSB0aGlzLl9zZWFyY2g7XHJcblxyXG5cdFx0Ly8gU3RvcCBhIHBlbmRpbmcgZmlsdGVyIG9wZXJhdGlvblxyXG5cdFx0aWYgKCB0aGlzLl90aW1lciApIHtcclxuXHRcdFx0d2luZG93LmNsZWFyVGltZW91dCggdGhpcy5fdGltZXIgKTtcclxuXHRcdFx0dGhpcy5fdGltZXIgPSAwO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggc2VhcmNoICkge1xyXG5cdFx0XHR0aGlzLl9vZmYoIHNlYXJjaCwgXCJrZXl1cCBjaGFuZ2UgaW5wdXRcIiApO1xyXG5cdFx0XHRzZWFyY2ggPSBudWxsO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggc2VsZWN0b3IgKSB7XHJcblx0XHRcdHNlYXJjaCA9IHNlbGVjdG9yLmpxdWVyeSA/IHNlbGVjdG9yOlxyXG5cdFx0XHRcdHNlbGVjdG9yLm5vZGVOYW1lID8gJCggc2VsZWN0b3IgKTpcclxuXHRcdFx0XHR0aGlzLmRvY3VtZW50LmZpbmQoIHNlbGVjdG9yICk7XHJcblxyXG5cdFx0XHR0aGlzLl9vbiggc2VhcmNoLCB7XHJcblx0XHRcdFx0a2V5ZG93bjogXCJfb25LZXlEb3duXCIsXHJcblx0XHRcdFx0a2V5cHJlc3M6IFwiX29uS2V5UHJlc3NcIixcclxuXHRcdFx0XHRrZXl1cDogXCJfb25LZXlVcFwiLFxyXG5cdFx0XHRcdGNoYW5nZTogXCJfb25LZXlVcFwiLFxyXG5cdFx0XHRcdGlucHV0OiBcIl9vbktleVVwXCJcclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5fc2VhcmNoID0gc2VhcmNoO1xyXG5cdH0sXHJcblxyXG5cdC8vIFByZXZlbnQgZm9ybSBzdWJtaXNzaW9uXHJcblx0X29uS2V5RG93bjogZnVuY3Rpb24oIGV2ZW50ICkge1xyXG5cdFx0aWYgKCBldmVudC5rZXlDb2RlID09PSAkLnVpLmtleUNvZGUuRU5URVIgKSB7XHJcblx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdHRoaXMuX3ByZXZlbnRLZXlQcmVzcyA9IHRydWU7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X29uS2V5UHJlc3M6IGZ1bmN0aW9uKCBldmVudCApIHtcclxuXHRcdGlmICggdGhpcy5fcHJldmVudEtleVByZXNzICkge1xyXG5cdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHR0aGlzLl9wcmV2ZW50S2V5UHJlc3MgPSBmYWxzZTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfc2V0T3B0aW9uczogZnVuY3Rpb24oIG9wdGlvbnMgKSB7XHJcblx0XHR2YXIgcmVmaWx0ZXIgPSAhKCAoIG9wdGlvbnMuZmlsdGVyUmV2ZWFsID09PSB1bmRlZmluZWQgKSAmJlxyXG5cdFx0XHRcdCggb3B0aW9ucy5maWx0ZXJDYWxsYmFjayA9PT0gdW5kZWZpbmVkICkgJiZcclxuXHRcdFx0XHQoIG9wdGlvbnMuY2hpbGRyZW4gPT09IHVuZGVmaW5lZCApICk7XHJcblxyXG5cdFx0dGhpcy5fc3VwZXIoIG9wdGlvbnMgKTtcclxuXHJcblx0XHRpZiAoIG9wdGlvbnMuaW5wdXQgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0dGhpcy5fc2V0SW5wdXQoIG9wdGlvbnMuaW5wdXQgKTtcclxuXHRcdFx0cmVmaWx0ZXIgPSB0cnVlO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggcmVmaWx0ZXIgKSB7XHJcblx0XHRcdHRoaXMucmVmcmVzaCgpO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9kZXN0cm95OiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBvcHRzID0gdGhpcy5vcHRpb25zLFxyXG5cdFx0XHRpdGVtcyA9IHRoaXMuX2dldEZpbHRlcmFibGVJdGVtcygpO1xyXG5cclxuXHRcdGlmICggb3B0cy5lbmhhbmNlZCApIHtcclxuXHRcdFx0aXRlbXMudG9nZ2xlQ2xhc3MoIFwidWktc2NyZWVuLWhpZGRlblwiLCBvcHRzLmZpbHRlclJldmVhbCApO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0aXRlbXMucmVtb3ZlQ2xhc3MoIFwidWktc2NyZWVuLWhpZGRlblwiICk7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0cmVmcmVzaDogZnVuY3Rpb24oKSB7XHJcblx0XHRpZiAoIHRoaXMuX3RpbWVyICkge1xyXG5cdFx0XHR3aW5kb3cuY2xlYXJUaW1lb3V0KCB0aGlzLl90aW1lciApO1xyXG5cdFx0XHR0aGlzLl90aW1lciA9IDA7XHJcblx0XHR9XHJcblx0XHR0aGlzLl9maWx0ZXJJdGVtcyggKCAoIHRoaXMuX3NlYXJjaCAmJiB0aGlzLl9zZWFyY2gudmFsKCkgKSB8fCBcIlwiICkudG9Mb3dlckNhc2UoKSApO1xyXG5cdH1cclxufSk7XHJcblxyXG59KSggalF1ZXJ5ICk7XHJcblxyXG4oZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcclxuXHJcbi8vIENyZWF0ZSBhIGZ1bmN0aW9uIHRoYXQgd2lsbCByZXBsYWNlIHRoZSBfc2V0T3B0aW9ucyBmdW5jdGlvbiBvZiBhIHdpZGdldCxcclxuLy8gYW5kIHdpbGwgcGFzcyB0aGUgb3B0aW9ucyBvbiB0byB0aGUgaW5wdXQgb2YgdGhlIGZpbHRlcmFibGUuXHJcbnZhciByZXBsYWNlU2V0T3B0aW9ucyA9IGZ1bmN0aW9uKCBzZWxmLCBvcmlnICkge1xyXG5cdFx0cmV0dXJuIGZ1bmN0aW9uKCBvcHRpb25zICkge1xyXG5cdFx0XHRvcmlnLmNhbGwoIHRoaXMsIG9wdGlvbnMgKTtcclxuXHRcdFx0c2VsZi5fc3luY1RleHRJbnB1dE9wdGlvbnMoIG9wdGlvbnMgKTtcclxuXHRcdH07XHJcblx0fSxcclxuXHRyRGl2aWRlckxpc3RJdGVtID0gLyhefFxccyl1aS1saS1kaXZpZGVyKFxcc3wkKS8sXHJcblx0b3JpZ0RlZmF1bHRGaWx0ZXJDYWxsYmFjayA9ICQubW9iaWxlLmZpbHRlcmFibGUucHJvdG90eXBlLm9wdGlvbnMuZmlsdGVyQ2FsbGJhY2s7XHJcblxyXG4vLyBPdmVycmlkZSB0aGUgZGVmYXVsdCBmaWx0ZXIgY2FsbGJhY2sgd2l0aCBvbmUgdGhhdCBkb2VzIG5vdCBoaWRlIGxpc3QgZGl2aWRlcnNcclxuJC5tb2JpbGUuZmlsdGVyYWJsZS5wcm90b3R5cGUub3B0aW9ucy5maWx0ZXJDYWxsYmFjayA9IGZ1bmN0aW9uKCBpbmRleCwgc2VhcmNoVmFsdWUgKSB7XHJcblx0cmV0dXJuICF0aGlzLmNsYXNzTmFtZS5tYXRjaCggckRpdmlkZXJMaXN0SXRlbSApICYmXHJcblx0XHRvcmlnRGVmYXVsdEZpbHRlckNhbGxiYWNrLmNhbGwoIHRoaXMsIGluZGV4LCBzZWFyY2hWYWx1ZSApO1xyXG59O1xyXG5cclxuJC53aWRnZXQoIFwibW9iaWxlLmZpbHRlcmFibGVcIiwgJC5tb2JpbGUuZmlsdGVyYWJsZSwge1xyXG5cdG9wdGlvbnM6IHtcclxuXHRcdGZpbHRlclBsYWNlaG9sZGVyOiBcIkZpbHRlciBpdGVtcy4uLlwiLFxyXG5cdFx0ZmlsdGVyVGhlbWU6IG51bGxcclxuXHR9LFxyXG5cclxuXHRfY3JlYXRlOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBpZHgsIHdpZGdldE5hbWUsXHJcblx0XHRcdGVsZW0gPSB0aGlzLmVsZW1lbnQsXHJcblx0XHRcdHJlY29nbml6ZWRXaWRnZXRzID0gWyBcImNvbGxhcHNpYmxlc2V0XCIsIFwic2VsZWN0bWVudVwiLCBcImNvbnRyb2xncm91cFwiLCBcImxpc3R2aWV3XCIgXSxcclxuXHRcdFx0Y3JlYXRlSGFuZGxlcnMgPSB7fTtcclxuXHJcblx0XHR0aGlzLl9zdXBlcigpO1xyXG5cclxuXHRcdCQuZXh0ZW5kKCB0aGlzLCB7XHJcblx0XHRcdF93aWRnZXQ6IG51bGxcclxuXHRcdH0pO1xyXG5cclxuXHRcdGZvciAoIGlkeCA9IHJlY29nbml6ZWRXaWRnZXRzLmxlbmd0aCAtIDEgOyBpZHggPiAtMSA7IGlkeC0tICkge1xyXG5cdFx0XHR3aWRnZXROYW1lID0gcmVjb2duaXplZFdpZGdldHNbIGlkeCBdO1xyXG5cdFx0XHRpZiAoICQubW9iaWxlWyB3aWRnZXROYW1lIF0gKSB7XHJcblx0XHRcdFx0aWYgKCB0aGlzLl9zZXRXaWRnZXQoIGVsZW0uZGF0YSggXCJtb2JpbGUtXCIgKyB3aWRnZXROYW1lICkgKSApIHtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRjcmVhdGVIYW5kbGVyc1sgd2lkZ2V0TmFtZSArIFwiY3JlYXRlXCIgXSA9IFwiX2hhbmRsZUNyZWF0ZVwiO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggIXRoaXMuX3dpZGdldCApIHtcclxuXHRcdFx0dGhpcy5fb24oIGVsZW0sIGNyZWF0ZUhhbmRsZXJzICk7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X2hhbmRsZUNyZWF0ZTogZnVuY3Rpb24oIGV2dCApIHtcclxuXHRcdHRoaXMuX3NldFdpZGdldCggdGhpcy5lbGVtZW50LmRhdGEoIFwibW9iaWxlLVwiICsgZXZ0LnR5cGUuc3Vic3RyaW5nKCAwLCBldnQudHlwZS5sZW5ndGggLSA2ICkgKSApO1xyXG5cdH0sXHJcblxyXG5cdF90cmlnZ2VyOiBmdW5jdGlvbiggdHlwZSwgZXZlbnQsIGRhdGEgKSB7XHJcblx0XHRpZiAoIHRoaXMuX3dpZGdldCAmJiB0aGlzLl93aWRnZXQud2lkZ2V0RnVsbE5hbWUgPT09IFwibW9iaWxlLWxpc3R2aWV3XCIgJiZcclxuXHRcdFx0dHlwZSA9PT0gXCJiZWZvcmVmaWx0ZXJcIiApIHtcclxuXHJcblx0XHRcdC8vIEFsc28gdHJpZ2dlciBsaXN0dmlld2JlZm9yZWZpbHRlciBpZiB0aGlzIHdpZGdldCBpcyBhbHNvIGEgbGlzdHZpZXdcclxuXHRcdFx0dGhpcy5fd2lkZ2V0Ll90cmlnZ2VyKCBcImJlZm9yZWZpbHRlclwiLCBldmVudCwgZGF0YSApO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIFBhc3NpbmcgYmFjayB0aGUgcmVzcG9uc2UgZW5hYmxlcyBjYWxsaW5nIHByZXZlbnREZWZhdWx0KClcclxuXHRcdHJldHVybiB0aGlzLl9zdXBlciggdHlwZSwgZXZlbnQsIGRhdGEgKTtcclxuXHR9LFxyXG5cclxuXHRfc2V0V2lkZ2V0OiBmdW5jdGlvbiggd2lkZ2V0ICkge1xyXG5cdFx0aWYgKCAhdGhpcy5fd2lkZ2V0ICYmIHdpZGdldCApIHtcclxuXHRcdFx0dGhpcy5fd2lkZ2V0ID0gd2lkZ2V0O1xyXG5cdFx0XHR0aGlzLl93aWRnZXQuX3NldE9wdGlvbnMgPSByZXBsYWNlU2V0T3B0aW9ucyggdGhpcywgdGhpcy5fd2lkZ2V0Ll9zZXRPcHRpb25zICk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCAhIXRoaXMuX3dpZGdldCApIHtcclxuXHRcdFx0dGhpcy5fc3luY1RleHRJbnB1dE9wdGlvbnMoIHRoaXMuX3dpZGdldC5vcHRpb25zICk7XHJcblx0XHRcdGlmICggdGhpcy5fd2lkZ2V0LndpZGdldE5hbWUgPT09IFwibGlzdHZpZXdcIiApIHtcclxuXHRcdFx0XHR0aGlzLl93aWRnZXQub3B0aW9ucy5oaWRlRGl2aWRlcnMgPSB0cnVlO1xyXG5cdFx0XHRcdHRoaXMuX3dpZGdldC5lbGVtZW50Lmxpc3R2aWV3KCBcInJlZnJlc2hcIiApO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuICEhdGhpcy5fd2lkZ2V0O1xyXG5cdH0sXHJcblxyXG5cdF9pc1NlYXJjaEludGVybmFsOiBmdW5jdGlvbigpIHtcclxuXHRcdHJldHVybiAoIHRoaXMuX3NlYXJjaCAmJiB0aGlzLl9zZWFyY2guanFtRGF0YSggXCJ1aS1maWx0ZXJhYmxlLVwiICsgdGhpcy51dWlkICsgXCItaW50ZXJuYWxcIiApICk7XHJcblx0fSxcclxuXHJcblx0X3NldElucHV0OiBmdW5jdGlvbiggc2VsZWN0b3IgKSB7XHJcblx0XHR2YXIgb3B0cyA9IHRoaXMub3B0aW9ucyxcclxuXHRcdFx0dXBkYXRlUGxhY2Vob2xkZXIgPSB0cnVlLFxyXG5cdFx0XHR0ZXh0aW5wdXRPcHRzID0ge307XHJcblxyXG5cdFx0aWYgKCAhc2VsZWN0b3IgKSB7XHJcblx0XHRcdGlmICggdGhpcy5faXNTZWFyY2hJbnRlcm5hbCgpICkge1xyXG5cclxuXHRcdFx0XHQvLyBJZ25vcmUgdGhlIGNhbGwgdG8gc2V0IGEgbmV3IGlucHV0IGlmIHRoZSBzZWxlY3RvciBnb2VzIHRvIGZhbHN5IGFuZFxyXG5cdFx0XHRcdC8vIHRoZSBjdXJyZW50IHRleHRpbnB1dCBpcyBhbHJlYWR5IG9mIHRoZSBpbnRlcm5hbGx5IGdlbmVyYXRlZCB2YXJpZXR5LlxyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHJcblx0XHRcdFx0Ly8gR2VuZXJhdGluZyBhIG5ldyB0ZXh0aW5wdXQgd2lkZ2V0LiBObyBuZWVkIHRvIHNldCB0aGUgcGxhY2Vob2xkZXJcclxuXHRcdFx0XHQvLyBmdXJ0aGVyIGRvd24gdGhlIGZ1bmN0aW9uLlxyXG5cdFx0XHRcdHVwZGF0ZVBsYWNlaG9sZGVyID0gZmFsc2U7XHJcblx0XHRcdFx0c2VsZWN0b3IgPSAkKCBcIjxpbnB1dCBcIiArXHJcblx0XHRcdFx0XHRcImRhdGEtXCIgKyAkLm1vYmlsZS5ucyArIFwidHlwZT0nc2VhcmNoJyBcIiArXHJcblx0XHRcdFx0XHRcInBsYWNlaG9sZGVyPSdcIiArIG9wdHMuZmlsdGVyUGxhY2Vob2xkZXIgKyBcIic+PC9pbnB1dD5cIiApXHJcblx0XHRcdFx0XHQuanFtRGF0YSggXCJ1aS1maWx0ZXJhYmxlLVwiICsgdGhpcy51dWlkICsgXCItaW50ZXJuYWxcIiwgdHJ1ZSApO1xyXG5cdFx0XHRcdCQoIFwiPGZvcm0gY2xhc3M9J3VpLWZpbHRlcmFibGUnPjwvZm9ybT5cIiApXHJcblx0XHRcdFx0XHQuYXBwZW5kKCBzZWxlY3RvciApXHJcblx0XHRcdFx0XHQuc3VibWl0KCBmdW5jdGlvbiggZXZ0ICkge1xyXG5cdFx0XHRcdFx0XHRldnQucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHRcdFx0c2VsZWN0b3IuYmx1cigpO1xyXG5cdFx0XHRcdFx0fSlcclxuXHRcdFx0XHRcdC5pbnNlcnRCZWZvcmUoIHRoaXMuZWxlbWVudCApO1xyXG5cdFx0XHRcdGlmICggJC5tb2JpbGUudGV4dGlucHV0ICkge1xyXG5cdFx0XHRcdFx0aWYgKCB0aGlzLm9wdGlvbnMuZmlsdGVyVGhlbWUgIT0gbnVsbCApIHtcclxuXHRcdFx0XHRcdFx0dGV4dGlucHV0T3B0c1sgXCJ0aGVtZVwiIF0gPSBvcHRzLmZpbHRlclRoZW1lO1xyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdHNlbGVjdG9yLnRleHRpbnB1dCggdGV4dGlucHV0T3B0cyApO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuX3N1cGVyKCBzZWxlY3RvciApO1xyXG5cclxuXHRcdGlmICggdGhpcy5faXNTZWFyY2hJbnRlcm5hbCgpICYmIHVwZGF0ZVBsYWNlaG9sZGVyICkge1xyXG5cdFx0XHR0aGlzLl9zZWFyY2guYXR0ciggXCJwbGFjZWhvbGRlclwiLCB0aGlzLm9wdGlvbnMuZmlsdGVyUGxhY2Vob2xkZXIgKTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfc2V0T3B0aW9uczogZnVuY3Rpb24oIG9wdGlvbnMgKSB7XHJcblx0XHR2YXIgcmV0ID0gdGhpcy5fc3VwZXIoIG9wdGlvbnMgKTtcclxuXHJcblx0XHQvLyBOZWVkIHRvIHNldCB0aGUgZmlsdGVyUGxhY2Vob2xkZXIgYWZ0ZXIgaGF2aW5nIGVzdGFibGlzaGVkIHRoZSBzZWFyY2ggaW5wdXRcclxuXHRcdGlmICggb3B0aW9ucy5maWx0ZXJQbGFjZWhvbGRlciAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRpZiAoIHRoaXMuX2lzU2VhcmNoSW50ZXJuYWwoKSApIHtcclxuXHRcdFx0XHR0aGlzLl9zZWFyY2guYXR0ciggXCJwbGFjZWhvbGRlclwiLCBvcHRpb25zLmZpbHRlclBsYWNlaG9sZGVyICk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIG9wdGlvbnMuZmlsdGVyVGhlbWUgIT09IHVuZGVmaW5lZCAmJiB0aGlzLl9zZWFyY2ggJiYgJC5tb2JpbGUudGV4dGlucHV0ICkge1xyXG5cdFx0XHR0aGlzLl9zZWFyY2gudGV4dGlucHV0KCBcIm9wdGlvblwiLCBcInRoZW1lXCIsIG9wdGlvbnMuZmlsdGVyVGhlbWUgKTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gcmV0O1xyXG5cdH0sXHJcblxyXG5cdC8vIFRoZSBsaXN0dmlldyBpbXBsZW1lbnRhdGlvbiBhY2NvbXBhbnlpbmcgdGhpcyBmaWx0ZXJhYmxlIGJhY2tjb21wYXQgbGF5ZXIgd2lsbCBjYWxsXHJcblx0Ly8gZmlsdGVyYWJsZS5yZWZyZXNoKCkgYWZ0ZXIgaXQncyBkb25lIHJlZnJlc2hpbmcgdGhlIGxpc3R2aWV3IHRvIG1ha2Ugc3VyZSB0aGUgZmlsdGVyYWJsZVxyXG5cdC8vIGZpbHRlcnMgb3V0IGFueSBuZXcgaXRlbXMgYWRkZWQuIEhvd2V2ZXIsIHdoZW4gdGhlIGxpc3R2aWV3IHJlZnJlc2ggaGFzIGJlZW4gaW5pdGlhdGVkIGJ5XHJcblx0Ly8gdGhlIGZpbHRlcmFibGUgaXRzZWxmLCB0aGVuIHN1Y2ggZmlsdGVyaW5nIGhhcyBhbHJlYWR5IHRha2VuIHBsYWNlLCBhbmQgY2FsbGluZyB0aGVcclxuXHQvLyBmaWx0ZXJhYmxlJ3MgcmVmcmVzaCgpIG1ldGhvZCB3aWxsIGNhdXNlIGFuIGluZmluaXRlIHJlY3Vyc2lvbi4gV2Ugc3RvcCB0aGlzIGJ5IHNldHRpbmcgYVxyXG5cdC8vIGZsYWcgdGhhdCB3aWxsIGNhdXNlIHRoZSBmaWx0ZXJhYmxlJ3MgcmVmcmVzaCgpIG1ldGhvZCB0byBzaG9ydC1jaXJjdWl0LlxyXG5cdF9yZWZyZXNoQ2hpbGRXaWRnZXQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5fcmVmcmVzaGluZ0NoaWxkV2lkZ2V0ID0gdHJ1ZTtcclxuXHRcdHRoaXMuX3N1cGVyQXBwbHkoIGFyZ3VtZW50cyApO1xyXG5cdFx0dGhpcy5fcmVmcmVzaGluZ0NoaWxkV2lkZ2V0ID0gZmFsc2U7XHJcblx0fSxcclxuXHJcblx0cmVmcmVzaDogZnVuY3Rpb24oKSB7XHJcblx0XHRpZiAoICF0aGlzLl9yZWZyZXNoaW5nQ2hpbGRXaWRnZXQgKSB7XHJcblx0XHRcdHRoaXMuX3N1cGVyQXBwbHkoIGFyZ3VtZW50cyApO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9kZXN0cm95OiBmdW5jdGlvbigpIHtcclxuXHRcdGlmICggdGhpcy5faXNTZWFyY2hJbnRlcm5hbCgpICkge1xyXG5cdFx0XHR0aGlzLl9zZWFyY2gucmVtb3ZlKCk7XHJcblx0XHR9XHJcblx0XHR0aGlzLl9zdXBlcigpO1xyXG5cdH0sXHJcblxyXG5cdF9zeW5jVGV4dElucHV0T3B0aW9uczogZnVuY3Rpb24oIG9wdGlvbnMgKSB7XHJcblx0XHR2YXIgaWR4LFxyXG5cdFx0XHR0ZXh0aW5wdXRPcHRpb25zID0ge307XHJcblxyXG5cdFx0Ly8gV2Ugb25seSBzeW5jIG9wdGlvbnMgaWYgdGhlIGZpbHRlcmFibGUncyB0ZXh0aW5wdXQgaXMgb2YgdGhlIGludGVybmFsbHlcclxuXHRcdC8vIGdlbmVyYXRlZCB2YXJpZXR5LCByYXRoZXIgdGhhbiBvbmUgc3BlY2lmaWVkIGJ5IHRoZSB1c2VyLlxyXG5cdFx0aWYgKCB0aGlzLl9pc1NlYXJjaEludGVybmFsKCkgJiYgJC5tb2JpbGUudGV4dGlucHV0ICkge1xyXG5cclxuXHRcdFx0Ly8gQXBwbHkgb25seSB0aGUgb3B0aW9ucyB1bmRlcnN0b29kIGJ5IHRleHRpbnB1dFxyXG5cdFx0XHRmb3IgKCBpZHggaW4gJC5tb2JpbGUudGV4dGlucHV0LnByb3RvdHlwZS5vcHRpb25zICkge1xyXG5cdFx0XHRcdGlmICggb3B0aW9uc1sgaWR4IF0gIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0XHRcdGlmICggaWR4ID09PSBcInRoZW1lXCIgJiYgdGhpcy5vcHRpb25zLmZpbHRlclRoZW1lICE9IG51bGwgKSB7XHJcblx0XHRcdFx0XHRcdHRleHRpbnB1dE9wdGlvbnNbIGlkeCBdID0gdGhpcy5vcHRpb25zLmZpbHRlclRoZW1lO1xyXG5cdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0dGV4dGlucHV0T3B0aW9uc1sgaWR4IF0gPSBvcHRpb25zWyBpZHggXTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdFx0dGhpcy5fc2VhcmNoLnRleHRpbnB1dCggXCJvcHRpb25cIiwgdGV4dGlucHV0T3B0aW9ucyApO1xyXG5cdFx0fVxyXG5cdH1cclxufSk7XHJcblxyXG4vLyBJbnN0YW50aWF0ZSBhIGZpbHRlcmFibGUgb24gYSBsaXN0dmlldyB0aGF0IGhhcyB0aGUgZGF0YS1maWx0ZXI9XCJ0cnVlXCIgYXR0cmlidXRlXHJcbi8vIFRoaXMgaXMgbm90IG5lY2Vzc2FyeSBmb3Igc3RhdGljIGNvbnRlbnQsIGJlY2F1c2UgdGhlIGF1dG8tZW5oYW5jZSB0YWtlcyBjYXJlIG9mIGluc3RhbnRpYXRpbmdcclxuLy8gdGhlIGZpbHRlcmFibGUgdXBvbiBlbmNvdW50ZXJpbmcgZGF0YS1maWx0ZXI9XCJ0cnVlXCIuIEhvd2V2ZXIsIGJlY2F1c2Ugb2YgMS4zLnggaXQgaXMgZXhwZWN0ZWRcclxuLy8gdGhhdCBhIGxpc3R2aWV3IHdpdGggZGF0YS1maWx0ZXI9XCJ0cnVlXCIgd2lsbCBiZSBmaWx0ZXJhYmxlIGV2ZW4gaWYgeW91IGp1c3QgaW5zdGFudGlhdGUgYVxyXG4vLyBsaXN0dmlldyBvbiBpdC4gVGhlIGV4dGVuc2lvbiBiZWxvdyBlbnN1cmVzIHRoYXQgdGhpcyBjb250aW51ZXMgdG8gaGFwcGVuIGluIDEuNC54LlxyXG4kLndpZGdldCggXCJtb2JpbGUubGlzdHZpZXdcIiwgJC5tb2JpbGUubGlzdHZpZXcsIHtcclxuXHRvcHRpb25zOiB7XHJcblx0XHRmaWx0ZXI6IGZhbHNlXHJcblx0fSxcclxuXHRfY3JlYXRlOiBmdW5jdGlvbigpIHtcclxuXHRcdGlmICggdGhpcy5vcHRpb25zLmZpbHRlciA9PT0gdHJ1ZSAmJlxyXG5cdFx0XHRcdCF0aGlzLmVsZW1lbnQuZGF0YSggXCJtb2JpbGUtZmlsdGVyYWJsZVwiICkgKSB7XHJcblx0XHRcdHRoaXMuZWxlbWVudC5maWx0ZXJhYmxlKCk7XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gdGhpcy5fc3VwZXIoKTtcclxuXHR9LFxyXG5cclxuXHRyZWZyZXNoOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBmaWx0ZXJhYmxlO1xyXG5cclxuXHRcdHRoaXMuX3N1cGVyQXBwbHkoIGFyZ3VtZW50cyApO1xyXG5cclxuXHRcdGlmICggdGhpcy5vcHRpb25zLmZpbHRlciA9PT0gdHJ1ZSApIHtcclxuXHRcdFx0ZmlsdGVyYWJsZSA9IHRoaXMuZWxlbWVudC5kYXRhKCBcIm1vYmlsZS1maWx0ZXJhYmxlXCIgKTtcclxuXHJcblx0XHRcdGlmICggZmlsdGVyYWJsZSApIHtcclxuXHRcdFx0XHRmaWx0ZXJhYmxlLnJlZnJlc2goKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxufSk7XHJcblxyXG59KSggalF1ZXJ5ICk7XHJcblxyXG4vKiFcclxuICogalF1ZXJ5IFVJIFRhYnMgZmFkZjJiMzEyYTA1MDQwNDM2NDUxYzY0YmJmYWY0ODE0YmM2MmM1NlxyXG4gKiBodHRwOi8vanF1ZXJ5dWkuY29tXHJcbiAqXHJcbiAqIENvcHlyaWdodCAyMDEzIGpRdWVyeSBGb3VuZGF0aW9uIGFuZCBvdGhlciBjb250cmlidXRvcnNcclxuICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxyXG4gKiBodHRwOi8vanF1ZXJ5Lm9yZy9saWNlbnNlXHJcbiAqXHJcbiAqIGh0dHA6Ly9hcGkuanF1ZXJ5dWkuY29tL3RhYnMvXHJcbiAqXHJcbiAqIERlcGVuZHM6XHJcbiAqXHRqcXVlcnkudWkuY29yZS5qc1xyXG4gKlx0anF1ZXJ5LnVpLndpZGdldC5qc1xyXG4gKi9cclxuKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7XHJcblxyXG52YXIgdGFiSWQgPSAwLFxyXG5cdHJoYXNoID0gLyMuKiQvO1xyXG5cclxuZnVuY3Rpb24gZ2V0TmV4dFRhYklkKCkge1xyXG5cdHJldHVybiArK3RhYklkO1xyXG59XHJcblxyXG5mdW5jdGlvbiBpc0xvY2FsKCBhbmNob3IgKSB7XHJcblx0cmV0dXJuIGFuY2hvci5oYXNoLmxlbmd0aCA+IDEgJiZcclxuXHRcdGRlY29kZVVSSUNvbXBvbmVudCggYW5jaG9yLmhyZWYucmVwbGFjZSggcmhhc2gsIFwiXCIgKSApID09PVxyXG5cdFx0XHRkZWNvZGVVUklDb21wb25lbnQoIGxvY2F0aW9uLmhyZWYucmVwbGFjZSggcmhhc2gsIFwiXCIgKSApO1xyXG59XHJcblxyXG4kLndpZGdldCggXCJ1aS50YWJzXCIsIHtcclxuXHR2ZXJzaW9uOiBcImZhZGYyYjMxMmEwNTA0MDQzNjQ1MWM2NGJiZmFmNDgxNGJjNjJjNTZcIixcclxuXHRkZWxheTogMzAwLFxyXG5cdG9wdGlvbnM6IHtcclxuXHRcdGFjdGl2ZTogbnVsbCxcclxuXHRcdGNvbGxhcHNpYmxlOiBmYWxzZSxcclxuXHRcdGV2ZW50OiBcImNsaWNrXCIsXHJcblx0XHRoZWlnaHRTdHlsZTogXCJjb250ZW50XCIsXHJcblx0XHRoaWRlOiBudWxsLFxyXG5cdFx0c2hvdzogbnVsbCxcclxuXHJcblx0XHQvLyBjYWxsYmFja3NcclxuXHRcdGFjdGl2YXRlOiBudWxsLFxyXG5cdFx0YmVmb3JlQWN0aXZhdGU6IG51bGwsXHJcblx0XHRiZWZvcmVMb2FkOiBudWxsLFxyXG5cdFx0bG9hZDogbnVsbFxyXG5cdH0sXHJcblxyXG5cdF9jcmVhdGU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIHRoYXQgPSB0aGlzLFxyXG5cdFx0XHRvcHRpb25zID0gdGhpcy5vcHRpb25zO1xyXG5cclxuXHRcdHRoaXMucnVubmluZyA9IGZhbHNlO1xyXG5cclxuXHRcdHRoaXMuZWxlbWVudFxyXG5cdFx0XHQuYWRkQ2xhc3MoIFwidWktdGFicyB1aS13aWRnZXQgdWktd2lkZ2V0LWNvbnRlbnQgdWktY29ybmVyLWFsbFwiIClcclxuXHRcdFx0LnRvZ2dsZUNsYXNzKCBcInVpLXRhYnMtY29sbGFwc2libGVcIiwgb3B0aW9ucy5jb2xsYXBzaWJsZSApXHJcblx0XHRcdC8vIFByZXZlbnQgdXNlcnMgZnJvbSBmb2N1c2luZyBkaXNhYmxlZCB0YWJzIHZpYSBjbGlja1xyXG5cdFx0XHQuZGVsZWdhdGUoIFwiLnVpLXRhYnMtbmF2ID4gbGlcIiwgXCJtb3VzZWRvd25cIiArIHRoaXMuZXZlbnROYW1lc3BhY2UsIGZ1bmN0aW9uKCBldmVudCApIHtcclxuXHRcdFx0XHRpZiAoICQoIHRoaXMgKS5pcyggXCIudWktc3RhdGUtZGlzYWJsZWRcIiApICkge1xyXG5cdFx0XHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pXHJcblx0XHRcdC8vIHN1cHBvcnQ6IElFIDw5XHJcblx0XHRcdC8vIFByZXZlbnRpbmcgdGhlIGRlZmF1bHQgYWN0aW9uIGluIG1vdXNlZG93biBkb2Vzbid0IHByZXZlbnQgSUVcclxuXHRcdFx0Ly8gZnJvbSBmb2N1c2luZyB0aGUgZWxlbWVudCwgc28gaWYgdGhlIGFuY2hvciBnZXRzIGZvY3VzZWQsIGJsdXIuXHJcblx0XHRcdC8vIFdlIGRvbid0IGhhdmUgdG8gd29ycnkgYWJvdXQgZm9jdXNpbmcgdGhlIHByZXZpb3VzbHkgZm9jdXNlZFxyXG5cdFx0XHQvLyBlbGVtZW50IHNpbmNlIGNsaWNraW5nIG9uIGEgbm9uLWZvY3VzYWJsZSBlbGVtZW50IHNob3VsZCBmb2N1c1xyXG5cdFx0XHQvLyB0aGUgYm9keSBhbnl3YXkuXHJcblx0XHRcdC5kZWxlZ2F0ZSggXCIudWktdGFicy1hbmNob3JcIiwgXCJmb2N1c1wiICsgdGhpcy5ldmVudE5hbWVzcGFjZSwgZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0aWYgKCAkKCB0aGlzICkuY2xvc2VzdCggXCJsaVwiICkuaXMoIFwiLnVpLXN0YXRlLWRpc2FibGVkXCIgKSApIHtcclxuXHRcdFx0XHRcdHRoaXMuYmx1cigpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0dGhpcy5fcHJvY2Vzc1RhYnMoKTtcclxuXHRcdG9wdGlvbnMuYWN0aXZlID0gdGhpcy5faW5pdGlhbEFjdGl2ZSgpO1xyXG5cclxuXHRcdC8vIFRha2UgZGlzYWJsaW5nIHRhYnMgdmlhIGNsYXNzIGF0dHJpYnV0ZSBmcm9tIEhUTUxcclxuXHRcdC8vIGludG8gYWNjb3VudCBhbmQgdXBkYXRlIG9wdGlvbiBwcm9wZXJseS5cclxuXHRcdGlmICggJC5pc0FycmF5KCBvcHRpb25zLmRpc2FibGVkICkgKSB7XHJcblx0XHRcdG9wdGlvbnMuZGlzYWJsZWQgPSAkLnVuaXF1ZSggb3B0aW9ucy5kaXNhYmxlZC5jb25jYXQoXHJcblx0XHRcdFx0JC5tYXAoIHRoaXMudGFicy5maWx0ZXIoIFwiLnVpLXN0YXRlLWRpc2FibGVkXCIgKSwgZnVuY3Rpb24oIGxpICkge1xyXG5cdFx0XHRcdFx0cmV0dXJuIHRoYXQudGFicy5pbmRleCggbGkgKTtcclxuXHRcdFx0XHR9KVxyXG5cdFx0XHQpICkuc29ydCgpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIGNoZWNrIGZvciBsZW5ndGggYXZvaWRzIGVycm9yIHdoZW4gaW5pdGlhbGl6aW5nIGVtcHR5IGxpc3RcclxuXHRcdGlmICggdGhpcy5vcHRpb25zLmFjdGl2ZSAhPT0gZmFsc2UgJiYgdGhpcy5hbmNob3JzLmxlbmd0aCApIHtcclxuXHRcdFx0dGhpcy5hY3RpdmUgPSB0aGlzLl9maW5kQWN0aXZlKCBvcHRpb25zLmFjdGl2ZSApO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0dGhpcy5hY3RpdmUgPSAkKCk7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5fcmVmcmVzaCgpO1xyXG5cclxuXHRcdGlmICggdGhpcy5hY3RpdmUubGVuZ3RoICkge1xyXG5cdFx0XHR0aGlzLmxvYWQoIG9wdGlvbnMuYWN0aXZlICk7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X2luaXRpYWxBY3RpdmU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIGFjdGl2ZSA9IHRoaXMub3B0aW9ucy5hY3RpdmUsXHJcblx0XHRcdGNvbGxhcHNpYmxlID0gdGhpcy5vcHRpb25zLmNvbGxhcHNpYmxlLFxyXG5cdFx0XHRsb2NhdGlvbkhhc2ggPSBsb2NhdGlvbi5oYXNoLnN1YnN0cmluZyggMSApO1xyXG5cclxuXHRcdGlmICggYWN0aXZlID09PSBudWxsICkge1xyXG5cdFx0XHQvLyBjaGVjayB0aGUgZnJhZ21lbnQgaWRlbnRpZmllciBpbiB0aGUgVVJMXHJcblx0XHRcdGlmICggbG9jYXRpb25IYXNoICkge1xyXG5cdFx0XHRcdHRoaXMudGFicy5lYWNoKGZ1bmN0aW9uKCBpLCB0YWIgKSB7XHJcblx0XHRcdFx0XHRpZiAoICQoIHRhYiApLmF0dHIoIFwiYXJpYS1jb250cm9sc1wiICkgPT09IGxvY2F0aW9uSGFzaCApIHtcclxuXHRcdFx0XHRcdFx0YWN0aXZlID0gaTtcclxuXHRcdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBjaGVjayBmb3IgYSB0YWIgbWFya2VkIGFjdGl2ZSB2aWEgYSBjbGFzc1xyXG5cdFx0XHRpZiAoIGFjdGl2ZSA9PT0gbnVsbCApIHtcclxuXHRcdFx0XHRhY3RpdmUgPSB0aGlzLnRhYnMuaW5kZXgoIHRoaXMudGFicy5maWx0ZXIoIFwiLnVpLXRhYnMtYWN0aXZlXCIgKSApO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBubyBhY3RpdmUgdGFiLCBzZXQgdG8gZmFsc2VcclxuXHRcdFx0aWYgKCBhY3RpdmUgPT09IG51bGwgfHwgYWN0aXZlID09PSAtMSApIHtcclxuXHRcdFx0XHRhY3RpdmUgPSB0aGlzLnRhYnMubGVuZ3RoID8gMCA6IGZhbHNlO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gaGFuZGxlIG51bWJlcnM6IG5lZ2F0aXZlLCBvdXQgb2YgcmFuZ2VcclxuXHRcdGlmICggYWN0aXZlICE9PSBmYWxzZSApIHtcclxuXHRcdFx0YWN0aXZlID0gdGhpcy50YWJzLmluZGV4KCB0aGlzLnRhYnMuZXEoIGFjdGl2ZSApICk7XHJcblx0XHRcdGlmICggYWN0aXZlID09PSAtMSApIHtcclxuXHRcdFx0XHRhY3RpdmUgPSBjb2xsYXBzaWJsZSA/IGZhbHNlIDogMDtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdC8vIGRvbid0IGFsbG93IGNvbGxhcHNpYmxlOiBmYWxzZSBhbmQgYWN0aXZlOiBmYWxzZVxyXG5cdFx0aWYgKCAhY29sbGFwc2libGUgJiYgYWN0aXZlID09PSBmYWxzZSAmJiB0aGlzLmFuY2hvcnMubGVuZ3RoICkge1xyXG5cdFx0XHRhY3RpdmUgPSAwO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiBhY3RpdmU7XHJcblx0fSxcclxuXHJcblx0X2dldENyZWF0ZUV2ZW50RGF0YTogZnVuY3Rpb24oKSB7XHJcblx0XHRyZXR1cm4ge1xyXG5cdFx0XHR0YWI6IHRoaXMuYWN0aXZlLFxyXG5cdFx0XHRwYW5lbDogIXRoaXMuYWN0aXZlLmxlbmd0aCA/ICQoKSA6IHRoaXMuX2dldFBhbmVsRm9yVGFiKCB0aGlzLmFjdGl2ZSApXHJcblx0XHR9O1xyXG5cdH0sXHJcblxyXG5cdF90YWJLZXlkb3duOiBmdW5jdGlvbiggZXZlbnQgKSB7XHJcblx0XHR2YXIgZm9jdXNlZFRhYiA9ICQoIHRoaXMuZG9jdW1lbnRbMF0uYWN0aXZlRWxlbWVudCApLmNsb3Nlc3QoIFwibGlcIiApLFxyXG5cdFx0XHRzZWxlY3RlZEluZGV4ID0gdGhpcy50YWJzLmluZGV4KCBmb2N1c2VkVGFiICksXHJcblx0XHRcdGdvaW5nRm9yd2FyZCA9IHRydWU7XHJcblxyXG5cdFx0aWYgKCB0aGlzLl9oYW5kbGVQYWdlTmF2KCBldmVudCApICkge1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0c3dpdGNoICggZXZlbnQua2V5Q29kZSApIHtcclxuXHRcdFx0Y2FzZSAkLnVpLmtleUNvZGUuUklHSFQ6XHJcblx0XHRcdGNhc2UgJC51aS5rZXlDb2RlLkRPV046XHJcblx0XHRcdFx0c2VsZWN0ZWRJbmRleCsrO1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRjYXNlICQudWkua2V5Q29kZS5VUDpcclxuXHRcdFx0Y2FzZSAkLnVpLmtleUNvZGUuTEVGVDpcclxuXHRcdFx0XHRnb2luZ0ZvcndhcmQgPSBmYWxzZTtcclxuXHRcdFx0XHRzZWxlY3RlZEluZGV4LS07XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdGNhc2UgJC51aS5rZXlDb2RlLkVORDpcclxuXHRcdFx0XHRzZWxlY3RlZEluZGV4ID0gdGhpcy5hbmNob3JzLmxlbmd0aCAtIDE7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdGNhc2UgJC51aS5rZXlDb2RlLkhPTUU6XHJcblx0XHRcdFx0c2VsZWN0ZWRJbmRleCA9IDA7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdGNhc2UgJC51aS5rZXlDb2RlLlNQQUNFOlxyXG5cdFx0XHRcdC8vIEFjdGl2YXRlIG9ubHksIG5vIGNvbGxhcHNpbmdcclxuXHRcdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHRcdGNsZWFyVGltZW91dCggdGhpcy5hY3RpdmF0aW5nICk7XHJcblx0XHRcdFx0dGhpcy5fYWN0aXZhdGUoIHNlbGVjdGVkSW5kZXggKTtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdGNhc2UgJC51aS5rZXlDb2RlLkVOVEVSOlxyXG5cdFx0XHRcdC8vIFRvZ2dsZSAoY2FuY2VsIGRlbGF5ZWQgYWN0aXZhdGlvbiwgYWxsb3cgY29sbGFwc2luZylcclxuXHRcdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHRcdGNsZWFyVGltZW91dCggdGhpcy5hY3RpdmF0aW5nICk7XHJcblx0XHRcdFx0Ly8gRGV0ZXJtaW5lIGlmIHdlIHNob3VsZCBjb2xsYXBzZSBvciBhY3RpdmF0ZVxyXG5cdFx0XHRcdHRoaXMuX2FjdGl2YXRlKCBzZWxlY3RlZEluZGV4ID09PSB0aGlzLm9wdGlvbnMuYWN0aXZlID8gZmFsc2UgOiBzZWxlY3RlZEluZGV4ICk7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRkZWZhdWx0OlxyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBGb2N1cyB0aGUgYXBwcm9wcmlhdGUgdGFiLCBiYXNlZCBvbiB3aGljaCBrZXkgd2FzIHByZXNzZWRcclxuXHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRjbGVhclRpbWVvdXQoIHRoaXMuYWN0aXZhdGluZyApO1xyXG5cdFx0c2VsZWN0ZWRJbmRleCA9IHRoaXMuX2ZvY3VzTmV4dFRhYiggc2VsZWN0ZWRJbmRleCwgZ29pbmdGb3J3YXJkICk7XHJcblxyXG5cdFx0Ly8gTmF2aWdhdGluZyB3aXRoIGNvbnRyb2wga2V5IHdpbGwgcHJldmVudCBhdXRvbWF0aWMgYWN0aXZhdGlvblxyXG5cdFx0aWYgKCAhZXZlbnQuY3RybEtleSApIHtcclxuXHRcdFx0Ly8gVXBkYXRlIGFyaWEtc2VsZWN0ZWQgaW1tZWRpYXRlbHkgc28gdGhhdCBBVCB0aGluayB0aGUgdGFiIGlzIGFscmVhZHkgc2VsZWN0ZWQuXHJcblx0XHRcdC8vIE90aGVyd2lzZSBBVCBtYXkgY29uZnVzZSB0aGUgdXNlciBieSBzdGF0aW5nIHRoYXQgdGhleSBuZWVkIHRvIGFjdGl2YXRlIHRoZSB0YWIsXHJcblx0XHRcdC8vIGJ1dCB0aGUgdGFiIHdpbGwgYWxyZWFkeSBiZSBhY3RpdmF0ZWQgYnkgdGhlIHRpbWUgdGhlIGFubm91bmNlbWVudCBmaW5pc2hlcy5cclxuXHRcdFx0Zm9jdXNlZFRhYi5hdHRyKCBcImFyaWEtc2VsZWN0ZWRcIiwgXCJmYWxzZVwiICk7XHJcblx0XHRcdHRoaXMudGFicy5lcSggc2VsZWN0ZWRJbmRleCApLmF0dHIoIFwiYXJpYS1zZWxlY3RlZFwiLCBcInRydWVcIiApO1xyXG5cclxuXHRcdFx0dGhpcy5hY3RpdmF0aW5nID0gdGhpcy5fZGVsYXkoZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0dGhpcy5vcHRpb24oIFwiYWN0aXZlXCIsIHNlbGVjdGVkSW5kZXggKTtcclxuXHRcdFx0fSwgdGhpcy5kZWxheSApO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9wYW5lbEtleWRvd246IGZ1bmN0aW9uKCBldmVudCApIHtcclxuXHRcdGlmICggdGhpcy5faGFuZGxlUGFnZU5hdiggZXZlbnQgKSApIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIEN0cmwrdXAgbW92ZXMgZm9jdXMgdG8gdGhlIGN1cnJlbnQgdGFiXHJcblx0XHRpZiAoIGV2ZW50LmN0cmxLZXkgJiYgZXZlbnQua2V5Q29kZSA9PT0gJC51aS5rZXlDb2RlLlVQICkge1xyXG5cdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHR0aGlzLmFjdGl2ZS5mb2N1cygpO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdC8vIEFsdCtwYWdlIHVwL2Rvd24gbW92ZXMgZm9jdXMgdG8gdGhlIHByZXZpb3VzL25leHQgdGFiIChhbmQgYWN0aXZhdGVzKVxyXG5cdF9oYW5kbGVQYWdlTmF2OiBmdW5jdGlvbiggZXZlbnQgKSB7XHJcblx0XHRpZiAoIGV2ZW50LmFsdEtleSAmJiBldmVudC5rZXlDb2RlID09PSAkLnVpLmtleUNvZGUuUEFHRV9VUCApIHtcclxuXHRcdFx0dGhpcy5fYWN0aXZhdGUoIHRoaXMuX2ZvY3VzTmV4dFRhYiggdGhpcy5vcHRpb25zLmFjdGl2ZSAtIDEsIGZhbHNlICkgKTtcclxuXHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHR9XHJcblx0XHRpZiAoIGV2ZW50LmFsdEtleSAmJiBldmVudC5rZXlDb2RlID09PSAkLnVpLmtleUNvZGUuUEFHRV9ET1dOICkge1xyXG5cdFx0XHR0aGlzLl9hY3RpdmF0ZSggdGhpcy5fZm9jdXNOZXh0VGFiKCB0aGlzLm9wdGlvbnMuYWN0aXZlICsgMSwgdHJ1ZSApICk7XHJcblx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9maW5kTmV4dFRhYjogZnVuY3Rpb24oIGluZGV4LCBnb2luZ0ZvcndhcmQgKSB7XHJcblx0XHR2YXIgbGFzdFRhYkluZGV4ID0gdGhpcy50YWJzLmxlbmd0aCAtIDE7XHJcblxyXG5cdFx0ZnVuY3Rpb24gY29uc3RyYWluKCkge1xyXG5cdFx0XHRpZiAoIGluZGV4ID4gbGFzdFRhYkluZGV4ICkge1xyXG5cdFx0XHRcdGluZGV4ID0gMDtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAoIGluZGV4IDwgMCApIHtcclxuXHRcdFx0XHRpbmRleCA9IGxhc3RUYWJJbmRleDtcclxuXHRcdFx0fVxyXG5cdFx0XHRyZXR1cm4gaW5kZXg7XHJcblx0XHR9XHJcblxyXG5cdFx0d2hpbGUgKCAkLmluQXJyYXkoIGNvbnN0cmFpbigpLCB0aGlzLm9wdGlvbnMuZGlzYWJsZWQgKSAhPT0gLTEgKSB7XHJcblx0XHRcdGluZGV4ID0gZ29pbmdGb3J3YXJkID8gaW5kZXggKyAxIDogaW5kZXggLSAxO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiBpbmRleDtcclxuXHR9LFxyXG5cclxuXHRfZm9jdXNOZXh0VGFiOiBmdW5jdGlvbiggaW5kZXgsIGdvaW5nRm9yd2FyZCApIHtcclxuXHRcdGluZGV4ID0gdGhpcy5fZmluZE5leHRUYWIoIGluZGV4LCBnb2luZ0ZvcndhcmQgKTtcclxuXHRcdHRoaXMudGFicy5lcSggaW5kZXggKS5mb2N1cygpO1xyXG5cdFx0cmV0dXJuIGluZGV4O1xyXG5cdH0sXHJcblxyXG5cdF9zZXRPcHRpb246IGZ1bmN0aW9uKCBrZXksIHZhbHVlICkge1xyXG5cdFx0aWYgKCBrZXkgPT09IFwiYWN0aXZlXCIgKSB7XHJcblx0XHRcdC8vIF9hY3RpdmF0ZSgpIHdpbGwgaGFuZGxlIGludmFsaWQgdmFsdWVzIGFuZCB1cGRhdGUgdGhpcy5vcHRpb25zXHJcblx0XHRcdHRoaXMuX2FjdGl2YXRlKCB2YWx1ZSApO1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBrZXkgPT09IFwiZGlzYWJsZWRcIiApIHtcclxuXHRcdFx0Ly8gZG9uJ3QgdXNlIHRoZSB3aWRnZXQgZmFjdG9yeSdzIGRpc2FibGVkIGhhbmRsaW5nXHJcblx0XHRcdHRoaXMuX3NldHVwRGlzYWJsZWQoIHZhbHVlICk7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLl9zdXBlcigga2V5LCB2YWx1ZSk7XHJcblxyXG5cdFx0aWYgKCBrZXkgPT09IFwiY29sbGFwc2libGVcIiApIHtcclxuXHRcdFx0dGhpcy5lbGVtZW50LnRvZ2dsZUNsYXNzKCBcInVpLXRhYnMtY29sbGFwc2libGVcIiwgdmFsdWUgKTtcclxuXHRcdFx0Ly8gU2V0dGluZyBjb2xsYXBzaWJsZTogZmFsc2Ugd2hpbGUgY29sbGFwc2VkOyBvcGVuIGZpcnN0IHBhbmVsXHJcblx0XHRcdGlmICggIXZhbHVlICYmIHRoaXMub3B0aW9ucy5hY3RpdmUgPT09IGZhbHNlICkge1xyXG5cdFx0XHRcdHRoaXMuX2FjdGl2YXRlKCAwICk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIGtleSA9PT0gXCJldmVudFwiICkge1xyXG5cdFx0XHR0aGlzLl9zZXR1cEV2ZW50cyggdmFsdWUgKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIGtleSA9PT0gXCJoZWlnaHRTdHlsZVwiICkge1xyXG5cdFx0XHR0aGlzLl9zZXR1cEhlaWdodFN0eWxlKCB2YWx1ZSApO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF90YWJJZDogZnVuY3Rpb24oIHRhYiApIHtcclxuXHRcdHJldHVybiB0YWIuYXR0ciggXCJhcmlhLWNvbnRyb2xzXCIgKSB8fCBcInVpLXRhYnMtXCIgKyBnZXROZXh0VGFiSWQoKTtcclxuXHR9LFxyXG5cclxuXHRfc2FuaXRpemVTZWxlY3RvcjogZnVuY3Rpb24oIGhhc2ggKSB7XHJcblx0XHRyZXR1cm4gaGFzaCA/IGhhc2gucmVwbGFjZSggL1shXCIkJSYnKCkqKywuXFwvOjs8PT4/QFxcW1xcXVxcXmB7fH1+XS9nLCBcIlxcXFwkJlwiICkgOiBcIlwiO1xyXG5cdH0sXHJcblxyXG5cdHJlZnJlc2g6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIG9wdGlvbnMgPSB0aGlzLm9wdGlvbnMsXHJcblx0XHRcdGxpcyA9IHRoaXMudGFibGlzdC5jaGlsZHJlbiggXCI6aGFzKGFbaHJlZl0pXCIgKTtcclxuXHJcblx0XHQvLyBnZXQgZGlzYWJsZWQgdGFicyBmcm9tIGNsYXNzIGF0dHJpYnV0ZSBmcm9tIEhUTUxcclxuXHRcdC8vIHRoaXMgd2lsbCBnZXQgY29udmVydGVkIHRvIGEgYm9vbGVhbiBpZiBuZWVkZWQgaW4gX3JlZnJlc2goKVxyXG5cdFx0b3B0aW9ucy5kaXNhYmxlZCA9ICQubWFwKCBsaXMuZmlsdGVyKCBcIi51aS1zdGF0ZS1kaXNhYmxlZFwiICksIGZ1bmN0aW9uKCB0YWIgKSB7XHJcblx0XHRcdHJldHVybiBsaXMuaW5kZXgoIHRhYiApO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0dGhpcy5fcHJvY2Vzc1RhYnMoKTtcclxuXHJcblx0XHQvLyB3YXMgY29sbGFwc2VkIG9yIG5vIHRhYnNcclxuXHRcdGlmICggb3B0aW9ucy5hY3RpdmUgPT09IGZhbHNlIHx8ICF0aGlzLmFuY2hvcnMubGVuZ3RoICkge1xyXG5cdFx0XHRvcHRpb25zLmFjdGl2ZSA9IGZhbHNlO1xyXG5cdFx0XHR0aGlzLmFjdGl2ZSA9ICQoKTtcclxuXHRcdC8vIHdhcyBhY3RpdmUsIGJ1dCBhY3RpdmUgdGFiIGlzIGdvbmVcclxuXHRcdH0gZWxzZSBpZiAoIHRoaXMuYWN0aXZlLmxlbmd0aCAmJiAhJC5jb250YWlucyggdGhpcy50YWJsaXN0WyAwIF0sIHRoaXMuYWN0aXZlWyAwIF0gKSApIHtcclxuXHRcdFx0Ly8gYWxsIHJlbWFpbmluZyB0YWJzIGFyZSBkaXNhYmxlZFxyXG5cdFx0XHRpZiAoIHRoaXMudGFicy5sZW5ndGggPT09IG9wdGlvbnMuZGlzYWJsZWQubGVuZ3RoICkge1xyXG5cdFx0XHRcdG9wdGlvbnMuYWN0aXZlID0gZmFsc2U7XHJcblx0XHRcdFx0dGhpcy5hY3RpdmUgPSAkKCk7XHJcblx0XHRcdC8vIGFjdGl2YXRlIHByZXZpb3VzIHRhYlxyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdHRoaXMuX2FjdGl2YXRlKCB0aGlzLl9maW5kTmV4dFRhYiggTWF0aC5tYXgoIDAsIG9wdGlvbnMuYWN0aXZlIC0gMSApLCBmYWxzZSApICk7XHJcblx0XHRcdH1cclxuXHRcdC8vIHdhcyBhY3RpdmUsIGFjdGl2ZSB0YWIgc3RpbGwgZXhpc3RzXHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHQvLyBtYWtlIHN1cmUgYWN0aXZlIGluZGV4IGlzIGNvcnJlY3RcclxuXHRcdFx0b3B0aW9ucy5hY3RpdmUgPSB0aGlzLnRhYnMuaW5kZXgoIHRoaXMuYWN0aXZlICk7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5fcmVmcmVzaCgpO1xyXG5cdH0sXHJcblxyXG5cdF9yZWZyZXNoOiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuX3NldHVwRGlzYWJsZWQoIHRoaXMub3B0aW9ucy5kaXNhYmxlZCApO1xyXG5cdFx0dGhpcy5fc2V0dXBFdmVudHMoIHRoaXMub3B0aW9ucy5ldmVudCApO1xyXG5cdFx0dGhpcy5fc2V0dXBIZWlnaHRTdHlsZSggdGhpcy5vcHRpb25zLmhlaWdodFN0eWxlICk7XHJcblxyXG5cdFx0dGhpcy50YWJzLm5vdCggdGhpcy5hY3RpdmUgKS5hdHRyKHtcclxuXHRcdFx0XCJhcmlhLXNlbGVjdGVkXCI6IFwiZmFsc2VcIixcclxuXHRcdFx0dGFiSW5kZXg6IC0xXHJcblx0XHR9KTtcclxuXHRcdHRoaXMucGFuZWxzLm5vdCggdGhpcy5fZ2V0UGFuZWxGb3JUYWIoIHRoaXMuYWN0aXZlICkgKVxyXG5cdFx0XHQuaGlkZSgpXHJcblx0XHRcdC5hdHRyKHtcclxuXHRcdFx0XHRcImFyaWEtZXhwYW5kZWRcIjogXCJmYWxzZVwiLFxyXG5cdFx0XHRcdFwiYXJpYS1oaWRkZW5cIjogXCJ0cnVlXCJcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0Ly8gTWFrZSBzdXJlIG9uZSB0YWIgaXMgaW4gdGhlIHRhYiBvcmRlclxyXG5cdFx0aWYgKCAhdGhpcy5hY3RpdmUubGVuZ3RoICkge1xyXG5cdFx0XHR0aGlzLnRhYnMuZXEoIDAgKS5hdHRyKCBcInRhYkluZGV4XCIsIDAgKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHRoaXMuYWN0aXZlXHJcblx0XHRcdFx0LmFkZENsYXNzKCBcInVpLXRhYnMtYWN0aXZlIHVpLXN0YXRlLWFjdGl2ZVwiIClcclxuXHRcdFx0XHQuYXR0cih7XHJcblx0XHRcdFx0XHRcImFyaWEtc2VsZWN0ZWRcIjogXCJ0cnVlXCIsXHJcblx0XHRcdFx0XHR0YWJJbmRleDogMFxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR0aGlzLl9nZXRQYW5lbEZvclRhYiggdGhpcy5hY3RpdmUgKVxyXG5cdFx0XHRcdC5zaG93KClcclxuXHRcdFx0XHQuYXR0cih7XHJcblx0XHRcdFx0XHRcImFyaWEtZXhwYW5kZWRcIjogXCJ0cnVlXCIsXHJcblx0XHRcdFx0XHRcImFyaWEtaGlkZGVuXCI6IFwiZmFsc2VcIlxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9wcm9jZXNzVGFiczogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgdGhhdCA9IHRoaXM7XHJcblxyXG5cdFx0dGhpcy50YWJsaXN0ID0gdGhpcy5fZ2V0TGlzdCgpXHJcblx0XHRcdC5hZGRDbGFzcyggXCJ1aS10YWJzLW5hdiB1aS1oZWxwZXItcmVzZXQgdWktaGVscGVyLWNsZWFyZml4IHVpLXdpZGdldC1oZWFkZXIgdWktY29ybmVyLWFsbFwiIClcclxuXHRcdFx0LmF0dHIoIFwicm9sZVwiLCBcInRhYmxpc3RcIiApO1xyXG5cclxuXHRcdHRoaXMudGFicyA9IHRoaXMudGFibGlzdC5maW5kKCBcIj4gbGk6aGFzKGFbaHJlZl0pXCIgKVxyXG5cdFx0XHQuYWRkQ2xhc3MoIFwidWktc3RhdGUtZGVmYXVsdCB1aS1jb3JuZXItdG9wXCIgKVxyXG5cdFx0XHQuYXR0cih7XHJcblx0XHRcdFx0cm9sZTogXCJ0YWJcIixcclxuXHRcdFx0XHR0YWJJbmRleDogLTFcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0dGhpcy5hbmNob3JzID0gdGhpcy50YWJzLm1hcChmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRyZXR1cm4gJCggXCJhXCIsIHRoaXMgKVsgMCBdO1xyXG5cdFx0XHR9KVxyXG5cdFx0XHQuYWRkQ2xhc3MoIFwidWktdGFicy1hbmNob3JcIiApXHJcblx0XHRcdC5hdHRyKHtcclxuXHRcdFx0XHRyb2xlOiBcInByZXNlbnRhdGlvblwiLFxyXG5cdFx0XHRcdHRhYkluZGV4OiAtMVxyXG5cdFx0XHR9KTtcclxuXHJcblx0XHR0aGlzLnBhbmVscyA9ICQoKTtcclxuXHJcblx0XHR0aGlzLmFuY2hvcnMuZWFjaChmdW5jdGlvbiggaSwgYW5jaG9yICkge1xyXG5cdFx0XHR2YXIgc2VsZWN0b3IsIHBhbmVsLCBwYW5lbElkLFxyXG5cdFx0XHRcdGFuY2hvcklkID0gJCggYW5jaG9yICkudW5pcXVlSWQoKS5hdHRyKCBcImlkXCIgKSxcclxuXHRcdFx0XHR0YWIgPSAkKCBhbmNob3IgKS5jbG9zZXN0KCBcImxpXCIgKSxcclxuXHRcdFx0XHRvcmlnaW5hbEFyaWFDb250cm9scyA9IHRhYi5hdHRyKCBcImFyaWEtY29udHJvbHNcIiApO1xyXG5cclxuXHRcdFx0Ly8gaW5saW5lIHRhYlxyXG5cdFx0XHRpZiAoIGlzTG9jYWwoIGFuY2hvciApICkge1xyXG5cdFx0XHRcdHNlbGVjdG9yID0gYW5jaG9yLmhhc2g7XHJcblx0XHRcdFx0cGFuZWwgPSB0aGF0LmVsZW1lbnQuZmluZCggdGhhdC5fc2FuaXRpemVTZWxlY3Rvciggc2VsZWN0b3IgKSApO1xyXG5cdFx0XHQvLyByZW1vdGUgdGFiXHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0cGFuZWxJZCA9IHRoYXQuX3RhYklkKCB0YWIgKTtcclxuXHRcdFx0XHRzZWxlY3RvciA9IFwiI1wiICsgcGFuZWxJZDtcclxuXHRcdFx0XHRwYW5lbCA9IHRoYXQuZWxlbWVudC5maW5kKCBzZWxlY3RvciApO1xyXG5cdFx0XHRcdGlmICggIXBhbmVsLmxlbmd0aCApIHtcclxuXHRcdFx0XHRcdHBhbmVsID0gdGhhdC5fY3JlYXRlUGFuZWwoIHBhbmVsSWQgKTtcclxuXHRcdFx0XHRcdHBhbmVsLmluc2VydEFmdGVyKCB0aGF0LnBhbmVsc1sgaSAtIDEgXSB8fCB0aGF0LnRhYmxpc3QgKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0cGFuZWwuYXR0ciggXCJhcmlhLWxpdmVcIiwgXCJwb2xpdGVcIiApO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpZiAoIHBhbmVsLmxlbmd0aCkge1xyXG5cdFx0XHRcdHRoYXQucGFuZWxzID0gdGhhdC5wYW5lbHMuYWRkKCBwYW5lbCApO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmICggb3JpZ2luYWxBcmlhQ29udHJvbHMgKSB7XHJcblx0XHRcdFx0dGFiLmRhdGEoIFwidWktdGFicy1hcmlhLWNvbnRyb2xzXCIsIG9yaWdpbmFsQXJpYUNvbnRyb2xzICk7XHJcblx0XHRcdH1cclxuXHRcdFx0dGFiLmF0dHIoe1xyXG5cdFx0XHRcdFwiYXJpYS1jb250cm9sc1wiOiBzZWxlY3Rvci5zdWJzdHJpbmcoIDEgKSxcclxuXHRcdFx0XHRcImFyaWEtbGFiZWxsZWRieVwiOiBhbmNob3JJZFxyXG5cdFx0XHR9KTtcclxuXHRcdFx0cGFuZWwuYXR0ciggXCJhcmlhLWxhYmVsbGVkYnlcIiwgYW5jaG9ySWQgKTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdHRoaXMucGFuZWxzXHJcblx0XHRcdC5hZGRDbGFzcyggXCJ1aS10YWJzLXBhbmVsIHVpLXdpZGdldC1jb250ZW50IHVpLWNvcm5lci1ib3R0b21cIiApXHJcblx0XHRcdC5hdHRyKCBcInJvbGVcIiwgXCJ0YWJwYW5lbFwiICk7XHJcblx0fSxcclxuXHJcblx0Ly8gYWxsb3cgb3ZlcnJpZGluZyBob3cgdG8gZmluZCB0aGUgbGlzdCBmb3IgcmFyZSB1c2FnZSBzY2VuYXJpb3MgKCM3NzE1KVxyXG5cdF9nZXRMaXN0OiBmdW5jdGlvbigpIHtcclxuXHRcdHJldHVybiB0aGlzLmVsZW1lbnQuZmluZCggXCJvbCx1bFwiICkuZXEoIDAgKTtcclxuXHR9LFxyXG5cclxuXHRfY3JlYXRlUGFuZWw6IGZ1bmN0aW9uKCBpZCApIHtcclxuXHRcdHJldHVybiAkKCBcIjxkaXY+XCIgKVxyXG5cdFx0XHQuYXR0ciggXCJpZFwiLCBpZCApXHJcblx0XHRcdC5hZGRDbGFzcyggXCJ1aS10YWJzLXBhbmVsIHVpLXdpZGdldC1jb250ZW50IHVpLWNvcm5lci1ib3R0b21cIiApXHJcblx0XHRcdC5kYXRhKCBcInVpLXRhYnMtZGVzdHJveVwiLCB0cnVlICk7XHJcblx0fSxcclxuXHJcblx0X3NldHVwRGlzYWJsZWQ6IGZ1bmN0aW9uKCBkaXNhYmxlZCApIHtcclxuXHRcdGlmICggJC5pc0FycmF5KCBkaXNhYmxlZCApICkge1xyXG5cdFx0XHRpZiAoICFkaXNhYmxlZC5sZW5ndGggKSB7XHJcblx0XHRcdFx0ZGlzYWJsZWQgPSBmYWxzZTtcclxuXHRcdFx0fSBlbHNlIGlmICggZGlzYWJsZWQubGVuZ3RoID09PSB0aGlzLmFuY2hvcnMubGVuZ3RoICkge1xyXG5cdFx0XHRcdGRpc2FibGVkID0gdHJ1ZTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdC8vIGRpc2FibGUgdGFic1xyXG5cdFx0Zm9yICggdmFyIGkgPSAwLCBsaTsgKCBsaSA9IHRoaXMudGFic1sgaSBdICk7IGkrKyApIHtcclxuXHRcdFx0aWYgKCBkaXNhYmxlZCA9PT0gdHJ1ZSB8fCAkLmluQXJyYXkoIGksIGRpc2FibGVkICkgIT09IC0xICkge1xyXG5cdFx0XHRcdCQoIGxpIClcclxuXHRcdFx0XHRcdC5hZGRDbGFzcyggXCJ1aS1zdGF0ZS1kaXNhYmxlZFwiIClcclxuXHRcdFx0XHRcdC5hdHRyKCBcImFyaWEtZGlzYWJsZWRcIiwgXCJ0cnVlXCIgKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHQkKCBsaSApXHJcblx0XHRcdFx0XHQucmVtb3ZlQ2xhc3MoIFwidWktc3RhdGUtZGlzYWJsZWRcIiApXHJcblx0XHRcdFx0XHQucmVtb3ZlQXR0ciggXCJhcmlhLWRpc2FibGVkXCIgKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMub3B0aW9ucy5kaXNhYmxlZCA9IGRpc2FibGVkO1xyXG5cdH0sXHJcblxyXG5cdF9zZXR1cEV2ZW50czogZnVuY3Rpb24oIGV2ZW50ICkge1xyXG5cdFx0dmFyIGV2ZW50cyA9IHtcclxuXHRcdFx0Y2xpY2s6IGZ1bmN0aW9uKCBldmVudCApIHtcclxuXHRcdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHR9XHJcblx0XHR9O1xyXG5cdFx0aWYgKCBldmVudCApIHtcclxuXHRcdFx0JC5lYWNoKCBldmVudC5zcGxpdChcIiBcIiksIGZ1bmN0aW9uKCBpbmRleCwgZXZlbnROYW1lICkge1xyXG5cdFx0XHRcdGV2ZW50c1sgZXZlbnROYW1lIF0gPSBcIl9ldmVudEhhbmRsZXJcIjtcclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5fb2ZmKCB0aGlzLmFuY2hvcnMuYWRkKCB0aGlzLnRhYnMgKS5hZGQoIHRoaXMucGFuZWxzICkgKTtcclxuXHRcdHRoaXMuX29uKCB0aGlzLmFuY2hvcnMsIGV2ZW50cyApO1xyXG5cdFx0dGhpcy5fb24oIHRoaXMudGFicywgeyBrZXlkb3duOiBcIl90YWJLZXlkb3duXCIgfSApO1xyXG5cdFx0dGhpcy5fb24oIHRoaXMucGFuZWxzLCB7IGtleWRvd246IFwiX3BhbmVsS2V5ZG93blwiIH0gKTtcclxuXHJcblx0XHR0aGlzLl9mb2N1c2FibGUoIHRoaXMudGFicyApO1xyXG5cdFx0dGhpcy5faG92ZXJhYmxlKCB0aGlzLnRhYnMgKTtcclxuXHR9LFxyXG5cclxuXHRfc2V0dXBIZWlnaHRTdHlsZTogZnVuY3Rpb24oIGhlaWdodFN0eWxlICkge1xyXG5cdFx0dmFyIG1heEhlaWdodCxcclxuXHRcdFx0cGFyZW50ID0gdGhpcy5lbGVtZW50LnBhcmVudCgpO1xyXG5cclxuXHRcdGlmICggaGVpZ2h0U3R5bGUgPT09IFwiZmlsbFwiICkge1xyXG5cdFx0XHRtYXhIZWlnaHQgPSBwYXJlbnQuaGVpZ2h0KCk7XHJcblx0XHRcdG1heEhlaWdodCAtPSB0aGlzLmVsZW1lbnQub3V0ZXJIZWlnaHQoKSAtIHRoaXMuZWxlbWVudC5oZWlnaHQoKTtcclxuXHJcblx0XHRcdHRoaXMuZWxlbWVudC5zaWJsaW5ncyggXCI6dmlzaWJsZVwiICkuZWFjaChmdW5jdGlvbigpIHtcclxuXHRcdFx0XHR2YXIgZWxlbSA9ICQoIHRoaXMgKSxcclxuXHRcdFx0XHRcdHBvc2l0aW9uID0gZWxlbS5jc3MoIFwicG9zaXRpb25cIiApO1xyXG5cclxuXHRcdFx0XHRpZiAoIHBvc2l0aW9uID09PSBcImFic29sdXRlXCIgfHwgcG9zaXRpb24gPT09IFwiZml4ZWRcIiApIHtcclxuXHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0bWF4SGVpZ2h0IC09IGVsZW0ub3V0ZXJIZWlnaHQoIHRydWUgKTtcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHR0aGlzLmVsZW1lbnQuY2hpbGRyZW4oKS5ub3QoIHRoaXMucGFuZWxzICkuZWFjaChmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRtYXhIZWlnaHQgLT0gJCggdGhpcyApLm91dGVySGVpZ2h0KCB0cnVlICk7XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0dGhpcy5wYW5lbHMuZWFjaChmdW5jdGlvbigpIHtcclxuXHRcdFx0XHQkKCB0aGlzICkuaGVpZ2h0KCBNYXRoLm1heCggMCwgbWF4SGVpZ2h0IC1cclxuXHRcdFx0XHRcdCQoIHRoaXMgKS5pbm5lckhlaWdodCgpICsgJCggdGhpcyApLmhlaWdodCgpICkgKTtcclxuXHRcdFx0fSlcclxuXHRcdFx0LmNzcyggXCJvdmVyZmxvd1wiLCBcImF1dG9cIiApO1xyXG5cdFx0fSBlbHNlIGlmICggaGVpZ2h0U3R5bGUgPT09IFwiYXV0b1wiICkge1xyXG5cdFx0XHRtYXhIZWlnaHQgPSAwO1xyXG5cdFx0XHR0aGlzLnBhbmVscy5lYWNoKGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdG1heEhlaWdodCA9IE1hdGgubWF4KCBtYXhIZWlnaHQsICQoIHRoaXMgKS5oZWlnaHQoIFwiXCIgKS5oZWlnaHQoKSApO1xyXG5cdFx0XHR9KS5oZWlnaHQoIG1heEhlaWdodCApO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9ldmVudEhhbmRsZXI6IGZ1bmN0aW9uKCBldmVudCApIHtcclxuXHRcdHZhciBvcHRpb25zID0gdGhpcy5vcHRpb25zLFxyXG5cdFx0XHRhY3RpdmUgPSB0aGlzLmFjdGl2ZSxcclxuXHRcdFx0YW5jaG9yID0gJCggZXZlbnQuY3VycmVudFRhcmdldCApLFxyXG5cdFx0XHR0YWIgPSBhbmNob3IuY2xvc2VzdCggXCJsaVwiICksXHJcblx0XHRcdGNsaWNrZWRJc0FjdGl2ZSA9IHRhYlsgMCBdID09PSBhY3RpdmVbIDAgXSxcclxuXHRcdFx0Y29sbGFwc2luZyA9IGNsaWNrZWRJc0FjdGl2ZSAmJiBvcHRpb25zLmNvbGxhcHNpYmxlLFxyXG5cdFx0XHR0b1Nob3cgPSBjb2xsYXBzaW5nID8gJCgpIDogdGhpcy5fZ2V0UGFuZWxGb3JUYWIoIHRhYiApLFxyXG5cdFx0XHR0b0hpZGUgPSAhYWN0aXZlLmxlbmd0aCA/ICQoKSA6IHRoaXMuX2dldFBhbmVsRm9yVGFiKCBhY3RpdmUgKSxcclxuXHRcdFx0ZXZlbnREYXRhID0ge1xyXG5cdFx0XHRcdG9sZFRhYjogYWN0aXZlLFxyXG5cdFx0XHRcdG9sZFBhbmVsOiB0b0hpZGUsXHJcblx0XHRcdFx0bmV3VGFiOiBjb2xsYXBzaW5nID8gJCgpIDogdGFiLFxyXG5cdFx0XHRcdG5ld1BhbmVsOiB0b1Nob3dcclxuXHRcdFx0fTtcclxuXHJcblx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuXHRcdGlmICggdGFiLmhhc0NsYXNzKCBcInVpLXN0YXRlLWRpc2FibGVkXCIgKSB8fFxyXG5cdFx0XHRcdC8vIHRhYiBpcyBhbHJlYWR5IGxvYWRpbmdcclxuXHRcdFx0XHR0YWIuaGFzQ2xhc3MoIFwidWktdGFicy1sb2FkaW5nXCIgKSB8fFxyXG5cdFx0XHRcdC8vIGNhbid0IHN3aXRjaCBkdXJuaW5nIGFuIGFuaW1hdGlvblxyXG5cdFx0XHRcdHRoaXMucnVubmluZyB8fFxyXG5cdFx0XHRcdC8vIGNsaWNrIG9uIGFjdGl2ZSBoZWFkZXIsIGJ1dCBub3QgY29sbGFwc2libGVcclxuXHRcdFx0XHQoIGNsaWNrZWRJc0FjdGl2ZSAmJiAhb3B0aW9ucy5jb2xsYXBzaWJsZSApIHx8XHJcblx0XHRcdFx0Ly8gYWxsb3cgY2FuY2VsaW5nIGFjdGl2YXRpb25cclxuXHRcdFx0XHQoIHRoaXMuX3RyaWdnZXIoIFwiYmVmb3JlQWN0aXZhdGVcIiwgZXZlbnQsIGV2ZW50RGF0YSApID09PSBmYWxzZSApICkge1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0b3B0aW9ucy5hY3RpdmUgPSBjb2xsYXBzaW5nID8gZmFsc2UgOiB0aGlzLnRhYnMuaW5kZXgoIHRhYiApO1xyXG5cclxuXHRcdHRoaXMuYWN0aXZlID0gY2xpY2tlZElzQWN0aXZlID8gJCgpIDogdGFiO1xyXG5cdFx0aWYgKCB0aGlzLnhociApIHtcclxuXHRcdFx0dGhpcy54aHIuYWJvcnQoKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoICF0b0hpZGUubGVuZ3RoICYmICF0b1Nob3cubGVuZ3RoICkge1xyXG5cdFx0XHQkLmVycm9yKCBcImpRdWVyeSBVSSBUYWJzOiBNaXNtYXRjaGluZyBmcmFnbWVudCBpZGVudGlmaWVyLlwiICk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCB0b1Nob3cubGVuZ3RoICkge1xyXG5cdFx0XHR0aGlzLmxvYWQoIHRoaXMudGFicy5pbmRleCggdGFiICksIGV2ZW50ICk7XHJcblx0XHR9XHJcblx0XHR0aGlzLl90b2dnbGUoIGV2ZW50LCBldmVudERhdGEgKTtcclxuXHR9LFxyXG5cclxuXHQvLyBoYW5kbGVzIHNob3cvaGlkZSBmb3Igc2VsZWN0aW5nIHRhYnNcclxuXHRfdG9nZ2xlOiBmdW5jdGlvbiggZXZlbnQsIGV2ZW50RGF0YSApIHtcclxuXHRcdHZhciB0aGF0ID0gdGhpcyxcclxuXHRcdFx0dG9TaG93ID0gZXZlbnREYXRhLm5ld1BhbmVsLFxyXG5cdFx0XHR0b0hpZGUgPSBldmVudERhdGEub2xkUGFuZWw7XHJcblxyXG5cdFx0dGhpcy5ydW5uaW5nID0gdHJ1ZTtcclxuXHJcblx0XHRmdW5jdGlvbiBjb21wbGV0ZSgpIHtcclxuXHRcdFx0dGhhdC5ydW5uaW5nID0gZmFsc2U7XHJcblx0XHRcdHRoYXQuX3RyaWdnZXIoIFwiYWN0aXZhdGVcIiwgZXZlbnQsIGV2ZW50RGF0YSApO1xyXG5cdFx0fVxyXG5cclxuXHRcdGZ1bmN0aW9uIHNob3coKSB7XHJcblx0XHRcdGV2ZW50RGF0YS5uZXdUYWIuY2xvc2VzdCggXCJsaVwiICkuYWRkQ2xhc3MoIFwidWktdGFicy1hY3RpdmUgdWktc3RhdGUtYWN0aXZlXCIgKTtcclxuXHJcblx0XHRcdGlmICggdG9TaG93Lmxlbmd0aCAmJiB0aGF0Lm9wdGlvbnMuc2hvdyApIHtcclxuXHRcdFx0XHR0aGF0Ll9zaG93KCB0b1Nob3csIHRoYXQub3B0aW9ucy5zaG93LCBjb21wbGV0ZSApO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdHRvU2hvdy5zaG93KCk7XHJcblx0XHRcdFx0Y29tcGxldGUoKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdC8vIHN0YXJ0IG91dCBieSBoaWRpbmcsIHRoZW4gc2hvd2luZywgdGhlbiBjb21wbGV0aW5nXHJcblx0XHRpZiAoIHRvSGlkZS5sZW5ndGggJiYgdGhpcy5vcHRpb25zLmhpZGUgKSB7XHJcblx0XHRcdHRoaXMuX2hpZGUoIHRvSGlkZSwgdGhpcy5vcHRpb25zLmhpZGUsIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdGV2ZW50RGF0YS5vbGRUYWIuY2xvc2VzdCggXCJsaVwiICkucmVtb3ZlQ2xhc3MoIFwidWktdGFicy1hY3RpdmUgdWktc3RhdGUtYWN0aXZlXCIgKTtcclxuXHRcdFx0XHRzaG93KCk7XHJcblx0XHRcdH0pO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0ZXZlbnREYXRhLm9sZFRhYi5jbG9zZXN0KCBcImxpXCIgKS5yZW1vdmVDbGFzcyggXCJ1aS10YWJzLWFjdGl2ZSB1aS1zdGF0ZS1hY3RpdmVcIiApO1xyXG5cdFx0XHR0b0hpZGUuaGlkZSgpO1xyXG5cdFx0XHRzaG93KCk7XHJcblx0XHR9XHJcblxyXG5cdFx0dG9IaWRlLmF0dHIoe1xyXG5cdFx0XHRcImFyaWEtZXhwYW5kZWRcIjogXCJmYWxzZVwiLFxyXG5cdFx0XHRcImFyaWEtaGlkZGVuXCI6IFwidHJ1ZVwiXHJcblx0XHR9KTtcclxuXHRcdGV2ZW50RGF0YS5vbGRUYWIuYXR0ciggXCJhcmlhLXNlbGVjdGVkXCIsIFwiZmFsc2VcIiApO1xyXG5cdFx0Ly8gSWYgd2UncmUgc3dpdGNoaW5nIHRhYnMsIHJlbW92ZSB0aGUgb2xkIHRhYiBmcm9tIHRoZSB0YWIgb3JkZXIuXHJcblx0XHQvLyBJZiB3ZSdyZSBvcGVuaW5nIGZyb20gY29sbGFwc2VkIHN0YXRlLCByZW1vdmUgdGhlIHByZXZpb3VzIHRhYiBmcm9tIHRoZSB0YWIgb3JkZXIuXHJcblx0XHQvLyBJZiB3ZSdyZSBjb2xsYXBzaW5nLCB0aGVuIGtlZXAgdGhlIGNvbGxhcHNpbmcgdGFiIGluIHRoZSB0YWIgb3JkZXIuXHJcblx0XHRpZiAoIHRvU2hvdy5sZW5ndGggJiYgdG9IaWRlLmxlbmd0aCApIHtcclxuXHRcdFx0ZXZlbnREYXRhLm9sZFRhYi5hdHRyKCBcInRhYkluZGV4XCIsIC0xICk7XHJcblx0XHR9IGVsc2UgaWYgKCB0b1Nob3cubGVuZ3RoICkge1xyXG5cdFx0XHR0aGlzLnRhYnMuZmlsdGVyKGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHJldHVybiAkKCB0aGlzICkuYXR0ciggXCJ0YWJJbmRleFwiICkgPT09IDA7XHJcblx0XHRcdH0pXHJcblx0XHRcdC5hdHRyKCBcInRhYkluZGV4XCIsIC0xICk7XHJcblx0XHR9XHJcblxyXG5cdFx0dG9TaG93LmF0dHIoe1xyXG5cdFx0XHRcImFyaWEtZXhwYW5kZWRcIjogXCJ0cnVlXCIsXHJcblx0XHRcdFwiYXJpYS1oaWRkZW5cIjogXCJmYWxzZVwiXHJcblx0XHR9KTtcclxuXHRcdGV2ZW50RGF0YS5uZXdUYWIuYXR0cih7XHJcblx0XHRcdFwiYXJpYS1zZWxlY3RlZFwiOiBcInRydWVcIixcclxuXHRcdFx0dGFiSW5kZXg6IDBcclxuXHRcdH0pO1xyXG5cdH0sXHJcblxyXG5cdF9hY3RpdmF0ZTogZnVuY3Rpb24oIGluZGV4ICkge1xyXG5cdFx0dmFyIGFuY2hvcixcclxuXHRcdFx0YWN0aXZlID0gdGhpcy5fZmluZEFjdGl2ZSggaW5kZXggKTtcclxuXHJcblx0XHQvLyB0cnlpbmcgdG8gYWN0aXZhdGUgdGhlIGFscmVhZHkgYWN0aXZlIHBhbmVsXHJcblx0XHRpZiAoIGFjdGl2ZVsgMCBdID09PSB0aGlzLmFjdGl2ZVsgMCBdICkge1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gdHJ5aW5nIHRvIGNvbGxhcHNlLCBzaW11bGF0ZSBhIGNsaWNrIG9uIHRoZSBjdXJyZW50IGFjdGl2ZSBoZWFkZXJcclxuXHRcdGlmICggIWFjdGl2ZS5sZW5ndGggKSB7XHJcblx0XHRcdGFjdGl2ZSA9IHRoaXMuYWN0aXZlO1xyXG5cdFx0fVxyXG5cclxuXHRcdGFuY2hvciA9IGFjdGl2ZS5maW5kKCBcIi51aS10YWJzLWFuY2hvclwiIClbIDAgXTtcclxuXHRcdHRoaXMuX2V2ZW50SGFuZGxlcih7XHJcblx0XHRcdHRhcmdldDogYW5jaG9yLFxyXG5cdFx0XHRjdXJyZW50VGFyZ2V0OiBhbmNob3IsXHJcblx0XHRcdHByZXZlbnREZWZhdWx0OiAkLm5vb3BcclxuXHRcdH0pO1xyXG5cdH0sXHJcblxyXG5cdF9maW5kQWN0aXZlOiBmdW5jdGlvbiggaW5kZXggKSB7XHJcblx0XHRyZXR1cm4gaW5kZXggPT09IGZhbHNlID8gJCgpIDogdGhpcy50YWJzLmVxKCBpbmRleCApO1xyXG5cdH0sXHJcblxyXG5cdF9nZXRJbmRleDogZnVuY3Rpb24oIGluZGV4ICkge1xyXG5cdFx0Ly8gbWV0YS1mdW5jdGlvbiB0byBnaXZlIHVzZXJzIG9wdGlvbiB0byBwcm92aWRlIGEgaHJlZiBzdHJpbmcgaW5zdGVhZCBvZiBhIG51bWVyaWNhbCBpbmRleC5cclxuXHRcdGlmICggdHlwZW9mIGluZGV4ID09PSBcInN0cmluZ1wiICkge1xyXG5cdFx0XHRpbmRleCA9IHRoaXMuYW5jaG9ycy5pbmRleCggdGhpcy5hbmNob3JzLmZpbHRlciggXCJbaHJlZiQ9J1wiICsgaW5kZXggKyBcIiddXCIgKSApO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiBpbmRleDtcclxuXHR9LFxyXG5cclxuXHRfZGVzdHJveTogZnVuY3Rpb24oKSB7XHJcblx0XHRpZiAoIHRoaXMueGhyICkge1xyXG5cdFx0XHR0aGlzLnhoci5hYm9ydCgpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuZWxlbWVudC5yZW1vdmVDbGFzcyggXCJ1aS10YWJzIHVpLXdpZGdldCB1aS13aWRnZXQtY29udGVudCB1aS1jb3JuZXItYWxsIHVpLXRhYnMtY29sbGFwc2libGVcIiApO1xyXG5cclxuXHRcdHRoaXMudGFibGlzdFxyXG5cdFx0XHQucmVtb3ZlQ2xhc3MoIFwidWktdGFicy1uYXYgdWktaGVscGVyLXJlc2V0IHVpLWhlbHBlci1jbGVhcmZpeCB1aS13aWRnZXQtaGVhZGVyIHVpLWNvcm5lci1hbGxcIiApXHJcblx0XHRcdC5yZW1vdmVBdHRyKCBcInJvbGVcIiApO1xyXG5cclxuXHRcdHRoaXMuYW5jaG9yc1xyXG5cdFx0XHQucmVtb3ZlQ2xhc3MoIFwidWktdGFicy1hbmNob3JcIiApXHJcblx0XHRcdC5yZW1vdmVBdHRyKCBcInJvbGVcIiApXHJcblx0XHRcdC5yZW1vdmVBdHRyKCBcInRhYkluZGV4XCIgKVxyXG5cdFx0XHQucmVtb3ZlVW5pcXVlSWQoKTtcclxuXHJcblx0XHR0aGlzLnRhYnMuYWRkKCB0aGlzLnBhbmVscyApLmVhY2goZnVuY3Rpb24oKSB7XHJcblx0XHRcdGlmICggJC5kYXRhKCB0aGlzLCBcInVpLXRhYnMtZGVzdHJveVwiICkgKSB7XHJcblx0XHRcdFx0JCggdGhpcyApLnJlbW92ZSgpO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdCQoIHRoaXMgKVxyXG5cdFx0XHRcdFx0LnJlbW92ZUNsYXNzKCBcInVpLXN0YXRlLWRlZmF1bHQgdWktc3RhdGUtYWN0aXZlIHVpLXN0YXRlLWRpc2FibGVkIFwiICtcclxuXHRcdFx0XHRcdFx0XCJ1aS1jb3JuZXItdG9wIHVpLWNvcm5lci1ib3R0b20gdWktd2lkZ2V0LWNvbnRlbnQgdWktdGFicy1hY3RpdmUgdWktdGFicy1wYW5lbFwiIClcclxuXHRcdFx0XHRcdC5yZW1vdmVBdHRyKCBcInRhYkluZGV4XCIgKVxyXG5cdFx0XHRcdFx0LnJlbW92ZUF0dHIoIFwiYXJpYS1saXZlXCIgKVxyXG5cdFx0XHRcdFx0LnJlbW92ZUF0dHIoIFwiYXJpYS1idXN5XCIgKVxyXG5cdFx0XHRcdFx0LnJlbW92ZUF0dHIoIFwiYXJpYS1zZWxlY3RlZFwiIClcclxuXHRcdFx0XHRcdC5yZW1vdmVBdHRyKCBcImFyaWEtbGFiZWxsZWRieVwiIClcclxuXHRcdFx0XHRcdC5yZW1vdmVBdHRyKCBcImFyaWEtaGlkZGVuXCIgKVxyXG5cdFx0XHRcdFx0LnJlbW92ZUF0dHIoIFwiYXJpYS1leHBhbmRlZFwiIClcclxuXHRcdFx0XHRcdC5yZW1vdmVBdHRyKCBcInJvbGVcIiApO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHJcblx0XHR0aGlzLnRhYnMuZWFjaChmdW5jdGlvbigpIHtcclxuXHRcdFx0dmFyIGxpID0gJCggdGhpcyApLFxyXG5cdFx0XHRcdHByZXYgPSBsaS5kYXRhKCBcInVpLXRhYnMtYXJpYS1jb250cm9sc1wiICk7XHJcblx0XHRcdGlmICggcHJldiApIHtcclxuXHRcdFx0XHRsaVxyXG5cdFx0XHRcdFx0LmF0dHIoIFwiYXJpYS1jb250cm9sc1wiLCBwcmV2IClcclxuXHRcdFx0XHRcdC5yZW1vdmVEYXRhKCBcInVpLXRhYnMtYXJpYS1jb250cm9sc1wiICk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0bGkucmVtb3ZlQXR0ciggXCJhcmlhLWNvbnRyb2xzXCIgKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblxyXG5cdFx0dGhpcy5wYW5lbHMuc2hvdygpO1xyXG5cclxuXHRcdGlmICggdGhpcy5vcHRpb25zLmhlaWdodFN0eWxlICE9PSBcImNvbnRlbnRcIiApIHtcclxuXHRcdFx0dGhpcy5wYW5lbHMuY3NzKCBcImhlaWdodFwiLCBcIlwiICk7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0ZW5hYmxlOiBmdW5jdGlvbiggaW5kZXggKSB7XHJcblx0XHR2YXIgZGlzYWJsZWQgPSB0aGlzLm9wdGlvbnMuZGlzYWJsZWQ7XHJcblx0XHRpZiAoIGRpc2FibGVkID09PSBmYWxzZSApIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggaW5kZXggPT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0ZGlzYWJsZWQgPSBmYWxzZTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdGluZGV4ID0gdGhpcy5fZ2V0SW5kZXgoIGluZGV4ICk7XHJcblx0XHRcdGlmICggJC5pc0FycmF5KCBkaXNhYmxlZCApICkge1xyXG5cdFx0XHRcdGRpc2FibGVkID0gJC5tYXAoIGRpc2FibGVkLCBmdW5jdGlvbiggbnVtICkge1xyXG5cdFx0XHRcdFx0cmV0dXJuIG51bSAhPT0gaW5kZXggPyBudW0gOiBudWxsO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdGRpc2FibGVkID0gJC5tYXAoIHRoaXMudGFicywgZnVuY3Rpb24oIGxpLCBudW0gKSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gbnVtICE9PSBpbmRleCA/IG51bSA6IG51bGw7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdHRoaXMuX3NldHVwRGlzYWJsZWQoIGRpc2FibGVkICk7XHJcblx0fSxcclxuXHJcblx0ZGlzYWJsZTogZnVuY3Rpb24oIGluZGV4ICkge1xyXG5cdFx0dmFyIGRpc2FibGVkID0gdGhpcy5vcHRpb25zLmRpc2FibGVkO1xyXG5cdFx0aWYgKCBkaXNhYmxlZCA9PT0gdHJ1ZSApIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggaW5kZXggPT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0ZGlzYWJsZWQgPSB0cnVlO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0aW5kZXggPSB0aGlzLl9nZXRJbmRleCggaW5kZXggKTtcclxuXHRcdFx0aWYgKCAkLmluQXJyYXkoIGluZGV4LCBkaXNhYmxlZCApICE9PSAtMSApIHtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKCAkLmlzQXJyYXkoIGRpc2FibGVkICkgKSB7XHJcblx0XHRcdFx0ZGlzYWJsZWQgPSAkLm1lcmdlKCBbIGluZGV4IF0sIGRpc2FibGVkICkuc29ydCgpO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdGRpc2FibGVkID0gWyBpbmRleCBdO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHR0aGlzLl9zZXR1cERpc2FibGVkKCBkaXNhYmxlZCApO1xyXG5cdH0sXHJcblxyXG5cdGxvYWQ6IGZ1bmN0aW9uKCBpbmRleCwgZXZlbnQgKSB7XHJcblx0XHRpbmRleCA9IHRoaXMuX2dldEluZGV4KCBpbmRleCApO1xyXG5cdFx0dmFyIHRoYXQgPSB0aGlzLFxyXG5cdFx0XHR0YWIgPSB0aGlzLnRhYnMuZXEoIGluZGV4ICksXHJcblx0XHRcdGFuY2hvciA9IHRhYi5maW5kKCBcIi51aS10YWJzLWFuY2hvclwiICksXHJcblx0XHRcdHBhbmVsID0gdGhpcy5fZ2V0UGFuZWxGb3JUYWIoIHRhYiApLFxyXG5cdFx0XHRldmVudERhdGEgPSB7XHJcblx0XHRcdFx0dGFiOiB0YWIsXHJcblx0XHRcdFx0cGFuZWw6IHBhbmVsXHJcblx0XHRcdH07XHJcblxyXG5cdFx0Ly8gbm90IHJlbW90ZVxyXG5cdFx0aWYgKCBpc0xvY2FsKCBhbmNob3JbIDAgXSApICkge1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy54aHIgPSAkLmFqYXgoIHRoaXMuX2FqYXhTZXR0aW5ncyggYW5jaG9yLCBldmVudCwgZXZlbnREYXRhICkgKTtcclxuXHJcblx0XHQvLyBzdXBwb3J0OiBqUXVlcnkgPDEuOFxyXG5cdFx0Ly8galF1ZXJ5IDwxLjggcmV0dXJucyBmYWxzZSBpZiB0aGUgcmVxdWVzdCBpcyBjYW5jZWxlZCBpbiBiZWZvcmVTZW5kLFxyXG5cdFx0Ly8gYnV0IGFzIG9mIDEuOCwgJC5hamF4KCkgYWx3YXlzIHJldHVybnMgYSBqcVhIUiBvYmplY3QuXHJcblx0XHRpZiAoIHRoaXMueGhyICYmIHRoaXMueGhyLnN0YXR1c1RleHQgIT09IFwiY2FuY2VsZWRcIiApIHtcclxuXHRcdFx0dGFiLmFkZENsYXNzKCBcInVpLXRhYnMtbG9hZGluZ1wiICk7XHJcblx0XHRcdHBhbmVsLmF0dHIoIFwiYXJpYS1idXN5XCIsIFwidHJ1ZVwiICk7XHJcblxyXG5cdFx0XHR0aGlzLnhoclxyXG5cdFx0XHRcdC5zdWNjZXNzKGZ1bmN0aW9uKCByZXNwb25zZSApIHtcclxuXHRcdFx0XHRcdC8vIHN1cHBvcnQ6IGpRdWVyeSA8MS44XHJcblx0XHRcdFx0XHQvLyBodHRwOi8vYnVncy5qcXVlcnkuY29tL3RpY2tldC8xMTc3OFxyXG5cdFx0XHRcdFx0c2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdFx0cGFuZWwuaHRtbCggcmVzcG9uc2UgKTtcclxuXHRcdFx0XHRcdFx0dGhhdC5fdHJpZ2dlciggXCJsb2FkXCIsIGV2ZW50LCBldmVudERhdGEgKTtcclxuXHRcdFx0XHRcdH0sIDEgKTtcclxuXHRcdFx0XHR9KVxyXG5cdFx0XHRcdC5jb21wbGV0ZShmdW5jdGlvbigganFYSFIsIHN0YXR1cyApIHtcclxuXHRcdFx0XHRcdC8vIHN1cHBvcnQ6IGpRdWVyeSA8MS44XHJcblx0XHRcdFx0XHQvLyBodHRwOi8vYnVncy5qcXVlcnkuY29tL3RpY2tldC8xMTc3OFxyXG5cdFx0XHRcdFx0c2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdFx0aWYgKCBzdGF0dXMgPT09IFwiYWJvcnRcIiApIHtcclxuXHRcdFx0XHRcdFx0XHR0aGF0LnBhbmVscy5zdG9wKCBmYWxzZSwgdHJ1ZSApO1xyXG5cdFx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0XHR0YWIucmVtb3ZlQ2xhc3MoIFwidWktdGFicy1sb2FkaW5nXCIgKTtcclxuXHRcdFx0XHRcdFx0cGFuZWwucmVtb3ZlQXR0ciggXCJhcmlhLWJ1c3lcIiApO1xyXG5cclxuXHRcdFx0XHRcdFx0aWYgKCBqcVhIUiA9PT0gdGhhdC54aHIgKSB7XHJcblx0XHRcdFx0XHRcdFx0ZGVsZXRlIHRoYXQueGhyO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9LCAxICk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X2FqYXhTZXR0aW5nczogZnVuY3Rpb24oIGFuY2hvciwgZXZlbnQsIGV2ZW50RGF0YSApIHtcclxuXHRcdHZhciB0aGF0ID0gdGhpcztcclxuXHRcdHJldHVybiB7XHJcblx0XHRcdHVybDogYW5jaG9yLmF0dHIoIFwiaHJlZlwiICksXHJcblx0XHRcdGJlZm9yZVNlbmQ6IGZ1bmN0aW9uKCBqcVhIUiwgc2V0dGluZ3MgKSB7XHJcblx0XHRcdFx0cmV0dXJuIHRoYXQuX3RyaWdnZXIoIFwiYmVmb3JlTG9hZFwiLCBldmVudCxcclxuXHRcdFx0XHRcdCQuZXh0ZW5kKCB7IGpxWEhSIDoganFYSFIsIGFqYXhTZXR0aW5nczogc2V0dGluZ3MgfSwgZXZlbnREYXRhICkgKTtcclxuXHRcdFx0fVxyXG5cdFx0fTtcclxuXHR9LFxyXG5cclxuXHRfZ2V0UGFuZWxGb3JUYWI6IGZ1bmN0aW9uKCB0YWIgKSB7XHJcblx0XHR2YXIgaWQgPSAkKCB0YWIgKS5hdHRyKCBcImFyaWEtY29udHJvbHNcIiApO1xyXG5cdFx0cmV0dXJuIHRoaXMuZWxlbWVudC5maW5kKCB0aGlzLl9zYW5pdGl6ZVNlbGVjdG9yKCBcIiNcIiArIGlkICkgKTtcclxuXHR9XHJcbn0pO1xyXG5cclxufSkoIGpRdWVyeSApO1xyXG5cclxuKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7XHJcblxyXG59KSggalF1ZXJ5ICk7XHJcblxyXG4oZnVuY3Rpb24oICQsIHdpbmRvdyApIHtcclxuXHJcblx0JC5tb2JpbGUuaW9zb3JpZW50YXRpb25maXhFbmFibGVkID0gdHJ1ZTtcclxuXHJcblx0Ly8gVGhpcyBmaXggYWRkcmVzc2VzIGFuIGlPUyBidWcsIHNvIHJldHVybiBlYXJseSBpZiB0aGUgVUEgY2xhaW1zIGl0J3Mgc29tZXRoaW5nIGVsc2UuXHJcblx0dmFyIHVhID0gbmF2aWdhdG9yLnVzZXJBZ2VudCxcclxuXHRcdHpvb20sXHJcblx0XHRldnQsIHgsIHksIHosIGFpZztcclxuXHRpZiAoICEoIC9pUGhvbmV8aVBhZHxpUG9kLy50ZXN0KCBuYXZpZ2F0b3IucGxhdGZvcm0gKSAmJiAvT1MgWzEtNV1fWzAtOV9dKiBsaWtlIE1hYyBPUyBYL2kudGVzdCggdWEgKSAmJiB1YS5pbmRleE9mKCBcIkFwcGxlV2ViS2l0XCIgKSA+IC0xICkgKSB7XHJcblx0XHQkLm1vYmlsZS5pb3NvcmllbnRhdGlvbmZpeEVuYWJsZWQgPSBmYWxzZTtcclxuXHRcdHJldHVybjtcclxuXHR9XHJcblxyXG5cdHpvb20gPSAkLm1vYmlsZS56b29tO1xyXG5cclxuXHRmdW5jdGlvbiBjaGVja1RpbHQoIGUgKSB7XHJcblx0XHRldnQgPSBlLm9yaWdpbmFsRXZlbnQ7XHJcblx0XHRhaWcgPSBldnQuYWNjZWxlcmF0aW9uSW5jbHVkaW5nR3Jhdml0eTtcclxuXHJcblx0XHR4ID0gTWF0aC5hYnMoIGFpZy54ICk7XHJcblx0XHR5ID0gTWF0aC5hYnMoIGFpZy55ICk7XHJcblx0XHR6ID0gTWF0aC5hYnMoIGFpZy56ICk7XHJcblxyXG5cdFx0Ly8gSWYgcG9ydHJhaXQgb3JpZW50YXRpb24gYW5kIGluIG9uZSBvZiB0aGUgZGFuZ2VyIHpvbmVzXHJcblx0XHRpZiAoICF3aW5kb3cub3JpZW50YXRpb24gJiYgKCB4ID4gNyB8fCAoICggeiA+IDYgJiYgeSA8IDggfHwgeiA8IDggJiYgeSA+IDYgKSAmJiB4ID4gNSApICkgKSB7XHJcblx0XHRcdFx0aWYgKCB6b29tLmVuYWJsZWQgKSB7XHJcblx0XHRcdFx0XHR6b29tLmRpc2FibGUoKTtcclxuXHRcdFx0XHR9XHJcblx0XHR9XHRlbHNlIGlmICggIXpvb20uZW5hYmxlZCApIHtcclxuXHRcdFx0XHR6b29tLmVuYWJsZSgpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0JC5tb2JpbGUuZG9jdW1lbnQub24oIFwibW9iaWxlaW5pdFwiLCBmdW5jdGlvbigpIHtcclxuXHRcdGlmICggJC5tb2JpbGUuaW9zb3JpZW50YXRpb25maXhFbmFibGVkICkge1xyXG5cdFx0XHQkLm1vYmlsZS53aW5kb3dcclxuXHRcdFx0XHQuYmluZCggXCJvcmllbnRhdGlvbmNoYW5nZS5pb3NvcmllbnRhdGlvbmZpeFwiLCB6b29tLmVuYWJsZSApXHJcblx0XHRcdFx0LmJpbmQoIFwiZGV2aWNlbW90aW9uLmlvc29yaWVudGF0aW9uZml4XCIsIGNoZWNrVGlsdCApO1xyXG5cdFx0fVxyXG5cdH0pO1xyXG5cclxufSggalF1ZXJ5LCB0aGlzICkpO1xyXG5cclxuKGZ1bmN0aW9uKCAkLCB3aW5kb3csIHVuZGVmaW5lZCApIHtcclxuXHR2YXJcdCRodG1sID0gJCggXCJodG1sXCIgKSxcclxuXHRcdCR3aW5kb3cgPSAkLm1vYmlsZS53aW5kb3c7XHJcblxyXG5cdC8vcmVtb3ZlIGluaXRpYWwgYnVpbGQgY2xhc3MgKG9ubHkgcHJlc2VudCBvbiBmaXJzdCBwYWdlc2hvdylcclxuXHRmdW5jdGlvbiBoaWRlUmVuZGVyaW5nQ2xhc3MoKSB7XHJcblx0XHQkaHRtbC5yZW1vdmVDbGFzcyggXCJ1aS1tb2JpbGUtcmVuZGVyaW5nXCIgKTtcclxuXHR9XHJcblxyXG5cdC8vIHRyaWdnZXIgbW9iaWxlaW5pdCBldmVudCAtIHVzZWZ1bCBob29rIGZvciBjb25maWd1cmluZyAkLm1vYmlsZSBzZXR0aW5ncyBiZWZvcmUgdGhleSdyZSB1c2VkXHJcblx0JCggd2luZG93LmRvY3VtZW50ICkudHJpZ2dlciggXCJtb2JpbGVpbml0XCIgKTtcclxuXHJcblx0Ly8gc3VwcG9ydCBjb25kaXRpb25zXHJcblx0Ly8gaWYgZGV2aWNlIHN1cHBvcnQgY29uZGl0aW9uKHMpIGFyZW4ndCBtZXQsIGxlYXZlIHRoaW5ncyBhcyB0aGV5IGFyZSAtPiBhIGJhc2ljLCB1c2FibGUgZXhwZXJpZW5jZSxcclxuXHQvLyBvdGhlcndpc2UsIHByb2NlZWQgd2l0aCB0aGUgZW5oYW5jZW1lbnRzXHJcblx0aWYgKCAhJC5tb2JpbGUuZ3JhZGVBKCkgKSB7XHJcblx0XHRyZXR1cm47XHJcblx0fVxyXG5cclxuXHQvLyBvdmVycmlkZSBhamF4RW5hYmxlZCBvbiBwbGF0Zm9ybXMgdGhhdCBoYXZlIGtub3duIGNvbmZsaWN0cyB3aXRoIGhhc2ggaGlzdG9yeSB1cGRhdGVzXHJcblx0Ly8gb3IgZ2VuZXJhbGx5IHdvcmsgYmV0dGVyIGJyb3dzaW5nIGluIHJlZ3VsYXIgaHR0cCBmb3IgZnVsbCBwYWdlIHJlZnJlc2hlcyAoQkI1LCBPcGVyYSBNaW5pKVxyXG5cdGlmICggJC5tb2JpbGUuYWpheEJsYWNrbGlzdCApIHtcclxuXHRcdCQubW9iaWxlLmFqYXhFbmFibGVkID0gZmFsc2U7XHJcblx0fVxyXG5cclxuXHQvLyBBZGQgbW9iaWxlLCBpbml0aWFsIGxvYWQgXCJyZW5kZXJpbmdcIiBjbGFzc2VzIHRvIGRvY0VsXHJcblx0JGh0bWwuYWRkQ2xhc3MoIFwidWktbW9iaWxlIHVpLW1vYmlsZS1yZW5kZXJpbmdcIiApO1xyXG5cclxuXHQvLyBUaGlzIGlzIGEgZmFsbGJhY2suIElmIGFueXRoaW5nIGdvZXMgd3JvbmcgKEpTIGVycm9ycywgZXRjKSwgb3IgZXZlbnRzIGRvbid0IGZpcmUsXHJcblx0Ly8gdGhpcyBlbnN1cmVzIHRoZSByZW5kZXJpbmcgY2xhc3MgaXMgcmVtb3ZlZCBhZnRlciA1IHNlY29uZHMsIHNvIGNvbnRlbnQgaXMgdmlzaWJsZSBhbmQgYWNjZXNzaWJsZVxyXG5cdHNldFRpbWVvdXQoIGhpZGVSZW5kZXJpbmdDbGFzcywgNTAwMCApO1xyXG5cclxuXHQkLmV4dGVuZCggJC5tb2JpbGUsIHtcclxuXHRcdC8vIGZpbmQgYW5kIGVuaGFuY2UgdGhlIHBhZ2VzIGluIHRoZSBkb20gYW5kIHRyYW5zaXRpb24gdG8gdGhlIGZpcnN0IHBhZ2UuXHJcblx0XHRpbml0aWFsaXplUGFnZTogZnVuY3Rpb24oKSB7XHJcblx0XHRcdC8vIGZpbmQgcHJlc2VudCBwYWdlc1xyXG5cdFx0XHR2YXIgcGF0aCA9ICQubW9iaWxlLnBhdGgsXHJcblx0XHRcdFx0JHBhZ2VzID0gJCggXCI6anFtRGF0YShyb2xlPSdwYWdlJyksIDpqcW1EYXRhKHJvbGU9J2RpYWxvZycpXCIgKSxcclxuXHRcdFx0XHRoYXNoID0gcGF0aC5zdHJpcEhhc2goIHBhdGguc3RyaXBRdWVyeVBhcmFtcyhwYXRoLnBhcnNlTG9jYXRpb24oKS5oYXNoKSApLFxyXG5cdFx0XHRcdHRoZUxvY2F0aW9uID0gJC5tb2JpbGUucGF0aC5wYXJzZUxvY2F0aW9uKCksXHJcblx0XHRcdFx0aGFzaFBhZ2UgPSBoYXNoID8gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIGhhc2ggKSA6IHVuZGVmaW5lZDtcclxuXHJcblx0XHRcdC8vIGlmIG5vIHBhZ2VzIGFyZSBmb3VuZCwgY3JlYXRlIG9uZSB3aXRoIGJvZHkncyBpbm5lciBodG1sXHJcblx0XHRcdGlmICggISRwYWdlcy5sZW5ndGggKSB7XHJcblx0XHRcdFx0JHBhZ2VzID0gJCggXCJib2R5XCIgKS53cmFwSW5uZXIoIFwiPGRpdiBkYXRhLVwiICsgJC5tb2JpbGUubnMgKyBcInJvbGU9J3BhZ2UnPjwvZGl2PlwiICkuY2hpbGRyZW4oIDAgKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gYWRkIGRpYWxvZ3MsIHNldCBkYXRhLXVybCBhdHRyc1xyXG5cdFx0XHQkcGFnZXMuZWFjaChmdW5jdGlvbigpIHtcclxuXHRcdFx0XHR2YXIgJHRoaXMgPSAkKCB0aGlzICk7XHJcblxyXG5cdFx0XHRcdC8vIHVubGVzcyB0aGUgZGF0YSB1cmwgaXMgYWxyZWFkeSBzZXQgc2V0IGl0IHRvIHRoZSBwYXRobmFtZVxyXG5cdFx0XHRcdGlmICggISR0aGlzWyAwIF0uZ2V0QXR0cmlidXRlKCBcImRhdGEtXCIgKyAkLm1vYmlsZS5ucyArIFwidXJsXCIgKSApIHtcclxuXHRcdFx0XHRcdCR0aGlzLmF0dHIoIFwiZGF0YS1cIiArICQubW9iaWxlLm5zICsgXCJ1cmxcIiwgJHRoaXMuYXR0ciggXCJpZFwiICkgfHxcclxuXHRcdFx0XHRcdFx0cGF0aC5jb252ZXJ0VXJsVG9EYXRhVXJsKCB0aGVMb2NhdGlvbi5wYXRobmFtZSArIHRoZUxvY2F0aW9uLnNlYXJjaCApICk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdC8vIGRlZmluZSBmaXJzdCBwYWdlIGluIGRvbSBjYXNlIG9uZSBiYWNrcyBvdXQgdG8gdGhlIGRpcmVjdG9yeSByb290IChub3QgYWx3YXlzIHRoZSBmaXJzdCBwYWdlIHZpc2l0ZWQsIGJ1dCBkZWZpbmVkIGFzIGZhbGxiYWNrKVxyXG5cdFx0XHQkLm1vYmlsZS5maXJzdFBhZ2UgPSAkcGFnZXMuZmlyc3QoKTtcclxuXHJcblx0XHRcdC8vIGRlZmluZSBwYWdlIGNvbnRhaW5lclxyXG5cdFx0XHQkLm1vYmlsZS5wYWdlQ29udGFpbmVyID0gJC5tb2JpbGUuZmlyc3RQYWdlXHJcblx0XHRcdFx0LnBhcmVudCgpXHJcblx0XHRcdFx0LmFkZENsYXNzKCBcInVpLW1vYmlsZS12aWV3cG9ydFwiIClcclxuXHRcdFx0XHQucGFnZWNvbnRhaW5lcigpO1xyXG5cclxuXHRcdFx0Ly8gaW5pdGlhbGl6ZSBuYXZpZ2F0aW9uIGV2ZW50cyBub3csIGFmdGVyIG1vYmlsZWluaXQgaGFzIG9jY3VycmVkIGFuZCB0aGUgcGFnZSBjb250YWluZXJcclxuXHRcdFx0Ly8gaGFzIGJlZW4gY3JlYXRlZCBidXQgYmVmb3JlIHRoZSByZXN0IG9mIHRoZSBsaWJyYXJ5IGlzIGFsZXJ0ZWQgdG8gdGhhdCBmYWN0XHJcblx0XHRcdCQubW9iaWxlLm5hdnJlYWR5RGVmZXJyZWQucmVzb2x2ZSgpO1xyXG5cclxuXHRcdFx0Ly8gYWxlcnQgbGlzdGVuZXJzIHRoYXQgdGhlIHBhZ2Vjb250YWluZXIgaGFzIGJlZW4gZGV0ZXJtaW5lZCBmb3IgYmluZGluZ1xyXG5cdFx0XHQvLyB0byBldmVudHMgdHJpZ2dlcmVkIG9uIGl0XHJcblx0XHRcdCR3aW5kb3cudHJpZ2dlciggXCJwYWdlY29udGFpbmVyY3JlYXRlXCIgKTtcclxuXHJcblx0XHRcdC8vIGN1ZSBwYWdlIGxvYWRpbmcgbWVzc2FnZVxyXG5cdFx0XHQkLm1vYmlsZS5sb2FkaW5nKCBcInNob3dcIiApO1xyXG5cclxuXHRcdFx0Ly9yZW1vdmUgaW5pdGlhbCBidWlsZCBjbGFzcyAob25seSBwcmVzZW50IG9uIGZpcnN0IHBhZ2VzaG93KVxyXG5cdFx0XHRoaWRlUmVuZGVyaW5nQ2xhc3MoKTtcclxuXHJcblx0XHRcdC8vIGlmIGhhc2hjaGFuZ2UgbGlzdGVuaW5nIGlzIGRpc2FibGVkLCB0aGVyZSdzIG5vIGhhc2ggZGVlcGxpbmssXHJcblx0XHRcdC8vIHRoZSBoYXNoIGlzIG5vdCB2YWxpZCAoY29udGFpbnMgbW9yZSB0aGFuIG9uZSAjIG9yIGRvZXMgbm90IHN0YXJ0IHdpdGggIylcclxuXHRcdFx0Ly8gb3IgdGhlcmUgaXMgbm8gcGFnZSB3aXRoIHRoYXQgaGFzaCwgY2hhbmdlIHRvIHRoZSBmaXJzdCBwYWdlIGluIHRoZSBET01cclxuXHRcdFx0Ly8gUmVtZW1iZXIsIGhvd2V2ZXIsIHRoYXQgdGhlIGhhc2ggY2FuIGFsc28gYmUgYSBwYXRoIVxyXG5cdFx0XHRpZiAoICEgKCAkLm1vYmlsZS5oYXNoTGlzdGVuaW5nRW5hYmxlZCAmJlxyXG5cdFx0XHRcdCQubW9iaWxlLnBhdGguaXNIYXNoVmFsaWQoIGxvY2F0aW9uLmhhc2ggKSAmJlxyXG5cdFx0XHRcdCggJCggaGFzaFBhZ2UgKS5pcyggXCI6anFtRGF0YShyb2xlPSdwYWdlJylcIiApIHx8XHJcblx0XHRcdFx0XHQkLm1vYmlsZS5wYXRoLmlzUGF0aCggaGFzaCApIHx8XHJcblx0XHRcdFx0XHRoYXNoID09PSAkLm1vYmlsZS5kaWFsb2dIYXNoS2V5ICkgKSApIHtcclxuXHJcblx0XHRcdFx0Ly8gbWFrZSBzdXJlIHRvIHNldCBpbml0aWFsIHBvcHN0YXRlIHN0YXRlIGlmIGl0IGV4aXN0c1xyXG5cdFx0XHRcdC8vIHNvIHRoYXQgbmF2aWdhdGlvbiBiYWNrIHRvIHRoZSBpbml0aWFsIHBhZ2Ugd29ya3MgcHJvcGVybHlcclxuXHRcdFx0XHRpZiAoICQuZXZlbnQuc3BlY2lhbC5uYXZpZ2F0ZS5pc1B1c2hTdGF0ZUVuYWJsZWQoKSApIHtcclxuXHRcdFx0XHRcdCQubW9iaWxlLm5hdmlnYXRlLm5hdmlnYXRvci5zcXVhc2goIHBhdGgucGFyc2VMb2NhdGlvbigpLmhyZWYgKTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdCQubW9iaWxlLmNoYW5nZVBhZ2UoICQubW9iaWxlLmZpcnN0UGFnZSwge1xyXG5cdFx0XHRcdFx0dHJhbnNpdGlvbjogXCJub25lXCIsXHJcblx0XHRcdFx0XHRyZXZlcnNlOiB0cnVlLFxyXG5cdFx0XHRcdFx0Y2hhbmdlSGFzaDogZmFsc2UsXHJcblx0XHRcdFx0XHRmcm9tSGFzaENoYW5nZTogdHJ1ZVxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdC8vIHRyaWdnZXIgaGFzaGNoYW5nZSBvciBuYXZpZ2F0ZSB0byBzcXVhc2ggYW5kIHJlY29yZCB0aGUgY29ycmVjdFxyXG5cdFx0XHRcdC8vIGhpc3RvcnkgZW50cnkgZm9yIGFuIGluaXRpYWwgaGFzaCBwYXRoXHJcblx0XHRcdFx0aWYgKCAhJC5ldmVudC5zcGVjaWFsLm5hdmlnYXRlLmlzUHVzaFN0YXRlRW5hYmxlZCgpICkge1xyXG5cdFx0XHRcdFx0JHdpbmRvdy50cmlnZ2VyKCBcImhhc2hjaGFuZ2VcIiwgW3RydWVdICk7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdC8vIFRPRE8gZmlndXJlIG91dCBob3cgdG8gc2ltcGxpZnkgdGhpcyBpbnRlcmFjdGlvbiB3aXRoIHRoZSBpbml0aWFsIGhpc3RvcnkgZW50cnlcclxuXHRcdFx0XHRcdC8vIGF0IHRoZSBib3R0b20ganMvbmF2aWdhdGUvbmF2aWdhdGUuanNcclxuXHRcdFx0XHRcdCQubW9iaWxlLm5hdmlnYXRlLmhpc3Rvcnkuc3RhY2sgPSBbXTtcclxuXHRcdFx0XHRcdCQubW9iaWxlLm5hdmlnYXRlKCAkLm1vYmlsZS5wYXRoLmlzUGF0aCggbG9jYXRpb24uaGFzaCApID8gbG9jYXRpb24uaGFzaCA6IGxvY2F0aW9uLmhyZWYgKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9KTtcclxuXHJcblx0JChmdW5jdGlvbigpIHtcclxuXHRcdC8vUnVuIGlubGluZVNWRyBzdXBwb3J0IHRlc3RcclxuXHRcdCQuc3VwcG9ydC5pbmxpbmVTVkcoKTtcclxuXHJcblx0XHQvLyBjaGVjayB3aGljaCBzY3JvbGxUb3AgdmFsdWUgc2hvdWxkIGJlIHVzZWQgYnkgc2Nyb2xsaW5nIHRvIDEgaW1tZWRpYXRlbHkgYXQgZG9tcmVhZHlcclxuXHRcdC8vIHRoZW4gY2hlY2sgd2hhdCB0aGUgc2Nyb2xsIHRvcCBpcy4gQW5kcm9pZCB3aWxsIHJlcG9ydCAwLi4uIG90aGVycyAxXHJcblx0XHQvLyBub3RlIHRoYXQgdGhpcyBpbml0aWFsIHNjcm9sbCB3b24ndCBoaWRlIHRoZSBhZGRyZXNzIGJhci4gSXQncyBqdXN0IGZvciB0aGUgY2hlY2suXHJcblxyXG5cdFx0Ly8gaGlkZSBpT1MgYnJvd3NlciBjaHJvbWUgb24gbG9hZCBpZiBoaWRlVXJsQmFyIGlzIHRydWUgdGhpcyBpcyB0byB0cnkgYW5kIGRvIGl0IGFzIHNvb24gYXMgcG9zc2libGVcclxuXHRcdGlmICggJC5tb2JpbGUuaGlkZVVybEJhciApIHtcclxuXHRcdFx0d2luZG93LnNjcm9sbFRvKCAwLCAxICk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gaWYgZGVmYXVsdEhvbWVTY3JvbGwgaGFzbid0IGJlZW4gc2V0IHlldCwgc2VlIGlmIHNjcm9sbFRvcCBpcyAxXHJcblx0XHQvLyBpdCBzaG91bGQgYmUgMSBpbiBtb3N0IGJyb3dzZXJzLCBidXQgYW5kcm9pZCB0cmVhdHMgMSBhcyAwIChmb3IgaGlkaW5nIGFkZHIgYmFyKVxyXG5cdFx0Ly8gc28gaWYgaXQncyAxLCB1c2UgMCBmcm9tIG5vdyBvblxyXG5cdFx0JC5tb2JpbGUuZGVmYXVsdEhvbWVTY3JvbGwgPSAoICEkLnN1cHBvcnQuc2Nyb2xsVG9wIHx8ICQubW9iaWxlLndpbmRvdy5zY3JvbGxUb3AoKSA9PT0gMSApID8gMCA6IDE7XHJcblxyXG5cdFx0Ly9kb20tcmVhZHkgaW5pdHNcclxuXHRcdGlmICggJC5tb2JpbGUuYXV0b0luaXRpYWxpemVQYWdlICkge1xyXG5cdFx0XHQkLm1vYmlsZS5pbml0aWFsaXplUGFnZSgpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIHdpbmRvdyBsb2FkIGV2ZW50XHJcblx0XHQvLyBoaWRlIGlPUyBicm93c2VyIGNocm9tZSBvbiBsb2FkIGlmIGhpZGVVcmxCYXIgaXMgdHJ1ZSB0aGlzIGlzIGFzIGZhbGwgYmFjayBpbmNhc2Ugd2Ugd2VyZSB0b28gZWFybHkgYmVmb3JlXHJcblx0XHRpZiAoICQubW9iaWxlLmhpZGVVcmxCYXIgKSB7XHJcblx0XHRcdCR3aW5kb3cubG9hZCggJC5tb2JpbGUuc2lsZW50U2Nyb2xsICk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCAhJC5zdXBwb3J0LmNzc1BvaW50ZXJFdmVudHMgKSB7XHJcblx0XHRcdC8vIElFIGFuZCBPcGVyYSBkb24ndCBzdXBwb3J0IENTUyBwb2ludGVyLWV2ZW50czogbm9uZSB0aGF0IHdlIHVzZSB0byBkaXNhYmxlIGxpbmstYmFzZWQgYnV0dG9uc1xyXG5cdFx0XHQvLyBieSBhZGRpbmcgdGhlICd1aS1kaXNhYmxlZCcgY2xhc3MgdG8gdGhlbS4gVXNpbmcgYSBKYXZhU2NyaXB0IHdvcmthcm91bmQgZm9yIHRob3NlIGJyb3dzZXIuXHJcblx0XHRcdC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9qcXVlcnkvanF1ZXJ5LW1vYmlsZS9pc3N1ZXMvMzU1OFxyXG5cclxuXHRcdFx0Ly8gREVQUkVDQVRFRCBhcyBvZiAxLjQuMCAtIHJlbW92ZSB1aS1kaXNhYmxlZCBhZnRlciAxLjQuMCByZWxlYXNlXHJcblx0XHRcdC8vIG9ubHkgdWktc3RhdGUtZGlzYWJsZWQgc2hvdWxkIGJlIHByZXNlbnQgdGhlcmVhZnRlclxyXG5cdFx0XHQkLm1vYmlsZS5kb2N1bWVudC5kZWxlZ2F0ZSggXCIudWktc3RhdGUtZGlzYWJsZWQsLnVpLWRpc2FibGVkXCIsIFwidmNsaWNrXCIsXHJcblx0XHRcdFx0ZnVuY3Rpb24oIGUgKSB7XHJcblx0XHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFx0XHRlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0KTtcclxuXHRcdH1cclxuXHR9KTtcclxufSggalF1ZXJ5LCB0aGlzICkpO1xyXG5cclxuXHJcbn0pKTtcclxuXG59LmNhbGwod2luZG93KSk7IiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX2JhY2tib25lX187IiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX2NkcF9pMThuX187IiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX2pxdWVyeV9fOyJdfQ=="]}