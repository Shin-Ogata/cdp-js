/*!
 * cdp.ui.jqm.js 2.1.0
 *
 * Date: 2018-01-25T06:32:24.163Z
 */
!function(e,t){"function"==typeof define&&define.amd?define(["cdp.framework.jqm","cdp.tools","cdp.ui.listview"],function(){return t(e.CDP||(e.CDP={}))}):t(e.CDP||(e.CDP={}))}(this,function(e){var t,n,o,i,a,r,s,l,c,p,u,f,d,h,g,b,v;e.UI=e.UI||{},a=e||(e={}),t=a.UI||(a.UI={}),n=a.Config,o=a.Framework,i=function(){function e(){}return e.initialize=function(t){var n=$.extend({},{platform:"auto",reserveScrollbarRegion:!0},t);return"auto"===n.platform?e.detectUIPlatform(n.reserveScrollbarRegion):e.setCurrentUIPlatform(n.platform)?n.platform:void console.warn("[CDP.UI.Theme] setCurrentUIPlatform(), failed. platform: "+n.platform)},e.getCurrentUIPlatform=function(){for(var t=$("html"),n=0,o=e.s_platforms.length;n<o;n++)if(t.hasClass("ui-platform-"+e.s_platforms[n]))return e.s_platforms[n];return null},e.setCurrentUIPlatform=function(t){if(null==t||e.s_platforms.indexOf(t)>=0){var n=$("html");return e.s_platforms.forEach(function(e){n.removeClass("ui-platform-"+e)}),t&&n.addClass("ui-platform-"+t),!0}return!1},e.detectUIPlatform=function(e){void 0===e&&(e=!0);var t="";return o.Platform.iOS?($("html").addClass("ui-platform-ios"),t="ios"):($("html").addClass("ui-platform-android"),t="android"),n.DEBUG&&e&&!o.Platform.Mobile&&$("body").css("overflow-y","scroll"),t},e.registerUIPlatforms=function(t){t&&(e.s_platforms=t)},e.registerPageTransitionMap=function(t){t&&(e.s_pageTransitionMap=t)},e.registerDialogTransitionMap=function(t){t&&(e.s_dialogTransitionMap=t)},e.queryPageTransition=function(t){var n=e.s_pageTransitionMap[t];return n?n[e.getCurrentUIPlatform()]||n.fallback:t},e.queryDialogTransition=function(t){var n=e.s_dialogTransitionMap[t];return n?n[e.getCurrentUIPlatform()]||n.fallback:t},e.s_platforms=["ios","android"],e.s_pageTransitionMap={"platform-default":{ios:"slide",android:"floatup",fallback:"slide"},"platform-alternative":{ios:"slideup",android:"floatup",fallback:"slideup"}},e.s_dialogTransitionMap={"platform-default":{ios:"popzoom",android:"crosszoom",fallback:"none"}},e}(),t.Theme=i,o.waitForInitialize().done(function(){var e;e=$.mobile.changePage.bind($.mobile),$.mobile.changePage=function(t,n){_.isString(t)&&n&&n.transition&&(n.transition=i.queryPageTransition(n.transition)),e(t,n)}}),r=e||(e={}),s=r.UI||(r.UI={}),l=function(){function e(){}return e.registerDomExtension=function(e){this.s_domExtensions.push(e)},e.applyDomExtension=function(e,t){this.s_domExtensions.forEach(function(n){n(e,t)})},e.s_domExtensions=[],e}(),s.ExtensionManager=l,c=e||(e={}),p=c.UI||(c.UI={}),u="[CDP.UI.Toast] ",function(e){var t,n,o,i;e.LENGTH_SHORT=1500,e.LENGTH_LONG=4e3,(n=t=e.OffsetX||(e.OffsetX={}))[n.LEFT=1]="LEFT",n[n.RIGHT=2]="RIGHT",n[n.CENTER=4]="CENTER",(i=o=e.OffsetY||(e.OffsetY={}))[i.TOP=16]="TOP",i[i.BOTTOM=32]="BOTTOM",i[i.CENTER=64]="CENTER";var a=function(){function e(){}return e.prototype.getClass=function(){return"ui-loader ui-overlay-shadow ui-corner-all"},e.prototype.getStyle=function(){return{padding:"7px 25px 7px 25px",display:"block","background-color":"#1d1d1d","border-color":"#1b1b1b",color:"#fff","text-shadow":"0 1px 0 #111","font-weight":"bold",opacity:.8}},e.prototype.getOffsetPoint=function(){return t.CENTER|o.BOTTOM},e.prototype.getOffsetX=function(){return 0},e.prototype.getOffsetY=function(){return-75},e}();e.StyleBuilderDefault=a,e.show=function(n,i,r){void 0===i&&(i=e.LENGTH_SHORT);var s=$.mobile,l=r||new a,c=!!l.getStyle(),p=n.replace(/\n/g,"<br/>"),f=$("<div>"+p+"</div>").addClass(l.getClass());c&&f.css(l.getStyle()),f.css({top:0,left:0}).appendTo(s.pageContainer);var d,h,g=l.getOffsetPoint(),_=$(window),b=f.width()+parseInt(f.css("padding-left"),10)+parseInt(f.css("padding-right"),10),v=f.height()+parseInt(f.css("padding-top"),10)+parseInt(f.css("padding-bottom"),10);switch(15&g){case t.LEFT:d=0+l.getOffsetX();break;case t.RIGHT:d=_.width()-b+l.getOffsetX();break;case t.CENTER:d=_.width()/2-b/2+l.getOffsetX();break;default:console.warn(u+"warn. unknown offsetPoint:"+(15&g)),d=_.width()/2-b/2+l.getOffsetX()}switch(240&g){case o.TOP:h=0+l.getOffsetY();break;case o.BOTTOM:h=_.height()-v+l.getOffsetY();break;case o.CENTER:h=_.height()/2-v/2+l.getOffsetY();break;default:console.warn(u+"warn. unknown offsetPoint:"+(240&g)),h=_.height()/2-v/2+l.getOffsetY()}f.css({top:h,left:d}).delay(i).fadeOut(400,function(){$(this).remove()})}}(p.Toast||(p.Toast={})),f=e||(e={}),d=f.UI||(f.UI={}),h=f.Promise,g=f.Framework,b="[CDP.UI.Dialog] ",v=function(){function e(t,n){this._template=null,this._settings=null,this._$dialog=null,e.initCommonCondition(),this._settings=$.extend({},e.s_defaultOptions,n),this._template=f.Tools.Template.getJST(t,this._settings.src)}return e.prototype.show=function(t){var n=this,o=$(document),i=$("body"),a=i.pagecontainer("getActivePage"),r={overflow:"hidden","overflow-x":"hidden","overflow-y":"hidden"},s={overflow:i.css("overflow"),"overflow-x":i.css("overflow-x"),"overflow-y":i.css("overflow-y")},l=i.scrollTop(),c={overflow:a.css("overflow"),"overflow-x":a.css("overflow-x"),"overflow-y":a.css("overflow-y")},p="scroll touchmove mousemove MSPointerMove",u=function(e){"deny"===n._settings.scrollEvent?e.preventDefault():"adjust"===n._settings.scrollEvent&&i.scrollTop(l)};return null!=t&&(this._settings=$.extend({},this._settings,t)),this._settings.afterclose&&!this._settings.forceOverwriteAfterClose&&(console.warn(b+"cannot accept 'afterclose' option. please instead using 'popupafterclose' event."),delete this._settings.afterclose),this._settings._titleState=this._settings.title?"ui-has-title":"ui-no-title",this._$dialog=$(this._template(this._settings)),this._$dialog.localize(),i.append(this._$dialog),this.resolveTheme(),this._$dialog.on("popupcreate",function(t){"allow"!==n._settings.scrollEvent&&o.on(p,u),i.css(r),a.css(r),e.register(n)}).enhanceWithin(),null!=this._settings.domExtensionOptions&&d.ExtensionManager.applyDomExtension(this._$dialog,this._settings.domExtensionOptions),this.onBeforeShow().done(function(){n._$dialog.popup($.extend({},{positionTo:"window",afterclose:function(t,r){a.css(c),i.css(s),"allow"!==n._settings.scrollEvent&&o.off(p,u),e.register(null),n._$dialog.remove(),n._$dialog=null}},n._settings)).popup("open").on(n._settings.event,function(e){var t=$(e.target).attr("data-auto-close");null==t&&(t=n._settings.defaultAutoClose?"true":"false"),"false"!==t&&(n.close(),e.preventDefault())})}).fail(function(e){console.error(b+"Dialog.show() failed."),n._$dialog&&n._$dialog.trigger("error",e)}),this._$dialog},e.prototype.close=function(){this._$dialog&&this._$dialog.popup("close")},Object.defineProperty(e.prototype,"$el",{get:function(){return this._$dialog},enumerable:!0,configurable:!0}),e.prototype.onBeforeShow=function(){return h.resolve()},e.prototype.resolveTheme=function(){var e,t=function(){return $(".ui-page-active").jqmData("theme")};this._settings.theme||this._$dialog.jqmData("theme")||(this._settings.theme=e=t()),this._settings.overlayTheme||this._$dialog.jqmData("overlay-theme")||(this._settings.overlayTheme=e||t()),this._settings.transition=d.Theme.queryDialogTransition(this._settings.transition)},e.setDefaultOptions=function(t){e.initCommonCondition(),$.extend(!0,e.s_defaultOptions,t)},e.register=function(t){null!=t&&null!=e.s_activeDialog&&console.warn(b+"new dialog proc is called in the past dialog's one. use setTimeout() for post process."),e.s_activeDialog=t},e.initCommonCondition=function(){g.isInitialized()?null==e.s_oldBackKeyHandler&&(e.s_oldBackKeyHandler=f.setBackButtonHandler(null),f.setBackButtonHandler(e.customBackKeyHandler),e.s_defaultOptions={idPositive:"dlg-btn-positive",idNegative:"dlg-btn-negative",event:g.getDefaultClickEvent(),dismissible:!1,defaultAutoClose:!1,transition:"platform-default",labelPositive:"OK",labelNegative:"Cancel",backKey:"close",scrollEvent:"deny",domExtensionOptions:{}}):console.warn(b+"initCommonCondition() should be called after Framework.initialized.")},e.customBackKeyHandler=function(t){null==e.s_activeDialog?e.s_oldBackKeyHandler(t):"close"===e.s_activeDialog._settings.backKey?e.s_activeDialog.close():"function"==typeof e.s_activeDialog._settings.backKey&&e.s_activeDialog._settings.backKey(t)},e.s_activeDialog=null,e.s_oldBackKeyHandler=null,e.s_defaultOptions=null,e}(),d.Dialog=v;var m,y,T,w,E,P,x,I,C,S,O,H,k,B,M,D,R,V,U,A,L,N,j,F,K,z,X,G,Y,q,W,J,Q,Z,ee,te,ne,oe,ie,ae,re,se,le,ce,pe,ue=this&&this.__extends||(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}m(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});return function(e){e.alert=function(t,n){return new e.Dialog('\n            <script type="text/template">\n                <section class="ui-modal" data-role="popup" data-corners="false">\n                    <div class="ui-content">\n                        <h1 class="ui-title {{_titleState}}">{{title}}</h1>\n                        <p class="ui-message">{{message}}</p>\n                    </div>\n                    <div class="ui-modal-footer ui-grid-solo">\n                        <button id="{{idPositive}}" class="ui-btn ui-block-a ui-text-emphasis" data-auto-close="true">{{labelPositive}}</button>\n                    </div>\n                </section>\n            <\/script>\n        ',$.extend({},{src:null,message:t},n)).show()},e.confirm=function(t,n){return new e.Dialog('\n            <script type="text/template">\n                <section class="ui-modal" data-role="popup" data-corners="false">\n                    <div class="ui-content">\n                        <h1 class="ui-title {{_titleState}}">{{title}}</h1>\n                        <p class="ui-message">{{message}}</p>\n                    </div>\n                    <div class="ui-modal-footer ui-grid-a">\n                        <button id="{{idNegative}}" class="ui-btn ui-block-a" data-auto-close="true">{{labelNegative}}</button>\n                        <button id="{{idPositive}}" class="ui-btn ui-block-b ui-text-emphasis" data-auto-close="true">{{labelPositive}}</button>\n                    </div>\n                </section>\n            <\/script>\n        ',$.extend({},{src:null,message:t},n)).show()};var t=function(e){function t(t,n){var o=e.call(this,t,n)||this;return o._eventOK=n.eventOK||"promptok",o}return ue(t,e),t.prototype.onBeforeShow=function(){var t=this,n=function(e){var n=t.$el.find("#_ui-prompt").val();t.$el.trigger(t._eventOK,n),t.close(),e.preventDefault()};return this.$el.on("vclick",".command-prompt-ok ",function(e){n(e)}).on("keydown","#_ui-prompt",function(e){13===e.keyCode&&n(e)}),e.prototype.onBeforeShow.call(this)},t}(e.Dialog);e.prompt=function(e,n){return new t('\n            <script type="text/template">\n                <section class="ui-modal" data-role="popup" data-corners="false">\n                    <div class="ui-content">\n                        <h1 class="ui-title {{_titleState}}">{{title}}</h1>\n                        <p class="ui-message">{{message}}</p>\n                        <label for="_ui-prompt" class="ui-hidden-accessible"></label>\n                        <input type="text" name="_ui-prompt" id="_ui-prompt">\n                    </div>\n                    <div class="ui-modal-footer ui-grid-a">\n                        <button id="{{idNegative}}" class="ui-btn ui-block-a" data-auto-close="true">{{labelNegative}}</button>\n                        <button id="{{idPositive}}" class="command-prompt-ok ui-btn ui-block-b ui-text-emphasis" data-auto-close="false">{{labelPositive}}</button>\n                    </div>\n                </section>\n            <\/script>\n        ',$.extend({},{src:null,message:e},n)).show()}}((y=e||(e={})).UI||(y.UI={})),T=e||(e={}),w=T.UI||(T.UI={}),E=T.Framework.Router,P=T.Framework.View,x=T.Tools.Template,I=function(e){function t(t,n){var o=e.call(this,n=$.extend({el:t.$page.find("[data-role='header']"),backCommandSelector:".command-back",backCommandKind:"pageback"},n))||this;return o._owner=t,o._options=n,n.baseTemplate?o._template=n.baseTemplate:o._template=x.getJST("\n                    <script type='text/template'>\n                        <header class='ui-header-base ui-body-{{theme}}'>\n                            <div class='ui-fixed-back-indicator'></div>\n                        </header>\n                    <\/script>\n                "),o.setElement(o.$el,!0),o}return ue(t,e),t.prototype.create=function(){return this.createHeaderBase()},t.prototype.activate=function(){return this.showIndicator()},t.prototype.inactivate=function(){return this.hideIndicator()},t.prototype.release=function(){return this.releaseHeaderBase()},t.prototype.createHeaderBase=function(){return"fixed"===this._owner.$header.jqmData("position")&&(null==t.s_$headerBase&&(t.s_$headerBase=$(this._template({theme:this._owner.$page.jqmData("theme")}))),t.s_refCount++,t.s_$headerBase.appendTo($(document.body))),0<this.$el.find(".ui-back-indicator").length&&(this._hasBackIndicator=!0),t.s_$headerBase},t.prototype.showIndicator=function(){return null!=t.s_$headerBase&&this._hasBackIndicator&&t.s_$headerBase.find(".ui-fixed-back-indicator").addClass("show"),t.s_$headerBase},t.prototype.hideIndicator=function(){return null!=t.s_$headerBase&&t.s_$headerBase.find(".ui-fixed-back-indicator").removeClass("show"),t.s_$headerBase},t.prototype.releaseHeaderBase=function(){return"fixed"===this._owner.$header.jqmData("position")&&null!=t.s_$headerBase&&(t.s_refCount--,0===t.s_refCount&&(t.s_$headerBase.remove(),t.s_$headerBase=null)),t.s_$headerBase},t.prototype.events=function(){var e={};return this._options&&(e["vclick "+this._options.backCommandSelector]=this.onCommandBack),e},t.prototype.onCommandBack=function(e){e.preventDefault();var t=!1;this._owner&&(t=this._owner.onCommand(e,this._options.backCommandKind)),t||E.back()},t.s_refCount=0,t}(P),w.BaseHeaderView=I,C=e||(e={}),S=C.UI||(C.UI={}),O=function(e){function t(t,n,o){var i=e.call(this,t,n,o=$.extend({baseHeader:S.BaseHeaderView,backCommandHandler:"onPageBack",backCommandKind:"pageback",domExtensionOptions:{}},o))||this;return i._options=o,i}return ue(t,e),t.prototype.onPageBeforeCreate=function(t){this._options.baseHeader&&(this._baseHeader=new this._options.baseHeader(this,this._options),this._baseHeader.create()),e.prototype.onPageBeforeCreate.call(this,t)},t.prototype.onPageInit=function(t){null!=this._options.domExtensionOptions&&S.ExtensionManager.applyDomExtension(this.$page,this._options.domExtensionOptions),e.prototype.onPageInit.call(this,t)},t.prototype.onPageBeforeShow=function(t,n){this._baseHeader&&this._baseHeader.activate(),e.prototype.onPageBeforeShow.call(this,t,n)},t.prototype.onPageBeforeHide=function(t,n){this._baseHeader&&this._baseHeader.inactivate(),e.prototype.onPageBeforeHide.call(this,t,n)},t.prototype.onPageRemove=function(t){this._baseHeader&&(this._baseHeader.release(),this._baseHeader=null),e.prototype.onPageRemove.call(this,t)},t.prototype.onHardwareBackButton=function(t){var n=e.prototype.onHardwareBackButton.call(this,t);return n||(n=this.onCommand(t,this._options.backCommandKind)),n},t.prototype.onCommand=function(e,t){return!(this._options.backCommandKind!==t||!this._owner||!this._owner[this._options.backCommandHandler])&&this._owner[this._options.backCommandHandler](e)},t}(C.Framework.Page),S.BasePage=O,H=e||(e={}),k=H.UI||(H.UI={}),B=H.Promise,M=function(e){function t(t,n,o){var i=e.call(this,o)||this;i._pageOptions=null,i._basePage=null,i._statusMgr=null,i._pageOptions=$.extend({},{owner:i},o),i._basePage=i._pageOptions.basePage?new i._pageOptions.basePage(t,n,i._pageOptions):new k.BasePage(t,n,i._pageOptions),i._statusMgr=new k.StatusManager;var a=!!i.events;return i.setElement(i.$page,a),i}return ue(t,e),t.prototype.statusAddRef=function(e){return this._statusMgr.statusAddRef(e)},t.prototype.statusRelease=function(e){return this._statusMgr.statusRelease(e)},t.prototype.statusScope=function(e,t){this._statusMgr.statusScope(e,t)},t.prototype.isStatusIn=function(e){return this._statusMgr.isStatusIn(e)},Object.defineProperty(t.prototype,"active",{get:function(){return this._basePage.active},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"url",{get:function(){return this._basePage.url},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._basePage?this._basePage.id:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"$page",{get:function(){return this._basePage.$page},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"$header",{get:function(){return this._basePage.$header},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"$footer",{get:function(){return this._basePage.$footer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"intent",{get:function(){return this._basePage.intent},set:function(e){this._basePage.intent=e},enumerable:!0,configurable:!0}),t.prototype.onOrientationChanged=function(e){this.trigger("pageview:orientation-changed",e)},t.prototype.onHardwareBackButton=function(e){return!1},t.prototype.onBeforeRouteChange=function(){return B.resolve()},t.prototype.onCommand=function(e,t){return!1},t.prototype.onInitialize=function(e){this.trigger("pageview:initialize",e)},t.prototype.onPageBeforeCreate=function(e){this.setElement(this.$page,!0),this.trigger("pageview:before-create",e)},t.prototype.onPageInit=function(e){this.trigger("pageview:page-init",e)},t.prototype.onPageBeforeShow=function(e,t){this.trigger("pageview:before-show",e,t)},t.prototype.onPageShow=function(e,t){this.trigger("pageview:show",e,t)},t.prototype.onPageBeforeHide=function(e,t){this.trigger("pageview:before-hide",e,t)},t.prototype.onPageHide=function(e,t){this.trigger("pageview:hide",e,t)},t.prototype.onPageRemove=function(e){this.trigger("pageview:remove",e),this.remove(),this.el=null,this.$el=null},t}(H.Framework.View),k.PageView=M,D=e||(e={}),R=D.UI||(D.UI={}),V=function(e){function t(t){var n=e.call(this,t)||this;if(n._owner=null,n._owner=t.owner,t.$el){var o=!!n.events;n.setElement(t.$el,o)}return n.listenTo(n._owner,"pageview:orientation-changed",n.onOrientationChanged.bind(n)),n.listenTo(n._owner,"pageview:initialize",n.onInitialize.bind(n)),n.listenTo(n._owner,"pageview:before-create",n.onPageBeforeCreate.bind(n)),n.listenTo(n._owner,"pageview:page-init",n.onPageInit.bind(n)),n.listenTo(n._owner,"pageview:before-show",n.onPageBeforeShow.bind(n)),n.listenTo(n._owner,"pageview:show",n.onPageShow.bind(n)),n.listenTo(n._owner,"pageview:before-hide",n.onPageBeforeHide.bind(n)),n.listenTo(n._owner,"pageview:hide",n.onPageHide.bind(n)),n.listenTo(n._owner,"pageview:remove",n.onPageRemove.bind(n)),n}return ue(t,e),Object.defineProperty(t.prototype,"owner",{get:function(){return this._owner},enumerable:!0,configurable:!0}),t.prototype.onOrientationChanged=function(e){},t.prototype.onInitialize=function(e){},t.prototype.onPageBeforeCreate=function(e){},t.prototype.onPageInit=function(e){},t.prototype.onPageBeforeShow=function(e,t){},t.prototype.onPageShow=function(e,t){},t.prototype.onPageBeforeHide=function(e,t){},t.prototype.onPageHide=function(e,t){},t.prototype.onPageRemove=function(e){this.stopListening()},t}(D.Framework.View),R.PageContainerView=V,function(e){var t,n,o="[CDP.UI.TabHostView] ";(n=t||(t={})).TABVIEW_CLASS="ui-tabview",n.TABVIEW_SELECTOR="."+n.TABVIEW_CLASS,n.TABHOST_CLASS="ui-tabhost",n.TABHOST_SELECTOR="."+n.TABHOST_CLASS,n.TABHOST_REFRESH_COEFF=1,n.TABHOST_REFRESH_INTERVAL=200;var i=function(n){function i(t){var i=n.call(this,t)||this;if(i._tabs=[],i._activeTabIndex=0,i._flipsnap=null,i._flipEndEventHandler=null,i._flipMoveEventHandler=null,i._flipDeltaCache=0,i._scrollEndEventHandler=null,i._scrollMoveEventHandler=null,i._refreshTimerId=null,null==e.global.Flipsnap)return console.error(o+"flipsnap module doesn't load."),i;i._settings=$.extend({tabContexts:[],tabMoveHandler:function(e){},tabStopHandler:function(e,t){}},t),i._flipEndEventHandler=function(e){var t=e.originalEvent;i._flipDeltaCache=0,i.onTabChanged(t.newPoint,t.moved)},i._flipMoveEventHandler=function(e){var t=e.originalEvent;i._flipDeltaCache+=t.delta,!i._settings.enableBounce&&(-1===t.direction&&0===i._activeTabIndex&&0<i._flipDeltaCache||1===t.direction&&i._activeTabIndex===i._tabs.length-1&&i._flipDeltaCache<0)?(e.preventDefault(),i._flipsnap.moveToPoint(t.newPoint)):(i.onTabMoving(t.delta),i._tabs.forEach(function(e){e.onTabScrolling(i._activeTabIndex,t.delta)}),i.preprocess(i._activeTabIndex))},i._scrollEndEventHandler=function(e){i.onScrollStop()},i._scrollMoveEventHandler=function(e){i.onScroll()},i._settings.initialWidth&&i.$el.width(i._settings.initialWidth),i._settings.initialHeight&&i.$el.height(i._settings.initialHeight);var a=i._settings.initialWidth,r=i.$el.height(),s=i._settings.tabContexts.slice();return 0<s.length?s.forEach(function(e){new e.ctor($.extend({initialHeight:r},e.options,{host:i,delayRegister:!1}))}):i.onTabViewSetupRequest(r),i._settings.initImmediate&&i.initializeTabViews(),i.setFlipsnapCondition($.extend({},{distance:a},i._settings)),i.setActiveTab(i._activeTabIndex,0,!0),i}return ue(i,n),i.prototype.initializeTabViews=function(){var e=this,n=this.$el.find(t.TABVIEW_SELECTOR);this._tabs.forEach(function(t,o){t.onInitialize(e,$(n[o]))})},i.prototype.destroy=function(){this.resetFlipsnapCondition(),this._tabs.forEach(function(e){e.onDestroy()}),this._tabs=[]},i.prototype.getBaseHeight=function(){return this.$el.height()},i.prototype.registerTabView=function(e){null==this.getTabIndexOf(e)?this._tabs.push(e):console.warn(o+"tab instance already registered.")},i.prototype.getTabIndexOf=function(e){for(var t=0,n=this._tabs.length;t<n;t++)if(e===this._tabs[t])return t;return null},i.prototype.resetTabPosition=function(){this._tabs.forEach(function(e){e.scrollTo(0,!1,0),e.refresh()}),this.setActiveTab(0,0,!0)},i.prototype.onTabViewSetupRequest=function(e){},i.prototype.setActiveTab=function(e,n,o){var i=this;if(this.validTab(e)&&(o||this._activeTabIndex!==e)){this.preprocess(e);var a=this._activeTabIndex;this._activeTabIndex=e,this._flipsnap.moveToPoint(this._activeTabIndex,n);var r=function(){i.postprocess(a),i.onTabChanged(i._activeTabIndex,!1)};return 0===(n=n||parseInt(this._flipsnap.transitionDuration,10))?r():setTimeout(function(){r()},n*t.TABHOST_REFRESH_COEFF),!0}return!1},i.prototype.getTabCount=function(){return this._tabs.length},i.prototype.getActiveTabIndex=function(){return this._activeTabIndex},i.prototype.getSwipeDelta=function(){return this._flipDeltaCache},i.prototype.onTabMoving=function(e){this.trigger(i.EVENT_TAB_MOVE,e)},i.prototype.onTabChanged=function(e,t){t&&this.setActiveTab(e),this.trigger(i.EVENT_TAB_STOP,e,t)},i.prototype.getScrollPos=function(){return this._activeTabView?this._activeTabView.getScrollPos():0},i.prototype.getScrollPosMax=function(){return this._activeTabView?this._activeTabView.getScrollPosMax():0},i.prototype.scrollTo=function(e,t,n){this._activeTabView&&this._activeTabView.scrollTo(e,t,n)},i.prototype.onScroll=function(){this.trigger(i.EVENT_SCROLL_MOVE)},i.prototype.onScrollStop=function(){this.trigger(i.EVENT_SCROLL_STOP)},i.prototype.setScrollHandler=function(e,t){this._activeTabView&&this._activeTabView.setScrollHandler(e,t)},i.prototype.setScrollStopHandler=function(e,t){this._activeTabView&&this._activeTabView.setScrollStopHandler(e,t)},i.prototype.onOrientationChanged=function(e){var o=this;if(n.prototype.onOrientationChanged.call(this,e),this._tabs.forEach(function(t){t.onOrientationChanged(e)}),null!=this._refreshTimerId&&clearTimeout(this._refreshTimerId),this._flipsnap&&0<this._tabs.length){var i=function(){o._flipsnap&&o._flipsnap._maxPoint!==o._tabs.length-1?(o._flipsnap.refresh(),o._refreshTimerId=setTimeout(i,t.TABHOST_REFRESH_INTERVAL)):o._refreshTimerId=null};this._flipsnap.refresh(),this._refreshTimerId=setTimeout(i,t.TABHOST_REFRESH_INTERVAL)}},i.prototype.onPageShow=function(e,t){n.prototype.onPageShow.call(this,e,t),this.rebuild()},i.prototype.rebuild=function(){this._tabs.forEach(function(e){e.needRebuild&&(e.rebuild(),e.needRebuild=!1)})},i.prototype.setFlipsnapCondition=function(n){this._flipsnap=e.global.Flipsnap(t.TABHOST_SELECTOR,n),$(this._flipsnap.element).on("fstouchend",this._flipEndEventHandler.bind(this)),$(this._flipsnap.element).on("fstouchmove",this._flipMoveEventHandler.bind(this))},i.prototype.resetFlipsnapCondition=function(){this._flipsnap&&($(this._flipsnap.element).off("fstouchmove",this._flipMoveEventHandler.bind(this)),$(this._flipsnap.element).off("fstouchend",this._flipEndEventHandler.bind(this)),this._flipsnap.destroy(),this._flipsnap=null),this._flipDeltaCache=0},i.prototype.preprocess=function(e){var t=this;this._tabs.forEach(function(n,o){o!==t._activeTabIndex&&n.treatScrollPosition(),(t._activeTabIndex<e&&t._activeTabIndex<o&&o<=e||e<t._activeTabIndex&&e<=o&&o<t._activeTabIndex)&&n.$el.css("visibility","visible")})},i.prototype.postprocess=function(e){var t=this;this._tabs.forEach(function(n,o){if(null!=t._settings.inactiveVisibleTabDistance){var i=t._settings.inactiveVisibleTabDistance;t._activeTabIndex-i<=o&&o<=t._activeTabIndex+i?(n.$el.css("visibility","visible"),n.onVisibilityChanged(!0)):(n.$el.css("visibility","hidden"),n.onVisibilityChanged(!1))}o===t._activeTabIndex?(n.onTabSelected(),n.setScrollHandler(t._scrollMoveEventHandler,!0),n.setScrollStopHandler(t._scrollEndEventHandler,!0)):o===e&&(n.setScrollHandler(t._scrollMoveEventHandler,!1),n.setScrollStopHandler(t._scrollEndEventHandler,!1),n.onTabReleased())})},i.prototype.validTab=function(e){return 0!==this._tabs.length&&(0<=e&&e<this._tabs.length||(console.error(o+"invalid tab index. index: "+e),!1))},Object.defineProperty(i.prototype,"_activeTabView",{get:function(){return this._tabs[this._activeTabIndex]},enumerable:!0,configurable:!0}),i.EVENT_SCROLL_MOVE="tabhost:scrollmove",i.EVENT_SCROLL_STOP="tabhost:scrollstop",i.EVENT_TAB_MOVE="tabhost:tabmove",i.EVENT_TAB_STOP="tabhost:tavstop",i}(e.PageContainerView);e.TabHostView=i}((U=e||(e={})).UI||(U.UI={})),A=e||(e={}),L=A.UI||(A.UI={}),N=1,j=function(e){function t(t){var n=e.call(this,$.extend({},{initialHeight:N},t))||this;return n._host=null,n._needRebuild=!1,n._host=t.host,t.delayRegister||n._host.registerTabView(n),n}return ue(t,e),Object.defineProperty(t.prototype,"host",{get:function(){return this._host},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"needRebuild",{get:function(){return this._needRebuild},set:function(e){this._needRebuild=e},enumerable:!0,configurable:!0}),t.prototype.treatScrollPosition=function(){this.core.treatScrollPosition()},t.prototype.onInitialize=function(e,t){this._host=e,this.core.initialize(t,e.getBaseHeight()),Backbone.View.prototype.setElement.call(this,t,!0)},t.prototype.onDestroy=function(){this.remove(),this._host=null},t.prototype.onVisibilityChanged=function(e){},t.prototype.onTabSelected=function(){this.core.setActiveState(!0)},t.prototype.onTabReleased=function(){this.core.setActiveState(!1)},t.prototype.onTabScrolling=function(e,t){},t.prototype.onOrientationChanged=function(e){},Object.defineProperty(t.prototype,"core",{get:function(){return this._scrollMgr},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tabIndex",{get:function(){return null==this._tabIndex&&(this._tabIndex=this._host.getTabIndexOf(this)),this._tabIndex},enumerable:!0,configurable:!0}),t.prototype.isActive=function(){return this.tabIndex===this._host.getActiveTabIndex()},t}(L.ListView),L.TabView=j,F=e||(e={}),K=F.UI||(F.UI={}),z=function(e){function t(t,n,o){var i=e.call(this,t,n,$.extend({},{autoDestoryElement:!1},o))||this;return i._scrollMgr=null,i._needRebuild=!1,i._scrollMgr=new K.ScrollManager(o),i}return ue(t,e),t.prototype.reserveRebuild=function(){this._needRebuild=!0},t.prototype.onOrientationChanged=function(e){this._scrollMgr.setBaseHeight(this.getPageBaseHeight())},t.prototype.onBeforeRouteChange=function(){return this._pageOptions.autoDestoryElement&&this._scrollMgr.destroy(),e.prototype.onBeforeRouteChange.call(this)},t.prototype.onPageBeforeShow=function(t,n){e.prototype.onPageBeforeShow.call(this,t,n),this._scrollMgr.initialize(this.$page,this.getPageBaseHeight())},t.prototype.onPageShow=function(t,n){e.prototype.onPageShow.call(this,t,n),this._scrollMgr.setBaseHeight(this.getPageBaseHeight()),this._needRebuild&&(this.rebuild(),this._needRebuild=!1)},t.prototype.onPageRemove=function(t){e.prototype.onPageRemove.call(this,t),this.release()},t.prototype.isInitialized=function(){return this._scrollMgr.isInitialized()},t.prototype.addItem=function(e,t,n,o){this._addLine(new K.LineProfile(this._scrollMgr,Math.floor(e),t,n),o)},t.prototype.removeItem=function(e,t,n){this._scrollMgr.removeItem(e,t,n)},t.prototype.getItemInfo=function(e){return this._scrollMgr.getItemInfo(e)},t.prototype.refresh=function(){this._scrollMgr.refresh()},t.prototype.update=function(){this._scrollMgr.update()},t.prototype.rebuild=function(){this._scrollMgr.rebuild()},t.prototype.release=function(){this._scrollMgr.release()},t.prototype.backup=function(e){return this._scrollMgr.backup(e)},t.prototype.restore=function(e,t){void 0===t&&(t=!0);var n=this._scrollMgr.restore(e,t);return n&&!t&&this.reserveRebuild(),n},t.prototype.hasBackup=function(e){return this._scrollMgr.hasBackup(e)},t.prototype.clearBackup=function(e){return this._scrollMgr.clearBackup(e)},Object.defineProperty(t.prototype,"backupData",{get:function(){return this._scrollMgr.backupData},enumerable:!0,configurable:!0}),t.prototype.setScrollHandler=function(e,t){this._scrollMgr.setScrollHandler(e,t)},t.prototype.setScrollStopHandler=function(e,t){this._scrollMgr.setScrollStopHandler(e,t)},t.prototype.getScrollPos=function(){return this._scrollMgr.getScrollPos()},t.prototype.getScrollPosMax=function(){return this._scrollMgr.getScrollPosMax()},t.prototype.scrollTo=function(e,t,n){this._scrollMgr.scrollTo(e,t,n)},t.prototype.ensureVisible=function(e,t){this._scrollMgr.ensureVisible(e,t)},Object.defineProperty(t.prototype,"core",{get:function(){return this._scrollMgr},enumerable:!0,configurable:!0}),t.prototype._addLine=function(e,t){this._scrollMgr._addLine(e,t)},t.prototype.getPageBaseHeight=function(){return $(window).height()-parseInt(this.$page.css("padding-top"),10)},t}(K.PageView),K.PageListView=z,X=e||(e={}),G=X.UI||(X.UI={}),Y=function(e){function t(t,n,o){var i=e.call(this,t,n,o)||this;return i._expandManager=null,i._expandManager=new G.ExpandManager(i),i}return ue(t,e),t.prototype.newGroup=function(e){return this._expandManager.newGroup(e)},t.prototype.getGroup=function(e){return this._expandManager.getGroup(e)},t.prototype.registerTopGroup=function(e){this._expandManager.registerTopGroup(e)},t.prototype.getTopGroups=function(){return this._expandManager.getTopGroups()},t.prototype.expandAll=function(){this._expandManager.expandAll()},t.prototype.collapseAll=function(e){this._expandManager.collapseAll(e)},t.prototype.isExpanding=function(){return this._expandManager.isExpanding()},t.prototype.isCollapsing=function(){return this._expandManager.isCollapsing()},t.prototype.isSwitching=function(){return this._expandManager.isSwitching()},Object.defineProperty(t.prototype,"layoutKey",{get:function(){return this._expandManager.layoutKey},set:function(e){this._expandManager.layoutKey=e},enumerable:!0,configurable:!0}),t.prototype.release=function(){e.prototype.release.call(this),this._expandManager.release()},t.prototype.backup=function(e){return this._expandManager.backup(e)},t.prototype.restore=function(e,t){return void 0===t&&(t=!0),this._expandManager.restore(e,t)},t}(G.PageListView),G.PageExpandableListView=Y,q=e||(e={}),(J=q.UI||(q.UI={})).Extension||(J.Extension={}),W=q.Framework,$.fn.ripple=function(e){var t=$(this);return t.length<=0?t:t.on(W.Patch.s_vclickEvent,function(e){var t=$(this);0===t.find(".ui-ripple-ink").length&&t.prepend("<div class='ui-ripple-ink'></div>");var n=t.find(".ui-ripple-ink");if(n.removeClass("ui-ripple-animate"),!n.height()&&!n.width()){var o=Math.max(t.outerWidth(),t.outerHeight());n.css({height:o,width:o})}var i=e.pageX-t.offset().left-n.width()/2,a=e.pageY-t.offset().top-n.height()/2,r=t.data("ripple-color");n.on("animationend webkitAnimationEnd",function(e){n.off(),n.removeClass("ui-ripple-animate"),n=null}),n.css({top:a+"px",left:i+"px",background:r}).addClass("ui-ripple-animate")})},J.ExtensionManager.registerDomExtension(function(e,t){var n=[".ui-ripple-none",".ui-flipswitch-on",".ui-slider-handle",".ui-input-clear"],o=".ui-btn";return e.hasClass("ui-page")&&(o=".ui-content .ui-btn"),e.find(o).filter(function(e,t){return!$(t).is(n.join(","))}).addClass("ui-ripple"),e.find(".ui-ripple").each(function(e,n){$(n).ripple(t)}),e}),Q=e||(e={}),function(e){var t,n=Q.Tools.Template;function o(e){for(var t,n=["-webkit-",""],o=function(e){return e&&"none"!==e},i=0,a=n.length;i<a;i++){if(!o(t)&&o(t=e.css(n[i]+"mask-image"))){var r=t.match(/(url\(data:image\/svg\+xml;)([\s\S]*)?(base64,[\s\S]*\))/);t=r?r[1]+"bust="+Date.now().toString(36)+";"+r[3]:null}o(t)&&e.css(n[i]+"mask-image",t)}return e}$.fn.spinner=function(e){return"string"==typeof e?o($(this)):function(e,i){if(e.length<=0)return e;t||(t=n.getJST('\n                <script type="text/template">\n                    <span class="ui-spinner-base">\n                        <span class="ui-spinner-inner">\n                            <span class="ui-spinner-inner-gap" {{borderTop}}></span>\n                            <span class="ui-spinner-inner-left">\n                                <span class="ui-spinner-inner-half-circle" {{border}}></span>\n                            </span>\n                            <span class="ui-spinner-inner-right">\n                                <span class="ui-spinner-inner-half-circle" {{border}}></span>\n                            </span>\n                        </span>\n                    </span>\n                <\/script>\n            '));var a,r=e.data("spinner-color"),s=null;return r&&(e.css({"background-color":r}),s={borderTop:"style=border-top-color:"+(a=r)+";",border:"style=border-color:"+a+";"}),e.append(t(s)),o(e)}($(this))},Z.ExtensionManager.registerDomExtension(function(e,t){return e.find(".ui-spinner, .ui-icon-loading").each(function(e,n){$(n).spinner(t)}),e})}((Z=Q.UI||(Q.UI={})).Extension||(Z.Extension={})),ee=e||(e={}),(te=ee.UI||(ee.UI={})).Extension||(te.Extension={}),te.ExtensionManager.registerDomExtension(function(e,t){var n=function(e,t){var n=$(e);t?n.addClass("ui-float-label-floating"):n.removeClass("ui-float-label-floating")};return e.find("label.ui-float-label, .ui-float-label label").each(function(t,o){var i,a,r;i=o,a=$(i).attr("for"),"search"===(r=e.find("#"+a)).jqmData("type")&&$(i).addClass("ui-float-label-has-icon"),n(i,!!r.val()),r.on("keyup change input focus blur cut paste",function(e){n(i,!!$(e.target).val())})}),e}),ne=e||(e={}),(ie=ne.UI||(ne.UI={})).Extension||(ie.Extension={}),oe=ne.Framework,ie.ExtensionManager.registerDomExtension(function(e,t){var n=function(){return e.find(".ui-flipswitch")},o=function(e){var t=e.find("input");if(t.length)return t;var n=e.find("select");return n.length?n:null},i=function(e,t){e&&("INPUT"===e[0].nodeName?e.prop("checked",t).flipswitch("refresh"):"SELECT"===e[0].nodeName&&e.val(t?"on":"off").flipswitch("refresh"))};return n().on("vclick _change_flipswich",function(e){var t=$(e.currentTarget),n=$(e.target),a=o(t),r=!t.hasClass("ui-flipswitch-active");n.hasClass("ui-flipswitch-input")?i(a,r):n.hasClass("ui-flipswitch-on")&&oe.Platform.Mobile&&oe.Patch.isSupportedVclick()&&(i(a,r),e.preventDefault())}).each(function(e,t){(function(e){var t=o(e);if(t){var n=t[0].labels;if(n)return $(n)}return $()})($(t)).on("vclick",function(e){var t,o,i=(t=$(e.target),o=t.attr("for"),n().find("[name='"+o+"']"));i.parent().hasClass("ui-state-disabled")||i.trigger("_change_flipswich"),e.preventDefault()})}),e}),ae=e||(e={}),(re=ae.UI||(ae.UI={})).Extension||(re.Extension={}),re.ExtensionManager.registerDomExtension(function(e,t){return e.find(".ui-slider-input").on("slidestop",function(e){$(e.currentTarget).parent().find(".ui-slider-handle").blur()}),e}),se=e||(e={}),(pe=se.UI||(se.UI={})).Extension||(pe.Extension={}),le=function(e){var t,n=e.target,o=e;null!=n.clientX&&null!=n.clientY||(null!=o.pageX&&null!=o.pageY?(n.clientX=o.pageX,n.clientY=o.pageY):o.changedTouches&&o.changedTouches[0]&&(n.clientX=o.changedTouches[0].pageX,n.clientY=o.changedTouches[0].pageY)),/(SELECT|INPUT|TEXTAREA)/i.test(n.tagName)||((t=document.createEvent("MouseEvents")).initMouseEvent("click",!0,!0,o.view,1,n.screenX,n.screenY,n.clientX,n.clientY,o.ctrlKey,o.altKey,o.shiftKey,o.metaKey,0,null),t._constructed=!0,n.dispatchEvent(t))},ce=!1,pe.ExtensionManager.registerDomExtension(function(e,t){return!ce&&pe.global.IScroll&&pe.global.IScroll.utils&&(pe.global.IScroll.utils.click=le,ce=!0),e}),e.UI});
//# sourceMappingURL=cdp.ui.jqm.min.js.map