/*!
 * @cdp/mobile 2.1.0
 *
 * Date: 2017-11-06T05:40:51.092Z
 *
 * including:
 *     @cdp/core 2.1.0
 *     @cdp/promise 2.1.0
 *     @cdp/nativebridge 2.1.0
 *     @cdp/i18n 2.1.0
 *     @cdp/framework-jqm 2.1.0
 *     @cdp/tools 2.1.0
 *     @cdp/ui-listview 2.1.0
 *     @cdp/ui-jqm 2.1.0
 */

//======================================================//

/*!
 * cdp.core.js 2.1.0
 *
 * Date: 2017-11-06T05:33:05.221Z
 */
(function (root, factory) { if (typeof define === "function" && define.amd) { define("cdp.core",[],function () { return factory(root.CDP || (root.CDP = {})); }); } else if (typeof exports === "object") { module.exports = factory(root.CDP || (root.CDP = {})); } else { factory(root.CDP || (root.CDP = {})); } }(((this || 0).self || global), function (CDP) {
var CDP;
(function (CDP) {
    var TAG = "[CDP] ";
    /**
     * @en Accessor for system global object.<br>
     *     It'll be usually a `window` object.
     * @ja システムの global オブジェクトへのアクセス<br>
     *     通常は `window` オブジェクトとなる
     */
    CDP.global = Function("return this")();
    /**
     * @en Accsessor for Web root location <br>
     *     Only the browser environment will be an allocating place in index.html, and becomes effective.
     * @ja Web root location へのアクセス <br>
     *     index.html の配置場所となり、ブラウザ環境のみ有効となる.
     */
    CDP.webRoot = (function () {
        if (CDP.global.location) {
            var baseUrl = /(.+\/)[^/]*#[^/]+/.exec(CDP.global.location.href);
            if (!baseUrl) {
                baseUrl = /(.+\/)/.exec(CDP.global.location.href);
            }
            return baseUrl[1];
        }
    })();
    /**
     * @en Converter from relative path to absolute url string. <br>
     *     If you want to access to Assets and in spite of the script location, the function is available.
     * @ja 相対 path を絶対 URL に変換 <br>
     *     js の配置に依存することなく `assets` アクセスしたいときに使用する.
     *
     * @see https://stackoverflow.com/questions/2188218/relative-paths-in-javascript-in-an-external-file
     *
     * @example <br>
     *
     * ```ts
     *  console.log(toUrl("/res/data/collection.json"));
     *  // "http://localhost:8080/app/res/data/collection.json"
     * ```
     *
     * @param path
     *  - `en` set relative path from [[webRoot]].
     *  - `ja` [[webRoot]] からの相対パスを指定
     * @returns url string
     *  - `en` set relative path from [[webRoot]].
     *  - `ja` [[webRoot]] からの相対パスを指定
     */
    function toUrl(path) {
        var root = CDP.webRoot || "";
        if (null != path && null != path[0]) {
            if ("/" === path[0]) {
                return root + path.slice(1);
            }
            else {
                return root + path;
            }
        }
        else {
            return root;
        }
    }
    CDP.toUrl = toUrl;
    /**
     * @en Accessor for global Config object.
     * @ja Config オブジェクトへのアクセス
     */
    CDP.Config = CDP.Config || CDP.global.Config || {};
    /**
     * @en Initialize function for `cdp-core`. <br>
     *     This function applies patch to the run time environment.
     * @ja `cdp-core` の初期化関数<br>
     *     環境の差分を吸収する patch を適用する.
     */
    function initialize(options) {
        setTimeout(function () {
            try {
                CDP.Patch.apply();
                if (options && typeof options.success === "function") {
                    options.success();
                }
            }
            catch (error) {
                var cause = CDP.ensureErrorInfo(error);
                var errorInfo = CDP.makeErrorInfo(CDP.RESULT_CODE.ERROR_CDP_INITIALIZE_FAILED, TAG, cause.message, cause);
                console.error(errorInfo.message);
                if (options && typeof options.fail === "function") {
                    options.fail(errorInfo);
                }
            }
        });
    }
    CDP.initialize = initialize;
})(CDP || (CDP = {}));
var CDP;
(function (CDP) {
    var TAG = "[CDP.Patch] ";
    /**
     * @en Utility class for appling the patch to the run time environment.
     * @ja 実行環境用 Patch 適用ユーティリティクラス
     *
     * @internal
     */
    var Patch = /** @class */ (function () {
        function Patch() {
        }
        ///////////////////////////////////////////////////////////////////////
        // public static methods:
        /**
         * @en Apply the patch
         * @ja パッチの適用
         *
         * @internal
         */
        Patch.apply = function () {
            Patch.consolePatch();
            Patch.nodePatch();
        };
        ///////////////////////////////////////////////////////////////////////
        // private static methods:
        // console 用 patch
        Patch.consolePatch = function () {
            if (null == CDP.global.console || null == CDP.global.console.error) {
                CDP.global.console = {
                    count: function () { },
                    groupEnd: function () { },
                    time: function () { },
                    timeEnd: function () { },
                    trace: function () { },
                    group: function () { },
                    dirxml: function () { },
                    debug: function () { },
                    groupCollapsed: function () { },
                    select: function () { },
                    info: function () { },
                    profile: function () { },
                    assert: function () { },
                    msIsIndependentlyComposed: function () { },
                    clear: function () { },
                    dir: function () { },
                    warn: function () { },
                    error: function () { },
                    log: function () { },
                    profileEnd: function () { }
                };
            }
        };
        // WinRT 用 patch
        Patch.nodePatch = function () {
            if ("object" === typeof MSApp) {
                var _MSApp_1 = MSApp;
                var originalAppendChild_1 = Node.prototype.appendChild;
                Node.prototype.appendChild = function (node) {
                    var self = this;
                    return _MSApp_1.execUnsafeLocalFunction(function () {
                        return originalAppendChild_1.call(self, node);
                    });
                };
                var originalInsertBefore_1 = Node.prototype.insertBefore;
                Node.prototype.insertBefore = function (newElement, referenceElement) {
                    var self = this;
                    return _MSApp_1.execUnsafeLocalFunction(function () {
                        return originalInsertBefore_1.call(self, newElement, referenceElement);
                    });
                };
            }
        };
        return Patch;
    }());
    CDP.Patch = Patch;
})(CDP || (CDP = {}));
var __assign = (this && this.__assign) || Object.assign || function(t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
        s = arguments[i];
        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
            t[p] = s[p];
    }
    return t;
};
var CDP;
(function (CDP) {
    var UNKNOWN_ERROR_NAME = "Unknown Error";
    var ERROR_NAME_SEPARATOR = ": ";
    var CANCELED_MESSAGE = "abort";
    var s_code2message = {
        "0": "operation succeeded.",
        "1": "operation canceled.",
        "-1": "operation failed."
    };
    ///////////////////////////////////////////////////////////////////////
    // error utilities:
    /**
     * @en Common error code for the application.
     * @ja アプリケーション全体で使用する共通エラーコード定義
     */
    var RESULT_CODE;
    (function (RESULT_CODE) {
        /** `en` general success code <br> `ja` 汎用成功コード        */
        RESULT_CODE[RESULT_CODE["SUCCEEDED"] = 0] = "SUCCEEDED";
        /** `en` general cancel code  <br> `ja` 汎用キャンセルコード  */
        RESULT_CODE[RESULT_CODE["CANCELED"] = 1] = "CANCELED";
        /** `en` general error code   <br> `ja` 汎用エラーコード      */
        RESULT_CODE[RESULT_CODE["FAILED"] = -1] = "FAILED";
    })(RESULT_CODE = CDP.RESULT_CODE || (CDP.RESULT_CODE = {}));
    /**
     * @en The assignable range for the client's local result cord by which expansion is possible.
     * @ja クライアントが拡張可能なローカルリザルトコードのアサイン可能領域
     */
    CDP.MODULE_RESULT_CODE_RANGE = 1000;
    /**
     * @en Generate the [[ErrorInfo]] object.
     * @ja [[ErrorInfo]] オブジェクトを生成
     *
     * @example <br>
     *
     * ```ts
     *  someAsyncFunc()
     *      .then((result) => {
     *          outputMessage(result);
     *      })
     *      .catch((reason: Error) => {
     *          throw makeErrorInfo(
     *              RESULT_CODE.FAILED,
     *              TAG,
     *              "error occur.",
     *              reason  // set received error info.
     *          );
     *      });
     * ```
     *
     * @param resultCode
     *  - `en` set [[RESULT_CODE]] defined.
     *  - `ja` 定義した [[RESULT_CODE]] を指定
     * @param tag
     *  - `en` Log tag information
     *  - `ja` 識別情報
     * @param message
     *  - `en` Human readable message
     *  - `ja` メッセージを指定
     * @param cause
     *  - `en` low-level Error object
     *  - `ja` 下位のエラーを指定
     * @returns
     */
    function makeErrorInfo(resultCode, tag, message, cause) {
        var canceled = (cause && CANCELED_MESSAGE === cause.message) ? true : false;
        var msg = canceled ? CANCELED_MESSAGE : message;
        var code = canceled ? RESULT_CODE.CANCELED : resultCode;
        var errorInfo = new Error(msg || messageFromResultCode(code));
        errorInfo.name = buildErrorName(code, tag);
        errorInfo.code = code;
        errorInfo.cause = cause;
        return errorInfo;
    }
    CDP.makeErrorInfo = makeErrorInfo;
    /**
     * @en Generate canceled error information. <br>
     *     The [[ErrorInfo]] object generated by this function has [[RESULT_CODE.CANCELED]] code.
     * @ja キャンセルエラー情報生成 <br>
     *     この関数で生成された [[ErrorInfo]] は [[RESULT_CODE.CANCELED]] を格納する
     *
     * @param tag
     *  - `en` Log tag information
     *  - `ja` 識別情報
     * @param cause
     *  - `en` low-level Error object
     *  - `ja` 下位のエラーを指定
     * @returns
     */
    function makeCanceledErrorInfo(tag, cause) {
        return makeErrorInfo(RESULT_CODE.CANCELED, tag, CANCELED_MESSAGE, cause);
    }
    CDP.makeCanceledErrorInfo = makeCanceledErrorInfo;
    /**
     * @es Judge the error is canceled.
     * @ja エラー情報がキャンセルされたものか判定
     *
     * @example <br>
     *
     * ```ts
     *  :
     *  .catch((reason: ErrorInfo) => {
     *      if (!isCanceledError(reason)) {
     *          handleErrorInfo(reason);
     *      }
     *   });
     *  :
     * ```
     *
     * @param error
     * @returns
     *  - `en` true: canceled error / false: others
     *  - `ja` true: キャンセル / false: その他エラー
     */
    function isCanceledError(error) {
        if ("string" === typeof error) {
            return CANCELED_MESSAGE === error;
        }
        else {
            var errorInfo = error;
            if (errorInfo) {
                if (RESULT_CODE.CANCELED === errorInfo.code || CANCELED_MESSAGE === errorInfo.message) {
                    return true;
                }
            }
        }
        return false;
    }
    CDP.isCanceledError = isCanceledError;
    /**
     * @es Convert from any type error information to [[ErrorInfo]] object.
     * @jp あらゆるエラー入力を [[ErrorInfo]] に変換
     */
    function ensureErrorInfo(cause) {
        var unknown = {
            name: UNKNOWN_ERROR_NAME + ERROR_NAME_SEPARATOR,
            code: RESULT_CODE.FAILED,
            message: "unknown error occured.",
        };
        var valid = function (error) {
            if (!error) {
                return false;
            }
            return ("number" === typeof error.code &&
                "string" === typeof error.name &&
                "string" === typeof error.message);
        };
        if (valid(cause)) {
            return cause;
        }
        else if (cause instanceof Error) {
            cause.code = RESULT_CODE.FAILED;
            return cause;
        }
        else if ("string" === typeof cause) {
            if (isCanceledError(cause)) {
                return makeCanceledErrorInfo();
            }
            else {
                return __assign({}, unknown, { message: cause });
            }
        }
        else if ("number" === typeof cause) {
            return __assign({}, unknown, {
                cause: {
                    name: UNKNOWN_ERROR_NAME + ERROR_NAME_SEPARATOR,
                    message: "Please check the error code.",
                    code: cause
                }
            });
        }
        else if ("object" === typeof cause) {
            return __assign({}, unknown, cause);
        }
        return unknown;
    }
    CDP.ensureErrorInfo = ensureErrorInfo;
    /**
     * @internal for CDP modules assignable range.
     */
    CDP._MODULE_RESULT_CODE_RANGE_CDP = 100;
    /**
     * @en Offset value enumeration for [[RESULT_CODE]]. <br>
     *     The client can expand a definition in other module.
     * @ja [[RESULT_CODE]] のオフセット値 <br>
     *     エラーコード対応するモジュール内で 定義を拡張する.
     *
     * @example <br>
     *
     * ```ts
     *  export enum RESULT_CODE {
     *      ERROR_SOMEMODULE_UNEXPECTED  = DECLARE_ERROR_CODE(RESULT_CODE_BASE, LOCAL_CODE_BASE.COMMON + 1, "error unexpected."),
     *      ERROR_SOMEMODULE_INVALID_ARG = DECLARE_ERROR_CODE(RESULT_CODE_BASE, LOCAL_CODE_BASE.COMMON + 2, "invalid arguments."),
     *  }
     *  ASSIGN_RESULT_CODE(RESULT_CODE);
     * ```
     */
    var RESULT_CODE_BASE;
    (function (RESULT_CODE_BASE) {
        RESULT_CODE_BASE[RESULT_CODE_BASE["CDP_DECLARERATION"] = 0] = "CDP_DECLARERATION";
        //      MODULE_A = 1 * MODULE_RESULT_CODE_RANGE,    // ex) moduleA: abs(1001 ～ 1999)
        //      MODULE_B = 2 * MODULE_RESULT_CODE_RANGE,    // ex) moduleB: abs(2001 ～ 2999)
        //      MODULE_C = 3 * MODULE_RESULT_CODE_RANGE,    // ex) moduleC: abs(3001 ～ 3999)
        RESULT_CODE_BASE[RESULT_CODE_BASE["CDP"] = 1 * CDP._MODULE_RESULT_CODE_RANGE_CDP] = "CDP";
    })(RESULT_CODE_BASE = CDP.RESULT_CODE_BASE || (CDP.RESULT_CODE_BASE = {}));
    // "CDP" 以外の namespace で定義した場合は、ASSIGN ユーティリティをコールする.
    //  ASSIGN_RESULT_CODE_BASE(RESULT_CODE_BASE);
    /**
     * @en Generate success code.
     * @ja 成功コードを生成
     *
     * @param base
     * @param localCode
     * @param message
     */
    function DECLARE_SUCCESS_CODE(base, localCode, message) {
        if ("string" === typeof base) {
            base = CDP.RESULT_CODE_BASE[base];
        }
        return declareResultCode(base, localCode, message, true);
    }
    CDP.DECLARE_SUCCESS_CODE = DECLARE_SUCCESS_CODE;
    /**
     * @en Generate error code.
     * @ja エラーコード生成
     *
     * @param base
     * @param localCode
     * @param message
     */
    function DECLARE_ERROR_CODE(base, localCode, message) {
        if ("string" === typeof base) {
            base = CDP.RESULT_CODE_BASE[base];
        }
        return declareResultCode(base, localCode, message, false);
    }
    CDP.DECLARE_ERROR_CODE = DECLARE_ERROR_CODE;
    /**
     * @en Judge success or not.
     * @ja 成功判定
     *
     * @param code
     */
    function SUCCEEDED(code) {
        return 0 <= code;
    }
    CDP.SUCCEEDED = SUCCEEDED;
    /**
     * @en Judge error or not.
     * @ja 失敗判定
     *
     * @param code
     */
    function FAILED(code) {
        return code < 0;
    }
    CDP.FAILED = FAILED;
    /**
     * @en Assign declared [[RESULT_CODE_BASE]] to root enumeration.<br>
     *     (It's necessary also to merge enum in the module system environment.)
     * @ja 拡張した [[RESULT_CODE_BASE]] を ルート enum にアサイン<br>
     *     モジュールシステム環境においても、enum をマージするために必要
     */
    function ASSIGN_RESULT_CODE_BASE(resultCodeBase) {
        CDP.RESULT_CODE_BASE = __assign({}, CDP.RESULT_CODE_BASE, resultCodeBase);
    }
    CDP.ASSIGN_RESULT_CODE_BASE = ASSIGN_RESULT_CODE_BASE;
    /**
     * @en Assign declared [[ASSIGN_RESULT_CODE]] to root enumeration.
     *     (It's necessary also to merge enum in the module system environment.)
     * @ja 拡張した [[ASSIGN_RESULT_CODE]] を ルート enum にアサイン
     *     モジュールシステム環境においても、enum をマージするために必要
     */
    function ASSIGN_RESULT_CODE(resultCode) {
        CDP.RESULT_CODE = __assign({}, CDP.RESULT_CODE, resultCode);
    }
    CDP.ASSIGN_RESULT_CODE = ASSIGN_RESULT_CODE;
    ///////////////////////////////////////////////////////////////////////
    // module error declaration:
    var FUNCTION_CODE_RANGE = 10;
    // cdp.core 内のローカルコードオフセット値
    var LOCAL_CODE_BASE;
    (function (LOCAL_CODE_BASE) {
        LOCAL_CODE_BASE[LOCAL_CODE_BASE["CORE"] = 0] = "CORE";
        LOCAL_CODE_BASE[LOCAL_CODE_BASE["PATCH"] = 1 * FUNCTION_CODE_RANGE] = "PATCH";
    })(LOCAL_CODE_BASE || (LOCAL_CODE_BASE = {}));
    // @internal Error code definition of `cdp-core`.
    (function (RESULT_CODE) {
        RESULT_CODE[RESULT_CODE["ERROR_CDP_DECLARATION_CDP"] = 0] = "ERROR_CDP_DECLARATION_CDP";
        /** `en` [[CDP.initialize]]() failer code. <br> `ja` [[CDP.initialize]]() のエラーコード */
        RESULT_CODE[RESULT_CODE["ERROR_CDP_INITIALIZE_FAILED"] = DECLARE_ERROR_CODE(RESULT_CODE_BASE.CDP, LOCAL_CODE_BASE.CORE + 1, "initialized failed.")] = "ERROR_CDP_INITIALIZE_FAILED";
    })(RESULT_CODE = CDP.RESULT_CODE || (CDP.RESULT_CODE = {}));
    // "CDP" 以外の namespace で定義した場合は、ASSIGN ユーティリティをコールする.
    //  ASSIGN_RESULT_CODE_BASE(RESULT_CODE);
    ///////////////////////////////////////////////////////////////////////
    // private static methods:
    // RESULT_CODE の登録
    function declareResultCode(base, moduleCode, message, succeeded) {
        if (succeeded === void 0) { succeeded = false; }
        if (moduleCode <= 0 || CDP.MODULE_RESULT_CODE_RANGE <= moduleCode) {
            console.error("declareResultCode(), invalid localCode range. [localCode: " + moduleCode + "]");
            return;
        }
        var signed = succeeded ? 1 : -1;
        var resultCode = signed * (base + moduleCode);
        s_code2message[resultCode] = message ? message : ("[RESULT_CODE: " + resultCode + "]");
        return resultCode;
    }
    // RESULT_CODE から登録されているメッセージを取得
    function messageFromResultCode(resultCode) {
        if (s_code2message[resultCode]) {
            return s_code2message[resultCode];
        }
        else {
            return "unregistered result code. [RESULT_CODE: " + resultCode + "]";
        }
    }
    // RESULT_CODE から登録されている RESULT_CODE 文字列を取得
    function buildErrorName(resultCode, tag) {
        var prefix = tag || "";
        if (CDP.RESULT_CODE[resultCode]) {
            return prefix + CDP.RESULT_CODE[resultCode] + ERROR_NAME_SEPARATOR;
        }
        else {
            return prefix + UNKNOWN_ERROR_NAME + ERROR_NAME_SEPARATOR;
        }
    }
})(CDP || (CDP = {}));

return CDP; }));
/*!
 * cdp.promise.js 2.1.0
 *
 * Date: 2017-11-06T05:33:59.451Z
 */
(function (root, factory) { if (typeof define === "function" && define.amd) { define("cdp.promise",["jquery"], function ($) { return factory(root.CDP || (root.CDP = {}), $, root); }); } else if (typeof exports === "object") { module.exports = factory(root.CDP || (root.CDP = {}), require("jquery"), root); } else { factory(root.CDP || (root.CDP = {}), root.jQuery || root.$, root); } }(((this || 0).self || global), function (CDP, $, root) {
var CDP;
(function (CDP) {
    var TAG = "[CDP.Promise] ";
    /**
     * Cancel 可能オブジェクトの作成
     *
     * @internal <br>
     *
     * @param df jQueryDeferred instance を指定
     * @param options jQueryPromise を拡張するオブジェクト or キャンセル時に呼び出される関数を指定
     * @returns Cancelable property
     */
    function makeCancelable(df, options) {
        var extendOptions;
        var cancel;
        if ("function" === typeof options) {
            cancel = options;
        }
        else {
            extendOptions = options;
            if (extendOptions && extendOptions.cancelCallback) {
                cancel = extendOptions.cancelCallback;
            }
            else {
                cancel = function () { };
            }
        }
        var _abort = function (info) {
            var originalMessage = (info && info.message) ? info.message : undefined;
            var detail = info ? $.extend({}, info, { message: "abort", originalMessage: originalMessage }) : { message: "abort" };
            cancel(detail);
            if (null != this.dependency) {
                if (this.dependency.abort) {
                    this.dependency.abort(detail);
                }
                else {
                    console.error(TAG + "[call] dependency object doesn't have 'abort()' method.");
                }
                if (this.callReject && "pending" === this.state()) {
                    df.reject(detail);
                }
            }
            else if ("pending" === this.state()) {
                df.reject(detail);
            }
        };
        var _dependOn = function (promise) {
            var _this = this;
            if (promise.abort) {
                this.dependency = promise;
                promise
                    .always(function () {
                    _this.dependency = null;
                });
            }
            else {
                console.error(TAG + "[set] dependency object doesn't have 'abort()' method.");
            }
            return promise;
        };
        var _target = $.extend({}, {
            dependency: null,
            callReject: false,
        }, extendOptions);
        return {
            df: df,
            target: _target,
            abort: _abort,
            dependOn: _dependOn,
        };
    }
    /**
     * @en make [[IPromise]] object.
     * @ja [[IPromise]] オブジェクトの作成
     *
     * @example <br>
     *
     * ```ts
     *  // pipe line operation
     *  function procPipeline(): IPromise<SomeData> {
     *      const df = $.Deferred();            // create jQueryDeferred instance.
     *      const promise = makePromise(df);    // create IPromise instance.
     *
     *      // async1(), async2(), async3() are async function and returned IPromise instance.
     *      promsie.dependOn(async1())
     *          .then(() => {
     *              return promsie.dependOn(async2());
     *          })
     *          .then(() => {
     *              return promsie.dependOn(async3());
     *          })
     *          .done(() => {
     *              df.resolve({ somedata: "hoge" });
     *          })
     *          .fail((error) => {
     *              df.reject(error);
     *          });
     *
     *      return promise;
     *  }
     *
     *  // client of pipe line operation
     *  function procCaller(): void {
     *      const promise = procPipeline();
     *      setTimeout(() => {
     *          promise.abort(); // The whole cancellation is possible by optional timing.
     *          // In whichever processing of async1(), async2() or async3(),
     *          // it can be canceled appropriately.
     *      });
     *  }
     *
     * ```
     *
     * @param df
     *  - `en` set the jQueryDeferred instance.
     *  - `ja` jQueryDeferred instance を指定
     * @param options
     *  - `en` set the extend object or cancel callback function.
     *  - `ja` jQueryPromise を拡張するオブジェクト or キャンセル時に呼び出される関数を指定
     * @returns
     */
    function makePromise(df, options) {
        var cancelable = makeCancelable(df, options);
        var promise = df.promise(cancelable.target);
        if (null == promise.abort) {
            promise.abort = cancelable.abort.bind(promise);
        }
        if (null == promise.dependOn) {
            promise.dependOn = cancelable.dependOn.bind(promise);
        }
        return promise;
    }
    CDP.makePromise = makePromise;
    function wait() {
        var deferreds = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            deferreds[_i] = arguments[_i];
        }
        // 1次元配列に保証
        var _deferreds = [].concat.apply([], deferreds);
        // 実際の作業
        var df = $.Deferred();
        var results = [];
        var isFinished = function () {
            return !results.some(function (element) {
                return "pending" === element.status;
            });
        };
        _deferreds.forEach(function (deferred, index) {
            results.push({
                status: "pending",
                args: null,
            });
            deferred
                .then(function () {
                var args = [];
                for (var _i = 0; _i < arguments.length; _i++) {
                    args[_i] = arguments[_i];
                }
                results[index].status = "resolved";
                results[index].args = args;
            }, function () {
                var args = [];
                for (var _i = 0; _i < arguments.length; _i++) {
                    args[_i] = arguments[_i];
                }
                results[index].status = "rejected";
                results[index].args = args;
            })
                .always(function () {
                if (isFinished()) {
                    df.resolve(results);
                }
            });
        });
        return df.promise();
    }
    CDP.wait = wait;
    function race() {
        var deferreds = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            deferreds[_i] = arguments[_i];
        }
        var df = $.Deferred();
        var _deferreds = [].concat.apply([], deferreds);
        _deferreds.forEach(function (deferred, index) {
            deferred
                .then(function () {
                var args = [];
                for (var _i = 0; _i < arguments.length; _i++) {
                    args[_i] = arguments[_i];
                }
                if ("pending" === df.state()) {
                    df.resolve(args);
                }
            }, function () {
                var args = [];
                for (var _i = 0; _i < arguments.length; _i++) {
                    args[_i] = arguments[_i];
                }
                if ("pending" === df.state()) {
                    df.reject(args);
                }
            });
        });
        return df.promise();
    }
    CDP.race = race;
    //___________________________________________________________________________________________________________________//
    /**
     * @en The class provides the operation for multiple [[IPromise]] object.
     * @ja 複数の [[IPromise]] を一括管理するクラス
     *
     * @example <br>
     *
     * ```ts
     *  let _prmsManager = new PromiseManager();
     *
     *  function procCaller(): void {
     *      // add parallel operations under the management.
     *      _prmsManager.add(async1);
     *      _prmsManager.add(async2);
     *      _prmsManager.add(async3);
     *  }
     *
     *  function allCancel(): void {
     *      // just one call. all parallel ops are canceled.
     *      _prmsManager.cancel();
     *  }
     * ```
     */
    var PromiseManager = /** @class */ (function () {
        function PromiseManager() {
            this._pool = [];
            this._id = 0;
        }
        ///////////////////////////////////////////////////////////////////////
        // public method
        /**
         * @en add Promise object that has abort() method.
         * @ja abort() を持つ Promise オブジェクトを管理下に追加
         */
        PromiseManager.prototype.add = function (promise) {
            var _this = this;
            if (promise == null) {
                return null;
            }
            // abort() を持っていない場合はエラー
            if (!promise.abort) {
                console.error(TAG + "[add] promise object doesn't have 'abort()' method.");
                return promise;
            }
            var cookie = {
                promise: promise,
                id: this._id++,
            };
            this._pool.push(cookie);
            promise
                .always(function () {
                _this._pool = _this._pool.filter(function (element) {
                    if (element.id !== cookie.id) {
                        return true;
                    }
                    else {
                        return false;
                    }
                });
            });
            return promise;
        };
        /**
         * @en call abort() to under the management Promises.
         * @ja 管理対象の Promise に対して abort を発行
         *
         * @param info
         *  - `en` abort() argument
         *  - `ja` abort() に渡される引数
         * @returns
         *  - `en` The cancellation to cancel processing is prohibited.
         *  - `ja` キャンセル処理に対するキャンセルは不可
         */
        PromiseManager.prototype.cancel = function (info) {
            var promises = this.promises();
            promises.forEach(function (element) {
                if (element.abort) {
                    element.abort(info);
                }
            });
            return wait.apply(null, promises);
        };
        /**
         * @en get Promise objects as array. <br>
         *     only pending state object are returned.
         * @ja 管理対象の Promise を配列で取得 <br>
         *     pending 状態のオブジェクトのみが返る.
         */
        PromiseManager.prototype.promises = function () {
            return this._pool.map(function (element) {
                return element.promise;
            });
        };
        return PromiseManager;
    }());
    CDP.PromiseManager = PromiseManager;
    //___________________________________________________________________________________________________________________//
    /**
     * @en Cancelable Promise class for ES2015 Promiise compatible.
     * @ja ES2015 Promise 互換のキャンセル可能な Promise オブジェクト
     */
    var PromiseConstructor = /** @class */ (function () {
        /**
         * @example <br>
         *
         * ```ts
         *  // override global "Promise" for using Cancelable Promise in this module scope.
         *  import { Promise } from "cdp";
         *
         *  function (): IPromise<SomeData> => {
         *      return new Promise((resolve, reject, dependOn) => {
         *          // async1(), async2() are async function and returned IPromise instance.
         *          dependOn(async1())
         *              .then(() => {
         *                  return dependOn(async2());
         *              })
         *              .then(() => {
         *                  resolve({ somedata: "hoge" });
         *              })
         *              .catch((error) => {
         *                  reject(error);
         *              });
         *          });
         *      };
         *  }
         * ```
         *
         * @param executor
         *  - `en` ES2015 Promise executer compatible with `dependOn` 3rd arg.
         *  - `ja` ES6 Promise 互換引数. (dependOn を第3引数に渡す)
         * @param options
         *  - `en` set the extend object or cancel callback function.
         *  - `ja` jQueryPromise を拡張するオブジェクト or キャンセル時に呼び出される関数を指定
         */
        function PromiseConstructor(executor, options) {
            // apply mixin
            var cancelable = makeCancelable($.Deferred(), options);
            $.extend(true, this, cancelable.df, cancelable.target);
            this.abort = cancelable.abort.bind(this);
            this.dependOn = cancelable.dependOn.bind(this);
            executor(this.resolve, this.reject, this.dependOn);
        }
        ///////////////////////////////////////////////////////////////////////
        // static methods:
        PromiseConstructor.resolve = function (value) {
            return $.Deferred().resolve(value);
        };
        PromiseConstructor.reject = function (reason) {
            return $.Deferred().reject(reason);
        };
        PromiseConstructor.all = function () {
            var deferreds = [];
            for (var _i = 0; _i < arguments.length; _i++) {
                deferreds[_i] = arguments[_i];
            }
            return $.when.apply(this, [].concat.apply([], deferreds));
        };
        PromiseConstructor.wait = function () {
            var deferreds = [];
            for (var _i = 0; _i < arguments.length; _i++) {
                deferreds[_i] = arguments[_i];
            }
            return wait([].concat.apply([], deferreds));
        };
        PromiseConstructor.race = function () {
            var deferreds = [];
            for (var _i = 0; _i < arguments.length; _i++) {
                deferreds[_i] = arguments[_i];
            }
            return race([].concat.apply([], deferreds));
        };
        return PromiseConstructor;
    }());
    CDP.PromiseConstructor = PromiseConstructor;
    CDP.Promise = PromiseConstructor;
})(CDP || (CDP = {}));

root.Promise = root.Promise || CDP.Promise; return CDP; }));
/*!
 * cdp.i18n.js 2.1.0
 *
 * Date: 2017-11-06T05:35:00.319Z
 */

(function webpackUniversalModuleDefinition(root, factory) {
    if(typeof exports === 'object' && typeof module === 'object')
        module.exports = factory(require("jquery"), require("cdp.core"), require("cdp.promise"));
    else if(typeof define === 'function' && define.amd)
        define("cdp.i18n", ["jquery", "cdp.core", "cdp.promise"], factory);
    else if(typeof exports === 'object')
        exports["CDP"] = factory(require("jquery"), require("cdp.core"), require("cdp.promise"));
    else
        root["CDP"] = factory(root["jQuery"], root["CDP"], root["CDP"]);
})(this, function(__WEBPACK_EXTERNAL_MODULE_1__, __WEBPACK_EXTERNAL_MODULE_2__, __WEBPACK_EXTERNAL_MODULE_3__) {
return /******/ (function(modules) { // webpackBootstrap
/******/     // The module cache
/******/     var installedModules = {};
/******/
/******/     // The require function
/******/     function __webpack_require__(moduleId) {
/******/
/******/         // Check if module is in cache
/******/         if(installedModules[moduleId]) {
/******/             return installedModules[moduleId].exports;
/******/         }
/******/         // Create a new module (and put it into the cache)
/******/         var module = installedModules[moduleId] = {
/******/             i: moduleId,
/******/             l: false,
/******/             exports: {}
/******/         };
/******/
/******/         // Execute the module function
/******/         modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/         // Flag the module as loaded
/******/         module.l = true;
/******/
/******/         // Return the exports of the module
/******/         return module.exports;
/******/     }
/******/
/******/
/******/     // expose the modules object (__webpack_modules__)
/******/     __webpack_require__.m = modules;
/******/
/******/     // expose the module cache
/******/     __webpack_require__.c = installedModules;
/******/
/******/     // define getter function for harmony exports
/******/     __webpack_require__.d = function(exports, name, getter) {
/******/         if(!__webpack_require__.o(exports, name)) {
/******/             Object.defineProperty(exports, name, {
/******/                 configurable: false,
/******/                 enumerable: true,
/******/                 get: getter
/******/             });
/******/         }
/******/     };
/******/
/******/     // getDefaultExport function for compatibility with non-harmony modules
/******/     __webpack_require__.n = function(module) {
/******/         var getter = module && module.__esModule ?
/******/             function getDefault() { return module['default']; } :
/******/             function getModuleExports() { return module; };
/******/         __webpack_require__.d(getter, 'a', getter);
/******/         return getter;
/******/     };
/******/
/******/     // Object.prototype.hasOwnProperty.call
/******/     __webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/     // __webpack_public_path__
/******/     __webpack_require__.p = "";
/******/
/******/     // Load entry module and return exports
/******/     return __webpack_require__(__webpack_require__.s = 0);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;(function (root, factory) { if (true) { !(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(1), __webpack_require__(2), __webpack_require__(3)], __WEBPACK_AMD_DEFINE_RESULT__ = function ($, CDP) { return factory($, CDP); }.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
                __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__)); } else { factory(root.jQuery || root.$, root.CDP || (root.CDP = {})); } }(this, function ($, CDP) {
var CDP;
(function (CDP) {
    // @internal Error code offset definition of `cdp-i18n`.
    var RESULT_CODE_BASE;
    (function (RESULT_CODE_BASE) {
        RESULT_CODE_BASE[RESULT_CODE_BASE["CDP_I18N_DECLARERATION"] = 0] = "CDP_I18N_DECLARERATION";
        RESULT_CODE_BASE[RESULT_CODE_BASE["CDP_I18N"] = 3 * CDP._MODULE_RESULT_CODE_RANGE_CDP] = "CDP_I18N";
    })(RESULT_CODE_BASE = CDP.RESULT_CODE_BASE || (CDP.RESULT_CODE_BASE = {}));
    ///////////////////////////////////////////////////////////////////////
    // module error declaration:
    // @internal cdp.i18n 内のローカルコードオフセット値
    var LOCAL_CODE_BASE;
    (function (LOCAL_CODE_BASE) {
        LOCAL_CODE_BASE[LOCAL_CODE_BASE["I18N"] = 0] = "I18N";
    })(LOCAL_CODE_BASE || (LOCAL_CODE_BASE = {}));
    /* tslint:disable:max-line-length */
    // Error code definition of `cdp-i18n`.
    var RESULT_CODE;
    (function (RESULT_CODE) {
        RESULT_CODE[RESULT_CODE["ERROR_CDP_I18N_DECLARATION"] = 0] = "ERROR_CDP_I18N_DECLARATION";
        /** `en` [[CDP.initializeI18N]]() failer code. <br> `ja` [[CDP.initializeI18N]]() のエラーコード */
        RESULT_CODE[RESULT_CODE["ERROR_CDP_I18N_INITIALIZE_FAILED"] = CDP.DECLARE_ERROR_CODE(RESULT_CODE_BASE.CDP_I18N, LOCAL_CODE_BASE.I18N + 1, "i18n initialize failed.")] = "ERROR_CDP_I18N_INITIALIZE_FAILED";
    })(RESULT_CODE = CDP.RESULT_CODE || (CDP.RESULT_CODE = {}));
    /* tslint:enable:max-line-length */
})(CDP || (CDP = {}));

/* tslint:disable:max-line-length */
var CDP;
(function (CDP) {
    var Promise = CDP.Promise;
    var TAG = "[CDP.i18n] ";
    /**
     * @en initialize i18next. <br>
     *     It'll be usually called from framework.
     * @ja i18next の初期化 <br>
     *     通常は Framework が呼び出す。
     */
    function initializeI18N(settings) {
        return new Promise(function (resolve, reject) {
            var i18nSettings = settings || {};
            i18nSettings.options = i18nSettings.options || {};
            try {
                var i18nOptions_1 = (function (resources) {
                    if (resources) {
                        for (var lng in resources) {
                            if (resources.hasOwnProperty(lng)) {
                                for (var ns in resources[lng]) {
                                    if (resources[lng].hasOwnProperty(ns)) {
                                        resources[lng][ns] = getLocaleFallbackResource(resources[lng][ns]);
                                    }
                                }
                            }
                        }
                        i18nSettings.options.resources = resources;
                        return i18nSettings.options;
                    }
                    else {
                        return i18nSettings.options;
                    }
                })(i18nSettings.fallbackResources);
                new Promise(function(resolve) { resolve(); }).then(function() { var __WEBPACK_AMD_REQUIRE_ARRAY__ = [__webpack_require__(4)]; (function ($18Next) {
                    new Promise(function(resolve) { resolve(); }).then(function() { var __WEBPACK_AMD_REQUIRE_ARRAY__ = [
                        __webpack_require__(5),
                        __webpack_require__(6),
                        __webpack_require__(7),
                        __webpack_require__(8),
                        __webpack_require__(9),
                    ]; (function (i18next, Backend, Cache, PostProcessor, LanguageDetector) {
                        i18next
                            .use(Backend)
                            .use(Cache)
                            .use(PostProcessor)
                            .use(LanguageDetector)
                            .init(i18nOptions_1, function (error, t) {
                            $18Next.init(i18next, $, {
                                tName: "t",
                                i18nName: "i18n",
                                handleName: "localize",
                                selectorAttr: "data-i18n",
                                targetAttr: "i18n-target",
                                optionsAttr: "i18n-options",
                                useOptionsAttr: false,
                                parseDefaultValueFromContent: true // parses default values from content ele.val or ele.text
                            });
                            // i18next 3.4.1: resources が指定されると preload が読み込まれないため、再読み込み処理を行う.
                            if (i18next.options.resources && i18next.options.preload) {
                                // options からプロパティを一旦削除.
                                var _preload_1 = i18next.options.preload;
                                var _resources_1 = i18next.options.resources;
                                delete i18next.options.resources;
                                delete i18next.options.preload;
                                i18next.loadLanguages(_preload_1, function () {
                                    // options を元に戻す
                                    i18next.options.resources = _resources_1;
                                    i18next.options.preload = _preload_1;
                                    CDP.i18n = i18next;
                                    resolve();
                                });
                            }
                            else {
                                CDP.i18n = i18next;
                                resolve();
                            }
                        });
                    }.apply(null, __WEBPACK_AMD_REQUIRE_ARRAY__));}).catch(__webpack_require__.oe);
                }.apply(null, __WEBPACK_AMD_REQUIRE_ARRAY__));}).catch(__webpack_require__.oe);
            }
            catch (e) {
                return reject(e);
            }
        });
    }
    CDP.initializeI18N = initializeI18N;
    /**
     * @es get string resource for fallback.
     * @js Fallback 用ローカライズリソースの取得
     *
     * @internal
     * @returns
     *   - `en` fallback resource object
     *   - `ja` fallback リソースオブジェクト
     */
    function getLocaleFallbackResource(path) {
        var json;
        var error;
        $.ajax({
            url: CDP.toUrl(path),
            method: "GET",
            async: false,
            dataType: "json",
            success: function (data) {
                json = data;
            },
            error: function (xhr, status) {
                error = CDP.makeErrorInfo(CDP.RESULT_CODE.ERROR_CDP_I18N_INITIALIZE_FAILED, TAG, "ajax request failed. status: " + status);
            }
        });
        if (null != error) {
            throw error;
        }
        return json;
    }
})(CDP || (CDP = {}));

return CDP; }));


/***/ }),
/* 1 */
/***/ (function(module, exports) {

module.exports = __WEBPACK_EXTERNAL_MODULE_1__;

/***/ }),
/* 2 */
/***/ (function(module, exports) {

module.exports = __WEBPACK_EXTERNAL_MODULE_2__;

/***/ }),
/* 3 */
/***/ (function(module, exports) {

module.exports = __WEBPACK_EXTERNAL_MODULE_3__;

/***/ }),
/* 4 */
/***/ (function(module, exports, __webpack_require__) {

(function (global, factory) {
   true ? module.exports = factory() :
  typeof define === 'function' && define.amd ? define(factory) :
  (global.jqueryI18next = factory());
}(this, (function () { 'use strict';

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var defaults = {
  tName: 't',
  i18nName: 'i18n',
  handleName: 'localize',
  selectorAttr: 'data-i18n',
  targetAttr: 'i18n-target',
  optionsAttr: 'i18n-options',
  useOptionsAttr: false,
  parseDefaultValueFromContent: true
};

function init(i18next, $) {
  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};


  options = _extends({}, defaults, options);

  function parse(ele, key, opts) {
    if (key.length === 0) return;

    var attr = 'text';

    if (key.indexOf('[') === 0) {
      var parts = key.split(']');
      key = parts[1];
      attr = parts[0].substr(1, parts[0].length - 1);
    }

    if (key.indexOf(';') === key.length - 1) {
      key = key.substr(0, key.length - 2);
    }

    function extendDefault(o, val) {
      if (!options.parseDefaultValueFromContent) return o;
      return _extends({}, o, { defaultValue: val });
    }

    if (attr === 'html') {
      ele.html(i18next.t(key, extendDefault(opts, ele.html())));
    } else if (attr === 'text') {
      ele.text(i18next.t(key, extendDefault(opts, ele.text())));
    } else if (attr === 'prepend') {
      ele.prepend(i18next.t(key, extendDefault(opts, ele.html())));
    } else if (attr === 'append') {
      ele.append(i18next.t(key, extendDefault(opts, ele.html())));
    } else if (attr.indexOf('data-') === 0) {
      var dataAttr = attr.substr('data-'.length);
      var translated = i18next.t(key, extendDefault(opts, ele.data(dataAttr)));

      // we change into the data cache
      ele.data(dataAttr, translated);
      // we change into the dom
      ele.attr(attr, translated);
    } else {
      ele.attr(attr, i18next.t(key, extendDefault(opts, ele.attr(attr))));
    }
  }

  function localize(ele, opts) {
    var key = ele.attr(options.selectorAttr);
    if (!key && typeof key !== 'undefined' && key !== false) key = ele.text() || ele.val();
    if (!key) return;

    var target = ele,
        targetSelector = ele.data(options.targetAttr);

    if (targetSelector) target = ele.find(targetSelector) || ele;

    if (!opts && options.useOptionsAttr === true) opts = ele.data(options.optionsAttr);

    opts = opts || {};

    if (key.indexOf(';') >= 0) {
      var keys = key.split(';');

      $.each(keys, function (m, k) {
        // .trim(): Trim the comma-separated parameters on the data-i18n attribute.
        if (k !== '') parse(target, k.trim(), opts);
      });
    } else {
      parse(target, key, opts);
    }

    if (options.useOptionsAttr === true) {
      var clone = {};
      clone = _extends({ clone: clone }, opts);

      delete clone.lng;
      ele.data(options.optionsAttr, clone);
    }
  }

  function handle(opts) {
    return this.each(function () {
      // localize element itself
      localize($(this), opts);

      // localize children
      var elements = $(this).find('[' + options.selectorAttr + ']');
      elements.each(function () {
        localize($(this), opts);
      });
    });
  };

  // $.t $.i18n shortcut
  $[options.tName] = i18next.t.bind(i18next);
  $[options.i18nName] = i18next;

  // selector function $(mySelector).localize(opts);
  $.fn[options.handleName] = handle;
}

var index = {
  init: init
};

return index;

})));

/***/ }),
/* 5 */
/***/ (function(module, exports, __webpack_require__) {

(function (global, factory) {
     true ? module.exports = factory() :
    typeof define === 'function' && define.amd ? define(factory) :
    (global.i18next = factory());
}(this, (function () { 'use strict';

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) {
  return typeof obj;
} : function (obj) {
  return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
};











var classCallCheck = function (instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
};









var _extends = Object.assign || function (target) {
  for (var i = 1; i < arguments.length; i++) {
    var source = arguments[i];

    for (var key in source) {
      if (Object.prototype.hasOwnProperty.call(source, key)) {
        target[key] = source[key];
      }
    }
  }

  return target;
};



var inherits = function (subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function, not " + typeof superClass);
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      enumerable: false,
      writable: true,
      configurable: true
    }
  });
  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;
};











var possibleConstructorReturn = function (self, call) {
  if (!self) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return call && (typeof call === "object" || typeof call === "function") ? call : self;
};





var slicedToArray = function () {
  function sliceIterator(arr, i) {
    var _arr = [];
    var _n = true;
    var _d = false;
    var _e = undefined;

    try {
      for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {
        _arr.push(_s.value);

        if (i && _arr.length === i) break;
      }
    } catch (err) {
      _d = true;
      _e = err;
    } finally {
      try {
        if (!_n && _i["return"]) _i["return"]();
      } finally {
        if (_d) throw _e;
      }
    }

    return _arr;
  }

  return function (arr, i) {
    if (Array.isArray(arr)) {
      return arr;
    } else if (Symbol.iterator in Object(arr)) {
      return sliceIterator(arr, i);
    } else {
      throw new TypeError("Invalid attempt to destructure non-iterable instance");
    }
  };
}();













var toConsumableArray = function (arr) {
  if (Array.isArray(arr)) {
    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) arr2[i] = arr[i];

    return arr2;
  } else {
    return Array.from(arr);
  }
};

var consoleLogger = {
  type: 'logger',

  log: function log(args) {
    this.output('log', args);
  },
  warn: function warn(args) {
    this.output('warn', args);
  },
  error: function error(args) {
    this.output('error', args);
  },
  output: function output(type, args) {
    var _console;

    /* eslint no-console: 0 */
    if (console && console[type]) (_console = console)[type].apply(_console, toConsumableArray(args));
  }
};

var Logger = function () {
  function Logger(concreteLogger) {
    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    classCallCheck(this, Logger);

    this.init(concreteLogger, options);
  }

  Logger.prototype.init = function init(concreteLogger) {
    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

    this.prefix = options.prefix || 'i18next:';
    this.logger = concreteLogger || consoleLogger;
    this.options = options;
    this.debug = options.debug;
  };

  Logger.prototype.setDebug = function setDebug(bool) {
    this.debug = bool;
  };

  Logger.prototype.log = function log() {
    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    return this.forward(args, 'log', '', true);
  };

  Logger.prototype.warn = function warn() {
    for (var _len2 = arguments.length, args = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {
      args[_key2] = arguments[_key2];
    }

    return this.forward(args, 'warn', '', true);
  };

  Logger.prototype.error = function error() {
    for (var _len3 = arguments.length, args = Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {
      args[_key3] = arguments[_key3];
    }

    return this.forward(args, 'error', '');
  };

  Logger.prototype.deprecate = function deprecate() {
    for (var _len4 = arguments.length, args = Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {
      args[_key4] = arguments[_key4];
    }

    return this.forward(args, 'warn', 'WARNING DEPRECATED: ', true);
  };

  Logger.prototype.forward = function forward(args, lvl, prefix, debugOnly) {
    if (debugOnly && !this.debug) return null;
    if (typeof args[0] === 'string') args[0] = '' + prefix + this.prefix + ' ' + args[0];
    return this.logger[lvl](args);
  };

  Logger.prototype.create = function create(moduleName) {
    return new Logger(this.logger, _extends({ prefix: this.prefix + ':' + moduleName + ':' }, this.options));
  };

  return Logger;
}();

var baseLogger = new Logger();

var EventEmitter = function () {
  function EventEmitter() {
    classCallCheck(this, EventEmitter);

    this.observers = {};
  }

  EventEmitter.prototype.on = function on(events, listener) {
    var _this = this;

    events.split(' ').forEach(function (event) {
      _this.observers[event] = _this.observers[event] || [];
      _this.observers[event].push(listener);
    });
  };

  EventEmitter.prototype.off = function off(event, listener) {
    var _this2 = this;

    if (!this.observers[event]) {
      return;
    }

    this.observers[event].forEach(function () {
      if (!listener) {
        delete _this2.observers[event];
      } else {
        var index = _this2.observers[event].indexOf(listener);
        if (index > -1) {
          _this2.observers[event].splice(index, 1);
        }
      }
    });
  };

  EventEmitter.prototype.emit = function emit(event) {
    for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
      args[_key - 1] = arguments[_key];
    }

    if (this.observers[event]) {
      var cloned = [].concat(this.observers[event]);
      cloned.forEach(function (observer) {
        observer.apply(undefined, args);
      });
    }

    if (this.observers['*']) {
      var _cloned = [].concat(this.observers['*']);
      _cloned.forEach(function (observer) {
        var _ref;

        observer.apply(observer, (_ref = [event]).concat.apply(_ref, args));
      });
    }
  };

  return EventEmitter;
}();

function makeString(object) {
  if (object == null) return '';
  /* eslint prefer-template: 0 */
  return '' + object;
}

function copy(a, s, t) {
  a.forEach(function (m) {
    if (s[m]) t[m] = s[m];
  });
}

function getLastOfPath(object, path, Empty) {
  function cleanKey(key) {
    return key && key.indexOf('###') > -1 ? key.replace(/###/g, '.') : key;
  }

  function canNotTraverseDeeper() {
    return !object || typeof object === 'string';
  }

  var stack = typeof path !== 'string' ? [].concat(path) : path.split('.');
  while (stack.length > 1) {
    if (canNotTraverseDeeper()) return {};

    var key = cleanKey(stack.shift());
    if (!object[key] && Empty) object[key] = new Empty();
    object = object[key];
  }

  if (canNotTraverseDeeper()) return {};
  return {
    obj: object,
    k: cleanKey(stack.shift())
  };
}

function setPath(object, path, newValue) {
  var _getLastOfPath = getLastOfPath(object, path, Object),
      obj = _getLastOfPath.obj,
      k = _getLastOfPath.k;

  obj[k] = newValue;
}

function pushPath(object, path, newValue, concat) {
  var _getLastOfPath2 = getLastOfPath(object, path, Object),
      obj = _getLastOfPath2.obj,
      k = _getLastOfPath2.k;

  obj[k] = obj[k] || [];
  if (concat) obj[k] = obj[k].concat(newValue);
  if (!concat) obj[k].push(newValue);
}

function getPath(object, path) {
  var _getLastOfPath3 = getLastOfPath(object, path),
      obj = _getLastOfPath3.obj,
      k = _getLastOfPath3.k;

  if (!obj) return undefined;
  return obj[k];
}

function deepExtend(target, source, overwrite) {
  /* eslint no-restricted-syntax: 0 */
  for (var prop in source) {
    if (prop in target) {
      // If we reached a leaf string in target or source then replace with source or skip depending on the 'overwrite' switch
      if (typeof target[prop] === 'string' || target[prop] instanceof String || typeof source[prop] === 'string' || source[prop] instanceof String) {
        if (overwrite) target[prop] = source[prop];
      } else {
        deepExtend(target[prop], source[prop], overwrite);
      }
    } else {
      target[prop] = source[prop];
    }
  }
  return target;
}

function regexEscape(str) {
  /* eslint no-useless-escape: 0 */
  return str.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g, '\\$&');
}

/* eslint-disable */
var _entityMap = {
  "&": "&amp;",
  "<": "&lt;",
  ">": "&gt;",
  '"': '&quot;',
  "'": '&#39;',
  "/": '&#x2F;'
};
/* eslint-enable */

function escape(data) {
  if (typeof data === 'string') {
    return data.replace(/[&<>"'\/]/g, function (s) {
      return _entityMap[s];
    });
  }

  return data;
}

var ResourceStore = function (_EventEmitter) {
  inherits(ResourceStore, _EventEmitter);

  function ResourceStore(data) {
    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : { ns: ['translation'], defaultNS: 'translation' };
    classCallCheck(this, ResourceStore);

    var _this = possibleConstructorReturn(this, _EventEmitter.call(this));

    _this.data = data || {};
    _this.options = options;
    return _this;
  }

  ResourceStore.prototype.addNamespaces = function addNamespaces(ns) {
    if (this.options.ns.indexOf(ns) < 0) {
      this.options.ns.push(ns);
    }
  };

  ResourceStore.prototype.removeNamespaces = function removeNamespaces(ns) {
    var index = this.options.ns.indexOf(ns);
    if (index > -1) {
      this.options.ns.splice(index, 1);
    }
  };

  ResourceStore.prototype.getResource = function getResource(lng, ns, key) {
    var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};

    var keySeparator = options.keySeparator || this.options.keySeparator;
    if (keySeparator === undefined) keySeparator = '.';

    var path = [lng, ns];
    if (key && typeof key !== 'string') path = path.concat(key);
    if (key && typeof key === 'string') path = path.concat(keySeparator ? key.split(keySeparator) : key);

    if (lng.indexOf('.') > -1) {
      path = lng.split('.');
    }

    return getPath(this.data, path);
  };

  ResourceStore.prototype.addResource = function addResource(lng, ns, key, value) {
    var options = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : { silent: false };

    var keySeparator = this.options.keySeparator;
    if (keySeparator === undefined) keySeparator = '.';

    var path = [lng, ns];
    if (key) path = path.concat(keySeparator ? key.split(keySeparator) : key);

    if (lng.indexOf('.') > -1) {
      path = lng.split('.');
      value = ns;
      ns = path[1];
    }

    this.addNamespaces(ns);

    setPath(this.data, path, value);

    if (!options.silent) this.emit('added', lng, ns, key, value);
  };

  ResourceStore.prototype.addResources = function addResources(lng, ns, resources) {
    /* eslint no-restricted-syntax: 0 */
    for (var m in resources) {
      if (typeof resources[m] === 'string') this.addResource(lng, ns, m, resources[m], { silent: true });
    }
    this.emit('added', lng, ns, resources);
  };

  ResourceStore.prototype.addResourceBundle = function addResourceBundle(lng, ns, resources, deep, overwrite) {
    var path = [lng, ns];
    if (lng.indexOf('.') > -1) {
      path = lng.split('.');
      deep = resources;
      resources = ns;
      ns = path[1];
    }

    this.addNamespaces(ns);

    var pack = getPath(this.data, path) || {};

    if (deep) {
      deepExtend(pack, resources, overwrite);
    } else {
      pack = _extends({}, pack, resources);
    }

    setPath(this.data, path, pack);

    this.emit('added', lng, ns, resources);
  };

  ResourceStore.prototype.removeResourceBundle = function removeResourceBundle(lng, ns) {
    if (this.hasResourceBundle(lng, ns)) {
      delete this.data[lng][ns];
    }
    this.removeNamespaces(ns);

    this.emit('removed', lng, ns);
  };

  ResourceStore.prototype.hasResourceBundle = function hasResourceBundle(lng, ns) {
    return this.getResource(lng, ns) !== undefined;
  };

  ResourceStore.prototype.getResourceBundle = function getResourceBundle(lng, ns) {
    if (!ns) ns = this.options.defaultNS;

    // COMPATIBILITY: remove extend in v2.1.0
    if (this.options.compatibilityAPI === 'v1') return _extends({}, this.getResource(lng, ns));

    return this.getResource(lng, ns);
  };

  ResourceStore.prototype.toJSON = function toJSON() {
    return this.data;
  };

  return ResourceStore;
}(EventEmitter);

var postProcessor = {

  processors: {},

  addPostProcessor: function addPostProcessor(module) {
    this.processors[module.name] = module;
  },
  handle: function handle(processors, value, key, options, translator) {
    var _this = this;

    processors.forEach(function (processor) {
      if (_this.processors[processor]) value = _this.processors[processor].process(value, key, options, translator);
    });

    return value;
  }
};

var Translator = function (_EventEmitter) {
  inherits(Translator, _EventEmitter);

  function Translator(services) {
    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    classCallCheck(this, Translator);

    var _this = possibleConstructorReturn(this, _EventEmitter.call(this));

    copy(['resourceStore', 'languageUtils', 'pluralResolver', 'interpolator', 'backendConnector'], services, _this);

    _this.options = options;
    _this.logger = baseLogger.create('translator');
    return _this;
  }

  Translator.prototype.changeLanguage = function changeLanguage(lng) {
    if (lng) this.language = lng;
  };

  Translator.prototype.exists = function exists(key) {
    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : { interpolation: {} };

    var resolved = this.resolve(key, options);
    return resolved && resolved.res !== undefined;
  };

  Translator.prototype.extractFromKey = function extractFromKey(key, options) {
    var nsSeparator = options.nsSeparator || this.options.nsSeparator;
    if (nsSeparator === undefined) nsSeparator = ':';
    var keySeparator = options.keySeparator || this.options.keySeparator || '.';

    var namespaces = options.ns || this.options.defaultNS;
    if (nsSeparator && key.indexOf(nsSeparator) > -1) {
      var parts = key.split(nsSeparator);
      if (nsSeparator !== keySeparator || nsSeparator === keySeparator && this.options.ns.indexOf(parts[0]) > -1) namespaces = parts.shift();
      key = parts.join(keySeparator);
    }
    if (typeof namespaces === 'string') namespaces = [namespaces];

    return {
      key: key,
      namespaces: namespaces
    };
  };

  Translator.prototype.translate = function translate(keys) {
    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

    if ((typeof options === 'undefined' ? 'undefined' : _typeof(options)) !== 'object') {
      /* eslint prefer-rest-params: 0 */
      options = this.options.overloadTranslationOptionHandler(arguments);
    }

    // non valid keys handling
    if (keys === undefined || keys === null || keys === '') return '';
    if (typeof keys === 'number') keys = String(keys);
    if (typeof keys === 'string') keys = [keys];

    // separators
    var keySeparator = options.keySeparator || this.options.keySeparator || '.';

    // get namespace(s)

    var _extractFromKey = this.extractFromKey(keys[keys.length - 1], options),
        key = _extractFromKey.key,
        namespaces = _extractFromKey.namespaces;

    var namespace = namespaces[namespaces.length - 1];

    // return key on CIMode
    var lng = options.lng || this.language;
    var appendNamespaceToCIMode = options.appendNamespaceToCIMode || this.options.appendNamespaceToCIMode;
    if (lng && lng.toLowerCase() === 'cimode') {
      if (appendNamespaceToCIMode) {
        var nsSeparator = options.nsSeparator || this.options.nsSeparator;
        return namespace + nsSeparator + key;
      }

      return key;
    }

    // resolve from store
    var resolved = this.resolve(keys, options);
    var res = resolved && resolved.res;
    var usedKey = resolved && resolved.usedKey || key;

    var resType = Object.prototype.toString.apply(res);
    var noObject = ['[object Number]', '[object Function]', '[object RegExp]'];
    var joinArrays = options.joinArrays !== undefined ? options.joinArrays : this.options.joinArrays;

    // object
    if (res && typeof res !== 'string' && noObject.indexOf(resType) < 0 && !(joinArrays && resType === '[object Array]')) {
      if (!options.returnObjects && !this.options.returnObjects) {
        this.logger.warn('accessing an object - but returnObjects options is not enabled!');
        return this.options.returnedObjectHandler ? this.options.returnedObjectHandler(usedKey, res, options) : 'key \'' + key + ' (' + this.language + ')\' returned an object instead of string.';
      }

      // if we got a separator we loop over children - else we just return object as is
      // as having it set to false means no hierarchy so no lookup for nested values
      if (options.keySeparator || this.options.keySeparator) {
        var copy$$1 = resType === '[object Array]' ? [] : {}; // apply child translation on a copy

        /* eslint no-restricted-syntax: 0 */
        for (var m in res) {
          if (Object.prototype.hasOwnProperty.call(res, m)) {
            copy$$1[m] = this.translate('' + usedKey + keySeparator + m, _extends({}, options, { joinArrays: false, ns: namespaces }));
          }
        }
        res = copy$$1;
      }
    } else if (joinArrays && resType === '[object Array]') {
      // array special treatment
      res = res.join(joinArrays);
      if (res) res = this.extendTranslation(res, keys, options);
    } else {
      // string, empty or null
      var usedDefault = false;
      var _usedKey = false;

      // fallback value
      if (!this.isValidLookup(res) && options.defaultValue !== undefined) {
        usedDefault = true;
        res = options.defaultValue;
      }
      if (!this.isValidLookup(res)) {
        _usedKey = true;
        res = key;
      }

      // save missing
      if (_usedKey || usedDefault) {
        this.logger.log('missingKey', lng, namespace, key, res);

        var lngs = [];
        var fallbackLngs = this.languageUtils.getFallbackCodes(this.options.fallbackLng, options.lng || this.language);
        if (this.options.saveMissingTo === 'fallback' && fallbackLngs && fallbackLngs[0]) {
          for (var i = 0; i < fallbackLngs.length; i++) {
            lngs.push(fallbackLngs[i]);
          }
        } else if (this.options.saveMissingTo === 'all') {
          lngs = this.languageUtils.toResolveHierarchy(options.lng || this.language);
        } else {
          lngs.push(options.lng || this.language);
        }

        if (this.options.saveMissing) {
          if (this.options.missingKeyHandler) {
            this.options.missingKeyHandler(lngs, namespace, key, res);
          } else if (this.backendConnector && this.backendConnector.saveMissing) {
            this.backendConnector.saveMissing(lngs, namespace, key, res);
          }
        }

        this.emit('missingKey', lngs, namespace, key, res);
      }

      // extend
      res = this.extendTranslation(res, keys, options);

      // append namespace if still key
      if (_usedKey && res === key && this.options.appendNamespaceToMissingKey) res = namespace + ':' + key;

      // parseMissingKeyHandler
      if (_usedKey && this.options.parseMissingKeyHandler) res = this.options.parseMissingKeyHandler(res);
    }

    // return
    return res;
  };

  Translator.prototype.extendTranslation = function extendTranslation(res, key, options) {
    var _this2 = this;

    if (options.interpolation) this.interpolator.init(_extends({}, options, { interpolation: _extends({}, this.options.interpolation, options.interpolation) }));

    // interpolate
    var data = options.replace && typeof options.replace !== 'string' ? options.replace : options;
    if (this.options.interpolation.defaultVariables) data = _extends({}, this.options.interpolation.defaultVariables, data);
    res = this.interpolator.interpolate(res, data, options.lng || this.language);

    // nesting
    if (options.nest !== false) res = this.interpolator.nest(res, function () {
      return _this2.translate.apply(_this2, arguments);
    }, options);

    if (options.interpolation) this.interpolator.reset();

    // post process
    var postProcess = options.postProcess || this.options.postProcess;
    var postProcessorNames = typeof postProcess === 'string' ? [postProcess] : postProcess;

    if (res !== undefined && postProcessorNames && postProcessorNames.length && options.applyPostProcessor !== false) {
      res = postProcessor.handle(postProcessorNames, res, key, options, this);
    }

    return res;
  };

  Translator.prototype.resolve = function resolve(keys) {
    var _this3 = this;

    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

    var found = void 0;
    var usedKey = void 0;

    if (typeof keys === 'string') keys = [keys];

    // forEach possible key
    keys.forEach(function (k) {
      if (_this3.isValidLookup(found)) return;
      var extracted = _this3.extractFromKey(k, options);
      var key = extracted.key;
      usedKey = key;
      var namespaces = extracted.namespaces;
      if (_this3.options.fallbackNS) namespaces = namespaces.concat(_this3.options.fallbackNS);

      var needsPluralHandling = options.count !== undefined && typeof options.count !== 'string';
      var needsContextHandling = options.context !== undefined && typeof options.context === 'string' && options.context !== '';

      var codes = options.lngs ? options.lngs : _this3.languageUtils.toResolveHierarchy(options.lng || _this3.language);

      namespaces.forEach(function (ns) {
        if (_this3.isValidLookup(found)) return;

        codes.forEach(function (code) {
          if (_this3.isValidLookup(found)) return;

          var finalKey = key;
          var finalKeys = [finalKey];

          var pluralSuffix = void 0;
          if (needsPluralHandling) pluralSuffix = _this3.pluralResolver.getSuffix(code, options.count);

          // fallback for plural if context not found
          if (needsPluralHandling && needsContextHandling) finalKeys.push(finalKey + pluralSuffix);

          // get key for context if needed
          if (needsContextHandling) finalKeys.push(finalKey += '' + _this3.options.contextSeparator + options.context);

          // get key for plural if needed
          if (needsPluralHandling) finalKeys.push(finalKey += pluralSuffix);

          // iterate over finalKeys starting with most specific pluralkey (-> contextkey only) -> singularkey only
          var possibleKey = void 0;
          /* eslint no-cond-assign: 0 */
          while (possibleKey = finalKeys.pop()) {
            if (!_this3.isValidLookup(found)) {
              found = _this3.getResource(code, ns, possibleKey, options);
            }
          }
        });
      });
    });

    return { res: found, usedKey: usedKey };
  };

  Translator.prototype.isValidLookup = function isValidLookup(res) {
    return res !== undefined && !(!this.options.returnNull && res === null) && !(!this.options.returnEmptyString && res === '');
  };

  Translator.prototype.getResource = function getResource(code, ns, key) {
    var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};

    return this.resourceStore.getResource(code, ns, key, options);
  };

  return Translator;
}(EventEmitter);

function capitalize(string) {
  return string.charAt(0).toUpperCase() + string.slice(1);
}

var LanguageUtil = function () {
  function LanguageUtil(options) {
    classCallCheck(this, LanguageUtil);

    this.options = options;

    this.whitelist = this.options.whitelist || false;
    this.logger = baseLogger.create('languageUtils');
  }

  LanguageUtil.prototype.getScriptPartFromCode = function getScriptPartFromCode(code) {
    if (!code || code.indexOf('-') < 0) return null;

    var p = code.split('-');
    if (p.length === 2) return null;
    p.pop();
    return this.formatLanguageCode(p.join('-'));
  };

  LanguageUtil.prototype.getLanguagePartFromCode = function getLanguagePartFromCode(code) {
    if (!code || code.indexOf('-') < 0) return code;

    var p = code.split('-');
    return this.formatLanguageCode(p[0]);
  };

  LanguageUtil.prototype.formatLanguageCode = function formatLanguageCode(code) {
    // http://www.iana.org/assignments/language-tags/language-tags.xhtml
    if (typeof code === 'string' && code.indexOf('-') > -1) {
      var specialCases = ['hans', 'hant', 'latn', 'cyrl', 'cans', 'mong', 'arab'];
      var p = code.split('-');

      if (this.options.lowerCaseLng) {
        p = p.map(function (part) {
          return part.toLowerCase();
        });
      } else if (p.length === 2) {
        p[0] = p[0].toLowerCase();
        p[1] = p[1].toUpperCase();

        if (specialCases.indexOf(p[1].toLowerCase()) > -1) p[1] = capitalize(p[1].toLowerCase());
      } else if (p.length === 3) {
        p[0] = p[0].toLowerCase();

        // if lenght 2 guess it's a country
        if (p[1].length === 2) p[1] = p[1].toUpperCase();
        if (p[0] !== 'sgn' && p[2].length === 2) p[2] = p[2].toUpperCase();

        if (specialCases.indexOf(p[1].toLowerCase()) > -1) p[1] = capitalize(p[1].toLowerCase());
        if (specialCases.indexOf(p[2].toLowerCase()) > -1) p[2] = capitalize(p[2].toLowerCase());
      }

      return p.join('-');
    }

    return this.options.cleanCode || this.options.lowerCaseLng ? code.toLowerCase() : code;
  };

  LanguageUtil.prototype.isWhitelisted = function isWhitelisted(code) {
    if (this.options.load === 'languageOnly' || this.options.nonExplicitWhitelist) {
      code = this.getLanguagePartFromCode(code);
    }
    return !this.whitelist || !this.whitelist.length || this.whitelist.indexOf(code) > -1;
  };

  LanguageUtil.prototype.getFallbackCodes = function getFallbackCodes(fallbacks, code) {
    if (!fallbacks) return [];
    if (typeof fallbacks === 'string') fallbacks = [fallbacks];
    if (Object.prototype.toString.apply(fallbacks) === '[object Array]') return fallbacks;

    if (!code) return fallbacks.default || [];

    // asume we have an object defining fallbacks
    var found = fallbacks[code];
    if (!found) found = fallbacks[this.getScriptPartFromCode(code)];
    if (!found) found = fallbacks[this.formatLanguageCode(code)];
    if (!found) found = fallbacks.default;

    return found || [];
  };

  LanguageUtil.prototype.toResolveHierarchy = function toResolveHierarchy(code, fallbackCode) {
    var _this = this;

    var fallbackCodes = this.getFallbackCodes(fallbackCode || this.options.fallbackLng || [], code);

    var codes = [];
    var addCode = function addCode(c) {
      if (!c) return;
      if (_this.isWhitelisted(c)) {
        codes.push(c);
      } else {
        _this.logger.warn('rejecting non-whitelisted language code: ' + c);
      }
    };

    if (typeof code === 'string' && code.indexOf('-') > -1) {
      if (this.options.load !== 'languageOnly') addCode(this.formatLanguageCode(code));
      if (this.options.load !== 'languageOnly' && this.options.load !== 'currentOnly') addCode(this.getScriptPartFromCode(code));
      if (this.options.load !== 'currentOnly') addCode(this.getLanguagePartFromCode(code));
    } else if (typeof code === 'string') {
      addCode(this.formatLanguageCode(code));
    }

    fallbackCodes.forEach(function (fc) {
      if (codes.indexOf(fc) < 0) addCode(_this.formatLanguageCode(fc));
    });

    return codes;
  };

  return LanguageUtil;
}();

// definition http://translate.sourceforge.net/wiki/l10n/pluralforms
/* eslint-disable */
var sets = [{ lngs: ['ach', 'ak', 'am', 'arn', 'br', 'fil', 'gun', 'ln', 'mfe', 'mg', 'mi', 'oc', 'pt', 'pt-BR', 'tg', 'ti', 'tr', 'uz', 'wa'], nr: [1, 2], fc: 1 }, { lngs: ['af', 'an', 'ast', 'az', 'bg', 'bn', 'ca', 'da', 'de', 'dev', 'el', 'en', 'eo', 'es', 'et', 'eu', 'fi', 'fo', 'fur', 'fy', 'gl', 'gu', 'ha', 'he', 'hi', 'hu', 'hy', 'ia', 'it', 'kn', 'ku', 'lb', 'mai', 'ml', 'mn', 'mr', 'nah', 'nap', 'nb', 'ne', 'nl', 'nn', 'no', 'nso', 'pa', 'pap', 'pms', 'ps', 'pt-PT', 'rm', 'sco', 'se', 'si', 'so', 'son', 'sq', 'sv', 'sw', 'ta', 'te', 'tk', 'ur', 'yo'], nr: [1, 2], fc: 2 }, { lngs: ['ay', 'bo', 'cgg', 'fa', 'id', 'ja', 'jbo', 'ka', 'kk', 'km', 'ko', 'ky', 'lo', 'ms', 'sah', 'su', 'th', 'tt', 'ug', 'vi', 'wo', 'zh'], nr: [1], fc: 3 }, { lngs: ['be', 'bs', 'dz', 'hr', 'ru', 'sr', 'uk'], nr: [1, 2, 5], fc: 4 }, { lngs: ['ar'], nr: [0, 1, 2, 3, 11, 100], fc: 5 }, { lngs: ['cs', 'sk'], nr: [1, 2, 5], fc: 6 }, { lngs: ['csb', 'pl'], nr: [1, 2, 5], fc: 7 }, { lngs: ['cy'], nr: [1, 2, 3, 8], fc: 8 }, { lngs: ['fr'], nr: [1, 2], fc: 9 }, { lngs: ['ga'], nr: [1, 2, 3, 7, 11], fc: 10 }, { lngs: ['gd'], nr: [1, 2, 3, 20], fc: 11 }, { lngs: ['is'], nr: [1, 2], fc: 12 }, { lngs: ['jv'], nr: [0, 1], fc: 13 }, { lngs: ['kw'], nr: [1, 2, 3, 4], fc: 14 }, { lngs: ['lt'], nr: [1, 2, 10], fc: 15 }, { lngs: ['lv'], nr: [1, 2, 0], fc: 16 }, { lngs: ['mk'], nr: [1, 2], fc: 17 }, { lngs: ['mnk'], nr: [0, 1, 2], fc: 18 }, { lngs: ['mt'], nr: [1, 2, 11, 20], fc: 19 }, { lngs: ['or'], nr: [2, 1], fc: 2 }, { lngs: ['ro'], nr: [1, 2, 20], fc: 20 }, { lngs: ['sl'], nr: [5, 1, 2, 3], fc: 21 }];

var _rulesPluralsTypes = {
  1: function _(n) {
    return Number(n > 1);
  },
  2: function _(n) {
    return Number(n != 1);
  },
  3: function _(n) {
    return 0;
  },
  4: function _(n) {
    return Number(n % 10 == 1 && n % 100 != 11 ? 0 : n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2);
  },
  5: function _(n) {
    return Number(n === 0 ? 0 : n == 1 ? 1 : n == 2 ? 2 : n % 100 >= 3 && n % 100 <= 10 ? 3 : n % 100 >= 11 ? 4 : 5);
  },
  6: function _(n) {
    return Number(n == 1 ? 0 : n >= 2 && n <= 4 ? 1 : 2);
  },
  7: function _(n) {
    return Number(n == 1 ? 0 : n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2);
  },
  8: function _(n) {
    return Number(n == 1 ? 0 : n == 2 ? 1 : n != 8 && n != 11 ? 2 : 3);
  },
  9: function _(n) {
    return Number(n >= 2);
  },
  10: function _(n) {
    return Number(n == 1 ? 0 : n == 2 ? 1 : n < 7 ? 2 : n < 11 ? 3 : 4);
  },
  11: function _(n) {
    return Number(n == 1 || n == 11 ? 0 : n == 2 || n == 12 ? 1 : n > 2 && n < 20 ? 2 : 3);
  },
  12: function _(n) {
    return Number(n % 10 != 1 || n % 100 == 11);
  },
  13: function _(n) {
    return Number(n !== 0);
  },
  14: function _(n) {
    return Number(n == 1 ? 0 : n == 2 ? 1 : n == 3 ? 2 : 3);
  },
  15: function _(n) {
    return Number(n % 10 == 1 && n % 100 != 11 ? 0 : n % 10 >= 2 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2);
  },
  16: function _(n) {
    return Number(n % 10 == 1 && n % 100 != 11 ? 0 : n !== 0 ? 1 : 2);
  },
  17: function _(n) {
    return Number(n == 1 || n % 10 == 1 ? 0 : 1);
  },
  18: function _(n) {
    return Number(n == 0 ? 0 : n == 1 ? 1 : 2);
  },
  19: function _(n) {
    return Number(n == 1 ? 0 : n === 0 || n % 100 > 1 && n % 100 < 11 ? 1 : n % 100 > 10 && n % 100 < 20 ? 2 : 3);
  },
  20: function _(n) {
    return Number(n == 1 ? 0 : n === 0 || n % 100 > 0 && n % 100 < 20 ? 1 : 2);
  },
  21: function _(n) {
    return Number(n % 100 == 1 ? 1 : n % 100 == 2 ? 2 : n % 100 == 3 || n % 100 == 4 ? 3 : 0);
  }
};
/* eslint-enable */

function createRules() {
  var rules = {};
  sets.forEach(function (set$$1) {
    set$$1.lngs.forEach(function (l) {
      rules[l] = {
        numbers: set$$1.nr,
        plurals: _rulesPluralsTypes[set$$1.fc]
      };
    });
  });
  return rules;
}

var PluralResolver = function () {
  function PluralResolver(languageUtils) {
    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    classCallCheck(this, PluralResolver);

    this.languageUtils = languageUtils;
    this.options = options;

    this.logger = baseLogger.create('pluralResolver');

    this.rules = createRules();
  }

  PluralResolver.prototype.addRule = function addRule(lng, obj) {
    this.rules[lng] = obj;
  };

  PluralResolver.prototype.getRule = function getRule(code) {
    return this.rules[code] || this.rules[this.languageUtils.getLanguagePartFromCode(code)];
  };

  PluralResolver.prototype.needsPlural = function needsPlural(code) {
    var rule = this.getRule(code);

    return rule && rule.numbers.length > 1;
  };

  PluralResolver.prototype.getSuffix = function getSuffix(code, count) {
    var _this = this;

    var rule = this.getRule(code);

    if (rule) {
      //if (rule.numbers.length === 1) return ''; // only singular

      var idx = rule.noAbs ? rule.plurals(count) : rule.plurals(Math.abs(count));
      var suffix = rule.numbers[idx];

      // special treatment for lngs only having singular and plural
      if (this.options.simplifyPluralSuffix && rule.numbers.length === 2 && rule.numbers[0] === 1) {
        if (suffix === 2) {
          suffix = 'plural';
        } else if (suffix === 1) {
          suffix = '';
        }
      }

      var returnSuffix = function returnSuffix() {
        return _this.options.prepend && suffix.toString() ? _this.options.prepend + suffix.toString() : suffix.toString();
      };

      // COMPATIBILITY JSON
      // v1
      if (this.options.compatibilityJSON === 'v1') {
        if (suffix === 1) return '';
        if (typeof suffix === 'number') return '_plural_' + suffix.toString();
        return returnSuffix();
      } else if ( /* v2 */this.options.compatibilityJSON === 'v2' || rule.numbers.length === 2 && rule.numbers[0] === 1) {
        return returnSuffix();
      } else if ( /* v3 - gettext index */rule.numbers.length === 2 && rule.numbers[0] === 1) {
        return returnSuffix();
      }
      return this.options.prepend && idx.toString() ? this.options.prepend + idx.toString() : idx.toString();
    }

    this.logger.warn('no plural rule found for: ' + code);
    return '';
  };

  return PluralResolver;
}();

var Interpolator = function () {
  function Interpolator() {
    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    classCallCheck(this, Interpolator);

    this.logger = baseLogger.create('interpolator');

    this.init(options, true);
  }

  /* eslint no-param-reassign: 0 */


  Interpolator.prototype.init = function init() {
    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    var reset = arguments[1];

    if (reset) {
      this.options = options;
      this.format = options.interpolation && options.interpolation.format || function (value) {
        return value;
      };
      this.escape = options.interpolation && options.interpolation.escape || escape;
    }
    if (!options.interpolation) options.interpolation = { escapeValue: true };

    var iOpts = options.interpolation;

    this.escapeValue = iOpts.escapeValue !== undefined ? iOpts.escapeValue : true;

    this.prefix = iOpts.prefix ? regexEscape(iOpts.prefix) : iOpts.prefixEscaped || '{{';
    this.suffix = iOpts.suffix ? regexEscape(iOpts.suffix) : iOpts.suffixEscaped || '}}';

    this.formatSeparator = iOpts.formatSeparator ? iOpts.formatSeparator : iOpts.formatSeparator || ',';

    this.unescapePrefix = iOpts.unescapeSuffix ? '' : iOpts.unescapePrefix || '-';
    this.unescapeSuffix = this.unescapePrefix ? '' : iOpts.unescapeSuffix || '';

    this.nestingPrefix = iOpts.nestingPrefix ? regexEscape(iOpts.nestingPrefix) : iOpts.nestingPrefixEscaped || regexEscape('$t(');
    this.nestingSuffix = iOpts.nestingSuffix ? regexEscape(iOpts.nestingSuffix) : iOpts.nestingSuffixEscaped || regexEscape(')');

    this.maxReplaces = iOpts.maxReplaces ? iOpts.maxReplaces : 1000;

    // the regexp
    this.resetRegExp();
  };

  Interpolator.prototype.reset = function reset() {
    if (this.options) this.init(this.options);
  };

  Interpolator.prototype.resetRegExp = function resetRegExp() {
    // the regexp
    var regexpStr = this.prefix + '(.+?)' + this.suffix;
    this.regexp = new RegExp(regexpStr, 'g');

    var regexpUnescapeStr = '' + this.prefix + this.unescapePrefix + '(.+?)' + this.unescapeSuffix + this.suffix;
    this.regexpUnescape = new RegExp(regexpUnescapeStr, 'g');

    var nestingRegexpStr = this.nestingPrefix + '(.+?)' + this.nestingSuffix;
    this.nestingRegexp = new RegExp(nestingRegexpStr, 'g');
  };

  Interpolator.prototype.interpolate = function interpolate(str, data, lng) {
    var _this = this;

    var match = void 0;
    var value = void 0;
    var replaces = void 0;

    function regexSafe(val) {
      return val.replace(/\$/g, '$$$$');
    }

    var handleFormat = function handleFormat(key) {
      if (key.indexOf(_this.formatSeparator) < 0) return getPath(data, key);

      var p = key.split(_this.formatSeparator);
      var k = p.shift().trim();
      var f = p.join(_this.formatSeparator).trim();

      return _this.format(getPath(data, k), f, lng);
    };

    this.resetRegExp();

    replaces = 0;
    // unescape if has unescapePrefix/Suffix
    /* eslint no-cond-assign: 0 */
    while (match = this.regexpUnescape.exec(str)) {
      value = handleFormat(match[1].trim());
      str = str.replace(match[0], value);
      this.regexpUnescape.lastIndex = 0;
      replaces++;
      if (replaces >= this.maxReplaces) {
        break;
      }
    }

    replaces = 0;
    // regular escape on demand
    while (match = this.regexp.exec(str)) {
      value = handleFormat(match[1].trim());
      if (typeof value !== 'string') value = makeString(value);
      if (!value) {
        this.logger.warn('missed to pass in variable ' + match[1] + ' for interpolating ' + str);
        value = '';
      }
      value = this.escapeValue ? regexSafe(this.escape(value)) : regexSafe(value);
      str = str.replace(match[0], value);
      this.regexp.lastIndex = 0;
      replaces++;
      if (replaces >= this.maxReplaces) {
        break;
      }
    }
    return str;
  };

  Interpolator.prototype.nest = function nest(str, fc) {
    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};

    var match = void 0;
    var value = void 0;

    var clonedOptions = _extends({}, options);
    clonedOptions.applyPostProcessor = false; // avoid post processing on nested lookup

    // if value is something like "myKey": "lorem $(anotherKey, { "count": {{aValueInOptions}} })"
    function handleHasOptions(key) {
      if (key.indexOf(',') < 0) return key;

      var p = key.split(',');
      key = p.shift();
      var optionsString = p.join(',');
      optionsString = this.interpolate(optionsString, clonedOptions);
      optionsString = optionsString.replace(/'/g, '"');

      try {
        clonedOptions = JSON.parse(optionsString);
      } catch (e) {
        this.logger.error('failed parsing options string in nesting for key ' + key, e);
      }

      return key;
    }

    // regular escape on demand
    while (match = this.nestingRegexp.exec(str)) {
      value = fc(handleHasOptions.call(this, match[1].trim()), clonedOptions);

      // is only the nesting key (key1 = '$(key2)') return the value without stringify
      if (value && match[0] === str && typeof value !== 'string') return value;

      // no string to include or empty
      if (typeof value !== 'string') value = makeString(value);
      if (!value) {
        this.logger.warn('missed to resolve ' + match[1] + ' for nesting ' + str);
        value = '';
      }
      // Nested keys should not be escaped by default #854
      // value = this.escapeValue ? regexSafe(utils.escape(value)) : regexSafe(value);
      str = str.replace(match[0], value);
      this.regexp.lastIndex = 0;
    }
    return str;
  };

  return Interpolator;
}();

function remove(arr, what) {
  var found = arr.indexOf(what);

  while (found !== -1) {
    arr.splice(found, 1);
    found = arr.indexOf(what);
  }
}

var Connector = function (_EventEmitter) {
  inherits(Connector, _EventEmitter);

  function Connector(backend, store, services) {
    var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};
    classCallCheck(this, Connector);

    var _this = possibleConstructorReturn(this, _EventEmitter.call(this));

    _this.backend = backend;
    _this.store = store;
    _this.languageUtils = services.languageUtils;
    _this.options = options;
    _this.logger = baseLogger.create('backendConnector');

    _this.state = {};
    _this.queue = [];

    if (_this.backend && _this.backend.init) {
      _this.backend.init(services, options.backend, options);
    }
    return _this;
  }

  Connector.prototype.queueLoad = function queueLoad(languages, namespaces, callback) {
    var _this2 = this;

    // find what needs to be loaded
    var toLoad = [];
    var pending = [];
    var toLoadLanguages = [];
    var toLoadNamespaces = [];

    languages.forEach(function (lng) {
      var hasAllNamespaces = true;

      namespaces.forEach(function (ns) {
        var name = lng + '|' + ns;

        if (_this2.store.hasResourceBundle(lng, ns)) {
          _this2.state[name] = 2; // loaded
        } else if (_this2.state[name] < 0) {
          // nothing to do for err
        } else if (_this2.state[name] === 1) {
          if (pending.indexOf(name) < 0) pending.push(name);
        } else {
          _this2.state[name] = 1; // pending

          hasAllNamespaces = false;

          if (pending.indexOf(name) < 0) pending.push(name);
          if (toLoad.indexOf(name) < 0) toLoad.push(name);
          if (toLoadNamespaces.indexOf(ns) < 0) toLoadNamespaces.push(ns);
        }
      });

      if (!hasAllNamespaces) toLoadLanguages.push(lng);
    });

    if (toLoad.length || pending.length) {
      this.queue.push({
        pending: pending,
        loaded: {},
        errors: [],
        callback: callback
      });
    }

    return {
      toLoad: toLoad,
      pending: pending,
      toLoadLanguages: toLoadLanguages,
      toLoadNamespaces: toLoadNamespaces
    };
  };

  Connector.prototype.loaded = function loaded(name, err, data) {
    var _this3 = this;

    var _name$split = name.split('|'),
        _name$split2 = slicedToArray(_name$split, 2),
        lng = _name$split2[0],
        ns = _name$split2[1];

    if (err) this.emit('failedLoading', lng, ns, err);

    if (data) {
      this.store.addResourceBundle(lng, ns, data);
    }

    // set loaded
    this.state[name] = err ? -1 : 2;

    // callback if ready
    this.queue.forEach(function (q) {
      pushPath(q.loaded, [lng], ns);
      remove(q.pending, name);

      if (err) q.errors.push(err);

      if (q.pending.length === 0 && !q.done) {
        _this3.emit('loaded', q.loaded);
        /* eslint no-param-reassign: 0 */
        q.done = true;
        if (q.errors.length) {
          q.callback(q.errors);
        } else {
          q.callback();
        }
      }
    });

    // remove done load requests
    this.queue = this.queue.filter(function (q) {
      return !q.done;
    });
  };

  Connector.prototype.read = function read(lng, ns, fcName) {
    var tried = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;

    var _this4 = this;

    var wait = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 250;
    var callback = arguments[5];

    if (!lng.length) return callback(null, {}); // noting to load

    return this.backend[fcName](lng, ns, function (err, data) {
      if (err && data /* = retryFlag */ && tried < 5) {
        setTimeout(function () {
          _this4.read.call(_this4, lng, ns, fcName, tried + 1, wait * 2, callback);
        }, wait);
        return;
      }
      callback(err, data);
    });
  };

  /* eslint consistent-return: 0 */


  Connector.prototype.load = function load(languages, namespaces, callback) {
    var _this5 = this;

    if (!this.backend) {
      this.logger.warn('No backend was added via i18next.use. Will not load resources.');
      return callback && callback();
    }
    var options = _extends({}, this.backend.options, this.options.backend);

    if (typeof languages === 'string') languages = this.languageUtils.toResolveHierarchy(languages);
    if (typeof namespaces === 'string') namespaces = [namespaces];

    var toLoad = this.queueLoad(languages, namespaces, callback);
    if (!toLoad.toLoad.length) {
      if (!toLoad.pending.length) callback(); // nothing to load and no pendings...callback now
      return null; // pendings will trigger callback
    }

    // load with multi-load
    if (options.allowMultiLoading && this.backend.readMulti) {
      this.read(toLoad.toLoadLanguages, toLoad.toLoadNamespaces, 'readMulti', null, null, function (err, data) {
        if (err) _this5.logger.warn('loading namespaces ' + toLoad.toLoadNamespaces.join(', ') + ' for languages ' + toLoad.toLoadLanguages.join(', ') + ' via multiloading failed', err);
        if (!err && data) _this5.logger.log('successfully loaded namespaces ' + toLoad.toLoadNamespaces.join(', ') + ' for languages ' + toLoad.toLoadLanguages.join(', ') + ' via multiloading', data);

        toLoad.toLoad.forEach(function (name) {
          var _name$split3 = name.split('|'),
              _name$split4 = slicedToArray(_name$split3, 2),
              l = _name$split4[0],
              n = _name$split4[1];

          var bundle = getPath(data, [l, n]);
          if (bundle) {
            _this5.loaded(name, err, bundle);
          } else {
            var error = 'loading namespace ' + n + ' for language ' + l + ' via multiloading failed';
            _this5.loaded(name, error);
            _this5.logger.error(error);
          }
        });
      });
    } else {
      toLoad.toLoad.forEach(function (name) {
        _this5.loadOne(name);
      });
    }
  };

  Connector.prototype.reload = function reload(languages, namespaces) {
    var _this6 = this;

    if (!this.backend) {
      this.logger.warn('No backend was added via i18next.use. Will not load resources.');
    }
    var options = _extends({}, this.backend.options, this.options.backend);

    if (typeof languages === 'string') languages = this.languageUtils.toResolveHierarchy(languages);
    if (typeof namespaces === 'string') namespaces = [namespaces];

    // load with multi-load
    if (options.allowMultiLoading && this.backend.readMulti) {
      this.read(languages, namespaces, 'readMulti', null, null, function (err, data) {
        if (err) _this6.logger.warn('reloading namespaces ' + namespaces.join(', ') + ' for languages ' + languages.join(', ') + ' via multiloading failed', err);
        if (!err && data) _this6.logger.log('successfully reloaded namespaces ' + namespaces.join(', ') + ' for languages ' + languages.join(', ') + ' via multiloading', data);

        languages.forEach(function (l) {
          namespaces.forEach(function (n) {
            var bundle = getPath(data, [l, n]);
            if (bundle) {
              _this6.loaded(l + '|' + n, err, bundle);
            } else {
              var error = 'reloading namespace ' + n + ' for language ' + l + ' via multiloading failed';
              _this6.loaded(l + '|' + n, error);
              _this6.logger.error(error);
            }
          });
        });
      });
    } else {
      languages.forEach(function (l) {
        namespaces.forEach(function (n) {
          _this6.loadOne(l + '|' + n, 're');
        });
      });
    }
  };

  Connector.prototype.loadOne = function loadOne(name) {
    var _this7 = this;

    var prefix = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';

    var _name$split5 = name.split('|'),
        _name$split6 = slicedToArray(_name$split5, 2),
        lng = _name$split6[0],
        ns = _name$split6[1];

    this.read(lng, ns, 'read', null, null, function (err, data) {
      if (err) _this7.logger.warn(prefix + 'loading namespace ' + ns + ' for language ' + lng + ' failed', err);
      if (!err && data) _this7.logger.log(prefix + 'loaded namespace ' + ns + ' for language ' + lng, data);

      _this7.loaded(name, err, data);
    });
  };

  Connector.prototype.saveMissing = function saveMissing(languages, namespace, key, fallbackValue) {
    if (this.backend && this.backend.create) this.backend.create(languages, namespace, key, fallbackValue);

    // write to store to avoid resending
    if (!languages || !languages[0]) return;
    this.store.addResource(languages[0], namespace, key, fallbackValue);
  };

  return Connector;
}(EventEmitter);

var Connector$1 = function (_EventEmitter) {
  inherits(Connector, _EventEmitter);

  function Connector(cache, store, services) {
    var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};
    classCallCheck(this, Connector);

    var _this = possibleConstructorReturn(this, _EventEmitter.call(this));

    _this.cache = cache;
    _this.store = store;
    _this.services = services;
    _this.options = options;
    _this.logger = baseLogger.create('cacheConnector');

    if (_this.cache && _this.cache.init) _this.cache.init(services, options.cache, options);
    return _this;
  }

  /* eslint consistent-return: 0 */


  Connector.prototype.load = function load(languages, namespaces, callback) {
    var _this2 = this;

    if (!this.cache) return callback && callback();
    var options = _extends({}, this.cache.options, this.options.cache);

    var loadLngs = typeof languages === 'string' ? this.services.languageUtils.toResolveHierarchy(languages) : languages;

    if (options.enabled) {
      this.cache.load(loadLngs, function (err, data) {
        if (err) _this2.logger.error('loading languages ' + loadLngs.join(', ') + ' from cache failed', err);
        if (data) {
          /* eslint no-restricted-syntax: 0 */
          for (var l in data) {
            if (Object.prototype.hasOwnProperty.call(data, l)) {
              for (var n in data[l]) {
                if (Object.prototype.hasOwnProperty.call(data[l], n)) {
                  if (n !== 'i18nStamp') {
                    var bundle = data[l][n];
                    if (bundle) _this2.store.addResourceBundle(l, n, bundle);
                  }
                }
              }
            }
          }
        }
        if (callback) callback();
      });
    } else if (callback) {
      callback();
    }
  };

  Connector.prototype.save = function save() {
    if (this.cache && this.options.cache && this.options.cache.enabled) this.cache.save(this.store.data);
  };

  return Connector;
}(EventEmitter);

function get$1() {
  return {
    debug: false,
    initImmediate: true,

    ns: ['translation'],
    defaultNS: ['translation'],
    fallbackLng: ['dev'],
    fallbackNS: false, // string or array of namespaces

    whitelist: false, // array with whitelisted languages
    nonExplicitWhitelist: false,
    load: 'all', // | currentOnly | languageOnly
    preload: false, // array with preload languages

    simplifyPluralSuffix: true,
    keySeparator: '.',
    nsSeparator: ':',
    pluralSeparator: '_',
    contextSeparator: '_',

    saveMissing: false, // enable to send missing values
    saveMissingTo: 'fallback', // 'current' || 'all'
    missingKeyHandler: false, // function(lng, ns, key, fallbackValue) -> override if prefer on handling

    postProcess: false, // string or array of postProcessor names
    returnNull: true, // allows null value as valid translation
    returnEmptyString: true, // allows empty string value as valid translation
    returnObjects: false,
    joinArrays: false, // or string to join array
    returnedObjectHandler: function returnedObjectHandler() {}, // function(key, value, options) triggered if key returns object but returnObjects is set to false
    parseMissingKeyHandler: false, // function(key) parsed a key that was not found in t() before returning
    appendNamespaceToMissingKey: false,
    appendNamespaceToCIMode: false,
    overloadTranslationOptionHandler: function handle(args) {
      return { defaultValue: args[1] };
    },

    interpolation: {
      escapeValue: true,
      format: function format(value, _format, lng) {
        return value;
      },
      prefix: '{{',
      suffix: '}}',
      formatSeparator: ',',
      // prefixEscaped: '{{',
      // suffixEscaped: '}}',
      // unescapeSuffix: '',
      unescapePrefix: '-',

      nestingPrefix: '$t(',
      nestingSuffix: ')',
      // nestingPrefixEscaped: '$t(',
      // nestingSuffixEscaped: ')',
      // defaultVariables: undefined // object that can have values to interpolate on - extends passed in interpolation data
      maxReplaces: 1000 // max replaces to prevent endless loop
    }
  };
}

/* eslint no-param-reassign: 0 */
function transformOptions(options) {
  // create namespace object if namespace is passed in as string
  if (typeof options.ns === 'string') options.ns = [options.ns];
  if (typeof options.fallbackLng === 'string') options.fallbackLng = [options.fallbackLng];
  if (typeof options.fallbackNS === 'string') options.fallbackNS = [options.fallbackNS];

  // extend whitelist with cimode
  if (options.whitelist && options.whitelist.indexOf('cimode') < 0) options.whitelist.push('cimode');

  return options;
}

function noop() {}

var I18n = function (_EventEmitter) {
  inherits(I18n, _EventEmitter);

  function I18n() {
    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    var callback = arguments[1];
    classCallCheck(this, I18n);

    var _this = possibleConstructorReturn(this, _EventEmitter.call(this));

    _this.options = transformOptions(options);
    _this.services = {};
    _this.logger = baseLogger;
    _this.modules = { external: [] };

    if (callback && !_this.isInitialized && !options.isClone) {
      var _ret;

      // https://github.com/i18next/i18next/issues/879
      if (!_this.options.initImmediate) return _ret = _this.init(options, callback), possibleConstructorReturn(_this, _ret);
      setTimeout(function () {
        _this.init(options, callback);
      }, 0);
    }
    return _this;
  }

  I18n.prototype.init = function init() {
    var _this2 = this;

    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    var callback = arguments[1];

    if (typeof options === 'function') {
      callback = options;
      options = {};
    }
    this.options = _extends({}, get$1(), this.options, transformOptions(options));

    this.format = this.options.interpolation.format;
    if (!callback) callback = noop;

    function createClassOnDemand(ClassOrObject) {
      if (!ClassOrObject) return null;
      if (typeof ClassOrObject === 'function') return new ClassOrObject();
      return ClassOrObject;
    }

    // init services
    if (!this.options.isClone) {
      if (this.modules.logger) {
        baseLogger.init(createClassOnDemand(this.modules.logger), this.options);
      } else {
        baseLogger.init(null, this.options);
      }

      var lu = new LanguageUtil(this.options);
      this.store = new ResourceStore(this.options.resources, this.options);

      var s = this.services;
      s.logger = baseLogger;
      s.resourceStore = this.store;
      s.resourceStore.on('added removed', function (lng, ns) {
        s.cacheConnector.save();
      });
      s.languageUtils = lu;
      s.pluralResolver = new PluralResolver(lu, { prepend: this.options.pluralSeparator, compatibilityJSON: this.options.compatibilityJSON, simplifyPluralSuffix: this.options.simplifyPluralSuffix });
      s.interpolator = new Interpolator(this.options);

      s.backendConnector = new Connector(createClassOnDemand(this.modules.backend), s.resourceStore, s, this.options);
      // pipe events from backendConnector
      s.backendConnector.on('*', function (event) {
        for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
          args[_key - 1] = arguments[_key];
        }

        _this2.emit.apply(_this2, [event].concat(args));
      });

      s.backendConnector.on('loaded', function (loaded) {
        s.cacheConnector.save();
      });

      s.cacheConnector = new Connector$1(createClassOnDemand(this.modules.cache), s.resourceStore, s, this.options);
      // pipe events from backendConnector
      s.cacheConnector.on('*', function (event) {
        for (var _len2 = arguments.length, args = Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {
          args[_key2 - 1] = arguments[_key2];
        }

        _this2.emit.apply(_this2, [event].concat(args));
      });

      if (this.modules.languageDetector) {
        s.languageDetector = createClassOnDemand(this.modules.languageDetector);
        s.languageDetector.init(s, this.options.detection, this.options);
      }

      this.translator = new Translator(this.services, this.options);
      // pipe events from translator
      this.translator.on('*', function (event) {
        for (var _len3 = arguments.length, args = Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {
          args[_key3 - 1] = arguments[_key3];
        }

        _this2.emit.apply(_this2, [event].concat(args));
      });

      this.modules.external.forEach(function (m) {
        if (m.init) m.init(_this2);
      });
    }

    // append api
    var storeApi = ['getResource', 'addResource', 'addResources', 'addResourceBundle', 'removeResourceBundle', 'hasResourceBundle', 'getResourceBundle'];
    storeApi.forEach(function (fcName) {
      _this2[fcName] = function () {
        var _store;

        return (_store = _this2.store)[fcName].apply(_store, arguments);
      };
    });

    var load = function load() {
      _this2.changeLanguage(_this2.options.lng, function (err, t) {
        _this2.isInitialized = true;
        _this2.logger.log('initialized', _this2.options);
        _this2.emit('initialized', _this2.options);

        callback(err, t);
      });
    };

    if (this.options.resources || !this.options.initImmediate) {
      load();
    } else {
      setTimeout(load, 0);
    }

    return this;
  };

  /* eslint consistent-return: 0 */


  I18n.prototype.loadResources = function loadResources() {
    var _this3 = this;

    var callback = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : noop;

    if (!this.options.resources) {
      if (this.language && this.language.toLowerCase() === 'cimode') return callback(); // avoid loading resources for cimode

      var toLoad = [];

      var append = function append(lng) {
        if (!lng) return;
        var lngs = _this3.services.languageUtils.toResolveHierarchy(lng);
        lngs.forEach(function (l) {
          if (toLoad.indexOf(l) < 0) toLoad.push(l);
        });
      };

      if (!this.language) {
        // at least load fallbacks in this case
        var fallbacks = this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);
        fallbacks.forEach(function (l) {
          return append(l);
        });
      } else {
        append(this.language);
      }

      if (this.options.preload) {
        this.options.preload.forEach(function (l) {
          return append(l);
        });
      }

      this.services.cacheConnector.load(toLoad, this.options.ns, function () {
        _this3.services.backendConnector.load(toLoad, _this3.options.ns, callback);
      });
    } else {
      callback(null);
    }
  };

  I18n.prototype.reloadResources = function reloadResources(lngs, ns) {
    if (!lngs) lngs = this.languages;
    if (!ns) ns = this.options.ns;
    this.services.backendConnector.reload(lngs, ns);
  };

  I18n.prototype.use = function use(module) {
    if (module.type === 'backend') {
      this.modules.backend = module;
    }

    if (module.type === 'cache') {
      this.modules.cache = module;
    }

    if (module.type === 'logger' || module.log && module.warn && module.error) {
      this.modules.logger = module;
    }

    if (module.type === 'languageDetector') {
      this.modules.languageDetector = module;
    }

    if (module.type === 'postProcessor') {
      postProcessor.addPostProcessor(module);
    }

    if (module.type === '3rdParty') {
      this.modules.external.push(module);
    }

    return this;
  };

  I18n.prototype.changeLanguage = function changeLanguage(lng, callback) {
    var _this4 = this;

    var done = function done(err, l) {
      _this4.translator.changeLanguage(l);

      if (l) {
        _this4.emit('languageChanged', l);
        _this4.logger.log('languageChanged', l);
      }

      if (callback) callback(err, function () {
        return _this4.t.apply(_this4, arguments);
      });
    };

    var setLng = function setLng(l) {
      if (l) {
        _this4.language = l;
        _this4.languages = _this4.services.languageUtils.toResolveHierarchy(l);

        if (_this4.services.languageDetector) _this4.services.languageDetector.cacheUserLanguage(l);
      }

      _this4.loadResources(function (err) {
        done(err, l);
      });
    };

    if (!lng && this.services.languageDetector && !this.services.languageDetector.async) {
      setLng(this.services.languageDetector.detect());
    } else if (!lng && this.services.languageDetector && this.services.languageDetector.async) {
      this.services.languageDetector.detect(setLng);
    } else {
      setLng(lng);
    }
  };

  I18n.prototype.getFixedT = function getFixedT(lng, ns) {
    var _this5 = this;

    var fixedT = function fixedT(key, opts) {
      for (var _len4 = arguments.length, rest = Array(_len4 > 2 ? _len4 - 2 : 0), _key4 = 2; _key4 < _len4; _key4++) {
        rest[_key4 - 2] = arguments[_key4];
      }

      var options = _extends({}, opts);
      if ((typeof opts === 'undefined' ? 'undefined' : _typeof(opts)) !== 'object') {
        options = _this5.options.overloadTranslationOptionHandler([key, opts].concat(rest));
      }

      options.lng = options.lng || fixedT.lng;
      options.lngs = options.lngs || fixedT.lngs;
      options.ns = options.ns || fixedT.ns;
      return _this5.t(key, options);
    };
    if (typeof lng === 'string') {
      fixedT.lng = lng;
    } else {
      fixedT.lngs = lng;
    }
    fixedT.ns = ns;
    return fixedT;
  };

  I18n.prototype.t = function t() {
    var _translator;

    return this.translator && (_translator = this.translator).translate.apply(_translator, arguments);
  };

  I18n.prototype.exists = function exists() {
    var _translator2;

    return this.translator && (_translator2 = this.translator).exists.apply(_translator2, arguments);
  };

  I18n.prototype.setDefaultNamespace = function setDefaultNamespace(ns) {
    this.options.defaultNS = ns;
  };

  I18n.prototype.loadNamespaces = function loadNamespaces(ns, callback) {
    var _this6 = this;

    if (!this.options.ns) return callback && callback();
    if (typeof ns === 'string') ns = [ns];

    ns.forEach(function (n) {
      if (_this6.options.ns.indexOf(n) < 0) _this6.options.ns.push(n);
    });

    this.loadResources(callback);
  };

  I18n.prototype.loadLanguages = function loadLanguages(lngs, callback) {
    if (typeof lngs === 'string') lngs = [lngs];
    var preloaded = this.options.preload || [];

    var newLngs = lngs.filter(function (lng) {
      return preloaded.indexOf(lng) < 0;
    });
    // Exit early if all given languages are already preloaded
    if (!newLngs.length) return callback();

    this.options.preload = preloaded.concat(newLngs);
    this.loadResources(callback);
  };

  I18n.prototype.dir = function dir(lng) {
    if (!lng) lng = this.languages && this.languages.length > 0 ? this.languages[0] : this.language;
    if (!lng) return 'rtl';

    var rtlLngs = ['ar', 'shu', 'sqr', 'ssh', 'xaa', 'yhd', 'yud', 'aao', 'abh', 'abv', 'acm', 'acq', 'acw', 'acx', 'acy', 'adf', 'ads', 'aeb', 'aec', 'afb', 'ajp', 'apc', 'apd', 'arb', 'arq', 'ars', 'ary', 'arz', 'auz', 'avl', 'ayh', 'ayl', 'ayn', 'ayp', 'bbz', 'pga', 'he', 'iw', 'ps', 'pbt', 'pbu', 'pst', 'prp', 'prd', 'ur', 'ydd', 'yds', 'yih', 'ji', 'yi', 'hbo', 'men', 'xmn', 'fa', 'jpr', 'peo', 'pes', 'prs', 'dv', 'sam'];

    return rtlLngs.indexOf(this.services.languageUtils.getLanguagePartFromCode(lng)) >= 0 ? 'rtl' : 'ltr';
  };

  /* eslint class-methods-use-this: 0 */


  I18n.prototype.createInstance = function createInstance() {
    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    var callback = arguments[1];

    return new I18n(options, callback);
  };

  I18n.prototype.cloneInstance = function cloneInstance() {
    var _this7 = this;

    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    var callback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : noop;

    var mergedOptions = _extends({}, this.options, options, { isClone: true });
    var clone = new I18n(mergedOptions);
    var membersToCopy = ['store', 'services', 'language'];
    membersToCopy.forEach(function (m) {
      clone[m] = _this7[m];
    });
    clone.translator = new Translator(clone.services, clone.options);
    clone.translator.on('*', function (event) {
      for (var _len5 = arguments.length, args = Array(_len5 > 1 ? _len5 - 1 : 0), _key5 = 1; _key5 < _len5; _key5++) {
        args[_key5 - 1] = arguments[_key5];
      }

      clone.emit.apply(clone, [event].concat(args));
    });
    clone.init(mergedOptions, callback);
    clone.translator.options = clone.options; // sync options

    return clone;
  };

  return I18n;
}(EventEmitter);

var i18next = new I18n();

return i18next;

})));


/***/ }),
/* 6 */
/***/ (function(module, exports, __webpack_require__) {

(function (global, factory) {
   true ? module.exports = factory() :
  typeof define === 'function' && define.amd ? define(factory) :
  (global.i18nextXHRBackend = factory());
}(this, (function () { 'use strict';

var arr = [];
var each = arr.forEach;
var slice = arr.slice;

function defaults(obj) {
  each.call(slice.call(arguments, 1), function (source) {
    if (source) {
      for (var prop in source) {
        if (obj[prop] === undefined) obj[prop] = source[prop];
      }
    }
  });
  return obj;
}

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

function addQueryString(url, params) {
  if (params && (typeof params === 'undefined' ? 'undefined' : _typeof(params)) === 'object') {
    var queryString = '',
        e = encodeURIComponent;

    // Must encode data
    for (var paramName in params) {
      queryString += '&' + e(paramName) + '=' + e(params[paramName]);
    }

    if (!queryString) {
      return url;
    }

    url = url + (url.indexOf('?') !== -1 ? '&' : '?') + queryString.slice(1);
  }

  return url;
}

// https://gist.github.com/Xeoncross/7663273
function ajax(url, options, callback, data, cache) {

  if (data && (typeof data === 'undefined' ? 'undefined' : _typeof(data)) === 'object') {
    if (!cache) {
      data['_t'] = new Date();
    }
    // URL encoded form data must be in querystring format
    data = addQueryString('', data).slice(1);
  }

  if (options.queryStringParams) {
    url = addQueryString(url, options.queryStringParams);
  }

  try {
    var x;
    if (XMLHttpRequest) {
      x = new XMLHttpRequest();
    } else {
      x = new ActiveXObject('MSXML2.XMLHTTP.3.0');
    }
    x.open(data ? 'POST' : 'GET', url, 1);
    if (!options.crossDomain) {
      x.setRequestHeader('X-Requested-With', 'XMLHttpRequest');
    }
    x.withCredentials = !!options.withCredentials;
    if (data) {
      x.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');
    }
    if (x.overrideMimeType) {
      x.overrideMimeType("application/json");
    }
    var h = options.customHeaders;
    if (h) {
      for (var i in h) {
        x.setRequestHeader(i, h[i]);
      }
    }
    x.onreadystatechange = function () {
      x.readyState > 3 && callback && callback(x.responseText, x);
    };
    x.send(data);
  } catch (e) {
    console && console.log(e);
  }
}

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function getDefaults() {
  return {
    loadPath: '/locales/{{lng}}/{{ns}}.json',
    addPath: 'locales/add/{{lng}}/{{ns}}',
    allowMultiLoading: false,
    parse: JSON.parse,
    crossDomain: false,
    ajax: ajax
  };
}

var Backend = function () {
  function Backend(services) {
    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

    _classCallCheck(this, Backend);

    this.init(services, options);

    this.type = 'backend';
  }

  _createClass(Backend, [{
    key: 'init',
    value: function init(services) {
      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

      this.services = services;
      this.options = defaults(options, this.options || {}, getDefaults());
    }
  }, {
    key: 'readMulti',
    value: function readMulti(languages, namespaces, callback) {
      var loadPath = this.options.loadPath;
      if (typeof this.options.loadPath === 'function') {
        loadPath = this.options.loadPath(languages, namespaces);
      }

      var url = this.services.interpolator.interpolate(loadPath, { lng: languages.join('+'), ns: namespaces.join('+') });

      this.loadUrl(url, callback);
    }
  }, {
    key: 'read',
    value: function read(language, namespace, callback) {
      var loadPath = this.options.loadPath;
      if (typeof this.options.loadPath === 'function') {
        loadPath = this.options.loadPath([language], [namespace]);
      }

      var url = this.services.interpolator.interpolate(loadPath, { lng: language, ns: namespace });

      this.loadUrl(url, callback);
    }
  }, {
    key: 'loadUrl',
    value: function loadUrl(url, callback) {
      var _this = this;

      this.options.ajax(url, this.options, function (data, xhr) {
        if (xhr.status >= 500 && xhr.status < 600) return callback('failed loading ' + url, true /* retry */);
        if (xhr.status >= 400 && xhr.status < 500) return callback('failed loading ' + url, false /* no retry */);

        var ret = void 0,
            err = void 0;
        try {
          ret = _this.options.parse(data, url);
        } catch (e) {
          err = 'failed parsing ' + url + ' to json';
        }
        if (err) return callback(err, false);
        callback(null, ret);
      });
    }
  }, {
    key: 'create',
    value: function create(languages, namespace, key, fallbackValue) {
      var _this2 = this;

      if (typeof languages === 'string') languages = [languages];

      var payload = {};
      payload[key] = fallbackValue || '';

      languages.forEach(function (lng) {
        var url = _this2.services.interpolator.interpolate(_this2.options.addPath, { lng: lng, ns: namespace });

        _this2.options.ajax(url, _this2.options, function (data, xhr) {
          //const statusCode = xhr.status.toString();
          // TODO: if statusCode === 4xx do log
        }, payload);
      });
    }
  }]);

  return Backend;
}();

Backend.type = 'backend';

return Backend;

})));


/***/ }),
/* 7 */
/***/ (function(module, exports, __webpack_require__) {

(function (global, factory) {
     true ? module.exports = factory() :
    typeof define === 'function' && define.amd ? define(factory) :
    (global.i18nextLocalStorageCache = factory());
}(this, (function () { 'use strict';

var arr = [];
var each = arr.forEach;
var slice = arr.slice;

function defaults(obj) {
  each.call(slice.call(arguments, 1), function (source) {
    if (source) {
      for (var prop in source) {
        if (obj[prop] === undefined) obj[prop] = source[prop];
      }
    }
  });
  return obj;
}



function debounce(func, wait, immediate) {
  var timeout;
  return function () {
    var context = this,
        args = arguments;
    var later = function later() {
      timeout = null;
      if (!immediate) func.apply(context, args);
    };
    var callNow = immediate && !timeout;
    clearTimeout(timeout);
    timeout = setTimeout(later, wait);
    if (callNow) func.apply(context, args);
  };
}

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var storage = {
  setItem: function setItem(key, value) {
    if (window.localStorage) {
      try {
        window.localStorage.setItem(key, value);
      } catch (e) {
        // f.log('failed to set value for key "' + key + '" to localStorage.');
      }
    }
  },
  getItem: function getItem(key, value) {
    if (window.localStorage) {
      try {
        return window.localStorage.getItem(key, value);
      } catch (e) {
        // f.log('failed to get value for key "' + key + '" from localStorage.');
      }
    }
    return undefined;
  }
};

function getDefaults() {
  return {
    enabled: false,
    prefix: 'i18next_res_',
    expirationTime: 7 * 24 * 60 * 60 * 1000,
    versions: {}
  };
}

var Cache = function () {
  function Cache(services) {
    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

    _classCallCheck(this, Cache);

    this.init(services, options);

    this.type = 'cache';
    this.debouncedStore = debounce(this.store, 10000);
  }

  _createClass(Cache, [{
    key: 'init',
    value: function init(services) {
      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

      this.services = services;
      this.options = defaults(options, this.options || {}, getDefaults());
    }
  }, {
    key: 'load',
    value: function load(lngs, callback) {
      var _this = this;

      var store = {};
      var nowMS = new Date().getTime();

      if (!window.localStorage || !lngs.length) {
        return callback(null, null);
      }

      var todo = lngs.length;

      lngs.forEach(function (lng) {
        var local = storage.getItem(_this.options.prefix + lng);

        if (local) {
          local = JSON.parse(local);
          if (
          // expiration field is mandatory, and should not be expired
          local.i18nStamp && local.i18nStamp + _this.options.expirationTime > nowMS &&

          // there should be no language version set, or if it is, it should match the one in translation
          _this.options.versions[lng] === local.i18nVersion) {
            delete local.i18nVersion;
            store[lng] = local;
          }
        }

        todo -= 1;
        if (todo === 0) {
          callback(null, store);
        }
      });
      return undefined;
    }
  }, {
    key: 'store',
    value: function store(storeParam) {
      var store = storeParam;
      if (window.localStorage) {
        for (var m in store) {
          // eslint-disable-line
          // timestamp
          store[m].i18nStamp = new Date().getTime();

          // language version (if set)
          if (this.options.versions[m]) {
            store[m].i18nVersion = this.options.versions[m];
          }

          // save
          storage.setItem(this.options.prefix + m, JSON.stringify(store[m]));
        }
      }
    }
  }, {
    key: 'save',
    value: function save(store) {
      this.debouncedStore(store);
    }
  }]);

  return Cache;
}();

Cache.type = 'cache';

return Cache;

})));


/***/ }),
/* 8 */
/***/ (function(module, exports, __webpack_require__) {

(function (global, factory) {
     true ? module.exports = factory() :
    typeof define === 'function' && define.amd ? define('i18nextSprintfPostProcessor', factory) :
    (global.i18nextSprintfPostProcessor = factory());
}(this, function () { 'use strict';

    var babelHelpers = {};
    babelHelpers.typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) {
      return typeof obj;
    } : function (obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol ? "symbol" : typeof obj;
    };
    babelHelpers;

    var re = {
        not_string: /[^s]/,
        number: /[diefg]/,
        json: /[j]/,
        not_json: /[^j]/,
        text: /^[^\x25]+/,
        modulo: /^\x25{2}/,
        placeholder: /^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijosuxX])/,
        key: /^([a-z_][a-z_\d]*)/i,
        key_access: /^\.([a-z_][a-z_\d]*)/i,
        index_access: /^\[(\d+)\]/,
        sign: /^[\+\-]/
    };

    function sprintf() {
        var key = arguments[0],
            cache = sprintf.cache;
        if (!(cache[key] && cache.hasOwnProperty(key))) {
            cache[key] = sprintf.parse(key);
        }
        return sprintf.format.call(null, cache[key], arguments);
    }

    sprintf.format = function (parse_tree, argv) {
        var cursor = 1,
            tree_length = parse_tree.length,
            node_type = "",
            arg,
            output = [],
            i,
            k,
            match,
            pad,
            pad_character,
            pad_length,
            is_positive = true,
            sign = "";
        for (i = 0; i < tree_length; i++) {
            node_type = get_type(parse_tree[i]);
            if (node_type === "string") {
                output[output.length] = parse_tree[i];
            } else if (node_type === "array") {
                match = parse_tree[i]; // convenience purposes only
                if (match[2]) {
                    // keyword argument
                    arg = argv[cursor];
                    for (k = 0; k < match[2].length; k++) {
                        if (!arg.hasOwnProperty(match[2][k])) {
                            throw new Error(sprintf("[sprintf] property '%s' does not exist", match[2][k]));
                        }
                        arg = arg[match[2][k]];
                    }
                } else if (match[1]) {
                    // positional argument (explicit)
                    arg = argv[match[1]];
                } else {
                    // positional argument (implicit)
                    arg = argv[cursor++];
                }

                if (get_type(arg) == "function") {
                    arg = arg();
                }

                if (re.not_string.test(match[8]) && re.not_json.test(match[8]) && get_type(arg) != "number" && isNaN(arg)) {
                    throw new TypeError(sprintf("[sprintf] expecting number but found %s", get_type(arg)));
                }

                if (re.number.test(match[8])) {
                    is_positive = arg >= 0;
                }

                switch (match[8]) {
                    case "b":
                        arg = arg.toString(2);
                        break;
                    case "c":
                        arg = String.fromCharCode(arg);
                        break;
                    case "d":
                    case "i":
                        arg = parseInt(arg, 10);
                        break;
                    case "j":
                        arg = JSON.stringify(arg, null, match[6] ? parseInt(match[6]) : 0);
                        break;
                    case "e":
                        arg = match[7] ? arg.toExponential(match[7]) : arg.toExponential();
                        break;
                    case "f":
                        arg = match[7] ? parseFloat(arg).toFixed(match[7]) : parseFloat(arg);
                        break;
                    case "g":
                        arg = match[7] ? parseFloat(arg).toPrecision(match[7]) : parseFloat(arg);
                        break;
                    case "o":
                        arg = arg.toString(8);
                        break;
                    case "s":
                        arg = (arg = String(arg)) && match[7] ? arg.substring(0, match[7]) : arg;
                        break;
                    case "u":
                        arg = arg >>> 0;
                        break;
                    case "x":
                        arg = arg.toString(16);
                        break;
                    case "X":
                        arg = arg.toString(16).toUpperCase();
                        break;
                }
                if (re.json.test(match[8])) {
                    output[output.length] = arg;
                } else {
                    if (re.number.test(match[8]) && (!is_positive || match[3])) {
                        sign = is_positive ? "+" : "-";
                        arg = arg.toString().replace(re.sign, "");
                    } else {
                        sign = "";
                    }
                    pad_character = match[4] ? match[4] === "0" ? "0" : match[4].charAt(1) : " ";
                    pad_length = match[6] - (sign + arg).length;
                    pad = match[6] ? pad_length > 0 ? str_repeat(pad_character, pad_length) : "" : "";
                    output[output.length] = match[5] ? sign + arg + pad : pad_character === "0" ? sign + pad + arg : pad + sign + arg;
                }
            }
        }
        return output.join("");
    };

    sprintf.cache = {};

    sprintf.parse = function (fmt) {
        var _fmt = fmt,
            match = [],
            parse_tree = [],
            arg_names = 0;
        while (_fmt) {
            if ((match = re.text.exec(_fmt)) !== null) {
                parse_tree[parse_tree.length] = match[0];
            } else if ((match = re.modulo.exec(_fmt)) !== null) {
                parse_tree[parse_tree.length] = "%";
            } else if ((match = re.placeholder.exec(_fmt)) !== null) {
                if (match[2]) {
                    arg_names |= 1;
                    var field_list = [],
                        replacement_field = match[2],
                        field_match = [];
                    if ((field_match = re.key.exec(replacement_field)) !== null) {
                        field_list[field_list.length] = field_match[1];
                        while ((replacement_field = replacement_field.substring(field_match[0].length)) !== "") {
                            if ((field_match = re.key_access.exec(replacement_field)) !== null) {
                                field_list[field_list.length] = field_match[1];
                            } else if ((field_match = re.index_access.exec(replacement_field)) !== null) {
                                field_list[field_list.length] = field_match[1];
                            } else {
                                throw new SyntaxError("[sprintf] failed to parse named argument key");
                            }
                        }
                    } else {
                        throw new SyntaxError("[sprintf] failed to parse named argument key");
                    }
                    match[2] = field_list;
                } else {
                    arg_names |= 2;
                }
                if (arg_names === 3) {
                    throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");
                }
                parse_tree[parse_tree.length] = match;
            } else {
                throw new SyntaxError("[sprintf] unexpected placeholder");
            }
            _fmt = _fmt.substring(match[0].length);
        }
        return parse_tree;
    };

    function vsprintf(fmt, argv, _argv) {
        _argv = (argv || []).slice(0);
        _argv.splice(0, 0, fmt);
        return sprintf.apply(null, _argv);
    }

    /**
     * helpers
     */
    function get_type(variable) {
        return Object.prototype.toString.call(variable).slice(8, -1).toLowerCase();
    }

    function str_repeat(input, multiplier) {
        return Array(multiplier + 1).join(input);
    }

    var index = {
      name: 'sprintf',
      type: 'postProcessor',

      process: function process(value, key, options) {
        if (!options.sprintf) return value;

        if (Object.prototype.toString.apply(options.sprintf) === '[object Array]') {
          return vsprintf(value, options.sprintf);
        } else if (babelHelpers.typeof(options.sprintf) === 'object') {
          return sprintf(value, options.sprintf);
        }

        return value;
      },
      overloadTranslationOptionHandler: function overloadTranslationOptionHandler(args) {
        var values = [];

        for (var i = 1; i < args.length; i++) {
          values.push(args[i]);
        }

        return {
          postProcess: 'sprintf',
          sprintf: values
        };
      }
    };

    return index;

}));

/***/ }),
/* 9 */
/***/ (function(module, exports, __webpack_require__) {

(function (global, factory) {
   true ? module.exports = factory() :
  typeof define === 'function' && define.amd ? define(factory) :
  (global.i18nextBrowserLanguageDetector = factory());
}(this, function () { 'use strict';

  var babelHelpers = {};

  babelHelpers.classCallCheck = function (instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  };

  babelHelpers.createClass = function () {
    function defineProperties(target, props) {
      for (var i = 0; i < props.length; i++) {
        var descriptor = props[i];
        descriptor.enumerable = descriptor.enumerable || false;
        descriptor.configurable = true;
        if ("value" in descriptor) descriptor.writable = true;
        Object.defineProperty(target, descriptor.key, descriptor);
      }
    }

    return function (Constructor, protoProps, staticProps) {
      if (protoProps) defineProperties(Constructor.prototype, protoProps);
      if (staticProps) defineProperties(Constructor, staticProps);
      return Constructor;
    };
  }();

  babelHelpers;

  var arr = [];
  var each = arr.forEach;
  var slice = arr.slice;

  function defaults(obj) {
    each.call(slice.call(arguments, 1), function (source) {
      if (source) {
        for (var prop in source) {
          if (obj[prop] === undefined) obj[prop] = source[prop];
        }
      }
    });
    return obj;
  }

  var cookie = {
    create: function create(name, value, minutes, domain) {
      var expires = void 0;
      if (minutes) {
        var date = new Date();
        date.setTime(date.getTime() + minutes * 60 * 1000);
        expires = '; expires=' + date.toGMTString();
      } else expires = '';
      domain = domain ? 'domain=' + domain + ';' : '';
      document.cookie = name + '=' + value + expires + ';' + domain + 'path=/';
    },

    read: function read(name) {
      var nameEQ = name + '=';
      var ca = document.cookie.split(';');
      for (var i = 0; i < ca.length; i++) {
        var c = ca[i];
        while (c.charAt(0) === ' ') {
          c = c.substring(1, c.length);
        }if (c.indexOf(nameEQ) === 0) return c.substring(nameEQ.length, c.length);
      }
      return null;
    },

    remove: function remove(name) {
      this.create(name, '', -1);
    }
  };

  var cookie$1 = {
    name: 'cookie',

    lookup: function lookup(options) {
      var found = void 0;

      if (options.lookupCookie && typeof document !== 'undefined') {
        var c = cookie.read(options.lookupCookie);
        if (c) found = c;
      }

      return found;
    },
    cacheUserLanguage: function cacheUserLanguage(lng, options) {
      if (options.lookupCookie && typeof document !== 'undefined') {
        cookie.create(options.lookupCookie, lng, options.cookieMinutes, options.cookieDomain);
      }
    }
  };

  var querystring = {
    name: 'querystring',

    lookup: function lookup(options) {
      var found = void 0;

      if (typeof window !== 'undefined') {
        var query = window.location.search.substring(1);
        var params = query.split('&');
        for (var i = 0; i < params.length; i++) {
          var pos = params[i].indexOf('=');
          if (pos > 0) {
            var key = params[i].substring(0, pos);
            if (key === options.lookupQuerystring) {
              found = params[i].substring(pos + 1);
            }
          }
        }
      }

      return found;
    }
  };

  var hasLocalStorageSupport = void 0;
  try {
    hasLocalStorageSupport = window !== 'undefined' && window.localStorage !== null;
    var testKey = 'i18next.translate.boo';
    window.localStorage.setItem(testKey, 'foo');
    window.localStorage.removeItem(testKey);
  } catch (e) {
    hasLocalStorageSupport = false;
  }

  var localStorage = {
    name: 'localStorage',

    lookup: function lookup(options) {
      var found = void 0;

      if (options.lookupLocalStorage && hasLocalStorageSupport) {
        var lng = window.localStorage.getItem(options.lookupLocalStorage);
        if (lng) found = lng;
      }

      return found;
    },
    cacheUserLanguage: function cacheUserLanguage(lng, options) {
      if (options.lookupLocalStorage && hasLocalStorageSupport) {
        window.localStorage.setItem(options.lookupLocalStorage, lng);
      }
    }
  };

  var navigator$1 = {
    name: 'navigator',

    lookup: function lookup(options) {
      var found = [];

      if (typeof navigator !== 'undefined') {
        if (navigator.languages) {
          // chrome only; not an array, so can't use .push.apply instead of iterating
          for (var i = 0; i < navigator.languages.length; i++) {
            found.push(navigator.languages[i]);
          }
        }
        if (navigator.userLanguage) {
          found.push(navigator.userLanguage);
        }
        if (navigator.language) {
          found.push(navigator.language);
        }
      }

      return found.length > 0 ? found : undefined;
    }
  };

  var htmlTag = {
    name: 'htmlTag',

    lookup: function lookup(options) {
      var found = void 0;
      var htmlTag = options.htmlTag || (typeof document !== 'undefined' ? document.documentElement : null);

      if (htmlTag && typeof htmlTag.getAttribute === 'function') {
        found = htmlTag.getAttribute('lang');
      }

      return found;
    }
  };

  function getDefaults() {
    return {
      order: ['querystring', 'cookie', 'localStorage', 'navigator', 'htmlTag'],
      lookupQuerystring: 'lng',
      lookupCookie: 'i18next',
      lookupLocalStorage: 'i18nextLng',

      // cache user language
      caches: ['localStorage'],
      excludeCacheFor: ['cimode']
      //cookieMinutes: 10,
      //cookieDomain: 'myDomain'
    };
  }

  var Browser = function () {
    function Browser(services) {
      var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];
      babelHelpers.classCallCheck(this, Browser);

      this.type = 'languageDetector';
      this.detectors = {};

      this.init(services, options);
    }

    babelHelpers.createClass(Browser, [{
      key: 'init',
      value: function init(services) {
        var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];
        var i18nOptions = arguments.length <= 2 || arguments[2] === undefined ? {} : arguments[2];

        this.services = services;
        this.options = defaults(options, this.options || {}, getDefaults());
        this.i18nOptions = i18nOptions;

        this.addDetector(cookie$1);
        this.addDetector(querystring);
        this.addDetector(localStorage);
        this.addDetector(navigator$1);
        this.addDetector(htmlTag);
      }
    }, {
      key: 'addDetector',
      value: function addDetector(detector) {
        this.detectors[detector.name] = detector;
      }
    }, {
      key: 'detect',
      value: function detect(detectionOrder) {
        var _this = this;

        if (!detectionOrder) detectionOrder = this.options.order;

        var detected = [];
        detectionOrder.forEach(function (detectorName) {
          if (_this.detectors[detectorName]) {
            var lookup = _this.detectors[detectorName].lookup(_this.options);
            if (lookup && typeof lookup === 'string') lookup = [lookup];
            if (lookup) detected = detected.concat(lookup);
          }
        });

        var found = void 0;
        detected.forEach(function (lng) {
          if (found) return;
          var cleanedLng = _this.services.languageUtils.formatLanguageCode(lng);
          if (_this.services.languageUtils.isWhitelisted(cleanedLng)) found = cleanedLng;
        });

        return found || this.i18nOptions.fallbackLng[0];
      }
    }, {
      key: 'cacheUserLanguage',
      value: function cacheUserLanguage(lng, caches) {
        var _this2 = this;

        if (!caches) caches = this.options.caches;
        if (!caches) return;
        if (this.options.excludeCacheFor && this.options.excludeCacheFor.indexOf(lng) > -1) return;
        caches.forEach(function (cacheName) {
          if (_this2.detectors[cacheName]) _this2.detectors[cacheName].cacheUserLanguage(lng, _this2.options);
        });
      }
    }]);
    return Browser;
  }();

  Browser.type = 'languageDetector';

  return Browser;

}));

/***/ })
/******/ ]);
});
/*!
 * cdp.framework.jqm.js 2.1.0
 *
 * Date: 2017-11-06T05:35:57.958Z
 */

(function webpackUniversalModuleDefinition(root, factory) {
    if(typeof exports === 'object' && typeof module === 'object')
        module.exports = factory(require("jquery"), require("cdp.i18n"), require("backbone"));
    else if(typeof define === 'function' && define.amd)
        define("cdp.framework.jqm",["jquery", "cdp.i18n", "backbone"], factory);
    else if(typeof exports === 'object')
        exports["Framework"] = factory(require("jquery"), require("cdp.i18n"), require("backbone"));
    else
        root["CDP"] = root["CDP"] || {}, root["CDP"]["Framework"] = factory(root["jQuery"], root["CDP"], root["Backbone"]);
})(this, function(__WEBPACK_EXTERNAL_MODULE_0__, __WEBPACK_EXTERNAL_MODULE_3__, __WEBPACK_EXTERNAL_MODULE_4__) {
return /******/ (function(modules) { // webpackBootstrap
/******/     // The module cache
/******/     var installedModules = {};
/******/
/******/     // The require function
/******/     function __webpack_require__(moduleId) {
/******/
/******/         // Check if module is in cache
/******/         if(installedModules[moduleId]) {
/******/             return installedModules[moduleId].exports;
/******/         }
/******/         // Create a new module (and put it into the cache)
/******/         var module = installedModules[moduleId] = {
/******/             i: moduleId,
/******/             l: false,
/******/             exports: {}
/******/         };
/******/
/******/         // Execute the module function
/******/         modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/         // Flag the module as loaded
/******/         module.l = true;
/******/
/******/         // Return the exports of the module
/******/         return module.exports;
/******/     }
/******/
/******/
/******/     // expose the modules object (__webpack_modules__)
/******/     __webpack_require__.m = modules;
/******/
/******/     // expose the module cache
/******/     __webpack_require__.c = installedModules;
/******/
/******/     // define getter function for harmony exports
/******/     __webpack_require__.d = function(exports, name, getter) {
/******/         if(!__webpack_require__.o(exports, name)) {
/******/             Object.defineProperty(exports, name, {
/******/                 configurable: false,
/******/                 enumerable: true,
/******/                 get: getter
/******/             });
/******/         }
/******/     };
/******/
/******/     // getDefaultExport function for compatibility with non-harmony modules
/******/     __webpack_require__.n = function(module) {
/******/         var getter = module && module.__esModule ?
/******/             function getDefault() { return module['default']; } :
/******/             function getModuleExports() { return module; };
/******/         __webpack_require__.d(getter, 'a', getter);
/******/         return getter;
/******/     };
/******/
/******/     // Object.prototype.hasOwnProperty.call
/******/     __webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/     // __webpack_public_path__
/******/     __webpack_require__.p = "";
/******/
/******/     // Load entry module and return exports
/******/     return __webpack_require__(__webpack_require__.s = 2);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, exports) {

module.exports = __WEBPACK_EXTERNAL_MODULE_0__;

/***/ }),
/* 1 */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/*** IMPORTS FROM imports-loader ***/
(function() {

/*!
* jQuery Mobile 1.4.5
* Git HEAD hash: 68e55e78b292634d3991c795f06f5e37a512decc <> Date: Fri Oct 31 2014 17:33:30 UTC
* http://jquerymobile.com
*
* Copyright 2010, 2014 jQuery Foundation, Inc. and othercontributors
* Released under the MIT license.
* http://jquery.org/license
*
*/


(function ( root, doc, factory ) {
    if ( true ) {
        // AMD. Register as an anonymous module.
        !(__WEBPACK_AMD_DEFINE_ARRAY__ = [ __webpack_require__(0) ], __WEBPACK_AMD_DEFINE_RESULT__ = function ( $ ) {
            factory( $, root, doc );
            return $.mobile;
        }.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
                __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));
    } else {
        // Browser globals
        factory( root.jQuery, root, doc );
    }
}( this, document, function ( jQuery, window, document, undefined ) {
(function( $ ) {
    $.mobile = {};
}( jQuery ));

/*!
 * jQuery UI Core c0ab71056b936627e8a7821f03c044aec6280a40
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/category/ui-core/
 */
(function( $, undefined ) {

var uuid = 0,
    runiqueId = /^ui-id-\d+$/;

// $.ui might exist from components with no dependencies, e.g., $.ui.position
$.ui = $.ui || {};

$.extend( $.ui, {
    version: "c0ab71056b936627e8a7821f03c044aec6280a40",

    keyCode: {
        BACKSPACE: 8,
        COMMA: 188,
        DELETE: 46,
        DOWN: 40,
        END: 35,
        ENTER: 13,
        ESCAPE: 27,
        HOME: 36,
        LEFT: 37,
        PAGE_DOWN: 34,
        PAGE_UP: 33,
        PERIOD: 190,
        RIGHT: 39,
        SPACE: 32,
        TAB: 9,
        UP: 38
    }
});

// plugins
$.fn.extend({
    focus: (function( orig ) {
        return function( delay, fn ) {
            return typeof delay === "number" ?
                this.each(function() {
                    var elem = this;
                    setTimeout(function() {
                        $( elem ).focus();
                        if ( fn ) {
                            fn.call( elem );
                        }
                    }, delay );
                }) :
                orig.apply( this, arguments );
        };
    })( $.fn.focus ),

    scrollParent: function() {
        var scrollParent;
        if (($.ui.ie && (/(static|relative)/).test(this.css("position"))) || (/absolute/).test(this.css("position"))) {
            scrollParent = this.parents().filter(function() {
                return (/(relative|absolute|fixed)/).test($.css(this,"position")) && (/(auto|scroll)/).test($.css(this,"overflow")+$.css(this,"overflow-y")+$.css(this,"overflow-x"));
            }).eq(0);
        } else {
            scrollParent = this.parents().filter(function() {
                return (/(auto|scroll)/).test($.css(this,"overflow")+$.css(this,"overflow-y")+$.css(this,"overflow-x"));
            }).eq(0);
        }

        return ( /fixed/ ).test( this.css( "position") ) || !scrollParent.length ? $( this[ 0 ].ownerDocument || document ) : scrollParent;
    },

    uniqueId: function() {
        return this.each(function() {
            if ( !this.id ) {
                this.id = "ui-id-" + (++uuid);
            }
        });
    },

    removeUniqueId: function() {
        return this.each(function() {
            if ( runiqueId.test( this.id ) ) {
                $( this ).removeAttr( "id" );
            }
        });
    }
});

// selectors
function focusable( element, isTabIndexNotNaN ) {
    var map, mapName, img,
        nodeName = element.nodeName.toLowerCase();
    if ( "area" === nodeName ) {
        map = element.parentNode;
        mapName = map.name;
        if ( !element.href || !mapName || map.nodeName.toLowerCase() !== "map" ) {
            return false;
        }
        img = $( "img[usemap=#" + mapName + "]" )[0];
        return !!img && visible( img );
    }
    return ( /input|select|textarea|button|object/.test( nodeName ) ?
        !element.disabled :
        "a" === nodeName ?
            element.href || isTabIndexNotNaN :
            isTabIndexNotNaN) &&
        // the element and all of its ancestors must be visible
        visible( element );
}

function visible( element ) {
    return $.expr.filters.visible( element ) &&
        !$( element ).parents().addBack().filter(function() {
            return $.css( this, "visibility" ) === "hidden";
        }).length;
}

$.extend( $.expr[ ":" ], {
    data: $.expr.createPseudo ?
        $.expr.createPseudo(function( dataName ) {
            return function( elem ) {
                return !!$.data( elem, dataName );
            };
        }) :
        // support: jQuery <1.8
        function( elem, i, match ) {
            return !!$.data( elem, match[ 3 ] );
        },

    focusable: function( element ) {
        return focusable( element, !isNaN( $.attr( element, "tabindex" ) ) );
    },

    tabbable: function( element ) {
        var tabIndex = $.attr( element, "tabindex" ),
            isTabIndexNaN = isNaN( tabIndex );
        return ( isTabIndexNaN || tabIndex >= 0 ) && focusable( element, !isTabIndexNaN );
    }
});

// support: jQuery <1.8
if ( !$( "<a>" ).outerWidth( 1 ).jquery ) {
    $.each( [ "Width", "Height" ], function( i, name ) {
        var side = name === "Width" ? [ "Left", "Right" ] : [ "Top", "Bottom" ],
            type = name.toLowerCase(),
            orig = {
                innerWidth: $.fn.innerWidth,
                innerHeight: $.fn.innerHeight,
                outerWidth: $.fn.outerWidth,
                outerHeight: $.fn.outerHeight
            };

        function reduce( elem, size, border, margin ) {
            $.each( side, function() {
                size -= parseFloat( $.css( elem, "padding" + this ) ) || 0;
                if ( border ) {
                    size -= parseFloat( $.css( elem, "border" + this + "Width" ) ) || 0;
                }
                if ( margin ) {
                    size -= parseFloat( $.css( elem, "margin" + this ) ) || 0;
                }
            });
            return size;
        }

        $.fn[ "inner" + name ] = function( size ) {
            if ( size === undefined ) {
                return orig[ "inner" + name ].call( this );
            }

            return this.each(function() {
                $( this ).css( type, reduce( this, size ) + "px" );
            });
        };

        $.fn[ "outer" + name] = function( size, margin ) {
            if ( typeof size !== "number" ) {
                return orig[ "outer" + name ].call( this, size );
            }

            return this.each(function() {
                $( this).css( type, reduce( this, size, true, margin ) + "px" );
            });
        };
    });
}

// support: jQuery <1.8
if ( !$.fn.addBack ) {
    $.fn.addBack = function( selector ) {
        return this.add( selector == null ?
            this.prevObject : this.prevObject.filter( selector )
        );
    };
}

// support: jQuery 1.6.1, 1.6.2 (http://bugs.jquery.com/ticket/9413)
if ( $( "<a>" ).data( "a-b", "a" ).removeData( "a-b" ).data( "a-b" ) ) {
    $.fn.removeData = (function( removeData ) {
        return function( key ) {
            if ( arguments.length ) {
                return removeData.call( this, $.camelCase( key ) );
            } else {
                return removeData.call( this );
            }
        };
    })( $.fn.removeData );
}





// deprecated
$.ui.ie = !!/msie [\w.]+/.exec( navigator.userAgent.toLowerCase() );

$.support.selectstart = "onselectstart" in document.createElement( "div" );
$.fn.extend({
    disableSelection: function() {
        return this.bind( ( $.support.selectstart ? "selectstart" : "mousedown" ) +
            ".ui-disableSelection", function( event ) {
                event.preventDefault();
            });
    },

    enableSelection: function() {
        return this.unbind( ".ui-disableSelection" );
    },

    zIndex: function( zIndex ) {
        if ( zIndex !== undefined ) {
            return this.css( "zIndex", zIndex );
        }

        if ( this.length ) {
            var elem = $( this[ 0 ] ), position, value;
            while ( elem.length && elem[ 0 ] !== document ) {
                // Ignore z-index if position is set to a value where z-index is ignored by the browser
                // This makes behavior of this function consistent across browsers
                // WebKit always returns auto if the element is positioned
                position = elem.css( "position" );
                if ( position === "absolute" || position === "relative" || position === "fixed" ) {
                    // IE returns 0 when zIndex is not specified
                    // other browsers return a string
                    // we ignore the case of nested elements with an explicit value of 0
                    // <div style="z-index: -10;"><div style="z-index: 0;"></div></div>
                    value = parseInt( elem.css( "zIndex" ), 10 );
                    if ( !isNaN( value ) && value !== 0 ) {
                        return value;
                    }
                }
                elem = elem.parent();
            }
        }

        return 0;
    }
});

// $.ui.plugin is deprecated. Use $.widget() extensions instead.
$.ui.plugin = {
    add: function( module, option, set ) {
        var i,
            proto = $.ui[ module ].prototype;
        for ( i in set ) {
            proto.plugins[ i ] = proto.plugins[ i ] || [];
            proto.plugins[ i ].push( [ option, set[ i ] ] );
        }
    },
    call: function( instance, name, args, allowDisconnected ) {
        var i,
            set = instance.plugins[ name ];

        if ( !set ) {
            return;
        }

        if ( !allowDisconnected && ( !instance.element[ 0 ].parentNode || instance.element[ 0 ].parentNode.nodeType === 11 ) ) {
            return;
        }

        for ( i = 0; i < set.length; i++ ) {
            if ( instance.options[ set[ i ][ 0 ] ] ) {
                set[ i ][ 1 ].apply( instance.element, args );
            }
        }
    }
};

})( jQuery );

(function( $, window, undefined ) {

    // Subtract the height of external toolbars from the page height, if the page does not have
    // internal toolbars of the same type. We take care to use the widget options if we find a
    // widget instance and the element's data-attributes otherwise.
    var compensateToolbars = function( page, desiredHeight ) {
        var pageParent = page.parent(),
            toolbarsAffectingHeight = [],

            // We use this function to filter fixed toolbars with option updatePagePadding set to
            // true (which is the default) from our height subtraction, because fixed toolbars with
            // option updatePagePadding set to true compensate for their presence by adding padding
            // to the active page. We want to avoid double-counting by also subtracting their
            // height from the desired page height.
            noPadders = function() {
                var theElement = $( this ),
                    widgetOptions = $.mobile.toolbar && theElement.data( "mobile-toolbar" ) ?
                        theElement.toolbar( "option" ) : {
                            position: theElement.attr( "data-" + $.mobile.ns + "position" ),
                            updatePagePadding: ( theElement.attr( "data-" + $.mobile.ns +
                                "update-page-padding" ) !== false )
                        };

                return !( widgetOptions.position === "fixed" &&
                    widgetOptions.updatePagePadding === true );
            },
            externalHeaders = pageParent.children( ":jqmData(role='header')" ).filter( noPadders ),
            internalHeaders = page.children( ":jqmData(role='header')" ),
            externalFooters = pageParent.children( ":jqmData(role='footer')" ).filter( noPadders ),
            internalFooters = page.children( ":jqmData(role='footer')" );

        // If we have no internal headers, but we do have external headers, then their height
        // reduces the page height
        if ( internalHeaders.length === 0 && externalHeaders.length > 0 ) {
            toolbarsAffectingHeight = toolbarsAffectingHeight.concat( externalHeaders.toArray() );
        }

        // If we have no internal footers, but we do have external footers, then their height
        // reduces the page height
        if ( internalFooters.length === 0 && externalFooters.length > 0 ) {
            toolbarsAffectingHeight = toolbarsAffectingHeight.concat( externalFooters.toArray() );
        }

        $.each( toolbarsAffectingHeight, function( index, value ) {
            desiredHeight -= $( value ).outerHeight();
        });

        // Height must be at least zero
        return Math.max( 0, desiredHeight );
    };

    $.extend( $.mobile, {
        // define the window and the document objects
        window: $( window ),
        document: $( document ),

        // TODO: Remove and use $.ui.keyCode directly
        keyCode: $.ui.keyCode,

        // Place to store various widget extensions
        behaviors: {},

        // Scroll page vertically: scroll to 0 to hide iOS address bar, or pass a Y value
        silentScroll: function( ypos ) {
            if ( $.type( ypos ) !== "number" ) {
                ypos = $.mobile.defaultHomeScroll;
            }

            // prevent scrollstart and scrollstop events
            $.event.special.scrollstart.enabled = false;

            setTimeout(function() {
                window.scrollTo( 0, ypos );
                $.mobile.document.trigger( "silentscroll", { x: 0, y: ypos });
            }, 20 );

            setTimeout(function() {
                $.event.special.scrollstart.enabled = true;
            }, 150 );
        },

        getClosestBaseUrl: function( ele )    {
            // Find the closest page and extract out its url.
            var url = $( ele ).closest( ".ui-page" ).jqmData( "url" ),
                base = $.mobile.path.documentBase.hrefNoHash;

            if ( !$.mobile.dynamicBaseEnabled || !url || !$.mobile.path.isPath( url ) ) {
                url = base;
            }

            return $.mobile.path.makeUrlAbsolute( url, base );
        },
        removeActiveLinkClass: function( forceRemoval ) {
            if ( !!$.mobile.activeClickedLink &&
                ( !$.mobile.activeClickedLink.closest( "." + $.mobile.activePageClass ).length ||
                    forceRemoval ) ) {

                $.mobile.activeClickedLink.removeClass( $.mobile.activeBtnClass );
            }
            $.mobile.activeClickedLink = null;
        },

        // DEPRECATED in 1.4
        // Find the closest parent with a theme class on it. Note that
        // we are not using $.fn.closest() on purpose here because this
        // method gets called quite a bit and we need it to be as fast
        // as possible.
        getInheritedTheme: function( el, defaultTheme ) {
            var e = el[ 0 ],
                ltr = "",
                re = /ui-(bar|body|overlay)-([a-z])\b/,
                c, m;
            while ( e ) {
                c = e.className || "";
                if ( c && ( m = re.exec( c ) ) && ( ltr = m[ 2 ] ) ) {
                    // We found a parent with a theme class
                    // on it so bail from this loop.
                    break;
                }

                e = e.parentNode;
            }
            // Return the theme letter we found, if none, return the
            // specified default.
            return ltr || defaultTheme || "a";
        },

        enhanceable: function( elements ) {
            return this.haveParents( elements, "enhance" );
        },

        hijackable: function( elements ) {
            return this.haveParents( elements, "ajax" );
        },

        haveParents: function( elements, attr ) {
            if ( !$.mobile.ignoreContentEnabled ) {
                return elements;
            }

            var count = elements.length,
                $newSet = $(),
                e, $element, excluded,
                i, c;

            for ( i = 0; i < count; i++ ) {
                $element = elements.eq( i );
                excluded = false;
                e = elements[ i ];

                while ( e ) {
                    c = e.getAttribute ? e.getAttribute( "data-" + $.mobile.ns + attr ) : "";

                    if ( c === "false" ) {
                        excluded = true;
                        break;
                    }

                    e = e.parentNode;
                }

                if ( !excluded ) {
                    $newSet = $newSet.add( $element );
                }
            }

            return $newSet;
        },

        getScreenHeight: function() {
            // Native innerHeight returns more accurate value for this across platforms,
            // jQuery version is here as a normalized fallback for platforms like Symbian
            return window.innerHeight || $.mobile.window.height();
        },

        //simply set the active page's minimum height to screen height, depending on orientation
        resetActivePageHeight: function( height ) {
            var page = $( "." + $.mobile.activePageClass ),
                pageHeight = page.height(),
                pageOuterHeight = page.outerHeight( true );

            height = compensateToolbars( page,
                ( typeof height === "number" ) ? height : $.mobile.getScreenHeight() );

            // Remove any previous min-height setting
            page.css( "min-height", "" );

            // Set the minimum height only if the height as determined by CSS is insufficient
            if ( page.height() < height ) {
                page.css( "min-height", height - ( pageOuterHeight - pageHeight ) );
            }
        },

        loading: function() {
            // If this is the first call to this function, instantiate a loader widget
            var loader = this.loading._widget || $( $.mobile.loader.prototype.defaultHtml ).loader(),

                // Call the appropriate method on the loader
                returnValue = loader.loader.apply( loader, arguments );

            // Make sure the loader is retained for future calls to this function.
            this.loading._widget = loader;

            return returnValue;
        }
    });

    $.addDependents = function( elem, newDependents ) {
        var $elem = $( elem ),
            dependents = $elem.jqmData( "dependents" ) || $();

        $elem.jqmData( "dependents", $( dependents ).add( newDependents ) );
    };

    // plugins
    $.fn.extend({
        removeWithDependents: function() {
            $.removeWithDependents( this );
        },

        // Enhance child elements
        enhanceWithin: function() {
            var index,
                widgetElements = {},
                keepNative = $.mobile.page.prototype.keepNativeSelector(),
                that = this;

            // Add no js class to elements
            if ( $.mobile.nojs ) {
                $.mobile.nojs( this );
            }

            // Bind links for ajax nav
            if ( $.mobile.links ) {
                $.mobile.links( this );
            }

            // Degrade inputs for styleing
            if ( $.mobile.degradeInputsWithin ) {
                $.mobile.degradeInputsWithin( this );
            }

            // Run buttonmarkup
            if ( $.fn.buttonMarkup ) {
                this.find( $.fn.buttonMarkup.initSelector ).not( keepNative )
                .jqmEnhanceable().buttonMarkup();
            }

            // Add classes for fieldContain
            if ( $.fn.fieldcontain ) {
                this.find( ":jqmData(role='fieldcontain')" ).not( keepNative )
                .jqmEnhanceable().fieldcontain();
            }

            // Enhance widgets
            $.each( $.mobile.widgets, function( name, constructor ) {

                // If initSelector not false find elements
                if ( constructor.initSelector ) {

                    // Filter elements that should not be enhanced based on parents
                    var elements = $.mobile.enhanceable( that.find( constructor.initSelector ) );

                    // If any matching elements remain filter ones with keepNativeSelector
                    if ( elements.length > 0 ) {

                        // $.mobile.page.prototype.keepNativeSelector is deprecated this is just for backcompat
                        // Switch to $.mobile.keepNative in 1.5 which is just a value not a function
                        elements = elements.not( keepNative );
                    }

                    // Enhance whatever is left
                    if ( elements.length > 0 ) {
                        widgetElements[ constructor.prototype.widgetName ] = elements;
                    }
                }
            });

            for ( index in widgetElements ) {
                widgetElements[ index ][ index ]();
            }

            return this;
        },

        addDependents: function( newDependents ) {
            $.addDependents( this, newDependents );
        },

        // note that this helper doesn't attempt to handle the callback
        // or setting of an html element's text, its only purpose is
        // to return the html encoded version of the text in all cases. (thus the name)
        getEncodedText: function() {
            return $( "<a>" ).text( this.text() ).html();
        },

        // fluent helper function for the mobile namespaced equivalent
        jqmEnhanceable: function() {
            return $.mobile.enhanceable( this );
        },

        jqmHijackable: function() {
            return $.mobile.hijackable( this );
        }
    });

    $.removeWithDependents = function( nativeElement ) {
        var element = $( nativeElement );

        ( element.jqmData( "dependents" ) || $() ).remove();
        element.remove();
    };
    $.addDependents = function( nativeElement, newDependents ) {
        var element = $( nativeElement ),
            dependents = element.jqmData( "dependents" ) || $();

        element.jqmData( "dependents", $( dependents ).add( newDependents ) );
    };

    $.find.matches = function( expr, set ) {
        return $.find( expr, null, null, set );
    };

    $.find.matchesSelector = function( node, expr ) {
        return $.find( expr, null, null, [ node ] ).length > 0;
    };

})( jQuery, this );

(function( $, window, undefined ) {
    $.extend( $.mobile, {

        // Version of the jQuery Mobile Framework
        version: "1.4.5",

        // Deprecated and no longer used in 1.4 remove in 1.5
        // Define the url parameter used for referencing widget-generated sub-pages.
        // Translates to example.html&ui-page=subpageIdentifier
        // hash segment before &ui-page= is used to make Ajax request
        subPageUrlKey: "ui-page",

        hideUrlBar: true,

        // Keepnative Selector
        keepNative: ":jqmData(role='none'), :jqmData(role='nojs')",

        // Deprecated in 1.4 remove in 1.5
        // Class assigned to page currently in view, and during transitions
        activePageClass: "ui-page-active",

        // Deprecated in 1.4 remove in 1.5
        // Class used for "active" button state, from CSS framework
        activeBtnClass: "ui-btn-active",

        // Deprecated in 1.4 remove in 1.5
        // Class used for "focus" form element state, from CSS framework
        focusClass: "ui-focus",

        // Automatically handle clicks and form submissions through Ajax, when same-domain
        ajaxEnabled: true,

        // Automatically load and show pages based on location.hash
        hashListeningEnabled: true,

        // disable to prevent jquery from bothering with links
        linkBindingEnabled: true,

        // Set default page transition - 'none' for no transitions
        defaultPageTransition: "fade",

        // Set maximum window width for transitions to apply - 'false' for no limit
        maxTransitionWidth: false,

        // Minimum scroll distance that will be remembered when returning to a page
        // Deprecated remove in 1.5
        minScrollBack: 0,

        // Set default dialog transition - 'none' for no transitions
        defaultDialogTransition: "pop",

        // Error response message - appears when an Ajax page request fails
        pageLoadErrorMessage: "Error Loading Page",

        // For error messages, which theme does the box use?
        pageLoadErrorMessageTheme: "a",

        // replace calls to window.history.back with phonegaps navigation helper
        // where it is provided on the window object
        phonegapNavigationEnabled: false,

        //automatically initialize the DOM when it's ready
        autoInitializePage: true,

        pushStateEnabled: true,

        // allows users to opt in to ignoring content by marking a parent element as
        // data-ignored
        ignoreContentEnabled: false,

        buttonMarkup: {
            hoverDelay: 200
        },

        // disable the alteration of the dynamic base tag or links in the case
        // that a dynamic base tag isn't supported
        dynamicBaseEnabled: true,

        // default the property to remove dependency on assignment in init module
        pageContainer: $(),

        //enable cross-domain page support
        allowCrossDomainPages: false,

        dialogHashKey: "&ui-state=dialog"
    });
})( jQuery, this );

/*!
 * jQuery UI Widget c0ab71056b936627e8a7821f03c044aec6280a40
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/jQuery.widget/
 */
(function( $, undefined ) {

var uuid = 0,
    slice = Array.prototype.slice,
    _cleanData = $.cleanData;
$.cleanData = function( elems ) {
    for ( var i = 0, elem; (elem = elems[i]) != null; i++ ) {
        try {
            $( elem ).triggerHandler( "remove" );
        // http://bugs.jquery.com/ticket/8235
        } catch( e ) {}
    }
    _cleanData( elems );
};

$.widget = function( name, base, prototype ) {
    var fullName, existingConstructor, constructor, basePrototype,
        // proxiedPrototype allows the provided prototype to remain unmodified
        // so that it can be used as a mixin for multiple widgets (#8876)
        proxiedPrototype = {},
        namespace = name.split( "." )[ 0 ];

    name = name.split( "." )[ 1 ];
    fullName = namespace + "-" + name;

    if ( !prototype ) {
        prototype = base;
        base = $.Widget;
    }

    // create selector for plugin
    $.expr[ ":" ][ fullName.toLowerCase() ] = function( elem ) {
        return !!$.data( elem, fullName );
    };

    $[ namespace ] = $[ namespace ] || {};
    existingConstructor = $[ namespace ][ name ];
    constructor = $[ namespace ][ name ] = function( options, element ) {
        // allow instantiation without "new" keyword
        if ( !this._createWidget ) {
            return new constructor( options, element );
        }

        // allow instantiation without initializing for simple inheritance
        // must use "new" keyword (the code above always passes args)
        if ( arguments.length ) {
            this._createWidget( options, element );
        }
    };
    // extend with the existing constructor to carry over any static properties
    $.extend( constructor, existingConstructor, {
        version: prototype.version,
        // copy the object used to create the prototype in case we need to
        // redefine the widget later
        _proto: $.extend( {}, prototype ),
        // track widgets that inherit from this widget in case this widget is
        // redefined after a widget inherits from it
        _childConstructors: []
    });

    basePrototype = new base();
    // we need to make the options hash a property directly on the new instance
    // otherwise we'll modify the options hash on the prototype that we're
    // inheriting from
    basePrototype.options = $.widget.extend( {}, basePrototype.options );
    $.each( prototype, function( prop, value ) {
        if ( !$.isFunction( value ) ) {
            proxiedPrototype[ prop ] = value;
            return;
        }
        proxiedPrototype[ prop ] = (function() {
            var _super = function() {
                    return base.prototype[ prop ].apply( this, arguments );
                },
                _superApply = function( args ) {
                    return base.prototype[ prop ].apply( this, args );
                };
            return function() {
                var __super = this._super,
                    __superApply = this._superApply,
                    returnValue;

                this._super = _super;
                this._superApply = _superApply;

                returnValue = value.apply( this, arguments );

                this._super = __super;
                this._superApply = __superApply;

                return returnValue;
            };
        })();
    });
    constructor.prototype = $.widget.extend( basePrototype, {
        // TODO: remove support for widgetEventPrefix
        // always use the name + a colon as the prefix, e.g., draggable:start
        // don't prefix for widgets that aren't DOM-based
        widgetEventPrefix: existingConstructor ? (basePrototype.widgetEventPrefix || name) : name
    }, proxiedPrototype, {
        constructor: constructor,
        namespace: namespace,
        widgetName: name,
        widgetFullName: fullName
    });

    // If this widget is being redefined then we need to find all widgets that
    // are inheriting from it and redefine all of them so that they inherit from
    // the new version of this widget. We're essentially trying to replace one
    // level in the prototype chain.
    if ( existingConstructor ) {
        $.each( existingConstructor._childConstructors, function( i, child ) {
            var childPrototype = child.prototype;

            // redefine the child widget using the same prototype that was
            // originally used, but inherit from the new version of the base
            $.widget( childPrototype.namespace + "." + childPrototype.widgetName, constructor, child._proto );
        });
        // remove the list of existing child constructors from the old constructor
        // so the old child constructors can be garbage collected
        delete existingConstructor._childConstructors;
    } else {
        base._childConstructors.push( constructor );
    }

    $.widget.bridge( name, constructor );

    return constructor;
};

$.widget.extend = function( target ) {
    var input = slice.call( arguments, 1 ),
        inputIndex = 0,
        inputLength = input.length,
        key,
        value;
    for ( ; inputIndex < inputLength; inputIndex++ ) {
        for ( key in input[ inputIndex ] ) {
            value = input[ inputIndex ][ key ];
            if ( input[ inputIndex ].hasOwnProperty( key ) && value !== undefined ) {
                // Clone objects
                if ( $.isPlainObject( value ) ) {
                    target[ key ] = $.isPlainObject( target[ key ] ) ?
                        $.widget.extend( {}, target[ key ], value ) :
                        // Don't extend strings, arrays, etc. with objects
                        $.widget.extend( {}, value );
                // Copy everything else by reference
                } else {
                    target[ key ] = value;
                }
            }
        }
    }
    return target;
};

$.widget.bridge = function( name, object ) {
    var fullName = object.prototype.widgetFullName || name;
    $.fn[ name ] = function( options ) {
        var isMethodCall = typeof options === "string",
            args = slice.call( arguments, 1 ),
            returnValue = this;

        // allow multiple hashes to be passed on init
        options = !isMethodCall && args.length ?
            $.widget.extend.apply( null, [ options ].concat(args) ) :
            options;

        if ( isMethodCall ) {
            this.each(function() {
                var methodValue,
                    instance = $.data( this, fullName );
                if ( options === "instance" ) {
                    returnValue = instance;
                    return false;
                }
                if ( !instance ) {
                    return $.error( "cannot call methods on " + name + " prior to initialization; " +
                        "attempted to call method '" + options + "'" );
                }
                if ( !$.isFunction( instance[options] ) || options.charAt( 0 ) === "_" ) {
                    return $.error( "no such method '" + options + "' for " + name + " widget instance" );
                }
                methodValue = instance[ options ].apply( instance, args );
                if ( methodValue !== instance && methodValue !== undefined ) {
                    returnValue = methodValue && methodValue.jquery ?
                        returnValue.pushStack( methodValue.get() ) :
                        methodValue;
                    return false;
                }
            });
        } else {
            this.each(function() {
                var instance = $.data( this, fullName );
                if ( instance ) {
                    instance.option( options || {} )._init();
                } else {
                    $.data( this, fullName, new object( options, this ) );
                }
            });
        }

        return returnValue;
    };
};

$.Widget = function( /* options, element */ ) {};
$.Widget._childConstructors = [];

$.Widget.prototype = {
    widgetName: "widget",
    widgetEventPrefix: "",
    defaultElement: "<div>",
    options: {
        disabled: false,

        // callbacks
        create: null
    },
    _createWidget: function( options, element ) {
        element = $( element || this.defaultElement || this )[ 0 ];
        this.element = $( element );
        this.uuid = uuid++;
        this.eventNamespace = "." + this.widgetName + this.uuid;
        this.options = $.widget.extend( {},
            this.options,
            this._getCreateOptions(),
            options );

        this.bindings = $();
        this.hoverable = $();
        this.focusable = $();

        if ( element !== this ) {
            $.data( element, this.widgetFullName, this );
            this._on( true, this.element, {
                remove: function( event ) {
                    if ( event.target === element ) {
                        this.destroy();
                    }
                }
            });
            this.document = $( element.style ?
                // element within the document
                element.ownerDocument :
                // element is window or document
                element.document || element );
            this.window = $( this.document[0].defaultView || this.document[0].parentWindow );
        }

        this._create();
        this._trigger( "create", null, this._getCreateEventData() );
        this._init();
    },
    _getCreateOptions: $.noop,
    _getCreateEventData: $.noop,
    _create: $.noop,
    _init: $.noop,

    destroy: function() {
        this._destroy();
        // we can probably remove the unbind calls in 2.0
        // all event bindings should go through this._on()
        this.element
            .unbind( this.eventNamespace )
            .removeData( this.widgetFullName )
            // support: jquery <1.6.3
            // http://bugs.jquery.com/ticket/9413
            .removeData( $.camelCase( this.widgetFullName ) );
        this.widget()
            .unbind( this.eventNamespace )
            .removeAttr( "aria-disabled" )
            .removeClass(
                this.widgetFullName + "-disabled " +
                "ui-state-disabled" );

        // clean up events and states
        this.bindings.unbind( this.eventNamespace );
        this.hoverable.removeClass( "ui-state-hover" );
        this.focusable.removeClass( "ui-state-focus" );
    },
    _destroy: $.noop,

    widget: function() {
        return this.element;
    },

    option: function( key, value ) {
        var options = key,
            parts,
            curOption,
            i;

        if ( arguments.length === 0 ) {
            // don't return a reference to the internal hash
            return $.widget.extend( {}, this.options );
        }

        if ( typeof key === "string" ) {
            // handle nested keys, e.g., "foo.bar" => { foo: { bar: ___ } }
            options = {};
            parts = key.split( "." );
            key = parts.shift();
            if ( parts.length ) {
                curOption = options[ key ] = $.widget.extend( {}, this.options[ key ] );
                for ( i = 0; i < parts.length - 1; i++ ) {
                    curOption[ parts[ i ] ] = curOption[ parts[ i ] ] || {};
                    curOption = curOption[ parts[ i ] ];
                }
                key = parts.pop();
                if ( value === undefined ) {
                    return curOption[ key ] === undefined ? null : curOption[ key ];
                }
                curOption[ key ] = value;
            } else {
                if ( value === undefined ) {
                    return this.options[ key ] === undefined ? null : this.options[ key ];
                }
                options[ key ] = value;
            }
        }

        this._setOptions( options );

        return this;
    },
    _setOptions: function( options ) {
        var key;

        for ( key in options ) {
            this._setOption( key, options[ key ] );
        }

        return this;
    },
    _setOption: function( key, value ) {
        this.options[ key ] = value;

        if ( key === "disabled" ) {
            this.widget()
                .toggleClass( this.widgetFullName + "-disabled", !!value );
            this.hoverable.removeClass( "ui-state-hover" );
            this.focusable.removeClass( "ui-state-focus" );
        }

        return this;
    },

    enable: function() {
        return this._setOptions({ disabled: false });
    },
    disable: function() {
        return this._setOptions({ disabled: true });
    },

    _on: function( suppressDisabledCheck, element, handlers ) {
        var delegateElement,
            instance = this;

        // no suppressDisabledCheck flag, shuffle arguments
        if ( typeof suppressDisabledCheck !== "boolean" ) {
            handlers = element;
            element = suppressDisabledCheck;
            suppressDisabledCheck = false;
        }

        // no element argument, shuffle and use this.element
        if ( !handlers ) {
            handlers = element;
            element = this.element;
            delegateElement = this.widget();
        } else {
            // accept selectors, DOM elements
            element = delegateElement = $( element );
            this.bindings = this.bindings.add( element );
        }

        $.each( handlers, function( event, handler ) {
            function handlerProxy() {
                // allow widgets to customize the disabled handling
                // - disabled as an array instead of boolean
                // - disabled class as method for disabling individual parts
                if ( !suppressDisabledCheck &&
                        ( instance.options.disabled === true ||
                            $( this ).hasClass( "ui-state-disabled" ) ) ) {
                    return;
                }
                return ( typeof handler === "string" ? instance[ handler ] : handler )
                    .apply( instance, arguments );
            }

            // copy the guid so direct unbinding works
            if ( typeof handler !== "string" ) {
                handlerProxy.guid = handler.guid =
                    handler.guid || handlerProxy.guid || $.guid++;
            }

            var match = event.match( /^(\w+)\s*(.*)$/ ),
                eventName = match[1] + instance.eventNamespace,
                selector = match[2];
            if ( selector ) {
                delegateElement.delegate( selector, eventName, handlerProxy );
            } else {
                element.bind( eventName, handlerProxy );
            }
        });
    },

    _off: function( element, eventName ) {
        eventName = (eventName || "").split( " " ).join( this.eventNamespace + " " ) + this.eventNamespace;
        element.unbind( eventName ).undelegate( eventName );
    },

    _delay: function( handler, delay ) {
        function handlerProxy() {
            return ( typeof handler === "string" ? instance[ handler ] : handler )
                .apply( instance, arguments );
        }
        var instance = this;
        return setTimeout( handlerProxy, delay || 0 );
    },

    _hoverable: function( element ) {
        this.hoverable = this.hoverable.add( element );
        this._on( element, {
            mouseenter: function( event ) {
                $( event.currentTarget ).addClass( "ui-state-hover" );
            },
            mouseleave: function( event ) {
                $( event.currentTarget ).removeClass( "ui-state-hover" );
            }
        });
    },

    _focusable: function( element ) {
        this.focusable = this.focusable.add( element );
        this._on( element, {
            focusin: function( event ) {
                $( event.currentTarget ).addClass( "ui-state-focus" );
            },
            focusout: function( event ) {
                $( event.currentTarget ).removeClass( "ui-state-focus" );
            }
        });
    },

    _trigger: function( type, event, data ) {
        var prop, orig,
            callback = this.options[ type ];

        data = data || {};
        event = $.Event( event );
        event.type = ( type === this.widgetEventPrefix ?
            type :
            this.widgetEventPrefix + type ).toLowerCase();
        // the original event may come from any element
        // so we need to reset the target on the new event
        event.target = this.element[ 0 ];

        // copy original event properties over to the new event
        orig = event.originalEvent;
        if ( orig ) {
            for ( prop in orig ) {
                if ( !( prop in event ) ) {
                    event[ prop ] = orig[ prop ];
                }
            }
        }

        this.element.trigger( event, data );
        return !( $.isFunction( callback ) &&
            callback.apply( this.element[0], [ event ].concat( data ) ) === false ||
            event.isDefaultPrevented() );
    }
};

$.each( { show: "fadeIn", hide: "fadeOut" }, function( method, defaultEffect ) {
    $.Widget.prototype[ "_" + method ] = function( element, options, callback ) {
        if ( typeof options === "string" ) {
            options = { effect: options };
        }
        var hasOptions,
            effectName = !options ?
                method :
                options === true || typeof options === "number" ?
                    defaultEffect :
                    options.effect || defaultEffect;
        options = options || {};
        if ( typeof options === "number" ) {
            options = { duration: options };
        }
        hasOptions = !$.isEmptyObject( options );
        options.complete = callback;
        if ( options.delay ) {
            element.delay( options.delay );
        }
        if ( hasOptions && $.effects && $.effects.effect[ effectName ] ) {
            element[ method ]( options );
        } else if ( effectName !== method && element[ effectName ] ) {
            element[ effectName ]( options.duration, options.easing, callback );
        } else {
            element.queue(function( next ) {
                $( this )[ method ]();
                if ( callback ) {
                    callback.call( element[ 0 ] );
                }
                next();
            });
        }
    };
});

})( jQuery );

(function( $, window, undefined ) {
    var nsNormalizeDict = {},
        oldFind = $.find,
        rbrace = /(?:\{[\s\S]*\}|\[[\s\S]*\])$/,
        jqmDataRE = /:jqmData\(([^)]*)\)/g;

    $.extend( $.mobile, {

        // Namespace used framework-wide for data-attrs. Default is no namespace

        ns: "",

        // Retrieve an attribute from an element and perform some massaging of the value

        getAttribute: function( element, key ) {
            var data;

            element = element.jquery ? element[0] : element;

            if ( element && element.getAttribute ) {
                data = element.getAttribute( "data-" + $.mobile.ns + key );
            }

            // Copied from core's src/data.js:dataAttr()
            // Convert from a string to a proper data type
            try {
                data = data === "true" ? true :
                    data === "false" ? false :
                    data === "null" ? null :
                    // Only convert to a number if it doesn't change the string
                    +data + "" === data ? +data :
                    rbrace.test( data ) ? JSON.parse( data ) :
                    data;
            } catch( err ) {}

            return data;
        },

        // Expose our cache for testing purposes.
        nsNormalizeDict: nsNormalizeDict,

        // Take a data attribute property, prepend the namespace
        // and then camel case the attribute string. Add the result
        // to our nsNormalizeDict so we don't have to do this again.
        nsNormalize: function( prop ) {
            return nsNormalizeDict[ prop ] ||
                ( nsNormalizeDict[ prop ] = $.camelCase( $.mobile.ns + prop ) );
        },

        // Find the closest javascript page element to gather settings data jsperf test
        // http://jsperf.com/single-complex-selector-vs-many-complex-selectors/edit
        // possibly naive, but it shows that the parsing overhead for *just* the page selector vs
        // the page and dialog selector is negligable. This could probably be speed up by
        // doing a similar parent node traversal to the one found in the inherited theme code above
        closestPageData: function( $target ) {
            return $target
                .closest( ":jqmData(role='page'), :jqmData(role='dialog')" )
                .data( "mobile-page" );
        }

    });

    // Mobile version of data and removeData and hasData methods
    // ensures all data is set and retrieved using jQuery Mobile's data namespace
    $.fn.jqmData = function( prop, value ) {
        var result;
        if ( typeof prop !== "undefined" ) {
            if ( prop ) {
                prop = $.mobile.nsNormalize( prop );
            }

            // undefined is permitted as an explicit input for the second param
            // in this case it returns the value and does not set it to undefined
            if ( arguments.length < 2 || value === undefined ) {
                result = this.data( prop );
            } else {
                result = this.data( prop, value );
            }
        }
        return result;
    };

    $.jqmData = function( elem, prop, value ) {
        var result;
        if ( typeof prop !== "undefined" ) {
            result = $.data( elem, prop ? $.mobile.nsNormalize( prop ) : prop, value );
        }
        return result;
    };

    $.fn.jqmRemoveData = function( prop ) {
        return this.removeData( $.mobile.nsNormalize( prop ) );
    };

    $.jqmRemoveData = function( elem, prop ) {
        return $.removeData( elem, $.mobile.nsNormalize( prop ) );
    };

    $.find = function( selector, context, ret, extra ) {
        if ( selector.indexOf( ":jqmData" ) > -1 ) {
            selector = selector.replace( jqmDataRE, "[data-" + ( $.mobile.ns || "" ) + "$1]" );
        }

        return oldFind.call( this, selector, context, ret, extra );
    };

    $.extend( $.find, oldFind );

})( jQuery, this );

(function( $, undefined ) {

var rcapitals = /[A-Z]/g,
    replaceFunction = function( c ) {
        return "-" + c.toLowerCase();
    };

$.extend( $.Widget.prototype, {
    _getCreateOptions: function() {
        var option, value,
            elem = this.element[ 0 ],
            options = {};

        //
        if ( !$.mobile.getAttribute( elem, "defaults" ) ) {
            for ( option in this.options ) {
                value = $.mobile.getAttribute( elem, option.replace( rcapitals, replaceFunction ) );

                if ( value != null ) {
                    options[ option ] = value;
                }
            }
        }

        return options;
    }
});

//TODO: Remove in 1.5 for backcompat only
$.mobile.widget = $.Widget;

})( jQuery );


(function( $ ) {
    // TODO move loader class down into the widget settings
    var loaderClass = "ui-loader", $html = $( "html" );

    $.widget( "mobile.loader", {
        // NOTE if the global config settings are defined they will override these
        //      options
        options: {
            // the theme for the loading message
            theme: "a",

            // whether the text in the loading message is shown
            textVisible: false,

            // custom html for the inner content of the loading message
            html: "",

            // the text to be displayed when the popup is shown
            text: "loading"
        },

        defaultHtml: "<div class='" + loaderClass + "'>" +
            "<span class='ui-icon-loading'></span>" +
            "<h1></h1>" +
            "</div>",

        // For non-fixed supportin browsers. Position at y center (if scrollTop supported), above the activeBtn (if defined), or just 100px from top
        fakeFixLoader: function() {
            var activeBtn = $( "." + $.mobile.activeBtnClass ).first();

            this.element
                .css({
                    top: $.support.scrollTop && this.window.scrollTop() + this.window.height() / 2 ||
                        activeBtn.length && activeBtn.offset().top || 100
                });
        },

        // check position of loader to see if it appears to be "fixed" to center
        // if not, use abs positioning
        checkLoaderPosition: function() {
            var offset = this.element.offset(),
                scrollTop = this.window.scrollTop(),
                screenHeight = $.mobile.getScreenHeight();

            if ( offset.top < scrollTop || ( offset.top - scrollTop ) > screenHeight ) {
                this.element.addClass( "ui-loader-fakefix" );
                this.fakeFixLoader();
                this.window
                    .unbind( "scroll", this.checkLoaderPosition )
                    .bind( "scroll", $.proxy( this.fakeFixLoader, this ) );
            }
        },

        resetHtml: function() {
            this.element.html( $( this.defaultHtml ).html() );
        },

        // Turn on/off page loading message. Theme doubles as an object argument
        // with the following shape: { theme: '', text: '', html: '', textVisible: '' }
        // NOTE that the $.mobile.loading* settings and params past the first are deprecated
        // TODO sweet jesus we need to break some of this out
        show: function( theme, msgText, textonly ) {
            var textVisible, message, loadSettings;

            this.resetHtml();

            // use the prototype options so that people can set them globally at
            // mobile init. Consistency, it's what's for dinner
            if ( $.type( theme ) === "object" ) {
                loadSettings = $.extend( {}, this.options, theme );

                theme = loadSettings.theme;
            } else {
                loadSettings = this.options;

                // here we prefer the theme value passed as a string argument, then
                // we prefer the global option because we can't use undefined default
                // prototype options, then the prototype option
                theme = theme || loadSettings.theme;
            }

            // set the message text, prefer the param, then the settings object
            // then loading message
            message = msgText || ( loadSettings.text === false ? "" : loadSettings.text );

            // prepare the dom
            $html.addClass( "ui-loading" );

            textVisible = loadSettings.textVisible;

            // add the proper css given the options (theme, text, etc)
            // Force text visibility if the second argument was supplied, or
            // if the text was explicitly set in the object args
            this.element.attr("class", loaderClass +
                " ui-corner-all ui-body-" + theme +
                " ui-loader-" + ( textVisible || msgText || theme.text ? "verbose" : "default" ) +
                ( loadSettings.textonly || textonly ? " ui-loader-textonly" : "" ) );

            // TODO verify that jquery.fn.html is ok to use in both cases here
            //      this might be overly defensive in preventing unknowing xss
            // if the html attribute is defined on the loading settings, use that
            // otherwise use the fallbacks from above
            if ( loadSettings.html ) {
                this.element.html( loadSettings.html );
            } else {
                this.element.find( "h1" ).text( message );
            }

            // If the pagecontainer widget has been defined we may use the :mobile-pagecontainer
            // and attach to the element on which the pagecontainer widget has been defined. If not,
            // we attach to the body.
            this.element.appendTo( $.mobile.pagecontainer ?
                $( ":mobile-pagecontainer" ) : $( "body" ) );

            // check that the loader is visible
            this.checkLoaderPosition();

            // on scroll check the loader position
            this.window.bind( "scroll", $.proxy( this.checkLoaderPosition, this ) );
        },

        hide: function() {
            $html.removeClass( "ui-loading" );

            if ( this.options.text ) {
                this.element.removeClass( "ui-loader-fakefix" );
            }

            this.window.unbind( "scroll", this.fakeFixLoader );
            this.window.unbind( "scroll", this.checkLoaderPosition );
        }
    });

})(jQuery, this);


/*!
 * jQuery hashchange event - v1.3 - 7/21/2010
 * http://benalman.com/projects/jquery-hashchange-plugin/
 * 
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */

// Script: jQuery hashchange event
//
// *Version: 1.3, Last updated: 7/21/2010*
// 
// Project Home - http://benalman.com/projects/jquery-hashchange-plugin/
// GitHub       - http://github.com/cowboy/jquery-hashchange/
// Source       - http://github.com/cowboy/jquery-hashchange/raw/master/jquery.ba-hashchange.js
// (Minified)   - http://github.com/cowboy/jquery-hashchange/raw/master/jquery.ba-hashchange.min.js (0.8kb gzipped)
// 
// About: License
// 
// Copyright (c) 2010 "Cowboy" Ben Alman,
// Dual licensed under the MIT and GPL licenses.
// http://benalman.com/about/license/
// 
// About: Examples
// 
// These working examples, complete with fully commented code, illustrate a few
// ways in which this plugin can be used.
// 
// hashchange event - http://benalman.com/code/projects/jquery-hashchange/examples/hashchange/
// document.domain - http://benalman.com/code/projects/jquery-hashchange/examples/document_domain/
// 
// About: Support and Testing
// 
// Information about what version or versions of jQuery this plugin has been
// tested with, what browsers it has been tested in, and where the unit tests
// reside (so you can test it yourself).
// 
// jQuery Versions - 1.2.6, 1.3.2, 1.4.1, 1.4.2
// Browsers Tested - Internet Explorer 6-8, Firefox 2-4, Chrome 5-6, Safari 3.2-5,
//                   Opera 9.6-10.60, iPhone 3.1, Android 1.6-2.2, BlackBerry 4.6-5.
// Unit Tests      - http://benalman.com/code/projects/jquery-hashchange/unit/
// 
// About: Known issues
// 
// While this jQuery hashchange event implementation is quite stable and
// robust, there are a few unfortunate browser bugs surrounding expected
// hashchange event-based behaviors, independent of any JavaScript
// window.onhashchange abstraction. See the following examples for more
// information:
// 
// Chrome: Back Button - http://benalman.com/code/projects/jquery-hashchange/examples/bug-chrome-back-button/
// Firefox: Remote XMLHttpRequest - http://benalman.com/code/projects/jquery-hashchange/examples/bug-firefox-remote-xhr/
// WebKit: Back Button in an Iframe - http://benalman.com/code/projects/jquery-hashchange/examples/bug-webkit-hash-iframe/
// Safari: Back Button from a different domain - http://benalman.com/code/projects/jquery-hashchange/examples/bug-safari-back-from-diff-domain/
// 
// Also note that should a browser natively support the window.onhashchange 
// event, but not report that it does, the fallback polling loop will be used.
// 
// About: Release History
// 
// 1.3   - (7/21/2010) Reorganized IE6/7 Iframe code to make it more
//         "removable" for mobile-only development. Added IE6/7 document.title
//         support. Attempted to make Iframe as hidden as possible by using
//         techniques from http://www.paciellogroup.com/blog/?p=604. Added 
//         support for the "shortcut" format $(window).hashchange( fn ) and
//         $(window).hashchange() like jQuery provides for built-in events.
//         Renamed jQuery.hashchangeDelay to <jQuery.fn.hashchange.delay> and
//         lowered its default value to 50. Added <jQuery.fn.hashchange.domain>
//         and <jQuery.fn.hashchange.src> properties plus document-domain.html
//         file to address access denied issues when setting document.domain in
//         IE6/7.
// 1.2   - (2/11/2010) Fixed a bug where coming back to a page using this plugin
//         from a page on another domain would cause an error in Safari 4. Also,
//         IE6/7 Iframe is now inserted after the body (this actually works),
//         which prevents the page from scrolling when the event is first bound.
//         Event can also now be bound before DOM ready, but it won't be usable
//         before then in IE6/7.
// 1.1   - (1/21/2010) Incorporated document.documentMode test to fix IE8 bug
//         where browser version is incorrectly reported as 8.0, despite
//         inclusion of the X-UA-Compatible IE=EmulateIE7 meta tag.
// 1.0   - (1/9/2010) Initial Release. Broke out the jQuery BBQ event.special
//         window.onhashchange functionality into a separate plugin for users
//         who want just the basic event & back button support, without all the
//         extra awesomeness that BBQ provides. This plugin will be included as
//         part of jQuery BBQ, but also be available separately.

(function($,window,undefined){
  '$:nomunge'; // Used by YUI compressor.
  
  // Reused string.
  var str_hashchange = 'hashchange',
    
    // Method / object references.
    doc = document,
    fake_onhashchange,
    special = $.event.special,
    
    // Does the browser support window.onhashchange? Note that IE8 running in
    // IE7 compatibility mode reports true for 'onhashchange' in window, even
    // though the event isn't supported, so also test document.documentMode.
    doc_mode = doc.documentMode,
    supports_onhashchange = 'on' + str_hashchange in window && ( doc_mode === undefined || doc_mode > 7 );
  
  // Get location.hash (or what you'd expect location.hash to be) sans any
  // leading #. Thanks for making this necessary, Firefox!
  function get_fragment( url ) {
    url = url || location.href;
    return '#' + url.replace( /^[^#]*#?(.*)$/, '$1' );
  };
  
  // Method: jQuery.fn.hashchange
  // 
  // Bind a handler to the window.onhashchange event or trigger all bound
  // window.onhashchange event handlers. This behavior is consistent with
  // jQuery's built-in event handlers.
  // 
  // Usage:
  // 
  // > jQuery(window).hashchange( [ handler ] );
  // 
  // Arguments:
  // 
  //  handler - (Function) Optional handler to be bound to the hashchange
  //    event. This is a "shortcut" for the more verbose form:
  //    jQuery(window).bind( 'hashchange', handler ). If handler is omitted,
  //    all bound window.onhashchange event handlers will be triggered. This
  //    is a shortcut for the more verbose
  //    jQuery(window).trigger( 'hashchange' ). These forms are described in
  //    the <hashchange event> section.
  // 
  // Returns:
  // 
  //  (jQuery) The initial jQuery collection of elements.
  
  // Allow the "shortcut" format $(elem).hashchange( fn ) for binding and
  // $(elem).hashchange() for triggering, like jQuery does for built-in events.
  $.fn[ str_hashchange ] = function( fn ) {
    return fn ? this.bind( str_hashchange, fn ) : this.trigger( str_hashchange );
  };
  
  // Property: jQuery.fn.hashchange.delay
  // 
  // The numeric interval (in milliseconds) at which the <hashchange event>
  // polling loop executes. Defaults to 50.
  
  // Property: jQuery.fn.hashchange.domain
  // 
  // If you're setting document.domain in your JavaScript, and you want hash
  // history to work in IE6/7, not only must this property be set, but you must
  // also set document.domain BEFORE jQuery is loaded into the page. This
  // property is only applicable if you are supporting IE6/7 (or IE8 operating
  // in "IE7 compatibility" mode).
  // 
  // In addition, the <jQuery.fn.hashchange.src> property must be set to the
  // path of the included "document-domain.html" file, which can be renamed or
  // modified if necessary (note that the document.domain specified must be the
  // same in both your main JavaScript as well as in this file).
  // 
  // Usage:
  // 
  // jQuery.fn.hashchange.domain = document.domain;
  
  // Property: jQuery.fn.hashchange.src
  // 
  // If, for some reason, you need to specify an Iframe src file (for example,
  // when setting document.domain as in <jQuery.fn.hashchange.domain>), you can
  // do so using this property. Note that when using this property, history
  // won't be recorded in IE6/7 until the Iframe src file loads. This property
  // is only applicable if you are supporting IE6/7 (or IE8 operating in "IE7
  // compatibility" mode).
  // 
  // Usage:
  // 
  // jQuery.fn.hashchange.src = 'path/to/file.html';
  
  $.fn[ str_hashchange ].delay = 50;
  /*
  $.fn[ str_hashchange ].domain = null;
  $.fn[ str_hashchange ].src = null;
  */
  
  // Event: hashchange event
  // 
  // Fired when location.hash changes. In browsers that support it, the native
  // HTML5 window.onhashchange event is used, otherwise a polling loop is
  // initialized, running every <jQuery.fn.hashchange.delay> milliseconds to
  // see if the hash has changed. In IE6/7 (and IE8 operating in "IE7
  // compatibility" mode), a hidden Iframe is created to allow the back button
  // and hash-based history to work.
  // 
  // Usage as described in <jQuery.fn.hashchange>:
  // 
  // > // Bind an event handler.
  // > jQuery(window).hashchange( function(e) {
  // >   var hash = location.hash;
  // >   ...
  // > });
  // > 
  // > // Manually trigger the event handler.
  // > jQuery(window).hashchange();
  // 
  // A more verbose usage that allows for event namespacing:
  // 
  // > // Bind an event handler.
  // > jQuery(window).bind( 'hashchange', function(e) {
  // >   var hash = location.hash;
  // >   ...
  // > });
  // > 
  // > // Manually trigger the event handler.
  // > jQuery(window).trigger( 'hashchange' );
  // 
  // Additional Notes:
  // 
  // * The polling loop and Iframe are not created until at least one handler
  //   is actually bound to the 'hashchange' event.
  // * If you need the bound handler(s) to execute immediately, in cases where
  //   a location.hash exists on page load, via bookmark or page refresh for
  //   example, use jQuery(window).hashchange() or the more verbose 
  //   jQuery(window).trigger( 'hashchange' ).
  // * The event can be bound before DOM ready, but since it won't be usable
  //   before then in IE6/7 (due to the necessary Iframe), recommended usage is
  //   to bind it inside a DOM ready handler.
  
  // Override existing $.event.special.hashchange methods (allowing this plugin
  // to be defined after jQuery BBQ in BBQ's source code).
  special[ str_hashchange ] = $.extend( special[ str_hashchange ], {
    
    // Called only when the first 'hashchange' event is bound to window.
    setup: function() {
      // If window.onhashchange is supported natively, there's nothing to do..
      if ( supports_onhashchange ) { return false; }
      
      // Otherwise, we need to create our own. And we don't want to call this
      // until the user binds to the event, just in case they never do, since it
      // will create a polling loop and possibly even a hidden Iframe.
      $( fake_onhashchange.start );
    },
    
    // Called only when the last 'hashchange' event is unbound from window.
    teardown: function() {
      // If window.onhashchange is supported natively, there's nothing to do..
      if ( supports_onhashchange ) { return false; }
      
      // Otherwise, we need to stop ours (if possible).
      $( fake_onhashchange.stop );
    }
    
  });
  
  // fake_onhashchange does all the work of triggering the window.onhashchange
  // event for browsers that don't natively support it, including creating a
  // polling loop to watch for hash changes and in IE 6/7 creating a hidden
  // Iframe to enable back and forward.
  fake_onhashchange = (function(){
    var self = {},
      timeout_id,
      
      // Remember the initial hash so it doesn't get triggered immediately.
      last_hash = get_fragment(),
      
      fn_retval = function(val){ return val; },
      history_set = fn_retval,
      history_get = fn_retval;
    
    // Start the polling loop.
    self.start = function() {
      timeout_id || poll();
    };
    
    // Stop the polling loop.
    self.stop = function() {
      timeout_id && clearTimeout( timeout_id );
      timeout_id = undefined;
    };
    
    // This polling loop checks every $.fn.hashchange.delay milliseconds to see
    // if location.hash has changed, and triggers the 'hashchange' event on
    // window when necessary.
    function poll() {
      var hash = get_fragment(),
        history_hash = history_get( last_hash );
      
      if ( hash !== last_hash ) {
        history_set( last_hash = hash, history_hash );
        
        $(window).trigger( str_hashchange );
        
      } else if ( history_hash !== last_hash ) {
        location.href = location.href.replace( /#.*/, '' ) + history_hash;
      }
      
      timeout_id = setTimeout( poll, $.fn[ str_hashchange ].delay );
    };
    
    // vvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvv
    // vvvvvvvvvvvvvvvvvvv REMOVE IF NOT SUPPORTING IE6/7/8 vvvvvvvvvvvvvvvvvvv
    // vvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvv
    window.attachEvent && !window.addEventListener && !supports_onhashchange && (function(){
      // Not only do IE6/7 need the "magical" Iframe treatment, but so does IE8
      // when running in "IE7 compatibility" mode.
      
      var iframe,
        iframe_src;
      
      // When the event is bound and polling starts in IE 6/7, create a hidden
      // Iframe for history handling.
      self.start = function(){
        if ( !iframe ) {
          iframe_src = $.fn[ str_hashchange ].src;
          iframe_src = iframe_src && iframe_src + get_fragment();
          
          // Create hidden Iframe. Attempt to make Iframe as hidden as possible
          // by using techniques from http://www.paciellogroup.com/blog/?p=604.
          iframe = $('<iframe tabindex="-1" title="empty"/>').hide()
            
            // When Iframe has completely loaded, initialize the history and
            // start polling.
            .one( 'load', function(){
              iframe_src || history_set( get_fragment() );
              poll();
            })
            
            // Load Iframe src if specified, otherwise nothing.
            .attr( 'src', iframe_src || 'javascript:0' )
            
            // Append Iframe after the end of the body to prevent unnecessary
            // initial page scrolling (yes, this works).
            .insertAfter( 'body' )[0].contentWindow;
          
          // Whenever `document.title` changes, update the Iframe's title to
          // prettify the back/next history menu entries. Since IE sometimes
          // errors with "Unspecified error" the very first time this is set
          // (yes, very useful) wrap this with a try/catch block.
          doc.onpropertychange = function(){
            try {
              if ( event.propertyName === 'title' ) {
                iframe.document.title = doc.title;
              }
            } catch(e) {}
          };
          
        }
      };
      
      // Override the "stop" method since an IE6/7 Iframe was created. Even
      // if there are no longer any bound event handlers, the polling loop
      // is still necessary for back/next to work at all!
      self.stop = fn_retval;
      
      // Get history by looking at the hidden Iframe's location.hash.
      history_get = function() {
        return get_fragment( iframe.location.href );
      };
      
      // Set a new history item by opening and then closing the Iframe
      // document, *then* setting its location.hash. If document.domain has
      // been set, update that as well.
      history_set = function( hash, history_hash ) {
        var iframe_doc = iframe.document,
          domain = $.fn[ str_hashchange ].domain;
        
        if ( hash !== history_hash ) {
          // Update Iframe with any initial `document.title` that might be set.
          iframe_doc.title = doc.title;
          
          // Opening the Iframe's document after it has been closed is what
          // actually adds a history entry.
          iframe_doc.open();
          
          // Set document.domain for the Iframe document as well, if necessary.
          domain && iframe_doc.write( '\x3cscript>document.domain="' + domain + '"\x3c/script>' );
          
          iframe_doc.close();
          
          // Update the Iframe's hash, for great justice.
          iframe.location.hash = hash;
        }
      };
      
    })();
    // ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    // ^^^^^^^^^^^^^^^^^^^ REMOVE IF NOT SUPPORTING IE6/7/8 ^^^^^^^^^^^^^^^^^^^
    // ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    
    return self;
  })();
  
})(jQuery,this);


(function( $, undefined ) {

    /*! matchMedia() polyfill - Test a CSS media type/query in JS. Authors & copyright (c) 2012: Scott Jehl, Paul Irish, Nicholas Zakas. Dual MIT/BSD license */
    window.matchMedia = window.matchMedia || (function( doc, undefined ) {

        var bool,
            docElem = doc.documentElement,
            refNode = docElem.firstElementChild || docElem.firstChild,
            // fakeBody required for <FF4 when executed in <head>
            fakeBody = doc.createElement( "body" ),
            div = doc.createElement( "div" );

        div.id = "mq-test-1";
        div.style.cssText = "position:absolute;top:-100em";
        fakeBody.style.background = "none";
        fakeBody.appendChild(div);

        return function(q){

            div.innerHTML = "&shy;<style media=\"" + q + "\"> #mq-test-1 { width: 42px; }</style>";

            docElem.insertBefore( fakeBody, refNode );
            bool = div.offsetWidth === 42;
            docElem.removeChild( fakeBody );

            return {
                matches: bool,
                media: q
            };

        };

    }( document ));

    // $.mobile.media uses matchMedia to return a boolean.
    $.mobile.media = function( q ) {
        return window.matchMedia( q ).matches;
    };

})(jQuery);

    (function( $, undefined ) {
        var support = {
            touch: "ontouchend" in document
        };

        $.mobile.support = $.mobile.support || {};
        $.extend( $.support, support );
        $.extend( $.mobile.support, support );
    }( jQuery ));

    (function( $, undefined ) {
        $.extend( $.support, {
            orientation: "orientation" in window && "onorientationchange" in window
        });
    }( jQuery ));

(function( $, undefined ) {

// thx Modernizr
function propExists( prop ) {
    var uc_prop = prop.charAt( 0 ).toUpperCase() + prop.substr( 1 ),
        props = ( prop + " " + vendors.join( uc_prop + " " ) + uc_prop ).split( " " ),
        v;

    for ( v in props ) {
        if ( fbCSS[ props[ v ] ] !== undefined ) {
            return true;
        }
    }
}

var fakeBody = $( "<body>" ).prependTo( "html" ),
    fbCSS = fakeBody[ 0 ].style,
    vendors = [ "Webkit", "Moz", "O" ],
    webos = "palmGetResource" in window, //only used to rule out scrollTop
    operamini = window.operamini && ({}).toString.call( window.operamini ) === "[object OperaMini]",
    bb = window.blackberry && !propExists( "-webkit-transform" ), //only used to rule out box shadow, as it's filled opaque on BB 5 and lower
    nokiaLTE7_3;

// inline SVG support test
function inlineSVG() {
    // Thanks Modernizr & Erik Dahlstrom
    var w = window,
        svg = !!w.document.createElementNS && !!w.document.createElementNS( "http://www.w3.org/2000/svg", "svg" ).createSVGRect && !( w.opera && navigator.userAgent.indexOf( "Chrome" ) === -1 ),
        support = function( data ) {
            if ( !( data && svg ) ) {
                $( "html" ).addClass( "ui-nosvg" );
            }
        },
        img = new w.Image();

    img.onerror = function() {
        support( false );
    };
    img.onload = function() {
        support( img.width === 1 && img.height === 1 );
    };
    img.src = "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";
}

function transform3dTest() {
    var mqProp = "transform-3d",
        // Because the `translate3d` test below throws false positives in Android:
        ret = $.mobile.media( "(-" + vendors.join( "-" + mqProp + "),(-" ) + "-" + mqProp + "),(" + mqProp + ")" ),
        el, transforms, t;

    if ( ret ) {
        return !!ret;
    }

    el = document.createElement( "div" );
    transforms = {
        // We’re omitting Opera for the time being; MS uses unprefixed.
        "MozTransform": "-moz-transform",
        "transform": "transform"
    };

    fakeBody.append( el );

    for ( t in transforms ) {
        if ( el.style[ t ] !== undefined ) {
            el.style[ t ] = "translate3d( 100px, 1px, 1px )";
            ret = window.getComputedStyle( el ).getPropertyValue( transforms[ t ] );
        }
    }
    return ( !!ret && ret !== "none" );
}

// Test for dynamic-updating base tag support ( allows us to avoid href,src attr rewriting )
function baseTagTest() {
    var fauxBase = location.protocol + "//" + location.host + location.pathname + "ui-dir/",
        base = $( "head base" ),
        fauxEle = null,
        href = "",
        link, rebase;

    if ( !base.length ) {
        base = fauxEle = $( "<base>", { "href": fauxBase }).appendTo( "head" );
    } else {
        href = base.attr( "href" );
    }

    link = $( "<a href='testurl' />" ).prependTo( fakeBody );
    rebase = link[ 0 ].href;
    base[ 0 ].href = href || location.pathname;

    if ( fauxEle ) {
        fauxEle.remove();
    }
    return rebase.indexOf( fauxBase ) === 0;
}

// Thanks Modernizr
function cssPointerEventsTest() {
    var element = document.createElement( "x" ),
        documentElement = document.documentElement,
        getComputedStyle = window.getComputedStyle,
        supports;

    if ( !( "pointerEvents" in element.style ) ) {
        return false;
    }

    element.style.pointerEvents = "auto";
    element.style.pointerEvents = "x";
    documentElement.appendChild( element );
    supports = getComputedStyle &&
    getComputedStyle( element, "" ).pointerEvents === "auto";
    documentElement.removeChild( element );
    return !!supports;
}

function boundingRect() {
    var div = document.createElement( "div" );
    return typeof div.getBoundingClientRect !== "undefined";
}

// non-UA-based IE version check by James Padolsey, modified by jdalton - from http://gist.github.com/527683
// allows for inclusion of IE 6+, including Windows Mobile 7
$.extend( $.mobile, { browser: {} } );
$.mobile.browser.oldIE = (function() {
    var v = 3,
        div = document.createElement( "div" ),
        a = div.all || [];

    do {
        div.innerHTML = "<!--[if gt IE " + ( ++v ) + "]><br><![endif]-->";
    } while( a[0] );

    return v > 4 ? v : !v;
})();

function fixedPosition() {
    var w = window,
        ua = navigator.userAgent,
        platform = navigator.platform,
        // Rendering engine is Webkit, and capture major version
        wkmatch = ua.match( /AppleWebKit\/([0-9]+)/ ),
        wkversion = !!wkmatch && wkmatch[ 1 ],
        ffmatch = ua.match( /Fennec\/([0-9]+)/ ),
        ffversion = !!ffmatch && ffmatch[ 1 ],
        operammobilematch = ua.match( /Opera Mobi\/([0-9]+)/ ),
        omversion = !!operammobilematch && operammobilematch[ 1 ];

    if (
        // iOS 4.3 and older : Platform is iPhone/Pad/Touch and Webkit version is less than 534 (ios5)
        ( ( platform.indexOf( "iPhone" ) > -1 || platform.indexOf( "iPad" ) > -1  || platform.indexOf( "iPod" ) > -1 ) && wkversion && wkversion < 534 ) ||
        // Opera Mini
        ( w.operamini && ({}).toString.call( w.operamini ) === "[object OperaMini]" ) ||
        ( operammobilematch && omversion < 7458 )    ||
        //Android lte 2.1: Platform is Android and Webkit version is less than 533 (Android 2.2)
        ( ua.indexOf( "Android" ) > -1 && wkversion && wkversion < 533 ) ||
        // Firefox Mobile before 6.0 -
        ( ffversion && ffversion < 6 ) ||
        // WebOS less than 3
        ( "palmGetResource" in window && wkversion && wkversion < 534 )    ||
        // MeeGo
        ( ua.indexOf( "MeeGo" ) > -1 && ua.indexOf( "NokiaBrowser/8.5.0" ) > -1 ) ) {
        return false;
    }

    return true;
}

$.extend( $.support, {
    // Note, Chrome for iOS has an extremely quirky implementation of popstate.
    // We've chosen to take the shortest path to a bug fix here for issue #5426
    // See the following link for information about the regex chosen
    // https://developers.google.com/chrome/mobile/docs/user-agent#chrome_for_ios_user-agent
    pushState: "pushState" in history &&
        "replaceState" in history &&
        // When running inside a FF iframe, calling replaceState causes an error
        !( window.navigator.userAgent.indexOf( "Firefox" ) >= 0 && window.top !== window ) &&
        ( window.navigator.userAgent.search(/CriOS/) === -1 ),

    mediaquery: $.mobile.media( "only all" ),
    cssPseudoElement: !!propExists( "content" ),
    touchOverflow: !!propExists( "overflowScrolling" ),
    cssTransform3d: transform3dTest(),
    boxShadow: !!propExists( "boxShadow" ) && !bb,
    fixedPosition: fixedPosition(),
    scrollTop: ("pageXOffset" in window ||
        "scrollTop" in document.documentElement ||
        "scrollTop" in fakeBody[ 0 ]) && !webos && !operamini,

    dynamicBaseTag: baseTagTest(),
    cssPointerEvents: cssPointerEventsTest(),
    boundingRect: boundingRect(),
    inlineSVG: inlineSVG
});

fakeBody.remove();

// $.mobile.ajaxBlacklist is used to override ajaxEnabled on platforms that have known conflicts with hash history updates (BB5, Symbian)
// or that generally work better browsing in regular http for full page refreshes (Opera Mini)
// Note: This detection below is used as a last resort.
// We recommend only using these detection methods when all other more reliable/forward-looking approaches are not possible
nokiaLTE7_3 = (function() {

    var ua = window.navigator.userAgent;

    //The following is an attempt to match Nokia browsers that are running Symbian/s60, with webkit, version 7.3 or older
    return ua.indexOf( "Nokia" ) > -1 &&
            ( ua.indexOf( "Symbian/3" ) > -1 || ua.indexOf( "Series60/5" ) > -1 ) &&
            ua.indexOf( "AppleWebKit" ) > -1 &&
            ua.match( /(BrowserNG|NokiaBrowser)\/7\.[0-3]/ );
})();

// Support conditions that must be met in order to proceed
// default enhanced qualifications are media query support OR IE 7+

$.mobile.gradeA = function() {
    return ( ( $.support.mediaquery && $.support.cssPseudoElement ) || $.mobile.browser.oldIE && $.mobile.browser.oldIE >= 8 ) && ( $.support.boundingRect || $.fn.jquery.match(/1\.[0-7+]\.[0-9+]?/) !== null );
};

$.mobile.ajaxBlacklist =
            // BlackBerry browsers, pre-webkit
            window.blackberry && !window.WebKitPoint ||
            // Opera Mini
            operamini ||
            // Symbian webkits pre 7.3
            nokiaLTE7_3;

// Lastly, this workaround is the only way we've found so far to get pre 7.3 Symbian webkit devices
// to render the stylesheets when they're referenced before this script, as we'd recommend doing.
// This simply reappends the CSS in place, which for some reason makes it apply
if ( nokiaLTE7_3 ) {
    $(function() {
        $( "head link[rel='stylesheet']" ).attr( "rel", "alternate stylesheet" ).attr( "rel", "stylesheet" );
    });
}

// For ruling out shadows via css
if ( !$.support.boxShadow ) {
    $( "html" ).addClass( "ui-noboxshadow" );
}

})( jQuery );


(function( $, undefined ) {
    var $win = $.mobile.window, self,
        dummyFnToInitNavigate = function() {
        };

    $.event.special.beforenavigate = {
        setup: function() {
            $win.on( "navigate", dummyFnToInitNavigate );
        },

        teardown: function() {
            $win.off( "navigate", dummyFnToInitNavigate );
        }
    };

    $.event.special.navigate = self = {
        bound: false,

        pushStateEnabled: true,

        originalEventName: undefined,

        // If pushstate support is present and push state support is defined to
        // be true on the mobile namespace.
        isPushStateEnabled: function() {
            return $.support.pushState &&
                $.mobile.pushStateEnabled === true &&
                this.isHashChangeEnabled();
        },

        // !! assumes mobile namespace is present
        isHashChangeEnabled: function() {
            return $.mobile.hashListeningEnabled === true;
        },

        // TODO a lot of duplication between popstate and hashchange
        popstate: function( event ) {
            var newEvent = new $.Event( "navigate" ),
                beforeNavigate = new $.Event( "beforenavigate" ),
                state = event.originalEvent.state || {};

            beforeNavigate.originalEvent = event;
            $win.trigger( beforeNavigate );

            if ( beforeNavigate.isDefaultPrevented() ) {
                return;
            }

            if ( event.historyState ) {
                $.extend(state, event.historyState);
            }

            // Make sure the original event is tracked for the end
            // user to inspect incase they want to do something special
            newEvent.originalEvent = event;

            // NOTE we let the current stack unwind because any assignment to
            //      location.hash will stop the world and run this event handler. By
            //      doing this we create a similar behavior to hashchange on hash
            //      assignment
            setTimeout(function() {
                $win.trigger( newEvent, {
                    state: state
                });
            }, 0);
        },

        hashchange: function( event /*, data */ ) {
            var newEvent = new $.Event( "navigate" ),
                beforeNavigate = new $.Event( "beforenavigate" );

            beforeNavigate.originalEvent = event;
            $win.trigger( beforeNavigate );

            if ( beforeNavigate.isDefaultPrevented() ) {
                return;
            }

            // Make sure the original event is tracked for the end
            // user to inspect incase they want to do something special
            newEvent.originalEvent = event;

            // Trigger the hashchange with state provided by the user
            // that altered the hash
            $win.trigger( newEvent, {
                // Users that want to fully normalize the two events
                // will need to do history management down the stack and
                // add the state to the event before this binding is fired
                // TODO consider allowing for the explicit addition of callbacks
                //      to be fired before this value is set to avoid event timing issues
                state: event.hashchangeState || {}
            });
        },

        // TODO We really only want to set this up once
        //      but I'm not clear if there's a beter way to achieve
        //      this with the jQuery special event structure
        setup: function( /* data, namespaces */ ) {
            if ( self.bound ) {
                return;
            }

            self.bound = true;

            if ( self.isPushStateEnabled() ) {
                self.originalEventName = "popstate";
                $win.bind( "popstate.navigate", self.popstate );
            } else if ( self.isHashChangeEnabled() ) {
                self.originalEventName = "hashchange";
                $win.bind( "hashchange.navigate", self.hashchange );
            }
        }
    };
})( jQuery );



(function( $, undefined ) {
        var path, $base, dialogHashKey = "&ui-state=dialog";

        $.mobile.path = path = {
            uiStateKey: "&ui-state",

            // This scary looking regular expression parses an absolute URL or its relative
            // variants (protocol, site, document, query, and hash), into the various
            // components (protocol, host, path, query, fragment, etc that make up the
            // URL as well as some other commonly used sub-parts. When used with RegExp.exec()
            // or String.match, it parses the URL into a results array that looks like this:
            //
            //     [0]: http://jblas:password@mycompany.com:8080/mail/inbox?msg=1234&type=unread#msg-content
            //     [1]: http://jblas:password@mycompany.com:8080/mail/inbox?msg=1234&type=unread
            //     [2]: http://jblas:password@mycompany.com:8080/mail/inbox
            //     [3]: http://jblas:password@mycompany.com:8080
            //     [4]: http:
            //     [5]: //
            //     [6]: jblas:password@mycompany.com:8080
            //     [7]: jblas:password
            //     [8]: jblas
            //     [9]: password
            //    [10]: mycompany.com:8080
            //    [11]: mycompany.com
            //    [12]: 8080
            //    [13]: /mail/inbox
            //    [14]: /mail/
            //    [15]: inbox
            //    [16]: ?msg=1234&type=unread
            //    [17]: #msg-content
            //
            urlParseRE: /^\s*(((([^:\/#\?]+:)?(?:(\/\/)((?:(([^:@\/#\?]+)(?:\:([^:@\/#\?]+))?)@)?(([^:\/#\?\]\[]+|\[[^\/\]@#?]+\])(?:\:([0-9]+))?))?)?)?((\/?(?:[^\/\?#]+\/+)*)([^\?#]*)))?(\?[^#]+)?)(#.*)?/,

            // Abstraction to address xss (Issue #4787) by removing the authority in
            // browsers that auto-decode it. All references to location.href should be
            // replaced with a call to this method so that it can be dealt with properly here
            getLocation: function( url ) {
                var parsedUrl = this.parseUrl( url || location.href ),
                    uri = url ? parsedUrl : location,

                    // Make sure to parse the url or the location object for the hash because using
                    // location.hash is autodecoded in firefox, the rest of the url should be from
                    // the object (location unless we're testing) to avoid the inclusion of the
                    // authority
                    hash = parsedUrl.hash;

                // mimic the browser with an empty string when the hash is empty
                hash = hash === "#" ? "" : hash;

                return uri.protocol +
                    parsedUrl.doubleSlash +
                    uri.host +

                    // The pathname must start with a slash if there's a protocol, because you
                    // can't have a protocol followed by a relative path. Also, it's impossible to
                    // calculate absolute URLs from relative ones if the absolute one doesn't have
                    // a leading "/".
                    ( ( uri.protocol !== "" && uri.pathname.substring( 0, 1 ) !== "/" ) ?
                        "/" : "" ) +
                    uri.pathname +
                    uri.search +
                    hash;
            },

            //return the original document url
            getDocumentUrl: function( asParsedObject ) {
                return asParsedObject ? $.extend( {}, path.documentUrl ) : path.documentUrl.href;
            },

            parseLocation: function() {
                return this.parseUrl( this.getLocation() );
            },

            //Parse a URL into a structure that allows easy access to
            //all of the URL components by name.
            parseUrl: function( url ) {
                // If we're passed an object, we'll assume that it is
                // a parsed url object and just return it back to the caller.
                if ( $.type( url ) === "object" ) {
                    return url;
                }

                var matches = path.urlParseRE.exec( url || "" ) || [];

                    // Create an object that allows the caller to access the sub-matches
                    // by name. Note that IE returns an empty string instead of undefined,
                    // like all other browsers do, so we normalize everything so its consistent
                    // no matter what browser we're running on.
                    return {
                        href:         matches[  0 ] || "",
                        hrefNoHash:   matches[  1 ] || "",
                        hrefNoSearch: matches[  2 ] || "",
                        domain:       matches[  3 ] || "",
                        protocol:     matches[  4 ] || "",
                        doubleSlash:  matches[  5 ] || "",
                        authority:    matches[  6 ] || "",
                        username:     matches[  8 ] || "",
                        password:     matches[  9 ] || "",
                        host:         matches[ 10 ] || "",
                        hostname:     matches[ 11 ] || "",
                        port:         matches[ 12 ] || "",
                        pathname:     matches[ 13 ] || "",
                        directory:    matches[ 14 ] || "",
                        filename:     matches[ 15 ] || "",
                        search:       matches[ 16 ] || "",
                        hash:         matches[ 17 ] || ""
                    };
            },

            //Turn relPath into an asbolute path. absPath is
            //an optional absolute path which describes what
            //relPath is relative to.
            makePathAbsolute: function( relPath, absPath ) {
                var absStack,
                    relStack,
                    i, d;

                if ( relPath && relPath.charAt( 0 ) === "/" ) {
                    return relPath;
                }

                relPath = relPath || "";
                absPath = absPath ? absPath.replace( /^\/|(\/[^\/]*|[^\/]+)$/g, "" ) : "";

                absStack = absPath ? absPath.split( "/" ) : [];
                relStack = relPath.split( "/" );

                for ( i = 0; i < relStack.length; i++ ) {
                    d = relStack[ i ];
                    switch ( d ) {
                        case ".":
                            break;
                        case "..":
                            if ( absStack.length ) {
                                absStack.pop();
                            }
                            break;
                        default:
                            absStack.push( d );
                            break;
                    }
                }
                return "/" + absStack.join( "/" );
            },

            //Returns true if both urls have the same domain.
            isSameDomain: function( absUrl1, absUrl2 ) {
                return path.parseUrl( absUrl1 ).domain.toLowerCase() ===
                    path.parseUrl( absUrl2 ).domain.toLowerCase();
            },

            //Returns true for any relative variant.
            isRelativeUrl: function( url ) {
                // All relative Url variants have one thing in common, no protocol.
                return path.parseUrl( url ).protocol === "";
            },

            //Returns true for an absolute url.
            isAbsoluteUrl: function( url ) {
                return path.parseUrl( url ).protocol !== "";
            },

            //Turn the specified realtive URL into an absolute one. This function
            //can handle all relative variants (protocol, site, document, query, fragment).
            makeUrlAbsolute: function( relUrl, absUrl ) {
                if ( !path.isRelativeUrl( relUrl ) ) {
                    return relUrl;
                }

                if ( absUrl === undefined ) {
                    absUrl = this.documentBase;
                }

                var relObj = path.parseUrl( relUrl ),
                    absObj = path.parseUrl( absUrl ),
                    protocol = relObj.protocol || absObj.protocol,
                    doubleSlash = relObj.protocol ? relObj.doubleSlash : ( relObj.doubleSlash || absObj.doubleSlash ),
                    authority = relObj.authority || absObj.authority,
                    hasPath = relObj.pathname !== "",
                    pathname = path.makePathAbsolute( relObj.pathname || absObj.filename, absObj.pathname ),
                    search = relObj.search || ( !hasPath && absObj.search ) || "",
                    hash = relObj.hash;

                return protocol + doubleSlash + authority + pathname + search + hash;
            },

            //Add search (aka query) params to the specified url.
            addSearchParams: function( url, params ) {
                var u = path.parseUrl( url ),
                    p = ( typeof params === "object" ) ? $.param( params ) : params,
                    s = u.search || "?";
                return u.hrefNoSearch + s + ( s.charAt( s.length - 1 ) !== "?" ? "&" : "" ) + p + ( u.hash || "" );
            },

            convertUrlToDataUrl: function( absUrl ) {
                var result = absUrl,
                    u = path.parseUrl( absUrl );

                if ( path.isEmbeddedPage( u ) ) {
                    // For embedded pages, remove the dialog hash key as in getFilePath(),
                    // and remove otherwise the Data Url won't match the id of the embedded Page.
                    result = u.hash
                        .split( dialogHashKey )[0]
                        .replace( /^#/, "" )
                        .replace( /\?.*$/, "" );
                } else if ( path.isSameDomain( u, this.documentBase ) ) {
                    result = u.hrefNoHash.replace( this.documentBase.domain, "" ).split( dialogHashKey )[0];
                }

                return window.decodeURIComponent( result );
            },

            //get path from current hash, or from a file path
            get: function( newPath ) {
                if ( newPath === undefined ) {
                    newPath = path.parseLocation().hash;
                }
                return path.stripHash( newPath ).replace( /[^\/]*\.[^\/*]+$/, "" );
            },

            //set location hash to path
            set: function( path ) {
                location.hash = path;
            },

            //test if a given url (string) is a path
            //NOTE might be exceptionally naive
            isPath: function( url ) {
                return ( /\// ).test( url );
            },

            //return a url path with the window's location protocol/hostname/pathname removed
            clean: function( url ) {
                return url.replace( this.documentBase.domain, "" );
            },

            //just return the url without an initial #
            stripHash: function( url ) {
                return url.replace( /^#/, "" );
            },

            stripQueryParams: function( url ) {
                return url.replace( /\?.*$/, "" );
            },

            //remove the preceding hash, any query params, and dialog notations
            cleanHash: function( hash ) {
                return path.stripHash( hash.replace( /\?.*$/, "" ).replace( dialogHashKey, "" ) );
            },

            isHashValid: function( hash ) {
                return ( /^#[^#]+$/ ).test( hash );
            },

            //check whether a url is referencing the same domain, or an external domain or different protocol
            //could be mailto, etc
            isExternal: function( url ) {
                var u = path.parseUrl( url );

                return !!( u.protocol &&
                    ( u.domain.toLowerCase() !== this.documentUrl.domain.toLowerCase() ) );
            },

            hasProtocol: function( url ) {
                return ( /^(:?\w+:)/ ).test( url );
            },

            isEmbeddedPage: function( url ) {
                var u = path.parseUrl( url );

                //if the path is absolute, then we need to compare the url against
                //both the this.documentUrl and the documentBase. The main reason for this
                //is that links embedded within external documents will refer to the
                //application document, whereas links embedded within the application
                //document will be resolved against the document base.
                if ( u.protocol !== "" ) {
                    return ( !this.isPath(u.hash) && u.hash && ( u.hrefNoHash === this.documentUrl.hrefNoHash || ( this.documentBaseDiffers && u.hrefNoHash === this.documentBase.hrefNoHash ) ) );
                }
                return ( /^#/ ).test( u.href );
            },

            squash: function( url, resolutionUrl ) {
                var href, cleanedUrl, search, stateIndex, docUrl,
                    isPath = this.isPath( url ),
                    uri = this.parseUrl( url ),
                    preservedHash = uri.hash,
                    uiState = "";

                // produce a url against which we can resolve the provided path
                if ( !resolutionUrl ) {
                    if ( isPath ) {
                        resolutionUrl = path.getLocation();
                    } else {
                        docUrl = path.getDocumentUrl( true );
                        if ( path.isPath( docUrl.hash ) ) {
                            resolutionUrl = path.squash( docUrl.href );
                        } else {
                            resolutionUrl = docUrl.href;
                        }
                    }
                }

                // If the url is anything but a simple string, remove any preceding hash
                // eg #foo/bar -> foo/bar
                //    #foo -> #foo
                cleanedUrl = isPath ? path.stripHash( url ) : url;

                // If the url is a full url with a hash check if the parsed hash is a path
                // if it is, strip the #, and use it otherwise continue without change
                cleanedUrl = path.isPath( uri.hash ) ? path.stripHash( uri.hash ) : cleanedUrl;

                // Split the UI State keys off the href
                stateIndex = cleanedUrl.indexOf( this.uiStateKey );

                // store the ui state keys for use
                if ( stateIndex > -1 ) {
                    uiState = cleanedUrl.slice( stateIndex );
                    cleanedUrl = cleanedUrl.slice( 0, stateIndex );
                }

                // make the cleanedUrl absolute relative to the resolution url
                href = path.makeUrlAbsolute( cleanedUrl, resolutionUrl );

                // grab the search from the resolved url since parsing from
                // the passed url may not yield the correct result
                search = this.parseUrl( href ).search;

                // TODO all this crap is terrible, clean it up
                if ( isPath ) {
                    // reject the hash if it's a path or it's just a dialog key
                    if ( path.isPath( preservedHash ) || preservedHash.replace("#", "").indexOf( this.uiStateKey ) === 0) {
                        preservedHash = "";
                    }

                    // Append the UI State keys where it exists and it's been removed
                    // from the url
                    if ( uiState && preservedHash.indexOf( this.uiStateKey ) === -1) {
                        preservedHash += uiState;
                    }

                    // make sure that pound is on the front of the hash
                    if ( preservedHash.indexOf( "#" ) === -1 && preservedHash !== "" ) {
                        preservedHash = "#" + preservedHash;
                    }

                    // reconstruct each of the pieces with the new search string and hash
                    href = path.parseUrl( href );
                    href = href.protocol + href.doubleSlash + href.host + href.pathname + search +
                        preservedHash;
                } else {
                    href += href.indexOf( "#" ) > -1 ? uiState : "#" + uiState;
                }

                return href;
            },

            isPreservableHash: function( hash ) {
                return hash.replace( "#", "" ).indexOf( this.uiStateKey ) === 0;
            },

            // Escape weird characters in the hash if it is to be used as a selector
            hashToSelector: function( hash ) {
                var hasHash = ( hash.substring( 0, 1 ) === "#" );
                if ( hasHash ) {
                    hash = hash.substring( 1 );
                }
                return ( hasHash ? "#" : "" ) + hash.replace( /([!"#$%&'()*+,./:;<=>?@[\]^`{|}~])/g, "\\$1" );
            },

            // return the substring of a filepath before the dialogHashKey, for making a server
            // request
            getFilePath: function( path ) {
                return path && path.split( dialogHashKey )[0];
            },

            // check if the specified url refers to the first page in the main
            // application document.
            isFirstPageUrl: function( url ) {
                // We only deal with absolute paths.
                var u = path.parseUrl( path.makeUrlAbsolute( url, this.documentBase ) ),

                    // Does the url have the same path as the document?
                    samePath = u.hrefNoHash === this.documentUrl.hrefNoHash ||
                        ( this.documentBaseDiffers &&
                            u.hrefNoHash === this.documentBase.hrefNoHash ),

                    // Get the first page element.
                    fp = $.mobile.firstPage,

                    // Get the id of the first page element if it has one.
                    fpId = fp && fp[0] ? fp[0].id : undefined;

                // The url refers to the first page if the path matches the document and
                // it either has no hash value, or the hash is exactly equal to the id
                // of the first page element.
                return samePath &&
                    ( !u.hash ||
                        u.hash === "#" ||
                        ( fpId && u.hash.replace( /^#/, "" ) === fpId ) );
            },

            // Some embedded browsers, like the web view in Phone Gap, allow
            // cross-domain XHR requests if the document doing the request was loaded
            // via the file:// protocol. This is usually to allow the application to
            // "phone home" and fetch app specific data. We normally let the browser
            // handle external/cross-domain urls, but if the allowCrossDomainPages
            // option is true, we will allow cross-domain http/https requests to go
            // through our page loading logic.
            isPermittedCrossDomainRequest: function( docUrl, reqUrl ) {
                return $.mobile.allowCrossDomainPages &&
                    (docUrl.protocol === "file:" || docUrl.protocol === "content:") &&
                    reqUrl.search( /^https?:/ ) !== -1;
            }
        };

        path.documentUrl = path.parseLocation();

        $base = $( "head" ).find( "base" );

        path.documentBase = $base.length ?
            path.parseUrl( path.makeUrlAbsolute( $base.attr( "href" ), path.documentUrl.href ) ) :
            path.documentUrl;

        path.documentBaseDiffers = (path.documentUrl.hrefNoHash !== path.documentBase.hrefNoHash);

        //return the original document base url
        path.getDocumentBase = function( asParsedObject ) {
            return asParsedObject ? $.extend( {}, path.documentBase ) : path.documentBase.href;
        };

        // DEPRECATED as of 1.4.0 - remove in 1.5.0
        $.extend( $.mobile, {

            //return the original document url
            getDocumentUrl: path.getDocumentUrl,

            //return the original document base url
            getDocumentBase: path.getDocumentBase
        });
})( jQuery );



(function( $, undefined ) {
    $.mobile.History = function( stack, index ) {
        this.stack = stack || [];
        this.activeIndex = index || 0;
    };

    $.extend($.mobile.History.prototype, {
        getActive: function() {
            return this.stack[ this.activeIndex ];
        },

        getLast: function() {
            return this.stack[ this.previousIndex ];
        },

        getNext: function() {
            return this.stack[ this.activeIndex + 1 ];
        },

        getPrev: function() {
            return this.stack[ this.activeIndex - 1 ];
        },

        // addNew is used whenever a new page is added
        add: function( url, data ) {
            data = data || {};

            //if there's forward history, wipe it
            if ( this.getNext() ) {
                this.clearForward();
            }

            // if the hash is included in the data make sure the shape
            // is consistent for comparison
            if ( data.hash && data.hash.indexOf( "#" ) === -1) {
                data.hash = "#" + data.hash;
            }

            data.url = url;
            this.stack.push( data );
            this.activeIndex = this.stack.length - 1;
        },

        //wipe urls ahead of active index
        clearForward: function() {
            this.stack = this.stack.slice( 0, this.activeIndex + 1 );
        },

        find: function( url, stack, earlyReturn ) {
            stack = stack || this.stack;

            var entry, i, length = stack.length, index;

            for ( i = 0; i < length; i++ ) {
                entry = stack[i];

                if ( decodeURIComponent(url) === decodeURIComponent(entry.url) ||
                    decodeURIComponent(url) === decodeURIComponent(entry.hash) ) {
                    index = i;

                    if ( earlyReturn ) {
                        return index;
                    }
                }
            }

            return index;
        },

        closest: function( url ) {
            var closest, a = this.activeIndex;

            // First, take the slice of the history stack before the current index and search
            // for a url match. If one is found, we'll avoid avoid looking through forward history
            // NOTE the preference for backward history movement is driven by the fact that
            //      most mobile browsers only have a dedicated back button, and users rarely use
            //      the forward button in desktop browser anyhow
            closest = this.find( url, this.stack.slice(0, a) );

            // If nothing was found in backward history check forward. The `true`
            // value passed as the third parameter causes the find method to break
            // on the first match in the forward history slice. The starting index
            // of the slice must then be added to the result to get the element index
            // in the original history stack :( :(
            //
            // TODO this is hyper confusing and should be cleaned up (ugh so bad)
            if ( closest === undefined ) {
                closest = this.find( url, this.stack.slice(a), true );
                closest = closest === undefined ? closest : closest + a;
            }

            return closest;
        },

        direct: function( opts ) {
            var newActiveIndex = this.closest( opts.url ), a = this.activeIndex;

            // save new page index, null check to prevent falsey 0 result
            // record the previous index for reference
            if ( newActiveIndex !== undefined ) {
                this.activeIndex = newActiveIndex;
                this.previousIndex = a;
            }

            // invoke callbacks where appropriate
            //
            // TODO this is also convoluted and confusing
            if ( newActiveIndex < a ) {
                ( opts.present || opts.back || $.noop )( this.getActive(), "back" );
            } else if ( newActiveIndex > a ) {
                ( opts.present || opts.forward || $.noop )( this.getActive(), "forward" );
            } else if ( newActiveIndex === undefined && opts.missing ) {
                opts.missing( this.getActive() );
            }
        }
    });
})( jQuery );



(function( $, undefined ) {
    var path = $.mobile.path,
        initialHref = location.href;

    $.mobile.Navigator = function( history ) {
        this.history = history;
        this.ignoreInitialHashChange = true;

        $.mobile.window.bind({
            "popstate.history": $.proxy( this.popstate, this ),
            "hashchange.history": $.proxy( this.hashchange, this )
        });
    };

    $.extend($.mobile.Navigator.prototype, {
        squash: function( url, data ) {
            var state, href, hash = path.isPath(url) ? path.stripHash(url) : url;

            href = path.squash( url );

            // make sure to provide this information when it isn't explicitly set in the
            // data object that was passed to the squash method
            state = $.extend({
                hash: hash,
                url: href
            }, data);

            // replace the current url with the new href and store the state
            // Note that in some cases we might be replacing an url with the
            // same url. We do this anyways because we need to make sure that
            // all of our history entries have a state object associated with
            // them. This allows us to work around the case where $.mobile.back()
            // is called to transition from an external page to an embedded page.
            // In that particular case, a hashchange event is *NOT* generated by the browser.
            // Ensuring each history entry has a state object means that onPopState()
            // will always trigger our hashchange callback even when a hashchange event
            // is not fired.
            window.history.replaceState( state, state.title || document.title, href );

            return state;
        },

        hash: function( url, href ) {
            var parsed, loc, hash, resolved;

            // Grab the hash for recording. If the passed url is a path
            // we used the parsed version of the squashed url to reconstruct,
            // otherwise we assume it's a hash and store it directly
            parsed = path.parseUrl( url );
            loc = path.parseLocation();

            if ( loc.pathname + loc.search === parsed.pathname + parsed.search ) {
                // If the pathname and search of the passed url is identical to the current loc
                // then we must use the hash. Otherwise there will be no event
                // eg, url = "/foo/bar?baz#bang", location.href = "http://example.com/foo/bar?baz"
                hash = parsed.hash ? parsed.hash : parsed.pathname + parsed.search;
            } else if ( path.isPath(url) ) {
                resolved = path.parseUrl( href );
                // If the passed url is a path, make it domain relative and remove any trailing hash
                hash = resolved.pathname + resolved.search + (path.isPreservableHash( resolved.hash )? resolved.hash.replace( "#", "" ) : "");
            } else {
                hash = url;
            }

            return hash;
        },

        // TODO reconsider name
        go: function( url, data, noEvents ) {
            var state, href, hash, popstateEvent,
                isPopStateEvent = $.event.special.navigate.isPushStateEnabled();

            // Get the url as it would look squashed on to the current resolution url
            href = path.squash( url );

            // sort out what the hash sould be from the url
            hash = this.hash( url, href );

            // Here we prevent the next hash change or popstate event from doing any
            // history management. In the case of hashchange we don't swallow it
            // if there will be no hashchange fired (since that won't reset the value)
            // and will swallow the following hashchange
            if ( noEvents && hash !== path.stripHash(path.parseLocation().hash) ) {
                this.preventNextHashChange = noEvents;
            }

            // IMPORTANT in the case where popstate is supported the event will be triggered
            //      directly, stopping further execution - ie, interupting the flow of this
            //      method call to fire bindings at this expression. Below the navigate method
            //      there is a binding to catch this event and stop its propagation.
            //
            //      We then trigger a new popstate event on the window with a null state
            //      so that the navigate events can conclude their work properly
            //
            // if the url is a path we want to preserve the query params that are available on
            // the current url.
            this.preventHashAssignPopState = true;
            window.location.hash = hash;

            // If popstate is enabled and the browser triggers `popstate` events when the hash
            // is set (this often happens immediately in browsers like Chrome), then the
            // this flag will be set to false already. If it's a browser that does not trigger
            // a `popstate` on hash assignement or `replaceState` then we need avoid the branch
            // that swallows the event created by the popstate generated by the hash assignment
            // At the time of this writing this happens with Opera 12 and some version of IE
            this.preventHashAssignPopState = false;

            state = $.extend({
                url: href,
                hash: hash,
                title: document.title
            }, data);

            if ( isPopStateEvent ) {
                popstateEvent = new $.Event( "popstate" );
                popstateEvent.originalEvent = {
                    type: "popstate",
                    state: null
                };

                this.squash( url, state );

                // Trigger a new faux popstate event to replace the one that we
                // caught that was triggered by the hash setting above.
                if ( !noEvents ) {
                    this.ignorePopState = true;
                    $.mobile.window.trigger( popstateEvent );
                }
            }

            // record the history entry so that the information can be included
            // in hashchange event driven navigate events in a similar fashion to
            // the state that's provided by popstate
            this.history.add( state.url, state );
        },

        // This binding is intended to catch the popstate events that are fired
        // when execution of the `$.navigate` method stops at window.location.hash = url;
        // and completely prevent them from propagating. The popstate event will then be
        // retriggered after execution resumes
        //
        // TODO grab the original event here and use it for the synthetic event in the
        //      second half of the navigate execution that will follow this binding
        popstate: function( event ) {
            var hash, state;

            // Partly to support our test suite which manually alters the support
            // value to test hashchange. Partly to prevent all around weirdness
            if ( !$.event.special.navigate.isPushStateEnabled() ) {
                return;
            }

            // If this is the popstate triggered by the actual alteration of the hash
            // prevent it completely. History is tracked manually
            if ( this.preventHashAssignPopState ) {
                this.preventHashAssignPopState = false;
                event.stopImmediatePropagation();
                return;
            }

            // if this is the popstate triggered after the `replaceState` call in the go
            // method, then simply ignore it. The history entry has already been captured
            if ( this.ignorePopState ) {
                this.ignorePopState = false;
                return;
            }

            // If there is no state, and the history stack length is one were
            // probably getting the page load popstate fired by browsers like chrome
            // avoid it and set the one time flag to false.
            // TODO: Do we really need all these conditions? Comparing location hrefs
            // should be sufficient.
            if ( !event.originalEvent.state &&
                this.history.stack.length === 1 &&
                this.ignoreInitialHashChange ) {
                this.ignoreInitialHashChange = false;

                if ( location.href === initialHref ) {
                    event.preventDefault();
                    return;
                }
            }

            // account for direct manipulation of the hash. That is, we will receive a popstate
            // when the hash is changed by assignment, and it won't have a state associated. We
            // then need to squash the hash. See below for handling of hash assignment that
            // matches an existing history entry
            // TODO it might be better to only add to the history stack
            //      when the hash is adjacent to the active history entry
            hash = path.parseLocation().hash;
            if ( !event.originalEvent.state && hash ) {
                // squash the hash that's been assigned on the URL with replaceState
                // also grab the resulting state object for storage
                state = this.squash( hash );

                // record the new hash as an additional history entry
                // to match the browser's treatment of hash assignment
                this.history.add( state.url, state );

                // pass the newly created state information
                // along with the event
                event.historyState = state;

                // do not alter history, we've added a new history entry
                // so we know where we are
                return;
            }

            // If all else fails this is a popstate that comes from the back or forward buttons
            // make sure to set the state of our history stack properly, and record the directionality
            this.history.direct({
                url: (event.originalEvent.state || {}).url || hash,

                // When the url is either forward or backward in history include the entry
                // as data on the event object for merging as data in the navigate event
                present: function( historyEntry, direction ) {
                    // make sure to create a new object to pass down as the navigate event data
                    event.historyState = $.extend({}, historyEntry);
                    event.historyState.direction = direction;
                }
            });
        },

        // NOTE must bind before `navigate` special event hashchange binding otherwise the
        //      navigation data won't be attached to the hashchange event in time for those
        //      bindings to attach it to the `navigate` special event
        // TODO add a check here that `hashchange.navigate` is bound already otherwise it's
        //      broken (exception?)
        hashchange: function( event ) {
            var history, hash;

            // If hashchange listening is explicitly disabled or pushstate is supported
            // avoid making use of the hashchange handler.
            if (!$.event.special.navigate.isHashChangeEnabled() ||
                $.event.special.navigate.isPushStateEnabled() ) {
                return;
            }

            // On occasion explicitly want to prevent the next hash from propogating because we only
            // with to alter the url to represent the new state do so here
            if ( this.preventNextHashChange ) {
                this.preventNextHashChange = false;
                event.stopImmediatePropagation();
                return;
            }

            history = this.history;
            hash = path.parseLocation().hash;

            // If this is a hashchange caused by the back or forward button
            // make sure to set the state of our history stack properly
            this.history.direct({
                url: hash,

                // When the url is either forward or backward in history include the entry
                // as data on the event object for merging as data in the navigate event
                present: function( historyEntry, direction ) {
                    // make sure to create a new object to pass down as the navigate event data
                    event.hashchangeState = $.extend({}, historyEntry);
                    event.hashchangeState.direction = direction;
                },

                // When we don't find a hash in our history clearly we're aiming to go there
                // record the entry as new for future traversal
                //
                // NOTE it's not entirely clear that this is the right thing to do given that we
                //      can't know the users intention. It might be better to explicitly _not_
                //      support location.hash assignment in preference to $.navigate calls
                // TODO first arg to add should be the href, but it causes issues in identifying
                //      embeded pages
                missing: function() {
                    history.add( hash, {
                        hash: hash,
                        title: document.title
                    });
                }
            });
        }
    });
})( jQuery );



(function( $, undefined ) {
    // TODO consider queueing navigation activity until previous activities have completed
    //      so that end users don't have to think about it. Punting for now
    // TODO !! move the event bindings into callbacks on the navigate event
    $.mobile.navigate = function( url, data, noEvents ) {
        $.mobile.navigate.navigator.go( url, data, noEvents );
    };

    // expose the history on the navigate method in anticipation of full integration with
    // existing navigation functionalty that is tightly coupled to the history information
    $.mobile.navigate.history = new $.mobile.History();

    // instantiate an instance of the navigator for use within the $.navigate method
    $.mobile.navigate.navigator = new $.mobile.Navigator( $.mobile.navigate.history );

    var loc = $.mobile.path.parseLocation();
    $.mobile.navigate.history.add( loc.href, {hash: loc.hash} );
})( jQuery );


(function( $, undefined ) {
    var props = {
            "animation": {},
            "transition": {}
        },
        testElement = document.createElement( "a" ),
        vendorPrefixes = [ "", "webkit-", "moz-", "o-" ];

    $.each( [ "animation", "transition" ], function( i, test ) {

        // Get correct name for test
        var testName = ( i === 0 ) ? test + "-" + "name" : test;

        $.each( vendorPrefixes, function( j, prefix ) {
            if ( testElement.style[ $.camelCase( prefix + testName ) ] !== undefined ) {
                 props[ test ][ "prefix" ] = prefix;
                return false;
            }
        });

        // Set event and duration names for later use
        props[ test ][ "duration" ] =
            $.camelCase( props[ test ][ "prefix" ] + test + "-" + "duration" );
        props[ test ][ "event" ] =
            $.camelCase( props[ test ][ "prefix" ] + test + "-" + "end" );

        // All lower case if not a vendor prop
        if ( props[ test ][ "prefix" ] === "" ) {
            props[ test ][ "event" ] = props[ test ][ "event" ].toLowerCase();
        }
    });

    // If a valid prefix was found then the it is supported by the browser
    $.support.cssTransitions = ( props[ "transition" ][ "prefix" ] !== undefined );
    $.support.cssAnimations = ( props[ "animation" ][ "prefix" ] !== undefined );

    // Remove the testElement
    $( testElement ).remove();

    // Animation complete callback
    $.fn.animationComplete = function( callback, type, fallbackTime ) {
        var timer, duration,
            that = this,
            eventBinding = function() {

                // Clear the timer so we don't call callback twice
                clearTimeout( timer );
                callback.apply( this, arguments );
            },
            animationType = ( !type || type === "animation" ) ? "animation" : "transition";

        // Make sure selected type is supported by browser
        if ( ( $.support.cssTransitions && animationType === "transition" ) ||
            ( $.support.cssAnimations && animationType === "animation" ) ) {

            // If a fallback time was not passed set one
            if ( fallbackTime === undefined ) {

                // Make sure the was not bound to document before checking .css
                if ( $( this ).context !== document ) {

                    // Parse the durration since its in second multiple by 1000 for milliseconds
                    // Multiply by 3 to make sure we give the animation plenty of time.
                    duration = parseFloat(
                        $( this ).css( props[ animationType ].duration )
                    ) * 3000;
                }

                // If we could not read a duration use the default
                if ( duration === 0 || duration === undefined || isNaN( duration ) ) {
                    duration = $.fn.animationComplete.defaultDuration;
                }
            }

            // Sets up the fallback if event never comes
            timer = setTimeout( function() {
                $( that ).off( props[ animationType ].event, eventBinding );
                callback.apply( that );
            }, duration );

            // Bind the event
            return $( this ).one( props[ animationType ].event, eventBinding );
        } else {

            // CSS animation / transitions not supported
            // Defer execution for consistency between webkit/non webkit
            setTimeout( $.proxy( callback, this ), 0 );
            return $( this );
        }
    };

    // Allow default callback to be configured on mobileInit
    $.fn.animationComplete.defaultDuration = 1000;
})( jQuery );

// This plugin is an experiment for abstracting away the touch and mouse
// events so that developers don't have to worry about which method of input
// the device their document is loaded on supports.
//
// The idea here is to allow the developer to register listeners for the
// basic mouse events, such as mousedown, mousemove, mouseup, and click,
// and the plugin will take care of registering the correct listeners
// behind the scenes to invoke the listener at the fastest possible time
// for that device, while still retaining the order of event firing in
// the traditional mouse environment, should multiple handlers be registered
// on the same element for different events.
//
// The current version exposes the following virtual events to jQuery bind methods:
// "vmouseover vmousedown vmousemove vmouseup vclick vmouseout vmousecancel"

(function( $, window, document, undefined ) {

var dataPropertyName = "virtualMouseBindings",
    touchTargetPropertyName = "virtualTouchID",
    virtualEventNames = "vmouseover vmousedown vmousemove vmouseup vclick vmouseout vmousecancel".split( " " ),
    touchEventProps = "clientX clientY pageX pageY screenX screenY".split( " " ),
    mouseHookProps = $.event.mouseHooks ? $.event.mouseHooks.props : [],
    mouseEventProps = $.event.props.concat( mouseHookProps ),
    activeDocHandlers = {},
    resetTimerID = 0,
    startX = 0,
    startY = 0,
    didScroll = false,
    clickBlockList = [],
    blockMouseTriggers = false,
    blockTouchTriggers = false,
    eventCaptureSupported = "addEventListener" in document,
    $document = $( document ),
    nextTouchID = 1,
    lastTouchID = 0, threshold,
    i;

$.vmouse = {
    moveDistanceThreshold: 10,
    clickDistanceThreshold: 10,
    resetTimerDuration: 1500
};

function getNativeEvent( event ) {

    while ( event && typeof event.originalEvent !== "undefined" ) {
        event = event.originalEvent;
    }
    return event;
}

function createVirtualEvent( event, eventType ) {

    var t = event.type,
        oe, props, ne, prop, ct, touch, i, j, len;

    event = $.Event( event );
    event.type = eventType;

    oe = event.originalEvent;
    props = $.event.props;

    // addresses separation of $.event.props in to $.event.mouseHook.props and Issue 3280
    // https://github.com/jquery/jquery-mobile/issues/3280
    if ( t.search( /^(mouse|click)/ ) > -1 ) {
        props = mouseEventProps;
    }

    // copy original event properties over to the new event
    // this would happen if we could call $.event.fix instead of $.Event
    // but we don't have a way to force an event to be fixed multiple times
    if ( oe ) {
        for ( i = props.length, prop; i; ) {
            prop = props[ --i ];
            event[ prop ] = oe[ prop ];
        }
    }

    // make sure that if the mouse and click virtual events are generated
    // without a .which one is defined
    if ( t.search(/mouse(down|up)|click/) > -1 && !event.which ) {
        event.which = 1;
    }

    if ( t.search(/^touch/) !== -1 ) {
        ne = getNativeEvent( oe );
        t = ne.touches;
        ct = ne.changedTouches;
        touch = ( t && t.length ) ? t[0] : ( ( ct && ct.length ) ? ct[ 0 ] : undefined );

        if ( touch ) {
            for ( j = 0, len = touchEventProps.length; j < len; j++) {
                prop = touchEventProps[ j ];
                event[ prop ] = touch[ prop ];
            }
        }
    }

    return event;
}

function getVirtualBindingFlags( element ) {

    var flags = {},
        b, k;

    while ( element ) {

        b = $.data( element, dataPropertyName );

        for (  k in b ) {
            if ( b[ k ] ) {
                flags[ k ] = flags.hasVirtualBinding = true;
            }
        }
        element = element.parentNode;
    }
    return flags;
}

function getClosestElementWithVirtualBinding( element, eventType ) {
    var b;
    while ( element ) {

        b = $.data( element, dataPropertyName );

        if ( b && ( !eventType || b[ eventType ] ) ) {
            return element;
        }
        element = element.parentNode;
    }
    return null;
}

function enableTouchBindings() {
    blockTouchTriggers = false;
}

function disableTouchBindings() {
    blockTouchTriggers = true;
}

function enableMouseBindings() {
    lastTouchID = 0;
    clickBlockList.length = 0;
    blockMouseTriggers = false;

    // When mouse bindings are enabled, our
    // touch bindings are disabled.
    disableTouchBindings();
}

function disableMouseBindings() {
    // When mouse bindings are disabled, our
    // touch bindings are enabled.
    enableTouchBindings();
}

function startResetTimer() {
    clearResetTimer();
    resetTimerID = setTimeout( function() {
        resetTimerID = 0;
        enableMouseBindings();
    }, $.vmouse.resetTimerDuration );
}

function clearResetTimer() {
    if ( resetTimerID ) {
        clearTimeout( resetTimerID );
        resetTimerID = 0;
    }
}

function triggerVirtualEvent( eventType, event, flags ) {
    var ve;

    if ( ( flags && flags[ eventType ] ) ||
                ( !flags && getClosestElementWithVirtualBinding( event.target, eventType ) ) ) {

        ve = createVirtualEvent( event, eventType );

        $( event.target).trigger( ve );
    }

    return ve;
}

function mouseEventCallback( event ) {
    var touchID = $.data( event.target, touchTargetPropertyName ),
        ve;

    if ( !blockMouseTriggers && ( !lastTouchID || lastTouchID !== touchID ) ) {
        ve = triggerVirtualEvent( "v" + event.type, event );
        if ( ve ) {
            if ( ve.isDefaultPrevented() ) {
                event.preventDefault();
            }
            if ( ve.isPropagationStopped() ) {
                event.stopPropagation();
            }
            if ( ve.isImmediatePropagationStopped() ) {
                event.stopImmediatePropagation();
            }
        }
    }
}

function handleTouchStart( event ) {

    var touches = getNativeEvent( event ).touches,
        target, flags, t;

    if ( touches && touches.length === 1 ) {

        target = event.target;
        flags = getVirtualBindingFlags( target );

        if ( flags.hasVirtualBinding ) {

            lastTouchID = nextTouchID++;
            $.data( target, touchTargetPropertyName, lastTouchID );

            clearResetTimer();

            disableMouseBindings();
            didScroll = false;

            t = getNativeEvent( event ).touches[ 0 ];
            startX = t.pageX;
            startY = t.pageY;

            triggerVirtualEvent( "vmouseover", event, flags );
            triggerVirtualEvent( "vmousedown", event, flags );
        }
    }
}

function handleScroll( event ) {
    if ( blockTouchTriggers ) {
        return;
    }

    if ( !didScroll ) {
        triggerVirtualEvent( "vmousecancel", event, getVirtualBindingFlags( event.target ) );
    }

    didScroll = true;
    startResetTimer();
}

function handleTouchMove( event ) {
    if ( blockTouchTriggers ) {
        return;
    }

    var t = getNativeEvent( event ).touches[ 0 ],
        didCancel = didScroll,
        moveThreshold = $.vmouse.moveDistanceThreshold,
        flags = getVirtualBindingFlags( event.target );

        didScroll = didScroll ||
            ( Math.abs( t.pageX - startX ) > moveThreshold ||
                Math.abs( t.pageY - startY ) > moveThreshold );

    if ( didScroll && !didCancel ) {
        triggerVirtualEvent( "vmousecancel", event, flags );
    }

    triggerVirtualEvent( "vmousemove", event, flags );
    startResetTimer();
}

function handleTouchEnd( event ) {
    if ( blockTouchTriggers ) {
        return;
    }

    disableTouchBindings();

    var flags = getVirtualBindingFlags( event.target ),
        ve, t;
    triggerVirtualEvent( "vmouseup", event, flags );

    if ( !didScroll ) {
        ve = triggerVirtualEvent( "vclick", event, flags );
        if ( ve && ve.isDefaultPrevented() ) {
            // The target of the mouse events that follow the touchend
            // event don't necessarily match the target used during the
            // touch. This means we need to rely on coordinates for blocking
            // any click that is generated.
            t = getNativeEvent( event ).changedTouches[ 0 ];
            clickBlockList.push({
                touchID: lastTouchID,
                x: t.clientX,
                y: t.clientY
            });

            // Prevent any mouse events that follow from triggering
            // virtual event notifications.
            blockMouseTriggers = true;
        }
    }
    triggerVirtualEvent( "vmouseout", event, flags);
    didScroll = false;

    startResetTimer();
}

function hasVirtualBindings( ele ) {
    var bindings = $.data( ele, dataPropertyName ),
        k;

    if ( bindings ) {
        for ( k in bindings ) {
            if ( bindings[ k ] ) {
                return true;
            }
        }
    }
    return false;
}

function dummyMouseHandler() {}

function getSpecialEventObject( eventType ) {
    var realType = eventType.substr( 1 );

    return {
        setup: function(/* data, namespace */) {
            // If this is the first virtual mouse binding for this element,
            // add a bindings object to its data.

            if ( !hasVirtualBindings( this ) ) {
                $.data( this, dataPropertyName, {} );
            }

            // If setup is called, we know it is the first binding for this
            // eventType, so initialize the count for the eventType to zero.
            var bindings = $.data( this, dataPropertyName );
            bindings[ eventType ] = true;

            // If this is the first virtual mouse event for this type,
            // register a global handler on the document.

            activeDocHandlers[ eventType ] = ( activeDocHandlers[ eventType ] || 0 ) + 1;

            if ( activeDocHandlers[ eventType ] === 1 ) {
                $document.bind( realType, mouseEventCallback );
            }

            // Some browsers, like Opera Mini, won't dispatch mouse/click events
            // for elements unless they actually have handlers registered on them.
            // To get around this, we register dummy handlers on the elements.

            $( this ).bind( realType, dummyMouseHandler );

            // For now, if event capture is not supported, we rely on mouse handlers.
            if ( eventCaptureSupported ) {
                // If this is the first virtual mouse binding for the document,
                // register our touchstart handler on the document.

                activeDocHandlers[ "touchstart" ] = ( activeDocHandlers[ "touchstart" ] || 0) + 1;

                if ( activeDocHandlers[ "touchstart" ] === 1 ) {
                    $document.bind( "touchstart", handleTouchStart )
                        .bind( "touchend", handleTouchEnd )

                        // On touch platforms, touching the screen and then dragging your finger
                        // causes the window content to scroll after some distance threshold is
                        // exceeded. On these platforms, a scroll prevents a click event from being
                        // dispatched, and on some platforms, even the touchend is suppressed. To
                        // mimic the suppression of the click event, we need to watch for a scroll
                        // event. Unfortunately, some platforms like iOS don't dispatch scroll
                        // events until *AFTER* the user lifts their finger (touchend). This means
                        // we need to watch both scroll and touchmove events to figure out whether
                        // or not a scroll happenens before the touchend event is fired.

                        .bind( "touchmove", handleTouchMove )
                        .bind( "scroll", handleScroll );
                }
            }
        },

        teardown: function(/* data, namespace */) {
            // If this is the last virtual binding for this eventType,
            // remove its global handler from the document.

            --activeDocHandlers[ eventType ];

            if ( !activeDocHandlers[ eventType ] ) {
                $document.unbind( realType, mouseEventCallback );
            }

            if ( eventCaptureSupported ) {
                // If this is the last virtual mouse binding in existence,
                // remove our document touchstart listener.

                --activeDocHandlers[ "touchstart" ];

                if ( !activeDocHandlers[ "touchstart" ] ) {
                    $document.unbind( "touchstart", handleTouchStart )
                        .unbind( "touchmove", handleTouchMove )
                        .unbind( "touchend", handleTouchEnd )
                        .unbind( "scroll", handleScroll );
                }
            }

            var $this = $( this ),
                bindings = $.data( this, dataPropertyName );

            // teardown may be called when an element was
            // removed from the DOM. If this is the case,
            // jQuery core may have already stripped the element
            // of any data bindings so we need to check it before
            // using it.
            if ( bindings ) {
                bindings[ eventType ] = false;
            }

            // Unregister the dummy event handler.

            $this.unbind( realType, dummyMouseHandler );

            // If this is the last virtual mouse binding on the
            // element, remove the binding data from the element.

            if ( !hasVirtualBindings( this ) ) {
                $this.removeData( dataPropertyName );
            }
        }
    };
}

// Expose our custom events to the jQuery bind/unbind mechanism.

for ( i = 0; i < virtualEventNames.length; i++ ) {
    $.event.special[ virtualEventNames[ i ] ] = getSpecialEventObject( virtualEventNames[ i ] );
}

// Add a capture click handler to block clicks.
// Note that we require event capture support for this so if the device
// doesn't support it, we punt for now and rely solely on mouse events.
if ( eventCaptureSupported ) {
    document.addEventListener( "click", function( e ) {
        var cnt = clickBlockList.length,
            target = e.target,
            x, y, ele, i, o, touchID;

        if ( cnt ) {
            x = e.clientX;
            y = e.clientY;
            threshold = $.vmouse.clickDistanceThreshold;

            // The idea here is to run through the clickBlockList to see if
            // the current click event is in the proximity of one of our
            // vclick events that had preventDefault() called on it. If we find
            // one, then we block the click.
            //
            // Why do we have to rely on proximity?
            //
            // Because the target of the touch event that triggered the vclick
            // can be different from the target of the click event synthesized
            // by the browser. The target of a mouse/click event that is synthesized
            // from a touch event seems to be implementation specific. For example,
            // some browsers will fire mouse/click events for a link that is near
            // a touch event, even though the target of the touchstart/touchend event
            // says the user touched outside the link. Also, it seems that with most
            // browsers, the target of the mouse/click event is not calculated until the
            // time it is dispatched, so if you replace an element that you touched
            // with another element, the target of the mouse/click will be the new
            // element underneath that point.
            //
            // Aside from proximity, we also check to see if the target and any
            // of its ancestors were the ones that blocked a click. This is necessary
            // because of the strange mouse/click target calculation done in the
            // Android 2.1 browser, where if you click on an element, and there is a
            // mouse/click handler on one of its ancestors, the target will be the
            // innermost child of the touched element, even if that child is no where
            // near the point of touch.

            ele = target;

            while ( ele ) {
                for ( i = 0; i < cnt; i++ ) {
                    o = clickBlockList[ i ];
                    touchID = 0;

                    if ( ( ele === target && Math.abs( o.x - x ) < threshold && Math.abs( o.y - y ) < threshold ) ||
                                $.data( ele, touchTargetPropertyName ) === o.touchID ) {
                        // XXX: We may want to consider removing matches from the block list
                        //      instead of waiting for the reset timer to fire.
                        e.preventDefault();
                        e.stopPropagation();
                        return;
                    }
                }
                ele = ele.parentNode;
            }
        }
    }, true);
}
})( jQuery, window, document );


(function( $, window, undefined ) {
    var $document = $( document ),
        supportTouch = $.mobile.support.touch,
        scrollEvent = "touchmove scroll",
        touchStartEvent = supportTouch ? "touchstart" : "mousedown",
        touchStopEvent = supportTouch ? "touchend" : "mouseup",
        touchMoveEvent = supportTouch ? "touchmove" : "mousemove";

    // setup new event shortcuts
    $.each( ( "touchstart touchmove touchend " +
        "tap taphold " +
        "swipe swipeleft swiperight " +
        "scrollstart scrollstop" ).split( " " ), function( i, name ) {

        $.fn[ name ] = function( fn ) {
            return fn ? this.bind( name, fn ) : this.trigger( name );
        };

        // jQuery < 1.8
        if ( $.attrFn ) {
            $.attrFn[ name ] = true;
        }
    });

    function triggerCustomEvent( obj, eventType, event, bubble ) {
        var originalType = event.type;
        event.type = eventType;
        if ( bubble ) {
            $.event.trigger( event, undefined, obj );
        } else {
            $.event.dispatch.call( obj, event );
        }
        event.type = originalType;
    }

    // also handles scrollstop
    $.event.special.scrollstart = {

        enabled: true,
        setup: function() {

            var thisObject = this,
                $this = $( thisObject ),
                scrolling,
                timer;

            function trigger( event, state ) {
                scrolling = state;
                triggerCustomEvent( thisObject, scrolling ? "scrollstart" : "scrollstop", event );
            }

            // iPhone triggers scroll after a small delay; use touchmove instead
            $this.bind( scrollEvent, function( event ) {

                if ( !$.event.special.scrollstart.enabled ) {
                    return;
                }

                if ( !scrolling ) {
                    trigger( event, true );
                }

                clearTimeout( timer );
                timer = setTimeout( function() {
                    trigger( event, false );
                }, 50 );
            });
        },
        teardown: function() {
            $( this ).unbind( scrollEvent );
        }
    };

    // also handles taphold
    $.event.special.tap = {
        tapholdThreshold: 750,
        emitTapOnTaphold: true,
        setup: function() {
            var thisObject = this,
                $this = $( thisObject ),
                isTaphold = false;

            $this.bind( "vmousedown", function( event ) {
                isTaphold = false;
                if ( event.which && event.which !== 1 ) {
                    return false;
                }

                var origTarget = event.target,
                    timer;

                function clearTapTimer() {
                    clearTimeout( timer );
                }

                function clearTapHandlers() {
                    clearTapTimer();

                    $this.unbind( "vclick", clickHandler )
                        .unbind( "vmouseup", clearTapTimer );
                    $document.unbind( "vmousecancel", clearTapHandlers );
                }

                function clickHandler( event ) {
                    clearTapHandlers();

                    // ONLY trigger a 'tap' event if the start target is
                    // the same as the stop target.
                    if ( !isTaphold && origTarget === event.target ) {
                        triggerCustomEvent( thisObject, "tap", event );
                    } else if ( isTaphold ) {
                        event.preventDefault();
                    }
                }

                $this.bind( "vmouseup", clearTapTimer )
                    .bind( "vclick", clickHandler );
                $document.bind( "vmousecancel", clearTapHandlers );

                timer = setTimeout( function() {
                    if ( !$.event.special.tap.emitTapOnTaphold ) {
                        isTaphold = true;
                    }
                    triggerCustomEvent( thisObject, "taphold", $.Event( "taphold", { target: origTarget } ) );
                }, $.event.special.tap.tapholdThreshold );
            });
        },
        teardown: function() {
            $( this ).unbind( "vmousedown" ).unbind( "vclick" ).unbind( "vmouseup" );
            $document.unbind( "vmousecancel" );
        }
    };

    // Also handles swipeleft, swiperight
    $.event.special.swipe = {

        // More than this horizontal displacement, and we will suppress scrolling.
        scrollSupressionThreshold: 30,

        // More time than this, and it isn't a swipe.
        durationThreshold: 1000,

        // Swipe horizontal displacement must be more than this.
        horizontalDistanceThreshold: 30,

        // Swipe vertical displacement must be less than this.
        verticalDistanceThreshold: 30,

        getLocation: function ( event ) {
            var winPageX = window.pageXOffset,
                winPageY = window.pageYOffset,
                x = event.clientX,
                y = event.clientY;

            if ( event.pageY === 0 && Math.floor( y ) > Math.floor( event.pageY ) ||
                event.pageX === 0 && Math.floor( x ) > Math.floor( event.pageX ) ) {

                // iOS4 clientX/clientY have the value that should have been
                // in pageX/pageY. While pageX/page/ have the value 0
                x = x - winPageX;
                y = y - winPageY;
            } else if ( y < ( event.pageY - winPageY) || x < ( event.pageX - winPageX ) ) {

                // Some Android browsers have totally bogus values for clientX/Y
                // when scrolling/zooming a page. Detectable since clientX/clientY
                // should never be smaller than pageX/pageY minus page scroll
                x = event.pageX - winPageX;
                y = event.pageY - winPageY;
            }

            return {
                x: x,
                y: y
            };
        },

        start: function( event ) {
            var data = event.originalEvent.touches ?
                    event.originalEvent.touches[ 0 ] : event,
                location = $.event.special.swipe.getLocation( data );
            return {
                        time: ( new Date() ).getTime(),
                        coords: [ location.x, location.y ],
                        origin: $( event.target )
                    };
        },

        stop: function( event ) {
            var data = event.originalEvent.touches ?
                    event.originalEvent.touches[ 0 ] : event,
                location = $.event.special.swipe.getLocation( data );
            return {
                        time: ( new Date() ).getTime(),
                        coords: [ location.x, location.y ]
                    };
        },

        handleSwipe: function( start, stop, thisObject, origTarget ) {
            if ( stop.time - start.time < $.event.special.swipe.durationThreshold &&
                Math.abs( start.coords[ 0 ] - stop.coords[ 0 ] ) > $.event.special.swipe.horizontalDistanceThreshold &&
                Math.abs( start.coords[ 1 ] - stop.coords[ 1 ] ) < $.event.special.swipe.verticalDistanceThreshold ) {
                var direction = start.coords[0] > stop.coords[ 0 ] ? "swipeleft" : "swiperight";

                triggerCustomEvent( thisObject, "swipe", $.Event( "swipe", { target: origTarget, swipestart: start, swipestop: stop }), true );
                triggerCustomEvent( thisObject, direction,$.Event( direction, { target: origTarget, swipestart: start, swipestop: stop } ), true );
                return true;
            }
            return false;

        },

        // This serves as a flag to ensure that at most one swipe event event is
        // in work at any given time
        eventInProgress: false,

        setup: function() {
            var events,
                thisObject = this,
                $this = $( thisObject ),
                context = {};

            // Retrieve the events data for this element and add the swipe context
            events = $.data( this, "mobile-events" );
            if ( !events ) {
                events = { length: 0 };
                $.data( this, "mobile-events", events );
            }
            events.length++;
            events.swipe = context;

            context.start = function( event ) {

                // Bail if we're already working on a swipe event
                if ( $.event.special.swipe.eventInProgress ) {
                    return;
                }
                $.event.special.swipe.eventInProgress = true;

                var stop,
                    start = $.event.special.swipe.start( event ),
                    origTarget = event.target,
                    emitted = false;

                context.move = function( event ) {
                    if ( !start || event.isDefaultPrevented() ) {
                        return;
                    }

                    stop = $.event.special.swipe.stop( event );
                    if ( !emitted ) {
                        emitted = $.event.special.swipe.handleSwipe( start, stop, thisObject, origTarget );
                        if ( emitted ) {

                            // Reset the context to make way for the next swipe event
                            $.event.special.swipe.eventInProgress = false;
                        }
                    }
                    // prevent scrolling
                    if ( Math.abs( start.coords[ 0 ] - stop.coords[ 0 ] ) > $.event.special.swipe.scrollSupressionThreshold ) {
                        event.preventDefault();
                    }
                };

                context.stop = function() {
                        emitted = true;

                        // Reset the context to make way for the next swipe event
                        $.event.special.swipe.eventInProgress = false;
                        $document.off( touchMoveEvent, context.move );
                        context.move = null;
                };

                $document.on( touchMoveEvent, context.move )
                    .one( touchStopEvent, context.stop );
            };
            $this.on( touchStartEvent, context.start );
        },

        teardown: function() {
            var events, context;

            events = $.data( this, "mobile-events" );
            if ( events ) {
                context = events.swipe;
                delete events.swipe;
                events.length--;
                if ( events.length === 0 ) {
                    $.removeData( this, "mobile-events" );
                }
            }

            if ( context ) {
                if ( context.start ) {
                    $( this ).off( touchStartEvent, context.start );
                }
                if ( context.move ) {
                    $document.off( touchMoveEvent, context.move );
                }
                if ( context.stop ) {
                    $document.off( touchStopEvent, context.stop );
                }
            }
        }
    };
    $.each({
        scrollstop: "scrollstart",
        taphold: "tap",
        swipeleft: "swipe.left",
        swiperight: "swipe.right"
    }, function( event, sourceEvent ) {

        $.event.special[ event ] = {
            setup: function() {
                $( this ).bind( sourceEvent, $.noop );
            },
            teardown: function() {
                $( this ).unbind( sourceEvent );
            }
        };
    });

})( jQuery, this );


    // throttled resize event
    (function( $ ) {
        $.event.special.throttledresize = {
            setup: function() {
                $( this ).bind( "resize", handler );
            },
            teardown: function() {
                $( this ).unbind( "resize", handler );
            }
        };

        var throttle = 250,
            handler = function() {
                curr = ( new Date() ).getTime();
                diff = curr - lastCall;

                if ( diff >= throttle ) {

                    lastCall = curr;
                    $( this ).trigger( "throttledresize" );

                } else {

                    if ( heldCall ) {
                        clearTimeout( heldCall );
                    }

                    // Promise a held call will still execute
                    heldCall = setTimeout( handler, throttle - diff );
                }
            },
            lastCall = 0,
            heldCall,
            curr,
            diff;
    })( jQuery );


(function( $, window ) {
    var win = $( window ),
        event_name = "orientationchange",
        get_orientation,
        last_orientation,
        initial_orientation_is_landscape,
        initial_orientation_is_default,
        portrait_map = { "0": true, "180": true },
        ww, wh, landscape_threshold;

    // It seems that some device/browser vendors use window.orientation values 0 and 180 to
    // denote the "default" orientation. For iOS devices, and most other smart-phones tested,
    // the default orientation is always "portrait", but in some Android and RIM based tablets,
    // the default orientation is "landscape". The following code attempts to use the window
    // dimensions to figure out what the current orientation is, and then makes adjustments
    // to the to the portrait_map if necessary, so that we can properly decode the
    // window.orientation value whenever get_orientation() is called.
    //
    // Note that we used to use a media query to figure out what the orientation the browser
    // thinks it is in:
    //
    //     initial_orientation_is_landscape = $.mobile.media("all and (orientation: landscape)");
    //
    // but there was an iPhone/iPod Touch bug beginning with iOS 4.2, up through iOS 5.1,
    // where the browser *ALWAYS* applied the landscape media query. This bug does not
    // happen on iPad.

    if ( $.support.orientation ) {

        // Check the window width and height to figure out what the current orientation
        // of the device is at this moment. Note that we've initialized the portrait map
        // values to 0 and 180, *AND* we purposely check for landscape so that if we guess
        // wrong, , we default to the assumption that portrait is the default orientation.
        // We use a threshold check below because on some platforms like iOS, the iPhone
        // form-factor can report a larger width than height if the user turns on the
        // developer console. The actual threshold value is somewhat arbitrary, we just
        // need to make sure it is large enough to exclude the developer console case.

        ww = window.innerWidth || win.width();
        wh = window.innerHeight || win.height();
        landscape_threshold = 50;

        initial_orientation_is_landscape = ww > wh && ( ww - wh ) > landscape_threshold;

        // Now check to see if the current window.orientation is 0 or 180.
        initial_orientation_is_default = portrait_map[ window.orientation ];

        // If the initial orientation is landscape, but window.orientation reports 0 or 180, *OR*
        // if the initial orientation is portrait, but window.orientation reports 90 or -90, we
        // need to flip our portrait_map values because landscape is the default orientation for
        // this device/browser.
        if ( ( initial_orientation_is_landscape && initial_orientation_is_default ) || ( !initial_orientation_is_landscape && !initial_orientation_is_default ) ) {
            portrait_map = { "-90": true, "90": true };
        }
    }

    $.event.special.orientationchange = $.extend( {}, $.event.special.orientationchange, {
        setup: function() {
            // If the event is supported natively, return false so that jQuery
            // will bind to the event using DOM methods.
            if ( $.support.orientation && !$.event.special.orientationchange.disabled ) {
                return false;
            }

            // Get the current orientation to avoid initial double-triggering.
            last_orientation = get_orientation();

            // Because the orientationchange event doesn't exist, simulate the
            // event by testing window dimensions on resize.
            win.bind( "throttledresize", handler );
        },
        teardown: function() {
            // If the event is not supported natively, return false so that
            // jQuery will unbind the event using DOM methods.
            if ( $.support.orientation && !$.event.special.orientationchange.disabled ) {
                return false;
            }

            // Because the orientationchange event doesn't exist, unbind the
            // resize event handler.
            win.unbind( "throttledresize", handler );
        },
        add: function( handleObj ) {
            // Save a reference to the bound event handler.
            var old_handler = handleObj.handler;

            handleObj.handler = function( event ) {
                // Modify event object, adding the .orientation property.
                event.orientation = get_orientation();

                // Call the originally-bound event handler and return its result.
                return old_handler.apply( this, arguments );
            };
        }
    });

    // If the event is not supported natively, this handler will be bound to
    // the window resize event to simulate the orientationchange event.
    function handler() {
        // Get the current orientation.
        var orientation = get_orientation();

        if ( orientation !== last_orientation ) {
            // The orientation has changed, so trigger the orientationchange event.
            last_orientation = orientation;
            win.trigger( event_name );
        }
    }

    // Get the current page orientation. This method is exposed publicly, should it
    // be needed, as jQuery.event.special.orientationchange.orientation()
    $.event.special.orientationchange.orientation = get_orientation = function() {
        var isPortrait = true, elem = document.documentElement;

        // prefer window orientation to the calculation based on screensize as
        // the actual screen resize takes place before or after the orientation change event
        // has been fired depending on implementation (eg android 2.3 is before, iphone after).
        // More testing is required to determine if a more reliable method of determining the new screensize
        // is possible when orientationchange is fired. (eg, use media queries + element + opacity)
        if ( $.support.orientation ) {
            // if the window orientation registers as 0 or 180 degrees report
            // portrait, otherwise landscape
            isPortrait = portrait_map[ window.orientation ];
        } else {
            isPortrait = elem && elem.clientWidth / elem.clientHeight < 1.1;
        }

        return isPortrait ? "portrait" : "landscape";
    };

    $.fn[ event_name ] = function( fn ) {
        return fn ? this.bind( event_name, fn ) : this.trigger( event_name );
    };

    // jQuery < 1.8
    if ( $.attrFn ) {
        $.attrFn[ event_name ] = true;
    }

}( jQuery, this ));




(function( $, undefined ) {

    // existing base tag?
    var baseElement = $( "head" ).children( "base" ),

    // base element management, defined depending on dynamic base tag support
    // TODO move to external widget
    base = {

        // define base element, for use in routing asset urls that are referenced
        // in Ajax-requested markup
        element: ( baseElement.length ? baseElement :
            $( "<base>", { href: $.mobile.path.documentBase.hrefNoHash } ).prependTo( $( "head" ) ) ),

        linkSelector: "[src], link[href], a[rel='external'], :jqmData(ajax='false'), a[target]",

        // set the generated BASE element's href to a new page's base path
        set: function( href ) {

            // we should do nothing if the user wants to manage their url base
            // manually
            if ( !$.mobile.dynamicBaseEnabled ) {
                return;
            }

            // we should use the base tag if we can manipulate it dynamically
            if ( $.support.dynamicBaseTag ) {
                base.element.attr( "href",
                    $.mobile.path.makeUrlAbsolute( href, $.mobile.path.documentBase ) );
            }
        },

        rewrite: function( href, page ) {
            var newPath = $.mobile.path.get( href );

            page.find( base.linkSelector ).each(function( i, link ) {
                var thisAttr = $( link ).is( "[href]" ) ? "href" :
                    $( link ).is( "[src]" ) ? "src" : "action",
                theLocation = $.mobile.path.parseLocation(),
                thisUrl = $( link ).attr( thisAttr );

                // XXX_jblas: We need to fix this so that it removes the document
                //            base URL, and then prepends with the new page URL.
                // if full path exists and is same, chop it - helps IE out
                thisUrl = thisUrl.replace( theLocation.protocol + theLocation.doubleSlash +
                    theLocation.host + theLocation.pathname, "" );

                if ( !/^(\w+:|#|\/)/.test( thisUrl ) ) {
                    $( link ).attr( thisAttr, newPath + thisUrl );
                }
            });
        },

        // set the generated BASE element's href to a new page's base path
        reset: function(/* href */) {
            base.element.attr( "href", $.mobile.path.documentBase.hrefNoSearch );
        }
    };

    $.mobile.base = base;

})( jQuery );


(function( $, undefined ) {
$.mobile.widgets = {};

var originalWidget = $.widget,

    // Record the original, non-mobileinit-modified version of $.mobile.keepNative
    // so we can later determine whether someone has modified $.mobile.keepNative
    keepNativeFactoryDefault = $.mobile.keepNative;

$.widget = (function( orig ) {
    return function() {
        var constructor = orig.apply( this, arguments ),
            name = constructor.prototype.widgetName;

        constructor.initSelector = ( ( constructor.prototype.initSelector !== undefined ) ?
            constructor.prototype.initSelector : ":jqmData(role='" + name + "')" );

        $.mobile.widgets[ name ] = constructor;

        return constructor;
    };
})( $.widget );

// Make sure $.widget still has bridge and extend methods
$.extend( $.widget, originalWidget );

// For backcompat remove in 1.5
$.mobile.document.on( "create", function( event ) {
    $( event.target ).enhanceWithin();
});

$.widget( "mobile.page", {
    options: {
        theme: "a",
        domCache: false,

        // Deprecated in 1.4 remove in 1.5
        keepNativeDefault: $.mobile.keepNative,

        // Deprecated in 1.4 remove in 1.5
        contentTheme: null,
        enhanced: false
    },

    // DEPRECATED for > 1.4
    // TODO remove at 1.5
    _createWidget: function() {
        $.Widget.prototype._createWidget.apply( this, arguments );
        this._trigger( "init" );
    },

    _create: function() {
        // If false is returned by the callbacks do not create the page
        if ( this._trigger( "beforecreate" ) === false ) {
            return false;
        }

        if ( !this.options.enhanced ) {
            this._enhance();
        }

        this._on( this.element, {
            pagebeforehide: "removeContainerBackground",
            pagebeforeshow: "_handlePageBeforeShow"
        });

        this.element.enhanceWithin();
        // Dialog widget is deprecated in 1.4 remove this in 1.5
        if ( $.mobile.getAttribute( this.element[0], "role" ) === "dialog" && $.mobile.dialog ) {
            this.element.dialog();
        }
    },

    _enhance: function () {
        var attrPrefix = "data-" + $.mobile.ns,
            self = this;

        if ( this.options.role ) {
            this.element.attr( "data-" + $.mobile.ns + "role", this.options.role );
        }

        this.element
            .attr( "tabindex", "0" )
            .addClass( "ui-page ui-page-theme-" + this.options.theme );

        // Manipulation of content os Deprecated as of 1.4 remove in 1.5
        this.element.find( "[" + attrPrefix + "role='content']" ).each( function() {
            var $this = $( this ),
                theme = this.getAttribute( attrPrefix + "theme" ) || undefined;
                self.options.contentTheme = theme || self.options.contentTheme || ( self.options.dialog && self.options.theme ) || ( self.element.jqmData("role") === "dialog" &&  self.options.theme );
                $this.addClass( "ui-content" );
                if ( self.options.contentTheme ) {
                    $this.addClass( "ui-body-" + ( self.options.contentTheme ) );
                }
                // Add ARIA role
                $this.attr( "role", "main" ).addClass( "ui-content" );
        });
    },

    bindRemove: function( callback ) {
        var page = this.element;

        // when dom caching is not enabled or the page is embedded bind to remove the page on hide
        if ( !page.data( "mobile-page" ).options.domCache &&
            page.is( ":jqmData(external-page='true')" ) ) {

            // TODO use _on - that is, sort out why it doesn't work in this case
            page.bind( "pagehide.remove", callback || function( e, data ) {

                //check if this is a same page transition and if so don't remove the page
                if( !data.samePage ){
                    var $this = $( this ),
                        prEvent = new $.Event( "pageremove" );

                    $this.trigger( prEvent );

                    if ( !prEvent.isDefaultPrevented() ) {
                        $this.removeWithDependents();
                    }
                }
            });
        }
    },

    _setOptions: function( o ) {
        if ( o.theme !== undefined ) {
            this.element.removeClass( "ui-page-theme-" + this.options.theme ).addClass( "ui-page-theme-" + o.theme );
        }

        if ( o.contentTheme !== undefined ) {
            this.element.find( "[data-" + $.mobile.ns + "='content']" ).removeClass( "ui-body-" + this.options.contentTheme )
                .addClass( "ui-body-" + o.contentTheme );
        }
    },

    _handlePageBeforeShow: function(/* e */) {
        this.setContainerBackground();
    },
    // Deprecated in 1.4 remove in 1.5
    removeContainerBackground: function() {
        this.element.closest( ":mobile-pagecontainer" ).pagecontainer({ "theme": "none" });
    },
    // Deprecated in 1.4 remove in 1.5
    // set the page container background to the page theme
    setContainerBackground: function( theme ) {
        this.element.parent().pagecontainer( { "theme": theme || this.options.theme } );
    },
    // Deprecated in 1.4 remove in 1.5
    keepNativeSelector: function() {
        var options = this.options,
            keepNative = $.trim( options.keepNative || "" ),
            globalValue = $.trim( $.mobile.keepNative ),
            optionValue = $.trim( options.keepNativeDefault ),

            // Check if $.mobile.keepNative has changed from the factory default
            newDefault = ( keepNativeFactoryDefault === globalValue ?
                "" : globalValue ),

            // If $.mobile.keepNative has not changed, use options.keepNativeDefault
            oldDefault = ( newDefault === "" ? optionValue : "" );

        // Concatenate keepNative selectors from all sources where the value has
        // changed or, if nothing has changed, return the default
        return ( ( keepNative ? [ keepNative ] : [] )
            .concat( newDefault ? [ newDefault ] : [] )
            .concat( oldDefault ? [ oldDefault ] : [] )
            .join( ", " ) );
    }
});
})( jQuery );

(function( $, undefined ) {

    $.widget( "mobile.pagecontainer", {
        options: {
            theme: "a"
        },

        initSelector: false,

        _create: function() {
            this._trigger( "beforecreate" );
            this.setLastScrollEnabled = true;

            this._on( this.window, {
                // disable an scroll setting when a hashchange has been fired,
                // this only works because the recording of the scroll position
                // is delayed for 100ms after the browser might have changed the
                // position because of the hashchange
                navigate: "_disableRecordScroll",

                // bind to scrollstop for the first page, "pagechange" won't be
                // fired in that case
                scrollstop: "_delayedRecordScroll"
            });

            // TODO consider moving the navigation handler OUT of widget into
            //      some other object as glue between the navigate event and the
            //      content widget load and change methods
            this._on( this.window, { navigate: "_filterNavigateEvents" });

            // TODO move from page* events to content* events
            this._on({ pagechange: "_afterContentChange" });

            // handle initial hashchange from chrome :(
            this.window.one( "navigate", $.proxy(function() {
                this.setLastScrollEnabled = true;
            }, this));
        },

        _setOptions: function( options ) {
            if ( options.theme !== undefined && options.theme !== "none" ) {
                this.element.removeClass( "ui-overlay-" + this.options.theme )
                    .addClass( "ui-overlay-" + options.theme );
            } else if ( options.theme !== undefined ) {
                this.element.removeClass( "ui-overlay-" + this.options.theme );
            }

            this._super( options );
        },

        _disableRecordScroll: function() {
            this.setLastScrollEnabled = false;
        },

        _enableRecordScroll: function() {
            this.setLastScrollEnabled = true;
        },

        // TODO consider the name here, since it's purpose specific
        _afterContentChange: function() {
            // once the page has changed, re-enable the scroll recording
            this.setLastScrollEnabled = true;

            // remove any binding that previously existed on the get scroll
            // which may or may not be different than the scroll element
            // determined for this page previously
            this._off( this.window, "scrollstop" );

            // determine and bind to the current scoll element which may be the
            // window or in the case of touch overflow the element touch overflow
            this._on( this.window, { scrollstop: "_delayedRecordScroll" });
        },

        _recordScroll: function() {
            // this barrier prevents setting the scroll value based on
            // the browser scrolling the window based on a hashchange
            if ( !this.setLastScrollEnabled ) {
                return;
            }

            var active = this._getActiveHistory(),
                currentScroll, minScroll, defaultScroll;

            if ( active ) {
                currentScroll = this._getScroll();
                minScroll = this._getMinScroll();
                defaultScroll = this._getDefaultScroll();

                // Set active page's lastScroll prop. If the location we're
                // scrolling to is less than minScrollBack, let it go.
                active.lastScroll = currentScroll < minScroll ? defaultScroll : currentScroll;
            }
        },

        _delayedRecordScroll: function() {
            setTimeout( $.proxy(this, "_recordScroll"), 100 );
        },

        _getScroll: function() {
            return this.window.scrollTop();
        },

        _getMinScroll: function() {
            return $.mobile.minScrollBack;
        },

        _getDefaultScroll: function() {
            return $.mobile.defaultHomeScroll;
        },

        _filterNavigateEvents: function( e, data ) {
            var url;

            if ( e.originalEvent && e.originalEvent.isDefaultPrevented() ) {
                return;
            }

            url = e.originalEvent.type.indexOf( "hashchange" ) > -1 ? data.state.hash : data.state.url;

            if ( !url ) {
                url = this._getHash();
            }

            if ( !url || url === "#" || url.indexOf( "#" + $.mobile.path.uiStateKey ) === 0 ) {
                url = location.href;
            }

            this._handleNavigate( url, data.state );
        },

        _getHash: function() {
            return $.mobile.path.parseLocation().hash;
        },

        // TODO active page should be managed by the container (ie, it should be a property)
        getActivePage: function() {
            return this.activePage;
        },

        // TODO the first page should be a property set during _create using the logic
        //      that currently resides in init
        _getInitialContent: function() {
            return $.mobile.firstPage;
        },

        // TODO each content container should have a history object
        _getHistory: function() {
            return $.mobile.navigate.history;
        },

        _getActiveHistory: function() {
            return this._getHistory().getActive();
        },

        // TODO the document base should be determined at creation
        _getDocumentBase: function() {
            return $.mobile.path.documentBase;
        },

        back: function() {
            this.go( -1 );
        },

        forward: function() {
            this.go( 1 );
        },

        go: function( steps ) {

            //if hashlistening is enabled use native history method
            if ( $.mobile.hashListeningEnabled ) {
                window.history.go( steps );
            } else {

                //we are not listening to the hash so handle history internally
                var activeIndex = $.mobile.navigate.history.activeIndex,
                    index = activeIndex + parseInt( steps, 10 ),
                    url = $.mobile.navigate.history.stack[ index ].url,
                    direction = ( steps >= 1 )? "forward" : "back";

                //update the history object
                $.mobile.navigate.history.activeIndex = index;
                $.mobile.navigate.history.previousIndex = activeIndex;

                //change to the new page
                this.change( url, { direction: direction, changeHash: false, fromHashChange: true } );
            }
        },

        // TODO rename _handleDestination
        _handleDestination: function( to ) {
            var history;

            // clean the hash for comparison if it's a url
            if ( $.type(to) === "string" ) {
                to = $.mobile.path.stripHash( to );
            }

            if ( to ) {
                history = this._getHistory();

                // At this point, 'to' can be one of 3 things, a cached page
                // element from a history stack entry, an id, or site-relative /
                // absolute URL. If 'to' is an id, we need to resolve it against
                // the documentBase, not the location.href, since the hashchange
                // could've been the result of a forward/backward navigation
                // that crosses from an external page/dialog to an internal
                // page/dialog.
                //
                // TODO move check to history object or path object?
                to = !$.mobile.path.isPath( to ) ? ( $.mobile.path.makeUrlAbsolute( "#" + to, this._getDocumentBase() ) ) : to;
            }
            return to || this._getInitialContent();
        },

        _transitionFromHistory: function( direction, defaultTransition ) {
            var history = this._getHistory(),
                entry = ( direction === "back" ? history.getLast() : history.getActive() );

            return ( entry && entry.transition ) || defaultTransition;
        },

        _handleDialog: function( changePageOptions, data ) {
            var to, active, activeContent = this.getActivePage();

            // If current active page is not a dialog skip the dialog and continue
            // in the same direction
            // Note: The dialog widget is deprecated as of 1.4.0 and will be removed in 1.5.0.
            // Thus, as of 1.5.0 activeContent.data( "mobile-dialog" ) will always evaluate to
            // falsy, so the second condition in the if-statement below can be removed altogether.
            if ( activeContent && !activeContent.data( "mobile-dialog" ) ) {
                // determine if we're heading forward or backward and continue
                // accordingly past the current dialog
                if ( data.direction === "back" ) {
                    this.back();
                } else {
                    this.forward();
                }

                // prevent changePage call
                return false;
            } else {
                // if the current active page is a dialog and we're navigating
                // to a dialog use the dialog objected saved in the stack
                to = data.pageUrl;
                active = this._getActiveHistory();

                // make sure to set the role, transition and reversal
                // as most of this is lost by the domCache cleaning
                $.extend( changePageOptions, {
                    role: active.role,
                    transition: this._transitionFromHistory(
                        data.direction,
                        changePageOptions.transition ),
                    reverse: data.direction === "back"
                });
            }

            return to;
        },

        _handleNavigate: function( url, data ) {
            //find first page via hash
            // TODO stripping the hash twice with handleUrl
            var to = $.mobile.path.stripHash( url ), history = this._getHistory(),

                // transition is false if it's the first page, undefined
                // otherwise (and may be overridden by default)
                transition = history.stack.length === 0 ? "none" :
                    this._transitionFromHistory( data.direction ),

                // default options for the changPage calls made after examining
                // the current state of the page and the hash, NOTE that the
                // transition is derived from the previous history entry
                changePageOptions = {
                    changeHash: false,
                    fromHashChange: true,
                    reverse: data.direction === "back"
                };

            $.extend( changePageOptions, data, {
                transition: transition
            });

            // TODO move to _handleDestination ?
            // If this isn't the first page, if the current url is a dialog hash
            // key, and the initial destination isn't equal to the current target
            // page, use the special dialog handling
            if ( history.activeIndex > 0 &&
                to.indexOf( $.mobile.dialogHashKey ) > -1 ) {

                to = this._handleDialog( changePageOptions, data );

                if ( to === false ) {
                    return;
                }
            }

            this._changeContent( this._handleDestination( to ), changePageOptions );
        },

        _changeContent: function( to, opts ) {
            $.mobile.changePage( to, opts );
        },

        _getBase: function() {
            return $.mobile.base;
        },

        _getNs: function() {
            return $.mobile.ns;
        },

        _enhance: function( content, role ) {
            // TODO consider supporting a custom callback, and passing in
            // the settings which includes the role
            return content.page({ role: role });
        },

        _include: function( page, settings ) {
            // append to page and enhance
            page.appendTo( this.element );

            // use the page widget to enhance
            this._enhance( page, settings.role );

            // remove page on hide
            page.page( "bindRemove" );
        },

        _find: function( absUrl ) {
            // TODO consider supporting a custom callback
            var fileUrl = this._createFileUrl( absUrl ),
                dataUrl = this._createDataUrl( absUrl ),
                page, initialContent = this._getInitialContent();

            // Check to see if the page already exists in the DOM.
            // NOTE do _not_ use the :jqmData pseudo selector because parenthesis
            //      are a valid url char and it breaks on the first occurence
            page = this.element
                .children( "[data-" + this._getNs() +
                    "url='" + $.mobile.path.hashToSelector( dataUrl ) + "']" );

            // If we failed to find the page, check to see if the url is a
            // reference to an embedded page. If so, it may have been dynamically
            // injected by a developer, in which case it would be lacking a
            // data-url attribute and in need of enhancement.
            if ( page.length === 0 && dataUrl && !$.mobile.path.isPath( dataUrl ) ) {
                page = this.element.children( $.mobile.path.hashToSelector("#" + dataUrl) )
                    .attr( "data-" + this._getNs() + "url", dataUrl )
                    .jqmData( "url", dataUrl );
            }

            // If we failed to find a page in the DOM, check the URL to see if it
            // refers to the first page in the application. Also check to make sure
            // our cached-first-page is actually in the DOM. Some user deployed
            // apps are pruning the first page from the DOM for various reasons.
            // We check for this case here because we don't want a first-page with
            // an id falling through to the non-existent embedded page error case.
            if ( page.length === 0 &&
                $.mobile.path.isFirstPageUrl( fileUrl ) &&
                initialContent &&
                initialContent.parent().length ) {
                page = $( initialContent );
            }

            return page;
        },

        _getLoader: function() {
            return $.mobile.loading();
        },

        _showLoading: function( delay, theme, msg, textonly ) {
            // This configurable timeout allows cached pages a brief
            // delay to load without showing a message
            if ( this._loadMsg ) {
                return;
            }

            this._loadMsg = setTimeout($.proxy(function() {
                this._getLoader().loader( "show", theme, msg, textonly );
                this._loadMsg = 0;
            }, this), delay );
        },

        _hideLoading: function() {
            // Stop message show timer
            clearTimeout( this._loadMsg );
            this._loadMsg = 0;

            // Hide loading message
            this._getLoader().loader( "hide" );
        },

        _showError: function() {
            // make sure to remove the current loading message
            this._hideLoading();

            // show the error message
            this._showLoading( 0, $.mobile.pageLoadErrorMessageTheme, $.mobile.pageLoadErrorMessage, true );

            // hide the error message after a delay
            // TODO configuration
            setTimeout( $.proxy(this, "_hideLoading"), 1500 );
        },

        _parse: function( html, fileUrl ) {
            // TODO consider allowing customization of this method. It's very JQM specific
            var page, all = $( "<div></div>" );

            //workaround to allow scripts to execute when included in page divs
            all.get( 0 ).innerHTML = html;

            page = all.find( ":jqmData(role='page'), :jqmData(role='dialog')" ).first();

            //if page elem couldn't be found, create one and insert the body element's contents
            if ( !page.length ) {
                page = $( "<div data-" + this._getNs() + "role='page'>" +
                    ( html.split( /<\/?body[^>]*>/gmi )[1] || "" ) +
                    "</div>" );
            }

            // TODO tagging a page with external to make sure that embedded pages aren't
            // removed by the various page handling code is bad. Having page handling code
            // in many places is bad. Solutions post 1.0
            page.attr( "data-" + this._getNs() + "url", this._createDataUrl( fileUrl ) )
                .attr( "data-" + this._getNs() + "external-page", true );

            return page;
        },

        _setLoadedTitle: function( page, html ) {
            //page title regexp
            var newPageTitle = html.match( /<title[^>]*>([^<]*)/ ) && RegExp.$1;

            if ( newPageTitle && !page.jqmData("title") ) {
                newPageTitle = $( "<div>" + newPageTitle + "</div>" ).text();
                page.jqmData( "title", newPageTitle );
            }
        },

        _isRewritableBaseTag: function() {
            return $.mobile.dynamicBaseEnabled && !$.support.dynamicBaseTag;
        },

        _createDataUrl: function( absoluteUrl ) {
            return $.mobile.path.convertUrlToDataUrl( absoluteUrl );
        },

        _createFileUrl: function( absoluteUrl ) {
            return $.mobile.path.getFilePath( absoluteUrl );
        },

        _triggerWithDeprecated: function( name, data, page ) {
            var deprecatedEvent = $.Event( "page" + name ),
                newEvent = $.Event( this.widgetName + name );

            // DEPRECATED
            // trigger the old deprecated event on the page if it's provided
            ( page || this.element ).trigger( deprecatedEvent, data );

            // use the widget trigger method for the new content* event
            this._trigger( name, newEvent, data );

            return {
                deprecatedEvent: deprecatedEvent,
                event: newEvent
            };
        },

        // TODO it would be nice to split this up more but everything appears to be "one off"
        //      or require ordering such that other bits are sprinkled in between parts that
        //      could be abstracted out as a group
        _loadSuccess: function( absUrl, triggerData, settings, deferred ) {
            var fileUrl = this._createFileUrl( absUrl );

            return $.proxy(function( html, textStatus, xhr ) {
                //pre-parse html to check for a data-url,
                //use it as the new fileUrl, base path, etc
                var content,

                    // TODO handle dialogs again
                    pageElemRegex = new RegExp( "(<[^>]+\\bdata-" + this._getNs() + "role=[\"']?page[\"']?[^>]*>)" ),

                    dataUrlRegex = new RegExp( "\\bdata-" + this._getNs() + "url=[\"']?([^\"'>]*)[\"']?" );

                // data-url must be provided for the base tag so resource requests
                // can be directed to the correct url. loading into a temprorary
                // element makes these requests immediately
                if ( pageElemRegex.test( html ) &&
                    RegExp.$1 &&
                    dataUrlRegex.test( RegExp.$1 ) &&
                    RegExp.$1 ) {
                    fileUrl = $.mobile.path.getFilePath( $("<div>" + RegExp.$1 + "</div>").text() );

                    // We specify that, if a data-url attribute is given on the page div, its value
                    // must be given non-URL-encoded. However, in this part of the code, fileUrl is
                    // assumed to be URL-encoded, so we URL-encode the retrieved value here
                    fileUrl = this.window[ 0 ].encodeURIComponent( fileUrl );
                }

                //dont update the base tag if we are prefetching
                if ( settings.prefetch === undefined ) {
                    this._getBase().set( fileUrl );
                }

                content = this._parse( html, fileUrl );

                this._setLoadedTitle( content, html );

                // Add the content reference and xhr to our triggerData.
                triggerData.xhr = xhr;
                triggerData.textStatus = textStatus;

                // DEPRECATED
                triggerData.page = content;

                triggerData.content = content;

                triggerData.toPage = content;

                // If the default behavior is prevented, stop here!
                // Note that it is the responsibility of the listener/handler
                // that called preventDefault(), to resolve/reject the
                // deferred object within the triggerData.
                if ( this._triggerWithDeprecated( "load", triggerData ).event.isDefaultPrevented() ) {
                    return;
                }

                // rewrite src and href attrs to use a base url if the base tag won't work
                if ( this._isRewritableBaseTag() && content ) {
                    this._getBase().rewrite( fileUrl, content );
                }

                this._include( content, settings );

                // Remove loading message.
                if ( settings.showLoadMsg ) {
                    this._hideLoading();
                }

                deferred.resolve( absUrl, settings, content );
            }, this);
        },

        _loadDefaults: {
            type: "get",
            data: undefined,

            // DEPRECATED
            reloadPage: false,

            reload: false,

            // By default we rely on the role defined by the @data-role attribute.
            role: undefined,

            showLoadMsg: false,

            // This delay allows loads that pull from browser cache to
            // occur without showing the loading message.
            loadMsgDelay: 50
        },

        load: function( url, options ) {
            // This function uses deferred notifications to let callers
            // know when the content is done loading, or if an error has occurred.
            var deferred = ( options && options.deferred ) || $.Deferred(),

                // Examining the option "reloadPage" passed by the user is deprecated as of 1.4.0
                // and will be removed in 1.5.0.
                // Copy option "reloadPage" to "reload", but only if option "reload" is not present
                reloadOptionExtension =
                    ( ( options && options.reload === undefined &&
                        options.reloadPage !== undefined ) ?
                            { reload: options.reloadPage } : {} ),

                // The default load options with overrides specified by the caller.
                settings = $.extend( {}, this._loadDefaults, options, reloadOptionExtension ),

                // The DOM element for the content after it has been loaded.
                content = null,

                // The absolute version of the URL passed into the function. This
                // version of the URL may contain dialog/subcontent params in it.
                absUrl = $.mobile.path.makeUrlAbsolute( url, this._findBaseWithDefault() ),
                fileUrl, dataUrl, pblEvent, triggerData;

            // If the caller provided data, and we're using "get" request,
            // append the data to the URL.
            if ( settings.data && settings.type === "get" ) {
                absUrl = $.mobile.path.addSearchParams( absUrl, settings.data );
                settings.data = undefined;
            }

            // If the caller is using a "post" request, reload must be true
            if ( settings.data && settings.type === "post" ) {
                settings.reload = true;
            }

            // The absolute version of the URL minus any dialog/subcontent params.
            // In otherwords the real URL of the content to be loaded.
            fileUrl = this._createFileUrl( absUrl );

            // The version of the Url actually stored in the data-url attribute of
            // the content. For embedded content, it is just the id of the page. For
            // content within the same domain as the document base, it is the site
            // relative path. For cross-domain content (Phone Gap only) the entire
            // absolute Url is used to load the content.
            dataUrl = this._createDataUrl( absUrl );

            content = this._find( absUrl );

            // If it isn't a reference to the first content and refers to missing
            // embedded content reject the deferred and return
            if ( content.length === 0 &&
                $.mobile.path.isEmbeddedPage(fileUrl) &&
                !$.mobile.path.isFirstPageUrl(fileUrl) ) {
                deferred.reject( absUrl, settings );
                return deferred.promise();
            }

            // Reset base to the default document base
            // TODO figure out why we doe this
            this._getBase().reset();

            // If the content we are interested in is already in the DOM,
            // and the caller did not indicate that we should force a
            // reload of the file, we are done. Resolve the deferrred so that
            // users can bind to .done on the promise
            if ( content.length && !settings.reload ) {
                this._enhance( content, settings.role );
                deferred.resolve( absUrl, settings, content );

                //if we are reloading the content make sure we update
                // the base if its not a prefetch
                if ( !settings.prefetch ) {
                    this._getBase().set(url);
                }

                return deferred.promise();
            }

            triggerData = {
                url: url,
                absUrl: absUrl,
                toPage: url,
                prevPage: options ? options.fromPage : undefined,
                dataUrl: dataUrl,
                deferred: deferred,
                options: settings
            };

            // Let listeners know we're about to load content.
            pblEvent = this._triggerWithDeprecated( "beforeload", triggerData );

            // If the default behavior is prevented, stop here!
            if ( pblEvent.deprecatedEvent.isDefaultPrevented() ||
                pblEvent.event.isDefaultPrevented() ) {
                return deferred.promise();
            }

            if ( settings.showLoadMsg ) {
                this._showLoading( settings.loadMsgDelay );
            }

            // Reset base to the default document base.
            // only reset if we are not prefetching
            if ( settings.prefetch === undefined ) {
                this._getBase().reset();
            }

            if ( !( $.mobile.allowCrossDomainPages ||
                $.mobile.path.isSameDomain($.mobile.path.documentUrl, absUrl ) ) ) {
                deferred.reject( absUrl, settings );
                return deferred.promise();
            }

            // Load the new content.
            $.ajax({
                url: fileUrl,
                type: settings.type,
                data: settings.data,
                contentType: settings.contentType,
                dataType: "html",
                success: this._loadSuccess( absUrl, triggerData, settings, deferred ),
                error: this._loadError( absUrl, triggerData, settings, deferred )
            });

            return deferred.promise();
        },

        _loadError: function( absUrl, triggerData, settings, deferred ) {
            return $.proxy(function( xhr, textStatus, errorThrown ) {
                //set base back to current path
                this._getBase().set( $.mobile.path.get() );

                // Add error info to our triggerData.
                triggerData.xhr = xhr;
                triggerData.textStatus = textStatus;
                triggerData.errorThrown = errorThrown;

                // Let listeners know the page load failed.
                var plfEvent = this._triggerWithDeprecated( "loadfailed", triggerData );

                // If the default behavior is prevented, stop here!
                // Note that it is the responsibility of the listener/handler
                // that called preventDefault(), to resolve/reject the
                // deferred object within the triggerData.
                if ( plfEvent.deprecatedEvent.isDefaultPrevented() ||
                    plfEvent.event.isDefaultPrevented() ) {
                    return;
                }

                // Remove loading message.
                if ( settings.showLoadMsg ) {
                    this._showError();
                }

                deferred.reject( absUrl, settings );
            }, this);
        },

        _getTransitionHandler: function( transition ) {
            transition = $.mobile._maybeDegradeTransition( transition );

            //find the transition handler for the specified transition. If there
            //isn't one in our transitionHandlers dictionary, use the default one.
            //call the handler immediately to kick-off the transition.
            return $.mobile.transitionHandlers[ transition ] || $.mobile.defaultTransitionHandler;
        },

        // TODO move into transition handlers?
        _triggerCssTransitionEvents: function( to, from, prefix ) {
            var samePage = false;

            prefix = prefix || "";

            // TODO decide if these events should in fact be triggered on the container
            if ( from ) {

                //Check if this is a same page transition and tell the handler in page
                if( to[0] === from[0] ){
                    samePage = true;
                }

                //trigger before show/hide events
                // TODO deprecate nextPage in favor of next
                this._triggerWithDeprecated( prefix + "hide", {

                    // Deprecated in 1.4 remove in 1.5
                    nextPage: to,
                    toPage: to,
                    prevPage: from,
                    samePage: samePage
                }, from );
            }

            // TODO deprecate prevPage in favor of previous
            this._triggerWithDeprecated( prefix + "show", {
                prevPage: from || $( "" ),
                toPage: to
            }, to );
        },

        // TODO make private once change has been defined in the widget
        _cssTransition: function( to, from, options ) {
            var transition = options.transition,
                reverse = options.reverse,
                deferred = options.deferred,
                TransitionHandler,
                promise;

            this._triggerCssTransitionEvents( to, from, "before" );

            // TODO put this in a binding to events *outside* the widget
            this._hideLoading();

            TransitionHandler = this._getTransitionHandler( transition );

            promise = ( new TransitionHandler( transition, reverse, to, from ) ).transition();

            promise.done( $.proxy( function() {
                this._triggerCssTransitionEvents( to, from );
            }, this ));

            // TODO temporary accomodation of argument deferred
            promise.done(function() {
                deferred.resolve.apply( deferred, arguments );
            });
        },

        _releaseTransitionLock: function() {
            //release transition lock so navigation is free again
            isPageTransitioning = false;
            if ( pageTransitionQueue.length > 0 ) {
                $.mobile.changePage.apply( null, pageTransitionQueue.pop() );
            }
        },

        _removeActiveLinkClass: function( force ) {
            //clear out the active button state
            $.mobile.removeActiveLinkClass( force );
        },

        _loadUrl: function( to, triggerData, settings ) {
            // preserve the original target as the dataUrl value will be
            // simplified eg, removing ui-state, and removing query params
            // from the hash this is so that users who want to use query
            // params have access to them in the event bindings for the page
            // life cycle See issue #5085
            settings.target = to;
            settings.deferred = $.Deferred();

            this.load( to, settings );

            settings.deferred.done($.proxy(function( url, options, content ) {
                isPageTransitioning = false;

                // store the original absolute url so that it can be provided
                // to events in the triggerData of the subsequent changePage call
                options.absUrl = triggerData.absUrl;

                this.transition( content, triggerData, options );
            }, this));

            settings.deferred.fail($.proxy(function(/* url, options */) {
                this._removeActiveLinkClass( true );
                this._releaseTransitionLock();
                this._triggerWithDeprecated( "changefailed", triggerData );
            }, this));
        },

        _triggerPageBeforeChange: function( to, triggerData, settings ) {
            var returnEvents;

            triggerData.prevPage = this.activePage;
            $.extend( triggerData, {
                toPage: to,
                options: settings
            });

            // NOTE: preserve the original target as the dataUrl value will be
            // simplified eg, removing ui-state, and removing query params from
            // the hash this is so that users who want to use query params have
            // access to them in the event bindings for the page life cycle
            // See issue #5085
            if ( $.type(to) === "string" ) {
                // if the toPage is a string simply convert it
                triggerData.absUrl = $.mobile.path.makeUrlAbsolute( to, this._findBaseWithDefault() );
            } else {
                // if the toPage is a jQuery object grab the absolute url stored
                // in the loadPage callback where it exists
                triggerData.absUrl = settings.absUrl;
            }

            // Let listeners know we're about to change the current page.
            returnEvents = this._triggerWithDeprecated( "beforechange", triggerData );

            // If the default behavior is prevented, stop here!
            if ( returnEvents.event.isDefaultPrevented() ||
                returnEvents.deprecatedEvent.isDefaultPrevented() ) {
                return false;
            }

            return true;
        },

        change: function( to, options ) {
            // If we are in the midst of a transition, queue the current request.
            // We'll call changePage() once we're done with the current transition
            // to service the request.
            if ( isPageTransitioning ) {
                pageTransitionQueue.unshift( arguments );
                return;
            }

            var settings = $.extend( {}, $.mobile.changePage.defaults, options ),
                triggerData = {};

            // Make sure we have a fromPage.
            settings.fromPage = settings.fromPage || this.activePage;

            // if the page beforechange default is prevented return early
            if ( !this._triggerPageBeforeChange(to, triggerData, settings) ) {
                return;
            }

            // We allow "pagebeforechange" observers to modify the to in
            // the trigger data to allow for redirects. Make sure our to is
            // updated. We also need to re-evaluate whether it is a string,
            // because an object can also be replaced by a string
            to = triggerData.toPage;

            // If the caller passed us a url, call loadPage()
            // to make sure it is loaded into the DOM. We'll listen
            // to the promise object it returns so we know when
            // it is done loading or if an error ocurred.
            if ( $.type(to) === "string" ) {
                // Set the isPageTransitioning flag to prevent any requests from
                // entering this method while we are in the midst of loading a page
                // or transitioning.
                isPageTransitioning = true;

                this._loadUrl( to, triggerData, settings );
            } else {
                this.transition( to, triggerData, settings );
            }
        },

        transition: function( toPage, triggerData, settings ) {
            var fromPage, url, pageUrl, fileUrl,
                active, activeIsInitialPage,
                historyDir, pageTitle, isDialog,
                alreadyThere, newPageTitle,
                params,    cssTransitionDeferred,
                beforeTransition;

            // If we are in the midst of a transition, queue the current request.
            // We'll call changePage() once we're done with the current transition
            // to service the request.
            if ( isPageTransitioning ) {
                // make sure to only queue the to and settings values so the arguments
                // work with a call to the change method
                pageTransitionQueue.unshift( [toPage, settings] );
                return;
            }

            // DEPRECATED - this call only, in favor of the before transition
            // if the page beforechange default is prevented return early
            if ( !this._triggerPageBeforeChange(toPage, triggerData, settings) ) {
                return;
            }

            triggerData.prevPage = settings.fromPage;
            // if the (content|page)beforetransition default is prevented return early
            // Note, we have to check for both the deprecated and new events
            beforeTransition = this._triggerWithDeprecated( "beforetransition", triggerData );
            if (beforeTransition.deprecatedEvent.isDefaultPrevented() ||
                beforeTransition.event.isDefaultPrevented() ) {
                return;
            }

            // Set the isPageTransitioning flag to prevent any requests from
            // entering this method while we are in the midst of loading a page
            // or transitioning.
            isPageTransitioning = true;

            // If we are going to the first-page of the application, we need to make
            // sure settings.dataUrl is set to the application document url. This allows
            // us to avoid generating a document url with an id hash in the case where the
            // first-page of the document has an id attribute specified.
            if ( toPage[ 0 ] === $.mobile.firstPage[ 0 ] && !settings.dataUrl ) {
                settings.dataUrl = $.mobile.path.documentUrl.hrefNoHash;
            }

            // The caller passed us a real page DOM element. Update our
            // internal state and then trigger a transition to the page.
            fromPage = settings.fromPage;
            url = ( settings.dataUrl && $.mobile.path.convertUrlToDataUrl(settings.dataUrl) ) ||
                toPage.jqmData( "url" );

            // The pageUrl var is usually the same as url, except when url is obscured
            // as a dialog url. pageUrl always contains the file path
            pageUrl = url;
            fileUrl = $.mobile.path.getFilePath( url );
            active = $.mobile.navigate.history.getActive();
            activeIsInitialPage = $.mobile.navigate.history.activeIndex === 0;
            historyDir = 0;
            pageTitle = document.title;
            isDialog = ( settings.role === "dialog" ||
                toPage.jqmData( "role" ) === "dialog" ) &&
                toPage.jqmData( "dialog" ) !== true;

            // By default, we prevent changePage requests when the fromPage and toPage
            // are the same element, but folks that generate content
            // manually/dynamically and reuse pages want to be able to transition to
            // the same page. To allow this, they will need to change the default
            // value of allowSamePageTransition to true, *OR*, pass it in as an
            // option when they manually call changePage(). It should be noted that
            // our default transition animations assume that the formPage and toPage
            // are different elements, so they may behave unexpectedly. It is up to
            // the developer that turns on the allowSamePageTransitiona option to
            // either turn off transition animations, or make sure that an appropriate
            // animation transition is used.
            if ( fromPage && fromPage[0] === toPage[0] &&
                !settings.allowSamePageTransition ) {

                isPageTransitioning = false;
                this._triggerWithDeprecated( "transition", triggerData );
                this._triggerWithDeprecated( "change", triggerData );

                // Even if there is no page change to be done, we should keep the
                // urlHistory in sync with the hash changes
                if ( settings.fromHashChange ) {
                    $.mobile.navigate.history.direct({ url: url });
                }

                return;
            }

            // We need to make sure the page we are given has already been enhanced.
            toPage.page({ role: settings.role });

            // If the changePage request was sent from a hashChange event, check to
            // see if the page is already within the urlHistory stack. If so, we'll
            // assume the user hit the forward/back button and will try to match the
            // transition accordingly.
            if ( settings.fromHashChange ) {
                historyDir = settings.direction === "back" ? -1 : 1;
            }

            // Kill the keyboard.
            // XXX_jblas: We need to stop crawling the entire document to kill focus.
            //            Instead, we should be tracking focus with a delegate()
            //            handler so we already have the element in hand at this
            //            point.
            // Wrap this in a try/catch block since IE9 throw "Unspecified error" if
            // document.activeElement is undefined when we are in an IFrame.
            try {
                if ( document.activeElement &&
                    document.activeElement.nodeName.toLowerCase() !== "body" ) {

                    $( document.activeElement ).blur();
                } else {
                    $( "input:focus, textarea:focus, select:focus" ).blur();
                }
            } catch( e ) {}

            // Record whether we are at a place in history where a dialog used to be -
            // if so, do not add a new history entry and do not change the hash either
            alreadyThere = false;

            // If we're displaying the page as a dialog, we don't want the url
            // for the dialog content to be used in the hash. Instead, we want
            // to append the dialogHashKey to the url of the current page.
            if ( isDialog && active ) {
                // on the initial page load active.url is undefined and in that case
                // should be an empty string. Moving the undefined -> empty string back
                // into urlHistory.addNew seemed imprudent given undefined better
                // represents the url state

                // If we are at a place in history that once belonged to a dialog, reuse
                // this state without adding to urlHistory and without modifying the
                // hash. However, if a dialog is already displayed at this point, and
                // we're about to display another dialog, then we must add another hash
                // and history entry on top so that one may navigate back to the
                // original dialog
                if ( active.url &&
                    active.url.indexOf( $.mobile.dialogHashKey ) > -1 &&
                    this.activePage &&
                    !this.activePage.hasClass( "ui-dialog" ) &&
                    $.mobile.navigate.history.activeIndex > 0 ) {

                    settings.changeHash = false;
                    alreadyThere = true;
                }

                // Normally, we tack on a dialog hash key, but if this is the location
                // of a stale dialog, we reuse the URL from the entry
                url = ( active.url || "" );

                // account for absolute urls instead of just relative urls use as hashes
                if ( !alreadyThere && url.indexOf("#") > -1 ) {
                    url += $.mobile.dialogHashKey;
                } else {
                    url += "#" + $.mobile.dialogHashKey;
                }
            }

            // if title element wasn't found, try the page div data attr too
            // If this is a deep-link or a reload ( active === undefined ) then just
            // use pageTitle
            newPageTitle = ( !active ) ? pageTitle : toPage.jqmData( "title" ) ||
                toPage.children( ":jqmData(role='header')" ).find( ".ui-title" ).text();
            if ( !!newPageTitle && pageTitle === document.title ) {
                pageTitle = newPageTitle;
            }
            if ( !toPage.jqmData( "title" ) ) {
                toPage.jqmData( "title", pageTitle );
            }

            // Make sure we have a transition defined.
            settings.transition = settings.transition ||
                ( ( historyDir && !activeIsInitialPage ) ? active.transition : undefined ) ||
                ( isDialog ? $.mobile.defaultDialogTransition : $.mobile.defaultPageTransition );

            //add page to history stack if it's not back or forward
            if ( !historyDir && alreadyThere ) {
                $.mobile.navigate.history.getActive().pageUrl = pageUrl;
            }

            // Set the location hash.
            if ( url && !settings.fromHashChange ) {

                // rebuilding the hash here since we loose it earlier on
                // TODO preserve the originally passed in path
                if ( !$.mobile.path.isPath( url ) && url.indexOf( "#" ) < 0 ) {
                    url = "#" + url;
                }

                // TODO the property names here are just silly
                params = {
                    transition: settings.transition,
                    title: pageTitle,
                    pageUrl: pageUrl,
                    role: settings.role
                };

                if ( settings.changeHash !== false && $.mobile.hashListeningEnabled ) {
                    $.mobile.navigate( this.window[ 0 ].encodeURI( url ), params, true);
                } else if ( toPage[ 0 ] !== $.mobile.firstPage[ 0 ] ) {
                    $.mobile.navigate.history.add( url, params );
                }
            }

            //set page title
            document.title = pageTitle;

            //set "toPage" as activePage deprecated in 1.4 remove in 1.5
            $.mobile.activePage = toPage;

            //new way to handle activePage
            this.activePage = toPage;

            // If we're navigating back in the URL history, set reverse accordingly.
            settings.reverse = settings.reverse || historyDir < 0;

            cssTransitionDeferred = $.Deferred();

            this._cssTransition(toPage, fromPage, {
                transition: settings.transition,
                reverse: settings.reverse,
                deferred: cssTransitionDeferred
            });

            cssTransitionDeferred.done($.proxy(function( name, reverse, $to, $from, alreadyFocused ) {
                $.mobile.removeActiveLinkClass();

                //if there's a duplicateCachedPage, remove it from the DOM now that it's hidden
                if ( settings.duplicateCachedPage ) {
                    settings.duplicateCachedPage.remove();
                }

                // despite visibility: hidden addresses issue #2965
                // https://github.com/jquery/jquery-mobile/issues/2965
                if ( !alreadyFocused ) {
                    $.mobile.focusPage( toPage );
                }

                this._releaseTransitionLock();
                this._triggerWithDeprecated( "transition", triggerData );
                this._triggerWithDeprecated( "change", triggerData );
            }, this));
        },

        // determine the current base url
        _findBaseWithDefault: function() {
            var closestBase = ( this.activePage &&
            $.mobile.getClosestBaseUrl( this.activePage ) );
        return closestBase || $.mobile.path.documentBase.hrefNoHash;
        }
    });

    // The following handlers should be bound after mobileinit has been triggered
    // the following deferred is resolved in the init file
    $.mobile.navreadyDeferred = $.Deferred();

    //these variables make all page containers use the same queue and only navigate one at a time
    // queue to hold simultanious page transitions
    var pageTransitionQueue = [],

        // indicates whether or not page is in process of transitioning
        isPageTransitioning = false;

})( jQuery );

(function( $, undefined ) {

        // resolved on domready
    var domreadyDeferred = $.Deferred(),

        // resolved and nulled on window.load()
        loadDeferred = $.Deferred(),

        // function that resolves the above deferred
        pageIsFullyLoaded = function() {

            // Resolve and null the deferred
            loadDeferred.resolve();
            loadDeferred = null;
        },

        documentUrl = $.mobile.path.documentUrl,

        // used to track last vclicked element to make sure its value is added to form data
        $lastVClicked = null;

    /* Event Bindings - hashchange, submit, and click */
    function findClosestLink( ele )    {
        while ( ele ) {
            // Look for the closest element with a nodeName of "a".
            // Note that we are checking if we have a valid nodeName
            // before attempting to access it. This is because the
            // node we get called with could have originated from within
            // an embedded SVG document where some symbol instance elements
            // don't have nodeName defined on them, or strings are of type
            // SVGAnimatedString.
            if ( ( typeof ele.nodeName === "string" ) && ele.nodeName.toLowerCase() === "a" ) {
                break;
            }
            ele = ele.parentNode;
        }
        return ele;
    }

    $.mobile.loadPage = function( url, opts ) {
        var container;

        opts = opts || {};
        container = ( opts.pageContainer || $.mobile.pageContainer );

        // create the deferred that will be supplied to loadPage callers
        // and resolved by the content widget's load method
        opts.deferred = $.Deferred();

        // Preferring to allow exceptions for uninitialized opts.pageContainer
        // widgets so we know if we need to force init here for users
        container.pagecontainer( "load", url, opts );

        // provide the deferred
        return opts.deferred.promise();
    };

    //define vars for interal use

    /* internal utility functions */

    // NOTE Issue #4950 Android phonegap doesn't navigate back properly
    //      when a full page refresh has taken place. It appears that hashchange
    //      and replacestate history alterations work fine but we need to support
    //      both forms of history traversal in our code that uses backward history
    //      movement
    $.mobile.back = function() {
        var nav = window.navigator;

        // if the setting is on and the navigator object is
        // available use the phonegap navigation capability
        if ( this.phonegapNavigationEnabled &&
            nav &&
            nav.app &&
            nav.app.backHistory ) {
            nav.app.backHistory();
        } else {
            $.mobile.pageContainer.pagecontainer( "back" );
        }
    };

    // Direct focus to the page title, or otherwise first focusable element
    $.mobile.focusPage = function ( page ) {
        var autofocus = page.find( "[autofocus]" ),
            pageTitle = page.find( ".ui-title:eq(0)" );

        if ( autofocus.length ) {
            autofocus.focus();
            return;
        }

        if ( pageTitle.length ) {
            pageTitle.focus();
        } else{
            page.focus();
        }
    };

    // No-op implementation of transition degradation
    $.mobile._maybeDegradeTransition = $.mobile._maybeDegradeTransition || function( transition ) {
        return transition;
    };

    // Exposed $.mobile methods

    $.mobile.changePage = function( to, options ) {
        $.mobile.pageContainer.pagecontainer( "change", to, options );
    };

    $.mobile.changePage.defaults = {
        transition: undefined,
        reverse: false,
        changeHash: true,
        fromHashChange: false,
        role: undefined, // By default we rely on the role defined by the @data-role attribute.
        duplicateCachedPage: undefined,
        pageContainer: undefined,
        showLoadMsg: true, //loading message shows by default when pages are being fetched during changePage
        dataUrl: undefined,
        fromPage: undefined,
        allowSamePageTransition: false
    };

    $.mobile._registerInternalEvents = function() {
        var getAjaxFormData = function( $form, calculateOnly ) {
            var url, ret = true, formData, vclickedName, method;
            if ( !$.mobile.ajaxEnabled ||
                    // test that the form is, itself, ajax false
                    $form.is( ":jqmData(ajax='false')" ) ||
                    // test that $.mobile.ignoreContentEnabled is set and
                    // the form or one of it's parents is ajax=false
                    !$form.jqmHijackable().length ||
                    $form.attr( "target" ) ) {
                return false;
            }

            url = ( $lastVClicked && $lastVClicked.attr( "formaction" ) ) ||
                $form.attr( "action" );
            method = ( $form.attr( "method" ) || "get" ).toLowerCase();

            // If no action is specified, browsers default to using the
            // URL of the document containing the form. Since we dynamically
            // pull in pages from external documents, the form should submit
            // to the URL for the source document of the page containing
            // the form.
            if ( !url ) {
                // Get the @data-url for the page containing the form.
                url = $.mobile.getClosestBaseUrl( $form );

                // NOTE: If the method is "get", we need to strip off the query string
                // because it will get replaced with the new form data. See issue #5710.
                if ( method === "get" ) {
                    url = $.mobile.path.parseUrl( url ).hrefNoSearch;
                }

                if ( url === $.mobile.path.documentBase.hrefNoHash ) {
                    // The url we got back matches the document base,
                    // which means the page must be an internal/embedded page,
                    // so default to using the actual document url as a browser
                    // would.
                    url = documentUrl.hrefNoSearch;
                }
            }

            url = $.mobile.path.makeUrlAbsolute(  url, $.mobile.getClosestBaseUrl( $form ) );

            if ( ( $.mobile.path.isExternal( url ) && !$.mobile.path.isPermittedCrossDomainRequest( documentUrl, url ) ) ) {
                return false;
            }

            if ( !calculateOnly ) {
                formData = $form.serializeArray();

                if ( $lastVClicked && $lastVClicked[ 0 ].form === $form[ 0 ] ) {
                    vclickedName = $lastVClicked.attr( "name" );
                    if ( vclickedName ) {
                        // Make sure the last clicked element is included in the form
                        $.each( formData, function( key, value ) {
                            if ( value.name === vclickedName ) {
                                // Unset vclickedName - we've found it in the serialized data already
                                vclickedName = "";
                                return false;
                            }
                        });
                        if ( vclickedName ) {
                            formData.push( { name: vclickedName, value: $lastVClicked.attr( "value" ) } );
                        }
                    }
                }

                ret = {
                    url: url,
                    options: {
                        type:        method,
                        data:        $.param( formData ),
                        transition:    $form.jqmData( "transition" ),
                        reverse:    $form.jqmData( "direction" ) === "reverse",
                        reloadPage:    true
                    }
                };
            }

            return ret;
        };

        //bind to form submit events, handle with Ajax
        $.mobile.document.delegate( "form", "submit", function( event ) {
            var formData;

            if ( !event.isDefaultPrevented() ) {
                formData = getAjaxFormData( $( this ) );
                if ( formData ) {
                    $.mobile.changePage( formData.url, formData.options );
                    event.preventDefault();
                }
            }
        });

        //add active state on vclick
        $.mobile.document.bind( "vclick", function( event ) {
            var $btn, btnEls, target = event.target, needClosest = false;
            // if this isn't a left click we don't care. Its important to note
            // that when the virtual event is generated it will create the which attr
            if ( event.which > 1 || !$.mobile.linkBindingEnabled ) {
                return;
            }

            // Record that this element was clicked, in case we need it for correct
            // form submission during the "submit" handler above
            $lastVClicked = $( target );

            // Try to find a target element to which the active class will be applied
            if ( $.data( target, "mobile-button" ) ) {
                // If the form will not be submitted via AJAX, do not add active class
                if ( !getAjaxFormData( $( target ).closest( "form" ), true ) ) {
                    return;
                }
                // We will apply the active state to this button widget - the parent
                // of the input that was clicked will have the associated data
                if ( target.parentNode ) {
                    target = target.parentNode;
                }
            } else {
                target = findClosestLink( target );
                if ( !( target && $.mobile.path.parseUrl( target.getAttribute( "href" ) || "#" ).hash !== "#" ) ) {
                    return;
                }

                // TODO teach $.mobile.hijackable to operate on raw dom elements so the
                // link wrapping can be avoided
                if ( !$( target ).jqmHijackable().length ) {
                    return;
                }
            }

            // Avoid calling .closest by using the data set during .buttonMarkup()
            // List items have the button data in the parent of the element clicked
            if ( !!~target.className.indexOf( "ui-link-inherit" ) ) {
                if ( target.parentNode ) {
                    btnEls = $.data( target.parentNode, "buttonElements" );
                }
            // Otherwise, look for the data on the target itself
            } else {
                btnEls = $.data( target, "buttonElements" );
            }
            // If found, grab the button's outer element
            if ( btnEls ) {
                target = btnEls.outer;
            } else {
                needClosest = true;
            }

            $btn = $( target );
            // If the outer element wasn't found by the our heuristics, use .closest()
            if ( needClosest ) {
                $btn = $btn.closest( ".ui-btn" );
            }

            if ( $btn.length > 0 &&
                !( $btn.hasClass( "ui-state-disabled" ||

                    // DEPRECATED as of 1.4.0 - remove after 1.4.0 release
                    // only ui-state-disabled should be present thereafter
                    $btn.hasClass( "ui-disabled" ) ) ) ) {
                $.mobile.removeActiveLinkClass( true );
                $.mobile.activeClickedLink = $btn;
                $.mobile.activeClickedLink.addClass( $.mobile.activeBtnClass );
            }
        });

        // click routing - direct to HTTP or Ajax, accordingly
        $.mobile.document.bind( "click", function( event ) {
            if ( !$.mobile.linkBindingEnabled || event.isDefaultPrevented() ) {
                return;
            }

            var link = findClosestLink( event.target ),
                $link = $( link ),

                //remove active link class if external (then it won't be there if you come back)
                httpCleanup = function() {
                    window.setTimeout(function() { $.mobile.removeActiveLinkClass( true ); }, 200 );
                },
                baseUrl, href,
                useDefaultUrlHandling, isExternal,
                transition, reverse, role;

            // If a button was clicked, clean up the active class added by vclick above
            if ( $.mobile.activeClickedLink &&
                $.mobile.activeClickedLink[ 0 ] === event.target.parentNode ) {
                httpCleanup();
            }

            // If there is no link associated with the click or its not a left
            // click we want to ignore the click
            // TODO teach $.mobile.hijackable to operate on raw dom elements so the link wrapping
            // can be avoided
            if ( !link || event.which > 1 || !$link.jqmHijackable().length ) {
                return;
            }

            //if there's a data-rel=back attr, go back in history
            if ( $link.is( ":jqmData(rel='back')" ) ) {
                $.mobile.back();
                return false;
            }

            baseUrl = $.mobile.getClosestBaseUrl( $link );

            //get href, if defined, otherwise default to empty hash
            href = $.mobile.path.makeUrlAbsolute( $link.attr( "href" ) || "#", baseUrl );

            //if ajax is disabled, exit early
            if ( !$.mobile.ajaxEnabled && !$.mobile.path.isEmbeddedPage( href ) ) {
                httpCleanup();
                //use default click handling
                return;
            }

            // XXX_jblas: Ideally links to application pages should be specified as
            //            an url to the application document with a hash that is either
            //            the site relative path or id to the page. But some of the
            //            internal code that dynamically generates sub-pages for nested
            //            lists and select dialogs, just write a hash in the link they
            //            create. This means the actual URL path is based on whatever
            //            the current value of the base tag is at the time this code
            //            is called.
            if ( href.search( "#" ) !== -1 &&
                !( $.mobile.path.isExternal( href ) && $.mobile.path.isAbsoluteUrl( href ) ) ) {

                href = href.replace( /[^#]*#/, "" );
                if ( !href ) {
                    //link was an empty hash meant purely
                    //for interaction, so we ignore it.
                    event.preventDefault();
                    return;
                } else if ( $.mobile.path.isPath( href ) ) {
                    //we have apath so make it the href we want to load.
                    href = $.mobile.path.makeUrlAbsolute( href, baseUrl );
                } else {
                    //we have a simple id so use the documentUrl as its base.
                    href = $.mobile.path.makeUrlAbsolute( "#" + href, documentUrl.hrefNoHash );
                }
            }

            // Should we handle this link, or let the browser deal with it?
            useDefaultUrlHandling = $link.is( "[rel='external']" ) || $link.is( ":jqmData(ajax='false')" ) || $link.is( "[target]" );

            // Some embedded browsers, like the web view in Phone Gap, allow cross-domain XHR
            // requests if the document doing the request was loaded via the file:// protocol.
            // This is usually to allow the application to "phone home" and fetch app specific
            // data. We normally let the browser handle external/cross-domain urls, but if the
            // allowCrossDomainPages option is true, we will allow cross-domain http/https
            // requests to go through our page loading logic.

            //check for protocol or rel and its not an embedded page
            //TODO overlap in logic from isExternal, rel=external check should be
            //     moved into more comprehensive isExternalLink
            isExternal = useDefaultUrlHandling || ( $.mobile.path.isExternal( href ) && !$.mobile.path.isPermittedCrossDomainRequest( documentUrl, href ) );

            if ( isExternal ) {
                httpCleanup();
                //use default click handling
                return;
            }

            //use ajax
            transition = $link.jqmData( "transition" );
            reverse = $link.jqmData( "direction" ) === "reverse" ||
                        // deprecated - remove by 1.0
                        $link.jqmData( "back" );

            //this may need to be more specific as we use data-rel more
            role = $link.attr( "data-" + $.mobile.ns + "rel" ) || undefined;

            $.mobile.changePage( href, { transition: transition, reverse: reverse, role: role, link: $link } );
            event.preventDefault();
        });

        //prefetch pages when anchors with data-prefetch are encountered
        $.mobile.document.delegate( ".ui-page", "pageshow.prefetch", function() {
            var urls = [];
            $( this ).find( "a:jqmData(prefetch)" ).each(function() {
                var $link = $( this ),
                    url = $link.attr( "href" );

                if ( url && $.inArray( url, urls ) === -1 ) {
                    urls.push( url );

                    $.mobile.loadPage( url, { role: $link.attr( "data-" + $.mobile.ns + "rel" ),prefetch: true } );
                }
            });
        });

        // TODO ensure that the navigate binding in the content widget happens at the right time
        $.mobile.pageContainer.pagecontainer();

        //set page min-heights to be device specific
        $.mobile.document.bind( "pageshow", function() {

            // We need to wait for window.load to make sure that styles have already been rendered,
            // otherwise heights of external toolbars will have the wrong value
            if ( loadDeferred ) {
                loadDeferred.done( $.mobile.resetActivePageHeight );
            } else {
                $.mobile.resetActivePageHeight();
            }
        });
        $.mobile.window.bind( "throttledresize", $.mobile.resetActivePageHeight );

    };//navreadyDeferred done callback

    $( function() { domreadyDeferred.resolve(); } );

    // Account for the possibility that the load event has already fired
    if ( document.readyState === "complete" ) {
        pageIsFullyLoaded();
    } else {
        $.mobile.window.load( pageIsFullyLoaded );
    }

    $.when( domreadyDeferred, $.mobile.navreadyDeferred ).done( function() { $.mobile._registerInternalEvents(); } );
})( jQuery );


(function( $, window, undefined ) {

    // TODO remove direct references to $.mobile and properties, we should
    //      favor injection with params to the constructor
    $.mobile.Transition = function() {
        this.init.apply( this, arguments );
    };

    $.extend($.mobile.Transition.prototype, {
        toPreClass: " ui-page-pre-in",

        init: function( name, reverse, $to, $from ) {
            $.extend(this, {
                name: name,
                reverse: reverse,
                $to: $to,
                $from: $from,
                deferred: new $.Deferred()
            });
        },

        cleanFrom: function() {
            this.$from
                .removeClass( $.mobile.activePageClass + " out in reverse " + this.name )
                .height( "" );
        },

        // NOTE overridden by child object prototypes, noop'd here as defaults
        beforeDoneIn: function() {},
        beforeDoneOut: function() {},
        beforeStartOut: function() {},

        doneIn: function() {
            this.beforeDoneIn();

            this.$to.removeClass( "out in reverse " + this.name ).height( "" );

            this.toggleViewportClass();

            // In some browsers (iOS5), 3D transitions block the ability to scroll to the desired location during transition
            // This ensures we jump to that spot after the fact, if we aren't there already.
            if ( $.mobile.window.scrollTop() !== this.toScroll ) {
                this.scrollPage();
            }
            if ( !this.sequential ) {
                this.$to.addClass( $.mobile.activePageClass );
            }
            this.deferred.resolve( this.name, this.reverse, this.$to, this.$from, true );
        },

        doneOut: function( screenHeight, reverseClass, none, preventFocus ) {
            this.beforeDoneOut();
            this.startIn( screenHeight, reverseClass, none, preventFocus );
        },

        hideIn: function( callback ) {
            // Prevent flickering in phonegap container: see comments at #4024 regarding iOS
            this.$to.css( "z-index", -10 );
            callback.call( this );
            this.$to.css( "z-index", "" );
        },

        scrollPage: function() {
            // By using scrollTo instead of silentScroll, we can keep things better in order
            // Just to be precautios, disable scrollstart listening like silentScroll would
            $.event.special.scrollstart.enabled = false;
            //if we are hiding the url bar or the page was previously scrolled scroll to hide or return to position
            if ( $.mobile.hideUrlBar || this.toScroll !== $.mobile.defaultHomeScroll ) {
                window.scrollTo( 0, this.toScroll );
            }

            // reenable scrollstart listening like silentScroll would
            setTimeout( function() {
                $.event.special.scrollstart.enabled = true;
            }, 150 );
        },

        startIn: function( screenHeight, reverseClass, none, preventFocus ) {
            this.hideIn(function() {
                this.$to.addClass( $.mobile.activePageClass + this.toPreClass );

                // Send focus to page as it is now display: block
                if ( !preventFocus ) {
                    $.mobile.focusPage( this.$to );
                }

                // Set to page height
                this.$to.height( screenHeight + this.toScroll );

                if ( !none ) {
                    this.scrollPage();
                }
            });

            this.$to
                .removeClass( this.toPreClass )
                .addClass( this.name + " in " + reverseClass );

            if ( !none ) {
                this.$to.animationComplete( $.proxy(function() {
                    this.doneIn();
                }, this ));
            } else {
                this.doneIn();
            }

        },

        startOut: function( screenHeight, reverseClass, none ) {
            this.beforeStartOut( screenHeight, reverseClass, none );

            // Set the from page's height and start it transitioning out
            // Note: setting an explicit height helps eliminate tiling in the transitions
            this.$from
                .height( screenHeight + $.mobile.window.scrollTop() )
                .addClass( this.name + " out" + reverseClass );
        },

        toggleViewportClass: function() {
            $.mobile.pageContainer.toggleClass( "ui-mobile-viewport-transitioning viewport-" + this.name );
        },

        transition: function() {
            // NOTE many of these could be calculated/recorded in the constructor, it's my
            //      opinion that binding them as late as possible has value with regards to
            //      better transitions with fewer bugs. Ie, it's not guaranteed that the
            //      object will be created and transition will be run immediately after as
            //      it is today. So we wait until transition is invoked to gather the following
            var none,
                reverseClass = this.reverse ? " reverse" : "",
                screenHeight = $.mobile.getScreenHeight(),
                maxTransitionOverride = $.mobile.maxTransitionWidth !== false &&
                    $.mobile.window.width() > $.mobile.maxTransitionWidth;

            this.toScroll = $.mobile.navigate.history.getActive().lastScroll || $.mobile.defaultHomeScroll;

            none = !$.support.cssTransitions || !$.support.cssAnimations ||
                maxTransitionOverride || !this.name || this.name === "none" ||
                Math.max( $.mobile.window.scrollTop(), this.toScroll ) >
                    $.mobile.getMaxScrollForTransition();

            this.toggleViewportClass();

            if ( this.$from && !none ) {
                this.startOut( screenHeight, reverseClass, none );
            } else {
                this.doneOut( screenHeight, reverseClass, none, true );
            }

            return this.deferred.promise();
        }
    });
})( jQuery, this );


(function( $ ) {

    $.mobile.SerialTransition = function() {
        this.init.apply(this, arguments);
    };

    $.extend($.mobile.SerialTransition.prototype, $.mobile.Transition.prototype, {
        sequential: true,

        beforeDoneOut: function() {
            if ( this.$from ) {
                this.cleanFrom();
            }
        },

        beforeStartOut: function( screenHeight, reverseClass, none ) {
            this.$from.animationComplete($.proxy(function() {
                this.doneOut( screenHeight, reverseClass, none );
            }, this ));
        }
    });

})( jQuery );


(function( $ ) {

    $.mobile.ConcurrentTransition = function() {
        this.init.apply(this, arguments);
    };

    $.extend($.mobile.ConcurrentTransition.prototype, $.mobile.Transition.prototype, {
        sequential: false,

        beforeDoneIn: function() {
            if ( this.$from ) {
                this.cleanFrom();
            }
        },

        beforeStartOut: function( screenHeight, reverseClass, none ) {
            this.doneOut( screenHeight, reverseClass, none );
        }
    });

})( jQuery );


(function( $ ) {

    // generate the handlers from the above
    var defaultGetMaxScrollForTransition = function() {
        return $.mobile.getScreenHeight() * 3;
    };

    //transition handler dictionary for 3rd party transitions
    $.mobile.transitionHandlers = {
        "sequential": $.mobile.SerialTransition,
        "simultaneous": $.mobile.ConcurrentTransition
    };

    // Make our transition handler the public default.
    $.mobile.defaultTransitionHandler = $.mobile.transitionHandlers.sequential;

    $.mobile.transitionFallbacks = {};

    // If transition is defined, check if css 3D transforms are supported, and if not, if a fallback is specified
    $.mobile._maybeDegradeTransition = function( transition ) {
        if ( transition && !$.support.cssTransform3d && $.mobile.transitionFallbacks[ transition ] ) {
            transition = $.mobile.transitionFallbacks[ transition ];
        }

        return transition;
    };

    // Set the getMaxScrollForTransition to default if no implementation was set by user
    $.mobile.getMaxScrollForTransition = $.mobile.getMaxScrollForTransition || defaultGetMaxScrollForTransition;

})( jQuery );

/*
* fallback transition for flip in non-3D supporting browsers (which tend to handle complex transitions poorly in general
*/

(function( $, window, undefined ) {

$.mobile.transitionFallbacks.flip = "fade";

})( jQuery, this );

/*
* fallback transition for flow in non-3D supporting browsers (which tend to handle complex transitions poorly in general
*/

(function( $, window, undefined ) {

$.mobile.transitionFallbacks.flow = "fade";

})( jQuery, this );

/*
* fallback transition for pop in non-3D supporting browsers (which tend to handle complex transitions poorly in general
*/

(function( $, window, undefined ) {

$.mobile.transitionFallbacks.pop = "fade";

})( jQuery, this );

/*
* fallback transition for slide in non-3D supporting browsers (which tend to handle complex transitions poorly in general
*/

(function( $, window, undefined ) {

// Use the simultaneous transitions handler for slide transitions
$.mobile.transitionHandlers.slide = $.mobile.transitionHandlers.simultaneous;

// Set the slide transitions's fallback to "fade"
$.mobile.transitionFallbacks.slide = "fade";

})( jQuery, this );

/*
* fallback transition for slidedown in non-3D supporting browsers (which tend to handle complex transitions poorly in general
*/

(function( $, window, undefined ) {

$.mobile.transitionFallbacks.slidedown = "fade";

})( jQuery, this );

/*
* fallback transition for slidefade in non-3D supporting browsers (which tend to handle complex transitions poorly in general
*/

(function( $, window, undefined ) {

// Set the slide transitions's fallback to "fade"
$.mobile.transitionFallbacks.slidefade = "fade";

})( jQuery, this );

/*
* fallback transition for slideup in non-3D supporting browsers (which tend to handle complex transitions poorly in general
*/

(function( $, window, undefined ) {

$.mobile.transitionFallbacks.slideup = "fade";

})( jQuery, this );

/*
* fallback transition for turn in non-3D supporting browsers (which tend to handle complex transitions poorly in general
*/

(function( $, window, undefined ) {

$.mobile.transitionFallbacks.turn = "fade";

})( jQuery, this );


(function( $, undefined ) {

$.mobile.degradeInputs = {
    color: false,
    date: false,
    datetime: false,
    "datetime-local": false,
    email: false,
    month: false,
    number: false,
    range: "number",
    search: "text",
    tel: false,
    time: false,
    url: false,
    week: false
};
// Backcompat remove in 1.5
$.mobile.page.prototype.options.degradeInputs = $.mobile.degradeInputs;

// Auto self-init widgets
$.mobile.degradeInputsWithin = function( target ) {

    target = $( target );

    // Degrade inputs to avoid poorly implemented native functionality
    target.find( "input" ).not( $.mobile.page.prototype.keepNativeSelector() ).each(function() {
        var element = $( this ),
            type = this.getAttribute( "type" ),
            optType = $.mobile.degradeInputs[ type ] || "text",
            html, hasType, findstr, repstr;

        if ( $.mobile.degradeInputs[ type ] ) {
            html = $( "<div>" ).html( element.clone() ).html();
            // In IE browsers, the type sometimes doesn't exist in the cloned markup, so we replace the closing tag instead
            hasType = html.indexOf( " type=" ) > -1;
            findstr = hasType ? /\s+type=["']?\w+['"]?/ : /\/?>/;
            repstr = " type=\"" + optType + "\" data-" + $.mobile.ns + "type=\"" + type + "\"" + ( hasType ? "" : ">" );

            element.replaceWith( html.replace( findstr, repstr ) );
        }
    });

};

})( jQuery );

(function( $, window, undefined ) {

$.widget( "mobile.page", $.mobile.page, {
    options: {

        // Accepts left, right and none
        closeBtn: "left",
        closeBtnText: "Close",
        overlayTheme: "a",
        corners: true,
        dialog: false
    },

    _create: function() {
        this._super();
        if ( this.options.dialog ) {

            $.extend( this, {
                _inner: this.element.children(),
                _headerCloseButton: null
            });

            if ( !this.options.enhanced ) {
                this._setCloseBtn( this.options.closeBtn );
            }
        }
    },

    _enhance: function() {
        this._super();

        // Class the markup for dialog styling and wrap interior
        if ( this.options.dialog ) {
            this.element.addClass( "ui-dialog" )
                .wrapInner( $( "<div/>", {

                    // ARIA role
                    "role" : "dialog",
                    "class" : "ui-dialog-contain ui-overlay-shadow" +
                        ( this.options.corners ? " ui-corner-all" : "" )
                }));
        }
    },

    _setOptions: function( options ) {
        var closeButtonLocation, closeButtonText,
            currentOpts = this.options;

        if ( options.corners !== undefined ) {
            this._inner.toggleClass( "ui-corner-all", !!options.corners );
        }

        if ( options.overlayTheme !== undefined ) {
            if ( $.mobile.activePage[ 0 ] === this.element[ 0 ] ) {
                currentOpts.overlayTheme = options.overlayTheme;
                this._handlePageBeforeShow();
            }
        }

        if ( options.closeBtnText !== undefined ) {
            closeButtonLocation = currentOpts.closeBtn;
            closeButtonText = options.closeBtnText;
        }

        if ( options.closeBtn !== undefined ) {
            closeButtonLocation = options.closeBtn;
        }

        if ( closeButtonLocation ) {
            this._setCloseBtn( closeButtonLocation, closeButtonText );
        }

        this._super( options );
    },

    _handlePageBeforeShow: function () {
        if ( this.options.overlayTheme && this.options.dialog ) {
            this.removeContainerBackground();
            this.setContainerBackground( this.options.overlayTheme );
        } else {
            this._super();
        }
    },

    _setCloseBtn: function( location, text ) {
        var dst,
            btn = this._headerCloseButton;

        // Sanitize value
        location = "left" === location ? "left" : "right" === location ? "right" : "none";

        if ( "none" === location ) {
            if ( btn ) {
                btn.remove();
                btn = null;
            }
        } else if ( btn ) {
            btn.removeClass( "ui-btn-left ui-btn-right" ).addClass( "ui-btn-" + location );
            if ( text ) {
                btn.text( text );
            }
        } else {
            dst = this._inner.find( ":jqmData(role='header')" ).first();
            btn = $( "<a></a>", {
                    "href": "#",
                    "class": "ui-btn ui-corner-all ui-icon-delete ui-btn-icon-notext ui-btn-" + location
                })
                .attr( "data-" + $.mobile.ns + "rel", "back" )
                .text( text || this.options.closeBtnText || "" )
                .prependTo( dst );
        }

        this._headerCloseButton = btn;
    }
});

})( jQuery, this );

(function( $, window, undefined ) {

$.widget( "mobile.dialog", {
    options: {

        // Accepts left, right and none
        closeBtn: "left",
        closeBtnText: "Close",
        overlayTheme: "a",
        corners: true
    },

    // Override the theme set by the page plugin on pageshow
    _handlePageBeforeShow: function() {
        this._isCloseable = true;
        if ( this.options.overlayTheme ) {
            this.element
                .page( "removeContainerBackground" )
                .page( "setContainerBackground", this.options.overlayTheme );
        }
    },

    _handlePageBeforeHide: function() {
        this._isCloseable = false;
    },

    // click and submit events:
    // - clicks and submits should use the closing transition that the dialog
    //   opened with unless a data-transition is specified on the link/form
    // - if the click was on the close button, or the link has a data-rel="back"
    //   it'll go back in history naturally
    _handleVClickSubmit: function( event ) {
        var attrs,
            $target = $( event.target ).closest( event.type === "vclick" ? "a" : "form" );

        if ( $target.length && !$target.jqmData( "transition" ) ) {
            attrs = {};
            attrs[ "data-" + $.mobile.ns + "transition" ] =
                ( $.mobile.navigate.history.getActive() || {} )[ "transition" ] ||
                $.mobile.defaultDialogTransition;
            attrs[ "data-" + $.mobile.ns + "direction" ] = "reverse";
            $target.attr( attrs );
        }
    },

    _create: function() {
        var elem = this.element,
            opts = this.options;

        // Class the markup for dialog styling and wrap interior
        elem.addClass( "ui-dialog" )
            .wrapInner( $( "<div/>", {

                // ARIA role
                "role" : "dialog",
                "class" : "ui-dialog-contain ui-overlay-shadow" +
                    ( !!opts.corners ? " ui-corner-all" : "" )
            }));

        $.extend( this, {
            _isCloseable: false,
            _inner: elem.children(),
            _headerCloseButton: null
        });

        this._on( elem, {
            vclick: "_handleVClickSubmit",
            submit: "_handleVClickSubmit",
            pagebeforeshow: "_handlePageBeforeShow",
            pagebeforehide: "_handlePageBeforeHide"
        });

        this._setCloseBtn( opts.closeBtn );
    },

    _setOptions: function( options ) {
        var closeButtonLocation, closeButtonText,
            currentOpts = this.options;

        if ( options.corners !== undefined ) {
            this._inner.toggleClass( "ui-corner-all", !!options.corners );
        }

        if ( options.overlayTheme !== undefined ) {
            if ( $.mobile.activePage[ 0 ] === this.element[ 0 ] ) {
                currentOpts.overlayTheme = options.overlayTheme;
                this._handlePageBeforeShow();
            }
        }

        if ( options.closeBtnText !== undefined ) {
            closeButtonLocation = currentOpts.closeBtn;
            closeButtonText = options.closeBtnText;
        }

        if ( options.closeBtn !== undefined ) {
            closeButtonLocation = options.closeBtn;
        }

        if ( closeButtonLocation ) {
            this._setCloseBtn( closeButtonLocation, closeButtonText );
        }

        this._super( options );
    },

    _setCloseBtn: function( location, text ) {
        var dst,
            btn = this._headerCloseButton;

        // Sanitize value
        location = "left" === location ? "left" : "right" === location ? "right" : "none";

        if ( "none" === location ) {
            if ( btn ) {
                btn.remove();
                btn = null;
            }
        } else if ( btn ) {
            btn.removeClass( "ui-btn-left ui-btn-right" ).addClass( "ui-btn-" + location );
            if ( text ) {
                btn.text( text );
            }
        } else {
            dst = this._inner.find( ":jqmData(role='header')" ).first();
            btn = $( "<a></a>", {
                    "role": "button",
                    "href": "#",
                    "class": "ui-btn ui-corner-all ui-icon-delete ui-btn-icon-notext ui-btn-" + location
                })
                .text( text || this.options.closeBtnText || "" )
                .prependTo( dst );
            this._on( btn, { click: "close" } );
        }

        this._headerCloseButton = btn;
    },

    // Close method goes back in history
    close: function() {
        var hist = $.mobile.navigate.history;

        if ( this._isCloseable ) {
            this._isCloseable = false;
            // If the hash listening is enabled and there is at least one preceding history
            // entry it's ok to go back. Initial pages with the dialog hash state are an example
            // where the stack check is necessary
            if ( $.mobile.hashListeningEnabled && hist.activeIndex > 0 ) {
                $.mobile.back();
            } else {
                $.mobile.pageContainer.pagecontainer( "back" );
            }
        }
    }
});

})( jQuery, this );

(function( $, undefined ) {

var rInitialLetter = /([A-Z])/g,

    // Construct iconpos class from iconpos value
    iconposClass = function( iconpos ) {
        return ( "ui-btn-icon-" + ( iconpos === null ? "left" : iconpos ) );
    };

$.widget( "mobile.collapsible", {
    options: {
        enhanced: false,
        expandCueText: null,
        collapseCueText: null,
        collapsed: true,
        heading: "h1,h2,h3,h4,h5,h6,legend",
        collapsedIcon: null,
        expandedIcon: null,
        iconpos: null,
        theme: null,
        contentTheme: null,
        inset: null,
        corners: null,
        mini: null
    },

    _create: function() {
        var elem = this.element,
            ui = {
                accordion: elem
                    .closest( ":jqmData(role='collapsible-set')," +
                        ":jqmData(role='collapsibleset')" +
                        ( $.mobile.collapsibleset ? ", :mobile-collapsibleset" :
                            "" ) )
                    .addClass( "ui-collapsible-set" )
            };

        this._ui = ui;
        this._renderedOptions = this._getOptions( this.options );

        if ( this.options.enhanced ) {
            ui.heading = this.element.children( ".ui-collapsible-heading" );
            ui.content = ui.heading.next();
            ui.anchor = ui.heading.children();
            ui.status = ui.anchor.children( ".ui-collapsible-heading-status" );
        } else {
            this._enhance( elem, ui );
        }

        this._on( ui.heading, {
            "tap": function() {
                ui.heading.find( "a" ).first().addClass( $.mobile.activeBtnClass );
            },

            "click": function( event ) {
                this._handleExpandCollapse( !ui.heading.hasClass( "ui-collapsible-heading-collapsed" ) );
                event.preventDefault();
                event.stopPropagation();
            }
        });
    },

    // Adjust the keys inside options for inherited values
    _getOptions: function( options ) {
        var key,
            accordion = this._ui.accordion,
            accordionWidget = this._ui.accordionWidget;

        // Copy options
        options = $.extend( {}, options );

        if ( accordion.length && !accordionWidget ) {
            this._ui.accordionWidget =
            accordionWidget = accordion.data( "mobile-collapsibleset" );
        }

        for ( key in options ) {

            // Retrieve the option value first from the options object passed in and, if
            // null, from the parent accordion or, if that's null too, or if there's no
            // parent accordion, then from the defaults.
            options[ key ] =
                ( options[ key ] != null ) ? options[ key ] :
                ( accordionWidget ) ? accordionWidget.options[ key ] :
                accordion.length ? $.mobile.getAttribute( accordion[ 0 ],
                    key.replace( rInitialLetter, "-$1" ).toLowerCase() ):
                null;

            if ( null == options[ key ] ) {
                options[ key ] = $.mobile.collapsible.defaults[ key ];
            }
        }

        return options;
    },

    _themeClassFromOption: function( prefix, value ) {
        return ( value ? ( value === "none" ? "" : prefix + value ) : "" );
    },

    _enhance: function( elem, ui ) {
        var iconclass,
            opts = this._renderedOptions,
            contentThemeClass = this._themeClassFromOption( "ui-body-", opts.contentTheme );

        elem.addClass( "ui-collapsible " +
            ( opts.inset ? "ui-collapsible-inset " : "" ) +
            ( opts.inset && opts.corners ? "ui-corner-all " : "" ) +
            ( contentThemeClass ? "ui-collapsible-themed-content " : "" ) );
        ui.originalHeading = elem.children( this.options.heading ).first(),
        ui.content = elem
            .wrapInner( "<div " +
                "class='ui-collapsible-content " +
                contentThemeClass + "'></div>" )
            .children( ".ui-collapsible-content" ),
        ui.heading = ui.originalHeading;

        // Replace collapsibleHeading if it's a legend
        if ( ui.heading.is( "legend" ) ) {
            ui.heading = $( "<div role='heading'>"+ ui.heading.html() +"</div>" );
            ui.placeholder = $( "<div><!-- placeholder for legend --></div>" ).insertBefore( ui.originalHeading );
            ui.originalHeading.remove();
        }

        iconclass = ( opts.collapsed ? ( opts.collapsedIcon ? "ui-icon-" + opts.collapsedIcon : "" ):
            ( opts.expandedIcon ? "ui-icon-" + opts.expandedIcon : "" ) );

        ui.status = $( "<span class='ui-collapsible-heading-status'></span>" );
        ui.anchor = ui.heading
            .detach()
            //modify markup & attributes
            .addClass( "ui-collapsible-heading" )
            .append( ui.status )
            .wrapInner( "<a href='#' class='ui-collapsible-heading-toggle'></a>" )
            .find( "a" )
                .first()
                .addClass( "ui-btn " +
                    ( iconclass ? iconclass + " " : "" ) +
                    ( iconclass ? iconposClass( opts.iconpos ) +
                        " " : "" ) +
                    this._themeClassFromOption( "ui-btn-", opts.theme ) + " " +
                    ( opts.mini ? "ui-mini " : "" ) );

        //drop heading in before content
        ui.heading.insertBefore( ui.content );

        this._handleExpandCollapse( this.options.collapsed );

        return ui;
    },

    refresh: function() {
        this._applyOptions( this.options );
        this._renderedOptions = this._getOptions( this.options );
    },

    _applyOptions: function( options ) {
        var isCollapsed, newTheme, oldTheme, hasCorners, hasIcon,
            elem = this.element,
            currentOpts = this._renderedOptions,
            ui = this._ui,
            anchor = ui.anchor,
            status = ui.status,
            opts = this._getOptions( options );

        // First and foremost we need to make sure the collapsible is in the proper
        // state, in case somebody decided to change the collapsed option at the
        // same time as another option
        if ( options.collapsed !== undefined ) {
            this._handleExpandCollapse( options.collapsed );
        }

        isCollapsed = elem.hasClass( "ui-collapsible-collapsed" );

        // We only need to apply the cue text for the current state right away.
        // The cue text for the alternate state will be stored in the options
        // and applied the next time the collapsible's state is toggled
        if ( isCollapsed ) {
            if ( opts.expandCueText !== undefined ) {
                status.text( opts.expandCueText );
            }
        } else {
            if ( opts.collapseCueText !== undefined ) {
                status.text( opts.collapseCueText );
            }
        }

        // Update icon

        // Is it supposed to have an icon?
        hasIcon =

            // If the collapsedIcon is being set, consult that
            ( opts.collapsedIcon !== undefined ? opts.collapsedIcon !== false :

                // Otherwise consult the existing option value
                currentOpts.collapsedIcon !== false );


        // If any icon-related options have changed, make sure the new icon
        // state is reflected by first removing all icon-related classes
        // reflecting the current state and then adding all icon-related
        // classes for the new state
        if ( !( opts.iconpos === undefined &&
            opts.collapsedIcon === undefined &&
            opts.expandedIcon === undefined ) ) {

            // Remove all current icon-related classes
            anchor.removeClass( [ iconposClass( currentOpts.iconpos ) ]
                .concat( ( currentOpts.expandedIcon ?
                    [ "ui-icon-" + currentOpts.expandedIcon ] : [] ) )
                .concat( ( currentOpts.collapsedIcon ?
                    [ "ui-icon-" + currentOpts.collapsedIcon ] : [] ) )
                .join( " " ) );

            // Add new classes if an icon is supposed to be present
            if ( hasIcon ) {
                anchor.addClass(
                    [ iconposClass( opts.iconpos !== undefined ?
                        opts.iconpos : currentOpts.iconpos ) ]
                        .concat( isCollapsed ?
                            [ "ui-icon-" + ( opts.collapsedIcon !== undefined ?
                                opts.collapsedIcon :
                                currentOpts.collapsedIcon ) ] :
                            [ "ui-icon-" + ( opts.expandedIcon !== undefined ?
                                opts.expandedIcon :
                                currentOpts.expandedIcon ) ] )
                        .join( " " ) );
            }
        }

        if ( opts.theme !== undefined ) {
            oldTheme = this._themeClassFromOption( "ui-btn-", currentOpts.theme );
            newTheme = this._themeClassFromOption( "ui-btn-", opts.theme );
            anchor.removeClass( oldTheme ).addClass( newTheme );
        }

        if ( opts.contentTheme !== undefined ) {
            oldTheme = this._themeClassFromOption( "ui-body-",
                currentOpts.contentTheme );
            newTheme = this._themeClassFromOption( "ui-body-",
                opts.contentTheme );
            ui.content.removeClass( oldTheme ).addClass( newTheme );
        }

        if ( opts.inset !== undefined ) {
            elem.toggleClass( "ui-collapsible-inset", opts.inset );
            hasCorners = !!( opts.inset && ( opts.corners || currentOpts.corners ) );
        }

        if ( opts.corners !== undefined ) {
            hasCorners = !!( opts.corners && ( opts.inset || currentOpts.inset ) );
        }

        if ( hasCorners !== undefined ) {
            elem.toggleClass( "ui-corner-all", hasCorners );
        }

        if ( opts.mini !== undefined ) {
            anchor.toggleClass( "ui-mini", opts.mini );
        }
    },

    _setOptions: function( options ) {
        this._applyOptions( options );
        this._super( options );
        this._renderedOptions = this._getOptions( this.options );
    },

    _handleExpandCollapse: function( isCollapse ) {
        var opts = this._renderedOptions,
            ui = this._ui;

        ui.status.text( isCollapse ? opts.expandCueText : opts.collapseCueText );
        ui.heading
            .toggleClass( "ui-collapsible-heading-collapsed", isCollapse )
            .find( "a" ).first()
            .toggleClass( "ui-icon-" + opts.expandedIcon, !isCollapse )

            // logic or cause same icon for expanded/collapsed state would remove the ui-icon-class
            .toggleClass( "ui-icon-" + opts.collapsedIcon, ( isCollapse || opts.expandedIcon === opts.collapsedIcon ) )
            .removeClass( $.mobile.activeBtnClass );

        this.element.toggleClass( "ui-collapsible-collapsed", isCollapse );
        ui.content
            .toggleClass( "ui-collapsible-content-collapsed", isCollapse )
            .attr( "aria-hidden", isCollapse )
            .trigger( "updatelayout" );
        this.options.collapsed = isCollapse;
        this._trigger( isCollapse ? "collapse" : "expand" );
    },

    expand: function() {
        this._handleExpandCollapse( false );
    },

    collapse: function() {
        this._handleExpandCollapse( true );
    },

    _destroy: function() {
        var ui = this._ui,
            opts = this.options;

        if ( opts.enhanced ) {
            return;
        }

        if ( ui.placeholder ) {
            ui.originalHeading.insertBefore( ui.placeholder );
            ui.placeholder.remove();
            ui.heading.remove();
        } else {
            ui.status.remove();
            ui.heading
                .removeClass( "ui-collapsible-heading ui-collapsible-heading-collapsed" )
                .children()
                    .contents()
                        .unwrap();
        }

        ui.anchor.contents().unwrap();
        ui.content.contents().unwrap();
        this.element
            .removeClass( "ui-collapsible ui-collapsible-collapsed " +
                "ui-collapsible-themed-content ui-collapsible-inset ui-corner-all" );
    }
});

// Defaults to be used by all instances of collapsible if per-instance values
// are unset or if nothing is specified by way of inheritance from an accordion.
// Note that this hash does not contain options "collapsed" or "heading",
// because those are not inheritable.
$.mobile.collapsible.defaults = {
    expandCueText: " click to expand contents",
    collapseCueText: " click to collapse contents",
    collapsedIcon: "plus",
    contentTheme: "inherit",
    expandedIcon: "minus",
    iconpos: "left",
    inset: true,
    corners: true,
    theme: "inherit",
    mini: false
};

})( jQuery );

(function( $, undefined ) {

var uiScreenHiddenRegex = /\bui-screen-hidden\b/;
function noHiddenClass( elements ) {
    var index,
        length = elements.length,
        result = [];

    for ( index = 0; index < length; index++ ) {
        if ( !elements[ index ].className.match( uiScreenHiddenRegex ) ) {
            result.push( elements[ index ] );
        }
    }

    return $( result );
}

$.mobile.behaviors.addFirstLastClasses = {
    _getVisibles: function( $els, create ) {
        var visibles;

        if ( create ) {
            visibles = noHiddenClass( $els );
        } else {
            visibles = $els.filter( ":visible" );
            if ( visibles.length === 0 ) {
                visibles = noHiddenClass( $els );
            }
        }

        return visibles;
    },

    _addFirstLastClasses: function( $els, $visibles, create ) {
        $els.removeClass( "ui-first-child ui-last-child" );
        $visibles.eq( 0 ).addClass( "ui-first-child" ).end().last().addClass( "ui-last-child" );
        if ( !create ) {
            this.element.trigger( "updatelayout" );
        }
    },

    _removeFirstLastClasses: function( $els ) {
        $els.removeClass( "ui-first-child ui-last-child" );
    }
};

})( jQuery );

(function( $, undefined ) {

var childCollapsiblesSelector = ":mobile-collapsible, " + $.mobile.collapsible.initSelector;

$.widget( "mobile.collapsibleset", $.extend( {

    // The initSelector is deprecated as of 1.4.0. In 1.5.0 we will use
    // :jqmData(role='collapsibleset') which will allow us to get rid of the line
    // below altogether, because the autoinit will generate such an initSelector
    initSelector: ":jqmData(role='collapsible-set'),:jqmData(role='collapsibleset')",

    options: $.extend( {
        enhanced: false
    }, $.mobile.collapsible.defaults ),

    _handleCollapsibleExpand: function( event ) {
        var closestCollapsible = $( event.target ).closest( ".ui-collapsible" );

        if ( closestCollapsible.parent().is( ":mobile-collapsibleset, :jqmData(role='collapsible-set')" ) ) {
            closestCollapsible
                .siblings( ".ui-collapsible:not(.ui-collapsible-collapsed)" )
                .collapsible( "collapse" );
        }
    },

    _create: function() {
        var elem = this.element,
            opts = this.options;

        $.extend( this, {
            _classes: ""
        });

        if ( !opts.enhanced ) {
            elem.addClass( "ui-collapsible-set " +
                this._themeClassFromOption( "ui-group-theme-", opts.theme ) + " " +
                ( opts.corners && opts.inset ? "ui-corner-all " : "" ) );
            this.element.find( $.mobile.collapsible.initSelector ).collapsible();
        }

        this._on( elem, { collapsibleexpand: "_handleCollapsibleExpand" } );
    },

    _themeClassFromOption: function( prefix, value ) {
        return ( value ? ( value === "none" ? "" : prefix + value ) : "" );
    },

    _init: function() {
        this._refresh( true );

        // Because the corners are handled by the collapsible itself and the default state is collapsed
        // That was causing https://github.com/jquery/jquery-mobile/issues/4116
        this.element
            .children( childCollapsiblesSelector )
            .filter( ":jqmData(collapsed='false')" )
            .collapsible( "expand" );
    },

    _setOptions: function( options ) {
        var ret, hasCorners,
            elem = this.element,
            themeClass = this._themeClassFromOption( "ui-group-theme-", options.theme );

        if ( themeClass ) {
            elem
                .removeClass( this._themeClassFromOption( "ui-group-theme-", this.options.theme ) )
                .addClass( themeClass );
        }

        if ( options.inset !== undefined ) {
            hasCorners = !!( options.inset && ( options.corners || this.options.corners ) );
        }

        if ( options.corners !== undefined ) {
            hasCorners = !!( options.corners && ( options.inset || this.options.inset ) );
        }

        if ( hasCorners !== undefined ) {
            elem.toggleClass( "ui-corner-all", hasCorners );
        }

        ret = this._super( options );
        this.element.children( ":mobile-collapsible" ).collapsible( "refresh" );
        return ret;
    },

    _destroy: function() {
        var el = this.element;

        this._removeFirstLastClasses( el.children( childCollapsiblesSelector ) );
        el
            .removeClass( "ui-collapsible-set ui-corner-all " +
                this._themeClassFromOption( "ui-group-theme-", this.options.theme ) )
            .children( ":mobile-collapsible" )
            .collapsible( "destroy" );
    },

    _refresh: function( create ) {
        var collapsiblesInSet = this.element.children( childCollapsiblesSelector );

        this.element.find( $.mobile.collapsible.initSelector ).not( ".ui-collapsible" ).collapsible();

        this._addFirstLastClasses( collapsiblesInSet, this._getVisibles( collapsiblesInSet, create ), create );
    },

    refresh: function() {
        this._refresh( false );
    }
}, $.mobile.behaviors.addFirstLastClasses ) );

})( jQuery );

(function( $, undefined ) {

// Deprecated in 1.4
$.fn.fieldcontain = function(/* options */) {
    return this.addClass( "ui-field-contain" );
};

})( jQuery );

(function( $, undefined ) {

$.fn.grid = function( options ) {
    return this.each(function() {

        var $this = $( this ),
            o = $.extend({
                grid: null
            }, options ),
            $kids = $this.children(),
            gridCols = { solo:1, a:2, b:3, c:4, d:5 },
            grid = o.grid,
            iterator,
            letter;

            if ( !grid ) {
                if ( $kids.length <= 5 ) {
                    for ( letter in gridCols ) {
                        if ( gridCols[ letter ] === $kids.length ) {
                            grid = letter;
                        }
                    }
                } else {
                    grid = "a";
                    $this.addClass( "ui-grid-duo" );
                }
            }
            iterator = gridCols[grid];

        $this.addClass( "ui-grid-" + grid );

        $kids.filter( ":nth-child(" + iterator + "n+1)" ).addClass( "ui-block-a" );

        if ( iterator > 1 ) {
            $kids.filter( ":nth-child(" + iterator + "n+2)" ).addClass( "ui-block-b" );
        }
        if ( iterator > 2 ) {
            $kids.filter( ":nth-child(" + iterator + "n+3)" ).addClass( "ui-block-c" );
        }
        if ( iterator > 3 ) {
            $kids.filter( ":nth-child(" + iterator + "n+4)" ).addClass( "ui-block-d" );
        }
        if ( iterator > 4 ) {
            $kids.filter( ":nth-child(" + iterator + "n+5)" ).addClass( "ui-block-e" );
        }
    });
};
})( jQuery );

(function( $, undefined ) {

$.widget( "mobile.navbar", {
    options: {
        iconpos: "top",
        grid: null
    },

    _create: function() {

        var $navbar = this.element,
            $navbtns = $navbar.find( "a, button" ),
            iconpos = $navbtns.filter( ":jqmData(icon)" ).length ? this.options.iconpos : undefined;

        $navbar.addClass( "ui-navbar" )
            .attr( "role", "navigation" )
            .find( "ul" )
            .jqmEnhanceable()
            .grid({ grid: this.options.grid });

        $navbtns
            .each( function() {
                var icon = $.mobile.getAttribute( this, "icon" ),
                    theme = $.mobile.getAttribute( this, "theme" ),
                    classes = "ui-btn";

                if ( theme ) {
                    classes += " ui-btn-" + theme;
                }
                if ( icon ) {
                    classes += " ui-icon-" + icon + " ui-btn-icon-" + iconpos;
                }
                $( this ).addClass( classes );
            });

        $navbar.delegate( "a", "vclick", function( /* event */ ) {
            var activeBtn = $( this );

            if ( !( activeBtn.hasClass( "ui-state-disabled" ) ||

                // DEPRECATED as of 1.4.0 - remove after 1.4.0 release
                // only ui-state-disabled should be present thereafter
                activeBtn.hasClass( "ui-disabled" ) ||
                activeBtn.hasClass( $.mobile.activeBtnClass ) ) ) {

                $navbtns.removeClass( $.mobile.activeBtnClass );
                activeBtn.addClass( $.mobile.activeBtnClass );

                // The code below is a workaround to fix #1181
                $( document ).one( "pagehide", function() {
                    activeBtn.removeClass( $.mobile.activeBtnClass );
                });
            }
        });

        // Buttons in the navbar with ui-state-persist class should regain their active state before page show
        $navbar.closest( ".ui-page" ).bind( "pagebeforeshow", function() {
            $navbtns.filter( ".ui-state-persist" ).addClass( $.mobile.activeBtnClass );
        });
    }
});

})( jQuery );

(function( $, undefined ) {

var getAttr = $.mobile.getAttribute;

$.widget( "mobile.listview", $.extend( {

    options: {
        theme: null,
        countTheme: null, /* Deprecated in 1.4 */
        dividerTheme: null,
        icon: "carat-r",
        splitIcon: "carat-r",
        splitTheme: null,
        corners: true,
        shadow: true,
        inset: false
    },

    _create: function() {
        var t = this,
            listviewClasses = "";

        listviewClasses += t.options.inset ? " ui-listview-inset" : "";

        if ( !!t.options.inset ) {
            listviewClasses += t.options.corners ? " ui-corner-all" : "";
            listviewClasses += t.options.shadow ? " ui-shadow" : "";
        }

        // create listview markup
        t.element.addClass( " ui-listview" + listviewClasses );

        t.refresh( true );
    },

    // TODO: Remove in 1.5
    _findFirstElementByTagName: function( ele, nextProp, lcName, ucName ) {
        var dict = {};
        dict[ lcName ] = dict[ ucName ] = true;
        while ( ele ) {
            if ( dict[ ele.nodeName ] ) {
                return ele;
            }
            ele = ele[ nextProp ];
        }
        return null;
    },
    // TODO: Remove in 1.5
    _addThumbClasses: function( containers ) {
        var i, img, len = containers.length;
        for ( i = 0; i < len; i++ ) {
            img = $( this._findFirstElementByTagName( containers[ i ].firstChild, "nextSibling", "img", "IMG" ) );
            if ( img.length ) {
                $( this._findFirstElementByTagName( img[ 0 ].parentNode, "parentNode", "li", "LI" ) ).addClass( img.hasClass( "ui-li-icon" ) ? "ui-li-has-icon" : "ui-li-has-thumb" );
            }
        }
    },

    _getChildrenByTagName: function( ele, lcName, ucName ) {
        var results = [],
            dict = {};
        dict[ lcName ] = dict[ ucName ] = true;
        ele = ele.firstChild;
        while ( ele ) {
            if ( dict[ ele.nodeName ] ) {
                results.push( ele );
            }
            ele = ele.nextSibling;
        }
        return $( results );
    },

    _beforeListviewRefresh: $.noop,
    _afterListviewRefresh: $.noop,

    refresh: function( create ) {
        var buttonClass, pos, numli, item, itemClass, itemTheme, itemIcon, icon, a,
            isDivider, startCount, newStartCount, value, last, splittheme, splitThemeClass, spliticon,
            altButtonClass, dividerTheme, li,
            o = this.options,
            $list = this.element,
            ol = !!$.nodeName( $list[ 0 ], "ol" ),
            start = $list.attr( "start" ),
            itemClassDict = {},
            countBubbles = $list.find( ".ui-li-count" ),
            countTheme = getAttr( $list[ 0 ], "counttheme" ) || this.options.countTheme,
            countThemeClass = countTheme ? "ui-body-" + countTheme : "ui-body-inherit";

        if ( o.theme ) {
            $list.addClass( "ui-group-theme-" + o.theme );
        }

        // Check if a start attribute has been set while taking a value of 0 into account
        if ( ol && ( start || start === 0 ) ) {
            startCount = parseInt( start, 10 ) - 1;
            $list.css( "counter-reset", "listnumbering " + startCount );
        }

        this._beforeListviewRefresh();

        li = this._getChildrenByTagName( $list[ 0 ], "li", "LI" );

        for ( pos = 0, numli = li.length; pos < numli; pos++ ) {
            item = li.eq( pos );
            itemClass = "";

            if ( create || item[ 0 ].className.search( /\bui-li-static\b|\bui-li-divider\b/ ) < 0 ) {
                a = this._getChildrenByTagName( item[ 0 ], "a", "A" );
                isDivider = ( getAttr( item[ 0 ], "role" ) === "list-divider" );
                value = item.attr( "value" );
                itemTheme = getAttr( item[ 0 ], "theme" );

                if ( a.length && a[ 0 ].className.search( /\bui-btn\b/ ) < 0 && !isDivider ) {
                    itemIcon = getAttr( item[ 0 ], "icon" );
                    icon = ( itemIcon === false ) ? false : ( itemIcon || o.icon );

                    // TODO: Remove in 1.5 together with links.js (links.js / .ui-link deprecated in 1.4)
                    a.removeClass( "ui-link" );

                    buttonClass = "ui-btn";

                    if ( itemTheme ) {
                        buttonClass += " ui-btn-" + itemTheme;
                    }

                    if ( a.length > 1 ) {
                        itemClass = "ui-li-has-alt";

                        last = a.last();
                        splittheme = getAttr( last[ 0 ], "theme" ) || o.splitTheme || getAttr( item[ 0 ], "theme", true );
                        splitThemeClass = splittheme ? " ui-btn-" + splittheme : "";
                        spliticon = getAttr( last[ 0 ], "icon" ) || getAttr( item[ 0 ], "icon" ) || o.splitIcon;
                        altButtonClass = "ui-btn ui-btn-icon-notext ui-icon-" + spliticon + splitThemeClass;

                        last
                            .attr( "title", $.trim( last.getEncodedText() ) )
                            .addClass( altButtonClass )
                            .empty();

                        // Reduce to the first anchor, because only the first gets the buttonClass
                        a = a.first();
                    } else if ( icon ) {
                        buttonClass += " ui-btn-icon-right ui-icon-" + icon;
                    }

                    // Apply buttonClass to the (first) anchor
                    a.addClass( buttonClass );
                } else if ( isDivider ) {
                    dividerTheme = ( getAttr( item[ 0 ], "theme" ) || o.dividerTheme || o.theme );

                    itemClass = "ui-li-divider ui-bar-" + ( dividerTheme ? dividerTheme : "inherit" );

                    item.attr( "role", "heading" );
                } else if ( a.length <= 0 ) {
                    itemClass = "ui-li-static ui-body-" + ( itemTheme ? itemTheme : "inherit" );
                }
                if ( ol && value ) {
                    newStartCount = parseInt( value , 10 ) - 1;

                    item.css( "counter-reset", "listnumbering " + newStartCount );
                }
            }

            // Instead of setting item class directly on the list item
            // at this point in time, push the item into a dictionary
            // that tells us what class to set on it so we can do this after this
            // processing loop is finished.

            if ( !itemClassDict[ itemClass ] ) {
                itemClassDict[ itemClass ] = [];
            }

            itemClassDict[ itemClass ].push( item[ 0 ] );
        }

        // Set the appropriate listview item classes on each list item.
        // The main reason we didn't do this
        // in the for-loop above is because we can eliminate per-item function overhead
        // by calling addClass() and children() once or twice afterwards. This
        // can give us a significant boost on platforms like WP7.5.

        for ( itemClass in itemClassDict ) {
            $( itemClassDict[ itemClass ] ).addClass( itemClass );
        }

        countBubbles.each( function() {
            $( this ).closest( "li" ).addClass( "ui-li-has-count" );
        });
        if ( countThemeClass ) {
            countBubbles.not( "[class*='ui-body-']" ).addClass( countThemeClass );
        }

        // Deprecated in 1.4. From 1.5 you have to add class ui-li-has-thumb or ui-li-has-icon to the LI.
        this._addThumbClasses( li );
        this._addThumbClasses( li.find( ".ui-btn" ) );

        this._afterListviewRefresh();

        this._addFirstLastClasses( li, this._getVisibles( li, create ), create );
    }
}, $.mobile.behaviors.addFirstLastClasses ) );

})( jQuery );

(function( $, undefined ) {

function defaultAutodividersSelector( elt ) {
    // look for the text in the given element
    var text = $.trim( elt.text() ) || null;

    if ( !text ) {
        return null;
    }

    // create the text for the divider (first uppercased letter)
    text = text.slice( 0, 1 ).toUpperCase();

    return text;
}

$.widget( "mobile.listview", $.mobile.listview, {
    options: {
        autodividers: false,
        autodividersSelector: defaultAutodividersSelector
    },

    _beforeListviewRefresh: function() {
        if ( this.options.autodividers ) {
            this._replaceDividers();
            this._superApply( arguments );
        }
    },

    _replaceDividers: function() {
        var i, lis, li, dividerText,
            lastDividerText = null,
            list = this.element,
            divider;

        list.children( "li:jqmData(role='list-divider')" ).remove();

        lis = list.children( "li" );

        for ( i = 0; i < lis.length ; i++ ) {
            li = lis[ i ];
            dividerText = this.options.autodividersSelector( $( li ) );

            if ( dividerText && lastDividerText !== dividerText ) {
                divider = document.createElement( "li" );
                divider.appendChild( document.createTextNode( dividerText ) );
                divider.setAttribute( "data-" + $.mobile.ns + "role", "list-divider" );
                li.parentNode.insertBefore( divider, li );
            }

            lastDividerText = dividerText;
        }
    }
});

})( jQuery );

(function( $, undefined ) {

var rdivider = /(^|\s)ui-li-divider($|\s)/,
    rhidden = /(^|\s)ui-screen-hidden($|\s)/;

$.widget( "mobile.listview", $.mobile.listview, {
    options: {
        hideDividers: false
    },

    _afterListviewRefresh: function() {
        var items, idx, item, hideDivider = true;

        this._superApply( arguments );

        if ( this.options.hideDividers ) {
            items = this._getChildrenByTagName( this.element[ 0 ], "li", "LI" );
            for ( idx = items.length - 1 ; idx > -1 ; idx-- ) {
                item = items[ idx ];
                if ( item.className.match( rdivider ) ) {
                    if ( hideDivider ) {
                        item.className = item.className + " ui-screen-hidden";
                    }
                    hideDivider = true;
                } else {
                    if ( !item.className.match( rhidden ) ) {
                        hideDivider = false;
                    }
                }
            }
        }
    }
});

})( jQuery );

(function( $, undefined ) {

$.mobile.nojs = function( target ) {
    $( ":jqmData(role='nojs')", target ).addClass( "ui-nojs" );
};

})( jQuery );

(function( $, undefined ) {

$.mobile.behaviors.formReset = {
    _handleFormReset: function() {
        this._on( this.element.closest( "form" ), {
            reset: function() {
                this._delay( "_reset" );
            }
        });
    }
};

})( jQuery );

/*
* "checkboxradio" plugin
*/

(function( $, undefined ) {

var escapeId = $.mobile.path.hashToSelector;

$.widget( "mobile.checkboxradio", $.extend( {

    initSelector: "input:not( :jqmData(role='flipswitch' ) )[type='checkbox'],input[type='radio']:not( :jqmData(role='flipswitch' ))",

    options: {
        theme: "inherit",
        mini: false,
        wrapperClass: null,
        enhanced: false,
        iconpos: "left"

    },
    _create: function() {
        var input = this.element,
            o = this.options,
            inheritAttr = function( input, dataAttr ) {
                return input.jqmData( dataAttr ) ||
                    input.closest( "form, fieldset" ).jqmData( dataAttr );
            },
            label = this.options.enhanced ?
                {
                    element: this.element.siblings( "label" ),
                    isParent: false
                } :
                this._findLabel(),
            inputtype = input[0].type,
            checkedClass = "ui-" + inputtype + "-on",
            uncheckedClass = "ui-" + inputtype + "-off";

        if ( inputtype !== "checkbox" && inputtype !== "radio" ) {
            return;
        }

        if ( this.element[0].disabled ) {
            this.options.disabled = true;
        }

        o.iconpos = inheritAttr( input, "iconpos" ) ||
            label.element.attr( "data-" + $.mobile.ns + "iconpos" ) || o.iconpos,

        // Establish options
        o.mini = inheritAttr( input, "mini" ) || o.mini;

        // Expose for other methods
        $.extend( this, {
            input: input,
            label: label.element,
            labelIsParent: label.isParent,
            inputtype: inputtype,
            checkedClass: checkedClass,
            uncheckedClass: uncheckedClass
        });

        if ( !this.options.enhanced ) {
            this._enhance();
        }

        this._on( label.element, {
            vmouseover: "_handleLabelVMouseOver",
            vclick: "_handleLabelVClick"
        });

        this._on( input, {
            vmousedown: "_cacheVals",
            vclick: "_handleInputVClick",
            focus: "_handleInputFocus",
            blur: "_handleInputBlur"
        });

        this._handleFormReset();
        this.refresh();
    },

    _findLabel: function() {
        var parentLabel, label, isParent,
            input = this.element,
            labelsList = input[ 0 ].labels;

        if( labelsList && labelsList.length > 0 ) {
            label = $( labelsList[ 0 ] );
            isParent = $.contains( label[ 0 ], input[ 0 ] );
        } else {
            parentLabel = input.closest( "label" );
            isParent = ( parentLabel.length > 0 );

            // NOTE: Windows Phone could not find the label through a selector
            // filter works though.
            label = isParent ? parentLabel :
                $( this.document[ 0 ].getElementsByTagName( "label" ) )
                    .filter( "[for='" + escapeId( input[ 0 ].id ) + "']" )
                    .first();
        }

        return {
            element: label,
            isParent: isParent
        };
    },

    _enhance: function() {
        this.label.addClass( "ui-btn ui-corner-all");

        if ( this.labelIsParent ) {
            this.input.add( this.label ).wrapAll( this._wrapper() );
        } else {
            //this.element.replaceWith( this.input.add( this.label ).wrapAll( this._wrapper() ) );
            this.element.wrap( this._wrapper() );
            this.element.parent().prepend( this.label );
        }

        // Wrap the input + label in a div

        this._setOptions({
            "theme": this.options.theme,
            "iconpos": this.options.iconpos,
            "mini": this.options.mini
        });

    },

    _wrapper: function() {
        return $( "<div class='"  +
            ( this.options.wrapperClass ? this.options.wrapperClass : "" ) +
            " ui-" + this.inputtype +
            ( this.options.disabled ? " ui-state-disabled" : "" ) + "' ></div>" );
    },

    _handleInputFocus: function() {
        this.label.addClass( $.mobile.focusClass );
    },

    _handleInputBlur: function() {
        this.label.removeClass( $.mobile.focusClass );
    },

    _handleInputVClick: function() {
        // Adds checked attribute to checked input when keyboard is used
        this.element.prop( "checked", this.element.is( ":checked" ) );
        this._getInputSet().not( this.element ).prop( "checked", false );
        this._updateAll( true );
    },

    _handleLabelVMouseOver: function( event ) {
        if ( this.label.parent().hasClass( "ui-state-disabled" ) ) {
            event.stopPropagation();
        }
    },

    _handleLabelVClick: function( event ) {
        var input = this.element;

        if ( input.is( ":disabled" ) ) {
            event.preventDefault();
            return;
        }

        this._cacheVals();

        input.prop( "checked", this.inputtype === "radio" && true || !input.prop( "checked" ) );

        // trigger click handler's bound directly to the input as a substitute for
        // how label clicks behave normally in the browsers
        // TODO: it would be nice to let the browser's handle the clicks and pass them
        //       through to the associate input. we can swallow that click at the parent
        //       wrapper element level
        input.triggerHandler( "click" );

        // Input set for common radio buttons will contain all the radio
        // buttons, but will not for checkboxes. clearing the checked status
        // of other radios ensures the active button state is applied properly
        this._getInputSet().not( input ).prop( "checked", false );

        this._updateAll();
        return false;
    },

    _cacheVals: function() {
        this._getInputSet().each( function() {
            $( this ).attr("data-" + $.mobile.ns + "cacheVal", this.checked );
        });
    },

    // Returns those radio buttons that are supposed to be in the same group as
    // this radio button. In the case of a checkbox or a radio lacking a name
    // attribute, it returns this.element.
    _getInputSet: function() {
        var selector, formId,
            radio = this.element[ 0 ],
            name = radio.name,
            form = radio.form,
            doc = this.element.parents().last().get( 0 ),

            // A radio is always a member of its own group
            radios = this.element;

        // Only start running selectors if this is an attached radio button with a name
        if ( name && this.inputtype === "radio" && doc ) {
            selector = "input[type='radio'][name='" + escapeId( name ) + "']";

            // If we're inside a form
            if ( form ) {
                formId = form.getAttribute( "id" );

                // If the form has an ID, collect radios scattered throught the document which
                // nevertheless are part of the form by way of the value of their form attribute
                if ( formId ) {
                    radios = $( selector + "[form='" + escapeId( formId ) + "']", doc );
                }

                // Also add to those the radios in the form itself
                radios = $( form ).find( selector ).filter( function() {

                    // Some radios inside the form may belong to some other form by virtue of
                    // having a form attribute defined on them, so we must filter them out here
                    return ( this.form === form );
                }).add( radios );

            // If we're outside a form
            } else {

                // Collect all those radios which are also outside of a form and match our name
                radios = $( selector, doc ).filter( function() {
                    return !this.form;
                });
            }
        }
        return radios;
    },

    _updateAll: function( changeTriggered ) {
        var self = this;

        this._getInputSet().each( function() {
            var $this = $( this );

            if ( ( this.checked || self.inputtype === "checkbox" ) && !changeTriggered ) {
                $this.trigger( "change" );
            }
        })
        .checkboxradio( "refresh" );
    },

    _reset: function() {
        this.refresh();
    },

    // Is the widget supposed to display an icon?
    _hasIcon: function() {
        var controlgroup, controlgroupWidget,
            controlgroupConstructor = $.mobile.controlgroup;

        // If the controlgroup widget is defined ...
        if ( controlgroupConstructor ) {
            controlgroup = this.element.closest(
                ":mobile-controlgroup," +
                controlgroupConstructor.prototype.initSelector );

            // ... and the checkbox is in a controlgroup ...
            if ( controlgroup.length > 0 ) {

                // ... look for a controlgroup widget instance, and ...
                controlgroupWidget = $.data( controlgroup[ 0 ], "mobile-controlgroup" );

                // ... if found, decide based on the option value, ...
                return ( ( controlgroupWidget ? controlgroupWidget.options.type :

                    // ... otherwise decide based on the "type" data attribute.
                    controlgroup.attr( "data-" + $.mobile.ns + "type" ) ) !== "horizontal" );
            }
        }

        // Normally, the widget displays an icon.
        return true;
    },

    refresh: function() {
        var isChecked = this.element[ 0 ].checked,
            active = $.mobile.activeBtnClass,
            iconposClass = "ui-btn-icon-" + this.options.iconpos,
            addClasses = [],
            removeClasses = [];

        if ( this._hasIcon() ) {
            removeClasses.push( active );
            addClasses.push( iconposClass );
        } else {
            removeClasses.push( iconposClass );
            ( isChecked ? addClasses : removeClasses ).push( active );
        }

        if ( isChecked ) {
            addClasses.push( this.checkedClass );
            removeClasses.push( this.uncheckedClass );
        } else {
            addClasses.push( this.uncheckedClass );
            removeClasses.push( this.checkedClass );
        }

        this.widget().toggleClass( "ui-state-disabled", this.element.prop( "disabled" ) );

        this.label
            .addClass( addClasses.join( " " ) )
            .removeClass( removeClasses.join( " " ) );
    },

    widget: function() {
        return this.label.parent();
    },

    _setOptions: function( options ) {
        var label = this.label,
            currentOptions = this.options,
            outer = this.widget(),
            hasIcon = this._hasIcon();

        if ( options.disabled !== undefined ) {
            this.input.prop( "disabled", !!options.disabled );
            outer.toggleClass( "ui-state-disabled", !!options.disabled );
        }
        if ( options.mini !== undefined ) {
            outer.toggleClass( "ui-mini", !!options.mini );
        }
        if ( options.theme !== undefined ) {
            label
                .removeClass( "ui-btn-" + currentOptions.theme )
                .addClass( "ui-btn-" + options.theme );
        }
        if ( options.wrapperClass !== undefined ) {
            outer
                .removeClass( currentOptions.wrapperClass )
                .addClass( options.wrapperClass );
        }
        if ( options.iconpos !== undefined && hasIcon ) {
            label.removeClass( "ui-btn-icon-" + currentOptions.iconpos ).addClass( "ui-btn-icon-" + options.iconpos );
        } else if ( !hasIcon ) {
            label.removeClass( "ui-btn-icon-" + currentOptions.iconpos );
        }
        this._super( options );
    }

}, $.mobile.behaviors.formReset ) );

})( jQuery );

(function( $, undefined ) {

$.widget( "mobile.button", {

    initSelector: "input[type='button'], input[type='submit'], input[type='reset']",

    options: {
        theme: null,
        icon: null,
        iconpos: "left",
        iconshadow: false, /* TODO: Deprecated in 1.4, remove in 1.5. */
        corners: true,
        shadow: true,
        inline: null,
        mini: null,
        wrapperClass: null,
        enhanced: false
    },

    _create: function() {

        if ( this.element.is( ":disabled" ) ) {
            this.options.disabled = true;
        }

        if ( !this.options.enhanced ) {
            this._enhance();
        }

        $.extend( this, {
            wrapper: this.element.parent()
        });

        this._on( {
            focus: function() {
                this.widget().addClass( $.mobile.focusClass );
            },

            blur: function() {
                this.widget().removeClass( $.mobile.focusClass );
            }
        });

        this.refresh( true );
    },

    _enhance: function() {
        this.element.wrap( this._button() );
    },

    _button: function() {
        var options = this.options,
            iconClasses = this._getIconClasses( this.options );

        return $("<div class='ui-btn ui-input-btn" +
            ( options.wrapperClass ? " " + options.wrapperClass : "" ) +
            ( options.theme ? " ui-btn-" + options.theme : "" ) +
            ( options.corners ? " ui-corner-all" : "" ) +
            ( options.shadow ? " ui-shadow" : "" ) +
            ( options.inline ? " ui-btn-inline" : "" ) +
            ( options.mini ? " ui-mini" : "" ) +
            ( options.disabled ? " ui-state-disabled" : "" ) +
            ( iconClasses ? ( " " + iconClasses ) : "" ) +
            "' >" + this.element.val() + "</div>" );
    },

    widget: function() {
        return this.wrapper;
    },

    _destroy: function() {
            this.element.insertBefore( this.wrapper );
            this.wrapper.remove();
    },

    _getIconClasses: function( options ) {
        return ( options.icon ? ( "ui-icon-" + options.icon +
            ( options.iconshadow ? " ui-shadow-icon" : "" ) + /* TODO: Deprecated in 1.4, remove in 1.5. */
            " ui-btn-icon-" + options.iconpos ) : "" );
    },

    _setOptions: function( options ) {
        var outer = this.widget();

        if ( options.theme !== undefined ) {
            outer
                .removeClass( this.options.theme )
                .addClass( "ui-btn-" + options.theme );
        }
        if ( options.corners !== undefined ) {
            outer.toggleClass( "ui-corner-all", options.corners );
        }
        if ( options.shadow !== undefined ) {
            outer.toggleClass( "ui-shadow", options.shadow );
        }
        if ( options.inline !== undefined ) {
            outer.toggleClass( "ui-btn-inline", options.inline );
        }
        if ( options.mini !== undefined ) {
            outer.toggleClass( "ui-mini", options.mini );
        }
        if ( options.disabled !== undefined ) {
            this.element.prop( "disabled", options.disabled );
            outer.toggleClass( "ui-state-disabled", options.disabled );
        }

        if ( options.icon !== undefined ||
                options.iconshadow !== undefined || /* TODO: Deprecated in 1.4, remove in 1.5. */
                options.iconpos !== undefined ) {
            outer
                .removeClass( this._getIconClasses( this.options ) )
                .addClass( this._getIconClasses(
                    $.extend( {}, this.options, options ) ) );
        }

        this._super( options );
    },

    refresh: function( create ) {
        var originalElement,
            isDisabled = this.element.prop( "disabled" );

        if ( this.options.icon && this.options.iconpos === "notext" && this.element.attr( "title" ) ) {
            this.element.attr( "title", this.element.val() );
        }
        if ( !create ) {
            originalElement = this.element.detach();
            $( this.wrapper ).text( this.element.val() ).append( originalElement );
        }
        if ( this.options.disabled !== isDisabled ) {
            this._setOptions({ disabled: isDisabled });
        }
    }
});

})( jQuery );

(function( $ ) {
    var    meta = $( "meta[name=viewport]" ),
        initialContent = meta.attr( "content" ),
        disabledZoom = initialContent + ",maximum-scale=1, user-scalable=no",
        enabledZoom = initialContent + ",maximum-scale=10, user-scalable=yes",
        disabledInitially = /(user-scalable[\s]*=[\s]*no)|(maximum-scale[\s]*=[\s]*1)[$,\s]/.test( initialContent );

    $.mobile.zoom = $.extend( {}, {
        enabled: !disabledInitially,
        locked: false,
        disable: function( lock ) {
            if ( !disabledInitially && !$.mobile.zoom.locked ) {
                meta.attr( "content", disabledZoom );
                $.mobile.zoom.enabled = false;
                $.mobile.zoom.locked = lock || false;
            }
        },
        enable: function( unlock ) {
            if ( !disabledInitially && ( !$.mobile.zoom.locked || unlock === true ) ) {
                meta.attr( "content", enabledZoom );
                $.mobile.zoom.enabled = true;
                $.mobile.zoom.locked = false;
            }
        },
        restore: function() {
            if ( !disabledInitially ) {
                meta.attr( "content", initialContent );
                $.mobile.zoom.enabled = true;
            }
        }
    });

}( jQuery ));

(function( $, undefined ) {

$.widget( "mobile.textinput", {
    initSelector: "input[type='text']," +
        "input[type='search']," +
        ":jqmData(type='search')," +
        "input[type='number']," +
        ":jqmData(type='number')," +
        "input[type='password']," +
        "input[type='email']," +
        "input[type='url']," +
        "input[type='tel']," +
        "textarea," +
        "input[type='time']," +
        "input[type='date']," +
        "input[type='month']," +
        "input[type='week']," +
        "input[type='datetime']," +
        "input[type='datetime-local']," +
        "input[type='color']," +
        "input:not([type])," +
        "input[type='file']",

    options: {
        theme: null,
        corners: true,
        mini: false,
        // This option defaults to true on iOS devices.
        preventFocusZoom: /iPhone|iPad|iPod/.test( navigator.platform ) && navigator.userAgent.indexOf( "AppleWebKit" ) > -1,
        wrapperClass: "",
        enhanced: false
    },

    _create: function() {

        var options = this.options,
            isSearch = this.element.is( "[type='search'], :jqmData(type='search')" ),
            isTextarea = this.element[ 0 ].tagName === "TEXTAREA",
            isRange = this.element.is( "[data-" + ( $.mobile.ns || "" ) + "type='range']" ),
            inputNeedsWrap = ( (this.element.is( "input" ) ||
                this.element.is( "[data-" + ( $.mobile.ns || "" ) + "type='search']" ) ) &&
                    !isRange );

        if ( this.element.prop( "disabled" ) ) {
            options.disabled = true;
        }

        $.extend( this, {
            classes: this._classesFromOptions(),
            isSearch: isSearch,
            isTextarea: isTextarea,
            isRange: isRange,
            inputNeedsWrap: inputNeedsWrap
        });

        this._autoCorrect();

        if ( !options.enhanced ) {
            this._enhance();
        }

        this._on( {
            "focus": "_handleFocus",
            "blur": "_handleBlur"
        });

    },

    refresh: function() {
        this.setOptions({
            "disabled" : this.element.is( ":disabled" )
        });
    },

    _enhance: function() {
        var elementClasses = [];

        if ( this.isTextarea ) {
            elementClasses.push( "ui-input-text" );
        }

        if ( this.isTextarea || this.isRange ) {
            elementClasses.push( "ui-shadow-inset" );
        }

        //"search" and "text" input widgets
        if ( this.inputNeedsWrap ) {
            this.element.wrap( this._wrap() );
        } else {
            elementClasses = elementClasses.concat( this.classes );
        }

        this.element.addClass( elementClasses.join( " " ) );
    },

    widget: function() {
        return ( this.inputNeedsWrap ) ? this.element.parent() : this.element;
    },

    _classesFromOptions: function() {
        var options = this.options,
            classes = [];

        classes.push( "ui-body-" + ( ( options.theme === null ) ? "inherit" : options.theme ) );
        if ( options.corners ) {
            classes.push( "ui-corner-all" );
        }
        if ( options.mini ) {
            classes.push( "ui-mini" );
        }
        if ( options.disabled ) {
            classes.push( "ui-state-disabled" );
        }
        if ( options.wrapperClass ) {
            classes.push( options.wrapperClass );
        }

        return classes;
    },

    _wrap: function() {
        return $( "<div class='" +
            ( this.isSearch ? "ui-input-search " : "ui-input-text " ) +
            this.classes.join( " " ) + " " +
            "ui-shadow-inset'></div>" );
    },

    _autoCorrect: function() {
        // XXX: Temporary workaround for issue 785 (Apple bug 8910589).
        //      Turn off autocorrect and autocomplete on non-iOS 5 devices
        //      since the popup they use can't be dismissed by the user. Note
        //      that we test for the presence of the feature by looking for
        //      the autocorrect property on the input element. We currently
        //      have no test for iOS 5 or newer so we're temporarily using
        //      the touchOverflow support flag for jQM 1.0. Yes, I feel dirty.
        //      - jblas
        if ( typeof this.element[0].autocorrect !== "undefined" &&
            !$.support.touchOverflow ) {

            // Set the attribute instead of the property just in case there
            // is code that attempts to make modifications via HTML.
            this.element[0].setAttribute( "autocorrect", "off" );
            this.element[0].setAttribute( "autocomplete", "off" );
        }
    },

    _handleBlur: function() {
        this.widget().removeClass( $.mobile.focusClass );
        if ( this.options.preventFocusZoom ) {
            $.mobile.zoom.enable( true );
        }
    },

    _handleFocus: function() {
        // In many situations, iOS will zoom into the input upon tap, this
        // prevents that from happening
        if ( this.options.preventFocusZoom ) {
            $.mobile.zoom.disable( true );
        }
        this.widget().addClass( $.mobile.focusClass );
    },

    _setOptions: function ( options ) {
        var outer = this.widget();

        this._super( options );

        if ( !( options.disabled === undefined &&
            options.mini === undefined &&
            options.corners === undefined &&
            options.theme === undefined &&
            options.wrapperClass === undefined ) ) {

            outer.removeClass( this.classes.join( " " ) );
            this.classes = this._classesFromOptions();
            outer.addClass( this.classes.join( " " ) );
        }

        if ( options.disabled !== undefined ) {
            this.element.prop( "disabled", !!options.disabled );
        }
    },

    _destroy: function() {
        if ( this.options.enhanced ) {
            return;
        }
        if ( this.inputNeedsWrap ) {
            this.element.unwrap();
        }
        this.element.removeClass( "ui-input-text " + this.classes.join( " " ) );
    }
});

})( jQuery );

(function( $, undefined ) {

$.widget( "mobile.slider", $.extend( {
    initSelector: "input[type='range'], :jqmData(type='range'), :jqmData(role='slider')",

    widgetEventPrefix: "slide",

    options: {
        theme: null,
        trackTheme: null,
        corners: true,
        mini: false,
        highlight: false
    },

    _create: function() {

        // TODO: Each of these should have comments explain what they're for
        var self = this,
            control = this.element,
            trackTheme = this.options.trackTheme || $.mobile.getAttribute( control[ 0 ], "theme" ),
            trackThemeClass = trackTheme ? " ui-bar-" + trackTheme : " ui-bar-inherit",
            cornerClass = ( this.options.corners || control.jqmData( "corners" ) ) ? " ui-corner-all" : "",
            miniClass = ( this.options.mini || control.jqmData( "mini" ) ) ? " ui-mini" : "",
            cType = control[ 0 ].nodeName.toLowerCase(),
            isToggleSwitch = ( cType === "select" ),
            isRangeslider = control.parent().is( ":jqmData(role='rangeslider')" ),
            selectClass = ( isToggleSwitch ) ? "ui-slider-switch" : "",
            controlID = control.attr( "id" ),
            $label = $( "[for='" + controlID + "']" ),
            labelID = $label.attr( "id" ) || controlID + "-label",
            min = !isToggleSwitch ? parseFloat( control.attr( "min" ) ) : 0,
            max =  !isToggleSwitch ? parseFloat( control.attr( "max" ) ) : control.find( "option" ).length-1,
            step = window.parseFloat( control.attr( "step" ) || 1 ),
            domHandle = document.createElement( "a" ),
            handle = $( domHandle ),
            domSlider = document.createElement( "div" ),
            slider = $( domSlider ),
            valuebg = this.options.highlight && !isToggleSwitch ? (function() {
                var bg = document.createElement( "div" );
                bg.className = "ui-slider-bg " + $.mobile.activeBtnClass;
                return $( bg ).prependTo( slider );
            })() : false,
            options,
            wrapper,
            j, length,
            i, optionsCount, origTabIndex,
            side, activeClass, sliderImg;

        $label.attr( "id", labelID );
        this.isToggleSwitch = isToggleSwitch;

        domHandle.setAttribute( "href", "#" );
        domSlider.setAttribute( "role", "application" );
        domSlider.className = [ this.isToggleSwitch ? "ui-slider ui-slider-track ui-shadow-inset " : "ui-slider-track ui-shadow-inset ", selectClass, trackThemeClass, cornerClass, miniClass ].join( "" );
        domHandle.className = "ui-slider-handle";
        domSlider.appendChild( domHandle );

        handle.attr({
            "role": "slider",
            "aria-valuemin": min,
            "aria-valuemax": max,
            "aria-valuenow": this._value(),
            "aria-valuetext": this._value(),
            "title": this._value(),
            "aria-labelledby": labelID
        });

        $.extend( this, {
            slider: slider,
            handle: handle,
            control: control,
            type: cType,
            step: step,
            max: max,
            min: min,
            valuebg: valuebg,
            isRangeslider: isRangeslider,
            dragging: false,
            beforeStart: null,
            userModified: false,
            mouseMoved: false
        });

        if ( isToggleSwitch ) {
            // TODO: restore original tabindex (if any) in a destroy method
            origTabIndex = control.attr( "tabindex" );
            if ( origTabIndex ) {
                handle.attr( "tabindex", origTabIndex );
            }
            control.attr( "tabindex", "-1" ).focus(function() {
                $( this ).blur();
                handle.focus();
            });

            wrapper = document.createElement( "div" );
            wrapper.className = "ui-slider-inneroffset";

            for ( j = 0, length = domSlider.childNodes.length; j < length; j++ ) {
                wrapper.appendChild( domSlider.childNodes[j] );
            }

            domSlider.appendChild( wrapper );

            // slider.wrapInner( "<div class='ui-slider-inneroffset'></div>" );

            // make the handle move with a smooth transition
            handle.addClass( "ui-slider-handle-snapping" );

            options = control.find( "option" );

            for ( i = 0, optionsCount = options.length; i < optionsCount; i++ ) {
                side = !i ? "b" : "a";
                activeClass = !i ? "" : " " + $.mobile.activeBtnClass;
                sliderImg = document.createElement( "span" );

                sliderImg.className = [ "ui-slider-label ui-slider-label-", side, activeClass ].join( "" );
                sliderImg.setAttribute( "role", "img" );
                sliderImg.appendChild( document.createTextNode( options[i].innerHTML ) );
                $( sliderImg ).prependTo( slider );
            }

            self._labels = $( ".ui-slider-label", slider );

        }

        // monitor the input for updated values
        control.addClass( isToggleSwitch ? "ui-slider-switch" : "ui-slider-input" );

        this._on( control, {
            "change": "_controlChange",
            "keyup": "_controlKeyup",
            "blur": "_controlBlur",
            "vmouseup": "_controlVMouseUp"
        });

        slider.bind( "vmousedown", $.proxy( this._sliderVMouseDown, this ) )
            .bind( "vclick", false );

        // We have to instantiate a new function object for the unbind to work properly
        // since the method itself is defined in the prototype (causing it to unbind everything)
        this._on( document, { "vmousemove": "_preventDocumentDrag" });
        this._on( slider.add( document ), { "vmouseup": "_sliderVMouseUp" });

        slider.insertAfter( control );

        // wrap in a div for styling purposes
        if ( !isToggleSwitch && !isRangeslider ) {
            wrapper = this.options.mini ? "<div class='ui-slider ui-mini'>" : "<div class='ui-slider'>";

            control.add( slider ).wrapAll( wrapper );
        }

        // bind the handle event callbacks and set the context to the widget instance
        this._on( this.handle, {
            "vmousedown": "_handleVMouseDown",
            "keydown": "_handleKeydown",
            "keyup": "_handleKeyup"
        });

        this.handle.bind( "vclick", false );

        this._handleFormReset();

        this.refresh( undefined, undefined, true );
    },

    _setOptions: function( options ) {
        if ( options.theme !== undefined ) {
            this._setTheme( options.theme );
        }

        if ( options.trackTheme !== undefined ) {
            this._setTrackTheme( options.trackTheme );
        }

        if ( options.corners !== undefined ) {
            this._setCorners( options.corners );
        }

        if ( options.mini !== undefined ) {
            this._setMini( options.mini );
        }

        if ( options.highlight !== undefined ) {
            this._setHighlight( options.highlight );
        }

        if ( options.disabled !== undefined ) {
            this._setDisabled( options.disabled );
        }
        this._super( options );
    },

    _controlChange: function( event ) {
        // if the user dragged the handle, the "change" event was triggered from inside refresh(); don't call refresh() again
        if ( this._trigger( "controlchange", event ) === false ) {
            return false;
        }
        if ( !this.mouseMoved ) {
            this.refresh( this._value(), true );
        }
    },

    _controlKeyup: function(/* event */) { // necessary?
        this.refresh( this._value(), true, true );
    },

    _controlBlur: function(/* event */) {
        this.refresh( this._value(), true );
    },

    // it appears the clicking the up and down buttons in chrome on
    // range/number inputs doesn't trigger a change until the field is
    // blurred. Here we check thif the value has changed and refresh
    _controlVMouseUp: function(/* event */) {
        this._checkedRefresh();
    },

    // NOTE force focus on handle
    _handleVMouseDown: function(/* event */) {
        this.handle.focus();
    },

    _handleKeydown: function( event ) {
        var index = this._value();
        if ( this.options.disabled ) {
            return;
        }

        // In all cases prevent the default and mark the handle as active
        switch ( event.keyCode ) {
            case $.mobile.keyCode.HOME:
            case $.mobile.keyCode.END:
            case $.mobile.keyCode.PAGE_UP:
            case $.mobile.keyCode.PAGE_DOWN:
            case $.mobile.keyCode.UP:
            case $.mobile.keyCode.RIGHT:
            case $.mobile.keyCode.DOWN:
            case $.mobile.keyCode.LEFT:
                event.preventDefault();

                if ( !this._keySliding ) {
                    this._keySliding = true;
                    this.handle.addClass( "ui-state-active" ); /* TODO: We don't use this class for styling. Do we need to add it? */
                }

                break;
        }

        // move the slider according to the keypress
        switch ( event.keyCode ) {
            case $.mobile.keyCode.HOME:
                this.refresh( this.min );
                break;
            case $.mobile.keyCode.END:
                this.refresh( this.max );
                break;
            case $.mobile.keyCode.PAGE_UP:
            case $.mobile.keyCode.UP:
            case $.mobile.keyCode.RIGHT:
                this.refresh( index + this.step );
                break;
            case $.mobile.keyCode.PAGE_DOWN:
            case $.mobile.keyCode.DOWN:
            case $.mobile.keyCode.LEFT:
                this.refresh( index - this.step );
                break;
        }
    }, // remove active mark

    _handleKeyup: function(/* event */) {
        if ( this._keySliding ) {
            this._keySliding = false;
            this.handle.removeClass( "ui-state-active" ); /* See comment above. */
        }
    },

    _sliderVMouseDown: function( event ) {
        // NOTE: we don't do this in refresh because we still want to
        //       support programmatic alteration of disabled inputs
        if ( this.options.disabled || !( event.which === 1 || event.which === 0 || event.which === undefined ) ) {
            return false;
        }
        if ( this._trigger( "beforestart", event ) === false ) {
            return false;
        }
        this.dragging = true;
        this.userModified = false;
        this.mouseMoved = false;

        if ( this.isToggleSwitch ) {
            this.beforeStart = this.element[0].selectedIndex;
        }

        this.refresh( event );
        this._trigger( "start" );
        return false;
    },

    _sliderVMouseUp: function() {
        if ( this.dragging ) {
            this.dragging = false;

            if ( this.isToggleSwitch ) {
                // make the handle move with a smooth transition
                this.handle.addClass( "ui-slider-handle-snapping" );

                if ( this.mouseMoved ) {
                    // this is a drag, change the value only if user dragged enough
                    if ( this.userModified ) {
                        this.refresh( this.beforeStart === 0 ? 1 : 0 );
                    } else {
                        this.refresh( this.beforeStart );
                    }
                } else {
                    // this is just a click, change the value
                    this.refresh( this.beforeStart === 0 ? 1 : 0 );
                }
            }

            this.mouseMoved = false;
            this._trigger( "stop" );
            return false;
        }
    },

    _preventDocumentDrag: function( event ) {
            // NOTE: we don't do this in refresh because we still want to
            //       support programmatic alteration of disabled inputs
            if ( this._trigger( "drag", event ) === false) {
                return false;
            }
            if ( this.dragging && !this.options.disabled ) {

                // this.mouseMoved must be updated before refresh() because it will be used in the control "change" event
                this.mouseMoved = true;

                if ( this.isToggleSwitch ) {
                    // make the handle move in sync with the mouse
                    this.handle.removeClass( "ui-slider-handle-snapping" );
                }

                this.refresh( event );

                // only after refresh() you can calculate this.userModified
                this.userModified = this.beforeStart !== this.element[0].selectedIndex;
                return false;
            }
        },

    _checkedRefresh: function() {
        if ( this.value !== this._value() ) {
            this.refresh( this._value() );
        }
    },

    _value: function() {
        return  this.isToggleSwitch ? this.element[0].selectedIndex : parseFloat( this.element.val() ) ;
    },

    _reset: function() {
        this.refresh( undefined, false, true );
    },

    refresh: function( val, isfromControl, preventInputUpdate ) {
        // NOTE: we don't return here because we want to support programmatic
        //       alteration of the input value, which should still update the slider

        var self = this,
            parentTheme = $.mobile.getAttribute( this.element[ 0 ], "theme" ),
            theme = this.options.theme || parentTheme,
            themeClass =  theme ? " ui-btn-" + theme : "",
            trackTheme = this.options.trackTheme || parentTheme,
            trackThemeClass = trackTheme ? " ui-bar-" + trackTheme : " ui-bar-inherit",
            cornerClass = this.options.corners ? " ui-corner-all" : "",
            miniClass = this.options.mini ? " ui-mini" : "",
            left, width, data, tol,
            pxStep, percent,
            control, isInput, optionElements, min, max, step,
            newval, valModStep, alignValue, percentPerStep,
            handlePercent, aPercent, bPercent,
            valueChanged;

        self.slider[0].className = [ this.isToggleSwitch ? "ui-slider ui-slider-switch ui-slider-track ui-shadow-inset" : "ui-slider-track ui-shadow-inset", trackThemeClass, cornerClass, miniClass ].join( "" );
        if ( this.options.disabled || this.element.prop( "disabled" ) ) {
            this.disable();
        }

        // set the stored value for comparison later
        this.value = this._value();
        if ( this.options.highlight && !this.isToggleSwitch && this.slider.find( ".ui-slider-bg" ).length === 0 ) {
            this.valuebg = (function() {
                var bg = document.createElement( "div" );
                bg.className = "ui-slider-bg " + $.mobile.activeBtnClass;
                return $( bg ).prependTo( self.slider );
            })();
        }
        this.handle.addClass( "ui-btn" + themeClass + " ui-shadow" );

        control = this.element;
        isInput = !this.isToggleSwitch;
        optionElements = isInput ? [] : control.find( "option" );
        min =  isInput ? parseFloat( control.attr( "min" ) ) : 0;
        max = isInput ? parseFloat( control.attr( "max" ) ) : optionElements.length - 1;
        step = ( isInput && parseFloat( control.attr( "step" ) ) > 0 ) ? parseFloat( control.attr( "step" ) ) : 1;

        if ( typeof val === "object" ) {
            data = val;
            // a slight tolerance helped get to the ends of the slider
            tol = 8;

            left = this.slider.offset().left;
            width = this.slider.width();
            pxStep = width/((max-min)/step);
            if ( !this.dragging ||
                    data.pageX < left - tol ||
                    data.pageX > left + width + tol ) {
                return;
            }
            if ( pxStep > 1 ) {
                percent = ( ( data.pageX - left ) / width ) * 100;
            } else {
                percent = Math.round( ( ( data.pageX - left ) / width ) * 100 );
            }
        } else {
            if ( val == null ) {
                val = isInput ? parseFloat( control.val() || 0 ) : control[0].selectedIndex;
            }
            percent = ( parseFloat( val ) - min ) / ( max - min ) * 100;
        }

        if ( isNaN( percent ) ) {
            return;
        }

        newval = ( percent / 100 ) * ( max - min ) + min;

        //from jQuery UI slider, the following source will round to the nearest step
        valModStep = ( newval - min ) % step;
        alignValue = newval - valModStep;

        if ( Math.abs( valModStep ) * 2 >= step ) {
            alignValue += ( valModStep > 0 ) ? step : ( -step );
        }

        percentPerStep = 100/((max-min)/step);
        // Since JavaScript has problems with large floats, round
        // the final value to 5 digits after the decimal point (see jQueryUI: #4124)
        newval = parseFloat( alignValue.toFixed(5) );

        if ( typeof pxStep === "undefined" ) {
            pxStep = width / ( (max-min) / step );
        }
        if ( pxStep > 1 && isInput ) {
            percent = ( newval - min ) * percentPerStep * ( 1 / step );
        }
        if ( percent < 0 ) {
            percent = 0;
        }

        if ( percent > 100 ) {
            percent = 100;
        }

        if ( newval < min ) {
            newval = min;
        }

        if ( newval > max ) {
            newval = max;
        }

        this.handle.css( "left", percent + "%" );

        this.handle[0].setAttribute( "aria-valuenow", isInput ? newval : optionElements.eq( newval ).attr( "value" ) );

        this.handle[0].setAttribute( "aria-valuetext", isInput ? newval : optionElements.eq( newval ).getEncodedText() );

        this.handle[0].setAttribute( "title", isInput ? newval : optionElements.eq( newval ).getEncodedText() );

        if ( this.valuebg ) {
            this.valuebg.css( "width", percent + "%" );
        }

        // drag the label widths
        if ( this._labels ) {
            handlePercent = this.handle.width() / this.slider.width() * 100;
            aPercent = percent && handlePercent + ( 100 - handlePercent ) * percent / 100;
            bPercent = percent === 100 ? 0 : Math.min( handlePercent + 100 - aPercent, 100 );

            this._labels.each(function() {
                var ab = $( this ).hasClass( "ui-slider-label-a" );
                $( this ).width( ( ab ? aPercent : bPercent  ) + "%" );
            });
        }

        if ( !preventInputUpdate ) {
            valueChanged = false;

            // update control"s value
            if ( isInput ) {
                valueChanged = parseFloat( control.val() ) !== newval;
                control.val( newval );
            } else {
                valueChanged = control[ 0 ].selectedIndex !== newval;
                control[ 0 ].selectedIndex = newval;
            }
            if ( this._trigger( "beforechange", val ) === false) {
                    return false;
            }
            if ( !isfromControl && valueChanged ) {
                control.trigger( "change" );
            }
        }
    },

    _setHighlight: function( value ) {
        value = !!value;
        if ( value ) {
            this.options.highlight = !!value;
            this.refresh();
        } else if ( this.valuebg ) {
            this.valuebg.remove();
            this.valuebg = false;
        }
    },

    _setTheme: function( value ) {
        this.handle
            .removeClass( "ui-btn-" + this.options.theme )
            .addClass( "ui-btn-" + value );

        var currentTheme = this.options.theme ? this.options.theme : "inherit",
            newTheme = value ? value : "inherit";

        this.control
            .removeClass( "ui-body-" + currentTheme )
            .addClass( "ui-body-" + newTheme );
    },

    _setTrackTheme: function( value ) {
        var currentTrackTheme = this.options.trackTheme ? this.options.trackTheme : "inherit",
            newTrackTheme = value ? value : "inherit";

        this.slider
            .removeClass( "ui-body-" + currentTrackTheme )
            .addClass( "ui-body-" + newTrackTheme );
    },

    _setMini: function( value ) {
        value = !!value;
        if ( !this.isToggleSwitch && !this.isRangeslider ) {
            this.slider.parent().toggleClass( "ui-mini", value );
            this.element.toggleClass( "ui-mini", value );
        }
        this.slider.toggleClass( "ui-mini", value );
    },

    _setCorners: function( value ) {
        this.slider.toggleClass( "ui-corner-all", value );

        if ( !this.isToggleSwitch ) {
            this.control.toggleClass( "ui-corner-all", value );
        }
    },

    _setDisabled: function( value ) {
        value = !!value;
        this.element.prop( "disabled", value );
        this.slider
            .toggleClass( "ui-state-disabled", value )
            .attr( "aria-disabled", value );

        this.element.toggleClass( "ui-state-disabled", value );
    }

}, $.mobile.behaviors.formReset ) );

})( jQuery );

(function( $, undefined ) {

var popup;

function getPopup() {
    if ( !popup ) {
        popup = $( "<div></div>", {
            "class": "ui-slider-popup ui-shadow ui-corner-all"
        });
    }
    return popup.clone();
}

$.widget( "mobile.slider", $.mobile.slider, {
    options: {
        popupEnabled: false,
        showValue: false
    },

    _create: function() {
        this._super();

        $.extend( this, {
            _currentValue: null,
            _popup: null,
            _popupVisible: false
        });

        this._setOption( "popupEnabled", this.options.popupEnabled );

        this._on( this.handle, { "vmousedown" : "_showPopup" } );
        this._on( this.slider.add( this.document ), { "vmouseup" : "_hidePopup" } );
        this._refresh();
    },

    // position the popup centered 5px above the handle
    _positionPopup: function() {
        var dstOffset = this.handle.offset();

        this._popup.offset( {
            left: dstOffset.left + ( this.handle.width() - this._popup.width() ) / 2,
            top: dstOffset.top - this._popup.outerHeight() - 5
        });
    },

    _setOption: function( key, value ) {
        this._super( key, value );

        if ( key === "showValue" ) {
            this.handle.html( value && !this.options.mini ? this._value() : "" );
        } else if ( key === "popupEnabled" ) {
            if ( value && !this._popup ) {
                this._popup = getPopup()
                    .addClass( "ui-body-" + ( this.options.theme || "a" ) )
                    .hide()
                    .insertBefore( this.element );
            }
        }
    },

    // show value on the handle and in popup
    refresh: function() {
        this._super.apply( this, arguments );
        this._refresh();
    },

    _refresh: function() {
        var o = this.options, newValue;

        if ( o.popupEnabled ) {
            // remove the title attribute from the handle (which is
            // responsible for the annoying tooltip); NB we have
            // to do it here as the jqm slider sets it every time
            // the slider's value changes :(
            this.handle.removeAttr( "title" );
        }

        newValue = this._value();
        if ( newValue === this._currentValue ) {
            return;
        }
        this._currentValue = newValue;

        if ( o.popupEnabled && this._popup ) {
            this._positionPopup();
            this._popup.html( newValue );
        }

        if ( o.showValue && !this.options.mini ) {
            this.handle.html( newValue );
        }
    },

    _showPopup: function() {
        if ( this.options.popupEnabled && !this._popupVisible ) {
            this.handle.html( "" );
            this._popup.show();
            this._positionPopup();
            this._popupVisible = true;
        }
    },

    _hidePopup: function() {
        var o = this.options;

        if ( o.popupEnabled && this._popupVisible ) {
            if ( o.showValue && !o.mini ) {
                this.handle.html( this._value() );
            }
            this._popup.hide();
            this._popupVisible = false;
        }
    }
});

})( jQuery );

(function( $, undefined ) {

$.widget( "mobile.flipswitch", $.extend({

    options: {
        onText: "On",
        offText: "Off",
        theme: null,
        enhanced: false,
        wrapperClass: null,
        corners: true,
        mini: false
    },

    _create: function() {
            if ( !this.options.enhanced ) {
                this._enhance();
            } else {
                $.extend( this, {
                    flipswitch: this.element.parent(),
                    on: this.element.find( ".ui-flipswitch-on" ).eq( 0 ),
                    off: this.element.find( ".ui-flipswitch-off" ).eq(0),
                    type: this.element.get( 0 ).tagName
                });
            }

            this._handleFormReset();

            // Transfer tabindex to "on" element and make input unfocusable
            this._originalTabIndex = this.element.attr( "tabindex" );
            if ( this._originalTabIndex != null ) {
                this.on.attr( "tabindex", this._originalTabIndex );
            }
            this.element.attr( "tabindex", "-1" );
            this._on({
                "focus" : "_handleInputFocus"
            });

            if ( this.element.is( ":disabled" ) ) {
                this._setOptions({
                    "disabled": true
                });
            }

            this._on( this.flipswitch, {
                "click": "_toggle",
                "swipeleft": "_left",
                "swiperight": "_right"
            });

            this._on( this.on, {
                "keydown": "_keydown"
            });

            this._on( {
                "change": "refresh"
            });
    },

    _handleInputFocus: function() {
        this.on.focus();
    },

    widget: function() {
        return this.flipswitch;
    },

    _left: function() {
        this.flipswitch.removeClass( "ui-flipswitch-active" );
        if ( this.type === "SELECT" ) {
            this.element.get( 0 ).selectedIndex = 0;
        } else {
            this.element.prop( "checked", false );
        }
        this.element.trigger( "change" );
    },

    _right: function() {
        this.flipswitch.addClass( "ui-flipswitch-active" );
        if ( this.type === "SELECT" ) {
            this.element.get( 0 ).selectedIndex = 1;
        } else {
            this.element.prop( "checked", true );
        }
        this.element.trigger( "change" );
    },

    _enhance: function() {
        var flipswitch = $( "<div>" ),
            options = this.options,
            element = this.element,
            theme = options.theme ? options.theme : "inherit",

            // The "on" button is an anchor so it's focusable
            on = $( "<a></a>", {
                "href": "#"
            }),
            off = $( "<span></span>" ),
            type = element.get( 0 ).tagName,
            onText = ( type === "INPUT" ) ?
                options.onText : element.find( "option" ).eq( 1 ).text(),
            offText = ( type === "INPUT" ) ?
                options.offText : element.find( "option" ).eq( 0 ).text();

            on
                .addClass( "ui-flipswitch-on ui-btn ui-shadow ui-btn-inherit" )
                .text( onText );
            off
                .addClass( "ui-flipswitch-off" )
                .text( offText );

            flipswitch
                .addClass( "ui-flipswitch ui-shadow-inset " +
                    "ui-bar-" + theme + " " +
                    ( options.wrapperClass ? options.wrapperClass : "" ) + " " +
                    ( ( element.is( ":checked" ) ||
                        element
                            .find( "option" )
                            .eq( 1 )
                            .is( ":selected" ) ) ? "ui-flipswitch-active" : "" ) +
                    ( element.is(":disabled") ? " ui-state-disabled": "") +
                    ( options.corners ? " ui-corner-all": "" ) +
                    ( options.mini ? " ui-mini": "" ) )
                .append( on, off );

            element
                .addClass( "ui-flipswitch-input" )
                .after( flipswitch )
                .appendTo( flipswitch );

        $.extend( this, {
            flipswitch: flipswitch,
            on: on,
            off: off,
            type: type
        });
    },

    _reset: function() {
        this.refresh();
    },

    refresh: function() {
        var direction,
            existingDirection = this.flipswitch.hasClass( "ui-flipswitch-active" ) ? "_right" : "_left";

        if ( this.type === "SELECT" ) {
            direction = ( this.element.get( 0 ).selectedIndex > 0 ) ? "_right": "_left";
        } else {
            direction = this.element.prop( "checked" ) ? "_right": "_left";
        }

        if ( direction !== existingDirection ) {
            this[ direction ]();
        }
    },

    _toggle: function() {
        var direction = this.flipswitch.hasClass( "ui-flipswitch-active" ) ? "_left" : "_right";

        this[ direction ]();
    },

    _keydown: function( e ) {
        if ( e.which === $.mobile.keyCode.LEFT ) {
            this._left();
        } else if ( e.which === $.mobile.keyCode.RIGHT ) {
            this._right();
        } else if ( e.which === $.mobile.keyCode.SPACE ) {
            this._toggle();
            e.preventDefault();
        }
    },

    _setOptions: function( options ) {
        if ( options.theme !== undefined ) {
            var currentTheme = options.theme ? options.theme : "inherit",
                newTheme = options.theme ? options.theme : "inherit";

            this.widget()
                .removeClass( "ui-bar-" + currentTheme )
                .addClass( "ui-bar-" + newTheme );
        }
        if ( options.onText !== undefined ) {
            this.on.text( options.onText );
        }
        if ( options.offText !== undefined ) {
            this.off.text( options.offText );
        }
        if ( options.disabled !== undefined ) {
            this.widget().toggleClass( "ui-state-disabled", options.disabled );
        }
        if ( options.mini !== undefined ) {
            this.widget().toggleClass( "ui-mini", options.mini );
        }
        if ( options.corners !== undefined ) {
            this.widget().toggleClass( "ui-corner-all", options.corners );
        }

        this._super( options );
    },

    _destroy: function() {
        if ( this.options.enhanced ) {
            return;
        }
        if ( this._originalTabIndex != null ) {
            this.element.attr( "tabindex", this._originalTabIndex );
        } else {
            this.element.removeAttr( "tabindex" );
        }
        this.on.remove();
        this.off.remove();
        this.element.unwrap();
        this.flipswitch.remove();
        this.removeClass( "ui-flipswitch-input" );
    }

}, $.mobile.behaviors.formReset ) );

})( jQuery );

(function( $, undefined ) {
    $.widget( "mobile.rangeslider", $.extend( {

        options: {
            theme: null,
            trackTheme: null,
            corners: true,
            mini: false,
            highlight: true
        },

        _create: function() {
            var $el = this.element,
            elClass = this.options.mini ? "ui-rangeslider ui-mini" : "ui-rangeslider",
            _inputFirst = $el.find( "input" ).first(),
            _inputLast = $el.find( "input" ).last(),
            _label = $el.find( "label" ).first(),
            _sliderWidgetFirst = $.data( _inputFirst.get( 0 ), "mobile-slider" ) ||
                $.data( _inputFirst.slider().get( 0 ), "mobile-slider" ),
            _sliderWidgetLast = $.data( _inputLast.get(0), "mobile-slider" ) ||
                $.data( _inputLast.slider().get( 0 ), "mobile-slider" ),
            _sliderFirst = _sliderWidgetFirst.slider,
            _sliderLast = _sliderWidgetLast.slider,
            firstHandle = _sliderWidgetFirst.handle,
            _sliders = $( "<div class='ui-rangeslider-sliders' />" ).appendTo( $el );

            _inputFirst.addClass( "ui-rangeslider-first" );
            _inputLast.addClass( "ui-rangeslider-last" );
            $el.addClass( elClass );

            _sliderFirst.appendTo( _sliders );
            _sliderLast.appendTo( _sliders );
            _label.insertBefore( $el );
            firstHandle.prependTo( _sliderLast );

            $.extend( this, {
                _inputFirst: _inputFirst,
                _inputLast: _inputLast,
                _sliderFirst: _sliderFirst,
                _sliderLast: _sliderLast,
                _label: _label,
                _targetVal: null,
                _sliderTarget: false,
                _sliders: _sliders,
                _proxy: false
            });

            this.refresh();
            this._on( this.element.find( "input.ui-slider-input" ), {
                "slidebeforestart": "_slidebeforestart",
                "slidestop": "_slidestop",
                "slidedrag": "_slidedrag",
                "slidebeforechange": "_change",
                "blur": "_change",
                "keyup": "_change"
            });
            this._on({
                "mousedown":"_change"
            });
            this._on( this.element.closest( "form" ), {
                "reset":"_handleReset"
            });
            this._on( firstHandle, {
                "vmousedown": "_dragFirstHandle"
            });
        },
        _handleReset: function() {
            var self = this;
            //we must wait for the stack to unwind before updateing other wise sliders will not have updated yet
            setTimeout( function() {
                self._updateHighlight();
            },0);
        },

        _dragFirstHandle: function( event ) {
            //if the first handle is dragged send the event to the first slider
            $.data( this._inputFirst.get(0), "mobile-slider" ).dragging = true;
            $.data( this._inputFirst.get(0), "mobile-slider" ).refresh( event );
            $.data( this._inputFirst.get(0), "mobile-slider" )._trigger( "start" );
            return false;
        },

        _slidedrag: function( event ) {
            var first = $( event.target ).is( this._inputFirst ),
                otherSlider = ( first ) ? this._inputLast : this._inputFirst;

            this._sliderTarget = false;
            //if the drag was initiated on an extreme and the other handle is focused send the events to
            //the closest handle
            if ( ( this._proxy === "first" && first ) || ( this._proxy === "last" && !first ) ) {
                $.data( otherSlider.get(0), "mobile-slider" ).dragging = true;
                $.data( otherSlider.get(0), "mobile-slider" ).refresh( event );
                return false;
            }
        },

        _slidestop: function( event ) {
            var first = $( event.target ).is( this._inputFirst );

            this._proxy = false;
            //this stops dragging of the handle and brings the active track to the front
            //this makes clicks on the track go the the last handle used
            this.element.find( "input" ).trigger( "vmouseup" );
            this._sliderFirst.css( "z-index", first ? 1 : "" );
        },

        _slidebeforestart: function( event ) {
            this._sliderTarget = false;
            //if the track is the target remember this and the original value
            if ( $( event.originalEvent.target ).hasClass( "ui-slider-track" ) ) {
                this._sliderTarget = true;
                this._targetVal = $( event.target ).val();
            }
        },

        _setOptions: function( options ) {
            if ( options.theme !== undefined ) {
                this._setTheme( options.theme );
            }

            if ( options.trackTheme !== undefined ) {
                this._setTrackTheme( options.trackTheme );
            }

            if ( options.mini !== undefined ) {
                this._setMini( options.mini );
            }

            if ( options.highlight !== undefined ) {
                this._setHighlight( options.highlight );
            }

            if ( options.disabled !== undefined ) {
                this._setDisabled( options.disabled );
            }

            this._super( options );
            this.refresh();
        },

        refresh: function() {
            var $el = this.element,
                o = this.options;

            if ( this._inputFirst.is( ":disabled" ) || this._inputLast.is( ":disabled" ) ) {
                this.options.disabled = true;
            }

            $el.find( "input" ).slider({
                theme: o.theme,
                trackTheme: o.trackTheme,
                disabled: o.disabled,
                corners: o.corners,
                mini: o.mini,
                highlight: o.highlight
            }).slider( "refresh" );
            this._updateHighlight();
        },

        _change: function( event ) {
            if ( event.type === "keyup" ) {
                this._updateHighlight();
                return false;
            }

            var self = this,
                min = parseFloat( this._inputFirst.val(), 10 ),
                max = parseFloat( this._inputLast.val(), 10 ),
                first = $( event.target ).hasClass( "ui-rangeslider-first" ),
                thisSlider = first ? this._inputFirst : this._inputLast,
                otherSlider = first ? this._inputLast : this._inputFirst;

            if ( ( this._inputFirst.val() > this._inputLast.val() && event.type === "mousedown" && !$(event.target).hasClass("ui-slider-handle")) ) {
                thisSlider.blur();
            } else if ( event.type === "mousedown" ) {
                return;
            }
            if ( min > max && !this._sliderTarget ) {
                //this prevents min from being greater then max
                thisSlider.val( first ? max: min ).slider( "refresh" );
                this._trigger( "normalize" );
            } else if ( min > max ) {
                //this makes it so clicks on the target on either extreme go to the closest handle
                thisSlider.val( this._targetVal ).slider( "refresh" );

                //You must wait for the stack to unwind so first slider is updated before updating second
                setTimeout( function() {
                    otherSlider.val( first ? min: max ).slider( "refresh" );
                    $.data( otherSlider.get(0), "mobile-slider" ).handle.focus();
                    self._sliderFirst.css( "z-index", first ? "" : 1 );
                    self._trigger( "normalize" );
                }, 0 );
                this._proxy = ( first ) ? "first" : "last";
            }
            //fixes issue where when both _sliders are at min they cannot be adjusted
            if ( min === max ) {
                $.data( thisSlider.get(0), "mobile-slider" ).handle.css( "z-index", 1 );
                $.data( otherSlider.get(0), "mobile-slider" ).handle.css( "z-index", 0 );
            } else {
                $.data( otherSlider.get(0), "mobile-slider" ).handle.css( "z-index", "" );
                $.data( thisSlider.get(0), "mobile-slider" ).handle.css( "z-index", "" );
            }

            this._updateHighlight();

            if ( min >= max ) {
                return false;
            }
        },

        _updateHighlight: function() {
            var min = parseInt( $.data( this._inputFirst.get(0), "mobile-slider" ).handle.get(0).style.left, 10 ),
                max = parseInt( $.data( this._inputLast.get(0), "mobile-slider" ).handle.get(0).style.left, 10 ),
                width = (max - min);

            this.element.find( ".ui-slider-bg" ).css({
                "margin-left": min + "%",
                "width": width + "%"
            });
        },

        _setTheme: function( value ) {
            this._inputFirst.slider( "option", "theme", value );
            this._inputLast.slider( "option", "theme", value );
        },

        _setTrackTheme: function( value ) {
            this._inputFirst.slider( "option", "trackTheme", value );
            this._inputLast.slider( "option", "trackTheme", value );
        },

        _setMini: function( value ) {
            this._inputFirst.slider( "option", "mini", value );
            this._inputLast.slider( "option", "mini", value );
            this.element.toggleClass( "ui-mini", !!value );
        },

        _setHighlight: function( value ) {
            this._inputFirst.slider( "option", "highlight", value );
            this._inputLast.slider( "option", "highlight", value );
        },

        _setDisabled: function( value ) {
            this._inputFirst.prop( "disabled", value );
            this._inputLast.prop( "disabled", value );
        },

        _destroy: function() {
            this._label.prependTo( this.element );
            this.element.removeClass( "ui-rangeslider ui-mini" );
            this._inputFirst.after( this._sliderFirst );
            this._inputLast.after( this._sliderLast );
            this._sliders.remove();
            this.element.find( "input" ).removeClass( "ui-rangeslider-first ui-rangeslider-last" ).slider( "destroy" );
        }

    }, $.mobile.behaviors.formReset ) );

})( jQuery );

(function( $, undefined ) {

    $.widget( "mobile.textinput", $.mobile.textinput, {
        options: {
            clearBtn: false,
            clearBtnText: "Clear text"
        },

        _create: function() {
            this._super();

            if ( this.isSearch ) {
                this.options.clearBtn = true;
            }

            if ( !!this.options.clearBtn && this.inputNeedsWrap ) {
                this._addClearBtn();
            }
        },

        clearButton: function() {
            return $( "<a href='#' tabindex='-1' aria-hidden='true' " +
                "class='ui-input-clear ui-btn ui-icon-delete ui-btn-icon-notext ui-corner-all'>" +
                "</a>" )
                    .attr( "title", this.options.clearBtnText )
                    .text( this.options.clearBtnText );
        },

        _clearBtnClick: function( event ) {
            this.element.val( "" )
                    .focus()
                    .trigger( "change" );

            this._clearBtn.addClass( "ui-input-clear-hidden" );
            event.preventDefault();
        },

        _addClearBtn: function() {

            if ( !this.options.enhanced ) {
                this._enhanceClear();
            }

            $.extend( this, {
                _clearBtn: this.widget().find("a.ui-input-clear")
            });

            this._bindClearEvents();

            this._toggleClear();

        },

        _enhanceClear: function() {

            this.clearButton().appendTo( this.widget() );
            this.widget().addClass( "ui-input-has-clear" );

        },

        _bindClearEvents: function() {

            this._on( this._clearBtn, {
                "click": "_clearBtnClick"
            });

            this._on({
                "keyup": "_toggleClear",
                "change": "_toggleClear",
                "input": "_toggleClear",
                "focus": "_toggleClear",
                "blur": "_toggleClear",
                "cut": "_toggleClear",
                "paste": "_toggleClear"

            });

        },

        _unbindClear: function() {
            this._off( this._clearBtn, "click");
            this._off( this.element, "keyup change input focus blur cut paste" );
        },

        _setOptions: function( options ) {
            this._super( options );

            if ( options.clearBtn !== undefined &&
                !this.element.is( "textarea, :jqmData(type='range')" ) ) {
                if ( options.clearBtn ) {
                    this._addClearBtn();
                } else {
                    this._destroyClear();
                }
            }

            if ( options.clearBtnText !== undefined && this._clearBtn !== undefined ) {
                this._clearBtn.text( options.clearBtnText )
                    .attr("title", options.clearBtnText);
            }
        },

        _toggleClear: function() {
            this._delay( "_toggleClearClass", 0 );
        },

        _toggleClearClass: function() {
            this._clearBtn.toggleClass( "ui-input-clear-hidden", !this.element.val() );
        },

        _destroyClear: function() {
            this.widget().removeClass( "ui-input-has-clear" );
            this._unbindClear();
            this._clearBtn.remove();
        },

        _destroy: function() {
            this._super();
            if ( this.options.clearBtn ) {
                this._destroyClear();
            }
        }

    });

})( jQuery );

(function( $, undefined ) {

    $.widget( "mobile.textinput", $.mobile.textinput, {
        options: {
            autogrow:true,
            keyupTimeoutBuffer: 100
        },

        _create: function() {
            this._super();

            if ( this.options.autogrow && this.isTextarea ) {
                this._autogrow();
            }
        },

        _autogrow: function() {
            this.element.addClass( "ui-textinput-autogrow" );

            this._on({
                "keyup": "_timeout",
                "change": "_timeout",
                "input": "_timeout",
                "paste": "_timeout"
            });

            // Attach to the various you-have-become-visible notifications that the
            // various framework elements emit.
            // TODO: Remove all but the updatelayout handler once #6426 is fixed.
            this._on( true, this.document, {

                // TODO: Move to non-deprecated event
                "pageshow": "_handleShow",
                "popupbeforeposition": "_handleShow",
                "updatelayout": "_handleShow",
                "panelopen": "_handleShow"
            });
        },

        // Synchronously fix the widget height if this widget's parents are such
        // that they show/hide content at runtime. We still need to check whether
        // the widget is actually visible in case it is contained inside multiple
        // such containers. For example: panel contains collapsible contains
        // autogrow textinput. The panel may emit "panelopen" indicating that its
        // content has become visible, but the collapsible is still collapsed, so
        // the autogrow textarea is still not visible.
        _handleShow: function( event ) {
            if ( $.contains( event.target, this.element[ 0 ] ) &&
                this.element.is( ":visible" ) ) {

                if ( event.type !== "popupbeforeposition" ) {
                    this.element
                        .addClass( "ui-textinput-autogrow-resize" )
                        .animationComplete(
                            $.proxy( function() {
                                this.element.removeClass( "ui-textinput-autogrow-resize" );
                            }, this ),
                        "transition" );
                }
                this._prepareHeightUpdate();
            }
        },

        _unbindAutogrow: function() {
            this.element.removeClass( "ui-textinput-autogrow" );
            this._off( this.element, "keyup change input paste" );
            this._off( this.document,
                "pageshow popupbeforeposition updatelayout panelopen" );
        },

        keyupTimeout: null,

        _prepareHeightUpdate: function( delay ) {
            if ( this.keyupTimeout ) {
                clearTimeout( this.keyupTimeout );
            }
            if ( delay === undefined ) {
                this._updateHeight();
            } else {
                this.keyupTimeout = this._delay( "_updateHeight", delay );
            }
        },

        _timeout: function() {
            this._prepareHeightUpdate( this.options.keyupTimeoutBuffer );
        },

        _updateHeight: function() {
            var paddingTop, paddingBottom, paddingHeight, scrollHeight, clientHeight,
                borderTop, borderBottom, borderHeight, height,
                scrollTop = this.window.scrollTop();
            this.keyupTimeout = 0;

            // IE8 textareas have the onpage property - others do not
            if ( !( "onpage" in this.element[ 0 ] ) ) {
                this.element.css({
                    "height": 0,
                    "min-height": 0,
                    "max-height": 0
                });
            }

            scrollHeight = this.element[ 0 ].scrollHeight;
            clientHeight = this.element[ 0 ].clientHeight;
            borderTop = parseFloat( this.element.css( "border-top-width" ) );
            borderBottom = parseFloat( this.element.css( "border-bottom-width" ) );
            borderHeight = borderTop + borderBottom;
            height = scrollHeight + borderHeight + 15;

            // Issue 6179: Padding is not included in scrollHeight and
            // clientHeight by Firefox if no scrollbar is visible. Because
            // textareas use the border-box box-sizing model, padding should be
            // included in the new (assigned) height. Because the height is set
            // to 0, clientHeight == 0 in Firefox. Therefore, we can use this to
            // check if padding must be added.
            if ( clientHeight === 0 ) {
                paddingTop = parseFloat( this.element.css( "padding-top" ) );
                paddingBottom = parseFloat( this.element.css( "padding-bottom" ) );
                paddingHeight = paddingTop + paddingBottom;

                height += paddingHeight;
            }

            this.element.css({
                "height": height,
                "min-height": "",
                "max-height": ""
            });

            this.window.scrollTop( scrollTop );
        },

        refresh: function() {
            if ( this.options.autogrow && this.isTextarea ) {
                this._updateHeight();
            }
        },

        _setOptions: function( options ) {

            this._super( options );

            if ( options.autogrow !== undefined && this.isTextarea ) {
                if ( options.autogrow ) {
                    this._autogrow();
                } else {
                    this._unbindAutogrow();
                }
            }
        }

    });
})( jQuery );

(function( $, undefined ) {

$.widget( "mobile.selectmenu", $.extend( {
    initSelector: "select:not( :jqmData(role='slider')):not( :jqmData(role='flipswitch') )",

    options: {
        theme: null,
        icon: "carat-d",
        iconpos: "right",
        inline: false,
        corners: true,
        shadow: true,
        iconshadow: false, /* TODO: Deprecated in 1.4, remove in 1.5. */
        overlayTheme: null,
        dividerTheme: null,
        hidePlaceholderMenuItems: true,
        closeText: "Close",
        nativeMenu: true,
        // This option defaults to true on iOS devices.
        preventFocusZoom: /iPhone|iPad|iPod/.test( navigator.platform ) && navigator.userAgent.indexOf( "AppleWebKit" ) > -1,
        mini: false
    },

    _button: function() {
        return $( "<div/>" );
    },

    _setDisabled: function( value ) {
        this.element.attr( "disabled", value );
        this.button.attr( "aria-disabled", value );
        return this._setOption( "disabled", value );
    },

    _focusButton : function() {
        var self = this;

        setTimeout( function() {
            self.button.focus();
        }, 40);
    },

    _selectOptions: function() {
        return this.select.find( "option" );
    },

    // setup items that are generally necessary for select menu extension
    _preExtension: function() {
        var inline = this.options.inline || this.element.jqmData( "inline" ),
            mini = this.options.mini || this.element.jqmData( "mini" ),
            classes = "";
        // TODO: Post 1.1--once we have time to test thoroughly--any classes manually applied to the original element should be carried over to the enhanced element, with an `-enhanced` suffix. See https://github.com/jquery/jquery-mobile/issues/3577
        /* if ( $el[0].className.length ) {
            classes = $el[0].className;
        } */
        if ( !!~this.element[0].className.indexOf( "ui-btn-left" ) ) {
            classes = " ui-btn-left";
        }

        if (  !!~this.element[0].className.indexOf( "ui-btn-right" ) ) {
            classes = " ui-btn-right";
        }

        if ( inline ) {
            classes += " ui-btn-inline";
        }
        if ( mini ) {
            classes += " ui-mini";
        }

        this.select = this.element.removeClass( "ui-btn-left ui-btn-right" ).wrap( "<div class='ui-select" + classes + "'>" );
        this.selectId  = this.select.attr( "id" ) || ( "select-" + this.uuid );
        this.buttonId = this.selectId + "-button";
        this.label = $( "label[for='"+ this.selectId +"']" );
        this.isMultiple = this.select[ 0 ].multiple;
    },

    _destroy: function() {
        var wrapper = this.element.parents( ".ui-select" );
        if ( wrapper.length > 0 ) {
            if ( wrapper.is( ".ui-btn-left, .ui-btn-right" ) ) {
                this.element.addClass( wrapper.hasClass( "ui-btn-left" ) ? "ui-btn-left" : "ui-btn-right" );
            }
            this.element.insertAfter( wrapper );
            wrapper.remove();
        }
    },

    _create: function() {
        this._preExtension();

        this.button = this._button();

        var self = this,

            options = this.options,

            iconpos = options.icon ? ( options.iconpos || this.select.jqmData( "iconpos" ) ) : false,

            button = this.button
                .insertBefore( this.select )
                .attr( "id", this.buttonId )
                .addClass( "ui-btn" +
                    ( options.icon ? ( " ui-icon-" + options.icon + " ui-btn-icon-" + iconpos +
                    ( options.iconshadow ? " ui-shadow-icon" : "" ) ) :    "" ) + /* TODO: Remove in 1.5. */
                    ( options.theme ? " ui-btn-" + options.theme : "" ) +
                    ( options.corners ? " ui-corner-all" : "" ) +
                    ( options.shadow ? " ui-shadow" : "" ) );

        this.setButtonText();

        // Opera does not properly support opacity on select elements
        // In Mini, it hides the element, but not its text
        // On the desktop,it seems to do the opposite
        // for these reasons, using the nativeMenu option results in a full native select in Opera
        if ( options.nativeMenu && window.opera && window.opera.version ) {
            button.addClass( "ui-select-nativeonly" );
        }

        // Add counter for multi selects
        if ( this.isMultiple ) {
            this.buttonCount = $( "<span>" )
                .addClass( "ui-li-count ui-body-inherit" )
                .hide()
                .appendTo( button.addClass( "ui-li-has-count" ) );
        }

        // Disable if specified
        if ( options.disabled || this.element.attr( "disabled" )) {
            this.disable();
        }

        // Events on native select
        this.select.change(function() {
            self.refresh();

            if ( !!options.nativeMenu ) {
                self._delay( function() {
                    self.select.blur();
                });
            }
        });

        this._handleFormReset();

        this._on( this.button, {
            keydown: "_handleKeydown"
        });

        this.build();
    },

    build: function() {
        var self = this;

        this.select
            .appendTo( self.button )
            .bind( "vmousedown", function() {
                // Add active class to button
                self.button.addClass( $.mobile.activeBtnClass );
            })
            .bind( "focus", function() {
                self.button.addClass( $.mobile.focusClass );
            })
            .bind( "blur", function() {
                self.button.removeClass( $.mobile.focusClass );
            })
            .bind( "focus vmouseover", function() {
                self.button.trigger( "vmouseover" );
            })
            .bind( "vmousemove", function() {
                // Remove active class on scroll/touchmove
                self.button.removeClass( $.mobile.activeBtnClass );
            })
            .bind( "change blur vmouseout", function() {
                self.button.trigger( "vmouseout" )
                    .removeClass( $.mobile.activeBtnClass );
            });

        // In many situations, iOS will zoom into the select upon tap, this prevents that from happening
        self.button.bind( "vmousedown", function() {
            if ( self.options.preventFocusZoom ) {
                    $.mobile.zoom.disable( true );
            }
        });
        self.label.bind( "click focus", function() {
            if ( self.options.preventFocusZoom ) {
                    $.mobile.zoom.disable( true );
            }
        });
        self.select.bind( "focus", function() {
            if ( self.options.preventFocusZoom ) {
                    $.mobile.zoom.disable( true );
            }
        });
        self.button.bind( "mouseup", function() {
            if ( self.options.preventFocusZoom ) {
                setTimeout(function() {
                    $.mobile.zoom.enable( true );
                }, 0 );
            }
        });
        self.select.bind( "blur", function() {
            if ( self.options.preventFocusZoom ) {
                $.mobile.zoom.enable( true );
            }
        });

    },

    selected: function() {
        return this._selectOptions().filter( ":selected" );
    },

    selectedIndices: function() {
        var self = this;

        return this.selected().map(function() {
            return self._selectOptions().index( this );
        }).get();
    },

    setButtonText: function() {
        var self = this,
            selected = this.selected(),
            text = this.placeholder,
            span = $( document.createElement( "span" ) );

        this.button.children( "span" ).not( ".ui-li-count" ).remove().end().end().prepend( (function() {
            if ( selected.length ) {
                text = selected.map(function() {
                    return $( this ).text();
                }).get().join( ", " );
            } else {
                text = self.placeholder;
            }

            if ( text ) {
                span.text( text );
            } else {

                // Set the contents to &nbsp; which we write as &#160; to be XHTML compliant - see gh-6699
                span.html( "&#160;" );
            }

            // TODO possibly aggregate multiple select option classes
            return span
                .addClass( self.select.attr( "class" ) )
                .addClass( selected.attr( "class" ) )
                .removeClass( "ui-screen-hidden" );
        })());
    },

    setButtonCount: function() {
        var selected = this.selected();

        // multiple count inside button
        if ( this.isMultiple ) {
            this.buttonCount[ selected.length > 1 ? "show" : "hide" ]().text( selected.length );
        }
    },

    _handleKeydown: function( /* event */ ) {
        this._delay( "_refreshButton" );
    },

    _reset: function() {
        this.refresh();
    },

    _refreshButton: function() {
        this.setButtonText();
        this.setButtonCount();
    },

    refresh: function() {
        this._refreshButton();
    },

    // open and close preserved in native selects
    // to simplify users code when looping over selects
    open: $.noop,
    close: $.noop,

    disable: function() {
        this._setDisabled( true );
        this.button.addClass( "ui-state-disabled" );
    },

    enable: function() {
        this._setDisabled( false );
        this.button.removeClass( "ui-state-disabled" );
    }
}, $.mobile.behaviors.formReset ) );

})( jQuery );

(function( $, undefined ) {

$.mobile.links = function( target ) {

    //links within content areas, tests included with page
    $( target )
        .find( "a" )
        .jqmEnhanceable()
        .filter( ":jqmData(rel='popup')[href][href!='']" )
        .each( function() {
            // Accessibility info for popups
            var element = this,
                idref = element.getAttribute( "href" ).substring( 1 );

            if ( idref ) {
                element.setAttribute( "aria-haspopup", true );
                element.setAttribute( "aria-owns", idref );
                element.setAttribute( "aria-expanded", false );
            }
        })
        .end()
        .not( ".ui-btn, :jqmData(role='none'), :jqmData(role='nojs')" )
        .addClass( "ui-link" );

};

})( jQuery );


(function( $, undefined ) {

function fitSegmentInsideSegment( windowSize, segmentSize, offset, desired ) {
    var returnValue = desired;

    if ( windowSize < segmentSize ) {
        // Center segment if it's bigger than the window
        returnValue = offset + ( windowSize - segmentSize ) / 2;
    } else {
        // Otherwise center it at the desired coordinate while keeping it completely inside the window
        returnValue = Math.min( Math.max( offset, desired - segmentSize / 2 ), offset + windowSize - segmentSize );
    }

    return returnValue;
}

function getWindowCoordinates( theWindow ) {
    return {
        x: theWindow.scrollLeft(),
        y: theWindow.scrollTop(),
        cx: ( theWindow[ 0 ].innerWidth || theWindow.width() ),
        cy: ( theWindow[ 0 ].innerHeight || theWindow.height() )
    };
}

$.widget( "mobile.popup", {
    options: {
        wrapperClass: null,
        theme: null,
        overlayTheme: null,
        shadow: true,
        corners: true,
        transition: "none",
        positionTo: "origin",
        tolerance: null,
        closeLinkSelector: "a:jqmData(rel='back')",
        closeLinkEvents: "click.popup",
        navigateEvents: "navigate.popup",
        closeEvents: "navigate.popup pagebeforechange.popup",
        dismissible: true,
        enhanced: false,

        // NOTE Windows Phone 7 has a scroll position caching issue that
        //      requires us to disable popup history management by default
        //      https://github.com/jquery/jquery-mobile/issues/4784
        //
        // NOTE this option is modified in _create!
        history: !$.mobile.browser.oldIE
    },

    // When the user depresses the mouse/finger on an element inside the popup while the popup is
    // open, we ignore resize events for a short while. This prevents #6961.
    _handleDocumentVmousedown: function( theEvent ) {
        if ( this._isOpen && $.contains( this._ui.container[ 0 ], theEvent.target ) ) {
            this._ignoreResizeEvents();
        }
    },

    _create: function() {
        var theElement = this.element,
            myId = theElement.attr( "id" ),
            currentOptions = this.options;

        // We need to adjust the history option to be false if there's no AJAX nav.
        // We can't do it in the option declarations because those are run before
        // it is determined whether there shall be AJAX nav.
        currentOptions.history = currentOptions.history && $.mobile.ajaxEnabled && $.mobile.hashListeningEnabled;

        this._on( this.document, {
            "vmousedown": "_handleDocumentVmousedown"
        });

        // Define instance variables
        $.extend( this, {
            _scrollTop: 0,
            _page: theElement.closest( ".ui-page" ),
            _ui: null,
            _fallbackTransition: "",
            _currentTransition: false,
            _prerequisites: null,
            _isOpen: false,
            _tolerance: null,
            _resizeData: null,
            _ignoreResizeTo: 0,
            _orientationchangeInProgress: false
        });

        if ( this._page.length === 0 ) {
            this._page = $( "body" );
        }

        if ( currentOptions.enhanced ) {
            this._ui = {
                container: theElement.parent(),
                screen: theElement.parent().prev(),
                placeholder: $( this.document[ 0 ].getElementById( myId + "-placeholder" ) )
            };
        } else {
            this._ui = this._enhance( theElement, myId );
            this._applyTransition( currentOptions.transition );
        }
        this
            ._setTolerance( currentOptions.tolerance )
            ._ui.focusElement = this._ui.container;

        // Event handlers
        this._on( this._ui.screen, { "vclick": "_eatEventAndClose" } );
        this._on( this.window, {
            orientationchange: $.proxy( this, "_handleWindowOrientationchange" ),
            resize: $.proxy( this, "_handleWindowResize" ),
            keyup: $.proxy( this, "_handleWindowKeyUp" )
        });
        this._on( this.document, { "focusin": "_handleDocumentFocusIn" } );
    },

    _enhance: function( theElement, myId ) {
        var currentOptions = this.options,
            wrapperClass = currentOptions.wrapperClass,
            ui = {
                screen: $( "<div class='ui-screen-hidden ui-popup-screen " +
                this._themeClassFromOption( "ui-overlay-", currentOptions.overlayTheme ) + "'></div>" ),
                placeholder: $( "<div style='display: none;'><!-- placeholder --></div>" ),
                container: $( "<div class='ui-popup-container ui-popup-hidden ui-popup-truncate" +
                    ( wrapperClass ? ( " " + wrapperClass ) : "" ) + "'></div>" )
            },
            fragment = this.document[ 0 ].createDocumentFragment();

        fragment.appendChild( ui.screen[ 0 ] );
        fragment.appendChild( ui.container[ 0 ] );

        if ( myId ) {
            ui.screen.attr( "id", myId + "-screen" );
            ui.container.attr( "id", myId + "-popup" );
            ui.placeholder
                .attr( "id", myId + "-placeholder" )
                .html( "<!-- placeholder for " + myId + " -->" );
        }

        // Apply the proto
        this._page[ 0 ].appendChild( fragment );
        // Leave a placeholder where the element used to be
        ui.placeholder.insertAfter( theElement );
        theElement
            .detach()
            .addClass( "ui-popup " +
                this._themeClassFromOption( "ui-body-", currentOptions.theme ) + " " +
                ( currentOptions.shadow ? "ui-overlay-shadow " : "" ) +
                ( currentOptions.corners ? "ui-corner-all " : "" ) )
            .appendTo( ui.container );

        return ui;
    },

    _eatEventAndClose: function( theEvent ) {
        theEvent.preventDefault();
        theEvent.stopImmediatePropagation();
        if ( this.options.dismissible ) {
            this.close();
        }
        return false;
    },

    // Make sure the screen covers the entire document - CSS is sometimes not
    // enough to accomplish this.
    _resizeScreen: function() {
        var screen = this._ui.screen,
            popupHeight = this._ui.container.outerHeight( true ),
            screenHeight = screen.removeAttr( "style" ).height(),

            // Subtracting 1 here is necessary for an obscure Andrdoid 4.0 bug where
            // the browser hangs if the screen covers the entire document :/
            documentHeight = this.document.height() - 1;

        if ( screenHeight < documentHeight ) {
            screen.height( documentHeight );
        } else if ( popupHeight > screenHeight ) {
            screen.height( popupHeight );
        }
    },

    _handleWindowKeyUp: function( theEvent ) {
        if ( this._isOpen && theEvent.keyCode === $.mobile.keyCode.ESCAPE ) {
            return this._eatEventAndClose( theEvent );
        }
    },

    _expectResizeEvent: function() {
        var windowCoordinates = getWindowCoordinates( this.window );

        if ( this._resizeData ) {
            if ( windowCoordinates.x === this._resizeData.windowCoordinates.x &&
                windowCoordinates.y === this._resizeData.windowCoordinates.y &&
                windowCoordinates.cx === this._resizeData.windowCoordinates.cx &&
                windowCoordinates.cy === this._resizeData.windowCoordinates.cy ) {
                // timeout not refreshed
                return false;
            } else {
                // clear existing timeout - it will be refreshed below
                clearTimeout( this._resizeData.timeoutId );
            }
        }

        this._resizeData = {
            timeoutId: this._delay( "_resizeTimeout", 200 ),
            windowCoordinates: windowCoordinates
        };

        return true;
    },

    _resizeTimeout: function() {
        if ( this._isOpen ) {
            if ( !this._expectResizeEvent() ) {
                if ( this._ui.container.hasClass( "ui-popup-hidden" ) ) {
                    // effectively rapid-open the popup while leaving the screen intact
                    this._ui.container.removeClass( "ui-popup-hidden ui-popup-truncate" );
                    this.reposition( { positionTo: "window" } );
                    this._ignoreResizeEvents();
                }

                this._resizeScreen();
                this._resizeData = null;
                this._orientationchangeInProgress = false;
            }
        } else {
            this._resizeData = null;
            this._orientationchangeInProgress = false;
        }
    },

    _stopIgnoringResizeEvents: function() {
        this._ignoreResizeTo = 0;
    },

    _ignoreResizeEvents: function() {
        if ( this._ignoreResizeTo ) {
            clearTimeout( this._ignoreResizeTo );
        }
        this._ignoreResizeTo = this._delay( "_stopIgnoringResizeEvents", 1000 );
    },

    _handleWindowResize: function(/* theEvent */) {
        if ( this._isOpen && this._ignoreResizeTo === 0 ) {
            if ( ( this._expectResizeEvent() || this._orientationchangeInProgress ) &&
                !this._ui.container.hasClass( "ui-popup-hidden" ) ) {
                // effectively rapid-close the popup while leaving the screen intact
                this._ui.container
                    .addClass( "ui-popup-hidden ui-popup-truncate" )
                    .removeAttr( "style" );
            }
        }
    },

    _handleWindowOrientationchange: function(/* theEvent */) {
        if ( !this._orientationchangeInProgress && this._isOpen && this._ignoreResizeTo === 0 ) {
            this._expectResizeEvent();
            this._orientationchangeInProgress = true;
        }
    },

    // When the popup is open, attempting to focus on an element that is not a
    // child of the popup will redirect focus to the popup
    _handleDocumentFocusIn: function( theEvent ) {
        var target,
            targetElement = theEvent.target,
            ui = this._ui;

        if ( !this._isOpen ) {
            return;
        }

        if ( targetElement !== ui.container[ 0 ] ) {
            target = $( targetElement );
            if ( !$.contains( ui.container[ 0 ], targetElement ) ) {
                $( this.document[ 0 ].activeElement ).one( "focus", $.proxy( function() {
                    this._safelyBlur( targetElement );
                }, this ) );
                ui.focusElement.focus();
                theEvent.preventDefault();
                theEvent.stopImmediatePropagation();
                return false;
            } else if ( ui.focusElement[ 0 ] === ui.container[ 0 ] ) {
                ui.focusElement = target;
            }
        }

        this._ignoreResizeEvents();
    },

    _themeClassFromOption: function( prefix, value ) {
        return ( value ? ( value === "none" ? "" : ( prefix + value ) ) : ( prefix + "inherit" ) );
    },

    _applyTransition: function( value ) {
        if ( value ) {
            this._ui.container.removeClass( this._fallbackTransition );
            if ( value !== "none" ) {
                this._fallbackTransition = $.mobile._maybeDegradeTransition( value );
                if ( this._fallbackTransition === "none" ) {
                    this._fallbackTransition = "";
                }
                this._ui.container.addClass( this._fallbackTransition );
            }
        }

        return this;
    },

    _setOptions: function( newOptions ) {
        var currentOptions = this.options,
            theElement = this.element,
            screen = this._ui.screen;

        if ( newOptions.wrapperClass !== undefined ) {
            this._ui.container
                .removeClass( currentOptions.wrapperClass )
                .addClass( newOptions.wrapperClass );
        }

        if ( newOptions.theme !== undefined ) {
            theElement
                .removeClass( this._themeClassFromOption( "ui-body-", currentOptions.theme ) )
                .addClass( this._themeClassFromOption( "ui-body-", newOptions.theme ) );
        }

        if ( newOptions.overlayTheme !== undefined ) {
            screen
                .removeClass( this._themeClassFromOption( "ui-overlay-", currentOptions.overlayTheme ) )
                .addClass( this._themeClassFromOption( "ui-overlay-", newOptions.overlayTheme ) );

            if ( this._isOpen ) {
                screen.addClass( "in" );
            }
        }

        if ( newOptions.shadow !== undefined ) {
            theElement.toggleClass( "ui-overlay-shadow", newOptions.shadow );
        }

        if ( newOptions.corners !== undefined ) {
            theElement.toggleClass( "ui-corner-all", newOptions.corners );
        }

        if ( newOptions.transition !== undefined ) {
            if ( !this._currentTransition ) {
                this._applyTransition( newOptions.transition );
            }
        }

        if ( newOptions.tolerance !== undefined ) {
            this._setTolerance( newOptions.tolerance );
        }

        if ( newOptions.disabled !== undefined ) {
            if ( newOptions.disabled ) {
                this.close();
            }
        }

        return this._super( newOptions );
    },

    _setTolerance: function( value ) {
        var tol = { t: 30, r: 15, b: 30, l: 15 },
            ar;

        if ( value !== undefined ) {
            ar = String( value ).split( "," );

            $.each( ar, function( idx, val ) { ar[ idx ] = parseInt( val, 10 ); } );

            switch( ar.length ) {
                // All values are to be the same
                case 1:
                    if ( !isNaN( ar[ 0 ] ) ) {
                        tol.t = tol.r = tol.b = tol.l = ar[ 0 ];
                    }
                    break;

                // The first value denotes top/bottom tolerance, and the second value denotes left/right tolerance
                case 2:
                    if ( !isNaN( ar[ 0 ] ) ) {
                        tol.t = tol.b = ar[ 0 ];
                    }
                    if ( !isNaN( ar[ 1 ] ) ) {
                        tol.l = tol.r = ar[ 1 ];
                    }
                    break;

                // The array contains values in the order top, right, bottom, left
                case 4:
                    if ( !isNaN( ar[ 0 ] ) ) {
                        tol.t = ar[ 0 ];
                    }
                    if ( !isNaN( ar[ 1 ] ) ) {
                        tol.r = ar[ 1 ];
                    }
                    if ( !isNaN( ar[ 2 ] ) ) {
                        tol.b = ar[ 2 ];
                    }
                    if ( !isNaN( ar[ 3 ] ) ) {
                        tol.l = ar[ 3 ];
                    }
                    break;

                default:
                    break;
            }
        }

        this._tolerance = tol;
        return this;
    },

    _clampPopupWidth: function( infoOnly ) {
        var menuSize,
            windowCoordinates = getWindowCoordinates( this.window ),
            // rectangle within which the popup must fit
            rectangle = {
                x: this._tolerance.l,
                y: windowCoordinates.y + this._tolerance.t,
                cx: windowCoordinates.cx - this._tolerance.l - this._tolerance.r,
                cy: windowCoordinates.cy - this._tolerance.t - this._tolerance.b
            };

        if ( !infoOnly ) {
            // Clamp the width of the menu before grabbing its size
            this._ui.container.css( "max-width", rectangle.cx );
        }

        menuSize = {
            cx: this._ui.container.outerWidth( true ),
            cy: this._ui.container.outerHeight( true )
        };

        return { rc: rectangle, menuSize: menuSize };
    },

    _calculateFinalLocation: function( desired, clampInfo ) {
        var returnValue,
            rectangle = clampInfo.rc,
            menuSize = clampInfo.menuSize;

        // Center the menu over the desired coordinates, while not going outside
        // the window tolerances. This will center wrt. the window if the popup is
        // too large.
        returnValue = {
            left: fitSegmentInsideSegment( rectangle.cx, menuSize.cx, rectangle.x, desired.x ),
            top: fitSegmentInsideSegment( rectangle.cy, menuSize.cy, rectangle.y, desired.y )
        };

        // Make sure the top of the menu is visible
        returnValue.top = Math.max( 0, returnValue.top );

        // If the height of the menu is smaller than the height of the document
        // align the bottom with the bottom of the document

        returnValue.top -= Math.min( returnValue.top,
            Math.max( 0, returnValue.top + menuSize.cy - this.document.height() ) );

        return returnValue;
    },

    // Try and center the overlay over the given coordinates
    _placementCoords: function( desired ) {
        return this._calculateFinalLocation( desired, this._clampPopupWidth() );
    },

    _createPrerequisites: function( screenPrerequisite, containerPrerequisite, whenDone ) {
        var prerequisites,
            self = this;

        // It is important to maintain both the local variable prerequisites and
        // self._prerequisites. The local variable remains in the closure of the
        // functions which call the callbacks passed in. The comparison between the
        // local variable and self._prerequisites is necessary, because once a
        // function has been passed to .animationComplete() it will be called next
        // time an animation completes, even if that's not the animation whose end
        // the function was supposed to catch (for example, if an abort happens
        // during the opening animation, the .animationComplete handler is not
        // called for that animation anymore, but the handler remains attached, so
        // it is called the next time the popup is opened - making it stale.
        // Comparing the local variable prerequisites to the widget-level variable
        // self._prerequisites ensures that callbacks triggered by a stale
        // .animationComplete will be ignored.

        prerequisites = {
            screen: $.Deferred(),
            container: $.Deferred()
        };

        prerequisites.screen.then( function() {
            if ( prerequisites === self._prerequisites ) {
                screenPrerequisite();
            }
        });

        prerequisites.container.then( function() {
            if ( prerequisites === self._prerequisites ) {
                containerPrerequisite();
            }
        });

        $.when( prerequisites.screen, prerequisites.container ).done( function() {
            if ( prerequisites === self._prerequisites ) {
                self._prerequisites = null;
                whenDone();
            }
        });

        self._prerequisites = prerequisites;
    },

    _animate: function( args ) {
        // NOTE before removing the default animation of the screen
        //      this had an animate callback that would resolve the deferred
        //      now the deferred is resolved immediately
        // TODO remove the dependency on the screen deferred
        this._ui.screen
            .removeClass( args.classToRemove )
            .addClass( args.screenClassToAdd );

        args.prerequisites.screen.resolve();

        if ( args.transition && args.transition !== "none" ) {
            if ( args.applyTransition ) {
                this._applyTransition( args.transition );
            }
            if ( this._fallbackTransition ) {
                this._ui.container
                    .addClass( args.containerClassToAdd )
                    .removeClass( args.classToRemove )
                    .animationComplete( $.proxy( args.prerequisites.container, "resolve" ) );
                return;
            }
        }
        this._ui.container.removeClass( args.classToRemove );
        args.prerequisites.container.resolve();
    },

    // The desired coordinates passed in will be returned untouched if no reference element can be identified via
    // desiredPosition.positionTo. Nevertheless, this function ensures that its return value always contains valid
    // x and y coordinates by specifying the center middle of the window if the coordinates are absent.
    // options: { x: coordinate, y: coordinate, positionTo: string: "origin", "window", or jQuery selector
    _desiredCoords: function( openOptions ) {
        var offset,
            dst = null,
            windowCoordinates = getWindowCoordinates( this.window ),
            x = openOptions.x,
            y = openOptions.y,
            pTo = openOptions.positionTo;

        // Establish which element will serve as the reference
        if ( pTo && pTo !== "origin" ) {
            if ( pTo === "window" ) {
                x = windowCoordinates.cx / 2 + windowCoordinates.x;
                y = windowCoordinates.cy / 2 + windowCoordinates.y;
            } else {
                try {
                    dst = $( pTo );
                } catch( err ) {
                    dst = null;
                }
                if ( dst ) {
                    dst.filter( ":visible" );
                    if ( dst.length === 0 ) {
                        dst = null;
                    }
                }
            }
        }

        // If an element was found, center over it
        if ( dst ) {
            offset = dst.offset();
            x = offset.left + dst.outerWidth() / 2;
            y = offset.top + dst.outerHeight() / 2;
        }

        // Make sure x and y are valid numbers - center over the window
        if ( $.type( x ) !== "number" || isNaN( x ) ) {
            x = windowCoordinates.cx / 2 + windowCoordinates.x;
        }
        if ( $.type( y ) !== "number" || isNaN( y ) ) {
            y = windowCoordinates.cy / 2 + windowCoordinates.y;
        }

        return { x: x, y: y };
    },

    _reposition: function( openOptions ) {
        // We only care about position-related parameters for repositioning
        openOptions = {
            x: openOptions.x,
            y: openOptions.y,
            positionTo: openOptions.positionTo
        };
        this._trigger( "beforeposition", undefined, openOptions );
        this._ui.container.offset( this._placementCoords( this._desiredCoords( openOptions ) ) );
    },

    reposition: function( openOptions ) {
        if ( this._isOpen ) {
            this._reposition( openOptions );
        }
    },

    _safelyBlur: function( currentElement ){
        if ( currentElement !== this.window[ 0 ] &&
            currentElement.nodeName.toLowerCase() !== "body" ) {
                $( currentElement ).blur();
        }
    },

    _openPrerequisitesComplete: function() {
        var id = this.element.attr( "id" ),
            firstFocus = this._ui.container.find( ":focusable" ).first();

        this._ui.container.addClass( "ui-popup-active" );
        this._isOpen = true;
        this._resizeScreen();

        // Check to see if currElement is not a child of the container.  If it's not, blur
        if ( !$.contains( this._ui.container[ 0 ], this.document[ 0 ].activeElement ) ) {
            this._safelyBlur( this.document[ 0 ].activeElement );
        }
        if ( firstFocus.length > 0 ) {
            this._ui.focusElement = firstFocus;
        }
        this._ignoreResizeEvents();
        if ( id ) {
            this.document.find( "[aria-haspopup='true'][aria-owns='" +  id + "']" ).attr( "aria-expanded", true );
        }
        this._trigger( "afteropen" );
    },

    _open: function( options ) {
        var openOptions = $.extend( {}, this.options, options ),
            // TODO move blacklist to private method
            androidBlacklist = ( function() {
                var ua = navigator.userAgent,
                    // Rendering engine is Webkit, and capture major version
                    wkmatch = ua.match( /AppleWebKit\/([0-9\.]+)/ ),
                    wkversion = !!wkmatch && wkmatch[ 1 ],
                    androidmatch = ua.match( /Android (\d+(?:\.\d+))/ ),
                    andversion = !!androidmatch && androidmatch[ 1 ],
                    chromematch = ua.indexOf( "Chrome" ) > -1;

                // Platform is Android, WebKit version is greater than 534.13 ( Android 3.2.1 ) and not Chrome.
                if ( androidmatch !== null && andversion === "4.0" && wkversion && wkversion > 534.13 && !chromematch ) {
                    return true;
                }
                return false;
            }());

        // Count down to triggering "popupafteropen" - we have two prerequisites:
        // 1. The popup window animation completes (container())
        // 2. The screen opacity animation completes (screen())
        this._createPrerequisites(
            $.noop,
            $.noop,
            $.proxy( this, "_openPrerequisitesComplete" ) );

        this._currentTransition = openOptions.transition;
        this._applyTransition( openOptions.transition );

        this._ui.screen.removeClass( "ui-screen-hidden" );
        this._ui.container.removeClass( "ui-popup-truncate" );

        // Give applications a chance to modify the contents of the container before it appears
        this._reposition( openOptions );

        this._ui.container.removeClass( "ui-popup-hidden" );

        if ( this.options.overlayTheme && androidBlacklist ) {
            /* TODO: The native browser on Android 4.0.X ("Ice Cream Sandwich") suffers from an issue where the popup overlay appears to be z-indexed above the popup itself when certain other styles exist on the same page -- namely, any element set to `position: fixed` and certain types of input. These issues are reminiscent of previously uncovered bugs in older versions of Android's native browser: https://github.com/scottjehl/Device-Bugs/issues/3
            This fix closes the following bugs ( I use "closes" with reluctance, and stress that this issue should be revisited as soon as possible ):
            https://github.com/jquery/jquery-mobile/issues/4816
            https://github.com/jquery/jquery-mobile/issues/4844
            https://github.com/jquery/jquery-mobile/issues/4874
            */

            // TODO sort out why this._page isn't working
            this.element.closest( ".ui-page" ).addClass( "ui-popup-open" );
        }
        this._animate({
            additionalCondition: true,
            transition: openOptions.transition,
            classToRemove: "",
            screenClassToAdd: "in",
            containerClassToAdd: "in",
            applyTransition: false,
            prerequisites: this._prerequisites
        });
    },

    _closePrerequisiteScreen: function() {
        this._ui.screen
            .removeClass( "out" )
            .addClass( "ui-screen-hidden" );
    },

    _closePrerequisiteContainer: function() {
        this._ui.container
            .removeClass( "reverse out" )
            .addClass( "ui-popup-hidden ui-popup-truncate" )
            .removeAttr( "style" );
    },

    _closePrerequisitesDone: function() {
        var container = this._ui.container,
            id = this.element.attr( "id" );

        // remove the global mutex for popups
        $.mobile.popup.active = undefined;

        // Blur elements inside the container, including the container
        $( ":focus", container[ 0 ] ).add( container[ 0 ] ).blur();

        if ( id ) {
            this.document.find( "[aria-haspopup='true'][aria-owns='" +  id + "']" ).attr( "aria-expanded", false );
        }

        // alert users that the popup is closed
        this._trigger( "afterclose" );
    },

    _close: function( immediate ) {
        this._ui.container.removeClass( "ui-popup-active" );
        this._page.removeClass( "ui-popup-open" );

        this._isOpen = false;

        // Count down to triggering "popupafterclose" - we have two prerequisites:
        // 1. The popup window reverse animation completes (container())
        // 2. The screen opacity animation completes (screen())
        this._createPrerequisites(
            $.proxy( this, "_closePrerequisiteScreen" ),
            $.proxy( this, "_closePrerequisiteContainer" ),
            $.proxy( this, "_closePrerequisitesDone" ) );

        this._animate( {
            additionalCondition: this._ui.screen.hasClass( "in" ),
            transition: ( immediate ? "none" : ( this._currentTransition ) ),
            classToRemove: "in",
            screenClassToAdd: "out",
            containerClassToAdd: "reverse out",
            applyTransition: true,
            prerequisites: this._prerequisites
        });
    },

    _unenhance: function() {
        if ( this.options.enhanced ) {
            return;
        }

        // Put the element back to where the placeholder was and remove the "ui-popup" class
        this._setOptions( { theme: $.mobile.popup.prototype.options.theme } );
        this.element
            // Cannot directly insertAfter() - we need to detach() first, because
            // insertAfter() will do nothing if the payload div was not attached
            // to the DOM at the time the widget was created, and so the payload
            // will remain inside the container even after we call insertAfter().
            // If that happens and we remove the container a few lines below, we
            // will cause an infinite recursion - #5244
            .detach()
            .insertAfter( this._ui.placeholder )
            .removeClass( "ui-popup ui-overlay-shadow ui-corner-all ui-body-inherit" );
        this._ui.screen.remove();
        this._ui.container.remove();
        this._ui.placeholder.remove();
    },

    _destroy: function() {
        if ( $.mobile.popup.active === this ) {
            this.element.one( "popupafterclose", $.proxy( this, "_unenhance" ) );
            this.close();
        } else {
            this._unenhance();
        }

        return this;
    },

    _closePopup: function( theEvent, data ) {
        var parsedDst, toUrl,
            currentOptions = this.options,
            immediate = false;

        if ( ( theEvent && theEvent.isDefaultPrevented() ) || $.mobile.popup.active !== this ) {
            return;
        }

        // restore location on screen
        window.scrollTo( 0, this._scrollTop );

        if ( theEvent && theEvent.type === "pagebeforechange" && data ) {
            // Determine whether we need to rapid-close the popup, or whether we can
            // take the time to run the closing transition
            if ( typeof data.toPage === "string" ) {
                parsedDst = data.toPage;
            } else {
                parsedDst = data.toPage.jqmData( "url" );
            }
            parsedDst = $.mobile.path.parseUrl( parsedDst );
            toUrl = parsedDst.pathname + parsedDst.search + parsedDst.hash;

            if ( this._myUrl !== $.mobile.path.makeUrlAbsolute( toUrl ) ) {
                // Going to a different page - close immediately
                immediate = true;
            } else {
                theEvent.preventDefault();
            }
        }

        // remove nav bindings
        this.window.off( currentOptions.closeEvents );
        // unbind click handlers added when history is disabled
        this.element.undelegate( currentOptions.closeLinkSelector, currentOptions.closeLinkEvents );

        this._close( immediate );
    },

    // any navigation event after a popup is opened should close the popup
    // NOTE the pagebeforechange is bound to catch navigation events that don't
    //      alter the url (eg, dialogs from popups)
    _bindContainerClose: function() {
        this.window
            .on( this.options.closeEvents, $.proxy( this, "_closePopup" ) );
    },

    widget: function() {
        return this._ui.container;
    },

    // TODO no clear deliniation of what should be here and
    // what should be in _open. Seems to be "visual" vs "history" for now
    open: function( options ) {
        var url, hashkey, activePage, currentIsDialog, hasHash, urlHistory,
            self = this,
            currentOptions = this.options;

        // make sure open is idempotent
        if ( $.mobile.popup.active || currentOptions.disabled ) {
            return this;
        }

        // set the global popup mutex
        $.mobile.popup.active = this;
        this._scrollTop = this.window.scrollTop();

        // if history alteration is disabled close on navigate events
        // and leave the url as is
        if ( !( currentOptions.history ) ) {
            self._open( options );
            self._bindContainerClose();

            // When histoy is disabled we have to grab the data-rel
            // back link clicks so we can close the popup instead of
            // relying on history to do it for us
            self.element
                .delegate( currentOptions.closeLinkSelector, currentOptions.closeLinkEvents, function( theEvent ) {
                    self.close();
                    theEvent.preventDefault();
                });

            return this;
        }

        // cache some values for min/readability
        urlHistory = $.mobile.navigate.history;
        hashkey = $.mobile.dialogHashKey;
        activePage = $.mobile.activePage;
        currentIsDialog = ( activePage ? activePage.hasClass( "ui-dialog" ) : false );
        this._myUrl = url = urlHistory.getActive().url;
        hasHash = ( url.indexOf( hashkey ) > -1 ) && !currentIsDialog && ( urlHistory.activeIndex > 0 );

        if ( hasHash ) {
            self._open( options );
            self._bindContainerClose();
            return this;
        }

        // if the current url has no dialog hash key proceed as normal
        // otherwise, if the page is a dialog simply tack on the hash key
        if ( url.indexOf( hashkey ) === -1 && !currentIsDialog ) {
            url = url + (url.indexOf( "#" ) > -1 ? hashkey : "#" + hashkey);
        } else {
            url = $.mobile.path.parseLocation().hash + hashkey;
        }

        // swallow the the initial navigation event, and bind for the next
        this.window.one( "beforenavigate", function( theEvent ) {
            theEvent.preventDefault();
            self._open( options );
            self._bindContainerClose();
        });

        this.urlAltered = true;
        $.mobile.navigate( url, { role: "dialog" } );

        return this;
    },

    close: function() {
        // make sure close is idempotent
        if ( $.mobile.popup.active !== this ) {
            return this;
        }

        this._scrollTop = this.window.scrollTop();

        if ( this.options.history && this.urlAltered ) {
            $.mobile.back();
            this.urlAltered = false;
        } else {
            // simulate the nav bindings having fired
            this._closePopup();
        }

        return this;
    }
});

// TODO this can be moved inside the widget
$.mobile.popup.handleLink = function( $link ) {
    var offset,
        path = $.mobile.path,

        // NOTE make sure to get only the hash from the href because ie7 (wp7)
        //      returns the absolute href in this case ruining the element selection
        popup = $( path.hashToSelector( path.parseUrl( $link.attr( "href" ) ).hash ) ).first();

    if ( popup.length > 0 && popup.data( "mobile-popup" ) ) {
        offset = $link.offset();
        popup.popup( "open", {
            x: offset.left + $link.outerWidth() / 2,
            y: offset.top + $link.outerHeight() / 2,
            transition: $link.jqmData( "transition" ),
            positionTo: $link.jqmData( "position-to" )
        });
    }

    //remove after delay
    setTimeout( function() {
        $link.removeClass( $.mobile.activeBtnClass );
    }, 300 );
};

// TODO move inside _create
$.mobile.document.on( "pagebeforechange", function( theEvent, data ) {
    if ( data.options.role === "popup" ) {
        $.mobile.popup.handleLink( data.options.link );
        theEvent.preventDefault();
    }
});

})( jQuery );

/*
* custom "selectmenu" plugin
*/

(function( $, undefined ) {

var unfocusableItemSelector = ".ui-disabled,.ui-state-disabled,.ui-li-divider,.ui-screen-hidden,:jqmData(role='placeholder')",
    goToAdjacentItem = function( item, target, direction ) {
        var adjacent = item[ direction + "All" ]()
            .not( unfocusableItemSelector )
            .first();

        // if there's a previous option, focus it
        if ( adjacent.length ) {
            target
                .blur()
                .attr( "tabindex", "-1" );

            adjacent.find( "a" ).first().focus();
        }
    };

$.widget( "mobile.selectmenu", $.mobile.selectmenu, {
    _create: function() {
        var o = this.options;

        // Custom selects cannot exist inside popups, so revert the "nativeMenu"
        // option to true if a parent is a popup
        o.nativeMenu = o.nativeMenu || ( this.element.parents( ":jqmData(role='popup'),:mobile-popup" ).length > 0 );

        return this._super();
    },

    _handleSelectFocus: function() {
        this.element.blur();
        this.button.focus();
    },

    _handleKeydown: function( event ) {
        this._super( event );
        this._handleButtonVclickKeydown( event );
    },

    _handleButtonVclickKeydown: function( event ) {
        if ( this.options.disabled || this.isOpen || this.options.nativeMenu ) {
            return;
        }

        if (event.type === "vclick" ||
                event.keyCode && (event.keyCode === $.mobile.keyCode.ENTER || event.keyCode === $.mobile.keyCode.SPACE)) {

            this._decideFormat();
            if ( this.menuType === "overlay" ) {
                this.button.attr( "href", "#" + this.popupId ).attr( "data-" + ( $.mobile.ns || "" ) + "rel", "popup" );
            } else {
                this.button.attr( "href", "#" + this.dialogId ).attr( "data-" + ( $.mobile.ns || "" ) + "rel", "dialog" );
            }
            this.isOpen = true;
            // Do not prevent default, so the navigation may have a chance to actually open the chosen format
        }
    },

    _handleListFocus: function( e ) {
        var params = ( e.type === "focusin" ) ?
            { tabindex: "0", event: "vmouseover" }:
            { tabindex: "-1", event: "vmouseout" };

        $( e.target )
            .attr( "tabindex", params.tabindex )
            .trigger( params.event );
    },

    _handleListKeydown: function( event ) {
        var target = $( event.target ),
            li = target.closest( "li" );

        // switch logic based on which key was pressed
        switch ( event.keyCode ) {
            // up or left arrow keys
        case 38:
            goToAdjacentItem( li, target, "prev" );
            return false;
            // down or right arrow keys
        case 40:
            goToAdjacentItem( li, target, "next" );
            return false;
            // If enter or space is pressed, trigger click
        case 13:
        case 32:
            target.trigger( "click" );
            return false;
        }
    },

    _handleMenuPageHide: function() {

        // After the dialog's done, we may want to trigger change if the value has actually changed
        this._delayedTrigger();

        // TODO centralize page removal binding / handling in the page plugin.
        // Suggestion from @jblas to do refcounting
        //
        // TODO extremely confusing dependency on the open method where the pagehide.remove
        // bindings are stripped to prevent the parent page from disappearing. The way
        // we're keeping pages in the DOM right now sucks
        //
        // rebind the page remove that was unbound in the open function
        // to allow for the parent page removal from actions other than the use
        // of a dialog sized custom select
        //
        // doing this here provides for the back button on the custom select dialog
        this.thisPage.page( "bindRemove" );
    },

    _handleHeaderCloseClick: function() {
        if ( this.menuType === "overlay" ) {
            this.close();
            return false;
        }
    },

    _handleListItemClick: function( event ) {
        var listItem = $( event.target ).closest( "li" ),

            // Index of option tag to be selected
            oldIndex = this.select[ 0 ].selectedIndex,
            newIndex = $.mobile.getAttribute( listItem, "option-index" ),
            option = this._selectOptions().eq( newIndex )[ 0 ];

        // Toggle selected status on the tag for multi selects
        option.selected = this.isMultiple ? !option.selected : true;

        // Toggle checkbox class for multiple selects
        if ( this.isMultiple ) {
            listItem.find( "a" )
                .toggleClass( "ui-checkbox-on", option.selected )
                .toggleClass( "ui-checkbox-off", !option.selected );
        }

        // If it's not a multiple select, trigger change after it has finished closing
        if ( !this.isMultiple && oldIndex !== newIndex ) {
            this._triggerChange = true;
        }

        // Trigger change if it's a multiple select
        // Hide custom select for single selects only - otherwise focus clicked item
        // We need to grab the clicked item the hard way, because the list may have been rebuilt
        if ( this.isMultiple ) {
            this.select.trigger( "change" );
            this.list.find( "li:not(.ui-li-divider)" ).eq( newIndex )
                .find( "a" ).first().focus();
        }
        else {
            this.close();
        }

        event.preventDefault();
    },

    build: function() {
        var selectId, popupId, dialogId, label, thisPage, isMultiple, menuId,
            themeAttr, overlayTheme, overlayThemeAttr, dividerThemeAttr,
            menuPage, listbox, list, header, headerTitle, menuPageContent,
            menuPageClose, headerClose,
            o = this.options;

        if ( o.nativeMenu ) {
            return this._super();
        }

        selectId = this.selectId;
        popupId = selectId + "-listbox";
        dialogId = selectId + "-dialog";
        label = this.label;
        thisPage = this.element.closest( ".ui-page" );
        isMultiple = this.element[ 0 ].multiple;
        menuId = selectId + "-menu";
        themeAttr = o.theme ? ( " data-" + $.mobile.ns + "theme='" + o.theme + "'" ) : "";
        overlayTheme = o.overlayTheme || o.theme || null;
        overlayThemeAttr = overlayTheme ? ( " data-" + $.mobile.ns +
            "overlay-theme='" + overlayTheme + "'" ) : "";
        dividerThemeAttr = ( o.dividerTheme && isMultiple ) ? ( " data-" + $.mobile.ns + "divider-theme='" + o.dividerTheme + "'" ) : "";
        menuPage = $( "<div data-" + $.mobile.ns + "role='dialog' class='ui-selectmenu' id='" + dialogId + "'" + themeAttr + overlayThemeAttr + ">" +
            "<div data-" + $.mobile.ns + "role='header'>" +
            "<div class='ui-title'></div>"+
            "</div>"+
            "<div data-" + $.mobile.ns + "role='content'></div>"+
            "</div>" );
        listbox = $( "<div" + themeAttr + overlayThemeAttr + " id='" + popupId +
                "' class='ui-selectmenu'></div>" )
            .insertAfter( this.select )
            .popup();
        list = $( "<ul class='ui-selectmenu-list' id='" + menuId + "' role='listbox' aria-labelledby='" + this.buttonId + "'" + themeAttr + dividerThemeAttr + "></ul>" ).appendTo( listbox );
        header = $( "<div class='ui-header ui-bar-" + ( o.theme ? o.theme : "inherit" ) + "'></div>" ).prependTo( listbox );
        headerTitle = $( "<h1 class='ui-title'></h1>" ).appendTo( header );

        if ( this.isMultiple ) {
            headerClose = $( "<a>", {
                "role": "button",
                "text": o.closeText,
                "href": "#",
                "class": "ui-btn ui-corner-all ui-btn-left ui-btn-icon-notext ui-icon-delete"
            }).appendTo( header );
        }

        $.extend( this, {
            selectId: selectId,
            menuId: menuId,
            popupId: popupId,
            dialogId: dialogId,
            thisPage: thisPage,
            menuPage: menuPage,
            label: label,
            isMultiple: isMultiple,
            theme: o.theme,
            listbox: listbox,
            list: list,
            header: header,
            headerTitle: headerTitle,
            headerClose: headerClose,
            menuPageContent: menuPageContent,
            menuPageClose: menuPageClose,
            placeholder: ""
        });

        // Create list from select, update state
        this.refresh();

        if ( this._origTabIndex === undefined ) {
            // Map undefined to false, because this._origTabIndex === undefined
            // indicates that we have not yet checked whether the select has
            // originally had a tabindex attribute, whereas false indicates that
            // we have checked the select for such an attribute, and have found
            // none present.
            this._origTabIndex = ( this.select[ 0 ].getAttribute( "tabindex" ) === null ) ? false : this.select.attr( "tabindex" );
        }
        this.select.attr( "tabindex", "-1" );
        this._on( this.select, { focus : "_handleSelectFocus" } );

        // Button events
        this._on( this.button, {
            vclick: "_handleButtonVclickKeydown"
        });

        // Events for list items
        this.list.attr( "role", "listbox" );
        this._on( this.list, {
            "focusin": "_handleListFocus",
            "focusout": "_handleListFocus",
            "keydown": "_handleListKeydown",
            "click li:not(.ui-disabled,.ui-state-disabled,.ui-li-divider)": "_handleListItemClick"
        });

        // button refocus ensures proper height calculation
        // by removing the inline style and ensuring page inclusion
        this._on( this.menuPage, { pagehide: "_handleMenuPageHide" } );

        // Events on the popup
        this._on( this.listbox, { popupafterclose: "_popupClosed" } );

        // Close button on small overlays
        if ( this.isMultiple ) {
            this._on( this.headerClose, { click: "_handleHeaderCloseClick" } );
        }

        return this;
    },

    _popupClosed: function() {
        this.close();
        this._delayedTrigger();
    },

    _delayedTrigger: function() {
        if ( this._triggerChange ) {
            this.element.trigger( "change" );
        }
        this._triggerChange = false;
    },

    _isRebuildRequired: function() {
        var list = this.list.find( "li" ),
            options = this._selectOptions().not( ".ui-screen-hidden" );

        // TODO exceedingly naive method to determine difference
        // ignores value changes etc in favor of a forcedRebuild
        // from the user in the refresh method
        return options.text() !== list.text();
    },

    selected: function() {
        return this._selectOptions().filter( ":selected:not( :jqmData(placeholder='true') )" );
    },

    refresh: function( force ) {
        var self, indices;

        if ( this.options.nativeMenu ) {
            return this._super( force );
        }

        self = this;
        if ( force || this._isRebuildRequired() ) {
            self._buildList();
        }

        indices = this.selectedIndices();

        self.setButtonText();
        self.setButtonCount();

        self.list.find( "li:not(.ui-li-divider)" )
            .find( "a" ).removeClass( $.mobile.activeBtnClass ).end()
            .attr( "aria-selected", false )
            .each(function( i ) {
                var item = $( this );
                if ( $.inArray( i, indices ) > -1 ) {

                    // Aria selected attr
                    item.attr( "aria-selected", true );

                    // Multiple selects: add the "on" checkbox state to the icon
                    if ( self.isMultiple ) {
                        item.find( "a" ).removeClass( "ui-checkbox-off" ).addClass( "ui-checkbox-on" );
                    } else {
                        if ( item.hasClass( "ui-screen-hidden" ) ) {
                            item.next().find( "a" ).addClass( $.mobile.activeBtnClass );
                        } else {
                            item.find( "a" ).addClass( $.mobile.activeBtnClass );
                        }
                    }
                } else if ( self.isMultiple ) {
                    item.find( "a" ).removeClass( "ui-checkbox-on" ).addClass( "ui-checkbox-off" );
                }
            });
    },

    close: function() {
        if ( this.options.disabled || !this.isOpen ) {
            return;
        }

        var self = this;

        if ( self.menuType === "page" ) {
            self.menuPage.dialog( "close" );
            self.list.appendTo( self.listbox );
        } else {
            self.listbox.popup( "close" );
        }

        self._focusButton();
        // allow the dialog to be closed again
        self.isOpen = false;
    },

    open: function() {
        this.button.click();
    },

    _focusMenuItem: function() {
        var selector = this.list.find( "a." + $.mobile.activeBtnClass );
        if ( selector.length === 0 ) {
            selector = this.list.find( "li:not(" + unfocusableItemSelector + ") a.ui-btn" );
        }
        selector.first().focus();
    },

    _decideFormat: function() {
        var self = this,
            $window = this.window,
            selfListParent = self.list.parent(),
            menuHeight = selfListParent.outerHeight(),
            scrollTop = $window.scrollTop(),
            btnOffset = self.button.offset().top,
            screenHeight = $window.height();

        if ( menuHeight > screenHeight - 80 || !$.support.scrollTop ) {

            self.menuPage.appendTo( $.mobile.pageContainer ).page();
            self.menuPageContent = self.menuPage.find( ".ui-content" );
            self.menuPageClose = self.menuPage.find( ".ui-header a" );

            // prevent the parent page from being removed from the DOM,
            // otherwise the results of selecting a list item in the dialog
            // fall into a black hole
            self.thisPage.unbind( "pagehide.remove" );

            //for WebOS/Opera Mini (set lastscroll using button offset)
            if ( scrollTop === 0 && btnOffset > screenHeight ) {
                self.thisPage.one( "pagehide", function() {
                    $( this ).jqmData( "lastScroll", btnOffset );
                });
            }

            self.menuPage.one( {
                pageshow: $.proxy( this, "_focusMenuItem" ),
                pagehide: $.proxy( this, "close" )
            });

            self.menuType = "page";
            self.menuPageContent.append( self.list );
            self.menuPage
                .find( "div .ui-title" )
                    .text( self.label.getEncodedText() || self.placeholder );
        } else {
            self.menuType = "overlay";

            self.listbox.one( { popupafteropen: $.proxy( this, "_focusMenuItem" ) } );
        }
    },

    _buildList: function() {
        var self = this,
            o = this.options,
            placeholder = this.placeholder,
            needPlaceholder = true,
            dataIcon = "false",
            $options, numOptions, select,
            dataPrefix = "data-" + $.mobile.ns,
            dataIndexAttr = dataPrefix + "option-index",
            dataIconAttr = dataPrefix + "icon",
            dataRoleAttr = dataPrefix + "role",
            dataPlaceholderAttr = dataPrefix + "placeholder",
            fragment = document.createDocumentFragment(),
            isPlaceholderItem = false,
            optGroup,
            i,
            option, $option, parent, text, anchor, classes,
            optLabel, divider, item;

        self.list.empty().filter( ".ui-listview" ).listview( "destroy" );
        $options = this._selectOptions();
        numOptions = $options.length;
        select = this.select[ 0 ];

        for ( i = 0; i < numOptions;i++, isPlaceholderItem = false) {
            option = $options[i];
            $option = $( option );

            // Do not create options based on ui-screen-hidden select options
            if ( $option.hasClass( "ui-screen-hidden" ) ) {
                continue;
            }

            parent = option.parentNode;
            classes = [];

            // Although using .text() here raises the risk that, when we later paste this into the
            // list item we end up pasting possibly malicious things like <script> tags, that risk
            // only arises if we do something like $( "<li><a href='#'>" + text + "</a></li>" ). We
            // don't do that. We do document.createTextNode( text ) instead, which guarantees that
            // whatever we paste in will end up as text, with characters like <, > and & escaped.
            text = $option.text();
            anchor = document.createElement( "a" );
            anchor.setAttribute( "href", "#" );
            anchor.appendChild( document.createTextNode( text ) );

            // Are we inside an optgroup?
            if ( parent !== select && parent.nodeName.toLowerCase() === "optgroup" ) {
                optLabel = parent.getAttribute( "label" );
                if ( optLabel !== optGroup ) {
                    divider = document.createElement( "li" );
                    divider.setAttribute( dataRoleAttr, "list-divider" );
                    divider.setAttribute( "role", "option" );
                    divider.setAttribute( "tabindex", "-1" );
                    divider.appendChild( document.createTextNode( optLabel ) );
                    fragment.appendChild( divider );
                    optGroup = optLabel;
                }
            }

            if ( needPlaceholder && ( !option.getAttribute( "value" ) || text.length === 0 || $option.jqmData( "placeholder" ) ) ) {
                needPlaceholder = false;
                isPlaceholderItem = true;

                // If we have identified a placeholder, record the fact that it was
                // us who have added the placeholder to the option and mark it
                // retroactively in the select as well
                if ( null === option.getAttribute( dataPlaceholderAttr ) ) {
                    this._removePlaceholderAttr = true;
                }
                option.setAttribute( dataPlaceholderAttr, true );
                if ( o.hidePlaceholderMenuItems ) {
                    classes.push( "ui-screen-hidden" );
                }
                if ( placeholder !== text ) {
                    placeholder = self.placeholder = text;
                }
            }

            item = document.createElement( "li" );
            if ( option.disabled ) {
                classes.push( "ui-state-disabled" );
                item.setAttribute( "aria-disabled", true );
            }
            item.setAttribute( dataIndexAttr, i );
            item.setAttribute( dataIconAttr, dataIcon );
            if ( isPlaceholderItem ) {
                item.setAttribute( dataPlaceholderAttr, true );
            }
            item.className = classes.join( " " );
            item.setAttribute( "role", "option" );
            anchor.setAttribute( "tabindex", "-1" );
            if ( this.isMultiple ) {
                $( anchor ).addClass( "ui-btn ui-checkbox-off ui-btn-icon-right" );
            }

            item.appendChild( anchor );
            fragment.appendChild( item );
        }

        self.list[0].appendChild( fragment );

        // Hide header if it's not a multiselect and there's no placeholder
        if ( !this.isMultiple && !placeholder.length ) {
            this.header.addClass( "ui-screen-hidden" );
        } else {
            this.headerTitle.text( this.placeholder );
        }

        // Now populated, create listview
        self.list.listview();
    },

    _button: function() {
        return this.options.nativeMenu ?
            this._super() :
            $( "<a>", {
                "href": "#",
                "role": "button",
                // TODO value is undefined at creation
                "id": this.buttonId,
                "aria-haspopup": "true",

                // TODO value is undefined at creation
                "aria-owns": this.menuId
            });
    },

    _destroy: function() {

        if ( !this.options.nativeMenu ) {
            this.close();

            // Restore the tabindex attribute to its original value
            if ( this._origTabIndex !== undefined ) {
                if ( this._origTabIndex !== false ) {
                    this.select.attr( "tabindex", this._origTabIndex );
                } else {
                    this.select.removeAttr( "tabindex" );
                }
            }

            // Remove the placeholder attribute if we were the ones to add it
            if ( this._removePlaceholderAttr ) {
                this._selectOptions().removeAttr( "data-" + $.mobile.ns + "placeholder" );
            }

            // Remove the popup
            this.listbox.remove();

            // Remove the dialog
            this.menuPage.remove();
        }

        // Chain up
        this._super();
    }
});

})( jQuery );


// buttonMarkup is deprecated as of 1.4.0 and will be removed in 1.5.0.

(function( $, undefined ) {

// General policy: Do not access data-* attributes except during enhancement.
// In all other cases we determine the state of the button exclusively from its
// className. That's why optionsToClasses expects a full complement of options,
// and the jQuery plugin completes the set of options from the default values.

// Map classes to buttonMarkup boolean options - used in classNameToOptions()
var reverseBoolOptionMap = {
        "ui-shadow" : "shadow",
        "ui-corner-all" : "corners",
        "ui-btn-inline" : "inline",
        "ui-shadow-icon" : "iconshadow", /* TODO: Remove in 1.5 */
        "ui-mini" : "mini"
    },
    getAttrFixed = function() {
        var ret = $.mobile.getAttribute.apply( this, arguments );

        return ( ret == null ? undefined : ret );
    },
    capitalLettersRE = /[A-Z]/g;

// optionsToClasses:
// @options: A complete set of options to convert to class names.
// @existingClasses: extra classes to add to the result
//
// Converts @options to buttonMarkup classes and returns the result as an array
// that can be converted to an element's className with .join( " " ). All
// possible options must be set inside @options. Use $.fn.buttonMarkup.defaults
// to get a complete set and use $.extend to override your choice of options
// from that set.
function optionsToClasses( options, existingClasses ) {
    var classes = existingClasses ? existingClasses : [];

    // Add classes to the array - first ui-btn
    classes.push( "ui-btn" );

    // If there is a theme
    if ( options.theme ) {
        classes.push( "ui-btn-" + options.theme );
    }

    // If there's an icon, add the icon-related classes
    if ( options.icon ) {
        classes = classes.concat([
            "ui-icon-" + options.icon,
            "ui-btn-icon-" + options.iconpos
        ]);
        if ( options.iconshadow ) {
            classes.push( "ui-shadow-icon" ); /* TODO: Remove in 1.5 */
        }
    }

    // Add the appropriate class for each boolean option
    if ( options.inline ) {
        classes.push( "ui-btn-inline" );
    }
    if ( options.shadow ) {
        classes.push( "ui-shadow" );
    }
    if ( options.corners ) {
        classes.push( "ui-corner-all" );
    }
    if ( options.mini ) {
        classes.push( "ui-mini" );
    }

    // Create a string from the array and return it
    return classes;
}

// classNameToOptions:
// @classes: A string containing a .className-style space-separated class list
//
// Loops over @classes and calculates an options object based on the
// buttonMarkup-related classes it finds. It records unrecognized classes in an
// array.
//
// Returns: An object containing the following items:
//
// "options": buttonMarkup options found to be present because of the
// presence/absence of corresponding classes
//
// "unknownClasses": a string containing all the non-buttonMarkup-related
// classes found in @classes
//
// "alreadyEnhanced": A boolean indicating whether the ui-btn class was among
// those found to be present
function classNameToOptions( classes ) {
    var idx, map, unknownClass,
        alreadyEnhanced = false,
        noIcon = true,
        o = {
            icon: "",
            inline: false,
            shadow: false,
            corners: false,
            iconshadow: false,
            mini: false
        },
        unknownClasses = [];

    classes = classes.split( " " );

    // Loop over the classes
    for ( idx = 0 ; idx < classes.length ; idx++ ) {

        // Assume it's an unrecognized class
        unknownClass = true;

        // Recognize boolean options from the presence of classes
        map = reverseBoolOptionMap[ classes[ idx ] ];
        if ( map !== undefined ) {
            unknownClass = false;
            o[ map ] = true;

        // Recognize the presence of an icon and establish the icon position
        } else if ( classes[ idx ].indexOf( "ui-btn-icon-" ) === 0 ) {
            unknownClass = false;
            noIcon = false;
            o.iconpos = classes[ idx ].substring( 12 );

        // Establish which icon is present
        } else if ( classes[ idx ].indexOf( "ui-icon-" ) === 0 ) {
            unknownClass = false;
            o.icon = classes[ idx ].substring( 8 );

        // Establish the theme - this recognizes one-letter theme swatch names
        } else if ( classes[ idx ].indexOf( "ui-btn-" ) === 0 && classes[ idx ].length === 8 ) {
            unknownClass = false;
            o.theme = classes[ idx ].substring( 7 );

        // Recognize that this element has already been buttonMarkup-enhanced
        } else if ( classes[ idx ] === "ui-btn" ) {
            unknownClass = false;
            alreadyEnhanced = true;
        }

        // If this class has not been recognized, add it to the list
        if ( unknownClass ) {
            unknownClasses.push( classes[ idx ] );
        }
    }

    // If a "ui-btn-icon-*" icon position class is absent there cannot be an icon
    if ( noIcon ) {
        o.icon = "";
    }

    return {
        options: o,
        unknownClasses: unknownClasses,
        alreadyEnhanced: alreadyEnhanced
    };
}

function camelCase2Hyphenated( c ) {
    return "-" + c.toLowerCase();
}

// $.fn.buttonMarkup:
// DOM: gets/sets .className
//
// @options: options to apply to the elements in the jQuery object
// @overwriteClasses: boolean indicating whether to honour existing classes
//
// Calculates the classes to apply to the elements in the jQuery object based on
// the options passed in. If @overwriteClasses is true, it sets the className
// property of each element in the jQuery object to the buttonMarkup classes
// it calculates based on the options passed in.
//
// If you wish to preserve any classes that are already present on the elements
// inside the jQuery object, including buttonMarkup-related classes that were
// added by a previous call to $.fn.buttonMarkup() or during page enhancement
// then you should omit @overwriteClasses or set it to false.
$.fn.buttonMarkup = function( options, overwriteClasses ) {
    var idx, data, el, retrievedOptions, optionKey,
        defaults = $.fn.buttonMarkup.defaults;

    for ( idx = 0 ; idx < this.length ; idx++ ) {
        el = this[ idx ];
        data = overwriteClasses ?

            // Assume this element is not enhanced and ignore its classes
            { alreadyEnhanced: false, unknownClasses: [] } :

            // Otherwise analyze existing classes to establish existing options and
            // classes
            classNameToOptions( el.className );

        retrievedOptions = $.extend( {},

            // If the element already has the class ui-btn, then we assume that
            // it has passed through buttonMarkup before - otherwise, the options
            // returned by classNameToOptions do not correctly reflect the state of
            // the element
            ( data.alreadyEnhanced ? data.options : {} ),

            // Finally, apply the options passed in
            options );

        // If this is the first call on this element, retrieve remaining options
        // from the data-attributes
        if ( !data.alreadyEnhanced ) {
            for ( optionKey in defaults ) {
                if ( retrievedOptions[ optionKey ] === undefined ) {
                    retrievedOptions[ optionKey ] = getAttrFixed( el,
                        optionKey.replace( capitalLettersRE, camelCase2Hyphenated )
                    );
                }
            }
        }

        el.className = optionsToClasses(

            // Merge all the options and apply them as classes
            $.extend( {},

                // The defaults form the basis
                defaults,

                // Add the computed options
                retrievedOptions
            ),

            // ... and re-apply any unrecognized classes that were found
            data.unknownClasses ).join( " " );
        if ( el.tagName.toLowerCase() !== "button" ) {
            el.setAttribute( "role", "button" );
        }
    }

    return this;
};

// buttonMarkup defaults. This must be a complete set, i.e., a value must be
// given here for all recognized options
$.fn.buttonMarkup.defaults = {
    icon: "",
    iconpos: "left",
    theme: null,
    inline: false,
    shadow: true,
    corners: true,
    iconshadow: false, /* TODO: Remove in 1.5. Option deprecated in 1.4. */
    mini: false
};

$.extend( $.fn.buttonMarkup, {
    initSelector: "a:jqmData(role='button'), .ui-bar > a, .ui-bar > :jqmData(role='controlgroup') > a, button:not(:jqmData(role='navbar') button)"
});

})( jQuery );


(function( $, undefined ) {

$.widget( "mobile.controlgroup", $.extend( {
    options: {
        enhanced: false,
        theme: null,
        shadow: false,
        corners: true,
        excludeInvisible: true,
        type: "vertical",
        mini: false
    },

    _create: function() {
        var elem = this.element,
            opts = this.options,
            keepNative = $.mobile.page.prototype.keepNativeSelector();

        // Run buttonmarkup
        if ( $.fn.buttonMarkup ) {
            this.element
                .find( $.fn.buttonMarkup.initSelector )
                .not( keepNative )
                .buttonMarkup();
        }
        // Enhance child widgets
        $.each( this._childWidgets, $.proxy( function( number, widgetName ) {
            if ( $.mobile[ widgetName ] ) {
                this.element
                    .find( $.mobile[ widgetName ].initSelector )
                    .not( keepNative )[ widgetName ]();
            }
        }, this ));

        $.extend( this, {
            _ui: null,
            _initialRefresh: true
        });

        if ( opts.enhanced ) {
            this._ui = {
                groupLegend: elem.children( ".ui-controlgroup-label" ).children(),
                childWrapper: elem.children( ".ui-controlgroup-controls" )
            };
        } else {
            this._ui = this._enhance();
        }

    },

    _childWidgets: [ "checkboxradio", "selectmenu", "button" ],

    _themeClassFromOption: function( value ) {
        return ( value ? ( value === "none" ? "" : "ui-group-theme-" + value ) : "" );
    },

    _enhance: function() {
        var elem = this.element,
            opts = this.options,
            ui = {
                groupLegend: elem.children( "legend" ),
                childWrapper: elem
                    .addClass( "ui-controlgroup " +
                        "ui-controlgroup-" +
                            ( opts.type === "horizontal" ? "horizontal" : "vertical" ) + " " +
                        this._themeClassFromOption( opts.theme ) + " " +
                        ( opts.corners ? "ui-corner-all " : "" ) +
                        ( opts.mini ? "ui-mini " : "" ) )
                    .wrapInner( "<div " +
                        "class='ui-controlgroup-controls " +
                            ( opts.shadow === true ? "ui-shadow" : "" ) + "'></div>" )
                    .children()
            };

        if ( ui.groupLegend.length > 0 ) {
            $( "<div role='heading' class='ui-controlgroup-label'></div>" )
                .append( ui.groupLegend )
                .prependTo( elem );
        }

        return ui;
    },

    _init: function() {
        this.refresh();
    },

    _setOptions: function( options ) {
        var callRefresh, returnValue,
            elem = this.element;

        // Must have one of horizontal or vertical
        if ( options.type !== undefined ) {
            elem
                .removeClass( "ui-controlgroup-horizontal ui-controlgroup-vertical" )
                .addClass( "ui-controlgroup-" + ( options.type === "horizontal" ? "horizontal" : "vertical" ) );
            callRefresh = true;
        }

        if ( options.theme !== undefined ) {
            elem
                .removeClass( this._themeClassFromOption( this.options.theme ) )
                .addClass( this._themeClassFromOption( options.theme ) );
        }

        if ( options.corners !== undefined ) {
            elem.toggleClass( "ui-corner-all", options.corners );
        }

        if ( options.mini !== undefined ) {
            elem.toggleClass( "ui-mini", options.mini );
        }

        if ( options.shadow !== undefined ) {
            this._ui.childWrapper.toggleClass( "ui-shadow", options.shadow );
        }

        if ( options.excludeInvisible !== undefined ) {
            this.options.excludeInvisible = options.excludeInvisible;
            callRefresh = true;
        }

        returnValue = this._super( options );

        if ( callRefresh ) {
            this.refresh();
        }

        return returnValue;
    },

    container: function() {
        return this._ui.childWrapper;
    },

    refresh: function() {
        var $el = this.container(),
            els = $el.find( ".ui-btn" ).not( ".ui-slider-handle" ),
            create = this._initialRefresh;
        if ( $.mobile.checkboxradio ) {
            $el.find( ":mobile-checkboxradio" ).checkboxradio( "refresh" );
        }
        this._addFirstLastClasses( els,
            this.options.excludeInvisible ? this._getVisibles( els, create ) : els,
            create );
        this._initialRefresh = false;
    },

    // Caveat: If the legend is not the first child of the controlgroup at enhance
    // time, it will be after _destroy().
    _destroy: function() {
        var ui, buttons,
            opts = this.options;

        if ( opts.enhanced ) {
            return this;
        }

        ui = this._ui;
        buttons = this.element
            .removeClass( "ui-controlgroup " +
                "ui-controlgroup-horizontal ui-controlgroup-vertical ui-corner-all ui-mini " +
                this._themeClassFromOption( opts.theme ) )
            .find( ".ui-btn" )
            .not( ".ui-slider-handle" );

        this._removeFirstLastClasses( buttons );

        ui.groupLegend.unwrap();
        ui.childWrapper.children().unwrap();
    }
}, $.mobile.behaviors.addFirstLastClasses ) );

})(jQuery);

(function( $, undefined ) {

    $.widget( "mobile.toolbar", {
        initSelector: ":jqmData(role='footer'), :jqmData(role='header')",

        options: {
            theme: null,
            addBackBtn: false,
            backBtnTheme: null,
            backBtnText: "Back"
        },

        _create: function() {
            var leftbtn, rightbtn,
                role =  this.element.is( ":jqmData(role='header')" ) ? "header" : "footer",
                page = this.element.closest( ".ui-page" );
            if ( page.length === 0 ) {
                page = false;
                this._on( this.document, {
                    "pageshow": "refresh"
                });
            }
            $.extend( this, {
                role: role,
                page: page,
                leftbtn: leftbtn,
                rightbtn: rightbtn
            });
            this.element.attr( "role", role === "header" ? "banner" : "contentinfo" ).addClass( "ui-" + role );
            this.refresh();
            this._setOptions( this.options );
        },
        _setOptions: function( o ) {
            if ( o.addBackBtn !== undefined ) {
                this._updateBackButton();
            }
            if ( o.backBtnTheme != null ) {
                this.element
                    .find( ".ui-toolbar-back-btn" )
                    .addClass( "ui-btn ui-btn-" + o.backBtnTheme );
            }
            if ( o.backBtnText !== undefined ) {
                this.element.find( ".ui-toolbar-back-btn .ui-btn-text" ).text( o.backBtnText );
            }
            if ( o.theme !== undefined ) {
                var currentTheme = this.options.theme ? this.options.theme : "inherit",
                    newTheme = o.theme ? o.theme : "inherit";

                this.element.removeClass( "ui-bar-" + currentTheme ).addClass( "ui-bar-" + newTheme );
            }

            this._super( o );
        },
        refresh: function() {
            if ( this.role === "header" ) {
                this._addHeaderButtonClasses();
            }
            if ( !this.page ) {
                this._setRelative();
                if ( this.role === "footer" ) {
                    this.element.appendTo( "body" );
                } else if ( this.role === "header" ) {
                    this._updateBackButton();
                }
            }
            this._addHeadingClasses();
            this._btnMarkup();
        },

        //we only want this to run on non fixed toolbars so make it easy to override
        _setRelative: function() {
            $( "[data-"+ $.mobile.ns + "role='page']" ).css({ "position": "relative" });
        },

        // Deprecated in 1.4. As from 1.5 button classes have to be present in the markup.
        _btnMarkup: function() {
            this.element
                .children( "a" )
                .filter( ":not([data-" + $.mobile.ns + "role='none'])" )
                .attr( "data-" + $.mobile.ns + "role", "button" );
            this.element.trigger( "create" );
        },
        // Deprecated in 1.4. As from 1.5 ui-btn-left/right classes have to be present in the markup.
        _addHeaderButtonClasses: function() {
            var headerAnchors = this.element.children( "a, button" );

            // Do not mistake a back button for a left toolbar button
            this.leftbtn = headerAnchors.hasClass( "ui-btn-left" ) &&
                !headerAnchors.hasClass( "ui-toolbar-back-btn" );

            this.rightbtn = headerAnchors.hasClass( "ui-btn-right" );

            // Filter out right buttons and back buttons
            this.leftbtn = this.leftbtn ||
                headerAnchors.eq( 0 )
                    .not( ".ui-btn-right,.ui-toolbar-back-btn" )
                    .addClass( "ui-btn-left" )
                    .length;

            this.rightbtn = this.rightbtn || headerAnchors.eq( 1 ).addClass( "ui-btn-right" ).length;
        },
        _updateBackButton: function() {
            var backButton,
                options = this.options,
                theme = options.backBtnTheme || options.theme;

            // Retrieve the back button or create a new, empty one
            backButton = this._backButton = ( this._backButton || {} );

            // We add a back button only if the option to do so is on
            if ( this.options.addBackBtn &&

                    // This must also be a header toolbar
                    this.role === "header" &&

                    // There must be multiple pages in the DOM
                    $( ".ui-page" ).length > 1 &&
                    ( this.page ?

                        // If the toolbar is internal the page's URL must differ from the hash
                        ( this.page[ 0 ].getAttribute( "data-" + $.mobile.ns + "url" ) !==
                            $.mobile.path.stripHash( location.hash ) ) :

                        // Otherwise, if the toolbar is external there must be at least one
                        // history item to which one can go back
                        ( $.mobile.navigate && $.mobile.navigate.history &&
                            $.mobile.navigate.history.activeIndex > 0 ) ) &&

                    // The toolbar does not have a left button
                    !this.leftbtn ) {

                // Skip back button creation if one is already present
                if ( !backButton.attached ) {
                    this.backButton = backButton.element = ( backButton.element ||
                        $( "<a role='button' href='javascript:void(0);' " +
                            "class='ui-btn ui-corner-all ui-shadow ui-btn-left " +
                                ( theme ? "ui-btn-" + theme + " " : "" ) +
                                "ui-toolbar-back-btn ui-icon-carat-l ui-btn-icon-left' " +
                            "data-" + $.mobile.ns + "rel='back'>" + options.backBtnText +
                            "</a>" ) )
                            .prependTo( this.element );
                    backButton.attached = true;
                }

            // If we are not adding a back button, then remove the one present, if any
            } else if ( backButton.element ) {
                backButton.element.detach();
                backButton.attached = false;
            }
        },
        _addHeadingClasses: function() {
            this.element.children( "h1, h2, h3, h4, h5, h6" )
                .addClass( "ui-title" )
                // Regardless of h element number in src, it becomes h1 for the enhanced page
                .attr({
                    "role": "heading",
                    "aria-level": "1"
                });
        },
        _destroy: function() {
            var currentTheme;

            this.element.children( "h1, h2, h3, h4, h5, h6" )
                .removeClass( "ui-title" )
                .removeAttr( "role" )
                .removeAttr( "aria-level" );

            if ( this.role === "header" ) {
                this.element.children( "a, button" )
                    .removeClass( "ui-btn-left ui-btn-right ui-btn ui-shadow ui-corner-all" );
                if ( this.backButton) {
                    this.backButton.remove();
                }
            }

            currentTheme = this.options.theme ? this.options.theme : "inherit";
            this.element.removeClass( "ui-bar-" + currentTheme );

            this.element.removeClass( "ui-" + this.role ).removeAttr( "role" );
        }
    });

})( jQuery );

(function( $, undefined ) {

    $.widget( "mobile.toolbar", $.mobile.toolbar, {
        options: {
            position:null,
            visibleOnPageShow: true,
            disablePageZoom: true,
            transition: "slide", //can be none, fade, slide (slide maps to slideup or slidedown)
            fullscreen: false,
            tapToggle: true,
            tapToggleBlacklist: "a, button, input, select, textarea, .ui-header-fixed, .ui-footer-fixed, .ui-flipswitch, .ui-popup, .ui-panel, .ui-panel-dismiss-open",
            hideDuringFocus: "input, textarea, select",
            updatePagePadding: true,
            trackPersistentToolbars: true,

            // Browser detection! Weeee, here we go...
            // Unfortunately, position:fixed is costly, not to mention probably impossible, to feature-detect accurately.
            // Some tests exist, but they currently return false results in critical devices and browsers, which could lead to a broken experience.
            // Testing fixed positioning is also pretty obtrusive to page load, requiring injected elements and scrolling the window
            // The following function serves to rule out some popular browsers with known fixed-positioning issues
            // This is a plugin option like any other, so feel free to improve or overwrite it
            supportBlacklist: function() {
                return !$.support.fixedPosition;
            }
        },

        _create: function() {
            this._super();
            this.pagecontainer = $( ":mobile-pagecontainer" );
            if ( this.options.position === "fixed" && !this.options.supportBlacklist() ) {
                this._makeFixed();
            }
        },

        _makeFixed: function() {
            this.element.addClass( "ui-"+ this.role +"-fixed" );
            this.updatePagePadding();
            this._addTransitionClass();
            this._bindPageEvents();
            this._bindToggleHandlers();
        },

        _setOptions: function( o ) {
            if ( o.position === "fixed" && this.options.position !== "fixed" ) {
                this._makeFixed();
            }
            if ( this.options.position === "fixed" && !this.options.supportBlacklist() ) {
                var $page = ( !!this.page )? this.page: ( $(".ui-page-active").length > 0 )? $(".ui-page-active"): $(".ui-page").eq(0);

                if ( o.fullscreen !== undefined) {
                    if ( o.fullscreen ) {
                        this.element.addClass( "ui-"+ this.role +"-fullscreen" );
                        $page.addClass( "ui-page-" + this.role + "-fullscreen" );
                    }
                    // If not fullscreen, add class to page to set top or bottom padding
                    else {
                        this.element.removeClass( "ui-"+ this.role +"-fullscreen" );
                        $page.removeClass( "ui-page-" + this.role + "-fullscreen" ).addClass( "ui-page-" + this.role+ "-fixed" );
                    }
                }
            }
            this._super(o);
        },

        _addTransitionClass: function() {
            var tclass = this.options.transition;

            if ( tclass && tclass !== "none" ) {
                // use appropriate slide for header or footer
                if ( tclass === "slide" ) {
                    tclass = this.element.hasClass( "ui-header" ) ? "slidedown" : "slideup";
                }

                this.element.addClass( tclass );
            }
        },

        _bindPageEvents: function() {
            var page = ( !!this.page )? this.element.closest( ".ui-page" ): this.document;
            //page event bindings
            // Fixed toolbars require page zoom to be disabled, otherwise usability issues crop up
            // This method is meant to disable zoom while a fixed-positioned toolbar page is visible
            this._on( page , {
                "pagebeforeshow": "_handlePageBeforeShow",
                "webkitAnimationStart":"_handleAnimationStart",
                "animationstart":"_handleAnimationStart",
                "updatelayout": "_handleAnimationStart",
                "pageshow": "_handlePageShow",
                "pagebeforehide": "_handlePageBeforeHide"
            });
        },

        _handlePageBeforeShow: function( ) {
            var o = this.options;
            if ( o.disablePageZoom ) {
                $.mobile.zoom.disable( true );
            }
            if ( !o.visibleOnPageShow ) {
                this.hide( true );
            }
        },

        _handleAnimationStart: function() {
            if ( this.options.updatePagePadding ) {
                this.updatePagePadding( ( !!this.page )? this.page: ".ui-page-active" );
            }
        },

        _handlePageShow: function() {
            this.updatePagePadding( ( !!this.page )? this.page: ".ui-page-active" );
            if ( this.options.updatePagePadding ) {
                this._on( this.window, { "throttledresize": "updatePagePadding" } );
            }
        },

        _handlePageBeforeHide: function( e, ui ) {
            var o = this.options,
                thisFooter, thisHeader, nextFooter, nextHeader;

            if ( o.disablePageZoom ) {
                $.mobile.zoom.enable( true );
            }
            if ( o.updatePagePadding ) {
                this._off( this.window, "throttledresize" );
            }

            if ( o.trackPersistentToolbars ) {
                thisFooter = $( ".ui-footer-fixed:jqmData(id)", this.page );
                thisHeader = $( ".ui-header-fixed:jqmData(id)", this.page );
                nextFooter = thisFooter.length && ui.nextPage && $( ".ui-footer-fixed:jqmData(id='" + thisFooter.jqmData( "id" ) + "')", ui.nextPage ) || $();
                nextHeader = thisHeader.length && ui.nextPage && $( ".ui-header-fixed:jqmData(id='" + thisHeader.jqmData( "id" ) + "')", ui.nextPage ) || $();

                if ( nextFooter.length || nextHeader.length ) {

                    nextFooter.add( nextHeader ).appendTo( $.mobile.pageContainer );

                    ui.nextPage.one( "pageshow", function() {
                        nextHeader.prependTo( this );
                        nextFooter.appendTo( this );
                    });
                }
            }
        },

        _visible: true,

        // This will set the content element's top or bottom padding equal to the toolbar's height
        updatePagePadding: function( tbPage ) {
            var $el = this.element,
                header = ( this.role ==="header" ),
                pos = parseFloat( $el.css( header ? "top" : "bottom" ) );

            // This behavior only applies to "fixed", not "fullscreen"
            if ( this.options.fullscreen ) { return; }
            // tbPage argument can be a Page object or an event, if coming from throttled resize.
            tbPage = ( tbPage && tbPage.type === undefined && tbPage ) || this.page || $el.closest( ".ui-page" );
            tbPage = ( !!this.page )? this.page: ".ui-page-active";
            $( tbPage ).css( "padding-" + ( header ? "top" : "bottom" ), $el.outerHeight() + pos );
        },

        _useTransition: function( notransition ) {
            var $win = this.window,
                $el = this.element,
                scroll = $win.scrollTop(),
                elHeight = $el.height(),
                pHeight = ( !!this.page )? $el.closest( ".ui-page" ).height():$(".ui-page-active").height(),
                viewportHeight = $.mobile.getScreenHeight();

            return !notransition &&
                ( this.options.transition && this.options.transition !== "none" &&
                (
                    ( this.role === "header" && !this.options.fullscreen && scroll > elHeight ) ||
                    ( this.role === "footer" && !this.options.fullscreen && scroll + viewportHeight < pHeight - elHeight )
                ) || this.options.fullscreen
                );
        },

        show: function( notransition ) {
            var hideClass = "ui-fixed-hidden",
                $el = this.element;

            if ( this._useTransition( notransition ) ) {
                $el
                    .removeClass( "out " + hideClass )
                    .addClass( "in" )
                    .animationComplete(function () {
                        $el.removeClass( "in" );
                    });
            }
            else {
                $el.removeClass( hideClass );
            }
            this._visible = true;
        },

        hide: function( notransition ) {
            var hideClass = "ui-fixed-hidden",
                $el = this.element,
                // if it's a slide transition, our new transitions need the reverse class as well to slide outward
                outclass = "out" + ( this.options.transition === "slide" ? " reverse" : "" );

            if ( this._useTransition( notransition ) ) {
                $el
                    .addClass( outclass )
                    .removeClass( "in" )
                    .animationComplete(function() {
                        $el.addClass( hideClass ).removeClass( outclass );
                    });
            }
            else {
                $el.addClass( hideClass ).removeClass( outclass );
            }
            this._visible = false;
        },

        toggle: function() {
            this[ this._visible ? "hide" : "show" ]();
        },

        _bindToggleHandlers: function() {
            var self = this,
                o = self.options,
                delayShow, delayHide,
                isVisible = true,
                page = ( !!this.page )? this.page: $(".ui-page");

            // tap toggle
            page
                .bind( "vclick", function( e ) {
                    if ( o.tapToggle && !$( e.target ).closest( o.tapToggleBlacklist ).length ) {
                        self.toggle();
                    }
                })
                .bind( "focusin focusout", function( e ) {
                    //this hides the toolbars on a keyboard pop to give more screen room and prevent ios bug which
                    //positions fixed toolbars in the middle of the screen on pop if the input is near the top or
                    //bottom of the screen addresses issues #4410 Footer navbar moves up when clicking on a textbox in an Android environment
                    //and issue #4113 Header and footer change their position after keyboard popup - iOS
                    //and issue #4410 Footer navbar moves up when clicking on a textbox in an Android environment
                    if ( screen.width < 1025 && $( e.target ).is( o.hideDuringFocus ) && !$( e.target ).closest( ".ui-header-fixed, .ui-footer-fixed" ).length ) {
                        //Fix for issue #4724 Moving through form in Mobile Safari with "Next" and "Previous" system
                        //controls causes fixed position, tap-toggle false Header to reveal itself
                        // isVisible instead of self._visible because the focusin and focusout events fire twice at the same time
                        // Also use a delay for hiding the toolbars because on Android native browser focusin is direclty followed
                        // by a focusout when a native selects opens and the other way around when it closes.
                        if ( e.type === "focusout" && !isVisible ) {
                            isVisible = true;
                            //wait for the stack to unwind and see if we have jumped to another input
                            clearTimeout( delayHide );
                            delayShow = setTimeout( function() {
                                self.show();
                            }, 0 );
                        } else if ( e.type === "focusin" && !!isVisible ) {
                            //if we have jumped to another input clear the time out to cancel the show.
                            clearTimeout( delayShow );
                            isVisible = false;
                            delayHide = setTimeout( function() {
                                self.hide();
                            }, 0 );
                        }
                    }
                });
        },

        _setRelative: function() {
            if( this.options.position !== "fixed" ){
                $( "[data-"+ $.mobile.ns + "role='page']" ).css({ "position": "relative" });
            }
        },

        _destroy: function() {
            var pageClasses, toolbarClasses, hasFixed, header, hasFullscreen,
                page = this.pagecontainer.pagecontainer( "getActivePage" );

            this._super();
            if ( this.options.position === "fixed" ) {
                hasFixed = $(  "body>.ui-" + this.role + "-fixed" )
                            .add( page.find( ".ui-" + this.options.role + "-fixed" ) )
                            .not( this.element ).length > 0;
                hasFullscreen = $(  "body>.ui-" + this.role + "-fixed" )
                            .add( page.find( ".ui-" + this.options.role + "-fullscreen" ) )
                            .not( this.element ).length > 0;
                toolbarClasses =  "ui-header-fixed ui-footer-fixed ui-header-fullscreen in out" +
                    " ui-footer-fullscreen fade slidedown slideup ui-fixed-hidden";
                this.element.removeClass( toolbarClasses );
                if ( !hasFullscreen ) {
                    pageClasses = "ui-page-" + this.role + "-fullscreen";
                }
                if ( !hasFixed ) {
                    header = this.role === "header";
                    pageClasses += " ui-page-" + this.role + "-fixed";
                    page.css( "padding-" + ( header ? "top" : "bottom" ), "" );
                }
                page.removeClass( pageClasses );
            }
        }

    });
})( jQuery );

(function( $, undefined ) {
    $.widget( "mobile.toolbar", $.mobile.toolbar, {

        _makeFixed: function() {
            this._super();
            this._workarounds();
        },

        //check the browser and version and run needed workarounds
        _workarounds: function() {
            var ua = navigator.userAgent,
            platform = navigator.platform,
            // Rendering engine is Webkit, and capture major version
            wkmatch = ua.match( /AppleWebKit\/([0-9]+)/ ),
            wkversion = !!wkmatch && wkmatch[ 1 ],
            os = null,
            self = this;
            //set the os we are working in if it dosent match one with workarounds return
            if ( platform.indexOf( "iPhone" ) > -1 || platform.indexOf( "iPad" ) > -1  || platform.indexOf( "iPod" ) > -1 ) {
                os = "ios";
            } else if ( ua.indexOf( "Android" ) > -1 ) {
                os = "android";
            } else {
                return;
            }
            //check os version if it dosent match one with workarounds return
            if ( os === "ios" ) {
                //iOS  workarounds
                self._bindScrollWorkaround();
            } else if ( os === "android" && wkversion && wkversion < 534 ) {
                //Android 2.3 run all Android 2.3 workaround
                self._bindScrollWorkaround();
                self._bindListThumbWorkaround();
            } else {
                return;
            }
        },

        //Utility class for checking header and footer positions relative to viewport
        _viewportOffset: function() {
            var $el = this.element,
                header = $el.hasClass( "ui-header" ),
                offset = Math.abs( $el.offset().top - this.window.scrollTop() );
            if ( !header ) {
                offset = Math.round( offset - this.window.height() + $el.outerHeight() ) - 60;
            }
            return offset;
        },

        //bind events for _triggerRedraw() function
        _bindScrollWorkaround: function() {
            var self = this;
            //bind to scrollstop and check if the toolbars are correctly positioned
            this._on( this.window, { scrollstop: function() {
                var viewportOffset = self._viewportOffset();
                //check if the header is visible and if its in the right place
                if ( viewportOffset > 2 && self._visible ) {
                    self._triggerRedraw();
                }
            }});
        },

        //this addresses issue #4250 Persistent footer instability in v1.1 with long select lists in Android 2.3.3
        //and issue #3748 Android 2.x: Page transitions broken when fixed toolbars used
        //the absolutely positioned thumbnail in a list view causes problems with fixed position buttons above in a nav bar
        //setting the li's to -webkit-transform:translate3d(0,0,0); solves this problem to avoide potential issues in other
        //platforms we scope this with the class ui-android-2x-fix
        _bindListThumbWorkaround: function() {
            this.element.closest( ".ui-page" ).addClass( "ui-android-2x-fixed" );
        },
        //this addresses issues #4337 Fixed header problem after scrolling content on iOS and Android
        //and device bugs project issue #1 Form elements can lose click hit area in position: fixed containers.
        //this also addresses not on fixed toolbars page in docs
        //adding 1px of padding to the bottom then removing it causes a "redraw"
        //which positions the toolbars correctly (they will always be visually correct)
        _triggerRedraw: function() {
            var paddingBottom = parseFloat( $( ".ui-page-active" ).css( "padding-bottom" ) );
            //trigger page redraw to fix incorrectly positioned fixed elements
            $( ".ui-page-active" ).css( "padding-bottom", ( paddingBottom + 1 ) + "px" );
            //if the padding is reset with out a timeout the reposition will not occure.
            //this is independant of JQM the browser seems to need the time to react.
            setTimeout( function() {
                $( ".ui-page-active" ).css( "padding-bottom", paddingBottom + "px" );
            }, 0 );
        },

        destroy: function() {
            this._super();
            //Remove the class we added to the page previously in android 2.x
            this.element.closest( ".ui-page-active" ).removeClass( "ui-android-2x-fix" );
        }
    });

})( jQuery );


( function( $, undefined ) {

var ieHack = ( $.mobile.browser.oldIE && $.mobile.browser.oldIE <= 8 ),
    uiTemplate = $(
        "<div class='ui-popup-arrow-guide'></div>" +
        "<div class='ui-popup-arrow-container" + ( ieHack ? " ie" : "" ) + "'>" +
            "<div class='ui-popup-arrow'></div>" +
        "</div>"
    );

function getArrow() {
    var clone = uiTemplate.clone(),
        gd = clone.eq( 0 ),
        ct = clone.eq( 1 ),
        ar = ct.children();

    return { arEls: ct.add( gd ), gd: gd, ct: ct, ar: ar };
}

$.widget( "mobile.popup", $.mobile.popup, {
    options: {

        arrow: ""
    },

    _create: function() {
        var ar,
            ret = this._super();

        if ( this.options.arrow ) {
            this._ui.arrow = ar = this._addArrow();
        }

        return ret;
    },

    _addArrow: function() {
        var theme,
            opts = this.options,
            ar = getArrow();

        theme = this._themeClassFromOption( "ui-body-", opts.theme );
        ar.ar.addClass( theme + ( opts.shadow ? " ui-overlay-shadow" : "" ) );
        ar.arEls.hide().appendTo( this.element );

        return ar;
    },

    _unenhance: function() {
        var ar = this._ui.arrow;

        if ( ar ) {
            ar.arEls.remove();
        }

        return this._super();
    },

    // Pretend to show an arrow described by @p and @dir and calculate the
    // distance from the desired point. If a best-distance is passed in, return
    // the minimum of the one passed in and the one calculated.
    _tryAnArrow: function( p, dir, desired, s, best ) {
        var result, r, diff, desiredForArrow = {}, tip = {};

        // If the arrow has no wiggle room along the edge of the popup, it cannot
        // be displayed along the requested edge without it sticking out.
        if ( s.arFull[ p.dimKey ] > s.guideDims[ p.dimKey ] ) {
            return best;
        }

        desiredForArrow[ p.fst ] = desired[ p.fst ] +
            ( s.arHalf[ p.oDimKey ] + s.menuHalf[ p.oDimKey ] ) * p.offsetFactor -
            s.contentBox[ p.fst ] + ( s.clampInfo.menuSize[ p.oDimKey ] - s.contentBox[ p.oDimKey ] ) * p.arrowOffsetFactor;
        desiredForArrow[ p.snd ] = desired[ p.snd ];

        result = s.result || this._calculateFinalLocation( desiredForArrow, s.clampInfo );
        r = { x: result.left, y: result.top };

        tip[ p.fst ] = r[ p.fst ] + s.contentBox[ p.fst ] + p.tipOffset;
        tip[ p.snd ] = Math.max( result[ p.prop ] + s.guideOffset[ p.prop ] + s.arHalf[ p.dimKey ],
            Math.min( result[ p.prop ] + s.guideOffset[ p.prop ] + s.guideDims[ p.dimKey ] - s.arHalf[ p.dimKey ],
                desired[ p.snd ] ) );

        diff = Math.abs( desired.x - tip.x ) + Math.abs( desired.y - tip.y );
        if ( !best || diff < best.diff ) {
            // Convert tip offset to coordinates inside the popup
            tip[ p.snd ] -= s.arHalf[ p.dimKey ] + result[ p.prop ] + s.contentBox[ p.snd ];
            best = { dir: dir, diff: diff, result: result, posProp: p.prop, posVal: tip[ p.snd ] };
        }

        return best;
    },

    _getPlacementState: function( clamp ) {
        var offset, gdOffset,
            ar = this._ui.arrow,
            state = {
                clampInfo: this._clampPopupWidth( !clamp ),
                arFull: { cx: ar.ct.width(), cy: ar.ct.height() },
                guideDims: { cx: ar.gd.width(), cy: ar.gd.height() },
                guideOffset: ar.gd.offset()
            };

        offset = this.element.offset();

        ar.gd.css( { left: 0, top: 0, right: 0, bottom: 0 } );
        gdOffset = ar.gd.offset();
        state.contentBox = {
            x: gdOffset.left - offset.left,
            y: gdOffset.top - offset.top,
            cx: ar.gd.width(),
            cy: ar.gd.height()
        };
        ar.gd.removeAttr( "style" );

        // The arrow box moves between guideOffset and guideOffset + guideDims - arFull
        state.guideOffset = { left: state.guideOffset.left - offset.left, top: state.guideOffset.top - offset.top };
        state.arHalf = { cx: state.arFull.cx / 2, cy: state.arFull.cy / 2 };
        state.menuHalf = { cx: state.clampInfo.menuSize.cx / 2, cy: state.clampInfo.menuSize.cy / 2 };

        return state;
    },

    _placementCoords: function( desired ) {
        var state, best, params, elOffset, bgRef,
            optionValue = this.options.arrow,
            ar = this._ui.arrow;

        if ( !ar ) {
            return this._super( desired );
        }

        ar.arEls.show();

        bgRef = {};
        state = this._getPlacementState( true );
        params = {
            "l": { fst: "x", snd: "y", prop: "top", dimKey: "cy", oDimKey: "cx", offsetFactor: 1, tipOffset:  -state.arHalf.cx, arrowOffsetFactor: 0 },
            "r": { fst: "x", snd: "y", prop: "top", dimKey: "cy", oDimKey: "cx", offsetFactor: -1, tipOffset: state.arHalf.cx + state.contentBox.cx, arrowOffsetFactor: 1 },
            "b": { fst: "y", snd: "x", prop: "left", dimKey: "cx", oDimKey: "cy", offsetFactor: -1, tipOffset: state.arHalf.cy + state.contentBox.cy, arrowOffsetFactor: 1 },
            "t": { fst: "y", snd: "x", prop: "left", dimKey: "cx", oDimKey: "cy", offsetFactor: 1, tipOffset: -state.arHalf.cy, arrowOffsetFactor: 0 }
        };

        // Try each side specified in the options to see on which one the arrow
        // should be placed such that the distance between the tip of the arrow and
        // the desired coordinates is the shortest.
        $.each( ( optionValue === true ? "l,t,r,b" : optionValue ).split( "," ),
            $.proxy( function( key, value ) {
                best = this._tryAnArrow( params[ value ], value, desired, state, best );
            }, this ) );

        // Could not place the arrow along any of the edges - behave as if showing
        // the arrow was turned off.
        if ( !best ) {
            ar.arEls.hide();
            return this._super( desired );
        }

        // Move the arrow into place
        ar.ct
            .removeClass( "ui-popup-arrow-l ui-popup-arrow-t ui-popup-arrow-r ui-popup-arrow-b" )
            .addClass( "ui-popup-arrow-" + best.dir )
            .removeAttr( "style" ).css( best.posProp, best.posVal )
            .show();

        // Do not move/size the background div on IE, because we use the arrow div for background as well.
        if ( !ieHack ) {
            elOffset = this.element.offset();
            bgRef[ params[ best.dir ].fst ] = ar.ct.offset();
            bgRef[ params[ best.dir ].snd ] = {
                left: elOffset.left + state.contentBox.x,
                top: elOffset.top + state.contentBox.y
            };
        }

        return best.result;
    },

    _setOptions: function( opts ) {
        var newTheme,
            oldTheme = this.options.theme,
            ar = this._ui.arrow,
            ret = this._super( opts );

        if ( opts.arrow !== undefined ) {
            if ( !ar && opts.arrow ) {
                this._ui.arrow = this._addArrow();

                // Important to return here so we don't set the same options all over
                // again below.
                return;
            } else if ( ar && !opts.arrow ) {
                ar.arEls.remove();
                this._ui.arrow = null;
            }
        }

        // Reassign with potentially new arrow
        ar = this._ui.arrow;

        if ( ar ) {
            if ( opts.theme !== undefined ) {
                oldTheme = this._themeClassFromOption( "ui-body-", oldTheme );
                newTheme = this._themeClassFromOption( "ui-body-", opts.theme );
                ar.ar.removeClass( oldTheme ).addClass( newTheme );
            }

            if ( opts.shadow !== undefined ) {
                ar.ar.toggleClass( "ui-overlay-shadow", opts.shadow );
            }
        }

        return ret;
    },

    _destroy: function() {
        var ar = this._ui.arrow;

        if ( ar ) {
            ar.arEls.remove();
        }

        return this._super();
    }
});

})( jQuery );


(function( $, undefined ) {

$.widget( "mobile.panel", {
    options: {
        classes: {
            panel: "ui-panel",
            panelOpen: "ui-panel-open",
            panelClosed: "ui-panel-closed",
            panelFixed: "ui-panel-fixed",
            panelInner: "ui-panel-inner",
            modal: "ui-panel-dismiss",
            modalOpen: "ui-panel-dismiss-open",
            pageContainer: "ui-panel-page-container",
            pageWrapper: "ui-panel-wrapper",
            pageFixedToolbar: "ui-panel-fixed-toolbar",
            pageContentPrefix: "ui-panel-page-content", /* Used for wrapper and fixed toolbars position, display and open classes. */
            animate: "ui-panel-animate"
        },
        animate: true,
        theme: null,
        position: "left",
        dismissible: true,
        display: "reveal", //accepts reveal, push, overlay
        swipeClose: true,
        positionFixed: false
    },

    _closeLink: null,
    _parentPage: null,
    _page: null,
    _modal: null,
    _panelInner: null,
    _wrapper: null,
    _fixedToolbars: null,

    _create: function() {
        var el = this.element,
            parentPage = el.closest( ".ui-page, :jqmData(role='page')" );

        // expose some private props to other methods
        $.extend( this, {
            _closeLink: el.find( ":jqmData(rel='close')" ),
            _parentPage: ( parentPage.length > 0 ) ? parentPage : false,
            _openedPage: null,
            _page: this._getPage,
            _panelInner: this._getPanelInner(),
            _fixedToolbars: this._getFixedToolbars
        });
        if ( this.options.display !== "overlay" ){
            this._getWrapper();
        }
        this._addPanelClasses();

        // if animating, add the class to do so
        if ( $.support.cssTransform3d && !!this.options.animate ) {
            this.element.addClass( this.options.classes.animate );
        }

        this._bindUpdateLayout();
        this._bindCloseEvents();
        this._bindLinkListeners();
        this._bindPageEvents();

        if ( !!this.options.dismissible ) {
            this._createModal();
        }

        this._bindSwipeEvents();
    },

    _getPanelInner: function() {
        var panelInner = this.element.find( "." + this.options.classes.panelInner );

        if ( panelInner.length === 0 ) {
            panelInner = this.element.children().wrapAll( "<div class='" + this.options.classes.panelInner + "' />" ).parent();
        }

        return panelInner;
    },

    _createModal: function() {
        var self = this,
            target = self._parentPage ? self._parentPage.parent() : self.element.parent();

        self._modal = $( "<div class='" + self.options.classes.modal + "'></div>" )
            .on( "mousedown", function() {
                self.close();
            })
            .appendTo( target );
    },

    _getPage: function() {
        var page = this._openedPage || this._parentPage || $( "." + $.mobile.activePageClass );

        return page;
    },

    _getWrapper: function() {
        var wrapper = this._page().find( "." + this.options.classes.pageWrapper );
        if ( wrapper.length === 0 ) {
            wrapper = this._page().children( ".ui-header:not(.ui-header-fixed), .ui-content:not(.ui-popup), .ui-footer:not(.ui-footer-fixed)" )
                .wrapAll( "<div class='" + this.options.classes.pageWrapper + "'></div>" )
                .parent();
        }

        this._wrapper = wrapper;
    },

    _getFixedToolbars: function() {
        var extFixedToolbars = $( "body" ).children( ".ui-header-fixed, .ui-footer-fixed" ),
            intFixedToolbars = this._page().find( ".ui-header-fixed, .ui-footer-fixed" ),
            fixedToolbars = extFixedToolbars.add( intFixedToolbars ).addClass( this.options.classes.pageFixedToolbar );

        return fixedToolbars;
    },

    _getPosDisplayClasses: function( prefix ) {
        return prefix + "-position-" + this.options.position + " " + prefix + "-display-" + this.options.display;
    },

    _getPanelClasses: function() {
        var panelClasses = this.options.classes.panel +
            " " + this._getPosDisplayClasses( this.options.classes.panel ) +
            " " + this.options.classes.panelClosed +
            " " + "ui-body-" + ( this.options.theme ? this.options.theme : "inherit" );

        if ( !!this.options.positionFixed ) {
            panelClasses += " " + this.options.classes.panelFixed;
        }

        return panelClasses;
    },

    _addPanelClasses: function() {
        this.element.addClass( this._getPanelClasses() );
    },

    _handleCloseClick: function( event ) {
        if ( !event.isDefaultPrevented() ) {
            this.close();
        }
    },

    _bindCloseEvents: function() {
        this._on( this._closeLink, {
            "click": "_handleCloseClick"
        });

        this._on({
            "click a:jqmData(ajax='false')": "_handleCloseClick"
        });
    },

    _positionPanel: function( scrollToTop ) {
        var self = this,
            panelInnerHeight = self._panelInner.outerHeight(),
            expand = panelInnerHeight > $.mobile.getScreenHeight();

        if ( expand || !self.options.positionFixed ) {
            if ( expand ) {
                self._unfixPanel();
                $.mobile.resetActivePageHeight( panelInnerHeight );
            }
            if ( scrollToTop ) {
                this.window[ 0 ].scrollTo( 0, $.mobile.defaultHomeScroll );
            }
        } else {
            self._fixPanel();
        }
    },

    _bindFixListener: function() {
        this._on( $( window ), { "throttledresize": "_positionPanel" });
    },

    _unbindFixListener: function() {
        this._off( $( window ), "throttledresize" );
    },

    _unfixPanel: function() {
        if ( !!this.options.positionFixed && $.support.fixedPosition ) {
            this.element.removeClass( this.options.classes.panelFixed );
        }
    },

    _fixPanel: function() {
        if ( !!this.options.positionFixed && $.support.fixedPosition ) {
            this.element.addClass( this.options.classes.panelFixed );
        }
    },

    _bindUpdateLayout: function() {
        var self = this;

        self.element.on( "updatelayout", function(/* e */) {
            if ( self._open ) {
                self._positionPanel();
            }
        });
    },

    _bindLinkListeners: function() {
        this._on( "body", {
            "click a": "_handleClick"
        });

    },

    _handleClick: function( e ) {
        var link,
            panelId = this.element.attr( "id" );

        if ( e.currentTarget.href.split( "#" )[ 1 ] === panelId && panelId !== undefined ) {

            e.preventDefault();
            link = $( e.target );
            if ( link.hasClass( "ui-btn" ) ) {
                link.addClass( $.mobile.activeBtnClass );
                this.element.one( "panelopen panelclose", function() {
                    link.removeClass( $.mobile.activeBtnClass );
                });
            }
            this.toggle();
        }
    },

    _bindSwipeEvents: function() {
        var self = this,
            area = self._modal ? self.element.add( self._modal ) : self.element;

        // on swipe, close the panel
        if ( !!self.options.swipeClose ) {
            if ( self.options.position === "left" ) {
                area.on( "swipeleft.panel", function(/* e */) {
                    self.close();
                });
            } else {
                area.on( "swiperight.panel", function(/* e */) {
                    self.close();
                });
            }
        }
    },

    _bindPageEvents: function() {
        var self = this;

        this.document
            // Close the panel if another panel on the page opens
            .on( "panelbeforeopen", function( e ) {
                if ( self._open && e.target !== self.element[ 0 ] ) {
                    self.close();
                }
            })
            // On escape, close? might need to have a target check too...
            .on( "keyup.panel", function( e ) {
                if ( e.keyCode === 27 && self._open ) {
                    self.close();
                }
            });
        if ( !this._parentPage && this.options.display !== "overlay" ) {
            this._on( this.document, {
                "pageshow": function() {
                    this._openedPage = null;
                    this._getWrapper();
                }
            });
        }
        // Clean up open panels after page hide
        if ( self._parentPage ) {
            this.document.on( "pagehide", ":jqmData(role='page')", function() {
                if ( self._open ) {
                    self.close( true );
                }
            });
        } else {
            this.document.on( "pagebeforehide", function() {
                if ( self._open ) {
                    self.close( true );
                }
            });
        }
    },

    // state storage of open or closed
    _open: false,
    _pageContentOpenClasses: null,
    _modalOpenClasses: null,

    open: function( immediate ) {
        if ( !this._open ) {
            var self = this,
                o = self.options,

                _openPanel = function() {
                    self._off( self.document , "panelclose" );
                    self._page().jqmData( "panel", "open" );

                    if ( $.support.cssTransform3d && !!o.animate && o.display !== "overlay" ) {
                        self._wrapper.addClass( o.classes.animate );
                        self._fixedToolbars().addClass( o.classes.animate );
                    }

                    if ( !immediate && $.support.cssTransform3d && !!o.animate ) {
                        ( self._wrapper || self.element )
                            .animationComplete( complete, "transition" );
                    } else {
                        setTimeout( complete, 0 );
                    }

                    if ( o.theme && o.display !== "overlay" ) {
                        self._page().parent()
                            .addClass( o.classes.pageContainer + "-themed " + o.classes.pageContainer + "-" + o.theme );
                    }

                    self.element
                        .removeClass( o.classes.panelClosed )
                        .addClass( o.classes.panelOpen );

                    self._positionPanel( true );

                    self._pageContentOpenClasses = self._getPosDisplayClasses( o.classes.pageContentPrefix );

                    if ( o.display !== "overlay" ) {
                        self._page().parent().addClass( o.classes.pageContainer );
                        self._wrapper.addClass( self._pageContentOpenClasses );
                        self._fixedToolbars().addClass( self._pageContentOpenClasses );
                    }

                    self._modalOpenClasses = self._getPosDisplayClasses( o.classes.modal ) + " " + o.classes.modalOpen;
                    if ( self._modal ) {
                        self._modal
                            .addClass( self._modalOpenClasses )
                            .height( Math.max( self._modal.height(), self.document.height() ) );
                    }
                },
                complete = function() {

                    // Bail if the panel was closed before the opening animation has completed
                    if ( !self._open ) {
                        return;
                    }

                    if ( o.display !== "overlay" ) {
                        self._wrapper.addClass( o.classes.pageContentPrefix + "-open" );
                        self._fixedToolbars().addClass( o.classes.pageContentPrefix + "-open" );
                    }

                    self._bindFixListener();

                    self._trigger( "open" );

                    self._openedPage = self._page();
                };

            self._trigger( "beforeopen" );

            if ( self._page().jqmData( "panel" ) === "open" ) {
                self._on( self.document, {
                    "panelclose": _openPanel
                });
            } else {
                _openPanel();
            }

            self._open = true;
        }
    },

    close: function( immediate ) {
        if ( this._open ) {
            var self = this,
                o = this.options,

                _closePanel = function() {

                    self.element.removeClass( o.classes.panelOpen );

                    if ( o.display !== "overlay" ) {
                        self._wrapper.removeClass( self._pageContentOpenClasses );
                        self._fixedToolbars().removeClass( self._pageContentOpenClasses );
                    }

                    if ( !immediate && $.support.cssTransform3d && !!o.animate ) {
                        ( self._wrapper || self.element )
                            .animationComplete( complete, "transition" );
                    } else {
                        setTimeout( complete, 0 );
                    }

                    if ( self._modal ) {
                        self._modal
                            .removeClass( self._modalOpenClasses )
                            .height( "" );
                    }
                },
                complete = function() {
                    if ( o.theme && o.display !== "overlay" ) {
                        self._page().parent().removeClass( o.classes.pageContainer + "-themed " + o.classes.pageContainer + "-" + o.theme );
                    }

                    self.element.addClass( o.classes.panelClosed );

                    if ( o.display !== "overlay" ) {
                        self._page().parent().removeClass( o.classes.pageContainer );
                        self._wrapper.removeClass( o.classes.pageContentPrefix + "-open" );
                        self._fixedToolbars().removeClass( o.classes.pageContentPrefix + "-open" );
                    }

                    if ( $.support.cssTransform3d && !!o.animate && o.display !== "overlay" ) {
                        self._wrapper.removeClass( o.classes.animate );
                        self._fixedToolbars().removeClass( o.classes.animate );
                    }

                    self._fixPanel();
                    self._unbindFixListener();
                    $.mobile.resetActivePageHeight();

                    self._page().jqmRemoveData( "panel" );

                    self._trigger( "close" );

                    self._openedPage = null;
                };

            self._trigger( "beforeclose" );

            _closePanel();

            self._open = false;
        }
    },

    toggle: function() {
        this[ this._open ? "close" : "open" ]();
    },

    _destroy: function() {
        var otherPanels,
        o = this.options,
        multiplePanels = ( $( "body > :mobile-panel" ).length + $.mobile.activePage.find( ":mobile-panel" ).length ) > 1;

        if ( o.display !== "overlay" ) {

            //  remove the wrapper if not in use by another panel
            otherPanels = $( "body > :mobile-panel" ).add( $.mobile.activePage.find( ":mobile-panel" ) );
            if ( otherPanels.not( ".ui-panel-display-overlay" ).not( this.element ).length === 0 ) {
                this._wrapper.children().unwrap();
            }

            if ( this._open ) {

                this._fixedToolbars().removeClass( o.classes.pageContentPrefix + "-open" );

                if ( $.support.cssTransform3d && !!o.animate ) {
                    this._fixedToolbars().removeClass( o.classes.animate );
                }

                this._page().parent().removeClass( o.classes.pageContainer );

                if ( o.theme ) {
                    this._page().parent().removeClass( o.classes.pageContainer + "-themed " + o.classes.pageContainer + "-" + o.theme );
                }
            }
        }

        if ( !multiplePanels ) {

            this.document.off( "panelopen panelclose" );

        }

        if ( this._open ) {
            this._page().jqmRemoveData( "panel" );
        }

        this._panelInner.children().unwrap();

        this.element
            .removeClass( [ this._getPanelClasses(), o.classes.panelOpen, o.classes.animate ].join( " " ) )
            .off( "swipeleft.panel swiperight.panel" )
            .off( "panelbeforeopen" )
            .off( "panelhide" )
            .off( "keyup.panel" )
            .off( "updatelayout" );

        if ( this._modal ) {
            this._modal.remove();
        }
    }
});

})( jQuery );

(function( $, undefined ) {

$.widget( "mobile.table", {
    options: {
        classes: {
            table: "ui-table"
        },
        enhanced: false
    },

    _create: function() {
        if ( !this.options.enhanced ) {
            this.element.addClass( this.options.classes.table );
        }

        // extend here, assign on refresh > _setHeaders
        $.extend( this, {

            // Expose headers and allHeaders properties on the widget
            // headers references the THs within the first TR in the table
            headers: undefined,

            // allHeaders references headers, plus all THs in the thead, which may
            // include several rows, or not
            allHeaders: undefined
        });

        this._refresh( true );
    },

    _setHeaders: function() {
        var trs = this.element.find( "thead tr" );

        this.headers = this.element.find( "tr:eq(0)" ).children();
        this.allHeaders = this.headers.add( trs.children() );
    },

    refresh: function() {
        this._refresh();
    },

    rebuild: $.noop,

    _refresh: function( /* create */ ) {
        var table = this.element,
            trs = table.find( "thead tr" );

        // updating headers on refresh (fixes #5880)
        this._setHeaders();

        // Iterate over the trs
        trs.each( function() {
            var columnCount = 0;

            // Iterate over the children of the tr
            $( this ).children().each( function() {
                var span = parseInt( this.getAttribute( "colspan" ), 10 ),
                    selector = ":nth-child(" + ( columnCount + 1 ) + ")",
                    j;

                this.setAttribute( "data-" + $.mobile.ns + "colstart", columnCount + 1 );

                if ( span ) {
                    for( j = 0; j < span - 1; j++ ) {
                        columnCount++;
                        selector += ", :nth-child(" + ( columnCount + 1 ) + ")";
                    }
                }

                // Store "cells" data on header as a reference to all cells in the
                // same column as this TH
                $( this ).jqmData( "cells", table.find( "tr" ).not( trs.eq( 0 ) ).not( this ).children( selector ) );

                columnCount++;
            });
        });
    }
});

})( jQuery );


(function( $, undefined ) {

$.widget( "mobile.table", $.mobile.table, {
    options: {
        mode: "columntoggle",
        columnBtnTheme: null,
        columnPopupTheme: null,
        columnBtnText: "Columns...",
        classes: $.extend( $.mobile.table.prototype.options.classes, {
            popup: "ui-table-columntoggle-popup",
            columnBtn: "ui-table-columntoggle-btn",
            priorityPrefix: "ui-table-priority-",
            columnToggleTable: "ui-table-columntoggle"
        })
    },

    _create: function() {
        this._super();

        if ( this.options.mode !== "columntoggle" ) {
            return;
        }

        $.extend( this, {
            _menu: null
        });

        if ( this.options.enhanced ) {
            this._menu = $( this.document[ 0 ].getElementById( this._id() + "-popup" ) ).children().first();
            this._addToggles( this._menu, true );
        } else {
            this._menu = this._enhanceColToggle();
            this.element.addClass( this.options.classes.columnToggleTable );
        }

        this._setupEvents();

        this._setToggleState();
    },

    _id: function() {
        return ( this.element.attr( "id" ) || ( this.widgetName + this.uuid ) );
    },

    _setupEvents: function() {
        //NOTE: inputs are bound in bindToggles,
        // so it can be called on refresh, too

        // update column toggles on resize
        this._on( this.window, {
            throttledresize: "_setToggleState"
        });
        this._on( this._menu, {
            "change input": "_menuInputChange"
        });
    },

    _addToggles: function( menu, keep ) {
        var inputs,
            checkboxIndex = 0,
            opts = this.options,
            container = menu.controlgroup( "container" );

        // allow update of menu on refresh (fixes #5880)
        if ( keep ) {
            inputs = menu.find( "input" );
        } else {
            container.empty();
        }

        // create the hide/show toggles
        this.headers.not( "td" ).each( function() {
            var input, cells,
                header = $( this ),
                priority = $.mobile.getAttribute( this, "priority" );

            if ( priority ) {
                cells = header.add( header.jqmData( "cells" ) );
                cells.addClass( opts.classes.priorityPrefix + priority );

                // Make sure the (new?) checkbox is associated with its header via .jqmData() and
                // that, vice versa, the header is also associated with the checkbox
                input = ( keep ? inputs.eq( checkboxIndex++ ) :
                    $("<label><input type='checkbox' checked />" +
                        ( header.children( "abbr" ).first().attr( "title" ) ||
                            header.text() ) +
                        "</label>" )
                        .appendTo( container )
                        .children( 0 )
                        .checkboxradio( {
                            theme: opts.columnPopupTheme
                        }) )

                        // Associate the header with the checkbox
                        .jqmData( "header", header )
                        .jqmData( "cells", cells );

                // Associate the checkbox with the header
                header.jqmData( "input", input );
            }
        });

        // set bindings here
        if ( !keep ) {
            menu.controlgroup( "refresh" );
        }
    },

    _menuInputChange: function( evt ) {
        var input = $( evt.target ),
            checked = input[ 0 ].checked;

        input.jqmData( "cells" )
            .toggleClass( "ui-table-cell-hidden", !checked )
            .toggleClass( "ui-table-cell-visible", checked );
    },

    _unlockCells: function( cells ) {
        // allow hide/show via CSS only = remove all toggle-locks
        cells.removeClass( "ui-table-cell-hidden ui-table-cell-visible");
    },

    _enhanceColToggle: function() {
        var id , menuButton, popup, menu,
            table = this.element,
            opts = this.options,
            ns = $.mobile.ns,
            fragment = this.document[ 0 ].createDocumentFragment();

        id = this._id() + "-popup";
        menuButton = $( "<a href='#" + id + "' " +
            "class='" + opts.classes.columnBtn + " ui-btn " +
            "ui-btn-" + ( opts.columnBtnTheme || "a" ) +
            " ui-corner-all ui-shadow ui-mini' " +
            "data-" + ns + "rel='popup'>" + opts.columnBtnText + "</a>" );
        popup = $( "<div class='" + opts.classes.popup + "' id='" + id + "'></div>" );
        menu = $( "<fieldset></fieldset>" ).controlgroup();

        // set extension here, send "false" to trigger build/rebuild
        this._addToggles( menu, false );

        menu.appendTo( popup );

        fragment.appendChild( popup[ 0 ] );
        fragment.appendChild( menuButton[ 0 ] );
        table.before( fragment );

        popup.popup();

        return menu;
    },

    rebuild: function() {
        this._super();

        if ( this.options.mode === "columntoggle" ) {
            // NOTE: rebuild passes "false", while refresh passes "undefined"
            // both refresh the table, but inside addToggles, !false will be true,
            // so a rebuild call can be indentified
            this._refresh( false );
        }
    },

    _refresh: function( create ) {
        var headers, hiddenColumns, index;

        // Calling _super() here updates this.headers
        this._super( create );

        if ( !create && this.options.mode === "columntoggle" ) {
            headers = this.headers;
            hiddenColumns = [];

            // Find the index of the column header associated with each old checkbox among the
            // post-refresh headers and, if the header is still there, make sure the corresponding
            // column will be hidden if the pre-refresh checkbox indicates that the column is
            // hidden by recording its index in the array of hidden columns.
            this._menu.find( "input" ).each( function() {
                var input = $( this ),
                    header = input.jqmData( "header" ),
                    index = headers.index( header[ 0 ] );

                if ( index > -1 && !input.prop( "checked" ) ) {

                    // The column header associated with /this/ checkbox is still present in the
                    // post-refresh table and the checkbox is not checked, so the column associated
                    // with this column header is currently hidden. Let's record that.
                    hiddenColumns.push( index );
                }
            });

            // columns not being replaced must be cleared from input toggle-locks
            this._unlockCells( this.element.find( ".ui-table-cell-hidden, " +
                ".ui-table-cell-visible" ) );

            // update columntoggles and cells
            this._addToggles( this._menu, create );

            // At this point all columns are visible, so uncheck the checkboxes that correspond to
            // those columns we've found to be hidden
            for ( index = hiddenColumns.length - 1 ; index > -1 ; index-- ) {
                headers.eq( hiddenColumns[ index ] ).jqmData( "input" )
                    .prop( "checked", false )
                    .checkboxradio( "refresh" )
                    .trigger( "change" );
            }
        }
    },

    _setToggleState: function() {
        this._menu.find( "input" ).each( function() {
            var checkbox = $( this );

            this.checked = checkbox.jqmData( "cells" ).eq( 0 ).css( "display" ) === "table-cell";
            checkbox.checkboxradio( "refresh" );
        });
    },

    _destroy: function() {
        this._super();
    }
});

})( jQuery );

(function( $, undefined ) {

$.widget( "mobile.table", $.mobile.table, {
    options: {
        mode: "reflow",
        classes: $.extend( $.mobile.table.prototype.options.classes, {
            reflowTable: "ui-table-reflow",
            cellLabels: "ui-table-cell-label"
        })
    },

    _create: function() {
        this._super();

        // If it's not reflow mode, return here.
        if ( this.options.mode !== "reflow" ) {
            return;
        }

        if ( !this.options.enhanced ) {
            this.element.addClass( this.options.classes.reflowTable );

            this._updateReflow();
        }
    },

    rebuild: function() {
        this._super();

        if ( this.options.mode === "reflow" ) {
            this._refresh( false );
        }
    },

    _refresh: function( create ) {
        this._super( create );
        if ( !create && this.options.mode === "reflow" ) {
            this._updateReflow( );
        }
    },

    _updateReflow: function() {
        var table = this,
            opts = this.options;

        // get headers in reverse order so that top-level headers are appended last
        $( table.allHeaders.get().reverse() ).each( function() {
            var cells = $( this ).jqmData( "cells" ),
                colstart = $.mobile.getAttribute( this, "colstart" ),
                hierarchyClass = cells.not( this ).filter( "thead th" ).length && " ui-table-cell-label-top",
                contents = $( this ).clone().contents(),
                iteration, filter;

                if ( contents.length > 0  ) {

                    if ( hierarchyClass ) {
                        iteration = parseInt( this.getAttribute( "colspan" ), 10 );
                        filter = "";

                        if ( iteration ) {
                            filter = "td:nth-child("+ iteration +"n + " + ( colstart ) +")";
                        }

                        table._addLabels( cells.filter( filter ),
                            opts.classes.cellLabels + hierarchyClass, contents );
                    } else {
                        table._addLabels( cells, opts.classes.cellLabels, contents );
                    }

                }
        });
    },

    _addLabels: function( cells, label, contents ) {
        if ( contents.length === 1 && contents[ 0 ].nodeName.toLowerCase() === "abbr" ) {
            contents = contents.eq( 0 ).attr( "title" );
        }
        // .not fixes #6006
        cells
            .not( ":has(b." + label + ")" )
                .prepend( $( "<b class='" + label + "'></b>" ).append( contents ) );
    }
});

})( jQuery );

(function( $, undefined ) {

// TODO rename filterCallback/deprecate and default to the item itself as the first argument
var defaultFilterCallback = function( index, searchValue ) {
    return ( ( "" + ( $.mobile.getAttribute( this, "filtertext" ) || $( this ).text() ) )
        .toLowerCase().indexOf( searchValue ) === -1 );
};

$.widget( "mobile.filterable", {

    initSelector: ":jqmData(filter='true')",

    options: {
        filterReveal: false,
        filterCallback: defaultFilterCallback,
        enhanced: false,
        input: null,
        children: "> li, > option, > optgroup option, > tbody tr, > .ui-controlgroup-controls > .ui-btn, > .ui-controlgroup-controls > .ui-checkbox, > .ui-controlgroup-controls > .ui-radio"
    },

    _create: function() {
        var opts = this.options;

        $.extend( this, {
            _search: null,
            _timer: 0
        });

        this._setInput( opts.input );
        if ( !opts.enhanced ) {
            this._filterItems( ( ( this._search && this._search.val() ) || "" ).toLowerCase() );
        }
    },

    _onKeyUp: function() {
        var val, lastval,
            search = this._search;

        if ( search ) {
            val = search.val().toLowerCase(),
            lastval = $.mobile.getAttribute( search[ 0 ], "lastval" ) + "";

            if ( lastval && lastval === val ) {
                // Execute the handler only once per value change
                return;
            }

            if ( this._timer ) {
                window.clearTimeout( this._timer );
                this._timer = 0;
            }

            this._timer = this._delay( function() {
                if ( this._trigger( "beforefilter", null, { input: search } ) === false ) {
                    return false;
                }

                // Change val as lastval for next execution
                search[ 0 ].setAttribute( "data-" + $.mobile.ns + "lastval", val );

                this._filterItems( val );
                this._timer = 0;
            }, 250 );
        }
    },

    _getFilterableItems: function() {
        var elem = this.element,
            children = this.options.children,
            items = !children ? { length: 0 }:
                $.isFunction( children ) ? children():
                children.nodeName ? $( children ):
                children.jquery ? children:
                this.element.find( children );

        if ( items.length === 0 ) {
            items = elem.children();
        }

        return items;
    },

    _filterItems: function( val ) {
        var idx, callback, length, dst,
            show = [],
            hide = [],
            opts = this.options,
            filterItems = this._getFilterableItems();

        if ( val != null ) {
            callback = opts.filterCallback || defaultFilterCallback;
            length = filterItems.length;

            // Partition the items into those to be hidden and those to be shown
            for ( idx = 0 ; idx < length ; idx++ ) {
                dst = ( callback.call( filterItems[ idx ], idx, val ) ) ? hide : show;
                dst.push( filterItems[ idx ] );
            }
        }

        // If nothing is hidden, then the decision whether to hide or show the items
        // is based on the "filterReveal" option.
        if ( hide.length === 0 ) {
            filterItems[ ( opts.filterReveal && val.length === 0 ) ?
                "addClass" : "removeClass" ]( "ui-screen-hidden" );
        } else {
            $( hide ).addClass( "ui-screen-hidden" );
            $( show ).removeClass( "ui-screen-hidden" );
        }

        this._refreshChildWidget();

        this._trigger( "filter", null, {
            items: filterItems
        });
    },

    // The Default implementation of _refreshChildWidget attempts to call
    // refresh on collapsibleset, controlgroup, selectmenu, or listview
    _refreshChildWidget: function() {
        var widget, idx,
            recognizedWidgets = [ "collapsibleset", "selectmenu", "controlgroup", "listview" ];

        for ( idx = recognizedWidgets.length - 1 ; idx > -1 ; idx-- ) {
            widget = recognizedWidgets[ idx ];
            if ( $.mobile[ widget ] ) {
                widget = this.element.data( "mobile-" + widget );
                if ( widget && $.isFunction( widget.refresh ) ) {
                    widget.refresh();
                }
            }
        }
    },

    // TODO: When the input is not internal, do not even store it in this._search
    _setInput: function ( selector ) {
        var search = this._search;

        // Stop a pending filter operation
        if ( this._timer ) {
            window.clearTimeout( this._timer );
            this._timer = 0;
        }

        if ( search ) {
            this._off( search, "keyup change input" );
            search = null;
        }

        if ( selector ) {
            search = selector.jquery ? selector:
                selector.nodeName ? $( selector ):
                this.document.find( selector );

            this._on( search, {
                keydown: "_onKeyDown",
                keypress: "_onKeyPress",
                keyup: "_onKeyUp",
                change: "_onKeyUp",
                input: "_onKeyUp"
            });
        }

        this._search = search;
    },

    // Prevent form submission
    _onKeyDown: function( event ) {
        if ( event.keyCode === $.ui.keyCode.ENTER ) {
            event.preventDefault();
            this._preventKeyPress = true;
        }
    },

    _onKeyPress: function( event ) {
        if ( this._preventKeyPress ) {
            event.preventDefault();
            this._preventKeyPress = false;
        }
    },

    _setOptions: function( options ) {
        var refilter = !( ( options.filterReveal === undefined ) &&
                ( options.filterCallback === undefined ) &&
                ( options.children === undefined ) );

        this._super( options );

        if ( options.input !== undefined ) {
            this._setInput( options.input );
            refilter = true;
        }

        if ( refilter ) {
            this.refresh();
        }
    },

    _destroy: function() {
        var opts = this.options,
            items = this._getFilterableItems();

        if ( opts.enhanced ) {
            items.toggleClass( "ui-screen-hidden", opts.filterReveal );
        } else {
            items.removeClass( "ui-screen-hidden" );
        }
    },

    refresh: function() {
        if ( this._timer ) {
            window.clearTimeout( this._timer );
            this._timer = 0;
        }
        this._filterItems( ( ( this._search && this._search.val() ) || "" ).toLowerCase() );
    }
});

})( jQuery );

(function( $, undefined ) {

// Create a function that will replace the _setOptions function of a widget,
// and will pass the options on to the input of the filterable.
var replaceSetOptions = function( self, orig ) {
        return function( options ) {
            orig.call( this, options );
            self._syncTextInputOptions( options );
        };
    },
    rDividerListItem = /(^|\s)ui-li-divider(\s|$)/,
    origDefaultFilterCallback = $.mobile.filterable.prototype.options.filterCallback;

// Override the default filter callback with one that does not hide list dividers
$.mobile.filterable.prototype.options.filterCallback = function( index, searchValue ) {
    return !this.className.match( rDividerListItem ) &&
        origDefaultFilterCallback.call( this, index, searchValue );
};

$.widget( "mobile.filterable", $.mobile.filterable, {
    options: {
        filterPlaceholder: "Filter items...",
        filterTheme: null
    },

    _create: function() {
        var idx, widgetName,
            elem = this.element,
            recognizedWidgets = [ "collapsibleset", "selectmenu", "controlgroup", "listview" ],
            createHandlers = {};

        this._super();

        $.extend( this, {
            _widget: null
        });

        for ( idx = recognizedWidgets.length - 1 ; idx > -1 ; idx-- ) {
            widgetName = recognizedWidgets[ idx ];
            if ( $.mobile[ widgetName ] ) {
                if ( this._setWidget( elem.data( "mobile-" + widgetName ) ) ) {
                    break;
                } else {
                    createHandlers[ widgetName + "create" ] = "_handleCreate";
                }
            }
        }

        if ( !this._widget ) {
            this._on( elem, createHandlers );
        }
    },

    _handleCreate: function( evt ) {
        this._setWidget( this.element.data( "mobile-" + evt.type.substring( 0, evt.type.length - 6 ) ) );
    },

    _trigger: function( type, event, data ) {
        if ( this._widget && this._widget.widgetFullName === "mobile-listview" &&
            type === "beforefilter" ) {

            // Also trigger listviewbeforefilter if this widget is also a listview
            this._widget._trigger( "beforefilter", event, data );
        }

        // Passing back the response enables calling preventDefault()
        return this._super( type, event, data );
    },

    _setWidget: function( widget ) {
        if ( !this._widget && widget ) {
            this._widget = widget;
            this._widget._setOptions = replaceSetOptions( this, this._widget._setOptions );
        }

        if ( !!this._widget ) {
            this._syncTextInputOptions( this._widget.options );
            if ( this._widget.widgetName === "listview" ) {
                this._widget.options.hideDividers = true;
                this._widget.element.listview( "refresh" );
            }
        }

        return !!this._widget;
    },

    _isSearchInternal: function() {
        return ( this._search && this._search.jqmData( "ui-filterable-" + this.uuid + "-internal" ) );
    },

    _setInput: function( selector ) {
        var opts = this.options,
            updatePlaceholder = true,
            textinputOpts = {};

        if ( !selector ) {
            if ( this._isSearchInternal() ) {

                // Ignore the call to set a new input if the selector goes to falsy and
                // the current textinput is already of the internally generated variety.
                return;
            } else {

                // Generating a new textinput widget. No need to set the placeholder
                // further down the function.
                updatePlaceholder = false;
                selector = $( "<input " +
                    "data-" + $.mobile.ns + "type='search' " +
                    "placeholder='" + opts.filterPlaceholder + "'></input>" )
                    .jqmData( "ui-filterable-" + this.uuid + "-internal", true );
                $( "<form class='ui-filterable'></form>" )
                    .append( selector )
                    .submit( function( evt ) {
                        evt.preventDefault();
                        selector.blur();
                    })
                    .insertBefore( this.element );
                if ( $.mobile.textinput ) {
                    if ( this.options.filterTheme != null ) {
                        textinputOpts[ "theme" ] = opts.filterTheme;
                    }

                    selector.textinput( textinputOpts );
                }
            }
        }

        this._super( selector );

        if ( this._isSearchInternal() && updatePlaceholder ) {
            this._search.attr( "placeholder", this.options.filterPlaceholder );
        }
    },

    _setOptions: function( options ) {
        var ret = this._super( options );

        // Need to set the filterPlaceholder after having established the search input
        if ( options.filterPlaceholder !== undefined ) {
            if ( this._isSearchInternal() ) {
                this._search.attr( "placeholder", options.filterPlaceholder );
            }
        }

        if ( options.filterTheme !== undefined && this._search && $.mobile.textinput ) {
            this._search.textinput( "option", "theme", options.filterTheme );
        }

        return ret;
    },

    // The listview implementation accompanying this filterable backcompat layer will call
    // filterable.refresh() after it's done refreshing the listview to make sure the filterable
    // filters out any new items added. However, when the listview refresh has been initiated by
    // the filterable itself, then such filtering has already taken place, and calling the
    // filterable's refresh() method will cause an infinite recursion. We stop this by setting a
    // flag that will cause the filterable's refresh() method to short-circuit.
    _refreshChildWidget: function() {
        this._refreshingChildWidget = true;
        this._superApply( arguments );
        this._refreshingChildWidget = false;
    },

    refresh: function() {
        if ( !this._refreshingChildWidget ) {
            this._superApply( arguments );
        }
    },

    _destroy: function() {
        if ( this._isSearchInternal() ) {
            this._search.remove();
        }
        this._super();
    },

    _syncTextInputOptions: function( options ) {
        var idx,
            textinputOptions = {};

        // We only sync options if the filterable's textinput is of the internally
        // generated variety, rather than one specified by the user.
        if ( this._isSearchInternal() && $.mobile.textinput ) {

            // Apply only the options understood by textinput
            for ( idx in $.mobile.textinput.prototype.options ) {
                if ( options[ idx ] !== undefined ) {
                    if ( idx === "theme" && this.options.filterTheme != null ) {
                        textinputOptions[ idx ] = this.options.filterTheme;
                    } else {
                        textinputOptions[ idx ] = options[ idx ];
                    }
                }
            }
            this._search.textinput( "option", textinputOptions );
        }
    }
});

// Instantiate a filterable on a listview that has the data-filter="true" attribute
// This is not necessary for static content, because the auto-enhance takes care of instantiating
// the filterable upon encountering data-filter="true". However, because of 1.3.x it is expected
// that a listview with data-filter="true" will be filterable even if you just instantiate a
// listview on it. The extension below ensures that this continues to happen in 1.4.x.
$.widget( "mobile.listview", $.mobile.listview, {
    options: {
        filter: false
    },
    _create: function() {
        if ( this.options.filter === true &&
                !this.element.data( "mobile-filterable" ) ) {
            this.element.filterable();
        }
        return this._super();
    },

    refresh: function() {
        var filterable;

        this._superApply( arguments );

        if ( this.options.filter === true ) {
            filterable = this.element.data( "mobile-filterable" );

            if ( filterable ) {
                filterable.refresh();
            }
        }
    }
});

})( jQuery );

/*!
 * jQuery UI Tabs fadf2b312a05040436451c64bbfaf4814bc62c56
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/tabs/
 *
 * Depends:
 *    jquery.ui.core.js
 *    jquery.ui.widget.js
 */
(function( $, undefined ) {

var tabId = 0,
    rhash = /#.*$/;

function getNextTabId() {
    return ++tabId;
}

function isLocal( anchor ) {
    return anchor.hash.length > 1 &&
        decodeURIComponent( anchor.href.replace( rhash, "" ) ) ===
            decodeURIComponent( location.href.replace( rhash, "" ) );
}

$.widget( "ui.tabs", {
    version: "fadf2b312a05040436451c64bbfaf4814bc62c56",
    delay: 300,
    options: {
        active: null,
        collapsible: false,
        event: "click",
        heightStyle: "content",
        hide: null,
        show: null,

        // callbacks
        activate: null,
        beforeActivate: null,
        beforeLoad: null,
        load: null
    },

    _create: function() {
        var that = this,
            options = this.options;

        this.running = false;

        this.element
            .addClass( "ui-tabs ui-widget ui-widget-content ui-corner-all" )
            .toggleClass( "ui-tabs-collapsible", options.collapsible )
            // Prevent users from focusing disabled tabs via click
            .delegate( ".ui-tabs-nav > li", "mousedown" + this.eventNamespace, function( event ) {
                if ( $( this ).is( ".ui-state-disabled" ) ) {
                    event.preventDefault();
                }
            })
            // support: IE <9
            // Preventing the default action in mousedown doesn't prevent IE
            // from focusing the element, so if the anchor gets focused, blur.
            // We don't have to worry about focusing the previously focused
            // element since clicking on a non-focusable element should focus
            // the body anyway.
            .delegate( ".ui-tabs-anchor", "focus" + this.eventNamespace, function() {
                if ( $( this ).closest( "li" ).is( ".ui-state-disabled" ) ) {
                    this.blur();
                }
            });

        this._processTabs();
        options.active = this._initialActive();

        // Take disabling tabs via class attribute from HTML
        // into account and update option properly.
        if ( $.isArray( options.disabled ) ) {
            options.disabled = $.unique( options.disabled.concat(
                $.map( this.tabs.filter( ".ui-state-disabled" ), function( li ) {
                    return that.tabs.index( li );
                })
            ) ).sort();
        }

        // check for length avoids error when initializing empty list
        if ( this.options.active !== false && this.anchors.length ) {
            this.active = this._findActive( options.active );
        } else {
            this.active = $();
        }

        this._refresh();

        if ( this.active.length ) {
            this.load( options.active );
        }
    },

    _initialActive: function() {
        var active = this.options.active,
            collapsible = this.options.collapsible,
            locationHash = location.hash.substring( 1 );

        if ( active === null ) {
            // check the fragment identifier in the URL
            if ( locationHash ) {
                this.tabs.each(function( i, tab ) {
                    if ( $( tab ).attr( "aria-controls" ) === locationHash ) {
                        active = i;
                        return false;
                    }
                });
            }

            // check for a tab marked active via a class
            if ( active === null ) {
                active = this.tabs.index( this.tabs.filter( ".ui-tabs-active" ) );
            }

            // no active tab, set to false
            if ( active === null || active === -1 ) {
                active = this.tabs.length ? 0 : false;
            }
        }

        // handle numbers: negative, out of range
        if ( active !== false ) {
            active = this.tabs.index( this.tabs.eq( active ) );
            if ( active === -1 ) {
                active = collapsible ? false : 0;
            }
        }

        // don't allow collapsible: false and active: false
        if ( !collapsible && active === false && this.anchors.length ) {
            active = 0;
        }

        return active;
    },

    _getCreateEventData: function() {
        return {
            tab: this.active,
            panel: !this.active.length ? $() : this._getPanelForTab( this.active )
        };
    },

    _tabKeydown: function( event ) {
        var focusedTab = $( this.document[0].activeElement ).closest( "li" ),
            selectedIndex = this.tabs.index( focusedTab ),
            goingForward = true;

        if ( this._handlePageNav( event ) ) {
            return;
        }

        switch ( event.keyCode ) {
            case $.ui.keyCode.RIGHT:
            case $.ui.keyCode.DOWN:
                selectedIndex++;
                break;
            case $.ui.keyCode.UP:
            case $.ui.keyCode.LEFT:
                goingForward = false;
                selectedIndex--;
                break;
            case $.ui.keyCode.END:
                selectedIndex = this.anchors.length - 1;
                break;
            case $.ui.keyCode.HOME:
                selectedIndex = 0;
                break;
            case $.ui.keyCode.SPACE:
                // Activate only, no collapsing
                event.preventDefault();
                clearTimeout( this.activating );
                this._activate( selectedIndex );
                return;
            case $.ui.keyCode.ENTER:
                // Toggle (cancel delayed activation, allow collapsing)
                event.preventDefault();
                clearTimeout( this.activating );
                // Determine if we should collapse or activate
                this._activate( selectedIndex === this.options.active ? false : selectedIndex );
                return;
            default:
                return;
        }

        // Focus the appropriate tab, based on which key was pressed
        event.preventDefault();
        clearTimeout( this.activating );
        selectedIndex = this._focusNextTab( selectedIndex, goingForward );

        // Navigating with control key will prevent automatic activation
        if ( !event.ctrlKey ) {
            // Update aria-selected immediately so that AT think the tab is already selected.
            // Otherwise AT may confuse the user by stating that they need to activate the tab,
            // but the tab will already be activated by the time the announcement finishes.
            focusedTab.attr( "aria-selected", "false" );
            this.tabs.eq( selectedIndex ).attr( "aria-selected", "true" );

            this.activating = this._delay(function() {
                this.option( "active", selectedIndex );
            }, this.delay );
        }
    },

    _panelKeydown: function( event ) {
        if ( this._handlePageNav( event ) ) {
            return;
        }

        // Ctrl+up moves focus to the current tab
        if ( event.ctrlKey && event.keyCode === $.ui.keyCode.UP ) {
            event.preventDefault();
            this.active.focus();
        }
    },

    // Alt+page up/down moves focus to the previous/next tab (and activates)
    _handlePageNav: function( event ) {
        if ( event.altKey && event.keyCode === $.ui.keyCode.PAGE_UP ) {
            this._activate( this._focusNextTab( this.options.active - 1, false ) );
            return true;
        }
        if ( event.altKey && event.keyCode === $.ui.keyCode.PAGE_DOWN ) {
            this._activate( this._focusNextTab( this.options.active + 1, true ) );
            return true;
        }
    },

    _findNextTab: function( index, goingForward ) {
        var lastTabIndex = this.tabs.length - 1;

        function constrain() {
            if ( index > lastTabIndex ) {
                index = 0;
            }
            if ( index < 0 ) {
                index = lastTabIndex;
            }
            return index;
        }

        while ( $.inArray( constrain(), this.options.disabled ) !== -1 ) {
            index = goingForward ? index + 1 : index - 1;
        }

        return index;
    },

    _focusNextTab: function( index, goingForward ) {
        index = this._findNextTab( index, goingForward );
        this.tabs.eq( index ).focus();
        return index;
    },

    _setOption: function( key, value ) {
        if ( key === "active" ) {
            // _activate() will handle invalid values and update this.options
            this._activate( value );
            return;
        }

        if ( key === "disabled" ) {
            // don't use the widget factory's disabled handling
            this._setupDisabled( value );
            return;
        }

        this._super( key, value);

        if ( key === "collapsible" ) {
            this.element.toggleClass( "ui-tabs-collapsible", value );
            // Setting collapsible: false while collapsed; open first panel
            if ( !value && this.options.active === false ) {
                this._activate( 0 );
            }
        }

        if ( key === "event" ) {
            this._setupEvents( value );
        }

        if ( key === "heightStyle" ) {
            this._setupHeightStyle( value );
        }
    },

    _tabId: function( tab ) {
        return tab.attr( "aria-controls" ) || "ui-tabs-" + getNextTabId();
    },

    _sanitizeSelector: function( hash ) {
        return hash ? hash.replace( /[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g, "\\$&" ) : "";
    },

    refresh: function() {
        var options = this.options,
            lis = this.tablist.children( ":has(a[href])" );

        // get disabled tabs from class attribute from HTML
        // this will get converted to a boolean if needed in _refresh()
        options.disabled = $.map( lis.filter( ".ui-state-disabled" ), function( tab ) {
            return lis.index( tab );
        });

        this._processTabs();

        // was collapsed or no tabs
        if ( options.active === false || !this.anchors.length ) {
            options.active = false;
            this.active = $();
        // was active, but active tab is gone
        } else if ( this.active.length && !$.contains( this.tablist[ 0 ], this.active[ 0 ] ) ) {
            // all remaining tabs are disabled
            if ( this.tabs.length === options.disabled.length ) {
                options.active = false;
                this.active = $();
            // activate previous tab
            } else {
                this._activate( this._findNextTab( Math.max( 0, options.active - 1 ), false ) );
            }
        // was active, active tab still exists
        } else {
            // make sure active index is correct
            options.active = this.tabs.index( this.active );
        }

        this._refresh();
    },

    _refresh: function() {
        this._setupDisabled( this.options.disabled );
        this._setupEvents( this.options.event );
        this._setupHeightStyle( this.options.heightStyle );

        this.tabs.not( this.active ).attr({
            "aria-selected": "false",
            tabIndex: -1
        });
        this.panels.not( this._getPanelForTab( this.active ) )
            .hide()
            .attr({
                "aria-expanded": "false",
                "aria-hidden": "true"
            });

        // Make sure one tab is in the tab order
        if ( !this.active.length ) {
            this.tabs.eq( 0 ).attr( "tabIndex", 0 );
        } else {
            this.active
                .addClass( "ui-tabs-active ui-state-active" )
                .attr({
                    "aria-selected": "true",
                    tabIndex: 0
                });
            this._getPanelForTab( this.active )
                .show()
                .attr({
                    "aria-expanded": "true",
                    "aria-hidden": "false"
                });
        }
    },

    _processTabs: function() {
        var that = this;

        this.tablist = this._getList()
            .addClass( "ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all" )
            .attr( "role", "tablist" );

        this.tabs = this.tablist.find( "> li:has(a[href])" )
            .addClass( "ui-state-default ui-corner-top" )
            .attr({
                role: "tab",
                tabIndex: -1
            });

        this.anchors = this.tabs.map(function() {
                return $( "a", this )[ 0 ];
            })
            .addClass( "ui-tabs-anchor" )
            .attr({
                role: "presentation",
                tabIndex: -1
            });

        this.panels = $();

        this.anchors.each(function( i, anchor ) {
            var selector, panel, panelId,
                anchorId = $( anchor ).uniqueId().attr( "id" ),
                tab = $( anchor ).closest( "li" ),
                originalAriaControls = tab.attr( "aria-controls" );

            // inline tab
            if ( isLocal( anchor ) ) {
                selector = anchor.hash;
                panel = that.element.find( that._sanitizeSelector( selector ) );
            // remote tab
            } else {
                panelId = that._tabId( tab );
                selector = "#" + panelId;
                panel = that.element.find( selector );
                if ( !panel.length ) {
                    panel = that._createPanel( panelId );
                    panel.insertAfter( that.panels[ i - 1 ] || that.tablist );
                }
                panel.attr( "aria-live", "polite" );
            }

            if ( panel.length) {
                that.panels = that.panels.add( panel );
            }
            if ( originalAriaControls ) {
                tab.data( "ui-tabs-aria-controls", originalAriaControls );
            }
            tab.attr({
                "aria-controls": selector.substring( 1 ),
                "aria-labelledby": anchorId
            });
            panel.attr( "aria-labelledby", anchorId );
        });

        this.panels
            .addClass( "ui-tabs-panel ui-widget-content ui-corner-bottom" )
            .attr( "role", "tabpanel" );
    },

    // allow overriding how to find the list for rare usage scenarios (#7715)
    _getList: function() {
        return this.element.find( "ol,ul" ).eq( 0 );
    },

    _createPanel: function( id ) {
        return $( "<div>" )
            .attr( "id", id )
            .addClass( "ui-tabs-panel ui-widget-content ui-corner-bottom" )
            .data( "ui-tabs-destroy", true );
    },

    _setupDisabled: function( disabled ) {
        if ( $.isArray( disabled ) ) {
            if ( !disabled.length ) {
                disabled = false;
            } else if ( disabled.length === this.anchors.length ) {
                disabled = true;
            }
        }

        // disable tabs
        for ( var i = 0, li; ( li = this.tabs[ i ] ); i++ ) {
            if ( disabled === true || $.inArray( i, disabled ) !== -1 ) {
                $( li )
                    .addClass( "ui-state-disabled" )
                    .attr( "aria-disabled", "true" );
            } else {
                $( li )
                    .removeClass( "ui-state-disabled" )
                    .removeAttr( "aria-disabled" );
            }
        }

        this.options.disabled = disabled;
    },

    _setupEvents: function( event ) {
        var events = {
            click: function( event ) {
                event.preventDefault();
            }
        };
        if ( event ) {
            $.each( event.split(" "), function( index, eventName ) {
                events[ eventName ] = "_eventHandler";
            });
        }

        this._off( this.anchors.add( this.tabs ).add( this.panels ) );
        this._on( this.anchors, events );
        this._on( this.tabs, { keydown: "_tabKeydown" } );
        this._on( this.panels, { keydown: "_panelKeydown" } );

        this._focusable( this.tabs );
        this._hoverable( this.tabs );
    },

    _setupHeightStyle: function( heightStyle ) {
        var maxHeight,
            parent = this.element.parent();

        if ( heightStyle === "fill" ) {
            maxHeight = parent.height();
            maxHeight -= this.element.outerHeight() - this.element.height();

            this.element.siblings( ":visible" ).each(function() {
                var elem = $( this ),
                    position = elem.css( "position" );

                if ( position === "absolute" || position === "fixed" ) {
                    return;
                }
                maxHeight -= elem.outerHeight( true );
            });

            this.element.children().not( this.panels ).each(function() {
                maxHeight -= $( this ).outerHeight( true );
            });

            this.panels.each(function() {
                $( this ).height( Math.max( 0, maxHeight -
                    $( this ).innerHeight() + $( this ).height() ) );
            })
            .css( "overflow", "auto" );
        } else if ( heightStyle === "auto" ) {
            maxHeight = 0;
            this.panels.each(function() {
                maxHeight = Math.max( maxHeight, $( this ).height( "" ).height() );
            }).height( maxHeight );
        }
    },

    _eventHandler: function( event ) {
        var options = this.options,
            active = this.active,
            anchor = $( event.currentTarget ),
            tab = anchor.closest( "li" ),
            clickedIsActive = tab[ 0 ] === active[ 0 ],
            collapsing = clickedIsActive && options.collapsible,
            toShow = collapsing ? $() : this._getPanelForTab( tab ),
            toHide = !active.length ? $() : this._getPanelForTab( active ),
            eventData = {
                oldTab: active,
                oldPanel: toHide,
                newTab: collapsing ? $() : tab,
                newPanel: toShow
            };

        event.preventDefault();

        if ( tab.hasClass( "ui-state-disabled" ) ||
                // tab is already loading
                tab.hasClass( "ui-tabs-loading" ) ||
                // can't switch durning an animation
                this.running ||
                // click on active header, but not collapsible
                ( clickedIsActive && !options.collapsible ) ||
                // allow canceling activation
                ( this._trigger( "beforeActivate", event, eventData ) === false ) ) {
            return;
        }

        options.active = collapsing ? false : this.tabs.index( tab );

        this.active = clickedIsActive ? $() : tab;
        if ( this.xhr ) {
            this.xhr.abort();
        }

        if ( !toHide.length && !toShow.length ) {
            $.error( "jQuery UI Tabs: Mismatching fragment identifier." );
        }

        if ( toShow.length ) {
            this.load( this.tabs.index( tab ), event );
        }
        this._toggle( event, eventData );
    },

    // handles show/hide for selecting tabs
    _toggle: function( event, eventData ) {
        var that = this,
            toShow = eventData.newPanel,
            toHide = eventData.oldPanel;

        this.running = true;

        function complete() {
            that.running = false;
            that._trigger( "activate", event, eventData );
        }

        function show() {
            eventData.newTab.closest( "li" ).addClass( "ui-tabs-active ui-state-active" );

            if ( toShow.length && that.options.show ) {
                that._show( toShow, that.options.show, complete );
            } else {
                toShow.show();
                complete();
            }
        }

        // start out by hiding, then showing, then completing
        if ( toHide.length && this.options.hide ) {
            this._hide( toHide, this.options.hide, function() {
                eventData.oldTab.closest( "li" ).removeClass( "ui-tabs-active ui-state-active" );
                show();
            });
        } else {
            eventData.oldTab.closest( "li" ).removeClass( "ui-tabs-active ui-state-active" );
            toHide.hide();
            show();
        }

        toHide.attr({
            "aria-expanded": "false",
            "aria-hidden": "true"
        });
        eventData.oldTab.attr( "aria-selected", "false" );
        // If we're switching tabs, remove the old tab from the tab order.
        // If we're opening from collapsed state, remove the previous tab from the tab order.
        // If we're collapsing, then keep the collapsing tab in the tab order.
        if ( toShow.length && toHide.length ) {
            eventData.oldTab.attr( "tabIndex", -1 );
        } else if ( toShow.length ) {
            this.tabs.filter(function() {
                return $( this ).attr( "tabIndex" ) === 0;
            })
            .attr( "tabIndex", -1 );
        }

        toShow.attr({
            "aria-expanded": "true",
            "aria-hidden": "false"
        });
        eventData.newTab.attr({
            "aria-selected": "true",
            tabIndex: 0
        });
    },

    _activate: function( index ) {
        var anchor,
            active = this._findActive( index );

        // trying to activate the already active panel
        if ( active[ 0 ] === this.active[ 0 ] ) {
            return;
        }

        // trying to collapse, simulate a click on the current active header
        if ( !active.length ) {
            active = this.active;
        }

        anchor = active.find( ".ui-tabs-anchor" )[ 0 ];
        this._eventHandler({
            target: anchor,
            currentTarget: anchor,
            preventDefault: $.noop
        });
    },

    _findActive: function( index ) {
        return index === false ? $() : this.tabs.eq( index );
    },

    _getIndex: function( index ) {
        // meta-function to give users option to provide a href string instead of a numerical index.
        if ( typeof index === "string" ) {
            index = this.anchors.index( this.anchors.filter( "[href$='" + index + "']" ) );
        }

        return index;
    },

    _destroy: function() {
        if ( this.xhr ) {
            this.xhr.abort();
        }

        this.element.removeClass( "ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible" );

        this.tablist
            .removeClass( "ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all" )
            .removeAttr( "role" );

        this.anchors
            .removeClass( "ui-tabs-anchor" )
            .removeAttr( "role" )
            .removeAttr( "tabIndex" )
            .removeUniqueId();

        this.tabs.add( this.panels ).each(function() {
            if ( $.data( this, "ui-tabs-destroy" ) ) {
                $( this ).remove();
            } else {
                $( this )
                    .removeClass( "ui-state-default ui-state-active ui-state-disabled " +
                        "ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel" )
                    .removeAttr( "tabIndex" )
                    .removeAttr( "aria-live" )
                    .removeAttr( "aria-busy" )
                    .removeAttr( "aria-selected" )
                    .removeAttr( "aria-labelledby" )
                    .removeAttr( "aria-hidden" )
                    .removeAttr( "aria-expanded" )
                    .removeAttr( "role" );
            }
        });

        this.tabs.each(function() {
            var li = $( this ),
                prev = li.data( "ui-tabs-aria-controls" );
            if ( prev ) {
                li
                    .attr( "aria-controls", prev )
                    .removeData( "ui-tabs-aria-controls" );
            } else {
                li.removeAttr( "aria-controls" );
            }
        });

        this.panels.show();

        if ( this.options.heightStyle !== "content" ) {
            this.panels.css( "height", "" );
        }
    },

    enable: function( index ) {
        var disabled = this.options.disabled;
        if ( disabled === false ) {
            return;
        }

        if ( index === undefined ) {
            disabled = false;
        } else {
            index = this._getIndex( index );
            if ( $.isArray( disabled ) ) {
                disabled = $.map( disabled, function( num ) {
                    return num !== index ? num : null;
                });
            } else {
                disabled = $.map( this.tabs, function( li, num ) {
                    return num !== index ? num : null;
                });
            }
        }
        this._setupDisabled( disabled );
    },

    disable: function( index ) {
        var disabled = this.options.disabled;
        if ( disabled === true ) {
            return;
        }

        if ( index === undefined ) {
            disabled = true;
        } else {
            index = this._getIndex( index );
            if ( $.inArray( index, disabled ) !== -1 ) {
                return;
            }
            if ( $.isArray( disabled ) ) {
                disabled = $.merge( [ index ], disabled ).sort();
            } else {
                disabled = [ index ];
            }
        }
        this._setupDisabled( disabled );
    },

    load: function( index, event ) {
        index = this._getIndex( index );
        var that = this,
            tab = this.tabs.eq( index ),
            anchor = tab.find( ".ui-tabs-anchor" ),
            panel = this._getPanelForTab( tab ),
            eventData = {
                tab: tab,
                panel: panel
            };

        // not remote
        if ( isLocal( anchor[ 0 ] ) ) {
            return;
        }

        this.xhr = $.ajax( this._ajaxSettings( anchor, event, eventData ) );

        // support: jQuery <1.8
        // jQuery <1.8 returns false if the request is canceled in beforeSend,
        // but as of 1.8, $.ajax() always returns a jqXHR object.
        if ( this.xhr && this.xhr.statusText !== "canceled" ) {
            tab.addClass( "ui-tabs-loading" );
            panel.attr( "aria-busy", "true" );

            this.xhr
                .success(function( response ) {
                    // support: jQuery <1.8
                    // http://bugs.jquery.com/ticket/11778
                    setTimeout(function() {
                        panel.html( response );
                        that._trigger( "load", event, eventData );
                    }, 1 );
                })
                .complete(function( jqXHR, status ) {
                    // support: jQuery <1.8
                    // http://bugs.jquery.com/ticket/11778
                    setTimeout(function() {
                        if ( status === "abort" ) {
                            that.panels.stop( false, true );
                        }

                        tab.removeClass( "ui-tabs-loading" );
                        panel.removeAttr( "aria-busy" );

                        if ( jqXHR === that.xhr ) {
                            delete that.xhr;
                        }
                    }, 1 );
                });
        }
    },

    _ajaxSettings: function( anchor, event, eventData ) {
        var that = this;
        return {
            url: anchor.attr( "href" ),
            beforeSend: function( jqXHR, settings ) {
                return that._trigger( "beforeLoad", event,
                    $.extend( { jqXHR : jqXHR, ajaxSettings: settings }, eventData ) );
            }
        };
    },

    _getPanelForTab: function( tab ) {
        var id = $( tab ).attr( "aria-controls" );
        return this.element.find( this._sanitizeSelector( "#" + id ) );
    }
});

})( jQuery );

(function( $, undefined ) {

})( jQuery );

(function( $, window ) {

    $.mobile.iosorientationfixEnabled = true;

    // This fix addresses an iOS bug, so return early if the UA claims it's something else.
    var ua = navigator.userAgent,
        zoom,
        evt, x, y, z, aig;
    if ( !( /iPhone|iPad|iPod/.test( navigator.platform ) && /OS [1-5]_[0-9_]* like Mac OS X/i.test( ua ) && ua.indexOf( "AppleWebKit" ) > -1 ) ) {
        $.mobile.iosorientationfixEnabled = false;
        return;
    }

    zoom = $.mobile.zoom;

    function checkTilt( e ) {
        evt = e.originalEvent;
        aig = evt.accelerationIncludingGravity;

        x = Math.abs( aig.x );
        y = Math.abs( aig.y );
        z = Math.abs( aig.z );

        // If portrait orientation and in one of the danger zones
        if ( !window.orientation && ( x > 7 || ( ( z > 6 && y < 8 || z < 8 && y > 6 ) && x > 5 ) ) ) {
                if ( zoom.enabled ) {
                    zoom.disable();
                }
        }    else if ( !zoom.enabled ) {
                zoom.enable();
        }
    }

    $.mobile.document.on( "mobileinit", function() {
        if ( $.mobile.iosorientationfixEnabled ) {
            $.mobile.window
                .bind( "orientationchange.iosorientationfix", zoom.enable )
                .bind( "devicemotion.iosorientationfix", checkTilt );
        }
    });

}( jQuery, this ));

(function( $, window, undefined ) {
    var    $html = $( "html" ),
        $window = $.mobile.window;

    //remove initial build class (only present on first pageshow)
    function hideRenderingClass() {
        $html.removeClass( "ui-mobile-rendering" );
    }

    // trigger mobileinit event - useful hook for configuring $.mobile settings before they're used
    $( window.document ).trigger( "mobileinit" );

    // support conditions
    // if device support condition(s) aren't met, leave things as they are -> a basic, usable experience,
    // otherwise, proceed with the enhancements
    if ( !$.mobile.gradeA() ) {
        return;
    }

    // override ajaxEnabled on platforms that have known conflicts with hash history updates
    // or generally work better browsing in regular http for full page refreshes (BB5, Opera Mini)
    if ( $.mobile.ajaxBlacklist ) {
        $.mobile.ajaxEnabled = false;
    }

    // Add mobile, initial load "rendering" classes to docEl
    $html.addClass( "ui-mobile ui-mobile-rendering" );

    // This is a fallback. If anything goes wrong (JS errors, etc), or events don't fire,
    // this ensures the rendering class is removed after 5 seconds, so content is visible and accessible
    setTimeout( hideRenderingClass, 5000 );

    $.extend( $.mobile, {
        // find and enhance the pages in the dom and transition to the first page.
        initializePage: function() {
            // find present pages
            var path = $.mobile.path,
                $pages = $( ":jqmData(role='page'), :jqmData(role='dialog')" ),
                hash = path.stripHash( path.stripQueryParams(path.parseLocation().hash) ),
                theLocation = $.mobile.path.parseLocation(),
                hashPage = hash ? document.getElementById( hash ) : undefined;

            // if no pages are found, create one with body's inner html
            if ( !$pages.length ) {
                $pages = $( "body" ).wrapInner( "<div data-" + $.mobile.ns + "role='page'></div>" ).children( 0 );
            }

            // add dialogs, set data-url attrs
            $pages.each(function() {
                var $this = $( this );

                // unless the data url is already set set it to the pathname
                if ( !$this[ 0 ].getAttribute( "data-" + $.mobile.ns + "url" ) ) {
                    $this.attr( "data-" + $.mobile.ns + "url", $this.attr( "id" ) ||
                        path.convertUrlToDataUrl( theLocation.pathname + theLocation.search ) );
                }
            });

            // define first page in dom case one backs out to the directory root (not always the first page visited, but defined as fallback)
            $.mobile.firstPage = $pages.first();

            // define page container
            $.mobile.pageContainer = $.mobile.firstPage
                .parent()
                .addClass( "ui-mobile-viewport" )
                .pagecontainer();

            // initialize navigation events now, after mobileinit has occurred and the page container
            // has been created but before the rest of the library is alerted to that fact
            $.mobile.navreadyDeferred.resolve();

            // alert listeners that the pagecontainer has been determined for binding
            // to events triggered on it
            $window.trigger( "pagecontainercreate" );

            // cue page loading message
            $.mobile.loading( "show" );

            //remove initial build class (only present on first pageshow)
            hideRenderingClass();

            // if hashchange listening is disabled, there's no hash deeplink,
            // the hash is not valid (contains more than one # or does not start with #)
            // or there is no page with that hash, change to the first page in the DOM
            // Remember, however, that the hash can also be a path!
            if ( ! ( $.mobile.hashListeningEnabled &&
                $.mobile.path.isHashValid( location.hash ) &&
                ( $( hashPage ).is( ":jqmData(role='page')" ) ||
                    $.mobile.path.isPath( hash ) ||
                    hash === $.mobile.dialogHashKey ) ) ) {

                // make sure to set initial popstate state if it exists
                // so that navigation back to the initial page works properly
                if ( $.event.special.navigate.isPushStateEnabled() ) {
                    $.mobile.navigate.navigator.squash( path.parseLocation().href );
                }

                $.mobile.changePage( $.mobile.firstPage, {
                    transition: "none",
                    reverse: true,
                    changeHash: false,
                    fromHashChange: true
                });
            } else {
                // trigger hashchange or navigate to squash and record the correct
                // history entry for an initial hash path
                if ( !$.event.special.navigate.isPushStateEnabled() ) {
                    $window.trigger( "hashchange", [true] );
                } else {
                    // TODO figure out how to simplify this interaction with the initial history entry
                    // at the bottom js/navigate/navigate.js
                    $.mobile.navigate.history.stack = [];
                    $.mobile.navigate( $.mobile.path.isPath( location.hash ) ? location.hash : location.href );
                }
            }
        }
    });

    $(function() {
        //Run inlineSVG support test
        $.support.inlineSVG();

        // check which scrollTop value should be used by scrolling to 1 immediately at domready
        // then check what the scroll top is. Android will report 0... others 1
        // note that this initial scroll won't hide the address bar. It's just for the check.

        // hide iOS browser chrome on load if hideUrlBar is true this is to try and do it as soon as possible
        if ( $.mobile.hideUrlBar ) {
            window.scrollTo( 0, 1 );
        }

        // if defaultHomeScroll hasn't been set yet, see if scrollTop is 1
        // it should be 1 in most browsers, but android treats 1 as 0 (for hiding addr bar)
        // so if it's 1, use 0 from now on
        $.mobile.defaultHomeScroll = ( !$.support.scrollTop || $.mobile.window.scrollTop() === 1 ) ? 0 : 1;

        //dom-ready inits
        if ( $.mobile.autoInitializePage ) {
            $.mobile.initializePage();
        }

        // window load event
        // hide iOS browser chrome on load if hideUrlBar is true this is as fall back incase we were too early before
        if ( $.mobile.hideUrlBar ) {
            $window.load( $.mobile.silentScroll );
        }

        if ( !$.support.cssPointerEvents ) {
            // IE and Opera don't support CSS pointer-events: none that we use to disable link-based buttons
            // by adding the 'ui-disabled' class to them. Using a JavaScript workaround for those browser.
            // https://github.com/jquery/jquery-mobile/issues/3558

            // DEPRECATED as of 1.4.0 - remove ui-disabled after 1.4.0 release
            // only ui-state-disabled should be present thereafter
            $.mobile.document.delegate( ".ui-state-disabled,.ui-disabled", "vclick",
                function( e ) {
                    e.preventDefault();
                    e.stopImmediatePropagation();
                }
            );
        }
    });
}( jQuery, this ));


}));

}.call(window));

/***/ }),
/* 2 */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/*** IMPORTS FROM imports-loader ***/
(function() {

(function (root, factory) { if (true) { !(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(3), __webpack_require__(4)], __WEBPACK_AMD_DEFINE_RESULT__ = function () { return factory(root.CDP || (root.CDP = {})); }.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
                __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__)); } else { factory(root.CDP || (root.CDP = {})); } }(this, function (CDP) { CDP.Framework = CDP.Framework || {};
/// <reference types="backbone" />
var CDP;
(function (CDP) {
    var Framework;
    (function (Framework) {
        Framework.Model = Backbone.Model;
        Framework.Collection = Backbone.Collection;
        Framework.View = Backbone.View;
        Framework.Events = Backbone.Events;
    })(Framework = CDP.Framework || (CDP.Framework = {}));
})(CDP || (CDP = {}));
var CDP;
(function (CDP) {
    // @internal Error code offset definition of `cdp-framework-jqm`.
    var RESULT_CODE_BASE;
    (function (RESULT_CODE_BASE) {
        RESULT_CODE_BASE[RESULT_CODE_BASE["CDP_FRAMEWORK_DECLARERATION"] = 0] = "CDP_FRAMEWORK_DECLARERATION";
        RESULT_CODE_BASE[RESULT_CODE_BASE["CDP_FRAMEWORK"] = 4 * CDP._MODULE_RESULT_CODE_RANGE_CDP] = "CDP_FRAMEWORK";
    })(RESULT_CODE_BASE = CDP.RESULT_CODE_BASE || (CDP.RESULT_CODE_BASE = {}));
    ///////////////////////////////////////////////////////////////////////
    // module error declaration:
    var FUNCTION_CODE_RANGE = 10;
    // @internal cdp.framework.jqm 内のローカルコードオフセット値
    var LOCAL_CODE_BASE;
    (function (LOCAL_CODE_BASE) {
        LOCAL_CODE_BASE[LOCAL_CODE_BASE["CORE_API"] = 0] = "CORE_API";
        LOCAL_CODE_BASE[LOCAL_CODE_BASE["ROUTER"] = 1 * FUNCTION_CODE_RANGE] = "ROUTER";
        LOCAL_CODE_BASE[LOCAL_CODE_BASE["PAGE"] = 2 * FUNCTION_CODE_RANGE] = "PAGE";
    })(LOCAL_CODE_BASE || (LOCAL_CODE_BASE = {}));
    /* tslint:disable:max-line-length */
    // Error code definition of `cdp-framework-jqm`.
    var RESULT_CODE;
    (function (RESULT_CODE) {
        RESULT_CODE[RESULT_CODE["ERROR_CDP_FRAMEWORK_DECLARATION"] = 0] = "ERROR_CDP_FRAMEWORK_DECLARATION";
        /** `en` [[CDP.Framework.initialize]]() failer code. <br> `ja` [[CDP.Framework.initialize]]() のエラーコード */
        RESULT_CODE[RESULT_CODE["ERROR_CDP_FRAMEWORK_INITIALIZE_FAILED"] = CDP.DECLARE_ERROR_CODE(RESULT_CODE_BASE.CDP_FRAMEWORK, LOCAL_CODE_BASE.CORE_API + 1, "framework initialize failed.")] = "ERROR_CDP_FRAMEWORK_INITIALIZE_FAILED";
        /** `en` [[CDP.Router._initialize]]() failer code. <br> `ja` [[CDP.Router._initialize]]() のエラーコード */
        RESULT_CODE[RESULT_CODE["ERROR_CDP_FRAMEWORK_ROUTER_INITIALIZE_FAILED"] = CDP.DECLARE_ERROR_CODE(RESULT_CODE_BASE.CDP_FRAMEWORK, LOCAL_CODE_BASE.ROUTER + 1, "router initialize failed.")] = "ERROR_CDP_FRAMEWORK_ROUTER_INITIALIZE_FAILED";
    })(RESULT_CODE = CDP.RESULT_CODE || (CDP.RESULT_CODE = {}));
    /* tslint:enable:max-line-length */
})(CDP || (CDP = {}));
/* tslint:disable:max-line-length */
var CDP;
(function (CDP) {
    var Framework;
    (function (Framework) {
        /**
         * @en platform judgement utility
         * @ja platform 判定オブジェクト
         *
         * @seehttps://w3g.jp/blog/tools/js_browser_sniffing
         */
        Framework.Platform = (function () {
            var ua = navigator.userAgent.toLowerCase();
            var majorVersion = function (browser) {
                var version = ua.match(new RegExp("(" + browser + ")( |/)([0-9]+)"));
                if (!version || version.length < 4) {
                    return 0;
                }
                return parseInt(version[3], 10);
            };
            return {
                ltIE6: typeof window.addEventListener === "undefined" && typeof document.documentElement.style.maxHeight === "undefined",
                ltIE7: typeof window.addEventListener === "undefined" && typeof document.querySelectorAll === "undefined",
                ltIE8: typeof window.addEventListener === "undefined" && typeof document.getElementsByClassName === "undefined",
                ltIE9: document.uniqueID && typeof window.matchMedia === "undefined",
                gtIE10: document.uniqueID && window.matchMedia,
                Trident: document.uniqueID,
                Gecko: "MozAppearance" in document.documentElement.style,
                Presto: CDP.global.opera,
                Blink: CDP.global.chrome,
                Webkit: typeof CDP.global.chrome === "undefined" && "WebkitAppearance" in document.documentElement.style,
                Touch: typeof CDP.global.ontouchstart !== "undefined",
                Mobile: (typeof CDP.global.orientation !== "undefined") || (ua.indexOf("Windows Phone") !== -1),
                ltAd4_4: typeof CDP.global.orientation !== "undefined" && (typeof CDP.global.EventSource === "undefined" || 30 > majorVersion("chrome")),
                Pointer: CDP.global.navigator.pointerEnabled,
                MSPoniter: CDP.global.navigator.msPointerEnabled,
                Android: (ua.indexOf("android") !== -1),
                iOS: (ua.indexOf("iphone") !== -1 || ua.indexOf("ipad") !== -1 || ua.indexOf("ipod") !== -1),
            };
        })();
    })(Framework = CDP.Framework || (CDP.Framework = {}));
})(CDP || (CDP = {}));
/* tslint:disable:typedef no-bitwise */
var CDP;
(function (CDP) {
    var Framework;
    (function (Framework) {
        /**
         * vclick patch
         */
        var _vclickPatch = function () {
            var jquery_on = $.fn.on, jquery_off = $.fn.off;
            var custom_on = function (types, selector, data, fn, /*INTERNAL*/ one) {
                if (typeof types === "string") {
                    types = types.replace(/vclick/g, "click");
                }
                return _.bind(jquery_on, this)(types, selector, data, fn, one);
            };
            var custom_off = function (types, selector, fn) {
                if (typeof types === "string") {
                    types = types.replace(/vclick/g, "click");
                }
                return _.bind(jquery_off, this)(types, selector, fn);
            };
            // replace functions.
            $.fn.on = custom_on;
            $.fn.off = custom_off;
        };
        /**
         * $.mobile.widget.popup patch for "_createPrerequisites"
         *
         * patch code from jqm 1.5
         * https://github.com/jquery/jquery-mobile/commit/d34c86ae14d4ea603357be5e326de1fb8c31dbf9
         */
        var _apply_jqm_popup_createPrerequisites = function () {
            var _safeCreatePrerequisites = function (screenPrerequisite, containerPrerequisite, whenDone) {
                var prerequisites;
                var self = this;
                prerequisites = {
                    screen: $.Deferred(),
                    container: $.Deferred()
                };
                prerequisites.screen.done(function () {
                    if (prerequisites === self._prerequisites) {
                        screenPrerequisite();
                    }
                });
                prerequisites.container.done(function () {
                    if (prerequisites === self._prerequisites) {
                        containerPrerequisite();
                    }
                });
                $.when(prerequisites.screen, prerequisites.container).done(function () {
                    if (prerequisites === self._prerequisites) {
                        self._prerequisites = null;
                        whenDone();
                    }
                });
                self._prerequisites = prerequisites;
            };
            var $mobile = $.mobile;
            if ($mobile.widgets && $mobile.widgets.popup) {
                $mobile.widgets.popup.prototype._createPrerequisites = _safeCreatePrerequisites;
            }
        };
        /**
         * $.mobile.widget.popup patch for "_handleWindowResize"
         *
         * patch code from stack overflow
         * https://stackoverflow.com/questions/27090445/jqmobile-re-positions-popup-window-every-time-when-android-opens-own-virtual-key
         */
        var _apply_jqm_popup_handleWindowResize = function () {
            var _safeHandleWindowResize = function () {
                if (this._isOpen && this._ignoreResizeTo === 0) {
                    if ((this._expectResizeEvent() || this._orientationchangeInProgress) &&
                        !this._ui.container.hasClass("ui-popup-hidden")) {
                        // effectively rapid-close the popup while leaving the screen intact
                        //judge user is in input mode or not.
                        if (!($(":focus").is("input") || $(":focus").is("textarea"))) {
                            this._ui.container
                                .addClass("ui-popup-hidden ui-popup-truncate")
                                .removeAttr("style");
                        }
                    }
                }
            };
            var $mobile = $.mobile;
            if ($mobile.widgets && $mobile.widgets.popup) {
                $mobile.widgets.popup.prototype._handleWindowResize = _safeHandleWindowResize;
            }
        };
        /**
         * $.mobile.widget.popup patch
         */
        var _mobilePopupPatch = function () {
            var jqueryMajor = ~~$.fn.jquery.split(".")[0];
            var jqmVersion = $.mobile.version.split(".");
            var jqmMajor = ~~jqmVersion[0];
            var jqmMiner = ~~jqmVersion[1];
            if (3 <= jqueryMajor && jqmMajor < 2 && jqmMiner < 5) {
                _apply_jqm_popup_createPrerequisites();
                _apply_jqm_popup_handleWindowResize();
            }
        };
        //___________________________________________________________________________________________________________________//
        /**
         * @en patch class for jqm framework.
         * @ja jqm framework 用パッチ適用クラス
         *
         * @internal
         */
        var Patch = /** @class */ (function () {
            function Patch() {
            }
            ///////////////////////////////////////////////////////////////////////
            // public static methods
            /**
             * @en Apply patch before initialize.
             * @ja 初期化前のパッチの適用
             */
            Patch.applyBeforeInit = function () {
                if (!Patch.isSupportedVclick()) {
                    _vclickPatch();
                    Patch.s_vclickEvent = "click";
                }
            };
            /**
             * @en Apply patch after initialize.
             * @ja 初期化後のパッチの適用
             */
            Patch.applyAfterInit = function () {
                _mobilePopupPatch();
            };
            /**
             * @en if "vclick" event is unsupported, returns false. ex: Android 4.4 (Kitkat)
             * @ja "vclick" event が非サポートである platform (KitKat) は false を返す。 <br>
             *      jQM の version up により、解決される場合は無効かする。
             */
            Patch.isSupportedVclick = function () {
                // for Android 4.4+ (Kitkat ～)
                if (Framework.Platform.Android && !Framework.Platform.ltAd4_4) {
                    return false;
                }
                return true;
            };
            Patch.s_vclickEvent = "vclick";
            return Patch;
        }());
        Framework.Patch = Patch;
    })(Framework = CDP.Framework || (CDP.Framework = {}));
})(CDP || (CDP = {}));
var CDP;
(function (CDP) {
    var Framework;
    (function (Framework) {
        /**
         * @en Orientation code
         * @ja orientation 識別子
         */
        var Orientation;
        (function (Orientation) {
            Orientation[Orientation["PORTRAIT"] = 0] = "PORTRAIT";
            Orientation[Orientation["LANDSCAPE"] = 1] = "LANDSCAPE";
        })(Orientation = Framework.Orientation || (Framework.Orientation = {}));
        /**
         * @en Get Orientation enum code
         * @ja Orientation の取得
         */
        function getOrientation() {
            var $window = $(window);
            return ($window.width() < $window.height()) ? Orientation.PORTRAIT : Orientation.LANDSCAPE;
        }
        Framework.getOrientation = getOrientation;
    })(Framework = CDP.Framework || (CDP.Framework = {}));
})(CDP || (CDP = {}));

/* tslint:disable:max-line-length forin no-bitwise */
var CDP;
(function (CDP) {
    var Promise = CDP.Promise;
    /**
     * @en The function returned Promise waits until `cordova` is ready. <br>
     *     [Note] emulate when PC enviroment.
     *
     * @ja `cordova` が有効になるまで待機 <br>
     *     PC 環境ではエミュレートされる。
     */
    function waitForDeviceReady() {
        return new Promise(function (resolve) {
            if (!CDP.Framework.Platform.Mobile) {
                setTimeout(function () {
                    resolve();
                }, 100);
            }
            else {
                if (null == CDP.global.cordova || null == CDP.global.cordova.exec) {
                    $(document).one("deviceready", function () {
                        resolve();
                    });
                }
                else {
                    resolve();
                }
            }
        });
    }
    CDP.waitForDeviceReady = waitForDeviceReady;
    var _defaultBackButtonHandler = null;
    /**
     * @en Setup H/W Back key handler.
     * @ja H/W Back key ハンドラの設定関数
     *
     * @param
     * - `en` handler function.
     * - `ja` handler 指定.
     * @returns
     * - `en` old handler function.
     * - `ja` 以前の handler.
     */
    function setBackButtonHandler(handler) {
        var oldHandler = _defaultBackButtonHandler;
        _defaultBackButtonHandler = handler;
        return oldHandler;
    }
    CDP.setBackButtonHandler = setBackButtonHandler;
    // back key handler implement.
    (function () {
        waitForDeviceReady()
            .then(function () {
            $(document).on("backbutton", function (event) {
                if (_defaultBackButtonHandler) {
                    _defaultBackButtonHandler(event);
                }
            });
        });
    })();
    //___________________________________________________________________________________________________________________//
    var Framework;
    (function (Framework) {
        var TAG = "[CDP.Framework] ";
        var _dfInitialize = $.Deferred();
        /**
         * @en Initialization function of Framework.
         * @ja Framework の初期化関数
         */
        function initialize(options) {
            if ("pending" !== _dfInitialize.state()) {
                return _dfInitialize.promise();
            }
            // CDP 環境の初期化
            // 現状は、console オブジェクトの保証と jQuery の WinRT 対応。
            CDP.initialize({
                success: function () {
                    var config = getConfig(options);
                    // Framework 用の Patch 適用 (Framework 初期化前)
                    if (config.applyPatch) {
                        Framework.Patch.applyBeforeInit();
                    }
                    // config の反映: jquery
                    config.applyJQueryConfig();
                    // jQuery Mobile の初期化
                    $(document).on("mobileinit", function () {
                        // config の反映: jquery mobile
                        config.applyJQueryMobileConfig();
                        // cdp.i18n の初期化
                        CDP.initializeI18N(config.i18n)
                            .always(function (info) {
                            // i18next の初期化時のエラーは無視する. info が array の場合、エラー情報が格納されている.
                            $(document)
                                .one("pagebeforechange", function (event, data) {
                                data.options.showLoadMsg = false;
                            })
                                .on("pagebeforecreate", function (event) {
                                // i18nextライブラリによるhtml fragmentの翻訳処理
                                $(event.target).localize();
                            });
                            // Router の初期化
                            if (Framework.Router._initialize({
                                anchorVclick: config.anchorVclick,
                                firstPageTransition: config.firstPageTransition,
                            })) {
                                // Framework 用の Patch 適用 (Framework 初期化後)
                                if (config.applyPatch) {
                                    Framework.Patch.applyAfterInit();
                                }
                                _dfInitialize.resolve();
                            }
                            else {
                                _dfInitialize.reject(CDP.makeErrorInfo(CDP.RESULT_CODE.ERROR_CDP_FRAMEWORK_ROUTER_INITIALIZE_FAILED, TAG, "error. CDP.Framework.Router.initialize() failed."));
                                _dfInitialize = $.Deferred();
                            }
                        });
                    });
                    {
                        // jquery 3+
                        var jqueryMajor = ~~$.fn.jquery.split(".")[0];
                        if (3 <= jqueryMajor) {
                            if (4 <= jqueryMajor) {
                                console.warn(TAG + "jquery-migrate for 3.0.0+ in use.");
                            }
                            new Promise(function(resolve) { resolve(); }).then(function() { var __WEBPACK_AMD_REQUIRE_ARRAY__ = [__webpack_require__(5)]; (function () {
                                new Promise(function(resolve) { resolve(); }).then(function() {[__webpack_require__(1)];}).catch(__webpack_require__.oe);
                            }.apply(null, __WEBPACK_AMD_REQUIRE_ARRAY__));}).catch(__webpack_require__.oe);
                        }
                        else {
                            new Promise(function(resolve) { resolve(); }).then(function() {[__webpack_require__(1)];}).catch(__webpack_require__.oe);
                        }
                    }
                },
                fail: function (error) {
                    _dfInitialize.reject(CDP.makeErrorInfo(CDP.RESULT_CODE.ERROR_CDP_FRAMEWORK_INITIALIZE_FAILED, TAG, "error. CDP.initialize() failed.", error));
                    _dfInitialize = $.Deferred();
                },
            });
            return _dfInitialize.promise();
        }
        Framework.initialize = initialize;
        /**
         * @en Check for initialization status.
         * @ja 初期化済みか判定
         *
         * @returns
         * - `en` true: initialized / false: uninitialized
         * - `ja` true: 初期化済み / false: 未初期化
         */
        function isInitialized() {
            return "resolved" === _dfInitialize.state();
        }
        Framework.isInitialized = isInitialized;
        /**
         * @en Wait for initialization status.
         * @ja 初期化待ち
         */
        function waitForInitialize() {
            return _dfInitialize.promise();
        }
        Framework.waitForInitialize = waitForInitialize;
        var _orientationListenerHolder = {};
        /**
         * @en Register IOrientationChangedListener to framework.
         * @ja IOrientationChangedListener を Framework に登録
         *
         * @param key
         *  - `en` ID key
         *  - `ja` クライアントで管理可能な ID
         * @param listener
         *  - `en` IOrientationChangedListener instance
         *  - `ja` IOrientationChangedListener インスタンス
         */
        function registerOrientationChangedListener(key, listener) {
            _orientationListenerHolder[key] = listener;
        }
        Framework.registerOrientationChangedListener = registerOrientationChangedListener;
        /**
         * @en Unregister IOrientationChangedListener from framework.
         * @ja IOrientationChangedListener を Framework から登録解除
         *
         * @param key
         *  - `en` ID key by using register
         *  - `ja` 登録時に使用した ID
         */
        function unregisterOrientationChangedListener(key) {
            delete _orientationListenerHolder[key];
        }
        Framework.unregisterOrientationChangedListener = unregisterOrientationChangedListener;
        var _activePage = null;
        /**
         * @en Setup event handlers when after router initialized.
         * @ja イベントハンドラの設定. Router 初期化後に Framework がコールする.
         *
         * @internal
         */
        function _setupEventHandlers() {
            (function () {
                var oldBackButtonHandler = CDP.setBackButtonHandler(null);
                var baseBackButtonHandler = function (event) {
                    if (_activePage && _activePage.onHardwareBackButton(event)) {
                        // クライアント側でハンドリング済みと指定された場合、既定の処理を行わない
                        return;
                    }
                    else {
                        oldBackButtonHandler(event);
                    }
                };
                CDP.setBackButtonHandler(baseBackButtonHandler);
            })();
            (function () {
                var oldRouteChangeHandler = CDP.Framework.setBeforeRouteChangeHandler(null);
                var baseRouteChangeHandler = function () {
                    if (_activePage) {
                        return _activePage.onBeforeRouteChange();
                    }
                    else {
                        return oldRouteChangeHandler();
                    }
                };
                CDP.Framework.setBeforeRouteChangeHandler(baseRouteChangeHandler);
            })();
        }
        Framework._setupEventHandlers = _setupEventHandlers;
        var _lastOrientation = null;
        /**
         * @en Setup active IPage instance.
         * @ja active Page の設定. Framework がコールする.
         *
         * @internal
         */
        function _setActivePage(page) {
            _activePage = page;
            if (_activePage) {
                _lastOrientation = Framework.getOrientation();
            }
        }
        Framework._setActivePage = _setActivePage;
        /**
         * @en Reterns framework default click event string.
         * @ja Framework が既定に使用するクリックイベント文字列を取得
         *
         * @returns "vclick" / "click"
         */
        function getDefaultClickEvent() {
            return Framework.Patch.s_vclickEvent;
        }
        Framework.getDefaultClickEvent = getDefaultClickEvent;
        var _pageConstructors = [];
        var _pageInstances = [];
        /**
         * @en Register Concrete IPage class. <br>
         *     If constructor needs arguments, use bind() function.
         * @ja Page の登録 <br>
         *     constructor を指定する. 引数がある場合は、bind を行うこと
         *
         * @param ctor
         *  - `en` Concrete IPage class constructor
         *  - `ja` コンストラクタを指定
         */
        function registerPage(ctor) {
            _pageConstructors.push(ctor);
        }
        Framework.registerPage = registerPage;
        /**
         * @en Page instances are generated from the reserved constructor.
         * @ja 予約されたコンストラクタからPage インスタンスを生成
         */
        function constructPages() {
            _pageConstructors.forEach(function (ctor) {
                _pageInstances.push(new ctor());
            });
            _pageConstructors = [];
        }
        Framework.constructPages = constructPages;
        /**
         * @en Release Page instance reference
         * @ja Page インスタンスの参照を破棄
         */
        function disposePages() {
            _pageInstances = [];
        }
        Framework.disposePages = disposePages;
        /**
         * @en Get Config object.
         * @ja Config object の取得
         *
         * @internal
         */
        function getConfig(options) {
            var defConfig = {
                // for fail safe, default settings.
                jquery: {
                    ajaxSetup: { cache: false },
                    migrateMute: true,
                },
                jquerymobile: {
                    allowCrossDomainPages: true,
                    defaultPageTransition: "platform-default",
                    defaultDialogTransition: "platform-default",
                    hashListeningEnabled: false,
                    pushStateEnabled: false,
                    // @see jquery.mobile.js LINE 6394
                    transitionHandler: {
                        defaultHandler: "simultaneous",
                        sequential: ["fade", "flip", "flow"],
                        simultaneous: [],
                    },
                },
                i18n: {
                    fallbackResources: {},
                    options: {},
                },
                applyPatch: true,
                anchorVclick: true,
                firstPageTransition: false,
                applyJQueryConfig: function () {
                    var _this = this;
                    Object.keys(this.jquery).forEach(function (key) {
                        if ("ajaxSetup" === key) {
                            $.ajaxSetup(_this.jquery.ajaxSetup);
                        }
                        else {
                            $[key] = _this.jquery[key];
                        }
                    });
                },
                applyJQueryMobileConfig: function () {
                    var _this = this;
                    $.mobile.loader.prototype.options.text = undefined;
                    Object.keys(this.jquerymobile).forEach(function (key) {
                        if ("transitionHandler" === key) {
                            var $mobile_1 = $.mobile;
                            // default handler
                            $mobile_1.defaultTransitionHandler
                                = $mobile_1.transitionHandlers[_this.jquerymobile.transitionHandler.defaultHandler];
                            // simultaneous handler
                            _this.jquerymobile.transitionHandler.simultaneous.forEach(function (transition) {
                                $mobile_1.transitionHandlers[transition] = $mobile_1.transitionHandlers.simultaneous;
                            });
                            // sequential handler
                            _this.jquerymobile.transitionHandler.sequential.forEach(function (transition) {
                                $mobile_1.transitionHandlers[transition] = $mobile_1.transitionHandlers.sequential;
                            });
                        }
                        else {
                            $.mobile[key] = _this.jquerymobile[key];
                        }
                    });
                },
            };
            return $.extend(true, {}, defConfig, CDP.Config, options);
        }
        ///////////////////////////////////////////////////////////////////////
        // closure methods
        // resize handler
        $(window).on("resize", function (event) {
            var newOrientation = Framework.getOrientation();
            if (_lastOrientation !== newOrientation) {
                for (var key in _orientationListenerHolder) {
                    _orientationListenerHolder[key].onOrientationChanged(newOrientation);
                }
                if (_activePage) {
                    _activePage.onOrientationChanged(newOrientation);
                }
                _lastOrientation = newOrientation;
            }
        });
    })(Framework = CDP.Framework || (CDP.Framework = {}));
})(CDP || (CDP = {}));

/* tslint:disable:max-line-length no-string-literal */
var CDP;
(function (CDP) {
    var Framework;
    (function (Framework) {
        var Promise = CDP.Promise;
        var TAG = "[CDP.Framework.Router] ";
        ///////////////////////////////////////////////////////////////////////
        // closure methods
        /**
         * @en Convert path to URL. <br>
         *     If the path starts from "/", the function translate the path as child folder of "web root". <br>
         *     Otherwise, it interprets as relative path from current page. <br>
         *     [Note] This behavior go along with jQM, NOT with require.toUrl().
         *
         * @ja path を URL に変換 <br>
         *     "/" から始まるものは web root から、それ以外は現在のページから絶対パスURLに変換する。 <br>
         *     jQM の挙動にあわせており、require.toUrl() と異なるので注意。
         *
         * @param path
         *  - `en` set relative path from [[webRoot]], or relative path from current scirpt owner html (It doesn't start from "/").
         *  - `ja` [[webRoot]] からの相対パス, もしくはカレントスクリプトを走らせている HTML からの相対パス ("/" なし).
         */
        function toUrl(path) {
            if (null != path[0] && "/" === path[0]) {
                return CDP.toUrl(path);
            }
            else {
                return $.mobile.path.makeUrlAbsolute(path, getCurrentDocumentUrl());
            }
        }
        Framework.toUrl = toUrl;
        /**
         * @en Get current document url.
         * @ja 現在表示しているドキュメントの URL を取得
         *
         * @internal
         */
        function getCurrentDocumentUrl() {
            var $activePage = $("body").pagecontainer("getActivePage");
            if (null == $activePage) {
                return $.mobile.path.documentBase.hrefNoHash;
            }
            var base = $.mobile.path.documentBase.hrefNoHash;
            var url = $.mobile.activePage.closest(".ui-page").jqmData("url");
            if (!url || !$.mobile.path.isPath(url)) {
                url = base;
            }
            return $.mobile.path.makeUrlAbsolute(url, base);
        }
        /**
         * @en Default "before route change" handler.
         * @ja 既定の "before route change" ハンドラ
         *
         * @internal
         */
        var _beforeRouteChange = function () {
            return Promise.resolve();
        };
        // default "before route change" hanndler
        var _defaultBeforeRouteChange = _beforeRouteChange;
        /**
         * @en Setup "before route change" handler.
         * @ja "before route change" ハンドラ設定
         *
         * @internal
         *
         * @param
         *  - `en` handler function.
         *  - `ja` handler 指定.
         * @returns
         *  - `en` old handler function.
         *  - `ja` 以前の handler.
         */
        function setBeforeRouteChangeHandler(handler) {
            if (null == handler) {
                return _beforeRouteChange;
            }
            else {
                var oldHandler = _beforeRouteChange;
                _beforeRouteChange = handler;
                return oldHandler;
            }
        }
        Framework.setBeforeRouteChangeHandler = setBeforeRouteChangeHandler;
        //___________________________________________________________________________________________________________________//
        /**
         * @en Router class for adjusting jQueryMobile functions and Backbone.Router functions. <br>
         *     Even if Backbone.Router does not start routing, natigate() method works good with jQM framework.
         *
         * @ja jQueryMobile と Backbone.Router を調停する Router クラス <br>
         *     ルーティングを開始していない場合にも、navigate() は jQM フレームワークを使用して機能する。
         */
        var Router = /** @class */ (function () {
            function Router() {
            }
            ///////////////////////////////////////////////////////////////////////
            // public static methods
            /**
             * @en for initialize Router. this function is called in framework.
             * @ja この関数はフレームワーク内部で使用される。
             *
             * @internal
             *
             * @param  options
             *  - `en` init options
             *  - `ja` 初期化オプション
             * @returns
             *  - `en` true: succeeded / false: failed.
             *  - `ja` true: 成功 / 失敗
             */
            Router._initialize = function (options) {
                var $body = $("body");
                if (!!Router.s_router) {
                    console.warn(TAG + "logic error. initialize call twice.");
                    return false;
                }
                Router.s_initOptions = $.extend({}, Router.s_defaultInitOptions, options);
                if (Router.s_initOptions.firstPageTransition) {
                    Router.s_firstChangePage = false;
                }
                // Backbone.Router が、route を解決できなかった場合にも通知を捕捉するためのコールバックを設定
                Router.s_loadUrl = _.bind(Backbone.history.loadUrl, Backbone.history);
                Backbone.history.loadUrl = Router.customLoadUrl;
                Router.s_router = new Backbone.Router();
                Router.s_router.on("route", Router.onRouteSucceeded);
                // Backbone.Router を使用している場合、$.mobile.back() の挙動をブラウザの[戻る]に統一
                if (!$.mobile.hashListeningEnabled) {
                    Router.s_back = _.bind($.mobile.back, $.mobile);
                    $.mobile.back = Router.customJqmBack;
                }
                // changePage をサポート
                if (null == $.mobile.changePage) {
                    $.mobile.changePage = function (to, opt) {
                        $body.pagecontainer("change", to, opt);
                    };
                }
                Router.bindEvents();
                // Framework のイベントハンドラを更新
                Framework._setupEventHandlers();
                return true;
            };
            /**
             * @en Register to Router.
             * @ja Router への登録.
             *
             * @param route
             *  - `en` route string, it can be regular expression.
             *  - `ja` ルーティング文字列 / 正規表現
             * @param page
             *  - `en` page template path.
             *  - `ja` page template path. イベント名にも使用される
             * @param top
             *  - `en` set "true" if application's top view. (optional)
             *  - `ja` Top ページの場合は true を指定 (任意)
             * @param callback
             *  - `en` callback for custom page transition. If you don't want to trigger jQM.changePage(), return true by this callback. (optional)
             *  - `ja` 遷移を自身で管理する場合に指定し、戻り値を true に設定すると changePage をコールしない (任意)
             * @returns
             *  - `en` Router instance.
             *  - `ja` インスタンス。ただし method chain をしたい場合は、any cast が必要。
             */
            Router.register = function (route, page, top, callback) {
                if (top === void 0) { top = false; }
                // Backbone.Router への登録は history の停止が必要
                var restart = Router.stop();
                var name = route + page;
                var context = {
                    route: route,
                    regexp: Router.s_router._routeToRegExp(route),
                    page: page,
                    top: top,
                    callback: callback || function () { return false; }
                };
                if (Router.pushContext(name, context)) {
                    Router.s_router.route(route, name, function () { });
                }
                if (restart) {
                    // 再開時は再読み込みしない。
                    Router.start({ silent: true, pageConstruct: false });
                }
                return Router;
            };
            /**
             * @en Start listening hash change. <br>
             *     It should be called after register().
             *
             * @ja 履歴監視の開始 <br>
             *     登録完了後にクライアントが呼ぶことでページ遷移が開始される。
             *
             * @param options
             *  - `en` options object for Backbone.History.
             *  - `ja` Backbone.History にわたるオプション
             */
            Router.start = function (options) {
                var opt = $.extend({ pageConstruct: true }, options);
                if (opt.pageConstruct) {
                    Framework.constructPages();
                }
                if ($.mobile.hashListeningEnabled) {
                    console.error(TAG + "setting error. confict: $.mobile.hashListeningEnabled = true, cannot start.");
                    return;
                }
                Backbone.history.start(opt);
            };
            /**
             * @en Stop listening hash change.
             * @ja 履歴監視の停止
             *
             * @returns
             *  - `en` previous status.
             *  - `ja` 以前の開始状態を返却
             */
            Router.stop = function () {
                var prevState = Backbone.History.started;
                Backbone.history.stop();
                return prevState;
            };
            /**
             * @en Check routing status.
             * @ja ルーティングを開始しているか判定
             *
             * @returns
             *  - `en` true: routing / false: not routing
             *  - `en` true: 有効 / false: 無効
             */
            Router.isRouting = function () {
                return Backbone.History.started;
            };
            /**
             * @en URL navigation.
             * @ja URL遷移
             *
             * @param url
             *  - `en` set a navigate URL. (relative path / absolute path / fragment)
             *  - `ja` 遷移 URL を指定 (相対パス/絶対パス/フラグメント)
             * @param transition
             *  - `en` set a transition string.
             *  - `ja` transition に使用する effect を指定
             * @param reverse
             *  - `en` set a direction string for transition. true:reverse / false:nomal
             *  - `ja` transition に使用する direction を指定 true:reverse/false:通常
             * @param options
             *  - `en` set a options object for Backbone.Router.navigate().
             *  - `ja` Backbone.Router.navigate() に渡されるオプション
             */
            Router.navigate = function (url, transition, reverse, options) {
                if (!!Router.s_lastNavigateInfo.inNavigation) {
                    // すでに Navigation 中であれば抑止
                    console.warn(TAG + "Router.navigate() called in navigation proc.");
                    return;
                }
                else if (Router.initFirstPageIfNeeded(url)) {
                    return;
                }
                var navOptions = $.extend({}, Router.s_defaultNavigateOptions, options);
                // ページ遷移開始通知. Sub Flow にてすでにコールされている場合は既定の何もしないコールバックを使用する.
                var notifyBeforeRouteChange = Router.s_lastNavigateInfo.calledBeforeRouteChange ? _defaultBeforeRouteChange : _beforeRouteChange;
                Router.s_lastNavigateInfo = {
                    url: url,
                    transition: transition,
                    reverse: reverse,
                    backDestination: navOptions.backDestination,
                    noHashChange: navOptions.noHashChange,
                    intent: navOptions.intent || {},
                    positiveNavigate: true,
                    calledBeforeRouteChange: true,
                    inNavigation: true,
                };
                // ページ遷移開始通知
                notifyBeforeRouteChange()
                    .fail(function () {
                    // beforeRouteChange() が失敗した場合、致命的な不具合となるため、error 記録のみにして先に進む。
                    console.error(TAG + "before route change call, failed.");
                })
                    .always(function () {
                    if (Router.isRouting() && !Router.s_lastNavigateInfo.noHashChange) {
                        if (navOptions.subFlow) {
                            switch (navOptions.subFlow.operation) {
                                case "begin":
                                    Router.startSubFlow(navOptions.subFlow);
                                    break;
                                case "end":
                                    Router.finishSubFlow(navOptions);
                                    return; // navigation は呼ばない
                                default:
                                    console.warn(TAG + "unknown subFlow.operation. operation: " + navOptions.subFlow.operation);
                                    break;
                            }
                        }
                        var result = Backbone.history.navigate(url, navOptions);
                        // Backbone.history.loadUrl() がコールされなかった場合, navigation 終了
                        if (!result || "string" === typeof result) {
                            Router.s_lastNavigateInfo.inNavigation = false;
                        }
                    }
                    else {
                        if (navOptions.subFlow) {
                            console.warn(TAG + "subFlow only supported under routing and hash change condition.");
                        }
                        var fragment_1 = Backbone.history.getFragment(url);
                        var context = void 0;
                        if (Router.s_lastNavigateInfo.noHashChange) {
                            // noHashChange が指定されたとき
                            context = _.find(Router.s_rootContexts, function (ctx) {
                                return ctx.regexp.test(fragment_1);
                            });
                        }
                        else {
                            // Backbone.Router が有効でないとき
                            context = _.findWhere(Router.s_rootContexts, { route: fragment_1 });
                        }
                        if (context) {
                            url = context.page;
                        }
                        Router.changePage(url);
                    }
                });
            };
            /**
             * @en Navigate from Top Page. <br>
             *     If SubFlow set up, the param is cleared.
             *
             * @ja トップページからの画面遷移 <br>
             *     SubFlow が指定されていた場合はクリアされる
             * @param to
             *  - `en` set a navigate URL or PageStackOptions object or array.
             *  - `ja` 遷移 URL / PageStackOptions オブジェクト/配列
             * @param transition
             *  - `en` set a transition string
             *  - `ja` transition に使用する effect を指定
             * @param reverse
             *  - `en` set a direction string for transition. true:reverse / false:nomal
             *  - `ja` transition に使用する direction を指定 true:reverse/false:通常
             * @param options
             *  - `en` set a options object for Backbone.Router.navigate().
             *  - `ja` Backbone.Router.navigate() に渡されるオプション
             */
            Router.navigateFromTop = function (to, transition, reverse, options) {
                var stack = Router._getJqmHistory().stack;
                var currentPage = stack[Router._getJqmHistory().activeIndex];
                var _transition = transition || currentPage.transition;
                var _reverse = (null != reverse) ? reverse : true;
                var destStacks = (function () {
                    if (!to) {
                        return null;
                    }
                    else if ("string" === typeof to) {
                        return [{ route: to }];
                    }
                    else if (to instanceof Array) {
                        return to;
                    }
                    else {
                        return [to];
                    }
                })();
                // 指定された SubFlow を削除
                stack.forEach(function (value) {
                    delete value[Router.SUBFLOW_PARAM];
                });
                // 初期ページに SubFlow パラメータを指定
                stack[0][Router.SUBFLOW_PARAM] = {
                    operation: "begin",
                    destBase: stack[0].hash,
                    destStacks: destStacks,
                    additionalDistance: 0,
                };
                Router.navigate(null, _transition, _reverse, $.extend({}, options, {
                    subFlow: {
                        operation: "end",
                    }
                }));
            };
            /**
             * @ en Back to previous history. <br>
             *      It's same as browser back button's behaviour. <br>
             *      [Note] If set the jQM: data-rel="back", work as well.
             *
             * @ja 履歴を戻る <br>
             *     ブラウザの戻るボタンと同じ挙動。 <br>
             *     jQM: data-rel="back" を指定しても同じであることに注意。
             */
            Router.back = function () {
                if (!!Router.s_lastNavigateInfo.inNavigation) {
                    // すでに Navigation 中であれば抑止
                    console.warn(TAG + "Router.back() called in navigation proc.");
                    return;
                }
                else if (Router.isTopPage()) {
                    // Top ページに指定されていれば終了
                    var app = navigator.app || {};
                    if (!!app.exitApp) {
                        app.exitApp(); // note: never exit on iOS
                        return;
                    }
                }
                Router.s_lastNavigateInfo = {
                    inNavigation: true,
                    calledBeforeRouteChange: true,
                };
                // ページ遷移開始通知
                _beforeRouteChange()
                    .then(function () {
                    $.mobile.back();
                })
                    .fail(function () {
                    console.error("before route change call, failed.");
                    Router.s_lastNavigateInfo = {};
                });
            };
            /**
             * @en Store Intent object by framwork.
             * @ja Intent を格納。 フレームワークが使用する。
             *
             * @internal
             */
            Router._pushIntent = function (intent) {
                Router.s_lastIntent = $.extend(true, Router.s_lastIntent, intent);
            };
            /**
             * @en Get Intent object by framework.
             * @ja Intent を取得。フレームワークが使用する。
             *
             * @internal
             */
            Router._popIntent = function () {
                var intent = Router.s_lastIntent;
                Router.s_lastIntent = {};
                return intent;
            };
            /**
             * @en Get query parameters. <br>
             *     It can be accessed during "pagebeforecreate" to "pagechange".
             * @ja query parameter に指定された引数の取得 <br>
             *     ページ遷移中にのみアクセス可能 (pagebeforecreate ～ pagechange)
             */
            Router.getQueryParameters = function () {
                if (Router.s_lastNavigateInfo.intent && Router.s_lastNavigateInfo.intent.params) {
                    return Router.s_lastNavigateInfo.intent.params["queryParams"];
                }
                else {
                    return null;
                }
            };
            /**
             * @en Begin sub flow transaction.
             * @ja sub flow トランザクションの開始
             *
             * @param url
             *  - `en` set a navigate URL. (relative path / absolute path / fragment)
             *  - `ja` 遷移 URL を指定 (相対パス/絶対パス/フラグメント)
             * @param options
             *  - `en` set a options object for Backbone.Router.navigate().
             *  - `ja` Backbone.Router.navigate() に渡されるオプション
             * @param transition
             *  - `en` set a transition string
             *  - `ja` transition に使用する effect を指定
             * @param reverse
             *  - `en` set a direction string for transition. true:reverse / false:nomal
             *  - `ja` transition に使用する direction を指定 true:reverse/false:通常
             */
            Router.beginSubFlow = function (url, options, transition, reverse) {
                var opt = $.extend({}, options);
                opt.subFlow = opt.subFlow || { operation: "begin" };
                if ("begin" !== opt.subFlow.operation) {
                    console.error(TAG + "logic error. invalid subflow operation. [operation: " + opt.subFlow.operation + "]");
                    return;
                }
                Router.navigate(url, transition, reverse, opt);
            };
            /**
             * @en Commit sub flow transaction.
             * @ja sub flow トランザクションの終了
             *
             * @param transition
             * - `en` set a transition string
             * - `ja` transition に使用する effect を指定
             * @param reverse
             * - `en` set a direction string for transition. true:reverse / false:nomal
             * - `ja` transition に使用する direction を指定 true:reverse/false:通常
             */
            Router.commitSubFlow = function (transition, reverse) {
                Router.navigate(null, transition, reverse, {
                    subFlow: {
                        operation: "end",
                    }
                });
            };
            /**
             * @en Cancel sub flow transaction.
             * @ja sub flow トランザクションのキャンセル
             *
             * @param transition
             *  - `en` set a transition string
             *  - `ja` transition に使用する effect を指定
             * @param reverse
             *  - `en` set a direction string for transition. true:reverse[default] / false:nomal
             *  - `ja` transition に使用する direction を指定 true:reverse[既定]/false:通常
             */
            Router.cancelSubFlow = function (transition, reverse) {
                // 起点のページに戻る
                var baseInfo = Router.detectSubFlowBaseInfo();
                baseInfo.subFlowParam.additionalDistance = 0;
                Router.navigate(null, transition, (null != reverse) ? reverse : true, {
                    subFlow: {
                        operation: "end",
                        destStacks: null,
                    }
                });
            };
            /**
             * @en Check in sub flow.
             * @ja sub flow 内であるか判定
             */
            Router.isInSubFlow = function () {
                var stack = Router._getJqmHistory().stack;
                var has = _.some(stack, function (value) {
                    return !!value[Router.SUBFLOW_PARAM];
                });
                return has;
            };
            /**
             * @en Check from hash changed navigation.
             * @ja Hash 変更によって Navigate が起こったか判定. "pagechange" が発生するまでに判定可能
             */
            Router.fromHashChanged = function () {
                // positiveNavigate = false は含めない
                return Router.s_lastNavigateInfo.inNavigation && (null == Router.s_lastNavigateInfo.positiveNavigate);
            };
            Router.registerPageStack = function (pageStack, withNavigate, options) {
                var newStacks = [];
                var failed = false;
                pageStack = (pageStack instanceof Array) ? pageStack : [pageStack];
                withNavigate = (null == withNavigate) ? false : withNavigate;
                (function () {
                    var makeStack = function (info) {
                        var url;
                        var fragment = Backbone.history.getFragment(info.route);
                        var context = _.find(Router.s_rootContexts, function (ctx) {
                            return ctx.regexp.test(fragment);
                        });
                        if (!context) {
                            console.warn(TAG + "route is not registered. route: " + info.route);
                            return null;
                        }
                        else {
                            url = Router.pathToJqmDataUrl(context.page);
                        }
                        var stack = {
                            route: info.route,
                            pageUrl: url,
                            title: info.title,
                            transition: info.transition,
                            url: url,
                        };
                        return stack;
                    };
                    for (var i = 0, n = pageStack.length; i < n; i++) {
                        var stack = makeStack(pageStack[i]);
                        if (!stack) {
                            failed = true;
                            break;
                        }
                        else {
                            newStacks.push(stack);
                        }
                    }
                })();
                if (failed) {
                    return false;
                }
                (function () {
                    // Router の停止
                    var restart = Router.stop();
                    var silentLength = newStacks.length - 1;
                    var finalIndex = newStacks.length - 1;
                    Router._getJqmHistory().clearForward();
                    for (var i = 0, n = silentLength; i < n; i++) {
                        location.hash = newStacks[i].route;
                        Router._getJqmHistory().stack.push(newStacks[i]);
                        Router._getJqmHistory().activeIndex = Router._getJqmHistory().stack.length - 1;
                    }
                    // final stack with navigate
                    if (withNavigate) {
                        var transition = (function () {
                            if (null != Router.s_lastNavigateInfo.transition) {
                                return Router.s_lastNavigateInfo.transition;
                            }
                            else {
                                return newStacks[finalIndex].transition;
                            }
                        })();
                        var reverse = (function () {
                            if (null != Router.s_lastNavigateInfo.reverse) {
                                return Router.s_lastNavigateInfo.reverse;
                            }
                            else {
                                return false;
                            }
                        })();
                        restart = false;
                        Router.start({ silent: true });
                        Router.navigate(newStacks[finalIndex].route, transition, reverse, options);
                    }
                    else {
                        location.hash = newStacks[finalIndex].route;
                        Router._getJqmHistory().stack.push(newStacks[finalIndex]);
                        Router._getJqmHistory().activeIndex = Router._getJqmHistory().stack.length - 1;
                    }
                    // Router の再開
                    if (restart) {
                        Router.start({ silent: true });
                    }
                })();
                return true;
            };
            /**
             * @en Get jQM's history object
             * @ja jQM の History オブジェクトの取得
             *
             * @internal
             */
            Router._getJqmHistory = function () {
                return $.mobile.navigate.history;
            };
            ///////////////////////////////////////////////////////////////////////
            // private static methods
            /**
             * @en Override: Backbone.History.loadUrl().
             * @ja Backbone.History.loadUrl() のオーバーライド
             */
            Router.customLoadUrl = function (fragment) {
                var handled = Router.s_loadUrl(fragment);
                if (!handled) {
                    Router.onRouteFailed(fragment);
                }
                return true;
            };
            /**
             * @en Override: $.mobile.back().
             *  - fail safe processing. <br>
             *    If using Backbone's Router, <br>
             *    this class unuses history object of jQuery Mobile 1.4, <br>
             *    and standardize as browser back button's behaviour. (jQM 1.3 comparable)
             *
             * @ja $.mobile.back() のオーバーライド
             *  - [TBD] fail safe 処理 <br>
             *    Backbone の Router を使用している場合、 <br>
             *    jQuery Mobile 1.4 以降の内部の History 管理は使用せずに <br>
             *    1.3 相当のブラウザの[戻る]の挙動に統一する。
             */
            Router.customJqmBack = function () {
                if (Router.isRouting()) {
                    history.back();
                }
                else {
                    // jQM 既定処理
                    Router.s_back();
                }
            };
            /**
             * \~english
             * Bind events.
             *
             * @private
             *
             * \~japanese
             * イベントバインド
             *
             * @private
             */
            Router.bindEvents = function () {
                $(document)
                    .one("pagechange", function () {
                    if (Router.s_initOptions.anchorVclick) {
                        // anchor vclick
                        $(document).on("vclick", "[href]", function (event) {
                            Router.onAnchorVclicked(event);
                        });
                    }
                })
                    .on("pagebeforeshow", function (event) {
                    // "data-back-dst" を page に設定
                    if (null != Router.s_lastNavigateInfo.backDestination) {
                        var active = Router._getJqmHistory().getActive();
                        active[Router.BACK_DESTINATION_URL] = Router.s_lastNavigateInfo.backDestination;
                    }
                })
                    .on("pageshow", function (event) {
                    var active = Router._getJqmHistory().getActive();
                    if (active[Router.SUBFLOW_PARAM]) {
                        delete active[Router.SUBFLOW_PARAM];
                    }
                })
                    .on("pagechange pagecontainerloadfailed", function (event) {
                    Router.s_lastNavigateInfo = {};
                });
                // back key assign
                CDP.setBackButtonHandler(Router.back);
            };
            /**
             * @en Store the RootContext.
             * @ja RootContext の格納
             *
             * @param name
             *  - `en` name of route
             *  - `ja` route 名
             * @param context
             *  - `en` context object
             *  - `ja` context オブジェクト
             * @returns
             *  - `en` true: succeeded / false: already registered
             *  - `ja` true: 登録成功 / false: すでに登録されている
             */
            Router.pushContext = function (name, context) {
                if (!!Router.s_rootContexts[name]) {
                    console.error(TAG + "logic error. route is already registered. name: " + name);
                    return false;
                }
                Router.s_rootContexts[name] = context;
                return true;
            };
            /**
             * @en Check if $.mobile.initializePage() is called or not, and call it if needed.
             * @ja  $.mobile.initializePage() が呼ばれているか確認し、必要なら初期化する。
             *
             * @param url
             *  - `en` set a navigate URL. (relative path / absolute path / fragment)
             *  - `ja` 遷移 URL を指定 (相対パス/絶対パス/フラグメント)
             */
            Router.initFirstPageIfNeeded = function (url) {
                if (!$.mobile.autoInitializePage) {
                    $(document).one("pagebeforechange", function (event, data) {
                        data.toPage = Framework.toUrl(url);
                    });
                    $.mobile.initializePage();
                    $.mobile.autoInitializePage = true;
                    return true;
                }
                return false;
            };
            /**
             * @en Check for current page is top.
             * @ja 現在のページが top に指定されているか判定
             *
             * @returns
             *  - `en` true: top page / false: not top page
             *  - `ja` true: top 指定 / false: top ではない
             */
            Router.isTopPage = function () {
                var fragment = Backbone.history.getFragment($.mobile.path.parseUrl(location.href).hash);
                var context = _.find(Router.s_rootContexts, function (ctx) {
                    return ctx.regexp.test(fragment);
                });
                return (null == context) ? false : context.top;
            };
            /**
             * @en Called when anchor received "vclick" event.
             * @ja anchor が vclick されたときにコールされる
             *
             * @returns
             *  - `en` true: need default processing / false: need custom processing
             *  - `ja` true: default 処理 / false: カスタム処理
             */
            Router.onAnchorVclicked = function (event) {
                if (Router.isJustBeforeVclicked()) {
                    event.preventDefault();
                    return false;
                }
                return Router.followAnchor(event);
            };
            /**
             * @en Anchor processing.
             * @ja anchor 処理
             */
            Router.followAnchor = function (event) {
                var $target = $(event.currentTarget);
                var url = $target.jqmData("href") || $target.attr("href");
                var transition = $target.jqmData("transition");
                var direction = $target.jqmData("direction");
                var backDst = $target.attr(Router.DATA_BACK_DESTINATION);
                var noHashChange = $target.attr(Router.DATA_NO_HASH_CHANGE) ?
                    $target.attr(Router.DATA_NO_HASH_CHANGE) === "true" : false;
                var noHrefHandle = $target.attr(Router.DATA_NO_VCLICK_HANDLE) ?
                    $target.attr(Router.DATA_NO_VCLICK_HANDLE) === "true" : false;
                /*
                 * - 明示的にハンドルしない指定がある場合
                 * - jQM のフラグメントの場合
                 * 既定の処理を行う
                 */
                if (noHrefHandle || Router.needDefaultOperation(url)) {
                    return true;
                }
                // custom behavier
                event.preventDefault();
                if (Router.isBackButtonClicked(event)) {
                    Router.back();
                }
                else {
                    Router.navigate(url, transition, !!direction, { noHashChange: noHashChange, backDestination: backDst });
                }
                return false;
            };
            /**
             * @en Check default processing needed.
             * @ja 既定の処理を行わせるか判定
             *
             * @param  url
             *  - `en` url string
             *  - `ja` url 文字列
             * @returns
             *  - `en` true: need default processing / false: need not
             *  - `ja` true: 既定の処理が必要 / false: 不要
             */
            Router.needDefaultOperation = function (url) {
                if (!url || ("#" === url)) {
                    return true;
                }
                else if ("#" === url[0]) {
                    return !Router.canResolveRoute(url);
                }
                else {
                    return false;
                }
            };
            /**
             * @en Check status of Backbone.Router if they can resolve route.
             * @ja Backbone.Router が route を解決可能か判定
             *
             * @param  url
             *  - `en` url string
             *  - `ja` url 文字列
             * @returns
             *  - `en` true: can resolve / false: can not
             *  - `ja` true: 解決可能 / false: 解決不可
             */
            Router.canResolveRoute = function (url) {
                var fragment = Backbone.history.getFragment(url);
                return _.any(Backbone.history.handlers, function (handler) {
                    if (handler.route.test(fragment)) {
                        return true;
                    }
                });
            };
            /**
             * @en Check "vclick" fired at the last minute.
             * @ja 直前に vclick が呼ばれたか判定
             */
            Router.isJustBeforeVclicked = function () {
                var isBefore = (Date.now() - Router.s_lastClickedTime) < Router.DELAY_TIME * 2;
                Router.s_lastClickedTime = Date.now();
                return isBefore;
            };
            /**
             * @en Check back button clicked.
             * @ja Back Button がクリックされたか判定
             */
            Router.isBackButtonClicked = function (event) {
                if ($(event.currentTarget).jqmData("rel") === "back") {
                    return true;
                }
                else {
                    return false;
                }
            };
            /**
             * @en It called on succeed routing triggered by changing hash.
             * @ja ハッシュ値が変更され、ルーティングが成功したときにコールされる
             *
             * @param name
             *  - `en` name of route
             *  - `ja` route 名。page の値が渡る。
             * @param args
             *  - `en` array of paramter
             *  - `ja` パラメータ配列。
             */
            Router.onRouteSucceeded = function (name) {
                var args = [];
                for (var _i = 1; _i < arguments.length; _i++) {
                    args[_i - 1] = arguments[_i];
                }
                var context = Router.s_rootContexts[name];
                if (!!context) {
                    var intent = { params: { queryParams: args } };
                    Router.s_lastNavigateInfo.inNavigation = true;
                    if (null != Router.s_lastNavigateInfo.intent) {
                        intent.params = $.extend({}, intent.params, Router.s_lastNavigateInfo.intent.params || {});
                    }
                    Router.s_lastNavigateInfo.intent = $.extend({}, Router.s_lastNavigateInfo.intent, intent);
                    var handled = context.callback(args);
                    if (!handled) {
                        Router.changePage(context.page);
                    }
                }
            };
            /**
             * @en It called on failed routing triggered by changing hash.
             * @ja ハッシュ値が変更され、ルーティングが失敗したときにコールされる
             *
             * @param name
             *  - `en` name of route
             *  - `ja` route 名。page の値が渡る。
             * @param args
             *  - `en` array of paramters
             *  - `ja` パラメータ配列。
             */
            Router.onRouteFailed = function (fragment) {
                Router.s_lastNavigateInfo.inNavigation = true;
                if (null == fragment) {
                    fragment = Backbone.history.getFragment();
                }
                // route が解決できなかったものを管理下に
                if (Router.s_lastNavigateInfo.positiveNavigate) {
                    var context = Router.s_rootContexts[fragment];
                    if (null == context) {
                        context = {
                            route: fragment,
                            regexp: Router.s_router._routeToRegExp(fragment),
                            page: Router.s_lastNavigateInfo.url,
                            top: false,
                            callback: null,
                        };
                        Router.pushContext(fragment, context);
                    }
                }
                // fragment から path を解決
                var path = fragment;
                if (null != Router.s_rootContexts[fragment]) {
                    path = Router.s_rootContexts[fragment].page;
                }
                Router.changePage(path);
            };
            /**
             * @en This function just calls jQuery Mobile's navigation method.
             * @ja jQuery Mobile によるページ遷移指定
             *
             * @param path
             *  - `en` to page path
             *  - `ja` 遷移先パスを指定
             */
            Router.changePage = function (path) {
                var notifyBeforeRouteChange;
                // data-rel="back", ブラウザボタン, H/W Back Key が押下されたとき
                if (!Router.s_lastNavigateInfo.positiveNavigate) {
                    if (Router.s_lastNavigateInfo.inAdditionalBack) {
                        Router.s_lastNavigateInfo.inAdditionalBack = false;
                    }
                    else {
                        Router.decideDirection(path);
                        // 指定先に戻るか判定
                        var additional = Router.detectAdditionalBackDistance();
                        if (0 < additional) {
                            // 2回目以降の hash change には反応させない.
                            Router.s_lastNavigateInfo.inAdditionalBack = true;
                            Router._getJqmHistory().activeIndex -= additional;
                            history.go(-additional);
                            return;
                        }
                    }
                    // 遷移先が subflow 開始点である場合、param を削除
                    var subFlowInfo = Router.detectSubFlowBaseInfo();
                    if (subFlowInfo.isCurrent) {
                        delete subFlowInfo.stack[Router.SUBFLOW_PARAM];
                    }
                }
                else {
                    // 能動的遷移の場合 previousIndex を更新
                    Router._getJqmHistory().previousIndex = Router._getJqmHistory().activeIndex;
                }
                // ページ遷移開始通知. すでにコールされている場合は既定の何もしないコールバックを使用する.
                notifyBeforeRouteChange = Router.s_lastNavigateInfo.calledBeforeRouteChange ? _defaultBeforeRouteChange : _beforeRouteChange;
                notifyBeforeRouteChange()
                    .then(function () {
                    // 付加情報
                    if (Router.s_lastNavigateInfo.intent) {
                        Router._pushIntent(Router.s_lastNavigateInfo.intent);
                    }
                    Router.treatUrlHistory();
                    var pageTransition = (function () {
                        if (Router.s_lastNavigateInfo.transition) {
                            return Router.s_lastNavigateInfo.transition;
                        }
                        else if (Router.s_firstChangePage) {
                            Router.s_firstChangePage = false;
                            return "none"; // splash からの遷移
                        }
                        else {
                            return $.mobile.defaultPageTransition;
                        }
                    })();
                    $.mobile.changePage(Framework.toUrl(path), {
                        showLoadMsg: false,
                        allowSamePageTransition: true,
                        transition: pageTransition,
                        reverse: Router.s_lastNavigateInfo.reverse,
                        fromHashChange: !Router.s_lastNavigateInfo.positiveNavigate,
                        changeHash: !Router.s_lastNavigateInfo.noHashChange,
                    });
                })
                    .fail(function () {
                    console.error(TAG + "before route change call, failed.");
                    Router.s_lastNavigateInfo = {};
                });
            };
            /**
             * @en Decide direction parameter. <br>
             *     It's as same as jQM internal implement. (imperfection)
             *
             * @ja direction の判定 <br>
             *     jQM の内部実装と等価 (不完全)
             *
             * @param path
             *  - `en` to page path
             *  - `ja` 遷移先パスを指定
             */
            Router.decideDirection = function (path) {
                var url = $.mobile.path.convertUrlToDataUrl(Framework.toUrl(path));
                if (null == Router.s_lastNavigateInfo.transition) {
                    Router.s_lastNavigateInfo.transition = Router._getJqmHistory().getActive().transition;
                }
                Router._getJqmHistory().direct({
                    url: url,
                    present: function (newPage, direction) {
                        switch (direction) {
                            case "back":
                                if (null == Router.s_lastNavigateInfo.reverse) {
                                    Router.s_lastNavigateInfo.reverse = true;
                                }
                                break;
                            case "forward":
                                if (null == Router.s_lastNavigateInfo.transition) {
                                    Router.s_lastNavigateInfo.transition = newPage.transition;
                                }
                                break;
                            default:
                                console.warn(TAG + "unknown direction: " + direction);
                                break;
                        }
                    },
                    missing: function () {
                        // 初期ページ URL は判定できない。正常系。
                        if (1 === Router._getJqmHistory().activeIndex) {
                            Router._getJqmHistory().previousIndex = 1;
                            Router._getJqmHistory().activeIndex = 0;
                            if (null == Router.s_lastNavigateInfo.reverse) {
                                Router.s_lastNavigateInfo.reverse = true;
                            }
                        }
                        else if (0 !== Router._getJqmHistory().activeIndex) {
                            console.warn(TAG + "unknown direction.");
                        }
                    }
                });
            };
            /**
             * @en Return additional back distance count when back destination set. (const function)
             * @ja 戻り先が指定されているとき、追加の Back 数を返す。(この関数は Router の状態を変更しない。)
             *
             * @returns
             *  - `en` count of additiona back distance.
             *  - `ja`追加で Back に必要な距離.
             */
            Router.detectAdditionalBackDistance = function () {
                var stack = Router._getJqmHistory().stack;
                var historyActiveIndex = Router._getJqmHistory().activeIndex; // decideDirection() の Router._getJqmHistory().direct() によって、history の activeIndex はすでに変わっている
                var previousIndex = Router._getJqmHistory().previousIndex; // [戻る]が押下された場合に値が入る
                var i, backDst, distance, fragment, context, jqmDataUrl;
                // check "operation". [戻る]および clearForward() されていない状況をチェック
                if (!Router.s_lastNavigateInfo.reverse || null == previousIndex || !stack[previousIndex]) {
                    return 0;
                }
                // "backDst exists". [戻り先]が指定されているかチェック
                backDst = stack[previousIndex][Router.BACK_DESTINATION_URL];
                if ((null == backDst)) {
                    return 0;
                }
                fragment = Backbone.history.getFragment(backDst);
                // 初期ページ
                if ("" === fragment) {
                    return historyActiveIndex;
                }
                // rootContext から path を逆引き
                context = _.find(Router.s_rootContexts, function (ctx) {
                    return ctx.regexp.test(fragment);
                });
                if (null == context) {
                    console.warn(TAG + "back destination is not registered. back-dst: " + backDst);
                    return 0;
                }
                // dataUrl を元に jQM History を検索
                jqmDataUrl = Router.pathToJqmDataUrl(context.page);
                for (i = historyActiveIndex, distance = 0; 0 <= i; i--, distance++) {
                    if (jqmDataUrl === stack[i].pageUrl) {
                        break;
                    }
                }
                if (i < 0) {
                    console.warn(TAG + "back destination does not exist in history. back-dst: " + backDst);
                    return 0;
                }
                return distance;
            };
            /**
             * @en Start sub flow. <br>
             *     Attach SubFlowParam to jqm history stack object.
             *
             * @ja Sub Flow の開始 <br>
             *     SubFlowParam を jqm history stack にアタッチ
             *
             * @param subFlowParam
             *  - `en` Sub Flow parameter.
             *  - `ja` Sub Flow パラメータ
             */
            Router.startSubFlow = function (subFlowParam) {
                var active = Router._getJqmHistory().getActive();
                var param = subFlowParam;
                if (subFlowParam.destBase) {
                    var distance = 0;
                    var fragment_2 = Backbone.history.getFragment(subFlowParam.destBase);
                    var context = _.find(Router.s_rootContexts, function (ctx) {
                        return ctx.regexp.test(fragment_2);
                    });
                    if (null == context) {
                        console.warn(TAG + "base destination is not registered. destBase: " + subFlowParam.destBase);
                        return;
                    }
                    // dataUrl を元に jQM History を検索
                    var jqmDataUrl = Router.pathToJqmDataUrl(context.page);
                    var stack = Router._getJqmHistory().stack;
                    for (var i = Router._getJqmHistory().activeIndex; 0 <= i; i--, distance++) {
                        if (jqmDataUrl === stack[i].pageUrl) {
                            param.additionalDistance = distance;
                            break;
                        }
                    }
                }
                else {
                    param.destBase = location.hash;
                    param.additionalDistance = 0;
                }
                active[Router.SUBFLOW_PARAM] = param;
            };
            /**
             * @en End sub flow <br>
             *     navigate and delete SubFlowParam from jqm history stack object.
             *
             * @ja Sub Flow の終了 <br>
             *     遷移と SubFlowParam を jqm history stack から削除
             *
             * @param navOptions
             *  - `en` Sub Flow parameter.
             *  - `ja` Sub Flow パラメータ
             */
            Router.finishSubFlow = function (options) {
                var navOptions = $.extend(true, {}, options);
                var baseInfo = Router.detectSubFlowBaseInfo();
                // "end" 時に更新されたものを上書き
                var param = $.extend({}, baseInfo.subFlowParam, navOptions.subFlow);
                var distance = baseInfo.distance;
                var stack = baseInfo.stack;
                var retry = 0;
                var NAVIGATE_INTERVAL = 100;
                var MAX_RETRY_COUNT = 10;
                // hash 変更が完了した後に navigate を実行
                var _navigate = function () {
                    if (MAX_RETRY_COUNT <= retry) {
                        console.error(TAG + "reached navigate max retry count.");
                        Router.s_lastNavigateInfo = {};
                    }
                    else if (param.destBase !== location.hash) {
                        retry++;
                        setTimeout(_navigate, NAVIGATE_INTERVAL);
                    }
                    else {
                        Router.s_lastNavigateInfo.inNavigation = false;
                        Router.registerPageStack(param.destStacks, true, navOptions);
                    }
                };
                if (stack) {
                    delete stack[Router.SUBFLOW_PARAM];
                    Router._getJqmHistory().activeIndex -= distance;
                    Router._getJqmHistory().clearForward();
                    if (param.destStacks) {
                        Router.stop();
                        // iOS 環境において index.html より history.go(0) が発生するとリロードが発生する.
                        // その後画面遷移を控えるため, 履歴を戻る必要があるときにのみ限定する.
                        if (0 !== distance) {
                            history.go(-distance);
                        }
                        delete navOptions.subFlow; // subFlow プロパティの破棄
                        setTimeout(_navigate, 0);
                    }
                    else {
                        Router.s_lastNavigateInfo.positiveNavigate = false;
                        history.go(-distance);
                    }
                }
                else {
                    console.warn(TAG + "subFlow begin status does not exist in history.");
                    Router.s_lastNavigateInfo = {};
                }
            };
            /**
             * @en Return destination Sub Flow information. (const function)
             * @ja Sub Flow 情報を返却 (この関数は Router の状態を変更しない。)
             *
             * @returns
             *  - `en` sub flow info.
             *  - `ja` Sub Flow 情報.
             */
            Router.detectSubFlowBaseInfo = function () {
                var stack = Router._getJqmHistory().stack;
                var historyActiveIndex = Router._getJqmHistory().activeIndex;
                var i, distance;
                var param = {};
                var target;
                for (i = historyActiveIndex, distance = 0; 0 <= i; i--, distance++) {
                    if (stack[i][Router.SUBFLOW_PARAM]) {
                        target = stack[i];
                        param = stack[i][Router.SUBFLOW_PARAM];
                        break;
                    }
                }
                if (null == param.additionalDistance) {
                    param.additionalDistance = 0;
                }
                return {
                    stack: target,
                    subFlowParam: param,
                    distance: distance + param.additionalDistance,
                    isCurrent: (function () {
                        if (target && 0 === distance) {
                            return true;
                        }
                        else {
                            return false;
                        }
                    })(),
                };
            };
            /**
             * @en Convert path to jQM dataUrl.
             * @ja パスを jQM dataUrl に変換
             *
             * @returns jQM data url.
             */
            Router.pathToJqmDataUrl = function (path) {
                var url = Framework.toUrl(path);
                var dataUrl = $.mobile.path.convertUrlToDataUrl(url);
                return dataUrl;
            };
            /**
             * @en Update jQM urlHistory by window.history object. <br>
             *     To be natural browsing history behavior, application needs to update jQM urlHistory <br>
             *     when clicking back or next button of browser. (imperfection for decideDirection())
             *
             * @ja ブラウザの履歴に基づき jQM urlHistory を更新 <br>
             *     [戻る]/[進む]が押下された後、ページ遷移されるとき、jQM urlHistory を更新する。(decideDirection() により不完全)
             */
            Router.treatUrlHistory = function () {
                if (Router.s_lastNavigateInfo.positiveNavigate || history.length < Router._getJqmHistory().stack.length) {
                    Router._getJqmHistory().clearForward();
                }
            };
            Router.s_initOptions = {};
            Router.s_router = null;
            Router.s_rootContexts = {};
            Router.s_lastNavigateInfo = {};
            Router.s_lastClickedTime = null;
            Router.s_lastIntent = {};
            Router.s_firstChangePage = true;
            Router.s_loadUrl = null;
            Router.s_back = null;
            Router.DELAY_TIME = 200; // TBD: 暫定値
            Router.DATA_BACK_DESTINATION = "data-back-dst";
            Router.DATA_NO_HASH_CHANGE = "data-no-hash-change";
            Router.DATA_NO_VCLICK_HANDLE = "data-no-vclick-handle";
            Router.BACK_DESTINATION_URL = "backDstUrl";
            Router.SUBFLOW_PARAM = "subFlowParam";
            Router.s_defaultInitOptions = {
                anchorVclick: true,
                firstPageTransition: false,
            };
            Router.s_defaultNavigateOptions = {
                trigger: true,
                replace: false,
                intent: null,
            };
            return Router;
        }());
        Framework.Router = Router;
    })(Framework = CDP.Framework || (CDP.Framework = {}));
})(CDP || (CDP = {}));
var CDP;
(function (CDP) {
    var Framework;
    (function (Framework) {
        var Promise = CDP.Promise;
        var TAG = "[CDP.Framework.Page] ";
        /**
         * @en Base class of all page unit.
         * @ja すべてのページの基本となる既定クラス
         */
        var Page = /** @class */ (function () {
            //////////////////////////////////////////
            // public methods
            /**
             * @param _url
             *  - `en` page's URL
             *  - `ja` ページ URL
             * @param _id
             *  - `en` page's ID
             *  - `ja` ページ ID
             * @param options
             *  - `en` construction options
             *  - `ja` 構築オプション
             */
            function Page(_url, _id, options) {
                this._url = _url;
                this._id = _id;
                this.setup(options);
            }
            Object.defineProperty(Page.prototype, "active", {
                //////////////////////////////////////////
                // public accessor
                get: function () { return !!this._$page && this._$page.hasClass("ui-page-active"); },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Page.prototype, "url", {
                get: function () { return this._url; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Page.prototype, "id", {
                get: function () { return this._id; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Page.prototype, "$page", {
                get: function () { return this._$page; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Page.prototype, "$header", {
                get: function () { return this._$header; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Page.prototype, "$footer", {
                get: function () { return this._$footer; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Page.prototype, "intent", {
                get: function () { return this._intent; },
                set: function (newIntent) { this._intent = newIntent; this._intent._update = true; },
                enumerable: true,
                configurable: true
            });
            //////////////////////////////////////////
            // Implemtents: IPage
            // Orientation の変更を受信
            Page.prototype.onOrientationChanged = function (newOrientation) {
                if (this._owner) {
                    this._owner.onOrientationChanged(newOrientation);
                }
            };
            // H/W Back Button ハンドラ
            Page.prototype.onHardwareBackButton = function (event) {
                if (this._owner) {
                    return this._owner.onHardwareBackButton(event);
                }
                else {
                    return false;
                }
            };
            // Router "before route change" ハンドラ
            Page.prototype.onBeforeRouteChange = function () {
                if (this._owner) {
                    return this._owner.onBeforeRouteChange();
                }
                else {
                    return Promise.resolve();
                }
            };
            // 汎用コマンドを受信
            Page.prototype.onCommand = function (event, kind) {
                if (this._owner) {
                    return this._owner.onCommand(event, kind);
                }
                else {
                    return false;
                }
            };
            // 最初の OnPageInit() のときにのみコールされる
            Page.prototype.onInitialize = function (event) {
                if (this._owner) {
                    this._owner.onInitialize(event);
                }
            };
            // jQM event: "pagebeforecreate" に対応
            Page.prototype.onPageBeforeCreate = function (event) {
                if (this._owner) {
                    this._owner.onPageBeforeCreate(event);
                }
            };
            // jQM event: "pagecreate" (旧:"pageinit") に対応
            Page.prototype.onPageInit = function (event) {
                if (this._owner) {
                    this._owner.onPageInit(event);
                }
            };
            // jQM event: "pagebeforeshow" に対応
            Page.prototype.onPageBeforeShow = function (event, data) {
                if (this._owner) {
                    this._owner.onPageBeforeShow(event, data);
                }
            };
            // jQM event: "pagecontainershow" (旧:"pageshow") に対応
            Page.prototype.onPageShow = function (event, data) {
                if (this._owner) {
                    this._owner.onPageShow(event, data);
                }
            };
            // jQM event: "pagebeforehide" に対応
            Page.prototype.onPageBeforeHide = function (event, data) {
                if (this._owner) {
                    this._owner.onPageBeforeHide(event, data);
                }
            };
            // jQM event: "pagecontainerhide" (旧:"pagehide") に対応
            Page.prototype.onPageHide = function (event, data) {
                if (this._owner) {
                    this._owner.onPageHide(event, data);
                }
            };
            // jQM event: "pageremove" に対応
            Page.prototype.onPageRemove = function (event) {
                if (this._owner) {
                    this._owner.onPageRemove(event);
                }
            };
            //////////////////////////////////////////
            // private methods
            // mixin 用疑似コンストラクタ
            Page.prototype.setup = function (options) {
                var _this = this;
                // mixin destination 用の再初期化
                this._initialized = false;
                this._intent = null;
                // イベントバインド
                var selector = "#" + this._id;
                $(document)
                    .off("pagebeforecreate", selector)
                    .on("pagebeforecreate", selector, function (event) {
                    _this._$page = $(selector).first();
                    _this._$header = _this._$page.children(":jqmData(role=header)").first();
                    _this._$footer = _this._$page.children(":jqmData(role=footer)").first();
                    _this._$page
                        .on("pagecreate", function (ev) {
                        _this.pageInit(ev);
                    })
                        .on("pagebeforeshow", function (ev, data) {
                        _this.pageBeforeShow(ev, data);
                    })
                        .on("pageshow", function (ev, data) {
                        _this.pageShow(ev, data);
                    })
                        .on("pagebeforehide", function (ev, data) {
                        _this.pageBeforeHide(ev, data);
                    })
                        .on("pagehide", function (ev, data) {
                        _this.pageHide(ev, data);
                    })
                        .on("pageremove", function (ev) {
                        _this.pageRemove(ev);
                    });
                    _this.pageBeforeCreate(event);
                });
                options = options || {};
                // owner 設定
                this._owner = options.owner;
                // intent 設定
                this._keepIntent = options.keepIntent;
                // Router へ登録
                if (null == options.route) {
                    options.route = this._id;
                }
                Framework.Router.register(options.route, this._url, options.top, options.callback);
            };
            // PageTransitionDirection の判定
            Page.prototype.getDirection = function () {
                var activeIndex = Framework.Router._getJqmHistory().activeIndex;
                var prevIndex = Framework.Router._getJqmHistory().previousIndex;
                if (null == activeIndex || null == prevIndex) {
                    return "unknown";
                }
                else if (prevIndex === activeIndex) {
                    return "same";
                }
                else if (activeIndex < prevIndex) {
                    return "back";
                }
                else {
                    return "forward";
                }
            };
            Page.prototype.pageBeforeCreate = function (event) {
                this.onPageBeforeCreate(event);
            };
            Page.prototype.pageInit = function (event) {
                if (!this._initialized) {
                    this.onInitialize(event);
                    this._initialized = true;
                }
                this.onPageInit(event);
            };
            Page.prototype.pageBeforeShow = function (event, data) {
                Framework._setActivePage(this);
                this._intent = Framework.Router._popIntent();
                this.onPageBeforeShow(event, $.extend(data, { direction: this.getDirection() }));
            };
            Page.prototype.pageShow = function (event, data) {
                this.onPageShow(event, $.extend(data, { direction: this.getDirection() }));
            };
            Page.prototype.pageBeforeHide = function (event, data) {
                this.onPageBeforeHide(event, $.extend(data, { direction: this.getDirection() }));
                if (null != this._intent && (this._keepIntent || this._intent._update)) {
                    delete this._intent._update;
                    Framework.Router._pushIntent(this._intent);
                }
                else if (Framework.Router.fromHashChanged() && Framework.Router.isInSubFlow()) {
                    Framework.Router._pushIntent(this._intent);
                }
                this._intent = null;
                Framework._setActivePage(null);
            };
            Page.prototype.pageHide = function (event, data) {
                this.onPageHide(event, $.extend(data, { direction: this.getDirection() }));
            };
            Page.prototype.pageRemove = function (event) {
                this.onPageRemove(event);
                this._$page.off();
                this._$page = null;
                this._$header.off();
                this._$header = null;
                this._$footer.off();
                this._$footer = null;
            };
            return Page;
        }());
        Framework.Page = Page;
        ///////////////////////////////////////////////////////////////////////
        // closure methods
        /*
         * jQM1.4 にて、duplicate とされている "pageshow", "pagehide" はまだ据え置き。
         * http://jquerymobile.com/upgrade-guide/1.4/#navigation
         *
         * 特定ページに対して、イベントを取得できないため。
         * Forum でも議論中なので、決着がついてから対応を考慮する。
         * https://github.com/jquery/jquery-mobile/issues/6865
         *
         * [参考] よくわかるイベントチートシート
         *  - 本家(1.4+) http://jqmtricks.wordpress.com/2014/03/26/jquery-mobile-page-events/
         *  - 有志(~1.3) http://dev.screw-axis.com/doc/jquery_mobile/resources/cheatsheet/
         *
         * 以下は不完全な対応予定コード
         *
         * 特に振る舞いが変わるのは、"pagehide" で、検討されている仕様では
         * DOM を特定できないため、onPageHide() をインスタンスに伝えることができない。
         *
         * 仕様が変わらない場合は
         * onPageBeforeHide() の中で post して onPageHide() を発行する予定(過去互換保証)
         *
         * 2015/03/25 追記:
         * 仕様は確定. jQM1.6 より削除される予定
         *  jQM1.4 相当の参考実装 plugin があり、この実装相当の機能を cdp.framework.jqm で抱える予定
         *  https://github.com/arschmitz/jquery-mobile-onpage
         *
         * 公式見解
         * https://github.com/jquery/jquery-mobile/issues/7283#issuecomment-40746622
         */
        /*
            // bind "pagecontainershow", and "pagecontainerhide".
            (() => {
                let $body: any = $("body");
                $(document)
                    .on("pagecontainershow", (event: JQuery.Event, data: ShowEventData) => {
                        if (0 < data.prevPage.length) {
                            // "pagecontainershow" は "pagecontainerhide" よりも遅いので、やはり DOM にはアクセスできない
                            let $prevpage = $("#" + data.prevPage[0].id);
                            $prevpage.trigger("_pagehide", data);
                        }
                        // 以下の対応で、"pagecontainershow" は "pageshow" 同等の振る舞いにすることが可能
                        let pageId = $body.pagecontainer("getActivePage").prop("id");
                        let $page = $("#" + pageId);
                        $page.trigger("_pageshow", data);
                    })
                    .on("pagecontainerhide", (event: JQuery.Event, data: HideEventData) => {
                        // "pagecontainerhide" を受けたときは既に DOM から消えているため、page は特定できない。
                        //let pageId = $body.pagecontainer('getActivePage').prop("id");
                        //let $page = $("#" + pageId);
                        //$page.trigger("_pagehide", data);
                    })
                    .on("pagecontainertransition", (event: JQuery.Event, data: any) => {
                        // "pagecontainertransition" には toPage にしかアクセスはできない
                    })
                ;
            })();
        */
    })(Framework = CDP.Framework || (CDP.Framework = {}));
})(CDP || (CDP = {}));

return CDP.Framework; }));

}.call(window));

/***/ }),
/* 3 */
/***/ (function(module, exports) {

module.exports = __WEBPACK_EXTERNAL_MODULE_3__;

/***/ }),
/* 4 */
/***/ (function(module, exports) {

module.exports = __WEBPACK_EXTERNAL_MODULE_4__;

/***/ }),
/* 5 */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/*** IMPORTS FROM imports-loader ***/
(function() {

/*!
 * jQuery Migrate - v3.0.1-hotfix - 2017-01-11
 * Copyright jQuery Foundation and other contributors
 */
; (function (factory) {
    if (true) {
        // AMD. Register as an anonymous module.
        !(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(0)], __WEBPACK_AMD_DEFINE_RESULT__ = function ($) {
            return factory($, window);
        }.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
                __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));
    } else if (typeof module === "object" && module.exports) {
        // Node/CommonJS
        // eslint-disable-next-line no-undef
        module.exports = factory(require("jquery"), window);
    } else {
        // Browser globals
        factory(jQuery, window);
    }
})(function (jQuery, window) {
    "use strict";

    jQuery.migrateVersion = "3.0.1-hotfix"; // with hotfix

    /* exported migrateWarn, migrateWarnFunc, migrateWarnProp */

    (function () {

        // Support: IE9 only
        // IE9 only creates console object when dev tools are first opened
        // Also, avoid Function#bind here to simplify PhantomJS usage
        var log = window.console && window.console.log &&
            function () {
                window.console.log.apply(window.console, arguments);
            },
            rbadVersions = /^[12]\./;

        if (!log) {
            return;
        }

        // Need jQuery 3.0.0+ and no older Migrate loaded
        if (!jQuery || rbadVersions.test(jQuery.fn.jquery)) {
            log("JQMIGRATE: jQuery 3.0.0+ REQUIRED");
        }
        if (jQuery.migrateWarnings) {
            log("JQMIGRATE: Migrate plugin loaded multiple times");
        }

        // Show a message on the console so devs know we're active
        if (!jQuery.migrateMute) {
            log("JQMIGRATE: Migrate is installed" +
                (jQuery.migrateMute ? "" : " with logging active") +
                ", version " + jQuery.migrateVersion);
        }
    })();

    var warnedAbout = {};

    // List of warnings already given; public read only
    jQuery.migrateWarnings = [];

    // Set to false to disable traces that appear with warnings
    if (jQuery.migrateTrace === undefined) {
        jQuery.migrateTrace = true;
    }

    // Forget any warnings we've already given; public
    jQuery.migrateReset = function () {
        warnedAbout = {};
        jQuery.migrateWarnings.length = 0;
    };

    function migrateWarn(msg) {
        var console = window.console;
        if (!warnedAbout[msg]) {
            warnedAbout[msg] = true;
            jQuery.migrateWarnings.push(msg);
            if (console && console.warn && !jQuery.migrateMute) {
                console.warn("JQMIGRATE: " + msg);
                if (jQuery.migrateTrace && console.trace) {
                    console.trace();
                }
            }
        }
    }

    function migrateWarnProp(obj, prop, value, msg) {
        Object.defineProperty(obj, prop, {
            configurable: true,
            enumerable: true,
            get: function () {
                migrateWarn(msg);
                return value;
            },
            set: function (newValue) {
                migrateWarn(msg);
                value = newValue;
            }
        });
    }

    function migrateWarnFunc(obj, prop, newFunc, msg) {
        obj[prop] = function () {
            migrateWarn(msg);
            return newFunc.apply(this, arguments);
        };
    }

    if (window.document.compatMode === "BackCompat") {
        // JQuery has never supported or tested Quirks Mode
        migrateWarn("jQuery is not compatible with Quirks Mode");
    }


    var oldInit = jQuery.fn.init,
        oldIsNumeric = jQuery.isNumeric,
        oldFind = jQuery.find,
        rattrHashTest = /\[(\s*[-\w]+\s*)([~|^$*]?=)\s*([-\w#]*?#[-\w#]*)\s*\]/,
        rattrHashGlob = /\[(\s*[-\w]+\s*)([~|^$*]?=)\s*([-\w#]*?#[-\w#]*)\s*\]/g;

    jQuery.fn.init = function (arg1) {
        var args = Array.prototype.slice.call(arguments);

        if (typeof arg1 === "string" && arg1 === "#") {
            // JQuery( "#" ) is a bogus ID selector, but it returned an empty set before jQuery 3.0
            migrateWarn("jQuery( '#' ) is not a valid selector");
            args[0] = [];
        }

        return oldInit.apply(this, args);
    };
    jQuery.fn.init.prototype = jQuery.fn;

    jQuery.find = function (selector) {
        var args = Array.prototype.slice.call(arguments);

        // Support: PhantomJS 1.x
        // String#match fails to match when used with a //g RegExp, only on some strings
        if (typeof selector === "string" && rattrHashTest.test(selector)) {
            // The nonstandard and undocumented unquoted-hash was removed in jQuery 1.12.0
            // First see if qS thinks it's a valid selector, if so avoid a false positive
            try {
                window.document.querySelector(selector);
            } catch (err1) {
                // Didn't *look* valid to qSA, warn and try quoting what we think is the value
                selector = selector.replace(rattrHashGlob, function (_, attr, op, value) {
                    return "[" + attr + op + "\"" + value + "\"]";
                });

                // If the regexp *may* have created an invalid selector, don't update it
                // Note that there may be false alarms if selector uses jQuery extensions
                try {
                    window.document.querySelector(selector);
                    migrateWarn("Attribute selector with '#' must be quoted: " + args[0]);
                    args[0] = selector;
                } catch (err2) {
                    migrateWarn("Attribute selector with '#' was not fixed: " + args[0]);
                }
            }
        }

        return oldFind.apply(this, args);
    };

    // Copy properties attached to original jQuery.find method (e.g. .attr, .isXML)
    var findProp;
    for (findProp in oldFind) {
        if (Object.prototype.hasOwnProperty.call(oldFind, findProp)) {
            jQuery.find[findProp] = oldFind[findProp];
        }
    }

    // The number of elements contained in the matched element set
    jQuery.fn.size = function () {
        migrateWarn("jQuery.fn.size() is deprecated and removed; use the .length property");
        return this.length;
    };

    jQuery.parseJSON = function () {
        migrateWarn("jQuery.parseJSON is deprecated; use JSON.parse");
        return JSON.parse.apply(null, arguments);
    };

    jQuery.isNumeric = function (val) {
        // The jQuery 2.2.3 implementation of isNumeric
        function isNumeric2(obj) {
            var realStringObj = obj && obj.toString();
            return !jQuery.isArray(obj) && (realStringObj - parseFloat(realStringObj) + 1) >= 0;
        }

        var newValue = oldIsNumeric(val),
            oldValue = isNumeric2(val);

        if (newValue !== oldValue) {
            migrateWarn("jQuery.isNumeric() should not be called on constructed objects");
        }

        return oldValue;
    };

    migrateWarnFunc(jQuery, "unique", jQuery.uniqueSort,
        "jQuery.unique is deprecated; use jQuery.uniqueSort");

    // Now jQuery.expr.pseudos is the standard incantation
    migrateWarnProp(jQuery.expr, "filters", jQuery.expr.pseudos,
        "jQuery.expr.filters is deprecated; use jQuery.expr.pseudos");
    migrateWarnProp(jQuery.expr, ":", jQuery.expr.pseudos,
        "jQuery.expr[':'] is deprecated; use jQuery.expr.pseudos");


    var oldAjax = jQuery.ajax;

    jQuery.ajax = function () {
        var jQXHR = oldAjax.apply(this, arguments);

        // Be sure we got a jQXHR (e.g., not sync)
        if (jQXHR.promise) {
            migrateWarnFunc(jQXHR, "success", jQXHR.done,
                "jQXHR.success is deprecated and removed");
            migrateWarnFunc(jQXHR, "error", jQXHR.fail,
                "jQXHR.error is deprecated and removed");
            migrateWarnFunc(jQXHR, "complete", jQXHR.always,
                "jQXHR.complete is deprecated and removed");
        }

        return jQXHR;
    };


    var oldRemoveAttr = jQuery.fn.removeAttr,
        oldToggleClass = jQuery.fn.toggleClass,
        rmatchNonSpace = /\S+/g;

    jQuery.fn.removeAttr = function (name) {
        var self = this;

        jQuery.each(name.match(rmatchNonSpace), function (i, attr) {
            if (jQuery.expr.match.bool.test(attr)) {
                migrateWarn("jQuery.fn.removeAttr no longer sets boolean properties: " + attr);
                self.prop(attr, false);
            }
        });

        return oldRemoveAttr.apply(this, arguments);
    };

    jQuery.fn.toggleClass = function (state) {
        // Only deprecating no-args or single boolean arg
        if (state !== undefined && typeof state !== "boolean") {
            return oldToggleClass.apply(this, arguments);
        }

        migrateWarn("jQuery.fn.toggleClass( boolean ) is deprecated");

        // Toggle entire class name of each element
        return this.each(function () {
            var className = this.getAttribute && this.getAttribute("class") || "";

            if (className) {
                jQuery.data(this, "__className__", className);
            }

            // If the element has a class name or if we're passed `false`,
            // then remove the whole classname (if there was one, the above saved it).
            // Otherwise bring back whatever was previously saved (if anything),
            // falling back to the empty string if nothing was stored.
            if (this.setAttribute) {
                this.setAttribute("class",
                    className || state === false ?
                    "" :
                    jQuery.data(this, "__className__") || ""
                );
            }
        });
    };


    var internalSwapCall = false;

    // If this version of jQuery has .swap(), don't false-alarm on internal uses
    if (jQuery.swap) {
        jQuery.each(["height", "width", "reliableMarginRight"], function (_, name) {
            var oldHook = jQuery.cssHooks[name] && jQuery.cssHooks[name].get;

            if (oldHook) {
                jQuery.cssHooks[name].get = function () {
                    var ret;

                    internalSwapCall = true;
                    ret = oldHook.apply(this, arguments);
                    internalSwapCall = false;
                    return ret;
                };
            }
        });
    }

    jQuery.swap = function (elem, options, callback, args) {
        var ret, name,
            old = {};

        if (!internalSwapCall) {
            migrateWarn("jQuery.swap() is undocumented and deprecated");
        }

        // Remember the old values, and insert the new ones
        for (name in options) {
            old[name] = elem.style[name];
            elem.style[name] = options[name];
        }

        ret = callback.apply(elem, args || []);

        // Revert the old values
        for (name in options) {
            elem.style[name] = old[name];
        }

        return ret;
    };

    var oldData = jQuery.data;

    jQuery.data = function (elem, name, value) {
        var curData;

        // Name can be an object, and each entry in the object is meant to be set as data
        if (name && typeof name === "object" && arguments.length === 2) {
            curData = jQuery.hasData(elem) && oldData.call(this, elem);
            var sameKeys = {};
            for (var key in name) {
                if (key !== jQuery.camelCase(key)) {
                    migrateWarn("jQuery.data() always sets/gets camelCased names: " + key);
                    curData[key] = name[key];
                } else {
                    sameKeys[key] = name[key];
                }
            }

            oldData.call(this, elem, sameKeys);

            return name;
        }

        // If the name is transformed, look for the un-transformed name in the data object
        if (name && typeof name === "string" && name !== jQuery.camelCase(name)) {
            curData = jQuery.hasData(elem) && oldData.call(this, elem);
            if (curData && name in curData) {
                migrateWarn("jQuery.data() always sets/gets camelCased names: " + name);
                if (arguments.length > 2) {
                    curData[name] = value;
                }
                return curData[name];
            }
        }

        return oldData.apply(this, arguments);
    };

    var oldTweenRun = jQuery.Tween.prototype.run;

    jQuery.Tween.prototype.run = function () {
        if (jQuery.easing[this.easing].length > 1) {
            migrateWarn(
                "easing function " +
                "\"jQuery.easing." + this.easing.toString() +
                "\" should use only first argument"
            );

            var oldEasing = jQuery.easing[this.easing];
            jQuery.easing[this.easing] = function (percent) {
                return oldEasing.call(jQuery.easing, percent, percent, 0, 1, 1);
            }.bind(this);
        }

        oldTweenRun.apply(this, arguments);
    };

    jQuery.fx.interval = jQuery.fx.interval || 13;

    // Support: IE9, Android <=4.4
    // Avoid false positives on browsers that lack rAF
    if (window.requestAnimationFrame) {
        migrateWarnProp(jQuery.fx, "interval", jQuery.fx.interval,
            "jQuery.fx.interval is deprecated");
    }

    var oldLoad = jQuery.fn.load,
        oldEventAdd = jQuery.event.add,
        originalFix = jQuery.event.fix;

    jQuery.event.props = [];
    jQuery.event.fixHooks = {};

    migrateWarnProp(jQuery.event.props, "concat", jQuery.event.props.concat,
        "jQuery.event.props.concat() is deprecated and removed");

    jQuery.event.fix = function (originalEvent) {
        var event,
            type = originalEvent.type,
            fixHook = this.fixHooks[type],
            props = jQuery.event.props;

        if (props.length) {
            migrateWarn("jQuery.event.props are deprecated and removed: " + props.join());
            while (props.length) {
                jQuery.event.addProp(props.pop());
            }
        }

        if (fixHook && !fixHook._migrated_) {
            fixHook._migrated_ = true;
            migrateWarn("jQuery.event.fixHooks are deprecated and removed: " + type);
            if ((props = fixHook.props) && props.length) {
                while (props.length) {
                    jQuery.event.addProp(props.pop());
                }
            }
        }

        event = originalFix.call(this, originalEvent);

        return fixHook && fixHook.filter ? fixHook.filter(event, originalEvent) : event;
    };

    jQuery.event.add = function (elem, types) {
        // This misses the multiple-types case but that seems awfully rare
        if (elem === window && types === "load" && window.document.readyState === "complete") {
            migrateWarn("jQuery(window).on('load'...) called after load event occurred");
        }
        return oldEventAdd.apply(this, arguments);
    };

    jQuery.each(["load", "unload", "error"], function (_, name) {

        jQuery.fn[name] = function () {
            var args = Array.prototype.slice.call(arguments, 0);

            // If this is an ajax load() the first arg should be the string URL;
            // technically this could also be the "Anything" arg of the event .load()
            // which just goes to show why this dumb signature has been deprecated!
            // jQuery custom builds that exclude the Ajax module justifiably die here.
            if (name === "load" && typeof args[0] === "string") {
                return oldLoad.apply(this, args);
            }

            migrateWarn("jQuery.fn." + name + "() is deprecated");

            args.splice(0, 0, name);
            if (arguments.length) {
                return this.on.apply(this, args);
            }

            // Use .triggerHandler here because:
            // - load and unload events don't need to bubble, only applied to window or image
            // - error event should not bubble to window, although it does pre-1.7
            // See http://bugs.jquery.com/ticket/11820
            this.triggerHandler.apply(this, args);
            return this;
        };

    });

    // Trigger "ready" event only once, on document ready
    jQuery(function () {
        jQuery(window.document).triggerHandler("ready");
    });

    jQuery.event.special.ready = {
        setup: function () {
            if (this === window.document) {
                migrateWarn("'ready' event is deprecated");
            }
        }
    };

    jQuery.fn.extend({
        bind: function (types, data, fn) {
            migrateWarn("jQuery.fn.bind() is deprecated");
            return this.on(types, null, data, fn);
        },
        unbind: function (types, fn) {
            migrateWarn("jQuery.fn.unbind() is deprecated");
            return this.off(types, null, fn);
        },
        delegate: function (selector, types, data, fn) {
            migrateWarn("jQuery.fn.delegate() is deprecated");
            return this.on(types, selector, data, fn);
        },
        undelegate: function (selector, types, fn) {
            migrateWarn("jQuery.fn.undelegate() is deprecated");
            return arguments.length === 1 ?
                this.off(selector, "**") :
                this.off(types, selector || "**", fn);
        }
    });


    var oldOffset = jQuery.fn.offset;

    jQuery.fn.offset = function () {
        var docElem,
            elem = this[0],
            origin = { top: 0, left: 0 };

        if (!elem || !elem.nodeType) {
            migrateWarn("jQuery.fn.offset() requires a valid DOM element");
            return origin;
        }

        docElem = (elem.ownerDocument || window.document).documentElement;
        if (!jQuery.contains(docElem, elem)) {
            migrateWarn("jQuery.fn.offset() requires an element connected to a document");
            return origin;
        }

        return oldOffset.apply(this, arguments);
    };


    var oldParam = jQuery.param;

    jQuery.param = function (data, traditional) {
        var ajaxTraditional = jQuery.ajaxSettings && jQuery.ajaxSettings.traditional;

        if (traditional === undefined && ajaxTraditional) {
            migrateWarn("jQuery.param() no longer uses jQuery.ajaxSettings.traditional");
            traditional = ajaxTraditional;
        }

        return oldParam.call(this, data, traditional);
    };

    var oldSelf = jQuery.fn.andSelf || jQuery.fn.addBack;

    jQuery.fn.andSelf = function () {
        migrateWarn("jQuery.fn.andSelf() is deprecated and removed, use jQuery.fn.addBack()");
        return oldSelf.apply(this, arguments);
    };


    var oldDeferred = jQuery.Deferred,
        tuples = [
            // Action, add listener, callbacks, .then handlers, final state
            ["resolve", "done", jQuery.Callbacks("once memory"),
                jQuery.Callbacks("once memory"), "resolved"],
            ["reject", "fail", jQuery.Callbacks("once memory"),
                jQuery.Callbacks("once memory"), "rejected"],
            ["notify", "progress", jQuery.Callbacks("memory"),
                jQuery.Callbacks("memory")]
        ];

    jQuery.Deferred = function (func) {
        var deferred = oldDeferred(),
            promise = deferred.promise();

        deferred.pipe = promise.pipe = function ( /* fnDone, fnFail, fnProgress */) {
            var fns = arguments;

            migrateWarn("deferred.pipe() is deprecated");

            return jQuery.Deferred(function (newDefer) {
                jQuery.each(tuples, function (i, tuple) {
                    var fn = jQuery.isFunction(fns[i]) && fns[i];

                    // Deferred.done(function() { bind to newDefer or newDefer.resolve })
                    // deferred.fail(function() { bind to newDefer or newDefer.reject })
                    // deferred.progress(function() { bind to newDefer or newDefer.notify })
                    deferred[tuple[1]](function () {
                        var returned = fn && fn.apply(this, arguments);
                        if (returned && jQuery.isFunction(returned.promise)) {
                            returned.promise()
                                .done(newDefer.resolve)
                                .fail(newDefer.reject)
                                .progress(newDefer.notify);
                        } else {
                            newDefer[tuple[0] + "With"](
                                this === promise ? newDefer.promise() : this,
                                fn ? [returned] : arguments
                            );
                        }
                    });
                });
                fns = null;
            }).promise();

        };

        if (func) {
            func.call(deferred, deferred);
        }

        return deferred;
    };


    return jQuery;
});

}.call(window));

/***/ })
/******/ ]);
});
/*!
 * cdp.tools.js 2.1.0
 *
 * Date: 2017-11-06T05:36:54.176Z
 */
(function (root, factory) { if (typeof define === "function" && define.amd) { define("cdp.tools",["cdp.core", "cdp.promise"], function () { return factory(root.CDP || (root.CDP = {}), root.jQuery || root.$); }); } else { factory(root.CDP || (root.CDP = {}), root.jQuery || root.$); } }(((this || 0).self || global), function (CDP, $) { CDP.Tools = CDP.Tools || {};
var CDP;
(function (CDP) {
    /**
     * @enum  RESULT_CODE_BASE
     * @brief リザルトコードのオフセット値
     */
    var RESULT_CODE_BASE;
    (function (RESULT_CODE_BASE) {
        RESULT_CODE_BASE[RESULT_CODE_BASE["CDP_TOOLS_DECLARERATION"] = 0] = "CDP_TOOLS_DECLARERATION";
        RESULT_CODE_BASE[RESULT_CODE_BASE["CDP_TOOLS"] = 4 * CDP._MODULE_RESULT_CODE_RANGE_CDP] = "CDP_TOOLS";
    })(RESULT_CODE_BASE = CDP.RESULT_CODE_BASE || (CDP.RESULT_CODE_BASE = {}));
    ///////////////////////////////////////////////////////////////////////
    // module error declaration:
    var FUNCTION_CODE_RANGE = 10;
    /**
     * @enum  LOCAL_CODE_BASE
     * @brief cdp.tools 内のローカルコードオフセット値
     */
    var LOCAL_CODE_BASE;
    (function (LOCAL_CODE_BASE) {
        LOCAL_CODE_BASE[LOCAL_CODE_BASE["FUNCTIONS"] = 0] = "FUNCTIONS";
        LOCAL_CODE_BASE[LOCAL_CODE_BASE["BLOB"] = 1 * FUNCTION_CODE_RANGE] = "BLOB";
    })(LOCAL_CODE_BASE || (LOCAL_CODE_BASE = {}));
    /* tslint:disable:max-line-length */
    /**
     * @enum  RESULT_CODE
     * @brief cdp.tools のエラーコード定義
     */
    var RESULT_CODE;
    (function (RESULT_CODE) {
        RESULT_CODE[RESULT_CODE["ERROR_CDP_TOOLS_DECLARATION"] = 0] = "ERROR_CDP_TOOLS_DECLARATION";
        RESULT_CODE[RESULT_CODE["ERROR_CDP_TOOLS_IMAGE_LOAD_FAILED"] = CDP.DECLARE_ERROR_CODE(RESULT_CODE_BASE.CDP_TOOLS, LOCAL_CODE_BASE.FUNCTIONS + 1, "image load failed.")] = "ERROR_CDP_TOOLS_IMAGE_LOAD_FAILED";
        RESULT_CODE[RESULT_CODE["ERROR_CDP_TOOLS_INVALID_IMAGE"] = CDP.DECLARE_ERROR_CODE(RESULT_CODE_BASE.CDP_TOOLS, LOCAL_CODE_BASE.FUNCTIONS + 2, "invalid image.")] = "ERROR_CDP_TOOLS_INVALID_IMAGE";
        RESULT_CODE[RESULT_CODE["ERROR_CDP_TOOLS_FILE_READER_ERROR"] = CDP.DECLARE_ERROR_CODE(RESULT_CODE_BASE.CDP_TOOLS, LOCAL_CODE_BASE.BLOB + 1, "FileReader method failed.")] = "ERROR_CDP_TOOLS_FILE_READER_ERROR";
    })(RESULT_CODE = CDP.RESULT_CODE || (CDP.RESULT_CODE = {}));
    /* tslint:enable:max-line-length */
})(CDP || (CDP = {}));
var CDP;
(function (CDP) {
    var Tools;
    (function (Tools) {
        var Promise = CDP.Promise;
        var TAG = "[CDP.Tools.Binary] ";
        /**
         * @class Binary
         * @brief バイナリユーティリティ
         */
        var Binary = /** @class */ (function () {
            // private constructor
            function Binary() {
                // noop
            }
            /**
             * Get BlobBuilder
             *
             * @obsolete
             * @return {any} BlobBuilder
             */
            Binary.getBlobBuilder = function () {
                return CDP.global.BlobBuilder || CDP.global.WebKitBlobBuilder || CDP.global.MozBlobBuilder || CDP.global.MSBlobBuilder;
            };
            /**
             * エラー情報生成 from DOMError
             *
             * @param resultCode [in] RESULT_CODE を指定
             * @param cause      [in] 下位の DOM エラーを指定
             * @param [tag]      [in] TAG を指定
             * @param [message]  [in] メッセージを指定
             * @returns エラーオブジェクト
             */
            Binary.makeErrorInfoFromDOMError = function (resultCode, cause, tag, message) {
                var _cause;
                if (cause) {
                    _cause = {
                        name: cause.name,
                        message: cause.name,
                    };
                }
                return CDP.makeErrorInfo(resultCode, tag, message, _cause);
            };
            /**
             * Get BlobBuilder
             *
             * @obsolete
             * @return 構築済み Blob オブジェクト
             */
            Binary.newBlob = function (blobParts, options) {
                if (CDP.global.Blob) {
                    return new CDP.global.Blob(blobParts, options);
                }
                else {
                    // under Android 4.4 KitKat
                    options = options || {};
                    var blobBuilderObject = Binary.getBlobBuilder();
                    var blobBuilder = new blobBuilderObject();
                    var parts = (blobParts instanceof Array) ? blobParts[0] : blobParts;
                    blobBuilder.append(parts);
                    return blobBuilder.getBlob(options.type);
                }
            };
            /**
             * ArrayBuffer to Blob
             *
             * @param buf [in] ArrayBuffer data
             * @param mimeType [in] MimeType of data
             * @returns Blob data
             */
            Binary.arrayBufferToBlob = function (buf, mimeType) {
                return Binary.newBlob([buf], { type: mimeType });
            };
            /**
             * Base64 string to Blob
             *
             * @param base64 {string} [in] Base64 string data
             * @param mimeType {string} [in] MimeType of data
             * @return {Blob} Blob data
             */
            Binary.base64ToBlob = function (base64, mimeType) {
                return Binary.newBlob([Binary.base64ToArrayBuffer(base64)], { type: mimeType });
            };
            /**
             * data-url 形式画像から Blob オブジェクトへ変換
             *
             * @param  {String} dataUrl    [in] data url
             * @param  {String} [mimeType] [in] mime type を指定. 既定では "image/png"
             * @return {Blob} Blob インスタンス
             */
            Binary.dataUrlToBlob = function (dataUrl, mimeType) {
                if (mimeType === void 0) { mimeType = "image/png"; }
                var base64 = dataUrl.split(",")[1];
                return Binary.base64ToBlob(base64, mimeType);
            };
            /**
             * Base64 string to ArrayBuffer
             *
             * @param base64 {string} [in] Base64 string data
             * @return {ArrayBuffer} ArrayBuffer data
             */
            Binary.base64ToArrayBuffer = function (base64) {
                var bytes = window.atob(base64);
                var arrayBuffer = new ArrayBuffer(bytes.length);
                var data = new Uint8Array(arrayBuffer);
                for (var i = 0, len = bytes.length; i < len; ++i) {
                    data[i] = bytes.charCodeAt(i);
                }
                return arrayBuffer;
            };
            /**
             * Base64 string to Uint8Array
             *
             * @param base64 {string} [in] Base64 string data
             * @return {Uint8Array} Uint8Array data
             */
            Binary.base64ToUint8Array = function (encoded) {
                var bytes = window.atob(encoded);
                var data = new Uint8Array(bytes.length);
                for (var i = 0, len = bytes.length; i < len; ++i) {
                    data[i] = bytes.charCodeAt(i);
                }
                return data;
            };
            /**
             * ArrayBuffer to base64 string
             *
             * @param arrayBuffer {ArrayBuffer} [in] ArrayBuffer data
             * @return {string} base64 data
             */
            Binary.arrayBufferToBase64 = function (arrayBuffer) {
                var bytes = new Uint8Array(arrayBuffer);
                return Binary.uint8ArrayToBase64(bytes);
            };
            /**
             * Uint8Array to base64 string
             *
             * @param bytes {Uint8Array} [in] Uint8Array data
             * @return {string} base64 data
             */
            Binary.uint8ArrayToBase64 = function (bytes) {
                var data = "";
                for (var i = 0, len = bytes.byteLength; i < len; ++i) {
                    data += String.fromCharCode(bytes[i]);
                }
                return window.btoa(data);
            };
            /**
             * read Blob as ArrayBuffer
             *
             * @param  {Blob} blob [in] blob data
             * @return {CDP.IPromise<ArrayBuffer>} promise object
             */
            Binary.readBlobAsArrayBuffer = function (blob) {
                var reader = new FileReader();
                var cancel = function () { return reader.abort(); };
                return new Promise(function (resolve, reject) {
                    reader.onload = function () {
                        resolve(reader.result);
                    };
                    reader.onerror = function () {
                        reject(Binary.makeErrorInfoFromDOMError(CDP.RESULT_CODE.ERROR_CDP_TOOLS_FILE_READER_ERROR, reader.error, TAG, "FileReader.readAsArrayBuffer() failed."));
                    };
                    reader.readAsArrayBuffer(blob);
                }, cancel);
            };
            /**
             * read Blob as Uint8Array
             *
             * @param  {Blob} blob [in] blob data
             * @return {CDP.IPromise<Uint8Array>} promise object
             */
            Binary.readBlobAsUint8Array = function (blob) {
                return new Promise(function (resolve, reject, dependOn) {
                    dependOn(Binary.readBlobAsArrayBuffer(blob))
                        .then(function (result) {
                        resolve(new Uint8Array(result));
                    })
                        .catch(function (error) {
                        reject(error);
                    });
                });
            };
            /**
             * read Blob as text string
             *
             * @param  {Blob} blob [in] blob data
             * @return {CDP.IPromise<Uint8Array>} promise object
             */
            Binary.readBlobAsText = function (blob, encode) {
                if (encode === void 0) { encode = "utf-8"; }
                var reader = new FileReader();
                var cancel = function () { return reader.abort(); };
                return new Promise(function (resolve, reject) {
                    reader.onload = function () {
                        resolve(reader.result);
                    };
                    reader.onerror = function () {
                        reject(Binary.makeErrorInfoFromDOMError(CDP.RESULT_CODE.ERROR_CDP_TOOLS_FILE_READER_ERROR, reader.error, TAG, "FileReader.readAsText() failed."));
                    };
                    reader.readAsText(blob, encode);
                }, cancel);
            };
            /**
             * read Blob as Data URL
             *
             * @param  {Blob} blob [in] blob data
             * @return {CDP.IPromise<string>} promise object
             */
            Binary.readBlobAsDataURL = function (blob) {
                var reader = new FileReader();
                var cancel = function () { return reader.abort(); };
                return new Promise(function (resolve, reject) {
                    reader.onload = function () {
                        resolve(reader.result);
                    };
                    reader.onerror = function () {
                        reject(Binary.makeErrorInfoFromDOMError(CDP.RESULT_CODE.ERROR_CDP_TOOLS_FILE_READER_ERROR, reader.error, TAG, "FileReader.readAsDataURL() failed."));
                    };
                    reader.readAsDataURL(blob);
                }, cancel);
            };
            /**
             * URL Object
             *
             * @obsolete
             * @return {any} URL Object
             */
            Binary.blobURL = (function () {
                return CDP.global.URL || CDP.global.webkitURL;
            })();
            return Binary;
        }());
        Tools.Binary = Binary;
    })(Tools = CDP.Tools || (CDP.Tools = {}));
})(CDP || (CDP = {}));
/**
 * @file  BinaryTransport.ts
 * @brief jQuery ajax transport for making binary data type requests.
 *
 *        original: https://github.com/henrya/js-jquery/blob/master/BinaryTransport/jquery.binarytransport.js
 *        author:   Henry Algus <henryalgus@gmail.com>
 */
var CDP;
(function (CDP) {
    var Tools;
    (function (Tools) {
        // Support file protocol. (as same as official way)
        var xhrSuccessStatus = {
            0: 200,
            1223: 204
        };
        $.ajaxTransport("+binary", function (options, originalOptions, jqXHR) {
            if (CDP.global.FormData &&
                ((options.dataType && (options.dataType === "binary")) ||
                    (options.data && ((CDP.global.ArrayBuffer && options.data instanceof ArrayBuffer) ||
                        (CDP.global.Blob && options.data instanceof CDP.global.Blob))))) {
                var abortCallback_1;
                return {
                    send: function (headers, callback) {
                        // setup all variables
                        var xhr = new XMLHttpRequest();
                        var url = options.url;
                        var type = options.type;
                        var async = options.async || true;
                        // blob or arraybuffer. Default is blob
                        var dataType = options.responseType || "blob";
                        var data = options.data || null;
                        var username = options.username || null;
                        var password = options.password || null;
                        var _callback = callback || (function () { });
                        // succeeded handler
                        xhr.addEventListener("load", function () {
                            var _data = {};
                            _data[options.dataType] = xhr.response;
                            _callback(xhrSuccessStatus[xhr.status] || xhr.status, xhr.statusText, _data, xhr.getAllResponseHeaders());
                        });
                        // error handler
                        xhr.addEventListener("error", function () {
                            var _data = {};
                            _data[options.dataType] = xhr.response;
                            // make callback and send data
                            _callback(xhr.status, xhr.statusText, _data, xhr.getAllResponseHeaders());
                        });
                        // abort handler
                        xhr.addEventListener("abort", function () {
                            var _data = {};
                            _data[options.dataType] = xhr.response;
                            // make callback and send data
                            _callback(xhr.status, xhr.statusText, _data, xhr.getAllResponseHeaders());
                        });
                        // abort callback
                        abortCallback_1 = function () {
                            xhr.abort();
                        };
                        xhr.open(type, url, async, username, password);
                        // setup custom headers
                        for (var i in headers) {
                            if (headers.hasOwnProperty(i)) {
                                xhr.setRequestHeader(i, headers[i]);
                            }
                        }
                        xhr.responseType = dataType;
                        xhr.send(data);
                    },
                    abort: function () {
                        if (abortCallback_1) {
                            abortCallback_1();
                        }
                    }
                };
            }
        });
    })(Tools = CDP.Tools || (CDP.Tools = {}));
})(CDP || (CDP = {}));
/// <reference types="jquery" />
var CDP;
(function (CDP) {
    var Tools;
    (function (Tools) {
        var Promise = CDP.Promise;
        var TAG = "[CDP.Tools.Functions] ";
        /**
         * Math.abs よりも高速な abs
         */
        function abs(x) {
            return x >= 0 ? x : -x;
        }
        Tools.abs = abs;
        /**
         * Math.max よりも高速な max
         */
        function max(lhs, rhs) {
            return lhs >= rhs ? lhs : rhs;
        }
        Tools.max = max;
        /**
         * Math.min よりも高速な min
         */
        function min(lhs, rhs) {
            return lhs <= rhs ? lhs : rhs;
        }
        Tools.min = min;
        /**
         * 数値を 0 詰めして文字列を生成
         */
        function toZeroPadding(no, limit) {
            var signed = "";
            no = Number(no);
            if (isNaN(no) || isNaN(limit) || limit <= 0) {
                return null;
            }
            if (no < 0) {
                no = Tools.abs(no);
                signed = "-";
            }
            return signed + (Array(limit).join("0") + no).slice(-limit);
        }
        Tools.toZeroPadding = toZeroPadding;
        /**
         * 文字列のバイト数をカウント
         */
        function getStringSize(src) {
            return (Tools.Binary.newBlob([src], { type: "text/plain" })).size;
        }
        Tools.getStringSize = getStringSize;
        /**
         * 文字列をバイト制限して分割
         */
        function toStringChunks(src, limit) {
            var chunks = [];
            var setChunk = function (input) {
                if (limit < getStringSize(input)) {
                    var half = Math.floor(input.length / 2);
                    var lhs = input.slice(0, half);
                    var rhs = input.slice(half);
                    return [lhs, rhs];
                }
                else {
                    chunks.push(input);
                    return [];
                }
            };
            var makeChunk = function (work) {
                var failures = setChunk(work);
                while (0 < failures.length) {
                    makeChunk(failures.shift());
                }
            };
            makeChunk(src);
            return chunks;
        }
        Tools.toStringChunks = toStringChunks;
        /**
         * 多重継承のための実行時継承関数
         *
         * Sub Class 候補オブジェクトに対して Super Class 候補オブジェクトを直前の Super Class として挿入する。
         * prototype のみコピーする。
         * インスタンスメンバをコピーしたい場合、Super Class が疑似コンストラクタを提供する必要がある。
         * 詳細は cdp.tools.Functions.spec.ts を参照。
         *
         * @param subClass   {constructor} [in] オブジェクトの constructor を指定
         * @param superClass {constructor} [in] オブジェクトの constructor を指定
         */
        function inherit(subClass, superClass) {
            var _prototype = subClass.prototype;
            function _inherit() {
                this.constructor = subClass;
            }
            _inherit.prototype = superClass.prototype;
            subClass.prototype = new _inherit();
            $.extend(subClass.prototype, _prototype);
        }
        Tools.inherit = inherit;
        /**
         * mixin 関数
         *
         * TypeScript Official Site に載っている mixin 関数
         * http://www.typescriptlang.org/Handbook#mixins
         * 既に定義されているオブジェクトから、新規にオブジェクトを合成する。
         *
         * @param derived {constructor}    [in] 合成されるオブジェクトの constructor を指定
         * @param bases   {constructor...} [in] 合成元オブジェクトの constructor を指定 (可変引数)
         */
        function mixin(derived) {
            var bases = [];
            for (var _i = 1; _i < arguments.length; _i++) {
                bases[_i - 1] = arguments[_i];
            }
            bases.forEach(function (base) {
                Object.getOwnPropertyNames(base.prototype).forEach(function (name) {
                    derived.prototype[name] = base.prototype[name];
                });
            });
        }
        Tools.mixin = mixin;
        /**
         * \~english
         * Helper function to correctly set up the prototype chain, for subclasses.
         * The function behavior is same as extend() function of Backbone.js.
         *
         * @param protoProps  {Object} [in] set prototype properties as object.
         * @param staticProps {Object} [in] set static properties as object.
         * @return {Object} subclass constructor.
         *
         * \~japanese
         * クラス継承のためのヘルパー関数
         * Backbone.js extend() 関数と同等
         *
         * @param protoProps  {Object} [in] prototype properties をオブジェクトで指定
         * @param staticProps {Object} [in] static properties をオブジェクトで指定
         * @return {Object} サブクラスのコンストラクタ
         */
        function extend(protoProps, staticProps) {
            var parent = this;
            var child;
            if (protoProps && protoProps.hasOwnProperty("constructor")) {
                child = protoProps.constructor;
            }
            else {
                child = function () {
                    return parent.apply(this, arguments);
                };
            }
            $.extend(child, parent, staticProps);
            var Surrogate = function () {
                this.constructor = child;
            };
            Surrogate.prototype = parent.prototype;
            child.prototype = new Surrogate;
            if (protoProps) {
                $.extend(child.prototype, protoProps);
            }
            child.__super__ = parent.prototype;
            return child;
        }
        Tools.extend = extend;
        /**
         * DPI 取得
         */
        function getDevicePixcelRatio() {
            var mediaQuery;
            var is_firefox = navigator.userAgent.toLowerCase().indexOf("firefox") > -1;
            if (null != window.devicePixelRatio && !is_firefox) {
                return window.devicePixelRatio;
            }
            else if (window.matchMedia) {
                mediaQuery =
                    "(-webkit-min-device-pixel-ratio: 1.5),\
                    (min--moz-device-pixel-ratio: 1.5),\
                    (-o-min-device-pixel-ratio: 3/2),\
                    (min-resolution: 1.5dppx)";
                if (window.matchMedia(mediaQuery).matches) {
                    return 1.5;
                }
                mediaQuery =
                    "(-webkit-min-device-pixel-ratio: 2),\
                    (min--moz-device-pixel-ratio: 2),\
                    (-o-min-device-pixel-ratio: 2/1),\
                    (min-resolution: 2dppx)";
                if (window.matchMedia(mediaQuery).matches) {
                    return 2;
                }
                mediaQuery =
                    "(-webkit-min-device-pixel-ratio: 0.75),\
                    (min--moz-device-pixel-ratio: 0.75),\
                    (-o-min-device-pixel-ratio: 3/4),\
                    (min-resolution: 0.75dppx)";
                if (window.matchMedia(mediaQuery).matches) {
                    return 0.7;
                }
            }
            else {
                return 1;
            }
        }
        Tools.getDevicePixcelRatio = getDevicePixcelRatio;
        // Canvas element のキャッシュ
        var s_canvasFactory;
        // キャッシュ済みの Canvas を取得する
        function getCanvas() {
            s_canvasFactory = s_canvasFactory || document.createElement("canvas");
            return s_canvasFactory.cloneNode(false);
        }
        Tools.getCanvas = getCanvas;
        /**
         * 画像リソースのロード完了を保証
         * ブラウザ既定のプログレッシブロードを走らせないため.
         *
         * @param  {String} url [in] url (data-url)
         * @return {IPromise<string>} 表示可能な url
         */
        function ensureImageLoaded(url) {
            var img = new Image();
            var destroy = function () {
                if (img) {
                    img.src = ""; // 読み込み停止
                    img = null;
                }
            };
            return new Promise(function (resolve, reject) {
                img.onload = function (event) {
                    destroy();
                    resolve(url);
                };
                img.onerror = function (event) {
                    destroy();
                    reject(CDP.makeErrorInfo(CDP.RESULT_CODE.ERROR_CDP_TOOLS_IMAGE_LOAD_FAILED, TAG, "image load failed. [url: " + url + "]"));
                };
                img.src = url;
            }, destroy);
        }
        Tools.ensureImageLoaded = ensureImageLoaded;
        /**
         * 画像のリサイズ
         * 指定した長辺の長さにアスペクト比を維持してリサイズを行う
         * longSideLength より小さな場合はオリジナルサイズで data-url を返却する
         *
         * @param  {String} src            [in] image に指定するソース
         * @param  {Number} longSideLength [in] リサイズに使用する長辺の最大値を指定
         * @return {IPromise<string>} base64 data url を返却
         */
        function resizeImage(src, longSideLength) {
            var img = new Image();
            var destroy = function () {
                if (img) {
                    img.src = ""; // 読み込み停止
                    img = null;
                }
            };
            return new Promise(function (resolve, reject) {
                img.onload = function (event) {
                    var canvas = getCanvas();
                    var ih = img.height, iw = img.width, ia = ih / iw;
                    var cw, ch;
                    if (iw === 0 || 0 === ia) {
                        reject(CDP.makeErrorInfo(CDP.RESULT_CODE.ERROR_CDP_TOOLS_INVALID_IMAGE, TAG, "invalid image. [src: " + src + "]"));
                    }
                    else {
                        if (longSideLength <= 0) {
                            longSideLength = (ia < 1) ? iw : ih;
                        }
                        if (ia < 1) {
                            cw = (longSideLength < iw) ? longSideLength : iw;
                            ch = Math.round(cw * ia);
                        }
                        else {
                            ch = (longSideLength < ih) ? longSideLength : ih;
                            cw = Math.round(ch / ia);
                        }
                        canvas.width = cw;
                        canvas.height = ch;
                        canvas.getContext("2d").drawImage(img, 0, 0, cw, ch);
                        resolve(canvas.toDataURL());
                    }
                    destroy();
                };
                img.onerror = function (event) {
                    destroy();
                    reject(CDP.makeErrorInfo(CDP.RESULT_CODE.ERROR_CDP_TOOLS_IMAGE_LOAD_FAILED, TAG, "image load failed. [src: " + src + "]"));
                };
                img.src = src;
            });
        }
        Tools.resizeImage = resizeImage;
    })(Tools = CDP.Tools || (CDP.Tools = {}));
})(CDP || (CDP = {}));
/* tslint:disable:max-line-length */
var CDP;
(function (CDP) {
    var Tools;
    (function (Tools) {
        var TAG = "[CDP.Tools.DateTime] ";
        /**
         * @class DateTime
         * @brief 時刻操作のユーティリティクラス
         */
        var DateTime = /** @class */ (function () {
            function DateTime() {
            }
            ///////////////////////////////////////////////////////////////////////
            // public static method
            /**
             * 基点となる日付から、n日後、n日前を算出
             *
             * @param base    {Date}   [in] 基準日
             * @param addDays {Number} [in] 加算日. マイナス指定でn日前も設定可能
             * @return {Date} 日付オブジェクト
             */
            DateTime.computeDate = function (base, addDays) {
                var dt = new Date(base.getTime());
                var baseSec = dt.getTime();
                var addSec = addDays * 86400000; //日数 * 1日のミリ秒数
                var targetSec = baseSec + addSec;
                dt.setTime(targetSec);
                return dt;
            };
            /**
             * Convert string to date object
             *
             * @param {String} date string ex) YYYY-MM-DDTHH:mm:SS.SSS
             * @return {Object} date object
             */
            DateTime.convertISOStringToDate = function (dateString) {
                var dateTime = dateString.split("T"), dateArray = dateTime[0].split("-");
                var timeArray, secArray, dateObject;
                if (dateTime[1]) {
                    timeArray = dateTime[1].split(":");
                    secArray = timeArray[2].split(".");
                }
                if (timeArray) {
                    dateObject = new Date(dateArray[0], dateArray[1] - 1, dateArray[2], timeArray[0], timeArray[1], secArray[0], secArray[1]);
                }
                else {
                    if (dateArray[2]) {
                        dateObject = new Date(dateArray[0], dateArray[1] - 1, dateArray[2]);
                    }
                    else if (dateArray[1]) {
                        dateObject = new Date(dateArray[0], dateArray[1] - 1);
                    }
                    else {
                        dateObject = new Date(dateArray[0]);
                    }
                }
                return dateObject;
            };
            /**
             *  Convert a date object into a string in PMOAPI recorded_date format(the ISO 8601 Extended Format)
             *
             * @param date   {Date}   [in] date object
             * @param target {String} [in] {year | month | date | hour | min | sec | msec }
             * @return {String}
             */
            DateTime.convertDateToISOString = function (date, target) {
                if (target === void 0) { target = "msec"; }
                var isoDateString;
                switch (target) {
                    case "year":
                    case "month":
                    case "date":
                    case "hour":
                    case "min":
                    case "sec":
                    case "msec":
                        break;
                    default:
                        console.warn(TAG + "unknown target: " + target);
                        target = "msec";
                }
                isoDateString = date.getFullYear();
                if ("year" === target) {
                    return isoDateString;
                }
                isoDateString += ("-" + DateTime.numberToDoubleDigitsString(date.getMonth() + 1));
                if ("month" === target) {
                    return isoDateString;
                }
                isoDateString += ("-" + DateTime.numberToDoubleDigitsString(date.getDate()));
                if ("date" === target) {
                    return isoDateString;
                }
                isoDateString += ("T" + DateTime.numberToDoubleDigitsString(date.getHours()));
                if ("hour" === target) {
                    return isoDateString;
                }
                isoDateString += (":" + DateTime.numberToDoubleDigitsString(date.getMinutes()));
                if ("min" === target) {
                    return isoDateString;
                }
                isoDateString += (":" + DateTime.numberToDoubleDigitsString(date.getSeconds()));
                if ("sec" === target) {
                    return isoDateString;
                }
                isoDateString += ("." + String((date.getMilliseconds() / 1000).toFixed(3)).slice(2, 5));
                return isoDateString;
            };
            /**
             * Convert file system compatible string to date object
             *
             * @param {String} date string ex) yyyy_MM_ddTHH_mm_ss_SSS
             * @return {Object} date object
             */
            DateTime.convertFileSystemStringToDate = function (dateString) {
                var dateTime = dateString.split("T"), dateArray = dateTime[0].split("_");
                var timeArray, dateObject;
                if (dateTime[1]) {
                    timeArray = dateTime[1].split("_");
                }
                if (timeArray) {
                    dateObject = new Date(dateArray[0], dateArray[1] - 1, dateArray[2], timeArray[0], timeArray[1], timeArray[2], timeArray[3]);
                }
                else {
                    if (dateArray[2]) {
                        dateObject = new Date(dateArray[0], dateArray[1] - 1, dateArray[2]);
                    }
                    else if (dateArray[1]) {
                        dateObject = new Date(dateArray[0], dateArray[1] - 1);
                    }
                    else {
                        dateObject = new Date(dateArray[0]);
                    }
                }
                return dateObject;
            };
            /**
             *  Convert a date object into a string in file system compatible format(yyyy_MM_ddTHH_mm_ss_SSS)
             *
             * @param date   {Date}   [in] date object
             * @param target {String} [in] {year | month | date | hour | min | sec | msec }
             * @return {String}
             */
            DateTime.convertDateToFileSystemString = function (date, target) {
                if (target === void 0) { target = "msec"; }
                var fileSystemString;
                switch (target) {
                    case "year":
                    case "month":
                    case "date":
                    case "hour":
                    case "min":
                    case "sec":
                    case "msec":
                        break;
                    default:
                        console.warn(TAG + "unknown target: " + target);
                        target = "msec";
                }
                fileSystemString = date.getFullYear();
                if ("year" === target) {
                    return fileSystemString;
                }
                fileSystemString += ("_" + DateTime.numberToDoubleDigitsString(date.getMonth() + 1));
                if ("month" === target) {
                    return fileSystemString;
                }
                fileSystemString += ("_" + DateTime.numberToDoubleDigitsString(date.getDate()));
                if ("date" === target) {
                    return fileSystemString;
                }
                fileSystemString += ("T" + DateTime.numberToDoubleDigitsString(date.getHours()));
                if ("hour" === target) {
                    return fileSystemString;
                }
                fileSystemString += ("_" + DateTime.numberToDoubleDigitsString(date.getMinutes()));
                if ("min" === target) {
                    return fileSystemString;
                }
                fileSystemString += ("_" + DateTime.numberToDoubleDigitsString(date.getSeconds()));
                if ("sec" === target) {
                    return fileSystemString;
                }
                fileSystemString += ("_" + String((date.getMilliseconds() / 1000).toFixed(3)).slice(2, 5));
                return fileSystemString;
            };
            ///////////////////////////////////////////////////////////////////////
            // private static method
            /**
             * Convert num to string(double digits)
             *
             * @param  {Number} number (0 <number < 100)
             * @return {String} double digits string
             */
            DateTime.numberToDoubleDigitsString = function (num) {
                if (num < 0 || num > 100) {
                    return null;
                }
                if (num < 10) {
                    return "0" + num;
                }
                return "" + num;
            };
            return DateTime;
        }());
        Tools.DateTime = DateTime;
    })(Tools = CDP.Tools || (CDP.Tools = {}));
})(CDP || (CDP = {}));
/// <reference types="jquery" />
var CDP;
(function (CDP) {
    var Tools;
    (function (Tools) {
        var TAG = "[CDP.Tools.Template] ";
        //___________________________________________________________________________________________________________________//
        /**
         * @class Template
         * @brief template script を管理するユーティリティクラス
         */
        var Template = /** @class */ (function () {
            function Template() {
            }
            ///////////////////////////////////////////////////////////////////////
            // 公開メソッド
            /**
             * 指定した id, class 名, Tag 名をキーにテンプレートの JQuery Element を取得する。
             *
             * @param {String}  key     [in] id, class, tag を表す文字列
             * @param {String}  [src]   [in] 外部 html を指定する場合は url を設定
             * @param {Boolean} [cache] [in] src html をキャッシュする場合は true. src が指定されているときのみ有効
             * @return template が格納されている JQuery Element
             */
            Template.getTemplateElement = function (key, src, cache) {
                if (src === void 0) { src = null; }
                if (cache === void 0) { cache = true; }
                var mapElement = Template.getElementMap();
                var $element = mapElement[key];
                try {
                    if (!$element) {
                        if (src) {
                            var html = Template.findHtmlFromSource(src);
                            $element = $(html).find(key);
                        }
                        else {
                            $element = $(key);
                        }
                        // 要素の検証
                        if ($element <= 0) {
                            throw ("invalid [key, src] = [" + key + ", " + src + "]");
                        }
                        if (src && cache) {
                            mapElement[key] = $element;
                        }
                    }
                }
                catch (exception) {
                    console.error(TAG + exception);
                    return null;
                }
                return $element;
            };
            /**
             * Map オブジェクトの削除
             * 明示的にキャッシュを開放する場合は本メソッドをコールする
             */
            Template.empty = function () {
                Template._mapElement = null;
                Template._mapSource = null;
            };
            Template.getJST = function (key, src, cache) {
                var template = null;
                var jst;
                var $element;
                if (key instanceof jQuery) {
                    $element = key;
                }
                else {
                    $element = Template.getTemplateElement(key, src, cache);
                }
                if (null != CDP.global.Hogan) {
                    template = Hogan.compile($element.text());
                    jst = function (data) {
                        return template.render(data);
                    };
                }
                else if (null != CDP.global._) {
                    template = _.template($element.html());
                    jst = function (data) {
                        // 改行とタブは削除する
                        return template(data).replace(/\n|\t/g, "");
                    };
                }
                else {
                    console.warn(TAG + "cannot find template engine module.");
                    console.warn("    'hogan' or 'underscore' is required.");
                }
                return jst;
            };
            ///////////////////////////////////////////////////////////////////////
            // 内部メソッド
            //! Element Map オブジェクトの取得
            Template.getElementMap = function () {
                if (!Template._mapElement) {
                    Template._mapElement = {};
                }
                return Template._mapElement;
            };
            //! URL Map オブジェクトの取得
            Template.getSourceMap = function () {
                if (!Template._mapSource) {
                    Template._mapSource = {};
                }
                return Template._mapSource;
            };
            //! URL Map から HTML を検索. 失敗した場合は undefined が返る
            Template.findHtmlFromSource = function (src) {
                var mapSource = Template.getSourceMap();
                var html = mapSource[src];
                if (!html) {
                    $.ajax({
                        url: src,
                        method: "GET",
                        async: false,
                        dataType: "html",
                        success: function (data) {
                            html = data;
                        },
                        error: function (data, status) {
                            throw ("ajax request failed. status: " + status);
                        }
                    });
                    // キャッシュに格納
                    mapSource[src] = html;
                }
                return html;
            };
            return Template;
        }());
        Tools.Template = Template;
    })(Tools = CDP.Tools || (CDP.Tools = {}));
})(CDP || (CDP = {}));
var __assign = (this && this.__assign) || Object.assign || function(t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
        s = arguments[i];
        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
            t[p] = s[p];
    }
    return t;
};
var CDP;
(function (CDP) {
    var Tools;
    (function (Tools) {
        var TAG = "[CDP.Tools.ProgressCounter] ";
        /**
         * @class ProgressCounter
         * @brief 進捗の時間を扱うユーティリティクラス
         */
        var ProgressCounter = /** @class */ (function () {
            /**
             * constructor
             *
             * @param [options] オプション
             */
            function ProgressCounter(options) {
                this.reset(options);
            }
            /**
             * 開始時間を初期化
             */
            ProgressCounter.prototype.reset = function (options) {
                this._settings = __assign({
                    max: 100,
                    beginTime: Date.now(),
                    allowIncrementeRemain: false,
                    lastRemainTime: Infinity,
                }, options);
            };
            /**
             * 経過時間と推定残り時間を取得する
             * 進捗値が 0 の場合は、推定残り時間に Infinity を返す
             *
             * @param   progress [in] 進捗値
             * @returns 経過時間と推定残り時間 [msec]
             */
            ProgressCounter.prototype.compute = function (progress) {
                var passTime = Date.now() - this._settings.beginTime;
                var remainTime = Infinity;
                if (null != progress && 0 !== progress) {
                    remainTime = passTime * this._settings.max / progress - passTime;
                }
                if (this._settings.allowIncrementeRemain || (remainTime < this._settings.lastRemainTime)) {
                    this._settings.lastRemainTime = remainTime;
                }
                else {
                    remainTime = this._settings.lastRemainTime;
                }
                return { passTime: passTime, remainTime: remainTime };
            };
            return ProgressCounter;
        }());
        Tools.ProgressCounter = ProgressCounter;
    })(Tools = CDP.Tools || (CDP.Tools = {}));
})(CDP || (CDP = {}));

return CDP.Tools; }));
/*!
 * cdp.ui.listview.js 2.1.0
 *
 * Date: 2017-11-06T05:37:50.869Z
 */
(function (root, factory) { if (typeof define === "function" && define.amd) { define("cdp.ui.listview",["jquery", "underscore", "backbone"], function ($, _, Backbone) { return factory(root.CDP || (root.CDP = {}), $, _, Backbone); }); } else if (typeof exports === "object") { module.exports = factory(root.CDP || (root.CDP = {}), require("jquery"), require("underscore"), require("backbone")); } else { factory(root.CDP || (root.CDP = {}), root.$, root._, root.Backbone); } }(((this || 0).self || global), function (CDP, $, _, Backbone) { CDP.UI = CDP.UI || {};
/// <reference types="jquery" />
/// <reference types="backbone" />
var CDP;
(function (CDP) {
    var UI;
    (function (UI) {
        /**
         * @class ListViewGlobalConfig
         * @brief cdp.ui.listview の global confing
         */
        var ListViewGlobalConfig;
        (function (ListViewGlobalConfig) {
            ListViewGlobalConfig.WRAPPER_CLASS = "ui-listview-wrapper";
            ListViewGlobalConfig.WRAPPER_SELECTOR = "." + ListViewGlobalConfig.WRAPPER_CLASS;
            ListViewGlobalConfig.SCROLL_MAP_CLASS = "ui-listview-scroll-map";
            ListViewGlobalConfig.SCROLL_MAP_SELECTOR = "." + ListViewGlobalConfig.SCROLL_MAP_CLASS;
            ListViewGlobalConfig.INACTIVE_CLASS = "inactive";
            ListViewGlobalConfig.INACTIVE_CLASS_SELECTOR = "." + ListViewGlobalConfig.INACTIVE_CLASS;
            ListViewGlobalConfig.RECYCLE_CLASS = "ui-listview-recycle";
            ListViewGlobalConfig.RECYCLE_CLASS_SELECTOR = "." + ListViewGlobalConfig.RECYCLE_CLASS;
            ListViewGlobalConfig.LISTITEM_BASE_CLASS = "ui-listview-item-base";
            ListViewGlobalConfig.LISTITEM_BASE_CLASS_SELECTOR = "." + ListViewGlobalConfig.LISTITEM_BASE_CLASS;
            ListViewGlobalConfig.DATA_PAGE_INDEX = "data-page-index";
            ListViewGlobalConfig.DATA_CONTAINER_INDEX = "data-container-index";
        })(ListViewGlobalConfig = UI.ListViewGlobalConfig || (UI.ListViewGlobalConfig = {}));
    })(UI = CDP.UI || (CDP.UI = {}));
})(CDP || (CDP = {}));
var CDP;
(function (CDP) {
    var UI;
    (function (UI) {
        // cdp.ui.listview は cdp.core に依存しないため、独自にglobal を提供する
        /*jshint evil:true */
        UI.global = CDP.global || Function("return this")();
        /*jshint evil:false */
        /**
         * Backbone.View の新規合成
         *
         * @param base    {Backbone.View}                 [in] prototype chain 最下位の View クラス
         * @param derives {Backbone.View|Backbone.View[]} [in] 派生されるの View クラス
         * @return {Backbone.View|Backbone.View[]} 新規に生成された View のコンストラクタ
         */
        function composeViews(base, derives) {
            var _composed = base;
            var _derives = (derives instanceof Array ? derives : [derives]);
            _derives.forEach(function (derive) {
                var seed = {};
                _.extendOwn(seed, derive.prototype);
                delete seed.constructor;
                _composed = _composed.extend(seed);
            });
            return _composed;
        }
        UI.composeViews = composeViews;
        /**
         * Backbone.View の合成
         * prototype chain を作る合成
         *
         * @param derived {Backbone.View}                 [in] prototype chain 最上位の View クラス
         * @param bases   {Backbone.View|Backbone.View[]} [in] 合成元のView クラス
         */
        function deriveViews(derived, bases) {
            var _composed;
            var _bases = (bases instanceof Array ? bases : [bases]);
            if (2 <= _bases.length) {
                _composed = composeViews(_bases[0], _bases.slice(1));
            }
            else {
                _composed = _bases[0];
            }
            derived = composeViews(_composed, derived);
        }
        UI.deriveViews = deriveViews;
        /**
         * Backbone.View の合成
         * prototype chain を作らない合成
         *
         * @param derived {Backbone.View}                 [in] 元となる View クラス
         * @param bases   {Backbone.View|Backbone.View[]} [in] 合成元のView クラス
         */
        function mixinViews(derived, bases) {
            var _bases = (bases instanceof Array ? bases : [bases]);
            _bases.forEach(function (base) {
                Object.getOwnPropertyNames(base.prototype).forEach(function (name) {
                    derived.prototype[name] = base.prototype[name];
                });
            });
        }
        UI.mixinViews = mixinViews;
        //___________________________________________________________________________________________________________________//
        /**
         * @class _ListViewUtils
         * @brief 内部で使用する便利関数
         *        Tools からの最低限の流用
         */
        var _ListViewUtils;
        (function (_ListViewUtils) {
            /**
             * css の vender 拡張 prefix を返す
             *
             * @return {Array} prefix
             */
            _ListViewUtils.cssPrefixes = ["-webkit-", "-moz-", "-ms-", "-o-", ""];
            /**
             * css の matrix の値を取得.
             *
             * @param element {jQuery} [in] 対象の jQuery オブジェクト
             * @param type    {String} [in] matrix type string [translateX | translateY | scaleX | scaleY]
             * @return {Number} value
             */
            _ListViewUtils.getCssMatrixValue = function (element, type) {
                var transX = 0;
                var transY = 0;
                var scaleX = 0;
                var scaleY = 0;
                for (var i = 0; i < _ListViewUtils.cssPrefixes.length; i++) {
                    var matrix = $(element).css(_ListViewUtils.cssPrefixes[i] + "transform");
                    if (matrix) {
                        var is3dMatrix = matrix.indexOf("3d") !== -1 ? true : false;
                        matrix = matrix.replace("matrix3d", "").replace("matrix", "").replace(/[^\d.,-]/g, "");
                        var arr = matrix.split(",");
                        transX = Number(arr[is3dMatrix ? 12 : 4]);
                        transY = Number(arr[is3dMatrix ? 13 : 5]);
                        scaleX = Number(arr[0]);
                        scaleY = Number(arr[is3dMatrix ? 5 : 3]);
                        break;
                    }
                }
                switch (type) {
                    case "translateX":
                        return isNaN(transX) ? 0 : transX;
                    case "translateY":
                        return isNaN(transY) ? 0 : transY;
                    case "scaleX":
                        return isNaN(scaleX) ? 1 : scaleX;
                    case "scaleY":
                        return isNaN(scaleY) ? 1 : scaleY;
                    default:
                        return 0;
                }
            };
            /**
             * "transitionend" のイベント名配列を返す
             *
             * @return {Array} transitionend イベント名
             */
            _ListViewUtils.transitionEnd = "transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd";
            /**
             * transition 設定
             *
             * @private
             * @param {Object} element
             */
            _ListViewUtils.setTransformsTransitions = function (element, prop, msec, timingFunction) {
                var $element = $(element);
                var transitions = {};
                var second = (msec / 1000) + "s";
                var animation = " " + second + " " + timingFunction;
                var transform = ", transform" + animation;
                for (var i = 0; i < _ListViewUtils.cssPrefixes.length; i++) {
                    transitions[_ListViewUtils.cssPrefixes[i] + "transition"] = prop + animation + transform;
                }
                $element.css(transitions);
            };
            /**
             * transition 設定の削除
             *
             * @private
             * @param {Object} element
             */
            _ListViewUtils.clearTransitions = function (element) {
                var $element = $(element);
                $element.off(_ListViewUtils.transitionEnd);
                var transitions = {};
                for (var i = 0; i < _ListViewUtils.cssPrefixes.length; i++) {
                    transitions[_ListViewUtils.cssPrefixes[i] + "transition"] = "";
                }
                $element.css(transitions);
            };
            /**
             * Math.abs よりも高速な abs
             */
            _ListViewUtils.abs = function (x) {
                return x >= 0 ? x : -x;
            };
            /**
             * Math.max よりも高速な max
             */
            _ListViewUtils.max = function (lhs, rhs) {
                return lhs >= rhs ? lhs : rhs;
            };
        })(_ListViewUtils = UI._ListViewUtils || (UI._ListViewUtils = {}));
    })(UI = CDP.UI || (CDP.UI = {}));
})(CDP || (CDP = {}));
var CDP;
(function (CDP) {
    var UI;
    (function (UI) {
        var TAG = "[CDP.UI.StatusManager] ";
        /**
         * @class StatusManager
         * @brief UI 用状態管理クラス
         *        StatusManager のインスタンスごとに任意の状態管理ができる
         *
         */
        var StatusManager = /** @class */ (function () {
            function StatusManager() {
                this._status = {}; //!< statusScope() に使用される状態管理オブジェクト
            }
            ///////////////////////////////////////////////////////////////////////
            // Implements: IStatusManager
            //! 状態変数の参照カウントのインクリメント
            StatusManager.prototype.statusAddRef = function (status) {
                if (!this._status[status]) {
                    this._status[status] = 1;
                }
                else {
                    this._status[status]++;
                }
                return this._status[status];
            };
            //! 状態変数の参照カウントのデクリメント
            StatusManager.prototype.statusRelease = function (status) {
                var retval;
                if (!this._status[status]) {
                    retval = 0;
                }
                else {
                    this._status[status]--;
                    retval = this._status[status];
                    if (0 === retval) {
                        delete this._status[status];
                    }
                }
                return retval;
            };
            //! 処理スコープ毎に状態変数を設定
            StatusManager.prototype.statusScope = function (status, callback) {
                var _this = this;
                this.statusAddRef(status);
                var promise = callback();
                if (!promise) {
                    this.statusRelease(status);
                }
                else {
                    promise.then(function () {
                        _this.statusRelease(status);
                    }, function () {
                        _this.statusRelease(status);
                    });
                }
            };
            //! 指定した状態中であるか確認
            StatusManager.prototype.isStatusIn = function (status) {
                return !!this._status[status];
            };
            return StatusManager;
        }());
        UI.StatusManager = StatusManager;
    })(UI = CDP.UI || (CDP.UI = {}));
})(CDP || (CDP = {}));
var CDP;
(function (CDP) {
    var UI;
    (function (UI) {
        var _Config = CDP.UI.ListViewGlobalConfig;
        var _ToolCSS = CDP.UI._ListViewUtils;
        var TAG = "[CDP.UI.LineProfile] ";
        /**
         * @class LineProfile
         * @brief 1 ラインに関するプロファイルクラス
         *        framework が使用する
         */
        var LineProfile = /** @class */ (function () {
            /**
             * constructor
             *
             * @param _owner       {IListViewFramework} [in] 管理者である IListViewFramework インスタンス
             * @param _height      {Number}             [in] 初期の高さ
             * @param _initializer {Function}           [in] ListItemView 派生クラスのコンストラクタ
             * @param _info        {Object}             [in] ListItemView コンストラクタに渡されるオプション
             */
            function LineProfile(_owner, _height, _initializer, _info) {
                this._owner = _owner;
                this._height = _height;
                this._initializer = _initializer;
                this._info = _info;
                this._index = null; //!< global index
                this._pageIndex = null; //!< 所属する page index
                this._offset = null; //!< global offset
                this._$base = null; //!< 土台となる DOM インスタンスを格納
                this._instance = null; //!< ListItemView インスタンスを格納
            }
            ///////////////////////////////////////////////////////////////////////
            // public methods
            //! 有効化
            LineProfile.prototype.activate = function () {
                if (null == this._instance) {
                    var options = void 0;
                    this._$base = this.prepareBaseElement();
                    options = $.extend({}, {
                        el: this._$base,
                        owner: this._owner,
                        lineProfile: this,
                    }, this._info);
                    this._instance = new this._initializer(options);
                    if ("none" === this._$base.css("display")) {
                        this._$base.css("display", "block");
                    }
                }
                this.updatePageIndex(this._$base);
                if ("visible" !== this._$base.css("visibility")) {
                    this._$base.css("visibility", "visible");
                }
            };
            //! 不可視化
            LineProfile.prototype.hide = function () {
                if (null == this._instance) {
                    this.activate();
                }
                if ("hidden" !== this._$base.css("visibility")) {
                    this._$base.css("visibility", "hidden");
                }
            };
            //! 無効化
            LineProfile.prototype.inactivate = function () {
                if (null != this._instance) {
                    // xperia AX Jelly Bean (4.1.2)にて、 hidden element の削除でメモリーリークするため可視化する。
                    if ("visible" !== this._$base.css("visibility")) {
                        this._$base.css("visibility", "visible");
                    }
                    this._instance.remove();
                    this._instance = null;
                    this._$base.addClass(_Config.RECYCLE_CLASS);
                    this._$base.css("display", "none");
                    this._$base = null;
                }
            };
            //! 更新
            LineProfile.prototype.refresh = function () {
                if (null != this._instance) {
                    this._instance.render();
                }
            };
            //! 有効無効判定
            LineProfile.prototype.isActive = function () {
                return null != this._instance;
            };
            //! 高さ情報の更新. ListItemView からコールされる。
            LineProfile.prototype.updateHeight = function (newHeight, options) {
                var delta = newHeight - this._height;
                this._height = newHeight;
                this._owner.updateScrollMapHeight(delta);
                if (null != options && options.reflectAll) {
                    this._owner.updateProfiles(this._index);
                }
            };
            //! z-index のリセット. ScrollManager.removeItem() からコールされる。
            LineProfile.prototype.resetDepth = function () {
                if (null != this._instance) {
                    this._$base.css("z-index", this._owner.getListViewOptions().baseDepth);
                }
            };
            Object.defineProperty(LineProfile.prototype, "height", {
                ///////////////////////////////////////////////////////////////////////
                // getter/setter methods
                //! getter: ラインの高さ
                get: function () {
                    return this._height;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(LineProfile.prototype, "index", {
                //! getter: global index
                get: function () {
                    return this._index;
                },
                //! setter: global index
                set: function (index) {
                    this._index = index;
                    if (null != this._$base) {
                        this.updateIndex(this._$base);
                    }
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(LineProfile.prototype, "pageIndex", {
                //! getter: 所属ページ index
                get: function () {
                    return this._pageIndex;
                },
                //! setter: 所属ページ index
                set: function (index) {
                    this._pageIndex = index;
                    if (null != this._$base) {
                        this.updatePageIndex(this._$base);
                    }
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(LineProfile.prototype, "offset", {
                //! getter: line offset
                get: function () {
                    return this._offset;
                },
                //! setter: line offset
                set: function (offset) {
                    this._offset = offset;
                    if (null != this._$base) {
                        this.updateOffset(this._$base);
                    }
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(LineProfile.prototype, "info", {
                //! getter: info
                get: function () {
                    return this._info;
                },
                enumerable: true,
                configurable: true
            });
            ///////////////////////////////////////////////////////////////////////
            // private methods
            //! Base jQuery オブジェクトの生成
            LineProfile.prototype.prepareBaseElement = function () {
                var $base;
                var $map = this._owner.getScrollMapElement();
                var $recycle = this._owner.findRecycleElements().first();
                var itemTagName = this._owner.getListViewOptions().itemTagName;
                if (null != this._$base) {
                    console.warn(TAG + "this._$base is not null.");
                    return this._$base;
                }
                if (0 < $recycle.length) {
                    $base = $recycle;
                    $base.removeAttr("z-index");
                    $base.removeClass(_Config.RECYCLE_CLASS);
                }
                else {
                    $base = $("<" + itemTagName + " class='" + _Config.LISTITEM_BASE_CLASS + "'></" + itemTagName + ">");
                    $base.css("display", "none");
                    $map.append($base);
                }
                // 高さの更新
                if ($base.height() !== this._height) {
                    $base.height(this._height);
                }
                // index の設定
                this.updateIndex($base);
                // offset の更新
                this.updateOffset($base);
                return $base;
            };
            //! global index の更新
            LineProfile.prototype.updateIndex = function ($base) {
                if ($base.attr(_Config.DATA_CONTAINER_INDEX) !== this._index.toString()) {
                    $base.attr(_Config.DATA_CONTAINER_INDEX, this._index.toString());
                }
            };
            //! page index の更新
            LineProfile.prototype.updatePageIndex = function ($base) {
                if ($base.attr(_Config.DATA_PAGE_INDEX) !== this._pageIndex.toString()) {
                    $base.attr(_Config.DATA_PAGE_INDEX, this._pageIndex.toString());
                }
            };
            //! offset の更新
            LineProfile.prototype.updateOffset = function ($base) {
                var transform = {};
                if (this._owner.getListViewOptions().enableTransformOffset) {
                    if (_ToolCSS.getCssMatrixValue($base, "translateY") !== this._offset) {
                        for (var i = 0; i < _ToolCSS.cssPrefixes.length; i++) {
                            transform[_ToolCSS.cssPrefixes[i] + "transform"] = "translate3d(0px," + this._offset + "px,0px)";
                        }
                        $base.css(transform);
                    }
                }
                else {
                    if (parseInt($base.css("top"), 10) !== this._offset) {
                        $base.css("top", this._offset + "px");
                    }
                }
            };
            return LineProfile;
        }());
        UI.LineProfile = LineProfile;
    })(UI = CDP.UI || (CDP.UI = {}));
})(CDP || (CDP = {}));
var CDP;
(function (CDP) {
    var UI;
    (function (UI) {
        var TAG = "[CDP.UI.PageProfile] ";
        /**
         * @class PageProfile
         * @brief 1 ページに関するプロファイルクラス
         *        framework が使用する
         *        本クラスでは直接 DOM を操作してはいけない
         */
        var PageProfile = /** @class */ (function () {
            function PageProfile() {
                this._index = 0; //!< page index
                this._offset = 0; //!< page の Top からのオフセット
                this._height = 0; //!< page の高さ
                this._lines = []; //!< page 内で管理される LineProfile
                this._status = "inactive"; //!< page の状態 [ inactive | hidden | active ]
            }
            ///////////////////////////////////////////////////////////////////////
            // public methods
            //! 有効化
            PageProfile.prototype.activate = function () {
                if ("active" !== this._status) {
                    this._lines.forEach(function (line) {
                        line.activate();
                    });
                }
                this._status = "active";
            };
            //! 無可視化
            PageProfile.prototype.hide = function () {
                if ("hidden" !== this._status) {
                    this._lines.forEach(function (line) {
                        line.hide();
                    });
                }
                this._status = "hidden";
            };
            //! 無効化
            PageProfile.prototype.inactivate = function () {
                if ("inactive" !== this._status) {
                    this._lines.forEach(function (line) {
                        line.inactivate();
                    });
                }
                this._status = "inactive";
            };
            //! LineProfile を設定
            PageProfile.prototype.push = function (line) {
                this._lines.push(line);
                this._height += line.height;
            };
            //! 配下の LineProfile すべてが有効でない場合、Page ステータスを無効にする
            PageProfile.prototype.normalize = function () {
                var enableAll = _.every(this._lines, function (line) {
                    return line.isActive();
                });
                if (!enableAll) {
                    this._status = "inactive";
                }
            };
            //! LineProfile を取得
            PageProfile.prototype.getLineProfile = function (index) {
                if (0 <= index && index < this._lines.length) {
                    return this._lines[index];
                }
                else {
                    return null;
                }
            };
            //! 最初の LineProfile を取得
            PageProfile.prototype.getLineProfileFirst = function () {
                return this.getLineProfile(0);
            };
            //! 最後の LineProfile を取得
            PageProfile.prototype.getLineProfileLast = function () {
                return this.getLineProfile(this._lines.length - 1);
            };
            Object.defineProperty(PageProfile.prototype, "index", {
                ///////////////////////////////////////////////////////////////////////
                // getter/setter methods
                //! getter: page index
                get: function () {
                    return this._index;
                },
                //! setter: page index
                set: function (index) {
                    this._index = index;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(PageProfile.prototype, "offset", {
                //! getter: page offset
                get: function () {
                    return this._offset;
                },
                //! setter: page offset
                set: function (offset) {
                    this._offset = offset;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(PageProfile.prototype, "height", {
                //! getter: 実際にページに割り当てられている高さ
                get: function () {
                    return this._height;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(PageProfile.prototype, "status", {
                //! getter: 状態取得
                get: function () {
                    return this._status;
                },
                enumerable: true,
                configurable: true
            });
            return PageProfile;
        }());
        UI.PageProfile = PageProfile;
    })(UI = CDP.UI || (CDP.UI = {}));
})(CDP || (CDP = {}));
var CDP;
(function (CDP) {
    var UI;
    (function (UI) {
        var TAG = "[CDP.UI.GroupProfile] ";
        /**
         * @class GroupProfile
         * @brief ラインをグループ管理するプロファイルクラス
         *        本クラスでは直接 DOM を操作してはいけない
         */
        var GroupProfile = /** @class */ (function () {
            /**
             * constructor
             *
             * @param _id    {String}             [in] GroupProfile の ID
             * @param _owner {ExpandableListView} [in] 管理者である ExpandableListView インスタンス
             */
            function GroupProfile(_id, _owner) {
                this._id = _id;
                this._owner = _owner;
                this._parent = null; //!< 親 GroupProfile インスタンス
                this._children = []; //!< 子 GroupProfile インスタンス
                this._expanded = false; //!< 開閉情報
                this._status = "unregistered"; //!< _owner への登録状態 [ unregistered | registered ]
                this._mapLines = {}; //!< 自身が管轄する LineProfile を key とともに格納
            }
            ///////////////////////////////////////////////////////////////////////
            // public method
            /**
             * 本 GroupProfile が管理する List を作成して登録
             *
             * @param height      {Number}   [in] ラインの高さ
             * @param initializer {Function} [in] ListItemView 派生クラスのコンストラクタ
             * @param info        {Object}   [in] initializer に渡されるオプション引数
             * @param layoutKey   {String}   [in] layout 毎に使用する識別子 (オプショナル)
             * @return {GroupProfile} 本インスタンス
             */
            GroupProfile.prototype.addItem = function (height, initializer, info, layoutKey) {
                var line;
                var options = $.extend({}, { groupProfile: this }, info);
                if (null == layoutKey) {
                    layoutKey = GroupProfile.LAYOUT_KEY_DEFAULT;
                }
                if (null == this._mapLines[layoutKey]) {
                    this._mapLines[layoutKey] = [];
                }
                line = new UI.LineProfile(this._owner.core, Math.floor(height), initializer, options);
                // _owner の管理下にあるときは速やかに追加
                if (("registered" === this._status) &&
                    (null == this._owner.layoutKey || layoutKey === this._owner.layoutKey)) {
                    this._owner._addLine(line, this.getLastLineIndex() + 1);
                    this._owner.update();
                }
                this._mapLines[layoutKey].push(line);
                return this;
            };
            GroupProfile.prototype.addChildren = function (target) {
                var _this = this;
                var children = (target instanceof Array) ? target : [target];
                children.forEach(function (child) {
                    child.setParent(_this);
                });
                this._children = this._children.concat(children);
                return this;
            };
            /**
             * 親 GroupProfile を取得
             *
             * @return {GroupProfile} GroupProfile 親 インスタンス
             */
            GroupProfile.prototype.getParent = function () {
                return this._parent;
            };
            /**
             * 子 GroupProfile を取得
             *
             * @return {GroupProfile[]} GroupProfile 子 インスタンス配列
             */
            GroupProfile.prototype.getChildren = function () {
                return this._children;
            };
            /**
             * 子 Group を持っているか判定
             * layoutKey が指定されれば、layout の状態まで判定
             *
             * @param layoutKey {String} [in] layout 毎に使用する識別子 (オプショナル)
             * @return {Boolean} true: 有, false: 無
             */
            GroupProfile.prototype.hasChildren = function (layoutKey) {
                if (this._children.length <= 0) {
                    return false;
                }
                else if (null != layoutKey) {
                    return this._children[0].hasLayoutKeyOf(layoutKey);
                }
                else {
                    return true;
                }
            };
            /**
             * layout の状態を判定
             *
             * @param layoutKey {String} [in] layout 毎に使用する識別子
             * @return {Boolean} true: 有, false: 無
             */
            GroupProfile.prototype.hasLayoutKeyOf = function (layoutKey) {
                if (null == layoutKey) {
                    layoutKey = GroupProfile.LAYOUT_KEY_DEFAULT;
                }
                return (null != this._mapLines[layoutKey]);
            };
            /**
             * グループ展開
             */
            GroupProfile.prototype.expand = function () {
                var _this = this;
                var lines = [];
                if (this._lines.length < 0) {
                    console.warn(TAG + "this group has no lines.");
                }
                else if (!this.hasChildren()) {
                    console.warn(TAG + "this group has no children.");
                }
                else if (!this.isExpanded()) {
                    lines = this.queryOperationTarget("registered");
                    this._expanded = true;
                    if (0 < lines.length) {
                        this._owner.statusScope("expanding", function () {
                            // 自身を更新
                            _this._lines.forEach(function (line) {
                                line.refresh();
                            });
                            // 配下を更新
                            _this._owner._addLine(lines, _this.getLastLineIndex() + 1);
                            _this._owner.update();
                        });
                    }
                }
            };
            /**
             * グループ収束
             *
             * @param delay {Number} [in] 要素削除に費やす遅延時間. 既定: animationDuration 値
             */
            GroupProfile.prototype.collapse = function (delay) {
                var _this = this;
                var lines = [];
                if (!this.hasChildren()) {
                    console.warn(TAG + "this group has no children.");
                }
                else if (this.isExpanded()) {
                    lines = this.queryOperationTarget("unregistered");
                    this._expanded = false;
                    if (0 < lines.length) {
                        delay = (null != delay) ? delay : this._owner.core.getListViewOptions().animationDuration;
                        this._owner.statusScope("collapsing", function () {
                            // 自身を更新
                            _this._lines.forEach(function (line) {
                                line.refresh();
                            });
                            // 配下を更新
                            _this._owner.removeItem(lines[0].index, lines.length, delay);
                            _this._owner.update();
                        });
                    }
                }
            };
            /**
             * 自身をリストの可視領域に表示
             *
             * @param options {EnsureVisibleOptions} [in] オプション
             */
            GroupProfile.prototype.ensureVisible = function (options) {
                if (0 < this._lines.length) {
                    this._owner.ensureVisible(this._lines[0].index, options);
                }
                else if (null != options.callback) {
                    options.callback();
                }
            };
            /**
             * 開閉のトグル
             *
             * @param delay {Number} [in] collapse の要素削除に費やす遅延時間. 既定: animationDuration 値
             */
            GroupProfile.prototype.toggle = function (delay) {
                if (this._expanded) {
                    this.collapse(delay);
                }
                else {
                    this.expand();
                }
            };
            /**
             * 展開状態を判定
             *
             * @return {Boolean} true: 展開, false:収束
             */
            GroupProfile.prototype.isExpanded = function () {
                return this._expanded;
            };
            /**
             * list view へ登録
             * Top Group のみ登録可能
             *
             * @param insertTo {Number} 挿入位置を index で指定
             * @return {GroupProfile} 本インスタンス
             */
            GroupProfile.prototype.register = function (insertTo) {
                if (this._parent) {
                    console.error(TAG + "logic error: 'register' method is acceptable only top group.");
                }
                else {
                    this._owner._addLine(this.preprocess("registered"), insertTo);
                }
                return this;
            };
            /**
             * list view へ復元
             * Top Group のみ登録可能
             *
             * @return {GroupProfile} 本インスタンス
             */
            GroupProfile.prototype.restore = function () {
                var lines = [];
                if (this._parent) {
                    console.error(TAG + "logic error: 'restore' method is acceptable only top group.");
                }
                else if (this._lines) {
                    if (this._expanded) {
                        lines = this._lines.concat(this.queryOperationTarget("active"));
                    }
                    else {
                        lines = this._lines;
                    }
                    this._owner._addLine(lines);
                }
                return this;
            };
            /**
             * 配下の最後の line index を取得
             *
             * @param withActiveChildren {Boolean} [in] 登録済みの子 GroupProfile を含めて検索する場合は true を指定
             * @return {Number} index. エラーの場合は null.
             */
            GroupProfile.prototype.getLastLineIndex = function (withActiveChildren) {
                var _this = this;
                if (withActiveChildren === void 0) { withActiveChildren = false; }
                var lines = (function () {
                    var _lines;
                    if (withActiveChildren) {
                        _lines = _this.queryOperationTarget("active");
                    }
                    if (null == lines || lines.length <= 0) {
                        _lines = _this._lines;
                    }
                    return _lines;
                })();
                if (lines.length <= 0) {
                    console.error(TAG + "logic error: this group is stil not registered.");
                    return null;
                }
                else {
                    return lines[lines.length - 1].index;
                }
            };
            Object.defineProperty(GroupProfile.prototype, "id", {
                /**
                 * ID を取得
                 *
                 * @return {String} 割り振られた ID
                 */
                get: function () {
                    return this._id;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(GroupProfile.prototype, "status", {
                /**
                 * ステータスを取得
                 *
                 * @return {String} ステータス文字列
                 */
                get: function () {
                    return this._status;
                },
                enumerable: true,
                configurable: true
            });
            ///////////////////////////////////////////////////////////////////////
            // private method
            /* tslint:disable:no-unused-variable */
            /**
             * 親 Group 指定
             *
             * @param parent {GroupProfile} [in] 親 GroupProfile インスタンス
             */
            GroupProfile.prototype.setParent = function (parent) {
                this._parent = parent;
            };
            /* tslint:enable:no-unused-variable */
            /**
             * register / unregister の前処理
             *
             * @param newStatus {String} [in] 新ステータス文字列
             * @return {LineProfile[]} 更新すべき LineProfile の配列
             */
            GroupProfile.prototype.preprocess = function (newStatus) {
                var lines = [];
                if (newStatus !== this._status && null != this._lines) {
                    lines = this._lines;
                }
                this._status = newStatus;
                return lines;
            };
            /**
             * 操作対象の LineProfile 配列を取得
             *
             * @param newStatus {String} [in] 新ステータス文字列
             * @return {LineProfile[]} 操作対象の LineProfile の配列
             */
            GroupProfile.prototype.queryOperationTarget = function (operation) {
                var findTargets = function (group) {
                    var lines = [];
                    group._children.forEach(function (child) {
                        switch (operation) {
                            case "registered":
                                lines = lines.concat(child.preprocess(operation));
                                break;
                            case "unregistered":
                                lines = lines.concat(child.preprocess(operation));
                                break;
                            case "active":
                                if (null != child._lines) {
                                    lines = lines.concat(child._lines);
                                }
                                break;
                            default:
                                console.warn(TAG + "unknown operation: " + operation);
                                return;
                        }
                        if (child.isExpanded()) {
                            lines = lines.concat(findTargets(child));
                        }
                    });
                    return lines;
                };
                return findTargets(this);
            };
            Object.defineProperty(GroupProfile.prototype, "_lines", {
                /**
                 * 自身の管理するアクティブな LineProfie を取得
                 *
                 * @return {LineProfile[]} LineProfie 配列
                 */
                get: function () {
                    var key = this._owner.layoutKey;
                    if (null != key) {
                        return this._mapLines[key];
                    }
                    else {
                        return this._mapLines[GroupProfile.LAYOUT_KEY_DEFAULT];
                    }
                },
                enumerable: true,
                configurable: true
            });
            GroupProfile.LAYOUT_KEY_DEFAULT = "-layout-default";
            return GroupProfile;
        }());
        UI.GroupProfile = GroupProfile;
    })(UI = CDP.UI || (CDP.UI = {}));
})(CDP || (CDP = {}));
var CDP;
(function (CDP) {
    var UI;
    (function (UI) {
        var _Utils = CDP.UI._ListViewUtils;
        var TAG = "[CDP.UI.ScrollerElement] ";
        /**
         * @class ScrollerElement
         * @brief HTMLElement の Scroller クラス
         */
        var ScrollerElement = /** @class */ (function () {
            function ScrollerElement(element, options) {
                this._$target = null;
                this._$scrollMap = null;
                this._listviewOptions = null;
                this._$target = $(element);
                this._listviewOptions = options;
            }
            //! Scroller の型を取得
            ScrollerElement.prototype.getType = function () {
                return ScrollerElement.TYPE;
            };
            //! position 取得
            ScrollerElement.prototype.getPos = function () {
                return this._$target.scrollTop();
            };
            //! position の最大値を取得
            ScrollerElement.prototype.getPosMax = function () {
                if (null == this._$scrollMap) {
                    this._$scrollMap = this._$target.children().first();
                }
                return _Utils.max(this._$scrollMap.height() - this._$target.height(), 0);
            };
            //! イベント登録
            ScrollerElement.prototype.on = function (type, func) {
                switch (type) {
                    case "scroll":
                        this._$target.on("scroll", func);
                        break;
                    case "scrollstop":
                        this._$target.on("scrollstop", func);
                        break;
                    default:
                        console.warn(TAG + "unsupported type: " + type);
                        break;
                }
            };
            //! イベント登録解除
            ScrollerElement.prototype.off = function (type, func) {
                switch (type) {
                    case "scroll":
                        this._$target.off("scroll", func);
                        break;
                    case "scrollstop":
                        this._$target.off("scrollstop", func);
                        break;
                    default:
                        console.warn(TAG + "unsupported type: " + type);
                        break;
                }
            };
            //! スクロール位置を指定
            ScrollerElement.prototype.scrollTo = function (pos, animate, time) {
                if (!this._listviewOptions.enableAnimation || !animate) {
                    this._$target.scrollTop(pos);
                }
                else {
                    if (null == time) {
                        time = this._listviewOptions.animationDuration;
                    }
                    this._$target.animate({
                        scrollTop: pos
                    }, time);
                }
            };
            //! Scroller の状態更新
            ScrollerElement.prototype.update = function () {
                // noop.
            };
            //! Scroller の破棄
            ScrollerElement.prototype.destroy = function () {
                this._$scrollMap = null;
                if (this._$target) {
                    this._$target.off();
                    this._$target = null;
                }
            };
            Object.defineProperty(ScrollerElement, "TYPE", {
                //! タイプ定義
                get: function () {
                    return "element-overflow";
                },
                enumerable: true,
                configurable: true
            });
            //! factory 取得
            ScrollerElement.getFactory = function () {
                var factory = function (element, options) {
                    return new ScrollerElement(element, options);
                };
                // set type signature.
                factory.type = ScrollerElement.TYPE;
                return factory;
            };
            return ScrollerElement;
        }());
        UI.ScrollerElement = ScrollerElement;
    })(UI = CDP.UI || (CDP.UI = {}));
})(CDP || (CDP = {}));
var CDP;
(function (CDP) {
    var UI;
    (function (UI) {
        var _Utils = CDP.UI._ListViewUtils;
        var TAG = "[CDP.UI.ScrollerNative] ";
        /**
         * @class ScrollerNative
         * @brief Browser Native の Scroller クラス
         */
        var ScrollerNative = /** @class */ (function () {
            //! constructor
            function ScrollerNative(options) {
                this._$body = null;
                this._$target = null;
                this._listviewOptions = null;
                this._$target = $(document);
                this._$body = $("body");
                this._listviewOptions = options;
            }
            //! Scroller の型を取得
            ScrollerNative.prototype.getType = function () {
                return ScrollerNative.TYPE;
            };
            //! position 取得
            ScrollerNative.prototype.getPos = function () {
                return this._$target.scrollTop();
            };
            //! position の最大値を取得
            ScrollerNative.prototype.getPosMax = function () {
                return _Utils.max(this._$target.height() - window.innerHeight, 0);
            };
            //! イベント登録
            ScrollerNative.prototype.on = function (type, func) {
                switch (type) {
                    case "scroll":
                        this._$target.on("scroll", func);
                        break;
                    case "scrollstop":
                        $(window).on("scrollstop", func);
                        break;
                    default:
                        console.warn(TAG + "unsupported type: " + type);
                        break;
                }
            };
            //! イベント登録解除
            ScrollerNative.prototype.off = function (type, func) {
                switch (type) {
                    case "scroll":
                        this._$target.off("scroll", func);
                        break;
                    case "scrollstop":
                        $(window).off("scrollstop", func);
                        break;
                    default:
                        console.warn(TAG + "unsupported type: " + type);
                        break;
                }
            };
            //! スクロール位置を指定
            ScrollerNative.prototype.scrollTo = function (pos, animate, time) {
                if (!this._listviewOptions.enableAnimation || !animate) {
                    this._$body.scrollTop(pos);
                }
                else {
                    if (null == time) {
                        time = this._listviewOptions.animationDuration;
                    }
                    this._$body.animate({
                        scrollTop: pos
                    }, time);
                }
            };
            //! Scroller の状態更新
            ScrollerNative.prototype.update = function () {
                // noop.
            };
            //! Scroller の破棄
            ScrollerNative.prototype.destroy = function () {
                this._$target = null;
            };
            Object.defineProperty(ScrollerNative, "TYPE", {
                //! タイプ定義
                get: function () {
                    return "native-scroll";
                },
                enumerable: true,
                configurable: true
            });
            //! factory 取得
            ScrollerNative.getFactory = function () {
                var factory = function (element, options) {
                    return new ScrollerNative(options);
                };
                // set type signature.
                factory.type = ScrollerNative.TYPE;
                return factory;
            };
            return ScrollerNative;
        }());
        UI.ScrollerNative = ScrollerNative;
    })(UI = CDP.UI || (CDP.UI = {}));
})(CDP || (CDP = {}));
var CDP;
(function (CDP) {
    var UI;
    (function (UI) {
        var _Config = CDP.UI.ListViewGlobalConfig;
        var _Utils = CDP.UI._ListViewUtils;
        var TAG = "[CDP.UI.ScrollerIScroll] ";
        /**
         * @class ScrollerIScroll
         * @brief iScroll を使用した Scroller クラス
         */
        var ScrollerIScroll = /** @class */ (function () {
            function ScrollerIScroll($owner, element, iscrollOptions, listviewOptions) {
                this._$owner = null;
                this._iscroll = null;
                this._refreshTimerId = null;
                this._$wrapper = null;
                this._$scroller = null;
                this._listviewOptions = null;
                if (null != UI.global.IScroll) {
                    this._$owner = $owner;
                    this._iscroll = new IScroll(element, iscrollOptions);
                    this._$wrapper = $(this._iscroll.wrapper);
                    this._$scroller = $(this._iscroll.scroller);
                    this._listviewOptions = listviewOptions;
                }
                else {
                    console.error(TAG + "iscroll module doesn't load.");
                }
            }
            //! Scroller の型を取得
            ScrollerIScroll.prototype.getType = function () {
                return ScrollerIScroll.TYPE;
            };
            //! position 取得
            ScrollerIScroll.prototype.getPos = function () {
                var pos = this._iscroll.getComputedPosition().y;
                if (_.isNaN(pos)) {
                    pos = 0;
                }
                else {
                    pos = -pos;
                }
                return pos;
            };
            //! position の最大値を取得
            ScrollerIScroll.prototype.getPosMax = function () {
                return _Utils.max(-this._iscroll.maxScrollY, 0);
            };
            //! イベント登録
            ScrollerIScroll.prototype.on = function (type, func) {
                switch (type) {
                    case "scroll":
                        this._iscroll.on("scroll", func);
                        break;
                    case "scrollstop":
                        this._iscroll.on("scrollEnd", func);
                        break;
                    default:
                        console.warn(TAG + "unsupported type: " + type);
                        break;
                }
            };
            //! イベント登録解除
            ScrollerIScroll.prototype.off = function (type, func) {
                switch (type) {
                    case "scroll":
                        this._iscroll.off("scroll", func);
                        break;
                    case "scrollstop":
                        this._iscroll.on("scrollEnd", func);
                        break;
                    default:
                        console.warn(TAG + "unsupported type: " + type);
                        break;
                }
            };
            //! スクロール位置を指定
            ScrollerIScroll.prototype.scrollTo = function (pos, animate, time) {
                time = 0;
                if (this._listviewOptions.enableAnimation && animate) {
                    time = time || this._listviewOptions.animationDuration;
                }
                this._iscroll.scrollTo(0, -pos, time);
            };
            //! Scroller の状態更新
            ScrollerIScroll.prototype.update = function () {
                var _this = this;
                if (this._$owner) {
                    // update wrapper
                    (function () {
                        var ownerHeight = _this._$owner.height();
                        if (ownerHeight !== _this._$wrapper.height()) {
                            _this._$wrapper.height(ownerHeight);
                        }
                    })();
                    if (null != this._refreshTimerId) {
                        clearTimeout(this._refreshTimerId);
                    }
                    var proc_1 = function () {
                        if (_this._$scroller && _this._$scroller.height() !== _this._iscroll.scrollerHeight) {
                            _this._iscroll.refresh();
                            _this._refreshTimerId = setTimeout(proc_1, _this._listviewOptions.scrollMapRefreshInterval);
                        }
                        else {
                            _this._refreshTimerId = null;
                        }
                    };
                    this._iscroll.refresh();
                    this._refreshTimerId = setTimeout(proc_1, this._listviewOptions.scrollMapRefreshInterval);
                }
            };
            //! Scroller の破棄
            ScrollerIScroll.prototype.destroy = function () {
                this._$scroller = null;
                this._$wrapper = null;
                this._iscroll.destroy();
                this._$owner = null;
            };
            Object.defineProperty(ScrollerIScroll, "TYPE", {
                //! タイプ定義
                get: function () {
                    return "iscroll";
                },
                enumerable: true,
                configurable: true
            });
            //! factory 取得
            ScrollerIScroll.getFactory = function (options) {
                var defaultOpt = {
                    scrollX: false,
                    bounce: false,
                    tap: true,
                    click: true,
                    mouseWheel: true,
                    scrollbars: true,
                    interactiveScrollbars: true,
                    shrinkScrollbars: "scale",
                    fadeScrollbars: true,
                    preventDefault: false,
                    disablePointer: true,
                    disableMouse: false,
                    disableTouch: false,
                    probeType: 2,
                };
                var iscrollOptions = $.extend({}, defaultOpt, options);
                var factory = function (element, listviewOptions) {
                    var $owner = $(element);
                    var $map = $owner.find(_Config.SCROLL_MAP_SELECTOR);
                    var $wrapper = $("<div class='" + _Config.WRAPPER_CLASS + "'></div>")
                        .css({
                        position: "absolute",
                        width: "100%",
                        height: "100%",
                        overflow: "hidden",
                    });
                    $map.wrap($wrapper);
                    return new ScrollerIScroll($owner, _Config.WRAPPER_SELECTOR, iscrollOptions, listviewOptions);
                };
                // set type signature.
                factory.type = ScrollerIScroll.TYPE;
                return factory;
            };
            return ScrollerIScroll;
        }());
        UI.ScrollerIScroll = ScrollerIScroll;
    })(UI = CDP.UI || (CDP.UI = {}));
})(CDP || (CDP = {}));
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var CDP;
(function (CDP) {
    var UI;
    (function (UI) {
        var TAG = "[CDP.UI.ListItemView] ";
        /**
         * @class ListItemView
         * @brief ListView が扱う ListItem コンテナクラス
         */
        var ListItemView = /** @class */ (function (_super) {
            __extends(ListItemView, _super);
            /**
             * constructor
             */
            function ListItemView(options) {
                var _this = _super.call(this, options) || this;
                _this._owner = null;
                _this._lineProfile = null;
                _this._owner = options.owner;
                if (options.$el) {
                    var delegates = _this.events ? true : false;
                    _this.setElement(options.$el, delegates);
                }
                _this._lineProfile = options.lineProfile;
                return _this;
            }
            ///////////////////////////////////////////////////////////////////////
            // Implements: ListItemView
            //! 描画: framework から呼び出されるため、オーバーライド必須
            ListItemView.prototype.render = function () {
                console.warn(TAG + "need override 'render()' method.");
                return this;
            };
            //! 自身の Line インデックスを取得
            ListItemView.prototype.getIndex = function () {
                return this._lineProfile.index;
            };
            //! 自身に指定された高さを取得
            ListItemView.prototype.getSpecifiedHeight = function () {
                return this._lineProfile.height;
            };
            //! child node が存在するか判定
            ListItemView.prototype.hasChildNode = function () {
                if (!this.$el) {
                    return false;
                }
                else {
                    return 0 < this.$el.children().length;
                }
            };
            /**
             * 高さを更新
             *
             * @param newHeight {Number}              [in] 新しい高さ
             * @param options   {UpdateHeightOptions} [in] line の高さ更新時に影響するすべての LineProfile の再計算を行う場合は { reflectAll: true }
             * @return {ListItemView} インスタンス
             */
            ListItemView.prototype.updateHeight = function (newHeight, options) {
                if (this.$el) {
                    if (this.getSpecifiedHeight() !== newHeight) {
                        this._lineProfile.updateHeight(newHeight, options);
                        this.$el.height(newHeight);
                    }
                }
                return this;
            };
            ///////////////////////////////////////////////////////////////////////
            // Implements: IComposableView
            /**
             * すでに定義された Backbone.View を基底クラスに設定し、extend を実行する。
             *
             * @param derives         {Backbone.View|Backbone.View[]} [in] 合成元の View クラス
             * @param properties      {Object}                        [in] prototype プロパティ
             * @param classProperties {Object}                        [in] static プロパティ
             * @return {Backbone.View|Backbone.View[]} 新規に生成された View のコンストラクタ
             */
            ListItemView.compose = function (derives, properties, classProperties) {
                var composed = UI.composeViews(ListItemView, derives);
                return composed.extend(properties, classProperties);
            };
            ///////////////////////////////////////////////////////////////////////
            // Override: Backbone.View
            //! 開放
            ListItemView.prototype.remove = function () {
                // xperia AX Jelly Bean (4.1.2)にて、メモリーリークを軽減させる効果
                this.$el.find("figure").css("background-image", "none");
                // this.$el は再利用するため破棄しない
                this.$el.children().remove();
                this.$el.off();
                this.$el = null;
                this.stopListening();
                this._lineProfile = null;
                return this;
            };
            Object.defineProperty(ListItemView.prototype, "owner", {
                ///////////////////////////////////////////////////////////////////////
                // short cut methods
                //! Owner 取得
                get: function () {
                    return this._owner;
                },
                enumerable: true,
                configurable: true
            });
            return ListItemView;
        }(Backbone.View));
        UI.ListItemView = ListItemView;
    })(UI = CDP.UI || (CDP.UI = {}));
})(CDP || (CDP = {}));
/* tslint:disable:no-bitwise no-unused-expression */
/* jshint -W030 */ // for "Expected an assignment or function call and instead saw an expression"
var CDP;
(function (CDP) {
    var UI;
    (function (UI) {
        var _Config = CDP.UI.ListViewGlobalConfig;
        var _Utils = CDP.UI._ListViewUtils;
        var TAG = "[CDP.UI.ScrollManager] ";
        /**
         * @class ScrollManager
         * @brief メモリ管理を行うスクロール処理のコアロジック実装クラス
         *        本クラスは IListView インターフェイスを持ち DOM にアクセスするが、Backbone.View を継承しない
         */
        var ScrollManager = /** @class */ (function () {
            /**
             * constructor
             *
             * @param _$root  {JQuery} [in] 管理対象のルートエレメント
             * @param options {ListViewOptions} [in] オプション
             */
            function ScrollManager(options) {
                var _this = this;
                this._$root = null; //!< Scroll 対象のルートオブジェクト
                this._$map = null; //!< Scroll Map element を格納
                this._mapHeight = 0; //!< Scroll Map の高さを格納 (_$map の状態に依存させない)
                this._scroller = null; //!< Scroll に使用する IScroller インスタンス
                this._settings = null; //!< ScrollManager オプションを格納
                this._active = true; //!< UI 表示中は true に指定
                this._scrollEventHandler = null; //!< Scroll Event Handler
                this._scrollStopEventHandler = null; //!< Scroll Stop Event Handler
                this._baseHeight = 0; //!< 高さの基準値
                this._lines = []; //!< 管理下にある LineProfile 配列
                this._pages = []; //!< 管理下にある PageProfile 配列
                //! 最新の表示領域情報を格納 (Scroll 中の更新処理に使用)
                this._lastActivePageContext = {
                    index: 0,
                    from: 0,
                    to: 0,
                    pos: 0,
                };
                this._backup = {}; //!< データの backup 領域. key と _lines を格納。派生クラスで拡張可能。
                // ListViewOptions 既定値
                var defOptions = {
                    scrollerFactory: UI.ScrollerElement.getFactory(),
                    enableHiddenPage: false,
                    enableTransformOffset: false,
                    scrollMapRefreshInterval: 200,
                    scrollRefreshDistance: 200,
                    pagePrepareCount: 3,
                    pagePreloadCount: 1,
                    enableAnimation: true,
                    animationDuration: 0,
                    baseDepth: "auto",
                    itemTagName: "li",
                    removeItemWithTransition: true,
                    useDummyInactiveScrollMap: false,
                };
                // 設定格納
                this._settings = $.extend({}, defOptions, options);
                // スクロールイベント
                this._scrollEventHandler = function (event) {
                    _this.onScroll(_this._scroller.getPos());
                };
                // スクロール停止イベント
                this._scrollStopEventHandler = function (event) {
                    _this.onScrollStop(_this._scroller.getPos());
                };
            }
            ///////////////////////////////////////////////////////////////////////
            // public method
            //! 内部オブジェクトの初期化
            ScrollManager.prototype.initialize = function ($root, height) {
                // 既に構築されていた場合は破棄
                if (this._$root) {
                    this.destroy();
                }
                this._$root = $root;
                this._$map = $root.hasClass(_Config.SCROLL_MAP_CLASS) ? $root : $root.find(_Config.SCROLL_MAP_SELECTOR);
                // _$map が無い場合は初期化しない
                if (this._$map.length <= 0) {
                    this._$root = null;
                    return false;
                }
                this._scroller = this.createScroller();
                this.setBaseHeight(height);
                this.setScrollerCondition();
                return true;
            };
            //! 内部オブジェクトの破棄
            ScrollManager.prototype.destroy = function () {
                if (this._scroller) {
                    this.resetScrollerCondition();
                    this._scroller.destroy();
                    this._scroller = null;
                }
                this.release();
                this._$map = null;
                this._$root = null;
            };
            //! ページの基準値を取得
            ScrollManager.prototype.setBaseHeight = function (height) {
                this._baseHeight = height;
                if (this._baseHeight <= 0) {
                    console.warn(TAG + "invalid base height: " + this._baseHeight);
                }
                if (this._scroller) {
                    this._scroller.update();
                }
            };
            //! active 状態設定
            ScrollManager.prototype.setActiveState = function (active) {
                this._active = active;
                this.treatScrollPosition();
            };
            //! active 状態判定
            ScrollManager.prototype.isActive = function () {
                return this._active;
            };
            //! scroller の種類を取得
            ScrollManager.prototype.getScrollerType = function () {
                return this._settings.scrollerFactory.type;
            };
            /**
             * 状態に応じたスクロール位置の保存/復元
             * cdp.ui.fs.js: PageTabListView が実験的に使用
             * TODO: ※iscroll は未対応
             */
            ScrollManager.prototype.treatScrollPosition = function () {
                var _this = this;
                var i;
                var transform = {};
                var updateOffset = function ($target) {
                    var offset = (_this._scroller.getPos() - _this._lastActivePageContext.pos);
                    if (_Utils.getCssMatrixValue($target, "translateY") !== offset) {
                        for (i = 0; i < _Utils.cssPrefixes.length; i++) {
                            transform[_Utils.cssPrefixes[i] + "transform"] = "translate3d(0px," + offset + "px,0px)";
                        }
                        $target.css(transform);
                        return $target;
                    }
                };
                var clearOffset = function ($target) {
                    for (i = 0; i < _Utils.cssPrefixes.length; i++) {
                        transform[_Utils.cssPrefixes[i] + "transform"] = "";
                    }
                    $target.css(transform);
                    return $target;
                };
                if (this._active) {
                    // 以下のスコープの処理に対して画面更新を1回にできないため、JB, ICS ではちらつきが発生する。Kitkat 以降は良好。
                    (function () {
                        if (_this._scroller) {
                            _this._scroller.scrollTo(_this._lastActivePageContext.pos, false, 0);
                        }
                        clearOffset(_this._$map).css("display", "block");
                    })();
                    if (this._settings.useDummyInactiveScrollMap) {
                        this.prepareInactiveMap().remove();
                    }
                }
                else if (this._scroller) {
                    if (this._settings.useDummyInactiveScrollMap) {
                        updateOffset(this.prepareInactiveMap());
                    }
                    else {
                        updateOffset(this._$map);
                    }
                }
            };
            //! inactive 用 Map の生成
            ScrollManager.prototype.prepareInactiveMap = function () {
                var $parent = this._$map.parent();
                var $inactiveMap = $parent.find(_Config.INACTIVE_CLASS_SELECTOR);
                if ($inactiveMap.length <= 0) {
                    var currentPageIndex_1 = this.getPageIndex();
                    var $listItemViews = this._$map.clone().children().filter(function (index, element) {
                        var pageIndex = ~~$(element).attr(_Config.DATA_PAGE_INDEX);
                        if (currentPageIndex_1 - 1 <= pageIndex || pageIndex <= currentPageIndex_1 + 1) {
                            return true;
                        }
                        else {
                            return false;
                        }
                    });
                    $inactiveMap = $("<section class='" + _Config.SCROLL_MAP_CLASS + " " + _Config.INACTIVE_CLASS + "'></section>")
                        .append($listItemViews)
                        .height(this._mapHeight);
                    $parent.append($inactiveMap);
                    this._$map.css("display", "none");
                }
                return $inactiveMap;
            };
            ///////////////////////////////////////////////////////////////////////
            // Implements: IListView プロファイル管理
            //! 初期化済みか判定
            ScrollManager.prototype.isInitialized = function () {
                return !!this._$root;
            };
            //! プロパティを指定して、LineProfile を管理
            ScrollManager.prototype.addItem = function (height, initializer, info, insertTo) {
                this._addLine(new UI.LineProfile(this, Math.floor(height), initializer, info), insertTo);
            };
            //! プロパティを指定して、LineProfile を管理. 登録 framework が使用する
            ScrollManager.prototype._addLine = function (_line, insertTo) {
                var lines = (_line instanceof Array) ? _line : [_line];
                var i, n;
                var deltaHeight = 0;
                var addTail = false;
                if (null == insertTo) {
                    insertTo = this._lines.length;
                }
                if (insertTo === this._lines.length) {
                    addTail = true;
                }
                // scroll map の更新
                for (i = 0, n = lines.length; i < n; i++) {
                    deltaHeight += lines[i].height;
                }
                this.updateScrollMapHeight(deltaHeight);
                // 挿入
                for (i = lines.length - 1; i >= 0; i--) {
                    this._lines.splice(insertTo, 0, lines[i]);
                }
                // page 設定の解除
                if (!addTail) {
                    if (0 === insertTo) {
                        this.clearPage();
                    }
                    else if (null != this._lines[insertTo - 1].pageIndex) {
                        this.clearPage(this._lines[insertTo - 1].pageIndex);
                    }
                }
                // offset の再計算
                this.updateProfiles(insertTo);
            };
            ScrollManager.prototype.removeItem = function (index, arg2, arg3) {
                if (index instanceof Array) {
                    this._removeLines(index, arg2);
                }
                else {
                    this._removeLine(index, arg2, arg3);
                }
            };
            //! 指定した LineProfile を削除: 連続 index 版
            ScrollManager.prototype._removeLine = function (index, size, delay) {
                var _this = this;
                if (null == size) {
                    size = 1;
                }
                if (index < 0 || this._lines.length < index + size) {
                    console.error(TAG + "logic error. removeItem(), invalid index: " + index);
                    return;
                }
                delay = (null != delay) ? delay : 0;
                var removed = [];
                var delta = 0;
                var mapTransition = false;
                // 削除候補と変化量の算出
                (function () {
                    var line;
                    for (var i = 0; i < size; i++) {
                        line = _this._lines[index + i];
                        delta += line.height;
                        // 削除要素の z-index の初期化
                        line.resetDepth();
                        removed.push(line);
                    }
                    // 自動設定・削除遅延時間が設定されかつ、スクロールポジションに変更がある場合は transition 設定
                    if (_this._settings.removeItemWithTransition && (0 < delay)) {
                        var current = _this.getScrollPos();
                        var posMax = _this.getScrollPosMax() - delta;
                        mapTransition = (posMax < current);
                    }
                })();
                // 更新
                (function () {
                    // transition 設定
                    if (mapTransition) {
                        _this.setupScrollMapTransition(_this._$map, delay);
                    }
                    // page 設定の解除
                    if (null != _this._lines[index].pageIndex) {
                        _this.clearPage(_this._lines[index].pageIndex);
                    }
                    // スクロール領域の更新
                    _this.updateScrollMapHeight(-delta);
                    // 配列から削除
                    _this._lines.splice(index, size);
                    // offset の再計算
                    _this.updateProfiles(index);
                    // 遅延削除
                    setTimeout(function () {
                        removed.forEach(function (line) {
                            line.inactivate();
                        });
                    }, delay);
                })();
            };
            //! 指定した LineProfile を削除: random access 版
            ScrollManager.prototype._removeLines = function (indexes, delay) {
                var _this = this;
                delay = (null != delay) ? delay : 0;
                for (var i = 0, n = indexes.length; i < n; i++) {
                    if (i < 0 || this._lines.length < i) {
                        console.error(TAG + "logic error. removeItem(), invalid index: " + i);
                        return;
                    }
                }
                var removed = [];
                var delta = 0;
                var mapTransition = false;
                // 削除候補と変化量の算出
                (function () {
                    var line;
                    indexes.forEach(function (index) {
                        line = _this._lines[index];
                        delta += line.height;
                        // 削除要素の z-index の初期化
                        line.resetDepth();
                        removed.push(line);
                    });
                    // 自動設定・削除遅延時間が設定されかつ、スクロールポジションに変更がある場合は transition 設定
                    if (_this._settings.removeItemWithTransition && (0 < delay)) {
                        var current = _this.getScrollPos();
                        var posMax = _this.getScrollPosMax() - delta;
                        mapTransition = (posMax < current);
                    }
                })();
                // 更新
                (function () {
                    // transition 設定
                    if (mapTransition) {
                        _this.setupScrollMapTransition(_this._$map, delay);
                    }
                    indexes.forEach(function (index) {
                        // page 設定の解除
                        if (null != _this._lines[index].pageIndex) {
                            _this.clearPage(_this._lines[index].pageIndex);
                        }
                        // 配列から削除
                        _this._lines.splice(index, 1);
                        // offset の再計算
                        _this.updateProfiles(index);
                    });
                    // スクロール領域の更新
                    _this.updateScrollMapHeight(-delta);
                    // 遅延削除
                    setTimeout(function () {
                        removed.forEach(function (line) {
                            line.inactivate();
                        });
                    }, delay);
                })();
            };
            //! scroll map のトランジション設定
            ScrollManager.prototype.setupScrollMapTransition = function ($map, delay) {
                var transitionEndHandler = function (event) {
                    $map.off(_Utils.transitionEnd);
                    _Utils.clearTransitions($map);
                };
                this._$map.on(_Utils.transitionEnd, transitionEndHandler);
                _Utils.setTransformsTransitions($map, "height", delay, "ease");
            };
            ScrollManager.prototype.getItemInfo = function (target) {
                var index;
                var parser = function ($target) {
                    if ($target.hasClass(_Config.LISTITEM_BASE_CLASS)) {
                        return ~~$target.attr(_Config.DATA_CONTAINER_INDEX);
                    }
                    else if ($target.hasClass(_Config.SCROLL_MAP_CLASS) || $target.length <= 0) {
                        console.warn(TAG + "cannot ditect line from event object.");
                        return null;
                    }
                    else {
                        return parser($target.parent());
                    }
                };
                if (target instanceof $.Event) {
                    index = parser($(target.currentTarget));
                }
                else if (typeof target === "number") {
                    index = target;
                }
                if (null == index) {
                    console.error(TAG + "logic error. unsupported arg type. type: " + typeof target);
                    return null;
                }
                else if (index < 0 || this._lines.length <= index) {
                    console.error(TAG + "logic error. invalid range. index: " + index);
                    return null;
                }
                return this._lines[index].info;
            };
            //! アクティブページを更新
            ScrollManager.prototype.refresh = function () {
                var _this = this;
                var targets = {};
                var searchCount = this._settings.pagePrepareCount + this._settings.pagePreloadCount;
                var currentPageIndex = this.getPageIndex();
                var highPriorityIndex = [];
                var oldExsistPage = _.filter(this._pages, function (page) {
                    return "inactive" !== page.status;
                });
                var changeState = function (index) {
                    if (index === currentPageIndex) {
                        targets[index] = "activate";
                        highPriorityIndex.push(index);
                    }
                    else if (_Utils.abs(currentPageIndex - index) <= _this._settings.pagePrepareCount) {
                        targets[index] = "activate";
                    }
                    else {
                        if (_this._settings.enableHiddenPage) {
                            targets[index] = "hide";
                        }
                        else {
                            targets[index] = "activate";
                        }
                    }
                    // current page の 前後は high priority にする
                    if (currentPageIndex + 1 === index || currentPageIndex - 1 === index) {
                        highPriorityIndex.push(index);
                    }
                };
                // 対象無し
                if (this._lines.length <= 0) {
                    return;
                }
                (function () {
                    var i = 0;
                    var pageIndex = 0;
                    var overflowPrev = 0, overflowNext = 0;
                    var beginIndex = currentPageIndex - searchCount;
                    var endIndex = currentPageIndex + searchCount;
                    for (pageIndex = beginIndex; pageIndex <= endIndex; pageIndex++) {
                        if (pageIndex < 0) {
                            overflowPrev++;
                            continue;
                        }
                        if (_this._pages.length <= pageIndex) {
                            overflowNext++;
                            continue;
                        }
                        changeState(pageIndex);
                    }
                    if (0 < overflowPrev) {
                        for (i = 0, pageIndex = currentPageIndex + searchCount + 1; i < overflowPrev; i++, pageIndex++) {
                            if (_this._pages.length <= pageIndex) {
                                break;
                            }
                            changeState(pageIndex);
                        }
                    }
                    if (0 < overflowNext) {
                        for (i = 0, pageIndex = currentPageIndex - searchCount - 1; i < overflowNext; i++, pageIndex--) {
                            if (pageIndex < 0) {
                                break;
                            }
                            changeState(pageIndex);
                        }
                    }
                })();
                // 不要になった page の inactivate
                oldExsistPage.forEach(function (page) {
                    var index = page.index;
                    if (null == targets[index]) {
                        page.inactivate();
                    }
                });
                // 優先 page の activate
                highPriorityIndex
                    .sort(function (lhs, rhs) {
                    if (lhs < rhs) {
                        return -1;
                    }
                    else if (lhs > rhs) {
                        return 1;
                    }
                    else {
                        return 0;
                    }
                })
                    .forEach(function (index) {
                    setTimeout(function () {
                        if (_this.isInitialized()) {
                            _this._pages[index] && _this._pages[index].activate();
                        }
                    }, 0);
                });
                // そのほかの page の 状態変更
                _.each(targets, function (action, key) {
                    setTimeout(function () {
                        if (_this.isInitialized()) {
                            var index = ~~key;
                            switch (action) {
                                case "activate":
                                    _this._pages[index] && _this._pages[index].activate();
                                    break;
                                case "hide":
                                    _this._pages[index] && _this._pages[index].hide();
                                    break;
                                case "inactivate":
                                    console.warn(TAG + "unexpected operation: inactivate");
                                    break;
                                default:
                                    console.warn(TAG + "unknown operation: " + targets[key]);
                                    break;
                            }
                        }
                    }, 0);
                });
                // 更新後に使用しなかった DOM を削除
                this.findRecycleElements().remove();
                this._lastActivePageContext.from = this._pages[currentPageIndex].getLineProfileFirst() ?
                    this._pages[currentPageIndex].getLineProfileFirst().index : 0;
                this._lastActivePageContext.to = this._pages[currentPageIndex].getLineProfileLast() ?
                    this._pages[currentPageIndex].getLineProfileLast().index : 0;
                this._lastActivePageContext.index = currentPageIndex;
            };
            //! 未アサインページを構築
            ScrollManager.prototype.update = function () {
                var index = this._pages.length;
                this.assignPage(index);
                this.refresh();
            };
            //! ページアサインを再構成
            ScrollManager.prototype.rebuild = function () {
                this.clearPage();
                this.assignPage();
                this.refresh();
            };
            //! 管轄データを破棄
            ScrollManager.prototype.release = function () {
                this._lines.forEach(function (line) {
                    line.inactivate();
                });
                this._pages = [];
                this._lines = [];
                if (this._$map) {
                    this._mapHeight = 0;
                    this._$map.height(0);
                }
            };
            ///////////////////////////////////////////////////////////////////////
            // Implements: IListView Backup / Restore
            //! 内部データをバックアップ
            ScrollManager.prototype.backup = function (key) {
                if (null == this._backup[key]) {
                    this._backup[key] = {
                        lines: this._lines,
                    };
                }
                return true;
            };
            //! 内部データをリストア
            ScrollManager.prototype.restore = function (key, rebuild) {
                if (rebuild === void 0) { rebuild = true; }
                if (null == this._backup[key]) {
                    return false;
                }
                if (0 < this._lines.length) {
                    this.release();
                }
                this._addLine(this._backup[key].lines);
                if (rebuild) {
                    this.rebuild();
                }
                return true;
            };
            //! バックアップデータの有無
            ScrollManager.prototype.hasBackup = function (key) {
                if (null != this._backup[key]) {
                    return true;
                }
                else {
                    return false;
                }
            };
            //! バックアップデータの破棄
            ScrollManager.prototype.clearBackup = function (key) {
                if (null == key) {
                    this._backup = {};
                    return true;
                }
                else if (null != this._backup[key]) {
                    delete this._backup[key];
                    return true;
                }
                else {
                    return false;
                }
            };
            Object.defineProperty(ScrollManager.prototype, "backupData", {
                //! バックアップデータにアクセス
                get: function () {
                    return this._backup;
                },
                enumerable: true,
                configurable: true
            });
            ///////////////////////////////////////////////////////////////////////
            // Implements: IListView Scroll
            //! スクロールイベントハンドラ設定/解除
            ScrollManager.prototype.setScrollHandler = function (handler, on) {
                if (this._scroller) {
                    if (on) {
                        this._scroller.on("scroll", handler);
                    }
                    else {
                        this._scroller.off("scroll", handler);
                    }
                }
            };
            //! スクロール終了イベントハンドラ設定/解除
            ScrollManager.prototype.setScrollStopHandler = function (handler, on) {
                if (this._scroller) {
                    if (on) {
                        this._scroller.on("scrollstop", handler);
                    }
                    else {
                        this._scroller.off("scrollstop", handler);
                    }
                }
            };
            //! スクロール位置を取得
            ScrollManager.prototype.getScrollPos = function () {
                return this._scroller ? this._scroller.getPos() : 0;
            };
            //! スクロール位置の最大値を取得
            ScrollManager.prototype.getScrollPosMax = function () {
                return this._scroller ? this._scroller.getPosMax() : 0;
            };
            //! スクロール位置を指定
            ScrollManager.prototype.scrollTo = function (pos, animate, time) {
                if (this._scroller) {
                    if (pos < 0) {
                        console.warn(TAG + "invalid position, too small. [pos: " + pos + "]");
                        pos = 0;
                    }
                    else if (this._scroller.getPosMax() < pos) {
                        console.warn(TAG + "invalid position, too big. [pos: " + pos + "]");
                        pos = this._scroller.getPosMax();
                    }
                    // pos のみ先駆けて更新
                    this._lastActivePageContext.pos = pos;
                    if (pos !== this._scroller.getPos()) {
                        this._scroller.scrollTo(pos, animate, time);
                    }
                }
            };
            //! 指定された ListItemView の表示を保証
            ScrollManager.prototype.ensureVisible = function (index, options) {
                var _this = this;
                if (index < 0 || this._lines.length <= index) {
                    console.warn(TAG + "ensureVisible(), invalid index, noop. [index: " + index + "]");
                    return;
                }
                else if (!this._scroller) {
                    console.warn(TAG + "scroller is not ready.");
                    return;
                }
                (function () {
                    var target = _this._lines[index];
                    var defaultOptions = {
                        partialOK: true,
                        setTop: false,
                        animate: _this._settings.enableAnimation,
                        time: _this._settings.animationDuration,
                        callback: function () { },
                    };
                    var operation = $.extend({}, defaultOptions, options);
                    var currentScope = {
                        from: _this._scroller.getPos(),
                        to: _this._scroller.getPos() + _this._baseHeight,
                    };
                    var targetScope = {
                        from: target.offset,
                        to: target.offset + target.height,
                    };
                    var isInScope = function () {
                        if (operation.partialOK) {
                            if (targetScope.from <= currentScope.from) {
                                if (currentScope.from <= targetScope.to) {
                                    return true;
                                }
                                else {
                                    return false;
                                }
                            }
                            else {
                                if (targetScope.from <= currentScope.to) {
                                    return true;
                                }
                                else {
                                    return false;
                                }
                            }
                        }
                        else {
                            if (currentScope.from <= targetScope.from && targetScope.to <= currentScope.to) {
                                return true;
                            }
                            else {
                                return false;
                            }
                        }
                    };
                    var detectPosition = function () {
                        if (targetScope.from < currentScope.from) {
                            return targetScope.from;
                        }
                        else if (currentScope.from < targetScope.from) {
                            return target.offset - target.height; // bottom 合わせは情報不足により不可
                        }
                        else {
                            console.warn(TAG + "logic error.");
                            return 0;
                        }
                    };
                    var pos;
                    if (operation.setTop) {
                        pos = targetScope.from;
                    }
                    else if (isInScope()) {
                        // noop.
                        operation.callback();
                        return;
                    }
                    else {
                        pos = detectPosition();
                    }
                    // 補正
                    if (pos < 0) {
                        pos = 0;
                    }
                    else if (_this._scroller.getPosMax() < pos) {
                        pos = _this._scroller.getPosMax();
                    }
                    setTimeout(operation.callback, operation.time);
                    _this.scrollTo(pos, operation.animate, operation.time);
                })();
            };
            ///////////////////////////////////////////////////////////////////////
            // implements: IListViewFramework:
            //! Scroll Map の高さを取得
            ScrollManager.prototype.getScrollMapHeight = function () {
                return this._$map ? this._mapHeight : 0;
            };
            //! Scroll Map の高さを更新. framework が使用する.
            ScrollManager.prototype.updateScrollMapHeight = function (delta) {
                if (this._$map) {
                    this._mapHeight += delta;
                    // for fail safe.
                    if (this._mapHeight < 0) {
                        this._mapHeight = 0;
                    }
                    this._$map.height(this._mapHeight);
                }
            };
            //! 内部 Profile の更新. framework が使用する.
            ScrollManager.prototype.updateProfiles = function (from) {
                var i, n;
                var last;
                for (i = from, n = this._lines.length; i < n; i++) {
                    if (0 < i) {
                        last = this._lines[i - 1];
                        this._lines[i].index = last.index + 1;
                        this._lines[i].offset = last.offset + last.height;
                    }
                    else {
                        this._lines[i].index = 0;
                        this._lines[i].offset = 0;
                    }
                }
            };
            //! Scroll Map Element を取得. framework が使用する.
            ScrollManager.prototype.getScrollMapElement = function () {
                return this._$map || $("");
            };
            //! リサイクル可能な Element を取得. framework が使用する.
            ScrollManager.prototype.findRecycleElements = function () {
                return this._$map ? this._$map.find(_Config.RECYCLE_CLASS_SELECTOR) : $("");
            };
            //! ListViewOptions を取得. framework が使用する.
            ScrollManager.prototype.getListViewOptions = function () {
                return this._settings;
            };
            ///////////////////////////////////////////////////////////////////////
            // private method:
            //! Scroller 用環境設定
            ScrollManager.prototype.setScrollerCondition = function () {
                this._scroller.on("scroll", this._scrollEventHandler);
                this._scroller.on("scrollstop", this._scrollStopEventHandler);
            };
            //! Scroller 用環境破棄
            ScrollManager.prototype.resetScrollerCondition = function () {
                this._scroller.off("scrollstop", this._scrollStopEventHandler);
                this._scroller.off("scroll", this._scrollEventHandler);
            };
            //! 既定の Scroller オブジェクトの作成
            ScrollManager.prototype.createScroller = function () {
                return this._settings.scrollerFactory(this._$root[0], this._settings);
            };
            //! 現在の Page Index を取得
            ScrollManager.prototype.getPageIndex = function () {
                var _this = this;
                var i, n;
                var page;
                var candidate;
                var scrollPos = this._scroller ? this._scroller.getPos() : 0;
                var scrollPosMax = this._scroller ? this._scroller.getPosMax() : 0;
                var scrollMapSize = (function () {
                    var lastPage = _this.getLastPage();
                    if (null != lastPage) {
                        return lastPage.offset + lastPage.height;
                    }
                    else {
                        return _this._baseHeight;
                    }
                })();
                var pos = (function () {
                    if (0 === scrollPosMax || scrollPosMax <= _this._baseHeight) {
                        return 0;
                    }
                    else {
                        return scrollPos * scrollMapSize / scrollPosMax;
                    }
                })();
                var validRange = function (_page) {
                    if (null == _page) {
                        return false;
                    }
                    else if (_page.offset <= pos && pos <= _page.offset + _page.height) {
                        return true;
                    }
                    else {
                        return false;
                    }
                };
                if (this._baseHeight <= 0) {
                    console.error(TAG + "invalid base height: " + this._baseHeight);
                    return 0;
                }
                candidate = Math.floor(pos / this._baseHeight);
                if (this._pages.length <= candidate) {
                    candidate = this._pages.length - 1;
                }
                page = this._pages[candidate];
                if (validRange(page)) {
                    return page.index;
                }
                else if (pos < page.offset) {
                    for (i = candidate - 1; i >= 0; i--) {
                        page = this._pages[i];
                        if (validRange(page)) {
                            return page.index;
                        }
                    }
                    console.warn(TAG + "unknown page index.");
                    return 0;
                }
                else {
                    for (i = candidate + 1, n = this._pages.length; i < n; i++) {
                        page = this._pages[i];
                        if (validRange(page)) {
                            return page.index;
                        }
                    }
                    console.warn(TAG + "unknown page index.");
                    return this._pages.length - 1;
                }
            };
            /**
             * スクロールイベント
             *
             * @param pos {Number} [in] スクロールポジション
             */
            ScrollManager.prototype.onScroll = function (pos) {
                if (this._active && 0 < this._pages.length) {
                    var currentPageIndex = this.getPageIndex();
                    // TODO: 調整
                    if (_Utils.abs(pos - this._lastActivePageContext.pos) < this._settings.scrollRefreshDistance) {
                        if (this._lastActivePageContext.index !== currentPageIndex) {
                            this.refresh();
                        }
                    }
                    this._lastActivePageContext.pos = pos;
                }
            };
            /**
             * スクロール停止イベント
             *
             * @param pos {Number} [in] スクロールポジション
             */
            ScrollManager.prototype.onScrollStop = function (pos) {
                if (this._active && 0 < this._pages.length) {
                    var currentPageIndex = this.getPageIndex();
                    if (this._lastActivePageContext.index !== currentPageIndex) {
                        this.refresh();
                    }
                    this._lastActivePageContext.pos = pos;
                }
            };
            //! 最後のページを取得
            ScrollManager.prototype.getLastPage = function () {
                if (0 < this._pages.length) {
                    return this._pages[this._pages.length - 1];
                }
                else {
                    return null;
                }
            };
            /**
             * ページ区分のアサイン
             *
             * @param from {Number} [in] page index を指定
             */
            ScrollManager.prototype.assignPage = function (from) {
                var _this = this;
                var i, n;
                if (null == from) {
                    from = 0;
                }
                else {
                    this.clearPage(from);
                }
                (function () {
                    var lineIndex = 0;
                    var lastPage = _this.getLastPage();
                    var lastLine;
                    var tempPage;
                    if (null == lastPage) {
                        lastPage = new UI.PageProfile();
                        _this._pages.push(lastPage);
                    }
                    else {
                        lastLine = lastPage.getLineProfileLast();
                        if (null != lastLine) {
                            lineIndex = lastLine.index + 1;
                        }
                    }
                    var asignee = _this._lines.slice(lineIndex);
                    for (i = 0, n = asignee.length; i < n; i++) {
                        if (_this._baseHeight <= lastPage.height) {
                            lastPage.normalize();
                            tempPage = lastPage;
                            tempPage = new UI.PageProfile();
                            tempPage.index = lastPage.index + 1;
                            tempPage.offset = lastPage.offset + lastPage.height;
                            lastPage = tempPage;
                            _this._pages.push(lastPage);
                        }
                        asignee[i].pageIndex = lastPage.index;
                        lastPage.push(asignee[i]);
                    }
                    lastPage.normalize();
                })();
                if (this._scroller) {
                    this._scroller.update();
                }
            };
            /**
             * ページ区分の解除
             *
             * @param from {Number} [in] page index を指定
             */
            ScrollManager.prototype.clearPage = function (from) {
                if (null == from) {
                    from = 0;
                }
                this._pages = this._pages.slice(0, from);
            };
            return ScrollManager;
        }());
        UI.ScrollManager = ScrollManager;
    })(UI = CDP.UI || (CDP.UI = {}));
})(CDP || (CDP = {}));
var CDP;
(function (CDP) {
    var UI;
    (function (UI) {
        var TAG = "[CDP.UI.ListView] ";
        /**
         * @class ListView
         * @brief メモリ管理機能を提供する仮想リストビュークラス
         */
        var ListView = /** @class */ (function (_super) {
            __extends(ListView, _super);
            /**
             * constructor
             *
             * @param options {ListViewConstructOptions} [in] オプション
             */
            function ListView(options) {
                var _this = _super.call(this, options) || this;
                _this._scrollMgr = null; //!< scroll コアロジック
                var opt = options || {};
                _this._scrollMgr = new UI.ScrollManager(options);
                if (opt.$el) {
                    var delegates = _this.events ? true : false;
                    _this.setElement(opt.$el, delegates);
                }
                else {
                    var height = opt.initialHeight || _this.$el.height();
                    _this._scrollMgr.initialize(_this.$el, height);
                }
                return _this;
            }
            ListView.prototype.setElement = function (element, delegate) {
                if (this._scrollMgr) {
                    var $el = $(element);
                    this._scrollMgr.destroy();
                    this._scrollMgr.initialize($el, $el.height());
                }
                return _super.prototype.setElement.call(this, element, delegate);
            };
            //! 破棄
            ListView.prototype.remove = function () {
                this._scrollMgr.destroy();
                return _super.prototype.remove.call(this);
            };
            ///////////////////////////////////////////////////////////////////////
            // Implements: IListView Profile 管理
            //! 初期化済みか判定
            ListView.prototype.isInitialized = function () {
                return this._scrollMgr.isInitialized();
            };
            //! プロパティを指定して、LineProfile を管理
            ListView.prototype.addItem = function (height, initializer, info, insertTo) {
                this._addLine(new UI.LineProfile(this._scrollMgr, Math.floor(height), initializer, info), insertTo);
            };
            ListView.prototype.removeItem = function (index, arg2, arg3) {
                this._scrollMgr.removeItem(index, arg2, arg3);
            };
            ListView.prototype.getItemInfo = function (target) {
                return this._scrollMgr.getItemInfo(target);
            };
            //! アクティブページを更新
            ListView.prototype.refresh = function () {
                this._scrollMgr.refresh();
            };
            //! 未アサインページを構築
            ListView.prototype.update = function () {
                this._scrollMgr.update();
            };
            //! ページアサインを再構成
            ListView.prototype.rebuild = function () {
                this._scrollMgr.rebuild();
            };
            //! 管轄データを破棄
            ListView.prototype.release = function () {
                this._scrollMgr.release();
            };
            ///////////////////////////////////////////////////////////////////////
            // Implements: IListView Profile Backup / Restore
            //! 内部データをバックアップ
            ListView.prototype.backup = function (key) {
                return this._scrollMgr.backup(key);
            };
            //! 内部データをリストア
            ListView.prototype.restore = function (key, rebuild) {
                if (rebuild === void 0) { rebuild = true; }
                return this._scrollMgr.restore(key, rebuild);
            };
            //! バックアップデータの有無
            ListView.prototype.hasBackup = function (key) {
                return this._scrollMgr.hasBackup(key);
            };
            //! バックアップデータの破棄
            ListView.prototype.clearBackup = function (key) {
                return this._scrollMgr.clearBackup(key);
            };
            Object.defineProperty(ListView.prototype, "backupData", {
                //! バックアップデータにアクセス
                get: function () {
                    return this._scrollMgr ? this._scrollMgr.backupData : null;
                },
                enumerable: true,
                configurable: true
            });
            ///////////////////////////////////////////////////////////////////////
            // Implements: IListView Scroll
            //! スクロールイベントハンドラ設定/解除
            ListView.prototype.setScrollHandler = function (handler, on) {
                this._scrollMgr.setScrollHandler(handler, on);
            };
            //! スクロール終了イベントハンドラ設定/解除
            ListView.prototype.setScrollStopHandler = function (handler, on) {
                this._scrollMgr.setScrollStopHandler(handler, on);
            };
            //! スクロール位置を取得
            ListView.prototype.getScrollPos = function () {
                return this._scrollMgr.getScrollPos();
            };
            //! スクロール位置の最大値を取得
            ListView.prototype.getScrollPosMax = function () {
                return this._scrollMgr.getScrollPosMax();
            };
            //! スクロール位置を指定
            ListView.prototype.scrollTo = function (pos, animate, time) {
                this._scrollMgr.scrollTo(pos, animate, time);
            };
            //! 指定された ListItemView の表示を保証
            ListView.prototype.ensureVisible = function (index, options) {
                this._scrollMgr.ensureVisible(index, options);
            };
            Object.defineProperty(ListView.prototype, "core", {
                ///////////////////////////////////////////////////////////////////////
                // Implements: IListView Properties
                //! core framework access
                get: function () {
                    return this._scrollMgr;
                },
                enumerable: true,
                configurable: true
            });
            ///////////////////////////////////////////////////////////////////////
            // Implements: IListView Internal I/F
            //! 登録 framework が使用する
            ListView.prototype._addLine = function (_line, insertTo) {
                this._scrollMgr._addLine(_line, insertTo);
            };
            ///////////////////////////////////////////////////////////////////////
            // Implements: IComposableView
            /**
             * すでに定義された Backbone.View を基底クラスに設定し、extend を実行する。
             *
             * @param derives         {Backbone.View|Backbone.View[]} [in] 合成元の View クラス
             * @param properties      {Object}                        [in] prototype プロパティ
             * @param classProperties {Object}                        [in] static プロパティ
             * @return {Backbone.View|Backbone.View[]} 新規に生成された View のコンストラクタ
             */
            ListView.compose = function (derives, properties, classProperties) {
                var composed = UI.composeViews(ListView, derives);
                return composed.extend(properties, classProperties);
            };
            return ListView;
        }(Backbone.View));
        UI.ListView = ListView;
    })(UI = CDP.UI || (CDP.UI = {}));
})(CDP || (CDP = {}));
var CDP;
(function (CDP) {
    var UI;
    (function (UI) {
        var TAG = "[CDP.UI.GroupListItemView] ";
        /**
         * @class GroupListItemView
         * @brief ExpandableListView が扱う ListItem コンテナクラス
         */
        var GroupListItemView = /** @class */ (function (_super) {
            __extends(GroupListItemView, _super);
            /**
             * constructor
             *
             * @param options {GroupLineViewOptions} [in] オプション
             */
            function GroupListItemView(options) {
                var _this = _super.call(this, options) || this;
                _this._groupProfile = null; //!< 管轄の GroupProfile
                _this._groupProfile = options.groupProfile;
                return _this;
            }
            ///////////////////////////////////////////////////////////////////////
            // protected methods
            /**
             * 展開状態を判定
             *
             * @return {Boolean} true: 展開, false:収束
             */
            GroupListItemView.prototype.isExpanded = function () {
                return this._groupProfile.isExpanded();
            };
            //! 展開中か判定
            GroupListItemView.prototype.isExpanding = function () {
                return this.owner.isExpanding();
            };
            //! 収束中か判定
            GroupListItemView.prototype.isCollapsing = function () {
                return this.owner.isCollapsing();
            };
            //! 開閉中か判定
            GroupListItemView.prototype.isSwitching = function () {
                return this.owner.isSwitching();
            };
            //! 子 Group を持っているか判定
            GroupListItemView.prototype.hasChildren = function (layoutKey) {
                return this._groupProfile.hasChildren(layoutKey);
            };
            return GroupListItemView;
        }(UI.ListItemView));
        UI.GroupListItemView = GroupListItemView;
    })(UI = CDP.UI || (CDP.UI = {}));
})(CDP || (CDP = {}));
/* tslint:disable:no-bitwise */
var CDP;
(function (CDP) {
    var UI;
    (function (UI) {
        var TAG = "[CDP.UI.ExpandManager] ";
        /**
         * @class ExpandManager
         * @brief 開閉状態管理クラス
         */
        var ExpandManager = /** @class */ (function () {
            /**
             * constructor
             *
             * @param owner {BaseExpandableListView} [in] 親View のインスタンス
             */
            function ExpandManager(owner) {
                this._owner = null;
                this._mapGroups = {}; //!< {id, GroupProfile} の map
                this._aryTopGroups = []; //!< 第1階層 GroupProfile を格納
                this._layoutKey = null;
                this._owner = owner;
            }
            ///////////////////////////////////////////////////////////////////////
            // Implements: IExpandManager
            /**
             * 新規 GroupProfile を作成
             * 登録済みの場合はそのオブジェクトを返却
             *
             * @parma id {String} [in] 新規に作成する Group ID を指定. 指定しない場合は自動割り振り
             * @return {GroupProfile} GroupProfile インスタンス
             */
            ExpandManager.prototype.newGroup = function (id) {
                var group;
                if (null == id) {
                    id = "group-id:" + ("0000" + (Math.random() * Math.pow(36, 4) << 0).toString(36)).slice(-4);
                }
                if (null != this._mapGroups[id]) {
                    return this._mapGroups[id];
                }
                group = new UI.GroupProfile(id, this._owner);
                this._mapGroups[id] = group;
                return group;
            };
            /**
             * 登録済み Group を取得
             *
             * @parma id {String} [in] 取得する Group ID を指定
             * @return {GroupProfile} GroupProfile インスタンス / null
             */
            ExpandManager.prototype.getGroup = function (id) {
                if (null == this._mapGroups[id]) {
                    console.warn(TAG + "group id: " + id + " is not registered.");
                    return null;
                }
                return this._mapGroups[id];
            };
            /**
             * 第1階層の Group 登録
             *
             * @param topGroup {GroupProfile} [in] 構築済み GroupProfile インスタンス
             */
            ExpandManager.prototype.registerTopGroup = function (topGroup) {
                var lastGroup;
                var insertTo;
                // すでに登録済みの場合は restore して layout キーごとに復元する。
                if ("registered" === topGroup.status) {
                    // TODO: orientation changed 時の layout キー変更対応だが、キーに変更が無いときは不具合となる。
                    // この API に実装が必要かも含めて見直しが必要
                    topGroup.restore();
                    return;
                }
                lastGroup = (0 < this._aryTopGroups.length) ? this._aryTopGroups[this._aryTopGroups.length - 1] : null;
                insertTo = (null != lastGroup) ? lastGroup.getLastLineIndex(true) + 1 : 0;
                if (_.isNaN(insertTo)) {
                    console.error(TAG + "logic error, 'insertTo' is NaN.");
                    return;
                }
                this._aryTopGroups.push(topGroup);
                topGroup.register(insertTo);
            };
            /**
             * 第1階層の Group を取得
             * コピー配列が返されるため、クライアントはキャッシュ不可
             *
             * @return {GroupProfile[]} GroupProfile 配列
             */
            ExpandManager.prototype.getTopGroups = function () {
                return this._aryTopGroups.slice(0);
            };
            //! すべてのグループを展開 (1階層)
            ExpandManager.prototype.expandAll = function () {
                this._aryTopGroups.forEach(function (group) {
                    if (group.hasChildren()) {
                        group.expand();
                    }
                });
            };
            //! すべてのグループを収束 (1階層)
            ExpandManager.prototype.collapseAll = function (delay) {
                this._aryTopGroups.forEach(function (group) {
                    if (group.hasChildren()) {
                        group.collapse(delay);
                    }
                });
            };
            //! 展開中か判定
            ExpandManager.prototype.isExpanding = function () {
                return this._owner.isStatusIn("expanding");
            };
            //! 収束中か判定
            ExpandManager.prototype.isCollapsing = function () {
                return this._owner.isStatusIn("collapsing");
            };
            //! 開閉中か判定
            ExpandManager.prototype.isSwitching = function () {
                return this.isExpanding() || this.isCollapsing();
            };
            //! 状態変数の参照カウントのインクリメント
            ExpandManager.prototype.statusAddRef = function (status) {
                return this._owner.statusAddRef(status);
            };
            //! 状態変数の参照カウントのデクリメント
            ExpandManager.prototype.statusRelease = function (status) {
                return this._owner.statusRelease(status);
            };
            //! 処理スコープ毎に状態変数を設定
            ExpandManager.prototype.statusScope = function (status, callback) {
                this._owner.statusScope(status, callback);
            };
            //! 指定した状態中であるか確認
            ExpandManager.prototype.isStatusIn = function (status) {
                return this._owner.isStatusIn(status);
            };
            Object.defineProperty(ExpandManager.prototype, "layoutKey", {
                //! layout key を取得
                get: function () {
                    return this._layoutKey;
                },
                //! layout key を設定
                set: function (key) {
                    this._layoutKey = key;
                },
                enumerable: true,
                configurable: true
            });
            //! データを破棄
            ExpandManager.prototype.release = function () {
                this._mapGroups = {};
                this._aryTopGroups = [];
            };
            ///////////////////////////////////////////////////////////////////////
            // Implementes: IBackupRestore
            /**
             * 内部データをバックアップ
             *
             * @param key {String} [in] バックアップキーを指定
             * @return {Boolean} true: 成功 / false: 失敗
             */
            ExpandManager.prototype.backup = function (key) {
                var _backup = this.backupData;
                if (null == _backup[key]) {
                    _backup[key] = {
                        map: this._mapGroups,
                        tops: this._aryTopGroups,
                    };
                }
                return true;
            };
            /**
             * 内部データをリストア
             *
             * @param key     {String}  [in] バックアップキーを指定
             * @param rebuild {Boolean} [in] rebuild を実行する場合は true を指定
             * @return {Boolean} true: 成功 / false: 失敗
             */
            ExpandManager.prototype.restore = function (key, rebuild) {
                if (rebuild === void 0) { rebuild = true; }
                var _backup = this.backupData;
                if (null == _backup[key]) {
                    return false;
                }
                if (0 < this._aryTopGroups.length) {
                    this.release();
                }
                this._mapGroups = _backup[key].map;
                this._aryTopGroups = _backup[key].tops;
                // layout 情報の確認
                if (this._aryTopGroups.length <= 0 || !this._aryTopGroups[0].hasLayoutKeyOf(this.layoutKey)) {
                    return false;
                }
                // 展開しているものを登録
                this._aryTopGroups.forEach(function (group) {
                    group.restore();
                });
                // 再構築の予約
                if (rebuild) {
                    this._owner.rebuild();
                }
                return true;
            };
            //! バックアップデータの有無
            ExpandManager.prototype.hasBackup = function (key) {
                return this._owner.hasBackup(key);
            };
            //! バックアップデータの破棄
            ExpandManager.prototype.clearBackup = function (key) {
                return this._owner.clearBackup(key);
            };
            Object.defineProperty(ExpandManager.prototype, "backupData", {
                //! バックアップデータにアクセス
                get: function () {
                    return this._owner.backupData;
                },
                enumerable: true,
                configurable: true
            });
            return ExpandManager;
        }());
        UI.ExpandManager = ExpandManager;
    })(UI = CDP.UI || (CDP.UI = {}));
})(CDP || (CDP = {}));
var CDP;
(function (CDP) {
    var UI;
    (function (UI) {
        var TAG = "[CDP.UI.ExpandableListView] ";
        /**
         * @class ExpandableListView
         * @brief 開閉機能を備えた仮想リストビュークラス
         */
        var ExpandableListView = /** @class */ (function (_super) {
            __extends(ExpandableListView, _super);
            /**
             * constructor
             *
             * @param options {ListViewConstructOptions} [in] オプション
             */
            function ExpandableListView(options) {
                var _this = _super.call(this, options) || this;
                _this._statusMgr = null;
                _this._expandManager = null;
                _this._statusMgr = new UI.StatusManager();
                _this._expandManager = new UI.ExpandManager(_this);
                return _this;
            }
            ///////////////////////////////////////////////////////////////////////
            // Implements: IExpandableListView
            //! 新規 GroupProfile を作成
            ExpandableListView.prototype.newGroup = function (id) {
                return this._expandManager.newGroup(id);
            };
            //! 登録済み Group を取得
            ExpandableListView.prototype.getGroup = function (id) {
                return this._expandManager.getGroup(id);
            };
            //! 第1階層の Group 登録
            ExpandableListView.prototype.registerTopGroup = function (topGroup) {
                this._expandManager.registerTopGroup(topGroup);
            };
            //! 第1階層の Group を取得
            ExpandableListView.prototype.getTopGroups = function () {
                return this._expandManager.getTopGroups();
            };
            //! すべてのグループを展開 (1階層)
            ExpandableListView.prototype.expandAll = function () {
                this._expandManager.expandAll();
            };
            //! すべてのグループを収束 (1階層)
            ExpandableListView.prototype.collapseAll = function (delay) {
                this._expandManager.collapseAll(delay);
            };
            //! 展開中か判定
            ExpandableListView.prototype.isExpanding = function () {
                return this._expandManager.isExpanding();
            };
            //! 収束中か判定
            ExpandableListView.prototype.isCollapsing = function () {
                return this._expandManager.isCollapsing();
            };
            //! 開閉中か判定
            ExpandableListView.prototype.isSwitching = function () {
                return this._expandManager.isSwitching();
            };
            //! 状態変数の参照カウントのインクリメント
            ExpandableListView.prototype.statusAddRef = function (status) {
                return this._statusMgr.statusAddRef(status);
            };
            //! 状態変数の参照カウントのデクリメント
            ExpandableListView.prototype.statusRelease = function (status) {
                return this._statusMgr.statusRelease(status);
            };
            //! 処理スコープ毎に状態変数を設定
            ExpandableListView.prototype.statusScope = function (status, callback) {
                this._statusMgr.statusScope(status, callback);
            };
            //! 指定した状態中であるか確認
            ExpandableListView.prototype.isStatusIn = function (status) {
                return this._statusMgr.isStatusIn(status);
            };
            Object.defineProperty(ExpandableListView.prototype, "layoutKey", {
                //! layout key を取得
                get: function () {
                    return this._expandManager.layoutKey;
                },
                //! layout key を設定
                set: function (key) {
                    this._expandManager.layoutKey = key;
                },
                enumerable: true,
                configurable: true
            });
            ///////////////////////////////////////////////////////////////////////
            // Override: ListView
            //! データを破棄
            ExpandableListView.prototype.release = function () {
                _super.prototype.release.call(this);
                this._expandManager.release();
            };
            //! 内部データをバックアップ
            ExpandableListView.prototype.backup = function (key) {
                return this._expandManager.backup(key);
            };
            //! 内部データをリストア
            ExpandableListView.prototype.restore = function (key, rebuild) {
                if (rebuild === void 0) { rebuild = true; }
                return this._expandManager.restore(key, rebuild);
            };
            return ExpandableListView;
        }(UI.ListView));
        UI.ExpandableListView = ExpandableListView;
    })(UI = CDP.UI || (CDP.UI = {}));
})(CDP || (CDP = {}));

return CDP.UI; }));
/*!
 * cdp.ui.jqm.js 2.1.0
 *
 * Date: 2017-11-06T05:38:56.615Z
 */
(function (root, factory) { if (typeof define === "function" && define.amd) { define("cdp.ui.jqm",["cdp.framework.jqm", "cdp.tools", "cdp.ui.listview"], function () { return factory(root.CDP || (root.CDP = {})); }); } else { factory(root.CDP || (root.CDP = {})); } }(this, function (CDP) { CDP.UI = CDP.UI || {};
var CDP;
(function (CDP) {
    var UI;
    (function (UI) {
        var Config = CDP.Config;
        var Framework = CDP.Framework;
        var TAG = "[CDP.UI.Theme] ";
        //__________________________________________________________________________________________________________//
        /**
         * @class Theme
         * @brief UI Theme 設定を行うユーティリティクラス
         */
        var Theme = /** @class */ (function () {
            function Theme() {
            }
            ///////////////////////////////////////////////////////////////////////
            // public static methods:
            /**
             * Theme の初期化
             *
             * @param options オプション指定
             * @returns true: 成功 / false: 失敗
             */
            Theme.initialize = function (options) {
                var opt = $.extend({}, {
                    platform: "auto",
                    reserveScrollbarRegion: true,
                }, options);
                if ("auto" === opt.platform) {
                    return Theme.detectUIPlatform(opt.reserveScrollbarRegion);
                }
                else {
                    if (Theme.setCurrentUIPlatform(opt.platform)) {
                        return opt.platform;
                    }
                    else {
                        console.warn(TAG + "setCurrentUIPlatform(), failed. platform: " + opt.platform);
                    }
                }
            };
            /**
             * 現在指定されている UI Platform を取得
             *
             * @return {String} ex) "ios"
             */
            Theme.getCurrentUIPlatform = function () {
                var $htms = $("html");
                for (var i = 0, n = Theme.s_platforms.length; i < n; i++) {
                    if ($htms.hasClass("ui-platform-" + Theme.s_platforms[i])) {
                        return Theme.s_platforms[i];
                    }
                }
                return null;
            };
            /**
             * UI Platform を設定
             *
             * @return {String} true: 成功 / false: 失敗
             */
            Theme.setCurrentUIPlatform = function (platform) {
                if (null == platform || Theme.s_platforms.indexOf(platform) >= 0) {
                    var $htms_1 = $("html");
                    Theme.s_platforms.forEach(function (target) {
                        $htms_1.removeClass("ui-platform-" + target);
                    });
                    if (platform) {
                        $htms_1.addClass("ui-platform-" + platform);
                    }
                    return true;
                }
                else {
                    return false;
                }
            };
            /**
             * 現在の Platform を判定し最適な platform を自動決定
             *
             * @param reserveScrollbarRegion PC デバッグ環境ではスクロールバーを表示. default: true
             * @returns ex) "ios"
             */
            Theme.detectUIPlatform = function (reserveScrollbarRegion) {
                if (reserveScrollbarRegion === void 0) { reserveScrollbarRegion = true; }
                var platform = "";
                // platform の設定
                if (Framework.Platform.iOS) {
                    $("html").addClass("ui-platform-ios");
                    platform = "ios";
                }
                else {
                    $("html").addClass("ui-platform-android");
                    platform = "android";
                }
                // PC デバッグ環境ではスクロールバーを表示
                if (Config.DEBUG && reserveScrollbarRegion && !Framework.Platform.Mobile) {
                    $("body").css("overflow-y", "scroll");
                }
                return platform;
            };
            /**
             * platform を配列で登録
             * 上書きされる
             *
             * @param {String[]} platforms [in] OS ex): ["ios", "android"]
             */
            Theme.registerUIPlatforms = function (platforms) {
                if (platforms) {
                    Theme.s_platforms = platforms;
                }
            };
            /**
             * page transition を登録
             * 上書きされる
             *
             * @param {TransitionMap} map [in] TransitionMap を指定
             */
            Theme.registerPageTransitionMap = function (map) {
                if (map) {
                    Theme.s_pageTransitionMap = map;
                }
            };
            /**
             * dialog transition を登録
             * 上書きされる
             *
             * @param {TransitionMap} map [in] TransitionMap を指定
             */
            Theme.registerDialogTransitionMap = function (map) {
                if (map) {
                    Theme.s_dialogTransitionMap = map;
                }
            };
            /**
             * page transition を取得
             * TransitionMap にアサインされているものであれば変換
             *
             * @return {String[]} "slide"
             */
            Theme.queryPageTransition = function (original) {
                var convert = Theme.s_pageTransitionMap[original];
                if (convert) {
                    return convert[Theme.getCurrentUIPlatform()] || convert.fallback;
                }
                else {
                    return original;
                }
            };
            /**
             * dialog transition を取得
             * TransitionMap にアサインされているものであれば変換
             *
             * @return {String[]} "slide"
             */
            Theme.queryDialogTransition = function (original) {
                var convert = Theme.s_dialogTransitionMap[original];
                if (convert) {
                    return convert[Theme.getCurrentUIPlatform()] || convert.fallback;
                }
                else {
                    return original;
                }
            };
            Theme.s_platforms = ["ios", "android"];
            Theme.s_pageTransitionMap = {
                "platform-default": {
                    ios: "slide",
                    android: "floatup",
                    fallback: "slide",
                },
                "platform-alternative": {
                    ios: "slideup",
                    android: "floatup",
                    fallback: "slideup",
                },
            };
            Theme.s_dialogTransitionMap = {
                "platform-default": {
                    ios: "popzoom",
                    android: "crosszoom",
                    fallback: "none",
                },
            };
            return Theme;
        }());
        UI.Theme = Theme;
        //__________________________________________________________________________________________________________//
        // jquey.mobile.changePage() の Hook.
        function applyCustomChangePage() {
            var jqmChangePage = $.mobile.changePage.bind($.mobile);
            function customChangePage(to, options) {
                if (_.isString(to)) {
                    if (options && options.transition) {
                        options.transition = Theme.queryPageTransition(options.transition);
                    }
                }
                jqmChangePage(to, options);
            }
            $.mobile.changePage = customChangePage;
        }
        // framework 初期化後に適用
        Framework.waitForInitialize()
            .done(function () {
            applyCustomChangePage();
        });
    })(UI = CDP.UI || (CDP.UI = {}));
})(CDP || (CDP = {}));
var CDP;
(function (CDP) {
    var UI;
    (function (UI) {
        //__________________________________________________________________________________________________________//
        /**
         * @class ExtensionManager
         * @brief 拡張機能を管理するユーティリティクラス
         */
        var ExtensionManager = /** @class */ (function () {
            function ExtensionManager() {
            }
            /**
             * DOM 拡張関数の登録
             *
             * @param {DomExtension} func [in] DOM 拡張関数
             */
            ExtensionManager.registerDomExtension = function (func) {
                this.s_domExtensions.push(func);
            };
            /**
             * DOM 拡張を適用
             *
             * @param {jQuery} $ui       [in] 拡張対象の DOM
             * @param {Object} [options] [in] オプション
             */
            ExtensionManager.applyDomExtension = function ($ui, options) {
                this.s_domExtensions.forEach(function (func) {
                    func($ui, options);
                });
            };
            ExtensionManager.s_domExtensions = [];
            return ExtensionManager;
        }());
        UI.ExtensionManager = ExtensionManager;
    })(UI = CDP.UI || (CDP.UI = {}));
})(CDP || (CDP = {}));
/* tslint:disable:no-bitwise */
var CDP;
(function (CDP) {
    var UI;
    (function (UI) {
        var TAG = "[CDP.UI.Toast] ";
        /**
         * @class Toast
         * @brief Android SDK の Toast クラスのように自動消滅するメッセージ出力ユーティリティ
         *        入れ子の関係を実現するために module で実装
         */
        var Toast;
        (function (Toast) {
            // 表示時間の定義
            Toast.LENGTH_SHORT = 1500; //!< 短い:1500 msec
            Toast.LENGTH_LONG = 4000; //!< 長い:4000 msec
            //! @enum オフセットの基準
            var OffsetX;
            (function (OffsetX) {
                OffsetX[OffsetX["LEFT"] = 1] = "LEFT";
                OffsetX[OffsetX["RIGHT"] = 2] = "RIGHT";
                OffsetX[OffsetX["CENTER"] = 4] = "CENTER";
            })(OffsetX = Toast.OffsetX || (Toast.OffsetX = {}));
            //! @enum オフセットの基準
            var OffsetY;
            (function (OffsetY) {
                OffsetY[OffsetY["TOP"] = 16] = "TOP";
                OffsetY[OffsetY["BOTTOM"] = 32] = "BOTTOM";
                OffsetY[OffsetY["CENTER"] = 64] = "CENTER";
            })(OffsetY = Toast.OffsetY || (Toast.OffsetY = {}));
            /**
             * @class StyleBuilderDefault
             * @brief スタイル変更時に使用する既定の構造体オブジェクト
             */
            var StyleBuilderDefault = /** @class */ (function () {
                function StyleBuilderDefault() {
                }
                //! class attribute に設定する文字列を取得
                StyleBuilderDefault.prototype.getClass = function () {
                    return "ui-loader ui-overlay-shadow ui-corner-all";
                };
                //! style attribute に設定する JSON オブジェクトを取得
                StyleBuilderDefault.prototype.getStyle = function () {
                    var style = {
                        "padding": "7px 25px 7px 25px",
                        "display": "block",
                        "background-color": "#1d1d1d",
                        "border-color": "#1b1b1b",
                        "color": "#fff",
                        "text-shadow": "0 1px 0 #111",
                        "font-weight": "bold",
                        "opacity": 0.8,
                    };
                    return style;
                };
                //! オフセットの基準位置を取得
                StyleBuilderDefault.prototype.getOffsetPoint = function () {
                    return OffsetX.CENTER | OffsetY.BOTTOM;
                };
                //! X 座標のオフセット値を取得
                StyleBuilderDefault.prototype.getOffsetX = function () {
                    return 0;
                };
                //! Y 座標のオフセット値を取得
                StyleBuilderDefault.prototype.getOffsetY = function () {
                    return -75;
                };
                return StyleBuilderDefault;
            }());
            Toast.StyleBuilderDefault = StyleBuilderDefault;
            /**
             * Toast 表示
             *
             * @param message  [in] メッセージ
             * @param duration [in] 表示時間を設定 (msec) default: LENGTH_SHORT
             * @param style    [in] スタイル変更する場合には派生クラスオブジェクトを指定
             */
            function show(message, duration, style) {
                if (duration === void 0) { duration = Toast.LENGTH_SHORT; }
                var $mobile = $.mobile;
                var info = style || new StyleBuilderDefault();
                var setCSS = info.getStyle() ? true : false;
                // 改行コードは <br/> に置換する
                var msg = message.replace(/\n/g, "<br/>");
                // メッセージ element の動的生成
                var html = "<div>" + msg + "</div>";
                var box = $(html).addClass(info.getClass());
                if (setCSS) {
                    box.css(info.getStyle());
                }
                // 自動改行されてもよいように、基点を設定してから追加
                box.css({
                    "top": 0,
                    "left": 0,
                }).appendTo($mobile.pageContainer);
                // 配置位置の決定
                var offsetPoint = info.getOffsetPoint();
                var $window = $(window);
                var posX, posY;
                var box_width = box.width() + parseInt(box.css("padding-left"), 10) + parseInt(box.css("padding-right"), 10);
                var box_height = box.height() + parseInt(box.css("padding-top"), 10) + parseInt(box.css("padding-bottom"), 10);
                switch (offsetPoint & 0x000F) {
                    case OffsetX.LEFT:
                        posX = 0 + info.getOffsetX();
                        break;
                    case OffsetX.RIGHT:
                        posX = $window.width() - box_width + info.getOffsetX();
                        break;
                    case OffsetX.CENTER:
                        posX = ($window.width() / 2) - (box_width / 2) + info.getOffsetX();
                        break;
                    default:
                        console.warn(TAG + "warn. unknown offsetPoint:" + (offsetPoint & 0x000F));
                        posX = ($window.width() / 2) - (box_width / 2) + info.getOffsetX();
                        break;
                }
                switch (offsetPoint & 0x00F0) {
                    case OffsetY.TOP:
                        posY = 0 + info.getOffsetY();
                        break;
                    case OffsetY.BOTTOM:
                        posY = $window.height() - box_height + info.getOffsetY();
                        break;
                    case OffsetY.CENTER:
                        posY = ($window.height() / 2) - (box_height / 2) + info.getOffsetY();
                        break;
                    default:
                        console.warn(TAG + "warn. unknown offsetPoint:" + (offsetPoint & 0x00F0));
                        posY = ($window.height() / 2) - (box_height / 2) + info.getOffsetY();
                        break;
                }
                // 表示
                box.css({
                    "top": posY,
                    "left": posX,
                })
                    .delay(duration)
                    .fadeOut(400, function () {
                    $(this).remove();
                });
            }
            Toast.show = show;
        })(Toast = UI.Toast || (UI.Toast = {}));
    })(UI = CDP.UI || (CDP.UI = {}));
})(CDP || (CDP = {}));
var CDP;
(function (CDP) {
    var UI;
    (function (UI) {
        var Promise = CDP.Promise;
        var Framework = CDP.Framework;
        var TAG = "[CDP.UI.Dialog] ";
        //___________________________________________________________________________________________________________________//
        /**
         * @class Dialog
         * @brief 汎用ダイアログクラス
         *        jQM の popup widget によって実装
         */
        var Dialog = /** @class */ (function () {
            /**
             * constructor
             *
             * @param id      {String}        [in] ダイアログ DOM ID を指定 ex) #dialog-hoge
             * @param options {DialogOptions} [in] オプション
             */
            function Dialog(id, options) {
                this._template = null;
                this._settings = null;
                this._$dialog = null;
                // Dialog 共通設定の初期化
                Dialog.initCommonCondition();
                // 設定を更新
                this._settings = $.extend({}, Dialog.s_defaultOptions, options);
                // ダイアログテンプレートを作成
                this._template = CDP.Tools.Template.getJST(id, this._settings.src);
            }
            ///////////////////////////////////////////////////////////////////////
            // public methods
            /**
             * 表示
             * 表示をして始めて DOM が有効になる。
             *
             * @param options {DialogOptions} [in] オプション (src は無視される)
             * @return ダイアログの jQuery オブジェクト
             */
            Dialog.prototype.show = function (options) {
                var _this = this;
                var $document = $(document);
                var $body = $("body");
                var $page = $body.pagecontainer("getActivePage");
                var ofcHidden = {
                    "overflow": "hidden",
                    "overflow-x": "hidden",
                    "overflow-y": "hidden",
                };
                var ofcBody = {
                    "overflow": $body.css("overflow"),
                    "overflow-x": $body.css("overflow-x"),
                    "overflow-y": $body.css("overflow-y"),
                };
                var parentScrollPos = $body.scrollTop();
                var ofcPage = {
                    "overflow": $page.css("overflow"),
                    "overflow-x": $page.css("overflow-x"),
                    "overflow-y": $page.css("overflow-y"),
                };
                var scrollEvent = "scroll touchmove mousemove MSPointerMove";
                var scrollHander = function (event) {
                    if ("deny" === _this._settings.scrollEvent) {
                        event.preventDefault();
                    }
                    else if ("adjust" === _this._settings.scrollEvent) {
                        $body.scrollTop(parentScrollPos);
                    }
                };
                // option が指定されていた場合更新
                if (null != options) {
                    this._settings = $.extend({}, this._settings, options);
                }
                // afterclose 処理は Dialog の破棄処理を実装するため基本的に設定禁止 (強制上書きモードを設定使用可)
                if (this._settings.afterclose && !this._settings.forceOverwriteAfterClose) {
                    console.warn(TAG + "cannot accept 'afterclose' option. please instead using 'popupafterclose' event.");
                    delete this._settings.afterclose;
                }
                // title の有無
                this._settings._titleState = this._settings.title ? "ui-has-title" : "ui-no-title";
                /*
                 * template から jQuery オブジェクトを作成し、
                 * <body> 直下に追加.
                 * $page では Backbone event を受けられないことに注意
                 */
                this._$dialog = $(this._template(this._settings));
                this._$dialog.localize();
                $body.append(this._$dialog);
                // theme を解決
                this.resolveTheme();
                this._$dialog
                    .on("popupcreate", function (event) {
                    // スクロールを抑止
                    if ("allow" !== _this._settings.scrollEvent) {
                        $document.on(scrollEvent, scrollHander);
                    }
                    $body.css(ofcHidden);
                    $page.css(ofcHidden);
                    Dialog.register(_this);
                })
                    .enhanceWithin();
                // DOM 拡張
                if (null != this._settings.domExtensionOptions) {
                    UI.ExtensionManager.applyDomExtension(this._$dialog, this._settings.domExtensionOptions);
                }
                this.onBeforeShow()
                    .done(function () {
                    // 表示
                    _this._$dialog
                        .popup($.extend({}, {
                        positionTo: "window",
                        afterclose: function (event, ui) {
                            // スクロール状態を戻す
                            $page.css(ofcPage);
                            $body.css(ofcBody);
                            if ("allow" !== _this._settings.scrollEvent) {
                                $document.off(scrollEvent, scrollHander);
                            }
                            Dialog.register(null);
                            _this._$dialog.remove();
                            _this._$dialog = null;
                        },
                    }, _this._settings))
                        .popup("open").on(_this._settings.event, function (event) {
                        // "data-auto-close='false'" が指定されている要素は dialog を閉じない
                        var autoClose = $(event.target).attr("data-auto-close");
                        if (null == autoClose) {
                            autoClose = _this._settings.defaultAutoClose ? "true" : "false";
                        }
                        if ("false" === autoClose) {
                            return;
                        }
                        _this.close();
                        event.preventDefault();
                    });
                })
                    .fail(function (error) {
                    console.error(TAG + "Dialog.show() failed.");
                    if (_this._$dialog) {
                        _this._$dialog.trigger("error", error);
                    }
                });
                return this._$dialog;
            };
            /**
             * 終了
             * 基本的には自動で閉じるが、
             * 表示中のダイアログをクライアント側から閉じるメソッド
             */
            Dialog.prototype.close = function () {
                if (this._$dialog) {
                    this._$dialog.popup("close");
                }
            };
            Object.defineProperty(Dialog.prototype, "$el", {
                //! ダイアログ element を取得
                get: function () {
                    return this._$dialog;
                },
                enumerable: true,
                configurable: true
            });
            ///////////////////////////////////////////////////////////////////////
            // protected methods: Override
            /**
             * ダイアログ表示の直前
             * DOM を操作できるタイミングで呼び出される.
             *
             * @return {IPromiseBase} promise オブジェクト
             */
            Dialog.prototype.onBeforeShow = function () {
                return Promise.resolve();
            };
            /**
             * ダイアログの使用する Theme を解決
             * 不要な場合はオーバーライドすることも可能
             */
            Dialog.prototype.resolveTheme = function () {
                var queryTheme = function () {
                    return $(".ui-page-active").jqmData("theme");
                };
                var candidateTheme;
                if (!this._settings.theme) {
                    var domTheme = this._$dialog.jqmData("theme");
                    if (!domTheme) {
                        this._settings.theme = candidateTheme = queryTheme();
                    }
                }
                if (!this._settings.overlayTheme) {
                    var domOverlayTheme = this._$dialog.jqmData("overlay-theme");
                    if (!domOverlayTheme) {
                        this._settings.overlayTheme = candidateTheme || queryTheme();
                    }
                }
                // transition の更新
                this._settings.transition = UI.Theme.queryDialogTransition(this._settings.transition);
            };
            ///////////////////////////////////////////////////////////////////////
            // public static methods
            /**
             * Dialog の既定オプションを更新
             * すべての Dialog が使用する共通設定
             *
             * @param options {DialogOptions} [in] ダイアログオプション
             */
            Dialog.setDefaultOptions = function (options) {
                // Dialog 共通設定の初期化
                Dialog.initCommonCondition();
                $.extend(true, Dialog.s_defaultOptions, options);
            };
            ///////////////////////////////////////////////////////////////////////
            // private methods
            // 現在 active なダイアログとして登録する
            Dialog.register = function (dialog) {
                if (null != dialog && null != Dialog.s_activeDialog) {
                    console.warn(TAG + "new dialog proc is called in the past dialog's one. use setTimeout() for post process.");
                }
                Dialog.s_activeDialog = dialog;
            };
            /**
             * Dialog 共通設定の初期化
             */
            Dialog.initCommonCondition = function () {
                // Framework の初期化後に処理する必要がある
                if (!Framework.isInitialized()) {
                    console.warn(TAG + "initCommonCondition() should be called after Framework.initialized.");
                    return;
                }
                if (null == Dialog.s_oldBackKeyHandler) {
                    // Back Button Handler
                    Dialog.s_oldBackKeyHandler = CDP.setBackButtonHandler(null);
                    CDP.setBackButtonHandler(Dialog.customBackKeyHandler);
                    // 既定オプション
                    Dialog.s_defaultOptions = {
                        idPositive: "dlg-btn-positive",
                        idNegative: "dlg-btn-negative",
                        event: Framework.getDefaultClickEvent(),
                        dismissible: false,
                        defaultAutoClose: false,
                        transition: "platform-default",
                        labelPositive: "OK",
                        labelNegative: "Cancel",
                        backKey: "close",
                        scrollEvent: "deny",
                        domExtensionOptions: {},
                    };
                }
            };
            /**
             * H/W Back Button Handler
             */
            Dialog.customBackKeyHandler = function (event) {
                if (null != Dialog.s_activeDialog) {
                    if ("close" === Dialog.s_activeDialog._settings.backKey) {
                        Dialog.s_activeDialog.close();
                    }
                    else if ("function" === typeof Dialog.s_activeDialog._settings.backKey) {
                        Dialog.s_activeDialog._settings.backKey(event);
                    }
                    return; // Dialog が active な場合、常に既定のハンドラには渡さない
                }
                Dialog.s_oldBackKeyHandler(event);
            };
            Dialog.s_activeDialog = null;
            Dialog.s_oldBackKeyHandler = null;
            Dialog.s_defaultOptions = null;
            return Dialog;
        }());
        UI.Dialog = Dialog;
    })(UI = CDP.UI || (CDP.UI = {}));
})(CDP || (CDP = {}));
/* tslint:disable:max-line-length */
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var CDP;
(function (CDP) {
    var UI;
    (function (UI) {
        var TAG = "[CDP.UI.DialogCommons] ";
        /**
         * Alert
         * alert メッセージ表示
         *
         * @param {String} message   [in] 表示文字列
         * @param {String} [options] [in] ダイアログオプション
         * @return {jQuery} ダイアログの DOM オブジェクト
         */
        function alert(message, options) {
            var template = "\n            <script type=\"text/template\">\n                <section class=\"ui-modal\" data-role=\"popup\" data-corners=\"false\">\n                    <div class=\"ui-content\">\n                        <h1 class=\"ui-title {{_titleState}}\">{{title}}</h1>\n                        <p class=\"ui-message\">{{message}}</p>\n                    </div>\n                    <div class=\"ui-modal-footer ui-grid-solo\">\n                        <button id=\"{{idPositive}}\" class=\"ui-btn ui-block-a ui-text-emphasis\" data-auto-close=\"true\">{{labelPositive}}</button>\n                    </div>\n                </section>\n            </script>\n        ";
            var dlgAlert = new UI.Dialog(template, $.extend({}, {
                src: null,
                message: message,
            }, options));
            return dlgAlert.show();
        }
        UI.alert = alert;
        /**
         * Confirm
         * 確認メッセージ表示
         *
         * @param {String} message   [in] 表示文字列
         * @param {String} [options] [in] ダイアログオプション
         * @return {jQuery} ダイアログの DOM オブジェクト
         */
        function confirm(message, options) {
            var template = "\n            <script type=\"text/template\">\n                <section class=\"ui-modal\" data-role=\"popup\" data-corners=\"false\">\n                    <div class=\"ui-content\">\n                        <h1 class=\"ui-title {{_titleState}}\">{{title}}</h1>\n                        <p class=\"ui-message\">{{message}}</p>\n                    </div>\n                    <div class=\"ui-modal-footer ui-grid-a\">\n                        <button id=\"{{idNegative}}\" class=\"ui-btn ui-block-a\" data-auto-close=\"true\">{{labelNegative}}</button>\n                        <button id=\"{{idPositive}}\" class=\"ui-btn ui-block-b ui-text-emphasis\" data-auto-close=\"true\">{{labelPositive}}</button>\n                    </div>\n                </section>\n            </script>\n        ";
            var dlgConfirm = new UI.Dialog(template, $.extend({}, {
                src: null,
                message: message,
            }, options));
            return dlgConfirm.show();
        }
        UI.confirm = confirm;
        /**
         * @class DialogPrompt
         * @brief prompt ダイアログ (非公開)
         */
        var DialogPrompt = /** @class */ (function (_super) {
            __extends(DialogPrompt, _super);
            /**
             * constructor
             *
             */
            function DialogPrompt(id, options) {
                var _this = _super.call(this, id, options) || this;
                _this._eventOK = options.eventOK || "promptok";
                return _this;
            }
            //! ダイアログ表示の直前
            DialogPrompt.prototype.onBeforeShow = function () {
                var _this = this;
                var onCommit = function (event) {
                    var text = _this.$el.find("#_ui-prompt").val();
                    _this.$el.trigger(_this._eventOK, text);
                    _this.close();
                    event.preventDefault();
                };
                this.$el
                    .on("vclick", ".command-prompt-ok ", function (event) {
                    onCommit(event);
                })
                    .on("keydown", "#_ui-prompt", function (event) {
                    var ENTER_KEY_CODE = 13;
                    if (ENTER_KEY_CODE === event.keyCode) {
                        onCommit(event);
                    }
                });
                return _super.prototype.onBeforeShow.call(this);
            };
            return DialogPrompt;
        }(UI.Dialog));
        /**
         * Prompt
         *
         * @param {String} message   [in] 表示文字列
         * @param {String} [options] [in] ダイアログオプション
         * @return {jQuery} ダイアログの DOM オブジェクト
         */
        function prompt(message, options) {
            var template = "\n            <script type=\"text/template\">\n                <section class=\"ui-modal\" data-role=\"popup\" data-corners=\"false\">\n                    <div class=\"ui-content\">\n                        <h1 class=\"ui-title {{_titleState}}\">{{title}}</h1>\n                        <p class=\"ui-message\">{{message}}</p>\n                        <label for=\"_ui-prompt\" class=\"ui-hidden-accessible\"></label>\n                        <input type=\"text\" name=\"_ui-prompt\" id=\"_ui-prompt\">\n                    </div>\n                    <div class=\"ui-modal-footer ui-grid-a\">\n                        <button id=\"{{idNegative}}\" class=\"ui-btn ui-block-a\" data-auto-close=\"true\">{{labelNegative}}</button>\n                        <button id=\"{{idPositive}}\" class=\"command-prompt-ok ui-btn ui-block-b ui-text-emphasis\" data-auto-close=\"false\">{{labelPositive}}</button>\n                    </div>\n                </section>\n            </script>\n        ";
            var dlgPrompt = new DialogPrompt(template, $.extend({}, {
                src: null,
                message: message,
            }, options));
            return dlgPrompt.show();
        }
        UI.prompt = prompt;
    })(UI = CDP.UI || (CDP.UI = {}));
})(CDP || (CDP = {}));
var CDP;
(function (CDP) {
    var UI;
    (function (UI) {
        var Router = CDP.Framework.Router;
        var View = CDP.Framework.View;
        var Template = CDP.Tools.Template;
        var TAG = "[CDP.UI.BaseHeaderView] ";
        //__________________________________________________________________________________________________________//
        /**
         * @class BaseHeaderView
         * @brief 共通ヘッダを操作するクラス
         */
        var BaseHeaderView = /** @class */ (function (_super) {
            __extends(BaseHeaderView, _super);
            /**
             * constructor
             *
             * @param {IPage} _owner [in] オーナーページインスタンス
             */
            function BaseHeaderView(_owner, _options) {
                var _this = _super.call(this, _options = $.extend({
                    el: _owner.$page.find("[data-role='header']"),
                    backCommandSelector: ".command-back",
                    backCommandKind: "pageback",
                }, _options)) || this;
                _this._owner = _owner;
                _this._options = _options;
                // template 設定
                if (_options.baseTemplate) {
                    _this._template = _options.baseTemplate;
                }
                else {
                    _this._template = Template.getJST("\n                    <script type='text/template'>\n                        <header class='ui-header-base ui-body-{{theme}}'>\n                            <div class='ui-fixed-back-indicator'></div>\n                        </header>\n                    </script>\n                ");
                }
                // Backbone.View 用の初期化
                _this.setElement(_this.$el, true);
                return _this;
            }
            ///////////////////////////////////////////////////////////////////////
            // public methods
            /**
             * 初期化
             */
            BaseHeaderView.prototype.create = function () {
                return this.createHeaderBase();
            };
            /**
             * 有効化
             */
            BaseHeaderView.prototype.activate = function () {
                return this.showIndicator();
            };
            /**
             * 無効化
             */
            BaseHeaderView.prototype.inactivate = function () {
                return this.hideIndicator();
            };
            /**
             * 破棄
             */
            BaseHeaderView.prototype.release = function () {
                return this.releaseHeaderBase();
            };
            ///////////////////////////////////////////////////////////////////////
            // private methods
            //! 共通ヘッダのベースを準備
            BaseHeaderView.prototype.createHeaderBase = function () {
                // 固定ヘッダのときに有効化
                if ("fixed" === this._owner.$header.jqmData("position")) {
                    if (null == BaseHeaderView.s_$headerBase) {
                        BaseHeaderView.s_$headerBase = $(this._template({
                            theme: this._owner.$page.jqmData("theme"),
                        }));
                    }
                    BaseHeaderView.s_refCount++;
                    BaseHeaderView.s_$headerBase.appendTo($(document.body));
                }
                // Back Indicator を持っているか判定
                if (0 < this.$el.find(".ui-back-indicator").length) {
                    this._hasBackIndicator = true;
                }
                return BaseHeaderView.s_$headerBase;
            };
            //! indicator の表示
            BaseHeaderView.prototype.showIndicator = function () {
                // Back Indicator を持っていない場合表示しない
                if (null != BaseHeaderView.s_$headerBase && this._hasBackIndicator) {
                    BaseHeaderView.s_$headerBase.find(".ui-fixed-back-indicator").addClass("show");
                }
                return BaseHeaderView.s_$headerBase;
            };
            //! indicator の非表示
            BaseHeaderView.prototype.hideIndicator = function () {
                if (null != BaseHeaderView.s_$headerBase) {
                    BaseHeaderView.s_$headerBase.find(".ui-fixed-back-indicator").removeClass("show");
                }
                return BaseHeaderView.s_$headerBase;
            };
            //! 共通ヘッダのベースを破棄
            BaseHeaderView.prototype.releaseHeaderBase = function () {
                // 固定ヘッダ時に参照カウントを管理
                if ("fixed" === this._owner.$header.jqmData("position")) {
                    if (null != BaseHeaderView.s_$headerBase) {
                        BaseHeaderView.s_refCount--;
                        if (0 === BaseHeaderView.s_refCount) {
                            BaseHeaderView.s_$headerBase.remove();
                            BaseHeaderView.s_$headerBase = null;
                        }
                    }
                }
                return BaseHeaderView.s_$headerBase;
            };
            ///////////////////////////////////////////////////////////////////////
            // Override: Backbone.View
            //! events binding
            BaseHeaderView.prototype.events = function () {
                var eventMap = {};
                if (this._options) {
                    eventMap["vclick " + this._options.backCommandSelector] = this.onCommandBack;
                }
                return eventMap;
            };
            //! back のハンドラ
            BaseHeaderView.prototype.onCommandBack = function (event) {
                event.preventDefault();
                var handled = false;
                if (this._owner) {
                    handled = this._owner.onCommand(event, this._options.backCommandKind);
                }
                if (!handled) {
                    Router.back();
                }
            };
            BaseHeaderView.s_refCount = 0; //!< 参照カウント
            return BaseHeaderView;
        }(View));
        UI.BaseHeaderView = BaseHeaderView;
    })(UI = CDP.UI || (CDP.UI = {}));
})(CDP || (CDP = {}));
/* tslint:disable:max-line-length */
var CDP;
(function (CDP) {
    var UI;
    (function (UI) {
        var Framework = CDP.Framework;
        var TAG = "[CDP.UI.BasePage] ";
        //__________________________________________________________________________________________________________//
        /**
         * @class BasePage
         * @brief Header を備える Page クラス
         */
        var BasePage = /** @class */ (function (_super) {
            __extends(BasePage, _super);
            /**
             * constructor
             *
             * @param {String}          url       [in] ページ URL
             * @param {String}          id        [in] ページ ID
             * @param {BasePageOptions} [options] [in] オプション
             */
            function BasePage(url, id, _options) {
                var _this = _super.call(this, url, id, _options = $.extend({
                    baseHeader: UI.BaseHeaderView,
                    backCommandHandler: "onPageBack",
                    backCommandKind: "pageback",
                    domExtensionOptions: {},
                }, _options)) || this;
                _this._options = _options;
                return _this;
            }
            ///////////////////////////////////////////////////////////////////////
            // Override: Framework Page
            /**
             * jQM event: "pagebeforecreate" に対応
             *
             * @param event {JQuery.Event} [in] イベントオブジェクト
             */
            BasePage.prototype.onPageBeforeCreate = function (event) {
                if (this._options.baseHeader) {
                    this._baseHeader = new this._options.baseHeader(this, this._options);
                    this._baseHeader.create();
                }
                _super.prototype.onPageBeforeCreate.call(this, event);
            };
            /**
             * jQM event: "pagecreate" に対応
             *
             * @param event {JQuery.Event} [in] イベントオブジェクト
             */
            BasePage.prototype.onPageInit = function (event) {
                if (null != this._options.domExtensionOptions) {
                    UI.ExtensionManager.applyDomExtension(this.$page, this._options.domExtensionOptions);
                }
                _super.prototype.onPageInit.call(this, event);
            };
            /**
             * jQM event: "pagebeforeshow" に対応
             *
             * @param event {JQuery.Event} [in] イベントオブジェクト
             * @param data  {ShowEventData}     [in] 付加情報
             */
            BasePage.prototype.onPageBeforeShow = function (event, data) {
                if (this._baseHeader) {
                    this._baseHeader.activate();
                }
                _super.prototype.onPageBeforeShow.call(this, event, data);
            };
            /**
             * jQM event: "pagebeforehide" に対応
             *
             * @param event {JQuery.Event} [in] イベントオブジェクト
             * @param data  {HideEventData}     [in] 付加情報
             */
            BasePage.prototype.onPageBeforeHide = function (event, data) {
                if (this._baseHeader) {
                    this._baseHeader.inactivate();
                }
                _super.prototype.onPageBeforeHide.call(this, event, data);
            };
            /**
             * jQM event: "pageremove" に対応
             *
             * @param event {JQuery.Event} [in] イベントオブジェクト
             */
            BasePage.prototype.onPageRemove = function (event) {
                if (this._baseHeader) {
                    this._baseHeader.release();
                    this._baseHeader = null;
                }
                _super.prototype.onPageRemove.call(this, event);
            };
            /**
             * H/W Back Button ハンドラ
             *
             * @param  event {JQuery.Event} [in] event object
             * @return {Boolean} true: 既定の処理を行わない / false: 既定の処理を行う
             */
            BasePage.prototype.onHardwareBackButton = function (event) {
                var retval = _super.prototype.onHardwareBackButton.call(this, event);
                if (!retval) {
                    retval = this.onCommand(event, this._options.backCommandKind);
                }
                return retval;
            };
            ///////////////////////////////////////////////////////////////////////
            // Override: Custom Event
            /**
             * "戻る" event 発行時にコールされる
             *
             * @param event {JQuery.Event} [in] イベントオブジェクト
             * @return {Boolean} true: 既定の処理を行わない / false: 既定の処理を行う
             */
            BasePage.prototype.onCommand = function (event, kind) {
                if (this._options.backCommandKind === kind) {
                    if (this._owner && this._owner[this._options.backCommandHandler]) {
                        return this._owner[this._options.backCommandHandler](event);
                    }
                }
                return false;
            };
            return BasePage;
        }(Framework.Page));
        UI.BasePage = BasePage;
    })(UI = CDP.UI || (CDP.UI = {}));
})(CDP || (CDP = {}));
/* tslint:disable:max-line-length */
var CDP;
(function (CDP) {
    var UI;
    (function (UI) {
        var Promise = CDP.Promise;
        var Framework = CDP.Framework;
        var TAG = "[CDP.UI.PageView] ";
        /**
         * @class PageView
         * @brief CDP.Framework.Page と Backbone.View の両方の機能を提供するページの基底クラス
         */
        var PageView = /** @class */ (function (_super) {
            __extends(PageView, _super);
            /**
             * constructor
             *
             * @param url     {String}                   [in] ページ URL
             * @param id      {String}                   [in] ページ ID
             * @param options {PageViewConstructOptions} [in] オプション
             */
            function PageView(url, id, options) {
                var _this = _super.call(this, options) || this;
                _this._pageOptions = null;
                _this._basePage = null;
                _this._statusMgr = null;
                // PageView 設定
                _this._pageOptions = $.extend({}, { owner: _this }, options);
                _this._basePage = _this._pageOptions.basePage ? new _this._pageOptions.basePage(url, id, _this._pageOptions) : new UI.BasePage(url, id, _this._pageOptions);
                // StatusManager
                _this._statusMgr = new UI.StatusManager();
                // Backbone.View 用の初期化
                var delegates = _this.events ? true : false;
                _this.setElement(_this.$page, delegates);
                return _this;
            }
            ///////////////////////////////////////////////////////////////////////
            // Implements: IStatusManager 状態管理
            /**
             * 状態変数の参照カウントのインクリメント
             *
             * @param status {String} [in] 状態識別子
             */
            PageView.prototype.statusAddRef = function (status) {
                return this._statusMgr.statusAddRef(status);
            };
            /**
             * 状態変数の参照カウントのデクリメント
             *
             * @param status {String} [in] 状態識別子
             */
            PageView.prototype.statusRelease = function (status) {
                return this._statusMgr.statusRelease(status);
            };
            /**
             * 処理スコープ毎に状態変数を設定
             *
             * @param status   {String}   [in] 状態識別子
             * @param callback {Function} [in] 処理コールバック
             */
            PageView.prototype.statusScope = function (status, callback) {
                this._statusMgr.statusScope(status, callback);
            };
            /**
             * 指定した状態中であるか確認
             *
             * @param status {String}   [in] 状態識別子
             * @return {Boolean} true: 状態内 / false: 状態外
             */
            PageView.prototype.isStatusIn = function (status) {
                return this._statusMgr.isStatusIn(status);
            };
            Object.defineProperty(PageView.prototype, "active", {
                ///////////////////////////////////////////////////////////////////////
                // IPage stub stuff.
                get: function () { return this._basePage.active; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(PageView.prototype, "url", {
                get: function () { return this._basePage.url; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(PageView.prototype, "id", {
                get: function () { return this._basePage ? this._basePage.id : null; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(PageView.prototype, "$page", {
                get: function () { return this._basePage.$page; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(PageView.prototype, "$header", {
                get: function () { return this._basePage.$header; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(PageView.prototype, "$footer", {
                get: function () { return this._basePage.$footer; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(PageView.prototype, "intent", {
                get: function () { return this._basePage.intent; },
                set: function (newIntent) { this._basePage.intent = newIntent; },
                enumerable: true,
                configurable: true
            });
            /**
             * Orientation の変更を受信
             *
             * @param newOrientation {Orientation} [in] new orientation code.
             */
            PageView.prototype.onOrientationChanged = function (newOrientation) {
                this.trigger("pageview:orientation-changed" /* ORIENTATION_CHANGED */, newOrientation);
            };
            /**
             * H/W Back Button ハンドラ
             *
             * @param  event {JQuery.Event} [in] event object
             * @return {Boolean} true: 既定の処理を行わない / false: 既定の処理を行う
             */
            PageView.prototype.onHardwareBackButton = function (event) {
                return false;
            };
            /**
             * Router "before route change" ハンドラ
             * ページ遷移直前に非同期処理を行うことが可能
             *
             * @return {IPromiseBase} Promise オブジェクト
             */
            PageView.prototype.onBeforeRouteChange = function () {
                return Promise.resolve();
            };
            /**
             * 汎用コマンドを受信
             *
             * @param  event {JQuery.Event} [in] event object
             * @param  event {kind}              [in] command kind string
             * @return {Boolean} true: 既定の処理を行わない / false: 既定の処理を行う
             */
            PageView.prototype.onCommand = function (event, kind) {
                return false;
            };
            /**
             * 最初の OnPageInit() のときにのみコールされる
             *
             * @param event {JQuery.Event} [in] イベントオブジェクト
             */
            PageView.prototype.onInitialize = function (event) {
                this.trigger("pageview:initialize" /* INITIALZSE */, event);
            };
            /**
             * jQM event: "pagebeforecreate" に対応
             *
             * @param event {JQuery.Event} [in] イベントオブジェクト
             */
            PageView.prototype.onPageBeforeCreate = function (event) {
                this.setElement(this.$page, true);
                this.trigger("pageview:before-create" /* PAGE_BEFORE_CREATE */, event);
            };
            /**
             * jQM event: "pagecreate" (旧:"pageinit") に対応
             *
             * @param event {JQuery.Event} [in] イベントオブジェクト
             */
            PageView.prototype.onPageInit = function (event) {
                this.trigger("pageview:page-init" /* PAGE_INIT */, event);
            };
            /**
             * jQM event: "pagebeforeshow" に対応
             *
             * @param event {JQuery.Event} [in] イベントオブジェクト
             * @param data  {ShowEventData}     [in] 付加情報
             */
            PageView.prototype.onPageBeforeShow = function (event, data) {
                this.trigger("pageview:before-show" /* PAGE_BEFORE_SHOW */, event, data);
            };
            /**
             * jQM event: "pagecontainershow" (旧:"pageshow") に対応
             *
             * @param event {JQuery.Event} [in] イベントオブジェクト
             * @param data  {ShowEventData}     [in] 付加情報
             */
            PageView.prototype.onPageShow = function (event, data) {
                this.trigger("pageview:show" /* PAGE_SHOW */, event, data);
            };
            /**
             * jQM event: "pagebeforehide" に対応
             *
             * @param event {JQuery.Event} [in] イベントオブジェクト
             * @param data  {HideEventData}     [in] 付加情報
             */
            PageView.prototype.onPageBeforeHide = function (event, data) {
                this.trigger("pageview:before-hide" /* PAGE_BEFORE_HIDE */, event, data);
            };
            /**
             * jQM event: "pagecontainerhide" (旧:"pagehide") に対応
             *
             * @param event {JQuery.Event} [in] イベントオブジェクト
             * @param data  {HideEventData}     [in] 付加情報
             */
            PageView.prototype.onPageHide = function (event, data) {
                this.trigger("pageview:hide" /* PAGE_HIDE */, event, data);
            };
            /**
             * jQM event: "pageremove" に対応
             *
             * @param event {JQuery.Event} [in] イベントオブジェクト
             */
            PageView.prototype.onPageRemove = function (event) {
                this.trigger("pageview:remove" /* PAGE_REMOVE */, event);
                this.remove();
                this.el = null;
                this.$el = null;
            };
            return PageView;
        }(Framework.View));
        UI.PageView = PageView;
    })(UI = CDP.UI || (CDP.UI = {}));
})(CDP || (CDP = {}));
/* tslint:disable:max-line-length */
var CDP;
(function (CDP) {
    var UI;
    (function (UI) {
        var Framework = CDP.Framework;
        var TAG = "[CDP.UI.PageContainerView] ";
        /**
         * @class PageContainerView
         * @brief PageView と連携可能な コンテナビュークラス
         */
        var PageContainerView = /** @class */ (function (_super) {
            __extends(PageContainerView, _super);
            /**
             * constructor
             */
            function PageContainerView(options) {
                var _this = _super.call(this, options) || this;
                _this._owner = null;
                _this._owner = options.owner;
                if (options.$el) {
                    var delegates = _this.events ? true : false;
                    _this.setElement(options.$el, delegates);
                }
                // set event listener
                _this.listenTo(_this._owner, "pageview:orientation-changed" /* ORIENTATION_CHANGED */, _this.onOrientationChanged.bind(_this));
                _this.listenTo(_this._owner, "pageview:initialize" /* INITIALZSE */, _this.onInitialize.bind(_this));
                _this.listenTo(_this._owner, "pageview:before-create" /* PAGE_BEFORE_CREATE */, _this.onPageBeforeCreate.bind(_this));
                _this.listenTo(_this._owner, "pageview:page-init" /* PAGE_INIT */, _this.onPageInit.bind(_this));
                _this.listenTo(_this._owner, "pageview:before-show" /* PAGE_BEFORE_SHOW */, _this.onPageBeforeShow.bind(_this));
                _this.listenTo(_this._owner, "pageview:show" /* PAGE_SHOW */, _this.onPageShow.bind(_this));
                _this.listenTo(_this._owner, "pageview:before-hide" /* PAGE_BEFORE_HIDE */, _this.onPageBeforeHide.bind(_this));
                _this.listenTo(_this._owner, "pageview:hide" /* PAGE_HIDE */, _this.onPageHide.bind(_this));
                _this.listenTo(_this._owner, "pageview:remove" /* PAGE_REMOVE */, _this.onPageRemove.bind(_this));
                return _this;
            }
            Object.defineProperty(PageContainerView.prototype, "owner", {
                ///////////////////////////////////////////////////////////////////////
                // short cut methods
                //! Owner 取得
                get: function () {
                    return this._owner;
                },
                enumerable: true,
                configurable: true
            });
            ///////////////////////////////////////////////////////////////////////
            // Handle PageView events
            /**
             * Orientation の変更を受信
             *
             * @param newOrientation {Orientation} [in] new orientation code.
             */
            PageContainerView.prototype.onOrientationChanged = function (newOrientation) {
                // Override
            };
            /**
             * 最初の OnPageInit() のときにのみコールされる
             *
             * @param event {JQuery.Event} [in] イベントオブジェクト
             */
            PageContainerView.prototype.onInitialize = function (event) {
                // Override
            };
            /**
             * jQM event: "pagebeforecreate" に対応
             *
             * @param event {JQuery.Event} [in] イベントオブジェクト
             */
            PageContainerView.prototype.onPageBeforeCreate = function (event) {
                // Override
            };
            /**
             * jQM event: "pagecreate" (旧:"pageinit") に対応
             *
             * @param event {JQuery.Event} [in] イベントオブジェクト
             */
            PageContainerView.prototype.onPageInit = function (event) {
                // Override
            };
            /**
             * jQM event: "pagebeforeshow" に対応
             *
             * @param event {JQuery.Event} [in] イベントオブジェクト
             * @param data  {ShowEventData}     [in] 付加情報
             */
            PageContainerView.prototype.onPageBeforeShow = function (event, data) {
                // Override
            };
            /**
             * jQM event: "pagecontainershow" (旧:"pageshow") に対応
             *
             * @param event {JQuery.Event} [in] イベントオブジェクト
             * @param data  {ShowEventData}     [in] 付加情報
             */
            PageContainerView.prototype.onPageShow = function (event, data) {
                // Override
            };
            /**
             * jQM event: "pagebeforehide" に対応
             *
             * @param event {JQuery.Event} [in] イベントオブジェクト
             * @param data  {HideEventData}     [in] 付加情報
             */
            PageContainerView.prototype.onPageBeforeHide = function (event, data) {
                // Override
            };
            /**
             * jQM event: "pagecontainerhide" (旧:"pagehide") に対応
             *
             * @param event {JQuery.Event} [in] イベントオブジェクト
             * @param data  {HideEventData}     [in] 付加情報
             */
            PageContainerView.prototype.onPageHide = function (event, data) {
                // Override
            };
            /**
             * jQM event: "pageremove" に対応
             *
             * @param event {JQuery.Event} [in] イベントオブジェクト
             */
            PageContainerView.prototype.onPageRemove = function (event) {
                this.stopListening();
            };
            return PageContainerView;
        }(Framework.View));
        UI.PageContainerView = PageContainerView;
    })(UI = CDP.UI || (CDP.UI = {}));
})(CDP || (CDP = {}));
var CDP;
(function (CDP) {
    var UI;
    (function (UI) {
        var TAG = "[CDP.UI.TabHostView] ";
        var _Config;
        (function (_Config) {
            _Config.TABVIEW_CLASS = "ui-tabview";
            _Config.TABVIEW_SELECTOR = "." + _Config.TABVIEW_CLASS;
            _Config.TABHOST_CLASS = "ui-tabhost";
            _Config.TABHOST_SELECTOR = "." + _Config.TABHOST_CLASS;
            _Config.TABHOST_REFRESH_COEFF = 1.0; // flipsnap 切り替え時に duration に対して更新を行う係数
            _Config.TABHOST_REFRESH_INTERVAL = 200; // flipsnap の更新に使用する間隔 [msec]
        })(_Config || (_Config = {}));
        //___________________________________________________________________________________________________________________//
        /**
         * @class TabHostView
         * @brief タブ切り替え機能を持つ View クラス
         */
        var TabHostView = /** @class */ (function (_super) {
            __extends(TabHostView, _super);
            /**
             * constructor
             *
             * @param options [in] オプション
             */
            function TabHostView(options) {
                var _this = _super.call(this, options) || this;
                _this._tabs = []; // ITabView を格納
                _this._activeTabIndex = 0; // active tab
                _this._flipsnap = null; // flipsnap オブジェクト
                _this._flipEndEventHandler = null; // "fstouchend"
                _this._flipMoveEventHandler = null; // "fstouchmove"
                _this._flipDeltaCache = 0; // "flip 距離のキャッシュ"
                _this._scrollEndEventHandler = null; // tabview "scrollstop"
                _this._scrollMoveEventHandler = null; // tabview "scroll"
                _this._refreshTimerId = null; // refresh() 反映確認用
                // check runtime condition
                if (null == UI.global.Flipsnap) {
                    console.error(TAG + "flipsnap module doesn't load.");
                    return _this;
                }
                _this._settings = $.extend({
                    tabContexts: [],
                    tabMoveHandler: function (delta) { },
                    tabStopHandler: function (newIndex, moved) { }
                }, options);
                // setup event handlers
                _this._flipEndEventHandler = function (event) {
                    var fsEvent = event.originalEvent;
                    _this._flipDeltaCache = 0;
                    _this.onTabChanged(fsEvent.newPoint, fsEvent.moved);
                };
                _this._flipMoveEventHandler = function (event) {
                    var fsEvent = event.originalEvent;
                    _this._flipDeltaCache += fsEvent.delta;
                    // bounce のガード
                    if (!_this._settings.enableBounce && ((-1 === fsEvent.direction && 0 === _this._activeTabIndex && 0 < _this._flipDeltaCache) ||
                        (1 === fsEvent.direction && _this._activeTabIndex === _this._tabs.length - 1 && _this._flipDeltaCache < 0))) {
                        event.preventDefault();
                        _this._flipsnap.moveToPoint(fsEvent.newPoint);
                    }
                    else {
                        _this.onTabMoving(fsEvent.delta);
                        _this._tabs.forEach(function (tabview) {
                            tabview.onTabScrolling(_this._activeTabIndex, fsEvent.delta);
                        });
                        _this.preprocess(_this._activeTabIndex);
                    }
                };
                _this._scrollEndEventHandler = function (event) {
                    _this.onScrollStop();
                };
                _this._scrollMoveEventHandler = function (event) {
                    _this.onScroll();
                };
                // setup tabs
                if (_this._settings.initialWidth) {
                    _this.$el.width(_this._settings.initialWidth);
                }
                if (_this._settings.initialHeight) {
                    _this.$el.height(_this._settings.initialHeight);
                }
                var initialWidth = _this._settings.initialWidth;
                var initialHeight = _this.$el.height();
                var tabContexts = _this._settings.tabContexts.slice();
                if (0 < tabContexts.length) {
                    tabContexts.forEach(function (context) {
                        /* tslint:disable:no-unused-expression */
                        new context.ctor($.extend({
                            initialHeight: initialHeight,
                        }, context.options, { host: _this, delayRegister: false }));
                        /* tslint:enable:no-unused-expression */
                    });
                }
                else {
                    // ITabView インスタンス化要求
                    _this.onTabViewSetupRequest(initialHeight);
                }
                if (_this._settings.initImmediate) {
                    _this.initializeTabViews();
                }
                // Flipsnap
                _this.setFlipsnapCondition($.extend({}, {
                    distance: initialWidth,
                }, _this._settings));
                _this.setActiveTab(_this._activeTabIndex, 0, true);
                return _this;
            }
            /**
             * 配下の TabView を初期化
             */
            TabHostView.prototype.initializeTabViews = function () {
                var _this = this;
                // ITabView に $tabHost をアサインする
                // NOTE: 現在は DOM の順序は固定
                var $tabs = this.$el.find(_Config.TABVIEW_SELECTOR);
                this._tabs.forEach(function (tabview, index) {
                    tabview.onInitialize(_this, $($tabs[index]));
                });
            };
            /**
             * 破棄のヘルパー関数
             * メンバーの破棄のタイミングを変える場合、本メソッドをコールする
             */
            TabHostView.prototype.destroy = function () {
                this.resetFlipsnapCondition();
                this._tabs.forEach(function (tabview) {
                    tabview.onDestroy();
                });
                this._tabs = [];
            };
            ///////////////////////////////////////////////////////////////////////
            // Framework methods:
            // ページの基準値を取得
            TabHostView.prototype.getBaseHeight = function () {
                return this.$el.height();
            };
            /**
             * TabView を登録
             * Framework が使用
             *
             * @param tabview [in] ITabView のインスタンス
             */
            TabHostView.prototype.registerTabView = function (tabview) {
                if (null == this.getTabIndexOf(tabview)) {
                    this._tabs.push(tabview);
                }
                else {
                    console.warn(TAG + "tab instance already registered.");
                }
            };
            /**
             * TabView の Tab index を取得
             * Framework が使用
             *
             * @param tabview [in] ITabView のインスタンス
             * @return 指定インスタンスのインデックス
             */
            TabHostView.prototype.getTabIndexOf = function (tabview) {
                for (var i = 0, n = this._tabs.length; i < n; i++) {
                    if (tabview === this._tabs[i]) {
                        return i;
                    }
                }
                return null;
            };
            // タブポジションの初期化
            TabHostView.prototype.resetTabPosition = function () {
                this._tabs.forEach(function (tabview) {
                    tabview.scrollTo(0, false, 0);
                    tabview.refresh();
                });
                this.setActiveTab(0, 0, true);
            };
            // ITabView 設定リクエスト時にコールされる
            TabHostView.prototype.onTabViewSetupRequest = function (initialHeight) {
                // override
            };
            ///////////////////////////////////////////////////////////////////////
            // Tab control methods:
            // アクティブ Tab を設定
            TabHostView.prototype.setActiveTab = function (index, transitionDuration, initial) {
                var _this = this;
                if (this.validTab(index) && (initial || (this._activeTabIndex !== index))) {
                    // 遷移前に scroll 位置の view を更新
                    this.preprocess(index);
                    var lastActiveTabIndex_1 = this._activeTabIndex;
                    this._activeTabIndex = index;
                    this._flipsnap.moveToPoint(this._activeTabIndex, transitionDuration);
                    {
                        var changeTab_1 = function () {
                            _this.postprocess(lastActiveTabIndex_1);
                            _this.onTabChanged(_this._activeTabIndex, false);
                        };
                        transitionDuration = transitionDuration || parseInt(this._flipsnap.transitionDuration, 10);
                        if (0 === transitionDuration) {
                            changeTab_1();
                        }
                        else {
                            setTimeout(function () {
                                changeTab_1();
                            }, transitionDuration * _Config.TABHOST_REFRESH_COEFF);
                        }
                    }
                    return true;
                }
                else {
                    return false;
                }
            };
            /**
             * タブの数を取得
             *
             * @return {Number} タブ数
             */
            TabHostView.prototype.getTabCount = function () {
                return this._tabs.length;
            };
            // アクティブなタブ Index を取得
            TabHostView.prototype.getActiveTabIndex = function () {
                return this._activeTabIndex;
            };
            // swipe 移動量を取得 (swipe 中に delta の加算値を返却)
            TabHostView.prototype.getSwipeDelta = function () {
                return this._flipDeltaCache;
            };
            // タブ移動イベント
            TabHostView.prototype.onTabMoving = function (delta) {
                this.trigger(TabHostView.EVENT_TAB_MOVE, delta);
            };
            // タブ変更完了イベント
            TabHostView.prototype.onTabChanged = function (newIndex, moved) {
                if (moved) {
                    this.setActiveTab(newIndex);
                }
                this.trigger(TabHostView.EVENT_TAB_STOP, newIndex, moved);
            };
            ///////////////////////////////////////////////////////////////////////
            // Scroll control methods:
            // スクロール位置を取得
            TabHostView.prototype.getScrollPos = function () {
                if (this._activeTabView) {
                    return this._activeTabView.getScrollPos();
                }
                else {
                    return 0;
                }
            };
            // スクロール位置の最大値を取得
            TabHostView.prototype.getScrollPosMax = function () {
                if (this._activeTabView) {
                    return this._activeTabView.getScrollPosMax();
                }
                else {
                    return 0;
                }
            };
            // スクロール位置を指定
            TabHostView.prototype.scrollTo = function (pos, animate, time) {
                if (this._activeTabView) {
                    this._activeTabView.scrollTo(pos, animate, time);
                }
            };
            // スクロールイベント
            TabHostView.prototype.onScroll = function () {
                this.trigger(TabHostView.EVENT_SCROLL_MOVE);
            };
            // スクロール完了イベント
            TabHostView.prototype.onScrollStop = function () {
                this.trigger(TabHostView.EVENT_SCROLL_STOP);
            };
            // スクロールイベントハンドラ設定/解除
            TabHostView.prototype.setScrollHandler = function (handler, on) {
                if (this._activeTabView) {
                    this._activeTabView.setScrollHandler(handler, on);
                }
            };
            // スクロール終了イベントハンドラ設定/解除
            TabHostView.prototype.setScrollStopHandler = function (handler, on) {
                if (this._activeTabView) {
                    this._activeTabView.setScrollStopHandler(handler, on);
                }
            };
            ///////////////////////////////////////////////////////////////////////
            // Host event hooks:
            // Orientation の変更検知
            TabHostView.prototype.onOrientationChanged = function (newOrientation) {
                var _this = this;
                _super.prototype.onOrientationChanged.call(this, newOrientation);
                this._tabs.forEach(function (tabview) {
                    tabview.onOrientationChanged(newOrientation);
                });
                if (null != this._refreshTimerId) {
                    clearTimeout(this._refreshTimerId);
                }
                if (this._flipsnap && 0 < this._tabs.length) {
                    var proc_1 = function () {
                        // リトライ
                        if (_this._flipsnap && _this._flipsnap._maxPoint !== (_this._tabs.length - 1)) {
                            _this._flipsnap.refresh();
                            _this._refreshTimerId = setTimeout(proc_1, _Config.TABHOST_REFRESH_INTERVAL);
                        }
                        else {
                            _this._refreshTimerId = null;
                        }
                    };
                    this._flipsnap.refresh();
                    this._refreshTimerId = setTimeout(proc_1, _Config.TABHOST_REFRESH_INTERVAL);
                }
            };
            // jQM event: "pagecontainershow" (旧:"pageshow") に対応
            TabHostView.prototype.onPageShow = function (event, data) {
                _super.prototype.onPageShow.call(this, event, data);
                this.rebuild();
            };
            ///////////////////////////////////////////////////////////////////////
            // Implements: ScrollManager Profile 管理
            // ページアサインを再構成
            TabHostView.prototype.rebuild = function () {
                this._tabs.forEach(function (tabview) {
                    if (tabview.needRebuild) {
                        tabview.rebuild();
                        tabview.needRebuild = false;
                    }
                });
            };
            ///////////////////////////////////////////////////////////////////////
            // private methods:
            // flipsnap 環境設定
            TabHostView.prototype.setFlipsnapCondition = function (options) {
                this._flipsnap = UI.global.Flipsnap(_Config.TABHOST_SELECTOR, options);
                $(this._flipsnap.element).on("fstouchend", this._flipEndEventHandler.bind(this));
                $(this._flipsnap.element).on("fstouchmove", this._flipMoveEventHandler.bind(this));
            };
            // flipsnap 環境破棄
            TabHostView.prototype.resetFlipsnapCondition = function () {
                if (this._flipsnap) {
                    $(this._flipsnap.element).off("fstouchmove", this._flipMoveEventHandler.bind(this));
                    $(this._flipsnap.element).off("fstouchend", this._flipEndEventHandler.bind(this));
                    this._flipsnap.destroy();
                    this._flipsnap = null;
                }
                this._flipDeltaCache = 0;
            };
            // Tab 切り替えの前処理
            TabHostView.prototype.preprocess = function (toIndex) {
                var _this = this;
                this._tabs.forEach(function (tabview, index) {
                    if (index !== _this._activeTabIndex) {
                        tabview.treatScrollPosition();
                    }
                    // 移動範囲を可視化 NOTE: loop 対応時に条件見直し
                    if ((_this._activeTabIndex < toIndex && (_this._activeTabIndex < index && index <= toIndex)) ||
                        (toIndex < _this._activeTabIndex && (toIndex <= index && index < _this._activeTabIndex))) {
                        tabview.$el.css("visibility", "visible");
                    }
                });
            };
            // Tab 切り替えの後処理
            TabHostView.prototype.postprocess = function (lastActiveTabIndex) {
                var _this = this;
                this._tabs.forEach(function (tabview, index) {
                    if (null != _this._settings.inactiveVisibleTabDistance) {
                        // NOTE: loop 対応時に条件対応
                        var distance = _this._settings.inactiveVisibleTabDistance;
                        if (_this._activeTabIndex - distance <= index && index <= _this._activeTabIndex + distance) {
                            tabview.$el.css("visibility", "visible");
                            tabview.onVisibilityChanged(true);
                        }
                        else {
                            tabview.$el.css("visibility", "hidden");
                            tabview.onVisibilityChanged(false);
                        }
                    }
                    if (index === _this._activeTabIndex) {
                        tabview.onTabSelected();
                        tabview.setScrollHandler(_this._scrollMoveEventHandler, true);
                        tabview.setScrollStopHandler(_this._scrollEndEventHandler, true);
                    }
                    else if (index === lastActiveTabIndex) {
                        tabview.setScrollHandler(_this._scrollMoveEventHandler, false);
                        tabview.setScrollStopHandler(_this._scrollEndEventHandler, false);
                        tabview.onTabReleased();
                    }
                });
            };
            // Tab Index を検証
            TabHostView.prototype.validTab = function (index) {
                if (0 === this._tabs.length) {
                    return false;
                }
                else if (0 <= index && index < this._tabs.length) {
                    return true;
                }
                else {
                    console.error(TAG + "invalid tab index. index: " + index);
                    return false;
                }
            };
            Object.defineProperty(TabHostView.prototype, "_activeTabView", {
                // アクティブなタブ ScrollManager を取得
                get: function () {
                    return this._tabs[this._activeTabIndex];
                },
                enumerable: true,
                configurable: true
            });
            TabHostView.EVENT_SCROLL_MOVE = "tabhost:scrollmove";
            TabHostView.EVENT_SCROLL_STOP = "tabhost:scrollstop";
            TabHostView.EVENT_TAB_MOVE = "tabhost:tabmove";
            TabHostView.EVENT_TAB_STOP = "tabhost:tavstop";
            return TabHostView;
        }(UI.PageContainerView));
        UI.TabHostView = TabHostView;
    })(UI = CDP.UI || (CDP.UI = {}));
})(CDP || (CDP = {}));
var CDP;
(function (CDP) {
    var UI;
    (function (UI) {
        var TAG = "[CDP.UI.TabView] ";
        var SUPPRESS_WARNING_INITIAL_HEIGHT = 1;
        /**
         * @class TabView
         * @brief TabHostView にアタッチ可能な View クラス
         */
        var TabView = /** @class */ (function (_super) {
            __extends(TabView, _super);
            /**
             * constructor
             *
             */
            function TabView(options) {
                var _this = _super.call(this, $.extend({}, { initialHeight: SUPPRESS_WARNING_INITIAL_HEIGHT }, options)) || this;
                _this._host = null;
                _this._needRebuild = false; // ページ表示時に rebuild() をコールするための内部変数
                _this._host = options.host;
                if (!options.delayRegister) {
                    _this._host.registerTabView(_this);
                }
                return _this;
            }
            Object.defineProperty(TabView.prototype, "host", {
                ///////////////////////////////////////////////////////////////////////
                // Implements: IViewPager properties.
                // BaseTabPageView にアクセス
                get: function () {
                    return this._host;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(TabView.prototype, "needRebuild", {
                // rebuild 状態へアクセス
                get: function () {
                    return this._needRebuild;
                },
                // rebuild 状態を設定
                set: function (rebuild) {
                    this._needRebuild = rebuild;
                },
                enumerable: true,
                configurable: true
            });
            ///////////////////////////////////////////////////////////////////////
            // Implements: IViewPager Framework.
            // 状態に応じたスクロール位置の保存/復元
            TabView.prototype.treatScrollPosition = function () {
                this.core.treatScrollPosition();
            };
            ///////////////////////////////////////////////////////////////////////
            // Implements: ITabView Events.
            // Scroller の初期化時にコールされる
            TabView.prototype.onInitialize = function (host, $root) {
                this._host = host;
                this.core.initialize($root, host.getBaseHeight());
                Backbone.View.prototype.setElement.call(this, $root, true);
            };
            // Scroller の破棄時にコールされる
            TabView.prototype.onDestroy = function () {
                this.remove();
                this._host = null;
            };
            // visibility 属性が変更されたときにコールされる
            TabView.prototype.onVisibilityChanged = function (visible) {
                // override
            };
            // ページが表示完了したときにコールされる
            TabView.prototype.onTabSelected = function () {
                this.core.setActiveState(true);
            };
            // ページが非表示に切り替わったときにコールされる
            TabView.prototype.onTabReleased = function () {
                this.core.setActiveState(false);
            };
            // ドラッグ中にコールされる
            TabView.prototype.onTabScrolling = function (position, offset) {
                // override
            };
            ///////////////////////////////////////////////////////////////////////
            // Implements: IOrientationChangedListener events.
            // Orientation の変更を受信
            TabView.prototype.onOrientationChanged = function (newOrientation) {
                // override
            };
            Object.defineProperty(TabView.prototype, "core", {
                ///////////////////////////////////////////////////////////////////////
                // Override: IListView
                // core framework access
                get: function () {
                    return this._scrollMgr;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(TabView.prototype, "tabIndex", {
                ///////////////////////////////////////////////////////////////////////
                // protected methods
                // 自身の Tab Index を取得
                get: function () {
                    if (null == this._tabIndex) {
                        this._tabIndex = this._host.getTabIndexOf(this);
                    }
                    return this._tabIndex;
                },
                enumerable: true,
                configurable: true
            });
            // 自身が active か判定
            TabView.prototype.isActive = function () {
                return this.tabIndex === this._host.getActiveTabIndex();
            };
            return TabView;
        }(UI.ListView));
        UI.TabView = TabView;
    })(UI = CDP.UI || (CDP.UI = {}));
})(CDP || (CDP = {}));
/* tslint:disable:max-line-length */
var CDP;
(function (CDP) {
    var UI;
    (function (UI) {
        var TAG = "[CDP.UI.PageListView] ";
        /**
         * @class PageListView
         * @brief 仮想リストビュー機能を持つ PageView クラス
         */
        var PageListView = /** @class */ (function (_super) {
            __extends(PageListView, _super);
            /**
             * constructor
             *
             * @param url     {String}                       [in] page template に使用する URL
             * @param id      {String}                       [in] page に振られた ID
             * @param options {PageListViewConstructOptions} [in] オプション
             */
            function PageListView(url, id, options) {
                var _this = _super.call(this, url, id, $.extend({}, {
                    autoDestoryElement: false,
                }, options)) || this;
                _this._scrollMgr = null; //!< scroll コアロジック
                _this._needRebuild = false; //!< ページ表示時に rebuild() をコールするための内部変数
                _this._scrollMgr = new UI.ScrollManager(options);
                return _this;
            }
            //! rebuild() のスケジューリング
            PageListView.prototype.reserveRebuild = function () {
                this._needRebuild = true;
            };
            ///////////////////////////////////////////////////////////////////////
            // Override: PageView
            //! Orientation の変更検知
            PageListView.prototype.onOrientationChanged = function (newOrientation) {
                this._scrollMgr.setBaseHeight(this.getPageBaseHeight());
            };
            //! ページ遷移直前イベント処理
            PageListView.prototype.onBeforeRouteChange = function () {
                if (this._pageOptions.autoDestoryElement) {
                    this._scrollMgr.destroy();
                }
                return _super.prototype.onBeforeRouteChange.call(this);
            };
            //! jQM event: "pagebeforeshow" に対応
            PageListView.prototype.onPageBeforeShow = function (event, data) {
                _super.prototype.onPageBeforeShow.call(this, event, data);
                this._scrollMgr.initialize(this.$page, this.getPageBaseHeight());
            };
            //! jQM event: "pagecontainershow" (旧:"pageshow") に対応
            PageListView.prototype.onPageShow = function (event, data) {
                _super.prototype.onPageShow.call(this, event, data);
                this._scrollMgr.setBaseHeight(this.getPageBaseHeight());
                if (this._needRebuild) {
                    this.rebuild();
                    this._needRebuild = false;
                }
            };
            //! jQM event: "pageremove" に対応
            PageListView.prototype.onPageRemove = function (event) {
                _super.prototype.onPageRemove.call(this, event);
                this.release();
            };
            ///////////////////////////////////////////////////////////////////////
            // Implements: IListView Profile 管理
            //! 初期化済みか判定
            PageListView.prototype.isInitialized = function () {
                return this._scrollMgr.isInitialized();
            };
            //! プロパティを指定して、ListItem を管理
            PageListView.prototype.addItem = function (height, initializer, info, insertTo) {
                this._addLine(new UI.LineProfile(this._scrollMgr, Math.floor(height), initializer, info), insertTo);
            };
            PageListView.prototype.removeItem = function (index, arg2, arg3) {
                this._scrollMgr.removeItem(index, arg2, arg3);
            };
            PageListView.prototype.getItemInfo = function (target) {
                return this._scrollMgr.getItemInfo(target);
            };
            //! アクティブページを更新
            PageListView.prototype.refresh = function () {
                this._scrollMgr.refresh();
            };
            //! 未アサインページを構築
            PageListView.prototype.update = function () {
                this._scrollMgr.update();
            };
            //! ページアサインを再構成
            PageListView.prototype.rebuild = function () {
                this._scrollMgr.rebuild();
            };
            //! 管轄データを破棄
            PageListView.prototype.release = function () {
                this._scrollMgr.release();
            };
            ///////////////////////////////////////////////////////////////////////
            // Implements: IListView Profile Backup / Restore
            //! 内部データをバックアップ
            PageListView.prototype.backup = function (key) {
                return this._scrollMgr.backup(key);
            };
            //! 内部データをリストア
            PageListView.prototype.restore = function (key, rebuild) {
                if (rebuild === void 0) { rebuild = true; }
                var retval = this._scrollMgr.restore(key, rebuild);
                if (retval && !rebuild) {
                    this.reserveRebuild();
                }
                return retval;
            };
            //! バックアップデータの有無
            PageListView.prototype.hasBackup = function (key) {
                return this._scrollMgr.hasBackup(key);
            };
            //! バックアップデータの破棄
            PageListView.prototype.clearBackup = function (key) {
                return this._scrollMgr.clearBackup(key);
            };
            Object.defineProperty(PageListView.prototype, "backupData", {
                //! バックアップデータにアクセス
                get: function () {
                    return this._scrollMgr.backupData;
                },
                enumerable: true,
                configurable: true
            });
            ///////////////////////////////////////////////////////////////////////
            // Implements: IListView Scroll
            //! スクロールイベントハンドラ設定/解除
            PageListView.prototype.setScrollHandler = function (handler, on) {
                this._scrollMgr.setScrollHandler(handler, on);
            };
            //! スクロール終了イベントハンドラ設定/解除
            PageListView.prototype.setScrollStopHandler = function (handler, on) {
                this._scrollMgr.setScrollStopHandler(handler, on);
            };
            //! スクロール位置を取得
            PageListView.prototype.getScrollPos = function () {
                return this._scrollMgr.getScrollPos();
            };
            //! スクロール位置の最大値を取得
            PageListView.prototype.getScrollPosMax = function () {
                return this._scrollMgr.getScrollPosMax();
            };
            //! スクロール位置を指定
            PageListView.prototype.scrollTo = function (pos, animate, time) {
                this._scrollMgr.scrollTo(pos, animate, time);
            };
            //! 指定された ListItemView の表示を保証
            PageListView.prototype.ensureVisible = function (index, options) {
                this._scrollMgr.ensureVisible(index, options);
            };
            Object.defineProperty(PageListView.prototype, "core", {
                ///////////////////////////////////////////////////////////////////////
                // Implements: IListView Properties
                //! core framework access
                get: function () {
                    return this._scrollMgr;
                },
                enumerable: true,
                configurable: true
            });
            ///////////////////////////////////////////////////////////////////////
            // Implements: IListView Internal I/F
            //! 登録 framework が使用する
            PageListView.prototype._addLine = function (_line, insertTo) {
                this._scrollMgr._addLine(_line, insertTo);
            };
            ///////////////////////////////////////////////////////////////////////
            // private method:
            //! ページの基準値を取得
            PageListView.prototype.getPageBaseHeight = function () {
                return $(window).height() - parseInt(this.$page.css("padding-top"), 10);
            };
            return PageListView;
        }(UI.PageView));
        UI.PageListView = PageListView;
    })(UI = CDP.UI || (CDP.UI = {}));
})(CDP || (CDP = {}));
var CDP;
(function (CDP) {
    var UI;
    (function (UI) {
        var TAG = "[CDP.UI.PageExpandableListView] ";
        /**
         * @class PageExpandableListView
         * @brief 開閉リストビュー機能を持つ PageView クラス
         */
        var PageExpandableListView = /** @class */ (function (_super) {
            __extends(PageExpandableListView, _super);
            /**
             * constructor
             *
             * @param url     {String}                       [in] page template に使用する URL
             * @param id      {String}                       [in] page に振られた ID
             * @param options {PageListViewConstructOptions} [in] オプション
             */
            function PageExpandableListView(url, id, options) {
                var _this = _super.call(this, url, id, options) || this;
                _this._expandManager = null;
                _this._expandManager = new UI.ExpandManager(_this);
                return _this;
            }
            ///////////////////////////////////////////////////////////////////////
            // Implements: IExpandableListView
            //! 新規 GroupProfile を作成
            PageExpandableListView.prototype.newGroup = function (id) {
                return this._expandManager.newGroup(id);
            };
            //! 登録済み Group を取得
            PageExpandableListView.prototype.getGroup = function (id) {
                return this._expandManager.getGroup(id);
            };
            //! 第1階層の Group 登録
            PageExpandableListView.prototype.registerTopGroup = function (topGroup) {
                this._expandManager.registerTopGroup(topGroup);
            };
            //! 第1階層の Group を取得
            PageExpandableListView.prototype.getTopGroups = function () {
                return this._expandManager.getTopGroups();
            };
            //! すべてのグループを展開 (1階層)
            PageExpandableListView.prototype.expandAll = function () {
                this._expandManager.expandAll();
            };
            //! すべてのグループを収束 (1階層)
            PageExpandableListView.prototype.collapseAll = function (delay) {
                this._expandManager.collapseAll(delay);
            };
            //! 展開中か判定
            PageExpandableListView.prototype.isExpanding = function () {
                return this._expandManager.isExpanding();
            };
            //! 収束中か判定
            PageExpandableListView.prototype.isCollapsing = function () {
                return this._expandManager.isCollapsing();
            };
            //! 開閉中か判定
            PageExpandableListView.prototype.isSwitching = function () {
                return this._expandManager.isSwitching();
            };
            Object.defineProperty(PageExpandableListView.prototype, "layoutKey", {
                //! layout key を取得
                get: function () {
                    return this._expandManager.layoutKey;
                },
                //! layout key を設定
                set: function (key) {
                    this._expandManager.layoutKey = key;
                },
                enumerable: true,
                configurable: true
            });
            ///////////////////////////////////////////////////////////////////////
            // Override: PageListView
            //! データを破棄
            PageExpandableListView.prototype.release = function () {
                _super.prototype.release.call(this);
                this._expandManager.release();
            };
            //! 内部データをバックアップ
            PageExpandableListView.prototype.backup = function (key) {
                return this._expandManager.backup(key);
            };
            //! 内部データをリストア
            PageExpandableListView.prototype.restore = function (key, rebuild) {
                if (rebuild === void 0) { rebuild = true; }
                return this._expandManager.restore(key, rebuild);
            };
            return PageExpandableListView;
        }(UI.PageListView));
        UI.PageExpandableListView = PageExpandableListView;
    })(UI = CDP.UI || (CDP.UI = {}));
})(CDP || (CDP = {}));
var CDP;
(function (CDP) {
    var UI;
    (function (UI) {
        var Extension;
        (function (Extension) {
            var Framework = CDP.Framework;
            // jQuery plugin
            $.fn.ripple = function (options) {
                var $el = $(this);
                if ($el.length <= 0) {
                    return $el;
                }
                return $el.on(Framework.Patch.s_vclickEvent, function (event) {
                    var surface = $(this);
                    // create surface if it doesn't exist
                    if (surface.find(".ui-ripple-ink").length === 0) {
                        surface.prepend("<div class='ui-ripple-ink'></div>");
                    }
                    var ink = surface.find(".ui-ripple-ink");
                    // stop the previous animation
                    ink.removeClass("ui-ripple-animate");
                    // ink size:
                    if (!ink.height() && !ink.width()) {
                        var d = Math.max(surface.outerWidth(), surface.outerHeight());
                        ink.css({ height: d, width: d });
                    }
                    var x = event.pageX - surface.offset().left - (ink.width() / 2);
                    var y = event.pageY - surface.offset().top - (ink.height() / 2);
                    var rippleColor = surface.data("ripple-color");
                    // animation end handler
                    var ANIMATION_END_EVENT = "animationend webkitAnimationEnd";
                    ink.on(ANIMATION_END_EVENT, function (ev) {
                        ink.off();
                        ink.removeClass("ui-ripple-animate");
                        ink = null;
                    });
                    // set the position and add class .animate
                    ink.css({
                        top: y + "px",
                        left: x + "px",
                        background: rippleColor
                    }).addClass("ui-ripple-animate");
                });
            };
            /**
             * Material Design Ripple 拡張
             *
             * @param {jQuery}              $ui       [in] 検索対象の jQuery オブジェクト
             * @param {DomExtensionOptions} [options] [in] オプション
             */
            function applyDomExtension($ui, options) {
                var NO_RIPPLE_CLASS = [
                    ".ui-ripple-none",
                    ".ui-flipswitch-on",
                    ".ui-slider-handle",
                    ".ui-input-clear",
                ];
                var selector = ".ui-btn";
                if ($ui.hasClass("ui-page")) {
                    selector = ".ui-content .ui-btn"; // header は自動 ripple 化対象外
                }
                $ui.find(selector)
                    .filter(function (index, elem) {
                    var $elem = $(elem);
                    if ($elem.is(NO_RIPPLE_CLASS.join(","))) {
                        return false;
                    }
                    else {
                        return true;
                    }
                })
                    .addClass("ui-ripple");
                // ripplify
                $ui.find(".ui-ripple")
                    .each(function (index, elem) {
                    $(elem).ripple(options);
                });
                return $ui;
            }
            // 登録
            UI.ExtensionManager.registerDomExtension(applyDomExtension);
        })(Extension = UI.Extension || (UI.Extension = {}));
    })(UI = CDP.UI || (CDP.UI = {}));
})(CDP || (CDP = {}));
var CDP;
(function (CDP) {
    var UI;
    (function (UI) {
        var Extension;
        (function (Extension) {
            var Template = CDP.Tools.Template;
            var _template;
            // jQuery plugin
            $.fn.spinner = function (options) {
                if ("string" === typeof options) {
                    return refresh($(this));
                }
                else {
                    return spinnerify($(this), options);
                }
            };
            function spinnerify($target, options) {
                if ($target.length <= 0) {
                    return $target;
                }
                if (!_template) {
                    _template = Template.getJST("\n                <script type=\"text/template\">\n                    <span class=\"ui-spinner-base\">\n                        <span class=\"ui-spinner-inner\">\n                            <span class=\"ui-spinner-inner-gap\" {{borderTop}}></span>\n                            <span class=\"ui-spinner-inner-left\">\n                                <span class=\"ui-spinner-inner-half-circle\" {{border}}></span>\n                            </span>\n                            <span class=\"ui-spinner-inner-right\">\n                                <span class=\"ui-spinner-inner-half-circle\" {{border}}></span>\n                            </span>\n                        </span>\n                    </span>\n                </script>\n            ");
                }
                var makeTemplateParam = function (clr) {
                    return {
                        borderTop: "style=border-top-color:" + clr + ";",
                        border: "style=border-color:" + clr + ";",
                    };
                };
                var color = $target.data("spinner-color");
                var param = null;
                if (color) {
                    $target.css({ "background-color": color });
                    param = makeTemplateParam(color);
                }
                $target.append(_template(param));
                return refresh($target);
            }
            // iOS 10.2+ SVG SMIL アニメーションが 2回目以降動かない問題の対策
            // data:image/svg+xml;<cache bust string>;base64,... とすることで data-url にも cache busting が有効になる
            function refresh($target) {
                var PREFIX = ["-webkit-", ""];
                var valid = function (prop) {
                    return (prop && "none" !== prop);
                };
                var dataUrl;
                for (var i = 0, n = PREFIX.length; i < n; i++) {
                    if (!valid(dataUrl)) {
                        dataUrl = $target.css(PREFIX[i] + "mask-image");
                        if (valid(dataUrl)) {
                            // iOS では url(data***); 内に '"' は入らない
                            var match = dataUrl.match(/(url\(data:image\/svg\+xml;)([\s\S]*)?(base64,[\s\S]*\))/);
                            if (match) {
                                dataUrl = match[1] + "bust=" + Date.now().toString(36) + ";" + match[3];
                            }
                            else {
                                dataUrl = null;
                            }
                        }
                    }
                    if (valid(dataUrl)) {
                        $target.css(PREFIX[i] + "mask-image", dataUrl);
                    }
                }
                return $target;
            }
            /**
             * Material Design Spinner 拡張
             *
             * @param {jQuery}              $ui       [in] 検索対象の jQuery オブジェクト
             * @param {DomExtensionOptions} [options] [in] オプション
             */
            function applyDomExtension($ui, options) {
                $ui.find(".ui-spinner, .ui-icon-loading")
                    .each(function (index, elem) {
                    $(elem).spinner(options);
                });
                return $ui;
            }
            // 登録
            UI.ExtensionManager.registerDomExtension(applyDomExtension);
        })(Extension = UI.Extension || (UI.Extension = {}));
    })(UI = CDP.UI || (CDP.UI = {}));
})(CDP || (CDP = {}));
var CDP;
(function (CDP) {
    var UI;
    (function (UI) {
        var Extension;
        (function (Extension) {
            /**
             * Text Input 用 Floating Label 拡張
             *
             * @param {jQuery}              $ui       [in] 検索対象の jQuery オブジェクト
             * @param {DomExtensionOptions} [options] [in] オプション
             */
            function applyDomExtension($ui, options) {
                var update = function (elem, floating) {
                    var $elem = $(elem);
                    if (floating) {
                        $elem.addClass("ui-float-label-floating");
                    }
                    else {
                        $elem.removeClass("ui-float-label-floating");
                    }
                };
                var floatingify = function (elem) {
                    var id = $(elem).attr("for");
                    var $input = $ui.find("#" + id);
                    if ("search" === $input.jqmData("type")) {
                        $(elem).addClass("ui-float-label-has-icon");
                    }
                    update(elem, !!$input.val());
                    $input.on("keyup change input focus blur cut paste", function (event) {
                        update(elem, !!$(event.target).val());
                    });
                };
                $ui.find("label.ui-float-label, .ui-float-label label")
                    .each(function (index, elem) {
                    floatingify(elem);
                });
                return $ui;
            }
            // 登録
            UI.ExtensionManager.registerDomExtension(applyDomExtension);
        })(Extension = UI.Extension || (UI.Extension = {}));
    })(UI = CDP.UI || (CDP.UI = {}));
})(CDP || (CDP = {}));
var CDP;
(function (CDP) {
    var UI;
    (function (UI) {
        var Extension;
        (function (Extension) {
            var Framework = CDP.Framework;
            /**
             * jQuery Mobile Flip Switch 拡張
             *
             * @param {jQuery}              $ui       [in] 検索対象の jQuery オブジェクト
             * @param {DomExtensionOptions} [options] [in] オプション
             */
            function applyDomExtension($ui, options) {
                /*
                 * flipswitch に紐づく label は OS によって event 発行形式が異なるためフックして独自イベントで対応する.
                 * また flipswitch は内部で click を発行しているが、vclick に変更する.
                 */
                var _getAllSwitches = function () {
                    return $ui.find(".ui-flipswitch");
                };
                var _getInputFromSwitch = function ($switch) {
                    var $input = $switch.find("input");
                    if ($input.length) {
                        return $input;
                    }
                    var $select = $switch.find("select");
                    if ($select.length) {
                        return $select;
                    }
                    return null;
                };
                var _change = function ($input, to) {
                    if ($input) {
                        if ("INPUT" === $input[0].nodeName) {
                            $input.prop("checked", to).flipswitch("refresh");
                        }
                        else if ("SELECT" === $input[0].nodeName) {
                            $input.val(to ? "on" : "off").flipswitch("refresh");
                        }
                    }
                };
                var _getLabelsFromSwitch = function ($switch) {
                    var $input = _getInputFromSwitch($switch);
                    if ($input) {
                        var labels = $input[0].labels;
                        if (labels) {
                            return $(labels);
                        }
                    }
                    return $();
                };
                var _getSwitchFromLabel = function ($label) {
                    var name = $label.attr("for");
                    return _getAllSwitches().find("[name='" + name + "']");
                };
                _getAllSwitches()
                    .on("vclick _change_flipswich", function (event) {
                    var $switch = $(event.currentTarget);
                    var $target = $(event.target);
                    var $input = _getInputFromSwitch($switch);
                    var changeTo = !$switch.hasClass("ui-flipswitch-active");
                    if ($target.hasClass("ui-flipswitch-input")) {
                        _change($input, changeTo);
                    }
                    else if ($target.hasClass("ui-flipswitch-on")) {
                        if (Framework.Platform.Mobile && Framework.Patch.isSupportedVclick()) {
                            _change($input, changeTo);
                            event.preventDefault();
                        }
                    }
                })
                    .each(function (index, flipswitch) {
                    _getLabelsFromSwitch($(flipswitch))
                        .on("vclick", function (event) {
                        var $switch = _getSwitchFromLabel($(event.target));
                        if (!$switch.parent().hasClass("ui-state-disabled")) {
                            $switch.trigger("_change_flipswich");
                        }
                        event.preventDefault();
                    });
                });
                return $ui;
            }
            // 登録
            UI.ExtensionManager.registerDomExtension(applyDomExtension);
        })(Extension = UI.Extension || (UI.Extension = {}));
    })(UI = CDP.UI || (CDP.UI = {}));
})(CDP || (CDP = {}));
var CDP;
(function (CDP) {
    var UI;
    (function (UI) {
        var Extension;
        (function (Extension) {
            /**
             * jQuery Mobile Slider 拡張
             *
             * @param {jQuery}              $ui       [in] 検索対象の jQuery オブジェクト
             * @param {DomExtensionOptions} [options] [in] オプション
             */
            function applyDomExtension($ui, options) {
                $ui.find(".ui-slider-input")
                    .on("slidestop", function (event) {
                    var $handles = $(event.currentTarget)
                        .parent()
                        .find(".ui-slider-handle");
                    $handles.blur();
                });
                return $ui;
            }
            // 登録
            UI.ExtensionManager.registerDomExtension(applyDomExtension);
        })(Extension = UI.Extension || (UI.Extension = {}));
    })(UI = CDP.UI || (CDP.UI = {}));
})(CDP || (CDP = {}));
var CDP;
(function (CDP) {
    var UI;
    (function (UI) {
        var Extension;
        (function (Extension) {
            //! iScroll.click patch
            var patch_IScroll_utils_click = function (event) {
                var target = event.target;
                var e = event;
                var ev;
                // [CDP modified]: set target.clientX.
                if (null == target.clientX || null == target.clientY) {
                    if (null != e.pageX && null != e.pageY) {
                        target.clientX = e.pageX;
                        target.clientY = e.pageY;
                    }
                    else if (e.changedTouches && e.changedTouches[0]) {
                        target.clientX = e.changedTouches[0].pageX;
                        target.clientY = e.changedTouches[0].pageY;
                    }
                }
                if (!(/(SELECT|INPUT|TEXTAREA)/i).test(target.tagName)) {
                    ev = document.createEvent("MouseEvents");
                    ev.initMouseEvent("click", true, true, e.view, 1, target.screenX, target.screenY, target.clientX, target.clientY, e.ctrlKey, e.altKey, e.shiftKey, e.metaKey, 0, null);
                    ev._constructed = true;
                    target.dispatchEvent(ev);
                }
            };
            var s_applied = false;
            /**
             * iScroll Patch 拡張
             *
             * @param {jQuery}              $ui       [in] 検索対象の jQuery オブジェクト
             * @param {DomExtensionOptions} [options] [in] オプション
             */
            function applyPatch($ui, options) {
                if (!s_applied && UI.global.IScroll && UI.global.IScroll.utils) {
                    UI.global.IScroll.utils.click = patch_IScroll_utils_click;
                    s_applied = true;
                }
                return $ui;
            }
            // 登録
            UI.ExtensionManager.registerDomExtension(applyPatch);
        })(Extension = UI.Extension || (UI.Extension = {}));
    })(UI = CDP.UI || (CDP.UI = {}));
})(CDP || (CDP = {}));

return CDP.UI; }));
/*!
 * cdp.nativebridge.js 2.1.0
 *
 * Date: 2017-11-06T05:39:57.321Z
 */
(function (root, factory) { if (typeof define === "function" && define.amd) { define("cdp.nativebridge",["cdp.core", "cdp.promise"], function () { return factory(root.CDP || (root.CDP = {}), root.jQuery || root.$); }); } else { factory(root.CDP || (root.CDP = {}), root.jQuery || root.$); } }(((this || 0).self || global), function (CDP, $) { CDP.NativeBridge = CDP.NativeBridge || {};

var CDP;
(function (CDP) {
    /**
     * @enum  RESULT_CODE_BASE
     * @brief リザルトコードのオフセット値
     */
    var RESULT_CODE_BASE;
    (function (RESULT_CODE_BASE) {
        RESULT_CODE_BASE[RESULT_CODE_BASE["CDP_NATIVEBRIDGE_DECLARERATION"] = 0] = "CDP_NATIVEBRIDGE_DECLARERATION";
        RESULT_CODE_BASE[RESULT_CODE_BASE["CDP_NATIVEBRIDGE"] = 2 * CDP._MODULE_RESULT_CODE_RANGE_CDP] = "CDP_NATIVEBRIDGE";
    })(RESULT_CODE_BASE = CDP.RESULT_CODE_BASE || (CDP.RESULT_CODE_BASE = {}));
    ///////////////////////////////////////////////////////////////////////
    // module error declaration:
    var FUNCTION_CODE_RANGE = 10;
    /**
     * @enum  LOCAL_CODE_BASE
     * @brief cdp.nativebridge 内のローカルコードオフセット値
     */
    var LOCAL_CODE_BASE;
    (function (LOCAL_CODE_BASE) {
        LOCAL_CODE_BASE[LOCAL_CODE_BASE["GATE"] = 0] = "GATE";
        LOCAL_CODE_BASE[LOCAL_CODE_BASE["UTILS"] = 1 * FUNCTION_CODE_RANGE] = "UTILS";
    })(LOCAL_CODE_BASE || (LOCAL_CODE_BASE = {}));
    /* tslint:disable:max-line-length */
    /**
     * @enum  RESULT_CODE
     * @brief cdp-nativebridge のエラーコード定義
     */
    var RESULT_CODE;
    (function (RESULT_CODE) {
        RESULT_CODE[RESULT_CODE["ERROR_CDP_NATIVEBRIDG_DECLARATION"] = 0] = "ERROR_CDP_NATIVEBRIDG_DECLARATION";
        RESULT_CODE[RESULT_CODE["ERROR_CDP_NATIVEBRIDGE_INVALID_ARG"] = CDP.DECLARE_ERROR_CODE(RESULT_CODE_BASE.CDP_NATIVEBRIDGE, LOCAL_CODE_BASE.GATE + 1, "called with invalid args.")] = "ERROR_CDP_NATIVEBRIDGE_INVALID_ARG";
        RESULT_CODE[RESULT_CODE["ERROR_CDP_NATIVEBRIDGE_NOT_IMPLEMENT"] = CDP.DECLARE_ERROR_CODE(RESULT_CODE_BASE.CDP_NATIVEBRIDGE, LOCAL_CODE_BASE.GATE + 2, "method not implemented.")] = "ERROR_CDP_NATIVEBRIDGE_NOT_IMPLEMENT";
        RESULT_CODE[RESULT_CODE["ERROR_CDP_NATIVEBRIDGE_NOT_SUPPORT"] = CDP.DECLARE_ERROR_CODE(RESULT_CODE_BASE.CDP_NATIVEBRIDGE, LOCAL_CODE_BASE.GATE + 3, "method not supported.")] = "ERROR_CDP_NATIVEBRIDGE_NOT_SUPPORT";
        RESULT_CODE[RESULT_CODE["ERROR_CDP_NATIVEBRIDGE_INVALID_OPERATION"] = CDP.DECLARE_ERROR_CODE(RESULT_CODE_BASE.CDP_NATIVEBRIDGE, LOCAL_CODE_BASE.GATE + 4, "invalid operation.")] = "ERROR_CDP_NATIVEBRIDGE_INVALID_OPERATION";
        RESULT_CODE[RESULT_CODE["ERROR_CDP_NATIVEBRIDGE_CLASS_NOT_FOUND"] = CDP.DECLARE_ERROR_CODE(RESULT_CODE_BASE.CDP_NATIVEBRIDGE, LOCAL_CODE_BASE.GATE + 5, "class not found.")] = "ERROR_CDP_NATIVEBRIDGE_CLASS_NOT_FOUND";
        RESULT_CODE[RESULT_CODE["ERROR_CDP_NATIVEBRIDGE_METHOD_NOT_FOUND"] = CDP.DECLARE_ERROR_CODE(RESULT_CODE_BASE.CDP_NATIVEBRIDGE, LOCAL_CODE_BASE.GATE + 6, "method not found.")] = "ERROR_CDP_NATIVEBRIDGE_METHOD_NOT_FOUND";
        RESULT_CODE[RESULT_CODE["ERROR_CDP_NATIVEBRIDGE_CORDOVA_REQUIRED"] = CDP.DECLARE_ERROR_CODE(RESULT_CODE_BASE.CDP_NATIVEBRIDGE, LOCAL_CODE_BASE.UTILS + 1, "cordova required.")] = "ERROR_CDP_NATIVEBRIDGE_CORDOVA_REQUIRED";
        RESULT_CODE[RESULT_CODE["ERROR_CDP_NATIVEBRIDGE_CORDOVA_PLUGIN_REQUIRED"] = CDP.DECLARE_ERROR_CODE(RESULT_CODE_BASE.CDP_NATIVEBRIDGE, LOCAL_CODE_BASE.UTILS + 2, "'cordova-plugin-cdp-nativebridge' cordova plugin required.")] = "ERROR_CDP_NATIVEBRIDGE_CORDOVA_PLUGIN_REQUIRED";
    })(RESULT_CODE = CDP.RESULT_CODE || (CDP.RESULT_CODE = {}));
    /* tslint:enable:max-line-length */
})(CDP || (CDP = {}));
var CDP;
(function (CDP) {
    var NativeBridge;
    (function (NativeBridge) {
        var TAG = "[CDP.NativeBridge.Utils] ";
        /**
         * \~english
         * @class Utils
         * @brief The utility class for CDP.NativeBridge.
         *
         * \~japanese
         * @class Utils
         * @brief CDP.NativeBridge が使用するユーティリティクラス
         */
        var Utils = /** @class */ (function () {
            function Utils() {
            }
            ///////////////////////////////////////////////////////////////////////
            // public static methods
            /**
             * \~english
             * Defines error code map from the plugin result to CDP.NativeBridge result code.
             *
             * @param errorCode [in] set result code string. ex): "SUCCESS_OK"
             *
             * \~japanese
             * plugin の Result Code を CDP.NativeBridge にマップする
             *
             * @param errorCode [in] Result Code 文字列を指定 ex): "SUCCESS_OK"
             */
            Utils.defineResultCode = function (errorCode) {
                Object.defineProperty(NativeBridge, errorCode, {
                    get: function () {
                        if (Utils.s_pluginReady) {
                            return CDP.Plugin.NativeBridge[errorCode];
                        }
                        else {
                            return null;
                        }
                    },
                    enumerable: true,
                    configurable: true
                });
            };
            /**
             * \~english
             * Wait for cordova "deviceready" event fired.
             *
             * \~japanese
             * cordova が 使用可能になるまで待機
             */
            Utils.waitForPluginReady = function () {
                var df = $.Deferred();
                if (Utils.s_pluginReady) {
                    return $.Deferred().resolve();
                }
                try {
                    var channel = cordova.require("cordova/channel");
                    channel.onCordovaReady.subscribe(function () {
                        if (null != CDP.Plugin.NativeBridge) {
                            Utils.s_pluginReady = true;
                            df.resolve();
                        }
                        else {
                            df.reject(CDP.makeErrorInfo(CDP.RESULT_CODE.ERROR_CDP_NATIVEBRIDGE_CORDOVA_PLUGIN_REQUIRED, TAG));
                        }
                    });
                }
                catch (error) {
                    df.reject(CDP.makeErrorInfo(CDP.RESULT_CODE.ERROR_CDP_NATIVEBRIDGE_CORDOVA_REQUIRED, TAG));
                }
                return df.promise();
            };
            /**
             * \~english
             * Create NativeBridge.Promise object from jQueryDeferred object.
             *
             * @param df [in] set jQueryDeferred instance.
             * @param useRawPluginResult [in] return plugin result or errorinfo
             * @returns NativeBridge.Promise object.
             *
             * \~japanese
             * Promise オブジェクトの作成
             * jQueryDeferred オブジェクトから、NativeBridge.Promise オブジェクトを作成する
             *
             * @param df [in] jQueryDeferred instance を指定
             * @param useRawPluginResult [in] plugin result を返すか否か
             * @returns NativeBridge.Promise オブジェクト
             */
            Utils.makePromise = function (df, useRawPluginResult) {
                return CDP.makePromise(df, {
                    _bridge: null,
                    _taskId: null,
                    abort: function (info) {
                        var _this = this;
                        var code = useRawPluginResult ? NativeBridge.ERROR_CANCEL : CDP.RESULT_CODE.SUCCEEDED;
                        var detail = $.extend({ code: code }, {
                            message: "abort",
                            name: TAG + "method canceled",
                            taskId: this._taskId,
                        }, info);
                        var cancel = function () {
                            if (null != _this._bridge && null != _this._taskId) {
                                _this._bridge.cancel(_this._taskId, detail);
                            }
                            df.reject(detail);
                        };
                        if (null != this.dependency) {
                            if (this.dependency.abort) {
                                this.dependency.abort(detail);
                            }
                            else {
                                console.error(TAG + "[call] dependency object doesn't have 'abort()' method.");
                            }
                            if (this.callReject && "pending" === this.state()) {
                                cancel();
                            }
                        }
                        else if ("pending" === this.state()) {
                            cancel();
                        }
                    }
                });
            };
            /**
             * \~english
             * Helper function to correctly set up the prototype chain, for subclasses.
             * The function behavior is same as extend() function of Backbone.js.
             *
             * @param protoProps  [in] set prototype properties as object.
             * @param staticProps [in] set static properties as object.
             * @returns subclass constructor.
             *
             * \~japanese
             * クラス継承のためのヘルパー関数
             * Backbone.js extend() 関数と同等
             *
             * @param protoProps  [in] prototype properties をオブジェクトで指定
             * @param staticProps [in] static properties をオブジェクトで指定
             * @returns サブクラスのコンストラクタ
             */
            Utils.extend = function (protoProps, staticProps) {
                var parent = this;
                var child;
                if (protoProps && protoProps.hasOwnProperty("constructor")) {
                    child = protoProps.constructor;
                }
                else {
                    child = function () {
                        return parent.apply(this, arguments);
                    };
                }
                $.extend(child, parent, staticProps);
                var Surrogate = function () {
                    this.constructor = child;
                };
                Surrogate.prototype = parent.prototype;
                child.prototype = new Surrogate;
                if (protoProps) {
                    $.extend(child.prototype, protoProps);
                }
                child.__super__ = parent.prototype;
                return child;
            };
            Utils.s_pluginReady = false;
            return Utils;
        }());
        NativeBridge.Utils = Utils;
    })(NativeBridge = CDP.NativeBridge || (CDP.NativeBridge = {}));
})(CDP || (CDP = {}));
var CDP;
(function (CDP) {
    var NativeBridge;
    (function (NativeBridge) {
        var TAG = "[CDP.NativeBridge.Gate] ";
        NativeBridge.Utils.defineResultCode("SUCCESS_OK");
        NativeBridge.Utils.defineResultCode("SUCCESS_PROGRESS");
        NativeBridge.Utils.defineResultCode("ERROR_FAIL");
        NativeBridge.Utils.defineResultCode("ERROR_CANCEL");
        NativeBridge.Utils.defineResultCode("ERROR_INVALID_ARG");
        NativeBridge.Utils.defineResultCode("ERROR_NOT_IMPLEMENT");
        NativeBridge.Utils.defineResultCode("ERROR_NOT_SUPPORT");
        NativeBridge.Utils.defineResultCode("ERROR_INVALID_OPERATION");
        NativeBridge.Utils.defineResultCode("ERROR_CLASS_NOT_FOUND");
        NativeBridge.Utils.defineResultCode("ERROR_METHOD_NOT_FOUND");
        function convertErrorInfo(result) {
            var resultCode;
            switch (result.code) {
                case NativeBridge.ERROR_CANCEL:
                    break;
                case NativeBridge.ERROR_INVALID_ARG:
                    resultCode = CDP.RESULT_CODE.ERROR_CDP_NATIVEBRIDGE_INVALID_ARG;
                    break;
                case NativeBridge.ERROR_NOT_IMPLEMENT:
                    resultCode = CDP.RESULT_CODE.ERROR_CDP_NATIVEBRIDGE_NOT_IMPLEMENT;
                    break;
                case NativeBridge.ERROR_NOT_SUPPORT:
                    resultCode = CDP.RESULT_CODE.ERROR_CDP_NATIVEBRIDGE_NOT_SUPPORT;
                    break;
                case NativeBridge.ERROR_INVALID_OPERATION:
                    resultCode = CDP.RESULT_CODE.ERROR_CDP_NATIVEBRIDGE_INVALID_OPERATION;
                    break;
                case NativeBridge.ERROR_CLASS_NOT_FOUND:
                    resultCode = CDP.RESULT_CODE.ERROR_CDP_NATIVEBRIDGE_CLASS_NOT_FOUND;
                    break;
                case NativeBridge.ERROR_METHOD_NOT_FOUND:
                    resultCode = CDP.RESULT_CODE.ERROR_CDP_NATIVEBRIDGE_METHOD_NOT_FOUND;
                    break;
                case NativeBridge.ERROR_FAIL:
                default:
                    resultCode = CDP.RESULT_CODE.FAILED;
                    break;
            }
            if (NativeBridge.ERROR_CANCEL === result.code) {
                return CDP.makeCanceledErrorInfo(TAG, result);
            }
            else {
                return CDP.makeErrorInfo(resultCode, TAG, null, result);
            }
        }
        //___________________________________________________________________________________________________________________//
        /**
         * \~english
         * @class Gate
         * @brief The base class for NativeBridge communication.
         *        You can derive any Gate class from this class.
         *
         * \~japanese
         * @class Gate
         * @brief NativeBridge と通信するベースクラス
         *        このクラスから任意の Gate クラスを派生して実装可能
         */
        var Gate = /** @class */ (function () {
            /* tslint:enable:no-unused-variable */
            /**
             * \~english
             * constructor
             *
             * @param feature [in] feature information.
             * @param options [in] construction options.
             *
             * \~japanese
             * constructor
             *
             * @param feature [in] 初期化情報を指定
             * @param options [in] オプションを指定
             */
            function Gate(feature, options) {
                var _this = this;
                this._options = $.extend({
                    useRawPluginResult: false,
                }, options);
                NativeBridge.Utils.waitForPluginReady()
                    .done(function () {
                    _this._bridge = new CDP.Plugin.NativeBridge(feature, options);
                })
                    .catch(function (reason) {
                    throw Error(reason);
                });
            }
            ///////////////////////////////////////////////////////////////////////
            // override methods
            /**
             * \~english
             * Execute task.
             * the function calls the Native class method from correspondent method name.
             *
             * @param method  [in] method name of Native class
             * @param args    [in] set arguments by array type.
             * @param options [in] set exec options.
             * @returns Promise object.
             *
             * \~japanese
             * タスクの実行
             * 指定した method 名に対応する Native Class の method を呼び出す。
             *
             * @param method  [in] Native Class のメソッド名を指定
             * @param args    [in] 引数を配列で指定
             * @param options [in] 実行オプションを指定
             * @returns Promise オブジェクト
             */
            Gate.prototype.exec = function (method, args, options) {
                var _this = this;
                var df = $.Deferred();
                var opt = $.extend({}, this._options, options);
                var promise = NativeBridge.Utils.makePromise(df, opt.useRawPluginResult);
                NativeBridge.Utils.waitForPluginReady()
                    .done(function () {
                    var taskId = _this._bridge.exec(function (result) {
                        if (NativeBridge.SUCCESS_PROGRESS === result.code) {
                            if (!opt.useRawPluginResult && null != result.params) {
                                df.notify.apply(df, result.params.concat([result]));
                            }
                            else {
                                df.notify(result);
                            }
                        }
                        else {
                            if (!opt.useRawPluginResult && null != result.params) {
                                df.resolve.apply(df, result.params.concat([result]));
                            }
                            else {
                                df.resolve(result);
                            }
                        }
                    }, function (error) {
                        if (opt.useRawPluginResult) {
                            df.reject(error);
                        }
                        else {
                            df.reject(convertErrorInfo(error));
                        }
                    }, method, args, options);
                    // set internal properties.
                    promise._bridge = _this._bridge;
                    promise._taskId = taskId;
                })
                    .catch(function (reason) {
                    df.reject(reason);
                });
                return promise;
            };
            /**
             * \~english
             * Cancel all tasks.
             *
             * @param options [in] set execute options.
             * @returns Promise object.
             *
             * \~japanese
             * すべてのタスクのキャンセル
             *
             * @param options [in] 実行オプションを指定
             * @returns Promise オブジェクト
             */
            Gate.prototype.cancel = function (options) {
                var _this = this;
                var df = $.Deferred();
                var opt = $.extend({}, this._options, options);
                NativeBridge.Utils.waitForPluginReady()
                    .done(function () {
                    _this._bridge.cancel(null, opt, function (result) {
                        df.resolve(result);
                    }, function (error) {
                        if (opt.useRawPluginResult) {
                            df.reject(error);
                        }
                        else {
                            df.reject(convertErrorInfo(error));
                        }
                    });
                })
                    .catch(function (reason) {
                    df.reject(reason);
                });
                return df.promise();
            };
            /**
             * \~english
             * Destruction for the instance.
             * release Native class reference. after that, exec() becomes invalid.
             *
             * @param options [in] set execute options.
             * @returns Promise object.
             *
             * \~japanese
             * インスタンスの破棄
             * Native の参照を解除する。以降、exec は無効となる。
             *
             * @param options [in] 実行オプションを指定
             * @returns Promise オブジェクト
             */
            Gate.prototype.dispose = function (options) {
                var _this = this;
                var df = $.Deferred();
                var opt = $.extend({}, this._options, options);
                NativeBridge.Utils.waitForPluginReady()
                    .done(function () {
                    _this._bridge.dispose(opt, function (result) {
                        df.resolve(result);
                    }, function (error) {
                        if (opt.useRawPluginResult) {
                            df.reject(error);
                        }
                        else {
                            df.reject(convertErrorInfo(error));
                        }
                    });
                })
                    .catch(function (reason) {
                    df.reject(reason);
                });
                return df.promise();
            };
            Object.defineProperty(Gate.prototype, "bridge", {
                ///////////////////////////////////////////////////////////////////////
                // protected methods
                /**
                 * \~english
                 * Access to Plugin.NativeBridge object.
                 * If you want to use low level exec(), you can use this accessor.
                 *
                 * @returns Plugin.NativeBridge instance.
                 *
                 * \~japanese
                 * Plugin.NativeBridge オブジェクトへのアクセス
                 * 低レベル exec() を使用したい場合に利用可能
                 *
                 * @returns Plugin.NativeBridge インスタンス.
                 */
                get: function () {
                    return this._bridge;
                },
                enumerable: true,
                configurable: true
            });
            /* tslint:disable:no-unused-variable */
            // For pure javascript extend helper.
            Gate.extend = NativeBridge.Utils.extend;
            return Gate;
        }());
        NativeBridge.Gate = Gate;
    })(NativeBridge = CDP.NativeBridge || (CDP.NativeBridge = {}));
})(CDP || (CDP = {}));

return CDP.NativeBridge; }));
// amd define function shim
(function (root) {
    if (!(typeof define === "function" && define.amd)) {
        root.define = function () { /* noop */ };
    }
})(this);

define("cdp/core/core", ["require", "exports", "cdp.core"], function (require, exports, _core) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.global = _core.global;
    exports.coreInitialize = _core.initialize;
    exports.webRoot = _core.webRoot;
    exports.Config = _core.Config;
});
define("cdp/core/errors", ["require", "exports", "cdp.core"], function (require, exports, _core) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.makeErrorInfo = _core.makeErrorInfo;
    exports.makeCanceledErrorInfo = _core.makeCanceledErrorInfo;
    exports.isCanceledError = _core.isCanceledError;
    exports.ensureErrorInfo = _core.ensureErrorInfo;
    exports.RESULT_CODE = _core.RESULT_CODE;
    exports.DECLARE_SUCCESS_CODE = _core.DECLARE_SUCCESS_CODE;
    exports.DECLARE_ERROR_CODE = _core.DECLARE_ERROR_CODE;
    exports.SUCCEEDED = _core.SUCCEEDED;
    exports.FAILED = _core.FAILED;
    exports.ASSIGN_RESULT_CODE = _core.ASSIGN_RESULT_CODE;
    exports.MODULE_RESULT_CODE_RANGE = _core.MODULE_RESULT_CODE_RANGE;
    exports.RESULT_CODE_BASE = _core.RESULT_CODE_BASE;
    exports.ASSIGN_RESULT_CODE_BASE = _core.ASSIGN_RESULT_CODE_BASE;
});
define("cdp/core/promise", ["require", "exports", "cdp.promise"], function (require, exports, _promise) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.makePromise = _promise.makePromise;
    exports.wait = _promise.wait;
    exports.PromiseManager = _promise.PromiseManager;
    exports.Promise = _promise.Promise;
});
define("cdp/core/i18n", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    var i18n = CDP.i18n;
    exports.i18n = i18n;
});
define("cdp/core/framework.jqm", ["require", "exports", "cdp.framework.jqm"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.waitForDeviceReady = CDP.waitForDeviceReady;
    exports.setBackButtonHandler = CDP.setBackButtonHandler;
});
define("cdp/core", ["require", "exports", "cdp/core/core", "cdp/core/errors", "cdp/core/promise", "cdp/core/i18n", "cdp/core/framework.jqm"], function (require, exports, core_1, errors_1, promise_1, i18n_1, framework_jqm_1) {
    "use strict";
    function __export(m) {
        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];
    }
    Object.defineProperty(exports, "__esModule", { value: true });
    __export(core_1);
    __export(errors_1);
    __export(promise_1);
    __export(i18n_1);
    __export(framework_jqm_1);
});
define("cdp/framework/jqm", ["require", "exports", "cdp.framework.jqm"], function (require, exports, _framework) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.Platform = _framework.Platform;
    exports.getOrientation = _framework.getOrientation;
    exports.toUrl = _framework.toUrl;
    exports.setBeforeRouteChangeHandler = _framework.setBeforeRouteChangeHandler;
    exports.Router = _framework.Router;
    exports.initialize = _framework.initialize;
    exports.isInitialized = _framework.isInitialized;
    exports.waitForInitialize = _framework.waitForInitialize;
    exports.registerOrientationChangedListener = _framework.registerOrientationChangedListener;
    exports.unregisterOrientationChangedListener = _framework.unregisterOrientationChangedListener;
    exports.getDefaultClickEvent = _framework.getDefaultClickEvent;
    exports.registerPage = _framework.registerPage;
    exports.constructPages = _framework.constructPages;
    exports.disposePages = _framework.disposePages;
    exports.setBackButtonHandler = CDP.setBackButtonHandler;
    exports.Page = _framework.Page;
    exports.Model = _framework.Model;
    exports.Collection = _framework.Collection;
    exports.View = _framework.View;
    exports.Events = _framework.Events;
    exports.Orientation = _framework.Orientation;
});
define("cdp/framework", ["require", "exports", "cdp/core/errors", "cdp/core/promise", "cdp/framework/jqm"], function (require, exports, _errors, promise_2, jqm_1) {
    "use strict";
    function __export(m) {
        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];
    }
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.ErrorUtils = _errors;
    __export(promise_2);
    __export(jqm_1);
    exports.makeErrorInfo = _errors.makeErrorInfo;
    exports.makeCanceledErrorInfo = _errors.makeCanceledErrorInfo;
    exports.isCanceledError = _errors.isCanceledError;
    exports.ensureErrorInfo = _errors.ensureErrorInfo;
    var _CDP_FRAMEWORK = CDP.Framework;
    exports.default = _CDP_FRAMEWORK;
});
define("cdp/tools/tools", ["require", "exports", "cdp.tools"], function (require, exports, _tools) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.abs = _tools.abs;
    exports.max = _tools.max;
    exports.min = _tools.min;
    exports.toZeroPadding = _tools.toZeroPadding;
    exports.getStringSize = _tools.getStringSize;
    exports.toStringChunks = _tools.toStringChunks;
    exports.inherit = _tools.inherit;
    exports.mixin = _tools.mixin;
    exports.extend = _tools.extend;
    exports.getDevicePixcelRatio = _tools.getDevicePixcelRatio;
    exports.getCanvas = _tools.getCanvas;
    exports.ensureImageLoaded = _tools.ensureImageLoaded;
    exports.resizeImage = _tools.resizeImage;
    exports.Binary = _tools.Binary;
    exports.DateTime = _tools.DateTime;
    exports.Template = _tools.Template;
    exports.ProgressCounter = _tools.ProgressCounter;
});
define("cdp/tools", ["require", "exports", "cdp/tools/tools"], function (require, exports, tools_1) {
    "use strict";
    function __export(m) {
        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];
    }
    Object.defineProperty(exports, "__esModule", { value: true });
    __export(tools_1);
    var _CDP_TOOLS = CDP.Tools;
    exports.default = _CDP_TOOLS;
});
define("cdp/ui/listview", ["require", "exports", "cdp.ui.listview"], function (require, exports, _ui) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.ListViewGlobalConfig = _ui.ListViewGlobalConfig;
    exports.LineProfile = _ui.LineProfile;
    exports.GroupProfile = _ui.GroupProfile;
    exports.composeViews = _ui.composeViews;
    exports.deriveViews = _ui.deriveViews;
    exports.mixinViews = _ui.mixinViews;
    exports.StatusManager = _ui.StatusManager;
    exports.PageProfile = _ui.PageProfile;
    exports.ScrollerElement = _ui.ScrollerElement;
    exports.ScrollerNative = _ui.ScrollerNative;
    exports.ScrollerIScroll = _ui.ScrollerIScroll;
    exports.ListItemView = _ui.ListItemView;
    exports.ScrollManager = _ui.ScrollManager;
    exports.ListView = _ui.ListView;
    exports.GroupListItemView = _ui.GroupListItemView;
    exports.ExpandManager = _ui.ExpandManager;
    exports.ExpandableListView = _ui.ExpandableListView;
});
define("cdp/ui/jqm", ["require", "exports", "cdp.ui.jqm"], function (require, exports, _ui) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.Theme = _ui.Theme;
    exports.ExtensionManager = _ui.ExtensionManager;
    var Toast;
    (function (Toast) {
        Toast.LENGTH_SHORT = _ui.Toast.LENGTH_SHORT;
        Toast.LENGTH_LONG = _ui.Toast.LENGTH_LONG;
        Toast.StyleBuilderDefault = _ui.Toast.StyleBuilderDefault;
        Toast.show = _ui.Toast.show;
    })(Toast = exports.Toast || (exports.Toast = {}));
    exports.Dialog = _ui.Dialog;
    exports.alert = _ui.alert;
    exports.confirm = _ui.confirm;
    exports.prompt = _ui.prompt;
    exports.BaseHeaderView = _ui.BaseHeaderView;
    exports.BasePage = _ui.BasePage;
    exports.PageContainerView = _ui.PageContainerView;
    exports.PageView = _ui.PageView;
    exports.TabHostView = _ui.TabHostView;
    exports.TabView = _ui.TabView;
    exports.PageListView = _ui.PageListView;
    exports.PageExpandableListView = _ui.PageExpandableListView;
});
define("cdp/ui", ["require", "exports", "cdp/framework/jqm", "cdp/tools/tools", "cdp/core/promise", "cdp/ui/listview", "cdp/ui/jqm"], function (require, exports, _framework, _tools, promise_3, listview_1, jqm_2) {
    "use strict";
    function __export(m) {
        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];
    }
    Object.defineProperty(exports, "__esModule", { value: true });
    __export(promise_3);
    __export(listview_1);
    __export(jqm_2);
    exports.View = _framework.View;
    exports.toUrl = _framework.toUrl;
    exports.registerPage = _framework.registerPage;
    exports.Orientation = _framework.Orientation;
    exports.getOrientation = _framework.getOrientation;
    exports.registerOrientationChangedListener = _framework.registerOrientationChangedListener;
    exports.unregisterOrientationChangedListener = _framework.unregisterOrientationChangedListener;
    exports.getTemplate = _tools.Template.getJST;
    var _CDP_UI = CDP.UI;
    exports.default = _CDP_UI;
});
define("cdp/bridge/nativebridge", ["require", "exports", "cdp.nativebridge"], function (require, exports, _bridge) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.Gate = _bridge.Gate;
});
define("cdp/bridge", ["require", "exports", "cdp/bridge/nativebridge"], function (require, exports, nativebridge_1) {
    "use strict";
    function __export(m) {
        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];
    }
    Object.defineProperty(exports, "__esModule", { value: true });
    __export(nativebridge_1);
    var _CDP_NATIVE_BRIDGE = CDP.NativeBridge;
    exports.default = _CDP_NATIVE_BRIDGE;
});
define(["require", "exports", "cdp/core", "cdp/framework", "cdp/tools", "cdp/ui", "cdp/bridge"], function (require, exports, core_2, Framework, Tools, UI, NativeBridge) {
    "use strict";
    function __export(m) {
        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];
    }
    Object.defineProperty(exports, "__esModule", { value: true });
    __export(core_2);
    exports.Framework = Framework;
    exports.Tools = Tools;
    exports.UI = UI;
    exports.NativeBridge = NativeBridge;
    exports.initialize = Framework.initialize;
    exports.isInitialized = Framework.isInitialized;
    exports.waitForInitialize = Framework.waitForInitialize;
    var _CDP = CDP;
    exports.default = _CDP;
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNkcDovLy9DRFAvQ29yZS50cyIsImNkcDovLy9DRFAvUGF0Y2gudHMiLCJjZHA6Ly8vQ0RQL0Vycm9yRGVmcy50cyIsImNkcDovLy9DRFAvUHJvbWlzZS50cyIsIndlYnBhY2s6Ly8vd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCBlYjVlZmEzZmYzYjM2ZTgwNGIzNyIsImNkcDovLy9DRFAvaTE4bi50cyIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwge1wicm9vdFwiOlwialF1ZXJ5XCIsXCJjb21tb25qc1wiOlwianF1ZXJ5XCIsXCJjb21tb25qczJcIjpcImpxdWVyeVwiLFwiYW1kXCI6XCJqcXVlcnlcIn0iLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIHtcInJvb3RcIjpcIkNEUFwiLFwiY29tbW9uanNcIjpcImNkcC5jb3JlXCIsXCJjb21tb25qczJcIjpcImNkcC5jb3JlXCIsXCJhbWRcIjpcImNkcC5jb3JlXCJ9Iiwid2VicGFjazovLy9leHRlcm5hbCB7XCJyb290XCI6XCJDRFBcIixcImNvbW1vbmpzXCI6XCJjZHAucHJvbWlzZVwiLFwiY29tbW9uanMyXCI6XCJjZHAucHJvbWlzZVwiLFwiYW1kXCI6XCJjZHAucHJvbWlzZVwifSIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwvaTE4bmV4dC9zY3JpcHRzL2pxdWVyeS1pMThuZXh0LmpzIiwid2VicGFjazovLy9leHRlcm5hbC9pMThuZXh0L3NjcmlwdHMvaTE4bmV4dC5qcyIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwvaTE4bmV4dC9zY3JpcHRzL2kxOG5leHRYSFJCYWNrZW5kLmpzIiwid2VicGFjazovLy9leHRlcm5hbC9pMThuZXh0L3NjcmlwdHMvaTE4bmV4dExvY2FsU3RvcmFnZUNhY2hlLmpzIiwid2VicGFjazovLy9leHRlcm5hbC9pMThuZXh0L3NjcmlwdHMvaTE4bmV4dFNwcmludGZQb3N0UHJvY2Vzc29yLmpzIiwid2VicGFjazovLy9leHRlcm5hbC9pMThuZXh0L3NjcmlwdHMvaTE4bmV4dEJyb3dzZXJMYW5ndWFnZURldGVjdG9yLmpzIiwid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCAzMDY1ZmY2YzFiNWFlMzZjZmFlOSIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwvanF1ZXJ5L3NjcmlwdHMvanF1ZXJ5Lm1vYmlsZS5qcyIsImNkcDovLy9DRFAvRnJhbWV3b3JrL0ludGVyZmFjZXMudHMiLCJjZHA6Ly8vQ0RQL0ZyYW1ld29yay9FcnJvckRlZnMudHMiLCJjZHA6Ly8vQ0RQL0ZyYW1ld29yay9QbGF0Zm9ybS50cyIsImNkcDovLy9DRFAvRnJhbWV3b3JrL1BhdGNoLnRzIiwiY2RwOi8vL0NEUC9GcmFtZXdvcmsvT3JpZW50YXRpb24udHMiLCJjZHA6Ly8vQ0RQL0ZyYW1ld29yay9Db3JlQVBJLnRzIiwiY2RwOi8vL0NEUC9GcmFtZXdvcmsvUm91dGVyLnRzIiwiY2RwOi8vL0NEUC9GcmFtZXdvcmsvUGFnZS50cyIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwge1wicm9vdFwiOlwiQ0RQXCIsXCJjb21tb25qc1wiOlwiY2RwLmkxOG5cIixcImNvbW1vbmpzMlwiOlwiY2RwLmkxOG5cIixcImFtZFwiOlwiY2RwLmkxOG5cIn0iLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIHtcInJvb3RcIjpcIkJhY2tib25lXCIsXCJjb21tb25qc1wiOlwiYmFja2JvbmVcIixcImNvbW1vbmpzMlwiOlwiYmFja2JvbmVcIixcImFtZFwiOlwiYmFja2JvbmVcIn0iLCJ3ZWJwYWNrOi8vL2V4dGVybmFsL2pxdWVyeS9zY3JpcHRzL2pxdWVyeS1taWdyYXRlLmpzIiwiY2RwOi8vL0NEUC9Ub29scy9FcnJvckRlZnMudHMiLCJjZHA6Ly8vQ0RQL1Rvb2xzL0JpbmFyeS50cyIsImNkcDovLy9DRFAvVG9vbHMvQmluYXJ5VHJhbnNwb3J0LnRzIiwiY2RwOi8vL0NEUC9Ub29scy9GdW5jdGlvbnMudHMiLCJjZHA6Ly8vQ0RQL1Rvb2xzL0RhdGVUaW1lLnRzIiwiY2RwOi8vL0NEUC9Ub29scy9UZW1wbGF0ZS50cyIsImNkcDovLy9DRFAvVG9vbHMvUHJvZ3Jlc3NDb3VudGVyLnRzIiwiY2RwOi8vL0NEUC9VSS9saXN0dmlldy9JbnRlcmZhY2VzLnRzIiwiY2RwOi8vL0NEUC9VSS9saXN0dmlldy9Db25maWcudHMiLCJjZHA6Ly8vQ0RQL1VJL2xpc3R2aWV3L1V0aWxzLnRzIiwiY2RwOi8vL0NEUC9VSS9saXN0dmlldy9TdGF0dXNNYW5hZ2VyLnRzIiwiY2RwOi8vL0NEUC9VSS9saXN0dmlldy9MaW5lUHJvZmlsZS50cyIsImNkcDovLy9DRFAvVUkvbGlzdHZpZXcvUGFnZVByb2ZpbGUudHMiLCJjZHA6Ly8vQ0RQL1VJL2xpc3R2aWV3L0dyb3VwUHJvZmlsZS50cyIsImNkcDovLy9DRFAvVUkvbGlzdHZpZXcvU2Nyb2xsZXJFbGVtZW50LnRzIiwiY2RwOi8vL0NEUC9VSS9saXN0dmlldy9TY3JvbGxlck5hdGl2ZS50cyIsImNkcDovLy9DRFAvVUkvbGlzdHZpZXcvU2Nyb2xsZXJJU2Nyb2xsLnRzIiwiY2RwOi8vL0NEUC9VSS9saXN0dmlldy9MaXN0SXRlbVZpZXcudHMiLCJjZHA6Ly8vQ0RQL1VJL2xpc3R2aWV3L1Njcm9sbE1hbmFnZXIudHMiLCJjZHA6Ly8vQ0RQL1VJL2xpc3R2aWV3L0xpc3RWaWV3LnRzIiwiY2RwOi8vL0NEUC9VSS9saXN0dmlldy9Hcm91cExpc3RJdGVtVmlldy50cyIsImNkcDovLy9DRFAvVUkvbGlzdHZpZXcvRXhwYW5kTWFuYWdlci50cyIsImNkcDovLy9DRFAvVUkvbGlzdHZpZXcvRXhwYW5kYWJsZUxpc3RWaWV3LnRzIiwiY2RwOi8vL0NEUC9VSS9qcW0vVGhlbWUudHMiLCJjZHA6Ly8vQ0RQL1VJL2pxbS9FeHRlbnNpb25NYW5hZ2VyLnRzIiwiY2RwOi8vL0NEUC9VSS9qcW0vVG9hc3QudHMiLCJjZHA6Ly8vQ0RQL1VJL2pxbS9EaWFsb2cudHMiLCJjZHA6Ly8vQ0RQL1VJL2pxbS9EaWFsb2dDb21tb25zLnRzIiwiY2RwOi8vL0NEUC9VSS9qcW0vQmFzZUhlYWRlclZpZXcudHMiLCJjZHA6Ly8vQ0RQL1VJL2pxbS9CYXNlUGFnZS50cyIsImNkcDovLy9DRFAvVUkvanFtL1BhZ2VWaWV3LnRzIiwiY2RwOi8vL0NEUC9VSS9qcW0vUGFnZUNvbnRhaW5lclZpZXcudHMiLCJjZHA6Ly8vQ0RQL1VJL2pxbS9UYWJIb3N0Vmlldy50cyIsImNkcDovLy9DRFAvVUkvanFtL1RhYlZpZXcudHMiLCJjZHA6Ly8vQ0RQL1VJL2pxbS9QYWdlTGlzdFZpZXcudHMiLCJjZHA6Ly8vQ0RQL1VJL2pxbS9QYWdlRXhwYW5kYWJsZUxpc3RWaWV3LnRzIiwiY2RwOi8vL0NEUC9VSS9qcW0vRXh0ZW5zaW9uL1JpcHBsZS50cyIsImNkcDovLy9DRFAvVUkvanFtL0V4dGVuc2lvbi9TcGlubmVyLnRzIiwiY2RwOi8vL0NEUC9VSS9qcW0vRXh0ZW5zaW9uL0Zsb2F0TGFiZWwudHMiLCJjZHA6Ly8vQ0RQL1VJL2pxbS9FeHRlbnNpb24vRmxpcFN3aXRjaC50cyIsImNkcDovLy9DRFAvVUkvanFtL0V4dGVuc2lvbi9TbGlkZXIudHMiLCJjZHA6Ly8vQ0RQL1VJL2pxbS9FeHRlbnNpb24vSVNjcm9sbC50cyIsImNkcDovLy9DRFAvTmF0aXZlQnJpZGdlL0ludGVyZmFjZXMudHMiLCJjZHA6Ly8vQ0RQL05hdGl2ZUJyaWRnZS9FcnJvckRlZnMudHMiLCJjZHA6Ly8vQ0RQL05hdGl2ZUJyaWRnZS9VdGlscy50cyIsImNkcDovLy9DRFAvTmF0aXZlQnJpZGdlL0dhdGUudHMiLCJjZHA6Ly8vZXhwb3J0czovL2NkcC9jb3JlL2NvcmUudHMiLCJjZHA6Ly8vZXhwb3J0czovL2NkcC9jb3JlL2Vycm9ycy50cyIsImNkcDovLy9leHBvcnRzOi8vY2RwL2NvcmUvcHJvbWlzZS50cyIsImNkcDovLy9leHBvcnRzOi8vY2RwL2NvcmUvaTE4bi50cyIsImNkcDovLy9leHBvcnRzOi8vY2RwL2NvcmUvZnJhbWV3b3JrLmpxbS50cyIsImNkcDovLy9leHBvcnRzOi8vY2RwL2NvcmUudHMiLCJjZHA6Ly8vZXhwb3J0czovL2NkcC9mcmFtZXdvcmsvanFtLnRzIiwiY2RwOi8vL2V4cG9ydHM6Ly9jZHAvZnJhbWV3b3JrLnRzIiwiY2RwOi8vL2V4cG9ydHM6Ly9jZHAvdG9vbHMvdG9vbHMudHMiLCJjZHA6Ly8vZXhwb3J0czovL2NkcC90b29scy50cyIsImNkcDovLy9leHBvcnRzOi8vY2RwL3VpL2xpc3R2aWV3LnRzIiwiY2RwOi8vL2V4cG9ydHM6Ly9jZHAvdWkvanFtLnRzIiwiY2RwOi8vL2V4cG9ydHM6Ly9jZHAvdWkudHMiLCJjZHA6Ly8vZXhwb3J0czovL2NkcC9icmlkZ2UvbmF0aXZlYnJpZGdlLnRzIiwiY2RwOi8vL2V4cG9ydHM6Ly9jZHAvYnJpZGdlLnRzIiwiY2RwOi8vL2V4cG9ydHM6Ly9jZHAudHMiLCJjZHA6Ly8vQ0RQL1Rvb2xzL0ludGVyZmFjZXMudHMiLCJjZHA6Ly8vQ0RQL1VJL2pxbS9JbnRlcmZhY2VzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLElBQVUsR0FBRyxDQTRHWjtBQTVHRCxXQUFVLEdBQUc7SUFFVCxJQUFNLEdBQUcsR0FBRyxRQUFRLENBQUM7SUFFckI7Ozs7O09BS0c7SUFDVSxVQUFNLEdBQVEsUUFBUSxDQUFDLGFBQWEsQ0FBQyxFQUFFLENBQUM7SUFHckQ7Ozs7O09BS0c7SUFDVSxXQUFPLEdBQVcsQ0FBQztRQUM1QixFQUFFLENBQUMsQ0FBQyxVQUFNLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQztZQUNsQixJQUFJLE9BQU8sR0FBRyxtQkFBbUIsQ0FBQyxJQUFJLENBQUMsVUFBTSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUM3RCxFQUFFLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUM7Z0JBQ1gsT0FBTyxHQUFHLFFBQVEsQ0FBQyxJQUFJLENBQUMsVUFBTSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUNsRCxDQUFDO1lBQ0QsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUN0QixDQUFDO0lBQ0wsQ0FBQyxDQUFDLEVBQUUsQ0FBQztJQUVMOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7T0FxQkc7SUFDSCxlQUFzQixJQUFZO1FBQzlCLElBQU0sSUFBSSxHQUFHLFdBQU8sSUFBSSxFQUFFLENBQUM7UUFDM0IsRUFBRSxDQUFDLENBQUMsSUFBSSxJQUFJLElBQUksSUFBSSxJQUFJLElBQUksSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNsQyxFQUFFLENBQUMsQ0FBQyxHQUFHLEtBQUssSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFDbEIsTUFBTSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ2hDLENBQUM7WUFBQyxJQUFJLENBQUMsQ0FBQztnQkFDSixNQUFNLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQztZQUN2QixDQUFDO1FBQ0wsQ0FBQztRQUFDLElBQUksQ0FBQyxDQUFDO1lBQ0osTUFBTSxDQUFDLElBQUksQ0FBQztRQUNoQixDQUFDO0lBQ0wsQ0FBQztJQVhlLFNBQUssUUFXcEI7SUFFRDs7O09BR0c7SUFDVSxVQUFNLEdBQVEsR0FBRyxDQUFDLE1BQU0sSUFBSSxVQUFNLENBQUMsTUFBTSxJQUFJLEVBQUUsQ0FBQztJQVk3RDs7Ozs7T0FLRztJQUNILG9CQUEyQixPQUF5QjtRQUNoRCxVQUFVLENBQUM7WUFDUCxJQUFJLENBQUM7Z0JBQ0QsU0FBSyxDQUFDLEtBQUssRUFBRSxDQUFDO2dCQUNkLEVBQUUsQ0FBQyxDQUFDLE9BQU8sSUFBSSxPQUFPLE9BQU8sQ0FBQyxPQUFPLEtBQUssVUFBVSxDQUFDLENBQUMsQ0FBQztvQkFDbkQsT0FBTyxDQUFDLE9BQU8sRUFBRSxDQUFDO2dCQUN0QixDQUFDO1lBQ0wsQ0FBQztZQUFDLEtBQUssQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7Z0JBQ2IsSUFBTSxLQUFLLEdBQUcsbUJBQWUsQ0FBQyxLQUFLLENBQUMsQ0FBQztnQkFDckMsSUFBTSxTQUFTLEdBQUcsaUJBQWEsQ0FDM0IsZUFBVyxDQUFDLDJCQUEyQixFQUN2QyxHQUFHLEVBQ0gsS0FBSyxDQUFDLE9BQU8sRUFDYixLQUFLLENBQ1IsQ0FBQztnQkFDRixPQUFPLENBQUMsS0FBSyxDQUFDLFNBQVMsQ0FBQyxPQUFPLENBQUMsQ0FBQztnQkFDakMsRUFBRSxDQUFDLENBQUMsT0FBTyxJQUFJLE9BQU8sT0FBTyxDQUFDLElBQUksS0FBSyxVQUFVLENBQUMsQ0FBQyxDQUFDO29CQUNoRCxPQUFPLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDO2dCQUM1QixDQUFDO1lBQ0wsQ0FBQztRQUNMLENBQUMsQ0FBQyxDQUFDO0lBQ1AsQ0FBQztJQXJCZSxjQUFVLGFBcUJ6QjtBQUNMLENBQUMsRUE1R1MsR0FBRyxLQUFILEdBQUcsUUE0R1o7QUM1R0QsSUFBVSxHQUFHLENBK0VaO0FBL0VELFdBQVUsR0FBRztJQUVULElBQU0sR0FBRyxHQUFXLGNBQWMsQ0FBQztJQUVuQzs7Ozs7T0FLRztJQUNIO1FBQUE7UUFvRUEsQ0FBQztRQW5FRyx1RUFBdUU7UUFDdkUseUJBQXlCO1FBRXpCOzs7OztXQUtHO1FBQ1csV0FBSyxHQUFuQjtZQUNJLEtBQUssQ0FBQyxZQUFZLEVBQUUsQ0FBQztZQUNyQixLQUFLLENBQUMsU0FBUyxFQUFFLENBQUM7UUFDdEIsQ0FBQztRQUVELHVFQUF1RTtRQUN2RSwwQkFBMEI7UUFFMUIsa0JBQWtCO1FBQ0gsa0JBQVksR0FBM0I7WUFDSSxFQUFFLENBQUMsQ0FBQyxJQUFJLElBQUksVUFBTSxDQUFDLE9BQU8sSUFBSSxJQUFJLElBQUksVUFBTSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO2dCQUN6RCxVQUFNLENBQUMsT0FBTyxHQUFHO29CQUNiLEtBQUssRUFBdUIsY0FBMEIsQ0FBQztvQkFDdkQsUUFBUSxFQUFvQixjQUEwQixDQUFDO29CQUN2RCxJQUFJLEVBQXdCLGNBQTBCLENBQUM7b0JBQ3ZELE9BQU8sRUFBcUIsY0FBMEIsQ0FBQztvQkFDdkQsS0FBSyxFQUF1QixjQUEwQixDQUFDO29CQUN2RCxLQUFLLEVBQXVCLGNBQTBCLENBQUM7b0JBQ3ZELE1BQU0sRUFBc0IsY0FBMEIsQ0FBQztvQkFDdkQsS0FBSyxFQUF1QixjQUEwQixDQUFDO29CQUN2RCxjQUFjLEVBQWMsY0FBMEIsQ0FBQztvQkFDdkQsTUFBTSxFQUFzQixjQUEwQixDQUFDO29CQUN2RCxJQUFJLEVBQXdCLGNBQTBCLENBQUM7b0JBQ3ZELE9BQU8sRUFBcUIsY0FBMEIsQ0FBQztvQkFDdkQsTUFBTSxFQUFzQixjQUEwQixDQUFDO29CQUN2RCx5QkFBeUIsRUFBRyxjQUEwQixDQUFDO29CQUN2RCxLQUFLLEVBQXVCLGNBQTBCLENBQUM7b0JBQ3ZELEdBQUcsRUFBeUIsY0FBMEIsQ0FBQztvQkFDdkQsSUFBSSxFQUF3QixjQUEwQixDQUFDO29CQUN2RCxLQUFLLEVBQXVCLGNBQTBCLENBQUM7b0JBQ3ZELEdBQUcsRUFBeUIsY0FBMEIsQ0FBQztvQkFDdkQsVUFBVSxFQUFrQixjQUEwQixDQUFDO2lCQUMxRCxDQUFDO1lBQ04sQ0FBQztRQUNMLENBQUM7UUFFRCxnQkFBZ0I7UUFDRCxlQUFTLEdBQXhCO1lBQ0ksRUFBRSxDQUFDLENBQUMsUUFBUSxLQUFLLE9BQU8sS0FBSyxDQUFDLENBQUMsQ0FBQztnQkFDNUIsSUFBTSxRQUFNLEdBQVEsS0FBSyxDQUFDO2dCQUUxQixJQUFNLHFCQUFtQixHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsV0FBVyxDQUFDO2dCQUN2RCxJQUFJLENBQUMsU0FBUyxDQUFDLFdBQVcsR0FBRyxVQUFVLElBQVM7b0JBQzVDLElBQU0sSUFBSSxHQUFHLElBQUksQ0FBQztvQkFDbEIsTUFBTSxDQUFDLFFBQU0sQ0FBQyx1QkFBdUIsQ0FBQzt3QkFDbEMsTUFBTSxDQUFDLHFCQUFtQixDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUM7b0JBQ2hELENBQUMsQ0FBQyxDQUFDO2dCQUNQLENBQUMsQ0FBQztnQkFFRixJQUFNLHNCQUFvQixHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsWUFBWSxDQUFDO2dCQUN6RCxJQUFJLENBQUMsU0FBUyxDQUFDLFlBQVksR0FBRyxVQUFVLFVBQWUsRUFBRSxnQkFBc0I7b0JBQzNFLElBQU0sSUFBSSxHQUFHLElBQUksQ0FBQztvQkFDbEIsTUFBTSxDQUFDLFFBQU0sQ0FBQyx1QkFBdUIsQ0FBQzt3QkFDbEMsTUFBTSxDQUFDLHNCQUFvQixDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsVUFBVSxFQUFFLGdCQUFnQixDQUFDLENBQUM7b0JBQ3pFLENBQUMsQ0FBQyxDQUFDO2dCQUNQLENBQUMsQ0FBQztZQUNOLENBQUM7UUFDTCxDQUFDO1FBQ0wsWUFBQztJQUFELENBQUM7SUFwRVksU0FBSyxRQW9FakI7QUFDTCxDQUFDLEVBL0VTLEdBQUcsS0FBSCxHQUFHLFFBK0VaOzs7Ozs7Ozs7QUMvRUQsSUFBVSxHQUFHLENBaVdaO0FBaldELFdBQVUsR0FBRztJQUVULElBQU0sa0JBQWtCLEdBQU0sZUFBZSxDQUFDO0lBQzlDLElBQU0sb0JBQW9CLEdBQUksSUFBSSxDQUFDO0lBQ25DLElBQU0sZ0JBQWdCLEdBQVEsT0FBTyxDQUFDO0lBQ3RDLElBQU0sY0FBYyxHQUFxQztRQUNyRCxHQUFHLEVBQUUsc0JBQXNCO1FBQzNCLEdBQUcsRUFBRSxxQkFBcUI7UUFDMUIsSUFBSSxFQUFFLG1CQUFtQjtLQUM1QixDQUFDO0lBRUYsdUVBQXVFO0lBQ3ZFLG1CQUFtQjtJQUVuQjs7O09BR0c7SUFDSCxJQUFZLFdBT1g7SUFQRCxXQUFZLFdBQVc7UUFDbkIseURBQXlEO1FBQ3pELHVEQUFlO1FBQ2Ysc0RBQXNEO1FBQ3RELHFEQUFlO1FBQ2Ysd0RBQXdEO1FBQ3hELGtEQUFnQjtJQUNwQixDQUFDLEVBUFcsV0FBVyxHQUFYLGVBQVcsS0FBWCxlQUFXLFFBT3RCO0lBbUJEOzs7T0FHRztJQUNVLDRCQUF3QixHQUFHLElBQUksQ0FBQztJQUU3Qzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztPQWtDRztJQUNILHVCQUE4QixVQUFrQixFQUFFLEdBQVksRUFBRSxPQUFnQixFQUFFLEtBQWE7UUFDM0YsSUFBTSxRQUFRLEdBQUcsQ0FBQyxLQUFLLElBQUksZ0JBQWdCLEtBQUssS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQztRQUM5RSxJQUFNLEdBQUcsR0FBRyxRQUFRLENBQUMsQ0FBQyxDQUFDLGdCQUFnQixDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUM7UUFDbEQsSUFBTSxJQUFJLEdBQUcsUUFBUSxDQUFDLENBQUMsQ0FBQyxXQUFXLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxVQUFVLENBQUM7UUFDMUQsSUFBTSxTQUFTLEdBQWMsSUFBSSxLQUFLLENBQUMsR0FBRyxJQUFJLHFCQUFxQixDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7UUFDM0UsU0FBUyxDQUFDLElBQUksR0FBSSxjQUFjLENBQUMsSUFBSSxFQUFFLEdBQUcsQ0FBQyxDQUFDO1FBQzVDLFNBQVMsQ0FBQyxJQUFJLEdBQUksSUFBSSxDQUFDO1FBQ3ZCLFNBQVMsQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDO1FBQ3hCLE1BQU0sQ0FBQyxTQUFTLENBQUM7SUFDckIsQ0FBQztJQVRlLGlCQUFhLGdCQVM1QjtJQUVEOzs7Ozs7Ozs7Ozs7O09BYUc7SUFDSCwrQkFBc0MsR0FBWSxFQUFFLEtBQWE7UUFDN0QsTUFBTSxDQUFDLGFBQWEsQ0FBQyxXQUFXLENBQUMsUUFBUSxFQUFFLEdBQUcsRUFBRSxnQkFBZ0IsRUFBRSxLQUFLLENBQUMsQ0FBQztJQUM3RSxDQUFDO0lBRmUseUJBQXFCLHdCQUVwQztJQUVEOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztPQW9CRztJQUNILHlCQUFnQyxLQUFxQjtRQUNqRCxFQUFFLENBQUMsQ0FBQyxRQUFRLEtBQUssT0FBTyxLQUFLLENBQUMsQ0FBQyxDQUFDO1lBQzVCLE1BQU0sQ0FBQyxnQkFBZ0IsS0FBSyxLQUFLLENBQUM7UUFDdEMsQ0FBQztRQUFDLElBQUksQ0FBQyxDQUFDO1lBQ0osSUFBTSxTQUFTLEdBQWMsS0FBSyxDQUFDO1lBQ25DLEVBQUUsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUM7Z0JBQ1osRUFBRSxDQUFDLENBQUMsV0FBVyxDQUFDLFFBQVEsS0FBSyxTQUFTLENBQUMsSUFBSSxJQUFJLGdCQUFnQixLQUFLLFNBQVMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDO29CQUNwRixNQUFNLENBQUMsSUFBSSxDQUFDO2dCQUNoQixDQUFDO1lBQ0wsQ0FBQztRQUNMLENBQUM7UUFDRCxNQUFNLENBQUMsS0FBSyxDQUFDO0lBQ2pCLENBQUM7SUFaZSxtQkFBZSxrQkFZOUI7SUFFRDs7O09BR0c7SUFDSCx5QkFBZ0MsS0FBVztRQUN2QyxJQUFNLE9BQU8sR0FBYztZQUN2QixJQUFJLEVBQUUsa0JBQWtCLEdBQUcsb0JBQW9CO1lBQy9DLElBQUksRUFBRSxXQUFXLENBQUMsTUFBTTtZQUN4QixPQUFPLEVBQUUsd0JBQXdCO1NBQ3BDLENBQUM7UUFDRixJQUFNLEtBQUssR0FBRyxVQUFDLEtBQVc7WUFDdEIsRUFBRSxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO2dCQUNULE1BQU0sQ0FBQyxLQUFLLENBQUM7WUFDakIsQ0FBQztZQUNELE1BQU0sQ0FBQyxDQUNILFFBQVEsS0FBSyxPQUFPLEtBQUssQ0FBQyxJQUFJO2dCQUM5QixRQUFRLEtBQUssT0FBTyxLQUFLLENBQUMsSUFBSTtnQkFDOUIsUUFBUSxLQUFLLE9BQU8sS0FBSyxDQUFDLE9BQU8sQ0FDcEMsQ0FBQztRQUNOLENBQUMsQ0FBQztRQUVGLEVBQUUsQ0FBQyxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDZixNQUFNLENBQUMsS0FBSyxDQUFDO1FBQ2pCLENBQUM7UUFBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsS0FBSyxZQUFZLEtBQUssQ0FBQyxDQUFDLENBQUM7WUFDcEIsS0FBTSxDQUFDLElBQUksR0FBRyxXQUFXLENBQUMsTUFBTSxDQUFDO1lBQzdDLE1BQU0sQ0FBWSxLQUFLLENBQUM7UUFDNUIsQ0FBQztRQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxRQUFRLEtBQUssT0FBTyxLQUFLLENBQUMsQ0FBQyxDQUFDO1lBQ25DLEVBQUUsQ0FBQyxDQUFDLGVBQWUsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7Z0JBQ3pCLE1BQU0sQ0FBQyxxQkFBcUIsRUFBRSxDQUFDO1lBQ25DLENBQUM7WUFBQyxJQUFJLENBQUMsQ0FBQztnQkFDSixNQUFNLGNBQU0sT0FBTyxFQUFLLEVBQUUsT0FBTyxFQUFFLEtBQUssRUFBRSxFQUFHO1lBQ2pELENBQUM7UUFDTCxDQUFDO1FBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLFFBQVEsS0FBSyxPQUFPLEtBQUssQ0FBQyxDQUFDLENBQUM7WUFDbkMsTUFBTSxjQUNDLE9BQU8sRUFDRjtnQkFDSixLQUFLLEVBQUU7b0JBQ0gsSUFBSSxFQUFFLGtCQUFrQixHQUFHLG9CQUFvQjtvQkFDL0MsT0FBTyxFQUFFLDhCQUE4QjtvQkFDdkMsSUFBSSxFQUFFLEtBQUs7aUJBQ2Q7YUFDSixFQUNIO1FBQ04sQ0FBQztRQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxRQUFRLEtBQUssT0FBTyxLQUFLLENBQUMsQ0FBQyxDQUFDO1lBQ25DLE1BQU0sY0FBTSxPQUFPLEVBQUssS0FBSyxFQUFHO1FBQ3BDLENBQUM7UUFFRCxNQUFNLENBQUMsT0FBTyxDQUFDO0lBQ25CLENBQUM7SUE1Q2UsbUJBQWUsa0JBNEM5QjtJQUVEOztPQUVHO0lBQ1UsaUNBQTZCLEdBQUcsR0FBRyxDQUFDO0lBRWpEOzs7Ozs7Ozs7Ozs7Ozs7T0FlRztJQUNILElBQVksZ0JBTVg7SUFORCxXQUFZLGdCQUFnQjtRQUN4QixpRkFBcUI7UUFDN0Isb0ZBQW9GO1FBQ3BGLG9GQUFvRjtRQUNwRixvRkFBb0Y7UUFDNUUsMkNBQU0sQ0FBQyxHQUFHLGlDQUE2QjtJQUMzQyxDQUFDLEVBTlcsZ0JBQWdCLEdBQWhCLG9CQUFnQixLQUFoQixvQkFBZ0IsUUFNM0I7SUFDRCxxREFBcUQ7SUFDekQsOENBQThDO0lBRTFDOzs7Ozs7O09BT0c7SUFDSCw4QkFBcUMsSUFBcUIsRUFBRSxTQUFpQixFQUFFLE9BQWdCO1FBQzNGLEVBQUUsQ0FBQyxDQUFDLFFBQVEsS0FBSyxPQUFPLElBQUksQ0FBQyxDQUFDLENBQUM7WUFDM0IsSUFBSSxHQUFHLEdBQUcsQ0FBQyxnQkFBZ0IsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUN0QyxDQUFDO1FBQ0QsTUFBTSxDQUFDLGlCQUFpQixDQUFtQixJQUFJLEVBQUUsU0FBUyxFQUFFLE9BQU8sRUFBRSxJQUFJLENBQUMsQ0FBQztJQUMvRSxDQUFDO0lBTGUsd0JBQW9CLHVCQUtuQztJQUVEOzs7Ozs7O09BT0c7SUFDSCw0QkFBbUMsSUFBcUIsRUFBRSxTQUFpQixFQUFFLE9BQWdCO1FBQ3pGLEVBQUUsQ0FBQyxDQUFDLFFBQVEsS0FBSyxPQUFPLElBQUksQ0FBQyxDQUFDLENBQUM7WUFDM0IsSUFBSSxHQUFHLEdBQUcsQ0FBQyxnQkFBZ0IsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUN0QyxDQUFDO1FBQ0QsTUFBTSxDQUFDLGlCQUFpQixDQUFtQixJQUFJLEVBQUUsU0FBUyxFQUFFLE9BQU8sRUFBRSxLQUFLLENBQUMsQ0FBQztJQUNoRixDQUFDO0lBTGUsc0JBQWtCLHFCQUtqQztJQUVEOzs7OztPQUtHO0lBQ0gsbUJBQTBCLElBQVk7UUFDbEMsTUFBTSxDQUFDLENBQUMsSUFBSSxJQUFJLENBQUM7SUFDckIsQ0FBQztJQUZlLGFBQVMsWUFFeEI7SUFFRDs7Ozs7T0FLRztJQUNILGdCQUF1QixJQUFZO1FBQy9CLE1BQU0sQ0FBQyxJQUFJLEdBQUcsQ0FBQyxDQUFDO0lBQ3BCLENBQUM7SUFGZSxVQUFNLFNBRXJCO0lBRUQ7Ozs7O09BS0c7SUFDSCxpQ0FBd0MsY0FBc0I7UUFDMUQsR0FBRyxDQUFDLGdCQUFnQixHQUFHLGFBQVUsR0FBRyxDQUFDLGdCQUFnQixFQUFLLGNBQWMsQ0FBRSxDQUFDO0lBQy9FLENBQUM7SUFGZSwyQkFBdUIsMEJBRXRDO0lBRUQ7Ozs7O09BS0c7SUFDSCw0QkFBbUMsVUFBa0I7UUFDakQsR0FBRyxDQUFDLFdBQVcsR0FBRyxhQUFVLEdBQUcsQ0FBQyxXQUFXLEVBQUssVUFBVSxDQUFFLENBQUM7SUFDakUsQ0FBQztJQUZlLHNCQUFrQixxQkFFakM7SUFFRCx1RUFBdUU7SUFDdkUsNEJBQTRCO0lBRTVCLElBQU0sbUJBQW1CLEdBQUcsRUFBRSxDQUFDO0lBRS9CLDJCQUEyQjtJQUMzQixJQUFLLGVBR0o7SUFIRCxXQUFLLGVBQWU7UUFDaEIscURBQVc7UUFDWCwyQ0FBVSxDQUFDLEdBQUcsbUJBQW1CO0lBQ3JDLENBQUMsRUFISSxlQUFlLEtBQWYsZUFBZSxRQUduQjtJQUVELGlEQUFpRDtJQUNqRCxXQUFZLFdBQVc7UUFDbkIsdUZBQTZCO1FBQzdCLG9GQUFvRjtRQUNwRix5REFBOEIsa0JBQWtCLENBQUMsZ0JBQWdCLENBQUMsR0FBRyxFQUFFLGVBQWUsQ0FBQyxJQUFJLEdBQUcsQ0FBQyxFQUFFLHFCQUFxQixDQUFDO0lBQzNILENBQUMsRUFKVyxXQUFXLEdBQVgsZUFBVyxLQUFYLGVBQVcsUUFJdEI7SUFDRCxxREFBcUQ7SUFDekQseUNBQXlDO0lBRXJDLHVFQUF1RTtJQUN2RSwwQkFBMEI7SUFFMUIsa0JBQWtCO0lBQ2xCLDJCQUEyQixJQUFzQixFQUFFLFVBQWtCLEVBQUUsT0FBZ0IsRUFBRSxTQUEwQjtRQUExQiw2Q0FBMEI7UUFDL0csRUFBRSxDQUFDLENBQUMsVUFBVSxJQUFJLENBQUMsSUFBSSw0QkFBd0IsSUFBSSxVQUFVLENBQUMsQ0FBQyxDQUFDO1lBQzVELE9BQU8sQ0FBQyxLQUFLLENBQUMsK0RBQTZELFVBQVUsTUFBRyxDQUFDLENBQUM7WUFDMUYsTUFBTSxDQUFDO1FBQ1gsQ0FBQztRQUNELElBQU0sTUFBTSxHQUFHLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNsQyxJQUFNLFVBQVUsR0FBRyxNQUFNLEdBQUcsQ0FBQyxJQUFJLEdBQUcsVUFBVSxDQUFDLENBQUM7UUFDaEQsY0FBYyxDQUFDLFVBQVUsQ0FBQyxHQUFHLE9BQU8sQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLG1CQUFpQixVQUFVLE1BQUcsQ0FBQyxDQUFDO1FBQ2xGLE1BQU0sQ0FBQyxVQUFVLENBQUM7SUFDdEIsQ0FBQztJQUVELGdDQUFnQztJQUNoQywrQkFBK0IsVUFBa0I7UUFDN0MsRUFBRSxDQUFDLENBQUMsY0FBYyxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUM3QixNQUFNLENBQUMsY0FBYyxDQUFDLFVBQVUsQ0FBQyxDQUFDO1FBQ3RDLENBQUM7UUFBQyxJQUFJLENBQUMsQ0FBQztZQUNKLE1BQU0sQ0FBQyw2Q0FBMkMsVUFBVSxNQUFHLENBQUM7UUFDcEUsQ0FBQztJQUNMLENBQUM7SUFFRCwyQ0FBMkM7SUFDM0Msd0JBQXdCLFVBQWtCLEVBQUUsR0FBVztRQUNuRCxJQUFNLE1BQU0sR0FBRyxHQUFHLElBQUksRUFBRSxDQUFDO1FBQ3pCLEVBQUUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxXQUFXLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQzlCLE1BQU0sQ0FBQyxNQUFNLEdBQUcsR0FBRyxDQUFDLFdBQVcsQ0FBQyxVQUFVLENBQUMsR0FBRyxvQkFBb0IsQ0FBQztRQUN2RSxDQUFDO1FBQUMsSUFBSSxDQUFDLENBQUM7WUFDSixNQUFNLENBQUMsTUFBTSxHQUFHLGtCQUFrQixHQUFHLG9CQUFvQixDQUFDO1FBQzlELENBQUM7SUFDTCxDQUFDO0FBQ0wsQ0FBQyxFQWpXUyxHQUFHLEtBQUgsR0FBRyxRQWlXWjs7Ozs7Ozs7O0FDaldELElBQVUsR0FBRyxDQXlsQlo7QUF6bEJELFdBQVUsR0FBRztJQUVULElBQU0sR0FBRyxHQUFXLGdCQUFnQixDQUFDO0lBb0pyQzs7Ozs7Ozs7T0FRRztJQUNILHdCQUNJLEVBQXFCLEVBQ3JCLE9BQTZDO1FBRTdDLElBQUksYUFBaUMsQ0FBQztRQUN0QyxJQUFJLE1BQXNCLENBQUM7UUFFM0IsRUFBRSxDQUFDLENBQUMsVUFBVSxLQUFLLE9BQU8sT0FBTyxDQUFDLENBQUMsQ0FBQztZQUNoQyxNQUFNLEdBQW1CLE9BQU8sQ0FBQztRQUNyQyxDQUFDO1FBQUMsSUFBSSxDQUFDLENBQUM7WUFDSixhQUFhLEdBQUcsT0FBTyxDQUFDO1lBQ3hCLEVBQUUsQ0FBQyxDQUFDLGFBQWEsSUFBSSxhQUFhLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQztnQkFDaEQsTUFBTSxHQUFHLGFBQWEsQ0FBQyxjQUFjLENBQUM7WUFDMUMsQ0FBQztZQUFDLElBQUksQ0FBQyxDQUFDO2dCQUNKLE1BQU0sR0FBRyxjQUFtQixDQUFDLENBQUM7WUFDbEMsQ0FBQztRQUNMLENBQUM7UUFFRCxJQUFNLE1BQU0sR0FBRyxVQUFVLElBQWE7WUFDbEMsSUFBTSxlQUFlLEdBQUcsQ0FBQyxJQUFJLElBQVUsSUFBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBTyxJQUFLLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUM7WUFDeEYsSUFBTSxNQUFNLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLEVBQUUsRUFBRSxJQUFJLEVBQUUsRUFBRSxPQUFPLEVBQUUsT0FBTyxFQUFFLGVBQWUsRUFBRSxlQUFlLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLE9BQU8sRUFBRSxPQUFPLEVBQUUsQ0FBQztZQUN4SCxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUM7WUFDZixFQUFFLENBQUMsQ0FBQyxJQUFJLElBQUksSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUM7Z0JBQzFCLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztvQkFDeEIsSUFBSSxDQUFDLFVBQVUsQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUM7Z0JBQ2xDLENBQUM7Z0JBQUMsSUFBSSxDQUFDLENBQUM7b0JBQ0osT0FBTyxDQUFDLEtBQUssQ0FBQyxHQUFHLEdBQUcseURBQXlELENBQUMsQ0FBQztnQkFDbkYsQ0FBQztnQkFDRCxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBVSxJQUFJLFNBQVMsS0FBSyxJQUFJLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQyxDQUFDO29CQUNoRCxFQUFFLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDO2dCQUN0QixDQUFDO1lBQ0wsQ0FBQztZQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxTQUFTLEtBQUssSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUMsQ0FBQztnQkFDcEMsRUFBRSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQztZQUN0QixDQUFDO1FBQ0wsQ0FBQyxDQUFDO1FBRUYsSUFBTSxTQUFTLEdBQUcsVUFBVSxPQUFZO1lBQXRCLGlCQVdqQjtZQVZHLEVBQUUsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO2dCQUNoQixJQUFJLENBQUMsVUFBVSxHQUFHLE9BQU8sQ0FBQztnQkFDMUIsT0FBTztxQkFDRixNQUFNLENBQUM7b0JBQ0osS0FBSSxDQUFDLFVBQVUsR0FBRyxJQUFJLENBQUM7Z0JBQzNCLENBQUMsQ0FBQyxDQUFDO1lBQ1gsQ0FBQztZQUFDLElBQUksQ0FBQyxDQUFDO2dCQUNKLE9BQU8sQ0FBQyxLQUFLLENBQUMsR0FBRyxHQUFHLHdEQUF3RCxDQUFDLENBQUM7WUFDbEYsQ0FBQztZQUNELE1BQU0sQ0FBQyxPQUFPLENBQUM7UUFDbkIsQ0FBQyxDQUFDO1FBRUYsSUFBTSxPQUFPLEdBQUcsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxFQUFFLEVBQUU7WUFDekIsVUFBVSxFQUFFLElBQUk7WUFDaEIsVUFBVSxFQUFFLEtBQUs7U0FDcEIsRUFBRSxhQUFhLENBQUMsQ0FBQztRQUVsQixNQUFNLENBQUM7WUFDSCxFQUFFLEVBQUUsRUFBRTtZQUNOLE1BQU0sRUFBRSxPQUFPO1lBQ2YsS0FBSyxFQUFFLE1BQU07WUFDYixRQUFRLEVBQUUsU0FBUztTQUN0QixDQUFDO0lBQ04sQ0FBQztJQUVEOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O09BaURHO0lBQ0gscUJBQStCLEVBQXFCLEVBQUUsT0FBNkM7UUFDL0YsSUFBTSxVQUFVLEdBQUcsY0FBYyxDQUFDLEVBQUUsRUFBRSxPQUFPLENBQUMsQ0FBQztRQUMvQyxJQUFNLE9BQU8sR0FBcUIsRUFBRSxDQUFDLE9BQU8sQ0FBQyxVQUFVLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDaEUsRUFBRSxDQUFDLENBQUMsSUFBSSxJQUFJLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO1lBQ3hCLE9BQU8sQ0FBQyxLQUFLLEdBQUcsVUFBVSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7UUFDbkQsQ0FBQztRQUNELEVBQUUsQ0FBQyxDQUFDLElBQUksSUFBSSxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQztZQUMzQixPQUFPLENBQUMsUUFBUSxHQUFHLFVBQVUsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQ3pELENBQUM7UUFDRCxNQUFNLENBQUMsT0FBTyxDQUFDO0lBQ25CLENBQUM7SUFWZSxlQUFXLGNBVTFCO0lBY0Q7UUFBd0IsbUJBQW1CO2FBQW5CLFVBQW1CLEVBQW5CLHFCQUFtQixFQUFuQixJQUFtQjtZQUFuQiw4QkFBbUI7O1FBRXZDLFdBQVc7UUFDWCxJQUFNLFVBQVUsR0FBdUIsRUFBRSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsRUFBRSxFQUFFLFNBQVMsQ0FBQyxDQUFDO1FBRXRFLFFBQVE7UUFDUixJQUFNLEVBQUUsR0FBRyxDQUFDLENBQUMsUUFBUSxFQUFFLENBQUM7UUFDeEIsSUFBTSxPQUFPLEdBQUcsRUFBRSxDQUFDO1FBRW5CLElBQU0sVUFBVSxHQUFHO1lBQ2YsTUFBTSxDQUFDLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxVQUFDLE9BQVk7Z0JBQzlCLE1BQU0sQ0FBQyxTQUFTLEtBQUssT0FBTyxDQUFDLE1BQU0sQ0FBQztZQUN4QyxDQUFDLENBQUMsQ0FBQztRQUNQLENBQUMsQ0FBQztRQUVGLFVBQVUsQ0FBQyxPQUFPLENBQUMsVUFBQyxRQUFRLEVBQUUsS0FBSztZQUMvQixPQUFPLENBQUMsSUFBSSxDQUFDO2dCQUNULE1BQU0sRUFBRSxTQUFTO2dCQUNqQixJQUFJLEVBQUUsSUFBSTthQUNiLENBQUMsQ0FBQztZQUNILFFBQVE7aUJBQ0gsSUFBSSxDQUFDO2dCQUFDLGNBQWM7cUJBQWQsVUFBYyxFQUFkLHFCQUFjLEVBQWQsSUFBYztvQkFBZCx5QkFBYzs7Z0JBQ2pCLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQyxNQUFNLEdBQUcsVUFBVSxDQUFDO2dCQUNuQyxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQztZQUMvQixDQUFDLEVBQUU7Z0JBQUMsY0FBYztxQkFBZCxVQUFjLEVBQWQscUJBQWMsRUFBZCxJQUFjO29CQUFkLHlCQUFjOztnQkFDZCxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUMsTUFBTSxHQUFHLFVBQVUsQ0FBQztnQkFDbkMsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDLElBQUksR0FBRyxJQUFJLENBQUM7WUFDL0IsQ0FBQyxDQUFDO2lCQUNELE1BQU0sQ0FBQztnQkFDSixFQUFFLENBQUMsQ0FBQyxVQUFVLEVBQUUsQ0FBQyxDQUFDLENBQUM7b0JBQ2YsRUFBRSxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQztnQkFDeEIsQ0FBQztZQUNMLENBQUMsQ0FBQyxDQUFDO1FBQ1gsQ0FBQyxDQUFDLENBQUM7UUFFSCxNQUFNLENBQU0sRUFBRSxDQUFDLE9BQU8sRUFBRSxDQUFDO0lBQzdCLENBQUM7SUFwQ2UsUUFBSSxPQW9DbkI7SUFXRDtRQUF3QixtQkFBbUI7YUFBbkIsVUFBbUIsRUFBbkIscUJBQW1CLEVBQW5CLElBQW1CO1lBQW5CLDhCQUFtQjs7UUFDdkMsSUFBTSxFQUFFLEdBQUcsQ0FBQyxDQUFDLFFBQVEsRUFBRSxDQUFDO1FBRXhCLElBQU0sVUFBVSxHQUF1QixFQUFFLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxFQUFFLEVBQUUsU0FBUyxDQUFDLENBQUM7UUFDdEUsVUFBVSxDQUFDLE9BQU8sQ0FBQyxVQUFDLFFBQVEsRUFBRSxLQUFLO1lBQy9CLFFBQVE7aUJBQ0gsSUFBSSxDQUFDO2dCQUFDLGNBQWM7cUJBQWQsVUFBYyxFQUFkLHFCQUFjLEVBQWQsSUFBYztvQkFBZCx5QkFBYzs7Z0JBQ2pCLEVBQUUsQ0FBQyxDQUFDLFNBQVMsS0FBSyxFQUFFLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQyxDQUFDO29CQUMzQixFQUFFLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO2dCQUNyQixDQUFDO1lBQ0wsQ0FBQyxFQUFFO2dCQUFDLGNBQWM7cUJBQWQsVUFBYyxFQUFkLHFCQUFjLEVBQWQsSUFBYztvQkFBZCx5QkFBYzs7Z0JBQ2QsRUFBRSxDQUFDLENBQUMsU0FBUyxLQUFLLEVBQUUsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxDQUFDLENBQUM7b0JBQzNCLEVBQUUsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUM7Z0JBQ3BCLENBQUM7WUFDTCxDQUFDLENBQUMsQ0FBQztRQUNYLENBQUMsQ0FBQyxDQUFDO1FBRUgsTUFBTSxDQUFNLEVBQUUsQ0FBQyxPQUFPLEVBQUUsQ0FBQztJQUM3QixDQUFDO0lBbEJlLFFBQUksT0FrQm5CO0lBRUQsdUhBQXVIO0lBRXZIOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7T0FxQkc7SUFDSDtRQUFBO1lBRVksVUFBSyxHQUE4QyxFQUFFLENBQUM7WUFDdEQsUUFBRyxHQUFXLENBQUMsQ0FBQztRQXlFNUIsQ0FBQztRQXZFRyx1RUFBdUU7UUFDdkUsZ0JBQWdCO1FBRWhCOzs7V0FHRztRQUNJLDRCQUFHLEdBQVYsVUFBYyxPQUFnQztZQUE5QyxpQkE4QkM7WUE3QkcsRUFBRSxDQUFDLENBQUMsT0FBTyxJQUFJLElBQUksQ0FBQyxDQUFDLENBQUM7Z0JBQ2xCLE1BQU0sQ0FBQyxJQUFJLENBQUM7WUFDaEIsQ0FBQztZQUVELHdCQUF3QjtZQUN4QixFQUFFLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO2dCQUNqQixPQUFPLENBQUMsS0FBSyxDQUFDLEdBQUcsR0FBRyxxREFBcUQsQ0FBQyxDQUFDO2dCQUMzRSxNQUFNLENBQU0sT0FBTyxDQUFDO1lBQ3hCLENBQUM7WUFFRCxJQUFNLE1BQU0sR0FBRztnQkFDWCxPQUFPLEVBQU8sT0FBTztnQkFDckIsRUFBRSxFQUFFLElBQUksQ0FBQyxHQUFHLEVBQUU7YUFDakIsQ0FBQztZQUVGLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1lBRWxCLE9BQVE7aUJBQ1QsTUFBTSxDQUFDO2dCQUNKLEtBQUksQ0FBQyxLQUFLLEdBQUcsS0FBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsVUFBQyxPQUFnRDtvQkFDNUUsRUFBRSxDQUFDLENBQUMsT0FBTyxDQUFDLEVBQUUsS0FBSyxNQUFNLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQzt3QkFDM0IsTUFBTSxDQUFDLElBQUksQ0FBQztvQkFDaEIsQ0FBQztvQkFBQyxJQUFJLENBQUMsQ0FBQzt3QkFDSixNQUFNLENBQUMsS0FBSyxDQUFDO29CQUNqQixDQUFDO2dCQUNMLENBQUMsQ0FBQyxDQUFDO1lBQ1AsQ0FBQyxDQUFDLENBQUM7WUFFUCxNQUFNLENBQU0sT0FBTyxDQUFDO1FBQ3hCLENBQUM7UUFFRDs7Ozs7Ozs7OztXQVVHO1FBQ0ksK0JBQU0sR0FBYixVQUFjLElBQWE7WUFDdkIsSUFBTSxRQUFRLEdBQUcsSUFBSSxDQUFDLFFBQVEsRUFBRSxDQUFDO1lBQ2pDLFFBQVEsQ0FBQyxPQUFPLENBQUMsVUFBQyxPQUFzQjtnQkFDcEMsRUFBRSxDQUFDLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7b0JBQ2hCLE9BQU8sQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUM7Z0JBQ3hCLENBQUM7WUFDTCxDQUFDLENBQUMsQ0FBQztZQUNILE1BQU0sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksRUFBRSxRQUFRLENBQUMsQ0FBQztRQUN0QyxDQUFDO1FBRUQ7Ozs7O1dBS0c7UUFDSSxpQ0FBUSxHQUFmO1lBQ0ksTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLFVBQUMsT0FBTztnQkFDMUIsTUFBTSxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUM7WUFDM0IsQ0FBQyxDQUFDLENBQUM7UUFDUCxDQUFDO1FBQ0wscUJBQUM7SUFBRCxDQUFDO0lBNUVZLGtCQUFjLGlCQTRFMUI7SUFFRCx1SEFBdUg7SUFFdkg7OztPQUdHO0lBQ0g7UUF5REk7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7V0ErQkc7UUFDSCw0QkFDSSxRQUlTLEVBQ1QsT0FBNkM7WUFFN0MsY0FBYztZQUNkLElBQU0sVUFBVSxHQUFHLGNBQWMsQ0FBQyxDQUFDLENBQUMsUUFBUSxFQUFFLEVBQUUsT0FBTyxDQUFDLENBQUM7WUFDekQsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxJQUFJLEVBQUUsSUFBSSxFQUFFLFVBQVUsQ0FBQyxFQUFFLEVBQUUsVUFBVSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1lBQ3ZELElBQUksQ0FBQyxLQUFLLEdBQUcsVUFBVSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDekMsSUFBSSxDQUFDLFFBQVEsR0FBRyxVQUFVLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUUvQyxRQUFRLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxJQUFJLENBQUMsTUFBTSxFQUFFLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUN2RCxDQUFDO1FBRUQsdUVBQXVFO1FBQ3ZFLGtCQUFrQjtRQUVYLDBCQUFPLEdBQWQsVUFBa0IsS0FBMEI7WUFDeEMsTUFBTSxDQUFNLENBQUMsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDNUMsQ0FBQztRQUVNLHlCQUFNLEdBQWIsVUFBaUIsTUFBWTtZQUN6QixNQUFNLENBQU0sQ0FBQyxDQUFDLFFBQVEsRUFBRSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUM1QyxDQUFDO1FBRU0sc0JBQUcsR0FBVjtZQUFjLG1CQUF1RDtpQkFBdkQsVUFBdUQsRUFBdkQscUJBQXVELEVBQXZELElBQXVEO2dCQUF2RCw4QkFBdUQ7O1lBQ2pFLE1BQU0sQ0FBTSxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLEVBQUUsRUFBRSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsRUFBRSxFQUFFLFNBQVMsQ0FBQyxDQUFDLENBQUM7UUFDbkUsQ0FBQztRQUVNLHVCQUFJLEdBQVg7WUFBZSxtQkFBdUQ7aUJBQXZELFVBQXVELEVBQXZELHFCQUF1RCxFQUF2RCxJQUF1RDtnQkFBdkQsOEJBQXVEOztZQUNsRSxNQUFNLENBQU0sSUFBSSxDQUFDLEVBQUUsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLEVBQUUsRUFBRSxTQUFTLENBQUMsQ0FBQyxDQUFDO1FBQ3JELENBQUM7UUFFTSx1QkFBSSxHQUFYO1lBQWUsbUJBQXVEO2lCQUF2RCxVQUF1RCxFQUF2RCxxQkFBdUQsRUFBdkQsSUFBdUQ7Z0JBQXZELDhCQUF1RDs7WUFDbEUsTUFBTSxDQUFNLElBQUksQ0FBQyxFQUFFLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxFQUFFLEVBQUUsU0FBUyxDQUFDLENBQUMsQ0FBQztRQUNyRCxDQUFDO1FBQ0wseUJBQUM7SUFBRCxDQUFDO0lBaElZLHNCQUFrQixxQkFnSTlCO0lBRVksV0FBTyxHQUFHLGtCQUFrQixDQUFDO0FBQzlDLENBQUMsRUF6bEJTLEdBQUcsS0FBSCxHQUFHLFFBeWxCWjs7Ozs7Ozs7O0FDemxCRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0QsTztBQ1ZBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOzs7QUFHQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBMkIsMEJBQTBCLEVBQUU7QUFDdkQseUNBQWlDLGVBQWU7QUFDaEQ7QUFDQTtBQUNBOztBQUVBO0FBQ0EsOERBQXNELCtEQUErRDs7QUFFckg7QUFDQTs7QUFFQTtBQUNBOzs7Ozs7Ozs7QUg3REEsSUFBVSxHQUFHLENBd0JaO0FBeEJELFdBQVUsR0FBRztJQUVULHdEQUF3RDtJQUN4RCxJQUFZLGdCQUdYO0lBSEQsV0FBWSxnQkFBZ0I7UUFDeEIsMkZBQTBCO1FBQzFCLGdEQUFXLENBQUMsR0FBRyxpQ0FBNkI7SUFDaEQsQ0FBQyxFQUhXLGdCQUFnQixHQUFoQixvQkFBZ0IsS0FBaEIsb0JBQWdCLFFBRzNCO0lBRUQsdUVBQXVFO0lBQ3ZFLDRCQUE0QjtJQUU1QixxQ0FBcUM7SUFDckMsSUFBSyxlQUVKO0lBRkQsV0FBSyxlQUFlO1FBQ2hCLHFEQUFRO0lBQ1osQ0FBQyxFQUZJLGVBQWUsS0FBZixlQUFlLFFBRW5CO0lBRUQsb0NBQW9DO0lBQ3BDLHVDQUF1QztJQUN2QyxJQUFZLFdBSVg7SUFKRCxXQUFZLFdBQVc7UUFDbkIseUZBQThCO1FBQzlCLDRGQUE0RjtRQUM1Riw4REFBbUMsc0JBQWtCLENBQUMsZ0JBQWdCLENBQUMsUUFBUSxFQUFFLGVBQWUsQ0FBQyxJQUFJLEdBQUcsQ0FBQyxFQUFFLHlCQUF5QixDQUFDO0lBQ3pJLENBQUMsRUFKVyxXQUFXLEdBQVgsZUFBVyxLQUFYLGVBQVcsUUFJdEI7SUFDRCxtQ0FBbUM7QUFDdkMsQ0FBQyxFQXhCUyxHQUFHLEtBQUgsR0FBRyxRQXdCWjtBSXhCOEM7QUFDL0Msb0NBQW9DO0FBRXBDLElBQVUsR0FBRyxDQTBMWjtBQTFMRCxXQUFVLEdBQUc7SUFFVCxJQUFPLE9BQU8sR0FBRyxHQUFHLENBQUMsT0FBTyxDQUFDO0lBVzdCLElBQU0sR0FBRyxHQUFHLGFBQWEsQ0FBQztJQW9EMUI7Ozs7O09BS0c7SUFDSCx3QkFBK0IsUUFBdUI7UUFDbEQsTUFBTSxDQUFDLElBQUksT0FBTyxDQUFDLFVBQUMsT0FBTyxFQUFFLE1BQU07WUFDL0IsSUFBTSxZQUFZLEdBQWlCLFFBQVEsSUFBSSxFQUFFLENBQUM7WUFDbEQsWUFBWSxDQUFDLE9BQU8sR0FBRyxZQUFZLENBQUMsT0FBTyxJQUFJLEVBQUUsQ0FBQztZQUVsRCxJQUFJLENBQUM7Z0JBQ0QsSUFBTSxhQUFXLEdBQWlCLENBQUMsVUFBQyxTQUFzRDtvQkFDdEYsRUFBRSxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQzt3QkFDWixHQUFHLENBQUMsQ0FBQyxJQUFNLEdBQUcsSUFBSSxTQUFTLENBQUMsQ0FBQyxDQUFDOzRCQUMxQixFQUFFLENBQUMsQ0FBQyxTQUFTLENBQUMsY0FBYyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztnQ0FDaEMsR0FBRyxDQUFDLENBQUMsSUFBTSxFQUFFLElBQUksU0FBUyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztvQ0FDOUIsRUFBRSxDQUFDLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxDQUFDLGNBQWMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7d0NBQ3BDLFNBQVMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsR0FBRyx5QkFBeUIsQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztvQ0FDdkUsQ0FBQztnQ0FDTCxDQUFDOzRCQUNMLENBQUM7d0JBQ0wsQ0FBQzt3QkFDRCxZQUFZLENBQUMsT0FBTyxDQUFDLFNBQVMsR0FBUSxTQUFTLENBQUM7d0JBQ2hELE1BQU0sQ0FBQyxZQUFZLENBQUMsT0FBTyxDQUFDO29CQUNoQyxDQUFDO29CQUFDLElBQUksQ0FBQyxDQUFDO3dCQUNKLE1BQU0sQ0FBQyxZQUFZLENBQUMsT0FBTyxDQUFDO29CQUNoQyxDQUFDO2dCQUNMLENBQUMsQ0FBQyxDQUFDLFlBQVksQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO2dCQUVuQyxnRUFBUSxxQ0FBQyxzQkFBZSxDQUFDLEdBQUUsVUFBQyxPQUFZO29CQUNwQyxnRUFBUTt3QkFDSixzQkFBUzt3QkFDVCxzQkFBbUI7d0JBQ25CLHNCQUEwQjt3QkFDMUIsc0JBQTZCO3dCQUM3QixzQkFBZ0M7cUJBQ25DLEdBQUUsVUFBQyxPQUFrQixFQUNoQixPQUFZLEVBQ1osS0FBVSxFQUNWLGFBQWtCLEVBQ2xCLGdCQUFxQjt3QkFFbkIsT0FBTzs2QkFDRixHQUFHLENBQUMsT0FBTyxDQUFDOzZCQUNaLEdBQUcsQ0FBQyxLQUFLLENBQUM7NkJBQ1YsR0FBRyxDQUFDLGFBQWEsQ0FBQzs2QkFDbEIsR0FBRyxDQUFDLGdCQUFnQixDQUFDOzZCQUNyQixJQUFJLENBQUMsYUFBVyxFQUFFLFVBQUMsS0FBVSxFQUFFLENBQTJCOzRCQUN2RCxPQUFPLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxDQUFDLEVBQUU7Z0NBQ3JCLEtBQUssRUFBRSxHQUFHO2dDQUNWLFFBQVEsRUFBRSxNQUFNO2dDQUNoQixVQUFVLEVBQUUsVUFBVTtnQ0FDdEIsWUFBWSxFQUFFLFdBQVc7Z0NBQ3pCLFVBQVUsRUFBRSxhQUFhO2dDQUN6QixXQUFXLEVBQUUsY0FBYztnQ0FDM0IsY0FBYyxFQUFFLEtBQUs7Z0NBQ3JCLDRCQUE0QixFQUFFLElBQUksQ0FBRSx5REFBeUQ7NkJBQ2hHLENBQUMsQ0FBQzs0QkFDSCxrRUFBa0U7NEJBQ2xFLEVBQUUsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsU0FBUyxJQUFJLE9BQU8sQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQztnQ0FDdkQsd0JBQXdCO2dDQUN4QixJQUFNLFVBQVEsR0FBRyxPQUFPLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQztnQ0FDekMsSUFBTSxZQUFVLEdBQUcsT0FBTyxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUM7Z0NBQzdDLE9BQU8sT0FBTyxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUM7Z0NBQ2pDLE9BQU8sT0FBTyxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUM7Z0NBQy9CLE9BQU8sQ0FBQyxhQUFhLENBQUMsVUFBUSxFQUFFO29DQUM1QixnQkFBZ0I7b0NBQ2hCLE9BQU8sQ0FBQyxPQUFPLENBQUMsU0FBUyxHQUFHLFlBQVUsQ0FBQztvQ0FDdkMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxPQUFPLEdBQUcsVUFBUSxDQUFDO29DQUNuQyxHQUFHLENBQUMsSUFBSSxHQUFHLE9BQU8sQ0FBQztvQ0FDbkIsT0FBTyxFQUFFLENBQUM7Z0NBQ2QsQ0FBQyxDQUFDLENBQUM7NEJBQ1AsQ0FBQzs0QkFBQyxJQUFJLENBQUMsQ0FBQztnQ0FDSixHQUFHLENBQUMsSUFBSSxHQUFHLE9BQU8sQ0FBQztnQ0FDbkIsT0FBTyxFQUFFLENBQUM7NEJBQ2QsQ0FBQzt3QkFDTCxDQUFDLENBQUMsQ0FBQztvQkFDWCxDLDZDQUFDLGdDQUFDLENBQUM7Z0JBQ1gsQyw2Q0FBQyxnQ0FBQyxDQUFDO1lBQ1AsQ0FBQztZQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7Z0JBQ1QsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNyQixDQUFDO1FBQ0wsQ0FBQyxDQUFDLENBQUM7SUFDUCxDQUFDO0lBOUVlLGtCQUFjLGlCQThFN0I7SUFFRDs7Ozs7Ozs7T0FRRztJQUNILG1DQUFtQyxJQUFZO1FBQzNDLElBQUksSUFBVSxDQUFDO1FBQ2YsSUFBSSxLQUFnQixDQUFDO1FBQ3JCLENBQUMsQ0FBQyxJQUFJLENBQUM7WUFDSCxHQUFHLEVBQUUsR0FBRyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUM7WUFDcEIsTUFBTSxFQUFFLEtBQUs7WUFDYixLQUFLLEVBQUUsS0FBSztZQUNaLFFBQVEsRUFBRSxNQUFNO1lBQ2hCLE9BQU8sRUFBRSxVQUFDLElBQVU7Z0JBQ2hCLElBQUksR0FBRyxJQUFJLENBQUM7WUFDaEIsQ0FBQztZQUNELEtBQUssRUFBRSxVQUFDLEdBQWMsRUFBRSxNQUFjO2dCQUNsQyxLQUFLLEdBQUcsaUJBQWEsQ0FDakIsZUFBVyxDQUFDLGdDQUFnQyxFQUM1QyxHQUFHLEVBQ0gsK0JBQStCLEdBQUcsTUFBTSxDQUMzQyxDQUFDO1lBQ04sQ0FBQztTQUNKLENBQUMsQ0FBQztRQUVILEVBQUUsQ0FBQyxDQUFDLElBQUksSUFBSSxLQUFLLENBQUMsQ0FBQyxDQUFDO1lBQ2hCLE1BQU0sS0FBSyxDQUFDO1FBQ2hCLENBQUM7UUFFRCxNQUFNLENBQUMsSUFBSSxDQUFDO0lBQ2hCLENBQUM7QUFDTCxDQUFDLEVBMUxTLEdBQUcsS0FBSCxHQUFHLFFBMExaOzs7Ozs7Ozs7QUM3TEQsK0M7Ozs7OztBQ0FBLCtDOzs7Ozs7QUNBQSwrQzs7Ozs7O0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLHFCQUFxQjs7QUFFdEIsbURBQW1ELGdCQUFnQixzQkFBc0IsT0FBTywyQkFBMkIsMEJBQTBCLHlEQUF5RCwyQkFBMkIsRUFBRSxFQUFFLEVBQUUsZUFBZTs7QUFFOVA7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7O0FBR0EsdUJBQXVCOztBQUV2QjtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsc0JBQXNCO0FBQ3RCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLHdCQUF3QixNQUFNLG9CQUFvQjtBQUNsRDs7QUFFQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsS0FBSztBQUNMO0FBQ0EsS0FBSztBQUNMO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUEsc0JBQXNCO0FBQ3RCLDZCQUE2Qjs7QUFFN0I7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7QUFDQSx3QkFBd0IsZUFBZTs7QUFFdkM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBLENBQUMsSTs7Ozs7O0FDL0hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxxQkFBcUI7O0FBRXRCO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTs7Ozs7Ozs7Ozs7O0FBWUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7OztBQVVBO0FBQ0EsaUJBQWlCLHNCQUFzQjtBQUN2Qzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7OztBQUlBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7Ozs7Ozs7Ozs7OztBQVlBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7Ozs7OztBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLCtDQUErQywrQkFBK0I7QUFDOUU7O0FBRUE7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLENBQUM7Ozs7Ozs7Ozs7Ozs7O0FBY0Q7QUFDQTtBQUNBLDZDQUE2QyxnQkFBZ0I7O0FBRTdEO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsbUVBQW1FLGFBQWE7QUFDaEY7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0Esc0VBQXNFLGVBQWU7QUFDckY7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0Esc0VBQXNFLGVBQWU7QUFDckY7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0Esc0VBQXNFLGVBQWU7QUFDckY7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSw2Q0FBNkMsK0NBQStDO0FBQzVGOztBQUVBO0FBQ0EsQ0FBQzs7QUFFRDs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBLHNGQUFzRixhQUFhO0FBQ25HO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxPQUFPO0FBQ1A7QUFDQTs7QUFFQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxpQ0FBaUMsRUFBRTtBQUNuQzs7QUFFQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFlBQVk7QUFDWixZQUFZO0FBQ1osY0FBYztBQUNkLGFBQWE7QUFDYixjQUFjO0FBQ2Q7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSx1RkFBdUY7QUFDdkY7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLHVGQUF1Rjs7QUFFdkY7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSx3RkFBd0YsZUFBZTtBQUN2RztBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsS0FBSztBQUNMLHdCQUF3QjtBQUN4Qjs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLGtFQUFrRTs7QUFFbEU7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxDQUFDOztBQUVEOztBQUVBLGdCQUFnQjs7QUFFaEI7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSx1RkFBdUYsa0JBQWtCOztBQUV6RztBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLDZEQUE2RDs7QUFFN0Q7QUFDQTtBQUNBO0FBQ0Esb0ZBQW9GLFlBQVksb0NBQW9DO0FBQ3BJO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIseUJBQXlCO0FBQ2xEO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxTQUFTO0FBQ1Q7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSxpRUFBaUUsWUFBWSwyQkFBMkIsc0RBQXNEOztBQUU5SjtBQUNBO0FBQ0EsdUVBQXVFO0FBQ3ZFOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULE9BQU87QUFDUCxLQUFLOztBQUVMLFlBQVk7QUFDWjs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsT0FBTztBQUNQO0FBQ0E7O0FBRUE7QUFDQSxPQUFPO0FBQ1A7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTs7QUFFQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBLGFBQWEsc0pBQXNKLEdBQUcsb2FBQW9hLEdBQUcsZ0tBQWdLLEdBQUcseUVBQXlFLEdBQUcsaURBQWlELEdBQUcsMkNBQTJDLEdBQUcsNENBQTRDLEdBQUcsd0NBQXdDLEdBQUcsa0NBQWtDLEdBQUcsNkNBQTZDLEdBQUcsMENBQTBDLEdBQUcsbUNBQW1DLEdBQUcsbUNBQW1DLEdBQUcseUNBQXlDLEdBQUcsdUNBQXVDLEdBQUcsc0NBQXNDLEdBQUcsbUNBQW1DLEdBQUcsdUNBQXVDLEdBQUcsMkNBQTJDLEdBQUcsa0NBQWtDLEdBQUcsdUNBQXVDLEdBQUcseUNBQXlDOztBQUUzakQ7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0EsaURBQWlEOztBQUVqRDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTs7O0FBR0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseURBQXlEOztBQUV6RDs7QUFFQTs7QUFFQSx1RkFBdUY7QUFDdkYsdUZBQXVGOztBQUV2Rjs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBLG1DQUFtQztBQUNuQyw2Q0FBNkM7O0FBRTdDLGlFQUFpRSxZQUFZLGlCQUFpQixFQUFFO0FBQ2hHO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxpQ0FBaUM7QUFDakMsU0FBUztBQUNUO0FBQ0EsU0FBUztBQUNUO0FBQ0EsU0FBUztBQUNULGlDQUFpQzs7QUFFakM7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPOztBQUVQO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQTtBQUNBLE9BQU87QUFDUDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUEsNkNBQTZDLEVBQUU7O0FBRS9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTs7O0FBR0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2Qjs7QUFFN0I7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsNkNBQTZDO0FBQzdDLGtCQUFrQjtBQUNsQjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCOztBQUU3QjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWCxTQUFTO0FBQ1QsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsT0FBTztBQUNQO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7OztBQUdBO0FBQ0E7O0FBRUE7QUFDQSw2QkFBNkI7O0FBRTdCOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOERBQThEO0FBQzlEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsaUJBQWlCO0FBQ2pCLGlCQUFpQjtBQUNqQjtBQUNBLDJCQUEyQjtBQUMzQiwyQkFBMkI7QUFDM0I7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjs7QUFFckI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCOztBQUU5QjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxpREFBaUQsb0pBQW9KO0FBQ3JNOztBQUVBO0FBQ0E7QUFDQTtBQUNBLDBGQUEwRixhQUFhO0FBQ3ZHO0FBQ0E7O0FBRUE7QUFDQSxPQUFPOztBQUVQO0FBQ0E7QUFDQSxPQUFPOztBQUVQO0FBQ0E7QUFDQTtBQUNBLDhGQUE4RixlQUFlO0FBQzdHO0FBQ0E7O0FBRUE7QUFDQSxPQUFPOztBQUVQO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLDhGQUE4RixlQUFlO0FBQzdHO0FBQ0E7O0FBRUE7QUFDQSxPQUFPOztBQUVQO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsT0FBTztBQUNQOztBQUVBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBOztBQUVBOzs7QUFHQTtBQUNBOztBQUVBOztBQUVBO0FBQ0EsdUZBQXVGOztBQUV2Rjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsT0FBTztBQUNQO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUOztBQUVBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLE9BQU87QUFDUDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7O0FBRUE7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLDRGQUE0RixlQUFlO0FBQzNHO0FBQ0E7O0FBRUEsK0JBQStCO0FBQy9CO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztB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QUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLElBQUk7QUFDSjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsRUFBRTtBQUNGOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjs7Ozs7O0FBTUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osRUFBRTs7QUFFRjtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDLHlCQUF5QjtBQUMxRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxjQUFjLGdCQUFnQjtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsQ0FBQzs7QUFFRDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxlQUFlOztBQUVmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZ0RBQWdELGdCQUFnQjtBQUNoRSxJQUFJOztBQUVKO0FBQ0E7QUFDQSxJQUFJO0FBQ0osR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGVBQWUsV0FBVztBQUMxQjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QjtBQUN2QjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxDQUFDOztBQUVEO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLEVBQUU7QUFDRixDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsMkJBQTJCO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUI7QUFDdkI7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBNEM7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSCxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNB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QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7O0FBRUEsQ0FBQzs7O0FBR0Q7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBLGdDQUFnQztBQUNoQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0I7O0FBRS9CO0FBQ0EsSUFBSTtBQUNKOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUYsQ0FBQzs7O0FBR0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsY0FBYzs7QUFFZDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNB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Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0I7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsQ0FBQzs7O0FBR0Q7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsSUFBSTtBQUNKLEdBQUc7O0FBRUg7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7Ozs7QUFJRDtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQSx3Q0FBd0M7QUFDeEMsSUFBSTs7QUFFSjtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUEsZ0JBQWdCLHFCQUFxQjtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFFQUFxRSxXQUFXLEVBQUU7QUFDbEYsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsdUNBQXVDO0FBQ3ZDOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRztBQUNILENBQUM7Ozs7QUFJRDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7O0FBRUE7O0FBRUEsZUFBZSxZQUFZO0FBQzNCOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRixDQUFDOzs7O0FBSUQ7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxHQUFHOztBQUVIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBOztBQUVBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EseUNBQXlDOztBQUV6QztBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQztBQUNyQztBQUNBO0FBQ0EsSUFBSTtBQUNKLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0M7QUFDeEM7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBLElBQUk7QUFDSjtBQUNBLEVBQUU7QUFDRixDQUFDOzs7O0FBSUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSwyQ0FBMkMsZUFBZTtBQUMxRCxDQUFDOzs7QUFHRDtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUI7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLEdBQUc7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsNkNBQTZDLFNBQVM7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBLGVBQWU7QUFDZjs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0Esc0NBQXNDO0FBQ3RDOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUEsWUFBWSw4QkFBOEI7QUFDMUM7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQSxnQkFBZ0IsU0FBUztBQUN6QjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBLENBQUM7OztBQUdEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxpREFBaUQ7QUFDakQ7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsSUFBSTtBQUNKLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxRUFBcUUscUJBQXFCO0FBQzFGLEtBQUs7QUFDTCxJQUFJO0FBQ0osR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsZ0VBQWdFLHlEQUF5RDtBQUN6SCxtRUFBbUUseURBQXlEO0FBQzVIO0FBQ0E7QUFDQTs7QUFFQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRixDQUFDOzs7QUFHRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUEsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7O0FBR0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IseUJBQXlCO0FBQzNDOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQjtBQUNuQjtBQUNBOztBQUVBLGlEQUFpRDtBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxDQUFDOzs7OztBQUtEOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQiw4Q0FBOEM7O0FBRS9EOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBLENBQUM7OztBQUdEO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsRUFBRTs7QUFFRjtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0EsaUVBQWlFLGtCQUFrQjtBQUNuRixFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDLHVDQUF1QztBQUMvRSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNELENBQUM7O0FBRUQ7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLG9DQUFvQzs7QUFFL0Q7QUFDQSxhQUFhLG9DQUFvQzs7QUFFakQ7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTs7QUFFQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLDJCQUEyQixxQ0FBcUM7QUFDaEUsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIOztBQUVBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSx1QkFBdUIsZ0VBQWdFO0FBQ3ZGO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixhQUFhO0FBQ3JDLEdBQUc7O0FBRUg7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsSUFBSTtBQUNKLEdBQUc7O0FBRUg7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsNkJBQTZCLEtBQUs7O0FBRTFDO0FBQ0EsMkJBQTJCOztBQUUzQjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsSUFBSTtBQUNKLEdBQUc7O0FBRUg7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixHQUFHOztBQUVIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLDhCQUE4QjtBQUM5Qjs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSx1Q0FBdUMsV0FBVztBQUNsRDs7QUFFQTtBQUNBOztBQUVBO0FBQ0EsZ0JBQWdCLHNCQUFzQjs7QUFFdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBLENBQUM7O0FBRUQ7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLHVCQUF1QiwyREFBMkQ7QUFDbEY7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FB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QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsRUFBRTs7QUFFRixDQUFDOzs7QUFHRDs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRixDQUFDOzs7QUFHRDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUEsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUEsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUEsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUEsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBLENBQUM7O0FBRUQ7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBLENBQUM7O0FBRUQ7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUEsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUEsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUEsQ0FBQzs7O0FBR0Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEVBQUU7O0FBRUY7O0FBRUEsQ0FBQzs7QUFFRDs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLENBQUM7O0FBRUQsQ0FBQzs7QUFFRDs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsaURBQWlEO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsbUJBQW1CLGlCQUFpQjtBQUNwQzs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRCxDQUFDOztBQUVEOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLHdCQUF3Qjs7QUFFeEI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLENBQUM7O0FBRUQ7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxpQkFBaUIsZ0JBQWdCO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxDQUFDOztBQUVEOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxtQkFBbUIsZ0RBQWdEO0FBQ25FLEVBQUU7O0FBRUY7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTs7QUFFQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRCxDQUFDOztBQUVEOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLENBQUM7O0FBRUQ7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQSxlQUFlLDZCQUE2QjtBQUM1QztBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQSxDQUFDOztBQUVEOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLDBCQUEwQjs7QUFFcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsQ0FBQzs7QUFFRCxDQUFDOztBQUVEOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQSxjQUFjLFNBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBLG1DQUFtQyxhQUFhO0FBQ2hEO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTs7QUFFQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBOztBQUVBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLENBQUM7O0FBRUQsQ0FBQzs7QUFFRDs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQSxjQUFjLGlCQUFpQjtBQUMvQjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVELENBQUM7O0FBRUQ7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLGlDQUFpQyxXQUFXO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQsQ0FBQzs7QUFFRDs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsQ0FBQzs7QUFFRDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSCxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBOztBQUVBLENBQUM7O0FBRUQsQ0FBQzs7QUFFRDs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLHVCQUF1QjtBQUM1QztBQUNBO0FBQ0EsQ0FBQzs7QUFFRCxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSw2QkFBNkI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRixDQUFDOztBQUVEOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUgsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsRUFBRTs7QUFFRjtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRCxDQUFDOztBQUVEOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7O0FBRUEscURBQXFELFlBQVk7QUFDakU7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBLDhDQUE4QyxrQkFBa0I7QUFDaEU7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBOztBQUVBO0FBQ0E7QUFDQSx1QkFBdUIsdUNBQXVDO0FBQzlELHFDQUFxQyxnQ0FBZ0M7O0FBRXJFOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIOztBQUVBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0EsNEZBQTRGO0FBQzVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUYsdUNBQXVDO0FBQ3ZDO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsK0NBQStDO0FBQy9DOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBLGdEQUFnRDtBQUNoRDtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSxDQUFDOztBQUVELENBQUM7O0FBRUQ7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDs7QUFFQSwwQkFBMEIsOEJBQThCO0FBQ3hELCtDQUErQyw0QkFBNEI7QUFDM0U7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsRUFBRTs7QUFFRjtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBOztBQUVBO0FBQ0E7QUFDQSw0Q0FBNEM7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVELENBQUM7O0FBRUQ7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0EsSUFBSTtBQUNKLEVBQUU7O0FBRUY7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxFQUFFOztBQUVGO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsQ0FBQzs7QUFFRCxDQUFDOztBQUVEO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLElBQUk7QUFDSixHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxFQUFFOztBQUVGLENBQUM7O0FBRUQ7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLElBQUk7O0FBRUo7O0FBRUE7O0FBRUEsR0FBRzs7QUFFSDs7QUFFQTtBQUNBOztBQUVBLEdBQUc7O0FBRUg7O0FBRUE7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxJQUFJOztBQUVKLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxFQUFFOztBQUVGLENBQUM7O0FBRUQ7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsRUFBRTtBQUNGLENBQUM7O0FBRUQ7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSCxFQUFFOztBQUVGO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsR0FBRzs7QUFFSDs7QUFFQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBLEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVILEVBQUU7O0FBRUY7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRztBQUNILEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxJQUFJO0FBQ0o7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSixpQ0FBaUMseUJBQXlCO0FBQzFELHNCQUFzQjtBQUN0Qjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRCxDQUFDOztBQUVEOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQSxDQUFDOzs7QUFHRDs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSw4QkFBOEIsZ0NBQWdDO0FBQzlEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILDRCQUE0QixzQ0FBc0M7QUFDbEUsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQ0FBK0M7QUFDL0M7QUFDQTtBQUNBLElBQUk7QUFDSjs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1Qix1QkFBdUI7QUFDOUM7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBLGFBQWEsNkJBQTZCO0FBQzFDOztBQUVBO0FBQ0E7O0FBRUEscUNBQXFDLGlDQUFpQyxFQUFFOztBQUV4RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLFVBQVU7QUFDVixFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLFVBQVU7QUFDVixFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBLGdDQUFnQztBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EscUJBQXFCLGdEQUFnRDtBQUNyRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQSwyQkFBMkIsaUJBQWlCOztBQUU1QztBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRCxDQUFDOztBQUVEO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0EsSUFBSSxxQ0FBcUM7QUFDekMsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLCtCQUErQjs7QUFFekQ7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLDRCQUE0QixrQ0FBa0M7O0FBRTlEO0FBQ0EsMkJBQTJCLGtDQUFrQzs7QUFFN0Q7QUFDQTtBQUNBLGdDQUFnQyxtQ0FBbUM7QUFDbkU7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsSUFBSTtBQUNKLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQSxzQkFBc0Isb0RBQW9EO0FBQzFFO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsY0FBYyxnQkFBZ0I7QUFDOUI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osRUFBRTs7QUFFRjs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVELENBQUM7OztBQUdEOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7O0FBRUE7QUFDQSxFQUFFO0FBQ0Y7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DO0FBQ3BDO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBOztBQUVBO0FBQ0EsZ0JBQWdCLHVCQUF1Qjs7QUFFdkM7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsZ0JBQWdCLG9CQUFvQjtBQUNwQztBQUNBOztBQUVBO0FBQ0EsSUFBSSw2Q0FBNkM7O0FBRWpEO0FBQ0E7QUFDQTs7QUFFQSxpQ0FBaUM7O0FBRWpDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDOztBQUU3QztBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQSxlQUFlOztBQUVmO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRCxDQUFDOzs7QUFHRDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBLEVBQUU7O0FBRUY7O0FBRUE7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQsQ0FBQzs7QUFFRDs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxvREFBb0QseUJBQXlCO0FBQzdFLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSwyREFBMkQ7O0FBRTNEO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0Esb0RBQW9EO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEVBQUU7O0FBRUYsQ0FBQzs7QUFFRDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBLDRCQUE0Qix5Q0FBeUM7QUFDckU7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBLEdBQUc7O0FBRUg7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLG1DQUFtQyxRQUFRO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUixPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7O0FBRUg7QUFDQTtBQUNBLHFEQUFxRCx5QkFBeUI7QUFDOUU7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxFQUFFO0FBQ0YsQ0FBQzs7QUFFRDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQjtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0EsNkRBQTZEO0FBQzdEO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGLENBQUM7OztBQUdEOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsU0FBUztBQUNUOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkNBQTJDOztBQUUzQztBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsT0FBTzs7QUFFUDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsd0NBQXdDO0FBQ3JELGdCQUFnQix3Q0FBd0M7QUFDeEQ7QUFDQTs7QUFFQTs7QUFFQSxjQUFjLHVDQUF1QztBQUNyRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsdUJBQXVCO0FBQ3ZCLGtCQUFrQjtBQUNsQixvQkFBb0I7O0FBRXBCO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsU0FBUyxvSUFBb0k7QUFDN0ksU0FBUyx5SkFBeUo7QUFDbEssU0FBUywwSkFBMEo7QUFDbkssU0FBUztBQUNUOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLENBQUM7O0FBRUQsQ0FBQzs7O0FBR0Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsRUFBRTs7QUFFRjtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRztBQUNILEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBLDBCQUEwQixzQ0FBc0M7QUFDaEUsRUFBRTs7QUFFRjtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVILEVBQUU7O0FBRUY7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLElBQUk7QUFDSjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxJQUFJO0FBQ0o7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVELENBQUM7O0FBRUQ7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQSxFQUFFOztBQUVGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBLEVBQUU7O0FBRUY7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQSxnQkFBZ0IsY0FBYztBQUM5QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxJQUFJO0FBQ0osR0FBRztBQUNIO0FBQ0EsQ0FBQzs7QUFFRCxDQUFDOzs7QUFHRDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsR0FBRztBQUNILEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTzs7QUFFUDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsMkNBQTJDLGFBQWE7QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSCxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQsQ0FBQzs7QUFFRDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsRUFBRTs7QUFFRjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTs7QUFFQTtBQUNBLEdBQUc7QUFDSCxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQsQ0FBQzs7QUFFRDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsK0NBQStDLGdCQUFnQjtBQUMvRDtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLFlBQVk7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0Esa0JBQWtCLGVBQWU7QUFDakM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSCxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsNENBQTRDLFdBQVc7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVELENBQUM7O0FBRUQ7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxHQUFHOztBQUVILDRDQUE0QyxXQUFXO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVELENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsaURBQWlEO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0EsZ0RBQWdELGFBQWEsRUFBRTtBQUMvRCxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsRUFBRTs7QUFFRjtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLHNCQUFzQix5QkFBeUI7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKOztBQUVBO0FBQ0E7QUFDQSx3QkFBd0IseUJBQXlCO0FBQ2pELDBCQUEwQiwyQkFBMkI7O0FBRXJEO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxFQUFFOztBQUVGO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxHQUFHOztBQUVIOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLElBQUk7QUFDSjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTixLQUFLO0FBQ0w7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQix3Q0FBd0M7QUFDeEQ7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVELENBQUM7O0FBRUQ7O0FBRUEsQ0FBQzs7QUFFRDs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRixDQUFDOztBQUVEO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtB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QUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUzs7QUFFVDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUOzs7QUFHQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVB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IGNvbnN0IFRBRyA9IFwiW0NEUF0gXCI7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZW4gQWNjZXNzb3IgZm9yIHN5c3RlbSBnbG9iYWwgb2JqZWN0Ljxicj5cclxuICAgICAqICAgICBJdCdsbCBiZSB1c3VhbGx5IGEgYHdpbmRvd2Agb2JqZWN0LlxyXG4gICAgICogQGphIOOCt+OCueODhuODoOOBriBnbG9iYWwg44Kq44OW44K444Kn44Kv44OI44G444Gu44Ki44Kv44K744K5PGJyPlxyXG4gICAgICogICAgIOmAmuW4uOOBryBgd2luZG93YCDjgqrjg5bjgrjjgqfjgq/jg4jjgajjgarjgotcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGNvbnN0IGdsb2JhbDogYW55ID0gRnVuY3Rpb24oXCJyZXR1cm4gdGhpc1wiKSgpO1xyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBlbiBBY2NzZXNzb3IgZm9yIFdlYiByb290IGxvY2F0aW9uIDxicj5cclxuICAgICAqICAgICBPbmx5IHRoZSBicm93c2VyIGVudmlyb25tZW50IHdpbGwgYmUgYW4gYWxsb2NhdGluZyBwbGFjZSBpbiBpbmRleC5odG1sLCBhbmQgYmVjb21lcyBlZmZlY3RpdmUuXHJcbiAgICAgKiBAamEgV2ViIHJvb3QgbG9jYXRpb24g44G444Gu44Ki44Kv44K744K5IDxicj5cclxuICAgICAqICAgICBpbmRleC5odG1sIOOBrumFjee9ruWgtOaJgOOBqOOBquOCiuOAgeODluODqeOCpuOCtueSsOWig+OBruOBv+acieWKueOBqOOBquOCiy5cclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGNvbnN0IHdlYlJvb3Q6IHN0cmluZyA9ICgoKSA9PiB7XHJcbiAgICAgICAgaWYgKGdsb2JhbC5sb2NhdGlvbikge1xyXG4gICAgICAgICAgICBsZXQgYmFzZVVybCA9IC8oLitcXC8pW14vXSojW14vXSsvLmV4ZWMoZ2xvYmFsLmxvY2F0aW9uLmhyZWYpO1xyXG4gICAgICAgICAgICBpZiAoIWJhc2VVcmwpIHtcclxuICAgICAgICAgICAgICAgIGJhc2VVcmwgPSAvKC4rXFwvKS8uZXhlYyhnbG9iYWwubG9jYXRpb24uaHJlZik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGJhc2VVcmxbMV07XHJcbiAgICAgICAgfVxyXG4gICAgfSkoKTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBlbiBDb252ZXJ0ZXIgZnJvbSByZWxhdGl2ZSBwYXRoIHRvIGFic29sdXRlIHVybCBzdHJpbmcuIDxicj5cclxuICAgICAqICAgICBJZiB5b3Ugd2FudCB0byBhY2Nlc3MgdG8gQXNzZXRzIGFuZCBpbiBzcGl0ZSBvZiB0aGUgc2NyaXB0IGxvY2F0aW9uLCB0aGUgZnVuY3Rpb24gaXMgYXZhaWxhYmxlLlxyXG4gICAgICogQGphIOebuOWvviBwYXRoIOOCkue1tuWvviBVUkwg44Gr5aSJ5o+bIDxicj5cclxuICAgICAqICAgICBqcyDjga7phY3nva7jgavkvp3lrZjjgZnjgovjgZPjgajjgarjgY8gYGFzc2V0c2Ag44Ki44Kv44K744K544GX44Gf44GE44Go44GN44Gr5L2/55So44GZ44KLLlxyXG4gICAgICpcclxuICAgICAqIEBzZWUgaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMjE4ODIxOC9yZWxhdGl2ZS1wYXRocy1pbi1qYXZhc2NyaXB0LWluLWFuLWV4dGVybmFsLWZpbGVcclxuICAgICAqXHJcbiAgICAgKiBAZXhhbXBsZSA8YnI+XHJcbiAgICAgKlxyXG4gICAgICogYGBgdHNcclxuICAgICAqICBjb25zb2xlLmxvZyh0b1VybChcIi9yZXMvZGF0YS9jb2xsZWN0aW9uLmpzb25cIikpO1xyXG4gICAgICogIC8vIFwiaHR0cDovL2xvY2FsaG9zdDo4MDgwL2FwcC9yZXMvZGF0YS9jb2xsZWN0aW9uLmpzb25cIlxyXG4gICAgICogYGBgXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHBhdGhcclxuICAgICAqICAtIGBlbmAgc2V0IHJlbGF0aXZlIHBhdGggZnJvbSBbW3dlYlJvb3RdXS5cclxuICAgICAqICAtIGBqYWAgW1t3ZWJSb290XV0g44GL44KJ44Gu55u45a++44OR44K544KS5oyH5a6aXHJcbiAgICAgKiBAcmV0dXJucyB1cmwgc3RyaW5nXHJcbiAgICAgKiAgLSBgZW5gIHNldCByZWxhdGl2ZSBwYXRoIGZyb20gW1t3ZWJSb290XV0uXHJcbiAgICAgKiAgLSBgamFgIFtbd2ViUm9vdF1dIOOBi+OCieOBruebuOWvvuODkeOCueOCkuaMh+WumlxyXG4gICAgICovXHJcbiAgICBleHBvcnQgZnVuY3Rpb24gdG9VcmwocGF0aDogc3RyaW5nKTogc3RyaW5nIHtcclxuICAgICAgICBjb25zdCByb290ID0gd2ViUm9vdCB8fCBcIlwiO1xyXG4gICAgICAgIGlmIChudWxsICE9IHBhdGggJiYgbnVsbCAhPSBwYXRoWzBdKSB7XHJcbiAgICAgICAgICAgIGlmIChcIi9cIiA9PT0gcGF0aFswXSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJvb3QgKyBwYXRoLnNsaWNlKDEpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJvb3QgKyBwYXRoO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJvb3Q7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGVuIEFjY2Vzc29yIGZvciBnbG9iYWwgQ29uZmlnIG9iamVjdC5cclxuICAgICAqIEBqYSBDb25maWcg44Kq44OW44K444Kn44Kv44OI44G444Gu44Ki44Kv44K744K5XHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBjb25zdCBDb25maWc6IGFueSA9IENEUC5Db25maWcgfHwgZ2xvYmFsLkNvbmZpZyB8fCB7fTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBlbiBPcHRpb25zIGludGVyZmFjZSBmb3IgdGhpcyBtb2R1bGUgaW5pdGlhbGl6ZS5cclxuICAgICAqIEBqYSDliJ3mnJ/ljJbjgqrjg5fjgrfjg6fjg7PjgqTjg7Pjgr/jg7zjg5XjgqfjgqTjgrlcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBDb3JlSW5pdE9wdGlvbnMge1xyXG4gICAgICAgIHN1Y2Nlc3M/OiAoKSA9PiB2b2lkO1xyXG4gICAgICAgIGZhaWw/OiAoZXJyb3I/OiBhbnkpID0+IHZvaWQ7XHJcbiAgICAgICAgW2tleTogc3RyaW5nXTogYW55O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGVuIEluaXRpYWxpemUgZnVuY3Rpb24gZm9yIGBjZHAtY29yZWAuIDxicj5cclxuICAgICAqICAgICBUaGlzIGZ1bmN0aW9uIGFwcGxpZXMgcGF0Y2ggdG8gdGhlIHJ1biB0aW1lIGVudmlyb25tZW50LlxyXG4gICAgICogQGphIGBjZHAtY29yZWAg44Gu5Yid5pyf5YyW6Zai5pWwPGJyPlxyXG4gICAgICogICAgIOeSsOWig+OBruW3ruWIhuOCkuWQuOWPjuOBmeOCiyBwYXRjaCDjgpLpgannlKjjgZnjgosuXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBmdW5jdGlvbiBpbml0aWFsaXplKG9wdGlvbnM/OiBDb3JlSW5pdE9wdGlvbnMpOiB2b2lkIHtcclxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIFBhdGNoLmFwcGx5KCk7XHJcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucyAmJiB0eXBlb2Ygb3B0aW9ucy5zdWNjZXNzID09PSBcImZ1bmN0aW9uXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zLnN1Y2Nlc3MoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNhdXNlID0gZW5zdXJlRXJyb3JJbmZvKGVycm9yKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGVycm9ySW5mbyA9IG1ha2VFcnJvckluZm8oXHJcbiAgICAgICAgICAgICAgICAgICAgUkVTVUxUX0NPREUuRVJST1JfQ0RQX0lOSVRJQUxJWkVfRkFJTEVELFxyXG4gICAgICAgICAgICAgICAgICAgIFRBRyxcclxuICAgICAgICAgICAgICAgICAgICBjYXVzZS5tZXNzYWdlLFxyXG4gICAgICAgICAgICAgICAgICAgIGNhdXNlXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvckluZm8ubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucyAmJiB0eXBlb2Ygb3B0aW9ucy5mYWlsID09PSBcImZ1bmN0aW9uXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmZhaWwoZXJyb3JJbmZvKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcblxyXG5kZWNsYXJlIG1vZHVsZSBcImNkcC5jb3JlXCIge1xyXG4gICAgZXhwb3J0ID0gQ0RQO1xyXG59XHJcbiIsIm5hbWVzcGFjZSBDRFAge1xyXG5cclxuICAgIGNvbnN0IFRBRzogc3RyaW5nID0gXCJbQ0RQLlBhdGNoXSBcIjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBlbiBVdGlsaXR5IGNsYXNzIGZvciBhcHBsaW5nIHRoZSBwYXRjaCB0byB0aGUgcnVuIHRpbWUgZW52aXJvbm1lbnQuXHJcbiAgICAgKiBAamEg5a6f6KGM55Kw5aKD55SoIFBhdGNoIOmBqeeUqOODpuODvOODhuOCo+ODquODhuOCo+OCr+ODqeOCuVxyXG4gICAgICpcclxuICAgICAqIEBpbnRlcm5hbFxyXG4gICAgICovXHJcbiAgICBleHBvcnQgY2xhc3MgUGF0Y2gge1xyXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAgICAgLy8gcHVibGljIHN0YXRpYyBtZXRob2RzOlxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAZW4gQXBwbHkgdGhlIHBhdGNoXHJcbiAgICAgICAgICogQGphIOODkeODg+ODgeOBrumBqeeUqFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQGludGVybmFsXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBhcHBseSgpOiB2b2lkIHtcclxuICAgICAgICAgICAgUGF0Y2guY29uc29sZVBhdGNoKCk7XHJcbiAgICAgICAgICAgIFBhdGNoLm5vZGVQYXRjaCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgICAgICAvLyBwcml2YXRlIHN0YXRpYyBtZXRob2RzOlxyXG5cclxuICAgICAgICAvLyBjb25zb2xlIOeUqCBwYXRjaFxyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIGNvbnNvbGVQYXRjaCgpOiB2b2lkIHtcclxuICAgICAgICAgICAgaWYgKG51bGwgPT0gZ2xvYmFsLmNvbnNvbGUgfHwgbnVsbCA9PSBnbG9iYWwuY29uc29sZS5lcnJvcikge1xyXG4gICAgICAgICAgICAgICAgZ2xvYmFsLmNvbnNvbGUgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY291bnQ6ICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uICgpIHsgLyogZHVtbXkgKi8gfSxcclxuICAgICAgICAgICAgICAgICAgICBncm91cEVuZDogICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKCkgeyAvKiBkdW1teSAqLyB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHRpbWU6ICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoKSB7IC8qIGR1bW15ICovIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgdGltZUVuZDogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uICgpIHsgLyogZHVtbXkgKi8gfSxcclxuICAgICAgICAgICAgICAgICAgICB0cmFjZTogICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKCkgeyAvKiBkdW1teSAqLyB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGdyb3VwOiAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoKSB7IC8qIGR1bW15ICovIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgZGlyeG1sOiAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uICgpIHsgLyogZHVtbXkgKi8gfSxcclxuICAgICAgICAgICAgICAgICAgICBkZWJ1ZzogICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKCkgeyAvKiBkdW1teSAqLyB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGdyb3VwQ29sbGFwc2VkOiAgICAgICAgICAgICBmdW5jdGlvbiAoKSB7IC8qIGR1bW15ICovIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0OiAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uICgpIHsgLyogZHVtbXkgKi8gfSxcclxuICAgICAgICAgICAgICAgICAgICBpbmZvOiAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKCkgeyAvKiBkdW1teSAqLyB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHByb2ZpbGU6ICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoKSB7IC8qIGR1bW15ICovIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgYXNzZXJ0OiAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uICgpIHsgLyogZHVtbXkgKi8gfSxcclxuICAgICAgICAgICAgICAgICAgICBtc0lzSW5kZXBlbmRlbnRseUNvbXBvc2VkOiAgZnVuY3Rpb24gKCkgeyAvKiBkdW1teSAqLyB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGNsZWFyOiAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoKSB7IC8qIGR1bW15ICovIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgZGlyOiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uICgpIHsgLyogZHVtbXkgKi8gfSxcclxuICAgICAgICAgICAgICAgICAgICB3YXJuOiAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKCkgeyAvKiBkdW1teSAqLyB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoKSB7IC8qIGR1bW15ICovIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgbG9nOiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uICgpIHsgLyogZHVtbXkgKi8gfSxcclxuICAgICAgICAgICAgICAgICAgICBwcm9maWxlRW5kOiAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKCkgeyAvKiBkdW1teSAqLyB9XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBXaW5SVCDnlKggcGF0Y2hcclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBub2RlUGF0Y2goKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGlmIChcIm9iamVjdFwiID09PSB0eXBlb2YgTVNBcHApIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IF9NU0FwcDogYW55ID0gTVNBcHA7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3Qgb3JpZ2luYWxBcHBlbmRDaGlsZCA9IE5vZGUucHJvdG90eXBlLmFwcGVuZENoaWxkO1xyXG4gICAgICAgICAgICAgICAgTm9kZS5wcm90b3R5cGUuYXBwZW5kQ2hpbGQgPSBmdW5jdGlvbiAobm9kZTogYW55KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9NU0FwcC5leGVjVW5zYWZlTG9jYWxGdW5jdGlvbihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvcmlnaW5hbEFwcGVuZENoaWxkLmNhbGwoc2VsZiwgbm9kZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IG9yaWdpbmFsSW5zZXJ0QmVmb3JlID0gTm9kZS5wcm90b3R5cGUuaW5zZXJ0QmVmb3JlO1xyXG4gICAgICAgICAgICAgICAgTm9kZS5wcm90b3R5cGUuaW5zZXJ0QmVmb3JlID0gZnVuY3Rpb24gKG5ld0VsZW1lbnQ6IGFueSwgcmVmZXJlbmNlRWxlbWVudDogTm9kZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfTVNBcHAuZXhlY1Vuc2FmZUxvY2FsRnVuY3Rpb24oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gb3JpZ2luYWxJbnNlcnRCZWZvcmUuY2FsbChzZWxmLCBuZXdFbGVtZW50LCByZWZlcmVuY2VFbGVtZW50KTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwibmFtZXNwYWNlIENEUCB7XHJcblxyXG4gICAgLy8gQGludGVybmFsIEVycm9yIGNvZGUgb2Zmc2V0IGRlZmluaXRpb24gb2YgYGNkcC1pMThuYC5cclxuICAgIGV4cG9ydCBlbnVtIFJFU1VMVF9DT0RFX0JBU0Uge1xyXG4gICAgICAgIENEUF9JMThOX0RFQ0xBUkVSQVRJT04gPSAwLCAvLyBUUzI0MzIg5a++562WXHJcbiAgICAgICAgQ0RQX0kxOE4gPSAzICogX01PRFVMRV9SRVNVTFRfQ09ERV9SQU5HRV9DRFAsXHJcbiAgICB9XHJcblxyXG4gICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgIC8vIG1vZHVsZSBlcnJvciBkZWNsYXJhdGlvbjpcclxuXHJcbiAgICAvLyBAaW50ZXJuYWwgY2RwLmkxOG4g5YaF44Gu44Ot44O844Kr44Or44Kz44O844OJ44Kq44OV44K744OD44OI5YCkXHJcbiAgICBlbnVtIExPQ0FMX0NPREVfQkFTRSB7XHJcbiAgICAgICAgSTE4TiA9IDAsXHJcbiAgICB9XHJcblxyXG4gICAgLyogdHNsaW50OmRpc2FibGU6bWF4LWxpbmUtbGVuZ3RoICovXHJcbiAgICAvLyBFcnJvciBjb2RlIGRlZmluaXRpb24gb2YgYGNkcC1pMThuYC5cclxuICAgIGV4cG9ydCBlbnVtIFJFU1VMVF9DT0RFIHtcclxuICAgICAgICBFUlJPUl9DRFBfSTE4Tl9ERUNMQVJBVElPTiA9IDAsIC8vIFRTMjQzMiDlr77nrZZcclxuICAgICAgICAvKiogYGVuYCBbW0NEUC5pbml0aWFsaXplSTE4Tl1dKCkgZmFpbGVyIGNvZGUuIDxicj4gYGphYCBbW0NEUC5pbml0aWFsaXplSTE4Tl1dKCkg44Gu44Ko44Op44O844Kz44O844OJICovXHJcbiAgICAgICAgRVJST1JfQ0RQX0kxOE5fSU5JVElBTElaRV9GQUlMRUQgPSBERUNMQVJFX0VSUk9SX0NPREUoUkVTVUxUX0NPREVfQkFTRS5DRFBfSTE4TiwgTE9DQUxfQ09ERV9CQVNFLkkxOE4gKyAxLCBcImkxOG4gaW5pdGlhbGl6ZSBmYWlsZWQuXCIpLFxyXG4gICAgfVxyXG4gICAgLyogdHNsaW50OmVuYWJsZTptYXgtbGluZS1sZW5ndGggKi9cclxufVxyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gY2RwOi8vL0NEUC9FcnJvckRlZnMudHMiLCJuYW1lc3BhY2UgQ0RQIHtcclxuXHJcbiAgICBjb25zdCBUQUc6IHN0cmluZyA9IFwiW0NEUC5Qcm9taXNlXSBcIjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBlbiBFeHRlbmQgaW50ZXJmYWNlIG9mIE5hdGl2ZSBQcm9taXNlIGRlZmluaXRpb248YnI+XHJcbiAgICAgKiAgICAgV2hlbiB5b3UgZG9uJ3Qgd2FudCB0byBwcm92aWRlIHRoZSBjYW5jZWwgb3BlcmF0aW9uIGJ1dCB5b3UnZCBsaWtlIHRvIHVzZSBqUXVlcnkgdXRpbGl0eSwgdGhpcyBpbnRlcmZhY2UgaXMgdXNlZnVsLlxyXG4gICAgICogQGphIE5hdGl2ZSBQcm9taXNlIOaLoeW8teOCpOODs+OCv+ODvOODleOCp+OCpOOCueWumue+qTxicj5cclxuICAgICAqICAgICDjgq3jg6Pjg7Pjgrvjg6vjgZXjgZvjgZ/jgY/jgarjgYTjgYwgYWx3YXlzKCkg44Gq44GpIGpRdWVyeSBtZXRob2Qg44KS5o+Q5L6b44GX44Gf44GE5aC05ZCI44Gr5L2/55So44GZ44KLLjxicj5cclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBJUHJvbWlzZUJhc2U8VD4gZXh0ZW5kcyBQcm9taXNlPFQ+IHtcclxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgICAgIC8vIFByb21pc2UgZXh0ZW5kczpcclxuXHJcbiAgICAgICAgdGhlbjxUUmVzdWx0MSA9IFQsIFRSZXN1bHQyID0gbmV2ZXI+KFxyXG4gICAgICAgICAgICBvbmZ1bGZpbGxlZD86IChcclxuICAgICAgICAgICAgICAgICh2YWx1ZTogVCkgPT4gVFJlc3VsdDEgfCBQcm9taXNlTGlrZTxUUmVzdWx0MT5cclxuICAgICAgICAgICAgKSB8IHVuZGVmaW5lZCB8IG51bGwsXHJcbiAgICAgICAgICAgIG9ucmVqZWN0ZWQ/OiAoXHJcbiAgICAgICAgICAgICAgICAocmVhc29uOiBhbnkpID0+IFRSZXN1bHQyIHwgUHJvbWlzZUxpa2U8VFJlc3VsdDI+XHJcbiAgICAgICAgICAgICkgfCB1bmRlZmluZWQgfCBudWxsXHJcbiAgICAgICAgKTogSVByb21pc2VCYXNlPFRSZXN1bHQxIHwgVFJlc3VsdDI+O1xyXG5cclxuXHJcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgICAgICAvLyBKUXVlcnlQcm9taXNlIHN0dWZmOlxyXG5cclxuICAgICAgICBzdGF0ZTogKCkgPT4gc3RyaW5nO1xyXG4gICAgICAgIGFsd2F5czogKFxyXG4gICAgICAgICAgICBhbHdheXNDYWxsYmFjazE/OiBKUXVlcnlQcm9taXNlQ2FsbGJhY2s8YW55PiB8IEpRdWVyeVByb21pc2VDYWxsYmFjazxhbnk+W10sXHJcbiAgICAgICAgICAgIC4uLmFsd2F5c0NhbGxiYWNrc046IEFycmF5PEpRdWVyeVByb21pc2VDYWxsYmFjazxhbnk+IHwgSlF1ZXJ5UHJvbWlzZUNhbGxiYWNrPGFueT5bXT5cclxuICAgICAgICApID0+IElQcm9taXNlQmFzZTxUPjtcclxuICAgICAgICBkb25lOiAoXHJcbiAgICAgICAgICAgIGRvbmVDYWxsYmFjazE/OiBKUXVlcnlQcm9taXNlQ2FsbGJhY2s8VD4gfCBKUXVlcnlQcm9taXNlQ2FsbGJhY2s8VD5bXSxcclxuICAgICAgICAgICAgLi4uZG9uZUNhbGxiYWNrTjogQXJyYXk8SlF1ZXJ5UHJvbWlzZUNhbGxiYWNrPFQ+IHwgSlF1ZXJ5UHJvbWlzZUNhbGxiYWNrPFQ+W10+XHJcbiAgICAgICAgKSA9PiBJUHJvbWlzZUJhc2U8VD47XHJcbiAgICAgICAgZmFpbDogKFxyXG4gICAgICAgICAgICBmYWlsQ2FsbGJhY2sxPzogSlF1ZXJ5UHJvbWlzZUNhbGxiYWNrPGFueT4gfCBKUXVlcnlQcm9taXNlQ2FsbGJhY2s8YW55PltdLFxyXG4gICAgICAgICAgICAuLi5mYWlsQ2FsbGJhY2tzTjogQXJyYXk8SlF1ZXJ5UHJvbWlzZUNhbGxiYWNrPGFueT4gfCBKUXVlcnlQcm9taXNlQ2FsbGJhY2s8YW55PltdPlxyXG4gICAgICAgICkgPT4gSVByb21pc2VCYXNlPFQ+O1xyXG4gICAgICAgIHByb2dyZXNzOiAoXHJcbiAgICAgICAgICAgIHByb2dyZXNzQ2FsbGJhY2sxPzogSlF1ZXJ5UHJvbWlzZUNhbGxiYWNrPGFueT4gfCBKUXVlcnlQcm9taXNlQ2FsbGJhY2s8YW55PltdLFxyXG4gICAgICAgICAgICAuLi5wcm9ncmVzc0NhbGxiYWNrTjogQXJyYXk8SlF1ZXJ5UHJvbWlzZUNhbGxiYWNrPGFueT4gfCBKUXVlcnlQcm9taXNlQ2FsbGJhY2s8YW55PltdPlxyXG4gICAgICAgICkgPT4gSVByb21pc2VCYXNlPFQ+O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGVzIENhbmNlbGFibGUgUHJvbWlzZSBvYmplY3QgaW50ZXJmYWNlIGRlZmluaXRpb25cclxuICAgICAqIEBqYSDjgq3jg6Pjg7Pjgrvjg6vlj6/og73jgaogUHJvbWlzZSDjgqrjg5bjgrjjgqfjgq/jg4jjga7jgqTjg7Pjgr/jg7zjg5XjgqfjgqTjgrnlrprnvqlcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBJUHJvbWlzZTxUPiBleHRlbmRzIElQcm9taXNlQmFzZTxUPiB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQGVuIGNhbmNlbCBvcGVyYXRpb25cclxuICAgICAgICAgKiBAamEg44Kt44Oj44Oz44K744Or5Yem55CGXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gaW5mb1xyXG4gICAgICAgICAqICAtIGBlbmAgcmVqZWN0KCkgYXJndW1lbnRcclxuICAgICAgICAgKiAgLSBgamFgIHJlamVjdCgpIOOBruW8leaVsFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGFib3J0KGluZm8/OiBvYmplY3QpOiB2b2lkO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBlbiBQcm9taXNlIG9iamVjdCB3aGljaCBkb2VzIGFzeW5jaHJvbm91cyBwcm9jZXNzaW5nIG9uIHdoaWNoIHRoaXMgb2JqZWN0IGRlcGVuZHMuXHJcbiAgICAgICAgICogQGphIOS+neWtmOOBmeOCi+mdnuWQjOacn+WHpueQhuOCkuihjOOBhiBQcm9taXNlIOOCquODluOCuOOCp+OCr+ODiFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGRlcGVuZGVuY3k/OiBJUHJvbWlzZTxhbnk+O1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBlbiBJZiB0aGUgdmFsdWUgc2V0IHRvIHRydWUsIHRoZSBzeXN0ZW0gZm91cmNlIGNhbGwgcmVqZWN0KCkgd2hlbiBhYm9ydCgpIGlzIGNhbGxlZCBmcm9tIG91dHNpZGUuIDxicj5cclxuICAgICAgICAgKiAgICAgVGhpcyBzZXR0aW5nIGlzIHVzdWFsbHkgdW5uZWNlc3NhcnkuXHJcbiAgICAgICAgICogQGphIGFib3J0KCkg44Kz44O844Or5pmC44Gr6Ieq6Lqr44GuIHJlamVjdCgpIOOCguOCs+ODvOODq+OBmeOCi+WgtOWQiCB0cnVlIOOCkuaMh+WumiA8YnI+XHJcbiAgICAgICAgICogICAgIOmAmuW4uOaMh+WumuOBr+S4jeimgVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGNhbGxSZWplY3Q/OiBib29sZWFuO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBlbiBzZXQgSVByb21pc2Ugd2hpY2ggdGhpcyBvYmplY3QgZGVwZW5kcy5cclxuICAgICAgICAgKiBAamEg5L6d5a2Y44GZ44KLIElQcm9taXNlIOOCkuioreWumlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHNlZSBbW21ha2VQcm9taXNlXV0oKSBleGFtcGxlLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGRlcGVuZE9uPFU+KHByb21pc2U6IElQcm9taXNlPFU+IHwgSlF1ZXJ5WEhSKTogSVByb21pc2U8VT47XHJcblxyXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAgICAgLy8gUHJvbWlzZSBleHRlbmRzOlxyXG5cclxuICAgICAgICB0aGVuPFRSZXN1bHQxID0gVCwgVFJlc3VsdDIgPSBuZXZlcj4oXHJcbiAgICAgICAgICAgIG9uZnVsZmlsbGVkPzogKFxyXG4gICAgICAgICAgICAgICAgKHZhbHVlOiBUKSA9PiBUUmVzdWx0MSB8IFByb21pc2VMaWtlPFRSZXN1bHQxPlxyXG4gICAgICAgICAgICApIHwgdW5kZWZpbmVkIHwgbnVsbCxcclxuICAgICAgICAgICAgb25yZWplY3RlZD86IChcclxuICAgICAgICAgICAgICAgIChyZWFzb246IGFueSkgPT4gVFJlc3VsdDIgfCBQcm9taXNlTGlrZTxUUmVzdWx0Mj5cclxuICAgICAgICAgICAgKSB8IHVuZGVmaW5lZCB8IG51bGxcclxuICAgICAgICApOiBJUHJvbWlzZTxUUmVzdWx0MSB8IFRSZXN1bHQyPjtcclxuXHJcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgICAgICAvLyBKUXVlcnlQcm9taXNlIHN0dWZmOlxyXG5cclxuICAgICAgICBzdGF0ZTogKCkgPT4gc3RyaW5nO1xyXG4gICAgICAgIGFsd2F5czogKFxyXG4gICAgICAgICAgICBhbHdheXNDYWxsYmFjazE/OiBKUXVlcnlQcm9taXNlQ2FsbGJhY2s8YW55PiB8IEpRdWVyeVByb21pc2VDYWxsYmFjazxhbnk+W10sXHJcbiAgICAgICAgICAgIC4uLmFsd2F5c0NhbGxiYWNrc046IEFycmF5PEpRdWVyeVByb21pc2VDYWxsYmFjazxhbnk+IHwgSlF1ZXJ5UHJvbWlzZUNhbGxiYWNrPGFueT5bXT5cclxuICAgICAgICApID0+IElQcm9taXNlPFQ+O1xyXG4gICAgICAgIGRvbmU6IChcclxuICAgICAgICAgICAgZG9uZUNhbGxiYWNrMT86IEpRdWVyeVByb21pc2VDYWxsYmFjazxUPiB8IEpRdWVyeVByb21pc2VDYWxsYmFjazxUPltdLFxyXG4gICAgICAgICAgICAuLi5kb25lQ2FsbGJhY2tOOiBBcnJheTxKUXVlcnlQcm9taXNlQ2FsbGJhY2s8VD4gfCBKUXVlcnlQcm9taXNlQ2FsbGJhY2s8VD5bXT5cclxuICAgICAgICApID0+IElQcm9taXNlPFQ+O1xyXG4gICAgICAgIGZhaWw6IChcclxuICAgICAgICAgICAgZmFpbENhbGxiYWNrMT86IEpRdWVyeVByb21pc2VDYWxsYmFjazxhbnk+IHwgSlF1ZXJ5UHJvbWlzZUNhbGxiYWNrPGFueT5bXSxcclxuICAgICAgICAgICAgLi4uZmFpbENhbGxiYWNrc046IEFycmF5PEpRdWVyeVByb21pc2VDYWxsYmFjazxhbnk+IHwgSlF1ZXJ5UHJvbWlzZUNhbGxiYWNrPGFueT5bXT5cclxuICAgICAgICApID0+IElQcm9taXNlPFQ+O1xyXG4gICAgICAgIHByb2dyZXNzOiAoXHJcbiAgICAgICAgICAgIHByb2dyZXNzQ2FsbGJhY2sxPzogSlF1ZXJ5UHJvbWlzZUNhbGxiYWNrPGFueT4gfCBKUXVlcnlQcm9taXNlQ2FsbGJhY2s8YW55PltdLFxyXG4gICAgICAgICAgICAuLi5wcm9ncmVzc0NhbGxiYWNrTjogQXJyYXk8SlF1ZXJ5UHJvbWlzZUNhbGxiYWNrPGFueT4gfCBKUXVlcnlQcm9taXNlQ2FsbGJhY2s8YW55PltdPlxyXG4gICAgICAgICkgPT4gSVByb21pc2U8VD47XHJcbiAgICB9XHJcblxyXG4gICAgLy9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fLy9cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBlbiBhbGlhcyBvZiBjYW5jZWwgY2FsbGJhY2sgZm9yIFtbbWFrZVByb21pc2VdXSBhcmd1bWVudC5cclxuICAgICAqIEBqYSBbW21ha2VQcm9taXNlXV0g44Gr5oyH5a6a5Y+v6IO944GqIGNhbmNlbCBjYWxsYmFjayDjga4gYWxpYXMuXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCB0eXBlIGNhbmNlbENhbGxiYWNrID0gKGRldGFpbD86IG9iamVjdCkgPT4gdm9pZDtcclxuXHJcbiAgICAvKipcclxuICAgICAqIG1ha2VQcm9taXNlIG9wdGlvbnNcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBNYWtlUHJvbWlzZU9wdGlvbnMge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBlbiBkZXBlbmRlbnQgcHJvbWlzZSBvYmplY3QuXHJcbiAgICAgICAgICogQGphIOS+neWtmOOBmeOCiyBwcm9taXNlIOOCkuioreWumlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGRlcGVuZGVuY3k/OiBJUHJvbWlzZTxhbnk+O1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBlbiBJZiB0aGUgdmFsdWUgc2V0IHRvIHRydWUsIHRoZSBzeXN0ZW0gZm91cmNlIGNhbGwgcmVqZWN0KCkgd2hlbiBhYm9ydCgpIGlzIGNhbGxlZCBmcm9tIG91dHNpZGUuIDxicj5cclxuICAgICAgICAgKiAgICAgVGhpcyBzZXR0aW5nIGlzIHVzdWFsbHkgdW5uZWNlc3NhcnkuXHJcbiAgICAgICAgICogQGphIGFib3J0KCkg44Kz44O844Or5pmC44Gr6Ieq6Lqr44GuIHJlamVjdCgpIOOCguOCs+ODvOODq+OBmeOCi+WgtOWQiCB0cnVlIOOCkuaMh+WumiA8YnI+XHJcbiAgICAgICAgICogICAgIOmAmuW4uOaMh+WumuOBr+S4jeimgVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGNhbGxSZWplY3Q/OiBib29sZWFuO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBlbiB0aGUgZnVuY3Rpb24gY2FsbGVkIHdoZW4gYWJvcnQoKSBjYWxsaW5nLlxyXG4gICAgICAgICAqIEBqYSDjgq3jg6Pjg7Pjgrvjg6vmmYLjgavlkbzjgbDjgozjgovplqLmlbBcclxuICAgICAgICAgKi9cclxuICAgICAgICBjYW5jZWxDYWxsYmFjaz86IGNhbmNlbENhbGxiYWNrO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBlbiBleHRlbmRzIHBhcmFtZXRlcnMuIGpRdWVyeS5EZWZlcnJlZC5wcm9taXNlKCkgYXJndW1lbnQuXHJcbiAgICAgICAgICogQGphIOaLoeW8teODkeODqeODoeODvOOCvy4galF1ZXJ5LkRlZmVycmVkLnByb21pc2UoKSDjgavmuKHjgZXjgozjgosuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgW2tleTogc3RyaW5nXTogYW55O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ2FuY2VsIOWPr+iDveOCquODluOCuOOCp+OCr+ODiOOBruS9nOaIkFxyXG4gICAgICpcclxuICAgICAqIEBpbnRlcm5hbCA8YnI+XHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGRmIGpRdWVyeURlZmVycmVkIGluc3RhbmNlIOOCkuaMh+WumlxyXG4gICAgICogQHBhcmFtIG9wdGlvbnMgalF1ZXJ5UHJvbWlzZSDjgpLmi6HlvLXjgZnjgovjgqrjg5bjgrjjgqfjgq/jg4ggb3Ig44Kt44Oj44Oz44K744Or5pmC44Gr5ZG844Gz5Ye644GV44KM44KL6Zai5pWw44KS5oyH5a6aXHJcbiAgICAgKiBAcmV0dXJucyBDYW5jZWxhYmxlIHByb3BlcnR5XHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIG1ha2VDYW5jZWxhYmxlPFQ+KFxyXG4gICAgICAgIGRmOiBKUXVlcnlEZWZlcnJlZDxUPixcclxuICAgICAgICBvcHRpb25zPzogTWFrZVByb21pc2VPcHRpb25zIHwgY2FuY2VsQ2FsbGJhY2tcclxuICAgICk6IHsgZGY6IEpRdWVyeURlZmVycmVkPFQ+LCB0YXJnZXQ6IG9iamVjdDsgYWJvcnQ6IChpbmZvPzogYW55KSA9PiB2b2lkOyBkZXBlbmRPbjogKHByb21pc2U6IGFueSkgPT4gSlF1ZXJ5UHJvbWlzZTxhbnk+IH0ge1xyXG4gICAgICAgIGxldCBleHRlbmRPcHRpb25zOiBNYWtlUHJvbWlzZU9wdGlvbnM7XHJcbiAgICAgICAgbGV0IGNhbmNlbDogY2FuY2VsQ2FsbGJhY2s7XHJcblxyXG4gICAgICAgIGlmIChcImZ1bmN0aW9uXCIgPT09IHR5cGVvZiBvcHRpb25zKSB7XHJcbiAgICAgICAgICAgIGNhbmNlbCA9IDxjYW5jZWxDYWxsYmFjaz5vcHRpb25zO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGV4dGVuZE9wdGlvbnMgPSBvcHRpb25zO1xyXG4gICAgICAgICAgICBpZiAoZXh0ZW5kT3B0aW9ucyAmJiBleHRlbmRPcHRpb25zLmNhbmNlbENhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgICAgICBjYW5jZWwgPSBleHRlbmRPcHRpb25zLmNhbmNlbENhbGxiYWNrO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY2FuY2VsID0gKCkgPT4geyAvKiBub29wICovIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IF9hYm9ydCA9IGZ1bmN0aW9uIChpbmZvPzogb2JqZWN0KTogdm9pZCB7XHJcbiAgICAgICAgICAgIGNvbnN0IG9yaWdpbmFsTWVzc2FnZSA9IChpbmZvICYmICg8YW55PmluZm8pLm1lc3NhZ2UpID8gKDxhbnk+aW5mbykubWVzc2FnZSA6IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgY29uc3QgZGV0YWlsID0gaW5mbyA/ICQuZXh0ZW5kKHt9LCBpbmZvLCB7IG1lc3NhZ2U6IFwiYWJvcnRcIiwgb3JpZ2luYWxNZXNzYWdlOiBvcmlnaW5hbE1lc3NhZ2UgfSkgOiB7IG1lc3NhZ2U6IFwiYWJvcnRcIiB9O1xyXG4gICAgICAgICAgICBjYW5jZWwoZGV0YWlsKTtcclxuICAgICAgICAgICAgaWYgKG51bGwgIT0gdGhpcy5kZXBlbmRlbmN5KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5kZXBlbmRlbmN5LmFib3J0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZXBlbmRlbmN5LmFib3J0KGRldGFpbCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoVEFHICsgXCJbY2FsbF0gZGVwZW5kZW5jeSBvYmplY3QgZG9lc24ndCBoYXZlICdhYm9ydCgpJyBtZXRob2QuXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuY2FsbFJlamVjdCAmJiBcInBlbmRpbmdcIiA9PT0gdGhpcy5zdGF0ZSgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGYucmVqZWN0KGRldGFpbCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoXCJwZW5kaW5nXCIgPT09IHRoaXMuc3RhdGUoKSkge1xyXG4gICAgICAgICAgICAgICAgZGYucmVqZWN0KGRldGFpbCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBjb25zdCBfZGVwZW5kT24gPSBmdW5jdGlvbiAocHJvbWlzZTogYW55KTogSlF1ZXJ5UHJvbWlzZTxhbnk+IHtcclxuICAgICAgICAgICAgaWYgKHByb21pc2UuYWJvcnQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGVwZW5kZW5jeSA9IHByb21pc2U7XHJcbiAgICAgICAgICAgICAgICBwcm9taXNlXHJcbiAgICAgICAgICAgICAgICAgICAgLmFsd2F5cygoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGVwZW5kZW5jeSA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFRBRyArIFwiW3NldF0gZGVwZW5kZW5jeSBvYmplY3QgZG9lc24ndCBoYXZlICdhYm9ydCgpJyBtZXRob2QuXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBwcm9taXNlO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGNvbnN0IF90YXJnZXQgPSAkLmV4dGVuZCh7fSwge1xyXG4gICAgICAgICAgICBkZXBlbmRlbmN5OiBudWxsLFxyXG4gICAgICAgICAgICBjYWxsUmVqZWN0OiBmYWxzZSxcclxuICAgICAgICB9LCBleHRlbmRPcHRpb25zKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgZGY6IGRmLFxyXG4gICAgICAgICAgICB0YXJnZXQ6IF90YXJnZXQsXHJcbiAgICAgICAgICAgIGFib3J0OiBfYWJvcnQsXHJcbiAgICAgICAgICAgIGRlcGVuZE9uOiBfZGVwZW5kT24sXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBlbiBtYWtlIFtbSVByb21pc2VdXSBvYmplY3QuXHJcbiAgICAgKiBAamEgW1tJUHJvbWlzZV1dIOOCquODluOCuOOCp+OCr+ODiOOBruS9nOaIkFxyXG4gICAgICpcclxuICAgICAqIEBleGFtcGxlIDxicj5cclxuICAgICAqXHJcbiAgICAgKiBgYGB0c1xyXG4gICAgICogIC8vIHBpcGUgbGluZSBvcGVyYXRpb25cclxuICAgICAqICBmdW5jdGlvbiBwcm9jUGlwZWxpbmUoKTogSVByb21pc2U8U29tZURhdGE+IHtcclxuICAgICAqICAgICAgY29uc3QgZGYgPSAkLkRlZmVycmVkKCk7ICAgICAgICAgICAgLy8gY3JlYXRlIGpRdWVyeURlZmVycmVkIGluc3RhbmNlLlxyXG4gICAgICogICAgICBjb25zdCBwcm9taXNlID0gbWFrZVByb21pc2UoZGYpOyAgICAvLyBjcmVhdGUgSVByb21pc2UgaW5zdGFuY2UuXHJcbiAgICAgKlxyXG4gICAgICogICAgICAvLyBhc3luYzEoKSwgYXN5bmMyKCksIGFzeW5jMygpIGFyZSBhc3luYyBmdW5jdGlvbiBhbmQgcmV0dXJuZWQgSVByb21pc2UgaW5zdGFuY2UuXHJcbiAgICAgKiAgICAgIHByb21zaWUuZGVwZW5kT24oYXN5bmMxKCkpXHJcbiAgICAgKiAgICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgKiAgICAgICAgICAgICAgcmV0dXJuIHByb21zaWUuZGVwZW5kT24oYXN5bmMyKCkpO1xyXG4gICAgICogICAgICAgICAgfSlcclxuICAgICAqICAgICAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAqICAgICAgICAgICAgICByZXR1cm4gcHJvbXNpZS5kZXBlbmRPbihhc3luYzMoKSk7XHJcbiAgICAgKiAgICAgICAgICB9KVxyXG4gICAgICogICAgICAgICAgLmRvbmUoKCkgPT4ge1xyXG4gICAgICogICAgICAgICAgICAgIGRmLnJlc29sdmUoeyBzb21lZGF0YTogXCJob2dlXCIgfSk7XHJcbiAgICAgKiAgICAgICAgICB9KVxyXG4gICAgICogICAgICAgICAgLmZhaWwoKGVycm9yKSA9PiB7XHJcbiAgICAgKiAgICAgICAgICAgICAgZGYucmVqZWN0KGVycm9yKTtcclxuICAgICAqICAgICAgICAgIH0pO1xyXG4gICAgICpcclxuICAgICAqICAgICAgcmV0dXJuIHByb21pc2U7XHJcbiAgICAgKiAgfVxyXG4gICAgICpcclxuICAgICAqICAvLyBjbGllbnQgb2YgcGlwZSBsaW5lIG9wZXJhdGlvblxyXG4gICAgICogIGZ1bmN0aW9uIHByb2NDYWxsZXIoKTogdm9pZCB7XHJcbiAgICAgKiAgICAgIGNvbnN0IHByb21pc2UgPSBwcm9jUGlwZWxpbmUoKTtcclxuICAgICAqICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgKiAgICAgICAgICBwcm9taXNlLmFib3J0KCk7IC8vIFRoZSB3aG9sZSBjYW5jZWxsYXRpb24gaXMgcG9zc2libGUgYnkgb3B0aW9uYWwgdGltaW5nLlxyXG4gICAgICogICAgICAgICAgLy8gSW4gd2hpY2hldmVyIHByb2Nlc3Npbmcgb2YgYXN5bmMxKCksIGFzeW5jMigpIG9yIGFzeW5jMygpLFxyXG4gICAgICogICAgICAgICAgLy8gaXQgY2FuIGJlIGNhbmNlbGVkIGFwcHJvcHJpYXRlbHkuXHJcbiAgICAgKiAgICAgIH0pO1xyXG4gICAgICogIH1cclxuICAgICAqXHJcbiAgICAgKiBgYGBcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gZGZcclxuICAgICAqICAtIGBlbmAgc2V0IHRoZSBqUXVlcnlEZWZlcnJlZCBpbnN0YW5jZS5cclxuICAgICAqICAtIGBqYWAgalF1ZXJ5RGVmZXJyZWQgaW5zdGFuY2Ug44KS5oyH5a6aXHJcbiAgICAgKiBAcGFyYW0gb3B0aW9uc1xyXG4gICAgICogIC0gYGVuYCBzZXQgdGhlIGV4dGVuZCBvYmplY3Qgb3IgY2FuY2VsIGNhbGxiYWNrIGZ1bmN0aW9uLlxyXG4gICAgICogIC0gYGphYCBqUXVlcnlQcm9taXNlIOOCkuaLoeW8teOBmeOCi+OCquODluOCuOOCp+OCr+ODiCBvciDjgq3jg6Pjg7Pjgrvjg6vmmYLjgavlkbzjgbPlh7rjgZXjgozjgovplqLmlbDjgpLmjIflrppcclxuICAgICAqIEByZXR1cm5zXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBmdW5jdGlvbiBtYWtlUHJvbWlzZTxUPihkZjogSlF1ZXJ5RGVmZXJyZWQ8VD4sIG9wdGlvbnM/OiBNYWtlUHJvbWlzZU9wdGlvbnMgfCBjYW5jZWxDYWxsYmFjayk6IElQcm9taXNlPFQ+IHtcclxuICAgICAgICBjb25zdCBjYW5jZWxhYmxlID0gbWFrZUNhbmNlbGFibGUoZGYsIG9wdGlvbnMpO1xyXG4gICAgICAgIGNvbnN0IHByb21pc2UgPSA8SVByb21pc2U8VD4+PGFueT5kZi5wcm9taXNlKGNhbmNlbGFibGUudGFyZ2V0KTtcclxuICAgICAgICBpZiAobnVsbCA9PSBwcm9taXNlLmFib3J0KSB7XHJcbiAgICAgICAgICAgIHByb21pc2UuYWJvcnQgPSBjYW5jZWxhYmxlLmFib3J0LmJpbmQocHJvbWlzZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChudWxsID09IHByb21pc2UuZGVwZW5kT24pIHtcclxuICAgICAgICAgICAgcHJvbWlzZS5kZXBlbmRPbiA9IGNhbmNlbGFibGUuZGVwZW5kT24uYmluZChwcm9taXNlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHByb21pc2U7XHJcbiAgICB9XHJcblxyXG4gICAgLy9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fLy9cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBlbiBXYWl0IGZvciBwcm9taXNlIHByb2Nlc3NpbmcgY29tcGxldGluZy4gPGJyPlxyXG4gICAgICogICAgIGpRdWVyeS53aGVuKCkgcmV0dXJucyBjb250cm9sIHdoZW4gb25lIG9mIHByb21pc2UgaXMgZmFpbGVkLiA8YnI+XHJcbiAgICAgKiAgICAgQnV0IHRoaXMgbWV0aG9kIHdhaXQgZm9yIGFsbCBwcm9taXNlIG9iamVjdHMgb3BlcmF0aW9uIGluY2x1ZGluZyBmYWlsIGNhc2UuXHJcbiAgICAgKiBAamEgUHJvbWlzZSDjgqrjg5bjgrjjgqfjgq/jg4jjga7ntYLkuobjgpLlvoXjgaQgPGJyPlxyXG4gICAgICogICAgIGpRdWVyeS53aGVuKCkg44Gv5aSx5pWX44GZ44KL44Go44GZ44GQ44Gr5Yi25b6h44KS6L+U44GZ44Gu44Gr5a++44GX44CB5aSx5pWX44KC5ZCr44KB44Gm5b6F44GkIFByb21pc2Ug44Kq44OW44K444Kn44Kv44OI44KS6L+U5Y20XHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBmdW5jdGlvbiB3YWl0PFQ+KC4uLmRlZmVycmVkczogUHJvbWlzZTxUPltdKTogSVByb21pc2VCYXNlPFQ+O1xyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIHdhaXQ8VD4oLi4uZGVmZXJyZWRzOiBKUXVlcnlHZW5lcmljUHJvbWlzZTxUPltdKTogSVByb21pc2VCYXNlPFQ+O1xyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIHdhaXQ8VD4oLi4uZGVmZXJyZWRzOiBUW10pOiBJUHJvbWlzZUJhc2U8VD47XHJcbiAgICBleHBvcnQgZnVuY3Rpb24gd2FpdDxUPiguLi5kZWZlcnJlZHM6IGFueVtdKTogSVByb21pc2VCYXNlPFQ+IHtcclxuXHJcbiAgICAgICAgLy8gMeasoeWFg+mFjeWIl+OBq+S/neiovFxyXG4gICAgICAgIGNvbnN0IF9kZWZlcnJlZHM6IEpRdWVyeVByb21pc2U8VD5bXSA9IFtdLmNvbmNhdC5hcHBseShbXSwgZGVmZXJyZWRzKTtcclxuXHJcbiAgICAgICAgLy8g5a6f6Zqb44Gu5L2c5qWtXHJcbiAgICAgICAgY29uc3QgZGYgPSAkLkRlZmVycmVkKCk7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0cyA9IFtdO1xyXG5cclxuICAgICAgICBjb25zdCBpc0ZpbmlzaGVkID0gKCk6IGJvb2xlYW4gPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gIXJlc3VsdHMuc29tZSgoZWxlbWVudDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJwZW5kaW5nXCIgPT09IGVsZW1lbnQuc3RhdHVzO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBfZGVmZXJyZWRzLmZvckVhY2goKGRlZmVycmVkLCBpbmRleCkgPT4ge1xyXG4gICAgICAgICAgICByZXN1bHRzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgc3RhdHVzOiBcInBlbmRpbmdcIixcclxuICAgICAgICAgICAgICAgIGFyZ3M6IG51bGwsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBkZWZlcnJlZFxyXG4gICAgICAgICAgICAgICAgLnRoZW4oKC4uLmFyZ3M6IGFueVtdKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0c1tpbmRleF0uc3RhdHVzID0gXCJyZXNvbHZlZFwiO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdHNbaW5kZXhdLmFyZ3MgPSBhcmdzO1xyXG4gICAgICAgICAgICAgICAgfSwgKC4uLmFyZ3M6IGFueVtdKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0c1tpbmRleF0uc3RhdHVzID0gXCJyZWplY3RlZFwiO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdHNbaW5kZXhdLmFyZ3MgPSBhcmdzO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5hbHdheXMoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpc0ZpbmlzaGVkKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGYucmVzb2x2ZShyZXN1bHRzKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIDxhbnk+ZGYucHJvbWlzZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGVuIFdhaXQgZm9yIHJhY2UgY29uZGl0aW9uLjxicj5cclxuICAgICAqICAgICBUaGlzIGhhdmUgc2FtZSBzZW1hbnRpY3MgYXMgRVMyMDE1IFByb21pc2UucmFjZSgpLlxyXG4gICAgICogQGphIFByb21pc2Ug44Kq44OW44K444Kn44Kv44OI44Gu5pyA5Yid44Gu5a6M5LqG44KS5b6F44GkIDxicj5cclxuICAgICAqICAgICBFUzIwMTUgUHJvbWlzZS5yYWNlKCkg44Go5ZCM562JXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBmdW5jdGlvbiByYWNlPFQ+KC4uLmRlZmVycmVkczogUHJvbWlzZTxUPltdKTogSVByb21pc2VCYXNlPFQ+O1xyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIHJhY2U8VD4oLi4uZGVmZXJyZWRzOiBKUXVlcnlHZW5lcmljUHJvbWlzZTxUPltdKTogSVByb21pc2VCYXNlPFQ+O1xyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIHJhY2U8VD4oLi4uZGVmZXJyZWRzOiBUW10pOiBJUHJvbWlzZUJhc2U8VD47XHJcbiAgICBleHBvcnQgZnVuY3Rpb24gcmFjZTxUPiguLi5kZWZlcnJlZHM6IGFueVtdKTogSVByb21pc2VCYXNlPFQ+IHtcclxuICAgICAgICBjb25zdCBkZiA9ICQuRGVmZXJyZWQoKTtcclxuXHJcbiAgICAgICAgY29uc3QgX2RlZmVycmVkczogSlF1ZXJ5UHJvbWlzZTxUPltdID0gW10uY29uY2F0LmFwcGx5KFtdLCBkZWZlcnJlZHMpO1xyXG4gICAgICAgIF9kZWZlcnJlZHMuZm9yRWFjaCgoZGVmZXJyZWQsIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgIGRlZmVycmVkXHJcbiAgICAgICAgICAgICAgICAudGhlbigoLi4uYXJnczogYW55W10pID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoXCJwZW5kaW5nXCIgPT09IGRmLnN0YXRlKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGYucmVzb2x2ZShhcmdzKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9LCAoLi4uYXJnczogYW55W10pID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoXCJwZW5kaW5nXCIgPT09IGRmLnN0YXRlKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGYucmVqZWN0KGFyZ3MpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gPGFueT5kZi5wcm9taXNlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fLy9cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBlbiBUaGUgY2xhc3MgcHJvdmlkZXMgdGhlIG9wZXJhdGlvbiBmb3IgbXVsdGlwbGUgW1tJUHJvbWlzZV1dIG9iamVjdC5cclxuICAgICAqIEBqYSDopIfmlbDjga4gW1tJUHJvbWlzZV1dIOOCkuS4gOaLrOeuoeeQhuOBmeOCi+OCr+ODqeOCuVxyXG4gICAgICpcclxuICAgICAqIEBleGFtcGxlIDxicj5cclxuICAgICAqXHJcbiAgICAgKiBgYGB0c1xyXG4gICAgICogIGxldCBfcHJtc01hbmFnZXIgPSBuZXcgUHJvbWlzZU1hbmFnZXIoKTtcclxuICAgICAqXHJcbiAgICAgKiAgZnVuY3Rpb24gcHJvY0NhbGxlcigpOiB2b2lkIHtcclxuICAgICAqICAgICAgLy8gYWRkIHBhcmFsbGVsIG9wZXJhdGlvbnMgdW5kZXIgdGhlIG1hbmFnZW1lbnQuXHJcbiAgICAgKiAgICAgIF9wcm1zTWFuYWdlci5hZGQoYXN5bmMxKTtcclxuICAgICAqICAgICAgX3BybXNNYW5hZ2VyLmFkZChhc3luYzIpO1xyXG4gICAgICogICAgICBfcHJtc01hbmFnZXIuYWRkKGFzeW5jMyk7XHJcbiAgICAgKiAgfVxyXG4gICAgICpcclxuICAgICAqICBmdW5jdGlvbiBhbGxDYW5jZWwoKTogdm9pZCB7XHJcbiAgICAgKiAgICAgIC8vIGp1c3Qgb25lIGNhbGwuIGFsbCBwYXJhbGxlbCBvcHMgYXJlIGNhbmNlbGVkLlxyXG4gICAgICogICAgICBfcHJtc01hbmFnZXIuY2FuY2VsKCk7XHJcbiAgICAgKiAgfVxyXG4gICAgICogYGBgXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBjbGFzcyBQcm9taXNlTWFuYWdlciB7XHJcblxyXG4gICAgICAgIHByaXZhdGUgX3Bvb2w6IHsgcHJvbWlzZTogSVByb21pc2U8YW55PjsgaWQ6IG51bWJlcjsgfVtdID0gW107XHJcbiAgICAgICAgcHJpdmF0ZSBfaWQ6IG51bWJlciA9IDA7XHJcblxyXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAgICAgLy8gcHVibGljIG1ldGhvZFxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAZW4gYWRkIFByb21pc2Ugb2JqZWN0IHRoYXQgaGFzIGFib3J0KCkgbWV0aG9kLlxyXG4gICAgICAgICAqIEBqYSBhYm9ydCgpIOOCkuaMgeOBpCBQcm9taXNlIOOCquODluOCuOOCp+OCr+ODiOOCkueuoeeQhuS4i+OBq+i/veWKoFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBhZGQ8VD4ocHJvbWlzZTogSVByb21pc2U8VD4gfCBKUXVlcnlYSFIpOiBJUHJvbWlzZTxUPiB7XHJcbiAgICAgICAgICAgIGlmIChwcm9taXNlID09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBhYm9ydCgpIOOCkuaMgeOBo+OBpuOBhOOBquOBhOWgtOWQiOOBr+OCqOODqeODvFxyXG4gICAgICAgICAgICBpZiAoIXByb21pc2UuYWJvcnQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoVEFHICsgXCJbYWRkXSBwcm9taXNlIG9iamVjdCBkb2Vzbid0IGhhdmUgJ2Fib3J0KCknIG1ldGhvZC5cIik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gPGFueT5wcm9taXNlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCBjb29raWUgPSB7XHJcbiAgICAgICAgICAgICAgICBwcm9taXNlOiA8YW55PnByb21pc2UsXHJcbiAgICAgICAgICAgICAgICBpZDogdGhpcy5faWQrKyxcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX3Bvb2wucHVzaChjb29raWUpO1xyXG5cclxuICAgICAgICAgICAgKDxhbnk+cHJvbWlzZSlcclxuICAgICAgICAgICAgICAgIC5hbHdheXMoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3Bvb2wgPSB0aGlzLl9wb29sLmZpbHRlcigoZWxlbWVudDogeyBwcm9taXNlOiBJUHJvbWlzZTxhbnk+OyBpZDogbnVtYmVyOyB9KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlbGVtZW50LmlkICE9PSBjb29raWUuaWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiA8YW55PnByb21pc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAZW4gY2FsbCBhYm9ydCgpIHRvIHVuZGVyIHRoZSBtYW5hZ2VtZW50IFByb21pc2VzLlxyXG4gICAgICAgICAqIEBqYSDnrqHnkIblr77osaHjga4gUHJvbWlzZSDjgavlr77jgZfjgaYgYWJvcnQg44KS55m66KGMXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gaW5mb1xyXG4gICAgICAgICAqICAtIGBlbmAgYWJvcnQoKSBhcmd1bWVudFxyXG4gICAgICAgICAqICAtIGBqYWAgYWJvcnQoKSDjgavmuKHjgZXjgozjgovlvJXmlbBcclxuICAgICAgICAgKiBAcmV0dXJuc1xyXG4gICAgICAgICAqICAtIGBlbmAgVGhlIGNhbmNlbGxhdGlvbiB0byBjYW5jZWwgcHJvY2Vzc2luZyBpcyBwcm9oaWJpdGVkLlxyXG4gICAgICAgICAqICAtIGBqYWAg44Kt44Oj44Oz44K744Or5Yem55CG44Gr5a++44GZ44KL44Kt44Oj44Oz44K744Or44Gv5LiN5Y+vXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIGNhbmNlbChpbmZvPzogb2JqZWN0KTogSVByb21pc2VCYXNlPGFueT4ge1xyXG4gICAgICAgICAgICBjb25zdCBwcm9taXNlcyA9IHRoaXMucHJvbWlzZXMoKTtcclxuICAgICAgICAgICAgcHJvbWlzZXMuZm9yRWFjaCgoZWxlbWVudDogSVByb21pc2U8YW55PikgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQuYWJvcnQpIHtcclxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmFib3J0KGluZm8pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIHdhaXQuYXBwbHkobnVsbCwgcHJvbWlzZXMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQGVuIGdldCBQcm9taXNlIG9iamVjdHMgYXMgYXJyYXkuIDxicj5cclxuICAgICAgICAgKiAgICAgb25seSBwZW5kaW5nIHN0YXRlIG9iamVjdCBhcmUgcmV0dXJuZWQuXHJcbiAgICAgICAgICogQGphIOeuoeeQhuWvvuixoeOBriBQcm9taXNlIOOCkumFjeWIl+OBp+WPluW+lyA8YnI+XHJcbiAgICAgICAgICogICAgIHBlbmRpbmcg54q25oWL44Gu44Kq44OW44K444Kn44Kv44OI44Gu44G/44GM6L+U44KLLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBwcm9taXNlcygpOiBJUHJvbWlzZTxhbnk+W10ge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fcG9vbC5tYXAoKGVsZW1lbnQpID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlbGVtZW50LnByb21pc2U7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvL19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18vL1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGVuIENhbmNlbGFibGUgUHJvbWlzZSBjbGFzcyBmb3IgRVMyMDE1IFByb21paXNlIGNvbXBhdGlibGUuXHJcbiAgICAgKiBAamEgRVMyMDE1IFByb21pc2Ug5LqS5o+b44Gu44Kt44Oj44Oz44K744Or5Y+v6IO944GqIFByb21pc2Ug44Kq44OW44K444Kn44Kv44OIXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBjbGFzcyBQcm9taXNlQ29uc3RydWN0b3I8VD4gaW1wbGVtZW50cyBJUHJvbWlzZTxUPiB7XHJcblxyXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAgICAgLy8gbWl4aW46IG5hdGl2ZSBQcm9taXNlXHJcblxyXG4gICAgICAgIHRoZW46IDxUUmVzdWx0MSA9IFQsIFRSZXN1bHQyID0gbmV2ZXI+KFxyXG4gICAgICAgICAgICBvbmZ1bGZpbGxlZD86IChcclxuICAgICAgICAgICAgICAgICh2YWx1ZTogVCkgPT4gVFJlc3VsdDEgfCBQcm9taXNlTGlrZTxUUmVzdWx0MT5cclxuICAgICAgICAgICAgKSB8IHVuZGVmaW5lZCB8IG51bGwsXHJcbiAgICAgICAgICAgIG9ucmVqZWN0ZWQ/OiAoXHJcbiAgICAgICAgICAgICAgICAocmVhc29uOiBhbnkpID0+IFRSZXN1bHQyIHwgUHJvbWlzZUxpa2U8VFJlc3VsdDI+XHJcbiAgICAgICAgICAgICkgfCB1bmRlZmluZWQgfCBudWxsXHJcbiAgICAgICAgKSA9PiBJUHJvbWlzZTxUUmVzdWx0MSB8IFRSZXN1bHQyPjtcclxuXHJcbiAgICAgICAgY2F0Y2g6IDxUUmVzdWx0ID0gbmV2ZXI+KFxyXG4gICAgICAgICAgICBvbnJlamVjdGVkPzogKChyZWFzb246IGFueSkgPT4gVFJlc3VsdCB8IFByb21pc2VMaWtlPFRSZXN1bHQ+KSB8IHVuZGVmaW5lZCB8IG51bGxcclxuICAgICAgICApID0+IElQcm9taXNlQmFzZTxUUmVzdWx0PjtcclxuXHJcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgICAgICAvLyBtaXhpbjogSlF1ZXJ5UHJvbWlzZVxyXG5cclxuICAgICAgICBzdGF0ZTogKCkgPT4gc3RyaW5nO1xyXG4gICAgICAgIGFsd2F5czogKFxyXG4gICAgICAgICAgICBhbHdheXNDYWxsYmFjazE/OiBKUXVlcnlQcm9taXNlQ2FsbGJhY2s8YW55PiB8IEpRdWVyeVByb21pc2VDYWxsYmFjazxhbnk+W10sXHJcbiAgICAgICAgICAgIC4uLmFsd2F5c0NhbGxiYWNrc046IEFycmF5PEpRdWVyeVByb21pc2VDYWxsYmFjazxhbnk+IHwgSlF1ZXJ5UHJvbWlzZUNhbGxiYWNrPGFueT5bXT5cclxuICAgICAgICApID0+IElQcm9taXNlPFQ+O1xyXG4gICAgICAgIGRvbmU6IChcclxuICAgICAgICAgICAgZG9uZUNhbGxiYWNrMT86IEpRdWVyeVByb21pc2VDYWxsYmFjazxUPiB8IEpRdWVyeVByb21pc2VDYWxsYmFjazxUPltdLFxyXG4gICAgICAgICAgICAuLi5kb25lQ2FsbGJhY2tOOiBBcnJheTxKUXVlcnlQcm9taXNlQ2FsbGJhY2s8VD4gfCBKUXVlcnlQcm9taXNlQ2FsbGJhY2s8VD5bXT5cclxuICAgICAgICApID0+IElQcm9taXNlPFQ+O1xyXG4gICAgICAgIGZhaWw6IChcclxuICAgICAgICAgICAgZmFpbENhbGxiYWNrMT86IEpRdWVyeVByb21pc2VDYWxsYmFjazxhbnk+IHwgSlF1ZXJ5UHJvbWlzZUNhbGxiYWNrPGFueT5bXSxcclxuICAgICAgICAgICAgLi4uZmFpbENhbGxiYWNrc046IEFycmF5PEpRdWVyeVByb21pc2VDYWxsYmFjazxhbnk+IHwgSlF1ZXJ5UHJvbWlzZUNhbGxiYWNrPGFueT5bXT5cclxuICAgICAgICApID0+IElQcm9taXNlPFQ+O1xyXG4gICAgICAgIHByb2dyZXNzOiAoXHJcbiAgICAgICAgICAgIHByb2dyZXNzQ2FsbGJhY2sxPzogSlF1ZXJ5UHJvbWlzZUNhbGxiYWNrPGFueT4gfCBKUXVlcnlQcm9taXNlQ2FsbGJhY2s8YW55PltdLFxyXG4gICAgICAgICAgICAuLi5wcm9ncmVzc0NhbGxiYWNrTjogQXJyYXk8SlF1ZXJ5UHJvbWlzZUNhbGxiYWNrPGFueT4gfCBKUXVlcnlQcm9taXNlQ2FsbGJhY2s8YW55PltdPlxyXG4gICAgICAgICkgPT4gSVByb21pc2U8VD47XHJcblxyXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAgICAgLy8gbWl4aW46IEpRdWVyeURlZmVycmVkXHJcblxyXG4gICAgICAgIC8qIHRzbGludDpkaXNhYmxlOm5vLXVudXNlZC12YXJpYWJsZSAqL1xyXG4gICAgICAgIHByaXZhdGUgbm90aWZ5OiAodmFsdWU/OiBhbnksIC4uLmFyZ3M6IGFueVtdKSA9PiBKUXVlcnlEZWZlcnJlZDxUPjtcclxuICAgICAgICBwcml2YXRlIG5vdGlmeVdpdGg6IChjb250ZXh0OiBhbnksIHZhbHVlPzogYW55W10pID0+IEpRdWVyeURlZmVycmVkPFQ+O1xyXG4gICAgICAgIHByaXZhdGUgcmVqZWN0OiAodmFsdWU/OiBhbnksIC4uLmFyZ3M6IGFueVtdKSA9PiBKUXVlcnlEZWZlcnJlZDxUPjtcclxuICAgICAgICBwcml2YXRlIHJlamVjdFdpdGg6IChjb250ZXh0OiBhbnksIHZhbHVlPzogYW55W10pID0+IEpRdWVyeURlZmVycmVkPFQ+O1xyXG4gICAgICAgIHByaXZhdGUgcmVzb2x2ZTogKHZhbHVlPzogVCwgLi4uYXJnczogYW55W10pID0+IEpRdWVyeURlZmVycmVkPFQ+O1xyXG4gICAgICAgIHByaXZhdGUgcmVzb2x2ZVdpdGg6IChjb250ZXh0OiBhbnksIHZhbHVlPzogVFtdKSA9PiBKUXVlcnlEZWZlcnJlZDxUPjtcclxuICAgICAgICAvKiB0c2xpbnQ6ZW5hYmxlOm5vLXVudXNlZC12YXJpYWJsZSAqL1xyXG5cclxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgICAgIC8vIG1peGluOiBJUHJvaW1pc2VcclxuXHJcbiAgICAgICAgYWJvcnQ6IChpbmZvPzogYW55KSA9PiB2b2lkO1xyXG4gICAgICAgIGRlcGVuZE9uOiA8VT4ocHJvbWlzZTogSVByb21pc2U8VT4gfCBKUXVlcnlYSFIpID0+IElQcm9taXNlPFU+O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAZXhhbXBsZSA8YnI+XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBgYGB0c1xyXG4gICAgICAgICAqICAvLyBvdmVycmlkZSBnbG9iYWwgXCJQcm9taXNlXCIgZm9yIHVzaW5nIENhbmNlbGFibGUgUHJvbWlzZSBpbiB0aGlzIG1vZHVsZSBzY29wZS5cclxuICAgICAgICAgKiAgaW1wb3J0IHsgUHJvbWlzZSB9IGZyb20gXCJjZHBcIjtcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqICBmdW5jdGlvbiAoKTogSVByb21pc2U8U29tZURhdGE+ID0+IHtcclxuICAgICAgICAgKiAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0LCBkZXBlbmRPbikgPT4ge1xyXG4gICAgICAgICAqICAgICAgICAgIC8vIGFzeW5jMSgpLCBhc3luYzIoKSBhcmUgYXN5bmMgZnVuY3Rpb24gYW5kIHJldHVybmVkIElQcm9taXNlIGluc3RhbmNlLlxyXG4gICAgICAgICAqICAgICAgICAgIGRlcGVuZE9uKGFzeW5jMSgpKVxyXG4gICAgICAgICAqICAgICAgICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICogICAgICAgICAgICAgICAgICByZXR1cm4gZGVwZW5kT24oYXN5bmMyKCkpO1xyXG4gICAgICAgICAqICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAqICAgICAgICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICogICAgICAgICAgICAgICAgICByZXNvbHZlKHsgc29tZWRhdGE6IFwiaG9nZVwiIH0pO1xyXG4gICAgICAgICAqICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAqICAgICAgICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XHJcbiAgICAgICAgICogICAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IpO1xyXG4gICAgICAgICAqICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgKiAgICAgICAgICB9KTtcclxuICAgICAgICAgKiAgICAgIH07XHJcbiAgICAgICAgICogIH1cclxuICAgICAgICAgKiBgYGBcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBleGVjdXRvclxyXG4gICAgICAgICAqICAtIGBlbmAgRVMyMDE1IFByb21pc2UgZXhlY3V0ZXIgY29tcGF0aWJsZSB3aXRoIGBkZXBlbmRPbmAgM3JkIGFyZy5cclxuICAgICAgICAgKiAgLSBgamFgIEVTNiBQcm9taXNlIOS6kuaPm+W8leaVsC4gKGRlcGVuZE9uIOOCkuesrDPlvJXmlbDjgavmuKHjgZkpXHJcbiAgICAgICAgICogQHBhcmFtIG9wdGlvbnNcclxuICAgICAgICAgKiAgLSBgZW5gIHNldCB0aGUgZXh0ZW5kIG9iamVjdCBvciBjYW5jZWwgY2FsbGJhY2sgZnVuY3Rpb24uXHJcbiAgICAgICAgICogIC0gYGphYCBqUXVlcnlQcm9taXNlIOOCkuaLoeW8teOBmeOCi+OCquODluOCuOOCp+OCr+ODiCBvciDjgq3jg6Pjg7Pjgrvjg6vmmYLjgavlkbzjgbPlh7rjgZXjgozjgovplqLmlbDjgpLmjIflrppcclxuICAgICAgICAgKi9cclxuICAgICAgICBjb25zdHJ1Y3RvcihcclxuICAgICAgICAgICAgZXhlY3V0b3I6IChcclxuICAgICAgICAgICAgICAgIHJlc29sdmU6ICh2YWx1ZT86IFQgfCBQcm9taXNlTGlrZTxUPiwgLi4uYWRkaXRpb25hbDogYW55W10pID0+IHZvaWQsXHJcbiAgICAgICAgICAgICAgICByZWplY3Q/OiAocmVhc29uPzogYW55LCAuLi5hZGRpdGlvbmFsOiBhbnlbXSkgPT4gdm9pZCxcclxuICAgICAgICAgICAgICAgIGRlcGVuZE9uPzogPFU+KHByb21pc2U6IElQcm9taXNlPFU+IHwgSlF1ZXJ5WEhSKSA9PiBJUHJvbWlzZTxVPixcclxuICAgICAgICAgICAgKSA9PiB2b2lkLFxyXG4gICAgICAgICAgICBvcHRpb25zPzogTWFrZVByb21pc2VPcHRpb25zIHwgY2FuY2VsQ2FsbGJhY2tcclxuICAgICAgICApIHtcclxuICAgICAgICAgICAgLy8gYXBwbHkgbWl4aW5cclxuICAgICAgICAgICAgY29uc3QgY2FuY2VsYWJsZSA9IG1ha2VDYW5jZWxhYmxlKCQuRGVmZXJyZWQoKSwgb3B0aW9ucyk7XHJcbiAgICAgICAgICAgICQuZXh0ZW5kKHRydWUsIHRoaXMsIGNhbmNlbGFibGUuZGYsIGNhbmNlbGFibGUudGFyZ2V0KTtcclxuICAgICAgICAgICAgdGhpcy5hYm9ydCA9IGNhbmNlbGFibGUuYWJvcnQuYmluZCh0aGlzKTtcclxuICAgICAgICAgICAgdGhpcy5kZXBlbmRPbiA9IGNhbmNlbGFibGUuZGVwZW5kT24uYmluZCh0aGlzKTtcclxuXHJcbiAgICAgICAgICAgIGV4ZWN1dG9yKHRoaXMucmVzb2x2ZSwgdGhpcy5yZWplY3QsIHRoaXMuZGVwZW5kT24pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgICAgICAvLyBzdGF0aWMgbWV0aG9kczpcclxuXHJcbiAgICAgICAgc3RhdGljIHJlc29sdmU8VT4odmFsdWU/OiBVIHwgUHJvbWlzZUxpa2U8VT4pOiBJUHJvbWlzZTxVPiB7XHJcbiAgICAgICAgICAgIHJldHVybiA8YW55PiQuRGVmZXJyZWQoKS5yZXNvbHZlKHZhbHVlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN0YXRpYyByZWplY3Q8VT4ocmVhc29uPzogYW55KTogSVByb21pc2U8VT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gPGFueT4kLkRlZmVycmVkKCkucmVqZWN0KHJlYXNvbik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdGF0aWMgYWxsPFU+KC4uLmRlZmVycmVkczogQXJyYXk8VSB8IElQcm9taXNlPFU+IHwgSlF1ZXJ5UHJvbWlzZTxVPj4pOiBJUHJvbWlzZUJhc2U8VT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gPGFueT4kLndoZW4uYXBwbHkodGhpcywgW10uY29uY2F0LmFwcGx5KFtdLCBkZWZlcnJlZHMpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN0YXRpYyB3YWl0PFU+KC4uLmRlZmVycmVkczogQXJyYXk8VSB8IElQcm9taXNlPFU+IHwgSlF1ZXJ5UHJvbWlzZTxVPj4pOiBJUHJvbWlzZUJhc2U8VT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gPGFueT53YWl0KFtdLmNvbmNhdC5hcHBseShbXSwgZGVmZXJyZWRzKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdGF0aWMgcmFjZTxVPiguLi5kZWZlcnJlZHM6IEFycmF5PFUgfCBJUHJvbWlzZTxVPiB8IEpRdWVyeVByb21pc2U8VT4+KTogSVByb21pc2VCYXNlPFU+IHtcclxuICAgICAgICAgICAgcmV0dXJuIDxhbnk+cmFjZShbXS5jb25jYXQuYXBwbHkoW10sIGRlZmVycmVkcykpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBleHBvcnQgY29uc3QgUHJvbWlzZSA9IFByb21pc2VDb25zdHJ1Y3RvcjtcclxufVxyXG5cclxuXHJcbmRlY2xhcmUgbW9kdWxlIFwiY2RwLnByb21pc2VcIiB7XHJcbiAgICBleHBvcnQgPSBDRFA7XHJcbn1cclxuIiwiKGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblx0aWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKVxuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeShyZXF1aXJlKFwianF1ZXJ5XCIpLCByZXF1aXJlKFwiY2RwLmkxOG5cIiksIHJlcXVpcmUoXCJiYWNrYm9uZVwiKSk7XG5cdGVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKVxuXHRcdGRlZmluZShbXCJqcXVlcnlcIiwgXCJjZHAuaTE4blwiLCBcImJhY2tib25lXCJdLCBmYWN0b3J5KTtcblx0ZWxzZSBpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpXG5cdFx0ZXhwb3J0c1tcIkZyYW1ld29ya1wiXSA9IGZhY3RvcnkocmVxdWlyZShcImpxdWVyeVwiKSwgcmVxdWlyZShcImNkcC5pMThuXCIpLCByZXF1aXJlKFwiYmFja2JvbmVcIikpO1xuXHRlbHNlXG5cdFx0cm9vdFtcIkNEUFwiXSA9IHJvb3RbXCJDRFBcIl0gfHwge30sIHJvb3RbXCJDRFBcIl1bXCJGcmFtZXdvcmtcIl0gPSBmYWN0b3J5KHJvb3RbXCJqUXVlcnlcIl0sIHJvb3RbXCJDRFBcIl0sIHJvb3RbXCJCYWNrYm9uZVwiXSk7XG59KSh0aGlzLCBmdW5jdGlvbihfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzBfXywgX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV8zX18sIF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfNF9fKSB7XG5yZXR1cm4gXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2svdW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbiIsIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwge1xuIFx0XHRcdFx0Y29uZmlndXJhYmxlOiBmYWxzZSxcbiBcdFx0XHRcdGVudW1lcmFibGU6IHRydWUsXG4gXHRcdFx0XHRnZXQ6IGdldHRlclxuIFx0XHRcdH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2svYm9vdHN0cmFwIGViNWVmYTNmZjNiMzZlODA0YjM3IiwiLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uL0B0eXBlcy9pMThuZXh0LmQudHNcIiAvPlxyXG4vKiB0c2xpbnQ6ZGlzYWJsZTptYXgtbGluZS1sZW5ndGggKi9cclxuXHJcbm5hbWVzcGFjZSBDRFAge1xyXG5cclxuICAgIGltcG9ydCBQcm9taXNlID0gQ0RQLlByb21pc2U7XHJcbiAgICBpbXBvcnQgSTE4bmV4dCA9IGkxOG5leHQuaTE4bjtcclxuXHJcbiAgICBleHBvcnQgbmFtZXNwYWNlIEkxOE4ge1xyXG4gICAgICAgIGV4cG9ydCB0eXBlIEkxOG4gPSBJMThuZXh0LmkxOG47XHJcbiAgICAgICAgZXhwb3J0IHR5cGUgT3B0aW9ucyA9IEkxOG5leHQuSW5pdE9wdGlvbnMgJiB7IFtrZXlzOiBzdHJpbmddOiBhbnkgfTtcclxuICAgICAgICBleHBvcnQgdHlwZSBUcmFuc2xhdGlvbk9wdGlvbnMgPSBJMThuZXh0LlRyYW5zbGF0aW9uT3B0aW9ucztcclxuICAgICAgICBleHBvcnQgdHlwZSBUcmFuc2xhdGlvbkZ1bmN0aW9uID0gSTE4bmV4dC5UcmFuc2xhdGlvbkZ1bmN0aW9uO1xyXG4gICAgICAgIGV4cG9ydCB0eXBlIEludGVycG9sYXRpb25PcHRpb25zID0gSTE4bmV4dC5JbnRlcnBvbGF0aW9uT3B0aW9ucztcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBUQUcgPSBcIltDRFAuaTE4bl0gXCI7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZW4gRGlyZWN0IGFjY2Vzc29yIGZvciBpMThuZXh0IG9iamVjdC5cclxuICAgICAqIEBqYSBpMThuZXh0IOOBuOOBruODgOOCpOODrOOCr+ODiOOCouOCr+OCu+OCuVxyXG4gICAgICovXHJcbiAgICBleHBvcnQgbGV0IGkxOG46IEkxOE4uSTE4bjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBlbiBPcHRpb25zIGludGVyZmFjZSBmb3IgbG9jYWxpemUgc2V0dGluZ3NcclxuICAgICAqIEBqYSDjg63jg7zjgqvjg6njgqTjgrroqK3lrprnlKjjgqrjg5fjgrfjg6fjg7NcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBJMThOU2V0dGluZ3Mge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBlcyBmYWxsYmFjayBzdHJpbmcgcmVzb3VyY2Ugc2V0dGluZyB3aGVuIGF1dG9tYXRpYyByZXNvbHV0aW9uIGZhaWxlZC5cclxuICAgICAgICAgKiBAamEg6Ieq5YuV6Kej5rG644Gn44GN44Gq44GL44Gj44Gf44Go44GN44Gr5L2/55So44GZ44KL44Oq44K944O844K5XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAZXhhbXBsZSA8YnI+XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBgYGB0c1xyXG4gICAgICAgICAqICBlbjoge1xyXG4gICAgICAgICAqICAgICAgbWVzc2FnZXM6IFwiL3Jlcy9sb2NhbGVzL21lc3NhZ2VzLmVuLVVTLmpzb25cIixcclxuICAgICAgICAgKiAgfSxcclxuICAgICAgICAgKiAgamE6IHtcclxuICAgICAgICAgKiAgICAgIG1lc3NhZ2VzOiBcIi9yZXMvbG9jYWxlcy9tZXNzYWdlcy5qYS1KUC5qc29uXCIsXHJcbiAgICAgICAgICogIH0sXHJcbiAgICAgICAgICogYGBgXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZmFsbGJhY2tSZXNvdXJjZXM/OiB7IFtsbmc6IHN0cmluZ106IHsgW25zOiBzdHJpbmddOiBzdHJpbmcgfSB9O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAZXMgc2V0IHByZWxvYWQgcmVzb3VyY2UgbmFtZVxyXG4gICAgICAgICAqIEBqYSBwcmVsb2FkIOOBmeOCi+ODquOCveODvOOCueaMh+WumlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQGV4YW1wbGUgPGJyPlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogYGBgdHNcclxuICAgICAgICAgKiAgcHJlbG9hZDogW1xyXG4gICAgICAgICAqICAgICAgXCJlbi1VU1wiLFxyXG4gICAgICAgICAqICAgICAgXCJqYS1KUFwiLFxyXG4gICAgICAgICAqICBdLFxyXG4gICAgICAgICAqIGBgYFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHByZWxvYWQ/OiBzdHJpbmdbXTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQGVzIGkxOG5leHQgcmF3IG9wdGlvbnNcclxuICAgICAgICAgKiBAamEgaTE4bmV4dCDjgYzmj5DkvpvjgZnjgovjgqrjg5fjgrfjg6fjg7NcclxuICAgICAgICAgKi9cclxuICAgICAgICBvcHRpb25zPzogSTE4Ti5PcHRpb25zO1xyXG4gICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBlbiBpbml0aWFsaXplIGkxOG5leHQuIDxicj5cclxuICAgICAqICAgICBJdCdsbCBiZSB1c3VhbGx5IGNhbGxlZCBmcm9tIGZyYW1ld29yay5cclxuICAgICAqIEBqYSBpMThuZXh0IOOBruWIneacn+WMliA8YnI+XHJcbiAgICAgKiAgICAg6YCa5bi444GvIEZyYW1ld29yayDjgYzlkbzjgbPlh7rjgZnjgIJcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGluaXRpYWxpemVJMThOKHNldHRpbmdzPzogSTE4TlNldHRpbmdzKTogSVByb21pc2VCYXNlPGFueT4ge1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGkxOG5TZXR0aW5nczogSTE4TlNldHRpbmdzID0gc2V0dGluZ3MgfHwge307XHJcbiAgICAgICAgICAgIGkxOG5TZXR0aW5ncy5vcHRpb25zID0gaTE4blNldHRpbmdzLm9wdGlvbnMgfHwge307XHJcblxyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaTE4bk9wdGlvbnM6IEkxOE4uT3B0aW9ucyA9ICgocmVzb3VyY2VzOiB7IFtsbmc6IHN0cmluZ106IHsgW25zOiBzdHJpbmddOiBzdHJpbmcgfSB9KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc291cmNlcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGxuZyBpbiByZXNvdXJjZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXNvdXJjZXMuaGFzT3duUHJvcGVydHkobG5nKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgbnMgaW4gcmVzb3VyY2VzW2xuZ10pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc291cmNlc1tsbmddLmhhc093blByb3BlcnR5KG5zKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb3VyY2VzW2xuZ11bbnNdID0gZ2V0TG9jYWxlRmFsbGJhY2tSZXNvdXJjZShyZXNvdXJjZXNbbG5nXVtuc10pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGkxOG5TZXR0aW5ncy5vcHRpb25zLnJlc291cmNlcyA9IDxhbnk+cmVzb3VyY2VzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaTE4blNldHRpbmdzLm9wdGlvbnM7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGkxOG5TZXR0aW5ncy5vcHRpb25zO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pKGkxOG5TZXR0aW5ncy5mYWxsYmFja1Jlc291cmNlcyk7XHJcblxyXG4gICAgICAgICAgICAgICAgcmVxdWlyZShbXCJqcXVlcnlJMThuZXh0XCJdLCAoJDE4TmV4dDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVxdWlyZShbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiaTE4bmV4dFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcImkxOG5leHRYSFJCYWNrZW5kXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiaTE4bmV4dExvY2FsU3RvcmFnZUNhY2hlXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiaTE4bmV4dFNwcmludGZQb3N0UHJvY2Vzc29yXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiaTE4bmV4dEJyb3dzZXJMYW5ndWFnZURldGVjdG9yXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXSwgKGkxOG5leHQ6IEkxOE4uSTE4blxyXG4gICAgICAgICAgICAgICAgICAgICAgICAsIEJhY2tlbmQ6IGFueVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAsIENhY2hlOiBhbnlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLCBQb3N0UHJvY2Vzc29yOiBhbnlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLCBMYW5ndWFnZURldGVjdG9yOiBhbnlcclxuICAgICAgICAgICAgICAgICAgICApID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkxOG5leHRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudXNlKEJhY2tlbmQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnVzZShDYWNoZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudXNlKFBvc3RQcm9jZXNzb3IpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnVzZShMYW5ndWFnZURldGVjdG9yKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5pbml0KGkxOG5PcHRpb25zLCAoZXJyb3I6IGFueSwgdDogSTE4Ti5UcmFuc2xhdGlvbkZ1bmN0aW9uKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQxOE5leHQuaW5pdChpMThuZXh0LCAkLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0TmFtZTogXCJ0XCIsICAgICAgICAgICAgICAgICAgICAgICAgIC8vIC0tPiBhcHBlbmRzICQudCA9IGkxOG5leHQudFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaTE4bk5hbWU6IFwiaTE4blwiLCAgICAgICAgICAgICAgICAgICAvLyAtLT4gYXBwZW5kcyAkLmkxOG4gPSBpMThuZXh0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVOYW1lOiBcImxvY2FsaXplXCIsICAgICAgICAgICAgIC8vIC0tPiBhcHBlbmRzICQoc2VsZWN0b3IpLmxvY2FsaXplKG9wdHMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0b3JBdHRyOiBcImRhdGEtaTE4blwiLCAgICAgICAgICAvLyBzZWxlY3RvciBmb3IgdHJhbnNsYXRpbmcgZWxlbWVudHNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldEF0dHI6IFwiaTE4bi10YXJnZXRcIiwgICAgICAgICAgLy8gZGF0YS0oKSBhdHRyaWJ1dGUgdG8gZ3JhYiB0YXJnZXQgZWxlbWVudCB0byB0cmFuc2xhdGUgKGlmIGRpZmZyZW50IHRoZW4gaXRzZWxmKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uc0F0dHI6IFwiaTE4bi1vcHRpb25zXCIsICAgICAgICAvLyBkYXRhLSgpIGF0dHJpYnV0ZSB0aGF0IGNvbnRhaW5zIG9wdGlvbnMsIHdpbGwgbG9hZC9zZXQgaWYgdXNlT3B0aW9uc0F0dHIgPSB0cnVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VPcHRpb25zQXR0cjogZmFsc2UsICAgICAgICAgICAgICAvLyBubyB1c2Ugb3B0aW9uc0F0dHJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlRGVmYXVsdFZhbHVlRnJvbUNvbnRlbnQ6IHRydWUgIC8vIHBhcnNlcyBkZWZhdWx0IHZhbHVlcyBmcm9tIGNvbnRlbnQgZWxlLnZhbCBvciBlbGUudGV4dFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaTE4bmV4dCAzLjQuMTogcmVzb3VyY2VzIOOBjOaMh+WumuOBleOCjOOCi+OBqCBwcmVsb2FkIOOBjOiqreOBv+i+vOOBvuOCjOOBquOBhOOBn+OCgeOAgeWGjeiqreOBv+i+vOOBv+WHpueQhuOCkuihjOOBhi5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkxOG5leHQub3B0aW9ucy5yZXNvdXJjZXMgJiYgaTE4bmV4dC5vcHRpb25zLnByZWxvYWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9wdGlvbnMg44GL44KJ44OX44Ot44OR44OG44Kj44KS5LiA5pem5YmK6ZmkLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgX3ByZWxvYWQgPSBpMThuZXh0Lm9wdGlvbnMucHJlbG9hZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IF9yZXNvdXJjZXMgPSBpMThuZXh0Lm9wdGlvbnMucmVzb3VyY2VzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGkxOG5leHQub3B0aW9ucy5yZXNvdXJjZXM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgaTE4bmV4dC5vcHRpb25zLnByZWxvYWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpMThuZXh0LmxvYWRMYW5ndWFnZXMoX3ByZWxvYWQsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBvcHRpb25zIOOCkuWFg+OBq+aIu+OBmVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkxOG5leHQub3B0aW9ucy5yZXNvdXJjZXMgPSBfcmVzb3VyY2VzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkxOG5leHQub3B0aW9ucy5wcmVsb2FkID0gX3ByZWxvYWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ0RQLmkxOG4gPSBpMThuZXh0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ0RQLmkxOG4gPSBpMThuZXh0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZWplY3QoZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBlcyBnZXQgc3RyaW5nIHJlc291cmNlIGZvciBmYWxsYmFjay5cclxuICAgICAqIEBqcyBGYWxsYmFjayDnlKjjg63jg7zjgqvjg6njgqTjgrrjg6rjgr3jg7zjgrnjga7lj5blvpdcclxuICAgICAqXHJcbiAgICAgKiBAaW50ZXJuYWxcclxuICAgICAqIEByZXR1cm5zXHJcbiAgICAgKiAgIC0gYGVuYCBmYWxsYmFjayByZXNvdXJjZSBvYmplY3RcclxuICAgICAqICAgLSBgamFgIGZhbGxiYWNrIOODquOCveODvOOCueOCquODluOCuOOCp+OCr+ODiFxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBnZXRMb2NhbGVGYWxsYmFja1Jlc291cmNlKHBhdGg6IHN0cmluZyk6IGFueSB7XHJcbiAgICAgICAgbGV0IGpzb246IEpTT047XHJcbiAgICAgICAgbGV0IGVycm9yOiBFcnJvckluZm87XHJcbiAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgdXJsOiBDRFAudG9VcmwocGF0aCksXHJcbiAgICAgICAgICAgIG1ldGhvZDogXCJHRVRcIixcclxuICAgICAgICAgICAgYXN5bmM6IGZhbHNlLFxyXG4gICAgICAgICAgICBkYXRhVHlwZTogXCJqc29uXCIsXHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IChkYXRhOiBKU09OKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBqc29uID0gZGF0YTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZXJyb3I6ICh4aHI6IEpRdWVyeVhIUiwgc3RhdHVzOiBzdHJpbmcpID0+IHtcclxuICAgICAgICAgICAgICAgIGVycm9yID0gbWFrZUVycm9ySW5mbyhcclxuICAgICAgICAgICAgICAgICAgICBSRVNVTFRfQ09ERS5FUlJPUl9DRFBfSTE4Tl9JTklUSUFMSVpFX0ZBSUxFRCxcclxuICAgICAgICAgICAgICAgICAgICBUQUcsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJhamF4IHJlcXVlc3QgZmFpbGVkLiBzdGF0dXM6IFwiICsgc3RhdHVzXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmIChudWxsICE9IGVycm9yKSB7XHJcbiAgICAgICAgICAgIHRocm93IGVycm9yO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGpzb247XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbi8vIGpxdWVyeS1pMThuZXh0IGV4dGVuc2lvbnNcclxuXHJcbmludGVyZmFjZSBKUXVlcnlTdGF0aWMge1xyXG4gICAgaTE4bjogQ0RQLkkxOE4uSTE4bjtcclxuICAgIHQ6IChrZXk6IHN0cmluZywgb3B0aW9ucz86IENEUC5JMThOLk9wdGlvbnMpID0+IHN0cmluZztcclxufVxyXG5cclxuaW50ZXJmYWNlIEpRdWVyeSB7XHJcbiAgICBsb2NhbGl6ZTogKG9wdGlvbnM/OiBDRFAuSTE4Ti5UcmFuc2xhdGlvbk9wdGlvbnMpID0+IEpRdWVyeTtcclxufVxyXG5cclxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuLy8gY2RwLmkxOG4gZGVjbGFyYXRpb25cclxuXHJcbmRlY2xhcmUgbW9kdWxlIFwiY2RwLmkxOG5cIiB7XHJcbiAgICBleHBvcnQgPSBDRFA7XHJcbn1cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGNkcDovLy9DRFAvaTE4bi50cyIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV8wX187XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gZXh0ZXJuYWwge1wicm9vdFwiOlwialF1ZXJ5XCIsXCJjb21tb25qc1wiOlwianF1ZXJ5XCIsXCJjb21tb25qczJcIjpcImpxdWVyeVwiLFwiYW1kXCI6XCJqcXVlcnlcIn1cbi8vIG1vZHVsZSBpZCA9IDBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzJfXztcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBleHRlcm5hbCB7XCJyb290XCI6XCJDRFBcIixcImNvbW1vbmpzXCI6XCJjZHAuY29yZVwiLFwiY29tbW9uanMyXCI6XCJjZHAuY29yZVwiLFwiYW1kXCI6XCJjZHAuY29yZVwifVxuLy8gbW9kdWxlIGlkID0gMlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfM19fO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIHtcInJvb3RcIjpcIkNEUFwiLFwiY29tbW9uanNcIjpcImNkcC5wcm9taXNlXCIsXCJjb21tb25qczJcIjpcImNkcC5wcm9taXNlXCIsXCJhbWRcIjpcImNkcC5wcm9taXNlXCJ9XG4vLyBtb2R1bGUgaWQgPSAzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIihmdW5jdGlvbiAoZ2xvYmFsLCBmYWN0b3J5KSB7XG4gIHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyA/IG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpIDpcbiAgdHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kID8gZGVmaW5lKGZhY3RvcnkpIDpcbiAgKGdsb2JhbC5qcXVlcnlJMThuZXh0ID0gZmFjdG9yeSgpKTtcbn0odGhpcywgKGZ1bmN0aW9uICgpIHsgJ3VzZSBzdHJpY3QnO1xuXG52YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9O1xuXG52YXIgZGVmYXVsdHMgPSB7XG4gIHROYW1lOiAndCcsXG4gIGkxOG5OYW1lOiAnaTE4bicsXG4gIGhhbmRsZU5hbWU6ICdsb2NhbGl6ZScsXG4gIHNlbGVjdG9yQXR0cjogJ2RhdGEtaTE4bicsXG4gIHRhcmdldEF0dHI6ICdpMThuLXRhcmdldCcsXG4gIG9wdGlvbnNBdHRyOiAnaTE4bi1vcHRpb25zJyxcbiAgdXNlT3B0aW9uc0F0dHI6IGZhbHNlLFxuICBwYXJzZURlZmF1bHRWYWx1ZUZyb21Db250ZW50OiB0cnVlXG59O1xuXG5mdW5jdGlvbiBpbml0KGkxOG5leHQsICQpIHtcbiAgdmFyIG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IHt9O1xuXG5cbiAgb3B0aW9ucyA9IF9leHRlbmRzKHt9LCBkZWZhdWx0cywgb3B0aW9ucyk7XG5cbiAgZnVuY3Rpb24gcGFyc2UoZWxlLCBrZXksIG9wdHMpIHtcbiAgICBpZiAoa2V5Lmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xuXG4gICAgdmFyIGF0dHIgPSAndGV4dCc7XG5cbiAgICBpZiAoa2V5LmluZGV4T2YoJ1snKSA9PT0gMCkge1xuICAgICAgdmFyIHBhcnRzID0ga2V5LnNwbGl0KCddJyk7XG4gICAgICBrZXkgPSBwYXJ0c1sxXTtcbiAgICAgIGF0dHIgPSBwYXJ0c1swXS5zdWJzdHIoMSwgcGFydHNbMF0ubGVuZ3RoIC0gMSk7XG4gICAgfVxuXG4gICAgaWYgKGtleS5pbmRleE9mKCc7JykgPT09IGtleS5sZW5ndGggLSAxKSB7XG4gICAgICBrZXkgPSBrZXkuc3Vic3RyKDAsIGtleS5sZW5ndGggLSAyKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBleHRlbmREZWZhdWx0KG8sIHZhbCkge1xuICAgICAgaWYgKCFvcHRpb25zLnBhcnNlRGVmYXVsdFZhbHVlRnJvbUNvbnRlbnQpIHJldHVybiBvO1xuICAgICAgcmV0dXJuIF9leHRlbmRzKHt9LCBvLCB7IGRlZmF1bHRWYWx1ZTogdmFsIH0pO1xuICAgIH1cblxuICAgIGlmIChhdHRyID09PSAnaHRtbCcpIHtcbiAgICAgIGVsZS5odG1sKGkxOG5leHQudChrZXksIGV4dGVuZERlZmF1bHQob3B0cywgZWxlLmh0bWwoKSkpKTtcbiAgICB9IGVsc2UgaWYgKGF0dHIgPT09ICd0ZXh0Jykge1xuICAgICAgZWxlLnRleHQoaTE4bmV4dC50KGtleSwgZXh0ZW5kRGVmYXVsdChvcHRzLCBlbGUudGV4dCgpKSkpO1xuICAgIH0gZWxzZSBpZiAoYXR0ciA9PT0gJ3ByZXBlbmQnKSB7XG4gICAgICBlbGUucHJlcGVuZChpMThuZXh0LnQoa2V5LCBleHRlbmREZWZhdWx0KG9wdHMsIGVsZS5odG1sKCkpKSk7XG4gICAgfSBlbHNlIGlmIChhdHRyID09PSAnYXBwZW5kJykge1xuICAgICAgZWxlLmFwcGVuZChpMThuZXh0LnQoa2V5LCBleHRlbmREZWZhdWx0KG9wdHMsIGVsZS5odG1sKCkpKSk7XG4gICAgfSBlbHNlIGlmIChhdHRyLmluZGV4T2YoJ2RhdGEtJykgPT09IDApIHtcbiAgICAgIHZhciBkYXRhQXR0ciA9IGF0dHIuc3Vic3RyKCdkYXRhLScubGVuZ3RoKTtcbiAgICAgIHZhciB0cmFuc2xhdGVkID0gaTE4bmV4dC50KGtleSwgZXh0ZW5kRGVmYXVsdChvcHRzLCBlbGUuZGF0YShkYXRhQXR0cikpKTtcblxuICAgICAgLy8gd2UgY2hhbmdlIGludG8gdGhlIGRhdGEgY2FjaGVcbiAgICAgIGVsZS5kYXRhKGRhdGFBdHRyLCB0cmFuc2xhdGVkKTtcbiAgICAgIC8vIHdlIGNoYW5nZSBpbnRvIHRoZSBkb21cbiAgICAgIGVsZS5hdHRyKGF0dHIsIHRyYW5zbGF0ZWQpO1xuICAgIH0gZWxzZSB7XG4gICAgICBlbGUuYXR0cihhdHRyLCBpMThuZXh0LnQoa2V5LCBleHRlbmREZWZhdWx0KG9wdHMsIGVsZS5hdHRyKGF0dHIpKSkpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGxvY2FsaXplKGVsZSwgb3B0cykge1xuICAgIHZhciBrZXkgPSBlbGUuYXR0cihvcHRpb25zLnNlbGVjdG9yQXR0cik7XG4gICAgaWYgKCFrZXkgJiYgdHlwZW9mIGtleSAhPT0gJ3VuZGVmaW5lZCcgJiYga2V5ICE9PSBmYWxzZSkga2V5ID0gZWxlLnRleHQoKSB8fCBlbGUudmFsKCk7XG4gICAgaWYgKCFrZXkpIHJldHVybjtcblxuICAgIHZhciB0YXJnZXQgPSBlbGUsXG4gICAgICAgIHRhcmdldFNlbGVjdG9yID0gZWxlLmRhdGEob3B0aW9ucy50YXJnZXRBdHRyKTtcblxuICAgIGlmICh0YXJnZXRTZWxlY3RvcikgdGFyZ2V0ID0gZWxlLmZpbmQodGFyZ2V0U2VsZWN0b3IpIHx8IGVsZTtcblxuICAgIGlmICghb3B0cyAmJiBvcHRpb25zLnVzZU9wdGlvbnNBdHRyID09PSB0cnVlKSBvcHRzID0gZWxlLmRhdGEob3B0aW9ucy5vcHRpb25zQXR0cik7XG5cbiAgICBvcHRzID0gb3B0cyB8fCB7fTtcblxuICAgIGlmIChrZXkuaW5kZXhPZignOycpID49IDApIHtcbiAgICAgIHZhciBrZXlzID0ga2V5LnNwbGl0KCc7Jyk7XG5cbiAgICAgICQuZWFjaChrZXlzLCBmdW5jdGlvbiAobSwgaykge1xuICAgICAgICAvLyAudHJpbSgpOiBUcmltIHRoZSBjb21tYS1zZXBhcmF0ZWQgcGFyYW1ldGVycyBvbiB0aGUgZGF0YS1pMThuIGF0dHJpYnV0ZS5cbiAgICAgICAgaWYgKGsgIT09ICcnKSBwYXJzZSh0YXJnZXQsIGsudHJpbSgpLCBvcHRzKTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBwYXJzZSh0YXJnZXQsIGtleSwgb3B0cyk7XG4gICAgfVxuXG4gICAgaWYgKG9wdGlvbnMudXNlT3B0aW9uc0F0dHIgPT09IHRydWUpIHtcbiAgICAgIHZhciBjbG9uZSA9IHt9O1xuICAgICAgY2xvbmUgPSBfZXh0ZW5kcyh7IGNsb25lOiBjbG9uZSB9LCBvcHRzKTtcblxuICAgICAgZGVsZXRlIGNsb25lLmxuZztcbiAgICAgIGVsZS5kYXRhKG9wdGlvbnMub3B0aW9uc0F0dHIsIGNsb25lKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBoYW5kbGUob3B0cykge1xuICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgLy8gbG9jYWxpemUgZWxlbWVudCBpdHNlbGZcbiAgICAgIGxvY2FsaXplKCQodGhpcyksIG9wdHMpO1xuXG4gICAgICAvLyBsb2NhbGl6ZSBjaGlsZHJlblxuICAgICAgdmFyIGVsZW1lbnRzID0gJCh0aGlzKS5maW5kKCdbJyArIG9wdGlvbnMuc2VsZWN0b3JBdHRyICsgJ10nKTtcbiAgICAgIGVsZW1lbnRzLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICBsb2NhbGl6ZSgkKHRoaXMpLCBvcHRzKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9O1xuXG4gIC8vICQudCAkLmkxOG4gc2hvcnRjdXRcbiAgJFtvcHRpb25zLnROYW1lXSA9IGkxOG5leHQudC5iaW5kKGkxOG5leHQpO1xuICAkW29wdGlvbnMuaTE4bk5hbWVdID0gaTE4bmV4dDtcblxuICAvLyBzZWxlY3RvciBmdW5jdGlvbiAkKG15U2VsZWN0b3IpLmxvY2FsaXplKG9wdHMpO1xuICAkLmZuW29wdGlvbnMuaGFuZGxlTmFtZV0gPSBoYW5kbGU7XG59XG5cbnZhciBpbmRleCA9IHtcbiAgaW5pdDogaW5pdFxufTtcblxucmV0dXJuIGluZGV4O1xuXG59KSkpO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vZXh0ZXJuYWwvaTE4bmV4dC9zY3JpcHRzL2pxdWVyeS1pMThuZXh0LmpzXG4vLyBtb2R1bGUgaWQgPSA0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIihmdW5jdGlvbiAoZ2xvYmFsLCBmYWN0b3J5KSB7XG5cdHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyA/IG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpIDpcblx0dHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kID8gZGVmaW5lKGZhY3RvcnkpIDpcblx0KGdsb2JhbC5pMThuZXh0ID0gZmFjdG9yeSgpKTtcbn0odGhpcywgKGZ1bmN0aW9uICgpIHsgJ3VzZSBzdHJpY3QnO1xuXG52YXIgX3R5cGVvZiA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiID8gZnVuY3Rpb24gKG9iaikge1xuICByZXR1cm4gdHlwZW9mIG9iajtcbn0gOiBmdW5jdGlvbiAob2JqKSB7XG4gIHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqO1xufTtcblxuXG5cblxuXG5cblxuXG5cblxuXG52YXIgY2xhc3NDYWxsQ2hlY2sgPSBmdW5jdGlvbiAoaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7XG4gIGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTtcbiAgfVxufTtcblxuXG5cblxuXG5cblxuXG5cbnZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkge1xuICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07XG5cbiAgICBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7XG4gICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkge1xuICAgICAgICB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0YXJnZXQ7XG59O1xuXG5cblxudmFyIGluaGVyaXRzID0gZnVuY3Rpb24gKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7XG4gIGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTtcbiAgfVxuXG4gIHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwge1xuICAgIGNvbnN0cnVjdG9yOiB7XG4gICAgICB2YWx1ZTogc3ViQ2xhc3MsXG4gICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfVxuICB9KTtcbiAgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzO1xufTtcblxuXG5cblxuXG5cblxuXG5cblxuXG52YXIgcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiA9IGZ1bmN0aW9uIChzZWxmLCBjYWxsKSB7XG4gIGlmICghc2VsZikge1xuICAgIHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTtcbiAgfVxuXG4gIHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmO1xufTtcblxuXG5cblxuXG52YXIgc2xpY2VkVG9BcnJheSA9IGZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gc2xpY2VJdGVyYXRvcihhcnIsIGkpIHtcbiAgICB2YXIgX2FyciA9IFtdO1xuICAgIHZhciBfbiA9IHRydWU7XG4gICAgdmFyIF9kID0gZmFsc2U7XG4gICAgdmFyIF9lID0gdW5kZWZpbmVkO1xuXG4gICAgdHJ5IHtcbiAgICAgIGZvciAodmFyIF9pID0gYXJyW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3M7ICEoX24gPSAoX3MgPSBfaS5uZXh0KCkpLmRvbmUpOyBfbiA9IHRydWUpIHtcbiAgICAgICAgX2Fyci5wdXNoKF9zLnZhbHVlKTtcblxuICAgICAgICBpZiAoaSAmJiBfYXJyLmxlbmd0aCA9PT0gaSkgYnJlYWs7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBfZCA9IHRydWU7XG4gICAgICBfZSA9IGVycjtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgaWYgKCFfbiAmJiBfaVtcInJldHVyblwiXSkgX2lbXCJyZXR1cm5cIl0oKTtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIGlmIChfZCkgdGhyb3cgX2U7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIF9hcnI7XG4gIH1cblxuICByZXR1cm4gZnVuY3Rpb24gKGFyciwgaSkge1xuICAgIGlmIChBcnJheS5pc0FycmF5KGFycikpIHtcbiAgICAgIHJldHVybiBhcnI7XG4gICAgfSBlbHNlIGlmIChTeW1ib2wuaXRlcmF0b3IgaW4gT2JqZWN0KGFycikpIHtcbiAgICAgIHJldHVybiBzbGljZUl0ZXJhdG9yKGFyciwgaSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGF0dGVtcHQgdG8gZGVzdHJ1Y3R1cmUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlXCIpO1xuICAgIH1cbiAgfTtcbn0oKTtcblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxudmFyIHRvQ29uc3VtYWJsZUFycmF5ID0gZnVuY3Rpb24gKGFycikge1xuICBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBBcnJheShhcnIubGVuZ3RoKTsgaSA8IGFyci5sZW5ndGg7IGkrKykgYXJyMltpXSA9IGFycltpXTtcblxuICAgIHJldHVybiBhcnIyO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBBcnJheS5mcm9tKGFycik7XG4gIH1cbn07XG5cbnZhciBjb25zb2xlTG9nZ2VyID0ge1xuICB0eXBlOiAnbG9nZ2VyJyxcblxuICBsb2c6IGZ1bmN0aW9uIGxvZyhhcmdzKSB7XG4gICAgdGhpcy5vdXRwdXQoJ2xvZycsIGFyZ3MpO1xuICB9LFxuICB3YXJuOiBmdW5jdGlvbiB3YXJuKGFyZ3MpIHtcbiAgICB0aGlzLm91dHB1dCgnd2FybicsIGFyZ3MpO1xuICB9LFxuICBlcnJvcjogZnVuY3Rpb24gZXJyb3IoYXJncykge1xuICAgIHRoaXMub3V0cHV0KCdlcnJvcicsIGFyZ3MpO1xuICB9LFxuICBvdXRwdXQ6IGZ1bmN0aW9uIG91dHB1dCh0eXBlLCBhcmdzKSB7XG4gICAgdmFyIF9jb25zb2xlO1xuXG4gICAgLyogZXNsaW50IG5vLWNvbnNvbGU6IDAgKi9cbiAgICBpZiAoY29uc29sZSAmJiBjb25zb2xlW3R5cGVdKSAoX2NvbnNvbGUgPSBjb25zb2xlKVt0eXBlXS5hcHBseShfY29uc29sZSwgdG9Db25zdW1hYmxlQXJyYXkoYXJncykpO1xuICB9XG59O1xuXG52YXIgTG9nZ2VyID0gZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBMb2dnZXIoY29uY3JldGVMb2dnZXIpIHtcbiAgICB2YXIgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDoge307XG4gICAgY2xhc3NDYWxsQ2hlY2sodGhpcywgTG9nZ2VyKTtcblxuICAgIHRoaXMuaW5pdChjb25jcmV0ZUxvZ2dlciwgb3B0aW9ucyk7XG4gIH1cblxuICBMb2dnZXIucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbiBpbml0KGNvbmNyZXRlTG9nZ2VyKSB7XG4gICAgdmFyIG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHt9O1xuXG4gICAgdGhpcy5wcmVmaXggPSBvcHRpb25zLnByZWZpeCB8fCAnaTE4bmV4dDonO1xuICAgIHRoaXMubG9nZ2VyID0gY29uY3JldGVMb2dnZXIgfHwgY29uc29sZUxvZ2dlcjtcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgIHRoaXMuZGVidWcgPSBvcHRpb25zLmRlYnVnO1xuICB9O1xuXG4gIExvZ2dlci5wcm90b3R5cGUuc2V0RGVidWcgPSBmdW5jdGlvbiBzZXREZWJ1Zyhib29sKSB7XG4gICAgdGhpcy5kZWJ1ZyA9IGJvb2w7XG4gIH07XG5cbiAgTG9nZ2VyLnByb3RvdHlwZS5sb2cgPSBmdW5jdGlvbiBsb2coKSB7XG4gICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgIGFyZ3NbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuZm9yd2FyZChhcmdzLCAnbG9nJywgJycsIHRydWUpO1xuICB9O1xuXG4gIExvZ2dlci5wcm90b3R5cGUud2FybiA9IGZ1bmN0aW9uIHdhcm4oKSB7XG4gICAgZm9yICh2YXIgX2xlbjIgPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gQXJyYXkoX2xlbjIpLCBfa2V5MiA9IDA7IF9rZXkyIDwgX2xlbjI7IF9rZXkyKyspIHtcbiAgICAgIGFyZ3NbX2tleTJdID0gYXJndW1lbnRzW19rZXkyXTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5mb3J3YXJkKGFyZ3MsICd3YXJuJywgJycsIHRydWUpO1xuICB9O1xuXG4gIExvZ2dlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiBlcnJvcigpIHtcbiAgICBmb3IgKHZhciBfbGVuMyA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBBcnJheShfbGVuMyksIF9rZXkzID0gMDsgX2tleTMgPCBfbGVuMzsgX2tleTMrKykge1xuICAgICAgYXJnc1tfa2V5M10gPSBhcmd1bWVudHNbX2tleTNdO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLmZvcndhcmQoYXJncywgJ2Vycm9yJywgJycpO1xuICB9O1xuXG4gIExvZ2dlci5wcm90b3R5cGUuZGVwcmVjYXRlID0gZnVuY3Rpb24gZGVwcmVjYXRlKCkge1xuICAgIGZvciAodmFyIF9sZW40ID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW40KSwgX2tleTQgPSAwOyBfa2V5NCA8IF9sZW40OyBfa2V5NCsrKSB7XG4gICAgICBhcmdzW19rZXk0XSA9IGFyZ3VtZW50c1tfa2V5NF07XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuZm9yd2FyZChhcmdzLCAnd2FybicsICdXQVJOSU5HIERFUFJFQ0FURUQ6ICcsIHRydWUpO1xuICB9O1xuXG4gIExvZ2dlci5wcm90b3R5cGUuZm9yd2FyZCA9IGZ1bmN0aW9uIGZvcndhcmQoYXJncywgbHZsLCBwcmVmaXgsIGRlYnVnT25seSkge1xuICAgIGlmIChkZWJ1Z09ubHkgJiYgIXRoaXMuZGVidWcpIHJldHVybiBudWxsO1xuICAgIGlmICh0eXBlb2YgYXJnc1swXSA9PT0gJ3N0cmluZycpIGFyZ3NbMF0gPSAnJyArIHByZWZpeCArIHRoaXMucHJlZml4ICsgJyAnICsgYXJnc1swXTtcbiAgICByZXR1cm4gdGhpcy5sb2dnZXJbbHZsXShhcmdzKTtcbiAgfTtcblxuICBMb2dnZXIucHJvdG90eXBlLmNyZWF0ZSA9IGZ1bmN0aW9uIGNyZWF0ZShtb2R1bGVOYW1lKSB7XG4gICAgcmV0dXJuIG5ldyBMb2dnZXIodGhpcy5sb2dnZXIsIF9leHRlbmRzKHsgcHJlZml4OiB0aGlzLnByZWZpeCArICc6JyArIG1vZHVsZU5hbWUgKyAnOicgfSwgdGhpcy5vcHRpb25zKSk7XG4gIH07XG5cbiAgcmV0dXJuIExvZ2dlcjtcbn0oKTtcblxudmFyIGJhc2VMb2dnZXIgPSBuZXcgTG9nZ2VyKCk7XG5cbnZhciBFdmVudEVtaXR0ZXIgPSBmdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIEV2ZW50RW1pdHRlcigpIHtcbiAgICBjbGFzc0NhbGxDaGVjayh0aGlzLCBFdmVudEVtaXR0ZXIpO1xuXG4gICAgdGhpcy5vYnNlcnZlcnMgPSB7fTtcbiAgfVxuXG4gIEV2ZW50RW1pdHRlci5wcm90b3R5cGUub24gPSBmdW5jdGlvbiBvbihldmVudHMsIGxpc3RlbmVyKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgIGV2ZW50cy5zcGxpdCgnICcpLmZvckVhY2goZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICBfdGhpcy5vYnNlcnZlcnNbZXZlbnRdID0gX3RoaXMub2JzZXJ2ZXJzW2V2ZW50XSB8fCBbXTtcbiAgICAgIF90aGlzLm9ic2VydmVyc1tldmVudF0ucHVzaChsaXN0ZW5lcik7XG4gICAgfSk7XG4gIH07XG5cbiAgRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vZmYgPSBmdW5jdGlvbiBvZmYoZXZlbnQsIGxpc3RlbmVyKSB7XG4gICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICBpZiAoIXRoaXMub2JzZXJ2ZXJzW2V2ZW50XSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMub2JzZXJ2ZXJzW2V2ZW50XS5mb3JFYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmICghbGlzdGVuZXIpIHtcbiAgICAgICAgZGVsZXRlIF90aGlzMi5vYnNlcnZlcnNbZXZlbnRdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIGluZGV4ID0gX3RoaXMyLm9ic2VydmVyc1tldmVudF0uaW5kZXhPZihsaXN0ZW5lcik7XG4gICAgICAgIGlmIChpbmRleCA+IC0xKSB7XG4gICAgICAgICAgX3RoaXMyLm9ic2VydmVyc1tldmVudF0uc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICB9O1xuXG4gIEV2ZW50RW1pdHRlci5wcm90b3R5cGUuZW1pdCA9IGZ1bmN0aW9uIGVtaXQoZXZlbnQpIHtcbiAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW4gPiAxID8gX2xlbiAtIDEgOiAwKSwgX2tleSA9IDE7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgIGFyZ3NbX2tleSAtIDFdID0gYXJndW1lbnRzW19rZXldO1xuICAgIH1cblxuICAgIGlmICh0aGlzLm9ic2VydmVyc1tldmVudF0pIHtcbiAgICAgIHZhciBjbG9uZWQgPSBbXS5jb25jYXQodGhpcy5vYnNlcnZlcnNbZXZlbnRdKTtcbiAgICAgIGNsb25lZC5mb3JFYWNoKGZ1bmN0aW9uIChvYnNlcnZlcikge1xuICAgICAgICBvYnNlcnZlci5hcHBseSh1bmRlZmluZWQsIGFyZ3MpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMub2JzZXJ2ZXJzWycqJ10pIHtcbiAgICAgIHZhciBfY2xvbmVkID0gW10uY29uY2F0KHRoaXMub2JzZXJ2ZXJzWycqJ10pO1xuICAgICAgX2Nsb25lZC5mb3JFYWNoKGZ1bmN0aW9uIChvYnNlcnZlcikge1xuICAgICAgICB2YXIgX3JlZjtcblxuICAgICAgICBvYnNlcnZlci5hcHBseShvYnNlcnZlciwgKF9yZWYgPSBbZXZlbnRdKS5jb25jYXQuYXBwbHkoX3JlZiwgYXJncykpO1xuICAgICAgfSk7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBFdmVudEVtaXR0ZXI7XG59KCk7XG5cbmZ1bmN0aW9uIG1ha2VTdHJpbmcob2JqZWN0KSB7XG4gIGlmIChvYmplY3QgPT0gbnVsbCkgcmV0dXJuICcnO1xuICAvKiBlc2xpbnQgcHJlZmVyLXRlbXBsYXRlOiAwICovXG4gIHJldHVybiAnJyArIG9iamVjdDtcbn1cblxuZnVuY3Rpb24gY29weShhLCBzLCB0KSB7XG4gIGEuZm9yRWFjaChmdW5jdGlvbiAobSkge1xuICAgIGlmIChzW21dKSB0W21dID0gc1ttXTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGdldExhc3RPZlBhdGgob2JqZWN0LCBwYXRoLCBFbXB0eSkge1xuICBmdW5jdGlvbiBjbGVhbktleShrZXkpIHtcbiAgICByZXR1cm4ga2V5ICYmIGtleS5pbmRleE9mKCcjIyMnKSA+IC0xID8ga2V5LnJlcGxhY2UoLyMjIy9nLCAnLicpIDoga2V5O1xuICB9XG5cbiAgZnVuY3Rpb24gY2FuTm90VHJhdmVyc2VEZWVwZXIoKSB7XG4gICAgcmV0dXJuICFvYmplY3QgfHwgdHlwZW9mIG9iamVjdCA9PT0gJ3N0cmluZyc7XG4gIH1cblxuICB2YXIgc3RhY2sgPSB0eXBlb2YgcGF0aCAhPT0gJ3N0cmluZycgPyBbXS5jb25jYXQocGF0aCkgOiBwYXRoLnNwbGl0KCcuJyk7XG4gIHdoaWxlIChzdGFjay5sZW5ndGggPiAxKSB7XG4gICAgaWYgKGNhbk5vdFRyYXZlcnNlRGVlcGVyKCkpIHJldHVybiB7fTtcblxuICAgIHZhciBrZXkgPSBjbGVhbktleShzdGFjay5zaGlmdCgpKTtcbiAgICBpZiAoIW9iamVjdFtrZXldICYmIEVtcHR5KSBvYmplY3Rba2V5XSA9IG5ldyBFbXB0eSgpO1xuICAgIG9iamVjdCA9IG9iamVjdFtrZXldO1xuICB9XG5cbiAgaWYgKGNhbk5vdFRyYXZlcnNlRGVlcGVyKCkpIHJldHVybiB7fTtcbiAgcmV0dXJuIHtcbiAgICBvYmo6IG9iamVjdCxcbiAgICBrOiBjbGVhbktleShzdGFjay5zaGlmdCgpKVxuICB9O1xufVxuXG5mdW5jdGlvbiBzZXRQYXRoKG9iamVjdCwgcGF0aCwgbmV3VmFsdWUpIHtcbiAgdmFyIF9nZXRMYXN0T2ZQYXRoID0gZ2V0TGFzdE9mUGF0aChvYmplY3QsIHBhdGgsIE9iamVjdCksXG4gICAgICBvYmogPSBfZ2V0TGFzdE9mUGF0aC5vYmosXG4gICAgICBrID0gX2dldExhc3RPZlBhdGguaztcblxuICBvYmpba10gPSBuZXdWYWx1ZTtcbn1cblxuZnVuY3Rpb24gcHVzaFBhdGgob2JqZWN0LCBwYXRoLCBuZXdWYWx1ZSwgY29uY2F0KSB7XG4gIHZhciBfZ2V0TGFzdE9mUGF0aDIgPSBnZXRMYXN0T2ZQYXRoKG9iamVjdCwgcGF0aCwgT2JqZWN0KSxcbiAgICAgIG9iaiA9IF9nZXRMYXN0T2ZQYXRoMi5vYmosXG4gICAgICBrID0gX2dldExhc3RPZlBhdGgyLms7XG5cbiAgb2JqW2tdID0gb2JqW2tdIHx8IFtdO1xuICBpZiAoY29uY2F0KSBvYmpba10gPSBvYmpba10uY29uY2F0KG5ld1ZhbHVlKTtcbiAgaWYgKCFjb25jYXQpIG9ialtrXS5wdXNoKG5ld1ZhbHVlKTtcbn1cblxuZnVuY3Rpb24gZ2V0UGF0aChvYmplY3QsIHBhdGgpIHtcbiAgdmFyIF9nZXRMYXN0T2ZQYXRoMyA9IGdldExhc3RPZlBhdGgob2JqZWN0LCBwYXRoKSxcbiAgICAgIG9iaiA9IF9nZXRMYXN0T2ZQYXRoMy5vYmosXG4gICAgICBrID0gX2dldExhc3RPZlBhdGgzLms7XG5cbiAgaWYgKCFvYmopIHJldHVybiB1bmRlZmluZWQ7XG4gIHJldHVybiBvYmpba107XG59XG5cbmZ1bmN0aW9uIGRlZXBFeHRlbmQodGFyZ2V0LCBzb3VyY2UsIG92ZXJ3cml0ZSkge1xuICAvKiBlc2xpbnQgbm8tcmVzdHJpY3RlZC1zeW50YXg6IDAgKi9cbiAgZm9yICh2YXIgcHJvcCBpbiBzb3VyY2UpIHtcbiAgICBpZiAocHJvcCBpbiB0YXJnZXQpIHtcbiAgICAgIC8vIElmIHdlIHJlYWNoZWQgYSBsZWFmIHN0cmluZyBpbiB0YXJnZXQgb3Igc291cmNlIHRoZW4gcmVwbGFjZSB3aXRoIHNvdXJjZSBvciBza2lwIGRlcGVuZGluZyBvbiB0aGUgJ292ZXJ3cml0ZScgc3dpdGNoXG4gICAgICBpZiAodHlwZW9mIHRhcmdldFtwcm9wXSA9PT0gJ3N0cmluZycgfHwgdGFyZ2V0W3Byb3BdIGluc3RhbmNlb2YgU3RyaW5nIHx8IHR5cGVvZiBzb3VyY2VbcHJvcF0gPT09ICdzdHJpbmcnIHx8IHNvdXJjZVtwcm9wXSBpbnN0YW5jZW9mIFN0cmluZykge1xuICAgICAgICBpZiAob3ZlcndyaXRlKSB0YXJnZXRbcHJvcF0gPSBzb3VyY2VbcHJvcF07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkZWVwRXh0ZW5kKHRhcmdldFtwcm9wXSwgc291cmNlW3Byb3BdLCBvdmVyd3JpdGUpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0YXJnZXRbcHJvcF0gPSBzb3VyY2VbcHJvcF07XG4gICAgfVxuICB9XG4gIHJldHVybiB0YXJnZXQ7XG59XG5cbmZ1bmN0aW9uIHJlZ2V4RXNjYXBlKHN0cikge1xuICAvKiBlc2xpbnQgbm8tdXNlbGVzcy1lc2NhcGU6IDAgKi9cbiAgcmV0dXJuIHN0ci5yZXBsYWNlKC9bXFwtXFxbXFxdXFwvXFx7XFx9XFwoXFwpXFwqXFwrXFw/XFwuXFxcXFxcXlxcJFxcfF0vZywgJ1xcXFwkJicpO1xufVxuXG4vKiBlc2xpbnQtZGlzYWJsZSAqL1xudmFyIF9lbnRpdHlNYXAgPSB7XG4gIFwiJlwiOiBcIiZhbXA7XCIsXG4gIFwiPFwiOiBcIiZsdDtcIixcbiAgXCI+XCI6IFwiJmd0O1wiLFxuICAnXCInOiAnJnF1b3Q7JyxcbiAgXCInXCI6ICcmIzM5OycsXG4gIFwiL1wiOiAnJiN4MkY7J1xufTtcbi8qIGVzbGludC1lbmFibGUgKi9cblxuZnVuY3Rpb24gZXNjYXBlKGRhdGEpIHtcbiAgaWYgKHR5cGVvZiBkYXRhID09PSAnc3RyaW5nJykge1xuICAgIHJldHVybiBkYXRhLnJlcGxhY2UoL1smPD5cIidcXC9dL2csIGZ1bmN0aW9uIChzKSB7XG4gICAgICByZXR1cm4gX2VudGl0eU1hcFtzXTtcbiAgICB9KTtcbiAgfVxuXG4gIHJldHVybiBkYXRhO1xufVxuXG52YXIgUmVzb3VyY2VTdG9yZSA9IGZ1bmN0aW9uIChfRXZlbnRFbWl0dGVyKSB7XG4gIGluaGVyaXRzKFJlc291cmNlU3RvcmUsIF9FdmVudEVtaXR0ZXIpO1xuXG4gIGZ1bmN0aW9uIFJlc291cmNlU3RvcmUoZGF0YSkge1xuICAgIHZhciBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB7IG5zOiBbJ3RyYW5zbGF0aW9uJ10sIGRlZmF1bHROUzogJ3RyYW5zbGF0aW9uJyB9O1xuICAgIGNsYXNzQ2FsbENoZWNrKHRoaXMsIFJlc291cmNlU3RvcmUpO1xuXG4gICAgdmFyIF90aGlzID0gcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCBfRXZlbnRFbWl0dGVyLmNhbGwodGhpcykpO1xuXG4gICAgX3RoaXMuZGF0YSA9IGRhdGEgfHwge307XG4gICAgX3RoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG5cbiAgUmVzb3VyY2VTdG9yZS5wcm90b3R5cGUuYWRkTmFtZXNwYWNlcyA9IGZ1bmN0aW9uIGFkZE5hbWVzcGFjZXMobnMpIHtcbiAgICBpZiAodGhpcy5vcHRpb25zLm5zLmluZGV4T2YobnMpIDwgMCkge1xuICAgICAgdGhpcy5vcHRpb25zLm5zLnB1c2gobnMpO1xuICAgIH1cbiAgfTtcblxuICBSZXNvdXJjZVN0b3JlLnByb3RvdHlwZS5yZW1vdmVOYW1lc3BhY2VzID0gZnVuY3Rpb24gcmVtb3ZlTmFtZXNwYWNlcyhucykge1xuICAgIHZhciBpbmRleCA9IHRoaXMub3B0aW9ucy5ucy5pbmRleE9mKG5zKTtcbiAgICBpZiAoaW5kZXggPiAtMSkge1xuICAgICAgdGhpcy5vcHRpb25zLm5zLnNwbGljZShpbmRleCwgMSk7XG4gICAgfVxuICB9O1xuXG4gIFJlc291cmNlU3RvcmUucHJvdG90eXBlLmdldFJlc291cmNlID0gZnVuY3Rpb24gZ2V0UmVzb3VyY2UobG5nLCBucywga2V5KSB7XG4gICAgdmFyIG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMyAmJiBhcmd1bWVudHNbM10gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1szXSA6IHt9O1xuXG4gICAgdmFyIGtleVNlcGFyYXRvciA9IG9wdGlvbnMua2V5U2VwYXJhdG9yIHx8IHRoaXMub3B0aW9ucy5rZXlTZXBhcmF0b3I7XG4gICAgaWYgKGtleVNlcGFyYXRvciA9PT0gdW5kZWZpbmVkKSBrZXlTZXBhcmF0b3IgPSAnLic7XG5cbiAgICB2YXIgcGF0aCA9IFtsbmcsIG5zXTtcbiAgICBpZiAoa2V5ICYmIHR5cGVvZiBrZXkgIT09ICdzdHJpbmcnKSBwYXRoID0gcGF0aC5jb25jYXQoa2V5KTtcbiAgICBpZiAoa2V5ICYmIHR5cGVvZiBrZXkgPT09ICdzdHJpbmcnKSBwYXRoID0gcGF0aC5jb25jYXQoa2V5U2VwYXJhdG9yID8ga2V5LnNwbGl0KGtleVNlcGFyYXRvcikgOiBrZXkpO1xuXG4gICAgaWYgKGxuZy5pbmRleE9mKCcuJykgPiAtMSkge1xuICAgICAgcGF0aCA9IGxuZy5zcGxpdCgnLicpO1xuICAgIH1cblxuICAgIHJldHVybiBnZXRQYXRoKHRoaXMuZGF0YSwgcGF0aCk7XG4gIH07XG5cbiAgUmVzb3VyY2VTdG9yZS5wcm90b3R5cGUuYWRkUmVzb3VyY2UgPSBmdW5jdGlvbiBhZGRSZXNvdXJjZShsbmcsIG5zLCBrZXksIHZhbHVlKSB7XG4gICAgdmFyIG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gNCAmJiBhcmd1bWVudHNbNF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1s0XSA6IHsgc2lsZW50OiBmYWxzZSB9O1xuXG4gICAgdmFyIGtleVNlcGFyYXRvciA9IHRoaXMub3B0aW9ucy5rZXlTZXBhcmF0b3I7XG4gICAgaWYgKGtleVNlcGFyYXRvciA9PT0gdW5kZWZpbmVkKSBrZXlTZXBhcmF0b3IgPSAnLic7XG5cbiAgICB2YXIgcGF0aCA9IFtsbmcsIG5zXTtcbiAgICBpZiAoa2V5KSBwYXRoID0gcGF0aC5jb25jYXQoa2V5U2VwYXJhdG9yID8ga2V5LnNwbGl0KGtleVNlcGFyYXRvcikgOiBrZXkpO1xuXG4gICAgaWYgKGxuZy5pbmRleE9mKCcuJykgPiAtMSkge1xuICAgICAgcGF0aCA9IGxuZy5zcGxpdCgnLicpO1xuICAgICAgdmFsdWUgPSBucztcbiAgICAgIG5zID0gcGF0aFsxXTtcbiAgICB9XG5cbiAgICB0aGlzLmFkZE5hbWVzcGFjZXMobnMpO1xuXG4gICAgc2V0UGF0aCh0aGlzLmRhdGEsIHBhdGgsIHZhbHVlKTtcblxuICAgIGlmICghb3B0aW9ucy5zaWxlbnQpIHRoaXMuZW1pdCgnYWRkZWQnLCBsbmcsIG5zLCBrZXksIHZhbHVlKTtcbiAgfTtcblxuICBSZXNvdXJjZVN0b3JlLnByb3RvdHlwZS5hZGRSZXNvdXJjZXMgPSBmdW5jdGlvbiBhZGRSZXNvdXJjZXMobG5nLCBucywgcmVzb3VyY2VzKSB7XG4gICAgLyogZXNsaW50IG5vLXJlc3RyaWN0ZWQtc3ludGF4OiAwICovXG4gICAgZm9yICh2YXIgbSBpbiByZXNvdXJjZXMpIHtcbiAgICAgIGlmICh0eXBlb2YgcmVzb3VyY2VzW21dID09PSAnc3RyaW5nJykgdGhpcy5hZGRSZXNvdXJjZShsbmcsIG5zLCBtLCByZXNvdXJjZXNbbV0sIHsgc2lsZW50OiB0cnVlIH0pO1xuICAgIH1cbiAgICB0aGlzLmVtaXQoJ2FkZGVkJywgbG5nLCBucywgcmVzb3VyY2VzKTtcbiAgfTtcblxuICBSZXNvdXJjZVN0b3JlLnByb3RvdHlwZS5hZGRSZXNvdXJjZUJ1bmRsZSA9IGZ1bmN0aW9uIGFkZFJlc291cmNlQnVuZGxlKGxuZywgbnMsIHJlc291cmNlcywgZGVlcCwgb3ZlcndyaXRlKSB7XG4gICAgdmFyIHBhdGggPSBbbG5nLCBuc107XG4gICAgaWYgKGxuZy5pbmRleE9mKCcuJykgPiAtMSkge1xuICAgICAgcGF0aCA9IGxuZy5zcGxpdCgnLicpO1xuICAgICAgZGVlcCA9IHJlc291cmNlcztcbiAgICAgIHJlc291cmNlcyA9IG5zO1xuICAgICAgbnMgPSBwYXRoWzFdO1xuICAgIH1cblxuICAgIHRoaXMuYWRkTmFtZXNwYWNlcyhucyk7XG5cbiAgICB2YXIgcGFjayA9IGdldFBhdGgodGhpcy5kYXRhLCBwYXRoKSB8fCB7fTtcblxuICAgIGlmIChkZWVwKSB7XG4gICAgICBkZWVwRXh0ZW5kKHBhY2ssIHJlc291cmNlcywgb3ZlcndyaXRlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcGFjayA9IF9leHRlbmRzKHt9LCBwYWNrLCByZXNvdXJjZXMpO1xuICAgIH1cblxuICAgIHNldFBhdGgodGhpcy5kYXRhLCBwYXRoLCBwYWNrKTtcblxuICAgIHRoaXMuZW1pdCgnYWRkZWQnLCBsbmcsIG5zLCByZXNvdXJjZXMpO1xuICB9O1xuXG4gIFJlc291cmNlU3RvcmUucHJvdG90eXBlLnJlbW92ZVJlc291cmNlQnVuZGxlID0gZnVuY3Rpb24gcmVtb3ZlUmVzb3VyY2VCdW5kbGUobG5nLCBucykge1xuICAgIGlmICh0aGlzLmhhc1Jlc291cmNlQnVuZGxlKGxuZywgbnMpKSB7XG4gICAgICBkZWxldGUgdGhpcy5kYXRhW2xuZ11bbnNdO1xuICAgIH1cbiAgICB0aGlzLnJlbW92ZU5hbWVzcGFjZXMobnMpO1xuXG4gICAgdGhpcy5lbWl0KCdyZW1vdmVkJywgbG5nLCBucyk7XG4gIH07XG5cbiAgUmVzb3VyY2VTdG9yZS5wcm90b3R5cGUuaGFzUmVzb3VyY2VCdW5kbGUgPSBmdW5jdGlvbiBoYXNSZXNvdXJjZUJ1bmRsZShsbmcsIG5zKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0UmVzb3VyY2UobG5nLCBucykgIT09IHVuZGVmaW5lZDtcbiAgfTtcblxuICBSZXNvdXJjZVN0b3JlLnByb3RvdHlwZS5nZXRSZXNvdXJjZUJ1bmRsZSA9IGZ1bmN0aW9uIGdldFJlc291cmNlQnVuZGxlKGxuZywgbnMpIHtcbiAgICBpZiAoIW5zKSBucyA9IHRoaXMub3B0aW9ucy5kZWZhdWx0TlM7XG5cbiAgICAvLyBDT01QQVRJQklMSVRZOiByZW1vdmUgZXh0ZW5kIGluIHYyLjEuMFxuICAgIGlmICh0aGlzLm9wdGlvbnMuY29tcGF0aWJpbGl0eUFQSSA9PT0gJ3YxJykgcmV0dXJuIF9leHRlbmRzKHt9LCB0aGlzLmdldFJlc291cmNlKGxuZywgbnMpKTtcblxuICAgIHJldHVybiB0aGlzLmdldFJlc291cmNlKGxuZywgbnMpO1xuICB9O1xuXG4gIFJlc291cmNlU3RvcmUucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uIHRvSlNPTigpIHtcbiAgICByZXR1cm4gdGhpcy5kYXRhO1xuICB9O1xuXG4gIHJldHVybiBSZXNvdXJjZVN0b3JlO1xufShFdmVudEVtaXR0ZXIpO1xuXG52YXIgcG9zdFByb2Nlc3NvciA9IHtcblxuICBwcm9jZXNzb3JzOiB7fSxcblxuICBhZGRQb3N0UHJvY2Vzc29yOiBmdW5jdGlvbiBhZGRQb3N0UHJvY2Vzc29yKG1vZHVsZSkge1xuICAgIHRoaXMucHJvY2Vzc29yc1ttb2R1bGUubmFtZV0gPSBtb2R1bGU7XG4gIH0sXG4gIGhhbmRsZTogZnVuY3Rpb24gaGFuZGxlKHByb2Nlc3NvcnMsIHZhbHVlLCBrZXksIG9wdGlvbnMsIHRyYW5zbGF0b3IpIHtcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgcHJvY2Vzc29ycy5mb3JFYWNoKGZ1bmN0aW9uIChwcm9jZXNzb3IpIHtcbiAgICAgIGlmIChfdGhpcy5wcm9jZXNzb3JzW3Byb2Nlc3Nvcl0pIHZhbHVlID0gX3RoaXMucHJvY2Vzc29yc1twcm9jZXNzb3JdLnByb2Nlc3ModmFsdWUsIGtleSwgb3B0aW9ucywgdHJhbnNsYXRvcik7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cbn07XG5cbnZhciBUcmFuc2xhdG9yID0gZnVuY3Rpb24gKF9FdmVudEVtaXR0ZXIpIHtcbiAgaW5oZXJpdHMoVHJhbnNsYXRvciwgX0V2ZW50RW1pdHRlcik7XG5cbiAgZnVuY3Rpb24gVHJhbnNsYXRvcihzZXJ2aWNlcykge1xuICAgIHZhciBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB7fTtcbiAgICBjbGFzc0NhbGxDaGVjayh0aGlzLCBUcmFuc2xhdG9yKTtcblxuICAgIHZhciBfdGhpcyA9IHBvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgX0V2ZW50RW1pdHRlci5jYWxsKHRoaXMpKTtcblxuICAgIGNvcHkoWydyZXNvdXJjZVN0b3JlJywgJ2xhbmd1YWdlVXRpbHMnLCAncGx1cmFsUmVzb2x2ZXInLCAnaW50ZXJwb2xhdG9yJywgJ2JhY2tlbmRDb25uZWN0b3InXSwgc2VydmljZXMsIF90aGlzKTtcblxuICAgIF90aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgIF90aGlzLmxvZ2dlciA9IGJhc2VMb2dnZXIuY3JlYXRlKCd0cmFuc2xhdG9yJyk7XG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG5cbiAgVHJhbnNsYXRvci5wcm90b3R5cGUuY2hhbmdlTGFuZ3VhZ2UgPSBmdW5jdGlvbiBjaGFuZ2VMYW5ndWFnZShsbmcpIHtcbiAgICBpZiAobG5nKSB0aGlzLmxhbmd1YWdlID0gbG5nO1xuICB9O1xuXG4gIFRyYW5zbGF0b3IucHJvdG90eXBlLmV4aXN0cyA9IGZ1bmN0aW9uIGV4aXN0cyhrZXkpIHtcbiAgICB2YXIgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogeyBpbnRlcnBvbGF0aW9uOiB7fSB9O1xuXG4gICAgdmFyIHJlc29sdmVkID0gdGhpcy5yZXNvbHZlKGtleSwgb3B0aW9ucyk7XG4gICAgcmV0dXJuIHJlc29sdmVkICYmIHJlc29sdmVkLnJlcyAhPT0gdW5kZWZpbmVkO1xuICB9O1xuXG4gIFRyYW5zbGF0b3IucHJvdG90eXBlLmV4dHJhY3RGcm9tS2V5ID0gZnVuY3Rpb24gZXh0cmFjdEZyb21LZXkoa2V5LCBvcHRpb25zKSB7XG4gICAgdmFyIG5zU2VwYXJhdG9yID0gb3B0aW9ucy5uc1NlcGFyYXRvciB8fCB0aGlzLm9wdGlvbnMubnNTZXBhcmF0b3I7XG4gICAgaWYgKG5zU2VwYXJhdG9yID09PSB1bmRlZmluZWQpIG5zU2VwYXJhdG9yID0gJzonO1xuICAgIHZhciBrZXlTZXBhcmF0b3IgPSBvcHRpb25zLmtleVNlcGFyYXRvciB8fCB0aGlzLm9wdGlvbnMua2V5U2VwYXJhdG9yIHx8ICcuJztcblxuICAgIHZhciBuYW1lc3BhY2VzID0gb3B0aW9ucy5ucyB8fCB0aGlzLm9wdGlvbnMuZGVmYXVsdE5TO1xuICAgIGlmIChuc1NlcGFyYXRvciAmJiBrZXkuaW5kZXhPZihuc1NlcGFyYXRvcikgPiAtMSkge1xuICAgICAgdmFyIHBhcnRzID0ga2V5LnNwbGl0KG5zU2VwYXJhdG9yKTtcbiAgICAgIGlmIChuc1NlcGFyYXRvciAhPT0ga2V5U2VwYXJhdG9yIHx8IG5zU2VwYXJhdG9yID09PSBrZXlTZXBhcmF0b3IgJiYgdGhpcy5vcHRpb25zLm5zLmluZGV4T2YocGFydHNbMF0pID4gLTEpIG5hbWVzcGFjZXMgPSBwYXJ0cy5zaGlmdCgpO1xuICAgICAga2V5ID0gcGFydHMuam9pbihrZXlTZXBhcmF0b3IpO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIG5hbWVzcGFjZXMgPT09ICdzdHJpbmcnKSBuYW1lc3BhY2VzID0gW25hbWVzcGFjZXNdO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGtleToga2V5LFxuICAgICAgbmFtZXNwYWNlczogbmFtZXNwYWNlc1xuICAgIH07XG4gIH07XG5cbiAgVHJhbnNsYXRvci5wcm90b3R5cGUudHJhbnNsYXRlID0gZnVuY3Rpb24gdHJhbnNsYXRlKGtleXMpIHtcbiAgICB2YXIgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDoge307XG5cbiAgICBpZiAoKHR5cGVvZiBvcHRpb25zID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihvcHRpb25zKSkgIT09ICdvYmplY3QnKSB7XG4gICAgICAvKiBlc2xpbnQgcHJlZmVyLXJlc3QtcGFyYW1zOiAwICovXG4gICAgICBvcHRpb25zID0gdGhpcy5vcHRpb25zLm92ZXJsb2FkVHJhbnNsYXRpb25PcHRpb25IYW5kbGVyKGFyZ3VtZW50cyk7XG4gICAgfVxuXG4gICAgLy8gbm9uIHZhbGlkIGtleXMgaGFuZGxpbmdcbiAgICBpZiAoa2V5cyA9PT0gdW5kZWZpbmVkIHx8IGtleXMgPT09IG51bGwgfHwga2V5cyA9PT0gJycpIHJldHVybiAnJztcbiAgICBpZiAodHlwZW9mIGtleXMgPT09ICdudW1iZXInKSBrZXlzID0gU3RyaW5nKGtleXMpO1xuICAgIGlmICh0eXBlb2Yga2V5cyA9PT0gJ3N0cmluZycpIGtleXMgPSBba2V5c107XG5cbiAgICAvLyBzZXBhcmF0b3JzXG4gICAgdmFyIGtleVNlcGFyYXRvciA9IG9wdGlvbnMua2V5U2VwYXJhdG9yIHx8IHRoaXMub3B0aW9ucy5rZXlTZXBhcmF0b3IgfHwgJy4nO1xuXG4gICAgLy8gZ2V0IG5hbWVzcGFjZShzKVxuXG4gICAgdmFyIF9leHRyYWN0RnJvbUtleSA9IHRoaXMuZXh0cmFjdEZyb21LZXkoa2V5c1trZXlzLmxlbmd0aCAtIDFdLCBvcHRpb25zKSxcbiAgICAgICAga2V5ID0gX2V4dHJhY3RGcm9tS2V5LmtleSxcbiAgICAgICAgbmFtZXNwYWNlcyA9IF9leHRyYWN0RnJvbUtleS5uYW1lc3BhY2VzO1xuXG4gICAgdmFyIG5hbWVzcGFjZSA9IG5hbWVzcGFjZXNbbmFtZXNwYWNlcy5sZW5ndGggLSAxXTtcblxuICAgIC8vIHJldHVybiBrZXkgb24gQ0lNb2RlXG4gICAgdmFyIGxuZyA9IG9wdGlvbnMubG5nIHx8IHRoaXMubGFuZ3VhZ2U7XG4gICAgdmFyIGFwcGVuZE5hbWVzcGFjZVRvQ0lNb2RlID0gb3B0aW9ucy5hcHBlbmROYW1lc3BhY2VUb0NJTW9kZSB8fCB0aGlzLm9wdGlvbnMuYXBwZW5kTmFtZXNwYWNlVG9DSU1vZGU7XG4gICAgaWYgKGxuZyAmJiBsbmcudG9Mb3dlckNhc2UoKSA9PT0gJ2NpbW9kZScpIHtcbiAgICAgIGlmIChhcHBlbmROYW1lc3BhY2VUb0NJTW9kZSkge1xuICAgICAgICB2YXIgbnNTZXBhcmF0b3IgPSBvcHRpb25zLm5zU2VwYXJhdG9yIHx8IHRoaXMub3B0aW9ucy5uc1NlcGFyYXRvcjtcbiAgICAgICAgcmV0dXJuIG5hbWVzcGFjZSArIG5zU2VwYXJhdG9yICsga2V5O1xuICAgICAgfVxuXG4gICAgICByZXR1cm4ga2V5O1xuICAgIH1cblxuICAgIC8vIHJlc29sdmUgZnJvbSBzdG9yZVxuICAgIHZhciByZXNvbHZlZCA9IHRoaXMucmVzb2x2ZShrZXlzLCBvcHRpb25zKTtcbiAgICB2YXIgcmVzID0gcmVzb2x2ZWQgJiYgcmVzb2x2ZWQucmVzO1xuICAgIHZhciB1c2VkS2V5ID0gcmVzb2x2ZWQgJiYgcmVzb2x2ZWQudXNlZEtleSB8fCBrZXk7XG5cbiAgICB2YXIgcmVzVHlwZSA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuYXBwbHkocmVzKTtcbiAgICB2YXIgbm9PYmplY3QgPSBbJ1tvYmplY3QgTnVtYmVyXScsICdbb2JqZWN0IEZ1bmN0aW9uXScsICdbb2JqZWN0IFJlZ0V4cF0nXTtcbiAgICB2YXIgam9pbkFycmF5cyA9IG9wdGlvbnMuam9pbkFycmF5cyAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5qb2luQXJyYXlzIDogdGhpcy5vcHRpb25zLmpvaW5BcnJheXM7XG5cbiAgICAvLyBvYmplY3RcbiAgICBpZiAocmVzICYmIHR5cGVvZiByZXMgIT09ICdzdHJpbmcnICYmIG5vT2JqZWN0LmluZGV4T2YocmVzVHlwZSkgPCAwICYmICEoam9pbkFycmF5cyAmJiByZXNUeXBlID09PSAnW29iamVjdCBBcnJheV0nKSkge1xuICAgICAgaWYgKCFvcHRpb25zLnJldHVybk9iamVjdHMgJiYgIXRoaXMub3B0aW9ucy5yZXR1cm5PYmplY3RzKSB7XG4gICAgICAgIHRoaXMubG9nZ2VyLndhcm4oJ2FjY2Vzc2luZyBhbiBvYmplY3QgLSBidXQgcmV0dXJuT2JqZWN0cyBvcHRpb25zIGlzIG5vdCBlbmFibGVkIScpO1xuICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zLnJldHVybmVkT2JqZWN0SGFuZGxlciA/IHRoaXMub3B0aW9ucy5yZXR1cm5lZE9iamVjdEhhbmRsZXIodXNlZEtleSwgcmVzLCBvcHRpb25zKSA6ICdrZXkgXFwnJyArIGtleSArICcgKCcgKyB0aGlzLmxhbmd1YWdlICsgJylcXCcgcmV0dXJuZWQgYW4gb2JqZWN0IGluc3RlYWQgb2Ygc3RyaW5nLic7XG4gICAgICB9XG5cbiAgICAgIC8vIGlmIHdlIGdvdCBhIHNlcGFyYXRvciB3ZSBsb29wIG92ZXIgY2hpbGRyZW4gLSBlbHNlIHdlIGp1c3QgcmV0dXJuIG9iamVjdCBhcyBpc1xuICAgICAgLy8gYXMgaGF2aW5nIGl0IHNldCB0byBmYWxzZSBtZWFucyBubyBoaWVyYXJjaHkgc28gbm8gbG9va3VwIGZvciBuZXN0ZWQgdmFsdWVzXG4gICAgICBpZiAob3B0aW9ucy5rZXlTZXBhcmF0b3IgfHwgdGhpcy5vcHRpb25zLmtleVNlcGFyYXRvcikge1xuICAgICAgICB2YXIgY29weSQkMSA9IHJlc1R5cGUgPT09ICdbb2JqZWN0IEFycmF5XScgPyBbXSA6IHt9OyAvLyBhcHBseSBjaGlsZCB0cmFuc2xhdGlvbiBvbiBhIGNvcHlcblxuICAgICAgICAvKiBlc2xpbnQgbm8tcmVzdHJpY3RlZC1zeW50YXg6IDAgKi9cbiAgICAgICAgZm9yICh2YXIgbSBpbiByZXMpIHtcbiAgICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHJlcywgbSkpIHtcbiAgICAgICAgICAgIGNvcHkkJDFbbV0gPSB0aGlzLnRyYW5zbGF0ZSgnJyArIHVzZWRLZXkgKyBrZXlTZXBhcmF0b3IgKyBtLCBfZXh0ZW5kcyh7fSwgb3B0aW9ucywgeyBqb2luQXJyYXlzOiBmYWxzZSwgbnM6IG5hbWVzcGFjZXMgfSkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXMgPSBjb3B5JCQxO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoam9pbkFycmF5cyAmJiByZXNUeXBlID09PSAnW29iamVjdCBBcnJheV0nKSB7XG4gICAgICAvLyBhcnJheSBzcGVjaWFsIHRyZWF0bWVudFxuICAgICAgcmVzID0gcmVzLmpvaW4oam9pbkFycmF5cyk7XG4gICAgICBpZiAocmVzKSByZXMgPSB0aGlzLmV4dGVuZFRyYW5zbGF0aW9uKHJlcywga2V5cywgb3B0aW9ucyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIHN0cmluZywgZW1wdHkgb3IgbnVsbFxuICAgICAgdmFyIHVzZWREZWZhdWx0ID0gZmFsc2U7XG4gICAgICB2YXIgX3VzZWRLZXkgPSBmYWxzZTtcblxuICAgICAgLy8gZmFsbGJhY2sgdmFsdWVcbiAgICAgIGlmICghdGhpcy5pc1ZhbGlkTG9va3VwKHJlcykgJiYgb3B0aW9ucy5kZWZhdWx0VmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB1c2VkRGVmYXVsdCA9IHRydWU7XG4gICAgICAgIHJlcyA9IG9wdGlvbnMuZGVmYXVsdFZhbHVlO1xuICAgICAgfVxuICAgICAgaWYgKCF0aGlzLmlzVmFsaWRMb29rdXAocmVzKSkge1xuICAgICAgICBfdXNlZEtleSA9IHRydWU7XG4gICAgICAgIHJlcyA9IGtleTtcbiAgICAgIH1cblxuICAgICAgLy8gc2F2ZSBtaXNzaW5nXG4gICAgICBpZiAoX3VzZWRLZXkgfHwgdXNlZERlZmF1bHQpIHtcbiAgICAgICAgdGhpcy5sb2dnZXIubG9nKCdtaXNzaW5nS2V5JywgbG5nLCBuYW1lc3BhY2UsIGtleSwgcmVzKTtcblxuICAgICAgICB2YXIgbG5ncyA9IFtdO1xuICAgICAgICB2YXIgZmFsbGJhY2tMbmdzID0gdGhpcy5sYW5ndWFnZVV0aWxzLmdldEZhbGxiYWNrQ29kZXModGhpcy5vcHRpb25zLmZhbGxiYWNrTG5nLCBvcHRpb25zLmxuZyB8fCB0aGlzLmxhbmd1YWdlKTtcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5zYXZlTWlzc2luZ1RvID09PSAnZmFsbGJhY2snICYmIGZhbGxiYWNrTG5ncyAmJiBmYWxsYmFja0xuZ3NbMF0pIHtcbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGZhbGxiYWNrTG5ncy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbG5ncy5wdXNoKGZhbGxiYWNrTG5nc1tpXSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMub3B0aW9ucy5zYXZlTWlzc2luZ1RvID09PSAnYWxsJykge1xuICAgICAgICAgIGxuZ3MgPSB0aGlzLmxhbmd1YWdlVXRpbHMudG9SZXNvbHZlSGllcmFyY2h5KG9wdGlvbnMubG5nIHx8IHRoaXMubGFuZ3VhZ2UpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGxuZ3MucHVzaChvcHRpb25zLmxuZyB8fCB0aGlzLmxhbmd1YWdlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMuc2F2ZU1pc3NpbmcpIHtcbiAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLm1pc3NpbmdLZXlIYW5kbGVyKSB7XG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMubWlzc2luZ0tleUhhbmRsZXIobG5ncywgbmFtZXNwYWNlLCBrZXksIHJlcyk7XG4gICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmJhY2tlbmRDb25uZWN0b3IgJiYgdGhpcy5iYWNrZW5kQ29ubmVjdG9yLnNhdmVNaXNzaW5nKSB7XG4gICAgICAgICAgICB0aGlzLmJhY2tlbmRDb25uZWN0b3Iuc2F2ZU1pc3NpbmcobG5ncywgbmFtZXNwYWNlLCBrZXksIHJlcyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5lbWl0KCdtaXNzaW5nS2V5JywgbG5ncywgbmFtZXNwYWNlLCBrZXksIHJlcyk7XG4gICAgICB9XG5cbiAgICAgIC8vIGV4dGVuZFxuICAgICAgcmVzID0gdGhpcy5leHRlbmRUcmFuc2xhdGlvbihyZXMsIGtleXMsIG9wdGlvbnMpO1xuXG4gICAgICAvLyBhcHBlbmQgbmFtZXNwYWNlIGlmIHN0aWxsIGtleVxuICAgICAgaWYgKF91c2VkS2V5ICYmIHJlcyA9PT0ga2V5ICYmIHRoaXMub3B0aW9ucy5hcHBlbmROYW1lc3BhY2VUb01pc3NpbmdLZXkpIHJlcyA9IG5hbWVzcGFjZSArICc6JyArIGtleTtcblxuICAgICAgLy8gcGFyc2VNaXNzaW5nS2V5SGFuZGxlclxuICAgICAgaWYgKF91c2VkS2V5ICYmIHRoaXMub3B0aW9ucy5wYXJzZU1pc3NpbmdLZXlIYW5kbGVyKSByZXMgPSB0aGlzLm9wdGlvbnMucGFyc2VNaXNzaW5nS2V5SGFuZGxlcihyZXMpO1xuICAgIH1cblxuICAgIC8vIHJldHVyblxuICAgIHJldHVybiByZXM7XG4gIH07XG5cbiAgVHJhbnNsYXRvci5wcm90b3R5cGUuZXh0ZW5kVHJhbnNsYXRpb24gPSBmdW5jdGlvbiBleHRlbmRUcmFuc2xhdGlvbihyZXMsIGtleSwgb3B0aW9ucykge1xuICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgaWYgKG9wdGlvbnMuaW50ZXJwb2xhdGlvbikgdGhpcy5pbnRlcnBvbGF0b3IuaW5pdChfZXh0ZW5kcyh7fSwgb3B0aW9ucywgeyBpbnRlcnBvbGF0aW9uOiBfZXh0ZW5kcyh7fSwgdGhpcy5vcHRpb25zLmludGVycG9sYXRpb24sIG9wdGlvbnMuaW50ZXJwb2xhdGlvbikgfSkpO1xuXG4gICAgLy8gaW50ZXJwb2xhdGVcbiAgICB2YXIgZGF0YSA9IG9wdGlvbnMucmVwbGFjZSAmJiB0eXBlb2Ygb3B0aW9ucy5yZXBsYWNlICE9PSAnc3RyaW5nJyA/IG9wdGlvbnMucmVwbGFjZSA6IG9wdGlvbnM7XG4gICAgaWYgKHRoaXMub3B0aW9ucy5pbnRlcnBvbGF0aW9uLmRlZmF1bHRWYXJpYWJsZXMpIGRhdGEgPSBfZXh0ZW5kcyh7fSwgdGhpcy5vcHRpb25zLmludGVycG9sYXRpb24uZGVmYXVsdFZhcmlhYmxlcywgZGF0YSk7XG4gICAgcmVzID0gdGhpcy5pbnRlcnBvbGF0b3IuaW50ZXJwb2xhdGUocmVzLCBkYXRhLCBvcHRpb25zLmxuZyB8fCB0aGlzLmxhbmd1YWdlKTtcblxuICAgIC8vIG5lc3RpbmdcbiAgICBpZiAob3B0aW9ucy5uZXN0ICE9PSBmYWxzZSkgcmVzID0gdGhpcy5pbnRlcnBvbGF0b3IubmVzdChyZXMsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBfdGhpczIudHJhbnNsYXRlLmFwcGx5KF90aGlzMiwgYXJndW1lbnRzKTtcbiAgICB9LCBvcHRpb25zKTtcblxuICAgIGlmIChvcHRpb25zLmludGVycG9sYXRpb24pIHRoaXMuaW50ZXJwb2xhdG9yLnJlc2V0KCk7XG5cbiAgICAvLyBwb3N0IHByb2Nlc3NcbiAgICB2YXIgcG9zdFByb2Nlc3MgPSBvcHRpb25zLnBvc3RQcm9jZXNzIHx8IHRoaXMub3B0aW9ucy5wb3N0UHJvY2VzcztcbiAgICB2YXIgcG9zdFByb2Nlc3Nvck5hbWVzID0gdHlwZW9mIHBvc3RQcm9jZXNzID09PSAnc3RyaW5nJyA/IFtwb3N0UHJvY2Vzc10gOiBwb3N0UHJvY2VzcztcblxuICAgIGlmIChyZXMgIT09IHVuZGVmaW5lZCAmJiBwb3N0UHJvY2Vzc29yTmFtZXMgJiYgcG9zdFByb2Nlc3Nvck5hbWVzLmxlbmd0aCAmJiBvcHRpb25zLmFwcGx5UG9zdFByb2Nlc3NvciAhPT0gZmFsc2UpIHtcbiAgICAgIHJlcyA9IHBvc3RQcm9jZXNzb3IuaGFuZGxlKHBvc3RQcm9jZXNzb3JOYW1lcywgcmVzLCBrZXksIG9wdGlvbnMsIHRoaXMpO1xuICAgIH1cblxuICAgIHJldHVybiByZXM7XG4gIH07XG5cbiAgVHJhbnNsYXRvci5wcm90b3R5cGUucmVzb2x2ZSA9IGZ1bmN0aW9uIHJlc29sdmUoa2V5cykge1xuICAgIHZhciBfdGhpczMgPSB0aGlzO1xuXG4gICAgdmFyIG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHt9O1xuXG4gICAgdmFyIGZvdW5kID0gdm9pZCAwO1xuICAgIHZhciB1c2VkS2V5ID0gdm9pZCAwO1xuXG4gICAgaWYgKHR5cGVvZiBrZXlzID09PSAnc3RyaW5nJykga2V5cyA9IFtrZXlzXTtcblxuICAgIC8vIGZvckVhY2ggcG9zc2libGUga2V5XG4gICAga2V5cy5mb3JFYWNoKGZ1bmN0aW9uIChrKSB7XG4gICAgICBpZiAoX3RoaXMzLmlzVmFsaWRMb29rdXAoZm91bmQpKSByZXR1cm47XG4gICAgICB2YXIgZXh0cmFjdGVkID0gX3RoaXMzLmV4dHJhY3RGcm9tS2V5KGssIG9wdGlvbnMpO1xuICAgICAgdmFyIGtleSA9IGV4dHJhY3RlZC5rZXk7XG4gICAgICB1c2VkS2V5ID0ga2V5O1xuICAgICAgdmFyIG5hbWVzcGFjZXMgPSBleHRyYWN0ZWQubmFtZXNwYWNlcztcbiAgICAgIGlmIChfdGhpczMub3B0aW9ucy5mYWxsYmFja05TKSBuYW1lc3BhY2VzID0gbmFtZXNwYWNlcy5jb25jYXQoX3RoaXMzLm9wdGlvbnMuZmFsbGJhY2tOUyk7XG5cbiAgICAgIHZhciBuZWVkc1BsdXJhbEhhbmRsaW5nID0gb3B0aW9ucy5jb3VudCAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiBvcHRpb25zLmNvdW50ICE9PSAnc3RyaW5nJztcbiAgICAgIHZhciBuZWVkc0NvbnRleHRIYW5kbGluZyA9IG9wdGlvbnMuY29udGV4dCAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiBvcHRpb25zLmNvbnRleHQgPT09ICdzdHJpbmcnICYmIG9wdGlvbnMuY29udGV4dCAhPT0gJyc7XG5cbiAgICAgIHZhciBjb2RlcyA9IG9wdGlvbnMubG5ncyA/IG9wdGlvbnMubG5ncyA6IF90aGlzMy5sYW5ndWFnZVV0aWxzLnRvUmVzb2x2ZUhpZXJhcmNoeShvcHRpb25zLmxuZyB8fCBfdGhpczMubGFuZ3VhZ2UpO1xuXG4gICAgICBuYW1lc3BhY2VzLmZvckVhY2goZnVuY3Rpb24gKG5zKSB7XG4gICAgICAgIGlmIChfdGhpczMuaXNWYWxpZExvb2t1cChmb3VuZCkpIHJldHVybjtcblxuICAgICAgICBjb2Rlcy5mb3JFYWNoKGZ1bmN0aW9uIChjb2RlKSB7XG4gICAgICAgICAgaWYgKF90aGlzMy5pc1ZhbGlkTG9va3VwKGZvdW5kKSkgcmV0dXJuO1xuXG4gICAgICAgICAgdmFyIGZpbmFsS2V5ID0ga2V5O1xuICAgICAgICAgIHZhciBmaW5hbEtleXMgPSBbZmluYWxLZXldO1xuXG4gICAgICAgICAgdmFyIHBsdXJhbFN1ZmZpeCA9IHZvaWQgMDtcbiAgICAgICAgICBpZiAobmVlZHNQbHVyYWxIYW5kbGluZykgcGx1cmFsU3VmZml4ID0gX3RoaXMzLnBsdXJhbFJlc29sdmVyLmdldFN1ZmZpeChjb2RlLCBvcHRpb25zLmNvdW50KTtcblxuICAgICAgICAgIC8vIGZhbGxiYWNrIGZvciBwbHVyYWwgaWYgY29udGV4dCBub3QgZm91bmRcbiAgICAgICAgICBpZiAobmVlZHNQbHVyYWxIYW5kbGluZyAmJiBuZWVkc0NvbnRleHRIYW5kbGluZykgZmluYWxLZXlzLnB1c2goZmluYWxLZXkgKyBwbHVyYWxTdWZmaXgpO1xuXG4gICAgICAgICAgLy8gZ2V0IGtleSBmb3IgY29udGV4dCBpZiBuZWVkZWRcbiAgICAgICAgICBpZiAobmVlZHNDb250ZXh0SGFuZGxpbmcpIGZpbmFsS2V5cy5wdXNoKGZpbmFsS2V5ICs9ICcnICsgX3RoaXMzLm9wdGlvbnMuY29udGV4dFNlcGFyYXRvciArIG9wdGlvbnMuY29udGV4dCk7XG5cbiAgICAgICAgICAvLyBnZXQga2V5IGZvciBwbHVyYWwgaWYgbmVlZGVkXG4gICAgICAgICAgaWYgKG5lZWRzUGx1cmFsSGFuZGxpbmcpIGZpbmFsS2V5cy5wdXNoKGZpbmFsS2V5ICs9IHBsdXJhbFN1ZmZpeCk7XG5cbiAgICAgICAgICAvLyBpdGVyYXRlIG92ZXIgZmluYWxLZXlzIHN0YXJ0aW5nIHdpdGggbW9zdCBzcGVjaWZpYyBwbHVyYWxrZXkgKC0+IGNvbnRleHRrZXkgb25seSkgLT4gc2luZ3VsYXJrZXkgb25seVxuICAgICAgICAgIHZhciBwb3NzaWJsZUtleSA9IHZvaWQgMDtcbiAgICAgICAgICAvKiBlc2xpbnQgbm8tY29uZC1hc3NpZ246IDAgKi9cbiAgICAgICAgICB3aGlsZSAocG9zc2libGVLZXkgPSBmaW5hbEtleXMucG9wKCkpIHtcbiAgICAgICAgICAgIGlmICghX3RoaXMzLmlzVmFsaWRMb29rdXAoZm91bmQpKSB7XG4gICAgICAgICAgICAgIGZvdW5kID0gX3RoaXMzLmdldFJlc291cmNlKGNvZGUsIG5zLCBwb3NzaWJsZUtleSwgb3B0aW9ucyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHsgcmVzOiBmb3VuZCwgdXNlZEtleTogdXNlZEtleSB9O1xuICB9O1xuXG4gIFRyYW5zbGF0b3IucHJvdG90eXBlLmlzVmFsaWRMb29rdXAgPSBmdW5jdGlvbiBpc1ZhbGlkTG9va3VwKHJlcykge1xuICAgIHJldHVybiByZXMgIT09IHVuZGVmaW5lZCAmJiAhKCF0aGlzLm9wdGlvbnMucmV0dXJuTnVsbCAmJiByZXMgPT09IG51bGwpICYmICEoIXRoaXMub3B0aW9ucy5yZXR1cm5FbXB0eVN0cmluZyAmJiByZXMgPT09ICcnKTtcbiAgfTtcblxuICBUcmFuc2xhdG9yLnByb3RvdHlwZS5nZXRSZXNvdXJjZSA9IGZ1bmN0aW9uIGdldFJlc291cmNlKGNvZGUsIG5zLCBrZXkpIHtcbiAgICB2YXIgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAzICYmIGFyZ3VtZW50c1szXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzNdIDoge307XG5cbiAgICByZXR1cm4gdGhpcy5yZXNvdXJjZVN0b3JlLmdldFJlc291cmNlKGNvZGUsIG5zLCBrZXksIG9wdGlvbnMpO1xuICB9O1xuXG4gIHJldHVybiBUcmFuc2xhdG9yO1xufShFdmVudEVtaXR0ZXIpO1xuXG5mdW5jdGlvbiBjYXBpdGFsaXplKHN0cmluZykge1xuICByZXR1cm4gc3RyaW5nLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgc3RyaW5nLnNsaWNlKDEpO1xufVxuXG52YXIgTGFuZ3VhZ2VVdGlsID0gZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBMYW5ndWFnZVV0aWwob3B0aW9ucykge1xuICAgIGNsYXNzQ2FsbENoZWNrKHRoaXMsIExhbmd1YWdlVXRpbCk7XG5cbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuXG4gICAgdGhpcy53aGl0ZWxpc3QgPSB0aGlzLm9wdGlvbnMud2hpdGVsaXN0IHx8IGZhbHNlO1xuICAgIHRoaXMubG9nZ2VyID0gYmFzZUxvZ2dlci5jcmVhdGUoJ2xhbmd1YWdlVXRpbHMnKTtcbiAgfVxuXG4gIExhbmd1YWdlVXRpbC5wcm90b3R5cGUuZ2V0U2NyaXB0UGFydEZyb21Db2RlID0gZnVuY3Rpb24gZ2V0U2NyaXB0UGFydEZyb21Db2RlKGNvZGUpIHtcbiAgICBpZiAoIWNvZGUgfHwgY29kZS5pbmRleE9mKCctJykgPCAwKSByZXR1cm4gbnVsbDtcblxuICAgIHZhciBwID0gY29kZS5zcGxpdCgnLScpO1xuICAgIGlmIChwLmxlbmd0aCA9PT0gMikgcmV0dXJuIG51bGw7XG4gICAgcC5wb3AoKTtcbiAgICByZXR1cm4gdGhpcy5mb3JtYXRMYW5ndWFnZUNvZGUocC5qb2luKCctJykpO1xuICB9O1xuXG4gIExhbmd1YWdlVXRpbC5wcm90b3R5cGUuZ2V0TGFuZ3VhZ2VQYXJ0RnJvbUNvZGUgPSBmdW5jdGlvbiBnZXRMYW5ndWFnZVBhcnRGcm9tQ29kZShjb2RlKSB7XG4gICAgaWYgKCFjb2RlIHx8IGNvZGUuaW5kZXhPZignLScpIDwgMCkgcmV0dXJuIGNvZGU7XG5cbiAgICB2YXIgcCA9IGNvZGUuc3BsaXQoJy0nKTtcbiAgICByZXR1cm4gdGhpcy5mb3JtYXRMYW5ndWFnZUNvZGUocFswXSk7XG4gIH07XG5cbiAgTGFuZ3VhZ2VVdGlsLnByb3RvdHlwZS5mb3JtYXRMYW5ndWFnZUNvZGUgPSBmdW5jdGlvbiBmb3JtYXRMYW5ndWFnZUNvZGUoY29kZSkge1xuICAgIC8vIGh0dHA6Ly93d3cuaWFuYS5vcmcvYXNzaWdubWVudHMvbGFuZ3VhZ2UtdGFncy9sYW5ndWFnZS10YWdzLnhodG1sXG4gICAgaWYgKHR5cGVvZiBjb2RlID09PSAnc3RyaW5nJyAmJiBjb2RlLmluZGV4T2YoJy0nKSA+IC0xKSB7XG4gICAgICB2YXIgc3BlY2lhbENhc2VzID0gWydoYW5zJywgJ2hhbnQnLCAnbGF0bicsICdjeXJsJywgJ2NhbnMnLCAnbW9uZycsICdhcmFiJ107XG4gICAgICB2YXIgcCA9IGNvZGUuc3BsaXQoJy0nKTtcblxuICAgICAgaWYgKHRoaXMub3B0aW9ucy5sb3dlckNhc2VMbmcpIHtcbiAgICAgICAgcCA9IHAubWFwKGZ1bmN0aW9uIChwYXJ0KSB7XG4gICAgICAgICAgcmV0dXJuIHBhcnQudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2UgaWYgKHAubGVuZ3RoID09PSAyKSB7XG4gICAgICAgIHBbMF0gPSBwWzBdLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIHBbMV0gPSBwWzFdLnRvVXBwZXJDYXNlKCk7XG5cbiAgICAgICAgaWYgKHNwZWNpYWxDYXNlcy5pbmRleE9mKHBbMV0udG9Mb3dlckNhc2UoKSkgPiAtMSkgcFsxXSA9IGNhcGl0YWxpemUocFsxXS50b0xvd2VyQ2FzZSgpKTtcbiAgICAgIH0gZWxzZSBpZiAocC5sZW5ndGggPT09IDMpIHtcbiAgICAgICAgcFswXSA9IHBbMF0udG9Mb3dlckNhc2UoKTtcblxuICAgICAgICAvLyBpZiBsZW5naHQgMiBndWVzcyBpdCdzIGEgY291bnRyeVxuICAgICAgICBpZiAocFsxXS5sZW5ndGggPT09IDIpIHBbMV0gPSBwWzFdLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgIGlmIChwWzBdICE9PSAnc2duJyAmJiBwWzJdLmxlbmd0aCA9PT0gMikgcFsyXSA9IHBbMl0udG9VcHBlckNhc2UoKTtcblxuICAgICAgICBpZiAoc3BlY2lhbENhc2VzLmluZGV4T2YocFsxXS50b0xvd2VyQ2FzZSgpKSA+IC0xKSBwWzFdID0gY2FwaXRhbGl6ZShwWzFdLnRvTG93ZXJDYXNlKCkpO1xuICAgICAgICBpZiAoc3BlY2lhbENhc2VzLmluZGV4T2YocFsyXS50b0xvd2VyQ2FzZSgpKSA+IC0xKSBwWzJdID0gY2FwaXRhbGl6ZShwWzJdLnRvTG93ZXJDYXNlKCkpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcC5qb2luKCctJyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMub3B0aW9ucy5jbGVhbkNvZGUgfHwgdGhpcy5vcHRpb25zLmxvd2VyQ2FzZUxuZyA/IGNvZGUudG9Mb3dlckNhc2UoKSA6IGNvZGU7XG4gIH07XG5cbiAgTGFuZ3VhZ2VVdGlsLnByb3RvdHlwZS5pc1doaXRlbGlzdGVkID0gZnVuY3Rpb24gaXNXaGl0ZWxpc3RlZChjb2RlKSB7XG4gICAgaWYgKHRoaXMub3B0aW9ucy5sb2FkID09PSAnbGFuZ3VhZ2VPbmx5JyB8fCB0aGlzLm9wdGlvbnMubm9uRXhwbGljaXRXaGl0ZWxpc3QpIHtcbiAgICAgIGNvZGUgPSB0aGlzLmdldExhbmd1YWdlUGFydEZyb21Db2RlKGNvZGUpO1xuICAgIH1cbiAgICByZXR1cm4gIXRoaXMud2hpdGVsaXN0IHx8ICF0aGlzLndoaXRlbGlzdC5sZW5ndGggfHwgdGhpcy53aGl0ZWxpc3QuaW5kZXhPZihjb2RlKSA+IC0xO1xuICB9O1xuXG4gIExhbmd1YWdlVXRpbC5wcm90b3R5cGUuZ2V0RmFsbGJhY2tDb2RlcyA9IGZ1bmN0aW9uIGdldEZhbGxiYWNrQ29kZXMoZmFsbGJhY2tzLCBjb2RlKSB7XG4gICAgaWYgKCFmYWxsYmFja3MpIHJldHVybiBbXTtcbiAgICBpZiAodHlwZW9mIGZhbGxiYWNrcyA9PT0gJ3N0cmluZycpIGZhbGxiYWNrcyA9IFtmYWxsYmFja3NdO1xuICAgIGlmIChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmFwcGx5KGZhbGxiYWNrcykgPT09ICdbb2JqZWN0IEFycmF5XScpIHJldHVybiBmYWxsYmFja3M7XG5cbiAgICBpZiAoIWNvZGUpIHJldHVybiBmYWxsYmFja3MuZGVmYXVsdCB8fCBbXTtcblxuICAgIC8vIGFzdW1lIHdlIGhhdmUgYW4gb2JqZWN0IGRlZmluaW5nIGZhbGxiYWNrc1xuICAgIHZhciBmb3VuZCA9IGZhbGxiYWNrc1tjb2RlXTtcbiAgICBpZiAoIWZvdW5kKSBmb3VuZCA9IGZhbGxiYWNrc1t0aGlzLmdldFNjcmlwdFBhcnRGcm9tQ29kZShjb2RlKV07XG4gICAgaWYgKCFmb3VuZCkgZm91bmQgPSBmYWxsYmFja3NbdGhpcy5mb3JtYXRMYW5ndWFnZUNvZGUoY29kZSldO1xuICAgIGlmICghZm91bmQpIGZvdW5kID0gZmFsbGJhY2tzLmRlZmF1bHQ7XG5cbiAgICByZXR1cm4gZm91bmQgfHwgW107XG4gIH07XG5cbiAgTGFuZ3VhZ2VVdGlsLnByb3RvdHlwZS50b1Jlc29sdmVIaWVyYXJjaHkgPSBmdW5jdGlvbiB0b1Jlc29sdmVIaWVyYXJjaHkoY29kZSwgZmFsbGJhY2tDb2RlKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgIHZhciBmYWxsYmFja0NvZGVzID0gdGhpcy5nZXRGYWxsYmFja0NvZGVzKGZhbGxiYWNrQ29kZSB8fCB0aGlzLm9wdGlvbnMuZmFsbGJhY2tMbmcgfHwgW10sIGNvZGUpO1xuXG4gICAgdmFyIGNvZGVzID0gW107XG4gICAgdmFyIGFkZENvZGUgPSBmdW5jdGlvbiBhZGRDb2RlKGMpIHtcbiAgICAgIGlmICghYykgcmV0dXJuO1xuICAgICAgaWYgKF90aGlzLmlzV2hpdGVsaXN0ZWQoYykpIHtcbiAgICAgICAgY29kZXMucHVzaChjKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIF90aGlzLmxvZ2dlci53YXJuKCdyZWplY3Rpbmcgbm9uLXdoaXRlbGlzdGVkIGxhbmd1YWdlIGNvZGU6ICcgKyBjKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgaWYgKHR5cGVvZiBjb2RlID09PSAnc3RyaW5nJyAmJiBjb2RlLmluZGV4T2YoJy0nKSA+IC0xKSB7XG4gICAgICBpZiAodGhpcy5vcHRpb25zLmxvYWQgIT09ICdsYW5ndWFnZU9ubHknKSBhZGRDb2RlKHRoaXMuZm9ybWF0TGFuZ3VhZ2VDb2RlKGNvZGUpKTtcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMubG9hZCAhPT0gJ2xhbmd1YWdlT25seScgJiYgdGhpcy5vcHRpb25zLmxvYWQgIT09ICdjdXJyZW50T25seScpIGFkZENvZGUodGhpcy5nZXRTY3JpcHRQYXJ0RnJvbUNvZGUoY29kZSkpO1xuICAgICAgaWYgKHRoaXMub3B0aW9ucy5sb2FkICE9PSAnY3VycmVudE9ubHknKSBhZGRDb2RlKHRoaXMuZ2V0TGFuZ3VhZ2VQYXJ0RnJvbUNvZGUoY29kZSkpO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIGNvZGUgPT09ICdzdHJpbmcnKSB7XG4gICAgICBhZGRDb2RlKHRoaXMuZm9ybWF0TGFuZ3VhZ2VDb2RlKGNvZGUpKTtcbiAgICB9XG5cbiAgICBmYWxsYmFja0NvZGVzLmZvckVhY2goZnVuY3Rpb24gKGZjKSB7XG4gICAgICBpZiAoY29kZXMuaW5kZXhPZihmYykgPCAwKSBhZGRDb2RlKF90aGlzLmZvcm1hdExhbmd1YWdlQ29kZShmYykpO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIGNvZGVzO1xuICB9O1xuXG4gIHJldHVybiBMYW5ndWFnZVV0aWw7XG59KCk7XG5cbi8vIGRlZmluaXRpb24gaHR0cDovL3RyYW5zbGF0ZS5zb3VyY2Vmb3JnZS5uZXQvd2lraS9sMTBuL3BsdXJhbGZvcm1zXG4vKiBlc2xpbnQtZGlzYWJsZSAqL1xudmFyIHNldHMgPSBbeyBsbmdzOiBbJ2FjaCcsICdhaycsICdhbScsICdhcm4nLCAnYnInLCAnZmlsJywgJ2d1bicsICdsbicsICdtZmUnLCAnbWcnLCAnbWknLCAnb2MnLCAncHQnLCAncHQtQlInLCAndGcnLCAndGknLCAndHInLCAndXonLCAnd2EnXSwgbnI6IFsxLCAyXSwgZmM6IDEgfSwgeyBsbmdzOiBbJ2FmJywgJ2FuJywgJ2FzdCcsICdheicsICdiZycsICdibicsICdjYScsICdkYScsICdkZScsICdkZXYnLCAnZWwnLCAnZW4nLCAnZW8nLCAnZXMnLCAnZXQnLCAnZXUnLCAnZmknLCAnZm8nLCAnZnVyJywgJ2Z5JywgJ2dsJywgJ2d1JywgJ2hhJywgJ2hlJywgJ2hpJywgJ2h1JywgJ2h5JywgJ2lhJywgJ2l0JywgJ2tuJywgJ2t1JywgJ2xiJywgJ21haScsICdtbCcsICdtbicsICdtcicsICduYWgnLCAnbmFwJywgJ25iJywgJ25lJywgJ25sJywgJ25uJywgJ25vJywgJ25zbycsICdwYScsICdwYXAnLCAncG1zJywgJ3BzJywgJ3B0LVBUJywgJ3JtJywgJ3NjbycsICdzZScsICdzaScsICdzbycsICdzb24nLCAnc3EnLCAnc3YnLCAnc3cnLCAndGEnLCAndGUnLCAndGsnLCAndXInLCAneW8nXSwgbnI6IFsxLCAyXSwgZmM6IDIgfSwgeyBsbmdzOiBbJ2F5JywgJ2JvJywgJ2NnZycsICdmYScsICdpZCcsICdqYScsICdqYm8nLCAna2EnLCAna2snLCAna20nLCAna28nLCAna3knLCAnbG8nLCAnbXMnLCAnc2FoJywgJ3N1JywgJ3RoJywgJ3R0JywgJ3VnJywgJ3ZpJywgJ3dvJywgJ3poJ10sIG5yOiBbMV0sIGZjOiAzIH0sIHsgbG5nczogWydiZScsICdicycsICdkeicsICdocicsICdydScsICdzcicsICd1ayddLCBucjogWzEsIDIsIDVdLCBmYzogNCB9LCB7IGxuZ3M6IFsnYXInXSwgbnI6IFswLCAxLCAyLCAzLCAxMSwgMTAwXSwgZmM6IDUgfSwgeyBsbmdzOiBbJ2NzJywgJ3NrJ10sIG5yOiBbMSwgMiwgNV0sIGZjOiA2IH0sIHsgbG5nczogWydjc2InLCAncGwnXSwgbnI6IFsxLCAyLCA1XSwgZmM6IDcgfSwgeyBsbmdzOiBbJ2N5J10sIG5yOiBbMSwgMiwgMywgOF0sIGZjOiA4IH0sIHsgbG5nczogWydmciddLCBucjogWzEsIDJdLCBmYzogOSB9LCB7IGxuZ3M6IFsnZ2EnXSwgbnI6IFsxLCAyLCAzLCA3LCAxMV0sIGZjOiAxMCB9LCB7IGxuZ3M6IFsnZ2QnXSwgbnI6IFsxLCAyLCAzLCAyMF0sIGZjOiAxMSB9LCB7IGxuZ3M6IFsnaXMnXSwgbnI6IFsxLCAyXSwgZmM6IDEyIH0sIHsgbG5nczogWydqdiddLCBucjogWzAsIDFdLCBmYzogMTMgfSwgeyBsbmdzOiBbJ2t3J10sIG5yOiBbMSwgMiwgMywgNF0sIGZjOiAxNCB9LCB7IGxuZ3M6IFsnbHQnXSwgbnI6IFsxLCAyLCAxMF0sIGZjOiAxNSB9LCB7IGxuZ3M6IFsnbHYnXSwgbnI6IFsxLCAyLCAwXSwgZmM6IDE2IH0sIHsgbG5nczogWydtayddLCBucjogWzEsIDJdLCBmYzogMTcgfSwgeyBsbmdzOiBbJ21uayddLCBucjogWzAsIDEsIDJdLCBmYzogMTggfSwgeyBsbmdzOiBbJ210J10sIG5yOiBbMSwgMiwgMTEsIDIwXSwgZmM6IDE5IH0sIHsgbG5nczogWydvciddLCBucjogWzIsIDFdLCBmYzogMiB9LCB7IGxuZ3M6IFsncm8nXSwgbnI6IFsxLCAyLCAyMF0sIGZjOiAyMCB9LCB7IGxuZ3M6IFsnc2wnXSwgbnI6IFs1LCAxLCAyLCAzXSwgZmM6IDIxIH1dO1xuXG52YXIgX3J1bGVzUGx1cmFsc1R5cGVzID0ge1xuICAxOiBmdW5jdGlvbiBfKG4pIHtcbiAgICByZXR1cm4gTnVtYmVyKG4gPiAxKTtcbiAgfSxcbiAgMjogZnVuY3Rpb24gXyhuKSB7XG4gICAgcmV0dXJuIE51bWJlcihuICE9IDEpO1xuICB9LFxuICAzOiBmdW5jdGlvbiBfKG4pIHtcbiAgICByZXR1cm4gMDtcbiAgfSxcbiAgNDogZnVuY3Rpb24gXyhuKSB7XG4gICAgcmV0dXJuIE51bWJlcihuICUgMTAgPT0gMSAmJiBuICUgMTAwICE9IDExID8gMCA6IG4gJSAxMCA+PSAyICYmIG4gJSAxMCA8PSA0ICYmIChuICUgMTAwIDwgMTAgfHwgbiAlIDEwMCA+PSAyMCkgPyAxIDogMik7XG4gIH0sXG4gIDU6IGZ1bmN0aW9uIF8obikge1xuICAgIHJldHVybiBOdW1iZXIobiA9PT0gMCA/IDAgOiBuID09IDEgPyAxIDogbiA9PSAyID8gMiA6IG4gJSAxMDAgPj0gMyAmJiBuICUgMTAwIDw9IDEwID8gMyA6IG4gJSAxMDAgPj0gMTEgPyA0IDogNSk7XG4gIH0sXG4gIDY6IGZ1bmN0aW9uIF8obikge1xuICAgIHJldHVybiBOdW1iZXIobiA9PSAxID8gMCA6IG4gPj0gMiAmJiBuIDw9IDQgPyAxIDogMik7XG4gIH0sXG4gIDc6IGZ1bmN0aW9uIF8obikge1xuICAgIHJldHVybiBOdW1iZXIobiA9PSAxID8gMCA6IG4gJSAxMCA+PSAyICYmIG4gJSAxMCA8PSA0ICYmIChuICUgMTAwIDwgMTAgfHwgbiAlIDEwMCA+PSAyMCkgPyAxIDogMik7XG4gIH0sXG4gIDg6IGZ1bmN0aW9uIF8obikge1xuICAgIHJldHVybiBOdW1iZXIobiA9PSAxID8gMCA6IG4gPT0gMiA/IDEgOiBuICE9IDggJiYgbiAhPSAxMSA/IDIgOiAzKTtcbiAgfSxcbiAgOTogZnVuY3Rpb24gXyhuKSB7XG4gICAgcmV0dXJuIE51bWJlcihuID49IDIpO1xuICB9LFxuICAxMDogZnVuY3Rpb24gXyhuKSB7XG4gICAgcmV0dXJuIE51bWJlcihuID09IDEgPyAwIDogbiA9PSAyID8gMSA6IG4gPCA3ID8gMiA6IG4gPCAxMSA/IDMgOiA0KTtcbiAgfSxcbiAgMTE6IGZ1bmN0aW9uIF8obikge1xuICAgIHJldHVybiBOdW1iZXIobiA9PSAxIHx8IG4gPT0gMTEgPyAwIDogbiA9PSAyIHx8IG4gPT0gMTIgPyAxIDogbiA+IDIgJiYgbiA8IDIwID8gMiA6IDMpO1xuICB9LFxuICAxMjogZnVuY3Rpb24gXyhuKSB7XG4gICAgcmV0dXJuIE51bWJlcihuICUgMTAgIT0gMSB8fCBuICUgMTAwID09IDExKTtcbiAgfSxcbiAgMTM6IGZ1bmN0aW9uIF8obikge1xuICAgIHJldHVybiBOdW1iZXIobiAhPT0gMCk7XG4gIH0sXG4gIDE0OiBmdW5jdGlvbiBfKG4pIHtcbiAgICByZXR1cm4gTnVtYmVyKG4gPT0gMSA/IDAgOiBuID09IDIgPyAxIDogbiA9PSAzID8gMiA6IDMpO1xuICB9LFxuICAxNTogZnVuY3Rpb24gXyhuKSB7XG4gICAgcmV0dXJuIE51bWJlcihuICUgMTAgPT0gMSAmJiBuICUgMTAwICE9IDExID8gMCA6IG4gJSAxMCA+PSAyICYmIChuICUgMTAwIDwgMTAgfHwgbiAlIDEwMCA+PSAyMCkgPyAxIDogMik7XG4gIH0sXG4gIDE2OiBmdW5jdGlvbiBfKG4pIHtcbiAgICByZXR1cm4gTnVtYmVyKG4gJSAxMCA9PSAxICYmIG4gJSAxMDAgIT0gMTEgPyAwIDogbiAhPT0gMCA/IDEgOiAyKTtcbiAgfSxcbiAgMTc6IGZ1bmN0aW9uIF8obikge1xuICAgIHJldHVybiBOdW1iZXIobiA9PSAxIHx8IG4gJSAxMCA9PSAxID8gMCA6IDEpO1xuICB9LFxuICAxODogZnVuY3Rpb24gXyhuKSB7XG4gICAgcmV0dXJuIE51bWJlcihuID09IDAgPyAwIDogbiA9PSAxID8gMSA6IDIpO1xuICB9LFxuICAxOTogZnVuY3Rpb24gXyhuKSB7XG4gICAgcmV0dXJuIE51bWJlcihuID09IDEgPyAwIDogbiA9PT0gMCB8fCBuICUgMTAwID4gMSAmJiBuICUgMTAwIDwgMTEgPyAxIDogbiAlIDEwMCA+IDEwICYmIG4gJSAxMDAgPCAyMCA/IDIgOiAzKTtcbiAgfSxcbiAgMjA6IGZ1bmN0aW9uIF8obikge1xuICAgIHJldHVybiBOdW1iZXIobiA9PSAxID8gMCA6IG4gPT09IDAgfHwgbiAlIDEwMCA+IDAgJiYgbiAlIDEwMCA8IDIwID8gMSA6IDIpO1xuICB9LFxuICAyMTogZnVuY3Rpb24gXyhuKSB7XG4gICAgcmV0dXJuIE51bWJlcihuICUgMTAwID09IDEgPyAxIDogbiAlIDEwMCA9PSAyID8gMiA6IG4gJSAxMDAgPT0gMyB8fCBuICUgMTAwID09IDQgPyAzIDogMCk7XG4gIH1cbn07XG4vKiBlc2xpbnQtZW5hYmxlICovXG5cbmZ1bmN0aW9uIGNyZWF0ZVJ1bGVzKCkge1xuICB2YXIgcnVsZXMgPSB7fTtcbiAgc2V0cy5mb3JFYWNoKGZ1bmN0aW9uIChzZXQkJDEpIHtcbiAgICBzZXQkJDEubG5ncy5mb3JFYWNoKGZ1bmN0aW9uIChsKSB7XG4gICAgICBydWxlc1tsXSA9IHtcbiAgICAgICAgbnVtYmVyczogc2V0JCQxLm5yLFxuICAgICAgICBwbHVyYWxzOiBfcnVsZXNQbHVyYWxzVHlwZXNbc2V0JCQxLmZjXVxuICAgICAgfTtcbiAgICB9KTtcbiAgfSk7XG4gIHJldHVybiBydWxlcztcbn1cblxudmFyIFBsdXJhbFJlc29sdmVyID0gZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBQbHVyYWxSZXNvbHZlcihsYW5ndWFnZVV0aWxzKSB7XG4gICAgdmFyIG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHt9O1xuICAgIGNsYXNzQ2FsbENoZWNrKHRoaXMsIFBsdXJhbFJlc29sdmVyKTtcblxuICAgIHRoaXMubGFuZ3VhZ2VVdGlscyA9IGxhbmd1YWdlVXRpbHM7XG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcblxuICAgIHRoaXMubG9nZ2VyID0gYmFzZUxvZ2dlci5jcmVhdGUoJ3BsdXJhbFJlc29sdmVyJyk7XG5cbiAgICB0aGlzLnJ1bGVzID0gY3JlYXRlUnVsZXMoKTtcbiAgfVxuXG4gIFBsdXJhbFJlc29sdmVyLnByb3RvdHlwZS5hZGRSdWxlID0gZnVuY3Rpb24gYWRkUnVsZShsbmcsIG9iaikge1xuICAgIHRoaXMucnVsZXNbbG5nXSA9IG9iajtcbiAgfTtcblxuICBQbHVyYWxSZXNvbHZlci5wcm90b3R5cGUuZ2V0UnVsZSA9IGZ1bmN0aW9uIGdldFJ1bGUoY29kZSkge1xuICAgIHJldHVybiB0aGlzLnJ1bGVzW2NvZGVdIHx8IHRoaXMucnVsZXNbdGhpcy5sYW5ndWFnZVV0aWxzLmdldExhbmd1YWdlUGFydEZyb21Db2RlKGNvZGUpXTtcbiAgfTtcblxuICBQbHVyYWxSZXNvbHZlci5wcm90b3R5cGUubmVlZHNQbHVyYWwgPSBmdW5jdGlvbiBuZWVkc1BsdXJhbChjb2RlKSB7XG4gICAgdmFyIHJ1bGUgPSB0aGlzLmdldFJ1bGUoY29kZSk7XG5cbiAgICByZXR1cm4gcnVsZSAmJiBydWxlLm51bWJlcnMubGVuZ3RoID4gMTtcbiAgfTtcblxuICBQbHVyYWxSZXNvbHZlci5wcm90b3R5cGUuZ2V0U3VmZml4ID0gZnVuY3Rpb24gZ2V0U3VmZml4KGNvZGUsIGNvdW50KSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgIHZhciBydWxlID0gdGhpcy5nZXRSdWxlKGNvZGUpO1xuXG4gICAgaWYgKHJ1bGUpIHtcbiAgICAgIC8vaWYgKHJ1bGUubnVtYmVycy5sZW5ndGggPT09IDEpIHJldHVybiAnJzsgLy8gb25seSBzaW5ndWxhclxuXG4gICAgICB2YXIgaWR4ID0gcnVsZS5ub0FicyA/IHJ1bGUucGx1cmFscyhjb3VudCkgOiBydWxlLnBsdXJhbHMoTWF0aC5hYnMoY291bnQpKTtcbiAgICAgIHZhciBzdWZmaXggPSBydWxlLm51bWJlcnNbaWR4XTtcblxuICAgICAgLy8gc3BlY2lhbCB0cmVhdG1lbnQgZm9yIGxuZ3Mgb25seSBoYXZpbmcgc2luZ3VsYXIgYW5kIHBsdXJhbFxuICAgICAgaWYgKHRoaXMub3B0aW9ucy5zaW1wbGlmeVBsdXJhbFN1ZmZpeCAmJiBydWxlLm51bWJlcnMubGVuZ3RoID09PSAyICYmIHJ1bGUubnVtYmVyc1swXSA9PT0gMSkge1xuICAgICAgICBpZiAoc3VmZml4ID09PSAyKSB7XG4gICAgICAgICAgc3VmZml4ID0gJ3BsdXJhbCc7XG4gICAgICAgIH0gZWxzZSBpZiAoc3VmZml4ID09PSAxKSB7XG4gICAgICAgICAgc3VmZml4ID0gJyc7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdmFyIHJldHVyblN1ZmZpeCA9IGZ1bmN0aW9uIHJldHVyblN1ZmZpeCgpIHtcbiAgICAgICAgcmV0dXJuIF90aGlzLm9wdGlvbnMucHJlcGVuZCAmJiBzdWZmaXgudG9TdHJpbmcoKSA/IF90aGlzLm9wdGlvbnMucHJlcGVuZCArIHN1ZmZpeC50b1N0cmluZygpIDogc3VmZml4LnRvU3RyaW5nKCk7XG4gICAgICB9O1xuXG4gICAgICAvLyBDT01QQVRJQklMSVRZIEpTT05cbiAgICAgIC8vIHYxXG4gICAgICBpZiAodGhpcy5vcHRpb25zLmNvbXBhdGliaWxpdHlKU09OID09PSAndjEnKSB7XG4gICAgICAgIGlmIChzdWZmaXggPT09IDEpIHJldHVybiAnJztcbiAgICAgICAgaWYgKHR5cGVvZiBzdWZmaXggPT09ICdudW1iZXInKSByZXR1cm4gJ19wbHVyYWxfJyArIHN1ZmZpeC50b1N0cmluZygpO1xuICAgICAgICByZXR1cm4gcmV0dXJuU3VmZml4KCk7XG4gICAgICB9IGVsc2UgaWYgKCAvKiB2MiAqL3RoaXMub3B0aW9ucy5jb21wYXRpYmlsaXR5SlNPTiA9PT0gJ3YyJyB8fCBydWxlLm51bWJlcnMubGVuZ3RoID09PSAyICYmIHJ1bGUubnVtYmVyc1swXSA9PT0gMSkge1xuICAgICAgICByZXR1cm4gcmV0dXJuU3VmZml4KCk7XG4gICAgICB9IGVsc2UgaWYgKCAvKiB2MyAtIGdldHRleHQgaW5kZXggKi9ydWxlLm51bWJlcnMubGVuZ3RoID09PSAyICYmIHJ1bGUubnVtYmVyc1swXSA9PT0gMSkge1xuICAgICAgICByZXR1cm4gcmV0dXJuU3VmZml4KCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy5vcHRpb25zLnByZXBlbmQgJiYgaWR4LnRvU3RyaW5nKCkgPyB0aGlzLm9wdGlvbnMucHJlcGVuZCArIGlkeC50b1N0cmluZygpIDogaWR4LnRvU3RyaW5nKCk7XG4gICAgfVxuXG4gICAgdGhpcy5sb2dnZXIud2Fybignbm8gcGx1cmFsIHJ1bGUgZm91bmQgZm9yOiAnICsgY29kZSk7XG4gICAgcmV0dXJuICcnO1xuICB9O1xuXG4gIHJldHVybiBQbHVyYWxSZXNvbHZlcjtcbn0oKTtcblxudmFyIEludGVycG9sYXRvciA9IGZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gSW50ZXJwb2xhdG9yKCkge1xuICAgIHZhciBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTtcbiAgICBjbGFzc0NhbGxDaGVjayh0aGlzLCBJbnRlcnBvbGF0b3IpO1xuXG4gICAgdGhpcy5sb2dnZXIgPSBiYXNlTG9nZ2VyLmNyZWF0ZSgnaW50ZXJwb2xhdG9yJyk7XG5cbiAgICB0aGlzLmluaXQob3B0aW9ucywgdHJ1ZSk7XG4gIH1cblxuICAvKiBlc2xpbnQgbm8tcGFyYW0tcmVhc3NpZ246IDAgKi9cblxuXG4gIEludGVycG9sYXRvci5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgdmFyIG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9O1xuICAgIHZhciByZXNldCA9IGFyZ3VtZW50c1sxXTtcblxuICAgIGlmIChyZXNldCkge1xuICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICAgIHRoaXMuZm9ybWF0ID0gb3B0aW9ucy5pbnRlcnBvbGF0aW9uICYmIG9wdGlvbnMuaW50ZXJwb2xhdGlvbi5mb3JtYXQgfHwgZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgIH07XG4gICAgICB0aGlzLmVzY2FwZSA9IG9wdGlvbnMuaW50ZXJwb2xhdGlvbiAmJiBvcHRpb25zLmludGVycG9sYXRpb24uZXNjYXBlIHx8IGVzY2FwZTtcbiAgICB9XG4gICAgaWYgKCFvcHRpb25zLmludGVycG9sYXRpb24pIG9wdGlvbnMuaW50ZXJwb2xhdGlvbiA9IHsgZXNjYXBlVmFsdWU6IHRydWUgfTtcblxuICAgIHZhciBpT3B0cyA9IG9wdGlvbnMuaW50ZXJwb2xhdGlvbjtcblxuICAgIHRoaXMuZXNjYXBlVmFsdWUgPSBpT3B0cy5lc2NhcGVWYWx1ZSAhPT0gdW5kZWZpbmVkID8gaU9wdHMuZXNjYXBlVmFsdWUgOiB0cnVlO1xuXG4gICAgdGhpcy5wcmVmaXggPSBpT3B0cy5wcmVmaXggPyByZWdleEVzY2FwZShpT3B0cy5wcmVmaXgpIDogaU9wdHMucHJlZml4RXNjYXBlZCB8fCAne3snO1xuICAgIHRoaXMuc3VmZml4ID0gaU9wdHMuc3VmZml4ID8gcmVnZXhFc2NhcGUoaU9wdHMuc3VmZml4KSA6IGlPcHRzLnN1ZmZpeEVzY2FwZWQgfHwgJ319JztcblxuICAgIHRoaXMuZm9ybWF0U2VwYXJhdG9yID0gaU9wdHMuZm9ybWF0U2VwYXJhdG9yID8gaU9wdHMuZm9ybWF0U2VwYXJhdG9yIDogaU9wdHMuZm9ybWF0U2VwYXJhdG9yIHx8ICcsJztcblxuICAgIHRoaXMudW5lc2NhcGVQcmVmaXggPSBpT3B0cy51bmVzY2FwZVN1ZmZpeCA/ICcnIDogaU9wdHMudW5lc2NhcGVQcmVmaXggfHwgJy0nO1xuICAgIHRoaXMudW5lc2NhcGVTdWZmaXggPSB0aGlzLnVuZXNjYXBlUHJlZml4ID8gJycgOiBpT3B0cy51bmVzY2FwZVN1ZmZpeCB8fCAnJztcblxuICAgIHRoaXMubmVzdGluZ1ByZWZpeCA9IGlPcHRzLm5lc3RpbmdQcmVmaXggPyByZWdleEVzY2FwZShpT3B0cy5uZXN0aW5nUHJlZml4KSA6IGlPcHRzLm5lc3RpbmdQcmVmaXhFc2NhcGVkIHx8IHJlZ2V4RXNjYXBlKCckdCgnKTtcbiAgICB0aGlzLm5lc3RpbmdTdWZmaXggPSBpT3B0cy5uZXN0aW5nU3VmZml4ID8gcmVnZXhFc2NhcGUoaU9wdHMubmVzdGluZ1N1ZmZpeCkgOiBpT3B0cy5uZXN0aW5nU3VmZml4RXNjYXBlZCB8fCByZWdleEVzY2FwZSgnKScpO1xuXG4gICAgdGhpcy5tYXhSZXBsYWNlcyA9IGlPcHRzLm1heFJlcGxhY2VzID8gaU9wdHMubWF4UmVwbGFjZXMgOiAxMDAwO1xuXG4gICAgLy8gdGhlIHJlZ2V4cFxuICAgIHRoaXMucmVzZXRSZWdFeHAoKTtcbiAgfTtcblxuICBJbnRlcnBvbGF0b3IucHJvdG90eXBlLnJlc2V0ID0gZnVuY3Rpb24gcmVzZXQoKSB7XG4gICAgaWYgKHRoaXMub3B0aW9ucykgdGhpcy5pbml0KHRoaXMub3B0aW9ucyk7XG4gIH07XG5cbiAgSW50ZXJwb2xhdG9yLnByb3RvdHlwZS5yZXNldFJlZ0V4cCA9IGZ1bmN0aW9uIHJlc2V0UmVnRXhwKCkge1xuICAgIC8vIHRoZSByZWdleHBcbiAgICB2YXIgcmVnZXhwU3RyID0gdGhpcy5wcmVmaXggKyAnKC4rPyknICsgdGhpcy5zdWZmaXg7XG4gICAgdGhpcy5yZWdleHAgPSBuZXcgUmVnRXhwKHJlZ2V4cFN0ciwgJ2cnKTtcblxuICAgIHZhciByZWdleHBVbmVzY2FwZVN0ciA9ICcnICsgdGhpcy5wcmVmaXggKyB0aGlzLnVuZXNjYXBlUHJlZml4ICsgJyguKz8pJyArIHRoaXMudW5lc2NhcGVTdWZmaXggKyB0aGlzLnN1ZmZpeDtcbiAgICB0aGlzLnJlZ2V4cFVuZXNjYXBlID0gbmV3IFJlZ0V4cChyZWdleHBVbmVzY2FwZVN0ciwgJ2cnKTtcblxuICAgIHZhciBuZXN0aW5nUmVnZXhwU3RyID0gdGhpcy5uZXN0aW5nUHJlZml4ICsgJyguKz8pJyArIHRoaXMubmVzdGluZ1N1ZmZpeDtcbiAgICB0aGlzLm5lc3RpbmdSZWdleHAgPSBuZXcgUmVnRXhwKG5lc3RpbmdSZWdleHBTdHIsICdnJyk7XG4gIH07XG5cbiAgSW50ZXJwb2xhdG9yLnByb3RvdHlwZS5pbnRlcnBvbGF0ZSA9IGZ1bmN0aW9uIGludGVycG9sYXRlKHN0ciwgZGF0YSwgbG5nKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgIHZhciBtYXRjaCA9IHZvaWQgMDtcbiAgICB2YXIgdmFsdWUgPSB2b2lkIDA7XG4gICAgdmFyIHJlcGxhY2VzID0gdm9pZCAwO1xuXG4gICAgZnVuY3Rpb24gcmVnZXhTYWZlKHZhbCkge1xuICAgICAgcmV0dXJuIHZhbC5yZXBsYWNlKC9cXCQvZywgJyQkJCQnKTtcbiAgICB9XG5cbiAgICB2YXIgaGFuZGxlRm9ybWF0ID0gZnVuY3Rpb24gaGFuZGxlRm9ybWF0KGtleSkge1xuICAgICAgaWYgKGtleS5pbmRleE9mKF90aGlzLmZvcm1hdFNlcGFyYXRvcikgPCAwKSByZXR1cm4gZ2V0UGF0aChkYXRhLCBrZXkpO1xuXG4gICAgICB2YXIgcCA9IGtleS5zcGxpdChfdGhpcy5mb3JtYXRTZXBhcmF0b3IpO1xuICAgICAgdmFyIGsgPSBwLnNoaWZ0KCkudHJpbSgpO1xuICAgICAgdmFyIGYgPSBwLmpvaW4oX3RoaXMuZm9ybWF0U2VwYXJhdG9yKS50cmltKCk7XG5cbiAgICAgIHJldHVybiBfdGhpcy5mb3JtYXQoZ2V0UGF0aChkYXRhLCBrKSwgZiwgbG5nKTtcbiAgICB9O1xuXG4gICAgdGhpcy5yZXNldFJlZ0V4cCgpO1xuXG4gICAgcmVwbGFjZXMgPSAwO1xuICAgIC8vIHVuZXNjYXBlIGlmIGhhcyB1bmVzY2FwZVByZWZpeC9TdWZmaXhcbiAgICAvKiBlc2xpbnQgbm8tY29uZC1hc3NpZ246IDAgKi9cbiAgICB3aGlsZSAobWF0Y2ggPSB0aGlzLnJlZ2V4cFVuZXNjYXBlLmV4ZWMoc3RyKSkge1xuICAgICAgdmFsdWUgPSBoYW5kbGVGb3JtYXQobWF0Y2hbMV0udHJpbSgpKTtcbiAgICAgIHN0ciA9IHN0ci5yZXBsYWNlKG1hdGNoWzBdLCB2YWx1ZSk7XG4gICAgICB0aGlzLnJlZ2V4cFVuZXNjYXBlLmxhc3RJbmRleCA9IDA7XG4gICAgICByZXBsYWNlcysrO1xuICAgICAgaWYgKHJlcGxhY2VzID49IHRoaXMubWF4UmVwbGFjZXMpIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmVwbGFjZXMgPSAwO1xuICAgIC8vIHJlZ3VsYXIgZXNjYXBlIG9uIGRlbWFuZFxuICAgIHdoaWxlIChtYXRjaCA9IHRoaXMucmVnZXhwLmV4ZWMoc3RyKSkge1xuICAgICAgdmFsdWUgPSBoYW5kbGVGb3JtYXQobWF0Y2hbMV0udHJpbSgpKTtcbiAgICAgIGlmICh0eXBlb2YgdmFsdWUgIT09ICdzdHJpbmcnKSB2YWx1ZSA9IG1ha2VTdHJpbmcodmFsdWUpO1xuICAgICAgaWYgKCF2YWx1ZSkge1xuICAgICAgICB0aGlzLmxvZ2dlci53YXJuKCdtaXNzZWQgdG8gcGFzcyBpbiB2YXJpYWJsZSAnICsgbWF0Y2hbMV0gKyAnIGZvciBpbnRlcnBvbGF0aW5nICcgKyBzdHIpO1xuICAgICAgICB2YWx1ZSA9ICcnO1xuICAgICAgfVxuICAgICAgdmFsdWUgPSB0aGlzLmVzY2FwZVZhbHVlID8gcmVnZXhTYWZlKHRoaXMuZXNjYXBlKHZhbHVlKSkgOiByZWdleFNhZmUodmFsdWUpO1xuICAgICAgc3RyID0gc3RyLnJlcGxhY2UobWF0Y2hbMF0sIHZhbHVlKTtcbiAgICAgIHRoaXMucmVnZXhwLmxhc3RJbmRleCA9IDA7XG4gICAgICByZXBsYWNlcysrO1xuICAgICAgaWYgKHJlcGxhY2VzID49IHRoaXMubWF4UmVwbGFjZXMpIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBzdHI7XG4gIH07XG5cbiAgSW50ZXJwb2xhdG9yLnByb3RvdHlwZS5uZXN0ID0gZnVuY3Rpb24gbmVzdChzdHIsIGZjKSB7XG4gICAgdmFyIG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IHt9O1xuXG4gICAgdmFyIG1hdGNoID0gdm9pZCAwO1xuICAgIHZhciB2YWx1ZSA9IHZvaWQgMDtcblxuICAgIHZhciBjbG9uZWRPcHRpb25zID0gX2V4dGVuZHMoe30sIG9wdGlvbnMpO1xuICAgIGNsb25lZE9wdGlvbnMuYXBwbHlQb3N0UHJvY2Vzc29yID0gZmFsc2U7IC8vIGF2b2lkIHBvc3QgcHJvY2Vzc2luZyBvbiBuZXN0ZWQgbG9va3VwXG5cbiAgICAvLyBpZiB2YWx1ZSBpcyBzb21ldGhpbmcgbGlrZSBcIm15S2V5XCI6IFwibG9yZW0gJChhbm90aGVyS2V5LCB7IFwiY291bnRcIjoge3thVmFsdWVJbk9wdGlvbnN9fSB9KVwiXG4gICAgZnVuY3Rpb24gaGFuZGxlSGFzT3B0aW9ucyhrZXkpIHtcbiAgICAgIGlmIChrZXkuaW5kZXhPZignLCcpIDwgMCkgcmV0dXJuIGtleTtcblxuICAgICAgdmFyIHAgPSBrZXkuc3BsaXQoJywnKTtcbiAgICAgIGtleSA9IHAuc2hpZnQoKTtcbiAgICAgIHZhciBvcHRpb25zU3RyaW5nID0gcC5qb2luKCcsJyk7XG4gICAgICBvcHRpb25zU3RyaW5nID0gdGhpcy5pbnRlcnBvbGF0ZShvcHRpb25zU3RyaW5nLCBjbG9uZWRPcHRpb25zKTtcbiAgICAgIG9wdGlvbnNTdHJpbmcgPSBvcHRpb25zU3RyaW5nLnJlcGxhY2UoLycvZywgJ1wiJyk7XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIGNsb25lZE9wdGlvbnMgPSBKU09OLnBhcnNlKG9wdGlvbnNTdHJpbmcpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICB0aGlzLmxvZ2dlci5lcnJvcignZmFpbGVkIHBhcnNpbmcgb3B0aW9ucyBzdHJpbmcgaW4gbmVzdGluZyBmb3Iga2V5ICcgKyBrZXksIGUpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4ga2V5O1xuICAgIH1cblxuICAgIC8vIHJlZ3VsYXIgZXNjYXBlIG9uIGRlbWFuZFxuICAgIHdoaWxlIChtYXRjaCA9IHRoaXMubmVzdGluZ1JlZ2V4cC5leGVjKHN0cikpIHtcbiAgICAgIHZhbHVlID0gZmMoaGFuZGxlSGFzT3B0aW9ucy5jYWxsKHRoaXMsIG1hdGNoWzFdLnRyaW0oKSksIGNsb25lZE9wdGlvbnMpO1xuXG4gICAgICAvLyBpcyBvbmx5IHRoZSBuZXN0aW5nIGtleSAoa2V5MSA9ICckKGtleTIpJykgcmV0dXJuIHRoZSB2YWx1ZSB3aXRob3V0IHN0cmluZ2lmeVxuICAgICAgaWYgKHZhbHVlICYmIG1hdGNoWzBdID09PSBzdHIgJiYgdHlwZW9mIHZhbHVlICE9PSAnc3RyaW5nJykgcmV0dXJuIHZhbHVlO1xuXG4gICAgICAvLyBubyBzdHJpbmcgdG8gaW5jbHVkZSBvciBlbXB0eVxuICAgICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ3N0cmluZycpIHZhbHVlID0gbWFrZVN0cmluZyh2YWx1ZSk7XG4gICAgICBpZiAoIXZhbHVlKSB7XG4gICAgICAgIHRoaXMubG9nZ2VyLndhcm4oJ21pc3NlZCB0byByZXNvbHZlICcgKyBtYXRjaFsxXSArICcgZm9yIG5lc3RpbmcgJyArIHN0cik7XG4gICAgICAgIHZhbHVlID0gJyc7XG4gICAgICB9XG4gICAgICAvLyBOZXN0ZWQga2V5cyBzaG91bGQgbm90IGJlIGVzY2FwZWQgYnkgZGVmYXVsdCAjODU0XG4gICAgICAvLyB2YWx1ZSA9IHRoaXMuZXNjYXBlVmFsdWUgPyByZWdleFNhZmUodXRpbHMuZXNjYXBlKHZhbHVlKSkgOiByZWdleFNhZmUodmFsdWUpO1xuICAgICAgc3RyID0gc3RyLnJlcGxhY2UobWF0Y2hbMF0sIHZhbHVlKTtcbiAgICAgIHRoaXMucmVnZXhwLmxhc3RJbmRleCA9IDA7XG4gICAgfVxuICAgIHJldHVybiBzdHI7XG4gIH07XG5cbiAgcmV0dXJuIEludGVycG9sYXRvcjtcbn0oKTtcblxuZnVuY3Rpb24gcmVtb3ZlKGFyciwgd2hhdCkge1xuICB2YXIgZm91bmQgPSBhcnIuaW5kZXhPZih3aGF0KTtcblxuICB3aGlsZSAoZm91bmQgIT09IC0xKSB7XG4gICAgYXJyLnNwbGljZShmb3VuZCwgMSk7XG4gICAgZm91bmQgPSBhcnIuaW5kZXhPZih3aGF0KTtcbiAgfVxufVxuXG52YXIgQ29ubmVjdG9yID0gZnVuY3Rpb24gKF9FdmVudEVtaXR0ZXIpIHtcbiAgaW5oZXJpdHMoQ29ubmVjdG9yLCBfRXZlbnRFbWl0dGVyKTtcblxuICBmdW5jdGlvbiBDb25uZWN0b3IoYmFja2VuZCwgc3RvcmUsIHNlcnZpY2VzKSB7XG4gICAgdmFyIG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMyAmJiBhcmd1bWVudHNbM10gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1szXSA6IHt9O1xuICAgIGNsYXNzQ2FsbENoZWNrKHRoaXMsIENvbm5lY3Rvcik7XG5cbiAgICB2YXIgX3RoaXMgPSBwb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIF9FdmVudEVtaXR0ZXIuY2FsbCh0aGlzKSk7XG5cbiAgICBfdGhpcy5iYWNrZW5kID0gYmFja2VuZDtcbiAgICBfdGhpcy5zdG9yZSA9IHN0b3JlO1xuICAgIF90aGlzLmxhbmd1YWdlVXRpbHMgPSBzZXJ2aWNlcy5sYW5ndWFnZVV0aWxzO1xuICAgIF90aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgIF90aGlzLmxvZ2dlciA9IGJhc2VMb2dnZXIuY3JlYXRlKCdiYWNrZW5kQ29ubmVjdG9yJyk7XG5cbiAgICBfdGhpcy5zdGF0ZSA9IHt9O1xuICAgIF90aGlzLnF1ZXVlID0gW107XG5cbiAgICBpZiAoX3RoaXMuYmFja2VuZCAmJiBfdGhpcy5iYWNrZW5kLmluaXQpIHtcbiAgICAgIF90aGlzLmJhY2tlbmQuaW5pdChzZXJ2aWNlcywgb3B0aW9ucy5iYWNrZW5kLCBvcHRpb25zKTtcbiAgICB9XG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG5cbiAgQ29ubmVjdG9yLnByb3RvdHlwZS5xdWV1ZUxvYWQgPSBmdW5jdGlvbiBxdWV1ZUxvYWQobGFuZ3VhZ2VzLCBuYW1lc3BhY2VzLCBjYWxsYmFjaykge1xuICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgLy8gZmluZCB3aGF0IG5lZWRzIHRvIGJlIGxvYWRlZFxuICAgIHZhciB0b0xvYWQgPSBbXTtcbiAgICB2YXIgcGVuZGluZyA9IFtdO1xuICAgIHZhciB0b0xvYWRMYW5ndWFnZXMgPSBbXTtcbiAgICB2YXIgdG9Mb2FkTmFtZXNwYWNlcyA9IFtdO1xuXG4gICAgbGFuZ3VhZ2VzLmZvckVhY2goZnVuY3Rpb24gKGxuZykge1xuICAgICAgdmFyIGhhc0FsbE5hbWVzcGFjZXMgPSB0cnVlO1xuXG4gICAgICBuYW1lc3BhY2VzLmZvckVhY2goZnVuY3Rpb24gKG5zKSB7XG4gICAgICAgIHZhciBuYW1lID0gbG5nICsgJ3wnICsgbnM7XG5cbiAgICAgICAgaWYgKF90aGlzMi5zdG9yZS5oYXNSZXNvdXJjZUJ1bmRsZShsbmcsIG5zKSkge1xuICAgICAgICAgIF90aGlzMi5zdGF0ZVtuYW1lXSA9IDI7IC8vIGxvYWRlZFxuICAgICAgICB9IGVsc2UgaWYgKF90aGlzMi5zdGF0ZVtuYW1lXSA8IDApIHtcbiAgICAgICAgICAvLyBub3RoaW5nIHRvIGRvIGZvciBlcnJcbiAgICAgICAgfSBlbHNlIGlmIChfdGhpczIuc3RhdGVbbmFtZV0gPT09IDEpIHtcbiAgICAgICAgICBpZiAocGVuZGluZy5pbmRleE9mKG5hbWUpIDwgMCkgcGVuZGluZy5wdXNoKG5hbWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIF90aGlzMi5zdGF0ZVtuYW1lXSA9IDE7IC8vIHBlbmRpbmdcblxuICAgICAgICAgIGhhc0FsbE5hbWVzcGFjZXMgPSBmYWxzZTtcblxuICAgICAgICAgIGlmIChwZW5kaW5nLmluZGV4T2YobmFtZSkgPCAwKSBwZW5kaW5nLnB1c2gobmFtZSk7XG4gICAgICAgICAgaWYgKHRvTG9hZC5pbmRleE9mKG5hbWUpIDwgMCkgdG9Mb2FkLnB1c2gobmFtZSk7XG4gICAgICAgICAgaWYgKHRvTG9hZE5hbWVzcGFjZXMuaW5kZXhPZihucykgPCAwKSB0b0xvYWROYW1lc3BhY2VzLnB1c2gobnMpO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgaWYgKCFoYXNBbGxOYW1lc3BhY2VzKSB0b0xvYWRMYW5ndWFnZXMucHVzaChsbmcpO1xuICAgIH0pO1xuXG4gICAgaWYgKHRvTG9hZC5sZW5ndGggfHwgcGVuZGluZy5sZW5ndGgpIHtcbiAgICAgIHRoaXMucXVldWUucHVzaCh7XG4gICAgICAgIHBlbmRpbmc6IHBlbmRpbmcsXG4gICAgICAgIGxvYWRlZDoge30sXG4gICAgICAgIGVycm9yczogW10sXG4gICAgICAgIGNhbGxiYWNrOiBjYWxsYmFja1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIHRvTG9hZDogdG9Mb2FkLFxuICAgICAgcGVuZGluZzogcGVuZGluZyxcbiAgICAgIHRvTG9hZExhbmd1YWdlczogdG9Mb2FkTGFuZ3VhZ2VzLFxuICAgICAgdG9Mb2FkTmFtZXNwYWNlczogdG9Mb2FkTmFtZXNwYWNlc1xuICAgIH07XG4gIH07XG5cbiAgQ29ubmVjdG9yLnByb3RvdHlwZS5sb2FkZWQgPSBmdW5jdGlvbiBsb2FkZWQobmFtZSwgZXJyLCBkYXRhKSB7XG4gICAgdmFyIF90aGlzMyA9IHRoaXM7XG5cbiAgICB2YXIgX25hbWUkc3BsaXQgPSBuYW1lLnNwbGl0KCd8JyksXG4gICAgICAgIF9uYW1lJHNwbGl0MiA9IHNsaWNlZFRvQXJyYXkoX25hbWUkc3BsaXQsIDIpLFxuICAgICAgICBsbmcgPSBfbmFtZSRzcGxpdDJbMF0sXG4gICAgICAgIG5zID0gX25hbWUkc3BsaXQyWzFdO1xuXG4gICAgaWYgKGVycikgdGhpcy5lbWl0KCdmYWlsZWRMb2FkaW5nJywgbG5nLCBucywgZXJyKTtcblxuICAgIGlmIChkYXRhKSB7XG4gICAgICB0aGlzLnN0b3JlLmFkZFJlc291cmNlQnVuZGxlKGxuZywgbnMsIGRhdGEpO1xuICAgIH1cblxuICAgIC8vIHNldCBsb2FkZWRcbiAgICB0aGlzLnN0YXRlW25hbWVdID0gZXJyID8gLTEgOiAyO1xuXG4gICAgLy8gY2FsbGJhY2sgaWYgcmVhZHlcbiAgICB0aGlzLnF1ZXVlLmZvckVhY2goZnVuY3Rpb24gKHEpIHtcbiAgICAgIHB1c2hQYXRoKHEubG9hZGVkLCBbbG5nXSwgbnMpO1xuICAgICAgcmVtb3ZlKHEucGVuZGluZywgbmFtZSk7XG5cbiAgICAgIGlmIChlcnIpIHEuZXJyb3JzLnB1c2goZXJyKTtcblxuICAgICAgaWYgKHEucGVuZGluZy5sZW5ndGggPT09IDAgJiYgIXEuZG9uZSkge1xuICAgICAgICBfdGhpczMuZW1pdCgnbG9hZGVkJywgcS5sb2FkZWQpO1xuICAgICAgICAvKiBlc2xpbnQgbm8tcGFyYW0tcmVhc3NpZ246IDAgKi9cbiAgICAgICAgcS5kb25lID0gdHJ1ZTtcbiAgICAgICAgaWYgKHEuZXJyb3JzLmxlbmd0aCkge1xuICAgICAgICAgIHEuY2FsbGJhY2socS5lcnJvcnMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHEuY2FsbGJhY2soKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gcmVtb3ZlIGRvbmUgbG9hZCByZXF1ZXN0c1xuICAgIHRoaXMucXVldWUgPSB0aGlzLnF1ZXVlLmZpbHRlcihmdW5jdGlvbiAocSkge1xuICAgICAgcmV0dXJuICFxLmRvbmU7XG4gICAgfSk7XG4gIH07XG5cbiAgQ29ubmVjdG9yLnByb3RvdHlwZS5yZWFkID0gZnVuY3Rpb24gcmVhZChsbmcsIG5zLCBmY05hbWUpIHtcbiAgICB2YXIgdHJpZWQgPSBhcmd1bWVudHMubGVuZ3RoID4gMyAmJiBhcmd1bWVudHNbM10gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1szXSA6IDA7XG5cbiAgICB2YXIgX3RoaXM0ID0gdGhpcztcblxuICAgIHZhciB3YWl0ID0gYXJndW1lbnRzLmxlbmd0aCA+IDQgJiYgYXJndW1lbnRzWzRdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbNF0gOiAyNTA7XG4gICAgdmFyIGNhbGxiYWNrID0gYXJndW1lbnRzWzVdO1xuXG4gICAgaWYgKCFsbmcubGVuZ3RoKSByZXR1cm4gY2FsbGJhY2sobnVsbCwge30pOyAvLyBub3RpbmcgdG8gbG9hZFxuXG4gICAgcmV0dXJuIHRoaXMuYmFja2VuZFtmY05hbWVdKGxuZywgbnMsIGZ1bmN0aW9uIChlcnIsIGRhdGEpIHtcbiAgICAgIGlmIChlcnIgJiYgZGF0YSAvKiA9IHJldHJ5RmxhZyAqLyAmJiB0cmllZCA8IDUpIHtcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgX3RoaXM0LnJlYWQuY2FsbChfdGhpczQsIGxuZywgbnMsIGZjTmFtZSwgdHJpZWQgKyAxLCB3YWl0ICogMiwgY2FsbGJhY2spO1xuICAgICAgICB9LCB3YWl0KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY2FsbGJhY2soZXJyLCBkYXRhKTtcbiAgICB9KTtcbiAgfTtcblxuICAvKiBlc2xpbnQgY29uc2lzdGVudC1yZXR1cm46IDAgKi9cblxuXG4gIENvbm5lY3Rvci5wcm90b3R5cGUubG9hZCA9IGZ1bmN0aW9uIGxvYWQobGFuZ3VhZ2VzLCBuYW1lc3BhY2VzLCBjYWxsYmFjaykge1xuICAgIHZhciBfdGhpczUgPSB0aGlzO1xuXG4gICAgaWYgKCF0aGlzLmJhY2tlbmQpIHtcbiAgICAgIHRoaXMubG9nZ2VyLndhcm4oJ05vIGJhY2tlbmQgd2FzIGFkZGVkIHZpYSBpMThuZXh0LnVzZS4gV2lsbCBub3QgbG9hZCByZXNvdXJjZXMuJyk7XG4gICAgICByZXR1cm4gY2FsbGJhY2sgJiYgY2FsbGJhY2soKTtcbiAgICB9XG4gICAgdmFyIG9wdGlvbnMgPSBfZXh0ZW5kcyh7fSwgdGhpcy5iYWNrZW5kLm9wdGlvbnMsIHRoaXMub3B0aW9ucy5iYWNrZW5kKTtcblxuICAgIGlmICh0eXBlb2YgbGFuZ3VhZ2VzID09PSAnc3RyaW5nJykgbGFuZ3VhZ2VzID0gdGhpcy5sYW5ndWFnZVV0aWxzLnRvUmVzb2x2ZUhpZXJhcmNoeShsYW5ndWFnZXMpO1xuICAgIGlmICh0eXBlb2YgbmFtZXNwYWNlcyA9PT0gJ3N0cmluZycpIG5hbWVzcGFjZXMgPSBbbmFtZXNwYWNlc107XG5cbiAgICB2YXIgdG9Mb2FkID0gdGhpcy5xdWV1ZUxvYWQobGFuZ3VhZ2VzLCBuYW1lc3BhY2VzLCBjYWxsYmFjayk7XG4gICAgaWYgKCF0b0xvYWQudG9Mb2FkLmxlbmd0aCkge1xuICAgICAgaWYgKCF0b0xvYWQucGVuZGluZy5sZW5ndGgpIGNhbGxiYWNrKCk7IC8vIG5vdGhpbmcgdG8gbG9hZCBhbmQgbm8gcGVuZGluZ3MuLi5jYWxsYmFjayBub3dcbiAgICAgIHJldHVybiBudWxsOyAvLyBwZW5kaW5ncyB3aWxsIHRyaWdnZXIgY2FsbGJhY2tcbiAgICB9XG5cbiAgICAvLyBsb2FkIHdpdGggbXVsdGktbG9hZFxuICAgIGlmIChvcHRpb25zLmFsbG93TXVsdGlMb2FkaW5nICYmIHRoaXMuYmFja2VuZC5yZWFkTXVsdGkpIHtcbiAgICAgIHRoaXMucmVhZCh0b0xvYWQudG9Mb2FkTGFuZ3VhZ2VzLCB0b0xvYWQudG9Mb2FkTmFtZXNwYWNlcywgJ3JlYWRNdWx0aScsIG51bGwsIG51bGwsIGZ1bmN0aW9uIChlcnIsIGRhdGEpIHtcbiAgICAgICAgaWYgKGVycikgX3RoaXM1LmxvZ2dlci53YXJuKCdsb2FkaW5nIG5hbWVzcGFjZXMgJyArIHRvTG9hZC50b0xvYWROYW1lc3BhY2VzLmpvaW4oJywgJykgKyAnIGZvciBsYW5ndWFnZXMgJyArIHRvTG9hZC50b0xvYWRMYW5ndWFnZXMuam9pbignLCAnKSArICcgdmlhIG11bHRpbG9hZGluZyBmYWlsZWQnLCBlcnIpO1xuICAgICAgICBpZiAoIWVyciAmJiBkYXRhKSBfdGhpczUubG9nZ2VyLmxvZygnc3VjY2Vzc2Z1bGx5IGxvYWRlZCBuYW1lc3BhY2VzICcgKyB0b0xvYWQudG9Mb2FkTmFtZXNwYWNlcy5qb2luKCcsICcpICsgJyBmb3IgbGFuZ3VhZ2VzICcgKyB0b0xvYWQudG9Mb2FkTGFuZ3VhZ2VzLmpvaW4oJywgJykgKyAnIHZpYSBtdWx0aWxvYWRpbmcnLCBkYXRhKTtcblxuICAgICAgICB0b0xvYWQudG9Mb2FkLmZvckVhY2goZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgICB2YXIgX25hbWUkc3BsaXQzID0gbmFtZS5zcGxpdCgnfCcpLFxuICAgICAgICAgICAgICBfbmFtZSRzcGxpdDQgPSBzbGljZWRUb0FycmF5KF9uYW1lJHNwbGl0MywgMiksXG4gICAgICAgICAgICAgIGwgPSBfbmFtZSRzcGxpdDRbMF0sXG4gICAgICAgICAgICAgIG4gPSBfbmFtZSRzcGxpdDRbMV07XG5cbiAgICAgICAgICB2YXIgYnVuZGxlID0gZ2V0UGF0aChkYXRhLCBbbCwgbl0pO1xuICAgICAgICAgIGlmIChidW5kbGUpIHtcbiAgICAgICAgICAgIF90aGlzNS5sb2FkZWQobmFtZSwgZXJyLCBidW5kbGUpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YXIgZXJyb3IgPSAnbG9hZGluZyBuYW1lc3BhY2UgJyArIG4gKyAnIGZvciBsYW5ndWFnZSAnICsgbCArICcgdmlhIG11bHRpbG9hZGluZyBmYWlsZWQnO1xuICAgICAgICAgICAgX3RoaXM1LmxvYWRlZChuYW1lLCBlcnJvcik7XG4gICAgICAgICAgICBfdGhpczUubG9nZ2VyLmVycm9yKGVycm9yKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRvTG9hZC50b0xvYWQuZm9yRWFjaChmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICBfdGhpczUubG9hZE9uZShuYW1lKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcblxuICBDb25uZWN0b3IucHJvdG90eXBlLnJlbG9hZCA9IGZ1bmN0aW9uIHJlbG9hZChsYW5ndWFnZXMsIG5hbWVzcGFjZXMpIHtcbiAgICB2YXIgX3RoaXM2ID0gdGhpcztcblxuICAgIGlmICghdGhpcy5iYWNrZW5kKSB7XG4gICAgICB0aGlzLmxvZ2dlci53YXJuKCdObyBiYWNrZW5kIHdhcyBhZGRlZCB2aWEgaTE4bmV4dC51c2UuIFdpbGwgbm90IGxvYWQgcmVzb3VyY2VzLicpO1xuICAgIH1cbiAgICB2YXIgb3B0aW9ucyA9IF9leHRlbmRzKHt9LCB0aGlzLmJhY2tlbmQub3B0aW9ucywgdGhpcy5vcHRpb25zLmJhY2tlbmQpO1xuXG4gICAgaWYgKHR5cGVvZiBsYW5ndWFnZXMgPT09ICdzdHJpbmcnKSBsYW5ndWFnZXMgPSB0aGlzLmxhbmd1YWdlVXRpbHMudG9SZXNvbHZlSGllcmFyY2h5KGxhbmd1YWdlcyk7XG4gICAgaWYgKHR5cGVvZiBuYW1lc3BhY2VzID09PSAnc3RyaW5nJykgbmFtZXNwYWNlcyA9IFtuYW1lc3BhY2VzXTtcblxuICAgIC8vIGxvYWQgd2l0aCBtdWx0aS1sb2FkXG4gICAgaWYgKG9wdGlvbnMuYWxsb3dNdWx0aUxvYWRpbmcgJiYgdGhpcy5iYWNrZW5kLnJlYWRNdWx0aSkge1xuICAgICAgdGhpcy5yZWFkKGxhbmd1YWdlcywgbmFtZXNwYWNlcywgJ3JlYWRNdWx0aScsIG51bGwsIG51bGwsIGZ1bmN0aW9uIChlcnIsIGRhdGEpIHtcbiAgICAgICAgaWYgKGVycikgX3RoaXM2LmxvZ2dlci53YXJuKCdyZWxvYWRpbmcgbmFtZXNwYWNlcyAnICsgbmFtZXNwYWNlcy5qb2luKCcsICcpICsgJyBmb3IgbGFuZ3VhZ2VzICcgKyBsYW5ndWFnZXMuam9pbignLCAnKSArICcgdmlhIG11bHRpbG9hZGluZyBmYWlsZWQnLCBlcnIpO1xuICAgICAgICBpZiAoIWVyciAmJiBkYXRhKSBfdGhpczYubG9nZ2VyLmxvZygnc3VjY2Vzc2Z1bGx5IHJlbG9hZGVkIG5hbWVzcGFjZXMgJyArIG5hbWVzcGFjZXMuam9pbignLCAnKSArICcgZm9yIGxhbmd1YWdlcyAnICsgbGFuZ3VhZ2VzLmpvaW4oJywgJykgKyAnIHZpYSBtdWx0aWxvYWRpbmcnLCBkYXRhKTtcblxuICAgICAgICBsYW5ndWFnZXMuZm9yRWFjaChmdW5jdGlvbiAobCkge1xuICAgICAgICAgIG5hbWVzcGFjZXMuZm9yRWFjaChmdW5jdGlvbiAobikge1xuICAgICAgICAgICAgdmFyIGJ1bmRsZSA9IGdldFBhdGgoZGF0YSwgW2wsIG5dKTtcbiAgICAgICAgICAgIGlmIChidW5kbGUpIHtcbiAgICAgICAgICAgICAgX3RoaXM2LmxvYWRlZChsICsgJ3wnICsgbiwgZXJyLCBidW5kbGUpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdmFyIGVycm9yID0gJ3JlbG9hZGluZyBuYW1lc3BhY2UgJyArIG4gKyAnIGZvciBsYW5ndWFnZSAnICsgbCArICcgdmlhIG11bHRpbG9hZGluZyBmYWlsZWQnO1xuICAgICAgICAgICAgICBfdGhpczYubG9hZGVkKGwgKyAnfCcgKyBuLCBlcnJvcik7XG4gICAgICAgICAgICAgIF90aGlzNi5sb2dnZXIuZXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBsYW5ndWFnZXMuZm9yRWFjaChmdW5jdGlvbiAobCkge1xuICAgICAgICBuYW1lc3BhY2VzLmZvckVhY2goZnVuY3Rpb24gKG4pIHtcbiAgICAgICAgICBfdGhpczYubG9hZE9uZShsICsgJ3wnICsgbiwgJ3JlJyk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuICB9O1xuXG4gIENvbm5lY3Rvci5wcm90b3R5cGUubG9hZE9uZSA9IGZ1bmN0aW9uIGxvYWRPbmUobmFtZSkge1xuICAgIHZhciBfdGhpczcgPSB0aGlzO1xuXG4gICAgdmFyIHByZWZpeCA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogJyc7XG5cbiAgICB2YXIgX25hbWUkc3BsaXQ1ID0gbmFtZS5zcGxpdCgnfCcpLFxuICAgICAgICBfbmFtZSRzcGxpdDYgPSBzbGljZWRUb0FycmF5KF9uYW1lJHNwbGl0NSwgMiksXG4gICAgICAgIGxuZyA9IF9uYW1lJHNwbGl0NlswXSxcbiAgICAgICAgbnMgPSBfbmFtZSRzcGxpdDZbMV07XG5cbiAgICB0aGlzLnJlYWQobG5nLCBucywgJ3JlYWQnLCBudWxsLCBudWxsLCBmdW5jdGlvbiAoZXJyLCBkYXRhKSB7XG4gICAgICBpZiAoZXJyKSBfdGhpczcubG9nZ2VyLndhcm4ocHJlZml4ICsgJ2xvYWRpbmcgbmFtZXNwYWNlICcgKyBucyArICcgZm9yIGxhbmd1YWdlICcgKyBsbmcgKyAnIGZhaWxlZCcsIGVycik7XG4gICAgICBpZiAoIWVyciAmJiBkYXRhKSBfdGhpczcubG9nZ2VyLmxvZyhwcmVmaXggKyAnbG9hZGVkIG5hbWVzcGFjZSAnICsgbnMgKyAnIGZvciBsYW5ndWFnZSAnICsgbG5nLCBkYXRhKTtcblxuICAgICAgX3RoaXM3LmxvYWRlZChuYW1lLCBlcnIsIGRhdGEpO1xuICAgIH0pO1xuICB9O1xuXG4gIENvbm5lY3Rvci5wcm90b3R5cGUuc2F2ZU1pc3NpbmcgPSBmdW5jdGlvbiBzYXZlTWlzc2luZyhsYW5ndWFnZXMsIG5hbWVzcGFjZSwga2V5LCBmYWxsYmFja1ZhbHVlKSB7XG4gICAgaWYgKHRoaXMuYmFja2VuZCAmJiB0aGlzLmJhY2tlbmQuY3JlYXRlKSB0aGlzLmJhY2tlbmQuY3JlYXRlKGxhbmd1YWdlcywgbmFtZXNwYWNlLCBrZXksIGZhbGxiYWNrVmFsdWUpO1xuXG4gICAgLy8gd3JpdGUgdG8gc3RvcmUgdG8gYXZvaWQgcmVzZW5kaW5nXG4gICAgaWYgKCFsYW5ndWFnZXMgfHwgIWxhbmd1YWdlc1swXSkgcmV0dXJuO1xuICAgIHRoaXMuc3RvcmUuYWRkUmVzb3VyY2UobGFuZ3VhZ2VzWzBdLCBuYW1lc3BhY2UsIGtleSwgZmFsbGJhY2tWYWx1ZSk7XG4gIH07XG5cbiAgcmV0dXJuIENvbm5lY3Rvcjtcbn0oRXZlbnRFbWl0dGVyKTtcblxudmFyIENvbm5lY3RvciQxID0gZnVuY3Rpb24gKF9FdmVudEVtaXR0ZXIpIHtcbiAgaW5oZXJpdHMoQ29ubmVjdG9yLCBfRXZlbnRFbWl0dGVyKTtcblxuICBmdW5jdGlvbiBDb25uZWN0b3IoY2FjaGUsIHN0b3JlLCBzZXJ2aWNlcykge1xuICAgIHZhciBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDMgJiYgYXJndW1lbnRzWzNdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbM10gOiB7fTtcbiAgICBjbGFzc0NhbGxDaGVjayh0aGlzLCBDb25uZWN0b3IpO1xuXG4gICAgdmFyIF90aGlzID0gcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCBfRXZlbnRFbWl0dGVyLmNhbGwodGhpcykpO1xuXG4gICAgX3RoaXMuY2FjaGUgPSBjYWNoZTtcbiAgICBfdGhpcy5zdG9yZSA9IHN0b3JlO1xuICAgIF90aGlzLnNlcnZpY2VzID0gc2VydmljZXM7XG4gICAgX3RoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgX3RoaXMubG9nZ2VyID0gYmFzZUxvZ2dlci5jcmVhdGUoJ2NhY2hlQ29ubmVjdG9yJyk7XG5cbiAgICBpZiAoX3RoaXMuY2FjaGUgJiYgX3RoaXMuY2FjaGUuaW5pdCkgX3RoaXMuY2FjaGUuaW5pdChzZXJ2aWNlcywgb3B0aW9ucy5jYWNoZSwgb3B0aW9ucyk7XG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG5cbiAgLyogZXNsaW50IGNvbnNpc3RlbnQtcmV0dXJuOiAwICovXG5cblxuICBDb25uZWN0b3IucHJvdG90eXBlLmxvYWQgPSBmdW5jdGlvbiBsb2FkKGxhbmd1YWdlcywgbmFtZXNwYWNlcywgY2FsbGJhY2spIHtcbiAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgIGlmICghdGhpcy5jYWNoZSkgcmV0dXJuIGNhbGxiYWNrICYmIGNhbGxiYWNrKCk7XG4gICAgdmFyIG9wdGlvbnMgPSBfZXh0ZW5kcyh7fSwgdGhpcy5jYWNoZS5vcHRpb25zLCB0aGlzLm9wdGlvbnMuY2FjaGUpO1xuXG4gICAgdmFyIGxvYWRMbmdzID0gdHlwZW9mIGxhbmd1YWdlcyA9PT0gJ3N0cmluZycgPyB0aGlzLnNlcnZpY2VzLmxhbmd1YWdlVXRpbHMudG9SZXNvbHZlSGllcmFyY2h5KGxhbmd1YWdlcykgOiBsYW5ndWFnZXM7XG5cbiAgICBpZiAob3B0aW9ucy5lbmFibGVkKSB7XG4gICAgICB0aGlzLmNhY2hlLmxvYWQobG9hZExuZ3MsIGZ1bmN0aW9uIChlcnIsIGRhdGEpIHtcbiAgICAgICAgaWYgKGVycikgX3RoaXMyLmxvZ2dlci5lcnJvcignbG9hZGluZyBsYW5ndWFnZXMgJyArIGxvYWRMbmdzLmpvaW4oJywgJykgKyAnIGZyb20gY2FjaGUgZmFpbGVkJywgZXJyKTtcbiAgICAgICAgaWYgKGRhdGEpIHtcbiAgICAgICAgICAvKiBlc2xpbnQgbm8tcmVzdHJpY3RlZC1zeW50YXg6IDAgKi9cbiAgICAgICAgICBmb3IgKHZhciBsIGluIGRhdGEpIHtcbiAgICAgICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZGF0YSwgbCkpIHtcbiAgICAgICAgICAgICAgZm9yICh2YXIgbiBpbiBkYXRhW2xdKSB7XG4gICAgICAgICAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChkYXRhW2xdLCBuKSkge1xuICAgICAgICAgICAgICAgICAgaWYgKG4gIT09ICdpMThuU3RhbXAnKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBidW5kbGUgPSBkYXRhW2xdW25dO1xuICAgICAgICAgICAgICAgICAgICBpZiAoYnVuZGxlKSBfdGhpczIuc3RvcmUuYWRkUmVzb3VyY2VCdW5kbGUobCwgbiwgYnVuZGxlKTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNhbGxiYWNrKSBjYWxsYmFjaygpO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIGlmIChjYWxsYmFjaykge1xuICAgICAgY2FsbGJhY2soKTtcbiAgICB9XG4gIH07XG5cbiAgQ29ubmVjdG9yLnByb3RvdHlwZS5zYXZlID0gZnVuY3Rpb24gc2F2ZSgpIHtcbiAgICBpZiAodGhpcy5jYWNoZSAmJiB0aGlzLm9wdGlvbnMuY2FjaGUgJiYgdGhpcy5vcHRpb25zLmNhY2hlLmVuYWJsZWQpIHRoaXMuY2FjaGUuc2F2ZSh0aGlzLnN0b3JlLmRhdGEpO1xuICB9O1xuXG4gIHJldHVybiBDb25uZWN0b3I7XG59KEV2ZW50RW1pdHRlcik7XG5cbmZ1bmN0aW9uIGdldCQxKCkge1xuICByZXR1cm4ge1xuICAgIGRlYnVnOiBmYWxzZSxcbiAgICBpbml0SW1tZWRpYXRlOiB0cnVlLFxuXG4gICAgbnM6IFsndHJhbnNsYXRpb24nXSxcbiAgICBkZWZhdWx0TlM6IFsndHJhbnNsYXRpb24nXSxcbiAgICBmYWxsYmFja0xuZzogWydkZXYnXSxcbiAgICBmYWxsYmFja05TOiBmYWxzZSwgLy8gc3RyaW5nIG9yIGFycmF5IG9mIG5hbWVzcGFjZXNcblxuICAgIHdoaXRlbGlzdDogZmFsc2UsIC8vIGFycmF5IHdpdGggd2hpdGVsaXN0ZWQgbGFuZ3VhZ2VzXG4gICAgbm9uRXhwbGljaXRXaGl0ZWxpc3Q6IGZhbHNlLFxuICAgIGxvYWQ6ICdhbGwnLCAvLyB8IGN1cnJlbnRPbmx5IHwgbGFuZ3VhZ2VPbmx5XG4gICAgcHJlbG9hZDogZmFsc2UsIC8vIGFycmF5IHdpdGggcHJlbG9hZCBsYW5ndWFnZXNcblxuICAgIHNpbXBsaWZ5UGx1cmFsU3VmZml4OiB0cnVlLFxuICAgIGtleVNlcGFyYXRvcjogJy4nLFxuICAgIG5zU2VwYXJhdG9yOiAnOicsXG4gICAgcGx1cmFsU2VwYXJhdG9yOiAnXycsXG4gICAgY29udGV4dFNlcGFyYXRvcjogJ18nLFxuXG4gICAgc2F2ZU1pc3Npbmc6IGZhbHNlLCAvLyBlbmFibGUgdG8gc2VuZCBtaXNzaW5nIHZhbHVlc1xuICAgIHNhdmVNaXNzaW5nVG86ICdmYWxsYmFjaycsIC8vICdjdXJyZW50JyB8fCAnYWxsJ1xuICAgIG1pc3NpbmdLZXlIYW5kbGVyOiBmYWxzZSwgLy8gZnVuY3Rpb24obG5nLCBucywga2V5LCBmYWxsYmFja1ZhbHVlKSAtPiBvdmVycmlkZSBpZiBwcmVmZXIgb24gaGFuZGxpbmdcblxuICAgIHBvc3RQcm9jZXNzOiBmYWxzZSwgLy8gc3RyaW5nIG9yIGFycmF5IG9mIHBvc3RQcm9jZXNzb3IgbmFtZXNcbiAgICByZXR1cm5OdWxsOiB0cnVlLCAvLyBhbGxvd3MgbnVsbCB2YWx1ZSBhcyB2YWxpZCB0cmFuc2xhdGlvblxuICAgIHJldHVybkVtcHR5U3RyaW5nOiB0cnVlLCAvLyBhbGxvd3MgZW1wdHkgc3RyaW5nIHZhbHVlIGFzIHZhbGlkIHRyYW5zbGF0aW9uXG4gICAgcmV0dXJuT2JqZWN0czogZmFsc2UsXG4gICAgam9pbkFycmF5czogZmFsc2UsIC8vIG9yIHN0cmluZyB0byBqb2luIGFycmF5XG4gICAgcmV0dXJuZWRPYmplY3RIYW5kbGVyOiBmdW5jdGlvbiByZXR1cm5lZE9iamVjdEhhbmRsZXIoKSB7fSwgLy8gZnVuY3Rpb24oa2V5LCB2YWx1ZSwgb3B0aW9ucykgdHJpZ2dlcmVkIGlmIGtleSByZXR1cm5zIG9iamVjdCBidXQgcmV0dXJuT2JqZWN0cyBpcyBzZXQgdG8gZmFsc2VcbiAgICBwYXJzZU1pc3NpbmdLZXlIYW5kbGVyOiBmYWxzZSwgLy8gZnVuY3Rpb24oa2V5KSBwYXJzZWQgYSBrZXkgdGhhdCB3YXMgbm90IGZvdW5kIGluIHQoKSBiZWZvcmUgcmV0dXJuaW5nXG4gICAgYXBwZW5kTmFtZXNwYWNlVG9NaXNzaW5nS2V5OiBmYWxzZSxcbiAgICBhcHBlbmROYW1lc3BhY2VUb0NJTW9kZTogZmFsc2UsXG4gICAgb3ZlcmxvYWRUcmFuc2xhdGlvbk9wdGlvbkhhbmRsZXI6IGZ1bmN0aW9uIGhhbmRsZShhcmdzKSB7XG4gICAgICByZXR1cm4geyBkZWZhdWx0VmFsdWU6IGFyZ3NbMV0gfTtcbiAgICB9LFxuXG4gICAgaW50ZXJwb2xhdGlvbjoge1xuICAgICAgZXNjYXBlVmFsdWU6IHRydWUsXG4gICAgICBmb3JtYXQ6IGZ1bmN0aW9uIGZvcm1hdCh2YWx1ZSwgX2Zvcm1hdCwgbG5nKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgIH0sXG4gICAgICBwcmVmaXg6ICd7eycsXG4gICAgICBzdWZmaXg6ICd9fScsXG4gICAgICBmb3JtYXRTZXBhcmF0b3I6ICcsJyxcbiAgICAgIC8vIHByZWZpeEVzY2FwZWQ6ICd7eycsXG4gICAgICAvLyBzdWZmaXhFc2NhcGVkOiAnfX0nLFxuICAgICAgLy8gdW5lc2NhcGVTdWZmaXg6ICcnLFxuICAgICAgdW5lc2NhcGVQcmVmaXg6ICctJyxcblxuICAgICAgbmVzdGluZ1ByZWZpeDogJyR0KCcsXG4gICAgICBuZXN0aW5nU3VmZml4OiAnKScsXG4gICAgICAvLyBuZXN0aW5nUHJlZml4RXNjYXBlZDogJyR0KCcsXG4gICAgICAvLyBuZXN0aW5nU3VmZml4RXNjYXBlZDogJyknLFxuICAgICAgLy8gZGVmYXVsdFZhcmlhYmxlczogdW5kZWZpbmVkIC8vIG9iamVjdCB0aGF0IGNhbiBoYXZlIHZhbHVlcyB0byBpbnRlcnBvbGF0ZSBvbiAtIGV4dGVuZHMgcGFzc2VkIGluIGludGVycG9sYXRpb24gZGF0YVxuICAgICAgbWF4UmVwbGFjZXM6IDEwMDAgLy8gbWF4IHJlcGxhY2VzIHRvIHByZXZlbnQgZW5kbGVzcyBsb29wXG4gICAgfVxuICB9O1xufVxuXG4vKiBlc2xpbnQgbm8tcGFyYW0tcmVhc3NpZ246IDAgKi9cbmZ1bmN0aW9uIHRyYW5zZm9ybU9wdGlvbnMob3B0aW9ucykge1xuICAvLyBjcmVhdGUgbmFtZXNwYWNlIG9iamVjdCBpZiBuYW1lc3BhY2UgaXMgcGFzc2VkIGluIGFzIHN0cmluZ1xuICBpZiAodHlwZW9mIG9wdGlvbnMubnMgPT09ICdzdHJpbmcnKSBvcHRpb25zLm5zID0gW29wdGlvbnMubnNdO1xuICBpZiAodHlwZW9mIG9wdGlvbnMuZmFsbGJhY2tMbmcgPT09ICdzdHJpbmcnKSBvcHRpb25zLmZhbGxiYWNrTG5nID0gW29wdGlvbnMuZmFsbGJhY2tMbmddO1xuICBpZiAodHlwZW9mIG9wdGlvbnMuZmFsbGJhY2tOUyA9PT0gJ3N0cmluZycpIG9wdGlvbnMuZmFsbGJhY2tOUyA9IFtvcHRpb25zLmZhbGxiYWNrTlNdO1xuXG4gIC8vIGV4dGVuZCB3aGl0ZWxpc3Qgd2l0aCBjaW1vZGVcbiAgaWYgKG9wdGlvbnMud2hpdGVsaXN0ICYmIG9wdGlvbnMud2hpdGVsaXN0LmluZGV4T2YoJ2NpbW9kZScpIDwgMCkgb3B0aW9ucy53aGl0ZWxpc3QucHVzaCgnY2ltb2RlJyk7XG5cbiAgcmV0dXJuIG9wdGlvbnM7XG59XG5cbmZ1bmN0aW9uIG5vb3AoKSB7fVxuXG52YXIgSTE4biA9IGZ1bmN0aW9uIChfRXZlbnRFbWl0dGVyKSB7XG4gIGluaGVyaXRzKEkxOG4sIF9FdmVudEVtaXR0ZXIpO1xuXG4gIGZ1bmN0aW9uIEkxOG4oKSB7XG4gICAgdmFyIG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9O1xuICAgIHZhciBjYWxsYmFjayA9IGFyZ3VtZW50c1sxXTtcbiAgICBjbGFzc0NhbGxDaGVjayh0aGlzLCBJMThuKTtcblxuICAgIHZhciBfdGhpcyA9IHBvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgX0V2ZW50RW1pdHRlci5jYWxsKHRoaXMpKTtcblxuICAgIF90aGlzLm9wdGlvbnMgPSB0cmFuc2Zvcm1PcHRpb25zKG9wdGlvbnMpO1xuICAgIF90aGlzLnNlcnZpY2VzID0ge307XG4gICAgX3RoaXMubG9nZ2VyID0gYmFzZUxvZ2dlcjtcbiAgICBfdGhpcy5tb2R1bGVzID0geyBleHRlcm5hbDogW10gfTtcblxuICAgIGlmIChjYWxsYmFjayAmJiAhX3RoaXMuaXNJbml0aWFsaXplZCAmJiAhb3B0aW9ucy5pc0Nsb25lKSB7XG4gICAgICB2YXIgX3JldDtcblxuICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2kxOG5leHQvaTE4bmV4dC9pc3N1ZXMvODc5XG4gICAgICBpZiAoIV90aGlzLm9wdGlvbnMuaW5pdEltbWVkaWF0ZSkgcmV0dXJuIF9yZXQgPSBfdGhpcy5pbml0KG9wdGlvbnMsIGNhbGxiYWNrKSwgcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihfdGhpcywgX3JldCk7XG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgX3RoaXMuaW5pdChvcHRpb25zLCBjYWxsYmFjayk7XG4gICAgICB9LCAwKTtcbiAgICB9XG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG5cbiAgSTE4bi5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICB2YXIgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge307XG4gICAgdmFyIGNhbGxiYWNrID0gYXJndW1lbnRzWzFdO1xuXG4gICAgaWYgKHR5cGVvZiBvcHRpb25zID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBjYWxsYmFjayA9IG9wdGlvbnM7XG4gICAgICBvcHRpb25zID0ge307XG4gICAgfVxuICAgIHRoaXMub3B0aW9ucyA9IF9leHRlbmRzKHt9LCBnZXQkMSgpLCB0aGlzLm9wdGlvbnMsIHRyYW5zZm9ybU9wdGlvbnMob3B0aW9ucykpO1xuXG4gICAgdGhpcy5mb3JtYXQgPSB0aGlzLm9wdGlvbnMuaW50ZXJwb2xhdGlvbi5mb3JtYXQ7XG4gICAgaWYgKCFjYWxsYmFjaykgY2FsbGJhY2sgPSBub29wO1xuXG4gICAgZnVuY3Rpb24gY3JlYXRlQ2xhc3NPbkRlbWFuZChDbGFzc09yT2JqZWN0KSB7XG4gICAgICBpZiAoIUNsYXNzT3JPYmplY3QpIHJldHVybiBudWxsO1xuICAgICAgaWYgKHR5cGVvZiBDbGFzc09yT2JqZWN0ID09PSAnZnVuY3Rpb24nKSByZXR1cm4gbmV3IENsYXNzT3JPYmplY3QoKTtcbiAgICAgIHJldHVybiBDbGFzc09yT2JqZWN0O1xuICAgIH1cblxuICAgIC8vIGluaXQgc2VydmljZXNcbiAgICBpZiAoIXRoaXMub3B0aW9ucy5pc0Nsb25lKSB7XG4gICAgICBpZiAodGhpcy5tb2R1bGVzLmxvZ2dlcikge1xuICAgICAgICBiYXNlTG9nZ2VyLmluaXQoY3JlYXRlQ2xhc3NPbkRlbWFuZCh0aGlzLm1vZHVsZXMubG9nZ2VyKSwgdGhpcy5vcHRpb25zKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGJhc2VMb2dnZXIuaW5pdChudWxsLCB0aGlzLm9wdGlvbnMpO1xuICAgICAgfVxuXG4gICAgICB2YXIgbHUgPSBuZXcgTGFuZ3VhZ2VVdGlsKHRoaXMub3B0aW9ucyk7XG4gICAgICB0aGlzLnN0b3JlID0gbmV3IFJlc291cmNlU3RvcmUodGhpcy5vcHRpb25zLnJlc291cmNlcywgdGhpcy5vcHRpb25zKTtcblxuICAgICAgdmFyIHMgPSB0aGlzLnNlcnZpY2VzO1xuICAgICAgcy5sb2dnZXIgPSBiYXNlTG9nZ2VyO1xuICAgICAgcy5yZXNvdXJjZVN0b3JlID0gdGhpcy5zdG9yZTtcbiAgICAgIHMucmVzb3VyY2VTdG9yZS5vbignYWRkZWQgcmVtb3ZlZCcsIGZ1bmN0aW9uIChsbmcsIG5zKSB7XG4gICAgICAgIHMuY2FjaGVDb25uZWN0b3Iuc2F2ZSgpO1xuICAgICAgfSk7XG4gICAgICBzLmxhbmd1YWdlVXRpbHMgPSBsdTtcbiAgICAgIHMucGx1cmFsUmVzb2x2ZXIgPSBuZXcgUGx1cmFsUmVzb2x2ZXIobHUsIHsgcHJlcGVuZDogdGhpcy5vcHRpb25zLnBsdXJhbFNlcGFyYXRvciwgY29tcGF0aWJpbGl0eUpTT046IHRoaXMub3B0aW9ucy5jb21wYXRpYmlsaXR5SlNPTiwgc2ltcGxpZnlQbHVyYWxTdWZmaXg6IHRoaXMub3B0aW9ucy5zaW1wbGlmeVBsdXJhbFN1ZmZpeCB9KTtcbiAgICAgIHMuaW50ZXJwb2xhdG9yID0gbmV3IEludGVycG9sYXRvcih0aGlzLm9wdGlvbnMpO1xuXG4gICAgICBzLmJhY2tlbmRDb25uZWN0b3IgPSBuZXcgQ29ubmVjdG9yKGNyZWF0ZUNsYXNzT25EZW1hbmQodGhpcy5tb2R1bGVzLmJhY2tlbmQpLCBzLnJlc291cmNlU3RvcmUsIHMsIHRoaXMub3B0aW9ucyk7XG4gICAgICAvLyBwaXBlIGV2ZW50cyBmcm9tIGJhY2tlbmRDb25uZWN0b3JcbiAgICAgIHMuYmFja2VuZENvbm5lY3Rvci5vbignKicsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW4gPiAxID8gX2xlbiAtIDEgOiAwKSwgX2tleSA9IDE7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgICAgICBhcmdzW19rZXkgLSAxXSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICAgICAgfVxuXG4gICAgICAgIF90aGlzMi5lbWl0LmFwcGx5KF90aGlzMiwgW2V2ZW50XS5jb25jYXQoYXJncykpO1xuICAgICAgfSk7XG5cbiAgICAgIHMuYmFja2VuZENvbm5lY3Rvci5vbignbG9hZGVkJywgZnVuY3Rpb24gKGxvYWRlZCkge1xuICAgICAgICBzLmNhY2hlQ29ubmVjdG9yLnNhdmUoKTtcbiAgICAgIH0pO1xuXG4gICAgICBzLmNhY2hlQ29ubmVjdG9yID0gbmV3IENvbm5lY3RvciQxKGNyZWF0ZUNsYXNzT25EZW1hbmQodGhpcy5tb2R1bGVzLmNhY2hlKSwgcy5yZXNvdXJjZVN0b3JlLCBzLCB0aGlzLm9wdGlvbnMpO1xuICAgICAgLy8gcGlwZSBldmVudHMgZnJvbSBiYWNrZW5kQ29ubmVjdG9yXG4gICAgICBzLmNhY2hlQ29ubmVjdG9yLm9uKCcqJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIGZvciAodmFyIF9sZW4yID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW4yID4gMSA/IF9sZW4yIC0gMSA6IDApLCBfa2V5MiA9IDE7IF9rZXkyIDwgX2xlbjI7IF9rZXkyKyspIHtcbiAgICAgICAgICBhcmdzW19rZXkyIC0gMV0gPSBhcmd1bWVudHNbX2tleTJdO1xuICAgICAgICB9XG5cbiAgICAgICAgX3RoaXMyLmVtaXQuYXBwbHkoX3RoaXMyLCBbZXZlbnRdLmNvbmNhdChhcmdzKSk7XG4gICAgICB9KTtcblxuICAgICAgaWYgKHRoaXMubW9kdWxlcy5sYW5ndWFnZURldGVjdG9yKSB7XG4gICAgICAgIHMubGFuZ3VhZ2VEZXRlY3RvciA9IGNyZWF0ZUNsYXNzT25EZW1hbmQodGhpcy5tb2R1bGVzLmxhbmd1YWdlRGV0ZWN0b3IpO1xuICAgICAgICBzLmxhbmd1YWdlRGV0ZWN0b3IuaW5pdChzLCB0aGlzLm9wdGlvbnMuZGV0ZWN0aW9uLCB0aGlzLm9wdGlvbnMpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnRyYW5zbGF0b3IgPSBuZXcgVHJhbnNsYXRvcih0aGlzLnNlcnZpY2VzLCB0aGlzLm9wdGlvbnMpO1xuICAgICAgLy8gcGlwZSBldmVudHMgZnJvbSB0cmFuc2xhdG9yXG4gICAgICB0aGlzLnRyYW5zbGF0b3Iub24oJyonLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgZm9yICh2YXIgX2xlbjMgPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gQXJyYXkoX2xlbjMgPiAxID8gX2xlbjMgLSAxIDogMCksIF9rZXkzID0gMTsgX2tleTMgPCBfbGVuMzsgX2tleTMrKykge1xuICAgICAgICAgIGFyZ3NbX2tleTMgLSAxXSA9IGFyZ3VtZW50c1tfa2V5M107XG4gICAgICAgIH1cblxuICAgICAgICBfdGhpczIuZW1pdC5hcHBseShfdGhpczIsIFtldmVudF0uY29uY2F0KGFyZ3MpKTtcbiAgICAgIH0pO1xuXG4gICAgICB0aGlzLm1vZHVsZXMuZXh0ZXJuYWwuZm9yRWFjaChmdW5jdGlvbiAobSkge1xuICAgICAgICBpZiAobS5pbml0KSBtLmluaXQoX3RoaXMyKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIGFwcGVuZCBhcGlcbiAgICB2YXIgc3RvcmVBcGkgPSBbJ2dldFJlc291cmNlJywgJ2FkZFJlc291cmNlJywgJ2FkZFJlc291cmNlcycsICdhZGRSZXNvdXJjZUJ1bmRsZScsICdyZW1vdmVSZXNvdXJjZUJ1bmRsZScsICdoYXNSZXNvdXJjZUJ1bmRsZScsICdnZXRSZXNvdXJjZUJ1bmRsZSddO1xuICAgIHN0b3JlQXBpLmZvckVhY2goZnVuY3Rpb24gKGZjTmFtZSkge1xuICAgICAgX3RoaXMyW2ZjTmFtZV0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfc3RvcmU7XG5cbiAgICAgICAgcmV0dXJuIChfc3RvcmUgPSBfdGhpczIuc3RvcmUpW2ZjTmFtZV0uYXBwbHkoX3N0b3JlLCBhcmd1bWVudHMpO1xuICAgICAgfTtcbiAgICB9KTtcblxuICAgIHZhciBsb2FkID0gZnVuY3Rpb24gbG9hZCgpIHtcbiAgICAgIF90aGlzMi5jaGFuZ2VMYW5ndWFnZShfdGhpczIub3B0aW9ucy5sbmcsIGZ1bmN0aW9uIChlcnIsIHQpIHtcbiAgICAgICAgX3RoaXMyLmlzSW5pdGlhbGl6ZWQgPSB0cnVlO1xuICAgICAgICBfdGhpczIubG9nZ2VyLmxvZygnaW5pdGlhbGl6ZWQnLCBfdGhpczIub3B0aW9ucyk7XG4gICAgICAgIF90aGlzMi5lbWl0KCdpbml0aWFsaXplZCcsIF90aGlzMi5vcHRpb25zKTtcblxuICAgICAgICBjYWxsYmFjayhlcnIsIHQpO1xuICAgICAgfSk7XG4gICAgfTtcblxuICAgIGlmICh0aGlzLm9wdGlvbnMucmVzb3VyY2VzIHx8ICF0aGlzLm9wdGlvbnMuaW5pdEltbWVkaWF0ZSkge1xuICAgICAgbG9hZCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzZXRUaW1lb3V0KGxvYWQsIDApO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8qIGVzbGludCBjb25zaXN0ZW50LXJldHVybjogMCAqL1xuXG5cbiAgSTE4bi5wcm90b3R5cGUubG9hZFJlc291cmNlcyA9IGZ1bmN0aW9uIGxvYWRSZXNvdXJjZXMoKSB7XG4gICAgdmFyIF90aGlzMyA9IHRoaXM7XG5cbiAgICB2YXIgY2FsbGJhY2sgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IG5vb3A7XG5cbiAgICBpZiAoIXRoaXMub3B0aW9ucy5yZXNvdXJjZXMpIHtcbiAgICAgIGlmICh0aGlzLmxhbmd1YWdlICYmIHRoaXMubGFuZ3VhZ2UudG9Mb3dlckNhc2UoKSA9PT0gJ2NpbW9kZScpIHJldHVybiBjYWxsYmFjaygpOyAvLyBhdm9pZCBsb2FkaW5nIHJlc291cmNlcyBmb3IgY2ltb2RlXG5cbiAgICAgIHZhciB0b0xvYWQgPSBbXTtcblxuICAgICAgdmFyIGFwcGVuZCA9IGZ1bmN0aW9uIGFwcGVuZChsbmcpIHtcbiAgICAgICAgaWYgKCFsbmcpIHJldHVybjtcbiAgICAgICAgdmFyIGxuZ3MgPSBfdGhpczMuc2VydmljZXMubGFuZ3VhZ2VVdGlscy50b1Jlc29sdmVIaWVyYXJjaHkobG5nKTtcbiAgICAgICAgbG5ncy5mb3JFYWNoKGZ1bmN0aW9uIChsKSB7XG4gICAgICAgICAgaWYgKHRvTG9hZC5pbmRleE9mKGwpIDwgMCkgdG9Mb2FkLnB1c2gobCk7XG4gICAgICAgIH0pO1xuICAgICAgfTtcblxuICAgICAgaWYgKCF0aGlzLmxhbmd1YWdlKSB7XG4gICAgICAgIC8vIGF0IGxlYXN0IGxvYWQgZmFsbGJhY2tzIGluIHRoaXMgY2FzZVxuICAgICAgICB2YXIgZmFsbGJhY2tzID0gdGhpcy5zZXJ2aWNlcy5sYW5ndWFnZVV0aWxzLmdldEZhbGxiYWNrQ29kZXModGhpcy5vcHRpb25zLmZhbGxiYWNrTG5nKTtcbiAgICAgICAgZmFsbGJhY2tzLmZvckVhY2goZnVuY3Rpb24gKGwpIHtcbiAgICAgICAgICByZXR1cm4gYXBwZW5kKGwpO1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFwcGVuZCh0aGlzLmxhbmd1YWdlKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMub3B0aW9ucy5wcmVsb2FkKSB7XG4gICAgICAgIHRoaXMub3B0aW9ucy5wcmVsb2FkLmZvckVhY2goZnVuY3Rpb24gKGwpIHtcbiAgICAgICAgICByZXR1cm4gYXBwZW5kKGwpO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5zZXJ2aWNlcy5jYWNoZUNvbm5lY3Rvci5sb2FkKHRvTG9hZCwgdGhpcy5vcHRpb25zLm5zLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIF90aGlzMy5zZXJ2aWNlcy5iYWNrZW5kQ29ubmVjdG9yLmxvYWQodG9Mb2FkLCBfdGhpczMub3B0aW9ucy5ucywgY2FsbGJhY2spO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNhbGxiYWNrKG51bGwpO1xuICAgIH1cbiAgfTtcblxuICBJMThuLnByb3RvdHlwZS5yZWxvYWRSZXNvdXJjZXMgPSBmdW5jdGlvbiByZWxvYWRSZXNvdXJjZXMobG5ncywgbnMpIHtcbiAgICBpZiAoIWxuZ3MpIGxuZ3MgPSB0aGlzLmxhbmd1YWdlcztcbiAgICBpZiAoIW5zKSBucyA9IHRoaXMub3B0aW9ucy5ucztcbiAgICB0aGlzLnNlcnZpY2VzLmJhY2tlbmRDb25uZWN0b3IucmVsb2FkKGxuZ3MsIG5zKTtcbiAgfTtcblxuICBJMThuLnByb3RvdHlwZS51c2UgPSBmdW5jdGlvbiB1c2UobW9kdWxlKSB7XG4gICAgaWYgKG1vZHVsZS50eXBlID09PSAnYmFja2VuZCcpIHtcbiAgICAgIHRoaXMubW9kdWxlcy5iYWNrZW5kID0gbW9kdWxlO1xuICAgIH1cblxuICAgIGlmIChtb2R1bGUudHlwZSA9PT0gJ2NhY2hlJykge1xuICAgICAgdGhpcy5tb2R1bGVzLmNhY2hlID0gbW9kdWxlO1xuICAgIH1cblxuICAgIGlmIChtb2R1bGUudHlwZSA9PT0gJ2xvZ2dlcicgfHwgbW9kdWxlLmxvZyAmJiBtb2R1bGUud2FybiAmJiBtb2R1bGUuZXJyb3IpIHtcbiAgICAgIHRoaXMubW9kdWxlcy5sb2dnZXIgPSBtb2R1bGU7XG4gICAgfVxuXG4gICAgaWYgKG1vZHVsZS50eXBlID09PSAnbGFuZ3VhZ2VEZXRlY3RvcicpIHtcbiAgICAgIHRoaXMubW9kdWxlcy5sYW5ndWFnZURldGVjdG9yID0gbW9kdWxlO1xuICAgIH1cblxuICAgIGlmIChtb2R1bGUudHlwZSA9PT0gJ3Bvc3RQcm9jZXNzb3InKSB7XG4gICAgICBwb3N0UHJvY2Vzc29yLmFkZFBvc3RQcm9jZXNzb3IobW9kdWxlKTtcbiAgICB9XG5cbiAgICBpZiAobW9kdWxlLnR5cGUgPT09ICczcmRQYXJ0eScpIHtcbiAgICAgIHRoaXMubW9kdWxlcy5leHRlcm5hbC5wdXNoKG1vZHVsZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgSTE4bi5wcm90b3R5cGUuY2hhbmdlTGFuZ3VhZ2UgPSBmdW5jdGlvbiBjaGFuZ2VMYW5ndWFnZShsbmcsIGNhbGxiYWNrKSB7XG4gICAgdmFyIF90aGlzNCA9IHRoaXM7XG5cbiAgICB2YXIgZG9uZSA9IGZ1bmN0aW9uIGRvbmUoZXJyLCBsKSB7XG4gICAgICBfdGhpczQudHJhbnNsYXRvci5jaGFuZ2VMYW5ndWFnZShsKTtcblxuICAgICAgaWYgKGwpIHtcbiAgICAgICAgX3RoaXM0LmVtaXQoJ2xhbmd1YWdlQ2hhbmdlZCcsIGwpO1xuICAgICAgICBfdGhpczQubG9nZ2VyLmxvZygnbGFuZ3VhZ2VDaGFuZ2VkJywgbCk7XG4gICAgICB9XG5cbiAgICAgIGlmIChjYWxsYmFjaykgY2FsbGJhY2soZXJyLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBfdGhpczQudC5hcHBseShfdGhpczQsIGFyZ3VtZW50cyk7XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgdmFyIHNldExuZyA9IGZ1bmN0aW9uIHNldExuZyhsKSB7XG4gICAgICBpZiAobCkge1xuICAgICAgICBfdGhpczQubGFuZ3VhZ2UgPSBsO1xuICAgICAgICBfdGhpczQubGFuZ3VhZ2VzID0gX3RoaXM0LnNlcnZpY2VzLmxhbmd1YWdlVXRpbHMudG9SZXNvbHZlSGllcmFyY2h5KGwpO1xuXG4gICAgICAgIGlmIChfdGhpczQuc2VydmljZXMubGFuZ3VhZ2VEZXRlY3RvcikgX3RoaXM0LnNlcnZpY2VzLmxhbmd1YWdlRGV0ZWN0b3IuY2FjaGVVc2VyTGFuZ3VhZ2UobCk7XG4gICAgICB9XG5cbiAgICAgIF90aGlzNC5sb2FkUmVzb3VyY2VzKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgZG9uZShlcnIsIGwpO1xuICAgICAgfSk7XG4gICAgfTtcblxuICAgIGlmICghbG5nICYmIHRoaXMuc2VydmljZXMubGFuZ3VhZ2VEZXRlY3RvciAmJiAhdGhpcy5zZXJ2aWNlcy5sYW5ndWFnZURldGVjdG9yLmFzeW5jKSB7XG4gICAgICBzZXRMbmcodGhpcy5zZXJ2aWNlcy5sYW5ndWFnZURldGVjdG9yLmRldGVjdCgpKTtcbiAgICB9IGVsc2UgaWYgKCFsbmcgJiYgdGhpcy5zZXJ2aWNlcy5sYW5ndWFnZURldGVjdG9yICYmIHRoaXMuc2VydmljZXMubGFuZ3VhZ2VEZXRlY3Rvci5hc3luYykge1xuICAgICAgdGhpcy5zZXJ2aWNlcy5sYW5ndWFnZURldGVjdG9yLmRldGVjdChzZXRMbmcpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzZXRMbmcobG5nKTtcbiAgICB9XG4gIH07XG5cbiAgSTE4bi5wcm90b3R5cGUuZ2V0Rml4ZWRUID0gZnVuY3Rpb24gZ2V0Rml4ZWRUKGxuZywgbnMpIHtcbiAgICB2YXIgX3RoaXM1ID0gdGhpcztcblxuICAgIHZhciBmaXhlZFQgPSBmdW5jdGlvbiBmaXhlZFQoa2V5LCBvcHRzKSB7XG4gICAgICBmb3IgKHZhciBfbGVuNCA9IGFyZ3VtZW50cy5sZW5ndGgsIHJlc3QgPSBBcnJheShfbGVuNCA+IDIgPyBfbGVuNCAtIDIgOiAwKSwgX2tleTQgPSAyOyBfa2V5NCA8IF9sZW40OyBfa2V5NCsrKSB7XG4gICAgICAgIHJlc3RbX2tleTQgLSAyXSA9IGFyZ3VtZW50c1tfa2V5NF07XG4gICAgICB9XG5cbiAgICAgIHZhciBvcHRpb25zID0gX2V4dGVuZHMoe30sIG9wdHMpO1xuICAgICAgaWYgKCh0eXBlb2Ygb3B0cyA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2Yob3B0cykpICE9PSAnb2JqZWN0Jykge1xuICAgICAgICBvcHRpb25zID0gX3RoaXM1Lm9wdGlvbnMub3ZlcmxvYWRUcmFuc2xhdGlvbk9wdGlvbkhhbmRsZXIoW2tleSwgb3B0c10uY29uY2F0KHJlc3QpKTtcbiAgICAgIH1cblxuICAgICAgb3B0aW9ucy5sbmcgPSBvcHRpb25zLmxuZyB8fCBmaXhlZFQubG5nO1xuICAgICAgb3B0aW9ucy5sbmdzID0gb3B0aW9ucy5sbmdzIHx8IGZpeGVkVC5sbmdzO1xuICAgICAgb3B0aW9ucy5ucyA9IG9wdGlvbnMubnMgfHwgZml4ZWRULm5zO1xuICAgICAgcmV0dXJuIF90aGlzNS50KGtleSwgb3B0aW9ucyk7XG4gICAgfTtcbiAgICBpZiAodHlwZW9mIGxuZyA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGZpeGVkVC5sbmcgPSBsbmc7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZpeGVkVC5sbmdzID0gbG5nO1xuICAgIH1cbiAgICBmaXhlZFQubnMgPSBucztcbiAgICByZXR1cm4gZml4ZWRUO1xuICB9O1xuXG4gIEkxOG4ucHJvdG90eXBlLnQgPSBmdW5jdGlvbiB0KCkge1xuICAgIHZhciBfdHJhbnNsYXRvcjtcblxuICAgIHJldHVybiB0aGlzLnRyYW5zbGF0b3IgJiYgKF90cmFuc2xhdG9yID0gdGhpcy50cmFuc2xhdG9yKS50cmFuc2xhdGUuYXBwbHkoX3RyYW5zbGF0b3IsIGFyZ3VtZW50cyk7XG4gIH07XG5cbiAgSTE4bi5wcm90b3R5cGUuZXhpc3RzID0gZnVuY3Rpb24gZXhpc3RzKCkge1xuICAgIHZhciBfdHJhbnNsYXRvcjI7XG5cbiAgICByZXR1cm4gdGhpcy50cmFuc2xhdG9yICYmIChfdHJhbnNsYXRvcjIgPSB0aGlzLnRyYW5zbGF0b3IpLmV4aXN0cy5hcHBseShfdHJhbnNsYXRvcjIsIGFyZ3VtZW50cyk7XG4gIH07XG5cbiAgSTE4bi5wcm90b3R5cGUuc2V0RGVmYXVsdE5hbWVzcGFjZSA9IGZ1bmN0aW9uIHNldERlZmF1bHROYW1lc3BhY2UobnMpIHtcbiAgICB0aGlzLm9wdGlvbnMuZGVmYXVsdE5TID0gbnM7XG4gIH07XG5cbiAgSTE4bi5wcm90b3R5cGUubG9hZE5hbWVzcGFjZXMgPSBmdW5jdGlvbiBsb2FkTmFtZXNwYWNlcyhucywgY2FsbGJhY2spIHtcbiAgICB2YXIgX3RoaXM2ID0gdGhpcztcblxuICAgIGlmICghdGhpcy5vcHRpb25zLm5zKSByZXR1cm4gY2FsbGJhY2sgJiYgY2FsbGJhY2soKTtcbiAgICBpZiAodHlwZW9mIG5zID09PSAnc3RyaW5nJykgbnMgPSBbbnNdO1xuXG4gICAgbnMuZm9yRWFjaChmdW5jdGlvbiAobikge1xuICAgICAgaWYgKF90aGlzNi5vcHRpb25zLm5zLmluZGV4T2YobikgPCAwKSBfdGhpczYub3B0aW9ucy5ucy5wdXNoKG4pO1xuICAgIH0pO1xuXG4gICAgdGhpcy5sb2FkUmVzb3VyY2VzKGNhbGxiYWNrKTtcbiAgfTtcblxuICBJMThuLnByb3RvdHlwZS5sb2FkTGFuZ3VhZ2VzID0gZnVuY3Rpb24gbG9hZExhbmd1YWdlcyhsbmdzLCBjYWxsYmFjaykge1xuICAgIGlmICh0eXBlb2YgbG5ncyA9PT0gJ3N0cmluZycpIGxuZ3MgPSBbbG5nc107XG4gICAgdmFyIHByZWxvYWRlZCA9IHRoaXMub3B0aW9ucy5wcmVsb2FkIHx8IFtdO1xuXG4gICAgdmFyIG5ld0xuZ3MgPSBsbmdzLmZpbHRlcihmdW5jdGlvbiAobG5nKSB7XG4gICAgICByZXR1cm4gcHJlbG9hZGVkLmluZGV4T2YobG5nKSA8IDA7XG4gICAgfSk7XG4gICAgLy8gRXhpdCBlYXJseSBpZiBhbGwgZ2l2ZW4gbGFuZ3VhZ2VzIGFyZSBhbHJlYWR5IHByZWxvYWRlZFxuICAgIGlmICghbmV3TG5ncy5sZW5ndGgpIHJldHVybiBjYWxsYmFjaygpO1xuXG4gICAgdGhpcy5vcHRpb25zLnByZWxvYWQgPSBwcmVsb2FkZWQuY29uY2F0KG5ld0xuZ3MpO1xuICAgIHRoaXMubG9hZFJlc291cmNlcyhjYWxsYmFjayk7XG4gIH07XG5cbiAgSTE4bi5wcm90b3R5cGUuZGlyID0gZnVuY3Rpb24gZGlyKGxuZykge1xuICAgIGlmICghbG5nKSBsbmcgPSB0aGlzLmxhbmd1YWdlcyAmJiB0aGlzLmxhbmd1YWdlcy5sZW5ndGggPiAwID8gdGhpcy5sYW5ndWFnZXNbMF0gOiB0aGlzLmxhbmd1YWdlO1xuICAgIGlmICghbG5nKSByZXR1cm4gJ3J0bCc7XG5cbiAgICB2YXIgcnRsTG5ncyA9IFsnYXInLCAnc2h1JywgJ3NxcicsICdzc2gnLCAneGFhJywgJ3loZCcsICd5dWQnLCAnYWFvJywgJ2FiaCcsICdhYnYnLCAnYWNtJywgJ2FjcScsICdhY3cnLCAnYWN4JywgJ2FjeScsICdhZGYnLCAnYWRzJywgJ2FlYicsICdhZWMnLCAnYWZiJywgJ2FqcCcsICdhcGMnLCAnYXBkJywgJ2FyYicsICdhcnEnLCAnYXJzJywgJ2FyeScsICdhcnonLCAnYXV6JywgJ2F2bCcsICdheWgnLCAnYXlsJywgJ2F5bicsICdheXAnLCAnYmJ6JywgJ3BnYScsICdoZScsICdpdycsICdwcycsICdwYnQnLCAncGJ1JywgJ3BzdCcsICdwcnAnLCAncHJkJywgJ3VyJywgJ3lkZCcsICd5ZHMnLCAneWloJywgJ2ppJywgJ3lpJywgJ2hibycsICdtZW4nLCAneG1uJywgJ2ZhJywgJ2pwcicsICdwZW8nLCAncGVzJywgJ3BycycsICdkdicsICdzYW0nXTtcblxuICAgIHJldHVybiBydGxMbmdzLmluZGV4T2YodGhpcy5zZXJ2aWNlcy5sYW5ndWFnZVV0aWxzLmdldExhbmd1YWdlUGFydEZyb21Db2RlKGxuZykpID49IDAgPyAncnRsJyA6ICdsdHInO1xuICB9O1xuXG4gIC8qIGVzbGludCBjbGFzcy1tZXRob2RzLXVzZS10aGlzOiAwICovXG5cblxuICBJMThuLnByb3RvdHlwZS5jcmVhdGVJbnN0YW5jZSA9IGZ1bmN0aW9uIGNyZWF0ZUluc3RhbmNlKCkge1xuICAgIHZhciBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTtcbiAgICB2YXIgY2FsbGJhY2sgPSBhcmd1bWVudHNbMV07XG5cbiAgICByZXR1cm4gbmV3IEkxOG4ob3B0aW9ucywgY2FsbGJhY2spO1xuICB9O1xuXG4gIEkxOG4ucHJvdG90eXBlLmNsb25lSW5zdGFuY2UgPSBmdW5jdGlvbiBjbG9uZUluc3RhbmNlKCkge1xuICAgIHZhciBfdGhpczcgPSB0aGlzO1xuXG4gICAgdmFyIG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9O1xuICAgIHZhciBjYWxsYmFjayA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogbm9vcDtcblxuICAgIHZhciBtZXJnZWRPcHRpb25zID0gX2V4dGVuZHMoe30sIHRoaXMub3B0aW9ucywgb3B0aW9ucywgeyBpc0Nsb25lOiB0cnVlIH0pO1xuICAgIHZhciBjbG9uZSA9IG5ldyBJMThuKG1lcmdlZE9wdGlvbnMpO1xuICAgIHZhciBtZW1iZXJzVG9Db3B5ID0gWydzdG9yZScsICdzZXJ2aWNlcycsICdsYW5ndWFnZSddO1xuICAgIG1lbWJlcnNUb0NvcHkuZm9yRWFjaChmdW5jdGlvbiAobSkge1xuICAgICAgY2xvbmVbbV0gPSBfdGhpczdbbV07XG4gICAgfSk7XG4gICAgY2xvbmUudHJhbnNsYXRvciA9IG5ldyBUcmFuc2xhdG9yKGNsb25lLnNlcnZpY2VzLCBjbG9uZS5vcHRpb25zKTtcbiAgICBjbG9uZS50cmFuc2xhdG9yLm9uKCcqJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICBmb3IgKHZhciBfbGVuNSA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBBcnJheShfbGVuNSA+IDEgPyBfbGVuNSAtIDEgOiAwKSwgX2tleTUgPSAxOyBfa2V5NSA8IF9sZW41OyBfa2V5NSsrKSB7XG4gICAgICAgIGFyZ3NbX2tleTUgLSAxXSA9IGFyZ3VtZW50c1tfa2V5NV07XG4gICAgICB9XG5cbiAgICAgIGNsb25lLmVtaXQuYXBwbHkoY2xvbmUsIFtldmVudF0uY29uY2F0KGFyZ3MpKTtcbiAgICB9KTtcbiAgICBjbG9uZS5pbml0KG1lcmdlZE9wdGlvbnMsIGNhbGxiYWNrKTtcbiAgICBjbG9uZS50cmFuc2xhdG9yLm9wdGlvbnMgPSBjbG9uZS5vcHRpb25zOyAvLyBzeW5jIG9wdGlvbnNcblxuICAgIHJldHVybiBjbG9uZTtcbiAgfTtcblxuICByZXR1cm4gSTE4bjtcbn0oRXZlbnRFbWl0dGVyKTtcblxudmFyIGkxOG5leHQgPSBuZXcgSTE4bigpO1xuXG5yZXR1cm4gaTE4bmV4dDtcblxufSkpKTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vZXh0ZXJuYWwvaTE4bmV4dC9zY3JpcHRzL2kxOG5leHQuanNcbi8vIG1vZHVsZSBpZCA9IDVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiKGZ1bmN0aW9uIChnbG9iYWwsIGZhY3RvcnkpIHtcbiAgdHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnID8gbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCkgOlxuICB0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQgPyBkZWZpbmUoZmFjdG9yeSkgOlxuICAoZ2xvYmFsLmkxOG5leHRYSFJCYWNrZW5kID0gZmFjdG9yeSgpKTtcbn0odGhpcywgKGZ1bmN0aW9uICgpIHsgJ3VzZSBzdHJpY3QnO1xuXG52YXIgYXJyID0gW107XG52YXIgZWFjaCA9IGFyci5mb3JFYWNoO1xudmFyIHNsaWNlID0gYXJyLnNsaWNlO1xuXG5mdW5jdGlvbiBkZWZhdWx0cyhvYmopIHtcbiAgZWFjaC5jYWxsKHNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKSwgZnVuY3Rpb24gKHNvdXJjZSkge1xuICAgIGlmIChzb3VyY2UpIHtcbiAgICAgIGZvciAodmFyIHByb3AgaW4gc291cmNlKSB7XG4gICAgICAgIGlmIChvYmpbcHJvcF0gPT09IHVuZGVmaW5lZCkgb2JqW3Byb3BdID0gc291cmNlW3Byb3BdO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG4gIHJldHVybiBvYmo7XG59XG5cbnZhciBfdHlwZW9mID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIgPyBmdW5jdGlvbiAob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9IDogZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfTtcblxuZnVuY3Rpb24gYWRkUXVlcnlTdHJpbmcodXJsLCBwYXJhbXMpIHtcbiAgaWYgKHBhcmFtcyAmJiAodHlwZW9mIHBhcmFtcyA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YocGFyYW1zKSkgPT09ICdvYmplY3QnKSB7XG4gICAgdmFyIHF1ZXJ5U3RyaW5nID0gJycsXG4gICAgICAgIGUgPSBlbmNvZGVVUklDb21wb25lbnQ7XG5cbiAgICAvLyBNdXN0IGVuY29kZSBkYXRhXG4gICAgZm9yICh2YXIgcGFyYW1OYW1lIGluIHBhcmFtcykge1xuICAgICAgcXVlcnlTdHJpbmcgKz0gJyYnICsgZShwYXJhbU5hbWUpICsgJz0nICsgZShwYXJhbXNbcGFyYW1OYW1lXSk7XG4gICAgfVxuXG4gICAgaWYgKCFxdWVyeVN0cmluZykge1xuICAgICAgcmV0dXJuIHVybDtcbiAgICB9XG5cbiAgICB1cmwgPSB1cmwgKyAodXJsLmluZGV4T2YoJz8nKSAhPT0gLTEgPyAnJicgOiAnPycpICsgcXVlcnlTdHJpbmcuc2xpY2UoMSk7XG4gIH1cblxuICByZXR1cm4gdXJsO1xufVxuXG4vLyBodHRwczovL2dpc3QuZ2l0aHViLmNvbS9YZW9uY3Jvc3MvNzY2MzI3M1xuZnVuY3Rpb24gYWpheCh1cmwsIG9wdGlvbnMsIGNhbGxiYWNrLCBkYXRhLCBjYWNoZSkge1xuXG4gIGlmIChkYXRhICYmICh0eXBlb2YgZGF0YSA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YoZGF0YSkpID09PSAnb2JqZWN0Jykge1xuICAgIGlmICghY2FjaGUpIHtcbiAgICAgIGRhdGFbJ190J10gPSBuZXcgRGF0ZSgpO1xuICAgIH1cbiAgICAvLyBVUkwgZW5jb2RlZCBmb3JtIGRhdGEgbXVzdCBiZSBpbiBxdWVyeXN0cmluZyBmb3JtYXRcbiAgICBkYXRhID0gYWRkUXVlcnlTdHJpbmcoJycsIGRhdGEpLnNsaWNlKDEpO1xuICB9XG5cbiAgaWYgKG9wdGlvbnMucXVlcnlTdHJpbmdQYXJhbXMpIHtcbiAgICB1cmwgPSBhZGRRdWVyeVN0cmluZyh1cmwsIG9wdGlvbnMucXVlcnlTdHJpbmdQYXJhbXMpO1xuICB9XG5cbiAgdHJ5IHtcbiAgICB2YXIgeDtcbiAgICBpZiAoWE1MSHR0cFJlcXVlc3QpIHtcbiAgICAgIHggPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgeCA9IG5ldyBBY3RpdmVYT2JqZWN0KCdNU1hNTDIuWE1MSFRUUC4zLjAnKTtcbiAgICB9XG4gICAgeC5vcGVuKGRhdGEgPyAnUE9TVCcgOiAnR0VUJywgdXJsLCAxKTtcbiAgICBpZiAoIW9wdGlvbnMuY3Jvc3NEb21haW4pIHtcbiAgICAgIHguc2V0UmVxdWVzdEhlYWRlcignWC1SZXF1ZXN0ZWQtV2l0aCcsICdYTUxIdHRwUmVxdWVzdCcpO1xuICAgIH1cbiAgICB4LndpdGhDcmVkZW50aWFscyA9ICEhb3B0aW9ucy53aXRoQ3JlZGVudGlhbHM7XG4gICAgaWYgKGRhdGEpIHtcbiAgICAgIHguc2V0UmVxdWVzdEhlYWRlcignQ29udGVudC10eXBlJywgJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcpO1xuICAgIH1cbiAgICBpZiAoeC5vdmVycmlkZU1pbWVUeXBlKSB7XG4gICAgICB4Lm92ZXJyaWRlTWltZVR5cGUoXCJhcHBsaWNhdGlvbi9qc29uXCIpO1xuICAgIH1cbiAgICB2YXIgaCA9IG9wdGlvbnMuY3VzdG9tSGVhZGVycztcbiAgICBpZiAoaCkge1xuICAgICAgZm9yICh2YXIgaSBpbiBoKSB7XG4gICAgICAgIHguc2V0UmVxdWVzdEhlYWRlcihpLCBoW2ldKTtcbiAgICAgIH1cbiAgICB9XG4gICAgeC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB4LnJlYWR5U3RhdGUgPiAzICYmIGNhbGxiYWNrICYmIGNhbGxiYWNrKHgucmVzcG9uc2VUZXh0LCB4KTtcbiAgICB9O1xuICAgIHguc2VuZChkYXRhKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGUgJiYgY29uc29sZS5sb2coZSk7XG4gIH1cbn1cblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gZ2V0RGVmYXVsdHMoKSB7XG4gIHJldHVybiB7XG4gICAgbG9hZFBhdGg6ICcvbG9jYWxlcy97e2xuZ319L3t7bnN9fS5qc29uJyxcbiAgICBhZGRQYXRoOiAnbG9jYWxlcy9hZGQve3tsbmd9fS97e25zfX0nLFxuICAgIGFsbG93TXVsdGlMb2FkaW5nOiBmYWxzZSxcbiAgICBwYXJzZTogSlNPTi5wYXJzZSxcbiAgICBjcm9zc0RvbWFpbjogZmFsc2UsXG4gICAgYWpheDogYWpheFxuICB9O1xufVxuXG52YXIgQmFja2VuZCA9IGZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gQmFja2VuZChzZXJ2aWNlcykge1xuICAgIHZhciBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB7fTtcblxuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBCYWNrZW5kKTtcblxuICAgIHRoaXMuaW5pdChzZXJ2aWNlcywgb3B0aW9ucyk7XG5cbiAgICB0aGlzLnR5cGUgPSAnYmFja2VuZCc7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoQmFja2VuZCwgW3tcbiAgICBrZXk6ICdpbml0JyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gaW5pdChzZXJ2aWNlcykge1xuICAgICAgdmFyIG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHt9O1xuXG4gICAgICB0aGlzLnNlcnZpY2VzID0gc2VydmljZXM7XG4gICAgICB0aGlzLm9wdGlvbnMgPSBkZWZhdWx0cyhvcHRpb25zLCB0aGlzLm9wdGlvbnMgfHwge30sIGdldERlZmF1bHRzKCkpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ3JlYWRNdWx0aScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlYWRNdWx0aShsYW5ndWFnZXMsIG5hbWVzcGFjZXMsIGNhbGxiYWNrKSB7XG4gICAgICB2YXIgbG9hZFBhdGggPSB0aGlzLm9wdGlvbnMubG9hZFBhdGg7XG4gICAgICBpZiAodHlwZW9mIHRoaXMub3B0aW9ucy5sb2FkUGF0aCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBsb2FkUGF0aCA9IHRoaXMub3B0aW9ucy5sb2FkUGF0aChsYW5ndWFnZXMsIG5hbWVzcGFjZXMpO1xuICAgICAgfVxuXG4gICAgICB2YXIgdXJsID0gdGhpcy5zZXJ2aWNlcy5pbnRlcnBvbGF0b3IuaW50ZXJwb2xhdGUobG9hZFBhdGgsIHsgbG5nOiBsYW5ndWFnZXMuam9pbignKycpLCBuczogbmFtZXNwYWNlcy5qb2luKCcrJykgfSk7XG5cbiAgICAgIHRoaXMubG9hZFVybCh1cmwsIGNhbGxiYWNrKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdyZWFkJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVhZChsYW5ndWFnZSwgbmFtZXNwYWNlLCBjYWxsYmFjaykge1xuICAgICAgdmFyIGxvYWRQYXRoID0gdGhpcy5vcHRpb25zLmxvYWRQYXRoO1xuICAgICAgaWYgKHR5cGVvZiB0aGlzLm9wdGlvbnMubG9hZFBhdGggPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgbG9hZFBhdGggPSB0aGlzLm9wdGlvbnMubG9hZFBhdGgoW2xhbmd1YWdlXSwgW25hbWVzcGFjZV0pO1xuICAgICAgfVxuXG4gICAgICB2YXIgdXJsID0gdGhpcy5zZXJ2aWNlcy5pbnRlcnBvbGF0b3IuaW50ZXJwb2xhdGUobG9hZFBhdGgsIHsgbG5nOiBsYW5ndWFnZSwgbnM6IG5hbWVzcGFjZSB9KTtcblxuICAgICAgdGhpcy5sb2FkVXJsKHVybCwgY2FsbGJhY2spO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ2xvYWRVcmwnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBsb2FkVXJsKHVybCwgY2FsbGJhY2spIHtcbiAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICAgIHRoaXMub3B0aW9ucy5hamF4KHVybCwgdGhpcy5vcHRpb25zLCBmdW5jdGlvbiAoZGF0YSwgeGhyKSB7XG4gICAgICAgIGlmICh4aHIuc3RhdHVzID49IDUwMCAmJiB4aHIuc3RhdHVzIDwgNjAwKSByZXR1cm4gY2FsbGJhY2soJ2ZhaWxlZCBsb2FkaW5nICcgKyB1cmwsIHRydWUgLyogcmV0cnkgKi8pO1xuICAgICAgICBpZiAoeGhyLnN0YXR1cyA+PSA0MDAgJiYgeGhyLnN0YXR1cyA8IDUwMCkgcmV0dXJuIGNhbGxiYWNrKCdmYWlsZWQgbG9hZGluZyAnICsgdXJsLCBmYWxzZSAvKiBubyByZXRyeSAqLyk7XG5cbiAgICAgICAgdmFyIHJldCA9IHZvaWQgMCxcbiAgICAgICAgICAgIGVyciA9IHZvaWQgMDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICByZXQgPSBfdGhpcy5vcHRpb25zLnBhcnNlKGRhdGEsIHVybCk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICBlcnIgPSAnZmFpbGVkIHBhcnNpbmcgJyArIHVybCArICcgdG8ganNvbic7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGVycikgcmV0dXJuIGNhbGxiYWNrKGVyciwgZmFsc2UpO1xuICAgICAgICBjYWxsYmFjayhudWxsLCByZXQpO1xuICAgICAgfSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnY3JlYXRlJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlKGxhbmd1YWdlcywgbmFtZXNwYWNlLCBrZXksIGZhbGxiYWNrVmFsdWUpIHtcbiAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICBpZiAodHlwZW9mIGxhbmd1YWdlcyA9PT0gJ3N0cmluZycpIGxhbmd1YWdlcyA9IFtsYW5ndWFnZXNdO1xuXG4gICAgICB2YXIgcGF5bG9hZCA9IHt9O1xuICAgICAgcGF5bG9hZFtrZXldID0gZmFsbGJhY2tWYWx1ZSB8fCAnJztcblxuICAgICAgbGFuZ3VhZ2VzLmZvckVhY2goZnVuY3Rpb24gKGxuZykge1xuICAgICAgICB2YXIgdXJsID0gX3RoaXMyLnNlcnZpY2VzLmludGVycG9sYXRvci5pbnRlcnBvbGF0ZShfdGhpczIub3B0aW9ucy5hZGRQYXRoLCB7IGxuZzogbG5nLCBuczogbmFtZXNwYWNlIH0pO1xuXG4gICAgICAgIF90aGlzMi5vcHRpb25zLmFqYXgodXJsLCBfdGhpczIub3B0aW9ucywgZnVuY3Rpb24gKGRhdGEsIHhocikge1xuICAgICAgICAgIC8vY29uc3Qgc3RhdHVzQ29kZSA9IHhoci5zdGF0dXMudG9TdHJpbmcoKTtcbiAgICAgICAgICAvLyBUT0RPOiBpZiBzdGF0dXNDb2RlID09PSA0eHggZG8gbG9nXG4gICAgICAgIH0sIHBheWxvYWQpO1xuICAgICAgfSk7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIEJhY2tlbmQ7XG59KCk7XG5cbkJhY2tlbmQudHlwZSA9ICdiYWNrZW5kJztcblxucmV0dXJuIEJhY2tlbmQ7XG5cbn0pKSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL2V4dGVybmFsL2kxOG5leHQvc2NyaXB0cy9pMThuZXh0WEhSQmFja2VuZC5qc1xuLy8gbW9kdWxlIGlkID0gNlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIoZnVuY3Rpb24gKGdsb2JhbCwgZmFjdG9yeSkge1xuXHR0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgPyBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKSA6XG5cdHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCA/IGRlZmluZShmYWN0b3J5KSA6XG5cdChnbG9iYWwuaTE4bmV4dExvY2FsU3RvcmFnZUNhY2hlID0gZmFjdG9yeSgpKTtcbn0odGhpcywgKGZ1bmN0aW9uICgpIHsgJ3VzZSBzdHJpY3QnO1xuXG52YXIgYXJyID0gW107XG52YXIgZWFjaCA9IGFyci5mb3JFYWNoO1xudmFyIHNsaWNlID0gYXJyLnNsaWNlO1xuXG5mdW5jdGlvbiBkZWZhdWx0cyhvYmopIHtcbiAgZWFjaC5jYWxsKHNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKSwgZnVuY3Rpb24gKHNvdXJjZSkge1xuICAgIGlmIChzb3VyY2UpIHtcbiAgICAgIGZvciAodmFyIHByb3AgaW4gc291cmNlKSB7XG4gICAgICAgIGlmIChvYmpbcHJvcF0gPT09IHVuZGVmaW5lZCkgb2JqW3Byb3BdID0gc291cmNlW3Byb3BdO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG4gIHJldHVybiBvYmo7XG59XG5cblxuXG5mdW5jdGlvbiBkZWJvdW5jZShmdW5jLCB3YWl0LCBpbW1lZGlhdGUpIHtcbiAgdmFyIHRpbWVvdXQ7XG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGNvbnRleHQgPSB0aGlzLFxuICAgICAgICBhcmdzID0gYXJndW1lbnRzO1xuICAgIHZhciBsYXRlciA9IGZ1bmN0aW9uIGxhdGVyKCkge1xuICAgICAgdGltZW91dCA9IG51bGw7XG4gICAgICBpZiAoIWltbWVkaWF0ZSkgZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTtcbiAgICB9O1xuICAgIHZhciBjYWxsTm93ID0gaW1tZWRpYXRlICYmICF0aW1lb3V0O1xuICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiAgICB0aW1lb3V0ID0gc2V0VGltZW91dChsYXRlciwgd2FpdCk7XG4gICAgaWYgKGNhbGxOb3cpIGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XG4gIH07XG59XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbnZhciBzdG9yYWdlID0ge1xuICBzZXRJdGVtOiBmdW5jdGlvbiBzZXRJdGVtKGtleSwgdmFsdWUpIHtcbiAgICBpZiAod2luZG93LmxvY2FsU3RvcmFnZSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKGtleSwgdmFsdWUpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAvLyBmLmxvZygnZmFpbGVkIHRvIHNldCB2YWx1ZSBmb3Iga2V5IFwiJyArIGtleSArICdcIiB0byBsb2NhbFN0b3JhZ2UuJyk7XG4gICAgICB9XG4gICAgfVxuICB9LFxuICBnZXRJdGVtOiBmdW5jdGlvbiBnZXRJdGVtKGtleSwgdmFsdWUpIHtcbiAgICBpZiAod2luZG93LmxvY2FsU3RvcmFnZSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShrZXksIHZhbHVlKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgLy8gZi5sb2coJ2ZhaWxlZCB0byBnZXQgdmFsdWUgZm9yIGtleSBcIicgKyBrZXkgKyAnXCIgZnJvbSBsb2NhbFN0b3JhZ2UuJyk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cbn07XG5cbmZ1bmN0aW9uIGdldERlZmF1bHRzKCkge1xuICByZXR1cm4ge1xuICAgIGVuYWJsZWQ6IGZhbHNlLFxuICAgIHByZWZpeDogJ2kxOG5leHRfcmVzXycsXG4gICAgZXhwaXJhdGlvblRpbWU6IDcgKiAyNCAqIDYwICogNjAgKiAxMDAwLFxuICAgIHZlcnNpb25zOiB7fVxuICB9O1xufVxuXG52YXIgQ2FjaGUgPSBmdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIENhY2hlKHNlcnZpY2VzKSB7XG4gICAgdmFyIG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHt9O1xuXG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIENhY2hlKTtcblxuICAgIHRoaXMuaW5pdChzZXJ2aWNlcywgb3B0aW9ucyk7XG5cbiAgICB0aGlzLnR5cGUgPSAnY2FjaGUnO1xuICAgIHRoaXMuZGVib3VuY2VkU3RvcmUgPSBkZWJvdW5jZSh0aGlzLnN0b3JlLCAxMDAwMCk7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoQ2FjaGUsIFt7XG4gICAga2V5OiAnaW5pdCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGluaXQoc2VydmljZXMpIHtcbiAgICAgIHZhciBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB7fTtcblxuICAgICAgdGhpcy5zZXJ2aWNlcyA9IHNlcnZpY2VzO1xuICAgICAgdGhpcy5vcHRpb25zID0gZGVmYXVsdHMob3B0aW9ucywgdGhpcy5vcHRpb25zIHx8IHt9LCBnZXREZWZhdWx0cygpKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdsb2FkJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gbG9hZChsbmdzLCBjYWxsYmFjaykge1xuICAgICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgICAgdmFyIHN0b3JlID0ge307XG4gICAgICB2YXIgbm93TVMgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcblxuICAgICAgaWYgKCF3aW5kb3cubG9jYWxTdG9yYWdlIHx8ICFsbmdzLmxlbmd0aCkge1xuICAgICAgICByZXR1cm4gY2FsbGJhY2sobnVsbCwgbnVsbCk7XG4gICAgICB9XG5cbiAgICAgIHZhciB0b2RvID0gbG5ncy5sZW5ndGg7XG5cbiAgICAgIGxuZ3MuZm9yRWFjaChmdW5jdGlvbiAobG5nKSB7XG4gICAgICAgIHZhciBsb2NhbCA9IHN0b3JhZ2UuZ2V0SXRlbShfdGhpcy5vcHRpb25zLnByZWZpeCArIGxuZyk7XG5cbiAgICAgICAgaWYgKGxvY2FsKSB7XG4gICAgICAgICAgbG9jYWwgPSBKU09OLnBhcnNlKGxvY2FsKTtcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgLy8gZXhwaXJhdGlvbiBmaWVsZCBpcyBtYW5kYXRvcnksIGFuZCBzaG91bGQgbm90IGJlIGV4cGlyZWRcbiAgICAgICAgICBsb2NhbC5pMThuU3RhbXAgJiYgbG9jYWwuaTE4blN0YW1wICsgX3RoaXMub3B0aW9ucy5leHBpcmF0aW9uVGltZSA+IG5vd01TICYmXG5cbiAgICAgICAgICAvLyB0aGVyZSBzaG91bGQgYmUgbm8gbGFuZ3VhZ2UgdmVyc2lvbiBzZXQsIG9yIGlmIGl0IGlzLCBpdCBzaG91bGQgbWF0Y2ggdGhlIG9uZSBpbiB0cmFuc2xhdGlvblxuICAgICAgICAgIF90aGlzLm9wdGlvbnMudmVyc2lvbnNbbG5nXSA9PT0gbG9jYWwuaTE4blZlcnNpb24pIHtcbiAgICAgICAgICAgIGRlbGV0ZSBsb2NhbC5pMThuVmVyc2lvbjtcbiAgICAgICAgICAgIHN0b3JlW2xuZ10gPSBsb2NhbDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB0b2RvIC09IDE7XG4gICAgICAgIGlmICh0b2RvID09PSAwKSB7XG4gICAgICAgICAgY2FsbGJhY2sobnVsbCwgc3RvcmUpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnc3RvcmUnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBzdG9yZShzdG9yZVBhcmFtKSB7XG4gICAgICB2YXIgc3RvcmUgPSBzdG9yZVBhcmFtO1xuICAgICAgaWYgKHdpbmRvdy5sb2NhbFN0b3JhZ2UpIHtcbiAgICAgICAgZm9yICh2YXIgbSBpbiBzdG9yZSkge1xuICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLWxpbmVcbiAgICAgICAgICAvLyB0aW1lc3RhbXBcbiAgICAgICAgICBzdG9yZVttXS5pMThuU3RhbXAgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcblxuICAgICAgICAgIC8vIGxhbmd1YWdlIHZlcnNpb24gKGlmIHNldClcbiAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLnZlcnNpb25zW21dKSB7XG4gICAgICAgICAgICBzdG9yZVttXS5pMThuVmVyc2lvbiA9IHRoaXMub3B0aW9ucy52ZXJzaW9uc1ttXTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBzYXZlXG4gICAgICAgICAgc3RvcmFnZS5zZXRJdGVtKHRoaXMub3B0aW9ucy5wcmVmaXggKyBtLCBKU09OLnN0cmluZ2lmeShzdG9yZVttXSkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnc2F2ZScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHNhdmUoc3RvcmUpIHtcbiAgICAgIHRoaXMuZGVib3VuY2VkU3RvcmUoc3RvcmUpO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBDYWNoZTtcbn0oKTtcblxuQ2FjaGUudHlwZSA9ICdjYWNoZSc7XG5cbnJldHVybiBDYWNoZTtcblxufSkpKTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vZXh0ZXJuYWwvaTE4bmV4dC9zY3JpcHRzL2kxOG5leHRMb2NhbFN0b3JhZ2VDYWNoZS5qc1xuLy8gbW9kdWxlIGlkID0gN1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIoZnVuY3Rpb24gKGdsb2JhbCwgZmFjdG9yeSkge1xuICAgIHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyA/IG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpIDpcbiAgICB0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQgPyBkZWZpbmUoJ2kxOG5leHRTcHJpbnRmUG9zdFByb2Nlc3NvcicsIGZhY3RvcnkpIDpcbiAgICAoZ2xvYmFsLmkxOG5leHRTcHJpbnRmUG9zdFByb2Nlc3NvciA9IGZhY3RvcnkoKSk7XG59KHRoaXMsIGZ1bmN0aW9uICgpIHsgJ3VzZSBzdHJpY3QnO1xuXG4gICAgdmFyIGJhYmVsSGVscGVycyA9IHt9O1xuICAgIGJhYmVsSGVscGVycy50eXBlb2YgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIiA/IGZ1bmN0aW9uIChvYmopIHtcbiAgICAgIHJldHVybiB0eXBlb2Ygb2JqO1xuICAgIH0gOiBmdW5jdGlvbiAob2JqKSB7XG4gICAgICByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqO1xuICAgIH07XG4gICAgYmFiZWxIZWxwZXJzO1xuXG4gICAgdmFyIHJlID0ge1xuICAgICAgICBub3Rfc3RyaW5nOiAvW15zXS8sXG4gICAgICAgIG51bWJlcjogL1tkaWVmZ10vLFxuICAgICAgICBqc29uOiAvW2pdLyxcbiAgICAgICAgbm90X2pzb246IC9bXmpdLyxcbiAgICAgICAgdGV4dDogL15bXlxceDI1XSsvLFxuICAgICAgICBtb2R1bG86IC9eXFx4MjV7Mn0vLFxuICAgICAgICBwbGFjZWhvbGRlcjogL15cXHgyNSg/OihbMS05XVxcZCopXFwkfFxcKChbXlxcKV0rKVxcKSk/KFxcKyk/KDB8J1teJF0pPygtKT8oXFxkKyk/KD86XFwuKFxcZCspKT8oW2ItZ2lqb3N1eFhdKS8sXG4gICAgICAgIGtleTogL14oW2Etel9dW2Etel9cXGRdKikvaSxcbiAgICAgICAga2V5X2FjY2VzczogL15cXC4oW2Etel9dW2Etel9cXGRdKikvaSxcbiAgICAgICAgaW5kZXhfYWNjZXNzOiAvXlxcWyhcXGQrKVxcXS8sXG4gICAgICAgIHNpZ246IC9eW1xcK1xcLV0vXG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIHNwcmludGYoKSB7XG4gICAgICAgIHZhciBrZXkgPSBhcmd1bWVudHNbMF0sXG4gICAgICAgICAgICBjYWNoZSA9IHNwcmludGYuY2FjaGU7XG4gICAgICAgIGlmICghKGNhY2hlW2tleV0gJiYgY2FjaGUuaGFzT3duUHJvcGVydHkoa2V5KSkpIHtcbiAgICAgICAgICAgIGNhY2hlW2tleV0gPSBzcHJpbnRmLnBhcnNlKGtleSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNwcmludGYuZm9ybWF0LmNhbGwobnVsbCwgY2FjaGVba2V5XSwgYXJndW1lbnRzKTtcbiAgICB9XG5cbiAgICBzcHJpbnRmLmZvcm1hdCA9IGZ1bmN0aW9uIChwYXJzZV90cmVlLCBhcmd2KSB7XG4gICAgICAgIHZhciBjdXJzb3IgPSAxLFxuICAgICAgICAgICAgdHJlZV9sZW5ndGggPSBwYXJzZV90cmVlLmxlbmd0aCxcbiAgICAgICAgICAgIG5vZGVfdHlwZSA9IFwiXCIsXG4gICAgICAgICAgICBhcmcsXG4gICAgICAgICAgICBvdXRwdXQgPSBbXSxcbiAgICAgICAgICAgIGksXG4gICAgICAgICAgICBrLFxuICAgICAgICAgICAgbWF0Y2gsXG4gICAgICAgICAgICBwYWQsXG4gICAgICAgICAgICBwYWRfY2hhcmFjdGVyLFxuICAgICAgICAgICAgcGFkX2xlbmd0aCxcbiAgICAgICAgICAgIGlzX3Bvc2l0aXZlID0gdHJ1ZSxcbiAgICAgICAgICAgIHNpZ24gPSBcIlwiO1xuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgdHJlZV9sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbm9kZV90eXBlID0gZ2V0X3R5cGUocGFyc2VfdHJlZVtpXSk7XG4gICAgICAgICAgICBpZiAobm9kZV90eXBlID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgb3V0cHV0W291dHB1dC5sZW5ndGhdID0gcGFyc2VfdHJlZVtpXTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobm9kZV90eXBlID09PSBcImFycmF5XCIpIHtcbiAgICAgICAgICAgICAgICBtYXRjaCA9IHBhcnNlX3RyZWVbaV07IC8vIGNvbnZlbmllbmNlIHB1cnBvc2VzIG9ubHlcbiAgICAgICAgICAgICAgICBpZiAobWF0Y2hbMl0pIHtcbiAgICAgICAgICAgICAgICAgICAgLy8ga2V5d29yZCBhcmd1bWVudFxuICAgICAgICAgICAgICAgICAgICBhcmcgPSBhcmd2W2N1cnNvcl07XG4gICAgICAgICAgICAgICAgICAgIGZvciAoayA9IDA7IGsgPCBtYXRjaFsyXS5sZW5ndGg7IGsrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFhcmcuaGFzT3duUHJvcGVydHkobWF0Y2hbMl1ba10pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKHNwcmludGYoXCJbc3ByaW50Zl0gcHJvcGVydHkgJyVzJyBkb2VzIG5vdCBleGlzdFwiLCBtYXRjaFsyXVtrXSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYXJnID0gYXJnW21hdGNoWzJdW2tdXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobWF0Y2hbMV0pIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gcG9zaXRpb25hbCBhcmd1bWVudCAoZXhwbGljaXQpXG4gICAgICAgICAgICAgICAgICAgIGFyZyA9IGFyZ3ZbbWF0Y2hbMV1dO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIHBvc2l0aW9uYWwgYXJndW1lbnQgKGltcGxpY2l0KVxuICAgICAgICAgICAgICAgICAgICBhcmcgPSBhcmd2W2N1cnNvcisrXTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoZ2V0X3R5cGUoYXJnKSA9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgYXJnID0gYXJnKCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKHJlLm5vdF9zdHJpbmcudGVzdChtYXRjaFs4XSkgJiYgcmUubm90X2pzb24udGVzdChtYXRjaFs4XSkgJiYgZ2V0X3R5cGUoYXJnKSAhPSBcIm51bWJlclwiICYmIGlzTmFOKGFyZykpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzcHJpbnRmKFwiW3NwcmludGZdIGV4cGVjdGluZyBudW1iZXIgYnV0IGZvdW5kICVzXCIsIGdldF90eXBlKGFyZykpKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAocmUubnVtYmVyLnRlc3QobWF0Y2hbOF0pKSB7XG4gICAgICAgICAgICAgICAgICAgIGlzX3Bvc2l0aXZlID0gYXJnID49IDA7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgc3dpdGNoIChtYXRjaFs4XSkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiYlwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgYXJnID0gYXJnLnRvU3RyaW5nKDIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJjXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICBhcmcgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGFyZyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImRcIjpcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImlcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyZyA9IHBhcnNlSW50KGFyZywgMTApO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJqXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICBhcmcgPSBKU09OLnN0cmluZ2lmeShhcmcsIG51bGwsIG1hdGNoWzZdID8gcGFyc2VJbnQobWF0Y2hbNl0pIDogMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImVcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyZyA9IG1hdGNoWzddID8gYXJnLnRvRXhwb25lbnRpYWwobWF0Y2hbN10pIDogYXJnLnRvRXhwb25lbnRpYWwoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiZlwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgYXJnID0gbWF0Y2hbN10gPyBwYXJzZUZsb2F0KGFyZykudG9GaXhlZChtYXRjaFs3XSkgOiBwYXJzZUZsb2F0KGFyZyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImdcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyZyA9IG1hdGNoWzddID8gcGFyc2VGbG9hdChhcmcpLnRvUHJlY2lzaW9uKG1hdGNoWzddKSA6IHBhcnNlRmxvYXQoYXJnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwib1wiOlxuICAgICAgICAgICAgICAgICAgICAgICAgYXJnID0gYXJnLnRvU3RyaW5nKDgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJzXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICBhcmcgPSAoYXJnID0gU3RyaW5nKGFyZykpICYmIG1hdGNoWzddID8gYXJnLnN1YnN0cmluZygwLCBtYXRjaFs3XSkgOiBhcmc7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcInVcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyZyA9IGFyZyA+Pj4gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwieFwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgYXJnID0gYXJnLnRvU3RyaW5nKDE2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiWFwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgYXJnID0gYXJnLnRvU3RyaW5nKDE2KS50b1VwcGVyQ2FzZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChyZS5qc29uLnRlc3QobWF0Y2hbOF0pKSB7XG4gICAgICAgICAgICAgICAgICAgIG91dHB1dFtvdXRwdXQubGVuZ3RoXSA9IGFyZztcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAocmUubnVtYmVyLnRlc3QobWF0Y2hbOF0pICYmICghaXNfcG9zaXRpdmUgfHwgbWF0Y2hbM10pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzaWduID0gaXNfcG9zaXRpdmUgPyBcIitcIiA6IFwiLVwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXJnID0gYXJnLnRvU3RyaW5nKCkucmVwbGFjZShyZS5zaWduLCBcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNpZ24gPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHBhZF9jaGFyYWN0ZXIgPSBtYXRjaFs0XSA/IG1hdGNoWzRdID09PSBcIjBcIiA/IFwiMFwiIDogbWF0Y2hbNF0uY2hhckF0KDEpIDogXCIgXCI7XG4gICAgICAgICAgICAgICAgICAgIHBhZF9sZW5ndGggPSBtYXRjaFs2XSAtIChzaWduICsgYXJnKS5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgIHBhZCA9IG1hdGNoWzZdID8gcGFkX2xlbmd0aCA+IDAgPyBzdHJfcmVwZWF0KHBhZF9jaGFyYWN0ZXIsIHBhZF9sZW5ndGgpIDogXCJcIiA6IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgIG91dHB1dFtvdXRwdXQubGVuZ3RoXSA9IG1hdGNoWzVdID8gc2lnbiArIGFyZyArIHBhZCA6IHBhZF9jaGFyYWN0ZXIgPT09IFwiMFwiID8gc2lnbiArIHBhZCArIGFyZyA6IHBhZCArIHNpZ24gKyBhcmc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXRwdXQuam9pbihcIlwiKTtcbiAgICB9O1xuXG4gICAgc3ByaW50Zi5jYWNoZSA9IHt9O1xuXG4gICAgc3ByaW50Zi5wYXJzZSA9IGZ1bmN0aW9uIChmbXQpIHtcbiAgICAgICAgdmFyIF9mbXQgPSBmbXQsXG4gICAgICAgICAgICBtYXRjaCA9IFtdLFxuICAgICAgICAgICAgcGFyc2VfdHJlZSA9IFtdLFxuICAgICAgICAgICAgYXJnX25hbWVzID0gMDtcbiAgICAgICAgd2hpbGUgKF9mbXQpIHtcbiAgICAgICAgICAgIGlmICgobWF0Y2ggPSByZS50ZXh0LmV4ZWMoX2ZtdCkpICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgcGFyc2VfdHJlZVtwYXJzZV90cmVlLmxlbmd0aF0gPSBtYXRjaFswXTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoKG1hdGNoID0gcmUubW9kdWxvLmV4ZWMoX2ZtdCkpICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgcGFyc2VfdHJlZVtwYXJzZV90cmVlLmxlbmd0aF0gPSBcIiVcIjtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoKG1hdGNoID0gcmUucGxhY2Vob2xkZXIuZXhlYyhfZm10KSkgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBpZiAobWF0Y2hbMl0pIHtcbiAgICAgICAgICAgICAgICAgICAgYXJnX25hbWVzIHw9IDE7XG4gICAgICAgICAgICAgICAgICAgIHZhciBmaWVsZF9saXN0ID0gW10sXG4gICAgICAgICAgICAgICAgICAgICAgICByZXBsYWNlbWVudF9maWVsZCA9IG1hdGNoWzJdLFxuICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRfbWF0Y2ggPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKChmaWVsZF9tYXRjaCA9IHJlLmtleS5leGVjKHJlcGxhY2VtZW50X2ZpZWxkKSkgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkX2xpc3RbZmllbGRfbGlzdC5sZW5ndGhdID0gZmllbGRfbWF0Y2hbMV07XG4gICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoKHJlcGxhY2VtZW50X2ZpZWxkID0gcmVwbGFjZW1lbnRfZmllbGQuc3Vic3RyaW5nKGZpZWxkX21hdGNoWzBdLmxlbmd0aCkpICE9PSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChmaWVsZF9tYXRjaCA9IHJlLmtleV9hY2Nlc3MuZXhlYyhyZXBsYWNlbWVudF9maWVsZCkpICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkX2xpc3RbZmllbGRfbGlzdC5sZW5ndGhdID0gZmllbGRfbWF0Y2hbMV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICgoZmllbGRfbWF0Y2ggPSByZS5pbmRleF9hY2Nlc3MuZXhlYyhyZXBsYWNlbWVudF9maWVsZCkpICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkX2xpc3RbZmllbGRfbGlzdC5sZW5ndGhdID0gZmllbGRfbWF0Y2hbMV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFN5bnRheEVycm9yKFwiW3NwcmludGZdIGZhaWxlZCB0byBwYXJzZSBuYW1lZCBhcmd1bWVudCBrZXlcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFN5bnRheEVycm9yKFwiW3NwcmludGZdIGZhaWxlZCB0byBwYXJzZSBuYW1lZCBhcmd1bWVudCBrZXlcIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgbWF0Y2hbMl0gPSBmaWVsZF9saXN0O1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGFyZ19uYW1lcyB8PSAyO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoYXJnX25hbWVzID09PSAzKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIltzcHJpbnRmXSBtaXhpbmcgcG9zaXRpb25hbCBhbmQgbmFtZWQgcGxhY2Vob2xkZXJzIGlzIG5vdCAoeWV0KSBzdXBwb3J0ZWRcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHBhcnNlX3RyZWVbcGFyc2VfdHJlZS5sZW5ndGhdID0gbWF0Y2g7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBTeW50YXhFcnJvcihcIltzcHJpbnRmXSB1bmV4cGVjdGVkIHBsYWNlaG9sZGVyXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgX2ZtdCA9IF9mbXQuc3Vic3RyaW5nKG1hdGNoWzBdLmxlbmd0aCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHBhcnNlX3RyZWU7XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIHZzcHJpbnRmKGZtdCwgYXJndiwgX2FyZ3YpIHtcbiAgICAgICAgX2FyZ3YgPSAoYXJndiB8fCBbXSkuc2xpY2UoMCk7XG4gICAgICAgIF9hcmd2LnNwbGljZSgwLCAwLCBmbXQpO1xuICAgICAgICByZXR1cm4gc3ByaW50Zi5hcHBseShudWxsLCBfYXJndik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogaGVscGVyc1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIGdldF90eXBlKHZhcmlhYmxlKSB7XG4gICAgICAgIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFyaWFibGUpLnNsaWNlKDgsIC0xKS50b0xvd2VyQ2FzZSgpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHN0cl9yZXBlYXQoaW5wdXQsIG11bHRpcGxpZXIpIHtcbiAgICAgICAgcmV0dXJuIEFycmF5KG11bHRpcGxpZXIgKyAxKS5qb2luKGlucHV0KTtcbiAgICB9XG5cbiAgICB2YXIgaW5kZXggPSB7XG4gICAgICBuYW1lOiAnc3ByaW50ZicsXG4gICAgICB0eXBlOiAncG9zdFByb2Nlc3NvcicsXG5cbiAgICAgIHByb2Nlc3M6IGZ1bmN0aW9uIHByb2Nlc3ModmFsdWUsIGtleSwgb3B0aW9ucykge1xuICAgICAgICBpZiAoIW9wdGlvbnMuc3ByaW50ZikgcmV0dXJuIHZhbHVlO1xuXG4gICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmFwcGx5KG9wdGlvbnMuc3ByaW50ZikgPT09ICdbb2JqZWN0IEFycmF5XScpIHtcbiAgICAgICAgICByZXR1cm4gdnNwcmludGYodmFsdWUsIG9wdGlvbnMuc3ByaW50Zik7XG4gICAgICAgIH0gZWxzZSBpZiAoYmFiZWxIZWxwZXJzLnR5cGVvZihvcHRpb25zLnNwcmludGYpID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgIHJldHVybiBzcHJpbnRmKHZhbHVlLCBvcHRpb25zLnNwcmludGYpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgfSxcbiAgICAgIG92ZXJsb2FkVHJhbnNsYXRpb25PcHRpb25IYW5kbGVyOiBmdW5jdGlvbiBvdmVybG9hZFRyYW5zbGF0aW9uT3B0aW9uSGFuZGxlcihhcmdzKSB7XG4gICAgICAgIHZhciB2YWx1ZXMgPSBbXTtcblxuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICB2YWx1ZXMucHVzaChhcmdzW2ldKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgcG9zdFByb2Nlc3M6ICdzcHJpbnRmJyxcbiAgICAgICAgICBzcHJpbnRmOiB2YWx1ZXNcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIGluZGV4O1xuXG59KSk7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9leHRlcm5hbC9pMThuZXh0L3NjcmlwdHMvaTE4bmV4dFNwcmludGZQb3N0UHJvY2Vzc29yLmpzXG4vLyBtb2R1bGUgaWQgPSA4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIihmdW5jdGlvbiAoZ2xvYmFsLCBmYWN0b3J5KSB7XG4gIHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyA/IG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpIDpcbiAgdHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kID8gZGVmaW5lKGZhY3RvcnkpIDpcbiAgKGdsb2JhbC5pMThuZXh0QnJvd3Nlckxhbmd1YWdlRGV0ZWN0b3IgPSBmYWN0b3J5KCkpO1xufSh0aGlzLCBmdW5jdGlvbiAoKSB7ICd1c2Ugc3RyaWN0JztcblxuICB2YXIgYmFiZWxIZWxwZXJzID0ge307XG5cbiAgYmFiZWxIZWxwZXJzLmNsYXNzQ2FsbENoZWNrID0gZnVuY3Rpb24gKGluc3RhbmNlLCBDb25zdHJ1Y3Rvcikge1xuICAgIGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpO1xuICAgIH1cbiAgfTtcblxuICBiYWJlbEhlbHBlcnMuY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07XG4gICAgICAgIGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTtcbiAgICAgICAgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlO1xuICAgICAgICBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHtcbiAgICAgIGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7XG4gICAgICBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTtcbiAgICAgIHJldHVybiBDb25zdHJ1Y3RvcjtcbiAgICB9O1xuICB9KCk7XG5cbiAgYmFiZWxIZWxwZXJzO1xuXG4gIHZhciBhcnIgPSBbXTtcbiAgdmFyIGVhY2ggPSBhcnIuZm9yRWFjaDtcbiAgdmFyIHNsaWNlID0gYXJyLnNsaWNlO1xuXG4gIGZ1bmN0aW9uIGRlZmF1bHRzKG9iaikge1xuICAgIGVhY2guY2FsbChzbGljZS5jYWxsKGFyZ3VtZW50cywgMSksIGZ1bmN0aW9uIChzb3VyY2UpIHtcbiAgICAgIGlmIChzb3VyY2UpIHtcbiAgICAgICAgZm9yICh2YXIgcHJvcCBpbiBzb3VyY2UpIHtcbiAgICAgICAgICBpZiAob2JqW3Byb3BdID09PSB1bmRlZmluZWQpIG9ialtwcm9wXSA9IHNvdXJjZVtwcm9wXTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBvYmo7XG4gIH1cblxuICB2YXIgY29va2llID0ge1xuICAgIGNyZWF0ZTogZnVuY3Rpb24gY3JlYXRlKG5hbWUsIHZhbHVlLCBtaW51dGVzLCBkb21haW4pIHtcbiAgICAgIHZhciBleHBpcmVzID0gdm9pZCAwO1xuICAgICAgaWYgKG1pbnV0ZXMpIHtcbiAgICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZSgpO1xuICAgICAgICBkYXRlLnNldFRpbWUoZGF0ZS5nZXRUaW1lKCkgKyBtaW51dGVzICogNjAgKiAxMDAwKTtcbiAgICAgICAgZXhwaXJlcyA9ICc7IGV4cGlyZXM9JyArIGRhdGUudG9HTVRTdHJpbmcoKTtcbiAgICAgIH0gZWxzZSBleHBpcmVzID0gJyc7XG4gICAgICBkb21haW4gPSBkb21haW4gPyAnZG9tYWluPScgKyBkb21haW4gKyAnOycgOiAnJztcbiAgICAgIGRvY3VtZW50LmNvb2tpZSA9IG5hbWUgKyAnPScgKyB2YWx1ZSArIGV4cGlyZXMgKyAnOycgKyBkb21haW4gKyAncGF0aD0vJztcbiAgICB9LFxuXG4gICAgcmVhZDogZnVuY3Rpb24gcmVhZChuYW1lKSB7XG4gICAgICB2YXIgbmFtZUVRID0gbmFtZSArICc9JztcbiAgICAgIHZhciBjYSA9IGRvY3VtZW50LmNvb2tpZS5zcGxpdCgnOycpO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjYS5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgYyA9IGNhW2ldO1xuICAgICAgICB3aGlsZSAoYy5jaGFyQXQoMCkgPT09ICcgJykge1xuICAgICAgICAgIGMgPSBjLnN1YnN0cmluZygxLCBjLmxlbmd0aCk7XG4gICAgICAgIH1pZiAoYy5pbmRleE9mKG5hbWVFUSkgPT09IDApIHJldHVybiBjLnN1YnN0cmluZyhuYW1lRVEubGVuZ3RoLCBjLmxlbmd0aCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9LFxuXG4gICAgcmVtb3ZlOiBmdW5jdGlvbiByZW1vdmUobmFtZSkge1xuICAgICAgdGhpcy5jcmVhdGUobmFtZSwgJycsIC0xKTtcbiAgICB9XG4gIH07XG5cbiAgdmFyIGNvb2tpZSQxID0ge1xuICAgIG5hbWU6ICdjb29raWUnLFxuXG4gICAgbG9va3VwOiBmdW5jdGlvbiBsb29rdXAob3B0aW9ucykge1xuICAgICAgdmFyIGZvdW5kID0gdm9pZCAwO1xuXG4gICAgICBpZiAob3B0aW9ucy5sb29rdXBDb29raWUgJiYgdHlwZW9mIGRvY3VtZW50ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICB2YXIgYyA9IGNvb2tpZS5yZWFkKG9wdGlvbnMubG9va3VwQ29va2llKTtcbiAgICAgICAgaWYgKGMpIGZvdW5kID0gYztcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGZvdW5kO1xuICAgIH0sXG4gICAgY2FjaGVVc2VyTGFuZ3VhZ2U6IGZ1bmN0aW9uIGNhY2hlVXNlckxhbmd1YWdlKGxuZywgb3B0aW9ucykge1xuICAgICAgaWYgKG9wdGlvbnMubG9va3VwQ29va2llICYmIHR5cGVvZiBkb2N1bWVudCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgY29va2llLmNyZWF0ZShvcHRpb25zLmxvb2t1cENvb2tpZSwgbG5nLCBvcHRpb25zLmNvb2tpZU1pbnV0ZXMsIG9wdGlvbnMuY29va2llRG9tYWluKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgdmFyIHF1ZXJ5c3RyaW5nID0ge1xuICAgIG5hbWU6ICdxdWVyeXN0cmluZycsXG5cbiAgICBsb29rdXA6IGZ1bmN0aW9uIGxvb2t1cChvcHRpb25zKSB7XG4gICAgICB2YXIgZm91bmQgPSB2b2lkIDA7XG5cbiAgICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICB2YXIgcXVlcnkgPSB3aW5kb3cubG9jYXRpb24uc2VhcmNoLnN1YnN0cmluZygxKTtcbiAgICAgICAgdmFyIHBhcmFtcyA9IHF1ZXJ5LnNwbGl0KCcmJyk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcGFyYW1zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgdmFyIHBvcyA9IHBhcmFtc1tpXS5pbmRleE9mKCc9Jyk7XG4gICAgICAgICAgaWYgKHBvcyA+IDApIHtcbiAgICAgICAgICAgIHZhciBrZXkgPSBwYXJhbXNbaV0uc3Vic3RyaW5nKDAsIHBvcyk7XG4gICAgICAgICAgICBpZiAoa2V5ID09PSBvcHRpb25zLmxvb2t1cFF1ZXJ5c3RyaW5nKSB7XG4gICAgICAgICAgICAgIGZvdW5kID0gcGFyYW1zW2ldLnN1YnN0cmluZyhwb3MgKyAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGZvdW5kO1xuICAgIH1cbiAgfTtcblxuICB2YXIgaGFzTG9jYWxTdG9yYWdlU3VwcG9ydCA9IHZvaWQgMDtcbiAgdHJ5IHtcbiAgICBoYXNMb2NhbFN0b3JhZ2VTdXBwb3J0ID0gd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cubG9jYWxTdG9yYWdlICE9PSBudWxsO1xuICAgIHZhciB0ZXN0S2V5ID0gJ2kxOG5leHQudHJhbnNsYXRlLmJvbyc7XG4gICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKHRlc3RLZXksICdmb28nKTtcbiAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0odGVzdEtleSk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBoYXNMb2NhbFN0b3JhZ2VTdXBwb3J0ID0gZmFsc2U7XG4gIH1cblxuICB2YXIgbG9jYWxTdG9yYWdlID0ge1xuICAgIG5hbWU6ICdsb2NhbFN0b3JhZ2UnLFxuXG4gICAgbG9va3VwOiBmdW5jdGlvbiBsb29rdXAob3B0aW9ucykge1xuICAgICAgdmFyIGZvdW5kID0gdm9pZCAwO1xuXG4gICAgICBpZiAob3B0aW9ucy5sb29rdXBMb2NhbFN0b3JhZ2UgJiYgaGFzTG9jYWxTdG9yYWdlU3VwcG9ydCkge1xuICAgICAgICB2YXIgbG5nID0gd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKG9wdGlvbnMubG9va3VwTG9jYWxTdG9yYWdlKTtcbiAgICAgICAgaWYgKGxuZykgZm91bmQgPSBsbmc7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBmb3VuZDtcbiAgICB9LFxuICAgIGNhY2hlVXNlckxhbmd1YWdlOiBmdW5jdGlvbiBjYWNoZVVzZXJMYW5ndWFnZShsbmcsIG9wdGlvbnMpIHtcbiAgICAgIGlmIChvcHRpb25zLmxvb2t1cExvY2FsU3RvcmFnZSAmJiBoYXNMb2NhbFN0b3JhZ2VTdXBwb3J0KSB7XG4gICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShvcHRpb25zLmxvb2t1cExvY2FsU3RvcmFnZSwgbG5nKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgdmFyIG5hdmlnYXRvciQxID0ge1xuICAgIG5hbWU6ICduYXZpZ2F0b3InLFxuXG4gICAgbG9va3VwOiBmdW5jdGlvbiBsb29rdXAob3B0aW9ucykge1xuICAgICAgdmFyIGZvdW5kID0gW107XG5cbiAgICAgIGlmICh0eXBlb2YgbmF2aWdhdG9yICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBpZiAobmF2aWdhdG9yLmxhbmd1YWdlcykge1xuICAgICAgICAgIC8vIGNocm9tZSBvbmx5OyBub3QgYW4gYXJyYXksIHNvIGNhbid0IHVzZSAucHVzaC5hcHBseSBpbnN0ZWFkIG9mIGl0ZXJhdGluZ1xuICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbmF2aWdhdG9yLmxhbmd1YWdlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgZm91bmQucHVzaChuYXZpZ2F0b3IubGFuZ3VhZ2VzW2ldKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG5hdmlnYXRvci51c2VyTGFuZ3VhZ2UpIHtcbiAgICAgICAgICBmb3VuZC5wdXNoKG5hdmlnYXRvci51c2VyTGFuZ3VhZ2UpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChuYXZpZ2F0b3IubGFuZ3VhZ2UpIHtcbiAgICAgICAgICBmb3VuZC5wdXNoKG5hdmlnYXRvci5sYW5ndWFnZSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGZvdW5kLmxlbmd0aCA+IDAgPyBmb3VuZCA6IHVuZGVmaW5lZDtcbiAgICB9XG4gIH07XG5cbiAgdmFyIGh0bWxUYWcgPSB7XG4gICAgbmFtZTogJ2h0bWxUYWcnLFxuXG4gICAgbG9va3VwOiBmdW5jdGlvbiBsb29rdXAob3B0aW9ucykge1xuICAgICAgdmFyIGZvdW5kID0gdm9pZCAwO1xuICAgICAgdmFyIGh0bWxUYWcgPSBvcHRpb25zLmh0bWxUYWcgfHwgKHR5cGVvZiBkb2N1bWVudCAhPT0gJ3VuZGVmaW5lZCcgPyBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQgOiBudWxsKTtcblxuICAgICAgaWYgKGh0bWxUYWcgJiYgdHlwZW9mIGh0bWxUYWcuZ2V0QXR0cmlidXRlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIGZvdW5kID0gaHRtbFRhZy5nZXRBdHRyaWJ1dGUoJ2xhbmcnKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGZvdW5kO1xuICAgIH1cbiAgfTtcblxuICBmdW5jdGlvbiBnZXREZWZhdWx0cygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgb3JkZXI6IFsncXVlcnlzdHJpbmcnLCAnY29va2llJywgJ2xvY2FsU3RvcmFnZScsICduYXZpZ2F0b3InLCAnaHRtbFRhZyddLFxuICAgICAgbG9va3VwUXVlcnlzdHJpbmc6ICdsbmcnLFxuICAgICAgbG9va3VwQ29va2llOiAnaTE4bmV4dCcsXG4gICAgICBsb29rdXBMb2NhbFN0b3JhZ2U6ICdpMThuZXh0TG5nJyxcblxuICAgICAgLy8gY2FjaGUgdXNlciBsYW5ndWFnZVxuICAgICAgY2FjaGVzOiBbJ2xvY2FsU3RvcmFnZSddLFxuICAgICAgZXhjbHVkZUNhY2hlRm9yOiBbJ2NpbW9kZSddXG4gICAgICAvL2Nvb2tpZU1pbnV0ZXM6IDEwLFxuICAgICAgLy9jb29raWVEb21haW46ICdteURvbWFpbidcbiAgICB9O1xuICB9XG5cbiAgdmFyIEJyb3dzZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQnJvd3NlcihzZXJ2aWNlcykge1xuICAgICAgdmFyIG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDEgfHwgYXJndW1lbnRzWzFdID09PSB1bmRlZmluZWQgPyB7fSA6IGFyZ3VtZW50c1sxXTtcbiAgICAgIGJhYmVsSGVscGVycy5jbGFzc0NhbGxDaGVjayh0aGlzLCBCcm93c2VyKTtcblxuICAgICAgdGhpcy50eXBlID0gJ2xhbmd1YWdlRGV0ZWN0b3InO1xuICAgICAgdGhpcy5kZXRlY3RvcnMgPSB7fTtcblxuICAgICAgdGhpcy5pbml0KHNlcnZpY2VzLCBvcHRpb25zKTtcbiAgICB9XG5cbiAgICBiYWJlbEhlbHBlcnMuY3JlYXRlQ2xhc3MoQnJvd3NlciwgW3tcbiAgICAgIGtleTogJ2luaXQnLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGluaXQoc2VydmljZXMpIHtcbiAgICAgICAgdmFyIG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDEgfHwgYXJndW1lbnRzWzFdID09PSB1bmRlZmluZWQgPyB7fSA6IGFyZ3VtZW50c1sxXTtcbiAgICAgICAgdmFyIGkxOG5PcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA8PSAyIHx8IGFyZ3VtZW50c1syXSA9PT0gdW5kZWZpbmVkID8ge30gOiBhcmd1bWVudHNbMl07XG5cbiAgICAgICAgdGhpcy5zZXJ2aWNlcyA9IHNlcnZpY2VzO1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSBkZWZhdWx0cyhvcHRpb25zLCB0aGlzLm9wdGlvbnMgfHwge30sIGdldERlZmF1bHRzKCkpO1xuICAgICAgICB0aGlzLmkxOG5PcHRpb25zID0gaTE4bk9wdGlvbnM7XG5cbiAgICAgICAgdGhpcy5hZGREZXRlY3Rvcihjb29raWUkMSk7XG4gICAgICAgIHRoaXMuYWRkRGV0ZWN0b3IocXVlcnlzdHJpbmcpO1xuICAgICAgICB0aGlzLmFkZERldGVjdG9yKGxvY2FsU3RvcmFnZSk7XG4gICAgICAgIHRoaXMuYWRkRGV0ZWN0b3IobmF2aWdhdG9yJDEpO1xuICAgICAgICB0aGlzLmFkZERldGVjdG9yKGh0bWxUYWcpO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogJ2FkZERldGVjdG9yJyxcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBhZGREZXRlY3RvcihkZXRlY3Rvcikge1xuICAgICAgICB0aGlzLmRldGVjdG9yc1tkZXRlY3Rvci5uYW1lXSA9IGRldGVjdG9yO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogJ2RldGVjdCcsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZGV0ZWN0KGRldGVjdGlvbk9yZGVyKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICAgICAgaWYgKCFkZXRlY3Rpb25PcmRlcikgZGV0ZWN0aW9uT3JkZXIgPSB0aGlzLm9wdGlvbnMub3JkZXI7XG5cbiAgICAgICAgdmFyIGRldGVjdGVkID0gW107XG4gICAgICAgIGRldGVjdGlvbk9yZGVyLmZvckVhY2goZnVuY3Rpb24gKGRldGVjdG9yTmFtZSkge1xuICAgICAgICAgIGlmIChfdGhpcy5kZXRlY3RvcnNbZGV0ZWN0b3JOYW1lXSkge1xuICAgICAgICAgICAgdmFyIGxvb2t1cCA9IF90aGlzLmRldGVjdG9yc1tkZXRlY3Rvck5hbWVdLmxvb2t1cChfdGhpcy5vcHRpb25zKTtcbiAgICAgICAgICAgIGlmIChsb29rdXAgJiYgdHlwZW9mIGxvb2t1cCA9PT0gJ3N0cmluZycpIGxvb2t1cCA9IFtsb29rdXBdO1xuICAgICAgICAgICAgaWYgKGxvb2t1cCkgZGV0ZWN0ZWQgPSBkZXRlY3RlZC5jb25jYXQobG9va3VwKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHZhciBmb3VuZCA9IHZvaWQgMDtcbiAgICAgICAgZGV0ZWN0ZWQuZm9yRWFjaChmdW5jdGlvbiAobG5nKSB7XG4gICAgICAgICAgaWYgKGZvdW5kKSByZXR1cm47XG4gICAgICAgICAgdmFyIGNsZWFuZWRMbmcgPSBfdGhpcy5zZXJ2aWNlcy5sYW5ndWFnZVV0aWxzLmZvcm1hdExhbmd1YWdlQ29kZShsbmcpO1xuICAgICAgICAgIGlmIChfdGhpcy5zZXJ2aWNlcy5sYW5ndWFnZVV0aWxzLmlzV2hpdGVsaXN0ZWQoY2xlYW5lZExuZykpIGZvdW5kID0gY2xlYW5lZExuZztcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIGZvdW5kIHx8IHRoaXMuaTE4bk9wdGlvbnMuZmFsbGJhY2tMbmdbMF07XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiAnY2FjaGVVc2VyTGFuZ3VhZ2UnLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNhY2hlVXNlckxhbmd1YWdlKGxuZywgY2FjaGVzKSB7XG4gICAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICAgIGlmICghY2FjaGVzKSBjYWNoZXMgPSB0aGlzLm9wdGlvbnMuY2FjaGVzO1xuICAgICAgICBpZiAoIWNhY2hlcykgcmV0dXJuO1xuICAgICAgICBpZiAodGhpcy5vcHRpb25zLmV4Y2x1ZGVDYWNoZUZvciAmJiB0aGlzLm9wdGlvbnMuZXhjbHVkZUNhY2hlRm9yLmluZGV4T2YobG5nKSA+IC0xKSByZXR1cm47XG4gICAgICAgIGNhY2hlcy5mb3JFYWNoKGZ1bmN0aW9uIChjYWNoZU5hbWUpIHtcbiAgICAgICAgICBpZiAoX3RoaXMyLmRldGVjdG9yc1tjYWNoZU5hbWVdKSBfdGhpczIuZGV0ZWN0b3JzW2NhY2hlTmFtZV0uY2FjaGVVc2VyTGFuZ3VhZ2UobG5nLCBfdGhpczIub3B0aW9ucyk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1dKTtcbiAgICByZXR1cm4gQnJvd3NlcjtcbiAgfSgpO1xuXG4gIEJyb3dzZXIudHlwZSA9ICdsYW5ndWFnZURldGVjdG9yJztcblxuICByZXR1cm4gQnJvd3NlcjtcblxufSkpO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vZXh0ZXJuYWwvaTE4bmV4dC9zY3JpcHRzL2kxOG5leHRCcm93c2VyTGFuZ3VhZ2VEZXRlY3Rvci5qc1xuLy8gbW9kdWxlIGlkID0gOVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHtcbiBcdFx0XHRcdGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4gXHRcdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuIFx0XHRcdFx0Z2V0OiBnZXR0ZXJcbiBcdFx0XHR9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAyKTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrL2Jvb3RzdHJhcCAzMDY1ZmY2YzFiNWFlMzZjZmFlOSIsIi8qKiogSU1QT1JUUyBGUk9NIGltcG9ydHMtbG9hZGVyICoqKi9cbihmdW5jdGlvbigpIHtcblxuLyohXHJcbiogalF1ZXJ5IE1vYmlsZSAxLjQuNVxyXG4qIEdpdCBIRUFEIGhhc2g6IDY4ZTU1ZTc4YjI5MjYzNGQzOTkxYzc5NWYwNmY1ZTM3YTUxMmRlY2MgPD4gRGF0ZTogRnJpIE9jdCAzMSAyMDE0IDE3OjMzOjMwIFVUQ1xyXG4qIGh0dHA6Ly9qcXVlcnltb2JpbGUuY29tXHJcbipcclxuKiBDb3B5cmlnaHQgMjAxMCwgMjAxNCBqUXVlcnkgRm91bmRhdGlvbiwgSW5jLiBhbmQgb3RoZXJjb250cmlidXRvcnNcclxuKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXHJcbiogaHR0cDovL2pxdWVyeS5vcmcvbGljZW5zZVxyXG4qXHJcbiovXHJcblxyXG5cclxuKGZ1bmN0aW9uICggcm9vdCwgZG9jLCBmYWN0b3J5ICkge1xyXG5cdGlmICggdHlwZW9mIGRlZmluZSA9PT0gXCJmdW5jdGlvblwiICYmIGRlZmluZS5hbWQgKSB7XHJcblx0XHQvLyBBTUQuIFJlZ2lzdGVyIGFzIGFuIGFub255bW91cyBtb2R1bGUuXHJcblx0XHRkZWZpbmUoIFsgXCJqcXVlcnlcIiBdLCBmdW5jdGlvbiAoICQgKSB7XHJcblx0XHRcdGZhY3RvcnkoICQsIHJvb3QsIGRvYyApO1xyXG5cdFx0XHRyZXR1cm4gJC5tb2JpbGU7XHJcblx0XHR9KTtcclxuXHR9IGVsc2Uge1xyXG5cdFx0Ly8gQnJvd3NlciBnbG9iYWxzXHJcblx0XHRmYWN0b3J5KCByb290LmpRdWVyeSwgcm9vdCwgZG9jICk7XHJcblx0fVxyXG59KCB0aGlzLCBkb2N1bWVudCwgZnVuY3Rpb24gKCBqUXVlcnksIHdpbmRvdywgZG9jdW1lbnQsIHVuZGVmaW5lZCApIHtcclxuKGZ1bmN0aW9uKCAkICkge1xyXG5cdCQubW9iaWxlID0ge307XHJcbn0oIGpRdWVyeSApKTtcclxuXHJcbi8qIVxyXG4gKiBqUXVlcnkgVUkgQ29yZSBjMGFiNzEwNTZiOTM2NjI3ZThhNzgyMWYwM2MwNDRhZWM2MjgwYTQwXHJcbiAqIGh0dHA6Ly9qcXVlcnl1aS5jb21cclxuICpcclxuICogQ29weXJpZ2h0IDIwMTMgalF1ZXJ5IEZvdW5kYXRpb24gYW5kIG90aGVyIGNvbnRyaWJ1dG9yc1xyXG4gKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXHJcbiAqIGh0dHA6Ly9qcXVlcnkub3JnL2xpY2Vuc2VcclxuICpcclxuICogaHR0cDovL2FwaS5qcXVlcnl1aS5jb20vY2F0ZWdvcnkvdWktY29yZS9cclxuICovXHJcbihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xyXG5cclxudmFyIHV1aWQgPSAwLFxyXG5cdHJ1bmlxdWVJZCA9IC9edWktaWQtXFxkKyQvO1xyXG5cclxuLy8gJC51aSBtaWdodCBleGlzdCBmcm9tIGNvbXBvbmVudHMgd2l0aCBubyBkZXBlbmRlbmNpZXMsIGUuZy4sICQudWkucG9zaXRpb25cclxuJC51aSA9ICQudWkgfHwge307XHJcblxyXG4kLmV4dGVuZCggJC51aSwge1xyXG5cdHZlcnNpb246IFwiYzBhYjcxMDU2YjkzNjYyN2U4YTc4MjFmMDNjMDQ0YWVjNjI4MGE0MFwiLFxyXG5cclxuXHRrZXlDb2RlOiB7XHJcblx0XHRCQUNLU1BBQ0U6IDgsXHJcblx0XHRDT01NQTogMTg4LFxyXG5cdFx0REVMRVRFOiA0NixcclxuXHRcdERPV046IDQwLFxyXG5cdFx0RU5EOiAzNSxcclxuXHRcdEVOVEVSOiAxMyxcclxuXHRcdEVTQ0FQRTogMjcsXHJcblx0XHRIT01FOiAzNixcclxuXHRcdExFRlQ6IDM3LFxyXG5cdFx0UEFHRV9ET1dOOiAzNCxcclxuXHRcdFBBR0VfVVA6IDMzLFxyXG5cdFx0UEVSSU9EOiAxOTAsXHJcblx0XHRSSUdIVDogMzksXHJcblx0XHRTUEFDRTogMzIsXHJcblx0XHRUQUI6IDksXHJcblx0XHRVUDogMzhcclxuXHR9XHJcbn0pO1xyXG5cclxuLy8gcGx1Z2luc1xyXG4kLmZuLmV4dGVuZCh7XHJcblx0Zm9jdXM6IChmdW5jdGlvbiggb3JpZyApIHtcclxuXHRcdHJldHVybiBmdW5jdGlvbiggZGVsYXksIGZuICkge1xyXG5cdFx0XHRyZXR1cm4gdHlwZW9mIGRlbGF5ID09PSBcIm51bWJlclwiID9cclxuXHRcdFx0XHR0aGlzLmVhY2goZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHR2YXIgZWxlbSA9IHRoaXM7XHJcblx0XHRcdFx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0XHQkKCBlbGVtICkuZm9jdXMoKTtcclxuXHRcdFx0XHRcdFx0aWYgKCBmbiApIHtcclxuXHRcdFx0XHRcdFx0XHRmbi5jYWxsKCBlbGVtICk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH0sIGRlbGF5ICk7XHJcblx0XHRcdFx0fSkgOlxyXG5cdFx0XHRcdG9yaWcuYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApO1xyXG5cdFx0fTtcclxuXHR9KSggJC5mbi5mb2N1cyApLFxyXG5cclxuXHRzY3JvbGxQYXJlbnQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIHNjcm9sbFBhcmVudDtcclxuXHRcdGlmICgoJC51aS5pZSAmJiAoLyhzdGF0aWN8cmVsYXRpdmUpLykudGVzdCh0aGlzLmNzcyhcInBvc2l0aW9uXCIpKSkgfHwgKC9hYnNvbHV0ZS8pLnRlc3QodGhpcy5jc3MoXCJwb3NpdGlvblwiKSkpIHtcclxuXHRcdFx0c2Nyb2xsUGFyZW50ID0gdGhpcy5wYXJlbnRzKCkuZmlsdGVyKGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHJldHVybiAoLyhyZWxhdGl2ZXxhYnNvbHV0ZXxmaXhlZCkvKS50ZXN0KCQuY3NzKHRoaXMsXCJwb3NpdGlvblwiKSkgJiYgKC8oYXV0b3xzY3JvbGwpLykudGVzdCgkLmNzcyh0aGlzLFwib3ZlcmZsb3dcIikrJC5jc3ModGhpcyxcIm92ZXJmbG93LXlcIikrJC5jc3ModGhpcyxcIm92ZXJmbG93LXhcIikpO1xyXG5cdFx0XHR9KS5lcSgwKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHNjcm9sbFBhcmVudCA9IHRoaXMucGFyZW50cygpLmZpbHRlcihmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRyZXR1cm4gKC8oYXV0b3xzY3JvbGwpLykudGVzdCgkLmNzcyh0aGlzLFwib3ZlcmZsb3dcIikrJC5jc3ModGhpcyxcIm92ZXJmbG93LXlcIikrJC5jc3ModGhpcyxcIm92ZXJmbG93LXhcIikpO1xyXG5cdFx0XHR9KS5lcSgwKTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gKCAvZml4ZWQvICkudGVzdCggdGhpcy5jc3MoIFwicG9zaXRpb25cIikgKSB8fCAhc2Nyb2xsUGFyZW50Lmxlbmd0aCA/ICQoIHRoaXNbIDAgXS5vd25lckRvY3VtZW50IHx8IGRvY3VtZW50ICkgOiBzY3JvbGxQYXJlbnQ7XHJcblx0fSxcclxuXHJcblx0dW5pcXVlSWQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcclxuXHRcdFx0aWYgKCAhdGhpcy5pZCApIHtcclxuXHRcdFx0XHR0aGlzLmlkID0gXCJ1aS1pZC1cIiArICgrK3V1aWQpO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHR9LFxyXG5cclxuXHRyZW1vdmVVbmlxdWVJZDogZnVuY3Rpb24oKSB7XHJcblx0XHRyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRpZiAoIHJ1bmlxdWVJZC50ZXN0KCB0aGlzLmlkICkgKSB7XHJcblx0XHRcdFx0JCggdGhpcyApLnJlbW92ZUF0dHIoIFwiaWRcIiApO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHR9XHJcbn0pO1xyXG5cclxuLy8gc2VsZWN0b3JzXHJcbmZ1bmN0aW9uIGZvY3VzYWJsZSggZWxlbWVudCwgaXNUYWJJbmRleE5vdE5hTiApIHtcclxuXHR2YXIgbWFwLCBtYXBOYW1lLCBpbWcsXHJcblx0XHRub2RlTmFtZSA9IGVsZW1lbnQubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtcclxuXHRpZiAoIFwiYXJlYVwiID09PSBub2RlTmFtZSApIHtcclxuXHRcdG1hcCA9IGVsZW1lbnQucGFyZW50Tm9kZTtcclxuXHRcdG1hcE5hbWUgPSBtYXAubmFtZTtcclxuXHRcdGlmICggIWVsZW1lbnQuaHJlZiB8fCAhbWFwTmFtZSB8fCBtYXAubm9kZU5hbWUudG9Mb3dlckNhc2UoKSAhPT0gXCJtYXBcIiApIHtcclxuXHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0fVxyXG5cdFx0aW1nID0gJCggXCJpbWdbdXNlbWFwPSNcIiArIG1hcE5hbWUgKyBcIl1cIiApWzBdO1xyXG5cdFx0cmV0dXJuICEhaW1nICYmIHZpc2libGUoIGltZyApO1xyXG5cdH1cclxuXHRyZXR1cm4gKCAvaW5wdXR8c2VsZWN0fHRleHRhcmVhfGJ1dHRvbnxvYmplY3QvLnRlc3QoIG5vZGVOYW1lICkgP1xyXG5cdFx0IWVsZW1lbnQuZGlzYWJsZWQgOlxyXG5cdFx0XCJhXCIgPT09IG5vZGVOYW1lID9cclxuXHRcdFx0ZWxlbWVudC5ocmVmIHx8IGlzVGFiSW5kZXhOb3ROYU4gOlxyXG5cdFx0XHRpc1RhYkluZGV4Tm90TmFOKSAmJlxyXG5cdFx0Ly8gdGhlIGVsZW1lbnQgYW5kIGFsbCBvZiBpdHMgYW5jZXN0b3JzIG11c3QgYmUgdmlzaWJsZVxyXG5cdFx0dmlzaWJsZSggZWxlbWVudCApO1xyXG59XHJcblxyXG5mdW5jdGlvbiB2aXNpYmxlKCBlbGVtZW50ICkge1xyXG5cdHJldHVybiAkLmV4cHIuZmlsdGVycy52aXNpYmxlKCBlbGVtZW50ICkgJiZcclxuXHRcdCEkKCBlbGVtZW50ICkucGFyZW50cygpLmFkZEJhY2soKS5maWx0ZXIoZnVuY3Rpb24oKSB7XHJcblx0XHRcdHJldHVybiAkLmNzcyggdGhpcywgXCJ2aXNpYmlsaXR5XCIgKSA9PT0gXCJoaWRkZW5cIjtcclxuXHRcdH0pLmxlbmd0aDtcclxufVxyXG5cclxuJC5leHRlbmQoICQuZXhwclsgXCI6XCIgXSwge1xyXG5cdGRhdGE6ICQuZXhwci5jcmVhdGVQc2V1ZG8gP1xyXG5cdFx0JC5leHByLmNyZWF0ZVBzZXVkbyhmdW5jdGlvbiggZGF0YU5hbWUgKSB7XHJcblx0XHRcdHJldHVybiBmdW5jdGlvbiggZWxlbSApIHtcclxuXHRcdFx0XHRyZXR1cm4gISEkLmRhdGEoIGVsZW0sIGRhdGFOYW1lICk7XHJcblx0XHRcdH07XHJcblx0XHR9KSA6XHJcblx0XHQvLyBzdXBwb3J0OiBqUXVlcnkgPDEuOFxyXG5cdFx0ZnVuY3Rpb24oIGVsZW0sIGksIG1hdGNoICkge1xyXG5cdFx0XHRyZXR1cm4gISEkLmRhdGEoIGVsZW0sIG1hdGNoWyAzIF0gKTtcclxuXHRcdH0sXHJcblxyXG5cdGZvY3VzYWJsZTogZnVuY3Rpb24oIGVsZW1lbnQgKSB7XHJcblx0XHRyZXR1cm4gZm9jdXNhYmxlKCBlbGVtZW50LCAhaXNOYU4oICQuYXR0ciggZWxlbWVudCwgXCJ0YWJpbmRleFwiICkgKSApO1xyXG5cdH0sXHJcblxyXG5cdHRhYmJhYmxlOiBmdW5jdGlvbiggZWxlbWVudCApIHtcclxuXHRcdHZhciB0YWJJbmRleCA9ICQuYXR0ciggZWxlbWVudCwgXCJ0YWJpbmRleFwiICksXHJcblx0XHRcdGlzVGFiSW5kZXhOYU4gPSBpc05hTiggdGFiSW5kZXggKTtcclxuXHRcdHJldHVybiAoIGlzVGFiSW5kZXhOYU4gfHwgdGFiSW5kZXggPj0gMCApICYmIGZvY3VzYWJsZSggZWxlbWVudCwgIWlzVGFiSW5kZXhOYU4gKTtcclxuXHR9XHJcbn0pO1xyXG5cclxuLy8gc3VwcG9ydDogalF1ZXJ5IDwxLjhcclxuaWYgKCAhJCggXCI8YT5cIiApLm91dGVyV2lkdGgoIDEgKS5qcXVlcnkgKSB7XHJcblx0JC5lYWNoKCBbIFwiV2lkdGhcIiwgXCJIZWlnaHRcIiBdLCBmdW5jdGlvbiggaSwgbmFtZSApIHtcclxuXHRcdHZhciBzaWRlID0gbmFtZSA9PT0gXCJXaWR0aFwiID8gWyBcIkxlZnRcIiwgXCJSaWdodFwiIF0gOiBbIFwiVG9wXCIsIFwiQm90dG9tXCIgXSxcclxuXHRcdFx0dHlwZSA9IG5hbWUudG9Mb3dlckNhc2UoKSxcclxuXHRcdFx0b3JpZyA9IHtcclxuXHRcdFx0XHRpbm5lcldpZHRoOiAkLmZuLmlubmVyV2lkdGgsXHJcblx0XHRcdFx0aW5uZXJIZWlnaHQ6ICQuZm4uaW5uZXJIZWlnaHQsXHJcblx0XHRcdFx0b3V0ZXJXaWR0aDogJC5mbi5vdXRlcldpZHRoLFxyXG5cdFx0XHRcdG91dGVySGVpZ2h0OiAkLmZuLm91dGVySGVpZ2h0XHJcblx0XHRcdH07XHJcblxyXG5cdFx0ZnVuY3Rpb24gcmVkdWNlKCBlbGVtLCBzaXplLCBib3JkZXIsIG1hcmdpbiApIHtcclxuXHRcdFx0JC5lYWNoKCBzaWRlLCBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRzaXplIC09IHBhcnNlRmxvYXQoICQuY3NzKCBlbGVtLCBcInBhZGRpbmdcIiArIHRoaXMgKSApIHx8IDA7XHJcblx0XHRcdFx0aWYgKCBib3JkZXIgKSB7XHJcblx0XHRcdFx0XHRzaXplIC09IHBhcnNlRmxvYXQoICQuY3NzKCBlbGVtLCBcImJvcmRlclwiICsgdGhpcyArIFwiV2lkdGhcIiApICkgfHwgMDtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0aWYgKCBtYXJnaW4gKSB7XHJcblx0XHRcdFx0XHRzaXplIC09IHBhcnNlRmxvYXQoICQuY3NzKCBlbGVtLCBcIm1hcmdpblwiICsgdGhpcyApICkgfHwgMDtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cdFx0XHRyZXR1cm4gc2l6ZTtcclxuXHRcdH1cclxuXHJcblx0XHQkLmZuWyBcImlubmVyXCIgKyBuYW1lIF0gPSBmdW5jdGlvbiggc2l6ZSApIHtcclxuXHRcdFx0aWYgKCBzaXplID09PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdFx0cmV0dXJuIG9yaWdbIFwiaW5uZXJcIiArIG5hbWUgXS5jYWxsKCB0aGlzICk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0JCggdGhpcyApLmNzcyggdHlwZSwgcmVkdWNlKCB0aGlzLCBzaXplICkgKyBcInB4XCIgKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9O1xyXG5cclxuXHRcdCQuZm5bIFwib3V0ZXJcIiArIG5hbWVdID0gZnVuY3Rpb24oIHNpemUsIG1hcmdpbiApIHtcclxuXHRcdFx0aWYgKCB0eXBlb2Ygc2l6ZSAhPT0gXCJudW1iZXJcIiApIHtcclxuXHRcdFx0XHRyZXR1cm4gb3JpZ1sgXCJvdXRlclwiICsgbmFtZSBdLmNhbGwoIHRoaXMsIHNpemUgKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcclxuXHRcdFx0XHQkKCB0aGlzKS5jc3MoIHR5cGUsIHJlZHVjZSggdGhpcywgc2l6ZSwgdHJ1ZSwgbWFyZ2luICkgKyBcInB4XCIgKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9O1xyXG5cdH0pO1xyXG59XHJcblxyXG4vLyBzdXBwb3J0OiBqUXVlcnkgPDEuOFxyXG5pZiAoICEkLmZuLmFkZEJhY2sgKSB7XHJcblx0JC5mbi5hZGRCYWNrID0gZnVuY3Rpb24oIHNlbGVjdG9yICkge1xyXG5cdFx0cmV0dXJuIHRoaXMuYWRkKCBzZWxlY3RvciA9PSBudWxsID9cclxuXHRcdFx0dGhpcy5wcmV2T2JqZWN0IDogdGhpcy5wcmV2T2JqZWN0LmZpbHRlciggc2VsZWN0b3IgKVxyXG5cdFx0KTtcclxuXHR9O1xyXG59XHJcblxyXG4vLyBzdXBwb3J0OiBqUXVlcnkgMS42LjEsIDEuNi4yIChodHRwOi8vYnVncy5qcXVlcnkuY29tL3RpY2tldC85NDEzKVxyXG5pZiAoICQoIFwiPGE+XCIgKS5kYXRhKCBcImEtYlwiLCBcImFcIiApLnJlbW92ZURhdGEoIFwiYS1iXCIgKS5kYXRhKCBcImEtYlwiICkgKSB7XHJcblx0JC5mbi5yZW1vdmVEYXRhID0gKGZ1bmN0aW9uKCByZW1vdmVEYXRhICkge1xyXG5cdFx0cmV0dXJuIGZ1bmN0aW9uKCBrZXkgKSB7XHJcblx0XHRcdGlmICggYXJndW1lbnRzLmxlbmd0aCApIHtcclxuXHRcdFx0XHRyZXR1cm4gcmVtb3ZlRGF0YS5jYWxsKCB0aGlzLCAkLmNhbWVsQ2FzZSgga2V5ICkgKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRyZXR1cm4gcmVtb3ZlRGF0YS5jYWxsKCB0aGlzICk7XHJcblx0XHRcdH1cclxuXHRcdH07XHJcblx0fSkoICQuZm4ucmVtb3ZlRGF0YSApO1xyXG59XHJcblxyXG5cclxuXHJcblxyXG5cclxuLy8gZGVwcmVjYXRlZFxyXG4kLnVpLmllID0gISEvbXNpZSBbXFx3Ll0rLy5leGVjKCBuYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkgKTtcclxuXHJcbiQuc3VwcG9ydC5zZWxlY3RzdGFydCA9IFwib25zZWxlY3RzdGFydFwiIGluIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwiZGl2XCIgKTtcclxuJC5mbi5leHRlbmQoe1xyXG5cdGRpc2FibGVTZWxlY3Rpb246IGZ1bmN0aW9uKCkge1xyXG5cdFx0cmV0dXJuIHRoaXMuYmluZCggKCAkLnN1cHBvcnQuc2VsZWN0c3RhcnQgPyBcInNlbGVjdHN0YXJ0XCIgOiBcIm1vdXNlZG93blwiICkgK1xyXG5cdFx0XHRcIi51aS1kaXNhYmxlU2VsZWN0aW9uXCIsIGZ1bmN0aW9uKCBldmVudCApIHtcclxuXHRcdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHR9KTtcclxuXHR9LFxyXG5cclxuXHRlbmFibGVTZWxlY3Rpb246IGZ1bmN0aW9uKCkge1xyXG5cdFx0cmV0dXJuIHRoaXMudW5iaW5kKCBcIi51aS1kaXNhYmxlU2VsZWN0aW9uXCIgKTtcclxuXHR9LFxyXG5cclxuXHR6SW5kZXg6IGZ1bmN0aW9uKCB6SW5kZXggKSB7XHJcblx0XHRpZiAoIHpJbmRleCAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRyZXR1cm4gdGhpcy5jc3MoIFwiekluZGV4XCIsIHpJbmRleCApO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggdGhpcy5sZW5ndGggKSB7XHJcblx0XHRcdHZhciBlbGVtID0gJCggdGhpc1sgMCBdICksIHBvc2l0aW9uLCB2YWx1ZTtcclxuXHRcdFx0d2hpbGUgKCBlbGVtLmxlbmd0aCAmJiBlbGVtWyAwIF0gIT09IGRvY3VtZW50ICkge1xyXG5cdFx0XHRcdC8vIElnbm9yZSB6LWluZGV4IGlmIHBvc2l0aW9uIGlzIHNldCB0byBhIHZhbHVlIHdoZXJlIHotaW5kZXggaXMgaWdub3JlZCBieSB0aGUgYnJvd3NlclxyXG5cdFx0XHRcdC8vIFRoaXMgbWFrZXMgYmVoYXZpb3Igb2YgdGhpcyBmdW5jdGlvbiBjb25zaXN0ZW50IGFjcm9zcyBicm93c2Vyc1xyXG5cdFx0XHRcdC8vIFdlYktpdCBhbHdheXMgcmV0dXJucyBhdXRvIGlmIHRoZSBlbGVtZW50IGlzIHBvc2l0aW9uZWRcclxuXHRcdFx0XHRwb3NpdGlvbiA9IGVsZW0uY3NzKCBcInBvc2l0aW9uXCIgKTtcclxuXHRcdFx0XHRpZiAoIHBvc2l0aW9uID09PSBcImFic29sdXRlXCIgfHwgcG9zaXRpb24gPT09IFwicmVsYXRpdmVcIiB8fCBwb3NpdGlvbiA9PT0gXCJmaXhlZFwiICkge1xyXG5cdFx0XHRcdFx0Ly8gSUUgcmV0dXJucyAwIHdoZW4gekluZGV4IGlzIG5vdCBzcGVjaWZpZWRcclxuXHRcdFx0XHRcdC8vIG90aGVyIGJyb3dzZXJzIHJldHVybiBhIHN0cmluZ1xyXG5cdFx0XHRcdFx0Ly8gd2UgaWdub3JlIHRoZSBjYXNlIG9mIG5lc3RlZCBlbGVtZW50cyB3aXRoIGFuIGV4cGxpY2l0IHZhbHVlIG9mIDBcclxuXHRcdFx0XHRcdC8vIDxkaXYgc3R5bGU9XCJ6LWluZGV4OiAtMTA7XCI+PGRpdiBzdHlsZT1cInotaW5kZXg6IDA7XCI+PC9kaXY+PC9kaXY+XHJcblx0XHRcdFx0XHR2YWx1ZSA9IHBhcnNlSW50KCBlbGVtLmNzcyggXCJ6SW5kZXhcIiApLCAxMCApO1xyXG5cdFx0XHRcdFx0aWYgKCAhaXNOYU4oIHZhbHVlICkgJiYgdmFsdWUgIT09IDAgKSB7XHJcblx0XHRcdFx0XHRcdHJldHVybiB2YWx1ZTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0ZWxlbSA9IGVsZW0ucGFyZW50KCk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gMDtcclxuXHR9XHJcbn0pO1xyXG5cclxuLy8gJC51aS5wbHVnaW4gaXMgZGVwcmVjYXRlZC4gVXNlICQud2lkZ2V0KCkgZXh0ZW5zaW9ucyBpbnN0ZWFkLlxyXG4kLnVpLnBsdWdpbiA9IHtcclxuXHRhZGQ6IGZ1bmN0aW9uKCBtb2R1bGUsIG9wdGlvbiwgc2V0ICkge1xyXG5cdFx0dmFyIGksXHJcblx0XHRcdHByb3RvID0gJC51aVsgbW9kdWxlIF0ucHJvdG90eXBlO1xyXG5cdFx0Zm9yICggaSBpbiBzZXQgKSB7XHJcblx0XHRcdHByb3RvLnBsdWdpbnNbIGkgXSA9IHByb3RvLnBsdWdpbnNbIGkgXSB8fCBbXTtcclxuXHRcdFx0cHJvdG8ucGx1Z2luc1sgaSBdLnB1c2goIFsgb3B0aW9uLCBzZXRbIGkgXSBdICk7XHJcblx0XHR9XHJcblx0fSxcclxuXHRjYWxsOiBmdW5jdGlvbiggaW5zdGFuY2UsIG5hbWUsIGFyZ3MsIGFsbG93RGlzY29ubmVjdGVkICkge1xyXG5cdFx0dmFyIGksXHJcblx0XHRcdHNldCA9IGluc3RhbmNlLnBsdWdpbnNbIG5hbWUgXTtcclxuXHJcblx0XHRpZiAoICFzZXQgKSB7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoICFhbGxvd0Rpc2Nvbm5lY3RlZCAmJiAoICFpbnN0YW5jZS5lbGVtZW50WyAwIF0ucGFyZW50Tm9kZSB8fCBpbnN0YW5jZS5lbGVtZW50WyAwIF0ucGFyZW50Tm9kZS5ub2RlVHlwZSA9PT0gMTEgKSApIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdGZvciAoIGkgPSAwOyBpIDwgc2V0Lmxlbmd0aDsgaSsrICkge1xyXG5cdFx0XHRpZiAoIGluc3RhbmNlLm9wdGlvbnNbIHNldFsgaSBdWyAwIF0gXSApIHtcclxuXHRcdFx0XHRzZXRbIGkgXVsgMSBdLmFwcGx5KCBpbnN0YW5jZS5lbGVtZW50LCBhcmdzICk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcbn07XHJcblxyXG59KSggalF1ZXJ5ICk7XHJcblxyXG4oZnVuY3Rpb24oICQsIHdpbmRvdywgdW5kZWZpbmVkICkge1xyXG5cclxuXHQvLyBTdWJ0cmFjdCB0aGUgaGVpZ2h0IG9mIGV4dGVybmFsIHRvb2xiYXJzIGZyb20gdGhlIHBhZ2UgaGVpZ2h0LCBpZiB0aGUgcGFnZSBkb2VzIG5vdCBoYXZlXHJcblx0Ly8gaW50ZXJuYWwgdG9vbGJhcnMgb2YgdGhlIHNhbWUgdHlwZS4gV2UgdGFrZSBjYXJlIHRvIHVzZSB0aGUgd2lkZ2V0IG9wdGlvbnMgaWYgd2UgZmluZCBhXHJcblx0Ly8gd2lkZ2V0IGluc3RhbmNlIGFuZCB0aGUgZWxlbWVudCdzIGRhdGEtYXR0cmlidXRlcyBvdGhlcndpc2UuXHJcblx0dmFyIGNvbXBlbnNhdGVUb29sYmFycyA9IGZ1bmN0aW9uKCBwYWdlLCBkZXNpcmVkSGVpZ2h0ICkge1xyXG5cdFx0dmFyIHBhZ2VQYXJlbnQgPSBwYWdlLnBhcmVudCgpLFxyXG5cdFx0XHR0b29sYmFyc0FmZmVjdGluZ0hlaWdodCA9IFtdLFxyXG5cclxuXHRcdFx0Ly8gV2UgdXNlIHRoaXMgZnVuY3Rpb24gdG8gZmlsdGVyIGZpeGVkIHRvb2xiYXJzIHdpdGggb3B0aW9uIHVwZGF0ZVBhZ2VQYWRkaW5nIHNldCB0b1xyXG5cdFx0XHQvLyB0cnVlICh3aGljaCBpcyB0aGUgZGVmYXVsdCkgZnJvbSBvdXIgaGVpZ2h0IHN1YnRyYWN0aW9uLCBiZWNhdXNlIGZpeGVkIHRvb2xiYXJzIHdpdGhcclxuXHRcdFx0Ly8gb3B0aW9uIHVwZGF0ZVBhZ2VQYWRkaW5nIHNldCB0byB0cnVlIGNvbXBlbnNhdGUgZm9yIHRoZWlyIHByZXNlbmNlIGJ5IGFkZGluZyBwYWRkaW5nXHJcblx0XHRcdC8vIHRvIHRoZSBhY3RpdmUgcGFnZS4gV2Ugd2FudCB0byBhdm9pZCBkb3VibGUtY291bnRpbmcgYnkgYWxzbyBzdWJ0cmFjdGluZyB0aGVpclxyXG5cdFx0XHQvLyBoZWlnaHQgZnJvbSB0aGUgZGVzaXJlZCBwYWdlIGhlaWdodC5cclxuXHRcdFx0bm9QYWRkZXJzID0gZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0dmFyIHRoZUVsZW1lbnQgPSAkKCB0aGlzICksXHJcblx0XHRcdFx0XHR3aWRnZXRPcHRpb25zID0gJC5tb2JpbGUudG9vbGJhciAmJiB0aGVFbGVtZW50LmRhdGEoIFwibW9iaWxlLXRvb2xiYXJcIiApID9cclxuXHRcdFx0XHRcdFx0dGhlRWxlbWVudC50b29sYmFyKCBcIm9wdGlvblwiICkgOiB7XHJcblx0XHRcdFx0XHRcdFx0cG9zaXRpb246IHRoZUVsZW1lbnQuYXR0ciggXCJkYXRhLVwiICsgJC5tb2JpbGUubnMgKyBcInBvc2l0aW9uXCIgKSxcclxuXHRcdFx0XHRcdFx0XHR1cGRhdGVQYWdlUGFkZGluZzogKCB0aGVFbGVtZW50LmF0dHIoIFwiZGF0YS1cIiArICQubW9iaWxlLm5zICtcclxuXHRcdFx0XHRcdFx0XHRcdFwidXBkYXRlLXBhZ2UtcGFkZGluZ1wiICkgIT09IGZhbHNlIClcclxuXHRcdFx0XHRcdFx0fTtcclxuXHJcblx0XHRcdFx0cmV0dXJuICEoIHdpZGdldE9wdGlvbnMucG9zaXRpb24gPT09IFwiZml4ZWRcIiAmJlxyXG5cdFx0XHRcdFx0d2lkZ2V0T3B0aW9ucy51cGRhdGVQYWdlUGFkZGluZyA9PT0gdHJ1ZSApO1xyXG5cdFx0XHR9LFxyXG5cdFx0XHRleHRlcm5hbEhlYWRlcnMgPSBwYWdlUGFyZW50LmNoaWxkcmVuKCBcIjpqcW1EYXRhKHJvbGU9J2hlYWRlcicpXCIgKS5maWx0ZXIoIG5vUGFkZGVycyApLFxyXG5cdFx0XHRpbnRlcm5hbEhlYWRlcnMgPSBwYWdlLmNoaWxkcmVuKCBcIjpqcW1EYXRhKHJvbGU9J2hlYWRlcicpXCIgKSxcclxuXHRcdFx0ZXh0ZXJuYWxGb290ZXJzID0gcGFnZVBhcmVudC5jaGlsZHJlbiggXCI6anFtRGF0YShyb2xlPSdmb290ZXInKVwiICkuZmlsdGVyKCBub1BhZGRlcnMgKSxcclxuXHRcdFx0aW50ZXJuYWxGb290ZXJzID0gcGFnZS5jaGlsZHJlbiggXCI6anFtRGF0YShyb2xlPSdmb290ZXInKVwiICk7XHJcblxyXG5cdFx0Ly8gSWYgd2UgaGF2ZSBubyBpbnRlcm5hbCBoZWFkZXJzLCBidXQgd2UgZG8gaGF2ZSBleHRlcm5hbCBoZWFkZXJzLCB0aGVuIHRoZWlyIGhlaWdodFxyXG5cdFx0Ly8gcmVkdWNlcyB0aGUgcGFnZSBoZWlnaHRcclxuXHRcdGlmICggaW50ZXJuYWxIZWFkZXJzLmxlbmd0aCA9PT0gMCAmJiBleHRlcm5hbEhlYWRlcnMubGVuZ3RoID4gMCApIHtcclxuXHRcdFx0dG9vbGJhcnNBZmZlY3RpbmdIZWlnaHQgPSB0b29sYmFyc0FmZmVjdGluZ0hlaWdodC5jb25jYXQoIGV4dGVybmFsSGVhZGVycy50b0FycmF5KCkgKTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBJZiB3ZSBoYXZlIG5vIGludGVybmFsIGZvb3RlcnMsIGJ1dCB3ZSBkbyBoYXZlIGV4dGVybmFsIGZvb3RlcnMsIHRoZW4gdGhlaXIgaGVpZ2h0XHJcblx0XHQvLyByZWR1Y2VzIHRoZSBwYWdlIGhlaWdodFxyXG5cdFx0aWYgKCBpbnRlcm5hbEZvb3RlcnMubGVuZ3RoID09PSAwICYmIGV4dGVybmFsRm9vdGVycy5sZW5ndGggPiAwICkge1xyXG5cdFx0XHR0b29sYmFyc0FmZmVjdGluZ0hlaWdodCA9IHRvb2xiYXJzQWZmZWN0aW5nSGVpZ2h0LmNvbmNhdCggZXh0ZXJuYWxGb290ZXJzLnRvQXJyYXkoKSApO1xyXG5cdFx0fVxyXG5cclxuXHRcdCQuZWFjaCggdG9vbGJhcnNBZmZlY3RpbmdIZWlnaHQsIGZ1bmN0aW9uKCBpbmRleCwgdmFsdWUgKSB7XHJcblx0XHRcdGRlc2lyZWRIZWlnaHQgLT0gJCggdmFsdWUgKS5vdXRlckhlaWdodCgpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gSGVpZ2h0IG11c3QgYmUgYXQgbGVhc3QgemVyb1xyXG5cdFx0cmV0dXJuIE1hdGgubWF4KCAwLCBkZXNpcmVkSGVpZ2h0ICk7XHJcblx0fTtcclxuXHJcblx0JC5leHRlbmQoICQubW9iaWxlLCB7XHJcblx0XHQvLyBkZWZpbmUgdGhlIHdpbmRvdyBhbmQgdGhlIGRvY3VtZW50IG9iamVjdHNcclxuXHRcdHdpbmRvdzogJCggd2luZG93ICksXHJcblx0XHRkb2N1bWVudDogJCggZG9jdW1lbnQgKSxcclxuXHJcblx0XHQvLyBUT0RPOiBSZW1vdmUgYW5kIHVzZSAkLnVpLmtleUNvZGUgZGlyZWN0bHlcclxuXHRcdGtleUNvZGU6ICQudWkua2V5Q29kZSxcclxuXHJcblx0XHQvLyBQbGFjZSB0byBzdG9yZSB2YXJpb3VzIHdpZGdldCBleHRlbnNpb25zXHJcblx0XHRiZWhhdmlvcnM6IHt9LFxyXG5cclxuXHRcdC8vIFNjcm9sbCBwYWdlIHZlcnRpY2FsbHk6IHNjcm9sbCB0byAwIHRvIGhpZGUgaU9TIGFkZHJlc3MgYmFyLCBvciBwYXNzIGEgWSB2YWx1ZVxyXG5cdFx0c2lsZW50U2Nyb2xsOiBmdW5jdGlvbiggeXBvcyApIHtcclxuXHRcdFx0aWYgKCAkLnR5cGUoIHlwb3MgKSAhPT0gXCJudW1iZXJcIiApIHtcclxuXHRcdFx0XHR5cG9zID0gJC5tb2JpbGUuZGVmYXVsdEhvbWVTY3JvbGw7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIHByZXZlbnQgc2Nyb2xsc3RhcnQgYW5kIHNjcm9sbHN0b3AgZXZlbnRzXHJcblx0XHRcdCQuZXZlbnQuc3BlY2lhbC5zY3JvbGxzdGFydC5lbmFibGVkID0gZmFsc2U7XHJcblxyXG5cdFx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHdpbmRvdy5zY3JvbGxUbyggMCwgeXBvcyApO1xyXG5cdFx0XHRcdCQubW9iaWxlLmRvY3VtZW50LnRyaWdnZXIoIFwic2lsZW50c2Nyb2xsXCIsIHsgeDogMCwgeTogeXBvcyB9KTtcclxuXHRcdFx0fSwgMjAgKTtcclxuXHJcblx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0JC5ldmVudC5zcGVjaWFsLnNjcm9sbHN0YXJ0LmVuYWJsZWQgPSB0cnVlO1xyXG5cdFx0XHR9LCAxNTAgKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0Z2V0Q2xvc2VzdEJhc2VVcmw6IGZ1bmN0aW9uKCBlbGUgKVx0e1xyXG5cdFx0XHQvLyBGaW5kIHRoZSBjbG9zZXN0IHBhZ2UgYW5kIGV4dHJhY3Qgb3V0IGl0cyB1cmwuXHJcblx0XHRcdHZhciB1cmwgPSAkKCBlbGUgKS5jbG9zZXN0KCBcIi51aS1wYWdlXCIgKS5qcW1EYXRhKCBcInVybFwiICksXHJcblx0XHRcdFx0YmFzZSA9ICQubW9iaWxlLnBhdGguZG9jdW1lbnRCYXNlLmhyZWZOb0hhc2g7XHJcblxyXG5cdFx0XHRpZiAoICEkLm1vYmlsZS5keW5hbWljQmFzZUVuYWJsZWQgfHwgIXVybCB8fCAhJC5tb2JpbGUucGF0aC5pc1BhdGgoIHVybCApICkge1xyXG5cdFx0XHRcdHVybCA9IGJhc2U7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHJldHVybiAkLm1vYmlsZS5wYXRoLm1ha2VVcmxBYnNvbHV0ZSggdXJsLCBiYXNlICk7XHJcblx0XHR9LFxyXG5cdFx0cmVtb3ZlQWN0aXZlTGlua0NsYXNzOiBmdW5jdGlvbiggZm9yY2VSZW1vdmFsICkge1xyXG5cdFx0XHRpZiAoICEhJC5tb2JpbGUuYWN0aXZlQ2xpY2tlZExpbmsgJiZcclxuXHRcdFx0XHQoICEkLm1vYmlsZS5hY3RpdmVDbGlja2VkTGluay5jbG9zZXN0KCBcIi5cIiArICQubW9iaWxlLmFjdGl2ZVBhZ2VDbGFzcyApLmxlbmd0aCB8fFxyXG5cdFx0XHRcdFx0Zm9yY2VSZW1vdmFsICkgKSB7XHJcblxyXG5cdFx0XHRcdCQubW9iaWxlLmFjdGl2ZUNsaWNrZWRMaW5rLnJlbW92ZUNsYXNzKCAkLm1vYmlsZS5hY3RpdmVCdG5DbGFzcyApO1xyXG5cdFx0XHR9XHJcblx0XHRcdCQubW9iaWxlLmFjdGl2ZUNsaWNrZWRMaW5rID0gbnVsbDtcclxuXHRcdH0sXHJcblxyXG5cdFx0Ly8gREVQUkVDQVRFRCBpbiAxLjRcclxuXHRcdC8vIEZpbmQgdGhlIGNsb3Nlc3QgcGFyZW50IHdpdGggYSB0aGVtZSBjbGFzcyBvbiBpdC4gTm90ZSB0aGF0XHJcblx0XHQvLyB3ZSBhcmUgbm90IHVzaW5nICQuZm4uY2xvc2VzdCgpIG9uIHB1cnBvc2UgaGVyZSBiZWNhdXNlIHRoaXNcclxuXHRcdC8vIG1ldGhvZCBnZXRzIGNhbGxlZCBxdWl0ZSBhIGJpdCBhbmQgd2UgbmVlZCBpdCB0byBiZSBhcyBmYXN0XHJcblx0XHQvLyBhcyBwb3NzaWJsZS5cclxuXHRcdGdldEluaGVyaXRlZFRoZW1lOiBmdW5jdGlvbiggZWwsIGRlZmF1bHRUaGVtZSApIHtcclxuXHRcdFx0dmFyIGUgPSBlbFsgMCBdLFxyXG5cdFx0XHRcdGx0ciA9IFwiXCIsXHJcblx0XHRcdFx0cmUgPSAvdWktKGJhcnxib2R5fG92ZXJsYXkpLShbYS16XSlcXGIvLFxyXG5cdFx0XHRcdGMsIG07XHJcblx0XHRcdHdoaWxlICggZSApIHtcclxuXHRcdFx0XHRjID0gZS5jbGFzc05hbWUgfHwgXCJcIjtcclxuXHRcdFx0XHRpZiAoIGMgJiYgKCBtID0gcmUuZXhlYyggYyApICkgJiYgKCBsdHIgPSBtWyAyIF0gKSApIHtcclxuXHRcdFx0XHRcdC8vIFdlIGZvdW5kIGEgcGFyZW50IHdpdGggYSB0aGVtZSBjbGFzc1xyXG5cdFx0XHRcdFx0Ly8gb24gaXQgc28gYmFpbCBmcm9tIHRoaXMgbG9vcC5cclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0ZSA9IGUucGFyZW50Tm9kZTtcclxuXHRcdFx0fVxyXG5cdFx0XHQvLyBSZXR1cm4gdGhlIHRoZW1lIGxldHRlciB3ZSBmb3VuZCwgaWYgbm9uZSwgcmV0dXJuIHRoZVxyXG5cdFx0XHQvLyBzcGVjaWZpZWQgZGVmYXVsdC5cclxuXHRcdFx0cmV0dXJuIGx0ciB8fCBkZWZhdWx0VGhlbWUgfHwgXCJhXCI7XHJcblx0XHR9LFxyXG5cclxuXHRcdGVuaGFuY2VhYmxlOiBmdW5jdGlvbiggZWxlbWVudHMgKSB7XHJcblx0XHRcdHJldHVybiB0aGlzLmhhdmVQYXJlbnRzKCBlbGVtZW50cywgXCJlbmhhbmNlXCIgKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0aGlqYWNrYWJsZTogZnVuY3Rpb24oIGVsZW1lbnRzICkge1xyXG5cdFx0XHRyZXR1cm4gdGhpcy5oYXZlUGFyZW50cyggZWxlbWVudHMsIFwiYWpheFwiICk7XHJcblx0XHR9LFxyXG5cclxuXHRcdGhhdmVQYXJlbnRzOiBmdW5jdGlvbiggZWxlbWVudHMsIGF0dHIgKSB7XHJcblx0XHRcdGlmICggISQubW9iaWxlLmlnbm9yZUNvbnRlbnRFbmFibGVkICkge1xyXG5cdFx0XHRcdHJldHVybiBlbGVtZW50cztcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0dmFyIGNvdW50ID0gZWxlbWVudHMubGVuZ3RoLFxyXG5cdFx0XHRcdCRuZXdTZXQgPSAkKCksXHJcblx0XHRcdFx0ZSwgJGVsZW1lbnQsIGV4Y2x1ZGVkLFxyXG5cdFx0XHRcdGksIGM7XHJcblxyXG5cdFx0XHRmb3IgKCBpID0gMDsgaSA8IGNvdW50OyBpKysgKSB7XHJcblx0XHRcdFx0JGVsZW1lbnQgPSBlbGVtZW50cy5lcSggaSApO1xyXG5cdFx0XHRcdGV4Y2x1ZGVkID0gZmFsc2U7XHJcblx0XHRcdFx0ZSA9IGVsZW1lbnRzWyBpIF07XHJcblxyXG5cdFx0XHRcdHdoaWxlICggZSApIHtcclxuXHRcdFx0XHRcdGMgPSBlLmdldEF0dHJpYnV0ZSA/IGUuZ2V0QXR0cmlidXRlKCBcImRhdGEtXCIgKyAkLm1vYmlsZS5ucyArIGF0dHIgKSA6IFwiXCI7XHJcblxyXG5cdFx0XHRcdFx0aWYgKCBjID09PSBcImZhbHNlXCIgKSB7XHJcblx0XHRcdFx0XHRcdGV4Y2x1ZGVkID0gdHJ1ZTtcclxuXHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0ZSA9IGUucGFyZW50Tm9kZTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdGlmICggIWV4Y2x1ZGVkICkge1xyXG5cdFx0XHRcdFx0JG5ld1NldCA9ICRuZXdTZXQuYWRkKCAkZWxlbWVudCApO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0cmV0dXJuICRuZXdTZXQ7XHJcblx0XHR9LFxyXG5cclxuXHRcdGdldFNjcmVlbkhlaWdodDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdC8vIE5hdGl2ZSBpbm5lckhlaWdodCByZXR1cm5zIG1vcmUgYWNjdXJhdGUgdmFsdWUgZm9yIHRoaXMgYWNyb3NzIHBsYXRmb3JtcyxcclxuXHRcdFx0Ly8galF1ZXJ5IHZlcnNpb24gaXMgaGVyZSBhcyBhIG5vcm1hbGl6ZWQgZmFsbGJhY2sgZm9yIHBsYXRmb3JtcyBsaWtlIFN5bWJpYW5cclxuXHRcdFx0cmV0dXJuIHdpbmRvdy5pbm5lckhlaWdodCB8fCAkLm1vYmlsZS53aW5kb3cuaGVpZ2h0KCk7XHJcblx0XHR9LFxyXG5cclxuXHRcdC8vc2ltcGx5IHNldCB0aGUgYWN0aXZlIHBhZ2UncyBtaW5pbXVtIGhlaWdodCB0byBzY3JlZW4gaGVpZ2h0LCBkZXBlbmRpbmcgb24gb3JpZW50YXRpb25cclxuXHRcdHJlc2V0QWN0aXZlUGFnZUhlaWdodDogZnVuY3Rpb24oIGhlaWdodCApIHtcclxuXHRcdFx0dmFyIHBhZ2UgPSAkKCBcIi5cIiArICQubW9iaWxlLmFjdGl2ZVBhZ2VDbGFzcyApLFxyXG5cdFx0XHRcdHBhZ2VIZWlnaHQgPSBwYWdlLmhlaWdodCgpLFxyXG5cdFx0XHRcdHBhZ2VPdXRlckhlaWdodCA9IHBhZ2Uub3V0ZXJIZWlnaHQoIHRydWUgKTtcclxuXHJcblx0XHRcdGhlaWdodCA9IGNvbXBlbnNhdGVUb29sYmFycyggcGFnZSxcclxuXHRcdFx0XHQoIHR5cGVvZiBoZWlnaHQgPT09IFwibnVtYmVyXCIgKSA/IGhlaWdodCA6ICQubW9iaWxlLmdldFNjcmVlbkhlaWdodCgpICk7XHJcblxyXG5cdFx0XHQvLyBSZW1vdmUgYW55IHByZXZpb3VzIG1pbi1oZWlnaHQgc2V0dGluZ1xyXG5cdFx0XHRwYWdlLmNzcyggXCJtaW4taGVpZ2h0XCIsIFwiXCIgKTtcclxuXHJcblx0XHRcdC8vIFNldCB0aGUgbWluaW11bSBoZWlnaHQgb25seSBpZiB0aGUgaGVpZ2h0IGFzIGRldGVybWluZWQgYnkgQ1NTIGlzIGluc3VmZmljaWVudFxyXG5cdFx0XHRpZiAoIHBhZ2UuaGVpZ2h0KCkgPCBoZWlnaHQgKSB7XHJcblx0XHRcdFx0cGFnZS5jc3MoIFwibWluLWhlaWdodFwiLCBoZWlnaHQgLSAoIHBhZ2VPdXRlckhlaWdodCAtIHBhZ2VIZWlnaHQgKSApO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cclxuXHRcdGxvYWRpbmc6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHQvLyBJZiB0aGlzIGlzIHRoZSBmaXJzdCBjYWxsIHRvIHRoaXMgZnVuY3Rpb24sIGluc3RhbnRpYXRlIGEgbG9hZGVyIHdpZGdldFxyXG5cdFx0XHR2YXIgbG9hZGVyID0gdGhpcy5sb2FkaW5nLl93aWRnZXQgfHwgJCggJC5tb2JpbGUubG9hZGVyLnByb3RvdHlwZS5kZWZhdWx0SHRtbCApLmxvYWRlcigpLFxyXG5cclxuXHRcdFx0XHQvLyBDYWxsIHRoZSBhcHByb3ByaWF0ZSBtZXRob2Qgb24gdGhlIGxvYWRlclxyXG5cdFx0XHRcdHJldHVyblZhbHVlID0gbG9hZGVyLmxvYWRlci5hcHBseSggbG9hZGVyLCBhcmd1bWVudHMgKTtcclxuXHJcblx0XHRcdC8vIE1ha2Ugc3VyZSB0aGUgbG9hZGVyIGlzIHJldGFpbmVkIGZvciBmdXR1cmUgY2FsbHMgdG8gdGhpcyBmdW5jdGlvbi5cclxuXHRcdFx0dGhpcy5sb2FkaW5nLl93aWRnZXQgPSBsb2FkZXI7XHJcblxyXG5cdFx0XHRyZXR1cm4gcmV0dXJuVmFsdWU7XHJcblx0XHR9XHJcblx0fSk7XHJcblxyXG5cdCQuYWRkRGVwZW5kZW50cyA9IGZ1bmN0aW9uKCBlbGVtLCBuZXdEZXBlbmRlbnRzICkge1xyXG5cdFx0dmFyICRlbGVtID0gJCggZWxlbSApLFxyXG5cdFx0XHRkZXBlbmRlbnRzID0gJGVsZW0uanFtRGF0YSggXCJkZXBlbmRlbnRzXCIgKSB8fCAkKCk7XHJcblxyXG5cdFx0JGVsZW0uanFtRGF0YSggXCJkZXBlbmRlbnRzXCIsICQoIGRlcGVuZGVudHMgKS5hZGQoIG5ld0RlcGVuZGVudHMgKSApO1xyXG5cdH07XHJcblxyXG5cdC8vIHBsdWdpbnNcclxuXHQkLmZuLmV4dGVuZCh7XHJcblx0XHRyZW1vdmVXaXRoRGVwZW5kZW50czogZnVuY3Rpb24oKSB7XHJcblx0XHRcdCQucmVtb3ZlV2l0aERlcGVuZGVudHMoIHRoaXMgKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0Ly8gRW5oYW5jZSBjaGlsZCBlbGVtZW50c1xyXG5cdFx0ZW5oYW5jZVdpdGhpbjogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHZhciBpbmRleCxcclxuXHRcdFx0XHR3aWRnZXRFbGVtZW50cyA9IHt9LFxyXG5cdFx0XHRcdGtlZXBOYXRpdmUgPSAkLm1vYmlsZS5wYWdlLnByb3RvdHlwZS5rZWVwTmF0aXZlU2VsZWN0b3IoKSxcclxuXHRcdFx0XHR0aGF0ID0gdGhpcztcclxuXHJcblx0XHRcdC8vIEFkZCBubyBqcyBjbGFzcyB0byBlbGVtZW50c1xyXG5cdFx0XHRpZiAoICQubW9iaWxlLm5vanMgKSB7XHJcblx0XHRcdFx0JC5tb2JpbGUubm9qcyggdGhpcyApO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBCaW5kIGxpbmtzIGZvciBhamF4IG5hdlxyXG5cdFx0XHRpZiAoICQubW9iaWxlLmxpbmtzICkge1xyXG5cdFx0XHRcdCQubW9iaWxlLmxpbmtzKCB0aGlzICk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIERlZ3JhZGUgaW5wdXRzIGZvciBzdHlsZWluZ1xyXG5cdFx0XHRpZiAoICQubW9iaWxlLmRlZ3JhZGVJbnB1dHNXaXRoaW4gKSB7XHJcblx0XHRcdFx0JC5tb2JpbGUuZGVncmFkZUlucHV0c1dpdGhpbiggdGhpcyApO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBSdW4gYnV0dG9ubWFya3VwXHJcblx0XHRcdGlmICggJC5mbi5idXR0b25NYXJrdXAgKSB7XHJcblx0XHRcdFx0dGhpcy5maW5kKCAkLmZuLmJ1dHRvbk1hcmt1cC5pbml0U2VsZWN0b3IgKS5ub3QoIGtlZXBOYXRpdmUgKVxyXG5cdFx0XHRcdC5qcW1FbmhhbmNlYWJsZSgpLmJ1dHRvbk1hcmt1cCgpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBBZGQgY2xhc3NlcyBmb3IgZmllbGRDb250YWluXHJcblx0XHRcdGlmICggJC5mbi5maWVsZGNvbnRhaW4gKSB7XHJcblx0XHRcdFx0dGhpcy5maW5kKCBcIjpqcW1EYXRhKHJvbGU9J2ZpZWxkY29udGFpbicpXCIgKS5ub3QoIGtlZXBOYXRpdmUgKVxyXG5cdFx0XHRcdC5qcW1FbmhhbmNlYWJsZSgpLmZpZWxkY29udGFpbigpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBFbmhhbmNlIHdpZGdldHNcclxuXHRcdFx0JC5lYWNoKCAkLm1vYmlsZS53aWRnZXRzLCBmdW5jdGlvbiggbmFtZSwgY29uc3RydWN0b3IgKSB7XHJcblxyXG5cdFx0XHRcdC8vIElmIGluaXRTZWxlY3RvciBub3QgZmFsc2UgZmluZCBlbGVtZW50c1xyXG5cdFx0XHRcdGlmICggY29uc3RydWN0b3IuaW5pdFNlbGVjdG9yICkge1xyXG5cclxuXHRcdFx0XHRcdC8vIEZpbHRlciBlbGVtZW50cyB0aGF0IHNob3VsZCBub3QgYmUgZW5oYW5jZWQgYmFzZWQgb24gcGFyZW50c1xyXG5cdFx0XHRcdFx0dmFyIGVsZW1lbnRzID0gJC5tb2JpbGUuZW5oYW5jZWFibGUoIHRoYXQuZmluZCggY29uc3RydWN0b3IuaW5pdFNlbGVjdG9yICkgKTtcclxuXHJcblx0XHRcdFx0XHQvLyBJZiBhbnkgbWF0Y2hpbmcgZWxlbWVudHMgcmVtYWluIGZpbHRlciBvbmVzIHdpdGgga2VlcE5hdGl2ZVNlbGVjdG9yXHJcblx0XHRcdFx0XHRpZiAoIGVsZW1lbnRzLmxlbmd0aCA+IDAgKSB7XHJcblxyXG5cdFx0XHRcdFx0XHQvLyAkLm1vYmlsZS5wYWdlLnByb3RvdHlwZS5rZWVwTmF0aXZlU2VsZWN0b3IgaXMgZGVwcmVjYXRlZCB0aGlzIGlzIGp1c3QgZm9yIGJhY2tjb21wYXRcclxuXHRcdFx0XHRcdFx0Ly8gU3dpdGNoIHRvICQubW9iaWxlLmtlZXBOYXRpdmUgaW4gMS41IHdoaWNoIGlzIGp1c3QgYSB2YWx1ZSBub3QgYSBmdW5jdGlvblxyXG5cdFx0XHRcdFx0XHRlbGVtZW50cyA9IGVsZW1lbnRzLm5vdCgga2VlcE5hdGl2ZSApO1xyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdC8vIEVuaGFuY2Ugd2hhdGV2ZXIgaXMgbGVmdFxyXG5cdFx0XHRcdFx0aWYgKCBlbGVtZW50cy5sZW5ndGggPiAwICkge1xyXG5cdFx0XHRcdFx0XHR3aWRnZXRFbGVtZW50c1sgY29uc3RydWN0b3IucHJvdG90eXBlLndpZGdldE5hbWUgXSA9IGVsZW1lbnRzO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHRmb3IgKCBpbmRleCBpbiB3aWRnZXRFbGVtZW50cyApIHtcclxuXHRcdFx0XHR3aWRnZXRFbGVtZW50c1sgaW5kZXggXVsgaW5kZXggXSgpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRyZXR1cm4gdGhpcztcclxuXHRcdH0sXHJcblxyXG5cdFx0YWRkRGVwZW5kZW50czogZnVuY3Rpb24oIG5ld0RlcGVuZGVudHMgKSB7XHJcblx0XHRcdCQuYWRkRGVwZW5kZW50cyggdGhpcywgbmV3RGVwZW5kZW50cyApO1xyXG5cdFx0fSxcclxuXHJcblx0XHQvLyBub3RlIHRoYXQgdGhpcyBoZWxwZXIgZG9lc24ndCBhdHRlbXB0IHRvIGhhbmRsZSB0aGUgY2FsbGJhY2tcclxuXHRcdC8vIG9yIHNldHRpbmcgb2YgYW4gaHRtbCBlbGVtZW50J3MgdGV4dCwgaXRzIG9ubHkgcHVycG9zZSBpc1xyXG5cdFx0Ly8gdG8gcmV0dXJuIHRoZSBodG1sIGVuY29kZWQgdmVyc2lvbiBvZiB0aGUgdGV4dCBpbiBhbGwgY2FzZXMuICh0aHVzIHRoZSBuYW1lKVxyXG5cdFx0Z2V0RW5jb2RlZFRleHQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRyZXR1cm4gJCggXCI8YT5cIiApLnRleHQoIHRoaXMudGV4dCgpICkuaHRtbCgpO1xyXG5cdFx0fSxcclxuXHJcblx0XHQvLyBmbHVlbnQgaGVscGVyIGZ1bmN0aW9uIGZvciB0aGUgbW9iaWxlIG5hbWVzcGFjZWQgZXF1aXZhbGVudFxyXG5cdFx0anFtRW5oYW5jZWFibGU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRyZXR1cm4gJC5tb2JpbGUuZW5oYW5jZWFibGUoIHRoaXMgKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0anFtSGlqYWNrYWJsZTogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHJldHVybiAkLm1vYmlsZS5oaWphY2thYmxlKCB0aGlzICk7XHJcblx0XHR9XHJcblx0fSk7XHJcblxyXG5cdCQucmVtb3ZlV2l0aERlcGVuZGVudHMgPSBmdW5jdGlvbiggbmF0aXZlRWxlbWVudCApIHtcclxuXHRcdHZhciBlbGVtZW50ID0gJCggbmF0aXZlRWxlbWVudCApO1xyXG5cclxuXHRcdCggZWxlbWVudC5qcW1EYXRhKCBcImRlcGVuZGVudHNcIiApIHx8ICQoKSApLnJlbW92ZSgpO1xyXG5cdFx0ZWxlbWVudC5yZW1vdmUoKTtcclxuXHR9O1xyXG5cdCQuYWRkRGVwZW5kZW50cyA9IGZ1bmN0aW9uKCBuYXRpdmVFbGVtZW50LCBuZXdEZXBlbmRlbnRzICkge1xyXG5cdFx0dmFyIGVsZW1lbnQgPSAkKCBuYXRpdmVFbGVtZW50ICksXHJcblx0XHRcdGRlcGVuZGVudHMgPSBlbGVtZW50LmpxbURhdGEoIFwiZGVwZW5kZW50c1wiICkgfHwgJCgpO1xyXG5cclxuXHRcdGVsZW1lbnQuanFtRGF0YSggXCJkZXBlbmRlbnRzXCIsICQoIGRlcGVuZGVudHMgKS5hZGQoIG5ld0RlcGVuZGVudHMgKSApO1xyXG5cdH07XHJcblxyXG5cdCQuZmluZC5tYXRjaGVzID0gZnVuY3Rpb24oIGV4cHIsIHNldCApIHtcclxuXHRcdHJldHVybiAkLmZpbmQoIGV4cHIsIG51bGwsIG51bGwsIHNldCApO1xyXG5cdH07XHJcblxyXG5cdCQuZmluZC5tYXRjaGVzU2VsZWN0b3IgPSBmdW5jdGlvbiggbm9kZSwgZXhwciApIHtcclxuXHRcdHJldHVybiAkLmZpbmQoIGV4cHIsIG51bGwsIG51bGwsIFsgbm9kZSBdICkubGVuZ3RoID4gMDtcclxuXHR9O1xyXG5cclxufSkoIGpRdWVyeSwgdGhpcyApO1xyXG5cclxuKGZ1bmN0aW9uKCAkLCB3aW5kb3csIHVuZGVmaW5lZCApIHtcclxuXHQkLmV4dGVuZCggJC5tb2JpbGUsIHtcclxuXHJcblx0XHQvLyBWZXJzaW9uIG9mIHRoZSBqUXVlcnkgTW9iaWxlIEZyYW1ld29ya1xyXG5cdFx0dmVyc2lvbjogXCIxLjQuNVwiLFxyXG5cclxuXHRcdC8vIERlcHJlY2F0ZWQgYW5kIG5vIGxvbmdlciB1c2VkIGluIDEuNCByZW1vdmUgaW4gMS41XHJcblx0XHQvLyBEZWZpbmUgdGhlIHVybCBwYXJhbWV0ZXIgdXNlZCBmb3IgcmVmZXJlbmNpbmcgd2lkZ2V0LWdlbmVyYXRlZCBzdWItcGFnZXMuXHJcblx0XHQvLyBUcmFuc2xhdGVzIHRvIGV4YW1wbGUuaHRtbCZ1aS1wYWdlPXN1YnBhZ2VJZGVudGlmaWVyXHJcblx0XHQvLyBoYXNoIHNlZ21lbnQgYmVmb3JlICZ1aS1wYWdlPSBpcyB1c2VkIHRvIG1ha2UgQWpheCByZXF1ZXN0XHJcblx0XHRzdWJQYWdlVXJsS2V5OiBcInVpLXBhZ2VcIixcclxuXHJcblx0XHRoaWRlVXJsQmFyOiB0cnVlLFxyXG5cclxuXHRcdC8vIEtlZXBuYXRpdmUgU2VsZWN0b3JcclxuXHRcdGtlZXBOYXRpdmU6IFwiOmpxbURhdGEocm9sZT0nbm9uZScpLCA6anFtRGF0YShyb2xlPSdub2pzJylcIixcclxuXHJcblx0XHQvLyBEZXByZWNhdGVkIGluIDEuNCByZW1vdmUgaW4gMS41XHJcblx0XHQvLyBDbGFzcyBhc3NpZ25lZCB0byBwYWdlIGN1cnJlbnRseSBpbiB2aWV3LCBhbmQgZHVyaW5nIHRyYW5zaXRpb25zXHJcblx0XHRhY3RpdmVQYWdlQ2xhc3M6IFwidWktcGFnZS1hY3RpdmVcIixcclxuXHJcblx0XHQvLyBEZXByZWNhdGVkIGluIDEuNCByZW1vdmUgaW4gMS41XHJcblx0XHQvLyBDbGFzcyB1c2VkIGZvciBcImFjdGl2ZVwiIGJ1dHRvbiBzdGF0ZSwgZnJvbSBDU1MgZnJhbWV3b3JrXHJcblx0XHRhY3RpdmVCdG5DbGFzczogXCJ1aS1idG4tYWN0aXZlXCIsXHJcblxyXG5cdFx0Ly8gRGVwcmVjYXRlZCBpbiAxLjQgcmVtb3ZlIGluIDEuNVxyXG5cdFx0Ly8gQ2xhc3MgdXNlZCBmb3IgXCJmb2N1c1wiIGZvcm0gZWxlbWVudCBzdGF0ZSwgZnJvbSBDU1MgZnJhbWV3b3JrXHJcblx0XHRmb2N1c0NsYXNzOiBcInVpLWZvY3VzXCIsXHJcblxyXG5cdFx0Ly8gQXV0b21hdGljYWxseSBoYW5kbGUgY2xpY2tzIGFuZCBmb3JtIHN1Ym1pc3Npb25zIHRocm91Z2ggQWpheCwgd2hlbiBzYW1lLWRvbWFpblxyXG5cdFx0YWpheEVuYWJsZWQ6IHRydWUsXHJcblxyXG5cdFx0Ly8gQXV0b21hdGljYWxseSBsb2FkIGFuZCBzaG93IHBhZ2VzIGJhc2VkIG9uIGxvY2F0aW9uLmhhc2hcclxuXHRcdGhhc2hMaXN0ZW5pbmdFbmFibGVkOiB0cnVlLFxyXG5cclxuXHRcdC8vIGRpc2FibGUgdG8gcHJldmVudCBqcXVlcnkgZnJvbSBib3RoZXJpbmcgd2l0aCBsaW5rc1xyXG5cdFx0bGlua0JpbmRpbmdFbmFibGVkOiB0cnVlLFxyXG5cclxuXHRcdC8vIFNldCBkZWZhdWx0IHBhZ2UgdHJhbnNpdGlvbiAtICdub25lJyBmb3Igbm8gdHJhbnNpdGlvbnNcclxuXHRcdGRlZmF1bHRQYWdlVHJhbnNpdGlvbjogXCJmYWRlXCIsXHJcblxyXG5cdFx0Ly8gU2V0IG1heGltdW0gd2luZG93IHdpZHRoIGZvciB0cmFuc2l0aW9ucyB0byBhcHBseSAtICdmYWxzZScgZm9yIG5vIGxpbWl0XHJcblx0XHRtYXhUcmFuc2l0aW9uV2lkdGg6IGZhbHNlLFxyXG5cclxuXHRcdC8vIE1pbmltdW0gc2Nyb2xsIGRpc3RhbmNlIHRoYXQgd2lsbCBiZSByZW1lbWJlcmVkIHdoZW4gcmV0dXJuaW5nIHRvIGEgcGFnZVxyXG5cdFx0Ly8gRGVwcmVjYXRlZCByZW1vdmUgaW4gMS41XHJcblx0XHRtaW5TY3JvbGxCYWNrOiAwLFxyXG5cclxuXHRcdC8vIFNldCBkZWZhdWx0IGRpYWxvZyB0cmFuc2l0aW9uIC0gJ25vbmUnIGZvciBubyB0cmFuc2l0aW9uc1xyXG5cdFx0ZGVmYXVsdERpYWxvZ1RyYW5zaXRpb246IFwicG9wXCIsXHJcblxyXG5cdFx0Ly8gRXJyb3IgcmVzcG9uc2UgbWVzc2FnZSAtIGFwcGVhcnMgd2hlbiBhbiBBamF4IHBhZ2UgcmVxdWVzdCBmYWlsc1xyXG5cdFx0cGFnZUxvYWRFcnJvck1lc3NhZ2U6IFwiRXJyb3IgTG9hZGluZyBQYWdlXCIsXHJcblxyXG5cdFx0Ly8gRm9yIGVycm9yIG1lc3NhZ2VzLCB3aGljaCB0aGVtZSBkb2VzIHRoZSBib3ggdXNlP1xyXG5cdFx0cGFnZUxvYWRFcnJvck1lc3NhZ2VUaGVtZTogXCJhXCIsXHJcblxyXG5cdFx0Ly8gcmVwbGFjZSBjYWxscyB0byB3aW5kb3cuaGlzdG9yeS5iYWNrIHdpdGggcGhvbmVnYXBzIG5hdmlnYXRpb24gaGVscGVyXHJcblx0XHQvLyB3aGVyZSBpdCBpcyBwcm92aWRlZCBvbiB0aGUgd2luZG93IG9iamVjdFxyXG5cdFx0cGhvbmVnYXBOYXZpZ2F0aW9uRW5hYmxlZDogZmFsc2UsXHJcblxyXG5cdFx0Ly9hdXRvbWF0aWNhbGx5IGluaXRpYWxpemUgdGhlIERPTSB3aGVuIGl0J3MgcmVhZHlcclxuXHRcdGF1dG9Jbml0aWFsaXplUGFnZTogdHJ1ZSxcclxuXHJcblx0XHRwdXNoU3RhdGVFbmFibGVkOiB0cnVlLFxyXG5cclxuXHRcdC8vIGFsbG93cyB1c2VycyB0byBvcHQgaW4gdG8gaWdub3JpbmcgY29udGVudCBieSBtYXJraW5nIGEgcGFyZW50IGVsZW1lbnQgYXNcclxuXHRcdC8vIGRhdGEtaWdub3JlZFxyXG5cdFx0aWdub3JlQ29udGVudEVuYWJsZWQ6IGZhbHNlLFxyXG5cclxuXHRcdGJ1dHRvbk1hcmt1cDoge1xyXG5cdFx0XHRob3ZlckRlbGF5OiAyMDBcclxuXHRcdH0sXHJcblxyXG5cdFx0Ly8gZGlzYWJsZSB0aGUgYWx0ZXJhdGlvbiBvZiB0aGUgZHluYW1pYyBiYXNlIHRhZyBvciBsaW5rcyBpbiB0aGUgY2FzZVxyXG5cdFx0Ly8gdGhhdCBhIGR5bmFtaWMgYmFzZSB0YWcgaXNuJ3Qgc3VwcG9ydGVkXHJcblx0XHRkeW5hbWljQmFzZUVuYWJsZWQ6IHRydWUsXHJcblxyXG5cdFx0Ly8gZGVmYXVsdCB0aGUgcHJvcGVydHkgdG8gcmVtb3ZlIGRlcGVuZGVuY3kgb24gYXNzaWdubWVudCBpbiBpbml0IG1vZHVsZVxyXG5cdFx0cGFnZUNvbnRhaW5lcjogJCgpLFxyXG5cclxuXHRcdC8vZW5hYmxlIGNyb3NzLWRvbWFpbiBwYWdlIHN1cHBvcnRcclxuXHRcdGFsbG93Q3Jvc3NEb21haW5QYWdlczogZmFsc2UsXHJcblxyXG5cdFx0ZGlhbG9nSGFzaEtleTogXCImdWktc3RhdGU9ZGlhbG9nXCJcclxuXHR9KTtcclxufSkoIGpRdWVyeSwgdGhpcyApO1xyXG5cclxuLyohXHJcbiAqIGpRdWVyeSBVSSBXaWRnZXQgYzBhYjcxMDU2YjkzNjYyN2U4YTc4MjFmMDNjMDQ0YWVjNjI4MGE0MFxyXG4gKiBodHRwOi8vanF1ZXJ5dWkuY29tXHJcbiAqXHJcbiAqIENvcHlyaWdodCAyMDEzIGpRdWVyeSBGb3VuZGF0aW9uIGFuZCBvdGhlciBjb250cmlidXRvcnNcclxuICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxyXG4gKiBodHRwOi8vanF1ZXJ5Lm9yZy9saWNlbnNlXHJcbiAqXHJcbiAqIGh0dHA6Ly9hcGkuanF1ZXJ5dWkuY29tL2pRdWVyeS53aWRnZXQvXHJcbiAqL1xyXG4oZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcclxuXHJcbnZhciB1dWlkID0gMCxcclxuXHRzbGljZSA9IEFycmF5LnByb3RvdHlwZS5zbGljZSxcclxuXHRfY2xlYW5EYXRhID0gJC5jbGVhbkRhdGE7XHJcbiQuY2xlYW5EYXRhID0gZnVuY3Rpb24oIGVsZW1zICkge1xyXG5cdGZvciAoIHZhciBpID0gMCwgZWxlbTsgKGVsZW0gPSBlbGVtc1tpXSkgIT0gbnVsbDsgaSsrICkge1xyXG5cdFx0dHJ5IHtcclxuXHRcdFx0JCggZWxlbSApLnRyaWdnZXJIYW5kbGVyKCBcInJlbW92ZVwiICk7XHJcblx0XHQvLyBodHRwOi8vYnVncy5qcXVlcnkuY29tL3RpY2tldC84MjM1XHJcblx0XHR9IGNhdGNoKCBlICkge31cclxuXHR9XHJcblx0X2NsZWFuRGF0YSggZWxlbXMgKTtcclxufTtcclxuXHJcbiQud2lkZ2V0ID0gZnVuY3Rpb24oIG5hbWUsIGJhc2UsIHByb3RvdHlwZSApIHtcclxuXHR2YXIgZnVsbE5hbWUsIGV4aXN0aW5nQ29uc3RydWN0b3IsIGNvbnN0cnVjdG9yLCBiYXNlUHJvdG90eXBlLFxyXG5cdFx0Ly8gcHJveGllZFByb3RvdHlwZSBhbGxvd3MgdGhlIHByb3ZpZGVkIHByb3RvdHlwZSB0byByZW1haW4gdW5tb2RpZmllZFxyXG5cdFx0Ly8gc28gdGhhdCBpdCBjYW4gYmUgdXNlZCBhcyBhIG1peGluIGZvciBtdWx0aXBsZSB3aWRnZXRzICgjODg3NilcclxuXHRcdHByb3hpZWRQcm90b3R5cGUgPSB7fSxcclxuXHRcdG5hbWVzcGFjZSA9IG5hbWUuc3BsaXQoIFwiLlwiIClbIDAgXTtcclxuXHJcblx0bmFtZSA9IG5hbWUuc3BsaXQoIFwiLlwiIClbIDEgXTtcclxuXHRmdWxsTmFtZSA9IG5hbWVzcGFjZSArIFwiLVwiICsgbmFtZTtcclxuXHJcblx0aWYgKCAhcHJvdG90eXBlICkge1xyXG5cdFx0cHJvdG90eXBlID0gYmFzZTtcclxuXHRcdGJhc2UgPSAkLldpZGdldDtcclxuXHR9XHJcblxyXG5cdC8vIGNyZWF0ZSBzZWxlY3RvciBmb3IgcGx1Z2luXHJcblx0JC5leHByWyBcIjpcIiBdWyBmdWxsTmFtZS50b0xvd2VyQ2FzZSgpIF0gPSBmdW5jdGlvbiggZWxlbSApIHtcclxuXHRcdHJldHVybiAhISQuZGF0YSggZWxlbSwgZnVsbE5hbWUgKTtcclxuXHR9O1xyXG5cclxuXHQkWyBuYW1lc3BhY2UgXSA9ICRbIG5hbWVzcGFjZSBdIHx8IHt9O1xyXG5cdGV4aXN0aW5nQ29uc3RydWN0b3IgPSAkWyBuYW1lc3BhY2UgXVsgbmFtZSBdO1xyXG5cdGNvbnN0cnVjdG9yID0gJFsgbmFtZXNwYWNlIF1bIG5hbWUgXSA9IGZ1bmN0aW9uKCBvcHRpb25zLCBlbGVtZW50ICkge1xyXG5cdFx0Ly8gYWxsb3cgaW5zdGFudGlhdGlvbiB3aXRob3V0IFwibmV3XCIga2V5d29yZFxyXG5cdFx0aWYgKCAhdGhpcy5fY3JlYXRlV2lkZ2V0ICkge1xyXG5cdFx0XHRyZXR1cm4gbmV3IGNvbnN0cnVjdG9yKCBvcHRpb25zLCBlbGVtZW50ICk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gYWxsb3cgaW5zdGFudGlhdGlvbiB3aXRob3V0IGluaXRpYWxpemluZyBmb3Igc2ltcGxlIGluaGVyaXRhbmNlXHJcblx0XHQvLyBtdXN0IHVzZSBcIm5ld1wiIGtleXdvcmQgKHRoZSBjb2RlIGFib3ZlIGFsd2F5cyBwYXNzZXMgYXJncylcclxuXHRcdGlmICggYXJndW1lbnRzLmxlbmd0aCApIHtcclxuXHRcdFx0dGhpcy5fY3JlYXRlV2lkZ2V0KCBvcHRpb25zLCBlbGVtZW50ICk7XHJcblx0XHR9XHJcblx0fTtcclxuXHQvLyBleHRlbmQgd2l0aCB0aGUgZXhpc3RpbmcgY29uc3RydWN0b3IgdG8gY2Fycnkgb3ZlciBhbnkgc3RhdGljIHByb3BlcnRpZXNcclxuXHQkLmV4dGVuZCggY29uc3RydWN0b3IsIGV4aXN0aW5nQ29uc3RydWN0b3IsIHtcclxuXHRcdHZlcnNpb246IHByb3RvdHlwZS52ZXJzaW9uLFxyXG5cdFx0Ly8gY29weSB0aGUgb2JqZWN0IHVzZWQgdG8gY3JlYXRlIHRoZSBwcm90b3R5cGUgaW4gY2FzZSB3ZSBuZWVkIHRvXHJcblx0XHQvLyByZWRlZmluZSB0aGUgd2lkZ2V0IGxhdGVyXHJcblx0XHRfcHJvdG86ICQuZXh0ZW5kKCB7fSwgcHJvdG90eXBlICksXHJcblx0XHQvLyB0cmFjayB3aWRnZXRzIHRoYXQgaW5oZXJpdCBmcm9tIHRoaXMgd2lkZ2V0IGluIGNhc2UgdGhpcyB3aWRnZXQgaXNcclxuXHRcdC8vIHJlZGVmaW5lZCBhZnRlciBhIHdpZGdldCBpbmhlcml0cyBmcm9tIGl0XHJcblx0XHRfY2hpbGRDb25zdHJ1Y3RvcnM6IFtdXHJcblx0fSk7XHJcblxyXG5cdGJhc2VQcm90b3R5cGUgPSBuZXcgYmFzZSgpO1xyXG5cdC8vIHdlIG5lZWQgdG8gbWFrZSB0aGUgb3B0aW9ucyBoYXNoIGEgcHJvcGVydHkgZGlyZWN0bHkgb24gdGhlIG5ldyBpbnN0YW5jZVxyXG5cdC8vIG90aGVyd2lzZSB3ZSdsbCBtb2RpZnkgdGhlIG9wdGlvbnMgaGFzaCBvbiB0aGUgcHJvdG90eXBlIHRoYXQgd2UncmVcclxuXHQvLyBpbmhlcml0aW5nIGZyb21cclxuXHRiYXNlUHJvdG90eXBlLm9wdGlvbnMgPSAkLndpZGdldC5leHRlbmQoIHt9LCBiYXNlUHJvdG90eXBlLm9wdGlvbnMgKTtcclxuXHQkLmVhY2goIHByb3RvdHlwZSwgZnVuY3Rpb24oIHByb3AsIHZhbHVlICkge1xyXG5cdFx0aWYgKCAhJC5pc0Z1bmN0aW9uKCB2YWx1ZSApICkge1xyXG5cdFx0XHRwcm94aWVkUHJvdG90eXBlWyBwcm9wIF0gPSB2YWx1ZTtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cdFx0cHJveGllZFByb3RvdHlwZVsgcHJvcCBdID0gKGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR2YXIgX3N1cGVyID0gZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gYmFzZS5wcm90b3R5cGVbIHByb3AgXS5hcHBseSggdGhpcywgYXJndW1lbnRzICk7XHJcblx0XHRcdFx0fSxcclxuXHRcdFx0XHRfc3VwZXJBcHBseSA9IGZ1bmN0aW9uKCBhcmdzICkge1xyXG5cdFx0XHRcdFx0cmV0dXJuIGJhc2UucHJvdG90eXBlWyBwcm9wIF0uYXBwbHkoIHRoaXMsIGFyZ3MgKTtcclxuXHRcdFx0XHR9O1xyXG5cdFx0XHRyZXR1cm4gZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0dmFyIF9fc3VwZXIgPSB0aGlzLl9zdXBlcixcclxuXHRcdFx0XHRcdF9fc3VwZXJBcHBseSA9IHRoaXMuX3N1cGVyQXBwbHksXHJcblx0XHRcdFx0XHRyZXR1cm5WYWx1ZTtcclxuXHJcblx0XHRcdFx0dGhpcy5fc3VwZXIgPSBfc3VwZXI7XHJcblx0XHRcdFx0dGhpcy5fc3VwZXJBcHBseSA9IF9zdXBlckFwcGx5O1xyXG5cclxuXHRcdFx0XHRyZXR1cm5WYWx1ZSA9IHZhbHVlLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTtcclxuXHJcblx0XHRcdFx0dGhpcy5fc3VwZXIgPSBfX3N1cGVyO1xyXG5cdFx0XHRcdHRoaXMuX3N1cGVyQXBwbHkgPSBfX3N1cGVyQXBwbHk7XHJcblxyXG5cdFx0XHRcdHJldHVybiByZXR1cm5WYWx1ZTtcclxuXHRcdFx0fTtcclxuXHRcdH0pKCk7XHJcblx0fSk7XHJcblx0Y29uc3RydWN0b3IucHJvdG90eXBlID0gJC53aWRnZXQuZXh0ZW5kKCBiYXNlUHJvdG90eXBlLCB7XHJcblx0XHQvLyBUT0RPOiByZW1vdmUgc3VwcG9ydCBmb3Igd2lkZ2V0RXZlbnRQcmVmaXhcclxuXHRcdC8vIGFsd2F5cyB1c2UgdGhlIG5hbWUgKyBhIGNvbG9uIGFzIHRoZSBwcmVmaXgsIGUuZy4sIGRyYWdnYWJsZTpzdGFydFxyXG5cdFx0Ly8gZG9uJ3QgcHJlZml4IGZvciB3aWRnZXRzIHRoYXQgYXJlbid0IERPTS1iYXNlZFxyXG5cdFx0d2lkZ2V0RXZlbnRQcmVmaXg6IGV4aXN0aW5nQ29uc3RydWN0b3IgPyAoYmFzZVByb3RvdHlwZS53aWRnZXRFdmVudFByZWZpeCB8fCBuYW1lKSA6IG5hbWVcclxuXHR9LCBwcm94aWVkUHJvdG90eXBlLCB7XHJcblx0XHRjb25zdHJ1Y3RvcjogY29uc3RydWN0b3IsXHJcblx0XHRuYW1lc3BhY2U6IG5hbWVzcGFjZSxcclxuXHRcdHdpZGdldE5hbWU6IG5hbWUsXHJcblx0XHR3aWRnZXRGdWxsTmFtZTogZnVsbE5hbWVcclxuXHR9KTtcclxuXHJcblx0Ly8gSWYgdGhpcyB3aWRnZXQgaXMgYmVpbmcgcmVkZWZpbmVkIHRoZW4gd2UgbmVlZCB0byBmaW5kIGFsbCB3aWRnZXRzIHRoYXRcclxuXHQvLyBhcmUgaW5oZXJpdGluZyBmcm9tIGl0IGFuZCByZWRlZmluZSBhbGwgb2YgdGhlbSBzbyB0aGF0IHRoZXkgaW5oZXJpdCBmcm9tXHJcblx0Ly8gdGhlIG5ldyB2ZXJzaW9uIG9mIHRoaXMgd2lkZ2V0LiBXZSdyZSBlc3NlbnRpYWxseSB0cnlpbmcgdG8gcmVwbGFjZSBvbmVcclxuXHQvLyBsZXZlbCBpbiB0aGUgcHJvdG90eXBlIGNoYWluLlxyXG5cdGlmICggZXhpc3RpbmdDb25zdHJ1Y3RvciApIHtcclxuXHRcdCQuZWFjaCggZXhpc3RpbmdDb25zdHJ1Y3Rvci5fY2hpbGRDb25zdHJ1Y3RvcnMsIGZ1bmN0aW9uKCBpLCBjaGlsZCApIHtcclxuXHRcdFx0dmFyIGNoaWxkUHJvdG90eXBlID0gY2hpbGQucHJvdG90eXBlO1xyXG5cclxuXHRcdFx0Ly8gcmVkZWZpbmUgdGhlIGNoaWxkIHdpZGdldCB1c2luZyB0aGUgc2FtZSBwcm90b3R5cGUgdGhhdCB3YXNcclxuXHRcdFx0Ly8gb3JpZ2luYWxseSB1c2VkLCBidXQgaW5oZXJpdCBmcm9tIHRoZSBuZXcgdmVyc2lvbiBvZiB0aGUgYmFzZVxyXG5cdFx0XHQkLndpZGdldCggY2hpbGRQcm90b3R5cGUubmFtZXNwYWNlICsgXCIuXCIgKyBjaGlsZFByb3RvdHlwZS53aWRnZXROYW1lLCBjb25zdHJ1Y3RvciwgY2hpbGQuX3Byb3RvICk7XHJcblx0XHR9KTtcclxuXHRcdC8vIHJlbW92ZSB0aGUgbGlzdCBvZiBleGlzdGluZyBjaGlsZCBjb25zdHJ1Y3RvcnMgZnJvbSB0aGUgb2xkIGNvbnN0cnVjdG9yXHJcblx0XHQvLyBzbyB0aGUgb2xkIGNoaWxkIGNvbnN0cnVjdG9ycyBjYW4gYmUgZ2FyYmFnZSBjb2xsZWN0ZWRcclxuXHRcdGRlbGV0ZSBleGlzdGluZ0NvbnN0cnVjdG9yLl9jaGlsZENvbnN0cnVjdG9ycztcclxuXHR9IGVsc2Uge1xyXG5cdFx0YmFzZS5fY2hpbGRDb25zdHJ1Y3RvcnMucHVzaCggY29uc3RydWN0b3IgKTtcclxuXHR9XHJcblxyXG5cdCQud2lkZ2V0LmJyaWRnZSggbmFtZSwgY29uc3RydWN0b3IgKTtcclxuXHJcblx0cmV0dXJuIGNvbnN0cnVjdG9yO1xyXG59O1xyXG5cclxuJC53aWRnZXQuZXh0ZW5kID0gZnVuY3Rpb24oIHRhcmdldCApIHtcclxuXHR2YXIgaW5wdXQgPSBzbGljZS5jYWxsKCBhcmd1bWVudHMsIDEgKSxcclxuXHRcdGlucHV0SW5kZXggPSAwLFxyXG5cdFx0aW5wdXRMZW5ndGggPSBpbnB1dC5sZW5ndGgsXHJcblx0XHRrZXksXHJcblx0XHR2YWx1ZTtcclxuXHRmb3IgKCA7IGlucHV0SW5kZXggPCBpbnB1dExlbmd0aDsgaW5wdXRJbmRleCsrICkge1xyXG5cdFx0Zm9yICgga2V5IGluIGlucHV0WyBpbnB1dEluZGV4IF0gKSB7XHJcblx0XHRcdHZhbHVlID0gaW5wdXRbIGlucHV0SW5kZXggXVsga2V5IF07XHJcblx0XHRcdGlmICggaW5wdXRbIGlucHV0SW5kZXggXS5oYXNPd25Qcm9wZXJ0eSgga2V5ICkgJiYgdmFsdWUgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0XHQvLyBDbG9uZSBvYmplY3RzXHJcblx0XHRcdFx0aWYgKCAkLmlzUGxhaW5PYmplY3QoIHZhbHVlICkgKSB7XHJcblx0XHRcdFx0XHR0YXJnZXRbIGtleSBdID0gJC5pc1BsYWluT2JqZWN0KCB0YXJnZXRbIGtleSBdICkgP1xyXG5cdFx0XHRcdFx0XHQkLndpZGdldC5leHRlbmQoIHt9LCB0YXJnZXRbIGtleSBdLCB2YWx1ZSApIDpcclxuXHRcdFx0XHRcdFx0Ly8gRG9uJ3QgZXh0ZW5kIHN0cmluZ3MsIGFycmF5cywgZXRjLiB3aXRoIG9iamVjdHNcclxuXHRcdFx0XHRcdFx0JC53aWRnZXQuZXh0ZW5kKCB7fSwgdmFsdWUgKTtcclxuXHRcdFx0XHQvLyBDb3B5IGV2ZXJ5dGhpbmcgZWxzZSBieSByZWZlcmVuY2VcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0dGFyZ2V0WyBrZXkgXSA9IHZhbHVlO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxuXHRyZXR1cm4gdGFyZ2V0O1xyXG59O1xyXG5cclxuJC53aWRnZXQuYnJpZGdlID0gZnVuY3Rpb24oIG5hbWUsIG9iamVjdCApIHtcclxuXHR2YXIgZnVsbE5hbWUgPSBvYmplY3QucHJvdG90eXBlLndpZGdldEZ1bGxOYW1lIHx8IG5hbWU7XHJcblx0JC5mblsgbmFtZSBdID0gZnVuY3Rpb24oIG9wdGlvbnMgKSB7XHJcblx0XHR2YXIgaXNNZXRob2RDYWxsID0gdHlwZW9mIG9wdGlvbnMgPT09IFwic3RyaW5nXCIsXHJcblx0XHRcdGFyZ3MgPSBzbGljZS5jYWxsKCBhcmd1bWVudHMsIDEgKSxcclxuXHRcdFx0cmV0dXJuVmFsdWUgPSB0aGlzO1xyXG5cclxuXHRcdC8vIGFsbG93IG11bHRpcGxlIGhhc2hlcyB0byBiZSBwYXNzZWQgb24gaW5pdFxyXG5cdFx0b3B0aW9ucyA9ICFpc01ldGhvZENhbGwgJiYgYXJncy5sZW5ndGggP1xyXG5cdFx0XHQkLndpZGdldC5leHRlbmQuYXBwbHkoIG51bGwsIFsgb3B0aW9ucyBdLmNvbmNhdChhcmdzKSApIDpcclxuXHRcdFx0b3B0aW9ucztcclxuXHJcblx0XHRpZiAoIGlzTWV0aG9kQ2FsbCApIHtcclxuXHRcdFx0dGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHZhciBtZXRob2RWYWx1ZSxcclxuXHRcdFx0XHRcdGluc3RhbmNlID0gJC5kYXRhKCB0aGlzLCBmdWxsTmFtZSApO1xyXG5cdFx0XHRcdGlmICggb3B0aW9ucyA9PT0gXCJpbnN0YW5jZVwiICkge1xyXG5cdFx0XHRcdFx0cmV0dXJuVmFsdWUgPSBpbnN0YW5jZTtcclxuXHRcdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0aWYgKCAhaW5zdGFuY2UgKSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gJC5lcnJvciggXCJjYW5ub3QgY2FsbCBtZXRob2RzIG9uIFwiICsgbmFtZSArIFwiIHByaW9yIHRvIGluaXRpYWxpemF0aW9uOyBcIiArXHJcblx0XHRcdFx0XHRcdFwiYXR0ZW1wdGVkIHRvIGNhbGwgbWV0aG9kICdcIiArIG9wdGlvbnMgKyBcIidcIiApO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRpZiAoICEkLmlzRnVuY3Rpb24oIGluc3RhbmNlW29wdGlvbnNdICkgfHwgb3B0aW9ucy5jaGFyQXQoIDAgKSA9PT0gXCJfXCIgKSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gJC5lcnJvciggXCJubyBzdWNoIG1ldGhvZCAnXCIgKyBvcHRpb25zICsgXCInIGZvciBcIiArIG5hbWUgKyBcIiB3aWRnZXQgaW5zdGFuY2VcIiApO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRtZXRob2RWYWx1ZSA9IGluc3RhbmNlWyBvcHRpb25zIF0uYXBwbHkoIGluc3RhbmNlLCBhcmdzICk7XHJcblx0XHRcdFx0aWYgKCBtZXRob2RWYWx1ZSAhPT0gaW5zdGFuY2UgJiYgbWV0aG9kVmFsdWUgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0XHRcdHJldHVyblZhbHVlID0gbWV0aG9kVmFsdWUgJiYgbWV0aG9kVmFsdWUuanF1ZXJ5ID9cclxuXHRcdFx0XHRcdFx0cmV0dXJuVmFsdWUucHVzaFN0YWNrKCBtZXRob2RWYWx1ZS5nZXQoKSApIDpcclxuXHRcdFx0XHRcdFx0bWV0aG9kVmFsdWU7XHJcblx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHRoaXMuZWFjaChmdW5jdGlvbigpIHtcclxuXHRcdFx0XHR2YXIgaW5zdGFuY2UgPSAkLmRhdGEoIHRoaXMsIGZ1bGxOYW1lICk7XHJcblx0XHRcdFx0aWYgKCBpbnN0YW5jZSApIHtcclxuXHRcdFx0XHRcdGluc3RhbmNlLm9wdGlvbiggb3B0aW9ucyB8fCB7fSApLl9pbml0KCk7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdCQuZGF0YSggdGhpcywgZnVsbE5hbWUsIG5ldyBvYmplY3QoIG9wdGlvbnMsIHRoaXMgKSApO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHJldHVyblZhbHVlO1xyXG5cdH07XHJcbn07XHJcblxyXG4kLldpZGdldCA9IGZ1bmN0aW9uKCAvKiBvcHRpb25zLCBlbGVtZW50ICovICkge307XHJcbiQuV2lkZ2V0Ll9jaGlsZENvbnN0cnVjdG9ycyA9IFtdO1xyXG5cclxuJC5XaWRnZXQucHJvdG90eXBlID0ge1xyXG5cdHdpZGdldE5hbWU6IFwid2lkZ2V0XCIsXHJcblx0d2lkZ2V0RXZlbnRQcmVmaXg6IFwiXCIsXHJcblx0ZGVmYXVsdEVsZW1lbnQ6IFwiPGRpdj5cIixcclxuXHRvcHRpb25zOiB7XHJcblx0XHRkaXNhYmxlZDogZmFsc2UsXHJcblxyXG5cdFx0Ly8gY2FsbGJhY2tzXHJcblx0XHRjcmVhdGU6IG51bGxcclxuXHR9LFxyXG5cdF9jcmVhdGVXaWRnZXQ6IGZ1bmN0aW9uKCBvcHRpb25zLCBlbGVtZW50ICkge1xyXG5cdFx0ZWxlbWVudCA9ICQoIGVsZW1lbnQgfHwgdGhpcy5kZWZhdWx0RWxlbWVudCB8fCB0aGlzIClbIDAgXTtcclxuXHRcdHRoaXMuZWxlbWVudCA9ICQoIGVsZW1lbnQgKTtcclxuXHRcdHRoaXMudXVpZCA9IHV1aWQrKztcclxuXHRcdHRoaXMuZXZlbnROYW1lc3BhY2UgPSBcIi5cIiArIHRoaXMud2lkZ2V0TmFtZSArIHRoaXMudXVpZDtcclxuXHRcdHRoaXMub3B0aW9ucyA9ICQud2lkZ2V0LmV4dGVuZCgge30sXHJcblx0XHRcdHRoaXMub3B0aW9ucyxcclxuXHRcdFx0dGhpcy5fZ2V0Q3JlYXRlT3B0aW9ucygpLFxyXG5cdFx0XHRvcHRpb25zICk7XHJcblxyXG5cdFx0dGhpcy5iaW5kaW5ncyA9ICQoKTtcclxuXHRcdHRoaXMuaG92ZXJhYmxlID0gJCgpO1xyXG5cdFx0dGhpcy5mb2N1c2FibGUgPSAkKCk7XHJcblxyXG5cdFx0aWYgKCBlbGVtZW50ICE9PSB0aGlzICkge1xyXG5cdFx0XHQkLmRhdGEoIGVsZW1lbnQsIHRoaXMud2lkZ2V0RnVsbE5hbWUsIHRoaXMgKTtcclxuXHRcdFx0dGhpcy5fb24oIHRydWUsIHRoaXMuZWxlbWVudCwge1xyXG5cdFx0XHRcdHJlbW92ZTogZnVuY3Rpb24oIGV2ZW50ICkge1xyXG5cdFx0XHRcdFx0aWYgKCBldmVudC50YXJnZXQgPT09IGVsZW1lbnQgKSB7XHJcblx0XHRcdFx0XHRcdHRoaXMuZGVzdHJveSgpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblx0XHRcdHRoaXMuZG9jdW1lbnQgPSAkKCBlbGVtZW50LnN0eWxlID9cclxuXHRcdFx0XHQvLyBlbGVtZW50IHdpdGhpbiB0aGUgZG9jdW1lbnRcclxuXHRcdFx0XHRlbGVtZW50Lm93bmVyRG9jdW1lbnQgOlxyXG5cdFx0XHRcdC8vIGVsZW1lbnQgaXMgd2luZG93IG9yIGRvY3VtZW50XHJcblx0XHRcdFx0ZWxlbWVudC5kb2N1bWVudCB8fCBlbGVtZW50ICk7XHJcblx0XHRcdHRoaXMud2luZG93ID0gJCggdGhpcy5kb2N1bWVudFswXS5kZWZhdWx0VmlldyB8fCB0aGlzLmRvY3VtZW50WzBdLnBhcmVudFdpbmRvdyApO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuX2NyZWF0ZSgpO1xyXG5cdFx0dGhpcy5fdHJpZ2dlciggXCJjcmVhdGVcIiwgbnVsbCwgdGhpcy5fZ2V0Q3JlYXRlRXZlbnREYXRhKCkgKTtcclxuXHRcdHRoaXMuX2luaXQoKTtcclxuXHR9LFxyXG5cdF9nZXRDcmVhdGVPcHRpb25zOiAkLm5vb3AsXHJcblx0X2dldENyZWF0ZUV2ZW50RGF0YTogJC5ub29wLFxyXG5cdF9jcmVhdGU6ICQubm9vcCxcclxuXHRfaW5pdDogJC5ub29wLFxyXG5cclxuXHRkZXN0cm95OiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuX2Rlc3Ryb3koKTtcclxuXHRcdC8vIHdlIGNhbiBwcm9iYWJseSByZW1vdmUgdGhlIHVuYmluZCBjYWxscyBpbiAyLjBcclxuXHRcdC8vIGFsbCBldmVudCBiaW5kaW5ncyBzaG91bGQgZ28gdGhyb3VnaCB0aGlzLl9vbigpXHJcblx0XHR0aGlzLmVsZW1lbnRcclxuXHRcdFx0LnVuYmluZCggdGhpcy5ldmVudE5hbWVzcGFjZSApXHJcblx0XHRcdC5yZW1vdmVEYXRhKCB0aGlzLndpZGdldEZ1bGxOYW1lIClcclxuXHRcdFx0Ly8gc3VwcG9ydDoganF1ZXJ5IDwxLjYuM1xyXG5cdFx0XHQvLyBodHRwOi8vYnVncy5qcXVlcnkuY29tL3RpY2tldC85NDEzXHJcblx0XHRcdC5yZW1vdmVEYXRhKCAkLmNhbWVsQ2FzZSggdGhpcy53aWRnZXRGdWxsTmFtZSApICk7XHJcblx0XHR0aGlzLndpZGdldCgpXHJcblx0XHRcdC51bmJpbmQoIHRoaXMuZXZlbnROYW1lc3BhY2UgKVxyXG5cdFx0XHQucmVtb3ZlQXR0ciggXCJhcmlhLWRpc2FibGVkXCIgKVxyXG5cdFx0XHQucmVtb3ZlQ2xhc3MoXHJcblx0XHRcdFx0dGhpcy53aWRnZXRGdWxsTmFtZSArIFwiLWRpc2FibGVkIFwiICtcclxuXHRcdFx0XHRcInVpLXN0YXRlLWRpc2FibGVkXCIgKTtcclxuXHJcblx0XHQvLyBjbGVhbiB1cCBldmVudHMgYW5kIHN0YXRlc1xyXG5cdFx0dGhpcy5iaW5kaW5ncy51bmJpbmQoIHRoaXMuZXZlbnROYW1lc3BhY2UgKTtcclxuXHRcdHRoaXMuaG92ZXJhYmxlLnJlbW92ZUNsYXNzKCBcInVpLXN0YXRlLWhvdmVyXCIgKTtcclxuXHRcdHRoaXMuZm9jdXNhYmxlLnJlbW92ZUNsYXNzKCBcInVpLXN0YXRlLWZvY3VzXCIgKTtcclxuXHR9LFxyXG5cdF9kZXN0cm95OiAkLm5vb3AsXHJcblxyXG5cdHdpZGdldDogZnVuY3Rpb24oKSB7XHJcblx0XHRyZXR1cm4gdGhpcy5lbGVtZW50O1xyXG5cdH0sXHJcblxyXG5cdG9wdGlvbjogZnVuY3Rpb24oIGtleSwgdmFsdWUgKSB7XHJcblx0XHR2YXIgb3B0aW9ucyA9IGtleSxcclxuXHRcdFx0cGFydHMsXHJcblx0XHRcdGN1ck9wdGlvbixcclxuXHRcdFx0aTtcclxuXHJcblx0XHRpZiAoIGFyZ3VtZW50cy5sZW5ndGggPT09IDAgKSB7XHJcblx0XHRcdC8vIGRvbid0IHJldHVybiBhIHJlZmVyZW5jZSB0byB0aGUgaW50ZXJuYWwgaGFzaFxyXG5cdFx0XHRyZXR1cm4gJC53aWRnZXQuZXh0ZW5kKCB7fSwgdGhpcy5vcHRpb25zICk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCB0eXBlb2Yga2V5ID09PSBcInN0cmluZ1wiICkge1xyXG5cdFx0XHQvLyBoYW5kbGUgbmVzdGVkIGtleXMsIGUuZy4sIFwiZm9vLmJhclwiID0+IHsgZm9vOiB7IGJhcjogX19fIH0gfVxyXG5cdFx0XHRvcHRpb25zID0ge307XHJcblx0XHRcdHBhcnRzID0ga2V5LnNwbGl0KCBcIi5cIiApO1xyXG5cdFx0XHRrZXkgPSBwYXJ0cy5zaGlmdCgpO1xyXG5cdFx0XHRpZiAoIHBhcnRzLmxlbmd0aCApIHtcclxuXHRcdFx0XHRjdXJPcHRpb24gPSBvcHRpb25zWyBrZXkgXSA9ICQud2lkZ2V0LmV4dGVuZCgge30sIHRoaXMub3B0aW9uc1sga2V5IF0gKTtcclxuXHRcdFx0XHRmb3IgKCBpID0gMDsgaSA8IHBhcnRzLmxlbmd0aCAtIDE7IGkrKyApIHtcclxuXHRcdFx0XHRcdGN1ck9wdGlvblsgcGFydHNbIGkgXSBdID0gY3VyT3B0aW9uWyBwYXJ0c1sgaSBdIF0gfHwge307XHJcblx0XHRcdFx0XHRjdXJPcHRpb24gPSBjdXJPcHRpb25bIHBhcnRzWyBpIF0gXTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0a2V5ID0gcGFydHMucG9wKCk7XHJcblx0XHRcdFx0aWYgKCB2YWx1ZSA9PT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRcdFx0cmV0dXJuIGN1ck9wdGlvblsga2V5IF0gPT09IHVuZGVmaW5lZCA/IG51bGwgOiBjdXJPcHRpb25bIGtleSBdO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRjdXJPcHRpb25bIGtleSBdID0gdmFsdWU7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0aWYgKCB2YWx1ZSA9PT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRcdFx0cmV0dXJuIHRoaXMub3B0aW9uc1sga2V5IF0gPT09IHVuZGVmaW5lZCA/IG51bGwgOiB0aGlzLm9wdGlvbnNbIGtleSBdO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRvcHRpb25zWyBrZXkgXSA9IHZhbHVlO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5fc2V0T3B0aW9ucyggb3B0aW9ucyApO1xyXG5cclxuXHRcdHJldHVybiB0aGlzO1xyXG5cdH0sXHJcblx0X3NldE9wdGlvbnM6IGZ1bmN0aW9uKCBvcHRpb25zICkge1xyXG5cdFx0dmFyIGtleTtcclxuXHJcblx0XHRmb3IgKCBrZXkgaW4gb3B0aW9ucyApIHtcclxuXHRcdFx0dGhpcy5fc2V0T3B0aW9uKCBrZXksIG9wdGlvbnNbIGtleSBdICk7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblx0fSxcclxuXHRfc2V0T3B0aW9uOiBmdW5jdGlvbigga2V5LCB2YWx1ZSApIHtcclxuXHRcdHRoaXMub3B0aW9uc1sga2V5IF0gPSB2YWx1ZTtcclxuXHJcblx0XHRpZiAoIGtleSA9PT0gXCJkaXNhYmxlZFwiICkge1xyXG5cdFx0XHR0aGlzLndpZGdldCgpXHJcblx0XHRcdFx0LnRvZ2dsZUNsYXNzKCB0aGlzLndpZGdldEZ1bGxOYW1lICsgXCItZGlzYWJsZWRcIiwgISF2YWx1ZSApO1xyXG5cdFx0XHR0aGlzLmhvdmVyYWJsZS5yZW1vdmVDbGFzcyggXCJ1aS1zdGF0ZS1ob3ZlclwiICk7XHJcblx0XHRcdHRoaXMuZm9jdXNhYmxlLnJlbW92ZUNsYXNzKCBcInVpLXN0YXRlLWZvY3VzXCIgKTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHR9LFxyXG5cclxuXHRlbmFibGU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0cmV0dXJuIHRoaXMuX3NldE9wdGlvbnMoeyBkaXNhYmxlZDogZmFsc2UgfSk7XHJcblx0fSxcclxuXHRkaXNhYmxlOiBmdW5jdGlvbigpIHtcclxuXHRcdHJldHVybiB0aGlzLl9zZXRPcHRpb25zKHsgZGlzYWJsZWQ6IHRydWUgfSk7XHJcblx0fSxcclxuXHJcblx0X29uOiBmdW5jdGlvbiggc3VwcHJlc3NEaXNhYmxlZENoZWNrLCBlbGVtZW50LCBoYW5kbGVycyApIHtcclxuXHRcdHZhciBkZWxlZ2F0ZUVsZW1lbnQsXHJcblx0XHRcdGluc3RhbmNlID0gdGhpcztcclxuXHJcblx0XHQvLyBubyBzdXBwcmVzc0Rpc2FibGVkQ2hlY2sgZmxhZywgc2h1ZmZsZSBhcmd1bWVudHNcclxuXHRcdGlmICggdHlwZW9mIHN1cHByZXNzRGlzYWJsZWRDaGVjayAhPT0gXCJib29sZWFuXCIgKSB7XHJcblx0XHRcdGhhbmRsZXJzID0gZWxlbWVudDtcclxuXHRcdFx0ZWxlbWVudCA9IHN1cHByZXNzRGlzYWJsZWRDaGVjaztcclxuXHRcdFx0c3VwcHJlc3NEaXNhYmxlZENoZWNrID0gZmFsc2U7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gbm8gZWxlbWVudCBhcmd1bWVudCwgc2h1ZmZsZSBhbmQgdXNlIHRoaXMuZWxlbWVudFxyXG5cdFx0aWYgKCAhaGFuZGxlcnMgKSB7XHJcblx0XHRcdGhhbmRsZXJzID0gZWxlbWVudDtcclxuXHRcdFx0ZWxlbWVudCA9IHRoaXMuZWxlbWVudDtcclxuXHRcdFx0ZGVsZWdhdGVFbGVtZW50ID0gdGhpcy53aWRnZXQoKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdC8vIGFjY2VwdCBzZWxlY3RvcnMsIERPTSBlbGVtZW50c1xyXG5cdFx0XHRlbGVtZW50ID0gZGVsZWdhdGVFbGVtZW50ID0gJCggZWxlbWVudCApO1xyXG5cdFx0XHR0aGlzLmJpbmRpbmdzID0gdGhpcy5iaW5kaW5ncy5hZGQoIGVsZW1lbnQgKTtcclxuXHRcdH1cclxuXHJcblx0XHQkLmVhY2goIGhhbmRsZXJzLCBmdW5jdGlvbiggZXZlbnQsIGhhbmRsZXIgKSB7XHJcblx0XHRcdGZ1bmN0aW9uIGhhbmRsZXJQcm94eSgpIHtcclxuXHRcdFx0XHQvLyBhbGxvdyB3aWRnZXRzIHRvIGN1c3RvbWl6ZSB0aGUgZGlzYWJsZWQgaGFuZGxpbmdcclxuXHRcdFx0XHQvLyAtIGRpc2FibGVkIGFzIGFuIGFycmF5IGluc3RlYWQgb2YgYm9vbGVhblxyXG5cdFx0XHRcdC8vIC0gZGlzYWJsZWQgY2xhc3MgYXMgbWV0aG9kIGZvciBkaXNhYmxpbmcgaW5kaXZpZHVhbCBwYXJ0c1xyXG5cdFx0XHRcdGlmICggIXN1cHByZXNzRGlzYWJsZWRDaGVjayAmJlxyXG5cdFx0XHRcdFx0XHQoIGluc3RhbmNlLm9wdGlvbnMuZGlzYWJsZWQgPT09IHRydWUgfHxcclxuXHRcdFx0XHRcdFx0XHQkKCB0aGlzICkuaGFzQ2xhc3MoIFwidWktc3RhdGUtZGlzYWJsZWRcIiApICkgKSB7XHJcblx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdHJldHVybiAoIHR5cGVvZiBoYW5kbGVyID09PSBcInN0cmluZ1wiID8gaW5zdGFuY2VbIGhhbmRsZXIgXSA6IGhhbmRsZXIgKVxyXG5cdFx0XHRcdFx0LmFwcGx5KCBpbnN0YW5jZSwgYXJndW1lbnRzICk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIGNvcHkgdGhlIGd1aWQgc28gZGlyZWN0IHVuYmluZGluZyB3b3Jrc1xyXG5cdFx0XHRpZiAoIHR5cGVvZiBoYW5kbGVyICE9PSBcInN0cmluZ1wiICkge1xyXG5cdFx0XHRcdGhhbmRsZXJQcm94eS5ndWlkID0gaGFuZGxlci5ndWlkID1cclxuXHRcdFx0XHRcdGhhbmRsZXIuZ3VpZCB8fCBoYW5kbGVyUHJveHkuZ3VpZCB8fCAkLmd1aWQrKztcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0dmFyIG1hdGNoID0gZXZlbnQubWF0Y2goIC9eKFxcdyspXFxzKiguKikkLyApLFxyXG5cdFx0XHRcdGV2ZW50TmFtZSA9IG1hdGNoWzFdICsgaW5zdGFuY2UuZXZlbnROYW1lc3BhY2UsXHJcblx0XHRcdFx0c2VsZWN0b3IgPSBtYXRjaFsyXTtcclxuXHRcdFx0aWYgKCBzZWxlY3RvciApIHtcclxuXHRcdFx0XHRkZWxlZ2F0ZUVsZW1lbnQuZGVsZWdhdGUoIHNlbGVjdG9yLCBldmVudE5hbWUsIGhhbmRsZXJQcm94eSApO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdGVsZW1lbnQuYmluZCggZXZlbnROYW1lLCBoYW5kbGVyUHJveHkgKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0fSxcclxuXHJcblx0X29mZjogZnVuY3Rpb24oIGVsZW1lbnQsIGV2ZW50TmFtZSApIHtcclxuXHRcdGV2ZW50TmFtZSA9IChldmVudE5hbWUgfHwgXCJcIikuc3BsaXQoIFwiIFwiICkuam9pbiggdGhpcy5ldmVudE5hbWVzcGFjZSArIFwiIFwiICkgKyB0aGlzLmV2ZW50TmFtZXNwYWNlO1xyXG5cdFx0ZWxlbWVudC51bmJpbmQoIGV2ZW50TmFtZSApLnVuZGVsZWdhdGUoIGV2ZW50TmFtZSApO1xyXG5cdH0sXHJcblxyXG5cdF9kZWxheTogZnVuY3Rpb24oIGhhbmRsZXIsIGRlbGF5ICkge1xyXG5cdFx0ZnVuY3Rpb24gaGFuZGxlclByb3h5KCkge1xyXG5cdFx0XHRyZXR1cm4gKCB0eXBlb2YgaGFuZGxlciA9PT0gXCJzdHJpbmdcIiA/IGluc3RhbmNlWyBoYW5kbGVyIF0gOiBoYW5kbGVyIClcclxuXHRcdFx0XHQuYXBwbHkoIGluc3RhbmNlLCBhcmd1bWVudHMgKTtcclxuXHRcdH1cclxuXHRcdHZhciBpbnN0YW5jZSA9IHRoaXM7XHJcblx0XHRyZXR1cm4gc2V0VGltZW91dCggaGFuZGxlclByb3h5LCBkZWxheSB8fCAwICk7XHJcblx0fSxcclxuXHJcblx0X2hvdmVyYWJsZTogZnVuY3Rpb24oIGVsZW1lbnQgKSB7XHJcblx0XHR0aGlzLmhvdmVyYWJsZSA9IHRoaXMuaG92ZXJhYmxlLmFkZCggZWxlbWVudCApO1xyXG5cdFx0dGhpcy5fb24oIGVsZW1lbnQsIHtcclxuXHRcdFx0bW91c2VlbnRlcjogZnVuY3Rpb24oIGV2ZW50ICkge1xyXG5cdFx0XHRcdCQoIGV2ZW50LmN1cnJlbnRUYXJnZXQgKS5hZGRDbGFzcyggXCJ1aS1zdGF0ZS1ob3ZlclwiICk7XHJcblx0XHRcdH0sXHJcblx0XHRcdG1vdXNlbGVhdmU6IGZ1bmN0aW9uKCBldmVudCApIHtcclxuXHRcdFx0XHQkKCBldmVudC5jdXJyZW50VGFyZ2V0ICkucmVtb3ZlQ2xhc3MoIFwidWktc3RhdGUtaG92ZXJcIiApO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHR9LFxyXG5cclxuXHRfZm9jdXNhYmxlOiBmdW5jdGlvbiggZWxlbWVudCApIHtcclxuXHRcdHRoaXMuZm9jdXNhYmxlID0gdGhpcy5mb2N1c2FibGUuYWRkKCBlbGVtZW50ICk7XHJcblx0XHR0aGlzLl9vbiggZWxlbWVudCwge1xyXG5cdFx0XHRmb2N1c2luOiBmdW5jdGlvbiggZXZlbnQgKSB7XHJcblx0XHRcdFx0JCggZXZlbnQuY3VycmVudFRhcmdldCApLmFkZENsYXNzKCBcInVpLXN0YXRlLWZvY3VzXCIgKTtcclxuXHRcdFx0fSxcclxuXHRcdFx0Zm9jdXNvdXQ6IGZ1bmN0aW9uKCBldmVudCApIHtcclxuXHRcdFx0XHQkKCBldmVudC5jdXJyZW50VGFyZ2V0ICkucmVtb3ZlQ2xhc3MoIFwidWktc3RhdGUtZm9jdXNcIiApO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHR9LFxyXG5cclxuXHRfdHJpZ2dlcjogZnVuY3Rpb24oIHR5cGUsIGV2ZW50LCBkYXRhICkge1xyXG5cdFx0dmFyIHByb3AsIG9yaWcsXHJcblx0XHRcdGNhbGxiYWNrID0gdGhpcy5vcHRpb25zWyB0eXBlIF07XHJcblxyXG5cdFx0ZGF0YSA9IGRhdGEgfHwge307XHJcblx0XHRldmVudCA9ICQuRXZlbnQoIGV2ZW50ICk7XHJcblx0XHRldmVudC50eXBlID0gKCB0eXBlID09PSB0aGlzLndpZGdldEV2ZW50UHJlZml4ID9cclxuXHRcdFx0dHlwZSA6XHJcblx0XHRcdHRoaXMud2lkZ2V0RXZlbnRQcmVmaXggKyB0eXBlICkudG9Mb3dlckNhc2UoKTtcclxuXHRcdC8vIHRoZSBvcmlnaW5hbCBldmVudCBtYXkgY29tZSBmcm9tIGFueSBlbGVtZW50XHJcblx0XHQvLyBzbyB3ZSBuZWVkIHRvIHJlc2V0IHRoZSB0YXJnZXQgb24gdGhlIG5ldyBldmVudFxyXG5cdFx0ZXZlbnQudGFyZ2V0ID0gdGhpcy5lbGVtZW50WyAwIF07XHJcblxyXG5cdFx0Ly8gY29weSBvcmlnaW5hbCBldmVudCBwcm9wZXJ0aWVzIG92ZXIgdG8gdGhlIG5ldyBldmVudFxyXG5cdFx0b3JpZyA9IGV2ZW50Lm9yaWdpbmFsRXZlbnQ7XHJcblx0XHRpZiAoIG9yaWcgKSB7XHJcblx0XHRcdGZvciAoIHByb3AgaW4gb3JpZyApIHtcclxuXHRcdFx0XHRpZiAoICEoIHByb3AgaW4gZXZlbnQgKSApIHtcclxuXHRcdFx0XHRcdGV2ZW50WyBwcm9wIF0gPSBvcmlnWyBwcm9wIF07XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5lbGVtZW50LnRyaWdnZXIoIGV2ZW50LCBkYXRhICk7XHJcblx0XHRyZXR1cm4gISggJC5pc0Z1bmN0aW9uKCBjYWxsYmFjayApICYmXHJcblx0XHRcdGNhbGxiYWNrLmFwcGx5KCB0aGlzLmVsZW1lbnRbMF0sIFsgZXZlbnQgXS5jb25jYXQoIGRhdGEgKSApID09PSBmYWxzZSB8fFxyXG5cdFx0XHRldmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSApO1xyXG5cdH1cclxufTtcclxuXHJcbiQuZWFjaCggeyBzaG93OiBcImZhZGVJblwiLCBoaWRlOiBcImZhZGVPdXRcIiB9LCBmdW5jdGlvbiggbWV0aG9kLCBkZWZhdWx0RWZmZWN0ICkge1xyXG5cdCQuV2lkZ2V0LnByb3RvdHlwZVsgXCJfXCIgKyBtZXRob2QgXSA9IGZ1bmN0aW9uKCBlbGVtZW50LCBvcHRpb25zLCBjYWxsYmFjayApIHtcclxuXHRcdGlmICggdHlwZW9mIG9wdGlvbnMgPT09IFwic3RyaW5nXCIgKSB7XHJcblx0XHRcdG9wdGlvbnMgPSB7IGVmZmVjdDogb3B0aW9ucyB9O1xyXG5cdFx0fVxyXG5cdFx0dmFyIGhhc09wdGlvbnMsXHJcblx0XHRcdGVmZmVjdE5hbWUgPSAhb3B0aW9ucyA/XHJcblx0XHRcdFx0bWV0aG9kIDpcclxuXHRcdFx0XHRvcHRpb25zID09PSB0cnVlIHx8IHR5cGVvZiBvcHRpb25zID09PSBcIm51bWJlclwiID9cclxuXHRcdFx0XHRcdGRlZmF1bHRFZmZlY3QgOlxyXG5cdFx0XHRcdFx0b3B0aW9ucy5lZmZlY3QgfHwgZGVmYXVsdEVmZmVjdDtcclxuXHRcdG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xyXG5cdFx0aWYgKCB0eXBlb2Ygb3B0aW9ucyA9PT0gXCJudW1iZXJcIiApIHtcclxuXHRcdFx0b3B0aW9ucyA9IHsgZHVyYXRpb246IG9wdGlvbnMgfTtcclxuXHRcdH1cclxuXHRcdGhhc09wdGlvbnMgPSAhJC5pc0VtcHR5T2JqZWN0KCBvcHRpb25zICk7XHJcblx0XHRvcHRpb25zLmNvbXBsZXRlID0gY2FsbGJhY2s7XHJcblx0XHRpZiAoIG9wdGlvbnMuZGVsYXkgKSB7XHJcblx0XHRcdGVsZW1lbnQuZGVsYXkoIG9wdGlvbnMuZGVsYXkgKTtcclxuXHRcdH1cclxuXHRcdGlmICggaGFzT3B0aW9ucyAmJiAkLmVmZmVjdHMgJiYgJC5lZmZlY3RzLmVmZmVjdFsgZWZmZWN0TmFtZSBdICkge1xyXG5cdFx0XHRlbGVtZW50WyBtZXRob2QgXSggb3B0aW9ucyApO1xyXG5cdFx0fSBlbHNlIGlmICggZWZmZWN0TmFtZSAhPT0gbWV0aG9kICYmIGVsZW1lbnRbIGVmZmVjdE5hbWUgXSApIHtcclxuXHRcdFx0ZWxlbWVudFsgZWZmZWN0TmFtZSBdKCBvcHRpb25zLmR1cmF0aW9uLCBvcHRpb25zLmVhc2luZywgY2FsbGJhY2sgKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdGVsZW1lbnQucXVldWUoZnVuY3Rpb24oIG5leHQgKSB7XHJcblx0XHRcdFx0JCggdGhpcyApWyBtZXRob2QgXSgpO1xyXG5cdFx0XHRcdGlmICggY2FsbGJhY2sgKSB7XHJcblx0XHRcdFx0XHRjYWxsYmFjay5jYWxsKCBlbGVtZW50WyAwIF0gKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0bmV4dCgpO1xyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHR9O1xyXG59KTtcclxuXHJcbn0pKCBqUXVlcnkgKTtcclxuXHJcbihmdW5jdGlvbiggJCwgd2luZG93LCB1bmRlZmluZWQgKSB7XHJcblx0dmFyIG5zTm9ybWFsaXplRGljdCA9IHt9LFxyXG5cdFx0b2xkRmluZCA9ICQuZmluZCxcclxuXHRcdHJicmFjZSA9IC8oPzpcXHtbXFxzXFxTXSpcXH18XFxbW1xcc1xcU10qXFxdKSQvLFxyXG5cdFx0anFtRGF0YVJFID0gLzpqcW1EYXRhXFwoKFteKV0qKVxcKS9nO1xyXG5cclxuXHQkLmV4dGVuZCggJC5tb2JpbGUsIHtcclxuXHJcblx0XHQvLyBOYW1lc3BhY2UgdXNlZCBmcmFtZXdvcmstd2lkZSBmb3IgZGF0YS1hdHRycy4gRGVmYXVsdCBpcyBubyBuYW1lc3BhY2VcclxuXHJcblx0XHRuczogXCJcIixcclxuXHJcblx0XHQvLyBSZXRyaWV2ZSBhbiBhdHRyaWJ1dGUgZnJvbSBhbiBlbGVtZW50IGFuZCBwZXJmb3JtIHNvbWUgbWFzc2FnaW5nIG9mIHRoZSB2YWx1ZVxyXG5cclxuXHRcdGdldEF0dHJpYnV0ZTogZnVuY3Rpb24oIGVsZW1lbnQsIGtleSApIHtcclxuXHRcdFx0dmFyIGRhdGE7XHJcblxyXG5cdFx0XHRlbGVtZW50ID0gZWxlbWVudC5qcXVlcnkgPyBlbGVtZW50WzBdIDogZWxlbWVudDtcclxuXHJcblx0XHRcdGlmICggZWxlbWVudCAmJiBlbGVtZW50LmdldEF0dHJpYnV0ZSApIHtcclxuXHRcdFx0XHRkYXRhID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoIFwiZGF0YS1cIiArICQubW9iaWxlLm5zICsga2V5ICk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIENvcGllZCBmcm9tIGNvcmUncyBzcmMvZGF0YS5qczpkYXRhQXR0cigpXHJcblx0XHRcdC8vIENvbnZlcnQgZnJvbSBhIHN0cmluZyB0byBhIHByb3BlciBkYXRhIHR5cGVcclxuXHRcdFx0dHJ5IHtcclxuXHRcdFx0XHRkYXRhID0gZGF0YSA9PT0gXCJ0cnVlXCIgPyB0cnVlIDpcclxuXHRcdFx0XHRcdGRhdGEgPT09IFwiZmFsc2VcIiA/IGZhbHNlIDpcclxuXHRcdFx0XHRcdGRhdGEgPT09IFwibnVsbFwiID8gbnVsbCA6XHJcblx0XHRcdFx0XHQvLyBPbmx5IGNvbnZlcnQgdG8gYSBudW1iZXIgaWYgaXQgZG9lc24ndCBjaGFuZ2UgdGhlIHN0cmluZ1xyXG5cdFx0XHRcdFx0K2RhdGEgKyBcIlwiID09PSBkYXRhID8gK2RhdGEgOlxyXG5cdFx0XHRcdFx0cmJyYWNlLnRlc3QoIGRhdGEgKSA/IEpTT04ucGFyc2UoIGRhdGEgKSA6XHJcblx0XHRcdFx0XHRkYXRhO1xyXG5cdFx0XHR9IGNhdGNoKCBlcnIgKSB7fVxyXG5cclxuXHRcdFx0cmV0dXJuIGRhdGE7XHJcblx0XHR9LFxyXG5cclxuXHRcdC8vIEV4cG9zZSBvdXIgY2FjaGUgZm9yIHRlc3RpbmcgcHVycG9zZXMuXHJcblx0XHRuc05vcm1hbGl6ZURpY3Q6IG5zTm9ybWFsaXplRGljdCxcclxuXHJcblx0XHQvLyBUYWtlIGEgZGF0YSBhdHRyaWJ1dGUgcHJvcGVydHksIHByZXBlbmQgdGhlIG5hbWVzcGFjZVxyXG5cdFx0Ly8gYW5kIHRoZW4gY2FtZWwgY2FzZSB0aGUgYXR0cmlidXRlIHN0cmluZy4gQWRkIHRoZSByZXN1bHRcclxuXHRcdC8vIHRvIG91ciBuc05vcm1hbGl6ZURpY3Qgc28gd2UgZG9uJ3QgaGF2ZSB0byBkbyB0aGlzIGFnYWluLlxyXG5cdFx0bnNOb3JtYWxpemU6IGZ1bmN0aW9uKCBwcm9wICkge1xyXG5cdFx0XHRyZXR1cm4gbnNOb3JtYWxpemVEaWN0WyBwcm9wIF0gfHxcclxuXHRcdFx0XHQoIG5zTm9ybWFsaXplRGljdFsgcHJvcCBdID0gJC5jYW1lbENhc2UoICQubW9iaWxlLm5zICsgcHJvcCApICk7XHJcblx0XHR9LFxyXG5cclxuXHRcdC8vIEZpbmQgdGhlIGNsb3Nlc3QgamF2YXNjcmlwdCBwYWdlIGVsZW1lbnQgdG8gZ2F0aGVyIHNldHRpbmdzIGRhdGEganNwZXJmIHRlc3RcclxuXHRcdC8vIGh0dHA6Ly9qc3BlcmYuY29tL3NpbmdsZS1jb21wbGV4LXNlbGVjdG9yLXZzLW1hbnktY29tcGxleC1zZWxlY3RvcnMvZWRpdFxyXG5cdFx0Ly8gcG9zc2libHkgbmFpdmUsIGJ1dCBpdCBzaG93cyB0aGF0IHRoZSBwYXJzaW5nIG92ZXJoZWFkIGZvciAqanVzdCogdGhlIHBhZ2Ugc2VsZWN0b3IgdnNcclxuXHRcdC8vIHRoZSBwYWdlIGFuZCBkaWFsb2cgc2VsZWN0b3IgaXMgbmVnbGlnYWJsZS4gVGhpcyBjb3VsZCBwcm9iYWJseSBiZSBzcGVlZCB1cCBieVxyXG5cdFx0Ly8gZG9pbmcgYSBzaW1pbGFyIHBhcmVudCBub2RlIHRyYXZlcnNhbCB0byB0aGUgb25lIGZvdW5kIGluIHRoZSBpbmhlcml0ZWQgdGhlbWUgY29kZSBhYm92ZVxyXG5cdFx0Y2xvc2VzdFBhZ2VEYXRhOiBmdW5jdGlvbiggJHRhcmdldCApIHtcclxuXHRcdFx0cmV0dXJuICR0YXJnZXRcclxuXHRcdFx0XHQuY2xvc2VzdCggXCI6anFtRGF0YShyb2xlPSdwYWdlJyksIDpqcW1EYXRhKHJvbGU9J2RpYWxvZycpXCIgKVxyXG5cdFx0XHRcdC5kYXRhKCBcIm1vYmlsZS1wYWdlXCIgKTtcclxuXHRcdH1cclxuXHJcblx0fSk7XHJcblxyXG5cdC8vIE1vYmlsZSB2ZXJzaW9uIG9mIGRhdGEgYW5kIHJlbW92ZURhdGEgYW5kIGhhc0RhdGEgbWV0aG9kc1xyXG5cdC8vIGVuc3VyZXMgYWxsIGRhdGEgaXMgc2V0IGFuZCByZXRyaWV2ZWQgdXNpbmcgalF1ZXJ5IE1vYmlsZSdzIGRhdGEgbmFtZXNwYWNlXHJcblx0JC5mbi5qcW1EYXRhID0gZnVuY3Rpb24oIHByb3AsIHZhbHVlICkge1xyXG5cdFx0dmFyIHJlc3VsdDtcclxuXHRcdGlmICggdHlwZW9mIHByb3AgIT09IFwidW5kZWZpbmVkXCIgKSB7XHJcblx0XHRcdGlmICggcHJvcCApIHtcclxuXHRcdFx0XHRwcm9wID0gJC5tb2JpbGUubnNOb3JtYWxpemUoIHByb3AgKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gdW5kZWZpbmVkIGlzIHBlcm1pdHRlZCBhcyBhbiBleHBsaWNpdCBpbnB1dCBmb3IgdGhlIHNlY29uZCBwYXJhbVxyXG5cdFx0XHQvLyBpbiB0aGlzIGNhc2UgaXQgcmV0dXJucyB0aGUgdmFsdWUgYW5kIGRvZXMgbm90IHNldCBpdCB0byB1bmRlZmluZWRcclxuXHRcdFx0aWYgKCBhcmd1bWVudHMubGVuZ3RoIDwgMiB8fCB2YWx1ZSA9PT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRcdHJlc3VsdCA9IHRoaXMuZGF0YSggcHJvcCApO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdHJlc3VsdCA9IHRoaXMuZGF0YSggcHJvcCwgdmFsdWUgKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIHJlc3VsdDtcclxuXHR9O1xyXG5cclxuXHQkLmpxbURhdGEgPSBmdW5jdGlvbiggZWxlbSwgcHJvcCwgdmFsdWUgKSB7XHJcblx0XHR2YXIgcmVzdWx0O1xyXG5cdFx0aWYgKCB0eXBlb2YgcHJvcCAhPT0gXCJ1bmRlZmluZWRcIiApIHtcclxuXHRcdFx0cmVzdWx0ID0gJC5kYXRhKCBlbGVtLCBwcm9wID8gJC5tb2JpbGUubnNOb3JtYWxpemUoIHByb3AgKSA6IHByb3AsIHZhbHVlICk7XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gcmVzdWx0O1xyXG5cdH07XHJcblxyXG5cdCQuZm4uanFtUmVtb3ZlRGF0YSA9IGZ1bmN0aW9uKCBwcm9wICkge1xyXG5cdFx0cmV0dXJuIHRoaXMucmVtb3ZlRGF0YSggJC5tb2JpbGUubnNOb3JtYWxpemUoIHByb3AgKSApO1xyXG5cdH07XHJcblxyXG5cdCQuanFtUmVtb3ZlRGF0YSA9IGZ1bmN0aW9uKCBlbGVtLCBwcm9wICkge1xyXG5cdFx0cmV0dXJuICQucmVtb3ZlRGF0YSggZWxlbSwgJC5tb2JpbGUubnNOb3JtYWxpemUoIHByb3AgKSApO1xyXG5cdH07XHJcblxyXG5cdCQuZmluZCA9IGZ1bmN0aW9uKCBzZWxlY3RvciwgY29udGV4dCwgcmV0LCBleHRyYSApIHtcclxuXHRcdGlmICggc2VsZWN0b3IuaW5kZXhPZiggXCI6anFtRGF0YVwiICkgPiAtMSApIHtcclxuXHRcdFx0c2VsZWN0b3IgPSBzZWxlY3Rvci5yZXBsYWNlKCBqcW1EYXRhUkUsIFwiW2RhdGEtXCIgKyAoICQubW9iaWxlLm5zIHx8IFwiXCIgKSArIFwiJDFdXCIgKTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gb2xkRmluZC5jYWxsKCB0aGlzLCBzZWxlY3RvciwgY29udGV4dCwgcmV0LCBleHRyYSApO1xyXG5cdH07XHJcblxyXG5cdCQuZXh0ZW5kKCAkLmZpbmQsIG9sZEZpbmQgKTtcclxuXHJcbn0pKCBqUXVlcnksIHRoaXMgKTtcclxuXHJcbihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xyXG5cclxudmFyIHJjYXBpdGFscyA9IC9bQS1aXS9nLFxyXG5cdHJlcGxhY2VGdW5jdGlvbiA9IGZ1bmN0aW9uKCBjICkge1xyXG5cdFx0cmV0dXJuIFwiLVwiICsgYy50b0xvd2VyQ2FzZSgpO1xyXG5cdH07XHJcblxyXG4kLmV4dGVuZCggJC5XaWRnZXQucHJvdG90eXBlLCB7XHJcblx0X2dldENyZWF0ZU9wdGlvbnM6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIG9wdGlvbiwgdmFsdWUsXHJcblx0XHRcdGVsZW0gPSB0aGlzLmVsZW1lbnRbIDAgXSxcclxuXHRcdFx0b3B0aW9ucyA9IHt9O1xyXG5cclxuXHRcdC8vXHJcblx0XHRpZiAoICEkLm1vYmlsZS5nZXRBdHRyaWJ1dGUoIGVsZW0sIFwiZGVmYXVsdHNcIiApICkge1xyXG5cdFx0XHRmb3IgKCBvcHRpb24gaW4gdGhpcy5vcHRpb25zICkge1xyXG5cdFx0XHRcdHZhbHVlID0gJC5tb2JpbGUuZ2V0QXR0cmlidXRlKCBlbGVtLCBvcHRpb24ucmVwbGFjZSggcmNhcGl0YWxzLCByZXBsYWNlRnVuY3Rpb24gKSApO1xyXG5cclxuXHRcdFx0XHRpZiAoIHZhbHVlICE9IG51bGwgKSB7XHJcblx0XHRcdFx0XHRvcHRpb25zWyBvcHRpb24gXSA9IHZhbHVlO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiBvcHRpb25zO1xyXG5cdH1cclxufSk7XHJcblxyXG4vL1RPRE86IFJlbW92ZSBpbiAxLjUgZm9yIGJhY2tjb21wYXQgb25seVxyXG4kLm1vYmlsZS53aWRnZXQgPSAkLldpZGdldDtcclxuXHJcbn0pKCBqUXVlcnkgKTtcclxuXHJcblxyXG4oZnVuY3Rpb24oICQgKSB7XHJcblx0Ly8gVE9ETyBtb3ZlIGxvYWRlciBjbGFzcyBkb3duIGludG8gdGhlIHdpZGdldCBzZXR0aW5nc1xyXG5cdHZhciBsb2FkZXJDbGFzcyA9IFwidWktbG9hZGVyXCIsICRodG1sID0gJCggXCJodG1sXCIgKTtcclxuXHJcblx0JC53aWRnZXQoIFwibW9iaWxlLmxvYWRlclwiLCB7XHJcblx0XHQvLyBOT1RFIGlmIHRoZSBnbG9iYWwgY29uZmlnIHNldHRpbmdzIGFyZSBkZWZpbmVkIHRoZXkgd2lsbCBvdmVycmlkZSB0aGVzZVxyXG5cdFx0Ly8gICAgICBvcHRpb25zXHJcblx0XHRvcHRpb25zOiB7XHJcblx0XHRcdC8vIHRoZSB0aGVtZSBmb3IgdGhlIGxvYWRpbmcgbWVzc2FnZVxyXG5cdFx0XHR0aGVtZTogXCJhXCIsXHJcblxyXG5cdFx0XHQvLyB3aGV0aGVyIHRoZSB0ZXh0IGluIHRoZSBsb2FkaW5nIG1lc3NhZ2UgaXMgc2hvd25cclxuXHRcdFx0dGV4dFZpc2libGU6IGZhbHNlLFxyXG5cclxuXHRcdFx0Ly8gY3VzdG9tIGh0bWwgZm9yIHRoZSBpbm5lciBjb250ZW50IG9mIHRoZSBsb2FkaW5nIG1lc3NhZ2VcclxuXHRcdFx0aHRtbDogXCJcIixcclxuXHJcblx0XHRcdC8vIHRoZSB0ZXh0IHRvIGJlIGRpc3BsYXllZCB3aGVuIHRoZSBwb3B1cCBpcyBzaG93blxyXG5cdFx0XHR0ZXh0OiBcImxvYWRpbmdcIlxyXG5cdFx0fSxcclxuXHJcblx0XHRkZWZhdWx0SHRtbDogXCI8ZGl2IGNsYXNzPSdcIiArIGxvYWRlckNsYXNzICsgXCInPlwiICtcclxuXHRcdFx0XCI8c3BhbiBjbGFzcz0ndWktaWNvbi1sb2FkaW5nJz48L3NwYW4+XCIgK1xyXG5cdFx0XHRcIjxoMT48L2gxPlwiICtcclxuXHRcdFx0XCI8L2Rpdj5cIixcclxuXHJcblx0XHQvLyBGb3Igbm9uLWZpeGVkIHN1cHBvcnRpbiBicm93c2Vycy4gUG9zaXRpb24gYXQgeSBjZW50ZXIgKGlmIHNjcm9sbFRvcCBzdXBwb3J0ZWQpLCBhYm92ZSB0aGUgYWN0aXZlQnRuIChpZiBkZWZpbmVkKSwgb3IganVzdCAxMDBweCBmcm9tIHRvcFxyXG5cdFx0ZmFrZUZpeExvYWRlcjogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHZhciBhY3RpdmVCdG4gPSAkKCBcIi5cIiArICQubW9iaWxlLmFjdGl2ZUJ0bkNsYXNzICkuZmlyc3QoKTtcclxuXHJcblx0XHRcdHRoaXMuZWxlbWVudFxyXG5cdFx0XHRcdC5jc3Moe1xyXG5cdFx0XHRcdFx0dG9wOiAkLnN1cHBvcnQuc2Nyb2xsVG9wICYmIHRoaXMud2luZG93LnNjcm9sbFRvcCgpICsgdGhpcy53aW5kb3cuaGVpZ2h0KCkgLyAyIHx8XHJcblx0XHRcdFx0XHRcdGFjdGl2ZUJ0bi5sZW5ndGggJiYgYWN0aXZlQnRuLm9mZnNldCgpLnRvcCB8fCAxMDBcclxuXHRcdFx0XHR9KTtcclxuXHRcdH0sXHJcblxyXG5cdFx0Ly8gY2hlY2sgcG9zaXRpb24gb2YgbG9hZGVyIHRvIHNlZSBpZiBpdCBhcHBlYXJzIHRvIGJlIFwiZml4ZWRcIiB0byBjZW50ZXJcclxuXHRcdC8vIGlmIG5vdCwgdXNlIGFicyBwb3NpdGlvbmluZ1xyXG5cdFx0Y2hlY2tMb2FkZXJQb3NpdGlvbjogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHZhciBvZmZzZXQgPSB0aGlzLmVsZW1lbnQub2Zmc2V0KCksXHJcblx0XHRcdFx0c2Nyb2xsVG9wID0gdGhpcy53aW5kb3cuc2Nyb2xsVG9wKCksXHJcblx0XHRcdFx0c2NyZWVuSGVpZ2h0ID0gJC5tb2JpbGUuZ2V0U2NyZWVuSGVpZ2h0KCk7XHJcblxyXG5cdFx0XHRpZiAoIG9mZnNldC50b3AgPCBzY3JvbGxUb3AgfHwgKCBvZmZzZXQudG9wIC0gc2Nyb2xsVG9wICkgPiBzY3JlZW5IZWlnaHQgKSB7XHJcblx0XHRcdFx0dGhpcy5lbGVtZW50LmFkZENsYXNzKCBcInVpLWxvYWRlci1mYWtlZml4XCIgKTtcclxuXHRcdFx0XHR0aGlzLmZha2VGaXhMb2FkZXIoKTtcclxuXHRcdFx0XHR0aGlzLndpbmRvd1xyXG5cdFx0XHRcdFx0LnVuYmluZCggXCJzY3JvbGxcIiwgdGhpcy5jaGVja0xvYWRlclBvc2l0aW9uIClcclxuXHRcdFx0XHRcdC5iaW5kKCBcInNjcm9sbFwiLCAkLnByb3h5KCB0aGlzLmZha2VGaXhMb2FkZXIsIHRoaXMgKSApO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cclxuXHRcdHJlc2V0SHRtbDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHRoaXMuZWxlbWVudC5odG1sKCAkKCB0aGlzLmRlZmF1bHRIdG1sICkuaHRtbCgpICk7XHJcblx0XHR9LFxyXG5cclxuXHRcdC8vIFR1cm4gb24vb2ZmIHBhZ2UgbG9hZGluZyBtZXNzYWdlLiBUaGVtZSBkb3VibGVzIGFzIGFuIG9iamVjdCBhcmd1bWVudFxyXG5cdFx0Ly8gd2l0aCB0aGUgZm9sbG93aW5nIHNoYXBlOiB7IHRoZW1lOiAnJywgdGV4dDogJycsIGh0bWw6ICcnLCB0ZXh0VmlzaWJsZTogJycgfVxyXG5cdFx0Ly8gTk9URSB0aGF0IHRoZSAkLm1vYmlsZS5sb2FkaW5nKiBzZXR0aW5ncyBhbmQgcGFyYW1zIHBhc3QgdGhlIGZpcnN0IGFyZSBkZXByZWNhdGVkXHJcblx0XHQvLyBUT0RPIHN3ZWV0IGplc3VzIHdlIG5lZWQgdG8gYnJlYWsgc29tZSBvZiB0aGlzIG91dFxyXG5cdFx0c2hvdzogZnVuY3Rpb24oIHRoZW1lLCBtc2dUZXh0LCB0ZXh0b25seSApIHtcclxuXHRcdFx0dmFyIHRleHRWaXNpYmxlLCBtZXNzYWdlLCBsb2FkU2V0dGluZ3M7XHJcblxyXG5cdFx0XHR0aGlzLnJlc2V0SHRtbCgpO1xyXG5cclxuXHRcdFx0Ly8gdXNlIHRoZSBwcm90b3R5cGUgb3B0aW9ucyBzbyB0aGF0IHBlb3BsZSBjYW4gc2V0IHRoZW0gZ2xvYmFsbHkgYXRcclxuXHRcdFx0Ly8gbW9iaWxlIGluaXQuIENvbnNpc3RlbmN5LCBpdCdzIHdoYXQncyBmb3IgZGlubmVyXHJcblx0XHRcdGlmICggJC50eXBlKCB0aGVtZSApID09PSBcIm9iamVjdFwiICkge1xyXG5cdFx0XHRcdGxvYWRTZXR0aW5ncyA9ICQuZXh0ZW5kKCB7fSwgdGhpcy5vcHRpb25zLCB0aGVtZSApO1xyXG5cclxuXHRcdFx0XHR0aGVtZSA9IGxvYWRTZXR0aW5ncy50aGVtZTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRsb2FkU2V0dGluZ3MgPSB0aGlzLm9wdGlvbnM7XHJcblxyXG5cdFx0XHRcdC8vIGhlcmUgd2UgcHJlZmVyIHRoZSB0aGVtZSB2YWx1ZSBwYXNzZWQgYXMgYSBzdHJpbmcgYXJndW1lbnQsIHRoZW5cclxuXHRcdFx0XHQvLyB3ZSBwcmVmZXIgdGhlIGdsb2JhbCBvcHRpb24gYmVjYXVzZSB3ZSBjYW4ndCB1c2UgdW5kZWZpbmVkIGRlZmF1bHRcclxuXHRcdFx0XHQvLyBwcm90b3R5cGUgb3B0aW9ucywgdGhlbiB0aGUgcHJvdG90eXBlIG9wdGlvblxyXG5cdFx0XHRcdHRoZW1lID0gdGhlbWUgfHwgbG9hZFNldHRpbmdzLnRoZW1lO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBzZXQgdGhlIG1lc3NhZ2UgdGV4dCwgcHJlZmVyIHRoZSBwYXJhbSwgdGhlbiB0aGUgc2V0dGluZ3Mgb2JqZWN0XHJcblx0XHRcdC8vIHRoZW4gbG9hZGluZyBtZXNzYWdlXHJcblx0XHRcdG1lc3NhZ2UgPSBtc2dUZXh0IHx8ICggbG9hZFNldHRpbmdzLnRleHQgPT09IGZhbHNlID8gXCJcIiA6IGxvYWRTZXR0aW5ncy50ZXh0ICk7XHJcblxyXG5cdFx0XHQvLyBwcmVwYXJlIHRoZSBkb21cclxuXHRcdFx0JGh0bWwuYWRkQ2xhc3MoIFwidWktbG9hZGluZ1wiICk7XHJcblxyXG5cdFx0XHR0ZXh0VmlzaWJsZSA9IGxvYWRTZXR0aW5ncy50ZXh0VmlzaWJsZTtcclxuXHJcblx0XHRcdC8vIGFkZCB0aGUgcHJvcGVyIGNzcyBnaXZlbiB0aGUgb3B0aW9ucyAodGhlbWUsIHRleHQsIGV0YylcclxuXHRcdFx0Ly8gRm9yY2UgdGV4dCB2aXNpYmlsaXR5IGlmIHRoZSBzZWNvbmQgYXJndW1lbnQgd2FzIHN1cHBsaWVkLCBvclxyXG5cdFx0XHQvLyBpZiB0aGUgdGV4dCB3YXMgZXhwbGljaXRseSBzZXQgaW4gdGhlIG9iamVjdCBhcmdzXHJcblx0XHRcdHRoaXMuZWxlbWVudC5hdHRyKFwiY2xhc3NcIiwgbG9hZGVyQ2xhc3MgK1xyXG5cdFx0XHRcdFwiIHVpLWNvcm5lci1hbGwgdWktYm9keS1cIiArIHRoZW1lICtcclxuXHRcdFx0XHRcIiB1aS1sb2FkZXItXCIgKyAoIHRleHRWaXNpYmxlIHx8IG1zZ1RleHQgfHwgdGhlbWUudGV4dCA/IFwidmVyYm9zZVwiIDogXCJkZWZhdWx0XCIgKSArXHJcblx0XHRcdFx0KCBsb2FkU2V0dGluZ3MudGV4dG9ubHkgfHwgdGV4dG9ubHkgPyBcIiB1aS1sb2FkZXItdGV4dG9ubHlcIiA6IFwiXCIgKSApO1xyXG5cclxuXHRcdFx0Ly8gVE9ETyB2ZXJpZnkgdGhhdCBqcXVlcnkuZm4uaHRtbCBpcyBvayB0byB1c2UgaW4gYm90aCBjYXNlcyBoZXJlXHJcblx0XHRcdC8vICAgICAgdGhpcyBtaWdodCBiZSBvdmVybHkgZGVmZW5zaXZlIGluIHByZXZlbnRpbmcgdW5rbm93aW5nIHhzc1xyXG5cdFx0XHQvLyBpZiB0aGUgaHRtbCBhdHRyaWJ1dGUgaXMgZGVmaW5lZCBvbiB0aGUgbG9hZGluZyBzZXR0aW5ncywgdXNlIHRoYXRcclxuXHRcdFx0Ly8gb3RoZXJ3aXNlIHVzZSB0aGUgZmFsbGJhY2tzIGZyb20gYWJvdmVcclxuXHRcdFx0aWYgKCBsb2FkU2V0dGluZ3MuaHRtbCApIHtcclxuXHRcdFx0XHR0aGlzLmVsZW1lbnQuaHRtbCggbG9hZFNldHRpbmdzLmh0bWwgKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHR0aGlzLmVsZW1lbnQuZmluZCggXCJoMVwiICkudGV4dCggbWVzc2FnZSApO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBJZiB0aGUgcGFnZWNvbnRhaW5lciB3aWRnZXQgaGFzIGJlZW4gZGVmaW5lZCB3ZSBtYXkgdXNlIHRoZSA6bW9iaWxlLXBhZ2Vjb250YWluZXJcclxuXHRcdFx0Ly8gYW5kIGF0dGFjaCB0byB0aGUgZWxlbWVudCBvbiB3aGljaCB0aGUgcGFnZWNvbnRhaW5lciB3aWRnZXQgaGFzIGJlZW4gZGVmaW5lZC4gSWYgbm90LFxyXG5cdFx0XHQvLyB3ZSBhdHRhY2ggdG8gdGhlIGJvZHkuXHJcblx0XHRcdHRoaXMuZWxlbWVudC5hcHBlbmRUbyggJC5tb2JpbGUucGFnZWNvbnRhaW5lciA/XHJcblx0XHRcdFx0JCggXCI6bW9iaWxlLXBhZ2Vjb250YWluZXJcIiApIDogJCggXCJib2R5XCIgKSApO1xyXG5cclxuXHRcdFx0Ly8gY2hlY2sgdGhhdCB0aGUgbG9hZGVyIGlzIHZpc2libGVcclxuXHRcdFx0dGhpcy5jaGVja0xvYWRlclBvc2l0aW9uKCk7XHJcblxyXG5cdFx0XHQvLyBvbiBzY3JvbGwgY2hlY2sgdGhlIGxvYWRlciBwb3NpdGlvblxyXG5cdFx0XHR0aGlzLndpbmRvdy5iaW5kKCBcInNjcm9sbFwiLCAkLnByb3h5KCB0aGlzLmNoZWNrTG9hZGVyUG9zaXRpb24sIHRoaXMgKSApO1xyXG5cdFx0fSxcclxuXHJcblx0XHRoaWRlOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0JGh0bWwucmVtb3ZlQ2xhc3MoIFwidWktbG9hZGluZ1wiICk7XHJcblxyXG5cdFx0XHRpZiAoIHRoaXMub3B0aW9ucy50ZXh0ICkge1xyXG5cdFx0XHRcdHRoaXMuZWxlbWVudC5yZW1vdmVDbGFzcyggXCJ1aS1sb2FkZXItZmFrZWZpeFwiICk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHRoaXMud2luZG93LnVuYmluZCggXCJzY3JvbGxcIiwgdGhpcy5mYWtlRml4TG9hZGVyICk7XHJcblx0XHRcdHRoaXMud2luZG93LnVuYmluZCggXCJzY3JvbGxcIiwgdGhpcy5jaGVja0xvYWRlclBvc2l0aW9uICk7XHJcblx0XHR9XHJcblx0fSk7XHJcblxyXG59KShqUXVlcnksIHRoaXMpO1xyXG5cclxuXHJcbi8qIVxyXG4gKiBqUXVlcnkgaGFzaGNoYW5nZSBldmVudCAtIHYxLjMgLSA3LzIxLzIwMTBcclxuICogaHR0cDovL2JlbmFsbWFuLmNvbS9wcm9qZWN0cy9qcXVlcnktaGFzaGNoYW5nZS1wbHVnaW4vXHJcbiAqIFxyXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTAgXCJDb3dib3lcIiBCZW4gQWxtYW5cclxuICogRHVhbCBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGFuZCBHUEwgbGljZW5zZXMuXHJcbiAqIGh0dHA6Ly9iZW5hbG1hbi5jb20vYWJvdXQvbGljZW5zZS9cclxuICovXHJcblxyXG4vLyBTY3JpcHQ6IGpRdWVyeSBoYXNoY2hhbmdlIGV2ZW50XHJcbi8vXHJcbi8vICpWZXJzaW9uOiAxLjMsIExhc3QgdXBkYXRlZDogNy8yMS8yMDEwKlxyXG4vLyBcclxuLy8gUHJvamVjdCBIb21lIC0gaHR0cDovL2JlbmFsbWFuLmNvbS9wcm9qZWN0cy9qcXVlcnktaGFzaGNoYW5nZS1wbHVnaW4vXHJcbi8vIEdpdEh1YiAgICAgICAtIGh0dHA6Ly9naXRodWIuY29tL2Nvd2JveS9qcXVlcnktaGFzaGNoYW5nZS9cclxuLy8gU291cmNlICAgICAgIC0gaHR0cDovL2dpdGh1Yi5jb20vY293Ym95L2pxdWVyeS1oYXNoY2hhbmdlL3Jhdy9tYXN0ZXIvanF1ZXJ5LmJhLWhhc2hjaGFuZ2UuanNcclxuLy8gKE1pbmlmaWVkKSAgIC0gaHR0cDovL2dpdGh1Yi5jb20vY293Ym95L2pxdWVyeS1oYXNoY2hhbmdlL3Jhdy9tYXN0ZXIvanF1ZXJ5LmJhLWhhc2hjaGFuZ2UubWluLmpzICgwLjhrYiBnemlwcGVkKVxyXG4vLyBcclxuLy8gQWJvdXQ6IExpY2Vuc2VcclxuLy8gXHJcbi8vIENvcHlyaWdodCAoYykgMjAxMCBcIkNvd2JveVwiIEJlbiBBbG1hbixcclxuLy8gRHVhbCBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGFuZCBHUEwgbGljZW5zZXMuXHJcbi8vIGh0dHA6Ly9iZW5hbG1hbi5jb20vYWJvdXQvbGljZW5zZS9cclxuLy8gXHJcbi8vIEFib3V0OiBFeGFtcGxlc1xyXG4vLyBcclxuLy8gVGhlc2Ugd29ya2luZyBleGFtcGxlcywgY29tcGxldGUgd2l0aCBmdWxseSBjb21tZW50ZWQgY29kZSwgaWxsdXN0cmF0ZSBhIGZld1xyXG4vLyB3YXlzIGluIHdoaWNoIHRoaXMgcGx1Z2luIGNhbiBiZSB1c2VkLlxyXG4vLyBcclxuLy8gaGFzaGNoYW5nZSBldmVudCAtIGh0dHA6Ly9iZW5hbG1hbi5jb20vY29kZS9wcm9qZWN0cy9qcXVlcnktaGFzaGNoYW5nZS9leGFtcGxlcy9oYXNoY2hhbmdlL1xyXG4vLyBkb2N1bWVudC5kb21haW4gLSBodHRwOi8vYmVuYWxtYW4uY29tL2NvZGUvcHJvamVjdHMvanF1ZXJ5LWhhc2hjaGFuZ2UvZXhhbXBsZXMvZG9jdW1lbnRfZG9tYWluL1xyXG4vLyBcclxuLy8gQWJvdXQ6IFN1cHBvcnQgYW5kIFRlc3RpbmdcclxuLy8gXHJcbi8vIEluZm9ybWF0aW9uIGFib3V0IHdoYXQgdmVyc2lvbiBvciB2ZXJzaW9ucyBvZiBqUXVlcnkgdGhpcyBwbHVnaW4gaGFzIGJlZW5cclxuLy8gdGVzdGVkIHdpdGgsIHdoYXQgYnJvd3NlcnMgaXQgaGFzIGJlZW4gdGVzdGVkIGluLCBhbmQgd2hlcmUgdGhlIHVuaXQgdGVzdHNcclxuLy8gcmVzaWRlIChzbyB5b3UgY2FuIHRlc3QgaXQgeW91cnNlbGYpLlxyXG4vLyBcclxuLy8galF1ZXJ5IFZlcnNpb25zIC0gMS4yLjYsIDEuMy4yLCAxLjQuMSwgMS40LjJcclxuLy8gQnJvd3NlcnMgVGVzdGVkIC0gSW50ZXJuZXQgRXhwbG9yZXIgNi04LCBGaXJlZm94IDItNCwgQ2hyb21lIDUtNiwgU2FmYXJpIDMuMi01LFxyXG4vLyAgICAgICAgICAgICAgICAgICBPcGVyYSA5LjYtMTAuNjAsIGlQaG9uZSAzLjEsIEFuZHJvaWQgMS42LTIuMiwgQmxhY2tCZXJyeSA0LjYtNS5cclxuLy8gVW5pdCBUZXN0cyAgICAgIC0gaHR0cDovL2JlbmFsbWFuLmNvbS9jb2RlL3Byb2plY3RzL2pxdWVyeS1oYXNoY2hhbmdlL3VuaXQvXHJcbi8vIFxyXG4vLyBBYm91dDogS25vd24gaXNzdWVzXHJcbi8vIFxyXG4vLyBXaGlsZSB0aGlzIGpRdWVyeSBoYXNoY2hhbmdlIGV2ZW50IGltcGxlbWVudGF0aW9uIGlzIHF1aXRlIHN0YWJsZSBhbmRcclxuLy8gcm9idXN0LCB0aGVyZSBhcmUgYSBmZXcgdW5mb3J0dW5hdGUgYnJvd3NlciBidWdzIHN1cnJvdW5kaW5nIGV4cGVjdGVkXHJcbi8vIGhhc2hjaGFuZ2UgZXZlbnQtYmFzZWQgYmVoYXZpb3JzLCBpbmRlcGVuZGVudCBvZiBhbnkgSmF2YVNjcmlwdFxyXG4vLyB3aW5kb3cub25oYXNoY2hhbmdlIGFic3RyYWN0aW9uLiBTZWUgdGhlIGZvbGxvd2luZyBleGFtcGxlcyBmb3IgbW9yZVxyXG4vLyBpbmZvcm1hdGlvbjpcclxuLy8gXHJcbi8vIENocm9tZTogQmFjayBCdXR0b24gLSBodHRwOi8vYmVuYWxtYW4uY29tL2NvZGUvcHJvamVjdHMvanF1ZXJ5LWhhc2hjaGFuZ2UvZXhhbXBsZXMvYnVnLWNocm9tZS1iYWNrLWJ1dHRvbi9cclxuLy8gRmlyZWZveDogUmVtb3RlIFhNTEh0dHBSZXF1ZXN0IC0gaHR0cDovL2JlbmFsbWFuLmNvbS9jb2RlL3Byb2plY3RzL2pxdWVyeS1oYXNoY2hhbmdlL2V4YW1wbGVzL2J1Zy1maXJlZm94LXJlbW90ZS14aHIvXHJcbi8vIFdlYktpdDogQmFjayBCdXR0b24gaW4gYW4gSWZyYW1lIC0gaHR0cDovL2JlbmFsbWFuLmNvbS9jb2RlL3Byb2plY3RzL2pxdWVyeS1oYXNoY2hhbmdlL2V4YW1wbGVzL2J1Zy13ZWJraXQtaGFzaC1pZnJhbWUvXHJcbi8vIFNhZmFyaTogQmFjayBCdXR0b24gZnJvbSBhIGRpZmZlcmVudCBkb21haW4gLSBodHRwOi8vYmVuYWxtYW4uY29tL2NvZGUvcHJvamVjdHMvanF1ZXJ5LWhhc2hjaGFuZ2UvZXhhbXBsZXMvYnVnLXNhZmFyaS1iYWNrLWZyb20tZGlmZi1kb21haW4vXHJcbi8vIFxyXG4vLyBBbHNvIG5vdGUgdGhhdCBzaG91bGQgYSBicm93c2VyIG5hdGl2ZWx5IHN1cHBvcnQgdGhlIHdpbmRvdy5vbmhhc2hjaGFuZ2UgXHJcbi8vIGV2ZW50LCBidXQgbm90IHJlcG9ydCB0aGF0IGl0IGRvZXMsIHRoZSBmYWxsYmFjayBwb2xsaW5nIGxvb3Agd2lsbCBiZSB1c2VkLlxyXG4vLyBcclxuLy8gQWJvdXQ6IFJlbGVhc2UgSGlzdG9yeVxyXG4vLyBcclxuLy8gMS4zICAgLSAoNy8yMS8yMDEwKSBSZW9yZ2FuaXplZCBJRTYvNyBJZnJhbWUgY29kZSB0byBtYWtlIGl0IG1vcmVcclxuLy8gICAgICAgICBcInJlbW92YWJsZVwiIGZvciBtb2JpbGUtb25seSBkZXZlbG9wbWVudC4gQWRkZWQgSUU2LzcgZG9jdW1lbnQudGl0bGVcclxuLy8gICAgICAgICBzdXBwb3J0LiBBdHRlbXB0ZWQgdG8gbWFrZSBJZnJhbWUgYXMgaGlkZGVuIGFzIHBvc3NpYmxlIGJ5IHVzaW5nXHJcbi8vICAgICAgICAgdGVjaG5pcXVlcyBmcm9tIGh0dHA6Ly93d3cucGFjaWVsbG9ncm91cC5jb20vYmxvZy8/cD02MDQuIEFkZGVkIFxyXG4vLyAgICAgICAgIHN1cHBvcnQgZm9yIHRoZSBcInNob3J0Y3V0XCIgZm9ybWF0ICQod2luZG93KS5oYXNoY2hhbmdlKCBmbiApIGFuZFxyXG4vLyAgICAgICAgICQod2luZG93KS5oYXNoY2hhbmdlKCkgbGlrZSBqUXVlcnkgcHJvdmlkZXMgZm9yIGJ1aWx0LWluIGV2ZW50cy5cclxuLy8gICAgICAgICBSZW5hbWVkIGpRdWVyeS5oYXNoY2hhbmdlRGVsYXkgdG8gPGpRdWVyeS5mbi5oYXNoY2hhbmdlLmRlbGF5PiBhbmRcclxuLy8gICAgICAgICBsb3dlcmVkIGl0cyBkZWZhdWx0IHZhbHVlIHRvIDUwLiBBZGRlZCA8alF1ZXJ5LmZuLmhhc2hjaGFuZ2UuZG9tYWluPlxyXG4vLyAgICAgICAgIGFuZCA8alF1ZXJ5LmZuLmhhc2hjaGFuZ2Uuc3JjPiBwcm9wZXJ0aWVzIHBsdXMgZG9jdW1lbnQtZG9tYWluLmh0bWxcclxuLy8gICAgICAgICBmaWxlIHRvIGFkZHJlc3MgYWNjZXNzIGRlbmllZCBpc3N1ZXMgd2hlbiBzZXR0aW5nIGRvY3VtZW50LmRvbWFpbiBpblxyXG4vLyAgICAgICAgIElFNi83LlxyXG4vLyAxLjIgICAtICgyLzExLzIwMTApIEZpeGVkIGEgYnVnIHdoZXJlIGNvbWluZyBiYWNrIHRvIGEgcGFnZSB1c2luZyB0aGlzIHBsdWdpblxyXG4vLyAgICAgICAgIGZyb20gYSBwYWdlIG9uIGFub3RoZXIgZG9tYWluIHdvdWxkIGNhdXNlIGFuIGVycm9yIGluIFNhZmFyaSA0LiBBbHNvLFxyXG4vLyAgICAgICAgIElFNi83IElmcmFtZSBpcyBub3cgaW5zZXJ0ZWQgYWZ0ZXIgdGhlIGJvZHkgKHRoaXMgYWN0dWFsbHkgd29ya3MpLFxyXG4vLyAgICAgICAgIHdoaWNoIHByZXZlbnRzIHRoZSBwYWdlIGZyb20gc2Nyb2xsaW5nIHdoZW4gdGhlIGV2ZW50IGlzIGZpcnN0IGJvdW5kLlxyXG4vLyAgICAgICAgIEV2ZW50IGNhbiBhbHNvIG5vdyBiZSBib3VuZCBiZWZvcmUgRE9NIHJlYWR5LCBidXQgaXQgd29uJ3QgYmUgdXNhYmxlXHJcbi8vICAgICAgICAgYmVmb3JlIHRoZW4gaW4gSUU2LzcuXHJcbi8vIDEuMSAgIC0gKDEvMjEvMjAxMCkgSW5jb3Jwb3JhdGVkIGRvY3VtZW50LmRvY3VtZW50TW9kZSB0ZXN0IHRvIGZpeCBJRTggYnVnXHJcbi8vICAgICAgICAgd2hlcmUgYnJvd3NlciB2ZXJzaW9uIGlzIGluY29ycmVjdGx5IHJlcG9ydGVkIGFzIDguMCwgZGVzcGl0ZVxyXG4vLyAgICAgICAgIGluY2x1c2lvbiBvZiB0aGUgWC1VQS1Db21wYXRpYmxlIElFPUVtdWxhdGVJRTcgbWV0YSB0YWcuXHJcbi8vIDEuMCAgIC0gKDEvOS8yMDEwKSBJbml0aWFsIFJlbGVhc2UuIEJyb2tlIG91dCB0aGUgalF1ZXJ5IEJCUSBldmVudC5zcGVjaWFsXHJcbi8vICAgICAgICAgd2luZG93Lm9uaGFzaGNoYW5nZSBmdW5jdGlvbmFsaXR5IGludG8gYSBzZXBhcmF0ZSBwbHVnaW4gZm9yIHVzZXJzXHJcbi8vICAgICAgICAgd2hvIHdhbnQganVzdCB0aGUgYmFzaWMgZXZlbnQgJiBiYWNrIGJ1dHRvbiBzdXBwb3J0LCB3aXRob3V0IGFsbCB0aGVcclxuLy8gICAgICAgICBleHRyYSBhd2Vzb21lbmVzcyB0aGF0IEJCUSBwcm92aWRlcy4gVGhpcyBwbHVnaW4gd2lsbCBiZSBpbmNsdWRlZCBhc1xyXG4vLyAgICAgICAgIHBhcnQgb2YgalF1ZXJ5IEJCUSwgYnV0IGFsc28gYmUgYXZhaWxhYmxlIHNlcGFyYXRlbHkuXHJcblxyXG4oZnVuY3Rpb24oJCx3aW5kb3csdW5kZWZpbmVkKXtcclxuICAnJDpub211bmdlJzsgLy8gVXNlZCBieSBZVUkgY29tcHJlc3Nvci5cclxuICBcclxuICAvLyBSZXVzZWQgc3RyaW5nLlxyXG4gIHZhciBzdHJfaGFzaGNoYW5nZSA9ICdoYXNoY2hhbmdlJyxcclxuICAgIFxyXG4gICAgLy8gTWV0aG9kIC8gb2JqZWN0IHJlZmVyZW5jZXMuXHJcbiAgICBkb2MgPSBkb2N1bWVudCxcclxuICAgIGZha2Vfb25oYXNoY2hhbmdlLFxyXG4gICAgc3BlY2lhbCA9ICQuZXZlbnQuc3BlY2lhbCxcclxuICAgIFxyXG4gICAgLy8gRG9lcyB0aGUgYnJvd3NlciBzdXBwb3J0IHdpbmRvdy5vbmhhc2hjaGFuZ2U/IE5vdGUgdGhhdCBJRTggcnVubmluZyBpblxyXG4gICAgLy8gSUU3IGNvbXBhdGliaWxpdHkgbW9kZSByZXBvcnRzIHRydWUgZm9yICdvbmhhc2hjaGFuZ2UnIGluIHdpbmRvdywgZXZlblxyXG4gICAgLy8gdGhvdWdoIHRoZSBldmVudCBpc24ndCBzdXBwb3J0ZWQsIHNvIGFsc28gdGVzdCBkb2N1bWVudC5kb2N1bWVudE1vZGUuXHJcbiAgICBkb2NfbW9kZSA9IGRvYy5kb2N1bWVudE1vZGUsXHJcbiAgICBzdXBwb3J0c19vbmhhc2hjaGFuZ2UgPSAnb24nICsgc3RyX2hhc2hjaGFuZ2UgaW4gd2luZG93ICYmICggZG9jX21vZGUgPT09IHVuZGVmaW5lZCB8fCBkb2NfbW9kZSA+IDcgKTtcclxuICBcclxuICAvLyBHZXQgbG9jYXRpb24uaGFzaCAob3Igd2hhdCB5b3UnZCBleHBlY3QgbG9jYXRpb24uaGFzaCB0byBiZSkgc2FucyBhbnlcclxuICAvLyBsZWFkaW5nICMuIFRoYW5rcyBmb3IgbWFraW5nIHRoaXMgbmVjZXNzYXJ5LCBGaXJlZm94IVxyXG4gIGZ1bmN0aW9uIGdldF9mcmFnbWVudCggdXJsICkge1xyXG4gICAgdXJsID0gdXJsIHx8IGxvY2F0aW9uLmhyZWY7XHJcbiAgICByZXR1cm4gJyMnICsgdXJsLnJlcGxhY2UoIC9eW14jXSojPyguKikkLywgJyQxJyApO1xyXG4gIH07XHJcbiAgXHJcbiAgLy8gTWV0aG9kOiBqUXVlcnkuZm4uaGFzaGNoYW5nZVxyXG4gIC8vIFxyXG4gIC8vIEJpbmQgYSBoYW5kbGVyIHRvIHRoZSB3aW5kb3cub25oYXNoY2hhbmdlIGV2ZW50IG9yIHRyaWdnZXIgYWxsIGJvdW5kXHJcbiAgLy8gd2luZG93Lm9uaGFzaGNoYW5nZSBldmVudCBoYW5kbGVycy4gVGhpcyBiZWhhdmlvciBpcyBjb25zaXN0ZW50IHdpdGhcclxuICAvLyBqUXVlcnkncyBidWlsdC1pbiBldmVudCBoYW5kbGVycy5cclxuICAvLyBcclxuICAvLyBVc2FnZTpcclxuICAvLyBcclxuICAvLyA+IGpRdWVyeSh3aW5kb3cpLmhhc2hjaGFuZ2UoIFsgaGFuZGxlciBdICk7XHJcbiAgLy8gXHJcbiAgLy8gQXJndW1lbnRzOlxyXG4gIC8vIFxyXG4gIC8vICBoYW5kbGVyIC0gKEZ1bmN0aW9uKSBPcHRpb25hbCBoYW5kbGVyIHRvIGJlIGJvdW5kIHRvIHRoZSBoYXNoY2hhbmdlXHJcbiAgLy8gICAgZXZlbnQuIFRoaXMgaXMgYSBcInNob3J0Y3V0XCIgZm9yIHRoZSBtb3JlIHZlcmJvc2UgZm9ybTpcclxuICAvLyAgICBqUXVlcnkod2luZG93KS5iaW5kKCAnaGFzaGNoYW5nZScsIGhhbmRsZXIgKS4gSWYgaGFuZGxlciBpcyBvbWl0dGVkLFxyXG4gIC8vICAgIGFsbCBib3VuZCB3aW5kb3cub25oYXNoY2hhbmdlIGV2ZW50IGhhbmRsZXJzIHdpbGwgYmUgdHJpZ2dlcmVkLiBUaGlzXHJcbiAgLy8gICAgaXMgYSBzaG9ydGN1dCBmb3IgdGhlIG1vcmUgdmVyYm9zZVxyXG4gIC8vICAgIGpRdWVyeSh3aW5kb3cpLnRyaWdnZXIoICdoYXNoY2hhbmdlJyApLiBUaGVzZSBmb3JtcyBhcmUgZGVzY3JpYmVkIGluXHJcbiAgLy8gICAgdGhlIDxoYXNoY2hhbmdlIGV2ZW50PiBzZWN0aW9uLlxyXG4gIC8vIFxyXG4gIC8vIFJldHVybnM6XHJcbiAgLy8gXHJcbiAgLy8gIChqUXVlcnkpIFRoZSBpbml0aWFsIGpRdWVyeSBjb2xsZWN0aW9uIG9mIGVsZW1lbnRzLlxyXG4gIFxyXG4gIC8vIEFsbG93IHRoZSBcInNob3J0Y3V0XCIgZm9ybWF0ICQoZWxlbSkuaGFzaGNoYW5nZSggZm4gKSBmb3IgYmluZGluZyBhbmRcclxuICAvLyAkKGVsZW0pLmhhc2hjaGFuZ2UoKSBmb3IgdHJpZ2dlcmluZywgbGlrZSBqUXVlcnkgZG9lcyBmb3IgYnVpbHQtaW4gZXZlbnRzLlxyXG4gICQuZm5bIHN0cl9oYXNoY2hhbmdlIF0gPSBmdW5jdGlvbiggZm4gKSB7XHJcbiAgICByZXR1cm4gZm4gPyB0aGlzLmJpbmQoIHN0cl9oYXNoY2hhbmdlLCBmbiApIDogdGhpcy50cmlnZ2VyKCBzdHJfaGFzaGNoYW5nZSApO1xyXG4gIH07XHJcbiAgXHJcbiAgLy8gUHJvcGVydHk6IGpRdWVyeS5mbi5oYXNoY2hhbmdlLmRlbGF5XHJcbiAgLy8gXHJcbiAgLy8gVGhlIG51bWVyaWMgaW50ZXJ2YWwgKGluIG1pbGxpc2Vjb25kcykgYXQgd2hpY2ggdGhlIDxoYXNoY2hhbmdlIGV2ZW50PlxyXG4gIC8vIHBvbGxpbmcgbG9vcCBleGVjdXRlcy4gRGVmYXVsdHMgdG8gNTAuXHJcbiAgXHJcbiAgLy8gUHJvcGVydHk6IGpRdWVyeS5mbi5oYXNoY2hhbmdlLmRvbWFpblxyXG4gIC8vIFxyXG4gIC8vIElmIHlvdSdyZSBzZXR0aW5nIGRvY3VtZW50LmRvbWFpbiBpbiB5b3VyIEphdmFTY3JpcHQsIGFuZCB5b3Ugd2FudCBoYXNoXHJcbiAgLy8gaGlzdG9yeSB0byB3b3JrIGluIElFNi83LCBub3Qgb25seSBtdXN0IHRoaXMgcHJvcGVydHkgYmUgc2V0LCBidXQgeW91IG11c3RcclxuICAvLyBhbHNvIHNldCBkb2N1bWVudC5kb21haW4gQkVGT1JFIGpRdWVyeSBpcyBsb2FkZWQgaW50byB0aGUgcGFnZS4gVGhpc1xyXG4gIC8vIHByb3BlcnR5IGlzIG9ubHkgYXBwbGljYWJsZSBpZiB5b3UgYXJlIHN1cHBvcnRpbmcgSUU2LzcgKG9yIElFOCBvcGVyYXRpbmdcclxuICAvLyBpbiBcIklFNyBjb21wYXRpYmlsaXR5XCIgbW9kZSkuXHJcbiAgLy8gXHJcbiAgLy8gSW4gYWRkaXRpb24sIHRoZSA8alF1ZXJ5LmZuLmhhc2hjaGFuZ2Uuc3JjPiBwcm9wZXJ0eSBtdXN0IGJlIHNldCB0byB0aGVcclxuICAvLyBwYXRoIG9mIHRoZSBpbmNsdWRlZCBcImRvY3VtZW50LWRvbWFpbi5odG1sXCIgZmlsZSwgd2hpY2ggY2FuIGJlIHJlbmFtZWQgb3JcclxuICAvLyBtb2RpZmllZCBpZiBuZWNlc3NhcnkgKG5vdGUgdGhhdCB0aGUgZG9jdW1lbnQuZG9tYWluIHNwZWNpZmllZCBtdXN0IGJlIHRoZVxyXG4gIC8vIHNhbWUgaW4gYm90aCB5b3VyIG1haW4gSmF2YVNjcmlwdCBhcyB3ZWxsIGFzIGluIHRoaXMgZmlsZSkuXHJcbiAgLy8gXHJcbiAgLy8gVXNhZ2U6XHJcbiAgLy8gXHJcbiAgLy8galF1ZXJ5LmZuLmhhc2hjaGFuZ2UuZG9tYWluID0gZG9jdW1lbnQuZG9tYWluO1xyXG4gIFxyXG4gIC8vIFByb3BlcnR5OiBqUXVlcnkuZm4uaGFzaGNoYW5nZS5zcmNcclxuICAvLyBcclxuICAvLyBJZiwgZm9yIHNvbWUgcmVhc29uLCB5b3UgbmVlZCB0byBzcGVjaWZ5IGFuIElmcmFtZSBzcmMgZmlsZSAoZm9yIGV4YW1wbGUsXHJcbiAgLy8gd2hlbiBzZXR0aW5nIGRvY3VtZW50LmRvbWFpbiBhcyBpbiA8alF1ZXJ5LmZuLmhhc2hjaGFuZ2UuZG9tYWluPiksIHlvdSBjYW5cclxuICAvLyBkbyBzbyB1c2luZyB0aGlzIHByb3BlcnR5LiBOb3RlIHRoYXQgd2hlbiB1c2luZyB0aGlzIHByb3BlcnR5LCBoaXN0b3J5XHJcbiAgLy8gd29uJ3QgYmUgcmVjb3JkZWQgaW4gSUU2LzcgdW50aWwgdGhlIElmcmFtZSBzcmMgZmlsZSBsb2Fkcy4gVGhpcyBwcm9wZXJ0eVxyXG4gIC8vIGlzIG9ubHkgYXBwbGljYWJsZSBpZiB5b3UgYXJlIHN1cHBvcnRpbmcgSUU2LzcgKG9yIElFOCBvcGVyYXRpbmcgaW4gXCJJRTdcclxuICAvLyBjb21wYXRpYmlsaXR5XCIgbW9kZSkuXHJcbiAgLy8gXHJcbiAgLy8gVXNhZ2U6XHJcbiAgLy8gXHJcbiAgLy8galF1ZXJ5LmZuLmhhc2hjaGFuZ2Uuc3JjID0gJ3BhdGgvdG8vZmlsZS5odG1sJztcclxuICBcclxuICAkLmZuWyBzdHJfaGFzaGNoYW5nZSBdLmRlbGF5ID0gNTA7XHJcbiAgLypcclxuICAkLmZuWyBzdHJfaGFzaGNoYW5nZSBdLmRvbWFpbiA9IG51bGw7XHJcbiAgJC5mblsgc3RyX2hhc2hjaGFuZ2UgXS5zcmMgPSBudWxsO1xyXG4gICovXHJcbiAgXHJcbiAgLy8gRXZlbnQ6IGhhc2hjaGFuZ2UgZXZlbnRcclxuICAvLyBcclxuICAvLyBGaXJlZCB3aGVuIGxvY2F0aW9uLmhhc2ggY2hhbmdlcy4gSW4gYnJvd3NlcnMgdGhhdCBzdXBwb3J0IGl0LCB0aGUgbmF0aXZlXHJcbiAgLy8gSFRNTDUgd2luZG93Lm9uaGFzaGNoYW5nZSBldmVudCBpcyB1c2VkLCBvdGhlcndpc2UgYSBwb2xsaW5nIGxvb3AgaXNcclxuICAvLyBpbml0aWFsaXplZCwgcnVubmluZyBldmVyeSA8alF1ZXJ5LmZuLmhhc2hjaGFuZ2UuZGVsYXk+IG1pbGxpc2Vjb25kcyB0b1xyXG4gIC8vIHNlZSBpZiB0aGUgaGFzaCBoYXMgY2hhbmdlZC4gSW4gSUU2LzcgKGFuZCBJRTggb3BlcmF0aW5nIGluIFwiSUU3XHJcbiAgLy8gY29tcGF0aWJpbGl0eVwiIG1vZGUpLCBhIGhpZGRlbiBJZnJhbWUgaXMgY3JlYXRlZCB0byBhbGxvdyB0aGUgYmFjayBidXR0b25cclxuICAvLyBhbmQgaGFzaC1iYXNlZCBoaXN0b3J5IHRvIHdvcmsuXHJcbiAgLy8gXHJcbiAgLy8gVXNhZ2UgYXMgZGVzY3JpYmVkIGluIDxqUXVlcnkuZm4uaGFzaGNoYW5nZT46XHJcbiAgLy8gXHJcbiAgLy8gPiAvLyBCaW5kIGFuIGV2ZW50IGhhbmRsZXIuXHJcbiAgLy8gPiBqUXVlcnkod2luZG93KS5oYXNoY2hhbmdlKCBmdW5jdGlvbihlKSB7XHJcbiAgLy8gPiAgIHZhciBoYXNoID0gbG9jYXRpb24uaGFzaDtcclxuICAvLyA+ICAgLi4uXHJcbiAgLy8gPiB9KTtcclxuICAvLyA+IFxyXG4gIC8vID4gLy8gTWFudWFsbHkgdHJpZ2dlciB0aGUgZXZlbnQgaGFuZGxlci5cclxuICAvLyA+IGpRdWVyeSh3aW5kb3cpLmhhc2hjaGFuZ2UoKTtcclxuICAvLyBcclxuICAvLyBBIG1vcmUgdmVyYm9zZSB1c2FnZSB0aGF0IGFsbG93cyBmb3IgZXZlbnQgbmFtZXNwYWNpbmc6XHJcbiAgLy8gXHJcbiAgLy8gPiAvLyBCaW5kIGFuIGV2ZW50IGhhbmRsZXIuXHJcbiAgLy8gPiBqUXVlcnkod2luZG93KS5iaW5kKCAnaGFzaGNoYW5nZScsIGZ1bmN0aW9uKGUpIHtcclxuICAvLyA+ICAgdmFyIGhhc2ggPSBsb2NhdGlvbi5oYXNoO1xyXG4gIC8vID4gICAuLi5cclxuICAvLyA+IH0pO1xyXG4gIC8vID4gXHJcbiAgLy8gPiAvLyBNYW51YWxseSB0cmlnZ2VyIHRoZSBldmVudCBoYW5kbGVyLlxyXG4gIC8vID4galF1ZXJ5KHdpbmRvdykudHJpZ2dlciggJ2hhc2hjaGFuZ2UnICk7XHJcbiAgLy8gXHJcbiAgLy8gQWRkaXRpb25hbCBOb3RlczpcclxuICAvLyBcclxuICAvLyAqIFRoZSBwb2xsaW5nIGxvb3AgYW5kIElmcmFtZSBhcmUgbm90IGNyZWF0ZWQgdW50aWwgYXQgbGVhc3Qgb25lIGhhbmRsZXJcclxuICAvLyAgIGlzIGFjdHVhbGx5IGJvdW5kIHRvIHRoZSAnaGFzaGNoYW5nZScgZXZlbnQuXHJcbiAgLy8gKiBJZiB5b3UgbmVlZCB0aGUgYm91bmQgaGFuZGxlcihzKSB0byBleGVjdXRlIGltbWVkaWF0ZWx5LCBpbiBjYXNlcyB3aGVyZVxyXG4gIC8vICAgYSBsb2NhdGlvbi5oYXNoIGV4aXN0cyBvbiBwYWdlIGxvYWQsIHZpYSBib29rbWFyayBvciBwYWdlIHJlZnJlc2ggZm9yXHJcbiAgLy8gICBleGFtcGxlLCB1c2UgalF1ZXJ5KHdpbmRvdykuaGFzaGNoYW5nZSgpIG9yIHRoZSBtb3JlIHZlcmJvc2UgXHJcbiAgLy8gICBqUXVlcnkod2luZG93KS50cmlnZ2VyKCAnaGFzaGNoYW5nZScgKS5cclxuICAvLyAqIFRoZSBldmVudCBjYW4gYmUgYm91bmQgYmVmb3JlIERPTSByZWFkeSwgYnV0IHNpbmNlIGl0IHdvbid0IGJlIHVzYWJsZVxyXG4gIC8vICAgYmVmb3JlIHRoZW4gaW4gSUU2LzcgKGR1ZSB0byB0aGUgbmVjZXNzYXJ5IElmcmFtZSksIHJlY29tbWVuZGVkIHVzYWdlIGlzXHJcbiAgLy8gICB0byBiaW5kIGl0IGluc2lkZSBhIERPTSByZWFkeSBoYW5kbGVyLlxyXG4gIFxyXG4gIC8vIE92ZXJyaWRlIGV4aXN0aW5nICQuZXZlbnQuc3BlY2lhbC5oYXNoY2hhbmdlIG1ldGhvZHMgKGFsbG93aW5nIHRoaXMgcGx1Z2luXHJcbiAgLy8gdG8gYmUgZGVmaW5lZCBhZnRlciBqUXVlcnkgQkJRIGluIEJCUSdzIHNvdXJjZSBjb2RlKS5cclxuICBzcGVjaWFsWyBzdHJfaGFzaGNoYW5nZSBdID0gJC5leHRlbmQoIHNwZWNpYWxbIHN0cl9oYXNoY2hhbmdlIF0sIHtcclxuICAgIFxyXG4gICAgLy8gQ2FsbGVkIG9ubHkgd2hlbiB0aGUgZmlyc3QgJ2hhc2hjaGFuZ2UnIGV2ZW50IGlzIGJvdW5kIHRvIHdpbmRvdy5cclxuICAgIHNldHVwOiBmdW5jdGlvbigpIHtcclxuICAgICAgLy8gSWYgd2luZG93Lm9uaGFzaGNoYW5nZSBpcyBzdXBwb3J0ZWQgbmF0aXZlbHksIHRoZXJlJ3Mgbm90aGluZyB0byBkby4uXHJcbiAgICAgIGlmICggc3VwcG9ydHNfb25oYXNoY2hhbmdlICkgeyByZXR1cm4gZmFsc2U7IH1cclxuICAgICAgXHJcbiAgICAgIC8vIE90aGVyd2lzZSwgd2UgbmVlZCB0byBjcmVhdGUgb3VyIG93bi4gQW5kIHdlIGRvbid0IHdhbnQgdG8gY2FsbCB0aGlzXHJcbiAgICAgIC8vIHVudGlsIHRoZSB1c2VyIGJpbmRzIHRvIHRoZSBldmVudCwganVzdCBpbiBjYXNlIHRoZXkgbmV2ZXIgZG8sIHNpbmNlIGl0XHJcbiAgICAgIC8vIHdpbGwgY3JlYXRlIGEgcG9sbGluZyBsb29wIGFuZCBwb3NzaWJseSBldmVuIGEgaGlkZGVuIElmcmFtZS5cclxuICAgICAgJCggZmFrZV9vbmhhc2hjaGFuZ2Uuc3RhcnQgKTtcclxuICAgIH0sXHJcbiAgICBcclxuICAgIC8vIENhbGxlZCBvbmx5IHdoZW4gdGhlIGxhc3QgJ2hhc2hjaGFuZ2UnIGV2ZW50IGlzIHVuYm91bmQgZnJvbSB3aW5kb3cuXHJcbiAgICB0ZWFyZG93bjogZnVuY3Rpb24oKSB7XHJcbiAgICAgIC8vIElmIHdpbmRvdy5vbmhhc2hjaGFuZ2UgaXMgc3VwcG9ydGVkIG5hdGl2ZWx5LCB0aGVyZSdzIG5vdGhpbmcgdG8gZG8uLlxyXG4gICAgICBpZiAoIHN1cHBvcnRzX29uaGFzaGNoYW5nZSApIHsgcmV0dXJuIGZhbHNlOyB9XHJcbiAgICAgIFxyXG4gICAgICAvLyBPdGhlcndpc2UsIHdlIG5lZWQgdG8gc3RvcCBvdXJzIChpZiBwb3NzaWJsZSkuXHJcbiAgICAgICQoIGZha2Vfb25oYXNoY2hhbmdlLnN0b3AgKTtcclxuICAgIH1cclxuICAgIFxyXG4gIH0pO1xyXG4gIFxyXG4gIC8vIGZha2Vfb25oYXNoY2hhbmdlIGRvZXMgYWxsIHRoZSB3b3JrIG9mIHRyaWdnZXJpbmcgdGhlIHdpbmRvdy5vbmhhc2hjaGFuZ2VcclxuICAvLyBldmVudCBmb3IgYnJvd3NlcnMgdGhhdCBkb24ndCBuYXRpdmVseSBzdXBwb3J0IGl0LCBpbmNsdWRpbmcgY3JlYXRpbmcgYVxyXG4gIC8vIHBvbGxpbmcgbG9vcCB0byB3YXRjaCBmb3IgaGFzaCBjaGFuZ2VzIGFuZCBpbiBJRSA2LzcgY3JlYXRpbmcgYSBoaWRkZW5cclxuICAvLyBJZnJhbWUgdG8gZW5hYmxlIGJhY2sgYW5kIGZvcndhcmQuXHJcbiAgZmFrZV9vbmhhc2hjaGFuZ2UgPSAoZnVuY3Rpb24oKXtcclxuICAgIHZhciBzZWxmID0ge30sXHJcbiAgICAgIHRpbWVvdXRfaWQsXHJcbiAgICAgIFxyXG4gICAgICAvLyBSZW1lbWJlciB0aGUgaW5pdGlhbCBoYXNoIHNvIGl0IGRvZXNuJ3QgZ2V0IHRyaWdnZXJlZCBpbW1lZGlhdGVseS5cclxuICAgICAgbGFzdF9oYXNoID0gZ2V0X2ZyYWdtZW50KCksXHJcbiAgICAgIFxyXG4gICAgICBmbl9yZXR2YWwgPSBmdW5jdGlvbih2YWwpeyByZXR1cm4gdmFsOyB9LFxyXG4gICAgICBoaXN0b3J5X3NldCA9IGZuX3JldHZhbCxcclxuICAgICAgaGlzdG9yeV9nZXQgPSBmbl9yZXR2YWw7XHJcbiAgICBcclxuICAgIC8vIFN0YXJ0IHRoZSBwb2xsaW5nIGxvb3AuXHJcbiAgICBzZWxmLnN0YXJ0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgIHRpbWVvdXRfaWQgfHwgcG9sbCgpO1xyXG4gICAgfTtcclxuICAgIFxyXG4gICAgLy8gU3RvcCB0aGUgcG9sbGluZyBsb29wLlxyXG4gICAgc2VsZi5zdG9wID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgIHRpbWVvdXRfaWQgJiYgY2xlYXJUaW1lb3V0KCB0aW1lb3V0X2lkICk7XHJcbiAgICAgIHRpbWVvdXRfaWQgPSB1bmRlZmluZWQ7XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICAvLyBUaGlzIHBvbGxpbmcgbG9vcCBjaGVja3MgZXZlcnkgJC5mbi5oYXNoY2hhbmdlLmRlbGF5IG1pbGxpc2Vjb25kcyB0byBzZWVcclxuICAgIC8vIGlmIGxvY2F0aW9uLmhhc2ggaGFzIGNoYW5nZWQsIGFuZCB0cmlnZ2VycyB0aGUgJ2hhc2hjaGFuZ2UnIGV2ZW50IG9uXHJcbiAgICAvLyB3aW5kb3cgd2hlbiBuZWNlc3NhcnkuXHJcbiAgICBmdW5jdGlvbiBwb2xsKCkge1xyXG4gICAgICB2YXIgaGFzaCA9IGdldF9mcmFnbWVudCgpLFxyXG4gICAgICAgIGhpc3RvcnlfaGFzaCA9IGhpc3RvcnlfZ2V0KCBsYXN0X2hhc2ggKTtcclxuICAgICAgXHJcbiAgICAgIGlmICggaGFzaCAhPT0gbGFzdF9oYXNoICkge1xyXG4gICAgICAgIGhpc3Rvcnlfc2V0KCBsYXN0X2hhc2ggPSBoYXNoLCBoaXN0b3J5X2hhc2ggKTtcclxuICAgICAgICBcclxuICAgICAgICAkKHdpbmRvdykudHJpZ2dlciggc3RyX2hhc2hjaGFuZ2UgKTtcclxuICAgICAgICBcclxuICAgICAgfSBlbHNlIGlmICggaGlzdG9yeV9oYXNoICE9PSBsYXN0X2hhc2ggKSB7XHJcbiAgICAgICAgbG9jYXRpb24uaHJlZiA9IGxvY2F0aW9uLmhyZWYucmVwbGFjZSggLyMuKi8sICcnICkgKyBoaXN0b3J5X2hhc2g7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIHRpbWVvdXRfaWQgPSBzZXRUaW1lb3V0KCBwb2xsLCAkLmZuWyBzdHJfaGFzaGNoYW5nZSBdLmRlbGF5ICk7XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICAvLyB2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZcclxuICAgIC8vIHZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnYgUkVNT1ZFIElGIE5PVCBTVVBQT1JUSU5HIElFNi83LzggdnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dlxyXG4gICAgLy8gdnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2XHJcbiAgICB3aW5kb3cuYXR0YWNoRXZlbnQgJiYgIXdpbmRvdy5hZGRFdmVudExpc3RlbmVyICYmICFzdXBwb3J0c19vbmhhc2hjaGFuZ2UgJiYgKGZ1bmN0aW9uKCl7XHJcbiAgICAgIC8vIE5vdCBvbmx5IGRvIElFNi83IG5lZWQgdGhlIFwibWFnaWNhbFwiIElmcmFtZSB0cmVhdG1lbnQsIGJ1dCBzbyBkb2VzIElFOFxyXG4gICAgICAvLyB3aGVuIHJ1bm5pbmcgaW4gXCJJRTcgY29tcGF0aWJpbGl0eVwiIG1vZGUuXHJcbiAgICAgIFxyXG4gICAgICB2YXIgaWZyYW1lLFxyXG4gICAgICAgIGlmcmFtZV9zcmM7XHJcbiAgICAgIFxyXG4gICAgICAvLyBXaGVuIHRoZSBldmVudCBpcyBib3VuZCBhbmQgcG9sbGluZyBzdGFydHMgaW4gSUUgNi83LCBjcmVhdGUgYSBoaWRkZW5cclxuICAgICAgLy8gSWZyYW1lIGZvciBoaXN0b3J5IGhhbmRsaW5nLlxyXG4gICAgICBzZWxmLnN0YXJ0ID0gZnVuY3Rpb24oKXtcclxuICAgICAgICBpZiAoICFpZnJhbWUgKSB7XHJcbiAgICAgICAgICBpZnJhbWVfc3JjID0gJC5mblsgc3RyX2hhc2hjaGFuZ2UgXS5zcmM7XHJcbiAgICAgICAgICBpZnJhbWVfc3JjID0gaWZyYW1lX3NyYyAmJiBpZnJhbWVfc3JjICsgZ2V0X2ZyYWdtZW50KCk7XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIC8vIENyZWF0ZSBoaWRkZW4gSWZyYW1lLiBBdHRlbXB0IHRvIG1ha2UgSWZyYW1lIGFzIGhpZGRlbiBhcyBwb3NzaWJsZVxyXG4gICAgICAgICAgLy8gYnkgdXNpbmcgdGVjaG5pcXVlcyBmcm9tIGh0dHA6Ly93d3cucGFjaWVsbG9ncm91cC5jb20vYmxvZy8/cD02MDQuXHJcbiAgICAgICAgICBpZnJhbWUgPSAkKCc8aWZyYW1lIHRhYmluZGV4PVwiLTFcIiB0aXRsZT1cImVtcHR5XCIvPicpLmhpZGUoKVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gV2hlbiBJZnJhbWUgaGFzIGNvbXBsZXRlbHkgbG9hZGVkLCBpbml0aWFsaXplIHRoZSBoaXN0b3J5IGFuZFxyXG4gICAgICAgICAgICAvLyBzdGFydCBwb2xsaW5nLlxyXG4gICAgICAgICAgICAub25lKCAnbG9hZCcsIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgaWZyYW1lX3NyYyB8fCBoaXN0b3J5X3NldCggZ2V0X2ZyYWdtZW50KCkgKTtcclxuICAgICAgICAgICAgICBwb2xsKCk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBMb2FkIElmcmFtZSBzcmMgaWYgc3BlY2lmaWVkLCBvdGhlcndpc2Ugbm90aGluZy5cclxuICAgICAgICAgICAgLmF0dHIoICdzcmMnLCBpZnJhbWVfc3JjIHx8ICdqYXZhc2NyaXB0OjAnIClcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIEFwcGVuZCBJZnJhbWUgYWZ0ZXIgdGhlIGVuZCBvZiB0aGUgYm9keSB0byBwcmV2ZW50IHVubmVjZXNzYXJ5XHJcbiAgICAgICAgICAgIC8vIGluaXRpYWwgcGFnZSBzY3JvbGxpbmcgKHllcywgdGhpcyB3b3JrcykuXHJcbiAgICAgICAgICAgIC5pbnNlcnRBZnRlciggJ2JvZHknIClbMF0uY29udGVudFdpbmRvdztcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgLy8gV2hlbmV2ZXIgYGRvY3VtZW50LnRpdGxlYCBjaGFuZ2VzLCB1cGRhdGUgdGhlIElmcmFtZSdzIHRpdGxlIHRvXHJcbiAgICAgICAgICAvLyBwcmV0dGlmeSB0aGUgYmFjay9uZXh0IGhpc3RvcnkgbWVudSBlbnRyaWVzLiBTaW5jZSBJRSBzb21ldGltZXNcclxuICAgICAgICAgIC8vIGVycm9ycyB3aXRoIFwiVW5zcGVjaWZpZWQgZXJyb3JcIiB0aGUgdmVyeSBmaXJzdCB0aW1lIHRoaXMgaXMgc2V0XHJcbiAgICAgICAgICAvLyAoeWVzLCB2ZXJ5IHVzZWZ1bCkgd3JhcCB0aGlzIHdpdGggYSB0cnkvY2F0Y2ggYmxvY2suXHJcbiAgICAgICAgICBkb2Mub25wcm9wZXJ0eWNoYW5nZSA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgaWYgKCBldmVudC5wcm9wZXJ0eU5hbWUgPT09ICd0aXRsZScgKSB7XHJcbiAgICAgICAgICAgICAgICBpZnJhbWUuZG9jdW1lbnQudGl0bGUgPSBkb2MudGl0bGU7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGNhdGNoKGUpIHt9XHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgfVxyXG4gICAgICB9O1xyXG4gICAgICBcclxuICAgICAgLy8gT3ZlcnJpZGUgdGhlIFwic3RvcFwiIG1ldGhvZCBzaW5jZSBhbiBJRTYvNyBJZnJhbWUgd2FzIGNyZWF0ZWQuIEV2ZW5cclxuICAgICAgLy8gaWYgdGhlcmUgYXJlIG5vIGxvbmdlciBhbnkgYm91bmQgZXZlbnQgaGFuZGxlcnMsIHRoZSBwb2xsaW5nIGxvb3BcclxuICAgICAgLy8gaXMgc3RpbGwgbmVjZXNzYXJ5IGZvciBiYWNrL25leHQgdG8gd29yayBhdCBhbGwhXHJcbiAgICAgIHNlbGYuc3RvcCA9IGZuX3JldHZhbDtcclxuICAgICAgXHJcbiAgICAgIC8vIEdldCBoaXN0b3J5IGJ5IGxvb2tpbmcgYXQgdGhlIGhpZGRlbiBJZnJhbWUncyBsb2NhdGlvbi5oYXNoLlxyXG4gICAgICBoaXN0b3J5X2dldCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiBnZXRfZnJhZ21lbnQoIGlmcmFtZS5sb2NhdGlvbi5ocmVmICk7XHJcbiAgICAgIH07XHJcbiAgICAgIFxyXG4gICAgICAvLyBTZXQgYSBuZXcgaGlzdG9yeSBpdGVtIGJ5IG9wZW5pbmcgYW5kIHRoZW4gY2xvc2luZyB0aGUgSWZyYW1lXHJcbiAgICAgIC8vIGRvY3VtZW50LCAqdGhlbiogc2V0dGluZyBpdHMgbG9jYXRpb24uaGFzaC4gSWYgZG9jdW1lbnQuZG9tYWluIGhhc1xyXG4gICAgICAvLyBiZWVuIHNldCwgdXBkYXRlIHRoYXQgYXMgd2VsbC5cclxuICAgICAgaGlzdG9yeV9zZXQgPSBmdW5jdGlvbiggaGFzaCwgaGlzdG9yeV9oYXNoICkge1xyXG4gICAgICAgIHZhciBpZnJhbWVfZG9jID0gaWZyYW1lLmRvY3VtZW50LFxyXG4gICAgICAgICAgZG9tYWluID0gJC5mblsgc3RyX2hhc2hjaGFuZ2UgXS5kb21haW47XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKCBoYXNoICE9PSBoaXN0b3J5X2hhc2ggKSB7XHJcbiAgICAgICAgICAvLyBVcGRhdGUgSWZyYW1lIHdpdGggYW55IGluaXRpYWwgYGRvY3VtZW50LnRpdGxlYCB0aGF0IG1pZ2h0IGJlIHNldC5cclxuICAgICAgICAgIGlmcmFtZV9kb2MudGl0bGUgPSBkb2MudGl0bGU7XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIC8vIE9wZW5pbmcgdGhlIElmcmFtZSdzIGRvY3VtZW50IGFmdGVyIGl0IGhhcyBiZWVuIGNsb3NlZCBpcyB3aGF0XHJcbiAgICAgICAgICAvLyBhY3R1YWxseSBhZGRzIGEgaGlzdG9yeSBlbnRyeS5cclxuICAgICAgICAgIGlmcmFtZV9kb2Mub3BlbigpO1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICAvLyBTZXQgZG9jdW1lbnQuZG9tYWluIGZvciB0aGUgSWZyYW1lIGRvY3VtZW50IGFzIHdlbGwsIGlmIG5lY2Vzc2FyeS5cclxuICAgICAgICAgIGRvbWFpbiAmJiBpZnJhbWVfZG9jLndyaXRlKCAnXFx4M2NzY3JpcHQ+ZG9jdW1lbnQuZG9tYWluPVwiJyArIGRvbWFpbiArICdcIlxceDNjL3NjcmlwdD4nICk7XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIGlmcmFtZV9kb2MuY2xvc2UoKTtcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgLy8gVXBkYXRlIHRoZSBJZnJhbWUncyBoYXNoLCBmb3IgZ3JlYXQganVzdGljZS5cclxuICAgICAgICAgIGlmcmFtZS5sb2NhdGlvbi5oYXNoID0gaGFzaDtcclxuICAgICAgICB9XHJcbiAgICAgIH07XHJcbiAgICAgIFxyXG4gICAgfSkoKTtcclxuICAgIC8vIF5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXlxyXG4gICAgLy8gXl5eXl5eXl5eXl5eXl5eXl5eXiBSRU1PVkUgSUYgTk9UIFNVUFBPUlRJTkcgSUU2LzcvOCBeXl5eXl5eXl5eXl5eXl5eXl5eXHJcbiAgICAvLyBeXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5cclxuICAgIFxyXG4gICAgcmV0dXJuIHNlbGY7XHJcbiAgfSkoKTtcclxuICBcclxufSkoalF1ZXJ5LHRoaXMpO1xyXG5cclxuXHJcbihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xyXG5cclxuXHQvKiEgbWF0Y2hNZWRpYSgpIHBvbHlmaWxsIC0gVGVzdCBhIENTUyBtZWRpYSB0eXBlL3F1ZXJ5IGluIEpTLiBBdXRob3JzICYgY29weXJpZ2h0IChjKSAyMDEyOiBTY290dCBKZWhsLCBQYXVsIElyaXNoLCBOaWNob2xhcyBaYWthcy4gRHVhbCBNSVQvQlNEIGxpY2Vuc2UgKi9cclxuXHR3aW5kb3cubWF0Y2hNZWRpYSA9IHdpbmRvdy5tYXRjaE1lZGlhIHx8IChmdW5jdGlvbiggZG9jLCB1bmRlZmluZWQgKSB7XHJcblxyXG5cdFx0dmFyIGJvb2wsXHJcblx0XHRcdGRvY0VsZW0gPSBkb2MuZG9jdW1lbnRFbGVtZW50LFxyXG5cdFx0XHRyZWZOb2RlID0gZG9jRWxlbS5maXJzdEVsZW1lbnRDaGlsZCB8fCBkb2NFbGVtLmZpcnN0Q2hpbGQsXHJcblx0XHRcdC8vIGZha2VCb2R5IHJlcXVpcmVkIGZvciA8RkY0IHdoZW4gZXhlY3V0ZWQgaW4gPGhlYWQ+XHJcblx0XHRcdGZha2VCb2R5ID0gZG9jLmNyZWF0ZUVsZW1lbnQoIFwiYm9keVwiICksXHJcblx0XHRcdGRpdiA9IGRvYy5jcmVhdGVFbGVtZW50KCBcImRpdlwiICk7XHJcblxyXG5cdFx0ZGl2LmlkID0gXCJtcS10ZXN0LTFcIjtcclxuXHRcdGRpdi5zdHlsZS5jc3NUZXh0ID0gXCJwb3NpdGlvbjphYnNvbHV0ZTt0b3A6LTEwMGVtXCI7XHJcblx0XHRmYWtlQm9keS5zdHlsZS5iYWNrZ3JvdW5kID0gXCJub25lXCI7XHJcblx0XHRmYWtlQm9keS5hcHBlbmRDaGlsZChkaXYpO1xyXG5cclxuXHRcdHJldHVybiBmdW5jdGlvbihxKXtcclxuXHJcblx0XHRcdGRpdi5pbm5lckhUTUwgPSBcIiZzaHk7PHN0eWxlIG1lZGlhPVxcXCJcIiArIHEgKyBcIlxcXCI+ICNtcS10ZXN0LTEgeyB3aWR0aDogNDJweDsgfTwvc3R5bGU+XCI7XHJcblxyXG5cdFx0XHRkb2NFbGVtLmluc2VydEJlZm9yZSggZmFrZUJvZHksIHJlZk5vZGUgKTtcclxuXHRcdFx0Ym9vbCA9IGRpdi5vZmZzZXRXaWR0aCA9PT0gNDI7XHJcblx0XHRcdGRvY0VsZW0ucmVtb3ZlQ2hpbGQoIGZha2VCb2R5ICk7XHJcblxyXG5cdFx0XHRyZXR1cm4ge1xyXG5cdFx0XHRcdG1hdGNoZXM6IGJvb2wsXHJcblx0XHRcdFx0bWVkaWE6IHFcclxuXHRcdFx0fTtcclxuXHJcblx0XHR9O1xyXG5cclxuXHR9KCBkb2N1bWVudCApKTtcclxuXHJcblx0Ly8gJC5tb2JpbGUubWVkaWEgdXNlcyBtYXRjaE1lZGlhIHRvIHJldHVybiBhIGJvb2xlYW4uXHJcblx0JC5tb2JpbGUubWVkaWEgPSBmdW5jdGlvbiggcSApIHtcclxuXHRcdHJldHVybiB3aW5kb3cubWF0Y2hNZWRpYSggcSApLm1hdGNoZXM7XHJcblx0fTtcclxuXHJcbn0pKGpRdWVyeSk7XHJcblxyXG5cdChmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xyXG5cdFx0dmFyIHN1cHBvcnQgPSB7XHJcblx0XHRcdHRvdWNoOiBcIm9udG91Y2hlbmRcIiBpbiBkb2N1bWVudFxyXG5cdFx0fTtcclxuXHJcblx0XHQkLm1vYmlsZS5zdXBwb3J0ID0gJC5tb2JpbGUuc3VwcG9ydCB8fCB7fTtcclxuXHRcdCQuZXh0ZW5kKCAkLnN1cHBvcnQsIHN1cHBvcnQgKTtcclxuXHRcdCQuZXh0ZW5kKCAkLm1vYmlsZS5zdXBwb3J0LCBzdXBwb3J0ICk7XHJcblx0fSggalF1ZXJ5ICkpO1xyXG5cclxuXHQoZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcclxuXHRcdCQuZXh0ZW5kKCAkLnN1cHBvcnQsIHtcclxuXHRcdFx0b3JpZW50YXRpb246IFwib3JpZW50YXRpb25cIiBpbiB3aW5kb3cgJiYgXCJvbm9yaWVudGF0aW9uY2hhbmdlXCIgaW4gd2luZG93XHJcblx0XHR9KTtcclxuXHR9KCBqUXVlcnkgKSk7XHJcblxyXG4oZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcclxuXHJcbi8vIHRoeCBNb2Rlcm5penJcclxuZnVuY3Rpb24gcHJvcEV4aXN0cyggcHJvcCApIHtcclxuXHR2YXIgdWNfcHJvcCA9IHByb3AuY2hhckF0KCAwICkudG9VcHBlckNhc2UoKSArIHByb3Auc3Vic3RyKCAxICksXHJcblx0XHRwcm9wcyA9ICggcHJvcCArIFwiIFwiICsgdmVuZG9ycy5qb2luKCB1Y19wcm9wICsgXCIgXCIgKSArIHVjX3Byb3AgKS5zcGxpdCggXCIgXCIgKSxcclxuXHRcdHY7XHJcblxyXG5cdGZvciAoIHYgaW4gcHJvcHMgKSB7XHJcblx0XHRpZiAoIGZiQ1NTWyBwcm9wc1sgdiBdIF0gIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHR9XHJcblx0fVxyXG59XHJcblxyXG52YXIgZmFrZUJvZHkgPSAkKCBcIjxib2R5PlwiICkucHJlcGVuZFRvKCBcImh0bWxcIiApLFxyXG5cdGZiQ1NTID0gZmFrZUJvZHlbIDAgXS5zdHlsZSxcclxuXHR2ZW5kb3JzID0gWyBcIldlYmtpdFwiLCBcIk1velwiLCBcIk9cIiBdLFxyXG5cdHdlYm9zID0gXCJwYWxtR2V0UmVzb3VyY2VcIiBpbiB3aW5kb3csIC8vb25seSB1c2VkIHRvIHJ1bGUgb3V0IHNjcm9sbFRvcFxyXG5cdG9wZXJhbWluaSA9IHdpbmRvdy5vcGVyYW1pbmkgJiYgKHt9KS50b1N0cmluZy5jYWxsKCB3aW5kb3cub3BlcmFtaW5pICkgPT09IFwiW29iamVjdCBPcGVyYU1pbmldXCIsXHJcblx0YmIgPSB3aW5kb3cuYmxhY2tiZXJyeSAmJiAhcHJvcEV4aXN0cyggXCItd2Via2l0LXRyYW5zZm9ybVwiICksIC8vb25seSB1c2VkIHRvIHJ1bGUgb3V0IGJveCBzaGFkb3csIGFzIGl0J3MgZmlsbGVkIG9wYXF1ZSBvbiBCQiA1IGFuZCBsb3dlclxyXG5cdG5va2lhTFRFN18zO1xyXG5cclxuLy8gaW5saW5lIFNWRyBzdXBwb3J0IHRlc3RcclxuZnVuY3Rpb24gaW5saW5lU1ZHKCkge1xyXG5cdC8vIFRoYW5rcyBNb2Rlcm5penIgJiBFcmlrIERhaGxzdHJvbVxyXG5cdHZhciB3ID0gd2luZG93LFxyXG5cdFx0c3ZnID0gISF3LmRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyAmJiAhIXcuZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCBcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsIFwic3ZnXCIgKS5jcmVhdGVTVkdSZWN0ICYmICEoIHcub3BlcmEgJiYgbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCBcIkNocm9tZVwiICkgPT09IC0xICksXHJcblx0XHRzdXBwb3J0ID0gZnVuY3Rpb24oIGRhdGEgKSB7XHJcblx0XHRcdGlmICggISggZGF0YSAmJiBzdmcgKSApIHtcclxuXHRcdFx0XHQkKCBcImh0bWxcIiApLmFkZENsYXNzKCBcInVpLW5vc3ZnXCIgKTtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHRcdGltZyA9IG5ldyB3LkltYWdlKCk7XHJcblxyXG5cdGltZy5vbmVycm9yID0gZnVuY3Rpb24oKSB7XHJcblx0XHRzdXBwb3J0KCBmYWxzZSApO1xyXG5cdH07XHJcblx0aW1nLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0c3VwcG9ydCggaW1nLndpZHRoID09PSAxICYmIGltZy5oZWlnaHQgPT09IDEgKTtcclxuXHR9O1xyXG5cdGltZy5zcmMgPSBcImRhdGE6aW1hZ2UvZ2lmO2Jhc2U2NCxSMGxHT0RsaEFRQUJBSUFBQUFBQUFQLy8veXdBQUFBQUFRQUJBQUFDQVV3QU93PT1cIjtcclxufVxyXG5cclxuZnVuY3Rpb24gdHJhbnNmb3JtM2RUZXN0KCkge1xyXG5cdHZhciBtcVByb3AgPSBcInRyYW5zZm9ybS0zZFwiLFxyXG5cdFx0Ly8gQmVjYXVzZSB0aGUgYHRyYW5zbGF0ZTNkYCB0ZXN0IGJlbG93IHRocm93cyBmYWxzZSBwb3NpdGl2ZXMgaW4gQW5kcm9pZDpcclxuXHRcdHJldCA9ICQubW9iaWxlLm1lZGlhKCBcIigtXCIgKyB2ZW5kb3JzLmpvaW4oIFwiLVwiICsgbXFQcm9wICsgXCIpLCgtXCIgKSArIFwiLVwiICsgbXFQcm9wICsgXCIpLChcIiArIG1xUHJvcCArIFwiKVwiICksXHJcblx0XHRlbCwgdHJhbnNmb3JtcywgdDtcclxuXHJcblx0aWYgKCByZXQgKSB7XHJcblx0XHRyZXR1cm4gISFyZXQ7XHJcblx0fVxyXG5cclxuXHRlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwiZGl2XCIgKTtcclxuXHR0cmFuc2Zvcm1zID0ge1xyXG5cdFx0Ly8gV2XigJlyZSBvbWl0dGluZyBPcGVyYSBmb3IgdGhlIHRpbWUgYmVpbmc7IE1TIHVzZXMgdW5wcmVmaXhlZC5cclxuXHRcdFwiTW96VHJhbnNmb3JtXCI6IFwiLW1vei10cmFuc2Zvcm1cIixcclxuXHRcdFwidHJhbnNmb3JtXCI6IFwidHJhbnNmb3JtXCJcclxuXHR9O1xyXG5cclxuXHRmYWtlQm9keS5hcHBlbmQoIGVsICk7XHJcblxyXG5cdGZvciAoIHQgaW4gdHJhbnNmb3JtcyApIHtcclxuXHRcdGlmICggZWwuc3R5bGVbIHQgXSAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRlbC5zdHlsZVsgdCBdID0gXCJ0cmFuc2xhdGUzZCggMTAwcHgsIDFweCwgMXB4IClcIjtcclxuXHRcdFx0cmV0ID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoIGVsICkuZ2V0UHJvcGVydHlWYWx1ZSggdHJhbnNmb3Jtc1sgdCBdICk7XHJcblx0XHR9XHJcblx0fVxyXG5cdHJldHVybiAoICEhcmV0ICYmIHJldCAhPT0gXCJub25lXCIgKTtcclxufVxyXG5cclxuLy8gVGVzdCBmb3IgZHluYW1pYy11cGRhdGluZyBiYXNlIHRhZyBzdXBwb3J0ICggYWxsb3dzIHVzIHRvIGF2b2lkIGhyZWYsc3JjIGF0dHIgcmV3cml0aW5nIClcclxuZnVuY3Rpb24gYmFzZVRhZ1Rlc3QoKSB7XHJcblx0dmFyIGZhdXhCYXNlID0gbG9jYXRpb24ucHJvdG9jb2wgKyBcIi8vXCIgKyBsb2NhdGlvbi5ob3N0ICsgbG9jYXRpb24ucGF0aG5hbWUgKyBcInVpLWRpci9cIixcclxuXHRcdGJhc2UgPSAkKCBcImhlYWQgYmFzZVwiICksXHJcblx0XHRmYXV4RWxlID0gbnVsbCxcclxuXHRcdGhyZWYgPSBcIlwiLFxyXG5cdFx0bGluaywgcmViYXNlO1xyXG5cclxuXHRpZiAoICFiYXNlLmxlbmd0aCApIHtcclxuXHRcdGJhc2UgPSBmYXV4RWxlID0gJCggXCI8YmFzZT5cIiwgeyBcImhyZWZcIjogZmF1eEJhc2UgfSkuYXBwZW5kVG8oIFwiaGVhZFwiICk7XHJcblx0fSBlbHNlIHtcclxuXHRcdGhyZWYgPSBiYXNlLmF0dHIoIFwiaHJlZlwiICk7XHJcblx0fVxyXG5cclxuXHRsaW5rID0gJCggXCI8YSBocmVmPSd0ZXN0dXJsJyAvPlwiICkucHJlcGVuZFRvKCBmYWtlQm9keSApO1xyXG5cdHJlYmFzZSA9IGxpbmtbIDAgXS5ocmVmO1xyXG5cdGJhc2VbIDAgXS5ocmVmID0gaHJlZiB8fCBsb2NhdGlvbi5wYXRobmFtZTtcclxuXHJcblx0aWYgKCBmYXV4RWxlICkge1xyXG5cdFx0ZmF1eEVsZS5yZW1vdmUoKTtcclxuXHR9XHJcblx0cmV0dXJuIHJlYmFzZS5pbmRleE9mKCBmYXV4QmFzZSApID09PSAwO1xyXG59XHJcblxyXG4vLyBUaGFua3MgTW9kZXJuaXpyXHJcbmZ1bmN0aW9uIGNzc1BvaW50ZXJFdmVudHNUZXN0KCkge1xyXG5cdHZhciBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJ4XCIgKSxcclxuXHRcdGRvY3VtZW50RWxlbWVudCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCxcclxuXHRcdGdldENvbXB1dGVkU3R5bGUgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSxcclxuXHRcdHN1cHBvcnRzO1xyXG5cclxuXHRpZiAoICEoIFwicG9pbnRlckV2ZW50c1wiIGluIGVsZW1lbnQuc3R5bGUgKSApIHtcclxuXHRcdHJldHVybiBmYWxzZTtcclxuXHR9XHJcblxyXG5cdGVsZW1lbnQuc3R5bGUucG9pbnRlckV2ZW50cyA9IFwiYXV0b1wiO1xyXG5cdGVsZW1lbnQuc3R5bGUucG9pbnRlckV2ZW50cyA9IFwieFwiO1xyXG5cdGRvY3VtZW50RWxlbWVudC5hcHBlbmRDaGlsZCggZWxlbWVudCApO1xyXG5cdHN1cHBvcnRzID0gZ2V0Q29tcHV0ZWRTdHlsZSAmJlxyXG5cdGdldENvbXB1dGVkU3R5bGUoIGVsZW1lbnQsIFwiXCIgKS5wb2ludGVyRXZlbnRzID09PSBcImF1dG9cIjtcclxuXHRkb2N1bWVudEVsZW1lbnQucmVtb3ZlQ2hpbGQoIGVsZW1lbnQgKTtcclxuXHRyZXR1cm4gISFzdXBwb3J0cztcclxufVxyXG5cclxuZnVuY3Rpb24gYm91bmRpbmdSZWN0KCkge1xyXG5cdHZhciBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcImRpdlwiICk7XHJcblx0cmV0dXJuIHR5cGVvZiBkaXYuZ2V0Qm91bmRpbmdDbGllbnRSZWN0ICE9PSBcInVuZGVmaW5lZFwiO1xyXG59XHJcblxyXG4vLyBub24tVUEtYmFzZWQgSUUgdmVyc2lvbiBjaGVjayBieSBKYW1lcyBQYWRvbHNleSwgbW9kaWZpZWQgYnkgamRhbHRvbiAtIGZyb20gaHR0cDovL2dpc3QuZ2l0aHViLmNvbS81Mjc2ODNcclxuLy8gYWxsb3dzIGZvciBpbmNsdXNpb24gb2YgSUUgNissIGluY2x1ZGluZyBXaW5kb3dzIE1vYmlsZSA3XHJcbiQuZXh0ZW5kKCAkLm1vYmlsZSwgeyBicm93c2VyOiB7fSB9ICk7XHJcbiQubW9iaWxlLmJyb3dzZXIub2xkSUUgPSAoZnVuY3Rpb24oKSB7XHJcblx0dmFyIHYgPSAzLFxyXG5cdFx0ZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJkaXZcIiApLFxyXG5cdFx0YSA9IGRpdi5hbGwgfHwgW107XHJcblxyXG5cdGRvIHtcclxuXHRcdGRpdi5pbm5lckhUTUwgPSBcIjwhLS1baWYgZ3QgSUUgXCIgKyAoICsrdiApICsgXCJdPjxicj48IVtlbmRpZl0tLT5cIjtcclxuXHR9IHdoaWxlKCBhWzBdICk7XHJcblxyXG5cdHJldHVybiB2ID4gNCA/IHYgOiAhdjtcclxufSkoKTtcclxuXHJcbmZ1bmN0aW9uIGZpeGVkUG9zaXRpb24oKSB7XHJcblx0dmFyIHcgPSB3aW5kb3csXHJcblx0XHR1YSA9IG5hdmlnYXRvci51c2VyQWdlbnQsXHJcblx0XHRwbGF0Zm9ybSA9IG5hdmlnYXRvci5wbGF0Zm9ybSxcclxuXHRcdC8vIFJlbmRlcmluZyBlbmdpbmUgaXMgV2Via2l0LCBhbmQgY2FwdHVyZSBtYWpvciB2ZXJzaW9uXHJcblx0XHR3a21hdGNoID0gdWEubWF0Y2goIC9BcHBsZVdlYktpdFxcLyhbMC05XSspLyApLFxyXG5cdFx0d2t2ZXJzaW9uID0gISF3a21hdGNoICYmIHdrbWF0Y2hbIDEgXSxcclxuXHRcdGZmbWF0Y2ggPSB1YS5tYXRjaCggL0Zlbm5lY1xcLyhbMC05XSspLyApLFxyXG5cdFx0ZmZ2ZXJzaW9uID0gISFmZm1hdGNoICYmIGZmbWF0Y2hbIDEgXSxcclxuXHRcdG9wZXJhbW1vYmlsZW1hdGNoID0gdWEubWF0Y2goIC9PcGVyYSBNb2JpXFwvKFswLTldKykvICksXHJcblx0XHRvbXZlcnNpb24gPSAhIW9wZXJhbW1vYmlsZW1hdGNoICYmIG9wZXJhbW1vYmlsZW1hdGNoWyAxIF07XHJcblxyXG5cdGlmIChcclxuXHRcdC8vIGlPUyA0LjMgYW5kIG9sZGVyIDogUGxhdGZvcm0gaXMgaVBob25lL1BhZC9Ub3VjaCBhbmQgV2Via2l0IHZlcnNpb24gaXMgbGVzcyB0aGFuIDUzNCAoaW9zNSlcclxuXHRcdCggKCBwbGF0Zm9ybS5pbmRleE9mKCBcImlQaG9uZVwiICkgPiAtMSB8fCBwbGF0Zm9ybS5pbmRleE9mKCBcImlQYWRcIiApID4gLTEgIHx8IHBsYXRmb3JtLmluZGV4T2YoIFwiaVBvZFwiICkgPiAtMSApICYmIHdrdmVyc2lvbiAmJiB3a3ZlcnNpb24gPCA1MzQgKSB8fFxyXG5cdFx0Ly8gT3BlcmEgTWluaVxyXG5cdFx0KCB3Lm9wZXJhbWluaSAmJiAoe30pLnRvU3RyaW5nLmNhbGwoIHcub3BlcmFtaW5pICkgPT09IFwiW29iamVjdCBPcGVyYU1pbmldXCIgKSB8fFxyXG5cdFx0KCBvcGVyYW1tb2JpbGVtYXRjaCAmJiBvbXZlcnNpb24gPCA3NDU4IClcdHx8XHJcblx0XHQvL0FuZHJvaWQgbHRlIDIuMTogUGxhdGZvcm0gaXMgQW5kcm9pZCBhbmQgV2Via2l0IHZlcnNpb24gaXMgbGVzcyB0aGFuIDUzMyAoQW5kcm9pZCAyLjIpXHJcblx0XHQoIHVhLmluZGV4T2YoIFwiQW5kcm9pZFwiICkgPiAtMSAmJiB3a3ZlcnNpb24gJiYgd2t2ZXJzaW9uIDwgNTMzICkgfHxcclxuXHRcdC8vIEZpcmVmb3ggTW9iaWxlIGJlZm9yZSA2LjAgLVxyXG5cdFx0KCBmZnZlcnNpb24gJiYgZmZ2ZXJzaW9uIDwgNiApIHx8XHJcblx0XHQvLyBXZWJPUyBsZXNzIHRoYW4gM1xyXG5cdFx0KCBcInBhbG1HZXRSZXNvdXJjZVwiIGluIHdpbmRvdyAmJiB3a3ZlcnNpb24gJiYgd2t2ZXJzaW9uIDwgNTM0IClcdHx8XHJcblx0XHQvLyBNZWVHb1xyXG5cdFx0KCB1YS5pbmRleE9mKCBcIk1lZUdvXCIgKSA+IC0xICYmIHVhLmluZGV4T2YoIFwiTm9raWFCcm93c2VyLzguNS4wXCIgKSA+IC0xICkgKSB7XHJcblx0XHRyZXR1cm4gZmFsc2U7XHJcblx0fVxyXG5cclxuXHRyZXR1cm4gdHJ1ZTtcclxufVxyXG5cclxuJC5leHRlbmQoICQuc3VwcG9ydCwge1xyXG5cdC8vIE5vdGUsIENocm9tZSBmb3IgaU9TIGhhcyBhbiBleHRyZW1lbHkgcXVpcmt5IGltcGxlbWVudGF0aW9uIG9mIHBvcHN0YXRlLlxyXG5cdC8vIFdlJ3ZlIGNob3NlbiB0byB0YWtlIHRoZSBzaG9ydGVzdCBwYXRoIHRvIGEgYnVnIGZpeCBoZXJlIGZvciBpc3N1ZSAjNTQyNlxyXG5cdC8vIFNlZSB0aGUgZm9sbG93aW5nIGxpbmsgZm9yIGluZm9ybWF0aW9uIGFib3V0IHRoZSByZWdleCBjaG9zZW5cclxuXHQvLyBodHRwczovL2RldmVsb3BlcnMuZ29vZ2xlLmNvbS9jaHJvbWUvbW9iaWxlL2RvY3MvdXNlci1hZ2VudCNjaHJvbWVfZm9yX2lvc191c2VyLWFnZW50XHJcblx0cHVzaFN0YXRlOiBcInB1c2hTdGF0ZVwiIGluIGhpc3RvcnkgJiZcclxuXHRcdFwicmVwbGFjZVN0YXRlXCIgaW4gaGlzdG9yeSAmJlxyXG5cdFx0Ly8gV2hlbiBydW5uaW5nIGluc2lkZSBhIEZGIGlmcmFtZSwgY2FsbGluZyByZXBsYWNlU3RhdGUgY2F1c2VzIGFuIGVycm9yXHJcblx0XHQhKCB3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCBcIkZpcmVmb3hcIiApID49IDAgJiYgd2luZG93LnRvcCAhPT0gd2luZG93ICkgJiZcclxuXHRcdCggd2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQuc2VhcmNoKC9DcmlPUy8pID09PSAtMSApLFxyXG5cclxuXHRtZWRpYXF1ZXJ5OiAkLm1vYmlsZS5tZWRpYSggXCJvbmx5IGFsbFwiICksXHJcblx0Y3NzUHNldWRvRWxlbWVudDogISFwcm9wRXhpc3RzKCBcImNvbnRlbnRcIiApLFxyXG5cdHRvdWNoT3ZlcmZsb3c6ICEhcHJvcEV4aXN0cyggXCJvdmVyZmxvd1Njcm9sbGluZ1wiICksXHJcblx0Y3NzVHJhbnNmb3JtM2Q6IHRyYW5zZm9ybTNkVGVzdCgpLFxyXG5cdGJveFNoYWRvdzogISFwcm9wRXhpc3RzKCBcImJveFNoYWRvd1wiICkgJiYgIWJiLFxyXG5cdGZpeGVkUG9zaXRpb246IGZpeGVkUG9zaXRpb24oKSxcclxuXHRzY3JvbGxUb3A6IChcInBhZ2VYT2Zmc2V0XCIgaW4gd2luZG93IHx8XHJcblx0XHRcInNjcm9sbFRvcFwiIGluIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCB8fFxyXG5cdFx0XCJzY3JvbGxUb3BcIiBpbiBmYWtlQm9keVsgMCBdKSAmJiAhd2Vib3MgJiYgIW9wZXJhbWluaSxcclxuXHJcblx0ZHluYW1pY0Jhc2VUYWc6IGJhc2VUYWdUZXN0KCksXHJcblx0Y3NzUG9pbnRlckV2ZW50czogY3NzUG9pbnRlckV2ZW50c1Rlc3QoKSxcclxuXHRib3VuZGluZ1JlY3Q6IGJvdW5kaW5nUmVjdCgpLFxyXG5cdGlubGluZVNWRzogaW5saW5lU1ZHXHJcbn0pO1xyXG5cclxuZmFrZUJvZHkucmVtb3ZlKCk7XHJcblxyXG4vLyAkLm1vYmlsZS5hamF4QmxhY2tsaXN0IGlzIHVzZWQgdG8gb3ZlcnJpZGUgYWpheEVuYWJsZWQgb24gcGxhdGZvcm1zIHRoYXQgaGF2ZSBrbm93biBjb25mbGljdHMgd2l0aCBoYXNoIGhpc3RvcnkgdXBkYXRlcyAoQkI1LCBTeW1iaWFuKVxyXG4vLyBvciB0aGF0IGdlbmVyYWxseSB3b3JrIGJldHRlciBicm93c2luZyBpbiByZWd1bGFyIGh0dHAgZm9yIGZ1bGwgcGFnZSByZWZyZXNoZXMgKE9wZXJhIE1pbmkpXHJcbi8vIE5vdGU6IFRoaXMgZGV0ZWN0aW9uIGJlbG93IGlzIHVzZWQgYXMgYSBsYXN0IHJlc29ydC5cclxuLy8gV2UgcmVjb21tZW5kIG9ubHkgdXNpbmcgdGhlc2UgZGV0ZWN0aW9uIG1ldGhvZHMgd2hlbiBhbGwgb3RoZXIgbW9yZSByZWxpYWJsZS9mb3J3YXJkLWxvb2tpbmcgYXBwcm9hY2hlcyBhcmUgbm90IHBvc3NpYmxlXHJcbm5va2lhTFRFN18zID0gKGZ1bmN0aW9uKCkge1xyXG5cclxuXHR2YXIgdWEgPSB3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudDtcclxuXHJcblx0Ly9UaGUgZm9sbG93aW5nIGlzIGFuIGF0dGVtcHQgdG8gbWF0Y2ggTm9raWEgYnJvd3NlcnMgdGhhdCBhcmUgcnVubmluZyBTeW1iaWFuL3M2MCwgd2l0aCB3ZWJraXQsIHZlcnNpb24gNy4zIG9yIG9sZGVyXHJcblx0cmV0dXJuIHVhLmluZGV4T2YoIFwiTm9raWFcIiApID4gLTEgJiZcclxuXHRcdFx0KCB1YS5pbmRleE9mKCBcIlN5bWJpYW4vM1wiICkgPiAtMSB8fCB1YS5pbmRleE9mKCBcIlNlcmllczYwLzVcIiApID4gLTEgKSAmJlxyXG5cdFx0XHR1YS5pbmRleE9mKCBcIkFwcGxlV2ViS2l0XCIgKSA+IC0xICYmXHJcblx0XHRcdHVhLm1hdGNoKCAvKEJyb3dzZXJOR3xOb2tpYUJyb3dzZXIpXFwvN1xcLlswLTNdLyApO1xyXG59KSgpO1xyXG5cclxuLy8gU3VwcG9ydCBjb25kaXRpb25zIHRoYXQgbXVzdCBiZSBtZXQgaW4gb3JkZXIgdG8gcHJvY2VlZFxyXG4vLyBkZWZhdWx0IGVuaGFuY2VkIHF1YWxpZmljYXRpb25zIGFyZSBtZWRpYSBxdWVyeSBzdXBwb3J0IE9SIElFIDcrXHJcblxyXG4kLm1vYmlsZS5ncmFkZUEgPSBmdW5jdGlvbigpIHtcclxuXHRyZXR1cm4gKCAoICQuc3VwcG9ydC5tZWRpYXF1ZXJ5ICYmICQuc3VwcG9ydC5jc3NQc2V1ZG9FbGVtZW50ICkgfHwgJC5tb2JpbGUuYnJvd3Nlci5vbGRJRSAmJiAkLm1vYmlsZS5icm93c2VyLm9sZElFID49IDggKSAmJiAoICQuc3VwcG9ydC5ib3VuZGluZ1JlY3QgfHwgJC5mbi5qcXVlcnkubWF0Y2goLzFcXC5bMC03K11cXC5bMC05K10/LykgIT09IG51bGwgKTtcclxufTtcclxuXHJcbiQubW9iaWxlLmFqYXhCbGFja2xpc3QgPVxyXG5cdFx0XHQvLyBCbGFja0JlcnJ5IGJyb3dzZXJzLCBwcmUtd2Via2l0XHJcblx0XHRcdHdpbmRvdy5ibGFja2JlcnJ5ICYmICF3aW5kb3cuV2ViS2l0UG9pbnQgfHxcclxuXHRcdFx0Ly8gT3BlcmEgTWluaVxyXG5cdFx0XHRvcGVyYW1pbmkgfHxcclxuXHRcdFx0Ly8gU3ltYmlhbiB3ZWJraXRzIHByZSA3LjNcclxuXHRcdFx0bm9raWFMVEU3XzM7XHJcblxyXG4vLyBMYXN0bHksIHRoaXMgd29ya2Fyb3VuZCBpcyB0aGUgb25seSB3YXkgd2UndmUgZm91bmQgc28gZmFyIHRvIGdldCBwcmUgNy4zIFN5bWJpYW4gd2Via2l0IGRldmljZXNcclxuLy8gdG8gcmVuZGVyIHRoZSBzdHlsZXNoZWV0cyB3aGVuIHRoZXkncmUgcmVmZXJlbmNlZCBiZWZvcmUgdGhpcyBzY3JpcHQsIGFzIHdlJ2QgcmVjb21tZW5kIGRvaW5nLlxyXG4vLyBUaGlzIHNpbXBseSByZWFwcGVuZHMgdGhlIENTUyBpbiBwbGFjZSwgd2hpY2ggZm9yIHNvbWUgcmVhc29uIG1ha2VzIGl0IGFwcGx5XHJcbmlmICggbm9raWFMVEU3XzMgKSB7XHJcblx0JChmdW5jdGlvbigpIHtcclxuXHRcdCQoIFwiaGVhZCBsaW5rW3JlbD0nc3R5bGVzaGVldCddXCIgKS5hdHRyKCBcInJlbFwiLCBcImFsdGVybmF0ZSBzdHlsZXNoZWV0XCIgKS5hdHRyKCBcInJlbFwiLCBcInN0eWxlc2hlZXRcIiApO1xyXG5cdH0pO1xyXG59XHJcblxyXG4vLyBGb3IgcnVsaW5nIG91dCBzaGFkb3dzIHZpYSBjc3NcclxuaWYgKCAhJC5zdXBwb3J0LmJveFNoYWRvdyApIHtcclxuXHQkKCBcImh0bWxcIiApLmFkZENsYXNzKCBcInVpLW5vYm94c2hhZG93XCIgKTtcclxufVxyXG5cclxufSkoIGpRdWVyeSApO1xyXG5cclxuXHJcbihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xyXG5cdHZhciAkd2luID0gJC5tb2JpbGUud2luZG93LCBzZWxmLFxyXG5cdFx0ZHVtbXlGblRvSW5pdE5hdmlnYXRlID0gZnVuY3Rpb24oKSB7XHJcblx0XHR9O1xyXG5cclxuXHQkLmV2ZW50LnNwZWNpYWwuYmVmb3JlbmF2aWdhdGUgPSB7XHJcblx0XHRzZXR1cDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdCR3aW4ub24oIFwibmF2aWdhdGVcIiwgZHVtbXlGblRvSW5pdE5hdmlnYXRlICk7XHJcblx0XHR9LFxyXG5cclxuXHRcdHRlYXJkb3duOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0JHdpbi5vZmYoIFwibmF2aWdhdGVcIiwgZHVtbXlGblRvSW5pdE5hdmlnYXRlICk7XHJcblx0XHR9XHJcblx0fTtcclxuXHJcblx0JC5ldmVudC5zcGVjaWFsLm5hdmlnYXRlID0gc2VsZiA9IHtcclxuXHRcdGJvdW5kOiBmYWxzZSxcclxuXHJcblx0XHRwdXNoU3RhdGVFbmFibGVkOiB0cnVlLFxyXG5cclxuXHRcdG9yaWdpbmFsRXZlbnROYW1lOiB1bmRlZmluZWQsXHJcblxyXG5cdFx0Ly8gSWYgcHVzaHN0YXRlIHN1cHBvcnQgaXMgcHJlc2VudCBhbmQgcHVzaCBzdGF0ZSBzdXBwb3J0IGlzIGRlZmluZWQgdG9cclxuXHRcdC8vIGJlIHRydWUgb24gdGhlIG1vYmlsZSBuYW1lc3BhY2UuXHJcblx0XHRpc1B1c2hTdGF0ZUVuYWJsZWQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRyZXR1cm4gJC5zdXBwb3J0LnB1c2hTdGF0ZSAmJlxyXG5cdFx0XHRcdCQubW9iaWxlLnB1c2hTdGF0ZUVuYWJsZWQgPT09IHRydWUgJiZcclxuXHRcdFx0XHR0aGlzLmlzSGFzaENoYW5nZUVuYWJsZWQoKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0Ly8gISEgYXNzdW1lcyBtb2JpbGUgbmFtZXNwYWNlIGlzIHByZXNlbnRcclxuXHRcdGlzSGFzaENoYW5nZUVuYWJsZWQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRyZXR1cm4gJC5tb2JpbGUuaGFzaExpc3RlbmluZ0VuYWJsZWQgPT09IHRydWU7XHJcblx0XHR9LFxyXG5cclxuXHRcdC8vIFRPRE8gYSBsb3Qgb2YgZHVwbGljYXRpb24gYmV0d2VlbiBwb3BzdGF0ZSBhbmQgaGFzaGNoYW5nZVxyXG5cdFx0cG9wc3RhdGU6IGZ1bmN0aW9uKCBldmVudCApIHtcclxuXHRcdFx0dmFyIG5ld0V2ZW50ID0gbmV3ICQuRXZlbnQoIFwibmF2aWdhdGVcIiApLFxyXG5cdFx0XHRcdGJlZm9yZU5hdmlnYXRlID0gbmV3ICQuRXZlbnQoIFwiYmVmb3JlbmF2aWdhdGVcIiApLFxyXG5cdFx0XHRcdHN0YXRlID0gZXZlbnQub3JpZ2luYWxFdmVudC5zdGF0ZSB8fCB7fTtcclxuXHJcblx0XHRcdGJlZm9yZU5hdmlnYXRlLm9yaWdpbmFsRXZlbnQgPSBldmVudDtcclxuXHRcdFx0JHdpbi50cmlnZ2VyKCBiZWZvcmVOYXZpZ2F0ZSApO1xyXG5cclxuXHRcdFx0aWYgKCBiZWZvcmVOYXZpZ2F0ZS5pc0RlZmF1bHRQcmV2ZW50ZWQoKSApIHtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmICggZXZlbnQuaGlzdG9yeVN0YXRlICkge1xyXG5cdFx0XHRcdCQuZXh0ZW5kKHN0YXRlLCBldmVudC5oaXN0b3J5U3RhdGUpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBNYWtlIHN1cmUgdGhlIG9yaWdpbmFsIGV2ZW50IGlzIHRyYWNrZWQgZm9yIHRoZSBlbmRcclxuXHRcdFx0Ly8gdXNlciB0byBpbnNwZWN0IGluY2FzZSB0aGV5IHdhbnQgdG8gZG8gc29tZXRoaW5nIHNwZWNpYWxcclxuXHRcdFx0bmV3RXZlbnQub3JpZ2luYWxFdmVudCA9IGV2ZW50O1xyXG5cclxuXHRcdFx0Ly8gTk9URSB3ZSBsZXQgdGhlIGN1cnJlbnQgc3RhY2sgdW53aW5kIGJlY2F1c2UgYW55IGFzc2lnbm1lbnQgdG9cclxuXHRcdFx0Ly8gICAgICBsb2NhdGlvbi5oYXNoIHdpbGwgc3RvcCB0aGUgd29ybGQgYW5kIHJ1biB0aGlzIGV2ZW50IGhhbmRsZXIuIEJ5XHJcblx0XHRcdC8vICAgICAgZG9pbmcgdGhpcyB3ZSBjcmVhdGUgYSBzaW1pbGFyIGJlaGF2aW9yIHRvIGhhc2hjaGFuZ2Ugb24gaGFzaFxyXG5cdFx0XHQvLyAgICAgIGFzc2lnbm1lbnRcclxuXHRcdFx0c2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuXHRcdFx0XHQkd2luLnRyaWdnZXIoIG5ld0V2ZW50LCB7XHJcblx0XHRcdFx0XHRzdGF0ZTogc3RhdGVcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fSwgMCk7XHJcblx0XHR9LFxyXG5cclxuXHRcdGhhc2hjaGFuZ2U6IGZ1bmN0aW9uKCBldmVudCAvKiwgZGF0YSAqLyApIHtcclxuXHRcdFx0dmFyIG5ld0V2ZW50ID0gbmV3ICQuRXZlbnQoIFwibmF2aWdhdGVcIiApLFxyXG5cdFx0XHRcdGJlZm9yZU5hdmlnYXRlID0gbmV3ICQuRXZlbnQoIFwiYmVmb3JlbmF2aWdhdGVcIiApO1xyXG5cclxuXHRcdFx0YmVmb3JlTmF2aWdhdGUub3JpZ2luYWxFdmVudCA9IGV2ZW50O1xyXG5cdFx0XHQkd2luLnRyaWdnZXIoIGJlZm9yZU5hdmlnYXRlICk7XHJcblxyXG5cdFx0XHRpZiAoIGJlZm9yZU5hdmlnYXRlLmlzRGVmYXVsdFByZXZlbnRlZCgpICkge1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gTWFrZSBzdXJlIHRoZSBvcmlnaW5hbCBldmVudCBpcyB0cmFja2VkIGZvciB0aGUgZW5kXHJcblx0XHRcdC8vIHVzZXIgdG8gaW5zcGVjdCBpbmNhc2UgdGhleSB3YW50IHRvIGRvIHNvbWV0aGluZyBzcGVjaWFsXHJcblx0XHRcdG5ld0V2ZW50Lm9yaWdpbmFsRXZlbnQgPSBldmVudDtcclxuXHJcblx0XHRcdC8vIFRyaWdnZXIgdGhlIGhhc2hjaGFuZ2Ugd2l0aCBzdGF0ZSBwcm92aWRlZCBieSB0aGUgdXNlclxyXG5cdFx0XHQvLyB0aGF0IGFsdGVyZWQgdGhlIGhhc2hcclxuXHRcdFx0JHdpbi50cmlnZ2VyKCBuZXdFdmVudCwge1xyXG5cdFx0XHRcdC8vIFVzZXJzIHRoYXQgd2FudCB0byBmdWxseSBub3JtYWxpemUgdGhlIHR3byBldmVudHNcclxuXHRcdFx0XHQvLyB3aWxsIG5lZWQgdG8gZG8gaGlzdG9yeSBtYW5hZ2VtZW50IGRvd24gdGhlIHN0YWNrIGFuZFxyXG5cdFx0XHRcdC8vIGFkZCB0aGUgc3RhdGUgdG8gdGhlIGV2ZW50IGJlZm9yZSB0aGlzIGJpbmRpbmcgaXMgZmlyZWRcclxuXHRcdFx0XHQvLyBUT0RPIGNvbnNpZGVyIGFsbG93aW5nIGZvciB0aGUgZXhwbGljaXQgYWRkaXRpb24gb2YgY2FsbGJhY2tzXHJcblx0XHRcdFx0Ly8gICAgICB0byBiZSBmaXJlZCBiZWZvcmUgdGhpcyB2YWx1ZSBpcyBzZXQgdG8gYXZvaWQgZXZlbnQgdGltaW5nIGlzc3Vlc1xyXG5cdFx0XHRcdHN0YXRlOiBldmVudC5oYXNoY2hhbmdlU3RhdGUgfHwge31cclxuXHRcdFx0fSk7XHJcblx0XHR9LFxyXG5cclxuXHRcdC8vIFRPRE8gV2UgcmVhbGx5IG9ubHkgd2FudCB0byBzZXQgdGhpcyB1cCBvbmNlXHJcblx0XHQvLyAgICAgIGJ1dCBJJ20gbm90IGNsZWFyIGlmIHRoZXJlJ3MgYSBiZXRlciB3YXkgdG8gYWNoaWV2ZVxyXG5cdFx0Ly8gICAgICB0aGlzIHdpdGggdGhlIGpRdWVyeSBzcGVjaWFsIGV2ZW50IHN0cnVjdHVyZVxyXG5cdFx0c2V0dXA6IGZ1bmN0aW9uKCAvKiBkYXRhLCBuYW1lc3BhY2VzICovICkge1xyXG5cdFx0XHRpZiAoIHNlbGYuYm91bmQgKSB7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRzZWxmLmJvdW5kID0gdHJ1ZTtcclxuXHJcblx0XHRcdGlmICggc2VsZi5pc1B1c2hTdGF0ZUVuYWJsZWQoKSApIHtcclxuXHRcdFx0XHRzZWxmLm9yaWdpbmFsRXZlbnROYW1lID0gXCJwb3BzdGF0ZVwiO1xyXG5cdFx0XHRcdCR3aW4uYmluZCggXCJwb3BzdGF0ZS5uYXZpZ2F0ZVwiLCBzZWxmLnBvcHN0YXRlICk7XHJcblx0XHRcdH0gZWxzZSBpZiAoIHNlbGYuaXNIYXNoQ2hhbmdlRW5hYmxlZCgpICkge1xyXG5cdFx0XHRcdHNlbGYub3JpZ2luYWxFdmVudE5hbWUgPSBcImhhc2hjaGFuZ2VcIjtcclxuXHRcdFx0XHQkd2luLmJpbmQoIFwiaGFzaGNoYW5nZS5uYXZpZ2F0ZVwiLCBzZWxmLmhhc2hjaGFuZ2UgKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH07XHJcbn0pKCBqUXVlcnkgKTtcclxuXHJcblxyXG5cclxuKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7XHJcblx0XHR2YXIgcGF0aCwgJGJhc2UsIGRpYWxvZ0hhc2hLZXkgPSBcIiZ1aS1zdGF0ZT1kaWFsb2dcIjtcclxuXHJcblx0XHQkLm1vYmlsZS5wYXRoID0gcGF0aCA9IHtcclxuXHRcdFx0dWlTdGF0ZUtleTogXCImdWktc3RhdGVcIixcclxuXHJcblx0XHRcdC8vIFRoaXMgc2NhcnkgbG9va2luZyByZWd1bGFyIGV4cHJlc3Npb24gcGFyc2VzIGFuIGFic29sdXRlIFVSTCBvciBpdHMgcmVsYXRpdmVcclxuXHRcdFx0Ly8gdmFyaWFudHMgKHByb3RvY29sLCBzaXRlLCBkb2N1bWVudCwgcXVlcnksIGFuZCBoYXNoKSwgaW50byB0aGUgdmFyaW91c1xyXG5cdFx0XHQvLyBjb21wb25lbnRzIChwcm90b2NvbCwgaG9zdCwgcGF0aCwgcXVlcnksIGZyYWdtZW50LCBldGMgdGhhdCBtYWtlIHVwIHRoZVxyXG5cdFx0XHQvLyBVUkwgYXMgd2VsbCBhcyBzb21lIG90aGVyIGNvbW1vbmx5IHVzZWQgc3ViLXBhcnRzLiBXaGVuIHVzZWQgd2l0aCBSZWdFeHAuZXhlYygpXHJcblx0XHRcdC8vIG9yIFN0cmluZy5tYXRjaCwgaXQgcGFyc2VzIHRoZSBVUkwgaW50byBhIHJlc3VsdHMgYXJyYXkgdGhhdCBsb29rcyBsaWtlIHRoaXM6XHJcblx0XHRcdC8vXHJcblx0XHRcdC8vICAgICBbMF06IGh0dHA6Ly9qYmxhczpwYXNzd29yZEBteWNvbXBhbnkuY29tOjgwODAvbWFpbC9pbmJveD9tc2c9MTIzNCZ0eXBlPXVucmVhZCNtc2ctY29udGVudFxyXG5cdFx0XHQvLyAgICAgWzFdOiBodHRwOi8vamJsYXM6cGFzc3dvcmRAbXljb21wYW55LmNvbTo4MDgwL21haWwvaW5ib3g/bXNnPTEyMzQmdHlwZT11bnJlYWRcclxuXHRcdFx0Ly8gICAgIFsyXTogaHR0cDovL2pibGFzOnBhc3N3b3JkQG15Y29tcGFueS5jb206ODA4MC9tYWlsL2luYm94XHJcblx0XHRcdC8vICAgICBbM106IGh0dHA6Ly9qYmxhczpwYXNzd29yZEBteWNvbXBhbnkuY29tOjgwODBcclxuXHRcdFx0Ly8gICAgIFs0XTogaHR0cDpcclxuXHRcdFx0Ly8gICAgIFs1XTogLy9cclxuXHRcdFx0Ly8gICAgIFs2XTogamJsYXM6cGFzc3dvcmRAbXljb21wYW55LmNvbTo4MDgwXHJcblx0XHRcdC8vICAgICBbN106IGpibGFzOnBhc3N3b3JkXHJcblx0XHRcdC8vICAgICBbOF06IGpibGFzXHJcblx0XHRcdC8vICAgICBbOV06IHBhc3N3b3JkXHJcblx0XHRcdC8vICAgIFsxMF06IG15Y29tcGFueS5jb206ODA4MFxyXG5cdFx0XHQvLyAgICBbMTFdOiBteWNvbXBhbnkuY29tXHJcblx0XHRcdC8vICAgIFsxMl06IDgwODBcclxuXHRcdFx0Ly8gICAgWzEzXTogL21haWwvaW5ib3hcclxuXHRcdFx0Ly8gICAgWzE0XTogL21haWwvXHJcblx0XHRcdC8vICAgIFsxNV06IGluYm94XHJcblx0XHRcdC8vICAgIFsxNl06ID9tc2c9MTIzNCZ0eXBlPXVucmVhZFxyXG5cdFx0XHQvLyAgICBbMTddOiAjbXNnLWNvbnRlbnRcclxuXHRcdFx0Ly9cclxuXHRcdFx0dXJsUGFyc2VSRTogL15cXHMqKCgoKFteOlxcLyNcXD9dKzopPyg/OihcXC9cXC8pKCg/OigoW146QFxcLyNcXD9dKykoPzpcXDooW146QFxcLyNcXD9dKykpPylAKT8oKFteOlxcLyNcXD9cXF1cXFtdK3xcXFtbXlxcL1xcXUAjP10rXFxdKSg/OlxcOihbMC05XSspKT8pKT8pPyk/KChcXC8/KD86W15cXC9cXD8jXStcXC8rKSopKFteXFw/I10qKSkpPyhcXD9bXiNdKyk/KSgjLiopPy8sXHJcblxyXG5cdFx0XHQvLyBBYnN0cmFjdGlvbiB0byBhZGRyZXNzIHhzcyAoSXNzdWUgIzQ3ODcpIGJ5IHJlbW92aW5nIHRoZSBhdXRob3JpdHkgaW5cclxuXHRcdFx0Ly8gYnJvd3NlcnMgdGhhdCBhdXRvLWRlY29kZSBpdC4gQWxsIHJlZmVyZW5jZXMgdG8gbG9jYXRpb24uaHJlZiBzaG91bGQgYmVcclxuXHRcdFx0Ly8gcmVwbGFjZWQgd2l0aCBhIGNhbGwgdG8gdGhpcyBtZXRob2Qgc28gdGhhdCBpdCBjYW4gYmUgZGVhbHQgd2l0aCBwcm9wZXJseSBoZXJlXHJcblx0XHRcdGdldExvY2F0aW9uOiBmdW5jdGlvbiggdXJsICkge1xyXG5cdFx0XHRcdHZhciBwYXJzZWRVcmwgPSB0aGlzLnBhcnNlVXJsKCB1cmwgfHwgbG9jYXRpb24uaHJlZiApLFxyXG5cdFx0XHRcdFx0dXJpID0gdXJsID8gcGFyc2VkVXJsIDogbG9jYXRpb24sXHJcblxyXG5cdFx0XHRcdFx0Ly8gTWFrZSBzdXJlIHRvIHBhcnNlIHRoZSB1cmwgb3IgdGhlIGxvY2F0aW9uIG9iamVjdCBmb3IgdGhlIGhhc2ggYmVjYXVzZSB1c2luZ1xyXG5cdFx0XHRcdFx0Ly8gbG9jYXRpb24uaGFzaCBpcyBhdXRvZGVjb2RlZCBpbiBmaXJlZm94LCB0aGUgcmVzdCBvZiB0aGUgdXJsIHNob3VsZCBiZSBmcm9tXHJcblx0XHRcdFx0XHQvLyB0aGUgb2JqZWN0IChsb2NhdGlvbiB1bmxlc3Mgd2UncmUgdGVzdGluZykgdG8gYXZvaWQgdGhlIGluY2x1c2lvbiBvZiB0aGVcclxuXHRcdFx0XHRcdC8vIGF1dGhvcml0eVxyXG5cdFx0XHRcdFx0aGFzaCA9IHBhcnNlZFVybC5oYXNoO1xyXG5cclxuXHRcdFx0XHQvLyBtaW1pYyB0aGUgYnJvd3NlciB3aXRoIGFuIGVtcHR5IHN0cmluZyB3aGVuIHRoZSBoYXNoIGlzIGVtcHR5XHJcblx0XHRcdFx0aGFzaCA9IGhhc2ggPT09IFwiI1wiID8gXCJcIiA6IGhhc2g7XHJcblxyXG5cdFx0XHRcdHJldHVybiB1cmkucHJvdG9jb2wgK1xyXG5cdFx0XHRcdFx0cGFyc2VkVXJsLmRvdWJsZVNsYXNoICtcclxuXHRcdFx0XHRcdHVyaS5ob3N0ICtcclxuXHJcblx0XHRcdFx0XHQvLyBUaGUgcGF0aG5hbWUgbXVzdCBzdGFydCB3aXRoIGEgc2xhc2ggaWYgdGhlcmUncyBhIHByb3RvY29sLCBiZWNhdXNlIHlvdVxyXG5cdFx0XHRcdFx0Ly8gY2FuJ3QgaGF2ZSBhIHByb3RvY29sIGZvbGxvd2VkIGJ5IGEgcmVsYXRpdmUgcGF0aC4gQWxzbywgaXQncyBpbXBvc3NpYmxlIHRvXHJcblx0XHRcdFx0XHQvLyBjYWxjdWxhdGUgYWJzb2x1dGUgVVJMcyBmcm9tIHJlbGF0aXZlIG9uZXMgaWYgdGhlIGFic29sdXRlIG9uZSBkb2Vzbid0IGhhdmVcclxuXHRcdFx0XHRcdC8vIGEgbGVhZGluZyBcIi9cIi5cclxuXHRcdFx0XHRcdCggKCB1cmkucHJvdG9jb2wgIT09IFwiXCIgJiYgdXJpLnBhdGhuYW1lLnN1YnN0cmluZyggMCwgMSApICE9PSBcIi9cIiApID9cclxuXHRcdFx0XHRcdFx0XCIvXCIgOiBcIlwiICkgK1xyXG5cdFx0XHRcdFx0dXJpLnBhdGhuYW1lICtcclxuXHRcdFx0XHRcdHVyaS5zZWFyY2ggK1xyXG5cdFx0XHRcdFx0aGFzaDtcclxuXHRcdFx0fSxcclxuXHJcblx0XHRcdC8vcmV0dXJuIHRoZSBvcmlnaW5hbCBkb2N1bWVudCB1cmxcclxuXHRcdFx0Z2V0RG9jdW1lbnRVcmw6IGZ1bmN0aW9uKCBhc1BhcnNlZE9iamVjdCApIHtcclxuXHRcdFx0XHRyZXR1cm4gYXNQYXJzZWRPYmplY3QgPyAkLmV4dGVuZCgge30sIHBhdGguZG9jdW1lbnRVcmwgKSA6IHBhdGguZG9jdW1lbnRVcmwuaHJlZjtcclxuXHRcdFx0fSxcclxuXHJcblx0XHRcdHBhcnNlTG9jYXRpb246IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHJldHVybiB0aGlzLnBhcnNlVXJsKCB0aGlzLmdldExvY2F0aW9uKCkgKTtcclxuXHRcdFx0fSxcclxuXHJcblx0XHRcdC8vUGFyc2UgYSBVUkwgaW50byBhIHN0cnVjdHVyZSB0aGF0IGFsbG93cyBlYXN5IGFjY2VzcyB0b1xyXG5cdFx0XHQvL2FsbCBvZiB0aGUgVVJMIGNvbXBvbmVudHMgYnkgbmFtZS5cclxuXHRcdFx0cGFyc2VVcmw6IGZ1bmN0aW9uKCB1cmwgKSB7XHJcblx0XHRcdFx0Ly8gSWYgd2UncmUgcGFzc2VkIGFuIG9iamVjdCwgd2UnbGwgYXNzdW1lIHRoYXQgaXQgaXNcclxuXHRcdFx0XHQvLyBhIHBhcnNlZCB1cmwgb2JqZWN0IGFuZCBqdXN0IHJldHVybiBpdCBiYWNrIHRvIHRoZSBjYWxsZXIuXHJcblx0XHRcdFx0aWYgKCAkLnR5cGUoIHVybCApID09PSBcIm9iamVjdFwiICkge1xyXG5cdFx0XHRcdFx0cmV0dXJuIHVybDtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdHZhciBtYXRjaGVzID0gcGF0aC51cmxQYXJzZVJFLmV4ZWMoIHVybCB8fCBcIlwiICkgfHwgW107XHJcblxyXG5cdFx0XHRcdFx0Ly8gQ3JlYXRlIGFuIG9iamVjdCB0aGF0IGFsbG93cyB0aGUgY2FsbGVyIHRvIGFjY2VzcyB0aGUgc3ViLW1hdGNoZXNcclxuXHRcdFx0XHRcdC8vIGJ5IG5hbWUuIE5vdGUgdGhhdCBJRSByZXR1cm5zIGFuIGVtcHR5IHN0cmluZyBpbnN0ZWFkIG9mIHVuZGVmaW5lZCxcclxuXHRcdFx0XHRcdC8vIGxpa2UgYWxsIG90aGVyIGJyb3dzZXJzIGRvLCBzbyB3ZSBub3JtYWxpemUgZXZlcnl0aGluZyBzbyBpdHMgY29uc2lzdGVudFxyXG5cdFx0XHRcdFx0Ly8gbm8gbWF0dGVyIHdoYXQgYnJvd3NlciB3ZSdyZSBydW5uaW5nIG9uLlxyXG5cdFx0XHRcdFx0cmV0dXJuIHtcclxuXHRcdFx0XHRcdFx0aHJlZjogICAgICAgICBtYXRjaGVzWyAgMCBdIHx8IFwiXCIsXHJcblx0XHRcdFx0XHRcdGhyZWZOb0hhc2g6ICAgbWF0Y2hlc1sgIDEgXSB8fCBcIlwiLFxyXG5cdFx0XHRcdFx0XHRocmVmTm9TZWFyY2g6IG1hdGNoZXNbICAyIF0gfHwgXCJcIixcclxuXHRcdFx0XHRcdFx0ZG9tYWluOiAgICAgICBtYXRjaGVzWyAgMyBdIHx8IFwiXCIsXHJcblx0XHRcdFx0XHRcdHByb3RvY29sOiAgICAgbWF0Y2hlc1sgIDQgXSB8fCBcIlwiLFxyXG5cdFx0XHRcdFx0XHRkb3VibGVTbGFzaDogIG1hdGNoZXNbICA1IF0gfHwgXCJcIixcclxuXHRcdFx0XHRcdFx0YXV0aG9yaXR5OiAgICBtYXRjaGVzWyAgNiBdIHx8IFwiXCIsXHJcblx0XHRcdFx0XHRcdHVzZXJuYW1lOiAgICAgbWF0Y2hlc1sgIDggXSB8fCBcIlwiLFxyXG5cdFx0XHRcdFx0XHRwYXNzd29yZDogICAgIG1hdGNoZXNbICA5IF0gfHwgXCJcIixcclxuXHRcdFx0XHRcdFx0aG9zdDogICAgICAgICBtYXRjaGVzWyAxMCBdIHx8IFwiXCIsXHJcblx0XHRcdFx0XHRcdGhvc3RuYW1lOiAgICAgbWF0Y2hlc1sgMTEgXSB8fCBcIlwiLFxyXG5cdFx0XHRcdFx0XHRwb3J0OiAgICAgICAgIG1hdGNoZXNbIDEyIF0gfHwgXCJcIixcclxuXHRcdFx0XHRcdFx0cGF0aG5hbWU6ICAgICBtYXRjaGVzWyAxMyBdIHx8IFwiXCIsXHJcblx0XHRcdFx0XHRcdGRpcmVjdG9yeTogICAgbWF0Y2hlc1sgMTQgXSB8fCBcIlwiLFxyXG5cdFx0XHRcdFx0XHRmaWxlbmFtZTogICAgIG1hdGNoZXNbIDE1IF0gfHwgXCJcIixcclxuXHRcdFx0XHRcdFx0c2VhcmNoOiAgICAgICBtYXRjaGVzWyAxNiBdIHx8IFwiXCIsXHJcblx0XHRcdFx0XHRcdGhhc2g6ICAgICAgICAgbWF0Y2hlc1sgMTcgXSB8fCBcIlwiXHJcblx0XHRcdFx0XHR9O1xyXG5cdFx0XHR9LFxyXG5cclxuXHRcdFx0Ly9UdXJuIHJlbFBhdGggaW50byBhbiBhc2JvbHV0ZSBwYXRoLiBhYnNQYXRoIGlzXHJcblx0XHRcdC8vYW4gb3B0aW9uYWwgYWJzb2x1dGUgcGF0aCB3aGljaCBkZXNjcmliZXMgd2hhdFxyXG5cdFx0XHQvL3JlbFBhdGggaXMgcmVsYXRpdmUgdG8uXHJcblx0XHRcdG1ha2VQYXRoQWJzb2x1dGU6IGZ1bmN0aW9uKCByZWxQYXRoLCBhYnNQYXRoICkge1xyXG5cdFx0XHRcdHZhciBhYnNTdGFjayxcclxuXHRcdFx0XHRcdHJlbFN0YWNrLFxyXG5cdFx0XHRcdFx0aSwgZDtcclxuXHJcblx0XHRcdFx0aWYgKCByZWxQYXRoICYmIHJlbFBhdGguY2hhckF0KCAwICkgPT09IFwiL1wiICkge1xyXG5cdFx0XHRcdFx0cmV0dXJuIHJlbFBhdGg7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRyZWxQYXRoID0gcmVsUGF0aCB8fCBcIlwiO1xyXG5cdFx0XHRcdGFic1BhdGggPSBhYnNQYXRoID8gYWJzUGF0aC5yZXBsYWNlKCAvXlxcL3woXFwvW15cXC9dKnxbXlxcL10rKSQvZywgXCJcIiApIDogXCJcIjtcclxuXHJcblx0XHRcdFx0YWJzU3RhY2sgPSBhYnNQYXRoID8gYWJzUGF0aC5zcGxpdCggXCIvXCIgKSA6IFtdO1xyXG5cdFx0XHRcdHJlbFN0YWNrID0gcmVsUGF0aC5zcGxpdCggXCIvXCIgKTtcclxuXHJcblx0XHRcdFx0Zm9yICggaSA9IDA7IGkgPCByZWxTdGFjay5sZW5ndGg7IGkrKyApIHtcclxuXHRcdFx0XHRcdGQgPSByZWxTdGFja1sgaSBdO1xyXG5cdFx0XHRcdFx0c3dpdGNoICggZCApIHtcclxuXHRcdFx0XHRcdFx0Y2FzZSBcIi5cIjpcclxuXHRcdFx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRcdFx0Y2FzZSBcIi4uXCI6XHJcblx0XHRcdFx0XHRcdFx0aWYgKCBhYnNTdGFjay5sZW5ndGggKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRhYnNTdGFjay5wb3AoKTtcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHRcdGRlZmF1bHQ6XHJcblx0XHRcdFx0XHRcdFx0YWJzU3RhY2sucHVzaCggZCApO1xyXG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRyZXR1cm4gXCIvXCIgKyBhYnNTdGFjay5qb2luKCBcIi9cIiApO1xyXG5cdFx0XHR9LFxyXG5cclxuXHRcdFx0Ly9SZXR1cm5zIHRydWUgaWYgYm90aCB1cmxzIGhhdmUgdGhlIHNhbWUgZG9tYWluLlxyXG5cdFx0XHRpc1NhbWVEb21haW46IGZ1bmN0aW9uKCBhYnNVcmwxLCBhYnNVcmwyICkge1xyXG5cdFx0XHRcdHJldHVybiBwYXRoLnBhcnNlVXJsKCBhYnNVcmwxICkuZG9tYWluLnRvTG93ZXJDYXNlKCkgPT09XHJcblx0XHRcdFx0XHRwYXRoLnBhcnNlVXJsKCBhYnNVcmwyICkuZG9tYWluLnRvTG93ZXJDYXNlKCk7XHJcblx0XHRcdH0sXHJcblxyXG5cdFx0XHQvL1JldHVybnMgdHJ1ZSBmb3IgYW55IHJlbGF0aXZlIHZhcmlhbnQuXHJcblx0XHRcdGlzUmVsYXRpdmVVcmw6IGZ1bmN0aW9uKCB1cmwgKSB7XHJcblx0XHRcdFx0Ly8gQWxsIHJlbGF0aXZlIFVybCB2YXJpYW50cyBoYXZlIG9uZSB0aGluZyBpbiBjb21tb24sIG5vIHByb3RvY29sLlxyXG5cdFx0XHRcdHJldHVybiBwYXRoLnBhcnNlVXJsKCB1cmwgKS5wcm90b2NvbCA9PT0gXCJcIjtcclxuXHRcdFx0fSxcclxuXHJcblx0XHRcdC8vUmV0dXJucyB0cnVlIGZvciBhbiBhYnNvbHV0ZSB1cmwuXHJcblx0XHRcdGlzQWJzb2x1dGVVcmw6IGZ1bmN0aW9uKCB1cmwgKSB7XHJcblx0XHRcdFx0cmV0dXJuIHBhdGgucGFyc2VVcmwoIHVybCApLnByb3RvY29sICE9PSBcIlwiO1xyXG5cdFx0XHR9LFxyXG5cclxuXHRcdFx0Ly9UdXJuIHRoZSBzcGVjaWZpZWQgcmVhbHRpdmUgVVJMIGludG8gYW4gYWJzb2x1dGUgb25lLiBUaGlzIGZ1bmN0aW9uXHJcblx0XHRcdC8vY2FuIGhhbmRsZSBhbGwgcmVsYXRpdmUgdmFyaWFudHMgKHByb3RvY29sLCBzaXRlLCBkb2N1bWVudCwgcXVlcnksIGZyYWdtZW50KS5cclxuXHRcdFx0bWFrZVVybEFic29sdXRlOiBmdW5jdGlvbiggcmVsVXJsLCBhYnNVcmwgKSB7XHJcblx0XHRcdFx0aWYgKCAhcGF0aC5pc1JlbGF0aXZlVXJsKCByZWxVcmwgKSApIHtcclxuXHRcdFx0XHRcdHJldHVybiByZWxVcmw7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRpZiAoIGFic1VybCA9PT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRcdFx0YWJzVXJsID0gdGhpcy5kb2N1bWVudEJhc2U7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHR2YXIgcmVsT2JqID0gcGF0aC5wYXJzZVVybCggcmVsVXJsICksXHJcblx0XHRcdFx0XHRhYnNPYmogPSBwYXRoLnBhcnNlVXJsKCBhYnNVcmwgKSxcclxuXHRcdFx0XHRcdHByb3RvY29sID0gcmVsT2JqLnByb3RvY29sIHx8IGFic09iai5wcm90b2NvbCxcclxuXHRcdFx0XHRcdGRvdWJsZVNsYXNoID0gcmVsT2JqLnByb3RvY29sID8gcmVsT2JqLmRvdWJsZVNsYXNoIDogKCByZWxPYmouZG91YmxlU2xhc2ggfHwgYWJzT2JqLmRvdWJsZVNsYXNoICksXHJcblx0XHRcdFx0XHRhdXRob3JpdHkgPSByZWxPYmouYXV0aG9yaXR5IHx8IGFic09iai5hdXRob3JpdHksXHJcblx0XHRcdFx0XHRoYXNQYXRoID0gcmVsT2JqLnBhdGhuYW1lICE9PSBcIlwiLFxyXG5cdFx0XHRcdFx0cGF0aG5hbWUgPSBwYXRoLm1ha2VQYXRoQWJzb2x1dGUoIHJlbE9iai5wYXRobmFtZSB8fCBhYnNPYmouZmlsZW5hbWUsIGFic09iai5wYXRobmFtZSApLFxyXG5cdFx0XHRcdFx0c2VhcmNoID0gcmVsT2JqLnNlYXJjaCB8fCAoICFoYXNQYXRoICYmIGFic09iai5zZWFyY2ggKSB8fCBcIlwiLFxyXG5cdFx0XHRcdFx0aGFzaCA9IHJlbE9iai5oYXNoO1xyXG5cclxuXHRcdFx0XHRyZXR1cm4gcHJvdG9jb2wgKyBkb3VibGVTbGFzaCArIGF1dGhvcml0eSArIHBhdGhuYW1lICsgc2VhcmNoICsgaGFzaDtcclxuXHRcdFx0fSxcclxuXHJcblx0XHRcdC8vQWRkIHNlYXJjaCAoYWthIHF1ZXJ5KSBwYXJhbXMgdG8gdGhlIHNwZWNpZmllZCB1cmwuXHJcblx0XHRcdGFkZFNlYXJjaFBhcmFtczogZnVuY3Rpb24oIHVybCwgcGFyYW1zICkge1xyXG5cdFx0XHRcdHZhciB1ID0gcGF0aC5wYXJzZVVybCggdXJsICksXHJcblx0XHRcdFx0XHRwID0gKCB0eXBlb2YgcGFyYW1zID09PSBcIm9iamVjdFwiICkgPyAkLnBhcmFtKCBwYXJhbXMgKSA6IHBhcmFtcyxcclxuXHRcdFx0XHRcdHMgPSB1LnNlYXJjaCB8fCBcIj9cIjtcclxuXHRcdFx0XHRyZXR1cm4gdS5ocmVmTm9TZWFyY2ggKyBzICsgKCBzLmNoYXJBdCggcy5sZW5ndGggLSAxICkgIT09IFwiP1wiID8gXCImXCIgOiBcIlwiICkgKyBwICsgKCB1Lmhhc2ggfHwgXCJcIiApO1xyXG5cdFx0XHR9LFxyXG5cclxuXHRcdFx0Y29udmVydFVybFRvRGF0YVVybDogZnVuY3Rpb24oIGFic1VybCApIHtcclxuXHRcdFx0XHR2YXIgcmVzdWx0ID0gYWJzVXJsLFxyXG5cdFx0XHRcdFx0dSA9IHBhdGgucGFyc2VVcmwoIGFic1VybCApO1xyXG5cclxuXHRcdFx0XHRpZiAoIHBhdGguaXNFbWJlZGRlZFBhZ2UoIHUgKSApIHtcclxuXHRcdFx0XHRcdC8vIEZvciBlbWJlZGRlZCBwYWdlcywgcmVtb3ZlIHRoZSBkaWFsb2cgaGFzaCBrZXkgYXMgaW4gZ2V0RmlsZVBhdGgoKSxcclxuXHRcdFx0XHRcdC8vIGFuZCByZW1vdmUgb3RoZXJ3aXNlIHRoZSBEYXRhIFVybCB3b24ndCBtYXRjaCB0aGUgaWQgb2YgdGhlIGVtYmVkZGVkIFBhZ2UuXHJcblx0XHRcdFx0XHRyZXN1bHQgPSB1Lmhhc2hcclxuXHRcdFx0XHRcdFx0LnNwbGl0KCBkaWFsb2dIYXNoS2V5IClbMF1cclxuXHRcdFx0XHRcdFx0LnJlcGxhY2UoIC9eIy8sIFwiXCIgKVxyXG5cdFx0XHRcdFx0XHQucmVwbGFjZSggL1xcPy4qJC8sIFwiXCIgKTtcclxuXHRcdFx0XHR9IGVsc2UgaWYgKCBwYXRoLmlzU2FtZURvbWFpbiggdSwgdGhpcy5kb2N1bWVudEJhc2UgKSApIHtcclxuXHRcdFx0XHRcdHJlc3VsdCA9IHUuaHJlZk5vSGFzaC5yZXBsYWNlKCB0aGlzLmRvY3VtZW50QmFzZS5kb21haW4sIFwiXCIgKS5zcGxpdCggZGlhbG9nSGFzaEtleSApWzBdO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0cmV0dXJuIHdpbmRvdy5kZWNvZGVVUklDb21wb25lbnQoIHJlc3VsdCApO1xyXG5cdFx0XHR9LFxyXG5cclxuXHRcdFx0Ly9nZXQgcGF0aCBmcm9tIGN1cnJlbnQgaGFzaCwgb3IgZnJvbSBhIGZpbGUgcGF0aFxyXG5cdFx0XHRnZXQ6IGZ1bmN0aW9uKCBuZXdQYXRoICkge1xyXG5cdFx0XHRcdGlmICggbmV3UGF0aCA9PT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRcdFx0bmV3UGF0aCA9IHBhdGgucGFyc2VMb2NhdGlvbigpLmhhc2g7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdHJldHVybiBwYXRoLnN0cmlwSGFzaCggbmV3UGF0aCApLnJlcGxhY2UoIC9bXlxcL10qXFwuW15cXC8qXSskLywgXCJcIiApO1xyXG5cdFx0XHR9LFxyXG5cclxuXHRcdFx0Ly9zZXQgbG9jYXRpb24gaGFzaCB0byBwYXRoXHJcblx0XHRcdHNldDogZnVuY3Rpb24oIHBhdGggKSB7XHJcblx0XHRcdFx0bG9jYXRpb24uaGFzaCA9IHBhdGg7XHJcblx0XHRcdH0sXHJcblxyXG5cdFx0XHQvL3Rlc3QgaWYgYSBnaXZlbiB1cmwgKHN0cmluZykgaXMgYSBwYXRoXHJcblx0XHRcdC8vTk9URSBtaWdodCBiZSBleGNlcHRpb25hbGx5IG5haXZlXHJcblx0XHRcdGlzUGF0aDogZnVuY3Rpb24oIHVybCApIHtcclxuXHRcdFx0XHRyZXR1cm4gKCAvXFwvLyApLnRlc3QoIHVybCApO1xyXG5cdFx0XHR9LFxyXG5cclxuXHRcdFx0Ly9yZXR1cm4gYSB1cmwgcGF0aCB3aXRoIHRoZSB3aW5kb3cncyBsb2NhdGlvbiBwcm90b2NvbC9ob3N0bmFtZS9wYXRobmFtZSByZW1vdmVkXHJcblx0XHRcdGNsZWFuOiBmdW5jdGlvbiggdXJsICkge1xyXG5cdFx0XHRcdHJldHVybiB1cmwucmVwbGFjZSggdGhpcy5kb2N1bWVudEJhc2UuZG9tYWluLCBcIlwiICk7XHJcblx0XHRcdH0sXHJcblxyXG5cdFx0XHQvL2p1c3QgcmV0dXJuIHRoZSB1cmwgd2l0aG91dCBhbiBpbml0aWFsICNcclxuXHRcdFx0c3RyaXBIYXNoOiBmdW5jdGlvbiggdXJsICkge1xyXG5cdFx0XHRcdHJldHVybiB1cmwucmVwbGFjZSggL14jLywgXCJcIiApO1xyXG5cdFx0XHR9LFxyXG5cclxuXHRcdFx0c3RyaXBRdWVyeVBhcmFtczogZnVuY3Rpb24oIHVybCApIHtcclxuXHRcdFx0XHRyZXR1cm4gdXJsLnJlcGxhY2UoIC9cXD8uKiQvLCBcIlwiICk7XHJcblx0XHRcdH0sXHJcblxyXG5cdFx0XHQvL3JlbW92ZSB0aGUgcHJlY2VkaW5nIGhhc2gsIGFueSBxdWVyeSBwYXJhbXMsIGFuZCBkaWFsb2cgbm90YXRpb25zXHJcblx0XHRcdGNsZWFuSGFzaDogZnVuY3Rpb24oIGhhc2ggKSB7XHJcblx0XHRcdFx0cmV0dXJuIHBhdGguc3RyaXBIYXNoKCBoYXNoLnJlcGxhY2UoIC9cXD8uKiQvLCBcIlwiICkucmVwbGFjZSggZGlhbG9nSGFzaEtleSwgXCJcIiApICk7XHJcblx0XHRcdH0sXHJcblxyXG5cdFx0XHRpc0hhc2hWYWxpZDogZnVuY3Rpb24oIGhhc2ggKSB7XHJcblx0XHRcdFx0cmV0dXJuICggL14jW14jXSskLyApLnRlc3QoIGhhc2ggKTtcclxuXHRcdFx0fSxcclxuXHJcblx0XHRcdC8vY2hlY2sgd2hldGhlciBhIHVybCBpcyByZWZlcmVuY2luZyB0aGUgc2FtZSBkb21haW4sIG9yIGFuIGV4dGVybmFsIGRvbWFpbiBvciBkaWZmZXJlbnQgcHJvdG9jb2xcclxuXHRcdFx0Ly9jb3VsZCBiZSBtYWlsdG8sIGV0Y1xyXG5cdFx0XHRpc0V4dGVybmFsOiBmdW5jdGlvbiggdXJsICkge1xyXG5cdFx0XHRcdHZhciB1ID0gcGF0aC5wYXJzZVVybCggdXJsICk7XHJcblxyXG5cdFx0XHRcdHJldHVybiAhISggdS5wcm90b2NvbCAmJlxyXG5cdFx0XHRcdFx0KCB1LmRvbWFpbi50b0xvd2VyQ2FzZSgpICE9PSB0aGlzLmRvY3VtZW50VXJsLmRvbWFpbi50b0xvd2VyQ2FzZSgpICkgKTtcclxuXHRcdFx0fSxcclxuXHJcblx0XHRcdGhhc1Byb3RvY29sOiBmdW5jdGlvbiggdXJsICkge1xyXG5cdFx0XHRcdHJldHVybiAoIC9eKDo/XFx3KzopLyApLnRlc3QoIHVybCApO1xyXG5cdFx0XHR9LFxyXG5cclxuXHRcdFx0aXNFbWJlZGRlZFBhZ2U6IGZ1bmN0aW9uKCB1cmwgKSB7XHJcblx0XHRcdFx0dmFyIHUgPSBwYXRoLnBhcnNlVXJsKCB1cmwgKTtcclxuXHJcblx0XHRcdFx0Ly9pZiB0aGUgcGF0aCBpcyBhYnNvbHV0ZSwgdGhlbiB3ZSBuZWVkIHRvIGNvbXBhcmUgdGhlIHVybCBhZ2FpbnN0XHJcblx0XHRcdFx0Ly9ib3RoIHRoZSB0aGlzLmRvY3VtZW50VXJsIGFuZCB0aGUgZG9jdW1lbnRCYXNlLiBUaGUgbWFpbiByZWFzb24gZm9yIHRoaXNcclxuXHRcdFx0XHQvL2lzIHRoYXQgbGlua3MgZW1iZWRkZWQgd2l0aGluIGV4dGVybmFsIGRvY3VtZW50cyB3aWxsIHJlZmVyIHRvIHRoZVxyXG5cdFx0XHRcdC8vYXBwbGljYXRpb24gZG9jdW1lbnQsIHdoZXJlYXMgbGlua3MgZW1iZWRkZWQgd2l0aGluIHRoZSBhcHBsaWNhdGlvblxyXG5cdFx0XHRcdC8vZG9jdW1lbnQgd2lsbCBiZSByZXNvbHZlZCBhZ2FpbnN0IHRoZSBkb2N1bWVudCBiYXNlLlxyXG5cdFx0XHRcdGlmICggdS5wcm90b2NvbCAhPT0gXCJcIiApIHtcclxuXHRcdFx0XHRcdHJldHVybiAoICF0aGlzLmlzUGF0aCh1Lmhhc2gpICYmIHUuaGFzaCAmJiAoIHUuaHJlZk5vSGFzaCA9PT0gdGhpcy5kb2N1bWVudFVybC5ocmVmTm9IYXNoIHx8ICggdGhpcy5kb2N1bWVudEJhc2VEaWZmZXJzICYmIHUuaHJlZk5vSGFzaCA9PT0gdGhpcy5kb2N1bWVudEJhc2UuaHJlZk5vSGFzaCApICkgKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0cmV0dXJuICggL14jLyApLnRlc3QoIHUuaHJlZiApO1xyXG5cdFx0XHR9LFxyXG5cclxuXHRcdFx0c3F1YXNoOiBmdW5jdGlvbiggdXJsLCByZXNvbHV0aW9uVXJsICkge1xyXG5cdFx0XHRcdHZhciBocmVmLCBjbGVhbmVkVXJsLCBzZWFyY2gsIHN0YXRlSW5kZXgsIGRvY1VybCxcclxuXHRcdFx0XHRcdGlzUGF0aCA9IHRoaXMuaXNQYXRoKCB1cmwgKSxcclxuXHRcdFx0XHRcdHVyaSA9IHRoaXMucGFyc2VVcmwoIHVybCApLFxyXG5cdFx0XHRcdFx0cHJlc2VydmVkSGFzaCA9IHVyaS5oYXNoLFxyXG5cdFx0XHRcdFx0dWlTdGF0ZSA9IFwiXCI7XHJcblxyXG5cdFx0XHRcdC8vIHByb2R1Y2UgYSB1cmwgYWdhaW5zdCB3aGljaCB3ZSBjYW4gcmVzb2x2ZSB0aGUgcHJvdmlkZWQgcGF0aFxyXG5cdFx0XHRcdGlmICggIXJlc29sdXRpb25VcmwgKSB7XHJcblx0XHRcdFx0XHRpZiAoIGlzUGF0aCApIHtcclxuXHRcdFx0XHRcdFx0cmVzb2x1dGlvblVybCA9IHBhdGguZ2V0TG9jYXRpb24oKTtcclxuXHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdGRvY1VybCA9IHBhdGguZ2V0RG9jdW1lbnRVcmwoIHRydWUgKTtcclxuXHRcdFx0XHRcdFx0aWYgKCBwYXRoLmlzUGF0aCggZG9jVXJsLmhhc2ggKSApIHtcclxuXHRcdFx0XHRcdFx0XHRyZXNvbHV0aW9uVXJsID0gcGF0aC5zcXVhc2goIGRvY1VybC5ocmVmICk7XHJcblx0XHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdFx0cmVzb2x1dGlvblVybCA9IGRvY1VybC5ocmVmO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHQvLyBJZiB0aGUgdXJsIGlzIGFueXRoaW5nIGJ1dCBhIHNpbXBsZSBzdHJpbmcsIHJlbW92ZSBhbnkgcHJlY2VkaW5nIGhhc2hcclxuXHRcdFx0XHQvLyBlZyAjZm9vL2JhciAtPiBmb28vYmFyXHJcblx0XHRcdFx0Ly8gICAgI2ZvbyAtPiAjZm9vXHJcblx0XHRcdFx0Y2xlYW5lZFVybCA9IGlzUGF0aCA/IHBhdGguc3RyaXBIYXNoKCB1cmwgKSA6IHVybDtcclxuXHJcblx0XHRcdFx0Ly8gSWYgdGhlIHVybCBpcyBhIGZ1bGwgdXJsIHdpdGggYSBoYXNoIGNoZWNrIGlmIHRoZSBwYXJzZWQgaGFzaCBpcyBhIHBhdGhcclxuXHRcdFx0XHQvLyBpZiBpdCBpcywgc3RyaXAgdGhlICMsIGFuZCB1c2UgaXQgb3RoZXJ3aXNlIGNvbnRpbnVlIHdpdGhvdXQgY2hhbmdlXHJcblx0XHRcdFx0Y2xlYW5lZFVybCA9IHBhdGguaXNQYXRoKCB1cmkuaGFzaCApID8gcGF0aC5zdHJpcEhhc2goIHVyaS5oYXNoICkgOiBjbGVhbmVkVXJsO1xyXG5cclxuXHRcdFx0XHQvLyBTcGxpdCB0aGUgVUkgU3RhdGUga2V5cyBvZmYgdGhlIGhyZWZcclxuXHRcdFx0XHRzdGF0ZUluZGV4ID0gY2xlYW5lZFVybC5pbmRleE9mKCB0aGlzLnVpU3RhdGVLZXkgKTtcclxuXHJcblx0XHRcdFx0Ly8gc3RvcmUgdGhlIHVpIHN0YXRlIGtleXMgZm9yIHVzZVxyXG5cdFx0XHRcdGlmICggc3RhdGVJbmRleCA+IC0xICkge1xyXG5cdFx0XHRcdFx0dWlTdGF0ZSA9IGNsZWFuZWRVcmwuc2xpY2UoIHN0YXRlSW5kZXggKTtcclxuXHRcdFx0XHRcdGNsZWFuZWRVcmwgPSBjbGVhbmVkVXJsLnNsaWNlKCAwLCBzdGF0ZUluZGV4ICk7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHQvLyBtYWtlIHRoZSBjbGVhbmVkVXJsIGFic29sdXRlIHJlbGF0aXZlIHRvIHRoZSByZXNvbHV0aW9uIHVybFxyXG5cdFx0XHRcdGhyZWYgPSBwYXRoLm1ha2VVcmxBYnNvbHV0ZSggY2xlYW5lZFVybCwgcmVzb2x1dGlvblVybCApO1xyXG5cclxuXHRcdFx0XHQvLyBncmFiIHRoZSBzZWFyY2ggZnJvbSB0aGUgcmVzb2x2ZWQgdXJsIHNpbmNlIHBhcnNpbmcgZnJvbVxyXG5cdFx0XHRcdC8vIHRoZSBwYXNzZWQgdXJsIG1heSBub3QgeWllbGQgdGhlIGNvcnJlY3QgcmVzdWx0XHJcblx0XHRcdFx0c2VhcmNoID0gdGhpcy5wYXJzZVVybCggaHJlZiApLnNlYXJjaDtcclxuXHJcblx0XHRcdFx0Ly8gVE9ETyBhbGwgdGhpcyBjcmFwIGlzIHRlcnJpYmxlLCBjbGVhbiBpdCB1cFxyXG5cdFx0XHRcdGlmICggaXNQYXRoICkge1xyXG5cdFx0XHRcdFx0Ly8gcmVqZWN0IHRoZSBoYXNoIGlmIGl0J3MgYSBwYXRoIG9yIGl0J3MganVzdCBhIGRpYWxvZyBrZXlcclxuXHRcdFx0XHRcdGlmICggcGF0aC5pc1BhdGgoIHByZXNlcnZlZEhhc2ggKSB8fCBwcmVzZXJ2ZWRIYXNoLnJlcGxhY2UoXCIjXCIsIFwiXCIpLmluZGV4T2YoIHRoaXMudWlTdGF0ZUtleSApID09PSAwKSB7XHJcblx0XHRcdFx0XHRcdHByZXNlcnZlZEhhc2ggPSBcIlwiO1xyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdC8vIEFwcGVuZCB0aGUgVUkgU3RhdGUga2V5cyB3aGVyZSBpdCBleGlzdHMgYW5kIGl0J3MgYmVlbiByZW1vdmVkXHJcblx0XHRcdFx0XHQvLyBmcm9tIHRoZSB1cmxcclxuXHRcdFx0XHRcdGlmICggdWlTdGF0ZSAmJiBwcmVzZXJ2ZWRIYXNoLmluZGV4T2YoIHRoaXMudWlTdGF0ZUtleSApID09PSAtMSkge1xyXG5cdFx0XHRcdFx0XHRwcmVzZXJ2ZWRIYXNoICs9IHVpU3RhdGU7XHJcblx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0Ly8gbWFrZSBzdXJlIHRoYXQgcG91bmQgaXMgb24gdGhlIGZyb250IG9mIHRoZSBoYXNoXHJcblx0XHRcdFx0XHRpZiAoIHByZXNlcnZlZEhhc2guaW5kZXhPZiggXCIjXCIgKSA9PT0gLTEgJiYgcHJlc2VydmVkSGFzaCAhPT0gXCJcIiApIHtcclxuXHRcdFx0XHRcdFx0cHJlc2VydmVkSGFzaCA9IFwiI1wiICsgcHJlc2VydmVkSGFzaDtcclxuXHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHQvLyByZWNvbnN0cnVjdCBlYWNoIG9mIHRoZSBwaWVjZXMgd2l0aCB0aGUgbmV3IHNlYXJjaCBzdHJpbmcgYW5kIGhhc2hcclxuXHRcdFx0XHRcdGhyZWYgPSBwYXRoLnBhcnNlVXJsKCBocmVmICk7XHJcblx0XHRcdFx0XHRocmVmID0gaHJlZi5wcm90b2NvbCArIGhyZWYuZG91YmxlU2xhc2ggKyBocmVmLmhvc3QgKyBocmVmLnBhdGhuYW1lICsgc2VhcmNoICtcclxuXHRcdFx0XHRcdFx0cHJlc2VydmVkSGFzaDtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0aHJlZiArPSBocmVmLmluZGV4T2YoIFwiI1wiICkgPiAtMSA/IHVpU3RhdGUgOiBcIiNcIiArIHVpU3RhdGU7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRyZXR1cm4gaHJlZjtcclxuXHRcdFx0fSxcclxuXHJcblx0XHRcdGlzUHJlc2VydmFibGVIYXNoOiBmdW5jdGlvbiggaGFzaCApIHtcclxuXHRcdFx0XHRyZXR1cm4gaGFzaC5yZXBsYWNlKCBcIiNcIiwgXCJcIiApLmluZGV4T2YoIHRoaXMudWlTdGF0ZUtleSApID09PSAwO1xyXG5cdFx0XHR9LFxyXG5cclxuXHRcdFx0Ly8gRXNjYXBlIHdlaXJkIGNoYXJhY3RlcnMgaW4gdGhlIGhhc2ggaWYgaXQgaXMgdG8gYmUgdXNlZCBhcyBhIHNlbGVjdG9yXHJcblx0XHRcdGhhc2hUb1NlbGVjdG9yOiBmdW5jdGlvbiggaGFzaCApIHtcclxuXHRcdFx0XHR2YXIgaGFzSGFzaCA9ICggaGFzaC5zdWJzdHJpbmcoIDAsIDEgKSA9PT0gXCIjXCIgKTtcclxuXHRcdFx0XHRpZiAoIGhhc0hhc2ggKSB7XHJcblx0XHRcdFx0XHRoYXNoID0gaGFzaC5zdWJzdHJpbmcoIDEgKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0cmV0dXJuICggaGFzSGFzaCA/IFwiI1wiIDogXCJcIiApICsgaGFzaC5yZXBsYWNlKCAvKFshXCIjJCUmJygpKissLi86Ozw9Pj9AW1xcXV5ge3x9fl0pL2csIFwiXFxcXCQxXCIgKTtcclxuXHRcdFx0fSxcclxuXHJcblx0XHRcdC8vIHJldHVybiB0aGUgc3Vic3RyaW5nIG9mIGEgZmlsZXBhdGggYmVmb3JlIHRoZSBkaWFsb2dIYXNoS2V5LCBmb3IgbWFraW5nIGEgc2VydmVyXHJcblx0XHRcdC8vIHJlcXVlc3RcclxuXHRcdFx0Z2V0RmlsZVBhdGg6IGZ1bmN0aW9uKCBwYXRoICkge1xyXG5cdFx0XHRcdHJldHVybiBwYXRoICYmIHBhdGguc3BsaXQoIGRpYWxvZ0hhc2hLZXkgKVswXTtcclxuXHRcdFx0fSxcclxuXHJcblx0XHRcdC8vIGNoZWNrIGlmIHRoZSBzcGVjaWZpZWQgdXJsIHJlZmVycyB0byB0aGUgZmlyc3QgcGFnZSBpbiB0aGUgbWFpblxyXG5cdFx0XHQvLyBhcHBsaWNhdGlvbiBkb2N1bWVudC5cclxuXHRcdFx0aXNGaXJzdFBhZ2VVcmw6IGZ1bmN0aW9uKCB1cmwgKSB7XHJcblx0XHRcdFx0Ly8gV2Ugb25seSBkZWFsIHdpdGggYWJzb2x1dGUgcGF0aHMuXHJcblx0XHRcdFx0dmFyIHUgPSBwYXRoLnBhcnNlVXJsKCBwYXRoLm1ha2VVcmxBYnNvbHV0ZSggdXJsLCB0aGlzLmRvY3VtZW50QmFzZSApICksXHJcblxyXG5cdFx0XHRcdFx0Ly8gRG9lcyB0aGUgdXJsIGhhdmUgdGhlIHNhbWUgcGF0aCBhcyB0aGUgZG9jdW1lbnQ/XHJcblx0XHRcdFx0XHRzYW1lUGF0aCA9IHUuaHJlZk5vSGFzaCA9PT0gdGhpcy5kb2N1bWVudFVybC5ocmVmTm9IYXNoIHx8XHJcblx0XHRcdFx0XHRcdCggdGhpcy5kb2N1bWVudEJhc2VEaWZmZXJzICYmXHJcblx0XHRcdFx0XHRcdFx0dS5ocmVmTm9IYXNoID09PSB0aGlzLmRvY3VtZW50QmFzZS5ocmVmTm9IYXNoICksXHJcblxyXG5cdFx0XHRcdFx0Ly8gR2V0IHRoZSBmaXJzdCBwYWdlIGVsZW1lbnQuXHJcblx0XHRcdFx0XHRmcCA9ICQubW9iaWxlLmZpcnN0UGFnZSxcclxuXHJcblx0XHRcdFx0XHQvLyBHZXQgdGhlIGlkIG9mIHRoZSBmaXJzdCBwYWdlIGVsZW1lbnQgaWYgaXQgaGFzIG9uZS5cclxuXHRcdFx0XHRcdGZwSWQgPSBmcCAmJiBmcFswXSA/IGZwWzBdLmlkIDogdW5kZWZpbmVkO1xyXG5cclxuXHRcdFx0XHQvLyBUaGUgdXJsIHJlZmVycyB0byB0aGUgZmlyc3QgcGFnZSBpZiB0aGUgcGF0aCBtYXRjaGVzIHRoZSBkb2N1bWVudCBhbmRcclxuXHRcdFx0XHQvLyBpdCBlaXRoZXIgaGFzIG5vIGhhc2ggdmFsdWUsIG9yIHRoZSBoYXNoIGlzIGV4YWN0bHkgZXF1YWwgdG8gdGhlIGlkXHJcblx0XHRcdFx0Ly8gb2YgdGhlIGZpcnN0IHBhZ2UgZWxlbWVudC5cclxuXHRcdFx0XHRyZXR1cm4gc2FtZVBhdGggJiZcclxuXHRcdFx0XHRcdCggIXUuaGFzaCB8fFxyXG5cdFx0XHRcdFx0XHR1Lmhhc2ggPT09IFwiI1wiIHx8XHJcblx0XHRcdFx0XHRcdCggZnBJZCAmJiB1Lmhhc2gucmVwbGFjZSggL14jLywgXCJcIiApID09PSBmcElkICkgKTtcclxuXHRcdFx0fSxcclxuXHJcblx0XHRcdC8vIFNvbWUgZW1iZWRkZWQgYnJvd3NlcnMsIGxpa2UgdGhlIHdlYiB2aWV3IGluIFBob25lIEdhcCwgYWxsb3dcclxuXHRcdFx0Ly8gY3Jvc3MtZG9tYWluIFhIUiByZXF1ZXN0cyBpZiB0aGUgZG9jdW1lbnQgZG9pbmcgdGhlIHJlcXVlc3Qgd2FzIGxvYWRlZFxyXG5cdFx0XHQvLyB2aWEgdGhlIGZpbGU6Ly8gcHJvdG9jb2wuIFRoaXMgaXMgdXN1YWxseSB0byBhbGxvdyB0aGUgYXBwbGljYXRpb24gdG9cclxuXHRcdFx0Ly8gXCJwaG9uZSBob21lXCIgYW5kIGZldGNoIGFwcCBzcGVjaWZpYyBkYXRhLiBXZSBub3JtYWxseSBsZXQgdGhlIGJyb3dzZXJcclxuXHRcdFx0Ly8gaGFuZGxlIGV4dGVybmFsL2Nyb3NzLWRvbWFpbiB1cmxzLCBidXQgaWYgdGhlIGFsbG93Q3Jvc3NEb21haW5QYWdlc1xyXG5cdFx0XHQvLyBvcHRpb24gaXMgdHJ1ZSwgd2Ugd2lsbCBhbGxvdyBjcm9zcy1kb21haW4gaHR0cC9odHRwcyByZXF1ZXN0cyB0byBnb1xyXG5cdFx0XHQvLyB0aHJvdWdoIG91ciBwYWdlIGxvYWRpbmcgbG9naWMuXHJcblx0XHRcdGlzUGVybWl0dGVkQ3Jvc3NEb21haW5SZXF1ZXN0OiBmdW5jdGlvbiggZG9jVXJsLCByZXFVcmwgKSB7XHJcblx0XHRcdFx0cmV0dXJuICQubW9iaWxlLmFsbG93Q3Jvc3NEb21haW5QYWdlcyAmJlxyXG5cdFx0XHRcdFx0KGRvY1VybC5wcm90b2NvbCA9PT0gXCJmaWxlOlwiIHx8IGRvY1VybC5wcm90b2NvbCA9PT0gXCJjb250ZW50OlwiKSAmJlxyXG5cdFx0XHRcdFx0cmVxVXJsLnNlYXJjaCggL15odHRwcz86LyApICE9PSAtMTtcclxuXHRcdFx0fVxyXG5cdFx0fTtcclxuXHJcblx0XHRwYXRoLmRvY3VtZW50VXJsID0gcGF0aC5wYXJzZUxvY2F0aW9uKCk7XHJcblxyXG5cdFx0JGJhc2UgPSAkKCBcImhlYWRcIiApLmZpbmQoIFwiYmFzZVwiICk7XHJcblxyXG5cdFx0cGF0aC5kb2N1bWVudEJhc2UgPSAkYmFzZS5sZW5ndGggP1xyXG5cdFx0XHRwYXRoLnBhcnNlVXJsKCBwYXRoLm1ha2VVcmxBYnNvbHV0ZSggJGJhc2UuYXR0ciggXCJocmVmXCIgKSwgcGF0aC5kb2N1bWVudFVybC5ocmVmICkgKSA6XHJcblx0XHRcdHBhdGguZG9jdW1lbnRVcmw7XHJcblxyXG5cdFx0cGF0aC5kb2N1bWVudEJhc2VEaWZmZXJzID0gKHBhdGguZG9jdW1lbnRVcmwuaHJlZk5vSGFzaCAhPT0gcGF0aC5kb2N1bWVudEJhc2UuaHJlZk5vSGFzaCk7XHJcblxyXG5cdFx0Ly9yZXR1cm4gdGhlIG9yaWdpbmFsIGRvY3VtZW50IGJhc2UgdXJsXHJcblx0XHRwYXRoLmdldERvY3VtZW50QmFzZSA9IGZ1bmN0aW9uKCBhc1BhcnNlZE9iamVjdCApIHtcclxuXHRcdFx0cmV0dXJuIGFzUGFyc2VkT2JqZWN0ID8gJC5leHRlbmQoIHt9LCBwYXRoLmRvY3VtZW50QmFzZSApIDogcGF0aC5kb2N1bWVudEJhc2UuaHJlZjtcclxuXHRcdH07XHJcblxyXG5cdFx0Ly8gREVQUkVDQVRFRCBhcyBvZiAxLjQuMCAtIHJlbW92ZSBpbiAxLjUuMFxyXG5cdFx0JC5leHRlbmQoICQubW9iaWxlLCB7XHJcblxyXG5cdFx0XHQvL3JldHVybiB0aGUgb3JpZ2luYWwgZG9jdW1lbnQgdXJsXHJcblx0XHRcdGdldERvY3VtZW50VXJsOiBwYXRoLmdldERvY3VtZW50VXJsLFxyXG5cclxuXHRcdFx0Ly9yZXR1cm4gdGhlIG9yaWdpbmFsIGRvY3VtZW50IGJhc2UgdXJsXHJcblx0XHRcdGdldERvY3VtZW50QmFzZTogcGF0aC5nZXREb2N1bWVudEJhc2VcclxuXHRcdH0pO1xyXG59KSggalF1ZXJ5ICk7XHJcblxyXG5cclxuXHJcbihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xyXG5cdCQubW9iaWxlLkhpc3RvcnkgPSBmdW5jdGlvbiggc3RhY2ssIGluZGV4ICkge1xyXG5cdFx0dGhpcy5zdGFjayA9IHN0YWNrIHx8IFtdO1xyXG5cdFx0dGhpcy5hY3RpdmVJbmRleCA9IGluZGV4IHx8IDA7XHJcblx0fTtcclxuXHJcblx0JC5leHRlbmQoJC5tb2JpbGUuSGlzdG9yeS5wcm90b3R5cGUsIHtcclxuXHRcdGdldEFjdGl2ZTogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHJldHVybiB0aGlzLnN0YWNrWyB0aGlzLmFjdGl2ZUluZGV4IF07XHJcblx0XHR9LFxyXG5cclxuXHRcdGdldExhc3Q6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRyZXR1cm4gdGhpcy5zdGFja1sgdGhpcy5wcmV2aW91c0luZGV4IF07XHJcblx0XHR9LFxyXG5cclxuXHRcdGdldE5leHQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRyZXR1cm4gdGhpcy5zdGFja1sgdGhpcy5hY3RpdmVJbmRleCArIDEgXTtcclxuXHRcdH0sXHJcblxyXG5cdFx0Z2V0UHJldjogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHJldHVybiB0aGlzLnN0YWNrWyB0aGlzLmFjdGl2ZUluZGV4IC0gMSBdO1xyXG5cdFx0fSxcclxuXHJcblx0XHQvLyBhZGROZXcgaXMgdXNlZCB3aGVuZXZlciBhIG5ldyBwYWdlIGlzIGFkZGVkXHJcblx0XHRhZGQ6IGZ1bmN0aW9uKCB1cmwsIGRhdGEgKSB7XHJcblx0XHRcdGRhdGEgPSBkYXRhIHx8IHt9O1xyXG5cclxuXHRcdFx0Ly9pZiB0aGVyZSdzIGZvcndhcmQgaGlzdG9yeSwgd2lwZSBpdFxyXG5cdFx0XHRpZiAoIHRoaXMuZ2V0TmV4dCgpICkge1xyXG5cdFx0XHRcdHRoaXMuY2xlYXJGb3J3YXJkKCk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIGlmIHRoZSBoYXNoIGlzIGluY2x1ZGVkIGluIHRoZSBkYXRhIG1ha2Ugc3VyZSB0aGUgc2hhcGVcclxuXHRcdFx0Ly8gaXMgY29uc2lzdGVudCBmb3IgY29tcGFyaXNvblxyXG5cdFx0XHRpZiAoIGRhdGEuaGFzaCAmJiBkYXRhLmhhc2guaW5kZXhPZiggXCIjXCIgKSA9PT0gLTEpIHtcclxuXHRcdFx0XHRkYXRhLmhhc2ggPSBcIiNcIiArIGRhdGEuaGFzaDtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0ZGF0YS51cmwgPSB1cmw7XHJcblx0XHRcdHRoaXMuc3RhY2sucHVzaCggZGF0YSApO1xyXG5cdFx0XHR0aGlzLmFjdGl2ZUluZGV4ID0gdGhpcy5zdGFjay5sZW5ndGggLSAxO1xyXG5cdFx0fSxcclxuXHJcblx0XHQvL3dpcGUgdXJscyBhaGVhZCBvZiBhY3RpdmUgaW5kZXhcclxuXHRcdGNsZWFyRm9yd2FyZDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHRoaXMuc3RhY2sgPSB0aGlzLnN0YWNrLnNsaWNlKCAwLCB0aGlzLmFjdGl2ZUluZGV4ICsgMSApO1xyXG5cdFx0fSxcclxuXHJcblx0XHRmaW5kOiBmdW5jdGlvbiggdXJsLCBzdGFjaywgZWFybHlSZXR1cm4gKSB7XHJcblx0XHRcdHN0YWNrID0gc3RhY2sgfHwgdGhpcy5zdGFjaztcclxuXHJcblx0XHRcdHZhciBlbnRyeSwgaSwgbGVuZ3RoID0gc3RhY2subGVuZ3RoLCBpbmRleDtcclxuXHJcblx0XHRcdGZvciAoIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKysgKSB7XHJcblx0XHRcdFx0ZW50cnkgPSBzdGFja1tpXTtcclxuXHJcblx0XHRcdFx0aWYgKCBkZWNvZGVVUklDb21wb25lbnQodXJsKSA9PT0gZGVjb2RlVVJJQ29tcG9uZW50KGVudHJ5LnVybCkgfHxcclxuXHRcdFx0XHRcdGRlY29kZVVSSUNvbXBvbmVudCh1cmwpID09PSBkZWNvZGVVUklDb21wb25lbnQoZW50cnkuaGFzaCkgKSB7XHJcblx0XHRcdFx0XHRpbmRleCA9IGk7XHJcblxyXG5cdFx0XHRcdFx0aWYgKCBlYXJseVJldHVybiApIHtcclxuXHRcdFx0XHRcdFx0cmV0dXJuIGluZGV4O1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0cmV0dXJuIGluZGV4O1xyXG5cdFx0fSxcclxuXHJcblx0XHRjbG9zZXN0OiBmdW5jdGlvbiggdXJsICkge1xyXG5cdFx0XHR2YXIgY2xvc2VzdCwgYSA9IHRoaXMuYWN0aXZlSW5kZXg7XHJcblxyXG5cdFx0XHQvLyBGaXJzdCwgdGFrZSB0aGUgc2xpY2Ugb2YgdGhlIGhpc3Rvcnkgc3RhY2sgYmVmb3JlIHRoZSBjdXJyZW50IGluZGV4IGFuZCBzZWFyY2hcclxuXHRcdFx0Ly8gZm9yIGEgdXJsIG1hdGNoLiBJZiBvbmUgaXMgZm91bmQsIHdlJ2xsIGF2b2lkIGF2b2lkIGxvb2tpbmcgdGhyb3VnaCBmb3J3YXJkIGhpc3RvcnlcclxuXHRcdFx0Ly8gTk9URSB0aGUgcHJlZmVyZW5jZSBmb3IgYmFja3dhcmQgaGlzdG9yeSBtb3ZlbWVudCBpcyBkcml2ZW4gYnkgdGhlIGZhY3QgdGhhdFxyXG5cdFx0XHQvLyAgICAgIG1vc3QgbW9iaWxlIGJyb3dzZXJzIG9ubHkgaGF2ZSBhIGRlZGljYXRlZCBiYWNrIGJ1dHRvbiwgYW5kIHVzZXJzIHJhcmVseSB1c2VcclxuXHRcdFx0Ly8gICAgICB0aGUgZm9yd2FyZCBidXR0b24gaW4gZGVza3RvcCBicm93c2VyIGFueWhvd1xyXG5cdFx0XHRjbG9zZXN0ID0gdGhpcy5maW5kKCB1cmwsIHRoaXMuc3RhY2suc2xpY2UoMCwgYSkgKTtcclxuXHJcblx0XHRcdC8vIElmIG5vdGhpbmcgd2FzIGZvdW5kIGluIGJhY2t3YXJkIGhpc3RvcnkgY2hlY2sgZm9yd2FyZC4gVGhlIGB0cnVlYFxyXG5cdFx0XHQvLyB2YWx1ZSBwYXNzZWQgYXMgdGhlIHRoaXJkIHBhcmFtZXRlciBjYXVzZXMgdGhlIGZpbmQgbWV0aG9kIHRvIGJyZWFrXHJcblx0XHRcdC8vIG9uIHRoZSBmaXJzdCBtYXRjaCBpbiB0aGUgZm9yd2FyZCBoaXN0b3J5IHNsaWNlLiBUaGUgc3RhcnRpbmcgaW5kZXhcclxuXHRcdFx0Ly8gb2YgdGhlIHNsaWNlIG11c3QgdGhlbiBiZSBhZGRlZCB0byB0aGUgcmVzdWx0IHRvIGdldCB0aGUgZWxlbWVudCBpbmRleFxyXG5cdFx0XHQvLyBpbiB0aGUgb3JpZ2luYWwgaGlzdG9yeSBzdGFjayA6KCA6KFxyXG5cdFx0XHQvL1xyXG5cdFx0XHQvLyBUT0RPIHRoaXMgaXMgaHlwZXIgY29uZnVzaW5nIGFuZCBzaG91bGQgYmUgY2xlYW5lZCB1cCAodWdoIHNvIGJhZClcclxuXHRcdFx0aWYgKCBjbG9zZXN0ID09PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdFx0Y2xvc2VzdCA9IHRoaXMuZmluZCggdXJsLCB0aGlzLnN0YWNrLnNsaWNlKGEpLCB0cnVlICk7XHJcblx0XHRcdFx0Y2xvc2VzdCA9IGNsb3Nlc3QgPT09IHVuZGVmaW5lZCA/IGNsb3Nlc3QgOiBjbG9zZXN0ICsgYTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0cmV0dXJuIGNsb3Nlc3Q7XHJcblx0XHR9LFxyXG5cclxuXHRcdGRpcmVjdDogZnVuY3Rpb24oIG9wdHMgKSB7XHJcblx0XHRcdHZhciBuZXdBY3RpdmVJbmRleCA9IHRoaXMuY2xvc2VzdCggb3B0cy51cmwgKSwgYSA9IHRoaXMuYWN0aXZlSW5kZXg7XHJcblxyXG5cdFx0XHQvLyBzYXZlIG5ldyBwYWdlIGluZGV4LCBudWxsIGNoZWNrIHRvIHByZXZlbnQgZmFsc2V5IDAgcmVzdWx0XHJcblx0XHRcdC8vIHJlY29yZCB0aGUgcHJldmlvdXMgaW5kZXggZm9yIHJlZmVyZW5jZVxyXG5cdFx0XHRpZiAoIG5ld0FjdGl2ZUluZGV4ICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdFx0dGhpcy5hY3RpdmVJbmRleCA9IG5ld0FjdGl2ZUluZGV4O1xyXG5cdFx0XHRcdHRoaXMucHJldmlvdXNJbmRleCA9IGE7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIGludm9rZSBjYWxsYmFja3Mgd2hlcmUgYXBwcm9wcmlhdGVcclxuXHRcdFx0Ly9cclxuXHRcdFx0Ly8gVE9ETyB0aGlzIGlzIGFsc28gY29udm9sdXRlZCBhbmQgY29uZnVzaW5nXHJcblx0XHRcdGlmICggbmV3QWN0aXZlSW5kZXggPCBhICkge1xyXG5cdFx0XHRcdCggb3B0cy5wcmVzZW50IHx8IG9wdHMuYmFjayB8fCAkLm5vb3AgKSggdGhpcy5nZXRBY3RpdmUoKSwgXCJiYWNrXCIgKTtcclxuXHRcdFx0fSBlbHNlIGlmICggbmV3QWN0aXZlSW5kZXggPiBhICkge1xyXG5cdFx0XHRcdCggb3B0cy5wcmVzZW50IHx8IG9wdHMuZm9yd2FyZCB8fCAkLm5vb3AgKSggdGhpcy5nZXRBY3RpdmUoKSwgXCJmb3J3YXJkXCIgKTtcclxuXHRcdFx0fSBlbHNlIGlmICggbmV3QWN0aXZlSW5kZXggPT09IHVuZGVmaW5lZCAmJiBvcHRzLm1pc3NpbmcgKSB7XHJcblx0XHRcdFx0b3B0cy5taXNzaW5nKCB0aGlzLmdldEFjdGl2ZSgpICk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9KTtcclxufSkoIGpRdWVyeSApO1xyXG5cclxuXHJcblxyXG4oZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcclxuXHR2YXIgcGF0aCA9ICQubW9iaWxlLnBhdGgsXHJcblx0XHRpbml0aWFsSHJlZiA9IGxvY2F0aW9uLmhyZWY7XHJcblxyXG5cdCQubW9iaWxlLk5hdmlnYXRvciA9IGZ1bmN0aW9uKCBoaXN0b3J5ICkge1xyXG5cdFx0dGhpcy5oaXN0b3J5ID0gaGlzdG9yeTtcclxuXHRcdHRoaXMuaWdub3JlSW5pdGlhbEhhc2hDaGFuZ2UgPSB0cnVlO1xyXG5cclxuXHRcdCQubW9iaWxlLndpbmRvdy5iaW5kKHtcclxuXHRcdFx0XCJwb3BzdGF0ZS5oaXN0b3J5XCI6ICQucHJveHkoIHRoaXMucG9wc3RhdGUsIHRoaXMgKSxcclxuXHRcdFx0XCJoYXNoY2hhbmdlLmhpc3RvcnlcIjogJC5wcm94eSggdGhpcy5oYXNoY2hhbmdlLCB0aGlzIClcclxuXHRcdH0pO1xyXG5cdH07XHJcblxyXG5cdCQuZXh0ZW5kKCQubW9iaWxlLk5hdmlnYXRvci5wcm90b3R5cGUsIHtcclxuXHRcdHNxdWFzaDogZnVuY3Rpb24oIHVybCwgZGF0YSApIHtcclxuXHRcdFx0dmFyIHN0YXRlLCBocmVmLCBoYXNoID0gcGF0aC5pc1BhdGgodXJsKSA/IHBhdGguc3RyaXBIYXNoKHVybCkgOiB1cmw7XHJcblxyXG5cdFx0XHRocmVmID0gcGF0aC5zcXVhc2goIHVybCApO1xyXG5cclxuXHRcdFx0Ly8gbWFrZSBzdXJlIHRvIHByb3ZpZGUgdGhpcyBpbmZvcm1hdGlvbiB3aGVuIGl0IGlzbid0IGV4cGxpY2l0bHkgc2V0IGluIHRoZVxyXG5cdFx0XHQvLyBkYXRhIG9iamVjdCB0aGF0IHdhcyBwYXNzZWQgdG8gdGhlIHNxdWFzaCBtZXRob2RcclxuXHRcdFx0c3RhdGUgPSAkLmV4dGVuZCh7XHJcblx0XHRcdFx0aGFzaDogaGFzaCxcclxuXHRcdFx0XHR1cmw6IGhyZWZcclxuXHRcdFx0fSwgZGF0YSk7XHJcblxyXG5cdFx0XHQvLyByZXBsYWNlIHRoZSBjdXJyZW50IHVybCB3aXRoIHRoZSBuZXcgaHJlZiBhbmQgc3RvcmUgdGhlIHN0YXRlXHJcblx0XHRcdC8vIE5vdGUgdGhhdCBpbiBzb21lIGNhc2VzIHdlIG1pZ2h0IGJlIHJlcGxhY2luZyBhbiB1cmwgd2l0aCB0aGVcclxuXHRcdFx0Ly8gc2FtZSB1cmwuIFdlIGRvIHRoaXMgYW55d2F5cyBiZWNhdXNlIHdlIG5lZWQgdG8gbWFrZSBzdXJlIHRoYXRcclxuXHRcdFx0Ly8gYWxsIG9mIG91ciBoaXN0b3J5IGVudHJpZXMgaGF2ZSBhIHN0YXRlIG9iamVjdCBhc3NvY2lhdGVkIHdpdGhcclxuXHRcdFx0Ly8gdGhlbS4gVGhpcyBhbGxvd3MgdXMgdG8gd29yayBhcm91bmQgdGhlIGNhc2Ugd2hlcmUgJC5tb2JpbGUuYmFjaygpXHJcblx0XHRcdC8vIGlzIGNhbGxlZCB0byB0cmFuc2l0aW9uIGZyb20gYW4gZXh0ZXJuYWwgcGFnZSB0byBhbiBlbWJlZGRlZCBwYWdlLlxyXG5cdFx0XHQvLyBJbiB0aGF0IHBhcnRpY3VsYXIgY2FzZSwgYSBoYXNoY2hhbmdlIGV2ZW50IGlzICpOT1QqIGdlbmVyYXRlZCBieSB0aGUgYnJvd3Nlci5cclxuXHRcdFx0Ly8gRW5zdXJpbmcgZWFjaCBoaXN0b3J5IGVudHJ5IGhhcyBhIHN0YXRlIG9iamVjdCBtZWFucyB0aGF0IG9uUG9wU3RhdGUoKVxyXG5cdFx0XHQvLyB3aWxsIGFsd2F5cyB0cmlnZ2VyIG91ciBoYXNoY2hhbmdlIGNhbGxiYWNrIGV2ZW4gd2hlbiBhIGhhc2hjaGFuZ2UgZXZlbnRcclxuXHRcdFx0Ly8gaXMgbm90IGZpcmVkLlxyXG5cdFx0XHR3aW5kb3cuaGlzdG9yeS5yZXBsYWNlU3RhdGUoIHN0YXRlLCBzdGF0ZS50aXRsZSB8fCBkb2N1bWVudC50aXRsZSwgaHJlZiApO1xyXG5cclxuXHRcdFx0cmV0dXJuIHN0YXRlO1xyXG5cdFx0fSxcclxuXHJcblx0XHRoYXNoOiBmdW5jdGlvbiggdXJsLCBocmVmICkge1xyXG5cdFx0XHR2YXIgcGFyc2VkLCBsb2MsIGhhc2gsIHJlc29sdmVkO1xyXG5cclxuXHRcdFx0Ly8gR3JhYiB0aGUgaGFzaCBmb3IgcmVjb3JkaW5nLiBJZiB0aGUgcGFzc2VkIHVybCBpcyBhIHBhdGhcclxuXHRcdFx0Ly8gd2UgdXNlZCB0aGUgcGFyc2VkIHZlcnNpb24gb2YgdGhlIHNxdWFzaGVkIHVybCB0byByZWNvbnN0cnVjdCxcclxuXHRcdFx0Ly8gb3RoZXJ3aXNlIHdlIGFzc3VtZSBpdCdzIGEgaGFzaCBhbmQgc3RvcmUgaXQgZGlyZWN0bHlcclxuXHRcdFx0cGFyc2VkID0gcGF0aC5wYXJzZVVybCggdXJsICk7XHJcblx0XHRcdGxvYyA9IHBhdGgucGFyc2VMb2NhdGlvbigpO1xyXG5cclxuXHRcdFx0aWYgKCBsb2MucGF0aG5hbWUgKyBsb2Muc2VhcmNoID09PSBwYXJzZWQucGF0aG5hbWUgKyBwYXJzZWQuc2VhcmNoICkge1xyXG5cdFx0XHRcdC8vIElmIHRoZSBwYXRobmFtZSBhbmQgc2VhcmNoIG9mIHRoZSBwYXNzZWQgdXJsIGlzIGlkZW50aWNhbCB0byB0aGUgY3VycmVudCBsb2NcclxuXHRcdFx0XHQvLyB0aGVuIHdlIG11c3QgdXNlIHRoZSBoYXNoLiBPdGhlcndpc2UgdGhlcmUgd2lsbCBiZSBubyBldmVudFxyXG5cdFx0XHRcdC8vIGVnLCB1cmwgPSBcIi9mb28vYmFyP2JheiNiYW5nXCIsIGxvY2F0aW9uLmhyZWYgPSBcImh0dHA6Ly9leGFtcGxlLmNvbS9mb28vYmFyP2JhelwiXHJcblx0XHRcdFx0aGFzaCA9IHBhcnNlZC5oYXNoID8gcGFyc2VkLmhhc2ggOiBwYXJzZWQucGF0aG5hbWUgKyBwYXJzZWQuc2VhcmNoO1xyXG5cdFx0XHR9IGVsc2UgaWYgKCBwYXRoLmlzUGF0aCh1cmwpICkge1xyXG5cdFx0XHRcdHJlc29sdmVkID0gcGF0aC5wYXJzZVVybCggaHJlZiApO1xyXG5cdFx0XHRcdC8vIElmIHRoZSBwYXNzZWQgdXJsIGlzIGEgcGF0aCwgbWFrZSBpdCBkb21haW4gcmVsYXRpdmUgYW5kIHJlbW92ZSBhbnkgdHJhaWxpbmcgaGFzaFxyXG5cdFx0XHRcdGhhc2ggPSByZXNvbHZlZC5wYXRobmFtZSArIHJlc29sdmVkLnNlYXJjaCArIChwYXRoLmlzUHJlc2VydmFibGVIYXNoKCByZXNvbHZlZC5oYXNoICk/IHJlc29sdmVkLmhhc2gucmVwbGFjZSggXCIjXCIsIFwiXCIgKSA6IFwiXCIpO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdGhhc2ggPSB1cmw7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHJldHVybiBoYXNoO1xyXG5cdFx0fSxcclxuXHJcblx0XHQvLyBUT0RPIHJlY29uc2lkZXIgbmFtZVxyXG5cdFx0Z286IGZ1bmN0aW9uKCB1cmwsIGRhdGEsIG5vRXZlbnRzICkge1xyXG5cdFx0XHR2YXIgc3RhdGUsIGhyZWYsIGhhc2gsIHBvcHN0YXRlRXZlbnQsXHJcblx0XHRcdFx0aXNQb3BTdGF0ZUV2ZW50ID0gJC5ldmVudC5zcGVjaWFsLm5hdmlnYXRlLmlzUHVzaFN0YXRlRW5hYmxlZCgpO1xyXG5cclxuXHRcdFx0Ly8gR2V0IHRoZSB1cmwgYXMgaXQgd291bGQgbG9vayBzcXVhc2hlZCBvbiB0byB0aGUgY3VycmVudCByZXNvbHV0aW9uIHVybFxyXG5cdFx0XHRocmVmID0gcGF0aC5zcXVhc2goIHVybCApO1xyXG5cclxuXHRcdFx0Ly8gc29ydCBvdXQgd2hhdCB0aGUgaGFzaCBzb3VsZCBiZSBmcm9tIHRoZSB1cmxcclxuXHRcdFx0aGFzaCA9IHRoaXMuaGFzaCggdXJsLCBocmVmICk7XHJcblxyXG5cdFx0XHQvLyBIZXJlIHdlIHByZXZlbnQgdGhlIG5leHQgaGFzaCBjaGFuZ2Ugb3IgcG9wc3RhdGUgZXZlbnQgZnJvbSBkb2luZyBhbnlcclxuXHRcdFx0Ly8gaGlzdG9yeSBtYW5hZ2VtZW50LiBJbiB0aGUgY2FzZSBvZiBoYXNoY2hhbmdlIHdlIGRvbid0IHN3YWxsb3cgaXRcclxuXHRcdFx0Ly8gaWYgdGhlcmUgd2lsbCBiZSBubyBoYXNoY2hhbmdlIGZpcmVkIChzaW5jZSB0aGF0IHdvbid0IHJlc2V0IHRoZSB2YWx1ZSlcclxuXHRcdFx0Ly8gYW5kIHdpbGwgc3dhbGxvdyB0aGUgZm9sbG93aW5nIGhhc2hjaGFuZ2VcclxuXHRcdFx0aWYgKCBub0V2ZW50cyAmJiBoYXNoICE9PSBwYXRoLnN0cmlwSGFzaChwYXRoLnBhcnNlTG9jYXRpb24oKS5oYXNoKSApIHtcclxuXHRcdFx0XHR0aGlzLnByZXZlbnROZXh0SGFzaENoYW5nZSA9IG5vRXZlbnRzO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBJTVBPUlRBTlQgaW4gdGhlIGNhc2Ugd2hlcmUgcG9wc3RhdGUgaXMgc3VwcG9ydGVkIHRoZSBldmVudCB3aWxsIGJlIHRyaWdnZXJlZFxyXG5cdFx0XHQvLyAgICAgIGRpcmVjdGx5LCBzdG9wcGluZyBmdXJ0aGVyIGV4ZWN1dGlvbiAtIGllLCBpbnRlcnVwdGluZyB0aGUgZmxvdyBvZiB0aGlzXHJcblx0XHRcdC8vICAgICAgbWV0aG9kIGNhbGwgdG8gZmlyZSBiaW5kaW5ncyBhdCB0aGlzIGV4cHJlc3Npb24uIEJlbG93IHRoZSBuYXZpZ2F0ZSBtZXRob2RcclxuXHRcdFx0Ly8gICAgICB0aGVyZSBpcyBhIGJpbmRpbmcgdG8gY2F0Y2ggdGhpcyBldmVudCBhbmQgc3RvcCBpdHMgcHJvcGFnYXRpb24uXHJcblx0XHRcdC8vXHJcblx0XHRcdC8vICAgICAgV2UgdGhlbiB0cmlnZ2VyIGEgbmV3IHBvcHN0YXRlIGV2ZW50IG9uIHRoZSB3aW5kb3cgd2l0aCBhIG51bGwgc3RhdGVcclxuXHRcdFx0Ly8gICAgICBzbyB0aGF0IHRoZSBuYXZpZ2F0ZSBldmVudHMgY2FuIGNvbmNsdWRlIHRoZWlyIHdvcmsgcHJvcGVybHlcclxuXHRcdFx0Ly9cclxuXHRcdFx0Ly8gaWYgdGhlIHVybCBpcyBhIHBhdGggd2Ugd2FudCB0byBwcmVzZXJ2ZSB0aGUgcXVlcnkgcGFyYW1zIHRoYXQgYXJlIGF2YWlsYWJsZSBvblxyXG5cdFx0XHQvLyB0aGUgY3VycmVudCB1cmwuXHJcblx0XHRcdHRoaXMucHJldmVudEhhc2hBc3NpZ25Qb3BTdGF0ZSA9IHRydWU7XHJcblx0XHRcdHdpbmRvdy5sb2NhdGlvbi5oYXNoID0gaGFzaDtcclxuXHJcblx0XHRcdC8vIElmIHBvcHN0YXRlIGlzIGVuYWJsZWQgYW5kIHRoZSBicm93c2VyIHRyaWdnZXJzIGBwb3BzdGF0ZWAgZXZlbnRzIHdoZW4gdGhlIGhhc2hcclxuXHRcdFx0Ly8gaXMgc2V0ICh0aGlzIG9mdGVuIGhhcHBlbnMgaW1tZWRpYXRlbHkgaW4gYnJvd3NlcnMgbGlrZSBDaHJvbWUpLCB0aGVuIHRoZVxyXG5cdFx0XHQvLyB0aGlzIGZsYWcgd2lsbCBiZSBzZXQgdG8gZmFsc2UgYWxyZWFkeS4gSWYgaXQncyBhIGJyb3dzZXIgdGhhdCBkb2VzIG5vdCB0cmlnZ2VyXHJcblx0XHRcdC8vIGEgYHBvcHN0YXRlYCBvbiBoYXNoIGFzc2lnbmVtZW50IG9yIGByZXBsYWNlU3RhdGVgIHRoZW4gd2UgbmVlZCBhdm9pZCB0aGUgYnJhbmNoXHJcblx0XHRcdC8vIHRoYXQgc3dhbGxvd3MgdGhlIGV2ZW50IGNyZWF0ZWQgYnkgdGhlIHBvcHN0YXRlIGdlbmVyYXRlZCBieSB0aGUgaGFzaCBhc3NpZ25tZW50XHJcblx0XHRcdC8vIEF0IHRoZSB0aW1lIG9mIHRoaXMgd3JpdGluZyB0aGlzIGhhcHBlbnMgd2l0aCBPcGVyYSAxMiBhbmQgc29tZSB2ZXJzaW9uIG9mIElFXHJcblx0XHRcdHRoaXMucHJldmVudEhhc2hBc3NpZ25Qb3BTdGF0ZSA9IGZhbHNlO1xyXG5cclxuXHRcdFx0c3RhdGUgPSAkLmV4dGVuZCh7XHJcblx0XHRcdFx0dXJsOiBocmVmLFxyXG5cdFx0XHRcdGhhc2g6IGhhc2gsXHJcblx0XHRcdFx0dGl0bGU6IGRvY3VtZW50LnRpdGxlXHJcblx0XHRcdH0sIGRhdGEpO1xyXG5cclxuXHRcdFx0aWYgKCBpc1BvcFN0YXRlRXZlbnQgKSB7XHJcblx0XHRcdFx0cG9wc3RhdGVFdmVudCA9IG5ldyAkLkV2ZW50KCBcInBvcHN0YXRlXCIgKTtcclxuXHRcdFx0XHRwb3BzdGF0ZUV2ZW50Lm9yaWdpbmFsRXZlbnQgPSB7XHJcblx0XHRcdFx0XHR0eXBlOiBcInBvcHN0YXRlXCIsXHJcblx0XHRcdFx0XHRzdGF0ZTogbnVsbFxyXG5cdFx0XHRcdH07XHJcblxyXG5cdFx0XHRcdHRoaXMuc3F1YXNoKCB1cmwsIHN0YXRlICk7XHJcblxyXG5cdFx0XHRcdC8vIFRyaWdnZXIgYSBuZXcgZmF1eCBwb3BzdGF0ZSBldmVudCB0byByZXBsYWNlIHRoZSBvbmUgdGhhdCB3ZVxyXG5cdFx0XHRcdC8vIGNhdWdodCB0aGF0IHdhcyB0cmlnZ2VyZWQgYnkgdGhlIGhhc2ggc2V0dGluZyBhYm92ZS5cclxuXHRcdFx0XHRpZiAoICFub0V2ZW50cyApIHtcclxuXHRcdFx0XHRcdHRoaXMuaWdub3JlUG9wU3RhdGUgPSB0cnVlO1xyXG5cdFx0XHRcdFx0JC5tb2JpbGUud2luZG93LnRyaWdnZXIoIHBvcHN0YXRlRXZlbnQgKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIHJlY29yZCB0aGUgaGlzdG9yeSBlbnRyeSBzbyB0aGF0IHRoZSBpbmZvcm1hdGlvbiBjYW4gYmUgaW5jbHVkZWRcclxuXHRcdFx0Ly8gaW4gaGFzaGNoYW5nZSBldmVudCBkcml2ZW4gbmF2aWdhdGUgZXZlbnRzIGluIGEgc2ltaWxhciBmYXNoaW9uIHRvXHJcblx0XHRcdC8vIHRoZSBzdGF0ZSB0aGF0J3MgcHJvdmlkZWQgYnkgcG9wc3RhdGVcclxuXHRcdFx0dGhpcy5oaXN0b3J5LmFkZCggc3RhdGUudXJsLCBzdGF0ZSApO1xyXG5cdFx0fSxcclxuXHJcblx0XHQvLyBUaGlzIGJpbmRpbmcgaXMgaW50ZW5kZWQgdG8gY2F0Y2ggdGhlIHBvcHN0YXRlIGV2ZW50cyB0aGF0IGFyZSBmaXJlZFxyXG5cdFx0Ly8gd2hlbiBleGVjdXRpb24gb2YgdGhlIGAkLm5hdmlnYXRlYCBtZXRob2Qgc3RvcHMgYXQgd2luZG93LmxvY2F0aW9uLmhhc2ggPSB1cmw7XHJcblx0XHQvLyBhbmQgY29tcGxldGVseSBwcmV2ZW50IHRoZW0gZnJvbSBwcm9wYWdhdGluZy4gVGhlIHBvcHN0YXRlIGV2ZW50IHdpbGwgdGhlbiBiZVxyXG5cdFx0Ly8gcmV0cmlnZ2VyZWQgYWZ0ZXIgZXhlY3V0aW9uIHJlc3VtZXNcclxuXHRcdC8vXHJcblx0XHQvLyBUT0RPIGdyYWIgdGhlIG9yaWdpbmFsIGV2ZW50IGhlcmUgYW5kIHVzZSBpdCBmb3IgdGhlIHN5bnRoZXRpYyBldmVudCBpbiB0aGVcclxuXHRcdC8vICAgICAgc2Vjb25kIGhhbGYgb2YgdGhlIG5hdmlnYXRlIGV4ZWN1dGlvbiB0aGF0IHdpbGwgZm9sbG93IHRoaXMgYmluZGluZ1xyXG5cdFx0cG9wc3RhdGU6IGZ1bmN0aW9uKCBldmVudCApIHtcclxuXHRcdFx0dmFyIGhhc2gsIHN0YXRlO1xyXG5cclxuXHRcdFx0Ly8gUGFydGx5IHRvIHN1cHBvcnQgb3VyIHRlc3Qgc3VpdGUgd2hpY2ggbWFudWFsbHkgYWx0ZXJzIHRoZSBzdXBwb3J0XHJcblx0XHRcdC8vIHZhbHVlIHRvIHRlc3QgaGFzaGNoYW5nZS4gUGFydGx5IHRvIHByZXZlbnQgYWxsIGFyb3VuZCB3ZWlyZG5lc3NcclxuXHRcdFx0aWYgKCAhJC5ldmVudC5zcGVjaWFsLm5hdmlnYXRlLmlzUHVzaFN0YXRlRW5hYmxlZCgpICkge1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gSWYgdGhpcyBpcyB0aGUgcG9wc3RhdGUgdHJpZ2dlcmVkIGJ5IHRoZSBhY3R1YWwgYWx0ZXJhdGlvbiBvZiB0aGUgaGFzaFxyXG5cdFx0XHQvLyBwcmV2ZW50IGl0IGNvbXBsZXRlbHkuIEhpc3RvcnkgaXMgdHJhY2tlZCBtYW51YWxseVxyXG5cdFx0XHRpZiAoIHRoaXMucHJldmVudEhhc2hBc3NpZ25Qb3BTdGF0ZSApIHtcclxuXHRcdFx0XHR0aGlzLnByZXZlbnRIYXNoQXNzaWduUG9wU3RhdGUgPSBmYWxzZTtcclxuXHRcdFx0XHRldmVudC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIGlmIHRoaXMgaXMgdGhlIHBvcHN0YXRlIHRyaWdnZXJlZCBhZnRlciB0aGUgYHJlcGxhY2VTdGF0ZWAgY2FsbCBpbiB0aGUgZ29cclxuXHRcdFx0Ly8gbWV0aG9kLCB0aGVuIHNpbXBseSBpZ25vcmUgaXQuIFRoZSBoaXN0b3J5IGVudHJ5IGhhcyBhbHJlYWR5IGJlZW4gY2FwdHVyZWRcclxuXHRcdFx0aWYgKCB0aGlzLmlnbm9yZVBvcFN0YXRlICkge1xyXG5cdFx0XHRcdHRoaXMuaWdub3JlUG9wU3RhdGUgPSBmYWxzZTtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIElmIHRoZXJlIGlzIG5vIHN0YXRlLCBhbmQgdGhlIGhpc3Rvcnkgc3RhY2sgbGVuZ3RoIGlzIG9uZSB3ZXJlXHJcblx0XHRcdC8vIHByb2JhYmx5IGdldHRpbmcgdGhlIHBhZ2UgbG9hZCBwb3BzdGF0ZSBmaXJlZCBieSBicm93c2VycyBsaWtlIGNocm9tZVxyXG5cdFx0XHQvLyBhdm9pZCBpdCBhbmQgc2V0IHRoZSBvbmUgdGltZSBmbGFnIHRvIGZhbHNlLlxyXG5cdFx0XHQvLyBUT0RPOiBEbyB3ZSByZWFsbHkgbmVlZCBhbGwgdGhlc2UgY29uZGl0aW9ucz8gQ29tcGFyaW5nIGxvY2F0aW9uIGhyZWZzXHJcblx0XHRcdC8vIHNob3VsZCBiZSBzdWZmaWNpZW50LlxyXG5cdFx0XHRpZiAoICFldmVudC5vcmlnaW5hbEV2ZW50LnN0YXRlICYmXHJcblx0XHRcdFx0dGhpcy5oaXN0b3J5LnN0YWNrLmxlbmd0aCA9PT0gMSAmJlxyXG5cdFx0XHRcdHRoaXMuaWdub3JlSW5pdGlhbEhhc2hDaGFuZ2UgKSB7XHJcblx0XHRcdFx0dGhpcy5pZ25vcmVJbml0aWFsSGFzaENoYW5nZSA9IGZhbHNlO1xyXG5cclxuXHRcdFx0XHRpZiAoIGxvY2F0aW9uLmhyZWYgPT09IGluaXRpYWxIcmVmICkge1xyXG5cdFx0XHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIGFjY291bnQgZm9yIGRpcmVjdCBtYW5pcHVsYXRpb24gb2YgdGhlIGhhc2guIFRoYXQgaXMsIHdlIHdpbGwgcmVjZWl2ZSBhIHBvcHN0YXRlXHJcblx0XHRcdC8vIHdoZW4gdGhlIGhhc2ggaXMgY2hhbmdlZCBieSBhc3NpZ25tZW50LCBhbmQgaXQgd29uJ3QgaGF2ZSBhIHN0YXRlIGFzc29jaWF0ZWQuIFdlXHJcblx0XHRcdC8vIHRoZW4gbmVlZCB0byBzcXVhc2ggdGhlIGhhc2guIFNlZSBiZWxvdyBmb3IgaGFuZGxpbmcgb2YgaGFzaCBhc3NpZ25tZW50IHRoYXRcclxuXHRcdFx0Ly8gbWF0Y2hlcyBhbiBleGlzdGluZyBoaXN0b3J5IGVudHJ5XHJcblx0XHRcdC8vIFRPRE8gaXQgbWlnaHQgYmUgYmV0dGVyIHRvIG9ubHkgYWRkIHRvIHRoZSBoaXN0b3J5IHN0YWNrXHJcblx0XHRcdC8vICAgICAgd2hlbiB0aGUgaGFzaCBpcyBhZGphY2VudCB0byB0aGUgYWN0aXZlIGhpc3RvcnkgZW50cnlcclxuXHRcdFx0aGFzaCA9IHBhdGgucGFyc2VMb2NhdGlvbigpLmhhc2g7XHJcblx0XHRcdGlmICggIWV2ZW50Lm9yaWdpbmFsRXZlbnQuc3RhdGUgJiYgaGFzaCApIHtcclxuXHRcdFx0XHQvLyBzcXVhc2ggdGhlIGhhc2ggdGhhdCdzIGJlZW4gYXNzaWduZWQgb24gdGhlIFVSTCB3aXRoIHJlcGxhY2VTdGF0ZVxyXG5cdFx0XHRcdC8vIGFsc28gZ3JhYiB0aGUgcmVzdWx0aW5nIHN0YXRlIG9iamVjdCBmb3Igc3RvcmFnZVxyXG5cdFx0XHRcdHN0YXRlID0gdGhpcy5zcXVhc2goIGhhc2ggKTtcclxuXHJcblx0XHRcdFx0Ly8gcmVjb3JkIHRoZSBuZXcgaGFzaCBhcyBhbiBhZGRpdGlvbmFsIGhpc3RvcnkgZW50cnlcclxuXHRcdFx0XHQvLyB0byBtYXRjaCB0aGUgYnJvd3NlcidzIHRyZWF0bWVudCBvZiBoYXNoIGFzc2lnbm1lbnRcclxuXHRcdFx0XHR0aGlzLmhpc3RvcnkuYWRkKCBzdGF0ZS51cmwsIHN0YXRlICk7XHJcblxyXG5cdFx0XHRcdC8vIHBhc3MgdGhlIG5ld2x5IGNyZWF0ZWQgc3RhdGUgaW5mb3JtYXRpb25cclxuXHRcdFx0XHQvLyBhbG9uZyB3aXRoIHRoZSBldmVudFxyXG5cdFx0XHRcdGV2ZW50Lmhpc3RvcnlTdGF0ZSA9IHN0YXRlO1xyXG5cclxuXHRcdFx0XHQvLyBkbyBub3QgYWx0ZXIgaGlzdG9yeSwgd2UndmUgYWRkZWQgYSBuZXcgaGlzdG9yeSBlbnRyeVxyXG5cdFx0XHRcdC8vIHNvIHdlIGtub3cgd2hlcmUgd2UgYXJlXHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBJZiBhbGwgZWxzZSBmYWlscyB0aGlzIGlzIGEgcG9wc3RhdGUgdGhhdCBjb21lcyBmcm9tIHRoZSBiYWNrIG9yIGZvcndhcmQgYnV0dG9uc1xyXG5cdFx0XHQvLyBtYWtlIHN1cmUgdG8gc2V0IHRoZSBzdGF0ZSBvZiBvdXIgaGlzdG9yeSBzdGFjayBwcm9wZXJseSwgYW5kIHJlY29yZCB0aGUgZGlyZWN0aW9uYWxpdHlcclxuXHRcdFx0dGhpcy5oaXN0b3J5LmRpcmVjdCh7XHJcblx0XHRcdFx0dXJsOiAoZXZlbnQub3JpZ2luYWxFdmVudC5zdGF0ZSB8fCB7fSkudXJsIHx8IGhhc2gsXHJcblxyXG5cdFx0XHRcdC8vIFdoZW4gdGhlIHVybCBpcyBlaXRoZXIgZm9yd2FyZCBvciBiYWNrd2FyZCBpbiBoaXN0b3J5IGluY2x1ZGUgdGhlIGVudHJ5XHJcblx0XHRcdFx0Ly8gYXMgZGF0YSBvbiB0aGUgZXZlbnQgb2JqZWN0IGZvciBtZXJnaW5nIGFzIGRhdGEgaW4gdGhlIG5hdmlnYXRlIGV2ZW50XHJcblx0XHRcdFx0cHJlc2VudDogZnVuY3Rpb24oIGhpc3RvcnlFbnRyeSwgZGlyZWN0aW9uICkge1xyXG5cdFx0XHRcdFx0Ly8gbWFrZSBzdXJlIHRvIGNyZWF0ZSBhIG5ldyBvYmplY3QgdG8gcGFzcyBkb3duIGFzIHRoZSBuYXZpZ2F0ZSBldmVudCBkYXRhXHJcblx0XHRcdFx0XHRldmVudC5oaXN0b3J5U3RhdGUgPSAkLmV4dGVuZCh7fSwgaGlzdG9yeUVudHJ5KTtcclxuXHRcdFx0XHRcdGV2ZW50Lmhpc3RvcnlTdGF0ZS5kaXJlY3Rpb24gPSBkaXJlY3Rpb247XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHRcdH0sXHJcblxyXG5cdFx0Ly8gTk9URSBtdXN0IGJpbmQgYmVmb3JlIGBuYXZpZ2F0ZWAgc3BlY2lhbCBldmVudCBoYXNoY2hhbmdlIGJpbmRpbmcgb3RoZXJ3aXNlIHRoZVxyXG5cdFx0Ly8gICAgICBuYXZpZ2F0aW9uIGRhdGEgd29uJ3QgYmUgYXR0YWNoZWQgdG8gdGhlIGhhc2hjaGFuZ2UgZXZlbnQgaW4gdGltZSBmb3IgdGhvc2VcclxuXHRcdC8vICAgICAgYmluZGluZ3MgdG8gYXR0YWNoIGl0IHRvIHRoZSBgbmF2aWdhdGVgIHNwZWNpYWwgZXZlbnRcclxuXHRcdC8vIFRPRE8gYWRkIGEgY2hlY2sgaGVyZSB0aGF0IGBoYXNoY2hhbmdlLm5hdmlnYXRlYCBpcyBib3VuZCBhbHJlYWR5IG90aGVyd2lzZSBpdCdzXHJcblx0XHQvLyAgICAgIGJyb2tlbiAoZXhjZXB0aW9uPylcclxuXHRcdGhhc2hjaGFuZ2U6IGZ1bmN0aW9uKCBldmVudCApIHtcclxuXHRcdFx0dmFyIGhpc3RvcnksIGhhc2g7XHJcblxyXG5cdFx0XHQvLyBJZiBoYXNoY2hhbmdlIGxpc3RlbmluZyBpcyBleHBsaWNpdGx5IGRpc2FibGVkIG9yIHB1c2hzdGF0ZSBpcyBzdXBwb3J0ZWRcclxuXHRcdFx0Ly8gYXZvaWQgbWFraW5nIHVzZSBvZiB0aGUgaGFzaGNoYW5nZSBoYW5kbGVyLlxyXG5cdFx0XHRpZiAoISQuZXZlbnQuc3BlY2lhbC5uYXZpZ2F0ZS5pc0hhc2hDaGFuZ2VFbmFibGVkKCkgfHxcclxuXHRcdFx0XHQkLmV2ZW50LnNwZWNpYWwubmF2aWdhdGUuaXNQdXNoU3RhdGVFbmFibGVkKCkgKSB7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBPbiBvY2Nhc2lvbiBleHBsaWNpdGx5IHdhbnQgdG8gcHJldmVudCB0aGUgbmV4dCBoYXNoIGZyb20gcHJvcG9nYXRpbmcgYmVjYXVzZSB3ZSBvbmx5XHJcblx0XHRcdC8vIHdpdGggdG8gYWx0ZXIgdGhlIHVybCB0byByZXByZXNlbnQgdGhlIG5ldyBzdGF0ZSBkbyBzbyBoZXJlXHJcblx0XHRcdGlmICggdGhpcy5wcmV2ZW50TmV4dEhhc2hDaGFuZ2UgKSB7XHJcblx0XHRcdFx0dGhpcy5wcmV2ZW50TmV4dEhhc2hDaGFuZ2UgPSBmYWxzZTtcclxuXHRcdFx0XHRldmVudC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGhpc3RvcnkgPSB0aGlzLmhpc3Rvcnk7XHJcblx0XHRcdGhhc2ggPSBwYXRoLnBhcnNlTG9jYXRpb24oKS5oYXNoO1xyXG5cclxuXHRcdFx0Ly8gSWYgdGhpcyBpcyBhIGhhc2hjaGFuZ2UgY2F1c2VkIGJ5IHRoZSBiYWNrIG9yIGZvcndhcmQgYnV0dG9uXHJcblx0XHRcdC8vIG1ha2Ugc3VyZSB0byBzZXQgdGhlIHN0YXRlIG9mIG91ciBoaXN0b3J5IHN0YWNrIHByb3Blcmx5XHJcblx0XHRcdHRoaXMuaGlzdG9yeS5kaXJlY3Qoe1xyXG5cdFx0XHRcdHVybDogaGFzaCxcclxuXHJcblx0XHRcdFx0Ly8gV2hlbiB0aGUgdXJsIGlzIGVpdGhlciBmb3J3YXJkIG9yIGJhY2t3YXJkIGluIGhpc3RvcnkgaW5jbHVkZSB0aGUgZW50cnlcclxuXHRcdFx0XHQvLyBhcyBkYXRhIG9uIHRoZSBldmVudCBvYmplY3QgZm9yIG1lcmdpbmcgYXMgZGF0YSBpbiB0aGUgbmF2aWdhdGUgZXZlbnRcclxuXHRcdFx0XHRwcmVzZW50OiBmdW5jdGlvbiggaGlzdG9yeUVudHJ5LCBkaXJlY3Rpb24gKSB7XHJcblx0XHRcdFx0XHQvLyBtYWtlIHN1cmUgdG8gY3JlYXRlIGEgbmV3IG9iamVjdCB0byBwYXNzIGRvd24gYXMgdGhlIG5hdmlnYXRlIGV2ZW50IGRhdGFcclxuXHRcdFx0XHRcdGV2ZW50Lmhhc2hjaGFuZ2VTdGF0ZSA9ICQuZXh0ZW5kKHt9LCBoaXN0b3J5RW50cnkpO1xyXG5cdFx0XHRcdFx0ZXZlbnQuaGFzaGNoYW5nZVN0YXRlLmRpcmVjdGlvbiA9IGRpcmVjdGlvbjtcclxuXHRcdFx0XHR9LFxyXG5cclxuXHRcdFx0XHQvLyBXaGVuIHdlIGRvbid0IGZpbmQgYSBoYXNoIGluIG91ciBoaXN0b3J5IGNsZWFybHkgd2UncmUgYWltaW5nIHRvIGdvIHRoZXJlXHJcblx0XHRcdFx0Ly8gcmVjb3JkIHRoZSBlbnRyeSBhcyBuZXcgZm9yIGZ1dHVyZSB0cmF2ZXJzYWxcclxuXHRcdFx0XHQvL1xyXG5cdFx0XHRcdC8vIE5PVEUgaXQncyBub3QgZW50aXJlbHkgY2xlYXIgdGhhdCB0aGlzIGlzIHRoZSByaWdodCB0aGluZyB0byBkbyBnaXZlbiB0aGF0IHdlXHJcblx0XHRcdFx0Ly8gICAgICBjYW4ndCBrbm93IHRoZSB1c2VycyBpbnRlbnRpb24uIEl0IG1pZ2h0IGJlIGJldHRlciB0byBleHBsaWNpdGx5IF9ub3RfXHJcblx0XHRcdFx0Ly8gICAgICBzdXBwb3J0IGxvY2F0aW9uLmhhc2ggYXNzaWdubWVudCBpbiBwcmVmZXJlbmNlIHRvICQubmF2aWdhdGUgY2FsbHNcclxuXHRcdFx0XHQvLyBUT0RPIGZpcnN0IGFyZyB0byBhZGQgc2hvdWxkIGJlIHRoZSBocmVmLCBidXQgaXQgY2F1c2VzIGlzc3VlcyBpbiBpZGVudGlmeWluZ1xyXG5cdFx0XHRcdC8vICAgICAgZW1iZWRlZCBwYWdlc1xyXG5cdFx0XHRcdG1pc3Npbmc6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0aGlzdG9yeS5hZGQoIGhhc2gsIHtcclxuXHRcdFx0XHRcdFx0aGFzaDogaGFzaCxcclxuXHRcdFx0XHRcdFx0dGl0bGU6IGRvY3VtZW50LnRpdGxlXHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cdH0pO1xyXG59KSggalF1ZXJ5ICk7XHJcblxyXG5cclxuXHJcbihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xyXG5cdC8vIFRPRE8gY29uc2lkZXIgcXVldWVpbmcgbmF2aWdhdGlvbiBhY3Rpdml0eSB1bnRpbCBwcmV2aW91cyBhY3Rpdml0aWVzIGhhdmUgY29tcGxldGVkXHJcblx0Ly8gICAgICBzbyB0aGF0IGVuZCB1c2VycyBkb24ndCBoYXZlIHRvIHRoaW5rIGFib3V0IGl0LiBQdW50aW5nIGZvciBub3dcclxuXHQvLyBUT0RPICEhIG1vdmUgdGhlIGV2ZW50IGJpbmRpbmdzIGludG8gY2FsbGJhY2tzIG9uIHRoZSBuYXZpZ2F0ZSBldmVudFxyXG5cdCQubW9iaWxlLm5hdmlnYXRlID0gZnVuY3Rpb24oIHVybCwgZGF0YSwgbm9FdmVudHMgKSB7XHJcblx0XHQkLm1vYmlsZS5uYXZpZ2F0ZS5uYXZpZ2F0b3IuZ28oIHVybCwgZGF0YSwgbm9FdmVudHMgKTtcclxuXHR9O1xyXG5cclxuXHQvLyBleHBvc2UgdGhlIGhpc3Rvcnkgb24gdGhlIG5hdmlnYXRlIG1ldGhvZCBpbiBhbnRpY2lwYXRpb24gb2YgZnVsbCBpbnRlZ3JhdGlvbiB3aXRoXHJcblx0Ly8gZXhpc3RpbmcgbmF2aWdhdGlvbiBmdW5jdGlvbmFsdHkgdGhhdCBpcyB0aWdodGx5IGNvdXBsZWQgdG8gdGhlIGhpc3RvcnkgaW5mb3JtYXRpb25cclxuXHQkLm1vYmlsZS5uYXZpZ2F0ZS5oaXN0b3J5ID0gbmV3ICQubW9iaWxlLkhpc3RvcnkoKTtcclxuXHJcblx0Ly8gaW5zdGFudGlhdGUgYW4gaW5zdGFuY2Ugb2YgdGhlIG5hdmlnYXRvciBmb3IgdXNlIHdpdGhpbiB0aGUgJC5uYXZpZ2F0ZSBtZXRob2RcclxuXHQkLm1vYmlsZS5uYXZpZ2F0ZS5uYXZpZ2F0b3IgPSBuZXcgJC5tb2JpbGUuTmF2aWdhdG9yKCAkLm1vYmlsZS5uYXZpZ2F0ZS5oaXN0b3J5ICk7XHJcblxyXG5cdHZhciBsb2MgPSAkLm1vYmlsZS5wYXRoLnBhcnNlTG9jYXRpb24oKTtcclxuXHQkLm1vYmlsZS5uYXZpZ2F0ZS5oaXN0b3J5LmFkZCggbG9jLmhyZWYsIHtoYXNoOiBsb2MuaGFzaH0gKTtcclxufSkoIGpRdWVyeSApO1xyXG5cclxuXHJcbihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xyXG5cdHZhciBwcm9wcyA9IHtcclxuXHRcdFx0XCJhbmltYXRpb25cIjoge30sXHJcblx0XHRcdFwidHJhbnNpdGlvblwiOiB7fVxyXG5cdFx0fSxcclxuXHRcdHRlc3RFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJhXCIgKSxcclxuXHRcdHZlbmRvclByZWZpeGVzID0gWyBcIlwiLCBcIndlYmtpdC1cIiwgXCJtb3otXCIsIFwiby1cIiBdO1xyXG5cclxuXHQkLmVhY2goIFsgXCJhbmltYXRpb25cIiwgXCJ0cmFuc2l0aW9uXCIgXSwgZnVuY3Rpb24oIGksIHRlc3QgKSB7XHJcblxyXG5cdFx0Ly8gR2V0IGNvcnJlY3QgbmFtZSBmb3IgdGVzdFxyXG5cdFx0dmFyIHRlc3ROYW1lID0gKCBpID09PSAwICkgPyB0ZXN0ICsgXCItXCIgKyBcIm5hbWVcIiA6IHRlc3Q7XHJcblxyXG5cdFx0JC5lYWNoKCB2ZW5kb3JQcmVmaXhlcywgZnVuY3Rpb24oIGosIHByZWZpeCApIHtcclxuXHRcdFx0aWYgKCB0ZXN0RWxlbWVudC5zdHlsZVsgJC5jYW1lbENhc2UoIHByZWZpeCArIHRlc3ROYW1lICkgXSAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRcdCBwcm9wc1sgdGVzdCBdWyBcInByZWZpeFwiIF0gPSBwcmVmaXg7XHJcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBTZXQgZXZlbnQgYW5kIGR1cmF0aW9uIG5hbWVzIGZvciBsYXRlciB1c2VcclxuXHRcdHByb3BzWyB0ZXN0IF1bIFwiZHVyYXRpb25cIiBdID1cclxuXHRcdFx0JC5jYW1lbENhc2UoIHByb3BzWyB0ZXN0IF1bIFwicHJlZml4XCIgXSArIHRlc3QgKyBcIi1cIiArIFwiZHVyYXRpb25cIiApO1xyXG5cdFx0cHJvcHNbIHRlc3QgXVsgXCJldmVudFwiIF0gPVxyXG5cdFx0XHQkLmNhbWVsQ2FzZSggcHJvcHNbIHRlc3QgXVsgXCJwcmVmaXhcIiBdICsgdGVzdCArIFwiLVwiICsgXCJlbmRcIiApO1xyXG5cclxuXHRcdC8vIEFsbCBsb3dlciBjYXNlIGlmIG5vdCBhIHZlbmRvciBwcm9wXHJcblx0XHRpZiAoIHByb3BzWyB0ZXN0IF1bIFwicHJlZml4XCIgXSA9PT0gXCJcIiApIHtcclxuXHRcdFx0cHJvcHNbIHRlc3QgXVsgXCJldmVudFwiIF0gPSBwcm9wc1sgdGVzdCBdWyBcImV2ZW50XCIgXS50b0xvd2VyQ2FzZSgpO1xyXG5cdFx0fVxyXG5cdH0pO1xyXG5cclxuXHQvLyBJZiBhIHZhbGlkIHByZWZpeCB3YXMgZm91bmQgdGhlbiB0aGUgaXQgaXMgc3VwcG9ydGVkIGJ5IHRoZSBicm93c2VyXHJcblx0JC5zdXBwb3J0LmNzc1RyYW5zaXRpb25zID0gKCBwcm9wc1sgXCJ0cmFuc2l0aW9uXCIgXVsgXCJwcmVmaXhcIiBdICE9PSB1bmRlZmluZWQgKTtcclxuXHQkLnN1cHBvcnQuY3NzQW5pbWF0aW9ucyA9ICggcHJvcHNbIFwiYW5pbWF0aW9uXCIgXVsgXCJwcmVmaXhcIiBdICE9PSB1bmRlZmluZWQgKTtcclxuXHJcblx0Ly8gUmVtb3ZlIHRoZSB0ZXN0RWxlbWVudFxyXG5cdCQoIHRlc3RFbGVtZW50ICkucmVtb3ZlKCk7XHJcblxyXG5cdC8vIEFuaW1hdGlvbiBjb21wbGV0ZSBjYWxsYmFja1xyXG5cdCQuZm4uYW5pbWF0aW9uQ29tcGxldGUgPSBmdW5jdGlvbiggY2FsbGJhY2ssIHR5cGUsIGZhbGxiYWNrVGltZSApIHtcclxuXHRcdHZhciB0aW1lciwgZHVyYXRpb24sXHJcblx0XHRcdHRoYXQgPSB0aGlzLFxyXG5cdFx0XHRldmVudEJpbmRpbmcgPSBmdW5jdGlvbigpIHtcclxuXHJcblx0XHRcdFx0Ly8gQ2xlYXIgdGhlIHRpbWVyIHNvIHdlIGRvbid0IGNhbGwgY2FsbGJhY2sgdHdpY2VcclxuXHRcdFx0XHRjbGVhclRpbWVvdXQoIHRpbWVyICk7XHJcblx0XHRcdFx0Y2FsbGJhY2suYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApO1xyXG5cdFx0XHR9LFxyXG5cdFx0XHRhbmltYXRpb25UeXBlID0gKCAhdHlwZSB8fCB0eXBlID09PSBcImFuaW1hdGlvblwiICkgPyBcImFuaW1hdGlvblwiIDogXCJ0cmFuc2l0aW9uXCI7XHJcblxyXG5cdFx0Ly8gTWFrZSBzdXJlIHNlbGVjdGVkIHR5cGUgaXMgc3VwcG9ydGVkIGJ5IGJyb3dzZXJcclxuXHRcdGlmICggKCAkLnN1cHBvcnQuY3NzVHJhbnNpdGlvbnMgJiYgYW5pbWF0aW9uVHlwZSA9PT0gXCJ0cmFuc2l0aW9uXCIgKSB8fFxyXG5cdFx0XHQoICQuc3VwcG9ydC5jc3NBbmltYXRpb25zICYmIGFuaW1hdGlvblR5cGUgPT09IFwiYW5pbWF0aW9uXCIgKSApIHtcclxuXHJcblx0XHRcdC8vIElmIGEgZmFsbGJhY2sgdGltZSB3YXMgbm90IHBhc3NlZCBzZXQgb25lXHJcblx0XHRcdGlmICggZmFsbGJhY2tUaW1lID09PSB1bmRlZmluZWQgKSB7XHJcblxyXG5cdFx0XHRcdC8vIE1ha2Ugc3VyZSB0aGUgd2FzIG5vdCBib3VuZCB0byBkb2N1bWVudCBiZWZvcmUgY2hlY2tpbmcgLmNzc1xyXG5cdFx0XHRcdGlmICggJCggdGhpcyApLmNvbnRleHQgIT09IGRvY3VtZW50ICkge1xyXG5cclxuXHRcdFx0XHRcdC8vIFBhcnNlIHRoZSBkdXJyYXRpb24gc2luY2UgaXRzIGluIHNlY29uZCBtdWx0aXBsZSBieSAxMDAwIGZvciBtaWxsaXNlY29uZHNcclxuXHRcdFx0XHRcdC8vIE11bHRpcGx5IGJ5IDMgdG8gbWFrZSBzdXJlIHdlIGdpdmUgdGhlIGFuaW1hdGlvbiBwbGVudHkgb2YgdGltZS5cclxuXHRcdFx0XHRcdGR1cmF0aW9uID0gcGFyc2VGbG9hdChcclxuXHRcdFx0XHRcdFx0JCggdGhpcyApLmNzcyggcHJvcHNbIGFuaW1hdGlvblR5cGUgXS5kdXJhdGlvbiApXHJcblx0XHRcdFx0XHQpICogMzAwMDtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdC8vIElmIHdlIGNvdWxkIG5vdCByZWFkIGEgZHVyYXRpb24gdXNlIHRoZSBkZWZhdWx0XHJcblx0XHRcdFx0aWYgKCBkdXJhdGlvbiA9PT0gMCB8fCBkdXJhdGlvbiA9PT0gdW5kZWZpbmVkIHx8IGlzTmFOKCBkdXJhdGlvbiApICkge1xyXG5cdFx0XHRcdFx0ZHVyYXRpb24gPSAkLmZuLmFuaW1hdGlvbkNvbXBsZXRlLmRlZmF1bHREdXJhdGlvbjtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIFNldHMgdXAgdGhlIGZhbGxiYWNrIGlmIGV2ZW50IG5ldmVyIGNvbWVzXHJcblx0XHRcdHRpbWVyID0gc2V0VGltZW91dCggZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0JCggdGhhdCApLm9mZiggcHJvcHNbIGFuaW1hdGlvblR5cGUgXS5ldmVudCwgZXZlbnRCaW5kaW5nICk7XHJcblx0XHRcdFx0Y2FsbGJhY2suYXBwbHkoIHRoYXQgKTtcclxuXHRcdFx0fSwgZHVyYXRpb24gKTtcclxuXHJcblx0XHRcdC8vIEJpbmQgdGhlIGV2ZW50XHJcblx0XHRcdHJldHVybiAkKCB0aGlzICkub25lKCBwcm9wc1sgYW5pbWF0aW9uVHlwZSBdLmV2ZW50LCBldmVudEJpbmRpbmcgKTtcclxuXHRcdH0gZWxzZSB7XHJcblxyXG5cdFx0XHQvLyBDU1MgYW5pbWF0aW9uIC8gdHJhbnNpdGlvbnMgbm90IHN1cHBvcnRlZFxyXG5cdFx0XHQvLyBEZWZlciBleGVjdXRpb24gZm9yIGNvbnNpc3RlbmN5IGJldHdlZW4gd2Via2l0L25vbiB3ZWJraXRcclxuXHRcdFx0c2V0VGltZW91dCggJC5wcm94eSggY2FsbGJhY2ssIHRoaXMgKSwgMCApO1xyXG5cdFx0XHRyZXR1cm4gJCggdGhpcyApO1xyXG5cdFx0fVxyXG5cdH07XHJcblxyXG5cdC8vIEFsbG93IGRlZmF1bHQgY2FsbGJhY2sgdG8gYmUgY29uZmlndXJlZCBvbiBtb2JpbGVJbml0XHJcblx0JC5mbi5hbmltYXRpb25Db21wbGV0ZS5kZWZhdWx0RHVyYXRpb24gPSAxMDAwO1xyXG59KSggalF1ZXJ5ICk7XHJcblxyXG4vLyBUaGlzIHBsdWdpbiBpcyBhbiBleHBlcmltZW50IGZvciBhYnN0cmFjdGluZyBhd2F5IHRoZSB0b3VjaCBhbmQgbW91c2VcclxuLy8gZXZlbnRzIHNvIHRoYXQgZGV2ZWxvcGVycyBkb24ndCBoYXZlIHRvIHdvcnJ5IGFib3V0IHdoaWNoIG1ldGhvZCBvZiBpbnB1dFxyXG4vLyB0aGUgZGV2aWNlIHRoZWlyIGRvY3VtZW50IGlzIGxvYWRlZCBvbiBzdXBwb3J0cy5cclxuLy9cclxuLy8gVGhlIGlkZWEgaGVyZSBpcyB0byBhbGxvdyB0aGUgZGV2ZWxvcGVyIHRvIHJlZ2lzdGVyIGxpc3RlbmVycyBmb3IgdGhlXHJcbi8vIGJhc2ljIG1vdXNlIGV2ZW50cywgc3VjaCBhcyBtb3VzZWRvd24sIG1vdXNlbW92ZSwgbW91c2V1cCwgYW5kIGNsaWNrLFxyXG4vLyBhbmQgdGhlIHBsdWdpbiB3aWxsIHRha2UgY2FyZSBvZiByZWdpc3RlcmluZyB0aGUgY29ycmVjdCBsaXN0ZW5lcnNcclxuLy8gYmVoaW5kIHRoZSBzY2VuZXMgdG8gaW52b2tlIHRoZSBsaXN0ZW5lciBhdCB0aGUgZmFzdGVzdCBwb3NzaWJsZSB0aW1lXHJcbi8vIGZvciB0aGF0IGRldmljZSwgd2hpbGUgc3RpbGwgcmV0YWluaW5nIHRoZSBvcmRlciBvZiBldmVudCBmaXJpbmcgaW5cclxuLy8gdGhlIHRyYWRpdGlvbmFsIG1vdXNlIGVudmlyb25tZW50LCBzaG91bGQgbXVsdGlwbGUgaGFuZGxlcnMgYmUgcmVnaXN0ZXJlZFxyXG4vLyBvbiB0aGUgc2FtZSBlbGVtZW50IGZvciBkaWZmZXJlbnQgZXZlbnRzLlxyXG4vL1xyXG4vLyBUaGUgY3VycmVudCB2ZXJzaW9uIGV4cG9zZXMgdGhlIGZvbGxvd2luZyB2aXJ0dWFsIGV2ZW50cyB0byBqUXVlcnkgYmluZCBtZXRob2RzOlxyXG4vLyBcInZtb3VzZW92ZXIgdm1vdXNlZG93biB2bW91c2Vtb3ZlIHZtb3VzZXVwIHZjbGljayB2bW91c2VvdXQgdm1vdXNlY2FuY2VsXCJcclxuXHJcbihmdW5jdGlvbiggJCwgd2luZG93LCBkb2N1bWVudCwgdW5kZWZpbmVkICkge1xyXG5cclxudmFyIGRhdGFQcm9wZXJ0eU5hbWUgPSBcInZpcnR1YWxNb3VzZUJpbmRpbmdzXCIsXHJcblx0dG91Y2hUYXJnZXRQcm9wZXJ0eU5hbWUgPSBcInZpcnR1YWxUb3VjaElEXCIsXHJcblx0dmlydHVhbEV2ZW50TmFtZXMgPSBcInZtb3VzZW92ZXIgdm1vdXNlZG93biB2bW91c2Vtb3ZlIHZtb3VzZXVwIHZjbGljayB2bW91c2VvdXQgdm1vdXNlY2FuY2VsXCIuc3BsaXQoIFwiIFwiICksXHJcblx0dG91Y2hFdmVudFByb3BzID0gXCJjbGllbnRYIGNsaWVudFkgcGFnZVggcGFnZVkgc2NyZWVuWCBzY3JlZW5ZXCIuc3BsaXQoIFwiIFwiICksXHJcblx0bW91c2VIb29rUHJvcHMgPSAkLmV2ZW50Lm1vdXNlSG9va3MgPyAkLmV2ZW50Lm1vdXNlSG9va3MucHJvcHMgOiBbXSxcclxuXHRtb3VzZUV2ZW50UHJvcHMgPSAkLmV2ZW50LnByb3BzLmNvbmNhdCggbW91c2VIb29rUHJvcHMgKSxcclxuXHRhY3RpdmVEb2NIYW5kbGVycyA9IHt9LFxyXG5cdHJlc2V0VGltZXJJRCA9IDAsXHJcblx0c3RhcnRYID0gMCxcclxuXHRzdGFydFkgPSAwLFxyXG5cdGRpZFNjcm9sbCA9IGZhbHNlLFxyXG5cdGNsaWNrQmxvY2tMaXN0ID0gW10sXHJcblx0YmxvY2tNb3VzZVRyaWdnZXJzID0gZmFsc2UsXHJcblx0YmxvY2tUb3VjaFRyaWdnZXJzID0gZmFsc2UsXHJcblx0ZXZlbnRDYXB0dXJlU3VwcG9ydGVkID0gXCJhZGRFdmVudExpc3RlbmVyXCIgaW4gZG9jdW1lbnQsXHJcblx0JGRvY3VtZW50ID0gJCggZG9jdW1lbnQgKSxcclxuXHRuZXh0VG91Y2hJRCA9IDEsXHJcblx0bGFzdFRvdWNoSUQgPSAwLCB0aHJlc2hvbGQsXHJcblx0aTtcclxuXHJcbiQudm1vdXNlID0ge1xyXG5cdG1vdmVEaXN0YW5jZVRocmVzaG9sZDogMTAsXHJcblx0Y2xpY2tEaXN0YW5jZVRocmVzaG9sZDogMTAsXHJcblx0cmVzZXRUaW1lckR1cmF0aW9uOiAxNTAwXHJcbn07XHJcblxyXG5mdW5jdGlvbiBnZXROYXRpdmVFdmVudCggZXZlbnQgKSB7XHJcblxyXG5cdHdoaWxlICggZXZlbnQgJiYgdHlwZW9mIGV2ZW50Lm9yaWdpbmFsRXZlbnQgIT09IFwidW5kZWZpbmVkXCIgKSB7XHJcblx0XHRldmVudCA9IGV2ZW50Lm9yaWdpbmFsRXZlbnQ7XHJcblx0fVxyXG5cdHJldHVybiBldmVudDtcclxufVxyXG5cclxuZnVuY3Rpb24gY3JlYXRlVmlydHVhbEV2ZW50KCBldmVudCwgZXZlbnRUeXBlICkge1xyXG5cclxuXHR2YXIgdCA9IGV2ZW50LnR5cGUsXHJcblx0XHRvZSwgcHJvcHMsIG5lLCBwcm9wLCBjdCwgdG91Y2gsIGksIGosIGxlbjtcclxuXHJcblx0ZXZlbnQgPSAkLkV2ZW50KCBldmVudCApO1xyXG5cdGV2ZW50LnR5cGUgPSBldmVudFR5cGU7XHJcblxyXG5cdG9lID0gZXZlbnQub3JpZ2luYWxFdmVudDtcclxuXHRwcm9wcyA9ICQuZXZlbnQucHJvcHM7XHJcblxyXG5cdC8vIGFkZHJlc3NlcyBzZXBhcmF0aW9uIG9mICQuZXZlbnQucHJvcHMgaW4gdG8gJC5ldmVudC5tb3VzZUhvb2sucHJvcHMgYW5kIElzc3VlIDMyODBcclxuXHQvLyBodHRwczovL2dpdGh1Yi5jb20vanF1ZXJ5L2pxdWVyeS1tb2JpbGUvaXNzdWVzLzMyODBcclxuXHRpZiAoIHQuc2VhcmNoKCAvXihtb3VzZXxjbGljaykvICkgPiAtMSApIHtcclxuXHRcdHByb3BzID0gbW91c2VFdmVudFByb3BzO1xyXG5cdH1cclxuXHJcblx0Ly8gY29weSBvcmlnaW5hbCBldmVudCBwcm9wZXJ0aWVzIG92ZXIgdG8gdGhlIG5ldyBldmVudFxyXG5cdC8vIHRoaXMgd291bGQgaGFwcGVuIGlmIHdlIGNvdWxkIGNhbGwgJC5ldmVudC5maXggaW5zdGVhZCBvZiAkLkV2ZW50XHJcblx0Ly8gYnV0IHdlIGRvbid0IGhhdmUgYSB3YXkgdG8gZm9yY2UgYW4gZXZlbnQgdG8gYmUgZml4ZWQgbXVsdGlwbGUgdGltZXNcclxuXHRpZiAoIG9lICkge1xyXG5cdFx0Zm9yICggaSA9IHByb3BzLmxlbmd0aCwgcHJvcDsgaTsgKSB7XHJcblx0XHRcdHByb3AgPSBwcm9wc1sgLS1pIF07XHJcblx0XHRcdGV2ZW50WyBwcm9wIF0gPSBvZVsgcHJvcCBdO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0Ly8gbWFrZSBzdXJlIHRoYXQgaWYgdGhlIG1vdXNlIGFuZCBjbGljayB2aXJ0dWFsIGV2ZW50cyBhcmUgZ2VuZXJhdGVkXHJcblx0Ly8gd2l0aG91dCBhIC53aGljaCBvbmUgaXMgZGVmaW5lZFxyXG5cdGlmICggdC5zZWFyY2goL21vdXNlKGRvd258dXApfGNsaWNrLykgPiAtMSAmJiAhZXZlbnQud2hpY2ggKSB7XHJcblx0XHRldmVudC53aGljaCA9IDE7XHJcblx0fVxyXG5cclxuXHRpZiAoIHQuc2VhcmNoKC9edG91Y2gvKSAhPT0gLTEgKSB7XHJcblx0XHRuZSA9IGdldE5hdGl2ZUV2ZW50KCBvZSApO1xyXG5cdFx0dCA9IG5lLnRvdWNoZXM7XHJcblx0XHRjdCA9IG5lLmNoYW5nZWRUb3VjaGVzO1xyXG5cdFx0dG91Y2ggPSAoIHQgJiYgdC5sZW5ndGggKSA/IHRbMF0gOiAoICggY3QgJiYgY3QubGVuZ3RoICkgPyBjdFsgMCBdIDogdW5kZWZpbmVkICk7XHJcblxyXG5cdFx0aWYgKCB0b3VjaCApIHtcclxuXHRcdFx0Zm9yICggaiA9IDAsIGxlbiA9IHRvdWNoRXZlbnRQcm9wcy5sZW5ndGg7IGogPCBsZW47IGorKykge1xyXG5cdFx0XHRcdHByb3AgPSB0b3VjaEV2ZW50UHJvcHNbIGogXTtcclxuXHRcdFx0XHRldmVudFsgcHJvcCBdID0gdG91Y2hbIHByb3AgXTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0cmV0dXJuIGV2ZW50O1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRWaXJ0dWFsQmluZGluZ0ZsYWdzKCBlbGVtZW50ICkge1xyXG5cclxuXHR2YXIgZmxhZ3MgPSB7fSxcclxuXHRcdGIsIGs7XHJcblxyXG5cdHdoaWxlICggZWxlbWVudCApIHtcclxuXHJcblx0XHRiID0gJC5kYXRhKCBlbGVtZW50LCBkYXRhUHJvcGVydHlOYW1lICk7XHJcblxyXG5cdFx0Zm9yICggIGsgaW4gYiApIHtcclxuXHRcdFx0aWYgKCBiWyBrIF0gKSB7XHJcblx0XHRcdFx0ZmxhZ3NbIGsgXSA9IGZsYWdzLmhhc1ZpcnR1YWxCaW5kaW5nID0gdHJ1ZTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0ZWxlbWVudCA9IGVsZW1lbnQucGFyZW50Tm9kZTtcclxuXHR9XHJcblx0cmV0dXJuIGZsYWdzO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRDbG9zZXN0RWxlbWVudFdpdGhWaXJ0dWFsQmluZGluZyggZWxlbWVudCwgZXZlbnRUeXBlICkge1xyXG5cdHZhciBiO1xyXG5cdHdoaWxlICggZWxlbWVudCApIHtcclxuXHJcblx0XHRiID0gJC5kYXRhKCBlbGVtZW50LCBkYXRhUHJvcGVydHlOYW1lICk7XHJcblxyXG5cdFx0aWYgKCBiICYmICggIWV2ZW50VHlwZSB8fCBiWyBldmVudFR5cGUgXSApICkge1xyXG5cdFx0XHRyZXR1cm4gZWxlbWVudDtcclxuXHRcdH1cclxuXHRcdGVsZW1lbnQgPSBlbGVtZW50LnBhcmVudE5vZGU7XHJcblx0fVxyXG5cdHJldHVybiBudWxsO1xyXG59XHJcblxyXG5mdW5jdGlvbiBlbmFibGVUb3VjaEJpbmRpbmdzKCkge1xyXG5cdGJsb2NrVG91Y2hUcmlnZ2VycyA9IGZhbHNlO1xyXG59XHJcblxyXG5mdW5jdGlvbiBkaXNhYmxlVG91Y2hCaW5kaW5ncygpIHtcclxuXHRibG9ja1RvdWNoVHJpZ2dlcnMgPSB0cnVlO1xyXG59XHJcblxyXG5mdW5jdGlvbiBlbmFibGVNb3VzZUJpbmRpbmdzKCkge1xyXG5cdGxhc3RUb3VjaElEID0gMDtcclxuXHRjbGlja0Jsb2NrTGlzdC5sZW5ndGggPSAwO1xyXG5cdGJsb2NrTW91c2VUcmlnZ2VycyA9IGZhbHNlO1xyXG5cclxuXHQvLyBXaGVuIG1vdXNlIGJpbmRpbmdzIGFyZSBlbmFibGVkLCBvdXJcclxuXHQvLyB0b3VjaCBiaW5kaW5ncyBhcmUgZGlzYWJsZWQuXHJcblx0ZGlzYWJsZVRvdWNoQmluZGluZ3MoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gZGlzYWJsZU1vdXNlQmluZGluZ3MoKSB7XHJcblx0Ly8gV2hlbiBtb3VzZSBiaW5kaW5ncyBhcmUgZGlzYWJsZWQsIG91clxyXG5cdC8vIHRvdWNoIGJpbmRpbmdzIGFyZSBlbmFibGVkLlxyXG5cdGVuYWJsZVRvdWNoQmluZGluZ3MoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gc3RhcnRSZXNldFRpbWVyKCkge1xyXG5cdGNsZWFyUmVzZXRUaW1lcigpO1xyXG5cdHJlc2V0VGltZXJJRCA9IHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xyXG5cdFx0cmVzZXRUaW1lcklEID0gMDtcclxuXHRcdGVuYWJsZU1vdXNlQmluZGluZ3MoKTtcclxuXHR9LCAkLnZtb3VzZS5yZXNldFRpbWVyRHVyYXRpb24gKTtcclxufVxyXG5cclxuZnVuY3Rpb24gY2xlYXJSZXNldFRpbWVyKCkge1xyXG5cdGlmICggcmVzZXRUaW1lcklEICkge1xyXG5cdFx0Y2xlYXJUaW1lb3V0KCByZXNldFRpbWVySUQgKTtcclxuXHRcdHJlc2V0VGltZXJJRCA9IDA7XHJcblx0fVxyXG59XHJcblxyXG5mdW5jdGlvbiB0cmlnZ2VyVmlydHVhbEV2ZW50KCBldmVudFR5cGUsIGV2ZW50LCBmbGFncyApIHtcclxuXHR2YXIgdmU7XHJcblxyXG5cdGlmICggKCBmbGFncyAmJiBmbGFnc1sgZXZlbnRUeXBlIF0gKSB8fFxyXG5cdFx0XHRcdCggIWZsYWdzICYmIGdldENsb3Nlc3RFbGVtZW50V2l0aFZpcnR1YWxCaW5kaW5nKCBldmVudC50YXJnZXQsIGV2ZW50VHlwZSApICkgKSB7XHJcblxyXG5cdFx0dmUgPSBjcmVhdGVWaXJ0dWFsRXZlbnQoIGV2ZW50LCBldmVudFR5cGUgKTtcclxuXHJcblx0XHQkKCBldmVudC50YXJnZXQpLnRyaWdnZXIoIHZlICk7XHJcblx0fVxyXG5cclxuXHRyZXR1cm4gdmU7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG1vdXNlRXZlbnRDYWxsYmFjayggZXZlbnQgKSB7XHJcblx0dmFyIHRvdWNoSUQgPSAkLmRhdGEoIGV2ZW50LnRhcmdldCwgdG91Y2hUYXJnZXRQcm9wZXJ0eU5hbWUgKSxcclxuXHRcdHZlO1xyXG5cclxuXHRpZiAoICFibG9ja01vdXNlVHJpZ2dlcnMgJiYgKCAhbGFzdFRvdWNoSUQgfHwgbGFzdFRvdWNoSUQgIT09IHRvdWNoSUQgKSApIHtcclxuXHRcdHZlID0gdHJpZ2dlclZpcnR1YWxFdmVudCggXCJ2XCIgKyBldmVudC50eXBlLCBldmVudCApO1xyXG5cdFx0aWYgKCB2ZSApIHtcclxuXHRcdFx0aWYgKCB2ZS5pc0RlZmF1bHRQcmV2ZW50ZWQoKSApIHtcclxuXHRcdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmICggdmUuaXNQcm9wYWdhdGlvblN0b3BwZWQoKSApIHtcclxuXHRcdFx0XHRldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAoIHZlLmlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkKCkgKSB7XHJcblx0XHRcdFx0ZXZlbnQuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZVRvdWNoU3RhcnQoIGV2ZW50ICkge1xyXG5cclxuXHR2YXIgdG91Y2hlcyA9IGdldE5hdGl2ZUV2ZW50KCBldmVudCApLnRvdWNoZXMsXHJcblx0XHR0YXJnZXQsIGZsYWdzLCB0O1xyXG5cclxuXHRpZiAoIHRvdWNoZXMgJiYgdG91Y2hlcy5sZW5ndGggPT09IDEgKSB7XHJcblxyXG5cdFx0dGFyZ2V0ID0gZXZlbnQudGFyZ2V0O1xyXG5cdFx0ZmxhZ3MgPSBnZXRWaXJ0dWFsQmluZGluZ0ZsYWdzKCB0YXJnZXQgKTtcclxuXHJcblx0XHRpZiAoIGZsYWdzLmhhc1ZpcnR1YWxCaW5kaW5nICkge1xyXG5cclxuXHRcdFx0bGFzdFRvdWNoSUQgPSBuZXh0VG91Y2hJRCsrO1xyXG5cdFx0XHQkLmRhdGEoIHRhcmdldCwgdG91Y2hUYXJnZXRQcm9wZXJ0eU5hbWUsIGxhc3RUb3VjaElEICk7XHJcblxyXG5cdFx0XHRjbGVhclJlc2V0VGltZXIoKTtcclxuXHJcblx0XHRcdGRpc2FibGVNb3VzZUJpbmRpbmdzKCk7XHJcblx0XHRcdGRpZFNjcm9sbCA9IGZhbHNlO1xyXG5cclxuXHRcdFx0dCA9IGdldE5hdGl2ZUV2ZW50KCBldmVudCApLnRvdWNoZXNbIDAgXTtcclxuXHRcdFx0c3RhcnRYID0gdC5wYWdlWDtcclxuXHRcdFx0c3RhcnRZID0gdC5wYWdlWTtcclxuXHJcblx0XHRcdHRyaWdnZXJWaXJ0dWFsRXZlbnQoIFwidm1vdXNlb3ZlclwiLCBldmVudCwgZmxhZ3MgKTtcclxuXHRcdFx0dHJpZ2dlclZpcnR1YWxFdmVudCggXCJ2bW91c2Vkb3duXCIsIGV2ZW50LCBmbGFncyApO1xyXG5cdFx0fVxyXG5cdH1cclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlU2Nyb2xsKCBldmVudCApIHtcclxuXHRpZiAoIGJsb2NrVG91Y2hUcmlnZ2VycyApIHtcclxuXHRcdHJldHVybjtcclxuXHR9XHJcblxyXG5cdGlmICggIWRpZFNjcm9sbCApIHtcclxuXHRcdHRyaWdnZXJWaXJ0dWFsRXZlbnQoIFwidm1vdXNlY2FuY2VsXCIsIGV2ZW50LCBnZXRWaXJ0dWFsQmluZGluZ0ZsYWdzKCBldmVudC50YXJnZXQgKSApO1xyXG5cdH1cclxuXHJcblx0ZGlkU2Nyb2xsID0gdHJ1ZTtcclxuXHRzdGFydFJlc2V0VGltZXIoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlVG91Y2hNb3ZlKCBldmVudCApIHtcclxuXHRpZiAoIGJsb2NrVG91Y2hUcmlnZ2VycyApIHtcclxuXHRcdHJldHVybjtcclxuXHR9XHJcblxyXG5cdHZhciB0ID0gZ2V0TmF0aXZlRXZlbnQoIGV2ZW50ICkudG91Y2hlc1sgMCBdLFxyXG5cdFx0ZGlkQ2FuY2VsID0gZGlkU2Nyb2xsLFxyXG5cdFx0bW92ZVRocmVzaG9sZCA9ICQudm1vdXNlLm1vdmVEaXN0YW5jZVRocmVzaG9sZCxcclxuXHRcdGZsYWdzID0gZ2V0VmlydHVhbEJpbmRpbmdGbGFncyggZXZlbnQudGFyZ2V0ICk7XHJcblxyXG5cdFx0ZGlkU2Nyb2xsID0gZGlkU2Nyb2xsIHx8XHJcblx0XHRcdCggTWF0aC5hYnMoIHQucGFnZVggLSBzdGFydFggKSA+IG1vdmVUaHJlc2hvbGQgfHxcclxuXHRcdFx0XHRNYXRoLmFicyggdC5wYWdlWSAtIHN0YXJ0WSApID4gbW92ZVRocmVzaG9sZCApO1xyXG5cclxuXHRpZiAoIGRpZFNjcm9sbCAmJiAhZGlkQ2FuY2VsICkge1xyXG5cdFx0dHJpZ2dlclZpcnR1YWxFdmVudCggXCJ2bW91c2VjYW5jZWxcIiwgZXZlbnQsIGZsYWdzICk7XHJcblx0fVxyXG5cclxuXHR0cmlnZ2VyVmlydHVhbEV2ZW50KCBcInZtb3VzZW1vdmVcIiwgZXZlbnQsIGZsYWdzICk7XHJcblx0c3RhcnRSZXNldFRpbWVyKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZVRvdWNoRW5kKCBldmVudCApIHtcclxuXHRpZiAoIGJsb2NrVG91Y2hUcmlnZ2VycyApIHtcclxuXHRcdHJldHVybjtcclxuXHR9XHJcblxyXG5cdGRpc2FibGVUb3VjaEJpbmRpbmdzKCk7XHJcblxyXG5cdHZhciBmbGFncyA9IGdldFZpcnR1YWxCaW5kaW5nRmxhZ3MoIGV2ZW50LnRhcmdldCApLFxyXG5cdFx0dmUsIHQ7XHJcblx0dHJpZ2dlclZpcnR1YWxFdmVudCggXCJ2bW91c2V1cFwiLCBldmVudCwgZmxhZ3MgKTtcclxuXHJcblx0aWYgKCAhZGlkU2Nyb2xsICkge1xyXG5cdFx0dmUgPSB0cmlnZ2VyVmlydHVhbEV2ZW50KCBcInZjbGlja1wiLCBldmVudCwgZmxhZ3MgKTtcclxuXHRcdGlmICggdmUgJiYgdmUuaXNEZWZhdWx0UHJldmVudGVkKCkgKSB7XHJcblx0XHRcdC8vIFRoZSB0YXJnZXQgb2YgdGhlIG1vdXNlIGV2ZW50cyB0aGF0IGZvbGxvdyB0aGUgdG91Y2hlbmRcclxuXHRcdFx0Ly8gZXZlbnQgZG9uJ3QgbmVjZXNzYXJpbHkgbWF0Y2ggdGhlIHRhcmdldCB1c2VkIGR1cmluZyB0aGVcclxuXHRcdFx0Ly8gdG91Y2guIFRoaXMgbWVhbnMgd2UgbmVlZCB0byByZWx5IG9uIGNvb3JkaW5hdGVzIGZvciBibG9ja2luZ1xyXG5cdFx0XHQvLyBhbnkgY2xpY2sgdGhhdCBpcyBnZW5lcmF0ZWQuXHJcblx0XHRcdHQgPSBnZXROYXRpdmVFdmVudCggZXZlbnQgKS5jaGFuZ2VkVG91Y2hlc1sgMCBdO1xyXG5cdFx0XHRjbGlja0Jsb2NrTGlzdC5wdXNoKHtcclxuXHRcdFx0XHR0b3VjaElEOiBsYXN0VG91Y2hJRCxcclxuXHRcdFx0XHR4OiB0LmNsaWVudFgsXHJcblx0XHRcdFx0eTogdC5jbGllbnRZXHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0Ly8gUHJldmVudCBhbnkgbW91c2UgZXZlbnRzIHRoYXQgZm9sbG93IGZyb20gdHJpZ2dlcmluZ1xyXG5cdFx0XHQvLyB2aXJ0dWFsIGV2ZW50IG5vdGlmaWNhdGlvbnMuXHJcblx0XHRcdGJsb2NrTW91c2VUcmlnZ2VycyA9IHRydWU7XHJcblx0XHR9XHJcblx0fVxyXG5cdHRyaWdnZXJWaXJ0dWFsRXZlbnQoIFwidm1vdXNlb3V0XCIsIGV2ZW50LCBmbGFncyk7XHJcblx0ZGlkU2Nyb2xsID0gZmFsc2U7XHJcblxyXG5cdHN0YXJ0UmVzZXRUaW1lcigpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYXNWaXJ0dWFsQmluZGluZ3MoIGVsZSApIHtcclxuXHR2YXIgYmluZGluZ3MgPSAkLmRhdGEoIGVsZSwgZGF0YVByb3BlcnR5TmFtZSApLFxyXG5cdFx0aztcclxuXHJcblx0aWYgKCBiaW5kaW5ncyApIHtcclxuXHRcdGZvciAoIGsgaW4gYmluZGluZ3MgKSB7XHJcblx0XHRcdGlmICggYmluZGluZ3NbIGsgXSApIHtcclxuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxuXHRyZXR1cm4gZmFsc2U7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGR1bW15TW91c2VIYW5kbGVyKCkge31cclxuXHJcbmZ1bmN0aW9uIGdldFNwZWNpYWxFdmVudE9iamVjdCggZXZlbnRUeXBlICkge1xyXG5cdHZhciByZWFsVHlwZSA9IGV2ZW50VHlwZS5zdWJzdHIoIDEgKTtcclxuXHJcblx0cmV0dXJuIHtcclxuXHRcdHNldHVwOiBmdW5jdGlvbigvKiBkYXRhLCBuYW1lc3BhY2UgKi8pIHtcclxuXHRcdFx0Ly8gSWYgdGhpcyBpcyB0aGUgZmlyc3QgdmlydHVhbCBtb3VzZSBiaW5kaW5nIGZvciB0aGlzIGVsZW1lbnQsXHJcblx0XHRcdC8vIGFkZCBhIGJpbmRpbmdzIG9iamVjdCB0byBpdHMgZGF0YS5cclxuXHJcblx0XHRcdGlmICggIWhhc1ZpcnR1YWxCaW5kaW5ncyggdGhpcyApICkge1xyXG5cdFx0XHRcdCQuZGF0YSggdGhpcywgZGF0YVByb3BlcnR5TmFtZSwge30gKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gSWYgc2V0dXAgaXMgY2FsbGVkLCB3ZSBrbm93IGl0IGlzIHRoZSBmaXJzdCBiaW5kaW5nIGZvciB0aGlzXHJcblx0XHRcdC8vIGV2ZW50VHlwZSwgc28gaW5pdGlhbGl6ZSB0aGUgY291bnQgZm9yIHRoZSBldmVudFR5cGUgdG8gemVyby5cclxuXHRcdFx0dmFyIGJpbmRpbmdzID0gJC5kYXRhKCB0aGlzLCBkYXRhUHJvcGVydHlOYW1lICk7XHJcblx0XHRcdGJpbmRpbmdzWyBldmVudFR5cGUgXSA9IHRydWU7XHJcblxyXG5cdFx0XHQvLyBJZiB0aGlzIGlzIHRoZSBmaXJzdCB2aXJ0dWFsIG1vdXNlIGV2ZW50IGZvciB0aGlzIHR5cGUsXHJcblx0XHRcdC8vIHJlZ2lzdGVyIGEgZ2xvYmFsIGhhbmRsZXIgb24gdGhlIGRvY3VtZW50LlxyXG5cclxuXHRcdFx0YWN0aXZlRG9jSGFuZGxlcnNbIGV2ZW50VHlwZSBdID0gKCBhY3RpdmVEb2NIYW5kbGVyc1sgZXZlbnRUeXBlIF0gfHwgMCApICsgMTtcclxuXHJcblx0XHRcdGlmICggYWN0aXZlRG9jSGFuZGxlcnNbIGV2ZW50VHlwZSBdID09PSAxICkge1xyXG5cdFx0XHRcdCRkb2N1bWVudC5iaW5kKCByZWFsVHlwZSwgbW91c2VFdmVudENhbGxiYWNrICk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIFNvbWUgYnJvd3NlcnMsIGxpa2UgT3BlcmEgTWluaSwgd29uJ3QgZGlzcGF0Y2ggbW91c2UvY2xpY2sgZXZlbnRzXHJcblx0XHRcdC8vIGZvciBlbGVtZW50cyB1bmxlc3MgdGhleSBhY3R1YWxseSBoYXZlIGhhbmRsZXJzIHJlZ2lzdGVyZWQgb24gdGhlbS5cclxuXHRcdFx0Ly8gVG8gZ2V0IGFyb3VuZCB0aGlzLCB3ZSByZWdpc3RlciBkdW1teSBoYW5kbGVycyBvbiB0aGUgZWxlbWVudHMuXHJcblxyXG5cdFx0XHQkKCB0aGlzICkuYmluZCggcmVhbFR5cGUsIGR1bW15TW91c2VIYW5kbGVyICk7XHJcblxyXG5cdFx0XHQvLyBGb3Igbm93LCBpZiBldmVudCBjYXB0dXJlIGlzIG5vdCBzdXBwb3J0ZWQsIHdlIHJlbHkgb24gbW91c2UgaGFuZGxlcnMuXHJcblx0XHRcdGlmICggZXZlbnRDYXB0dXJlU3VwcG9ydGVkICkge1xyXG5cdFx0XHRcdC8vIElmIHRoaXMgaXMgdGhlIGZpcnN0IHZpcnR1YWwgbW91c2UgYmluZGluZyBmb3IgdGhlIGRvY3VtZW50LFxyXG5cdFx0XHRcdC8vIHJlZ2lzdGVyIG91ciB0b3VjaHN0YXJ0IGhhbmRsZXIgb24gdGhlIGRvY3VtZW50LlxyXG5cclxuXHRcdFx0XHRhY3RpdmVEb2NIYW5kbGVyc1sgXCJ0b3VjaHN0YXJ0XCIgXSA9ICggYWN0aXZlRG9jSGFuZGxlcnNbIFwidG91Y2hzdGFydFwiIF0gfHwgMCkgKyAxO1xyXG5cclxuXHRcdFx0XHRpZiAoIGFjdGl2ZURvY0hhbmRsZXJzWyBcInRvdWNoc3RhcnRcIiBdID09PSAxICkge1xyXG5cdFx0XHRcdFx0JGRvY3VtZW50LmJpbmQoIFwidG91Y2hzdGFydFwiLCBoYW5kbGVUb3VjaFN0YXJ0IClcclxuXHRcdFx0XHRcdFx0LmJpbmQoIFwidG91Y2hlbmRcIiwgaGFuZGxlVG91Y2hFbmQgKVxyXG5cclxuXHRcdFx0XHRcdFx0Ly8gT24gdG91Y2ggcGxhdGZvcm1zLCB0b3VjaGluZyB0aGUgc2NyZWVuIGFuZCB0aGVuIGRyYWdnaW5nIHlvdXIgZmluZ2VyXHJcblx0XHRcdFx0XHRcdC8vIGNhdXNlcyB0aGUgd2luZG93IGNvbnRlbnQgdG8gc2Nyb2xsIGFmdGVyIHNvbWUgZGlzdGFuY2UgdGhyZXNob2xkIGlzXHJcblx0XHRcdFx0XHRcdC8vIGV4Y2VlZGVkLiBPbiB0aGVzZSBwbGF0Zm9ybXMsIGEgc2Nyb2xsIHByZXZlbnRzIGEgY2xpY2sgZXZlbnQgZnJvbSBiZWluZ1xyXG5cdFx0XHRcdFx0XHQvLyBkaXNwYXRjaGVkLCBhbmQgb24gc29tZSBwbGF0Zm9ybXMsIGV2ZW4gdGhlIHRvdWNoZW5kIGlzIHN1cHByZXNzZWQuIFRvXHJcblx0XHRcdFx0XHRcdC8vIG1pbWljIHRoZSBzdXBwcmVzc2lvbiBvZiB0aGUgY2xpY2sgZXZlbnQsIHdlIG5lZWQgdG8gd2F0Y2ggZm9yIGEgc2Nyb2xsXHJcblx0XHRcdFx0XHRcdC8vIGV2ZW50LiBVbmZvcnR1bmF0ZWx5LCBzb21lIHBsYXRmb3JtcyBsaWtlIGlPUyBkb24ndCBkaXNwYXRjaCBzY3JvbGxcclxuXHRcdFx0XHRcdFx0Ly8gZXZlbnRzIHVudGlsICpBRlRFUiogdGhlIHVzZXIgbGlmdHMgdGhlaXIgZmluZ2VyICh0b3VjaGVuZCkuIFRoaXMgbWVhbnNcclxuXHRcdFx0XHRcdFx0Ly8gd2UgbmVlZCB0byB3YXRjaCBib3RoIHNjcm9sbCBhbmQgdG91Y2htb3ZlIGV2ZW50cyB0byBmaWd1cmUgb3V0IHdoZXRoZXJcclxuXHRcdFx0XHRcdFx0Ly8gb3Igbm90IGEgc2Nyb2xsIGhhcHBlbmVucyBiZWZvcmUgdGhlIHRvdWNoZW5kIGV2ZW50IGlzIGZpcmVkLlxyXG5cclxuXHRcdFx0XHRcdFx0LmJpbmQoIFwidG91Y2htb3ZlXCIsIGhhbmRsZVRvdWNoTW92ZSApXHJcblx0XHRcdFx0XHRcdC5iaW5kKCBcInNjcm9sbFwiLCBoYW5kbGVTY3JvbGwgKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblxyXG5cdFx0dGVhcmRvd246IGZ1bmN0aW9uKC8qIGRhdGEsIG5hbWVzcGFjZSAqLykge1xyXG5cdFx0XHQvLyBJZiB0aGlzIGlzIHRoZSBsYXN0IHZpcnR1YWwgYmluZGluZyBmb3IgdGhpcyBldmVudFR5cGUsXHJcblx0XHRcdC8vIHJlbW92ZSBpdHMgZ2xvYmFsIGhhbmRsZXIgZnJvbSB0aGUgZG9jdW1lbnQuXHJcblxyXG5cdFx0XHQtLWFjdGl2ZURvY0hhbmRsZXJzWyBldmVudFR5cGUgXTtcclxuXHJcblx0XHRcdGlmICggIWFjdGl2ZURvY0hhbmRsZXJzWyBldmVudFR5cGUgXSApIHtcclxuXHRcdFx0XHQkZG9jdW1lbnQudW5iaW5kKCByZWFsVHlwZSwgbW91c2VFdmVudENhbGxiYWNrICk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmICggZXZlbnRDYXB0dXJlU3VwcG9ydGVkICkge1xyXG5cdFx0XHRcdC8vIElmIHRoaXMgaXMgdGhlIGxhc3QgdmlydHVhbCBtb3VzZSBiaW5kaW5nIGluIGV4aXN0ZW5jZSxcclxuXHRcdFx0XHQvLyByZW1vdmUgb3VyIGRvY3VtZW50IHRvdWNoc3RhcnQgbGlzdGVuZXIuXHJcblxyXG5cdFx0XHRcdC0tYWN0aXZlRG9jSGFuZGxlcnNbIFwidG91Y2hzdGFydFwiIF07XHJcblxyXG5cdFx0XHRcdGlmICggIWFjdGl2ZURvY0hhbmRsZXJzWyBcInRvdWNoc3RhcnRcIiBdICkge1xyXG5cdFx0XHRcdFx0JGRvY3VtZW50LnVuYmluZCggXCJ0b3VjaHN0YXJ0XCIsIGhhbmRsZVRvdWNoU3RhcnQgKVxyXG5cdFx0XHRcdFx0XHQudW5iaW5kKCBcInRvdWNobW92ZVwiLCBoYW5kbGVUb3VjaE1vdmUgKVxyXG5cdFx0XHRcdFx0XHQudW5iaW5kKCBcInRvdWNoZW5kXCIsIGhhbmRsZVRvdWNoRW5kIClcclxuXHRcdFx0XHRcdFx0LnVuYmluZCggXCJzY3JvbGxcIiwgaGFuZGxlU2Nyb2xsICk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHR2YXIgJHRoaXMgPSAkKCB0aGlzICksXHJcblx0XHRcdFx0YmluZGluZ3MgPSAkLmRhdGEoIHRoaXMsIGRhdGFQcm9wZXJ0eU5hbWUgKTtcclxuXHJcblx0XHRcdC8vIHRlYXJkb3duIG1heSBiZSBjYWxsZWQgd2hlbiBhbiBlbGVtZW50IHdhc1xyXG5cdFx0XHQvLyByZW1vdmVkIGZyb20gdGhlIERPTS4gSWYgdGhpcyBpcyB0aGUgY2FzZSxcclxuXHRcdFx0Ly8galF1ZXJ5IGNvcmUgbWF5IGhhdmUgYWxyZWFkeSBzdHJpcHBlZCB0aGUgZWxlbWVudFxyXG5cdFx0XHQvLyBvZiBhbnkgZGF0YSBiaW5kaW5ncyBzbyB3ZSBuZWVkIHRvIGNoZWNrIGl0IGJlZm9yZVxyXG5cdFx0XHQvLyB1c2luZyBpdC5cclxuXHRcdFx0aWYgKCBiaW5kaW5ncyApIHtcclxuXHRcdFx0XHRiaW5kaW5nc1sgZXZlbnRUeXBlIF0gPSBmYWxzZTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gVW5yZWdpc3RlciB0aGUgZHVtbXkgZXZlbnQgaGFuZGxlci5cclxuXHJcblx0XHRcdCR0aGlzLnVuYmluZCggcmVhbFR5cGUsIGR1bW15TW91c2VIYW5kbGVyICk7XHJcblxyXG5cdFx0XHQvLyBJZiB0aGlzIGlzIHRoZSBsYXN0IHZpcnR1YWwgbW91c2UgYmluZGluZyBvbiB0aGVcclxuXHRcdFx0Ly8gZWxlbWVudCwgcmVtb3ZlIHRoZSBiaW5kaW5nIGRhdGEgZnJvbSB0aGUgZWxlbWVudC5cclxuXHJcblx0XHRcdGlmICggIWhhc1ZpcnR1YWxCaW5kaW5ncyggdGhpcyApICkge1xyXG5cdFx0XHRcdCR0aGlzLnJlbW92ZURhdGEoIGRhdGFQcm9wZXJ0eU5hbWUgKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH07XHJcbn1cclxuXHJcbi8vIEV4cG9zZSBvdXIgY3VzdG9tIGV2ZW50cyB0byB0aGUgalF1ZXJ5IGJpbmQvdW5iaW5kIG1lY2hhbmlzbS5cclxuXHJcbmZvciAoIGkgPSAwOyBpIDwgdmlydHVhbEV2ZW50TmFtZXMubGVuZ3RoOyBpKysgKSB7XHJcblx0JC5ldmVudC5zcGVjaWFsWyB2aXJ0dWFsRXZlbnROYW1lc1sgaSBdIF0gPSBnZXRTcGVjaWFsRXZlbnRPYmplY3QoIHZpcnR1YWxFdmVudE5hbWVzWyBpIF0gKTtcclxufVxyXG5cclxuLy8gQWRkIGEgY2FwdHVyZSBjbGljayBoYW5kbGVyIHRvIGJsb2NrIGNsaWNrcy5cclxuLy8gTm90ZSB0aGF0IHdlIHJlcXVpcmUgZXZlbnQgY2FwdHVyZSBzdXBwb3J0IGZvciB0aGlzIHNvIGlmIHRoZSBkZXZpY2VcclxuLy8gZG9lc24ndCBzdXBwb3J0IGl0LCB3ZSBwdW50IGZvciBub3cgYW5kIHJlbHkgc29sZWx5IG9uIG1vdXNlIGV2ZW50cy5cclxuaWYgKCBldmVudENhcHR1cmVTdXBwb3J0ZWQgKSB7XHJcblx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lciggXCJjbGlja1wiLCBmdW5jdGlvbiggZSApIHtcclxuXHRcdHZhciBjbnQgPSBjbGlja0Jsb2NrTGlzdC5sZW5ndGgsXHJcblx0XHRcdHRhcmdldCA9IGUudGFyZ2V0LFxyXG5cdFx0XHR4LCB5LCBlbGUsIGksIG8sIHRvdWNoSUQ7XHJcblxyXG5cdFx0aWYgKCBjbnQgKSB7XHJcblx0XHRcdHggPSBlLmNsaWVudFg7XHJcblx0XHRcdHkgPSBlLmNsaWVudFk7XHJcblx0XHRcdHRocmVzaG9sZCA9ICQudm1vdXNlLmNsaWNrRGlzdGFuY2VUaHJlc2hvbGQ7XHJcblxyXG5cdFx0XHQvLyBUaGUgaWRlYSBoZXJlIGlzIHRvIHJ1biB0aHJvdWdoIHRoZSBjbGlja0Jsb2NrTGlzdCB0byBzZWUgaWZcclxuXHRcdFx0Ly8gdGhlIGN1cnJlbnQgY2xpY2sgZXZlbnQgaXMgaW4gdGhlIHByb3hpbWl0eSBvZiBvbmUgb2Ygb3VyXHJcblx0XHRcdC8vIHZjbGljayBldmVudHMgdGhhdCBoYWQgcHJldmVudERlZmF1bHQoKSBjYWxsZWQgb24gaXQuIElmIHdlIGZpbmRcclxuXHRcdFx0Ly8gb25lLCB0aGVuIHdlIGJsb2NrIHRoZSBjbGljay5cclxuXHRcdFx0Ly9cclxuXHRcdFx0Ly8gV2h5IGRvIHdlIGhhdmUgdG8gcmVseSBvbiBwcm94aW1pdHk/XHJcblx0XHRcdC8vXHJcblx0XHRcdC8vIEJlY2F1c2UgdGhlIHRhcmdldCBvZiB0aGUgdG91Y2ggZXZlbnQgdGhhdCB0cmlnZ2VyZWQgdGhlIHZjbGlja1xyXG5cdFx0XHQvLyBjYW4gYmUgZGlmZmVyZW50IGZyb20gdGhlIHRhcmdldCBvZiB0aGUgY2xpY2sgZXZlbnQgc3ludGhlc2l6ZWRcclxuXHRcdFx0Ly8gYnkgdGhlIGJyb3dzZXIuIFRoZSB0YXJnZXQgb2YgYSBtb3VzZS9jbGljayBldmVudCB0aGF0IGlzIHN5bnRoZXNpemVkXHJcblx0XHRcdC8vIGZyb20gYSB0b3VjaCBldmVudCBzZWVtcyB0byBiZSBpbXBsZW1lbnRhdGlvbiBzcGVjaWZpYy4gRm9yIGV4YW1wbGUsXHJcblx0XHRcdC8vIHNvbWUgYnJvd3NlcnMgd2lsbCBmaXJlIG1vdXNlL2NsaWNrIGV2ZW50cyBmb3IgYSBsaW5rIHRoYXQgaXMgbmVhclxyXG5cdFx0XHQvLyBhIHRvdWNoIGV2ZW50LCBldmVuIHRob3VnaCB0aGUgdGFyZ2V0IG9mIHRoZSB0b3VjaHN0YXJ0L3RvdWNoZW5kIGV2ZW50XHJcblx0XHRcdC8vIHNheXMgdGhlIHVzZXIgdG91Y2hlZCBvdXRzaWRlIHRoZSBsaW5rLiBBbHNvLCBpdCBzZWVtcyB0aGF0IHdpdGggbW9zdFxyXG5cdFx0XHQvLyBicm93c2VycywgdGhlIHRhcmdldCBvZiB0aGUgbW91c2UvY2xpY2sgZXZlbnQgaXMgbm90IGNhbGN1bGF0ZWQgdW50aWwgdGhlXHJcblx0XHRcdC8vIHRpbWUgaXQgaXMgZGlzcGF0Y2hlZCwgc28gaWYgeW91IHJlcGxhY2UgYW4gZWxlbWVudCB0aGF0IHlvdSB0b3VjaGVkXHJcblx0XHRcdC8vIHdpdGggYW5vdGhlciBlbGVtZW50LCB0aGUgdGFyZ2V0IG9mIHRoZSBtb3VzZS9jbGljayB3aWxsIGJlIHRoZSBuZXdcclxuXHRcdFx0Ly8gZWxlbWVudCB1bmRlcm5lYXRoIHRoYXQgcG9pbnQuXHJcblx0XHRcdC8vXHJcblx0XHRcdC8vIEFzaWRlIGZyb20gcHJveGltaXR5LCB3ZSBhbHNvIGNoZWNrIHRvIHNlZSBpZiB0aGUgdGFyZ2V0IGFuZCBhbnlcclxuXHRcdFx0Ly8gb2YgaXRzIGFuY2VzdG9ycyB3ZXJlIHRoZSBvbmVzIHRoYXQgYmxvY2tlZCBhIGNsaWNrLiBUaGlzIGlzIG5lY2Vzc2FyeVxyXG5cdFx0XHQvLyBiZWNhdXNlIG9mIHRoZSBzdHJhbmdlIG1vdXNlL2NsaWNrIHRhcmdldCBjYWxjdWxhdGlvbiBkb25lIGluIHRoZVxyXG5cdFx0XHQvLyBBbmRyb2lkIDIuMSBicm93c2VyLCB3aGVyZSBpZiB5b3UgY2xpY2sgb24gYW4gZWxlbWVudCwgYW5kIHRoZXJlIGlzIGFcclxuXHRcdFx0Ly8gbW91c2UvY2xpY2sgaGFuZGxlciBvbiBvbmUgb2YgaXRzIGFuY2VzdG9ycywgdGhlIHRhcmdldCB3aWxsIGJlIHRoZVxyXG5cdFx0XHQvLyBpbm5lcm1vc3QgY2hpbGQgb2YgdGhlIHRvdWNoZWQgZWxlbWVudCwgZXZlbiBpZiB0aGF0IGNoaWxkIGlzIG5vIHdoZXJlXHJcblx0XHRcdC8vIG5lYXIgdGhlIHBvaW50IG9mIHRvdWNoLlxyXG5cclxuXHRcdFx0ZWxlID0gdGFyZ2V0O1xyXG5cclxuXHRcdFx0d2hpbGUgKCBlbGUgKSB7XHJcblx0XHRcdFx0Zm9yICggaSA9IDA7IGkgPCBjbnQ7IGkrKyApIHtcclxuXHRcdFx0XHRcdG8gPSBjbGlja0Jsb2NrTGlzdFsgaSBdO1xyXG5cdFx0XHRcdFx0dG91Y2hJRCA9IDA7XHJcblxyXG5cdFx0XHRcdFx0aWYgKCAoIGVsZSA9PT0gdGFyZ2V0ICYmIE1hdGguYWJzKCBvLnggLSB4ICkgPCB0aHJlc2hvbGQgJiYgTWF0aC5hYnMoIG8ueSAtIHkgKSA8IHRocmVzaG9sZCApIHx8XHJcblx0XHRcdFx0XHRcdFx0XHQkLmRhdGEoIGVsZSwgdG91Y2hUYXJnZXRQcm9wZXJ0eU5hbWUgKSA9PT0gby50b3VjaElEICkge1xyXG5cdFx0XHRcdFx0XHQvLyBYWFg6IFdlIG1heSB3YW50IHRvIGNvbnNpZGVyIHJlbW92aW5nIG1hdGNoZXMgZnJvbSB0aGUgYmxvY2sgbGlzdFxyXG5cdFx0XHRcdFx0XHQvLyAgICAgIGluc3RlYWQgb2Ygd2FpdGluZyBmb3IgdGhlIHJlc2V0IHRpbWVyIHRvIGZpcmUuXHJcblx0XHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRlbGUgPSBlbGUucGFyZW50Tm9kZTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH0sIHRydWUpO1xyXG59XHJcbn0pKCBqUXVlcnksIHdpbmRvdywgZG9jdW1lbnQgKTtcclxuXHJcblxyXG4oZnVuY3Rpb24oICQsIHdpbmRvdywgdW5kZWZpbmVkICkge1xyXG5cdHZhciAkZG9jdW1lbnQgPSAkKCBkb2N1bWVudCApLFxyXG5cdFx0c3VwcG9ydFRvdWNoID0gJC5tb2JpbGUuc3VwcG9ydC50b3VjaCxcclxuXHRcdHNjcm9sbEV2ZW50ID0gXCJ0b3VjaG1vdmUgc2Nyb2xsXCIsXHJcblx0XHR0b3VjaFN0YXJ0RXZlbnQgPSBzdXBwb3J0VG91Y2ggPyBcInRvdWNoc3RhcnRcIiA6IFwibW91c2Vkb3duXCIsXHJcblx0XHR0b3VjaFN0b3BFdmVudCA9IHN1cHBvcnRUb3VjaCA/IFwidG91Y2hlbmRcIiA6IFwibW91c2V1cFwiLFxyXG5cdFx0dG91Y2hNb3ZlRXZlbnQgPSBzdXBwb3J0VG91Y2ggPyBcInRvdWNobW92ZVwiIDogXCJtb3VzZW1vdmVcIjtcclxuXHJcblx0Ly8gc2V0dXAgbmV3IGV2ZW50IHNob3J0Y3V0c1xyXG5cdCQuZWFjaCggKCBcInRvdWNoc3RhcnQgdG91Y2htb3ZlIHRvdWNoZW5kIFwiICtcclxuXHRcdFwidGFwIHRhcGhvbGQgXCIgK1xyXG5cdFx0XCJzd2lwZSBzd2lwZWxlZnQgc3dpcGVyaWdodCBcIiArXHJcblx0XHRcInNjcm9sbHN0YXJ0IHNjcm9sbHN0b3BcIiApLnNwbGl0KCBcIiBcIiApLCBmdW5jdGlvbiggaSwgbmFtZSApIHtcclxuXHJcblx0XHQkLmZuWyBuYW1lIF0gPSBmdW5jdGlvbiggZm4gKSB7XHJcblx0XHRcdHJldHVybiBmbiA/IHRoaXMuYmluZCggbmFtZSwgZm4gKSA6IHRoaXMudHJpZ2dlciggbmFtZSApO1xyXG5cdFx0fTtcclxuXHJcblx0XHQvLyBqUXVlcnkgPCAxLjhcclxuXHRcdGlmICggJC5hdHRyRm4gKSB7XHJcblx0XHRcdCQuYXR0ckZuWyBuYW1lIF0gPSB0cnVlO1xyXG5cdFx0fVxyXG5cdH0pO1xyXG5cclxuXHRmdW5jdGlvbiB0cmlnZ2VyQ3VzdG9tRXZlbnQoIG9iaiwgZXZlbnRUeXBlLCBldmVudCwgYnViYmxlICkge1xyXG5cdFx0dmFyIG9yaWdpbmFsVHlwZSA9IGV2ZW50LnR5cGU7XHJcblx0XHRldmVudC50eXBlID0gZXZlbnRUeXBlO1xyXG5cdFx0aWYgKCBidWJibGUgKSB7XHJcblx0XHRcdCQuZXZlbnQudHJpZ2dlciggZXZlbnQsIHVuZGVmaW5lZCwgb2JqICk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHQkLmV2ZW50LmRpc3BhdGNoLmNhbGwoIG9iaiwgZXZlbnQgKTtcclxuXHRcdH1cclxuXHRcdGV2ZW50LnR5cGUgPSBvcmlnaW5hbFR5cGU7XHJcblx0fVxyXG5cclxuXHQvLyBhbHNvIGhhbmRsZXMgc2Nyb2xsc3RvcFxyXG5cdCQuZXZlbnQuc3BlY2lhbC5zY3JvbGxzdGFydCA9IHtcclxuXHJcblx0XHRlbmFibGVkOiB0cnVlLFxyXG5cdFx0c2V0dXA6IGZ1bmN0aW9uKCkge1xyXG5cclxuXHRcdFx0dmFyIHRoaXNPYmplY3QgPSB0aGlzLFxyXG5cdFx0XHRcdCR0aGlzID0gJCggdGhpc09iamVjdCApLFxyXG5cdFx0XHRcdHNjcm9sbGluZyxcclxuXHRcdFx0XHR0aW1lcjtcclxuXHJcblx0XHRcdGZ1bmN0aW9uIHRyaWdnZXIoIGV2ZW50LCBzdGF0ZSApIHtcclxuXHRcdFx0XHRzY3JvbGxpbmcgPSBzdGF0ZTtcclxuXHRcdFx0XHR0cmlnZ2VyQ3VzdG9tRXZlbnQoIHRoaXNPYmplY3QsIHNjcm9sbGluZyA/IFwic2Nyb2xsc3RhcnRcIiA6IFwic2Nyb2xsc3RvcFwiLCBldmVudCApO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBpUGhvbmUgdHJpZ2dlcnMgc2Nyb2xsIGFmdGVyIGEgc21hbGwgZGVsYXk7IHVzZSB0b3VjaG1vdmUgaW5zdGVhZFxyXG5cdFx0XHQkdGhpcy5iaW5kKCBzY3JvbGxFdmVudCwgZnVuY3Rpb24oIGV2ZW50ICkge1xyXG5cclxuXHRcdFx0XHRpZiAoICEkLmV2ZW50LnNwZWNpYWwuc2Nyb2xsc3RhcnQuZW5hYmxlZCApIHtcclxuXHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdGlmICggIXNjcm9sbGluZyApIHtcclxuXHRcdFx0XHRcdHRyaWdnZXIoIGV2ZW50LCB0cnVlICk7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRjbGVhclRpbWVvdXQoIHRpbWVyICk7XHJcblx0XHRcdFx0dGltZXIgPSBzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdHRyaWdnZXIoIGV2ZW50LCBmYWxzZSApO1xyXG5cdFx0XHRcdH0sIDUwICk7XHJcblx0XHRcdH0pO1xyXG5cdFx0fSxcclxuXHRcdHRlYXJkb3duOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0JCggdGhpcyApLnVuYmluZCggc2Nyb2xsRXZlbnQgKTtcclxuXHRcdH1cclxuXHR9O1xyXG5cclxuXHQvLyBhbHNvIGhhbmRsZXMgdGFwaG9sZFxyXG5cdCQuZXZlbnQuc3BlY2lhbC50YXAgPSB7XHJcblx0XHR0YXBob2xkVGhyZXNob2xkOiA3NTAsXHJcblx0XHRlbWl0VGFwT25UYXBob2xkOiB0cnVlLFxyXG5cdFx0c2V0dXA6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR2YXIgdGhpc09iamVjdCA9IHRoaXMsXHJcblx0XHRcdFx0JHRoaXMgPSAkKCB0aGlzT2JqZWN0ICksXHJcblx0XHRcdFx0aXNUYXBob2xkID0gZmFsc2U7XHJcblxyXG5cdFx0XHQkdGhpcy5iaW5kKCBcInZtb3VzZWRvd25cIiwgZnVuY3Rpb24oIGV2ZW50ICkge1xyXG5cdFx0XHRcdGlzVGFwaG9sZCA9IGZhbHNlO1xyXG5cdFx0XHRcdGlmICggZXZlbnQud2hpY2ggJiYgZXZlbnQud2hpY2ggIT09IDEgKSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHR2YXIgb3JpZ1RhcmdldCA9IGV2ZW50LnRhcmdldCxcclxuXHRcdFx0XHRcdHRpbWVyO1xyXG5cclxuXHRcdFx0XHRmdW5jdGlvbiBjbGVhclRhcFRpbWVyKCkge1xyXG5cdFx0XHRcdFx0Y2xlYXJUaW1lb3V0KCB0aW1lciApO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0ZnVuY3Rpb24gY2xlYXJUYXBIYW5kbGVycygpIHtcclxuXHRcdFx0XHRcdGNsZWFyVGFwVGltZXIoKTtcclxuXHJcblx0XHRcdFx0XHQkdGhpcy51bmJpbmQoIFwidmNsaWNrXCIsIGNsaWNrSGFuZGxlciApXHJcblx0XHRcdFx0XHRcdC51bmJpbmQoIFwidm1vdXNldXBcIiwgY2xlYXJUYXBUaW1lciApO1xyXG5cdFx0XHRcdFx0JGRvY3VtZW50LnVuYmluZCggXCJ2bW91c2VjYW5jZWxcIiwgY2xlYXJUYXBIYW5kbGVycyApO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0ZnVuY3Rpb24gY2xpY2tIYW5kbGVyKCBldmVudCApIHtcclxuXHRcdFx0XHRcdGNsZWFyVGFwSGFuZGxlcnMoKTtcclxuXHJcblx0XHRcdFx0XHQvLyBPTkxZIHRyaWdnZXIgYSAndGFwJyBldmVudCBpZiB0aGUgc3RhcnQgdGFyZ2V0IGlzXHJcblx0XHRcdFx0XHQvLyB0aGUgc2FtZSBhcyB0aGUgc3RvcCB0YXJnZXQuXHJcblx0XHRcdFx0XHRpZiAoICFpc1RhcGhvbGQgJiYgb3JpZ1RhcmdldCA9PT0gZXZlbnQudGFyZ2V0ICkge1xyXG5cdFx0XHRcdFx0XHR0cmlnZ2VyQ3VzdG9tRXZlbnQoIHRoaXNPYmplY3QsIFwidGFwXCIsIGV2ZW50ICk7XHJcblx0XHRcdFx0XHR9IGVsc2UgaWYgKCBpc1RhcGhvbGQgKSB7XHJcblx0XHRcdFx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHQkdGhpcy5iaW5kKCBcInZtb3VzZXVwXCIsIGNsZWFyVGFwVGltZXIgKVxyXG5cdFx0XHRcdFx0LmJpbmQoIFwidmNsaWNrXCIsIGNsaWNrSGFuZGxlciApO1xyXG5cdFx0XHRcdCRkb2N1bWVudC5iaW5kKCBcInZtb3VzZWNhbmNlbFwiLCBjbGVhclRhcEhhbmRsZXJzICk7XHJcblxyXG5cdFx0XHRcdHRpbWVyID0gc2V0VGltZW91dCggZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHRpZiAoICEkLmV2ZW50LnNwZWNpYWwudGFwLmVtaXRUYXBPblRhcGhvbGQgKSB7XHJcblx0XHRcdFx0XHRcdGlzVGFwaG9sZCA9IHRydWU7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR0cmlnZ2VyQ3VzdG9tRXZlbnQoIHRoaXNPYmplY3QsIFwidGFwaG9sZFwiLCAkLkV2ZW50KCBcInRhcGhvbGRcIiwgeyB0YXJnZXQ6IG9yaWdUYXJnZXQgfSApICk7XHJcblx0XHRcdFx0fSwgJC5ldmVudC5zcGVjaWFsLnRhcC50YXBob2xkVGhyZXNob2xkICk7XHJcblx0XHRcdH0pO1xyXG5cdFx0fSxcclxuXHRcdHRlYXJkb3duOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0JCggdGhpcyApLnVuYmluZCggXCJ2bW91c2Vkb3duXCIgKS51bmJpbmQoIFwidmNsaWNrXCIgKS51bmJpbmQoIFwidm1vdXNldXBcIiApO1xyXG5cdFx0XHQkZG9jdW1lbnQudW5iaW5kKCBcInZtb3VzZWNhbmNlbFwiICk7XHJcblx0XHR9XHJcblx0fTtcclxuXHJcblx0Ly8gQWxzbyBoYW5kbGVzIHN3aXBlbGVmdCwgc3dpcGVyaWdodFxyXG5cdCQuZXZlbnQuc3BlY2lhbC5zd2lwZSA9IHtcclxuXHJcblx0XHQvLyBNb3JlIHRoYW4gdGhpcyBob3Jpem9udGFsIGRpc3BsYWNlbWVudCwgYW5kIHdlIHdpbGwgc3VwcHJlc3Mgc2Nyb2xsaW5nLlxyXG5cdFx0c2Nyb2xsU3VwcmVzc2lvblRocmVzaG9sZDogMzAsXHJcblxyXG5cdFx0Ly8gTW9yZSB0aW1lIHRoYW4gdGhpcywgYW5kIGl0IGlzbid0IGEgc3dpcGUuXHJcblx0XHRkdXJhdGlvblRocmVzaG9sZDogMTAwMCxcclxuXHJcblx0XHQvLyBTd2lwZSBob3Jpem9udGFsIGRpc3BsYWNlbWVudCBtdXN0IGJlIG1vcmUgdGhhbiB0aGlzLlxyXG5cdFx0aG9yaXpvbnRhbERpc3RhbmNlVGhyZXNob2xkOiAzMCxcclxuXHJcblx0XHQvLyBTd2lwZSB2ZXJ0aWNhbCBkaXNwbGFjZW1lbnQgbXVzdCBiZSBsZXNzIHRoYW4gdGhpcy5cclxuXHRcdHZlcnRpY2FsRGlzdGFuY2VUaHJlc2hvbGQ6IDMwLFxyXG5cclxuXHRcdGdldExvY2F0aW9uOiBmdW5jdGlvbiAoIGV2ZW50ICkge1xyXG5cdFx0XHR2YXIgd2luUGFnZVggPSB3aW5kb3cucGFnZVhPZmZzZXQsXHJcblx0XHRcdFx0d2luUGFnZVkgPSB3aW5kb3cucGFnZVlPZmZzZXQsXHJcblx0XHRcdFx0eCA9IGV2ZW50LmNsaWVudFgsXHJcblx0XHRcdFx0eSA9IGV2ZW50LmNsaWVudFk7XHJcblxyXG5cdFx0XHRpZiAoIGV2ZW50LnBhZ2VZID09PSAwICYmIE1hdGguZmxvb3IoIHkgKSA+IE1hdGguZmxvb3IoIGV2ZW50LnBhZ2VZICkgfHxcclxuXHRcdFx0XHRldmVudC5wYWdlWCA9PT0gMCAmJiBNYXRoLmZsb29yKCB4ICkgPiBNYXRoLmZsb29yKCBldmVudC5wYWdlWCApICkge1xyXG5cclxuXHRcdFx0XHQvLyBpT1M0IGNsaWVudFgvY2xpZW50WSBoYXZlIHRoZSB2YWx1ZSB0aGF0IHNob3VsZCBoYXZlIGJlZW5cclxuXHRcdFx0XHQvLyBpbiBwYWdlWC9wYWdlWS4gV2hpbGUgcGFnZVgvcGFnZS8gaGF2ZSB0aGUgdmFsdWUgMFxyXG5cdFx0XHRcdHggPSB4IC0gd2luUGFnZVg7XHJcblx0XHRcdFx0eSA9IHkgLSB3aW5QYWdlWTtcclxuXHRcdFx0fSBlbHNlIGlmICggeSA8ICggZXZlbnQucGFnZVkgLSB3aW5QYWdlWSkgfHwgeCA8ICggZXZlbnQucGFnZVggLSB3aW5QYWdlWCApICkge1xyXG5cclxuXHRcdFx0XHQvLyBTb21lIEFuZHJvaWQgYnJvd3NlcnMgaGF2ZSB0b3RhbGx5IGJvZ3VzIHZhbHVlcyBmb3IgY2xpZW50WC9ZXHJcblx0XHRcdFx0Ly8gd2hlbiBzY3JvbGxpbmcvem9vbWluZyBhIHBhZ2UuIERldGVjdGFibGUgc2luY2UgY2xpZW50WC9jbGllbnRZXHJcblx0XHRcdFx0Ly8gc2hvdWxkIG5ldmVyIGJlIHNtYWxsZXIgdGhhbiBwYWdlWC9wYWdlWSBtaW51cyBwYWdlIHNjcm9sbFxyXG5cdFx0XHRcdHggPSBldmVudC5wYWdlWCAtIHdpblBhZ2VYO1xyXG5cdFx0XHRcdHkgPSBldmVudC5wYWdlWSAtIHdpblBhZ2VZO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRyZXR1cm4ge1xyXG5cdFx0XHRcdHg6IHgsXHJcblx0XHRcdFx0eTogeVxyXG5cdFx0XHR9O1xyXG5cdFx0fSxcclxuXHJcblx0XHRzdGFydDogZnVuY3Rpb24oIGV2ZW50ICkge1xyXG5cdFx0XHR2YXIgZGF0YSA9IGV2ZW50Lm9yaWdpbmFsRXZlbnQudG91Y2hlcyA/XHJcblx0XHRcdFx0XHRldmVudC5vcmlnaW5hbEV2ZW50LnRvdWNoZXNbIDAgXSA6IGV2ZW50LFxyXG5cdFx0XHRcdGxvY2F0aW9uID0gJC5ldmVudC5zcGVjaWFsLnN3aXBlLmdldExvY2F0aW9uKCBkYXRhICk7XHJcblx0XHRcdHJldHVybiB7XHJcblx0XHRcdFx0XHRcdHRpbWU6ICggbmV3IERhdGUoKSApLmdldFRpbWUoKSxcclxuXHRcdFx0XHRcdFx0Y29vcmRzOiBbIGxvY2F0aW9uLngsIGxvY2F0aW9uLnkgXSxcclxuXHRcdFx0XHRcdFx0b3JpZ2luOiAkKCBldmVudC50YXJnZXQgKVxyXG5cdFx0XHRcdFx0fTtcclxuXHRcdH0sXHJcblxyXG5cdFx0c3RvcDogZnVuY3Rpb24oIGV2ZW50ICkge1xyXG5cdFx0XHR2YXIgZGF0YSA9IGV2ZW50Lm9yaWdpbmFsRXZlbnQudG91Y2hlcyA/XHJcblx0XHRcdFx0XHRldmVudC5vcmlnaW5hbEV2ZW50LnRvdWNoZXNbIDAgXSA6IGV2ZW50LFxyXG5cdFx0XHRcdGxvY2F0aW9uID0gJC5ldmVudC5zcGVjaWFsLnN3aXBlLmdldExvY2F0aW9uKCBkYXRhICk7XHJcblx0XHRcdHJldHVybiB7XHJcblx0XHRcdFx0XHRcdHRpbWU6ICggbmV3IERhdGUoKSApLmdldFRpbWUoKSxcclxuXHRcdFx0XHRcdFx0Y29vcmRzOiBbIGxvY2F0aW9uLngsIGxvY2F0aW9uLnkgXVxyXG5cdFx0XHRcdFx0fTtcclxuXHRcdH0sXHJcblxyXG5cdFx0aGFuZGxlU3dpcGU6IGZ1bmN0aW9uKCBzdGFydCwgc3RvcCwgdGhpc09iamVjdCwgb3JpZ1RhcmdldCApIHtcclxuXHRcdFx0aWYgKCBzdG9wLnRpbWUgLSBzdGFydC50aW1lIDwgJC5ldmVudC5zcGVjaWFsLnN3aXBlLmR1cmF0aW9uVGhyZXNob2xkICYmXHJcblx0XHRcdFx0TWF0aC5hYnMoIHN0YXJ0LmNvb3Jkc1sgMCBdIC0gc3RvcC5jb29yZHNbIDAgXSApID4gJC5ldmVudC5zcGVjaWFsLnN3aXBlLmhvcml6b250YWxEaXN0YW5jZVRocmVzaG9sZCAmJlxyXG5cdFx0XHRcdE1hdGguYWJzKCBzdGFydC5jb29yZHNbIDEgXSAtIHN0b3AuY29vcmRzWyAxIF0gKSA8ICQuZXZlbnQuc3BlY2lhbC5zd2lwZS52ZXJ0aWNhbERpc3RhbmNlVGhyZXNob2xkICkge1xyXG5cdFx0XHRcdHZhciBkaXJlY3Rpb24gPSBzdGFydC5jb29yZHNbMF0gPiBzdG9wLmNvb3Jkc1sgMCBdID8gXCJzd2lwZWxlZnRcIiA6IFwic3dpcGVyaWdodFwiO1xyXG5cclxuXHRcdFx0XHR0cmlnZ2VyQ3VzdG9tRXZlbnQoIHRoaXNPYmplY3QsIFwic3dpcGVcIiwgJC5FdmVudCggXCJzd2lwZVwiLCB7IHRhcmdldDogb3JpZ1RhcmdldCwgc3dpcGVzdGFydDogc3RhcnQsIHN3aXBlc3RvcDogc3RvcCB9KSwgdHJ1ZSApO1xyXG5cdFx0XHRcdHRyaWdnZXJDdXN0b21FdmVudCggdGhpc09iamVjdCwgZGlyZWN0aW9uLCQuRXZlbnQoIGRpcmVjdGlvbiwgeyB0YXJnZXQ6IG9yaWdUYXJnZXQsIHN3aXBlc3RhcnQ6IHN0YXJ0LCBzd2lwZXN0b3A6IHN0b3AgfSApLCB0cnVlICk7XHJcblx0XHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHRcdH1cclxuXHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cclxuXHRcdH0sXHJcblxyXG5cdFx0Ly8gVGhpcyBzZXJ2ZXMgYXMgYSBmbGFnIHRvIGVuc3VyZSB0aGF0IGF0IG1vc3Qgb25lIHN3aXBlIGV2ZW50IGV2ZW50IGlzXHJcblx0XHQvLyBpbiB3b3JrIGF0IGFueSBnaXZlbiB0aW1lXHJcblx0XHRldmVudEluUHJvZ3Jlc3M6IGZhbHNlLFxyXG5cclxuXHRcdHNldHVwOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dmFyIGV2ZW50cyxcclxuXHRcdFx0XHR0aGlzT2JqZWN0ID0gdGhpcyxcclxuXHRcdFx0XHQkdGhpcyA9ICQoIHRoaXNPYmplY3QgKSxcclxuXHRcdFx0XHRjb250ZXh0ID0ge307XHJcblxyXG5cdFx0XHQvLyBSZXRyaWV2ZSB0aGUgZXZlbnRzIGRhdGEgZm9yIHRoaXMgZWxlbWVudCBhbmQgYWRkIHRoZSBzd2lwZSBjb250ZXh0XHJcblx0XHRcdGV2ZW50cyA9ICQuZGF0YSggdGhpcywgXCJtb2JpbGUtZXZlbnRzXCIgKTtcclxuXHRcdFx0aWYgKCAhZXZlbnRzICkge1xyXG5cdFx0XHRcdGV2ZW50cyA9IHsgbGVuZ3RoOiAwIH07XHJcblx0XHRcdFx0JC5kYXRhKCB0aGlzLCBcIm1vYmlsZS1ldmVudHNcIiwgZXZlbnRzICk7XHJcblx0XHRcdH1cclxuXHRcdFx0ZXZlbnRzLmxlbmd0aCsrO1xyXG5cdFx0XHRldmVudHMuc3dpcGUgPSBjb250ZXh0O1xyXG5cclxuXHRcdFx0Y29udGV4dC5zdGFydCA9IGZ1bmN0aW9uKCBldmVudCApIHtcclxuXHJcblx0XHRcdFx0Ly8gQmFpbCBpZiB3ZSdyZSBhbHJlYWR5IHdvcmtpbmcgb24gYSBzd2lwZSBldmVudFxyXG5cdFx0XHRcdGlmICggJC5ldmVudC5zcGVjaWFsLnN3aXBlLmV2ZW50SW5Qcm9ncmVzcyApIHtcclxuXHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0JC5ldmVudC5zcGVjaWFsLnN3aXBlLmV2ZW50SW5Qcm9ncmVzcyA9IHRydWU7XHJcblxyXG5cdFx0XHRcdHZhciBzdG9wLFxyXG5cdFx0XHRcdFx0c3RhcnQgPSAkLmV2ZW50LnNwZWNpYWwuc3dpcGUuc3RhcnQoIGV2ZW50ICksXHJcblx0XHRcdFx0XHRvcmlnVGFyZ2V0ID0gZXZlbnQudGFyZ2V0LFxyXG5cdFx0XHRcdFx0ZW1pdHRlZCA9IGZhbHNlO1xyXG5cclxuXHRcdFx0XHRjb250ZXh0Lm1vdmUgPSBmdW5jdGlvbiggZXZlbnQgKSB7XHJcblx0XHRcdFx0XHRpZiAoICFzdGFydCB8fCBldmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSApIHtcclxuXHRcdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdHN0b3AgPSAkLmV2ZW50LnNwZWNpYWwuc3dpcGUuc3RvcCggZXZlbnQgKTtcclxuXHRcdFx0XHRcdGlmICggIWVtaXR0ZWQgKSB7XHJcblx0XHRcdFx0XHRcdGVtaXR0ZWQgPSAkLmV2ZW50LnNwZWNpYWwuc3dpcGUuaGFuZGxlU3dpcGUoIHN0YXJ0LCBzdG9wLCB0aGlzT2JqZWN0LCBvcmlnVGFyZ2V0ICk7XHJcblx0XHRcdFx0XHRcdGlmICggZW1pdHRlZCApIHtcclxuXHJcblx0XHRcdFx0XHRcdFx0Ly8gUmVzZXQgdGhlIGNvbnRleHQgdG8gbWFrZSB3YXkgZm9yIHRoZSBuZXh0IHN3aXBlIGV2ZW50XHJcblx0XHRcdFx0XHRcdFx0JC5ldmVudC5zcGVjaWFsLnN3aXBlLmV2ZW50SW5Qcm9ncmVzcyA9IGZhbHNlO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHQvLyBwcmV2ZW50IHNjcm9sbGluZ1xyXG5cdFx0XHRcdFx0aWYgKCBNYXRoLmFicyggc3RhcnQuY29vcmRzWyAwIF0gLSBzdG9wLmNvb3Jkc1sgMCBdICkgPiAkLmV2ZW50LnNwZWNpYWwuc3dpcGUuc2Nyb2xsU3VwcmVzc2lvblRocmVzaG9sZCApIHtcclxuXHRcdFx0XHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9O1xyXG5cclxuXHRcdFx0XHRjb250ZXh0LnN0b3AgPSBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdFx0ZW1pdHRlZCA9IHRydWU7XHJcblxyXG5cdFx0XHRcdFx0XHQvLyBSZXNldCB0aGUgY29udGV4dCB0byBtYWtlIHdheSBmb3IgdGhlIG5leHQgc3dpcGUgZXZlbnRcclxuXHRcdFx0XHRcdFx0JC5ldmVudC5zcGVjaWFsLnN3aXBlLmV2ZW50SW5Qcm9ncmVzcyA9IGZhbHNlO1xyXG5cdFx0XHRcdFx0XHQkZG9jdW1lbnQub2ZmKCB0b3VjaE1vdmVFdmVudCwgY29udGV4dC5tb3ZlICk7XHJcblx0XHRcdFx0XHRcdGNvbnRleHQubW92ZSA9IG51bGw7XHJcblx0XHRcdFx0fTtcclxuXHJcblx0XHRcdFx0JGRvY3VtZW50Lm9uKCB0b3VjaE1vdmVFdmVudCwgY29udGV4dC5tb3ZlIClcclxuXHRcdFx0XHRcdC5vbmUoIHRvdWNoU3RvcEV2ZW50LCBjb250ZXh0LnN0b3AgKTtcclxuXHRcdFx0fTtcclxuXHRcdFx0JHRoaXMub24oIHRvdWNoU3RhcnRFdmVudCwgY29udGV4dC5zdGFydCApO1xyXG5cdFx0fSxcclxuXHJcblx0XHR0ZWFyZG93bjogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHZhciBldmVudHMsIGNvbnRleHQ7XHJcblxyXG5cdFx0XHRldmVudHMgPSAkLmRhdGEoIHRoaXMsIFwibW9iaWxlLWV2ZW50c1wiICk7XHJcblx0XHRcdGlmICggZXZlbnRzICkge1xyXG5cdFx0XHRcdGNvbnRleHQgPSBldmVudHMuc3dpcGU7XHJcblx0XHRcdFx0ZGVsZXRlIGV2ZW50cy5zd2lwZTtcclxuXHRcdFx0XHRldmVudHMubGVuZ3RoLS07XHJcblx0XHRcdFx0aWYgKCBldmVudHMubGVuZ3RoID09PSAwICkge1xyXG5cdFx0XHRcdFx0JC5yZW1vdmVEYXRhKCB0aGlzLCBcIm1vYmlsZS1ldmVudHNcIiApO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aWYgKCBjb250ZXh0ICkge1xyXG5cdFx0XHRcdGlmICggY29udGV4dC5zdGFydCApIHtcclxuXHRcdFx0XHRcdCQoIHRoaXMgKS5vZmYoIHRvdWNoU3RhcnRFdmVudCwgY29udGV4dC5zdGFydCApO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRpZiAoIGNvbnRleHQubW92ZSApIHtcclxuXHRcdFx0XHRcdCRkb2N1bWVudC5vZmYoIHRvdWNoTW92ZUV2ZW50LCBjb250ZXh0Lm1vdmUgKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0aWYgKCBjb250ZXh0LnN0b3AgKSB7XHJcblx0XHRcdFx0XHQkZG9jdW1lbnQub2ZmKCB0b3VjaFN0b3BFdmVudCwgY29udGV4dC5zdG9wICk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fTtcclxuXHQkLmVhY2goe1xyXG5cdFx0c2Nyb2xsc3RvcDogXCJzY3JvbGxzdGFydFwiLFxyXG5cdFx0dGFwaG9sZDogXCJ0YXBcIixcclxuXHRcdHN3aXBlbGVmdDogXCJzd2lwZS5sZWZ0XCIsXHJcblx0XHRzd2lwZXJpZ2h0OiBcInN3aXBlLnJpZ2h0XCJcclxuXHR9LCBmdW5jdGlvbiggZXZlbnQsIHNvdXJjZUV2ZW50ICkge1xyXG5cclxuXHRcdCQuZXZlbnQuc3BlY2lhbFsgZXZlbnQgXSA9IHtcclxuXHRcdFx0c2V0dXA6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdCQoIHRoaXMgKS5iaW5kKCBzb3VyY2VFdmVudCwgJC5ub29wICk7XHJcblx0XHRcdH0sXHJcblx0XHRcdHRlYXJkb3duOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHQkKCB0aGlzICkudW5iaW5kKCBzb3VyY2VFdmVudCApO1xyXG5cdFx0XHR9XHJcblx0XHR9O1xyXG5cdH0pO1xyXG5cclxufSkoIGpRdWVyeSwgdGhpcyApO1xyXG5cclxuXHJcblx0Ly8gdGhyb3R0bGVkIHJlc2l6ZSBldmVudFxyXG5cdChmdW5jdGlvbiggJCApIHtcclxuXHRcdCQuZXZlbnQuc3BlY2lhbC50aHJvdHRsZWRyZXNpemUgPSB7XHJcblx0XHRcdHNldHVwOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHQkKCB0aGlzICkuYmluZCggXCJyZXNpemVcIiwgaGFuZGxlciApO1xyXG5cdFx0XHR9LFxyXG5cdFx0XHR0ZWFyZG93bjogZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0JCggdGhpcyApLnVuYmluZCggXCJyZXNpemVcIiwgaGFuZGxlciApO1xyXG5cdFx0XHR9XHJcblx0XHR9O1xyXG5cclxuXHRcdHZhciB0aHJvdHRsZSA9IDI1MCxcclxuXHRcdFx0aGFuZGxlciA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdGN1cnIgPSAoIG5ldyBEYXRlKCkgKS5nZXRUaW1lKCk7XHJcblx0XHRcdFx0ZGlmZiA9IGN1cnIgLSBsYXN0Q2FsbDtcclxuXHJcblx0XHRcdFx0aWYgKCBkaWZmID49IHRocm90dGxlICkge1xyXG5cclxuXHRcdFx0XHRcdGxhc3RDYWxsID0gY3VycjtcclxuXHRcdFx0XHRcdCQoIHRoaXMgKS50cmlnZ2VyKCBcInRocm90dGxlZHJlc2l6ZVwiICk7XHJcblxyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblxyXG5cdFx0XHRcdFx0aWYgKCBoZWxkQ2FsbCApIHtcclxuXHRcdFx0XHRcdFx0Y2xlYXJUaW1lb3V0KCBoZWxkQ2FsbCApO1xyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdC8vIFByb21pc2UgYSBoZWxkIGNhbGwgd2lsbCBzdGlsbCBleGVjdXRlXHJcblx0XHRcdFx0XHRoZWxkQ2FsbCA9IHNldFRpbWVvdXQoIGhhbmRsZXIsIHRocm90dGxlIC0gZGlmZiApO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSxcclxuXHRcdFx0bGFzdENhbGwgPSAwLFxyXG5cdFx0XHRoZWxkQ2FsbCxcclxuXHRcdFx0Y3VycixcclxuXHRcdFx0ZGlmZjtcclxuXHR9KSggalF1ZXJ5ICk7XHJcblxyXG5cclxuKGZ1bmN0aW9uKCAkLCB3aW5kb3cgKSB7XHJcblx0dmFyIHdpbiA9ICQoIHdpbmRvdyApLFxyXG5cdFx0ZXZlbnRfbmFtZSA9IFwib3JpZW50YXRpb25jaGFuZ2VcIixcclxuXHRcdGdldF9vcmllbnRhdGlvbixcclxuXHRcdGxhc3Rfb3JpZW50YXRpb24sXHJcblx0XHRpbml0aWFsX29yaWVudGF0aW9uX2lzX2xhbmRzY2FwZSxcclxuXHRcdGluaXRpYWxfb3JpZW50YXRpb25faXNfZGVmYXVsdCxcclxuXHRcdHBvcnRyYWl0X21hcCA9IHsgXCIwXCI6IHRydWUsIFwiMTgwXCI6IHRydWUgfSxcclxuXHRcdHd3LCB3aCwgbGFuZHNjYXBlX3RocmVzaG9sZDtcclxuXHJcblx0Ly8gSXQgc2VlbXMgdGhhdCBzb21lIGRldmljZS9icm93c2VyIHZlbmRvcnMgdXNlIHdpbmRvdy5vcmllbnRhdGlvbiB2YWx1ZXMgMCBhbmQgMTgwIHRvXHJcblx0Ly8gZGVub3RlIHRoZSBcImRlZmF1bHRcIiBvcmllbnRhdGlvbi4gRm9yIGlPUyBkZXZpY2VzLCBhbmQgbW9zdCBvdGhlciBzbWFydC1waG9uZXMgdGVzdGVkLFxyXG5cdC8vIHRoZSBkZWZhdWx0IG9yaWVudGF0aW9uIGlzIGFsd2F5cyBcInBvcnRyYWl0XCIsIGJ1dCBpbiBzb21lIEFuZHJvaWQgYW5kIFJJTSBiYXNlZCB0YWJsZXRzLFxyXG5cdC8vIHRoZSBkZWZhdWx0IG9yaWVudGF0aW9uIGlzIFwibGFuZHNjYXBlXCIuIFRoZSBmb2xsb3dpbmcgY29kZSBhdHRlbXB0cyB0byB1c2UgdGhlIHdpbmRvd1xyXG5cdC8vIGRpbWVuc2lvbnMgdG8gZmlndXJlIG91dCB3aGF0IHRoZSBjdXJyZW50IG9yaWVudGF0aW9uIGlzLCBhbmQgdGhlbiBtYWtlcyBhZGp1c3RtZW50c1xyXG5cdC8vIHRvIHRoZSB0byB0aGUgcG9ydHJhaXRfbWFwIGlmIG5lY2Vzc2FyeSwgc28gdGhhdCB3ZSBjYW4gcHJvcGVybHkgZGVjb2RlIHRoZVxyXG5cdC8vIHdpbmRvdy5vcmllbnRhdGlvbiB2YWx1ZSB3aGVuZXZlciBnZXRfb3JpZW50YXRpb24oKSBpcyBjYWxsZWQuXHJcblx0Ly9cclxuXHQvLyBOb3RlIHRoYXQgd2UgdXNlZCB0byB1c2UgYSBtZWRpYSBxdWVyeSB0byBmaWd1cmUgb3V0IHdoYXQgdGhlIG9yaWVudGF0aW9uIHRoZSBicm93c2VyXHJcblx0Ly8gdGhpbmtzIGl0IGlzIGluOlxyXG5cdC8vXHJcblx0Ly8gICAgIGluaXRpYWxfb3JpZW50YXRpb25faXNfbGFuZHNjYXBlID0gJC5tb2JpbGUubWVkaWEoXCJhbGwgYW5kIChvcmllbnRhdGlvbjogbGFuZHNjYXBlKVwiKTtcclxuXHQvL1xyXG5cdC8vIGJ1dCB0aGVyZSB3YXMgYW4gaVBob25lL2lQb2QgVG91Y2ggYnVnIGJlZ2lubmluZyB3aXRoIGlPUyA0LjIsIHVwIHRocm91Z2ggaU9TIDUuMSxcclxuXHQvLyB3aGVyZSB0aGUgYnJvd3NlciAqQUxXQVlTKiBhcHBsaWVkIHRoZSBsYW5kc2NhcGUgbWVkaWEgcXVlcnkuIFRoaXMgYnVnIGRvZXMgbm90XHJcblx0Ly8gaGFwcGVuIG9uIGlQYWQuXHJcblxyXG5cdGlmICggJC5zdXBwb3J0Lm9yaWVudGF0aW9uICkge1xyXG5cclxuXHRcdC8vIENoZWNrIHRoZSB3aW5kb3cgd2lkdGggYW5kIGhlaWdodCB0byBmaWd1cmUgb3V0IHdoYXQgdGhlIGN1cnJlbnQgb3JpZW50YXRpb25cclxuXHRcdC8vIG9mIHRoZSBkZXZpY2UgaXMgYXQgdGhpcyBtb21lbnQuIE5vdGUgdGhhdCB3ZSd2ZSBpbml0aWFsaXplZCB0aGUgcG9ydHJhaXQgbWFwXHJcblx0XHQvLyB2YWx1ZXMgdG8gMCBhbmQgMTgwLCAqQU5EKiB3ZSBwdXJwb3NlbHkgY2hlY2sgZm9yIGxhbmRzY2FwZSBzbyB0aGF0IGlmIHdlIGd1ZXNzXHJcblx0XHQvLyB3cm9uZywgLCB3ZSBkZWZhdWx0IHRvIHRoZSBhc3N1bXB0aW9uIHRoYXQgcG9ydHJhaXQgaXMgdGhlIGRlZmF1bHQgb3JpZW50YXRpb24uXHJcblx0XHQvLyBXZSB1c2UgYSB0aHJlc2hvbGQgY2hlY2sgYmVsb3cgYmVjYXVzZSBvbiBzb21lIHBsYXRmb3JtcyBsaWtlIGlPUywgdGhlIGlQaG9uZVxyXG5cdFx0Ly8gZm9ybS1mYWN0b3IgY2FuIHJlcG9ydCBhIGxhcmdlciB3aWR0aCB0aGFuIGhlaWdodCBpZiB0aGUgdXNlciB0dXJucyBvbiB0aGVcclxuXHRcdC8vIGRldmVsb3BlciBjb25zb2xlLiBUaGUgYWN0dWFsIHRocmVzaG9sZCB2YWx1ZSBpcyBzb21ld2hhdCBhcmJpdHJhcnksIHdlIGp1c3RcclxuXHRcdC8vIG5lZWQgdG8gbWFrZSBzdXJlIGl0IGlzIGxhcmdlIGVub3VnaCB0byBleGNsdWRlIHRoZSBkZXZlbG9wZXIgY29uc29sZSBjYXNlLlxyXG5cclxuXHRcdHd3ID0gd2luZG93LmlubmVyV2lkdGggfHwgd2luLndpZHRoKCk7XHJcblx0XHR3aCA9IHdpbmRvdy5pbm5lckhlaWdodCB8fCB3aW4uaGVpZ2h0KCk7XHJcblx0XHRsYW5kc2NhcGVfdGhyZXNob2xkID0gNTA7XHJcblxyXG5cdFx0aW5pdGlhbF9vcmllbnRhdGlvbl9pc19sYW5kc2NhcGUgPSB3dyA+IHdoICYmICggd3cgLSB3aCApID4gbGFuZHNjYXBlX3RocmVzaG9sZDtcclxuXHJcblx0XHQvLyBOb3cgY2hlY2sgdG8gc2VlIGlmIHRoZSBjdXJyZW50IHdpbmRvdy5vcmllbnRhdGlvbiBpcyAwIG9yIDE4MC5cclxuXHRcdGluaXRpYWxfb3JpZW50YXRpb25faXNfZGVmYXVsdCA9IHBvcnRyYWl0X21hcFsgd2luZG93Lm9yaWVudGF0aW9uIF07XHJcblxyXG5cdFx0Ly8gSWYgdGhlIGluaXRpYWwgb3JpZW50YXRpb24gaXMgbGFuZHNjYXBlLCBidXQgd2luZG93Lm9yaWVudGF0aW9uIHJlcG9ydHMgMCBvciAxODAsICpPUipcclxuXHRcdC8vIGlmIHRoZSBpbml0aWFsIG9yaWVudGF0aW9uIGlzIHBvcnRyYWl0LCBidXQgd2luZG93Lm9yaWVudGF0aW9uIHJlcG9ydHMgOTAgb3IgLTkwLCB3ZVxyXG5cdFx0Ly8gbmVlZCB0byBmbGlwIG91ciBwb3J0cmFpdF9tYXAgdmFsdWVzIGJlY2F1c2UgbGFuZHNjYXBlIGlzIHRoZSBkZWZhdWx0IG9yaWVudGF0aW9uIGZvclxyXG5cdFx0Ly8gdGhpcyBkZXZpY2UvYnJvd3Nlci5cclxuXHRcdGlmICggKCBpbml0aWFsX29yaWVudGF0aW9uX2lzX2xhbmRzY2FwZSAmJiBpbml0aWFsX29yaWVudGF0aW9uX2lzX2RlZmF1bHQgKSB8fCAoICFpbml0aWFsX29yaWVudGF0aW9uX2lzX2xhbmRzY2FwZSAmJiAhaW5pdGlhbF9vcmllbnRhdGlvbl9pc19kZWZhdWx0ICkgKSB7XHJcblx0XHRcdHBvcnRyYWl0X21hcCA9IHsgXCItOTBcIjogdHJ1ZSwgXCI5MFwiOiB0cnVlIH07XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQkLmV2ZW50LnNwZWNpYWwub3JpZW50YXRpb25jaGFuZ2UgPSAkLmV4dGVuZCgge30sICQuZXZlbnQuc3BlY2lhbC5vcmllbnRhdGlvbmNoYW5nZSwge1xyXG5cdFx0c2V0dXA6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHQvLyBJZiB0aGUgZXZlbnQgaXMgc3VwcG9ydGVkIG5hdGl2ZWx5LCByZXR1cm4gZmFsc2Ugc28gdGhhdCBqUXVlcnlcclxuXHRcdFx0Ly8gd2lsbCBiaW5kIHRvIHRoZSBldmVudCB1c2luZyBET00gbWV0aG9kcy5cclxuXHRcdFx0aWYgKCAkLnN1cHBvcnQub3JpZW50YXRpb24gJiYgISQuZXZlbnQuc3BlY2lhbC5vcmllbnRhdGlvbmNoYW5nZS5kaXNhYmxlZCApIHtcclxuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIEdldCB0aGUgY3VycmVudCBvcmllbnRhdGlvbiB0byBhdm9pZCBpbml0aWFsIGRvdWJsZS10cmlnZ2VyaW5nLlxyXG5cdFx0XHRsYXN0X29yaWVudGF0aW9uID0gZ2V0X29yaWVudGF0aW9uKCk7XHJcblxyXG5cdFx0XHQvLyBCZWNhdXNlIHRoZSBvcmllbnRhdGlvbmNoYW5nZSBldmVudCBkb2Vzbid0IGV4aXN0LCBzaW11bGF0ZSB0aGVcclxuXHRcdFx0Ly8gZXZlbnQgYnkgdGVzdGluZyB3aW5kb3cgZGltZW5zaW9ucyBvbiByZXNpemUuXHJcblx0XHRcdHdpbi5iaW5kKCBcInRocm90dGxlZHJlc2l6ZVwiLCBoYW5kbGVyICk7XHJcblx0XHR9LFxyXG5cdFx0dGVhcmRvd246IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHQvLyBJZiB0aGUgZXZlbnQgaXMgbm90IHN1cHBvcnRlZCBuYXRpdmVseSwgcmV0dXJuIGZhbHNlIHNvIHRoYXRcclxuXHRcdFx0Ly8galF1ZXJ5IHdpbGwgdW5iaW5kIHRoZSBldmVudCB1c2luZyBET00gbWV0aG9kcy5cclxuXHRcdFx0aWYgKCAkLnN1cHBvcnQub3JpZW50YXRpb24gJiYgISQuZXZlbnQuc3BlY2lhbC5vcmllbnRhdGlvbmNoYW5nZS5kaXNhYmxlZCApIHtcclxuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIEJlY2F1c2UgdGhlIG9yaWVudGF0aW9uY2hhbmdlIGV2ZW50IGRvZXNuJ3QgZXhpc3QsIHVuYmluZCB0aGVcclxuXHRcdFx0Ly8gcmVzaXplIGV2ZW50IGhhbmRsZXIuXHJcblx0XHRcdHdpbi51bmJpbmQoIFwidGhyb3R0bGVkcmVzaXplXCIsIGhhbmRsZXIgKTtcclxuXHRcdH0sXHJcblx0XHRhZGQ6IGZ1bmN0aW9uKCBoYW5kbGVPYmogKSB7XHJcblx0XHRcdC8vIFNhdmUgYSByZWZlcmVuY2UgdG8gdGhlIGJvdW5kIGV2ZW50IGhhbmRsZXIuXHJcblx0XHRcdHZhciBvbGRfaGFuZGxlciA9IGhhbmRsZU9iai5oYW5kbGVyO1xyXG5cclxuXHRcdFx0aGFuZGxlT2JqLmhhbmRsZXIgPSBmdW5jdGlvbiggZXZlbnQgKSB7XHJcblx0XHRcdFx0Ly8gTW9kaWZ5IGV2ZW50IG9iamVjdCwgYWRkaW5nIHRoZSAub3JpZW50YXRpb24gcHJvcGVydHkuXHJcblx0XHRcdFx0ZXZlbnQub3JpZW50YXRpb24gPSBnZXRfb3JpZW50YXRpb24oKTtcclxuXHJcblx0XHRcdFx0Ly8gQ2FsbCB0aGUgb3JpZ2luYWxseS1ib3VuZCBldmVudCBoYW5kbGVyIGFuZCByZXR1cm4gaXRzIHJlc3VsdC5cclxuXHRcdFx0XHRyZXR1cm4gb2xkX2hhbmRsZXIuYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApO1xyXG5cdFx0XHR9O1xyXG5cdFx0fVxyXG5cdH0pO1xyXG5cclxuXHQvLyBJZiB0aGUgZXZlbnQgaXMgbm90IHN1cHBvcnRlZCBuYXRpdmVseSwgdGhpcyBoYW5kbGVyIHdpbGwgYmUgYm91bmQgdG9cclxuXHQvLyB0aGUgd2luZG93IHJlc2l6ZSBldmVudCB0byBzaW11bGF0ZSB0aGUgb3JpZW50YXRpb25jaGFuZ2UgZXZlbnQuXHJcblx0ZnVuY3Rpb24gaGFuZGxlcigpIHtcclxuXHRcdC8vIEdldCB0aGUgY3VycmVudCBvcmllbnRhdGlvbi5cclxuXHRcdHZhciBvcmllbnRhdGlvbiA9IGdldF9vcmllbnRhdGlvbigpO1xyXG5cclxuXHRcdGlmICggb3JpZW50YXRpb24gIT09IGxhc3Rfb3JpZW50YXRpb24gKSB7XHJcblx0XHRcdC8vIFRoZSBvcmllbnRhdGlvbiBoYXMgY2hhbmdlZCwgc28gdHJpZ2dlciB0aGUgb3JpZW50YXRpb25jaGFuZ2UgZXZlbnQuXHJcblx0XHRcdGxhc3Rfb3JpZW50YXRpb24gPSBvcmllbnRhdGlvbjtcclxuXHRcdFx0d2luLnRyaWdnZXIoIGV2ZW50X25hbWUgKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8vIEdldCB0aGUgY3VycmVudCBwYWdlIG9yaWVudGF0aW9uLiBUaGlzIG1ldGhvZCBpcyBleHBvc2VkIHB1YmxpY2x5LCBzaG91bGQgaXRcclxuXHQvLyBiZSBuZWVkZWQsIGFzIGpRdWVyeS5ldmVudC5zcGVjaWFsLm9yaWVudGF0aW9uY2hhbmdlLm9yaWVudGF0aW9uKClcclxuXHQkLmV2ZW50LnNwZWNpYWwub3JpZW50YXRpb25jaGFuZ2Uub3JpZW50YXRpb24gPSBnZXRfb3JpZW50YXRpb24gPSBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBpc1BvcnRyYWl0ID0gdHJ1ZSwgZWxlbSA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtcclxuXHJcblx0XHQvLyBwcmVmZXIgd2luZG93IG9yaWVudGF0aW9uIHRvIHRoZSBjYWxjdWxhdGlvbiBiYXNlZCBvbiBzY3JlZW5zaXplIGFzXHJcblx0XHQvLyB0aGUgYWN0dWFsIHNjcmVlbiByZXNpemUgdGFrZXMgcGxhY2UgYmVmb3JlIG9yIGFmdGVyIHRoZSBvcmllbnRhdGlvbiBjaGFuZ2UgZXZlbnRcclxuXHRcdC8vIGhhcyBiZWVuIGZpcmVkIGRlcGVuZGluZyBvbiBpbXBsZW1lbnRhdGlvbiAoZWcgYW5kcm9pZCAyLjMgaXMgYmVmb3JlLCBpcGhvbmUgYWZ0ZXIpLlxyXG5cdFx0Ly8gTW9yZSB0ZXN0aW5nIGlzIHJlcXVpcmVkIHRvIGRldGVybWluZSBpZiBhIG1vcmUgcmVsaWFibGUgbWV0aG9kIG9mIGRldGVybWluaW5nIHRoZSBuZXcgc2NyZWVuc2l6ZVxyXG5cdFx0Ly8gaXMgcG9zc2libGUgd2hlbiBvcmllbnRhdGlvbmNoYW5nZSBpcyBmaXJlZC4gKGVnLCB1c2UgbWVkaWEgcXVlcmllcyArIGVsZW1lbnQgKyBvcGFjaXR5KVxyXG5cdFx0aWYgKCAkLnN1cHBvcnQub3JpZW50YXRpb24gKSB7XHJcblx0XHRcdC8vIGlmIHRoZSB3aW5kb3cgb3JpZW50YXRpb24gcmVnaXN0ZXJzIGFzIDAgb3IgMTgwIGRlZ3JlZXMgcmVwb3J0XHJcblx0XHRcdC8vIHBvcnRyYWl0LCBvdGhlcndpc2UgbGFuZHNjYXBlXHJcblx0XHRcdGlzUG9ydHJhaXQgPSBwb3J0cmFpdF9tYXBbIHdpbmRvdy5vcmllbnRhdGlvbiBdO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0aXNQb3J0cmFpdCA9IGVsZW0gJiYgZWxlbS5jbGllbnRXaWR0aCAvIGVsZW0uY2xpZW50SGVpZ2h0IDwgMS4xO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiBpc1BvcnRyYWl0ID8gXCJwb3J0cmFpdFwiIDogXCJsYW5kc2NhcGVcIjtcclxuXHR9O1xyXG5cclxuXHQkLmZuWyBldmVudF9uYW1lIF0gPSBmdW5jdGlvbiggZm4gKSB7XHJcblx0XHRyZXR1cm4gZm4gPyB0aGlzLmJpbmQoIGV2ZW50X25hbWUsIGZuICkgOiB0aGlzLnRyaWdnZXIoIGV2ZW50X25hbWUgKTtcclxuXHR9O1xyXG5cclxuXHQvLyBqUXVlcnkgPCAxLjhcclxuXHRpZiAoICQuYXR0ckZuICkge1xyXG5cdFx0JC5hdHRyRm5bIGV2ZW50X25hbWUgXSA9IHRydWU7XHJcblx0fVxyXG5cclxufSggalF1ZXJ5LCB0aGlzICkpO1xyXG5cclxuXHJcblxyXG5cclxuKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7XHJcblxyXG5cdC8vIGV4aXN0aW5nIGJhc2UgdGFnP1xyXG5cdHZhciBiYXNlRWxlbWVudCA9ICQoIFwiaGVhZFwiICkuY2hpbGRyZW4oIFwiYmFzZVwiICksXHJcblxyXG5cdC8vIGJhc2UgZWxlbWVudCBtYW5hZ2VtZW50LCBkZWZpbmVkIGRlcGVuZGluZyBvbiBkeW5hbWljIGJhc2UgdGFnIHN1cHBvcnRcclxuXHQvLyBUT0RPIG1vdmUgdG8gZXh0ZXJuYWwgd2lkZ2V0XHJcblx0YmFzZSA9IHtcclxuXHJcblx0XHQvLyBkZWZpbmUgYmFzZSBlbGVtZW50LCBmb3IgdXNlIGluIHJvdXRpbmcgYXNzZXQgdXJscyB0aGF0IGFyZSByZWZlcmVuY2VkXHJcblx0XHQvLyBpbiBBamF4LXJlcXVlc3RlZCBtYXJrdXBcclxuXHRcdGVsZW1lbnQ6ICggYmFzZUVsZW1lbnQubGVuZ3RoID8gYmFzZUVsZW1lbnQgOlxyXG5cdFx0XHQkKCBcIjxiYXNlPlwiLCB7IGhyZWY6ICQubW9iaWxlLnBhdGguZG9jdW1lbnRCYXNlLmhyZWZOb0hhc2ggfSApLnByZXBlbmRUbyggJCggXCJoZWFkXCIgKSApICksXHJcblxyXG5cdFx0bGlua1NlbGVjdG9yOiBcIltzcmNdLCBsaW5rW2hyZWZdLCBhW3JlbD0nZXh0ZXJuYWwnXSwgOmpxbURhdGEoYWpheD0nZmFsc2UnKSwgYVt0YXJnZXRdXCIsXHJcblxyXG5cdFx0Ly8gc2V0IHRoZSBnZW5lcmF0ZWQgQkFTRSBlbGVtZW50J3MgaHJlZiB0byBhIG5ldyBwYWdlJ3MgYmFzZSBwYXRoXHJcblx0XHRzZXQ6IGZ1bmN0aW9uKCBocmVmICkge1xyXG5cclxuXHRcdFx0Ly8gd2Ugc2hvdWxkIGRvIG5vdGhpbmcgaWYgdGhlIHVzZXIgd2FudHMgdG8gbWFuYWdlIHRoZWlyIHVybCBiYXNlXHJcblx0XHRcdC8vIG1hbnVhbGx5XHJcblx0XHRcdGlmICggISQubW9iaWxlLmR5bmFtaWNCYXNlRW5hYmxlZCApIHtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIHdlIHNob3VsZCB1c2UgdGhlIGJhc2UgdGFnIGlmIHdlIGNhbiBtYW5pcHVsYXRlIGl0IGR5bmFtaWNhbGx5XHJcblx0XHRcdGlmICggJC5zdXBwb3J0LmR5bmFtaWNCYXNlVGFnICkge1xyXG5cdFx0XHRcdGJhc2UuZWxlbWVudC5hdHRyKCBcImhyZWZcIixcclxuXHRcdFx0XHRcdCQubW9iaWxlLnBhdGgubWFrZVVybEFic29sdXRlKCBocmVmLCAkLm1vYmlsZS5wYXRoLmRvY3VtZW50QmFzZSApICk7XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblxyXG5cdFx0cmV3cml0ZTogZnVuY3Rpb24oIGhyZWYsIHBhZ2UgKSB7XHJcblx0XHRcdHZhciBuZXdQYXRoID0gJC5tb2JpbGUucGF0aC5nZXQoIGhyZWYgKTtcclxuXHJcblx0XHRcdHBhZ2UuZmluZCggYmFzZS5saW5rU2VsZWN0b3IgKS5lYWNoKGZ1bmN0aW9uKCBpLCBsaW5rICkge1xyXG5cdFx0XHRcdHZhciB0aGlzQXR0ciA9ICQoIGxpbmsgKS5pcyggXCJbaHJlZl1cIiApID8gXCJocmVmXCIgOlxyXG5cdFx0XHRcdFx0JCggbGluayApLmlzKCBcIltzcmNdXCIgKSA/IFwic3JjXCIgOiBcImFjdGlvblwiLFxyXG5cdFx0XHRcdHRoZUxvY2F0aW9uID0gJC5tb2JpbGUucGF0aC5wYXJzZUxvY2F0aW9uKCksXHJcblx0XHRcdFx0dGhpc1VybCA9ICQoIGxpbmsgKS5hdHRyKCB0aGlzQXR0ciApO1xyXG5cclxuXHRcdFx0XHQvLyBYWFhfamJsYXM6IFdlIG5lZWQgdG8gZml4IHRoaXMgc28gdGhhdCBpdCByZW1vdmVzIHRoZSBkb2N1bWVudFxyXG5cdFx0XHRcdC8vICAgICAgICAgICAgYmFzZSBVUkwsIGFuZCB0aGVuIHByZXBlbmRzIHdpdGggdGhlIG5ldyBwYWdlIFVSTC5cclxuXHRcdFx0XHQvLyBpZiBmdWxsIHBhdGggZXhpc3RzIGFuZCBpcyBzYW1lLCBjaG9wIGl0IC0gaGVscHMgSUUgb3V0XHJcblx0XHRcdFx0dGhpc1VybCA9IHRoaXNVcmwucmVwbGFjZSggdGhlTG9jYXRpb24ucHJvdG9jb2wgKyB0aGVMb2NhdGlvbi5kb3VibGVTbGFzaCArXHJcblx0XHRcdFx0XHR0aGVMb2NhdGlvbi5ob3N0ICsgdGhlTG9jYXRpb24ucGF0aG5hbWUsIFwiXCIgKTtcclxuXHJcblx0XHRcdFx0aWYgKCAhL14oXFx3Kzp8I3xcXC8pLy50ZXN0KCB0aGlzVXJsICkgKSB7XHJcblx0XHRcdFx0XHQkKCBsaW5rICkuYXR0ciggdGhpc0F0dHIsIG5ld1BhdGggKyB0aGlzVXJsICk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHRcdH0sXHJcblxyXG5cdFx0Ly8gc2V0IHRoZSBnZW5lcmF0ZWQgQkFTRSBlbGVtZW50J3MgaHJlZiB0byBhIG5ldyBwYWdlJ3MgYmFzZSBwYXRoXHJcblx0XHRyZXNldDogZnVuY3Rpb24oLyogaHJlZiAqLykge1xyXG5cdFx0XHRiYXNlLmVsZW1lbnQuYXR0ciggXCJocmVmXCIsICQubW9iaWxlLnBhdGguZG9jdW1lbnRCYXNlLmhyZWZOb1NlYXJjaCApO1xyXG5cdFx0fVxyXG5cdH07XHJcblxyXG5cdCQubW9iaWxlLmJhc2UgPSBiYXNlO1xyXG5cclxufSkoIGpRdWVyeSApO1xyXG5cclxuXHJcbihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xyXG4kLm1vYmlsZS53aWRnZXRzID0ge307XHJcblxyXG52YXIgb3JpZ2luYWxXaWRnZXQgPSAkLndpZGdldCxcclxuXHJcblx0Ly8gUmVjb3JkIHRoZSBvcmlnaW5hbCwgbm9uLW1vYmlsZWluaXQtbW9kaWZpZWQgdmVyc2lvbiBvZiAkLm1vYmlsZS5rZWVwTmF0aXZlXHJcblx0Ly8gc28gd2UgY2FuIGxhdGVyIGRldGVybWluZSB3aGV0aGVyIHNvbWVvbmUgaGFzIG1vZGlmaWVkICQubW9iaWxlLmtlZXBOYXRpdmVcclxuXHRrZWVwTmF0aXZlRmFjdG9yeURlZmF1bHQgPSAkLm1vYmlsZS5rZWVwTmF0aXZlO1xyXG5cclxuJC53aWRnZXQgPSAoZnVuY3Rpb24oIG9yaWcgKSB7XHJcblx0cmV0dXJuIGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIGNvbnN0cnVjdG9yID0gb3JpZy5hcHBseSggdGhpcywgYXJndW1lbnRzICksXHJcblx0XHRcdG5hbWUgPSBjb25zdHJ1Y3Rvci5wcm90b3R5cGUud2lkZ2V0TmFtZTtcclxuXHJcblx0XHRjb25zdHJ1Y3Rvci5pbml0U2VsZWN0b3IgPSAoICggY29uc3RydWN0b3IucHJvdG90eXBlLmluaXRTZWxlY3RvciAhPT0gdW5kZWZpbmVkICkgP1xyXG5cdFx0XHRjb25zdHJ1Y3Rvci5wcm90b3R5cGUuaW5pdFNlbGVjdG9yIDogXCI6anFtRGF0YShyb2xlPSdcIiArIG5hbWUgKyBcIicpXCIgKTtcclxuXHJcblx0XHQkLm1vYmlsZS53aWRnZXRzWyBuYW1lIF0gPSBjb25zdHJ1Y3RvcjtcclxuXHJcblx0XHRyZXR1cm4gY29uc3RydWN0b3I7XHJcblx0fTtcclxufSkoICQud2lkZ2V0ICk7XHJcblxyXG4vLyBNYWtlIHN1cmUgJC53aWRnZXQgc3RpbGwgaGFzIGJyaWRnZSBhbmQgZXh0ZW5kIG1ldGhvZHNcclxuJC5leHRlbmQoICQud2lkZ2V0LCBvcmlnaW5hbFdpZGdldCApO1xyXG5cclxuLy8gRm9yIGJhY2tjb21wYXQgcmVtb3ZlIGluIDEuNVxyXG4kLm1vYmlsZS5kb2N1bWVudC5vbiggXCJjcmVhdGVcIiwgZnVuY3Rpb24oIGV2ZW50ICkge1xyXG5cdCQoIGV2ZW50LnRhcmdldCApLmVuaGFuY2VXaXRoaW4oKTtcclxufSk7XHJcblxyXG4kLndpZGdldCggXCJtb2JpbGUucGFnZVwiLCB7XHJcblx0b3B0aW9uczoge1xyXG5cdFx0dGhlbWU6IFwiYVwiLFxyXG5cdFx0ZG9tQ2FjaGU6IGZhbHNlLFxyXG5cclxuXHRcdC8vIERlcHJlY2F0ZWQgaW4gMS40IHJlbW92ZSBpbiAxLjVcclxuXHRcdGtlZXBOYXRpdmVEZWZhdWx0OiAkLm1vYmlsZS5rZWVwTmF0aXZlLFxyXG5cclxuXHRcdC8vIERlcHJlY2F0ZWQgaW4gMS40IHJlbW92ZSBpbiAxLjVcclxuXHRcdGNvbnRlbnRUaGVtZTogbnVsbCxcclxuXHRcdGVuaGFuY2VkOiBmYWxzZVxyXG5cdH0sXHJcblxyXG5cdC8vIERFUFJFQ0FURUQgZm9yID4gMS40XHJcblx0Ly8gVE9ETyByZW1vdmUgYXQgMS41XHJcblx0X2NyZWF0ZVdpZGdldDogZnVuY3Rpb24oKSB7XHJcblx0XHQkLldpZGdldC5wcm90b3R5cGUuX2NyZWF0ZVdpZGdldC5hcHBseSggdGhpcywgYXJndW1lbnRzICk7XHJcblx0XHR0aGlzLl90cmlnZ2VyKCBcImluaXRcIiApO1xyXG5cdH0sXHJcblxyXG5cdF9jcmVhdGU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0Ly8gSWYgZmFsc2UgaXMgcmV0dXJuZWQgYnkgdGhlIGNhbGxiYWNrcyBkbyBub3QgY3JlYXRlIHRoZSBwYWdlXHJcblx0XHRpZiAoIHRoaXMuX3RyaWdnZXIoIFwiYmVmb3JlY3JlYXRlXCIgKSA9PT0gZmFsc2UgKSB7XHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoICF0aGlzLm9wdGlvbnMuZW5oYW5jZWQgKSB7XHJcblx0XHRcdHRoaXMuX2VuaGFuY2UoKTtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLl9vbiggdGhpcy5lbGVtZW50LCB7XHJcblx0XHRcdHBhZ2ViZWZvcmVoaWRlOiBcInJlbW92ZUNvbnRhaW5lckJhY2tncm91bmRcIixcclxuXHRcdFx0cGFnZWJlZm9yZXNob3c6IFwiX2hhbmRsZVBhZ2VCZWZvcmVTaG93XCJcclxuXHRcdH0pO1xyXG5cclxuXHRcdHRoaXMuZWxlbWVudC5lbmhhbmNlV2l0aGluKCk7XHJcblx0XHQvLyBEaWFsb2cgd2lkZ2V0IGlzIGRlcHJlY2F0ZWQgaW4gMS40IHJlbW92ZSB0aGlzIGluIDEuNVxyXG5cdFx0aWYgKCAkLm1vYmlsZS5nZXRBdHRyaWJ1dGUoIHRoaXMuZWxlbWVudFswXSwgXCJyb2xlXCIgKSA9PT0gXCJkaWFsb2dcIiAmJiAkLm1vYmlsZS5kaWFsb2cgKSB7XHJcblx0XHRcdHRoaXMuZWxlbWVudC5kaWFsb2coKTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfZW5oYW5jZTogZnVuY3Rpb24gKCkge1xyXG5cdFx0dmFyIGF0dHJQcmVmaXggPSBcImRhdGEtXCIgKyAkLm1vYmlsZS5ucyxcclxuXHRcdFx0c2VsZiA9IHRoaXM7XHJcblxyXG5cdFx0aWYgKCB0aGlzLm9wdGlvbnMucm9sZSApIHtcclxuXHRcdFx0dGhpcy5lbGVtZW50LmF0dHIoIFwiZGF0YS1cIiArICQubW9iaWxlLm5zICsgXCJyb2xlXCIsIHRoaXMub3B0aW9ucy5yb2xlICk7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5lbGVtZW50XHJcblx0XHRcdC5hdHRyKCBcInRhYmluZGV4XCIsIFwiMFwiIClcclxuXHRcdFx0LmFkZENsYXNzKCBcInVpLXBhZ2UgdWktcGFnZS10aGVtZS1cIiArIHRoaXMub3B0aW9ucy50aGVtZSApO1xyXG5cclxuXHRcdC8vIE1hbmlwdWxhdGlvbiBvZiBjb250ZW50IG9zIERlcHJlY2F0ZWQgYXMgb2YgMS40IHJlbW92ZSBpbiAxLjVcclxuXHRcdHRoaXMuZWxlbWVudC5maW5kKCBcIltcIiArIGF0dHJQcmVmaXggKyBcInJvbGU9J2NvbnRlbnQnXVwiICkuZWFjaCggZnVuY3Rpb24oKSB7XHJcblx0XHRcdHZhciAkdGhpcyA9ICQoIHRoaXMgKSxcclxuXHRcdFx0XHR0aGVtZSA9IHRoaXMuZ2V0QXR0cmlidXRlKCBhdHRyUHJlZml4ICsgXCJ0aGVtZVwiICkgfHwgdW5kZWZpbmVkO1xyXG5cdFx0XHRcdHNlbGYub3B0aW9ucy5jb250ZW50VGhlbWUgPSB0aGVtZSB8fCBzZWxmLm9wdGlvbnMuY29udGVudFRoZW1lIHx8ICggc2VsZi5vcHRpb25zLmRpYWxvZyAmJiBzZWxmLm9wdGlvbnMudGhlbWUgKSB8fCAoIHNlbGYuZWxlbWVudC5qcW1EYXRhKFwicm9sZVwiKSA9PT0gXCJkaWFsb2dcIiAmJiAgc2VsZi5vcHRpb25zLnRoZW1lICk7XHJcblx0XHRcdFx0JHRoaXMuYWRkQ2xhc3MoIFwidWktY29udGVudFwiICk7XHJcblx0XHRcdFx0aWYgKCBzZWxmLm9wdGlvbnMuY29udGVudFRoZW1lICkge1xyXG5cdFx0XHRcdFx0JHRoaXMuYWRkQ2xhc3MoIFwidWktYm9keS1cIiArICggc2VsZi5vcHRpb25zLmNvbnRlbnRUaGVtZSApICk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdC8vIEFkZCBBUklBIHJvbGVcclxuXHRcdFx0XHQkdGhpcy5hdHRyKCBcInJvbGVcIiwgXCJtYWluXCIgKS5hZGRDbGFzcyggXCJ1aS1jb250ZW50XCIgKTtcclxuXHRcdH0pO1xyXG5cdH0sXHJcblxyXG5cdGJpbmRSZW1vdmU6IGZ1bmN0aW9uKCBjYWxsYmFjayApIHtcclxuXHRcdHZhciBwYWdlID0gdGhpcy5lbGVtZW50O1xyXG5cclxuXHRcdC8vIHdoZW4gZG9tIGNhY2hpbmcgaXMgbm90IGVuYWJsZWQgb3IgdGhlIHBhZ2UgaXMgZW1iZWRkZWQgYmluZCB0byByZW1vdmUgdGhlIHBhZ2Ugb24gaGlkZVxyXG5cdFx0aWYgKCAhcGFnZS5kYXRhKCBcIm1vYmlsZS1wYWdlXCIgKS5vcHRpb25zLmRvbUNhY2hlICYmXHJcblx0XHRcdHBhZ2UuaXMoIFwiOmpxbURhdGEoZXh0ZXJuYWwtcGFnZT0ndHJ1ZScpXCIgKSApIHtcclxuXHJcblx0XHRcdC8vIFRPRE8gdXNlIF9vbiAtIHRoYXQgaXMsIHNvcnQgb3V0IHdoeSBpdCBkb2Vzbid0IHdvcmsgaW4gdGhpcyBjYXNlXHJcblx0XHRcdHBhZ2UuYmluZCggXCJwYWdlaGlkZS5yZW1vdmVcIiwgY2FsbGJhY2sgfHwgZnVuY3Rpb24oIGUsIGRhdGEgKSB7XHJcblxyXG5cdFx0XHRcdC8vY2hlY2sgaWYgdGhpcyBpcyBhIHNhbWUgcGFnZSB0cmFuc2l0aW9uIGFuZCBpZiBzbyBkb24ndCByZW1vdmUgdGhlIHBhZ2VcclxuXHRcdFx0XHRpZiggIWRhdGEuc2FtZVBhZ2UgKXtcclxuXHRcdFx0XHRcdHZhciAkdGhpcyA9ICQoIHRoaXMgKSxcclxuXHRcdFx0XHRcdFx0cHJFdmVudCA9IG5ldyAkLkV2ZW50KCBcInBhZ2VyZW1vdmVcIiApO1xyXG5cclxuXHRcdFx0XHRcdCR0aGlzLnRyaWdnZXIoIHByRXZlbnQgKTtcclxuXHJcblx0XHRcdFx0XHRpZiAoICFwckV2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpICkge1xyXG5cdFx0XHRcdFx0XHQkdGhpcy5yZW1vdmVXaXRoRGVwZW5kZW50cygpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X3NldE9wdGlvbnM6IGZ1bmN0aW9uKCBvICkge1xyXG5cdFx0aWYgKCBvLnRoZW1lICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdHRoaXMuZWxlbWVudC5yZW1vdmVDbGFzcyggXCJ1aS1wYWdlLXRoZW1lLVwiICsgdGhpcy5vcHRpb25zLnRoZW1lICkuYWRkQ2xhc3MoIFwidWktcGFnZS10aGVtZS1cIiArIG8udGhlbWUgKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIG8uY29udGVudFRoZW1lICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdHRoaXMuZWxlbWVudC5maW5kKCBcIltkYXRhLVwiICsgJC5tb2JpbGUubnMgKyBcIj0nY29udGVudCddXCIgKS5yZW1vdmVDbGFzcyggXCJ1aS1ib2R5LVwiICsgdGhpcy5vcHRpb25zLmNvbnRlbnRUaGVtZSApXHJcblx0XHRcdFx0LmFkZENsYXNzKCBcInVpLWJvZHktXCIgKyBvLmNvbnRlbnRUaGVtZSApO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9oYW5kbGVQYWdlQmVmb3JlU2hvdzogZnVuY3Rpb24oLyogZSAqLykge1xyXG5cdFx0dGhpcy5zZXRDb250YWluZXJCYWNrZ3JvdW5kKCk7XHJcblx0fSxcclxuXHQvLyBEZXByZWNhdGVkIGluIDEuNCByZW1vdmUgaW4gMS41XHJcblx0cmVtb3ZlQ29udGFpbmVyQmFja2dyb3VuZDogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLmVsZW1lbnQuY2xvc2VzdCggXCI6bW9iaWxlLXBhZ2Vjb250YWluZXJcIiApLnBhZ2Vjb250YWluZXIoeyBcInRoZW1lXCI6IFwibm9uZVwiIH0pO1xyXG5cdH0sXHJcblx0Ly8gRGVwcmVjYXRlZCBpbiAxLjQgcmVtb3ZlIGluIDEuNVxyXG5cdC8vIHNldCB0aGUgcGFnZSBjb250YWluZXIgYmFja2dyb3VuZCB0byB0aGUgcGFnZSB0aGVtZVxyXG5cdHNldENvbnRhaW5lckJhY2tncm91bmQ6IGZ1bmN0aW9uKCB0aGVtZSApIHtcclxuXHRcdHRoaXMuZWxlbWVudC5wYXJlbnQoKS5wYWdlY29udGFpbmVyKCB7IFwidGhlbWVcIjogdGhlbWUgfHwgdGhpcy5vcHRpb25zLnRoZW1lIH0gKTtcclxuXHR9LFxyXG5cdC8vIERlcHJlY2F0ZWQgaW4gMS40IHJlbW92ZSBpbiAxLjVcclxuXHRrZWVwTmF0aXZlU2VsZWN0b3I6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIG9wdGlvbnMgPSB0aGlzLm9wdGlvbnMsXHJcblx0XHRcdGtlZXBOYXRpdmUgPSAkLnRyaW0oIG9wdGlvbnMua2VlcE5hdGl2ZSB8fCBcIlwiICksXHJcblx0XHRcdGdsb2JhbFZhbHVlID0gJC50cmltKCAkLm1vYmlsZS5rZWVwTmF0aXZlICksXHJcblx0XHRcdG9wdGlvblZhbHVlID0gJC50cmltKCBvcHRpb25zLmtlZXBOYXRpdmVEZWZhdWx0ICksXHJcblxyXG5cdFx0XHQvLyBDaGVjayBpZiAkLm1vYmlsZS5rZWVwTmF0aXZlIGhhcyBjaGFuZ2VkIGZyb20gdGhlIGZhY3RvcnkgZGVmYXVsdFxyXG5cdFx0XHRuZXdEZWZhdWx0ID0gKCBrZWVwTmF0aXZlRmFjdG9yeURlZmF1bHQgPT09IGdsb2JhbFZhbHVlID9cclxuXHRcdFx0XHRcIlwiIDogZ2xvYmFsVmFsdWUgKSxcclxuXHJcblx0XHRcdC8vIElmICQubW9iaWxlLmtlZXBOYXRpdmUgaGFzIG5vdCBjaGFuZ2VkLCB1c2Ugb3B0aW9ucy5rZWVwTmF0aXZlRGVmYXVsdFxyXG5cdFx0XHRvbGREZWZhdWx0ID0gKCBuZXdEZWZhdWx0ID09PSBcIlwiID8gb3B0aW9uVmFsdWUgOiBcIlwiICk7XHJcblxyXG5cdFx0Ly8gQ29uY2F0ZW5hdGUga2VlcE5hdGl2ZSBzZWxlY3RvcnMgZnJvbSBhbGwgc291cmNlcyB3aGVyZSB0aGUgdmFsdWUgaGFzXHJcblx0XHQvLyBjaGFuZ2VkIG9yLCBpZiBub3RoaW5nIGhhcyBjaGFuZ2VkLCByZXR1cm4gdGhlIGRlZmF1bHRcclxuXHRcdHJldHVybiAoICgga2VlcE5hdGl2ZSA/IFsga2VlcE5hdGl2ZSBdIDogW10gKVxyXG5cdFx0XHQuY29uY2F0KCBuZXdEZWZhdWx0ID8gWyBuZXdEZWZhdWx0IF0gOiBbXSApXHJcblx0XHRcdC5jb25jYXQoIG9sZERlZmF1bHQgPyBbIG9sZERlZmF1bHQgXSA6IFtdIClcclxuXHRcdFx0LmpvaW4oIFwiLCBcIiApICk7XHJcblx0fVxyXG59KTtcclxufSkoIGpRdWVyeSApO1xyXG5cclxuKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7XHJcblxyXG5cdCQud2lkZ2V0KCBcIm1vYmlsZS5wYWdlY29udGFpbmVyXCIsIHtcclxuXHRcdG9wdGlvbnM6IHtcclxuXHRcdFx0dGhlbWU6IFwiYVwiXHJcblx0XHR9LFxyXG5cclxuXHRcdGluaXRTZWxlY3RvcjogZmFsc2UsXHJcblxyXG5cdFx0X2NyZWF0ZTogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHRoaXMuX3RyaWdnZXIoIFwiYmVmb3JlY3JlYXRlXCIgKTtcclxuXHRcdFx0dGhpcy5zZXRMYXN0U2Nyb2xsRW5hYmxlZCA9IHRydWU7XHJcblxyXG5cdFx0XHR0aGlzLl9vbiggdGhpcy53aW5kb3csIHtcclxuXHRcdFx0XHQvLyBkaXNhYmxlIGFuIHNjcm9sbCBzZXR0aW5nIHdoZW4gYSBoYXNoY2hhbmdlIGhhcyBiZWVuIGZpcmVkLFxyXG5cdFx0XHRcdC8vIHRoaXMgb25seSB3b3JrcyBiZWNhdXNlIHRoZSByZWNvcmRpbmcgb2YgdGhlIHNjcm9sbCBwb3NpdGlvblxyXG5cdFx0XHRcdC8vIGlzIGRlbGF5ZWQgZm9yIDEwMG1zIGFmdGVyIHRoZSBicm93c2VyIG1pZ2h0IGhhdmUgY2hhbmdlZCB0aGVcclxuXHRcdFx0XHQvLyBwb3NpdGlvbiBiZWNhdXNlIG9mIHRoZSBoYXNoY2hhbmdlXHJcblx0XHRcdFx0bmF2aWdhdGU6IFwiX2Rpc2FibGVSZWNvcmRTY3JvbGxcIixcclxuXHJcblx0XHRcdFx0Ly8gYmluZCB0byBzY3JvbGxzdG9wIGZvciB0aGUgZmlyc3QgcGFnZSwgXCJwYWdlY2hhbmdlXCIgd29uJ3QgYmVcclxuXHRcdFx0XHQvLyBmaXJlZCBpbiB0aGF0IGNhc2VcclxuXHRcdFx0XHRzY3JvbGxzdG9wOiBcIl9kZWxheWVkUmVjb3JkU2Nyb2xsXCJcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHQvLyBUT0RPIGNvbnNpZGVyIG1vdmluZyB0aGUgbmF2aWdhdGlvbiBoYW5kbGVyIE9VVCBvZiB3aWRnZXQgaW50b1xyXG5cdFx0XHQvLyAgICAgIHNvbWUgb3RoZXIgb2JqZWN0IGFzIGdsdWUgYmV0d2VlbiB0aGUgbmF2aWdhdGUgZXZlbnQgYW5kIHRoZVxyXG5cdFx0XHQvLyAgICAgIGNvbnRlbnQgd2lkZ2V0IGxvYWQgYW5kIGNoYW5nZSBtZXRob2RzXHJcblx0XHRcdHRoaXMuX29uKCB0aGlzLndpbmRvdywgeyBuYXZpZ2F0ZTogXCJfZmlsdGVyTmF2aWdhdGVFdmVudHNcIiB9KTtcclxuXHJcblx0XHRcdC8vIFRPRE8gbW92ZSBmcm9tIHBhZ2UqIGV2ZW50cyB0byBjb250ZW50KiBldmVudHNcclxuXHRcdFx0dGhpcy5fb24oeyBwYWdlY2hhbmdlOiBcIl9hZnRlckNvbnRlbnRDaGFuZ2VcIiB9KTtcclxuXHJcblx0XHRcdC8vIGhhbmRsZSBpbml0aWFsIGhhc2hjaGFuZ2UgZnJvbSBjaHJvbWUgOihcclxuXHRcdFx0dGhpcy53aW5kb3cub25lKCBcIm5hdmlnYXRlXCIsICQucHJveHkoZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0dGhpcy5zZXRMYXN0U2Nyb2xsRW5hYmxlZCA9IHRydWU7XHJcblx0XHRcdH0sIHRoaXMpKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0X3NldE9wdGlvbnM6IGZ1bmN0aW9uKCBvcHRpb25zICkge1xyXG5cdFx0XHRpZiAoIG9wdGlvbnMudGhlbWUgIT09IHVuZGVmaW5lZCAmJiBvcHRpb25zLnRoZW1lICE9PSBcIm5vbmVcIiApIHtcclxuXHRcdFx0XHR0aGlzLmVsZW1lbnQucmVtb3ZlQ2xhc3MoIFwidWktb3ZlcmxheS1cIiArIHRoaXMub3B0aW9ucy50aGVtZSApXHJcblx0XHRcdFx0XHQuYWRkQ2xhc3MoIFwidWktb3ZlcmxheS1cIiArIG9wdGlvbnMudGhlbWUgKTtcclxuXHRcdFx0fSBlbHNlIGlmICggb3B0aW9ucy50aGVtZSAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRcdHRoaXMuZWxlbWVudC5yZW1vdmVDbGFzcyggXCJ1aS1vdmVybGF5LVwiICsgdGhpcy5vcHRpb25zLnRoZW1lICk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHRoaXMuX3N1cGVyKCBvcHRpb25zICk7XHJcblx0XHR9LFxyXG5cclxuXHRcdF9kaXNhYmxlUmVjb3JkU2Nyb2xsOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dGhpcy5zZXRMYXN0U2Nyb2xsRW5hYmxlZCA9IGZhbHNlO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfZW5hYmxlUmVjb3JkU2Nyb2xsOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dGhpcy5zZXRMYXN0U2Nyb2xsRW5hYmxlZCA9IHRydWU7XHJcblx0XHR9LFxyXG5cclxuXHRcdC8vIFRPRE8gY29uc2lkZXIgdGhlIG5hbWUgaGVyZSwgc2luY2UgaXQncyBwdXJwb3NlIHNwZWNpZmljXHJcblx0XHRfYWZ0ZXJDb250ZW50Q2hhbmdlOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0Ly8gb25jZSB0aGUgcGFnZSBoYXMgY2hhbmdlZCwgcmUtZW5hYmxlIHRoZSBzY3JvbGwgcmVjb3JkaW5nXHJcblx0XHRcdHRoaXMuc2V0TGFzdFNjcm9sbEVuYWJsZWQgPSB0cnVlO1xyXG5cclxuXHRcdFx0Ly8gcmVtb3ZlIGFueSBiaW5kaW5nIHRoYXQgcHJldmlvdXNseSBleGlzdGVkIG9uIHRoZSBnZXQgc2Nyb2xsXHJcblx0XHRcdC8vIHdoaWNoIG1heSBvciBtYXkgbm90IGJlIGRpZmZlcmVudCB0aGFuIHRoZSBzY3JvbGwgZWxlbWVudFxyXG5cdFx0XHQvLyBkZXRlcm1pbmVkIGZvciB0aGlzIHBhZ2UgcHJldmlvdXNseVxyXG5cdFx0XHR0aGlzLl9vZmYoIHRoaXMud2luZG93LCBcInNjcm9sbHN0b3BcIiApO1xyXG5cclxuXHRcdFx0Ly8gZGV0ZXJtaW5lIGFuZCBiaW5kIHRvIHRoZSBjdXJyZW50IHNjb2xsIGVsZW1lbnQgd2hpY2ggbWF5IGJlIHRoZVxyXG5cdFx0XHQvLyB3aW5kb3cgb3IgaW4gdGhlIGNhc2Ugb2YgdG91Y2ggb3ZlcmZsb3cgdGhlIGVsZW1lbnQgdG91Y2ggb3ZlcmZsb3dcclxuXHRcdFx0dGhpcy5fb24oIHRoaXMud2luZG93LCB7IHNjcm9sbHN0b3A6IFwiX2RlbGF5ZWRSZWNvcmRTY3JvbGxcIiB9KTtcclxuXHRcdH0sXHJcblxyXG5cdFx0X3JlY29yZFNjcm9sbDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdC8vIHRoaXMgYmFycmllciBwcmV2ZW50cyBzZXR0aW5nIHRoZSBzY3JvbGwgdmFsdWUgYmFzZWQgb25cclxuXHRcdFx0Ly8gdGhlIGJyb3dzZXIgc2Nyb2xsaW5nIHRoZSB3aW5kb3cgYmFzZWQgb24gYSBoYXNoY2hhbmdlXHJcblx0XHRcdGlmICggIXRoaXMuc2V0TGFzdFNjcm9sbEVuYWJsZWQgKSB7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHR2YXIgYWN0aXZlID0gdGhpcy5fZ2V0QWN0aXZlSGlzdG9yeSgpLFxyXG5cdFx0XHRcdGN1cnJlbnRTY3JvbGwsIG1pblNjcm9sbCwgZGVmYXVsdFNjcm9sbDtcclxuXHJcblx0XHRcdGlmICggYWN0aXZlICkge1xyXG5cdFx0XHRcdGN1cnJlbnRTY3JvbGwgPSB0aGlzLl9nZXRTY3JvbGwoKTtcclxuXHRcdFx0XHRtaW5TY3JvbGwgPSB0aGlzLl9nZXRNaW5TY3JvbGwoKTtcclxuXHRcdFx0XHRkZWZhdWx0U2Nyb2xsID0gdGhpcy5fZ2V0RGVmYXVsdFNjcm9sbCgpO1xyXG5cclxuXHRcdFx0XHQvLyBTZXQgYWN0aXZlIHBhZ2UncyBsYXN0U2Nyb2xsIHByb3AuIElmIHRoZSBsb2NhdGlvbiB3ZSdyZVxyXG5cdFx0XHRcdC8vIHNjcm9sbGluZyB0byBpcyBsZXNzIHRoYW4gbWluU2Nyb2xsQmFjaywgbGV0IGl0IGdvLlxyXG5cdFx0XHRcdGFjdGl2ZS5sYXN0U2Nyb2xsID0gY3VycmVudFNjcm9sbCA8IG1pblNjcm9sbCA/IGRlZmF1bHRTY3JvbGwgOiBjdXJyZW50U2Nyb2xsO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cclxuXHRcdF9kZWxheWVkUmVjb3JkU2Nyb2xsOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0c2V0VGltZW91dCggJC5wcm94eSh0aGlzLCBcIl9yZWNvcmRTY3JvbGxcIiksIDEwMCApO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfZ2V0U2Nyb2xsOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0cmV0dXJuIHRoaXMud2luZG93LnNjcm9sbFRvcCgpO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfZ2V0TWluU2Nyb2xsOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0cmV0dXJuICQubW9iaWxlLm1pblNjcm9sbEJhY2s7XHJcblx0XHR9LFxyXG5cclxuXHRcdF9nZXREZWZhdWx0U2Nyb2xsOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0cmV0dXJuICQubW9iaWxlLmRlZmF1bHRIb21lU2Nyb2xsO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfZmlsdGVyTmF2aWdhdGVFdmVudHM6IGZ1bmN0aW9uKCBlLCBkYXRhICkge1xyXG5cdFx0XHR2YXIgdXJsO1xyXG5cclxuXHRcdFx0aWYgKCBlLm9yaWdpbmFsRXZlbnQgJiYgZS5vcmlnaW5hbEV2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpICkge1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0dXJsID0gZS5vcmlnaW5hbEV2ZW50LnR5cGUuaW5kZXhPZiggXCJoYXNoY2hhbmdlXCIgKSA+IC0xID8gZGF0YS5zdGF0ZS5oYXNoIDogZGF0YS5zdGF0ZS51cmw7XHJcblxyXG5cdFx0XHRpZiAoICF1cmwgKSB7XHJcblx0XHRcdFx0dXJsID0gdGhpcy5fZ2V0SGFzaCgpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpZiAoICF1cmwgfHwgdXJsID09PSBcIiNcIiB8fCB1cmwuaW5kZXhPZiggXCIjXCIgKyAkLm1vYmlsZS5wYXRoLnVpU3RhdGVLZXkgKSA9PT0gMCApIHtcclxuXHRcdFx0XHR1cmwgPSBsb2NhdGlvbi5ocmVmO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHR0aGlzLl9oYW5kbGVOYXZpZ2F0ZSggdXJsLCBkYXRhLnN0YXRlICk7XHJcblx0XHR9LFxyXG5cclxuXHRcdF9nZXRIYXNoOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0cmV0dXJuICQubW9iaWxlLnBhdGgucGFyc2VMb2NhdGlvbigpLmhhc2g7XHJcblx0XHR9LFxyXG5cclxuXHRcdC8vIFRPRE8gYWN0aXZlIHBhZ2Ugc2hvdWxkIGJlIG1hbmFnZWQgYnkgdGhlIGNvbnRhaW5lciAoaWUsIGl0IHNob3VsZCBiZSBhIHByb3BlcnR5KVxyXG5cdFx0Z2V0QWN0aXZlUGFnZTogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHJldHVybiB0aGlzLmFjdGl2ZVBhZ2U7XHJcblx0XHR9LFxyXG5cclxuXHRcdC8vIFRPRE8gdGhlIGZpcnN0IHBhZ2Ugc2hvdWxkIGJlIGEgcHJvcGVydHkgc2V0IGR1cmluZyBfY3JlYXRlIHVzaW5nIHRoZSBsb2dpY1xyXG5cdFx0Ly8gICAgICB0aGF0IGN1cnJlbnRseSByZXNpZGVzIGluIGluaXRcclxuXHRcdF9nZXRJbml0aWFsQ29udGVudDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHJldHVybiAkLm1vYmlsZS5maXJzdFBhZ2U7XHJcblx0XHR9LFxyXG5cclxuXHRcdC8vIFRPRE8gZWFjaCBjb250ZW50IGNvbnRhaW5lciBzaG91bGQgaGF2ZSBhIGhpc3Rvcnkgb2JqZWN0XHJcblx0XHRfZ2V0SGlzdG9yeTogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHJldHVybiAkLm1vYmlsZS5uYXZpZ2F0ZS5oaXN0b3J5O1xyXG5cdFx0fSxcclxuXHJcblx0XHRfZ2V0QWN0aXZlSGlzdG9yeTogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHJldHVybiB0aGlzLl9nZXRIaXN0b3J5KCkuZ2V0QWN0aXZlKCk7XHJcblx0XHR9LFxyXG5cclxuXHRcdC8vIFRPRE8gdGhlIGRvY3VtZW50IGJhc2Ugc2hvdWxkIGJlIGRldGVybWluZWQgYXQgY3JlYXRpb25cclxuXHRcdF9nZXREb2N1bWVudEJhc2U6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRyZXR1cm4gJC5tb2JpbGUucGF0aC5kb2N1bWVudEJhc2U7XHJcblx0XHR9LFxyXG5cclxuXHRcdGJhY2s6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR0aGlzLmdvKCAtMSApO1xyXG5cdFx0fSxcclxuXHJcblx0XHRmb3J3YXJkOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dGhpcy5nbyggMSApO1xyXG5cdFx0fSxcclxuXHJcblx0XHRnbzogZnVuY3Rpb24oIHN0ZXBzICkge1xyXG5cclxuXHRcdFx0Ly9pZiBoYXNobGlzdGVuaW5nIGlzIGVuYWJsZWQgdXNlIG5hdGl2ZSBoaXN0b3J5IG1ldGhvZFxyXG5cdFx0XHRpZiAoICQubW9iaWxlLmhhc2hMaXN0ZW5pbmdFbmFibGVkICkge1xyXG5cdFx0XHRcdHdpbmRvdy5oaXN0b3J5LmdvKCBzdGVwcyApO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cclxuXHRcdFx0XHQvL3dlIGFyZSBub3QgbGlzdGVuaW5nIHRvIHRoZSBoYXNoIHNvIGhhbmRsZSBoaXN0b3J5IGludGVybmFsbHlcclxuXHRcdFx0XHR2YXIgYWN0aXZlSW5kZXggPSAkLm1vYmlsZS5uYXZpZ2F0ZS5oaXN0b3J5LmFjdGl2ZUluZGV4LFxyXG5cdFx0XHRcdFx0aW5kZXggPSBhY3RpdmVJbmRleCArIHBhcnNlSW50KCBzdGVwcywgMTAgKSxcclxuXHRcdFx0XHRcdHVybCA9ICQubW9iaWxlLm5hdmlnYXRlLmhpc3Rvcnkuc3RhY2tbIGluZGV4IF0udXJsLFxyXG5cdFx0XHRcdFx0ZGlyZWN0aW9uID0gKCBzdGVwcyA+PSAxICk/IFwiZm9yd2FyZFwiIDogXCJiYWNrXCI7XHJcblxyXG5cdFx0XHRcdC8vdXBkYXRlIHRoZSBoaXN0b3J5IG9iamVjdFxyXG5cdFx0XHRcdCQubW9iaWxlLm5hdmlnYXRlLmhpc3RvcnkuYWN0aXZlSW5kZXggPSBpbmRleDtcclxuXHRcdFx0XHQkLm1vYmlsZS5uYXZpZ2F0ZS5oaXN0b3J5LnByZXZpb3VzSW5kZXggPSBhY3RpdmVJbmRleDtcclxuXHJcblx0XHRcdFx0Ly9jaGFuZ2UgdG8gdGhlIG5ldyBwYWdlXHJcblx0XHRcdFx0dGhpcy5jaGFuZ2UoIHVybCwgeyBkaXJlY3Rpb246IGRpcmVjdGlvbiwgY2hhbmdlSGFzaDogZmFsc2UsIGZyb21IYXNoQ2hhbmdlOiB0cnVlIH0gKTtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHJcblx0XHQvLyBUT0RPIHJlbmFtZSBfaGFuZGxlRGVzdGluYXRpb25cclxuXHRcdF9oYW5kbGVEZXN0aW5hdGlvbjogZnVuY3Rpb24oIHRvICkge1xyXG5cdFx0XHR2YXIgaGlzdG9yeTtcclxuXHJcblx0XHRcdC8vIGNsZWFuIHRoZSBoYXNoIGZvciBjb21wYXJpc29uIGlmIGl0J3MgYSB1cmxcclxuXHRcdFx0aWYgKCAkLnR5cGUodG8pID09PSBcInN0cmluZ1wiICkge1xyXG5cdFx0XHRcdHRvID0gJC5tb2JpbGUucGF0aC5zdHJpcEhhc2goIHRvICk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmICggdG8gKSB7XHJcblx0XHRcdFx0aGlzdG9yeSA9IHRoaXMuX2dldEhpc3RvcnkoKTtcclxuXHJcblx0XHRcdFx0Ly8gQXQgdGhpcyBwb2ludCwgJ3RvJyBjYW4gYmUgb25lIG9mIDMgdGhpbmdzLCBhIGNhY2hlZCBwYWdlXHJcblx0XHRcdFx0Ly8gZWxlbWVudCBmcm9tIGEgaGlzdG9yeSBzdGFjayBlbnRyeSwgYW4gaWQsIG9yIHNpdGUtcmVsYXRpdmUgL1xyXG5cdFx0XHRcdC8vIGFic29sdXRlIFVSTC4gSWYgJ3RvJyBpcyBhbiBpZCwgd2UgbmVlZCB0byByZXNvbHZlIGl0IGFnYWluc3RcclxuXHRcdFx0XHQvLyB0aGUgZG9jdW1lbnRCYXNlLCBub3QgdGhlIGxvY2F0aW9uLmhyZWYsIHNpbmNlIHRoZSBoYXNoY2hhbmdlXHJcblx0XHRcdFx0Ly8gY291bGQndmUgYmVlbiB0aGUgcmVzdWx0IG9mIGEgZm9yd2FyZC9iYWNrd2FyZCBuYXZpZ2F0aW9uXHJcblx0XHRcdFx0Ly8gdGhhdCBjcm9zc2VzIGZyb20gYW4gZXh0ZXJuYWwgcGFnZS9kaWFsb2cgdG8gYW4gaW50ZXJuYWxcclxuXHRcdFx0XHQvLyBwYWdlL2RpYWxvZy5cclxuXHRcdFx0XHQvL1xyXG5cdFx0XHRcdC8vIFRPRE8gbW92ZSBjaGVjayB0byBoaXN0b3J5IG9iamVjdCBvciBwYXRoIG9iamVjdD9cclxuXHRcdFx0XHR0byA9ICEkLm1vYmlsZS5wYXRoLmlzUGF0aCggdG8gKSA/ICggJC5tb2JpbGUucGF0aC5tYWtlVXJsQWJzb2x1dGUoIFwiI1wiICsgdG8sIHRoaXMuX2dldERvY3VtZW50QmFzZSgpICkgKSA6IHRvO1xyXG5cdFx0XHR9XHJcblx0XHRcdHJldHVybiB0byB8fCB0aGlzLl9nZXRJbml0aWFsQ29udGVudCgpO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfdHJhbnNpdGlvbkZyb21IaXN0b3J5OiBmdW5jdGlvbiggZGlyZWN0aW9uLCBkZWZhdWx0VHJhbnNpdGlvbiApIHtcclxuXHRcdFx0dmFyIGhpc3RvcnkgPSB0aGlzLl9nZXRIaXN0b3J5KCksXHJcblx0XHRcdFx0ZW50cnkgPSAoIGRpcmVjdGlvbiA9PT0gXCJiYWNrXCIgPyBoaXN0b3J5LmdldExhc3QoKSA6IGhpc3RvcnkuZ2V0QWN0aXZlKCkgKTtcclxuXHJcblx0XHRcdHJldHVybiAoIGVudHJ5ICYmIGVudHJ5LnRyYW5zaXRpb24gKSB8fCBkZWZhdWx0VHJhbnNpdGlvbjtcclxuXHRcdH0sXHJcblxyXG5cdFx0X2hhbmRsZURpYWxvZzogZnVuY3Rpb24oIGNoYW5nZVBhZ2VPcHRpb25zLCBkYXRhICkge1xyXG5cdFx0XHR2YXIgdG8sIGFjdGl2ZSwgYWN0aXZlQ29udGVudCA9IHRoaXMuZ2V0QWN0aXZlUGFnZSgpO1xyXG5cclxuXHRcdFx0Ly8gSWYgY3VycmVudCBhY3RpdmUgcGFnZSBpcyBub3QgYSBkaWFsb2cgc2tpcCB0aGUgZGlhbG9nIGFuZCBjb250aW51ZVxyXG5cdFx0XHQvLyBpbiB0aGUgc2FtZSBkaXJlY3Rpb25cclxuXHRcdFx0Ly8gTm90ZTogVGhlIGRpYWxvZyB3aWRnZXQgaXMgZGVwcmVjYXRlZCBhcyBvZiAxLjQuMCBhbmQgd2lsbCBiZSByZW1vdmVkIGluIDEuNS4wLlxyXG5cdFx0XHQvLyBUaHVzLCBhcyBvZiAxLjUuMCBhY3RpdmVDb250ZW50LmRhdGEoIFwibW9iaWxlLWRpYWxvZ1wiICkgd2lsbCBhbHdheXMgZXZhbHVhdGUgdG9cclxuXHRcdFx0Ly8gZmFsc3ksIHNvIHRoZSBzZWNvbmQgY29uZGl0aW9uIGluIHRoZSBpZi1zdGF0ZW1lbnQgYmVsb3cgY2FuIGJlIHJlbW92ZWQgYWx0b2dldGhlci5cclxuXHRcdFx0aWYgKCBhY3RpdmVDb250ZW50ICYmICFhY3RpdmVDb250ZW50LmRhdGEoIFwibW9iaWxlLWRpYWxvZ1wiICkgKSB7XHJcblx0XHRcdFx0Ly8gZGV0ZXJtaW5lIGlmIHdlJ3JlIGhlYWRpbmcgZm9yd2FyZCBvciBiYWNrd2FyZCBhbmQgY29udGludWVcclxuXHRcdFx0XHQvLyBhY2NvcmRpbmdseSBwYXN0IHRoZSBjdXJyZW50IGRpYWxvZ1xyXG5cdFx0XHRcdGlmICggZGF0YS5kaXJlY3Rpb24gPT09IFwiYmFja1wiICkge1xyXG5cdFx0XHRcdFx0dGhpcy5iYWNrKCk7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdHRoaXMuZm9yd2FyZCgpO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Ly8gcHJldmVudCBjaGFuZ2VQYWdlIGNhbGxcclxuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0Ly8gaWYgdGhlIGN1cnJlbnQgYWN0aXZlIHBhZ2UgaXMgYSBkaWFsb2cgYW5kIHdlJ3JlIG5hdmlnYXRpbmdcclxuXHRcdFx0XHQvLyB0byBhIGRpYWxvZyB1c2UgdGhlIGRpYWxvZyBvYmplY3RlZCBzYXZlZCBpbiB0aGUgc3RhY2tcclxuXHRcdFx0XHR0byA9IGRhdGEucGFnZVVybDtcclxuXHRcdFx0XHRhY3RpdmUgPSB0aGlzLl9nZXRBY3RpdmVIaXN0b3J5KCk7XHJcblxyXG5cdFx0XHRcdC8vIG1ha2Ugc3VyZSB0byBzZXQgdGhlIHJvbGUsIHRyYW5zaXRpb24gYW5kIHJldmVyc2FsXHJcblx0XHRcdFx0Ly8gYXMgbW9zdCBvZiB0aGlzIGlzIGxvc3QgYnkgdGhlIGRvbUNhY2hlIGNsZWFuaW5nXHJcblx0XHRcdFx0JC5leHRlbmQoIGNoYW5nZVBhZ2VPcHRpb25zLCB7XHJcblx0XHRcdFx0XHRyb2xlOiBhY3RpdmUucm9sZSxcclxuXHRcdFx0XHRcdHRyYW5zaXRpb246IHRoaXMuX3RyYW5zaXRpb25Gcm9tSGlzdG9yeShcclxuXHRcdFx0XHRcdFx0ZGF0YS5kaXJlY3Rpb24sXHJcblx0XHRcdFx0XHRcdGNoYW5nZVBhZ2VPcHRpb25zLnRyYW5zaXRpb24gKSxcclxuXHRcdFx0XHRcdHJldmVyc2U6IGRhdGEuZGlyZWN0aW9uID09PSBcImJhY2tcIlxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRyZXR1cm4gdG87XHJcblx0XHR9LFxyXG5cclxuXHRcdF9oYW5kbGVOYXZpZ2F0ZTogZnVuY3Rpb24oIHVybCwgZGF0YSApIHtcclxuXHRcdFx0Ly9maW5kIGZpcnN0IHBhZ2UgdmlhIGhhc2hcclxuXHRcdFx0Ly8gVE9ETyBzdHJpcHBpbmcgdGhlIGhhc2ggdHdpY2Ugd2l0aCBoYW5kbGVVcmxcclxuXHRcdFx0dmFyIHRvID0gJC5tb2JpbGUucGF0aC5zdHJpcEhhc2goIHVybCApLCBoaXN0b3J5ID0gdGhpcy5fZ2V0SGlzdG9yeSgpLFxyXG5cclxuXHRcdFx0XHQvLyB0cmFuc2l0aW9uIGlzIGZhbHNlIGlmIGl0J3MgdGhlIGZpcnN0IHBhZ2UsIHVuZGVmaW5lZFxyXG5cdFx0XHRcdC8vIG90aGVyd2lzZSAoYW5kIG1heSBiZSBvdmVycmlkZGVuIGJ5IGRlZmF1bHQpXHJcblx0XHRcdFx0dHJhbnNpdGlvbiA9IGhpc3Rvcnkuc3RhY2subGVuZ3RoID09PSAwID8gXCJub25lXCIgOlxyXG5cdFx0XHRcdFx0dGhpcy5fdHJhbnNpdGlvbkZyb21IaXN0b3J5KCBkYXRhLmRpcmVjdGlvbiApLFxyXG5cclxuXHRcdFx0XHQvLyBkZWZhdWx0IG9wdGlvbnMgZm9yIHRoZSBjaGFuZ1BhZ2UgY2FsbHMgbWFkZSBhZnRlciBleGFtaW5pbmdcclxuXHRcdFx0XHQvLyB0aGUgY3VycmVudCBzdGF0ZSBvZiB0aGUgcGFnZSBhbmQgdGhlIGhhc2gsIE5PVEUgdGhhdCB0aGVcclxuXHRcdFx0XHQvLyB0cmFuc2l0aW9uIGlzIGRlcml2ZWQgZnJvbSB0aGUgcHJldmlvdXMgaGlzdG9yeSBlbnRyeVxyXG5cdFx0XHRcdGNoYW5nZVBhZ2VPcHRpb25zID0ge1xyXG5cdFx0XHRcdFx0Y2hhbmdlSGFzaDogZmFsc2UsXHJcblx0XHRcdFx0XHRmcm9tSGFzaENoYW5nZTogdHJ1ZSxcclxuXHRcdFx0XHRcdHJldmVyc2U6IGRhdGEuZGlyZWN0aW9uID09PSBcImJhY2tcIlxyXG5cdFx0XHRcdH07XHJcblxyXG5cdFx0XHQkLmV4dGVuZCggY2hhbmdlUGFnZU9wdGlvbnMsIGRhdGEsIHtcclxuXHRcdFx0XHR0cmFuc2l0aW9uOiB0cmFuc2l0aW9uXHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0Ly8gVE9ETyBtb3ZlIHRvIF9oYW5kbGVEZXN0aW5hdGlvbiA/XHJcblx0XHRcdC8vIElmIHRoaXMgaXNuJ3QgdGhlIGZpcnN0IHBhZ2UsIGlmIHRoZSBjdXJyZW50IHVybCBpcyBhIGRpYWxvZyBoYXNoXHJcblx0XHRcdC8vIGtleSwgYW5kIHRoZSBpbml0aWFsIGRlc3RpbmF0aW9uIGlzbid0IGVxdWFsIHRvIHRoZSBjdXJyZW50IHRhcmdldFxyXG5cdFx0XHQvLyBwYWdlLCB1c2UgdGhlIHNwZWNpYWwgZGlhbG9nIGhhbmRsaW5nXHJcblx0XHRcdGlmICggaGlzdG9yeS5hY3RpdmVJbmRleCA+IDAgJiZcclxuXHRcdFx0XHR0by5pbmRleE9mKCAkLm1vYmlsZS5kaWFsb2dIYXNoS2V5ICkgPiAtMSApIHtcclxuXHJcblx0XHRcdFx0dG8gPSB0aGlzLl9oYW5kbGVEaWFsb2coIGNoYW5nZVBhZ2VPcHRpb25zLCBkYXRhICk7XHJcblxyXG5cdFx0XHRcdGlmICggdG8gPT09IGZhbHNlICkge1xyXG5cdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0dGhpcy5fY2hhbmdlQ29udGVudCggdGhpcy5faGFuZGxlRGVzdGluYXRpb24oIHRvICksIGNoYW5nZVBhZ2VPcHRpb25zICk7XHJcblx0XHR9LFxyXG5cclxuXHRcdF9jaGFuZ2VDb250ZW50OiBmdW5jdGlvbiggdG8sIG9wdHMgKSB7XHJcblx0XHRcdCQubW9iaWxlLmNoYW5nZVBhZ2UoIHRvLCBvcHRzICk7XHJcblx0XHR9LFxyXG5cclxuXHRcdF9nZXRCYXNlOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0cmV0dXJuICQubW9iaWxlLmJhc2U7XHJcblx0XHR9LFxyXG5cclxuXHRcdF9nZXROczogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHJldHVybiAkLm1vYmlsZS5ucztcclxuXHRcdH0sXHJcblxyXG5cdFx0X2VuaGFuY2U6IGZ1bmN0aW9uKCBjb250ZW50LCByb2xlICkge1xyXG5cdFx0XHQvLyBUT0RPIGNvbnNpZGVyIHN1cHBvcnRpbmcgYSBjdXN0b20gY2FsbGJhY2ssIGFuZCBwYXNzaW5nIGluXHJcblx0XHRcdC8vIHRoZSBzZXR0aW5ncyB3aGljaCBpbmNsdWRlcyB0aGUgcm9sZVxyXG5cdFx0XHRyZXR1cm4gY29udGVudC5wYWdlKHsgcm9sZTogcm9sZSB9KTtcclxuXHRcdH0sXHJcblxyXG5cdFx0X2luY2x1ZGU6IGZ1bmN0aW9uKCBwYWdlLCBzZXR0aW5ncyApIHtcclxuXHRcdFx0Ly8gYXBwZW5kIHRvIHBhZ2UgYW5kIGVuaGFuY2VcclxuXHRcdFx0cGFnZS5hcHBlbmRUbyggdGhpcy5lbGVtZW50ICk7XHJcblxyXG5cdFx0XHQvLyB1c2UgdGhlIHBhZ2Ugd2lkZ2V0IHRvIGVuaGFuY2VcclxuXHRcdFx0dGhpcy5fZW5oYW5jZSggcGFnZSwgc2V0dGluZ3Mucm9sZSApO1xyXG5cclxuXHRcdFx0Ly8gcmVtb3ZlIHBhZ2Ugb24gaGlkZVxyXG5cdFx0XHRwYWdlLnBhZ2UoIFwiYmluZFJlbW92ZVwiICk7XHJcblx0XHR9LFxyXG5cclxuXHRcdF9maW5kOiBmdW5jdGlvbiggYWJzVXJsICkge1xyXG5cdFx0XHQvLyBUT0RPIGNvbnNpZGVyIHN1cHBvcnRpbmcgYSBjdXN0b20gY2FsbGJhY2tcclxuXHRcdFx0dmFyIGZpbGVVcmwgPSB0aGlzLl9jcmVhdGVGaWxlVXJsKCBhYnNVcmwgKSxcclxuXHRcdFx0XHRkYXRhVXJsID0gdGhpcy5fY3JlYXRlRGF0YVVybCggYWJzVXJsICksXHJcblx0XHRcdFx0cGFnZSwgaW5pdGlhbENvbnRlbnQgPSB0aGlzLl9nZXRJbml0aWFsQ29udGVudCgpO1xyXG5cclxuXHRcdFx0Ly8gQ2hlY2sgdG8gc2VlIGlmIHRoZSBwYWdlIGFscmVhZHkgZXhpc3RzIGluIHRoZSBET00uXHJcblx0XHRcdC8vIE5PVEUgZG8gX25vdF8gdXNlIHRoZSA6anFtRGF0YSBwc2V1ZG8gc2VsZWN0b3IgYmVjYXVzZSBwYXJlbnRoZXNpc1xyXG5cdFx0XHQvLyAgICAgIGFyZSBhIHZhbGlkIHVybCBjaGFyIGFuZCBpdCBicmVha3Mgb24gdGhlIGZpcnN0IG9jY3VyZW5jZVxyXG5cdFx0XHRwYWdlID0gdGhpcy5lbGVtZW50XHJcblx0XHRcdFx0LmNoaWxkcmVuKCBcIltkYXRhLVwiICsgdGhpcy5fZ2V0TnMoKSArXHJcblx0XHRcdFx0XHRcInVybD0nXCIgKyAkLm1vYmlsZS5wYXRoLmhhc2hUb1NlbGVjdG9yKCBkYXRhVXJsICkgKyBcIiddXCIgKTtcclxuXHJcblx0XHRcdC8vIElmIHdlIGZhaWxlZCB0byBmaW5kIHRoZSBwYWdlLCBjaGVjayB0byBzZWUgaWYgdGhlIHVybCBpcyBhXHJcblx0XHRcdC8vIHJlZmVyZW5jZSB0byBhbiBlbWJlZGRlZCBwYWdlLiBJZiBzbywgaXQgbWF5IGhhdmUgYmVlbiBkeW5hbWljYWxseVxyXG5cdFx0XHQvLyBpbmplY3RlZCBieSBhIGRldmVsb3BlciwgaW4gd2hpY2ggY2FzZSBpdCB3b3VsZCBiZSBsYWNraW5nIGFcclxuXHRcdFx0Ly8gZGF0YS11cmwgYXR0cmlidXRlIGFuZCBpbiBuZWVkIG9mIGVuaGFuY2VtZW50LlxyXG5cdFx0XHRpZiAoIHBhZ2UubGVuZ3RoID09PSAwICYmIGRhdGFVcmwgJiYgISQubW9iaWxlLnBhdGguaXNQYXRoKCBkYXRhVXJsICkgKSB7XHJcblx0XHRcdFx0cGFnZSA9IHRoaXMuZWxlbWVudC5jaGlsZHJlbiggJC5tb2JpbGUucGF0aC5oYXNoVG9TZWxlY3RvcihcIiNcIiArIGRhdGFVcmwpIClcclxuXHRcdFx0XHRcdC5hdHRyKCBcImRhdGEtXCIgKyB0aGlzLl9nZXROcygpICsgXCJ1cmxcIiwgZGF0YVVybCApXHJcblx0XHRcdFx0XHQuanFtRGF0YSggXCJ1cmxcIiwgZGF0YVVybCApO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBJZiB3ZSBmYWlsZWQgdG8gZmluZCBhIHBhZ2UgaW4gdGhlIERPTSwgY2hlY2sgdGhlIFVSTCB0byBzZWUgaWYgaXRcclxuXHRcdFx0Ly8gcmVmZXJzIHRvIHRoZSBmaXJzdCBwYWdlIGluIHRoZSBhcHBsaWNhdGlvbi4gQWxzbyBjaGVjayB0byBtYWtlIHN1cmVcclxuXHRcdFx0Ly8gb3VyIGNhY2hlZC1maXJzdC1wYWdlIGlzIGFjdHVhbGx5IGluIHRoZSBET00uIFNvbWUgdXNlciBkZXBsb3llZFxyXG5cdFx0XHQvLyBhcHBzIGFyZSBwcnVuaW5nIHRoZSBmaXJzdCBwYWdlIGZyb20gdGhlIERPTSBmb3IgdmFyaW91cyByZWFzb25zLlxyXG5cdFx0XHQvLyBXZSBjaGVjayBmb3IgdGhpcyBjYXNlIGhlcmUgYmVjYXVzZSB3ZSBkb24ndCB3YW50IGEgZmlyc3QtcGFnZSB3aXRoXHJcblx0XHRcdC8vIGFuIGlkIGZhbGxpbmcgdGhyb3VnaCB0byB0aGUgbm9uLWV4aXN0ZW50IGVtYmVkZGVkIHBhZ2UgZXJyb3IgY2FzZS5cclxuXHRcdFx0aWYgKCBwYWdlLmxlbmd0aCA9PT0gMCAmJlxyXG5cdFx0XHRcdCQubW9iaWxlLnBhdGguaXNGaXJzdFBhZ2VVcmwoIGZpbGVVcmwgKSAmJlxyXG5cdFx0XHRcdGluaXRpYWxDb250ZW50ICYmXHJcblx0XHRcdFx0aW5pdGlhbENvbnRlbnQucGFyZW50KCkubGVuZ3RoICkge1xyXG5cdFx0XHRcdHBhZ2UgPSAkKCBpbml0aWFsQ29udGVudCApO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRyZXR1cm4gcGFnZTtcclxuXHRcdH0sXHJcblxyXG5cdFx0X2dldExvYWRlcjogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHJldHVybiAkLm1vYmlsZS5sb2FkaW5nKCk7XHJcblx0XHR9LFxyXG5cclxuXHRcdF9zaG93TG9hZGluZzogZnVuY3Rpb24oIGRlbGF5LCB0aGVtZSwgbXNnLCB0ZXh0b25seSApIHtcclxuXHRcdFx0Ly8gVGhpcyBjb25maWd1cmFibGUgdGltZW91dCBhbGxvd3MgY2FjaGVkIHBhZ2VzIGEgYnJpZWZcclxuXHRcdFx0Ly8gZGVsYXkgdG8gbG9hZCB3aXRob3V0IHNob3dpbmcgYSBtZXNzYWdlXHJcblx0XHRcdGlmICggdGhpcy5fbG9hZE1zZyApIHtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHRoaXMuX2xvYWRNc2cgPSBzZXRUaW1lb3V0KCQucHJveHkoZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0dGhpcy5fZ2V0TG9hZGVyKCkubG9hZGVyKCBcInNob3dcIiwgdGhlbWUsIG1zZywgdGV4dG9ubHkgKTtcclxuXHRcdFx0XHR0aGlzLl9sb2FkTXNnID0gMDtcclxuXHRcdFx0fSwgdGhpcyksIGRlbGF5ICk7XHJcblx0XHR9LFxyXG5cclxuXHRcdF9oaWRlTG9hZGluZzogZnVuY3Rpb24oKSB7XHJcblx0XHRcdC8vIFN0b3AgbWVzc2FnZSBzaG93IHRpbWVyXHJcblx0XHRcdGNsZWFyVGltZW91dCggdGhpcy5fbG9hZE1zZyApO1xyXG5cdFx0XHR0aGlzLl9sb2FkTXNnID0gMDtcclxuXHJcblx0XHRcdC8vIEhpZGUgbG9hZGluZyBtZXNzYWdlXHJcblx0XHRcdHRoaXMuX2dldExvYWRlcigpLmxvYWRlciggXCJoaWRlXCIgKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0X3Nob3dFcnJvcjogZnVuY3Rpb24oKSB7XHJcblx0XHRcdC8vIG1ha2Ugc3VyZSB0byByZW1vdmUgdGhlIGN1cnJlbnQgbG9hZGluZyBtZXNzYWdlXHJcblx0XHRcdHRoaXMuX2hpZGVMb2FkaW5nKCk7XHJcblxyXG5cdFx0XHQvLyBzaG93IHRoZSBlcnJvciBtZXNzYWdlXHJcblx0XHRcdHRoaXMuX3Nob3dMb2FkaW5nKCAwLCAkLm1vYmlsZS5wYWdlTG9hZEVycm9yTWVzc2FnZVRoZW1lLCAkLm1vYmlsZS5wYWdlTG9hZEVycm9yTWVzc2FnZSwgdHJ1ZSApO1xyXG5cclxuXHRcdFx0Ly8gaGlkZSB0aGUgZXJyb3IgbWVzc2FnZSBhZnRlciBhIGRlbGF5XHJcblx0XHRcdC8vIFRPRE8gY29uZmlndXJhdGlvblxyXG5cdFx0XHRzZXRUaW1lb3V0KCAkLnByb3h5KHRoaXMsIFwiX2hpZGVMb2FkaW5nXCIpLCAxNTAwICk7XHJcblx0XHR9LFxyXG5cclxuXHRcdF9wYXJzZTogZnVuY3Rpb24oIGh0bWwsIGZpbGVVcmwgKSB7XHJcblx0XHRcdC8vIFRPRE8gY29uc2lkZXIgYWxsb3dpbmcgY3VzdG9taXphdGlvbiBvZiB0aGlzIG1ldGhvZC4gSXQncyB2ZXJ5IEpRTSBzcGVjaWZpY1xyXG5cdFx0XHR2YXIgcGFnZSwgYWxsID0gJCggXCI8ZGl2PjwvZGl2PlwiICk7XHJcblxyXG5cdFx0XHQvL3dvcmthcm91bmQgdG8gYWxsb3cgc2NyaXB0cyB0byBleGVjdXRlIHdoZW4gaW5jbHVkZWQgaW4gcGFnZSBkaXZzXHJcblx0XHRcdGFsbC5nZXQoIDAgKS5pbm5lckhUTUwgPSBodG1sO1xyXG5cclxuXHRcdFx0cGFnZSA9IGFsbC5maW5kKCBcIjpqcW1EYXRhKHJvbGU9J3BhZ2UnKSwgOmpxbURhdGEocm9sZT0nZGlhbG9nJylcIiApLmZpcnN0KCk7XHJcblxyXG5cdFx0XHQvL2lmIHBhZ2UgZWxlbSBjb3VsZG4ndCBiZSBmb3VuZCwgY3JlYXRlIG9uZSBhbmQgaW5zZXJ0IHRoZSBib2R5IGVsZW1lbnQncyBjb250ZW50c1xyXG5cdFx0XHRpZiAoICFwYWdlLmxlbmd0aCApIHtcclxuXHRcdFx0XHRwYWdlID0gJCggXCI8ZGl2IGRhdGEtXCIgKyB0aGlzLl9nZXROcygpICsgXCJyb2xlPSdwYWdlJz5cIiArXHJcblx0XHRcdFx0XHQoIGh0bWwuc3BsaXQoIC88XFwvP2JvZHlbXj5dKj4vZ21pIClbMV0gfHwgXCJcIiApICtcclxuXHRcdFx0XHRcdFwiPC9kaXY+XCIgKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gVE9ETyB0YWdnaW5nIGEgcGFnZSB3aXRoIGV4dGVybmFsIHRvIG1ha2Ugc3VyZSB0aGF0IGVtYmVkZGVkIHBhZ2VzIGFyZW4ndFxyXG5cdFx0XHQvLyByZW1vdmVkIGJ5IHRoZSB2YXJpb3VzIHBhZ2UgaGFuZGxpbmcgY29kZSBpcyBiYWQuIEhhdmluZyBwYWdlIGhhbmRsaW5nIGNvZGVcclxuXHRcdFx0Ly8gaW4gbWFueSBwbGFjZXMgaXMgYmFkLiBTb2x1dGlvbnMgcG9zdCAxLjBcclxuXHRcdFx0cGFnZS5hdHRyKCBcImRhdGEtXCIgKyB0aGlzLl9nZXROcygpICsgXCJ1cmxcIiwgdGhpcy5fY3JlYXRlRGF0YVVybCggZmlsZVVybCApIClcclxuXHRcdFx0XHQuYXR0ciggXCJkYXRhLVwiICsgdGhpcy5fZ2V0TnMoKSArIFwiZXh0ZXJuYWwtcGFnZVwiLCB0cnVlICk7XHJcblxyXG5cdFx0XHRyZXR1cm4gcGFnZTtcclxuXHRcdH0sXHJcblxyXG5cdFx0X3NldExvYWRlZFRpdGxlOiBmdW5jdGlvbiggcGFnZSwgaHRtbCApIHtcclxuXHRcdFx0Ly9wYWdlIHRpdGxlIHJlZ2V4cFxyXG5cdFx0XHR2YXIgbmV3UGFnZVRpdGxlID0gaHRtbC5tYXRjaCggLzx0aXRsZVtePl0qPihbXjxdKikvICkgJiYgUmVnRXhwLiQxO1xyXG5cclxuXHRcdFx0aWYgKCBuZXdQYWdlVGl0bGUgJiYgIXBhZ2UuanFtRGF0YShcInRpdGxlXCIpICkge1xyXG5cdFx0XHRcdG5ld1BhZ2VUaXRsZSA9ICQoIFwiPGRpdj5cIiArIG5ld1BhZ2VUaXRsZSArIFwiPC9kaXY+XCIgKS50ZXh0KCk7XHJcblx0XHRcdFx0cGFnZS5qcW1EYXRhKCBcInRpdGxlXCIsIG5ld1BhZ2VUaXRsZSApO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cclxuXHRcdF9pc1Jld3JpdGFibGVCYXNlVGFnOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0cmV0dXJuICQubW9iaWxlLmR5bmFtaWNCYXNlRW5hYmxlZCAmJiAhJC5zdXBwb3J0LmR5bmFtaWNCYXNlVGFnO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfY3JlYXRlRGF0YVVybDogZnVuY3Rpb24oIGFic29sdXRlVXJsICkge1xyXG5cdFx0XHRyZXR1cm4gJC5tb2JpbGUucGF0aC5jb252ZXJ0VXJsVG9EYXRhVXJsKCBhYnNvbHV0ZVVybCApO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfY3JlYXRlRmlsZVVybDogZnVuY3Rpb24oIGFic29sdXRlVXJsICkge1xyXG5cdFx0XHRyZXR1cm4gJC5tb2JpbGUucGF0aC5nZXRGaWxlUGF0aCggYWJzb2x1dGVVcmwgKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0X3RyaWdnZXJXaXRoRGVwcmVjYXRlZDogZnVuY3Rpb24oIG5hbWUsIGRhdGEsIHBhZ2UgKSB7XHJcblx0XHRcdHZhciBkZXByZWNhdGVkRXZlbnQgPSAkLkV2ZW50KCBcInBhZ2VcIiArIG5hbWUgKSxcclxuXHRcdFx0XHRuZXdFdmVudCA9ICQuRXZlbnQoIHRoaXMud2lkZ2V0TmFtZSArIG5hbWUgKTtcclxuXHJcblx0XHRcdC8vIERFUFJFQ0FURURcclxuXHRcdFx0Ly8gdHJpZ2dlciB0aGUgb2xkIGRlcHJlY2F0ZWQgZXZlbnQgb24gdGhlIHBhZ2UgaWYgaXQncyBwcm92aWRlZFxyXG5cdFx0XHQoIHBhZ2UgfHwgdGhpcy5lbGVtZW50ICkudHJpZ2dlciggZGVwcmVjYXRlZEV2ZW50LCBkYXRhICk7XHJcblxyXG5cdFx0XHQvLyB1c2UgdGhlIHdpZGdldCB0cmlnZ2VyIG1ldGhvZCBmb3IgdGhlIG5ldyBjb250ZW50KiBldmVudFxyXG5cdFx0XHR0aGlzLl90cmlnZ2VyKCBuYW1lLCBuZXdFdmVudCwgZGF0YSApO1xyXG5cclxuXHRcdFx0cmV0dXJuIHtcclxuXHRcdFx0XHRkZXByZWNhdGVkRXZlbnQ6IGRlcHJlY2F0ZWRFdmVudCxcclxuXHRcdFx0XHRldmVudDogbmV3RXZlbnRcclxuXHRcdFx0fTtcclxuXHRcdH0sXHJcblxyXG5cdFx0Ly8gVE9ETyBpdCB3b3VsZCBiZSBuaWNlIHRvIHNwbGl0IHRoaXMgdXAgbW9yZSBidXQgZXZlcnl0aGluZyBhcHBlYXJzIHRvIGJlIFwib25lIG9mZlwiXHJcblx0XHQvLyAgICAgIG9yIHJlcXVpcmUgb3JkZXJpbmcgc3VjaCB0aGF0IG90aGVyIGJpdHMgYXJlIHNwcmlua2xlZCBpbiBiZXR3ZWVuIHBhcnRzIHRoYXRcclxuXHRcdC8vICAgICAgY291bGQgYmUgYWJzdHJhY3RlZCBvdXQgYXMgYSBncm91cFxyXG5cdFx0X2xvYWRTdWNjZXNzOiBmdW5jdGlvbiggYWJzVXJsLCB0cmlnZ2VyRGF0YSwgc2V0dGluZ3MsIGRlZmVycmVkICkge1xyXG5cdFx0XHR2YXIgZmlsZVVybCA9IHRoaXMuX2NyZWF0ZUZpbGVVcmwoIGFic1VybCApO1xyXG5cclxuXHRcdFx0cmV0dXJuICQucHJveHkoZnVuY3Rpb24oIGh0bWwsIHRleHRTdGF0dXMsIHhociApIHtcclxuXHRcdFx0XHQvL3ByZS1wYXJzZSBodG1sIHRvIGNoZWNrIGZvciBhIGRhdGEtdXJsLFxyXG5cdFx0XHRcdC8vdXNlIGl0IGFzIHRoZSBuZXcgZmlsZVVybCwgYmFzZSBwYXRoLCBldGNcclxuXHRcdFx0XHR2YXIgY29udGVudCxcclxuXHJcblx0XHRcdFx0XHQvLyBUT0RPIGhhbmRsZSBkaWFsb2dzIGFnYWluXHJcblx0XHRcdFx0XHRwYWdlRWxlbVJlZ2V4ID0gbmV3IFJlZ0V4cCggXCIoPFtePl0rXFxcXGJkYXRhLVwiICsgdGhpcy5fZ2V0TnMoKSArIFwicm9sZT1bXFxcIiddP3BhZ2VbXFxcIiddP1tePl0qPilcIiApLFxyXG5cclxuXHRcdFx0XHRcdGRhdGFVcmxSZWdleCA9IG5ldyBSZWdFeHAoIFwiXFxcXGJkYXRhLVwiICsgdGhpcy5fZ2V0TnMoKSArIFwidXJsPVtcXFwiJ10/KFteXFxcIic+XSopW1xcXCInXT9cIiApO1xyXG5cclxuXHRcdFx0XHQvLyBkYXRhLXVybCBtdXN0IGJlIHByb3ZpZGVkIGZvciB0aGUgYmFzZSB0YWcgc28gcmVzb3VyY2UgcmVxdWVzdHNcclxuXHRcdFx0XHQvLyBjYW4gYmUgZGlyZWN0ZWQgdG8gdGhlIGNvcnJlY3QgdXJsLiBsb2FkaW5nIGludG8gYSB0ZW1wcm9yYXJ5XHJcblx0XHRcdFx0Ly8gZWxlbWVudCBtYWtlcyB0aGVzZSByZXF1ZXN0cyBpbW1lZGlhdGVseVxyXG5cdFx0XHRcdGlmICggcGFnZUVsZW1SZWdleC50ZXN0KCBodG1sICkgJiZcclxuXHRcdFx0XHRcdFJlZ0V4cC4kMSAmJlxyXG5cdFx0XHRcdFx0ZGF0YVVybFJlZ2V4LnRlc3QoIFJlZ0V4cC4kMSApICYmXHJcblx0XHRcdFx0XHRSZWdFeHAuJDEgKSB7XHJcblx0XHRcdFx0XHRmaWxlVXJsID0gJC5tb2JpbGUucGF0aC5nZXRGaWxlUGF0aCggJChcIjxkaXY+XCIgKyBSZWdFeHAuJDEgKyBcIjwvZGl2PlwiKS50ZXh0KCkgKTtcclxuXHJcblx0XHRcdFx0XHQvLyBXZSBzcGVjaWZ5IHRoYXQsIGlmIGEgZGF0YS11cmwgYXR0cmlidXRlIGlzIGdpdmVuIG9uIHRoZSBwYWdlIGRpdiwgaXRzIHZhbHVlXHJcblx0XHRcdFx0XHQvLyBtdXN0IGJlIGdpdmVuIG5vbi1VUkwtZW5jb2RlZC4gSG93ZXZlciwgaW4gdGhpcyBwYXJ0IG9mIHRoZSBjb2RlLCBmaWxlVXJsIGlzXHJcblx0XHRcdFx0XHQvLyBhc3N1bWVkIHRvIGJlIFVSTC1lbmNvZGVkLCBzbyB3ZSBVUkwtZW5jb2RlIHRoZSByZXRyaWV2ZWQgdmFsdWUgaGVyZVxyXG5cdFx0XHRcdFx0ZmlsZVVybCA9IHRoaXMud2luZG93WyAwIF0uZW5jb2RlVVJJQ29tcG9uZW50KCBmaWxlVXJsICk7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHQvL2RvbnQgdXBkYXRlIHRoZSBiYXNlIHRhZyBpZiB3ZSBhcmUgcHJlZmV0Y2hpbmdcclxuXHRcdFx0XHRpZiAoIHNldHRpbmdzLnByZWZldGNoID09PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdFx0XHR0aGlzLl9nZXRCYXNlKCkuc2V0KCBmaWxlVXJsICk7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRjb250ZW50ID0gdGhpcy5fcGFyc2UoIGh0bWwsIGZpbGVVcmwgKTtcclxuXHJcblx0XHRcdFx0dGhpcy5fc2V0TG9hZGVkVGl0bGUoIGNvbnRlbnQsIGh0bWwgKTtcclxuXHJcblx0XHRcdFx0Ly8gQWRkIHRoZSBjb250ZW50IHJlZmVyZW5jZSBhbmQgeGhyIHRvIG91ciB0cmlnZ2VyRGF0YS5cclxuXHRcdFx0XHR0cmlnZ2VyRGF0YS54aHIgPSB4aHI7XHJcblx0XHRcdFx0dHJpZ2dlckRhdGEudGV4dFN0YXR1cyA9IHRleHRTdGF0dXM7XHJcblxyXG5cdFx0XHRcdC8vIERFUFJFQ0FURURcclxuXHRcdFx0XHR0cmlnZ2VyRGF0YS5wYWdlID0gY29udGVudDtcclxuXHJcblx0XHRcdFx0dHJpZ2dlckRhdGEuY29udGVudCA9IGNvbnRlbnQ7XHJcblxyXG5cdFx0XHRcdHRyaWdnZXJEYXRhLnRvUGFnZSA9IGNvbnRlbnQ7XHJcblxyXG5cdFx0XHRcdC8vIElmIHRoZSBkZWZhdWx0IGJlaGF2aW9yIGlzIHByZXZlbnRlZCwgc3RvcCBoZXJlIVxyXG5cdFx0XHRcdC8vIE5vdGUgdGhhdCBpdCBpcyB0aGUgcmVzcG9uc2liaWxpdHkgb2YgdGhlIGxpc3RlbmVyL2hhbmRsZXJcclxuXHRcdFx0XHQvLyB0aGF0IGNhbGxlZCBwcmV2ZW50RGVmYXVsdCgpLCB0byByZXNvbHZlL3JlamVjdCB0aGVcclxuXHRcdFx0XHQvLyBkZWZlcnJlZCBvYmplY3Qgd2l0aGluIHRoZSB0cmlnZ2VyRGF0YS5cclxuXHRcdFx0XHRpZiAoIHRoaXMuX3RyaWdnZXJXaXRoRGVwcmVjYXRlZCggXCJsb2FkXCIsIHRyaWdnZXJEYXRhICkuZXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkgKSB7XHJcblx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHQvLyByZXdyaXRlIHNyYyBhbmQgaHJlZiBhdHRycyB0byB1c2UgYSBiYXNlIHVybCBpZiB0aGUgYmFzZSB0YWcgd29uJ3Qgd29ya1xyXG5cdFx0XHRcdGlmICggdGhpcy5faXNSZXdyaXRhYmxlQmFzZVRhZygpICYmIGNvbnRlbnQgKSB7XHJcblx0XHRcdFx0XHR0aGlzLl9nZXRCYXNlKCkucmV3cml0ZSggZmlsZVVybCwgY29udGVudCApO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0dGhpcy5faW5jbHVkZSggY29udGVudCwgc2V0dGluZ3MgKTtcclxuXHJcblx0XHRcdFx0Ly8gUmVtb3ZlIGxvYWRpbmcgbWVzc2FnZS5cclxuXHRcdFx0XHRpZiAoIHNldHRpbmdzLnNob3dMb2FkTXNnICkge1xyXG5cdFx0XHRcdFx0dGhpcy5faGlkZUxvYWRpbmcoKTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdGRlZmVycmVkLnJlc29sdmUoIGFic1VybCwgc2V0dGluZ3MsIGNvbnRlbnQgKTtcclxuXHRcdFx0fSwgdGhpcyk7XHJcblx0XHR9LFxyXG5cclxuXHRcdF9sb2FkRGVmYXVsdHM6IHtcclxuXHRcdFx0dHlwZTogXCJnZXRcIixcclxuXHRcdFx0ZGF0YTogdW5kZWZpbmVkLFxyXG5cclxuXHRcdFx0Ly8gREVQUkVDQVRFRFxyXG5cdFx0XHRyZWxvYWRQYWdlOiBmYWxzZSxcclxuXHJcblx0XHRcdHJlbG9hZDogZmFsc2UsXHJcblxyXG5cdFx0XHQvLyBCeSBkZWZhdWx0IHdlIHJlbHkgb24gdGhlIHJvbGUgZGVmaW5lZCBieSB0aGUgQGRhdGEtcm9sZSBhdHRyaWJ1dGUuXHJcblx0XHRcdHJvbGU6IHVuZGVmaW5lZCxcclxuXHJcblx0XHRcdHNob3dMb2FkTXNnOiBmYWxzZSxcclxuXHJcblx0XHRcdC8vIFRoaXMgZGVsYXkgYWxsb3dzIGxvYWRzIHRoYXQgcHVsbCBmcm9tIGJyb3dzZXIgY2FjaGUgdG9cclxuXHRcdFx0Ly8gb2NjdXIgd2l0aG91dCBzaG93aW5nIHRoZSBsb2FkaW5nIG1lc3NhZ2UuXHJcblx0XHRcdGxvYWRNc2dEZWxheTogNTBcclxuXHRcdH0sXHJcblxyXG5cdFx0bG9hZDogZnVuY3Rpb24oIHVybCwgb3B0aW9ucyApIHtcclxuXHRcdFx0Ly8gVGhpcyBmdW5jdGlvbiB1c2VzIGRlZmVycmVkIG5vdGlmaWNhdGlvbnMgdG8gbGV0IGNhbGxlcnNcclxuXHRcdFx0Ly8ga25vdyB3aGVuIHRoZSBjb250ZW50IGlzIGRvbmUgbG9hZGluZywgb3IgaWYgYW4gZXJyb3IgaGFzIG9jY3VycmVkLlxyXG5cdFx0XHR2YXIgZGVmZXJyZWQgPSAoIG9wdGlvbnMgJiYgb3B0aW9ucy5kZWZlcnJlZCApIHx8ICQuRGVmZXJyZWQoKSxcclxuXHJcblx0XHRcdFx0Ly8gRXhhbWluaW5nIHRoZSBvcHRpb24gXCJyZWxvYWRQYWdlXCIgcGFzc2VkIGJ5IHRoZSB1c2VyIGlzIGRlcHJlY2F0ZWQgYXMgb2YgMS40LjBcclxuXHRcdFx0XHQvLyBhbmQgd2lsbCBiZSByZW1vdmVkIGluIDEuNS4wLlxyXG5cdFx0XHRcdC8vIENvcHkgb3B0aW9uIFwicmVsb2FkUGFnZVwiIHRvIFwicmVsb2FkXCIsIGJ1dCBvbmx5IGlmIG9wdGlvbiBcInJlbG9hZFwiIGlzIG5vdCBwcmVzZW50XHJcblx0XHRcdFx0cmVsb2FkT3B0aW9uRXh0ZW5zaW9uID1cclxuXHRcdFx0XHRcdCggKCBvcHRpb25zICYmIG9wdGlvbnMucmVsb2FkID09PSB1bmRlZmluZWQgJiZcclxuXHRcdFx0XHRcdFx0b3B0aW9ucy5yZWxvYWRQYWdlICE9PSB1bmRlZmluZWQgKSA/XHJcblx0XHRcdFx0XHRcdFx0eyByZWxvYWQ6IG9wdGlvbnMucmVsb2FkUGFnZSB9IDoge30gKSxcclxuXHJcblx0XHRcdFx0Ly8gVGhlIGRlZmF1bHQgbG9hZCBvcHRpb25zIHdpdGggb3ZlcnJpZGVzIHNwZWNpZmllZCBieSB0aGUgY2FsbGVyLlxyXG5cdFx0XHRcdHNldHRpbmdzID0gJC5leHRlbmQoIHt9LCB0aGlzLl9sb2FkRGVmYXVsdHMsIG9wdGlvbnMsIHJlbG9hZE9wdGlvbkV4dGVuc2lvbiApLFxyXG5cclxuXHRcdFx0XHQvLyBUaGUgRE9NIGVsZW1lbnQgZm9yIHRoZSBjb250ZW50IGFmdGVyIGl0IGhhcyBiZWVuIGxvYWRlZC5cclxuXHRcdFx0XHRjb250ZW50ID0gbnVsbCxcclxuXHJcblx0XHRcdFx0Ly8gVGhlIGFic29sdXRlIHZlcnNpb24gb2YgdGhlIFVSTCBwYXNzZWQgaW50byB0aGUgZnVuY3Rpb24uIFRoaXNcclxuXHRcdFx0XHQvLyB2ZXJzaW9uIG9mIHRoZSBVUkwgbWF5IGNvbnRhaW4gZGlhbG9nL3N1YmNvbnRlbnQgcGFyYW1zIGluIGl0LlxyXG5cdFx0XHRcdGFic1VybCA9ICQubW9iaWxlLnBhdGgubWFrZVVybEFic29sdXRlKCB1cmwsIHRoaXMuX2ZpbmRCYXNlV2l0aERlZmF1bHQoKSApLFxyXG5cdFx0XHRcdGZpbGVVcmwsIGRhdGFVcmwsIHBibEV2ZW50LCB0cmlnZ2VyRGF0YTtcclxuXHJcblx0XHRcdC8vIElmIHRoZSBjYWxsZXIgcHJvdmlkZWQgZGF0YSwgYW5kIHdlJ3JlIHVzaW5nIFwiZ2V0XCIgcmVxdWVzdCxcclxuXHRcdFx0Ly8gYXBwZW5kIHRoZSBkYXRhIHRvIHRoZSBVUkwuXHJcblx0XHRcdGlmICggc2V0dGluZ3MuZGF0YSAmJiBzZXR0aW5ncy50eXBlID09PSBcImdldFwiICkge1xyXG5cdFx0XHRcdGFic1VybCA9ICQubW9iaWxlLnBhdGguYWRkU2VhcmNoUGFyYW1zKCBhYnNVcmwsIHNldHRpbmdzLmRhdGEgKTtcclxuXHRcdFx0XHRzZXR0aW5ncy5kYXRhID0gdW5kZWZpbmVkO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBJZiB0aGUgY2FsbGVyIGlzIHVzaW5nIGEgXCJwb3N0XCIgcmVxdWVzdCwgcmVsb2FkIG11c3QgYmUgdHJ1ZVxyXG5cdFx0XHRpZiAoIHNldHRpbmdzLmRhdGEgJiYgc2V0dGluZ3MudHlwZSA9PT0gXCJwb3N0XCIgKSB7XHJcblx0XHRcdFx0c2V0dGluZ3MucmVsb2FkID0gdHJ1ZTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gVGhlIGFic29sdXRlIHZlcnNpb24gb2YgdGhlIFVSTCBtaW51cyBhbnkgZGlhbG9nL3N1YmNvbnRlbnQgcGFyYW1zLlxyXG5cdFx0XHQvLyBJbiBvdGhlcndvcmRzIHRoZSByZWFsIFVSTCBvZiB0aGUgY29udGVudCB0byBiZSBsb2FkZWQuXHJcblx0XHRcdGZpbGVVcmwgPSB0aGlzLl9jcmVhdGVGaWxlVXJsKCBhYnNVcmwgKTtcclxuXHJcblx0XHRcdC8vIFRoZSB2ZXJzaW9uIG9mIHRoZSBVcmwgYWN0dWFsbHkgc3RvcmVkIGluIHRoZSBkYXRhLXVybCBhdHRyaWJ1dGUgb2ZcclxuXHRcdFx0Ly8gdGhlIGNvbnRlbnQuIEZvciBlbWJlZGRlZCBjb250ZW50LCBpdCBpcyBqdXN0IHRoZSBpZCBvZiB0aGUgcGFnZS4gRm9yXHJcblx0XHRcdC8vIGNvbnRlbnQgd2l0aGluIHRoZSBzYW1lIGRvbWFpbiBhcyB0aGUgZG9jdW1lbnQgYmFzZSwgaXQgaXMgdGhlIHNpdGVcclxuXHRcdFx0Ly8gcmVsYXRpdmUgcGF0aC4gRm9yIGNyb3NzLWRvbWFpbiBjb250ZW50IChQaG9uZSBHYXAgb25seSkgdGhlIGVudGlyZVxyXG5cdFx0XHQvLyBhYnNvbHV0ZSBVcmwgaXMgdXNlZCB0byBsb2FkIHRoZSBjb250ZW50LlxyXG5cdFx0XHRkYXRhVXJsID0gdGhpcy5fY3JlYXRlRGF0YVVybCggYWJzVXJsICk7XHJcblxyXG5cdFx0XHRjb250ZW50ID0gdGhpcy5fZmluZCggYWJzVXJsICk7XHJcblxyXG5cdFx0XHQvLyBJZiBpdCBpc24ndCBhIHJlZmVyZW5jZSB0byB0aGUgZmlyc3QgY29udGVudCBhbmQgcmVmZXJzIHRvIG1pc3NpbmdcclxuXHRcdFx0Ly8gZW1iZWRkZWQgY29udGVudCByZWplY3QgdGhlIGRlZmVycmVkIGFuZCByZXR1cm5cclxuXHRcdFx0aWYgKCBjb250ZW50Lmxlbmd0aCA9PT0gMCAmJlxyXG5cdFx0XHRcdCQubW9iaWxlLnBhdGguaXNFbWJlZGRlZFBhZ2UoZmlsZVVybCkgJiZcclxuXHRcdFx0XHQhJC5tb2JpbGUucGF0aC5pc0ZpcnN0UGFnZVVybChmaWxlVXJsKSApIHtcclxuXHRcdFx0XHRkZWZlcnJlZC5yZWplY3QoIGFic1VybCwgc2V0dGluZ3MgKTtcclxuXHRcdFx0XHRyZXR1cm4gZGVmZXJyZWQucHJvbWlzZSgpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBSZXNldCBiYXNlIHRvIHRoZSBkZWZhdWx0IGRvY3VtZW50IGJhc2VcclxuXHRcdFx0Ly8gVE9ETyBmaWd1cmUgb3V0IHdoeSB3ZSBkb2UgdGhpc1xyXG5cdFx0XHR0aGlzLl9nZXRCYXNlKCkucmVzZXQoKTtcclxuXHJcblx0XHRcdC8vIElmIHRoZSBjb250ZW50IHdlIGFyZSBpbnRlcmVzdGVkIGluIGlzIGFscmVhZHkgaW4gdGhlIERPTSxcclxuXHRcdFx0Ly8gYW5kIHRoZSBjYWxsZXIgZGlkIG5vdCBpbmRpY2F0ZSB0aGF0IHdlIHNob3VsZCBmb3JjZSBhXHJcblx0XHRcdC8vIHJlbG9hZCBvZiB0aGUgZmlsZSwgd2UgYXJlIGRvbmUuIFJlc29sdmUgdGhlIGRlZmVycnJlZCBzbyB0aGF0XHJcblx0XHRcdC8vIHVzZXJzIGNhbiBiaW5kIHRvIC5kb25lIG9uIHRoZSBwcm9taXNlXHJcblx0XHRcdGlmICggY29udGVudC5sZW5ndGggJiYgIXNldHRpbmdzLnJlbG9hZCApIHtcclxuXHRcdFx0XHR0aGlzLl9lbmhhbmNlKCBjb250ZW50LCBzZXR0aW5ncy5yb2xlICk7XHJcblx0XHRcdFx0ZGVmZXJyZWQucmVzb2x2ZSggYWJzVXJsLCBzZXR0aW5ncywgY29udGVudCApO1xyXG5cclxuXHRcdFx0XHQvL2lmIHdlIGFyZSByZWxvYWRpbmcgdGhlIGNvbnRlbnQgbWFrZSBzdXJlIHdlIHVwZGF0ZVxyXG5cdFx0XHRcdC8vIHRoZSBiYXNlIGlmIGl0cyBub3QgYSBwcmVmZXRjaFxyXG5cdFx0XHRcdGlmICggIXNldHRpbmdzLnByZWZldGNoICkge1xyXG5cdFx0XHRcdFx0dGhpcy5fZ2V0QmFzZSgpLnNldCh1cmwpO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0cmV0dXJuIGRlZmVycmVkLnByb21pc2UoKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0dHJpZ2dlckRhdGEgPSB7XHJcblx0XHRcdFx0dXJsOiB1cmwsXHJcblx0XHRcdFx0YWJzVXJsOiBhYnNVcmwsXHJcblx0XHRcdFx0dG9QYWdlOiB1cmwsXHJcblx0XHRcdFx0cHJldlBhZ2U6IG9wdGlvbnMgPyBvcHRpb25zLmZyb21QYWdlIDogdW5kZWZpbmVkLFxyXG5cdFx0XHRcdGRhdGFVcmw6IGRhdGFVcmwsXHJcblx0XHRcdFx0ZGVmZXJyZWQ6IGRlZmVycmVkLFxyXG5cdFx0XHRcdG9wdGlvbnM6IHNldHRpbmdzXHJcblx0XHRcdH07XHJcblxyXG5cdFx0XHQvLyBMZXQgbGlzdGVuZXJzIGtub3cgd2UncmUgYWJvdXQgdG8gbG9hZCBjb250ZW50LlxyXG5cdFx0XHRwYmxFdmVudCA9IHRoaXMuX3RyaWdnZXJXaXRoRGVwcmVjYXRlZCggXCJiZWZvcmVsb2FkXCIsIHRyaWdnZXJEYXRhICk7XHJcblxyXG5cdFx0XHQvLyBJZiB0aGUgZGVmYXVsdCBiZWhhdmlvciBpcyBwcmV2ZW50ZWQsIHN0b3AgaGVyZSFcclxuXHRcdFx0aWYgKCBwYmxFdmVudC5kZXByZWNhdGVkRXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkgfHxcclxuXHRcdFx0XHRwYmxFdmVudC5ldmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSApIHtcclxuXHRcdFx0XHRyZXR1cm4gZGVmZXJyZWQucHJvbWlzZSgpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpZiAoIHNldHRpbmdzLnNob3dMb2FkTXNnICkge1xyXG5cdFx0XHRcdHRoaXMuX3Nob3dMb2FkaW5nKCBzZXR0aW5ncy5sb2FkTXNnRGVsYXkgKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gUmVzZXQgYmFzZSB0byB0aGUgZGVmYXVsdCBkb2N1bWVudCBiYXNlLlxyXG5cdFx0XHQvLyBvbmx5IHJlc2V0IGlmIHdlIGFyZSBub3QgcHJlZmV0Y2hpbmdcclxuXHRcdFx0aWYgKCBzZXR0aW5ncy5wcmVmZXRjaCA9PT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRcdHRoaXMuX2dldEJhc2UoKS5yZXNldCgpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpZiAoICEoICQubW9iaWxlLmFsbG93Q3Jvc3NEb21haW5QYWdlcyB8fFxyXG5cdFx0XHRcdCQubW9iaWxlLnBhdGguaXNTYW1lRG9tYWluKCQubW9iaWxlLnBhdGguZG9jdW1lbnRVcmwsIGFic1VybCApICkgKSB7XHJcblx0XHRcdFx0ZGVmZXJyZWQucmVqZWN0KCBhYnNVcmwsIHNldHRpbmdzICk7XHJcblx0XHRcdFx0cmV0dXJuIGRlZmVycmVkLnByb21pc2UoKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gTG9hZCB0aGUgbmV3IGNvbnRlbnQuXHJcblx0XHRcdCQuYWpheCh7XHJcblx0XHRcdFx0dXJsOiBmaWxlVXJsLFxyXG5cdFx0XHRcdHR5cGU6IHNldHRpbmdzLnR5cGUsXHJcblx0XHRcdFx0ZGF0YTogc2V0dGluZ3MuZGF0YSxcclxuXHRcdFx0XHRjb250ZW50VHlwZTogc2V0dGluZ3MuY29udGVudFR5cGUsXHJcblx0XHRcdFx0ZGF0YVR5cGU6IFwiaHRtbFwiLFxyXG5cdFx0XHRcdHN1Y2Nlc3M6IHRoaXMuX2xvYWRTdWNjZXNzKCBhYnNVcmwsIHRyaWdnZXJEYXRhLCBzZXR0aW5ncywgZGVmZXJyZWQgKSxcclxuXHRcdFx0XHRlcnJvcjogdGhpcy5fbG9hZEVycm9yKCBhYnNVcmwsIHRyaWdnZXJEYXRhLCBzZXR0aW5ncywgZGVmZXJyZWQgKVxyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdHJldHVybiBkZWZlcnJlZC5wcm9taXNlKCk7XHJcblx0XHR9LFxyXG5cclxuXHRcdF9sb2FkRXJyb3I6IGZ1bmN0aW9uKCBhYnNVcmwsIHRyaWdnZXJEYXRhLCBzZXR0aW5ncywgZGVmZXJyZWQgKSB7XHJcblx0XHRcdHJldHVybiAkLnByb3h5KGZ1bmN0aW9uKCB4aHIsIHRleHRTdGF0dXMsIGVycm9yVGhyb3duICkge1xyXG5cdFx0XHRcdC8vc2V0IGJhc2UgYmFjayB0byBjdXJyZW50IHBhdGhcclxuXHRcdFx0XHR0aGlzLl9nZXRCYXNlKCkuc2V0KCAkLm1vYmlsZS5wYXRoLmdldCgpICk7XHJcblxyXG5cdFx0XHRcdC8vIEFkZCBlcnJvciBpbmZvIHRvIG91ciB0cmlnZ2VyRGF0YS5cclxuXHRcdFx0XHR0cmlnZ2VyRGF0YS54aHIgPSB4aHI7XHJcblx0XHRcdFx0dHJpZ2dlckRhdGEudGV4dFN0YXR1cyA9IHRleHRTdGF0dXM7XHJcblx0XHRcdFx0dHJpZ2dlckRhdGEuZXJyb3JUaHJvd24gPSBlcnJvclRocm93bjtcclxuXHJcblx0XHRcdFx0Ly8gTGV0IGxpc3RlbmVycyBrbm93IHRoZSBwYWdlIGxvYWQgZmFpbGVkLlxyXG5cdFx0XHRcdHZhciBwbGZFdmVudCA9IHRoaXMuX3RyaWdnZXJXaXRoRGVwcmVjYXRlZCggXCJsb2FkZmFpbGVkXCIsIHRyaWdnZXJEYXRhICk7XHJcblxyXG5cdFx0XHRcdC8vIElmIHRoZSBkZWZhdWx0IGJlaGF2aW9yIGlzIHByZXZlbnRlZCwgc3RvcCBoZXJlIVxyXG5cdFx0XHRcdC8vIE5vdGUgdGhhdCBpdCBpcyB0aGUgcmVzcG9uc2liaWxpdHkgb2YgdGhlIGxpc3RlbmVyL2hhbmRsZXJcclxuXHRcdFx0XHQvLyB0aGF0IGNhbGxlZCBwcmV2ZW50RGVmYXVsdCgpLCB0byByZXNvbHZlL3JlamVjdCB0aGVcclxuXHRcdFx0XHQvLyBkZWZlcnJlZCBvYmplY3Qgd2l0aGluIHRoZSB0cmlnZ2VyRGF0YS5cclxuXHRcdFx0XHRpZiAoIHBsZkV2ZW50LmRlcHJlY2F0ZWRFdmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSB8fFxyXG5cdFx0XHRcdFx0cGxmRXZlbnQuZXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkgKSB7XHJcblx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHQvLyBSZW1vdmUgbG9hZGluZyBtZXNzYWdlLlxyXG5cdFx0XHRcdGlmICggc2V0dGluZ3Muc2hvd0xvYWRNc2cgKSB7XHJcblx0XHRcdFx0XHR0aGlzLl9zaG93RXJyb3IoKTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdGRlZmVycmVkLnJlamVjdCggYWJzVXJsLCBzZXR0aW5ncyApO1xyXG5cdFx0XHR9LCB0aGlzKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0X2dldFRyYW5zaXRpb25IYW5kbGVyOiBmdW5jdGlvbiggdHJhbnNpdGlvbiApIHtcclxuXHRcdFx0dHJhbnNpdGlvbiA9ICQubW9iaWxlLl9tYXliZURlZ3JhZGVUcmFuc2l0aW9uKCB0cmFuc2l0aW9uICk7XHJcblxyXG5cdFx0XHQvL2ZpbmQgdGhlIHRyYW5zaXRpb24gaGFuZGxlciBmb3IgdGhlIHNwZWNpZmllZCB0cmFuc2l0aW9uLiBJZiB0aGVyZVxyXG5cdFx0XHQvL2lzbid0IG9uZSBpbiBvdXIgdHJhbnNpdGlvbkhhbmRsZXJzIGRpY3Rpb25hcnksIHVzZSB0aGUgZGVmYXVsdCBvbmUuXHJcblx0XHRcdC8vY2FsbCB0aGUgaGFuZGxlciBpbW1lZGlhdGVseSB0byBraWNrLW9mZiB0aGUgdHJhbnNpdGlvbi5cclxuXHRcdFx0cmV0dXJuICQubW9iaWxlLnRyYW5zaXRpb25IYW5kbGVyc1sgdHJhbnNpdGlvbiBdIHx8ICQubW9iaWxlLmRlZmF1bHRUcmFuc2l0aW9uSGFuZGxlcjtcclxuXHRcdH0sXHJcblxyXG5cdFx0Ly8gVE9ETyBtb3ZlIGludG8gdHJhbnNpdGlvbiBoYW5kbGVycz9cclxuXHRcdF90cmlnZ2VyQ3NzVHJhbnNpdGlvbkV2ZW50czogZnVuY3Rpb24oIHRvLCBmcm9tLCBwcmVmaXggKSB7XHJcblx0XHRcdHZhciBzYW1lUGFnZSA9IGZhbHNlO1xyXG5cclxuXHRcdFx0cHJlZml4ID0gcHJlZml4IHx8IFwiXCI7XHJcblxyXG5cdFx0XHQvLyBUT0RPIGRlY2lkZSBpZiB0aGVzZSBldmVudHMgc2hvdWxkIGluIGZhY3QgYmUgdHJpZ2dlcmVkIG9uIHRoZSBjb250YWluZXJcclxuXHRcdFx0aWYgKCBmcm9tICkge1xyXG5cclxuXHRcdFx0XHQvL0NoZWNrIGlmIHRoaXMgaXMgYSBzYW1lIHBhZ2UgdHJhbnNpdGlvbiBhbmQgdGVsbCB0aGUgaGFuZGxlciBpbiBwYWdlXHJcblx0XHRcdFx0aWYoIHRvWzBdID09PSBmcm9tWzBdICl7XHJcblx0XHRcdFx0XHRzYW1lUGFnZSA9IHRydWU7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHQvL3RyaWdnZXIgYmVmb3JlIHNob3cvaGlkZSBldmVudHNcclxuXHRcdFx0XHQvLyBUT0RPIGRlcHJlY2F0ZSBuZXh0UGFnZSBpbiBmYXZvciBvZiBuZXh0XHJcblx0XHRcdFx0dGhpcy5fdHJpZ2dlcldpdGhEZXByZWNhdGVkKCBwcmVmaXggKyBcImhpZGVcIiwge1xyXG5cclxuXHRcdFx0XHRcdC8vIERlcHJlY2F0ZWQgaW4gMS40IHJlbW92ZSBpbiAxLjVcclxuXHRcdFx0XHRcdG5leHRQYWdlOiB0byxcclxuXHRcdFx0XHRcdHRvUGFnZTogdG8sXHJcblx0XHRcdFx0XHRwcmV2UGFnZTogZnJvbSxcclxuXHRcdFx0XHRcdHNhbWVQYWdlOiBzYW1lUGFnZVxyXG5cdFx0XHRcdH0sIGZyb20gKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gVE9ETyBkZXByZWNhdGUgcHJldlBhZ2UgaW4gZmF2b3Igb2YgcHJldmlvdXNcclxuXHRcdFx0dGhpcy5fdHJpZ2dlcldpdGhEZXByZWNhdGVkKCBwcmVmaXggKyBcInNob3dcIiwge1xyXG5cdFx0XHRcdHByZXZQYWdlOiBmcm9tIHx8ICQoIFwiXCIgKSxcclxuXHRcdFx0XHR0b1BhZ2U6IHRvXHJcblx0XHRcdH0sIHRvICk7XHJcblx0XHR9LFxyXG5cclxuXHRcdC8vIFRPRE8gbWFrZSBwcml2YXRlIG9uY2UgY2hhbmdlIGhhcyBiZWVuIGRlZmluZWQgaW4gdGhlIHdpZGdldFxyXG5cdFx0X2Nzc1RyYW5zaXRpb246IGZ1bmN0aW9uKCB0bywgZnJvbSwgb3B0aW9ucyApIHtcclxuXHRcdFx0dmFyIHRyYW5zaXRpb24gPSBvcHRpb25zLnRyYW5zaXRpb24sXHJcblx0XHRcdFx0cmV2ZXJzZSA9IG9wdGlvbnMucmV2ZXJzZSxcclxuXHRcdFx0XHRkZWZlcnJlZCA9IG9wdGlvbnMuZGVmZXJyZWQsXHJcblx0XHRcdFx0VHJhbnNpdGlvbkhhbmRsZXIsXHJcblx0XHRcdFx0cHJvbWlzZTtcclxuXHJcblx0XHRcdHRoaXMuX3RyaWdnZXJDc3NUcmFuc2l0aW9uRXZlbnRzKCB0bywgZnJvbSwgXCJiZWZvcmVcIiApO1xyXG5cclxuXHRcdFx0Ly8gVE9ETyBwdXQgdGhpcyBpbiBhIGJpbmRpbmcgdG8gZXZlbnRzICpvdXRzaWRlKiB0aGUgd2lkZ2V0XHJcblx0XHRcdHRoaXMuX2hpZGVMb2FkaW5nKCk7XHJcblxyXG5cdFx0XHRUcmFuc2l0aW9uSGFuZGxlciA9IHRoaXMuX2dldFRyYW5zaXRpb25IYW5kbGVyKCB0cmFuc2l0aW9uICk7XHJcblxyXG5cdFx0XHRwcm9taXNlID0gKCBuZXcgVHJhbnNpdGlvbkhhbmRsZXIoIHRyYW5zaXRpb24sIHJldmVyc2UsIHRvLCBmcm9tICkgKS50cmFuc2l0aW9uKCk7XHJcblxyXG5cdFx0XHRwcm9taXNlLmRvbmUoICQucHJveHkoIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHRoaXMuX3RyaWdnZXJDc3NUcmFuc2l0aW9uRXZlbnRzKCB0bywgZnJvbSApO1xyXG5cdFx0XHR9LCB0aGlzICkpO1xyXG5cclxuXHRcdFx0Ly8gVE9ETyB0ZW1wb3JhcnkgYWNjb21vZGF0aW9uIG9mIGFyZ3VtZW50IGRlZmVycmVkXHJcblx0XHRcdHByb21pc2UuZG9uZShmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRkZWZlcnJlZC5yZXNvbHZlLmFwcGx5KCBkZWZlcnJlZCwgYXJndW1lbnRzICk7XHJcblx0XHRcdH0pO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfcmVsZWFzZVRyYW5zaXRpb25Mb2NrOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0Ly9yZWxlYXNlIHRyYW5zaXRpb24gbG9jayBzbyBuYXZpZ2F0aW9uIGlzIGZyZWUgYWdhaW5cclxuXHRcdFx0aXNQYWdlVHJhbnNpdGlvbmluZyA9IGZhbHNlO1xyXG5cdFx0XHRpZiAoIHBhZ2VUcmFuc2l0aW9uUXVldWUubGVuZ3RoID4gMCApIHtcclxuXHRcdFx0XHQkLm1vYmlsZS5jaGFuZ2VQYWdlLmFwcGx5KCBudWxsLCBwYWdlVHJhbnNpdGlvblF1ZXVlLnBvcCgpICk7XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblxyXG5cdFx0X3JlbW92ZUFjdGl2ZUxpbmtDbGFzczogZnVuY3Rpb24oIGZvcmNlICkge1xyXG5cdFx0XHQvL2NsZWFyIG91dCB0aGUgYWN0aXZlIGJ1dHRvbiBzdGF0ZVxyXG5cdFx0XHQkLm1vYmlsZS5yZW1vdmVBY3RpdmVMaW5rQ2xhc3MoIGZvcmNlICk7XHJcblx0XHR9LFxyXG5cclxuXHRcdF9sb2FkVXJsOiBmdW5jdGlvbiggdG8sIHRyaWdnZXJEYXRhLCBzZXR0aW5ncyApIHtcclxuXHRcdFx0Ly8gcHJlc2VydmUgdGhlIG9yaWdpbmFsIHRhcmdldCBhcyB0aGUgZGF0YVVybCB2YWx1ZSB3aWxsIGJlXHJcblx0XHRcdC8vIHNpbXBsaWZpZWQgZWcsIHJlbW92aW5nIHVpLXN0YXRlLCBhbmQgcmVtb3ZpbmcgcXVlcnkgcGFyYW1zXHJcblx0XHRcdC8vIGZyb20gdGhlIGhhc2ggdGhpcyBpcyBzbyB0aGF0IHVzZXJzIHdobyB3YW50IHRvIHVzZSBxdWVyeVxyXG5cdFx0XHQvLyBwYXJhbXMgaGF2ZSBhY2Nlc3MgdG8gdGhlbSBpbiB0aGUgZXZlbnQgYmluZGluZ3MgZm9yIHRoZSBwYWdlXHJcblx0XHRcdC8vIGxpZmUgY3ljbGUgU2VlIGlzc3VlICM1MDg1XHJcblx0XHRcdHNldHRpbmdzLnRhcmdldCA9IHRvO1xyXG5cdFx0XHRzZXR0aW5ncy5kZWZlcnJlZCA9ICQuRGVmZXJyZWQoKTtcclxuXHJcblx0XHRcdHRoaXMubG9hZCggdG8sIHNldHRpbmdzICk7XHJcblxyXG5cdFx0XHRzZXR0aW5ncy5kZWZlcnJlZC5kb25lKCQucHJveHkoZnVuY3Rpb24oIHVybCwgb3B0aW9ucywgY29udGVudCApIHtcclxuXHRcdFx0XHRpc1BhZ2VUcmFuc2l0aW9uaW5nID0gZmFsc2U7XHJcblxyXG5cdFx0XHRcdC8vIHN0b3JlIHRoZSBvcmlnaW5hbCBhYnNvbHV0ZSB1cmwgc28gdGhhdCBpdCBjYW4gYmUgcHJvdmlkZWRcclxuXHRcdFx0XHQvLyB0byBldmVudHMgaW4gdGhlIHRyaWdnZXJEYXRhIG9mIHRoZSBzdWJzZXF1ZW50IGNoYW5nZVBhZ2UgY2FsbFxyXG5cdFx0XHRcdG9wdGlvbnMuYWJzVXJsID0gdHJpZ2dlckRhdGEuYWJzVXJsO1xyXG5cclxuXHRcdFx0XHR0aGlzLnRyYW5zaXRpb24oIGNvbnRlbnQsIHRyaWdnZXJEYXRhLCBvcHRpb25zICk7XHJcblx0XHRcdH0sIHRoaXMpKTtcclxuXHJcblx0XHRcdHNldHRpbmdzLmRlZmVycmVkLmZhaWwoJC5wcm94eShmdW5jdGlvbigvKiB1cmwsIG9wdGlvbnMgKi8pIHtcclxuXHRcdFx0XHR0aGlzLl9yZW1vdmVBY3RpdmVMaW5rQ2xhc3MoIHRydWUgKTtcclxuXHRcdFx0XHR0aGlzLl9yZWxlYXNlVHJhbnNpdGlvbkxvY2soKTtcclxuXHRcdFx0XHR0aGlzLl90cmlnZ2VyV2l0aERlcHJlY2F0ZWQoIFwiY2hhbmdlZmFpbGVkXCIsIHRyaWdnZXJEYXRhICk7XHJcblx0XHRcdH0sIHRoaXMpKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0X3RyaWdnZXJQYWdlQmVmb3JlQ2hhbmdlOiBmdW5jdGlvbiggdG8sIHRyaWdnZXJEYXRhLCBzZXR0aW5ncyApIHtcclxuXHRcdFx0dmFyIHJldHVybkV2ZW50cztcclxuXHJcblx0XHRcdHRyaWdnZXJEYXRhLnByZXZQYWdlID0gdGhpcy5hY3RpdmVQYWdlO1xyXG5cdFx0XHQkLmV4dGVuZCggdHJpZ2dlckRhdGEsIHtcclxuXHRcdFx0XHR0b1BhZ2U6IHRvLFxyXG5cdFx0XHRcdG9wdGlvbnM6IHNldHRpbmdzXHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0Ly8gTk9URTogcHJlc2VydmUgdGhlIG9yaWdpbmFsIHRhcmdldCBhcyB0aGUgZGF0YVVybCB2YWx1ZSB3aWxsIGJlXHJcblx0XHRcdC8vIHNpbXBsaWZpZWQgZWcsIHJlbW92aW5nIHVpLXN0YXRlLCBhbmQgcmVtb3ZpbmcgcXVlcnkgcGFyYW1zIGZyb21cclxuXHRcdFx0Ly8gdGhlIGhhc2ggdGhpcyBpcyBzbyB0aGF0IHVzZXJzIHdobyB3YW50IHRvIHVzZSBxdWVyeSBwYXJhbXMgaGF2ZVxyXG5cdFx0XHQvLyBhY2Nlc3MgdG8gdGhlbSBpbiB0aGUgZXZlbnQgYmluZGluZ3MgZm9yIHRoZSBwYWdlIGxpZmUgY3ljbGVcclxuXHRcdFx0Ly8gU2VlIGlzc3VlICM1MDg1XHJcblx0XHRcdGlmICggJC50eXBlKHRvKSA9PT0gXCJzdHJpbmdcIiApIHtcclxuXHRcdFx0XHQvLyBpZiB0aGUgdG9QYWdlIGlzIGEgc3RyaW5nIHNpbXBseSBjb252ZXJ0IGl0XHJcblx0XHRcdFx0dHJpZ2dlckRhdGEuYWJzVXJsID0gJC5tb2JpbGUucGF0aC5tYWtlVXJsQWJzb2x1dGUoIHRvLCB0aGlzLl9maW5kQmFzZVdpdGhEZWZhdWx0KCkgKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHQvLyBpZiB0aGUgdG9QYWdlIGlzIGEgalF1ZXJ5IG9iamVjdCBncmFiIHRoZSBhYnNvbHV0ZSB1cmwgc3RvcmVkXHJcblx0XHRcdFx0Ly8gaW4gdGhlIGxvYWRQYWdlIGNhbGxiYWNrIHdoZXJlIGl0IGV4aXN0c1xyXG5cdFx0XHRcdHRyaWdnZXJEYXRhLmFic1VybCA9IHNldHRpbmdzLmFic1VybDtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gTGV0IGxpc3RlbmVycyBrbm93IHdlJ3JlIGFib3V0IHRvIGNoYW5nZSB0aGUgY3VycmVudCBwYWdlLlxyXG5cdFx0XHRyZXR1cm5FdmVudHMgPSB0aGlzLl90cmlnZ2VyV2l0aERlcHJlY2F0ZWQoIFwiYmVmb3JlY2hhbmdlXCIsIHRyaWdnZXJEYXRhICk7XHJcblxyXG5cdFx0XHQvLyBJZiB0aGUgZGVmYXVsdCBiZWhhdmlvciBpcyBwcmV2ZW50ZWQsIHN0b3AgaGVyZSFcclxuXHRcdFx0aWYgKCByZXR1cm5FdmVudHMuZXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkgfHxcclxuXHRcdFx0XHRyZXR1cm5FdmVudHMuZGVwcmVjYXRlZEV2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpICkge1xyXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHR9LFxyXG5cclxuXHRcdGNoYW5nZTogZnVuY3Rpb24oIHRvLCBvcHRpb25zICkge1xyXG5cdFx0XHQvLyBJZiB3ZSBhcmUgaW4gdGhlIG1pZHN0IG9mIGEgdHJhbnNpdGlvbiwgcXVldWUgdGhlIGN1cnJlbnQgcmVxdWVzdC5cclxuXHRcdFx0Ly8gV2UnbGwgY2FsbCBjaGFuZ2VQYWdlKCkgb25jZSB3ZSdyZSBkb25lIHdpdGggdGhlIGN1cnJlbnQgdHJhbnNpdGlvblxyXG5cdFx0XHQvLyB0byBzZXJ2aWNlIHRoZSByZXF1ZXN0LlxyXG5cdFx0XHRpZiAoIGlzUGFnZVRyYW5zaXRpb25pbmcgKSB7XHJcblx0XHRcdFx0cGFnZVRyYW5zaXRpb25RdWV1ZS51bnNoaWZ0KCBhcmd1bWVudHMgKTtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHZhciBzZXR0aW5ncyA9ICQuZXh0ZW5kKCB7fSwgJC5tb2JpbGUuY2hhbmdlUGFnZS5kZWZhdWx0cywgb3B0aW9ucyApLFxyXG5cdFx0XHRcdHRyaWdnZXJEYXRhID0ge307XHJcblxyXG5cdFx0XHQvLyBNYWtlIHN1cmUgd2UgaGF2ZSBhIGZyb21QYWdlLlxyXG5cdFx0XHRzZXR0aW5ncy5mcm9tUGFnZSA9IHNldHRpbmdzLmZyb21QYWdlIHx8IHRoaXMuYWN0aXZlUGFnZTtcclxuXHJcblx0XHRcdC8vIGlmIHRoZSBwYWdlIGJlZm9yZWNoYW5nZSBkZWZhdWx0IGlzIHByZXZlbnRlZCByZXR1cm4gZWFybHlcclxuXHRcdFx0aWYgKCAhdGhpcy5fdHJpZ2dlclBhZ2VCZWZvcmVDaGFuZ2UodG8sIHRyaWdnZXJEYXRhLCBzZXR0aW5ncykgKSB7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBXZSBhbGxvdyBcInBhZ2ViZWZvcmVjaGFuZ2VcIiBvYnNlcnZlcnMgdG8gbW9kaWZ5IHRoZSB0byBpblxyXG5cdFx0XHQvLyB0aGUgdHJpZ2dlciBkYXRhIHRvIGFsbG93IGZvciByZWRpcmVjdHMuIE1ha2Ugc3VyZSBvdXIgdG8gaXNcclxuXHRcdFx0Ly8gdXBkYXRlZC4gV2UgYWxzbyBuZWVkIHRvIHJlLWV2YWx1YXRlIHdoZXRoZXIgaXQgaXMgYSBzdHJpbmcsXHJcblx0XHRcdC8vIGJlY2F1c2UgYW4gb2JqZWN0IGNhbiBhbHNvIGJlIHJlcGxhY2VkIGJ5IGEgc3RyaW5nXHJcblx0XHRcdHRvID0gdHJpZ2dlckRhdGEudG9QYWdlO1xyXG5cclxuXHRcdFx0Ly8gSWYgdGhlIGNhbGxlciBwYXNzZWQgdXMgYSB1cmwsIGNhbGwgbG9hZFBhZ2UoKVxyXG5cdFx0XHQvLyB0byBtYWtlIHN1cmUgaXQgaXMgbG9hZGVkIGludG8gdGhlIERPTS4gV2UnbGwgbGlzdGVuXHJcblx0XHRcdC8vIHRvIHRoZSBwcm9taXNlIG9iamVjdCBpdCByZXR1cm5zIHNvIHdlIGtub3cgd2hlblxyXG5cdFx0XHQvLyBpdCBpcyBkb25lIGxvYWRpbmcgb3IgaWYgYW4gZXJyb3Igb2N1cnJlZC5cclxuXHRcdFx0aWYgKCAkLnR5cGUodG8pID09PSBcInN0cmluZ1wiICkge1xyXG5cdFx0XHRcdC8vIFNldCB0aGUgaXNQYWdlVHJhbnNpdGlvbmluZyBmbGFnIHRvIHByZXZlbnQgYW55IHJlcXVlc3RzIGZyb21cclxuXHRcdFx0XHQvLyBlbnRlcmluZyB0aGlzIG1ldGhvZCB3aGlsZSB3ZSBhcmUgaW4gdGhlIG1pZHN0IG9mIGxvYWRpbmcgYSBwYWdlXHJcblx0XHRcdFx0Ly8gb3IgdHJhbnNpdGlvbmluZy5cclxuXHRcdFx0XHRpc1BhZ2VUcmFuc2l0aW9uaW5nID0gdHJ1ZTtcclxuXHJcblx0XHRcdFx0dGhpcy5fbG9hZFVybCggdG8sIHRyaWdnZXJEYXRhLCBzZXR0aW5ncyApO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdHRoaXMudHJhbnNpdGlvbiggdG8sIHRyaWdnZXJEYXRhLCBzZXR0aW5ncyApO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cclxuXHRcdHRyYW5zaXRpb246IGZ1bmN0aW9uKCB0b1BhZ2UsIHRyaWdnZXJEYXRhLCBzZXR0aW5ncyApIHtcclxuXHRcdFx0dmFyIGZyb21QYWdlLCB1cmwsIHBhZ2VVcmwsIGZpbGVVcmwsXHJcblx0XHRcdFx0YWN0aXZlLCBhY3RpdmVJc0luaXRpYWxQYWdlLFxyXG5cdFx0XHRcdGhpc3RvcnlEaXIsIHBhZ2VUaXRsZSwgaXNEaWFsb2csXHJcblx0XHRcdFx0YWxyZWFkeVRoZXJlLCBuZXdQYWdlVGl0bGUsXHJcblx0XHRcdFx0cGFyYW1zLFx0Y3NzVHJhbnNpdGlvbkRlZmVycmVkLFxyXG5cdFx0XHRcdGJlZm9yZVRyYW5zaXRpb247XHJcblxyXG5cdFx0XHQvLyBJZiB3ZSBhcmUgaW4gdGhlIG1pZHN0IG9mIGEgdHJhbnNpdGlvbiwgcXVldWUgdGhlIGN1cnJlbnQgcmVxdWVzdC5cclxuXHRcdFx0Ly8gV2UnbGwgY2FsbCBjaGFuZ2VQYWdlKCkgb25jZSB3ZSdyZSBkb25lIHdpdGggdGhlIGN1cnJlbnQgdHJhbnNpdGlvblxyXG5cdFx0XHQvLyB0byBzZXJ2aWNlIHRoZSByZXF1ZXN0LlxyXG5cdFx0XHRpZiAoIGlzUGFnZVRyYW5zaXRpb25pbmcgKSB7XHJcblx0XHRcdFx0Ly8gbWFrZSBzdXJlIHRvIG9ubHkgcXVldWUgdGhlIHRvIGFuZCBzZXR0aW5ncyB2YWx1ZXMgc28gdGhlIGFyZ3VtZW50c1xyXG5cdFx0XHRcdC8vIHdvcmsgd2l0aCBhIGNhbGwgdG8gdGhlIGNoYW5nZSBtZXRob2RcclxuXHRcdFx0XHRwYWdlVHJhbnNpdGlvblF1ZXVlLnVuc2hpZnQoIFt0b1BhZ2UsIHNldHRpbmdzXSApO1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gREVQUkVDQVRFRCAtIHRoaXMgY2FsbCBvbmx5LCBpbiBmYXZvciBvZiB0aGUgYmVmb3JlIHRyYW5zaXRpb25cclxuXHRcdFx0Ly8gaWYgdGhlIHBhZ2UgYmVmb3JlY2hhbmdlIGRlZmF1bHQgaXMgcHJldmVudGVkIHJldHVybiBlYXJseVxyXG5cdFx0XHRpZiAoICF0aGlzLl90cmlnZ2VyUGFnZUJlZm9yZUNoYW5nZSh0b1BhZ2UsIHRyaWdnZXJEYXRhLCBzZXR0aW5ncykgKSB7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHR0cmlnZ2VyRGF0YS5wcmV2UGFnZSA9IHNldHRpbmdzLmZyb21QYWdlO1xyXG5cdFx0XHQvLyBpZiB0aGUgKGNvbnRlbnR8cGFnZSliZWZvcmV0cmFuc2l0aW9uIGRlZmF1bHQgaXMgcHJldmVudGVkIHJldHVybiBlYXJseVxyXG5cdFx0XHQvLyBOb3RlLCB3ZSBoYXZlIHRvIGNoZWNrIGZvciBib3RoIHRoZSBkZXByZWNhdGVkIGFuZCBuZXcgZXZlbnRzXHJcblx0XHRcdGJlZm9yZVRyYW5zaXRpb24gPSB0aGlzLl90cmlnZ2VyV2l0aERlcHJlY2F0ZWQoIFwiYmVmb3JldHJhbnNpdGlvblwiLCB0cmlnZ2VyRGF0YSApO1xyXG5cdFx0XHRpZiAoYmVmb3JlVHJhbnNpdGlvbi5kZXByZWNhdGVkRXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkgfHxcclxuXHRcdFx0XHRiZWZvcmVUcmFuc2l0aW9uLmV2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpICkge1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gU2V0IHRoZSBpc1BhZ2VUcmFuc2l0aW9uaW5nIGZsYWcgdG8gcHJldmVudCBhbnkgcmVxdWVzdHMgZnJvbVxyXG5cdFx0XHQvLyBlbnRlcmluZyB0aGlzIG1ldGhvZCB3aGlsZSB3ZSBhcmUgaW4gdGhlIG1pZHN0IG9mIGxvYWRpbmcgYSBwYWdlXHJcblx0XHRcdC8vIG9yIHRyYW5zaXRpb25pbmcuXHJcblx0XHRcdGlzUGFnZVRyYW5zaXRpb25pbmcgPSB0cnVlO1xyXG5cclxuXHRcdFx0Ly8gSWYgd2UgYXJlIGdvaW5nIHRvIHRoZSBmaXJzdC1wYWdlIG9mIHRoZSBhcHBsaWNhdGlvbiwgd2UgbmVlZCB0byBtYWtlXHJcblx0XHRcdC8vIHN1cmUgc2V0dGluZ3MuZGF0YVVybCBpcyBzZXQgdG8gdGhlIGFwcGxpY2F0aW9uIGRvY3VtZW50IHVybC4gVGhpcyBhbGxvd3NcclxuXHRcdFx0Ly8gdXMgdG8gYXZvaWQgZ2VuZXJhdGluZyBhIGRvY3VtZW50IHVybCB3aXRoIGFuIGlkIGhhc2ggaW4gdGhlIGNhc2Ugd2hlcmUgdGhlXHJcblx0XHRcdC8vIGZpcnN0LXBhZ2Ugb2YgdGhlIGRvY3VtZW50IGhhcyBhbiBpZCBhdHRyaWJ1dGUgc3BlY2lmaWVkLlxyXG5cdFx0XHRpZiAoIHRvUGFnZVsgMCBdID09PSAkLm1vYmlsZS5maXJzdFBhZ2VbIDAgXSAmJiAhc2V0dGluZ3MuZGF0YVVybCApIHtcclxuXHRcdFx0XHRzZXR0aW5ncy5kYXRhVXJsID0gJC5tb2JpbGUucGF0aC5kb2N1bWVudFVybC5ocmVmTm9IYXNoO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBUaGUgY2FsbGVyIHBhc3NlZCB1cyBhIHJlYWwgcGFnZSBET00gZWxlbWVudC4gVXBkYXRlIG91clxyXG5cdFx0XHQvLyBpbnRlcm5hbCBzdGF0ZSBhbmQgdGhlbiB0cmlnZ2VyIGEgdHJhbnNpdGlvbiB0byB0aGUgcGFnZS5cclxuXHRcdFx0ZnJvbVBhZ2UgPSBzZXR0aW5ncy5mcm9tUGFnZTtcclxuXHRcdFx0dXJsID0gKCBzZXR0aW5ncy5kYXRhVXJsICYmICQubW9iaWxlLnBhdGguY29udmVydFVybFRvRGF0YVVybChzZXR0aW5ncy5kYXRhVXJsKSApIHx8XHJcblx0XHRcdFx0dG9QYWdlLmpxbURhdGEoIFwidXJsXCIgKTtcclxuXHJcblx0XHRcdC8vIFRoZSBwYWdlVXJsIHZhciBpcyB1c3VhbGx5IHRoZSBzYW1lIGFzIHVybCwgZXhjZXB0IHdoZW4gdXJsIGlzIG9ic2N1cmVkXHJcblx0XHRcdC8vIGFzIGEgZGlhbG9nIHVybC4gcGFnZVVybCBhbHdheXMgY29udGFpbnMgdGhlIGZpbGUgcGF0aFxyXG5cdFx0XHRwYWdlVXJsID0gdXJsO1xyXG5cdFx0XHRmaWxlVXJsID0gJC5tb2JpbGUucGF0aC5nZXRGaWxlUGF0aCggdXJsICk7XHJcblx0XHRcdGFjdGl2ZSA9ICQubW9iaWxlLm5hdmlnYXRlLmhpc3RvcnkuZ2V0QWN0aXZlKCk7XHJcblx0XHRcdGFjdGl2ZUlzSW5pdGlhbFBhZ2UgPSAkLm1vYmlsZS5uYXZpZ2F0ZS5oaXN0b3J5LmFjdGl2ZUluZGV4ID09PSAwO1xyXG5cdFx0XHRoaXN0b3J5RGlyID0gMDtcclxuXHRcdFx0cGFnZVRpdGxlID0gZG9jdW1lbnQudGl0bGU7XHJcblx0XHRcdGlzRGlhbG9nID0gKCBzZXR0aW5ncy5yb2xlID09PSBcImRpYWxvZ1wiIHx8XHJcblx0XHRcdFx0dG9QYWdlLmpxbURhdGEoIFwicm9sZVwiICkgPT09IFwiZGlhbG9nXCIgKSAmJlxyXG5cdFx0XHRcdHRvUGFnZS5qcW1EYXRhKCBcImRpYWxvZ1wiICkgIT09IHRydWU7XHJcblxyXG5cdFx0XHQvLyBCeSBkZWZhdWx0LCB3ZSBwcmV2ZW50IGNoYW5nZVBhZ2UgcmVxdWVzdHMgd2hlbiB0aGUgZnJvbVBhZ2UgYW5kIHRvUGFnZVxyXG5cdFx0XHQvLyBhcmUgdGhlIHNhbWUgZWxlbWVudCwgYnV0IGZvbGtzIHRoYXQgZ2VuZXJhdGUgY29udGVudFxyXG5cdFx0XHQvLyBtYW51YWxseS9keW5hbWljYWxseSBhbmQgcmV1c2UgcGFnZXMgd2FudCB0byBiZSBhYmxlIHRvIHRyYW5zaXRpb24gdG9cclxuXHRcdFx0Ly8gdGhlIHNhbWUgcGFnZS4gVG8gYWxsb3cgdGhpcywgdGhleSB3aWxsIG5lZWQgdG8gY2hhbmdlIHRoZSBkZWZhdWx0XHJcblx0XHRcdC8vIHZhbHVlIG9mIGFsbG93U2FtZVBhZ2VUcmFuc2l0aW9uIHRvIHRydWUsICpPUiosIHBhc3MgaXQgaW4gYXMgYW5cclxuXHRcdFx0Ly8gb3B0aW9uIHdoZW4gdGhleSBtYW51YWxseSBjYWxsIGNoYW5nZVBhZ2UoKS4gSXQgc2hvdWxkIGJlIG5vdGVkIHRoYXRcclxuXHRcdFx0Ly8gb3VyIGRlZmF1bHQgdHJhbnNpdGlvbiBhbmltYXRpb25zIGFzc3VtZSB0aGF0IHRoZSBmb3JtUGFnZSBhbmQgdG9QYWdlXHJcblx0XHRcdC8vIGFyZSBkaWZmZXJlbnQgZWxlbWVudHMsIHNvIHRoZXkgbWF5IGJlaGF2ZSB1bmV4cGVjdGVkbHkuIEl0IGlzIHVwIHRvXHJcblx0XHRcdC8vIHRoZSBkZXZlbG9wZXIgdGhhdCB0dXJucyBvbiB0aGUgYWxsb3dTYW1lUGFnZVRyYW5zaXRpb25hIG9wdGlvbiB0b1xyXG5cdFx0XHQvLyBlaXRoZXIgdHVybiBvZmYgdHJhbnNpdGlvbiBhbmltYXRpb25zLCBvciBtYWtlIHN1cmUgdGhhdCBhbiBhcHByb3ByaWF0ZVxyXG5cdFx0XHQvLyBhbmltYXRpb24gdHJhbnNpdGlvbiBpcyB1c2VkLlxyXG5cdFx0XHRpZiAoIGZyb21QYWdlICYmIGZyb21QYWdlWzBdID09PSB0b1BhZ2VbMF0gJiZcclxuXHRcdFx0XHQhc2V0dGluZ3MuYWxsb3dTYW1lUGFnZVRyYW5zaXRpb24gKSB7XHJcblxyXG5cdFx0XHRcdGlzUGFnZVRyYW5zaXRpb25pbmcgPSBmYWxzZTtcclxuXHRcdFx0XHR0aGlzLl90cmlnZ2VyV2l0aERlcHJlY2F0ZWQoIFwidHJhbnNpdGlvblwiLCB0cmlnZ2VyRGF0YSApO1xyXG5cdFx0XHRcdHRoaXMuX3RyaWdnZXJXaXRoRGVwcmVjYXRlZCggXCJjaGFuZ2VcIiwgdHJpZ2dlckRhdGEgKTtcclxuXHJcblx0XHRcdFx0Ly8gRXZlbiBpZiB0aGVyZSBpcyBubyBwYWdlIGNoYW5nZSB0byBiZSBkb25lLCB3ZSBzaG91bGQga2VlcCB0aGVcclxuXHRcdFx0XHQvLyB1cmxIaXN0b3J5IGluIHN5bmMgd2l0aCB0aGUgaGFzaCBjaGFuZ2VzXHJcblx0XHRcdFx0aWYgKCBzZXR0aW5ncy5mcm9tSGFzaENoYW5nZSApIHtcclxuXHRcdFx0XHRcdCQubW9iaWxlLm5hdmlnYXRlLmhpc3RvcnkuZGlyZWN0KHsgdXJsOiB1cmwgfSk7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIFdlIG5lZWQgdG8gbWFrZSBzdXJlIHRoZSBwYWdlIHdlIGFyZSBnaXZlbiBoYXMgYWxyZWFkeSBiZWVuIGVuaGFuY2VkLlxyXG5cdFx0XHR0b1BhZ2UucGFnZSh7IHJvbGU6IHNldHRpbmdzLnJvbGUgfSk7XHJcblxyXG5cdFx0XHQvLyBJZiB0aGUgY2hhbmdlUGFnZSByZXF1ZXN0IHdhcyBzZW50IGZyb20gYSBoYXNoQ2hhbmdlIGV2ZW50LCBjaGVjayB0b1xyXG5cdFx0XHQvLyBzZWUgaWYgdGhlIHBhZ2UgaXMgYWxyZWFkeSB3aXRoaW4gdGhlIHVybEhpc3Rvcnkgc3RhY2suIElmIHNvLCB3ZSdsbFxyXG5cdFx0XHQvLyBhc3N1bWUgdGhlIHVzZXIgaGl0IHRoZSBmb3J3YXJkL2JhY2sgYnV0dG9uIGFuZCB3aWxsIHRyeSB0byBtYXRjaCB0aGVcclxuXHRcdFx0Ly8gdHJhbnNpdGlvbiBhY2NvcmRpbmdseS5cclxuXHRcdFx0aWYgKCBzZXR0aW5ncy5mcm9tSGFzaENoYW5nZSApIHtcclxuXHRcdFx0XHRoaXN0b3J5RGlyID0gc2V0dGluZ3MuZGlyZWN0aW9uID09PSBcImJhY2tcIiA/IC0xIDogMTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gS2lsbCB0aGUga2V5Ym9hcmQuXHJcblx0XHRcdC8vIFhYWF9qYmxhczogV2UgbmVlZCB0byBzdG9wIGNyYXdsaW5nIHRoZSBlbnRpcmUgZG9jdW1lbnQgdG8ga2lsbCBmb2N1cy5cclxuXHRcdFx0Ly8gICAgICAgICAgICBJbnN0ZWFkLCB3ZSBzaG91bGQgYmUgdHJhY2tpbmcgZm9jdXMgd2l0aCBhIGRlbGVnYXRlKClcclxuXHRcdFx0Ly8gICAgICAgICAgICBoYW5kbGVyIHNvIHdlIGFscmVhZHkgaGF2ZSB0aGUgZWxlbWVudCBpbiBoYW5kIGF0IHRoaXNcclxuXHRcdFx0Ly8gICAgICAgICAgICBwb2ludC5cclxuXHRcdFx0Ly8gV3JhcCB0aGlzIGluIGEgdHJ5L2NhdGNoIGJsb2NrIHNpbmNlIElFOSB0aHJvdyBcIlVuc3BlY2lmaWVkIGVycm9yXCIgaWZcclxuXHRcdFx0Ly8gZG9jdW1lbnQuYWN0aXZlRWxlbWVudCBpcyB1bmRlZmluZWQgd2hlbiB3ZSBhcmUgaW4gYW4gSUZyYW1lLlxyXG5cdFx0XHR0cnkge1xyXG5cdFx0XHRcdGlmICggZG9jdW1lbnQuYWN0aXZlRWxlbWVudCAmJlxyXG5cdFx0XHRcdFx0ZG9jdW1lbnQuYWN0aXZlRWxlbWVudC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpICE9PSBcImJvZHlcIiApIHtcclxuXHJcblx0XHRcdFx0XHQkKCBkb2N1bWVudC5hY3RpdmVFbGVtZW50ICkuYmx1cigpO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHQkKCBcImlucHV0OmZvY3VzLCB0ZXh0YXJlYTpmb2N1cywgc2VsZWN0OmZvY3VzXCIgKS5ibHVyKCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9IGNhdGNoKCBlICkge31cclxuXHJcblx0XHRcdC8vIFJlY29yZCB3aGV0aGVyIHdlIGFyZSBhdCBhIHBsYWNlIGluIGhpc3Rvcnkgd2hlcmUgYSBkaWFsb2cgdXNlZCB0byBiZSAtXHJcblx0XHRcdC8vIGlmIHNvLCBkbyBub3QgYWRkIGEgbmV3IGhpc3RvcnkgZW50cnkgYW5kIGRvIG5vdCBjaGFuZ2UgdGhlIGhhc2ggZWl0aGVyXHJcblx0XHRcdGFscmVhZHlUaGVyZSA9IGZhbHNlO1xyXG5cclxuXHRcdFx0Ly8gSWYgd2UncmUgZGlzcGxheWluZyB0aGUgcGFnZSBhcyBhIGRpYWxvZywgd2UgZG9uJ3Qgd2FudCB0aGUgdXJsXHJcblx0XHRcdC8vIGZvciB0aGUgZGlhbG9nIGNvbnRlbnQgdG8gYmUgdXNlZCBpbiB0aGUgaGFzaC4gSW5zdGVhZCwgd2Ugd2FudFxyXG5cdFx0XHQvLyB0byBhcHBlbmQgdGhlIGRpYWxvZ0hhc2hLZXkgdG8gdGhlIHVybCBvZiB0aGUgY3VycmVudCBwYWdlLlxyXG5cdFx0XHRpZiAoIGlzRGlhbG9nICYmIGFjdGl2ZSApIHtcclxuXHRcdFx0XHQvLyBvbiB0aGUgaW5pdGlhbCBwYWdlIGxvYWQgYWN0aXZlLnVybCBpcyB1bmRlZmluZWQgYW5kIGluIHRoYXQgY2FzZVxyXG5cdFx0XHRcdC8vIHNob3VsZCBiZSBhbiBlbXB0eSBzdHJpbmcuIE1vdmluZyB0aGUgdW5kZWZpbmVkIC0+IGVtcHR5IHN0cmluZyBiYWNrXHJcblx0XHRcdFx0Ly8gaW50byB1cmxIaXN0b3J5LmFkZE5ldyBzZWVtZWQgaW1wcnVkZW50IGdpdmVuIHVuZGVmaW5lZCBiZXR0ZXJcclxuXHRcdFx0XHQvLyByZXByZXNlbnRzIHRoZSB1cmwgc3RhdGVcclxuXHJcblx0XHRcdFx0Ly8gSWYgd2UgYXJlIGF0IGEgcGxhY2UgaW4gaGlzdG9yeSB0aGF0IG9uY2UgYmVsb25nZWQgdG8gYSBkaWFsb2csIHJldXNlXHJcblx0XHRcdFx0Ly8gdGhpcyBzdGF0ZSB3aXRob3V0IGFkZGluZyB0byB1cmxIaXN0b3J5IGFuZCB3aXRob3V0IG1vZGlmeWluZyB0aGVcclxuXHRcdFx0XHQvLyBoYXNoLiBIb3dldmVyLCBpZiBhIGRpYWxvZyBpcyBhbHJlYWR5IGRpc3BsYXllZCBhdCB0aGlzIHBvaW50LCBhbmRcclxuXHRcdFx0XHQvLyB3ZSdyZSBhYm91dCB0byBkaXNwbGF5IGFub3RoZXIgZGlhbG9nLCB0aGVuIHdlIG11c3QgYWRkIGFub3RoZXIgaGFzaFxyXG5cdFx0XHRcdC8vIGFuZCBoaXN0b3J5IGVudHJ5IG9uIHRvcCBzbyB0aGF0IG9uZSBtYXkgbmF2aWdhdGUgYmFjayB0byB0aGVcclxuXHRcdFx0XHQvLyBvcmlnaW5hbCBkaWFsb2dcclxuXHRcdFx0XHRpZiAoIGFjdGl2ZS51cmwgJiZcclxuXHRcdFx0XHRcdGFjdGl2ZS51cmwuaW5kZXhPZiggJC5tb2JpbGUuZGlhbG9nSGFzaEtleSApID4gLTEgJiZcclxuXHRcdFx0XHRcdHRoaXMuYWN0aXZlUGFnZSAmJlxyXG5cdFx0XHRcdFx0IXRoaXMuYWN0aXZlUGFnZS5oYXNDbGFzcyggXCJ1aS1kaWFsb2dcIiApICYmXHJcblx0XHRcdFx0XHQkLm1vYmlsZS5uYXZpZ2F0ZS5oaXN0b3J5LmFjdGl2ZUluZGV4ID4gMCApIHtcclxuXHJcblx0XHRcdFx0XHRzZXR0aW5ncy5jaGFuZ2VIYXNoID0gZmFsc2U7XHJcblx0XHRcdFx0XHRhbHJlYWR5VGhlcmUgPSB0cnVlO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Ly8gTm9ybWFsbHksIHdlIHRhY2sgb24gYSBkaWFsb2cgaGFzaCBrZXksIGJ1dCBpZiB0aGlzIGlzIHRoZSBsb2NhdGlvblxyXG5cdFx0XHRcdC8vIG9mIGEgc3RhbGUgZGlhbG9nLCB3ZSByZXVzZSB0aGUgVVJMIGZyb20gdGhlIGVudHJ5XHJcblx0XHRcdFx0dXJsID0gKCBhY3RpdmUudXJsIHx8IFwiXCIgKTtcclxuXHJcblx0XHRcdFx0Ly8gYWNjb3VudCBmb3IgYWJzb2x1dGUgdXJscyBpbnN0ZWFkIG9mIGp1c3QgcmVsYXRpdmUgdXJscyB1c2UgYXMgaGFzaGVzXHJcblx0XHRcdFx0aWYgKCAhYWxyZWFkeVRoZXJlICYmIHVybC5pbmRleE9mKFwiI1wiKSA+IC0xICkge1xyXG5cdFx0XHRcdFx0dXJsICs9ICQubW9iaWxlLmRpYWxvZ0hhc2hLZXk7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdHVybCArPSBcIiNcIiArICQubW9iaWxlLmRpYWxvZ0hhc2hLZXk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBpZiB0aXRsZSBlbGVtZW50IHdhc24ndCBmb3VuZCwgdHJ5IHRoZSBwYWdlIGRpdiBkYXRhIGF0dHIgdG9vXHJcblx0XHRcdC8vIElmIHRoaXMgaXMgYSBkZWVwLWxpbmsgb3IgYSByZWxvYWQgKCBhY3RpdmUgPT09IHVuZGVmaW5lZCApIHRoZW4ganVzdFxyXG5cdFx0XHQvLyB1c2UgcGFnZVRpdGxlXHJcblx0XHRcdG5ld1BhZ2VUaXRsZSA9ICggIWFjdGl2ZSApID8gcGFnZVRpdGxlIDogdG9QYWdlLmpxbURhdGEoIFwidGl0bGVcIiApIHx8XHJcblx0XHRcdFx0dG9QYWdlLmNoaWxkcmVuKCBcIjpqcW1EYXRhKHJvbGU9J2hlYWRlcicpXCIgKS5maW5kKCBcIi51aS10aXRsZVwiICkudGV4dCgpO1xyXG5cdFx0XHRpZiAoICEhbmV3UGFnZVRpdGxlICYmIHBhZ2VUaXRsZSA9PT0gZG9jdW1lbnQudGl0bGUgKSB7XHJcblx0XHRcdFx0cGFnZVRpdGxlID0gbmV3UGFnZVRpdGxlO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmICggIXRvUGFnZS5qcW1EYXRhKCBcInRpdGxlXCIgKSApIHtcclxuXHRcdFx0XHR0b1BhZ2UuanFtRGF0YSggXCJ0aXRsZVwiLCBwYWdlVGl0bGUgKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gTWFrZSBzdXJlIHdlIGhhdmUgYSB0cmFuc2l0aW9uIGRlZmluZWQuXHJcblx0XHRcdHNldHRpbmdzLnRyYW5zaXRpb24gPSBzZXR0aW5ncy50cmFuc2l0aW9uIHx8XHJcblx0XHRcdFx0KCAoIGhpc3RvcnlEaXIgJiYgIWFjdGl2ZUlzSW5pdGlhbFBhZ2UgKSA/IGFjdGl2ZS50cmFuc2l0aW9uIDogdW5kZWZpbmVkICkgfHxcclxuXHRcdFx0XHQoIGlzRGlhbG9nID8gJC5tb2JpbGUuZGVmYXVsdERpYWxvZ1RyYW5zaXRpb24gOiAkLm1vYmlsZS5kZWZhdWx0UGFnZVRyYW5zaXRpb24gKTtcclxuXHJcblx0XHRcdC8vYWRkIHBhZ2UgdG8gaGlzdG9yeSBzdGFjayBpZiBpdCdzIG5vdCBiYWNrIG9yIGZvcndhcmRcclxuXHRcdFx0aWYgKCAhaGlzdG9yeURpciAmJiBhbHJlYWR5VGhlcmUgKSB7XHJcblx0XHRcdFx0JC5tb2JpbGUubmF2aWdhdGUuaGlzdG9yeS5nZXRBY3RpdmUoKS5wYWdlVXJsID0gcGFnZVVybDtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gU2V0IHRoZSBsb2NhdGlvbiBoYXNoLlxyXG5cdFx0XHRpZiAoIHVybCAmJiAhc2V0dGluZ3MuZnJvbUhhc2hDaGFuZ2UgKSB7XHJcblxyXG5cdFx0XHRcdC8vIHJlYnVpbGRpbmcgdGhlIGhhc2ggaGVyZSBzaW5jZSB3ZSBsb29zZSBpdCBlYXJsaWVyIG9uXHJcblx0XHRcdFx0Ly8gVE9ETyBwcmVzZXJ2ZSB0aGUgb3JpZ2luYWxseSBwYXNzZWQgaW4gcGF0aFxyXG5cdFx0XHRcdGlmICggISQubW9iaWxlLnBhdGguaXNQYXRoKCB1cmwgKSAmJiB1cmwuaW5kZXhPZiggXCIjXCIgKSA8IDAgKSB7XHJcblx0XHRcdFx0XHR1cmwgPSBcIiNcIiArIHVybDtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdC8vIFRPRE8gdGhlIHByb3BlcnR5IG5hbWVzIGhlcmUgYXJlIGp1c3Qgc2lsbHlcclxuXHRcdFx0XHRwYXJhbXMgPSB7XHJcblx0XHRcdFx0XHR0cmFuc2l0aW9uOiBzZXR0aW5ncy50cmFuc2l0aW9uLFxyXG5cdFx0XHRcdFx0dGl0bGU6IHBhZ2VUaXRsZSxcclxuXHRcdFx0XHRcdHBhZ2VVcmw6IHBhZ2VVcmwsXHJcblx0XHRcdFx0XHRyb2xlOiBzZXR0aW5ncy5yb2xlXHJcblx0XHRcdFx0fTtcclxuXHJcblx0XHRcdFx0aWYgKCBzZXR0aW5ncy5jaGFuZ2VIYXNoICE9PSBmYWxzZSAmJiAkLm1vYmlsZS5oYXNoTGlzdGVuaW5nRW5hYmxlZCApIHtcclxuXHRcdFx0XHRcdCQubW9iaWxlLm5hdmlnYXRlKCB0aGlzLndpbmRvd1sgMCBdLmVuY29kZVVSSSggdXJsICksIHBhcmFtcywgdHJ1ZSk7XHJcblx0XHRcdFx0fSBlbHNlIGlmICggdG9QYWdlWyAwIF0gIT09ICQubW9iaWxlLmZpcnN0UGFnZVsgMCBdICkge1xyXG5cdFx0XHRcdFx0JC5tb2JpbGUubmF2aWdhdGUuaGlzdG9yeS5hZGQoIHVybCwgcGFyYW1zICk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvL3NldCBwYWdlIHRpdGxlXHJcblx0XHRcdGRvY3VtZW50LnRpdGxlID0gcGFnZVRpdGxlO1xyXG5cclxuXHRcdFx0Ly9zZXQgXCJ0b1BhZ2VcIiBhcyBhY3RpdmVQYWdlIGRlcHJlY2F0ZWQgaW4gMS40IHJlbW92ZSBpbiAxLjVcclxuXHRcdFx0JC5tb2JpbGUuYWN0aXZlUGFnZSA9IHRvUGFnZTtcclxuXHJcblx0XHRcdC8vbmV3IHdheSB0byBoYW5kbGUgYWN0aXZlUGFnZVxyXG5cdFx0XHR0aGlzLmFjdGl2ZVBhZ2UgPSB0b1BhZ2U7XHJcblxyXG5cdFx0XHQvLyBJZiB3ZSdyZSBuYXZpZ2F0aW5nIGJhY2sgaW4gdGhlIFVSTCBoaXN0b3J5LCBzZXQgcmV2ZXJzZSBhY2NvcmRpbmdseS5cclxuXHRcdFx0c2V0dGluZ3MucmV2ZXJzZSA9IHNldHRpbmdzLnJldmVyc2UgfHwgaGlzdG9yeURpciA8IDA7XHJcblxyXG5cdFx0XHRjc3NUcmFuc2l0aW9uRGVmZXJyZWQgPSAkLkRlZmVycmVkKCk7XHJcblxyXG5cdFx0XHR0aGlzLl9jc3NUcmFuc2l0aW9uKHRvUGFnZSwgZnJvbVBhZ2UsIHtcclxuXHRcdFx0XHR0cmFuc2l0aW9uOiBzZXR0aW5ncy50cmFuc2l0aW9uLFxyXG5cdFx0XHRcdHJldmVyc2U6IHNldHRpbmdzLnJldmVyc2UsXHJcblx0XHRcdFx0ZGVmZXJyZWQ6IGNzc1RyYW5zaXRpb25EZWZlcnJlZFxyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdGNzc1RyYW5zaXRpb25EZWZlcnJlZC5kb25lKCQucHJveHkoZnVuY3Rpb24oIG5hbWUsIHJldmVyc2UsICR0bywgJGZyb20sIGFscmVhZHlGb2N1c2VkICkge1xyXG5cdFx0XHRcdCQubW9iaWxlLnJlbW92ZUFjdGl2ZUxpbmtDbGFzcygpO1xyXG5cclxuXHRcdFx0XHQvL2lmIHRoZXJlJ3MgYSBkdXBsaWNhdGVDYWNoZWRQYWdlLCByZW1vdmUgaXQgZnJvbSB0aGUgRE9NIG5vdyB0aGF0IGl0J3MgaGlkZGVuXHJcblx0XHRcdFx0aWYgKCBzZXR0aW5ncy5kdXBsaWNhdGVDYWNoZWRQYWdlICkge1xyXG5cdFx0XHRcdFx0c2V0dGluZ3MuZHVwbGljYXRlQ2FjaGVkUGFnZS5yZW1vdmUoKTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdC8vIGRlc3BpdGUgdmlzaWJpbGl0eTogaGlkZGVuIGFkZHJlc3NlcyBpc3N1ZSAjMjk2NVxyXG5cdFx0XHRcdC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9qcXVlcnkvanF1ZXJ5LW1vYmlsZS9pc3N1ZXMvMjk2NVxyXG5cdFx0XHRcdGlmICggIWFscmVhZHlGb2N1c2VkICkge1xyXG5cdFx0XHRcdFx0JC5tb2JpbGUuZm9jdXNQYWdlKCB0b1BhZ2UgKTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdHRoaXMuX3JlbGVhc2VUcmFuc2l0aW9uTG9jaygpO1xyXG5cdFx0XHRcdHRoaXMuX3RyaWdnZXJXaXRoRGVwcmVjYXRlZCggXCJ0cmFuc2l0aW9uXCIsIHRyaWdnZXJEYXRhICk7XHJcblx0XHRcdFx0dGhpcy5fdHJpZ2dlcldpdGhEZXByZWNhdGVkKCBcImNoYW5nZVwiLCB0cmlnZ2VyRGF0YSApO1xyXG5cdFx0XHR9LCB0aGlzKSk7XHJcblx0XHR9LFxyXG5cclxuXHRcdC8vIGRldGVybWluZSB0aGUgY3VycmVudCBiYXNlIHVybFxyXG5cdFx0X2ZpbmRCYXNlV2l0aERlZmF1bHQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR2YXIgY2xvc2VzdEJhc2UgPSAoIHRoaXMuYWN0aXZlUGFnZSAmJlxyXG5cdFx0XHQkLm1vYmlsZS5nZXRDbG9zZXN0QmFzZVVybCggdGhpcy5hY3RpdmVQYWdlICkgKTtcclxuXHRcdHJldHVybiBjbG9zZXN0QmFzZSB8fCAkLm1vYmlsZS5wYXRoLmRvY3VtZW50QmFzZS5ocmVmTm9IYXNoO1xyXG5cdFx0fVxyXG5cdH0pO1xyXG5cclxuXHQvLyBUaGUgZm9sbG93aW5nIGhhbmRsZXJzIHNob3VsZCBiZSBib3VuZCBhZnRlciBtb2JpbGVpbml0IGhhcyBiZWVuIHRyaWdnZXJlZFxyXG5cdC8vIHRoZSBmb2xsb3dpbmcgZGVmZXJyZWQgaXMgcmVzb2x2ZWQgaW4gdGhlIGluaXQgZmlsZVxyXG5cdCQubW9iaWxlLm5hdnJlYWR5RGVmZXJyZWQgPSAkLkRlZmVycmVkKCk7XHJcblxyXG5cdC8vdGhlc2UgdmFyaWFibGVzIG1ha2UgYWxsIHBhZ2UgY29udGFpbmVycyB1c2UgdGhlIHNhbWUgcXVldWUgYW5kIG9ubHkgbmF2aWdhdGUgb25lIGF0IGEgdGltZVxyXG5cdC8vIHF1ZXVlIHRvIGhvbGQgc2ltdWx0YW5pb3VzIHBhZ2UgdHJhbnNpdGlvbnNcclxuXHR2YXIgcGFnZVRyYW5zaXRpb25RdWV1ZSA9IFtdLFxyXG5cclxuXHRcdC8vIGluZGljYXRlcyB3aGV0aGVyIG9yIG5vdCBwYWdlIGlzIGluIHByb2Nlc3Mgb2YgdHJhbnNpdGlvbmluZ1xyXG5cdFx0aXNQYWdlVHJhbnNpdGlvbmluZyA9IGZhbHNlO1xyXG5cclxufSkoIGpRdWVyeSApO1xyXG5cclxuKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7XHJcblxyXG5cdFx0Ly8gcmVzb2x2ZWQgb24gZG9tcmVhZHlcclxuXHR2YXIgZG9tcmVhZHlEZWZlcnJlZCA9ICQuRGVmZXJyZWQoKSxcclxuXHJcblx0XHQvLyByZXNvbHZlZCBhbmQgbnVsbGVkIG9uIHdpbmRvdy5sb2FkKClcclxuXHRcdGxvYWREZWZlcnJlZCA9ICQuRGVmZXJyZWQoKSxcclxuXHJcblx0XHQvLyBmdW5jdGlvbiB0aGF0IHJlc29sdmVzIHRoZSBhYm92ZSBkZWZlcnJlZFxyXG5cdFx0cGFnZUlzRnVsbHlMb2FkZWQgPSBmdW5jdGlvbigpIHtcclxuXHJcblx0XHRcdC8vIFJlc29sdmUgYW5kIG51bGwgdGhlIGRlZmVycmVkXHJcblx0XHRcdGxvYWREZWZlcnJlZC5yZXNvbHZlKCk7XHJcblx0XHRcdGxvYWREZWZlcnJlZCA9IG51bGw7XHJcblx0XHR9LFxyXG5cclxuXHRcdGRvY3VtZW50VXJsID0gJC5tb2JpbGUucGF0aC5kb2N1bWVudFVybCxcclxuXHJcblx0XHQvLyB1c2VkIHRvIHRyYWNrIGxhc3QgdmNsaWNrZWQgZWxlbWVudCB0byBtYWtlIHN1cmUgaXRzIHZhbHVlIGlzIGFkZGVkIHRvIGZvcm0gZGF0YVxyXG5cdFx0JGxhc3RWQ2xpY2tlZCA9IG51bGw7XHJcblxyXG5cdC8qIEV2ZW50IEJpbmRpbmdzIC0gaGFzaGNoYW5nZSwgc3VibWl0LCBhbmQgY2xpY2sgKi9cclxuXHRmdW5jdGlvbiBmaW5kQ2xvc2VzdExpbmsoIGVsZSApXHR7XHJcblx0XHR3aGlsZSAoIGVsZSApIHtcclxuXHRcdFx0Ly8gTG9vayBmb3IgdGhlIGNsb3Nlc3QgZWxlbWVudCB3aXRoIGEgbm9kZU5hbWUgb2YgXCJhXCIuXHJcblx0XHRcdC8vIE5vdGUgdGhhdCB3ZSBhcmUgY2hlY2tpbmcgaWYgd2UgaGF2ZSBhIHZhbGlkIG5vZGVOYW1lXHJcblx0XHRcdC8vIGJlZm9yZSBhdHRlbXB0aW5nIHRvIGFjY2VzcyBpdC4gVGhpcyBpcyBiZWNhdXNlIHRoZVxyXG5cdFx0XHQvLyBub2RlIHdlIGdldCBjYWxsZWQgd2l0aCBjb3VsZCBoYXZlIG9yaWdpbmF0ZWQgZnJvbSB3aXRoaW5cclxuXHRcdFx0Ly8gYW4gZW1iZWRkZWQgU1ZHIGRvY3VtZW50IHdoZXJlIHNvbWUgc3ltYm9sIGluc3RhbmNlIGVsZW1lbnRzXHJcblx0XHRcdC8vIGRvbid0IGhhdmUgbm9kZU5hbWUgZGVmaW5lZCBvbiB0aGVtLCBvciBzdHJpbmdzIGFyZSBvZiB0eXBlXHJcblx0XHRcdC8vIFNWR0FuaW1hdGVkU3RyaW5nLlxyXG5cdFx0XHRpZiAoICggdHlwZW9mIGVsZS5ub2RlTmFtZSA9PT0gXCJzdHJpbmdcIiApICYmIGVsZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09PSBcImFcIiApIHtcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdFx0fVxyXG5cdFx0XHRlbGUgPSBlbGUucGFyZW50Tm9kZTtcclxuXHRcdH1cclxuXHRcdHJldHVybiBlbGU7XHJcblx0fVxyXG5cclxuXHQkLm1vYmlsZS5sb2FkUGFnZSA9IGZ1bmN0aW9uKCB1cmwsIG9wdHMgKSB7XHJcblx0XHR2YXIgY29udGFpbmVyO1xyXG5cclxuXHRcdG9wdHMgPSBvcHRzIHx8IHt9O1xyXG5cdFx0Y29udGFpbmVyID0gKCBvcHRzLnBhZ2VDb250YWluZXIgfHwgJC5tb2JpbGUucGFnZUNvbnRhaW5lciApO1xyXG5cclxuXHRcdC8vIGNyZWF0ZSB0aGUgZGVmZXJyZWQgdGhhdCB3aWxsIGJlIHN1cHBsaWVkIHRvIGxvYWRQYWdlIGNhbGxlcnNcclxuXHRcdC8vIGFuZCByZXNvbHZlZCBieSB0aGUgY29udGVudCB3aWRnZXQncyBsb2FkIG1ldGhvZFxyXG5cdFx0b3B0cy5kZWZlcnJlZCA9ICQuRGVmZXJyZWQoKTtcclxuXHJcblx0XHQvLyBQcmVmZXJyaW5nIHRvIGFsbG93IGV4Y2VwdGlvbnMgZm9yIHVuaW5pdGlhbGl6ZWQgb3B0cy5wYWdlQ29udGFpbmVyXHJcblx0XHQvLyB3aWRnZXRzIHNvIHdlIGtub3cgaWYgd2UgbmVlZCB0byBmb3JjZSBpbml0IGhlcmUgZm9yIHVzZXJzXHJcblx0XHRjb250YWluZXIucGFnZWNvbnRhaW5lciggXCJsb2FkXCIsIHVybCwgb3B0cyApO1xyXG5cclxuXHRcdC8vIHByb3ZpZGUgdGhlIGRlZmVycmVkXHJcblx0XHRyZXR1cm4gb3B0cy5kZWZlcnJlZC5wcm9taXNlKCk7XHJcblx0fTtcclxuXHJcblx0Ly9kZWZpbmUgdmFycyBmb3IgaW50ZXJhbCB1c2VcclxuXHJcblx0LyogaW50ZXJuYWwgdXRpbGl0eSBmdW5jdGlvbnMgKi9cclxuXHJcblx0Ly8gTk9URSBJc3N1ZSAjNDk1MCBBbmRyb2lkIHBob25lZ2FwIGRvZXNuJ3QgbmF2aWdhdGUgYmFjayBwcm9wZXJseVxyXG5cdC8vICAgICAgd2hlbiBhIGZ1bGwgcGFnZSByZWZyZXNoIGhhcyB0YWtlbiBwbGFjZS4gSXQgYXBwZWFycyB0aGF0IGhhc2hjaGFuZ2VcclxuXHQvLyAgICAgIGFuZCByZXBsYWNlc3RhdGUgaGlzdG9yeSBhbHRlcmF0aW9ucyB3b3JrIGZpbmUgYnV0IHdlIG5lZWQgdG8gc3VwcG9ydFxyXG5cdC8vICAgICAgYm90aCBmb3JtcyBvZiBoaXN0b3J5IHRyYXZlcnNhbCBpbiBvdXIgY29kZSB0aGF0IHVzZXMgYmFja3dhcmQgaGlzdG9yeVxyXG5cdC8vICAgICAgbW92ZW1lbnRcclxuXHQkLm1vYmlsZS5iYWNrID0gZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgbmF2ID0gd2luZG93Lm5hdmlnYXRvcjtcclxuXHJcblx0XHQvLyBpZiB0aGUgc2V0dGluZyBpcyBvbiBhbmQgdGhlIG5hdmlnYXRvciBvYmplY3QgaXNcclxuXHRcdC8vIGF2YWlsYWJsZSB1c2UgdGhlIHBob25lZ2FwIG5hdmlnYXRpb24gY2FwYWJpbGl0eVxyXG5cdFx0aWYgKCB0aGlzLnBob25lZ2FwTmF2aWdhdGlvbkVuYWJsZWQgJiZcclxuXHRcdFx0bmF2ICYmXHJcblx0XHRcdG5hdi5hcHAgJiZcclxuXHRcdFx0bmF2LmFwcC5iYWNrSGlzdG9yeSApIHtcclxuXHRcdFx0bmF2LmFwcC5iYWNrSGlzdG9yeSgpO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0JC5tb2JpbGUucGFnZUNvbnRhaW5lci5wYWdlY29udGFpbmVyKCBcImJhY2tcIiApO1xyXG5cdFx0fVxyXG5cdH07XHJcblxyXG5cdC8vIERpcmVjdCBmb2N1cyB0byB0aGUgcGFnZSB0aXRsZSwgb3Igb3RoZXJ3aXNlIGZpcnN0IGZvY3VzYWJsZSBlbGVtZW50XHJcblx0JC5tb2JpbGUuZm9jdXNQYWdlID0gZnVuY3Rpb24gKCBwYWdlICkge1xyXG5cdFx0dmFyIGF1dG9mb2N1cyA9IHBhZ2UuZmluZCggXCJbYXV0b2ZvY3VzXVwiICksXHJcblx0XHRcdHBhZ2VUaXRsZSA9IHBhZ2UuZmluZCggXCIudWktdGl0bGU6ZXEoMClcIiApO1xyXG5cclxuXHRcdGlmICggYXV0b2ZvY3VzLmxlbmd0aCApIHtcclxuXHRcdFx0YXV0b2ZvY3VzLmZvY3VzKCk7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIHBhZ2VUaXRsZS5sZW5ndGggKSB7XHJcblx0XHRcdHBhZ2VUaXRsZS5mb2N1cygpO1xyXG5cdFx0fSBlbHNle1xyXG5cdFx0XHRwYWdlLmZvY3VzKCk7XHJcblx0XHR9XHJcblx0fTtcclxuXHJcblx0Ly8gTm8tb3AgaW1wbGVtZW50YXRpb24gb2YgdHJhbnNpdGlvbiBkZWdyYWRhdGlvblxyXG5cdCQubW9iaWxlLl9tYXliZURlZ3JhZGVUcmFuc2l0aW9uID0gJC5tb2JpbGUuX21heWJlRGVncmFkZVRyYW5zaXRpb24gfHwgZnVuY3Rpb24oIHRyYW5zaXRpb24gKSB7XHJcblx0XHRyZXR1cm4gdHJhbnNpdGlvbjtcclxuXHR9O1xyXG5cclxuXHQvLyBFeHBvc2VkICQubW9iaWxlIG1ldGhvZHNcclxuXHJcblx0JC5tb2JpbGUuY2hhbmdlUGFnZSA9IGZ1bmN0aW9uKCB0bywgb3B0aW9ucyApIHtcclxuXHRcdCQubW9iaWxlLnBhZ2VDb250YWluZXIucGFnZWNvbnRhaW5lciggXCJjaGFuZ2VcIiwgdG8sIG9wdGlvbnMgKTtcclxuXHR9O1xyXG5cclxuXHQkLm1vYmlsZS5jaGFuZ2VQYWdlLmRlZmF1bHRzID0ge1xyXG5cdFx0dHJhbnNpdGlvbjogdW5kZWZpbmVkLFxyXG5cdFx0cmV2ZXJzZTogZmFsc2UsXHJcblx0XHRjaGFuZ2VIYXNoOiB0cnVlLFxyXG5cdFx0ZnJvbUhhc2hDaGFuZ2U6IGZhbHNlLFxyXG5cdFx0cm9sZTogdW5kZWZpbmVkLCAvLyBCeSBkZWZhdWx0IHdlIHJlbHkgb24gdGhlIHJvbGUgZGVmaW5lZCBieSB0aGUgQGRhdGEtcm9sZSBhdHRyaWJ1dGUuXHJcblx0XHRkdXBsaWNhdGVDYWNoZWRQYWdlOiB1bmRlZmluZWQsXHJcblx0XHRwYWdlQ29udGFpbmVyOiB1bmRlZmluZWQsXHJcblx0XHRzaG93TG9hZE1zZzogdHJ1ZSwgLy9sb2FkaW5nIG1lc3NhZ2Ugc2hvd3MgYnkgZGVmYXVsdCB3aGVuIHBhZ2VzIGFyZSBiZWluZyBmZXRjaGVkIGR1cmluZyBjaGFuZ2VQYWdlXHJcblx0XHRkYXRhVXJsOiB1bmRlZmluZWQsXHJcblx0XHRmcm9tUGFnZTogdW5kZWZpbmVkLFxyXG5cdFx0YWxsb3dTYW1lUGFnZVRyYW5zaXRpb246IGZhbHNlXHJcblx0fTtcclxuXHJcblx0JC5tb2JpbGUuX3JlZ2lzdGVySW50ZXJuYWxFdmVudHMgPSBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBnZXRBamF4Rm9ybURhdGEgPSBmdW5jdGlvbiggJGZvcm0sIGNhbGN1bGF0ZU9ubHkgKSB7XHJcblx0XHRcdHZhciB1cmwsIHJldCA9IHRydWUsIGZvcm1EYXRhLCB2Y2xpY2tlZE5hbWUsIG1ldGhvZDtcclxuXHRcdFx0aWYgKCAhJC5tb2JpbGUuYWpheEVuYWJsZWQgfHxcclxuXHRcdFx0XHRcdC8vIHRlc3QgdGhhdCB0aGUgZm9ybSBpcywgaXRzZWxmLCBhamF4IGZhbHNlXHJcblx0XHRcdFx0XHQkZm9ybS5pcyggXCI6anFtRGF0YShhamF4PSdmYWxzZScpXCIgKSB8fFxyXG5cdFx0XHRcdFx0Ly8gdGVzdCB0aGF0ICQubW9iaWxlLmlnbm9yZUNvbnRlbnRFbmFibGVkIGlzIHNldCBhbmRcclxuXHRcdFx0XHRcdC8vIHRoZSBmb3JtIG9yIG9uZSBvZiBpdCdzIHBhcmVudHMgaXMgYWpheD1mYWxzZVxyXG5cdFx0XHRcdFx0ISRmb3JtLmpxbUhpamFja2FibGUoKS5sZW5ndGggfHxcclxuXHRcdFx0XHRcdCRmb3JtLmF0dHIoIFwidGFyZ2V0XCIgKSApIHtcclxuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHVybCA9ICggJGxhc3RWQ2xpY2tlZCAmJiAkbGFzdFZDbGlja2VkLmF0dHIoIFwiZm9ybWFjdGlvblwiICkgKSB8fFxyXG5cdFx0XHRcdCRmb3JtLmF0dHIoIFwiYWN0aW9uXCIgKTtcclxuXHRcdFx0bWV0aG9kID0gKCAkZm9ybS5hdHRyKCBcIm1ldGhvZFwiICkgfHwgXCJnZXRcIiApLnRvTG93ZXJDYXNlKCk7XHJcblxyXG5cdFx0XHQvLyBJZiBubyBhY3Rpb24gaXMgc3BlY2lmaWVkLCBicm93c2VycyBkZWZhdWx0IHRvIHVzaW5nIHRoZVxyXG5cdFx0XHQvLyBVUkwgb2YgdGhlIGRvY3VtZW50IGNvbnRhaW5pbmcgdGhlIGZvcm0uIFNpbmNlIHdlIGR5bmFtaWNhbGx5XHJcblx0XHRcdC8vIHB1bGwgaW4gcGFnZXMgZnJvbSBleHRlcm5hbCBkb2N1bWVudHMsIHRoZSBmb3JtIHNob3VsZCBzdWJtaXRcclxuXHRcdFx0Ly8gdG8gdGhlIFVSTCBmb3IgdGhlIHNvdXJjZSBkb2N1bWVudCBvZiB0aGUgcGFnZSBjb250YWluaW5nXHJcblx0XHRcdC8vIHRoZSBmb3JtLlxyXG5cdFx0XHRpZiAoICF1cmwgKSB7XHJcblx0XHRcdFx0Ly8gR2V0IHRoZSBAZGF0YS11cmwgZm9yIHRoZSBwYWdlIGNvbnRhaW5pbmcgdGhlIGZvcm0uXHJcblx0XHRcdFx0dXJsID0gJC5tb2JpbGUuZ2V0Q2xvc2VzdEJhc2VVcmwoICRmb3JtICk7XHJcblxyXG5cdFx0XHRcdC8vIE5PVEU6IElmIHRoZSBtZXRob2QgaXMgXCJnZXRcIiwgd2UgbmVlZCB0byBzdHJpcCBvZmYgdGhlIHF1ZXJ5IHN0cmluZ1xyXG5cdFx0XHRcdC8vIGJlY2F1c2UgaXQgd2lsbCBnZXQgcmVwbGFjZWQgd2l0aCB0aGUgbmV3IGZvcm0gZGF0YS4gU2VlIGlzc3VlICM1NzEwLlxyXG5cdFx0XHRcdGlmICggbWV0aG9kID09PSBcImdldFwiICkge1xyXG5cdFx0XHRcdFx0dXJsID0gJC5tb2JpbGUucGF0aC5wYXJzZVVybCggdXJsICkuaHJlZk5vU2VhcmNoO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0aWYgKCB1cmwgPT09ICQubW9iaWxlLnBhdGguZG9jdW1lbnRCYXNlLmhyZWZOb0hhc2ggKSB7XHJcblx0XHRcdFx0XHQvLyBUaGUgdXJsIHdlIGdvdCBiYWNrIG1hdGNoZXMgdGhlIGRvY3VtZW50IGJhc2UsXHJcblx0XHRcdFx0XHQvLyB3aGljaCBtZWFucyB0aGUgcGFnZSBtdXN0IGJlIGFuIGludGVybmFsL2VtYmVkZGVkIHBhZ2UsXHJcblx0XHRcdFx0XHQvLyBzbyBkZWZhdWx0IHRvIHVzaW5nIHRoZSBhY3R1YWwgZG9jdW1lbnQgdXJsIGFzIGEgYnJvd3NlclxyXG5cdFx0XHRcdFx0Ly8gd291bGQuXHJcblx0XHRcdFx0XHR1cmwgPSBkb2N1bWVudFVybC5ocmVmTm9TZWFyY2g7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHR1cmwgPSAkLm1vYmlsZS5wYXRoLm1ha2VVcmxBYnNvbHV0ZSggIHVybCwgJC5tb2JpbGUuZ2V0Q2xvc2VzdEJhc2VVcmwoICRmb3JtICkgKTtcclxuXHJcblx0XHRcdGlmICggKCAkLm1vYmlsZS5wYXRoLmlzRXh0ZXJuYWwoIHVybCApICYmICEkLm1vYmlsZS5wYXRoLmlzUGVybWl0dGVkQ3Jvc3NEb21haW5SZXF1ZXN0KCBkb2N1bWVudFVybCwgdXJsICkgKSApIHtcclxuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmICggIWNhbGN1bGF0ZU9ubHkgKSB7XHJcblx0XHRcdFx0Zm9ybURhdGEgPSAkZm9ybS5zZXJpYWxpemVBcnJheSgpO1xyXG5cclxuXHRcdFx0XHRpZiAoICRsYXN0VkNsaWNrZWQgJiYgJGxhc3RWQ2xpY2tlZFsgMCBdLmZvcm0gPT09ICRmb3JtWyAwIF0gKSB7XHJcblx0XHRcdFx0XHR2Y2xpY2tlZE5hbWUgPSAkbGFzdFZDbGlja2VkLmF0dHIoIFwibmFtZVwiICk7XHJcblx0XHRcdFx0XHRpZiAoIHZjbGlja2VkTmFtZSApIHtcclxuXHRcdFx0XHRcdFx0Ly8gTWFrZSBzdXJlIHRoZSBsYXN0IGNsaWNrZWQgZWxlbWVudCBpcyBpbmNsdWRlZCBpbiB0aGUgZm9ybVxyXG5cdFx0XHRcdFx0XHQkLmVhY2goIGZvcm1EYXRhLCBmdW5jdGlvbigga2V5LCB2YWx1ZSApIHtcclxuXHRcdFx0XHRcdFx0XHRpZiAoIHZhbHVlLm5hbWUgPT09IHZjbGlja2VkTmFtZSApIHtcclxuXHRcdFx0XHRcdFx0XHRcdC8vIFVuc2V0IHZjbGlja2VkTmFtZSAtIHdlJ3ZlIGZvdW5kIGl0IGluIHRoZSBzZXJpYWxpemVkIGRhdGEgYWxyZWFkeVxyXG5cdFx0XHRcdFx0XHRcdFx0dmNsaWNrZWROYW1lID0gXCJcIjtcclxuXHRcdFx0XHRcdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHRpZiAoIHZjbGlja2VkTmFtZSApIHtcclxuXHRcdFx0XHRcdFx0XHRmb3JtRGF0YS5wdXNoKCB7IG5hbWU6IHZjbGlja2VkTmFtZSwgdmFsdWU6ICRsYXN0VkNsaWNrZWQuYXR0ciggXCJ2YWx1ZVwiICkgfSApO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRyZXQgPSB7XHJcblx0XHRcdFx0XHR1cmw6IHVybCxcclxuXHRcdFx0XHRcdG9wdGlvbnM6IHtcclxuXHRcdFx0XHRcdFx0dHlwZTpcdFx0bWV0aG9kLFxyXG5cdFx0XHRcdFx0XHRkYXRhOlx0XHQkLnBhcmFtKCBmb3JtRGF0YSApLFxyXG5cdFx0XHRcdFx0XHR0cmFuc2l0aW9uOlx0JGZvcm0uanFtRGF0YSggXCJ0cmFuc2l0aW9uXCIgKSxcclxuXHRcdFx0XHRcdFx0cmV2ZXJzZTpcdCRmb3JtLmpxbURhdGEoIFwiZGlyZWN0aW9uXCIgKSA9PT0gXCJyZXZlcnNlXCIsXHJcblx0XHRcdFx0XHRcdHJlbG9hZFBhZ2U6XHR0cnVlXHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0cmV0dXJuIHJldDtcclxuXHRcdH07XHJcblxyXG5cdFx0Ly9iaW5kIHRvIGZvcm0gc3VibWl0IGV2ZW50cywgaGFuZGxlIHdpdGggQWpheFxyXG5cdFx0JC5tb2JpbGUuZG9jdW1lbnQuZGVsZWdhdGUoIFwiZm9ybVwiLCBcInN1Ym1pdFwiLCBmdW5jdGlvbiggZXZlbnQgKSB7XHJcblx0XHRcdHZhciBmb3JtRGF0YTtcclxuXHJcblx0XHRcdGlmICggIWV2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpICkge1xyXG5cdFx0XHRcdGZvcm1EYXRhID0gZ2V0QWpheEZvcm1EYXRhKCAkKCB0aGlzICkgKTtcclxuXHRcdFx0XHRpZiAoIGZvcm1EYXRhICkge1xyXG5cdFx0XHRcdFx0JC5tb2JpbGUuY2hhbmdlUGFnZSggZm9ybURhdGEudXJsLCBmb3JtRGF0YS5vcHRpb25zICk7XHJcblx0XHRcdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly9hZGQgYWN0aXZlIHN0YXRlIG9uIHZjbGlja1xyXG5cdFx0JC5tb2JpbGUuZG9jdW1lbnQuYmluZCggXCJ2Y2xpY2tcIiwgZnVuY3Rpb24oIGV2ZW50ICkge1xyXG5cdFx0XHR2YXIgJGJ0biwgYnRuRWxzLCB0YXJnZXQgPSBldmVudC50YXJnZXQsIG5lZWRDbG9zZXN0ID0gZmFsc2U7XHJcblx0XHRcdC8vIGlmIHRoaXMgaXNuJ3QgYSBsZWZ0IGNsaWNrIHdlIGRvbid0IGNhcmUuIEl0cyBpbXBvcnRhbnQgdG8gbm90ZVxyXG5cdFx0XHQvLyB0aGF0IHdoZW4gdGhlIHZpcnR1YWwgZXZlbnQgaXMgZ2VuZXJhdGVkIGl0IHdpbGwgY3JlYXRlIHRoZSB3aGljaCBhdHRyXHJcblx0XHRcdGlmICggZXZlbnQud2hpY2ggPiAxIHx8ICEkLm1vYmlsZS5saW5rQmluZGluZ0VuYWJsZWQgKSB7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBSZWNvcmQgdGhhdCB0aGlzIGVsZW1lbnQgd2FzIGNsaWNrZWQsIGluIGNhc2Ugd2UgbmVlZCBpdCBmb3IgY29ycmVjdFxyXG5cdFx0XHQvLyBmb3JtIHN1Ym1pc3Npb24gZHVyaW5nIHRoZSBcInN1Ym1pdFwiIGhhbmRsZXIgYWJvdmVcclxuXHRcdFx0JGxhc3RWQ2xpY2tlZCA9ICQoIHRhcmdldCApO1xyXG5cclxuXHRcdFx0Ly8gVHJ5IHRvIGZpbmQgYSB0YXJnZXQgZWxlbWVudCB0byB3aGljaCB0aGUgYWN0aXZlIGNsYXNzIHdpbGwgYmUgYXBwbGllZFxyXG5cdFx0XHRpZiAoICQuZGF0YSggdGFyZ2V0LCBcIm1vYmlsZS1idXR0b25cIiApICkge1xyXG5cdFx0XHRcdC8vIElmIHRoZSBmb3JtIHdpbGwgbm90IGJlIHN1Ym1pdHRlZCB2aWEgQUpBWCwgZG8gbm90IGFkZCBhY3RpdmUgY2xhc3NcclxuXHRcdFx0XHRpZiAoICFnZXRBamF4Rm9ybURhdGEoICQoIHRhcmdldCApLmNsb3Nlc3QoIFwiZm9ybVwiICksIHRydWUgKSApIHtcclxuXHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0Ly8gV2Ugd2lsbCBhcHBseSB0aGUgYWN0aXZlIHN0YXRlIHRvIHRoaXMgYnV0dG9uIHdpZGdldCAtIHRoZSBwYXJlbnRcclxuXHRcdFx0XHQvLyBvZiB0aGUgaW5wdXQgdGhhdCB3YXMgY2xpY2tlZCB3aWxsIGhhdmUgdGhlIGFzc29jaWF0ZWQgZGF0YVxyXG5cdFx0XHRcdGlmICggdGFyZ2V0LnBhcmVudE5vZGUgKSB7XHJcblx0XHRcdFx0XHR0YXJnZXQgPSB0YXJnZXQucGFyZW50Tm9kZTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0dGFyZ2V0ID0gZmluZENsb3Nlc3RMaW5rKCB0YXJnZXQgKTtcclxuXHRcdFx0XHRpZiAoICEoIHRhcmdldCAmJiAkLm1vYmlsZS5wYXRoLnBhcnNlVXJsKCB0YXJnZXQuZ2V0QXR0cmlidXRlKCBcImhyZWZcIiApIHx8IFwiI1wiICkuaGFzaCAhPT0gXCIjXCIgKSApIHtcclxuXHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdC8vIFRPRE8gdGVhY2ggJC5tb2JpbGUuaGlqYWNrYWJsZSB0byBvcGVyYXRlIG9uIHJhdyBkb20gZWxlbWVudHMgc28gdGhlXHJcblx0XHRcdFx0Ly8gbGluayB3cmFwcGluZyBjYW4gYmUgYXZvaWRlZFxyXG5cdFx0XHRcdGlmICggISQoIHRhcmdldCApLmpxbUhpamFja2FibGUoKS5sZW5ndGggKSB7XHJcblx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBBdm9pZCBjYWxsaW5nIC5jbG9zZXN0IGJ5IHVzaW5nIHRoZSBkYXRhIHNldCBkdXJpbmcgLmJ1dHRvbk1hcmt1cCgpXHJcblx0XHRcdC8vIExpc3QgaXRlbXMgaGF2ZSB0aGUgYnV0dG9uIGRhdGEgaW4gdGhlIHBhcmVudCBvZiB0aGUgZWxlbWVudCBjbGlja2VkXHJcblx0XHRcdGlmICggISF+dGFyZ2V0LmNsYXNzTmFtZS5pbmRleE9mKCBcInVpLWxpbmstaW5oZXJpdFwiICkgKSB7XHJcblx0XHRcdFx0aWYgKCB0YXJnZXQucGFyZW50Tm9kZSApIHtcclxuXHRcdFx0XHRcdGJ0bkVscyA9ICQuZGF0YSggdGFyZ2V0LnBhcmVudE5vZGUsIFwiYnV0dG9uRWxlbWVudHNcIiApO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0Ly8gT3RoZXJ3aXNlLCBsb29rIGZvciB0aGUgZGF0YSBvbiB0aGUgdGFyZ2V0IGl0c2VsZlxyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdGJ0bkVscyA9ICQuZGF0YSggdGFyZ2V0LCBcImJ1dHRvbkVsZW1lbnRzXCIgKTtcclxuXHRcdFx0fVxyXG5cdFx0XHQvLyBJZiBmb3VuZCwgZ3JhYiB0aGUgYnV0dG9uJ3Mgb3V0ZXIgZWxlbWVudFxyXG5cdFx0XHRpZiAoIGJ0bkVscyApIHtcclxuXHRcdFx0XHR0YXJnZXQgPSBidG5FbHMub3V0ZXI7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0bmVlZENsb3Nlc3QgPSB0cnVlO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQkYnRuID0gJCggdGFyZ2V0ICk7XHJcblx0XHRcdC8vIElmIHRoZSBvdXRlciBlbGVtZW50IHdhc24ndCBmb3VuZCBieSB0aGUgb3VyIGhldXJpc3RpY3MsIHVzZSAuY2xvc2VzdCgpXHJcblx0XHRcdGlmICggbmVlZENsb3Nlc3QgKSB7XHJcblx0XHRcdFx0JGJ0biA9ICRidG4uY2xvc2VzdCggXCIudWktYnRuXCIgKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aWYgKCAkYnRuLmxlbmd0aCA+IDAgJiZcclxuXHRcdFx0XHQhKCAkYnRuLmhhc0NsYXNzKCBcInVpLXN0YXRlLWRpc2FibGVkXCIgfHxcclxuXHJcblx0XHRcdFx0XHQvLyBERVBSRUNBVEVEIGFzIG9mIDEuNC4wIC0gcmVtb3ZlIGFmdGVyIDEuNC4wIHJlbGVhc2VcclxuXHRcdFx0XHRcdC8vIG9ubHkgdWktc3RhdGUtZGlzYWJsZWQgc2hvdWxkIGJlIHByZXNlbnQgdGhlcmVhZnRlclxyXG5cdFx0XHRcdFx0JGJ0bi5oYXNDbGFzcyggXCJ1aS1kaXNhYmxlZFwiICkgKSApICkge1xyXG5cdFx0XHRcdCQubW9iaWxlLnJlbW92ZUFjdGl2ZUxpbmtDbGFzcyggdHJ1ZSApO1xyXG5cdFx0XHRcdCQubW9iaWxlLmFjdGl2ZUNsaWNrZWRMaW5rID0gJGJ0bjtcclxuXHRcdFx0XHQkLm1vYmlsZS5hY3RpdmVDbGlja2VkTGluay5hZGRDbGFzcyggJC5tb2JpbGUuYWN0aXZlQnRuQ2xhc3MgKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gY2xpY2sgcm91dGluZyAtIGRpcmVjdCB0byBIVFRQIG9yIEFqYXgsIGFjY29yZGluZ2x5XHJcblx0XHQkLm1vYmlsZS5kb2N1bWVudC5iaW5kKCBcImNsaWNrXCIsIGZ1bmN0aW9uKCBldmVudCApIHtcclxuXHRcdFx0aWYgKCAhJC5tb2JpbGUubGlua0JpbmRpbmdFbmFibGVkIHx8IGV2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpICkge1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0dmFyIGxpbmsgPSBmaW5kQ2xvc2VzdExpbmsoIGV2ZW50LnRhcmdldCApLFxyXG5cdFx0XHRcdCRsaW5rID0gJCggbGluayApLFxyXG5cclxuXHRcdFx0XHQvL3JlbW92ZSBhY3RpdmUgbGluayBjbGFzcyBpZiBleHRlcm5hbCAodGhlbiBpdCB3b24ndCBiZSB0aGVyZSBpZiB5b3UgY29tZSBiYWNrKVxyXG5cdFx0XHRcdGh0dHBDbGVhbnVwID0gZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHR3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpIHsgJC5tb2JpbGUucmVtb3ZlQWN0aXZlTGlua0NsYXNzKCB0cnVlICk7IH0sIDIwMCApO1xyXG5cdFx0XHRcdH0sXHJcblx0XHRcdFx0YmFzZVVybCwgaHJlZixcclxuXHRcdFx0XHR1c2VEZWZhdWx0VXJsSGFuZGxpbmcsIGlzRXh0ZXJuYWwsXHJcblx0XHRcdFx0dHJhbnNpdGlvbiwgcmV2ZXJzZSwgcm9sZTtcclxuXHJcblx0XHRcdC8vIElmIGEgYnV0dG9uIHdhcyBjbGlja2VkLCBjbGVhbiB1cCB0aGUgYWN0aXZlIGNsYXNzIGFkZGVkIGJ5IHZjbGljayBhYm92ZVxyXG5cdFx0XHRpZiAoICQubW9iaWxlLmFjdGl2ZUNsaWNrZWRMaW5rICYmXHJcblx0XHRcdFx0JC5tb2JpbGUuYWN0aXZlQ2xpY2tlZExpbmtbIDAgXSA9PT0gZXZlbnQudGFyZ2V0LnBhcmVudE5vZGUgKSB7XHJcblx0XHRcdFx0aHR0cENsZWFudXAoKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gSWYgdGhlcmUgaXMgbm8gbGluayBhc3NvY2lhdGVkIHdpdGggdGhlIGNsaWNrIG9yIGl0cyBub3QgYSBsZWZ0XHJcblx0XHRcdC8vIGNsaWNrIHdlIHdhbnQgdG8gaWdub3JlIHRoZSBjbGlja1xyXG5cdFx0XHQvLyBUT0RPIHRlYWNoICQubW9iaWxlLmhpamFja2FibGUgdG8gb3BlcmF0ZSBvbiByYXcgZG9tIGVsZW1lbnRzIHNvIHRoZSBsaW5rIHdyYXBwaW5nXHJcblx0XHRcdC8vIGNhbiBiZSBhdm9pZGVkXHJcblx0XHRcdGlmICggIWxpbmsgfHwgZXZlbnQud2hpY2ggPiAxIHx8ICEkbGluay5qcW1IaWphY2thYmxlKCkubGVuZ3RoICkge1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly9pZiB0aGVyZSdzIGEgZGF0YS1yZWw9YmFjayBhdHRyLCBnbyBiYWNrIGluIGhpc3RvcnlcclxuXHRcdFx0aWYgKCAkbGluay5pcyggXCI6anFtRGF0YShyZWw9J2JhY2snKVwiICkgKSB7XHJcblx0XHRcdFx0JC5tb2JpbGUuYmFjaygpO1xyXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0YmFzZVVybCA9ICQubW9iaWxlLmdldENsb3Nlc3RCYXNlVXJsKCAkbGluayApO1xyXG5cclxuXHRcdFx0Ly9nZXQgaHJlZiwgaWYgZGVmaW5lZCwgb3RoZXJ3aXNlIGRlZmF1bHQgdG8gZW1wdHkgaGFzaFxyXG5cdFx0XHRocmVmID0gJC5tb2JpbGUucGF0aC5tYWtlVXJsQWJzb2x1dGUoICRsaW5rLmF0dHIoIFwiaHJlZlwiICkgfHwgXCIjXCIsIGJhc2VVcmwgKTtcclxuXHJcblx0XHRcdC8vaWYgYWpheCBpcyBkaXNhYmxlZCwgZXhpdCBlYXJseVxyXG5cdFx0XHRpZiAoICEkLm1vYmlsZS5hamF4RW5hYmxlZCAmJiAhJC5tb2JpbGUucGF0aC5pc0VtYmVkZGVkUGFnZSggaHJlZiApICkge1xyXG5cdFx0XHRcdGh0dHBDbGVhbnVwKCk7XHJcblx0XHRcdFx0Ly91c2UgZGVmYXVsdCBjbGljayBoYW5kbGluZ1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gWFhYX2pibGFzOiBJZGVhbGx5IGxpbmtzIHRvIGFwcGxpY2F0aW9uIHBhZ2VzIHNob3VsZCBiZSBzcGVjaWZpZWQgYXNcclxuXHRcdFx0Ly8gICAgICAgICAgICBhbiB1cmwgdG8gdGhlIGFwcGxpY2F0aW9uIGRvY3VtZW50IHdpdGggYSBoYXNoIHRoYXQgaXMgZWl0aGVyXHJcblx0XHRcdC8vICAgICAgICAgICAgdGhlIHNpdGUgcmVsYXRpdmUgcGF0aCBvciBpZCB0byB0aGUgcGFnZS4gQnV0IHNvbWUgb2YgdGhlXHJcblx0XHRcdC8vICAgICAgICAgICAgaW50ZXJuYWwgY29kZSB0aGF0IGR5bmFtaWNhbGx5IGdlbmVyYXRlcyBzdWItcGFnZXMgZm9yIG5lc3RlZFxyXG5cdFx0XHQvLyAgICAgICAgICAgIGxpc3RzIGFuZCBzZWxlY3QgZGlhbG9ncywganVzdCB3cml0ZSBhIGhhc2ggaW4gdGhlIGxpbmsgdGhleVxyXG5cdFx0XHQvLyAgICAgICAgICAgIGNyZWF0ZS4gVGhpcyBtZWFucyB0aGUgYWN0dWFsIFVSTCBwYXRoIGlzIGJhc2VkIG9uIHdoYXRldmVyXHJcblx0XHRcdC8vICAgICAgICAgICAgdGhlIGN1cnJlbnQgdmFsdWUgb2YgdGhlIGJhc2UgdGFnIGlzIGF0IHRoZSB0aW1lIHRoaXMgY29kZVxyXG5cdFx0XHQvLyAgICAgICAgICAgIGlzIGNhbGxlZC5cclxuXHRcdFx0aWYgKCBocmVmLnNlYXJjaCggXCIjXCIgKSAhPT0gLTEgJiZcclxuXHRcdFx0XHQhKCAkLm1vYmlsZS5wYXRoLmlzRXh0ZXJuYWwoIGhyZWYgKSAmJiAkLm1vYmlsZS5wYXRoLmlzQWJzb2x1dGVVcmwoIGhyZWYgKSApICkge1xyXG5cclxuXHRcdFx0XHRocmVmID0gaHJlZi5yZXBsYWNlKCAvW14jXSojLywgXCJcIiApO1xyXG5cdFx0XHRcdGlmICggIWhyZWYgKSB7XHJcblx0XHRcdFx0XHQvL2xpbmsgd2FzIGFuIGVtcHR5IGhhc2ggbWVhbnQgcHVyZWx5XHJcblx0XHRcdFx0XHQvL2ZvciBpbnRlcmFjdGlvbiwgc28gd2UgaWdub3JlIGl0LlxyXG5cdFx0XHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHR9IGVsc2UgaWYgKCAkLm1vYmlsZS5wYXRoLmlzUGF0aCggaHJlZiApICkge1xyXG5cdFx0XHRcdFx0Ly93ZSBoYXZlIGFwYXRoIHNvIG1ha2UgaXQgdGhlIGhyZWYgd2Ugd2FudCB0byBsb2FkLlxyXG5cdFx0XHRcdFx0aHJlZiA9ICQubW9iaWxlLnBhdGgubWFrZVVybEFic29sdXRlKCBocmVmLCBiYXNlVXJsICk7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdC8vd2UgaGF2ZSBhIHNpbXBsZSBpZCBzbyB1c2UgdGhlIGRvY3VtZW50VXJsIGFzIGl0cyBiYXNlLlxyXG5cdFx0XHRcdFx0aHJlZiA9ICQubW9iaWxlLnBhdGgubWFrZVVybEFic29sdXRlKCBcIiNcIiArIGhyZWYsIGRvY3VtZW50VXJsLmhyZWZOb0hhc2ggKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIFNob3VsZCB3ZSBoYW5kbGUgdGhpcyBsaW5rLCBvciBsZXQgdGhlIGJyb3dzZXIgZGVhbCB3aXRoIGl0P1xyXG5cdFx0XHR1c2VEZWZhdWx0VXJsSGFuZGxpbmcgPSAkbGluay5pcyggXCJbcmVsPSdleHRlcm5hbCddXCIgKSB8fCAkbGluay5pcyggXCI6anFtRGF0YShhamF4PSdmYWxzZScpXCIgKSB8fCAkbGluay5pcyggXCJbdGFyZ2V0XVwiICk7XHJcblxyXG5cdFx0XHQvLyBTb21lIGVtYmVkZGVkIGJyb3dzZXJzLCBsaWtlIHRoZSB3ZWIgdmlldyBpbiBQaG9uZSBHYXAsIGFsbG93IGNyb3NzLWRvbWFpbiBYSFJcclxuXHRcdFx0Ly8gcmVxdWVzdHMgaWYgdGhlIGRvY3VtZW50IGRvaW5nIHRoZSByZXF1ZXN0IHdhcyBsb2FkZWQgdmlhIHRoZSBmaWxlOi8vIHByb3RvY29sLlxyXG5cdFx0XHQvLyBUaGlzIGlzIHVzdWFsbHkgdG8gYWxsb3cgdGhlIGFwcGxpY2F0aW9uIHRvIFwicGhvbmUgaG9tZVwiIGFuZCBmZXRjaCBhcHAgc3BlY2lmaWNcclxuXHRcdFx0Ly8gZGF0YS4gV2Ugbm9ybWFsbHkgbGV0IHRoZSBicm93c2VyIGhhbmRsZSBleHRlcm5hbC9jcm9zcy1kb21haW4gdXJscywgYnV0IGlmIHRoZVxyXG5cdFx0XHQvLyBhbGxvd0Nyb3NzRG9tYWluUGFnZXMgb3B0aW9uIGlzIHRydWUsIHdlIHdpbGwgYWxsb3cgY3Jvc3MtZG9tYWluIGh0dHAvaHR0cHNcclxuXHRcdFx0Ly8gcmVxdWVzdHMgdG8gZ28gdGhyb3VnaCBvdXIgcGFnZSBsb2FkaW5nIGxvZ2ljLlxyXG5cclxuXHRcdFx0Ly9jaGVjayBmb3IgcHJvdG9jb2wgb3IgcmVsIGFuZCBpdHMgbm90IGFuIGVtYmVkZGVkIHBhZ2VcclxuXHRcdFx0Ly9UT0RPIG92ZXJsYXAgaW4gbG9naWMgZnJvbSBpc0V4dGVybmFsLCByZWw9ZXh0ZXJuYWwgY2hlY2sgc2hvdWxkIGJlXHJcblx0XHRcdC8vICAgICBtb3ZlZCBpbnRvIG1vcmUgY29tcHJlaGVuc2l2ZSBpc0V4dGVybmFsTGlua1xyXG5cdFx0XHRpc0V4dGVybmFsID0gdXNlRGVmYXVsdFVybEhhbmRsaW5nIHx8ICggJC5tb2JpbGUucGF0aC5pc0V4dGVybmFsKCBocmVmICkgJiYgISQubW9iaWxlLnBhdGguaXNQZXJtaXR0ZWRDcm9zc0RvbWFpblJlcXVlc3QoIGRvY3VtZW50VXJsLCBocmVmICkgKTtcclxuXHJcblx0XHRcdGlmICggaXNFeHRlcm5hbCApIHtcclxuXHRcdFx0XHRodHRwQ2xlYW51cCgpO1xyXG5cdFx0XHRcdC8vdXNlIGRlZmF1bHQgY2xpY2sgaGFuZGxpbmdcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vdXNlIGFqYXhcclxuXHRcdFx0dHJhbnNpdGlvbiA9ICRsaW5rLmpxbURhdGEoIFwidHJhbnNpdGlvblwiICk7XHJcblx0XHRcdHJldmVyc2UgPSAkbGluay5qcW1EYXRhKCBcImRpcmVjdGlvblwiICkgPT09IFwicmV2ZXJzZVwiIHx8XHJcblx0XHRcdFx0XHRcdC8vIGRlcHJlY2F0ZWQgLSByZW1vdmUgYnkgMS4wXHJcblx0XHRcdFx0XHRcdCRsaW5rLmpxbURhdGEoIFwiYmFja1wiICk7XHJcblxyXG5cdFx0XHQvL3RoaXMgbWF5IG5lZWQgdG8gYmUgbW9yZSBzcGVjaWZpYyBhcyB3ZSB1c2UgZGF0YS1yZWwgbW9yZVxyXG5cdFx0XHRyb2xlID0gJGxpbmsuYXR0ciggXCJkYXRhLVwiICsgJC5tb2JpbGUubnMgKyBcInJlbFwiICkgfHwgdW5kZWZpbmVkO1xyXG5cclxuXHRcdFx0JC5tb2JpbGUuY2hhbmdlUGFnZSggaHJlZiwgeyB0cmFuc2l0aW9uOiB0cmFuc2l0aW9uLCByZXZlcnNlOiByZXZlcnNlLCByb2xlOiByb2xlLCBsaW5rOiAkbGluayB9ICk7XHJcblx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHR9KTtcclxuXHJcblx0XHQvL3ByZWZldGNoIHBhZ2VzIHdoZW4gYW5jaG9ycyB3aXRoIGRhdGEtcHJlZmV0Y2ggYXJlIGVuY291bnRlcmVkXHJcblx0XHQkLm1vYmlsZS5kb2N1bWVudC5kZWxlZ2F0ZSggXCIudWktcGFnZVwiLCBcInBhZ2VzaG93LnByZWZldGNoXCIsIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR2YXIgdXJscyA9IFtdO1xyXG5cdFx0XHQkKCB0aGlzICkuZmluZCggXCJhOmpxbURhdGEocHJlZmV0Y2gpXCIgKS5lYWNoKGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHZhciAkbGluayA9ICQoIHRoaXMgKSxcclxuXHRcdFx0XHRcdHVybCA9ICRsaW5rLmF0dHIoIFwiaHJlZlwiICk7XHJcblxyXG5cdFx0XHRcdGlmICggdXJsICYmICQuaW5BcnJheSggdXJsLCB1cmxzICkgPT09IC0xICkge1xyXG5cdFx0XHRcdFx0dXJscy5wdXNoKCB1cmwgKTtcclxuXHJcblx0XHRcdFx0XHQkLm1vYmlsZS5sb2FkUGFnZSggdXJsLCB7IHJvbGU6ICRsaW5rLmF0dHIoIFwiZGF0YS1cIiArICQubW9iaWxlLm5zICsgXCJyZWxcIiApLHByZWZldGNoOiB0cnVlIH0gKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gVE9ETyBlbnN1cmUgdGhhdCB0aGUgbmF2aWdhdGUgYmluZGluZyBpbiB0aGUgY29udGVudCB3aWRnZXQgaGFwcGVucyBhdCB0aGUgcmlnaHQgdGltZVxyXG5cdFx0JC5tb2JpbGUucGFnZUNvbnRhaW5lci5wYWdlY29udGFpbmVyKCk7XHJcblxyXG5cdFx0Ly9zZXQgcGFnZSBtaW4taGVpZ2h0cyB0byBiZSBkZXZpY2Ugc3BlY2lmaWNcclxuXHRcdCQubW9iaWxlLmRvY3VtZW50LmJpbmQoIFwicGFnZXNob3dcIiwgZnVuY3Rpb24oKSB7XHJcblxyXG5cdFx0XHQvLyBXZSBuZWVkIHRvIHdhaXQgZm9yIHdpbmRvdy5sb2FkIHRvIG1ha2Ugc3VyZSB0aGF0IHN0eWxlcyBoYXZlIGFscmVhZHkgYmVlbiByZW5kZXJlZCxcclxuXHRcdFx0Ly8gb3RoZXJ3aXNlIGhlaWdodHMgb2YgZXh0ZXJuYWwgdG9vbGJhcnMgd2lsbCBoYXZlIHRoZSB3cm9uZyB2YWx1ZVxyXG5cdFx0XHRpZiAoIGxvYWREZWZlcnJlZCApIHtcclxuXHRcdFx0XHRsb2FkRGVmZXJyZWQuZG9uZSggJC5tb2JpbGUucmVzZXRBY3RpdmVQYWdlSGVpZ2h0ICk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0JC5tb2JpbGUucmVzZXRBY3RpdmVQYWdlSGVpZ2h0KCk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdFx0JC5tb2JpbGUud2luZG93LmJpbmQoIFwidGhyb3R0bGVkcmVzaXplXCIsICQubW9iaWxlLnJlc2V0QWN0aXZlUGFnZUhlaWdodCApO1xyXG5cclxuXHR9Oy8vbmF2cmVhZHlEZWZlcnJlZCBkb25lIGNhbGxiYWNrXHJcblxyXG5cdCQoIGZ1bmN0aW9uKCkgeyBkb21yZWFkeURlZmVycmVkLnJlc29sdmUoKTsgfSApO1xyXG5cclxuXHQvLyBBY2NvdW50IGZvciB0aGUgcG9zc2liaWxpdHkgdGhhdCB0aGUgbG9hZCBldmVudCBoYXMgYWxyZWFkeSBmaXJlZFxyXG5cdGlmICggZG9jdW1lbnQucmVhZHlTdGF0ZSA9PT0gXCJjb21wbGV0ZVwiICkge1xyXG5cdFx0cGFnZUlzRnVsbHlMb2FkZWQoKTtcclxuXHR9IGVsc2Uge1xyXG5cdFx0JC5tb2JpbGUud2luZG93LmxvYWQoIHBhZ2VJc0Z1bGx5TG9hZGVkICk7XHJcblx0fVxyXG5cclxuXHQkLndoZW4oIGRvbXJlYWR5RGVmZXJyZWQsICQubW9iaWxlLm5hdnJlYWR5RGVmZXJyZWQgKS5kb25lKCBmdW5jdGlvbigpIHsgJC5tb2JpbGUuX3JlZ2lzdGVySW50ZXJuYWxFdmVudHMoKTsgfSApO1xyXG59KSggalF1ZXJ5ICk7XHJcblxyXG5cclxuKGZ1bmN0aW9uKCAkLCB3aW5kb3csIHVuZGVmaW5lZCApIHtcclxuXHJcblx0Ly8gVE9ETyByZW1vdmUgZGlyZWN0IHJlZmVyZW5jZXMgdG8gJC5tb2JpbGUgYW5kIHByb3BlcnRpZXMsIHdlIHNob3VsZFxyXG5cdC8vICAgICAgZmF2b3IgaW5qZWN0aW9uIHdpdGggcGFyYW1zIHRvIHRoZSBjb25zdHJ1Y3RvclxyXG5cdCQubW9iaWxlLlRyYW5zaXRpb24gPSBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuaW5pdC5hcHBseSggdGhpcywgYXJndW1lbnRzICk7XHJcblx0fTtcclxuXHJcblx0JC5leHRlbmQoJC5tb2JpbGUuVHJhbnNpdGlvbi5wcm90b3R5cGUsIHtcclxuXHRcdHRvUHJlQ2xhc3M6IFwiIHVpLXBhZ2UtcHJlLWluXCIsXHJcblxyXG5cdFx0aW5pdDogZnVuY3Rpb24oIG5hbWUsIHJldmVyc2UsICR0bywgJGZyb20gKSB7XHJcblx0XHRcdCQuZXh0ZW5kKHRoaXMsIHtcclxuXHRcdFx0XHRuYW1lOiBuYW1lLFxyXG5cdFx0XHRcdHJldmVyc2U6IHJldmVyc2UsXHJcblx0XHRcdFx0JHRvOiAkdG8sXHJcblx0XHRcdFx0JGZyb206ICRmcm9tLFxyXG5cdFx0XHRcdGRlZmVycmVkOiBuZXcgJC5EZWZlcnJlZCgpXHJcblx0XHRcdH0pO1xyXG5cdFx0fSxcclxuXHJcblx0XHRjbGVhbkZyb206IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR0aGlzLiRmcm9tXHJcblx0XHRcdFx0LnJlbW92ZUNsYXNzKCAkLm1vYmlsZS5hY3RpdmVQYWdlQ2xhc3MgKyBcIiBvdXQgaW4gcmV2ZXJzZSBcIiArIHRoaXMubmFtZSApXHJcblx0XHRcdFx0LmhlaWdodCggXCJcIiApO1xyXG5cdFx0fSxcclxuXHJcblx0XHQvLyBOT1RFIG92ZXJyaWRkZW4gYnkgY2hpbGQgb2JqZWN0IHByb3RvdHlwZXMsIG5vb3AnZCBoZXJlIGFzIGRlZmF1bHRzXHJcblx0XHRiZWZvcmVEb25lSW46IGZ1bmN0aW9uKCkge30sXHJcblx0XHRiZWZvcmVEb25lT3V0OiBmdW5jdGlvbigpIHt9LFxyXG5cdFx0YmVmb3JlU3RhcnRPdXQ6IGZ1bmN0aW9uKCkge30sXHJcblxyXG5cdFx0ZG9uZUluOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dGhpcy5iZWZvcmVEb25lSW4oKTtcclxuXHJcblx0XHRcdHRoaXMuJHRvLnJlbW92ZUNsYXNzKCBcIm91dCBpbiByZXZlcnNlIFwiICsgdGhpcy5uYW1lICkuaGVpZ2h0KCBcIlwiICk7XHJcblxyXG5cdFx0XHR0aGlzLnRvZ2dsZVZpZXdwb3J0Q2xhc3MoKTtcclxuXHJcblx0XHRcdC8vIEluIHNvbWUgYnJvd3NlcnMgKGlPUzUpLCAzRCB0cmFuc2l0aW9ucyBibG9jayB0aGUgYWJpbGl0eSB0byBzY3JvbGwgdG8gdGhlIGRlc2lyZWQgbG9jYXRpb24gZHVyaW5nIHRyYW5zaXRpb25cclxuXHRcdFx0Ly8gVGhpcyBlbnN1cmVzIHdlIGp1bXAgdG8gdGhhdCBzcG90IGFmdGVyIHRoZSBmYWN0LCBpZiB3ZSBhcmVuJ3QgdGhlcmUgYWxyZWFkeS5cclxuXHRcdFx0aWYgKCAkLm1vYmlsZS53aW5kb3cuc2Nyb2xsVG9wKCkgIT09IHRoaXMudG9TY3JvbGwgKSB7XHJcblx0XHRcdFx0dGhpcy5zY3JvbGxQYWdlKCk7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKCAhdGhpcy5zZXF1ZW50aWFsICkge1xyXG5cdFx0XHRcdHRoaXMuJHRvLmFkZENsYXNzKCAkLm1vYmlsZS5hY3RpdmVQYWdlQ2xhc3MgKTtcclxuXHRcdFx0fVxyXG5cdFx0XHR0aGlzLmRlZmVycmVkLnJlc29sdmUoIHRoaXMubmFtZSwgdGhpcy5yZXZlcnNlLCB0aGlzLiR0bywgdGhpcy4kZnJvbSwgdHJ1ZSApO1xyXG5cdFx0fSxcclxuXHJcblx0XHRkb25lT3V0OiBmdW5jdGlvbiggc2NyZWVuSGVpZ2h0LCByZXZlcnNlQ2xhc3MsIG5vbmUsIHByZXZlbnRGb2N1cyApIHtcclxuXHRcdFx0dGhpcy5iZWZvcmVEb25lT3V0KCk7XHJcblx0XHRcdHRoaXMuc3RhcnRJbiggc2NyZWVuSGVpZ2h0LCByZXZlcnNlQ2xhc3MsIG5vbmUsIHByZXZlbnRGb2N1cyApO1xyXG5cdFx0fSxcclxuXHJcblx0XHRoaWRlSW46IGZ1bmN0aW9uKCBjYWxsYmFjayApIHtcclxuXHRcdFx0Ly8gUHJldmVudCBmbGlja2VyaW5nIGluIHBob25lZ2FwIGNvbnRhaW5lcjogc2VlIGNvbW1lbnRzIGF0ICM0MDI0IHJlZ2FyZGluZyBpT1NcclxuXHRcdFx0dGhpcy4kdG8uY3NzKCBcInotaW5kZXhcIiwgLTEwICk7XHJcblx0XHRcdGNhbGxiYWNrLmNhbGwoIHRoaXMgKTtcclxuXHRcdFx0dGhpcy4kdG8uY3NzKCBcInotaW5kZXhcIiwgXCJcIiApO1xyXG5cdFx0fSxcclxuXHJcblx0XHRzY3JvbGxQYWdlOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0Ly8gQnkgdXNpbmcgc2Nyb2xsVG8gaW5zdGVhZCBvZiBzaWxlbnRTY3JvbGwsIHdlIGNhbiBrZWVwIHRoaW5ncyBiZXR0ZXIgaW4gb3JkZXJcclxuXHRcdFx0Ly8gSnVzdCB0byBiZSBwcmVjYXV0aW9zLCBkaXNhYmxlIHNjcm9sbHN0YXJ0IGxpc3RlbmluZyBsaWtlIHNpbGVudFNjcm9sbCB3b3VsZFxyXG5cdFx0XHQkLmV2ZW50LnNwZWNpYWwuc2Nyb2xsc3RhcnQuZW5hYmxlZCA9IGZhbHNlO1xyXG5cdFx0XHQvL2lmIHdlIGFyZSBoaWRpbmcgdGhlIHVybCBiYXIgb3IgdGhlIHBhZ2Ugd2FzIHByZXZpb3VzbHkgc2Nyb2xsZWQgc2Nyb2xsIHRvIGhpZGUgb3IgcmV0dXJuIHRvIHBvc2l0aW9uXHJcblx0XHRcdGlmICggJC5tb2JpbGUuaGlkZVVybEJhciB8fCB0aGlzLnRvU2Nyb2xsICE9PSAkLm1vYmlsZS5kZWZhdWx0SG9tZVNjcm9sbCApIHtcclxuXHRcdFx0XHR3aW5kb3cuc2Nyb2xsVG8oIDAsIHRoaXMudG9TY3JvbGwgKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gcmVlbmFibGUgc2Nyb2xsc3RhcnQgbGlzdGVuaW5nIGxpa2Ugc2lsZW50U2Nyb2xsIHdvdWxkXHJcblx0XHRcdHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdCQuZXZlbnQuc3BlY2lhbC5zY3JvbGxzdGFydC5lbmFibGVkID0gdHJ1ZTtcclxuXHRcdFx0fSwgMTUwICk7XHJcblx0XHR9LFxyXG5cclxuXHRcdHN0YXJ0SW46IGZ1bmN0aW9uKCBzY3JlZW5IZWlnaHQsIHJldmVyc2VDbGFzcywgbm9uZSwgcHJldmVudEZvY3VzICkge1xyXG5cdFx0XHR0aGlzLmhpZGVJbihmdW5jdGlvbigpIHtcclxuXHRcdFx0XHR0aGlzLiR0by5hZGRDbGFzcyggJC5tb2JpbGUuYWN0aXZlUGFnZUNsYXNzICsgdGhpcy50b1ByZUNsYXNzICk7XHJcblxyXG5cdFx0XHRcdC8vIFNlbmQgZm9jdXMgdG8gcGFnZSBhcyBpdCBpcyBub3cgZGlzcGxheTogYmxvY2tcclxuXHRcdFx0XHRpZiAoICFwcmV2ZW50Rm9jdXMgKSB7XHJcblx0XHRcdFx0XHQkLm1vYmlsZS5mb2N1c1BhZ2UoIHRoaXMuJHRvICk7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHQvLyBTZXQgdG8gcGFnZSBoZWlnaHRcclxuXHRcdFx0XHR0aGlzLiR0by5oZWlnaHQoIHNjcmVlbkhlaWdodCArIHRoaXMudG9TY3JvbGwgKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoICFub25lICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2Nyb2xsUGFnZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdHRoaXMuJHRvXHJcblx0XHRcdFx0LnJlbW92ZUNsYXNzKCB0aGlzLnRvUHJlQ2xhc3MgKVxyXG5cdFx0XHRcdC5hZGRDbGFzcyggdGhpcy5uYW1lICsgXCIgaW4gXCIgKyByZXZlcnNlQ2xhc3MgKTtcclxuXHJcblx0XHRcdGlmICggIW5vbmUgKSB7XHJcblx0XHRcdFx0dGhpcy4kdG8uYW5pbWF0aW9uQ29tcGxldGUoICQucHJveHkoZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHR0aGlzLmRvbmVJbigpO1xyXG5cdFx0XHRcdH0sIHRoaXMgKSk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0dGhpcy5kb25lSW4oKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdH0sXHJcblxyXG5cdFx0c3RhcnRPdXQ6IGZ1bmN0aW9uKCBzY3JlZW5IZWlnaHQsIHJldmVyc2VDbGFzcywgbm9uZSApIHtcclxuXHRcdFx0dGhpcy5iZWZvcmVTdGFydE91dCggc2NyZWVuSGVpZ2h0LCByZXZlcnNlQ2xhc3MsIG5vbmUgKTtcclxuXHJcblx0XHRcdC8vIFNldCB0aGUgZnJvbSBwYWdlJ3MgaGVpZ2h0IGFuZCBzdGFydCBpdCB0cmFuc2l0aW9uaW5nIG91dFxyXG5cdFx0XHQvLyBOb3RlOiBzZXR0aW5nIGFuIGV4cGxpY2l0IGhlaWdodCBoZWxwcyBlbGltaW5hdGUgdGlsaW5nIGluIHRoZSB0cmFuc2l0aW9uc1xyXG5cdFx0XHR0aGlzLiRmcm9tXHJcblx0XHRcdFx0LmhlaWdodCggc2NyZWVuSGVpZ2h0ICsgJC5tb2JpbGUud2luZG93LnNjcm9sbFRvcCgpIClcclxuXHRcdFx0XHQuYWRkQ2xhc3MoIHRoaXMubmFtZSArIFwiIG91dFwiICsgcmV2ZXJzZUNsYXNzICk7XHJcblx0XHR9LFxyXG5cclxuXHRcdHRvZ2dsZVZpZXdwb3J0Q2xhc3M6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHQkLm1vYmlsZS5wYWdlQ29udGFpbmVyLnRvZ2dsZUNsYXNzKCBcInVpLW1vYmlsZS12aWV3cG9ydC10cmFuc2l0aW9uaW5nIHZpZXdwb3J0LVwiICsgdGhpcy5uYW1lICk7XHJcblx0XHR9LFxyXG5cclxuXHRcdHRyYW5zaXRpb246IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHQvLyBOT1RFIG1hbnkgb2YgdGhlc2UgY291bGQgYmUgY2FsY3VsYXRlZC9yZWNvcmRlZCBpbiB0aGUgY29uc3RydWN0b3IsIGl0J3MgbXlcclxuXHRcdFx0Ly8gICAgICBvcGluaW9uIHRoYXQgYmluZGluZyB0aGVtIGFzIGxhdGUgYXMgcG9zc2libGUgaGFzIHZhbHVlIHdpdGggcmVnYXJkcyB0b1xyXG5cdFx0XHQvLyAgICAgIGJldHRlciB0cmFuc2l0aW9ucyB3aXRoIGZld2VyIGJ1Z3MuIEllLCBpdCdzIG5vdCBndWFyYW50ZWVkIHRoYXQgdGhlXHJcblx0XHRcdC8vICAgICAgb2JqZWN0IHdpbGwgYmUgY3JlYXRlZCBhbmQgdHJhbnNpdGlvbiB3aWxsIGJlIHJ1biBpbW1lZGlhdGVseSBhZnRlciBhc1xyXG5cdFx0XHQvLyAgICAgIGl0IGlzIHRvZGF5LiBTbyB3ZSB3YWl0IHVudGlsIHRyYW5zaXRpb24gaXMgaW52b2tlZCB0byBnYXRoZXIgdGhlIGZvbGxvd2luZ1xyXG5cdFx0XHR2YXIgbm9uZSxcclxuXHRcdFx0XHRyZXZlcnNlQ2xhc3MgPSB0aGlzLnJldmVyc2UgPyBcIiByZXZlcnNlXCIgOiBcIlwiLFxyXG5cdFx0XHRcdHNjcmVlbkhlaWdodCA9ICQubW9iaWxlLmdldFNjcmVlbkhlaWdodCgpLFxyXG5cdFx0XHRcdG1heFRyYW5zaXRpb25PdmVycmlkZSA9ICQubW9iaWxlLm1heFRyYW5zaXRpb25XaWR0aCAhPT0gZmFsc2UgJiZcclxuXHRcdFx0XHRcdCQubW9iaWxlLndpbmRvdy53aWR0aCgpID4gJC5tb2JpbGUubWF4VHJhbnNpdGlvbldpZHRoO1xyXG5cclxuXHRcdFx0dGhpcy50b1Njcm9sbCA9ICQubW9iaWxlLm5hdmlnYXRlLmhpc3RvcnkuZ2V0QWN0aXZlKCkubGFzdFNjcm9sbCB8fCAkLm1vYmlsZS5kZWZhdWx0SG9tZVNjcm9sbDtcclxuXHJcblx0XHRcdG5vbmUgPSAhJC5zdXBwb3J0LmNzc1RyYW5zaXRpb25zIHx8ICEkLnN1cHBvcnQuY3NzQW5pbWF0aW9ucyB8fFxyXG5cdFx0XHRcdG1heFRyYW5zaXRpb25PdmVycmlkZSB8fCAhdGhpcy5uYW1lIHx8IHRoaXMubmFtZSA9PT0gXCJub25lXCIgfHxcclxuXHRcdFx0XHRNYXRoLm1heCggJC5tb2JpbGUud2luZG93LnNjcm9sbFRvcCgpLCB0aGlzLnRvU2Nyb2xsICkgPlxyXG5cdFx0XHRcdFx0JC5tb2JpbGUuZ2V0TWF4U2Nyb2xsRm9yVHJhbnNpdGlvbigpO1xyXG5cclxuXHRcdFx0dGhpcy50b2dnbGVWaWV3cG9ydENsYXNzKCk7XHJcblxyXG5cdFx0XHRpZiAoIHRoaXMuJGZyb20gJiYgIW5vbmUgKSB7XHJcblx0XHRcdFx0dGhpcy5zdGFydE91dCggc2NyZWVuSGVpZ2h0LCByZXZlcnNlQ2xhc3MsIG5vbmUgKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHR0aGlzLmRvbmVPdXQoIHNjcmVlbkhlaWdodCwgcmV2ZXJzZUNsYXNzLCBub25lLCB0cnVlICk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHJldHVybiB0aGlzLmRlZmVycmVkLnByb21pc2UoKTtcclxuXHRcdH1cclxuXHR9KTtcclxufSkoIGpRdWVyeSwgdGhpcyApO1xyXG5cclxuXHJcbihmdW5jdGlvbiggJCApIHtcclxuXHJcblx0JC5tb2JpbGUuU2VyaWFsVHJhbnNpdGlvbiA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5pbml0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcblx0fTtcclxuXHJcblx0JC5leHRlbmQoJC5tb2JpbGUuU2VyaWFsVHJhbnNpdGlvbi5wcm90b3R5cGUsICQubW9iaWxlLlRyYW5zaXRpb24ucHJvdG90eXBlLCB7XHJcblx0XHRzZXF1ZW50aWFsOiB0cnVlLFxyXG5cclxuXHRcdGJlZm9yZURvbmVPdXQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRpZiAoIHRoaXMuJGZyb20gKSB7XHJcblx0XHRcdFx0dGhpcy5jbGVhbkZyb20oKTtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHJcblx0XHRiZWZvcmVTdGFydE91dDogZnVuY3Rpb24oIHNjcmVlbkhlaWdodCwgcmV2ZXJzZUNsYXNzLCBub25lICkge1xyXG5cdFx0XHR0aGlzLiRmcm9tLmFuaW1hdGlvbkNvbXBsZXRlKCQucHJveHkoZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0dGhpcy5kb25lT3V0KCBzY3JlZW5IZWlnaHQsIHJldmVyc2VDbGFzcywgbm9uZSApO1xyXG5cdFx0XHR9LCB0aGlzICkpO1xyXG5cdFx0fVxyXG5cdH0pO1xyXG5cclxufSkoIGpRdWVyeSApO1xyXG5cclxuXHJcbihmdW5jdGlvbiggJCApIHtcclxuXHJcblx0JC5tb2JpbGUuQ29uY3VycmVudFRyYW5zaXRpb24gPSBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuaW5pdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG5cdH07XHJcblxyXG5cdCQuZXh0ZW5kKCQubW9iaWxlLkNvbmN1cnJlbnRUcmFuc2l0aW9uLnByb3RvdHlwZSwgJC5tb2JpbGUuVHJhbnNpdGlvbi5wcm90b3R5cGUsIHtcclxuXHRcdHNlcXVlbnRpYWw6IGZhbHNlLFxyXG5cclxuXHRcdGJlZm9yZURvbmVJbjogZnVuY3Rpb24oKSB7XHJcblx0XHRcdGlmICggdGhpcy4kZnJvbSApIHtcclxuXHRcdFx0XHR0aGlzLmNsZWFuRnJvbSgpO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cclxuXHRcdGJlZm9yZVN0YXJ0T3V0OiBmdW5jdGlvbiggc2NyZWVuSGVpZ2h0LCByZXZlcnNlQ2xhc3MsIG5vbmUgKSB7XHJcblx0XHRcdHRoaXMuZG9uZU91dCggc2NyZWVuSGVpZ2h0LCByZXZlcnNlQ2xhc3MsIG5vbmUgKTtcclxuXHRcdH1cclxuXHR9KTtcclxuXHJcbn0pKCBqUXVlcnkgKTtcclxuXHJcblxyXG4oZnVuY3Rpb24oICQgKSB7XHJcblxyXG5cdC8vIGdlbmVyYXRlIHRoZSBoYW5kbGVycyBmcm9tIHRoZSBhYm92ZVxyXG5cdHZhciBkZWZhdWx0R2V0TWF4U2Nyb2xsRm9yVHJhbnNpdGlvbiA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0cmV0dXJuICQubW9iaWxlLmdldFNjcmVlbkhlaWdodCgpICogMztcclxuXHR9O1xyXG5cclxuXHQvL3RyYW5zaXRpb24gaGFuZGxlciBkaWN0aW9uYXJ5IGZvciAzcmQgcGFydHkgdHJhbnNpdGlvbnNcclxuXHQkLm1vYmlsZS50cmFuc2l0aW9uSGFuZGxlcnMgPSB7XHJcblx0XHRcInNlcXVlbnRpYWxcIjogJC5tb2JpbGUuU2VyaWFsVHJhbnNpdGlvbixcclxuXHRcdFwic2ltdWx0YW5lb3VzXCI6ICQubW9iaWxlLkNvbmN1cnJlbnRUcmFuc2l0aW9uXHJcblx0fTtcclxuXHJcblx0Ly8gTWFrZSBvdXIgdHJhbnNpdGlvbiBoYW5kbGVyIHRoZSBwdWJsaWMgZGVmYXVsdC5cclxuXHQkLm1vYmlsZS5kZWZhdWx0VHJhbnNpdGlvbkhhbmRsZXIgPSAkLm1vYmlsZS50cmFuc2l0aW9uSGFuZGxlcnMuc2VxdWVudGlhbDtcclxuXHJcblx0JC5tb2JpbGUudHJhbnNpdGlvbkZhbGxiYWNrcyA9IHt9O1xyXG5cclxuXHQvLyBJZiB0cmFuc2l0aW9uIGlzIGRlZmluZWQsIGNoZWNrIGlmIGNzcyAzRCB0cmFuc2Zvcm1zIGFyZSBzdXBwb3J0ZWQsIGFuZCBpZiBub3QsIGlmIGEgZmFsbGJhY2sgaXMgc3BlY2lmaWVkXHJcblx0JC5tb2JpbGUuX21heWJlRGVncmFkZVRyYW5zaXRpb24gPSBmdW5jdGlvbiggdHJhbnNpdGlvbiApIHtcclxuXHRcdGlmICggdHJhbnNpdGlvbiAmJiAhJC5zdXBwb3J0LmNzc1RyYW5zZm9ybTNkICYmICQubW9iaWxlLnRyYW5zaXRpb25GYWxsYmFja3NbIHRyYW5zaXRpb24gXSApIHtcclxuXHRcdFx0dHJhbnNpdGlvbiA9ICQubW9iaWxlLnRyYW5zaXRpb25GYWxsYmFja3NbIHRyYW5zaXRpb24gXTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gdHJhbnNpdGlvbjtcclxuXHR9O1xyXG5cclxuXHQvLyBTZXQgdGhlIGdldE1heFNjcm9sbEZvclRyYW5zaXRpb24gdG8gZGVmYXVsdCBpZiBubyBpbXBsZW1lbnRhdGlvbiB3YXMgc2V0IGJ5IHVzZXJcclxuXHQkLm1vYmlsZS5nZXRNYXhTY3JvbGxGb3JUcmFuc2l0aW9uID0gJC5tb2JpbGUuZ2V0TWF4U2Nyb2xsRm9yVHJhbnNpdGlvbiB8fCBkZWZhdWx0R2V0TWF4U2Nyb2xsRm9yVHJhbnNpdGlvbjtcclxuXHJcbn0pKCBqUXVlcnkgKTtcclxuXHJcbi8qXHJcbiogZmFsbGJhY2sgdHJhbnNpdGlvbiBmb3IgZmxpcCBpbiBub24tM0Qgc3VwcG9ydGluZyBicm93c2VycyAod2hpY2ggdGVuZCB0byBoYW5kbGUgY29tcGxleCB0cmFuc2l0aW9ucyBwb29ybHkgaW4gZ2VuZXJhbFxyXG4qL1xyXG5cclxuKGZ1bmN0aW9uKCAkLCB3aW5kb3csIHVuZGVmaW5lZCApIHtcclxuXHJcbiQubW9iaWxlLnRyYW5zaXRpb25GYWxsYmFja3MuZmxpcCA9IFwiZmFkZVwiO1xyXG5cclxufSkoIGpRdWVyeSwgdGhpcyApO1xyXG5cclxuLypcclxuKiBmYWxsYmFjayB0cmFuc2l0aW9uIGZvciBmbG93IGluIG5vbi0zRCBzdXBwb3J0aW5nIGJyb3dzZXJzICh3aGljaCB0ZW5kIHRvIGhhbmRsZSBjb21wbGV4IHRyYW5zaXRpb25zIHBvb3JseSBpbiBnZW5lcmFsXHJcbiovXHJcblxyXG4oZnVuY3Rpb24oICQsIHdpbmRvdywgdW5kZWZpbmVkICkge1xyXG5cclxuJC5tb2JpbGUudHJhbnNpdGlvbkZhbGxiYWNrcy5mbG93ID0gXCJmYWRlXCI7XHJcblxyXG59KSggalF1ZXJ5LCB0aGlzICk7XHJcblxyXG4vKlxyXG4qIGZhbGxiYWNrIHRyYW5zaXRpb24gZm9yIHBvcCBpbiBub24tM0Qgc3VwcG9ydGluZyBicm93c2VycyAod2hpY2ggdGVuZCB0byBoYW5kbGUgY29tcGxleCB0cmFuc2l0aW9ucyBwb29ybHkgaW4gZ2VuZXJhbFxyXG4qL1xyXG5cclxuKGZ1bmN0aW9uKCAkLCB3aW5kb3csIHVuZGVmaW5lZCApIHtcclxuXHJcbiQubW9iaWxlLnRyYW5zaXRpb25GYWxsYmFja3MucG9wID0gXCJmYWRlXCI7XHJcblxyXG59KSggalF1ZXJ5LCB0aGlzICk7XHJcblxyXG4vKlxyXG4qIGZhbGxiYWNrIHRyYW5zaXRpb24gZm9yIHNsaWRlIGluIG5vbi0zRCBzdXBwb3J0aW5nIGJyb3dzZXJzICh3aGljaCB0ZW5kIHRvIGhhbmRsZSBjb21wbGV4IHRyYW5zaXRpb25zIHBvb3JseSBpbiBnZW5lcmFsXHJcbiovXHJcblxyXG4oZnVuY3Rpb24oICQsIHdpbmRvdywgdW5kZWZpbmVkICkge1xyXG5cclxuLy8gVXNlIHRoZSBzaW11bHRhbmVvdXMgdHJhbnNpdGlvbnMgaGFuZGxlciBmb3Igc2xpZGUgdHJhbnNpdGlvbnNcclxuJC5tb2JpbGUudHJhbnNpdGlvbkhhbmRsZXJzLnNsaWRlID0gJC5tb2JpbGUudHJhbnNpdGlvbkhhbmRsZXJzLnNpbXVsdGFuZW91cztcclxuXHJcbi8vIFNldCB0aGUgc2xpZGUgdHJhbnNpdGlvbnMncyBmYWxsYmFjayB0byBcImZhZGVcIlxyXG4kLm1vYmlsZS50cmFuc2l0aW9uRmFsbGJhY2tzLnNsaWRlID0gXCJmYWRlXCI7XHJcblxyXG59KSggalF1ZXJ5LCB0aGlzICk7XHJcblxyXG4vKlxyXG4qIGZhbGxiYWNrIHRyYW5zaXRpb24gZm9yIHNsaWRlZG93biBpbiBub24tM0Qgc3VwcG9ydGluZyBicm93c2VycyAod2hpY2ggdGVuZCB0byBoYW5kbGUgY29tcGxleCB0cmFuc2l0aW9ucyBwb29ybHkgaW4gZ2VuZXJhbFxyXG4qL1xyXG5cclxuKGZ1bmN0aW9uKCAkLCB3aW5kb3csIHVuZGVmaW5lZCApIHtcclxuXHJcbiQubW9iaWxlLnRyYW5zaXRpb25GYWxsYmFja3Muc2xpZGVkb3duID0gXCJmYWRlXCI7XHJcblxyXG59KSggalF1ZXJ5LCB0aGlzICk7XHJcblxyXG4vKlxyXG4qIGZhbGxiYWNrIHRyYW5zaXRpb24gZm9yIHNsaWRlZmFkZSBpbiBub24tM0Qgc3VwcG9ydGluZyBicm93c2VycyAod2hpY2ggdGVuZCB0byBoYW5kbGUgY29tcGxleCB0cmFuc2l0aW9ucyBwb29ybHkgaW4gZ2VuZXJhbFxyXG4qL1xyXG5cclxuKGZ1bmN0aW9uKCAkLCB3aW5kb3csIHVuZGVmaW5lZCApIHtcclxuXHJcbi8vIFNldCB0aGUgc2xpZGUgdHJhbnNpdGlvbnMncyBmYWxsYmFjayB0byBcImZhZGVcIlxyXG4kLm1vYmlsZS50cmFuc2l0aW9uRmFsbGJhY2tzLnNsaWRlZmFkZSA9IFwiZmFkZVwiO1xyXG5cclxufSkoIGpRdWVyeSwgdGhpcyApO1xyXG5cclxuLypcclxuKiBmYWxsYmFjayB0cmFuc2l0aW9uIGZvciBzbGlkZXVwIGluIG5vbi0zRCBzdXBwb3J0aW5nIGJyb3dzZXJzICh3aGljaCB0ZW5kIHRvIGhhbmRsZSBjb21wbGV4IHRyYW5zaXRpb25zIHBvb3JseSBpbiBnZW5lcmFsXHJcbiovXHJcblxyXG4oZnVuY3Rpb24oICQsIHdpbmRvdywgdW5kZWZpbmVkICkge1xyXG5cclxuJC5tb2JpbGUudHJhbnNpdGlvbkZhbGxiYWNrcy5zbGlkZXVwID0gXCJmYWRlXCI7XHJcblxyXG59KSggalF1ZXJ5LCB0aGlzICk7XHJcblxyXG4vKlxyXG4qIGZhbGxiYWNrIHRyYW5zaXRpb24gZm9yIHR1cm4gaW4gbm9uLTNEIHN1cHBvcnRpbmcgYnJvd3NlcnMgKHdoaWNoIHRlbmQgdG8gaGFuZGxlIGNvbXBsZXggdHJhbnNpdGlvbnMgcG9vcmx5IGluIGdlbmVyYWxcclxuKi9cclxuXHJcbihmdW5jdGlvbiggJCwgd2luZG93LCB1bmRlZmluZWQgKSB7XHJcblxyXG4kLm1vYmlsZS50cmFuc2l0aW9uRmFsbGJhY2tzLnR1cm4gPSBcImZhZGVcIjtcclxuXHJcbn0pKCBqUXVlcnksIHRoaXMgKTtcclxuXHJcblxyXG4oZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcclxuXHJcbiQubW9iaWxlLmRlZ3JhZGVJbnB1dHMgPSB7XHJcblx0Y29sb3I6IGZhbHNlLFxyXG5cdGRhdGU6IGZhbHNlLFxyXG5cdGRhdGV0aW1lOiBmYWxzZSxcclxuXHRcImRhdGV0aW1lLWxvY2FsXCI6IGZhbHNlLFxyXG5cdGVtYWlsOiBmYWxzZSxcclxuXHRtb250aDogZmFsc2UsXHJcblx0bnVtYmVyOiBmYWxzZSxcclxuXHRyYW5nZTogXCJudW1iZXJcIixcclxuXHRzZWFyY2g6IFwidGV4dFwiLFxyXG5cdHRlbDogZmFsc2UsXHJcblx0dGltZTogZmFsc2UsXHJcblx0dXJsOiBmYWxzZSxcclxuXHR3ZWVrOiBmYWxzZVxyXG59O1xyXG4vLyBCYWNrY29tcGF0IHJlbW92ZSBpbiAxLjVcclxuJC5tb2JpbGUucGFnZS5wcm90b3R5cGUub3B0aW9ucy5kZWdyYWRlSW5wdXRzID0gJC5tb2JpbGUuZGVncmFkZUlucHV0cztcclxuXHJcbi8vIEF1dG8gc2VsZi1pbml0IHdpZGdldHNcclxuJC5tb2JpbGUuZGVncmFkZUlucHV0c1dpdGhpbiA9IGZ1bmN0aW9uKCB0YXJnZXQgKSB7XHJcblxyXG5cdHRhcmdldCA9ICQoIHRhcmdldCApO1xyXG5cclxuXHQvLyBEZWdyYWRlIGlucHV0cyB0byBhdm9pZCBwb29ybHkgaW1wbGVtZW50ZWQgbmF0aXZlIGZ1bmN0aW9uYWxpdHlcclxuXHR0YXJnZXQuZmluZCggXCJpbnB1dFwiICkubm90KCAkLm1vYmlsZS5wYWdlLnByb3RvdHlwZS5rZWVwTmF0aXZlU2VsZWN0b3IoKSApLmVhY2goZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgZWxlbWVudCA9ICQoIHRoaXMgKSxcclxuXHRcdFx0dHlwZSA9IHRoaXMuZ2V0QXR0cmlidXRlKCBcInR5cGVcIiApLFxyXG5cdFx0XHRvcHRUeXBlID0gJC5tb2JpbGUuZGVncmFkZUlucHV0c1sgdHlwZSBdIHx8IFwidGV4dFwiLFxyXG5cdFx0XHRodG1sLCBoYXNUeXBlLCBmaW5kc3RyLCByZXBzdHI7XHJcblxyXG5cdFx0aWYgKCAkLm1vYmlsZS5kZWdyYWRlSW5wdXRzWyB0eXBlIF0gKSB7XHJcblx0XHRcdGh0bWwgPSAkKCBcIjxkaXY+XCIgKS5odG1sKCBlbGVtZW50LmNsb25lKCkgKS5odG1sKCk7XHJcblx0XHRcdC8vIEluIElFIGJyb3dzZXJzLCB0aGUgdHlwZSBzb21ldGltZXMgZG9lc24ndCBleGlzdCBpbiB0aGUgY2xvbmVkIG1hcmt1cCwgc28gd2UgcmVwbGFjZSB0aGUgY2xvc2luZyB0YWcgaW5zdGVhZFxyXG5cdFx0XHRoYXNUeXBlID0gaHRtbC5pbmRleE9mKCBcIiB0eXBlPVwiICkgPiAtMTtcclxuXHRcdFx0ZmluZHN0ciA9IGhhc1R5cGUgPyAvXFxzK3R5cGU9W1wiJ10/XFx3K1snXCJdPy8gOiAvXFwvPz4vO1xyXG5cdFx0XHRyZXBzdHIgPSBcIiB0eXBlPVxcXCJcIiArIG9wdFR5cGUgKyBcIlxcXCIgZGF0YS1cIiArICQubW9iaWxlLm5zICsgXCJ0eXBlPVxcXCJcIiArIHR5cGUgKyBcIlxcXCJcIiArICggaGFzVHlwZSA/IFwiXCIgOiBcIj5cIiApO1xyXG5cclxuXHRcdFx0ZWxlbWVudC5yZXBsYWNlV2l0aCggaHRtbC5yZXBsYWNlKCBmaW5kc3RyLCByZXBzdHIgKSApO1xyXG5cdFx0fVxyXG5cdH0pO1xyXG5cclxufTtcclxuXHJcbn0pKCBqUXVlcnkgKTtcclxuXHJcbihmdW5jdGlvbiggJCwgd2luZG93LCB1bmRlZmluZWQgKSB7XHJcblxyXG4kLndpZGdldCggXCJtb2JpbGUucGFnZVwiLCAkLm1vYmlsZS5wYWdlLCB7XHJcblx0b3B0aW9uczoge1xyXG5cclxuXHRcdC8vIEFjY2VwdHMgbGVmdCwgcmlnaHQgYW5kIG5vbmVcclxuXHRcdGNsb3NlQnRuOiBcImxlZnRcIixcclxuXHRcdGNsb3NlQnRuVGV4dDogXCJDbG9zZVwiLFxyXG5cdFx0b3ZlcmxheVRoZW1lOiBcImFcIixcclxuXHRcdGNvcm5lcnM6IHRydWUsXHJcblx0XHRkaWFsb2c6IGZhbHNlXHJcblx0fSxcclxuXHJcblx0X2NyZWF0ZTogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLl9zdXBlcigpO1xyXG5cdFx0aWYgKCB0aGlzLm9wdGlvbnMuZGlhbG9nICkge1xyXG5cclxuXHRcdFx0JC5leHRlbmQoIHRoaXMsIHtcclxuXHRcdFx0XHRfaW5uZXI6IHRoaXMuZWxlbWVudC5jaGlsZHJlbigpLFxyXG5cdFx0XHRcdF9oZWFkZXJDbG9zZUJ1dHRvbjogbnVsbFxyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdGlmICggIXRoaXMub3B0aW9ucy5lbmhhbmNlZCApIHtcclxuXHRcdFx0XHR0aGlzLl9zZXRDbG9zZUJ0biggdGhpcy5vcHRpb25zLmNsb3NlQnRuICk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfZW5oYW5jZTogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLl9zdXBlcigpO1xyXG5cclxuXHRcdC8vIENsYXNzIHRoZSBtYXJrdXAgZm9yIGRpYWxvZyBzdHlsaW5nIGFuZCB3cmFwIGludGVyaW9yXHJcblx0XHRpZiAoIHRoaXMub3B0aW9ucy5kaWFsb2cgKSB7XHJcblx0XHRcdHRoaXMuZWxlbWVudC5hZGRDbGFzcyggXCJ1aS1kaWFsb2dcIiApXHJcblx0XHRcdFx0LndyYXBJbm5lciggJCggXCI8ZGl2Lz5cIiwge1xyXG5cclxuXHRcdFx0XHRcdC8vIEFSSUEgcm9sZVxyXG5cdFx0XHRcdFx0XCJyb2xlXCIgOiBcImRpYWxvZ1wiLFxyXG5cdFx0XHRcdFx0XCJjbGFzc1wiIDogXCJ1aS1kaWFsb2ctY29udGFpbiB1aS1vdmVybGF5LXNoYWRvd1wiICtcclxuXHRcdFx0XHRcdFx0KCB0aGlzLm9wdGlvbnMuY29ybmVycyA/IFwiIHVpLWNvcm5lci1hbGxcIiA6IFwiXCIgKVxyXG5cdFx0XHRcdH0pKTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfc2V0T3B0aW9uczogZnVuY3Rpb24oIG9wdGlvbnMgKSB7XHJcblx0XHR2YXIgY2xvc2VCdXR0b25Mb2NhdGlvbiwgY2xvc2VCdXR0b25UZXh0LFxyXG5cdFx0XHRjdXJyZW50T3B0cyA9IHRoaXMub3B0aW9ucztcclxuXHJcblx0XHRpZiAoIG9wdGlvbnMuY29ybmVycyAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHR0aGlzLl9pbm5lci50b2dnbGVDbGFzcyggXCJ1aS1jb3JuZXItYWxsXCIsICEhb3B0aW9ucy5jb3JuZXJzICk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBvcHRpb25zLm92ZXJsYXlUaGVtZSAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRpZiAoICQubW9iaWxlLmFjdGl2ZVBhZ2VbIDAgXSA9PT0gdGhpcy5lbGVtZW50WyAwIF0gKSB7XHJcblx0XHRcdFx0Y3VycmVudE9wdHMub3ZlcmxheVRoZW1lID0gb3B0aW9ucy5vdmVybGF5VGhlbWU7XHJcblx0XHRcdFx0dGhpcy5faGFuZGxlUGFnZUJlZm9yZVNob3coKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggb3B0aW9ucy5jbG9zZUJ0blRleHQgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0Y2xvc2VCdXR0b25Mb2NhdGlvbiA9IGN1cnJlbnRPcHRzLmNsb3NlQnRuO1xyXG5cdFx0XHRjbG9zZUJ1dHRvblRleHQgPSBvcHRpb25zLmNsb3NlQnRuVGV4dDtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIG9wdGlvbnMuY2xvc2VCdG4gIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0Y2xvc2VCdXR0b25Mb2NhdGlvbiA9IG9wdGlvbnMuY2xvc2VCdG47XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBjbG9zZUJ1dHRvbkxvY2F0aW9uICkge1xyXG5cdFx0XHR0aGlzLl9zZXRDbG9zZUJ0biggY2xvc2VCdXR0b25Mb2NhdGlvbiwgY2xvc2VCdXR0b25UZXh0ICk7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5fc3VwZXIoIG9wdGlvbnMgKTtcclxuXHR9LFxyXG5cclxuXHRfaGFuZGxlUGFnZUJlZm9yZVNob3c6IGZ1bmN0aW9uICgpIHtcclxuXHRcdGlmICggdGhpcy5vcHRpb25zLm92ZXJsYXlUaGVtZSAmJiB0aGlzLm9wdGlvbnMuZGlhbG9nICkge1xyXG5cdFx0XHR0aGlzLnJlbW92ZUNvbnRhaW5lckJhY2tncm91bmQoKTtcclxuXHRcdFx0dGhpcy5zZXRDb250YWluZXJCYWNrZ3JvdW5kKCB0aGlzLm9wdGlvbnMub3ZlcmxheVRoZW1lICk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHR0aGlzLl9zdXBlcigpO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9zZXRDbG9zZUJ0bjogZnVuY3Rpb24oIGxvY2F0aW9uLCB0ZXh0ICkge1xyXG5cdFx0dmFyIGRzdCxcclxuXHRcdFx0YnRuID0gdGhpcy5faGVhZGVyQ2xvc2VCdXR0b247XHJcblxyXG5cdFx0Ly8gU2FuaXRpemUgdmFsdWVcclxuXHRcdGxvY2F0aW9uID0gXCJsZWZ0XCIgPT09IGxvY2F0aW9uID8gXCJsZWZ0XCIgOiBcInJpZ2h0XCIgPT09IGxvY2F0aW9uID8gXCJyaWdodFwiIDogXCJub25lXCI7XHJcblxyXG5cdFx0aWYgKCBcIm5vbmVcIiA9PT0gbG9jYXRpb24gKSB7XHJcblx0XHRcdGlmICggYnRuICkge1xyXG5cdFx0XHRcdGJ0bi5yZW1vdmUoKTtcclxuXHRcdFx0XHRidG4gPSBudWxsO1xyXG5cdFx0XHR9XHJcblx0XHR9IGVsc2UgaWYgKCBidG4gKSB7XHJcblx0XHRcdGJ0bi5yZW1vdmVDbGFzcyggXCJ1aS1idG4tbGVmdCB1aS1idG4tcmlnaHRcIiApLmFkZENsYXNzKCBcInVpLWJ0bi1cIiArIGxvY2F0aW9uICk7XHJcblx0XHRcdGlmICggdGV4dCApIHtcclxuXHRcdFx0XHRidG4udGV4dCggdGV4dCApO1xyXG5cdFx0XHR9XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRkc3QgPSB0aGlzLl9pbm5lci5maW5kKCBcIjpqcW1EYXRhKHJvbGU9J2hlYWRlcicpXCIgKS5maXJzdCgpO1xyXG5cdFx0XHRidG4gPSAkKCBcIjxhPjwvYT5cIiwge1xyXG5cdFx0XHRcdFx0XCJocmVmXCI6IFwiI1wiLFxyXG5cdFx0XHRcdFx0XCJjbGFzc1wiOiBcInVpLWJ0biB1aS1jb3JuZXItYWxsIHVpLWljb24tZGVsZXRlIHVpLWJ0bi1pY29uLW5vdGV4dCB1aS1idG4tXCIgKyBsb2NhdGlvblxyXG5cdFx0XHRcdH0pXHJcblx0XHRcdFx0LmF0dHIoIFwiZGF0YS1cIiArICQubW9iaWxlLm5zICsgXCJyZWxcIiwgXCJiYWNrXCIgKVxyXG5cdFx0XHRcdC50ZXh0KCB0ZXh0IHx8IHRoaXMub3B0aW9ucy5jbG9zZUJ0blRleHQgfHwgXCJcIiApXHJcblx0XHRcdFx0LnByZXBlbmRUbyggZHN0ICk7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5faGVhZGVyQ2xvc2VCdXR0b24gPSBidG47XHJcblx0fVxyXG59KTtcclxuXHJcbn0pKCBqUXVlcnksIHRoaXMgKTtcclxuXHJcbihmdW5jdGlvbiggJCwgd2luZG93LCB1bmRlZmluZWQgKSB7XHJcblxyXG4kLndpZGdldCggXCJtb2JpbGUuZGlhbG9nXCIsIHtcclxuXHRvcHRpb25zOiB7XHJcblxyXG5cdFx0Ly8gQWNjZXB0cyBsZWZ0LCByaWdodCBhbmQgbm9uZVxyXG5cdFx0Y2xvc2VCdG46IFwibGVmdFwiLFxyXG5cdFx0Y2xvc2VCdG5UZXh0OiBcIkNsb3NlXCIsXHJcblx0XHRvdmVybGF5VGhlbWU6IFwiYVwiLFxyXG5cdFx0Y29ybmVyczogdHJ1ZVxyXG5cdH0sXHJcblxyXG5cdC8vIE92ZXJyaWRlIHRoZSB0aGVtZSBzZXQgYnkgdGhlIHBhZ2UgcGx1Z2luIG9uIHBhZ2VzaG93XHJcblx0X2hhbmRsZVBhZ2VCZWZvcmVTaG93OiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuX2lzQ2xvc2VhYmxlID0gdHJ1ZTtcclxuXHRcdGlmICggdGhpcy5vcHRpb25zLm92ZXJsYXlUaGVtZSApIHtcclxuXHRcdFx0dGhpcy5lbGVtZW50XHJcblx0XHRcdFx0LnBhZ2UoIFwicmVtb3ZlQ29udGFpbmVyQmFja2dyb3VuZFwiIClcclxuXHRcdFx0XHQucGFnZSggXCJzZXRDb250YWluZXJCYWNrZ3JvdW5kXCIsIHRoaXMub3B0aW9ucy5vdmVybGF5VGhlbWUgKTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfaGFuZGxlUGFnZUJlZm9yZUhpZGU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5faXNDbG9zZWFibGUgPSBmYWxzZTtcclxuXHR9LFxyXG5cclxuXHQvLyBjbGljayBhbmQgc3VibWl0IGV2ZW50czpcclxuXHQvLyAtIGNsaWNrcyBhbmQgc3VibWl0cyBzaG91bGQgdXNlIHRoZSBjbG9zaW5nIHRyYW5zaXRpb24gdGhhdCB0aGUgZGlhbG9nXHJcblx0Ly8gICBvcGVuZWQgd2l0aCB1bmxlc3MgYSBkYXRhLXRyYW5zaXRpb24gaXMgc3BlY2lmaWVkIG9uIHRoZSBsaW5rL2Zvcm1cclxuXHQvLyAtIGlmIHRoZSBjbGljayB3YXMgb24gdGhlIGNsb3NlIGJ1dHRvbiwgb3IgdGhlIGxpbmsgaGFzIGEgZGF0YS1yZWw9XCJiYWNrXCJcclxuXHQvLyAgIGl0J2xsIGdvIGJhY2sgaW4gaGlzdG9yeSBuYXR1cmFsbHlcclxuXHRfaGFuZGxlVkNsaWNrU3VibWl0OiBmdW5jdGlvbiggZXZlbnQgKSB7XHJcblx0XHR2YXIgYXR0cnMsXHJcblx0XHRcdCR0YXJnZXQgPSAkKCBldmVudC50YXJnZXQgKS5jbG9zZXN0KCBldmVudC50eXBlID09PSBcInZjbGlja1wiID8gXCJhXCIgOiBcImZvcm1cIiApO1xyXG5cclxuXHRcdGlmICggJHRhcmdldC5sZW5ndGggJiYgISR0YXJnZXQuanFtRGF0YSggXCJ0cmFuc2l0aW9uXCIgKSApIHtcclxuXHRcdFx0YXR0cnMgPSB7fTtcclxuXHRcdFx0YXR0cnNbIFwiZGF0YS1cIiArICQubW9iaWxlLm5zICsgXCJ0cmFuc2l0aW9uXCIgXSA9XHJcblx0XHRcdFx0KCAkLm1vYmlsZS5uYXZpZ2F0ZS5oaXN0b3J5LmdldEFjdGl2ZSgpIHx8IHt9IClbIFwidHJhbnNpdGlvblwiIF0gfHxcclxuXHRcdFx0XHQkLm1vYmlsZS5kZWZhdWx0RGlhbG9nVHJhbnNpdGlvbjtcclxuXHRcdFx0YXR0cnNbIFwiZGF0YS1cIiArICQubW9iaWxlLm5zICsgXCJkaXJlY3Rpb25cIiBdID0gXCJyZXZlcnNlXCI7XHJcblx0XHRcdCR0YXJnZXQuYXR0ciggYXR0cnMgKTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfY3JlYXRlOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBlbGVtID0gdGhpcy5lbGVtZW50LFxyXG5cdFx0XHRvcHRzID0gdGhpcy5vcHRpb25zO1xyXG5cclxuXHRcdC8vIENsYXNzIHRoZSBtYXJrdXAgZm9yIGRpYWxvZyBzdHlsaW5nIGFuZCB3cmFwIGludGVyaW9yXHJcblx0XHRlbGVtLmFkZENsYXNzKCBcInVpLWRpYWxvZ1wiIClcclxuXHRcdFx0LndyYXBJbm5lciggJCggXCI8ZGl2Lz5cIiwge1xyXG5cclxuXHRcdFx0XHQvLyBBUklBIHJvbGVcclxuXHRcdFx0XHRcInJvbGVcIiA6IFwiZGlhbG9nXCIsXHJcblx0XHRcdFx0XCJjbGFzc1wiIDogXCJ1aS1kaWFsb2ctY29udGFpbiB1aS1vdmVybGF5LXNoYWRvd1wiICtcclxuXHRcdFx0XHRcdCggISFvcHRzLmNvcm5lcnMgPyBcIiB1aS1jb3JuZXItYWxsXCIgOiBcIlwiIClcclxuXHRcdFx0fSkpO1xyXG5cclxuXHRcdCQuZXh0ZW5kKCB0aGlzLCB7XHJcblx0XHRcdF9pc0Nsb3NlYWJsZTogZmFsc2UsXHJcblx0XHRcdF9pbm5lcjogZWxlbS5jaGlsZHJlbigpLFxyXG5cdFx0XHRfaGVhZGVyQ2xvc2VCdXR0b246IG51bGxcclxuXHRcdH0pO1xyXG5cclxuXHRcdHRoaXMuX29uKCBlbGVtLCB7XHJcblx0XHRcdHZjbGljazogXCJfaGFuZGxlVkNsaWNrU3VibWl0XCIsXHJcblx0XHRcdHN1Ym1pdDogXCJfaGFuZGxlVkNsaWNrU3VibWl0XCIsXHJcblx0XHRcdHBhZ2ViZWZvcmVzaG93OiBcIl9oYW5kbGVQYWdlQmVmb3JlU2hvd1wiLFxyXG5cdFx0XHRwYWdlYmVmb3JlaGlkZTogXCJfaGFuZGxlUGFnZUJlZm9yZUhpZGVcIlxyXG5cdFx0fSk7XHJcblxyXG5cdFx0dGhpcy5fc2V0Q2xvc2VCdG4oIG9wdHMuY2xvc2VCdG4gKTtcclxuXHR9LFxyXG5cclxuXHRfc2V0T3B0aW9uczogZnVuY3Rpb24oIG9wdGlvbnMgKSB7XHJcblx0XHR2YXIgY2xvc2VCdXR0b25Mb2NhdGlvbiwgY2xvc2VCdXR0b25UZXh0LFxyXG5cdFx0XHRjdXJyZW50T3B0cyA9IHRoaXMub3B0aW9ucztcclxuXHJcblx0XHRpZiAoIG9wdGlvbnMuY29ybmVycyAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHR0aGlzLl9pbm5lci50b2dnbGVDbGFzcyggXCJ1aS1jb3JuZXItYWxsXCIsICEhb3B0aW9ucy5jb3JuZXJzICk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBvcHRpb25zLm92ZXJsYXlUaGVtZSAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRpZiAoICQubW9iaWxlLmFjdGl2ZVBhZ2VbIDAgXSA9PT0gdGhpcy5lbGVtZW50WyAwIF0gKSB7XHJcblx0XHRcdFx0Y3VycmVudE9wdHMub3ZlcmxheVRoZW1lID0gb3B0aW9ucy5vdmVybGF5VGhlbWU7XHJcblx0XHRcdFx0dGhpcy5faGFuZGxlUGFnZUJlZm9yZVNob3coKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggb3B0aW9ucy5jbG9zZUJ0blRleHQgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0Y2xvc2VCdXR0b25Mb2NhdGlvbiA9IGN1cnJlbnRPcHRzLmNsb3NlQnRuO1xyXG5cdFx0XHRjbG9zZUJ1dHRvblRleHQgPSBvcHRpb25zLmNsb3NlQnRuVGV4dDtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIG9wdGlvbnMuY2xvc2VCdG4gIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0Y2xvc2VCdXR0b25Mb2NhdGlvbiA9IG9wdGlvbnMuY2xvc2VCdG47XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBjbG9zZUJ1dHRvbkxvY2F0aW9uICkge1xyXG5cdFx0XHR0aGlzLl9zZXRDbG9zZUJ0biggY2xvc2VCdXR0b25Mb2NhdGlvbiwgY2xvc2VCdXR0b25UZXh0ICk7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5fc3VwZXIoIG9wdGlvbnMgKTtcclxuXHR9LFxyXG5cclxuXHRfc2V0Q2xvc2VCdG46IGZ1bmN0aW9uKCBsb2NhdGlvbiwgdGV4dCApIHtcclxuXHRcdHZhciBkc3QsXHJcblx0XHRcdGJ0biA9IHRoaXMuX2hlYWRlckNsb3NlQnV0dG9uO1xyXG5cclxuXHRcdC8vIFNhbml0aXplIHZhbHVlXHJcblx0XHRsb2NhdGlvbiA9IFwibGVmdFwiID09PSBsb2NhdGlvbiA/IFwibGVmdFwiIDogXCJyaWdodFwiID09PSBsb2NhdGlvbiA/IFwicmlnaHRcIiA6IFwibm9uZVwiO1xyXG5cclxuXHRcdGlmICggXCJub25lXCIgPT09IGxvY2F0aW9uICkge1xyXG5cdFx0XHRpZiAoIGJ0biApIHtcclxuXHRcdFx0XHRidG4ucmVtb3ZlKCk7XHJcblx0XHRcdFx0YnRuID0gbnVsbDtcclxuXHRcdFx0fVxyXG5cdFx0fSBlbHNlIGlmICggYnRuICkge1xyXG5cdFx0XHRidG4ucmVtb3ZlQ2xhc3MoIFwidWktYnRuLWxlZnQgdWktYnRuLXJpZ2h0XCIgKS5hZGRDbGFzcyggXCJ1aS1idG4tXCIgKyBsb2NhdGlvbiApO1xyXG5cdFx0XHRpZiAoIHRleHQgKSB7XHJcblx0XHRcdFx0YnRuLnRleHQoIHRleHQgKTtcclxuXHRcdFx0fVxyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0ZHN0ID0gdGhpcy5faW5uZXIuZmluZCggXCI6anFtRGF0YShyb2xlPSdoZWFkZXInKVwiICkuZmlyc3QoKTtcclxuXHRcdFx0YnRuID0gJCggXCI8YT48L2E+XCIsIHtcclxuXHRcdFx0XHRcdFwicm9sZVwiOiBcImJ1dHRvblwiLFxyXG5cdFx0XHRcdFx0XCJocmVmXCI6IFwiI1wiLFxyXG5cdFx0XHRcdFx0XCJjbGFzc1wiOiBcInVpLWJ0biB1aS1jb3JuZXItYWxsIHVpLWljb24tZGVsZXRlIHVpLWJ0bi1pY29uLW5vdGV4dCB1aS1idG4tXCIgKyBsb2NhdGlvblxyXG5cdFx0XHRcdH0pXHJcblx0XHRcdFx0LnRleHQoIHRleHQgfHwgdGhpcy5vcHRpb25zLmNsb3NlQnRuVGV4dCB8fCBcIlwiIClcclxuXHRcdFx0XHQucHJlcGVuZFRvKCBkc3QgKTtcclxuXHRcdFx0dGhpcy5fb24oIGJ0biwgeyBjbGljazogXCJjbG9zZVwiIH0gKTtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLl9oZWFkZXJDbG9zZUJ1dHRvbiA9IGJ0bjtcclxuXHR9LFxyXG5cclxuXHQvLyBDbG9zZSBtZXRob2QgZ29lcyBiYWNrIGluIGhpc3RvcnlcclxuXHRjbG9zZTogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgaGlzdCA9ICQubW9iaWxlLm5hdmlnYXRlLmhpc3Rvcnk7XHJcblxyXG5cdFx0aWYgKCB0aGlzLl9pc0Nsb3NlYWJsZSApIHtcclxuXHRcdFx0dGhpcy5faXNDbG9zZWFibGUgPSBmYWxzZTtcclxuXHRcdFx0Ly8gSWYgdGhlIGhhc2ggbGlzdGVuaW5nIGlzIGVuYWJsZWQgYW5kIHRoZXJlIGlzIGF0IGxlYXN0IG9uZSBwcmVjZWRpbmcgaGlzdG9yeVxyXG5cdFx0XHQvLyBlbnRyeSBpdCdzIG9rIHRvIGdvIGJhY2suIEluaXRpYWwgcGFnZXMgd2l0aCB0aGUgZGlhbG9nIGhhc2ggc3RhdGUgYXJlIGFuIGV4YW1wbGVcclxuXHRcdFx0Ly8gd2hlcmUgdGhlIHN0YWNrIGNoZWNrIGlzIG5lY2Vzc2FyeVxyXG5cdFx0XHRpZiAoICQubW9iaWxlLmhhc2hMaXN0ZW5pbmdFbmFibGVkICYmIGhpc3QuYWN0aXZlSW5kZXggPiAwICkge1xyXG5cdFx0XHRcdCQubW9iaWxlLmJhY2soKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHQkLm1vYmlsZS5wYWdlQ29udGFpbmVyLnBhZ2Vjb250YWluZXIoIFwiYmFja1wiICk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcbn0pO1xyXG5cclxufSkoIGpRdWVyeSwgdGhpcyApO1xyXG5cclxuKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7XHJcblxyXG52YXIgckluaXRpYWxMZXR0ZXIgPSAvKFtBLVpdKS9nLFxyXG5cclxuXHQvLyBDb25zdHJ1Y3QgaWNvbnBvcyBjbGFzcyBmcm9tIGljb25wb3MgdmFsdWVcclxuXHRpY29ucG9zQ2xhc3MgPSBmdW5jdGlvbiggaWNvbnBvcyApIHtcclxuXHRcdHJldHVybiAoIFwidWktYnRuLWljb24tXCIgKyAoIGljb25wb3MgPT09IG51bGwgPyBcImxlZnRcIiA6IGljb25wb3MgKSApO1xyXG5cdH07XHJcblxyXG4kLndpZGdldCggXCJtb2JpbGUuY29sbGFwc2libGVcIiwge1xyXG5cdG9wdGlvbnM6IHtcclxuXHRcdGVuaGFuY2VkOiBmYWxzZSxcclxuXHRcdGV4cGFuZEN1ZVRleHQ6IG51bGwsXHJcblx0XHRjb2xsYXBzZUN1ZVRleHQ6IG51bGwsXHJcblx0XHRjb2xsYXBzZWQ6IHRydWUsXHJcblx0XHRoZWFkaW5nOiBcImgxLGgyLGgzLGg0LGg1LGg2LGxlZ2VuZFwiLFxyXG5cdFx0Y29sbGFwc2VkSWNvbjogbnVsbCxcclxuXHRcdGV4cGFuZGVkSWNvbjogbnVsbCxcclxuXHRcdGljb25wb3M6IG51bGwsXHJcblx0XHR0aGVtZTogbnVsbCxcclxuXHRcdGNvbnRlbnRUaGVtZTogbnVsbCxcclxuXHRcdGluc2V0OiBudWxsLFxyXG5cdFx0Y29ybmVyczogbnVsbCxcclxuXHRcdG1pbmk6IG51bGxcclxuXHR9LFxyXG5cclxuXHRfY3JlYXRlOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBlbGVtID0gdGhpcy5lbGVtZW50LFxyXG5cdFx0XHR1aSA9IHtcclxuXHRcdFx0XHRhY2NvcmRpb246IGVsZW1cclxuXHRcdFx0XHRcdC5jbG9zZXN0KCBcIjpqcW1EYXRhKHJvbGU9J2NvbGxhcHNpYmxlLXNldCcpLFwiICtcclxuXHRcdFx0XHRcdFx0XCI6anFtRGF0YShyb2xlPSdjb2xsYXBzaWJsZXNldCcpXCIgK1xyXG5cdFx0XHRcdFx0XHQoICQubW9iaWxlLmNvbGxhcHNpYmxlc2V0ID8gXCIsIDptb2JpbGUtY29sbGFwc2libGVzZXRcIiA6XHJcblx0XHRcdFx0XHRcdFx0XCJcIiApIClcclxuXHRcdFx0XHRcdC5hZGRDbGFzcyggXCJ1aS1jb2xsYXBzaWJsZS1zZXRcIiApXHJcblx0XHRcdH07XHJcblxyXG5cdFx0dGhpcy5fdWkgPSB1aTtcclxuXHRcdHRoaXMuX3JlbmRlcmVkT3B0aW9ucyA9IHRoaXMuX2dldE9wdGlvbnMoIHRoaXMub3B0aW9ucyApO1xyXG5cclxuXHRcdGlmICggdGhpcy5vcHRpb25zLmVuaGFuY2VkICkge1xyXG5cdFx0XHR1aS5oZWFkaW5nID0gdGhpcy5lbGVtZW50LmNoaWxkcmVuKCBcIi51aS1jb2xsYXBzaWJsZS1oZWFkaW5nXCIgKTtcclxuXHRcdFx0dWkuY29udGVudCA9IHVpLmhlYWRpbmcubmV4dCgpO1xyXG5cdFx0XHR1aS5hbmNob3IgPSB1aS5oZWFkaW5nLmNoaWxkcmVuKCk7XHJcblx0XHRcdHVpLnN0YXR1cyA9IHVpLmFuY2hvci5jaGlsZHJlbiggXCIudWktY29sbGFwc2libGUtaGVhZGluZy1zdGF0dXNcIiApO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0dGhpcy5fZW5oYW5jZSggZWxlbSwgdWkgKTtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLl9vbiggdWkuaGVhZGluZywge1xyXG5cdFx0XHRcInRhcFwiOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHR1aS5oZWFkaW5nLmZpbmQoIFwiYVwiICkuZmlyc3QoKS5hZGRDbGFzcyggJC5tb2JpbGUuYWN0aXZlQnRuQ2xhc3MgKTtcclxuXHRcdFx0fSxcclxuXHJcblx0XHRcdFwiY2xpY2tcIjogZnVuY3Rpb24oIGV2ZW50ICkge1xyXG5cdFx0XHRcdHRoaXMuX2hhbmRsZUV4cGFuZENvbGxhcHNlKCAhdWkuaGVhZGluZy5oYXNDbGFzcyggXCJ1aS1jb2xsYXBzaWJsZS1oZWFkaW5nLWNvbGxhcHNlZFwiICkgKTtcclxuXHRcdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHRcdGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHR9LFxyXG5cclxuXHQvLyBBZGp1c3QgdGhlIGtleXMgaW5zaWRlIG9wdGlvbnMgZm9yIGluaGVyaXRlZCB2YWx1ZXNcclxuXHRfZ2V0T3B0aW9uczogZnVuY3Rpb24oIG9wdGlvbnMgKSB7XHJcblx0XHR2YXIga2V5LFxyXG5cdFx0XHRhY2NvcmRpb24gPSB0aGlzLl91aS5hY2NvcmRpb24sXHJcblx0XHRcdGFjY29yZGlvbldpZGdldCA9IHRoaXMuX3VpLmFjY29yZGlvbldpZGdldDtcclxuXHJcblx0XHQvLyBDb3B5IG9wdGlvbnNcclxuXHRcdG9wdGlvbnMgPSAkLmV4dGVuZCgge30sIG9wdGlvbnMgKTtcclxuXHJcblx0XHRpZiAoIGFjY29yZGlvbi5sZW5ndGggJiYgIWFjY29yZGlvbldpZGdldCApIHtcclxuXHRcdFx0dGhpcy5fdWkuYWNjb3JkaW9uV2lkZ2V0ID1cclxuXHRcdFx0YWNjb3JkaW9uV2lkZ2V0ID0gYWNjb3JkaW9uLmRhdGEoIFwibW9iaWxlLWNvbGxhcHNpYmxlc2V0XCIgKTtcclxuXHRcdH1cclxuXHJcblx0XHRmb3IgKCBrZXkgaW4gb3B0aW9ucyApIHtcclxuXHJcblx0XHRcdC8vIFJldHJpZXZlIHRoZSBvcHRpb24gdmFsdWUgZmlyc3QgZnJvbSB0aGUgb3B0aW9ucyBvYmplY3QgcGFzc2VkIGluIGFuZCwgaWZcclxuXHRcdFx0Ly8gbnVsbCwgZnJvbSB0aGUgcGFyZW50IGFjY29yZGlvbiBvciwgaWYgdGhhdCdzIG51bGwgdG9vLCBvciBpZiB0aGVyZSdzIG5vXHJcblx0XHRcdC8vIHBhcmVudCBhY2NvcmRpb24sIHRoZW4gZnJvbSB0aGUgZGVmYXVsdHMuXHJcblx0XHRcdG9wdGlvbnNbIGtleSBdID1cclxuXHRcdFx0XHQoIG9wdGlvbnNbIGtleSBdICE9IG51bGwgKSA/IG9wdGlvbnNbIGtleSBdIDpcclxuXHRcdFx0XHQoIGFjY29yZGlvbldpZGdldCApID8gYWNjb3JkaW9uV2lkZ2V0Lm9wdGlvbnNbIGtleSBdIDpcclxuXHRcdFx0XHRhY2NvcmRpb24ubGVuZ3RoID8gJC5tb2JpbGUuZ2V0QXR0cmlidXRlKCBhY2NvcmRpb25bIDAgXSxcclxuXHRcdFx0XHRcdGtleS5yZXBsYWNlKCBySW5pdGlhbExldHRlciwgXCItJDFcIiApLnRvTG93ZXJDYXNlKCkgKTpcclxuXHRcdFx0XHRudWxsO1xyXG5cclxuXHRcdFx0aWYgKCBudWxsID09IG9wdGlvbnNbIGtleSBdICkge1xyXG5cdFx0XHRcdG9wdGlvbnNbIGtleSBdID0gJC5tb2JpbGUuY29sbGFwc2libGUuZGVmYXVsdHNbIGtleSBdO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIG9wdGlvbnM7XHJcblx0fSxcclxuXHJcblx0X3RoZW1lQ2xhc3NGcm9tT3B0aW9uOiBmdW5jdGlvbiggcHJlZml4LCB2YWx1ZSApIHtcclxuXHRcdHJldHVybiAoIHZhbHVlID8gKCB2YWx1ZSA9PT0gXCJub25lXCIgPyBcIlwiIDogcHJlZml4ICsgdmFsdWUgKSA6IFwiXCIgKTtcclxuXHR9LFxyXG5cclxuXHRfZW5oYW5jZTogZnVuY3Rpb24oIGVsZW0sIHVpICkge1xyXG5cdFx0dmFyIGljb25jbGFzcyxcclxuXHRcdFx0b3B0cyA9IHRoaXMuX3JlbmRlcmVkT3B0aW9ucyxcclxuXHRcdFx0Y29udGVudFRoZW1lQ2xhc3MgPSB0aGlzLl90aGVtZUNsYXNzRnJvbU9wdGlvbiggXCJ1aS1ib2R5LVwiLCBvcHRzLmNvbnRlbnRUaGVtZSApO1xyXG5cclxuXHRcdGVsZW0uYWRkQ2xhc3MoIFwidWktY29sbGFwc2libGUgXCIgK1xyXG5cdFx0XHQoIG9wdHMuaW5zZXQgPyBcInVpLWNvbGxhcHNpYmxlLWluc2V0IFwiIDogXCJcIiApICtcclxuXHRcdFx0KCBvcHRzLmluc2V0ICYmIG9wdHMuY29ybmVycyA/IFwidWktY29ybmVyLWFsbCBcIiA6IFwiXCIgKSArXHJcblx0XHRcdCggY29udGVudFRoZW1lQ2xhc3MgPyBcInVpLWNvbGxhcHNpYmxlLXRoZW1lZC1jb250ZW50IFwiIDogXCJcIiApICk7XHJcblx0XHR1aS5vcmlnaW5hbEhlYWRpbmcgPSBlbGVtLmNoaWxkcmVuKCB0aGlzLm9wdGlvbnMuaGVhZGluZyApLmZpcnN0KCksXHJcblx0XHR1aS5jb250ZW50ID0gZWxlbVxyXG5cdFx0XHQud3JhcElubmVyKCBcIjxkaXYgXCIgK1xyXG5cdFx0XHRcdFwiY2xhc3M9J3VpLWNvbGxhcHNpYmxlLWNvbnRlbnQgXCIgK1xyXG5cdFx0XHRcdGNvbnRlbnRUaGVtZUNsYXNzICsgXCInPjwvZGl2PlwiIClcclxuXHRcdFx0LmNoaWxkcmVuKCBcIi51aS1jb2xsYXBzaWJsZS1jb250ZW50XCIgKSxcclxuXHRcdHVpLmhlYWRpbmcgPSB1aS5vcmlnaW5hbEhlYWRpbmc7XHJcblxyXG5cdFx0Ly8gUmVwbGFjZSBjb2xsYXBzaWJsZUhlYWRpbmcgaWYgaXQncyBhIGxlZ2VuZFxyXG5cdFx0aWYgKCB1aS5oZWFkaW5nLmlzKCBcImxlZ2VuZFwiICkgKSB7XHJcblx0XHRcdHVpLmhlYWRpbmcgPSAkKCBcIjxkaXYgcm9sZT0naGVhZGluZyc+XCIrIHVpLmhlYWRpbmcuaHRtbCgpICtcIjwvZGl2PlwiICk7XHJcblx0XHRcdHVpLnBsYWNlaG9sZGVyID0gJCggXCI8ZGl2PjwhLS0gcGxhY2Vob2xkZXIgZm9yIGxlZ2VuZCAtLT48L2Rpdj5cIiApLmluc2VydEJlZm9yZSggdWkub3JpZ2luYWxIZWFkaW5nICk7XHJcblx0XHRcdHVpLm9yaWdpbmFsSGVhZGluZy5yZW1vdmUoKTtcclxuXHRcdH1cclxuXHJcblx0XHRpY29uY2xhc3MgPSAoIG9wdHMuY29sbGFwc2VkID8gKCBvcHRzLmNvbGxhcHNlZEljb24gPyBcInVpLWljb24tXCIgKyBvcHRzLmNvbGxhcHNlZEljb24gOiBcIlwiICk6XHJcblx0XHRcdCggb3B0cy5leHBhbmRlZEljb24gPyBcInVpLWljb24tXCIgKyBvcHRzLmV4cGFuZGVkSWNvbiA6IFwiXCIgKSApO1xyXG5cclxuXHRcdHVpLnN0YXR1cyA9ICQoIFwiPHNwYW4gY2xhc3M9J3VpLWNvbGxhcHNpYmxlLWhlYWRpbmctc3RhdHVzJz48L3NwYW4+XCIgKTtcclxuXHRcdHVpLmFuY2hvciA9IHVpLmhlYWRpbmdcclxuXHRcdFx0LmRldGFjaCgpXHJcblx0XHRcdC8vbW9kaWZ5IG1hcmt1cCAmIGF0dHJpYnV0ZXNcclxuXHRcdFx0LmFkZENsYXNzKCBcInVpLWNvbGxhcHNpYmxlLWhlYWRpbmdcIiApXHJcblx0XHRcdC5hcHBlbmQoIHVpLnN0YXR1cyApXHJcblx0XHRcdC53cmFwSW5uZXIoIFwiPGEgaHJlZj0nIycgY2xhc3M9J3VpLWNvbGxhcHNpYmxlLWhlYWRpbmctdG9nZ2xlJz48L2E+XCIgKVxyXG5cdFx0XHQuZmluZCggXCJhXCIgKVxyXG5cdFx0XHRcdC5maXJzdCgpXHJcblx0XHRcdFx0LmFkZENsYXNzKCBcInVpLWJ0biBcIiArXHJcblx0XHRcdFx0XHQoIGljb25jbGFzcyA/IGljb25jbGFzcyArIFwiIFwiIDogXCJcIiApICtcclxuXHRcdFx0XHRcdCggaWNvbmNsYXNzID8gaWNvbnBvc0NsYXNzKCBvcHRzLmljb25wb3MgKSArXHJcblx0XHRcdFx0XHRcdFwiIFwiIDogXCJcIiApICtcclxuXHRcdFx0XHRcdHRoaXMuX3RoZW1lQ2xhc3NGcm9tT3B0aW9uKCBcInVpLWJ0bi1cIiwgb3B0cy50aGVtZSApICsgXCIgXCIgK1xyXG5cdFx0XHRcdFx0KCBvcHRzLm1pbmkgPyBcInVpLW1pbmkgXCIgOiBcIlwiICkgKTtcclxuXHJcblx0XHQvL2Ryb3AgaGVhZGluZyBpbiBiZWZvcmUgY29udGVudFxyXG5cdFx0dWkuaGVhZGluZy5pbnNlcnRCZWZvcmUoIHVpLmNvbnRlbnQgKTtcclxuXHJcblx0XHR0aGlzLl9oYW5kbGVFeHBhbmRDb2xsYXBzZSggdGhpcy5vcHRpb25zLmNvbGxhcHNlZCApO1xyXG5cclxuXHRcdHJldHVybiB1aTtcclxuXHR9LFxyXG5cclxuXHRyZWZyZXNoOiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuX2FwcGx5T3B0aW9ucyggdGhpcy5vcHRpb25zICk7XHJcblx0XHR0aGlzLl9yZW5kZXJlZE9wdGlvbnMgPSB0aGlzLl9nZXRPcHRpb25zKCB0aGlzLm9wdGlvbnMgKTtcclxuXHR9LFxyXG5cclxuXHRfYXBwbHlPcHRpb25zOiBmdW5jdGlvbiggb3B0aW9ucyApIHtcclxuXHRcdHZhciBpc0NvbGxhcHNlZCwgbmV3VGhlbWUsIG9sZFRoZW1lLCBoYXNDb3JuZXJzLCBoYXNJY29uLFxyXG5cdFx0XHRlbGVtID0gdGhpcy5lbGVtZW50LFxyXG5cdFx0XHRjdXJyZW50T3B0cyA9IHRoaXMuX3JlbmRlcmVkT3B0aW9ucyxcclxuXHRcdFx0dWkgPSB0aGlzLl91aSxcclxuXHRcdFx0YW5jaG9yID0gdWkuYW5jaG9yLFxyXG5cdFx0XHRzdGF0dXMgPSB1aS5zdGF0dXMsXHJcblx0XHRcdG9wdHMgPSB0aGlzLl9nZXRPcHRpb25zKCBvcHRpb25zICk7XHJcblxyXG5cdFx0Ly8gRmlyc3QgYW5kIGZvcmVtb3N0IHdlIG5lZWQgdG8gbWFrZSBzdXJlIHRoZSBjb2xsYXBzaWJsZSBpcyBpbiB0aGUgcHJvcGVyXHJcblx0XHQvLyBzdGF0ZSwgaW4gY2FzZSBzb21lYm9keSBkZWNpZGVkIHRvIGNoYW5nZSB0aGUgY29sbGFwc2VkIG9wdGlvbiBhdCB0aGVcclxuXHRcdC8vIHNhbWUgdGltZSBhcyBhbm90aGVyIG9wdGlvblxyXG5cdFx0aWYgKCBvcHRpb25zLmNvbGxhcHNlZCAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHR0aGlzLl9oYW5kbGVFeHBhbmRDb2xsYXBzZSggb3B0aW9ucy5jb2xsYXBzZWQgKTtcclxuXHRcdH1cclxuXHJcblx0XHRpc0NvbGxhcHNlZCA9IGVsZW0uaGFzQ2xhc3MoIFwidWktY29sbGFwc2libGUtY29sbGFwc2VkXCIgKTtcclxuXHJcblx0XHQvLyBXZSBvbmx5IG5lZWQgdG8gYXBwbHkgdGhlIGN1ZSB0ZXh0IGZvciB0aGUgY3VycmVudCBzdGF0ZSByaWdodCBhd2F5LlxyXG5cdFx0Ly8gVGhlIGN1ZSB0ZXh0IGZvciB0aGUgYWx0ZXJuYXRlIHN0YXRlIHdpbGwgYmUgc3RvcmVkIGluIHRoZSBvcHRpb25zXHJcblx0XHQvLyBhbmQgYXBwbGllZCB0aGUgbmV4dCB0aW1lIHRoZSBjb2xsYXBzaWJsZSdzIHN0YXRlIGlzIHRvZ2dsZWRcclxuXHRcdGlmICggaXNDb2xsYXBzZWQgKSB7XHJcblx0XHRcdGlmICggb3B0cy5leHBhbmRDdWVUZXh0ICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdFx0c3RhdHVzLnRleHQoIG9wdHMuZXhwYW5kQ3VlVGV4dCApO1xyXG5cdFx0XHR9XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRpZiAoIG9wdHMuY29sbGFwc2VDdWVUZXh0ICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdFx0c3RhdHVzLnRleHQoIG9wdHMuY29sbGFwc2VDdWVUZXh0ICk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHQvLyBVcGRhdGUgaWNvblxyXG5cclxuXHRcdC8vIElzIGl0IHN1cHBvc2VkIHRvIGhhdmUgYW4gaWNvbj9cclxuXHRcdGhhc0ljb24gPVxyXG5cclxuXHRcdFx0Ly8gSWYgdGhlIGNvbGxhcHNlZEljb24gaXMgYmVpbmcgc2V0LCBjb25zdWx0IHRoYXRcclxuXHRcdFx0KCBvcHRzLmNvbGxhcHNlZEljb24gIT09IHVuZGVmaW5lZCA/IG9wdHMuY29sbGFwc2VkSWNvbiAhPT0gZmFsc2UgOlxyXG5cclxuXHRcdFx0XHQvLyBPdGhlcndpc2UgY29uc3VsdCB0aGUgZXhpc3Rpbmcgb3B0aW9uIHZhbHVlXHJcblx0XHRcdFx0Y3VycmVudE9wdHMuY29sbGFwc2VkSWNvbiAhPT0gZmFsc2UgKTtcclxuXHJcblxyXG5cdFx0Ly8gSWYgYW55IGljb24tcmVsYXRlZCBvcHRpb25zIGhhdmUgY2hhbmdlZCwgbWFrZSBzdXJlIHRoZSBuZXcgaWNvblxyXG5cdFx0Ly8gc3RhdGUgaXMgcmVmbGVjdGVkIGJ5IGZpcnN0IHJlbW92aW5nIGFsbCBpY29uLXJlbGF0ZWQgY2xhc3Nlc1xyXG5cdFx0Ly8gcmVmbGVjdGluZyB0aGUgY3VycmVudCBzdGF0ZSBhbmQgdGhlbiBhZGRpbmcgYWxsIGljb24tcmVsYXRlZFxyXG5cdFx0Ly8gY2xhc3NlcyBmb3IgdGhlIG5ldyBzdGF0ZVxyXG5cdFx0aWYgKCAhKCBvcHRzLmljb25wb3MgPT09IHVuZGVmaW5lZCAmJlxyXG5cdFx0XHRvcHRzLmNvbGxhcHNlZEljb24gPT09IHVuZGVmaW5lZCAmJlxyXG5cdFx0XHRvcHRzLmV4cGFuZGVkSWNvbiA9PT0gdW5kZWZpbmVkICkgKSB7XHJcblxyXG5cdFx0XHQvLyBSZW1vdmUgYWxsIGN1cnJlbnQgaWNvbi1yZWxhdGVkIGNsYXNzZXNcclxuXHRcdFx0YW5jaG9yLnJlbW92ZUNsYXNzKCBbIGljb25wb3NDbGFzcyggY3VycmVudE9wdHMuaWNvbnBvcyApIF1cclxuXHRcdFx0XHQuY29uY2F0KCAoIGN1cnJlbnRPcHRzLmV4cGFuZGVkSWNvbiA/XHJcblx0XHRcdFx0XHRbIFwidWktaWNvbi1cIiArIGN1cnJlbnRPcHRzLmV4cGFuZGVkSWNvbiBdIDogW10gKSApXHJcblx0XHRcdFx0LmNvbmNhdCggKCBjdXJyZW50T3B0cy5jb2xsYXBzZWRJY29uID9cclxuXHRcdFx0XHRcdFsgXCJ1aS1pY29uLVwiICsgY3VycmVudE9wdHMuY29sbGFwc2VkSWNvbiBdIDogW10gKSApXHJcblx0XHRcdFx0LmpvaW4oIFwiIFwiICkgKTtcclxuXHJcblx0XHRcdC8vIEFkZCBuZXcgY2xhc3NlcyBpZiBhbiBpY29uIGlzIHN1cHBvc2VkIHRvIGJlIHByZXNlbnRcclxuXHRcdFx0aWYgKCBoYXNJY29uICkge1xyXG5cdFx0XHRcdGFuY2hvci5hZGRDbGFzcyhcclxuXHRcdFx0XHRcdFsgaWNvbnBvc0NsYXNzKCBvcHRzLmljb25wb3MgIT09IHVuZGVmaW5lZCA/XHJcblx0XHRcdFx0XHRcdG9wdHMuaWNvbnBvcyA6IGN1cnJlbnRPcHRzLmljb25wb3MgKSBdXHJcblx0XHRcdFx0XHRcdC5jb25jYXQoIGlzQ29sbGFwc2VkID9cclxuXHRcdFx0XHRcdFx0XHRbIFwidWktaWNvbi1cIiArICggb3B0cy5jb2xsYXBzZWRJY29uICE9PSB1bmRlZmluZWQgP1xyXG5cdFx0XHRcdFx0XHRcdFx0b3B0cy5jb2xsYXBzZWRJY29uIDpcclxuXHRcdFx0XHRcdFx0XHRcdGN1cnJlbnRPcHRzLmNvbGxhcHNlZEljb24gKSBdIDpcclxuXHRcdFx0XHRcdFx0XHRbIFwidWktaWNvbi1cIiArICggb3B0cy5leHBhbmRlZEljb24gIT09IHVuZGVmaW5lZCA/XHJcblx0XHRcdFx0XHRcdFx0XHRvcHRzLmV4cGFuZGVkSWNvbiA6XHJcblx0XHRcdFx0XHRcdFx0XHRjdXJyZW50T3B0cy5leHBhbmRlZEljb24gKSBdIClcclxuXHRcdFx0XHRcdFx0LmpvaW4oIFwiIFwiICkgKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggb3B0cy50aGVtZSAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRvbGRUaGVtZSA9IHRoaXMuX3RoZW1lQ2xhc3NGcm9tT3B0aW9uKCBcInVpLWJ0bi1cIiwgY3VycmVudE9wdHMudGhlbWUgKTtcclxuXHRcdFx0bmV3VGhlbWUgPSB0aGlzLl90aGVtZUNsYXNzRnJvbU9wdGlvbiggXCJ1aS1idG4tXCIsIG9wdHMudGhlbWUgKTtcclxuXHRcdFx0YW5jaG9yLnJlbW92ZUNsYXNzKCBvbGRUaGVtZSApLmFkZENsYXNzKCBuZXdUaGVtZSApO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggb3B0cy5jb250ZW50VGhlbWUgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0b2xkVGhlbWUgPSB0aGlzLl90aGVtZUNsYXNzRnJvbU9wdGlvbiggXCJ1aS1ib2R5LVwiLFxyXG5cdFx0XHRcdGN1cnJlbnRPcHRzLmNvbnRlbnRUaGVtZSApO1xyXG5cdFx0XHRuZXdUaGVtZSA9IHRoaXMuX3RoZW1lQ2xhc3NGcm9tT3B0aW9uKCBcInVpLWJvZHktXCIsXHJcblx0XHRcdFx0b3B0cy5jb250ZW50VGhlbWUgKTtcclxuXHRcdFx0dWkuY29udGVudC5yZW1vdmVDbGFzcyggb2xkVGhlbWUgKS5hZGRDbGFzcyggbmV3VGhlbWUgKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIG9wdHMuaW5zZXQgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0ZWxlbS50b2dnbGVDbGFzcyggXCJ1aS1jb2xsYXBzaWJsZS1pbnNldFwiLCBvcHRzLmluc2V0ICk7XHJcblx0XHRcdGhhc0Nvcm5lcnMgPSAhISggb3B0cy5pbnNldCAmJiAoIG9wdHMuY29ybmVycyB8fCBjdXJyZW50T3B0cy5jb3JuZXJzICkgKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIG9wdHMuY29ybmVycyAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRoYXNDb3JuZXJzID0gISEoIG9wdHMuY29ybmVycyAmJiAoIG9wdHMuaW5zZXQgfHwgY3VycmVudE9wdHMuaW5zZXQgKSApO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggaGFzQ29ybmVycyAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRlbGVtLnRvZ2dsZUNsYXNzKCBcInVpLWNvcm5lci1hbGxcIiwgaGFzQ29ybmVycyApO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggb3B0cy5taW5pICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdGFuY2hvci50b2dnbGVDbGFzcyggXCJ1aS1taW5pXCIsIG9wdHMubWluaSApO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9zZXRPcHRpb25zOiBmdW5jdGlvbiggb3B0aW9ucyApIHtcclxuXHRcdHRoaXMuX2FwcGx5T3B0aW9ucyggb3B0aW9ucyApO1xyXG5cdFx0dGhpcy5fc3VwZXIoIG9wdGlvbnMgKTtcclxuXHRcdHRoaXMuX3JlbmRlcmVkT3B0aW9ucyA9IHRoaXMuX2dldE9wdGlvbnMoIHRoaXMub3B0aW9ucyApO1xyXG5cdH0sXHJcblxyXG5cdF9oYW5kbGVFeHBhbmRDb2xsYXBzZTogZnVuY3Rpb24oIGlzQ29sbGFwc2UgKSB7XHJcblx0XHR2YXIgb3B0cyA9IHRoaXMuX3JlbmRlcmVkT3B0aW9ucyxcclxuXHRcdFx0dWkgPSB0aGlzLl91aTtcclxuXHJcblx0XHR1aS5zdGF0dXMudGV4dCggaXNDb2xsYXBzZSA/IG9wdHMuZXhwYW5kQ3VlVGV4dCA6IG9wdHMuY29sbGFwc2VDdWVUZXh0ICk7XHJcblx0XHR1aS5oZWFkaW5nXHJcblx0XHRcdC50b2dnbGVDbGFzcyggXCJ1aS1jb2xsYXBzaWJsZS1oZWFkaW5nLWNvbGxhcHNlZFwiLCBpc0NvbGxhcHNlIClcclxuXHRcdFx0LmZpbmQoIFwiYVwiICkuZmlyc3QoKVxyXG5cdFx0XHQudG9nZ2xlQ2xhc3MoIFwidWktaWNvbi1cIiArIG9wdHMuZXhwYW5kZWRJY29uLCAhaXNDb2xsYXBzZSApXHJcblxyXG5cdFx0XHQvLyBsb2dpYyBvciBjYXVzZSBzYW1lIGljb24gZm9yIGV4cGFuZGVkL2NvbGxhcHNlZCBzdGF0ZSB3b3VsZCByZW1vdmUgdGhlIHVpLWljb24tY2xhc3NcclxuXHRcdFx0LnRvZ2dsZUNsYXNzKCBcInVpLWljb24tXCIgKyBvcHRzLmNvbGxhcHNlZEljb24sICggaXNDb2xsYXBzZSB8fCBvcHRzLmV4cGFuZGVkSWNvbiA9PT0gb3B0cy5jb2xsYXBzZWRJY29uICkgKVxyXG5cdFx0XHQucmVtb3ZlQ2xhc3MoICQubW9iaWxlLmFjdGl2ZUJ0bkNsYXNzICk7XHJcblxyXG5cdFx0dGhpcy5lbGVtZW50LnRvZ2dsZUNsYXNzKCBcInVpLWNvbGxhcHNpYmxlLWNvbGxhcHNlZFwiLCBpc0NvbGxhcHNlICk7XHJcblx0XHR1aS5jb250ZW50XHJcblx0XHRcdC50b2dnbGVDbGFzcyggXCJ1aS1jb2xsYXBzaWJsZS1jb250ZW50LWNvbGxhcHNlZFwiLCBpc0NvbGxhcHNlIClcclxuXHRcdFx0LmF0dHIoIFwiYXJpYS1oaWRkZW5cIiwgaXNDb2xsYXBzZSApXHJcblx0XHRcdC50cmlnZ2VyKCBcInVwZGF0ZWxheW91dFwiICk7XHJcblx0XHR0aGlzLm9wdGlvbnMuY29sbGFwc2VkID0gaXNDb2xsYXBzZTtcclxuXHRcdHRoaXMuX3RyaWdnZXIoIGlzQ29sbGFwc2UgPyBcImNvbGxhcHNlXCIgOiBcImV4cGFuZFwiICk7XHJcblx0fSxcclxuXHJcblx0ZXhwYW5kOiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuX2hhbmRsZUV4cGFuZENvbGxhcHNlKCBmYWxzZSApO1xyXG5cdH0sXHJcblxyXG5cdGNvbGxhcHNlOiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuX2hhbmRsZUV4cGFuZENvbGxhcHNlKCB0cnVlICk7XHJcblx0fSxcclxuXHJcblx0X2Rlc3Ryb3k6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIHVpID0gdGhpcy5fdWksXHJcblx0XHRcdG9wdHMgPSB0aGlzLm9wdGlvbnM7XHJcblxyXG5cdFx0aWYgKCBvcHRzLmVuaGFuY2VkICkge1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCB1aS5wbGFjZWhvbGRlciApIHtcclxuXHRcdFx0dWkub3JpZ2luYWxIZWFkaW5nLmluc2VydEJlZm9yZSggdWkucGxhY2Vob2xkZXIgKTtcclxuXHRcdFx0dWkucGxhY2Vob2xkZXIucmVtb3ZlKCk7XHJcblx0XHRcdHVpLmhlYWRpbmcucmVtb3ZlKCk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHR1aS5zdGF0dXMucmVtb3ZlKCk7XHJcblx0XHRcdHVpLmhlYWRpbmdcclxuXHRcdFx0XHQucmVtb3ZlQ2xhc3MoIFwidWktY29sbGFwc2libGUtaGVhZGluZyB1aS1jb2xsYXBzaWJsZS1oZWFkaW5nLWNvbGxhcHNlZFwiIClcclxuXHRcdFx0XHQuY2hpbGRyZW4oKVxyXG5cdFx0XHRcdFx0LmNvbnRlbnRzKClcclxuXHRcdFx0XHRcdFx0LnVud3JhcCgpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHVpLmFuY2hvci5jb250ZW50cygpLnVud3JhcCgpO1xyXG5cdFx0dWkuY29udGVudC5jb250ZW50cygpLnVud3JhcCgpO1xyXG5cdFx0dGhpcy5lbGVtZW50XHJcblx0XHRcdC5yZW1vdmVDbGFzcyggXCJ1aS1jb2xsYXBzaWJsZSB1aS1jb2xsYXBzaWJsZS1jb2xsYXBzZWQgXCIgK1xyXG5cdFx0XHRcdFwidWktY29sbGFwc2libGUtdGhlbWVkLWNvbnRlbnQgdWktY29sbGFwc2libGUtaW5zZXQgdWktY29ybmVyLWFsbFwiICk7XHJcblx0fVxyXG59KTtcclxuXHJcbi8vIERlZmF1bHRzIHRvIGJlIHVzZWQgYnkgYWxsIGluc3RhbmNlcyBvZiBjb2xsYXBzaWJsZSBpZiBwZXItaW5zdGFuY2UgdmFsdWVzXHJcbi8vIGFyZSB1bnNldCBvciBpZiBub3RoaW5nIGlzIHNwZWNpZmllZCBieSB3YXkgb2YgaW5oZXJpdGFuY2UgZnJvbSBhbiBhY2NvcmRpb24uXHJcbi8vIE5vdGUgdGhhdCB0aGlzIGhhc2ggZG9lcyBub3QgY29udGFpbiBvcHRpb25zIFwiY29sbGFwc2VkXCIgb3IgXCJoZWFkaW5nXCIsXHJcbi8vIGJlY2F1c2UgdGhvc2UgYXJlIG5vdCBpbmhlcml0YWJsZS5cclxuJC5tb2JpbGUuY29sbGFwc2libGUuZGVmYXVsdHMgPSB7XHJcblx0ZXhwYW5kQ3VlVGV4dDogXCIgY2xpY2sgdG8gZXhwYW5kIGNvbnRlbnRzXCIsXHJcblx0Y29sbGFwc2VDdWVUZXh0OiBcIiBjbGljayB0byBjb2xsYXBzZSBjb250ZW50c1wiLFxyXG5cdGNvbGxhcHNlZEljb246IFwicGx1c1wiLFxyXG5cdGNvbnRlbnRUaGVtZTogXCJpbmhlcml0XCIsXHJcblx0ZXhwYW5kZWRJY29uOiBcIm1pbnVzXCIsXHJcblx0aWNvbnBvczogXCJsZWZ0XCIsXHJcblx0aW5zZXQ6IHRydWUsXHJcblx0Y29ybmVyczogdHJ1ZSxcclxuXHR0aGVtZTogXCJpbmhlcml0XCIsXHJcblx0bWluaTogZmFsc2VcclxufTtcclxuXHJcbn0pKCBqUXVlcnkgKTtcclxuXHJcbihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xyXG5cclxudmFyIHVpU2NyZWVuSGlkZGVuUmVnZXggPSAvXFxidWktc2NyZWVuLWhpZGRlblxcYi87XHJcbmZ1bmN0aW9uIG5vSGlkZGVuQ2xhc3MoIGVsZW1lbnRzICkge1xyXG5cdHZhciBpbmRleCxcclxuXHRcdGxlbmd0aCA9IGVsZW1lbnRzLmxlbmd0aCxcclxuXHRcdHJlc3VsdCA9IFtdO1xyXG5cclxuXHRmb3IgKCBpbmRleCA9IDA7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCsrICkge1xyXG5cdFx0aWYgKCAhZWxlbWVudHNbIGluZGV4IF0uY2xhc3NOYW1lLm1hdGNoKCB1aVNjcmVlbkhpZGRlblJlZ2V4ICkgKSB7XHJcblx0XHRcdHJlc3VsdC5wdXNoKCBlbGVtZW50c1sgaW5kZXggXSApO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0cmV0dXJuICQoIHJlc3VsdCApO1xyXG59XHJcblxyXG4kLm1vYmlsZS5iZWhhdmlvcnMuYWRkRmlyc3RMYXN0Q2xhc3NlcyA9IHtcclxuXHRfZ2V0VmlzaWJsZXM6IGZ1bmN0aW9uKCAkZWxzLCBjcmVhdGUgKSB7XHJcblx0XHR2YXIgdmlzaWJsZXM7XHJcblxyXG5cdFx0aWYgKCBjcmVhdGUgKSB7XHJcblx0XHRcdHZpc2libGVzID0gbm9IaWRkZW5DbGFzcyggJGVscyApO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0dmlzaWJsZXMgPSAkZWxzLmZpbHRlciggXCI6dmlzaWJsZVwiICk7XHJcblx0XHRcdGlmICggdmlzaWJsZXMubGVuZ3RoID09PSAwICkge1xyXG5cdFx0XHRcdHZpc2libGVzID0gbm9IaWRkZW5DbGFzcyggJGVscyApO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHZpc2libGVzO1xyXG5cdH0sXHJcblxyXG5cdF9hZGRGaXJzdExhc3RDbGFzc2VzOiBmdW5jdGlvbiggJGVscywgJHZpc2libGVzLCBjcmVhdGUgKSB7XHJcblx0XHQkZWxzLnJlbW92ZUNsYXNzKCBcInVpLWZpcnN0LWNoaWxkIHVpLWxhc3QtY2hpbGRcIiApO1xyXG5cdFx0JHZpc2libGVzLmVxKCAwICkuYWRkQ2xhc3MoIFwidWktZmlyc3QtY2hpbGRcIiApLmVuZCgpLmxhc3QoKS5hZGRDbGFzcyggXCJ1aS1sYXN0LWNoaWxkXCIgKTtcclxuXHRcdGlmICggIWNyZWF0ZSApIHtcclxuXHRcdFx0dGhpcy5lbGVtZW50LnRyaWdnZXIoIFwidXBkYXRlbGF5b3V0XCIgKTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfcmVtb3ZlRmlyc3RMYXN0Q2xhc3NlczogZnVuY3Rpb24oICRlbHMgKSB7XHJcblx0XHQkZWxzLnJlbW92ZUNsYXNzKCBcInVpLWZpcnN0LWNoaWxkIHVpLWxhc3QtY2hpbGRcIiApO1xyXG5cdH1cclxufTtcclxuXHJcbn0pKCBqUXVlcnkgKTtcclxuXHJcbihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xyXG5cclxudmFyIGNoaWxkQ29sbGFwc2libGVzU2VsZWN0b3IgPSBcIjptb2JpbGUtY29sbGFwc2libGUsIFwiICsgJC5tb2JpbGUuY29sbGFwc2libGUuaW5pdFNlbGVjdG9yO1xyXG5cclxuJC53aWRnZXQoIFwibW9iaWxlLmNvbGxhcHNpYmxlc2V0XCIsICQuZXh0ZW5kKCB7XHJcblxyXG5cdC8vIFRoZSBpbml0U2VsZWN0b3IgaXMgZGVwcmVjYXRlZCBhcyBvZiAxLjQuMC4gSW4gMS41LjAgd2Ugd2lsbCB1c2VcclxuXHQvLyA6anFtRGF0YShyb2xlPSdjb2xsYXBzaWJsZXNldCcpIHdoaWNoIHdpbGwgYWxsb3cgdXMgdG8gZ2V0IHJpZCBvZiB0aGUgbGluZVxyXG5cdC8vIGJlbG93IGFsdG9nZXRoZXIsIGJlY2F1c2UgdGhlIGF1dG9pbml0IHdpbGwgZ2VuZXJhdGUgc3VjaCBhbiBpbml0U2VsZWN0b3JcclxuXHRpbml0U2VsZWN0b3I6IFwiOmpxbURhdGEocm9sZT0nY29sbGFwc2libGUtc2V0JyksOmpxbURhdGEocm9sZT0nY29sbGFwc2libGVzZXQnKVwiLFxyXG5cclxuXHRvcHRpb25zOiAkLmV4dGVuZCgge1xyXG5cdFx0ZW5oYW5jZWQ6IGZhbHNlXHJcblx0fSwgJC5tb2JpbGUuY29sbGFwc2libGUuZGVmYXVsdHMgKSxcclxuXHJcblx0X2hhbmRsZUNvbGxhcHNpYmxlRXhwYW5kOiBmdW5jdGlvbiggZXZlbnQgKSB7XHJcblx0XHR2YXIgY2xvc2VzdENvbGxhcHNpYmxlID0gJCggZXZlbnQudGFyZ2V0ICkuY2xvc2VzdCggXCIudWktY29sbGFwc2libGVcIiApO1xyXG5cclxuXHRcdGlmICggY2xvc2VzdENvbGxhcHNpYmxlLnBhcmVudCgpLmlzKCBcIjptb2JpbGUtY29sbGFwc2libGVzZXQsIDpqcW1EYXRhKHJvbGU9J2NvbGxhcHNpYmxlLXNldCcpXCIgKSApIHtcclxuXHRcdFx0Y2xvc2VzdENvbGxhcHNpYmxlXHJcblx0XHRcdFx0LnNpYmxpbmdzKCBcIi51aS1jb2xsYXBzaWJsZTpub3QoLnVpLWNvbGxhcHNpYmxlLWNvbGxhcHNlZClcIiApXHJcblx0XHRcdFx0LmNvbGxhcHNpYmxlKCBcImNvbGxhcHNlXCIgKTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfY3JlYXRlOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBlbGVtID0gdGhpcy5lbGVtZW50LFxyXG5cdFx0XHRvcHRzID0gdGhpcy5vcHRpb25zO1xyXG5cclxuXHRcdCQuZXh0ZW5kKCB0aGlzLCB7XHJcblx0XHRcdF9jbGFzc2VzOiBcIlwiXHJcblx0XHR9KTtcclxuXHJcblx0XHRpZiAoICFvcHRzLmVuaGFuY2VkICkge1xyXG5cdFx0XHRlbGVtLmFkZENsYXNzKCBcInVpLWNvbGxhcHNpYmxlLXNldCBcIiArXHJcblx0XHRcdFx0dGhpcy5fdGhlbWVDbGFzc0Zyb21PcHRpb24oIFwidWktZ3JvdXAtdGhlbWUtXCIsIG9wdHMudGhlbWUgKSArIFwiIFwiICtcclxuXHRcdFx0XHQoIG9wdHMuY29ybmVycyAmJiBvcHRzLmluc2V0ID8gXCJ1aS1jb3JuZXItYWxsIFwiIDogXCJcIiApICk7XHJcblx0XHRcdHRoaXMuZWxlbWVudC5maW5kKCAkLm1vYmlsZS5jb2xsYXBzaWJsZS5pbml0U2VsZWN0b3IgKS5jb2xsYXBzaWJsZSgpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuX29uKCBlbGVtLCB7IGNvbGxhcHNpYmxlZXhwYW5kOiBcIl9oYW5kbGVDb2xsYXBzaWJsZUV4cGFuZFwiIH0gKTtcclxuXHR9LFxyXG5cclxuXHRfdGhlbWVDbGFzc0Zyb21PcHRpb246IGZ1bmN0aW9uKCBwcmVmaXgsIHZhbHVlICkge1xyXG5cdFx0cmV0dXJuICggdmFsdWUgPyAoIHZhbHVlID09PSBcIm5vbmVcIiA/IFwiXCIgOiBwcmVmaXggKyB2YWx1ZSApIDogXCJcIiApO1xyXG5cdH0sXHJcblxyXG5cdF9pbml0OiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuX3JlZnJlc2goIHRydWUgKTtcclxuXHJcblx0XHQvLyBCZWNhdXNlIHRoZSBjb3JuZXJzIGFyZSBoYW5kbGVkIGJ5IHRoZSBjb2xsYXBzaWJsZSBpdHNlbGYgYW5kIHRoZSBkZWZhdWx0IHN0YXRlIGlzIGNvbGxhcHNlZFxyXG5cdFx0Ly8gVGhhdCB3YXMgY2F1c2luZyBodHRwczovL2dpdGh1Yi5jb20vanF1ZXJ5L2pxdWVyeS1tb2JpbGUvaXNzdWVzLzQxMTZcclxuXHRcdHRoaXMuZWxlbWVudFxyXG5cdFx0XHQuY2hpbGRyZW4oIGNoaWxkQ29sbGFwc2libGVzU2VsZWN0b3IgKVxyXG5cdFx0XHQuZmlsdGVyKCBcIjpqcW1EYXRhKGNvbGxhcHNlZD0nZmFsc2UnKVwiIClcclxuXHRcdFx0LmNvbGxhcHNpYmxlKCBcImV4cGFuZFwiICk7XHJcblx0fSxcclxuXHJcblx0X3NldE9wdGlvbnM6IGZ1bmN0aW9uKCBvcHRpb25zICkge1xyXG5cdFx0dmFyIHJldCwgaGFzQ29ybmVycyxcclxuXHRcdFx0ZWxlbSA9IHRoaXMuZWxlbWVudCxcclxuXHRcdFx0dGhlbWVDbGFzcyA9IHRoaXMuX3RoZW1lQ2xhc3NGcm9tT3B0aW9uKCBcInVpLWdyb3VwLXRoZW1lLVwiLCBvcHRpb25zLnRoZW1lICk7XHJcblxyXG5cdFx0aWYgKCB0aGVtZUNsYXNzICkge1xyXG5cdFx0XHRlbGVtXHJcblx0XHRcdFx0LnJlbW92ZUNsYXNzKCB0aGlzLl90aGVtZUNsYXNzRnJvbU9wdGlvbiggXCJ1aS1ncm91cC10aGVtZS1cIiwgdGhpcy5vcHRpb25zLnRoZW1lICkgKVxyXG5cdFx0XHRcdC5hZGRDbGFzcyggdGhlbWVDbGFzcyApO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggb3B0aW9ucy5pbnNldCAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRoYXNDb3JuZXJzID0gISEoIG9wdGlvbnMuaW5zZXQgJiYgKCBvcHRpb25zLmNvcm5lcnMgfHwgdGhpcy5vcHRpb25zLmNvcm5lcnMgKSApO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggb3B0aW9ucy5jb3JuZXJzICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdGhhc0Nvcm5lcnMgPSAhISggb3B0aW9ucy5jb3JuZXJzICYmICggb3B0aW9ucy5pbnNldCB8fCB0aGlzLm9wdGlvbnMuaW5zZXQgKSApO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggaGFzQ29ybmVycyAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRlbGVtLnRvZ2dsZUNsYXNzKCBcInVpLWNvcm5lci1hbGxcIiwgaGFzQ29ybmVycyApO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldCA9IHRoaXMuX3N1cGVyKCBvcHRpb25zICk7XHJcblx0XHR0aGlzLmVsZW1lbnQuY2hpbGRyZW4oIFwiOm1vYmlsZS1jb2xsYXBzaWJsZVwiICkuY29sbGFwc2libGUoIFwicmVmcmVzaFwiICk7XHJcblx0XHRyZXR1cm4gcmV0O1xyXG5cdH0sXHJcblxyXG5cdF9kZXN0cm95OiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBlbCA9IHRoaXMuZWxlbWVudDtcclxuXHJcblx0XHR0aGlzLl9yZW1vdmVGaXJzdExhc3RDbGFzc2VzKCBlbC5jaGlsZHJlbiggY2hpbGRDb2xsYXBzaWJsZXNTZWxlY3RvciApICk7XHJcblx0XHRlbFxyXG5cdFx0XHQucmVtb3ZlQ2xhc3MoIFwidWktY29sbGFwc2libGUtc2V0IHVpLWNvcm5lci1hbGwgXCIgK1xyXG5cdFx0XHRcdHRoaXMuX3RoZW1lQ2xhc3NGcm9tT3B0aW9uKCBcInVpLWdyb3VwLXRoZW1lLVwiLCB0aGlzLm9wdGlvbnMudGhlbWUgKSApXHJcblx0XHRcdC5jaGlsZHJlbiggXCI6bW9iaWxlLWNvbGxhcHNpYmxlXCIgKVxyXG5cdFx0XHQuY29sbGFwc2libGUoIFwiZGVzdHJveVwiICk7XHJcblx0fSxcclxuXHJcblx0X3JlZnJlc2g6IGZ1bmN0aW9uKCBjcmVhdGUgKSB7XHJcblx0XHR2YXIgY29sbGFwc2libGVzSW5TZXQgPSB0aGlzLmVsZW1lbnQuY2hpbGRyZW4oIGNoaWxkQ29sbGFwc2libGVzU2VsZWN0b3IgKTtcclxuXHJcblx0XHR0aGlzLmVsZW1lbnQuZmluZCggJC5tb2JpbGUuY29sbGFwc2libGUuaW5pdFNlbGVjdG9yICkubm90KCBcIi51aS1jb2xsYXBzaWJsZVwiICkuY29sbGFwc2libGUoKTtcclxuXHJcblx0XHR0aGlzLl9hZGRGaXJzdExhc3RDbGFzc2VzKCBjb2xsYXBzaWJsZXNJblNldCwgdGhpcy5fZ2V0VmlzaWJsZXMoIGNvbGxhcHNpYmxlc0luU2V0LCBjcmVhdGUgKSwgY3JlYXRlICk7XHJcblx0fSxcclxuXHJcblx0cmVmcmVzaDogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLl9yZWZyZXNoKCBmYWxzZSApO1xyXG5cdH1cclxufSwgJC5tb2JpbGUuYmVoYXZpb3JzLmFkZEZpcnN0TGFzdENsYXNzZXMgKSApO1xyXG5cclxufSkoIGpRdWVyeSApO1xyXG5cclxuKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7XHJcblxyXG4vLyBEZXByZWNhdGVkIGluIDEuNFxyXG4kLmZuLmZpZWxkY29udGFpbiA9IGZ1bmN0aW9uKC8qIG9wdGlvbnMgKi8pIHtcclxuXHRyZXR1cm4gdGhpcy5hZGRDbGFzcyggXCJ1aS1maWVsZC1jb250YWluXCIgKTtcclxufTtcclxuXHJcbn0pKCBqUXVlcnkgKTtcclxuXHJcbihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xyXG5cclxuJC5mbi5ncmlkID0gZnVuY3Rpb24oIG9wdGlvbnMgKSB7XHJcblx0cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcclxuXHJcblx0XHR2YXIgJHRoaXMgPSAkKCB0aGlzICksXHJcblx0XHRcdG8gPSAkLmV4dGVuZCh7XHJcblx0XHRcdFx0Z3JpZDogbnVsbFxyXG5cdFx0XHR9LCBvcHRpb25zICksXHJcblx0XHRcdCRraWRzID0gJHRoaXMuY2hpbGRyZW4oKSxcclxuXHRcdFx0Z3JpZENvbHMgPSB7IHNvbG86MSwgYToyLCBiOjMsIGM6NCwgZDo1IH0sXHJcblx0XHRcdGdyaWQgPSBvLmdyaWQsXHJcblx0XHRcdGl0ZXJhdG9yLFxyXG5cdFx0XHRsZXR0ZXI7XHJcblxyXG5cdFx0XHRpZiAoICFncmlkICkge1xyXG5cdFx0XHRcdGlmICggJGtpZHMubGVuZ3RoIDw9IDUgKSB7XHJcblx0XHRcdFx0XHRmb3IgKCBsZXR0ZXIgaW4gZ3JpZENvbHMgKSB7XHJcblx0XHRcdFx0XHRcdGlmICggZ3JpZENvbHNbIGxldHRlciBdID09PSAka2lkcy5sZW5ndGggKSB7XHJcblx0XHRcdFx0XHRcdFx0Z3JpZCA9IGxldHRlcjtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRncmlkID0gXCJhXCI7XHJcblx0XHRcdFx0XHQkdGhpcy5hZGRDbGFzcyggXCJ1aS1ncmlkLWR1b1wiICk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHRcdGl0ZXJhdG9yID0gZ3JpZENvbHNbZ3JpZF07XHJcblxyXG5cdFx0JHRoaXMuYWRkQ2xhc3MoIFwidWktZ3JpZC1cIiArIGdyaWQgKTtcclxuXHJcblx0XHQka2lkcy5maWx0ZXIoIFwiOm50aC1jaGlsZChcIiArIGl0ZXJhdG9yICsgXCJuKzEpXCIgKS5hZGRDbGFzcyggXCJ1aS1ibG9jay1hXCIgKTtcclxuXHJcblx0XHRpZiAoIGl0ZXJhdG9yID4gMSApIHtcclxuXHRcdFx0JGtpZHMuZmlsdGVyKCBcIjpudGgtY2hpbGQoXCIgKyBpdGVyYXRvciArIFwibisyKVwiICkuYWRkQ2xhc3MoIFwidWktYmxvY2stYlwiICk7XHJcblx0XHR9XHJcblx0XHRpZiAoIGl0ZXJhdG9yID4gMiApIHtcclxuXHRcdFx0JGtpZHMuZmlsdGVyKCBcIjpudGgtY2hpbGQoXCIgKyBpdGVyYXRvciArIFwibiszKVwiICkuYWRkQ2xhc3MoIFwidWktYmxvY2stY1wiICk7XHJcblx0XHR9XHJcblx0XHRpZiAoIGl0ZXJhdG9yID4gMyApIHtcclxuXHRcdFx0JGtpZHMuZmlsdGVyKCBcIjpudGgtY2hpbGQoXCIgKyBpdGVyYXRvciArIFwibis0KVwiICkuYWRkQ2xhc3MoIFwidWktYmxvY2stZFwiICk7XHJcblx0XHR9XHJcblx0XHRpZiAoIGl0ZXJhdG9yID4gNCApIHtcclxuXHRcdFx0JGtpZHMuZmlsdGVyKCBcIjpudGgtY2hpbGQoXCIgKyBpdGVyYXRvciArIFwibis1KVwiICkuYWRkQ2xhc3MoIFwidWktYmxvY2stZVwiICk7XHJcblx0XHR9XHJcblx0fSk7XHJcbn07XHJcbn0pKCBqUXVlcnkgKTtcclxuXHJcbihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xyXG5cclxuJC53aWRnZXQoIFwibW9iaWxlLm5hdmJhclwiLCB7XHJcblx0b3B0aW9uczoge1xyXG5cdFx0aWNvbnBvczogXCJ0b3BcIixcclxuXHRcdGdyaWQ6IG51bGxcclxuXHR9LFxyXG5cclxuXHRfY3JlYXRlOiBmdW5jdGlvbigpIHtcclxuXHJcblx0XHR2YXIgJG5hdmJhciA9IHRoaXMuZWxlbWVudCxcclxuXHRcdFx0JG5hdmJ0bnMgPSAkbmF2YmFyLmZpbmQoIFwiYSwgYnV0dG9uXCIgKSxcclxuXHRcdFx0aWNvbnBvcyA9ICRuYXZidG5zLmZpbHRlciggXCI6anFtRGF0YShpY29uKVwiICkubGVuZ3RoID8gdGhpcy5vcHRpb25zLmljb25wb3MgOiB1bmRlZmluZWQ7XHJcblxyXG5cdFx0JG5hdmJhci5hZGRDbGFzcyggXCJ1aS1uYXZiYXJcIiApXHJcblx0XHRcdC5hdHRyKCBcInJvbGVcIiwgXCJuYXZpZ2F0aW9uXCIgKVxyXG5cdFx0XHQuZmluZCggXCJ1bFwiIClcclxuXHRcdFx0LmpxbUVuaGFuY2VhYmxlKClcclxuXHRcdFx0LmdyaWQoeyBncmlkOiB0aGlzLm9wdGlvbnMuZ3JpZCB9KTtcclxuXHJcblx0XHQkbmF2YnRuc1xyXG5cdFx0XHQuZWFjaCggZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0dmFyIGljb24gPSAkLm1vYmlsZS5nZXRBdHRyaWJ1dGUoIHRoaXMsIFwiaWNvblwiICksXHJcblx0XHRcdFx0XHR0aGVtZSA9ICQubW9iaWxlLmdldEF0dHJpYnV0ZSggdGhpcywgXCJ0aGVtZVwiICksXHJcblx0XHRcdFx0XHRjbGFzc2VzID0gXCJ1aS1idG5cIjtcclxuXHJcblx0XHRcdFx0aWYgKCB0aGVtZSApIHtcclxuXHRcdFx0XHRcdGNsYXNzZXMgKz0gXCIgdWktYnRuLVwiICsgdGhlbWU7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGlmICggaWNvbiApIHtcclxuXHRcdFx0XHRcdGNsYXNzZXMgKz0gXCIgdWktaWNvbi1cIiArIGljb24gKyBcIiB1aS1idG4taWNvbi1cIiArIGljb25wb3M7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdCQoIHRoaXMgKS5hZGRDbGFzcyggY2xhc3NlcyApO1xyXG5cdFx0XHR9KTtcclxuXHJcblx0XHQkbmF2YmFyLmRlbGVnYXRlKCBcImFcIiwgXCJ2Y2xpY2tcIiwgZnVuY3Rpb24oIC8qIGV2ZW50ICovICkge1xyXG5cdFx0XHR2YXIgYWN0aXZlQnRuID0gJCggdGhpcyApO1xyXG5cclxuXHRcdFx0aWYgKCAhKCBhY3RpdmVCdG4uaGFzQ2xhc3MoIFwidWktc3RhdGUtZGlzYWJsZWRcIiApIHx8XHJcblxyXG5cdFx0XHRcdC8vIERFUFJFQ0FURUQgYXMgb2YgMS40LjAgLSByZW1vdmUgYWZ0ZXIgMS40LjAgcmVsZWFzZVxyXG5cdFx0XHRcdC8vIG9ubHkgdWktc3RhdGUtZGlzYWJsZWQgc2hvdWxkIGJlIHByZXNlbnQgdGhlcmVhZnRlclxyXG5cdFx0XHRcdGFjdGl2ZUJ0bi5oYXNDbGFzcyggXCJ1aS1kaXNhYmxlZFwiICkgfHxcclxuXHRcdFx0XHRhY3RpdmVCdG4uaGFzQ2xhc3MoICQubW9iaWxlLmFjdGl2ZUJ0bkNsYXNzICkgKSApIHtcclxuXHJcblx0XHRcdFx0JG5hdmJ0bnMucmVtb3ZlQ2xhc3MoICQubW9iaWxlLmFjdGl2ZUJ0bkNsYXNzICk7XHJcblx0XHRcdFx0YWN0aXZlQnRuLmFkZENsYXNzKCAkLm1vYmlsZS5hY3RpdmVCdG5DbGFzcyApO1xyXG5cclxuXHRcdFx0XHQvLyBUaGUgY29kZSBiZWxvdyBpcyBhIHdvcmthcm91bmQgdG8gZml4ICMxMTgxXHJcblx0XHRcdFx0JCggZG9jdW1lbnQgKS5vbmUoIFwicGFnZWhpZGVcIiwgZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHRhY3RpdmVCdG4ucmVtb3ZlQ2xhc3MoICQubW9iaWxlLmFjdGl2ZUJ0bkNsYXNzICk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIEJ1dHRvbnMgaW4gdGhlIG5hdmJhciB3aXRoIHVpLXN0YXRlLXBlcnNpc3QgY2xhc3Mgc2hvdWxkIHJlZ2FpbiB0aGVpciBhY3RpdmUgc3RhdGUgYmVmb3JlIHBhZ2Ugc2hvd1xyXG5cdFx0JG5hdmJhci5jbG9zZXN0KCBcIi51aS1wYWdlXCIgKS5iaW5kKCBcInBhZ2ViZWZvcmVzaG93XCIsIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHQkbmF2YnRucy5maWx0ZXIoIFwiLnVpLXN0YXRlLXBlcnNpc3RcIiApLmFkZENsYXNzKCAkLm1vYmlsZS5hY3RpdmVCdG5DbGFzcyApO1xyXG5cdFx0fSk7XHJcblx0fVxyXG59KTtcclxuXHJcbn0pKCBqUXVlcnkgKTtcclxuXHJcbihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xyXG5cclxudmFyIGdldEF0dHIgPSAkLm1vYmlsZS5nZXRBdHRyaWJ1dGU7XHJcblxyXG4kLndpZGdldCggXCJtb2JpbGUubGlzdHZpZXdcIiwgJC5leHRlbmQoIHtcclxuXHJcblx0b3B0aW9uczoge1xyXG5cdFx0dGhlbWU6IG51bGwsXHJcblx0XHRjb3VudFRoZW1lOiBudWxsLCAvKiBEZXByZWNhdGVkIGluIDEuNCAqL1xyXG5cdFx0ZGl2aWRlclRoZW1lOiBudWxsLFxyXG5cdFx0aWNvbjogXCJjYXJhdC1yXCIsXHJcblx0XHRzcGxpdEljb246IFwiY2FyYXQtclwiLFxyXG5cdFx0c3BsaXRUaGVtZTogbnVsbCxcclxuXHRcdGNvcm5lcnM6IHRydWUsXHJcblx0XHRzaGFkb3c6IHRydWUsXHJcblx0XHRpbnNldDogZmFsc2VcclxuXHR9LFxyXG5cclxuXHRfY3JlYXRlOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciB0ID0gdGhpcyxcclxuXHRcdFx0bGlzdHZpZXdDbGFzc2VzID0gXCJcIjtcclxuXHJcblx0XHRsaXN0dmlld0NsYXNzZXMgKz0gdC5vcHRpb25zLmluc2V0ID8gXCIgdWktbGlzdHZpZXctaW5zZXRcIiA6IFwiXCI7XHJcblxyXG5cdFx0aWYgKCAhIXQub3B0aW9ucy5pbnNldCApIHtcclxuXHRcdFx0bGlzdHZpZXdDbGFzc2VzICs9IHQub3B0aW9ucy5jb3JuZXJzID8gXCIgdWktY29ybmVyLWFsbFwiIDogXCJcIjtcclxuXHRcdFx0bGlzdHZpZXdDbGFzc2VzICs9IHQub3B0aW9ucy5zaGFkb3cgPyBcIiB1aS1zaGFkb3dcIiA6IFwiXCI7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gY3JlYXRlIGxpc3R2aWV3IG1hcmt1cFxyXG5cdFx0dC5lbGVtZW50LmFkZENsYXNzKCBcIiB1aS1saXN0dmlld1wiICsgbGlzdHZpZXdDbGFzc2VzICk7XHJcblxyXG5cdFx0dC5yZWZyZXNoKCB0cnVlICk7XHJcblx0fSxcclxuXHJcblx0Ly8gVE9ETzogUmVtb3ZlIGluIDEuNVxyXG5cdF9maW5kRmlyc3RFbGVtZW50QnlUYWdOYW1lOiBmdW5jdGlvbiggZWxlLCBuZXh0UHJvcCwgbGNOYW1lLCB1Y05hbWUgKSB7XHJcblx0XHR2YXIgZGljdCA9IHt9O1xyXG5cdFx0ZGljdFsgbGNOYW1lIF0gPSBkaWN0WyB1Y05hbWUgXSA9IHRydWU7XHJcblx0XHR3aGlsZSAoIGVsZSApIHtcclxuXHRcdFx0aWYgKCBkaWN0WyBlbGUubm9kZU5hbWUgXSApIHtcclxuXHRcdFx0XHRyZXR1cm4gZWxlO1xyXG5cdFx0XHR9XHJcblx0XHRcdGVsZSA9IGVsZVsgbmV4dFByb3AgXTtcclxuXHRcdH1cclxuXHRcdHJldHVybiBudWxsO1xyXG5cdH0sXHJcblx0Ly8gVE9ETzogUmVtb3ZlIGluIDEuNVxyXG5cdF9hZGRUaHVtYkNsYXNzZXM6IGZ1bmN0aW9uKCBjb250YWluZXJzICkge1xyXG5cdFx0dmFyIGksIGltZywgbGVuID0gY29udGFpbmVycy5sZW5ndGg7XHJcblx0XHRmb3IgKCBpID0gMDsgaSA8IGxlbjsgaSsrICkge1xyXG5cdFx0XHRpbWcgPSAkKCB0aGlzLl9maW5kRmlyc3RFbGVtZW50QnlUYWdOYW1lKCBjb250YWluZXJzWyBpIF0uZmlyc3RDaGlsZCwgXCJuZXh0U2libGluZ1wiLCBcImltZ1wiLCBcIklNR1wiICkgKTtcclxuXHRcdFx0aWYgKCBpbWcubGVuZ3RoICkge1xyXG5cdFx0XHRcdCQoIHRoaXMuX2ZpbmRGaXJzdEVsZW1lbnRCeVRhZ05hbWUoIGltZ1sgMCBdLnBhcmVudE5vZGUsIFwicGFyZW50Tm9kZVwiLCBcImxpXCIsIFwiTElcIiApICkuYWRkQ2xhc3MoIGltZy5oYXNDbGFzcyggXCJ1aS1saS1pY29uXCIgKSA/IFwidWktbGktaGFzLWljb25cIiA6IFwidWktbGktaGFzLXRodW1iXCIgKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9nZXRDaGlsZHJlbkJ5VGFnTmFtZTogZnVuY3Rpb24oIGVsZSwgbGNOYW1lLCB1Y05hbWUgKSB7XHJcblx0XHR2YXIgcmVzdWx0cyA9IFtdLFxyXG5cdFx0XHRkaWN0ID0ge307XHJcblx0XHRkaWN0WyBsY05hbWUgXSA9IGRpY3RbIHVjTmFtZSBdID0gdHJ1ZTtcclxuXHRcdGVsZSA9IGVsZS5maXJzdENoaWxkO1xyXG5cdFx0d2hpbGUgKCBlbGUgKSB7XHJcblx0XHRcdGlmICggZGljdFsgZWxlLm5vZGVOYW1lIF0gKSB7XHJcblx0XHRcdFx0cmVzdWx0cy5wdXNoKCBlbGUgKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRlbGUgPSBlbGUubmV4dFNpYmxpbmc7XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gJCggcmVzdWx0cyApO1xyXG5cdH0sXHJcblxyXG5cdF9iZWZvcmVMaXN0dmlld1JlZnJlc2g6ICQubm9vcCxcclxuXHRfYWZ0ZXJMaXN0dmlld1JlZnJlc2g6ICQubm9vcCxcclxuXHJcblx0cmVmcmVzaDogZnVuY3Rpb24oIGNyZWF0ZSApIHtcclxuXHRcdHZhciBidXR0b25DbGFzcywgcG9zLCBudW1saSwgaXRlbSwgaXRlbUNsYXNzLCBpdGVtVGhlbWUsIGl0ZW1JY29uLCBpY29uLCBhLFxyXG5cdFx0XHRpc0RpdmlkZXIsIHN0YXJ0Q291bnQsIG5ld1N0YXJ0Q291bnQsIHZhbHVlLCBsYXN0LCBzcGxpdHRoZW1lLCBzcGxpdFRoZW1lQ2xhc3MsIHNwbGl0aWNvbixcclxuXHRcdFx0YWx0QnV0dG9uQ2xhc3MsIGRpdmlkZXJUaGVtZSwgbGksXHJcblx0XHRcdG8gPSB0aGlzLm9wdGlvbnMsXHJcblx0XHRcdCRsaXN0ID0gdGhpcy5lbGVtZW50LFxyXG5cdFx0XHRvbCA9ICEhJC5ub2RlTmFtZSggJGxpc3RbIDAgXSwgXCJvbFwiICksXHJcblx0XHRcdHN0YXJ0ID0gJGxpc3QuYXR0ciggXCJzdGFydFwiICksXHJcblx0XHRcdGl0ZW1DbGFzc0RpY3QgPSB7fSxcclxuXHRcdFx0Y291bnRCdWJibGVzID0gJGxpc3QuZmluZCggXCIudWktbGktY291bnRcIiApLFxyXG5cdFx0XHRjb3VudFRoZW1lID0gZ2V0QXR0ciggJGxpc3RbIDAgXSwgXCJjb3VudHRoZW1lXCIgKSB8fCB0aGlzLm9wdGlvbnMuY291bnRUaGVtZSxcclxuXHRcdFx0Y291bnRUaGVtZUNsYXNzID0gY291bnRUaGVtZSA/IFwidWktYm9keS1cIiArIGNvdW50VGhlbWUgOiBcInVpLWJvZHktaW5oZXJpdFwiO1xyXG5cclxuXHRcdGlmICggby50aGVtZSApIHtcclxuXHRcdFx0JGxpc3QuYWRkQ2xhc3MoIFwidWktZ3JvdXAtdGhlbWUtXCIgKyBvLnRoZW1lICk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gQ2hlY2sgaWYgYSBzdGFydCBhdHRyaWJ1dGUgaGFzIGJlZW4gc2V0IHdoaWxlIHRha2luZyBhIHZhbHVlIG9mIDAgaW50byBhY2NvdW50XHJcblx0XHRpZiAoIG9sICYmICggc3RhcnQgfHwgc3RhcnQgPT09IDAgKSApIHtcclxuXHRcdFx0c3RhcnRDb3VudCA9IHBhcnNlSW50KCBzdGFydCwgMTAgKSAtIDE7XHJcblx0XHRcdCRsaXN0LmNzcyggXCJjb3VudGVyLXJlc2V0XCIsIFwibGlzdG51bWJlcmluZyBcIiArIHN0YXJ0Q291bnQgKTtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLl9iZWZvcmVMaXN0dmlld1JlZnJlc2goKTtcclxuXHJcblx0XHRsaSA9IHRoaXMuX2dldENoaWxkcmVuQnlUYWdOYW1lKCAkbGlzdFsgMCBdLCBcImxpXCIsIFwiTElcIiApO1xyXG5cclxuXHRcdGZvciAoIHBvcyA9IDAsIG51bWxpID0gbGkubGVuZ3RoOyBwb3MgPCBudW1saTsgcG9zKysgKSB7XHJcblx0XHRcdGl0ZW0gPSBsaS5lcSggcG9zICk7XHJcblx0XHRcdGl0ZW1DbGFzcyA9IFwiXCI7XHJcblxyXG5cdFx0XHRpZiAoIGNyZWF0ZSB8fCBpdGVtWyAwIF0uY2xhc3NOYW1lLnNlYXJjaCggL1xcYnVpLWxpLXN0YXRpY1xcYnxcXGJ1aS1saS1kaXZpZGVyXFxiLyApIDwgMCApIHtcclxuXHRcdFx0XHRhID0gdGhpcy5fZ2V0Q2hpbGRyZW5CeVRhZ05hbWUoIGl0ZW1bIDAgXSwgXCJhXCIsIFwiQVwiICk7XHJcblx0XHRcdFx0aXNEaXZpZGVyID0gKCBnZXRBdHRyKCBpdGVtWyAwIF0sIFwicm9sZVwiICkgPT09IFwibGlzdC1kaXZpZGVyXCIgKTtcclxuXHRcdFx0XHR2YWx1ZSA9IGl0ZW0uYXR0ciggXCJ2YWx1ZVwiICk7XHJcblx0XHRcdFx0aXRlbVRoZW1lID0gZ2V0QXR0ciggaXRlbVsgMCBdLCBcInRoZW1lXCIgKTtcclxuXHJcblx0XHRcdFx0aWYgKCBhLmxlbmd0aCAmJiBhWyAwIF0uY2xhc3NOYW1lLnNlYXJjaCggL1xcYnVpLWJ0blxcYi8gKSA8IDAgJiYgIWlzRGl2aWRlciApIHtcclxuXHRcdFx0XHRcdGl0ZW1JY29uID0gZ2V0QXR0ciggaXRlbVsgMCBdLCBcImljb25cIiApO1xyXG5cdFx0XHRcdFx0aWNvbiA9ICggaXRlbUljb24gPT09IGZhbHNlICkgPyBmYWxzZSA6ICggaXRlbUljb24gfHwgby5pY29uICk7XHJcblxyXG5cdFx0XHRcdFx0Ly8gVE9ETzogUmVtb3ZlIGluIDEuNSB0b2dldGhlciB3aXRoIGxpbmtzLmpzIChsaW5rcy5qcyAvIC51aS1saW5rIGRlcHJlY2F0ZWQgaW4gMS40KVxyXG5cdFx0XHRcdFx0YS5yZW1vdmVDbGFzcyggXCJ1aS1saW5rXCIgKTtcclxuXHJcblx0XHRcdFx0XHRidXR0b25DbGFzcyA9IFwidWktYnRuXCI7XHJcblxyXG5cdFx0XHRcdFx0aWYgKCBpdGVtVGhlbWUgKSB7XHJcblx0XHRcdFx0XHRcdGJ1dHRvbkNsYXNzICs9IFwiIHVpLWJ0bi1cIiArIGl0ZW1UaGVtZTtcclxuXHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHRpZiAoIGEubGVuZ3RoID4gMSApIHtcclxuXHRcdFx0XHRcdFx0aXRlbUNsYXNzID0gXCJ1aS1saS1oYXMtYWx0XCI7XHJcblxyXG5cdFx0XHRcdFx0XHRsYXN0ID0gYS5sYXN0KCk7XHJcblx0XHRcdFx0XHRcdHNwbGl0dGhlbWUgPSBnZXRBdHRyKCBsYXN0WyAwIF0sIFwidGhlbWVcIiApIHx8IG8uc3BsaXRUaGVtZSB8fCBnZXRBdHRyKCBpdGVtWyAwIF0sIFwidGhlbWVcIiwgdHJ1ZSApO1xyXG5cdFx0XHRcdFx0XHRzcGxpdFRoZW1lQ2xhc3MgPSBzcGxpdHRoZW1lID8gXCIgdWktYnRuLVwiICsgc3BsaXR0aGVtZSA6IFwiXCI7XHJcblx0XHRcdFx0XHRcdHNwbGl0aWNvbiA9IGdldEF0dHIoIGxhc3RbIDAgXSwgXCJpY29uXCIgKSB8fCBnZXRBdHRyKCBpdGVtWyAwIF0sIFwiaWNvblwiICkgfHwgby5zcGxpdEljb247XHJcblx0XHRcdFx0XHRcdGFsdEJ1dHRvbkNsYXNzID0gXCJ1aS1idG4gdWktYnRuLWljb24tbm90ZXh0IHVpLWljb24tXCIgKyBzcGxpdGljb24gKyBzcGxpdFRoZW1lQ2xhc3M7XHJcblxyXG5cdFx0XHRcdFx0XHRsYXN0XHJcblx0XHRcdFx0XHRcdFx0LmF0dHIoIFwidGl0bGVcIiwgJC50cmltKCBsYXN0LmdldEVuY29kZWRUZXh0KCkgKSApXHJcblx0XHRcdFx0XHRcdFx0LmFkZENsYXNzKCBhbHRCdXR0b25DbGFzcyApXHJcblx0XHRcdFx0XHRcdFx0LmVtcHR5KCk7XHJcblxyXG5cdFx0XHRcdFx0XHQvLyBSZWR1Y2UgdG8gdGhlIGZpcnN0IGFuY2hvciwgYmVjYXVzZSBvbmx5IHRoZSBmaXJzdCBnZXRzIHRoZSBidXR0b25DbGFzc1xyXG5cdFx0XHRcdFx0XHRhID0gYS5maXJzdCgpO1xyXG5cdFx0XHRcdFx0fSBlbHNlIGlmICggaWNvbiApIHtcclxuXHRcdFx0XHRcdFx0YnV0dG9uQ2xhc3MgKz0gXCIgdWktYnRuLWljb24tcmlnaHQgdWktaWNvbi1cIiArIGljb247XHJcblx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0Ly8gQXBwbHkgYnV0dG9uQ2xhc3MgdG8gdGhlIChmaXJzdCkgYW5jaG9yXHJcblx0XHRcdFx0XHRhLmFkZENsYXNzKCBidXR0b25DbGFzcyApO1xyXG5cdFx0XHRcdH0gZWxzZSBpZiAoIGlzRGl2aWRlciApIHtcclxuXHRcdFx0XHRcdGRpdmlkZXJUaGVtZSA9ICggZ2V0QXR0ciggaXRlbVsgMCBdLCBcInRoZW1lXCIgKSB8fCBvLmRpdmlkZXJUaGVtZSB8fCBvLnRoZW1lICk7XHJcblxyXG5cdFx0XHRcdFx0aXRlbUNsYXNzID0gXCJ1aS1saS1kaXZpZGVyIHVpLWJhci1cIiArICggZGl2aWRlclRoZW1lID8gZGl2aWRlclRoZW1lIDogXCJpbmhlcml0XCIgKTtcclxuXHJcblx0XHRcdFx0XHRpdGVtLmF0dHIoIFwicm9sZVwiLCBcImhlYWRpbmdcIiApO1xyXG5cdFx0XHRcdH0gZWxzZSBpZiAoIGEubGVuZ3RoIDw9IDAgKSB7XHJcblx0XHRcdFx0XHRpdGVtQ2xhc3MgPSBcInVpLWxpLXN0YXRpYyB1aS1ib2R5LVwiICsgKCBpdGVtVGhlbWUgPyBpdGVtVGhlbWUgOiBcImluaGVyaXRcIiApO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRpZiAoIG9sICYmIHZhbHVlICkge1xyXG5cdFx0XHRcdFx0bmV3U3RhcnRDb3VudCA9IHBhcnNlSW50KCB2YWx1ZSAsIDEwICkgLSAxO1xyXG5cclxuXHRcdFx0XHRcdGl0ZW0uY3NzKCBcImNvdW50ZXItcmVzZXRcIiwgXCJsaXN0bnVtYmVyaW5nIFwiICsgbmV3U3RhcnRDb3VudCApO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gSW5zdGVhZCBvZiBzZXR0aW5nIGl0ZW0gY2xhc3MgZGlyZWN0bHkgb24gdGhlIGxpc3QgaXRlbVxyXG5cdFx0XHQvLyBhdCB0aGlzIHBvaW50IGluIHRpbWUsIHB1c2ggdGhlIGl0ZW0gaW50byBhIGRpY3Rpb25hcnlcclxuXHRcdFx0Ly8gdGhhdCB0ZWxscyB1cyB3aGF0IGNsYXNzIHRvIHNldCBvbiBpdCBzbyB3ZSBjYW4gZG8gdGhpcyBhZnRlciB0aGlzXHJcblx0XHRcdC8vIHByb2Nlc3NpbmcgbG9vcCBpcyBmaW5pc2hlZC5cclxuXHJcblx0XHRcdGlmICggIWl0ZW1DbGFzc0RpY3RbIGl0ZW1DbGFzcyBdICkge1xyXG5cdFx0XHRcdGl0ZW1DbGFzc0RpY3RbIGl0ZW1DbGFzcyBdID0gW107XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGl0ZW1DbGFzc0RpY3RbIGl0ZW1DbGFzcyBdLnB1c2goIGl0ZW1bIDAgXSApO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIFNldCB0aGUgYXBwcm9wcmlhdGUgbGlzdHZpZXcgaXRlbSBjbGFzc2VzIG9uIGVhY2ggbGlzdCBpdGVtLlxyXG5cdFx0Ly8gVGhlIG1haW4gcmVhc29uIHdlIGRpZG4ndCBkbyB0aGlzXHJcblx0XHQvLyBpbiB0aGUgZm9yLWxvb3AgYWJvdmUgaXMgYmVjYXVzZSB3ZSBjYW4gZWxpbWluYXRlIHBlci1pdGVtIGZ1bmN0aW9uIG92ZXJoZWFkXHJcblx0XHQvLyBieSBjYWxsaW5nIGFkZENsYXNzKCkgYW5kIGNoaWxkcmVuKCkgb25jZSBvciB0d2ljZSBhZnRlcndhcmRzLiBUaGlzXHJcblx0XHQvLyBjYW4gZ2l2ZSB1cyBhIHNpZ25pZmljYW50IGJvb3N0IG9uIHBsYXRmb3JtcyBsaWtlIFdQNy41LlxyXG5cclxuXHRcdGZvciAoIGl0ZW1DbGFzcyBpbiBpdGVtQ2xhc3NEaWN0ICkge1xyXG5cdFx0XHQkKCBpdGVtQ2xhc3NEaWN0WyBpdGVtQ2xhc3MgXSApLmFkZENsYXNzKCBpdGVtQ2xhc3MgKTtcclxuXHRcdH1cclxuXHJcblx0XHRjb3VudEJ1YmJsZXMuZWFjaCggZnVuY3Rpb24oKSB7XHJcblx0XHRcdCQoIHRoaXMgKS5jbG9zZXN0KCBcImxpXCIgKS5hZGRDbGFzcyggXCJ1aS1saS1oYXMtY291bnRcIiApO1xyXG5cdFx0fSk7XHJcblx0XHRpZiAoIGNvdW50VGhlbWVDbGFzcyApIHtcclxuXHRcdFx0Y291bnRCdWJibGVzLm5vdCggXCJbY2xhc3MqPSd1aS1ib2R5LSddXCIgKS5hZGRDbGFzcyggY291bnRUaGVtZUNsYXNzICk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gRGVwcmVjYXRlZCBpbiAxLjQuIEZyb20gMS41IHlvdSBoYXZlIHRvIGFkZCBjbGFzcyB1aS1saS1oYXMtdGh1bWIgb3IgdWktbGktaGFzLWljb24gdG8gdGhlIExJLlxyXG5cdFx0dGhpcy5fYWRkVGh1bWJDbGFzc2VzKCBsaSApO1xyXG5cdFx0dGhpcy5fYWRkVGh1bWJDbGFzc2VzKCBsaS5maW5kKCBcIi51aS1idG5cIiApICk7XHJcblxyXG5cdFx0dGhpcy5fYWZ0ZXJMaXN0dmlld1JlZnJlc2goKTtcclxuXHJcblx0XHR0aGlzLl9hZGRGaXJzdExhc3RDbGFzc2VzKCBsaSwgdGhpcy5fZ2V0VmlzaWJsZXMoIGxpLCBjcmVhdGUgKSwgY3JlYXRlICk7XHJcblx0fVxyXG59LCAkLm1vYmlsZS5iZWhhdmlvcnMuYWRkRmlyc3RMYXN0Q2xhc3NlcyApICk7XHJcblxyXG59KSggalF1ZXJ5ICk7XHJcblxyXG4oZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcclxuXHJcbmZ1bmN0aW9uIGRlZmF1bHRBdXRvZGl2aWRlcnNTZWxlY3RvciggZWx0ICkge1xyXG5cdC8vIGxvb2sgZm9yIHRoZSB0ZXh0IGluIHRoZSBnaXZlbiBlbGVtZW50XHJcblx0dmFyIHRleHQgPSAkLnRyaW0oIGVsdC50ZXh0KCkgKSB8fCBudWxsO1xyXG5cclxuXHRpZiAoICF0ZXh0ICkge1xyXG5cdFx0cmV0dXJuIG51bGw7XHJcblx0fVxyXG5cclxuXHQvLyBjcmVhdGUgdGhlIHRleHQgZm9yIHRoZSBkaXZpZGVyIChmaXJzdCB1cHBlcmNhc2VkIGxldHRlcilcclxuXHR0ZXh0ID0gdGV4dC5zbGljZSggMCwgMSApLnRvVXBwZXJDYXNlKCk7XHJcblxyXG5cdHJldHVybiB0ZXh0O1xyXG59XHJcblxyXG4kLndpZGdldCggXCJtb2JpbGUubGlzdHZpZXdcIiwgJC5tb2JpbGUubGlzdHZpZXcsIHtcclxuXHRvcHRpb25zOiB7XHJcblx0XHRhdXRvZGl2aWRlcnM6IGZhbHNlLFxyXG5cdFx0YXV0b2RpdmlkZXJzU2VsZWN0b3I6IGRlZmF1bHRBdXRvZGl2aWRlcnNTZWxlY3RvclxyXG5cdH0sXHJcblxyXG5cdF9iZWZvcmVMaXN0dmlld1JlZnJlc2g6IGZ1bmN0aW9uKCkge1xyXG5cdFx0aWYgKCB0aGlzLm9wdGlvbnMuYXV0b2RpdmlkZXJzICkge1xyXG5cdFx0XHR0aGlzLl9yZXBsYWNlRGl2aWRlcnMoKTtcclxuXHRcdFx0dGhpcy5fc3VwZXJBcHBseSggYXJndW1lbnRzICk7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X3JlcGxhY2VEaXZpZGVyczogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgaSwgbGlzLCBsaSwgZGl2aWRlclRleHQsXHJcblx0XHRcdGxhc3REaXZpZGVyVGV4dCA9IG51bGwsXHJcblx0XHRcdGxpc3QgPSB0aGlzLmVsZW1lbnQsXHJcblx0XHRcdGRpdmlkZXI7XHJcblxyXG5cdFx0bGlzdC5jaGlsZHJlbiggXCJsaTpqcW1EYXRhKHJvbGU9J2xpc3QtZGl2aWRlcicpXCIgKS5yZW1vdmUoKTtcclxuXHJcblx0XHRsaXMgPSBsaXN0LmNoaWxkcmVuKCBcImxpXCIgKTtcclxuXHJcblx0XHRmb3IgKCBpID0gMDsgaSA8IGxpcy5sZW5ndGggOyBpKysgKSB7XHJcblx0XHRcdGxpID0gbGlzWyBpIF07XHJcblx0XHRcdGRpdmlkZXJUZXh0ID0gdGhpcy5vcHRpb25zLmF1dG9kaXZpZGVyc1NlbGVjdG9yKCAkKCBsaSApICk7XHJcblxyXG5cdFx0XHRpZiAoIGRpdmlkZXJUZXh0ICYmIGxhc3REaXZpZGVyVGV4dCAhPT0gZGl2aWRlclRleHQgKSB7XHJcblx0XHRcdFx0ZGl2aWRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwibGlcIiApO1xyXG5cdFx0XHRcdGRpdmlkZXIuYXBwZW5kQ2hpbGQoIGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCBkaXZpZGVyVGV4dCApICk7XHJcblx0XHRcdFx0ZGl2aWRlci5zZXRBdHRyaWJ1dGUoIFwiZGF0YS1cIiArICQubW9iaWxlLm5zICsgXCJyb2xlXCIsIFwibGlzdC1kaXZpZGVyXCIgKTtcclxuXHRcdFx0XHRsaS5wYXJlbnROb2RlLmluc2VydEJlZm9yZSggZGl2aWRlciwgbGkgKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0bGFzdERpdmlkZXJUZXh0ID0gZGl2aWRlclRleHQ7XHJcblx0XHR9XHJcblx0fVxyXG59KTtcclxuXHJcbn0pKCBqUXVlcnkgKTtcclxuXHJcbihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xyXG5cclxudmFyIHJkaXZpZGVyID0gLyhefFxccyl1aS1saS1kaXZpZGVyKCR8XFxzKS8sXHJcblx0cmhpZGRlbiA9IC8oXnxcXHMpdWktc2NyZWVuLWhpZGRlbigkfFxccykvO1xyXG5cclxuJC53aWRnZXQoIFwibW9iaWxlLmxpc3R2aWV3XCIsICQubW9iaWxlLmxpc3R2aWV3LCB7XHJcblx0b3B0aW9uczoge1xyXG5cdFx0aGlkZURpdmlkZXJzOiBmYWxzZVxyXG5cdH0sXHJcblxyXG5cdF9hZnRlckxpc3R2aWV3UmVmcmVzaDogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgaXRlbXMsIGlkeCwgaXRlbSwgaGlkZURpdmlkZXIgPSB0cnVlO1xyXG5cclxuXHRcdHRoaXMuX3N1cGVyQXBwbHkoIGFyZ3VtZW50cyApO1xyXG5cclxuXHRcdGlmICggdGhpcy5vcHRpb25zLmhpZGVEaXZpZGVycyApIHtcclxuXHRcdFx0aXRlbXMgPSB0aGlzLl9nZXRDaGlsZHJlbkJ5VGFnTmFtZSggdGhpcy5lbGVtZW50WyAwIF0sIFwibGlcIiwgXCJMSVwiICk7XHJcblx0XHRcdGZvciAoIGlkeCA9IGl0ZW1zLmxlbmd0aCAtIDEgOyBpZHggPiAtMSA7IGlkeC0tICkge1xyXG5cdFx0XHRcdGl0ZW0gPSBpdGVtc1sgaWR4IF07XHJcblx0XHRcdFx0aWYgKCBpdGVtLmNsYXNzTmFtZS5tYXRjaCggcmRpdmlkZXIgKSApIHtcclxuXHRcdFx0XHRcdGlmICggaGlkZURpdmlkZXIgKSB7XHJcblx0XHRcdFx0XHRcdGl0ZW0uY2xhc3NOYW1lID0gaXRlbS5jbGFzc05hbWUgKyBcIiB1aS1zY3JlZW4taGlkZGVuXCI7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRoaWRlRGl2aWRlciA9IHRydWU7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdGlmICggIWl0ZW0uY2xhc3NOYW1lLm1hdGNoKCByaGlkZGVuICkgKSB7XHJcblx0XHRcdFx0XHRcdGhpZGVEaXZpZGVyID0gZmFsc2U7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG59KTtcclxuXHJcbn0pKCBqUXVlcnkgKTtcclxuXHJcbihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xyXG5cclxuJC5tb2JpbGUubm9qcyA9IGZ1bmN0aW9uKCB0YXJnZXQgKSB7XHJcblx0JCggXCI6anFtRGF0YShyb2xlPSdub2pzJylcIiwgdGFyZ2V0ICkuYWRkQ2xhc3MoIFwidWktbm9qc1wiICk7XHJcbn07XHJcblxyXG59KSggalF1ZXJ5ICk7XHJcblxyXG4oZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcclxuXHJcbiQubW9iaWxlLmJlaGF2aW9ycy5mb3JtUmVzZXQgPSB7XHJcblx0X2hhbmRsZUZvcm1SZXNldDogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLl9vbiggdGhpcy5lbGVtZW50LmNsb3Nlc3QoIFwiZm9ybVwiICksIHtcclxuXHRcdFx0cmVzZXQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHRoaXMuX2RlbGF5KCBcIl9yZXNldFwiICk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdH1cclxufTtcclxuXHJcbn0pKCBqUXVlcnkgKTtcclxuXHJcbi8qXHJcbiogXCJjaGVja2JveHJhZGlvXCIgcGx1Z2luXHJcbiovXHJcblxyXG4oZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcclxuXHJcbnZhciBlc2NhcGVJZCA9ICQubW9iaWxlLnBhdGguaGFzaFRvU2VsZWN0b3I7XHJcblxyXG4kLndpZGdldCggXCJtb2JpbGUuY2hlY2tib3hyYWRpb1wiLCAkLmV4dGVuZCgge1xyXG5cclxuXHRpbml0U2VsZWN0b3I6IFwiaW5wdXQ6bm90KCA6anFtRGF0YShyb2xlPSdmbGlwc3dpdGNoJyApIClbdHlwZT0nY2hlY2tib3gnXSxpbnB1dFt0eXBlPSdyYWRpbyddOm5vdCggOmpxbURhdGEocm9sZT0nZmxpcHN3aXRjaCcgKSlcIixcclxuXHJcblx0b3B0aW9uczoge1xyXG5cdFx0dGhlbWU6IFwiaW5oZXJpdFwiLFxyXG5cdFx0bWluaTogZmFsc2UsXHJcblx0XHR3cmFwcGVyQ2xhc3M6IG51bGwsXHJcblx0XHRlbmhhbmNlZDogZmFsc2UsXHJcblx0XHRpY29ucG9zOiBcImxlZnRcIlxyXG5cclxuXHR9LFxyXG5cdF9jcmVhdGU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIGlucHV0ID0gdGhpcy5lbGVtZW50LFxyXG5cdFx0XHRvID0gdGhpcy5vcHRpb25zLFxyXG5cdFx0XHRpbmhlcml0QXR0ciA9IGZ1bmN0aW9uKCBpbnB1dCwgZGF0YUF0dHIgKSB7XHJcblx0XHRcdFx0cmV0dXJuIGlucHV0LmpxbURhdGEoIGRhdGFBdHRyICkgfHxcclxuXHRcdFx0XHRcdGlucHV0LmNsb3Nlc3QoIFwiZm9ybSwgZmllbGRzZXRcIiApLmpxbURhdGEoIGRhdGFBdHRyICk7XHJcblx0XHRcdH0sXHJcblx0XHRcdGxhYmVsID0gdGhpcy5vcHRpb25zLmVuaGFuY2VkID9cclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHRlbGVtZW50OiB0aGlzLmVsZW1lbnQuc2libGluZ3MoIFwibGFiZWxcIiApLFxyXG5cdFx0XHRcdFx0aXNQYXJlbnQ6IGZhbHNlXHJcblx0XHRcdFx0fSA6XHJcblx0XHRcdFx0dGhpcy5fZmluZExhYmVsKCksXHJcblx0XHRcdGlucHV0dHlwZSA9IGlucHV0WzBdLnR5cGUsXHJcblx0XHRcdGNoZWNrZWRDbGFzcyA9IFwidWktXCIgKyBpbnB1dHR5cGUgKyBcIi1vblwiLFxyXG5cdFx0XHR1bmNoZWNrZWRDbGFzcyA9IFwidWktXCIgKyBpbnB1dHR5cGUgKyBcIi1vZmZcIjtcclxuXHJcblx0XHRpZiAoIGlucHV0dHlwZSAhPT0gXCJjaGVja2JveFwiICYmIGlucHV0dHlwZSAhPT0gXCJyYWRpb1wiICkge1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCB0aGlzLmVsZW1lbnRbMF0uZGlzYWJsZWQgKSB7XHJcblx0XHRcdHRoaXMub3B0aW9ucy5kaXNhYmxlZCA9IHRydWU7XHJcblx0XHR9XHJcblxyXG5cdFx0by5pY29ucG9zID0gaW5oZXJpdEF0dHIoIGlucHV0LCBcImljb25wb3NcIiApIHx8XHJcblx0XHRcdGxhYmVsLmVsZW1lbnQuYXR0ciggXCJkYXRhLVwiICsgJC5tb2JpbGUubnMgKyBcImljb25wb3NcIiApIHx8IG8uaWNvbnBvcyxcclxuXHJcblx0XHQvLyBFc3RhYmxpc2ggb3B0aW9uc1xyXG5cdFx0by5taW5pID0gaW5oZXJpdEF0dHIoIGlucHV0LCBcIm1pbmlcIiApIHx8IG8ubWluaTtcclxuXHJcblx0XHQvLyBFeHBvc2UgZm9yIG90aGVyIG1ldGhvZHNcclxuXHRcdCQuZXh0ZW5kKCB0aGlzLCB7XHJcblx0XHRcdGlucHV0OiBpbnB1dCxcclxuXHRcdFx0bGFiZWw6IGxhYmVsLmVsZW1lbnQsXHJcblx0XHRcdGxhYmVsSXNQYXJlbnQ6IGxhYmVsLmlzUGFyZW50LFxyXG5cdFx0XHRpbnB1dHR5cGU6IGlucHV0dHlwZSxcclxuXHRcdFx0Y2hlY2tlZENsYXNzOiBjaGVja2VkQ2xhc3MsXHJcblx0XHRcdHVuY2hlY2tlZENsYXNzOiB1bmNoZWNrZWRDbGFzc1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0aWYgKCAhdGhpcy5vcHRpb25zLmVuaGFuY2VkICkge1xyXG5cdFx0XHR0aGlzLl9lbmhhbmNlKCk7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5fb24oIGxhYmVsLmVsZW1lbnQsIHtcclxuXHRcdFx0dm1vdXNlb3ZlcjogXCJfaGFuZGxlTGFiZWxWTW91c2VPdmVyXCIsXHJcblx0XHRcdHZjbGljazogXCJfaGFuZGxlTGFiZWxWQ2xpY2tcIlxyXG5cdFx0fSk7XHJcblxyXG5cdFx0dGhpcy5fb24oIGlucHV0LCB7XHJcblx0XHRcdHZtb3VzZWRvd246IFwiX2NhY2hlVmFsc1wiLFxyXG5cdFx0XHR2Y2xpY2s6IFwiX2hhbmRsZUlucHV0VkNsaWNrXCIsXHJcblx0XHRcdGZvY3VzOiBcIl9oYW5kbGVJbnB1dEZvY3VzXCIsXHJcblx0XHRcdGJsdXI6IFwiX2hhbmRsZUlucHV0Qmx1clwiXHJcblx0XHR9KTtcclxuXHJcblx0XHR0aGlzLl9oYW5kbGVGb3JtUmVzZXQoKTtcclxuXHRcdHRoaXMucmVmcmVzaCgpO1xyXG5cdH0sXHJcblxyXG5cdF9maW5kTGFiZWw6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIHBhcmVudExhYmVsLCBsYWJlbCwgaXNQYXJlbnQsXHJcblx0XHRcdGlucHV0ID0gdGhpcy5lbGVtZW50LFxyXG5cdFx0XHRsYWJlbHNMaXN0ID0gaW5wdXRbIDAgXS5sYWJlbHM7XHJcblxyXG5cdFx0aWYoIGxhYmVsc0xpc3QgJiYgbGFiZWxzTGlzdC5sZW5ndGggPiAwICkge1xyXG5cdFx0XHRsYWJlbCA9ICQoIGxhYmVsc0xpc3RbIDAgXSApO1xyXG5cdFx0XHRpc1BhcmVudCA9ICQuY29udGFpbnMoIGxhYmVsWyAwIF0sIGlucHV0WyAwIF0gKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHBhcmVudExhYmVsID0gaW5wdXQuY2xvc2VzdCggXCJsYWJlbFwiICk7XHJcblx0XHRcdGlzUGFyZW50ID0gKCBwYXJlbnRMYWJlbC5sZW5ndGggPiAwICk7XHJcblxyXG5cdFx0XHQvLyBOT1RFOiBXaW5kb3dzIFBob25lIGNvdWxkIG5vdCBmaW5kIHRoZSBsYWJlbCB0aHJvdWdoIGEgc2VsZWN0b3JcclxuXHRcdFx0Ly8gZmlsdGVyIHdvcmtzIHRob3VnaC5cclxuXHRcdFx0bGFiZWwgPSBpc1BhcmVudCA/IHBhcmVudExhYmVsIDpcclxuXHRcdFx0XHQkKCB0aGlzLmRvY3VtZW50WyAwIF0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoIFwibGFiZWxcIiApIClcclxuXHRcdFx0XHRcdC5maWx0ZXIoIFwiW2Zvcj0nXCIgKyBlc2NhcGVJZCggaW5wdXRbIDAgXS5pZCApICsgXCInXVwiIClcclxuXHRcdFx0XHRcdC5maXJzdCgpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiB7XHJcblx0XHRcdGVsZW1lbnQ6IGxhYmVsLFxyXG5cdFx0XHRpc1BhcmVudDogaXNQYXJlbnRcclxuXHRcdH07XHJcblx0fSxcclxuXHJcblx0X2VuaGFuY2U6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5sYWJlbC5hZGRDbGFzcyggXCJ1aS1idG4gdWktY29ybmVyLWFsbFwiKTtcclxuXHJcblx0XHRpZiAoIHRoaXMubGFiZWxJc1BhcmVudCApIHtcclxuXHRcdFx0dGhpcy5pbnB1dC5hZGQoIHRoaXMubGFiZWwgKS53cmFwQWxsKCB0aGlzLl93cmFwcGVyKCkgKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdC8vdGhpcy5lbGVtZW50LnJlcGxhY2VXaXRoKCB0aGlzLmlucHV0LmFkZCggdGhpcy5sYWJlbCApLndyYXBBbGwoIHRoaXMuX3dyYXBwZXIoKSApICk7XHJcblx0XHRcdHRoaXMuZWxlbWVudC53cmFwKCB0aGlzLl93cmFwcGVyKCkgKTtcclxuXHRcdFx0dGhpcy5lbGVtZW50LnBhcmVudCgpLnByZXBlbmQoIHRoaXMubGFiZWwgKTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBXcmFwIHRoZSBpbnB1dCArIGxhYmVsIGluIGEgZGl2XHJcblxyXG5cdFx0dGhpcy5fc2V0T3B0aW9ucyh7XHJcblx0XHRcdFwidGhlbWVcIjogdGhpcy5vcHRpb25zLnRoZW1lLFxyXG5cdFx0XHRcImljb25wb3NcIjogdGhpcy5vcHRpb25zLmljb25wb3MsXHJcblx0XHRcdFwibWluaVwiOiB0aGlzLm9wdGlvbnMubWluaVxyXG5cdFx0fSk7XHJcblxyXG5cdH0sXHJcblxyXG5cdF93cmFwcGVyOiBmdW5jdGlvbigpIHtcclxuXHRcdHJldHVybiAkKCBcIjxkaXYgY2xhc3M9J1wiICArXHJcblx0XHRcdCggdGhpcy5vcHRpb25zLndyYXBwZXJDbGFzcyA/IHRoaXMub3B0aW9ucy53cmFwcGVyQ2xhc3MgOiBcIlwiICkgK1xyXG5cdFx0XHRcIiB1aS1cIiArIHRoaXMuaW5wdXR0eXBlICtcclxuXHRcdFx0KCB0aGlzLm9wdGlvbnMuZGlzYWJsZWQgPyBcIiB1aS1zdGF0ZS1kaXNhYmxlZFwiIDogXCJcIiApICsgXCInID48L2Rpdj5cIiApO1xyXG5cdH0sXHJcblxyXG5cdF9oYW5kbGVJbnB1dEZvY3VzOiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMubGFiZWwuYWRkQ2xhc3MoICQubW9iaWxlLmZvY3VzQ2xhc3MgKTtcclxuXHR9LFxyXG5cclxuXHRfaGFuZGxlSW5wdXRCbHVyOiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMubGFiZWwucmVtb3ZlQ2xhc3MoICQubW9iaWxlLmZvY3VzQ2xhc3MgKTtcclxuXHR9LFxyXG5cclxuXHRfaGFuZGxlSW5wdXRWQ2xpY2s6IGZ1bmN0aW9uKCkge1xyXG5cdFx0Ly8gQWRkcyBjaGVja2VkIGF0dHJpYnV0ZSB0byBjaGVja2VkIGlucHV0IHdoZW4ga2V5Ym9hcmQgaXMgdXNlZFxyXG5cdFx0dGhpcy5lbGVtZW50LnByb3AoIFwiY2hlY2tlZFwiLCB0aGlzLmVsZW1lbnQuaXMoIFwiOmNoZWNrZWRcIiApICk7XHJcblx0XHR0aGlzLl9nZXRJbnB1dFNldCgpLm5vdCggdGhpcy5lbGVtZW50ICkucHJvcCggXCJjaGVja2VkXCIsIGZhbHNlICk7XHJcblx0XHR0aGlzLl91cGRhdGVBbGwoIHRydWUgKTtcclxuXHR9LFxyXG5cclxuXHRfaGFuZGxlTGFiZWxWTW91c2VPdmVyOiBmdW5jdGlvbiggZXZlbnQgKSB7XHJcblx0XHRpZiAoIHRoaXMubGFiZWwucGFyZW50KCkuaGFzQ2xhc3MoIFwidWktc3RhdGUtZGlzYWJsZWRcIiApICkge1xyXG5cdFx0XHRldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfaGFuZGxlTGFiZWxWQ2xpY2s6IGZ1bmN0aW9uKCBldmVudCApIHtcclxuXHRcdHZhciBpbnB1dCA9IHRoaXMuZWxlbWVudDtcclxuXHJcblx0XHRpZiAoIGlucHV0LmlzKCBcIjpkaXNhYmxlZFwiICkgKSB7XHJcblx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLl9jYWNoZVZhbHMoKTtcclxuXHJcblx0XHRpbnB1dC5wcm9wKCBcImNoZWNrZWRcIiwgdGhpcy5pbnB1dHR5cGUgPT09IFwicmFkaW9cIiAmJiB0cnVlIHx8ICFpbnB1dC5wcm9wKCBcImNoZWNrZWRcIiApICk7XHJcblxyXG5cdFx0Ly8gdHJpZ2dlciBjbGljayBoYW5kbGVyJ3MgYm91bmQgZGlyZWN0bHkgdG8gdGhlIGlucHV0IGFzIGEgc3Vic3RpdHV0ZSBmb3JcclxuXHRcdC8vIGhvdyBsYWJlbCBjbGlja3MgYmVoYXZlIG5vcm1hbGx5IGluIHRoZSBicm93c2Vyc1xyXG5cdFx0Ly8gVE9ETzogaXQgd291bGQgYmUgbmljZSB0byBsZXQgdGhlIGJyb3dzZXIncyBoYW5kbGUgdGhlIGNsaWNrcyBhbmQgcGFzcyB0aGVtXHJcblx0XHQvLyAgICAgICB0aHJvdWdoIHRvIHRoZSBhc3NvY2lhdGUgaW5wdXQuIHdlIGNhbiBzd2FsbG93IHRoYXQgY2xpY2sgYXQgdGhlIHBhcmVudFxyXG5cdFx0Ly8gICAgICAgd3JhcHBlciBlbGVtZW50IGxldmVsXHJcblx0XHRpbnB1dC50cmlnZ2VySGFuZGxlciggXCJjbGlja1wiICk7XHJcblxyXG5cdFx0Ly8gSW5wdXQgc2V0IGZvciBjb21tb24gcmFkaW8gYnV0dG9ucyB3aWxsIGNvbnRhaW4gYWxsIHRoZSByYWRpb1xyXG5cdFx0Ly8gYnV0dG9ucywgYnV0IHdpbGwgbm90IGZvciBjaGVja2JveGVzLiBjbGVhcmluZyB0aGUgY2hlY2tlZCBzdGF0dXNcclxuXHRcdC8vIG9mIG90aGVyIHJhZGlvcyBlbnN1cmVzIHRoZSBhY3RpdmUgYnV0dG9uIHN0YXRlIGlzIGFwcGxpZWQgcHJvcGVybHlcclxuXHRcdHRoaXMuX2dldElucHV0U2V0KCkubm90KCBpbnB1dCApLnByb3AoIFwiY2hlY2tlZFwiLCBmYWxzZSApO1xyXG5cclxuXHRcdHRoaXMuX3VwZGF0ZUFsbCgpO1xyXG5cdFx0cmV0dXJuIGZhbHNlO1xyXG5cdH0sXHJcblxyXG5cdF9jYWNoZVZhbHM6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5fZ2V0SW5wdXRTZXQoKS5lYWNoKCBmdW5jdGlvbigpIHtcclxuXHRcdFx0JCggdGhpcyApLmF0dHIoXCJkYXRhLVwiICsgJC5tb2JpbGUubnMgKyBcImNhY2hlVmFsXCIsIHRoaXMuY2hlY2tlZCApO1xyXG5cdFx0fSk7XHJcblx0fSxcclxuXHJcblx0Ly8gUmV0dXJucyB0aG9zZSByYWRpbyBidXR0b25zIHRoYXQgYXJlIHN1cHBvc2VkIHRvIGJlIGluIHRoZSBzYW1lIGdyb3VwIGFzXHJcblx0Ly8gdGhpcyByYWRpbyBidXR0b24uIEluIHRoZSBjYXNlIG9mIGEgY2hlY2tib3ggb3IgYSByYWRpbyBsYWNraW5nIGEgbmFtZVxyXG5cdC8vIGF0dHJpYnV0ZSwgaXQgcmV0dXJucyB0aGlzLmVsZW1lbnQuXHJcblx0X2dldElucHV0U2V0OiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBzZWxlY3RvciwgZm9ybUlkLFxyXG5cdFx0XHRyYWRpbyA9IHRoaXMuZWxlbWVudFsgMCBdLFxyXG5cdFx0XHRuYW1lID0gcmFkaW8ubmFtZSxcclxuXHRcdFx0Zm9ybSA9IHJhZGlvLmZvcm0sXHJcblx0XHRcdGRvYyA9IHRoaXMuZWxlbWVudC5wYXJlbnRzKCkubGFzdCgpLmdldCggMCApLFxyXG5cclxuXHRcdFx0Ly8gQSByYWRpbyBpcyBhbHdheXMgYSBtZW1iZXIgb2YgaXRzIG93biBncm91cFxyXG5cdFx0XHRyYWRpb3MgPSB0aGlzLmVsZW1lbnQ7XHJcblxyXG5cdFx0Ly8gT25seSBzdGFydCBydW5uaW5nIHNlbGVjdG9ycyBpZiB0aGlzIGlzIGFuIGF0dGFjaGVkIHJhZGlvIGJ1dHRvbiB3aXRoIGEgbmFtZVxyXG5cdFx0aWYgKCBuYW1lICYmIHRoaXMuaW5wdXR0eXBlID09PSBcInJhZGlvXCIgJiYgZG9jICkge1xyXG5cdFx0XHRzZWxlY3RvciA9IFwiaW5wdXRbdHlwZT0ncmFkaW8nXVtuYW1lPSdcIiArIGVzY2FwZUlkKCBuYW1lICkgKyBcIiddXCI7XHJcblxyXG5cdFx0XHQvLyBJZiB3ZSdyZSBpbnNpZGUgYSBmb3JtXHJcblx0XHRcdGlmICggZm9ybSApIHtcclxuXHRcdFx0XHRmb3JtSWQgPSBmb3JtLmdldEF0dHJpYnV0ZSggXCJpZFwiICk7XHJcblxyXG5cdFx0XHRcdC8vIElmIHRoZSBmb3JtIGhhcyBhbiBJRCwgY29sbGVjdCByYWRpb3Mgc2NhdHRlcmVkIHRocm91Z2h0IHRoZSBkb2N1bWVudCB3aGljaFxyXG5cdFx0XHRcdC8vIG5ldmVydGhlbGVzcyBhcmUgcGFydCBvZiB0aGUgZm9ybSBieSB3YXkgb2YgdGhlIHZhbHVlIG9mIHRoZWlyIGZvcm0gYXR0cmlidXRlXHJcblx0XHRcdFx0aWYgKCBmb3JtSWQgKSB7XHJcblx0XHRcdFx0XHRyYWRpb3MgPSAkKCBzZWxlY3RvciArIFwiW2Zvcm09J1wiICsgZXNjYXBlSWQoIGZvcm1JZCApICsgXCInXVwiLCBkb2MgKTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdC8vIEFsc28gYWRkIHRvIHRob3NlIHRoZSByYWRpb3MgaW4gdGhlIGZvcm0gaXRzZWxmXHJcblx0XHRcdFx0cmFkaW9zID0gJCggZm9ybSApLmZpbmQoIHNlbGVjdG9yICkuZmlsdGVyKCBmdW5jdGlvbigpIHtcclxuXHJcblx0XHRcdFx0XHQvLyBTb21lIHJhZGlvcyBpbnNpZGUgdGhlIGZvcm0gbWF5IGJlbG9uZyB0byBzb21lIG90aGVyIGZvcm0gYnkgdmlydHVlIG9mXHJcblx0XHRcdFx0XHQvLyBoYXZpbmcgYSBmb3JtIGF0dHJpYnV0ZSBkZWZpbmVkIG9uIHRoZW0sIHNvIHdlIG11c3QgZmlsdGVyIHRoZW0gb3V0IGhlcmVcclxuXHRcdFx0XHRcdHJldHVybiAoIHRoaXMuZm9ybSA9PT0gZm9ybSApO1xyXG5cdFx0XHRcdH0pLmFkZCggcmFkaW9zICk7XHJcblxyXG5cdFx0XHQvLyBJZiB3ZSdyZSBvdXRzaWRlIGEgZm9ybVxyXG5cdFx0XHR9IGVsc2Uge1xyXG5cclxuXHRcdFx0XHQvLyBDb2xsZWN0IGFsbCB0aG9zZSByYWRpb3Mgd2hpY2ggYXJlIGFsc28gb3V0c2lkZSBvZiBhIGZvcm0gYW5kIG1hdGNoIG91ciBuYW1lXHJcblx0XHRcdFx0cmFkaW9zID0gJCggc2VsZWN0b3IsIGRvYyApLmZpbHRlciggZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gIXRoaXMuZm9ybTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIHJhZGlvcztcclxuXHR9LFxyXG5cclxuXHRfdXBkYXRlQWxsOiBmdW5jdGlvbiggY2hhbmdlVHJpZ2dlcmVkICkge1xyXG5cdFx0dmFyIHNlbGYgPSB0aGlzO1xyXG5cclxuXHRcdHRoaXMuX2dldElucHV0U2V0KCkuZWFjaCggZnVuY3Rpb24oKSB7XHJcblx0XHRcdHZhciAkdGhpcyA9ICQoIHRoaXMgKTtcclxuXHJcblx0XHRcdGlmICggKCB0aGlzLmNoZWNrZWQgfHwgc2VsZi5pbnB1dHR5cGUgPT09IFwiY2hlY2tib3hcIiApICYmICFjaGFuZ2VUcmlnZ2VyZWQgKSB7XHJcblx0XHRcdFx0JHRoaXMudHJpZ2dlciggXCJjaGFuZ2VcIiApO1xyXG5cdFx0XHR9XHJcblx0XHR9KVxyXG5cdFx0LmNoZWNrYm94cmFkaW8oIFwicmVmcmVzaFwiICk7XHJcblx0fSxcclxuXHJcblx0X3Jlc2V0OiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMucmVmcmVzaCgpO1xyXG5cdH0sXHJcblxyXG5cdC8vIElzIHRoZSB3aWRnZXQgc3VwcG9zZWQgdG8gZGlzcGxheSBhbiBpY29uP1xyXG5cdF9oYXNJY29uOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBjb250cm9sZ3JvdXAsIGNvbnRyb2xncm91cFdpZGdldCxcclxuXHRcdFx0Y29udHJvbGdyb3VwQ29uc3RydWN0b3IgPSAkLm1vYmlsZS5jb250cm9sZ3JvdXA7XHJcblxyXG5cdFx0Ly8gSWYgdGhlIGNvbnRyb2xncm91cCB3aWRnZXQgaXMgZGVmaW5lZCAuLi5cclxuXHRcdGlmICggY29udHJvbGdyb3VwQ29uc3RydWN0b3IgKSB7XHJcblx0XHRcdGNvbnRyb2xncm91cCA9IHRoaXMuZWxlbWVudC5jbG9zZXN0KFxyXG5cdFx0XHRcdFwiOm1vYmlsZS1jb250cm9sZ3JvdXAsXCIgK1xyXG5cdFx0XHRcdGNvbnRyb2xncm91cENvbnN0cnVjdG9yLnByb3RvdHlwZS5pbml0U2VsZWN0b3IgKTtcclxuXHJcblx0XHRcdC8vIC4uLiBhbmQgdGhlIGNoZWNrYm94IGlzIGluIGEgY29udHJvbGdyb3VwIC4uLlxyXG5cdFx0XHRpZiAoIGNvbnRyb2xncm91cC5sZW5ndGggPiAwICkge1xyXG5cclxuXHRcdFx0XHQvLyAuLi4gbG9vayBmb3IgYSBjb250cm9sZ3JvdXAgd2lkZ2V0IGluc3RhbmNlLCBhbmQgLi4uXHJcblx0XHRcdFx0Y29udHJvbGdyb3VwV2lkZ2V0ID0gJC5kYXRhKCBjb250cm9sZ3JvdXBbIDAgXSwgXCJtb2JpbGUtY29udHJvbGdyb3VwXCIgKTtcclxuXHJcblx0XHRcdFx0Ly8gLi4uIGlmIGZvdW5kLCBkZWNpZGUgYmFzZWQgb24gdGhlIG9wdGlvbiB2YWx1ZSwgLi4uXHJcblx0XHRcdFx0cmV0dXJuICggKCBjb250cm9sZ3JvdXBXaWRnZXQgPyBjb250cm9sZ3JvdXBXaWRnZXQub3B0aW9ucy50eXBlIDpcclxuXHJcblx0XHRcdFx0XHQvLyAuLi4gb3RoZXJ3aXNlIGRlY2lkZSBiYXNlZCBvbiB0aGUgXCJ0eXBlXCIgZGF0YSBhdHRyaWJ1dGUuXHJcblx0XHRcdFx0XHRjb250cm9sZ3JvdXAuYXR0ciggXCJkYXRhLVwiICsgJC5tb2JpbGUubnMgKyBcInR5cGVcIiApICkgIT09IFwiaG9yaXpvbnRhbFwiICk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHQvLyBOb3JtYWxseSwgdGhlIHdpZGdldCBkaXNwbGF5cyBhbiBpY29uLlxyXG5cdFx0cmV0dXJuIHRydWU7XHJcblx0fSxcclxuXHJcblx0cmVmcmVzaDogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgaXNDaGVja2VkID0gdGhpcy5lbGVtZW50WyAwIF0uY2hlY2tlZCxcclxuXHRcdFx0YWN0aXZlID0gJC5tb2JpbGUuYWN0aXZlQnRuQ2xhc3MsXHJcblx0XHRcdGljb25wb3NDbGFzcyA9IFwidWktYnRuLWljb24tXCIgKyB0aGlzLm9wdGlvbnMuaWNvbnBvcyxcclxuXHRcdFx0YWRkQ2xhc3NlcyA9IFtdLFxyXG5cdFx0XHRyZW1vdmVDbGFzc2VzID0gW107XHJcblxyXG5cdFx0aWYgKCB0aGlzLl9oYXNJY29uKCkgKSB7XHJcblx0XHRcdHJlbW92ZUNsYXNzZXMucHVzaCggYWN0aXZlICk7XHJcblx0XHRcdGFkZENsYXNzZXMucHVzaCggaWNvbnBvc0NsYXNzICk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRyZW1vdmVDbGFzc2VzLnB1c2goIGljb25wb3NDbGFzcyApO1xyXG5cdFx0XHQoIGlzQ2hlY2tlZCA/IGFkZENsYXNzZXMgOiByZW1vdmVDbGFzc2VzICkucHVzaCggYWN0aXZlICk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBpc0NoZWNrZWQgKSB7XHJcblx0XHRcdGFkZENsYXNzZXMucHVzaCggdGhpcy5jaGVja2VkQ2xhc3MgKTtcclxuXHRcdFx0cmVtb3ZlQ2xhc3Nlcy5wdXNoKCB0aGlzLnVuY2hlY2tlZENsYXNzICk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRhZGRDbGFzc2VzLnB1c2goIHRoaXMudW5jaGVja2VkQ2xhc3MgKTtcclxuXHRcdFx0cmVtb3ZlQ2xhc3Nlcy5wdXNoKCB0aGlzLmNoZWNrZWRDbGFzcyApO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMud2lkZ2V0KCkudG9nZ2xlQ2xhc3MoIFwidWktc3RhdGUtZGlzYWJsZWRcIiwgdGhpcy5lbGVtZW50LnByb3AoIFwiZGlzYWJsZWRcIiApICk7XHJcblxyXG5cdFx0dGhpcy5sYWJlbFxyXG5cdFx0XHQuYWRkQ2xhc3MoIGFkZENsYXNzZXMuam9pbiggXCIgXCIgKSApXHJcblx0XHRcdC5yZW1vdmVDbGFzcyggcmVtb3ZlQ2xhc3Nlcy5qb2luKCBcIiBcIiApICk7XHJcblx0fSxcclxuXHJcblx0d2lkZ2V0OiBmdW5jdGlvbigpIHtcclxuXHRcdHJldHVybiB0aGlzLmxhYmVsLnBhcmVudCgpO1xyXG5cdH0sXHJcblxyXG5cdF9zZXRPcHRpb25zOiBmdW5jdGlvbiggb3B0aW9ucyApIHtcclxuXHRcdHZhciBsYWJlbCA9IHRoaXMubGFiZWwsXHJcblx0XHRcdGN1cnJlbnRPcHRpb25zID0gdGhpcy5vcHRpb25zLFxyXG5cdFx0XHRvdXRlciA9IHRoaXMud2lkZ2V0KCksXHJcblx0XHRcdGhhc0ljb24gPSB0aGlzLl9oYXNJY29uKCk7XHJcblxyXG5cdFx0aWYgKCBvcHRpb25zLmRpc2FibGVkICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdHRoaXMuaW5wdXQucHJvcCggXCJkaXNhYmxlZFwiLCAhIW9wdGlvbnMuZGlzYWJsZWQgKTtcclxuXHRcdFx0b3V0ZXIudG9nZ2xlQ2xhc3MoIFwidWktc3RhdGUtZGlzYWJsZWRcIiwgISFvcHRpb25zLmRpc2FibGVkICk7XHJcblx0XHR9XHJcblx0XHRpZiAoIG9wdGlvbnMubWluaSAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRvdXRlci50b2dnbGVDbGFzcyggXCJ1aS1taW5pXCIsICEhb3B0aW9ucy5taW5pICk7XHJcblx0XHR9XHJcblx0XHRpZiAoIG9wdGlvbnMudGhlbWUgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0bGFiZWxcclxuXHRcdFx0XHQucmVtb3ZlQ2xhc3MoIFwidWktYnRuLVwiICsgY3VycmVudE9wdGlvbnMudGhlbWUgKVxyXG5cdFx0XHRcdC5hZGRDbGFzcyggXCJ1aS1idG4tXCIgKyBvcHRpb25zLnRoZW1lICk7XHJcblx0XHR9XHJcblx0XHRpZiAoIG9wdGlvbnMud3JhcHBlckNsYXNzICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdG91dGVyXHJcblx0XHRcdFx0LnJlbW92ZUNsYXNzKCBjdXJyZW50T3B0aW9ucy53cmFwcGVyQ2xhc3MgKVxyXG5cdFx0XHRcdC5hZGRDbGFzcyggb3B0aW9ucy53cmFwcGVyQ2xhc3MgKTtcclxuXHRcdH1cclxuXHRcdGlmICggb3B0aW9ucy5pY29ucG9zICE9PSB1bmRlZmluZWQgJiYgaGFzSWNvbiApIHtcclxuXHRcdFx0bGFiZWwucmVtb3ZlQ2xhc3MoIFwidWktYnRuLWljb24tXCIgKyBjdXJyZW50T3B0aW9ucy5pY29ucG9zICkuYWRkQ2xhc3MoIFwidWktYnRuLWljb24tXCIgKyBvcHRpb25zLmljb25wb3MgKTtcclxuXHRcdH0gZWxzZSBpZiAoICFoYXNJY29uICkge1xyXG5cdFx0XHRsYWJlbC5yZW1vdmVDbGFzcyggXCJ1aS1idG4taWNvbi1cIiArIGN1cnJlbnRPcHRpb25zLmljb25wb3MgKTtcclxuXHRcdH1cclxuXHRcdHRoaXMuX3N1cGVyKCBvcHRpb25zICk7XHJcblx0fVxyXG5cclxufSwgJC5tb2JpbGUuYmVoYXZpb3JzLmZvcm1SZXNldCApICk7XHJcblxyXG59KSggalF1ZXJ5ICk7XHJcblxyXG4oZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcclxuXHJcbiQud2lkZ2V0KCBcIm1vYmlsZS5idXR0b25cIiwge1xyXG5cclxuXHRpbml0U2VsZWN0b3I6IFwiaW5wdXRbdHlwZT0nYnV0dG9uJ10sIGlucHV0W3R5cGU9J3N1Ym1pdCddLCBpbnB1dFt0eXBlPSdyZXNldCddXCIsXHJcblxyXG5cdG9wdGlvbnM6IHtcclxuXHRcdHRoZW1lOiBudWxsLFxyXG5cdFx0aWNvbjogbnVsbCxcclxuXHRcdGljb25wb3M6IFwibGVmdFwiLFxyXG5cdFx0aWNvbnNoYWRvdzogZmFsc2UsIC8qIFRPRE86IERlcHJlY2F0ZWQgaW4gMS40LCByZW1vdmUgaW4gMS41LiAqL1xyXG5cdFx0Y29ybmVyczogdHJ1ZSxcclxuXHRcdHNoYWRvdzogdHJ1ZSxcclxuXHRcdGlubGluZTogbnVsbCxcclxuXHRcdG1pbmk6IG51bGwsXHJcblx0XHR3cmFwcGVyQ2xhc3M6IG51bGwsXHJcblx0XHRlbmhhbmNlZDogZmFsc2VcclxuXHR9LFxyXG5cclxuXHRfY3JlYXRlOiBmdW5jdGlvbigpIHtcclxuXHJcblx0XHRpZiAoIHRoaXMuZWxlbWVudC5pcyggXCI6ZGlzYWJsZWRcIiApICkge1xyXG5cdFx0XHR0aGlzLm9wdGlvbnMuZGlzYWJsZWQgPSB0cnVlO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggIXRoaXMub3B0aW9ucy5lbmhhbmNlZCApIHtcclxuXHRcdFx0dGhpcy5fZW5oYW5jZSgpO1xyXG5cdFx0fVxyXG5cclxuXHRcdCQuZXh0ZW5kKCB0aGlzLCB7XHJcblx0XHRcdHdyYXBwZXI6IHRoaXMuZWxlbWVudC5wYXJlbnQoKVxyXG5cdFx0fSk7XHJcblxyXG5cdFx0dGhpcy5fb24oIHtcclxuXHRcdFx0Zm9jdXM6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHRoaXMud2lkZ2V0KCkuYWRkQ2xhc3MoICQubW9iaWxlLmZvY3VzQ2xhc3MgKTtcclxuXHRcdFx0fSxcclxuXHJcblx0XHRcdGJsdXI6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHRoaXMud2lkZ2V0KCkucmVtb3ZlQ2xhc3MoICQubW9iaWxlLmZvY3VzQ2xhc3MgKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblxyXG5cdFx0dGhpcy5yZWZyZXNoKCB0cnVlICk7XHJcblx0fSxcclxuXHJcblx0X2VuaGFuY2U6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5lbGVtZW50LndyYXAoIHRoaXMuX2J1dHRvbigpICk7XHJcblx0fSxcclxuXHJcblx0X2J1dHRvbjogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgb3B0aW9ucyA9IHRoaXMub3B0aW9ucyxcclxuXHRcdFx0aWNvbkNsYXNzZXMgPSB0aGlzLl9nZXRJY29uQ2xhc3NlcyggdGhpcy5vcHRpb25zICk7XHJcblxyXG5cdFx0cmV0dXJuICQoXCI8ZGl2IGNsYXNzPSd1aS1idG4gdWktaW5wdXQtYnRuXCIgK1xyXG5cdFx0XHQoIG9wdGlvbnMud3JhcHBlckNsYXNzID8gXCIgXCIgKyBvcHRpb25zLndyYXBwZXJDbGFzcyA6IFwiXCIgKSArXHJcblx0XHRcdCggb3B0aW9ucy50aGVtZSA/IFwiIHVpLWJ0bi1cIiArIG9wdGlvbnMudGhlbWUgOiBcIlwiICkgK1xyXG5cdFx0XHQoIG9wdGlvbnMuY29ybmVycyA/IFwiIHVpLWNvcm5lci1hbGxcIiA6IFwiXCIgKSArXHJcblx0XHRcdCggb3B0aW9ucy5zaGFkb3cgPyBcIiB1aS1zaGFkb3dcIiA6IFwiXCIgKSArXHJcblx0XHRcdCggb3B0aW9ucy5pbmxpbmUgPyBcIiB1aS1idG4taW5saW5lXCIgOiBcIlwiICkgK1xyXG5cdFx0XHQoIG9wdGlvbnMubWluaSA/IFwiIHVpLW1pbmlcIiA6IFwiXCIgKSArXHJcblx0XHRcdCggb3B0aW9ucy5kaXNhYmxlZCA/IFwiIHVpLXN0YXRlLWRpc2FibGVkXCIgOiBcIlwiICkgK1xyXG5cdFx0XHQoIGljb25DbGFzc2VzID8gKCBcIiBcIiArIGljb25DbGFzc2VzICkgOiBcIlwiICkgK1xyXG5cdFx0XHRcIicgPlwiICsgdGhpcy5lbGVtZW50LnZhbCgpICsgXCI8L2Rpdj5cIiApO1xyXG5cdH0sXHJcblxyXG5cdHdpZGdldDogZnVuY3Rpb24oKSB7XHJcblx0XHRyZXR1cm4gdGhpcy53cmFwcGVyO1xyXG5cdH0sXHJcblxyXG5cdF9kZXN0cm95OiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dGhpcy5lbGVtZW50Lmluc2VydEJlZm9yZSggdGhpcy53cmFwcGVyICk7XHJcblx0XHRcdHRoaXMud3JhcHBlci5yZW1vdmUoKTtcclxuXHR9LFxyXG5cclxuXHRfZ2V0SWNvbkNsYXNzZXM6IGZ1bmN0aW9uKCBvcHRpb25zICkge1xyXG5cdFx0cmV0dXJuICggb3B0aW9ucy5pY29uID8gKCBcInVpLWljb24tXCIgKyBvcHRpb25zLmljb24gK1xyXG5cdFx0XHQoIG9wdGlvbnMuaWNvbnNoYWRvdyA/IFwiIHVpLXNoYWRvdy1pY29uXCIgOiBcIlwiICkgKyAvKiBUT0RPOiBEZXByZWNhdGVkIGluIDEuNCwgcmVtb3ZlIGluIDEuNS4gKi9cclxuXHRcdFx0XCIgdWktYnRuLWljb24tXCIgKyBvcHRpb25zLmljb25wb3MgKSA6IFwiXCIgKTtcclxuXHR9LFxyXG5cclxuXHRfc2V0T3B0aW9uczogZnVuY3Rpb24oIG9wdGlvbnMgKSB7XHJcblx0XHR2YXIgb3V0ZXIgPSB0aGlzLndpZGdldCgpO1xyXG5cclxuXHRcdGlmICggb3B0aW9ucy50aGVtZSAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRvdXRlclxyXG5cdFx0XHRcdC5yZW1vdmVDbGFzcyggdGhpcy5vcHRpb25zLnRoZW1lIClcclxuXHRcdFx0XHQuYWRkQ2xhc3MoIFwidWktYnRuLVwiICsgb3B0aW9ucy50aGVtZSApO1xyXG5cdFx0fVxyXG5cdFx0aWYgKCBvcHRpb25zLmNvcm5lcnMgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0b3V0ZXIudG9nZ2xlQ2xhc3MoIFwidWktY29ybmVyLWFsbFwiLCBvcHRpb25zLmNvcm5lcnMgKTtcclxuXHRcdH1cclxuXHRcdGlmICggb3B0aW9ucy5zaGFkb3cgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0b3V0ZXIudG9nZ2xlQ2xhc3MoIFwidWktc2hhZG93XCIsIG9wdGlvbnMuc2hhZG93ICk7XHJcblx0XHR9XHJcblx0XHRpZiAoIG9wdGlvbnMuaW5saW5lICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdG91dGVyLnRvZ2dsZUNsYXNzKCBcInVpLWJ0bi1pbmxpbmVcIiwgb3B0aW9ucy5pbmxpbmUgKTtcclxuXHRcdH1cclxuXHRcdGlmICggb3B0aW9ucy5taW5pICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdG91dGVyLnRvZ2dsZUNsYXNzKCBcInVpLW1pbmlcIiwgb3B0aW9ucy5taW5pICk7XHJcblx0XHR9XHJcblx0XHRpZiAoIG9wdGlvbnMuZGlzYWJsZWQgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0dGhpcy5lbGVtZW50LnByb3AoIFwiZGlzYWJsZWRcIiwgb3B0aW9ucy5kaXNhYmxlZCApO1xyXG5cdFx0XHRvdXRlci50b2dnbGVDbGFzcyggXCJ1aS1zdGF0ZS1kaXNhYmxlZFwiLCBvcHRpb25zLmRpc2FibGVkICk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBvcHRpb25zLmljb24gIT09IHVuZGVmaW5lZCB8fFxyXG5cdFx0XHRcdG9wdGlvbnMuaWNvbnNoYWRvdyAhPT0gdW5kZWZpbmVkIHx8IC8qIFRPRE86IERlcHJlY2F0ZWQgaW4gMS40LCByZW1vdmUgaW4gMS41LiAqL1xyXG5cdFx0XHRcdG9wdGlvbnMuaWNvbnBvcyAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRvdXRlclxyXG5cdFx0XHRcdC5yZW1vdmVDbGFzcyggdGhpcy5fZ2V0SWNvbkNsYXNzZXMoIHRoaXMub3B0aW9ucyApIClcclxuXHRcdFx0XHQuYWRkQ2xhc3MoIHRoaXMuX2dldEljb25DbGFzc2VzKFxyXG5cdFx0XHRcdFx0JC5leHRlbmQoIHt9LCB0aGlzLm9wdGlvbnMsIG9wdGlvbnMgKSApICk7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5fc3VwZXIoIG9wdGlvbnMgKTtcclxuXHR9LFxyXG5cclxuXHRyZWZyZXNoOiBmdW5jdGlvbiggY3JlYXRlICkge1xyXG5cdFx0dmFyIG9yaWdpbmFsRWxlbWVudCxcclxuXHRcdFx0aXNEaXNhYmxlZCA9IHRoaXMuZWxlbWVudC5wcm9wKCBcImRpc2FibGVkXCIgKTtcclxuXHJcblx0XHRpZiAoIHRoaXMub3B0aW9ucy5pY29uICYmIHRoaXMub3B0aW9ucy5pY29ucG9zID09PSBcIm5vdGV4dFwiICYmIHRoaXMuZWxlbWVudC5hdHRyKCBcInRpdGxlXCIgKSApIHtcclxuXHRcdFx0dGhpcy5lbGVtZW50LmF0dHIoIFwidGl0bGVcIiwgdGhpcy5lbGVtZW50LnZhbCgpICk7XHJcblx0XHR9XHJcblx0XHRpZiAoICFjcmVhdGUgKSB7XHJcblx0XHRcdG9yaWdpbmFsRWxlbWVudCA9IHRoaXMuZWxlbWVudC5kZXRhY2goKTtcclxuXHRcdFx0JCggdGhpcy53cmFwcGVyICkudGV4dCggdGhpcy5lbGVtZW50LnZhbCgpICkuYXBwZW5kKCBvcmlnaW5hbEVsZW1lbnQgKTtcclxuXHRcdH1cclxuXHRcdGlmICggdGhpcy5vcHRpb25zLmRpc2FibGVkICE9PSBpc0Rpc2FibGVkICkge1xyXG5cdFx0XHR0aGlzLl9zZXRPcHRpb25zKHsgZGlzYWJsZWQ6IGlzRGlzYWJsZWQgfSk7XHJcblx0XHR9XHJcblx0fVxyXG59KTtcclxuXHJcbn0pKCBqUXVlcnkgKTtcclxuXHJcbihmdW5jdGlvbiggJCApIHtcclxuXHR2YXJcdG1ldGEgPSAkKCBcIm1ldGFbbmFtZT12aWV3cG9ydF1cIiApLFxyXG5cdFx0aW5pdGlhbENvbnRlbnQgPSBtZXRhLmF0dHIoIFwiY29udGVudFwiICksXHJcblx0XHRkaXNhYmxlZFpvb20gPSBpbml0aWFsQ29udGVudCArIFwiLG1heGltdW0tc2NhbGU9MSwgdXNlci1zY2FsYWJsZT1ub1wiLFxyXG5cdFx0ZW5hYmxlZFpvb20gPSBpbml0aWFsQ29udGVudCArIFwiLG1heGltdW0tc2NhbGU9MTAsIHVzZXItc2NhbGFibGU9eWVzXCIsXHJcblx0XHRkaXNhYmxlZEluaXRpYWxseSA9IC8odXNlci1zY2FsYWJsZVtcXHNdKj1bXFxzXSpubyl8KG1heGltdW0tc2NhbGVbXFxzXSo9W1xcc10qMSlbJCxcXHNdLy50ZXN0KCBpbml0aWFsQ29udGVudCApO1xyXG5cclxuXHQkLm1vYmlsZS56b29tID0gJC5leHRlbmQoIHt9LCB7XHJcblx0XHRlbmFibGVkOiAhZGlzYWJsZWRJbml0aWFsbHksXHJcblx0XHRsb2NrZWQ6IGZhbHNlLFxyXG5cdFx0ZGlzYWJsZTogZnVuY3Rpb24oIGxvY2sgKSB7XHJcblx0XHRcdGlmICggIWRpc2FibGVkSW5pdGlhbGx5ICYmICEkLm1vYmlsZS56b29tLmxvY2tlZCApIHtcclxuXHRcdFx0XHRtZXRhLmF0dHIoIFwiY29udGVudFwiLCBkaXNhYmxlZFpvb20gKTtcclxuXHRcdFx0XHQkLm1vYmlsZS56b29tLmVuYWJsZWQgPSBmYWxzZTtcclxuXHRcdFx0XHQkLm1vYmlsZS56b29tLmxvY2tlZCA9IGxvY2sgfHwgZmFsc2U7XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblx0XHRlbmFibGU6IGZ1bmN0aW9uKCB1bmxvY2sgKSB7XHJcblx0XHRcdGlmICggIWRpc2FibGVkSW5pdGlhbGx5ICYmICggISQubW9iaWxlLnpvb20ubG9ja2VkIHx8IHVubG9jayA9PT0gdHJ1ZSApICkge1xyXG5cdFx0XHRcdG1ldGEuYXR0ciggXCJjb250ZW50XCIsIGVuYWJsZWRab29tICk7XHJcblx0XHRcdFx0JC5tb2JpbGUuem9vbS5lbmFibGVkID0gdHJ1ZTtcclxuXHRcdFx0XHQkLm1vYmlsZS56b29tLmxvY2tlZCA9IGZhbHNlO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cdFx0cmVzdG9yZTogZnVuY3Rpb24oKSB7XHJcblx0XHRcdGlmICggIWRpc2FibGVkSW5pdGlhbGx5ICkge1xyXG5cdFx0XHRcdG1ldGEuYXR0ciggXCJjb250ZW50XCIsIGluaXRpYWxDb250ZW50ICk7XHJcblx0XHRcdFx0JC5tb2JpbGUuem9vbS5lbmFibGVkID0gdHJ1ZTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH0pO1xyXG5cclxufSggalF1ZXJ5ICkpO1xyXG5cclxuKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7XHJcblxyXG4kLndpZGdldCggXCJtb2JpbGUudGV4dGlucHV0XCIsIHtcclxuXHRpbml0U2VsZWN0b3I6IFwiaW5wdXRbdHlwZT0ndGV4dCddLFwiICtcclxuXHRcdFwiaW5wdXRbdHlwZT0nc2VhcmNoJ10sXCIgK1xyXG5cdFx0XCI6anFtRGF0YSh0eXBlPSdzZWFyY2gnKSxcIiArXHJcblx0XHRcImlucHV0W3R5cGU9J251bWJlciddLFwiICtcclxuXHRcdFwiOmpxbURhdGEodHlwZT0nbnVtYmVyJyksXCIgK1xyXG5cdFx0XCJpbnB1dFt0eXBlPSdwYXNzd29yZCddLFwiICtcclxuXHRcdFwiaW5wdXRbdHlwZT0nZW1haWwnXSxcIiArXHJcblx0XHRcImlucHV0W3R5cGU9J3VybCddLFwiICtcclxuXHRcdFwiaW5wdXRbdHlwZT0ndGVsJ10sXCIgK1xyXG5cdFx0XCJ0ZXh0YXJlYSxcIiArXHJcblx0XHRcImlucHV0W3R5cGU9J3RpbWUnXSxcIiArXHJcblx0XHRcImlucHV0W3R5cGU9J2RhdGUnXSxcIiArXHJcblx0XHRcImlucHV0W3R5cGU9J21vbnRoJ10sXCIgK1xyXG5cdFx0XCJpbnB1dFt0eXBlPSd3ZWVrJ10sXCIgK1xyXG5cdFx0XCJpbnB1dFt0eXBlPSdkYXRldGltZSddLFwiICtcclxuXHRcdFwiaW5wdXRbdHlwZT0nZGF0ZXRpbWUtbG9jYWwnXSxcIiArXHJcblx0XHRcImlucHV0W3R5cGU9J2NvbG9yJ10sXCIgK1xyXG5cdFx0XCJpbnB1dDpub3QoW3R5cGVdKSxcIiArXHJcblx0XHRcImlucHV0W3R5cGU9J2ZpbGUnXVwiLFxyXG5cclxuXHRvcHRpb25zOiB7XHJcblx0XHR0aGVtZTogbnVsbCxcclxuXHRcdGNvcm5lcnM6IHRydWUsXHJcblx0XHRtaW5pOiBmYWxzZSxcclxuXHRcdC8vIFRoaXMgb3B0aW9uIGRlZmF1bHRzIHRvIHRydWUgb24gaU9TIGRldmljZXMuXHJcblx0XHRwcmV2ZW50Rm9jdXNab29tOiAvaVBob25lfGlQYWR8aVBvZC8udGVzdCggbmF2aWdhdG9yLnBsYXRmb3JtICkgJiYgbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCBcIkFwcGxlV2ViS2l0XCIgKSA+IC0xLFxyXG5cdFx0d3JhcHBlckNsYXNzOiBcIlwiLFxyXG5cdFx0ZW5oYW5jZWQ6IGZhbHNlXHJcblx0fSxcclxuXHJcblx0X2NyZWF0ZTogZnVuY3Rpb24oKSB7XHJcblxyXG5cdFx0dmFyIG9wdGlvbnMgPSB0aGlzLm9wdGlvbnMsXHJcblx0XHRcdGlzU2VhcmNoID0gdGhpcy5lbGVtZW50LmlzKCBcIlt0eXBlPSdzZWFyY2gnXSwgOmpxbURhdGEodHlwZT0nc2VhcmNoJylcIiApLFxyXG5cdFx0XHRpc1RleHRhcmVhID0gdGhpcy5lbGVtZW50WyAwIF0udGFnTmFtZSA9PT0gXCJURVhUQVJFQVwiLFxyXG5cdFx0XHRpc1JhbmdlID0gdGhpcy5lbGVtZW50LmlzKCBcIltkYXRhLVwiICsgKCAkLm1vYmlsZS5ucyB8fCBcIlwiICkgKyBcInR5cGU9J3JhbmdlJ11cIiApLFxyXG5cdFx0XHRpbnB1dE5lZWRzV3JhcCA9ICggKHRoaXMuZWxlbWVudC5pcyggXCJpbnB1dFwiICkgfHxcclxuXHRcdFx0XHR0aGlzLmVsZW1lbnQuaXMoIFwiW2RhdGEtXCIgKyAoICQubW9iaWxlLm5zIHx8IFwiXCIgKSArIFwidHlwZT0nc2VhcmNoJ11cIiApICkgJiZcclxuXHRcdFx0XHRcdCFpc1JhbmdlICk7XHJcblxyXG5cdFx0aWYgKCB0aGlzLmVsZW1lbnQucHJvcCggXCJkaXNhYmxlZFwiICkgKSB7XHJcblx0XHRcdG9wdGlvbnMuZGlzYWJsZWQgPSB0cnVlO1xyXG5cdFx0fVxyXG5cclxuXHRcdCQuZXh0ZW5kKCB0aGlzLCB7XHJcblx0XHRcdGNsYXNzZXM6IHRoaXMuX2NsYXNzZXNGcm9tT3B0aW9ucygpLFxyXG5cdFx0XHRpc1NlYXJjaDogaXNTZWFyY2gsXHJcblx0XHRcdGlzVGV4dGFyZWE6IGlzVGV4dGFyZWEsXHJcblx0XHRcdGlzUmFuZ2U6IGlzUmFuZ2UsXHJcblx0XHRcdGlucHV0TmVlZHNXcmFwOiBpbnB1dE5lZWRzV3JhcFxyXG5cdFx0fSk7XHJcblxyXG5cdFx0dGhpcy5fYXV0b0NvcnJlY3QoKTtcclxuXHJcblx0XHRpZiAoICFvcHRpb25zLmVuaGFuY2VkICkge1xyXG5cdFx0XHR0aGlzLl9lbmhhbmNlKCk7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5fb24oIHtcclxuXHRcdFx0XCJmb2N1c1wiOiBcIl9oYW5kbGVGb2N1c1wiLFxyXG5cdFx0XHRcImJsdXJcIjogXCJfaGFuZGxlQmx1clwiXHJcblx0XHR9KTtcclxuXHJcblx0fSxcclxuXHJcblx0cmVmcmVzaDogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLnNldE9wdGlvbnMoe1xyXG5cdFx0XHRcImRpc2FibGVkXCIgOiB0aGlzLmVsZW1lbnQuaXMoIFwiOmRpc2FibGVkXCIgKVxyXG5cdFx0fSk7XHJcblx0fSxcclxuXHJcblx0X2VuaGFuY2U6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIGVsZW1lbnRDbGFzc2VzID0gW107XHJcblxyXG5cdFx0aWYgKCB0aGlzLmlzVGV4dGFyZWEgKSB7XHJcblx0XHRcdGVsZW1lbnRDbGFzc2VzLnB1c2goIFwidWktaW5wdXQtdGV4dFwiICk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCB0aGlzLmlzVGV4dGFyZWEgfHwgdGhpcy5pc1JhbmdlICkge1xyXG5cdFx0XHRlbGVtZW50Q2xhc3Nlcy5wdXNoKCBcInVpLXNoYWRvdy1pbnNldFwiICk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly9cInNlYXJjaFwiIGFuZCBcInRleHRcIiBpbnB1dCB3aWRnZXRzXHJcblx0XHRpZiAoIHRoaXMuaW5wdXROZWVkc1dyYXAgKSB7XHJcblx0XHRcdHRoaXMuZWxlbWVudC53cmFwKCB0aGlzLl93cmFwKCkgKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdGVsZW1lbnRDbGFzc2VzID0gZWxlbWVudENsYXNzZXMuY29uY2F0KCB0aGlzLmNsYXNzZXMgKTtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLmVsZW1lbnQuYWRkQ2xhc3MoIGVsZW1lbnRDbGFzc2VzLmpvaW4oIFwiIFwiICkgKTtcclxuXHR9LFxyXG5cclxuXHR3aWRnZXQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0cmV0dXJuICggdGhpcy5pbnB1dE5lZWRzV3JhcCApID8gdGhpcy5lbGVtZW50LnBhcmVudCgpIDogdGhpcy5lbGVtZW50O1xyXG5cdH0sXHJcblxyXG5cdF9jbGFzc2VzRnJvbU9wdGlvbnM6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIG9wdGlvbnMgPSB0aGlzLm9wdGlvbnMsXHJcblx0XHRcdGNsYXNzZXMgPSBbXTtcclxuXHJcblx0XHRjbGFzc2VzLnB1c2goIFwidWktYm9keS1cIiArICggKCBvcHRpb25zLnRoZW1lID09PSBudWxsICkgPyBcImluaGVyaXRcIiA6IG9wdGlvbnMudGhlbWUgKSApO1xyXG5cdFx0aWYgKCBvcHRpb25zLmNvcm5lcnMgKSB7XHJcblx0XHRcdGNsYXNzZXMucHVzaCggXCJ1aS1jb3JuZXItYWxsXCIgKTtcclxuXHRcdH1cclxuXHRcdGlmICggb3B0aW9ucy5taW5pICkge1xyXG5cdFx0XHRjbGFzc2VzLnB1c2goIFwidWktbWluaVwiICk7XHJcblx0XHR9XHJcblx0XHRpZiAoIG9wdGlvbnMuZGlzYWJsZWQgKSB7XHJcblx0XHRcdGNsYXNzZXMucHVzaCggXCJ1aS1zdGF0ZS1kaXNhYmxlZFwiICk7XHJcblx0XHR9XHJcblx0XHRpZiAoIG9wdGlvbnMud3JhcHBlckNsYXNzICkge1xyXG5cdFx0XHRjbGFzc2VzLnB1c2goIG9wdGlvbnMud3JhcHBlckNsYXNzICk7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIGNsYXNzZXM7XHJcblx0fSxcclxuXHJcblx0X3dyYXA6IGZ1bmN0aW9uKCkge1xyXG5cdFx0cmV0dXJuICQoIFwiPGRpdiBjbGFzcz0nXCIgK1xyXG5cdFx0XHQoIHRoaXMuaXNTZWFyY2ggPyBcInVpLWlucHV0LXNlYXJjaCBcIiA6IFwidWktaW5wdXQtdGV4dCBcIiApICtcclxuXHRcdFx0dGhpcy5jbGFzc2VzLmpvaW4oIFwiIFwiICkgKyBcIiBcIiArXHJcblx0XHRcdFwidWktc2hhZG93LWluc2V0Jz48L2Rpdj5cIiApO1xyXG5cdH0sXHJcblxyXG5cdF9hdXRvQ29ycmVjdDogZnVuY3Rpb24oKSB7XHJcblx0XHQvLyBYWFg6IFRlbXBvcmFyeSB3b3JrYXJvdW5kIGZvciBpc3N1ZSA3ODUgKEFwcGxlIGJ1ZyA4OTEwNTg5KS5cclxuXHRcdC8vICAgICAgVHVybiBvZmYgYXV0b2NvcnJlY3QgYW5kIGF1dG9jb21wbGV0ZSBvbiBub24taU9TIDUgZGV2aWNlc1xyXG5cdFx0Ly8gICAgICBzaW5jZSB0aGUgcG9wdXAgdGhleSB1c2UgY2FuJ3QgYmUgZGlzbWlzc2VkIGJ5IHRoZSB1c2VyLiBOb3RlXHJcblx0XHQvLyAgICAgIHRoYXQgd2UgdGVzdCBmb3IgdGhlIHByZXNlbmNlIG9mIHRoZSBmZWF0dXJlIGJ5IGxvb2tpbmcgZm9yXHJcblx0XHQvLyAgICAgIHRoZSBhdXRvY29ycmVjdCBwcm9wZXJ0eSBvbiB0aGUgaW5wdXQgZWxlbWVudC4gV2UgY3VycmVudGx5XHJcblx0XHQvLyAgICAgIGhhdmUgbm8gdGVzdCBmb3IgaU9TIDUgb3IgbmV3ZXIgc28gd2UncmUgdGVtcG9yYXJpbHkgdXNpbmdcclxuXHRcdC8vICAgICAgdGhlIHRvdWNoT3ZlcmZsb3cgc3VwcG9ydCBmbGFnIGZvciBqUU0gMS4wLiBZZXMsIEkgZmVlbCBkaXJ0eS5cclxuXHRcdC8vICAgICAgLSBqYmxhc1xyXG5cdFx0aWYgKCB0eXBlb2YgdGhpcy5lbGVtZW50WzBdLmF1dG9jb3JyZWN0ICE9PSBcInVuZGVmaW5lZFwiICYmXHJcblx0XHRcdCEkLnN1cHBvcnQudG91Y2hPdmVyZmxvdyApIHtcclxuXHJcblx0XHRcdC8vIFNldCB0aGUgYXR0cmlidXRlIGluc3RlYWQgb2YgdGhlIHByb3BlcnR5IGp1c3QgaW4gY2FzZSB0aGVyZVxyXG5cdFx0XHQvLyBpcyBjb2RlIHRoYXQgYXR0ZW1wdHMgdG8gbWFrZSBtb2RpZmljYXRpb25zIHZpYSBIVE1MLlxyXG5cdFx0XHR0aGlzLmVsZW1lbnRbMF0uc2V0QXR0cmlidXRlKCBcImF1dG9jb3JyZWN0XCIsIFwib2ZmXCIgKTtcclxuXHRcdFx0dGhpcy5lbGVtZW50WzBdLnNldEF0dHJpYnV0ZSggXCJhdXRvY29tcGxldGVcIiwgXCJvZmZcIiApO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9oYW5kbGVCbHVyOiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMud2lkZ2V0KCkucmVtb3ZlQ2xhc3MoICQubW9iaWxlLmZvY3VzQ2xhc3MgKTtcclxuXHRcdGlmICggdGhpcy5vcHRpb25zLnByZXZlbnRGb2N1c1pvb20gKSB7XHJcblx0XHRcdCQubW9iaWxlLnpvb20uZW5hYmxlKCB0cnVlICk7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X2hhbmRsZUZvY3VzOiBmdW5jdGlvbigpIHtcclxuXHRcdC8vIEluIG1hbnkgc2l0dWF0aW9ucywgaU9TIHdpbGwgem9vbSBpbnRvIHRoZSBpbnB1dCB1cG9uIHRhcCwgdGhpc1xyXG5cdFx0Ly8gcHJldmVudHMgdGhhdCBmcm9tIGhhcHBlbmluZ1xyXG5cdFx0aWYgKCB0aGlzLm9wdGlvbnMucHJldmVudEZvY3VzWm9vbSApIHtcclxuXHRcdFx0JC5tb2JpbGUuem9vbS5kaXNhYmxlKCB0cnVlICk7XHJcblx0XHR9XHJcblx0XHR0aGlzLndpZGdldCgpLmFkZENsYXNzKCAkLm1vYmlsZS5mb2N1c0NsYXNzICk7XHJcblx0fSxcclxuXHJcblx0X3NldE9wdGlvbnM6IGZ1bmN0aW9uICggb3B0aW9ucyApIHtcclxuXHRcdHZhciBvdXRlciA9IHRoaXMud2lkZ2V0KCk7XHJcblxyXG5cdFx0dGhpcy5fc3VwZXIoIG9wdGlvbnMgKTtcclxuXHJcblx0XHRpZiAoICEoIG9wdGlvbnMuZGlzYWJsZWQgPT09IHVuZGVmaW5lZCAmJlxyXG5cdFx0XHRvcHRpb25zLm1pbmkgPT09IHVuZGVmaW5lZCAmJlxyXG5cdFx0XHRvcHRpb25zLmNvcm5lcnMgPT09IHVuZGVmaW5lZCAmJlxyXG5cdFx0XHRvcHRpb25zLnRoZW1lID09PSB1bmRlZmluZWQgJiZcclxuXHRcdFx0b3B0aW9ucy53cmFwcGVyQ2xhc3MgPT09IHVuZGVmaW5lZCApICkge1xyXG5cclxuXHRcdFx0b3V0ZXIucmVtb3ZlQ2xhc3MoIHRoaXMuY2xhc3Nlcy5qb2luKCBcIiBcIiApICk7XHJcblx0XHRcdHRoaXMuY2xhc3NlcyA9IHRoaXMuX2NsYXNzZXNGcm9tT3B0aW9ucygpO1xyXG5cdFx0XHRvdXRlci5hZGRDbGFzcyggdGhpcy5jbGFzc2VzLmpvaW4oIFwiIFwiICkgKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIG9wdGlvbnMuZGlzYWJsZWQgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0dGhpcy5lbGVtZW50LnByb3AoIFwiZGlzYWJsZWRcIiwgISFvcHRpb25zLmRpc2FibGVkICk7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X2Rlc3Ryb3k6IGZ1bmN0aW9uKCkge1xyXG5cdFx0aWYgKCB0aGlzLm9wdGlvbnMuZW5oYW5jZWQgKSB7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHRcdGlmICggdGhpcy5pbnB1dE5lZWRzV3JhcCApIHtcclxuXHRcdFx0dGhpcy5lbGVtZW50LnVud3JhcCgpO1xyXG5cdFx0fVxyXG5cdFx0dGhpcy5lbGVtZW50LnJlbW92ZUNsYXNzKCBcInVpLWlucHV0LXRleHQgXCIgKyB0aGlzLmNsYXNzZXMuam9pbiggXCIgXCIgKSApO1xyXG5cdH1cclxufSk7XHJcblxyXG59KSggalF1ZXJ5ICk7XHJcblxyXG4oZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcclxuXHJcbiQud2lkZ2V0KCBcIm1vYmlsZS5zbGlkZXJcIiwgJC5leHRlbmQoIHtcclxuXHRpbml0U2VsZWN0b3I6IFwiaW5wdXRbdHlwZT0ncmFuZ2UnXSwgOmpxbURhdGEodHlwZT0ncmFuZ2UnKSwgOmpxbURhdGEocm9sZT0nc2xpZGVyJylcIixcclxuXHJcblx0d2lkZ2V0RXZlbnRQcmVmaXg6IFwic2xpZGVcIixcclxuXHJcblx0b3B0aW9uczoge1xyXG5cdFx0dGhlbWU6IG51bGwsXHJcblx0XHR0cmFja1RoZW1lOiBudWxsLFxyXG5cdFx0Y29ybmVyczogdHJ1ZSxcclxuXHRcdG1pbmk6IGZhbHNlLFxyXG5cdFx0aGlnaGxpZ2h0OiBmYWxzZVxyXG5cdH0sXHJcblxyXG5cdF9jcmVhdGU6IGZ1bmN0aW9uKCkge1xyXG5cclxuXHRcdC8vIFRPRE86IEVhY2ggb2YgdGhlc2Ugc2hvdWxkIGhhdmUgY29tbWVudHMgZXhwbGFpbiB3aGF0IHRoZXkncmUgZm9yXHJcblx0XHR2YXIgc2VsZiA9IHRoaXMsXHJcblx0XHRcdGNvbnRyb2wgPSB0aGlzLmVsZW1lbnQsXHJcblx0XHRcdHRyYWNrVGhlbWUgPSB0aGlzLm9wdGlvbnMudHJhY2tUaGVtZSB8fCAkLm1vYmlsZS5nZXRBdHRyaWJ1dGUoIGNvbnRyb2xbIDAgXSwgXCJ0aGVtZVwiICksXHJcblx0XHRcdHRyYWNrVGhlbWVDbGFzcyA9IHRyYWNrVGhlbWUgPyBcIiB1aS1iYXItXCIgKyB0cmFja1RoZW1lIDogXCIgdWktYmFyLWluaGVyaXRcIixcclxuXHRcdFx0Y29ybmVyQ2xhc3MgPSAoIHRoaXMub3B0aW9ucy5jb3JuZXJzIHx8IGNvbnRyb2wuanFtRGF0YSggXCJjb3JuZXJzXCIgKSApID8gXCIgdWktY29ybmVyLWFsbFwiIDogXCJcIixcclxuXHRcdFx0bWluaUNsYXNzID0gKCB0aGlzLm9wdGlvbnMubWluaSB8fCBjb250cm9sLmpxbURhdGEoIFwibWluaVwiICkgKSA/IFwiIHVpLW1pbmlcIiA6IFwiXCIsXHJcblx0XHRcdGNUeXBlID0gY29udHJvbFsgMCBdLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCksXHJcblx0XHRcdGlzVG9nZ2xlU3dpdGNoID0gKCBjVHlwZSA9PT0gXCJzZWxlY3RcIiApLFxyXG5cdFx0XHRpc1Jhbmdlc2xpZGVyID0gY29udHJvbC5wYXJlbnQoKS5pcyggXCI6anFtRGF0YShyb2xlPSdyYW5nZXNsaWRlcicpXCIgKSxcclxuXHRcdFx0c2VsZWN0Q2xhc3MgPSAoIGlzVG9nZ2xlU3dpdGNoICkgPyBcInVpLXNsaWRlci1zd2l0Y2hcIiA6IFwiXCIsXHJcblx0XHRcdGNvbnRyb2xJRCA9IGNvbnRyb2wuYXR0ciggXCJpZFwiICksXHJcblx0XHRcdCRsYWJlbCA9ICQoIFwiW2Zvcj0nXCIgKyBjb250cm9sSUQgKyBcIiddXCIgKSxcclxuXHRcdFx0bGFiZWxJRCA9ICRsYWJlbC5hdHRyKCBcImlkXCIgKSB8fCBjb250cm9sSUQgKyBcIi1sYWJlbFwiLFxyXG5cdFx0XHRtaW4gPSAhaXNUb2dnbGVTd2l0Y2ggPyBwYXJzZUZsb2F0KCBjb250cm9sLmF0dHIoIFwibWluXCIgKSApIDogMCxcclxuXHRcdFx0bWF4ID0gICFpc1RvZ2dsZVN3aXRjaCA/IHBhcnNlRmxvYXQoIGNvbnRyb2wuYXR0ciggXCJtYXhcIiApICkgOiBjb250cm9sLmZpbmQoIFwib3B0aW9uXCIgKS5sZW5ndGgtMSxcclxuXHRcdFx0c3RlcCA9IHdpbmRvdy5wYXJzZUZsb2F0KCBjb250cm9sLmF0dHIoIFwic3RlcFwiICkgfHwgMSApLFxyXG5cdFx0XHRkb21IYW5kbGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcImFcIiApLFxyXG5cdFx0XHRoYW5kbGUgPSAkKCBkb21IYW5kbGUgKSxcclxuXHRcdFx0ZG9tU2xpZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJkaXZcIiApLFxyXG5cdFx0XHRzbGlkZXIgPSAkKCBkb21TbGlkZXIgKSxcclxuXHRcdFx0dmFsdWViZyA9IHRoaXMub3B0aW9ucy5oaWdobGlnaHQgJiYgIWlzVG9nZ2xlU3dpdGNoID8gKGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHZhciBiZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwiZGl2XCIgKTtcclxuXHRcdFx0XHRiZy5jbGFzc05hbWUgPSBcInVpLXNsaWRlci1iZyBcIiArICQubW9iaWxlLmFjdGl2ZUJ0bkNsYXNzO1xyXG5cdFx0XHRcdHJldHVybiAkKCBiZyApLnByZXBlbmRUbyggc2xpZGVyICk7XHJcblx0XHRcdH0pKCkgOiBmYWxzZSxcclxuXHRcdFx0b3B0aW9ucyxcclxuXHRcdFx0d3JhcHBlcixcclxuXHRcdFx0aiwgbGVuZ3RoLFxyXG5cdFx0XHRpLCBvcHRpb25zQ291bnQsIG9yaWdUYWJJbmRleCxcclxuXHRcdFx0c2lkZSwgYWN0aXZlQ2xhc3MsIHNsaWRlckltZztcclxuXHJcblx0XHQkbGFiZWwuYXR0ciggXCJpZFwiLCBsYWJlbElEICk7XHJcblx0XHR0aGlzLmlzVG9nZ2xlU3dpdGNoID0gaXNUb2dnbGVTd2l0Y2g7XHJcblxyXG5cdFx0ZG9tSGFuZGxlLnNldEF0dHJpYnV0ZSggXCJocmVmXCIsIFwiI1wiICk7XHJcblx0XHRkb21TbGlkZXIuc2V0QXR0cmlidXRlKCBcInJvbGVcIiwgXCJhcHBsaWNhdGlvblwiICk7XHJcblx0XHRkb21TbGlkZXIuY2xhc3NOYW1lID0gWyB0aGlzLmlzVG9nZ2xlU3dpdGNoID8gXCJ1aS1zbGlkZXIgdWktc2xpZGVyLXRyYWNrIHVpLXNoYWRvdy1pbnNldCBcIiA6IFwidWktc2xpZGVyLXRyYWNrIHVpLXNoYWRvdy1pbnNldCBcIiwgc2VsZWN0Q2xhc3MsIHRyYWNrVGhlbWVDbGFzcywgY29ybmVyQ2xhc3MsIG1pbmlDbGFzcyBdLmpvaW4oIFwiXCIgKTtcclxuXHRcdGRvbUhhbmRsZS5jbGFzc05hbWUgPSBcInVpLXNsaWRlci1oYW5kbGVcIjtcclxuXHRcdGRvbVNsaWRlci5hcHBlbmRDaGlsZCggZG9tSGFuZGxlICk7XHJcblxyXG5cdFx0aGFuZGxlLmF0dHIoe1xyXG5cdFx0XHRcInJvbGVcIjogXCJzbGlkZXJcIixcclxuXHRcdFx0XCJhcmlhLXZhbHVlbWluXCI6IG1pbixcclxuXHRcdFx0XCJhcmlhLXZhbHVlbWF4XCI6IG1heCxcclxuXHRcdFx0XCJhcmlhLXZhbHVlbm93XCI6IHRoaXMuX3ZhbHVlKCksXHJcblx0XHRcdFwiYXJpYS12YWx1ZXRleHRcIjogdGhpcy5fdmFsdWUoKSxcclxuXHRcdFx0XCJ0aXRsZVwiOiB0aGlzLl92YWx1ZSgpLFxyXG5cdFx0XHRcImFyaWEtbGFiZWxsZWRieVwiOiBsYWJlbElEXHJcblx0XHR9KTtcclxuXHJcblx0XHQkLmV4dGVuZCggdGhpcywge1xyXG5cdFx0XHRzbGlkZXI6IHNsaWRlcixcclxuXHRcdFx0aGFuZGxlOiBoYW5kbGUsXHJcblx0XHRcdGNvbnRyb2w6IGNvbnRyb2wsXHJcblx0XHRcdHR5cGU6IGNUeXBlLFxyXG5cdFx0XHRzdGVwOiBzdGVwLFxyXG5cdFx0XHRtYXg6IG1heCxcclxuXHRcdFx0bWluOiBtaW4sXHJcblx0XHRcdHZhbHVlYmc6IHZhbHVlYmcsXHJcblx0XHRcdGlzUmFuZ2VzbGlkZXI6IGlzUmFuZ2VzbGlkZXIsXHJcblx0XHRcdGRyYWdnaW5nOiBmYWxzZSxcclxuXHRcdFx0YmVmb3JlU3RhcnQ6IG51bGwsXHJcblx0XHRcdHVzZXJNb2RpZmllZDogZmFsc2UsXHJcblx0XHRcdG1vdXNlTW92ZWQ6IGZhbHNlXHJcblx0XHR9KTtcclxuXHJcblx0XHRpZiAoIGlzVG9nZ2xlU3dpdGNoICkge1xyXG5cdFx0XHQvLyBUT0RPOiByZXN0b3JlIG9yaWdpbmFsIHRhYmluZGV4IChpZiBhbnkpIGluIGEgZGVzdHJveSBtZXRob2RcclxuXHRcdFx0b3JpZ1RhYkluZGV4ID0gY29udHJvbC5hdHRyKCBcInRhYmluZGV4XCIgKTtcclxuXHRcdFx0aWYgKCBvcmlnVGFiSW5kZXggKSB7XHJcblx0XHRcdFx0aGFuZGxlLmF0dHIoIFwidGFiaW5kZXhcIiwgb3JpZ1RhYkluZGV4ICk7XHJcblx0XHRcdH1cclxuXHRcdFx0Y29udHJvbC5hdHRyKCBcInRhYmluZGV4XCIsIFwiLTFcIiApLmZvY3VzKGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdCQoIHRoaXMgKS5ibHVyKCk7XHJcblx0XHRcdFx0aGFuZGxlLmZvY3VzKCk7XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0d3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwiZGl2XCIgKTtcclxuXHRcdFx0d3JhcHBlci5jbGFzc05hbWUgPSBcInVpLXNsaWRlci1pbm5lcm9mZnNldFwiO1xyXG5cclxuXHRcdFx0Zm9yICggaiA9IDAsIGxlbmd0aCA9IGRvbVNsaWRlci5jaGlsZE5vZGVzLmxlbmd0aDsgaiA8IGxlbmd0aDsgaisrICkge1xyXG5cdFx0XHRcdHdyYXBwZXIuYXBwZW5kQ2hpbGQoIGRvbVNsaWRlci5jaGlsZE5vZGVzW2pdICk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGRvbVNsaWRlci5hcHBlbmRDaGlsZCggd3JhcHBlciApO1xyXG5cclxuXHRcdFx0Ly8gc2xpZGVyLndyYXBJbm5lciggXCI8ZGl2IGNsYXNzPSd1aS1zbGlkZXItaW5uZXJvZmZzZXQnPjwvZGl2PlwiICk7XHJcblxyXG5cdFx0XHQvLyBtYWtlIHRoZSBoYW5kbGUgbW92ZSB3aXRoIGEgc21vb3RoIHRyYW5zaXRpb25cclxuXHRcdFx0aGFuZGxlLmFkZENsYXNzKCBcInVpLXNsaWRlci1oYW5kbGUtc25hcHBpbmdcIiApO1xyXG5cclxuXHRcdFx0b3B0aW9ucyA9IGNvbnRyb2wuZmluZCggXCJvcHRpb25cIiApO1xyXG5cclxuXHRcdFx0Zm9yICggaSA9IDAsIG9wdGlvbnNDb3VudCA9IG9wdGlvbnMubGVuZ3RoOyBpIDwgb3B0aW9uc0NvdW50OyBpKysgKSB7XHJcblx0XHRcdFx0c2lkZSA9ICFpID8gXCJiXCIgOiBcImFcIjtcclxuXHRcdFx0XHRhY3RpdmVDbGFzcyA9ICFpID8gXCJcIiA6IFwiIFwiICsgJC5tb2JpbGUuYWN0aXZlQnRuQ2xhc3M7XHJcblx0XHRcdFx0c2xpZGVySW1nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJzcGFuXCIgKTtcclxuXHJcblx0XHRcdFx0c2xpZGVySW1nLmNsYXNzTmFtZSA9IFsgXCJ1aS1zbGlkZXItbGFiZWwgdWktc2xpZGVyLWxhYmVsLVwiLCBzaWRlLCBhY3RpdmVDbGFzcyBdLmpvaW4oIFwiXCIgKTtcclxuXHRcdFx0XHRzbGlkZXJJbWcuc2V0QXR0cmlidXRlKCBcInJvbGVcIiwgXCJpbWdcIiApO1xyXG5cdFx0XHRcdHNsaWRlckltZy5hcHBlbmRDaGlsZCggZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoIG9wdGlvbnNbaV0uaW5uZXJIVE1MICkgKTtcclxuXHRcdFx0XHQkKCBzbGlkZXJJbWcgKS5wcmVwZW5kVG8oIHNsaWRlciApO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRzZWxmLl9sYWJlbHMgPSAkKCBcIi51aS1zbGlkZXItbGFiZWxcIiwgc2xpZGVyICk7XHJcblxyXG5cdFx0fVxyXG5cclxuXHRcdC8vIG1vbml0b3IgdGhlIGlucHV0IGZvciB1cGRhdGVkIHZhbHVlc1xyXG5cdFx0Y29udHJvbC5hZGRDbGFzcyggaXNUb2dnbGVTd2l0Y2ggPyBcInVpLXNsaWRlci1zd2l0Y2hcIiA6IFwidWktc2xpZGVyLWlucHV0XCIgKTtcclxuXHJcblx0XHR0aGlzLl9vbiggY29udHJvbCwge1xyXG5cdFx0XHRcImNoYW5nZVwiOiBcIl9jb250cm9sQ2hhbmdlXCIsXHJcblx0XHRcdFwia2V5dXBcIjogXCJfY29udHJvbEtleXVwXCIsXHJcblx0XHRcdFwiYmx1clwiOiBcIl9jb250cm9sQmx1clwiLFxyXG5cdFx0XHRcInZtb3VzZXVwXCI6IFwiX2NvbnRyb2xWTW91c2VVcFwiXHJcblx0XHR9KTtcclxuXHJcblx0XHRzbGlkZXIuYmluZCggXCJ2bW91c2Vkb3duXCIsICQucHJveHkoIHRoaXMuX3NsaWRlclZNb3VzZURvd24sIHRoaXMgKSApXHJcblx0XHRcdC5iaW5kKCBcInZjbGlja1wiLCBmYWxzZSApO1xyXG5cclxuXHRcdC8vIFdlIGhhdmUgdG8gaW5zdGFudGlhdGUgYSBuZXcgZnVuY3Rpb24gb2JqZWN0IGZvciB0aGUgdW5iaW5kIHRvIHdvcmsgcHJvcGVybHlcclxuXHRcdC8vIHNpbmNlIHRoZSBtZXRob2QgaXRzZWxmIGlzIGRlZmluZWQgaW4gdGhlIHByb3RvdHlwZSAoY2F1c2luZyBpdCB0byB1bmJpbmQgZXZlcnl0aGluZylcclxuXHRcdHRoaXMuX29uKCBkb2N1bWVudCwgeyBcInZtb3VzZW1vdmVcIjogXCJfcHJldmVudERvY3VtZW50RHJhZ1wiIH0pO1xyXG5cdFx0dGhpcy5fb24oIHNsaWRlci5hZGQoIGRvY3VtZW50ICksIHsgXCJ2bW91c2V1cFwiOiBcIl9zbGlkZXJWTW91c2VVcFwiIH0pO1xyXG5cclxuXHRcdHNsaWRlci5pbnNlcnRBZnRlciggY29udHJvbCApO1xyXG5cclxuXHRcdC8vIHdyYXAgaW4gYSBkaXYgZm9yIHN0eWxpbmcgcHVycG9zZXNcclxuXHRcdGlmICggIWlzVG9nZ2xlU3dpdGNoICYmICFpc1Jhbmdlc2xpZGVyICkge1xyXG5cdFx0XHR3cmFwcGVyID0gdGhpcy5vcHRpb25zLm1pbmkgPyBcIjxkaXYgY2xhc3M9J3VpLXNsaWRlciB1aS1taW5pJz5cIiA6IFwiPGRpdiBjbGFzcz0ndWktc2xpZGVyJz5cIjtcclxuXHJcblx0XHRcdGNvbnRyb2wuYWRkKCBzbGlkZXIgKS53cmFwQWxsKCB3cmFwcGVyICk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gYmluZCB0aGUgaGFuZGxlIGV2ZW50IGNhbGxiYWNrcyBhbmQgc2V0IHRoZSBjb250ZXh0IHRvIHRoZSB3aWRnZXQgaW5zdGFuY2VcclxuXHRcdHRoaXMuX29uKCB0aGlzLmhhbmRsZSwge1xyXG5cdFx0XHRcInZtb3VzZWRvd25cIjogXCJfaGFuZGxlVk1vdXNlRG93blwiLFxyXG5cdFx0XHRcImtleWRvd25cIjogXCJfaGFuZGxlS2V5ZG93blwiLFxyXG5cdFx0XHRcImtleXVwXCI6IFwiX2hhbmRsZUtleXVwXCJcclxuXHRcdH0pO1xyXG5cclxuXHRcdHRoaXMuaGFuZGxlLmJpbmQoIFwidmNsaWNrXCIsIGZhbHNlICk7XHJcblxyXG5cdFx0dGhpcy5faGFuZGxlRm9ybVJlc2V0KCk7XHJcblxyXG5cdFx0dGhpcy5yZWZyZXNoKCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdHJ1ZSApO1xyXG5cdH0sXHJcblxyXG5cdF9zZXRPcHRpb25zOiBmdW5jdGlvbiggb3B0aW9ucyApIHtcclxuXHRcdGlmICggb3B0aW9ucy50aGVtZSAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHR0aGlzLl9zZXRUaGVtZSggb3B0aW9ucy50aGVtZSApO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggb3B0aW9ucy50cmFja1RoZW1lICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdHRoaXMuX3NldFRyYWNrVGhlbWUoIG9wdGlvbnMudHJhY2tUaGVtZSApO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggb3B0aW9ucy5jb3JuZXJzICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdHRoaXMuX3NldENvcm5lcnMoIG9wdGlvbnMuY29ybmVycyApO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggb3B0aW9ucy5taW5pICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdHRoaXMuX3NldE1pbmkoIG9wdGlvbnMubWluaSApO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggb3B0aW9ucy5oaWdobGlnaHQgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0dGhpcy5fc2V0SGlnaGxpZ2h0KCBvcHRpb25zLmhpZ2hsaWdodCApO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggb3B0aW9ucy5kaXNhYmxlZCAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHR0aGlzLl9zZXREaXNhYmxlZCggb3B0aW9ucy5kaXNhYmxlZCApO1xyXG5cdFx0fVxyXG5cdFx0dGhpcy5fc3VwZXIoIG9wdGlvbnMgKTtcclxuXHR9LFxyXG5cclxuXHRfY29udHJvbENoYW5nZTogZnVuY3Rpb24oIGV2ZW50ICkge1xyXG5cdFx0Ly8gaWYgdGhlIHVzZXIgZHJhZ2dlZCB0aGUgaGFuZGxlLCB0aGUgXCJjaGFuZ2VcIiBldmVudCB3YXMgdHJpZ2dlcmVkIGZyb20gaW5zaWRlIHJlZnJlc2goKTsgZG9uJ3QgY2FsbCByZWZyZXNoKCkgYWdhaW5cclxuXHRcdGlmICggdGhpcy5fdHJpZ2dlciggXCJjb250cm9sY2hhbmdlXCIsIGV2ZW50ICkgPT09IGZhbHNlICkge1xyXG5cdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHR9XHJcblx0XHRpZiAoICF0aGlzLm1vdXNlTW92ZWQgKSB7XHJcblx0XHRcdHRoaXMucmVmcmVzaCggdGhpcy5fdmFsdWUoKSwgdHJ1ZSApO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9jb250cm9sS2V5dXA6IGZ1bmN0aW9uKC8qIGV2ZW50ICovKSB7IC8vIG5lY2Vzc2FyeT9cclxuXHRcdHRoaXMucmVmcmVzaCggdGhpcy5fdmFsdWUoKSwgdHJ1ZSwgdHJ1ZSApO1xyXG5cdH0sXHJcblxyXG5cdF9jb250cm9sQmx1cjogZnVuY3Rpb24oLyogZXZlbnQgKi8pIHtcclxuXHRcdHRoaXMucmVmcmVzaCggdGhpcy5fdmFsdWUoKSwgdHJ1ZSApO1xyXG5cdH0sXHJcblxyXG5cdC8vIGl0IGFwcGVhcnMgdGhlIGNsaWNraW5nIHRoZSB1cCBhbmQgZG93biBidXR0b25zIGluIGNocm9tZSBvblxyXG5cdC8vIHJhbmdlL251bWJlciBpbnB1dHMgZG9lc24ndCB0cmlnZ2VyIGEgY2hhbmdlIHVudGlsIHRoZSBmaWVsZCBpc1xyXG5cdC8vIGJsdXJyZWQuIEhlcmUgd2UgY2hlY2sgdGhpZiB0aGUgdmFsdWUgaGFzIGNoYW5nZWQgYW5kIHJlZnJlc2hcclxuXHRfY29udHJvbFZNb3VzZVVwOiBmdW5jdGlvbigvKiBldmVudCAqLykge1xyXG5cdFx0dGhpcy5fY2hlY2tlZFJlZnJlc2goKTtcclxuXHR9LFxyXG5cclxuXHQvLyBOT1RFIGZvcmNlIGZvY3VzIG9uIGhhbmRsZVxyXG5cdF9oYW5kbGVWTW91c2VEb3duOiBmdW5jdGlvbigvKiBldmVudCAqLykge1xyXG5cdFx0dGhpcy5oYW5kbGUuZm9jdXMoKTtcclxuXHR9LFxyXG5cclxuXHRfaGFuZGxlS2V5ZG93bjogZnVuY3Rpb24oIGV2ZW50ICkge1xyXG5cdFx0dmFyIGluZGV4ID0gdGhpcy5fdmFsdWUoKTtcclxuXHRcdGlmICggdGhpcy5vcHRpb25zLmRpc2FibGVkICkge1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gSW4gYWxsIGNhc2VzIHByZXZlbnQgdGhlIGRlZmF1bHQgYW5kIG1hcmsgdGhlIGhhbmRsZSBhcyBhY3RpdmVcclxuXHRcdHN3aXRjaCAoIGV2ZW50LmtleUNvZGUgKSB7XHJcblx0XHRcdGNhc2UgJC5tb2JpbGUua2V5Q29kZS5IT01FOlxyXG5cdFx0XHRjYXNlICQubW9iaWxlLmtleUNvZGUuRU5EOlxyXG5cdFx0XHRjYXNlICQubW9iaWxlLmtleUNvZGUuUEFHRV9VUDpcclxuXHRcdFx0Y2FzZSAkLm1vYmlsZS5rZXlDb2RlLlBBR0VfRE9XTjpcclxuXHRcdFx0Y2FzZSAkLm1vYmlsZS5rZXlDb2RlLlVQOlxyXG5cdFx0XHRjYXNlICQubW9iaWxlLmtleUNvZGUuUklHSFQ6XHJcblx0XHRcdGNhc2UgJC5tb2JpbGUua2V5Q29kZS5ET1dOOlxyXG5cdFx0XHRjYXNlICQubW9iaWxlLmtleUNvZGUuTEVGVDpcclxuXHRcdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuXHRcdFx0XHRpZiAoICF0aGlzLl9rZXlTbGlkaW5nICkge1xyXG5cdFx0XHRcdFx0dGhpcy5fa2V5U2xpZGluZyA9IHRydWU7XHJcblx0XHRcdFx0XHR0aGlzLmhhbmRsZS5hZGRDbGFzcyggXCJ1aS1zdGF0ZS1hY3RpdmVcIiApOyAvKiBUT0RPOiBXZSBkb24ndCB1c2UgdGhpcyBjbGFzcyBmb3Igc3R5bGluZy4gRG8gd2UgbmVlZCB0byBhZGQgaXQ/ICovXHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRicmVhaztcclxuXHRcdH1cclxuXHJcblx0XHQvLyBtb3ZlIHRoZSBzbGlkZXIgYWNjb3JkaW5nIHRvIHRoZSBrZXlwcmVzc1xyXG5cdFx0c3dpdGNoICggZXZlbnQua2V5Q29kZSApIHtcclxuXHRcdFx0Y2FzZSAkLm1vYmlsZS5rZXlDb2RlLkhPTUU6XHJcblx0XHRcdFx0dGhpcy5yZWZyZXNoKCB0aGlzLm1pbiApO1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRjYXNlICQubW9iaWxlLmtleUNvZGUuRU5EOlxyXG5cdFx0XHRcdHRoaXMucmVmcmVzaCggdGhpcy5tYXggKTtcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdFx0Y2FzZSAkLm1vYmlsZS5rZXlDb2RlLlBBR0VfVVA6XHJcblx0XHRcdGNhc2UgJC5tb2JpbGUua2V5Q29kZS5VUDpcclxuXHRcdFx0Y2FzZSAkLm1vYmlsZS5rZXlDb2RlLlJJR0hUOlxyXG5cdFx0XHRcdHRoaXMucmVmcmVzaCggaW5kZXggKyB0aGlzLnN0ZXAgKTtcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdFx0Y2FzZSAkLm1vYmlsZS5rZXlDb2RlLlBBR0VfRE9XTjpcclxuXHRcdFx0Y2FzZSAkLm1vYmlsZS5rZXlDb2RlLkRPV046XHJcblx0XHRcdGNhc2UgJC5tb2JpbGUua2V5Q29kZS5MRUZUOlxyXG5cdFx0XHRcdHRoaXMucmVmcmVzaCggaW5kZXggLSB0aGlzLnN0ZXAgKTtcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdH1cclxuXHR9LCAvLyByZW1vdmUgYWN0aXZlIG1hcmtcclxuXHJcblx0X2hhbmRsZUtleXVwOiBmdW5jdGlvbigvKiBldmVudCAqLykge1xyXG5cdFx0aWYgKCB0aGlzLl9rZXlTbGlkaW5nICkge1xyXG5cdFx0XHR0aGlzLl9rZXlTbGlkaW5nID0gZmFsc2U7XHJcblx0XHRcdHRoaXMuaGFuZGxlLnJlbW92ZUNsYXNzKCBcInVpLXN0YXRlLWFjdGl2ZVwiICk7IC8qIFNlZSBjb21tZW50IGFib3ZlLiAqL1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9zbGlkZXJWTW91c2VEb3duOiBmdW5jdGlvbiggZXZlbnQgKSB7XHJcblx0XHQvLyBOT1RFOiB3ZSBkb24ndCBkbyB0aGlzIGluIHJlZnJlc2ggYmVjYXVzZSB3ZSBzdGlsbCB3YW50IHRvXHJcblx0XHQvLyAgICAgICBzdXBwb3J0IHByb2dyYW1tYXRpYyBhbHRlcmF0aW9uIG9mIGRpc2FibGVkIGlucHV0c1xyXG5cdFx0aWYgKCB0aGlzLm9wdGlvbnMuZGlzYWJsZWQgfHwgISggZXZlbnQud2hpY2ggPT09IDEgfHwgZXZlbnQud2hpY2ggPT09IDAgfHwgZXZlbnQud2hpY2ggPT09IHVuZGVmaW5lZCApICkge1xyXG5cdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHR9XHJcblx0XHRpZiAoIHRoaXMuX3RyaWdnZXIoIFwiYmVmb3Jlc3RhcnRcIiwgZXZlbnQgKSA9PT0gZmFsc2UgKSB7XHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdH1cclxuXHRcdHRoaXMuZHJhZ2dpbmcgPSB0cnVlO1xyXG5cdFx0dGhpcy51c2VyTW9kaWZpZWQgPSBmYWxzZTtcclxuXHRcdHRoaXMubW91c2VNb3ZlZCA9IGZhbHNlO1xyXG5cclxuXHRcdGlmICggdGhpcy5pc1RvZ2dsZVN3aXRjaCApIHtcclxuXHRcdFx0dGhpcy5iZWZvcmVTdGFydCA9IHRoaXMuZWxlbWVudFswXS5zZWxlY3RlZEluZGV4O1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMucmVmcmVzaCggZXZlbnQgKTtcclxuXHRcdHRoaXMuX3RyaWdnZXIoIFwic3RhcnRcIiApO1xyXG5cdFx0cmV0dXJuIGZhbHNlO1xyXG5cdH0sXHJcblxyXG5cdF9zbGlkZXJWTW91c2VVcDogZnVuY3Rpb24oKSB7XHJcblx0XHRpZiAoIHRoaXMuZHJhZ2dpbmcgKSB7XHJcblx0XHRcdHRoaXMuZHJhZ2dpbmcgPSBmYWxzZTtcclxuXHJcblx0XHRcdGlmICggdGhpcy5pc1RvZ2dsZVN3aXRjaCApIHtcclxuXHRcdFx0XHQvLyBtYWtlIHRoZSBoYW5kbGUgbW92ZSB3aXRoIGEgc21vb3RoIHRyYW5zaXRpb25cclxuXHRcdFx0XHR0aGlzLmhhbmRsZS5hZGRDbGFzcyggXCJ1aS1zbGlkZXItaGFuZGxlLXNuYXBwaW5nXCIgKTtcclxuXHJcblx0XHRcdFx0aWYgKCB0aGlzLm1vdXNlTW92ZWQgKSB7XHJcblx0XHRcdFx0XHQvLyB0aGlzIGlzIGEgZHJhZywgY2hhbmdlIHRoZSB2YWx1ZSBvbmx5IGlmIHVzZXIgZHJhZ2dlZCBlbm91Z2hcclxuXHRcdFx0XHRcdGlmICggdGhpcy51c2VyTW9kaWZpZWQgKSB7XHJcblx0XHRcdFx0XHRcdHRoaXMucmVmcmVzaCggdGhpcy5iZWZvcmVTdGFydCA9PT0gMCA/IDEgOiAwICk7XHJcblx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHR0aGlzLnJlZnJlc2goIHRoaXMuYmVmb3JlU3RhcnQgKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0Ly8gdGhpcyBpcyBqdXN0IGEgY2xpY2ssIGNoYW5nZSB0aGUgdmFsdWVcclxuXHRcdFx0XHRcdHRoaXMucmVmcmVzaCggdGhpcy5iZWZvcmVTdGFydCA9PT0gMCA/IDEgOiAwICk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHR0aGlzLm1vdXNlTW92ZWQgPSBmYWxzZTtcclxuXHRcdFx0dGhpcy5fdHJpZ2dlciggXCJzdG9wXCIgKTtcclxuXHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9wcmV2ZW50RG9jdW1lbnREcmFnOiBmdW5jdGlvbiggZXZlbnQgKSB7XHJcblx0XHRcdC8vIE5PVEU6IHdlIGRvbid0IGRvIHRoaXMgaW4gcmVmcmVzaCBiZWNhdXNlIHdlIHN0aWxsIHdhbnQgdG9cclxuXHRcdFx0Ly8gICAgICAgc3VwcG9ydCBwcm9ncmFtbWF0aWMgYWx0ZXJhdGlvbiBvZiBkaXNhYmxlZCBpbnB1dHNcclxuXHRcdFx0aWYgKCB0aGlzLl90cmlnZ2VyKCBcImRyYWdcIiwgZXZlbnQgKSA9PT0gZmFsc2UpIHtcclxuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKCB0aGlzLmRyYWdnaW5nICYmICF0aGlzLm9wdGlvbnMuZGlzYWJsZWQgKSB7XHJcblxyXG5cdFx0XHRcdC8vIHRoaXMubW91c2VNb3ZlZCBtdXN0IGJlIHVwZGF0ZWQgYmVmb3JlIHJlZnJlc2goKSBiZWNhdXNlIGl0IHdpbGwgYmUgdXNlZCBpbiB0aGUgY29udHJvbCBcImNoYW5nZVwiIGV2ZW50XHJcblx0XHRcdFx0dGhpcy5tb3VzZU1vdmVkID0gdHJ1ZTtcclxuXHJcblx0XHRcdFx0aWYgKCB0aGlzLmlzVG9nZ2xlU3dpdGNoICkge1xyXG5cdFx0XHRcdFx0Ly8gbWFrZSB0aGUgaGFuZGxlIG1vdmUgaW4gc3luYyB3aXRoIHRoZSBtb3VzZVxyXG5cdFx0XHRcdFx0dGhpcy5oYW5kbGUucmVtb3ZlQ2xhc3MoIFwidWktc2xpZGVyLWhhbmRsZS1zbmFwcGluZ1wiICk7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHR0aGlzLnJlZnJlc2goIGV2ZW50ICk7XHJcblxyXG5cdFx0XHRcdC8vIG9ubHkgYWZ0ZXIgcmVmcmVzaCgpIHlvdSBjYW4gY2FsY3VsYXRlIHRoaXMudXNlck1vZGlmaWVkXHJcblx0XHRcdFx0dGhpcy51c2VyTW9kaWZpZWQgPSB0aGlzLmJlZm9yZVN0YXJ0ICE9PSB0aGlzLmVsZW1lbnRbMF0uc2VsZWN0ZWRJbmRleDtcclxuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblxyXG5cdF9jaGVja2VkUmVmcmVzaDogZnVuY3Rpb24oKSB7XHJcblx0XHRpZiAoIHRoaXMudmFsdWUgIT09IHRoaXMuX3ZhbHVlKCkgKSB7XHJcblx0XHRcdHRoaXMucmVmcmVzaCggdGhpcy5fdmFsdWUoKSApO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF92YWx1ZTogZnVuY3Rpb24oKSB7XHJcblx0XHRyZXR1cm4gIHRoaXMuaXNUb2dnbGVTd2l0Y2ggPyB0aGlzLmVsZW1lbnRbMF0uc2VsZWN0ZWRJbmRleCA6IHBhcnNlRmxvYXQoIHRoaXMuZWxlbWVudC52YWwoKSApIDtcclxuXHR9LFxyXG5cclxuXHRfcmVzZXQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5yZWZyZXNoKCB1bmRlZmluZWQsIGZhbHNlLCB0cnVlICk7XHJcblx0fSxcclxuXHJcblx0cmVmcmVzaDogZnVuY3Rpb24oIHZhbCwgaXNmcm9tQ29udHJvbCwgcHJldmVudElucHV0VXBkYXRlICkge1xyXG5cdFx0Ly8gTk9URTogd2UgZG9uJ3QgcmV0dXJuIGhlcmUgYmVjYXVzZSB3ZSB3YW50IHRvIHN1cHBvcnQgcHJvZ3JhbW1hdGljXHJcblx0XHQvLyAgICAgICBhbHRlcmF0aW9uIG9mIHRoZSBpbnB1dCB2YWx1ZSwgd2hpY2ggc2hvdWxkIHN0aWxsIHVwZGF0ZSB0aGUgc2xpZGVyXHJcblxyXG5cdFx0dmFyIHNlbGYgPSB0aGlzLFxyXG5cdFx0XHRwYXJlbnRUaGVtZSA9ICQubW9iaWxlLmdldEF0dHJpYnV0ZSggdGhpcy5lbGVtZW50WyAwIF0sIFwidGhlbWVcIiApLFxyXG5cdFx0XHR0aGVtZSA9IHRoaXMub3B0aW9ucy50aGVtZSB8fCBwYXJlbnRUaGVtZSxcclxuXHRcdFx0dGhlbWVDbGFzcyA9ICB0aGVtZSA/IFwiIHVpLWJ0bi1cIiArIHRoZW1lIDogXCJcIixcclxuXHRcdFx0dHJhY2tUaGVtZSA9IHRoaXMub3B0aW9ucy50cmFja1RoZW1lIHx8IHBhcmVudFRoZW1lLFxyXG5cdFx0XHR0cmFja1RoZW1lQ2xhc3MgPSB0cmFja1RoZW1lID8gXCIgdWktYmFyLVwiICsgdHJhY2tUaGVtZSA6IFwiIHVpLWJhci1pbmhlcml0XCIsXHJcblx0XHRcdGNvcm5lckNsYXNzID0gdGhpcy5vcHRpb25zLmNvcm5lcnMgPyBcIiB1aS1jb3JuZXItYWxsXCIgOiBcIlwiLFxyXG5cdFx0XHRtaW5pQ2xhc3MgPSB0aGlzLm9wdGlvbnMubWluaSA/IFwiIHVpLW1pbmlcIiA6IFwiXCIsXHJcblx0XHRcdGxlZnQsIHdpZHRoLCBkYXRhLCB0b2wsXHJcblx0XHRcdHB4U3RlcCwgcGVyY2VudCxcclxuXHRcdFx0Y29udHJvbCwgaXNJbnB1dCwgb3B0aW9uRWxlbWVudHMsIG1pbiwgbWF4LCBzdGVwLFxyXG5cdFx0XHRuZXd2YWwsIHZhbE1vZFN0ZXAsIGFsaWduVmFsdWUsIHBlcmNlbnRQZXJTdGVwLFxyXG5cdFx0XHRoYW5kbGVQZXJjZW50LCBhUGVyY2VudCwgYlBlcmNlbnQsXHJcblx0XHRcdHZhbHVlQ2hhbmdlZDtcclxuXHJcblx0XHRzZWxmLnNsaWRlclswXS5jbGFzc05hbWUgPSBbIHRoaXMuaXNUb2dnbGVTd2l0Y2ggPyBcInVpLXNsaWRlciB1aS1zbGlkZXItc3dpdGNoIHVpLXNsaWRlci10cmFjayB1aS1zaGFkb3ctaW5zZXRcIiA6IFwidWktc2xpZGVyLXRyYWNrIHVpLXNoYWRvdy1pbnNldFwiLCB0cmFja1RoZW1lQ2xhc3MsIGNvcm5lckNsYXNzLCBtaW5pQ2xhc3MgXS5qb2luKCBcIlwiICk7XHJcblx0XHRpZiAoIHRoaXMub3B0aW9ucy5kaXNhYmxlZCB8fCB0aGlzLmVsZW1lbnQucHJvcCggXCJkaXNhYmxlZFwiICkgKSB7XHJcblx0XHRcdHRoaXMuZGlzYWJsZSgpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIHNldCB0aGUgc3RvcmVkIHZhbHVlIGZvciBjb21wYXJpc29uIGxhdGVyXHJcblx0XHR0aGlzLnZhbHVlID0gdGhpcy5fdmFsdWUoKTtcclxuXHRcdGlmICggdGhpcy5vcHRpb25zLmhpZ2hsaWdodCAmJiAhdGhpcy5pc1RvZ2dsZVN3aXRjaCAmJiB0aGlzLnNsaWRlci5maW5kKCBcIi51aS1zbGlkZXItYmdcIiApLmxlbmd0aCA9PT0gMCApIHtcclxuXHRcdFx0dGhpcy52YWx1ZWJnID0gKGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHZhciBiZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwiZGl2XCIgKTtcclxuXHRcdFx0XHRiZy5jbGFzc05hbWUgPSBcInVpLXNsaWRlci1iZyBcIiArICQubW9iaWxlLmFjdGl2ZUJ0bkNsYXNzO1xyXG5cdFx0XHRcdHJldHVybiAkKCBiZyApLnByZXBlbmRUbyggc2VsZi5zbGlkZXIgKTtcclxuXHRcdFx0fSkoKTtcclxuXHRcdH1cclxuXHRcdHRoaXMuaGFuZGxlLmFkZENsYXNzKCBcInVpLWJ0blwiICsgdGhlbWVDbGFzcyArIFwiIHVpLXNoYWRvd1wiICk7XHJcblxyXG5cdFx0Y29udHJvbCA9IHRoaXMuZWxlbWVudDtcclxuXHRcdGlzSW5wdXQgPSAhdGhpcy5pc1RvZ2dsZVN3aXRjaDtcclxuXHRcdG9wdGlvbkVsZW1lbnRzID0gaXNJbnB1dCA/IFtdIDogY29udHJvbC5maW5kKCBcIm9wdGlvblwiICk7XHJcblx0XHRtaW4gPSAgaXNJbnB1dCA/IHBhcnNlRmxvYXQoIGNvbnRyb2wuYXR0ciggXCJtaW5cIiApICkgOiAwO1xyXG5cdFx0bWF4ID0gaXNJbnB1dCA/IHBhcnNlRmxvYXQoIGNvbnRyb2wuYXR0ciggXCJtYXhcIiApICkgOiBvcHRpb25FbGVtZW50cy5sZW5ndGggLSAxO1xyXG5cdFx0c3RlcCA9ICggaXNJbnB1dCAmJiBwYXJzZUZsb2F0KCBjb250cm9sLmF0dHIoIFwic3RlcFwiICkgKSA+IDAgKSA/IHBhcnNlRmxvYXQoIGNvbnRyb2wuYXR0ciggXCJzdGVwXCIgKSApIDogMTtcclxuXHJcblx0XHRpZiAoIHR5cGVvZiB2YWwgPT09IFwib2JqZWN0XCIgKSB7XHJcblx0XHRcdGRhdGEgPSB2YWw7XHJcblx0XHRcdC8vIGEgc2xpZ2h0IHRvbGVyYW5jZSBoZWxwZWQgZ2V0IHRvIHRoZSBlbmRzIG9mIHRoZSBzbGlkZXJcclxuXHRcdFx0dG9sID0gODtcclxuXHJcblx0XHRcdGxlZnQgPSB0aGlzLnNsaWRlci5vZmZzZXQoKS5sZWZ0O1xyXG5cdFx0XHR3aWR0aCA9IHRoaXMuc2xpZGVyLndpZHRoKCk7XHJcblx0XHRcdHB4U3RlcCA9IHdpZHRoLygobWF4LW1pbikvc3RlcCk7XHJcblx0XHRcdGlmICggIXRoaXMuZHJhZ2dpbmcgfHxcclxuXHRcdFx0XHRcdGRhdGEucGFnZVggPCBsZWZ0IC0gdG9sIHx8XHJcblx0XHRcdFx0XHRkYXRhLnBhZ2VYID4gbGVmdCArIHdpZHRoICsgdG9sICkge1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAoIHB4U3RlcCA+IDEgKSB7XHJcblx0XHRcdFx0cGVyY2VudCA9ICggKCBkYXRhLnBhZ2VYIC0gbGVmdCApIC8gd2lkdGggKSAqIDEwMDtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRwZXJjZW50ID0gTWF0aC5yb3VuZCggKCAoIGRhdGEucGFnZVggLSBsZWZ0ICkgLyB3aWR0aCApICogMTAwICk7XHJcblx0XHRcdH1cclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdGlmICggdmFsID09IG51bGwgKSB7XHJcblx0XHRcdFx0dmFsID0gaXNJbnB1dCA/IHBhcnNlRmxvYXQoIGNvbnRyb2wudmFsKCkgfHwgMCApIDogY29udHJvbFswXS5zZWxlY3RlZEluZGV4O1xyXG5cdFx0XHR9XHJcblx0XHRcdHBlcmNlbnQgPSAoIHBhcnNlRmxvYXQoIHZhbCApIC0gbWluICkgLyAoIG1heCAtIG1pbiApICogMTAwO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggaXNOYU4oIHBlcmNlbnQgKSApIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdG5ld3ZhbCA9ICggcGVyY2VudCAvIDEwMCApICogKCBtYXggLSBtaW4gKSArIG1pbjtcclxuXHJcblx0XHQvL2Zyb20galF1ZXJ5IFVJIHNsaWRlciwgdGhlIGZvbGxvd2luZyBzb3VyY2Ugd2lsbCByb3VuZCB0byB0aGUgbmVhcmVzdCBzdGVwXHJcblx0XHR2YWxNb2RTdGVwID0gKCBuZXd2YWwgLSBtaW4gKSAlIHN0ZXA7XHJcblx0XHRhbGlnblZhbHVlID0gbmV3dmFsIC0gdmFsTW9kU3RlcDtcclxuXHJcblx0XHRpZiAoIE1hdGguYWJzKCB2YWxNb2RTdGVwICkgKiAyID49IHN0ZXAgKSB7XHJcblx0XHRcdGFsaWduVmFsdWUgKz0gKCB2YWxNb2RTdGVwID4gMCApID8gc3RlcCA6ICggLXN0ZXAgKTtcclxuXHRcdH1cclxuXHJcblx0XHRwZXJjZW50UGVyU3RlcCA9IDEwMC8oKG1heC1taW4pL3N0ZXApO1xyXG5cdFx0Ly8gU2luY2UgSmF2YVNjcmlwdCBoYXMgcHJvYmxlbXMgd2l0aCBsYXJnZSBmbG9hdHMsIHJvdW5kXHJcblx0XHQvLyB0aGUgZmluYWwgdmFsdWUgdG8gNSBkaWdpdHMgYWZ0ZXIgdGhlIGRlY2ltYWwgcG9pbnQgKHNlZSBqUXVlcnlVSTogIzQxMjQpXHJcblx0XHRuZXd2YWwgPSBwYXJzZUZsb2F0KCBhbGlnblZhbHVlLnRvRml4ZWQoNSkgKTtcclxuXHJcblx0XHRpZiAoIHR5cGVvZiBweFN0ZXAgPT09IFwidW5kZWZpbmVkXCIgKSB7XHJcblx0XHRcdHB4U3RlcCA9IHdpZHRoIC8gKCAobWF4LW1pbikgLyBzdGVwICk7XHJcblx0XHR9XHJcblx0XHRpZiAoIHB4U3RlcCA+IDEgJiYgaXNJbnB1dCApIHtcclxuXHRcdFx0cGVyY2VudCA9ICggbmV3dmFsIC0gbWluICkgKiBwZXJjZW50UGVyU3RlcCAqICggMSAvIHN0ZXAgKTtcclxuXHRcdH1cclxuXHRcdGlmICggcGVyY2VudCA8IDAgKSB7XHJcblx0XHRcdHBlcmNlbnQgPSAwO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggcGVyY2VudCA+IDEwMCApIHtcclxuXHRcdFx0cGVyY2VudCA9IDEwMDtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIG5ld3ZhbCA8IG1pbiApIHtcclxuXHRcdFx0bmV3dmFsID0gbWluO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggbmV3dmFsID4gbWF4ICkge1xyXG5cdFx0XHRuZXd2YWwgPSBtYXg7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5oYW5kbGUuY3NzKCBcImxlZnRcIiwgcGVyY2VudCArIFwiJVwiICk7XHJcblxyXG5cdFx0dGhpcy5oYW5kbGVbMF0uc2V0QXR0cmlidXRlKCBcImFyaWEtdmFsdWVub3dcIiwgaXNJbnB1dCA/IG5ld3ZhbCA6IG9wdGlvbkVsZW1lbnRzLmVxKCBuZXd2YWwgKS5hdHRyKCBcInZhbHVlXCIgKSApO1xyXG5cclxuXHRcdHRoaXMuaGFuZGxlWzBdLnNldEF0dHJpYnV0ZSggXCJhcmlhLXZhbHVldGV4dFwiLCBpc0lucHV0ID8gbmV3dmFsIDogb3B0aW9uRWxlbWVudHMuZXEoIG5ld3ZhbCApLmdldEVuY29kZWRUZXh0KCkgKTtcclxuXHJcblx0XHR0aGlzLmhhbmRsZVswXS5zZXRBdHRyaWJ1dGUoIFwidGl0bGVcIiwgaXNJbnB1dCA/IG5ld3ZhbCA6IG9wdGlvbkVsZW1lbnRzLmVxKCBuZXd2YWwgKS5nZXRFbmNvZGVkVGV4dCgpICk7XHJcblxyXG5cdFx0aWYgKCB0aGlzLnZhbHVlYmcgKSB7XHJcblx0XHRcdHRoaXMudmFsdWViZy5jc3MoIFwid2lkdGhcIiwgcGVyY2VudCArIFwiJVwiICk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gZHJhZyB0aGUgbGFiZWwgd2lkdGhzXHJcblx0XHRpZiAoIHRoaXMuX2xhYmVscyApIHtcclxuXHRcdFx0aGFuZGxlUGVyY2VudCA9IHRoaXMuaGFuZGxlLndpZHRoKCkgLyB0aGlzLnNsaWRlci53aWR0aCgpICogMTAwO1xyXG5cdFx0XHRhUGVyY2VudCA9IHBlcmNlbnQgJiYgaGFuZGxlUGVyY2VudCArICggMTAwIC0gaGFuZGxlUGVyY2VudCApICogcGVyY2VudCAvIDEwMDtcclxuXHRcdFx0YlBlcmNlbnQgPSBwZXJjZW50ID09PSAxMDAgPyAwIDogTWF0aC5taW4oIGhhbmRsZVBlcmNlbnQgKyAxMDAgLSBhUGVyY2VudCwgMTAwICk7XHJcblxyXG5cdFx0XHR0aGlzLl9sYWJlbHMuZWFjaChmdW5jdGlvbigpIHtcclxuXHRcdFx0XHR2YXIgYWIgPSAkKCB0aGlzICkuaGFzQ2xhc3MoIFwidWktc2xpZGVyLWxhYmVsLWFcIiApO1xyXG5cdFx0XHRcdCQoIHRoaXMgKS53aWR0aCggKCBhYiA/IGFQZXJjZW50IDogYlBlcmNlbnQgICkgKyBcIiVcIiApO1xyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoICFwcmV2ZW50SW5wdXRVcGRhdGUgKSB7XHJcblx0XHRcdHZhbHVlQ2hhbmdlZCA9IGZhbHNlO1xyXG5cclxuXHRcdFx0Ly8gdXBkYXRlIGNvbnRyb2xcInMgdmFsdWVcclxuXHRcdFx0aWYgKCBpc0lucHV0ICkge1xyXG5cdFx0XHRcdHZhbHVlQ2hhbmdlZCA9IHBhcnNlRmxvYXQoIGNvbnRyb2wudmFsKCkgKSAhPT0gbmV3dmFsO1xyXG5cdFx0XHRcdGNvbnRyb2wudmFsKCBuZXd2YWwgKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHR2YWx1ZUNoYW5nZWQgPSBjb250cm9sWyAwIF0uc2VsZWN0ZWRJbmRleCAhPT0gbmV3dmFsO1xyXG5cdFx0XHRcdGNvbnRyb2xbIDAgXS5zZWxlY3RlZEluZGV4ID0gbmV3dmFsO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmICggdGhpcy5fdHJpZ2dlciggXCJiZWZvcmVjaGFuZ2VcIiwgdmFsICkgPT09IGZhbHNlKSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKCAhaXNmcm9tQ29udHJvbCAmJiB2YWx1ZUNoYW5nZWQgKSB7XHJcblx0XHRcdFx0Y29udHJvbC50cmlnZ2VyKCBcImNoYW5nZVwiICk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfc2V0SGlnaGxpZ2h0OiBmdW5jdGlvbiggdmFsdWUgKSB7XHJcblx0XHR2YWx1ZSA9ICEhdmFsdWU7XHJcblx0XHRpZiAoIHZhbHVlICkge1xyXG5cdFx0XHR0aGlzLm9wdGlvbnMuaGlnaGxpZ2h0ID0gISF2YWx1ZTtcclxuXHRcdFx0dGhpcy5yZWZyZXNoKCk7XHJcblx0XHR9IGVsc2UgaWYgKCB0aGlzLnZhbHVlYmcgKSB7XHJcblx0XHRcdHRoaXMudmFsdWViZy5yZW1vdmUoKTtcclxuXHRcdFx0dGhpcy52YWx1ZWJnID0gZmFsc2U7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X3NldFRoZW1lOiBmdW5jdGlvbiggdmFsdWUgKSB7XHJcblx0XHR0aGlzLmhhbmRsZVxyXG5cdFx0XHQucmVtb3ZlQ2xhc3MoIFwidWktYnRuLVwiICsgdGhpcy5vcHRpb25zLnRoZW1lIClcclxuXHRcdFx0LmFkZENsYXNzKCBcInVpLWJ0bi1cIiArIHZhbHVlICk7XHJcblxyXG5cdFx0dmFyIGN1cnJlbnRUaGVtZSA9IHRoaXMub3B0aW9ucy50aGVtZSA/IHRoaXMub3B0aW9ucy50aGVtZSA6IFwiaW5oZXJpdFwiLFxyXG5cdFx0XHRuZXdUaGVtZSA9IHZhbHVlID8gdmFsdWUgOiBcImluaGVyaXRcIjtcclxuXHJcblx0XHR0aGlzLmNvbnRyb2xcclxuXHRcdFx0LnJlbW92ZUNsYXNzKCBcInVpLWJvZHktXCIgKyBjdXJyZW50VGhlbWUgKVxyXG5cdFx0XHQuYWRkQ2xhc3MoIFwidWktYm9keS1cIiArIG5ld1RoZW1lICk7XHJcblx0fSxcclxuXHJcblx0X3NldFRyYWNrVGhlbWU6IGZ1bmN0aW9uKCB2YWx1ZSApIHtcclxuXHRcdHZhciBjdXJyZW50VHJhY2tUaGVtZSA9IHRoaXMub3B0aW9ucy50cmFja1RoZW1lID8gdGhpcy5vcHRpb25zLnRyYWNrVGhlbWUgOiBcImluaGVyaXRcIixcclxuXHRcdFx0bmV3VHJhY2tUaGVtZSA9IHZhbHVlID8gdmFsdWUgOiBcImluaGVyaXRcIjtcclxuXHJcblx0XHR0aGlzLnNsaWRlclxyXG5cdFx0XHQucmVtb3ZlQ2xhc3MoIFwidWktYm9keS1cIiArIGN1cnJlbnRUcmFja1RoZW1lIClcclxuXHRcdFx0LmFkZENsYXNzKCBcInVpLWJvZHktXCIgKyBuZXdUcmFja1RoZW1lICk7XHJcblx0fSxcclxuXHJcblx0X3NldE1pbmk6IGZ1bmN0aW9uKCB2YWx1ZSApIHtcclxuXHRcdHZhbHVlID0gISF2YWx1ZTtcclxuXHRcdGlmICggIXRoaXMuaXNUb2dnbGVTd2l0Y2ggJiYgIXRoaXMuaXNSYW5nZXNsaWRlciApIHtcclxuXHRcdFx0dGhpcy5zbGlkZXIucGFyZW50KCkudG9nZ2xlQ2xhc3MoIFwidWktbWluaVwiLCB2YWx1ZSApO1xyXG5cdFx0XHR0aGlzLmVsZW1lbnQudG9nZ2xlQ2xhc3MoIFwidWktbWluaVwiLCB2YWx1ZSApO1xyXG5cdFx0fVxyXG5cdFx0dGhpcy5zbGlkZXIudG9nZ2xlQ2xhc3MoIFwidWktbWluaVwiLCB2YWx1ZSApO1xyXG5cdH0sXHJcblxyXG5cdF9zZXRDb3JuZXJzOiBmdW5jdGlvbiggdmFsdWUgKSB7XHJcblx0XHR0aGlzLnNsaWRlci50b2dnbGVDbGFzcyggXCJ1aS1jb3JuZXItYWxsXCIsIHZhbHVlICk7XHJcblxyXG5cdFx0aWYgKCAhdGhpcy5pc1RvZ2dsZVN3aXRjaCApIHtcclxuXHRcdFx0dGhpcy5jb250cm9sLnRvZ2dsZUNsYXNzKCBcInVpLWNvcm5lci1hbGxcIiwgdmFsdWUgKTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfc2V0RGlzYWJsZWQ6IGZ1bmN0aW9uKCB2YWx1ZSApIHtcclxuXHRcdHZhbHVlID0gISF2YWx1ZTtcclxuXHRcdHRoaXMuZWxlbWVudC5wcm9wKCBcImRpc2FibGVkXCIsIHZhbHVlICk7XHJcblx0XHR0aGlzLnNsaWRlclxyXG5cdFx0XHQudG9nZ2xlQ2xhc3MoIFwidWktc3RhdGUtZGlzYWJsZWRcIiwgdmFsdWUgKVxyXG5cdFx0XHQuYXR0ciggXCJhcmlhLWRpc2FibGVkXCIsIHZhbHVlICk7XHJcblxyXG5cdFx0dGhpcy5lbGVtZW50LnRvZ2dsZUNsYXNzKCBcInVpLXN0YXRlLWRpc2FibGVkXCIsIHZhbHVlICk7XHJcblx0fVxyXG5cclxufSwgJC5tb2JpbGUuYmVoYXZpb3JzLmZvcm1SZXNldCApICk7XHJcblxyXG59KSggalF1ZXJ5ICk7XHJcblxyXG4oZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcclxuXHJcbnZhciBwb3B1cDtcclxuXHJcbmZ1bmN0aW9uIGdldFBvcHVwKCkge1xyXG5cdGlmICggIXBvcHVwICkge1xyXG5cdFx0cG9wdXAgPSAkKCBcIjxkaXY+PC9kaXY+XCIsIHtcclxuXHRcdFx0XCJjbGFzc1wiOiBcInVpLXNsaWRlci1wb3B1cCB1aS1zaGFkb3cgdWktY29ybmVyLWFsbFwiXHJcblx0XHR9KTtcclxuXHR9XHJcblx0cmV0dXJuIHBvcHVwLmNsb25lKCk7XHJcbn1cclxuXHJcbiQud2lkZ2V0KCBcIm1vYmlsZS5zbGlkZXJcIiwgJC5tb2JpbGUuc2xpZGVyLCB7XHJcblx0b3B0aW9uczoge1xyXG5cdFx0cG9wdXBFbmFibGVkOiBmYWxzZSxcclxuXHRcdHNob3dWYWx1ZTogZmFsc2VcclxuXHR9LFxyXG5cclxuXHRfY3JlYXRlOiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuX3N1cGVyKCk7XHJcblxyXG5cdFx0JC5leHRlbmQoIHRoaXMsIHtcclxuXHRcdFx0X2N1cnJlbnRWYWx1ZTogbnVsbCxcclxuXHRcdFx0X3BvcHVwOiBudWxsLFxyXG5cdFx0XHRfcG9wdXBWaXNpYmxlOiBmYWxzZVxyXG5cdFx0fSk7XHJcblxyXG5cdFx0dGhpcy5fc2V0T3B0aW9uKCBcInBvcHVwRW5hYmxlZFwiLCB0aGlzLm9wdGlvbnMucG9wdXBFbmFibGVkICk7XHJcblxyXG5cdFx0dGhpcy5fb24oIHRoaXMuaGFuZGxlLCB7IFwidm1vdXNlZG93blwiIDogXCJfc2hvd1BvcHVwXCIgfSApO1xyXG5cdFx0dGhpcy5fb24oIHRoaXMuc2xpZGVyLmFkZCggdGhpcy5kb2N1bWVudCApLCB7IFwidm1vdXNldXBcIiA6IFwiX2hpZGVQb3B1cFwiIH0gKTtcclxuXHRcdHRoaXMuX3JlZnJlc2goKTtcclxuXHR9LFxyXG5cclxuXHQvLyBwb3NpdGlvbiB0aGUgcG9wdXAgY2VudGVyZWQgNXB4IGFib3ZlIHRoZSBoYW5kbGVcclxuXHRfcG9zaXRpb25Qb3B1cDogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgZHN0T2Zmc2V0ID0gdGhpcy5oYW5kbGUub2Zmc2V0KCk7XHJcblxyXG5cdFx0dGhpcy5fcG9wdXAub2Zmc2V0KCB7XHJcblx0XHRcdGxlZnQ6IGRzdE9mZnNldC5sZWZ0ICsgKCB0aGlzLmhhbmRsZS53aWR0aCgpIC0gdGhpcy5fcG9wdXAud2lkdGgoKSApIC8gMixcclxuXHRcdFx0dG9wOiBkc3RPZmZzZXQudG9wIC0gdGhpcy5fcG9wdXAub3V0ZXJIZWlnaHQoKSAtIDVcclxuXHRcdH0pO1xyXG5cdH0sXHJcblxyXG5cdF9zZXRPcHRpb246IGZ1bmN0aW9uKCBrZXksIHZhbHVlICkge1xyXG5cdFx0dGhpcy5fc3VwZXIoIGtleSwgdmFsdWUgKTtcclxuXHJcblx0XHRpZiAoIGtleSA9PT0gXCJzaG93VmFsdWVcIiApIHtcclxuXHRcdFx0dGhpcy5oYW5kbGUuaHRtbCggdmFsdWUgJiYgIXRoaXMub3B0aW9ucy5taW5pID8gdGhpcy5fdmFsdWUoKSA6IFwiXCIgKTtcclxuXHRcdH0gZWxzZSBpZiAoIGtleSA9PT0gXCJwb3B1cEVuYWJsZWRcIiApIHtcclxuXHRcdFx0aWYgKCB2YWx1ZSAmJiAhdGhpcy5fcG9wdXAgKSB7XHJcblx0XHRcdFx0dGhpcy5fcG9wdXAgPSBnZXRQb3B1cCgpXHJcblx0XHRcdFx0XHQuYWRkQ2xhc3MoIFwidWktYm9keS1cIiArICggdGhpcy5vcHRpb25zLnRoZW1lIHx8IFwiYVwiICkgKVxyXG5cdFx0XHRcdFx0LmhpZGUoKVxyXG5cdFx0XHRcdFx0Lmluc2VydEJlZm9yZSggdGhpcy5lbGVtZW50ICk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHQvLyBzaG93IHZhbHVlIG9uIHRoZSBoYW5kbGUgYW5kIGluIHBvcHVwXHJcblx0cmVmcmVzaDogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLl9zdXBlci5hcHBseSggdGhpcywgYXJndW1lbnRzICk7XHJcblx0XHR0aGlzLl9yZWZyZXNoKCk7XHJcblx0fSxcclxuXHJcblx0X3JlZnJlc2g6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIG8gPSB0aGlzLm9wdGlvbnMsIG5ld1ZhbHVlO1xyXG5cclxuXHRcdGlmICggby5wb3B1cEVuYWJsZWQgKSB7XHJcblx0XHRcdC8vIHJlbW92ZSB0aGUgdGl0bGUgYXR0cmlidXRlIGZyb20gdGhlIGhhbmRsZSAod2hpY2ggaXNcclxuXHRcdFx0Ly8gcmVzcG9uc2libGUgZm9yIHRoZSBhbm5veWluZyB0b29sdGlwKTsgTkIgd2UgaGF2ZVxyXG5cdFx0XHQvLyB0byBkbyBpdCBoZXJlIGFzIHRoZSBqcW0gc2xpZGVyIHNldHMgaXQgZXZlcnkgdGltZVxyXG5cdFx0XHQvLyB0aGUgc2xpZGVyJ3MgdmFsdWUgY2hhbmdlcyA6KFxyXG5cdFx0XHR0aGlzLmhhbmRsZS5yZW1vdmVBdHRyKCBcInRpdGxlXCIgKTtcclxuXHRcdH1cclxuXHJcblx0XHRuZXdWYWx1ZSA9IHRoaXMuX3ZhbHVlKCk7XHJcblx0XHRpZiAoIG5ld1ZhbHVlID09PSB0aGlzLl9jdXJyZW50VmFsdWUgKSB7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHRcdHRoaXMuX2N1cnJlbnRWYWx1ZSA9IG5ld1ZhbHVlO1xyXG5cclxuXHRcdGlmICggby5wb3B1cEVuYWJsZWQgJiYgdGhpcy5fcG9wdXAgKSB7XHJcblx0XHRcdHRoaXMuX3Bvc2l0aW9uUG9wdXAoKTtcclxuXHRcdFx0dGhpcy5fcG9wdXAuaHRtbCggbmV3VmFsdWUgKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIG8uc2hvd1ZhbHVlICYmICF0aGlzLm9wdGlvbnMubWluaSApIHtcclxuXHRcdFx0dGhpcy5oYW5kbGUuaHRtbCggbmV3VmFsdWUgKTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfc2hvd1BvcHVwOiBmdW5jdGlvbigpIHtcclxuXHRcdGlmICggdGhpcy5vcHRpb25zLnBvcHVwRW5hYmxlZCAmJiAhdGhpcy5fcG9wdXBWaXNpYmxlICkge1xyXG5cdFx0XHR0aGlzLmhhbmRsZS5odG1sKCBcIlwiICk7XHJcblx0XHRcdHRoaXMuX3BvcHVwLnNob3coKTtcclxuXHRcdFx0dGhpcy5fcG9zaXRpb25Qb3B1cCgpO1xyXG5cdFx0XHR0aGlzLl9wb3B1cFZpc2libGUgPSB0cnVlO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9oaWRlUG9wdXA6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIG8gPSB0aGlzLm9wdGlvbnM7XHJcblxyXG5cdFx0aWYgKCBvLnBvcHVwRW5hYmxlZCAmJiB0aGlzLl9wb3B1cFZpc2libGUgKSB7XHJcblx0XHRcdGlmICggby5zaG93VmFsdWUgJiYgIW8ubWluaSApIHtcclxuXHRcdFx0XHR0aGlzLmhhbmRsZS5odG1sKCB0aGlzLl92YWx1ZSgpICk7XHJcblx0XHRcdH1cclxuXHRcdFx0dGhpcy5fcG9wdXAuaGlkZSgpO1xyXG5cdFx0XHR0aGlzLl9wb3B1cFZpc2libGUgPSBmYWxzZTtcclxuXHRcdH1cclxuXHR9XHJcbn0pO1xyXG5cclxufSkoIGpRdWVyeSApO1xyXG5cclxuKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7XHJcblxyXG4kLndpZGdldCggXCJtb2JpbGUuZmxpcHN3aXRjaFwiLCAkLmV4dGVuZCh7XHJcblxyXG5cdG9wdGlvbnM6IHtcclxuXHRcdG9uVGV4dDogXCJPblwiLFxyXG5cdFx0b2ZmVGV4dDogXCJPZmZcIixcclxuXHRcdHRoZW1lOiBudWxsLFxyXG5cdFx0ZW5oYW5jZWQ6IGZhbHNlLFxyXG5cdFx0d3JhcHBlckNsYXNzOiBudWxsLFxyXG5cdFx0Y29ybmVyczogdHJ1ZSxcclxuXHRcdG1pbmk6IGZhbHNlXHJcblx0fSxcclxuXHJcblx0X2NyZWF0ZTogZnVuY3Rpb24oKSB7XHJcblx0XHRcdGlmICggIXRoaXMub3B0aW9ucy5lbmhhbmNlZCApIHtcclxuXHRcdFx0XHR0aGlzLl9lbmhhbmNlKCk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0JC5leHRlbmQoIHRoaXMsIHtcclxuXHRcdFx0XHRcdGZsaXBzd2l0Y2g6IHRoaXMuZWxlbWVudC5wYXJlbnQoKSxcclxuXHRcdFx0XHRcdG9uOiB0aGlzLmVsZW1lbnQuZmluZCggXCIudWktZmxpcHN3aXRjaC1vblwiICkuZXEoIDAgKSxcclxuXHRcdFx0XHRcdG9mZjogdGhpcy5lbGVtZW50LmZpbmQoIFwiLnVpLWZsaXBzd2l0Y2gtb2ZmXCIgKS5lcSgwKSxcclxuXHRcdFx0XHRcdHR5cGU6IHRoaXMuZWxlbWVudC5nZXQoIDAgKS50YWdOYW1lXHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHRoaXMuX2hhbmRsZUZvcm1SZXNldCgpO1xyXG5cclxuXHRcdFx0Ly8gVHJhbnNmZXIgdGFiaW5kZXggdG8gXCJvblwiIGVsZW1lbnQgYW5kIG1ha2UgaW5wdXQgdW5mb2N1c2FibGVcclxuXHRcdFx0dGhpcy5fb3JpZ2luYWxUYWJJbmRleCA9IHRoaXMuZWxlbWVudC5hdHRyKCBcInRhYmluZGV4XCIgKTtcclxuXHRcdFx0aWYgKCB0aGlzLl9vcmlnaW5hbFRhYkluZGV4ICE9IG51bGwgKSB7XHJcblx0XHRcdFx0dGhpcy5vbi5hdHRyKCBcInRhYmluZGV4XCIsIHRoaXMuX29yaWdpbmFsVGFiSW5kZXggKTtcclxuXHRcdFx0fVxyXG5cdFx0XHR0aGlzLmVsZW1lbnQuYXR0ciggXCJ0YWJpbmRleFwiLCBcIi0xXCIgKTtcclxuXHRcdFx0dGhpcy5fb24oe1xyXG5cdFx0XHRcdFwiZm9jdXNcIiA6IFwiX2hhbmRsZUlucHV0Rm9jdXNcIlxyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdGlmICggdGhpcy5lbGVtZW50LmlzKCBcIjpkaXNhYmxlZFwiICkgKSB7XHJcblx0XHRcdFx0dGhpcy5fc2V0T3B0aW9ucyh7XHJcblx0XHRcdFx0XHRcImRpc2FibGVkXCI6IHRydWVcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0dGhpcy5fb24oIHRoaXMuZmxpcHN3aXRjaCwge1xyXG5cdFx0XHRcdFwiY2xpY2tcIjogXCJfdG9nZ2xlXCIsXHJcblx0XHRcdFx0XCJzd2lwZWxlZnRcIjogXCJfbGVmdFwiLFxyXG5cdFx0XHRcdFwic3dpcGVyaWdodFwiOiBcIl9yaWdodFwiXHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0dGhpcy5fb24oIHRoaXMub24sIHtcclxuXHRcdFx0XHRcImtleWRvd25cIjogXCJfa2V5ZG93blwiXHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0dGhpcy5fb24oIHtcclxuXHRcdFx0XHRcImNoYW5nZVwiOiBcInJlZnJlc2hcIlxyXG5cdFx0XHR9KTtcclxuXHR9LFxyXG5cclxuXHRfaGFuZGxlSW5wdXRGb2N1czogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLm9uLmZvY3VzKCk7XHJcblx0fSxcclxuXHJcblx0d2lkZ2V0OiBmdW5jdGlvbigpIHtcclxuXHRcdHJldHVybiB0aGlzLmZsaXBzd2l0Y2g7XHJcblx0fSxcclxuXHJcblx0X2xlZnQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5mbGlwc3dpdGNoLnJlbW92ZUNsYXNzKCBcInVpLWZsaXBzd2l0Y2gtYWN0aXZlXCIgKTtcclxuXHRcdGlmICggdGhpcy50eXBlID09PSBcIlNFTEVDVFwiICkge1xyXG5cdFx0XHR0aGlzLmVsZW1lbnQuZ2V0KCAwICkuc2VsZWN0ZWRJbmRleCA9IDA7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHR0aGlzLmVsZW1lbnQucHJvcCggXCJjaGVja2VkXCIsIGZhbHNlICk7XHJcblx0XHR9XHJcblx0XHR0aGlzLmVsZW1lbnQudHJpZ2dlciggXCJjaGFuZ2VcIiApO1xyXG5cdH0sXHJcblxyXG5cdF9yaWdodDogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLmZsaXBzd2l0Y2guYWRkQ2xhc3MoIFwidWktZmxpcHN3aXRjaC1hY3RpdmVcIiApO1xyXG5cdFx0aWYgKCB0aGlzLnR5cGUgPT09IFwiU0VMRUNUXCIgKSB7XHJcblx0XHRcdHRoaXMuZWxlbWVudC5nZXQoIDAgKS5zZWxlY3RlZEluZGV4ID0gMTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHRoaXMuZWxlbWVudC5wcm9wKCBcImNoZWNrZWRcIiwgdHJ1ZSApO1xyXG5cdFx0fVxyXG5cdFx0dGhpcy5lbGVtZW50LnRyaWdnZXIoIFwiY2hhbmdlXCIgKTtcclxuXHR9LFxyXG5cclxuXHRfZW5oYW5jZTogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgZmxpcHN3aXRjaCA9ICQoIFwiPGRpdj5cIiApLFxyXG5cdFx0XHRvcHRpb25zID0gdGhpcy5vcHRpb25zLFxyXG5cdFx0XHRlbGVtZW50ID0gdGhpcy5lbGVtZW50LFxyXG5cdFx0XHR0aGVtZSA9IG9wdGlvbnMudGhlbWUgPyBvcHRpb25zLnRoZW1lIDogXCJpbmhlcml0XCIsXHJcblxyXG5cdFx0XHQvLyBUaGUgXCJvblwiIGJ1dHRvbiBpcyBhbiBhbmNob3Igc28gaXQncyBmb2N1c2FibGVcclxuXHRcdFx0b24gPSAkKCBcIjxhPjwvYT5cIiwge1xyXG5cdFx0XHRcdFwiaHJlZlwiOiBcIiNcIlxyXG5cdFx0XHR9KSxcclxuXHRcdFx0b2ZmID0gJCggXCI8c3Bhbj48L3NwYW4+XCIgKSxcclxuXHRcdFx0dHlwZSA9IGVsZW1lbnQuZ2V0KCAwICkudGFnTmFtZSxcclxuXHRcdFx0b25UZXh0ID0gKCB0eXBlID09PSBcIklOUFVUXCIgKSA/XHJcblx0XHRcdFx0b3B0aW9ucy5vblRleHQgOiBlbGVtZW50LmZpbmQoIFwib3B0aW9uXCIgKS5lcSggMSApLnRleHQoKSxcclxuXHRcdFx0b2ZmVGV4dCA9ICggdHlwZSA9PT0gXCJJTlBVVFwiICkgP1xyXG5cdFx0XHRcdG9wdGlvbnMub2ZmVGV4dCA6IGVsZW1lbnQuZmluZCggXCJvcHRpb25cIiApLmVxKCAwICkudGV4dCgpO1xyXG5cclxuXHRcdFx0b25cclxuXHRcdFx0XHQuYWRkQ2xhc3MoIFwidWktZmxpcHN3aXRjaC1vbiB1aS1idG4gdWktc2hhZG93IHVpLWJ0bi1pbmhlcml0XCIgKVxyXG5cdFx0XHRcdC50ZXh0KCBvblRleHQgKTtcclxuXHRcdFx0b2ZmXHJcblx0XHRcdFx0LmFkZENsYXNzKCBcInVpLWZsaXBzd2l0Y2gtb2ZmXCIgKVxyXG5cdFx0XHRcdC50ZXh0KCBvZmZUZXh0ICk7XHJcblxyXG5cdFx0XHRmbGlwc3dpdGNoXHJcblx0XHRcdFx0LmFkZENsYXNzKCBcInVpLWZsaXBzd2l0Y2ggdWktc2hhZG93LWluc2V0IFwiICtcclxuXHRcdFx0XHRcdFwidWktYmFyLVwiICsgdGhlbWUgKyBcIiBcIiArXHJcblx0XHRcdFx0XHQoIG9wdGlvbnMud3JhcHBlckNsYXNzID8gb3B0aW9ucy53cmFwcGVyQ2xhc3MgOiBcIlwiICkgKyBcIiBcIiArXHJcblx0XHRcdFx0XHQoICggZWxlbWVudC5pcyggXCI6Y2hlY2tlZFwiICkgfHxcclxuXHRcdFx0XHRcdFx0ZWxlbWVudFxyXG5cdFx0XHRcdFx0XHRcdC5maW5kKCBcIm9wdGlvblwiIClcclxuXHRcdFx0XHRcdFx0XHQuZXEoIDEgKVxyXG5cdFx0XHRcdFx0XHRcdC5pcyggXCI6c2VsZWN0ZWRcIiApICkgPyBcInVpLWZsaXBzd2l0Y2gtYWN0aXZlXCIgOiBcIlwiICkgK1xyXG5cdFx0XHRcdFx0KCBlbGVtZW50LmlzKFwiOmRpc2FibGVkXCIpID8gXCIgdWktc3RhdGUtZGlzYWJsZWRcIjogXCJcIikgK1xyXG5cdFx0XHRcdFx0KCBvcHRpb25zLmNvcm5lcnMgPyBcIiB1aS1jb3JuZXItYWxsXCI6IFwiXCIgKSArXHJcblx0XHRcdFx0XHQoIG9wdGlvbnMubWluaSA/IFwiIHVpLW1pbmlcIjogXCJcIiApIClcclxuXHRcdFx0XHQuYXBwZW5kKCBvbiwgb2ZmICk7XHJcblxyXG5cdFx0XHRlbGVtZW50XHJcblx0XHRcdFx0LmFkZENsYXNzKCBcInVpLWZsaXBzd2l0Y2gtaW5wdXRcIiApXHJcblx0XHRcdFx0LmFmdGVyKCBmbGlwc3dpdGNoIClcclxuXHRcdFx0XHQuYXBwZW5kVG8oIGZsaXBzd2l0Y2ggKTtcclxuXHJcblx0XHQkLmV4dGVuZCggdGhpcywge1xyXG5cdFx0XHRmbGlwc3dpdGNoOiBmbGlwc3dpdGNoLFxyXG5cdFx0XHRvbjogb24sXHJcblx0XHRcdG9mZjogb2ZmLFxyXG5cdFx0XHR0eXBlOiB0eXBlXHJcblx0XHR9KTtcclxuXHR9LFxyXG5cclxuXHRfcmVzZXQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5yZWZyZXNoKCk7XHJcblx0fSxcclxuXHJcblx0cmVmcmVzaDogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgZGlyZWN0aW9uLFxyXG5cdFx0XHRleGlzdGluZ0RpcmVjdGlvbiA9IHRoaXMuZmxpcHN3aXRjaC5oYXNDbGFzcyggXCJ1aS1mbGlwc3dpdGNoLWFjdGl2ZVwiICkgPyBcIl9yaWdodFwiIDogXCJfbGVmdFwiO1xyXG5cclxuXHRcdGlmICggdGhpcy50eXBlID09PSBcIlNFTEVDVFwiICkge1xyXG5cdFx0XHRkaXJlY3Rpb24gPSAoIHRoaXMuZWxlbWVudC5nZXQoIDAgKS5zZWxlY3RlZEluZGV4ID4gMCApID8gXCJfcmlnaHRcIjogXCJfbGVmdFwiO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0ZGlyZWN0aW9uID0gdGhpcy5lbGVtZW50LnByb3AoIFwiY2hlY2tlZFwiICkgPyBcIl9yaWdodFwiOiBcIl9sZWZ0XCI7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBkaXJlY3Rpb24gIT09IGV4aXN0aW5nRGlyZWN0aW9uICkge1xyXG5cdFx0XHR0aGlzWyBkaXJlY3Rpb24gXSgpO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF90b2dnbGU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIGRpcmVjdGlvbiA9IHRoaXMuZmxpcHN3aXRjaC5oYXNDbGFzcyggXCJ1aS1mbGlwc3dpdGNoLWFjdGl2ZVwiICkgPyBcIl9sZWZ0XCIgOiBcIl9yaWdodFwiO1xyXG5cclxuXHRcdHRoaXNbIGRpcmVjdGlvbiBdKCk7XHJcblx0fSxcclxuXHJcblx0X2tleWRvd246IGZ1bmN0aW9uKCBlICkge1xyXG5cdFx0aWYgKCBlLndoaWNoID09PSAkLm1vYmlsZS5rZXlDb2RlLkxFRlQgKSB7XHJcblx0XHRcdHRoaXMuX2xlZnQoKTtcclxuXHRcdH0gZWxzZSBpZiAoIGUud2hpY2ggPT09ICQubW9iaWxlLmtleUNvZGUuUklHSFQgKSB7XHJcblx0XHRcdHRoaXMuX3JpZ2h0KCk7XHJcblx0XHR9IGVsc2UgaWYgKCBlLndoaWNoID09PSAkLm1vYmlsZS5rZXlDb2RlLlNQQUNFICkge1xyXG5cdFx0XHR0aGlzLl90b2dnbGUoKTtcclxuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9zZXRPcHRpb25zOiBmdW5jdGlvbiggb3B0aW9ucyApIHtcclxuXHRcdGlmICggb3B0aW9ucy50aGVtZSAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHR2YXIgY3VycmVudFRoZW1lID0gb3B0aW9ucy50aGVtZSA/IG9wdGlvbnMudGhlbWUgOiBcImluaGVyaXRcIixcclxuXHRcdFx0XHRuZXdUaGVtZSA9IG9wdGlvbnMudGhlbWUgPyBvcHRpb25zLnRoZW1lIDogXCJpbmhlcml0XCI7XHJcblxyXG5cdFx0XHR0aGlzLndpZGdldCgpXHJcblx0XHRcdFx0LnJlbW92ZUNsYXNzKCBcInVpLWJhci1cIiArIGN1cnJlbnRUaGVtZSApXHJcblx0XHRcdFx0LmFkZENsYXNzKCBcInVpLWJhci1cIiArIG5ld1RoZW1lICk7XHJcblx0XHR9XHJcblx0XHRpZiAoIG9wdGlvbnMub25UZXh0ICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdHRoaXMub24udGV4dCggb3B0aW9ucy5vblRleHQgKTtcclxuXHRcdH1cclxuXHRcdGlmICggb3B0aW9ucy5vZmZUZXh0ICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdHRoaXMub2ZmLnRleHQoIG9wdGlvbnMub2ZmVGV4dCApO1xyXG5cdFx0fVxyXG5cdFx0aWYgKCBvcHRpb25zLmRpc2FibGVkICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdHRoaXMud2lkZ2V0KCkudG9nZ2xlQ2xhc3MoIFwidWktc3RhdGUtZGlzYWJsZWRcIiwgb3B0aW9ucy5kaXNhYmxlZCApO1xyXG5cdFx0fVxyXG5cdFx0aWYgKCBvcHRpb25zLm1pbmkgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0dGhpcy53aWRnZXQoKS50b2dnbGVDbGFzcyggXCJ1aS1taW5pXCIsIG9wdGlvbnMubWluaSApO1xyXG5cdFx0fVxyXG5cdFx0aWYgKCBvcHRpb25zLmNvcm5lcnMgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0dGhpcy53aWRnZXQoKS50b2dnbGVDbGFzcyggXCJ1aS1jb3JuZXItYWxsXCIsIG9wdGlvbnMuY29ybmVycyApO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuX3N1cGVyKCBvcHRpb25zICk7XHJcblx0fSxcclxuXHJcblx0X2Rlc3Ryb3k6IGZ1bmN0aW9uKCkge1xyXG5cdFx0aWYgKCB0aGlzLm9wdGlvbnMuZW5oYW5jZWQgKSB7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHRcdGlmICggdGhpcy5fb3JpZ2luYWxUYWJJbmRleCAhPSBudWxsICkge1xyXG5cdFx0XHR0aGlzLmVsZW1lbnQuYXR0ciggXCJ0YWJpbmRleFwiLCB0aGlzLl9vcmlnaW5hbFRhYkluZGV4ICk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHR0aGlzLmVsZW1lbnQucmVtb3ZlQXR0ciggXCJ0YWJpbmRleFwiICk7XHJcblx0XHR9XHJcblx0XHR0aGlzLm9uLnJlbW92ZSgpO1xyXG5cdFx0dGhpcy5vZmYucmVtb3ZlKCk7XHJcblx0XHR0aGlzLmVsZW1lbnQudW53cmFwKCk7XHJcblx0XHR0aGlzLmZsaXBzd2l0Y2gucmVtb3ZlKCk7XHJcblx0XHR0aGlzLnJlbW92ZUNsYXNzKCBcInVpLWZsaXBzd2l0Y2gtaW5wdXRcIiApO1xyXG5cdH1cclxuXHJcbn0sICQubW9iaWxlLmJlaGF2aW9ycy5mb3JtUmVzZXQgKSApO1xyXG5cclxufSkoIGpRdWVyeSApO1xyXG5cclxuKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7XHJcblx0JC53aWRnZXQoIFwibW9iaWxlLnJhbmdlc2xpZGVyXCIsICQuZXh0ZW5kKCB7XHJcblxyXG5cdFx0b3B0aW9uczoge1xyXG5cdFx0XHR0aGVtZTogbnVsbCxcclxuXHRcdFx0dHJhY2tUaGVtZTogbnVsbCxcclxuXHRcdFx0Y29ybmVyczogdHJ1ZSxcclxuXHRcdFx0bWluaTogZmFsc2UsXHJcblx0XHRcdGhpZ2hsaWdodDogdHJ1ZVxyXG5cdFx0fSxcclxuXHJcblx0XHRfY3JlYXRlOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dmFyICRlbCA9IHRoaXMuZWxlbWVudCxcclxuXHRcdFx0ZWxDbGFzcyA9IHRoaXMub3B0aW9ucy5taW5pID8gXCJ1aS1yYW5nZXNsaWRlciB1aS1taW5pXCIgOiBcInVpLXJhbmdlc2xpZGVyXCIsXHJcblx0XHRcdF9pbnB1dEZpcnN0ID0gJGVsLmZpbmQoIFwiaW5wdXRcIiApLmZpcnN0KCksXHJcblx0XHRcdF9pbnB1dExhc3QgPSAkZWwuZmluZCggXCJpbnB1dFwiICkubGFzdCgpLFxyXG5cdFx0XHRfbGFiZWwgPSAkZWwuZmluZCggXCJsYWJlbFwiICkuZmlyc3QoKSxcclxuXHRcdFx0X3NsaWRlcldpZGdldEZpcnN0ID0gJC5kYXRhKCBfaW5wdXRGaXJzdC5nZXQoIDAgKSwgXCJtb2JpbGUtc2xpZGVyXCIgKSB8fFxyXG5cdFx0XHRcdCQuZGF0YSggX2lucHV0Rmlyc3Quc2xpZGVyKCkuZ2V0KCAwICksIFwibW9iaWxlLXNsaWRlclwiICksXHJcblx0XHRcdF9zbGlkZXJXaWRnZXRMYXN0ID0gJC5kYXRhKCBfaW5wdXRMYXN0LmdldCgwKSwgXCJtb2JpbGUtc2xpZGVyXCIgKSB8fFxyXG5cdFx0XHRcdCQuZGF0YSggX2lucHV0TGFzdC5zbGlkZXIoKS5nZXQoIDAgKSwgXCJtb2JpbGUtc2xpZGVyXCIgKSxcclxuXHRcdFx0X3NsaWRlckZpcnN0ID0gX3NsaWRlcldpZGdldEZpcnN0LnNsaWRlcixcclxuXHRcdFx0X3NsaWRlckxhc3QgPSBfc2xpZGVyV2lkZ2V0TGFzdC5zbGlkZXIsXHJcblx0XHRcdGZpcnN0SGFuZGxlID0gX3NsaWRlcldpZGdldEZpcnN0LmhhbmRsZSxcclxuXHRcdFx0X3NsaWRlcnMgPSAkKCBcIjxkaXYgY2xhc3M9J3VpLXJhbmdlc2xpZGVyLXNsaWRlcnMnIC8+XCIgKS5hcHBlbmRUbyggJGVsICk7XHJcblxyXG5cdFx0XHRfaW5wdXRGaXJzdC5hZGRDbGFzcyggXCJ1aS1yYW5nZXNsaWRlci1maXJzdFwiICk7XHJcblx0XHRcdF9pbnB1dExhc3QuYWRkQ2xhc3MoIFwidWktcmFuZ2VzbGlkZXItbGFzdFwiICk7XHJcblx0XHRcdCRlbC5hZGRDbGFzcyggZWxDbGFzcyApO1xyXG5cclxuXHRcdFx0X3NsaWRlckZpcnN0LmFwcGVuZFRvKCBfc2xpZGVycyApO1xyXG5cdFx0XHRfc2xpZGVyTGFzdC5hcHBlbmRUbyggX3NsaWRlcnMgKTtcclxuXHRcdFx0X2xhYmVsLmluc2VydEJlZm9yZSggJGVsICk7XHJcblx0XHRcdGZpcnN0SGFuZGxlLnByZXBlbmRUbyggX3NsaWRlckxhc3QgKTtcclxuXHJcblx0XHRcdCQuZXh0ZW5kKCB0aGlzLCB7XHJcblx0XHRcdFx0X2lucHV0Rmlyc3Q6IF9pbnB1dEZpcnN0LFxyXG5cdFx0XHRcdF9pbnB1dExhc3Q6IF9pbnB1dExhc3QsXHJcblx0XHRcdFx0X3NsaWRlckZpcnN0OiBfc2xpZGVyRmlyc3QsXHJcblx0XHRcdFx0X3NsaWRlckxhc3Q6IF9zbGlkZXJMYXN0LFxyXG5cdFx0XHRcdF9sYWJlbDogX2xhYmVsLFxyXG5cdFx0XHRcdF90YXJnZXRWYWw6IG51bGwsXHJcblx0XHRcdFx0X3NsaWRlclRhcmdldDogZmFsc2UsXHJcblx0XHRcdFx0X3NsaWRlcnM6IF9zbGlkZXJzLFxyXG5cdFx0XHRcdF9wcm94eTogZmFsc2VcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHR0aGlzLnJlZnJlc2goKTtcclxuXHRcdFx0dGhpcy5fb24oIHRoaXMuZWxlbWVudC5maW5kKCBcImlucHV0LnVpLXNsaWRlci1pbnB1dFwiICksIHtcclxuXHRcdFx0XHRcInNsaWRlYmVmb3Jlc3RhcnRcIjogXCJfc2xpZGViZWZvcmVzdGFydFwiLFxyXG5cdFx0XHRcdFwic2xpZGVzdG9wXCI6IFwiX3NsaWRlc3RvcFwiLFxyXG5cdFx0XHRcdFwic2xpZGVkcmFnXCI6IFwiX3NsaWRlZHJhZ1wiLFxyXG5cdFx0XHRcdFwic2xpZGViZWZvcmVjaGFuZ2VcIjogXCJfY2hhbmdlXCIsXHJcblx0XHRcdFx0XCJibHVyXCI6IFwiX2NoYW5nZVwiLFxyXG5cdFx0XHRcdFwia2V5dXBcIjogXCJfY2hhbmdlXCJcclxuXHRcdFx0fSk7XHJcblx0XHRcdHRoaXMuX29uKHtcclxuXHRcdFx0XHRcIm1vdXNlZG93blwiOlwiX2NoYW5nZVwiXHJcblx0XHRcdH0pO1xyXG5cdFx0XHR0aGlzLl9vbiggdGhpcy5lbGVtZW50LmNsb3Nlc3QoIFwiZm9ybVwiICksIHtcclxuXHRcdFx0XHRcInJlc2V0XCI6XCJfaGFuZGxlUmVzZXRcIlxyXG5cdFx0XHR9KTtcclxuXHRcdFx0dGhpcy5fb24oIGZpcnN0SGFuZGxlLCB7XHJcblx0XHRcdFx0XCJ2bW91c2Vkb3duXCI6IFwiX2RyYWdGaXJzdEhhbmRsZVwiXHJcblx0XHRcdH0pO1xyXG5cdFx0fSxcclxuXHRcdF9oYW5kbGVSZXNldDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHZhciBzZWxmID0gdGhpcztcclxuXHRcdFx0Ly93ZSBtdXN0IHdhaXQgZm9yIHRoZSBzdGFjayB0byB1bndpbmQgYmVmb3JlIHVwZGF0ZWluZyBvdGhlciB3aXNlIHNsaWRlcnMgd2lsbCBub3QgaGF2ZSB1cGRhdGVkIHlldFxyXG5cdFx0XHRzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRzZWxmLl91cGRhdGVIaWdobGlnaHQoKTtcclxuXHRcdFx0fSwwKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0X2RyYWdGaXJzdEhhbmRsZTogZnVuY3Rpb24oIGV2ZW50ICkge1xyXG5cdFx0XHQvL2lmIHRoZSBmaXJzdCBoYW5kbGUgaXMgZHJhZ2dlZCBzZW5kIHRoZSBldmVudCB0byB0aGUgZmlyc3Qgc2xpZGVyXHJcblx0XHRcdCQuZGF0YSggdGhpcy5faW5wdXRGaXJzdC5nZXQoMCksIFwibW9iaWxlLXNsaWRlclwiICkuZHJhZ2dpbmcgPSB0cnVlO1xyXG5cdFx0XHQkLmRhdGEoIHRoaXMuX2lucHV0Rmlyc3QuZ2V0KDApLCBcIm1vYmlsZS1zbGlkZXJcIiApLnJlZnJlc2goIGV2ZW50ICk7XHJcblx0XHRcdCQuZGF0YSggdGhpcy5faW5wdXRGaXJzdC5nZXQoMCksIFwibW9iaWxlLXNsaWRlclwiICkuX3RyaWdnZXIoIFwic3RhcnRcIiApO1xyXG5cdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHR9LFxyXG5cclxuXHRcdF9zbGlkZWRyYWc6IGZ1bmN0aW9uKCBldmVudCApIHtcclxuXHRcdFx0dmFyIGZpcnN0ID0gJCggZXZlbnQudGFyZ2V0ICkuaXMoIHRoaXMuX2lucHV0Rmlyc3QgKSxcclxuXHRcdFx0XHRvdGhlclNsaWRlciA9ICggZmlyc3QgKSA/IHRoaXMuX2lucHV0TGFzdCA6IHRoaXMuX2lucHV0Rmlyc3Q7XHJcblxyXG5cdFx0XHR0aGlzLl9zbGlkZXJUYXJnZXQgPSBmYWxzZTtcclxuXHRcdFx0Ly9pZiB0aGUgZHJhZyB3YXMgaW5pdGlhdGVkIG9uIGFuIGV4dHJlbWUgYW5kIHRoZSBvdGhlciBoYW5kbGUgaXMgZm9jdXNlZCBzZW5kIHRoZSBldmVudHMgdG9cclxuXHRcdFx0Ly90aGUgY2xvc2VzdCBoYW5kbGVcclxuXHRcdFx0aWYgKCAoIHRoaXMuX3Byb3h5ID09PSBcImZpcnN0XCIgJiYgZmlyc3QgKSB8fCAoIHRoaXMuX3Byb3h5ID09PSBcImxhc3RcIiAmJiAhZmlyc3QgKSApIHtcclxuXHRcdFx0XHQkLmRhdGEoIG90aGVyU2xpZGVyLmdldCgwKSwgXCJtb2JpbGUtc2xpZGVyXCIgKS5kcmFnZ2luZyA9IHRydWU7XHJcblx0XHRcdFx0JC5kYXRhKCBvdGhlclNsaWRlci5nZXQoMCksIFwibW9iaWxlLXNsaWRlclwiICkucmVmcmVzaCggZXZlbnQgKTtcclxuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblxyXG5cdFx0X3NsaWRlc3RvcDogZnVuY3Rpb24oIGV2ZW50ICkge1xyXG5cdFx0XHR2YXIgZmlyc3QgPSAkKCBldmVudC50YXJnZXQgKS5pcyggdGhpcy5faW5wdXRGaXJzdCApO1xyXG5cclxuXHRcdFx0dGhpcy5fcHJveHkgPSBmYWxzZTtcclxuXHRcdFx0Ly90aGlzIHN0b3BzIGRyYWdnaW5nIG9mIHRoZSBoYW5kbGUgYW5kIGJyaW5ncyB0aGUgYWN0aXZlIHRyYWNrIHRvIHRoZSBmcm9udFxyXG5cdFx0XHQvL3RoaXMgbWFrZXMgY2xpY2tzIG9uIHRoZSB0cmFjayBnbyB0aGUgdGhlIGxhc3QgaGFuZGxlIHVzZWRcclxuXHRcdFx0dGhpcy5lbGVtZW50LmZpbmQoIFwiaW5wdXRcIiApLnRyaWdnZXIoIFwidm1vdXNldXBcIiApO1xyXG5cdFx0XHR0aGlzLl9zbGlkZXJGaXJzdC5jc3MoIFwiei1pbmRleFwiLCBmaXJzdCA/IDEgOiBcIlwiICk7XHJcblx0XHR9LFxyXG5cclxuXHRcdF9zbGlkZWJlZm9yZXN0YXJ0OiBmdW5jdGlvbiggZXZlbnQgKSB7XHJcblx0XHRcdHRoaXMuX3NsaWRlclRhcmdldCA9IGZhbHNlO1xyXG5cdFx0XHQvL2lmIHRoZSB0cmFjayBpcyB0aGUgdGFyZ2V0IHJlbWVtYmVyIHRoaXMgYW5kIHRoZSBvcmlnaW5hbCB2YWx1ZVxyXG5cdFx0XHRpZiAoICQoIGV2ZW50Lm9yaWdpbmFsRXZlbnQudGFyZ2V0ICkuaGFzQ2xhc3MoIFwidWktc2xpZGVyLXRyYWNrXCIgKSApIHtcclxuXHRcdFx0XHR0aGlzLl9zbGlkZXJUYXJnZXQgPSB0cnVlO1xyXG5cdFx0XHRcdHRoaXMuX3RhcmdldFZhbCA9ICQoIGV2ZW50LnRhcmdldCApLnZhbCgpO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cclxuXHRcdF9zZXRPcHRpb25zOiBmdW5jdGlvbiggb3B0aW9ucyApIHtcclxuXHRcdFx0aWYgKCBvcHRpb25zLnRoZW1lICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdFx0dGhpcy5fc2V0VGhlbWUoIG9wdGlvbnMudGhlbWUgKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aWYgKCBvcHRpb25zLnRyYWNrVGhlbWUgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0XHR0aGlzLl9zZXRUcmFja1RoZW1lKCBvcHRpb25zLnRyYWNrVGhlbWUgKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aWYgKCBvcHRpb25zLm1pbmkgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0XHR0aGlzLl9zZXRNaW5pKCBvcHRpb25zLm1pbmkgKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aWYgKCBvcHRpb25zLmhpZ2hsaWdodCAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRcdHRoaXMuX3NldEhpZ2hsaWdodCggb3B0aW9ucy5oaWdobGlnaHQgKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aWYgKCBvcHRpb25zLmRpc2FibGVkICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdFx0dGhpcy5fc2V0RGlzYWJsZWQoIG9wdGlvbnMuZGlzYWJsZWQgKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0dGhpcy5fc3VwZXIoIG9wdGlvbnMgKTtcclxuXHRcdFx0dGhpcy5yZWZyZXNoKCk7XHJcblx0XHR9LFxyXG5cclxuXHRcdHJlZnJlc2g6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR2YXIgJGVsID0gdGhpcy5lbGVtZW50LFxyXG5cdFx0XHRcdG8gPSB0aGlzLm9wdGlvbnM7XHJcblxyXG5cdFx0XHRpZiAoIHRoaXMuX2lucHV0Rmlyc3QuaXMoIFwiOmRpc2FibGVkXCIgKSB8fCB0aGlzLl9pbnB1dExhc3QuaXMoIFwiOmRpc2FibGVkXCIgKSApIHtcclxuXHRcdFx0XHR0aGlzLm9wdGlvbnMuZGlzYWJsZWQgPSB0cnVlO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQkZWwuZmluZCggXCJpbnB1dFwiICkuc2xpZGVyKHtcclxuXHRcdFx0XHR0aGVtZTogby50aGVtZSxcclxuXHRcdFx0XHR0cmFja1RoZW1lOiBvLnRyYWNrVGhlbWUsXHJcblx0XHRcdFx0ZGlzYWJsZWQ6IG8uZGlzYWJsZWQsXHJcblx0XHRcdFx0Y29ybmVyczogby5jb3JuZXJzLFxyXG5cdFx0XHRcdG1pbmk6IG8ubWluaSxcclxuXHRcdFx0XHRoaWdobGlnaHQ6IG8uaGlnaGxpZ2h0XHJcblx0XHRcdH0pLnNsaWRlciggXCJyZWZyZXNoXCIgKTtcclxuXHRcdFx0dGhpcy5fdXBkYXRlSGlnaGxpZ2h0KCk7XHJcblx0XHR9LFxyXG5cclxuXHRcdF9jaGFuZ2U6IGZ1bmN0aW9uKCBldmVudCApIHtcclxuXHRcdFx0aWYgKCBldmVudC50eXBlID09PSBcImtleXVwXCIgKSB7XHJcblx0XHRcdFx0dGhpcy5fdXBkYXRlSGlnaGxpZ2h0KCk7XHJcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHR2YXIgc2VsZiA9IHRoaXMsXHJcblx0XHRcdFx0bWluID0gcGFyc2VGbG9hdCggdGhpcy5faW5wdXRGaXJzdC52YWwoKSwgMTAgKSxcclxuXHRcdFx0XHRtYXggPSBwYXJzZUZsb2F0KCB0aGlzLl9pbnB1dExhc3QudmFsKCksIDEwICksXHJcblx0XHRcdFx0Zmlyc3QgPSAkKCBldmVudC50YXJnZXQgKS5oYXNDbGFzcyggXCJ1aS1yYW5nZXNsaWRlci1maXJzdFwiICksXHJcblx0XHRcdFx0dGhpc1NsaWRlciA9IGZpcnN0ID8gdGhpcy5faW5wdXRGaXJzdCA6IHRoaXMuX2lucHV0TGFzdCxcclxuXHRcdFx0XHRvdGhlclNsaWRlciA9IGZpcnN0ID8gdGhpcy5faW5wdXRMYXN0IDogdGhpcy5faW5wdXRGaXJzdDtcclxuXHJcblx0XHRcdGlmICggKCB0aGlzLl9pbnB1dEZpcnN0LnZhbCgpID4gdGhpcy5faW5wdXRMYXN0LnZhbCgpICYmIGV2ZW50LnR5cGUgPT09IFwibW91c2Vkb3duXCIgJiYgISQoZXZlbnQudGFyZ2V0KS5oYXNDbGFzcyhcInVpLXNsaWRlci1oYW5kbGVcIikpICkge1xyXG5cdFx0XHRcdHRoaXNTbGlkZXIuYmx1cigpO1xyXG5cdFx0XHR9IGVsc2UgaWYgKCBldmVudC50eXBlID09PSBcIm1vdXNlZG93blwiICkge1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAoIG1pbiA+IG1heCAmJiAhdGhpcy5fc2xpZGVyVGFyZ2V0ICkge1xyXG5cdFx0XHRcdC8vdGhpcyBwcmV2ZW50cyBtaW4gZnJvbSBiZWluZyBncmVhdGVyIHRoZW4gbWF4XHJcblx0XHRcdFx0dGhpc1NsaWRlci52YWwoIGZpcnN0ID8gbWF4OiBtaW4gKS5zbGlkZXIoIFwicmVmcmVzaFwiICk7XHJcblx0XHRcdFx0dGhpcy5fdHJpZ2dlciggXCJub3JtYWxpemVcIiApO1xyXG5cdFx0XHR9IGVsc2UgaWYgKCBtaW4gPiBtYXggKSB7XHJcblx0XHRcdFx0Ly90aGlzIG1ha2VzIGl0IHNvIGNsaWNrcyBvbiB0aGUgdGFyZ2V0IG9uIGVpdGhlciBleHRyZW1lIGdvIHRvIHRoZSBjbG9zZXN0IGhhbmRsZVxyXG5cdFx0XHRcdHRoaXNTbGlkZXIudmFsKCB0aGlzLl90YXJnZXRWYWwgKS5zbGlkZXIoIFwicmVmcmVzaFwiICk7XHJcblxyXG5cdFx0XHRcdC8vWW91IG11c3Qgd2FpdCBmb3IgdGhlIHN0YWNrIHRvIHVud2luZCBzbyBmaXJzdCBzbGlkZXIgaXMgdXBkYXRlZCBiZWZvcmUgdXBkYXRpbmcgc2Vjb25kXHJcblx0XHRcdFx0c2V0VGltZW91dCggZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHRvdGhlclNsaWRlci52YWwoIGZpcnN0ID8gbWluOiBtYXggKS5zbGlkZXIoIFwicmVmcmVzaFwiICk7XHJcblx0XHRcdFx0XHQkLmRhdGEoIG90aGVyU2xpZGVyLmdldCgwKSwgXCJtb2JpbGUtc2xpZGVyXCIgKS5oYW5kbGUuZm9jdXMoKTtcclxuXHRcdFx0XHRcdHNlbGYuX3NsaWRlckZpcnN0LmNzcyggXCJ6LWluZGV4XCIsIGZpcnN0ID8gXCJcIiA6IDEgKTtcclxuXHRcdFx0XHRcdHNlbGYuX3RyaWdnZXIoIFwibm9ybWFsaXplXCIgKTtcclxuXHRcdFx0XHR9LCAwICk7XHJcblx0XHRcdFx0dGhpcy5fcHJveHkgPSAoIGZpcnN0ICkgPyBcImZpcnN0XCIgOiBcImxhc3RcIjtcclxuXHRcdFx0fVxyXG5cdFx0XHQvL2ZpeGVzIGlzc3VlIHdoZXJlIHdoZW4gYm90aCBfc2xpZGVycyBhcmUgYXQgbWluIHRoZXkgY2Fubm90IGJlIGFkanVzdGVkXHJcblx0XHRcdGlmICggbWluID09PSBtYXggKSB7XHJcblx0XHRcdFx0JC5kYXRhKCB0aGlzU2xpZGVyLmdldCgwKSwgXCJtb2JpbGUtc2xpZGVyXCIgKS5oYW5kbGUuY3NzKCBcInotaW5kZXhcIiwgMSApO1xyXG5cdFx0XHRcdCQuZGF0YSggb3RoZXJTbGlkZXIuZ2V0KDApLCBcIm1vYmlsZS1zbGlkZXJcIiApLmhhbmRsZS5jc3MoIFwiei1pbmRleFwiLCAwICk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0JC5kYXRhKCBvdGhlclNsaWRlci5nZXQoMCksIFwibW9iaWxlLXNsaWRlclwiICkuaGFuZGxlLmNzcyggXCJ6LWluZGV4XCIsIFwiXCIgKTtcclxuXHRcdFx0XHQkLmRhdGEoIHRoaXNTbGlkZXIuZ2V0KDApLCBcIm1vYmlsZS1zbGlkZXJcIiApLmhhbmRsZS5jc3MoIFwiei1pbmRleFwiLCBcIlwiICk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHRoaXMuX3VwZGF0ZUhpZ2hsaWdodCgpO1xyXG5cclxuXHRcdFx0aWYgKCBtaW4gPj0gbWF4ICkge1xyXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHJcblx0XHRfdXBkYXRlSGlnaGxpZ2h0OiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dmFyIG1pbiA9IHBhcnNlSW50KCAkLmRhdGEoIHRoaXMuX2lucHV0Rmlyc3QuZ2V0KDApLCBcIm1vYmlsZS1zbGlkZXJcIiApLmhhbmRsZS5nZXQoMCkuc3R5bGUubGVmdCwgMTAgKSxcclxuXHRcdFx0XHRtYXggPSBwYXJzZUludCggJC5kYXRhKCB0aGlzLl9pbnB1dExhc3QuZ2V0KDApLCBcIm1vYmlsZS1zbGlkZXJcIiApLmhhbmRsZS5nZXQoMCkuc3R5bGUubGVmdCwgMTAgKSxcclxuXHRcdFx0XHR3aWR0aCA9IChtYXggLSBtaW4pO1xyXG5cclxuXHRcdFx0dGhpcy5lbGVtZW50LmZpbmQoIFwiLnVpLXNsaWRlci1iZ1wiICkuY3NzKHtcclxuXHRcdFx0XHRcIm1hcmdpbi1sZWZ0XCI6IG1pbiArIFwiJVwiLFxyXG5cdFx0XHRcdFwid2lkdGhcIjogd2lkdGggKyBcIiVcIlxyXG5cdFx0XHR9KTtcclxuXHRcdH0sXHJcblxyXG5cdFx0X3NldFRoZW1lOiBmdW5jdGlvbiggdmFsdWUgKSB7XHJcblx0XHRcdHRoaXMuX2lucHV0Rmlyc3Quc2xpZGVyKCBcIm9wdGlvblwiLCBcInRoZW1lXCIsIHZhbHVlICk7XHJcblx0XHRcdHRoaXMuX2lucHV0TGFzdC5zbGlkZXIoIFwib3B0aW9uXCIsIFwidGhlbWVcIiwgdmFsdWUgKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0X3NldFRyYWNrVGhlbWU6IGZ1bmN0aW9uKCB2YWx1ZSApIHtcclxuXHRcdFx0dGhpcy5faW5wdXRGaXJzdC5zbGlkZXIoIFwib3B0aW9uXCIsIFwidHJhY2tUaGVtZVwiLCB2YWx1ZSApO1xyXG5cdFx0XHR0aGlzLl9pbnB1dExhc3Quc2xpZGVyKCBcIm9wdGlvblwiLCBcInRyYWNrVGhlbWVcIiwgdmFsdWUgKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0X3NldE1pbmk6IGZ1bmN0aW9uKCB2YWx1ZSApIHtcclxuXHRcdFx0dGhpcy5faW5wdXRGaXJzdC5zbGlkZXIoIFwib3B0aW9uXCIsIFwibWluaVwiLCB2YWx1ZSApO1xyXG5cdFx0XHR0aGlzLl9pbnB1dExhc3Quc2xpZGVyKCBcIm9wdGlvblwiLCBcIm1pbmlcIiwgdmFsdWUgKTtcclxuXHRcdFx0dGhpcy5lbGVtZW50LnRvZ2dsZUNsYXNzKCBcInVpLW1pbmlcIiwgISF2YWx1ZSApO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfc2V0SGlnaGxpZ2h0OiBmdW5jdGlvbiggdmFsdWUgKSB7XHJcblx0XHRcdHRoaXMuX2lucHV0Rmlyc3Quc2xpZGVyKCBcIm9wdGlvblwiLCBcImhpZ2hsaWdodFwiLCB2YWx1ZSApO1xyXG5cdFx0XHR0aGlzLl9pbnB1dExhc3Quc2xpZGVyKCBcIm9wdGlvblwiLCBcImhpZ2hsaWdodFwiLCB2YWx1ZSApO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfc2V0RGlzYWJsZWQ6IGZ1bmN0aW9uKCB2YWx1ZSApIHtcclxuXHRcdFx0dGhpcy5faW5wdXRGaXJzdC5wcm9wKCBcImRpc2FibGVkXCIsIHZhbHVlICk7XHJcblx0XHRcdHRoaXMuX2lucHV0TGFzdC5wcm9wKCBcImRpc2FibGVkXCIsIHZhbHVlICk7XHJcblx0XHR9LFxyXG5cclxuXHRcdF9kZXN0cm95OiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dGhpcy5fbGFiZWwucHJlcGVuZFRvKCB0aGlzLmVsZW1lbnQgKTtcclxuXHRcdFx0dGhpcy5lbGVtZW50LnJlbW92ZUNsYXNzKCBcInVpLXJhbmdlc2xpZGVyIHVpLW1pbmlcIiApO1xyXG5cdFx0XHR0aGlzLl9pbnB1dEZpcnN0LmFmdGVyKCB0aGlzLl9zbGlkZXJGaXJzdCApO1xyXG5cdFx0XHR0aGlzLl9pbnB1dExhc3QuYWZ0ZXIoIHRoaXMuX3NsaWRlckxhc3QgKTtcclxuXHRcdFx0dGhpcy5fc2xpZGVycy5yZW1vdmUoKTtcclxuXHRcdFx0dGhpcy5lbGVtZW50LmZpbmQoIFwiaW5wdXRcIiApLnJlbW92ZUNsYXNzKCBcInVpLXJhbmdlc2xpZGVyLWZpcnN0IHVpLXJhbmdlc2xpZGVyLWxhc3RcIiApLnNsaWRlciggXCJkZXN0cm95XCIgKTtcclxuXHRcdH1cclxuXHJcblx0fSwgJC5tb2JpbGUuYmVoYXZpb3JzLmZvcm1SZXNldCApICk7XHJcblxyXG59KSggalF1ZXJ5ICk7XHJcblxyXG4oZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcclxuXHJcblx0JC53aWRnZXQoIFwibW9iaWxlLnRleHRpbnB1dFwiLCAkLm1vYmlsZS50ZXh0aW5wdXQsIHtcclxuXHRcdG9wdGlvbnM6IHtcclxuXHRcdFx0Y2xlYXJCdG46IGZhbHNlLFxyXG5cdFx0XHRjbGVhckJ0blRleHQ6IFwiQ2xlYXIgdGV4dFwiXHJcblx0XHR9LFxyXG5cclxuXHRcdF9jcmVhdGU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR0aGlzLl9zdXBlcigpO1xyXG5cclxuXHRcdFx0aWYgKCB0aGlzLmlzU2VhcmNoICkge1xyXG5cdFx0XHRcdHRoaXMub3B0aW9ucy5jbGVhckJ0biA9IHRydWU7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmICggISF0aGlzLm9wdGlvbnMuY2xlYXJCdG4gJiYgdGhpcy5pbnB1dE5lZWRzV3JhcCApIHtcclxuXHRcdFx0XHR0aGlzLl9hZGRDbGVhckJ0bigpO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cclxuXHRcdGNsZWFyQnV0dG9uOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0cmV0dXJuICQoIFwiPGEgaHJlZj0nIycgdGFiaW5kZXg9Jy0xJyBhcmlhLWhpZGRlbj0ndHJ1ZScgXCIgK1xyXG5cdFx0XHRcdFwiY2xhc3M9J3VpLWlucHV0LWNsZWFyIHVpLWJ0biB1aS1pY29uLWRlbGV0ZSB1aS1idG4taWNvbi1ub3RleHQgdWktY29ybmVyLWFsbCc+XCIgK1xyXG5cdFx0XHRcdFwiPC9hPlwiIClcclxuXHRcdFx0XHRcdC5hdHRyKCBcInRpdGxlXCIsIHRoaXMub3B0aW9ucy5jbGVhckJ0blRleHQgKVxyXG5cdFx0XHRcdFx0LnRleHQoIHRoaXMub3B0aW9ucy5jbGVhckJ0blRleHQgKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0X2NsZWFyQnRuQ2xpY2s6IGZ1bmN0aW9uKCBldmVudCApIHtcclxuXHRcdFx0dGhpcy5lbGVtZW50LnZhbCggXCJcIiApXHJcblx0XHRcdFx0XHQuZm9jdXMoKVxyXG5cdFx0XHRcdFx0LnRyaWdnZXIoIFwiY2hhbmdlXCIgKTtcclxuXHJcblx0XHRcdHRoaXMuX2NsZWFyQnRuLmFkZENsYXNzKCBcInVpLWlucHV0LWNsZWFyLWhpZGRlblwiICk7XHJcblx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHR9LFxyXG5cclxuXHRcdF9hZGRDbGVhckJ0bjogZnVuY3Rpb24oKSB7XHJcblxyXG5cdFx0XHRpZiAoICF0aGlzLm9wdGlvbnMuZW5oYW5jZWQgKSB7XHJcblx0XHRcdFx0dGhpcy5fZW5oYW5jZUNsZWFyKCk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdCQuZXh0ZW5kKCB0aGlzLCB7XHJcblx0XHRcdFx0X2NsZWFyQnRuOiB0aGlzLndpZGdldCgpLmZpbmQoXCJhLnVpLWlucHV0LWNsZWFyXCIpXHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0dGhpcy5fYmluZENsZWFyRXZlbnRzKCk7XHJcblxyXG5cdFx0XHR0aGlzLl90b2dnbGVDbGVhcigpO1xyXG5cclxuXHRcdH0sXHJcblxyXG5cdFx0X2VuaGFuY2VDbGVhcjogZnVuY3Rpb24oKSB7XHJcblxyXG5cdFx0XHR0aGlzLmNsZWFyQnV0dG9uKCkuYXBwZW5kVG8oIHRoaXMud2lkZ2V0KCkgKTtcclxuXHRcdFx0dGhpcy53aWRnZXQoKS5hZGRDbGFzcyggXCJ1aS1pbnB1dC1oYXMtY2xlYXJcIiApO1xyXG5cclxuXHRcdH0sXHJcblxyXG5cdFx0X2JpbmRDbGVhckV2ZW50czogZnVuY3Rpb24oKSB7XHJcblxyXG5cdFx0XHR0aGlzLl9vbiggdGhpcy5fY2xlYXJCdG4sIHtcclxuXHRcdFx0XHRcImNsaWNrXCI6IFwiX2NsZWFyQnRuQ2xpY2tcIlxyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdHRoaXMuX29uKHtcclxuXHRcdFx0XHRcImtleXVwXCI6IFwiX3RvZ2dsZUNsZWFyXCIsXHJcblx0XHRcdFx0XCJjaGFuZ2VcIjogXCJfdG9nZ2xlQ2xlYXJcIixcclxuXHRcdFx0XHRcImlucHV0XCI6IFwiX3RvZ2dsZUNsZWFyXCIsXHJcblx0XHRcdFx0XCJmb2N1c1wiOiBcIl90b2dnbGVDbGVhclwiLFxyXG5cdFx0XHRcdFwiYmx1clwiOiBcIl90b2dnbGVDbGVhclwiLFxyXG5cdFx0XHRcdFwiY3V0XCI6IFwiX3RvZ2dsZUNsZWFyXCIsXHJcblx0XHRcdFx0XCJwYXN0ZVwiOiBcIl90b2dnbGVDbGVhclwiXHJcblxyXG5cdFx0XHR9KTtcclxuXHJcblx0XHR9LFxyXG5cclxuXHRcdF91bmJpbmRDbGVhcjogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHRoaXMuX29mZiggdGhpcy5fY2xlYXJCdG4sIFwiY2xpY2tcIik7XHJcblx0XHRcdHRoaXMuX29mZiggdGhpcy5lbGVtZW50LCBcImtleXVwIGNoYW5nZSBpbnB1dCBmb2N1cyBibHVyIGN1dCBwYXN0ZVwiICk7XHJcblx0XHR9LFxyXG5cclxuXHRcdF9zZXRPcHRpb25zOiBmdW5jdGlvbiggb3B0aW9ucyApIHtcclxuXHRcdFx0dGhpcy5fc3VwZXIoIG9wdGlvbnMgKTtcclxuXHJcblx0XHRcdGlmICggb3B0aW9ucy5jbGVhckJ0biAhPT0gdW5kZWZpbmVkICYmXHJcblx0XHRcdFx0IXRoaXMuZWxlbWVudC5pcyggXCJ0ZXh0YXJlYSwgOmpxbURhdGEodHlwZT0ncmFuZ2UnKVwiICkgKSB7XHJcblx0XHRcdFx0aWYgKCBvcHRpb25zLmNsZWFyQnRuICkge1xyXG5cdFx0XHRcdFx0dGhpcy5fYWRkQ2xlYXJCdG4oKTtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0dGhpcy5fZGVzdHJveUNsZWFyKCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpZiAoIG9wdGlvbnMuY2xlYXJCdG5UZXh0ICE9PSB1bmRlZmluZWQgJiYgdGhpcy5fY2xlYXJCdG4gIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0XHR0aGlzLl9jbGVhckJ0bi50ZXh0KCBvcHRpb25zLmNsZWFyQnRuVGV4dCApXHJcblx0XHRcdFx0XHQuYXR0cihcInRpdGxlXCIsIG9wdGlvbnMuY2xlYXJCdG5UZXh0KTtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHJcblx0XHRfdG9nZ2xlQ2xlYXI6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR0aGlzLl9kZWxheSggXCJfdG9nZ2xlQ2xlYXJDbGFzc1wiLCAwICk7XHJcblx0XHR9LFxyXG5cclxuXHRcdF90b2dnbGVDbGVhckNsYXNzOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dGhpcy5fY2xlYXJCdG4udG9nZ2xlQ2xhc3MoIFwidWktaW5wdXQtY2xlYXItaGlkZGVuXCIsICF0aGlzLmVsZW1lbnQudmFsKCkgKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0X2Rlc3Ryb3lDbGVhcjogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHRoaXMud2lkZ2V0KCkucmVtb3ZlQ2xhc3MoIFwidWktaW5wdXQtaGFzLWNsZWFyXCIgKTtcclxuXHRcdFx0dGhpcy5fdW5iaW5kQ2xlYXIoKTtcclxuXHRcdFx0dGhpcy5fY2xlYXJCdG4ucmVtb3ZlKCk7XHJcblx0XHR9LFxyXG5cclxuXHRcdF9kZXN0cm95OiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dGhpcy5fc3VwZXIoKTtcclxuXHRcdFx0aWYgKCB0aGlzLm9wdGlvbnMuY2xlYXJCdG4gKSB7XHJcblx0XHRcdFx0dGhpcy5fZGVzdHJveUNsZWFyKCk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0fSk7XHJcblxyXG59KSggalF1ZXJ5ICk7XHJcblxyXG4oZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcclxuXHJcblx0JC53aWRnZXQoIFwibW9iaWxlLnRleHRpbnB1dFwiLCAkLm1vYmlsZS50ZXh0aW5wdXQsIHtcclxuXHRcdG9wdGlvbnM6IHtcclxuXHRcdFx0YXV0b2dyb3c6dHJ1ZSxcclxuXHRcdFx0a2V5dXBUaW1lb3V0QnVmZmVyOiAxMDBcclxuXHRcdH0sXHJcblxyXG5cdFx0X2NyZWF0ZTogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHRoaXMuX3N1cGVyKCk7XHJcblxyXG5cdFx0XHRpZiAoIHRoaXMub3B0aW9ucy5hdXRvZ3JvdyAmJiB0aGlzLmlzVGV4dGFyZWEgKSB7XHJcblx0XHRcdFx0dGhpcy5fYXV0b2dyb3coKTtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHJcblx0XHRfYXV0b2dyb3c6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR0aGlzLmVsZW1lbnQuYWRkQ2xhc3MoIFwidWktdGV4dGlucHV0LWF1dG9ncm93XCIgKTtcclxuXHJcblx0XHRcdHRoaXMuX29uKHtcclxuXHRcdFx0XHRcImtleXVwXCI6IFwiX3RpbWVvdXRcIixcclxuXHRcdFx0XHRcImNoYW5nZVwiOiBcIl90aW1lb3V0XCIsXHJcblx0XHRcdFx0XCJpbnB1dFwiOiBcIl90aW1lb3V0XCIsXHJcblx0XHRcdFx0XCJwYXN0ZVwiOiBcIl90aW1lb3V0XCJcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHQvLyBBdHRhY2ggdG8gdGhlIHZhcmlvdXMgeW91LWhhdmUtYmVjb21lLXZpc2libGUgbm90aWZpY2F0aW9ucyB0aGF0IHRoZVxyXG5cdFx0XHQvLyB2YXJpb3VzIGZyYW1ld29yayBlbGVtZW50cyBlbWl0LlxyXG5cdFx0XHQvLyBUT0RPOiBSZW1vdmUgYWxsIGJ1dCB0aGUgdXBkYXRlbGF5b3V0IGhhbmRsZXIgb25jZSAjNjQyNiBpcyBmaXhlZC5cclxuXHRcdFx0dGhpcy5fb24oIHRydWUsIHRoaXMuZG9jdW1lbnQsIHtcclxuXHJcblx0XHRcdFx0Ly8gVE9ETzogTW92ZSB0byBub24tZGVwcmVjYXRlZCBldmVudFxyXG5cdFx0XHRcdFwicGFnZXNob3dcIjogXCJfaGFuZGxlU2hvd1wiLFxyXG5cdFx0XHRcdFwicG9wdXBiZWZvcmVwb3NpdGlvblwiOiBcIl9oYW5kbGVTaG93XCIsXHJcblx0XHRcdFx0XCJ1cGRhdGVsYXlvdXRcIjogXCJfaGFuZGxlU2hvd1wiLFxyXG5cdFx0XHRcdFwicGFuZWxvcGVuXCI6IFwiX2hhbmRsZVNob3dcIlxyXG5cdFx0XHR9KTtcclxuXHRcdH0sXHJcblxyXG5cdFx0Ly8gU3luY2hyb25vdXNseSBmaXggdGhlIHdpZGdldCBoZWlnaHQgaWYgdGhpcyB3aWRnZXQncyBwYXJlbnRzIGFyZSBzdWNoXHJcblx0XHQvLyB0aGF0IHRoZXkgc2hvdy9oaWRlIGNvbnRlbnQgYXQgcnVudGltZS4gV2Ugc3RpbGwgbmVlZCB0byBjaGVjayB3aGV0aGVyXHJcblx0XHQvLyB0aGUgd2lkZ2V0IGlzIGFjdHVhbGx5IHZpc2libGUgaW4gY2FzZSBpdCBpcyBjb250YWluZWQgaW5zaWRlIG11bHRpcGxlXHJcblx0XHQvLyBzdWNoIGNvbnRhaW5lcnMuIEZvciBleGFtcGxlOiBwYW5lbCBjb250YWlucyBjb2xsYXBzaWJsZSBjb250YWluc1xyXG5cdFx0Ly8gYXV0b2dyb3cgdGV4dGlucHV0LiBUaGUgcGFuZWwgbWF5IGVtaXQgXCJwYW5lbG9wZW5cIiBpbmRpY2F0aW5nIHRoYXQgaXRzXHJcblx0XHQvLyBjb250ZW50IGhhcyBiZWNvbWUgdmlzaWJsZSwgYnV0IHRoZSBjb2xsYXBzaWJsZSBpcyBzdGlsbCBjb2xsYXBzZWQsIHNvXHJcblx0XHQvLyB0aGUgYXV0b2dyb3cgdGV4dGFyZWEgaXMgc3RpbGwgbm90IHZpc2libGUuXHJcblx0XHRfaGFuZGxlU2hvdzogZnVuY3Rpb24oIGV2ZW50ICkge1xyXG5cdFx0XHRpZiAoICQuY29udGFpbnMoIGV2ZW50LnRhcmdldCwgdGhpcy5lbGVtZW50WyAwIF0gKSAmJlxyXG5cdFx0XHRcdHRoaXMuZWxlbWVudC5pcyggXCI6dmlzaWJsZVwiICkgKSB7XHJcblxyXG5cdFx0XHRcdGlmICggZXZlbnQudHlwZSAhPT0gXCJwb3B1cGJlZm9yZXBvc2l0aW9uXCIgKSB7XHJcblx0XHRcdFx0XHR0aGlzLmVsZW1lbnRcclxuXHRcdFx0XHRcdFx0LmFkZENsYXNzKCBcInVpLXRleHRpbnB1dC1hdXRvZ3Jvdy1yZXNpemVcIiApXHJcblx0XHRcdFx0XHRcdC5hbmltYXRpb25Db21wbGV0ZShcclxuXHRcdFx0XHRcdFx0XHQkLnByb3h5KCBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdFx0XHRcdHRoaXMuZWxlbWVudC5yZW1vdmVDbGFzcyggXCJ1aS10ZXh0aW5wdXQtYXV0b2dyb3ctcmVzaXplXCIgKTtcclxuXHRcdFx0XHRcdFx0XHR9LCB0aGlzICksXHJcblx0XHRcdFx0XHRcdFwidHJhbnNpdGlvblwiICk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdHRoaXMuX3ByZXBhcmVIZWlnaHRVcGRhdGUoKTtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHJcblx0XHRfdW5iaW5kQXV0b2dyb3c6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR0aGlzLmVsZW1lbnQucmVtb3ZlQ2xhc3MoIFwidWktdGV4dGlucHV0LWF1dG9ncm93XCIgKTtcclxuXHRcdFx0dGhpcy5fb2ZmKCB0aGlzLmVsZW1lbnQsIFwia2V5dXAgY2hhbmdlIGlucHV0IHBhc3RlXCIgKTtcclxuXHRcdFx0dGhpcy5fb2ZmKCB0aGlzLmRvY3VtZW50LFxyXG5cdFx0XHRcdFwicGFnZXNob3cgcG9wdXBiZWZvcmVwb3NpdGlvbiB1cGRhdGVsYXlvdXQgcGFuZWxvcGVuXCIgKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0a2V5dXBUaW1lb3V0OiBudWxsLFxyXG5cclxuXHRcdF9wcmVwYXJlSGVpZ2h0VXBkYXRlOiBmdW5jdGlvbiggZGVsYXkgKSB7XHJcblx0XHRcdGlmICggdGhpcy5rZXl1cFRpbWVvdXQgKSB7XHJcblx0XHRcdFx0Y2xlYXJUaW1lb3V0KCB0aGlzLmtleXVwVGltZW91dCApO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmICggZGVsYXkgPT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0XHR0aGlzLl91cGRhdGVIZWlnaHQoKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHR0aGlzLmtleXVwVGltZW91dCA9IHRoaXMuX2RlbGF5KCBcIl91cGRhdGVIZWlnaHRcIiwgZGVsYXkgKTtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHJcblx0XHRfdGltZW91dDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHRoaXMuX3ByZXBhcmVIZWlnaHRVcGRhdGUoIHRoaXMub3B0aW9ucy5rZXl1cFRpbWVvdXRCdWZmZXIgKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0X3VwZGF0ZUhlaWdodDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHZhciBwYWRkaW5nVG9wLCBwYWRkaW5nQm90dG9tLCBwYWRkaW5nSGVpZ2h0LCBzY3JvbGxIZWlnaHQsIGNsaWVudEhlaWdodCxcclxuXHRcdFx0XHRib3JkZXJUb3AsIGJvcmRlckJvdHRvbSwgYm9yZGVySGVpZ2h0LCBoZWlnaHQsXHJcblx0XHRcdFx0c2Nyb2xsVG9wID0gdGhpcy53aW5kb3cuc2Nyb2xsVG9wKCk7XHJcblx0XHRcdHRoaXMua2V5dXBUaW1lb3V0ID0gMDtcclxuXHJcblx0XHRcdC8vIElFOCB0ZXh0YXJlYXMgaGF2ZSB0aGUgb25wYWdlIHByb3BlcnR5IC0gb3RoZXJzIGRvIG5vdFxyXG5cdFx0XHRpZiAoICEoIFwib25wYWdlXCIgaW4gdGhpcy5lbGVtZW50WyAwIF0gKSApIHtcclxuXHRcdFx0XHR0aGlzLmVsZW1lbnQuY3NzKHtcclxuXHRcdFx0XHRcdFwiaGVpZ2h0XCI6IDAsXHJcblx0XHRcdFx0XHRcIm1pbi1oZWlnaHRcIjogMCxcclxuXHRcdFx0XHRcdFwibWF4LWhlaWdodFwiOiAwXHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHNjcm9sbEhlaWdodCA9IHRoaXMuZWxlbWVudFsgMCBdLnNjcm9sbEhlaWdodDtcclxuXHRcdFx0Y2xpZW50SGVpZ2h0ID0gdGhpcy5lbGVtZW50WyAwIF0uY2xpZW50SGVpZ2h0O1xyXG5cdFx0XHRib3JkZXJUb3AgPSBwYXJzZUZsb2F0KCB0aGlzLmVsZW1lbnQuY3NzKCBcImJvcmRlci10b3Atd2lkdGhcIiApICk7XHJcblx0XHRcdGJvcmRlckJvdHRvbSA9IHBhcnNlRmxvYXQoIHRoaXMuZWxlbWVudC5jc3MoIFwiYm9yZGVyLWJvdHRvbS13aWR0aFwiICkgKTtcclxuXHRcdFx0Ym9yZGVySGVpZ2h0ID0gYm9yZGVyVG9wICsgYm9yZGVyQm90dG9tO1xyXG5cdFx0XHRoZWlnaHQgPSBzY3JvbGxIZWlnaHQgKyBib3JkZXJIZWlnaHQgKyAxNTtcclxuXHJcblx0XHRcdC8vIElzc3VlIDYxNzk6IFBhZGRpbmcgaXMgbm90IGluY2x1ZGVkIGluIHNjcm9sbEhlaWdodCBhbmRcclxuXHRcdFx0Ly8gY2xpZW50SGVpZ2h0IGJ5IEZpcmVmb3ggaWYgbm8gc2Nyb2xsYmFyIGlzIHZpc2libGUuIEJlY2F1c2VcclxuXHRcdFx0Ly8gdGV4dGFyZWFzIHVzZSB0aGUgYm9yZGVyLWJveCBib3gtc2l6aW5nIG1vZGVsLCBwYWRkaW5nIHNob3VsZCBiZVxyXG5cdFx0XHQvLyBpbmNsdWRlZCBpbiB0aGUgbmV3IChhc3NpZ25lZCkgaGVpZ2h0LiBCZWNhdXNlIHRoZSBoZWlnaHQgaXMgc2V0XHJcblx0XHRcdC8vIHRvIDAsIGNsaWVudEhlaWdodCA9PSAwIGluIEZpcmVmb3guIFRoZXJlZm9yZSwgd2UgY2FuIHVzZSB0aGlzIHRvXHJcblx0XHRcdC8vIGNoZWNrIGlmIHBhZGRpbmcgbXVzdCBiZSBhZGRlZC5cclxuXHRcdFx0aWYgKCBjbGllbnRIZWlnaHQgPT09IDAgKSB7XHJcblx0XHRcdFx0cGFkZGluZ1RvcCA9IHBhcnNlRmxvYXQoIHRoaXMuZWxlbWVudC5jc3MoIFwicGFkZGluZy10b3BcIiApICk7XHJcblx0XHRcdFx0cGFkZGluZ0JvdHRvbSA9IHBhcnNlRmxvYXQoIHRoaXMuZWxlbWVudC5jc3MoIFwicGFkZGluZy1ib3R0b21cIiApICk7XHJcblx0XHRcdFx0cGFkZGluZ0hlaWdodCA9IHBhZGRpbmdUb3AgKyBwYWRkaW5nQm90dG9tO1xyXG5cclxuXHRcdFx0XHRoZWlnaHQgKz0gcGFkZGluZ0hlaWdodDtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0dGhpcy5lbGVtZW50LmNzcyh7XHJcblx0XHRcdFx0XCJoZWlnaHRcIjogaGVpZ2h0LFxyXG5cdFx0XHRcdFwibWluLWhlaWdodFwiOiBcIlwiLFxyXG5cdFx0XHRcdFwibWF4LWhlaWdodFwiOiBcIlwiXHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0dGhpcy53aW5kb3cuc2Nyb2xsVG9wKCBzY3JvbGxUb3AgKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0cmVmcmVzaDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdGlmICggdGhpcy5vcHRpb25zLmF1dG9ncm93ICYmIHRoaXMuaXNUZXh0YXJlYSApIHtcclxuXHRcdFx0XHR0aGlzLl91cGRhdGVIZWlnaHQoKTtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHJcblx0XHRfc2V0T3B0aW9uczogZnVuY3Rpb24oIG9wdGlvbnMgKSB7XHJcblxyXG5cdFx0XHR0aGlzLl9zdXBlciggb3B0aW9ucyApO1xyXG5cclxuXHRcdFx0aWYgKCBvcHRpb25zLmF1dG9ncm93ICE9PSB1bmRlZmluZWQgJiYgdGhpcy5pc1RleHRhcmVhICkge1xyXG5cdFx0XHRcdGlmICggb3B0aW9ucy5hdXRvZ3JvdyApIHtcclxuXHRcdFx0XHRcdHRoaXMuX2F1dG9ncm93KCk7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdHRoaXMuX3VuYmluZEF1dG9ncm93KCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdH0pO1xyXG59KSggalF1ZXJ5ICk7XHJcblxyXG4oZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcclxuXHJcbiQud2lkZ2V0KCBcIm1vYmlsZS5zZWxlY3RtZW51XCIsICQuZXh0ZW5kKCB7XHJcblx0aW5pdFNlbGVjdG9yOiBcInNlbGVjdDpub3QoIDpqcW1EYXRhKHJvbGU9J3NsaWRlcicpKTpub3QoIDpqcW1EYXRhKHJvbGU9J2ZsaXBzd2l0Y2gnKSApXCIsXHJcblxyXG5cdG9wdGlvbnM6IHtcclxuXHRcdHRoZW1lOiBudWxsLFxyXG5cdFx0aWNvbjogXCJjYXJhdC1kXCIsXHJcblx0XHRpY29ucG9zOiBcInJpZ2h0XCIsXHJcblx0XHRpbmxpbmU6IGZhbHNlLFxyXG5cdFx0Y29ybmVyczogdHJ1ZSxcclxuXHRcdHNoYWRvdzogdHJ1ZSxcclxuXHRcdGljb25zaGFkb3c6IGZhbHNlLCAvKiBUT0RPOiBEZXByZWNhdGVkIGluIDEuNCwgcmVtb3ZlIGluIDEuNS4gKi9cclxuXHRcdG92ZXJsYXlUaGVtZTogbnVsbCxcclxuXHRcdGRpdmlkZXJUaGVtZTogbnVsbCxcclxuXHRcdGhpZGVQbGFjZWhvbGRlck1lbnVJdGVtczogdHJ1ZSxcclxuXHRcdGNsb3NlVGV4dDogXCJDbG9zZVwiLFxyXG5cdFx0bmF0aXZlTWVudTogdHJ1ZSxcclxuXHRcdC8vIFRoaXMgb3B0aW9uIGRlZmF1bHRzIHRvIHRydWUgb24gaU9TIGRldmljZXMuXHJcblx0XHRwcmV2ZW50Rm9jdXNab29tOiAvaVBob25lfGlQYWR8aVBvZC8udGVzdCggbmF2aWdhdG9yLnBsYXRmb3JtICkgJiYgbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCBcIkFwcGxlV2ViS2l0XCIgKSA+IC0xLFxyXG5cdFx0bWluaTogZmFsc2VcclxuXHR9LFxyXG5cclxuXHRfYnV0dG9uOiBmdW5jdGlvbigpIHtcclxuXHRcdHJldHVybiAkKCBcIjxkaXYvPlwiICk7XHJcblx0fSxcclxuXHJcblx0X3NldERpc2FibGVkOiBmdW5jdGlvbiggdmFsdWUgKSB7XHJcblx0XHR0aGlzLmVsZW1lbnQuYXR0ciggXCJkaXNhYmxlZFwiLCB2YWx1ZSApO1xyXG5cdFx0dGhpcy5idXR0b24uYXR0ciggXCJhcmlhLWRpc2FibGVkXCIsIHZhbHVlICk7XHJcblx0XHRyZXR1cm4gdGhpcy5fc2V0T3B0aW9uKCBcImRpc2FibGVkXCIsIHZhbHVlICk7XHJcblx0fSxcclxuXHJcblx0X2ZvY3VzQnV0dG9uIDogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgc2VsZiA9IHRoaXM7XHJcblxyXG5cdFx0c2V0VGltZW91dCggZnVuY3Rpb24oKSB7XHJcblx0XHRcdHNlbGYuYnV0dG9uLmZvY3VzKCk7XHJcblx0XHR9LCA0MCk7XHJcblx0fSxcclxuXHJcblx0X3NlbGVjdE9wdGlvbnM6IGZ1bmN0aW9uKCkge1xyXG5cdFx0cmV0dXJuIHRoaXMuc2VsZWN0LmZpbmQoIFwib3B0aW9uXCIgKTtcclxuXHR9LFxyXG5cclxuXHQvLyBzZXR1cCBpdGVtcyB0aGF0IGFyZSBnZW5lcmFsbHkgbmVjZXNzYXJ5IGZvciBzZWxlY3QgbWVudSBleHRlbnNpb25cclxuXHRfcHJlRXh0ZW5zaW9uOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBpbmxpbmUgPSB0aGlzLm9wdGlvbnMuaW5saW5lIHx8IHRoaXMuZWxlbWVudC5qcW1EYXRhKCBcImlubGluZVwiICksXHJcblx0XHRcdG1pbmkgPSB0aGlzLm9wdGlvbnMubWluaSB8fCB0aGlzLmVsZW1lbnQuanFtRGF0YSggXCJtaW5pXCIgKSxcclxuXHRcdFx0Y2xhc3NlcyA9IFwiXCI7XHJcblx0XHQvLyBUT0RPOiBQb3N0IDEuMS0tb25jZSB3ZSBoYXZlIHRpbWUgdG8gdGVzdCB0aG9yb3VnaGx5LS1hbnkgY2xhc3NlcyBtYW51YWxseSBhcHBsaWVkIHRvIHRoZSBvcmlnaW5hbCBlbGVtZW50IHNob3VsZCBiZSBjYXJyaWVkIG92ZXIgdG8gdGhlIGVuaGFuY2VkIGVsZW1lbnQsIHdpdGggYW4gYC1lbmhhbmNlZGAgc3VmZml4LiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2pxdWVyeS9qcXVlcnktbW9iaWxlL2lzc3Vlcy8zNTc3XHJcblx0XHQvKiBpZiAoICRlbFswXS5jbGFzc05hbWUubGVuZ3RoICkge1xyXG5cdFx0XHRjbGFzc2VzID0gJGVsWzBdLmNsYXNzTmFtZTtcclxuXHRcdH0gKi9cclxuXHRcdGlmICggISF+dGhpcy5lbGVtZW50WzBdLmNsYXNzTmFtZS5pbmRleE9mKCBcInVpLWJ0bi1sZWZ0XCIgKSApIHtcclxuXHRcdFx0Y2xhc3NlcyA9IFwiIHVpLWJ0bi1sZWZ0XCI7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCAgISF+dGhpcy5lbGVtZW50WzBdLmNsYXNzTmFtZS5pbmRleE9mKCBcInVpLWJ0bi1yaWdodFwiICkgKSB7XHJcblx0XHRcdGNsYXNzZXMgPSBcIiB1aS1idG4tcmlnaHRcIjtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIGlubGluZSApIHtcclxuXHRcdFx0Y2xhc3NlcyArPSBcIiB1aS1idG4taW5saW5lXCI7XHJcblx0XHR9XHJcblx0XHRpZiAoIG1pbmkgKSB7XHJcblx0XHRcdGNsYXNzZXMgKz0gXCIgdWktbWluaVwiO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuc2VsZWN0ID0gdGhpcy5lbGVtZW50LnJlbW92ZUNsYXNzKCBcInVpLWJ0bi1sZWZ0IHVpLWJ0bi1yaWdodFwiICkud3JhcCggXCI8ZGl2IGNsYXNzPSd1aS1zZWxlY3RcIiArIGNsYXNzZXMgKyBcIic+XCIgKTtcclxuXHRcdHRoaXMuc2VsZWN0SWQgID0gdGhpcy5zZWxlY3QuYXR0ciggXCJpZFwiICkgfHwgKCBcInNlbGVjdC1cIiArIHRoaXMudXVpZCApO1xyXG5cdFx0dGhpcy5idXR0b25JZCA9IHRoaXMuc2VsZWN0SWQgKyBcIi1idXR0b25cIjtcclxuXHRcdHRoaXMubGFiZWwgPSAkKCBcImxhYmVsW2Zvcj0nXCIrIHRoaXMuc2VsZWN0SWQgK1wiJ11cIiApO1xyXG5cdFx0dGhpcy5pc011bHRpcGxlID0gdGhpcy5zZWxlY3RbIDAgXS5tdWx0aXBsZTtcclxuXHR9LFxyXG5cclxuXHRfZGVzdHJveTogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgd3JhcHBlciA9IHRoaXMuZWxlbWVudC5wYXJlbnRzKCBcIi51aS1zZWxlY3RcIiApO1xyXG5cdFx0aWYgKCB3cmFwcGVyLmxlbmd0aCA+IDAgKSB7XHJcblx0XHRcdGlmICggd3JhcHBlci5pcyggXCIudWktYnRuLWxlZnQsIC51aS1idG4tcmlnaHRcIiApICkge1xyXG5cdFx0XHRcdHRoaXMuZWxlbWVudC5hZGRDbGFzcyggd3JhcHBlci5oYXNDbGFzcyggXCJ1aS1idG4tbGVmdFwiICkgPyBcInVpLWJ0bi1sZWZ0XCIgOiBcInVpLWJ0bi1yaWdodFwiICk7XHJcblx0XHRcdH1cclxuXHRcdFx0dGhpcy5lbGVtZW50Lmluc2VydEFmdGVyKCB3cmFwcGVyICk7XHJcblx0XHRcdHdyYXBwZXIucmVtb3ZlKCk7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X2NyZWF0ZTogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLl9wcmVFeHRlbnNpb24oKTtcclxuXHJcblx0XHR0aGlzLmJ1dHRvbiA9IHRoaXMuX2J1dHRvbigpO1xyXG5cclxuXHRcdHZhciBzZWxmID0gdGhpcyxcclxuXHJcblx0XHRcdG9wdGlvbnMgPSB0aGlzLm9wdGlvbnMsXHJcblxyXG5cdFx0XHRpY29ucG9zID0gb3B0aW9ucy5pY29uID8gKCBvcHRpb25zLmljb25wb3MgfHwgdGhpcy5zZWxlY3QuanFtRGF0YSggXCJpY29ucG9zXCIgKSApIDogZmFsc2UsXHJcblxyXG5cdFx0XHRidXR0b24gPSB0aGlzLmJ1dHRvblxyXG5cdFx0XHRcdC5pbnNlcnRCZWZvcmUoIHRoaXMuc2VsZWN0IClcclxuXHRcdFx0XHQuYXR0ciggXCJpZFwiLCB0aGlzLmJ1dHRvbklkIClcclxuXHRcdFx0XHQuYWRkQ2xhc3MoIFwidWktYnRuXCIgK1xyXG5cdFx0XHRcdFx0KCBvcHRpb25zLmljb24gPyAoIFwiIHVpLWljb24tXCIgKyBvcHRpb25zLmljb24gKyBcIiB1aS1idG4taWNvbi1cIiArIGljb25wb3MgK1xyXG5cdFx0XHRcdFx0KCBvcHRpb25zLmljb25zaGFkb3cgPyBcIiB1aS1zaGFkb3ctaWNvblwiIDogXCJcIiApICkgOlx0XCJcIiApICsgLyogVE9ETzogUmVtb3ZlIGluIDEuNS4gKi9cclxuXHRcdFx0XHRcdCggb3B0aW9ucy50aGVtZSA/IFwiIHVpLWJ0bi1cIiArIG9wdGlvbnMudGhlbWUgOiBcIlwiICkgK1xyXG5cdFx0XHRcdFx0KCBvcHRpb25zLmNvcm5lcnMgPyBcIiB1aS1jb3JuZXItYWxsXCIgOiBcIlwiICkgK1xyXG5cdFx0XHRcdFx0KCBvcHRpb25zLnNoYWRvdyA/IFwiIHVpLXNoYWRvd1wiIDogXCJcIiApICk7XHJcblxyXG5cdFx0dGhpcy5zZXRCdXR0b25UZXh0KCk7XHJcblxyXG5cdFx0Ly8gT3BlcmEgZG9lcyBub3QgcHJvcGVybHkgc3VwcG9ydCBvcGFjaXR5IG9uIHNlbGVjdCBlbGVtZW50c1xyXG5cdFx0Ly8gSW4gTWluaSwgaXQgaGlkZXMgdGhlIGVsZW1lbnQsIGJ1dCBub3QgaXRzIHRleHRcclxuXHRcdC8vIE9uIHRoZSBkZXNrdG9wLGl0IHNlZW1zIHRvIGRvIHRoZSBvcHBvc2l0ZVxyXG5cdFx0Ly8gZm9yIHRoZXNlIHJlYXNvbnMsIHVzaW5nIHRoZSBuYXRpdmVNZW51IG9wdGlvbiByZXN1bHRzIGluIGEgZnVsbCBuYXRpdmUgc2VsZWN0IGluIE9wZXJhXHJcblx0XHRpZiAoIG9wdGlvbnMubmF0aXZlTWVudSAmJiB3aW5kb3cub3BlcmEgJiYgd2luZG93Lm9wZXJhLnZlcnNpb24gKSB7XHJcblx0XHRcdGJ1dHRvbi5hZGRDbGFzcyggXCJ1aS1zZWxlY3QtbmF0aXZlb25seVwiICk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gQWRkIGNvdW50ZXIgZm9yIG11bHRpIHNlbGVjdHNcclxuXHRcdGlmICggdGhpcy5pc011bHRpcGxlICkge1xyXG5cdFx0XHR0aGlzLmJ1dHRvbkNvdW50ID0gJCggXCI8c3Bhbj5cIiApXHJcblx0XHRcdFx0LmFkZENsYXNzKCBcInVpLWxpLWNvdW50IHVpLWJvZHktaW5oZXJpdFwiIClcclxuXHRcdFx0XHQuaGlkZSgpXHJcblx0XHRcdFx0LmFwcGVuZFRvKCBidXR0b24uYWRkQ2xhc3MoIFwidWktbGktaGFzLWNvdW50XCIgKSApO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIERpc2FibGUgaWYgc3BlY2lmaWVkXHJcblx0XHRpZiAoIG9wdGlvbnMuZGlzYWJsZWQgfHwgdGhpcy5lbGVtZW50LmF0dHIoIFwiZGlzYWJsZWRcIiApKSB7XHJcblx0XHRcdHRoaXMuZGlzYWJsZSgpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIEV2ZW50cyBvbiBuYXRpdmUgc2VsZWN0XHJcblx0XHR0aGlzLnNlbGVjdC5jaGFuZ2UoZnVuY3Rpb24oKSB7XHJcblx0XHRcdHNlbGYucmVmcmVzaCgpO1xyXG5cclxuXHRcdFx0aWYgKCAhIW9wdGlvbnMubmF0aXZlTWVudSApIHtcclxuXHRcdFx0XHRzZWxmLl9kZWxheSggZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHRzZWxmLnNlbGVjdC5ibHVyKCk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cclxuXHRcdHRoaXMuX2hhbmRsZUZvcm1SZXNldCgpO1xyXG5cclxuXHRcdHRoaXMuX29uKCB0aGlzLmJ1dHRvbiwge1xyXG5cdFx0XHRrZXlkb3duOiBcIl9oYW5kbGVLZXlkb3duXCJcclxuXHRcdH0pO1xyXG5cclxuXHRcdHRoaXMuYnVpbGQoKTtcclxuXHR9LFxyXG5cclxuXHRidWlsZDogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgc2VsZiA9IHRoaXM7XHJcblxyXG5cdFx0dGhpcy5zZWxlY3RcclxuXHRcdFx0LmFwcGVuZFRvKCBzZWxmLmJ1dHRvbiApXHJcblx0XHRcdC5iaW5kKCBcInZtb3VzZWRvd25cIiwgZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0Ly8gQWRkIGFjdGl2ZSBjbGFzcyB0byBidXR0b25cclxuXHRcdFx0XHRzZWxmLmJ1dHRvbi5hZGRDbGFzcyggJC5tb2JpbGUuYWN0aXZlQnRuQ2xhc3MgKTtcclxuXHRcdFx0fSlcclxuXHRcdFx0LmJpbmQoIFwiZm9jdXNcIiwgZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0c2VsZi5idXR0b24uYWRkQ2xhc3MoICQubW9iaWxlLmZvY3VzQ2xhc3MgKTtcclxuXHRcdFx0fSlcclxuXHRcdFx0LmJpbmQoIFwiYmx1clwiLCBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRzZWxmLmJ1dHRvbi5yZW1vdmVDbGFzcyggJC5tb2JpbGUuZm9jdXNDbGFzcyApO1xyXG5cdFx0XHR9KVxyXG5cdFx0XHQuYmluZCggXCJmb2N1cyB2bW91c2VvdmVyXCIsIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHNlbGYuYnV0dG9uLnRyaWdnZXIoIFwidm1vdXNlb3ZlclwiICk7XHJcblx0XHRcdH0pXHJcblx0XHRcdC5iaW5kKCBcInZtb3VzZW1vdmVcIiwgZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0Ly8gUmVtb3ZlIGFjdGl2ZSBjbGFzcyBvbiBzY3JvbGwvdG91Y2htb3ZlXHJcblx0XHRcdFx0c2VsZi5idXR0b24ucmVtb3ZlQ2xhc3MoICQubW9iaWxlLmFjdGl2ZUJ0bkNsYXNzICk7XHJcblx0XHRcdH0pXHJcblx0XHRcdC5iaW5kKCBcImNoYW5nZSBibHVyIHZtb3VzZW91dFwiLCBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRzZWxmLmJ1dHRvbi50cmlnZ2VyKCBcInZtb3VzZW91dFwiIClcclxuXHRcdFx0XHRcdC5yZW1vdmVDbGFzcyggJC5tb2JpbGUuYWN0aXZlQnRuQ2xhc3MgKTtcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0Ly8gSW4gbWFueSBzaXR1YXRpb25zLCBpT1Mgd2lsbCB6b29tIGludG8gdGhlIHNlbGVjdCB1cG9uIHRhcCwgdGhpcyBwcmV2ZW50cyB0aGF0IGZyb20gaGFwcGVuaW5nXHJcblx0XHRzZWxmLmJ1dHRvbi5iaW5kKCBcInZtb3VzZWRvd25cIiwgZnVuY3Rpb24oKSB7XHJcblx0XHRcdGlmICggc2VsZi5vcHRpb25zLnByZXZlbnRGb2N1c1pvb20gKSB7XHJcblx0XHRcdFx0XHQkLm1vYmlsZS56b29tLmRpc2FibGUoIHRydWUgKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0XHRzZWxmLmxhYmVsLmJpbmQoIFwiY2xpY2sgZm9jdXNcIiwgZnVuY3Rpb24oKSB7XHJcblx0XHRcdGlmICggc2VsZi5vcHRpb25zLnByZXZlbnRGb2N1c1pvb20gKSB7XHJcblx0XHRcdFx0XHQkLm1vYmlsZS56b29tLmRpc2FibGUoIHRydWUgKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0XHRzZWxmLnNlbGVjdC5iaW5kKCBcImZvY3VzXCIsIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRpZiAoIHNlbGYub3B0aW9ucy5wcmV2ZW50Rm9jdXNab29tICkge1xyXG5cdFx0XHRcdFx0JC5tb2JpbGUuem9vbS5kaXNhYmxlKCB0cnVlICk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdFx0c2VsZi5idXR0b24uYmluZCggXCJtb3VzZXVwXCIsIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRpZiAoIHNlbGYub3B0aW9ucy5wcmV2ZW50Rm9jdXNab29tICkge1xyXG5cdFx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHQkLm1vYmlsZS56b29tLmVuYWJsZSggdHJ1ZSApO1xyXG5cdFx0XHRcdH0sIDAgKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0XHRzZWxmLnNlbGVjdC5iaW5kKCBcImJsdXJcIiwgZnVuY3Rpb24oKSB7XHJcblx0XHRcdGlmICggc2VsZi5vcHRpb25zLnByZXZlbnRGb2N1c1pvb20gKSB7XHJcblx0XHRcdFx0JC5tb2JpbGUuem9vbS5lbmFibGUoIHRydWUgKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblxyXG5cdH0sXHJcblxyXG5cdHNlbGVjdGVkOiBmdW5jdGlvbigpIHtcclxuXHRcdHJldHVybiB0aGlzLl9zZWxlY3RPcHRpb25zKCkuZmlsdGVyKCBcIjpzZWxlY3RlZFwiICk7XHJcblx0fSxcclxuXHJcblx0c2VsZWN0ZWRJbmRpY2VzOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBzZWxmID0gdGhpcztcclxuXHJcblx0XHRyZXR1cm4gdGhpcy5zZWxlY3RlZCgpLm1hcChmdW5jdGlvbigpIHtcclxuXHRcdFx0cmV0dXJuIHNlbGYuX3NlbGVjdE9wdGlvbnMoKS5pbmRleCggdGhpcyApO1xyXG5cdFx0fSkuZ2V0KCk7XHJcblx0fSxcclxuXHJcblx0c2V0QnV0dG9uVGV4dDogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgc2VsZiA9IHRoaXMsXHJcblx0XHRcdHNlbGVjdGVkID0gdGhpcy5zZWxlY3RlZCgpLFxyXG5cdFx0XHR0ZXh0ID0gdGhpcy5wbGFjZWhvbGRlcixcclxuXHRcdFx0c3BhbiA9ICQoIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwic3BhblwiICkgKTtcclxuXHJcblx0XHR0aGlzLmJ1dHRvbi5jaGlsZHJlbiggXCJzcGFuXCIgKS5ub3QoIFwiLnVpLWxpLWNvdW50XCIgKS5yZW1vdmUoKS5lbmQoKS5lbmQoKS5wcmVwZW5kKCAoZnVuY3Rpb24oKSB7XHJcblx0XHRcdGlmICggc2VsZWN0ZWQubGVuZ3RoICkge1xyXG5cdFx0XHRcdHRleHQgPSBzZWxlY3RlZC5tYXAoZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gJCggdGhpcyApLnRleHQoKTtcclxuXHRcdFx0XHR9KS5nZXQoKS5qb2luKCBcIiwgXCIgKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHR0ZXh0ID0gc2VsZi5wbGFjZWhvbGRlcjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aWYgKCB0ZXh0ICkge1xyXG5cdFx0XHRcdHNwYW4udGV4dCggdGV4dCApO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cclxuXHRcdFx0XHQvLyBTZXQgdGhlIGNvbnRlbnRzIHRvICZuYnNwOyB3aGljaCB3ZSB3cml0ZSBhcyAmIzE2MDsgdG8gYmUgWEhUTUwgY29tcGxpYW50IC0gc2VlIGdoLTY2OTlcclxuXHRcdFx0XHRzcGFuLmh0bWwoIFwiJiMxNjA7XCIgKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gVE9ETyBwb3NzaWJseSBhZ2dyZWdhdGUgbXVsdGlwbGUgc2VsZWN0IG9wdGlvbiBjbGFzc2VzXHJcblx0XHRcdHJldHVybiBzcGFuXHJcblx0XHRcdFx0LmFkZENsYXNzKCBzZWxmLnNlbGVjdC5hdHRyKCBcImNsYXNzXCIgKSApXHJcblx0XHRcdFx0LmFkZENsYXNzKCBzZWxlY3RlZC5hdHRyKCBcImNsYXNzXCIgKSApXHJcblx0XHRcdFx0LnJlbW92ZUNsYXNzKCBcInVpLXNjcmVlbi1oaWRkZW5cIiApO1xyXG5cdFx0fSkoKSk7XHJcblx0fSxcclxuXHJcblx0c2V0QnV0dG9uQ291bnQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIHNlbGVjdGVkID0gdGhpcy5zZWxlY3RlZCgpO1xyXG5cclxuXHRcdC8vIG11bHRpcGxlIGNvdW50IGluc2lkZSBidXR0b25cclxuXHRcdGlmICggdGhpcy5pc011bHRpcGxlICkge1xyXG5cdFx0XHR0aGlzLmJ1dHRvbkNvdW50WyBzZWxlY3RlZC5sZW5ndGggPiAxID8gXCJzaG93XCIgOiBcImhpZGVcIiBdKCkudGV4dCggc2VsZWN0ZWQubGVuZ3RoICk7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X2hhbmRsZUtleWRvd246IGZ1bmN0aW9uKCAvKiBldmVudCAqLyApIHtcclxuXHRcdHRoaXMuX2RlbGF5KCBcIl9yZWZyZXNoQnV0dG9uXCIgKTtcclxuXHR9LFxyXG5cclxuXHRfcmVzZXQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5yZWZyZXNoKCk7XHJcblx0fSxcclxuXHJcblx0X3JlZnJlc2hCdXR0b246IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5zZXRCdXR0b25UZXh0KCk7XHJcblx0XHR0aGlzLnNldEJ1dHRvbkNvdW50KCk7XHJcblx0fSxcclxuXHJcblx0cmVmcmVzaDogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLl9yZWZyZXNoQnV0dG9uKCk7XHJcblx0fSxcclxuXHJcblx0Ly8gb3BlbiBhbmQgY2xvc2UgcHJlc2VydmVkIGluIG5hdGl2ZSBzZWxlY3RzXHJcblx0Ly8gdG8gc2ltcGxpZnkgdXNlcnMgY29kZSB3aGVuIGxvb3Bpbmcgb3ZlciBzZWxlY3RzXHJcblx0b3BlbjogJC5ub29wLFxyXG5cdGNsb3NlOiAkLm5vb3AsXHJcblxyXG5cdGRpc2FibGU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5fc2V0RGlzYWJsZWQoIHRydWUgKTtcclxuXHRcdHRoaXMuYnV0dG9uLmFkZENsYXNzKCBcInVpLXN0YXRlLWRpc2FibGVkXCIgKTtcclxuXHR9LFxyXG5cclxuXHRlbmFibGU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5fc2V0RGlzYWJsZWQoIGZhbHNlICk7XHJcblx0XHR0aGlzLmJ1dHRvbi5yZW1vdmVDbGFzcyggXCJ1aS1zdGF0ZS1kaXNhYmxlZFwiICk7XHJcblx0fVxyXG59LCAkLm1vYmlsZS5iZWhhdmlvcnMuZm9ybVJlc2V0ICkgKTtcclxuXHJcbn0pKCBqUXVlcnkgKTtcclxuXHJcbihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xyXG5cclxuJC5tb2JpbGUubGlua3MgPSBmdW5jdGlvbiggdGFyZ2V0ICkge1xyXG5cclxuXHQvL2xpbmtzIHdpdGhpbiBjb250ZW50IGFyZWFzLCB0ZXN0cyBpbmNsdWRlZCB3aXRoIHBhZ2VcclxuXHQkKCB0YXJnZXQgKVxyXG5cdFx0LmZpbmQoIFwiYVwiIClcclxuXHRcdC5qcW1FbmhhbmNlYWJsZSgpXHJcblx0XHQuZmlsdGVyKCBcIjpqcW1EYXRhKHJlbD0ncG9wdXAnKVtocmVmXVtocmVmIT0nJ11cIiApXHJcblx0XHQuZWFjaCggZnVuY3Rpb24oKSB7XHJcblx0XHRcdC8vIEFjY2Vzc2liaWxpdHkgaW5mbyBmb3IgcG9wdXBzXHJcblx0XHRcdHZhciBlbGVtZW50ID0gdGhpcyxcclxuXHRcdFx0XHRpZHJlZiA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCBcImhyZWZcIiApLnN1YnN0cmluZyggMSApO1xyXG5cclxuXHRcdFx0aWYgKCBpZHJlZiApIHtcclxuXHRcdFx0XHRlbGVtZW50LnNldEF0dHJpYnV0ZSggXCJhcmlhLWhhc3BvcHVwXCIsIHRydWUgKTtcclxuXHRcdFx0XHRlbGVtZW50LnNldEF0dHJpYnV0ZSggXCJhcmlhLW93bnNcIiwgaWRyZWYgKTtcclxuXHRcdFx0XHRlbGVtZW50LnNldEF0dHJpYnV0ZSggXCJhcmlhLWV4cGFuZGVkXCIsIGZhbHNlICk7XHJcblx0XHRcdH1cclxuXHRcdH0pXHJcblx0XHQuZW5kKClcclxuXHRcdC5ub3QoIFwiLnVpLWJ0biwgOmpxbURhdGEocm9sZT0nbm9uZScpLCA6anFtRGF0YShyb2xlPSdub2pzJylcIiApXHJcblx0XHQuYWRkQ2xhc3MoIFwidWktbGlua1wiICk7XHJcblxyXG59O1xyXG5cclxufSkoIGpRdWVyeSApO1xyXG5cclxuXHJcbihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xyXG5cclxuZnVuY3Rpb24gZml0U2VnbWVudEluc2lkZVNlZ21lbnQoIHdpbmRvd1NpemUsIHNlZ21lbnRTaXplLCBvZmZzZXQsIGRlc2lyZWQgKSB7XHJcblx0dmFyIHJldHVyblZhbHVlID0gZGVzaXJlZDtcclxuXHJcblx0aWYgKCB3aW5kb3dTaXplIDwgc2VnbWVudFNpemUgKSB7XHJcblx0XHQvLyBDZW50ZXIgc2VnbWVudCBpZiBpdCdzIGJpZ2dlciB0aGFuIHRoZSB3aW5kb3dcclxuXHRcdHJldHVyblZhbHVlID0gb2Zmc2V0ICsgKCB3aW5kb3dTaXplIC0gc2VnbWVudFNpemUgKSAvIDI7XHJcblx0fSBlbHNlIHtcclxuXHRcdC8vIE90aGVyd2lzZSBjZW50ZXIgaXQgYXQgdGhlIGRlc2lyZWQgY29vcmRpbmF0ZSB3aGlsZSBrZWVwaW5nIGl0IGNvbXBsZXRlbHkgaW5zaWRlIHRoZSB3aW5kb3dcclxuXHRcdHJldHVyblZhbHVlID0gTWF0aC5taW4oIE1hdGgubWF4KCBvZmZzZXQsIGRlc2lyZWQgLSBzZWdtZW50U2l6ZSAvIDIgKSwgb2Zmc2V0ICsgd2luZG93U2l6ZSAtIHNlZ21lbnRTaXplICk7XHJcblx0fVxyXG5cclxuXHRyZXR1cm4gcmV0dXJuVmFsdWU7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldFdpbmRvd0Nvb3JkaW5hdGVzKCB0aGVXaW5kb3cgKSB7XHJcblx0cmV0dXJuIHtcclxuXHRcdHg6IHRoZVdpbmRvdy5zY3JvbGxMZWZ0KCksXHJcblx0XHR5OiB0aGVXaW5kb3cuc2Nyb2xsVG9wKCksXHJcblx0XHRjeDogKCB0aGVXaW5kb3dbIDAgXS5pbm5lcldpZHRoIHx8IHRoZVdpbmRvdy53aWR0aCgpICksXHJcblx0XHRjeTogKCB0aGVXaW5kb3dbIDAgXS5pbm5lckhlaWdodCB8fCB0aGVXaW5kb3cuaGVpZ2h0KCkgKVxyXG5cdH07XHJcbn1cclxuXHJcbiQud2lkZ2V0KCBcIm1vYmlsZS5wb3B1cFwiLCB7XHJcblx0b3B0aW9uczoge1xyXG5cdFx0d3JhcHBlckNsYXNzOiBudWxsLFxyXG5cdFx0dGhlbWU6IG51bGwsXHJcblx0XHRvdmVybGF5VGhlbWU6IG51bGwsXHJcblx0XHRzaGFkb3c6IHRydWUsXHJcblx0XHRjb3JuZXJzOiB0cnVlLFxyXG5cdFx0dHJhbnNpdGlvbjogXCJub25lXCIsXHJcblx0XHRwb3NpdGlvblRvOiBcIm9yaWdpblwiLFxyXG5cdFx0dG9sZXJhbmNlOiBudWxsLFxyXG5cdFx0Y2xvc2VMaW5rU2VsZWN0b3I6IFwiYTpqcW1EYXRhKHJlbD0nYmFjaycpXCIsXHJcblx0XHRjbG9zZUxpbmtFdmVudHM6IFwiY2xpY2sucG9wdXBcIixcclxuXHRcdG5hdmlnYXRlRXZlbnRzOiBcIm5hdmlnYXRlLnBvcHVwXCIsXHJcblx0XHRjbG9zZUV2ZW50czogXCJuYXZpZ2F0ZS5wb3B1cCBwYWdlYmVmb3JlY2hhbmdlLnBvcHVwXCIsXHJcblx0XHRkaXNtaXNzaWJsZTogdHJ1ZSxcclxuXHRcdGVuaGFuY2VkOiBmYWxzZSxcclxuXHJcblx0XHQvLyBOT1RFIFdpbmRvd3MgUGhvbmUgNyBoYXMgYSBzY3JvbGwgcG9zaXRpb24gY2FjaGluZyBpc3N1ZSB0aGF0XHJcblx0XHQvLyAgICAgIHJlcXVpcmVzIHVzIHRvIGRpc2FibGUgcG9wdXAgaGlzdG9yeSBtYW5hZ2VtZW50IGJ5IGRlZmF1bHRcclxuXHRcdC8vICAgICAgaHR0cHM6Ly9naXRodWIuY29tL2pxdWVyeS9qcXVlcnktbW9iaWxlL2lzc3Vlcy80Nzg0XHJcblx0XHQvL1xyXG5cdFx0Ly8gTk9URSB0aGlzIG9wdGlvbiBpcyBtb2RpZmllZCBpbiBfY3JlYXRlIVxyXG5cdFx0aGlzdG9yeTogISQubW9iaWxlLmJyb3dzZXIub2xkSUVcclxuXHR9LFxyXG5cclxuXHQvLyBXaGVuIHRoZSB1c2VyIGRlcHJlc3NlcyB0aGUgbW91c2UvZmluZ2VyIG9uIGFuIGVsZW1lbnQgaW5zaWRlIHRoZSBwb3B1cCB3aGlsZSB0aGUgcG9wdXAgaXNcclxuXHQvLyBvcGVuLCB3ZSBpZ25vcmUgcmVzaXplIGV2ZW50cyBmb3IgYSBzaG9ydCB3aGlsZS4gVGhpcyBwcmV2ZW50cyAjNjk2MS5cclxuXHRfaGFuZGxlRG9jdW1lbnRWbW91c2Vkb3duOiBmdW5jdGlvbiggdGhlRXZlbnQgKSB7XHJcblx0XHRpZiAoIHRoaXMuX2lzT3BlbiAmJiAkLmNvbnRhaW5zKCB0aGlzLl91aS5jb250YWluZXJbIDAgXSwgdGhlRXZlbnQudGFyZ2V0ICkgKSB7XHJcblx0XHRcdHRoaXMuX2lnbm9yZVJlc2l6ZUV2ZW50cygpO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9jcmVhdGU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIHRoZUVsZW1lbnQgPSB0aGlzLmVsZW1lbnQsXHJcblx0XHRcdG15SWQgPSB0aGVFbGVtZW50LmF0dHIoIFwiaWRcIiApLFxyXG5cdFx0XHRjdXJyZW50T3B0aW9ucyA9IHRoaXMub3B0aW9ucztcclxuXHJcblx0XHQvLyBXZSBuZWVkIHRvIGFkanVzdCB0aGUgaGlzdG9yeSBvcHRpb24gdG8gYmUgZmFsc2UgaWYgdGhlcmUncyBubyBBSkFYIG5hdi5cclxuXHRcdC8vIFdlIGNhbid0IGRvIGl0IGluIHRoZSBvcHRpb24gZGVjbGFyYXRpb25zIGJlY2F1c2UgdGhvc2UgYXJlIHJ1biBiZWZvcmVcclxuXHRcdC8vIGl0IGlzIGRldGVybWluZWQgd2hldGhlciB0aGVyZSBzaGFsbCBiZSBBSkFYIG5hdi5cclxuXHRcdGN1cnJlbnRPcHRpb25zLmhpc3RvcnkgPSBjdXJyZW50T3B0aW9ucy5oaXN0b3J5ICYmICQubW9iaWxlLmFqYXhFbmFibGVkICYmICQubW9iaWxlLmhhc2hMaXN0ZW5pbmdFbmFibGVkO1xyXG5cclxuXHRcdHRoaXMuX29uKCB0aGlzLmRvY3VtZW50LCB7XHJcblx0XHRcdFwidm1vdXNlZG93blwiOiBcIl9oYW5kbGVEb2N1bWVudFZtb3VzZWRvd25cIlxyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gRGVmaW5lIGluc3RhbmNlIHZhcmlhYmxlc1xyXG5cdFx0JC5leHRlbmQoIHRoaXMsIHtcclxuXHRcdFx0X3Njcm9sbFRvcDogMCxcclxuXHRcdFx0X3BhZ2U6IHRoZUVsZW1lbnQuY2xvc2VzdCggXCIudWktcGFnZVwiICksXHJcblx0XHRcdF91aTogbnVsbCxcclxuXHRcdFx0X2ZhbGxiYWNrVHJhbnNpdGlvbjogXCJcIixcclxuXHRcdFx0X2N1cnJlbnRUcmFuc2l0aW9uOiBmYWxzZSxcclxuXHRcdFx0X3ByZXJlcXVpc2l0ZXM6IG51bGwsXHJcblx0XHRcdF9pc09wZW46IGZhbHNlLFxyXG5cdFx0XHRfdG9sZXJhbmNlOiBudWxsLFxyXG5cdFx0XHRfcmVzaXplRGF0YTogbnVsbCxcclxuXHRcdFx0X2lnbm9yZVJlc2l6ZVRvOiAwLFxyXG5cdFx0XHRfb3JpZW50YXRpb25jaGFuZ2VJblByb2dyZXNzOiBmYWxzZVxyXG5cdFx0fSk7XHJcblxyXG5cdFx0aWYgKCB0aGlzLl9wYWdlLmxlbmd0aCA9PT0gMCApIHtcclxuXHRcdFx0dGhpcy5fcGFnZSA9ICQoIFwiYm9keVwiICk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBjdXJyZW50T3B0aW9ucy5lbmhhbmNlZCApIHtcclxuXHRcdFx0dGhpcy5fdWkgPSB7XHJcblx0XHRcdFx0Y29udGFpbmVyOiB0aGVFbGVtZW50LnBhcmVudCgpLFxyXG5cdFx0XHRcdHNjcmVlbjogdGhlRWxlbWVudC5wYXJlbnQoKS5wcmV2KCksXHJcblx0XHRcdFx0cGxhY2Vob2xkZXI6ICQoIHRoaXMuZG9jdW1lbnRbIDAgXS5nZXRFbGVtZW50QnlJZCggbXlJZCArIFwiLXBsYWNlaG9sZGVyXCIgKSApXHJcblx0XHRcdH07XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHR0aGlzLl91aSA9IHRoaXMuX2VuaGFuY2UoIHRoZUVsZW1lbnQsIG15SWQgKTtcclxuXHRcdFx0dGhpcy5fYXBwbHlUcmFuc2l0aW9uKCBjdXJyZW50T3B0aW9ucy50cmFuc2l0aW9uICk7XHJcblx0XHR9XHJcblx0XHR0aGlzXHJcblx0XHRcdC5fc2V0VG9sZXJhbmNlKCBjdXJyZW50T3B0aW9ucy50b2xlcmFuY2UgKVxyXG5cdFx0XHQuX3VpLmZvY3VzRWxlbWVudCA9IHRoaXMuX3VpLmNvbnRhaW5lcjtcclxuXHJcblx0XHQvLyBFdmVudCBoYW5kbGVyc1xyXG5cdFx0dGhpcy5fb24oIHRoaXMuX3VpLnNjcmVlbiwgeyBcInZjbGlja1wiOiBcIl9lYXRFdmVudEFuZENsb3NlXCIgfSApO1xyXG5cdFx0dGhpcy5fb24oIHRoaXMud2luZG93LCB7XHJcblx0XHRcdG9yaWVudGF0aW9uY2hhbmdlOiAkLnByb3h5KCB0aGlzLCBcIl9oYW5kbGVXaW5kb3dPcmllbnRhdGlvbmNoYW5nZVwiICksXHJcblx0XHRcdHJlc2l6ZTogJC5wcm94eSggdGhpcywgXCJfaGFuZGxlV2luZG93UmVzaXplXCIgKSxcclxuXHRcdFx0a2V5dXA6ICQucHJveHkoIHRoaXMsIFwiX2hhbmRsZVdpbmRvd0tleVVwXCIgKVxyXG5cdFx0fSk7XHJcblx0XHR0aGlzLl9vbiggdGhpcy5kb2N1bWVudCwgeyBcImZvY3VzaW5cIjogXCJfaGFuZGxlRG9jdW1lbnRGb2N1c0luXCIgfSApO1xyXG5cdH0sXHJcblxyXG5cdF9lbmhhbmNlOiBmdW5jdGlvbiggdGhlRWxlbWVudCwgbXlJZCApIHtcclxuXHRcdHZhciBjdXJyZW50T3B0aW9ucyA9IHRoaXMub3B0aW9ucyxcclxuXHRcdFx0d3JhcHBlckNsYXNzID0gY3VycmVudE9wdGlvbnMud3JhcHBlckNsYXNzLFxyXG5cdFx0XHR1aSA9IHtcclxuXHRcdFx0XHRzY3JlZW46ICQoIFwiPGRpdiBjbGFzcz0ndWktc2NyZWVuLWhpZGRlbiB1aS1wb3B1cC1zY3JlZW4gXCIgK1xyXG5cdFx0XHRcdHRoaXMuX3RoZW1lQ2xhc3NGcm9tT3B0aW9uKCBcInVpLW92ZXJsYXktXCIsIGN1cnJlbnRPcHRpb25zLm92ZXJsYXlUaGVtZSApICsgXCInPjwvZGl2PlwiICksXHJcblx0XHRcdFx0cGxhY2Vob2xkZXI6ICQoIFwiPGRpdiBzdHlsZT0nZGlzcGxheTogbm9uZTsnPjwhLS0gcGxhY2Vob2xkZXIgLS0+PC9kaXY+XCIgKSxcclxuXHRcdFx0XHRjb250YWluZXI6ICQoIFwiPGRpdiBjbGFzcz0ndWktcG9wdXAtY29udGFpbmVyIHVpLXBvcHVwLWhpZGRlbiB1aS1wb3B1cC10cnVuY2F0ZVwiICtcclxuXHRcdFx0XHRcdCggd3JhcHBlckNsYXNzID8gKCBcIiBcIiArIHdyYXBwZXJDbGFzcyApIDogXCJcIiApICsgXCInPjwvZGl2PlwiIClcclxuXHRcdFx0fSxcclxuXHRcdFx0ZnJhZ21lbnQgPSB0aGlzLmRvY3VtZW50WyAwIF0uY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xyXG5cclxuXHRcdGZyYWdtZW50LmFwcGVuZENoaWxkKCB1aS5zY3JlZW5bIDAgXSApO1xyXG5cdFx0ZnJhZ21lbnQuYXBwZW5kQ2hpbGQoIHVpLmNvbnRhaW5lclsgMCBdICk7XHJcblxyXG5cdFx0aWYgKCBteUlkICkge1xyXG5cdFx0XHR1aS5zY3JlZW4uYXR0ciggXCJpZFwiLCBteUlkICsgXCItc2NyZWVuXCIgKTtcclxuXHRcdFx0dWkuY29udGFpbmVyLmF0dHIoIFwiaWRcIiwgbXlJZCArIFwiLXBvcHVwXCIgKTtcclxuXHRcdFx0dWkucGxhY2Vob2xkZXJcclxuXHRcdFx0XHQuYXR0ciggXCJpZFwiLCBteUlkICsgXCItcGxhY2Vob2xkZXJcIiApXHJcblx0XHRcdFx0Lmh0bWwoIFwiPCEtLSBwbGFjZWhvbGRlciBmb3IgXCIgKyBteUlkICsgXCIgLS0+XCIgKTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBBcHBseSB0aGUgcHJvdG9cclxuXHRcdHRoaXMuX3BhZ2VbIDAgXS5hcHBlbmRDaGlsZCggZnJhZ21lbnQgKTtcclxuXHRcdC8vIExlYXZlIGEgcGxhY2Vob2xkZXIgd2hlcmUgdGhlIGVsZW1lbnQgdXNlZCB0byBiZVxyXG5cdFx0dWkucGxhY2Vob2xkZXIuaW5zZXJ0QWZ0ZXIoIHRoZUVsZW1lbnQgKTtcclxuXHRcdHRoZUVsZW1lbnRcclxuXHRcdFx0LmRldGFjaCgpXHJcblx0XHRcdC5hZGRDbGFzcyggXCJ1aS1wb3B1cCBcIiArXHJcblx0XHRcdFx0dGhpcy5fdGhlbWVDbGFzc0Zyb21PcHRpb24oIFwidWktYm9keS1cIiwgY3VycmVudE9wdGlvbnMudGhlbWUgKSArIFwiIFwiICtcclxuXHRcdFx0XHQoIGN1cnJlbnRPcHRpb25zLnNoYWRvdyA/IFwidWktb3ZlcmxheS1zaGFkb3cgXCIgOiBcIlwiICkgK1xyXG5cdFx0XHRcdCggY3VycmVudE9wdGlvbnMuY29ybmVycyA/IFwidWktY29ybmVyLWFsbCBcIiA6IFwiXCIgKSApXHJcblx0XHRcdC5hcHBlbmRUbyggdWkuY29udGFpbmVyICk7XHJcblxyXG5cdFx0cmV0dXJuIHVpO1xyXG5cdH0sXHJcblxyXG5cdF9lYXRFdmVudEFuZENsb3NlOiBmdW5jdGlvbiggdGhlRXZlbnQgKSB7XHJcblx0XHR0aGVFdmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0dGhlRXZlbnQuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XHJcblx0XHRpZiAoIHRoaXMub3B0aW9ucy5kaXNtaXNzaWJsZSApIHtcclxuXHRcdFx0dGhpcy5jbG9zZSgpO1xyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIGZhbHNlO1xyXG5cdH0sXHJcblxyXG5cdC8vIE1ha2Ugc3VyZSB0aGUgc2NyZWVuIGNvdmVycyB0aGUgZW50aXJlIGRvY3VtZW50IC0gQ1NTIGlzIHNvbWV0aW1lcyBub3RcclxuXHQvLyBlbm91Z2ggdG8gYWNjb21wbGlzaCB0aGlzLlxyXG5cdF9yZXNpemVTY3JlZW46IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIHNjcmVlbiA9IHRoaXMuX3VpLnNjcmVlbixcclxuXHRcdFx0cG9wdXBIZWlnaHQgPSB0aGlzLl91aS5jb250YWluZXIub3V0ZXJIZWlnaHQoIHRydWUgKSxcclxuXHRcdFx0c2NyZWVuSGVpZ2h0ID0gc2NyZWVuLnJlbW92ZUF0dHIoIFwic3R5bGVcIiApLmhlaWdodCgpLFxyXG5cclxuXHRcdFx0Ly8gU3VidHJhY3RpbmcgMSBoZXJlIGlzIG5lY2Vzc2FyeSBmb3IgYW4gb2JzY3VyZSBBbmRyZG9pZCA0LjAgYnVnIHdoZXJlXHJcblx0XHRcdC8vIHRoZSBicm93c2VyIGhhbmdzIGlmIHRoZSBzY3JlZW4gY292ZXJzIHRoZSBlbnRpcmUgZG9jdW1lbnQgOi9cclxuXHRcdFx0ZG9jdW1lbnRIZWlnaHQgPSB0aGlzLmRvY3VtZW50LmhlaWdodCgpIC0gMTtcclxuXHJcblx0XHRpZiAoIHNjcmVlbkhlaWdodCA8IGRvY3VtZW50SGVpZ2h0ICkge1xyXG5cdFx0XHRzY3JlZW4uaGVpZ2h0KCBkb2N1bWVudEhlaWdodCApO1xyXG5cdFx0fSBlbHNlIGlmICggcG9wdXBIZWlnaHQgPiBzY3JlZW5IZWlnaHQgKSB7XHJcblx0XHRcdHNjcmVlbi5oZWlnaHQoIHBvcHVwSGVpZ2h0ICk7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X2hhbmRsZVdpbmRvd0tleVVwOiBmdW5jdGlvbiggdGhlRXZlbnQgKSB7XHJcblx0XHRpZiAoIHRoaXMuX2lzT3BlbiAmJiB0aGVFdmVudC5rZXlDb2RlID09PSAkLm1vYmlsZS5rZXlDb2RlLkVTQ0FQRSApIHtcclxuXHRcdFx0cmV0dXJuIHRoaXMuX2VhdEV2ZW50QW5kQ2xvc2UoIHRoZUV2ZW50ICk7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X2V4cGVjdFJlc2l6ZUV2ZW50OiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciB3aW5kb3dDb29yZGluYXRlcyA9IGdldFdpbmRvd0Nvb3JkaW5hdGVzKCB0aGlzLndpbmRvdyApO1xyXG5cclxuXHRcdGlmICggdGhpcy5fcmVzaXplRGF0YSApIHtcclxuXHRcdFx0aWYgKCB3aW5kb3dDb29yZGluYXRlcy54ID09PSB0aGlzLl9yZXNpemVEYXRhLndpbmRvd0Nvb3JkaW5hdGVzLnggJiZcclxuXHRcdFx0XHR3aW5kb3dDb29yZGluYXRlcy55ID09PSB0aGlzLl9yZXNpemVEYXRhLndpbmRvd0Nvb3JkaW5hdGVzLnkgJiZcclxuXHRcdFx0XHR3aW5kb3dDb29yZGluYXRlcy5jeCA9PT0gdGhpcy5fcmVzaXplRGF0YS53aW5kb3dDb29yZGluYXRlcy5jeCAmJlxyXG5cdFx0XHRcdHdpbmRvd0Nvb3JkaW5hdGVzLmN5ID09PSB0aGlzLl9yZXNpemVEYXRhLndpbmRvd0Nvb3JkaW5hdGVzLmN5ICkge1xyXG5cdFx0XHRcdC8vIHRpbWVvdXQgbm90IHJlZnJlc2hlZFxyXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHQvLyBjbGVhciBleGlzdGluZyB0aW1lb3V0IC0gaXQgd2lsbCBiZSByZWZyZXNoZWQgYmVsb3dcclxuXHRcdFx0XHRjbGVhclRpbWVvdXQoIHRoaXMuX3Jlc2l6ZURhdGEudGltZW91dElkICk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLl9yZXNpemVEYXRhID0ge1xyXG5cdFx0XHR0aW1lb3V0SWQ6IHRoaXMuX2RlbGF5KCBcIl9yZXNpemVUaW1lb3V0XCIsIDIwMCApLFxyXG5cdFx0XHR3aW5kb3dDb29yZGluYXRlczogd2luZG93Q29vcmRpbmF0ZXNcclxuXHRcdH07XHJcblxyXG5cdFx0cmV0dXJuIHRydWU7XHJcblx0fSxcclxuXHJcblx0X3Jlc2l6ZVRpbWVvdXQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0aWYgKCB0aGlzLl9pc09wZW4gKSB7XHJcblx0XHRcdGlmICggIXRoaXMuX2V4cGVjdFJlc2l6ZUV2ZW50KCkgKSB7XHJcblx0XHRcdFx0aWYgKCB0aGlzLl91aS5jb250YWluZXIuaGFzQ2xhc3MoIFwidWktcG9wdXAtaGlkZGVuXCIgKSApIHtcclxuXHRcdFx0XHRcdC8vIGVmZmVjdGl2ZWx5IHJhcGlkLW9wZW4gdGhlIHBvcHVwIHdoaWxlIGxlYXZpbmcgdGhlIHNjcmVlbiBpbnRhY3RcclxuXHRcdFx0XHRcdHRoaXMuX3VpLmNvbnRhaW5lci5yZW1vdmVDbGFzcyggXCJ1aS1wb3B1cC1oaWRkZW4gdWktcG9wdXAtdHJ1bmNhdGVcIiApO1xyXG5cdFx0XHRcdFx0dGhpcy5yZXBvc2l0aW9uKCB7IHBvc2l0aW9uVG86IFwid2luZG93XCIgfSApO1xyXG5cdFx0XHRcdFx0dGhpcy5faWdub3JlUmVzaXplRXZlbnRzKCk7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHR0aGlzLl9yZXNpemVTY3JlZW4oKTtcclxuXHRcdFx0XHR0aGlzLl9yZXNpemVEYXRhID0gbnVsbDtcclxuXHRcdFx0XHR0aGlzLl9vcmllbnRhdGlvbmNoYW5nZUluUHJvZ3Jlc3MgPSBmYWxzZTtcclxuXHRcdFx0fVxyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0dGhpcy5fcmVzaXplRGF0YSA9IG51bGw7XHJcblx0XHRcdHRoaXMuX29yaWVudGF0aW9uY2hhbmdlSW5Qcm9ncmVzcyA9IGZhbHNlO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9zdG9wSWdub3JpbmdSZXNpemVFdmVudHM6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5faWdub3JlUmVzaXplVG8gPSAwO1xyXG5cdH0sXHJcblxyXG5cdF9pZ25vcmVSZXNpemVFdmVudHM6IGZ1bmN0aW9uKCkge1xyXG5cdFx0aWYgKCB0aGlzLl9pZ25vcmVSZXNpemVUbyApIHtcclxuXHRcdFx0Y2xlYXJUaW1lb3V0KCB0aGlzLl9pZ25vcmVSZXNpemVUbyApO1xyXG5cdFx0fVxyXG5cdFx0dGhpcy5faWdub3JlUmVzaXplVG8gPSB0aGlzLl9kZWxheSggXCJfc3RvcElnbm9yaW5nUmVzaXplRXZlbnRzXCIsIDEwMDAgKTtcclxuXHR9LFxyXG5cclxuXHRfaGFuZGxlV2luZG93UmVzaXplOiBmdW5jdGlvbigvKiB0aGVFdmVudCAqLykge1xyXG5cdFx0aWYgKCB0aGlzLl9pc09wZW4gJiYgdGhpcy5faWdub3JlUmVzaXplVG8gPT09IDAgKSB7XHJcblx0XHRcdGlmICggKCB0aGlzLl9leHBlY3RSZXNpemVFdmVudCgpIHx8IHRoaXMuX29yaWVudGF0aW9uY2hhbmdlSW5Qcm9ncmVzcyApICYmXHJcblx0XHRcdFx0IXRoaXMuX3VpLmNvbnRhaW5lci5oYXNDbGFzcyggXCJ1aS1wb3B1cC1oaWRkZW5cIiApICkge1xyXG5cdFx0XHRcdC8vIGVmZmVjdGl2ZWx5IHJhcGlkLWNsb3NlIHRoZSBwb3B1cCB3aGlsZSBsZWF2aW5nIHRoZSBzY3JlZW4gaW50YWN0XHJcblx0XHRcdFx0dGhpcy5fdWkuY29udGFpbmVyXHJcblx0XHRcdFx0XHQuYWRkQ2xhc3MoIFwidWktcG9wdXAtaGlkZGVuIHVpLXBvcHVwLXRydW5jYXRlXCIgKVxyXG5cdFx0XHRcdFx0LnJlbW92ZUF0dHIoIFwic3R5bGVcIiApO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X2hhbmRsZVdpbmRvd09yaWVudGF0aW9uY2hhbmdlOiBmdW5jdGlvbigvKiB0aGVFdmVudCAqLykge1xyXG5cdFx0aWYgKCAhdGhpcy5fb3JpZW50YXRpb25jaGFuZ2VJblByb2dyZXNzICYmIHRoaXMuX2lzT3BlbiAmJiB0aGlzLl9pZ25vcmVSZXNpemVUbyA9PT0gMCApIHtcclxuXHRcdFx0dGhpcy5fZXhwZWN0UmVzaXplRXZlbnQoKTtcclxuXHRcdFx0dGhpcy5fb3JpZW50YXRpb25jaGFuZ2VJblByb2dyZXNzID0gdHJ1ZTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHQvLyBXaGVuIHRoZSBwb3B1cCBpcyBvcGVuLCBhdHRlbXB0aW5nIHRvIGZvY3VzIG9uIGFuIGVsZW1lbnQgdGhhdCBpcyBub3QgYVxyXG5cdC8vIGNoaWxkIG9mIHRoZSBwb3B1cCB3aWxsIHJlZGlyZWN0IGZvY3VzIHRvIHRoZSBwb3B1cFxyXG5cdF9oYW5kbGVEb2N1bWVudEZvY3VzSW46IGZ1bmN0aW9uKCB0aGVFdmVudCApIHtcclxuXHRcdHZhciB0YXJnZXQsXHJcblx0XHRcdHRhcmdldEVsZW1lbnQgPSB0aGVFdmVudC50YXJnZXQsXHJcblx0XHRcdHVpID0gdGhpcy5fdWk7XHJcblxyXG5cdFx0aWYgKCAhdGhpcy5faXNPcGVuICkge1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCB0YXJnZXRFbGVtZW50ICE9PSB1aS5jb250YWluZXJbIDAgXSApIHtcclxuXHRcdFx0dGFyZ2V0ID0gJCggdGFyZ2V0RWxlbWVudCApO1xyXG5cdFx0XHRpZiAoICEkLmNvbnRhaW5zKCB1aS5jb250YWluZXJbIDAgXSwgdGFyZ2V0RWxlbWVudCApICkge1xyXG5cdFx0XHRcdCQoIHRoaXMuZG9jdW1lbnRbIDAgXS5hY3RpdmVFbGVtZW50ICkub25lKCBcImZvY3VzXCIsICQucHJveHkoIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0dGhpcy5fc2FmZWx5Qmx1ciggdGFyZ2V0RWxlbWVudCApO1xyXG5cdFx0XHRcdH0sIHRoaXMgKSApO1xyXG5cdFx0XHRcdHVpLmZvY3VzRWxlbWVudC5mb2N1cygpO1xyXG5cdFx0XHRcdHRoZUV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFx0dGhlRXZlbnQuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XHJcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHR9IGVsc2UgaWYgKCB1aS5mb2N1c0VsZW1lbnRbIDAgXSA9PT0gdWkuY29udGFpbmVyWyAwIF0gKSB7XHJcblx0XHRcdFx0dWkuZm9jdXNFbGVtZW50ID0gdGFyZ2V0O1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5faWdub3JlUmVzaXplRXZlbnRzKCk7XHJcblx0fSxcclxuXHJcblx0X3RoZW1lQ2xhc3NGcm9tT3B0aW9uOiBmdW5jdGlvbiggcHJlZml4LCB2YWx1ZSApIHtcclxuXHRcdHJldHVybiAoIHZhbHVlID8gKCB2YWx1ZSA9PT0gXCJub25lXCIgPyBcIlwiIDogKCBwcmVmaXggKyB2YWx1ZSApICkgOiAoIHByZWZpeCArIFwiaW5oZXJpdFwiICkgKTtcclxuXHR9LFxyXG5cclxuXHRfYXBwbHlUcmFuc2l0aW9uOiBmdW5jdGlvbiggdmFsdWUgKSB7XHJcblx0XHRpZiAoIHZhbHVlICkge1xyXG5cdFx0XHR0aGlzLl91aS5jb250YWluZXIucmVtb3ZlQ2xhc3MoIHRoaXMuX2ZhbGxiYWNrVHJhbnNpdGlvbiApO1xyXG5cdFx0XHRpZiAoIHZhbHVlICE9PSBcIm5vbmVcIiApIHtcclxuXHRcdFx0XHR0aGlzLl9mYWxsYmFja1RyYW5zaXRpb24gPSAkLm1vYmlsZS5fbWF5YmVEZWdyYWRlVHJhbnNpdGlvbiggdmFsdWUgKTtcclxuXHRcdFx0XHRpZiAoIHRoaXMuX2ZhbGxiYWNrVHJhbnNpdGlvbiA9PT0gXCJub25lXCIgKSB7XHJcblx0XHRcdFx0XHR0aGlzLl9mYWxsYmFja1RyYW5zaXRpb24gPSBcIlwiO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHR0aGlzLl91aS5jb250YWluZXIuYWRkQ2xhc3MoIHRoaXMuX2ZhbGxiYWNrVHJhbnNpdGlvbiApO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblx0fSxcclxuXHJcblx0X3NldE9wdGlvbnM6IGZ1bmN0aW9uKCBuZXdPcHRpb25zICkge1xyXG5cdFx0dmFyIGN1cnJlbnRPcHRpb25zID0gdGhpcy5vcHRpb25zLFxyXG5cdFx0XHR0aGVFbGVtZW50ID0gdGhpcy5lbGVtZW50LFxyXG5cdFx0XHRzY3JlZW4gPSB0aGlzLl91aS5zY3JlZW47XHJcblxyXG5cdFx0aWYgKCBuZXdPcHRpb25zLndyYXBwZXJDbGFzcyAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHR0aGlzLl91aS5jb250YWluZXJcclxuXHRcdFx0XHQucmVtb3ZlQ2xhc3MoIGN1cnJlbnRPcHRpb25zLndyYXBwZXJDbGFzcyApXHJcblx0XHRcdFx0LmFkZENsYXNzKCBuZXdPcHRpb25zLndyYXBwZXJDbGFzcyApO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggbmV3T3B0aW9ucy50aGVtZSAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHR0aGVFbGVtZW50XHJcblx0XHRcdFx0LnJlbW92ZUNsYXNzKCB0aGlzLl90aGVtZUNsYXNzRnJvbU9wdGlvbiggXCJ1aS1ib2R5LVwiLCBjdXJyZW50T3B0aW9ucy50aGVtZSApIClcclxuXHRcdFx0XHQuYWRkQ2xhc3MoIHRoaXMuX3RoZW1lQ2xhc3NGcm9tT3B0aW9uKCBcInVpLWJvZHktXCIsIG5ld09wdGlvbnMudGhlbWUgKSApO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggbmV3T3B0aW9ucy5vdmVybGF5VGhlbWUgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0c2NyZWVuXHJcblx0XHRcdFx0LnJlbW92ZUNsYXNzKCB0aGlzLl90aGVtZUNsYXNzRnJvbU9wdGlvbiggXCJ1aS1vdmVybGF5LVwiLCBjdXJyZW50T3B0aW9ucy5vdmVybGF5VGhlbWUgKSApXHJcblx0XHRcdFx0LmFkZENsYXNzKCB0aGlzLl90aGVtZUNsYXNzRnJvbU9wdGlvbiggXCJ1aS1vdmVybGF5LVwiLCBuZXdPcHRpb25zLm92ZXJsYXlUaGVtZSApICk7XHJcblxyXG5cdFx0XHRpZiAoIHRoaXMuX2lzT3BlbiApIHtcclxuXHRcdFx0XHRzY3JlZW4uYWRkQ2xhc3MoIFwiaW5cIiApO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBuZXdPcHRpb25zLnNoYWRvdyAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHR0aGVFbGVtZW50LnRvZ2dsZUNsYXNzKCBcInVpLW92ZXJsYXktc2hhZG93XCIsIG5ld09wdGlvbnMuc2hhZG93ICk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBuZXdPcHRpb25zLmNvcm5lcnMgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0dGhlRWxlbWVudC50b2dnbGVDbGFzcyggXCJ1aS1jb3JuZXItYWxsXCIsIG5ld09wdGlvbnMuY29ybmVycyApO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggbmV3T3B0aW9ucy50cmFuc2l0aW9uICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdGlmICggIXRoaXMuX2N1cnJlbnRUcmFuc2l0aW9uICkge1xyXG5cdFx0XHRcdHRoaXMuX2FwcGx5VHJhbnNpdGlvbiggbmV3T3B0aW9ucy50cmFuc2l0aW9uICk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIG5ld09wdGlvbnMudG9sZXJhbmNlICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdHRoaXMuX3NldFRvbGVyYW5jZSggbmV3T3B0aW9ucy50b2xlcmFuY2UgKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIG5ld09wdGlvbnMuZGlzYWJsZWQgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0aWYgKCBuZXdPcHRpb25zLmRpc2FibGVkICkge1xyXG5cdFx0XHRcdHRoaXMuY2xvc2UoKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiB0aGlzLl9zdXBlciggbmV3T3B0aW9ucyApO1xyXG5cdH0sXHJcblxyXG5cdF9zZXRUb2xlcmFuY2U6IGZ1bmN0aW9uKCB2YWx1ZSApIHtcclxuXHRcdHZhciB0b2wgPSB7IHQ6IDMwLCByOiAxNSwgYjogMzAsIGw6IDE1IH0sXHJcblx0XHRcdGFyO1xyXG5cclxuXHRcdGlmICggdmFsdWUgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0YXIgPSBTdHJpbmcoIHZhbHVlICkuc3BsaXQoIFwiLFwiICk7XHJcblxyXG5cdFx0XHQkLmVhY2goIGFyLCBmdW5jdGlvbiggaWR4LCB2YWwgKSB7IGFyWyBpZHggXSA9IHBhcnNlSW50KCB2YWwsIDEwICk7IH0gKTtcclxuXHJcblx0XHRcdHN3aXRjaCggYXIubGVuZ3RoICkge1xyXG5cdFx0XHRcdC8vIEFsbCB2YWx1ZXMgYXJlIHRvIGJlIHRoZSBzYW1lXHJcblx0XHRcdFx0Y2FzZSAxOlxyXG5cdFx0XHRcdFx0aWYgKCAhaXNOYU4oIGFyWyAwIF0gKSApIHtcclxuXHRcdFx0XHRcdFx0dG9sLnQgPSB0b2wuciA9IHRvbC5iID0gdG9sLmwgPSBhclsgMCBdO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblxyXG5cdFx0XHRcdC8vIFRoZSBmaXJzdCB2YWx1ZSBkZW5vdGVzIHRvcC9ib3R0b20gdG9sZXJhbmNlLCBhbmQgdGhlIHNlY29uZCB2YWx1ZSBkZW5vdGVzIGxlZnQvcmlnaHQgdG9sZXJhbmNlXHJcblx0XHRcdFx0Y2FzZSAyOlxyXG5cdFx0XHRcdFx0aWYgKCAhaXNOYU4oIGFyWyAwIF0gKSApIHtcclxuXHRcdFx0XHRcdFx0dG9sLnQgPSB0b2wuYiA9IGFyWyAwIF07XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRpZiAoICFpc05hTiggYXJbIDEgXSApICkge1xyXG5cdFx0XHRcdFx0XHR0b2wubCA9IHRvbC5yID0gYXJbIDEgXTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cclxuXHRcdFx0XHQvLyBUaGUgYXJyYXkgY29udGFpbnMgdmFsdWVzIGluIHRoZSBvcmRlciB0b3AsIHJpZ2h0LCBib3R0b20sIGxlZnRcclxuXHRcdFx0XHRjYXNlIDQ6XHJcblx0XHRcdFx0XHRpZiAoICFpc05hTiggYXJbIDAgXSApICkge1xyXG5cdFx0XHRcdFx0XHR0b2wudCA9IGFyWyAwIF07XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRpZiAoICFpc05hTiggYXJbIDEgXSApICkge1xyXG5cdFx0XHRcdFx0XHR0b2wuciA9IGFyWyAxIF07XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRpZiAoICFpc05hTiggYXJbIDIgXSApICkge1xyXG5cdFx0XHRcdFx0XHR0b2wuYiA9IGFyWyAyIF07XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRpZiAoICFpc05hTiggYXJbIDMgXSApICkge1xyXG5cdFx0XHRcdFx0XHR0b2wubCA9IGFyWyAzIF07XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRicmVhaztcclxuXHJcblx0XHRcdFx0ZGVmYXVsdDpcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5fdG9sZXJhbmNlID0gdG9sO1xyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblx0fSxcclxuXHJcblx0X2NsYW1wUG9wdXBXaWR0aDogZnVuY3Rpb24oIGluZm9Pbmx5ICkge1xyXG5cdFx0dmFyIG1lbnVTaXplLFxyXG5cdFx0XHR3aW5kb3dDb29yZGluYXRlcyA9IGdldFdpbmRvd0Nvb3JkaW5hdGVzKCB0aGlzLndpbmRvdyApLFxyXG5cdFx0XHQvLyByZWN0YW5nbGUgd2l0aGluIHdoaWNoIHRoZSBwb3B1cCBtdXN0IGZpdFxyXG5cdFx0XHRyZWN0YW5nbGUgPSB7XHJcblx0XHRcdFx0eDogdGhpcy5fdG9sZXJhbmNlLmwsXHJcblx0XHRcdFx0eTogd2luZG93Q29vcmRpbmF0ZXMueSArIHRoaXMuX3RvbGVyYW5jZS50LFxyXG5cdFx0XHRcdGN4OiB3aW5kb3dDb29yZGluYXRlcy5jeCAtIHRoaXMuX3RvbGVyYW5jZS5sIC0gdGhpcy5fdG9sZXJhbmNlLnIsXHJcblx0XHRcdFx0Y3k6IHdpbmRvd0Nvb3JkaW5hdGVzLmN5IC0gdGhpcy5fdG9sZXJhbmNlLnQgLSB0aGlzLl90b2xlcmFuY2UuYlxyXG5cdFx0XHR9O1xyXG5cclxuXHRcdGlmICggIWluZm9Pbmx5ICkge1xyXG5cdFx0XHQvLyBDbGFtcCB0aGUgd2lkdGggb2YgdGhlIG1lbnUgYmVmb3JlIGdyYWJiaW5nIGl0cyBzaXplXHJcblx0XHRcdHRoaXMuX3VpLmNvbnRhaW5lci5jc3MoIFwibWF4LXdpZHRoXCIsIHJlY3RhbmdsZS5jeCApO1xyXG5cdFx0fVxyXG5cclxuXHRcdG1lbnVTaXplID0ge1xyXG5cdFx0XHRjeDogdGhpcy5fdWkuY29udGFpbmVyLm91dGVyV2lkdGgoIHRydWUgKSxcclxuXHRcdFx0Y3k6IHRoaXMuX3VpLmNvbnRhaW5lci5vdXRlckhlaWdodCggdHJ1ZSApXHJcblx0XHR9O1xyXG5cclxuXHRcdHJldHVybiB7IHJjOiByZWN0YW5nbGUsIG1lbnVTaXplOiBtZW51U2l6ZSB9O1xyXG5cdH0sXHJcblxyXG5cdF9jYWxjdWxhdGVGaW5hbExvY2F0aW9uOiBmdW5jdGlvbiggZGVzaXJlZCwgY2xhbXBJbmZvICkge1xyXG5cdFx0dmFyIHJldHVyblZhbHVlLFxyXG5cdFx0XHRyZWN0YW5nbGUgPSBjbGFtcEluZm8ucmMsXHJcblx0XHRcdG1lbnVTaXplID0gY2xhbXBJbmZvLm1lbnVTaXplO1xyXG5cclxuXHRcdC8vIENlbnRlciB0aGUgbWVudSBvdmVyIHRoZSBkZXNpcmVkIGNvb3JkaW5hdGVzLCB3aGlsZSBub3QgZ29pbmcgb3V0c2lkZVxyXG5cdFx0Ly8gdGhlIHdpbmRvdyB0b2xlcmFuY2VzLiBUaGlzIHdpbGwgY2VudGVyIHdydC4gdGhlIHdpbmRvdyBpZiB0aGUgcG9wdXAgaXNcclxuXHRcdC8vIHRvbyBsYXJnZS5cclxuXHRcdHJldHVyblZhbHVlID0ge1xyXG5cdFx0XHRsZWZ0OiBmaXRTZWdtZW50SW5zaWRlU2VnbWVudCggcmVjdGFuZ2xlLmN4LCBtZW51U2l6ZS5jeCwgcmVjdGFuZ2xlLngsIGRlc2lyZWQueCApLFxyXG5cdFx0XHR0b3A6IGZpdFNlZ21lbnRJbnNpZGVTZWdtZW50KCByZWN0YW5nbGUuY3ksIG1lbnVTaXplLmN5LCByZWN0YW5nbGUueSwgZGVzaXJlZC55IClcclxuXHRcdH07XHJcblxyXG5cdFx0Ly8gTWFrZSBzdXJlIHRoZSB0b3Agb2YgdGhlIG1lbnUgaXMgdmlzaWJsZVxyXG5cdFx0cmV0dXJuVmFsdWUudG9wID0gTWF0aC5tYXgoIDAsIHJldHVyblZhbHVlLnRvcCApO1xyXG5cclxuXHRcdC8vIElmIHRoZSBoZWlnaHQgb2YgdGhlIG1lbnUgaXMgc21hbGxlciB0aGFuIHRoZSBoZWlnaHQgb2YgdGhlIGRvY3VtZW50XHJcblx0XHQvLyBhbGlnbiB0aGUgYm90dG9tIHdpdGggdGhlIGJvdHRvbSBvZiB0aGUgZG9jdW1lbnRcclxuXHJcblx0XHRyZXR1cm5WYWx1ZS50b3AgLT0gTWF0aC5taW4oIHJldHVyblZhbHVlLnRvcCxcclxuXHRcdFx0TWF0aC5tYXgoIDAsIHJldHVyblZhbHVlLnRvcCArIG1lbnVTaXplLmN5IC0gdGhpcy5kb2N1bWVudC5oZWlnaHQoKSApICk7XHJcblxyXG5cdFx0cmV0dXJuIHJldHVyblZhbHVlO1xyXG5cdH0sXHJcblxyXG5cdC8vIFRyeSBhbmQgY2VudGVyIHRoZSBvdmVybGF5IG92ZXIgdGhlIGdpdmVuIGNvb3JkaW5hdGVzXHJcblx0X3BsYWNlbWVudENvb3JkczogZnVuY3Rpb24oIGRlc2lyZWQgKSB7XHJcblx0XHRyZXR1cm4gdGhpcy5fY2FsY3VsYXRlRmluYWxMb2NhdGlvbiggZGVzaXJlZCwgdGhpcy5fY2xhbXBQb3B1cFdpZHRoKCkgKTtcclxuXHR9LFxyXG5cclxuXHRfY3JlYXRlUHJlcmVxdWlzaXRlczogZnVuY3Rpb24oIHNjcmVlblByZXJlcXVpc2l0ZSwgY29udGFpbmVyUHJlcmVxdWlzaXRlLCB3aGVuRG9uZSApIHtcclxuXHRcdHZhciBwcmVyZXF1aXNpdGVzLFxyXG5cdFx0XHRzZWxmID0gdGhpcztcclxuXHJcblx0XHQvLyBJdCBpcyBpbXBvcnRhbnQgdG8gbWFpbnRhaW4gYm90aCB0aGUgbG9jYWwgdmFyaWFibGUgcHJlcmVxdWlzaXRlcyBhbmRcclxuXHRcdC8vIHNlbGYuX3ByZXJlcXVpc2l0ZXMuIFRoZSBsb2NhbCB2YXJpYWJsZSByZW1haW5zIGluIHRoZSBjbG9zdXJlIG9mIHRoZVxyXG5cdFx0Ly8gZnVuY3Rpb25zIHdoaWNoIGNhbGwgdGhlIGNhbGxiYWNrcyBwYXNzZWQgaW4uIFRoZSBjb21wYXJpc29uIGJldHdlZW4gdGhlXHJcblx0XHQvLyBsb2NhbCB2YXJpYWJsZSBhbmQgc2VsZi5fcHJlcmVxdWlzaXRlcyBpcyBuZWNlc3NhcnksIGJlY2F1c2Ugb25jZSBhXHJcblx0XHQvLyBmdW5jdGlvbiBoYXMgYmVlbiBwYXNzZWQgdG8gLmFuaW1hdGlvbkNvbXBsZXRlKCkgaXQgd2lsbCBiZSBjYWxsZWQgbmV4dFxyXG5cdFx0Ly8gdGltZSBhbiBhbmltYXRpb24gY29tcGxldGVzLCBldmVuIGlmIHRoYXQncyBub3QgdGhlIGFuaW1hdGlvbiB3aG9zZSBlbmRcclxuXHRcdC8vIHRoZSBmdW5jdGlvbiB3YXMgc3VwcG9zZWQgdG8gY2F0Y2ggKGZvciBleGFtcGxlLCBpZiBhbiBhYm9ydCBoYXBwZW5zXHJcblx0XHQvLyBkdXJpbmcgdGhlIG9wZW5pbmcgYW5pbWF0aW9uLCB0aGUgLmFuaW1hdGlvbkNvbXBsZXRlIGhhbmRsZXIgaXMgbm90XHJcblx0XHQvLyBjYWxsZWQgZm9yIHRoYXQgYW5pbWF0aW9uIGFueW1vcmUsIGJ1dCB0aGUgaGFuZGxlciByZW1haW5zIGF0dGFjaGVkLCBzb1xyXG5cdFx0Ly8gaXQgaXMgY2FsbGVkIHRoZSBuZXh0IHRpbWUgdGhlIHBvcHVwIGlzIG9wZW5lZCAtIG1ha2luZyBpdCBzdGFsZS5cclxuXHRcdC8vIENvbXBhcmluZyB0aGUgbG9jYWwgdmFyaWFibGUgcHJlcmVxdWlzaXRlcyB0byB0aGUgd2lkZ2V0LWxldmVsIHZhcmlhYmxlXHJcblx0XHQvLyBzZWxmLl9wcmVyZXF1aXNpdGVzIGVuc3VyZXMgdGhhdCBjYWxsYmFja3MgdHJpZ2dlcmVkIGJ5IGEgc3RhbGVcclxuXHRcdC8vIC5hbmltYXRpb25Db21wbGV0ZSB3aWxsIGJlIGlnbm9yZWQuXHJcblxyXG5cdFx0cHJlcmVxdWlzaXRlcyA9IHtcclxuXHRcdFx0c2NyZWVuOiAkLkRlZmVycmVkKCksXHJcblx0XHRcdGNvbnRhaW5lcjogJC5EZWZlcnJlZCgpXHJcblx0XHR9O1xyXG5cclxuXHRcdHByZXJlcXVpc2l0ZXMuc2NyZWVuLnRoZW4oIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRpZiAoIHByZXJlcXVpc2l0ZXMgPT09IHNlbGYuX3ByZXJlcXVpc2l0ZXMgKSB7XHJcblx0XHRcdFx0c2NyZWVuUHJlcmVxdWlzaXRlKCk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cclxuXHRcdHByZXJlcXVpc2l0ZXMuY29udGFpbmVyLnRoZW4oIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRpZiAoIHByZXJlcXVpc2l0ZXMgPT09IHNlbGYuX3ByZXJlcXVpc2l0ZXMgKSB7XHJcblx0XHRcdFx0Y29udGFpbmVyUHJlcmVxdWlzaXRlKCk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cclxuXHRcdCQud2hlbiggcHJlcmVxdWlzaXRlcy5zY3JlZW4sIHByZXJlcXVpc2l0ZXMuY29udGFpbmVyICkuZG9uZSggZnVuY3Rpb24oKSB7XHJcblx0XHRcdGlmICggcHJlcmVxdWlzaXRlcyA9PT0gc2VsZi5fcHJlcmVxdWlzaXRlcyApIHtcclxuXHRcdFx0XHRzZWxmLl9wcmVyZXF1aXNpdGVzID0gbnVsbDtcclxuXHRcdFx0XHR3aGVuRG9uZSgpO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHJcblx0XHRzZWxmLl9wcmVyZXF1aXNpdGVzID0gcHJlcmVxdWlzaXRlcztcclxuXHR9LFxyXG5cclxuXHRfYW5pbWF0ZTogZnVuY3Rpb24oIGFyZ3MgKSB7XHJcblx0XHQvLyBOT1RFIGJlZm9yZSByZW1vdmluZyB0aGUgZGVmYXVsdCBhbmltYXRpb24gb2YgdGhlIHNjcmVlblxyXG5cdFx0Ly8gICAgICB0aGlzIGhhZCBhbiBhbmltYXRlIGNhbGxiYWNrIHRoYXQgd291bGQgcmVzb2x2ZSB0aGUgZGVmZXJyZWRcclxuXHRcdC8vICAgICAgbm93IHRoZSBkZWZlcnJlZCBpcyByZXNvbHZlZCBpbW1lZGlhdGVseVxyXG5cdFx0Ly8gVE9ETyByZW1vdmUgdGhlIGRlcGVuZGVuY3kgb24gdGhlIHNjcmVlbiBkZWZlcnJlZFxyXG5cdFx0dGhpcy5fdWkuc2NyZWVuXHJcblx0XHRcdC5yZW1vdmVDbGFzcyggYXJncy5jbGFzc1RvUmVtb3ZlIClcclxuXHRcdFx0LmFkZENsYXNzKCBhcmdzLnNjcmVlbkNsYXNzVG9BZGQgKTtcclxuXHJcblx0XHRhcmdzLnByZXJlcXVpc2l0ZXMuc2NyZWVuLnJlc29sdmUoKTtcclxuXHJcblx0XHRpZiAoIGFyZ3MudHJhbnNpdGlvbiAmJiBhcmdzLnRyYW5zaXRpb24gIT09IFwibm9uZVwiICkge1xyXG5cdFx0XHRpZiAoIGFyZ3MuYXBwbHlUcmFuc2l0aW9uICkge1xyXG5cdFx0XHRcdHRoaXMuX2FwcGx5VHJhbnNpdGlvbiggYXJncy50cmFuc2l0aW9uICk7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKCB0aGlzLl9mYWxsYmFja1RyYW5zaXRpb24gKSB7XHJcblx0XHRcdFx0dGhpcy5fdWkuY29udGFpbmVyXHJcblx0XHRcdFx0XHQuYWRkQ2xhc3MoIGFyZ3MuY29udGFpbmVyQ2xhc3NUb0FkZCApXHJcblx0XHRcdFx0XHQucmVtb3ZlQ2xhc3MoIGFyZ3MuY2xhc3NUb1JlbW92ZSApXHJcblx0XHRcdFx0XHQuYW5pbWF0aW9uQ29tcGxldGUoICQucHJveHkoIGFyZ3MucHJlcmVxdWlzaXRlcy5jb250YWluZXIsIFwicmVzb2x2ZVwiICkgKTtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdHRoaXMuX3VpLmNvbnRhaW5lci5yZW1vdmVDbGFzcyggYXJncy5jbGFzc1RvUmVtb3ZlICk7XHJcblx0XHRhcmdzLnByZXJlcXVpc2l0ZXMuY29udGFpbmVyLnJlc29sdmUoKTtcclxuXHR9LFxyXG5cclxuXHQvLyBUaGUgZGVzaXJlZCBjb29yZGluYXRlcyBwYXNzZWQgaW4gd2lsbCBiZSByZXR1cm5lZCB1bnRvdWNoZWQgaWYgbm8gcmVmZXJlbmNlIGVsZW1lbnQgY2FuIGJlIGlkZW50aWZpZWQgdmlhXHJcblx0Ly8gZGVzaXJlZFBvc2l0aW9uLnBvc2l0aW9uVG8uIE5ldmVydGhlbGVzcywgdGhpcyBmdW5jdGlvbiBlbnN1cmVzIHRoYXQgaXRzIHJldHVybiB2YWx1ZSBhbHdheXMgY29udGFpbnMgdmFsaWRcclxuXHQvLyB4IGFuZCB5IGNvb3JkaW5hdGVzIGJ5IHNwZWNpZnlpbmcgdGhlIGNlbnRlciBtaWRkbGUgb2YgdGhlIHdpbmRvdyBpZiB0aGUgY29vcmRpbmF0ZXMgYXJlIGFic2VudC5cclxuXHQvLyBvcHRpb25zOiB7IHg6IGNvb3JkaW5hdGUsIHk6IGNvb3JkaW5hdGUsIHBvc2l0aW9uVG86IHN0cmluZzogXCJvcmlnaW5cIiwgXCJ3aW5kb3dcIiwgb3IgalF1ZXJ5IHNlbGVjdG9yXHJcblx0X2Rlc2lyZWRDb29yZHM6IGZ1bmN0aW9uKCBvcGVuT3B0aW9ucyApIHtcclxuXHRcdHZhciBvZmZzZXQsXHJcblx0XHRcdGRzdCA9IG51bGwsXHJcblx0XHRcdHdpbmRvd0Nvb3JkaW5hdGVzID0gZ2V0V2luZG93Q29vcmRpbmF0ZXMoIHRoaXMud2luZG93ICksXHJcblx0XHRcdHggPSBvcGVuT3B0aW9ucy54LFxyXG5cdFx0XHR5ID0gb3Blbk9wdGlvbnMueSxcclxuXHRcdFx0cFRvID0gb3Blbk9wdGlvbnMucG9zaXRpb25UbztcclxuXHJcblx0XHQvLyBFc3RhYmxpc2ggd2hpY2ggZWxlbWVudCB3aWxsIHNlcnZlIGFzIHRoZSByZWZlcmVuY2VcclxuXHRcdGlmICggcFRvICYmIHBUbyAhPT0gXCJvcmlnaW5cIiApIHtcclxuXHRcdFx0aWYgKCBwVG8gPT09IFwid2luZG93XCIgKSB7XHJcblx0XHRcdFx0eCA9IHdpbmRvd0Nvb3JkaW5hdGVzLmN4IC8gMiArIHdpbmRvd0Nvb3JkaW5hdGVzLng7XHJcblx0XHRcdFx0eSA9IHdpbmRvd0Nvb3JkaW5hdGVzLmN5IC8gMiArIHdpbmRvd0Nvb3JkaW5hdGVzLnk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0dHJ5IHtcclxuXHRcdFx0XHRcdGRzdCA9ICQoIHBUbyApO1xyXG5cdFx0XHRcdH0gY2F0Y2goIGVyciApIHtcclxuXHRcdFx0XHRcdGRzdCA9IG51bGw7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGlmICggZHN0ICkge1xyXG5cdFx0XHRcdFx0ZHN0LmZpbHRlciggXCI6dmlzaWJsZVwiICk7XHJcblx0XHRcdFx0XHRpZiAoIGRzdC5sZW5ndGggPT09IDAgKSB7XHJcblx0XHRcdFx0XHRcdGRzdCA9IG51bGw7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gSWYgYW4gZWxlbWVudCB3YXMgZm91bmQsIGNlbnRlciBvdmVyIGl0XHJcblx0XHRpZiAoIGRzdCApIHtcclxuXHRcdFx0b2Zmc2V0ID0gZHN0Lm9mZnNldCgpO1xyXG5cdFx0XHR4ID0gb2Zmc2V0LmxlZnQgKyBkc3Qub3V0ZXJXaWR0aCgpIC8gMjtcclxuXHRcdFx0eSA9IG9mZnNldC50b3AgKyBkc3Qub3V0ZXJIZWlnaHQoKSAvIDI7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gTWFrZSBzdXJlIHggYW5kIHkgYXJlIHZhbGlkIG51bWJlcnMgLSBjZW50ZXIgb3ZlciB0aGUgd2luZG93XHJcblx0XHRpZiAoICQudHlwZSggeCApICE9PSBcIm51bWJlclwiIHx8IGlzTmFOKCB4ICkgKSB7XHJcblx0XHRcdHggPSB3aW5kb3dDb29yZGluYXRlcy5jeCAvIDIgKyB3aW5kb3dDb29yZGluYXRlcy54O1xyXG5cdFx0fVxyXG5cdFx0aWYgKCAkLnR5cGUoIHkgKSAhPT0gXCJudW1iZXJcIiB8fCBpc05hTiggeSApICkge1xyXG5cdFx0XHR5ID0gd2luZG93Q29vcmRpbmF0ZXMuY3kgLyAyICsgd2luZG93Q29vcmRpbmF0ZXMueTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4geyB4OiB4LCB5OiB5IH07XHJcblx0fSxcclxuXHJcblx0X3JlcG9zaXRpb246IGZ1bmN0aW9uKCBvcGVuT3B0aW9ucyApIHtcclxuXHRcdC8vIFdlIG9ubHkgY2FyZSBhYm91dCBwb3NpdGlvbi1yZWxhdGVkIHBhcmFtZXRlcnMgZm9yIHJlcG9zaXRpb25pbmdcclxuXHRcdG9wZW5PcHRpb25zID0ge1xyXG5cdFx0XHR4OiBvcGVuT3B0aW9ucy54LFxyXG5cdFx0XHR5OiBvcGVuT3B0aW9ucy55LFxyXG5cdFx0XHRwb3NpdGlvblRvOiBvcGVuT3B0aW9ucy5wb3NpdGlvblRvXHJcblx0XHR9O1xyXG5cdFx0dGhpcy5fdHJpZ2dlciggXCJiZWZvcmVwb3NpdGlvblwiLCB1bmRlZmluZWQsIG9wZW5PcHRpb25zICk7XHJcblx0XHR0aGlzLl91aS5jb250YWluZXIub2Zmc2V0KCB0aGlzLl9wbGFjZW1lbnRDb29yZHMoIHRoaXMuX2Rlc2lyZWRDb29yZHMoIG9wZW5PcHRpb25zICkgKSApO1xyXG5cdH0sXHJcblxyXG5cdHJlcG9zaXRpb246IGZ1bmN0aW9uKCBvcGVuT3B0aW9ucyApIHtcclxuXHRcdGlmICggdGhpcy5faXNPcGVuICkge1xyXG5cdFx0XHR0aGlzLl9yZXBvc2l0aW9uKCBvcGVuT3B0aW9ucyApO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9zYWZlbHlCbHVyOiBmdW5jdGlvbiggY3VycmVudEVsZW1lbnQgKXtcclxuXHRcdGlmICggY3VycmVudEVsZW1lbnQgIT09IHRoaXMud2luZG93WyAwIF0gJiZcclxuXHRcdFx0Y3VycmVudEVsZW1lbnQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSAhPT0gXCJib2R5XCIgKSB7XHJcblx0XHRcdFx0JCggY3VycmVudEVsZW1lbnQgKS5ibHVyKCk7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X29wZW5QcmVyZXF1aXNpdGVzQ29tcGxldGU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIGlkID0gdGhpcy5lbGVtZW50LmF0dHIoIFwiaWRcIiApLFxyXG5cdFx0XHRmaXJzdEZvY3VzID0gdGhpcy5fdWkuY29udGFpbmVyLmZpbmQoIFwiOmZvY3VzYWJsZVwiICkuZmlyc3QoKTtcclxuXHJcblx0XHR0aGlzLl91aS5jb250YWluZXIuYWRkQ2xhc3MoIFwidWktcG9wdXAtYWN0aXZlXCIgKTtcclxuXHRcdHRoaXMuX2lzT3BlbiA9IHRydWU7XHJcblx0XHR0aGlzLl9yZXNpemVTY3JlZW4oKTtcclxuXHJcblx0XHQvLyBDaGVjayB0byBzZWUgaWYgY3VyckVsZW1lbnQgaXMgbm90IGEgY2hpbGQgb2YgdGhlIGNvbnRhaW5lci4gIElmIGl0J3Mgbm90LCBibHVyXHJcblx0XHRpZiAoICEkLmNvbnRhaW5zKCB0aGlzLl91aS5jb250YWluZXJbIDAgXSwgdGhpcy5kb2N1bWVudFsgMCBdLmFjdGl2ZUVsZW1lbnQgKSApIHtcclxuXHRcdFx0dGhpcy5fc2FmZWx5Qmx1ciggdGhpcy5kb2N1bWVudFsgMCBdLmFjdGl2ZUVsZW1lbnQgKTtcclxuXHRcdH1cclxuXHRcdGlmICggZmlyc3RGb2N1cy5sZW5ndGggPiAwICkge1xyXG5cdFx0XHR0aGlzLl91aS5mb2N1c0VsZW1lbnQgPSBmaXJzdEZvY3VzO1xyXG5cdFx0fVxyXG5cdFx0dGhpcy5faWdub3JlUmVzaXplRXZlbnRzKCk7XHJcblx0XHRpZiAoIGlkICkge1xyXG5cdFx0XHR0aGlzLmRvY3VtZW50LmZpbmQoIFwiW2FyaWEtaGFzcG9wdXA9J3RydWUnXVthcmlhLW93bnM9J1wiICsgIGlkICsgXCInXVwiICkuYXR0ciggXCJhcmlhLWV4cGFuZGVkXCIsIHRydWUgKTtcclxuXHRcdH1cclxuXHRcdHRoaXMuX3RyaWdnZXIoIFwiYWZ0ZXJvcGVuXCIgKTtcclxuXHR9LFxyXG5cclxuXHRfb3BlbjogZnVuY3Rpb24oIG9wdGlvbnMgKSB7XHJcblx0XHR2YXIgb3Blbk9wdGlvbnMgPSAkLmV4dGVuZCgge30sIHRoaXMub3B0aW9ucywgb3B0aW9ucyApLFxyXG5cdFx0XHQvLyBUT0RPIG1vdmUgYmxhY2tsaXN0IHRvIHByaXZhdGUgbWV0aG9kXHJcblx0XHRcdGFuZHJvaWRCbGFja2xpc3QgPSAoIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHZhciB1YSA9IG5hdmlnYXRvci51c2VyQWdlbnQsXHJcblx0XHRcdFx0XHQvLyBSZW5kZXJpbmcgZW5naW5lIGlzIFdlYmtpdCwgYW5kIGNhcHR1cmUgbWFqb3IgdmVyc2lvblxyXG5cdFx0XHRcdFx0d2ttYXRjaCA9IHVhLm1hdGNoKCAvQXBwbGVXZWJLaXRcXC8oWzAtOVxcLl0rKS8gKSxcclxuXHRcdFx0XHRcdHdrdmVyc2lvbiA9ICEhd2ttYXRjaCAmJiB3a21hdGNoWyAxIF0sXHJcblx0XHRcdFx0XHRhbmRyb2lkbWF0Y2ggPSB1YS5tYXRjaCggL0FuZHJvaWQgKFxcZCsoPzpcXC5cXGQrKSkvICksXHJcblx0XHRcdFx0XHRhbmR2ZXJzaW9uID0gISFhbmRyb2lkbWF0Y2ggJiYgYW5kcm9pZG1hdGNoWyAxIF0sXHJcblx0XHRcdFx0XHRjaHJvbWVtYXRjaCA9IHVhLmluZGV4T2YoIFwiQ2hyb21lXCIgKSA+IC0xO1xyXG5cclxuXHRcdFx0XHQvLyBQbGF0Zm9ybSBpcyBBbmRyb2lkLCBXZWJLaXQgdmVyc2lvbiBpcyBncmVhdGVyIHRoYW4gNTM0LjEzICggQW5kcm9pZCAzLjIuMSApIGFuZCBub3QgQ2hyb21lLlxyXG5cdFx0XHRcdGlmICggYW5kcm9pZG1hdGNoICE9PSBudWxsICYmIGFuZHZlcnNpb24gPT09IFwiNC4wXCIgJiYgd2t2ZXJzaW9uICYmIHdrdmVyc2lvbiA+IDUzNC4xMyAmJiAhY2hyb21lbWF0Y2ggKSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHR9KCkpO1xyXG5cclxuXHRcdC8vIENvdW50IGRvd24gdG8gdHJpZ2dlcmluZyBcInBvcHVwYWZ0ZXJvcGVuXCIgLSB3ZSBoYXZlIHR3byBwcmVyZXF1aXNpdGVzOlxyXG5cdFx0Ly8gMS4gVGhlIHBvcHVwIHdpbmRvdyBhbmltYXRpb24gY29tcGxldGVzIChjb250YWluZXIoKSlcclxuXHRcdC8vIDIuIFRoZSBzY3JlZW4gb3BhY2l0eSBhbmltYXRpb24gY29tcGxldGVzIChzY3JlZW4oKSlcclxuXHRcdHRoaXMuX2NyZWF0ZVByZXJlcXVpc2l0ZXMoXHJcblx0XHRcdCQubm9vcCxcclxuXHRcdFx0JC5ub29wLFxyXG5cdFx0XHQkLnByb3h5KCB0aGlzLCBcIl9vcGVuUHJlcmVxdWlzaXRlc0NvbXBsZXRlXCIgKSApO1xyXG5cclxuXHRcdHRoaXMuX2N1cnJlbnRUcmFuc2l0aW9uID0gb3Blbk9wdGlvbnMudHJhbnNpdGlvbjtcclxuXHRcdHRoaXMuX2FwcGx5VHJhbnNpdGlvbiggb3Blbk9wdGlvbnMudHJhbnNpdGlvbiApO1xyXG5cclxuXHRcdHRoaXMuX3VpLnNjcmVlbi5yZW1vdmVDbGFzcyggXCJ1aS1zY3JlZW4taGlkZGVuXCIgKTtcclxuXHRcdHRoaXMuX3VpLmNvbnRhaW5lci5yZW1vdmVDbGFzcyggXCJ1aS1wb3B1cC10cnVuY2F0ZVwiICk7XHJcblxyXG5cdFx0Ly8gR2l2ZSBhcHBsaWNhdGlvbnMgYSBjaGFuY2UgdG8gbW9kaWZ5IHRoZSBjb250ZW50cyBvZiB0aGUgY29udGFpbmVyIGJlZm9yZSBpdCBhcHBlYXJzXHJcblx0XHR0aGlzLl9yZXBvc2l0aW9uKCBvcGVuT3B0aW9ucyApO1xyXG5cclxuXHRcdHRoaXMuX3VpLmNvbnRhaW5lci5yZW1vdmVDbGFzcyggXCJ1aS1wb3B1cC1oaWRkZW5cIiApO1xyXG5cclxuXHRcdGlmICggdGhpcy5vcHRpb25zLm92ZXJsYXlUaGVtZSAmJiBhbmRyb2lkQmxhY2tsaXN0ICkge1xyXG5cdFx0XHQvKiBUT0RPOiBUaGUgbmF0aXZlIGJyb3dzZXIgb24gQW5kcm9pZCA0LjAuWCAoXCJJY2UgQ3JlYW0gU2FuZHdpY2hcIikgc3VmZmVycyBmcm9tIGFuIGlzc3VlIHdoZXJlIHRoZSBwb3B1cCBvdmVybGF5IGFwcGVhcnMgdG8gYmUgei1pbmRleGVkIGFib3ZlIHRoZSBwb3B1cCBpdHNlbGYgd2hlbiBjZXJ0YWluIG90aGVyIHN0eWxlcyBleGlzdCBvbiB0aGUgc2FtZSBwYWdlIC0tIG5hbWVseSwgYW55IGVsZW1lbnQgc2V0IHRvIGBwb3NpdGlvbjogZml4ZWRgIGFuZCBjZXJ0YWluIHR5cGVzIG9mIGlucHV0LiBUaGVzZSBpc3N1ZXMgYXJlIHJlbWluaXNjZW50IG9mIHByZXZpb3VzbHkgdW5jb3ZlcmVkIGJ1Z3MgaW4gb2xkZXIgdmVyc2lvbnMgb2YgQW5kcm9pZCdzIG5hdGl2ZSBicm93c2VyOiBodHRwczovL2dpdGh1Yi5jb20vc2NvdHRqZWhsL0RldmljZS1CdWdzL2lzc3Vlcy8zXHJcblx0XHRcdFRoaXMgZml4IGNsb3NlcyB0aGUgZm9sbG93aW5nIGJ1Z3MgKCBJIHVzZSBcImNsb3Nlc1wiIHdpdGggcmVsdWN0YW5jZSwgYW5kIHN0cmVzcyB0aGF0IHRoaXMgaXNzdWUgc2hvdWxkIGJlIHJldmlzaXRlZCBhcyBzb29uIGFzIHBvc3NpYmxlICk6XHJcblx0XHRcdGh0dHBzOi8vZ2l0aHViLmNvbS9qcXVlcnkvanF1ZXJ5LW1vYmlsZS9pc3N1ZXMvNDgxNlxyXG5cdFx0XHRodHRwczovL2dpdGh1Yi5jb20vanF1ZXJ5L2pxdWVyeS1tb2JpbGUvaXNzdWVzLzQ4NDRcclxuXHRcdFx0aHR0cHM6Ly9naXRodWIuY29tL2pxdWVyeS9qcXVlcnktbW9iaWxlL2lzc3Vlcy80ODc0XHJcblx0XHRcdCovXHJcblxyXG5cdFx0XHQvLyBUT0RPIHNvcnQgb3V0IHdoeSB0aGlzLl9wYWdlIGlzbid0IHdvcmtpbmdcclxuXHRcdFx0dGhpcy5lbGVtZW50LmNsb3Nlc3QoIFwiLnVpLXBhZ2VcIiApLmFkZENsYXNzKCBcInVpLXBvcHVwLW9wZW5cIiApO1xyXG5cdFx0fVxyXG5cdFx0dGhpcy5fYW5pbWF0ZSh7XHJcblx0XHRcdGFkZGl0aW9uYWxDb25kaXRpb246IHRydWUsXHJcblx0XHRcdHRyYW5zaXRpb246IG9wZW5PcHRpb25zLnRyYW5zaXRpb24sXHJcblx0XHRcdGNsYXNzVG9SZW1vdmU6IFwiXCIsXHJcblx0XHRcdHNjcmVlbkNsYXNzVG9BZGQ6IFwiaW5cIixcclxuXHRcdFx0Y29udGFpbmVyQ2xhc3NUb0FkZDogXCJpblwiLFxyXG5cdFx0XHRhcHBseVRyYW5zaXRpb246IGZhbHNlLFxyXG5cdFx0XHRwcmVyZXF1aXNpdGVzOiB0aGlzLl9wcmVyZXF1aXNpdGVzXHJcblx0XHR9KTtcclxuXHR9LFxyXG5cclxuXHRfY2xvc2VQcmVyZXF1aXNpdGVTY3JlZW46IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5fdWkuc2NyZWVuXHJcblx0XHRcdC5yZW1vdmVDbGFzcyggXCJvdXRcIiApXHJcblx0XHRcdC5hZGRDbGFzcyggXCJ1aS1zY3JlZW4taGlkZGVuXCIgKTtcclxuXHR9LFxyXG5cclxuXHRfY2xvc2VQcmVyZXF1aXNpdGVDb250YWluZXI6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5fdWkuY29udGFpbmVyXHJcblx0XHRcdC5yZW1vdmVDbGFzcyggXCJyZXZlcnNlIG91dFwiIClcclxuXHRcdFx0LmFkZENsYXNzKCBcInVpLXBvcHVwLWhpZGRlbiB1aS1wb3B1cC10cnVuY2F0ZVwiIClcclxuXHRcdFx0LnJlbW92ZUF0dHIoIFwic3R5bGVcIiApO1xyXG5cdH0sXHJcblxyXG5cdF9jbG9zZVByZXJlcXVpc2l0ZXNEb25lOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBjb250YWluZXIgPSB0aGlzLl91aS5jb250YWluZXIsXHJcblx0XHRcdGlkID0gdGhpcy5lbGVtZW50LmF0dHIoIFwiaWRcIiApO1xyXG5cclxuXHRcdC8vIHJlbW92ZSB0aGUgZ2xvYmFsIG11dGV4IGZvciBwb3B1cHNcclxuXHRcdCQubW9iaWxlLnBvcHVwLmFjdGl2ZSA9IHVuZGVmaW5lZDtcclxuXHJcblx0XHQvLyBCbHVyIGVsZW1lbnRzIGluc2lkZSB0aGUgY29udGFpbmVyLCBpbmNsdWRpbmcgdGhlIGNvbnRhaW5lclxyXG5cdFx0JCggXCI6Zm9jdXNcIiwgY29udGFpbmVyWyAwIF0gKS5hZGQoIGNvbnRhaW5lclsgMCBdICkuYmx1cigpO1xyXG5cclxuXHRcdGlmICggaWQgKSB7XHJcblx0XHRcdHRoaXMuZG9jdW1lbnQuZmluZCggXCJbYXJpYS1oYXNwb3B1cD0ndHJ1ZSddW2FyaWEtb3ducz0nXCIgKyAgaWQgKyBcIiddXCIgKS5hdHRyKCBcImFyaWEtZXhwYW5kZWRcIiwgZmFsc2UgKTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBhbGVydCB1c2VycyB0aGF0IHRoZSBwb3B1cCBpcyBjbG9zZWRcclxuXHRcdHRoaXMuX3RyaWdnZXIoIFwiYWZ0ZXJjbG9zZVwiICk7XHJcblx0fSxcclxuXHJcblx0X2Nsb3NlOiBmdW5jdGlvbiggaW1tZWRpYXRlICkge1xyXG5cdFx0dGhpcy5fdWkuY29udGFpbmVyLnJlbW92ZUNsYXNzKCBcInVpLXBvcHVwLWFjdGl2ZVwiICk7XHJcblx0XHR0aGlzLl9wYWdlLnJlbW92ZUNsYXNzKCBcInVpLXBvcHVwLW9wZW5cIiApO1xyXG5cclxuXHRcdHRoaXMuX2lzT3BlbiA9IGZhbHNlO1xyXG5cclxuXHRcdC8vIENvdW50IGRvd24gdG8gdHJpZ2dlcmluZyBcInBvcHVwYWZ0ZXJjbG9zZVwiIC0gd2UgaGF2ZSB0d28gcHJlcmVxdWlzaXRlczpcclxuXHRcdC8vIDEuIFRoZSBwb3B1cCB3aW5kb3cgcmV2ZXJzZSBhbmltYXRpb24gY29tcGxldGVzIChjb250YWluZXIoKSlcclxuXHRcdC8vIDIuIFRoZSBzY3JlZW4gb3BhY2l0eSBhbmltYXRpb24gY29tcGxldGVzIChzY3JlZW4oKSlcclxuXHRcdHRoaXMuX2NyZWF0ZVByZXJlcXVpc2l0ZXMoXHJcblx0XHRcdCQucHJveHkoIHRoaXMsIFwiX2Nsb3NlUHJlcmVxdWlzaXRlU2NyZWVuXCIgKSxcclxuXHRcdFx0JC5wcm94eSggdGhpcywgXCJfY2xvc2VQcmVyZXF1aXNpdGVDb250YWluZXJcIiApLFxyXG5cdFx0XHQkLnByb3h5KCB0aGlzLCBcIl9jbG9zZVByZXJlcXVpc2l0ZXNEb25lXCIgKSApO1xyXG5cclxuXHRcdHRoaXMuX2FuaW1hdGUoIHtcclxuXHRcdFx0YWRkaXRpb25hbENvbmRpdGlvbjogdGhpcy5fdWkuc2NyZWVuLmhhc0NsYXNzKCBcImluXCIgKSxcclxuXHRcdFx0dHJhbnNpdGlvbjogKCBpbW1lZGlhdGUgPyBcIm5vbmVcIiA6ICggdGhpcy5fY3VycmVudFRyYW5zaXRpb24gKSApLFxyXG5cdFx0XHRjbGFzc1RvUmVtb3ZlOiBcImluXCIsXHJcblx0XHRcdHNjcmVlbkNsYXNzVG9BZGQ6IFwib3V0XCIsXHJcblx0XHRcdGNvbnRhaW5lckNsYXNzVG9BZGQ6IFwicmV2ZXJzZSBvdXRcIixcclxuXHRcdFx0YXBwbHlUcmFuc2l0aW9uOiB0cnVlLFxyXG5cdFx0XHRwcmVyZXF1aXNpdGVzOiB0aGlzLl9wcmVyZXF1aXNpdGVzXHJcblx0XHR9KTtcclxuXHR9LFxyXG5cclxuXHRfdW5lbmhhbmNlOiBmdW5jdGlvbigpIHtcclxuXHRcdGlmICggdGhpcy5vcHRpb25zLmVuaGFuY2VkICkge1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gUHV0IHRoZSBlbGVtZW50IGJhY2sgdG8gd2hlcmUgdGhlIHBsYWNlaG9sZGVyIHdhcyBhbmQgcmVtb3ZlIHRoZSBcInVpLXBvcHVwXCIgY2xhc3NcclxuXHRcdHRoaXMuX3NldE9wdGlvbnMoIHsgdGhlbWU6ICQubW9iaWxlLnBvcHVwLnByb3RvdHlwZS5vcHRpb25zLnRoZW1lIH0gKTtcclxuXHRcdHRoaXMuZWxlbWVudFxyXG5cdFx0XHQvLyBDYW5ub3QgZGlyZWN0bHkgaW5zZXJ0QWZ0ZXIoKSAtIHdlIG5lZWQgdG8gZGV0YWNoKCkgZmlyc3QsIGJlY2F1c2VcclxuXHRcdFx0Ly8gaW5zZXJ0QWZ0ZXIoKSB3aWxsIGRvIG5vdGhpbmcgaWYgdGhlIHBheWxvYWQgZGl2IHdhcyBub3QgYXR0YWNoZWRcclxuXHRcdFx0Ly8gdG8gdGhlIERPTSBhdCB0aGUgdGltZSB0aGUgd2lkZ2V0IHdhcyBjcmVhdGVkLCBhbmQgc28gdGhlIHBheWxvYWRcclxuXHRcdFx0Ly8gd2lsbCByZW1haW4gaW5zaWRlIHRoZSBjb250YWluZXIgZXZlbiBhZnRlciB3ZSBjYWxsIGluc2VydEFmdGVyKCkuXHJcblx0XHRcdC8vIElmIHRoYXQgaGFwcGVucyBhbmQgd2UgcmVtb3ZlIHRoZSBjb250YWluZXIgYSBmZXcgbGluZXMgYmVsb3csIHdlXHJcblx0XHRcdC8vIHdpbGwgY2F1c2UgYW4gaW5maW5pdGUgcmVjdXJzaW9uIC0gIzUyNDRcclxuXHRcdFx0LmRldGFjaCgpXHJcblx0XHRcdC5pbnNlcnRBZnRlciggdGhpcy5fdWkucGxhY2Vob2xkZXIgKVxyXG5cdFx0XHQucmVtb3ZlQ2xhc3MoIFwidWktcG9wdXAgdWktb3ZlcmxheS1zaGFkb3cgdWktY29ybmVyLWFsbCB1aS1ib2R5LWluaGVyaXRcIiApO1xyXG5cdFx0dGhpcy5fdWkuc2NyZWVuLnJlbW92ZSgpO1xyXG5cdFx0dGhpcy5fdWkuY29udGFpbmVyLnJlbW92ZSgpO1xyXG5cdFx0dGhpcy5fdWkucGxhY2Vob2xkZXIucmVtb3ZlKCk7XHJcblx0fSxcclxuXHJcblx0X2Rlc3Ryb3k6IGZ1bmN0aW9uKCkge1xyXG5cdFx0aWYgKCAkLm1vYmlsZS5wb3B1cC5hY3RpdmUgPT09IHRoaXMgKSB7XHJcblx0XHRcdHRoaXMuZWxlbWVudC5vbmUoIFwicG9wdXBhZnRlcmNsb3NlXCIsICQucHJveHkoIHRoaXMsIFwiX3VuZW5oYW5jZVwiICkgKTtcclxuXHRcdFx0dGhpcy5jbG9zZSgpO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0dGhpcy5fdW5lbmhhbmNlKCk7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblx0fSxcclxuXHJcblx0X2Nsb3NlUG9wdXA6IGZ1bmN0aW9uKCB0aGVFdmVudCwgZGF0YSApIHtcclxuXHRcdHZhciBwYXJzZWREc3QsIHRvVXJsLFxyXG5cdFx0XHRjdXJyZW50T3B0aW9ucyA9IHRoaXMub3B0aW9ucyxcclxuXHRcdFx0aW1tZWRpYXRlID0gZmFsc2U7XHJcblxyXG5cdFx0aWYgKCAoIHRoZUV2ZW50ICYmIHRoZUV2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpICkgfHwgJC5tb2JpbGUucG9wdXAuYWN0aXZlICE9PSB0aGlzICkge1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gcmVzdG9yZSBsb2NhdGlvbiBvbiBzY3JlZW5cclxuXHRcdHdpbmRvdy5zY3JvbGxUbyggMCwgdGhpcy5fc2Nyb2xsVG9wICk7XHJcblxyXG5cdFx0aWYgKCB0aGVFdmVudCAmJiB0aGVFdmVudC50eXBlID09PSBcInBhZ2ViZWZvcmVjaGFuZ2VcIiAmJiBkYXRhICkge1xyXG5cdFx0XHQvLyBEZXRlcm1pbmUgd2hldGhlciB3ZSBuZWVkIHRvIHJhcGlkLWNsb3NlIHRoZSBwb3B1cCwgb3Igd2hldGhlciB3ZSBjYW5cclxuXHRcdFx0Ly8gdGFrZSB0aGUgdGltZSB0byBydW4gdGhlIGNsb3NpbmcgdHJhbnNpdGlvblxyXG5cdFx0XHRpZiAoIHR5cGVvZiBkYXRhLnRvUGFnZSA9PT0gXCJzdHJpbmdcIiApIHtcclxuXHRcdFx0XHRwYXJzZWREc3QgPSBkYXRhLnRvUGFnZTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRwYXJzZWREc3QgPSBkYXRhLnRvUGFnZS5qcW1EYXRhKCBcInVybFwiICk7XHJcblx0XHRcdH1cclxuXHRcdFx0cGFyc2VkRHN0ID0gJC5tb2JpbGUucGF0aC5wYXJzZVVybCggcGFyc2VkRHN0ICk7XHJcblx0XHRcdHRvVXJsID0gcGFyc2VkRHN0LnBhdGhuYW1lICsgcGFyc2VkRHN0LnNlYXJjaCArIHBhcnNlZERzdC5oYXNoO1xyXG5cclxuXHRcdFx0aWYgKCB0aGlzLl9teVVybCAhPT0gJC5tb2JpbGUucGF0aC5tYWtlVXJsQWJzb2x1dGUoIHRvVXJsICkgKSB7XHJcblx0XHRcdFx0Ly8gR29pbmcgdG8gYSBkaWZmZXJlbnQgcGFnZSAtIGNsb3NlIGltbWVkaWF0ZWx5XHJcblx0XHRcdFx0aW1tZWRpYXRlID0gdHJ1ZTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHR0aGVFdmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gcmVtb3ZlIG5hdiBiaW5kaW5nc1xyXG5cdFx0dGhpcy53aW5kb3cub2ZmKCBjdXJyZW50T3B0aW9ucy5jbG9zZUV2ZW50cyApO1xyXG5cdFx0Ly8gdW5iaW5kIGNsaWNrIGhhbmRsZXJzIGFkZGVkIHdoZW4gaGlzdG9yeSBpcyBkaXNhYmxlZFxyXG5cdFx0dGhpcy5lbGVtZW50LnVuZGVsZWdhdGUoIGN1cnJlbnRPcHRpb25zLmNsb3NlTGlua1NlbGVjdG9yLCBjdXJyZW50T3B0aW9ucy5jbG9zZUxpbmtFdmVudHMgKTtcclxuXHJcblx0XHR0aGlzLl9jbG9zZSggaW1tZWRpYXRlICk7XHJcblx0fSxcclxuXHJcblx0Ly8gYW55IG5hdmlnYXRpb24gZXZlbnQgYWZ0ZXIgYSBwb3B1cCBpcyBvcGVuZWQgc2hvdWxkIGNsb3NlIHRoZSBwb3B1cFxyXG5cdC8vIE5PVEUgdGhlIHBhZ2ViZWZvcmVjaGFuZ2UgaXMgYm91bmQgdG8gY2F0Y2ggbmF2aWdhdGlvbiBldmVudHMgdGhhdCBkb24ndFxyXG5cdC8vICAgICAgYWx0ZXIgdGhlIHVybCAoZWcsIGRpYWxvZ3MgZnJvbSBwb3B1cHMpXHJcblx0X2JpbmRDb250YWluZXJDbG9zZTogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLndpbmRvd1xyXG5cdFx0XHQub24oIHRoaXMub3B0aW9ucy5jbG9zZUV2ZW50cywgJC5wcm94eSggdGhpcywgXCJfY2xvc2VQb3B1cFwiICkgKTtcclxuXHR9LFxyXG5cclxuXHR3aWRnZXQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0cmV0dXJuIHRoaXMuX3VpLmNvbnRhaW5lcjtcclxuXHR9LFxyXG5cclxuXHQvLyBUT0RPIG5vIGNsZWFyIGRlbGluaWF0aW9uIG9mIHdoYXQgc2hvdWxkIGJlIGhlcmUgYW5kXHJcblx0Ly8gd2hhdCBzaG91bGQgYmUgaW4gX29wZW4uIFNlZW1zIHRvIGJlIFwidmlzdWFsXCIgdnMgXCJoaXN0b3J5XCIgZm9yIG5vd1xyXG5cdG9wZW46IGZ1bmN0aW9uKCBvcHRpb25zICkge1xyXG5cdFx0dmFyIHVybCwgaGFzaGtleSwgYWN0aXZlUGFnZSwgY3VycmVudElzRGlhbG9nLCBoYXNIYXNoLCB1cmxIaXN0b3J5LFxyXG5cdFx0XHRzZWxmID0gdGhpcyxcclxuXHRcdFx0Y3VycmVudE9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7XHJcblxyXG5cdFx0Ly8gbWFrZSBzdXJlIG9wZW4gaXMgaWRlbXBvdGVudFxyXG5cdFx0aWYgKCAkLm1vYmlsZS5wb3B1cC5hY3RpdmUgfHwgY3VycmVudE9wdGlvbnMuZGlzYWJsZWQgKSB7XHJcblx0XHRcdHJldHVybiB0aGlzO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIHNldCB0aGUgZ2xvYmFsIHBvcHVwIG11dGV4XHJcblx0XHQkLm1vYmlsZS5wb3B1cC5hY3RpdmUgPSB0aGlzO1xyXG5cdFx0dGhpcy5fc2Nyb2xsVG9wID0gdGhpcy53aW5kb3cuc2Nyb2xsVG9wKCk7XHJcblxyXG5cdFx0Ly8gaWYgaGlzdG9yeSBhbHRlcmF0aW9uIGlzIGRpc2FibGVkIGNsb3NlIG9uIG5hdmlnYXRlIGV2ZW50c1xyXG5cdFx0Ly8gYW5kIGxlYXZlIHRoZSB1cmwgYXMgaXNcclxuXHRcdGlmICggISggY3VycmVudE9wdGlvbnMuaGlzdG9yeSApICkge1xyXG5cdFx0XHRzZWxmLl9vcGVuKCBvcHRpb25zICk7XHJcblx0XHRcdHNlbGYuX2JpbmRDb250YWluZXJDbG9zZSgpO1xyXG5cclxuXHRcdFx0Ly8gV2hlbiBoaXN0b3kgaXMgZGlzYWJsZWQgd2UgaGF2ZSB0byBncmFiIHRoZSBkYXRhLXJlbFxyXG5cdFx0XHQvLyBiYWNrIGxpbmsgY2xpY2tzIHNvIHdlIGNhbiBjbG9zZSB0aGUgcG9wdXAgaW5zdGVhZCBvZlxyXG5cdFx0XHQvLyByZWx5aW5nIG9uIGhpc3RvcnkgdG8gZG8gaXQgZm9yIHVzXHJcblx0XHRcdHNlbGYuZWxlbWVudFxyXG5cdFx0XHRcdC5kZWxlZ2F0ZSggY3VycmVudE9wdGlvbnMuY2xvc2VMaW5rU2VsZWN0b3IsIGN1cnJlbnRPcHRpb25zLmNsb3NlTGlua0V2ZW50cywgZnVuY3Rpb24oIHRoZUV2ZW50ICkge1xyXG5cdFx0XHRcdFx0c2VsZi5jbG9zZSgpO1xyXG5cdFx0XHRcdFx0dGhlRXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHR9KTtcclxuXHJcblx0XHRcdHJldHVybiB0aGlzO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIGNhY2hlIHNvbWUgdmFsdWVzIGZvciBtaW4vcmVhZGFiaWxpdHlcclxuXHRcdHVybEhpc3RvcnkgPSAkLm1vYmlsZS5uYXZpZ2F0ZS5oaXN0b3J5O1xyXG5cdFx0aGFzaGtleSA9ICQubW9iaWxlLmRpYWxvZ0hhc2hLZXk7XHJcblx0XHRhY3RpdmVQYWdlID0gJC5tb2JpbGUuYWN0aXZlUGFnZTtcclxuXHRcdGN1cnJlbnRJc0RpYWxvZyA9ICggYWN0aXZlUGFnZSA/IGFjdGl2ZVBhZ2UuaGFzQ2xhc3MoIFwidWktZGlhbG9nXCIgKSA6IGZhbHNlICk7XHJcblx0XHR0aGlzLl9teVVybCA9IHVybCA9IHVybEhpc3RvcnkuZ2V0QWN0aXZlKCkudXJsO1xyXG5cdFx0aGFzSGFzaCA9ICggdXJsLmluZGV4T2YoIGhhc2hrZXkgKSA+IC0xICkgJiYgIWN1cnJlbnRJc0RpYWxvZyAmJiAoIHVybEhpc3RvcnkuYWN0aXZlSW5kZXggPiAwICk7XHJcblxyXG5cdFx0aWYgKCBoYXNIYXNoICkge1xyXG5cdFx0XHRzZWxmLl9vcGVuKCBvcHRpb25zICk7XHJcblx0XHRcdHNlbGYuX2JpbmRDb250YWluZXJDbG9zZSgpO1xyXG5cdFx0XHRyZXR1cm4gdGhpcztcclxuXHRcdH1cclxuXHJcblx0XHQvLyBpZiB0aGUgY3VycmVudCB1cmwgaGFzIG5vIGRpYWxvZyBoYXNoIGtleSBwcm9jZWVkIGFzIG5vcm1hbFxyXG5cdFx0Ly8gb3RoZXJ3aXNlLCBpZiB0aGUgcGFnZSBpcyBhIGRpYWxvZyBzaW1wbHkgdGFjayBvbiB0aGUgaGFzaCBrZXlcclxuXHRcdGlmICggdXJsLmluZGV4T2YoIGhhc2hrZXkgKSA9PT0gLTEgJiYgIWN1cnJlbnRJc0RpYWxvZyApIHtcclxuXHRcdFx0dXJsID0gdXJsICsgKHVybC5pbmRleE9mKCBcIiNcIiApID4gLTEgPyBoYXNoa2V5IDogXCIjXCIgKyBoYXNoa2V5KTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHVybCA9ICQubW9iaWxlLnBhdGgucGFyc2VMb2NhdGlvbigpLmhhc2ggKyBoYXNoa2V5O1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIHN3YWxsb3cgdGhlIHRoZSBpbml0aWFsIG5hdmlnYXRpb24gZXZlbnQsIGFuZCBiaW5kIGZvciB0aGUgbmV4dFxyXG5cdFx0dGhpcy53aW5kb3cub25lKCBcImJlZm9yZW5hdmlnYXRlXCIsIGZ1bmN0aW9uKCB0aGVFdmVudCApIHtcclxuXHRcdFx0dGhlRXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0c2VsZi5fb3Blbiggb3B0aW9ucyApO1xyXG5cdFx0XHRzZWxmLl9iaW5kQ29udGFpbmVyQ2xvc2UoKTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdHRoaXMudXJsQWx0ZXJlZCA9IHRydWU7XHJcblx0XHQkLm1vYmlsZS5uYXZpZ2F0ZSggdXJsLCB7IHJvbGU6IFwiZGlhbG9nXCIgfSApO1xyXG5cclxuXHRcdHJldHVybiB0aGlzO1xyXG5cdH0sXHJcblxyXG5cdGNsb3NlOiBmdW5jdGlvbigpIHtcclxuXHRcdC8vIG1ha2Ugc3VyZSBjbG9zZSBpcyBpZGVtcG90ZW50XHJcblx0XHRpZiAoICQubW9iaWxlLnBvcHVwLmFjdGl2ZSAhPT0gdGhpcyApIHtcclxuXHRcdFx0cmV0dXJuIHRoaXM7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5fc2Nyb2xsVG9wID0gdGhpcy53aW5kb3cuc2Nyb2xsVG9wKCk7XHJcblxyXG5cdFx0aWYgKCB0aGlzLm9wdGlvbnMuaGlzdG9yeSAmJiB0aGlzLnVybEFsdGVyZWQgKSB7XHJcblx0XHRcdCQubW9iaWxlLmJhY2soKTtcclxuXHRcdFx0dGhpcy51cmxBbHRlcmVkID0gZmFsc2U7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHQvLyBzaW11bGF0ZSB0aGUgbmF2IGJpbmRpbmdzIGhhdmluZyBmaXJlZFxyXG5cdFx0XHR0aGlzLl9jbG9zZVBvcHVwKCk7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblx0fVxyXG59KTtcclxuXHJcbi8vIFRPRE8gdGhpcyBjYW4gYmUgbW92ZWQgaW5zaWRlIHRoZSB3aWRnZXRcclxuJC5tb2JpbGUucG9wdXAuaGFuZGxlTGluayA9IGZ1bmN0aW9uKCAkbGluayApIHtcclxuXHR2YXIgb2Zmc2V0LFxyXG5cdFx0cGF0aCA9ICQubW9iaWxlLnBhdGgsXHJcblxyXG5cdFx0Ly8gTk9URSBtYWtlIHN1cmUgdG8gZ2V0IG9ubHkgdGhlIGhhc2ggZnJvbSB0aGUgaHJlZiBiZWNhdXNlIGllNyAod3A3KVxyXG5cdFx0Ly8gICAgICByZXR1cm5zIHRoZSBhYnNvbHV0ZSBocmVmIGluIHRoaXMgY2FzZSBydWluaW5nIHRoZSBlbGVtZW50IHNlbGVjdGlvblxyXG5cdFx0cG9wdXAgPSAkKCBwYXRoLmhhc2hUb1NlbGVjdG9yKCBwYXRoLnBhcnNlVXJsKCAkbGluay5hdHRyKCBcImhyZWZcIiApICkuaGFzaCApICkuZmlyc3QoKTtcclxuXHJcblx0aWYgKCBwb3B1cC5sZW5ndGggPiAwICYmIHBvcHVwLmRhdGEoIFwibW9iaWxlLXBvcHVwXCIgKSApIHtcclxuXHRcdG9mZnNldCA9ICRsaW5rLm9mZnNldCgpO1xyXG5cdFx0cG9wdXAucG9wdXAoIFwib3BlblwiLCB7XHJcblx0XHRcdHg6IG9mZnNldC5sZWZ0ICsgJGxpbmsub3V0ZXJXaWR0aCgpIC8gMixcclxuXHRcdFx0eTogb2Zmc2V0LnRvcCArICRsaW5rLm91dGVySGVpZ2h0KCkgLyAyLFxyXG5cdFx0XHR0cmFuc2l0aW9uOiAkbGluay5qcW1EYXRhKCBcInRyYW5zaXRpb25cIiApLFxyXG5cdFx0XHRwb3NpdGlvblRvOiAkbGluay5qcW1EYXRhKCBcInBvc2l0aW9uLXRvXCIgKVxyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHQvL3JlbW92ZSBhZnRlciBkZWxheVxyXG5cdHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xyXG5cdFx0JGxpbmsucmVtb3ZlQ2xhc3MoICQubW9iaWxlLmFjdGl2ZUJ0bkNsYXNzICk7XHJcblx0fSwgMzAwICk7XHJcbn07XHJcblxyXG4vLyBUT0RPIG1vdmUgaW5zaWRlIF9jcmVhdGVcclxuJC5tb2JpbGUuZG9jdW1lbnQub24oIFwicGFnZWJlZm9yZWNoYW5nZVwiLCBmdW5jdGlvbiggdGhlRXZlbnQsIGRhdGEgKSB7XHJcblx0aWYgKCBkYXRhLm9wdGlvbnMucm9sZSA9PT0gXCJwb3B1cFwiICkge1xyXG5cdFx0JC5tb2JpbGUucG9wdXAuaGFuZGxlTGluayggZGF0YS5vcHRpb25zLmxpbmsgKTtcclxuXHRcdHRoZUV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblx0fVxyXG59KTtcclxuXHJcbn0pKCBqUXVlcnkgKTtcclxuXHJcbi8qXHJcbiogY3VzdG9tIFwic2VsZWN0bWVudVwiIHBsdWdpblxyXG4qL1xyXG5cclxuKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7XHJcblxyXG52YXIgdW5mb2N1c2FibGVJdGVtU2VsZWN0b3IgPSBcIi51aS1kaXNhYmxlZCwudWktc3RhdGUtZGlzYWJsZWQsLnVpLWxpLWRpdmlkZXIsLnVpLXNjcmVlbi1oaWRkZW4sOmpxbURhdGEocm9sZT0ncGxhY2Vob2xkZXInKVwiLFxyXG5cdGdvVG9BZGphY2VudEl0ZW0gPSBmdW5jdGlvbiggaXRlbSwgdGFyZ2V0LCBkaXJlY3Rpb24gKSB7XHJcblx0XHR2YXIgYWRqYWNlbnQgPSBpdGVtWyBkaXJlY3Rpb24gKyBcIkFsbFwiIF0oKVxyXG5cdFx0XHQubm90KCB1bmZvY3VzYWJsZUl0ZW1TZWxlY3RvciApXHJcblx0XHRcdC5maXJzdCgpO1xyXG5cclxuXHRcdC8vIGlmIHRoZXJlJ3MgYSBwcmV2aW91cyBvcHRpb24sIGZvY3VzIGl0XHJcblx0XHRpZiAoIGFkamFjZW50Lmxlbmd0aCApIHtcclxuXHRcdFx0dGFyZ2V0XHJcblx0XHRcdFx0LmJsdXIoKVxyXG5cdFx0XHRcdC5hdHRyKCBcInRhYmluZGV4XCIsIFwiLTFcIiApO1xyXG5cclxuXHRcdFx0YWRqYWNlbnQuZmluZCggXCJhXCIgKS5maXJzdCgpLmZvY3VzKCk7XHJcblx0XHR9XHJcblx0fTtcclxuXHJcbiQud2lkZ2V0KCBcIm1vYmlsZS5zZWxlY3RtZW51XCIsICQubW9iaWxlLnNlbGVjdG1lbnUsIHtcclxuXHRfY3JlYXRlOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBvID0gdGhpcy5vcHRpb25zO1xyXG5cclxuXHRcdC8vIEN1c3RvbSBzZWxlY3RzIGNhbm5vdCBleGlzdCBpbnNpZGUgcG9wdXBzLCBzbyByZXZlcnQgdGhlIFwibmF0aXZlTWVudVwiXHJcblx0XHQvLyBvcHRpb24gdG8gdHJ1ZSBpZiBhIHBhcmVudCBpcyBhIHBvcHVwXHJcblx0XHRvLm5hdGl2ZU1lbnUgPSBvLm5hdGl2ZU1lbnUgfHwgKCB0aGlzLmVsZW1lbnQucGFyZW50cyggXCI6anFtRGF0YShyb2xlPSdwb3B1cCcpLDptb2JpbGUtcG9wdXBcIiApLmxlbmd0aCA+IDAgKTtcclxuXHJcblx0XHRyZXR1cm4gdGhpcy5fc3VwZXIoKTtcclxuXHR9LFxyXG5cclxuXHRfaGFuZGxlU2VsZWN0Rm9jdXM6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5lbGVtZW50LmJsdXIoKTtcclxuXHRcdHRoaXMuYnV0dG9uLmZvY3VzKCk7XHJcblx0fSxcclxuXHJcblx0X2hhbmRsZUtleWRvd246IGZ1bmN0aW9uKCBldmVudCApIHtcclxuXHRcdHRoaXMuX3N1cGVyKCBldmVudCApO1xyXG5cdFx0dGhpcy5faGFuZGxlQnV0dG9uVmNsaWNrS2V5ZG93biggZXZlbnQgKTtcclxuXHR9LFxyXG5cclxuXHRfaGFuZGxlQnV0dG9uVmNsaWNrS2V5ZG93bjogZnVuY3Rpb24oIGV2ZW50ICkge1xyXG5cdFx0aWYgKCB0aGlzLm9wdGlvbnMuZGlzYWJsZWQgfHwgdGhpcy5pc09wZW4gfHwgdGhpcy5vcHRpb25zLm5hdGl2ZU1lbnUgKSB7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoZXZlbnQudHlwZSA9PT0gXCJ2Y2xpY2tcIiB8fFxyXG5cdFx0XHRcdGV2ZW50LmtleUNvZGUgJiYgKGV2ZW50LmtleUNvZGUgPT09ICQubW9iaWxlLmtleUNvZGUuRU5URVIgfHwgZXZlbnQua2V5Q29kZSA9PT0gJC5tb2JpbGUua2V5Q29kZS5TUEFDRSkpIHtcclxuXHJcblx0XHRcdHRoaXMuX2RlY2lkZUZvcm1hdCgpO1xyXG5cdFx0XHRpZiAoIHRoaXMubWVudVR5cGUgPT09IFwib3ZlcmxheVwiICkge1xyXG5cdFx0XHRcdHRoaXMuYnV0dG9uLmF0dHIoIFwiaHJlZlwiLCBcIiNcIiArIHRoaXMucG9wdXBJZCApLmF0dHIoIFwiZGF0YS1cIiArICggJC5tb2JpbGUubnMgfHwgXCJcIiApICsgXCJyZWxcIiwgXCJwb3B1cFwiICk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0dGhpcy5idXR0b24uYXR0ciggXCJocmVmXCIsIFwiI1wiICsgdGhpcy5kaWFsb2dJZCApLmF0dHIoIFwiZGF0YS1cIiArICggJC5tb2JpbGUubnMgfHwgXCJcIiApICsgXCJyZWxcIiwgXCJkaWFsb2dcIiApO1xyXG5cdFx0XHR9XHJcblx0XHRcdHRoaXMuaXNPcGVuID0gdHJ1ZTtcclxuXHRcdFx0Ly8gRG8gbm90IHByZXZlbnQgZGVmYXVsdCwgc28gdGhlIG5hdmlnYXRpb24gbWF5IGhhdmUgYSBjaGFuY2UgdG8gYWN0dWFsbHkgb3BlbiB0aGUgY2hvc2VuIGZvcm1hdFxyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9oYW5kbGVMaXN0Rm9jdXM6IGZ1bmN0aW9uKCBlICkge1xyXG5cdFx0dmFyIHBhcmFtcyA9ICggZS50eXBlID09PSBcImZvY3VzaW5cIiApID9cclxuXHRcdFx0eyB0YWJpbmRleDogXCIwXCIsIGV2ZW50OiBcInZtb3VzZW92ZXJcIiB9OlxyXG5cdFx0XHR7IHRhYmluZGV4OiBcIi0xXCIsIGV2ZW50OiBcInZtb3VzZW91dFwiIH07XHJcblxyXG5cdFx0JCggZS50YXJnZXQgKVxyXG5cdFx0XHQuYXR0ciggXCJ0YWJpbmRleFwiLCBwYXJhbXMudGFiaW5kZXggKVxyXG5cdFx0XHQudHJpZ2dlciggcGFyYW1zLmV2ZW50ICk7XHJcblx0fSxcclxuXHJcblx0X2hhbmRsZUxpc3RLZXlkb3duOiBmdW5jdGlvbiggZXZlbnQgKSB7XHJcblx0XHR2YXIgdGFyZ2V0ID0gJCggZXZlbnQudGFyZ2V0ICksXHJcblx0XHRcdGxpID0gdGFyZ2V0LmNsb3Nlc3QoIFwibGlcIiApO1xyXG5cclxuXHRcdC8vIHN3aXRjaCBsb2dpYyBiYXNlZCBvbiB3aGljaCBrZXkgd2FzIHByZXNzZWRcclxuXHRcdHN3aXRjaCAoIGV2ZW50LmtleUNvZGUgKSB7XHJcblx0XHRcdC8vIHVwIG9yIGxlZnQgYXJyb3cga2V5c1xyXG5cdFx0Y2FzZSAzODpcclxuXHRcdFx0Z29Ub0FkamFjZW50SXRlbSggbGksIHRhcmdldCwgXCJwcmV2XCIgKTtcclxuXHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHQvLyBkb3duIG9yIHJpZ2h0IGFycm93IGtleXNcclxuXHRcdGNhc2UgNDA6XHJcblx0XHRcdGdvVG9BZGphY2VudEl0ZW0oIGxpLCB0YXJnZXQsIFwibmV4dFwiICk7XHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0Ly8gSWYgZW50ZXIgb3Igc3BhY2UgaXMgcHJlc3NlZCwgdHJpZ2dlciBjbGlja1xyXG5cdFx0Y2FzZSAxMzpcclxuXHRcdGNhc2UgMzI6XHJcblx0XHRcdHRhcmdldC50cmlnZ2VyKCBcImNsaWNrXCIgKTtcclxuXHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9oYW5kbGVNZW51UGFnZUhpZGU6IGZ1bmN0aW9uKCkge1xyXG5cclxuXHRcdC8vIEFmdGVyIHRoZSBkaWFsb2cncyBkb25lLCB3ZSBtYXkgd2FudCB0byB0cmlnZ2VyIGNoYW5nZSBpZiB0aGUgdmFsdWUgaGFzIGFjdHVhbGx5IGNoYW5nZWRcclxuXHRcdHRoaXMuX2RlbGF5ZWRUcmlnZ2VyKCk7XHJcblxyXG5cdFx0Ly8gVE9ETyBjZW50cmFsaXplIHBhZ2UgcmVtb3ZhbCBiaW5kaW5nIC8gaGFuZGxpbmcgaW4gdGhlIHBhZ2UgcGx1Z2luLlxyXG5cdFx0Ly8gU3VnZ2VzdGlvbiBmcm9tIEBqYmxhcyB0byBkbyByZWZjb3VudGluZ1xyXG5cdFx0Ly9cclxuXHRcdC8vIFRPRE8gZXh0cmVtZWx5IGNvbmZ1c2luZyBkZXBlbmRlbmN5IG9uIHRoZSBvcGVuIG1ldGhvZCB3aGVyZSB0aGUgcGFnZWhpZGUucmVtb3ZlXHJcblx0XHQvLyBiaW5kaW5ncyBhcmUgc3RyaXBwZWQgdG8gcHJldmVudCB0aGUgcGFyZW50IHBhZ2UgZnJvbSBkaXNhcHBlYXJpbmcuIFRoZSB3YXlcclxuXHRcdC8vIHdlJ3JlIGtlZXBpbmcgcGFnZXMgaW4gdGhlIERPTSByaWdodCBub3cgc3Vja3NcclxuXHRcdC8vXHJcblx0XHQvLyByZWJpbmQgdGhlIHBhZ2UgcmVtb3ZlIHRoYXQgd2FzIHVuYm91bmQgaW4gdGhlIG9wZW4gZnVuY3Rpb25cclxuXHRcdC8vIHRvIGFsbG93IGZvciB0aGUgcGFyZW50IHBhZ2UgcmVtb3ZhbCBmcm9tIGFjdGlvbnMgb3RoZXIgdGhhbiB0aGUgdXNlXHJcblx0XHQvLyBvZiBhIGRpYWxvZyBzaXplZCBjdXN0b20gc2VsZWN0XHJcblx0XHQvL1xyXG5cdFx0Ly8gZG9pbmcgdGhpcyBoZXJlIHByb3ZpZGVzIGZvciB0aGUgYmFjayBidXR0b24gb24gdGhlIGN1c3RvbSBzZWxlY3QgZGlhbG9nXHJcblx0XHR0aGlzLnRoaXNQYWdlLnBhZ2UoIFwiYmluZFJlbW92ZVwiICk7XHJcblx0fSxcclxuXHJcblx0X2hhbmRsZUhlYWRlckNsb3NlQ2xpY2s6IGZ1bmN0aW9uKCkge1xyXG5cdFx0aWYgKCB0aGlzLm1lbnVUeXBlID09PSBcIm92ZXJsYXlcIiApIHtcclxuXHRcdFx0dGhpcy5jbG9zZSgpO1xyXG5cdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X2hhbmRsZUxpc3RJdGVtQ2xpY2s6IGZ1bmN0aW9uKCBldmVudCApIHtcclxuXHRcdHZhciBsaXN0SXRlbSA9ICQoIGV2ZW50LnRhcmdldCApLmNsb3Nlc3QoIFwibGlcIiApLFxyXG5cclxuXHRcdFx0Ly8gSW5kZXggb2Ygb3B0aW9uIHRhZyB0byBiZSBzZWxlY3RlZFxyXG5cdFx0XHRvbGRJbmRleCA9IHRoaXMuc2VsZWN0WyAwIF0uc2VsZWN0ZWRJbmRleCxcclxuXHRcdFx0bmV3SW5kZXggPSAkLm1vYmlsZS5nZXRBdHRyaWJ1dGUoIGxpc3RJdGVtLCBcIm9wdGlvbi1pbmRleFwiICksXHJcblx0XHRcdG9wdGlvbiA9IHRoaXMuX3NlbGVjdE9wdGlvbnMoKS5lcSggbmV3SW5kZXggKVsgMCBdO1xyXG5cclxuXHRcdC8vIFRvZ2dsZSBzZWxlY3RlZCBzdGF0dXMgb24gdGhlIHRhZyBmb3IgbXVsdGkgc2VsZWN0c1xyXG5cdFx0b3B0aW9uLnNlbGVjdGVkID0gdGhpcy5pc011bHRpcGxlID8gIW9wdGlvbi5zZWxlY3RlZCA6IHRydWU7XHJcblxyXG5cdFx0Ly8gVG9nZ2xlIGNoZWNrYm94IGNsYXNzIGZvciBtdWx0aXBsZSBzZWxlY3RzXHJcblx0XHRpZiAoIHRoaXMuaXNNdWx0aXBsZSApIHtcclxuXHRcdFx0bGlzdEl0ZW0uZmluZCggXCJhXCIgKVxyXG5cdFx0XHRcdC50b2dnbGVDbGFzcyggXCJ1aS1jaGVja2JveC1vblwiLCBvcHRpb24uc2VsZWN0ZWQgKVxyXG5cdFx0XHRcdC50b2dnbGVDbGFzcyggXCJ1aS1jaGVja2JveC1vZmZcIiwgIW9wdGlvbi5zZWxlY3RlZCApO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIElmIGl0J3Mgbm90IGEgbXVsdGlwbGUgc2VsZWN0LCB0cmlnZ2VyIGNoYW5nZSBhZnRlciBpdCBoYXMgZmluaXNoZWQgY2xvc2luZ1xyXG5cdFx0aWYgKCAhdGhpcy5pc011bHRpcGxlICYmIG9sZEluZGV4ICE9PSBuZXdJbmRleCApIHtcclxuXHRcdFx0dGhpcy5fdHJpZ2dlckNoYW5nZSA9IHRydWU7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gVHJpZ2dlciBjaGFuZ2UgaWYgaXQncyBhIG11bHRpcGxlIHNlbGVjdFxyXG5cdFx0Ly8gSGlkZSBjdXN0b20gc2VsZWN0IGZvciBzaW5nbGUgc2VsZWN0cyBvbmx5IC0gb3RoZXJ3aXNlIGZvY3VzIGNsaWNrZWQgaXRlbVxyXG5cdFx0Ly8gV2UgbmVlZCB0byBncmFiIHRoZSBjbGlja2VkIGl0ZW0gdGhlIGhhcmQgd2F5LCBiZWNhdXNlIHRoZSBsaXN0IG1heSBoYXZlIGJlZW4gcmVidWlsdFxyXG5cdFx0aWYgKCB0aGlzLmlzTXVsdGlwbGUgKSB7XHJcblx0XHRcdHRoaXMuc2VsZWN0LnRyaWdnZXIoIFwiY2hhbmdlXCIgKTtcclxuXHRcdFx0dGhpcy5saXN0LmZpbmQoIFwibGk6bm90KC51aS1saS1kaXZpZGVyKVwiICkuZXEoIG5ld0luZGV4IClcclxuXHRcdFx0XHQuZmluZCggXCJhXCIgKS5maXJzdCgpLmZvY3VzKCk7XHJcblx0XHR9XHJcblx0XHRlbHNlIHtcclxuXHRcdFx0dGhpcy5jbG9zZSgpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblx0fSxcclxuXHJcblx0YnVpbGQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIHNlbGVjdElkLCBwb3B1cElkLCBkaWFsb2dJZCwgbGFiZWwsIHRoaXNQYWdlLCBpc011bHRpcGxlLCBtZW51SWQsXHJcblx0XHRcdHRoZW1lQXR0ciwgb3ZlcmxheVRoZW1lLCBvdmVybGF5VGhlbWVBdHRyLCBkaXZpZGVyVGhlbWVBdHRyLFxyXG5cdFx0XHRtZW51UGFnZSwgbGlzdGJveCwgbGlzdCwgaGVhZGVyLCBoZWFkZXJUaXRsZSwgbWVudVBhZ2VDb250ZW50LFxyXG5cdFx0XHRtZW51UGFnZUNsb3NlLCBoZWFkZXJDbG9zZSxcclxuXHRcdFx0byA9IHRoaXMub3B0aW9ucztcclxuXHJcblx0XHRpZiAoIG8ubmF0aXZlTWVudSApIHtcclxuXHRcdFx0cmV0dXJuIHRoaXMuX3N1cGVyKCk7XHJcblx0XHR9XHJcblxyXG5cdFx0c2VsZWN0SWQgPSB0aGlzLnNlbGVjdElkO1xyXG5cdFx0cG9wdXBJZCA9IHNlbGVjdElkICsgXCItbGlzdGJveFwiO1xyXG5cdFx0ZGlhbG9nSWQgPSBzZWxlY3RJZCArIFwiLWRpYWxvZ1wiO1xyXG5cdFx0bGFiZWwgPSB0aGlzLmxhYmVsO1xyXG5cdFx0dGhpc1BhZ2UgPSB0aGlzLmVsZW1lbnQuY2xvc2VzdCggXCIudWktcGFnZVwiICk7XHJcblx0XHRpc011bHRpcGxlID0gdGhpcy5lbGVtZW50WyAwIF0ubXVsdGlwbGU7XHJcblx0XHRtZW51SWQgPSBzZWxlY3RJZCArIFwiLW1lbnVcIjtcclxuXHRcdHRoZW1lQXR0ciA9IG8udGhlbWUgPyAoIFwiIGRhdGEtXCIgKyAkLm1vYmlsZS5ucyArIFwidGhlbWU9J1wiICsgby50aGVtZSArIFwiJ1wiICkgOiBcIlwiO1xyXG5cdFx0b3ZlcmxheVRoZW1lID0gby5vdmVybGF5VGhlbWUgfHwgby50aGVtZSB8fCBudWxsO1xyXG5cdFx0b3ZlcmxheVRoZW1lQXR0ciA9IG92ZXJsYXlUaGVtZSA/ICggXCIgZGF0YS1cIiArICQubW9iaWxlLm5zICtcclxuXHRcdFx0XCJvdmVybGF5LXRoZW1lPSdcIiArIG92ZXJsYXlUaGVtZSArIFwiJ1wiICkgOiBcIlwiO1xyXG5cdFx0ZGl2aWRlclRoZW1lQXR0ciA9ICggby5kaXZpZGVyVGhlbWUgJiYgaXNNdWx0aXBsZSApID8gKCBcIiBkYXRhLVwiICsgJC5tb2JpbGUubnMgKyBcImRpdmlkZXItdGhlbWU9J1wiICsgby5kaXZpZGVyVGhlbWUgKyBcIidcIiApIDogXCJcIjtcclxuXHRcdG1lbnVQYWdlID0gJCggXCI8ZGl2IGRhdGEtXCIgKyAkLm1vYmlsZS5ucyArIFwicm9sZT0nZGlhbG9nJyBjbGFzcz0ndWktc2VsZWN0bWVudScgaWQ9J1wiICsgZGlhbG9nSWQgKyBcIidcIiArIHRoZW1lQXR0ciArIG92ZXJsYXlUaGVtZUF0dHIgKyBcIj5cIiArXHJcblx0XHRcdFwiPGRpdiBkYXRhLVwiICsgJC5tb2JpbGUubnMgKyBcInJvbGU9J2hlYWRlcic+XCIgK1xyXG5cdFx0XHRcIjxkaXYgY2xhc3M9J3VpLXRpdGxlJz48L2Rpdj5cIitcclxuXHRcdFx0XCI8L2Rpdj5cIitcclxuXHRcdFx0XCI8ZGl2IGRhdGEtXCIgKyAkLm1vYmlsZS5ucyArIFwicm9sZT0nY29udGVudCc+PC9kaXY+XCIrXHJcblx0XHRcdFwiPC9kaXY+XCIgKTtcclxuXHRcdGxpc3Rib3ggPSAkKCBcIjxkaXZcIiArIHRoZW1lQXR0ciArIG92ZXJsYXlUaGVtZUF0dHIgKyBcIiBpZD0nXCIgKyBwb3B1cElkICtcclxuXHRcdFx0XHRcIicgY2xhc3M9J3VpLXNlbGVjdG1lbnUnPjwvZGl2PlwiIClcclxuXHRcdFx0Lmluc2VydEFmdGVyKCB0aGlzLnNlbGVjdCApXHJcblx0XHRcdC5wb3B1cCgpO1xyXG5cdFx0bGlzdCA9ICQoIFwiPHVsIGNsYXNzPSd1aS1zZWxlY3RtZW51LWxpc3QnIGlkPSdcIiArIG1lbnVJZCArIFwiJyByb2xlPSdsaXN0Ym94JyBhcmlhLWxhYmVsbGVkYnk9J1wiICsgdGhpcy5idXR0b25JZCArIFwiJ1wiICsgdGhlbWVBdHRyICsgZGl2aWRlclRoZW1lQXR0ciArIFwiPjwvdWw+XCIgKS5hcHBlbmRUbyggbGlzdGJveCApO1xyXG5cdFx0aGVhZGVyID0gJCggXCI8ZGl2IGNsYXNzPSd1aS1oZWFkZXIgdWktYmFyLVwiICsgKCBvLnRoZW1lID8gby50aGVtZSA6IFwiaW5oZXJpdFwiICkgKyBcIic+PC9kaXY+XCIgKS5wcmVwZW5kVG8oIGxpc3Rib3ggKTtcclxuXHRcdGhlYWRlclRpdGxlID0gJCggXCI8aDEgY2xhc3M9J3VpLXRpdGxlJz48L2gxPlwiICkuYXBwZW5kVG8oIGhlYWRlciApO1xyXG5cclxuXHRcdGlmICggdGhpcy5pc011bHRpcGxlICkge1xyXG5cdFx0XHRoZWFkZXJDbG9zZSA9ICQoIFwiPGE+XCIsIHtcclxuXHRcdFx0XHRcInJvbGVcIjogXCJidXR0b25cIixcclxuXHRcdFx0XHRcInRleHRcIjogby5jbG9zZVRleHQsXHJcblx0XHRcdFx0XCJocmVmXCI6IFwiI1wiLFxyXG5cdFx0XHRcdFwiY2xhc3NcIjogXCJ1aS1idG4gdWktY29ybmVyLWFsbCB1aS1idG4tbGVmdCB1aS1idG4taWNvbi1ub3RleHQgdWktaWNvbi1kZWxldGVcIlxyXG5cdFx0XHR9KS5hcHBlbmRUbyggaGVhZGVyICk7XHJcblx0XHR9XHJcblxyXG5cdFx0JC5leHRlbmQoIHRoaXMsIHtcclxuXHRcdFx0c2VsZWN0SWQ6IHNlbGVjdElkLFxyXG5cdFx0XHRtZW51SWQ6IG1lbnVJZCxcclxuXHRcdFx0cG9wdXBJZDogcG9wdXBJZCxcclxuXHRcdFx0ZGlhbG9nSWQ6IGRpYWxvZ0lkLFxyXG5cdFx0XHR0aGlzUGFnZTogdGhpc1BhZ2UsXHJcblx0XHRcdG1lbnVQYWdlOiBtZW51UGFnZSxcclxuXHRcdFx0bGFiZWw6IGxhYmVsLFxyXG5cdFx0XHRpc011bHRpcGxlOiBpc011bHRpcGxlLFxyXG5cdFx0XHR0aGVtZTogby50aGVtZSxcclxuXHRcdFx0bGlzdGJveDogbGlzdGJveCxcclxuXHRcdFx0bGlzdDogbGlzdCxcclxuXHRcdFx0aGVhZGVyOiBoZWFkZXIsXHJcblx0XHRcdGhlYWRlclRpdGxlOiBoZWFkZXJUaXRsZSxcclxuXHRcdFx0aGVhZGVyQ2xvc2U6IGhlYWRlckNsb3NlLFxyXG5cdFx0XHRtZW51UGFnZUNvbnRlbnQ6IG1lbnVQYWdlQ29udGVudCxcclxuXHRcdFx0bWVudVBhZ2VDbG9zZTogbWVudVBhZ2VDbG9zZSxcclxuXHRcdFx0cGxhY2Vob2xkZXI6IFwiXCJcclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIENyZWF0ZSBsaXN0IGZyb20gc2VsZWN0LCB1cGRhdGUgc3RhdGVcclxuXHRcdHRoaXMucmVmcmVzaCgpO1xyXG5cclxuXHRcdGlmICggdGhpcy5fb3JpZ1RhYkluZGV4ID09PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdC8vIE1hcCB1bmRlZmluZWQgdG8gZmFsc2UsIGJlY2F1c2UgdGhpcy5fb3JpZ1RhYkluZGV4ID09PSB1bmRlZmluZWRcclxuXHRcdFx0Ly8gaW5kaWNhdGVzIHRoYXQgd2UgaGF2ZSBub3QgeWV0IGNoZWNrZWQgd2hldGhlciB0aGUgc2VsZWN0IGhhc1xyXG5cdFx0XHQvLyBvcmlnaW5hbGx5IGhhZCBhIHRhYmluZGV4IGF0dHJpYnV0ZSwgd2hlcmVhcyBmYWxzZSBpbmRpY2F0ZXMgdGhhdFxyXG5cdFx0XHQvLyB3ZSBoYXZlIGNoZWNrZWQgdGhlIHNlbGVjdCBmb3Igc3VjaCBhbiBhdHRyaWJ1dGUsIGFuZCBoYXZlIGZvdW5kXHJcblx0XHRcdC8vIG5vbmUgcHJlc2VudC5cclxuXHRcdFx0dGhpcy5fb3JpZ1RhYkluZGV4ID0gKCB0aGlzLnNlbGVjdFsgMCBdLmdldEF0dHJpYnV0ZSggXCJ0YWJpbmRleFwiICkgPT09IG51bGwgKSA/IGZhbHNlIDogdGhpcy5zZWxlY3QuYXR0ciggXCJ0YWJpbmRleFwiICk7XHJcblx0XHR9XHJcblx0XHR0aGlzLnNlbGVjdC5hdHRyKCBcInRhYmluZGV4XCIsIFwiLTFcIiApO1xyXG5cdFx0dGhpcy5fb24oIHRoaXMuc2VsZWN0LCB7IGZvY3VzIDogXCJfaGFuZGxlU2VsZWN0Rm9jdXNcIiB9ICk7XHJcblxyXG5cdFx0Ly8gQnV0dG9uIGV2ZW50c1xyXG5cdFx0dGhpcy5fb24oIHRoaXMuYnV0dG9uLCB7XHJcblx0XHRcdHZjbGljazogXCJfaGFuZGxlQnV0dG9uVmNsaWNrS2V5ZG93blwiXHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBFdmVudHMgZm9yIGxpc3QgaXRlbXNcclxuXHRcdHRoaXMubGlzdC5hdHRyKCBcInJvbGVcIiwgXCJsaXN0Ym94XCIgKTtcclxuXHRcdHRoaXMuX29uKCB0aGlzLmxpc3QsIHtcclxuXHRcdFx0XCJmb2N1c2luXCI6IFwiX2hhbmRsZUxpc3RGb2N1c1wiLFxyXG5cdFx0XHRcImZvY3Vzb3V0XCI6IFwiX2hhbmRsZUxpc3RGb2N1c1wiLFxyXG5cdFx0XHRcImtleWRvd25cIjogXCJfaGFuZGxlTGlzdEtleWRvd25cIixcclxuXHRcdFx0XCJjbGljayBsaTpub3QoLnVpLWRpc2FibGVkLC51aS1zdGF0ZS1kaXNhYmxlZCwudWktbGktZGl2aWRlcilcIjogXCJfaGFuZGxlTGlzdEl0ZW1DbGlja1wiXHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBidXR0b24gcmVmb2N1cyBlbnN1cmVzIHByb3BlciBoZWlnaHQgY2FsY3VsYXRpb25cclxuXHRcdC8vIGJ5IHJlbW92aW5nIHRoZSBpbmxpbmUgc3R5bGUgYW5kIGVuc3VyaW5nIHBhZ2UgaW5jbHVzaW9uXHJcblx0XHR0aGlzLl9vbiggdGhpcy5tZW51UGFnZSwgeyBwYWdlaGlkZTogXCJfaGFuZGxlTWVudVBhZ2VIaWRlXCIgfSApO1xyXG5cclxuXHRcdC8vIEV2ZW50cyBvbiB0aGUgcG9wdXBcclxuXHRcdHRoaXMuX29uKCB0aGlzLmxpc3Rib3gsIHsgcG9wdXBhZnRlcmNsb3NlOiBcIl9wb3B1cENsb3NlZFwiIH0gKTtcclxuXHJcblx0XHQvLyBDbG9zZSBidXR0b24gb24gc21hbGwgb3ZlcmxheXNcclxuXHRcdGlmICggdGhpcy5pc011bHRpcGxlICkge1xyXG5cdFx0XHR0aGlzLl9vbiggdGhpcy5oZWFkZXJDbG9zZSwgeyBjbGljazogXCJfaGFuZGxlSGVhZGVyQ2xvc2VDbGlja1wiIH0gKTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHR9LFxyXG5cclxuXHRfcG9wdXBDbG9zZWQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5jbG9zZSgpO1xyXG5cdFx0dGhpcy5fZGVsYXllZFRyaWdnZXIoKTtcclxuXHR9LFxyXG5cclxuXHRfZGVsYXllZFRyaWdnZXI6IGZ1bmN0aW9uKCkge1xyXG5cdFx0aWYgKCB0aGlzLl90cmlnZ2VyQ2hhbmdlICkge1xyXG5cdFx0XHR0aGlzLmVsZW1lbnQudHJpZ2dlciggXCJjaGFuZ2VcIiApO1xyXG5cdFx0fVxyXG5cdFx0dGhpcy5fdHJpZ2dlckNoYW5nZSA9IGZhbHNlO1xyXG5cdH0sXHJcblxyXG5cdF9pc1JlYnVpbGRSZXF1aXJlZDogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgbGlzdCA9IHRoaXMubGlzdC5maW5kKCBcImxpXCIgKSxcclxuXHRcdFx0b3B0aW9ucyA9IHRoaXMuX3NlbGVjdE9wdGlvbnMoKS5ub3QoIFwiLnVpLXNjcmVlbi1oaWRkZW5cIiApO1xyXG5cclxuXHRcdC8vIFRPRE8gZXhjZWVkaW5nbHkgbmFpdmUgbWV0aG9kIHRvIGRldGVybWluZSBkaWZmZXJlbmNlXHJcblx0XHQvLyBpZ25vcmVzIHZhbHVlIGNoYW5nZXMgZXRjIGluIGZhdm9yIG9mIGEgZm9yY2VkUmVidWlsZFxyXG5cdFx0Ly8gZnJvbSB0aGUgdXNlciBpbiB0aGUgcmVmcmVzaCBtZXRob2RcclxuXHRcdHJldHVybiBvcHRpb25zLnRleHQoKSAhPT0gbGlzdC50ZXh0KCk7XHJcblx0fSxcclxuXHJcblx0c2VsZWN0ZWQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0cmV0dXJuIHRoaXMuX3NlbGVjdE9wdGlvbnMoKS5maWx0ZXIoIFwiOnNlbGVjdGVkOm5vdCggOmpxbURhdGEocGxhY2Vob2xkZXI9J3RydWUnKSApXCIgKTtcclxuXHR9LFxyXG5cclxuXHRyZWZyZXNoOiBmdW5jdGlvbiggZm9yY2UgKSB7XHJcblx0XHR2YXIgc2VsZiwgaW5kaWNlcztcclxuXHJcblx0XHRpZiAoIHRoaXMub3B0aW9ucy5uYXRpdmVNZW51ICkge1xyXG5cdFx0XHRyZXR1cm4gdGhpcy5fc3VwZXIoIGZvcmNlICk7XHJcblx0XHR9XHJcblxyXG5cdFx0c2VsZiA9IHRoaXM7XHJcblx0XHRpZiAoIGZvcmNlIHx8IHRoaXMuX2lzUmVidWlsZFJlcXVpcmVkKCkgKSB7XHJcblx0XHRcdHNlbGYuX2J1aWxkTGlzdCgpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGluZGljZXMgPSB0aGlzLnNlbGVjdGVkSW5kaWNlcygpO1xyXG5cclxuXHRcdHNlbGYuc2V0QnV0dG9uVGV4dCgpO1xyXG5cdFx0c2VsZi5zZXRCdXR0b25Db3VudCgpO1xyXG5cclxuXHRcdHNlbGYubGlzdC5maW5kKCBcImxpOm5vdCgudWktbGktZGl2aWRlcilcIiApXHJcblx0XHRcdC5maW5kKCBcImFcIiApLnJlbW92ZUNsYXNzKCAkLm1vYmlsZS5hY3RpdmVCdG5DbGFzcyApLmVuZCgpXHJcblx0XHRcdC5hdHRyKCBcImFyaWEtc2VsZWN0ZWRcIiwgZmFsc2UgKVxyXG5cdFx0XHQuZWFjaChmdW5jdGlvbiggaSApIHtcclxuXHRcdFx0XHR2YXIgaXRlbSA9ICQoIHRoaXMgKTtcclxuXHRcdFx0XHRpZiAoICQuaW5BcnJheSggaSwgaW5kaWNlcyApID4gLTEgKSB7XHJcblxyXG5cdFx0XHRcdFx0Ly8gQXJpYSBzZWxlY3RlZCBhdHRyXHJcblx0XHRcdFx0XHRpdGVtLmF0dHIoIFwiYXJpYS1zZWxlY3RlZFwiLCB0cnVlICk7XHJcblxyXG5cdFx0XHRcdFx0Ly8gTXVsdGlwbGUgc2VsZWN0czogYWRkIHRoZSBcIm9uXCIgY2hlY2tib3ggc3RhdGUgdG8gdGhlIGljb25cclxuXHRcdFx0XHRcdGlmICggc2VsZi5pc011bHRpcGxlICkge1xyXG5cdFx0XHRcdFx0XHRpdGVtLmZpbmQoIFwiYVwiICkucmVtb3ZlQ2xhc3MoIFwidWktY2hlY2tib3gtb2ZmXCIgKS5hZGRDbGFzcyggXCJ1aS1jaGVja2JveC1vblwiICk7XHJcblx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRpZiAoIGl0ZW0uaGFzQ2xhc3MoIFwidWktc2NyZWVuLWhpZGRlblwiICkgKSB7XHJcblx0XHRcdFx0XHRcdFx0aXRlbS5uZXh0KCkuZmluZCggXCJhXCIgKS5hZGRDbGFzcyggJC5tb2JpbGUuYWN0aXZlQnRuQ2xhc3MgKTtcclxuXHRcdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0XHRpdGVtLmZpbmQoIFwiYVwiICkuYWRkQ2xhc3MoICQubW9iaWxlLmFjdGl2ZUJ0bkNsYXNzICk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9IGVsc2UgaWYgKCBzZWxmLmlzTXVsdGlwbGUgKSB7XHJcblx0XHRcdFx0XHRpdGVtLmZpbmQoIFwiYVwiICkucmVtb3ZlQ2xhc3MoIFwidWktY2hlY2tib3gtb25cIiApLmFkZENsYXNzKCBcInVpLWNoZWNrYm94LW9mZlwiICk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHR9LFxyXG5cclxuXHRjbG9zZTogZnVuY3Rpb24oKSB7XHJcblx0XHRpZiAoIHRoaXMub3B0aW9ucy5kaXNhYmxlZCB8fCAhdGhpcy5pc09wZW4gKSB7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHR2YXIgc2VsZiA9IHRoaXM7XHJcblxyXG5cdFx0aWYgKCBzZWxmLm1lbnVUeXBlID09PSBcInBhZ2VcIiApIHtcclxuXHRcdFx0c2VsZi5tZW51UGFnZS5kaWFsb2coIFwiY2xvc2VcIiApO1xyXG5cdFx0XHRzZWxmLmxpc3QuYXBwZW5kVG8oIHNlbGYubGlzdGJveCApO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0c2VsZi5saXN0Ym94LnBvcHVwKCBcImNsb3NlXCIgKTtcclxuXHRcdH1cclxuXHJcblx0XHRzZWxmLl9mb2N1c0J1dHRvbigpO1xyXG5cdFx0Ly8gYWxsb3cgdGhlIGRpYWxvZyB0byBiZSBjbG9zZWQgYWdhaW5cclxuXHRcdHNlbGYuaXNPcGVuID0gZmFsc2U7XHJcblx0fSxcclxuXHJcblx0b3BlbjogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLmJ1dHRvbi5jbGljaygpO1xyXG5cdH0sXHJcblxyXG5cdF9mb2N1c01lbnVJdGVtOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBzZWxlY3RvciA9IHRoaXMubGlzdC5maW5kKCBcImEuXCIgKyAkLm1vYmlsZS5hY3RpdmVCdG5DbGFzcyApO1xyXG5cdFx0aWYgKCBzZWxlY3Rvci5sZW5ndGggPT09IDAgKSB7XHJcblx0XHRcdHNlbGVjdG9yID0gdGhpcy5saXN0LmZpbmQoIFwibGk6bm90KFwiICsgdW5mb2N1c2FibGVJdGVtU2VsZWN0b3IgKyBcIikgYS51aS1idG5cIiApO1xyXG5cdFx0fVxyXG5cdFx0c2VsZWN0b3IuZmlyc3QoKS5mb2N1cygpO1xyXG5cdH0sXHJcblxyXG5cdF9kZWNpZGVGb3JtYXQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIHNlbGYgPSB0aGlzLFxyXG5cdFx0XHQkd2luZG93ID0gdGhpcy53aW5kb3csXHJcblx0XHRcdHNlbGZMaXN0UGFyZW50ID0gc2VsZi5saXN0LnBhcmVudCgpLFxyXG5cdFx0XHRtZW51SGVpZ2h0ID0gc2VsZkxpc3RQYXJlbnQub3V0ZXJIZWlnaHQoKSxcclxuXHRcdFx0c2Nyb2xsVG9wID0gJHdpbmRvdy5zY3JvbGxUb3AoKSxcclxuXHRcdFx0YnRuT2Zmc2V0ID0gc2VsZi5idXR0b24ub2Zmc2V0KCkudG9wLFxyXG5cdFx0XHRzY3JlZW5IZWlnaHQgPSAkd2luZG93LmhlaWdodCgpO1xyXG5cclxuXHRcdGlmICggbWVudUhlaWdodCA+IHNjcmVlbkhlaWdodCAtIDgwIHx8ICEkLnN1cHBvcnQuc2Nyb2xsVG9wICkge1xyXG5cclxuXHRcdFx0c2VsZi5tZW51UGFnZS5hcHBlbmRUbyggJC5tb2JpbGUucGFnZUNvbnRhaW5lciApLnBhZ2UoKTtcclxuXHRcdFx0c2VsZi5tZW51UGFnZUNvbnRlbnQgPSBzZWxmLm1lbnVQYWdlLmZpbmQoIFwiLnVpLWNvbnRlbnRcIiApO1xyXG5cdFx0XHRzZWxmLm1lbnVQYWdlQ2xvc2UgPSBzZWxmLm1lbnVQYWdlLmZpbmQoIFwiLnVpLWhlYWRlciBhXCIgKTtcclxuXHJcblx0XHRcdC8vIHByZXZlbnQgdGhlIHBhcmVudCBwYWdlIGZyb20gYmVpbmcgcmVtb3ZlZCBmcm9tIHRoZSBET00sXHJcblx0XHRcdC8vIG90aGVyd2lzZSB0aGUgcmVzdWx0cyBvZiBzZWxlY3RpbmcgYSBsaXN0IGl0ZW0gaW4gdGhlIGRpYWxvZ1xyXG5cdFx0XHQvLyBmYWxsIGludG8gYSBibGFjayBob2xlXHJcblx0XHRcdHNlbGYudGhpc1BhZ2UudW5iaW5kKCBcInBhZ2VoaWRlLnJlbW92ZVwiICk7XHJcblxyXG5cdFx0XHQvL2ZvciBXZWJPUy9PcGVyYSBNaW5pIChzZXQgbGFzdHNjcm9sbCB1c2luZyBidXR0b24gb2Zmc2V0KVxyXG5cdFx0XHRpZiAoIHNjcm9sbFRvcCA9PT0gMCAmJiBidG5PZmZzZXQgPiBzY3JlZW5IZWlnaHQgKSB7XHJcblx0XHRcdFx0c2VsZi50aGlzUGFnZS5vbmUoIFwicGFnZWhpZGVcIiwgZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHQkKCB0aGlzICkuanFtRGF0YSggXCJsYXN0U2Nyb2xsXCIsIGJ0bk9mZnNldCApO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRzZWxmLm1lbnVQYWdlLm9uZSgge1xyXG5cdFx0XHRcdHBhZ2VzaG93OiAkLnByb3h5KCB0aGlzLCBcIl9mb2N1c01lbnVJdGVtXCIgKSxcclxuXHRcdFx0XHRwYWdlaGlkZTogJC5wcm94eSggdGhpcywgXCJjbG9zZVwiIClcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHRzZWxmLm1lbnVUeXBlID0gXCJwYWdlXCI7XHJcblx0XHRcdHNlbGYubWVudVBhZ2VDb250ZW50LmFwcGVuZCggc2VsZi5saXN0ICk7XHJcblx0XHRcdHNlbGYubWVudVBhZ2VcclxuXHRcdFx0XHQuZmluZCggXCJkaXYgLnVpLXRpdGxlXCIgKVxyXG5cdFx0XHRcdFx0LnRleHQoIHNlbGYubGFiZWwuZ2V0RW5jb2RlZFRleHQoKSB8fCBzZWxmLnBsYWNlaG9sZGVyICk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRzZWxmLm1lbnVUeXBlID0gXCJvdmVybGF5XCI7XHJcblxyXG5cdFx0XHRzZWxmLmxpc3Rib3gub25lKCB7IHBvcHVwYWZ0ZXJvcGVuOiAkLnByb3h5KCB0aGlzLCBcIl9mb2N1c01lbnVJdGVtXCIgKSB9ICk7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X2J1aWxkTGlzdDogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgc2VsZiA9IHRoaXMsXHJcblx0XHRcdG8gPSB0aGlzLm9wdGlvbnMsXHJcblx0XHRcdHBsYWNlaG9sZGVyID0gdGhpcy5wbGFjZWhvbGRlcixcclxuXHRcdFx0bmVlZFBsYWNlaG9sZGVyID0gdHJ1ZSxcclxuXHRcdFx0ZGF0YUljb24gPSBcImZhbHNlXCIsXHJcblx0XHRcdCRvcHRpb25zLCBudW1PcHRpb25zLCBzZWxlY3QsXHJcblx0XHRcdGRhdGFQcmVmaXggPSBcImRhdGEtXCIgKyAkLm1vYmlsZS5ucyxcclxuXHRcdFx0ZGF0YUluZGV4QXR0ciA9IGRhdGFQcmVmaXggKyBcIm9wdGlvbi1pbmRleFwiLFxyXG5cdFx0XHRkYXRhSWNvbkF0dHIgPSBkYXRhUHJlZml4ICsgXCJpY29uXCIsXHJcblx0XHRcdGRhdGFSb2xlQXR0ciA9IGRhdGFQcmVmaXggKyBcInJvbGVcIixcclxuXHRcdFx0ZGF0YVBsYWNlaG9sZGVyQXR0ciA9IGRhdGFQcmVmaXggKyBcInBsYWNlaG9sZGVyXCIsXHJcblx0XHRcdGZyYWdtZW50ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLFxyXG5cdFx0XHRpc1BsYWNlaG9sZGVySXRlbSA9IGZhbHNlLFxyXG5cdFx0XHRvcHRHcm91cCxcclxuXHRcdFx0aSxcclxuXHRcdFx0b3B0aW9uLCAkb3B0aW9uLCBwYXJlbnQsIHRleHQsIGFuY2hvciwgY2xhc3NlcyxcclxuXHRcdFx0b3B0TGFiZWwsIGRpdmlkZXIsIGl0ZW07XHJcblxyXG5cdFx0c2VsZi5saXN0LmVtcHR5KCkuZmlsdGVyKCBcIi51aS1saXN0dmlld1wiICkubGlzdHZpZXcoIFwiZGVzdHJveVwiICk7XHJcblx0XHQkb3B0aW9ucyA9IHRoaXMuX3NlbGVjdE9wdGlvbnMoKTtcclxuXHRcdG51bU9wdGlvbnMgPSAkb3B0aW9ucy5sZW5ndGg7XHJcblx0XHRzZWxlY3QgPSB0aGlzLnNlbGVjdFsgMCBdO1xyXG5cclxuXHRcdGZvciAoIGkgPSAwOyBpIDwgbnVtT3B0aW9ucztpKyssIGlzUGxhY2Vob2xkZXJJdGVtID0gZmFsc2UpIHtcclxuXHRcdFx0b3B0aW9uID0gJG9wdGlvbnNbaV07XHJcblx0XHRcdCRvcHRpb24gPSAkKCBvcHRpb24gKTtcclxuXHJcblx0XHRcdC8vIERvIG5vdCBjcmVhdGUgb3B0aW9ucyBiYXNlZCBvbiB1aS1zY3JlZW4taGlkZGVuIHNlbGVjdCBvcHRpb25zXHJcblx0XHRcdGlmICggJG9wdGlvbi5oYXNDbGFzcyggXCJ1aS1zY3JlZW4taGlkZGVuXCIgKSApIHtcclxuXHRcdFx0XHRjb250aW51ZTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0cGFyZW50ID0gb3B0aW9uLnBhcmVudE5vZGU7XHJcblx0XHRcdGNsYXNzZXMgPSBbXTtcclxuXHJcblx0XHRcdC8vIEFsdGhvdWdoIHVzaW5nIC50ZXh0KCkgaGVyZSByYWlzZXMgdGhlIHJpc2sgdGhhdCwgd2hlbiB3ZSBsYXRlciBwYXN0ZSB0aGlzIGludG8gdGhlXHJcblx0XHRcdC8vIGxpc3QgaXRlbSB3ZSBlbmQgdXAgcGFzdGluZyBwb3NzaWJseSBtYWxpY2lvdXMgdGhpbmdzIGxpa2UgPHNjcmlwdD4gdGFncywgdGhhdCByaXNrXHJcblx0XHRcdC8vIG9ubHkgYXJpc2VzIGlmIHdlIGRvIHNvbWV0aGluZyBsaWtlICQoIFwiPGxpPjxhIGhyZWY9JyMnPlwiICsgdGV4dCArIFwiPC9hPjwvbGk+XCIgKS4gV2VcclxuXHRcdFx0Ly8gZG9uJ3QgZG8gdGhhdC4gV2UgZG8gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoIHRleHQgKSBpbnN0ZWFkLCB3aGljaCBndWFyYW50ZWVzIHRoYXRcclxuXHRcdFx0Ly8gd2hhdGV2ZXIgd2UgcGFzdGUgaW4gd2lsbCBlbmQgdXAgYXMgdGV4dCwgd2l0aCBjaGFyYWN0ZXJzIGxpa2UgPCwgPiBhbmQgJiBlc2NhcGVkLlxyXG5cdFx0XHR0ZXh0ID0gJG9wdGlvbi50ZXh0KCk7XHJcblx0XHRcdGFuY2hvciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwiYVwiICk7XHJcblx0XHRcdGFuY2hvci5zZXRBdHRyaWJ1dGUoIFwiaHJlZlwiLCBcIiNcIiApO1xyXG5cdFx0XHRhbmNob3IuYXBwZW5kQ2hpbGQoIGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCB0ZXh0ICkgKTtcclxuXHJcblx0XHRcdC8vIEFyZSB3ZSBpbnNpZGUgYW4gb3B0Z3JvdXA/XHJcblx0XHRcdGlmICggcGFyZW50ICE9PSBzZWxlY3QgJiYgcGFyZW50Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09IFwib3B0Z3JvdXBcIiApIHtcclxuXHRcdFx0XHRvcHRMYWJlbCA9IHBhcmVudC5nZXRBdHRyaWJ1dGUoIFwibGFiZWxcIiApO1xyXG5cdFx0XHRcdGlmICggb3B0TGFiZWwgIT09IG9wdEdyb3VwICkge1xyXG5cdFx0XHRcdFx0ZGl2aWRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwibGlcIiApO1xyXG5cdFx0XHRcdFx0ZGl2aWRlci5zZXRBdHRyaWJ1dGUoIGRhdGFSb2xlQXR0ciwgXCJsaXN0LWRpdmlkZXJcIiApO1xyXG5cdFx0XHRcdFx0ZGl2aWRlci5zZXRBdHRyaWJ1dGUoIFwicm9sZVwiLCBcIm9wdGlvblwiICk7XHJcblx0XHRcdFx0XHRkaXZpZGVyLnNldEF0dHJpYnV0ZSggXCJ0YWJpbmRleFwiLCBcIi0xXCIgKTtcclxuXHRcdFx0XHRcdGRpdmlkZXIuYXBwZW5kQ2hpbGQoIGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCBvcHRMYWJlbCApICk7XHJcblx0XHRcdFx0XHRmcmFnbWVudC5hcHBlbmRDaGlsZCggZGl2aWRlciApO1xyXG5cdFx0XHRcdFx0b3B0R3JvdXAgPSBvcHRMYWJlbDtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmICggbmVlZFBsYWNlaG9sZGVyICYmICggIW9wdGlvbi5nZXRBdHRyaWJ1dGUoIFwidmFsdWVcIiApIHx8IHRleHQubGVuZ3RoID09PSAwIHx8ICRvcHRpb24uanFtRGF0YSggXCJwbGFjZWhvbGRlclwiICkgKSApIHtcclxuXHRcdFx0XHRuZWVkUGxhY2Vob2xkZXIgPSBmYWxzZTtcclxuXHRcdFx0XHRpc1BsYWNlaG9sZGVySXRlbSA9IHRydWU7XHJcblxyXG5cdFx0XHRcdC8vIElmIHdlIGhhdmUgaWRlbnRpZmllZCBhIHBsYWNlaG9sZGVyLCByZWNvcmQgdGhlIGZhY3QgdGhhdCBpdCB3YXNcclxuXHRcdFx0XHQvLyB1cyB3aG8gaGF2ZSBhZGRlZCB0aGUgcGxhY2Vob2xkZXIgdG8gdGhlIG9wdGlvbiBhbmQgbWFyayBpdFxyXG5cdFx0XHRcdC8vIHJldHJvYWN0aXZlbHkgaW4gdGhlIHNlbGVjdCBhcyB3ZWxsXHJcblx0XHRcdFx0aWYgKCBudWxsID09PSBvcHRpb24uZ2V0QXR0cmlidXRlKCBkYXRhUGxhY2Vob2xkZXJBdHRyICkgKSB7XHJcblx0XHRcdFx0XHR0aGlzLl9yZW1vdmVQbGFjZWhvbGRlckF0dHIgPSB0cnVlO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRvcHRpb24uc2V0QXR0cmlidXRlKCBkYXRhUGxhY2Vob2xkZXJBdHRyLCB0cnVlICk7XHJcblx0XHRcdFx0aWYgKCBvLmhpZGVQbGFjZWhvbGRlck1lbnVJdGVtcyApIHtcclxuXHRcdFx0XHRcdGNsYXNzZXMucHVzaCggXCJ1aS1zY3JlZW4taGlkZGVuXCIgKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0aWYgKCBwbGFjZWhvbGRlciAhPT0gdGV4dCApIHtcclxuXHRcdFx0XHRcdHBsYWNlaG9sZGVyID0gc2VsZi5wbGFjZWhvbGRlciA9IHRleHQ7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJsaVwiICk7XHJcblx0XHRcdGlmICggb3B0aW9uLmRpc2FibGVkICkge1xyXG5cdFx0XHRcdGNsYXNzZXMucHVzaCggXCJ1aS1zdGF0ZS1kaXNhYmxlZFwiICk7XHJcblx0XHRcdFx0aXRlbS5zZXRBdHRyaWJ1dGUoIFwiYXJpYS1kaXNhYmxlZFwiLCB0cnVlICk7XHJcblx0XHRcdH1cclxuXHRcdFx0aXRlbS5zZXRBdHRyaWJ1dGUoIGRhdGFJbmRleEF0dHIsIGkgKTtcclxuXHRcdFx0aXRlbS5zZXRBdHRyaWJ1dGUoIGRhdGFJY29uQXR0ciwgZGF0YUljb24gKTtcclxuXHRcdFx0aWYgKCBpc1BsYWNlaG9sZGVySXRlbSApIHtcclxuXHRcdFx0XHRpdGVtLnNldEF0dHJpYnV0ZSggZGF0YVBsYWNlaG9sZGVyQXR0ciwgdHJ1ZSApO1xyXG5cdFx0XHR9XHJcblx0XHRcdGl0ZW0uY2xhc3NOYW1lID0gY2xhc3Nlcy5qb2luKCBcIiBcIiApO1xyXG5cdFx0XHRpdGVtLnNldEF0dHJpYnV0ZSggXCJyb2xlXCIsIFwib3B0aW9uXCIgKTtcclxuXHRcdFx0YW5jaG9yLnNldEF0dHJpYnV0ZSggXCJ0YWJpbmRleFwiLCBcIi0xXCIgKTtcclxuXHRcdFx0aWYgKCB0aGlzLmlzTXVsdGlwbGUgKSB7XHJcblx0XHRcdFx0JCggYW5jaG9yICkuYWRkQ2xhc3MoIFwidWktYnRuIHVpLWNoZWNrYm94LW9mZiB1aS1idG4taWNvbi1yaWdodFwiICk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGl0ZW0uYXBwZW5kQ2hpbGQoIGFuY2hvciApO1xyXG5cdFx0XHRmcmFnbWVudC5hcHBlbmRDaGlsZCggaXRlbSApO1xyXG5cdFx0fVxyXG5cclxuXHRcdHNlbGYubGlzdFswXS5hcHBlbmRDaGlsZCggZnJhZ21lbnQgKTtcclxuXHJcblx0XHQvLyBIaWRlIGhlYWRlciBpZiBpdCdzIG5vdCBhIG11bHRpc2VsZWN0IGFuZCB0aGVyZSdzIG5vIHBsYWNlaG9sZGVyXHJcblx0XHRpZiAoICF0aGlzLmlzTXVsdGlwbGUgJiYgIXBsYWNlaG9sZGVyLmxlbmd0aCApIHtcclxuXHRcdFx0dGhpcy5oZWFkZXIuYWRkQ2xhc3MoIFwidWktc2NyZWVuLWhpZGRlblwiICk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHR0aGlzLmhlYWRlclRpdGxlLnRleHQoIHRoaXMucGxhY2Vob2xkZXIgKTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBOb3cgcG9wdWxhdGVkLCBjcmVhdGUgbGlzdHZpZXdcclxuXHRcdHNlbGYubGlzdC5saXN0dmlldygpO1xyXG5cdH0sXHJcblxyXG5cdF9idXR0b246IGZ1bmN0aW9uKCkge1xyXG5cdFx0cmV0dXJuIHRoaXMub3B0aW9ucy5uYXRpdmVNZW51ID9cclxuXHRcdFx0dGhpcy5fc3VwZXIoKSA6XHJcblx0XHRcdCQoIFwiPGE+XCIsIHtcclxuXHRcdFx0XHRcImhyZWZcIjogXCIjXCIsXHJcblx0XHRcdFx0XCJyb2xlXCI6IFwiYnV0dG9uXCIsXHJcblx0XHRcdFx0Ly8gVE9ETyB2YWx1ZSBpcyB1bmRlZmluZWQgYXQgY3JlYXRpb25cclxuXHRcdFx0XHRcImlkXCI6IHRoaXMuYnV0dG9uSWQsXHJcblx0XHRcdFx0XCJhcmlhLWhhc3BvcHVwXCI6IFwidHJ1ZVwiLFxyXG5cclxuXHRcdFx0XHQvLyBUT0RPIHZhbHVlIGlzIHVuZGVmaW5lZCBhdCBjcmVhdGlvblxyXG5cdFx0XHRcdFwiYXJpYS1vd25zXCI6IHRoaXMubWVudUlkXHJcblx0XHRcdH0pO1xyXG5cdH0sXHJcblxyXG5cdF9kZXN0cm95OiBmdW5jdGlvbigpIHtcclxuXHJcblx0XHRpZiAoICF0aGlzLm9wdGlvbnMubmF0aXZlTWVudSApIHtcclxuXHRcdFx0dGhpcy5jbG9zZSgpO1xyXG5cclxuXHRcdFx0Ly8gUmVzdG9yZSB0aGUgdGFiaW5kZXggYXR0cmlidXRlIHRvIGl0cyBvcmlnaW5hbCB2YWx1ZVxyXG5cdFx0XHRpZiAoIHRoaXMuX29yaWdUYWJJbmRleCAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRcdGlmICggdGhpcy5fb3JpZ1RhYkluZGV4ICE9PSBmYWxzZSApIHtcclxuXHRcdFx0XHRcdHRoaXMuc2VsZWN0LmF0dHIoIFwidGFiaW5kZXhcIiwgdGhpcy5fb3JpZ1RhYkluZGV4ICk7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdHRoaXMuc2VsZWN0LnJlbW92ZUF0dHIoIFwidGFiaW5kZXhcIiApO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gUmVtb3ZlIHRoZSBwbGFjZWhvbGRlciBhdHRyaWJ1dGUgaWYgd2Ugd2VyZSB0aGUgb25lcyB0byBhZGQgaXRcclxuXHRcdFx0aWYgKCB0aGlzLl9yZW1vdmVQbGFjZWhvbGRlckF0dHIgKSB7XHJcblx0XHRcdFx0dGhpcy5fc2VsZWN0T3B0aW9ucygpLnJlbW92ZUF0dHIoIFwiZGF0YS1cIiArICQubW9iaWxlLm5zICsgXCJwbGFjZWhvbGRlclwiICk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIFJlbW92ZSB0aGUgcG9wdXBcclxuXHRcdFx0dGhpcy5saXN0Ym94LnJlbW92ZSgpO1xyXG5cclxuXHRcdFx0Ly8gUmVtb3ZlIHRoZSBkaWFsb2dcclxuXHRcdFx0dGhpcy5tZW51UGFnZS5yZW1vdmUoKTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBDaGFpbiB1cFxyXG5cdFx0dGhpcy5fc3VwZXIoKTtcclxuXHR9XHJcbn0pO1xyXG5cclxufSkoIGpRdWVyeSApO1xyXG5cclxuXHJcbi8vIGJ1dHRvbk1hcmt1cCBpcyBkZXByZWNhdGVkIGFzIG9mIDEuNC4wIGFuZCB3aWxsIGJlIHJlbW92ZWQgaW4gMS41LjAuXHJcblxyXG4oZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcclxuXHJcbi8vIEdlbmVyYWwgcG9saWN5OiBEbyBub3QgYWNjZXNzIGRhdGEtKiBhdHRyaWJ1dGVzIGV4Y2VwdCBkdXJpbmcgZW5oYW5jZW1lbnQuXHJcbi8vIEluIGFsbCBvdGhlciBjYXNlcyB3ZSBkZXRlcm1pbmUgdGhlIHN0YXRlIG9mIHRoZSBidXR0b24gZXhjbHVzaXZlbHkgZnJvbSBpdHNcclxuLy8gY2xhc3NOYW1lLiBUaGF0J3Mgd2h5IG9wdGlvbnNUb0NsYXNzZXMgZXhwZWN0cyBhIGZ1bGwgY29tcGxlbWVudCBvZiBvcHRpb25zLFxyXG4vLyBhbmQgdGhlIGpRdWVyeSBwbHVnaW4gY29tcGxldGVzIHRoZSBzZXQgb2Ygb3B0aW9ucyBmcm9tIHRoZSBkZWZhdWx0IHZhbHVlcy5cclxuXHJcbi8vIE1hcCBjbGFzc2VzIHRvIGJ1dHRvbk1hcmt1cCBib29sZWFuIG9wdGlvbnMgLSB1c2VkIGluIGNsYXNzTmFtZVRvT3B0aW9ucygpXHJcbnZhciByZXZlcnNlQm9vbE9wdGlvbk1hcCA9IHtcclxuXHRcdFwidWktc2hhZG93XCIgOiBcInNoYWRvd1wiLFxyXG5cdFx0XCJ1aS1jb3JuZXItYWxsXCIgOiBcImNvcm5lcnNcIixcclxuXHRcdFwidWktYnRuLWlubGluZVwiIDogXCJpbmxpbmVcIixcclxuXHRcdFwidWktc2hhZG93LWljb25cIiA6IFwiaWNvbnNoYWRvd1wiLCAvKiBUT0RPOiBSZW1vdmUgaW4gMS41ICovXHJcblx0XHRcInVpLW1pbmlcIiA6IFwibWluaVwiXHJcblx0fSxcclxuXHRnZXRBdHRyRml4ZWQgPSBmdW5jdGlvbigpIHtcclxuXHRcdHZhciByZXQgPSAkLm1vYmlsZS5nZXRBdHRyaWJ1dGUuYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApO1xyXG5cclxuXHRcdHJldHVybiAoIHJldCA9PSBudWxsID8gdW5kZWZpbmVkIDogcmV0ICk7XHJcblx0fSxcclxuXHRjYXBpdGFsTGV0dGVyc1JFID0gL1tBLVpdL2c7XHJcblxyXG4vLyBvcHRpb25zVG9DbGFzc2VzOlxyXG4vLyBAb3B0aW9uczogQSBjb21wbGV0ZSBzZXQgb2Ygb3B0aW9ucyB0byBjb252ZXJ0IHRvIGNsYXNzIG5hbWVzLlxyXG4vLyBAZXhpc3RpbmdDbGFzc2VzOiBleHRyYSBjbGFzc2VzIHRvIGFkZCB0byB0aGUgcmVzdWx0XHJcbi8vXHJcbi8vIENvbnZlcnRzIEBvcHRpb25zIHRvIGJ1dHRvbk1hcmt1cCBjbGFzc2VzIGFuZCByZXR1cm5zIHRoZSByZXN1bHQgYXMgYW4gYXJyYXlcclxuLy8gdGhhdCBjYW4gYmUgY29udmVydGVkIHRvIGFuIGVsZW1lbnQncyBjbGFzc05hbWUgd2l0aCAuam9pbiggXCIgXCIgKS4gQWxsXHJcbi8vIHBvc3NpYmxlIG9wdGlvbnMgbXVzdCBiZSBzZXQgaW5zaWRlIEBvcHRpb25zLiBVc2UgJC5mbi5idXR0b25NYXJrdXAuZGVmYXVsdHNcclxuLy8gdG8gZ2V0IGEgY29tcGxldGUgc2V0IGFuZCB1c2UgJC5leHRlbmQgdG8gb3ZlcnJpZGUgeW91ciBjaG9pY2Ugb2Ygb3B0aW9uc1xyXG4vLyBmcm9tIHRoYXQgc2V0LlxyXG5mdW5jdGlvbiBvcHRpb25zVG9DbGFzc2VzKCBvcHRpb25zLCBleGlzdGluZ0NsYXNzZXMgKSB7XHJcblx0dmFyIGNsYXNzZXMgPSBleGlzdGluZ0NsYXNzZXMgPyBleGlzdGluZ0NsYXNzZXMgOiBbXTtcclxuXHJcblx0Ly8gQWRkIGNsYXNzZXMgdG8gdGhlIGFycmF5IC0gZmlyc3QgdWktYnRuXHJcblx0Y2xhc3Nlcy5wdXNoKCBcInVpLWJ0blwiICk7XHJcblxyXG5cdC8vIElmIHRoZXJlIGlzIGEgdGhlbWVcclxuXHRpZiAoIG9wdGlvbnMudGhlbWUgKSB7XHJcblx0XHRjbGFzc2VzLnB1c2goIFwidWktYnRuLVwiICsgb3B0aW9ucy50aGVtZSApO1xyXG5cdH1cclxuXHJcblx0Ly8gSWYgdGhlcmUncyBhbiBpY29uLCBhZGQgdGhlIGljb24tcmVsYXRlZCBjbGFzc2VzXHJcblx0aWYgKCBvcHRpb25zLmljb24gKSB7XHJcblx0XHRjbGFzc2VzID0gY2xhc3Nlcy5jb25jYXQoW1xyXG5cdFx0XHRcInVpLWljb24tXCIgKyBvcHRpb25zLmljb24sXHJcblx0XHRcdFwidWktYnRuLWljb24tXCIgKyBvcHRpb25zLmljb25wb3NcclxuXHRcdF0pO1xyXG5cdFx0aWYgKCBvcHRpb25zLmljb25zaGFkb3cgKSB7XHJcblx0XHRcdGNsYXNzZXMucHVzaCggXCJ1aS1zaGFkb3ctaWNvblwiICk7IC8qIFRPRE86IFJlbW92ZSBpbiAxLjUgKi9cclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8vIEFkZCB0aGUgYXBwcm9wcmlhdGUgY2xhc3MgZm9yIGVhY2ggYm9vbGVhbiBvcHRpb25cclxuXHRpZiAoIG9wdGlvbnMuaW5saW5lICkge1xyXG5cdFx0Y2xhc3Nlcy5wdXNoKCBcInVpLWJ0bi1pbmxpbmVcIiApO1xyXG5cdH1cclxuXHRpZiAoIG9wdGlvbnMuc2hhZG93ICkge1xyXG5cdFx0Y2xhc3Nlcy5wdXNoKCBcInVpLXNoYWRvd1wiICk7XHJcblx0fVxyXG5cdGlmICggb3B0aW9ucy5jb3JuZXJzICkge1xyXG5cdFx0Y2xhc3Nlcy5wdXNoKCBcInVpLWNvcm5lci1hbGxcIiApO1xyXG5cdH1cclxuXHRpZiAoIG9wdGlvbnMubWluaSApIHtcclxuXHRcdGNsYXNzZXMucHVzaCggXCJ1aS1taW5pXCIgKTtcclxuXHR9XHJcblxyXG5cdC8vIENyZWF0ZSBhIHN0cmluZyBmcm9tIHRoZSBhcnJheSBhbmQgcmV0dXJuIGl0XHJcblx0cmV0dXJuIGNsYXNzZXM7XHJcbn1cclxuXHJcbi8vIGNsYXNzTmFtZVRvT3B0aW9uczpcclxuLy8gQGNsYXNzZXM6IEEgc3RyaW5nIGNvbnRhaW5pbmcgYSAuY2xhc3NOYW1lLXN0eWxlIHNwYWNlLXNlcGFyYXRlZCBjbGFzcyBsaXN0XHJcbi8vXHJcbi8vIExvb3BzIG92ZXIgQGNsYXNzZXMgYW5kIGNhbGN1bGF0ZXMgYW4gb3B0aW9ucyBvYmplY3QgYmFzZWQgb24gdGhlXHJcbi8vIGJ1dHRvbk1hcmt1cC1yZWxhdGVkIGNsYXNzZXMgaXQgZmluZHMuIEl0IHJlY29yZHMgdW5yZWNvZ25pemVkIGNsYXNzZXMgaW4gYW5cclxuLy8gYXJyYXkuXHJcbi8vXHJcbi8vIFJldHVybnM6IEFuIG9iamVjdCBjb250YWluaW5nIHRoZSBmb2xsb3dpbmcgaXRlbXM6XHJcbi8vXHJcbi8vIFwib3B0aW9uc1wiOiBidXR0b25NYXJrdXAgb3B0aW9ucyBmb3VuZCB0byBiZSBwcmVzZW50IGJlY2F1c2Ugb2YgdGhlXHJcbi8vIHByZXNlbmNlL2Fic2VuY2Ugb2YgY29ycmVzcG9uZGluZyBjbGFzc2VzXHJcbi8vXHJcbi8vIFwidW5rbm93bkNsYXNzZXNcIjogYSBzdHJpbmcgY29udGFpbmluZyBhbGwgdGhlIG5vbi1idXR0b25NYXJrdXAtcmVsYXRlZFxyXG4vLyBjbGFzc2VzIGZvdW5kIGluIEBjbGFzc2VzXHJcbi8vXHJcbi8vIFwiYWxyZWFkeUVuaGFuY2VkXCI6IEEgYm9vbGVhbiBpbmRpY2F0aW5nIHdoZXRoZXIgdGhlIHVpLWJ0biBjbGFzcyB3YXMgYW1vbmdcclxuLy8gdGhvc2UgZm91bmQgdG8gYmUgcHJlc2VudFxyXG5mdW5jdGlvbiBjbGFzc05hbWVUb09wdGlvbnMoIGNsYXNzZXMgKSB7XHJcblx0dmFyIGlkeCwgbWFwLCB1bmtub3duQ2xhc3MsXHJcblx0XHRhbHJlYWR5RW5oYW5jZWQgPSBmYWxzZSxcclxuXHRcdG5vSWNvbiA9IHRydWUsXHJcblx0XHRvID0ge1xyXG5cdFx0XHRpY29uOiBcIlwiLFxyXG5cdFx0XHRpbmxpbmU6IGZhbHNlLFxyXG5cdFx0XHRzaGFkb3c6IGZhbHNlLFxyXG5cdFx0XHRjb3JuZXJzOiBmYWxzZSxcclxuXHRcdFx0aWNvbnNoYWRvdzogZmFsc2UsXHJcblx0XHRcdG1pbmk6IGZhbHNlXHJcblx0XHR9LFxyXG5cdFx0dW5rbm93bkNsYXNzZXMgPSBbXTtcclxuXHJcblx0Y2xhc3NlcyA9IGNsYXNzZXMuc3BsaXQoIFwiIFwiICk7XHJcblxyXG5cdC8vIExvb3Agb3ZlciB0aGUgY2xhc3Nlc1xyXG5cdGZvciAoIGlkeCA9IDAgOyBpZHggPCBjbGFzc2VzLmxlbmd0aCA7IGlkeCsrICkge1xyXG5cclxuXHRcdC8vIEFzc3VtZSBpdCdzIGFuIHVucmVjb2duaXplZCBjbGFzc1xyXG5cdFx0dW5rbm93bkNsYXNzID0gdHJ1ZTtcclxuXHJcblx0XHQvLyBSZWNvZ25pemUgYm9vbGVhbiBvcHRpb25zIGZyb20gdGhlIHByZXNlbmNlIG9mIGNsYXNzZXNcclxuXHRcdG1hcCA9IHJldmVyc2VCb29sT3B0aW9uTWFwWyBjbGFzc2VzWyBpZHggXSBdO1xyXG5cdFx0aWYgKCBtYXAgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0dW5rbm93bkNsYXNzID0gZmFsc2U7XHJcblx0XHRcdG9bIG1hcCBdID0gdHJ1ZTtcclxuXHJcblx0XHQvLyBSZWNvZ25pemUgdGhlIHByZXNlbmNlIG9mIGFuIGljb24gYW5kIGVzdGFibGlzaCB0aGUgaWNvbiBwb3NpdGlvblxyXG5cdFx0fSBlbHNlIGlmICggY2xhc3Nlc1sgaWR4IF0uaW5kZXhPZiggXCJ1aS1idG4taWNvbi1cIiApID09PSAwICkge1xyXG5cdFx0XHR1bmtub3duQ2xhc3MgPSBmYWxzZTtcclxuXHRcdFx0bm9JY29uID0gZmFsc2U7XHJcblx0XHRcdG8uaWNvbnBvcyA9IGNsYXNzZXNbIGlkeCBdLnN1YnN0cmluZyggMTIgKTtcclxuXHJcblx0XHQvLyBFc3RhYmxpc2ggd2hpY2ggaWNvbiBpcyBwcmVzZW50XHJcblx0XHR9IGVsc2UgaWYgKCBjbGFzc2VzWyBpZHggXS5pbmRleE9mKCBcInVpLWljb24tXCIgKSA9PT0gMCApIHtcclxuXHRcdFx0dW5rbm93bkNsYXNzID0gZmFsc2U7XHJcblx0XHRcdG8uaWNvbiA9IGNsYXNzZXNbIGlkeCBdLnN1YnN0cmluZyggOCApO1xyXG5cclxuXHRcdC8vIEVzdGFibGlzaCB0aGUgdGhlbWUgLSB0aGlzIHJlY29nbml6ZXMgb25lLWxldHRlciB0aGVtZSBzd2F0Y2ggbmFtZXNcclxuXHRcdH0gZWxzZSBpZiAoIGNsYXNzZXNbIGlkeCBdLmluZGV4T2YoIFwidWktYnRuLVwiICkgPT09IDAgJiYgY2xhc3Nlc1sgaWR4IF0ubGVuZ3RoID09PSA4ICkge1xyXG5cdFx0XHR1bmtub3duQ2xhc3MgPSBmYWxzZTtcclxuXHRcdFx0by50aGVtZSA9IGNsYXNzZXNbIGlkeCBdLnN1YnN0cmluZyggNyApO1xyXG5cclxuXHRcdC8vIFJlY29nbml6ZSB0aGF0IHRoaXMgZWxlbWVudCBoYXMgYWxyZWFkeSBiZWVuIGJ1dHRvbk1hcmt1cC1lbmhhbmNlZFxyXG5cdFx0fSBlbHNlIGlmICggY2xhc3Nlc1sgaWR4IF0gPT09IFwidWktYnRuXCIgKSB7XHJcblx0XHRcdHVua25vd25DbGFzcyA9IGZhbHNlO1xyXG5cdFx0XHRhbHJlYWR5RW5oYW5jZWQgPSB0cnVlO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIElmIHRoaXMgY2xhc3MgaGFzIG5vdCBiZWVuIHJlY29nbml6ZWQsIGFkZCBpdCB0byB0aGUgbGlzdFxyXG5cdFx0aWYgKCB1bmtub3duQ2xhc3MgKSB7XHJcblx0XHRcdHVua25vd25DbGFzc2VzLnB1c2goIGNsYXNzZXNbIGlkeCBdICk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvLyBJZiBhIFwidWktYnRuLWljb24tKlwiIGljb24gcG9zaXRpb24gY2xhc3MgaXMgYWJzZW50IHRoZXJlIGNhbm5vdCBiZSBhbiBpY29uXHJcblx0aWYgKCBub0ljb24gKSB7XHJcblx0XHRvLmljb24gPSBcIlwiO1xyXG5cdH1cclxuXHJcblx0cmV0dXJuIHtcclxuXHRcdG9wdGlvbnM6IG8sXHJcblx0XHR1bmtub3duQ2xhc3NlczogdW5rbm93bkNsYXNzZXMsXHJcblx0XHRhbHJlYWR5RW5oYW5jZWQ6IGFscmVhZHlFbmhhbmNlZFxyXG5cdH07XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNhbWVsQ2FzZTJIeXBoZW5hdGVkKCBjICkge1xyXG5cdHJldHVybiBcIi1cIiArIGMudG9Mb3dlckNhc2UoKTtcclxufVxyXG5cclxuLy8gJC5mbi5idXR0b25NYXJrdXA6XHJcbi8vIERPTTogZ2V0cy9zZXRzIC5jbGFzc05hbWVcclxuLy9cclxuLy8gQG9wdGlvbnM6IG9wdGlvbnMgdG8gYXBwbHkgdG8gdGhlIGVsZW1lbnRzIGluIHRoZSBqUXVlcnkgb2JqZWN0XHJcbi8vIEBvdmVyd3JpdGVDbGFzc2VzOiBib29sZWFuIGluZGljYXRpbmcgd2hldGhlciB0byBob25vdXIgZXhpc3RpbmcgY2xhc3Nlc1xyXG4vL1xyXG4vLyBDYWxjdWxhdGVzIHRoZSBjbGFzc2VzIHRvIGFwcGx5IHRvIHRoZSBlbGVtZW50cyBpbiB0aGUgalF1ZXJ5IG9iamVjdCBiYXNlZCBvblxyXG4vLyB0aGUgb3B0aW9ucyBwYXNzZWQgaW4uIElmIEBvdmVyd3JpdGVDbGFzc2VzIGlzIHRydWUsIGl0IHNldHMgdGhlIGNsYXNzTmFtZVxyXG4vLyBwcm9wZXJ0eSBvZiBlYWNoIGVsZW1lbnQgaW4gdGhlIGpRdWVyeSBvYmplY3QgdG8gdGhlIGJ1dHRvbk1hcmt1cCBjbGFzc2VzXHJcbi8vIGl0IGNhbGN1bGF0ZXMgYmFzZWQgb24gdGhlIG9wdGlvbnMgcGFzc2VkIGluLlxyXG4vL1xyXG4vLyBJZiB5b3Ugd2lzaCB0byBwcmVzZXJ2ZSBhbnkgY2xhc3NlcyB0aGF0IGFyZSBhbHJlYWR5IHByZXNlbnQgb24gdGhlIGVsZW1lbnRzXHJcbi8vIGluc2lkZSB0aGUgalF1ZXJ5IG9iamVjdCwgaW5jbHVkaW5nIGJ1dHRvbk1hcmt1cC1yZWxhdGVkIGNsYXNzZXMgdGhhdCB3ZXJlXHJcbi8vIGFkZGVkIGJ5IGEgcHJldmlvdXMgY2FsbCB0byAkLmZuLmJ1dHRvbk1hcmt1cCgpIG9yIGR1cmluZyBwYWdlIGVuaGFuY2VtZW50XHJcbi8vIHRoZW4geW91IHNob3VsZCBvbWl0IEBvdmVyd3JpdGVDbGFzc2VzIG9yIHNldCBpdCB0byBmYWxzZS5cclxuJC5mbi5idXR0b25NYXJrdXAgPSBmdW5jdGlvbiggb3B0aW9ucywgb3ZlcndyaXRlQ2xhc3NlcyApIHtcclxuXHR2YXIgaWR4LCBkYXRhLCBlbCwgcmV0cmlldmVkT3B0aW9ucywgb3B0aW9uS2V5LFxyXG5cdFx0ZGVmYXVsdHMgPSAkLmZuLmJ1dHRvbk1hcmt1cC5kZWZhdWx0cztcclxuXHJcblx0Zm9yICggaWR4ID0gMCA7IGlkeCA8IHRoaXMubGVuZ3RoIDsgaWR4KysgKSB7XHJcblx0XHRlbCA9IHRoaXNbIGlkeCBdO1xyXG5cdFx0ZGF0YSA9IG92ZXJ3cml0ZUNsYXNzZXMgP1xyXG5cclxuXHRcdFx0Ly8gQXNzdW1lIHRoaXMgZWxlbWVudCBpcyBub3QgZW5oYW5jZWQgYW5kIGlnbm9yZSBpdHMgY2xhc3Nlc1xyXG5cdFx0XHR7IGFscmVhZHlFbmhhbmNlZDogZmFsc2UsIHVua25vd25DbGFzc2VzOiBbXSB9IDpcclxuXHJcblx0XHRcdC8vIE90aGVyd2lzZSBhbmFseXplIGV4aXN0aW5nIGNsYXNzZXMgdG8gZXN0YWJsaXNoIGV4aXN0aW5nIG9wdGlvbnMgYW5kXHJcblx0XHRcdC8vIGNsYXNzZXNcclxuXHRcdFx0Y2xhc3NOYW1lVG9PcHRpb25zKCBlbC5jbGFzc05hbWUgKTtcclxuXHJcblx0XHRyZXRyaWV2ZWRPcHRpb25zID0gJC5leHRlbmQoIHt9LFxyXG5cclxuXHRcdFx0Ly8gSWYgdGhlIGVsZW1lbnQgYWxyZWFkeSBoYXMgdGhlIGNsYXNzIHVpLWJ0biwgdGhlbiB3ZSBhc3N1bWUgdGhhdFxyXG5cdFx0XHQvLyBpdCBoYXMgcGFzc2VkIHRocm91Z2ggYnV0dG9uTWFya3VwIGJlZm9yZSAtIG90aGVyd2lzZSwgdGhlIG9wdGlvbnNcclxuXHRcdFx0Ly8gcmV0dXJuZWQgYnkgY2xhc3NOYW1lVG9PcHRpb25zIGRvIG5vdCBjb3JyZWN0bHkgcmVmbGVjdCB0aGUgc3RhdGUgb2ZcclxuXHRcdFx0Ly8gdGhlIGVsZW1lbnRcclxuXHRcdFx0KCBkYXRhLmFscmVhZHlFbmhhbmNlZCA/IGRhdGEub3B0aW9ucyA6IHt9ICksXHJcblxyXG5cdFx0XHQvLyBGaW5hbGx5LCBhcHBseSB0aGUgb3B0aW9ucyBwYXNzZWQgaW5cclxuXHRcdFx0b3B0aW9ucyApO1xyXG5cclxuXHRcdC8vIElmIHRoaXMgaXMgdGhlIGZpcnN0IGNhbGwgb24gdGhpcyBlbGVtZW50LCByZXRyaWV2ZSByZW1haW5pbmcgb3B0aW9uc1xyXG5cdFx0Ly8gZnJvbSB0aGUgZGF0YS1hdHRyaWJ1dGVzXHJcblx0XHRpZiAoICFkYXRhLmFscmVhZHlFbmhhbmNlZCApIHtcclxuXHRcdFx0Zm9yICggb3B0aW9uS2V5IGluIGRlZmF1bHRzICkge1xyXG5cdFx0XHRcdGlmICggcmV0cmlldmVkT3B0aW9uc1sgb3B0aW9uS2V5IF0gPT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0XHRcdHJldHJpZXZlZE9wdGlvbnNbIG9wdGlvbktleSBdID0gZ2V0QXR0ckZpeGVkKCBlbCxcclxuXHRcdFx0XHRcdFx0b3B0aW9uS2V5LnJlcGxhY2UoIGNhcGl0YWxMZXR0ZXJzUkUsIGNhbWVsQ2FzZTJIeXBoZW5hdGVkIClcclxuXHRcdFx0XHRcdCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0ZWwuY2xhc3NOYW1lID0gb3B0aW9uc1RvQ2xhc3NlcyhcclxuXHJcblx0XHRcdC8vIE1lcmdlIGFsbCB0aGUgb3B0aW9ucyBhbmQgYXBwbHkgdGhlbSBhcyBjbGFzc2VzXHJcblx0XHRcdCQuZXh0ZW5kKCB7fSxcclxuXHJcblx0XHRcdFx0Ly8gVGhlIGRlZmF1bHRzIGZvcm0gdGhlIGJhc2lzXHJcblx0XHRcdFx0ZGVmYXVsdHMsXHJcblxyXG5cdFx0XHRcdC8vIEFkZCB0aGUgY29tcHV0ZWQgb3B0aW9uc1xyXG5cdFx0XHRcdHJldHJpZXZlZE9wdGlvbnNcclxuXHRcdFx0KSxcclxuXHJcblx0XHRcdC8vIC4uLiBhbmQgcmUtYXBwbHkgYW55IHVucmVjb2duaXplZCBjbGFzc2VzIHRoYXQgd2VyZSBmb3VuZFxyXG5cdFx0XHRkYXRhLnVua25vd25DbGFzc2VzICkuam9pbiggXCIgXCIgKTtcclxuXHRcdGlmICggZWwudGFnTmFtZS50b0xvd2VyQ2FzZSgpICE9PSBcImJ1dHRvblwiICkge1xyXG5cdFx0XHRlbC5zZXRBdHRyaWJ1dGUoIFwicm9sZVwiLCBcImJ1dHRvblwiICk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRyZXR1cm4gdGhpcztcclxufTtcclxuXHJcbi8vIGJ1dHRvbk1hcmt1cCBkZWZhdWx0cy4gVGhpcyBtdXN0IGJlIGEgY29tcGxldGUgc2V0LCBpLmUuLCBhIHZhbHVlIG11c3QgYmVcclxuLy8gZ2l2ZW4gaGVyZSBmb3IgYWxsIHJlY29nbml6ZWQgb3B0aW9uc1xyXG4kLmZuLmJ1dHRvbk1hcmt1cC5kZWZhdWx0cyA9IHtcclxuXHRpY29uOiBcIlwiLFxyXG5cdGljb25wb3M6IFwibGVmdFwiLFxyXG5cdHRoZW1lOiBudWxsLFxyXG5cdGlubGluZTogZmFsc2UsXHJcblx0c2hhZG93OiB0cnVlLFxyXG5cdGNvcm5lcnM6IHRydWUsXHJcblx0aWNvbnNoYWRvdzogZmFsc2UsIC8qIFRPRE86IFJlbW92ZSBpbiAxLjUuIE9wdGlvbiBkZXByZWNhdGVkIGluIDEuNC4gKi9cclxuXHRtaW5pOiBmYWxzZVxyXG59O1xyXG5cclxuJC5leHRlbmQoICQuZm4uYnV0dG9uTWFya3VwLCB7XHJcblx0aW5pdFNlbGVjdG9yOiBcImE6anFtRGF0YShyb2xlPSdidXR0b24nKSwgLnVpLWJhciA+IGEsIC51aS1iYXIgPiA6anFtRGF0YShyb2xlPSdjb250cm9sZ3JvdXAnKSA+IGEsIGJ1dHRvbjpub3QoOmpxbURhdGEocm9sZT0nbmF2YmFyJykgYnV0dG9uKVwiXHJcbn0pO1xyXG5cclxufSkoIGpRdWVyeSApO1xyXG5cclxuXHJcbihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xyXG5cclxuJC53aWRnZXQoIFwibW9iaWxlLmNvbnRyb2xncm91cFwiLCAkLmV4dGVuZCgge1xyXG5cdG9wdGlvbnM6IHtcclxuXHRcdGVuaGFuY2VkOiBmYWxzZSxcclxuXHRcdHRoZW1lOiBudWxsLFxyXG5cdFx0c2hhZG93OiBmYWxzZSxcclxuXHRcdGNvcm5lcnM6IHRydWUsXHJcblx0XHRleGNsdWRlSW52aXNpYmxlOiB0cnVlLFxyXG5cdFx0dHlwZTogXCJ2ZXJ0aWNhbFwiLFxyXG5cdFx0bWluaTogZmFsc2VcclxuXHR9LFxyXG5cclxuXHRfY3JlYXRlOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBlbGVtID0gdGhpcy5lbGVtZW50LFxyXG5cdFx0XHRvcHRzID0gdGhpcy5vcHRpb25zLFxyXG5cdFx0XHRrZWVwTmF0aXZlID0gJC5tb2JpbGUucGFnZS5wcm90b3R5cGUua2VlcE5hdGl2ZVNlbGVjdG9yKCk7XHJcblxyXG5cdFx0Ly8gUnVuIGJ1dHRvbm1hcmt1cFxyXG5cdFx0aWYgKCAkLmZuLmJ1dHRvbk1hcmt1cCApIHtcclxuXHRcdFx0dGhpcy5lbGVtZW50XHJcblx0XHRcdFx0LmZpbmQoICQuZm4uYnV0dG9uTWFya3VwLmluaXRTZWxlY3RvciApXHJcblx0XHRcdFx0Lm5vdCgga2VlcE5hdGl2ZSApXHJcblx0XHRcdFx0LmJ1dHRvbk1hcmt1cCgpO1xyXG5cdFx0fVxyXG5cdFx0Ly8gRW5oYW5jZSBjaGlsZCB3aWRnZXRzXHJcblx0XHQkLmVhY2goIHRoaXMuX2NoaWxkV2lkZ2V0cywgJC5wcm94eSggZnVuY3Rpb24oIG51bWJlciwgd2lkZ2V0TmFtZSApIHtcclxuXHRcdFx0aWYgKCAkLm1vYmlsZVsgd2lkZ2V0TmFtZSBdICkge1xyXG5cdFx0XHRcdHRoaXMuZWxlbWVudFxyXG5cdFx0XHRcdFx0LmZpbmQoICQubW9iaWxlWyB3aWRnZXROYW1lIF0uaW5pdFNlbGVjdG9yIClcclxuXHRcdFx0XHRcdC5ub3QoIGtlZXBOYXRpdmUgKVsgd2lkZ2V0TmFtZSBdKCk7XHJcblx0XHRcdH1cclxuXHRcdH0sIHRoaXMgKSk7XHJcblxyXG5cdFx0JC5leHRlbmQoIHRoaXMsIHtcclxuXHRcdFx0X3VpOiBudWxsLFxyXG5cdFx0XHRfaW5pdGlhbFJlZnJlc2g6IHRydWVcclxuXHRcdH0pO1xyXG5cclxuXHRcdGlmICggb3B0cy5lbmhhbmNlZCApIHtcclxuXHRcdFx0dGhpcy5fdWkgPSB7XHJcblx0XHRcdFx0Z3JvdXBMZWdlbmQ6IGVsZW0uY2hpbGRyZW4oIFwiLnVpLWNvbnRyb2xncm91cC1sYWJlbFwiICkuY2hpbGRyZW4oKSxcclxuXHRcdFx0XHRjaGlsZFdyYXBwZXI6IGVsZW0uY2hpbGRyZW4oIFwiLnVpLWNvbnRyb2xncm91cC1jb250cm9sc1wiIClcclxuXHRcdFx0fTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHRoaXMuX3VpID0gdGhpcy5fZW5oYW5jZSgpO1xyXG5cdFx0fVxyXG5cclxuXHR9LFxyXG5cclxuXHRfY2hpbGRXaWRnZXRzOiBbIFwiY2hlY2tib3hyYWRpb1wiLCBcInNlbGVjdG1lbnVcIiwgXCJidXR0b25cIiBdLFxyXG5cclxuXHRfdGhlbWVDbGFzc0Zyb21PcHRpb246IGZ1bmN0aW9uKCB2YWx1ZSApIHtcclxuXHRcdHJldHVybiAoIHZhbHVlID8gKCB2YWx1ZSA9PT0gXCJub25lXCIgPyBcIlwiIDogXCJ1aS1ncm91cC10aGVtZS1cIiArIHZhbHVlICkgOiBcIlwiICk7XHJcblx0fSxcclxuXHJcblx0X2VuaGFuY2U6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIGVsZW0gPSB0aGlzLmVsZW1lbnQsXHJcblx0XHRcdG9wdHMgPSB0aGlzLm9wdGlvbnMsXHJcblx0XHRcdHVpID0ge1xyXG5cdFx0XHRcdGdyb3VwTGVnZW5kOiBlbGVtLmNoaWxkcmVuKCBcImxlZ2VuZFwiICksXHJcblx0XHRcdFx0Y2hpbGRXcmFwcGVyOiBlbGVtXHJcblx0XHRcdFx0XHQuYWRkQ2xhc3MoIFwidWktY29udHJvbGdyb3VwIFwiICtcclxuXHRcdFx0XHRcdFx0XCJ1aS1jb250cm9sZ3JvdXAtXCIgK1xyXG5cdFx0XHRcdFx0XHRcdCggb3B0cy50eXBlID09PSBcImhvcml6b250YWxcIiA/IFwiaG9yaXpvbnRhbFwiIDogXCJ2ZXJ0aWNhbFwiICkgKyBcIiBcIiArXHJcblx0XHRcdFx0XHRcdHRoaXMuX3RoZW1lQ2xhc3NGcm9tT3B0aW9uKCBvcHRzLnRoZW1lICkgKyBcIiBcIiArXHJcblx0XHRcdFx0XHRcdCggb3B0cy5jb3JuZXJzID8gXCJ1aS1jb3JuZXItYWxsIFwiIDogXCJcIiApICtcclxuXHRcdFx0XHRcdFx0KCBvcHRzLm1pbmkgPyBcInVpLW1pbmkgXCIgOiBcIlwiICkgKVxyXG5cdFx0XHRcdFx0LndyYXBJbm5lciggXCI8ZGl2IFwiICtcclxuXHRcdFx0XHRcdFx0XCJjbGFzcz0ndWktY29udHJvbGdyb3VwLWNvbnRyb2xzIFwiICtcclxuXHRcdFx0XHRcdFx0XHQoIG9wdHMuc2hhZG93ID09PSB0cnVlID8gXCJ1aS1zaGFkb3dcIiA6IFwiXCIgKSArIFwiJz48L2Rpdj5cIiApXHJcblx0XHRcdFx0XHQuY2hpbGRyZW4oKVxyXG5cdFx0XHR9O1xyXG5cclxuXHRcdGlmICggdWkuZ3JvdXBMZWdlbmQubGVuZ3RoID4gMCApIHtcclxuXHRcdFx0JCggXCI8ZGl2IHJvbGU9J2hlYWRpbmcnIGNsYXNzPSd1aS1jb250cm9sZ3JvdXAtbGFiZWwnPjwvZGl2PlwiIClcclxuXHRcdFx0XHQuYXBwZW5kKCB1aS5ncm91cExlZ2VuZCApXHJcblx0XHRcdFx0LnByZXBlbmRUbyggZWxlbSApO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiB1aTtcclxuXHR9LFxyXG5cclxuXHRfaW5pdDogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLnJlZnJlc2goKTtcclxuXHR9LFxyXG5cclxuXHRfc2V0T3B0aW9uczogZnVuY3Rpb24oIG9wdGlvbnMgKSB7XHJcblx0XHR2YXIgY2FsbFJlZnJlc2gsIHJldHVyblZhbHVlLFxyXG5cdFx0XHRlbGVtID0gdGhpcy5lbGVtZW50O1xyXG5cclxuXHRcdC8vIE11c3QgaGF2ZSBvbmUgb2YgaG9yaXpvbnRhbCBvciB2ZXJ0aWNhbFxyXG5cdFx0aWYgKCBvcHRpb25zLnR5cGUgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0ZWxlbVxyXG5cdFx0XHRcdC5yZW1vdmVDbGFzcyggXCJ1aS1jb250cm9sZ3JvdXAtaG9yaXpvbnRhbCB1aS1jb250cm9sZ3JvdXAtdmVydGljYWxcIiApXHJcblx0XHRcdFx0LmFkZENsYXNzKCBcInVpLWNvbnRyb2xncm91cC1cIiArICggb3B0aW9ucy50eXBlID09PSBcImhvcml6b250YWxcIiA/IFwiaG9yaXpvbnRhbFwiIDogXCJ2ZXJ0aWNhbFwiICkgKTtcclxuXHRcdFx0Y2FsbFJlZnJlc2ggPSB0cnVlO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggb3B0aW9ucy50aGVtZSAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRlbGVtXHJcblx0XHRcdFx0LnJlbW92ZUNsYXNzKCB0aGlzLl90aGVtZUNsYXNzRnJvbU9wdGlvbiggdGhpcy5vcHRpb25zLnRoZW1lICkgKVxyXG5cdFx0XHRcdC5hZGRDbGFzcyggdGhpcy5fdGhlbWVDbGFzc0Zyb21PcHRpb24oIG9wdGlvbnMudGhlbWUgKSApO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggb3B0aW9ucy5jb3JuZXJzICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdGVsZW0udG9nZ2xlQ2xhc3MoIFwidWktY29ybmVyLWFsbFwiLCBvcHRpb25zLmNvcm5lcnMgKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIG9wdGlvbnMubWluaSAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRlbGVtLnRvZ2dsZUNsYXNzKCBcInVpLW1pbmlcIiwgb3B0aW9ucy5taW5pICk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBvcHRpb25zLnNoYWRvdyAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHR0aGlzLl91aS5jaGlsZFdyYXBwZXIudG9nZ2xlQ2xhc3MoIFwidWktc2hhZG93XCIsIG9wdGlvbnMuc2hhZG93ICk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBvcHRpb25zLmV4Y2x1ZGVJbnZpc2libGUgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0dGhpcy5vcHRpb25zLmV4Y2x1ZGVJbnZpc2libGUgPSBvcHRpb25zLmV4Y2x1ZGVJbnZpc2libGU7XHJcblx0XHRcdGNhbGxSZWZyZXNoID0gdHJ1ZTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm5WYWx1ZSA9IHRoaXMuX3N1cGVyKCBvcHRpb25zICk7XHJcblxyXG5cdFx0aWYgKCBjYWxsUmVmcmVzaCApIHtcclxuXHRcdFx0dGhpcy5yZWZyZXNoKCk7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHJldHVyblZhbHVlO1xyXG5cdH0sXHJcblxyXG5cdGNvbnRhaW5lcjogZnVuY3Rpb24oKSB7XHJcblx0XHRyZXR1cm4gdGhpcy5fdWkuY2hpbGRXcmFwcGVyO1xyXG5cdH0sXHJcblxyXG5cdHJlZnJlc2g6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyICRlbCA9IHRoaXMuY29udGFpbmVyKCksXHJcblx0XHRcdGVscyA9ICRlbC5maW5kKCBcIi51aS1idG5cIiApLm5vdCggXCIudWktc2xpZGVyLWhhbmRsZVwiICksXHJcblx0XHRcdGNyZWF0ZSA9IHRoaXMuX2luaXRpYWxSZWZyZXNoO1xyXG5cdFx0aWYgKCAkLm1vYmlsZS5jaGVja2JveHJhZGlvICkge1xyXG5cdFx0XHQkZWwuZmluZCggXCI6bW9iaWxlLWNoZWNrYm94cmFkaW9cIiApLmNoZWNrYm94cmFkaW8oIFwicmVmcmVzaFwiICk7XHJcblx0XHR9XHJcblx0XHR0aGlzLl9hZGRGaXJzdExhc3RDbGFzc2VzKCBlbHMsXHJcblx0XHRcdHRoaXMub3B0aW9ucy5leGNsdWRlSW52aXNpYmxlID8gdGhpcy5fZ2V0VmlzaWJsZXMoIGVscywgY3JlYXRlICkgOiBlbHMsXHJcblx0XHRcdGNyZWF0ZSApO1xyXG5cdFx0dGhpcy5faW5pdGlhbFJlZnJlc2ggPSBmYWxzZTtcclxuXHR9LFxyXG5cclxuXHQvLyBDYXZlYXQ6IElmIHRoZSBsZWdlbmQgaXMgbm90IHRoZSBmaXJzdCBjaGlsZCBvZiB0aGUgY29udHJvbGdyb3VwIGF0IGVuaGFuY2VcclxuXHQvLyB0aW1lLCBpdCB3aWxsIGJlIGFmdGVyIF9kZXN0cm95KCkuXHJcblx0X2Rlc3Ryb3k6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIHVpLCBidXR0b25zLFxyXG5cdFx0XHRvcHRzID0gdGhpcy5vcHRpb25zO1xyXG5cclxuXHRcdGlmICggb3B0cy5lbmhhbmNlZCApIHtcclxuXHRcdFx0cmV0dXJuIHRoaXM7XHJcblx0XHR9XHJcblxyXG5cdFx0dWkgPSB0aGlzLl91aTtcclxuXHRcdGJ1dHRvbnMgPSB0aGlzLmVsZW1lbnRcclxuXHRcdFx0LnJlbW92ZUNsYXNzKCBcInVpLWNvbnRyb2xncm91cCBcIiArXHJcblx0XHRcdFx0XCJ1aS1jb250cm9sZ3JvdXAtaG9yaXpvbnRhbCB1aS1jb250cm9sZ3JvdXAtdmVydGljYWwgdWktY29ybmVyLWFsbCB1aS1taW5pIFwiICtcclxuXHRcdFx0XHR0aGlzLl90aGVtZUNsYXNzRnJvbU9wdGlvbiggb3B0cy50aGVtZSApIClcclxuXHRcdFx0LmZpbmQoIFwiLnVpLWJ0blwiIClcclxuXHRcdFx0Lm5vdCggXCIudWktc2xpZGVyLWhhbmRsZVwiICk7XHJcblxyXG5cdFx0dGhpcy5fcmVtb3ZlRmlyc3RMYXN0Q2xhc3NlcyggYnV0dG9ucyApO1xyXG5cclxuXHRcdHVpLmdyb3VwTGVnZW5kLnVud3JhcCgpO1xyXG5cdFx0dWkuY2hpbGRXcmFwcGVyLmNoaWxkcmVuKCkudW53cmFwKCk7XHJcblx0fVxyXG59LCAkLm1vYmlsZS5iZWhhdmlvcnMuYWRkRmlyc3RMYXN0Q2xhc3NlcyApICk7XHJcblxyXG59KShqUXVlcnkpO1xyXG5cclxuKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7XHJcblxyXG5cdCQud2lkZ2V0KCBcIm1vYmlsZS50b29sYmFyXCIsIHtcclxuXHRcdGluaXRTZWxlY3RvcjogXCI6anFtRGF0YShyb2xlPSdmb290ZXInKSwgOmpxbURhdGEocm9sZT0naGVhZGVyJylcIixcclxuXHJcblx0XHRvcHRpb25zOiB7XHJcblx0XHRcdHRoZW1lOiBudWxsLFxyXG5cdFx0XHRhZGRCYWNrQnRuOiBmYWxzZSxcclxuXHRcdFx0YmFja0J0blRoZW1lOiBudWxsLFxyXG5cdFx0XHRiYWNrQnRuVGV4dDogXCJCYWNrXCJcclxuXHRcdH0sXHJcblxyXG5cdFx0X2NyZWF0ZTogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHZhciBsZWZ0YnRuLCByaWdodGJ0bixcclxuXHRcdFx0XHRyb2xlID0gIHRoaXMuZWxlbWVudC5pcyggXCI6anFtRGF0YShyb2xlPSdoZWFkZXInKVwiICkgPyBcImhlYWRlclwiIDogXCJmb290ZXJcIixcclxuXHRcdFx0XHRwYWdlID0gdGhpcy5lbGVtZW50LmNsb3Nlc3QoIFwiLnVpLXBhZ2VcIiApO1xyXG5cdFx0XHRpZiAoIHBhZ2UubGVuZ3RoID09PSAwICkge1xyXG5cdFx0XHRcdHBhZ2UgPSBmYWxzZTtcclxuXHRcdFx0XHR0aGlzLl9vbiggdGhpcy5kb2N1bWVudCwge1xyXG5cdFx0XHRcdFx0XCJwYWdlc2hvd1wiOiBcInJlZnJlc2hcIlxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblx0XHRcdCQuZXh0ZW5kKCB0aGlzLCB7XHJcblx0XHRcdFx0cm9sZTogcm9sZSxcclxuXHRcdFx0XHRwYWdlOiBwYWdlLFxyXG5cdFx0XHRcdGxlZnRidG46IGxlZnRidG4sXHJcblx0XHRcdFx0cmlnaHRidG46IHJpZ2h0YnRuXHJcblx0XHRcdH0pO1xyXG5cdFx0XHR0aGlzLmVsZW1lbnQuYXR0ciggXCJyb2xlXCIsIHJvbGUgPT09IFwiaGVhZGVyXCIgPyBcImJhbm5lclwiIDogXCJjb250ZW50aW5mb1wiICkuYWRkQ2xhc3MoIFwidWktXCIgKyByb2xlICk7XHJcblx0XHRcdHRoaXMucmVmcmVzaCgpO1xyXG5cdFx0XHR0aGlzLl9zZXRPcHRpb25zKCB0aGlzLm9wdGlvbnMgKTtcclxuXHRcdH0sXHJcblx0XHRfc2V0T3B0aW9uczogZnVuY3Rpb24oIG8gKSB7XHJcblx0XHRcdGlmICggby5hZGRCYWNrQnRuICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdFx0dGhpcy5fdXBkYXRlQmFja0J1dHRvbigpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmICggby5iYWNrQnRuVGhlbWUgIT0gbnVsbCApIHtcclxuXHRcdFx0XHR0aGlzLmVsZW1lbnRcclxuXHRcdFx0XHRcdC5maW5kKCBcIi51aS10b29sYmFyLWJhY2stYnRuXCIgKVxyXG5cdFx0XHRcdFx0LmFkZENsYXNzKCBcInVpLWJ0biB1aS1idG4tXCIgKyBvLmJhY2tCdG5UaGVtZSApO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmICggby5iYWNrQnRuVGV4dCAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRcdHRoaXMuZWxlbWVudC5maW5kKCBcIi51aS10b29sYmFyLWJhY2stYnRuIC51aS1idG4tdGV4dFwiICkudGV4dCggby5iYWNrQnRuVGV4dCApO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmICggby50aGVtZSAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRcdHZhciBjdXJyZW50VGhlbWUgPSB0aGlzLm9wdGlvbnMudGhlbWUgPyB0aGlzLm9wdGlvbnMudGhlbWUgOiBcImluaGVyaXRcIixcclxuXHRcdFx0XHRcdG5ld1RoZW1lID0gby50aGVtZSA/IG8udGhlbWUgOiBcImluaGVyaXRcIjtcclxuXHJcblx0XHRcdFx0dGhpcy5lbGVtZW50LnJlbW92ZUNsYXNzKCBcInVpLWJhci1cIiArIGN1cnJlbnRUaGVtZSApLmFkZENsYXNzKCBcInVpLWJhci1cIiArIG5ld1RoZW1lICk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHRoaXMuX3N1cGVyKCBvICk7XHJcblx0XHR9LFxyXG5cdFx0cmVmcmVzaDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdGlmICggdGhpcy5yb2xlID09PSBcImhlYWRlclwiICkge1xyXG5cdFx0XHRcdHRoaXMuX2FkZEhlYWRlckJ1dHRvbkNsYXNzZXMoKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAoICF0aGlzLnBhZ2UgKSB7XHJcblx0XHRcdFx0dGhpcy5fc2V0UmVsYXRpdmUoKTtcclxuXHRcdFx0XHRpZiAoIHRoaXMucm9sZSA9PT0gXCJmb290ZXJcIiApIHtcclxuXHRcdFx0XHRcdHRoaXMuZWxlbWVudC5hcHBlbmRUbyggXCJib2R5XCIgKTtcclxuXHRcdFx0XHR9IGVsc2UgaWYgKCB0aGlzLnJvbGUgPT09IFwiaGVhZGVyXCIgKSB7XHJcblx0XHRcdFx0XHR0aGlzLl91cGRhdGVCYWNrQnV0dG9uKCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHRcdHRoaXMuX2FkZEhlYWRpbmdDbGFzc2VzKCk7XHJcblx0XHRcdHRoaXMuX2J0bk1hcmt1cCgpO1xyXG5cdFx0fSxcclxuXHJcblx0XHQvL3dlIG9ubHkgd2FudCB0aGlzIHRvIHJ1biBvbiBub24gZml4ZWQgdG9vbGJhcnMgc28gbWFrZSBpdCBlYXN5IHRvIG92ZXJyaWRlXHJcblx0XHRfc2V0UmVsYXRpdmU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHQkKCBcIltkYXRhLVwiKyAkLm1vYmlsZS5ucyArIFwicm9sZT0ncGFnZSddXCIgKS5jc3MoeyBcInBvc2l0aW9uXCI6IFwicmVsYXRpdmVcIiB9KTtcclxuXHRcdH0sXHJcblxyXG5cdFx0Ly8gRGVwcmVjYXRlZCBpbiAxLjQuIEFzIGZyb20gMS41IGJ1dHRvbiBjbGFzc2VzIGhhdmUgdG8gYmUgcHJlc2VudCBpbiB0aGUgbWFya3VwLlxyXG5cdFx0X2J0bk1hcmt1cDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHRoaXMuZWxlbWVudFxyXG5cdFx0XHRcdC5jaGlsZHJlbiggXCJhXCIgKVxyXG5cdFx0XHRcdC5maWx0ZXIoIFwiOm5vdChbZGF0YS1cIiArICQubW9iaWxlLm5zICsgXCJyb2xlPSdub25lJ10pXCIgKVxyXG5cdFx0XHRcdC5hdHRyKCBcImRhdGEtXCIgKyAkLm1vYmlsZS5ucyArIFwicm9sZVwiLCBcImJ1dHRvblwiICk7XHJcblx0XHRcdHRoaXMuZWxlbWVudC50cmlnZ2VyKCBcImNyZWF0ZVwiICk7XHJcblx0XHR9LFxyXG5cdFx0Ly8gRGVwcmVjYXRlZCBpbiAxLjQuIEFzIGZyb20gMS41IHVpLWJ0bi1sZWZ0L3JpZ2h0IGNsYXNzZXMgaGF2ZSB0byBiZSBwcmVzZW50IGluIHRoZSBtYXJrdXAuXHJcblx0XHRfYWRkSGVhZGVyQnV0dG9uQ2xhc3NlczogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHZhciBoZWFkZXJBbmNob3JzID0gdGhpcy5lbGVtZW50LmNoaWxkcmVuKCBcImEsIGJ1dHRvblwiICk7XHJcblxyXG5cdFx0XHQvLyBEbyBub3QgbWlzdGFrZSBhIGJhY2sgYnV0dG9uIGZvciBhIGxlZnQgdG9vbGJhciBidXR0b25cclxuXHRcdFx0dGhpcy5sZWZ0YnRuID0gaGVhZGVyQW5jaG9ycy5oYXNDbGFzcyggXCJ1aS1idG4tbGVmdFwiICkgJiZcclxuXHRcdFx0XHQhaGVhZGVyQW5jaG9ycy5oYXNDbGFzcyggXCJ1aS10b29sYmFyLWJhY2stYnRuXCIgKTtcclxuXHJcblx0XHRcdHRoaXMucmlnaHRidG4gPSBoZWFkZXJBbmNob3JzLmhhc0NsYXNzKCBcInVpLWJ0bi1yaWdodFwiICk7XHJcblxyXG5cdFx0XHQvLyBGaWx0ZXIgb3V0IHJpZ2h0IGJ1dHRvbnMgYW5kIGJhY2sgYnV0dG9uc1xyXG5cdFx0XHR0aGlzLmxlZnRidG4gPSB0aGlzLmxlZnRidG4gfHxcclxuXHRcdFx0XHRoZWFkZXJBbmNob3JzLmVxKCAwIClcclxuXHRcdFx0XHRcdC5ub3QoIFwiLnVpLWJ0bi1yaWdodCwudWktdG9vbGJhci1iYWNrLWJ0blwiIClcclxuXHRcdFx0XHRcdC5hZGRDbGFzcyggXCJ1aS1idG4tbGVmdFwiIClcclxuXHRcdFx0XHRcdC5sZW5ndGg7XHJcblxyXG5cdFx0XHR0aGlzLnJpZ2h0YnRuID0gdGhpcy5yaWdodGJ0biB8fCBoZWFkZXJBbmNob3JzLmVxKCAxICkuYWRkQ2xhc3MoIFwidWktYnRuLXJpZ2h0XCIgKS5sZW5ndGg7XHJcblx0XHR9LFxyXG5cdFx0X3VwZGF0ZUJhY2tCdXR0b246IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR2YXIgYmFja0J1dHRvbixcclxuXHRcdFx0XHRvcHRpb25zID0gdGhpcy5vcHRpb25zLFxyXG5cdFx0XHRcdHRoZW1lID0gb3B0aW9ucy5iYWNrQnRuVGhlbWUgfHwgb3B0aW9ucy50aGVtZTtcclxuXHJcblx0XHRcdC8vIFJldHJpZXZlIHRoZSBiYWNrIGJ1dHRvbiBvciBjcmVhdGUgYSBuZXcsIGVtcHR5IG9uZVxyXG5cdFx0XHRiYWNrQnV0dG9uID0gdGhpcy5fYmFja0J1dHRvbiA9ICggdGhpcy5fYmFja0J1dHRvbiB8fCB7fSApO1xyXG5cclxuXHRcdFx0Ly8gV2UgYWRkIGEgYmFjayBidXR0b24gb25seSBpZiB0aGUgb3B0aW9uIHRvIGRvIHNvIGlzIG9uXHJcblx0XHRcdGlmICggdGhpcy5vcHRpb25zLmFkZEJhY2tCdG4gJiZcclxuXHJcblx0XHRcdFx0XHQvLyBUaGlzIG11c3QgYWxzbyBiZSBhIGhlYWRlciB0b29sYmFyXHJcblx0XHRcdFx0XHR0aGlzLnJvbGUgPT09IFwiaGVhZGVyXCIgJiZcclxuXHJcblx0XHRcdFx0XHQvLyBUaGVyZSBtdXN0IGJlIG11bHRpcGxlIHBhZ2VzIGluIHRoZSBET01cclxuXHRcdFx0XHRcdCQoIFwiLnVpLXBhZ2VcIiApLmxlbmd0aCA+IDEgJiZcclxuXHRcdFx0XHRcdCggdGhpcy5wYWdlID9cclxuXHJcblx0XHRcdFx0XHRcdC8vIElmIHRoZSB0b29sYmFyIGlzIGludGVybmFsIHRoZSBwYWdlJ3MgVVJMIG11c3QgZGlmZmVyIGZyb20gdGhlIGhhc2hcclxuXHRcdFx0XHRcdFx0KCB0aGlzLnBhZ2VbIDAgXS5nZXRBdHRyaWJ1dGUoIFwiZGF0YS1cIiArICQubW9iaWxlLm5zICsgXCJ1cmxcIiApICE9PVxyXG5cdFx0XHRcdFx0XHRcdCQubW9iaWxlLnBhdGguc3RyaXBIYXNoKCBsb2NhdGlvbi5oYXNoICkgKSA6XHJcblxyXG5cdFx0XHRcdFx0XHQvLyBPdGhlcndpc2UsIGlmIHRoZSB0b29sYmFyIGlzIGV4dGVybmFsIHRoZXJlIG11c3QgYmUgYXQgbGVhc3Qgb25lXHJcblx0XHRcdFx0XHRcdC8vIGhpc3RvcnkgaXRlbSB0byB3aGljaCBvbmUgY2FuIGdvIGJhY2tcclxuXHRcdFx0XHRcdFx0KCAkLm1vYmlsZS5uYXZpZ2F0ZSAmJiAkLm1vYmlsZS5uYXZpZ2F0ZS5oaXN0b3J5ICYmXHJcblx0XHRcdFx0XHRcdFx0JC5tb2JpbGUubmF2aWdhdGUuaGlzdG9yeS5hY3RpdmVJbmRleCA+IDAgKSApICYmXHJcblxyXG5cdFx0XHRcdFx0Ly8gVGhlIHRvb2xiYXIgZG9lcyBub3QgaGF2ZSBhIGxlZnQgYnV0dG9uXHJcblx0XHRcdFx0XHQhdGhpcy5sZWZ0YnRuICkge1xyXG5cclxuXHRcdFx0XHQvLyBTa2lwIGJhY2sgYnV0dG9uIGNyZWF0aW9uIGlmIG9uZSBpcyBhbHJlYWR5IHByZXNlbnRcclxuXHRcdFx0XHRpZiAoICFiYWNrQnV0dG9uLmF0dGFjaGVkICkge1xyXG5cdFx0XHRcdFx0dGhpcy5iYWNrQnV0dG9uID0gYmFja0J1dHRvbi5lbGVtZW50ID0gKCBiYWNrQnV0dG9uLmVsZW1lbnQgfHxcclxuXHRcdFx0XHRcdFx0JCggXCI8YSByb2xlPSdidXR0b24nIGhyZWY9J2phdmFzY3JpcHQ6dm9pZCgwKTsnIFwiICtcclxuXHRcdFx0XHRcdFx0XHRcImNsYXNzPSd1aS1idG4gdWktY29ybmVyLWFsbCB1aS1zaGFkb3cgdWktYnRuLWxlZnQgXCIgK1xyXG5cdFx0XHRcdFx0XHRcdFx0KCB0aGVtZSA/IFwidWktYnRuLVwiICsgdGhlbWUgKyBcIiBcIiA6IFwiXCIgKSArXHJcblx0XHRcdFx0XHRcdFx0XHRcInVpLXRvb2xiYXItYmFjay1idG4gdWktaWNvbi1jYXJhdC1sIHVpLWJ0bi1pY29uLWxlZnQnIFwiICtcclxuXHRcdFx0XHRcdFx0XHRcImRhdGEtXCIgKyAkLm1vYmlsZS5ucyArIFwicmVsPSdiYWNrJz5cIiArIG9wdGlvbnMuYmFja0J0blRleHQgK1xyXG5cdFx0XHRcdFx0XHRcdFwiPC9hPlwiICkgKVxyXG5cdFx0XHRcdFx0XHRcdC5wcmVwZW5kVG8oIHRoaXMuZWxlbWVudCApO1xyXG5cdFx0XHRcdFx0YmFja0J1dHRvbi5hdHRhY2hlZCA9IHRydWU7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gSWYgd2UgYXJlIG5vdCBhZGRpbmcgYSBiYWNrIGJ1dHRvbiwgdGhlbiByZW1vdmUgdGhlIG9uZSBwcmVzZW50LCBpZiBhbnlcclxuXHRcdFx0fSBlbHNlIGlmICggYmFja0J1dHRvbi5lbGVtZW50ICkge1xyXG5cdFx0XHRcdGJhY2tCdXR0b24uZWxlbWVudC5kZXRhY2goKTtcclxuXHRcdFx0XHRiYWNrQnV0dG9uLmF0dGFjaGVkID0gZmFsc2U7XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblx0XHRfYWRkSGVhZGluZ0NsYXNzZXM6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR0aGlzLmVsZW1lbnQuY2hpbGRyZW4oIFwiaDEsIGgyLCBoMywgaDQsIGg1LCBoNlwiIClcclxuXHRcdFx0XHQuYWRkQ2xhc3MoIFwidWktdGl0bGVcIiApXHJcblx0XHRcdFx0Ly8gUmVnYXJkbGVzcyBvZiBoIGVsZW1lbnQgbnVtYmVyIGluIHNyYywgaXQgYmVjb21lcyBoMSBmb3IgdGhlIGVuaGFuY2VkIHBhZ2VcclxuXHRcdFx0XHQuYXR0cih7XHJcblx0XHRcdFx0XHRcInJvbGVcIjogXCJoZWFkaW5nXCIsXHJcblx0XHRcdFx0XHRcImFyaWEtbGV2ZWxcIjogXCIxXCJcclxuXHRcdFx0XHR9KTtcclxuXHRcdH0sXHJcblx0XHRfZGVzdHJveTogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHZhciBjdXJyZW50VGhlbWU7XHJcblxyXG5cdFx0XHR0aGlzLmVsZW1lbnQuY2hpbGRyZW4oIFwiaDEsIGgyLCBoMywgaDQsIGg1LCBoNlwiIClcclxuXHRcdFx0XHQucmVtb3ZlQ2xhc3MoIFwidWktdGl0bGVcIiApXHJcblx0XHRcdFx0LnJlbW92ZUF0dHIoIFwicm9sZVwiIClcclxuXHRcdFx0XHQucmVtb3ZlQXR0ciggXCJhcmlhLWxldmVsXCIgKTtcclxuXHJcblx0XHRcdGlmICggdGhpcy5yb2xlID09PSBcImhlYWRlclwiICkge1xyXG5cdFx0XHRcdHRoaXMuZWxlbWVudC5jaGlsZHJlbiggXCJhLCBidXR0b25cIiApXHJcblx0XHRcdFx0XHQucmVtb3ZlQ2xhc3MoIFwidWktYnRuLWxlZnQgdWktYnRuLXJpZ2h0IHVpLWJ0biB1aS1zaGFkb3cgdWktY29ybmVyLWFsbFwiICk7XHJcblx0XHRcdFx0aWYgKCB0aGlzLmJhY2tCdXR0b24pIHtcclxuXHRcdFx0XHRcdHRoaXMuYmFja0J1dHRvbi5yZW1vdmUoKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGN1cnJlbnRUaGVtZSA9IHRoaXMub3B0aW9ucy50aGVtZSA/IHRoaXMub3B0aW9ucy50aGVtZSA6IFwiaW5oZXJpdFwiO1xyXG5cdFx0XHR0aGlzLmVsZW1lbnQucmVtb3ZlQ2xhc3MoIFwidWktYmFyLVwiICsgY3VycmVudFRoZW1lICk7XHJcblxyXG5cdFx0XHR0aGlzLmVsZW1lbnQucmVtb3ZlQ2xhc3MoIFwidWktXCIgKyB0aGlzLnJvbGUgKS5yZW1vdmVBdHRyKCBcInJvbGVcIiApO1xyXG5cdFx0fVxyXG5cdH0pO1xyXG5cclxufSkoIGpRdWVyeSApO1xyXG5cclxuKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7XHJcblxyXG5cdCQud2lkZ2V0KCBcIm1vYmlsZS50b29sYmFyXCIsICQubW9iaWxlLnRvb2xiYXIsIHtcclxuXHRcdG9wdGlvbnM6IHtcclxuXHRcdFx0cG9zaXRpb246bnVsbCxcclxuXHRcdFx0dmlzaWJsZU9uUGFnZVNob3c6IHRydWUsXHJcblx0XHRcdGRpc2FibGVQYWdlWm9vbTogdHJ1ZSxcclxuXHRcdFx0dHJhbnNpdGlvbjogXCJzbGlkZVwiLCAvL2NhbiBiZSBub25lLCBmYWRlLCBzbGlkZSAoc2xpZGUgbWFwcyB0byBzbGlkZXVwIG9yIHNsaWRlZG93bilcclxuXHRcdFx0ZnVsbHNjcmVlbjogZmFsc2UsXHJcblx0XHRcdHRhcFRvZ2dsZTogdHJ1ZSxcclxuXHRcdFx0dGFwVG9nZ2xlQmxhY2tsaXN0OiBcImEsIGJ1dHRvbiwgaW5wdXQsIHNlbGVjdCwgdGV4dGFyZWEsIC51aS1oZWFkZXItZml4ZWQsIC51aS1mb290ZXItZml4ZWQsIC51aS1mbGlwc3dpdGNoLCAudWktcG9wdXAsIC51aS1wYW5lbCwgLnVpLXBhbmVsLWRpc21pc3Mtb3BlblwiLFxyXG5cdFx0XHRoaWRlRHVyaW5nRm9jdXM6IFwiaW5wdXQsIHRleHRhcmVhLCBzZWxlY3RcIixcclxuXHRcdFx0dXBkYXRlUGFnZVBhZGRpbmc6IHRydWUsXHJcblx0XHRcdHRyYWNrUGVyc2lzdGVudFRvb2xiYXJzOiB0cnVlLFxyXG5cclxuXHRcdFx0Ly8gQnJvd3NlciBkZXRlY3Rpb24hIFdlZWVlLCBoZXJlIHdlIGdvLi4uXHJcblx0XHRcdC8vIFVuZm9ydHVuYXRlbHksIHBvc2l0aW9uOmZpeGVkIGlzIGNvc3RseSwgbm90IHRvIG1lbnRpb24gcHJvYmFibHkgaW1wb3NzaWJsZSwgdG8gZmVhdHVyZS1kZXRlY3QgYWNjdXJhdGVseS5cclxuXHRcdFx0Ly8gU29tZSB0ZXN0cyBleGlzdCwgYnV0IHRoZXkgY3VycmVudGx5IHJldHVybiBmYWxzZSByZXN1bHRzIGluIGNyaXRpY2FsIGRldmljZXMgYW5kIGJyb3dzZXJzLCB3aGljaCBjb3VsZCBsZWFkIHRvIGEgYnJva2VuIGV4cGVyaWVuY2UuXHJcblx0XHRcdC8vIFRlc3RpbmcgZml4ZWQgcG9zaXRpb25pbmcgaXMgYWxzbyBwcmV0dHkgb2J0cnVzaXZlIHRvIHBhZ2UgbG9hZCwgcmVxdWlyaW5nIGluamVjdGVkIGVsZW1lbnRzIGFuZCBzY3JvbGxpbmcgdGhlIHdpbmRvd1xyXG5cdFx0XHQvLyBUaGUgZm9sbG93aW5nIGZ1bmN0aW9uIHNlcnZlcyB0byBydWxlIG91dCBzb21lIHBvcHVsYXIgYnJvd3NlcnMgd2l0aCBrbm93biBmaXhlZC1wb3NpdGlvbmluZyBpc3N1ZXNcclxuXHRcdFx0Ly8gVGhpcyBpcyBhIHBsdWdpbiBvcHRpb24gbGlrZSBhbnkgb3RoZXIsIHNvIGZlZWwgZnJlZSB0byBpbXByb3ZlIG9yIG92ZXJ3cml0ZSBpdFxyXG5cdFx0XHRzdXBwb3J0QmxhY2tsaXN0OiBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRyZXR1cm4gISQuc3VwcG9ydC5maXhlZFBvc2l0aW9uO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cclxuXHRcdF9jcmVhdGU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR0aGlzLl9zdXBlcigpO1xyXG5cdFx0XHR0aGlzLnBhZ2Vjb250YWluZXIgPSAkKCBcIjptb2JpbGUtcGFnZWNvbnRhaW5lclwiICk7XHJcblx0XHRcdGlmICggdGhpcy5vcHRpb25zLnBvc2l0aW9uID09PSBcImZpeGVkXCIgJiYgIXRoaXMub3B0aW9ucy5zdXBwb3J0QmxhY2tsaXN0KCkgKSB7XHJcblx0XHRcdFx0dGhpcy5fbWFrZUZpeGVkKCk7XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblxyXG5cdFx0X21ha2VGaXhlZDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHRoaXMuZWxlbWVudC5hZGRDbGFzcyggXCJ1aS1cIisgdGhpcy5yb2xlICtcIi1maXhlZFwiICk7XHJcblx0XHRcdHRoaXMudXBkYXRlUGFnZVBhZGRpbmcoKTtcclxuXHRcdFx0dGhpcy5fYWRkVHJhbnNpdGlvbkNsYXNzKCk7XHJcblx0XHRcdHRoaXMuX2JpbmRQYWdlRXZlbnRzKCk7XHJcblx0XHRcdHRoaXMuX2JpbmRUb2dnbGVIYW5kbGVycygpO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfc2V0T3B0aW9uczogZnVuY3Rpb24oIG8gKSB7XHJcblx0XHRcdGlmICggby5wb3NpdGlvbiA9PT0gXCJmaXhlZFwiICYmIHRoaXMub3B0aW9ucy5wb3NpdGlvbiAhPT0gXCJmaXhlZFwiICkge1xyXG5cdFx0XHRcdHRoaXMuX21ha2VGaXhlZCgpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmICggdGhpcy5vcHRpb25zLnBvc2l0aW9uID09PSBcImZpeGVkXCIgJiYgIXRoaXMub3B0aW9ucy5zdXBwb3J0QmxhY2tsaXN0KCkgKSB7XHJcblx0XHRcdFx0dmFyICRwYWdlID0gKCAhIXRoaXMucGFnZSApPyB0aGlzLnBhZ2U6ICggJChcIi51aS1wYWdlLWFjdGl2ZVwiKS5sZW5ndGggPiAwICk/ICQoXCIudWktcGFnZS1hY3RpdmVcIik6ICQoXCIudWktcGFnZVwiKS5lcSgwKTtcclxuXHJcblx0XHRcdFx0aWYgKCBvLmZ1bGxzY3JlZW4gIT09IHVuZGVmaW5lZCkge1xyXG5cdFx0XHRcdFx0aWYgKCBvLmZ1bGxzY3JlZW4gKSB7XHJcblx0XHRcdFx0XHRcdHRoaXMuZWxlbWVudC5hZGRDbGFzcyggXCJ1aS1cIisgdGhpcy5yb2xlICtcIi1mdWxsc2NyZWVuXCIgKTtcclxuXHRcdFx0XHRcdFx0JHBhZ2UuYWRkQ2xhc3MoIFwidWktcGFnZS1cIiArIHRoaXMucm9sZSArIFwiLWZ1bGxzY3JlZW5cIiApO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0Ly8gSWYgbm90IGZ1bGxzY3JlZW4sIGFkZCBjbGFzcyB0byBwYWdlIHRvIHNldCB0b3Agb3IgYm90dG9tIHBhZGRpbmdcclxuXHRcdFx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdFx0XHR0aGlzLmVsZW1lbnQucmVtb3ZlQ2xhc3MoIFwidWktXCIrIHRoaXMucm9sZSArXCItZnVsbHNjcmVlblwiICk7XHJcblx0XHRcdFx0XHRcdCRwYWdlLnJlbW92ZUNsYXNzKCBcInVpLXBhZ2UtXCIgKyB0aGlzLnJvbGUgKyBcIi1mdWxsc2NyZWVuXCIgKS5hZGRDbGFzcyggXCJ1aS1wYWdlLVwiICsgdGhpcy5yb2xlKyBcIi1maXhlZFwiICk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHRcdHRoaXMuX3N1cGVyKG8pO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfYWRkVHJhbnNpdGlvbkNsYXNzOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dmFyIHRjbGFzcyA9IHRoaXMub3B0aW9ucy50cmFuc2l0aW9uO1xyXG5cclxuXHRcdFx0aWYgKCB0Y2xhc3MgJiYgdGNsYXNzICE9PSBcIm5vbmVcIiApIHtcclxuXHRcdFx0XHQvLyB1c2UgYXBwcm9wcmlhdGUgc2xpZGUgZm9yIGhlYWRlciBvciBmb290ZXJcclxuXHRcdFx0XHRpZiAoIHRjbGFzcyA9PT0gXCJzbGlkZVwiICkge1xyXG5cdFx0XHRcdFx0dGNsYXNzID0gdGhpcy5lbGVtZW50Lmhhc0NsYXNzKCBcInVpLWhlYWRlclwiICkgPyBcInNsaWRlZG93blwiIDogXCJzbGlkZXVwXCI7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHR0aGlzLmVsZW1lbnQuYWRkQ2xhc3MoIHRjbGFzcyApO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cclxuXHRcdF9iaW5kUGFnZUV2ZW50czogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHZhciBwYWdlID0gKCAhIXRoaXMucGFnZSApPyB0aGlzLmVsZW1lbnQuY2xvc2VzdCggXCIudWktcGFnZVwiICk6IHRoaXMuZG9jdW1lbnQ7XHJcblx0XHRcdC8vcGFnZSBldmVudCBiaW5kaW5nc1xyXG5cdFx0XHQvLyBGaXhlZCB0b29sYmFycyByZXF1aXJlIHBhZ2Ugem9vbSB0byBiZSBkaXNhYmxlZCwgb3RoZXJ3aXNlIHVzYWJpbGl0eSBpc3N1ZXMgY3JvcCB1cFxyXG5cdFx0XHQvLyBUaGlzIG1ldGhvZCBpcyBtZWFudCB0byBkaXNhYmxlIHpvb20gd2hpbGUgYSBmaXhlZC1wb3NpdGlvbmVkIHRvb2xiYXIgcGFnZSBpcyB2aXNpYmxlXHJcblx0XHRcdHRoaXMuX29uKCBwYWdlICwge1xyXG5cdFx0XHRcdFwicGFnZWJlZm9yZXNob3dcIjogXCJfaGFuZGxlUGFnZUJlZm9yZVNob3dcIixcclxuXHRcdFx0XHRcIndlYmtpdEFuaW1hdGlvblN0YXJ0XCI6XCJfaGFuZGxlQW5pbWF0aW9uU3RhcnRcIixcclxuXHRcdFx0XHRcImFuaW1hdGlvbnN0YXJ0XCI6XCJfaGFuZGxlQW5pbWF0aW9uU3RhcnRcIixcclxuXHRcdFx0XHRcInVwZGF0ZWxheW91dFwiOiBcIl9oYW5kbGVBbmltYXRpb25TdGFydFwiLFxyXG5cdFx0XHRcdFwicGFnZXNob3dcIjogXCJfaGFuZGxlUGFnZVNob3dcIixcclxuXHRcdFx0XHRcInBhZ2ViZWZvcmVoaWRlXCI6IFwiX2hhbmRsZVBhZ2VCZWZvcmVIaWRlXCJcclxuXHRcdFx0fSk7XHJcblx0XHR9LFxyXG5cclxuXHRcdF9oYW5kbGVQYWdlQmVmb3JlU2hvdzogZnVuY3Rpb24oICkge1xyXG5cdFx0XHR2YXIgbyA9IHRoaXMub3B0aW9ucztcclxuXHRcdFx0aWYgKCBvLmRpc2FibGVQYWdlWm9vbSApIHtcclxuXHRcdFx0XHQkLm1vYmlsZS56b29tLmRpc2FibGUoIHRydWUgKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAoICFvLnZpc2libGVPblBhZ2VTaG93ICkge1xyXG5cdFx0XHRcdHRoaXMuaGlkZSggdHJ1ZSApO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cclxuXHRcdF9oYW5kbGVBbmltYXRpb25TdGFydDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdGlmICggdGhpcy5vcHRpb25zLnVwZGF0ZVBhZ2VQYWRkaW5nICkge1xyXG5cdFx0XHRcdHRoaXMudXBkYXRlUGFnZVBhZGRpbmcoICggISF0aGlzLnBhZ2UgKT8gdGhpcy5wYWdlOiBcIi51aS1wYWdlLWFjdGl2ZVwiICk7XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblxyXG5cdFx0X2hhbmRsZVBhZ2VTaG93OiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dGhpcy51cGRhdGVQYWdlUGFkZGluZyggKCAhIXRoaXMucGFnZSApPyB0aGlzLnBhZ2U6IFwiLnVpLXBhZ2UtYWN0aXZlXCIgKTtcclxuXHRcdFx0aWYgKCB0aGlzLm9wdGlvbnMudXBkYXRlUGFnZVBhZGRpbmcgKSB7XHJcblx0XHRcdFx0dGhpcy5fb24oIHRoaXMud2luZG93LCB7IFwidGhyb3R0bGVkcmVzaXplXCI6IFwidXBkYXRlUGFnZVBhZGRpbmdcIiB9ICk7XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblxyXG5cdFx0X2hhbmRsZVBhZ2VCZWZvcmVIaWRlOiBmdW5jdGlvbiggZSwgdWkgKSB7XHJcblx0XHRcdHZhciBvID0gdGhpcy5vcHRpb25zLFxyXG5cdFx0XHRcdHRoaXNGb290ZXIsIHRoaXNIZWFkZXIsIG5leHRGb290ZXIsIG5leHRIZWFkZXI7XHJcblxyXG5cdFx0XHRpZiAoIG8uZGlzYWJsZVBhZ2Vab29tICkge1xyXG5cdFx0XHRcdCQubW9iaWxlLnpvb20uZW5hYmxlKCB0cnVlICk7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKCBvLnVwZGF0ZVBhZ2VQYWRkaW5nICkge1xyXG5cdFx0XHRcdHRoaXMuX29mZiggdGhpcy53aW5kb3csIFwidGhyb3R0bGVkcmVzaXplXCIgKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aWYgKCBvLnRyYWNrUGVyc2lzdGVudFRvb2xiYXJzICkge1xyXG5cdFx0XHRcdHRoaXNGb290ZXIgPSAkKCBcIi51aS1mb290ZXItZml4ZWQ6anFtRGF0YShpZClcIiwgdGhpcy5wYWdlICk7XHJcblx0XHRcdFx0dGhpc0hlYWRlciA9ICQoIFwiLnVpLWhlYWRlci1maXhlZDpqcW1EYXRhKGlkKVwiLCB0aGlzLnBhZ2UgKTtcclxuXHRcdFx0XHRuZXh0Rm9vdGVyID0gdGhpc0Zvb3Rlci5sZW5ndGggJiYgdWkubmV4dFBhZ2UgJiYgJCggXCIudWktZm9vdGVyLWZpeGVkOmpxbURhdGEoaWQ9J1wiICsgdGhpc0Zvb3Rlci5qcW1EYXRhKCBcImlkXCIgKSArIFwiJylcIiwgdWkubmV4dFBhZ2UgKSB8fCAkKCk7XHJcblx0XHRcdFx0bmV4dEhlYWRlciA9IHRoaXNIZWFkZXIubGVuZ3RoICYmIHVpLm5leHRQYWdlICYmICQoIFwiLnVpLWhlYWRlci1maXhlZDpqcW1EYXRhKGlkPSdcIiArIHRoaXNIZWFkZXIuanFtRGF0YSggXCJpZFwiICkgKyBcIicpXCIsIHVpLm5leHRQYWdlICkgfHwgJCgpO1xyXG5cclxuXHRcdFx0XHRpZiAoIG5leHRGb290ZXIubGVuZ3RoIHx8IG5leHRIZWFkZXIubGVuZ3RoICkge1xyXG5cclxuXHRcdFx0XHRcdG5leHRGb290ZXIuYWRkKCBuZXh0SGVhZGVyICkuYXBwZW5kVG8oICQubW9iaWxlLnBhZ2VDb250YWluZXIgKTtcclxuXHJcblx0XHRcdFx0XHR1aS5uZXh0UGFnZS5vbmUoIFwicGFnZXNob3dcIiwgZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHRcdG5leHRIZWFkZXIucHJlcGVuZFRvKCB0aGlzICk7XHJcblx0XHRcdFx0XHRcdG5leHRGb290ZXIuYXBwZW5kVG8oIHRoaXMgKTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHJcblx0XHRfdmlzaWJsZTogdHJ1ZSxcclxuXHJcblx0XHQvLyBUaGlzIHdpbGwgc2V0IHRoZSBjb250ZW50IGVsZW1lbnQncyB0b3Agb3IgYm90dG9tIHBhZGRpbmcgZXF1YWwgdG8gdGhlIHRvb2xiYXIncyBoZWlnaHRcclxuXHRcdHVwZGF0ZVBhZ2VQYWRkaW5nOiBmdW5jdGlvbiggdGJQYWdlICkge1xyXG5cdFx0XHR2YXIgJGVsID0gdGhpcy5lbGVtZW50LFxyXG5cdFx0XHRcdGhlYWRlciA9ICggdGhpcy5yb2xlID09PVwiaGVhZGVyXCIgKSxcclxuXHRcdFx0XHRwb3MgPSBwYXJzZUZsb2F0KCAkZWwuY3NzKCBoZWFkZXIgPyBcInRvcFwiIDogXCJib3R0b21cIiApICk7XHJcblxyXG5cdFx0XHQvLyBUaGlzIGJlaGF2aW9yIG9ubHkgYXBwbGllcyB0byBcImZpeGVkXCIsIG5vdCBcImZ1bGxzY3JlZW5cIlxyXG5cdFx0XHRpZiAoIHRoaXMub3B0aW9ucy5mdWxsc2NyZWVuICkgeyByZXR1cm47IH1cclxuXHRcdFx0Ly8gdGJQYWdlIGFyZ3VtZW50IGNhbiBiZSBhIFBhZ2Ugb2JqZWN0IG9yIGFuIGV2ZW50LCBpZiBjb21pbmcgZnJvbSB0aHJvdHRsZWQgcmVzaXplLlxyXG5cdFx0XHR0YlBhZ2UgPSAoIHRiUGFnZSAmJiB0YlBhZ2UudHlwZSA9PT0gdW5kZWZpbmVkICYmIHRiUGFnZSApIHx8IHRoaXMucGFnZSB8fCAkZWwuY2xvc2VzdCggXCIudWktcGFnZVwiICk7XHJcblx0XHRcdHRiUGFnZSA9ICggISF0aGlzLnBhZ2UgKT8gdGhpcy5wYWdlOiBcIi51aS1wYWdlLWFjdGl2ZVwiO1xyXG5cdFx0XHQkKCB0YlBhZ2UgKS5jc3MoIFwicGFkZGluZy1cIiArICggaGVhZGVyID8gXCJ0b3BcIiA6IFwiYm90dG9tXCIgKSwgJGVsLm91dGVySGVpZ2h0KCkgKyBwb3MgKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0X3VzZVRyYW5zaXRpb246IGZ1bmN0aW9uKCBub3RyYW5zaXRpb24gKSB7XHJcblx0XHRcdHZhciAkd2luID0gdGhpcy53aW5kb3csXHJcblx0XHRcdFx0JGVsID0gdGhpcy5lbGVtZW50LFxyXG5cdFx0XHRcdHNjcm9sbCA9ICR3aW4uc2Nyb2xsVG9wKCksXHJcblx0XHRcdFx0ZWxIZWlnaHQgPSAkZWwuaGVpZ2h0KCksXHJcblx0XHRcdFx0cEhlaWdodCA9ICggISF0aGlzLnBhZ2UgKT8gJGVsLmNsb3Nlc3QoIFwiLnVpLXBhZ2VcIiApLmhlaWdodCgpOiQoXCIudWktcGFnZS1hY3RpdmVcIikuaGVpZ2h0KCksXHJcblx0XHRcdFx0dmlld3BvcnRIZWlnaHQgPSAkLm1vYmlsZS5nZXRTY3JlZW5IZWlnaHQoKTtcclxuXHJcblx0XHRcdHJldHVybiAhbm90cmFuc2l0aW9uICYmXHJcblx0XHRcdFx0KCB0aGlzLm9wdGlvbnMudHJhbnNpdGlvbiAmJiB0aGlzLm9wdGlvbnMudHJhbnNpdGlvbiAhPT0gXCJub25lXCIgJiZcclxuXHRcdFx0XHQoXHJcblx0XHRcdFx0XHQoIHRoaXMucm9sZSA9PT0gXCJoZWFkZXJcIiAmJiAhdGhpcy5vcHRpb25zLmZ1bGxzY3JlZW4gJiYgc2Nyb2xsID4gZWxIZWlnaHQgKSB8fFxyXG5cdFx0XHRcdFx0KCB0aGlzLnJvbGUgPT09IFwiZm9vdGVyXCIgJiYgIXRoaXMub3B0aW9ucy5mdWxsc2NyZWVuICYmIHNjcm9sbCArIHZpZXdwb3J0SGVpZ2h0IDwgcEhlaWdodCAtIGVsSGVpZ2h0IClcclxuXHRcdFx0XHQpIHx8IHRoaXMub3B0aW9ucy5mdWxsc2NyZWVuXHJcblx0XHRcdFx0KTtcclxuXHRcdH0sXHJcblxyXG5cdFx0c2hvdzogZnVuY3Rpb24oIG5vdHJhbnNpdGlvbiApIHtcclxuXHRcdFx0dmFyIGhpZGVDbGFzcyA9IFwidWktZml4ZWQtaGlkZGVuXCIsXHJcblx0XHRcdFx0JGVsID0gdGhpcy5lbGVtZW50O1xyXG5cclxuXHRcdFx0aWYgKCB0aGlzLl91c2VUcmFuc2l0aW9uKCBub3RyYW5zaXRpb24gKSApIHtcclxuXHRcdFx0XHQkZWxcclxuXHRcdFx0XHRcdC5yZW1vdmVDbGFzcyggXCJvdXQgXCIgKyBoaWRlQ2xhc3MgKVxyXG5cdFx0XHRcdFx0LmFkZENsYXNzKCBcImluXCIgKVxyXG5cdFx0XHRcdFx0LmFuaW1hdGlvbkNvbXBsZXRlKGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0XHRcdFx0JGVsLnJlbW92ZUNsYXNzKCBcImluXCIgKTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdCRlbC5yZW1vdmVDbGFzcyggaGlkZUNsYXNzICk7XHJcblx0XHRcdH1cclxuXHRcdFx0dGhpcy5fdmlzaWJsZSA9IHRydWU7XHJcblx0XHR9LFxyXG5cclxuXHRcdGhpZGU6IGZ1bmN0aW9uKCBub3RyYW5zaXRpb24gKSB7XHJcblx0XHRcdHZhciBoaWRlQ2xhc3MgPSBcInVpLWZpeGVkLWhpZGRlblwiLFxyXG5cdFx0XHRcdCRlbCA9IHRoaXMuZWxlbWVudCxcclxuXHRcdFx0XHQvLyBpZiBpdCdzIGEgc2xpZGUgdHJhbnNpdGlvbiwgb3VyIG5ldyB0cmFuc2l0aW9ucyBuZWVkIHRoZSByZXZlcnNlIGNsYXNzIGFzIHdlbGwgdG8gc2xpZGUgb3V0d2FyZFxyXG5cdFx0XHRcdG91dGNsYXNzID0gXCJvdXRcIiArICggdGhpcy5vcHRpb25zLnRyYW5zaXRpb24gPT09IFwic2xpZGVcIiA/IFwiIHJldmVyc2VcIiA6IFwiXCIgKTtcclxuXHJcblx0XHRcdGlmICggdGhpcy5fdXNlVHJhbnNpdGlvbiggbm90cmFuc2l0aW9uICkgKSB7XHJcblx0XHRcdFx0JGVsXHJcblx0XHRcdFx0XHQuYWRkQ2xhc3MoIG91dGNsYXNzIClcclxuXHRcdFx0XHRcdC5yZW1vdmVDbGFzcyggXCJpblwiIClcclxuXHRcdFx0XHRcdC5hbmltYXRpb25Db21wbGV0ZShmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdFx0JGVsLmFkZENsYXNzKCBoaWRlQ2xhc3MgKS5yZW1vdmVDbGFzcyggb3V0Y2xhc3MgKTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdCRlbC5hZGRDbGFzcyggaGlkZUNsYXNzICkucmVtb3ZlQ2xhc3MoIG91dGNsYXNzICk7XHJcblx0XHRcdH1cclxuXHRcdFx0dGhpcy5fdmlzaWJsZSA9IGZhbHNlO1xyXG5cdFx0fSxcclxuXHJcblx0XHR0b2dnbGU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR0aGlzWyB0aGlzLl92aXNpYmxlID8gXCJoaWRlXCIgOiBcInNob3dcIiBdKCk7XHJcblx0XHR9LFxyXG5cclxuXHRcdF9iaW5kVG9nZ2xlSGFuZGxlcnM6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR2YXIgc2VsZiA9IHRoaXMsXHJcblx0XHRcdFx0byA9IHNlbGYub3B0aW9ucyxcclxuXHRcdFx0XHRkZWxheVNob3csIGRlbGF5SGlkZSxcclxuXHRcdFx0XHRpc1Zpc2libGUgPSB0cnVlLFxyXG5cdFx0XHRcdHBhZ2UgPSAoICEhdGhpcy5wYWdlICk/IHRoaXMucGFnZTogJChcIi51aS1wYWdlXCIpO1xyXG5cclxuXHRcdFx0Ly8gdGFwIHRvZ2dsZVxyXG5cdFx0XHRwYWdlXHJcblx0XHRcdFx0LmJpbmQoIFwidmNsaWNrXCIsIGZ1bmN0aW9uKCBlICkge1xyXG5cdFx0XHRcdFx0aWYgKCBvLnRhcFRvZ2dsZSAmJiAhJCggZS50YXJnZXQgKS5jbG9zZXN0KCBvLnRhcFRvZ2dsZUJsYWNrbGlzdCApLmxlbmd0aCApIHtcclxuXHRcdFx0XHRcdFx0c2VsZi50b2dnbGUoKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9KVxyXG5cdFx0XHRcdC5iaW5kKCBcImZvY3VzaW4gZm9jdXNvdXRcIiwgZnVuY3Rpb24oIGUgKSB7XHJcblx0XHRcdFx0XHQvL3RoaXMgaGlkZXMgdGhlIHRvb2xiYXJzIG9uIGEga2V5Ym9hcmQgcG9wIHRvIGdpdmUgbW9yZSBzY3JlZW4gcm9vbSBhbmQgcHJldmVudCBpb3MgYnVnIHdoaWNoXHJcblx0XHRcdFx0XHQvL3Bvc2l0aW9ucyBmaXhlZCB0b29sYmFycyBpbiB0aGUgbWlkZGxlIG9mIHRoZSBzY3JlZW4gb24gcG9wIGlmIHRoZSBpbnB1dCBpcyBuZWFyIHRoZSB0b3Agb3JcclxuXHRcdFx0XHRcdC8vYm90dG9tIG9mIHRoZSBzY3JlZW4gYWRkcmVzc2VzIGlzc3VlcyAjNDQxMCBGb290ZXIgbmF2YmFyIG1vdmVzIHVwIHdoZW4gY2xpY2tpbmcgb24gYSB0ZXh0Ym94IGluIGFuIEFuZHJvaWQgZW52aXJvbm1lbnRcclxuXHRcdFx0XHRcdC8vYW5kIGlzc3VlICM0MTEzIEhlYWRlciBhbmQgZm9vdGVyIGNoYW5nZSB0aGVpciBwb3NpdGlvbiBhZnRlciBrZXlib2FyZCBwb3B1cCAtIGlPU1xyXG5cdFx0XHRcdFx0Ly9hbmQgaXNzdWUgIzQ0MTAgRm9vdGVyIG5hdmJhciBtb3ZlcyB1cCB3aGVuIGNsaWNraW5nIG9uIGEgdGV4dGJveCBpbiBhbiBBbmRyb2lkIGVudmlyb25tZW50XHJcblx0XHRcdFx0XHRpZiAoIHNjcmVlbi53aWR0aCA8IDEwMjUgJiYgJCggZS50YXJnZXQgKS5pcyggby5oaWRlRHVyaW5nRm9jdXMgKSAmJiAhJCggZS50YXJnZXQgKS5jbG9zZXN0KCBcIi51aS1oZWFkZXItZml4ZWQsIC51aS1mb290ZXItZml4ZWRcIiApLmxlbmd0aCApIHtcclxuXHRcdFx0XHRcdFx0Ly9GaXggZm9yIGlzc3VlICM0NzI0IE1vdmluZyB0aHJvdWdoIGZvcm0gaW4gTW9iaWxlIFNhZmFyaSB3aXRoIFwiTmV4dFwiIGFuZCBcIlByZXZpb3VzXCIgc3lzdGVtXHJcblx0XHRcdFx0XHRcdC8vY29udHJvbHMgY2F1c2VzIGZpeGVkIHBvc2l0aW9uLCB0YXAtdG9nZ2xlIGZhbHNlIEhlYWRlciB0byByZXZlYWwgaXRzZWxmXHJcblx0XHRcdFx0XHRcdC8vIGlzVmlzaWJsZSBpbnN0ZWFkIG9mIHNlbGYuX3Zpc2libGUgYmVjYXVzZSB0aGUgZm9jdXNpbiBhbmQgZm9jdXNvdXQgZXZlbnRzIGZpcmUgdHdpY2UgYXQgdGhlIHNhbWUgdGltZVxyXG5cdFx0XHRcdFx0XHQvLyBBbHNvIHVzZSBhIGRlbGF5IGZvciBoaWRpbmcgdGhlIHRvb2xiYXJzIGJlY2F1c2Ugb24gQW5kcm9pZCBuYXRpdmUgYnJvd3NlciBmb2N1c2luIGlzIGRpcmVjbHR5IGZvbGxvd2VkXHJcblx0XHRcdFx0XHRcdC8vIGJ5IGEgZm9jdXNvdXQgd2hlbiBhIG5hdGl2ZSBzZWxlY3RzIG9wZW5zIGFuZCB0aGUgb3RoZXIgd2F5IGFyb3VuZCB3aGVuIGl0IGNsb3Nlcy5cclxuXHRcdFx0XHRcdFx0aWYgKCBlLnR5cGUgPT09IFwiZm9jdXNvdXRcIiAmJiAhaXNWaXNpYmxlICkge1xyXG5cdFx0XHRcdFx0XHRcdGlzVmlzaWJsZSA9IHRydWU7XHJcblx0XHRcdFx0XHRcdFx0Ly93YWl0IGZvciB0aGUgc3RhY2sgdG8gdW53aW5kIGFuZCBzZWUgaWYgd2UgaGF2ZSBqdW1wZWQgdG8gYW5vdGhlciBpbnB1dFxyXG5cdFx0XHRcdFx0XHRcdGNsZWFyVGltZW91dCggZGVsYXlIaWRlICk7XHJcblx0XHRcdFx0XHRcdFx0ZGVsYXlTaG93ID0gc2V0VGltZW91dCggZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRzZWxmLnNob3coKTtcclxuXHRcdFx0XHRcdFx0XHR9LCAwICk7XHJcblx0XHRcdFx0XHRcdH0gZWxzZSBpZiAoIGUudHlwZSA9PT0gXCJmb2N1c2luXCIgJiYgISFpc1Zpc2libGUgKSB7XHJcblx0XHRcdFx0XHRcdFx0Ly9pZiB3ZSBoYXZlIGp1bXBlZCB0byBhbm90aGVyIGlucHV0IGNsZWFyIHRoZSB0aW1lIG91dCB0byBjYW5jZWwgdGhlIHNob3cuXHJcblx0XHRcdFx0XHRcdFx0Y2xlYXJUaW1lb3V0KCBkZWxheVNob3cgKTtcclxuXHRcdFx0XHRcdFx0XHRpc1Zpc2libGUgPSBmYWxzZTtcclxuXHRcdFx0XHRcdFx0XHRkZWxheUhpZGUgPSBzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdFx0XHRcdHNlbGYuaGlkZSgpO1xyXG5cdFx0XHRcdFx0XHRcdH0sIDAgKTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfc2V0UmVsYXRpdmU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRpZiggdGhpcy5vcHRpb25zLnBvc2l0aW9uICE9PSBcImZpeGVkXCIgKXtcclxuXHRcdFx0XHQkKCBcIltkYXRhLVwiKyAkLm1vYmlsZS5ucyArIFwicm9sZT0ncGFnZSddXCIgKS5jc3MoeyBcInBvc2l0aW9uXCI6IFwicmVsYXRpdmVcIiB9KTtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHJcblx0XHRfZGVzdHJveTogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHZhciBwYWdlQ2xhc3NlcywgdG9vbGJhckNsYXNzZXMsIGhhc0ZpeGVkLCBoZWFkZXIsIGhhc0Z1bGxzY3JlZW4sXHJcblx0XHRcdFx0cGFnZSA9IHRoaXMucGFnZWNvbnRhaW5lci5wYWdlY29udGFpbmVyKCBcImdldEFjdGl2ZVBhZ2VcIiApO1xyXG5cclxuXHRcdFx0dGhpcy5fc3VwZXIoKTtcclxuXHRcdFx0aWYgKCB0aGlzLm9wdGlvbnMucG9zaXRpb24gPT09IFwiZml4ZWRcIiApIHtcclxuXHRcdFx0XHRoYXNGaXhlZCA9ICQoICBcImJvZHk+LnVpLVwiICsgdGhpcy5yb2xlICsgXCItZml4ZWRcIiApXHJcblx0XHRcdFx0XHRcdFx0LmFkZCggcGFnZS5maW5kKCBcIi51aS1cIiArIHRoaXMub3B0aW9ucy5yb2xlICsgXCItZml4ZWRcIiApIClcclxuXHRcdFx0XHRcdFx0XHQubm90KCB0aGlzLmVsZW1lbnQgKS5sZW5ndGggPiAwO1xyXG5cdFx0XHRcdGhhc0Z1bGxzY3JlZW4gPSAkKCAgXCJib2R5Pi51aS1cIiArIHRoaXMucm9sZSArIFwiLWZpeGVkXCIgKVxyXG5cdFx0XHRcdFx0XHRcdC5hZGQoIHBhZ2UuZmluZCggXCIudWktXCIgKyB0aGlzLm9wdGlvbnMucm9sZSArIFwiLWZ1bGxzY3JlZW5cIiApIClcclxuXHRcdFx0XHRcdFx0XHQubm90KCB0aGlzLmVsZW1lbnQgKS5sZW5ndGggPiAwO1xyXG5cdFx0XHRcdHRvb2xiYXJDbGFzc2VzID0gIFwidWktaGVhZGVyLWZpeGVkIHVpLWZvb3Rlci1maXhlZCB1aS1oZWFkZXItZnVsbHNjcmVlbiBpbiBvdXRcIiArXHJcblx0XHRcdFx0XHRcIiB1aS1mb290ZXItZnVsbHNjcmVlbiBmYWRlIHNsaWRlZG93biBzbGlkZXVwIHVpLWZpeGVkLWhpZGRlblwiO1xyXG5cdFx0XHRcdHRoaXMuZWxlbWVudC5yZW1vdmVDbGFzcyggdG9vbGJhckNsYXNzZXMgKTtcclxuXHRcdFx0XHRpZiAoICFoYXNGdWxsc2NyZWVuICkge1xyXG5cdFx0XHRcdFx0cGFnZUNsYXNzZXMgPSBcInVpLXBhZ2UtXCIgKyB0aGlzLnJvbGUgKyBcIi1mdWxsc2NyZWVuXCI7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGlmICggIWhhc0ZpeGVkICkge1xyXG5cdFx0XHRcdFx0aGVhZGVyID0gdGhpcy5yb2xlID09PSBcImhlYWRlclwiO1xyXG5cdFx0XHRcdFx0cGFnZUNsYXNzZXMgKz0gXCIgdWktcGFnZS1cIiArIHRoaXMucm9sZSArIFwiLWZpeGVkXCI7XHJcblx0XHRcdFx0XHRwYWdlLmNzcyggXCJwYWRkaW5nLVwiICsgKCBoZWFkZXIgPyBcInRvcFwiIDogXCJib3R0b21cIiApLCBcIlwiICk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdHBhZ2UucmVtb3ZlQ2xhc3MoIHBhZ2VDbGFzc2VzICk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0fSk7XHJcbn0pKCBqUXVlcnkgKTtcclxuXHJcbihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xyXG5cdCQud2lkZ2V0KCBcIm1vYmlsZS50b29sYmFyXCIsICQubW9iaWxlLnRvb2xiYXIsIHtcclxuXHJcblx0XHRfbWFrZUZpeGVkOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dGhpcy5fc3VwZXIoKTtcclxuXHRcdFx0dGhpcy5fd29ya2Fyb3VuZHMoKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0Ly9jaGVjayB0aGUgYnJvd3NlciBhbmQgdmVyc2lvbiBhbmQgcnVuIG5lZWRlZCB3b3JrYXJvdW5kc1xyXG5cdFx0X3dvcmthcm91bmRzOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dmFyIHVhID0gbmF2aWdhdG9yLnVzZXJBZ2VudCxcclxuXHRcdFx0cGxhdGZvcm0gPSBuYXZpZ2F0b3IucGxhdGZvcm0sXHJcblx0XHRcdC8vIFJlbmRlcmluZyBlbmdpbmUgaXMgV2Via2l0LCBhbmQgY2FwdHVyZSBtYWpvciB2ZXJzaW9uXHJcblx0XHRcdHdrbWF0Y2ggPSB1YS5tYXRjaCggL0FwcGxlV2ViS2l0XFwvKFswLTldKykvICksXHJcblx0XHRcdHdrdmVyc2lvbiA9ICEhd2ttYXRjaCAmJiB3a21hdGNoWyAxIF0sXHJcblx0XHRcdG9zID0gbnVsbCxcclxuXHRcdFx0c2VsZiA9IHRoaXM7XHJcblx0XHRcdC8vc2V0IHRoZSBvcyB3ZSBhcmUgd29ya2luZyBpbiBpZiBpdCBkb3NlbnQgbWF0Y2ggb25lIHdpdGggd29ya2Fyb3VuZHMgcmV0dXJuXHJcblx0XHRcdGlmICggcGxhdGZvcm0uaW5kZXhPZiggXCJpUGhvbmVcIiApID4gLTEgfHwgcGxhdGZvcm0uaW5kZXhPZiggXCJpUGFkXCIgKSA+IC0xICB8fCBwbGF0Zm9ybS5pbmRleE9mKCBcImlQb2RcIiApID4gLTEgKSB7XHJcblx0XHRcdFx0b3MgPSBcImlvc1wiO1xyXG5cdFx0XHR9IGVsc2UgaWYgKCB1YS5pbmRleE9mKCBcIkFuZHJvaWRcIiApID4gLTEgKSB7XHJcblx0XHRcdFx0b3MgPSBcImFuZHJvaWRcIjtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHRcdFx0Ly9jaGVjayBvcyB2ZXJzaW9uIGlmIGl0IGRvc2VudCBtYXRjaCBvbmUgd2l0aCB3b3JrYXJvdW5kcyByZXR1cm5cclxuXHRcdFx0aWYgKCBvcyA9PT0gXCJpb3NcIiApIHtcclxuXHRcdFx0XHQvL2lPUyAgd29ya2Fyb3VuZHNcclxuXHRcdFx0XHRzZWxmLl9iaW5kU2Nyb2xsV29ya2Fyb3VuZCgpO1xyXG5cdFx0XHR9IGVsc2UgaWYgKCBvcyA9PT0gXCJhbmRyb2lkXCIgJiYgd2t2ZXJzaW9uICYmIHdrdmVyc2lvbiA8IDUzNCApIHtcclxuXHRcdFx0XHQvL0FuZHJvaWQgMi4zIHJ1biBhbGwgQW5kcm9pZCAyLjMgd29ya2Fyb3VuZFxyXG5cdFx0XHRcdHNlbGYuX2JpbmRTY3JvbGxXb3JrYXJvdW5kKCk7XHJcblx0XHRcdFx0c2VsZi5fYmluZExpc3RUaHVtYldvcmthcm91bmQoKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblxyXG5cdFx0Ly9VdGlsaXR5IGNsYXNzIGZvciBjaGVja2luZyBoZWFkZXIgYW5kIGZvb3RlciBwb3NpdGlvbnMgcmVsYXRpdmUgdG8gdmlld3BvcnRcclxuXHRcdF92aWV3cG9ydE9mZnNldDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHZhciAkZWwgPSB0aGlzLmVsZW1lbnQsXHJcblx0XHRcdFx0aGVhZGVyID0gJGVsLmhhc0NsYXNzKCBcInVpLWhlYWRlclwiICksXHJcblx0XHRcdFx0b2Zmc2V0ID0gTWF0aC5hYnMoICRlbC5vZmZzZXQoKS50b3AgLSB0aGlzLndpbmRvdy5zY3JvbGxUb3AoKSApO1xyXG5cdFx0XHRpZiAoICFoZWFkZXIgKSB7XHJcblx0XHRcdFx0b2Zmc2V0ID0gTWF0aC5yb3VuZCggb2Zmc2V0IC0gdGhpcy53aW5kb3cuaGVpZ2h0KCkgKyAkZWwub3V0ZXJIZWlnaHQoKSApIC0gNjA7XHJcblx0XHRcdH1cclxuXHRcdFx0cmV0dXJuIG9mZnNldDtcclxuXHRcdH0sXHJcblxyXG5cdFx0Ly9iaW5kIGV2ZW50cyBmb3IgX3RyaWdnZXJSZWRyYXcoKSBmdW5jdGlvblxyXG5cdFx0X2JpbmRTY3JvbGxXb3JrYXJvdW5kOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xyXG5cdFx0XHQvL2JpbmQgdG8gc2Nyb2xsc3RvcCBhbmQgY2hlY2sgaWYgdGhlIHRvb2xiYXJzIGFyZSBjb3JyZWN0bHkgcG9zaXRpb25lZFxyXG5cdFx0XHR0aGlzLl9vbiggdGhpcy53aW5kb3csIHsgc2Nyb2xsc3RvcDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0dmFyIHZpZXdwb3J0T2Zmc2V0ID0gc2VsZi5fdmlld3BvcnRPZmZzZXQoKTtcclxuXHRcdFx0XHQvL2NoZWNrIGlmIHRoZSBoZWFkZXIgaXMgdmlzaWJsZSBhbmQgaWYgaXRzIGluIHRoZSByaWdodCBwbGFjZVxyXG5cdFx0XHRcdGlmICggdmlld3BvcnRPZmZzZXQgPiAyICYmIHNlbGYuX3Zpc2libGUgKSB7XHJcblx0XHRcdFx0XHRzZWxmLl90cmlnZ2VyUmVkcmF3KCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9fSk7XHJcblx0XHR9LFxyXG5cclxuXHRcdC8vdGhpcyBhZGRyZXNzZXMgaXNzdWUgIzQyNTAgUGVyc2lzdGVudCBmb290ZXIgaW5zdGFiaWxpdHkgaW4gdjEuMSB3aXRoIGxvbmcgc2VsZWN0IGxpc3RzIGluIEFuZHJvaWQgMi4zLjNcclxuXHRcdC8vYW5kIGlzc3VlICMzNzQ4IEFuZHJvaWQgMi54OiBQYWdlIHRyYW5zaXRpb25zIGJyb2tlbiB3aGVuIGZpeGVkIHRvb2xiYXJzIHVzZWRcclxuXHRcdC8vdGhlIGFic29sdXRlbHkgcG9zaXRpb25lZCB0aHVtYm5haWwgaW4gYSBsaXN0IHZpZXcgY2F1c2VzIHByb2JsZW1zIHdpdGggZml4ZWQgcG9zaXRpb24gYnV0dG9ucyBhYm92ZSBpbiBhIG5hdiBiYXJcclxuXHRcdC8vc2V0dGluZyB0aGUgbGkncyB0byAtd2Via2l0LXRyYW5zZm9ybTp0cmFuc2xhdGUzZCgwLDAsMCk7IHNvbHZlcyB0aGlzIHByb2JsZW0gdG8gYXZvaWRlIHBvdGVudGlhbCBpc3N1ZXMgaW4gb3RoZXJcclxuXHRcdC8vcGxhdGZvcm1zIHdlIHNjb3BlIHRoaXMgd2l0aCB0aGUgY2xhc3MgdWktYW5kcm9pZC0yeC1maXhcclxuXHRcdF9iaW5kTGlzdFRodW1iV29ya2Fyb3VuZDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHRoaXMuZWxlbWVudC5jbG9zZXN0KCBcIi51aS1wYWdlXCIgKS5hZGRDbGFzcyggXCJ1aS1hbmRyb2lkLTJ4LWZpeGVkXCIgKTtcclxuXHRcdH0sXHJcblx0XHQvL3RoaXMgYWRkcmVzc2VzIGlzc3VlcyAjNDMzNyBGaXhlZCBoZWFkZXIgcHJvYmxlbSBhZnRlciBzY3JvbGxpbmcgY29udGVudCBvbiBpT1MgYW5kIEFuZHJvaWRcclxuXHRcdC8vYW5kIGRldmljZSBidWdzIHByb2plY3QgaXNzdWUgIzEgRm9ybSBlbGVtZW50cyBjYW4gbG9zZSBjbGljayBoaXQgYXJlYSBpbiBwb3NpdGlvbjogZml4ZWQgY29udGFpbmVycy5cclxuXHRcdC8vdGhpcyBhbHNvIGFkZHJlc3NlcyBub3Qgb24gZml4ZWQgdG9vbGJhcnMgcGFnZSBpbiBkb2NzXHJcblx0XHQvL2FkZGluZyAxcHggb2YgcGFkZGluZyB0byB0aGUgYm90dG9tIHRoZW4gcmVtb3ZpbmcgaXQgY2F1c2VzIGEgXCJyZWRyYXdcIlxyXG5cdFx0Ly93aGljaCBwb3NpdGlvbnMgdGhlIHRvb2xiYXJzIGNvcnJlY3RseSAodGhleSB3aWxsIGFsd2F5cyBiZSB2aXN1YWxseSBjb3JyZWN0KVxyXG5cdFx0X3RyaWdnZXJSZWRyYXc6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR2YXIgcGFkZGluZ0JvdHRvbSA9IHBhcnNlRmxvYXQoICQoIFwiLnVpLXBhZ2UtYWN0aXZlXCIgKS5jc3MoIFwicGFkZGluZy1ib3R0b21cIiApICk7XHJcblx0XHRcdC8vdHJpZ2dlciBwYWdlIHJlZHJhdyB0byBmaXggaW5jb3JyZWN0bHkgcG9zaXRpb25lZCBmaXhlZCBlbGVtZW50c1xyXG5cdFx0XHQkKCBcIi51aS1wYWdlLWFjdGl2ZVwiICkuY3NzKCBcInBhZGRpbmctYm90dG9tXCIsICggcGFkZGluZ0JvdHRvbSArIDEgKSArIFwicHhcIiApO1xyXG5cdFx0XHQvL2lmIHRoZSBwYWRkaW5nIGlzIHJlc2V0IHdpdGggb3V0IGEgdGltZW91dCB0aGUgcmVwb3NpdGlvbiB3aWxsIG5vdCBvY2N1cmUuXHJcblx0XHRcdC8vdGhpcyBpcyBpbmRlcGVuZGFudCBvZiBKUU0gdGhlIGJyb3dzZXIgc2VlbXMgdG8gbmVlZCB0aGUgdGltZSB0byByZWFjdC5cclxuXHRcdFx0c2V0VGltZW91dCggZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0JCggXCIudWktcGFnZS1hY3RpdmVcIiApLmNzcyggXCJwYWRkaW5nLWJvdHRvbVwiLCBwYWRkaW5nQm90dG9tICsgXCJweFwiICk7XHJcblx0XHRcdH0sIDAgKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0ZGVzdHJveTogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHRoaXMuX3N1cGVyKCk7XHJcblx0XHRcdC8vUmVtb3ZlIHRoZSBjbGFzcyB3ZSBhZGRlZCB0byB0aGUgcGFnZSBwcmV2aW91c2x5IGluIGFuZHJvaWQgMi54XHJcblx0XHRcdHRoaXMuZWxlbWVudC5jbG9zZXN0KCBcIi51aS1wYWdlLWFjdGl2ZVwiICkucmVtb3ZlQ2xhc3MoIFwidWktYW5kcm9pZC0yeC1maXhcIiApO1xyXG5cdFx0fVxyXG5cdH0pO1xyXG5cclxufSkoIGpRdWVyeSApO1xyXG5cclxuXHJcbiggZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcclxuXHJcbnZhciBpZUhhY2sgPSAoICQubW9iaWxlLmJyb3dzZXIub2xkSUUgJiYgJC5tb2JpbGUuYnJvd3Nlci5vbGRJRSA8PSA4ICksXHJcblx0dWlUZW1wbGF0ZSA9ICQoXHJcblx0XHRcIjxkaXYgY2xhc3M9J3VpLXBvcHVwLWFycm93LWd1aWRlJz48L2Rpdj5cIiArXHJcblx0XHRcIjxkaXYgY2xhc3M9J3VpLXBvcHVwLWFycm93LWNvbnRhaW5lclwiICsgKCBpZUhhY2sgPyBcIiBpZVwiIDogXCJcIiApICsgXCInPlwiICtcclxuXHRcdFx0XCI8ZGl2IGNsYXNzPSd1aS1wb3B1cC1hcnJvdyc+PC9kaXY+XCIgK1xyXG5cdFx0XCI8L2Rpdj5cIlxyXG5cdCk7XHJcblxyXG5mdW5jdGlvbiBnZXRBcnJvdygpIHtcclxuXHR2YXIgY2xvbmUgPSB1aVRlbXBsYXRlLmNsb25lKCksXHJcblx0XHRnZCA9IGNsb25lLmVxKCAwICksXHJcblx0XHRjdCA9IGNsb25lLmVxKCAxICksXHJcblx0XHRhciA9IGN0LmNoaWxkcmVuKCk7XHJcblxyXG5cdHJldHVybiB7IGFyRWxzOiBjdC5hZGQoIGdkICksIGdkOiBnZCwgY3Q6IGN0LCBhcjogYXIgfTtcclxufVxyXG5cclxuJC53aWRnZXQoIFwibW9iaWxlLnBvcHVwXCIsICQubW9iaWxlLnBvcHVwLCB7XHJcblx0b3B0aW9uczoge1xyXG5cclxuXHRcdGFycm93OiBcIlwiXHJcblx0fSxcclxuXHJcblx0X2NyZWF0ZTogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgYXIsXHJcblx0XHRcdHJldCA9IHRoaXMuX3N1cGVyKCk7XHJcblxyXG5cdFx0aWYgKCB0aGlzLm9wdGlvbnMuYXJyb3cgKSB7XHJcblx0XHRcdHRoaXMuX3VpLmFycm93ID0gYXIgPSB0aGlzLl9hZGRBcnJvdygpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiByZXQ7XHJcblx0fSxcclxuXHJcblx0X2FkZEFycm93OiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciB0aGVtZSxcclxuXHRcdFx0b3B0cyA9IHRoaXMub3B0aW9ucyxcclxuXHRcdFx0YXIgPSBnZXRBcnJvdygpO1xyXG5cclxuXHRcdHRoZW1lID0gdGhpcy5fdGhlbWVDbGFzc0Zyb21PcHRpb24oIFwidWktYm9keS1cIiwgb3B0cy50aGVtZSApO1xyXG5cdFx0YXIuYXIuYWRkQ2xhc3MoIHRoZW1lICsgKCBvcHRzLnNoYWRvdyA/IFwiIHVpLW92ZXJsYXktc2hhZG93XCIgOiBcIlwiICkgKTtcclxuXHRcdGFyLmFyRWxzLmhpZGUoKS5hcHBlbmRUbyggdGhpcy5lbGVtZW50ICk7XHJcblxyXG5cdFx0cmV0dXJuIGFyO1xyXG5cdH0sXHJcblxyXG5cdF91bmVuaGFuY2U6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIGFyID0gdGhpcy5fdWkuYXJyb3c7XHJcblxyXG5cdFx0aWYgKCBhciApIHtcclxuXHRcdFx0YXIuYXJFbHMucmVtb3ZlKCk7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHRoaXMuX3N1cGVyKCk7XHJcblx0fSxcclxuXHJcblx0Ly8gUHJldGVuZCB0byBzaG93IGFuIGFycm93IGRlc2NyaWJlZCBieSBAcCBhbmQgQGRpciBhbmQgY2FsY3VsYXRlIHRoZVxyXG5cdC8vIGRpc3RhbmNlIGZyb20gdGhlIGRlc2lyZWQgcG9pbnQuIElmIGEgYmVzdC1kaXN0YW5jZSBpcyBwYXNzZWQgaW4sIHJldHVyblxyXG5cdC8vIHRoZSBtaW5pbXVtIG9mIHRoZSBvbmUgcGFzc2VkIGluIGFuZCB0aGUgb25lIGNhbGN1bGF0ZWQuXHJcblx0X3RyeUFuQXJyb3c6IGZ1bmN0aW9uKCBwLCBkaXIsIGRlc2lyZWQsIHMsIGJlc3QgKSB7XHJcblx0XHR2YXIgcmVzdWx0LCByLCBkaWZmLCBkZXNpcmVkRm9yQXJyb3cgPSB7fSwgdGlwID0ge307XHJcblxyXG5cdFx0Ly8gSWYgdGhlIGFycm93IGhhcyBubyB3aWdnbGUgcm9vbSBhbG9uZyB0aGUgZWRnZSBvZiB0aGUgcG9wdXAsIGl0IGNhbm5vdFxyXG5cdFx0Ly8gYmUgZGlzcGxheWVkIGFsb25nIHRoZSByZXF1ZXN0ZWQgZWRnZSB3aXRob3V0IGl0IHN0aWNraW5nIG91dC5cclxuXHRcdGlmICggcy5hckZ1bGxbIHAuZGltS2V5IF0gPiBzLmd1aWRlRGltc1sgcC5kaW1LZXkgXSApIHtcclxuXHRcdFx0cmV0dXJuIGJlc3Q7XHJcblx0XHR9XHJcblxyXG5cdFx0ZGVzaXJlZEZvckFycm93WyBwLmZzdCBdID0gZGVzaXJlZFsgcC5mc3QgXSArXHJcblx0XHRcdCggcy5hckhhbGZbIHAub0RpbUtleSBdICsgcy5tZW51SGFsZlsgcC5vRGltS2V5IF0gKSAqIHAub2Zmc2V0RmFjdG9yIC1cclxuXHRcdFx0cy5jb250ZW50Qm94WyBwLmZzdCBdICsgKCBzLmNsYW1wSW5mby5tZW51U2l6ZVsgcC5vRGltS2V5IF0gLSBzLmNvbnRlbnRCb3hbIHAub0RpbUtleSBdICkgKiBwLmFycm93T2Zmc2V0RmFjdG9yO1xyXG5cdFx0ZGVzaXJlZEZvckFycm93WyBwLnNuZCBdID0gZGVzaXJlZFsgcC5zbmQgXTtcclxuXHJcblx0XHRyZXN1bHQgPSBzLnJlc3VsdCB8fCB0aGlzLl9jYWxjdWxhdGVGaW5hbExvY2F0aW9uKCBkZXNpcmVkRm9yQXJyb3csIHMuY2xhbXBJbmZvICk7XHJcblx0XHRyID0geyB4OiByZXN1bHQubGVmdCwgeTogcmVzdWx0LnRvcCB9O1xyXG5cclxuXHRcdHRpcFsgcC5mc3QgXSA9IHJbIHAuZnN0IF0gKyBzLmNvbnRlbnRCb3hbIHAuZnN0IF0gKyBwLnRpcE9mZnNldDtcclxuXHRcdHRpcFsgcC5zbmQgXSA9IE1hdGgubWF4KCByZXN1bHRbIHAucHJvcCBdICsgcy5ndWlkZU9mZnNldFsgcC5wcm9wIF0gKyBzLmFySGFsZlsgcC5kaW1LZXkgXSxcclxuXHRcdFx0TWF0aC5taW4oIHJlc3VsdFsgcC5wcm9wIF0gKyBzLmd1aWRlT2Zmc2V0WyBwLnByb3AgXSArIHMuZ3VpZGVEaW1zWyBwLmRpbUtleSBdIC0gcy5hckhhbGZbIHAuZGltS2V5IF0sXHJcblx0XHRcdFx0ZGVzaXJlZFsgcC5zbmQgXSApICk7XHJcblxyXG5cdFx0ZGlmZiA9IE1hdGguYWJzKCBkZXNpcmVkLnggLSB0aXAueCApICsgTWF0aC5hYnMoIGRlc2lyZWQueSAtIHRpcC55ICk7XHJcblx0XHRpZiAoICFiZXN0IHx8IGRpZmYgPCBiZXN0LmRpZmYgKSB7XHJcblx0XHRcdC8vIENvbnZlcnQgdGlwIG9mZnNldCB0byBjb29yZGluYXRlcyBpbnNpZGUgdGhlIHBvcHVwXHJcblx0XHRcdHRpcFsgcC5zbmQgXSAtPSBzLmFySGFsZlsgcC5kaW1LZXkgXSArIHJlc3VsdFsgcC5wcm9wIF0gKyBzLmNvbnRlbnRCb3hbIHAuc25kIF07XHJcblx0XHRcdGJlc3QgPSB7IGRpcjogZGlyLCBkaWZmOiBkaWZmLCByZXN1bHQ6IHJlc3VsdCwgcG9zUHJvcDogcC5wcm9wLCBwb3NWYWw6IHRpcFsgcC5zbmQgXSB9O1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiBiZXN0O1xyXG5cdH0sXHJcblxyXG5cdF9nZXRQbGFjZW1lbnRTdGF0ZTogZnVuY3Rpb24oIGNsYW1wICkge1xyXG5cdFx0dmFyIG9mZnNldCwgZ2RPZmZzZXQsXHJcblx0XHRcdGFyID0gdGhpcy5fdWkuYXJyb3csXHJcblx0XHRcdHN0YXRlID0ge1xyXG5cdFx0XHRcdGNsYW1wSW5mbzogdGhpcy5fY2xhbXBQb3B1cFdpZHRoKCAhY2xhbXAgKSxcclxuXHRcdFx0XHRhckZ1bGw6IHsgY3g6IGFyLmN0LndpZHRoKCksIGN5OiBhci5jdC5oZWlnaHQoKSB9LFxyXG5cdFx0XHRcdGd1aWRlRGltczogeyBjeDogYXIuZ2Qud2lkdGgoKSwgY3k6IGFyLmdkLmhlaWdodCgpIH0sXHJcblx0XHRcdFx0Z3VpZGVPZmZzZXQ6IGFyLmdkLm9mZnNldCgpXHJcblx0XHRcdH07XHJcblxyXG5cdFx0b2Zmc2V0ID0gdGhpcy5lbGVtZW50Lm9mZnNldCgpO1xyXG5cclxuXHRcdGFyLmdkLmNzcyggeyBsZWZ0OiAwLCB0b3A6IDAsIHJpZ2h0OiAwLCBib3R0b206IDAgfSApO1xyXG5cdFx0Z2RPZmZzZXQgPSBhci5nZC5vZmZzZXQoKTtcclxuXHRcdHN0YXRlLmNvbnRlbnRCb3ggPSB7XHJcblx0XHRcdHg6IGdkT2Zmc2V0LmxlZnQgLSBvZmZzZXQubGVmdCxcclxuXHRcdFx0eTogZ2RPZmZzZXQudG9wIC0gb2Zmc2V0LnRvcCxcclxuXHRcdFx0Y3g6IGFyLmdkLndpZHRoKCksXHJcblx0XHRcdGN5OiBhci5nZC5oZWlnaHQoKVxyXG5cdFx0fTtcclxuXHRcdGFyLmdkLnJlbW92ZUF0dHIoIFwic3R5bGVcIiApO1xyXG5cclxuXHRcdC8vIFRoZSBhcnJvdyBib3ggbW92ZXMgYmV0d2VlbiBndWlkZU9mZnNldCBhbmQgZ3VpZGVPZmZzZXQgKyBndWlkZURpbXMgLSBhckZ1bGxcclxuXHRcdHN0YXRlLmd1aWRlT2Zmc2V0ID0geyBsZWZ0OiBzdGF0ZS5ndWlkZU9mZnNldC5sZWZ0IC0gb2Zmc2V0LmxlZnQsIHRvcDogc3RhdGUuZ3VpZGVPZmZzZXQudG9wIC0gb2Zmc2V0LnRvcCB9O1xyXG5cdFx0c3RhdGUuYXJIYWxmID0geyBjeDogc3RhdGUuYXJGdWxsLmN4IC8gMiwgY3k6IHN0YXRlLmFyRnVsbC5jeSAvIDIgfTtcclxuXHRcdHN0YXRlLm1lbnVIYWxmID0geyBjeDogc3RhdGUuY2xhbXBJbmZvLm1lbnVTaXplLmN4IC8gMiwgY3k6IHN0YXRlLmNsYW1wSW5mby5tZW51U2l6ZS5jeSAvIDIgfTtcclxuXHJcblx0XHRyZXR1cm4gc3RhdGU7XHJcblx0fSxcclxuXHJcblx0X3BsYWNlbWVudENvb3JkczogZnVuY3Rpb24oIGRlc2lyZWQgKSB7XHJcblx0XHR2YXIgc3RhdGUsIGJlc3QsIHBhcmFtcywgZWxPZmZzZXQsIGJnUmVmLFxyXG5cdFx0XHRvcHRpb25WYWx1ZSA9IHRoaXMub3B0aW9ucy5hcnJvdyxcclxuXHRcdFx0YXIgPSB0aGlzLl91aS5hcnJvdztcclxuXHJcblx0XHRpZiAoICFhciApIHtcclxuXHRcdFx0cmV0dXJuIHRoaXMuX3N1cGVyKCBkZXNpcmVkICk7XHJcblx0XHR9XHJcblxyXG5cdFx0YXIuYXJFbHMuc2hvdygpO1xyXG5cclxuXHRcdGJnUmVmID0ge307XHJcblx0XHRzdGF0ZSA9IHRoaXMuX2dldFBsYWNlbWVudFN0YXRlKCB0cnVlICk7XHJcblx0XHRwYXJhbXMgPSB7XHJcblx0XHRcdFwibFwiOiB7IGZzdDogXCJ4XCIsIHNuZDogXCJ5XCIsIHByb3A6IFwidG9wXCIsIGRpbUtleTogXCJjeVwiLCBvRGltS2V5OiBcImN4XCIsIG9mZnNldEZhY3RvcjogMSwgdGlwT2Zmc2V0OiAgLXN0YXRlLmFySGFsZi5jeCwgYXJyb3dPZmZzZXRGYWN0b3I6IDAgfSxcclxuXHRcdFx0XCJyXCI6IHsgZnN0OiBcInhcIiwgc25kOiBcInlcIiwgcHJvcDogXCJ0b3BcIiwgZGltS2V5OiBcImN5XCIsIG9EaW1LZXk6IFwiY3hcIiwgb2Zmc2V0RmFjdG9yOiAtMSwgdGlwT2Zmc2V0OiBzdGF0ZS5hckhhbGYuY3ggKyBzdGF0ZS5jb250ZW50Qm94LmN4LCBhcnJvd09mZnNldEZhY3RvcjogMSB9LFxyXG5cdFx0XHRcImJcIjogeyBmc3Q6IFwieVwiLCBzbmQ6IFwieFwiLCBwcm9wOiBcImxlZnRcIiwgZGltS2V5OiBcImN4XCIsIG9EaW1LZXk6IFwiY3lcIiwgb2Zmc2V0RmFjdG9yOiAtMSwgdGlwT2Zmc2V0OiBzdGF0ZS5hckhhbGYuY3kgKyBzdGF0ZS5jb250ZW50Qm94LmN5LCBhcnJvd09mZnNldEZhY3RvcjogMSB9LFxyXG5cdFx0XHRcInRcIjogeyBmc3Q6IFwieVwiLCBzbmQ6IFwieFwiLCBwcm9wOiBcImxlZnRcIiwgZGltS2V5OiBcImN4XCIsIG9EaW1LZXk6IFwiY3lcIiwgb2Zmc2V0RmFjdG9yOiAxLCB0aXBPZmZzZXQ6IC1zdGF0ZS5hckhhbGYuY3ksIGFycm93T2Zmc2V0RmFjdG9yOiAwIH1cclxuXHRcdH07XHJcblxyXG5cdFx0Ly8gVHJ5IGVhY2ggc2lkZSBzcGVjaWZpZWQgaW4gdGhlIG9wdGlvbnMgdG8gc2VlIG9uIHdoaWNoIG9uZSB0aGUgYXJyb3dcclxuXHRcdC8vIHNob3VsZCBiZSBwbGFjZWQgc3VjaCB0aGF0IHRoZSBkaXN0YW5jZSBiZXR3ZWVuIHRoZSB0aXAgb2YgdGhlIGFycm93IGFuZFxyXG5cdFx0Ly8gdGhlIGRlc2lyZWQgY29vcmRpbmF0ZXMgaXMgdGhlIHNob3J0ZXN0LlxyXG5cdFx0JC5lYWNoKCAoIG9wdGlvblZhbHVlID09PSB0cnVlID8gXCJsLHQscixiXCIgOiBvcHRpb25WYWx1ZSApLnNwbGl0KCBcIixcIiApLFxyXG5cdFx0XHQkLnByb3h5KCBmdW5jdGlvbigga2V5LCB2YWx1ZSApIHtcclxuXHRcdFx0XHRiZXN0ID0gdGhpcy5fdHJ5QW5BcnJvdyggcGFyYW1zWyB2YWx1ZSBdLCB2YWx1ZSwgZGVzaXJlZCwgc3RhdGUsIGJlc3QgKTtcclxuXHRcdFx0fSwgdGhpcyApICk7XHJcblxyXG5cdFx0Ly8gQ291bGQgbm90IHBsYWNlIHRoZSBhcnJvdyBhbG9uZyBhbnkgb2YgdGhlIGVkZ2VzIC0gYmVoYXZlIGFzIGlmIHNob3dpbmdcclxuXHRcdC8vIHRoZSBhcnJvdyB3YXMgdHVybmVkIG9mZi5cclxuXHRcdGlmICggIWJlc3QgKSB7XHJcblx0XHRcdGFyLmFyRWxzLmhpZGUoKTtcclxuXHRcdFx0cmV0dXJuIHRoaXMuX3N1cGVyKCBkZXNpcmVkICk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gTW92ZSB0aGUgYXJyb3cgaW50byBwbGFjZVxyXG5cdFx0YXIuY3RcclxuXHRcdFx0LnJlbW92ZUNsYXNzKCBcInVpLXBvcHVwLWFycm93LWwgdWktcG9wdXAtYXJyb3ctdCB1aS1wb3B1cC1hcnJvdy1yIHVpLXBvcHVwLWFycm93LWJcIiApXHJcblx0XHRcdC5hZGRDbGFzcyggXCJ1aS1wb3B1cC1hcnJvdy1cIiArIGJlc3QuZGlyIClcclxuXHRcdFx0LnJlbW92ZUF0dHIoIFwic3R5bGVcIiApLmNzcyggYmVzdC5wb3NQcm9wLCBiZXN0LnBvc1ZhbCApXHJcblx0XHRcdC5zaG93KCk7XHJcblxyXG5cdFx0Ly8gRG8gbm90IG1vdmUvc2l6ZSB0aGUgYmFja2dyb3VuZCBkaXYgb24gSUUsIGJlY2F1c2Ugd2UgdXNlIHRoZSBhcnJvdyBkaXYgZm9yIGJhY2tncm91bmQgYXMgd2VsbC5cclxuXHRcdGlmICggIWllSGFjayApIHtcclxuXHRcdFx0ZWxPZmZzZXQgPSB0aGlzLmVsZW1lbnQub2Zmc2V0KCk7XHJcblx0XHRcdGJnUmVmWyBwYXJhbXNbIGJlc3QuZGlyIF0uZnN0IF0gPSBhci5jdC5vZmZzZXQoKTtcclxuXHRcdFx0YmdSZWZbIHBhcmFtc1sgYmVzdC5kaXIgXS5zbmQgXSA9IHtcclxuXHRcdFx0XHRsZWZ0OiBlbE9mZnNldC5sZWZ0ICsgc3RhdGUuY29udGVudEJveC54LFxyXG5cdFx0XHRcdHRvcDogZWxPZmZzZXQudG9wICsgc3RhdGUuY29udGVudEJveC55XHJcblx0XHRcdH07XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIGJlc3QucmVzdWx0O1xyXG5cdH0sXHJcblxyXG5cdF9zZXRPcHRpb25zOiBmdW5jdGlvbiggb3B0cyApIHtcclxuXHRcdHZhciBuZXdUaGVtZSxcclxuXHRcdFx0b2xkVGhlbWUgPSB0aGlzLm9wdGlvbnMudGhlbWUsXHJcblx0XHRcdGFyID0gdGhpcy5fdWkuYXJyb3csXHJcblx0XHRcdHJldCA9IHRoaXMuX3N1cGVyKCBvcHRzICk7XHJcblxyXG5cdFx0aWYgKCBvcHRzLmFycm93ICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdGlmICggIWFyICYmIG9wdHMuYXJyb3cgKSB7XHJcblx0XHRcdFx0dGhpcy5fdWkuYXJyb3cgPSB0aGlzLl9hZGRBcnJvdygpO1xyXG5cclxuXHRcdFx0XHQvLyBJbXBvcnRhbnQgdG8gcmV0dXJuIGhlcmUgc28gd2UgZG9uJ3Qgc2V0IHRoZSBzYW1lIG9wdGlvbnMgYWxsIG92ZXJcclxuXHRcdFx0XHQvLyBhZ2FpbiBiZWxvdy5cclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH0gZWxzZSBpZiAoIGFyICYmICFvcHRzLmFycm93ICkge1xyXG5cdFx0XHRcdGFyLmFyRWxzLnJlbW92ZSgpO1xyXG5cdFx0XHRcdHRoaXMuX3VpLmFycm93ID0gbnVsbDtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdC8vIFJlYXNzaWduIHdpdGggcG90ZW50aWFsbHkgbmV3IGFycm93XHJcblx0XHRhciA9IHRoaXMuX3VpLmFycm93O1xyXG5cclxuXHRcdGlmICggYXIgKSB7XHJcblx0XHRcdGlmICggb3B0cy50aGVtZSAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRcdG9sZFRoZW1lID0gdGhpcy5fdGhlbWVDbGFzc0Zyb21PcHRpb24oIFwidWktYm9keS1cIiwgb2xkVGhlbWUgKTtcclxuXHRcdFx0XHRuZXdUaGVtZSA9IHRoaXMuX3RoZW1lQ2xhc3NGcm9tT3B0aW9uKCBcInVpLWJvZHktXCIsIG9wdHMudGhlbWUgKTtcclxuXHRcdFx0XHRhci5hci5yZW1vdmVDbGFzcyggb2xkVGhlbWUgKS5hZGRDbGFzcyggbmV3VGhlbWUgKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aWYgKCBvcHRzLnNoYWRvdyAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRcdGFyLmFyLnRvZ2dsZUNsYXNzKCBcInVpLW92ZXJsYXktc2hhZG93XCIsIG9wdHMuc2hhZG93ICk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gcmV0O1xyXG5cdH0sXHJcblxyXG5cdF9kZXN0cm95OiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBhciA9IHRoaXMuX3VpLmFycm93O1xyXG5cclxuXHRcdGlmICggYXIgKSB7XHJcblx0XHRcdGFyLmFyRWxzLnJlbW92ZSgpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiB0aGlzLl9zdXBlcigpO1xyXG5cdH1cclxufSk7XHJcblxyXG59KSggalF1ZXJ5ICk7XHJcblxyXG5cclxuKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7XHJcblxyXG4kLndpZGdldCggXCJtb2JpbGUucGFuZWxcIiwge1xyXG5cdG9wdGlvbnM6IHtcclxuXHRcdGNsYXNzZXM6IHtcclxuXHRcdFx0cGFuZWw6IFwidWktcGFuZWxcIixcclxuXHRcdFx0cGFuZWxPcGVuOiBcInVpLXBhbmVsLW9wZW5cIixcclxuXHRcdFx0cGFuZWxDbG9zZWQ6IFwidWktcGFuZWwtY2xvc2VkXCIsXHJcblx0XHRcdHBhbmVsRml4ZWQ6IFwidWktcGFuZWwtZml4ZWRcIixcclxuXHRcdFx0cGFuZWxJbm5lcjogXCJ1aS1wYW5lbC1pbm5lclwiLFxyXG5cdFx0XHRtb2RhbDogXCJ1aS1wYW5lbC1kaXNtaXNzXCIsXHJcblx0XHRcdG1vZGFsT3BlbjogXCJ1aS1wYW5lbC1kaXNtaXNzLW9wZW5cIixcclxuXHRcdFx0cGFnZUNvbnRhaW5lcjogXCJ1aS1wYW5lbC1wYWdlLWNvbnRhaW5lclwiLFxyXG5cdFx0XHRwYWdlV3JhcHBlcjogXCJ1aS1wYW5lbC13cmFwcGVyXCIsXHJcblx0XHRcdHBhZ2VGaXhlZFRvb2xiYXI6IFwidWktcGFuZWwtZml4ZWQtdG9vbGJhclwiLFxyXG5cdFx0XHRwYWdlQ29udGVudFByZWZpeDogXCJ1aS1wYW5lbC1wYWdlLWNvbnRlbnRcIiwgLyogVXNlZCBmb3Igd3JhcHBlciBhbmQgZml4ZWQgdG9vbGJhcnMgcG9zaXRpb24sIGRpc3BsYXkgYW5kIG9wZW4gY2xhc3Nlcy4gKi9cclxuXHRcdFx0YW5pbWF0ZTogXCJ1aS1wYW5lbC1hbmltYXRlXCJcclxuXHRcdH0sXHJcblx0XHRhbmltYXRlOiB0cnVlLFxyXG5cdFx0dGhlbWU6IG51bGwsXHJcblx0XHRwb3NpdGlvbjogXCJsZWZ0XCIsXHJcblx0XHRkaXNtaXNzaWJsZTogdHJ1ZSxcclxuXHRcdGRpc3BsYXk6IFwicmV2ZWFsXCIsIC8vYWNjZXB0cyByZXZlYWwsIHB1c2gsIG92ZXJsYXlcclxuXHRcdHN3aXBlQ2xvc2U6IHRydWUsXHJcblx0XHRwb3NpdGlvbkZpeGVkOiBmYWxzZVxyXG5cdH0sXHJcblxyXG5cdF9jbG9zZUxpbms6IG51bGwsXHJcblx0X3BhcmVudFBhZ2U6IG51bGwsXHJcblx0X3BhZ2U6IG51bGwsXHJcblx0X21vZGFsOiBudWxsLFxyXG5cdF9wYW5lbElubmVyOiBudWxsLFxyXG5cdF93cmFwcGVyOiBudWxsLFxyXG5cdF9maXhlZFRvb2xiYXJzOiBudWxsLFxyXG5cclxuXHRfY3JlYXRlOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBlbCA9IHRoaXMuZWxlbWVudCxcclxuXHRcdFx0cGFyZW50UGFnZSA9IGVsLmNsb3Nlc3QoIFwiLnVpLXBhZ2UsIDpqcW1EYXRhKHJvbGU9J3BhZ2UnKVwiICk7XHJcblxyXG5cdFx0Ly8gZXhwb3NlIHNvbWUgcHJpdmF0ZSBwcm9wcyB0byBvdGhlciBtZXRob2RzXHJcblx0XHQkLmV4dGVuZCggdGhpcywge1xyXG5cdFx0XHRfY2xvc2VMaW5rOiBlbC5maW5kKCBcIjpqcW1EYXRhKHJlbD0nY2xvc2UnKVwiICksXHJcblx0XHRcdF9wYXJlbnRQYWdlOiAoIHBhcmVudFBhZ2UubGVuZ3RoID4gMCApID8gcGFyZW50UGFnZSA6IGZhbHNlLFxyXG5cdFx0XHRfb3BlbmVkUGFnZTogbnVsbCxcclxuXHRcdFx0X3BhZ2U6IHRoaXMuX2dldFBhZ2UsXHJcblx0XHRcdF9wYW5lbElubmVyOiB0aGlzLl9nZXRQYW5lbElubmVyKCksXHJcblx0XHRcdF9maXhlZFRvb2xiYXJzOiB0aGlzLl9nZXRGaXhlZFRvb2xiYXJzXHJcblx0XHR9KTtcclxuXHRcdGlmICggdGhpcy5vcHRpb25zLmRpc3BsYXkgIT09IFwib3ZlcmxheVwiICl7XHJcblx0XHRcdHRoaXMuX2dldFdyYXBwZXIoKTtcclxuXHRcdH1cclxuXHRcdHRoaXMuX2FkZFBhbmVsQ2xhc3NlcygpO1xyXG5cclxuXHRcdC8vIGlmIGFuaW1hdGluZywgYWRkIHRoZSBjbGFzcyB0byBkbyBzb1xyXG5cdFx0aWYgKCAkLnN1cHBvcnQuY3NzVHJhbnNmb3JtM2QgJiYgISF0aGlzLm9wdGlvbnMuYW5pbWF0ZSApIHtcclxuXHRcdFx0dGhpcy5lbGVtZW50LmFkZENsYXNzKCB0aGlzLm9wdGlvbnMuY2xhc3Nlcy5hbmltYXRlICk7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5fYmluZFVwZGF0ZUxheW91dCgpO1xyXG5cdFx0dGhpcy5fYmluZENsb3NlRXZlbnRzKCk7XHJcblx0XHR0aGlzLl9iaW5kTGlua0xpc3RlbmVycygpO1xyXG5cdFx0dGhpcy5fYmluZFBhZ2VFdmVudHMoKTtcclxuXHJcblx0XHRpZiAoICEhdGhpcy5vcHRpb25zLmRpc21pc3NpYmxlICkge1xyXG5cdFx0XHR0aGlzLl9jcmVhdGVNb2RhbCgpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuX2JpbmRTd2lwZUV2ZW50cygpO1xyXG5cdH0sXHJcblxyXG5cdF9nZXRQYW5lbElubmVyOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBwYW5lbElubmVyID0gdGhpcy5lbGVtZW50LmZpbmQoIFwiLlwiICsgdGhpcy5vcHRpb25zLmNsYXNzZXMucGFuZWxJbm5lciApO1xyXG5cclxuXHRcdGlmICggcGFuZWxJbm5lci5sZW5ndGggPT09IDAgKSB7XHJcblx0XHRcdHBhbmVsSW5uZXIgPSB0aGlzLmVsZW1lbnQuY2hpbGRyZW4oKS53cmFwQWxsKCBcIjxkaXYgY2xhc3M9J1wiICsgdGhpcy5vcHRpb25zLmNsYXNzZXMucGFuZWxJbm5lciArIFwiJyAvPlwiICkucGFyZW50KCk7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHBhbmVsSW5uZXI7XHJcblx0fSxcclxuXHJcblx0X2NyZWF0ZU1vZGFsOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBzZWxmID0gdGhpcyxcclxuXHRcdFx0dGFyZ2V0ID0gc2VsZi5fcGFyZW50UGFnZSA/IHNlbGYuX3BhcmVudFBhZ2UucGFyZW50KCkgOiBzZWxmLmVsZW1lbnQucGFyZW50KCk7XHJcblxyXG5cdFx0c2VsZi5fbW9kYWwgPSAkKCBcIjxkaXYgY2xhc3M9J1wiICsgc2VsZi5vcHRpb25zLmNsYXNzZXMubW9kYWwgKyBcIic+PC9kaXY+XCIgKVxyXG5cdFx0XHQub24oIFwibW91c2Vkb3duXCIsIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHNlbGYuY2xvc2UoKTtcclxuXHRcdFx0fSlcclxuXHRcdFx0LmFwcGVuZFRvKCB0YXJnZXQgKTtcclxuXHR9LFxyXG5cclxuXHRfZ2V0UGFnZTogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgcGFnZSA9IHRoaXMuX29wZW5lZFBhZ2UgfHwgdGhpcy5fcGFyZW50UGFnZSB8fCAkKCBcIi5cIiArICQubW9iaWxlLmFjdGl2ZVBhZ2VDbGFzcyApO1xyXG5cclxuXHRcdHJldHVybiBwYWdlO1xyXG5cdH0sXHJcblxyXG5cdF9nZXRXcmFwcGVyOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciB3cmFwcGVyID0gdGhpcy5fcGFnZSgpLmZpbmQoIFwiLlwiICsgdGhpcy5vcHRpb25zLmNsYXNzZXMucGFnZVdyYXBwZXIgKTtcclxuXHRcdGlmICggd3JhcHBlci5sZW5ndGggPT09IDAgKSB7XHJcblx0XHRcdHdyYXBwZXIgPSB0aGlzLl9wYWdlKCkuY2hpbGRyZW4oIFwiLnVpLWhlYWRlcjpub3QoLnVpLWhlYWRlci1maXhlZCksIC51aS1jb250ZW50Om5vdCgudWktcG9wdXApLCAudWktZm9vdGVyOm5vdCgudWktZm9vdGVyLWZpeGVkKVwiIClcclxuXHRcdFx0XHQud3JhcEFsbCggXCI8ZGl2IGNsYXNzPSdcIiArIHRoaXMub3B0aW9ucy5jbGFzc2VzLnBhZ2VXcmFwcGVyICsgXCInPjwvZGl2PlwiIClcclxuXHRcdFx0XHQucGFyZW50KCk7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5fd3JhcHBlciA9IHdyYXBwZXI7XHJcblx0fSxcclxuXHJcblx0X2dldEZpeGVkVG9vbGJhcnM6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIGV4dEZpeGVkVG9vbGJhcnMgPSAkKCBcImJvZHlcIiApLmNoaWxkcmVuKCBcIi51aS1oZWFkZXItZml4ZWQsIC51aS1mb290ZXItZml4ZWRcIiApLFxyXG5cdFx0XHRpbnRGaXhlZFRvb2xiYXJzID0gdGhpcy5fcGFnZSgpLmZpbmQoIFwiLnVpLWhlYWRlci1maXhlZCwgLnVpLWZvb3Rlci1maXhlZFwiICksXHJcblx0XHRcdGZpeGVkVG9vbGJhcnMgPSBleHRGaXhlZFRvb2xiYXJzLmFkZCggaW50Rml4ZWRUb29sYmFycyApLmFkZENsYXNzKCB0aGlzLm9wdGlvbnMuY2xhc3Nlcy5wYWdlRml4ZWRUb29sYmFyICk7XHJcblxyXG5cdFx0cmV0dXJuIGZpeGVkVG9vbGJhcnM7XHJcblx0fSxcclxuXHJcblx0X2dldFBvc0Rpc3BsYXlDbGFzc2VzOiBmdW5jdGlvbiggcHJlZml4ICkge1xyXG5cdFx0cmV0dXJuIHByZWZpeCArIFwiLXBvc2l0aW9uLVwiICsgdGhpcy5vcHRpb25zLnBvc2l0aW9uICsgXCIgXCIgKyBwcmVmaXggKyBcIi1kaXNwbGF5LVwiICsgdGhpcy5vcHRpb25zLmRpc3BsYXk7XHJcblx0fSxcclxuXHJcblx0X2dldFBhbmVsQ2xhc3NlczogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgcGFuZWxDbGFzc2VzID0gdGhpcy5vcHRpb25zLmNsYXNzZXMucGFuZWwgK1xyXG5cdFx0XHRcIiBcIiArIHRoaXMuX2dldFBvc0Rpc3BsYXlDbGFzc2VzKCB0aGlzLm9wdGlvbnMuY2xhc3Nlcy5wYW5lbCApICtcclxuXHRcdFx0XCIgXCIgKyB0aGlzLm9wdGlvbnMuY2xhc3Nlcy5wYW5lbENsb3NlZCArXHJcblx0XHRcdFwiIFwiICsgXCJ1aS1ib2R5LVwiICsgKCB0aGlzLm9wdGlvbnMudGhlbWUgPyB0aGlzLm9wdGlvbnMudGhlbWUgOiBcImluaGVyaXRcIiApO1xyXG5cclxuXHRcdGlmICggISF0aGlzLm9wdGlvbnMucG9zaXRpb25GaXhlZCApIHtcclxuXHRcdFx0cGFuZWxDbGFzc2VzICs9IFwiIFwiICsgdGhpcy5vcHRpb25zLmNsYXNzZXMucGFuZWxGaXhlZDtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gcGFuZWxDbGFzc2VzO1xyXG5cdH0sXHJcblxyXG5cdF9hZGRQYW5lbENsYXNzZXM6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5lbGVtZW50LmFkZENsYXNzKCB0aGlzLl9nZXRQYW5lbENsYXNzZXMoKSApO1xyXG5cdH0sXHJcblxyXG5cdF9oYW5kbGVDbG9zZUNsaWNrOiBmdW5jdGlvbiggZXZlbnQgKSB7XHJcblx0XHRpZiAoICFldmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSApIHtcclxuXHRcdFx0dGhpcy5jbG9zZSgpO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9iaW5kQ2xvc2VFdmVudHM6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5fb24oIHRoaXMuX2Nsb3NlTGluaywge1xyXG5cdFx0XHRcImNsaWNrXCI6IFwiX2hhbmRsZUNsb3NlQ2xpY2tcIlxyXG5cdFx0fSk7XHJcblxyXG5cdFx0dGhpcy5fb24oe1xyXG5cdFx0XHRcImNsaWNrIGE6anFtRGF0YShhamF4PSdmYWxzZScpXCI6IFwiX2hhbmRsZUNsb3NlQ2xpY2tcIlxyXG5cdFx0fSk7XHJcblx0fSxcclxuXHJcblx0X3Bvc2l0aW9uUGFuZWw6IGZ1bmN0aW9uKCBzY3JvbGxUb1RvcCApIHtcclxuXHRcdHZhciBzZWxmID0gdGhpcyxcclxuXHRcdFx0cGFuZWxJbm5lckhlaWdodCA9IHNlbGYuX3BhbmVsSW5uZXIub3V0ZXJIZWlnaHQoKSxcclxuXHRcdFx0ZXhwYW5kID0gcGFuZWxJbm5lckhlaWdodCA+ICQubW9iaWxlLmdldFNjcmVlbkhlaWdodCgpO1xyXG5cclxuXHRcdGlmICggZXhwYW5kIHx8ICFzZWxmLm9wdGlvbnMucG9zaXRpb25GaXhlZCApIHtcclxuXHRcdFx0aWYgKCBleHBhbmQgKSB7XHJcblx0XHRcdFx0c2VsZi5fdW5maXhQYW5lbCgpO1xyXG5cdFx0XHRcdCQubW9iaWxlLnJlc2V0QWN0aXZlUGFnZUhlaWdodCggcGFuZWxJbm5lckhlaWdodCApO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmICggc2Nyb2xsVG9Ub3AgKSB7XHJcblx0XHRcdFx0dGhpcy53aW5kb3dbIDAgXS5zY3JvbGxUbyggMCwgJC5tb2JpbGUuZGVmYXVsdEhvbWVTY3JvbGwgKTtcclxuXHRcdFx0fVxyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0c2VsZi5fZml4UGFuZWwoKTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfYmluZEZpeExpc3RlbmVyOiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuX29uKCAkKCB3aW5kb3cgKSwgeyBcInRocm90dGxlZHJlc2l6ZVwiOiBcIl9wb3NpdGlvblBhbmVsXCIgfSk7XHJcblx0fSxcclxuXHJcblx0X3VuYmluZEZpeExpc3RlbmVyOiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuX29mZiggJCggd2luZG93ICksIFwidGhyb3R0bGVkcmVzaXplXCIgKTtcclxuXHR9LFxyXG5cclxuXHRfdW5maXhQYW5lbDogZnVuY3Rpb24oKSB7XHJcblx0XHRpZiAoICEhdGhpcy5vcHRpb25zLnBvc2l0aW9uRml4ZWQgJiYgJC5zdXBwb3J0LmZpeGVkUG9zaXRpb24gKSB7XHJcblx0XHRcdHRoaXMuZWxlbWVudC5yZW1vdmVDbGFzcyggdGhpcy5vcHRpb25zLmNsYXNzZXMucGFuZWxGaXhlZCApO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9maXhQYW5lbDogZnVuY3Rpb24oKSB7XHJcblx0XHRpZiAoICEhdGhpcy5vcHRpb25zLnBvc2l0aW9uRml4ZWQgJiYgJC5zdXBwb3J0LmZpeGVkUG9zaXRpb24gKSB7XHJcblx0XHRcdHRoaXMuZWxlbWVudC5hZGRDbGFzcyggdGhpcy5vcHRpb25zLmNsYXNzZXMucGFuZWxGaXhlZCApO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9iaW5kVXBkYXRlTGF5b3V0OiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBzZWxmID0gdGhpcztcclxuXHJcblx0XHRzZWxmLmVsZW1lbnQub24oIFwidXBkYXRlbGF5b3V0XCIsIGZ1bmN0aW9uKC8qIGUgKi8pIHtcclxuXHRcdFx0aWYgKCBzZWxmLl9vcGVuICkge1xyXG5cdFx0XHRcdHNlbGYuX3Bvc2l0aW9uUGFuZWwoKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0fSxcclxuXHJcblx0X2JpbmRMaW5rTGlzdGVuZXJzOiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuX29uKCBcImJvZHlcIiwge1xyXG5cdFx0XHRcImNsaWNrIGFcIjogXCJfaGFuZGxlQ2xpY2tcIlxyXG5cdFx0fSk7XHJcblxyXG5cdH0sXHJcblxyXG5cdF9oYW5kbGVDbGljazogZnVuY3Rpb24oIGUgKSB7XHJcblx0XHR2YXIgbGluayxcclxuXHRcdFx0cGFuZWxJZCA9IHRoaXMuZWxlbWVudC5hdHRyKCBcImlkXCIgKTtcclxuXHJcblx0XHRpZiAoIGUuY3VycmVudFRhcmdldC5ocmVmLnNwbGl0KCBcIiNcIiApWyAxIF0gPT09IHBhbmVsSWQgJiYgcGFuZWxJZCAhPT0gdW5kZWZpbmVkICkge1xyXG5cclxuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHRsaW5rID0gJCggZS50YXJnZXQgKTtcclxuXHRcdFx0aWYgKCBsaW5rLmhhc0NsYXNzKCBcInVpLWJ0blwiICkgKSB7XHJcblx0XHRcdFx0bGluay5hZGRDbGFzcyggJC5tb2JpbGUuYWN0aXZlQnRuQ2xhc3MgKTtcclxuXHRcdFx0XHR0aGlzLmVsZW1lbnQub25lKCBcInBhbmVsb3BlbiBwYW5lbGNsb3NlXCIsIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0bGluay5yZW1vdmVDbGFzcyggJC5tb2JpbGUuYWN0aXZlQnRuQ2xhc3MgKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cdFx0XHR0aGlzLnRvZ2dsZSgpO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9iaW5kU3dpcGVFdmVudHM6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIHNlbGYgPSB0aGlzLFxyXG5cdFx0XHRhcmVhID0gc2VsZi5fbW9kYWwgPyBzZWxmLmVsZW1lbnQuYWRkKCBzZWxmLl9tb2RhbCApIDogc2VsZi5lbGVtZW50O1xyXG5cclxuXHRcdC8vIG9uIHN3aXBlLCBjbG9zZSB0aGUgcGFuZWxcclxuXHRcdGlmICggISFzZWxmLm9wdGlvbnMuc3dpcGVDbG9zZSApIHtcclxuXHRcdFx0aWYgKCBzZWxmLm9wdGlvbnMucG9zaXRpb24gPT09IFwibGVmdFwiICkge1xyXG5cdFx0XHRcdGFyZWEub24oIFwic3dpcGVsZWZ0LnBhbmVsXCIsIGZ1bmN0aW9uKC8qIGUgKi8pIHtcclxuXHRcdFx0XHRcdHNlbGYuY2xvc2UoKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRhcmVhLm9uKCBcInN3aXBlcmlnaHQucGFuZWxcIiwgZnVuY3Rpb24oLyogZSAqLykge1xyXG5cdFx0XHRcdFx0c2VsZi5jbG9zZSgpO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X2JpbmRQYWdlRXZlbnRzOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBzZWxmID0gdGhpcztcclxuXHJcblx0XHR0aGlzLmRvY3VtZW50XHJcblx0XHRcdC8vIENsb3NlIHRoZSBwYW5lbCBpZiBhbm90aGVyIHBhbmVsIG9uIHRoZSBwYWdlIG9wZW5zXHJcblx0XHRcdC5vbiggXCJwYW5lbGJlZm9yZW9wZW5cIiwgZnVuY3Rpb24oIGUgKSB7XHJcblx0XHRcdFx0aWYgKCBzZWxmLl9vcGVuICYmIGUudGFyZ2V0ICE9PSBzZWxmLmVsZW1lbnRbIDAgXSApIHtcclxuXHRcdFx0XHRcdHNlbGYuY2xvc2UoKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pXHJcblx0XHRcdC8vIE9uIGVzY2FwZSwgY2xvc2U/IG1pZ2h0IG5lZWQgdG8gaGF2ZSBhIHRhcmdldCBjaGVjayB0b28uLi5cclxuXHRcdFx0Lm9uKCBcImtleXVwLnBhbmVsXCIsIGZ1bmN0aW9uKCBlICkge1xyXG5cdFx0XHRcdGlmICggZS5rZXlDb2RlID09PSAyNyAmJiBzZWxmLl9vcGVuICkge1xyXG5cdFx0XHRcdFx0c2VsZi5jbG9zZSgpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblx0XHRpZiAoICF0aGlzLl9wYXJlbnRQYWdlICYmIHRoaXMub3B0aW9ucy5kaXNwbGF5ICE9PSBcIm92ZXJsYXlcIiApIHtcclxuXHRcdFx0dGhpcy5fb24oIHRoaXMuZG9jdW1lbnQsIHtcclxuXHRcdFx0XHRcInBhZ2VzaG93XCI6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0dGhpcy5fb3BlbmVkUGFnZSA9IG51bGw7XHJcblx0XHRcdFx0XHR0aGlzLl9nZXRXcmFwcGVyKCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHRcdC8vIENsZWFuIHVwIG9wZW4gcGFuZWxzIGFmdGVyIHBhZ2UgaGlkZVxyXG5cdFx0aWYgKCBzZWxmLl9wYXJlbnRQYWdlICkge1xyXG5cdFx0XHR0aGlzLmRvY3VtZW50Lm9uKCBcInBhZ2VoaWRlXCIsIFwiOmpxbURhdGEocm9sZT0ncGFnZScpXCIsIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdGlmICggc2VsZi5fb3BlbiApIHtcclxuXHRcdFx0XHRcdHNlbGYuY2xvc2UoIHRydWUgKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0dGhpcy5kb2N1bWVudC5vbiggXCJwYWdlYmVmb3JlaGlkZVwiLCBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRpZiAoIHNlbGYuX29wZW4gKSB7XHJcblx0XHRcdFx0XHRzZWxmLmNsb3NlKCB0cnVlICk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHQvLyBzdGF0ZSBzdG9yYWdlIG9mIG9wZW4gb3IgY2xvc2VkXHJcblx0X29wZW46IGZhbHNlLFxyXG5cdF9wYWdlQ29udGVudE9wZW5DbGFzc2VzOiBudWxsLFxyXG5cdF9tb2RhbE9wZW5DbGFzc2VzOiBudWxsLFxyXG5cclxuXHRvcGVuOiBmdW5jdGlvbiggaW1tZWRpYXRlICkge1xyXG5cdFx0aWYgKCAhdGhpcy5fb3BlbiApIHtcclxuXHRcdFx0dmFyIHNlbGYgPSB0aGlzLFxyXG5cdFx0XHRcdG8gPSBzZWxmLm9wdGlvbnMsXHJcblxyXG5cdFx0XHRcdF9vcGVuUGFuZWwgPSBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdHNlbGYuX29mZiggc2VsZi5kb2N1bWVudCAsIFwicGFuZWxjbG9zZVwiICk7XHJcblx0XHRcdFx0XHRzZWxmLl9wYWdlKCkuanFtRGF0YSggXCJwYW5lbFwiLCBcIm9wZW5cIiApO1xyXG5cclxuXHRcdFx0XHRcdGlmICggJC5zdXBwb3J0LmNzc1RyYW5zZm9ybTNkICYmICEhby5hbmltYXRlICYmIG8uZGlzcGxheSAhPT0gXCJvdmVybGF5XCIgKSB7XHJcblx0XHRcdFx0XHRcdHNlbGYuX3dyYXBwZXIuYWRkQ2xhc3MoIG8uY2xhc3Nlcy5hbmltYXRlICk7XHJcblx0XHRcdFx0XHRcdHNlbGYuX2ZpeGVkVG9vbGJhcnMoKS5hZGRDbGFzcyggby5jbGFzc2VzLmFuaW1hdGUgKTtcclxuXHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHRpZiAoICFpbW1lZGlhdGUgJiYgJC5zdXBwb3J0LmNzc1RyYW5zZm9ybTNkICYmICEhby5hbmltYXRlICkge1xyXG5cdFx0XHRcdFx0XHQoIHNlbGYuX3dyYXBwZXIgfHwgc2VsZi5lbGVtZW50IClcclxuXHRcdFx0XHRcdFx0XHQuYW5pbWF0aW9uQ29tcGxldGUoIGNvbXBsZXRlLCBcInRyYW5zaXRpb25cIiApO1xyXG5cdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0c2V0VGltZW91dCggY29tcGxldGUsIDAgKTtcclxuXHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHRpZiAoIG8udGhlbWUgJiYgby5kaXNwbGF5ICE9PSBcIm92ZXJsYXlcIiApIHtcclxuXHRcdFx0XHRcdFx0c2VsZi5fcGFnZSgpLnBhcmVudCgpXHJcblx0XHRcdFx0XHRcdFx0LmFkZENsYXNzKCBvLmNsYXNzZXMucGFnZUNvbnRhaW5lciArIFwiLXRoZW1lZCBcIiArIG8uY2xhc3Nlcy5wYWdlQ29udGFpbmVyICsgXCItXCIgKyBvLnRoZW1lICk7XHJcblx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0c2VsZi5lbGVtZW50XHJcblx0XHRcdFx0XHRcdC5yZW1vdmVDbGFzcyggby5jbGFzc2VzLnBhbmVsQ2xvc2VkIClcclxuXHRcdFx0XHRcdFx0LmFkZENsYXNzKCBvLmNsYXNzZXMucGFuZWxPcGVuICk7XHJcblxyXG5cdFx0XHRcdFx0c2VsZi5fcG9zaXRpb25QYW5lbCggdHJ1ZSApO1xyXG5cclxuXHRcdFx0XHRcdHNlbGYuX3BhZ2VDb250ZW50T3BlbkNsYXNzZXMgPSBzZWxmLl9nZXRQb3NEaXNwbGF5Q2xhc3Nlcyggby5jbGFzc2VzLnBhZ2VDb250ZW50UHJlZml4ICk7XHJcblxyXG5cdFx0XHRcdFx0aWYgKCBvLmRpc3BsYXkgIT09IFwib3ZlcmxheVwiICkge1xyXG5cdFx0XHRcdFx0XHRzZWxmLl9wYWdlKCkucGFyZW50KCkuYWRkQ2xhc3MoIG8uY2xhc3Nlcy5wYWdlQ29udGFpbmVyICk7XHJcblx0XHRcdFx0XHRcdHNlbGYuX3dyYXBwZXIuYWRkQ2xhc3MoIHNlbGYuX3BhZ2VDb250ZW50T3BlbkNsYXNzZXMgKTtcclxuXHRcdFx0XHRcdFx0c2VsZi5fZml4ZWRUb29sYmFycygpLmFkZENsYXNzKCBzZWxmLl9wYWdlQ29udGVudE9wZW5DbGFzc2VzICk7XHJcblx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0c2VsZi5fbW9kYWxPcGVuQ2xhc3NlcyA9IHNlbGYuX2dldFBvc0Rpc3BsYXlDbGFzc2VzKCBvLmNsYXNzZXMubW9kYWwgKSArIFwiIFwiICsgby5jbGFzc2VzLm1vZGFsT3BlbjtcclxuXHRcdFx0XHRcdGlmICggc2VsZi5fbW9kYWwgKSB7XHJcblx0XHRcdFx0XHRcdHNlbGYuX21vZGFsXHJcblx0XHRcdFx0XHRcdFx0LmFkZENsYXNzKCBzZWxmLl9tb2RhbE9wZW5DbGFzc2VzIClcclxuXHRcdFx0XHRcdFx0XHQuaGVpZ2h0KCBNYXRoLm1heCggc2VsZi5fbW9kYWwuaGVpZ2h0KCksIHNlbGYuZG9jdW1lbnQuaGVpZ2h0KCkgKSApO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0sXHJcblx0XHRcdFx0Y29tcGxldGUgPSBmdW5jdGlvbigpIHtcclxuXHJcblx0XHRcdFx0XHQvLyBCYWlsIGlmIHRoZSBwYW5lbCB3YXMgY2xvc2VkIGJlZm9yZSB0aGUgb3BlbmluZyBhbmltYXRpb24gaGFzIGNvbXBsZXRlZFxyXG5cdFx0XHRcdFx0aWYgKCAhc2VsZi5fb3BlbiApIHtcclxuXHRcdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdGlmICggby5kaXNwbGF5ICE9PSBcIm92ZXJsYXlcIiApIHtcclxuXHRcdFx0XHRcdFx0c2VsZi5fd3JhcHBlci5hZGRDbGFzcyggby5jbGFzc2VzLnBhZ2VDb250ZW50UHJlZml4ICsgXCItb3BlblwiICk7XHJcblx0XHRcdFx0XHRcdHNlbGYuX2ZpeGVkVG9vbGJhcnMoKS5hZGRDbGFzcyggby5jbGFzc2VzLnBhZ2VDb250ZW50UHJlZml4ICsgXCItb3BlblwiICk7XHJcblx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0c2VsZi5fYmluZEZpeExpc3RlbmVyKCk7XHJcblxyXG5cdFx0XHRcdFx0c2VsZi5fdHJpZ2dlciggXCJvcGVuXCIgKTtcclxuXHJcblx0XHRcdFx0XHRzZWxmLl9vcGVuZWRQYWdlID0gc2VsZi5fcGFnZSgpO1xyXG5cdFx0XHRcdH07XHJcblxyXG5cdFx0XHRzZWxmLl90cmlnZ2VyKCBcImJlZm9yZW9wZW5cIiApO1xyXG5cclxuXHRcdFx0aWYgKCBzZWxmLl9wYWdlKCkuanFtRGF0YSggXCJwYW5lbFwiICkgPT09IFwib3BlblwiICkge1xyXG5cdFx0XHRcdHNlbGYuX29uKCBzZWxmLmRvY3VtZW50LCB7XHJcblx0XHRcdFx0XHRcInBhbmVsY2xvc2VcIjogX29wZW5QYW5lbFxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdF9vcGVuUGFuZWwoKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0c2VsZi5fb3BlbiA9IHRydWU7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0Y2xvc2U6IGZ1bmN0aW9uKCBpbW1lZGlhdGUgKSB7XHJcblx0XHRpZiAoIHRoaXMuX29wZW4gKSB7XHJcblx0XHRcdHZhciBzZWxmID0gdGhpcyxcclxuXHRcdFx0XHRvID0gdGhpcy5vcHRpb25zLFxyXG5cclxuXHRcdFx0XHRfY2xvc2VQYW5lbCA9IGZ1bmN0aW9uKCkge1xyXG5cclxuXHRcdFx0XHRcdHNlbGYuZWxlbWVudC5yZW1vdmVDbGFzcyggby5jbGFzc2VzLnBhbmVsT3BlbiApO1xyXG5cclxuXHRcdFx0XHRcdGlmICggby5kaXNwbGF5ICE9PSBcIm92ZXJsYXlcIiApIHtcclxuXHRcdFx0XHRcdFx0c2VsZi5fd3JhcHBlci5yZW1vdmVDbGFzcyggc2VsZi5fcGFnZUNvbnRlbnRPcGVuQ2xhc3NlcyApO1xyXG5cdFx0XHRcdFx0XHRzZWxmLl9maXhlZFRvb2xiYXJzKCkucmVtb3ZlQ2xhc3MoIHNlbGYuX3BhZ2VDb250ZW50T3BlbkNsYXNzZXMgKTtcclxuXHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHRpZiAoICFpbW1lZGlhdGUgJiYgJC5zdXBwb3J0LmNzc1RyYW5zZm9ybTNkICYmICEhby5hbmltYXRlICkge1xyXG5cdFx0XHRcdFx0XHQoIHNlbGYuX3dyYXBwZXIgfHwgc2VsZi5lbGVtZW50IClcclxuXHRcdFx0XHRcdFx0XHQuYW5pbWF0aW9uQ29tcGxldGUoIGNvbXBsZXRlLCBcInRyYW5zaXRpb25cIiApO1xyXG5cdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0c2V0VGltZW91dCggY29tcGxldGUsIDAgKTtcclxuXHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHRpZiAoIHNlbGYuX21vZGFsICkge1xyXG5cdFx0XHRcdFx0XHRzZWxmLl9tb2RhbFxyXG5cdFx0XHRcdFx0XHRcdC5yZW1vdmVDbGFzcyggc2VsZi5fbW9kYWxPcGVuQ2xhc3NlcyApXHJcblx0XHRcdFx0XHRcdFx0LmhlaWdodCggXCJcIiApO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0sXHJcblx0XHRcdFx0Y29tcGxldGUgPSBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdGlmICggby50aGVtZSAmJiBvLmRpc3BsYXkgIT09IFwib3ZlcmxheVwiICkge1xyXG5cdFx0XHRcdFx0XHRzZWxmLl9wYWdlKCkucGFyZW50KCkucmVtb3ZlQ2xhc3MoIG8uY2xhc3Nlcy5wYWdlQ29udGFpbmVyICsgXCItdGhlbWVkIFwiICsgby5jbGFzc2VzLnBhZ2VDb250YWluZXIgKyBcIi1cIiArIG8udGhlbWUgKTtcclxuXHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHRzZWxmLmVsZW1lbnQuYWRkQ2xhc3MoIG8uY2xhc3Nlcy5wYW5lbENsb3NlZCApO1xyXG5cclxuXHRcdFx0XHRcdGlmICggby5kaXNwbGF5ICE9PSBcIm92ZXJsYXlcIiApIHtcclxuXHRcdFx0XHRcdFx0c2VsZi5fcGFnZSgpLnBhcmVudCgpLnJlbW92ZUNsYXNzKCBvLmNsYXNzZXMucGFnZUNvbnRhaW5lciApO1xyXG5cdFx0XHRcdFx0XHRzZWxmLl93cmFwcGVyLnJlbW92ZUNsYXNzKCBvLmNsYXNzZXMucGFnZUNvbnRlbnRQcmVmaXggKyBcIi1vcGVuXCIgKTtcclxuXHRcdFx0XHRcdFx0c2VsZi5fZml4ZWRUb29sYmFycygpLnJlbW92ZUNsYXNzKCBvLmNsYXNzZXMucGFnZUNvbnRlbnRQcmVmaXggKyBcIi1vcGVuXCIgKTtcclxuXHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHRpZiAoICQuc3VwcG9ydC5jc3NUcmFuc2Zvcm0zZCAmJiAhIW8uYW5pbWF0ZSAmJiBvLmRpc3BsYXkgIT09IFwib3ZlcmxheVwiICkge1xyXG5cdFx0XHRcdFx0XHRzZWxmLl93cmFwcGVyLnJlbW92ZUNsYXNzKCBvLmNsYXNzZXMuYW5pbWF0ZSApO1xyXG5cdFx0XHRcdFx0XHRzZWxmLl9maXhlZFRvb2xiYXJzKCkucmVtb3ZlQ2xhc3MoIG8uY2xhc3Nlcy5hbmltYXRlICk7XHJcblx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0c2VsZi5fZml4UGFuZWwoKTtcclxuXHRcdFx0XHRcdHNlbGYuX3VuYmluZEZpeExpc3RlbmVyKCk7XHJcblx0XHRcdFx0XHQkLm1vYmlsZS5yZXNldEFjdGl2ZVBhZ2VIZWlnaHQoKTtcclxuXHJcblx0XHRcdFx0XHRzZWxmLl9wYWdlKCkuanFtUmVtb3ZlRGF0YSggXCJwYW5lbFwiICk7XHJcblxyXG5cdFx0XHRcdFx0c2VsZi5fdHJpZ2dlciggXCJjbG9zZVwiICk7XHJcblxyXG5cdFx0XHRcdFx0c2VsZi5fb3BlbmVkUGFnZSA9IG51bGw7XHJcblx0XHRcdFx0fTtcclxuXHJcblx0XHRcdHNlbGYuX3RyaWdnZXIoIFwiYmVmb3JlY2xvc2VcIiApO1xyXG5cclxuXHRcdFx0X2Nsb3NlUGFuZWwoKTtcclxuXHJcblx0XHRcdHNlbGYuX29wZW4gPSBmYWxzZTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHR0b2dnbGU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpc1sgdGhpcy5fb3BlbiA/IFwiY2xvc2VcIiA6IFwib3BlblwiIF0oKTtcclxuXHR9LFxyXG5cclxuXHRfZGVzdHJveTogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgb3RoZXJQYW5lbHMsXHJcblx0XHRvID0gdGhpcy5vcHRpb25zLFxyXG5cdFx0bXVsdGlwbGVQYW5lbHMgPSAoICQoIFwiYm9keSA+IDptb2JpbGUtcGFuZWxcIiApLmxlbmd0aCArICQubW9iaWxlLmFjdGl2ZVBhZ2UuZmluZCggXCI6bW9iaWxlLXBhbmVsXCIgKS5sZW5ndGggKSA+IDE7XHJcblxyXG5cdFx0aWYgKCBvLmRpc3BsYXkgIT09IFwib3ZlcmxheVwiICkge1xyXG5cclxuXHRcdFx0Ly8gIHJlbW92ZSB0aGUgd3JhcHBlciBpZiBub3QgaW4gdXNlIGJ5IGFub3RoZXIgcGFuZWxcclxuXHRcdFx0b3RoZXJQYW5lbHMgPSAkKCBcImJvZHkgPiA6bW9iaWxlLXBhbmVsXCIgKS5hZGQoICQubW9iaWxlLmFjdGl2ZVBhZ2UuZmluZCggXCI6bW9iaWxlLXBhbmVsXCIgKSApO1xyXG5cdFx0XHRpZiAoIG90aGVyUGFuZWxzLm5vdCggXCIudWktcGFuZWwtZGlzcGxheS1vdmVybGF5XCIgKS5ub3QoIHRoaXMuZWxlbWVudCApLmxlbmd0aCA9PT0gMCApIHtcclxuXHRcdFx0XHR0aGlzLl93cmFwcGVyLmNoaWxkcmVuKCkudW53cmFwKCk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmICggdGhpcy5fb3BlbiApIHtcclxuXHJcblx0XHRcdFx0dGhpcy5fZml4ZWRUb29sYmFycygpLnJlbW92ZUNsYXNzKCBvLmNsYXNzZXMucGFnZUNvbnRlbnRQcmVmaXggKyBcIi1vcGVuXCIgKTtcclxuXHJcblx0XHRcdFx0aWYgKCAkLnN1cHBvcnQuY3NzVHJhbnNmb3JtM2QgJiYgISFvLmFuaW1hdGUgKSB7XHJcblx0XHRcdFx0XHR0aGlzLl9maXhlZFRvb2xiYXJzKCkucmVtb3ZlQ2xhc3MoIG8uY2xhc3Nlcy5hbmltYXRlICk7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHR0aGlzLl9wYWdlKCkucGFyZW50KCkucmVtb3ZlQ2xhc3MoIG8uY2xhc3Nlcy5wYWdlQ29udGFpbmVyICk7XHJcblxyXG5cdFx0XHRcdGlmICggby50aGVtZSApIHtcclxuXHRcdFx0XHRcdHRoaXMuX3BhZ2UoKS5wYXJlbnQoKS5yZW1vdmVDbGFzcyggby5jbGFzc2VzLnBhZ2VDb250YWluZXIgKyBcIi10aGVtZWQgXCIgKyBvLmNsYXNzZXMucGFnZUNvbnRhaW5lciArIFwiLVwiICsgby50aGVtZSApO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggIW11bHRpcGxlUGFuZWxzICkge1xyXG5cclxuXHRcdFx0dGhpcy5kb2N1bWVudC5vZmYoIFwicGFuZWxvcGVuIHBhbmVsY2xvc2VcIiApO1xyXG5cclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIHRoaXMuX29wZW4gKSB7XHJcblx0XHRcdHRoaXMuX3BhZ2UoKS5qcW1SZW1vdmVEYXRhKCBcInBhbmVsXCIgKTtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLl9wYW5lbElubmVyLmNoaWxkcmVuKCkudW53cmFwKCk7XHJcblxyXG5cdFx0dGhpcy5lbGVtZW50XHJcblx0XHRcdC5yZW1vdmVDbGFzcyggWyB0aGlzLl9nZXRQYW5lbENsYXNzZXMoKSwgby5jbGFzc2VzLnBhbmVsT3Blbiwgby5jbGFzc2VzLmFuaW1hdGUgXS5qb2luKCBcIiBcIiApIClcclxuXHRcdFx0Lm9mZiggXCJzd2lwZWxlZnQucGFuZWwgc3dpcGVyaWdodC5wYW5lbFwiIClcclxuXHRcdFx0Lm9mZiggXCJwYW5lbGJlZm9yZW9wZW5cIiApXHJcblx0XHRcdC5vZmYoIFwicGFuZWxoaWRlXCIgKVxyXG5cdFx0XHQub2ZmKCBcImtleXVwLnBhbmVsXCIgKVxyXG5cdFx0XHQub2ZmKCBcInVwZGF0ZWxheW91dFwiICk7XHJcblxyXG5cdFx0aWYgKCB0aGlzLl9tb2RhbCApIHtcclxuXHRcdFx0dGhpcy5fbW9kYWwucmVtb3ZlKCk7XHJcblx0XHR9XHJcblx0fVxyXG59KTtcclxuXHJcbn0pKCBqUXVlcnkgKTtcclxuXHJcbihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xyXG5cclxuJC53aWRnZXQoIFwibW9iaWxlLnRhYmxlXCIsIHtcclxuXHRvcHRpb25zOiB7XHJcblx0XHRjbGFzc2VzOiB7XHJcblx0XHRcdHRhYmxlOiBcInVpLXRhYmxlXCJcclxuXHRcdH0sXHJcblx0XHRlbmhhbmNlZDogZmFsc2VcclxuXHR9LFxyXG5cclxuXHRfY3JlYXRlOiBmdW5jdGlvbigpIHtcclxuXHRcdGlmICggIXRoaXMub3B0aW9ucy5lbmhhbmNlZCApIHtcclxuXHRcdFx0dGhpcy5lbGVtZW50LmFkZENsYXNzKCB0aGlzLm9wdGlvbnMuY2xhc3Nlcy50YWJsZSApO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIGV4dGVuZCBoZXJlLCBhc3NpZ24gb24gcmVmcmVzaCA+IF9zZXRIZWFkZXJzXHJcblx0XHQkLmV4dGVuZCggdGhpcywge1xyXG5cclxuXHRcdFx0Ly8gRXhwb3NlIGhlYWRlcnMgYW5kIGFsbEhlYWRlcnMgcHJvcGVydGllcyBvbiB0aGUgd2lkZ2V0XHJcblx0XHRcdC8vIGhlYWRlcnMgcmVmZXJlbmNlcyB0aGUgVEhzIHdpdGhpbiB0aGUgZmlyc3QgVFIgaW4gdGhlIHRhYmxlXHJcblx0XHRcdGhlYWRlcnM6IHVuZGVmaW5lZCxcclxuXHJcblx0XHRcdC8vIGFsbEhlYWRlcnMgcmVmZXJlbmNlcyBoZWFkZXJzLCBwbHVzIGFsbCBUSHMgaW4gdGhlIHRoZWFkLCB3aGljaCBtYXlcclxuXHRcdFx0Ly8gaW5jbHVkZSBzZXZlcmFsIHJvd3MsIG9yIG5vdFxyXG5cdFx0XHRhbGxIZWFkZXJzOiB1bmRlZmluZWRcclxuXHRcdH0pO1xyXG5cclxuXHRcdHRoaXMuX3JlZnJlc2goIHRydWUgKTtcclxuXHR9LFxyXG5cclxuXHRfc2V0SGVhZGVyczogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgdHJzID0gdGhpcy5lbGVtZW50LmZpbmQoIFwidGhlYWQgdHJcIiApO1xyXG5cclxuXHRcdHRoaXMuaGVhZGVycyA9IHRoaXMuZWxlbWVudC5maW5kKCBcInRyOmVxKDApXCIgKS5jaGlsZHJlbigpO1xyXG5cdFx0dGhpcy5hbGxIZWFkZXJzID0gdGhpcy5oZWFkZXJzLmFkZCggdHJzLmNoaWxkcmVuKCkgKTtcclxuXHR9LFxyXG5cclxuXHRyZWZyZXNoOiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuX3JlZnJlc2goKTtcclxuXHR9LFxyXG5cclxuXHRyZWJ1aWxkOiAkLm5vb3AsXHJcblxyXG5cdF9yZWZyZXNoOiBmdW5jdGlvbiggLyogY3JlYXRlICovICkge1xyXG5cdFx0dmFyIHRhYmxlID0gdGhpcy5lbGVtZW50LFxyXG5cdFx0XHR0cnMgPSB0YWJsZS5maW5kKCBcInRoZWFkIHRyXCIgKTtcclxuXHJcblx0XHQvLyB1cGRhdGluZyBoZWFkZXJzIG9uIHJlZnJlc2ggKGZpeGVzICM1ODgwKVxyXG5cdFx0dGhpcy5fc2V0SGVhZGVycygpO1xyXG5cclxuXHRcdC8vIEl0ZXJhdGUgb3ZlciB0aGUgdHJzXHJcblx0XHR0cnMuZWFjaCggZnVuY3Rpb24oKSB7XHJcblx0XHRcdHZhciBjb2x1bW5Db3VudCA9IDA7XHJcblxyXG5cdFx0XHQvLyBJdGVyYXRlIG92ZXIgdGhlIGNoaWxkcmVuIG9mIHRoZSB0clxyXG5cdFx0XHQkKCB0aGlzICkuY2hpbGRyZW4oKS5lYWNoKCBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHR2YXIgc3BhbiA9IHBhcnNlSW50KCB0aGlzLmdldEF0dHJpYnV0ZSggXCJjb2xzcGFuXCIgKSwgMTAgKSxcclxuXHRcdFx0XHRcdHNlbGVjdG9yID0gXCI6bnRoLWNoaWxkKFwiICsgKCBjb2x1bW5Db3VudCArIDEgKSArIFwiKVwiLFxyXG5cdFx0XHRcdFx0ajtcclxuXHJcblx0XHRcdFx0dGhpcy5zZXRBdHRyaWJ1dGUoIFwiZGF0YS1cIiArICQubW9iaWxlLm5zICsgXCJjb2xzdGFydFwiLCBjb2x1bW5Db3VudCArIDEgKTtcclxuXHJcblx0XHRcdFx0aWYgKCBzcGFuICkge1xyXG5cdFx0XHRcdFx0Zm9yKCBqID0gMDsgaiA8IHNwYW4gLSAxOyBqKysgKSB7XHJcblx0XHRcdFx0XHRcdGNvbHVtbkNvdW50Kys7XHJcblx0XHRcdFx0XHRcdHNlbGVjdG9yICs9IFwiLCA6bnRoLWNoaWxkKFwiICsgKCBjb2x1bW5Db3VudCArIDEgKSArIFwiKVwiO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Ly8gU3RvcmUgXCJjZWxsc1wiIGRhdGEgb24gaGVhZGVyIGFzIGEgcmVmZXJlbmNlIHRvIGFsbCBjZWxscyBpbiB0aGVcclxuXHRcdFx0XHQvLyBzYW1lIGNvbHVtbiBhcyB0aGlzIFRIXHJcblx0XHRcdFx0JCggdGhpcyApLmpxbURhdGEoIFwiY2VsbHNcIiwgdGFibGUuZmluZCggXCJ0clwiICkubm90KCB0cnMuZXEoIDAgKSApLm5vdCggdGhpcyApLmNoaWxkcmVuKCBzZWxlY3RvciApICk7XHJcblxyXG5cdFx0XHRcdGNvbHVtbkNvdW50Kys7XHJcblx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblx0fVxyXG59KTtcclxuXHJcbn0pKCBqUXVlcnkgKTtcclxuXHJcblxyXG4oZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcclxuXHJcbiQud2lkZ2V0KCBcIm1vYmlsZS50YWJsZVwiLCAkLm1vYmlsZS50YWJsZSwge1xyXG5cdG9wdGlvbnM6IHtcclxuXHRcdG1vZGU6IFwiY29sdW1udG9nZ2xlXCIsXHJcblx0XHRjb2x1bW5CdG5UaGVtZTogbnVsbCxcclxuXHRcdGNvbHVtblBvcHVwVGhlbWU6IG51bGwsXHJcblx0XHRjb2x1bW5CdG5UZXh0OiBcIkNvbHVtbnMuLi5cIixcclxuXHRcdGNsYXNzZXM6ICQuZXh0ZW5kKCAkLm1vYmlsZS50YWJsZS5wcm90b3R5cGUub3B0aW9ucy5jbGFzc2VzLCB7XHJcblx0XHRcdHBvcHVwOiBcInVpLXRhYmxlLWNvbHVtbnRvZ2dsZS1wb3B1cFwiLFxyXG5cdFx0XHRjb2x1bW5CdG46IFwidWktdGFibGUtY29sdW1udG9nZ2xlLWJ0blwiLFxyXG5cdFx0XHRwcmlvcml0eVByZWZpeDogXCJ1aS10YWJsZS1wcmlvcml0eS1cIixcclxuXHRcdFx0Y29sdW1uVG9nZ2xlVGFibGU6IFwidWktdGFibGUtY29sdW1udG9nZ2xlXCJcclxuXHRcdH0pXHJcblx0fSxcclxuXHJcblx0X2NyZWF0ZTogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLl9zdXBlcigpO1xyXG5cclxuXHRcdGlmICggdGhpcy5vcHRpb25zLm1vZGUgIT09IFwiY29sdW1udG9nZ2xlXCIgKSB7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHQkLmV4dGVuZCggdGhpcywge1xyXG5cdFx0XHRfbWVudTogbnVsbFxyXG5cdFx0fSk7XHJcblxyXG5cdFx0aWYgKCB0aGlzLm9wdGlvbnMuZW5oYW5jZWQgKSB7XHJcblx0XHRcdHRoaXMuX21lbnUgPSAkKCB0aGlzLmRvY3VtZW50WyAwIF0uZ2V0RWxlbWVudEJ5SWQoIHRoaXMuX2lkKCkgKyBcIi1wb3B1cFwiICkgKS5jaGlsZHJlbigpLmZpcnN0KCk7XHJcblx0XHRcdHRoaXMuX2FkZFRvZ2dsZXMoIHRoaXMuX21lbnUsIHRydWUgKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHRoaXMuX21lbnUgPSB0aGlzLl9lbmhhbmNlQ29sVG9nZ2xlKCk7XHJcblx0XHRcdHRoaXMuZWxlbWVudC5hZGRDbGFzcyggdGhpcy5vcHRpb25zLmNsYXNzZXMuY29sdW1uVG9nZ2xlVGFibGUgKTtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLl9zZXR1cEV2ZW50cygpO1xyXG5cclxuXHRcdHRoaXMuX3NldFRvZ2dsZVN0YXRlKCk7XHJcblx0fSxcclxuXHJcblx0X2lkOiBmdW5jdGlvbigpIHtcclxuXHRcdHJldHVybiAoIHRoaXMuZWxlbWVudC5hdHRyKCBcImlkXCIgKSB8fCAoIHRoaXMud2lkZ2V0TmFtZSArIHRoaXMudXVpZCApICk7XHJcblx0fSxcclxuXHJcblx0X3NldHVwRXZlbnRzOiBmdW5jdGlvbigpIHtcclxuXHRcdC8vTk9URTogaW5wdXRzIGFyZSBib3VuZCBpbiBiaW5kVG9nZ2xlcyxcclxuXHRcdC8vIHNvIGl0IGNhbiBiZSBjYWxsZWQgb24gcmVmcmVzaCwgdG9vXHJcblxyXG5cdFx0Ly8gdXBkYXRlIGNvbHVtbiB0b2dnbGVzIG9uIHJlc2l6ZVxyXG5cdFx0dGhpcy5fb24oIHRoaXMud2luZG93LCB7XHJcblx0XHRcdHRocm90dGxlZHJlc2l6ZTogXCJfc2V0VG9nZ2xlU3RhdGVcIlxyXG5cdFx0fSk7XHJcblx0XHR0aGlzLl9vbiggdGhpcy5fbWVudSwge1xyXG5cdFx0XHRcImNoYW5nZSBpbnB1dFwiOiBcIl9tZW51SW5wdXRDaGFuZ2VcIlxyXG5cdFx0fSk7XHJcblx0fSxcclxuXHJcblx0X2FkZFRvZ2dsZXM6IGZ1bmN0aW9uKCBtZW51LCBrZWVwICkge1xyXG5cdFx0dmFyIGlucHV0cyxcclxuXHRcdFx0Y2hlY2tib3hJbmRleCA9IDAsXHJcblx0XHRcdG9wdHMgPSB0aGlzLm9wdGlvbnMsXHJcblx0XHRcdGNvbnRhaW5lciA9IG1lbnUuY29udHJvbGdyb3VwKCBcImNvbnRhaW5lclwiICk7XHJcblxyXG5cdFx0Ly8gYWxsb3cgdXBkYXRlIG9mIG1lbnUgb24gcmVmcmVzaCAoZml4ZXMgIzU4ODApXHJcblx0XHRpZiAoIGtlZXAgKSB7XHJcblx0XHRcdGlucHV0cyA9IG1lbnUuZmluZCggXCJpbnB1dFwiICk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRjb250YWluZXIuZW1wdHkoKTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBjcmVhdGUgdGhlIGhpZGUvc2hvdyB0b2dnbGVzXHJcblx0XHR0aGlzLmhlYWRlcnMubm90KCBcInRkXCIgKS5lYWNoKCBmdW5jdGlvbigpIHtcclxuXHRcdFx0dmFyIGlucHV0LCBjZWxscyxcclxuXHRcdFx0XHRoZWFkZXIgPSAkKCB0aGlzICksXHJcblx0XHRcdFx0cHJpb3JpdHkgPSAkLm1vYmlsZS5nZXRBdHRyaWJ1dGUoIHRoaXMsIFwicHJpb3JpdHlcIiApO1xyXG5cclxuXHRcdFx0aWYgKCBwcmlvcml0eSApIHtcclxuXHRcdFx0XHRjZWxscyA9IGhlYWRlci5hZGQoIGhlYWRlci5qcW1EYXRhKCBcImNlbGxzXCIgKSApO1xyXG5cdFx0XHRcdGNlbGxzLmFkZENsYXNzKCBvcHRzLmNsYXNzZXMucHJpb3JpdHlQcmVmaXggKyBwcmlvcml0eSApO1xyXG5cclxuXHRcdFx0XHQvLyBNYWtlIHN1cmUgdGhlIChuZXc/KSBjaGVja2JveCBpcyBhc3NvY2lhdGVkIHdpdGggaXRzIGhlYWRlciB2aWEgLmpxbURhdGEoKSBhbmRcclxuXHRcdFx0XHQvLyB0aGF0LCB2aWNlIHZlcnNhLCB0aGUgaGVhZGVyIGlzIGFsc28gYXNzb2NpYXRlZCB3aXRoIHRoZSBjaGVja2JveFxyXG5cdFx0XHRcdGlucHV0ID0gKCBrZWVwID8gaW5wdXRzLmVxKCBjaGVja2JveEluZGV4KysgKSA6XHJcblx0XHRcdFx0XHQkKFwiPGxhYmVsPjxpbnB1dCB0eXBlPSdjaGVja2JveCcgY2hlY2tlZCAvPlwiICtcclxuXHRcdFx0XHRcdFx0KCBoZWFkZXIuY2hpbGRyZW4oIFwiYWJiclwiICkuZmlyc3QoKS5hdHRyKCBcInRpdGxlXCIgKSB8fFxyXG5cdFx0XHRcdFx0XHRcdGhlYWRlci50ZXh0KCkgKSArXHJcblx0XHRcdFx0XHRcdFwiPC9sYWJlbD5cIiApXHJcblx0XHRcdFx0XHRcdC5hcHBlbmRUbyggY29udGFpbmVyIClcclxuXHRcdFx0XHRcdFx0LmNoaWxkcmVuKCAwIClcclxuXHRcdFx0XHRcdFx0LmNoZWNrYm94cmFkaW8oIHtcclxuXHRcdFx0XHRcdFx0XHR0aGVtZTogb3B0cy5jb2x1bW5Qb3B1cFRoZW1lXHJcblx0XHRcdFx0XHRcdH0pIClcclxuXHJcblx0XHRcdFx0XHRcdC8vIEFzc29jaWF0ZSB0aGUgaGVhZGVyIHdpdGggdGhlIGNoZWNrYm94XHJcblx0XHRcdFx0XHRcdC5qcW1EYXRhKCBcImhlYWRlclwiLCBoZWFkZXIgKVxyXG5cdFx0XHRcdFx0XHQuanFtRGF0YSggXCJjZWxsc1wiLCBjZWxscyApO1xyXG5cclxuXHRcdFx0XHQvLyBBc3NvY2lhdGUgdGhlIGNoZWNrYm94IHdpdGggdGhlIGhlYWRlclxyXG5cdFx0XHRcdGhlYWRlci5qcW1EYXRhKCBcImlucHV0XCIsIGlucHV0ICk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIHNldCBiaW5kaW5ncyBoZXJlXHJcblx0XHRpZiAoICFrZWVwICkge1xyXG5cdFx0XHRtZW51LmNvbnRyb2xncm91cCggXCJyZWZyZXNoXCIgKTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfbWVudUlucHV0Q2hhbmdlOiBmdW5jdGlvbiggZXZ0ICkge1xyXG5cdFx0dmFyIGlucHV0ID0gJCggZXZ0LnRhcmdldCApLFxyXG5cdFx0XHRjaGVja2VkID0gaW5wdXRbIDAgXS5jaGVja2VkO1xyXG5cclxuXHRcdGlucHV0LmpxbURhdGEoIFwiY2VsbHNcIiApXHJcblx0XHRcdC50b2dnbGVDbGFzcyggXCJ1aS10YWJsZS1jZWxsLWhpZGRlblwiLCAhY2hlY2tlZCApXHJcblx0XHRcdC50b2dnbGVDbGFzcyggXCJ1aS10YWJsZS1jZWxsLXZpc2libGVcIiwgY2hlY2tlZCApO1xyXG5cdH0sXHJcblxyXG5cdF91bmxvY2tDZWxsczogZnVuY3Rpb24oIGNlbGxzICkge1xyXG5cdFx0Ly8gYWxsb3cgaGlkZS9zaG93IHZpYSBDU1Mgb25seSA9IHJlbW92ZSBhbGwgdG9nZ2xlLWxvY2tzXHJcblx0XHRjZWxscy5yZW1vdmVDbGFzcyggXCJ1aS10YWJsZS1jZWxsLWhpZGRlbiB1aS10YWJsZS1jZWxsLXZpc2libGVcIik7XHJcblx0fSxcclxuXHJcblx0X2VuaGFuY2VDb2xUb2dnbGU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIGlkICwgbWVudUJ1dHRvbiwgcG9wdXAsIG1lbnUsXHJcblx0XHRcdHRhYmxlID0gdGhpcy5lbGVtZW50LFxyXG5cdFx0XHRvcHRzID0gdGhpcy5vcHRpb25zLFxyXG5cdFx0XHRucyA9ICQubW9iaWxlLm5zLFxyXG5cdFx0XHRmcmFnbWVudCA9IHRoaXMuZG9jdW1lbnRbIDAgXS5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XHJcblxyXG5cdFx0aWQgPSB0aGlzLl9pZCgpICsgXCItcG9wdXBcIjtcclxuXHRcdG1lbnVCdXR0b24gPSAkKCBcIjxhIGhyZWY9JyNcIiArIGlkICsgXCInIFwiICtcclxuXHRcdFx0XCJjbGFzcz0nXCIgKyBvcHRzLmNsYXNzZXMuY29sdW1uQnRuICsgXCIgdWktYnRuIFwiICtcclxuXHRcdFx0XCJ1aS1idG4tXCIgKyAoIG9wdHMuY29sdW1uQnRuVGhlbWUgfHwgXCJhXCIgKSArXHJcblx0XHRcdFwiIHVpLWNvcm5lci1hbGwgdWktc2hhZG93IHVpLW1pbmknIFwiICtcclxuXHRcdFx0XCJkYXRhLVwiICsgbnMgKyBcInJlbD0ncG9wdXAnPlwiICsgb3B0cy5jb2x1bW5CdG5UZXh0ICsgXCI8L2E+XCIgKTtcclxuXHRcdHBvcHVwID0gJCggXCI8ZGl2IGNsYXNzPSdcIiArIG9wdHMuY2xhc3Nlcy5wb3B1cCArIFwiJyBpZD0nXCIgKyBpZCArIFwiJz48L2Rpdj5cIiApO1xyXG5cdFx0bWVudSA9ICQoIFwiPGZpZWxkc2V0PjwvZmllbGRzZXQ+XCIgKS5jb250cm9sZ3JvdXAoKTtcclxuXHJcblx0XHQvLyBzZXQgZXh0ZW5zaW9uIGhlcmUsIHNlbmQgXCJmYWxzZVwiIHRvIHRyaWdnZXIgYnVpbGQvcmVidWlsZFxyXG5cdFx0dGhpcy5fYWRkVG9nZ2xlcyggbWVudSwgZmFsc2UgKTtcclxuXHJcblx0XHRtZW51LmFwcGVuZFRvKCBwb3B1cCApO1xyXG5cclxuXHRcdGZyYWdtZW50LmFwcGVuZENoaWxkKCBwb3B1cFsgMCBdICk7XHJcblx0XHRmcmFnbWVudC5hcHBlbmRDaGlsZCggbWVudUJ1dHRvblsgMCBdICk7XHJcblx0XHR0YWJsZS5iZWZvcmUoIGZyYWdtZW50ICk7XHJcblxyXG5cdFx0cG9wdXAucG9wdXAoKTtcclxuXHJcblx0XHRyZXR1cm4gbWVudTtcclxuXHR9LFxyXG5cclxuXHRyZWJ1aWxkOiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuX3N1cGVyKCk7XHJcblxyXG5cdFx0aWYgKCB0aGlzLm9wdGlvbnMubW9kZSA9PT0gXCJjb2x1bW50b2dnbGVcIiApIHtcclxuXHRcdFx0Ly8gTk9URTogcmVidWlsZCBwYXNzZXMgXCJmYWxzZVwiLCB3aGlsZSByZWZyZXNoIHBhc3NlcyBcInVuZGVmaW5lZFwiXHJcblx0XHRcdC8vIGJvdGggcmVmcmVzaCB0aGUgdGFibGUsIGJ1dCBpbnNpZGUgYWRkVG9nZ2xlcywgIWZhbHNlIHdpbGwgYmUgdHJ1ZSxcclxuXHRcdFx0Ly8gc28gYSByZWJ1aWxkIGNhbGwgY2FuIGJlIGluZGVudGlmaWVkXHJcblx0XHRcdHRoaXMuX3JlZnJlc2goIGZhbHNlICk7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X3JlZnJlc2g6IGZ1bmN0aW9uKCBjcmVhdGUgKSB7XHJcblx0XHR2YXIgaGVhZGVycywgaGlkZGVuQ29sdW1ucywgaW5kZXg7XHJcblxyXG5cdFx0Ly8gQ2FsbGluZyBfc3VwZXIoKSBoZXJlIHVwZGF0ZXMgdGhpcy5oZWFkZXJzXHJcblx0XHR0aGlzLl9zdXBlciggY3JlYXRlICk7XHJcblxyXG5cdFx0aWYgKCAhY3JlYXRlICYmIHRoaXMub3B0aW9ucy5tb2RlID09PSBcImNvbHVtbnRvZ2dsZVwiICkge1xyXG5cdFx0XHRoZWFkZXJzID0gdGhpcy5oZWFkZXJzO1xyXG5cdFx0XHRoaWRkZW5Db2x1bW5zID0gW107XHJcblxyXG5cdFx0XHQvLyBGaW5kIHRoZSBpbmRleCBvZiB0aGUgY29sdW1uIGhlYWRlciBhc3NvY2lhdGVkIHdpdGggZWFjaCBvbGQgY2hlY2tib3ggYW1vbmcgdGhlXHJcblx0XHRcdC8vIHBvc3QtcmVmcmVzaCBoZWFkZXJzIGFuZCwgaWYgdGhlIGhlYWRlciBpcyBzdGlsbCB0aGVyZSwgbWFrZSBzdXJlIHRoZSBjb3JyZXNwb25kaW5nXHJcblx0XHRcdC8vIGNvbHVtbiB3aWxsIGJlIGhpZGRlbiBpZiB0aGUgcHJlLXJlZnJlc2ggY2hlY2tib3ggaW5kaWNhdGVzIHRoYXQgdGhlIGNvbHVtbiBpc1xyXG5cdFx0XHQvLyBoaWRkZW4gYnkgcmVjb3JkaW5nIGl0cyBpbmRleCBpbiB0aGUgYXJyYXkgb2YgaGlkZGVuIGNvbHVtbnMuXHJcblx0XHRcdHRoaXMuX21lbnUuZmluZCggXCJpbnB1dFwiICkuZWFjaCggZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0dmFyIGlucHV0ID0gJCggdGhpcyApLFxyXG5cdFx0XHRcdFx0aGVhZGVyID0gaW5wdXQuanFtRGF0YSggXCJoZWFkZXJcIiApLFxyXG5cdFx0XHRcdFx0aW5kZXggPSBoZWFkZXJzLmluZGV4KCBoZWFkZXJbIDAgXSApO1xyXG5cclxuXHRcdFx0XHRpZiAoIGluZGV4ID4gLTEgJiYgIWlucHV0LnByb3AoIFwiY2hlY2tlZFwiICkgKSB7XHJcblxyXG5cdFx0XHRcdFx0Ly8gVGhlIGNvbHVtbiBoZWFkZXIgYXNzb2NpYXRlZCB3aXRoIC90aGlzLyBjaGVja2JveCBpcyBzdGlsbCBwcmVzZW50IGluIHRoZVxyXG5cdFx0XHRcdFx0Ly8gcG9zdC1yZWZyZXNoIHRhYmxlIGFuZCB0aGUgY2hlY2tib3ggaXMgbm90IGNoZWNrZWQsIHNvIHRoZSBjb2x1bW4gYXNzb2NpYXRlZFxyXG5cdFx0XHRcdFx0Ly8gd2l0aCB0aGlzIGNvbHVtbiBoZWFkZXIgaXMgY3VycmVudGx5IGhpZGRlbi4gTGV0J3MgcmVjb3JkIHRoYXQuXHJcblx0XHRcdFx0XHRoaWRkZW5Db2x1bW5zLnB1c2goIGluZGV4ICk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdC8vIGNvbHVtbnMgbm90IGJlaW5nIHJlcGxhY2VkIG11c3QgYmUgY2xlYXJlZCBmcm9tIGlucHV0IHRvZ2dsZS1sb2Nrc1xyXG5cdFx0XHR0aGlzLl91bmxvY2tDZWxscyggdGhpcy5lbGVtZW50LmZpbmQoIFwiLnVpLXRhYmxlLWNlbGwtaGlkZGVuLCBcIiArXHJcblx0XHRcdFx0XCIudWktdGFibGUtY2VsbC12aXNpYmxlXCIgKSApO1xyXG5cclxuXHRcdFx0Ly8gdXBkYXRlIGNvbHVtbnRvZ2dsZXMgYW5kIGNlbGxzXHJcblx0XHRcdHRoaXMuX2FkZFRvZ2dsZXMoIHRoaXMuX21lbnUsIGNyZWF0ZSApO1xyXG5cclxuXHRcdFx0Ly8gQXQgdGhpcyBwb2ludCBhbGwgY29sdW1ucyBhcmUgdmlzaWJsZSwgc28gdW5jaGVjayB0aGUgY2hlY2tib3hlcyB0aGF0IGNvcnJlc3BvbmQgdG9cclxuXHRcdFx0Ly8gdGhvc2UgY29sdW1ucyB3ZSd2ZSBmb3VuZCB0byBiZSBoaWRkZW5cclxuXHRcdFx0Zm9yICggaW5kZXggPSBoaWRkZW5Db2x1bW5zLmxlbmd0aCAtIDEgOyBpbmRleCA+IC0xIDsgaW5kZXgtLSApIHtcclxuXHRcdFx0XHRoZWFkZXJzLmVxKCBoaWRkZW5Db2x1bW5zWyBpbmRleCBdICkuanFtRGF0YSggXCJpbnB1dFwiIClcclxuXHRcdFx0XHRcdC5wcm9wKCBcImNoZWNrZWRcIiwgZmFsc2UgKVxyXG5cdFx0XHRcdFx0LmNoZWNrYm94cmFkaW8oIFwicmVmcmVzaFwiIClcclxuXHRcdFx0XHRcdC50cmlnZ2VyKCBcImNoYW5nZVwiICk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfc2V0VG9nZ2xlU3RhdGU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5fbWVudS5maW5kKCBcImlucHV0XCIgKS5lYWNoKCBmdW5jdGlvbigpIHtcclxuXHRcdFx0dmFyIGNoZWNrYm94ID0gJCggdGhpcyApO1xyXG5cclxuXHRcdFx0dGhpcy5jaGVja2VkID0gY2hlY2tib3guanFtRGF0YSggXCJjZWxsc1wiICkuZXEoIDAgKS5jc3MoIFwiZGlzcGxheVwiICkgPT09IFwidGFibGUtY2VsbFwiO1xyXG5cdFx0XHRjaGVja2JveC5jaGVja2JveHJhZGlvKCBcInJlZnJlc2hcIiApO1xyXG5cdFx0fSk7XHJcblx0fSxcclxuXHJcblx0X2Rlc3Ryb3k6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5fc3VwZXIoKTtcclxuXHR9XHJcbn0pO1xyXG5cclxufSkoIGpRdWVyeSApO1xyXG5cclxuKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7XHJcblxyXG4kLndpZGdldCggXCJtb2JpbGUudGFibGVcIiwgJC5tb2JpbGUudGFibGUsIHtcclxuXHRvcHRpb25zOiB7XHJcblx0XHRtb2RlOiBcInJlZmxvd1wiLFxyXG5cdFx0Y2xhc3NlczogJC5leHRlbmQoICQubW9iaWxlLnRhYmxlLnByb3RvdHlwZS5vcHRpb25zLmNsYXNzZXMsIHtcclxuXHRcdFx0cmVmbG93VGFibGU6IFwidWktdGFibGUtcmVmbG93XCIsXHJcblx0XHRcdGNlbGxMYWJlbHM6IFwidWktdGFibGUtY2VsbC1sYWJlbFwiXHJcblx0XHR9KVxyXG5cdH0sXHJcblxyXG5cdF9jcmVhdGU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5fc3VwZXIoKTtcclxuXHJcblx0XHQvLyBJZiBpdCdzIG5vdCByZWZsb3cgbW9kZSwgcmV0dXJuIGhlcmUuXHJcblx0XHRpZiAoIHRoaXMub3B0aW9ucy5tb2RlICE9PSBcInJlZmxvd1wiICkge1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCAhdGhpcy5vcHRpb25zLmVuaGFuY2VkICkge1xyXG5cdFx0XHR0aGlzLmVsZW1lbnQuYWRkQ2xhc3MoIHRoaXMub3B0aW9ucy5jbGFzc2VzLnJlZmxvd1RhYmxlICk7XHJcblxyXG5cdFx0XHR0aGlzLl91cGRhdGVSZWZsb3coKTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRyZWJ1aWxkOiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuX3N1cGVyKCk7XHJcblxyXG5cdFx0aWYgKCB0aGlzLm9wdGlvbnMubW9kZSA9PT0gXCJyZWZsb3dcIiApIHtcclxuXHRcdFx0dGhpcy5fcmVmcmVzaCggZmFsc2UgKTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfcmVmcmVzaDogZnVuY3Rpb24oIGNyZWF0ZSApIHtcclxuXHRcdHRoaXMuX3N1cGVyKCBjcmVhdGUgKTtcclxuXHRcdGlmICggIWNyZWF0ZSAmJiB0aGlzLm9wdGlvbnMubW9kZSA9PT0gXCJyZWZsb3dcIiApIHtcclxuXHRcdFx0dGhpcy5fdXBkYXRlUmVmbG93KCApO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF91cGRhdGVSZWZsb3c6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIHRhYmxlID0gdGhpcyxcclxuXHRcdFx0b3B0cyA9IHRoaXMub3B0aW9ucztcclxuXHJcblx0XHQvLyBnZXQgaGVhZGVycyBpbiByZXZlcnNlIG9yZGVyIHNvIHRoYXQgdG9wLWxldmVsIGhlYWRlcnMgYXJlIGFwcGVuZGVkIGxhc3RcclxuXHRcdCQoIHRhYmxlLmFsbEhlYWRlcnMuZ2V0KCkucmV2ZXJzZSgpICkuZWFjaCggZnVuY3Rpb24oKSB7XHJcblx0XHRcdHZhciBjZWxscyA9ICQoIHRoaXMgKS5qcW1EYXRhKCBcImNlbGxzXCIgKSxcclxuXHRcdFx0XHRjb2xzdGFydCA9ICQubW9iaWxlLmdldEF0dHJpYnV0ZSggdGhpcywgXCJjb2xzdGFydFwiICksXHJcblx0XHRcdFx0aGllcmFyY2h5Q2xhc3MgPSBjZWxscy5ub3QoIHRoaXMgKS5maWx0ZXIoIFwidGhlYWQgdGhcIiApLmxlbmd0aCAmJiBcIiB1aS10YWJsZS1jZWxsLWxhYmVsLXRvcFwiLFxyXG5cdFx0XHRcdGNvbnRlbnRzID0gJCggdGhpcyApLmNsb25lKCkuY29udGVudHMoKSxcclxuXHRcdFx0XHRpdGVyYXRpb24sIGZpbHRlcjtcclxuXHJcblx0XHRcdFx0aWYgKCBjb250ZW50cy5sZW5ndGggPiAwICApIHtcclxuXHJcblx0XHRcdFx0XHRpZiAoIGhpZXJhcmNoeUNsYXNzICkge1xyXG5cdFx0XHRcdFx0XHRpdGVyYXRpb24gPSBwYXJzZUludCggdGhpcy5nZXRBdHRyaWJ1dGUoIFwiY29sc3BhblwiICksIDEwICk7XHJcblx0XHRcdFx0XHRcdGZpbHRlciA9IFwiXCI7XHJcblxyXG5cdFx0XHRcdFx0XHRpZiAoIGl0ZXJhdGlvbiApIHtcclxuXHRcdFx0XHRcdFx0XHRmaWx0ZXIgPSBcInRkOm50aC1jaGlsZChcIisgaXRlcmF0aW9uICtcIm4gKyBcIiArICggY29sc3RhcnQgKSArXCIpXCI7XHJcblx0XHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHRcdHRhYmxlLl9hZGRMYWJlbHMoIGNlbGxzLmZpbHRlciggZmlsdGVyICksXHJcblx0XHRcdFx0XHRcdFx0b3B0cy5jbGFzc2VzLmNlbGxMYWJlbHMgKyBoaWVyYXJjaHlDbGFzcywgY29udGVudHMgKTtcclxuXHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdHRhYmxlLl9hZGRMYWJlbHMoIGNlbGxzLCBvcHRzLmNsYXNzZXMuY2VsbExhYmVscywgY29udGVudHMgKTtcclxuXHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0fSxcclxuXHJcblx0X2FkZExhYmVsczogZnVuY3Rpb24oIGNlbGxzLCBsYWJlbCwgY29udGVudHMgKSB7XHJcblx0XHRpZiAoIGNvbnRlbnRzLmxlbmd0aCA9PT0gMSAmJiBjb250ZW50c1sgMCBdLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09IFwiYWJiclwiICkge1xyXG5cdFx0XHRjb250ZW50cyA9IGNvbnRlbnRzLmVxKCAwICkuYXR0ciggXCJ0aXRsZVwiICk7XHJcblx0XHR9XHJcblx0XHQvLyAubm90IGZpeGVzICM2MDA2XHJcblx0XHRjZWxsc1xyXG5cdFx0XHQubm90KCBcIjpoYXMoYi5cIiArIGxhYmVsICsgXCIpXCIgKVxyXG5cdFx0XHRcdC5wcmVwZW5kKCAkKCBcIjxiIGNsYXNzPSdcIiArIGxhYmVsICsgXCInPjwvYj5cIiApLmFwcGVuZCggY29udGVudHMgKSApO1xyXG5cdH1cclxufSk7XHJcblxyXG59KSggalF1ZXJ5ICk7XHJcblxyXG4oZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcclxuXHJcbi8vIFRPRE8gcmVuYW1lIGZpbHRlckNhbGxiYWNrL2RlcHJlY2F0ZSBhbmQgZGVmYXVsdCB0byB0aGUgaXRlbSBpdHNlbGYgYXMgdGhlIGZpcnN0IGFyZ3VtZW50XHJcbnZhciBkZWZhdWx0RmlsdGVyQ2FsbGJhY2sgPSBmdW5jdGlvbiggaW5kZXgsIHNlYXJjaFZhbHVlICkge1xyXG5cdHJldHVybiAoICggXCJcIiArICggJC5tb2JpbGUuZ2V0QXR0cmlidXRlKCB0aGlzLCBcImZpbHRlcnRleHRcIiApIHx8ICQoIHRoaXMgKS50ZXh0KCkgKSApXHJcblx0XHQudG9Mb3dlckNhc2UoKS5pbmRleE9mKCBzZWFyY2hWYWx1ZSApID09PSAtMSApO1xyXG59O1xyXG5cclxuJC53aWRnZXQoIFwibW9iaWxlLmZpbHRlcmFibGVcIiwge1xyXG5cclxuXHRpbml0U2VsZWN0b3I6IFwiOmpxbURhdGEoZmlsdGVyPSd0cnVlJylcIixcclxuXHJcblx0b3B0aW9uczoge1xyXG5cdFx0ZmlsdGVyUmV2ZWFsOiBmYWxzZSxcclxuXHRcdGZpbHRlckNhbGxiYWNrOiBkZWZhdWx0RmlsdGVyQ2FsbGJhY2ssXHJcblx0XHRlbmhhbmNlZDogZmFsc2UsXHJcblx0XHRpbnB1dDogbnVsbCxcclxuXHRcdGNoaWxkcmVuOiBcIj4gbGksID4gb3B0aW9uLCA+IG9wdGdyb3VwIG9wdGlvbiwgPiB0Ym9keSB0ciwgPiAudWktY29udHJvbGdyb3VwLWNvbnRyb2xzID4gLnVpLWJ0biwgPiAudWktY29udHJvbGdyb3VwLWNvbnRyb2xzID4gLnVpLWNoZWNrYm94LCA+IC51aS1jb250cm9sZ3JvdXAtY29udHJvbHMgPiAudWktcmFkaW9cIlxyXG5cdH0sXHJcblxyXG5cdF9jcmVhdGU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIG9wdHMgPSB0aGlzLm9wdGlvbnM7XHJcblxyXG5cdFx0JC5leHRlbmQoIHRoaXMsIHtcclxuXHRcdFx0X3NlYXJjaDogbnVsbCxcclxuXHRcdFx0X3RpbWVyOiAwXHJcblx0XHR9KTtcclxuXHJcblx0XHR0aGlzLl9zZXRJbnB1dCggb3B0cy5pbnB1dCApO1xyXG5cdFx0aWYgKCAhb3B0cy5lbmhhbmNlZCApIHtcclxuXHRcdFx0dGhpcy5fZmlsdGVySXRlbXMoICggKCB0aGlzLl9zZWFyY2ggJiYgdGhpcy5fc2VhcmNoLnZhbCgpICkgfHwgXCJcIiApLnRvTG93ZXJDYXNlKCkgKTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfb25LZXlVcDogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgdmFsLCBsYXN0dmFsLFxyXG5cdFx0XHRzZWFyY2ggPSB0aGlzLl9zZWFyY2g7XHJcblxyXG5cdFx0aWYgKCBzZWFyY2ggKSB7XHJcblx0XHRcdHZhbCA9IHNlYXJjaC52YWwoKS50b0xvd2VyQ2FzZSgpLFxyXG5cdFx0XHRsYXN0dmFsID0gJC5tb2JpbGUuZ2V0QXR0cmlidXRlKCBzZWFyY2hbIDAgXSwgXCJsYXN0dmFsXCIgKSArIFwiXCI7XHJcblxyXG5cdFx0XHRpZiAoIGxhc3R2YWwgJiYgbGFzdHZhbCA9PT0gdmFsICkge1xyXG5cdFx0XHRcdC8vIEV4ZWN1dGUgdGhlIGhhbmRsZXIgb25seSBvbmNlIHBlciB2YWx1ZSBjaGFuZ2VcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmICggdGhpcy5fdGltZXIgKSB7XHJcblx0XHRcdFx0d2luZG93LmNsZWFyVGltZW91dCggdGhpcy5fdGltZXIgKTtcclxuXHRcdFx0XHR0aGlzLl90aW1lciA9IDA7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHRoaXMuX3RpbWVyID0gdGhpcy5fZGVsYXkoIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdGlmICggdGhpcy5fdHJpZ2dlciggXCJiZWZvcmVmaWx0ZXJcIiwgbnVsbCwgeyBpbnB1dDogc2VhcmNoIH0gKSA9PT0gZmFsc2UgKSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHQvLyBDaGFuZ2UgdmFsIGFzIGxhc3R2YWwgZm9yIG5leHQgZXhlY3V0aW9uXHJcblx0XHRcdFx0c2VhcmNoWyAwIF0uc2V0QXR0cmlidXRlKCBcImRhdGEtXCIgKyAkLm1vYmlsZS5ucyArIFwibGFzdHZhbFwiLCB2YWwgKTtcclxuXHJcblx0XHRcdFx0dGhpcy5fZmlsdGVySXRlbXMoIHZhbCApO1xyXG5cdFx0XHRcdHRoaXMuX3RpbWVyID0gMDtcclxuXHRcdFx0fSwgMjUwICk7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X2dldEZpbHRlcmFibGVJdGVtczogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgZWxlbSA9IHRoaXMuZWxlbWVudCxcclxuXHRcdFx0Y2hpbGRyZW4gPSB0aGlzLm9wdGlvbnMuY2hpbGRyZW4sXHJcblx0XHRcdGl0ZW1zID0gIWNoaWxkcmVuID8geyBsZW5ndGg6IDAgfTpcclxuXHRcdFx0XHQkLmlzRnVuY3Rpb24oIGNoaWxkcmVuICkgPyBjaGlsZHJlbigpOlxyXG5cdFx0XHRcdGNoaWxkcmVuLm5vZGVOYW1lID8gJCggY2hpbGRyZW4gKTpcclxuXHRcdFx0XHRjaGlsZHJlbi5qcXVlcnkgPyBjaGlsZHJlbjpcclxuXHRcdFx0XHR0aGlzLmVsZW1lbnQuZmluZCggY2hpbGRyZW4gKTtcclxuXHJcblx0XHRpZiAoIGl0ZW1zLmxlbmd0aCA9PT0gMCApIHtcclxuXHRcdFx0aXRlbXMgPSBlbGVtLmNoaWxkcmVuKCk7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIGl0ZW1zO1xyXG5cdH0sXHJcblxyXG5cdF9maWx0ZXJJdGVtczogZnVuY3Rpb24oIHZhbCApIHtcclxuXHRcdHZhciBpZHgsIGNhbGxiYWNrLCBsZW5ndGgsIGRzdCxcclxuXHRcdFx0c2hvdyA9IFtdLFxyXG5cdFx0XHRoaWRlID0gW10sXHJcblx0XHRcdG9wdHMgPSB0aGlzLm9wdGlvbnMsXHJcblx0XHRcdGZpbHRlckl0ZW1zID0gdGhpcy5fZ2V0RmlsdGVyYWJsZUl0ZW1zKCk7XHJcblxyXG5cdFx0aWYgKCB2YWwgIT0gbnVsbCApIHtcclxuXHRcdFx0Y2FsbGJhY2sgPSBvcHRzLmZpbHRlckNhbGxiYWNrIHx8IGRlZmF1bHRGaWx0ZXJDYWxsYmFjaztcclxuXHRcdFx0bGVuZ3RoID0gZmlsdGVySXRlbXMubGVuZ3RoO1xyXG5cclxuXHRcdFx0Ly8gUGFydGl0aW9uIHRoZSBpdGVtcyBpbnRvIHRob3NlIHRvIGJlIGhpZGRlbiBhbmQgdGhvc2UgdG8gYmUgc2hvd25cclxuXHRcdFx0Zm9yICggaWR4ID0gMCA7IGlkeCA8IGxlbmd0aCA7IGlkeCsrICkge1xyXG5cdFx0XHRcdGRzdCA9ICggY2FsbGJhY2suY2FsbCggZmlsdGVySXRlbXNbIGlkeCBdLCBpZHgsIHZhbCApICkgPyBoaWRlIDogc2hvdztcclxuXHRcdFx0XHRkc3QucHVzaCggZmlsdGVySXRlbXNbIGlkeCBdICk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHQvLyBJZiBub3RoaW5nIGlzIGhpZGRlbiwgdGhlbiB0aGUgZGVjaXNpb24gd2hldGhlciB0byBoaWRlIG9yIHNob3cgdGhlIGl0ZW1zXHJcblx0XHQvLyBpcyBiYXNlZCBvbiB0aGUgXCJmaWx0ZXJSZXZlYWxcIiBvcHRpb24uXHJcblx0XHRpZiAoIGhpZGUubGVuZ3RoID09PSAwICkge1xyXG5cdFx0XHRmaWx0ZXJJdGVtc1sgKCBvcHRzLmZpbHRlclJldmVhbCAmJiB2YWwubGVuZ3RoID09PSAwICkgP1xyXG5cdFx0XHRcdFwiYWRkQ2xhc3NcIiA6IFwicmVtb3ZlQ2xhc3NcIiBdKCBcInVpLXNjcmVlbi1oaWRkZW5cIiApO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0JCggaGlkZSApLmFkZENsYXNzKCBcInVpLXNjcmVlbi1oaWRkZW5cIiApO1xyXG5cdFx0XHQkKCBzaG93ICkucmVtb3ZlQ2xhc3MoIFwidWktc2NyZWVuLWhpZGRlblwiICk7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5fcmVmcmVzaENoaWxkV2lkZ2V0KCk7XHJcblxyXG5cdFx0dGhpcy5fdHJpZ2dlciggXCJmaWx0ZXJcIiwgbnVsbCwge1xyXG5cdFx0XHRpdGVtczogZmlsdGVySXRlbXNcclxuXHRcdH0pO1xyXG5cdH0sXHJcblxyXG5cdC8vIFRoZSBEZWZhdWx0IGltcGxlbWVudGF0aW9uIG9mIF9yZWZyZXNoQ2hpbGRXaWRnZXQgYXR0ZW1wdHMgdG8gY2FsbFxyXG5cdC8vIHJlZnJlc2ggb24gY29sbGFwc2libGVzZXQsIGNvbnRyb2xncm91cCwgc2VsZWN0bWVudSwgb3IgbGlzdHZpZXdcclxuXHRfcmVmcmVzaENoaWxkV2lkZ2V0OiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciB3aWRnZXQsIGlkeCxcclxuXHRcdFx0cmVjb2duaXplZFdpZGdldHMgPSBbIFwiY29sbGFwc2libGVzZXRcIiwgXCJzZWxlY3RtZW51XCIsIFwiY29udHJvbGdyb3VwXCIsIFwibGlzdHZpZXdcIiBdO1xyXG5cclxuXHRcdGZvciAoIGlkeCA9IHJlY29nbml6ZWRXaWRnZXRzLmxlbmd0aCAtIDEgOyBpZHggPiAtMSA7IGlkeC0tICkge1xyXG5cdFx0XHR3aWRnZXQgPSByZWNvZ25pemVkV2lkZ2V0c1sgaWR4IF07XHJcblx0XHRcdGlmICggJC5tb2JpbGVbIHdpZGdldCBdICkge1xyXG5cdFx0XHRcdHdpZGdldCA9IHRoaXMuZWxlbWVudC5kYXRhKCBcIm1vYmlsZS1cIiArIHdpZGdldCApO1xyXG5cdFx0XHRcdGlmICggd2lkZ2V0ICYmICQuaXNGdW5jdGlvbiggd2lkZ2V0LnJlZnJlc2ggKSApIHtcclxuXHRcdFx0XHRcdHdpZGdldC5yZWZyZXNoKCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0Ly8gVE9ETzogV2hlbiB0aGUgaW5wdXQgaXMgbm90IGludGVybmFsLCBkbyBub3QgZXZlbiBzdG9yZSBpdCBpbiB0aGlzLl9zZWFyY2hcclxuXHRfc2V0SW5wdXQ6IGZ1bmN0aW9uICggc2VsZWN0b3IgKSB7XHJcblx0XHR2YXIgc2VhcmNoID0gdGhpcy5fc2VhcmNoO1xyXG5cclxuXHRcdC8vIFN0b3AgYSBwZW5kaW5nIGZpbHRlciBvcGVyYXRpb25cclxuXHRcdGlmICggdGhpcy5fdGltZXIgKSB7XHJcblx0XHRcdHdpbmRvdy5jbGVhclRpbWVvdXQoIHRoaXMuX3RpbWVyICk7XHJcblx0XHRcdHRoaXMuX3RpbWVyID0gMDtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIHNlYXJjaCApIHtcclxuXHRcdFx0dGhpcy5fb2ZmKCBzZWFyY2gsIFwia2V5dXAgY2hhbmdlIGlucHV0XCIgKTtcclxuXHRcdFx0c2VhcmNoID0gbnVsbDtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIHNlbGVjdG9yICkge1xyXG5cdFx0XHRzZWFyY2ggPSBzZWxlY3Rvci5qcXVlcnkgPyBzZWxlY3RvcjpcclxuXHRcdFx0XHRzZWxlY3Rvci5ub2RlTmFtZSA/ICQoIHNlbGVjdG9yICk6XHJcblx0XHRcdFx0dGhpcy5kb2N1bWVudC5maW5kKCBzZWxlY3RvciApO1xyXG5cclxuXHRcdFx0dGhpcy5fb24oIHNlYXJjaCwge1xyXG5cdFx0XHRcdGtleWRvd246IFwiX29uS2V5RG93blwiLFxyXG5cdFx0XHRcdGtleXByZXNzOiBcIl9vbktleVByZXNzXCIsXHJcblx0XHRcdFx0a2V5dXA6IFwiX29uS2V5VXBcIixcclxuXHRcdFx0XHRjaGFuZ2U6IFwiX29uS2V5VXBcIixcclxuXHRcdFx0XHRpbnB1dDogXCJfb25LZXlVcFwiXHJcblx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuX3NlYXJjaCA9IHNlYXJjaDtcclxuXHR9LFxyXG5cclxuXHQvLyBQcmV2ZW50IGZvcm0gc3VibWlzc2lvblxyXG5cdF9vbktleURvd246IGZ1bmN0aW9uKCBldmVudCApIHtcclxuXHRcdGlmICggZXZlbnQua2V5Q29kZSA9PT0gJC51aS5rZXlDb2RlLkVOVEVSICkge1xyXG5cdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHR0aGlzLl9wcmV2ZW50S2V5UHJlc3MgPSB0cnVlO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9vbktleVByZXNzOiBmdW5jdGlvbiggZXZlbnQgKSB7XHJcblx0XHRpZiAoIHRoaXMuX3ByZXZlbnRLZXlQcmVzcyApIHtcclxuXHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0dGhpcy5fcHJldmVudEtleVByZXNzID0gZmFsc2U7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X3NldE9wdGlvbnM6IGZ1bmN0aW9uKCBvcHRpb25zICkge1xyXG5cdFx0dmFyIHJlZmlsdGVyID0gISggKCBvcHRpb25zLmZpbHRlclJldmVhbCA9PT0gdW5kZWZpbmVkICkgJiZcclxuXHRcdFx0XHQoIG9wdGlvbnMuZmlsdGVyQ2FsbGJhY2sgPT09IHVuZGVmaW5lZCApICYmXHJcblx0XHRcdFx0KCBvcHRpb25zLmNoaWxkcmVuID09PSB1bmRlZmluZWQgKSApO1xyXG5cclxuXHRcdHRoaXMuX3N1cGVyKCBvcHRpb25zICk7XHJcblxyXG5cdFx0aWYgKCBvcHRpb25zLmlucHV0ICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdHRoaXMuX3NldElucHV0KCBvcHRpb25zLmlucHV0ICk7XHJcblx0XHRcdHJlZmlsdGVyID0gdHJ1ZTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIHJlZmlsdGVyICkge1xyXG5cdFx0XHR0aGlzLnJlZnJlc2goKTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfZGVzdHJveTogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgb3B0cyA9IHRoaXMub3B0aW9ucyxcclxuXHRcdFx0aXRlbXMgPSB0aGlzLl9nZXRGaWx0ZXJhYmxlSXRlbXMoKTtcclxuXHJcblx0XHRpZiAoIG9wdHMuZW5oYW5jZWQgKSB7XHJcblx0XHRcdGl0ZW1zLnRvZ2dsZUNsYXNzKCBcInVpLXNjcmVlbi1oaWRkZW5cIiwgb3B0cy5maWx0ZXJSZXZlYWwgKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdGl0ZW1zLnJlbW92ZUNsYXNzKCBcInVpLXNjcmVlbi1oaWRkZW5cIiApO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdHJlZnJlc2g6IGZ1bmN0aW9uKCkge1xyXG5cdFx0aWYgKCB0aGlzLl90aW1lciApIHtcclxuXHRcdFx0d2luZG93LmNsZWFyVGltZW91dCggdGhpcy5fdGltZXIgKTtcclxuXHRcdFx0dGhpcy5fdGltZXIgPSAwO1xyXG5cdFx0fVxyXG5cdFx0dGhpcy5fZmlsdGVySXRlbXMoICggKCB0aGlzLl9zZWFyY2ggJiYgdGhpcy5fc2VhcmNoLnZhbCgpICkgfHwgXCJcIiApLnRvTG93ZXJDYXNlKCkgKTtcclxuXHR9XHJcbn0pO1xyXG5cclxufSkoIGpRdWVyeSApO1xyXG5cclxuKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7XHJcblxyXG4vLyBDcmVhdGUgYSBmdW5jdGlvbiB0aGF0IHdpbGwgcmVwbGFjZSB0aGUgX3NldE9wdGlvbnMgZnVuY3Rpb24gb2YgYSB3aWRnZXQsXHJcbi8vIGFuZCB3aWxsIHBhc3MgdGhlIG9wdGlvbnMgb24gdG8gdGhlIGlucHV0IG9mIHRoZSBmaWx0ZXJhYmxlLlxyXG52YXIgcmVwbGFjZVNldE9wdGlvbnMgPSBmdW5jdGlvbiggc2VsZiwgb3JpZyApIHtcclxuXHRcdHJldHVybiBmdW5jdGlvbiggb3B0aW9ucyApIHtcclxuXHRcdFx0b3JpZy5jYWxsKCB0aGlzLCBvcHRpb25zICk7XHJcblx0XHRcdHNlbGYuX3N5bmNUZXh0SW5wdXRPcHRpb25zKCBvcHRpb25zICk7XHJcblx0XHR9O1xyXG5cdH0sXHJcblx0ckRpdmlkZXJMaXN0SXRlbSA9IC8oXnxcXHMpdWktbGktZGl2aWRlcihcXHN8JCkvLFxyXG5cdG9yaWdEZWZhdWx0RmlsdGVyQ2FsbGJhY2sgPSAkLm1vYmlsZS5maWx0ZXJhYmxlLnByb3RvdHlwZS5vcHRpb25zLmZpbHRlckNhbGxiYWNrO1xyXG5cclxuLy8gT3ZlcnJpZGUgdGhlIGRlZmF1bHQgZmlsdGVyIGNhbGxiYWNrIHdpdGggb25lIHRoYXQgZG9lcyBub3QgaGlkZSBsaXN0IGRpdmlkZXJzXHJcbiQubW9iaWxlLmZpbHRlcmFibGUucHJvdG90eXBlLm9wdGlvbnMuZmlsdGVyQ2FsbGJhY2sgPSBmdW5jdGlvbiggaW5kZXgsIHNlYXJjaFZhbHVlICkge1xyXG5cdHJldHVybiAhdGhpcy5jbGFzc05hbWUubWF0Y2goIHJEaXZpZGVyTGlzdEl0ZW0gKSAmJlxyXG5cdFx0b3JpZ0RlZmF1bHRGaWx0ZXJDYWxsYmFjay5jYWxsKCB0aGlzLCBpbmRleCwgc2VhcmNoVmFsdWUgKTtcclxufTtcclxuXHJcbiQud2lkZ2V0KCBcIm1vYmlsZS5maWx0ZXJhYmxlXCIsICQubW9iaWxlLmZpbHRlcmFibGUsIHtcclxuXHRvcHRpb25zOiB7XHJcblx0XHRmaWx0ZXJQbGFjZWhvbGRlcjogXCJGaWx0ZXIgaXRlbXMuLi5cIixcclxuXHRcdGZpbHRlclRoZW1lOiBudWxsXHJcblx0fSxcclxuXHJcblx0X2NyZWF0ZTogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgaWR4LCB3aWRnZXROYW1lLFxyXG5cdFx0XHRlbGVtID0gdGhpcy5lbGVtZW50LFxyXG5cdFx0XHRyZWNvZ25pemVkV2lkZ2V0cyA9IFsgXCJjb2xsYXBzaWJsZXNldFwiLCBcInNlbGVjdG1lbnVcIiwgXCJjb250cm9sZ3JvdXBcIiwgXCJsaXN0dmlld1wiIF0sXHJcblx0XHRcdGNyZWF0ZUhhbmRsZXJzID0ge307XHJcblxyXG5cdFx0dGhpcy5fc3VwZXIoKTtcclxuXHJcblx0XHQkLmV4dGVuZCggdGhpcywge1xyXG5cdFx0XHRfd2lkZ2V0OiBudWxsXHJcblx0XHR9KTtcclxuXHJcblx0XHRmb3IgKCBpZHggPSByZWNvZ25pemVkV2lkZ2V0cy5sZW5ndGggLSAxIDsgaWR4ID4gLTEgOyBpZHgtLSApIHtcclxuXHRcdFx0d2lkZ2V0TmFtZSA9IHJlY29nbml6ZWRXaWRnZXRzWyBpZHggXTtcclxuXHRcdFx0aWYgKCAkLm1vYmlsZVsgd2lkZ2V0TmFtZSBdICkge1xyXG5cdFx0XHRcdGlmICggdGhpcy5fc2V0V2lkZ2V0KCBlbGVtLmRhdGEoIFwibW9iaWxlLVwiICsgd2lkZ2V0TmFtZSApICkgKSB7XHJcblx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0Y3JlYXRlSGFuZGxlcnNbIHdpZGdldE5hbWUgKyBcImNyZWF0ZVwiIF0gPSBcIl9oYW5kbGVDcmVhdGVcIjtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRpZiAoICF0aGlzLl93aWRnZXQgKSB7XHJcblx0XHRcdHRoaXMuX29uKCBlbGVtLCBjcmVhdGVIYW5kbGVycyApO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9oYW5kbGVDcmVhdGU6IGZ1bmN0aW9uKCBldnQgKSB7XHJcblx0XHR0aGlzLl9zZXRXaWRnZXQoIHRoaXMuZWxlbWVudC5kYXRhKCBcIm1vYmlsZS1cIiArIGV2dC50eXBlLnN1YnN0cmluZyggMCwgZXZ0LnR5cGUubGVuZ3RoIC0gNiApICkgKTtcclxuXHR9LFxyXG5cclxuXHRfdHJpZ2dlcjogZnVuY3Rpb24oIHR5cGUsIGV2ZW50LCBkYXRhICkge1xyXG5cdFx0aWYgKCB0aGlzLl93aWRnZXQgJiYgdGhpcy5fd2lkZ2V0LndpZGdldEZ1bGxOYW1lID09PSBcIm1vYmlsZS1saXN0dmlld1wiICYmXHJcblx0XHRcdHR5cGUgPT09IFwiYmVmb3JlZmlsdGVyXCIgKSB7XHJcblxyXG5cdFx0XHQvLyBBbHNvIHRyaWdnZXIgbGlzdHZpZXdiZWZvcmVmaWx0ZXIgaWYgdGhpcyB3aWRnZXQgaXMgYWxzbyBhIGxpc3R2aWV3XHJcblx0XHRcdHRoaXMuX3dpZGdldC5fdHJpZ2dlciggXCJiZWZvcmVmaWx0ZXJcIiwgZXZlbnQsIGRhdGEgKTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBQYXNzaW5nIGJhY2sgdGhlIHJlc3BvbnNlIGVuYWJsZXMgY2FsbGluZyBwcmV2ZW50RGVmYXVsdCgpXHJcblx0XHRyZXR1cm4gdGhpcy5fc3VwZXIoIHR5cGUsIGV2ZW50LCBkYXRhICk7XHJcblx0fSxcclxuXHJcblx0X3NldFdpZGdldDogZnVuY3Rpb24oIHdpZGdldCApIHtcclxuXHRcdGlmICggIXRoaXMuX3dpZGdldCAmJiB3aWRnZXQgKSB7XHJcblx0XHRcdHRoaXMuX3dpZGdldCA9IHdpZGdldDtcclxuXHRcdFx0dGhpcy5fd2lkZ2V0Ll9zZXRPcHRpb25zID0gcmVwbGFjZVNldE9wdGlvbnMoIHRoaXMsIHRoaXMuX3dpZGdldC5fc2V0T3B0aW9ucyApO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggISF0aGlzLl93aWRnZXQgKSB7XHJcblx0XHRcdHRoaXMuX3N5bmNUZXh0SW5wdXRPcHRpb25zKCB0aGlzLl93aWRnZXQub3B0aW9ucyApO1xyXG5cdFx0XHRpZiAoIHRoaXMuX3dpZGdldC53aWRnZXROYW1lID09PSBcImxpc3R2aWV3XCIgKSB7XHJcblx0XHRcdFx0dGhpcy5fd2lkZ2V0Lm9wdGlvbnMuaGlkZURpdmlkZXJzID0gdHJ1ZTtcclxuXHRcdFx0XHR0aGlzLl93aWRnZXQuZWxlbWVudC5saXN0dmlldyggXCJyZWZyZXNoXCIgKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiAhIXRoaXMuX3dpZGdldDtcclxuXHR9LFxyXG5cclxuXHRfaXNTZWFyY2hJbnRlcm5hbDogZnVuY3Rpb24oKSB7XHJcblx0XHRyZXR1cm4gKCB0aGlzLl9zZWFyY2ggJiYgdGhpcy5fc2VhcmNoLmpxbURhdGEoIFwidWktZmlsdGVyYWJsZS1cIiArIHRoaXMudXVpZCArIFwiLWludGVybmFsXCIgKSApO1xyXG5cdH0sXHJcblxyXG5cdF9zZXRJbnB1dDogZnVuY3Rpb24oIHNlbGVjdG9yICkge1xyXG5cdFx0dmFyIG9wdHMgPSB0aGlzLm9wdGlvbnMsXHJcblx0XHRcdHVwZGF0ZVBsYWNlaG9sZGVyID0gdHJ1ZSxcclxuXHRcdFx0dGV4dGlucHV0T3B0cyA9IHt9O1xyXG5cclxuXHRcdGlmICggIXNlbGVjdG9yICkge1xyXG5cdFx0XHRpZiAoIHRoaXMuX2lzU2VhcmNoSW50ZXJuYWwoKSApIHtcclxuXHJcblx0XHRcdFx0Ly8gSWdub3JlIHRoZSBjYWxsIHRvIHNldCBhIG5ldyBpbnB1dCBpZiB0aGUgc2VsZWN0b3IgZ29lcyB0byBmYWxzeSBhbmRcclxuXHRcdFx0XHQvLyB0aGUgY3VycmVudCB0ZXh0aW5wdXQgaXMgYWxyZWFkeSBvZiB0aGUgaW50ZXJuYWxseSBnZW5lcmF0ZWQgdmFyaWV0eS5cclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH0gZWxzZSB7XHJcblxyXG5cdFx0XHRcdC8vIEdlbmVyYXRpbmcgYSBuZXcgdGV4dGlucHV0IHdpZGdldC4gTm8gbmVlZCB0byBzZXQgdGhlIHBsYWNlaG9sZGVyXHJcblx0XHRcdFx0Ly8gZnVydGhlciBkb3duIHRoZSBmdW5jdGlvbi5cclxuXHRcdFx0XHR1cGRhdGVQbGFjZWhvbGRlciA9IGZhbHNlO1xyXG5cdFx0XHRcdHNlbGVjdG9yID0gJCggXCI8aW5wdXQgXCIgK1xyXG5cdFx0XHRcdFx0XCJkYXRhLVwiICsgJC5tb2JpbGUubnMgKyBcInR5cGU9J3NlYXJjaCcgXCIgK1xyXG5cdFx0XHRcdFx0XCJwbGFjZWhvbGRlcj0nXCIgKyBvcHRzLmZpbHRlclBsYWNlaG9sZGVyICsgXCInPjwvaW5wdXQ+XCIgKVxyXG5cdFx0XHRcdFx0LmpxbURhdGEoIFwidWktZmlsdGVyYWJsZS1cIiArIHRoaXMudXVpZCArIFwiLWludGVybmFsXCIsIHRydWUgKTtcclxuXHRcdFx0XHQkKCBcIjxmb3JtIGNsYXNzPSd1aS1maWx0ZXJhYmxlJz48L2Zvcm0+XCIgKVxyXG5cdFx0XHRcdFx0LmFwcGVuZCggc2VsZWN0b3IgKVxyXG5cdFx0XHRcdFx0LnN1Ym1pdCggZnVuY3Rpb24oIGV2dCApIHtcclxuXHRcdFx0XHRcdFx0ZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFx0XHRcdHNlbGVjdG9yLmJsdXIoKTtcclxuXHRcdFx0XHRcdH0pXHJcblx0XHRcdFx0XHQuaW5zZXJ0QmVmb3JlKCB0aGlzLmVsZW1lbnQgKTtcclxuXHRcdFx0XHRpZiAoICQubW9iaWxlLnRleHRpbnB1dCApIHtcclxuXHRcdFx0XHRcdGlmICggdGhpcy5vcHRpb25zLmZpbHRlclRoZW1lICE9IG51bGwgKSB7XHJcblx0XHRcdFx0XHRcdHRleHRpbnB1dE9wdHNbIFwidGhlbWVcIiBdID0gb3B0cy5maWx0ZXJUaGVtZTtcclxuXHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHRzZWxlY3Rvci50ZXh0aW5wdXQoIHRleHRpbnB1dE9wdHMgKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLl9zdXBlciggc2VsZWN0b3IgKTtcclxuXHJcblx0XHRpZiAoIHRoaXMuX2lzU2VhcmNoSW50ZXJuYWwoKSAmJiB1cGRhdGVQbGFjZWhvbGRlciApIHtcclxuXHRcdFx0dGhpcy5fc2VhcmNoLmF0dHIoIFwicGxhY2Vob2xkZXJcIiwgdGhpcy5vcHRpb25zLmZpbHRlclBsYWNlaG9sZGVyICk7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X3NldE9wdGlvbnM6IGZ1bmN0aW9uKCBvcHRpb25zICkge1xyXG5cdFx0dmFyIHJldCA9IHRoaXMuX3N1cGVyKCBvcHRpb25zICk7XHJcblxyXG5cdFx0Ly8gTmVlZCB0byBzZXQgdGhlIGZpbHRlclBsYWNlaG9sZGVyIGFmdGVyIGhhdmluZyBlc3RhYmxpc2hlZCB0aGUgc2VhcmNoIGlucHV0XHJcblx0XHRpZiAoIG9wdGlvbnMuZmlsdGVyUGxhY2Vob2xkZXIgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0aWYgKCB0aGlzLl9pc1NlYXJjaEludGVybmFsKCkgKSB7XHJcblx0XHRcdFx0dGhpcy5fc2VhcmNoLmF0dHIoIFwicGxhY2Vob2xkZXJcIiwgb3B0aW9ucy5maWx0ZXJQbGFjZWhvbGRlciApO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBvcHRpb25zLmZpbHRlclRoZW1lICE9PSB1bmRlZmluZWQgJiYgdGhpcy5fc2VhcmNoICYmICQubW9iaWxlLnRleHRpbnB1dCApIHtcclxuXHRcdFx0dGhpcy5fc2VhcmNoLnRleHRpbnB1dCggXCJvcHRpb25cIiwgXCJ0aGVtZVwiLCBvcHRpb25zLmZpbHRlclRoZW1lICk7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHJldDtcclxuXHR9LFxyXG5cclxuXHQvLyBUaGUgbGlzdHZpZXcgaW1wbGVtZW50YXRpb24gYWNjb21wYW55aW5nIHRoaXMgZmlsdGVyYWJsZSBiYWNrY29tcGF0IGxheWVyIHdpbGwgY2FsbFxyXG5cdC8vIGZpbHRlcmFibGUucmVmcmVzaCgpIGFmdGVyIGl0J3MgZG9uZSByZWZyZXNoaW5nIHRoZSBsaXN0dmlldyB0byBtYWtlIHN1cmUgdGhlIGZpbHRlcmFibGVcclxuXHQvLyBmaWx0ZXJzIG91dCBhbnkgbmV3IGl0ZW1zIGFkZGVkLiBIb3dldmVyLCB3aGVuIHRoZSBsaXN0dmlldyByZWZyZXNoIGhhcyBiZWVuIGluaXRpYXRlZCBieVxyXG5cdC8vIHRoZSBmaWx0ZXJhYmxlIGl0c2VsZiwgdGhlbiBzdWNoIGZpbHRlcmluZyBoYXMgYWxyZWFkeSB0YWtlbiBwbGFjZSwgYW5kIGNhbGxpbmcgdGhlXHJcblx0Ly8gZmlsdGVyYWJsZSdzIHJlZnJlc2goKSBtZXRob2Qgd2lsbCBjYXVzZSBhbiBpbmZpbml0ZSByZWN1cnNpb24uIFdlIHN0b3AgdGhpcyBieSBzZXR0aW5nIGFcclxuXHQvLyBmbGFnIHRoYXQgd2lsbCBjYXVzZSB0aGUgZmlsdGVyYWJsZSdzIHJlZnJlc2goKSBtZXRob2QgdG8gc2hvcnQtY2lyY3VpdC5cclxuXHRfcmVmcmVzaENoaWxkV2lkZ2V0OiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuX3JlZnJlc2hpbmdDaGlsZFdpZGdldCA9IHRydWU7XHJcblx0XHR0aGlzLl9zdXBlckFwcGx5KCBhcmd1bWVudHMgKTtcclxuXHRcdHRoaXMuX3JlZnJlc2hpbmdDaGlsZFdpZGdldCA9IGZhbHNlO1xyXG5cdH0sXHJcblxyXG5cdHJlZnJlc2g6IGZ1bmN0aW9uKCkge1xyXG5cdFx0aWYgKCAhdGhpcy5fcmVmcmVzaGluZ0NoaWxkV2lkZ2V0ICkge1xyXG5cdFx0XHR0aGlzLl9zdXBlckFwcGx5KCBhcmd1bWVudHMgKTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfZGVzdHJveTogZnVuY3Rpb24oKSB7XHJcblx0XHRpZiAoIHRoaXMuX2lzU2VhcmNoSW50ZXJuYWwoKSApIHtcclxuXHRcdFx0dGhpcy5fc2VhcmNoLnJlbW92ZSgpO1xyXG5cdFx0fVxyXG5cdFx0dGhpcy5fc3VwZXIoKTtcclxuXHR9LFxyXG5cclxuXHRfc3luY1RleHRJbnB1dE9wdGlvbnM6IGZ1bmN0aW9uKCBvcHRpb25zICkge1xyXG5cdFx0dmFyIGlkeCxcclxuXHRcdFx0dGV4dGlucHV0T3B0aW9ucyA9IHt9O1xyXG5cclxuXHRcdC8vIFdlIG9ubHkgc3luYyBvcHRpb25zIGlmIHRoZSBmaWx0ZXJhYmxlJ3MgdGV4dGlucHV0IGlzIG9mIHRoZSBpbnRlcm5hbGx5XHJcblx0XHQvLyBnZW5lcmF0ZWQgdmFyaWV0eSwgcmF0aGVyIHRoYW4gb25lIHNwZWNpZmllZCBieSB0aGUgdXNlci5cclxuXHRcdGlmICggdGhpcy5faXNTZWFyY2hJbnRlcm5hbCgpICYmICQubW9iaWxlLnRleHRpbnB1dCApIHtcclxuXHJcblx0XHRcdC8vIEFwcGx5IG9ubHkgdGhlIG9wdGlvbnMgdW5kZXJzdG9vZCBieSB0ZXh0aW5wdXRcclxuXHRcdFx0Zm9yICggaWR4IGluICQubW9iaWxlLnRleHRpbnB1dC5wcm90b3R5cGUub3B0aW9ucyApIHtcclxuXHRcdFx0XHRpZiAoIG9wdGlvbnNbIGlkeCBdICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdFx0XHRpZiAoIGlkeCA9PT0gXCJ0aGVtZVwiICYmIHRoaXMub3B0aW9ucy5maWx0ZXJUaGVtZSAhPSBudWxsICkge1xyXG5cdFx0XHRcdFx0XHR0ZXh0aW5wdXRPcHRpb25zWyBpZHggXSA9IHRoaXMub3B0aW9ucy5maWx0ZXJUaGVtZTtcclxuXHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdHRleHRpbnB1dE9wdGlvbnNbIGlkeCBdID0gb3B0aW9uc1sgaWR4IF07XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHRcdHRoaXMuX3NlYXJjaC50ZXh0aW5wdXQoIFwib3B0aW9uXCIsIHRleHRpbnB1dE9wdGlvbnMgKTtcclxuXHRcdH1cclxuXHR9XHJcbn0pO1xyXG5cclxuLy8gSW5zdGFudGlhdGUgYSBmaWx0ZXJhYmxlIG9uIGEgbGlzdHZpZXcgdGhhdCBoYXMgdGhlIGRhdGEtZmlsdGVyPVwidHJ1ZVwiIGF0dHJpYnV0ZVxyXG4vLyBUaGlzIGlzIG5vdCBuZWNlc3NhcnkgZm9yIHN0YXRpYyBjb250ZW50LCBiZWNhdXNlIHRoZSBhdXRvLWVuaGFuY2UgdGFrZXMgY2FyZSBvZiBpbnN0YW50aWF0aW5nXHJcbi8vIHRoZSBmaWx0ZXJhYmxlIHVwb24gZW5jb3VudGVyaW5nIGRhdGEtZmlsdGVyPVwidHJ1ZVwiLiBIb3dldmVyLCBiZWNhdXNlIG9mIDEuMy54IGl0IGlzIGV4cGVjdGVkXHJcbi8vIHRoYXQgYSBsaXN0dmlldyB3aXRoIGRhdGEtZmlsdGVyPVwidHJ1ZVwiIHdpbGwgYmUgZmlsdGVyYWJsZSBldmVuIGlmIHlvdSBqdXN0IGluc3RhbnRpYXRlIGFcclxuLy8gbGlzdHZpZXcgb24gaXQuIFRoZSBleHRlbnNpb24gYmVsb3cgZW5zdXJlcyB0aGF0IHRoaXMgY29udGludWVzIHRvIGhhcHBlbiBpbiAxLjQueC5cclxuJC53aWRnZXQoIFwibW9iaWxlLmxpc3R2aWV3XCIsICQubW9iaWxlLmxpc3R2aWV3LCB7XHJcblx0b3B0aW9uczoge1xyXG5cdFx0ZmlsdGVyOiBmYWxzZVxyXG5cdH0sXHJcblx0X2NyZWF0ZTogZnVuY3Rpb24oKSB7XHJcblx0XHRpZiAoIHRoaXMub3B0aW9ucy5maWx0ZXIgPT09IHRydWUgJiZcclxuXHRcdFx0XHQhdGhpcy5lbGVtZW50LmRhdGEoIFwibW9iaWxlLWZpbHRlcmFibGVcIiApICkge1xyXG5cdFx0XHR0aGlzLmVsZW1lbnQuZmlsdGVyYWJsZSgpO1xyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIHRoaXMuX3N1cGVyKCk7XHJcblx0fSxcclxuXHJcblx0cmVmcmVzaDogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgZmlsdGVyYWJsZTtcclxuXHJcblx0XHR0aGlzLl9zdXBlckFwcGx5KCBhcmd1bWVudHMgKTtcclxuXHJcblx0XHRpZiAoIHRoaXMub3B0aW9ucy5maWx0ZXIgPT09IHRydWUgKSB7XHJcblx0XHRcdGZpbHRlcmFibGUgPSB0aGlzLmVsZW1lbnQuZGF0YSggXCJtb2JpbGUtZmlsdGVyYWJsZVwiICk7XHJcblxyXG5cdFx0XHRpZiAoIGZpbHRlcmFibGUgKSB7XHJcblx0XHRcdFx0ZmlsdGVyYWJsZS5yZWZyZXNoKCk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcbn0pO1xyXG5cclxufSkoIGpRdWVyeSApO1xyXG5cclxuLyohXHJcbiAqIGpRdWVyeSBVSSBUYWJzIGZhZGYyYjMxMmEwNTA0MDQzNjQ1MWM2NGJiZmFmNDgxNGJjNjJjNTZcclxuICogaHR0cDovL2pxdWVyeXVpLmNvbVxyXG4gKlxyXG4gKiBDb3B5cmlnaHQgMjAxMyBqUXVlcnkgRm91bmRhdGlvbiBhbmQgb3RoZXIgY29udHJpYnV0b3JzXHJcbiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cclxuICogaHR0cDovL2pxdWVyeS5vcmcvbGljZW5zZVxyXG4gKlxyXG4gKiBodHRwOi8vYXBpLmpxdWVyeXVpLmNvbS90YWJzL1xyXG4gKlxyXG4gKiBEZXBlbmRzOlxyXG4gKlx0anF1ZXJ5LnVpLmNvcmUuanNcclxuICpcdGpxdWVyeS51aS53aWRnZXQuanNcclxuICovXHJcbihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xyXG5cclxudmFyIHRhYklkID0gMCxcclxuXHRyaGFzaCA9IC8jLiokLztcclxuXHJcbmZ1bmN0aW9uIGdldE5leHRUYWJJZCgpIHtcclxuXHRyZXR1cm4gKyt0YWJJZDtcclxufVxyXG5cclxuZnVuY3Rpb24gaXNMb2NhbCggYW5jaG9yICkge1xyXG5cdHJldHVybiBhbmNob3IuaGFzaC5sZW5ndGggPiAxICYmXHJcblx0XHRkZWNvZGVVUklDb21wb25lbnQoIGFuY2hvci5ocmVmLnJlcGxhY2UoIHJoYXNoLCBcIlwiICkgKSA9PT1cclxuXHRcdFx0ZGVjb2RlVVJJQ29tcG9uZW50KCBsb2NhdGlvbi5ocmVmLnJlcGxhY2UoIHJoYXNoLCBcIlwiICkgKTtcclxufVxyXG5cclxuJC53aWRnZXQoIFwidWkudGFic1wiLCB7XHJcblx0dmVyc2lvbjogXCJmYWRmMmIzMTJhMDUwNDA0MzY0NTFjNjRiYmZhZjQ4MTRiYzYyYzU2XCIsXHJcblx0ZGVsYXk6IDMwMCxcclxuXHRvcHRpb25zOiB7XHJcblx0XHRhY3RpdmU6IG51bGwsXHJcblx0XHRjb2xsYXBzaWJsZTogZmFsc2UsXHJcblx0XHRldmVudDogXCJjbGlja1wiLFxyXG5cdFx0aGVpZ2h0U3R5bGU6IFwiY29udGVudFwiLFxyXG5cdFx0aGlkZTogbnVsbCxcclxuXHRcdHNob3c6IG51bGwsXHJcblxyXG5cdFx0Ly8gY2FsbGJhY2tzXHJcblx0XHRhY3RpdmF0ZTogbnVsbCxcclxuXHRcdGJlZm9yZUFjdGl2YXRlOiBudWxsLFxyXG5cdFx0YmVmb3JlTG9hZDogbnVsbCxcclxuXHRcdGxvYWQ6IG51bGxcclxuXHR9LFxyXG5cclxuXHRfY3JlYXRlOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciB0aGF0ID0gdGhpcyxcclxuXHRcdFx0b3B0aW9ucyA9IHRoaXMub3B0aW9ucztcclxuXHJcblx0XHR0aGlzLnJ1bm5pbmcgPSBmYWxzZTtcclxuXHJcblx0XHR0aGlzLmVsZW1lbnRcclxuXHRcdFx0LmFkZENsYXNzKCBcInVpLXRhYnMgdWktd2lkZ2V0IHVpLXdpZGdldC1jb250ZW50IHVpLWNvcm5lci1hbGxcIiApXHJcblx0XHRcdC50b2dnbGVDbGFzcyggXCJ1aS10YWJzLWNvbGxhcHNpYmxlXCIsIG9wdGlvbnMuY29sbGFwc2libGUgKVxyXG5cdFx0XHQvLyBQcmV2ZW50IHVzZXJzIGZyb20gZm9jdXNpbmcgZGlzYWJsZWQgdGFicyB2aWEgY2xpY2tcclxuXHRcdFx0LmRlbGVnYXRlKCBcIi51aS10YWJzLW5hdiA+IGxpXCIsIFwibW91c2Vkb3duXCIgKyB0aGlzLmV2ZW50TmFtZXNwYWNlLCBmdW5jdGlvbiggZXZlbnQgKSB7XHJcblx0XHRcdFx0aWYgKCAkKCB0aGlzICkuaXMoIFwiLnVpLXN0YXRlLWRpc2FibGVkXCIgKSApIHtcclxuXHRcdFx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KVxyXG5cdFx0XHQvLyBzdXBwb3J0OiBJRSA8OVxyXG5cdFx0XHQvLyBQcmV2ZW50aW5nIHRoZSBkZWZhdWx0IGFjdGlvbiBpbiBtb3VzZWRvd24gZG9lc24ndCBwcmV2ZW50IElFXHJcblx0XHRcdC8vIGZyb20gZm9jdXNpbmcgdGhlIGVsZW1lbnQsIHNvIGlmIHRoZSBhbmNob3IgZ2V0cyBmb2N1c2VkLCBibHVyLlxyXG5cdFx0XHQvLyBXZSBkb24ndCBoYXZlIHRvIHdvcnJ5IGFib3V0IGZvY3VzaW5nIHRoZSBwcmV2aW91c2x5IGZvY3VzZWRcclxuXHRcdFx0Ly8gZWxlbWVudCBzaW5jZSBjbGlja2luZyBvbiBhIG5vbi1mb2N1c2FibGUgZWxlbWVudCBzaG91bGQgZm9jdXNcclxuXHRcdFx0Ly8gdGhlIGJvZHkgYW55d2F5LlxyXG5cdFx0XHQuZGVsZWdhdGUoIFwiLnVpLXRhYnMtYW5jaG9yXCIsIFwiZm9jdXNcIiArIHRoaXMuZXZlbnROYW1lc3BhY2UsIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdGlmICggJCggdGhpcyApLmNsb3Nlc3QoIFwibGlcIiApLmlzKCBcIi51aS1zdGF0ZS1kaXNhYmxlZFwiICkgKSB7XHJcblx0XHRcdFx0XHR0aGlzLmJsdXIoKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdHRoaXMuX3Byb2Nlc3NUYWJzKCk7XHJcblx0XHRvcHRpb25zLmFjdGl2ZSA9IHRoaXMuX2luaXRpYWxBY3RpdmUoKTtcclxuXHJcblx0XHQvLyBUYWtlIGRpc2FibGluZyB0YWJzIHZpYSBjbGFzcyBhdHRyaWJ1dGUgZnJvbSBIVE1MXHJcblx0XHQvLyBpbnRvIGFjY291bnQgYW5kIHVwZGF0ZSBvcHRpb24gcHJvcGVybHkuXHJcblx0XHRpZiAoICQuaXNBcnJheSggb3B0aW9ucy5kaXNhYmxlZCApICkge1xyXG5cdFx0XHRvcHRpb25zLmRpc2FibGVkID0gJC51bmlxdWUoIG9wdGlvbnMuZGlzYWJsZWQuY29uY2F0KFxyXG5cdFx0XHRcdCQubWFwKCB0aGlzLnRhYnMuZmlsdGVyKCBcIi51aS1zdGF0ZS1kaXNhYmxlZFwiICksIGZ1bmN0aW9uKCBsaSApIHtcclxuXHRcdFx0XHRcdHJldHVybiB0aGF0LnRhYnMuaW5kZXgoIGxpICk7XHJcblx0XHRcdFx0fSlcclxuXHRcdFx0KSApLnNvcnQoKTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBjaGVjayBmb3IgbGVuZ3RoIGF2b2lkcyBlcnJvciB3aGVuIGluaXRpYWxpemluZyBlbXB0eSBsaXN0XHJcblx0XHRpZiAoIHRoaXMub3B0aW9ucy5hY3RpdmUgIT09IGZhbHNlICYmIHRoaXMuYW5jaG9ycy5sZW5ndGggKSB7XHJcblx0XHRcdHRoaXMuYWN0aXZlID0gdGhpcy5fZmluZEFjdGl2ZSggb3B0aW9ucy5hY3RpdmUgKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHRoaXMuYWN0aXZlID0gJCgpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuX3JlZnJlc2goKTtcclxuXHJcblx0XHRpZiAoIHRoaXMuYWN0aXZlLmxlbmd0aCApIHtcclxuXHRcdFx0dGhpcy5sb2FkKCBvcHRpb25zLmFjdGl2ZSApO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9pbml0aWFsQWN0aXZlOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBhY3RpdmUgPSB0aGlzLm9wdGlvbnMuYWN0aXZlLFxyXG5cdFx0XHRjb2xsYXBzaWJsZSA9IHRoaXMub3B0aW9ucy5jb2xsYXBzaWJsZSxcclxuXHRcdFx0bG9jYXRpb25IYXNoID0gbG9jYXRpb24uaGFzaC5zdWJzdHJpbmcoIDEgKTtcclxuXHJcblx0XHRpZiAoIGFjdGl2ZSA9PT0gbnVsbCApIHtcclxuXHRcdFx0Ly8gY2hlY2sgdGhlIGZyYWdtZW50IGlkZW50aWZpZXIgaW4gdGhlIFVSTFxyXG5cdFx0XHRpZiAoIGxvY2F0aW9uSGFzaCApIHtcclxuXHRcdFx0XHR0aGlzLnRhYnMuZWFjaChmdW5jdGlvbiggaSwgdGFiICkge1xyXG5cdFx0XHRcdFx0aWYgKCAkKCB0YWIgKS5hdHRyKCBcImFyaWEtY29udHJvbHNcIiApID09PSBsb2NhdGlvbkhhc2ggKSB7XHJcblx0XHRcdFx0XHRcdGFjdGl2ZSA9IGk7XHJcblx0XHRcdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gY2hlY2sgZm9yIGEgdGFiIG1hcmtlZCBhY3RpdmUgdmlhIGEgY2xhc3NcclxuXHRcdFx0aWYgKCBhY3RpdmUgPT09IG51bGwgKSB7XHJcblx0XHRcdFx0YWN0aXZlID0gdGhpcy50YWJzLmluZGV4KCB0aGlzLnRhYnMuZmlsdGVyKCBcIi51aS10YWJzLWFjdGl2ZVwiICkgKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gbm8gYWN0aXZlIHRhYiwgc2V0IHRvIGZhbHNlXHJcblx0XHRcdGlmICggYWN0aXZlID09PSBudWxsIHx8IGFjdGl2ZSA9PT0gLTEgKSB7XHJcblx0XHRcdFx0YWN0aXZlID0gdGhpcy50YWJzLmxlbmd0aCA/IDAgOiBmYWxzZTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdC8vIGhhbmRsZSBudW1iZXJzOiBuZWdhdGl2ZSwgb3V0IG9mIHJhbmdlXHJcblx0XHRpZiAoIGFjdGl2ZSAhPT0gZmFsc2UgKSB7XHJcblx0XHRcdGFjdGl2ZSA9IHRoaXMudGFicy5pbmRleCggdGhpcy50YWJzLmVxKCBhY3RpdmUgKSApO1xyXG5cdFx0XHRpZiAoIGFjdGl2ZSA9PT0gLTEgKSB7XHJcblx0XHRcdFx0YWN0aXZlID0gY29sbGFwc2libGUgPyBmYWxzZSA6IDA7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHQvLyBkb24ndCBhbGxvdyBjb2xsYXBzaWJsZTogZmFsc2UgYW5kIGFjdGl2ZTogZmFsc2VcclxuXHRcdGlmICggIWNvbGxhcHNpYmxlICYmIGFjdGl2ZSA9PT0gZmFsc2UgJiYgdGhpcy5hbmNob3JzLmxlbmd0aCApIHtcclxuXHRcdFx0YWN0aXZlID0gMDtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gYWN0aXZlO1xyXG5cdH0sXHJcblxyXG5cdF9nZXRDcmVhdGVFdmVudERhdGE6IGZ1bmN0aW9uKCkge1xyXG5cdFx0cmV0dXJuIHtcclxuXHRcdFx0dGFiOiB0aGlzLmFjdGl2ZSxcclxuXHRcdFx0cGFuZWw6ICF0aGlzLmFjdGl2ZS5sZW5ndGggPyAkKCkgOiB0aGlzLl9nZXRQYW5lbEZvclRhYiggdGhpcy5hY3RpdmUgKVxyXG5cdFx0fTtcclxuXHR9LFxyXG5cclxuXHRfdGFiS2V5ZG93bjogZnVuY3Rpb24oIGV2ZW50ICkge1xyXG5cdFx0dmFyIGZvY3VzZWRUYWIgPSAkKCB0aGlzLmRvY3VtZW50WzBdLmFjdGl2ZUVsZW1lbnQgKS5jbG9zZXN0KCBcImxpXCIgKSxcclxuXHRcdFx0c2VsZWN0ZWRJbmRleCA9IHRoaXMudGFicy5pbmRleCggZm9jdXNlZFRhYiApLFxyXG5cdFx0XHRnb2luZ0ZvcndhcmQgPSB0cnVlO1xyXG5cclxuXHRcdGlmICggdGhpcy5faGFuZGxlUGFnZU5hdiggZXZlbnQgKSApIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdHN3aXRjaCAoIGV2ZW50LmtleUNvZGUgKSB7XHJcblx0XHRcdGNhc2UgJC51aS5rZXlDb2RlLlJJR0hUOlxyXG5cdFx0XHRjYXNlICQudWkua2V5Q29kZS5ET1dOOlxyXG5cdFx0XHRcdHNlbGVjdGVkSW5kZXgrKztcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdFx0Y2FzZSAkLnVpLmtleUNvZGUuVVA6XHJcblx0XHRcdGNhc2UgJC51aS5rZXlDb2RlLkxFRlQ6XHJcblx0XHRcdFx0Z29pbmdGb3J3YXJkID0gZmFsc2U7XHJcblx0XHRcdFx0c2VsZWN0ZWRJbmRleC0tO1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRjYXNlICQudWkua2V5Q29kZS5FTkQ6XHJcblx0XHRcdFx0c2VsZWN0ZWRJbmRleCA9IHRoaXMuYW5jaG9ycy5sZW5ndGggLSAxO1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRjYXNlICQudWkua2V5Q29kZS5IT01FOlxyXG5cdFx0XHRcdHNlbGVjdGVkSW5kZXggPSAwO1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRjYXNlICQudWkua2V5Q29kZS5TUEFDRTpcclxuXHRcdFx0XHQvLyBBY3RpdmF0ZSBvbmx5LCBubyBjb2xsYXBzaW5nXHJcblx0XHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHRjbGVhclRpbWVvdXQoIHRoaXMuYWN0aXZhdGluZyApO1xyXG5cdFx0XHRcdHRoaXMuX2FjdGl2YXRlKCBzZWxlY3RlZEluZGV4ICk7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRjYXNlICQudWkua2V5Q29kZS5FTlRFUjpcclxuXHRcdFx0XHQvLyBUb2dnbGUgKGNhbmNlbCBkZWxheWVkIGFjdGl2YXRpb24sIGFsbG93IGNvbGxhcHNpbmcpXHJcblx0XHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHRjbGVhclRpbWVvdXQoIHRoaXMuYWN0aXZhdGluZyApO1xyXG5cdFx0XHRcdC8vIERldGVybWluZSBpZiB3ZSBzaG91bGQgY29sbGFwc2Ugb3IgYWN0aXZhdGVcclxuXHRcdFx0XHR0aGlzLl9hY3RpdmF0ZSggc2VsZWN0ZWRJbmRleCA9PT0gdGhpcy5vcHRpb25zLmFjdGl2ZSA/IGZhbHNlIDogc2VsZWN0ZWRJbmRleCApO1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0ZGVmYXVsdDpcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gRm9jdXMgdGhlIGFwcHJvcHJpYXRlIHRhYiwgYmFzZWQgb24gd2hpY2gga2V5IHdhcyBwcmVzc2VkXHJcblx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0Y2xlYXJUaW1lb3V0KCB0aGlzLmFjdGl2YXRpbmcgKTtcclxuXHRcdHNlbGVjdGVkSW5kZXggPSB0aGlzLl9mb2N1c05leHRUYWIoIHNlbGVjdGVkSW5kZXgsIGdvaW5nRm9yd2FyZCApO1xyXG5cclxuXHRcdC8vIE5hdmlnYXRpbmcgd2l0aCBjb250cm9sIGtleSB3aWxsIHByZXZlbnQgYXV0b21hdGljIGFjdGl2YXRpb25cclxuXHRcdGlmICggIWV2ZW50LmN0cmxLZXkgKSB7XHJcblx0XHRcdC8vIFVwZGF0ZSBhcmlhLXNlbGVjdGVkIGltbWVkaWF0ZWx5IHNvIHRoYXQgQVQgdGhpbmsgdGhlIHRhYiBpcyBhbHJlYWR5IHNlbGVjdGVkLlxyXG5cdFx0XHQvLyBPdGhlcndpc2UgQVQgbWF5IGNvbmZ1c2UgdGhlIHVzZXIgYnkgc3RhdGluZyB0aGF0IHRoZXkgbmVlZCB0byBhY3RpdmF0ZSB0aGUgdGFiLFxyXG5cdFx0XHQvLyBidXQgdGhlIHRhYiB3aWxsIGFscmVhZHkgYmUgYWN0aXZhdGVkIGJ5IHRoZSB0aW1lIHRoZSBhbm5vdW5jZW1lbnQgZmluaXNoZXMuXHJcblx0XHRcdGZvY3VzZWRUYWIuYXR0ciggXCJhcmlhLXNlbGVjdGVkXCIsIFwiZmFsc2VcIiApO1xyXG5cdFx0XHR0aGlzLnRhYnMuZXEoIHNlbGVjdGVkSW5kZXggKS5hdHRyKCBcImFyaWEtc2VsZWN0ZWRcIiwgXCJ0cnVlXCIgKTtcclxuXHJcblx0XHRcdHRoaXMuYWN0aXZhdGluZyA9IHRoaXMuX2RlbGF5KGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHRoaXMub3B0aW9uKCBcImFjdGl2ZVwiLCBzZWxlY3RlZEluZGV4ICk7XHJcblx0XHRcdH0sIHRoaXMuZGVsYXkgKTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfcGFuZWxLZXlkb3duOiBmdW5jdGlvbiggZXZlbnQgKSB7XHJcblx0XHRpZiAoIHRoaXMuX2hhbmRsZVBhZ2VOYXYoIGV2ZW50ICkgKSB7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBDdHJsK3VwIG1vdmVzIGZvY3VzIHRvIHRoZSBjdXJyZW50IHRhYlxyXG5cdFx0aWYgKCBldmVudC5jdHJsS2V5ICYmIGV2ZW50LmtleUNvZGUgPT09ICQudWkua2V5Q29kZS5VUCApIHtcclxuXHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0dGhpcy5hY3RpdmUuZm9jdXMoKTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHQvLyBBbHQrcGFnZSB1cC9kb3duIG1vdmVzIGZvY3VzIHRvIHRoZSBwcmV2aW91cy9uZXh0IHRhYiAoYW5kIGFjdGl2YXRlcylcclxuXHRfaGFuZGxlUGFnZU5hdjogZnVuY3Rpb24oIGV2ZW50ICkge1xyXG5cdFx0aWYgKCBldmVudC5hbHRLZXkgJiYgZXZlbnQua2V5Q29kZSA9PT0gJC51aS5rZXlDb2RlLlBBR0VfVVAgKSB7XHJcblx0XHRcdHRoaXMuX2FjdGl2YXRlKCB0aGlzLl9mb2N1c05leHRUYWIoIHRoaXMub3B0aW9ucy5hY3RpdmUgLSAxLCBmYWxzZSApICk7XHJcblx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0fVxyXG5cdFx0aWYgKCBldmVudC5hbHRLZXkgJiYgZXZlbnQua2V5Q29kZSA9PT0gJC51aS5rZXlDb2RlLlBBR0VfRE9XTiApIHtcclxuXHRcdFx0dGhpcy5fYWN0aXZhdGUoIHRoaXMuX2ZvY3VzTmV4dFRhYiggdGhpcy5vcHRpb25zLmFjdGl2ZSArIDEsIHRydWUgKSApO1xyXG5cdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfZmluZE5leHRUYWI6IGZ1bmN0aW9uKCBpbmRleCwgZ29pbmdGb3J3YXJkICkge1xyXG5cdFx0dmFyIGxhc3RUYWJJbmRleCA9IHRoaXMudGFicy5sZW5ndGggLSAxO1xyXG5cclxuXHRcdGZ1bmN0aW9uIGNvbnN0cmFpbigpIHtcclxuXHRcdFx0aWYgKCBpbmRleCA+IGxhc3RUYWJJbmRleCApIHtcclxuXHRcdFx0XHRpbmRleCA9IDA7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKCBpbmRleCA8IDAgKSB7XHJcblx0XHRcdFx0aW5kZXggPSBsYXN0VGFiSW5kZXg7XHJcblx0XHRcdH1cclxuXHRcdFx0cmV0dXJuIGluZGV4O1xyXG5cdFx0fVxyXG5cclxuXHRcdHdoaWxlICggJC5pbkFycmF5KCBjb25zdHJhaW4oKSwgdGhpcy5vcHRpb25zLmRpc2FibGVkICkgIT09IC0xICkge1xyXG5cdFx0XHRpbmRleCA9IGdvaW5nRm9yd2FyZCA/IGluZGV4ICsgMSA6IGluZGV4IC0gMTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gaW5kZXg7XHJcblx0fSxcclxuXHJcblx0X2ZvY3VzTmV4dFRhYjogZnVuY3Rpb24oIGluZGV4LCBnb2luZ0ZvcndhcmQgKSB7XHJcblx0XHRpbmRleCA9IHRoaXMuX2ZpbmROZXh0VGFiKCBpbmRleCwgZ29pbmdGb3J3YXJkICk7XHJcblx0XHR0aGlzLnRhYnMuZXEoIGluZGV4ICkuZm9jdXMoKTtcclxuXHRcdHJldHVybiBpbmRleDtcclxuXHR9LFxyXG5cclxuXHRfc2V0T3B0aW9uOiBmdW5jdGlvbigga2V5LCB2YWx1ZSApIHtcclxuXHRcdGlmICgga2V5ID09PSBcImFjdGl2ZVwiICkge1xyXG5cdFx0XHQvLyBfYWN0aXZhdGUoKSB3aWxsIGhhbmRsZSBpbnZhbGlkIHZhbHVlcyBhbmQgdXBkYXRlIHRoaXMub3B0aW9uc1xyXG5cdFx0XHR0aGlzLl9hY3RpdmF0ZSggdmFsdWUgKTtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICgga2V5ID09PSBcImRpc2FibGVkXCIgKSB7XHJcblx0XHRcdC8vIGRvbid0IHVzZSB0aGUgd2lkZ2V0IGZhY3RvcnkncyBkaXNhYmxlZCBoYW5kbGluZ1xyXG5cdFx0XHR0aGlzLl9zZXR1cERpc2FibGVkKCB2YWx1ZSApO1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5fc3VwZXIoIGtleSwgdmFsdWUpO1xyXG5cclxuXHRcdGlmICgga2V5ID09PSBcImNvbGxhcHNpYmxlXCIgKSB7XHJcblx0XHRcdHRoaXMuZWxlbWVudC50b2dnbGVDbGFzcyggXCJ1aS10YWJzLWNvbGxhcHNpYmxlXCIsIHZhbHVlICk7XHJcblx0XHRcdC8vIFNldHRpbmcgY29sbGFwc2libGU6IGZhbHNlIHdoaWxlIGNvbGxhcHNlZDsgb3BlbiBmaXJzdCBwYW5lbFxyXG5cdFx0XHRpZiAoICF2YWx1ZSAmJiB0aGlzLm9wdGlvbnMuYWN0aXZlID09PSBmYWxzZSApIHtcclxuXHRcdFx0XHR0aGlzLl9hY3RpdmF0ZSggMCApO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBrZXkgPT09IFwiZXZlbnRcIiApIHtcclxuXHRcdFx0dGhpcy5fc2V0dXBFdmVudHMoIHZhbHVlICk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBrZXkgPT09IFwiaGVpZ2h0U3R5bGVcIiApIHtcclxuXHRcdFx0dGhpcy5fc2V0dXBIZWlnaHRTdHlsZSggdmFsdWUgKTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfdGFiSWQ6IGZ1bmN0aW9uKCB0YWIgKSB7XHJcblx0XHRyZXR1cm4gdGFiLmF0dHIoIFwiYXJpYS1jb250cm9sc1wiICkgfHwgXCJ1aS10YWJzLVwiICsgZ2V0TmV4dFRhYklkKCk7XHJcblx0fSxcclxuXHJcblx0X3Nhbml0aXplU2VsZWN0b3I6IGZ1bmN0aW9uKCBoYXNoICkge1xyXG5cdFx0cmV0dXJuIGhhc2ggPyBoYXNoLnJlcGxhY2UoIC9bIVwiJCUmJygpKissLlxcLzo7PD0+P0BcXFtcXF1cXF5ge3x9fl0vZywgXCJcXFxcJCZcIiApIDogXCJcIjtcclxuXHR9LFxyXG5cclxuXHRyZWZyZXNoOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBvcHRpb25zID0gdGhpcy5vcHRpb25zLFxyXG5cdFx0XHRsaXMgPSB0aGlzLnRhYmxpc3QuY2hpbGRyZW4oIFwiOmhhcyhhW2hyZWZdKVwiICk7XHJcblxyXG5cdFx0Ly8gZ2V0IGRpc2FibGVkIHRhYnMgZnJvbSBjbGFzcyBhdHRyaWJ1dGUgZnJvbSBIVE1MXHJcblx0XHQvLyB0aGlzIHdpbGwgZ2V0IGNvbnZlcnRlZCB0byBhIGJvb2xlYW4gaWYgbmVlZGVkIGluIF9yZWZyZXNoKClcclxuXHRcdG9wdGlvbnMuZGlzYWJsZWQgPSAkLm1hcCggbGlzLmZpbHRlciggXCIudWktc3RhdGUtZGlzYWJsZWRcIiApLCBmdW5jdGlvbiggdGFiICkge1xyXG5cdFx0XHRyZXR1cm4gbGlzLmluZGV4KCB0YWIgKTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdHRoaXMuX3Byb2Nlc3NUYWJzKCk7XHJcblxyXG5cdFx0Ly8gd2FzIGNvbGxhcHNlZCBvciBubyB0YWJzXHJcblx0XHRpZiAoIG9wdGlvbnMuYWN0aXZlID09PSBmYWxzZSB8fCAhdGhpcy5hbmNob3JzLmxlbmd0aCApIHtcclxuXHRcdFx0b3B0aW9ucy5hY3RpdmUgPSBmYWxzZTtcclxuXHRcdFx0dGhpcy5hY3RpdmUgPSAkKCk7XHJcblx0XHQvLyB3YXMgYWN0aXZlLCBidXQgYWN0aXZlIHRhYiBpcyBnb25lXHJcblx0XHR9IGVsc2UgaWYgKCB0aGlzLmFjdGl2ZS5sZW5ndGggJiYgISQuY29udGFpbnMoIHRoaXMudGFibGlzdFsgMCBdLCB0aGlzLmFjdGl2ZVsgMCBdICkgKSB7XHJcblx0XHRcdC8vIGFsbCByZW1haW5pbmcgdGFicyBhcmUgZGlzYWJsZWRcclxuXHRcdFx0aWYgKCB0aGlzLnRhYnMubGVuZ3RoID09PSBvcHRpb25zLmRpc2FibGVkLmxlbmd0aCApIHtcclxuXHRcdFx0XHRvcHRpb25zLmFjdGl2ZSA9IGZhbHNlO1xyXG5cdFx0XHRcdHRoaXMuYWN0aXZlID0gJCgpO1xyXG5cdFx0XHQvLyBhY3RpdmF0ZSBwcmV2aW91cyB0YWJcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHR0aGlzLl9hY3RpdmF0ZSggdGhpcy5fZmluZE5leHRUYWIoIE1hdGgubWF4KCAwLCBvcHRpb25zLmFjdGl2ZSAtIDEgKSwgZmFsc2UgKSApO1xyXG5cdFx0XHR9XHJcblx0XHQvLyB3YXMgYWN0aXZlLCBhY3RpdmUgdGFiIHN0aWxsIGV4aXN0c1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0Ly8gbWFrZSBzdXJlIGFjdGl2ZSBpbmRleCBpcyBjb3JyZWN0XHJcblx0XHRcdG9wdGlvbnMuYWN0aXZlID0gdGhpcy50YWJzLmluZGV4KCB0aGlzLmFjdGl2ZSApO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuX3JlZnJlc2goKTtcclxuXHR9LFxyXG5cclxuXHRfcmVmcmVzaDogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLl9zZXR1cERpc2FibGVkKCB0aGlzLm9wdGlvbnMuZGlzYWJsZWQgKTtcclxuXHRcdHRoaXMuX3NldHVwRXZlbnRzKCB0aGlzLm9wdGlvbnMuZXZlbnQgKTtcclxuXHRcdHRoaXMuX3NldHVwSGVpZ2h0U3R5bGUoIHRoaXMub3B0aW9ucy5oZWlnaHRTdHlsZSApO1xyXG5cclxuXHRcdHRoaXMudGFicy5ub3QoIHRoaXMuYWN0aXZlICkuYXR0cih7XHJcblx0XHRcdFwiYXJpYS1zZWxlY3RlZFwiOiBcImZhbHNlXCIsXHJcblx0XHRcdHRhYkluZGV4OiAtMVxyXG5cdFx0fSk7XHJcblx0XHR0aGlzLnBhbmVscy5ub3QoIHRoaXMuX2dldFBhbmVsRm9yVGFiKCB0aGlzLmFjdGl2ZSApIClcclxuXHRcdFx0LmhpZGUoKVxyXG5cdFx0XHQuYXR0cih7XHJcblx0XHRcdFx0XCJhcmlhLWV4cGFuZGVkXCI6IFwiZmFsc2VcIixcclxuXHRcdFx0XHRcImFyaWEtaGlkZGVuXCI6IFwidHJ1ZVwiXHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdC8vIE1ha2Ugc3VyZSBvbmUgdGFiIGlzIGluIHRoZSB0YWIgb3JkZXJcclxuXHRcdGlmICggIXRoaXMuYWN0aXZlLmxlbmd0aCApIHtcclxuXHRcdFx0dGhpcy50YWJzLmVxKCAwICkuYXR0ciggXCJ0YWJJbmRleFwiLCAwICk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHR0aGlzLmFjdGl2ZVxyXG5cdFx0XHRcdC5hZGRDbGFzcyggXCJ1aS10YWJzLWFjdGl2ZSB1aS1zdGF0ZS1hY3RpdmVcIiApXHJcblx0XHRcdFx0LmF0dHIoe1xyXG5cdFx0XHRcdFx0XCJhcmlhLXNlbGVjdGVkXCI6IFwidHJ1ZVwiLFxyXG5cdFx0XHRcdFx0dGFiSW5kZXg6IDBcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0dGhpcy5fZ2V0UGFuZWxGb3JUYWIoIHRoaXMuYWN0aXZlIClcclxuXHRcdFx0XHQuc2hvdygpXHJcblx0XHRcdFx0LmF0dHIoe1xyXG5cdFx0XHRcdFx0XCJhcmlhLWV4cGFuZGVkXCI6IFwidHJ1ZVwiLFxyXG5cdFx0XHRcdFx0XCJhcmlhLWhpZGRlblwiOiBcImZhbHNlXCJcclxuXHRcdFx0XHR9KTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfcHJvY2Vzc1RhYnM6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIHRoYXQgPSB0aGlzO1xyXG5cclxuXHRcdHRoaXMudGFibGlzdCA9IHRoaXMuX2dldExpc3QoKVxyXG5cdFx0XHQuYWRkQ2xhc3MoIFwidWktdGFicy1uYXYgdWktaGVscGVyLXJlc2V0IHVpLWhlbHBlci1jbGVhcmZpeCB1aS13aWRnZXQtaGVhZGVyIHVpLWNvcm5lci1hbGxcIiApXHJcblx0XHRcdC5hdHRyKCBcInJvbGVcIiwgXCJ0YWJsaXN0XCIgKTtcclxuXHJcblx0XHR0aGlzLnRhYnMgPSB0aGlzLnRhYmxpc3QuZmluZCggXCI+IGxpOmhhcyhhW2hyZWZdKVwiIClcclxuXHRcdFx0LmFkZENsYXNzKCBcInVpLXN0YXRlLWRlZmF1bHQgdWktY29ybmVyLXRvcFwiIClcclxuXHRcdFx0LmF0dHIoe1xyXG5cdFx0XHRcdHJvbGU6IFwidGFiXCIsXHJcblx0XHRcdFx0dGFiSW5kZXg6IC0xXHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdHRoaXMuYW5jaG9ycyA9IHRoaXMudGFicy5tYXAoZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0cmV0dXJuICQoIFwiYVwiLCB0aGlzIClbIDAgXTtcclxuXHRcdFx0fSlcclxuXHRcdFx0LmFkZENsYXNzKCBcInVpLXRhYnMtYW5jaG9yXCIgKVxyXG5cdFx0XHQuYXR0cih7XHJcblx0XHRcdFx0cm9sZTogXCJwcmVzZW50YXRpb25cIixcclxuXHRcdFx0XHR0YWJJbmRleDogLTFcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0dGhpcy5wYW5lbHMgPSAkKCk7XHJcblxyXG5cdFx0dGhpcy5hbmNob3JzLmVhY2goZnVuY3Rpb24oIGksIGFuY2hvciApIHtcclxuXHRcdFx0dmFyIHNlbGVjdG9yLCBwYW5lbCwgcGFuZWxJZCxcclxuXHRcdFx0XHRhbmNob3JJZCA9ICQoIGFuY2hvciApLnVuaXF1ZUlkKCkuYXR0ciggXCJpZFwiICksXHJcblx0XHRcdFx0dGFiID0gJCggYW5jaG9yICkuY2xvc2VzdCggXCJsaVwiICksXHJcblx0XHRcdFx0b3JpZ2luYWxBcmlhQ29udHJvbHMgPSB0YWIuYXR0ciggXCJhcmlhLWNvbnRyb2xzXCIgKTtcclxuXHJcblx0XHRcdC8vIGlubGluZSB0YWJcclxuXHRcdFx0aWYgKCBpc0xvY2FsKCBhbmNob3IgKSApIHtcclxuXHRcdFx0XHRzZWxlY3RvciA9IGFuY2hvci5oYXNoO1xyXG5cdFx0XHRcdHBhbmVsID0gdGhhdC5lbGVtZW50LmZpbmQoIHRoYXQuX3Nhbml0aXplU2VsZWN0b3IoIHNlbGVjdG9yICkgKTtcclxuXHRcdFx0Ly8gcmVtb3RlIHRhYlxyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdHBhbmVsSWQgPSB0aGF0Ll90YWJJZCggdGFiICk7XHJcblx0XHRcdFx0c2VsZWN0b3IgPSBcIiNcIiArIHBhbmVsSWQ7XHJcblx0XHRcdFx0cGFuZWwgPSB0aGF0LmVsZW1lbnQuZmluZCggc2VsZWN0b3IgKTtcclxuXHRcdFx0XHRpZiAoICFwYW5lbC5sZW5ndGggKSB7XHJcblx0XHRcdFx0XHRwYW5lbCA9IHRoYXQuX2NyZWF0ZVBhbmVsKCBwYW5lbElkICk7XHJcblx0XHRcdFx0XHRwYW5lbC5pbnNlcnRBZnRlciggdGhhdC5wYW5lbHNbIGkgLSAxIF0gfHwgdGhhdC50YWJsaXN0ICk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdHBhbmVsLmF0dHIoIFwiYXJpYS1saXZlXCIsIFwicG9saXRlXCIgKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aWYgKCBwYW5lbC5sZW5ndGgpIHtcclxuXHRcdFx0XHR0aGF0LnBhbmVscyA9IHRoYXQucGFuZWxzLmFkZCggcGFuZWwgKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAoIG9yaWdpbmFsQXJpYUNvbnRyb2xzICkge1xyXG5cdFx0XHRcdHRhYi5kYXRhKCBcInVpLXRhYnMtYXJpYS1jb250cm9sc1wiLCBvcmlnaW5hbEFyaWFDb250cm9scyApO1xyXG5cdFx0XHR9XHJcblx0XHRcdHRhYi5hdHRyKHtcclxuXHRcdFx0XHRcImFyaWEtY29udHJvbHNcIjogc2VsZWN0b3Iuc3Vic3RyaW5nKCAxICksXHJcblx0XHRcdFx0XCJhcmlhLWxhYmVsbGVkYnlcIjogYW5jaG9ySWRcclxuXHRcdFx0fSk7XHJcblx0XHRcdHBhbmVsLmF0dHIoIFwiYXJpYS1sYWJlbGxlZGJ5XCIsIGFuY2hvcklkICk7XHJcblx0XHR9KTtcclxuXHJcblx0XHR0aGlzLnBhbmVsc1xyXG5cdFx0XHQuYWRkQ2xhc3MoIFwidWktdGFicy1wYW5lbCB1aS13aWRnZXQtY29udGVudCB1aS1jb3JuZXItYm90dG9tXCIgKVxyXG5cdFx0XHQuYXR0ciggXCJyb2xlXCIsIFwidGFicGFuZWxcIiApO1xyXG5cdH0sXHJcblxyXG5cdC8vIGFsbG93IG92ZXJyaWRpbmcgaG93IHRvIGZpbmQgdGhlIGxpc3QgZm9yIHJhcmUgdXNhZ2Ugc2NlbmFyaW9zICgjNzcxNSlcclxuXHRfZ2V0TGlzdDogZnVuY3Rpb24oKSB7XHJcblx0XHRyZXR1cm4gdGhpcy5lbGVtZW50LmZpbmQoIFwib2wsdWxcIiApLmVxKCAwICk7XHJcblx0fSxcclxuXHJcblx0X2NyZWF0ZVBhbmVsOiBmdW5jdGlvbiggaWQgKSB7XHJcblx0XHRyZXR1cm4gJCggXCI8ZGl2PlwiIClcclxuXHRcdFx0LmF0dHIoIFwiaWRcIiwgaWQgKVxyXG5cdFx0XHQuYWRkQ2xhc3MoIFwidWktdGFicy1wYW5lbCB1aS13aWRnZXQtY29udGVudCB1aS1jb3JuZXItYm90dG9tXCIgKVxyXG5cdFx0XHQuZGF0YSggXCJ1aS10YWJzLWRlc3Ryb3lcIiwgdHJ1ZSApO1xyXG5cdH0sXHJcblxyXG5cdF9zZXR1cERpc2FibGVkOiBmdW5jdGlvbiggZGlzYWJsZWQgKSB7XHJcblx0XHRpZiAoICQuaXNBcnJheSggZGlzYWJsZWQgKSApIHtcclxuXHRcdFx0aWYgKCAhZGlzYWJsZWQubGVuZ3RoICkge1xyXG5cdFx0XHRcdGRpc2FibGVkID0gZmFsc2U7XHJcblx0XHRcdH0gZWxzZSBpZiAoIGRpc2FibGVkLmxlbmd0aCA9PT0gdGhpcy5hbmNob3JzLmxlbmd0aCApIHtcclxuXHRcdFx0XHRkaXNhYmxlZCA9IHRydWU7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHQvLyBkaXNhYmxlIHRhYnNcclxuXHRcdGZvciAoIHZhciBpID0gMCwgbGk7ICggbGkgPSB0aGlzLnRhYnNbIGkgXSApOyBpKysgKSB7XHJcblx0XHRcdGlmICggZGlzYWJsZWQgPT09IHRydWUgfHwgJC5pbkFycmF5KCBpLCBkaXNhYmxlZCApICE9PSAtMSApIHtcclxuXHRcdFx0XHQkKCBsaSApXHJcblx0XHRcdFx0XHQuYWRkQ2xhc3MoIFwidWktc3RhdGUtZGlzYWJsZWRcIiApXHJcblx0XHRcdFx0XHQuYXR0ciggXCJhcmlhLWRpc2FibGVkXCIsIFwidHJ1ZVwiICk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0JCggbGkgKVxyXG5cdFx0XHRcdFx0LnJlbW92ZUNsYXNzKCBcInVpLXN0YXRlLWRpc2FibGVkXCIgKVxyXG5cdFx0XHRcdFx0LnJlbW92ZUF0dHIoIFwiYXJpYS1kaXNhYmxlZFwiICk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLm9wdGlvbnMuZGlzYWJsZWQgPSBkaXNhYmxlZDtcclxuXHR9LFxyXG5cclxuXHRfc2V0dXBFdmVudHM6IGZ1bmN0aW9uKCBldmVudCApIHtcclxuXHRcdHZhciBldmVudHMgPSB7XHJcblx0XHRcdGNsaWNrOiBmdW5jdGlvbiggZXZlbnQgKSB7XHJcblx0XHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0fVxyXG5cdFx0fTtcclxuXHRcdGlmICggZXZlbnQgKSB7XHJcblx0XHRcdCQuZWFjaCggZXZlbnQuc3BsaXQoXCIgXCIpLCBmdW5jdGlvbiggaW5kZXgsIGV2ZW50TmFtZSApIHtcclxuXHRcdFx0XHRldmVudHNbIGV2ZW50TmFtZSBdID0gXCJfZXZlbnRIYW5kbGVyXCI7XHJcblx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuX29mZiggdGhpcy5hbmNob3JzLmFkZCggdGhpcy50YWJzICkuYWRkKCB0aGlzLnBhbmVscyApICk7XHJcblx0XHR0aGlzLl9vbiggdGhpcy5hbmNob3JzLCBldmVudHMgKTtcclxuXHRcdHRoaXMuX29uKCB0aGlzLnRhYnMsIHsga2V5ZG93bjogXCJfdGFiS2V5ZG93blwiIH0gKTtcclxuXHRcdHRoaXMuX29uKCB0aGlzLnBhbmVscywgeyBrZXlkb3duOiBcIl9wYW5lbEtleWRvd25cIiB9ICk7XHJcblxyXG5cdFx0dGhpcy5fZm9jdXNhYmxlKCB0aGlzLnRhYnMgKTtcclxuXHRcdHRoaXMuX2hvdmVyYWJsZSggdGhpcy50YWJzICk7XHJcblx0fSxcclxuXHJcblx0X3NldHVwSGVpZ2h0U3R5bGU6IGZ1bmN0aW9uKCBoZWlnaHRTdHlsZSApIHtcclxuXHRcdHZhciBtYXhIZWlnaHQsXHJcblx0XHRcdHBhcmVudCA9IHRoaXMuZWxlbWVudC5wYXJlbnQoKTtcclxuXHJcblx0XHRpZiAoIGhlaWdodFN0eWxlID09PSBcImZpbGxcIiApIHtcclxuXHRcdFx0bWF4SGVpZ2h0ID0gcGFyZW50LmhlaWdodCgpO1xyXG5cdFx0XHRtYXhIZWlnaHQgLT0gdGhpcy5lbGVtZW50Lm91dGVySGVpZ2h0KCkgLSB0aGlzLmVsZW1lbnQuaGVpZ2h0KCk7XHJcblxyXG5cdFx0XHR0aGlzLmVsZW1lbnQuc2libGluZ3MoIFwiOnZpc2libGVcIiApLmVhY2goZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0dmFyIGVsZW0gPSAkKCB0aGlzICksXHJcblx0XHRcdFx0XHRwb3NpdGlvbiA9IGVsZW0uY3NzKCBcInBvc2l0aW9uXCIgKTtcclxuXHJcblx0XHRcdFx0aWYgKCBwb3NpdGlvbiA9PT0gXCJhYnNvbHV0ZVwiIHx8IHBvc2l0aW9uID09PSBcImZpeGVkXCIgKSB7XHJcblx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdG1heEhlaWdodCAtPSBlbGVtLm91dGVySGVpZ2h0KCB0cnVlICk7XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0dGhpcy5lbGVtZW50LmNoaWxkcmVuKCkubm90KCB0aGlzLnBhbmVscyApLmVhY2goZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0bWF4SGVpZ2h0IC09ICQoIHRoaXMgKS5vdXRlckhlaWdodCggdHJ1ZSApO1xyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdHRoaXMucGFuZWxzLmVhY2goZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0JCggdGhpcyApLmhlaWdodCggTWF0aC5tYXgoIDAsIG1heEhlaWdodCAtXHJcblx0XHRcdFx0XHQkKCB0aGlzICkuaW5uZXJIZWlnaHQoKSArICQoIHRoaXMgKS5oZWlnaHQoKSApICk7XHJcblx0XHRcdH0pXHJcblx0XHRcdC5jc3MoIFwib3ZlcmZsb3dcIiwgXCJhdXRvXCIgKTtcclxuXHRcdH0gZWxzZSBpZiAoIGhlaWdodFN0eWxlID09PSBcImF1dG9cIiApIHtcclxuXHRcdFx0bWF4SGVpZ2h0ID0gMDtcclxuXHRcdFx0dGhpcy5wYW5lbHMuZWFjaChmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRtYXhIZWlnaHQgPSBNYXRoLm1heCggbWF4SGVpZ2h0LCAkKCB0aGlzICkuaGVpZ2h0KCBcIlwiICkuaGVpZ2h0KCkgKTtcclxuXHRcdFx0fSkuaGVpZ2h0KCBtYXhIZWlnaHQgKTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfZXZlbnRIYW5kbGVyOiBmdW5jdGlvbiggZXZlbnQgKSB7XHJcblx0XHR2YXIgb3B0aW9ucyA9IHRoaXMub3B0aW9ucyxcclxuXHRcdFx0YWN0aXZlID0gdGhpcy5hY3RpdmUsXHJcblx0XHRcdGFuY2hvciA9ICQoIGV2ZW50LmN1cnJlbnRUYXJnZXQgKSxcclxuXHRcdFx0dGFiID0gYW5jaG9yLmNsb3Nlc3QoIFwibGlcIiApLFxyXG5cdFx0XHRjbGlja2VkSXNBY3RpdmUgPSB0YWJbIDAgXSA9PT0gYWN0aXZlWyAwIF0sXHJcblx0XHRcdGNvbGxhcHNpbmcgPSBjbGlja2VkSXNBY3RpdmUgJiYgb3B0aW9ucy5jb2xsYXBzaWJsZSxcclxuXHRcdFx0dG9TaG93ID0gY29sbGFwc2luZyA/ICQoKSA6IHRoaXMuX2dldFBhbmVsRm9yVGFiKCB0YWIgKSxcclxuXHRcdFx0dG9IaWRlID0gIWFjdGl2ZS5sZW5ndGggPyAkKCkgOiB0aGlzLl9nZXRQYW5lbEZvclRhYiggYWN0aXZlICksXHJcblx0XHRcdGV2ZW50RGF0YSA9IHtcclxuXHRcdFx0XHRvbGRUYWI6IGFjdGl2ZSxcclxuXHRcdFx0XHRvbGRQYW5lbDogdG9IaWRlLFxyXG5cdFx0XHRcdG5ld1RhYjogY29sbGFwc2luZyA/ICQoKSA6IHRhYixcclxuXHRcdFx0XHRuZXdQYW5lbDogdG9TaG93XHJcblx0XHRcdH07XHJcblxyXG5cdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHJcblx0XHRpZiAoIHRhYi5oYXNDbGFzcyggXCJ1aS1zdGF0ZS1kaXNhYmxlZFwiICkgfHxcclxuXHRcdFx0XHQvLyB0YWIgaXMgYWxyZWFkeSBsb2FkaW5nXHJcblx0XHRcdFx0dGFiLmhhc0NsYXNzKCBcInVpLXRhYnMtbG9hZGluZ1wiICkgfHxcclxuXHRcdFx0XHQvLyBjYW4ndCBzd2l0Y2ggZHVybmluZyBhbiBhbmltYXRpb25cclxuXHRcdFx0XHR0aGlzLnJ1bm5pbmcgfHxcclxuXHRcdFx0XHQvLyBjbGljayBvbiBhY3RpdmUgaGVhZGVyLCBidXQgbm90IGNvbGxhcHNpYmxlXHJcblx0XHRcdFx0KCBjbGlja2VkSXNBY3RpdmUgJiYgIW9wdGlvbnMuY29sbGFwc2libGUgKSB8fFxyXG5cdFx0XHRcdC8vIGFsbG93IGNhbmNlbGluZyBhY3RpdmF0aW9uXHJcblx0XHRcdFx0KCB0aGlzLl90cmlnZ2VyKCBcImJlZm9yZUFjdGl2YXRlXCIsIGV2ZW50LCBldmVudERhdGEgKSA9PT0gZmFsc2UgKSApIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdG9wdGlvbnMuYWN0aXZlID0gY29sbGFwc2luZyA/IGZhbHNlIDogdGhpcy50YWJzLmluZGV4KCB0YWIgKTtcclxuXHJcblx0XHR0aGlzLmFjdGl2ZSA9IGNsaWNrZWRJc0FjdGl2ZSA/ICQoKSA6IHRhYjtcclxuXHRcdGlmICggdGhpcy54aHIgKSB7XHJcblx0XHRcdHRoaXMueGhyLmFib3J0KCk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCAhdG9IaWRlLmxlbmd0aCAmJiAhdG9TaG93Lmxlbmd0aCApIHtcclxuXHRcdFx0JC5lcnJvciggXCJqUXVlcnkgVUkgVGFiczogTWlzbWF0Y2hpbmcgZnJhZ21lbnQgaWRlbnRpZmllci5cIiApO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggdG9TaG93Lmxlbmd0aCApIHtcclxuXHRcdFx0dGhpcy5sb2FkKCB0aGlzLnRhYnMuaW5kZXgoIHRhYiApLCBldmVudCApO1xyXG5cdFx0fVxyXG5cdFx0dGhpcy5fdG9nZ2xlKCBldmVudCwgZXZlbnREYXRhICk7XHJcblx0fSxcclxuXHJcblx0Ly8gaGFuZGxlcyBzaG93L2hpZGUgZm9yIHNlbGVjdGluZyB0YWJzXHJcblx0X3RvZ2dsZTogZnVuY3Rpb24oIGV2ZW50LCBldmVudERhdGEgKSB7XHJcblx0XHR2YXIgdGhhdCA9IHRoaXMsXHJcblx0XHRcdHRvU2hvdyA9IGV2ZW50RGF0YS5uZXdQYW5lbCxcclxuXHRcdFx0dG9IaWRlID0gZXZlbnREYXRhLm9sZFBhbmVsO1xyXG5cclxuXHRcdHRoaXMucnVubmluZyA9IHRydWU7XHJcblxyXG5cdFx0ZnVuY3Rpb24gY29tcGxldGUoKSB7XHJcblx0XHRcdHRoYXQucnVubmluZyA9IGZhbHNlO1xyXG5cdFx0XHR0aGF0Ll90cmlnZ2VyKCBcImFjdGl2YXRlXCIsIGV2ZW50LCBldmVudERhdGEgKTtcclxuXHRcdH1cclxuXHJcblx0XHRmdW5jdGlvbiBzaG93KCkge1xyXG5cdFx0XHRldmVudERhdGEubmV3VGFiLmNsb3Nlc3QoIFwibGlcIiApLmFkZENsYXNzKCBcInVpLXRhYnMtYWN0aXZlIHVpLXN0YXRlLWFjdGl2ZVwiICk7XHJcblxyXG5cdFx0XHRpZiAoIHRvU2hvdy5sZW5ndGggJiYgdGhhdC5vcHRpb25zLnNob3cgKSB7XHJcblx0XHRcdFx0dGhhdC5fc2hvdyggdG9TaG93LCB0aGF0Lm9wdGlvbnMuc2hvdywgY29tcGxldGUgKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHR0b1Nob3cuc2hvdygpO1xyXG5cdFx0XHRcdGNvbXBsZXRlKCk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHQvLyBzdGFydCBvdXQgYnkgaGlkaW5nLCB0aGVuIHNob3dpbmcsIHRoZW4gY29tcGxldGluZ1xyXG5cdFx0aWYgKCB0b0hpZGUubGVuZ3RoICYmIHRoaXMub3B0aW9ucy5oaWRlICkge1xyXG5cdFx0XHR0aGlzLl9oaWRlKCB0b0hpZGUsIHRoaXMub3B0aW9ucy5oaWRlLCBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRldmVudERhdGEub2xkVGFiLmNsb3Nlc3QoIFwibGlcIiApLnJlbW92ZUNsYXNzKCBcInVpLXRhYnMtYWN0aXZlIHVpLXN0YXRlLWFjdGl2ZVwiICk7XHJcblx0XHRcdFx0c2hvdygpO1xyXG5cdFx0XHR9KTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdGV2ZW50RGF0YS5vbGRUYWIuY2xvc2VzdCggXCJsaVwiICkucmVtb3ZlQ2xhc3MoIFwidWktdGFicy1hY3RpdmUgdWktc3RhdGUtYWN0aXZlXCIgKTtcclxuXHRcdFx0dG9IaWRlLmhpZGUoKTtcclxuXHRcdFx0c2hvdygpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRvSGlkZS5hdHRyKHtcclxuXHRcdFx0XCJhcmlhLWV4cGFuZGVkXCI6IFwiZmFsc2VcIixcclxuXHRcdFx0XCJhcmlhLWhpZGRlblwiOiBcInRydWVcIlxyXG5cdFx0fSk7XHJcblx0XHRldmVudERhdGEub2xkVGFiLmF0dHIoIFwiYXJpYS1zZWxlY3RlZFwiLCBcImZhbHNlXCIgKTtcclxuXHRcdC8vIElmIHdlJ3JlIHN3aXRjaGluZyB0YWJzLCByZW1vdmUgdGhlIG9sZCB0YWIgZnJvbSB0aGUgdGFiIG9yZGVyLlxyXG5cdFx0Ly8gSWYgd2UncmUgb3BlbmluZyBmcm9tIGNvbGxhcHNlZCBzdGF0ZSwgcmVtb3ZlIHRoZSBwcmV2aW91cyB0YWIgZnJvbSB0aGUgdGFiIG9yZGVyLlxyXG5cdFx0Ly8gSWYgd2UncmUgY29sbGFwc2luZywgdGhlbiBrZWVwIHRoZSBjb2xsYXBzaW5nIHRhYiBpbiB0aGUgdGFiIG9yZGVyLlxyXG5cdFx0aWYgKCB0b1Nob3cubGVuZ3RoICYmIHRvSGlkZS5sZW5ndGggKSB7XHJcblx0XHRcdGV2ZW50RGF0YS5vbGRUYWIuYXR0ciggXCJ0YWJJbmRleFwiLCAtMSApO1xyXG5cdFx0fSBlbHNlIGlmICggdG9TaG93Lmxlbmd0aCApIHtcclxuXHRcdFx0dGhpcy50YWJzLmZpbHRlcihmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRyZXR1cm4gJCggdGhpcyApLmF0dHIoIFwidGFiSW5kZXhcIiApID09PSAwO1xyXG5cdFx0XHR9KVxyXG5cdFx0XHQuYXR0ciggXCJ0YWJJbmRleFwiLCAtMSApO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRvU2hvdy5hdHRyKHtcclxuXHRcdFx0XCJhcmlhLWV4cGFuZGVkXCI6IFwidHJ1ZVwiLFxyXG5cdFx0XHRcImFyaWEtaGlkZGVuXCI6IFwiZmFsc2VcIlxyXG5cdFx0fSk7XHJcblx0XHRldmVudERhdGEubmV3VGFiLmF0dHIoe1xyXG5cdFx0XHRcImFyaWEtc2VsZWN0ZWRcIjogXCJ0cnVlXCIsXHJcblx0XHRcdHRhYkluZGV4OiAwXHJcblx0XHR9KTtcclxuXHR9LFxyXG5cclxuXHRfYWN0aXZhdGU6IGZ1bmN0aW9uKCBpbmRleCApIHtcclxuXHRcdHZhciBhbmNob3IsXHJcblx0XHRcdGFjdGl2ZSA9IHRoaXMuX2ZpbmRBY3RpdmUoIGluZGV4ICk7XHJcblxyXG5cdFx0Ly8gdHJ5aW5nIHRvIGFjdGl2YXRlIHRoZSBhbHJlYWR5IGFjdGl2ZSBwYW5lbFxyXG5cdFx0aWYgKCBhY3RpdmVbIDAgXSA9PT0gdGhpcy5hY3RpdmVbIDAgXSApIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIHRyeWluZyB0byBjb2xsYXBzZSwgc2ltdWxhdGUgYSBjbGljayBvbiB0aGUgY3VycmVudCBhY3RpdmUgaGVhZGVyXHJcblx0XHRpZiAoICFhY3RpdmUubGVuZ3RoICkge1xyXG5cdFx0XHRhY3RpdmUgPSB0aGlzLmFjdGl2ZTtcclxuXHRcdH1cclxuXHJcblx0XHRhbmNob3IgPSBhY3RpdmUuZmluZCggXCIudWktdGFicy1hbmNob3JcIiApWyAwIF07XHJcblx0XHR0aGlzLl9ldmVudEhhbmRsZXIoe1xyXG5cdFx0XHR0YXJnZXQ6IGFuY2hvcixcclxuXHRcdFx0Y3VycmVudFRhcmdldDogYW5jaG9yLFxyXG5cdFx0XHRwcmV2ZW50RGVmYXVsdDogJC5ub29wXHJcblx0XHR9KTtcclxuXHR9LFxyXG5cclxuXHRfZmluZEFjdGl2ZTogZnVuY3Rpb24oIGluZGV4ICkge1xyXG5cdFx0cmV0dXJuIGluZGV4ID09PSBmYWxzZSA/ICQoKSA6IHRoaXMudGFicy5lcSggaW5kZXggKTtcclxuXHR9LFxyXG5cclxuXHRfZ2V0SW5kZXg6IGZ1bmN0aW9uKCBpbmRleCApIHtcclxuXHRcdC8vIG1ldGEtZnVuY3Rpb24gdG8gZ2l2ZSB1c2VycyBvcHRpb24gdG8gcHJvdmlkZSBhIGhyZWYgc3RyaW5nIGluc3RlYWQgb2YgYSBudW1lcmljYWwgaW5kZXguXHJcblx0XHRpZiAoIHR5cGVvZiBpbmRleCA9PT0gXCJzdHJpbmdcIiApIHtcclxuXHRcdFx0aW5kZXggPSB0aGlzLmFuY2hvcnMuaW5kZXgoIHRoaXMuYW5jaG9ycy5maWx0ZXIoIFwiW2hyZWYkPSdcIiArIGluZGV4ICsgXCInXVwiICkgKTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gaW5kZXg7XHJcblx0fSxcclxuXHJcblx0X2Rlc3Ryb3k6IGZ1bmN0aW9uKCkge1xyXG5cdFx0aWYgKCB0aGlzLnhociApIHtcclxuXHRcdFx0dGhpcy54aHIuYWJvcnQoKTtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLmVsZW1lbnQucmVtb3ZlQ2xhc3MoIFwidWktdGFicyB1aS13aWRnZXQgdWktd2lkZ2V0LWNvbnRlbnQgdWktY29ybmVyLWFsbCB1aS10YWJzLWNvbGxhcHNpYmxlXCIgKTtcclxuXHJcblx0XHR0aGlzLnRhYmxpc3RcclxuXHRcdFx0LnJlbW92ZUNsYXNzKCBcInVpLXRhYnMtbmF2IHVpLWhlbHBlci1yZXNldCB1aS1oZWxwZXItY2xlYXJmaXggdWktd2lkZ2V0LWhlYWRlciB1aS1jb3JuZXItYWxsXCIgKVxyXG5cdFx0XHQucmVtb3ZlQXR0ciggXCJyb2xlXCIgKTtcclxuXHJcblx0XHR0aGlzLmFuY2hvcnNcclxuXHRcdFx0LnJlbW92ZUNsYXNzKCBcInVpLXRhYnMtYW5jaG9yXCIgKVxyXG5cdFx0XHQucmVtb3ZlQXR0ciggXCJyb2xlXCIgKVxyXG5cdFx0XHQucmVtb3ZlQXR0ciggXCJ0YWJJbmRleFwiIClcclxuXHRcdFx0LnJlbW92ZVVuaXF1ZUlkKCk7XHJcblxyXG5cdFx0dGhpcy50YWJzLmFkZCggdGhpcy5wYW5lbHMgKS5lYWNoKGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRpZiAoICQuZGF0YSggdGhpcywgXCJ1aS10YWJzLWRlc3Ryb3lcIiApICkge1xyXG5cdFx0XHRcdCQoIHRoaXMgKS5yZW1vdmUoKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHQkKCB0aGlzIClcclxuXHRcdFx0XHRcdC5yZW1vdmVDbGFzcyggXCJ1aS1zdGF0ZS1kZWZhdWx0IHVpLXN0YXRlLWFjdGl2ZSB1aS1zdGF0ZS1kaXNhYmxlZCBcIiArXHJcblx0XHRcdFx0XHRcdFwidWktY29ybmVyLXRvcCB1aS1jb3JuZXItYm90dG9tIHVpLXdpZGdldC1jb250ZW50IHVpLXRhYnMtYWN0aXZlIHVpLXRhYnMtcGFuZWxcIiApXHJcblx0XHRcdFx0XHQucmVtb3ZlQXR0ciggXCJ0YWJJbmRleFwiIClcclxuXHRcdFx0XHRcdC5yZW1vdmVBdHRyKCBcImFyaWEtbGl2ZVwiIClcclxuXHRcdFx0XHRcdC5yZW1vdmVBdHRyKCBcImFyaWEtYnVzeVwiIClcclxuXHRcdFx0XHRcdC5yZW1vdmVBdHRyKCBcImFyaWEtc2VsZWN0ZWRcIiApXHJcblx0XHRcdFx0XHQucmVtb3ZlQXR0ciggXCJhcmlhLWxhYmVsbGVkYnlcIiApXHJcblx0XHRcdFx0XHQucmVtb3ZlQXR0ciggXCJhcmlhLWhpZGRlblwiIClcclxuXHRcdFx0XHRcdC5yZW1vdmVBdHRyKCBcImFyaWEtZXhwYW5kZWRcIiApXHJcblx0XHRcdFx0XHQucmVtb3ZlQXR0ciggXCJyb2xlXCIgKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblxyXG5cdFx0dGhpcy50YWJzLmVhY2goZnVuY3Rpb24oKSB7XHJcblx0XHRcdHZhciBsaSA9ICQoIHRoaXMgKSxcclxuXHRcdFx0XHRwcmV2ID0gbGkuZGF0YSggXCJ1aS10YWJzLWFyaWEtY29udHJvbHNcIiApO1xyXG5cdFx0XHRpZiAoIHByZXYgKSB7XHJcblx0XHRcdFx0bGlcclxuXHRcdFx0XHRcdC5hdHRyKCBcImFyaWEtY29udHJvbHNcIiwgcHJldiApXHJcblx0XHRcdFx0XHQucmVtb3ZlRGF0YSggXCJ1aS10YWJzLWFyaWEtY29udHJvbHNcIiApO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdGxpLnJlbW92ZUF0dHIoIFwiYXJpYS1jb250cm9sc1wiICk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cclxuXHRcdHRoaXMucGFuZWxzLnNob3coKTtcclxuXHJcblx0XHRpZiAoIHRoaXMub3B0aW9ucy5oZWlnaHRTdHlsZSAhPT0gXCJjb250ZW50XCIgKSB7XHJcblx0XHRcdHRoaXMucGFuZWxzLmNzcyggXCJoZWlnaHRcIiwgXCJcIiApO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdGVuYWJsZTogZnVuY3Rpb24oIGluZGV4ICkge1xyXG5cdFx0dmFyIGRpc2FibGVkID0gdGhpcy5vcHRpb25zLmRpc2FibGVkO1xyXG5cdFx0aWYgKCBkaXNhYmxlZCA9PT0gZmFsc2UgKSB7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIGluZGV4ID09PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdGRpc2FibGVkID0gZmFsc2U7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRpbmRleCA9IHRoaXMuX2dldEluZGV4KCBpbmRleCApO1xyXG5cdFx0XHRpZiAoICQuaXNBcnJheSggZGlzYWJsZWQgKSApIHtcclxuXHRcdFx0XHRkaXNhYmxlZCA9ICQubWFwKCBkaXNhYmxlZCwgZnVuY3Rpb24oIG51bSApIHtcclxuXHRcdFx0XHRcdHJldHVybiBudW0gIT09IGluZGV4ID8gbnVtIDogbnVsbDtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRkaXNhYmxlZCA9ICQubWFwKCB0aGlzLnRhYnMsIGZ1bmN0aW9uKCBsaSwgbnVtICkge1xyXG5cdFx0XHRcdFx0cmV0dXJuIG51bSAhPT0gaW5kZXggPyBudW0gOiBudWxsO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHR0aGlzLl9zZXR1cERpc2FibGVkKCBkaXNhYmxlZCApO1xyXG5cdH0sXHJcblxyXG5cdGRpc2FibGU6IGZ1bmN0aW9uKCBpbmRleCApIHtcclxuXHRcdHZhciBkaXNhYmxlZCA9IHRoaXMub3B0aW9ucy5kaXNhYmxlZDtcclxuXHRcdGlmICggZGlzYWJsZWQgPT09IHRydWUgKSB7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIGluZGV4ID09PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdGRpc2FibGVkID0gdHJ1ZTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdGluZGV4ID0gdGhpcy5fZ2V0SW5kZXgoIGluZGV4ICk7XHJcblx0XHRcdGlmICggJC5pbkFycmF5KCBpbmRleCwgZGlzYWJsZWQgKSAhPT0gLTEgKSB7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmICggJC5pc0FycmF5KCBkaXNhYmxlZCApICkge1xyXG5cdFx0XHRcdGRpc2FibGVkID0gJC5tZXJnZSggWyBpbmRleCBdLCBkaXNhYmxlZCApLnNvcnQoKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRkaXNhYmxlZCA9IFsgaW5kZXggXTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0dGhpcy5fc2V0dXBEaXNhYmxlZCggZGlzYWJsZWQgKTtcclxuXHR9LFxyXG5cclxuXHRsb2FkOiBmdW5jdGlvbiggaW5kZXgsIGV2ZW50ICkge1xyXG5cdFx0aW5kZXggPSB0aGlzLl9nZXRJbmRleCggaW5kZXggKTtcclxuXHRcdHZhciB0aGF0ID0gdGhpcyxcclxuXHRcdFx0dGFiID0gdGhpcy50YWJzLmVxKCBpbmRleCApLFxyXG5cdFx0XHRhbmNob3IgPSB0YWIuZmluZCggXCIudWktdGFicy1hbmNob3JcIiApLFxyXG5cdFx0XHRwYW5lbCA9IHRoaXMuX2dldFBhbmVsRm9yVGFiKCB0YWIgKSxcclxuXHRcdFx0ZXZlbnREYXRhID0ge1xyXG5cdFx0XHRcdHRhYjogdGFiLFxyXG5cdFx0XHRcdHBhbmVsOiBwYW5lbFxyXG5cdFx0XHR9O1xyXG5cclxuXHRcdC8vIG5vdCByZW1vdGVcclxuXHRcdGlmICggaXNMb2NhbCggYW5jaG9yWyAwIF0gKSApIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMueGhyID0gJC5hamF4KCB0aGlzLl9hamF4U2V0dGluZ3MoIGFuY2hvciwgZXZlbnQsIGV2ZW50RGF0YSApICk7XHJcblxyXG5cdFx0Ly8gc3VwcG9ydDogalF1ZXJ5IDwxLjhcclxuXHRcdC8vIGpRdWVyeSA8MS44IHJldHVybnMgZmFsc2UgaWYgdGhlIHJlcXVlc3QgaXMgY2FuY2VsZWQgaW4gYmVmb3JlU2VuZCxcclxuXHRcdC8vIGJ1dCBhcyBvZiAxLjgsICQuYWpheCgpIGFsd2F5cyByZXR1cm5zIGEganFYSFIgb2JqZWN0LlxyXG5cdFx0aWYgKCB0aGlzLnhociAmJiB0aGlzLnhoci5zdGF0dXNUZXh0ICE9PSBcImNhbmNlbGVkXCIgKSB7XHJcblx0XHRcdHRhYi5hZGRDbGFzcyggXCJ1aS10YWJzLWxvYWRpbmdcIiApO1xyXG5cdFx0XHRwYW5lbC5hdHRyKCBcImFyaWEtYnVzeVwiLCBcInRydWVcIiApO1xyXG5cclxuXHRcdFx0dGhpcy54aHJcclxuXHRcdFx0XHQuc3VjY2VzcyhmdW5jdGlvbiggcmVzcG9uc2UgKSB7XHJcblx0XHRcdFx0XHQvLyBzdXBwb3J0OiBqUXVlcnkgPDEuOFxyXG5cdFx0XHRcdFx0Ly8gaHR0cDovL2J1Z3MuanF1ZXJ5LmNvbS90aWNrZXQvMTE3NzhcclxuXHRcdFx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHRcdHBhbmVsLmh0bWwoIHJlc3BvbnNlICk7XHJcblx0XHRcdFx0XHRcdHRoYXQuX3RyaWdnZXIoIFwibG9hZFwiLCBldmVudCwgZXZlbnREYXRhICk7XHJcblx0XHRcdFx0XHR9LCAxICk7XHJcblx0XHRcdFx0fSlcclxuXHRcdFx0XHQuY29tcGxldGUoZnVuY3Rpb24oIGpxWEhSLCBzdGF0dXMgKSB7XHJcblx0XHRcdFx0XHQvLyBzdXBwb3J0OiBqUXVlcnkgPDEuOFxyXG5cdFx0XHRcdFx0Ly8gaHR0cDovL2J1Z3MuanF1ZXJ5LmNvbS90aWNrZXQvMTE3NzhcclxuXHRcdFx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHRcdGlmICggc3RhdHVzID09PSBcImFib3J0XCIgKSB7XHJcblx0XHRcdFx0XHRcdFx0dGhhdC5wYW5lbHMuc3RvcCggZmFsc2UsIHRydWUgKTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdFx0dGFiLnJlbW92ZUNsYXNzKCBcInVpLXRhYnMtbG9hZGluZ1wiICk7XHJcblx0XHRcdFx0XHRcdHBhbmVsLnJlbW92ZUF0dHIoIFwiYXJpYS1idXN5XCIgKTtcclxuXHJcblx0XHRcdFx0XHRcdGlmICgganFYSFIgPT09IHRoYXQueGhyICkge1xyXG5cdFx0XHRcdFx0XHRcdGRlbGV0ZSB0aGF0LnhocjtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fSwgMSApO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9hamF4U2V0dGluZ3M6IGZ1bmN0aW9uKCBhbmNob3IsIGV2ZW50LCBldmVudERhdGEgKSB7XHJcblx0XHR2YXIgdGhhdCA9IHRoaXM7XHJcblx0XHRyZXR1cm4ge1xyXG5cdFx0XHR1cmw6IGFuY2hvci5hdHRyKCBcImhyZWZcIiApLFxyXG5cdFx0XHRiZWZvcmVTZW5kOiBmdW5jdGlvbigganFYSFIsIHNldHRpbmdzICkge1xyXG5cdFx0XHRcdHJldHVybiB0aGF0Ll90cmlnZ2VyKCBcImJlZm9yZUxvYWRcIiwgZXZlbnQsXHJcblx0XHRcdFx0XHQkLmV4dGVuZCggeyBqcVhIUiA6IGpxWEhSLCBhamF4U2V0dGluZ3M6IHNldHRpbmdzIH0sIGV2ZW50RGF0YSApICk7XHJcblx0XHRcdH1cclxuXHRcdH07XHJcblx0fSxcclxuXHJcblx0X2dldFBhbmVsRm9yVGFiOiBmdW5jdGlvbiggdGFiICkge1xyXG5cdFx0dmFyIGlkID0gJCggdGFiICkuYXR0ciggXCJhcmlhLWNvbnRyb2xzXCIgKTtcclxuXHRcdHJldHVybiB0aGlzLmVsZW1lbnQuZmluZCggdGhpcy5fc2FuaXRpemVTZWxlY3RvciggXCIjXCIgKyBpZCApICk7XHJcblx0fVxyXG59KTtcclxuXHJcbn0pKCBqUXVlcnkgKTtcclxuXHJcbihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xyXG5cclxufSkoIGpRdWVyeSApO1xyXG5cclxuKGZ1bmN0aW9uKCAkLCB3aW5kb3cgKSB7XHJcblxyXG5cdCQubW9iaWxlLmlvc29yaWVudGF0aW9uZml4RW5hYmxlZCA9IHRydWU7XHJcblxyXG5cdC8vIFRoaXMgZml4IGFkZHJlc3NlcyBhbiBpT1MgYnVnLCBzbyByZXR1cm4gZWFybHkgaWYgdGhlIFVBIGNsYWltcyBpdCdzIHNvbWV0aGluZyBlbHNlLlxyXG5cdHZhciB1YSA9IG5hdmlnYXRvci51c2VyQWdlbnQsXHJcblx0XHR6b29tLFxyXG5cdFx0ZXZ0LCB4LCB5LCB6LCBhaWc7XHJcblx0aWYgKCAhKCAvaVBob25lfGlQYWR8aVBvZC8udGVzdCggbmF2aWdhdG9yLnBsYXRmb3JtICkgJiYgL09TIFsxLTVdX1swLTlfXSogbGlrZSBNYWMgT1MgWC9pLnRlc3QoIHVhICkgJiYgdWEuaW5kZXhPZiggXCJBcHBsZVdlYktpdFwiICkgPiAtMSApICkge1xyXG5cdFx0JC5tb2JpbGUuaW9zb3JpZW50YXRpb25maXhFbmFibGVkID0gZmFsc2U7XHJcblx0XHRyZXR1cm47XHJcblx0fVxyXG5cclxuXHR6b29tID0gJC5tb2JpbGUuem9vbTtcclxuXHJcblx0ZnVuY3Rpb24gY2hlY2tUaWx0KCBlICkge1xyXG5cdFx0ZXZ0ID0gZS5vcmlnaW5hbEV2ZW50O1xyXG5cdFx0YWlnID0gZXZ0LmFjY2VsZXJhdGlvbkluY2x1ZGluZ0dyYXZpdHk7XHJcblxyXG5cdFx0eCA9IE1hdGguYWJzKCBhaWcueCApO1xyXG5cdFx0eSA9IE1hdGguYWJzKCBhaWcueSApO1xyXG5cdFx0eiA9IE1hdGguYWJzKCBhaWcueiApO1xyXG5cclxuXHRcdC8vIElmIHBvcnRyYWl0IG9yaWVudGF0aW9uIGFuZCBpbiBvbmUgb2YgdGhlIGRhbmdlciB6b25lc1xyXG5cdFx0aWYgKCAhd2luZG93Lm9yaWVudGF0aW9uICYmICggeCA+IDcgfHwgKCAoIHogPiA2ICYmIHkgPCA4IHx8IHogPCA4ICYmIHkgPiA2ICkgJiYgeCA+IDUgKSApICkge1xyXG5cdFx0XHRcdGlmICggem9vbS5lbmFibGVkICkge1xyXG5cdFx0XHRcdFx0em9vbS5kaXNhYmxlKCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0fVx0ZWxzZSBpZiAoICF6b29tLmVuYWJsZWQgKSB7XHJcblx0XHRcdFx0em9vbS5lbmFibGUoKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdCQubW9iaWxlLmRvY3VtZW50Lm9uKCBcIm1vYmlsZWluaXRcIiwgZnVuY3Rpb24oKSB7XHJcblx0XHRpZiAoICQubW9iaWxlLmlvc29yaWVudGF0aW9uZml4RW5hYmxlZCApIHtcclxuXHRcdFx0JC5tb2JpbGUud2luZG93XHJcblx0XHRcdFx0LmJpbmQoIFwib3JpZW50YXRpb25jaGFuZ2UuaW9zb3JpZW50YXRpb25maXhcIiwgem9vbS5lbmFibGUgKVxyXG5cdFx0XHRcdC5iaW5kKCBcImRldmljZW1vdGlvbi5pb3NvcmllbnRhdGlvbmZpeFwiLCBjaGVja1RpbHQgKTtcclxuXHRcdH1cclxuXHR9KTtcclxuXHJcbn0oIGpRdWVyeSwgdGhpcyApKTtcclxuXHJcbihmdW5jdGlvbiggJCwgd2luZG93LCB1bmRlZmluZWQgKSB7XHJcblx0dmFyXHQkaHRtbCA9ICQoIFwiaHRtbFwiICksXHJcblx0XHQkd2luZG93ID0gJC5tb2JpbGUud2luZG93O1xyXG5cclxuXHQvL3JlbW92ZSBpbml0aWFsIGJ1aWxkIGNsYXNzIChvbmx5IHByZXNlbnQgb24gZmlyc3QgcGFnZXNob3cpXHJcblx0ZnVuY3Rpb24gaGlkZVJlbmRlcmluZ0NsYXNzKCkge1xyXG5cdFx0JGh0bWwucmVtb3ZlQ2xhc3MoIFwidWktbW9iaWxlLXJlbmRlcmluZ1wiICk7XHJcblx0fVxyXG5cclxuXHQvLyB0cmlnZ2VyIG1vYmlsZWluaXQgZXZlbnQgLSB1c2VmdWwgaG9vayBmb3IgY29uZmlndXJpbmcgJC5tb2JpbGUgc2V0dGluZ3MgYmVmb3JlIHRoZXkncmUgdXNlZFxyXG5cdCQoIHdpbmRvdy5kb2N1bWVudCApLnRyaWdnZXIoIFwibW9iaWxlaW5pdFwiICk7XHJcblxyXG5cdC8vIHN1cHBvcnQgY29uZGl0aW9uc1xyXG5cdC8vIGlmIGRldmljZSBzdXBwb3J0IGNvbmRpdGlvbihzKSBhcmVuJ3QgbWV0LCBsZWF2ZSB0aGluZ3MgYXMgdGhleSBhcmUgLT4gYSBiYXNpYywgdXNhYmxlIGV4cGVyaWVuY2UsXHJcblx0Ly8gb3RoZXJ3aXNlLCBwcm9jZWVkIHdpdGggdGhlIGVuaGFuY2VtZW50c1xyXG5cdGlmICggISQubW9iaWxlLmdyYWRlQSgpICkge1xyXG5cdFx0cmV0dXJuO1xyXG5cdH1cclxuXHJcblx0Ly8gb3ZlcnJpZGUgYWpheEVuYWJsZWQgb24gcGxhdGZvcm1zIHRoYXQgaGF2ZSBrbm93biBjb25mbGljdHMgd2l0aCBoYXNoIGhpc3RvcnkgdXBkYXRlc1xyXG5cdC8vIG9yIGdlbmVyYWxseSB3b3JrIGJldHRlciBicm93c2luZyBpbiByZWd1bGFyIGh0dHAgZm9yIGZ1bGwgcGFnZSByZWZyZXNoZXMgKEJCNSwgT3BlcmEgTWluaSlcclxuXHRpZiAoICQubW9iaWxlLmFqYXhCbGFja2xpc3QgKSB7XHJcblx0XHQkLm1vYmlsZS5hamF4RW5hYmxlZCA9IGZhbHNlO1xyXG5cdH1cclxuXHJcblx0Ly8gQWRkIG1vYmlsZSwgaW5pdGlhbCBsb2FkIFwicmVuZGVyaW5nXCIgY2xhc3NlcyB0byBkb2NFbFxyXG5cdCRodG1sLmFkZENsYXNzKCBcInVpLW1vYmlsZSB1aS1tb2JpbGUtcmVuZGVyaW5nXCIgKTtcclxuXHJcblx0Ly8gVGhpcyBpcyBhIGZhbGxiYWNrLiBJZiBhbnl0aGluZyBnb2VzIHdyb25nIChKUyBlcnJvcnMsIGV0YyksIG9yIGV2ZW50cyBkb24ndCBmaXJlLFxyXG5cdC8vIHRoaXMgZW5zdXJlcyB0aGUgcmVuZGVyaW5nIGNsYXNzIGlzIHJlbW92ZWQgYWZ0ZXIgNSBzZWNvbmRzLCBzbyBjb250ZW50IGlzIHZpc2libGUgYW5kIGFjY2Vzc2libGVcclxuXHRzZXRUaW1lb3V0KCBoaWRlUmVuZGVyaW5nQ2xhc3MsIDUwMDAgKTtcclxuXHJcblx0JC5leHRlbmQoICQubW9iaWxlLCB7XHJcblx0XHQvLyBmaW5kIGFuZCBlbmhhbmNlIHRoZSBwYWdlcyBpbiB0aGUgZG9tIGFuZCB0cmFuc2l0aW9uIHRvIHRoZSBmaXJzdCBwYWdlLlxyXG5cdFx0aW5pdGlhbGl6ZVBhZ2U6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHQvLyBmaW5kIHByZXNlbnQgcGFnZXNcclxuXHRcdFx0dmFyIHBhdGggPSAkLm1vYmlsZS5wYXRoLFxyXG5cdFx0XHRcdCRwYWdlcyA9ICQoIFwiOmpxbURhdGEocm9sZT0ncGFnZScpLCA6anFtRGF0YShyb2xlPSdkaWFsb2cnKVwiICksXHJcblx0XHRcdFx0aGFzaCA9IHBhdGguc3RyaXBIYXNoKCBwYXRoLnN0cmlwUXVlcnlQYXJhbXMocGF0aC5wYXJzZUxvY2F0aW9uKCkuaGFzaCkgKSxcclxuXHRcdFx0XHR0aGVMb2NhdGlvbiA9ICQubW9iaWxlLnBhdGgucGFyc2VMb2NhdGlvbigpLFxyXG5cdFx0XHRcdGhhc2hQYWdlID0gaGFzaCA/IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCBoYXNoICkgOiB1bmRlZmluZWQ7XHJcblxyXG5cdFx0XHQvLyBpZiBubyBwYWdlcyBhcmUgZm91bmQsIGNyZWF0ZSBvbmUgd2l0aCBib2R5J3MgaW5uZXIgaHRtbFxyXG5cdFx0XHRpZiAoICEkcGFnZXMubGVuZ3RoICkge1xyXG5cdFx0XHRcdCRwYWdlcyA9ICQoIFwiYm9keVwiICkud3JhcElubmVyKCBcIjxkaXYgZGF0YS1cIiArICQubW9iaWxlLm5zICsgXCJyb2xlPSdwYWdlJz48L2Rpdj5cIiApLmNoaWxkcmVuKCAwICk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIGFkZCBkaWFsb2dzLCBzZXQgZGF0YS11cmwgYXR0cnNcclxuXHRcdFx0JHBhZ2VzLmVhY2goZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0dmFyICR0aGlzID0gJCggdGhpcyApO1xyXG5cclxuXHRcdFx0XHQvLyB1bmxlc3MgdGhlIGRhdGEgdXJsIGlzIGFscmVhZHkgc2V0IHNldCBpdCB0byB0aGUgcGF0aG5hbWVcclxuXHRcdFx0XHRpZiAoICEkdGhpc1sgMCBdLmdldEF0dHJpYnV0ZSggXCJkYXRhLVwiICsgJC5tb2JpbGUubnMgKyBcInVybFwiICkgKSB7XHJcblx0XHRcdFx0XHQkdGhpcy5hdHRyKCBcImRhdGEtXCIgKyAkLm1vYmlsZS5ucyArIFwidXJsXCIsICR0aGlzLmF0dHIoIFwiaWRcIiApIHx8XHJcblx0XHRcdFx0XHRcdHBhdGguY29udmVydFVybFRvRGF0YVVybCggdGhlTG9jYXRpb24ucGF0aG5hbWUgKyB0aGVMb2NhdGlvbi5zZWFyY2ggKSApO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHQvLyBkZWZpbmUgZmlyc3QgcGFnZSBpbiBkb20gY2FzZSBvbmUgYmFja3Mgb3V0IHRvIHRoZSBkaXJlY3Rvcnkgcm9vdCAobm90IGFsd2F5cyB0aGUgZmlyc3QgcGFnZSB2aXNpdGVkLCBidXQgZGVmaW5lZCBhcyBmYWxsYmFjaylcclxuXHRcdFx0JC5tb2JpbGUuZmlyc3RQYWdlID0gJHBhZ2VzLmZpcnN0KCk7XHJcblxyXG5cdFx0XHQvLyBkZWZpbmUgcGFnZSBjb250YWluZXJcclxuXHRcdFx0JC5tb2JpbGUucGFnZUNvbnRhaW5lciA9ICQubW9iaWxlLmZpcnN0UGFnZVxyXG5cdFx0XHRcdC5wYXJlbnQoKVxyXG5cdFx0XHRcdC5hZGRDbGFzcyggXCJ1aS1tb2JpbGUtdmlld3BvcnRcIiApXHJcblx0XHRcdFx0LnBhZ2Vjb250YWluZXIoKTtcclxuXHJcblx0XHRcdC8vIGluaXRpYWxpemUgbmF2aWdhdGlvbiBldmVudHMgbm93LCBhZnRlciBtb2JpbGVpbml0IGhhcyBvY2N1cnJlZCBhbmQgdGhlIHBhZ2UgY29udGFpbmVyXHJcblx0XHRcdC8vIGhhcyBiZWVuIGNyZWF0ZWQgYnV0IGJlZm9yZSB0aGUgcmVzdCBvZiB0aGUgbGlicmFyeSBpcyBhbGVydGVkIHRvIHRoYXQgZmFjdFxyXG5cdFx0XHQkLm1vYmlsZS5uYXZyZWFkeURlZmVycmVkLnJlc29sdmUoKTtcclxuXHJcblx0XHRcdC8vIGFsZXJ0IGxpc3RlbmVycyB0aGF0IHRoZSBwYWdlY29udGFpbmVyIGhhcyBiZWVuIGRldGVybWluZWQgZm9yIGJpbmRpbmdcclxuXHRcdFx0Ly8gdG8gZXZlbnRzIHRyaWdnZXJlZCBvbiBpdFxyXG5cdFx0XHQkd2luZG93LnRyaWdnZXIoIFwicGFnZWNvbnRhaW5lcmNyZWF0ZVwiICk7XHJcblxyXG5cdFx0XHQvLyBjdWUgcGFnZSBsb2FkaW5nIG1lc3NhZ2VcclxuXHRcdFx0JC5tb2JpbGUubG9hZGluZyggXCJzaG93XCIgKTtcclxuXHJcblx0XHRcdC8vcmVtb3ZlIGluaXRpYWwgYnVpbGQgY2xhc3MgKG9ubHkgcHJlc2VudCBvbiBmaXJzdCBwYWdlc2hvdylcclxuXHRcdFx0aGlkZVJlbmRlcmluZ0NsYXNzKCk7XHJcblxyXG5cdFx0XHQvLyBpZiBoYXNoY2hhbmdlIGxpc3RlbmluZyBpcyBkaXNhYmxlZCwgdGhlcmUncyBubyBoYXNoIGRlZXBsaW5rLFxyXG5cdFx0XHQvLyB0aGUgaGFzaCBpcyBub3QgdmFsaWQgKGNvbnRhaW5zIG1vcmUgdGhhbiBvbmUgIyBvciBkb2VzIG5vdCBzdGFydCB3aXRoICMpXHJcblx0XHRcdC8vIG9yIHRoZXJlIGlzIG5vIHBhZ2Ugd2l0aCB0aGF0IGhhc2gsIGNoYW5nZSB0byB0aGUgZmlyc3QgcGFnZSBpbiB0aGUgRE9NXHJcblx0XHRcdC8vIFJlbWVtYmVyLCBob3dldmVyLCB0aGF0IHRoZSBoYXNoIGNhbiBhbHNvIGJlIGEgcGF0aCFcclxuXHRcdFx0aWYgKCAhICggJC5tb2JpbGUuaGFzaExpc3RlbmluZ0VuYWJsZWQgJiZcclxuXHRcdFx0XHQkLm1vYmlsZS5wYXRoLmlzSGFzaFZhbGlkKCBsb2NhdGlvbi5oYXNoICkgJiZcclxuXHRcdFx0XHQoICQoIGhhc2hQYWdlICkuaXMoIFwiOmpxbURhdGEocm9sZT0ncGFnZScpXCIgKSB8fFxyXG5cdFx0XHRcdFx0JC5tb2JpbGUucGF0aC5pc1BhdGgoIGhhc2ggKSB8fFxyXG5cdFx0XHRcdFx0aGFzaCA9PT0gJC5tb2JpbGUuZGlhbG9nSGFzaEtleSApICkgKSB7XHJcblxyXG5cdFx0XHRcdC8vIG1ha2Ugc3VyZSB0byBzZXQgaW5pdGlhbCBwb3BzdGF0ZSBzdGF0ZSBpZiBpdCBleGlzdHNcclxuXHRcdFx0XHQvLyBzbyB0aGF0IG5hdmlnYXRpb24gYmFjayB0byB0aGUgaW5pdGlhbCBwYWdlIHdvcmtzIHByb3Blcmx5XHJcblx0XHRcdFx0aWYgKCAkLmV2ZW50LnNwZWNpYWwubmF2aWdhdGUuaXNQdXNoU3RhdGVFbmFibGVkKCkgKSB7XHJcblx0XHRcdFx0XHQkLm1vYmlsZS5uYXZpZ2F0ZS5uYXZpZ2F0b3Iuc3F1YXNoKCBwYXRoLnBhcnNlTG9jYXRpb24oKS5ocmVmICk7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHQkLm1vYmlsZS5jaGFuZ2VQYWdlKCAkLm1vYmlsZS5maXJzdFBhZ2UsIHtcclxuXHRcdFx0XHRcdHRyYW5zaXRpb246IFwibm9uZVwiLFxyXG5cdFx0XHRcdFx0cmV2ZXJzZTogdHJ1ZSxcclxuXHRcdFx0XHRcdGNoYW5nZUhhc2g6IGZhbHNlLFxyXG5cdFx0XHRcdFx0ZnJvbUhhc2hDaGFuZ2U6IHRydWVcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHQvLyB0cmlnZ2VyIGhhc2hjaGFuZ2Ugb3IgbmF2aWdhdGUgdG8gc3F1YXNoIGFuZCByZWNvcmQgdGhlIGNvcnJlY3RcclxuXHRcdFx0XHQvLyBoaXN0b3J5IGVudHJ5IGZvciBhbiBpbml0aWFsIGhhc2ggcGF0aFxyXG5cdFx0XHRcdGlmICggISQuZXZlbnQuc3BlY2lhbC5uYXZpZ2F0ZS5pc1B1c2hTdGF0ZUVuYWJsZWQoKSApIHtcclxuXHRcdFx0XHRcdCR3aW5kb3cudHJpZ2dlciggXCJoYXNoY2hhbmdlXCIsIFt0cnVlXSApO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHQvLyBUT0RPIGZpZ3VyZSBvdXQgaG93IHRvIHNpbXBsaWZ5IHRoaXMgaW50ZXJhY3Rpb24gd2l0aCB0aGUgaW5pdGlhbCBoaXN0b3J5IGVudHJ5XHJcblx0XHRcdFx0XHQvLyBhdCB0aGUgYm90dG9tIGpzL25hdmlnYXRlL25hdmlnYXRlLmpzXHJcblx0XHRcdFx0XHQkLm1vYmlsZS5uYXZpZ2F0ZS5oaXN0b3J5LnN0YWNrID0gW107XHJcblx0XHRcdFx0XHQkLm1vYmlsZS5uYXZpZ2F0ZSggJC5tb2JpbGUucGF0aC5pc1BhdGgoIGxvY2F0aW9uLmhhc2ggKSA/IGxvY2F0aW9uLmhhc2ggOiBsb2NhdGlvbi5ocmVmICk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fSk7XHJcblxyXG5cdCQoZnVuY3Rpb24oKSB7XHJcblx0XHQvL1J1biBpbmxpbmVTVkcgc3VwcG9ydCB0ZXN0XHJcblx0XHQkLnN1cHBvcnQuaW5saW5lU1ZHKCk7XHJcblxyXG5cdFx0Ly8gY2hlY2sgd2hpY2ggc2Nyb2xsVG9wIHZhbHVlIHNob3VsZCBiZSB1c2VkIGJ5IHNjcm9sbGluZyB0byAxIGltbWVkaWF0ZWx5IGF0IGRvbXJlYWR5XHJcblx0XHQvLyB0aGVuIGNoZWNrIHdoYXQgdGhlIHNjcm9sbCB0b3AgaXMuIEFuZHJvaWQgd2lsbCByZXBvcnQgMC4uLiBvdGhlcnMgMVxyXG5cdFx0Ly8gbm90ZSB0aGF0IHRoaXMgaW5pdGlhbCBzY3JvbGwgd29uJ3QgaGlkZSB0aGUgYWRkcmVzcyBiYXIuIEl0J3MganVzdCBmb3IgdGhlIGNoZWNrLlxyXG5cclxuXHRcdC8vIGhpZGUgaU9TIGJyb3dzZXIgY2hyb21lIG9uIGxvYWQgaWYgaGlkZVVybEJhciBpcyB0cnVlIHRoaXMgaXMgdG8gdHJ5IGFuZCBkbyBpdCBhcyBzb29uIGFzIHBvc3NpYmxlXHJcblx0XHRpZiAoICQubW9iaWxlLmhpZGVVcmxCYXIgKSB7XHJcblx0XHRcdHdpbmRvdy5zY3JvbGxUbyggMCwgMSApO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIGlmIGRlZmF1bHRIb21lU2Nyb2xsIGhhc24ndCBiZWVuIHNldCB5ZXQsIHNlZSBpZiBzY3JvbGxUb3AgaXMgMVxyXG5cdFx0Ly8gaXQgc2hvdWxkIGJlIDEgaW4gbW9zdCBicm93c2VycywgYnV0IGFuZHJvaWQgdHJlYXRzIDEgYXMgMCAoZm9yIGhpZGluZyBhZGRyIGJhcilcclxuXHRcdC8vIHNvIGlmIGl0J3MgMSwgdXNlIDAgZnJvbSBub3cgb25cclxuXHRcdCQubW9iaWxlLmRlZmF1bHRIb21lU2Nyb2xsID0gKCAhJC5zdXBwb3J0LnNjcm9sbFRvcCB8fCAkLm1vYmlsZS53aW5kb3cuc2Nyb2xsVG9wKCkgPT09IDEgKSA/IDAgOiAxO1xyXG5cclxuXHRcdC8vZG9tLXJlYWR5IGluaXRzXHJcblx0XHRpZiAoICQubW9iaWxlLmF1dG9Jbml0aWFsaXplUGFnZSApIHtcclxuXHRcdFx0JC5tb2JpbGUuaW5pdGlhbGl6ZVBhZ2UoKTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyB3aW5kb3cgbG9hZCBldmVudFxyXG5cdFx0Ly8gaGlkZSBpT1MgYnJvd3NlciBjaHJvbWUgb24gbG9hZCBpZiBoaWRlVXJsQmFyIGlzIHRydWUgdGhpcyBpcyBhcyBmYWxsIGJhY2sgaW5jYXNlIHdlIHdlcmUgdG9vIGVhcmx5IGJlZm9yZVxyXG5cdFx0aWYgKCAkLm1vYmlsZS5oaWRlVXJsQmFyICkge1xyXG5cdFx0XHQkd2luZG93LmxvYWQoICQubW9iaWxlLnNpbGVudFNjcm9sbCApO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggISQuc3VwcG9ydC5jc3NQb2ludGVyRXZlbnRzICkge1xyXG5cdFx0XHQvLyBJRSBhbmQgT3BlcmEgZG9uJ3Qgc3VwcG9ydCBDU1MgcG9pbnRlci1ldmVudHM6IG5vbmUgdGhhdCB3ZSB1c2UgdG8gZGlzYWJsZSBsaW5rLWJhc2VkIGJ1dHRvbnNcclxuXHRcdFx0Ly8gYnkgYWRkaW5nIHRoZSAndWktZGlzYWJsZWQnIGNsYXNzIHRvIHRoZW0uIFVzaW5nIGEgSmF2YVNjcmlwdCB3b3JrYXJvdW5kIGZvciB0aG9zZSBicm93c2VyLlxyXG5cdFx0XHQvLyBodHRwczovL2dpdGh1Yi5jb20vanF1ZXJ5L2pxdWVyeS1tb2JpbGUvaXNzdWVzLzM1NThcclxuXHJcblx0XHRcdC8vIERFUFJFQ0FURUQgYXMgb2YgMS40LjAgLSByZW1vdmUgdWktZGlzYWJsZWQgYWZ0ZXIgMS40LjAgcmVsZWFzZVxyXG5cdFx0XHQvLyBvbmx5IHVpLXN0YXRlLWRpc2FibGVkIHNob3VsZCBiZSBwcmVzZW50IHRoZXJlYWZ0ZXJcclxuXHRcdFx0JC5tb2JpbGUuZG9jdW1lbnQuZGVsZWdhdGUoIFwiLnVpLXN0YXRlLWRpc2FibGVkLC51aS1kaXNhYmxlZFwiLCBcInZjbGlja1wiLFxyXG5cdFx0XHRcdGZ1bmN0aW9uKCBlICkge1xyXG5cdFx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHRcdFx0ZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdCk7XHJcblx0XHR9XHJcblx0fSk7XHJcbn0oIGpRdWVyeSwgdGhpcyApKTtcclxuXHJcblxyXG59KSk7XHJcblxufS5jYWxsKHdpbmRvdykpO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vZXh0ZXJuYWwvanF1ZXJ5L3NjcmlwdHMvanF1ZXJ5Lm1vYmlsZS5qc1xuLy8gbW9kdWxlIGlkID0gMVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvLy8gPHJlZmVyZW5jZSB0eXBlcz1cImJhY2tib25lXCIgLz5cclxuXHJcbm5hbWVzcGFjZSBDRFAuRnJhbWV3b3JrIHtcclxuXHJcbiAgICAvLyBCYWNrYm9uZSBzaG9ydCBjdXRcclxuICAgIGV4cG9ydCB0eXBlICBNb2RlbCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPSBCYWNrYm9uZS5Nb2RlbDtcclxuICAgIGV4cG9ydCBjb25zdCBNb2RlbCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPSBCYWNrYm9uZS5Nb2RlbDtcclxuICAgIGV4cG9ydCB0eXBlICBDb2xsZWN0aW9uPFRNb2RlbCBleHRlbmRzIE1vZGVsPiAgICAgICAgICAgPSBCYWNrYm9uZS5Db2xsZWN0aW9uPFRNb2RlbD47XHJcbiAgICBleHBvcnQgY29uc3QgQ29sbGVjdGlvbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID0gQmFja2JvbmUuQ29sbGVjdGlvbjtcclxuICAgIGV4cG9ydCB0eXBlICBWaWV3PFRNb2RlbCBleHRlbmRzIE1vZGVsID0gTW9kZWw+ICAgICAgICAgPSBCYWNrYm9uZS5WaWV3PFRNb2RlbD47XHJcbiAgICBleHBvcnQgY29uc3QgVmlldyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID0gQmFja2JvbmUuVmlldztcclxuICAgIGV4cG9ydCB0eXBlICBFdmVudHMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPSBCYWNrYm9uZS5FdmVudHM7XHJcbiAgICBleHBvcnQgY29uc3QgRXZlbnRzICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID0gQmFja2JvbmUuRXZlbnRzO1xyXG4gICAgZXhwb3J0IHR5cGUgTW9kZWxTZXRPcHRpb25zICAgICAgICAgICAgICAgICAgICAgICAgICAgICA9IEJhY2tib25lLk1vZGVsU2V0T3B0aW9ucztcclxuICAgIGV4cG9ydCB0eXBlIE1vZGVsRmV0Y2hPcHRpb25zICAgICAgICAgICAgICAgICAgICAgICAgICAgPSBCYWNrYm9uZS5Nb2RlbEZldGNoT3B0aW9ucztcclxuICAgIGV4cG9ydCB0eXBlIE1vZGVsU2F2ZU9wdGlvbnMgICAgICAgICAgICAgICAgICAgICAgICAgICAgPSBCYWNrYm9uZS5Nb2RlbFNhdmVPcHRpb25zO1xyXG4gICAgZXhwb3J0IHR5cGUgTW9kZWxEZXN0cm95T3B0aW9ucyAgICAgICAgICAgICAgICAgICAgICAgICA9IEJhY2tib25lLk1vZGVsRGVzdHJveU9wdGlvbnM7XHJcbiAgICBleHBvcnQgdHlwZSBWaWV3T3B0aW9uczxUTW9kZWwgZXh0ZW5kcyBNb2RlbCA9IE1vZGVsPiAgID0gQmFja2JvbmUuVmlld09wdGlvbnM8VE1vZGVsPjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBlbiBkaXJlY3Rpb24gZGVmaW5pdGlvbnMuXHJcbiAgICAgKiBAamEg6YG356e75pa55ZCR44Gu5a6a576pLlxyXG4gICAgICovXHJcbiAgICBleHBvcnQgdHlwZSBQYWdlVHJhbnNpdGlvbkRpcmVjdGlvbiA9IFwiYmFja1wiIHwgXCJmb3J3YXJkXCIgfCBcInNhbWVcIiB8IFwidW5rbm93blwiO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGVuIEFyZ3VtZW50IG9mIG9uU2hvdy9vbkJlZm9yZVNob3cgbWV0aG9kLlxyXG4gICAgICogQGphIG9uU2hvdy9vbkJlZm9yZVNob3cg44Gn5rih44GV44KM44KL5byV5pWwXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgU2hvd0V2ZW50RGF0YSB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQGVuIEEgalF1ZXJ5IGNvbGxlY3Rpb24gb2JqZWN0IHRoYXQgY29udGFpbnMgdGhlIHNvdXJjZSBwYWdlIERPTSBlbGVtZW50LlxyXG4gICAgICAgICAqIEBqYSDpgbfnp7vliY3jga7nlLvpnaLmg4XloLHjgpLmoLzntI1cclxuICAgICAgICAgKi9cclxuICAgICAgICBwcmV2UGFnZTogSlF1ZXJ5O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAZW4gQSBqUXVlcnkgY29sbGVjdGlvbiBvYmplY3QgdGhhdCBjb250YWlucyB0aGUgZGVzdGluYXRpb24gcGFnZSBET00gZWxlbWVudC5cclxuICAgICAgICAgKiBAamEg6YG356e75b6M44Gu55S76Z2i5oOF5aCx44KS5qC857SNXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdG9QYWdlOiBKUXVlcnk7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBlbiBwYWdlIHRyYW5zaXRpb24gZGlyZWN0aW9uLlxyXG4gICAgICAgICAqIEBqYSDpgbfnp7vmlrnlkJHjgpLmoLzntI1cclxuICAgICAgICAgKi9cclxuICAgICAgICBkaXJlY3Rpb246IFBhZ2VUcmFuc2l0aW9uRGlyZWN0aW9uO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGVuIEFyZ3VtZW50IG9mIG9uSGlkZS9vbkJlZm9yZUhpZGUgbWV0aG9kLlxyXG4gICAgICogQGphIG9uSGlkZS9vbkJlZm9yZUhpZGUg44Gn5rih44GV44KM44KL5byV5pWwXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgSGlkZUV2ZW50RGF0YSB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQGVuIEEgalF1ZXJ5IGNvbGxlY3Rpb24gb2JqZWN0IHRoYXQgY29udGFpbnMgdGhlIHBhZ2UgRE9NIGVsZW1lbnQgdG8gd2hpY2ggd2UganVzdCB0cmFuc2l0aW9uZWQuXHJcbiAgICAgICAgICogQGphIOODiOODqeODs+OCuOOCt+ODp+ODs+WujOS6huOBl+OBn+eUu+mdouaDheWgseOCkuagvOe0jVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIG5leHRQYWdlOiBKUXVlcnk7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBlbiBBIGpRdWVyeSBjb2xsZWN0aW9uIG9iamVjdCB0aGF0IGNvbnRhaW5zIHRoZSBkZXN0aW5hdGlvbiBwYWdlIERPTSBlbGVtZW50LlxyXG4gICAgICAgICAqIEBqYSDpgbfnp7vlvozjga7nlLvpnaLmg4XloLHjgpLmoLzntI1cclxuICAgICAgICAgKi9cclxuICAgICAgICB0b1BhZ2U6IEpRdWVyeTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQGVuIEEgalF1ZXJ5IGNvbGxlY3Rpb24gb2JqZWN0IHRoYXQgY29udGFpbnMgdGhlIGZyb20gcGFnZSBET00gZWxlbWVudC5cclxuICAgICAgICAgKiBAamEg6YG356e75YmN44Gu55S76Z2i5oOF5aCx44KS5qC857SNXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJldlBhZ2U6IEpRdWVyeTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQGVuIHBhZ2UgdHJhbnNpdGlvbiBkaXJlY3Rpb24uXHJcbiAgICAgICAgICogQGphIOmBt+enu+aWueWQkeOCkuagvOe0jVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGRpcmVjdGlvbjogUGFnZVRyYW5zaXRpb25EaXJlY3Rpb247XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZW4gRGVsZWdhdGUgaW50ZXJmYWNlIG9mIGFkZGl0aW9uYWwgZGF0YSBmb3IgUGFnZSBjbGFzcy4gPGJyPlxyXG4gICAgICogICAgIENsaWVudCBjYW4gZGVmaW5lIGV4dGVuZCB0eXBlIGZyb20gaXQuXHJcbiAgICAgKlxyXG4gICAgICogQGphIOS7u+aEj+OBruaDheWgseOCkuagvOe0jeOBmeOCi+OCpOODs+OCv+ODvOODleOCp+OCpOOCuSA8YnI+XHJcbiAgICAgKiAgICAgUGFnZSDjgavmuKHjgZXjgozjgovjg4fjg7zjgr/jgILmi6HlvLXjgZfjgabkvb/nlKjlj6/og71cclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBJbnRlbnQge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBlbiBhbnkgcGFyYW1ldGVyLiA8YnI+XHJcbiAgICAgICAgICogICAgIHBhcmFtc1tcInF1ZXJ5UGFyYW1zXCJdIGlzIHVzZWQgYnkgZnJhbWV3b3JrIGZvciBxdWVyeSBwYXJhbWV0ZXJzLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQGphIOS7u+aEj+OBruODkeODqeODoeODvOOCvyA8YnI+XHJcbiAgICAgICAgICogICAgIHBhcmFtc1tcInF1ZXJ5UGFyYW1zXCJdIOOBq+OBr+OAgXF1ZXJ5IHBhcmFtZXRlciDjgYzjg5Xjg6zjg7zjg6Djg6/jg7zjgq/jgavjgojjgormoLzntI3jgZXjgozjgovjgIJcclxuICAgICAgICAgKi9cclxuICAgICAgICBwYXJhbXM/OiBvYmplY3Q7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogYW55IHBhcmFtZXRlcnNcclxuICAgICAgICAgKi9cclxuICAgICAgICBba2V5OiBzdHJpbmddOiBhbnk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZW4gQXJndW1lbnRzIGludGVyZmFjZSBvZiBSb3V0ZXIucmVnaXN0ZXJQYWdlU3RhY2soKSBtZXRob2QuXHJcbiAgICAgKiBAamEgUm91dGVyLnJlZ2lzdGVyUGFnZVN0YWNrKCkg44Gr5oyH5a6a44GZ44KL44Kk44Oz44K/44O844OV44Kn44Kk44K5XHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgUGFnZVN0YWNrIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAZW4gcm91dGUgc3RyaW5nLCBpdCBjYW4gYmUgcmVndWxhciBleHByZXNzaW9uLlxyXG4gICAgICAgICAqIEBqYSDjg6vjg7zjg4bjgqPjg7PjgrDmloflrZfliJcgLyDmraPopo/ooajnj75cclxuICAgICAgICAgKi9cclxuICAgICAgICByb3V0ZTogc3RyaW5nO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAZW4gcGFnZSB0aXRsZSBzdHJpbmcuXHJcbiAgICAgICAgICogQGphIOODmuODvOOCuOOCv+OCpOODiOODq+aWh+Wtl+WIl1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRpdGxlPzogc3RyaW5nO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAZW4gcGFnZSB0cmFuc2l0aW9uIHN0cmluZy5cclxuICAgICAgICAgKiBAamEg6YG356e744OI44Op44Oz44K444K344On44Oz5paH5a2X5YiXXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdHJhbnNpdGlvbj86IHN0cmluZztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBlbiBpbnRlcmZhY2Ugb2YgUm91dGVyJ3MgU3ViIEZsb3cgcGFyYW1lbnRlcnMuXHJcbiAgICAgKiBAamEgUm91dGVyIOOBriBTdWIgRmxvdyDjgavmjIflrprjgZnjgovjg5Hjg6njg6Hjg7zjgr/jgqTjg7Pjgr/jg7zjg5XjgqfjgqTjgrlcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBTdWJGbG93UGFyYW0ge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBlbiBzZXQgc3ViIGZsb3cgb3BlcmF0aW9uIFtiZWdpbiB8IGVuZF0uIDxicj5cclxuICAgICAgICAgKiAgICAgV2hlbiBcImJlZ2luXCIgaXMgc2V0IGFuZCB0aGVuIFwiZW5kXCIgaXMgY2FsbGVkLCBpdCBjYW4gcmV0dXJuIHRvIHRoZSBVUkwgc3BlY2lmaWVkIGFzIFwiYmFzZVwiIHdpdGggdHJlYXRpbmcgYnJvd3NlciBoaXN0b3J5LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQGphIFN1YiBGbG93IOWHpueQhuOCkuaMh+WumiBbYmVnaW4gfCBlbmRdIDxicj5cclxuICAgICAgICAgKiAgICAgXCJiZWdpblwiIOOBjOaMh+WumuOBleOCjOOAgeasoeOBqyBcImVuZFwiIOOCkuWRvOOBtuOBqOOBjeOAgVwiYmFzZVwiIOOBq+aMh+WumuOBl+OBnyB1cmwg44G+44Gn44OW44Op44Km44K25bGl5q2044KS44Gf44Gp44KL44CCXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgb3BlcmF0aW9uOiBcImJlZ2luXCIgfCBcImVuZFwiO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAZW4gUGFnZSBVUkwvSGFzaCB1c2VkIGFzIHRoZSByZWZlcmVuY2UgcG9pbnQgb2YgU3ViIEZsb3cgaXMgc3BlY2lmaWVkLiA8YnI+XHJcbiAgICAgICAgICogICAgIFdoZW4gU3ViIEZsb3cgb3BlcmF0aW9uID09IFwiZW5kXCIgaXMgc3BlY2lmaWVkLCBVUkwgc3BlY2lmaWVkIGFzIG5hdmlnYXRlIGlzIGRpc3JlZ2FyZGVkLiA8YnI+XHJcbiAgICAgICAgICogICAgIElmIG5vdCBzZXQsIHRoaXMgcGFyYW1ldGVyIGlzIGFzc2lnbmVkIHRoZSBwYWdlIGNhbGxlZCBSb3V0ZXIubmF2aWdhdGUoKSB3aXRoIHN1YkZsb3cgcHJvcGVydHkuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAamEgU3ViIEZsb3cg44Gu5Z+654K544Go44Gq44KL44Oa44O844K4IFVSTC9IYXNoIOOCkuaMh+WumuOAgiA8YnI+XHJcbiAgICAgICAgICogICAgIFN1YiBGbG93IG9wZXJhdGlvbiA9PSBcImVuZFwiIOOBjOaMh+WumuOBleOCjOOCi+WgtOWQiOOBr+OAgW5hdmlnYXRlIOOBq+aMh+WumuOBleOCjOOCiyBVUkwg44Gv54Sh6KaW44GV44KM44KL44CCIDxicj5cclxuICAgICAgICAgKiAgICAg5oyH5a6a44GM44Gq44GE5aC05ZCI44GvIFJvdXRlci5uYXZpZ2F0ZSgpIOaZguOBqyBzdWJGbG93IOOCkuaMh+WumuOBruWRvOOBs+WHuuOBl+WFg+OBjOOCouOCteOCpOODs+OBleOCjOOCi+OAglxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGRlc3RCYXNlPzogc3RyaW5nO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAZW4gUGFnZVN0YWNrIGZyb20gXCJkZXN0QmFzZVwiIHdoaWNoIGNoYW5nZXMgcGFnZSBhdCB0aGUgdGltZSBvZiB0aGUgZW5kIG9mIFN1YiBGbG93IGlzIHNwZWNpZmllZC4gPGJyPlxyXG4gICAgICAgICAqICAgICBXaGVuIHRoaXMgcGFyYW1ldGVyIGlzIG5vIHNldCwgaXQgY2hhbmdlcyBwYWdlIHRvIFwiZGVzdEJhc2VcIi5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBqYSBTdWIgRmxvdyDntYLkuobmmYLjgavpgbfnp7vjgZnjgosgXCJkZXN0QmFzZVwiIOOBi+OCieOBriBQYWdlU3RhY2sg44KS5oyH5a6a44CC5oyH5a6a44GM44Gq44GE5aC05ZCI44Gv44CBXCJkZXN0QmFzZVwiIOOBq+mBt+enu+OBmeOCi+OAglxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGRlc3RTdGFja3M/OiBQYWdlU3RhY2tbXTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBlbiBPcHRpb25zIGludGVyZmFjZSBvZiBSb3V0ZXIuc3RhcnQoKSBtZXRob2QuXHJcbiAgICAgKiBAamEgUm91dGVyLnN0YXJ0KCkg44Gr5oyH5a6a44GZ44KL44Kq44OX44K344On44Oz44Kk44Oz44K/44O844OV44Kn44Kk44K5XHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgUm91dGVyT3B0aW9ucyBleHRlbmRzIEJhY2tib25lLkhpc3RvcnlPcHRpb25zIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAZW4gSWYgY29uc3RydWN0IHJlZ2lzdGVyZWQgcGFnZSBpbnN0YW5jZSwgdGhpcyBwYXJhbSBzZXQgdHJ1ZS4gZGVmYXVsdDogdHJ1ZS5cclxuICAgICAgICAgKiBAamEg55m76Yyy5riI44G/44Oa44O844K444KS5qeL56+J44GZ44KL5aC05ZCIIHRydWUuIGRlZmF1bHQ6IHRydWVcclxuICAgICAgICAgKi9cclxuICAgICAgICBwYWdlQ29uc3RydWN0PzogYm9vbGVhbjtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBlbiBPcHRpb25zIGludGVyZmFjZSBvZiBSb3V0ZXIubmF2aWdhdGUoKSBtZXRob2QuXHJcbiAgICAgKiBAamEgUm91dGVyLm5hdmlnYXRlKCkg44Gr5oyH5a6a44GZ44KL44Kq44OX44K344On44Oz44Kk44Oz44K/44O844OV44Kn44Kk44K5XHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgTmF2aWdhdGVPcHRpb25zIGV4dGVuZHMgQmFja2JvbmUuTmF2aWdhdGVPcHRpb25zIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAZW4gb3ZlcndyaXRlOiB0cmlnZ2VyIGRlZmF1bHQgdmFsdWUgaXMgdHJ1ZS5cclxuICAgICAgICAgKiBAamEgdHJpZ2dlciDjga7ml6LlrprlgKTjga8gdHJ1ZSDjgajjgZfjgabmibHjgYZcclxuICAgICAgICAgKi9cclxuICAgICAgICB0cmlnZ2VyPzogYm9vbGVhbjtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQGVuIFN1YkZsb3dQYXJhbSBpcyBzcGVjaWZpZWQgd2hlbiBwZXJmb3JtaW5nIFN1YiBGbG93IHByb2Nlc3NpbmcuXHJcbiAgICAgICAgICogQGphIFN1YiBGbG93IOWHpueQhuOCkuihjOOBhuWgtOWQiOOAgVN1YkZsb3dQYXJhbSDjgpLmjIflrppcclxuICAgICAgICAgKi9cclxuICAgICAgICBzdWJGbG93PzogU3ViRmxvd1BhcmFtO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAZW4gc2V0IGJhY2sgb3BlcmF0aW9uIGRlc3RpbmF0aW9uLlxyXG4gICAgICAgICAqIEBqYSBb5oi744KLXSDmmYLjgavpgbfnp7vjgZnjgovjg5rjg7zjgrggVVJMIOOCkuaMh+WumlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGJhY2tEZXN0aW5hdGlvbj86IHN0cmluZztcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQGVuIG5vIGhhc2ggY2hhbmdlIGZsYWcgaW4gbmF2aWdhdGUgb3BlcmF0aW9uLlxyXG4gICAgICAgICAqIEBqYSBOYXZpZ2F0ZSDmmYLjgasgSGFzaCDlpInmm7TjgZfjgarjgYTjg5Xjg6njgrBcclxuICAgICAgICAgKi9cclxuICAgICAgICBub0hhc2hDaGFuZ2U/OiBib29sZWFuO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAZW4gYWRkaXRpb25hbCBpbmZvIGludGVyZmFjZS5cclxuICAgICAgICAgKiBAamEg5LuY5Yqg5oOF5aCx44Kk44Oz44K/44O844OV44Kn44Kk44K5XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgaW50ZW50PzogSW50ZW50O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGVuIEhhbmRsZSBvcmllbnRhdGlvbiBjaGFuZ2VkIG5vdGlmeSBpbnRlcmZhY2UuXHJcbiAgICAgKiBAamEgT3JpZW50YXRpb24g44Gu5aSJ5pu05qSc55+l44KS5Y+X5L+h44GZ44KL44Kk44Oz44K/44O844OV44Kn44Kk44K5XHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgSU9yaWVudGF0aW9uQ2hhbmdlZExpc3RlbmVyIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAZW4gUmVjZWl2ZWQgb3JpZW50YXRpb24gY29kZSB3aGVuIHRoYXQgaXMgY2hhbmdlZC5cclxuICAgICAgICAgKiBAamEgT3JpZW50YXRpb24g44Gu5aSJ5pu044KS5Y+X5L+hXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gbmV3T3JpZW50YXRpb25cclxuICAgICAgICAgKiAtIGBlbmAgbmV3IG9yaWVudGF0aW9uIGNvZGUuXHJcbiAgICAgICAgICogLSBgamFgIOWkieabtOW+jOOBriBvcmllbnRhdGlvbiBjb2RlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgb25PcmllbnRhdGlvbkNoYW5nZWQobmV3T3JpZW50YXRpb246IE9yaWVudGF0aW9uKTogdm9pZDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBlbiBIYW5kbGUgSC9XIGJhY2sgYnV0dG9uIGV2ZW50IG5vdGlmeSBpbnRlcmZhY2UuXHJcbiAgICAgKiBAamEgSC9XIEJhY2sgYnV0dG9uIOOBriBldmVudCDjgpLlj5fkv6HjgZnjgovjgqTjg7Pjgr/jg7zjg5XjgqfjgqTjgrlcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBJQmFja0J1dHRvbkV2ZW50TGlzdGVuZXIge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBlbiBSZWNlaXZlZCBIL1cgQmFjayBCdXR0b24gZXZlbnRcclxuICAgICAgICAgKiBAamEgSC9XIEJhY2sgQnV0dG9uIOODj+ODs+ODieODqVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGV2ZW50XHJcbiAgICAgICAgICogIC0gYGVuYCBldmVudCBvYmplY3RcclxuICAgICAgICAgKiAgLSBgamFgIOOCpOODmeODs+ODiOOCquODluOCuOOCp+OCr+ODiFxyXG4gICAgICAgICAqIEByZXR1cm5zXHJcbiAgICAgICAgICogIC0gYGVuYCB0cnVlOiBjb250aW51ZSBkZWZhdWx0IG9wZXJhdGlvbiAvIGZhbHNlOiBzdG9wIGRlZmF1bHQgb3BlcmF0aW9uXHJcbiAgICAgICAgICogIC0gYGphYCB0cnVlOiDml6Llrprjga7lh6bnkIbjgpLooYzjgo/jgarjgYQgLyBmYWxzZTog5pei5a6a44Gu5Yem55CG44KS6KGM44GGXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgb25IYXJkd2FyZUJhY2tCdXR0b24oZXZlbnQ/OiBKUXVlcnkuRXZlbnQpOiBib29sZWFuO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGVuIEZyYW1ld29yayBnZW5lcmljIGNvbW1hbmQgY2FsbGJhY2sgaW50ZXJmYWNlLlxyXG4gICAgICogQGphIOaxjueUqOOCs+ODnuODs+ODieOCs+ODvOODq+ODkOODg+OCr+OCpOODs+OCv+ODvOODleOCp+OCpOOCuVxyXG4gICAgICovXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIElDb21tYW5kTGlzdGVuZXIge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBlbiBSZWNlaXZlZCBnZW5lcmljIGNvbW1hbmRcclxuICAgICAgICAgKiBAamEg5rGO55So44Kz44Oe44Oz44OJ44KS5Y+X5L+hXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gIGV2ZW50XHJcbiAgICAgICAgICogIC0gYGVuYCBldmVudCBvYmplY3RcclxuICAgICAgICAgKiAgLSBgamFgIOOCpOODmeODs+ODiOOCquODluOCuOOCp+OCr+ODiFxyXG4gICAgICAgICAqIEBwYXJhbSAga2luZFxyXG4gICAgICAgICAqICAtIGBlbmAgY29tbWFuZCBraW5kIGlkZW50aWZpZXJcclxuICAgICAgICAgKiAgLSBgamFgIOOCs+ODnuODs+ODieeoruWIpeitmOWIpeWtkFxyXG4gICAgICAgICAqIEByZXR1cm5zXHJcbiAgICAgICAgICogIC0gYGVuYCB0cnVlOiBjb250aW51ZSBkZWZhdWx0IG9wZXJhdGlvbiAvIGZhbHNlOiBzdG9wIGRlZmF1bHQgb3BlcmF0aW9uXHJcbiAgICAgICAgICogIC0gYGphYCB0cnVlOiDml6Llrprjga7lh6bnkIbjgpLooYzjgo/jgarjgYQgLyBmYWxzZTog5pei5a6a44Gu5Yem55CG44KS6KGM44GGXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgb25Db21tYW5kKGV2ZW50PzogSlF1ZXJ5LkV2ZW50LCBraW5kPzogc3RyaW5nKTogYm9vbGVhbjtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBlbiBJbnRlcmZhY2UgY2xhc3MgZm9yIHN0b3JpbmcgcmVnaXN0cmF0aW9uIGluZm8sIHVzaW5nIGJ5IFJvdXRlci5yZWdpc3RlcigpIG1ldGhvZC5cclxuICAgICAqIEBqYSBSb3V0ZXIucmVnaXN0ZXIoKSDjgafmjIflrprjgZnjgovnmbvpjLLmg4XloLHjgpLmoLzntI3jgZnjgovjgqTjg7Pjgr/jg7zjg5XjgqfjgqTjgrnjgq/jg6njgrlcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBQYWdlQ29uc3RydWN0T3B0aW9ucyB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQGVuIHJvdXRlIGlkZW50aWZpZXJcclxuICAgICAgICAgKiBAamEgcm91dGUg6K2Y5Yil5a2QXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcm91dGU/OiBzdHJpbmc7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBlbiBjYWxsYmFjayBvbiBjaGFuZ2luZyByb3V0ZS5cclxuICAgICAgICAgKiBAamEgcm91dGUg5aSJ5pu05pmC44Gr5ZG844Gz5Ye644GV44KM44KL44Kz44O844Or44OQ44OD44KvXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgY2FsbGJhY2s/OiAoLi4uYXJnczogYW55W10pID0+IGJvb2xlYW47XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBlbiBzZXQgXCJ0cnVlXCIgaWYgYXBwbGljYXRpb24ncyB0b3Agdmlldy5cclxuICAgICAgICAgKiBAamEg44Ki44OX44Oq44Kx44O844K344On44Oz44GuIHRvcCDnlLvpnaLjgafjgYLjgovloLTlkIggdHJ1ZSDjgpLmjIflrppcclxuICAgICAgICAgKi9cclxuICAgICAgICB0b3A/OiBib29sZWFuO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAZW4gVGhlIGluc3RhbmNlIG9mIFBhZ2UgZXZlbnQgbGlzdGVuZXIgaW5zdGFuY2UuXHJcbiAgICAgICAgICogQGphIFBhZ2Ug44Kk44OZ44Oz44OI44KS5Y+X5L+h44GZ44KL44Oq44K544OK44O844Kk44Oz44K544K/44Oz44K5IDxicj5cclxuICAgICAgICAgKiAgICAg5qmf6IO95ouh5by15pmC44Gr5oyH5a6a44GZ44KLXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgb3duZXI/OiBJUGFnZTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQGVuIGludGVudCBpbnN0YW5jZSBpcyBjb21tdW5pY2F0ZWQgbmV4dCBwYWdlIHdoZW4gXCJpbnRlbnRcIiBpc24ndCBkZXNpZ25hdGVkIHNwZWNpZmljYWxseSBpbiBuYXZpZ2F0aW9uLlxyXG4gICAgICAgICAqIEBqYSDmmI7npLrnmoTjgasgaW50ZW50IOOBjOaMh+WumuOBleOCjOOBquOBhOWgtOWQiOOBq+OBiuOBhOOBpuOCgiBpbnRlbnQg44KS56C05qOE44GX44Gq44GE5aC05ZCI44GvIHRydWUg44KS5oyH5a6aXHJcbiAgICAgICAgICovXHJcbiAgICAgICAga2VlcEludGVudD86IGJvb2xlYW47XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZW4gSW50ZXJmYWNlIG9mIFBhZ2UgY2xhc3MuXHJcbiAgICAgKiBAamEg44Oa44O844K444Kv44Op44K544Gu44Kk44Oz44K/44O844OV44Kn44Kk44K544Kv44Op44K5XHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgSVBhZ2UgZXh0ZW5kcyBJT3JpZW50YXRpb25DaGFuZ2VkTGlzdGVuZXIsIElCYWNrQnV0dG9uRXZlbnRMaXN0ZW5lciwgSUNvbW1hbmRMaXN0ZW5lciB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQGVuIFJldHVybiB0cnVlIGlmIHBhZ2UgaXMgYWN0aXZlLlxyXG4gICAgICAgICAqIEBqYSDjg5rjg7zjgrjjgYzjgqLjgq/jg4bjgqPjg5bjgafjgYLjgovmmYIgdHJ1ZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGFjdGl2ZTogYm9vbGVhbjtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQGVuIFN0b3JlZCB0YXJnZXQgcGFnZSB1cmwuXHJcbiAgICAgICAgICogQGphIOWvvuixoeOBruODmuODvOOCuCBVUkwg44KS5qC857SNXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdXJsOiBzdHJpbmc7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBlbiBTdG9yZWQgdGFyZ2V0IHBhZ2UgSUQuXHJcbiAgICAgICAgICogQGphIOWvvuixoeOBruODmuODvOOCuCBJRCDjgpLmoLzntI1cclxuICAgICAgICAgKi9cclxuICAgICAgICBpZDogc3RyaW5nO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAZW4galF1ZXJ5IG9iamVjdCBvZiBwYWdlLlxyXG4gICAgICAgICAqIEBqYSDjg5rjg7zjgrjjga4galF1ZXJ5IOOCquODluOCuOOCp+OCr+ODiFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgICRwYWdlOiBKUXVlcnk7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBlbiBqUXVlcnkgb2JqZWN0IG9mIHBhZ2UncyBoZWFkZXIuXHJcbiAgICAgICAgICogQGphIOODmuODvOOCuOODmOODg+ODgOOBriBqUXVlcnkg44Kq44OW44K444Kn44Kv44OIXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgJGhlYWRlcjogSlF1ZXJ5O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAZW4galF1ZXJ5IG9iamVjdCBvZiBwYWdlJ3MgZm9vdGVyLlxyXG4gICAgICAgICAqIEBqYSDjg5rjg7zjgrjjg5Xjg4Pjgr/jga4galF1ZXJ5IOOCquODluOCuOOCp+OCr+ODiFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgICRmb290ZXI6IEpRdWVyeTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQGVuIGludGVudCBwYXJhbWV0ZXIgcGFzc2luZyBiZXR3ZWVuIHBhZ2VzLlxyXG4gICAgICAgICAqIEBqYSDjg5rjg7zjgrjplpPjgaflj5fjgZHmuKHjgZXjgozjgosgaW50ZW50IOOCquODluOCuOOCp+OCr+ODiFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGludGVudDogSW50ZW50O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAZW4gUmVjZWl2ZWQgUm91dGVyIFwiYmVmb3JlIHJvdXRlIGNoYW5nZVwiIGV2ZW50LlxyXG4gICAgICAgICAqIEBqYSBSb3V0ZXIgXCJiZWZvcmUgcm91dGUgY2hhbmdlXCIg44OP44Oz44OJ44OpIDxicj5cclxuICAgICAgICAgKiAgICAg44Oa44O844K46YG356e755u05YmN44Gr6Z2e5ZCM5pyf5Yem55CG44KS6KGM44GG44GT44Go44GM5Y+v6IO9XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJuc1xyXG4gICAgICAgICAqICAtIGBlbmAgcHJvbWlzZSBvYmplY3RcclxuICAgICAgICAgKiAgLSBgamFgIFByb21pc2Ug44Kq44OW44K444Kn44Kv44OIXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgb25CZWZvcmVSb3V0ZUNoYW5nZSgpOiBJUHJvbWlzZUJhc2U8YW55PjtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQGVuIEl0J3MgY2FsbGVkIG9ubHkgd2hlbiBiZWZvcmUgdGhlIGZpcnN0IE9uUGFnZUluaXQoKS5cclxuICAgICAgICAgKiBAamEg5pyA5Yid44GuIE9uUGFnZUluaXQoKSDjga7jgajjgY3jgavjga7jgb/jgrPjg7zjg6vjgZXjgozjgotcclxuICAgICAgICAgKi9cclxuICAgICAgICBvbkluaXRpYWxpemUoZXZlbnQ6IEpRdWVyeS5FdmVudCk6IHZvaWQ7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBlbiBFdmVudCBoYW5kbGVyIG9mIGpRTSBldmVudDogXCJwYWdlYmVmb3JlY3JlYXRlXCIuXHJcbiAgICAgICAgICogQGphIGpRTSBldmVudDogXCJwYWdlYmVmb3JlY3JlYXRlXCIg44Gr5a++5b+cXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgb25QYWdlQmVmb3JlQ3JlYXRlKGV2ZW50OiBKUXVlcnkuRXZlbnQpOiB2b2lkO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAZW4gRXZlbnQgaGFuZGxlciBvZiBqUU0gZXZlbnQ6IFwicGFnZWNyZWF0ZVwiIChwcmV2aW91cyB2ZXJzaW9uIGRlZmluZWQgXCJwYWdlaW5pdFwiKS5cclxuICAgICAgICAgKiBAamEgalFNIGV2ZW50OiBcInBhZ2VjcmVhdGVcIiAo5penOlwicGFnZWluaXRcIikg44Gr5a++5b+cXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgb25QYWdlSW5pdChldmVudDogSlF1ZXJ5LkV2ZW50KTogdm9pZDtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQGVuIEV2ZW50IGhhbmRsZXIgb2YgalFNIGV2ZW50OiBcInBhZ2ViZWZvcmVzaG93XCJcclxuICAgICAgICAgKiBAamEgalFNIGV2ZW50OiBcInBhZ2ViZWZvcmVzaG93XCIg44Gr5a++5b+cXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gZXZlbnRcclxuICAgICAgICAgKiAgLSBgZW5gIGV2ZW50IG9iamVjdFxyXG4gICAgICAgICAqICAtIGBqYWAg44Kk44OZ44Oz44OI44Kq44OW44K444Kn44Kv44OIXHJcbiAgICAgICAgICogQHBhcmFtIGRhdGFcclxuICAgICAgICAgKiAgLSBgZW5gIGFkZGl0aW9uYWwgaW5mb3JtYXRpb25cclxuICAgICAgICAgKiAgLSBgamFgIOS7mOWKoOaDheWgsVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIG9uUGFnZUJlZm9yZVNob3coZXZlbnQ6IEpRdWVyeS5FdmVudCwgZGF0YT86IFNob3dFdmVudERhdGEpOiB2b2lkO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAZW4gRXZlbnQgaGFuZGxlciBvZiBqUU0gZXZlbnQ6IFwicGFnZWNvbnRhaW5lcnNob3dcIiAocHJldmlvdXMgdmVyc2lvbiBkZWZpbmVkIFwicGFnZXNob3dcIikuXHJcbiAgICAgICAgICogQGphIGpRTSBldmVudDogXCJwYWdlY29udGFpbmVyc2hvd1wiICjml6c6XCJwYWdlc2hvd1wiKSDjgavlr77lv5xcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBldmVudFxyXG4gICAgICAgICAqICAtIGBlbmAgZXZlbnQgb2JqZWN0XHJcbiAgICAgICAgICogIC0gYGphYCDjgqTjg5njg7Pjg4jjgqrjg5bjgrjjgqfjgq/jg4hcclxuICAgICAgICAgKiBAcGFyYW0gZGF0YVxyXG4gICAgICAgICAqICAtIGBlbmAgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxyXG4gICAgICAgICAqICAtIGBqYWAg5LuY5Yqg5oOF5aCxXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgb25QYWdlU2hvdyhldmVudDogSlF1ZXJ5LkV2ZW50LCBkYXRhPzogU2hvd0V2ZW50RGF0YSk6IHZvaWQ7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBlbiBFdmVudCBoYW5kbGVyIG9mIGpRTSBldmVudDogXCJwYWdlYmVmb3JlaGlkZVwiLlxyXG4gICAgICAgICAqIEBqYSBqUU0gZXZlbnQ6IFwicGFnZWJlZm9yZWhpZGVcIiDjgavlr77lv5xcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBldmVudFxyXG4gICAgICAgICAqICAtIGBlbmAgZXZlbnQgb2JqZWN0XHJcbiAgICAgICAgICogIC0gYGphYCDjgqTjg5njg7Pjg4jjgqrjg5bjgrjjgqfjgq/jg4hcclxuICAgICAgICAgKiBAcGFyYW0gZGF0YVxyXG4gICAgICAgICAqICAtIGBlbmAgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxyXG4gICAgICAgICAqICAtIGBqYWAg5LuY5Yqg5oOF5aCxXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgb25QYWdlQmVmb3JlSGlkZShldmVudDogSlF1ZXJ5LkV2ZW50LCBkYXRhPzogSGlkZUV2ZW50RGF0YSk6IHZvaWQ7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBlbiBFdmVudCBoYW5kbGVyIG9mIGpRTSBldmVudDogXCJwYWdlY29udGFpbmVyaGlkZVwiIChwcmV2aW91cyB2ZXJzaW9uIGRlZmluZWQgXCJwYWdlaGlkZVwiKS5cclxuICAgICAgICAgKiBAamEgalFNIGV2ZW50OiBcInBhZ2Vjb250YWluZXJoaWRlXCIgKOaXpzpcInBhZ2VoaWRlXCIpIOOBq+WvvuW/nFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGV2ZW50XHJcbiAgICAgICAgICogIC0gYGVuYCBldmVudCBvYmplY3RcclxuICAgICAgICAgKiAgLSBgamFgIOOCpOODmeODs+ODiOOCquODluOCuOOCp+OCr+ODiFxyXG4gICAgICAgICAqIEBwYXJhbSBkYXRhXHJcbiAgICAgICAgICogIC0gYGVuYCBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXHJcbiAgICAgICAgICogIC0gYGphYCDku5jliqDmg4XloLFcclxuICAgICAgICAgKi9cclxuICAgICAgICBvblBhZ2VIaWRlKGV2ZW50OiBKUXVlcnkuRXZlbnQsIGRhdGE/OiBIaWRlRXZlbnREYXRhKTogdm9pZDtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQGVuIEV2ZW50IGhhbmRsZXIgb2YgalFNIGV2ZW50OiBcInBhZ2VyZW1vdmVcIi5cclxuICAgICAgICAgKiBAamEgalFNIGV2ZW50OiBcInBhZ2VyZW1vdmVcIiDjgavlr77lv5xcclxuICAgICAgICAgKi9cclxuICAgICAgICBvblBhZ2VSZW1vdmUoZXZlbnQ6IEpRdWVyeS5FdmVudCk6IHZvaWQ7XHJcbiAgICB9XHJcbn1cclxuXHJcbmRlY2xhcmUgbW9kdWxlIFwiY2RwLmZyYW1ld29yay5qcW1cIiB7XHJcbiAgICBjb25zdCBGcmFtZXdvcms6IHR5cGVvZiBDRFAuRnJhbWV3b3JrO1xyXG4gICAgZXhwb3J0ID0gRnJhbWV3b3JrO1xyXG59XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBjZHA6Ly8vQ0RQL0ZyYW1ld29yay9JbnRlcmZhY2VzLnRzIiwibmFtZXNwYWNlIENEUCB7XHJcblxyXG4gICAgLy8gQGludGVybmFsIEVycm9yIGNvZGUgb2Zmc2V0IGRlZmluaXRpb24gb2YgYGNkcC1mcmFtZXdvcmstanFtYC5cclxuICAgIGV4cG9ydCBlbnVtIFJFU1VMVF9DT0RFX0JBU0Uge1xyXG4gICAgICAgIENEUF9GUkFNRVdPUktfREVDTEFSRVJBVElPTiA9IDAsICAgIC8vIFRTMjQzMiDlr77nrZZcclxuICAgICAgICBDRFBfRlJBTUVXT1JLID0gNCAqIF9NT0RVTEVfUkVTVUxUX0NPREVfUkFOR0VfQ0RQLFxyXG4gICAgfVxyXG5cclxuICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAvLyBtb2R1bGUgZXJyb3IgZGVjbGFyYXRpb246XHJcblxyXG4gICAgY29uc3QgRlVOQ1RJT05fQ09ERV9SQU5HRSA9IDEwO1xyXG5cclxuICAgIC8vIEBpbnRlcm5hbCBjZHAuZnJhbWV3b3JrLmpxbSDlhoXjga7jg63jg7zjgqvjg6vjgrPjg7zjg4njgqrjg5Xjgrvjg4Pjg4jlgKRcclxuICAgIGVudW0gTE9DQUxfQ09ERV9CQVNFIHtcclxuICAgICAgICBDT1JFX0FQSSAgICA9IDAsXHJcbiAgICAgICAgUk9VVEVSICAgICAgPSAxICogRlVOQ1RJT05fQ09ERV9SQU5HRSxcclxuICAgICAgICBQQUdFICAgICAgICA9IDIgKiBGVU5DVElPTl9DT0RFX1JBTkdFLFxyXG4gICAgfVxyXG5cclxuICAgIC8qIHRzbGludDpkaXNhYmxlOm1heC1saW5lLWxlbmd0aCAqL1xyXG4gICAgLy8gRXJyb3IgY29kZSBkZWZpbml0aW9uIG9mIGBjZHAtZnJhbWV3b3JrLWpxbWAuXHJcbiAgICBleHBvcnQgZW51bSBSRVNVTFRfQ09ERSB7XHJcbiAgICAgICAgRVJST1JfQ0RQX0ZSQU1FV09SS19ERUNMQVJBVElPTiAgICAgICAgICAgICAgICAgPSAwLCAvLyBUUzI0MzIg5a++562WXHJcbiAgICAgICAgLyoqIGBlbmAgW1tDRFAuRnJhbWV3b3JrLmluaXRpYWxpemVdXSgpIGZhaWxlciBjb2RlLiA8YnI+IGBqYWAgW1tDRFAuRnJhbWV3b3JrLmluaXRpYWxpemVdXSgpIOOBruOCqOODqeODvOOCs+ODvOODiSAqL1xyXG4gICAgICAgIEVSUk9SX0NEUF9GUkFNRVdPUktfSU5JVElBTElaRV9GQUlMRUQgICAgICAgICAgID0gREVDTEFSRV9FUlJPUl9DT0RFKFJFU1VMVF9DT0RFX0JBU0UuQ0RQX0ZSQU1FV09SSywgTE9DQUxfQ09ERV9CQVNFLkNPUkVfQVBJICsgMSwgXCJmcmFtZXdvcmsgaW5pdGlhbGl6ZSBmYWlsZWQuXCIpLFxyXG4gICAgICAgIC8qKiBgZW5gIFtbQ0RQLlJvdXRlci5faW5pdGlhbGl6ZV1dKCkgZmFpbGVyIGNvZGUuIDxicj4gYGphYCBbW0NEUC5Sb3V0ZXIuX2luaXRpYWxpemVdXSgpIOOBruOCqOODqeODvOOCs+ODvOODiSAqL1xyXG4gICAgICAgIEVSUk9SX0NEUF9GUkFNRVdPUktfUk9VVEVSX0lOSVRJQUxJWkVfRkFJTEVEICAgID0gREVDTEFSRV9FUlJPUl9DT0RFKFJFU1VMVF9DT0RFX0JBU0UuQ0RQX0ZSQU1FV09SSywgTE9DQUxfQ09ERV9CQVNFLlJPVVRFUiArIDEsIFwicm91dGVyIGluaXRpYWxpemUgZmFpbGVkLlwiKSxcclxuICAgIH1cclxuICAgIC8qIHRzbGludDplbmFibGU6bWF4LWxpbmUtbGVuZ3RoICovXHJcbn1cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGNkcDovLy9DRFAvRnJhbWV3b3JrL0Vycm9yRGVmcy50cyIsIi8qIHRzbGludDpkaXNhYmxlOm1heC1saW5lLWxlbmd0aCAqL1xyXG5cclxubmFtZXNwYWNlIENEUC5GcmFtZXdvcmsge1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGVuIHBsYXRmb3JtIGp1ZGdlbWVudCB1dGlsaXR5XHJcbiAgICAgKiBAamEgcGxhdGZvcm0g5Yik5a6a44Kq44OW44K444Kn44Kv44OIXHJcbiAgICAgKlxyXG4gICAgICogQHNlZWh0dHBzOi8vdzNnLmpwL2Jsb2cvdG9vbHMvanNfYnJvd3Nlcl9zbmlmZmluZ1xyXG4gICAgICovXHJcbiAgICBleHBvcnQgY29uc3QgUGxhdGZvcm0gPSAoKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHVhID0gbmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpO1xyXG5cclxuICAgICAgICBjb25zdCBtYWpvclZlcnNpb24gPSBmdW5jdGlvbiAoYnJvd3Nlcjogc3RyaW5nKTogbnVtYmVyIHtcclxuICAgICAgICAgICAgY29uc3QgdmVyc2lvbiA9IHVhLm1hdGNoKG5ldyBSZWdFeHAoXCIoXCIgKyBicm93c2VyICsgXCIpKCB8LykoWzAtOV0rKVwiKSk7XHJcbiAgICAgICAgICAgIGlmICghdmVyc2lvbiB8fCB2ZXJzaW9uLmxlbmd0aCA8IDQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBwYXJzZUludCh2ZXJzaW9uWzNdLCAxMCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgbHRJRTY6IHR5cGVvZiB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lciA9PT0gXCJ1bmRlZmluZWRcIiAmJiB0eXBlb2YgKDxhbnk+ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KS5zdHlsZS5tYXhIZWlnaHQgPT09IFwidW5kZWZpbmVkXCIsXHJcbiAgICAgICAgICAgIGx0SUU3OiB0eXBlb2Ygd2luZG93LmFkZEV2ZW50TGlzdGVuZXIgPT09IFwidW5kZWZpbmVkXCIgJiYgdHlwZW9mIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwgPT09IFwidW5kZWZpbmVkXCIsXHJcbiAgICAgICAgICAgIGx0SUU4OiB0eXBlb2Ygd2luZG93LmFkZEV2ZW50TGlzdGVuZXIgPT09IFwidW5kZWZpbmVkXCIgJiYgdHlwZW9mIGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUgPT09IFwidW5kZWZpbmVkXCIsXHJcbiAgICAgICAgICAgIGx0SUU5OiAoPGFueT5kb2N1bWVudCkudW5pcXVlSUQgJiYgdHlwZW9mIHdpbmRvdy5tYXRjaE1lZGlhID09PSBcInVuZGVmaW5lZFwiLFxyXG4gICAgICAgICAgICBndElFMTA6ICg8YW55PmRvY3VtZW50KS51bmlxdWVJRCAmJiB3aW5kb3cubWF0Y2hNZWRpYSxcclxuICAgICAgICAgICAgVHJpZGVudDogKDxhbnk+ZG9jdW1lbnQpLnVuaXF1ZUlELFxyXG4gICAgICAgICAgICBHZWNrbzogXCJNb3pBcHBlYXJhbmNlXCIgaW4gKDxhbnk+ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KS5zdHlsZSxcclxuICAgICAgICAgICAgUHJlc3RvOiBnbG9iYWwub3BlcmEsXHJcbiAgICAgICAgICAgIEJsaW5rOiBnbG9iYWwuY2hyb21lLFxyXG4gICAgICAgICAgICBXZWJraXQ6IHR5cGVvZiBnbG9iYWwuY2hyb21lID09PSBcInVuZGVmaW5lZFwiICYmIFwiV2Via2l0QXBwZWFyYW5jZVwiIGluICg8YW55PmRvY3VtZW50LmRvY3VtZW50RWxlbWVudCkuc3R5bGUsXHJcbiAgICAgICAgICAgIFRvdWNoOiB0eXBlb2YgZ2xvYmFsLm9udG91Y2hzdGFydCAhPT0gXCJ1bmRlZmluZWRcIixcclxuICAgICAgICAgICAgTW9iaWxlOiAodHlwZW9mIGdsb2JhbC5vcmllbnRhdGlvbiAhPT0gXCJ1bmRlZmluZWRcIikgfHwgKHVhLmluZGV4T2YoXCJXaW5kb3dzIFBob25lXCIpICE9PSAtMSksXHJcbiAgICAgICAgICAgIGx0QWQ0XzQ6IHR5cGVvZiBnbG9iYWwub3JpZW50YXRpb24gIT09IFwidW5kZWZpbmVkXCIgJiYgKHR5cGVvZiBnbG9iYWwuRXZlbnRTb3VyY2UgPT09IFwidW5kZWZpbmVkXCIgfHwgMzAgPiBtYWpvclZlcnNpb24oXCJjaHJvbWVcIikpLFxyXG4gICAgICAgICAgICBQb2ludGVyOiBnbG9iYWwubmF2aWdhdG9yLnBvaW50ZXJFbmFibGVkLFxyXG4gICAgICAgICAgICBNU1Bvbml0ZXI6IGdsb2JhbC5uYXZpZ2F0b3IubXNQb2ludGVyRW5hYmxlZCxcclxuICAgICAgICAgICAgQW5kcm9pZDogKHVhLmluZGV4T2YoXCJhbmRyb2lkXCIpICE9PSAtMSksXHJcbiAgICAgICAgICAgIGlPUzogKHVhLmluZGV4T2YoXCJpcGhvbmVcIikgIT09IC0xIHx8IHVhLmluZGV4T2YoXCJpcGFkXCIpICE9PSAtMSB8fCB1YS5pbmRleE9mKFwiaXBvZFwiKSAhPT0gLTEpLFxyXG4gICAgICAgIH07XHJcbiAgICB9KSgpO1xyXG59XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBjZHA6Ly8vQ0RQL0ZyYW1ld29yay9QbGF0Zm9ybS50cyIsIi8qIHRzbGludDpkaXNhYmxlOnR5cGVkZWYgbm8tYml0d2lzZSAqL1xyXG5cclxubmFtZXNwYWNlIENEUC5GcmFtZXdvcmsge1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogdmNsaWNrIHBhdGNoXHJcbiAgICAgKi9cclxuICAgIGNvbnN0IF92Y2xpY2tQYXRjaCA9ICgpOiB2b2lkID0+IHtcclxuICAgICAgICBjb25zdCBqcXVlcnlfb24gPSAkLmZuLm9uLFxyXG4gICAgICAgICAgICBqcXVlcnlfb2ZmID0gJC5mbi5vZmY7XHJcblxyXG4gICAgICAgIGNvbnN0IGN1c3RvbV9vbiA9IGZ1bmN0aW9uICh0eXBlcywgc2VsZWN0b3IsIGRhdGEsIGZuLCAvKklOVEVSTkFMKi8gb25lKSB7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdHlwZXMgPT09IFwic3RyaW5nXCIpIHtcclxuICAgICAgICAgICAgICAgIHR5cGVzID0gdHlwZXMucmVwbGFjZSgvdmNsaWNrL2csIFwiY2xpY2tcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuICg8YW55Pl8uYmluZChqcXVlcnlfb24sIHRoaXMpKSh0eXBlcywgc2VsZWN0b3IsIGRhdGEsIGZuLCBvbmUpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGNvbnN0IGN1c3RvbV9vZmYgPSBmdW5jdGlvbiAodHlwZXMsIHNlbGVjdG9yLCBmbikge1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIHR5cGVzID09PSBcInN0cmluZ1wiKSB7XHJcbiAgICAgICAgICAgICAgICB0eXBlcyA9IHR5cGVzLnJlcGxhY2UoL3ZjbGljay9nLCBcImNsaWNrXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiAoPGFueT5fLmJpbmQoanF1ZXJ5X29mZiwgdGhpcykpKHR5cGVzLCBzZWxlY3RvciwgZm4pO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vIHJlcGxhY2UgZnVuY3Rpb25zLlxyXG4gICAgICAgICg8YW55PiQuZm4pLm9uID0gY3VzdG9tX29uO1xyXG4gICAgICAgICg8YW55PiQuZm4pLm9mZiA9IGN1c3RvbV9vZmY7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogJC5tb2JpbGUud2lkZ2V0LnBvcHVwIHBhdGNoIGZvciBcIl9jcmVhdGVQcmVyZXF1aXNpdGVzXCJcclxuICAgICAqXHJcbiAgICAgKiBwYXRjaCBjb2RlIGZyb20ganFtIDEuNVxyXG4gICAgICogaHR0cHM6Ly9naXRodWIuY29tL2pxdWVyeS9qcXVlcnktbW9iaWxlL2NvbW1pdC9kMzRjODZhZTE0ZDRlYTYwMzM1N2JlNWUzMjZkZTFmYjhjMzFkYmY5XHJcbiAgICAgKi9cclxuICAgIGNvbnN0IF9hcHBseV9qcW1fcG9wdXBfY3JlYXRlUHJlcmVxdWlzaXRlcyA9ICgpOiB2b2lkID0+IHtcclxuICAgICAgICBjb25zdCBfc2FmZUNyZWF0ZVByZXJlcXVpc2l0ZXMgPSBmdW5jdGlvbiAoc2NyZWVuUHJlcmVxdWlzaXRlOiBhbnksIGNvbnRhaW5lclByZXJlcXVpc2l0ZTogYW55LCB3aGVuRG9uZTogYW55KTogdm9pZCB7XHJcbiAgICAgICAgICAgIGxldCBwcmVyZXF1aXNpdGVzO1xyXG4gICAgICAgICAgICBjb25zdCBzZWxmOiBhbnkgPSB0aGlzO1xyXG5cclxuICAgICAgICAgICAgcHJlcmVxdWlzaXRlcyA9IHtcclxuICAgICAgICAgICAgICAgIHNjcmVlbjogJC5EZWZlcnJlZCgpLFxyXG4gICAgICAgICAgICAgICAgY29udGFpbmVyOiAkLkRlZmVycmVkKClcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHByZXJlcXVpc2l0ZXMuc2NyZWVuLmRvbmUoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHByZXJlcXVpc2l0ZXMgPT09IHNlbGYuX3ByZXJlcXVpc2l0ZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICBzY3JlZW5QcmVyZXF1aXNpdGUoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBwcmVyZXF1aXNpdGVzLmNvbnRhaW5lci5kb25lKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGlmIChwcmVyZXF1aXNpdGVzID09PSBzZWxmLl9wcmVyZXF1aXNpdGVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyUHJlcmVxdWlzaXRlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgJC53aGVuKHByZXJlcXVpc2l0ZXMuc2NyZWVuLCBwcmVyZXF1aXNpdGVzLmNvbnRhaW5lcikuZG9uZShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocHJlcmVxdWlzaXRlcyA9PT0gc2VsZi5fcHJlcmVxdWlzaXRlcykge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuX3ByZXJlcXVpc2l0ZXMgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIHdoZW5Eb25lKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgc2VsZi5fcHJlcmVxdWlzaXRlcyA9IHByZXJlcXVpc2l0ZXM7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgY29uc3QgJG1vYmlsZTogYW55ID0gJC5tb2JpbGU7XHJcbiAgICAgICAgaWYgKCRtb2JpbGUud2lkZ2V0cyAmJiAkbW9iaWxlLndpZGdldHMucG9wdXApIHtcclxuICAgICAgICAgICAgJG1vYmlsZS53aWRnZXRzLnBvcHVwLnByb3RvdHlwZS5fY3JlYXRlUHJlcmVxdWlzaXRlcyA9IF9zYWZlQ3JlYXRlUHJlcmVxdWlzaXRlcztcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogJC5tb2JpbGUud2lkZ2V0LnBvcHVwIHBhdGNoIGZvciBcIl9oYW5kbGVXaW5kb3dSZXNpemVcIlxyXG4gICAgICpcclxuICAgICAqIHBhdGNoIGNvZGUgZnJvbSBzdGFjayBvdmVyZmxvd1xyXG4gICAgICogaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMjcwOTA0NDUvanFtb2JpbGUtcmUtcG9zaXRpb25zLXBvcHVwLXdpbmRvdy1ldmVyeS10aW1lLXdoZW4tYW5kcm9pZC1vcGVucy1vd24tdmlydHVhbC1rZXlcclxuICAgICAqL1xyXG4gICAgY29uc3QgX2FwcGx5X2pxbV9wb3B1cF9oYW5kbGVXaW5kb3dSZXNpemUgPSAoKTogdm9pZCA9PiB7XHJcbiAgICAgICAgY29uc3QgX3NhZmVIYW5kbGVXaW5kb3dSZXNpemUgPSBmdW5jdGlvbiAoLyogdGhlRXZlbnQgKi8pOiB2b2lkIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX2lzT3BlbiAmJiB0aGlzLl9pZ25vcmVSZXNpemVUbyA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCh0aGlzLl9leHBlY3RSZXNpemVFdmVudCgpIHx8IHRoaXMuX29yaWVudGF0aW9uY2hhbmdlSW5Qcm9ncmVzcykgJiZcclxuICAgICAgICAgICAgICAgICAgICAhdGhpcy5fdWkuY29udGFpbmVyLmhhc0NsYXNzKFwidWktcG9wdXAtaGlkZGVuXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gZWZmZWN0aXZlbHkgcmFwaWQtY2xvc2UgdGhlIHBvcHVwIHdoaWxlIGxlYXZpbmcgdGhlIHNjcmVlbiBpbnRhY3RcclxuICAgICAgICAgICAgICAgICAgICAvL2p1ZGdlIHVzZXIgaXMgaW4gaW5wdXQgbW9kZSBvciBub3QuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEoJChcIjpmb2N1c1wiKS5pcyhcImlucHV0XCIpIHx8ICQoXCI6Zm9jdXNcIikuaXMoXCJ0ZXh0YXJlYVwiKSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fdWkuY29udGFpbmVyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYWRkQ2xhc3MoXCJ1aS1wb3B1cC1oaWRkZW4gdWktcG9wdXAtdHJ1bmNhdGVcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZW1vdmVBdHRyKFwic3R5bGVcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgY29uc3QgJG1vYmlsZTogYW55ID0gJC5tb2JpbGU7XHJcbiAgICAgICAgaWYgKCRtb2JpbGUud2lkZ2V0cyAmJiAkbW9iaWxlLndpZGdldHMucG9wdXApIHtcclxuICAgICAgICAgICAgJG1vYmlsZS53aWRnZXRzLnBvcHVwLnByb3RvdHlwZS5faGFuZGxlV2luZG93UmVzaXplID0gX3NhZmVIYW5kbGVXaW5kb3dSZXNpemU7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqICQubW9iaWxlLndpZGdldC5wb3B1cCBwYXRjaFxyXG4gICAgICovXHJcbiAgICBjb25zdCBfbW9iaWxlUG9wdXBQYXRjaCA9ICgpOiB2b2lkID0+IHtcclxuICAgICAgICBjb25zdCBqcXVlcnlNYWpvciA9IH5+JC5mbi5qcXVlcnkuc3BsaXQoXCIuXCIpWzBdO1xyXG4gICAgICAgIGNvbnN0IGpxbVZlcnNpb24gPSAkLm1vYmlsZS52ZXJzaW9uLnNwbGl0KFwiLlwiKTtcclxuICAgICAgICBjb25zdCBqcW1NYWpvciA9IH5+anFtVmVyc2lvblswXTtcclxuICAgICAgICBjb25zdCBqcW1NaW5lciA9IH5+anFtVmVyc2lvblsxXTtcclxuXHJcbiAgICAgICAgaWYgKDMgPD0ganF1ZXJ5TWFqb3IgJiYganFtTWFqb3IgPCAyICYmIGpxbU1pbmVyIDwgNSkge1xyXG4gICAgICAgICAgICBfYXBwbHlfanFtX3BvcHVwX2NyZWF0ZVByZXJlcXVpc2l0ZXMoKTtcclxuICAgICAgICAgICAgX2FwcGx5X2pxbV9wb3B1cF9oYW5kbGVXaW5kb3dSZXNpemUoKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8vX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXy8vXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZW4gcGF0Y2ggY2xhc3MgZm9yIGpxbSBmcmFtZXdvcmsuXHJcbiAgICAgKiBAamEganFtIGZyYW1ld29yayDnlKjjg5Hjg4Pjg4HpgannlKjjgq/jg6njgrlcclxuICAgICAqXHJcbiAgICAgKiBAaW50ZXJuYWxcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGNsYXNzIFBhdGNoIHtcclxuXHJcbiAgICAgICAgc3RhdGljIHNfdmNsaWNrRXZlbnQgPSBcInZjbGlja1wiO1xyXG5cclxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgICAgIC8vIHB1YmxpYyBzdGF0aWMgbWV0aG9kc1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAZW4gQXBwbHkgcGF0Y2ggYmVmb3JlIGluaXRpYWxpemUuXHJcbiAgICAgICAgICogQGphIOWIneacn+WMluWJjeOBruODkeODg+ODgeOBrumBqeeUqFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYXBwbHlCZWZvcmVJbml0KCk6IHZvaWQge1xyXG4gICAgICAgICAgICBpZiAoIVBhdGNoLmlzU3VwcG9ydGVkVmNsaWNrKCkpIHtcclxuICAgICAgICAgICAgICAgIF92Y2xpY2tQYXRjaCgpO1xyXG4gICAgICAgICAgICAgICAgUGF0Y2guc192Y2xpY2tFdmVudCA9IFwiY2xpY2tcIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQGVuIEFwcGx5IHBhdGNoIGFmdGVyIGluaXRpYWxpemUuXHJcbiAgICAgICAgICogQGphIOWIneacn+WMluW+jOOBruODkeODg+ODgeOBrumBqeeUqFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYXBwbHlBZnRlckluaXQoKTogdm9pZCB7XHJcbiAgICAgICAgICAgIF9tb2JpbGVQb3B1cFBhdGNoKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAZW4gaWYgXCJ2Y2xpY2tcIiBldmVudCBpcyB1bnN1cHBvcnRlZCwgcmV0dXJucyBmYWxzZS4gZXg6IEFuZHJvaWQgNC40IChLaXRrYXQpXHJcbiAgICAgICAgICogQGphIFwidmNsaWNrXCIgZXZlbnQg44GM6Z2e44K144Od44O844OI44Gn44GC44KLIHBsYXRmb3JtIChLaXRLYXQpIOOBryBmYWxzZSDjgpLov5TjgZnjgIIgPGJyPlxyXG4gICAgICAgICAqICAgICAgalFNIOOBriB2ZXJzaW9uIHVwIOOBq+OCiOOCiuOAgeino+axuuOBleOCjOOCi+WgtOWQiOOBr+eEoeWKueOBi+OBmeOCi+OAglxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgaXNTdXBwb3J0ZWRWY2xpY2soKTogYm9vbGVhbiB7XHJcbiAgICAgICAgICAgIC8vIGZvciBBbmRyb2lkIDQuNCsgKEtpdGthdCDvvZ4pXHJcbiAgICAgICAgICAgIGlmIChQbGF0Zm9ybS5BbmRyb2lkICYmICFQbGF0Zm9ybS5sdEFkNF80KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBjZHA6Ly8vQ0RQL0ZyYW1ld29yay9QYXRjaC50cyIsIm5hbWVzcGFjZSBDRFAuRnJhbWV3b3JrIHtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBlbiBPcmllbnRhdGlvbiBjb2RlXHJcbiAgICAgKiBAamEgb3JpZW50YXRpb24g6K2Y5Yil5a2QXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBlbnVtIE9yaWVudGF0aW9uIHtcclxuICAgICAgICBQT1JUUkFJVCA9IDAsXHJcbiAgICAgICAgTEFORFNDQVBFID0gMSxcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBlbiBHZXQgT3JpZW50YXRpb24gZW51bSBjb2RlXHJcbiAgICAgKiBAamEgT3JpZW50YXRpb24g44Gu5Y+W5b6XXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBmdW5jdGlvbiBnZXRPcmllbnRhdGlvbigpOiBPcmllbnRhdGlvbiB7XHJcbiAgICAgICAgY29uc3QgJHdpbmRvdyA9ICQod2luZG93KTtcclxuICAgICAgICByZXR1cm4gKCR3aW5kb3cud2lkdGgoKSA8ICR3aW5kb3cuaGVpZ2h0KCkpID8gT3JpZW50YXRpb24uUE9SVFJBSVQgOiBPcmllbnRhdGlvbi5MQU5EU0NBUEU7XHJcbiAgICB9XHJcbn1cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGNkcDovLy9DRFAvRnJhbWV3b3JrL09yaWVudGF0aW9uLnRzIiwiLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uLy4uL0B0eXBlcy9qcXVlcnkubW9iaWxlLmQudHNcIiAvPlxyXG4vKiB0c2xpbnQ6ZGlzYWJsZTptYXgtbGluZS1sZW5ndGggZm9yaW4gbm8tYml0d2lzZSAqL1xyXG5cclxubmFtZXNwYWNlIENEUCB7XHJcblxyXG4gICAgaW1wb3J0IFByb21pc2UgPSBDRFAuUHJvbWlzZTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBlbiBUaGUgZnVuY3Rpb24gcmV0dXJuZWQgUHJvbWlzZSB3YWl0cyB1bnRpbCBgY29yZG92YWAgaXMgcmVhZHkuIDxicj5cclxuICAgICAqICAgICBbTm90ZV0gZW11bGF0ZSB3aGVuIFBDIGVudmlyb21lbnQuXHJcbiAgICAgKlxyXG4gICAgICogQGphIGBjb3Jkb3ZhYCDjgYzmnInlirnjgavjgarjgovjgb7jgaflvoXmqZ8gPGJyPlxyXG4gICAgICogICAgIFBDIOeSsOWig+OBp+OBr+OCqOODn+ODpeODrOODvOODiOOBleOCjOOCi+OAglxyXG4gICAgICovXHJcbiAgICBleHBvcnQgZnVuY3Rpb24gd2FpdEZvckRldmljZVJlYWR5KCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZTx2b2lkPigocmVzb2x2ZSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoIUNEUC5GcmFtZXdvcmsuUGxhdGZvcm0uTW9iaWxlKSB7XHJcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgICAgICAgICB9LCAxMDApO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKG51bGwgPT0gZ2xvYmFsLmNvcmRvdmEgfHwgbnVsbCA9PSBnbG9iYWwuY29yZG92YS5leGVjKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJChkb2N1bWVudCkub25lKFwiZGV2aWNlcmVhZHlcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBfZGVmYXVsdEJhY2tCdXR0b25IYW5kbGVyOiAoZXZlbnQ/OiBKUXVlcnkuRXZlbnQpID0+IHZvaWQgPSBudWxsO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGVuIFNldHVwIEgvVyBCYWNrIGtleSBoYW5kbGVyLlxyXG4gICAgICogQGphIEgvVyBCYWNrIGtleSDjg4/jg7Pjg4njg6njga7oqK3lrprplqLmlbBcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW1cclxuICAgICAqIC0gYGVuYCBoYW5kbGVyIGZ1bmN0aW9uLlxyXG4gICAgICogLSBgamFgIGhhbmRsZXIg5oyH5a6aLlxyXG4gICAgICogQHJldHVybnNcclxuICAgICAqIC0gYGVuYCBvbGQgaGFuZGxlciBmdW5jdGlvbi5cclxuICAgICAqIC0gYGphYCDku6XliY3jga4gaGFuZGxlci5cclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIHNldEJhY2tCdXR0b25IYW5kbGVyKGhhbmRsZXI6IChldmVudD86IEpRdWVyeS5FdmVudCkgPT4gdm9pZCk6IChldmVudD86IEpRdWVyeS5FdmVudCkgPT4gdm9pZCB7XHJcbiAgICAgICAgY29uc3Qgb2xkSGFuZGxlciA9IF9kZWZhdWx0QmFja0J1dHRvbkhhbmRsZXI7XHJcbiAgICAgICAgX2RlZmF1bHRCYWNrQnV0dG9uSGFuZGxlciA9IGhhbmRsZXI7XHJcbiAgICAgICAgcmV0dXJuIG9sZEhhbmRsZXI7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gYmFjayBrZXkgaGFuZGxlciBpbXBsZW1lbnQuXHJcbiAgICAoKCkgPT4ge1xyXG4gICAgICAgIHdhaXRGb3JEZXZpY2VSZWFkeSgpXHJcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICQoZG9jdW1lbnQpLm9uKFwiYmFja2J1dHRvblwiLCAoZXZlbnQ6IEpRdWVyeS5FdmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChfZGVmYXVsdEJhY2tCdXR0b25IYW5kbGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9kZWZhdWx0QmFja0J1dHRvbkhhbmRsZXIoZXZlbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgIH0pKCk7XHJcblxyXG5cclxuICAgIC8vX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXy8vXHJcblxyXG5cclxuICAgIGV4cG9ydCBuYW1lc3BhY2UgRnJhbWV3b3JrIHtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQGVuIEFueSBwYXJhbWV0ZXIgdHlwZXMgaW50ZXJmYWNlXHJcbiAgICAgICAgICogQGphIOS7u+aEj+OBruODkeODqeODoeODvOOCv+Wei+Wumue+qVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGV4cG9ydCBpbnRlcmZhY2UgUGxhaW5TZXR0aW5nczxUID0gYW55PiB7XHJcbiAgICAgICAgICAgIFtrZXk6IHN0cmluZ106IFQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAamEgU2V0dGluZyBwYXJhbWV0ZXJzIGZvciBqUXVlcnlcclxuICAgICAgICAgKiBAamEgalF1ZXJ5IOOBq+ioreWumuWPr+iDveOBquOCquODl+OCt+ODp+ODs1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGV4cG9ydCBpbnRlcmZhY2UgSlF1ZXJ5U2V0dGluZ3MgZXh0ZW5kcyBQbGFpblNldHRpbmdzIHtcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIEBlbiBkZWZhdWx0ICQuYWpheCBzZXR0aW5nc1xyXG4gICAgICAgICAgICAgKiBAamEgJC5hamF4IOOBruaXouWumuioreWumlxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgYWpheFNldHVwPzogSlF1ZXJ5LkFqYXhTZXR0aW5ncztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBlbiBBcHBsaWNhYmxlIG9wdGlvbnMgZm9yIFtbQ0RQLkZyYW1ld29ya11dXHJcbiAgICAgICAgICogQGphIFtbQ0RQLkZyYW1ld29ya11dIOOBq+ioreWumuWPr+iDveOBquOCquODl+OCt+ODp+ODs1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGV4cG9ydCBpbnRlcmZhY2UgRnJhbWV3b3JrT3B0aW9ucyB7XHJcbiAgICAgICAgICAgIGpxdWVyeT86IEpRdWVyeVNldHRpbmdzO1xyXG4gICAgICAgICAgICBqcXVlcnltb2JpbGU/OiBQbGFpblNldHRpbmdzO1xyXG4gICAgICAgICAgICBpMThuPzogQ0RQLkkxOE5TZXR0aW5ncztcclxuICAgICAgICAgICAgYXBwbHlKUXVlcnlDb25maWc/OiAoKSA9PiB2b2lkO1xyXG4gICAgICAgICAgICBhcHBseUpRdWVyeU1vYmlsZUNvbmZpZz86ICgpID0+IHZvaWQ7XHJcbiAgICAgICAgICAgIGFwcGx5UGF0Y2g/OiBib29sZWFuO1xyXG4gICAgICAgICAgICBhbmNob3JWY2xpY2s/OiBib29sZWFuO1xyXG4gICAgICAgICAgICBmaXJzdFBhZ2VUcmFuc2l0aW9uPzogYm9vbGVhbjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGludGVyZmFjZSBPcmllbnRhdGlvbkxpc3RlbmVySG9sZGVyIHtcclxuICAgICAgICAgICAgW2tleTogc3RyaW5nXTogSU9yaWVudGF0aW9uQ2hhbmdlZExpc3RlbmVyO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgVEFHID0gXCJbQ0RQLkZyYW1ld29ya10gXCI7XHJcblxyXG4gICAgICAgIGxldCBfZGZJbml0aWFsaXplOiBKUXVlcnlEZWZlcnJlZDx2b2lkPiA9ICQuRGVmZXJyZWQ8dm9pZD4oKTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQGVuIEluaXRpYWxpemF0aW9uIGZ1bmN0aW9uIG9mIEZyYW1ld29yay5cclxuICAgICAgICAgKiBAamEgRnJhbWV3b3JrIOOBruWIneacn+WMlumWouaVsFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGV4cG9ydCBmdW5jdGlvbiBpbml0aWFsaXplKG9wdGlvbnM/OiBGcmFtZXdvcmtPcHRpb25zKTogSVByb21pc2VCYXNlPHZvaWQ+IHtcclxuICAgICAgICAgICAgaWYgKFwicGVuZGluZ1wiICE9PSBfZGZJbml0aWFsaXplLnN0YXRlKCkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiA8YW55Pl9kZkluaXRpYWxpemUucHJvbWlzZSgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBDRFAg55Kw5aKD44Gu5Yid5pyf5YyWXHJcbiAgICAgICAgICAgIC8vIOePvueKtuOBr+OAgWNvbnNvbGUg44Kq44OW44K444Kn44Kv44OI44Gu5L+d6Ki844GoIGpRdWVyeSDjga4gV2luUlQg5a++5b+c44CCXHJcbiAgICAgICAgICAgIENEUC5pbml0aWFsaXplKHtcclxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6ICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjb25maWcgPSBnZXRDb25maWcob3B0aW9ucyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIEZyYW1ld29yayDnlKjjga4gUGF0Y2gg6YGp55SoIChGcmFtZXdvcmsg5Yid5pyf5YyW5YmNKVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjb25maWcuYXBwbHlQYXRjaCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBGcmFtZXdvcmsuUGF0Y2guYXBwbHlCZWZvcmVJbml0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBjb25maWcg44Gu5Y+N5pigOiBqcXVlcnlcclxuICAgICAgICAgICAgICAgICAgICBjb25maWcuYXBwbHlKUXVlcnlDb25maWcoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8galF1ZXJ5IE1vYmlsZSDjga7liJ3mnJ/ljJZcclxuICAgICAgICAgICAgICAgICAgICAkKGRvY3VtZW50KS5vbihcIm1vYmlsZWluaXRcIiwgKCk6IHZvaWQgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25maWcg44Gu5Y+N5pigOiBqcXVlcnkgbW9iaWxlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZy5hcHBseUpRdWVyeU1vYmlsZUNvbmZpZygpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2RwLmkxOG4g44Gu5Yid5pyf5YyWXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIENEUC5pbml0aWFsaXplSTE4Tihjb25maWcuaTE4bilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hbHdheXMoKGluZm8pID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpMThuZXh0IOOBruWIneacn+WMluaZguOBruOCqOODqeODvOOBr+eEoeimluOBmeOCiy4gaW5mbyDjgYwgYXJyYXkg44Gu5aC05ZCI44CB44Ko44Op44O85oOF5aCx44GM5qC857SN44GV44KM44Gm44GE44KLLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoZG9jdW1lbnQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5vbmUoXCJwYWdlYmVmb3JlY2hhbmdlXCIsIChldmVudDogSlF1ZXJ5LkV2ZW50LCBkYXRhOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICg8Q2hhbmdlUGFnZU9wdGlvbnM+ZGF0YS5vcHRpb25zKS5zaG93TG9hZE1zZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAub24oXCJwYWdlYmVmb3JlY3JlYXRlXCIsIChldmVudDogSlF1ZXJ5LkV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpMThuZXh044Op44Kk44OW44Op44Oq44Gr44KI44KLaHRtbCBmcmFnbWVudOOBrue/u+ios+WHpueQhlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKDxhbnk+JChldmVudC50YXJnZXQpKS5sb2NhbGl6ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUm91dGVyIOOBruWIneacn+WMllxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChSb3V0ZXIuX2luaXRpYWxpemUoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbmNob3JWY2xpY2s6IGNvbmZpZy5hbmNob3JWY2xpY2ssXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpcnN0UGFnZVRyYW5zaXRpb246IGNvbmZpZy5maXJzdFBhZ2VUcmFuc2l0aW9uLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZyYW1ld29yayDnlKjjga4gUGF0Y2gg6YGp55SoIChGcmFtZXdvcmsg5Yid5pyf5YyW5b6MKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29uZmlnLmFwcGx5UGF0Y2gpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZyYW1ld29yay5QYXRjaC5hcHBseUFmdGVySW5pdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9kZkluaXRpYWxpemUucmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9kZkluaXRpYWxpemUucmVqZWN0KG1ha2VFcnJvckluZm8oXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSRVNVTFRfQ09ERS5FUlJPUl9DRFBfRlJBTUVXT1JLX1JPVVRFUl9JTklUSUFMSVpFX0ZBSUxFRCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRBRyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZXJyb3IuIENEUC5GcmFtZXdvcmsuUm91dGVyLmluaXRpYWxpemUoKSBmYWlsZWQuXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9kZkluaXRpYWxpemUgPSAkLkRlZmVycmVkPHZvaWQ+KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHsgLy8galF1ZXJ5IE1vYmlsZSDjga7jg63jg7zjg4lcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8ganF1ZXJ5IDMrXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGpxdWVyeU1ham9yID0gfn4kLmZuLmpxdWVyeS5zcGxpdChcIi5cIilbMF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgzIDw9IGpxdWVyeU1ham9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoNCA8PSBqcXVlcnlNYWpvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihUQUcgKyBcImpxdWVyeS1taWdyYXRlIGZvciAzLjAuMCsgaW4gdXNlLlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmUoW1wianF1ZXJ5LW1pZ3JhdGVcIl0sICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlKFtcImpxdWVyeS5tb2JpbGVcIl0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlKFtcImpxdWVyeS5tb2JpbGVcIl0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGZhaWw6IChlcnJvcjogRXJyb3JJbmZvKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgX2RmSW5pdGlhbGl6ZS5yZWplY3QobWFrZUVycm9ySW5mbyhcclxuICAgICAgICAgICAgICAgICAgICAgICAgUkVTVUxUX0NPREUuRVJST1JfQ0RQX0ZSQU1FV09SS19JTklUSUFMSVpFX0ZBSUxFRCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgVEFHLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcImVycm9yLiBDRFAuaW5pdGlhbGl6ZSgpIGZhaWxlZC5cIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JcclxuICAgICAgICAgICAgICAgICAgICApKTtcclxuICAgICAgICAgICAgICAgICAgICBfZGZJbml0aWFsaXplID0gJC5EZWZlcnJlZDx2b2lkPigpO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gPGFueT5fZGZJbml0aWFsaXplLnByb21pc2UoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBlbiBDaGVjayBmb3IgaW5pdGlhbGl6YXRpb24gc3RhdHVzLlxyXG4gICAgICAgICAqIEBqYSDliJ3mnJ/ljJbmuIjjgb/jgYvliKTlrppcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm5zXHJcbiAgICAgICAgICogLSBgZW5gIHRydWU6IGluaXRpYWxpemVkIC8gZmFsc2U6IHVuaW5pdGlhbGl6ZWRcclxuICAgICAgICAgKiAtIGBqYWAgdHJ1ZTog5Yid5pyf5YyW5riI44G/IC8gZmFsc2U6IOacquWIneacn+WMllxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGV4cG9ydCBmdW5jdGlvbiBpc0luaXRpYWxpemVkKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICByZXR1cm4gXCJyZXNvbHZlZFwiID09PSBfZGZJbml0aWFsaXplLnN0YXRlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAZW4gV2FpdCBmb3IgaW5pdGlhbGl6YXRpb24gc3RhdHVzLlxyXG4gICAgICAgICAqIEBqYSDliJ3mnJ/ljJblvoXjgaFcclxuICAgICAgICAgKi9cclxuICAgICAgICBleHBvcnQgZnVuY3Rpb24gd2FpdEZvckluaXRpYWxpemUoKTogSVByb21pc2VCYXNlPHZvaWQ+IHtcclxuICAgICAgICAgICAgcmV0dXJuIDxhbnk+X2RmSW5pdGlhbGl6ZS5wcm9taXNlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBfb3JpZW50YXRpb25MaXN0ZW5lckhvbGRlcjogT3JpZW50YXRpb25MaXN0ZW5lckhvbGRlciA9IHt9O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAZW4gUmVnaXN0ZXIgSU9yaWVudGF0aW9uQ2hhbmdlZExpc3RlbmVyIHRvIGZyYW1ld29yay5cclxuICAgICAgICAgKiBAamEgSU9yaWVudGF0aW9uQ2hhbmdlZExpc3RlbmVyIOOCkiBGcmFtZXdvcmsg44Gr55m76YyyXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0ga2V5XHJcbiAgICAgICAgICogIC0gYGVuYCBJRCBrZXlcclxuICAgICAgICAgKiAgLSBgamFgIOOCr+ODqeOCpOOCouODs+ODiOOBp+euoeeQhuWPr+iDveOBqiBJRFxyXG4gICAgICAgICAqIEBwYXJhbSBsaXN0ZW5lclxyXG4gICAgICAgICAqICAtIGBlbmAgSU9yaWVudGF0aW9uQ2hhbmdlZExpc3RlbmVyIGluc3RhbmNlXHJcbiAgICAgICAgICogIC0gYGphYCBJT3JpZW50YXRpb25DaGFuZ2VkTGlzdGVuZXIg44Kk44Oz44K544K/44Oz44K5XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZXhwb3J0IGZ1bmN0aW9uIHJlZ2lzdGVyT3JpZW50YXRpb25DaGFuZ2VkTGlzdGVuZXIoa2V5OiBzdHJpbmcsIGxpc3RlbmVyOiBJT3JpZW50YXRpb25DaGFuZ2VkTGlzdGVuZXIpOiB2b2lkIHtcclxuICAgICAgICAgICAgX29yaWVudGF0aW9uTGlzdGVuZXJIb2xkZXJba2V5XSA9IGxpc3RlbmVyO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQGVuIFVucmVnaXN0ZXIgSU9yaWVudGF0aW9uQ2hhbmdlZExpc3RlbmVyIGZyb20gZnJhbWV3b3JrLlxyXG4gICAgICAgICAqIEBqYSBJT3JpZW50YXRpb25DaGFuZ2VkTGlzdGVuZXIg44KSIEZyYW1ld29yayDjgYvjgonnmbvpjLLop6PpmaRcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBrZXlcclxuICAgICAgICAgKiAgLSBgZW5gIElEIGtleSBieSB1c2luZyByZWdpc3RlclxyXG4gICAgICAgICAqICAtIGBqYWAg55m76Yyy5pmC44Gr5L2/55So44GX44GfIElEXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZXhwb3J0IGZ1bmN0aW9uIHVucmVnaXN0ZXJPcmllbnRhdGlvbkNoYW5nZWRMaXN0ZW5lcihrZXk6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgICAgICAgICBkZWxldGUgX29yaWVudGF0aW9uTGlzdGVuZXJIb2xkZXJba2V5XTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBfYWN0aXZlUGFnZTogSVBhZ2UgPSBudWxsO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAZW4gU2V0dXAgZXZlbnQgaGFuZGxlcnMgd2hlbiBhZnRlciByb3V0ZXIgaW5pdGlhbGl6ZWQuXHJcbiAgICAgICAgICogQGphIOOCpOODmeODs+ODiOODj+ODs+ODieODqeOBruioreWumi4gUm91dGVyIOWIneacn+WMluW+jOOBqyBGcmFtZXdvcmsg44GM44Kz44O844Or44GZ44KLLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQGludGVybmFsXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZXhwb3J0IGZ1bmN0aW9uIF9zZXR1cEV2ZW50SGFuZGxlcnMoKTogdm9pZCB7XHJcbiAgICAgICAgICAgICgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBvbGRCYWNrQnV0dG9uSGFuZGxlciA9IENEUC5zZXRCYWNrQnV0dG9uSGFuZGxlcihudWxsKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGJhc2VCYWNrQnV0dG9uSGFuZGxlciA9IChldmVudD86IEpRdWVyeS5FdmVudCk6IHZvaWQgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChfYWN0aXZlUGFnZSAmJiBfYWN0aXZlUGFnZS5vbkhhcmR3YXJlQmFja0J1dHRvbihldmVudCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8g44Kv44Op44Kk44Ki44Oz44OI5YG044Gn44OP44Oz44OJ44Oq44Oz44Kw5riI44G/44Go5oyH5a6a44GV44KM44Gf5aC05ZCI44CB5pei5a6a44Gu5Yem55CG44KS6KGM44KP44Gq44GEXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbGRCYWNrQnV0dG9uSGFuZGxlcihldmVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIENEUC5zZXRCYWNrQnV0dG9uSGFuZGxlcihiYXNlQmFja0J1dHRvbkhhbmRsZXIpO1xyXG4gICAgICAgICAgICB9KSgpO1xyXG4gICAgICAgICAgICAoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgb2xkUm91dGVDaGFuZ2VIYW5kbGVyID0gQ0RQLkZyYW1ld29yay5zZXRCZWZvcmVSb3V0ZUNoYW5nZUhhbmRsZXIobnVsbCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBiYXNlUm91dGVDaGFuZ2VIYW5kbGVyID0gKCk6IElQcm9taXNlQmFzZTxhbnk+ID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoX2FjdGl2ZVBhZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9hY3RpdmVQYWdlLm9uQmVmb3JlUm91dGVDaGFuZ2UoKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gb2xkUm91dGVDaGFuZ2VIYW5kbGVyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIENEUC5GcmFtZXdvcmsuc2V0QmVmb3JlUm91dGVDaGFuZ2VIYW5kbGVyKGJhc2VSb3V0ZUNoYW5nZUhhbmRsZXIpO1xyXG4gICAgICAgICAgICB9KSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IF9sYXN0T3JpZW50YXRpb246IE9yaWVudGF0aW9uID0gbnVsbDtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQGVuIFNldHVwIGFjdGl2ZSBJUGFnZSBpbnN0YW5jZS5cclxuICAgICAgICAgKiBAamEgYWN0aXZlIFBhZ2Ug44Gu6Kit5a6aLiBGcmFtZXdvcmsg44GM44Kz44O844Or44GZ44KLLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQGludGVybmFsXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZXhwb3J0IGZ1bmN0aW9uIF9zZXRBY3RpdmVQYWdlKHBhZ2U6IElQYWdlKTogdm9pZCB7XHJcbiAgICAgICAgICAgIF9hY3RpdmVQYWdlID0gcGFnZTtcclxuICAgICAgICAgICAgaWYgKF9hY3RpdmVQYWdlKSB7XHJcbiAgICAgICAgICAgICAgICBfbGFzdE9yaWVudGF0aW9uID0gZ2V0T3JpZW50YXRpb24oKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQGVuIFJldGVybnMgZnJhbWV3b3JrIGRlZmF1bHQgY2xpY2sgZXZlbnQgc3RyaW5nLlxyXG4gICAgICAgICAqIEBqYSBGcmFtZXdvcmsg44GM5pei5a6a44Gr5L2/55So44GZ44KL44Kv44Oq44OD44Kv44Kk44OZ44Oz44OI5paH5a2X5YiX44KS5Y+W5b6XXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJucyBcInZjbGlja1wiIC8gXCJjbGlja1wiXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZXhwb3J0IGZ1bmN0aW9uIGdldERlZmF1bHRDbGlja0V2ZW50KCk6IHN0cmluZyB7XHJcbiAgICAgICAgICAgIHJldHVybiBQYXRjaC5zX3ZjbGlja0V2ZW50O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IF9wYWdlQ29uc3RydWN0b3JzOiAobmV3ICgpID0+IElQYWdlKVtdID0gW107XHJcbiAgICAgICAgbGV0IF9wYWdlSW5zdGFuY2VzOiBJUGFnZVtdID0gW107XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBlbiBSZWdpc3RlciBDb25jcmV0ZSBJUGFnZSBjbGFzcy4gPGJyPlxyXG4gICAgICAgICAqICAgICBJZiBjb25zdHJ1Y3RvciBuZWVkcyBhcmd1bWVudHMsIHVzZSBiaW5kKCkgZnVuY3Rpb24uXHJcbiAgICAgICAgICogQGphIFBhZ2Ug44Gu55m76YyyIDxicj5cclxuICAgICAgICAgKiAgICAgY29uc3RydWN0b3Ig44KS5oyH5a6a44GZ44KLLiDlvJXmlbDjgYzjgYLjgovloLTlkIjjga/jgIFiaW5kIOOCkuihjOOBhuOBk+OBqFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGN0b3JcclxuICAgICAgICAgKiAgLSBgZW5gIENvbmNyZXRlIElQYWdlIGNsYXNzIGNvbnN0cnVjdG9yXHJcbiAgICAgICAgICogIC0gYGphYCDjgrPjg7Pjgrnjg4jjg6njgq/jgr/jgpLmjIflrppcclxuICAgICAgICAgKi9cclxuICAgICAgICBleHBvcnQgZnVuY3Rpb24gcmVnaXN0ZXJQYWdlKGN0b3I6IG5ldyAoKSA9PiBJUGFnZSk6IHZvaWQge1xyXG4gICAgICAgICAgICBfcGFnZUNvbnN0cnVjdG9ycy5wdXNoKGN0b3IpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQGVuIFBhZ2UgaW5zdGFuY2VzIGFyZSBnZW5lcmF0ZWQgZnJvbSB0aGUgcmVzZXJ2ZWQgY29uc3RydWN0b3IuXHJcbiAgICAgICAgICogQGphIOS6iOe0hOOBleOCjOOBn+OCs+ODs+OCueODiOODqeOCr+OCv+OBi+OCiVBhZ2Ug44Kk44Oz44K544K/44Oz44K544KS55Sf5oiQXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZXhwb3J0IGZ1bmN0aW9uIGNvbnN0cnVjdFBhZ2VzKCk6IHZvaWQge1xyXG4gICAgICAgICAgICBfcGFnZUNvbnN0cnVjdG9ycy5mb3JFYWNoKChjdG9yOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgIF9wYWdlSW5zdGFuY2VzLnB1c2gobmV3IGN0b3IoKSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBfcGFnZUNvbnN0cnVjdG9ycyA9IFtdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQGVuIFJlbGVhc2UgUGFnZSBpbnN0YW5jZSByZWZlcmVuY2VcclxuICAgICAgICAgKiBAamEgUGFnZSDjgqTjg7Pjgrnjgr/jg7Pjgrnjga7lj4LnhafjgpLnoLTmo4RcclxuICAgICAgICAgKi9cclxuICAgICAgICBleHBvcnQgZnVuY3Rpb24gZGlzcG9zZVBhZ2VzKCk6IHZvaWQge1xyXG4gICAgICAgICAgICBfcGFnZUluc3RhbmNlcyA9IFtdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQGVuIEdldCBDb25maWcgb2JqZWN0LlxyXG4gICAgICAgICAqIEBqYSBDb25maWcgb2JqZWN0IOOBruWPluW+l1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQGludGVybmFsXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gZ2V0Q29uZmlnKG9wdGlvbnM6IEZyYW1ld29ya09wdGlvbnMpOiBGcmFtZXdvcmtPcHRpb25zIHtcclxuICAgICAgICAgICAgY29uc3QgZGVmQ29uZmlnID0ge1xyXG4gICAgICAgICAgICAgICAgLy8gZm9yIGZhaWwgc2FmZSwgZGVmYXVsdCBzZXR0aW5ncy5cclxuICAgICAgICAgICAgICAgIGpxdWVyeToge1xyXG4gICAgICAgICAgICAgICAgICAgIGFqYXhTZXR1cDogeyBjYWNoZTogZmFsc2UgfSxcclxuICAgICAgICAgICAgICAgICAgICBtaWdyYXRlTXV0ZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICAgICAganF1ZXJ5bW9iaWxlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgYWxsb3dDcm9zc0RvbWFpblBhZ2VzOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHRQYWdlVHJhbnNpdGlvbjogXCJwbGF0Zm9ybS1kZWZhdWx0XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdERpYWxvZ1RyYW5zaXRpb246IFwicGxhdGZvcm0tZGVmYXVsdFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIGhhc2hMaXN0ZW5pbmdFbmFibGVkOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICBwdXNoU3RhdGVFbmFibGVkOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICAvLyBAc2VlIGpxdWVyeS5tb2JpbGUuanMgTElORSA2Mzk0XHJcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNpdGlvbkhhbmRsZXI6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdEhhbmRsZXI6IFwic2ltdWx0YW5lb3VzXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlcXVlbnRpYWw6IFtcImZhZGVcIiwgXCJmbGlwXCIsIFwiZmxvd1wiXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2ltdWx0YW5lb3VzOiBbXSxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgICAgICBpMThuOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZmFsbGJhY2tSZXNvdXJjZXM6IHt9LFxyXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnM6IHt9LFxyXG4gICAgICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgICAgICBhcHBseVBhdGNoOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgYW5jaG9yVmNsaWNrOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgZmlyc3RQYWdlVHJhbnNpdGlvbjogZmFsc2UsXHJcblxyXG4gICAgICAgICAgICAgICAgYXBwbHlKUXVlcnlDb25maWc6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyh0aGlzLmpxdWVyeSkuZm9yRWFjaCgoa2V5KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcImFqYXhTZXR1cFwiID09PSBrZXkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQuYWpheFNldHVwKHRoaXMuanF1ZXJ5LmFqYXhTZXR1cCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkW2tleV0gPSB0aGlzLmpxdWVyeVtrZXldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgICAgIGFwcGx5SlF1ZXJ5TW9iaWxlQ29uZmlnOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJC5tb2JpbGUubG9hZGVyLnByb3RvdHlwZS5vcHRpb25zLnRleHQgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmtleXModGhpcy5qcXVlcnltb2JpbGUpLmZvckVhY2goKGtleSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoXCJ0cmFuc2l0aW9uSGFuZGxlclwiID09PSBrZXkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0ICRtb2JpbGU6IGFueSA9ICQubW9iaWxlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGVmYXVsdCBoYW5kbGVyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkbW9iaWxlLmRlZmF1bHRUcmFuc2l0aW9uSGFuZGxlclxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID0gJG1vYmlsZS50cmFuc2l0aW9uSGFuZGxlcnNbdGhpcy5qcXVlcnltb2JpbGUudHJhbnNpdGlvbkhhbmRsZXIuZGVmYXVsdEhhbmRsZXJdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2ltdWx0YW5lb3VzIGhhbmRsZXJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuanF1ZXJ5bW9iaWxlLnRyYW5zaXRpb25IYW5kbGVyLnNpbXVsdGFuZW91cy5mb3JFYWNoKCh0cmFuc2l0aW9uKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJG1vYmlsZS50cmFuc2l0aW9uSGFuZGxlcnNbdHJhbnNpdGlvbl0gPSAkbW9iaWxlLnRyYW5zaXRpb25IYW5kbGVycy5zaW11bHRhbmVvdXM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNlcXVlbnRpYWwgaGFuZGxlclxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5qcXVlcnltb2JpbGUudHJhbnNpdGlvbkhhbmRsZXIuc2VxdWVudGlhbC5mb3JFYWNoKCh0cmFuc2l0aW9uKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJG1vYmlsZS50cmFuc2l0aW9uSGFuZGxlcnNbdHJhbnNpdGlvbl0gPSAkbW9iaWxlLnRyYW5zaXRpb25IYW5kbGVycy5zZXF1ZW50aWFsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkLm1vYmlsZVtrZXldID0gdGhpcy5qcXVlcnltb2JpbGVba2V5XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiAkLmV4dGVuZCh0cnVlLCB7fSwgZGVmQ29uZmlnLCBDRFAuQ29uZmlnLCBvcHRpb25zKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAgICAgLy8gY2xvc3VyZSBtZXRob2RzXHJcblxyXG4gICAgICAgIC8vIHJlc2l6ZSBoYW5kbGVyXHJcbiAgICAgICAgJCh3aW5kb3cpLm9uKFwicmVzaXplXCIsIChldmVudDogSlF1ZXJ5LkV2ZW50KTogdm9pZCA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG5ld09yaWVudGF0aW9uID0gZ2V0T3JpZW50YXRpb24oKTtcclxuICAgICAgICAgICAgaWYgKF9sYXN0T3JpZW50YXRpb24gIT09IG5ld09yaWVudGF0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBfb3JpZW50YXRpb25MaXN0ZW5lckhvbGRlcikge1xyXG4gICAgICAgICAgICAgICAgICAgIF9vcmllbnRhdGlvbkxpc3RlbmVySG9sZGVyW2tleV0ub25PcmllbnRhdGlvbkNoYW5nZWQobmV3T3JpZW50YXRpb24pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKF9hY3RpdmVQYWdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX2FjdGl2ZVBhZ2Uub25PcmllbnRhdGlvbkNoYW5nZWQobmV3T3JpZW50YXRpb24pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgX2xhc3RPcmllbnRhdGlvbiA9IG5ld09yaWVudGF0aW9uO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGNkcDovLy9DRFAvRnJhbWV3b3JrL0NvcmVBUEkudHMiLCIvLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vLi4vQHR5cGVzL2pxdWVyeS5tb2JpbGUuZC50c1wiIC8+XHJcbi8qIHRzbGludDpkaXNhYmxlOm1heC1saW5lLWxlbmd0aCBuby1zdHJpbmctbGl0ZXJhbCAqL1xyXG5cclxubmFtZXNwYWNlIENEUC5GcmFtZXdvcmsge1xyXG5cclxuICAgIGltcG9ydCBQcm9taXNlID0gQ0RQLlByb21pc2U7XHJcblxyXG4gICAgY29uc3QgVEFHID0gXCJbQ0RQLkZyYW1ld29yay5Sb3V0ZXJdIFwiO1xyXG5cclxuICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAvLyBjbG9zdXJlIG1ldGhvZHNcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBlbiBDb252ZXJ0IHBhdGggdG8gVVJMLiA8YnI+XHJcbiAgICAgKiAgICAgSWYgdGhlIHBhdGggc3RhcnRzIGZyb20gXCIvXCIsIHRoZSBmdW5jdGlvbiB0cmFuc2xhdGUgdGhlIHBhdGggYXMgY2hpbGQgZm9sZGVyIG9mIFwid2ViIHJvb3RcIi4gPGJyPlxyXG4gICAgICogICAgIE90aGVyd2lzZSwgaXQgaW50ZXJwcmV0cyBhcyByZWxhdGl2ZSBwYXRoIGZyb20gY3VycmVudCBwYWdlLiA8YnI+XHJcbiAgICAgKiAgICAgW05vdGVdIFRoaXMgYmVoYXZpb3IgZ28gYWxvbmcgd2l0aCBqUU0sIE5PVCB3aXRoIHJlcXVpcmUudG9VcmwoKS5cclxuICAgICAqXHJcbiAgICAgKiBAamEgcGF0aCDjgpIgVVJMIOOBq+WkieaPmyA8YnI+XHJcbiAgICAgKiAgICAgXCIvXCIg44GL44KJ5aeL44G+44KL44KC44Gu44GvIHdlYiByb290IOOBi+OCieOAgeOBneOCjOS7peWkluOBr+ePvuWcqOOBruODmuODvOOCuOOBi+OCiee1tuWvvuODkeOCuVVSTOOBq+WkieaPm+OBmeOCi+OAgiA8YnI+XHJcbiAgICAgKiAgICAgalFNIOOBruaMmeWLleOBq+OBguOCj+OBm+OBpuOBiuOCiuOAgXJlcXVpcmUudG9VcmwoKSDjgajnlbDjgarjgovjga7jgafms6jmhI/jgIJcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gcGF0aFxyXG4gICAgICogIC0gYGVuYCBzZXQgcmVsYXRpdmUgcGF0aCBmcm9tIFtbd2ViUm9vdF1dLCBvciByZWxhdGl2ZSBwYXRoIGZyb20gY3VycmVudCBzY2lycHQgb3duZXIgaHRtbCAoSXQgZG9lc24ndCBzdGFydCBmcm9tIFwiL1wiKS5cclxuICAgICAqICAtIGBqYWAgW1t3ZWJSb290XV0g44GL44KJ44Gu55u45a++44OR44K5LCDjgoLjgZfjgY/jga/jgqvjg6zjg7Pjg4jjgrnjgq/jg6rjg5fjg4jjgpLotbDjgonjgZvjgabjgYTjgosgSFRNTCDjgYvjgonjga7nm7jlr77jg5HjgrkgKFwiL1wiIOOBquOBlykuXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBmdW5jdGlvbiB0b1VybChwYXRoOiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgICAgIGlmIChudWxsICE9IHBhdGhbMF0gJiYgXCIvXCIgPT09IHBhdGhbMF0pIHtcclxuICAgICAgICAgICAgcmV0dXJuIENEUC50b1VybChwYXRoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gJC5tb2JpbGUucGF0aC5tYWtlVXJsQWJzb2x1dGUocGF0aCwgZ2V0Q3VycmVudERvY3VtZW50VXJsKCkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBlbiBHZXQgY3VycmVudCBkb2N1bWVudCB1cmwuXHJcbiAgICAgKiBAamEg54++5Zyo6KGo56S644GX44Gm44GE44KL44OJ44Kt44Ol44Oh44Oz44OI44GuIFVSTCDjgpLlj5blvpdcclxuICAgICAqXHJcbiAgICAgKiBAaW50ZXJuYWxcclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gZ2V0Q3VycmVudERvY3VtZW50VXJsKCk6IHN0cmluZyB7XHJcbiAgICAgICAgY29uc3QgJGFjdGl2ZVBhZ2UgPSAoPGFueT4kKFwiYm9keVwiKSkucGFnZWNvbnRhaW5lcihcImdldEFjdGl2ZVBhZ2VcIik7XHJcbiAgICAgICAgaWYgKG51bGwgPT0gJGFjdGl2ZVBhZ2UpIHtcclxuICAgICAgICAgICAgcmV0dXJuICQubW9iaWxlLnBhdGguZG9jdW1lbnRCYXNlLmhyZWZOb0hhc2g7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBiYXNlID0gJC5tb2JpbGUucGF0aC5kb2N1bWVudEJhc2UuaHJlZk5vSGFzaDtcclxuICAgICAgICBsZXQgdXJsID0gJC5tb2JpbGUuYWN0aXZlUGFnZS5jbG9zZXN0KFwiLnVpLXBhZ2VcIikuanFtRGF0YShcInVybFwiKTtcclxuXHJcbiAgICAgICAgaWYgKCF1cmwgfHwgISQubW9iaWxlLnBhdGguaXNQYXRoKHVybCkpIHtcclxuICAgICAgICAgICAgdXJsID0gYmFzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiAkLm1vYmlsZS5wYXRoLm1ha2VVcmxBYnNvbHV0ZSh1cmwsIGJhc2UpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGVuIERlZmF1bHQgXCJiZWZvcmUgcm91dGUgY2hhbmdlXCIgaGFuZGxlci5cclxuICAgICAqIEBqYSDml6Llrprjga4gXCJiZWZvcmUgcm91dGUgY2hhbmdlXCIg44OP44Oz44OJ44OpXHJcbiAgICAgKlxyXG4gICAgICogQGludGVybmFsXHJcbiAgICAgKi9cclxuICAgIGxldCBfYmVmb3JlUm91dGVDaGFuZ2UgPSAoKTogSVByb21pc2VCYXNlPGFueT4gPT4ge1xyXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gZGVmYXVsdCBcImJlZm9yZSByb3V0ZSBjaGFuZ2VcIiBoYW5uZGxlclxyXG4gICAgY29uc3QgX2RlZmF1bHRCZWZvcmVSb3V0ZUNoYW5nZSA9IF9iZWZvcmVSb3V0ZUNoYW5nZTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBlbiBTZXR1cCBcImJlZm9yZSByb3V0ZSBjaGFuZ2VcIiBoYW5kbGVyLlxyXG4gICAgICogQGphIFwiYmVmb3JlIHJvdXRlIGNoYW5nZVwiIOODj+ODs+ODieODqeioreWumlxyXG4gICAgICpcclxuICAgICAqIEBpbnRlcm5hbFxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbVxyXG4gICAgICogIC0gYGVuYCBoYW5kbGVyIGZ1bmN0aW9uLlxyXG4gICAgICogIC0gYGphYCBoYW5kbGVyIOaMh+Wumi5cclxuICAgICAqIEByZXR1cm5zXHJcbiAgICAgKiAgLSBgZW5gIG9sZCBoYW5kbGVyIGZ1bmN0aW9uLlxyXG4gICAgICogIC0gYGphYCDku6XliY3jga4gaGFuZGxlci5cclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIHNldEJlZm9yZVJvdXRlQ2hhbmdlSGFuZGxlcihoYW5kbGVyOiAoKSA9PiBJUHJvbWlzZUJhc2U8YW55Pik6ICgpID0+IElQcm9taXNlQmFzZTxhbnk+IHtcclxuICAgICAgICBpZiAobnVsbCA9PSBoYW5kbGVyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfYmVmb3JlUm91dGVDaGFuZ2U7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3Qgb2xkSGFuZGxlciA9IF9iZWZvcmVSb3V0ZUNoYW5nZTtcclxuICAgICAgICAgICAgX2JlZm9yZVJvdXRlQ2hhbmdlID0gaGFuZGxlcjtcclxuICAgICAgICAgICAgcmV0dXJuIG9sZEhhbmRsZXI7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXy8vXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZW4gaW5pdGlhbGl6ZSBvcHRpb24gZGVmaW5pdGlvbi5cclxuICAgICAqIEBqYSDliJ3mnJ/ljJbjgqrjg5fjgrfjg6fjg7NcclxuICAgICAqXHJcbiAgICAgKiBAaW50ZXJuYWxcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBJbml0T3B0aW9ucyB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQGVuIHRydWU6IHN1cHBvcnRzIGltcGxpY2l0IGFuY2hvciBcInZjbGlja1wiLlxyXG4gICAgICAgICAqIEBqYSB0cnVlOiDmmpfpu5njga4gYW5jaG9yIHZjbGljayDjgpLjgrXjg53jg7zjg4hcclxuICAgICAgICAgKi9cclxuICAgICAgICBhbmNob3JWY2xpY2s/OiBib29sZWFuO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAZW4ganVkZ2UgdGhlIHRyYW5zaXRpb24gaXMgZmlyc3QgcGFnZSdzLlxyXG4gICAgICAgICAqIEBqYSDliJ3mnJ/jg5rjg7zjgrjjg4jjg6njg7Pjgrjjgrfjg6fjg7PjgafjgYLjgovjgYvliKTlrppcclxuICAgICAgICAgKi9cclxuICAgICAgICBmaXJzdFBhZ2VUcmFuc2l0aW9uPzogYm9vbGVhbjtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBlbiBNYW5hZ2VtZW50IGluZm8gZm9yIHBhZ2UuIDxicj5cclxuICAgICAqICAgICBUaGlzIGludGVyZmFjZSByb2xlIGlzIG5vdCBzYW1lIGFzIEJhY2tib25lLlJvdXRlci5yb3V0ZXMuIDxicj5cclxuICAgICAqICAgICBVc2luZyBmb3IgcmVzb2x2aW5nIHJlbGF0aW9uIGEga25vd24gZnJhZ21lbnQgdmFsdWUgYW5kIGEgcGFnZSBwYXRoLlxyXG4gICAgICpcclxuICAgICAqIEBqYSDjg5rjg7zjgrjnrqHnkIbmg4XloLEgPGJyPlxyXG4gICAgICogICAgIEJhY2tib25lLlJvdXRlci5yb3V0ZXMg44Go5ZCM44GY5b255Ymy44Gn44Gv44Gq44GE44CCIDxicj5cclxuICAgICAqICAgICDpgbfnp7vjgZfjgZ/jgZPjgajjgYzjgYLjgovjg5Xjg6njgrDjg6Hjg7Pjg4jlgKTjgajjg5rjg7zjgrjjga7jg5Hjgrnjga7op6Pmsbrjgavkvb/nlKjjgZXjgozjgovjgIJcclxuICAgICAqXHJcbiAgICAgKiBAaW50ZXJuYWxcclxuICAgICAqL1xyXG4gICAgaW50ZXJmYWNlIFJvdXRlQ29udGV4dCB7XHJcbiAgICAgICAgcm91dGU6IHN0cmluZztcclxuICAgICAgICByZWdleHA6IFJlZ0V4cDtcclxuICAgICAgICBwYWdlOiBzdHJpbmc7XHJcbiAgICAgICAgdG9wOiBib29sZWFuO1xyXG4gICAgICAgIGNhbGxiYWNrOiAoLi4uYXJnczogYW55W10pID0+IGJvb2xlYW47XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZW4gU3RvcmVkIGFkZGl0aW9uYWwgaW5mbyBpbnRlcmZhY2Ugb24gbmF2aWdhdGUuXHJcbiAgICAgKiBAamEg44Oa44O844K46YG356e744Gr6Zai44GZ44KL5LuY5Yqg5oOF5aCx44KS5qC857SN44GZ44KL44Kk44Oz44K/44O844OV44Kn44Kk44K5XHJcbiAgICAgKlxyXG4gICAgICogQGludGVybmFsXHJcbiAgICAgKi9cclxuICAgIGludGVyZmFjZSBOYXZpZ2F0ZUluZm8ge1xyXG4gICAgICAgIHVybD86IHN0cmluZztcclxuICAgICAgICB0cmFuc2l0aW9uPzogc3RyaW5nO1xyXG4gICAgICAgIHJldmVyc2U/OiBib29sZWFuO1xyXG4gICAgICAgIGJhY2tEZXN0aW5hdGlvbj86IHN0cmluZztcclxuICAgICAgICBub0hhc2hDaGFuZ2U/OiBib29sZWFuO1xyXG4gICAgICAgIGludGVudD86IEludGVudDtcclxuICAgICAgICAvLyBzdGF0dXMgcGFyYW1zXHJcbiAgICAgICAgcG9zaXRpdmVOYXZpZ2F0ZT86IGJvb2xlYW47XHJcbiAgICAgICAgY2FsbGVkQmVmb3JlUm91dGVDaGFuZ2U/OiBib29sZWFuO1xyXG4gICAgICAgIGluTmF2aWdhdGlvbj86IGJvb2xlYW47XHJcbiAgICAgICAgaW5BZGRpdGlvbmFsQmFjaz86IGJvb2xlYW47XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZW4gRXh0ZW5lZCBTdWJGbG93UGFyYW0gaW50ZXJmYWNlIGluIEZyYW1ld29yayB1c2UuXHJcbiAgICAgKiBAamEgRnJhbWV3b3JrIOOBjOS9v+eUqOOBmeOCiyBTdWJGbG93UGFyYW0g5ouh5by144Kk44Oz44K/44O844OV44Kn44Kk44K5XHJcbiAgICAgKlxyXG4gICAgICogQGludGVybmFsXHJcbiAgICAgKi9cclxuICAgIGludGVyZmFjZSBTdWJGbG93UGFyYW1FeCBleHRlbmRzIFN1YkZsb3dQYXJhbSB7XHJcbiAgICAgICAgYWRkaXRpb25hbERpc3RhbmNlPzogbnVtYmVyO1xyXG4gICAgfVxyXG5cclxuICAgIC8vX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXy8vXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZW4gUm91dGVyIGNsYXNzIGZvciBhZGp1c3RpbmcgalF1ZXJ5TW9iaWxlIGZ1bmN0aW9ucyBhbmQgQmFja2JvbmUuUm91dGVyIGZ1bmN0aW9ucy4gPGJyPlxyXG4gICAgICogICAgIEV2ZW4gaWYgQmFja2JvbmUuUm91dGVyIGRvZXMgbm90IHN0YXJ0IHJvdXRpbmcsIG5hdGlnYXRlKCkgbWV0aG9kIHdvcmtzIGdvb2Qgd2l0aCBqUU0gZnJhbWV3b3JrLlxyXG4gICAgICpcclxuICAgICAqIEBqYSBqUXVlcnlNb2JpbGUg44GoIEJhY2tib25lLlJvdXRlciDjgpLoqr/lgZzjgZnjgosgUm91dGVyIOOCr+ODqeOCuSA8YnI+XHJcbiAgICAgKiAgICAg44Or44O844OG44Kj44Oz44Kw44KS6ZaL5aeL44GX44Gm44GE44Gq44GE5aC05ZCI44Gr44KC44CBbmF2aWdhdGUoKSDjga8galFNIOODleODrOODvOODoOODr+ODvOOCr+OCkuS9v+eUqOOBl+OBpuapn+iDveOBmeOCi+OAglxyXG4gICAgICovXHJcbiAgICBleHBvcnQgY2xhc3MgUm91dGVyIHtcclxuXHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgc19pbml0T3B0aW9uczogSW5pdE9wdGlvbnMgPSB7fTtcclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBzX3JvdXRlcjogQmFja2JvbmUuUm91dGVyID0gbnVsbDtcclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBzX3Jvb3RDb250ZXh0czogT2JqZWN0ID0ge307XHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgc19sYXN0TmF2aWdhdGVJbmZvOiBOYXZpZ2F0ZUluZm8gPSB7fTtcclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBzX2xhc3RDbGlja2VkVGltZTogbnVtYmVyID0gbnVsbDtcclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBzX2xhc3RJbnRlbnQ6IEludGVudCA9IHt9O1xyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIHNfZmlyc3RDaGFuZ2VQYWdlOiBib29sZWFuID0gdHJ1ZTtcclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBzX2xvYWRVcmw6IChmcmFnbWVudDogc3RyaW5nKSA9PiBib29sZWFuID0gbnVsbDtcclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBzX2JhY2s6ICgpID0+IHZvaWQgPSBudWxsO1xyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIERFTEFZX1RJTUUgPSAyMDA7ICAgICAgICAvLyBUQkQ6IOaaq+WumuWApFxyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIERBVEFfQkFDS19ERVNUSU5BVElPTiA9IFwiZGF0YS1iYWNrLWRzdFwiO1xyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIERBVEFfTk9fSEFTSF9DSEFOR0UgPSBcImRhdGEtbm8taGFzaC1jaGFuZ2VcIjtcclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBEQVRBX05PX1ZDTElDS19IQU5ETEUgPSBcImRhdGEtbm8tdmNsaWNrLWhhbmRsZVwiO1xyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIEJBQ0tfREVTVElOQVRJT05fVVJMID0gXCJiYWNrRHN0VXJsXCI7XHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgU1VCRkxPV19QQVJBTSA9IFwic3ViRmxvd1BhcmFtXCI7XHJcblxyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIHNfZGVmYXVsdEluaXRPcHRpb25zOiBJbml0T3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgYW5jaG9yVmNsaWNrOiB0cnVlLFxyXG4gICAgICAgICAgICBmaXJzdFBhZ2VUcmFuc2l0aW9uOiBmYWxzZSxcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBzX2RlZmF1bHROYXZpZ2F0ZU9wdGlvbnM6IE5hdmlnYXRlT3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgdHJpZ2dlcjogdHJ1ZSxcclxuICAgICAgICAgICAgcmVwbGFjZTogZmFsc2UsXHJcbiAgICAgICAgICAgIGludGVudDogbnVsbCxcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgICAgIC8vIHB1YmxpYyBzdGF0aWMgbWV0aG9kc1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAZW4gZm9yIGluaXRpYWxpemUgUm91dGVyLiB0aGlzIGZ1bmN0aW9uIGlzIGNhbGxlZCBpbiBmcmFtZXdvcmsuXHJcbiAgICAgICAgICogQGphIOOBk+OBrumWouaVsOOBr+ODleODrOODvOODoOODr+ODvOOCr+WGhemDqOOBp+S9v+eUqOOBleOCjOOCi+OAglxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQGludGVybmFsXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gIG9wdGlvbnNcclxuICAgICAgICAgKiAgLSBgZW5gIGluaXQgb3B0aW9uc1xyXG4gICAgICAgICAqICAtIGBqYWAg5Yid5pyf5YyW44Kq44OX44K344On44OzXHJcbiAgICAgICAgICogQHJldHVybnNcclxuICAgICAgICAgKiAgLSBgZW5gIHRydWU6IHN1Y2NlZWRlZCAvIGZhbHNlOiBmYWlsZWQuXHJcbiAgICAgICAgICogIC0gYGphYCB0cnVlOiDmiJDlip8gLyDlpLHmlZdcclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgc3RhdGljIF9pbml0aWFsaXplKG9wdGlvbnM6IEluaXRPcHRpb25zKTogYm9vbGVhbiB7XHJcbiAgICAgICAgICAgIGNvbnN0ICRib2R5ID0gJChcImJvZHlcIik7XHJcbiAgICAgICAgICAgIGlmICghIVJvdXRlci5zX3JvdXRlcikge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFRBRyArIFwibG9naWMgZXJyb3IuIGluaXRpYWxpemUgY2FsbCB0d2ljZS5cIik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIFJvdXRlci5zX2luaXRPcHRpb25zID0gJC5leHRlbmQoe30sIFJvdXRlci5zX2RlZmF1bHRJbml0T3B0aW9ucywgb3B0aW9ucyk7XHJcbiAgICAgICAgICAgIGlmIChSb3V0ZXIuc19pbml0T3B0aW9ucy5maXJzdFBhZ2VUcmFuc2l0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICBSb3V0ZXIuc19maXJzdENoYW5nZVBhZ2UgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gQmFja2JvbmUuUm91dGVyIOOBjOOAgXJvdXRlIOOCkuino+axuuOBp+OBjeOBquOBi+OBo+OBn+WgtOWQiOOBq+OCgumAmuefpeOCkuaNleaNieOBmeOCi+OBn+OCgeOBruOCs+ODvOODq+ODkOODg+OCr+OCkuioreWumlxyXG4gICAgICAgICAgICBSb3V0ZXIuc19sb2FkVXJsID0gXy5iaW5kKEJhY2tib25lLmhpc3RvcnkubG9hZFVybCwgQmFja2JvbmUuaGlzdG9yeSk7XHJcbiAgICAgICAgICAgIEJhY2tib25lLmhpc3RvcnkubG9hZFVybCA9IFJvdXRlci5jdXN0b21Mb2FkVXJsO1xyXG4gICAgICAgICAgICBSb3V0ZXIuc19yb3V0ZXIgPSBuZXcgQmFja2JvbmUuUm91dGVyKCk7XHJcbiAgICAgICAgICAgIFJvdXRlci5zX3JvdXRlci5vbihcInJvdXRlXCIsIFJvdXRlci5vblJvdXRlU3VjY2VlZGVkKTtcclxuXHJcbiAgICAgICAgICAgIC8vIEJhY2tib25lLlJvdXRlciDjgpLkvb/nlKjjgZfjgabjgYTjgovloLTlkIjjgIEkLm1vYmlsZS5iYWNrKCkg44Gu5oyZ5YuV44KS44OW44Op44Km44K244GuW+aIu+OCi13jgavntbHkuIBcclxuICAgICAgICAgICAgaWYgKCEkLm1vYmlsZS5oYXNoTGlzdGVuaW5nRW5hYmxlZCkge1xyXG4gICAgICAgICAgICAgICAgUm91dGVyLnNfYmFjayA9IF8uYmluZCgkLm1vYmlsZS5iYWNrLCAkLm1vYmlsZSk7XHJcbiAgICAgICAgICAgICAgICAkLm1vYmlsZS5iYWNrID0gUm91dGVyLmN1c3RvbUpxbUJhY2s7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIGNoYW5nZVBhZ2Ug44KS44K144Od44O844OIXHJcbiAgICAgICAgICAgIGlmIChudWxsID09ICQubW9iaWxlLmNoYW5nZVBhZ2UpIHtcclxuICAgICAgICAgICAgICAgICQubW9iaWxlLmNoYW5nZVBhZ2UgPSAodG86IGFueSwgb3B0PzogQ2hhbmdlUGFnZU9wdGlvbnMpOiB2b2lkID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAoPGFueT4kYm9keSkucGFnZWNvbnRhaW5lcihcImNoYW5nZVwiLCB0bywgb3B0KTtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIFJvdXRlci5iaW5kRXZlbnRzKCk7XHJcbiAgICAgICAgICAgIC8vIEZyYW1ld29yayDjga7jgqTjg5njg7Pjg4jjg4/jg7Pjg4njg6njgpLmm7TmlrBcclxuICAgICAgICAgICAgRnJhbWV3b3JrLl9zZXR1cEV2ZW50SGFuZGxlcnMoKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQGVuIFJlZ2lzdGVyIHRvIFJvdXRlci5cclxuICAgICAgICAgKiBAamEgUm91dGVyIOOBuOOBrueZu+mMsi5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSByb3V0ZVxyXG4gICAgICAgICAqICAtIGBlbmAgcm91dGUgc3RyaW5nLCBpdCBjYW4gYmUgcmVndWxhciBleHByZXNzaW9uLlxyXG4gICAgICAgICAqICAtIGBqYWAg44Or44O844OG44Kj44Oz44Kw5paH5a2X5YiXIC8g5q2j6KaP6KGo54++XHJcbiAgICAgICAgICogQHBhcmFtIHBhZ2VcclxuICAgICAgICAgKiAgLSBgZW5gIHBhZ2UgdGVtcGxhdGUgcGF0aC5cclxuICAgICAgICAgKiAgLSBgamFgIHBhZ2UgdGVtcGxhdGUgcGF0aC4g44Kk44OZ44Oz44OI5ZCN44Gr44KC5L2/55So44GV44KM44KLXHJcbiAgICAgICAgICogQHBhcmFtIHRvcFxyXG4gICAgICAgICAqICAtIGBlbmAgc2V0IFwidHJ1ZVwiIGlmIGFwcGxpY2F0aW9uJ3MgdG9wIHZpZXcuIChvcHRpb25hbClcclxuICAgICAgICAgKiAgLSBgamFgIFRvcCDjg5rjg7zjgrjjga7loLTlkIjjga8gdHJ1ZSDjgpLmjIflrpogKOS7u+aEjylcclxuICAgICAgICAgKiBAcGFyYW0gY2FsbGJhY2tcclxuICAgICAgICAgKiAgLSBgZW5gIGNhbGxiYWNrIGZvciBjdXN0b20gcGFnZSB0cmFuc2l0aW9uLiBJZiB5b3UgZG9uJ3Qgd2FudCB0byB0cmlnZ2VyIGpRTS5jaGFuZ2VQYWdlKCksIHJldHVybiB0cnVlIGJ5IHRoaXMgY2FsbGJhY2suIChvcHRpb25hbClcclxuICAgICAgICAgKiAgLSBgamFgIOmBt+enu+OCkuiHqui6q+OBp+euoeeQhuOBmeOCi+WgtOWQiOOBq+aMh+WumuOBl+OAgeaIu+OCiuWApOOCkiB0cnVlIOOBq+ioreWumuOBmeOCi+OBqCBjaGFuZ2VQYWdlIOOCkuOCs+ODvOODq+OBl+OBquOBhCAo5Lu75oSPKVxyXG4gICAgICAgICAqIEByZXR1cm5zXHJcbiAgICAgICAgICogIC0gYGVuYCBSb3V0ZXIgaW5zdGFuY2UuXHJcbiAgICAgICAgICogIC0gYGphYCDjgqTjg7Pjgrnjgr/jg7PjgrnjgILjgZ/jgaDjgZcgbWV0aG9kIGNoYWluIOOCkuOBl+OBn+OBhOWgtOWQiOOBr+OAgWFueSBjYXN0IOOBjOW/heimgeOAglxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgcmVnaXN0ZXIocm91dGU6IHN0cmluZywgcGFnZTogc3RyaW5nLCB0b3A6IGJvb2xlYW4gPSBmYWxzZSwgY2FsbGJhY2s/OiAoLi4uYXJnczogYW55W10pID0+IGJvb2xlYW4pOiBSb3V0ZXIge1xyXG4gICAgICAgICAgICAvLyBCYWNrYm9uZS5Sb3V0ZXIg44G444Gu55m76Yyy44GvIGhpc3Rvcnkg44Gu5YGc5q2i44GM5b+F6KaBXHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3RhcnQgPSBSb3V0ZXIuc3RvcCgpO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgbmFtZSA9IHJvdXRlICsgcGFnZTtcclxuICAgICAgICAgICAgY29uc3QgY29udGV4dDogUm91dGVDb250ZXh0ID0ge1xyXG4gICAgICAgICAgICAgICAgcm91dGU6IHJvdXRlLFxyXG4gICAgICAgICAgICAgICAgcmVnZXhwOiAoPGFueT5Sb3V0ZXIuc19yb3V0ZXIpLl9yb3V0ZVRvUmVnRXhwKHJvdXRlKSxcclxuICAgICAgICAgICAgICAgIHBhZ2U6IHBhZ2UsXHJcbiAgICAgICAgICAgICAgICB0b3A6IHRvcCxcclxuICAgICAgICAgICAgICAgIGNhbGxiYWNrOiBjYWxsYmFjayB8fCBmdW5jdGlvbiAoKSB7IHJldHVybiBmYWxzZTsgfVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgaWYgKFJvdXRlci5wdXNoQ29udGV4dChuYW1lLCBjb250ZXh0KSkge1xyXG4gICAgICAgICAgICAgICAgUm91dGVyLnNfcm91dGVyLnJvdXRlKHJvdXRlLCBuYW1lLCAoKSA9PiB7Lyogbm9vcCAqLyB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHJlc3RhcnQpIHtcclxuICAgICAgICAgICAgICAgIC8vIOWGjemWi+aZguOBr+WGjeiqreOBv+i+vOOBv+OBl+OBquOBhOOAglxyXG4gICAgICAgICAgICAgICAgUm91dGVyLnN0YXJ0KHsgc2lsZW50OiB0cnVlLCBwYWdlQ29uc3RydWN0OiBmYWxzZSB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIFJvdXRlcjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBlbiBTdGFydCBsaXN0ZW5pbmcgaGFzaCBjaGFuZ2UuIDxicj5cclxuICAgICAgICAgKiAgICAgSXQgc2hvdWxkIGJlIGNhbGxlZCBhZnRlciByZWdpc3RlcigpLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQGphIOWxpeattOebo+imluOBrumWi+WniyA8YnI+XHJcbiAgICAgICAgICogICAgIOeZu+mMsuWujOS6huW+jOOBq+OCr+ODqeOCpOOCouODs+ODiOOBjOWRvOOBtuOBk+OBqOOBp+ODmuODvOOCuOmBt+enu+OBjOmWi+Wni+OBleOCjOOCi+OAglxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIG9wdGlvbnNcclxuICAgICAgICAgKiAgLSBgZW5gIG9wdGlvbnMgb2JqZWN0IGZvciBCYWNrYm9uZS5IaXN0b3J5LlxyXG4gICAgICAgICAqICAtIGBqYWAgQmFja2JvbmUuSGlzdG9yeSDjgavjgo/jgZ/jgovjgqrjg5fjgrfjg6fjg7NcclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHN0YXJ0KG9wdGlvbnM/OiBSb3V0ZXJPcHRpb25zKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGNvbnN0IG9wdCA9ICQuZXh0ZW5kKHsgcGFnZUNvbnN0cnVjdDogdHJ1ZSB9LCBvcHRpb25zKTtcclxuICAgICAgICAgICAgaWYgKG9wdC5wYWdlQ29uc3RydWN0KSB7XHJcbiAgICAgICAgICAgICAgICBGcmFtZXdvcmsuY29uc3RydWN0UGFnZXMoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoJC5tb2JpbGUuaGFzaExpc3RlbmluZ0VuYWJsZWQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoVEFHICsgXCJzZXR0aW5nIGVycm9yLiBjb25maWN0OiAkLm1vYmlsZS5oYXNoTGlzdGVuaW5nRW5hYmxlZCA9IHRydWUsIGNhbm5vdCBzdGFydC5cIik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgQmFja2JvbmUuaGlzdG9yeS5zdGFydChvcHQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQGVuIFN0b3AgbGlzdGVuaW5nIGhhc2ggY2hhbmdlLlxyXG4gICAgICAgICAqIEBqYSDlsaXmrbTnm6Poppbjga7lgZzmraJcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm5zXHJcbiAgICAgICAgICogIC0gYGVuYCBwcmV2aW91cyBzdGF0dXMuXHJcbiAgICAgICAgICogIC0gYGphYCDku6XliY3jga7plovlp4vnirbmhYvjgpLov5TljbRcclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHN0b3AoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHByZXZTdGF0ZSA9ICg8YW55PkJhY2tib25lLkhpc3RvcnkpLnN0YXJ0ZWQ7XHJcbiAgICAgICAgICAgIEJhY2tib25lLmhpc3Rvcnkuc3RvcCgpO1xyXG4gICAgICAgICAgICByZXR1cm4gcHJldlN0YXRlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQGVuIENoZWNrIHJvdXRpbmcgc3RhdHVzLlxyXG4gICAgICAgICAqIEBqYSDjg6vjg7zjg4bjgqPjg7PjgrDjgpLplovlp4vjgZfjgabjgYTjgovjgYvliKTlrppcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm5zXHJcbiAgICAgICAgICogIC0gYGVuYCB0cnVlOiByb3V0aW5nIC8gZmFsc2U6IG5vdCByb3V0aW5nXHJcbiAgICAgICAgICogIC0gYGVuYCB0cnVlOiDmnInlirkgLyBmYWxzZTog54Sh5Yq5XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBpc1JvdXRpbmcoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgICAgIHJldHVybiAoPGFueT5CYWNrYm9uZS5IaXN0b3J5KS5zdGFydGVkO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQGVuIFVSTCBuYXZpZ2F0aW9uLlxyXG4gICAgICAgICAqIEBqYSBVUkzpgbfnp7tcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB1cmxcclxuICAgICAgICAgKiAgLSBgZW5gIHNldCBhIG5hdmlnYXRlIFVSTC4gKHJlbGF0aXZlIHBhdGggLyBhYnNvbHV0ZSBwYXRoIC8gZnJhZ21lbnQpXHJcbiAgICAgICAgICogIC0gYGphYCDpgbfnp7sgVVJMIOOCkuaMh+WumiAo55u45a++44OR44K5L+e1tuWvvuODkeOCuS/jg5Xjg6njgrDjg6Hjg7Pjg4gpXHJcbiAgICAgICAgICogQHBhcmFtIHRyYW5zaXRpb25cclxuICAgICAgICAgKiAgLSBgZW5gIHNldCBhIHRyYW5zaXRpb24gc3RyaW5nLlxyXG4gICAgICAgICAqICAtIGBqYWAgdHJhbnNpdGlvbiDjgavkvb/nlKjjgZnjgosgZWZmZWN0IOOCkuaMh+WumlxyXG4gICAgICAgICAqIEBwYXJhbSByZXZlcnNlXHJcbiAgICAgICAgICogIC0gYGVuYCBzZXQgYSBkaXJlY3Rpb24gc3RyaW5nIGZvciB0cmFuc2l0aW9uLiB0cnVlOnJldmVyc2UgLyBmYWxzZTpub21hbFxyXG4gICAgICAgICAqICAtIGBqYWAgdHJhbnNpdGlvbiDjgavkvb/nlKjjgZnjgosgZGlyZWN0aW9uIOOCkuaMh+WumiB0cnVlOnJldmVyc2UvZmFsc2U66YCa5bi4XHJcbiAgICAgICAgICogQHBhcmFtIG9wdGlvbnNcclxuICAgICAgICAgKiAgLSBgZW5gIHNldCBhIG9wdGlvbnMgb2JqZWN0IGZvciBCYWNrYm9uZS5Sb3V0ZXIubmF2aWdhdGUoKS5cclxuICAgICAgICAgKiAgLSBgamFgIEJhY2tib25lLlJvdXRlci5uYXZpZ2F0ZSgpIOOBq+a4oeOBleOCjOOCi+OCquODl+OCt+ODp+ODs1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgbmF2aWdhdGUodXJsOiBzdHJpbmcsIHRyYW5zaXRpb24/OiBzdHJpbmcsIHJldmVyc2U/OiBib29sZWFuLCBvcHRpb25zPzogTmF2aWdhdGVPcHRpb25zKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGlmICghIVJvdXRlci5zX2xhc3ROYXZpZ2F0ZUluZm8uaW5OYXZpZ2F0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAvLyDjgZnjgafjgasgTmF2aWdhdGlvbiDkuK3jgafjgYLjgozjgbDmipHmraJcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihUQUcgKyBcIlJvdXRlci5uYXZpZ2F0ZSgpIGNhbGxlZCBpbiBuYXZpZ2F0aW9uIHByb2MuXCIpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKFJvdXRlci5pbml0Rmlyc3RQYWdlSWZOZWVkZWQodXJsKSkgeyAvLyBhdXRvSW5pdGlhbGl6ZVBhZ2Ug44GM5oyH5a6a44GV44KM44Gm44GE44Gq44GE44Go44GNXHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IG5hdk9wdGlvbnM6IE5hdmlnYXRlT3B0aW9ucyA9ICQuZXh0ZW5kKHt9LCBSb3V0ZXIuc19kZWZhdWx0TmF2aWdhdGVPcHRpb25zLCBvcHRpb25zKTtcclxuXHJcbiAgICAgICAgICAgIC8vIOODmuODvOOCuOmBt+enu+mWi+Wni+mAmuefpS4gU3ViIEZsb3cg44Gr44Gm44GZ44Gn44Gr44Kz44O844Or44GV44KM44Gm44GE44KL5aC05ZCI44Gv5pei5a6a44Gu5L2V44KC44GX44Gq44GE44Kz44O844Or44OQ44OD44Kv44KS5L2/55So44GZ44KLLlxyXG4gICAgICAgICAgICBjb25zdCBub3RpZnlCZWZvcmVSb3V0ZUNoYW5nZSA9IFJvdXRlci5zX2xhc3ROYXZpZ2F0ZUluZm8uY2FsbGVkQmVmb3JlUm91dGVDaGFuZ2UgPyBfZGVmYXVsdEJlZm9yZVJvdXRlQ2hhbmdlIDogX2JlZm9yZVJvdXRlQ2hhbmdlO1xyXG5cclxuICAgICAgICAgICAgUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mbyA9IHtcclxuICAgICAgICAgICAgICAgIHVybDogdXJsLFxyXG4gICAgICAgICAgICAgICAgdHJhbnNpdGlvbjogdHJhbnNpdGlvbixcclxuICAgICAgICAgICAgICAgIHJldmVyc2U6IHJldmVyc2UsXHJcbiAgICAgICAgICAgICAgICBiYWNrRGVzdGluYXRpb246IG5hdk9wdGlvbnMuYmFja0Rlc3RpbmF0aW9uLFxyXG4gICAgICAgICAgICAgICAgbm9IYXNoQ2hhbmdlOiBuYXZPcHRpb25zLm5vSGFzaENoYW5nZSxcclxuICAgICAgICAgICAgICAgIGludGVudDogbmF2T3B0aW9ucy5pbnRlbnQgfHwge30sXHJcbiAgICAgICAgICAgICAgICBwb3NpdGl2ZU5hdmlnYXRlOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgY2FsbGVkQmVmb3JlUm91dGVDaGFuZ2U6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBpbk5hdmlnYXRpb246IHRydWUsXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvLyDjg5rjg7zjgrjpgbfnp7vplovlp4vpgJrnn6VcclxuICAgICAgICAgICAgbm90aWZ5QmVmb3JlUm91dGVDaGFuZ2UoKVxyXG4gICAgICAgICAgICAgICAgLmZhaWwoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGJlZm9yZVJvdXRlQ2hhbmdlKCkg44GM5aSx5pWX44GX44Gf5aC05ZCI44CB6Ie05ZG955qE44Gq5LiN5YW35ZCI44Go44Gq44KL44Gf44KB44CBZXJyb3Ig6KiY6Yyy44Gu44G/44Gr44GX44Gm5YWI44Gr6YCy44KA44CCXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihUQUcgKyBcImJlZm9yZSByb3V0ZSBjaGFuZ2UgY2FsbCwgZmFpbGVkLlwiKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAuYWx3YXlzKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoUm91dGVyLmlzUm91dGluZygpICYmICFSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvLm5vSGFzaENoYW5nZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobmF2T3B0aW9ucy5zdWJGbG93KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKG5hdk9wdGlvbnMuc3ViRmxvdy5vcGVyYXRpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiYmVnaW5cIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUm91dGVyLnN0YXJ0U3ViRmxvdyhuYXZPcHRpb25zLnN1YkZsb3cpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiZW5kXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJvdXRlci5maW5pc2hTdWJGbG93KG5hdk9wdGlvbnMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47IC8vIG5hdmlnYXRpb24g44Gv5ZG844Gw44Gq44GEXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFRBRyArIFwidW5rbm93biBzdWJGbG93Lm9wZXJhdGlvbi4gb3BlcmF0aW9uOiBcIiArIG5hdk9wdGlvbnMuc3ViRmxvdy5vcGVyYXRpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBCYWNrYm9uZS5oaXN0b3J5Lm5hdmlnYXRlKHVybCwgbmF2T3B0aW9ucyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEJhY2tib25lLmhpc3RvcnkubG9hZFVybCgpIOOBjOOCs+ODvOODq+OBleOCjOOBquOBi+OBo+OBn+WgtOWQiCwgbmF2aWdhdGlvbiDntYLkuoZcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFyZXN1bHQgfHwgXCJzdHJpbmdcIiA9PT0gdHlwZW9mIHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mby5pbk5hdmlnYXRpb24gPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuYXZPcHRpb25zLnN1YkZsb3cpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihUQUcgKyBcInN1YkZsb3cgb25seSBzdXBwb3J0ZWQgdW5kZXIgcm91dGluZyBhbmQgaGFzaCBjaGFuZ2UgY29uZGl0aW9uLlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmcmFnbWVudCA9IEJhY2tib25lLmhpc3RvcnkuZ2V0RnJhZ21lbnQodXJsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNvbnRleHQ6IFJvdXRlQ29udGV4dDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFJvdXRlci5zX2xhc3ROYXZpZ2F0ZUluZm8ubm9IYXNoQ2hhbmdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBub0hhc2hDaGFuZ2Ug44GM5oyH5a6a44GV44KM44Gf44Go44GNXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0ID0gPFJvdXRlQ29udGV4dD5fLmZpbmQoPGFueT5Sb3V0ZXIuc19yb290Q29udGV4dHMsIChjdHg6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjdHgucmVnZXhwLnRlc3QoZnJhZ21lbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBCYWNrYm9uZS5Sb3V0ZXIg44GM5pyJ5Yq544Gn44Gq44GE44Go44GNXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0ID0gPFJvdXRlQ29udGV4dD5fLmZpbmRXaGVyZSg8YW55PlJvdXRlci5zX3Jvb3RDb250ZXh0cywgeyByb3V0ZTogZnJhZ21lbnQgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRleHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybCA9IGNvbnRleHQucGFnZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBSb3V0ZXIuY2hhbmdlUGFnZSh1cmwpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQGVuIE5hdmlnYXRlIGZyb20gVG9wIFBhZ2UuIDxicj5cclxuICAgICAgICAgKiAgICAgSWYgU3ViRmxvdyBzZXQgdXAsIHRoZSBwYXJhbSBpcyBjbGVhcmVkLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQGphIOODiOODg+ODl+ODmuODvOOCuOOBi+OCieOBrueUu+mdoumBt+enuyA8YnI+XHJcbiAgICAgICAgICogICAgIFN1YkZsb3cg44GM5oyH5a6a44GV44KM44Gm44GE44Gf5aC05ZCI44Gv44Kv44Oq44Ki44GV44KM44KLXHJcbiAgICAgICAgICogQHBhcmFtIHRvXHJcbiAgICAgICAgICogIC0gYGVuYCBzZXQgYSBuYXZpZ2F0ZSBVUkwgb3IgUGFnZVN0YWNrT3B0aW9ucyBvYmplY3Qgb3IgYXJyYXkuXHJcbiAgICAgICAgICogIC0gYGphYCDpgbfnp7sgVVJMIC8gUGFnZVN0YWNrT3B0aW9ucyDjgqrjg5bjgrjjgqfjgq/jg4gv6YWN5YiXXHJcbiAgICAgICAgICogQHBhcmFtIHRyYW5zaXRpb25cclxuICAgICAgICAgKiAgLSBgZW5gIHNldCBhIHRyYW5zaXRpb24gc3RyaW5nXHJcbiAgICAgICAgICogIC0gYGphYCB0cmFuc2l0aW9uIOOBq+S9v+eUqOOBmeOCiyBlZmZlY3Qg44KS5oyH5a6aXHJcbiAgICAgICAgICogQHBhcmFtIHJldmVyc2VcclxuICAgICAgICAgKiAgLSBgZW5gIHNldCBhIGRpcmVjdGlvbiBzdHJpbmcgZm9yIHRyYW5zaXRpb24uIHRydWU6cmV2ZXJzZSAvIGZhbHNlOm5vbWFsXHJcbiAgICAgICAgICogIC0gYGphYCB0cmFuc2l0aW9uIOOBq+S9v+eUqOOBmeOCiyBkaXJlY3Rpb24g44KS5oyH5a6aIHRydWU6cmV2ZXJzZS9mYWxzZTrpgJrluLhcclxuICAgICAgICAgKiBAcGFyYW0gb3B0aW9uc1xyXG4gICAgICAgICAqICAtIGBlbmAgc2V0IGEgb3B0aW9ucyBvYmplY3QgZm9yIEJhY2tib25lLlJvdXRlci5uYXZpZ2F0ZSgpLlxyXG4gICAgICAgICAqICAtIGBqYWAgQmFja2JvbmUuUm91dGVyLm5hdmlnYXRlKCkg44Gr5rih44GV44KM44KL44Kq44OX44K344On44OzXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBuYXZpZ2F0ZUZyb21Ub3AoXHJcbiAgICAgICAgICAgIHRvPzogc3RyaW5nIHwgUGFnZVN0YWNrIHwgUGFnZVN0YWNrW10sXHJcbiAgICAgICAgICAgIHRyYW5zaXRpb24/OiBzdHJpbmcsXHJcbiAgICAgICAgICAgIHJldmVyc2U/OiBib29sZWFuLFxyXG4gICAgICAgICAgICBvcHRpb25zPzogTmF2aWdhdGVPcHRpb25zXHJcbiAgICAgICAgKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGNvbnN0IHN0YWNrID0gUm91dGVyLl9nZXRKcW1IaXN0b3J5KCkuc3RhY2s7XHJcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRQYWdlID0gc3RhY2tbUm91dGVyLl9nZXRKcW1IaXN0b3J5KCkuYWN0aXZlSW5kZXhdO1xyXG4gICAgICAgICAgICBjb25zdCBfdHJhbnNpdGlvbiA9IHRyYW5zaXRpb24gfHwgY3VycmVudFBhZ2UudHJhbnNpdGlvbjtcclxuICAgICAgICAgICAgY29uc3QgX3JldmVyc2UgPSAobnVsbCAhPSByZXZlcnNlKSA/IHJldmVyc2UgOiB0cnVlO1xyXG4gICAgICAgICAgICBjb25zdCBkZXN0U3RhY2tzOiBQYWdlU3RhY2tbXSA9ICgoKTogUGFnZVN0YWNrW10gPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKCF0bykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChcInN0cmluZ1wiID09PSB0eXBlb2YgdG8pIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gPFBhZ2VTdGFja1tdPlt7IHJvdXRlOiB0byB9XTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodG8gaW5zdGFuY2VvZiBBcnJheSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0bztcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDxQYWdlU3RhY2tbXT5bdG9dO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KSgpO1xyXG5cclxuICAgICAgICAgICAgLy8g5oyH5a6a44GV44KM44GfIFN1YkZsb3cg44KS5YmK6ZmkXHJcbiAgICAgICAgICAgIHN0YWNrLmZvckVhY2goKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBkZWxldGUgdmFsdWVbUm91dGVyLlNVQkZMT1dfUEFSQU1dO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIC8vIOWIneacn+ODmuODvOOCuOOBqyBTdWJGbG93IOODkeODqeODoeODvOOCv+OCkuaMh+WumlxyXG4gICAgICAgICAgICBzdGFja1swXVtSb3V0ZXIuU1VCRkxPV19QQVJBTV0gPSB7XHJcbiAgICAgICAgICAgICAgICBvcGVyYXRpb246IFwiYmVnaW5cIixcclxuICAgICAgICAgICAgICAgIGRlc3RCYXNlOiBzdGFja1swXS5oYXNoLCAgICAvLyDliJ3mnJ/jg5rjg7zjgrjjga7jg4/jg4Pjgrfjg6VcclxuICAgICAgICAgICAgICAgIGRlc3RTdGFja3M6IGRlc3RTdGFja3MsXHJcbiAgICAgICAgICAgICAgICBhZGRpdGlvbmFsRGlzdGFuY2U6IDAsXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBSb3V0ZXIubmF2aWdhdGUobnVsbCwgX3RyYW5zaXRpb24sIF9yZXZlcnNlLCAkLmV4dGVuZCh7fSwgb3B0aW9ucywge1xyXG4gICAgICAgICAgICAgICAgc3ViRmxvdzoge1xyXG4gICAgICAgICAgICAgICAgICAgIG9wZXJhdGlvbjogXCJlbmRcIixcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQCBlbiBCYWNrIHRvIHByZXZpb3VzIGhpc3RvcnkuIDxicj5cclxuICAgICAgICAgKiAgICAgIEl0J3Mgc2FtZSBhcyBicm93c2VyIGJhY2sgYnV0dG9uJ3MgYmVoYXZpb3VyLiA8YnI+XHJcbiAgICAgICAgICogICAgICBbTm90ZV0gSWYgc2V0IHRoZSBqUU06IGRhdGEtcmVsPVwiYmFja1wiLCB3b3JrIGFzIHdlbGwuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAamEg5bGl5q2044KS5oi744KLIDxicj5cclxuICAgICAgICAgKiAgICAg44OW44Op44Km44K244Gu5oi744KL44Oc44K/44Oz44Go5ZCM44GY5oyZ5YuV44CCIDxicj5cclxuICAgICAgICAgKiAgICAgalFNOiBkYXRhLXJlbD1cImJhY2tcIiDjgpLmjIflrprjgZfjgabjgoLlkIzjgZjjgafjgYLjgovjgZPjgajjgavms6jmhI/jgIJcclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGJhY2soKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGlmICghIVJvdXRlci5zX2xhc3ROYXZpZ2F0ZUluZm8uaW5OYXZpZ2F0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAvLyDjgZnjgafjgasgTmF2aWdhdGlvbiDkuK3jgafjgYLjgozjgbDmipHmraJcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihUQUcgKyBcIlJvdXRlci5iYWNrKCkgY2FsbGVkIGluIG5hdmlnYXRpb24gcHJvYy5cIik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoUm91dGVyLmlzVG9wUGFnZSgpKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBUb3Ag44Oa44O844K444Gr5oyH5a6a44GV44KM44Gm44GE44KM44Gw57WC5LqGXHJcbiAgICAgICAgICAgICAgICBjb25zdCBhcHAgPSAoPGFueT5uYXZpZ2F0b3IpLmFwcCB8fCB7fTtcclxuICAgICAgICAgICAgICAgIGlmICghIWFwcC5leGl0QXBwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXBwLmV4aXRBcHAoKTsgICAgLy8gbm90ZTogbmV2ZXIgZXhpdCBvbiBpT1NcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIFJvdXRlci5zX2xhc3ROYXZpZ2F0ZUluZm8gPSB7XHJcbiAgICAgICAgICAgICAgICBpbk5hdmlnYXRpb246IHRydWUsXHJcbiAgICAgICAgICAgICAgICBjYWxsZWRCZWZvcmVSb3V0ZUNoYW5nZTogdHJ1ZSxcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIC8vIOODmuODvOOCuOmBt+enu+mWi+Wni+mAmuefpVxyXG4gICAgICAgICAgICBfYmVmb3JlUm91dGVDaGFuZ2UoKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICQubW9iaWxlLmJhY2soKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAuZmFpbCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcImJlZm9yZSByb3V0ZSBjaGFuZ2UgY2FsbCwgZmFpbGVkLlwiKTtcclxuICAgICAgICAgICAgICAgICAgICBSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvID0ge307XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBlbiBTdG9yZSBJbnRlbnQgb2JqZWN0IGJ5IGZyYW13b3JrLlxyXG4gICAgICAgICAqIEBqYSBJbnRlbnQg44KS5qC857SN44CCIOODleODrOODvOODoOODr+ODvOOCr+OBjOS9v+eUqOOBmeOCi+OAglxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQGludGVybmFsXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBfcHVzaEludGVudChpbnRlbnQ6IEludGVudCk6IHZvaWQge1xyXG4gICAgICAgICAgICBSb3V0ZXIuc19sYXN0SW50ZW50ID0gJC5leHRlbmQodHJ1ZSwgUm91dGVyLnNfbGFzdEludGVudCwgaW50ZW50KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBlbiBHZXQgSW50ZW50IG9iamVjdCBieSBmcmFtZXdvcmsuXHJcbiAgICAgICAgICogQGphIEludGVudCDjgpLlj5blvpfjgILjg5Xjg6zjg7zjg6Djg6/jg7zjgq/jgYzkvb/nlKjjgZnjgovjgIJcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBpbnRlcm5hbFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgX3BvcEludGVudCgpOiBJbnRlbnQge1xyXG4gICAgICAgICAgICBjb25zdCBpbnRlbnQgPSBSb3V0ZXIuc19sYXN0SW50ZW50O1xyXG4gICAgICAgICAgICBSb3V0ZXIuc19sYXN0SW50ZW50ID0ge307XHJcbiAgICAgICAgICAgIHJldHVybiBpbnRlbnQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAZW4gR2V0IHF1ZXJ5IHBhcmFtZXRlcnMuIDxicj5cclxuICAgICAgICAgKiAgICAgSXQgY2FuIGJlIGFjY2Vzc2VkIGR1cmluZyBcInBhZ2ViZWZvcmVjcmVhdGVcIiB0byBcInBhZ2VjaGFuZ2VcIi5cclxuICAgICAgICAgKiBAamEgcXVlcnkgcGFyYW1ldGVyIOOBq+aMh+WumuOBleOCjOOBn+W8leaVsOOBruWPluW+lyA8YnI+XHJcbiAgICAgICAgICogICAgIOODmuODvOOCuOmBt+enu+S4reOBq+OBruOBv+OCouOCr+OCu+OCueWPr+iDvSAocGFnZWJlZm9yZWNyZWF0ZSDvvZ4gcGFnZWNoYW5nZSlcclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGdldFF1ZXJ5UGFyYW1ldGVycygpOiBhbnkge1xyXG4gICAgICAgICAgICBpZiAoUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mby5pbnRlbnQgJiYgUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mby5pbnRlbnQucGFyYW1zKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mby5pbnRlbnQucGFyYW1zW1wicXVlcnlQYXJhbXNcIl07XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQGVuIEJlZ2luIHN1YiBmbG93IHRyYW5zYWN0aW9uLlxyXG4gICAgICAgICAqIEBqYSBzdWIgZmxvdyDjg4jjg6njg7Pjgrbjgq/jgrfjg6fjg7Pjga7plovlp4tcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB1cmxcclxuICAgICAgICAgKiAgLSBgZW5gIHNldCBhIG5hdmlnYXRlIFVSTC4gKHJlbGF0aXZlIHBhdGggLyBhYnNvbHV0ZSBwYXRoIC8gZnJhZ21lbnQpXHJcbiAgICAgICAgICogIC0gYGphYCDpgbfnp7sgVVJMIOOCkuaMh+WumiAo55u45a++44OR44K5L+e1tuWvvuODkeOCuS/jg5Xjg6njgrDjg6Hjg7Pjg4gpXHJcbiAgICAgICAgICogQHBhcmFtIG9wdGlvbnNcclxuICAgICAgICAgKiAgLSBgZW5gIHNldCBhIG9wdGlvbnMgb2JqZWN0IGZvciBCYWNrYm9uZS5Sb3V0ZXIubmF2aWdhdGUoKS5cclxuICAgICAgICAgKiAgLSBgamFgIEJhY2tib25lLlJvdXRlci5uYXZpZ2F0ZSgpIOOBq+a4oeOBleOCjOOCi+OCquODl+OCt+ODp+ODs1xyXG4gICAgICAgICAqIEBwYXJhbSB0cmFuc2l0aW9uXHJcbiAgICAgICAgICogIC0gYGVuYCBzZXQgYSB0cmFuc2l0aW9uIHN0cmluZ1xyXG4gICAgICAgICAqICAtIGBqYWAgdHJhbnNpdGlvbiDjgavkvb/nlKjjgZnjgosgZWZmZWN0IOOCkuaMh+WumlxyXG4gICAgICAgICAqIEBwYXJhbSByZXZlcnNlXHJcbiAgICAgICAgICogIC0gYGVuYCBzZXQgYSBkaXJlY3Rpb24gc3RyaW5nIGZvciB0cmFuc2l0aW9uLiB0cnVlOnJldmVyc2UgLyBmYWxzZTpub21hbFxyXG4gICAgICAgICAqICAtIGBqYWAgdHJhbnNpdGlvbiDjgavkvb/nlKjjgZnjgosgZGlyZWN0aW9uIOOCkuaMh+WumiB0cnVlOnJldmVyc2UvZmFsc2U66YCa5bi4XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBiZWdpblN1YkZsb3codXJsOiBzdHJpbmcsIG9wdGlvbnM6IE5hdmlnYXRlT3B0aW9ucywgdHJhbnNpdGlvbj86IHN0cmluZywgcmV2ZXJzZT86IGJvb2xlYW4pOiB2b2lkIHtcclxuICAgICAgICAgICAgY29uc3Qgb3B0OiBOYXZpZ2F0ZU9wdGlvbnMgPSAkLmV4dGVuZCh7fSwgb3B0aW9ucyk7XHJcbiAgICAgICAgICAgIG9wdC5zdWJGbG93ID0gb3B0LnN1YkZsb3cgfHwgeyBvcGVyYXRpb246IFwiYmVnaW5cIiB9O1xyXG4gICAgICAgICAgICBpZiAoXCJiZWdpblwiICE9PSBvcHQuc3ViRmxvdy5vcGVyYXRpb24pIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoVEFHICsgXCJsb2dpYyBlcnJvci4gaW52YWxpZCBzdWJmbG93IG9wZXJhdGlvbi4gW29wZXJhdGlvbjogXCIgKyBvcHQuc3ViRmxvdy5vcGVyYXRpb24gKyBcIl1cIik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgUm91dGVyLm5hdmlnYXRlKHVybCwgdHJhbnNpdGlvbiwgcmV2ZXJzZSwgb3B0KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBlbiBDb21taXQgc3ViIGZsb3cgdHJhbnNhY3Rpb24uXHJcbiAgICAgICAgICogQGphIHN1YiBmbG93IOODiOODqeODs+OCtuOCr+OCt+ODp+ODs+OBrue1guS6hlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHRyYW5zaXRpb25cclxuICAgICAgICAgKiAtIGBlbmAgc2V0IGEgdHJhbnNpdGlvbiBzdHJpbmdcclxuICAgICAgICAgKiAtIGBqYWAgdHJhbnNpdGlvbiDjgavkvb/nlKjjgZnjgosgZWZmZWN0IOOCkuaMh+WumlxyXG4gICAgICAgICAqIEBwYXJhbSByZXZlcnNlXHJcbiAgICAgICAgICogLSBgZW5gIHNldCBhIGRpcmVjdGlvbiBzdHJpbmcgZm9yIHRyYW5zaXRpb24uIHRydWU6cmV2ZXJzZSAvIGZhbHNlOm5vbWFsXHJcbiAgICAgICAgICogLSBgamFgIHRyYW5zaXRpb24g44Gr5L2/55So44GZ44KLIGRpcmVjdGlvbiDjgpLmjIflrpogdHJ1ZTpyZXZlcnNlL2ZhbHNlOumAmuW4uFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgY29tbWl0U3ViRmxvdyh0cmFuc2l0aW9uPzogc3RyaW5nLCByZXZlcnNlPzogYm9vbGVhbik6IHZvaWQge1xyXG4gICAgICAgICAgICBSb3V0ZXIubmF2aWdhdGUobnVsbCwgdHJhbnNpdGlvbiwgcmV2ZXJzZSwge1xyXG4gICAgICAgICAgICAgICAgc3ViRmxvdzoge1xyXG4gICAgICAgICAgICAgICAgICAgIG9wZXJhdGlvbjogXCJlbmRcIixcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAZW4gQ2FuY2VsIHN1YiBmbG93IHRyYW5zYWN0aW9uLlxyXG4gICAgICAgICAqIEBqYSBzdWIgZmxvdyDjg4jjg6njg7Pjgrbjgq/jgrfjg6fjg7Pjga7jgq3jg6Pjg7Pjgrvjg6tcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB0cmFuc2l0aW9uXHJcbiAgICAgICAgICogIC0gYGVuYCBzZXQgYSB0cmFuc2l0aW9uIHN0cmluZ1xyXG4gICAgICAgICAqICAtIGBqYWAgdHJhbnNpdGlvbiDjgavkvb/nlKjjgZnjgosgZWZmZWN0IOOCkuaMh+WumlxyXG4gICAgICAgICAqIEBwYXJhbSByZXZlcnNlXHJcbiAgICAgICAgICogIC0gYGVuYCBzZXQgYSBkaXJlY3Rpb24gc3RyaW5nIGZvciB0cmFuc2l0aW9uLiB0cnVlOnJldmVyc2VbZGVmYXVsdF0gLyBmYWxzZTpub21hbFxyXG4gICAgICAgICAqICAtIGBqYWAgdHJhbnNpdGlvbiDjgavkvb/nlKjjgZnjgosgZGlyZWN0aW9uIOOCkuaMh+WumiB0cnVlOnJldmVyc2Vb5pei5a6aXS9mYWxzZTrpgJrluLhcclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGNhbmNlbFN1YkZsb3codHJhbnNpdGlvbj86IHN0cmluZywgcmV2ZXJzZT86IGJvb2xlYW4pOiB2b2lkIHtcclxuICAgICAgICAgICAgLy8g6LW354K544Gu44Oa44O844K444Gr5oi744KLXHJcbiAgICAgICAgICAgIGNvbnN0IGJhc2VJbmZvID0gUm91dGVyLmRldGVjdFN1YkZsb3dCYXNlSW5mbygpO1xyXG4gICAgICAgICAgICBiYXNlSW5mby5zdWJGbG93UGFyYW0uYWRkaXRpb25hbERpc3RhbmNlID0gMDtcclxuICAgICAgICAgICAgUm91dGVyLm5hdmlnYXRlKG51bGwsIHRyYW5zaXRpb24sXHJcbiAgICAgICAgICAgICAgICAobnVsbCAhPSByZXZlcnNlKSA/IHJldmVyc2UgOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHN1YkZsb3c6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3BlcmF0aW9uOiBcImVuZFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZXN0U3RhY2tzOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQGVuIENoZWNrIGluIHN1YiBmbG93LlxyXG4gICAgICAgICAqIEBqYSBzdWIgZmxvdyDlhoXjgafjgYLjgovjgYvliKTlrppcclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGlzSW5TdWJGbG93KCk6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICBjb25zdCBzdGFjayA9IFJvdXRlci5fZ2V0SnFtSGlzdG9yeSgpLnN0YWNrO1xyXG4gICAgICAgICAgICBjb25zdCBoYXMgPSBfLnNvbWUoc3RhY2ssICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICEhdmFsdWVbUm91dGVyLlNVQkZMT1dfUEFSQU1dO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIGhhcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBlbiBDaGVjayBmcm9tIGhhc2ggY2hhbmdlZCBuYXZpZ2F0aW9uLlxyXG4gICAgICAgICAqIEBqYSBIYXNoIOWkieabtOOBq+OCiOOBo+OBpiBOYXZpZ2F0ZSDjgYzotbfjgZPjgaPjgZ/jgYvliKTlrpouIFwicGFnZWNoYW5nZVwiIOOBjOeZuueUn+OBmeOCi+OBvuOBp+OBq+WIpOWumuWPr+iDvVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgZnJvbUhhc2hDaGFuZ2VkKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICAvLyBwb3NpdGl2ZU5hdmlnYXRlID0gZmFsc2Ug44Gv5ZCr44KB44Gq44GEXHJcbiAgICAgICAgICAgIHJldHVybiBSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvLmluTmF2aWdhdGlvbiAmJiAobnVsbCA9PSBSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvLnBvc2l0aXZlTmF2aWdhdGUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQGVuIFJlZ2lzdGVyIHBhZ2Ugc3RhY2suIDxicj5cclxuICAgICAgICAgKiAgICAgU2V0IHJlZ2lzdGVyZWQgcm91dGUocykgdG8gYWRkIHRvIHBhZ2Ugc3RhY2sgb24gdGhlIGJhc2lzIG9mIHRoZSBwcmVzZW50IHN0YWNrIHBvc2l0aW9uLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQGphIOODmuODvOOCuOOCueOCv+ODg+OCr+eZu+mMsiA8YnI+XHJcbiAgICAgICAgICogICAgIOeZu+mMsua4iOOBv+OBriByb3V0ZSDjgpLmjIflrprjgZfjgabjgIHnj77lnKjjga7kvY3nva7jgpLln7rngrnjgavjg5rjg7zjgrjjgrnjgr/jg4Pjgq/jgavnmbvpjLJcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBwYWdlU3RhY2tcclxuICAgICAgICAgKiAgLSBgZW5gIFBhZ2VTdGFja09wdGlvbnMgb2JqZWN0IG9yIGFycmF5LlxyXG4gICAgICAgICAqICAtIGBqYWAgUGFnZVN0YWNrT3B0aW9ucyDjgqrjg5bjgrjjgqfjgq/jg4gv6YWN5YiXXHJcbiAgICAgICAgICogQHBhcmFtIHdpdGhOYXZpZ2F0ZVxyXG4gICAgICAgICAqICAtIGBlbmAgdHJ1ZTogd2l0aCBuYXZpZ2F0ZSBmaW5hbCBzdGFjay4gKGRlZmF1bHQpIC8gZmFsc2U6IG5vdCBuYXZpZ2F0ZS5cclxuICAgICAgICAgKiAgLSBgamFgIHRydWU6IOacgOW+jOOBruOCueOCv+ODg+OCr+OBq+WvvuOBl+OBpuODmuODvOOCuOmBt+enu+OBmeOCiy4gKGRlZmF1bHQpIC8gZmFsc2U6IOODmuODvOOCuOmBt+enu+OBl+OBquOBhC5cclxuICAgICAgICAgKiBAcGFyYW0gb3B0aW9uc1xyXG4gICAgICAgICAqICAtIGBlbmAgc2V0IGEgb3B0aW9ucyBvYmplY3QgZm9yIEJhY2tib25lLlJvdXRlci5uYXZpZ2F0ZSgpLlxyXG4gICAgICAgICAqICAtIGBqYWAgQmFja2JvbmUuUm91dGVyLm5hdmlnYXRlKCkg44Gr5rih44GV44KM44KL44Kq44OX44K344On44OzXHJcbiAgICAgICAgICogQHJldHVybnNcclxuICAgICAgICAgKiAgLSBgZW5gIHRydWU6IHN1Y2NlZWRlZCAvIGZhbHNlOiBmYWlsZWRcclxuICAgICAgICAgKiAgLSBgamFgIHRydWU6IOaIkOWKnyAvIGZhbHNlOiDlpLHmlZfjgIJcclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHJlZ2lzdGVyUGFnZVN0YWNrKHBhZ2VTdGFjazogUGFnZVN0YWNrLCB3aXRoTmF2aWdhdGU/OiBib29sZWFuLCBvcHRpb25zPzogTmF2aWdhdGVPcHRpb25zKTogYm9vbGVhbjtcclxuICAgICAgICBwdWJsaWMgc3RhdGljIHJlZ2lzdGVyUGFnZVN0YWNrKHBhZ2VTdGFjazogUGFnZVN0YWNrW10sIHdpdGhOYXZpZ2F0ZT86IGJvb2xlYW4sIG9wdGlvbnM/OiBOYXZpZ2F0ZU9wdGlvbnMpOiBib29sZWFuO1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgcmVnaXN0ZXJQYWdlU3RhY2socGFnZVN0YWNrOiBhbnksIHdpdGhOYXZpZ2F0ZT86IGJvb2xlYW4sIG9wdGlvbnM/OiBOYXZpZ2F0ZU9wdGlvbnMpOiBib29sZWFuIHtcclxuICAgICAgICAgICAgY29uc3QgbmV3U3RhY2tzID0gW107XHJcbiAgICAgICAgICAgIGxldCBmYWlsZWQgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIHBhZ2VTdGFjayA9IChwYWdlU3RhY2sgaW5zdGFuY2VvZiBBcnJheSkgPyBwYWdlU3RhY2sgOiBbcGFnZVN0YWNrXTtcclxuICAgICAgICAgICAgd2l0aE5hdmlnYXRlID0gKG51bGwgPT0gd2l0aE5hdmlnYXRlKSA/IGZhbHNlIDogd2l0aE5hdmlnYXRlO1xyXG5cclxuICAgICAgICAgICAgKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1ha2VTdGFjayA9IChpbmZvOiBQYWdlU3RhY2spOiBhbnkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCB1cmw6IHN0cmluZztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZnJhZ21lbnQgPSBCYWNrYm9uZS5oaXN0b3J5LmdldEZyYWdtZW50KGluZm8ucm91dGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRleHQgPSA8Um91dGVDb250ZXh0Pl8uZmluZCg8YW55PlJvdXRlci5zX3Jvb3RDb250ZXh0cywgKGN0eDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjdHgucmVnZXhwLnRlc3QoZnJhZ21lbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghY29udGV4dCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oVEFHICsgXCJyb3V0ZSBpcyBub3QgcmVnaXN0ZXJlZC4gcm91dGU6IFwiICsgaW5mby5yb3V0ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVybCA9IFJvdXRlci5wYXRoVG9KcW1EYXRhVXJsKGNvbnRleHQucGFnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBzdGFjayA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcm91dGU6IGluZm8ucm91dGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2VVcmw6IHVybCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IGluZm8udGl0bGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zaXRpb246IGluZm8udHJhbnNpdGlvbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiB1cmwsXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3RhY2s7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwLCBuID0gcGFnZVN0YWNrLmxlbmd0aDsgaSA8IG47IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0YWNrID0gbWFrZVN0YWNrKHBhZ2VTdGFja1tpXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFzdGFjaykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmYWlsZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdTdGFja3MucHVzaChzdGFjayk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KSgpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGZhaWxlZCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgLy8gUm91dGVyIOOBruWBnOatolxyXG4gICAgICAgICAgICAgICAgbGV0IHJlc3RhcnQgPSBSb3V0ZXIuc3RvcCgpO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc2lsZW50TGVuZ3RoID0gbmV3U3RhY2tzLmxlbmd0aCAtIDE7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBmaW5hbEluZGV4ID0gbmV3U3RhY2tzLmxlbmd0aCAtIDE7XHJcblxyXG4gICAgICAgICAgICAgICAgUm91dGVyLl9nZXRKcW1IaXN0b3J5KCkuY2xlYXJGb3J3YXJkKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDAsIG4gPSBzaWxlbnRMZW5ndGg7IGkgPCBuOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbi5oYXNoID0gbmV3U3RhY2tzW2ldLnJvdXRlO1xyXG4gICAgICAgICAgICAgICAgICAgIFJvdXRlci5fZ2V0SnFtSGlzdG9yeSgpLnN0YWNrLnB1c2gobmV3U3RhY2tzW2ldKTtcclxuICAgICAgICAgICAgICAgICAgICBSb3V0ZXIuX2dldEpxbUhpc3RvcnkoKS5hY3RpdmVJbmRleCA9IFJvdXRlci5fZ2V0SnFtSGlzdG9yeSgpLnN0YWNrLmxlbmd0aCAtIDE7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gZmluYWwgc3RhY2sgd2l0aCBuYXZpZ2F0ZVxyXG4gICAgICAgICAgICAgICAgaWYgKHdpdGhOYXZpZ2F0ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRyYW5zaXRpb24gPSAoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCAhPSBSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvLnRyYW5zaXRpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvLnRyYW5zaXRpb247XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3U3RhY2tzW2ZpbmFsSW5kZXhdLnRyYW5zaXRpb247XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KSgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXZlcnNlID0gKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgIT0gUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mby5yZXZlcnNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mby5yZXZlcnNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSkoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdGFydCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIFJvdXRlci5zdGFydCh7IHNpbGVudDogdHJ1ZSB9KTtcclxuICAgICAgICAgICAgICAgICAgICBSb3V0ZXIubmF2aWdhdGUobmV3U3RhY2tzW2ZpbmFsSW5kZXhdLnJvdXRlLCB0cmFuc2l0aW9uLCByZXZlcnNlLCBvcHRpb25zKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24uaGFzaCA9IG5ld1N0YWNrc1tmaW5hbEluZGV4XS5yb3V0ZTtcclxuICAgICAgICAgICAgICAgICAgICBSb3V0ZXIuX2dldEpxbUhpc3RvcnkoKS5zdGFjay5wdXNoKG5ld1N0YWNrc1tmaW5hbEluZGV4XSk7XHJcbiAgICAgICAgICAgICAgICAgICAgUm91dGVyLl9nZXRKcW1IaXN0b3J5KCkuYWN0aXZlSW5kZXggPSBSb3V0ZXIuX2dldEpxbUhpc3RvcnkoKS5zdGFjay5sZW5ndGggLSAxO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIFJvdXRlciDjga7lho3plotcclxuICAgICAgICAgICAgICAgIGlmIChyZXN0YXJ0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgUm91dGVyLnN0YXJ0KHsgc2lsZW50OiB0cnVlIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KSgpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAZW4gR2V0IGpRTSdzIGhpc3Rvcnkgb2JqZWN0XHJcbiAgICAgICAgICogQGphIGpRTSDjga4gSGlzdG9yeSDjgqrjg5bjgrjjgqfjgq/jg4jjga7lj5blvpdcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBpbnRlcm5hbFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgX2dldEpxbUhpc3RvcnkoKTogYW55IHtcclxuICAgICAgICAgICAgcmV0dXJuICQubW9iaWxlLm5hdmlnYXRlLmhpc3Rvcnk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgICAgIC8vIHByaXZhdGUgc3RhdGljIG1ldGhvZHNcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQGVuIE92ZXJyaWRlOiBCYWNrYm9uZS5IaXN0b3J5LmxvYWRVcmwoKS5cclxuICAgICAgICAgKiBAamEgQmFja2JvbmUuSGlzdG9yeS5sb2FkVXJsKCkg44Gu44Kq44O844OQ44O844Op44Kk44OJXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgY3VzdG9tTG9hZFVybChmcmFnbWVudDogc3RyaW5nKTogYm9vbGVhbiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGhhbmRsZWQgPSBSb3V0ZXIuc19sb2FkVXJsKGZyYWdtZW50KTtcclxuICAgICAgICAgICAgaWYgKCFoYW5kbGVkKSB7XHJcbiAgICAgICAgICAgICAgICBSb3V0ZXIub25Sb3V0ZUZhaWxlZChmcmFnbWVudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAZW4gT3ZlcnJpZGU6ICQubW9iaWxlLmJhY2soKS5cclxuICAgICAgICAgKiAgLSBmYWlsIHNhZmUgcHJvY2Vzc2luZy4gPGJyPlxyXG4gICAgICAgICAqICAgIElmIHVzaW5nIEJhY2tib25lJ3MgUm91dGVyLCA8YnI+XHJcbiAgICAgICAgICogICAgdGhpcyBjbGFzcyB1bnVzZXMgaGlzdG9yeSBvYmplY3Qgb2YgalF1ZXJ5IE1vYmlsZSAxLjQsIDxicj5cclxuICAgICAgICAgKiAgICBhbmQgc3RhbmRhcmRpemUgYXMgYnJvd3NlciBiYWNrIGJ1dHRvbidzIGJlaGF2aW91ci4gKGpRTSAxLjMgY29tcGFyYWJsZSlcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBqYSAkLm1vYmlsZS5iYWNrKCkg44Gu44Kq44O844OQ44O844Op44Kk44OJXHJcbiAgICAgICAgICogIC0gW1RCRF0gZmFpbCBzYWZlIOWHpueQhiA8YnI+XHJcbiAgICAgICAgICogICAgQmFja2JvbmUg44GuIFJvdXRlciDjgpLkvb/nlKjjgZfjgabjgYTjgovloLTlkIjjgIEgPGJyPlxyXG4gICAgICAgICAqICAgIGpRdWVyeSBNb2JpbGUgMS40IOS7pemZjeOBruWGhemDqOOBriBIaXN0b3J5IOeuoeeQhuOBr+S9v+eUqOOBm+OBmuOBqyA8YnI+XHJcbiAgICAgICAgICogICAgMS4zIOebuOW9k+OBruODluODqeOCpuOCtuOBrlvmiLvjgotd44Gu5oyZ5YuV44Gr57Wx5LiA44GZ44KL44CCXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgY3VzdG9tSnFtQmFjaygpOiB2b2lkIHtcclxuICAgICAgICAgICAgaWYgKFJvdXRlci5pc1JvdXRpbmcoKSkge1xyXG4gICAgICAgICAgICAgICAgaGlzdG9yeS5iYWNrKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBqUU0g5pei5a6a5Yem55CGXHJcbiAgICAgICAgICAgICAgICBSb3V0ZXIuc19iYWNrKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBCaW5kIGV2ZW50cy5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIOOCpOODmeODs+ODiOODkOOCpOODs+ODiVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKi9cclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBiaW5kRXZlbnRzKCk6IHZvaWQge1xyXG4gICAgICAgICAgICAkKGRvY3VtZW50KVxyXG4gICAgICAgICAgICAgICAgLm9uZShcInBhZ2VjaGFuZ2VcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChSb3V0ZXIuc19pbml0T3B0aW9ucy5hbmNob3JWY2xpY2spIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYW5jaG9yIHZjbGlja1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKGRvY3VtZW50KS5vbihcInZjbGlja1wiLCBcIltocmVmXVwiLCAoZXZlbnQ6IEpRdWVyeS5FdmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUm91dGVyLm9uQW5jaG9yVmNsaWNrZWQoZXZlbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLm9uKFwicGFnZWJlZm9yZXNob3dcIiwgKGV2ZW50OiBKUXVlcnkuRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBcImRhdGEtYmFjay1kc3RcIiDjgpIgcGFnZSDjgavoqK3lrppcclxuICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCAhPSBSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvLmJhY2tEZXN0aW5hdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhY3RpdmU6IE9iamVjdCA9IFJvdXRlci5fZ2V0SnFtSGlzdG9yeSgpLmdldEFjdGl2ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmVbUm91dGVyLkJBQ0tfREVTVElOQVRJT05fVVJMXSA9IFJvdXRlci5zX2xhc3ROYXZpZ2F0ZUluZm8uYmFja0Rlc3RpbmF0aW9uO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAub24oXCJwYWdlc2hvd1wiLCAoZXZlbnQ6IEpRdWVyeS5FdmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGFjdGl2ZTogT2JqZWN0ID0gUm91dGVyLl9nZXRKcW1IaXN0b3J5KCkuZ2V0QWN0aXZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFjdGl2ZVtSb3V0ZXIuU1VCRkxPV19QQVJBTV0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGFjdGl2ZVtSb3V0ZXIuU1VCRkxPV19QQVJBTV07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5vbihcInBhZ2VjaGFuZ2UgcGFnZWNvbnRhaW5lcmxvYWRmYWlsZWRcIiwgKGV2ZW50OiBKUXVlcnkuRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvID0ge307XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgO1xyXG5cclxuICAgICAgICAgICAgLy8gYmFjayBrZXkgYXNzaWduXHJcbiAgICAgICAgICAgIENEUC5zZXRCYWNrQnV0dG9uSGFuZGxlcihSb3V0ZXIuYmFjayk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAZW4gU3RvcmUgdGhlIFJvb3RDb250ZXh0LlxyXG4gICAgICAgICAqIEBqYSBSb290Q29udGV4dCDjga7moLzntI1cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBuYW1lXHJcbiAgICAgICAgICogIC0gYGVuYCBuYW1lIG9mIHJvdXRlXHJcbiAgICAgICAgICogIC0gYGphYCByb3V0ZSDlkI1cclxuICAgICAgICAgKiBAcGFyYW0gY29udGV4dFxyXG4gICAgICAgICAqICAtIGBlbmAgY29udGV4dCBvYmplY3RcclxuICAgICAgICAgKiAgLSBgamFgIGNvbnRleHQg44Kq44OW44K444Kn44Kv44OIXHJcbiAgICAgICAgICogQHJldHVybnNcclxuICAgICAgICAgKiAgLSBgZW5gIHRydWU6IHN1Y2NlZWRlZCAvIGZhbHNlOiBhbHJlYWR5IHJlZ2lzdGVyZWRcclxuICAgICAgICAgKiAgLSBgamFgIHRydWU6IOeZu+mMsuaIkOWKnyAvIGZhbHNlOiDjgZnjgafjgavnmbvpjLLjgZXjgozjgabjgYTjgotcclxuICAgICAgICAgKi9cclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBwdXNoQ29udGV4dChuYW1lOiBzdHJpbmcsIGNvbnRleHQ6IFJvdXRlQ29udGV4dCk6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICBpZiAoISFSb3V0ZXIuc19yb290Q29udGV4dHNbbmFtZV0pIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoVEFHICsgXCJsb2dpYyBlcnJvci4gcm91dGUgaXMgYWxyZWFkeSByZWdpc3RlcmVkLiBuYW1lOiBcIiArIG5hbWUpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFJvdXRlci5zX3Jvb3RDb250ZXh0c1tuYW1lXSA9IGNvbnRleHQ7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQGVuIENoZWNrIGlmICQubW9iaWxlLmluaXRpYWxpemVQYWdlKCkgaXMgY2FsbGVkIG9yIG5vdCwgYW5kIGNhbGwgaXQgaWYgbmVlZGVkLlxyXG4gICAgICAgICAqIEBqYSAgJC5tb2JpbGUuaW5pdGlhbGl6ZVBhZ2UoKSDjgYzlkbzjgbDjgozjgabjgYTjgovjgYvnorroqo3jgZfjgIHlv4XopoHjgarjgonliJ3mnJ/ljJbjgZnjgovjgIJcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB1cmxcclxuICAgICAgICAgKiAgLSBgZW5gIHNldCBhIG5hdmlnYXRlIFVSTC4gKHJlbGF0aXZlIHBhdGggLyBhYnNvbHV0ZSBwYXRoIC8gZnJhZ21lbnQpXHJcbiAgICAgICAgICogIC0gYGphYCDpgbfnp7sgVVJMIOOCkuaMh+WumiAo55u45a++44OR44K5L+e1tuWvvuODkeOCuS/jg5Xjg6njgrDjg6Hjg7Pjg4gpXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgaW5pdEZpcnN0UGFnZUlmTmVlZGVkKHVybDogc3RyaW5nKTogYm9vbGVhbiB7XHJcbiAgICAgICAgICAgIGlmICghJC5tb2JpbGUuYXV0b0luaXRpYWxpemVQYWdlKSB7XHJcbiAgICAgICAgICAgICAgICAkKGRvY3VtZW50KS5vbmUoXCJwYWdlYmVmb3JlY2hhbmdlXCIsIChldmVudDogSlF1ZXJ5LkV2ZW50LCBkYXRhOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBkYXRhLnRvUGFnZSA9IEZyYW1ld29yay50b1VybCh1cmwpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAkLm1vYmlsZS5pbml0aWFsaXplUGFnZSgpO1xyXG4gICAgICAgICAgICAgICAgJC5tb2JpbGUuYXV0b0luaXRpYWxpemVQYWdlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBlbiBDaGVjayBmb3IgY3VycmVudCBwYWdlIGlzIHRvcC5cclxuICAgICAgICAgKiBAamEg54++5Zyo44Gu44Oa44O844K444GMIHRvcCDjgavmjIflrprjgZXjgozjgabjgYTjgovjgYvliKTlrppcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm5zXHJcbiAgICAgICAgICogIC0gYGVuYCB0cnVlOiB0b3AgcGFnZSAvIGZhbHNlOiBub3QgdG9wIHBhZ2VcclxuICAgICAgICAgKiAgLSBgamFgIHRydWU6IHRvcCDmjIflrpogLyBmYWxzZTogdG9wIOOBp+OBr+OBquOBhFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIGlzVG9wUGFnZSgpOiBib29sZWFuIHtcclxuICAgICAgICAgICAgY29uc3QgZnJhZ21lbnQgPSBCYWNrYm9uZS5oaXN0b3J5LmdldEZyYWdtZW50KCQubW9iaWxlLnBhdGgucGFyc2VVcmwobG9jYXRpb24uaHJlZikuaGFzaCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRleHQgPSA8Um91dGVDb250ZXh0Pl8uZmluZCg8YW55PlJvdXRlci5zX3Jvb3RDb250ZXh0cywgKGN0eDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY3R4LnJlZ2V4cC50ZXN0KGZyYWdtZW50KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiAobnVsbCA9PSBjb250ZXh0KSA/IGZhbHNlIDogY29udGV4dC50b3A7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAZW4gQ2FsbGVkIHdoZW4gYW5jaG9yIHJlY2VpdmVkIFwidmNsaWNrXCIgZXZlbnQuXHJcbiAgICAgICAgICogQGphIGFuY2hvciDjgYwgdmNsaWNrIOOBleOCjOOBn+OBqOOBjeOBq+OCs+ODvOODq+OBleOCjOOCi1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybnNcclxuICAgICAgICAgKiAgLSBgZW5gIHRydWU6IG5lZWQgZGVmYXVsdCBwcm9jZXNzaW5nIC8gZmFsc2U6IG5lZWQgY3VzdG9tIHByb2Nlc3NpbmdcclxuICAgICAgICAgKiAgLSBgamFgIHRydWU6IGRlZmF1bHQg5Yem55CGIC8gZmFsc2U6IOOCq+OCueOCv+ODoOWHpueQhlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIG9uQW5jaG9yVmNsaWNrZWQoZXZlbnQ6IEpRdWVyeS5FdmVudCk6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICBpZiAoUm91dGVyLmlzSnVzdEJlZm9yZVZjbGlja2VkKCkpIHtcclxuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIFJvdXRlci5mb2xsb3dBbmNob3IoZXZlbnQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQGVuIEFuY2hvciBwcm9jZXNzaW5nLlxyXG4gICAgICAgICAqIEBqYSBhbmNob3Ig5Yem55CGXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgZm9sbG93QW5jaG9yKGV2ZW50OiBKUXVlcnkuRXZlbnQpOiBib29sZWFuIHtcclxuICAgICAgICAgICAgY29uc3QgJHRhcmdldCA9ICQoZXZlbnQuY3VycmVudFRhcmdldCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHVybDogc3RyaW5nID0gJHRhcmdldC5qcW1EYXRhKFwiaHJlZlwiKSB8fCAkdGFyZ2V0LmF0dHIoXCJocmVmXCIpO1xyXG4gICAgICAgICAgICBjb25zdCB0cmFuc2l0aW9uOiBzdHJpbmcgPSAkdGFyZ2V0LmpxbURhdGEoXCJ0cmFuc2l0aW9uXCIpO1xyXG4gICAgICAgICAgICBjb25zdCBkaXJlY3Rpb246IHN0cmluZyA9ICR0YXJnZXQuanFtRGF0YShcImRpcmVjdGlvblwiKTtcclxuICAgICAgICAgICAgY29uc3QgYmFja0RzdDogYW55ID0gJHRhcmdldC5hdHRyKFJvdXRlci5EQVRBX0JBQ0tfREVTVElOQVRJT04pO1xyXG4gICAgICAgICAgICBjb25zdCBub0hhc2hDaGFuZ2U6IGJvb2xlYW4gPSAkdGFyZ2V0LmF0dHIoUm91dGVyLkRBVEFfTk9fSEFTSF9DSEFOR0UpID9cclxuICAgICAgICAgICAgICAgICR0YXJnZXQuYXR0cihSb3V0ZXIuREFUQV9OT19IQVNIX0NIQU5HRSkgPT09IFwidHJ1ZVwiIDogZmFsc2U7XHJcbiAgICAgICAgICAgIGNvbnN0IG5vSHJlZkhhbmRsZTogYm9vbGVhbiA9ICR0YXJnZXQuYXR0cihSb3V0ZXIuREFUQV9OT19WQ0xJQ0tfSEFORExFKSA/XHJcbiAgICAgICAgICAgICAgICAkdGFyZ2V0LmF0dHIoUm91dGVyLkRBVEFfTk9fVkNMSUNLX0hBTkRMRSkgPT09IFwidHJ1ZVwiIDogZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAvKlxyXG4gICAgICAgICAgICAgKiAtIOaYjuekuueahOOBq+ODj+ODs+ODieODq+OBl+OBquOBhOaMh+WumuOBjOOBguOCi+WgtOWQiFxyXG4gICAgICAgICAgICAgKiAtIGpRTSDjga7jg5Xjg6njgrDjg6Hjg7Pjg4jjga7loLTlkIhcclxuICAgICAgICAgICAgICog5pei5a6a44Gu5Yem55CG44KS6KGM44GGXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBpZiAobm9IcmVmSGFuZGxlIHx8IFJvdXRlci5uZWVkRGVmYXVsdE9wZXJhdGlvbih1cmwpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gY3VzdG9tIGJlaGF2aWVyXHJcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoUm91dGVyLmlzQmFja0J1dHRvbkNsaWNrZWQoZXZlbnQpKSB7XHJcbiAgICAgICAgICAgICAgICBSb3V0ZXIuYmFjaygpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgUm91dGVyLm5hdmlnYXRlKHVybCwgdHJhbnNpdGlvbiwgISFkaXJlY3Rpb24sIHsgbm9IYXNoQ2hhbmdlOiBub0hhc2hDaGFuZ2UsIGJhY2tEZXN0aW5hdGlvbjogYmFja0RzdCB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQGVuIENoZWNrIGRlZmF1bHQgcHJvY2Vzc2luZyBuZWVkZWQuXHJcbiAgICAgICAgICogQGphIOaXouWumuOBruWHpueQhuOCkuihjOOCj+OBm+OCi+OBi+WIpOWumlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtICB1cmxcclxuICAgICAgICAgKiAgLSBgZW5gIHVybCBzdHJpbmdcclxuICAgICAgICAgKiAgLSBgamFgIHVybCDmloflrZfliJdcclxuICAgICAgICAgKiBAcmV0dXJuc1xyXG4gICAgICAgICAqICAtIGBlbmAgdHJ1ZTogbmVlZCBkZWZhdWx0IHByb2Nlc3NpbmcgLyBmYWxzZTogbmVlZCBub3RcclxuICAgICAgICAgKiAgLSBgamFgIHRydWU6IOaXouWumuOBruWHpueQhuOBjOW/heimgSAvIGZhbHNlOiDkuI3opoFcclxuICAgICAgICAgKi9cclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBuZWVkRGVmYXVsdE9wZXJhdGlvbih1cmw6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICBpZiAoIXVybCB8fCAoXCIjXCIgPT09IHVybCkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKFwiI1wiID09PSB1cmxbMF0pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAhUm91dGVyLmNhblJlc29sdmVSb3V0ZSh1cmwpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAZW4gQ2hlY2sgc3RhdHVzIG9mIEJhY2tib25lLlJvdXRlciBpZiB0aGV5IGNhbiByZXNvbHZlIHJvdXRlLlxyXG4gICAgICAgICAqIEBqYSBCYWNrYm9uZS5Sb3V0ZXIg44GMIHJvdXRlIOOCkuino+axuuWPr+iDveOBi+WIpOWumlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtICB1cmxcclxuICAgICAgICAgKiAgLSBgZW5gIHVybCBzdHJpbmdcclxuICAgICAgICAgKiAgLSBgamFgIHVybCDmloflrZfliJdcclxuICAgICAgICAgKiBAcmV0dXJuc1xyXG4gICAgICAgICAqICAtIGBlbmAgdHJ1ZTogY2FuIHJlc29sdmUgLyBmYWxzZTogY2FuIG5vdFxyXG4gICAgICAgICAqICAtIGBqYWAgdHJ1ZTog6Kej5rG65Y+v6IO9IC8gZmFsc2U6IOino+axuuS4jeWPr1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIGNhblJlc29sdmVSb3V0ZSh1cmw6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICBjb25zdCBmcmFnbWVudCA9IEJhY2tib25lLmhpc3RvcnkuZ2V0RnJhZ21lbnQodXJsKTtcclxuICAgICAgICAgICAgcmV0dXJuIF8uYW55KEJhY2tib25lLmhpc3RvcnkuaGFuZGxlcnMsIGZ1bmN0aW9uIChoYW5kbGVyOiBhbnkpIHtcclxuICAgICAgICAgICAgICAgIGlmIChoYW5kbGVyLnJvdXRlLnRlc3QoZnJhZ21lbnQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQGVuIENoZWNrIFwidmNsaWNrXCIgZmlyZWQgYXQgdGhlIGxhc3QgbWludXRlLlxyXG4gICAgICAgICAqIEBqYSDnm7TliY3jgasgdmNsaWNrIOOBjOWRvOOBsOOCjOOBn+OBi+WIpOWumlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIGlzSnVzdEJlZm9yZVZjbGlja2VkKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICBjb25zdCBpc0JlZm9yZSA9IChEYXRlLm5vdygpIC0gUm91dGVyLnNfbGFzdENsaWNrZWRUaW1lKSA8IFJvdXRlci5ERUxBWV9USU1FICogMjtcclxuICAgICAgICAgICAgUm91dGVyLnNfbGFzdENsaWNrZWRUaW1lID0gRGF0ZS5ub3coKTtcclxuICAgICAgICAgICAgcmV0dXJuIGlzQmVmb3JlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQGVuIENoZWNrIGJhY2sgYnV0dG9uIGNsaWNrZWQuXHJcbiAgICAgICAgICogQGphIEJhY2sgQnV0dG9uIOOBjOOCr+ODquODg+OCr+OBleOCjOOBn+OBi+WIpOWumlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIGlzQmFja0J1dHRvbkNsaWNrZWQoZXZlbnQ6IEpRdWVyeS5FdmVudCk6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICBpZiAoJChldmVudC5jdXJyZW50VGFyZ2V0KS5qcW1EYXRhKFwicmVsXCIpID09PSBcImJhY2tcIikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBlbiBJdCBjYWxsZWQgb24gc3VjY2VlZCByb3V0aW5nIHRyaWdnZXJlZCBieSBjaGFuZ2luZyBoYXNoLlxyXG4gICAgICAgICAqIEBqYSDjg4/jg4Pjgrfjg6XlgKTjgYzlpInmm7TjgZXjgozjgIHjg6vjg7zjg4bjgqPjg7PjgrDjgYzmiJDlip/jgZfjgZ/jgajjgY3jgavjgrPjg7zjg6vjgZXjgozjgotcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBuYW1lXHJcbiAgICAgICAgICogIC0gYGVuYCBuYW1lIG9mIHJvdXRlXHJcbiAgICAgICAgICogIC0gYGphYCByb3V0ZSDlkI3jgIJwYWdlIOOBruWApOOBjOa4oeOCi+OAglxyXG4gICAgICAgICAqIEBwYXJhbSBhcmdzXHJcbiAgICAgICAgICogIC0gYGVuYCBhcnJheSBvZiBwYXJhbXRlclxyXG4gICAgICAgICAqICAtIGBqYWAg44OR44Op44Oh44O844K/6YWN5YiX44CCXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgb25Sb3V0ZVN1Y2NlZWRlZChuYW1lOiBzdHJpbmcsIC4uLmFyZ3M6IGFueVtdKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRleHQgPSA8Um91dGVDb250ZXh0PlJvdXRlci5zX3Jvb3RDb250ZXh0c1tuYW1lXTtcclxuICAgICAgICAgICAgaWYgKCEhY29udGV4dCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaW50ZW50ID0geyBwYXJhbXM6IHsgcXVlcnlQYXJhbXM6IGFyZ3MgfSB9O1xyXG4gICAgICAgICAgICAgICAgUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mby5pbk5hdmlnYXRpb24gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgaWYgKG51bGwgIT0gUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mby5pbnRlbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpbnRlbnQucGFyYW1zID0gJC5leHRlbmQoe30sIGludGVudC5wYXJhbXMsIFJvdXRlci5zX2xhc3ROYXZpZ2F0ZUluZm8uaW50ZW50LnBhcmFtcyB8fCB7fSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvLmludGVudCA9ICQuZXh0ZW5kKHt9LCBSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvLmludGVudCwgaW50ZW50KTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGhhbmRsZWQgPSBjb250ZXh0LmNhbGxiYWNrKGFyZ3MpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFoYW5kbGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgUm91dGVyLmNoYW5nZVBhZ2UoY29udGV4dC5wYWdlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQGVuIEl0IGNhbGxlZCBvbiBmYWlsZWQgcm91dGluZyB0cmlnZ2VyZWQgYnkgY2hhbmdpbmcgaGFzaC5cclxuICAgICAgICAgKiBAamEg44OP44OD44K344Ol5YCk44GM5aSJ5pu044GV44KM44CB44Or44O844OG44Kj44Oz44Kw44GM5aSx5pWX44GX44Gf44Go44GN44Gr44Kz44O844Or44GV44KM44KLXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gbmFtZVxyXG4gICAgICAgICAqICAtIGBlbmAgbmFtZSBvZiByb3V0ZVxyXG4gICAgICAgICAqICAtIGBqYWAgcm91dGUg5ZCN44CCcGFnZSDjga7lgKTjgYzmuKHjgovjgIJcclxuICAgICAgICAgKiBAcGFyYW0gYXJnc1xyXG4gICAgICAgICAqICAtIGBlbmAgYXJyYXkgb2YgcGFyYW10ZXJzXHJcbiAgICAgICAgICogIC0gYGphYCDjg5Hjg6njg6Hjg7zjgr/phY3liJfjgIJcclxuICAgICAgICAgKi9cclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBvblJvdXRlRmFpbGVkKGZyYWdtZW50OiBzdHJpbmcpOiB2b2lkIHtcclxuICAgICAgICAgICAgUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mby5pbk5hdmlnYXRpb24gPSB0cnVlO1xyXG4gICAgICAgICAgICBpZiAobnVsbCA9PSBmcmFnbWVudCkge1xyXG4gICAgICAgICAgICAgICAgZnJhZ21lbnQgPSBCYWNrYm9uZS5oaXN0b3J5LmdldEZyYWdtZW50KCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIHJvdXRlIOOBjOino+axuuOBp+OBjeOBquOBi+OBo+OBn+OCguOBruOCkueuoeeQhuS4i+OBq1xyXG4gICAgICAgICAgICBpZiAoUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mby5wb3NpdGl2ZU5hdmlnYXRlKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgY29udGV4dCA9IDxSb3V0ZUNvbnRleHQ+Um91dGVyLnNfcm9vdENvbnRleHRzW2ZyYWdtZW50XTtcclxuICAgICAgICAgICAgICAgIGlmIChudWxsID09IGNvbnRleHQpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb250ZXh0ID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByb3V0ZTogZnJhZ21lbnQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZ2V4cDogKDxhbnk+Um91dGVyLnNfcm91dGVyKS5fcm91dGVUb1JlZ0V4cChmcmFnbWVudCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2U6IFJvdXRlci5zX2xhc3ROYXZpZ2F0ZUluZm8udXJsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b3A6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjazogbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgIFJvdXRlci5wdXNoQ29udGV4dChmcmFnbWVudCwgY29udGV4dCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIGZyYWdtZW50IOOBi+OCiSBwYXRoIOOCkuino+axulxyXG4gICAgICAgICAgICBsZXQgcGF0aCA9IGZyYWdtZW50O1xyXG4gICAgICAgICAgICBpZiAobnVsbCAhPSBSb3V0ZXIuc19yb290Q29udGV4dHNbZnJhZ21lbnRdKSB7XHJcbiAgICAgICAgICAgICAgICBwYXRoID0gUm91dGVyLnNfcm9vdENvbnRleHRzW2ZyYWdtZW50XS5wYWdlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBSb3V0ZXIuY2hhbmdlUGFnZShwYXRoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBlbiBUaGlzIGZ1bmN0aW9uIGp1c3QgY2FsbHMgalF1ZXJ5IE1vYmlsZSdzIG5hdmlnYXRpb24gbWV0aG9kLlxyXG4gICAgICAgICAqIEBqYSBqUXVlcnkgTW9iaWxlIOOBq+OCiOOCi+ODmuODvOOCuOmBt+enu+aMh+WumlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHBhdGhcclxuICAgICAgICAgKiAgLSBgZW5gIHRvIHBhZ2UgcGF0aFxyXG4gICAgICAgICAqICAtIGBqYWAg6YG356e75YWI44OR44K544KS5oyH5a6aXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgY2hhbmdlUGFnZShwYXRoOiBzdHJpbmcpOiB2b2lkIHtcclxuICAgICAgICAgICAgbGV0IG5vdGlmeUJlZm9yZVJvdXRlQ2hhbmdlOiAoKSA9PiBJUHJvbWlzZUJhc2U8YW55PjtcclxuXHJcbiAgICAgICAgICAgIC8vIGRhdGEtcmVsPVwiYmFja1wiLCDjg5bjg6njgqbjgrbjg5zjgr/jg7MsIEgvVyBCYWNrIEtleSDjgYzmirzkuIvjgZXjgozjgZ/jgajjgY1cclxuICAgICAgICAgICAgaWYgKCFSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvLnBvc2l0aXZlTmF2aWdhdGUpIHtcclxuICAgICAgICAgICAgICAgIGlmIChSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvLmluQWRkaXRpb25hbEJhY2spIHtcclxuICAgICAgICAgICAgICAgICAgICBSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvLmluQWRkaXRpb25hbEJhY2sgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgUm91dGVyLmRlY2lkZURpcmVjdGlvbihwYXRoKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyDmjIflrprlhYjjgavmiLvjgovjgYvliKTlrppcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBhZGRpdGlvbmFsID0gUm91dGVyLmRldGVjdEFkZGl0aW9uYWxCYWNrRGlzdGFuY2UoKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoMCA8IGFkZGl0aW9uYWwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gMuWbnuebruS7pemZjeOBriBoYXNoIGNoYW5nZSDjgavjga/lj43lv5zjgZXjgZvjgarjgYQuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFJvdXRlci5zX2xhc3ROYXZpZ2F0ZUluZm8uaW5BZGRpdGlvbmFsQmFjayA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFJvdXRlci5fZ2V0SnFtSGlzdG9yeSgpLmFjdGl2ZUluZGV4IC09IGFkZGl0aW9uYWw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhpc3RvcnkuZ28oLWFkZGl0aW9uYWwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIOmBt+enu+WFiOOBjCBzdWJmbG93IOmWi+Wni+eCueOBp+OBguOCi+WgtOWQiOOAgXBhcmFtIOOCkuWJiumZpFxyXG4gICAgICAgICAgICAgICAgY29uc3Qgc3ViRmxvd0luZm8gPSBSb3V0ZXIuZGV0ZWN0U3ViRmxvd0Jhc2VJbmZvKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoc3ViRmxvd0luZm8uaXNDdXJyZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHN1YkZsb3dJbmZvLnN0YWNrW1JvdXRlci5TVUJGTE9XX1BBUkFNXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIOiDveWLleeahOmBt+enu+OBruWgtOWQiCBwcmV2aW91c0luZGV4IOOCkuabtOaWsFxyXG4gICAgICAgICAgICAgICAgUm91dGVyLl9nZXRKcW1IaXN0b3J5KCkucHJldmlvdXNJbmRleCA9IFJvdXRlci5fZ2V0SnFtSGlzdG9yeSgpLmFjdGl2ZUluZGV4O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyDjg5rjg7zjgrjpgbfnp7vplovlp4vpgJrnn6UuIOOBmeOBp+OBq+OCs+ODvOODq+OBleOCjOOBpuOBhOOCi+WgtOWQiOOBr+aXouWumuOBruS9leOCguOBl+OBquOBhOOCs+ODvOODq+ODkOODg+OCr+OCkuS9v+eUqOOBmeOCiy5cclxuICAgICAgICAgICAgbm90aWZ5QmVmb3JlUm91dGVDaGFuZ2UgPSBSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvLmNhbGxlZEJlZm9yZVJvdXRlQ2hhbmdlID8gX2RlZmF1bHRCZWZvcmVSb3V0ZUNoYW5nZSA6IF9iZWZvcmVSb3V0ZUNoYW5nZTtcclxuXHJcbiAgICAgICAgICAgIG5vdGlmeUJlZm9yZVJvdXRlQ2hhbmdlKClcclxuICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAvLyDku5jliqDmg4XloLFcclxuICAgICAgICAgICAgICAgICAgICBpZiAoUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mby5pbnRlbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgUm91dGVyLl9wdXNoSW50ZW50KFJvdXRlci5zX2xhc3ROYXZpZ2F0ZUluZm8uaW50ZW50KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIFJvdXRlci50cmVhdFVybEhpc3RvcnkoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFnZVRyYW5zaXRpb24gPSAoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mby50cmFuc2l0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mby50cmFuc2l0aW9uO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKFJvdXRlci5zX2ZpcnN0Q2hhbmdlUGFnZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUm91dGVyLnNfZmlyc3RDaGFuZ2VQYWdlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJub25lXCI7ICAvLyBzcGxhc2gg44GL44KJ44Gu6YG356e7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJC5tb2JpbGUuZGVmYXVsdFBhZ2VUcmFuc2l0aW9uO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSkoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgJC5tb2JpbGUuY2hhbmdlUGFnZShGcmFtZXdvcmsudG9VcmwocGF0aCksIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2hvd0xvYWRNc2c6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbGxvd1NhbWVQYWdlVHJhbnNpdGlvbjogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNpdGlvbjogcGFnZVRyYW5zaXRpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldmVyc2U6IFJvdXRlci5zX2xhc3ROYXZpZ2F0ZUluZm8ucmV2ZXJzZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZnJvbUhhc2hDaGFuZ2U6ICFSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvLnBvc2l0aXZlTmF2aWdhdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZUhhc2g6ICFSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvLm5vSGFzaENoYW5nZSxcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAuZmFpbCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihUQUcgKyBcImJlZm9yZSByb3V0ZSBjaGFuZ2UgY2FsbCwgZmFpbGVkLlwiKTtcclxuICAgICAgICAgICAgICAgICAgICBSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvID0ge307XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBlbiBEZWNpZGUgZGlyZWN0aW9uIHBhcmFtZXRlci4gPGJyPlxyXG4gICAgICAgICAqICAgICBJdCdzIGFzIHNhbWUgYXMgalFNIGludGVybmFsIGltcGxlbWVudC4gKGltcGVyZmVjdGlvbilcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBqYSBkaXJlY3Rpb24g44Gu5Yik5a6aIDxicj5cclxuICAgICAgICAgKiAgICAgalFNIOOBruWGhemDqOWun+ijheOBqOetieS+oSAo5LiN5a6M5YWoKVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHBhdGhcclxuICAgICAgICAgKiAgLSBgZW5gIHRvIHBhZ2UgcGF0aFxyXG4gICAgICAgICAqICAtIGBqYWAg6YG356e75YWI44OR44K544KS5oyH5a6aXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgZGVjaWRlRGlyZWN0aW9uKHBhdGg6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgICAgICAgICBjb25zdCB1cmwgPSAkLm1vYmlsZS5wYXRoLmNvbnZlcnRVcmxUb0RhdGFVcmwoRnJhbWV3b3JrLnRvVXJsKHBhdGgpKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChudWxsID09IFJvdXRlci5zX2xhc3ROYXZpZ2F0ZUluZm8udHJhbnNpdGlvbikge1xyXG4gICAgICAgICAgICAgICAgUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mby50cmFuc2l0aW9uID0gUm91dGVyLl9nZXRKcW1IaXN0b3J5KCkuZ2V0QWN0aXZlKCkudHJhbnNpdGlvbjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgUm91dGVyLl9nZXRKcW1IaXN0b3J5KCkuZGlyZWN0KHtcclxuICAgICAgICAgICAgICAgIHVybDogdXJsLFxyXG4gICAgICAgICAgICAgICAgcHJlc2VudDogZnVuY3Rpb24gKG5ld1BhZ2U6IGFueSwgZGlyZWN0aW9uOiBzdHJpbmcpIHtcclxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGRpcmVjdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiYmFja1wiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgPT0gUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mby5yZXZlcnNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mby5yZXZlcnNlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiZm9yd2FyZFwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgPT0gUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mby50cmFuc2l0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mby50cmFuc2l0aW9uID0gbmV3UGFnZS50cmFuc2l0aW9uO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oVEFHICsgXCJ1bmtub3duIGRpcmVjdGlvbjogXCIgKyBkaXJlY3Rpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIG1pc3Npbmc6ICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAvLyDliJ3mnJ/jg5rjg7zjgrggVVJMIOOBr+WIpOWumuOBp+OBjeOBquOBhOOAguato+W4uOezu+OAglxyXG4gICAgICAgICAgICAgICAgICAgIGlmICgxID09PSBSb3V0ZXIuX2dldEpxbUhpc3RvcnkoKS5hY3RpdmVJbmRleCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBSb3V0ZXIuX2dldEpxbUhpc3RvcnkoKS5wcmV2aW91c0luZGV4ID0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgUm91dGVyLl9nZXRKcW1IaXN0b3J5KCkuYWN0aXZlSW5kZXggPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCA9PSBSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvLnJldmVyc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJvdXRlci5zX2xhc3ROYXZpZ2F0ZUluZm8ucmV2ZXJzZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKDAgIT09IFJvdXRlci5fZ2V0SnFtSGlzdG9yeSgpLmFjdGl2ZUluZGV4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihUQUcgKyBcInVua25vd24gZGlyZWN0aW9uLlwiKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQGVuIFJldHVybiBhZGRpdGlvbmFsIGJhY2sgZGlzdGFuY2UgY291bnQgd2hlbiBiYWNrIGRlc3RpbmF0aW9uIHNldC4gKGNvbnN0IGZ1bmN0aW9uKVxyXG4gICAgICAgICAqIEBqYSDmiLvjgorlhYjjgYzmjIflrprjgZXjgozjgabjgYTjgovjgajjgY3jgIHov73liqDjga4gQmFjayDmlbDjgpLov5TjgZnjgIIo44GT44Gu6Zai5pWw44GvIFJvdXRlciDjga7nirbmhYvjgpLlpInmm7TjgZfjgarjgYTjgIIpXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJuc1xyXG4gICAgICAgICAqICAtIGBlbmAgY291bnQgb2YgYWRkaXRpb25hIGJhY2sgZGlzdGFuY2UuXHJcbiAgICAgICAgICogIC0gYGphYOi/veWKoOOBpyBCYWNrIOOBq+W/heimgeOBqui3nemboi5cclxuICAgICAgICAgKi9cclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBkZXRlY3RBZGRpdGlvbmFsQmFja0Rpc3RhbmNlKCk6IG51bWJlciB7XHJcbiAgICAgICAgICAgIGNvbnN0IHN0YWNrID0gUm91dGVyLl9nZXRKcW1IaXN0b3J5KCkuc3RhY2s7XHJcbiAgICAgICAgICAgIGNvbnN0IGhpc3RvcnlBY3RpdmVJbmRleCA9IFJvdXRlci5fZ2V0SnFtSGlzdG9yeSgpLmFjdGl2ZUluZGV4OyAgICAvLyBkZWNpZGVEaXJlY3Rpb24oKSDjga4gUm91dGVyLl9nZXRKcW1IaXN0b3J5KCkuZGlyZWN0KCkg44Gr44KI44Gj44Gm44CBaGlzdG9yeSDjga4gYWN0aXZlSW5kZXgg44Gv44GZ44Gn44Gr5aSJ44KP44Gj44Gm44GE44KLXHJcbiAgICAgICAgICAgIGNvbnN0IHByZXZpb3VzSW5kZXggPSBSb3V0ZXIuX2dldEpxbUhpc3RvcnkoKS5wcmV2aW91c0luZGV4OyAgICAgICAvLyBb5oi744KLXeOBjOaKvOS4i+OBleOCjOOBn+WgtOWQiOOBq+WApOOBjOWFpeOCi1xyXG4gICAgICAgICAgICBsZXQgaSwgYmFja0RzdCwgZGlzdGFuY2UsIGZyYWdtZW50LCBjb250ZXh0LCBqcW1EYXRhVXJsO1xyXG5cclxuICAgICAgICAgICAgLy8gY2hlY2sgXCJvcGVyYXRpb25cIi4gW+aIu+OCi13jgYrjgojjgbMgY2xlYXJGb3J3YXJkKCkg44GV44KM44Gm44GE44Gq44GE54q25rOB44KS44OB44Kn44OD44KvXHJcbiAgICAgICAgICAgIGlmICghUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mby5yZXZlcnNlIHx8IG51bGwgPT0gcHJldmlvdXNJbmRleCB8fCAhc3RhY2tbcHJldmlvdXNJbmRleF0pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAwO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBcImJhY2tEc3QgZXhpc3RzXCIuIFvmiLvjgorlhYhd44GM5oyH5a6a44GV44KM44Gm44GE44KL44GL44OB44Kn44OD44KvXHJcbiAgICAgICAgICAgIGJhY2tEc3QgPSBzdGFja1twcmV2aW91c0luZGV4XVtSb3V0ZXIuQkFDS19ERVNUSU5BVElPTl9VUkxdO1xyXG4gICAgICAgICAgICBpZiAoKG51bGwgPT0gYmFja0RzdCkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAwO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmcmFnbWVudCA9IEJhY2tib25lLmhpc3RvcnkuZ2V0RnJhZ21lbnQoYmFja0RzdCk7XHJcblxyXG4gICAgICAgICAgICAvLyDliJ3mnJ/jg5rjg7zjgrhcclxuICAgICAgICAgICAgaWYgKFwiXCIgPT09IGZyYWdtZW50KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gaGlzdG9yeUFjdGl2ZUluZGV4O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyByb290Q29udGV4dCDjgYvjgokgcGF0aCDjgpLpgIblvJXjgY1cclxuICAgICAgICAgICAgY29udGV4dCA9IDxSb3V0ZUNvbnRleHQ+Xy5maW5kKDxhbnk+Um91dGVyLnNfcm9vdENvbnRleHRzLCAoY3R4OiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBjdHgucmVnZXhwLnRlc3QoZnJhZ21lbnQpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgaWYgKG51bGwgPT0gY29udGV4dCkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFRBRyArIFwiYmFjayBkZXN0aW5hdGlvbiBpcyBub3QgcmVnaXN0ZXJlZC4gYmFjay1kc3Q6IFwiICsgYmFja0RzdCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gMDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gZGF0YVVybCDjgpLlhYPjgasgalFNIEhpc3Rvcnkg44KS5qSc57SiXHJcbiAgICAgICAgICAgIGpxbURhdGFVcmwgPSBSb3V0ZXIucGF0aFRvSnFtRGF0YVVybChjb250ZXh0LnBhZ2UpO1xyXG4gICAgICAgICAgICBmb3IgKGkgPSBoaXN0b3J5QWN0aXZlSW5kZXgsIGRpc3RhbmNlID0gMDsgMCA8PSBpOyBpLS0gLCBkaXN0YW5jZSsrKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoanFtRGF0YVVybCA9PT0gc3RhY2tbaV0ucGFnZVVybCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChpIDwgMCkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFRBRyArIFwiYmFjayBkZXN0aW5hdGlvbiBkb2VzIG5vdCBleGlzdCBpbiBoaXN0b3J5LiBiYWNrLWRzdDogXCIgKyBiYWNrRHN0KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiAwO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZGlzdGFuY2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAZW4gU3RhcnQgc3ViIGZsb3cuIDxicj5cclxuICAgICAgICAgKiAgICAgQXR0YWNoIFN1YkZsb3dQYXJhbSB0byBqcW0gaGlzdG9yeSBzdGFjayBvYmplY3QuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAamEgU3ViIEZsb3cg44Gu6ZaL5aeLIDxicj5cclxuICAgICAgICAgKiAgICAgU3ViRmxvd1BhcmFtIOOCkiBqcW0gaGlzdG9yeSBzdGFjayDjgavjgqLjgr/jg4Pjg4FcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBzdWJGbG93UGFyYW1cclxuICAgICAgICAgKiAgLSBgZW5gIFN1YiBGbG93IHBhcmFtZXRlci5cclxuICAgICAgICAgKiAgLSBgamFgIFN1YiBGbG93IOODkeODqeODoeODvOOCv1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIHN0YXJ0U3ViRmxvdyhzdWJGbG93UGFyYW06IFN1YkZsb3dQYXJhbSk6IHZvaWQge1xyXG4gICAgICAgICAgICBjb25zdCBhY3RpdmUgPSBSb3V0ZXIuX2dldEpxbUhpc3RvcnkoKS5nZXRBY3RpdmUoKTtcclxuICAgICAgICAgICAgY29uc3QgcGFyYW0gPSA8U3ViRmxvd1BhcmFtRXg+c3ViRmxvd1BhcmFtO1xyXG4gICAgICAgICAgICBpZiAoc3ViRmxvd1BhcmFtLmRlc3RCYXNlKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgZGlzdGFuY2UgPSAwO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZnJhZ21lbnQgPSBCYWNrYm9uZS5oaXN0b3J5LmdldEZyYWdtZW50KHN1YkZsb3dQYXJhbS5kZXN0QmFzZSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjb250ZXh0ID0gPFJvdXRlQ29udGV4dD5fLmZpbmQoPGFueT5Sb3V0ZXIuc19yb290Q29udGV4dHMsIChjdHg6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjdHgucmVnZXhwLnRlc3QoZnJhZ21lbnQpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBpZiAobnVsbCA9PSBjb250ZXh0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFRBRyArIFwiYmFzZSBkZXN0aW5hdGlvbiBpcyBub3QgcmVnaXN0ZXJlZC4gZGVzdEJhc2U6IFwiICsgc3ViRmxvd1BhcmFtLmRlc3RCYXNlKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gZGF0YVVybCDjgpLlhYPjgasgalFNIEhpc3Rvcnkg44KS5qSc57SiXHJcbiAgICAgICAgICAgICAgICBjb25zdCBqcW1EYXRhVXJsID0gUm91dGVyLnBhdGhUb0pxbURhdGFVcmwoY29udGV4dC5wYWdlKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHN0YWNrID0gUm91dGVyLl9nZXRKcW1IaXN0b3J5KCkuc3RhY2s7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gUm91dGVyLl9nZXRKcW1IaXN0b3J5KCkuYWN0aXZlSW5kZXg7IDAgPD0gaTsgaS0tICwgZGlzdGFuY2UrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChqcW1EYXRhVXJsID09PSBzdGFja1tpXS5wYWdlVXJsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtLmFkZGl0aW9uYWxEaXN0YW5jZSA9IGRpc3RhbmNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBwYXJhbS5kZXN0QmFzZSA9IGxvY2F0aW9uLmhhc2g7XHJcbiAgICAgICAgICAgICAgICBwYXJhbS5hZGRpdGlvbmFsRGlzdGFuY2UgPSAwO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBhY3RpdmVbUm91dGVyLlNVQkZMT1dfUEFSQU1dID0gcGFyYW07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAZW4gRW5kIHN1YiBmbG93IDxicj5cclxuICAgICAgICAgKiAgICAgbmF2aWdhdGUgYW5kIGRlbGV0ZSBTdWJGbG93UGFyYW0gZnJvbSBqcW0gaGlzdG9yeSBzdGFjayBvYmplY3QuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAamEgU3ViIEZsb3cg44Gu57WC5LqGIDxicj5cclxuICAgICAgICAgKiAgICAg6YG356e744GoIFN1YkZsb3dQYXJhbSDjgpIganFtIGhpc3Rvcnkgc3RhY2sg44GL44KJ5YmK6ZmkXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gbmF2T3B0aW9uc1xyXG4gICAgICAgICAqICAtIGBlbmAgU3ViIEZsb3cgcGFyYW1ldGVyLlxyXG4gICAgICAgICAqICAtIGBqYWAgU3ViIEZsb3cg44OR44Op44Oh44O844K/XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgZmluaXNoU3ViRmxvdyhvcHRpb25zOiBOYXZpZ2F0ZU9wdGlvbnMpOiB2b2lkIHtcclxuICAgICAgICAgICAgY29uc3QgbmF2T3B0aW9uczogTmF2aWdhdGVPcHRpb25zID0gJC5leHRlbmQodHJ1ZSwge30sIG9wdGlvbnMpO1xyXG4gICAgICAgICAgICBjb25zdCBiYXNlSW5mbyA9IFJvdXRlci5kZXRlY3RTdWJGbG93QmFzZUluZm8oKTtcclxuICAgICAgICAgICAgLy8gXCJlbmRcIiDmmYLjgavmm7TmlrDjgZXjgozjgZ/jgoLjga7jgpLkuIrmm7jjgY1cclxuICAgICAgICAgICAgY29uc3QgcGFyYW06IFN1YkZsb3dQYXJhbSA9ICQuZXh0ZW5kKHt9LCBiYXNlSW5mby5zdWJGbG93UGFyYW0sIG5hdk9wdGlvbnMuc3ViRmxvdyk7XHJcbiAgICAgICAgICAgIGNvbnN0IGRpc3RhbmNlID0gYmFzZUluZm8uZGlzdGFuY2U7XHJcbiAgICAgICAgICAgIGNvbnN0IHN0YWNrID0gYmFzZUluZm8uc3RhY2s7XHJcbiAgICAgICAgICAgIGxldCByZXRyeSA9IDA7XHJcbiAgICAgICAgICAgIGNvbnN0IE5BVklHQVRFX0lOVEVSVkFMID0gMTAwO1xyXG4gICAgICAgICAgICBjb25zdCBNQVhfUkVUUllfQ09VTlQgPSAxMDtcclxuXHJcbiAgICAgICAgICAgIC8vIGhhc2gg5aSJ5pu044GM5a6M5LqG44GX44Gf5b6M44GrIG5hdmlnYXRlIOOCkuWun+ihjFxyXG4gICAgICAgICAgICBjb25zdCBfbmF2aWdhdGUgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoTUFYX1JFVFJZX0NPVU5UIDw9IHJldHJ5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihUQUcgKyBcInJlYWNoZWQgbmF2aWdhdGUgbWF4IHJldHJ5IGNvdW50LlwiKTtcclxuICAgICAgICAgICAgICAgICAgICBSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvID0ge307XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHBhcmFtLmRlc3RCYXNlICE9PSBsb2NhdGlvbi5oYXNoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0cnkrKztcclxuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KF9uYXZpZ2F0ZSwgTkFWSUdBVEVfSU5URVJWQUwpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvLmluTmF2aWdhdGlvbiA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIFJvdXRlci5yZWdpc3RlclBhZ2VTdGFjayhwYXJhbS5kZXN0U3RhY2tzLCB0cnVlLCBuYXZPcHRpb25zKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIGlmIChzdGFjaykge1xyXG4gICAgICAgICAgICAgICAgZGVsZXRlIHN0YWNrW1JvdXRlci5TVUJGTE9XX1BBUkFNXTtcclxuXHJcbiAgICAgICAgICAgICAgICBSb3V0ZXIuX2dldEpxbUhpc3RvcnkoKS5hY3RpdmVJbmRleCAtPSBkaXN0YW5jZTtcclxuICAgICAgICAgICAgICAgIFJvdXRlci5fZ2V0SnFtSGlzdG9yeSgpLmNsZWFyRm9yd2FyZCgpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChwYXJhbS5kZXN0U3RhY2tzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgUm91dGVyLnN0b3AoKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBpT1Mg55Kw5aKD44Gr44GK44GE44GmIGluZGV4Lmh0bWwg44KI44KKIGhpc3RvcnkuZ28oMCkg44GM55m655Sf44GZ44KL44Go44Oq44Ot44O844OJ44GM55m655Sf44GZ44KLLlxyXG4gICAgICAgICAgICAgICAgICAgIC8vIOOBneOBruW+jOeUu+mdoumBt+enu+OCkuaOp+OBiOOCi+OBn+OCgSwg5bGl5q2044KS5oi744KL5b+F6KaB44GM44GC44KL44Go44GN44Gr44Gu44G/6ZmQ5a6a44GZ44KLLlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICgwICE9PSBkaXN0YW5jZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBoaXN0b3J5LmdvKC1kaXN0YW5jZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBuYXZPcHRpb25zLnN1YkZsb3c7ICAgIC8vIHN1YkZsb3cg44OX44Ot44OR44OG44Kj44Gu56C05qOEXHJcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChfbmF2aWdhdGUsIDApO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvLnBvc2l0aXZlTmF2aWdhdGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICBoaXN0b3J5LmdvKC1kaXN0YW5jZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oVEFHICsgXCJzdWJGbG93IGJlZ2luIHN0YXR1cyBkb2VzIG5vdCBleGlzdCBpbiBoaXN0b3J5LlwiKTtcclxuICAgICAgICAgICAgICAgIFJvdXRlci5zX2xhc3ROYXZpZ2F0ZUluZm8gPSB7fTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQGVuIFJldHVybiBkZXN0aW5hdGlvbiBTdWIgRmxvdyBpbmZvcm1hdGlvbi4gKGNvbnN0IGZ1bmN0aW9uKVxyXG4gICAgICAgICAqIEBqYSBTdWIgRmxvdyDmg4XloLHjgpLov5TljbQgKOOBk+OBrumWouaVsOOBryBSb3V0ZXIg44Gu54q25oWL44KS5aSJ5pu044GX44Gq44GE44CCKVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybnNcclxuICAgICAgICAgKiAgLSBgZW5gIHN1YiBmbG93IGluZm8uXHJcbiAgICAgICAgICogIC0gYGphYCBTdWIgRmxvdyDmg4XloLEuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgZGV0ZWN0U3ViRmxvd0Jhc2VJbmZvKCk6IGFueSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHN0YWNrID0gUm91dGVyLl9nZXRKcW1IaXN0b3J5KCkuc3RhY2s7XHJcbiAgICAgICAgICAgIGNvbnN0IGhpc3RvcnlBY3RpdmVJbmRleCA9IFJvdXRlci5fZ2V0SnFtSGlzdG9yeSgpLmFjdGl2ZUluZGV4O1xyXG4gICAgICAgICAgICBsZXQgaTogbnVtYmVyLCBkaXN0YW5jZTogbnVtYmVyO1xyXG4gICAgICAgICAgICBsZXQgcGFyYW06IFN1YkZsb3dQYXJhbUV4ID0gPFN1YkZsb3dQYXJhbUV4Pnt9O1xyXG4gICAgICAgICAgICBsZXQgdGFyZ2V0OiBPYmplY3Q7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGkgPSBoaXN0b3J5QWN0aXZlSW5kZXgsIGRpc3RhbmNlID0gMDsgMCA8PSBpOyBpLS0gLCBkaXN0YW5jZSsrKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoc3RhY2tbaV1bUm91dGVyLlNVQkZMT1dfUEFSQU1dKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0ID0gc3RhY2tbaV07XHJcbiAgICAgICAgICAgICAgICAgICAgcGFyYW0gPSA8U3ViRmxvd1BhcmFtRXg+c3RhY2tbaV1bUm91dGVyLlNVQkZMT1dfUEFSQU1dO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAobnVsbCA9PSBwYXJhbS5hZGRpdGlvbmFsRGlzdGFuY2UpIHtcclxuICAgICAgICAgICAgICAgIHBhcmFtLmFkZGl0aW9uYWxEaXN0YW5jZSA9IDA7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBzdGFjazogdGFyZ2V0LFxyXG4gICAgICAgICAgICAgICAgc3ViRmxvd1BhcmFtOiBwYXJhbSxcclxuICAgICAgICAgICAgICAgIGRpc3RhbmNlOiBkaXN0YW5jZSArIHBhcmFtLmFkZGl0aW9uYWxEaXN0YW5jZSxcclxuICAgICAgICAgICAgICAgIGlzQ3VycmVudDogKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGFyZ2V0ICYmIDAgPT09IGRpc3RhbmNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KSgpLFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQGVuIENvbnZlcnQgcGF0aCB0byBqUU0gZGF0YVVybC5cclxuICAgICAgICAgKiBAamEg44OR44K544KSIGpRTSBkYXRhVXJsIOOBq+WkieaPm1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybnMgalFNIGRhdGEgdXJsLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIHBhdGhUb0pxbURhdGFVcmwocGF0aDogc3RyaW5nKTogc3RyaW5nIHtcclxuICAgICAgICAgICAgY29uc3QgdXJsID0gRnJhbWV3b3JrLnRvVXJsKHBhdGgpO1xyXG4gICAgICAgICAgICBjb25zdCBkYXRhVXJsID0gJC5tb2JpbGUucGF0aC5jb252ZXJ0VXJsVG9EYXRhVXJsKHVybCk7XHJcbiAgICAgICAgICAgIHJldHVybiBkYXRhVXJsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQGVuIFVwZGF0ZSBqUU0gdXJsSGlzdG9yeSBieSB3aW5kb3cuaGlzdG9yeSBvYmplY3QuIDxicj5cclxuICAgICAgICAgKiAgICAgVG8gYmUgbmF0dXJhbCBicm93c2luZyBoaXN0b3J5IGJlaGF2aW9yLCBhcHBsaWNhdGlvbiBuZWVkcyB0byB1cGRhdGUgalFNIHVybEhpc3RvcnkgPGJyPlxyXG4gICAgICAgICAqICAgICB3aGVuIGNsaWNraW5nIGJhY2sgb3IgbmV4dCBidXR0b24gb2YgYnJvd3Nlci4gKGltcGVyZmVjdGlvbiBmb3IgZGVjaWRlRGlyZWN0aW9uKCkpXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAamEg44OW44Op44Km44K244Gu5bGl5q2044Gr5Z+644Gl44GNIGpRTSB1cmxIaXN0b3J5IOOCkuabtOaWsCA8YnI+XHJcbiAgICAgICAgICogICAgIFvmiLvjgotdL1vpgLLjgoBd44GM5oq85LiL44GV44KM44Gf5b6M44CB44Oa44O844K46YG356e744GV44KM44KL44Go44GN44CBalFNIHVybEhpc3Rvcnkg44KS5pu05paw44GZ44KL44CCKGRlY2lkZURpcmVjdGlvbigpIOOBq+OCiOOCiuS4jeWujOWFqClcclxuICAgICAgICAgKi9cclxuICAgICAgICBwcml2YXRlIHN0YXRpYyB0cmVhdFVybEhpc3RvcnkoKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGlmIChSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvLnBvc2l0aXZlTmF2aWdhdGUgfHwgaGlzdG9yeS5sZW5ndGggPCBSb3V0ZXIuX2dldEpxbUhpc3RvcnkoKS5zdGFjay5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIFJvdXRlci5fZ2V0SnFtSGlzdG9yeSgpLmNsZWFyRm9yd2FyZCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBjZHA6Ly8vQ0RQL0ZyYW1ld29yay9Sb3V0ZXIudHMiLCJuYW1lc3BhY2UgQ0RQLkZyYW1ld29yayB7XHJcblxyXG4gICAgaW1wb3J0IFByb21pc2UgPSBDRFAuUHJvbWlzZTtcclxuXHJcbiAgICBjb25zdCBUQUcgPSBcIltDRFAuRnJhbWV3b3JrLlBhZ2VdIFwiO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGVuIEludGVybmFsIEludGVudCBpbnRlcmZhY2UgZm9yIG1hbmFnZWQgdXBkYXRlIGluZm8uXHJcbiAgICAgKiBAamEg5pu05paw5oOF5aCx44GM566h55CG44GV44KM44Gf5YaF6YOoIEludGVudCDjgqTjg7Pjgr/jg7zjg5XjgqfjgqTjgrnjgq/jg6njgrlcclxuICAgICAqXHJcbiAgICAgKiBAaW50ZXJuYWxcclxuICAgICAqL1xyXG4gICAgaW50ZXJmYWNlIE1hbmFnZWRJbnRlbnQgZXh0ZW5kcyBJbnRlbnQge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBlbiBzZXQgXCJ0cnVlXCIgd2hlbiB1cGRhdGUgaW4gUGFnZSBjbGFzcy5cclxuICAgICAgICAgKiBAamEg44Oa44O844K45YaF44Gn5pu05paw44GV44KM44Gf5aC05ZCIIHRydWVcclxuICAgICAgICAgKi9cclxuICAgICAgICBfdXBkYXRlOiBib29sZWFuO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGVuIEJhc2UgY2xhc3Mgb2YgYWxsIHBhZ2UgdW5pdC5cclxuICAgICAqIEBqYSDjgZnjgbnjgabjga7jg5rjg7zjgrjjga7ln7rmnKzjgajjgarjgovml6Llrprjgq/jg6njgrlcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGNsYXNzIFBhZ2UgaW1wbGVtZW50cyBJUGFnZSB7XHJcblxyXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgICAgIC8vIGRhdGEgbWVtYmVyXHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBfb3duZXI6IElQYWdlO1xyXG4gICAgICAgIHByaXZhdGUgXyRwYWdlOiBKUXVlcnk7XHJcbiAgICAgICAgcHJpdmF0ZSBfJGhlYWRlcjogSlF1ZXJ5O1xyXG4gICAgICAgIHByaXZhdGUgXyRmb290ZXI6IEpRdWVyeTtcclxuICAgICAgICBwcml2YXRlIF9pbnRlbnQ6IE1hbmFnZWRJbnRlbnQ7XHJcbiAgICAgICAgcHJpdmF0ZSBfa2VlcEludGVudDogYm9vbGVhbjtcclxuICAgICAgICBwcml2YXRlIF9pbml0aWFsaXplZDogYm9vbGVhbjtcclxuXHJcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAgICAgLy8gcHVibGljIG1ldGhvZHNcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQHBhcmFtIF91cmxcclxuICAgICAgICAgKiAgLSBgZW5gIHBhZ2UncyBVUkxcclxuICAgICAgICAgKiAgLSBgamFgIOODmuODvOOCuCBVUkxcclxuICAgICAgICAgKiBAcGFyYW0gX2lkXHJcbiAgICAgICAgICogIC0gYGVuYCBwYWdlJ3MgSURcclxuICAgICAgICAgKiAgLSBgamFgIOODmuODvOOCuCBJRFxyXG4gICAgICAgICAqIEBwYXJhbSBvcHRpb25zXHJcbiAgICAgICAgICogIC0gYGVuYCBjb25zdHJ1Y3Rpb24gb3B0aW9uc1xyXG4gICAgICAgICAqICAtIGBqYWAg5qeL56+J44Kq44OX44K344On44OzXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgY29uc3RydWN0b3IocHJpdmF0ZSBfdXJsOiBzdHJpbmcsIHByaXZhdGUgX2lkOiBzdHJpbmcsIG9wdGlvbnM/OiBQYWdlQ29uc3RydWN0T3B0aW9ucykge1xyXG4gICAgICAgICAgICB0aGlzLnNldHVwKG9wdGlvbnMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAgICAgLy8gcHVibGljIGFjY2Vzc29yXHJcblxyXG4gICAgICAgIGdldCBhY3RpdmUoKTogYm9vbGVhbiAgICAgICAgICAgeyByZXR1cm4gISF0aGlzLl8kcGFnZSAmJiB0aGlzLl8kcGFnZS5oYXNDbGFzcyhcInVpLXBhZ2UtYWN0aXZlXCIpOyAgIH1cclxuICAgICAgICBnZXQgdXJsKCk6IHN0cmluZyAgICAgICAgICAgICAgIHsgcmV0dXJuIHRoaXMuX3VybDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgIGdldCBpZCgpOiBzdHJpbmcgICAgICAgICAgICAgICAgeyByZXR1cm4gdGhpcy5faWQ7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgZ2V0ICRwYWdlKCk6IEpRdWVyeSAgICAgICAgICAgICB7IHJldHVybiB0aGlzLl8kcGFnZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICBnZXQgJGhlYWRlcigpOiBKUXVlcnkgICAgICAgICAgIHsgcmV0dXJuIHRoaXMuXyRoZWFkZXI7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgIGdldCAkZm9vdGVyKCk6IEpRdWVyeSAgICAgICAgICAgeyByZXR1cm4gdGhpcy5fJGZvb3RlcjsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgZ2V0IGludGVudCgpOiBJbnRlbnQgICAgICAgICAgICB7IHJldHVybiB0aGlzLl9pbnRlbnQ7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICBzZXQgaW50ZW50KG5ld0ludGVudDogSW50ZW50KSAgIHsgdGhpcy5faW50ZW50ID0gPGFueT5uZXdJbnRlbnQ7IHRoaXMuX2ludGVudC5fdXBkYXRlID0gdHJ1ZTsgICAgICAgfVxyXG5cclxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgICAgICAvLyBJbXBsZW10ZW50czogSVBhZ2VcclxuXHJcbiAgICAgICAgLy8gT3JpZW50YXRpb24g44Gu5aSJ5pu044KS5Y+X5L+hXHJcbiAgICAgICAgcHVibGljIG9uT3JpZW50YXRpb25DaGFuZ2VkKG5ld09yaWVudGF0aW9uOiBPcmllbnRhdGlvbik6IHZvaWQge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fb3duZXIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX293bmVyLm9uT3JpZW50YXRpb25DaGFuZ2VkKG5ld09yaWVudGF0aW9uKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gSC9XIEJhY2sgQnV0dG9uIOODj+ODs+ODieODqVxyXG4gICAgICAgIHB1YmxpYyBvbkhhcmR3YXJlQmFja0J1dHRvbihldmVudD86IEpRdWVyeS5FdmVudCk6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fb3duZXIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9vd25lci5vbkhhcmR3YXJlQmFja0J1dHRvbihldmVudCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFJvdXRlciBcImJlZm9yZSByb3V0ZSBjaGFuZ2VcIiDjg4/jg7Pjg4njg6lcclxuICAgICAgICBwdWJsaWMgb25CZWZvcmVSb3V0ZUNoYW5nZSgpOiBJUHJvbWlzZUJhc2U8YW55PiB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9vd25lcikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX293bmVyLm9uQmVmb3JlUm91dGVDaGFuZ2UoKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8g5rGO55So44Kz44Oe44Oz44OJ44KS5Y+X5L+hXHJcbiAgICAgICAgcHVibGljIG9uQ29tbWFuZChldmVudD86IEpRdWVyeS5FdmVudCwga2luZD86IHN0cmluZyk6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fb3duZXIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9vd25lci5vbkNvbW1hbmQoZXZlbnQsIGtpbmQpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyDmnIDliJ3jga4gT25QYWdlSW5pdCgpIOOBruOBqOOBjeOBq+OBruOBv+OCs+ODvOODq+OBleOCjOOCi1xyXG4gICAgICAgIHB1YmxpYyBvbkluaXRpYWxpemUoZXZlbnQ6IEpRdWVyeS5FdmVudCk6IHZvaWQge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fb3duZXIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX293bmVyLm9uSW5pdGlhbGl6ZShldmVudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGpRTSBldmVudDogXCJwYWdlYmVmb3JlY3JlYXRlXCIg44Gr5a++5b+cXHJcbiAgICAgICAgcHVibGljIG9uUGFnZUJlZm9yZUNyZWF0ZShldmVudDogSlF1ZXJ5LkV2ZW50KTogdm9pZCB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9vd25lcikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fb3duZXIub25QYWdlQmVmb3JlQ3JlYXRlKGV2ZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8galFNIGV2ZW50OiBcInBhZ2VjcmVhdGVcIiAo5penOlwicGFnZWluaXRcIikg44Gr5a++5b+cXHJcbiAgICAgICAgcHVibGljIG9uUGFnZUluaXQoZXZlbnQ6IEpRdWVyeS5FdmVudCk6IHZvaWQge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fb3duZXIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX293bmVyLm9uUGFnZUluaXQoZXZlbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBqUU0gZXZlbnQ6IFwicGFnZWJlZm9yZXNob3dcIiDjgavlr77lv5xcclxuICAgICAgICBwdWJsaWMgb25QYWdlQmVmb3JlU2hvdyhldmVudDogSlF1ZXJ5LkV2ZW50LCBkYXRhPzogU2hvd0V2ZW50RGF0YSk6IHZvaWQge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fb3duZXIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX293bmVyLm9uUGFnZUJlZm9yZVNob3coZXZlbnQsIGRhdGEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBqUU0gZXZlbnQ6IFwicGFnZWNvbnRhaW5lcnNob3dcIiAo5penOlwicGFnZXNob3dcIikg44Gr5a++5b+cXHJcbiAgICAgICAgcHVibGljIG9uUGFnZVNob3coZXZlbnQ6IEpRdWVyeS5FdmVudCwgZGF0YT86IFNob3dFdmVudERhdGEpOiB2b2lkIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX293bmVyKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9vd25lci5vblBhZ2VTaG93KGV2ZW50LCBkYXRhKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8galFNIGV2ZW50OiBcInBhZ2ViZWZvcmVoaWRlXCIg44Gr5a++5b+cXHJcbiAgICAgICAgcHVibGljIG9uUGFnZUJlZm9yZUhpZGUoZXZlbnQ6IEpRdWVyeS5FdmVudCwgZGF0YT86IEhpZGVFdmVudERhdGEpOiB2b2lkIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX293bmVyKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9vd25lci5vblBhZ2VCZWZvcmVIaWRlKGV2ZW50LCBkYXRhKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8galFNIGV2ZW50OiBcInBhZ2Vjb250YWluZXJoaWRlXCIgKOaXpzpcInBhZ2VoaWRlXCIpIOOBq+WvvuW/nFxyXG4gICAgICAgIHB1YmxpYyBvblBhZ2VIaWRlKGV2ZW50OiBKUXVlcnkuRXZlbnQsIGRhdGE/OiBIaWRlRXZlbnREYXRhKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9vd25lcikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fb3duZXIub25QYWdlSGlkZShldmVudCwgZGF0YSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGpRTSBldmVudDogXCJwYWdlcmVtb3ZlXCIg44Gr5a++5b+cXHJcbiAgICAgICAgcHVibGljIG9uUGFnZVJlbW92ZShldmVudDogSlF1ZXJ5LkV2ZW50KTogdm9pZCB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9vd25lcikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fb3duZXIub25QYWdlUmVtb3ZlKGV2ZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAgICAgLy8gcHJpdmF0ZSBtZXRob2RzXHJcblxyXG4gICAgICAgIC8vIG1peGluIOeUqOeWkeS8vOOCs+ODs+OCueODiOODqeOCr+OCv1xyXG4gICAgICAgIHByaXZhdGUgc2V0dXAob3B0aW9uczogUGFnZUNvbnN0cnVjdE9wdGlvbnMpOiB2b2lkIHtcclxuICAgICAgICAgICAgLy8gbWl4aW4gZGVzdGluYXRpb24g55So44Gu5YaN5Yid5pyf5YyWXHJcbiAgICAgICAgICAgIHRoaXMuX2luaXRpYWxpemVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHRoaXMuX2ludGVudCA9IG51bGw7XHJcblxyXG4gICAgICAgICAgICAvLyDjgqTjg5njg7Pjg4jjg5DjgqTjg7Pjg4lcclxuICAgICAgICAgICAgY29uc3Qgc2VsZWN0b3I6IHN0cmluZyA9IFwiI1wiICsgdGhpcy5faWQ7XHJcbiAgICAgICAgICAgICQoZG9jdW1lbnQpXHJcbiAgICAgICAgICAgICAgICAub2ZmKFwicGFnZWJlZm9yZWNyZWF0ZVwiLCBzZWxlY3RvcilcclxuICAgICAgICAgICAgICAgIC5vbihcInBhZ2ViZWZvcmVjcmVhdGVcIiwgc2VsZWN0b3IsIChldmVudDogSlF1ZXJ5LkV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fJHBhZ2UgPSAkKHNlbGVjdG9yKS5maXJzdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuXyRoZWFkZXIgPSB0aGlzLl8kcGFnZS5jaGlsZHJlbihcIjpqcW1EYXRhKHJvbGU9aGVhZGVyKVwiKS5maXJzdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuXyRmb290ZXIgPSB0aGlzLl8kcGFnZS5jaGlsZHJlbihcIjpqcW1EYXRhKHJvbGU9Zm9vdGVyKVwiKS5maXJzdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuXyRwYWdlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbihcInBhZ2VjcmVhdGVcIiwgKGV2OiBKUXVlcnkuRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGFnZUluaXQoZXYpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAub24oXCJwYWdlYmVmb3Jlc2hvd1wiLCAoZXY6IEpRdWVyeS5FdmVudCwgZGF0YTogU2hvd0V2ZW50RGF0YSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYWdlQmVmb3JlU2hvdyhldiwgZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFtOb3RlXWluc3RlYWQgZnV0dXJlIHZlcnNpb24gXCJwYWdlY29udGFpbmVyc2hvd1wiLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAub24oXCJwYWdlc2hvd1wiLCAoZXY6IEpRdWVyeS5FdmVudCwgZGF0YTogU2hvd0V2ZW50RGF0YSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYWdlU2hvdyhldiwgZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbihcInBhZ2ViZWZvcmVoaWRlXCIsIChldjogSlF1ZXJ5LkV2ZW50LCBkYXRhOiBIaWRlRXZlbnREYXRhKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhZ2VCZWZvcmVIaWRlKGV2LCBkYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gW05vdGVdaW5zdGVhZCBmdXR1cmUgdmVyc2lvbiBcInBhZ2Vjb250YWluZXJoaWRlXCIuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbihcInBhZ2VoaWRlXCIsIChldjogSlF1ZXJ5LkV2ZW50LCBkYXRhOiBIaWRlRXZlbnREYXRhKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhZ2VIaWRlKGV2LCBkYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uKFwicGFnZXJlbW92ZVwiLCAoZXY6IEpRdWVyeS5FdmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYWdlUmVtb3ZlKGV2KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYWdlQmVmb3JlQ3JlYXRlKGV2ZW50KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XHJcblxyXG4gICAgICAgICAgICAvLyBvd25lciDoqK3lrppcclxuICAgICAgICAgICAgdGhpcy5fb3duZXIgPSBvcHRpb25zLm93bmVyO1xyXG4gICAgICAgICAgICAvLyBpbnRlbnQg6Kit5a6aXHJcbiAgICAgICAgICAgIHRoaXMuX2tlZXBJbnRlbnQgPSBvcHRpb25zLmtlZXBJbnRlbnQ7XHJcblxyXG4gICAgICAgICAgICAvLyBSb3V0ZXIg44G455m76YyyXHJcbiAgICAgICAgICAgIGlmIChudWxsID09IG9wdGlvbnMucm91dGUpIHtcclxuICAgICAgICAgICAgICAgIG9wdGlvbnMucm91dGUgPSB0aGlzLl9pZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBSb3V0ZXIucmVnaXN0ZXIob3B0aW9ucy5yb3V0ZSwgdGhpcy5fdXJsLCBvcHRpb25zLnRvcCwgb3B0aW9ucy5jYWxsYmFjayk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBQYWdlVHJhbnNpdGlvbkRpcmVjdGlvbiDjga7liKTlrppcclxuICAgICAgICBwcml2YXRlIGdldERpcmVjdGlvbigpOiBQYWdlVHJhbnNpdGlvbkRpcmVjdGlvbiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGFjdGl2ZUluZGV4ID0gUm91dGVyLl9nZXRKcW1IaXN0b3J5KCkuYWN0aXZlSW5kZXg7XHJcbiAgICAgICAgICAgIGNvbnN0IHByZXZJbmRleCA9IFJvdXRlci5fZ2V0SnFtSGlzdG9yeSgpLnByZXZpb3VzSW5kZXg7XHJcblxyXG4gICAgICAgICAgICBpZiAobnVsbCA9PSBhY3RpdmVJbmRleCB8fCBudWxsID09IHByZXZJbmRleCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwidW5rbm93blwiO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHByZXZJbmRleCA9PT0gYWN0aXZlSW5kZXgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBcInNhbWVcIjtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChhY3RpdmVJbmRleCA8IHByZXZJbmRleCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiYmFja1wiO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiZm9yd2FyZFwiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHBhZ2VCZWZvcmVDcmVhdGUoZXZlbnQ6IEpRdWVyeS5FdmVudCk6IHZvaWQge1xyXG4gICAgICAgICAgICB0aGlzLm9uUGFnZUJlZm9yZUNyZWF0ZShldmVudCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHBhZ2VJbml0KGV2ZW50OiBKUXVlcnkuRXZlbnQpOiB2b2lkIHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLl9pbml0aWFsaXplZCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vbkluaXRpYWxpemUoZXZlbnQpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5faW5pdGlhbGl6ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMub25QYWdlSW5pdChldmVudCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHBhZ2VCZWZvcmVTaG93KGV2ZW50OiBKUXVlcnkuRXZlbnQsIGRhdGE6IFNob3dFdmVudERhdGEpOiB2b2lkIHtcclxuICAgICAgICAgICAgRnJhbWV3b3JrLl9zZXRBY3RpdmVQYWdlKHRoaXMpO1xyXG4gICAgICAgICAgICB0aGlzLl9pbnRlbnQgPSA8TWFuYWdlZEludGVudD5Sb3V0ZXIuX3BvcEludGVudCgpO1xyXG4gICAgICAgICAgICB0aGlzLm9uUGFnZUJlZm9yZVNob3coZXZlbnQsICQuZXh0ZW5kKGRhdGEsIHsgZGlyZWN0aW9uOiB0aGlzLmdldERpcmVjdGlvbigpIH0pKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgcGFnZVNob3coZXZlbnQ6IEpRdWVyeS5FdmVudCwgZGF0YTogU2hvd0V2ZW50RGF0YSk6IHZvaWQge1xyXG4gICAgICAgICAgICB0aGlzLm9uUGFnZVNob3coZXZlbnQsICQuZXh0ZW5kKGRhdGEsIHsgZGlyZWN0aW9uOiB0aGlzLmdldERpcmVjdGlvbigpIH0pKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgcGFnZUJlZm9yZUhpZGUoZXZlbnQ6IEpRdWVyeS5FdmVudCwgZGF0YTogSGlkZUV2ZW50RGF0YSk6IHZvaWQge1xyXG4gICAgICAgICAgICB0aGlzLm9uUGFnZUJlZm9yZUhpZGUoZXZlbnQsICQuZXh0ZW5kKGRhdGEsIHsgZGlyZWN0aW9uOiB0aGlzLmdldERpcmVjdGlvbigpIH0pKTtcclxuICAgICAgICAgICAgaWYgKG51bGwgIT0gdGhpcy5faW50ZW50ICYmICh0aGlzLl9rZWVwSW50ZW50IHx8IHRoaXMuX2ludGVudC5fdXBkYXRlKSkgeyAgICAvLyBpbnRlbnQg44Gr5pu05paw44GM44GC44Gj44Gf5aC05ZCIXHJcbiAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5faW50ZW50Ll91cGRhdGU7XHJcbiAgICAgICAgICAgICAgICBSb3V0ZXIuX3B1c2hJbnRlbnQodGhpcy5faW50ZW50KTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChSb3V0ZXIuZnJvbUhhc2hDaGFuZ2VkKCkgJiYgUm91dGVyLmlzSW5TdWJGbG93KCkpIHsgICAgLy8gU3ViIEZsb3cg5YaF44GnIGJhY2sg44GV44KM44Gf5aC05ZCIXHJcbiAgICAgICAgICAgICAgICBSb3V0ZXIuX3B1c2hJbnRlbnQodGhpcy5faW50ZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLl9pbnRlbnQgPSBudWxsO1xyXG4gICAgICAgICAgICBGcmFtZXdvcmsuX3NldEFjdGl2ZVBhZ2UobnVsbCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHBhZ2VIaWRlKGV2ZW50OiBKUXVlcnkuRXZlbnQsIGRhdGE6IEhpZGVFdmVudERhdGEpOiB2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy5vblBhZ2VIaWRlKGV2ZW50LCAkLmV4dGVuZChkYXRhLCB7IGRpcmVjdGlvbjogdGhpcy5nZXREaXJlY3Rpb24oKSB9KSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHBhZ2VSZW1vdmUoZXZlbnQ6IEpRdWVyeS5FdmVudCk6IHZvaWQge1xyXG4gICAgICAgICAgICB0aGlzLm9uUGFnZVJlbW92ZShldmVudCk7XHJcbiAgICAgICAgICAgIHRoaXMuXyRwYWdlLm9mZigpO1xyXG4gICAgICAgICAgICB0aGlzLl8kcGFnZSA9IG51bGw7XHJcbiAgICAgICAgICAgIHRoaXMuXyRoZWFkZXIub2ZmKCk7XHJcbiAgICAgICAgICAgIHRoaXMuXyRoZWFkZXIgPSBudWxsO1xyXG4gICAgICAgICAgICB0aGlzLl8kZm9vdGVyLm9mZigpO1xyXG4gICAgICAgICAgICB0aGlzLl8kZm9vdGVyID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgIC8vIGNsb3N1cmUgbWV0aG9kc1xyXG5cclxuICAgIC8qXHJcbiAgICAgKiBqUU0xLjQg44Gr44Gm44CBZHVwbGljYXRlIOOBqOOBleOCjOOBpuOBhOOCiyBcInBhZ2VzaG93XCIsIFwicGFnZWhpZGVcIiDjga/jgb7jgaDmja7jgYjnva7jgY3jgIJcclxuICAgICAqIGh0dHA6Ly9qcXVlcnltb2JpbGUuY29tL3VwZ3JhZGUtZ3VpZGUvMS40LyNuYXZpZ2F0aW9uXHJcbiAgICAgKlxyXG4gICAgICog54m55a6a44Oa44O844K444Gr5a++44GX44Gm44CB44Kk44OZ44Oz44OI44KS5Y+W5b6X44Gn44GN44Gq44GE44Gf44KB44CCXHJcbiAgICAgKiBGb3J1bSDjgafjgoLorbDoq5bkuK3jgarjga7jgafjgIHmsbrnnYDjgYzjgaTjgYTjgabjgYvjgonlr77lv5zjgpLogIPmha7jgZnjgovjgIJcclxuICAgICAqIGh0dHBzOi8vZ2l0aHViLmNvbS9qcXVlcnkvanF1ZXJ5LW1vYmlsZS9pc3N1ZXMvNjg2NVxyXG4gICAgICpcclxuICAgICAqIFvlj4LogINdIOOCiOOBj+OCj+OBi+OCi+OCpOODmeODs+ODiOODgeODvOODiOOCt+ODvOODiFxyXG4gICAgICogIC0g5pys5a62KDEuNCspIGh0dHA6Ly9qcW10cmlja3Mud29yZHByZXNzLmNvbS8yMDE0LzAzLzI2L2pxdWVyeS1tb2JpbGUtcGFnZS1ldmVudHMvXHJcbiAgICAgKiAgLSDmnInlv5cofjEuMykgaHR0cDovL2Rldi5zY3Jldy1heGlzLmNvbS9kb2MvanF1ZXJ5X21vYmlsZS9yZXNvdXJjZXMvY2hlYXRzaGVldC9cclxuICAgICAqXHJcbiAgICAgKiDku6XkuIvjga/kuI3lrozlhajjgarlr77lv5zkuojlrprjgrPjg7zjg4lcclxuICAgICAqXHJcbiAgICAgKiDnibnjgavmjK/jgovoiJ7jgYTjgYzlpInjgo/jgovjga7jga/jgIFcInBhZ2VoaWRlXCIg44Gn44CB5qSc6KiO44GV44KM44Gm44GE44KL5LuV5qeY44Gn44GvXHJcbiAgICAgKiBET00g44KS54m55a6a44Gn44GN44Gq44GE44Gf44KB44CBb25QYWdlSGlkZSgpIOOCkuOCpOODs+OCueOCv+ODs+OCueOBq+S8neOBiOOCi+OBk+OBqOOBjOOBp+OBjeOBquOBhOOAglxyXG4gICAgICpcclxuICAgICAqIOS7leanmOOBjOWkieOCj+OCieOBquOBhOWgtOWQiOOBr1xyXG4gICAgICogb25QYWdlQmVmb3JlSGlkZSgpIOOBruS4reOBpyBwb3N0IOOBl+OBpiBvblBhZ2VIaWRlKCkg44KS55m66KGM44GZ44KL5LqI5a6aKOmBjuWOu+S6kuaPm+S/neiovClcclxuICAgICAqXHJcbiAgICAgKiAyMDE1LzAzLzI1IOi/veiomDpcclxuICAgICAqIOS7leanmOOBr+eiuuWumi4galFNMS42IOOCiOOCiuWJiumZpOOBleOCjOOCi+S6iOWumlxyXG4gICAgICogIGpRTTEuNCDnm7jlvZPjga7lj4LogIPlrp/oo4UgcGx1Z2luIOOBjOOBguOCiuOAgeOBk+OBruWun+ijheebuOW9k+OBruapn+iDveOCkiBjZHAuZnJhbWV3b3JrLmpxbSDjgafmirHjgYjjgovkuojlrppcclxuICAgICAqICBodHRwczovL2dpdGh1Yi5jb20vYXJzY2htaXR6L2pxdWVyeS1tb2JpbGUtb25wYWdlXHJcbiAgICAgKlxyXG4gICAgICog5YWs5byP6KaL6KejXHJcbiAgICAgKiBodHRwczovL2dpdGh1Yi5jb20vanF1ZXJ5L2pxdWVyeS1tb2JpbGUvaXNzdWVzLzcyODMjaXNzdWVjb21tZW50LTQwNzQ2NjIyXHJcbiAgICAgKi9cclxuLypcclxuICAgIC8vIGJpbmQgXCJwYWdlY29udGFpbmVyc2hvd1wiLCBhbmQgXCJwYWdlY29udGFpbmVyaGlkZVwiLlxyXG4gICAgKCgpID0+IHtcclxuICAgICAgICBsZXQgJGJvZHk6IGFueSA9ICQoXCJib2R5XCIpO1xyXG4gICAgICAgICQoZG9jdW1lbnQpXHJcbiAgICAgICAgICAgIC5vbihcInBhZ2Vjb250YWluZXJzaG93XCIsIChldmVudDogSlF1ZXJ5LkV2ZW50LCBkYXRhOiBTaG93RXZlbnREYXRhKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoMCA8IGRhdGEucHJldlBhZ2UubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gXCJwYWdlY29udGFpbmVyc2hvd1wiIOOBryBcInBhZ2Vjb250YWluZXJoaWRlXCIg44KI44KK44KC6YGF44GE44Gu44Gn44CB44KE44Gv44KKIERPTSDjgavjga/jgqLjgq/jgrvjgrnjgafjgY3jgarjgYRcclxuICAgICAgICAgICAgICAgICAgICBsZXQgJHByZXZwYWdlID0gJChcIiNcIiArIGRhdGEucHJldlBhZ2VbMF0uaWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICRwcmV2cGFnZS50cmlnZ2VyKFwiX3BhZ2VoaWRlXCIsIGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8g5Lul5LiL44Gu5a++5b+c44Gn44CBXCJwYWdlY29udGFpbmVyc2hvd1wiIOOBryBcInBhZ2VzaG93XCIg5ZCM562J44Gu5oyv44KL6Iie44GE44Gr44GZ44KL44GT44Go44GM5Y+v6IO9XHJcbiAgICAgICAgICAgICAgICBsZXQgcGFnZUlkID0gJGJvZHkucGFnZWNvbnRhaW5lcihcImdldEFjdGl2ZVBhZ2VcIikucHJvcChcImlkXCIpO1xyXG4gICAgICAgICAgICAgICAgbGV0ICRwYWdlID0gJChcIiNcIiArIHBhZ2VJZCk7XHJcbiAgICAgICAgICAgICAgICAkcGFnZS50cmlnZ2VyKFwiX3BhZ2VzaG93XCIsIGRhdGEpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAub24oXCJwYWdlY29udGFpbmVyaGlkZVwiLCAoZXZlbnQ6IEpRdWVyeS5FdmVudCwgZGF0YTogSGlkZUV2ZW50RGF0YSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgLy8gXCJwYWdlY29udGFpbmVyaGlkZVwiIOOCkuWPl+OBkeOBn+OBqOOBjeOBr+aXouOBqyBET00g44GL44KJ5raI44GI44Gm44GE44KL44Gf44KB44CBcGFnZSDjga/nibnlrprjgafjgY3jgarjgYTjgIJcclxuICAgICAgICAgICAgICAgIC8vbGV0IHBhZ2VJZCA9ICRib2R5LnBhZ2Vjb250YWluZXIoJ2dldEFjdGl2ZVBhZ2UnKS5wcm9wKFwiaWRcIik7XHJcbiAgICAgICAgICAgICAgICAvL2xldCAkcGFnZSA9ICQoXCIjXCIgKyBwYWdlSWQpO1xyXG4gICAgICAgICAgICAgICAgLy8kcGFnZS50cmlnZ2VyKFwiX3BhZ2VoaWRlXCIsIGRhdGEpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAub24oXCJwYWdlY29udGFpbmVydHJhbnNpdGlvblwiLCAoZXZlbnQ6IEpRdWVyeS5FdmVudCwgZGF0YTogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAvLyBcInBhZ2Vjb250YWluZXJ0cmFuc2l0aW9uXCIg44Gr44GvIHRvUGFnZSDjgavjgZfjgYvjgqLjgq/jgrvjgrnjga/jgafjgY3jgarjgYRcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICA7XHJcbiAgICB9KSgpO1xyXG4qL1xyXG59XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBjZHA6Ly8vQ0RQL0ZyYW1ld29yay9QYWdlLnRzIiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzNfXztcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBleHRlcm5hbCB7XCJyb290XCI6XCJDRFBcIixcImNvbW1vbmpzXCI6XCJjZHAuaTE4blwiLFwiY29tbW9uanMyXCI6XCJjZHAuaTE4blwiLFwiYW1kXCI6XCJjZHAuaTE4blwifVxuLy8gbW9kdWxlIGlkID0gM1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfNF9fO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIHtcInJvb3RcIjpcIkJhY2tib25lXCIsXCJjb21tb25qc1wiOlwiYmFja2JvbmVcIixcImNvbW1vbmpzMlwiOlwiYmFja2JvbmVcIixcImFtZFwiOlwiYmFja2JvbmVcIn1cbi8vIG1vZHVsZSBpZCA9IDRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqKiBJTVBPUlRTIEZST00gaW1wb3J0cy1sb2FkZXIgKioqL1xuKGZ1bmN0aW9uKCkge1xuXG4vKiFcclxuICogalF1ZXJ5IE1pZ3JhdGUgLSB2My4wLjEtaG90Zml4IC0gMjAxNy0wMS0xMVxyXG4gKiBDb3B5cmlnaHQgalF1ZXJ5IEZvdW5kYXRpb24gYW5kIG90aGVyIGNvbnRyaWJ1dG9yc1xyXG4gKi9cclxuOyAoZnVuY3Rpb24gKGZhY3RvcnkpIHtcclxuICAgIGlmICh0eXBlb2YgZGVmaW5lID09PSBcImZ1bmN0aW9uXCIgJiYgZGVmaW5lLmFtZCkge1xyXG4gICAgICAgIC8vIEFNRC4gUmVnaXN0ZXIgYXMgYW4gYW5vbnltb3VzIG1vZHVsZS5cclxuICAgICAgICBkZWZpbmUoW1wianF1ZXJ5XCJdLCBmdW5jdGlvbiAoJCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFjdG9yeSgkLCB3aW5kb3cpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSBlbHNlIGlmICh0eXBlb2YgbW9kdWxlID09PSBcIm9iamVjdFwiICYmIG1vZHVsZS5leHBvcnRzKSB7XHJcbiAgICAgICAgLy8gTm9kZS9Db21tb25KU1xyXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bmRlZlxyXG4gICAgICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeShyZXF1aXJlKFwianF1ZXJ5XCIpLCB3aW5kb3cpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICAvLyBCcm93c2VyIGdsb2JhbHNcclxuICAgICAgICBmYWN0b3J5KGpRdWVyeSwgd2luZG93KTtcclxuICAgIH1cclxufSkoZnVuY3Rpb24gKGpRdWVyeSwgd2luZG93KSB7XHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuXHJcbiAgICBqUXVlcnkubWlncmF0ZVZlcnNpb24gPSBcIjMuMC4xLWhvdGZpeFwiOyAvLyB3aXRoIGhvdGZpeFxyXG5cclxuICAgIC8qIGV4cG9ydGVkIG1pZ3JhdGVXYXJuLCBtaWdyYXRlV2FybkZ1bmMsIG1pZ3JhdGVXYXJuUHJvcCAqL1xyXG5cclxuICAgIChmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgIC8vIFN1cHBvcnQ6IElFOSBvbmx5XHJcbiAgICAgICAgLy8gSUU5IG9ubHkgY3JlYXRlcyBjb25zb2xlIG9iamVjdCB3aGVuIGRldiB0b29scyBhcmUgZmlyc3Qgb3BlbmVkXHJcbiAgICAgICAgLy8gQWxzbywgYXZvaWQgRnVuY3Rpb24jYmluZCBoZXJlIHRvIHNpbXBsaWZ5IFBoYW50b21KUyB1c2FnZVxyXG4gICAgICAgIHZhciBsb2cgPSB3aW5kb3cuY29uc29sZSAmJiB3aW5kb3cuY29uc29sZS5sb2cgJiZcclxuICAgICAgICAgICAgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgd2luZG93LmNvbnNvbGUubG9nLmFwcGx5KHdpbmRvdy5jb25zb2xlLCBhcmd1bWVudHMpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICByYmFkVmVyc2lvbnMgPSAvXlsxMl1cXC4vO1xyXG5cclxuICAgICAgICBpZiAoIWxvZykge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBOZWVkIGpRdWVyeSAzLjAuMCsgYW5kIG5vIG9sZGVyIE1pZ3JhdGUgbG9hZGVkXHJcbiAgICAgICAgaWYgKCFqUXVlcnkgfHwgcmJhZFZlcnNpb25zLnRlc3QoalF1ZXJ5LmZuLmpxdWVyeSkpIHtcclxuICAgICAgICAgICAgbG9nKFwiSlFNSUdSQVRFOiBqUXVlcnkgMy4wLjArIFJFUVVJUkVEXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoalF1ZXJ5Lm1pZ3JhdGVXYXJuaW5ncykge1xyXG4gICAgICAgICAgICBsb2coXCJKUU1JR1JBVEU6IE1pZ3JhdGUgcGx1Z2luIGxvYWRlZCBtdWx0aXBsZSB0aW1lc1wiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFNob3cgYSBtZXNzYWdlIG9uIHRoZSBjb25zb2xlIHNvIGRldnMga25vdyB3ZSdyZSBhY3RpdmVcclxuICAgICAgICBpZiAoIWpRdWVyeS5taWdyYXRlTXV0ZSkge1xyXG4gICAgICAgICAgICBsb2coXCJKUU1JR1JBVEU6IE1pZ3JhdGUgaXMgaW5zdGFsbGVkXCIgK1xyXG4gICAgICAgICAgICAgICAgKGpRdWVyeS5taWdyYXRlTXV0ZSA/IFwiXCIgOiBcIiB3aXRoIGxvZ2dpbmcgYWN0aXZlXCIpICtcclxuICAgICAgICAgICAgICAgIFwiLCB2ZXJzaW9uIFwiICsgalF1ZXJ5Lm1pZ3JhdGVWZXJzaW9uKTtcclxuICAgICAgICB9XHJcbiAgICB9KSgpO1xyXG5cclxuICAgIHZhciB3YXJuZWRBYm91dCA9IHt9O1xyXG5cclxuICAgIC8vIExpc3Qgb2Ygd2FybmluZ3MgYWxyZWFkeSBnaXZlbjsgcHVibGljIHJlYWQgb25seVxyXG4gICAgalF1ZXJ5Lm1pZ3JhdGVXYXJuaW5ncyA9IFtdO1xyXG5cclxuICAgIC8vIFNldCB0byBmYWxzZSB0byBkaXNhYmxlIHRyYWNlcyB0aGF0IGFwcGVhciB3aXRoIHdhcm5pbmdzXHJcbiAgICBpZiAoalF1ZXJ5Lm1pZ3JhdGVUcmFjZSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgalF1ZXJ5Lm1pZ3JhdGVUcmFjZSA9IHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gRm9yZ2V0IGFueSB3YXJuaW5ncyB3ZSd2ZSBhbHJlYWR5IGdpdmVuOyBwdWJsaWNcclxuICAgIGpRdWVyeS5taWdyYXRlUmVzZXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgd2FybmVkQWJvdXQgPSB7fTtcclxuICAgICAgICBqUXVlcnkubWlncmF0ZVdhcm5pbmdzLmxlbmd0aCA9IDA7XHJcbiAgICB9O1xyXG5cclxuICAgIGZ1bmN0aW9uIG1pZ3JhdGVXYXJuKG1zZykge1xyXG4gICAgICAgIHZhciBjb25zb2xlID0gd2luZG93LmNvbnNvbGU7XHJcbiAgICAgICAgaWYgKCF3YXJuZWRBYm91dFttc2ddKSB7XHJcbiAgICAgICAgICAgIHdhcm5lZEFib3V0W21zZ10gPSB0cnVlO1xyXG4gICAgICAgICAgICBqUXVlcnkubWlncmF0ZVdhcm5pbmdzLnB1c2gobXNnKTtcclxuICAgICAgICAgICAgaWYgKGNvbnNvbGUgJiYgY29uc29sZS53YXJuICYmICFqUXVlcnkubWlncmF0ZU11dGUpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihcIkpRTUlHUkFURTogXCIgKyBtc2cpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGpRdWVyeS5taWdyYXRlVHJhY2UgJiYgY29uc29sZS50cmFjZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUudHJhY2UoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBtaWdyYXRlV2FyblByb3Aob2JqLCBwcm9wLCB2YWx1ZSwgbXNnKSB7XHJcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwgcHJvcCwge1xyXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXHJcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgbWlncmF0ZVdhcm4obXNnKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAobmV3VmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIG1pZ3JhdGVXYXJuKG1zZyk7XHJcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IG5ld1ZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gbWlncmF0ZVdhcm5GdW5jKG9iaiwgcHJvcCwgbmV3RnVuYywgbXNnKSB7XHJcbiAgICAgICAgb2JqW3Byb3BdID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBtaWdyYXRlV2Fybihtc2cpO1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3RnVuYy5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHdpbmRvdy5kb2N1bWVudC5jb21wYXRNb2RlID09PSBcIkJhY2tDb21wYXRcIikge1xyXG4gICAgICAgIC8vIEpRdWVyeSBoYXMgbmV2ZXIgc3VwcG9ydGVkIG9yIHRlc3RlZCBRdWlya3MgTW9kZVxyXG4gICAgICAgIG1pZ3JhdGVXYXJuKFwialF1ZXJ5IGlzIG5vdCBjb21wYXRpYmxlIHdpdGggUXVpcmtzIE1vZGVcIik7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHZhciBvbGRJbml0ID0galF1ZXJ5LmZuLmluaXQsXHJcbiAgICAgICAgb2xkSXNOdW1lcmljID0galF1ZXJ5LmlzTnVtZXJpYyxcclxuICAgICAgICBvbGRGaW5kID0galF1ZXJ5LmZpbmQsXHJcbiAgICAgICAgcmF0dHJIYXNoVGVzdCA9IC9cXFsoXFxzKlstXFx3XStcXHMqKShbfnxeJCpdPz0pXFxzKihbLVxcdyNdKj8jWy1cXHcjXSopXFxzKlxcXS8sXHJcbiAgICAgICAgcmF0dHJIYXNoR2xvYiA9IC9cXFsoXFxzKlstXFx3XStcXHMqKShbfnxeJCpdPz0pXFxzKihbLVxcdyNdKj8jWy1cXHcjXSopXFxzKlxcXS9nO1xyXG5cclxuICAgIGpRdWVyeS5mbi5pbml0ID0gZnVuY3Rpb24gKGFyZzEpIHtcclxuICAgICAgICB2YXIgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7XHJcblxyXG4gICAgICAgIGlmICh0eXBlb2YgYXJnMSA9PT0gXCJzdHJpbmdcIiAmJiBhcmcxID09PSBcIiNcIikge1xyXG4gICAgICAgICAgICAvLyBKUXVlcnkoIFwiI1wiICkgaXMgYSBib2d1cyBJRCBzZWxlY3RvciwgYnV0IGl0IHJldHVybmVkIGFuIGVtcHR5IHNldCBiZWZvcmUgalF1ZXJ5IDMuMFxyXG4gICAgICAgICAgICBtaWdyYXRlV2FybihcImpRdWVyeSggJyMnICkgaXMgbm90IGEgdmFsaWQgc2VsZWN0b3JcIik7XHJcbiAgICAgICAgICAgIGFyZ3NbMF0gPSBbXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBvbGRJbml0LmFwcGx5KHRoaXMsIGFyZ3MpO1xyXG4gICAgfTtcclxuICAgIGpRdWVyeS5mbi5pbml0LnByb3RvdHlwZSA9IGpRdWVyeS5mbjtcclxuXHJcbiAgICBqUXVlcnkuZmluZCA9IGZ1bmN0aW9uIChzZWxlY3Rvcikge1xyXG4gICAgICAgIHZhciBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKTtcclxuXHJcbiAgICAgICAgLy8gU3VwcG9ydDogUGhhbnRvbUpTIDEueFxyXG4gICAgICAgIC8vIFN0cmluZyNtYXRjaCBmYWlscyB0byBtYXRjaCB3aGVuIHVzZWQgd2l0aCBhIC8vZyBSZWdFeHAsIG9ubHkgb24gc29tZSBzdHJpbmdzXHJcbiAgICAgICAgaWYgKHR5cGVvZiBzZWxlY3RvciA9PT0gXCJzdHJpbmdcIiAmJiByYXR0ckhhc2hUZXN0LnRlc3Qoc2VsZWN0b3IpKSB7XHJcbiAgICAgICAgICAgIC8vIFRoZSBub25zdGFuZGFyZCBhbmQgdW5kb2N1bWVudGVkIHVucXVvdGVkLWhhc2ggd2FzIHJlbW92ZWQgaW4galF1ZXJ5IDEuMTIuMFxyXG4gICAgICAgICAgICAvLyBGaXJzdCBzZWUgaWYgcVMgdGhpbmtzIGl0J3MgYSB2YWxpZCBzZWxlY3RvciwgaWYgc28gYXZvaWQgYSBmYWxzZSBwb3NpdGl2ZVxyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgd2luZG93LmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpO1xyXG4gICAgICAgICAgICB9IGNhdGNoIChlcnIxKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBEaWRuJ3QgKmxvb2sqIHZhbGlkIHRvIHFTQSwgd2FybiBhbmQgdHJ5IHF1b3Rpbmcgd2hhdCB3ZSB0aGluayBpcyB0aGUgdmFsdWVcclxuICAgICAgICAgICAgICAgIHNlbGVjdG9yID0gc2VsZWN0b3IucmVwbGFjZShyYXR0ckhhc2hHbG9iLCBmdW5jdGlvbiAoXywgYXR0ciwgb3AsIHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiW1wiICsgYXR0ciArIG9wICsgXCJcXFwiXCIgKyB2YWx1ZSArIFwiXFxcIl1cIjtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIElmIHRoZSByZWdleHAgKm1heSogaGF2ZSBjcmVhdGVkIGFuIGludmFsaWQgc2VsZWN0b3IsIGRvbid0IHVwZGF0ZSBpdFxyXG4gICAgICAgICAgICAgICAgLy8gTm90ZSB0aGF0IHRoZXJlIG1heSBiZSBmYWxzZSBhbGFybXMgaWYgc2VsZWN0b3IgdXNlcyBqUXVlcnkgZXh0ZW5zaW9uc1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICB3aW5kb3cuZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgbWlncmF0ZVdhcm4oXCJBdHRyaWJ1dGUgc2VsZWN0b3Igd2l0aCAnIycgbXVzdCBiZSBxdW90ZWQ6IFwiICsgYXJnc1swXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYXJnc1swXSA9IHNlbGVjdG9yO1xyXG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyMikge1xyXG4gICAgICAgICAgICAgICAgICAgIG1pZ3JhdGVXYXJuKFwiQXR0cmlidXRlIHNlbGVjdG9yIHdpdGggJyMnIHdhcyBub3QgZml4ZWQ6IFwiICsgYXJnc1swXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBvbGRGaW5kLmFwcGx5KHRoaXMsIGFyZ3MpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyBDb3B5IHByb3BlcnRpZXMgYXR0YWNoZWQgdG8gb3JpZ2luYWwgalF1ZXJ5LmZpbmQgbWV0aG9kIChlLmcuIC5hdHRyLCAuaXNYTUwpXHJcbiAgICB2YXIgZmluZFByb3A7XHJcbiAgICBmb3IgKGZpbmRQcm9wIGluIG9sZEZpbmQpIHtcclxuICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9sZEZpbmQsIGZpbmRQcm9wKSkge1xyXG4gICAgICAgICAgICBqUXVlcnkuZmluZFtmaW5kUHJvcF0gPSBvbGRGaW5kW2ZpbmRQcm9wXTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gVGhlIG51bWJlciBvZiBlbGVtZW50cyBjb250YWluZWQgaW4gdGhlIG1hdGNoZWQgZWxlbWVudCBzZXRcclxuICAgIGpRdWVyeS5mbi5zaXplID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIG1pZ3JhdGVXYXJuKFwialF1ZXJ5LmZuLnNpemUoKSBpcyBkZXByZWNhdGVkIGFuZCByZW1vdmVkOyB1c2UgdGhlIC5sZW5ndGggcHJvcGVydHlcIik7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubGVuZ3RoO1xyXG4gICAgfTtcclxuXHJcbiAgICBqUXVlcnkucGFyc2VKU09OID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIG1pZ3JhdGVXYXJuKFwialF1ZXJ5LnBhcnNlSlNPTiBpcyBkZXByZWNhdGVkOyB1c2UgSlNPTi5wYXJzZVwiKTtcclxuICAgICAgICByZXR1cm4gSlNPTi5wYXJzZS5hcHBseShudWxsLCBhcmd1bWVudHMpO1xyXG4gICAgfTtcclxuXHJcbiAgICBqUXVlcnkuaXNOdW1lcmljID0gZnVuY3Rpb24gKHZhbCkge1xyXG4gICAgICAgIC8vIFRoZSBqUXVlcnkgMi4yLjMgaW1wbGVtZW50YXRpb24gb2YgaXNOdW1lcmljXHJcbiAgICAgICAgZnVuY3Rpb24gaXNOdW1lcmljMihvYmopIHtcclxuICAgICAgICAgICAgdmFyIHJlYWxTdHJpbmdPYmogPSBvYmogJiYgb2JqLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgICAgIHJldHVybiAhalF1ZXJ5LmlzQXJyYXkob2JqKSAmJiAocmVhbFN0cmluZ09iaiAtIHBhcnNlRmxvYXQocmVhbFN0cmluZ09iaikgKyAxKSA+PSAwO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIG5ld1ZhbHVlID0gb2xkSXNOdW1lcmljKHZhbCksXHJcbiAgICAgICAgICAgIG9sZFZhbHVlID0gaXNOdW1lcmljMih2YWwpO1xyXG5cclxuICAgICAgICBpZiAobmV3VmFsdWUgIT09IG9sZFZhbHVlKSB7XHJcbiAgICAgICAgICAgIG1pZ3JhdGVXYXJuKFwialF1ZXJ5LmlzTnVtZXJpYygpIHNob3VsZCBub3QgYmUgY2FsbGVkIG9uIGNvbnN0cnVjdGVkIG9iamVjdHNcIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gb2xkVmFsdWU7XHJcbiAgICB9O1xyXG5cclxuICAgIG1pZ3JhdGVXYXJuRnVuYyhqUXVlcnksIFwidW5pcXVlXCIsIGpRdWVyeS51bmlxdWVTb3J0LFxyXG4gICAgICAgIFwialF1ZXJ5LnVuaXF1ZSBpcyBkZXByZWNhdGVkOyB1c2UgalF1ZXJ5LnVuaXF1ZVNvcnRcIik7XHJcblxyXG4gICAgLy8gTm93IGpRdWVyeS5leHByLnBzZXVkb3MgaXMgdGhlIHN0YW5kYXJkIGluY2FudGF0aW9uXHJcbiAgICBtaWdyYXRlV2FyblByb3AoalF1ZXJ5LmV4cHIsIFwiZmlsdGVyc1wiLCBqUXVlcnkuZXhwci5wc2V1ZG9zLFxyXG4gICAgICAgIFwialF1ZXJ5LmV4cHIuZmlsdGVycyBpcyBkZXByZWNhdGVkOyB1c2UgalF1ZXJ5LmV4cHIucHNldWRvc1wiKTtcclxuICAgIG1pZ3JhdGVXYXJuUHJvcChqUXVlcnkuZXhwciwgXCI6XCIsIGpRdWVyeS5leHByLnBzZXVkb3MsXHJcbiAgICAgICAgXCJqUXVlcnkuZXhwclsnOiddIGlzIGRlcHJlY2F0ZWQ7IHVzZSBqUXVlcnkuZXhwci5wc2V1ZG9zXCIpO1xyXG5cclxuXHJcbiAgICB2YXIgb2xkQWpheCA9IGpRdWVyeS5hamF4O1xyXG5cclxuICAgIGpRdWVyeS5hamF4ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBqUVhIUiA9IG9sZEFqYXguYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxuXHJcbiAgICAgICAgLy8gQmUgc3VyZSB3ZSBnb3QgYSBqUVhIUiAoZS5nLiwgbm90IHN5bmMpXHJcbiAgICAgICAgaWYgKGpRWEhSLnByb21pc2UpIHtcclxuICAgICAgICAgICAgbWlncmF0ZVdhcm5GdW5jKGpRWEhSLCBcInN1Y2Nlc3NcIiwgalFYSFIuZG9uZSxcclxuICAgICAgICAgICAgICAgIFwialFYSFIuc3VjY2VzcyBpcyBkZXByZWNhdGVkIGFuZCByZW1vdmVkXCIpO1xyXG4gICAgICAgICAgICBtaWdyYXRlV2FybkZ1bmMoalFYSFIsIFwiZXJyb3JcIiwgalFYSFIuZmFpbCxcclxuICAgICAgICAgICAgICAgIFwialFYSFIuZXJyb3IgaXMgZGVwcmVjYXRlZCBhbmQgcmVtb3ZlZFwiKTtcclxuICAgICAgICAgICAgbWlncmF0ZVdhcm5GdW5jKGpRWEhSLCBcImNvbXBsZXRlXCIsIGpRWEhSLmFsd2F5cyxcclxuICAgICAgICAgICAgICAgIFwialFYSFIuY29tcGxldGUgaXMgZGVwcmVjYXRlZCBhbmQgcmVtb3ZlZFwiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBqUVhIUjtcclxuICAgIH07XHJcblxyXG5cclxuICAgIHZhciBvbGRSZW1vdmVBdHRyID0galF1ZXJ5LmZuLnJlbW92ZUF0dHIsXHJcbiAgICAgICAgb2xkVG9nZ2xlQ2xhc3MgPSBqUXVlcnkuZm4udG9nZ2xlQ2xhc3MsXHJcbiAgICAgICAgcm1hdGNoTm9uU3BhY2UgPSAvXFxTKy9nO1xyXG5cclxuICAgIGpRdWVyeS5mbi5yZW1vdmVBdHRyID0gZnVuY3Rpb24gKG5hbWUpIHtcclxuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcblxyXG4gICAgICAgIGpRdWVyeS5lYWNoKG5hbWUubWF0Y2gocm1hdGNoTm9uU3BhY2UpLCBmdW5jdGlvbiAoaSwgYXR0cikge1xyXG4gICAgICAgICAgICBpZiAoalF1ZXJ5LmV4cHIubWF0Y2guYm9vbC50ZXN0KGF0dHIpKSB7XHJcbiAgICAgICAgICAgICAgICBtaWdyYXRlV2FybihcImpRdWVyeS5mbi5yZW1vdmVBdHRyIG5vIGxvbmdlciBzZXRzIGJvb2xlYW4gcHJvcGVydGllczogXCIgKyBhdHRyKTtcclxuICAgICAgICAgICAgICAgIHNlbGYucHJvcChhdHRyLCBmYWxzZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIG9sZFJlbW92ZUF0dHIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxuICAgIH07XHJcblxyXG4gICAgalF1ZXJ5LmZuLnRvZ2dsZUNsYXNzID0gZnVuY3Rpb24gKHN0YXRlKSB7XHJcbiAgICAgICAgLy8gT25seSBkZXByZWNhdGluZyBuby1hcmdzIG9yIHNpbmdsZSBib29sZWFuIGFyZ1xyXG4gICAgICAgIGlmIChzdGF0ZSAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiBzdGF0ZSAhPT0gXCJib29sZWFuXCIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG9sZFRvZ2dsZUNsYXNzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBtaWdyYXRlV2FybihcImpRdWVyeS5mbi50b2dnbGVDbGFzcyggYm9vbGVhbiApIGlzIGRlcHJlY2F0ZWRcIik7XHJcblxyXG4gICAgICAgIC8vIFRvZ2dsZSBlbnRpcmUgY2xhc3MgbmFtZSBvZiBlYWNoIGVsZW1lbnRcclxuICAgICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGNsYXNzTmFtZSA9IHRoaXMuZ2V0QXR0cmlidXRlICYmIHRoaXMuZ2V0QXR0cmlidXRlKFwiY2xhc3NcIikgfHwgXCJcIjtcclxuXHJcbiAgICAgICAgICAgIGlmIChjbGFzc05hbWUpIHtcclxuICAgICAgICAgICAgICAgIGpRdWVyeS5kYXRhKHRoaXMsIFwiX19jbGFzc05hbWVfX1wiLCBjbGFzc05hbWUpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBJZiB0aGUgZWxlbWVudCBoYXMgYSBjbGFzcyBuYW1lIG9yIGlmIHdlJ3JlIHBhc3NlZCBgZmFsc2VgLFxyXG4gICAgICAgICAgICAvLyB0aGVuIHJlbW92ZSB0aGUgd2hvbGUgY2xhc3NuYW1lIChpZiB0aGVyZSB3YXMgb25lLCB0aGUgYWJvdmUgc2F2ZWQgaXQpLlxyXG4gICAgICAgICAgICAvLyBPdGhlcndpc2UgYnJpbmcgYmFjayB3aGF0ZXZlciB3YXMgcHJldmlvdXNseSBzYXZlZCAoaWYgYW55dGhpbmcpLFxyXG4gICAgICAgICAgICAvLyBmYWxsaW5nIGJhY2sgdG8gdGhlIGVtcHR5IHN0cmluZyBpZiBub3RoaW5nIHdhcyBzdG9yZWQuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNldEF0dHJpYnV0ZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLFxyXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZSB8fCBzdGF0ZSA9PT0gZmFsc2UgP1xyXG4gICAgICAgICAgICAgICAgICAgIFwiXCIgOlxyXG4gICAgICAgICAgICAgICAgICAgIGpRdWVyeS5kYXRhKHRoaXMsIFwiX19jbGFzc05hbWVfX1wiKSB8fCBcIlwiXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICB2YXIgaW50ZXJuYWxTd2FwQ2FsbCA9IGZhbHNlO1xyXG5cclxuICAgIC8vIElmIHRoaXMgdmVyc2lvbiBvZiBqUXVlcnkgaGFzIC5zd2FwKCksIGRvbid0IGZhbHNlLWFsYXJtIG9uIGludGVybmFsIHVzZXNcclxuICAgIGlmIChqUXVlcnkuc3dhcCkge1xyXG4gICAgICAgIGpRdWVyeS5lYWNoKFtcImhlaWdodFwiLCBcIndpZHRoXCIsIFwicmVsaWFibGVNYXJnaW5SaWdodFwiXSwgZnVuY3Rpb24gKF8sIG5hbWUpIHtcclxuICAgICAgICAgICAgdmFyIG9sZEhvb2sgPSBqUXVlcnkuY3NzSG9va3NbbmFtZV0gJiYgalF1ZXJ5LmNzc0hvb2tzW25hbWVdLmdldDtcclxuXHJcbiAgICAgICAgICAgIGlmIChvbGRIb29rKSB7XHJcbiAgICAgICAgICAgICAgICBqUXVlcnkuY3NzSG9va3NbbmFtZV0uZ2V0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciByZXQ7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGludGVybmFsU3dhcENhbGwgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldCA9IG9sZEhvb2suYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxuICAgICAgICAgICAgICAgICAgICBpbnRlcm5hbFN3YXBDYWxsID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJldDtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBqUXVlcnkuc3dhcCA9IGZ1bmN0aW9uIChlbGVtLCBvcHRpb25zLCBjYWxsYmFjaywgYXJncykge1xyXG4gICAgICAgIHZhciByZXQsIG5hbWUsXHJcbiAgICAgICAgICAgIG9sZCA9IHt9O1xyXG5cclxuICAgICAgICBpZiAoIWludGVybmFsU3dhcENhbGwpIHtcclxuICAgICAgICAgICAgbWlncmF0ZVdhcm4oXCJqUXVlcnkuc3dhcCgpIGlzIHVuZG9jdW1lbnRlZCBhbmQgZGVwcmVjYXRlZFwiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFJlbWVtYmVyIHRoZSBvbGQgdmFsdWVzLCBhbmQgaW5zZXJ0IHRoZSBuZXcgb25lc1xyXG4gICAgICAgIGZvciAobmFtZSBpbiBvcHRpb25zKSB7XHJcbiAgICAgICAgICAgIG9sZFtuYW1lXSA9IGVsZW0uc3R5bGVbbmFtZV07XHJcbiAgICAgICAgICAgIGVsZW0uc3R5bGVbbmFtZV0gPSBvcHRpb25zW25hbWVdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0ID0gY2FsbGJhY2suYXBwbHkoZWxlbSwgYXJncyB8fCBbXSk7XHJcblxyXG4gICAgICAgIC8vIFJldmVydCB0aGUgb2xkIHZhbHVlc1xyXG4gICAgICAgIGZvciAobmFtZSBpbiBvcHRpb25zKSB7XHJcbiAgICAgICAgICAgIGVsZW0uc3R5bGVbbmFtZV0gPSBvbGRbbmFtZV07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gcmV0O1xyXG4gICAgfTtcclxuXHJcbiAgICB2YXIgb2xkRGF0YSA9IGpRdWVyeS5kYXRhO1xyXG5cclxuICAgIGpRdWVyeS5kYXRhID0gZnVuY3Rpb24gKGVsZW0sIG5hbWUsIHZhbHVlKSB7XHJcbiAgICAgICAgdmFyIGN1ckRhdGE7XHJcblxyXG4gICAgICAgIC8vIE5hbWUgY2FuIGJlIGFuIG9iamVjdCwgYW5kIGVhY2ggZW50cnkgaW4gdGhlIG9iamVjdCBpcyBtZWFudCB0byBiZSBzZXQgYXMgZGF0YVxyXG4gICAgICAgIGlmIChuYW1lICYmIHR5cGVvZiBuYW1lID09PSBcIm9iamVjdFwiICYmIGFyZ3VtZW50cy5sZW5ndGggPT09IDIpIHtcclxuICAgICAgICAgICAgY3VyRGF0YSA9IGpRdWVyeS5oYXNEYXRhKGVsZW0pICYmIG9sZERhdGEuY2FsbCh0aGlzLCBlbGVtKTtcclxuICAgICAgICAgICAgdmFyIHNhbWVLZXlzID0ge307XHJcbiAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiBuYW1lKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoa2V5ICE9PSBqUXVlcnkuY2FtZWxDYXNlKGtleSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBtaWdyYXRlV2FybihcImpRdWVyeS5kYXRhKCkgYWx3YXlzIHNldHMvZ2V0cyBjYW1lbENhc2VkIG5hbWVzOiBcIiArIGtleSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY3VyRGF0YVtrZXldID0gbmFtZVtrZXldO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBzYW1lS2V5c1trZXldID0gbmFtZVtrZXldO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBvbGREYXRhLmNhbGwodGhpcywgZWxlbSwgc2FtZUtleXMpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG5hbWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBJZiB0aGUgbmFtZSBpcyB0cmFuc2Zvcm1lZCwgbG9vayBmb3IgdGhlIHVuLXRyYW5zZm9ybWVkIG5hbWUgaW4gdGhlIGRhdGEgb2JqZWN0XHJcbiAgICAgICAgaWYgKG5hbWUgJiYgdHlwZW9mIG5hbWUgPT09IFwic3RyaW5nXCIgJiYgbmFtZSAhPT0galF1ZXJ5LmNhbWVsQ2FzZShuYW1lKSkge1xyXG4gICAgICAgICAgICBjdXJEYXRhID0galF1ZXJ5Lmhhc0RhdGEoZWxlbSkgJiYgb2xkRGF0YS5jYWxsKHRoaXMsIGVsZW0pO1xyXG4gICAgICAgICAgICBpZiAoY3VyRGF0YSAmJiBuYW1lIGluIGN1ckRhdGEpIHtcclxuICAgICAgICAgICAgICAgIG1pZ3JhdGVXYXJuKFwialF1ZXJ5LmRhdGEoKSBhbHdheXMgc2V0cy9nZXRzIGNhbWVsQ2FzZWQgbmFtZXM6IFwiICsgbmFtZSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDIpIHtcclxuICAgICAgICAgICAgICAgICAgICBjdXJEYXRhW25hbWVdID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY3VyRGF0YVtuYW1lXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIG9sZERhdGEuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxuICAgIH07XHJcblxyXG4gICAgdmFyIG9sZFR3ZWVuUnVuID0galF1ZXJ5LlR3ZWVuLnByb3RvdHlwZS5ydW47XHJcblxyXG4gICAgalF1ZXJ5LlR3ZWVuLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKGpRdWVyeS5lYXNpbmdbdGhpcy5lYXNpbmddLmxlbmd0aCA+IDEpIHtcclxuICAgICAgICAgICAgbWlncmF0ZVdhcm4oXHJcbiAgICAgICAgICAgICAgICBcImVhc2luZyBmdW5jdGlvbiBcIiArXHJcbiAgICAgICAgICAgICAgICBcIlxcXCJqUXVlcnkuZWFzaW5nLlwiICsgdGhpcy5lYXNpbmcudG9TdHJpbmcoKSArXHJcbiAgICAgICAgICAgICAgICBcIlxcXCIgc2hvdWxkIHVzZSBvbmx5IGZpcnN0IGFyZ3VtZW50XCJcclxuICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBvbGRFYXNpbmcgPSBqUXVlcnkuZWFzaW5nW3RoaXMuZWFzaW5nXTtcclxuICAgICAgICAgICAgalF1ZXJ5LmVhc2luZ1t0aGlzLmVhc2luZ10gPSBmdW5jdGlvbiAocGVyY2VudCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG9sZEVhc2luZy5jYWxsKGpRdWVyeS5lYXNpbmcsIHBlcmNlbnQsIHBlcmNlbnQsIDAsIDEsIDEpO1xyXG4gICAgICAgICAgICB9LmJpbmQodGhpcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBvbGRUd2VlblJ1bi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG4gICAgfTtcclxuXHJcbiAgICBqUXVlcnkuZnguaW50ZXJ2YWwgPSBqUXVlcnkuZnguaW50ZXJ2YWwgfHwgMTM7XHJcblxyXG4gICAgLy8gU3VwcG9ydDogSUU5LCBBbmRyb2lkIDw9NC40XHJcbiAgICAvLyBBdm9pZCBmYWxzZSBwb3NpdGl2ZXMgb24gYnJvd3NlcnMgdGhhdCBsYWNrIHJBRlxyXG4gICAgaWYgKHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUpIHtcclxuICAgICAgICBtaWdyYXRlV2FyblByb3AoalF1ZXJ5LmZ4LCBcImludGVydmFsXCIsIGpRdWVyeS5meC5pbnRlcnZhbCxcclxuICAgICAgICAgICAgXCJqUXVlcnkuZnguaW50ZXJ2YWwgaXMgZGVwcmVjYXRlZFwiKTtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgb2xkTG9hZCA9IGpRdWVyeS5mbi5sb2FkLFxyXG4gICAgICAgIG9sZEV2ZW50QWRkID0galF1ZXJ5LmV2ZW50LmFkZCxcclxuICAgICAgICBvcmlnaW5hbEZpeCA9IGpRdWVyeS5ldmVudC5maXg7XHJcblxyXG4gICAgalF1ZXJ5LmV2ZW50LnByb3BzID0gW107XHJcbiAgICBqUXVlcnkuZXZlbnQuZml4SG9va3MgPSB7fTtcclxuXHJcbiAgICBtaWdyYXRlV2FyblByb3AoalF1ZXJ5LmV2ZW50LnByb3BzLCBcImNvbmNhdFwiLCBqUXVlcnkuZXZlbnQucHJvcHMuY29uY2F0LFxyXG4gICAgICAgIFwialF1ZXJ5LmV2ZW50LnByb3BzLmNvbmNhdCgpIGlzIGRlcHJlY2F0ZWQgYW5kIHJlbW92ZWRcIik7XHJcblxyXG4gICAgalF1ZXJ5LmV2ZW50LmZpeCA9IGZ1bmN0aW9uIChvcmlnaW5hbEV2ZW50KSB7XHJcbiAgICAgICAgdmFyIGV2ZW50LFxyXG4gICAgICAgICAgICB0eXBlID0gb3JpZ2luYWxFdmVudC50eXBlLFxyXG4gICAgICAgICAgICBmaXhIb29rID0gdGhpcy5maXhIb29rc1t0eXBlXSxcclxuICAgICAgICAgICAgcHJvcHMgPSBqUXVlcnkuZXZlbnQucHJvcHM7XHJcblxyXG4gICAgICAgIGlmIChwcm9wcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgbWlncmF0ZVdhcm4oXCJqUXVlcnkuZXZlbnQucHJvcHMgYXJlIGRlcHJlY2F0ZWQgYW5kIHJlbW92ZWQ6IFwiICsgcHJvcHMuam9pbigpKTtcclxuICAgICAgICAgICAgd2hpbGUgKHByb3BzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgalF1ZXJ5LmV2ZW50LmFkZFByb3AocHJvcHMucG9wKCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoZml4SG9vayAmJiAhZml4SG9vay5fbWlncmF0ZWRfKSB7XHJcbiAgICAgICAgICAgIGZpeEhvb2suX21pZ3JhdGVkXyA9IHRydWU7XHJcbiAgICAgICAgICAgIG1pZ3JhdGVXYXJuKFwialF1ZXJ5LmV2ZW50LmZpeEhvb2tzIGFyZSBkZXByZWNhdGVkIGFuZCByZW1vdmVkOiBcIiArIHR5cGUpO1xyXG4gICAgICAgICAgICBpZiAoKHByb3BzID0gZml4SG9vay5wcm9wcykgJiYgcHJvcHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAocHJvcHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgalF1ZXJ5LmV2ZW50LmFkZFByb3AocHJvcHMucG9wKCkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBldmVudCA9IG9yaWdpbmFsRml4LmNhbGwodGhpcywgb3JpZ2luYWxFdmVudCk7XHJcblxyXG4gICAgICAgIHJldHVybiBmaXhIb29rICYmIGZpeEhvb2suZmlsdGVyID8gZml4SG9vay5maWx0ZXIoZXZlbnQsIG9yaWdpbmFsRXZlbnQpIDogZXZlbnQ7XHJcbiAgICB9O1xyXG5cclxuICAgIGpRdWVyeS5ldmVudC5hZGQgPSBmdW5jdGlvbiAoZWxlbSwgdHlwZXMpIHtcclxuICAgICAgICAvLyBUaGlzIG1pc3NlcyB0aGUgbXVsdGlwbGUtdHlwZXMgY2FzZSBidXQgdGhhdCBzZWVtcyBhd2Z1bGx5IHJhcmVcclxuICAgICAgICBpZiAoZWxlbSA9PT0gd2luZG93ICYmIHR5cGVzID09PSBcImxvYWRcIiAmJiB3aW5kb3cuZG9jdW1lbnQucmVhZHlTdGF0ZSA9PT0gXCJjb21wbGV0ZVwiKSB7XHJcbiAgICAgICAgICAgIG1pZ3JhdGVXYXJuKFwialF1ZXJ5KHdpbmRvdykub24oJ2xvYWQnLi4uKSBjYWxsZWQgYWZ0ZXIgbG9hZCBldmVudCBvY2N1cnJlZFwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG9sZEV2ZW50QWRkLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcbiAgICB9O1xyXG5cclxuICAgIGpRdWVyeS5lYWNoKFtcImxvYWRcIiwgXCJ1bmxvYWRcIiwgXCJlcnJvclwiXSwgZnVuY3Rpb24gKF8sIG5hbWUpIHtcclxuXHJcbiAgICAgICAgalF1ZXJ5LmZuW25hbWVdID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMCk7XHJcblxyXG4gICAgICAgICAgICAvLyBJZiB0aGlzIGlzIGFuIGFqYXggbG9hZCgpIHRoZSBmaXJzdCBhcmcgc2hvdWxkIGJlIHRoZSBzdHJpbmcgVVJMO1xyXG4gICAgICAgICAgICAvLyB0ZWNobmljYWxseSB0aGlzIGNvdWxkIGFsc28gYmUgdGhlIFwiQW55dGhpbmdcIiBhcmcgb2YgdGhlIGV2ZW50IC5sb2FkKClcclxuICAgICAgICAgICAgLy8gd2hpY2gganVzdCBnb2VzIHRvIHNob3cgd2h5IHRoaXMgZHVtYiBzaWduYXR1cmUgaGFzIGJlZW4gZGVwcmVjYXRlZCFcclxuICAgICAgICAgICAgLy8galF1ZXJ5IGN1c3RvbSBidWlsZHMgdGhhdCBleGNsdWRlIHRoZSBBamF4IG1vZHVsZSBqdXN0aWZpYWJseSBkaWUgaGVyZS5cclxuICAgICAgICAgICAgaWYgKG5hbWUgPT09IFwibG9hZFwiICYmIHR5cGVvZiBhcmdzWzBdID09PSBcInN0cmluZ1wiKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gb2xkTG9hZC5hcHBseSh0aGlzLCBhcmdzKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbWlncmF0ZVdhcm4oXCJqUXVlcnkuZm4uXCIgKyBuYW1lICsgXCIoKSBpcyBkZXByZWNhdGVkXCIpO1xyXG5cclxuICAgICAgICAgICAgYXJncy5zcGxpY2UoMCwgMCwgbmFtZSk7XHJcbiAgICAgICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5vbi5hcHBseSh0aGlzLCBhcmdzKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gVXNlIC50cmlnZ2VySGFuZGxlciBoZXJlIGJlY2F1c2U6XHJcbiAgICAgICAgICAgIC8vIC0gbG9hZCBhbmQgdW5sb2FkIGV2ZW50cyBkb24ndCBuZWVkIHRvIGJ1YmJsZSwgb25seSBhcHBsaWVkIHRvIHdpbmRvdyBvciBpbWFnZVxyXG4gICAgICAgICAgICAvLyAtIGVycm9yIGV2ZW50IHNob3VsZCBub3QgYnViYmxlIHRvIHdpbmRvdywgYWx0aG91Z2ggaXQgZG9lcyBwcmUtMS43XHJcbiAgICAgICAgICAgIC8vIFNlZSBodHRwOi8vYnVncy5qcXVlcnkuY29tL3RpY2tldC8xMTgyMFxyXG4gICAgICAgICAgICB0aGlzLnRyaWdnZXJIYW5kbGVyLmFwcGx5KHRoaXMsIGFyZ3MpO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9O1xyXG5cclxuICAgIH0pO1xyXG5cclxuICAgIC8vIFRyaWdnZXIgXCJyZWFkeVwiIGV2ZW50IG9ubHkgb25jZSwgb24gZG9jdW1lbnQgcmVhZHlcclxuICAgIGpRdWVyeShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgalF1ZXJ5KHdpbmRvdy5kb2N1bWVudCkudHJpZ2dlckhhbmRsZXIoXCJyZWFkeVwiKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGpRdWVyeS5ldmVudC5zcGVjaWFsLnJlYWR5ID0ge1xyXG4gICAgICAgIHNldHVwOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzID09PSB3aW5kb3cuZG9jdW1lbnQpIHtcclxuICAgICAgICAgICAgICAgIG1pZ3JhdGVXYXJuKFwiJ3JlYWR5JyBldmVudCBpcyBkZXByZWNhdGVkXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBqUXVlcnkuZm4uZXh0ZW5kKHtcclxuICAgICAgICBiaW5kOiBmdW5jdGlvbiAodHlwZXMsIGRhdGEsIGZuKSB7XHJcbiAgICAgICAgICAgIG1pZ3JhdGVXYXJuKFwialF1ZXJ5LmZuLmJpbmQoKSBpcyBkZXByZWNhdGVkXCIpO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5vbih0eXBlcywgbnVsbCwgZGF0YSwgZm4pO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgdW5iaW5kOiBmdW5jdGlvbiAodHlwZXMsIGZuKSB7XHJcbiAgICAgICAgICAgIG1pZ3JhdGVXYXJuKFwialF1ZXJ5LmZuLnVuYmluZCgpIGlzIGRlcHJlY2F0ZWRcIik7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm9mZih0eXBlcywgbnVsbCwgZm4pO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZGVsZWdhdGU6IGZ1bmN0aW9uIChzZWxlY3RvciwgdHlwZXMsIGRhdGEsIGZuKSB7XHJcbiAgICAgICAgICAgIG1pZ3JhdGVXYXJuKFwialF1ZXJ5LmZuLmRlbGVnYXRlKCkgaXMgZGVwcmVjYXRlZFwiKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMub24odHlwZXMsIHNlbGVjdG9yLCBkYXRhLCBmbik7XHJcbiAgICAgICAgfSxcclxuICAgICAgICB1bmRlbGVnYXRlOiBmdW5jdGlvbiAoc2VsZWN0b3IsIHR5cGVzLCBmbikge1xyXG4gICAgICAgICAgICBtaWdyYXRlV2FybihcImpRdWVyeS5mbi51bmRlbGVnYXRlKCkgaXMgZGVwcmVjYXRlZFwiKTtcclxuICAgICAgICAgICAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPT09IDEgP1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vZmYoc2VsZWN0b3IsIFwiKipcIikgOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5vZmYodHlwZXMsIHNlbGVjdG9yIHx8IFwiKipcIiwgZm4pO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuXHJcbiAgICB2YXIgb2xkT2Zmc2V0ID0galF1ZXJ5LmZuLm9mZnNldDtcclxuXHJcbiAgICBqUXVlcnkuZm4ub2Zmc2V0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBkb2NFbGVtLFxyXG4gICAgICAgICAgICBlbGVtID0gdGhpc1swXSxcclxuICAgICAgICAgICAgb3JpZ2luID0geyB0b3A6IDAsIGxlZnQ6IDAgfTtcclxuXHJcbiAgICAgICAgaWYgKCFlbGVtIHx8ICFlbGVtLm5vZGVUeXBlKSB7XHJcbiAgICAgICAgICAgIG1pZ3JhdGVXYXJuKFwialF1ZXJ5LmZuLm9mZnNldCgpIHJlcXVpcmVzIGEgdmFsaWQgRE9NIGVsZW1lbnRcIik7XHJcbiAgICAgICAgICAgIHJldHVybiBvcmlnaW47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBkb2NFbGVtID0gKGVsZW0ub3duZXJEb2N1bWVudCB8fCB3aW5kb3cuZG9jdW1lbnQpLmRvY3VtZW50RWxlbWVudDtcclxuICAgICAgICBpZiAoIWpRdWVyeS5jb250YWlucyhkb2NFbGVtLCBlbGVtKSkge1xyXG4gICAgICAgICAgICBtaWdyYXRlV2FybihcImpRdWVyeS5mbi5vZmZzZXQoKSByZXF1aXJlcyBhbiBlbGVtZW50IGNvbm5lY3RlZCB0byBhIGRvY3VtZW50XCIpO1xyXG4gICAgICAgICAgICByZXR1cm4gb3JpZ2luO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIG9sZE9mZnNldC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG4gICAgfTtcclxuXHJcblxyXG4gICAgdmFyIG9sZFBhcmFtID0galF1ZXJ5LnBhcmFtO1xyXG5cclxuICAgIGpRdWVyeS5wYXJhbSA9IGZ1bmN0aW9uIChkYXRhLCB0cmFkaXRpb25hbCkge1xyXG4gICAgICAgIHZhciBhamF4VHJhZGl0aW9uYWwgPSBqUXVlcnkuYWpheFNldHRpbmdzICYmIGpRdWVyeS5hamF4U2V0dGluZ3MudHJhZGl0aW9uYWw7XHJcblxyXG4gICAgICAgIGlmICh0cmFkaXRpb25hbCA9PT0gdW5kZWZpbmVkICYmIGFqYXhUcmFkaXRpb25hbCkge1xyXG4gICAgICAgICAgICBtaWdyYXRlV2FybihcImpRdWVyeS5wYXJhbSgpIG5vIGxvbmdlciB1c2VzIGpRdWVyeS5hamF4U2V0dGluZ3MudHJhZGl0aW9uYWxcIik7XHJcbiAgICAgICAgICAgIHRyYWRpdGlvbmFsID0gYWpheFRyYWRpdGlvbmFsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIG9sZFBhcmFtLmNhbGwodGhpcywgZGF0YSwgdHJhZGl0aW9uYWwpO1xyXG4gICAgfTtcclxuXHJcbiAgICB2YXIgb2xkU2VsZiA9IGpRdWVyeS5mbi5hbmRTZWxmIHx8IGpRdWVyeS5mbi5hZGRCYWNrO1xyXG5cclxuICAgIGpRdWVyeS5mbi5hbmRTZWxmID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIG1pZ3JhdGVXYXJuKFwialF1ZXJ5LmZuLmFuZFNlbGYoKSBpcyBkZXByZWNhdGVkIGFuZCByZW1vdmVkLCB1c2UgalF1ZXJ5LmZuLmFkZEJhY2soKVwiKTtcclxuICAgICAgICByZXR1cm4gb2xkU2VsZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG4gICAgfTtcclxuXHJcblxyXG4gICAgdmFyIG9sZERlZmVycmVkID0galF1ZXJ5LkRlZmVycmVkLFxyXG4gICAgICAgIHR1cGxlcyA9IFtcclxuICAgICAgICAgICAgLy8gQWN0aW9uLCBhZGQgbGlzdGVuZXIsIGNhbGxiYWNrcywgLnRoZW4gaGFuZGxlcnMsIGZpbmFsIHN0YXRlXHJcbiAgICAgICAgICAgIFtcInJlc29sdmVcIiwgXCJkb25lXCIsIGpRdWVyeS5DYWxsYmFja3MoXCJvbmNlIG1lbW9yeVwiKSxcclxuICAgICAgICAgICAgICAgIGpRdWVyeS5DYWxsYmFja3MoXCJvbmNlIG1lbW9yeVwiKSwgXCJyZXNvbHZlZFwiXSxcclxuICAgICAgICAgICAgW1wicmVqZWN0XCIsIFwiZmFpbFwiLCBqUXVlcnkuQ2FsbGJhY2tzKFwib25jZSBtZW1vcnlcIiksXHJcbiAgICAgICAgICAgICAgICBqUXVlcnkuQ2FsbGJhY2tzKFwib25jZSBtZW1vcnlcIiksIFwicmVqZWN0ZWRcIl0sXHJcbiAgICAgICAgICAgIFtcIm5vdGlmeVwiLCBcInByb2dyZXNzXCIsIGpRdWVyeS5DYWxsYmFja3MoXCJtZW1vcnlcIiksXHJcbiAgICAgICAgICAgICAgICBqUXVlcnkuQ2FsbGJhY2tzKFwibWVtb3J5XCIpXVxyXG4gICAgICAgIF07XHJcblxyXG4gICAgalF1ZXJ5LkRlZmVycmVkID0gZnVuY3Rpb24gKGZ1bmMpIHtcclxuICAgICAgICB2YXIgZGVmZXJyZWQgPSBvbGREZWZlcnJlZCgpLFxyXG4gICAgICAgICAgICBwcm9taXNlID0gZGVmZXJyZWQucHJvbWlzZSgpO1xyXG5cclxuICAgICAgICBkZWZlcnJlZC5waXBlID0gcHJvbWlzZS5waXBlID0gZnVuY3Rpb24gKCAvKiBmbkRvbmUsIGZuRmFpbCwgZm5Qcm9ncmVzcyAqLykge1xyXG4gICAgICAgICAgICB2YXIgZm5zID0gYXJndW1lbnRzO1xyXG5cclxuICAgICAgICAgICAgbWlncmF0ZVdhcm4oXCJkZWZlcnJlZC5waXBlKCkgaXMgZGVwcmVjYXRlZFwiKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBqUXVlcnkuRGVmZXJyZWQoZnVuY3Rpb24gKG5ld0RlZmVyKSB7XHJcbiAgICAgICAgICAgICAgICBqUXVlcnkuZWFjaCh0dXBsZXMsIGZ1bmN0aW9uIChpLCB0dXBsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBmbiA9IGpRdWVyeS5pc0Z1bmN0aW9uKGZuc1tpXSkgJiYgZm5zW2ldO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBEZWZlcnJlZC5kb25lKGZ1bmN0aW9uKCkgeyBiaW5kIHRvIG5ld0RlZmVyIG9yIG5ld0RlZmVyLnJlc29sdmUgfSlcclxuICAgICAgICAgICAgICAgICAgICAvLyBkZWZlcnJlZC5mYWlsKGZ1bmN0aW9uKCkgeyBiaW5kIHRvIG5ld0RlZmVyIG9yIG5ld0RlZmVyLnJlamVjdCB9KVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGRlZmVycmVkLnByb2dyZXNzKGZ1bmN0aW9uKCkgeyBiaW5kIHRvIG5ld0RlZmVyIG9yIG5ld0RlZmVyLm5vdGlmeSB9KVxyXG4gICAgICAgICAgICAgICAgICAgIGRlZmVycmVkW3R1cGxlWzFdXShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZXR1cm5lZCA9IGZuICYmIGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXR1cm5lZCAmJiBqUXVlcnkuaXNGdW5jdGlvbihyZXR1cm5lZC5wcm9taXNlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuZWQucHJvbWlzZSgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmRvbmUobmV3RGVmZXIucmVzb2x2ZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZmFpbChuZXdEZWZlci5yZWplY3QpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnByb2dyZXNzKG5ld0RlZmVyLm5vdGlmeSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdEZWZlclt0dXBsZVswXSArIFwiV2l0aFwiXShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzID09PSBwcm9taXNlID8gbmV3RGVmZXIucHJvbWlzZSgpIDogdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmbiA/IFtyZXR1cm5lZF0gOiBhcmd1bWVudHNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgZm5zID0gbnVsbDtcclxuICAgICAgICAgICAgfSkucHJvbWlzZSgpO1xyXG5cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBpZiAoZnVuYykge1xyXG4gICAgICAgICAgICBmdW5jLmNhbGwoZGVmZXJyZWQsIGRlZmVycmVkKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBkZWZlcnJlZDtcclxuICAgIH07XHJcblxyXG5cclxuICAgIHJldHVybiBqUXVlcnk7XHJcbn0pO1xyXG5cbn0uY2FsbCh3aW5kb3cpKTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL2V4dGVybmFsL2pxdWVyeS9zY3JpcHRzL2pxdWVyeS1taWdyYXRlLmpzXG4vLyBtb2R1bGUgaWQgPSA1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIm5hbWVzcGFjZSBDRFAge1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGVudW0gIFJFU1VMVF9DT0RFX0JBU0VcclxuICAgICAqIEBicmllZiDjg6rjgrbjg6vjg4jjgrPjg7zjg4njga7jgqrjg5Xjgrvjg4Pjg4jlgKRcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGVudW0gUkVTVUxUX0NPREVfQkFTRSB7XHJcbiAgICAgICAgQ0RQX1RPT0xTX0RFQ0xBUkVSQVRJT04gPSAwLCAgICAvLyBUUzI0MzIg5a++562WXHJcbiAgICAgICAgQ0RQX1RPT0xTID0gNCAqIF9NT0RVTEVfUkVTVUxUX0NPREVfUkFOR0VfQ0RQLFxyXG4gICAgfVxyXG5cclxuICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAvLyBtb2R1bGUgZXJyb3IgZGVjbGFyYXRpb246XHJcblxyXG4gICAgY29uc3QgRlVOQ1RJT05fQ09ERV9SQU5HRSA9IDEwO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGVudW0gIExPQ0FMX0NPREVfQkFTRVxyXG4gICAgICogQGJyaWVmIGNkcC50b29scyDlhoXjga7jg63jg7zjgqvjg6vjgrPjg7zjg4njgqrjg5Xjgrvjg4Pjg4jlgKRcclxuICAgICAqL1xyXG4gICAgZW51bSBMT0NBTF9DT0RFX0JBU0Uge1xyXG4gICAgICAgIEZVTkNUSU9OUyAgID0gMCxcclxuICAgICAgICBCTE9CICAgICAgICA9IDEgKiBGVU5DVElPTl9DT0RFX1JBTkdFLFxyXG4gICAgfVxyXG5cclxuICAgIC8qIHRzbGludDpkaXNhYmxlOm1heC1saW5lLWxlbmd0aCAqL1xyXG4gICAgLyoqXHJcbiAgICAgKiBAZW51bSAgUkVTVUxUX0NPREVcclxuICAgICAqIEBicmllZiBjZHAudG9vbHMg44Gu44Ko44Op44O844Kz44O844OJ5a6a576pXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBlbnVtIFJFU1VMVF9DT0RFIHtcclxuICAgICAgICBFUlJPUl9DRFBfVE9PTFNfREVDTEFSQVRJT04gICAgICAgICA9IDAsIC8vIFRTMjQzMiDlr77nrZZcclxuICAgICAgICBFUlJPUl9DRFBfVE9PTFNfSU1BR0VfTE9BRF9GQUlMRUQgICA9IERFQ0xBUkVfRVJST1JfQ09ERShSRVNVTFRfQ09ERV9CQVNFLkNEUF9UT09MUywgTE9DQUxfQ09ERV9CQVNFLkZVTkNUSU9OUyArIDEsIFwiaW1hZ2UgbG9hZCBmYWlsZWQuXCIpLFxyXG4gICAgICAgIEVSUk9SX0NEUF9UT09MU19JTlZBTElEX0lNQUdFICAgICAgID0gREVDTEFSRV9FUlJPUl9DT0RFKFJFU1VMVF9DT0RFX0JBU0UuQ0RQX1RPT0xTLCBMT0NBTF9DT0RFX0JBU0UuRlVOQ1RJT05TICsgMiwgXCJpbnZhbGlkIGltYWdlLlwiKSxcclxuICAgICAgICBFUlJPUl9DRFBfVE9PTFNfRklMRV9SRUFERVJfRVJST1IgICA9IERFQ0xBUkVfRVJST1JfQ09ERShSRVNVTFRfQ09ERV9CQVNFLkNEUF9UT09MUywgTE9DQUxfQ09ERV9CQVNFLkJMT0IgKyAxLCBcIkZpbGVSZWFkZXIgbWV0aG9kIGZhaWxlZC5cIiksXHJcbiAgICB9XHJcbiAgICAvKiB0c2xpbnQ6ZW5hYmxlOm1heC1saW5lLWxlbmd0aCAqL1xyXG59XHJcbiIsIm5hbWVzcGFjZSBDRFAuVG9vbHMge1xyXG5cclxuICAgIGltcG9ydCBQcm9taXNlID0gQ0RQLlByb21pc2U7XHJcblxyXG4gICAgY29uc3QgVEFHID0gXCJbQ0RQLlRvb2xzLkJpbmFyeV0gXCI7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAY2xhc3MgQmluYXJ5XHJcbiAgICAgKiBAYnJpZWYg44OQ44Kk44OK44Oq44Om44O844OG44Kj44Oq44OG44KjXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBjbGFzcyBCaW5hcnkge1xyXG5cclxuICAgICAgICAvLyBwcml2YXRlIGNvbnN0cnVjdG9yXHJcbiAgICAgICAgcHJpdmF0ZSBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICAgICAgLy8gbm9vcFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogR2V0IEJsb2JCdWlsZGVyXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAb2Jzb2xldGVcclxuICAgICAgICAgKiBAcmV0dXJuIHthbnl9IEJsb2JCdWlsZGVyXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgZ2V0QmxvYkJ1aWxkZXIoKTogYW55IHtcclxuICAgICAgICAgICAgcmV0dXJuIGdsb2JhbC5CbG9iQnVpbGRlciB8fCBnbG9iYWwuV2ViS2l0QmxvYkJ1aWxkZXIgfHwgZ2xvYmFsLk1vekJsb2JCdWlsZGVyIHx8IGdsb2JhbC5NU0Jsb2JCdWlsZGVyO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog44Ko44Op44O85oOF5aCx55Sf5oiQIGZyb20gRE9NRXJyb3JcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSByZXN1bHRDb2RlIFtpbl0gUkVTVUxUX0NPREUg44KS5oyH5a6aXHJcbiAgICAgICAgICogQHBhcmFtIGNhdXNlICAgICAgW2luXSDkuIvkvY3jga4gRE9NIOOCqOODqeODvOOCkuaMh+WumlxyXG4gICAgICAgICAqIEBwYXJhbSBbdGFnXSAgICAgIFtpbl0gVEFHIOOCkuaMh+WumlxyXG4gICAgICAgICAqIEBwYXJhbSBbbWVzc2FnZV0gIFtpbl0g44Oh44OD44K744O844K444KS5oyH5a6aXHJcbiAgICAgICAgICogQHJldHVybnMg44Ko44Op44O844Kq44OW44K444Kn44Kv44OIXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgbWFrZUVycm9ySW5mb0Zyb21ET01FcnJvcihyZXN1bHRDb2RlOiBSRVNVTFRfQ09ERSwgY2F1c2U6IERPTUVycm9yLCB0YWc/OiBzdHJpbmcsIG1lc3NhZ2U/OiBzdHJpbmcpOiBFcnJvckluZm8ge1xyXG4gICAgICAgICAgICBsZXQgX2NhdXNlOiBFcnJvcjtcclxuICAgICAgICAgICAgaWYgKGNhdXNlKSB7XHJcbiAgICAgICAgICAgICAgICBfY2F1c2UgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogY2F1c2UubmFtZSxcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjYXVzZS5uYW1lLCAgICAvLyBET01FcnJvci5tZXNzYWdlIOOBjOacquOCteODneODvOODiFxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gbWFrZUVycm9ySW5mbyhyZXN1bHRDb2RlLCB0YWcsIG1lc3NhZ2UsIF9jYXVzZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBHZXQgQmxvYkJ1aWxkZXJcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBvYnNvbGV0ZVxyXG4gICAgICAgICAqIEByZXR1cm4g5qeL56+J5riI44G/IEJsb2Ig44Kq44OW44K444Kn44Kv44OIXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBuZXdCbG9iKGJsb2JQYXJ0cz86IGFueVtdLCBvcHRpb25zPzogQmxvYlByb3BlcnR5QmFnKTogQmxvYiB7XHJcbiAgICAgICAgICAgIGlmIChnbG9iYWwuQmxvYikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBnbG9iYWwuQmxvYihibG9iUGFydHMsIG9wdGlvbnMpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gdW5kZXIgQW5kcm9pZCA0LjQgS2l0S2F0XHJcbiAgICAgICAgICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGJsb2JCdWlsZGVyT2JqZWN0OiBhbnkgPSBCaW5hcnkuZ2V0QmxvYkJ1aWxkZXIoKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGJsb2JCdWlsZGVyOiBhbnkgPSBuZXcgYmxvYkJ1aWxkZXJPYmplY3QoKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHBhcnRzID0gKGJsb2JQYXJ0cyBpbnN0YW5jZW9mIEFycmF5KSA/IGJsb2JQYXJ0c1swXSA6IGJsb2JQYXJ0cztcclxuICAgICAgICAgICAgICAgIGJsb2JCdWlsZGVyLmFwcGVuZChwYXJ0cyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYmxvYkJ1aWxkZXIuZ2V0QmxvYihvcHRpb25zLnR5cGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBVUkwgT2JqZWN0XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAb2Jzb2xldGVcclxuICAgICAgICAgKiBAcmV0dXJuIHthbnl9IFVSTCBPYmplY3RcclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGJsb2JVUkw6IFVSTCA9ICgoKSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBnbG9iYWwuVVJMIHx8IGdsb2JhbC53ZWJraXRVUkw7XHJcbiAgICAgICAgfSkoKTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQXJyYXlCdWZmZXIgdG8gQmxvYlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGJ1ZiBbaW5dIEFycmF5QnVmZmVyIGRhdGFcclxuICAgICAgICAgKiBAcGFyYW0gbWltZVR5cGUgW2luXSBNaW1lVHlwZSBvZiBkYXRhXHJcbiAgICAgICAgICogQHJldHVybnMgQmxvYiBkYXRhXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBhcnJheUJ1ZmZlclRvQmxvYihidWY6IEFycmF5QnVmZmVyLCBtaW1lVHlwZTogc3RyaW5nKTogQmxvYiB7XHJcbiAgICAgICAgICAgIHJldHVybiBCaW5hcnkubmV3QmxvYihbYnVmXSwgeyB0eXBlOiBtaW1lVHlwZSB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEJhc2U2NCBzdHJpbmcgdG8gQmxvYlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGJhc2U2NCB7c3RyaW5nfSBbaW5dIEJhc2U2NCBzdHJpbmcgZGF0YVxyXG4gICAgICAgICAqIEBwYXJhbSBtaW1lVHlwZSB7c3RyaW5nfSBbaW5dIE1pbWVUeXBlIG9mIGRhdGFcclxuICAgICAgICAgKiBAcmV0dXJuIHtCbG9ifSBCbG9iIGRhdGFcclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGJhc2U2NFRvQmxvYihiYXNlNjQ6IHN0cmluZywgbWltZVR5cGU6IHN0cmluZyk6IEJsb2Ige1xyXG4gICAgICAgICAgICByZXR1cm4gQmluYXJ5Lm5ld0Jsb2IoW0JpbmFyeS5iYXNlNjRUb0FycmF5QnVmZmVyKGJhc2U2NCldLCB7IHR5cGU6IG1pbWVUeXBlIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogZGF0YS11cmwg5b2i5byP55S75YOP44GL44KJIEJsb2Ig44Kq44OW44K444Kn44Kv44OI44G45aSJ5o+bXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gIHtTdHJpbmd9IGRhdGFVcmwgICAgW2luXSBkYXRhIHVybFxyXG4gICAgICAgICAqIEBwYXJhbSAge1N0cmluZ30gW21pbWVUeXBlXSBbaW5dIG1pbWUgdHlwZSDjgpLmjIflrpouIOaXouWumuOBp+OBryBcImltYWdlL3BuZ1wiXHJcbiAgICAgICAgICogQHJldHVybiB7QmxvYn0gQmxvYiDjgqTjg7Pjgrnjgr/jg7PjgrlcclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGRhdGFVcmxUb0Jsb2IoZGF0YVVybDogc3RyaW5nLCBtaW1lVHlwZTogc3RyaW5nID0gXCJpbWFnZS9wbmdcIik6IEJsb2Ige1xyXG4gICAgICAgICAgICBjb25zdCBiYXNlNjQgPSBkYXRhVXJsLnNwbGl0KFwiLFwiKVsxXTtcclxuICAgICAgICAgICAgcmV0dXJuIEJpbmFyeS5iYXNlNjRUb0Jsb2IoYmFzZTY0LCBtaW1lVHlwZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBCYXNlNjQgc3RyaW5nIHRvIEFycmF5QnVmZmVyXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gYmFzZTY0IHtzdHJpbmd9IFtpbl0gQmFzZTY0IHN0cmluZyBkYXRhXHJcbiAgICAgICAgICogQHJldHVybiB7QXJyYXlCdWZmZXJ9IEFycmF5QnVmZmVyIGRhdGFcclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGJhc2U2NFRvQXJyYXlCdWZmZXIoYmFzZTY0OiBzdHJpbmcpOiBBcnJheUJ1ZmZlciB7XHJcbiAgICAgICAgICAgIGNvbnN0IGJ5dGVzID0gd2luZG93LmF0b2IoYmFzZTY0KTtcclxuICAgICAgICAgICAgY29uc3QgYXJyYXlCdWZmZXIgPSBuZXcgQXJyYXlCdWZmZXIoYnl0ZXMubGVuZ3RoKTtcclxuICAgICAgICAgICAgY29uc3QgZGF0YSA9IG5ldyBVaW50OEFycmF5KGFycmF5QnVmZmVyKTtcclxuXHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwLCBsZW4gPSBieXRlcy5sZW5ndGg7IGkgPCBsZW47ICsraSkge1xyXG4gICAgICAgICAgICAgICAgZGF0YVtpXSA9IGJ5dGVzLmNoYXJDb2RlQXQoaSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGFycmF5QnVmZmVyO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQmFzZTY0IHN0cmluZyB0byBVaW50OEFycmF5XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gYmFzZTY0IHtzdHJpbmd9IFtpbl0gQmFzZTY0IHN0cmluZyBkYXRhXHJcbiAgICAgICAgICogQHJldHVybiB7VWludDhBcnJheX0gVWludDhBcnJheSBkYXRhXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBiYXNlNjRUb1VpbnQ4QXJyYXkoZW5jb2RlZDogc3RyaW5nKTogVWludDhBcnJheSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGJ5dGVzID0gd2luZG93LmF0b2IoZW5jb2RlZCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBuZXcgVWludDhBcnJheShieXRlcy5sZW5ndGgpO1xyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDAsIGxlbiA9IGJ5dGVzLmxlbmd0aDsgaSA8IGxlbjsgKytpKSB7XHJcbiAgICAgICAgICAgICAgICBkYXRhW2ldID0gYnl0ZXMuY2hhckNvZGVBdChpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gZGF0YTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEFycmF5QnVmZmVyIHRvIGJhc2U2NCBzdHJpbmdcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBhcnJheUJ1ZmZlciB7QXJyYXlCdWZmZXJ9IFtpbl0gQXJyYXlCdWZmZXIgZGF0YVxyXG4gICAgICAgICAqIEByZXR1cm4ge3N0cmluZ30gYmFzZTY0IGRhdGFcclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGFycmF5QnVmZmVyVG9CYXNlNjQoYXJyYXlCdWZmZXI6IEFycmF5QnVmZmVyKTogc3RyaW5nIHtcclxuICAgICAgICAgICAgY29uc3QgYnl0ZXMgPSBuZXcgVWludDhBcnJheShhcnJheUJ1ZmZlcik7XHJcbiAgICAgICAgICAgIHJldHVybiBCaW5hcnkudWludDhBcnJheVRvQmFzZTY0KGJ5dGVzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFVpbnQ4QXJyYXkgdG8gYmFzZTY0IHN0cmluZ1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGJ5dGVzIHtVaW50OEFycmF5fSBbaW5dIFVpbnQ4QXJyYXkgZGF0YVxyXG4gICAgICAgICAqIEByZXR1cm4ge3N0cmluZ30gYmFzZTY0IGRhdGFcclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHVpbnQ4QXJyYXlUb0Jhc2U2NChieXRlczogVWludDhBcnJheSk6IHN0cmluZyB7XHJcbiAgICAgICAgICAgIGxldCBkYXRhOiBzdHJpbmcgPSBcIlwiO1xyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDAsIGxlbiA9IGJ5dGVzLmJ5dGVMZW5ndGg7IGkgPCBsZW47ICsraSkge1xyXG4gICAgICAgICAgICAgICAgZGF0YSArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGJ5dGVzW2ldKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gd2luZG93LmJ0b2EoZGF0YSk7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogcmVhZCBCbG9iIGFzIEFycmF5QnVmZmVyXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gIHtCbG9ifSBibG9iIFtpbl0gYmxvYiBkYXRhXHJcbiAgICAgICAgICogQHJldHVybiB7Q0RQLklQcm9taXNlPEFycmF5QnVmZmVyPn0gcHJvbWlzZSBvYmplY3RcclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHJlYWRCbG9iQXNBcnJheUJ1ZmZlcihibG9iOiBCbG9iKTogSVByb21pc2U8QXJyYXlCdWZmZXI+IHtcclxuICAgICAgICAgICAgY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcclxuICAgICAgICAgICAgY29uc3QgY2FuY2VsID0gKCkgPT4gcmVhZGVyLmFib3J0KCk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmVhZGVyLm9ubG9hZCA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHJlYWRlci5yZXN1bHQpO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIHJlYWRlci5vbmVycm9yID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChCaW5hcnkubWFrZUVycm9ySW5mb0Zyb21ET01FcnJvcihcclxuICAgICAgICAgICAgICAgICAgICAgICAgUkVTVUxUX0NPREUuRVJST1JfQ0RQX1RPT0xTX0ZJTEVfUkVBREVSX0VSUk9SLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWFkZXIuZXJyb3IsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFRBRyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJGaWxlUmVhZGVyLnJlYWRBc0FycmF5QnVmZmVyKCkgZmFpbGVkLlwiXHJcbiAgICAgICAgICAgICAgICAgICAgKSk7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgcmVhZGVyLnJlYWRBc0FycmF5QnVmZmVyKGJsb2IpO1xyXG4gICAgICAgICAgICB9LCBjYW5jZWwpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogcmVhZCBCbG9iIGFzIFVpbnQ4QXJyYXlcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSAge0Jsb2J9IGJsb2IgW2luXSBibG9iIGRhdGFcclxuICAgICAgICAgKiBAcmV0dXJuIHtDRFAuSVByb21pc2U8VWludDhBcnJheT59IHByb21pc2Ugb2JqZWN0XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyByZWFkQmxvYkFzVWludDhBcnJheShibG9iOiBCbG9iKTogSVByb21pc2U8VWludDhBcnJheT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCwgZGVwZW5kT24pID0+IHtcclxuICAgICAgICAgICAgICAgIGRlcGVuZE9uKEJpbmFyeS5yZWFkQmxvYkFzQXJyYXlCdWZmZXIoYmxvYikpXHJcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oKHJlc3VsdDogQXJyYXlCdWZmZXIpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShuZXcgVWludDhBcnJheShyZXN1bHQpKTtcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIC5jYXRjaCgoZXJyb3I6IEVycm9ySW5mbykgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIHJlYWQgQmxvYiBhcyB0ZXh0IHN0cmluZ1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtICB7QmxvYn0gYmxvYiBbaW5dIGJsb2IgZGF0YVxyXG4gICAgICAgICAqIEByZXR1cm4ge0NEUC5JUHJvbWlzZTxVaW50OEFycmF5Pn0gcHJvbWlzZSBvYmplY3RcclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHJlYWRCbG9iQXNUZXh0KGJsb2I6IEJsb2IsIGVuY29kZTogc3RyaW5nID0gXCJ1dGYtOFwiKTogSVByb21pc2U8c3RyaW5nPiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGNhbmNlbCA9ICgpID0+IHJlYWRlci5hYm9ydCgpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgICAgIHJlYWRlci5vbmxvYWQgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShyZWFkZXIucmVzdWx0KTtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICByZWFkZXIub25lcnJvciA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZWplY3QoQmluYXJ5Lm1ha2VFcnJvckluZm9Gcm9tRE9NRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFJFU1VMVF9DT0RFLkVSUk9SX0NEUF9UT09MU19GSUxFX1JFQURFUl9FUlJPUixcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyLmVycm9yLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBUQUcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiRmlsZVJlYWRlci5yZWFkQXNUZXh0KCkgZmFpbGVkLlwiXHJcbiAgICAgICAgICAgICAgICAgICAgKSk7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgcmVhZGVyLnJlYWRBc1RleHQoYmxvYiwgZW5jb2RlKTtcclxuICAgICAgICAgICAgfSwgY2FuY2VsKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIHJlYWQgQmxvYiBhcyBEYXRhIFVSTFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtICB7QmxvYn0gYmxvYiBbaW5dIGJsb2IgZGF0YVxyXG4gICAgICAgICAqIEByZXR1cm4ge0NEUC5JUHJvbWlzZTxzdHJpbmc+fSBwcm9taXNlIG9iamVjdFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgcmVhZEJsb2JBc0RhdGFVUkwoYmxvYjogQmxvYik6IElQcm9taXNlPHN0cmluZz4ge1xyXG4gICAgICAgICAgICBjb25zdCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xyXG4gICAgICAgICAgICBjb25zdCBjYW5jZWwgPSAoKSA9PiByZWFkZXIuYWJvcnQoKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZWFkZXIub25sb2FkID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVhZGVyLnJlc3VsdCk7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgcmVhZGVyLm9uZXJyb3IgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KEJpbmFyeS5tYWtlRXJyb3JJbmZvRnJvbURPTUVycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBSRVNVTFRfQ09ERS5FUlJPUl9DRFBfVE9PTFNfRklMRV9SRUFERVJfRVJST1IsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRlci5lcnJvcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgVEFHLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcIkZpbGVSZWFkZXIucmVhZEFzRGF0YVVSTCgpIGZhaWxlZC5cIlxyXG4gICAgICAgICAgICAgICAgICAgICkpO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKGJsb2IpO1xyXG4gICAgICAgICAgICB9LCBjYW5jZWwpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCIvKipcclxuICogQGZpbGUgIEJpbmFyeVRyYW5zcG9ydC50c1xyXG4gKiBAYnJpZWYgalF1ZXJ5IGFqYXggdHJhbnNwb3J0IGZvciBtYWtpbmcgYmluYXJ5IGRhdGEgdHlwZSByZXF1ZXN0cy5cclxuICpcclxuICogICAgICAgIG9yaWdpbmFsOiBodHRwczovL2dpdGh1Yi5jb20vaGVucnlhL2pzLWpxdWVyeS9ibG9iL21hc3Rlci9CaW5hcnlUcmFuc3BvcnQvanF1ZXJ5LmJpbmFyeXRyYW5zcG9ydC5qc1xyXG4gKiAgICAgICAgYXV0aG9yOiAgIEhlbnJ5IEFsZ3VzIDxoZW5yeWFsZ3VzQGdtYWlsLmNvbT5cclxuICovXHJcbm5hbWVzcGFjZSBDRFAuVG9vbHMge1xyXG4gICAgLy8gU3VwcG9ydCBmaWxlIHByb3RvY29sLiAoYXMgc2FtZSBhcyBvZmZpY2lhbCB3YXkpXHJcbiAgICBjb25zdCB4aHJTdWNjZXNzU3RhdHVzID0ge1xyXG4gICAgICAgIDA6IDIwMCxcclxuICAgICAgICAxMjIzOiAyMDRcclxuICAgIH07XHJcblxyXG4gICAgJC5hamF4VHJhbnNwb3J0KFwiK2JpbmFyeVwiLCAob3B0aW9uczogSlF1ZXJ5LkFqYXhTZXR0aW5ncywgb3JpZ2luYWxPcHRpb25zOiBKUXVlcnkuQWpheFNldHRpbmdzLCBqcVhIUjogSlF1ZXJ5WEhSKSA9PiB7XHJcbiAgICAgICAgaWYgKGdsb2JhbC5Gb3JtRGF0YSAmJlxyXG4gICAgICAgICAgICAoKG9wdGlvbnMuZGF0YVR5cGUgJiYgKG9wdGlvbnMuZGF0YVR5cGUgPT09IFwiYmluYXJ5XCIpKSB8fFxyXG4gICAgICAgICAgICAob3B0aW9ucy5kYXRhICYmICgoZ2xvYmFsLkFycmF5QnVmZmVyICYmIG9wdGlvbnMuZGF0YSBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSB8fFxyXG4gICAgICAgICAgICAoZ2xvYmFsLkJsb2IgJiYgb3B0aW9ucy5kYXRhIGluc3RhbmNlb2YgZ2xvYmFsLkJsb2IpKSkpKSB7XHJcbiAgICAgICAgICAgIGxldCBhYm9ydENhbGxiYWNrOiAoKSA9PiB2b2lkO1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgc2VuZDogZnVuY3Rpb24gKGhlYWRlcnM6IEpRdWVyeS5QbGFpbk9iamVjdCwgY2FsbGJhY2s6IEpRdWVyeS5UcmFuc3BvcnQuU3VjY2Vzc0NhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gc2V0dXAgYWxsIHZhcmlhYmxlc1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHVybCA9IG9wdGlvbnMudXJsO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHR5cGUgPSBvcHRpb25zLnR5cGU7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYXN5bmMgPSBvcHRpb25zLmFzeW5jIHx8IHRydWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGJsb2Igb3IgYXJyYXlidWZmZXIuIERlZmF1bHQgaXMgYmxvYlxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGFUeXBlID0gKDxhbnk+b3B0aW9ucykucmVzcG9uc2VUeXBlIHx8IFwiYmxvYlwiO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBvcHRpb25zLmRhdGEgfHwgbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB1c2VybmFtZSA9IG9wdGlvbnMudXNlcm5hbWUgfHwgbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXNzd29yZCA9IG9wdGlvbnMucGFzc3dvcmQgfHwgbnVsbDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgX2NhbGxiYWNrOiBKUXVlcnkuVHJhbnNwb3J0LlN1Y2Nlc3NDYWxsYmFjayA9IGNhbGxiYWNrIHx8ICgoKSA9PiB7IC8qIG5vb3AgKi8gfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIHN1Y2NlZWRlZCBoYW5kbGVyXHJcbiAgICAgICAgICAgICAgICAgICAgeGhyLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgX2RhdGEgPSB7fTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2RhdGFbb3B0aW9ucy5kYXRhVHlwZV0gPSB4aHIucmVzcG9uc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9jYWxsYmFjayhcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHhoclN1Y2Nlc3NTdGF0dXNbeGhyLnN0YXR1c10gfHwgeGhyLnN0YXR1cyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxKUXVlcnkuQWpheC5UZXh0U3RhdHVzPnhoci5zdGF0dXNUZXh0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2RhdGEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB4aHIuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gZXJyb3IgaGFuZGxlclxyXG4gICAgICAgICAgICAgICAgICAgIHhoci5hZGRFdmVudExpc3RlbmVyKFwiZXJyb3JcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBfZGF0YSA9IHt9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfZGF0YVtvcHRpb25zLmRhdGFUeXBlXSA9IHhoci5yZXNwb25zZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gbWFrZSBjYWxsYmFjayBhbmQgc2VuZCBkYXRhXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9jYWxsYmFjayhcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHhoci5zdGF0dXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SlF1ZXJ5LkFqYXguVGV4dFN0YXR1cz54aHIuc3RhdHVzVGV4dCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9kYXRhLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeGhyLmdldEFsbFJlc3BvbnNlSGVhZGVycygpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGFib3J0IGhhbmRsZXJcclxuICAgICAgICAgICAgICAgICAgICB4aHIuYWRkRXZlbnRMaXN0ZW5lcihcImFib3J0XCIsICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgX2RhdGEgPSB7fTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2RhdGFbb3B0aW9ucy5kYXRhVHlwZV0gPSB4aHIucmVzcG9uc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIG1ha2UgY2FsbGJhY2sgYW5kIHNlbmQgZGF0YVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfY2FsbGJhY2soXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB4aHIuc3RhdHVzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPEpRdWVyeS5BamF4LlRleHRTdGF0dXM+eGhyLnN0YXR1c1RleHQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfZGF0YSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHhoci5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBhYm9ydCBjYWxsYmFja1xyXG4gICAgICAgICAgICAgICAgICAgIGFib3J0Q2FsbGJhY2sgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHhoci5hYm9ydCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHhoci5vcGVuKHR5cGUsIHVybCwgYXN5bmMsIHVzZXJuYW1lLCBwYXNzd29yZCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIHNldHVwIGN1c3RvbSBoZWFkZXJzXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBpIGluIGhlYWRlcnMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGhlYWRlcnMuaGFzT3duUHJvcGVydHkoaSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKGksIGhlYWRlcnNbaV0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICB4aHIucmVzcG9uc2VUeXBlID0gZGF0YVR5cGU7XHJcbiAgICAgICAgICAgICAgICAgICAgeGhyLnNlbmQoZGF0YSk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgYWJvcnQ6ICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYWJvcnRDYWxsYmFjaykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhYm9ydENhbGxiYWNrKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59XHJcbiIsIi8vLyA8cmVmZXJlbmNlIHR5cGVzPVwianF1ZXJ5XCIgLz5cclxuXHJcbm5hbWVzcGFjZSBDRFAuVG9vbHMge1xyXG5cclxuICAgIGltcG9ydCBQcm9taXNlID0gQ0RQLlByb21pc2U7XHJcblxyXG4gICAgY29uc3QgVEFHID0gXCJbQ0RQLlRvb2xzLkZ1bmN0aW9uc10gXCI7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBNYXRoLmFicyDjgojjgorjgoLpq5jpgJ/jgaogYWJzXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBmdW5jdGlvbiBhYnMoeDogbnVtYmVyKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4geCA+PSAwID8geCA6IC14O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogTWF0aC5tYXgg44KI44KK44KC6auY6YCf44GqIG1heFxyXG4gICAgICovXHJcbiAgICBleHBvcnQgZnVuY3Rpb24gbWF4KGxoczogbnVtYmVyLCByaHM6IG51bWJlcik6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIGxocyA+PSByaHMgPyBsaHMgOiByaHM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBNYXRoLm1pbiDjgojjgorjgoLpq5jpgJ/jgaogbWluXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBmdW5jdGlvbiBtaW4obGhzOiBudW1iZXIsIHJoczogbnVtYmVyKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gbGhzIDw9IHJocyA/IGxocyA6IHJocztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOaVsOWApOOCkiAwIOipsOOCgeOBl+OBpuaWh+Wtl+WIl+OCkueUn+aIkFxyXG4gICAgICovXHJcbiAgICBleHBvcnQgZnVuY3Rpb24gdG9aZXJvUGFkZGluZyhubzogbnVtYmVyLCBsaW1pdDogbnVtYmVyKTogc3RyaW5nIHtcclxuICAgICAgICBsZXQgc2lnbmVkID0gXCJcIjtcclxuICAgICAgICBubyA9IE51bWJlcihubyk7XHJcblxyXG4gICAgICAgIGlmIChpc05hTihubykgfHwgaXNOYU4obGltaXQpIHx8IGxpbWl0IDw9IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAobm8gPCAwKSB7XHJcbiAgICAgICAgICAgIG5vID0gVG9vbHMuYWJzKG5vKTtcclxuICAgICAgICAgICAgc2lnbmVkID0gXCItXCI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gc2lnbmVkICsgKEFycmF5KGxpbWl0KS5qb2luKFwiMFwiKSArIG5vKS5zbGljZSgtbGltaXQpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5paH5a2X5YiX44Gu44OQ44Kk44OI5pWw44KS44Kr44Km44Oz44OIXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBmdW5jdGlvbiBnZXRTdHJpbmdTaXplKHNyYzogc3RyaW5nKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gKEJpbmFyeS5uZXdCbG9iKFtzcmNdLCB7IHR5cGU6IFwidGV4dC9wbGFpblwiIH0pKS5zaXplO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5paH5a2X5YiX44KS44OQ44Kk44OI5Yi26ZmQ44GX44Gm5YiG5YmyXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBmdW5jdGlvbiB0b1N0cmluZ0NodW5rcyhzcmM6IHN0cmluZywgbGltaXQ6IG51bWJlcik6IHN0cmluZ1tdIHtcclxuXHJcbiAgICAgICAgY29uc3QgY2h1bmtzID0gW107XHJcblxyXG4gICAgICAgIGNvbnN0IHNldENodW5rID0gKGlucHV0OiBzdHJpbmcpOiBzdHJpbmdbXSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChsaW1pdCA8IGdldFN0cmluZ1NpemUoaW5wdXQpKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBoYWxmID0gTWF0aC5mbG9vcihpbnB1dC5sZW5ndGggLyAyKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGxocyA9IGlucHV0LnNsaWNlKDAsIGhhbGYpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcmhzID0gaW5wdXQuc2xpY2UoaGFsZik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gW2xocywgcmhzXTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNodW5rcy5wdXNoKGlucHV0KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBbXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGNvbnN0IG1ha2VDaHVuayA9ICh3b3JrOiBzdHJpbmcpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgZmFpbHVyZXMgPSBzZXRDaHVuayh3b3JrKTtcclxuICAgICAgICAgICAgd2hpbGUgKDAgPCBmYWlsdXJlcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIG1ha2VDaHVuayhmYWlsdXJlcy5zaGlmdCgpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIG1ha2VDaHVuayhzcmMpO1xyXG5cclxuICAgICAgICByZXR1cm4gY2h1bmtzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5aSa6YeN57aZ5om/44Gu44Gf44KB44Gu5a6f6KGM5pmC57aZ5om/6Zai5pWwXHJcbiAgICAgKlxyXG4gICAgICogU3ViIENsYXNzIOWAmeijnOOCquODluOCuOOCp+OCr+ODiOOBq+WvvuOBl+OBpiBTdXBlciBDbGFzcyDlgJnoo5zjgqrjg5bjgrjjgqfjgq/jg4jjgpLnm7TliY3jga4gU3VwZXIgQ2xhc3Mg44Go44GX44Gm5oy/5YWl44GZ44KL44CCXHJcbiAgICAgKiBwcm90b3R5cGUg44Gu44G/44Kz44OU44O844GZ44KL44CCXHJcbiAgICAgKiDjgqTjg7Pjgrnjgr/jg7Pjgrnjg6Hjg7Pjg5DjgpLjgrPjg5Tjg7zjgZfjgZ/jgYTloLTlkIjjgIFTdXBlciBDbGFzcyDjgYznlpHkvLzjgrPjg7Pjgrnjg4jjg6njgq/jgr/jgpLmj5DkvpvjgZnjgovlv4XopoHjgYzjgYLjgovjgIJcclxuICAgICAqIOips+e0sOOBryBjZHAudG9vbHMuRnVuY3Rpb25zLnNwZWMudHMg44KS5Y+C54Wn44CCXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHN1YkNsYXNzICAge2NvbnN0cnVjdG9yfSBbaW5dIOOCquODluOCuOOCp+OCr+ODiOOBriBjb25zdHJ1Y3RvciDjgpLmjIflrppcclxuICAgICAqIEBwYXJhbSBzdXBlckNsYXNzIHtjb25zdHJ1Y3Rvcn0gW2luXSDjgqrjg5bjgrjjgqfjgq/jg4jjga4gY29uc3RydWN0b3Ig44KS5oyH5a6aXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBmdW5jdGlvbiBpbmhlcml0KHN1YkNsYXNzOiBhbnksIHN1cGVyQ2xhc3M6IGFueSk6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IF9wcm90b3R5cGUgPSBzdWJDbGFzcy5wcm90b3R5cGU7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIF9pbmhlcml0KCkge1xyXG4gICAgICAgICAgICB0aGlzLmNvbnN0cnVjdG9yID0gc3ViQ2xhc3M7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIF9pbmhlcml0LnByb3RvdHlwZSA9IHN1cGVyQ2xhc3MucHJvdG90eXBlO1xyXG4gICAgICAgIHN1YkNsYXNzLnByb3RvdHlwZSA9IG5ldyBfaW5oZXJpdCgpO1xyXG5cclxuICAgICAgICAkLmV4dGVuZChzdWJDbGFzcy5wcm90b3R5cGUsIF9wcm90b3R5cGUpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogbWl4aW4g6Zai5pWwXHJcbiAgICAgKlxyXG4gICAgICogVHlwZVNjcmlwdCBPZmZpY2lhbCBTaXRlIOOBq+i8ieOBo+OBpuOBhOOCiyBtaXhpbiDplqLmlbBcclxuICAgICAqIGh0dHA6Ly93d3cudHlwZXNjcmlwdGxhbmcub3JnL0hhbmRib29rI21peGluc1xyXG4gICAgICog5pei44Gr5a6a576p44GV44KM44Gm44GE44KL44Kq44OW44K444Kn44Kv44OI44GL44KJ44CB5paw6KaP44Gr44Kq44OW44K444Kn44Kv44OI44KS5ZCI5oiQ44GZ44KL44CCXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGRlcml2ZWQge2NvbnN0cnVjdG9yfSAgICBbaW5dIOWQiOaIkOOBleOCjOOCi+OCquODluOCuOOCp+OCr+ODiOOBriBjb25zdHJ1Y3RvciDjgpLmjIflrppcclxuICAgICAqIEBwYXJhbSBiYXNlcyAgIHtjb25zdHJ1Y3Rvci4uLn0gW2luXSDlkIjmiJDlhYPjgqrjg5bjgrjjgqfjgq/jg4jjga4gY29uc3RydWN0b3Ig44KS5oyH5a6aICjlj6/lpInlvJXmlbApXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBmdW5jdGlvbiBtaXhpbihkZXJpdmVkOiBhbnksIC4uLmJhc2VzOiBhbnlbXSk6IHZvaWQge1xyXG4gICAgICAgIGJhc2VzLmZvckVhY2goKGJhc2UpID0+IHtcclxuICAgICAgICAgICAgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoYmFzZS5wcm90b3R5cGUpLmZvckVhY2gobmFtZSA9PiB7XHJcbiAgICAgICAgICAgICAgICBkZXJpdmVkLnByb3RvdHlwZVtuYW1lXSA9IGJhc2UucHJvdG90eXBlW25hbWVdO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAqIEhlbHBlciBmdW5jdGlvbiB0byBjb3JyZWN0bHkgc2V0IHVwIHRoZSBwcm90b3R5cGUgY2hhaW4sIGZvciBzdWJjbGFzc2VzLlxyXG4gICAgICogVGhlIGZ1bmN0aW9uIGJlaGF2aW9yIGlzIHNhbWUgYXMgZXh0ZW5kKCkgZnVuY3Rpb24gb2YgQmFja2JvbmUuanMuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHByb3RvUHJvcHMgIHtPYmplY3R9IFtpbl0gc2V0IHByb3RvdHlwZSBwcm9wZXJ0aWVzIGFzIG9iamVjdC5cclxuICAgICAqIEBwYXJhbSBzdGF0aWNQcm9wcyB7T2JqZWN0fSBbaW5dIHNldCBzdGF0aWMgcHJvcGVydGllcyBhcyBvYmplY3QuXHJcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9IHN1YmNsYXNzIGNvbnN0cnVjdG9yLlxyXG4gICAgICpcclxuICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgKiDjgq/jg6njgrnntpnmib/jga7jgZ/jgoHjga7jg5jjg6vjg5Hjg7zplqLmlbBcclxuICAgICAqIEJhY2tib25lLmpzIGV4dGVuZCgpIOmWouaVsOOBqOWQjOetiVxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBwcm90b1Byb3BzICB7T2JqZWN0fSBbaW5dIHByb3RvdHlwZSBwcm9wZXJ0aWVzIOOCkuOCquODluOCuOOCp+OCr+ODiOOBp+aMh+WumlxyXG4gICAgICogQHBhcmFtIHN0YXRpY1Byb3BzIHtPYmplY3R9IFtpbl0gc3RhdGljIHByb3BlcnRpZXMg44KS44Kq44OW44K444Kn44Kv44OI44Gn5oyH5a6aXHJcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9IOOCteODluOCr+ODqeOCueOBruOCs+ODs+OCueODiOODqeOCr+OCv1xyXG4gICAgICovXHJcbiAgICBleHBvcnQgZnVuY3Rpb24gZXh0ZW5kKHByb3RvUHJvcHM6IG9iamVjdCwgc3RhdGljUHJvcHM/OiBvYmplY3QpOiBvYmplY3Qge1xyXG4gICAgICAgIGNvbnN0IHBhcmVudCA9IHRoaXM7XHJcbiAgICAgICAgbGV0IGNoaWxkO1xyXG5cclxuICAgICAgICBpZiAocHJvdG9Qcm9wcyAmJiBwcm90b1Byb3BzLmhhc093blByb3BlcnR5KFwiY29uc3RydWN0b3JcIikpIHtcclxuICAgICAgICAgICAgY2hpbGQgPSBwcm90b1Byb3BzLmNvbnN0cnVjdG9yO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNoaWxkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHBhcmVudC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJC5leHRlbmQoY2hpbGQsIHBhcmVudCwgc3RhdGljUHJvcHMpO1xyXG5cclxuICAgICAgICBjb25zdCBTdXJyb2dhdGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDtcclxuICAgICAgICB9O1xyXG4gICAgICAgIFN1cnJvZ2F0ZS5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlO1xyXG4gICAgICAgIGNoaWxkLnByb3RvdHlwZSA9IG5ldyBTdXJyb2dhdGU7XHJcblxyXG4gICAgICAgIGlmIChwcm90b1Byb3BzKSB7XHJcbiAgICAgICAgICAgICQuZXh0ZW5kKGNoaWxkLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlO1xyXG5cclxuICAgICAgICByZXR1cm4gY2hpbGQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBEUEkg5Y+W5b6XXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBmdW5jdGlvbiBnZXREZXZpY2VQaXhjZWxSYXRpbygpOiBudW1iZXIge1xyXG4gICAgICAgIGxldCBtZWRpYVF1ZXJ5O1xyXG4gICAgICAgIGNvbnN0IGlzX2ZpcmVmb3ggPSBuYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkuaW5kZXhPZihcImZpcmVmb3hcIikgPiAtMTtcclxuICAgICAgICBpZiAobnVsbCAhPSB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyAmJiAhaXNfZmlyZWZveCkge1xyXG4gICAgICAgICAgICByZXR1cm4gd2luZG93LmRldmljZVBpeGVsUmF0aW87XHJcbiAgICAgICAgfSBlbHNlIGlmICh3aW5kb3cubWF0Y2hNZWRpYSkge1xyXG4gICAgICAgICAgICBtZWRpYVF1ZXJ5ID1cclxuICAgICAgICAgICAgICAgIFwiKC13ZWJraXQtbWluLWRldmljZS1waXhlbC1yYXRpbzogMS41KSxcXFxyXG4gICAgICAgICAgICAgICAgICAgIChtaW4tLW1vei1kZXZpY2UtcGl4ZWwtcmF0aW86IDEuNSksXFxcclxuICAgICAgICAgICAgICAgICAgICAoLW8tbWluLWRldmljZS1waXhlbC1yYXRpbzogMy8yKSxcXFxyXG4gICAgICAgICAgICAgICAgICAgIChtaW4tcmVzb2x1dGlvbjogMS41ZHBweClcIjtcclxuICAgICAgICAgICAgaWYgKHdpbmRvdy5tYXRjaE1lZGlhKG1lZGlhUXVlcnkpLm1hdGNoZXMpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAxLjU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbWVkaWFRdWVyeSA9XHJcbiAgICAgICAgICAgICAgICBcIigtd2Via2l0LW1pbi1kZXZpY2UtcGl4ZWwtcmF0aW86IDIpLFxcXHJcbiAgICAgICAgICAgICAgICAgICAgKG1pbi0tbW96LWRldmljZS1waXhlbC1yYXRpbzogMiksXFxcclxuICAgICAgICAgICAgICAgICAgICAoLW8tbWluLWRldmljZS1waXhlbC1yYXRpbzogMi8xKSxcXFxyXG4gICAgICAgICAgICAgICAgICAgIChtaW4tcmVzb2x1dGlvbjogMmRwcHgpXCI7XHJcbiAgICAgICAgICAgIGlmICh3aW5kb3cubWF0Y2hNZWRpYShtZWRpYVF1ZXJ5KS5tYXRjaGVzKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gMjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBtZWRpYVF1ZXJ5ID1cclxuICAgICAgICAgICAgICAgIFwiKC13ZWJraXQtbWluLWRldmljZS1waXhlbC1yYXRpbzogMC43NSksXFxcclxuICAgICAgICAgICAgICAgICAgICAobWluLS1tb3otZGV2aWNlLXBpeGVsLXJhdGlvOiAwLjc1KSxcXFxyXG4gICAgICAgICAgICAgICAgICAgICgtby1taW4tZGV2aWNlLXBpeGVsLXJhdGlvOiAzLzQpLFxcXHJcbiAgICAgICAgICAgICAgICAgICAgKG1pbi1yZXNvbHV0aW9uOiAwLjc1ZHBweClcIjtcclxuICAgICAgICAgICAgaWYgKHdpbmRvdy5tYXRjaE1lZGlhKG1lZGlhUXVlcnkpLm1hdGNoZXMpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAwLjc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gMTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQ2FudmFzIGVsZW1lbnQg44Gu44Kt44Oj44OD44K344OlXHJcbiAgICBsZXQgc19jYW52YXNGYWN0b3J5OiBIVE1MQ2FudmFzRWxlbWVudDtcclxuXHJcbiAgICAvLyDjgq3jg6Pjg4Pjgrfjg6XmuIjjgb/jga4gQ2FudmFzIOOCkuWPluW+l+OBmeOCi1xyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGdldENhbnZhcygpOiBIVE1MQ2FudmFzRWxlbWVudCB7XHJcbiAgICAgICAgc19jYW52YXNGYWN0b3J5ID0gc19jYW52YXNGYWN0b3J5IHx8IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIik7XHJcbiAgICAgICAgcmV0dXJuIDxIVE1MQ2FudmFzRWxlbWVudD5zX2NhbnZhc0ZhY3RvcnkuY2xvbmVOb2RlKGZhbHNlKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOeUu+WDj+ODquOCveODvOOCueOBruODreODvOODieWujOS6huOCkuS/neiovFxyXG4gICAgICog44OW44Op44Km44K25pei5a6a44Gu44OX44Ot44Kw44Os44OD44K344OW44Ot44O844OJ44KS6LWw44KJ44Gb44Gq44GE44Gf44KBLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSAge1N0cmluZ30gdXJsIFtpbl0gdXJsIChkYXRhLXVybClcclxuICAgICAqIEByZXR1cm4ge0lQcm9taXNlPHN0cmluZz59IOihqOekuuWPr+iDveOBqiB1cmxcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGVuc3VyZUltYWdlTG9hZGVkKHVybDogc3RyaW5nKTogSVByb21pc2U8c3RyaW5nPiB7XHJcbiAgICAgICAgbGV0IGltZyA9IG5ldyBJbWFnZSgpO1xyXG5cclxuICAgICAgICBjb25zdCBkZXN0cm95ID0gKCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoaW1nKSB7XHJcbiAgICAgICAgICAgICAgICBpbWcuc3JjID0gXCJcIjsgICAvLyDoqq3jgb/ovrzjgb/lgZzmraJcclxuICAgICAgICAgICAgICAgIGltZyA9IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgICBpbWcub25sb2FkID0gKGV2ZW50OiBFdmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgZGVzdHJveSgpO1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZSh1cmwpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgaW1nLm9uZXJyb3IgPSAoZXZlbnQ6IEV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBkZXN0cm95KCk7XHJcbiAgICAgICAgICAgICAgICByZWplY3QobWFrZUVycm9ySW5mbyhcclxuICAgICAgICAgICAgICAgICAgICBSRVNVTFRfQ09ERS5FUlJPUl9DRFBfVE9PTFNfSU1BR0VfTE9BRF9GQUlMRUQsXHJcbiAgICAgICAgICAgICAgICAgICAgVEFHLFxyXG4gICAgICAgICAgICAgICAgICAgIFwiaW1hZ2UgbG9hZCBmYWlsZWQuIFt1cmw6IFwiICsgdXJsICsgXCJdXCJcclxuICAgICAgICAgICAgICAgICkpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgaW1nLnNyYyA9IHVybDtcclxuXHJcbiAgICAgICAgfSwgZGVzdHJveSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDnlLvlg4/jga7jg6rjgrXjgqTjgrpcclxuICAgICAqIOaMh+WumuOBl+OBn+mVt+i+uuOBrumVt+OBleOBq+OCouOCueODmuOCr+ODiOavlOOCkue2reaMgeOBl+OBpuODquOCteOCpOOCuuOCkuihjOOBhlxyXG4gICAgICogbG9uZ1NpZGVMZW5ndGgg44KI44KK5bCP44GV44Gq5aC05ZCI44Gv44Kq44Oq44K444OK44Or44K144Kk44K644GnIGRhdGEtdXJsIOOCkui/lOWNtOOBmeOCi1xyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSAge1N0cmluZ30gc3JjICAgICAgICAgICAgW2luXSBpbWFnZSDjgavmjIflrprjgZnjgovjgr3jg7zjgrlcclxuICAgICAqIEBwYXJhbSAge051bWJlcn0gbG9uZ1NpZGVMZW5ndGggW2luXSDjg6rjgrXjgqTjgrrjgavkvb/nlKjjgZnjgovplbfovrrjga7mnIDlpKflgKTjgpLmjIflrppcclxuICAgICAqIEByZXR1cm4ge0lQcm9taXNlPHN0cmluZz59IGJhc2U2NCBkYXRhIHVybCDjgpLov5TljbRcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIHJlc2l6ZUltYWdlKHNyYzogc3RyaW5nLCBsb25nU2lkZUxlbmd0aDogbnVtYmVyKTogSVByb21pc2U8c3RyaW5nPiB7XHJcbiAgICAgICAgbGV0IGltZyA9IG5ldyBJbWFnZSgpO1xyXG5cclxuICAgICAgICBjb25zdCBkZXN0cm95ID0gKCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoaW1nKSB7XHJcbiAgICAgICAgICAgICAgICBpbWcuc3JjID0gXCJcIjsgICAvLyDoqq3jgb/ovrzjgb/lgZzmraJcclxuICAgICAgICAgICAgICAgIGltZyA9IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgICBpbWcub25sb2FkID0gKGV2ZW50OiBFdmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY2FudmFzID0gZ2V0Q2FudmFzKCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpaCA9IGltZy5oZWlnaHQsIGl3ID0gaW1nLndpZHRoLCBpYSA9IGloIC8gaXc7XHJcbiAgICAgICAgICAgICAgICBsZXQgY3c6IG51bWJlciwgY2g6IG51bWJlcjtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoaXcgPT09IDAgfHwgMCA9PT0gaWEpIHsgLy8g5b+144Gu44Gf44KB5LiN5q2j44Gq55S75YOP44KS44Ks44O844OJXHJcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KG1ha2VFcnJvckluZm8oXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFJFU1VMVF9DT0RFLkVSUk9SX0NEUF9UT09MU19JTlZBTElEX0lNQUdFLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBUQUcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiaW52YWxpZCBpbWFnZS4gW3NyYzogXCIgKyBzcmMgKyBcIl1cIlxyXG4gICAgICAgICAgICAgICAgICAgICkpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobG9uZ1NpZGVMZW5ndGggPD0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsb25nU2lkZUxlbmd0aCA9IChpYSA8IDEpID8gaXcgOiBpaDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlhIDwgMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdyA9IChsb25nU2lkZUxlbmd0aCA8IGl3KSA/IGxvbmdTaWRlTGVuZ3RoIDogaXc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoID0gTWF0aC5yb3VuZChjdyAqIGlhKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjaCA9IChsb25nU2lkZUxlbmd0aCA8IGloKSA/IGxvbmdTaWRlTGVuZ3RoIDogaWg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN3ID0gTWF0aC5yb3VuZChjaCAvIGlhKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNhbnZhcy53aWR0aCA9IGN3O1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbnZhcy5oZWlnaHQgPSBjaDtcclxuICAgICAgICAgICAgICAgICAgICBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpLmRyYXdJbWFnZShpbWcsIDAsIDAsIGN3LCBjaCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoY2FudmFzLnRvRGF0YVVSTCgpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBkZXN0cm95KCk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBpbWcub25lcnJvciA9IChldmVudDogRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgICAgIGRlc3Ryb3koKTtcclxuICAgICAgICAgICAgICAgIHJlamVjdChtYWtlRXJyb3JJbmZvKFxyXG4gICAgICAgICAgICAgICAgICAgIFJFU1VMVF9DT0RFLkVSUk9SX0NEUF9UT09MU19JTUFHRV9MT0FEX0ZBSUxFRCxcclxuICAgICAgICAgICAgICAgICAgICBUQUcsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJpbWFnZSBsb2FkIGZhaWxlZC4gW3NyYzogXCIgKyBzcmMgKyBcIl1cIlxyXG4gICAgICAgICAgICAgICAgKSk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBpbWcuc3JjID0gc3JjO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcbiIsIi8qIHRzbGludDpkaXNhYmxlOm1heC1saW5lLWxlbmd0aCAqL1xyXG5cclxubmFtZXNwYWNlIENEUC5Ub29scyB7XHJcblxyXG4gICAgY29uc3QgVEFHID0gXCJbQ0RQLlRvb2xzLkRhdGVUaW1lXSBcIjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBjbGFzcyBEYXRlVGltZVxyXG4gICAgICogQGJyaWVmIOaZguWIu+aTjeS9nOOBruODpuODvOODhuOCo+ODquODhuOCo+OCr+ODqeOCuVxyXG4gICAgICovXHJcbiAgICBleHBvcnQgY2xhc3MgRGF0ZVRpbWUge1xyXG5cclxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgICAgIC8vIHB1YmxpYyBzdGF0aWMgbWV0aG9kXHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOWfuueCueOBqOOBquOCi+aXpeS7mOOBi+OCieOAgW7ml6XlvozjgIFu5pel5YmN44KS566X5Ye6XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gYmFzZSAgICB7RGF0ZX0gICBbaW5dIOWfuua6luaXpVxyXG4gICAgICAgICAqIEBwYXJhbSBhZGREYXlzIHtOdW1iZXJ9IFtpbl0g5Yqg566X5pelLiDjg57jgqTjg4rjgrnmjIflrprjgadu5pel5YmN44KC6Kit5a6a5Y+v6IO9XHJcbiAgICAgICAgICogQHJldHVybiB7RGF0ZX0g5pel5LuY44Kq44OW44K444Kn44Kv44OIXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBjb21wdXRlRGF0ZShiYXNlOiBEYXRlLCBhZGREYXlzOiBudW1iZXIpOiBEYXRlIHtcclxuICAgICAgICAgICAgY29uc3QgZHQgPSBuZXcgRGF0ZShiYXNlLmdldFRpbWUoKSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGJhc2VTZWMgPSBkdC5nZXRUaW1lKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGFkZFNlYyA9IGFkZERheXMgKiA4NjQwMDAwMDsgICAgLy/ml6XmlbAgKiAx5pel44Gu44Of44Oq56eS5pWwXHJcbiAgICAgICAgICAgIGNvbnN0IHRhcmdldFNlYyA9IGJhc2VTZWMgKyBhZGRTZWM7XHJcbiAgICAgICAgICAgIGR0LnNldFRpbWUodGFyZ2V0U2VjKTtcclxuICAgICAgICAgICAgcmV0dXJuIGR0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ29udmVydCBzdHJpbmcgdG8gZGF0ZSBvYmplY3RcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSBkYXRlIHN0cmluZyBleCkgWVlZWS1NTS1ERFRISDptbTpTUy5TU1NcclxuICAgICAgICAgKiBAcmV0dXJuIHtPYmplY3R9IGRhdGUgb2JqZWN0XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBjb252ZXJ0SVNPU3RyaW5nVG9EYXRlKGRhdGVTdHJpbmc6IHN0cmluZyk6IERhdGUge1xyXG4gICAgICAgICAgICBjb25zdCBkYXRlVGltZSA9IGRhdGVTdHJpbmcuc3BsaXQoXCJUXCIpLFxyXG4gICAgICAgICAgICAgICAgZGF0ZUFycmF5ID0gZGF0ZVRpbWVbMF0uc3BsaXQoXCItXCIpO1xyXG4gICAgICAgICAgICBsZXQgdGltZUFycmF5LCBzZWNBcnJheSwgZGF0ZU9iamVjdDtcclxuXHJcbiAgICAgICAgICAgIGlmIChkYXRlVGltZVsxXSkge1xyXG4gICAgICAgICAgICAgICAgdGltZUFycmF5ID0gZGF0ZVRpbWVbMV0uc3BsaXQoXCI6XCIpO1xyXG4gICAgICAgICAgICAgICAgc2VjQXJyYXkgPSB0aW1lQXJyYXlbMl0uc3BsaXQoXCIuXCIpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAodGltZUFycmF5KSB7XHJcbiAgICAgICAgICAgICAgICBkYXRlT2JqZWN0ID0gbmV3IERhdGUoPGFueT5kYXRlQXJyYXlbMF0sIDxhbnk+ZGF0ZUFycmF5WzFdIC0gMSwgPGFueT5kYXRlQXJyYXlbMl0sXHJcbiAgICAgICAgICAgICAgICAgICAgPGFueT50aW1lQXJyYXlbMF0sIDxhbnk+dGltZUFycmF5WzFdLCA8YW55PnNlY0FycmF5WzBdLCA8YW55PnNlY0FycmF5WzFdKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmIChkYXRlQXJyYXlbMl0pIHtcclxuICAgICAgICAgICAgICAgICAgICBkYXRlT2JqZWN0ID0gbmV3IERhdGUoPGFueT5kYXRlQXJyYXlbMF0sIDxhbnk+ZGF0ZUFycmF5WzFdIC0gMSwgPGFueT5kYXRlQXJyYXlbMl0pO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChkYXRlQXJyYXlbMV0pIHtcclxuICAgICAgICAgICAgICAgICAgICBkYXRlT2JqZWN0ID0gbmV3IERhdGUoPGFueT5kYXRlQXJyYXlbMF0sIDxhbnk+ZGF0ZUFycmF5WzFdIC0gMSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGVPYmplY3QgPSBuZXcgRGF0ZSg8YW55PmRhdGVBcnJheVswXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBkYXRlT2JqZWN0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogIENvbnZlcnQgYSBkYXRlIG9iamVjdCBpbnRvIGEgc3RyaW5nIGluIFBNT0FQSSByZWNvcmRlZF9kYXRlIGZvcm1hdCh0aGUgSVNPIDg2MDEgRXh0ZW5kZWQgRm9ybWF0KVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGRhdGUgICB7RGF0ZX0gICBbaW5dIGRhdGUgb2JqZWN0XHJcbiAgICAgICAgICogQHBhcmFtIHRhcmdldCB7U3RyaW5nfSBbaW5dIHt5ZWFyIHwgbW9udGggfCBkYXRlIHwgaG91ciB8IG1pbiB8IHNlYyB8IG1zZWMgfVxyXG4gICAgICAgICAqIEByZXR1cm4ge1N0cmluZ31cclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGNvbnZlcnREYXRlVG9JU09TdHJpbmcoZGF0ZTogRGF0ZSwgdGFyZ2V0OiBzdHJpbmcgPSBcIm1zZWNcIik6IHN0cmluZyB7XHJcbiAgICAgICAgICAgIGxldCBpc29EYXRlU3RyaW5nO1xyXG5cclxuICAgICAgICAgICAgc3dpdGNoICh0YXJnZXQpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJ5ZWFyXCI6XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwibW9udGhcIjpcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJkYXRlXCI6XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiaG91clwiOlxyXG4gICAgICAgICAgICAgICAgY2FzZSBcIm1pblwiOlxyXG4gICAgICAgICAgICAgICAgY2FzZSBcInNlY1wiOlxyXG4gICAgICAgICAgICAgICAgY2FzZSBcIm1zZWNcIjpcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFRBRyArIFwidW5rbm93biB0YXJnZXQ6IFwiICsgdGFyZ2V0KTtcclxuICAgICAgICAgICAgICAgICAgICB0YXJnZXQgPSBcIm1zZWNcIjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaXNvRGF0ZVN0cmluZyA9IGRhdGUuZ2V0RnVsbFllYXIoKTtcclxuICAgICAgICAgICAgaWYgKFwieWVhclwiID09PSB0YXJnZXQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBpc29EYXRlU3RyaW5nO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpc29EYXRlU3RyaW5nICs9IChcIi1cIiArIERhdGVUaW1lLm51bWJlclRvRG91YmxlRGlnaXRzU3RyaW5nKGRhdGUuZ2V0TW9udGgoKSArIDEpKTtcclxuICAgICAgICAgICAgaWYgKFwibW9udGhcIiA9PT0gdGFyZ2V0KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gaXNvRGF0ZVN0cmluZztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaXNvRGF0ZVN0cmluZyArPSAoXCItXCIgKyBEYXRlVGltZS5udW1iZXJUb0RvdWJsZURpZ2l0c1N0cmluZyhkYXRlLmdldERhdGUoKSkpO1xyXG4gICAgICAgICAgICBpZiAoXCJkYXRlXCIgPT09IHRhcmdldCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGlzb0RhdGVTdHJpbmc7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlzb0RhdGVTdHJpbmcgKz0gKFwiVFwiICsgRGF0ZVRpbWUubnVtYmVyVG9Eb3VibGVEaWdpdHNTdHJpbmcoZGF0ZS5nZXRIb3VycygpKSk7XHJcbiAgICAgICAgICAgIGlmIChcImhvdXJcIiA9PT0gdGFyZ2V0KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gaXNvRGF0ZVN0cmluZztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaXNvRGF0ZVN0cmluZyArPSAoXCI6XCIgKyBEYXRlVGltZS5udW1iZXJUb0RvdWJsZURpZ2l0c1N0cmluZyhkYXRlLmdldE1pbnV0ZXMoKSkpO1xyXG4gICAgICAgICAgICBpZiAoXCJtaW5cIiA9PT0gdGFyZ2V0KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gaXNvRGF0ZVN0cmluZztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaXNvRGF0ZVN0cmluZyArPSAoXCI6XCIgKyBEYXRlVGltZS5udW1iZXJUb0RvdWJsZURpZ2l0c1N0cmluZyhkYXRlLmdldFNlY29uZHMoKSkpO1xyXG4gICAgICAgICAgICBpZiAoXCJzZWNcIiA9PT0gdGFyZ2V0KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gaXNvRGF0ZVN0cmluZztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaXNvRGF0ZVN0cmluZyArPSAoXCIuXCIgKyBTdHJpbmcoKGRhdGUuZ2V0TWlsbGlzZWNvbmRzKCkgLyAxMDAwKS50b0ZpeGVkKDMpKS5zbGljZSgyLCA1KSk7XHJcbiAgICAgICAgICAgIHJldHVybiBpc29EYXRlU3RyaW5nO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENvbnZlcnQgZmlsZSBzeXN0ZW0gY29tcGF0aWJsZSBzdHJpbmcgdG8gZGF0ZSBvYmplY3RcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSBkYXRlIHN0cmluZyBleCkgeXl5eV9NTV9kZFRISF9tbV9zc19TU1NcclxuICAgICAgICAgKiBAcmV0dXJuIHtPYmplY3R9IGRhdGUgb2JqZWN0XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBjb252ZXJ0RmlsZVN5c3RlbVN0cmluZ1RvRGF0ZShkYXRlU3RyaW5nOiBzdHJpbmcpOiBEYXRlIHtcclxuICAgICAgICAgICAgY29uc3QgZGF0ZVRpbWUgPSBkYXRlU3RyaW5nLnNwbGl0KFwiVFwiKSxcclxuICAgICAgICAgICAgICAgIGRhdGVBcnJheSA9IGRhdGVUaW1lWzBdLnNwbGl0KFwiX1wiKTtcclxuICAgICAgICAgICAgbGV0IHRpbWVBcnJheSwgZGF0ZU9iamVjdDtcclxuXHJcbiAgICAgICAgICAgIGlmIChkYXRlVGltZVsxXSkge1xyXG4gICAgICAgICAgICAgICAgdGltZUFycmF5ID0gZGF0ZVRpbWVbMV0uc3BsaXQoXCJfXCIpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAodGltZUFycmF5KSB7XHJcbiAgICAgICAgICAgICAgICBkYXRlT2JqZWN0ID0gbmV3IERhdGUoPGFueT5kYXRlQXJyYXlbMF0sIDxhbnk+ZGF0ZUFycmF5WzFdIC0gMSwgPGFueT5kYXRlQXJyYXlbMl0sXHJcbiAgICAgICAgICAgICAgICAgICAgPGFueT50aW1lQXJyYXlbMF0sIDxhbnk+dGltZUFycmF5WzFdLCA8YW55PnRpbWVBcnJheVsyXSwgPGFueT50aW1lQXJyYXlbM10pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGVBcnJheVsyXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGVPYmplY3QgPSBuZXcgRGF0ZSg8YW55PmRhdGVBcnJheVswXSwgPGFueT5kYXRlQXJyYXlbMV0gLSAxLCA8YW55PmRhdGVBcnJheVsyXSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGRhdGVBcnJheVsxXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGVPYmplY3QgPSBuZXcgRGF0ZSg8YW55PmRhdGVBcnJheVswXSwgPGFueT5kYXRlQXJyYXlbMV0gLSAxKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZU9iamVjdCA9IG5ldyBEYXRlKDxhbnk+ZGF0ZUFycmF5WzBdKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGRhdGVPYmplY3Q7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiAgQ29udmVydCBhIGRhdGUgb2JqZWN0IGludG8gYSBzdHJpbmcgaW4gZmlsZSBzeXN0ZW0gY29tcGF0aWJsZSBmb3JtYXQoeXl5eV9NTV9kZFRISF9tbV9zc19TU1MpXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gZGF0ZSAgIHtEYXRlfSAgIFtpbl0gZGF0ZSBvYmplY3RcclxuICAgICAgICAgKiBAcGFyYW0gdGFyZ2V0IHtTdHJpbmd9IFtpbl0ge3llYXIgfCBtb250aCB8IGRhdGUgfCBob3VyIHwgbWluIHwgc2VjIHwgbXNlYyB9XHJcbiAgICAgICAgICogQHJldHVybiB7U3RyaW5nfVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgY29udmVydERhdGVUb0ZpbGVTeXN0ZW1TdHJpbmcoZGF0ZTogRGF0ZSwgdGFyZ2V0OiBzdHJpbmcgPSBcIm1zZWNcIik6IHN0cmluZyB7XHJcbiAgICAgICAgICAgIGxldCBmaWxlU3lzdGVtU3RyaW5nO1xyXG5cclxuICAgICAgICAgICAgc3dpdGNoICh0YXJnZXQpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJ5ZWFyXCI6XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwibW9udGhcIjpcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJkYXRlXCI6XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiaG91clwiOlxyXG4gICAgICAgICAgICAgICAgY2FzZSBcIm1pblwiOlxyXG4gICAgICAgICAgICAgICAgY2FzZSBcInNlY1wiOlxyXG4gICAgICAgICAgICAgICAgY2FzZSBcIm1zZWNcIjpcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFRBRyArIFwidW5rbm93biB0YXJnZXQ6IFwiICsgdGFyZ2V0KTtcclxuICAgICAgICAgICAgICAgICAgICB0YXJnZXQgPSBcIm1zZWNcIjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZmlsZVN5c3RlbVN0cmluZyA9IGRhdGUuZ2V0RnVsbFllYXIoKTtcclxuICAgICAgICAgICAgaWYgKFwieWVhclwiID09PSB0YXJnZXQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmaWxlU3lzdGVtU3RyaW5nO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmaWxlU3lzdGVtU3RyaW5nICs9IChcIl9cIiArIERhdGVUaW1lLm51bWJlclRvRG91YmxlRGlnaXRzU3RyaW5nKGRhdGUuZ2V0TW9udGgoKSArIDEpKTtcclxuICAgICAgICAgICAgaWYgKFwibW9udGhcIiA9PT0gdGFyZ2V0KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmlsZVN5c3RlbVN0cmluZztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZmlsZVN5c3RlbVN0cmluZyArPSAoXCJfXCIgKyBEYXRlVGltZS5udW1iZXJUb0RvdWJsZURpZ2l0c1N0cmluZyhkYXRlLmdldERhdGUoKSkpO1xyXG4gICAgICAgICAgICBpZiAoXCJkYXRlXCIgPT09IHRhcmdldCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZpbGVTeXN0ZW1TdHJpbmc7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZpbGVTeXN0ZW1TdHJpbmcgKz0gKFwiVFwiICsgRGF0ZVRpbWUubnVtYmVyVG9Eb3VibGVEaWdpdHNTdHJpbmcoZGF0ZS5nZXRIb3VycygpKSk7XHJcbiAgICAgICAgICAgIGlmIChcImhvdXJcIiA9PT0gdGFyZ2V0KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmlsZVN5c3RlbVN0cmluZztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZmlsZVN5c3RlbVN0cmluZyArPSAoXCJfXCIgKyBEYXRlVGltZS5udW1iZXJUb0RvdWJsZURpZ2l0c1N0cmluZyhkYXRlLmdldE1pbnV0ZXMoKSkpO1xyXG4gICAgICAgICAgICBpZiAoXCJtaW5cIiA9PT0gdGFyZ2V0KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmlsZVN5c3RlbVN0cmluZztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZmlsZVN5c3RlbVN0cmluZyArPSAoXCJfXCIgKyBEYXRlVGltZS5udW1iZXJUb0RvdWJsZURpZ2l0c1N0cmluZyhkYXRlLmdldFNlY29uZHMoKSkpO1xyXG4gICAgICAgICAgICBpZiAoXCJzZWNcIiA9PT0gdGFyZ2V0KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmlsZVN5c3RlbVN0cmluZztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZmlsZVN5c3RlbVN0cmluZyArPSAoXCJfXCIgKyBTdHJpbmcoKGRhdGUuZ2V0TWlsbGlzZWNvbmRzKCkgLyAxMDAwKS50b0ZpeGVkKDMpKS5zbGljZSgyLCA1KSk7XHJcbiAgICAgICAgICAgIHJldHVybiBmaWxlU3lzdGVtU3RyaW5nO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgICAgICAvLyBwcml2YXRlIHN0YXRpYyBtZXRob2RcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ29udmVydCBudW0gdG8gc3RyaW5nKGRvdWJsZSBkaWdpdHMpXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9IG51bWJlciAoMCA8bnVtYmVyIDwgMTAwKVxyXG4gICAgICAgICAqIEByZXR1cm4ge1N0cmluZ30gZG91YmxlIGRpZ2l0cyBzdHJpbmdcclxuICAgICAgICAgKi9cclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBudW1iZXJUb0RvdWJsZURpZ2l0c1N0cmluZyhudW06IG51bWJlcik6IHN0cmluZyB7XHJcbiAgICAgICAgICAgIGlmIChudW0gPCAwIHx8IG51bSA+IDEwMCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKG51bSA8IDEwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gXCIwXCIgKyBudW07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIFwiXCIgKyBudW07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIi8vLyA8cmVmZXJlbmNlIHR5cGVzPVwianF1ZXJ5XCIgLz5cclxuXHJcbm5hbWVzcGFjZSBDRFAuVG9vbHMge1xyXG5cclxuICAgIGNvbnN0IFRBRyA9IFwiW0NEUC5Ub29scy5UZW1wbGF0ZV0gXCI7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAaW50ZXJmYWNlIEpTVFxyXG4gICAgICogQGJyaWVmIOOCs+ODs+ODkeOCpOODq+a4iOOBvyDjg4bjg7Pjg5fjg6zjg7zjg4jmoLzntI3jgqTjg7Pjgr/jg7zjg5XjgqfjgqTjgrlcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBKU1Qge1xyXG4gICAgICAgIChkYXRhPzogYW55KTogc3RyaW5nO1xyXG4gICAgfVxyXG5cclxuICAgIC8vX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXy8vXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAY2xhc3MgVGVtcGxhdGVcclxuICAgICAqIEBicmllZiB0ZW1wbGF0ZSBzY3JpcHQg44KS566h55CG44GZ44KL44Om44O844OG44Kj44Oq44OG44Kj44Kv44Op44K5XHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBjbGFzcyBUZW1wbGF0ZSB7XHJcblxyXG4gICAgICAgIHN0YXRpYyBfbWFwRWxlbWVudDogYW55OyAgICAvLyE8IOOCreODvOOBqCBKUXVlcnkgRWxlbWVudCDjga4gTWFwIOOCquODluOCuOOCp+OCr+ODiFxyXG4gICAgICAgIHN0YXRpYyBfbWFwU291cmNlOiBhbnk7ICAgICAvLyE8IFVSTCDjgagg44K944O844K544OV44Kh44Kk44OrKEhUTUwpIOOBriBNYXAg44Kq44OW44K444Kn44Kv44OIXHJcblxyXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAgICAgLy8g5YWs6ZaL44Oh44K944OD44OJXHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOaMh+WumuOBl+OBnyBpZCwgY2xhc3Mg5ZCNLCBUYWcg5ZCN44KS44Kt44O844Gr44OG44Oz44OX44Os44O844OI44GuIEpRdWVyeSBFbGVtZW50IOOCkuWPluW+l+OBmeOCi+OAglxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtTdHJpbmd9ICBrZXkgICAgIFtpbl0gaWQsIGNsYXNzLCB0YWcg44KS6KGo44GZ5paH5a2X5YiXXHJcbiAgICAgICAgICogQHBhcmFtIHtTdHJpbmd9ICBbc3JjXSAgIFtpbl0g5aSW6YOoIGh0bWwg44KS5oyH5a6a44GZ44KL5aC05ZCI44GvIHVybCDjgpLoqK3lrppcclxuICAgICAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IFtjYWNoZV0gW2luXSBzcmMgaHRtbCDjgpLjgq3jg6Pjg4Pjgrfjg6XjgZnjgovloLTlkIjjga8gdHJ1ZS4gc3JjIOOBjOaMh+WumuOBleOCjOOBpuOBhOOCi+OBqOOBjeOBruOBv+acieWKuVxyXG4gICAgICAgICAqIEByZXR1cm4gdGVtcGxhdGUg44GM5qC857SN44GV44KM44Gm44GE44KLIEpRdWVyeSBFbGVtZW50XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgc3RhdGljIGdldFRlbXBsYXRlRWxlbWVudChrZXk6IHN0cmluZywgc3JjOiBzdHJpbmcgPSBudWxsLCBjYWNoZTogYm9vbGVhbiA9IHRydWUpOiBKUXVlcnkge1xyXG4gICAgICAgICAgICBjb25zdCBtYXBFbGVtZW50ID0gVGVtcGxhdGUuZ2V0RWxlbWVudE1hcCgpO1xyXG4gICAgICAgICAgICBsZXQgJGVsZW1lbnQgPSBtYXBFbGVtZW50W2tleV07XHJcblxyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCEkZWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzcmMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaHRtbCA9IFRlbXBsYXRlLmZpbmRIdG1sRnJvbVNvdXJjZShzcmMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkZWxlbWVudCA9ICQoaHRtbCkuZmluZChrZXkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRlbGVtZW50ID0gJChrZXkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAvLyDopoHntKDjga7mpJzoqLxcclxuICAgICAgICAgICAgICAgICAgICBpZiAoJGVsZW1lbnQgPD0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyAoXCJpbnZhbGlkIFtrZXksIHNyY10gPSBbXCIgKyBrZXkgKyBcIiwgXCIgKyBzcmMgKyBcIl1cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzcmMgJiYgY2FjaGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFwRWxlbWVudFtrZXldID0gJGVsZW1lbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGNhdGNoIChleGNlcHRpb24pIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoVEFHICsgZXhjZXB0aW9uKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gJGVsZW1lbnQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBNYXAg44Kq44OW44K444Kn44Kv44OI44Gu5YmK6ZmkXHJcbiAgICAgICAgICog5piO56S655qE44Gr44Kt44Oj44OD44K344Ol44KS6ZaL5pS+44GZ44KL5aC05ZCI44Gv5pys44Oh44K944OD44OJ44KS44Kz44O844Or44GZ44KLXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgc3RhdGljIGVtcHR5KCk6IHZvaWQge1xyXG4gICAgICAgICAgICBUZW1wbGF0ZS5fbWFwRWxlbWVudCA9IG51bGw7XHJcbiAgICAgICAgICAgIFRlbXBsYXRlLl9tYXBTb3VyY2UgPSBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog5oyH5a6a44GX44GfIGlkLCBjbGFzcyDlkI0sIFRhZyDlkI3jgpLjgq3jg7zjgasgSlNUIOOCkuWPluW+l+OBmeOCi+OAglxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtTdHJpbmcgfCBqUXVlcnl9IGtleSAgICAgW2luXSBpZCwgY2xhc3MsIHRhZyDjgpLooajjgZnmloflrZfliJcg44G+44Gf44GvIOODhuODs+ODl+ODrOODvOODiOaWh+Wtl+WIlywg44G+44Gf44GvIGpRdWVyeSDjgqrjg5bjgrjjgqfjgq/jg4hcclxuICAgICAgICAgKiBAcGFyYW0ge1N0cmluZ30gICAgICAgICAgW3NyY10gICBbaW5dIOWklumDqCBodG1sIOOCkuaMh+WumuOBmeOCi+WgtOWQiOOBryB1cmwg44KS6Kit5a6aXHJcbiAgICAgICAgICogQHBhcmFtIHtCb29sZWFufSAgICAgICAgIFtjYWNoZV0gW2luXSBzcmMgaHRtbCDjgpLjgq3jg6Pjg4Pjgrfjg6XjgZnjgovloLTlkIjjga8gdHJ1ZS4gc3JjIOOBjOaMh+WumuOBleOCjOOBpuOBhOOCi+OBqOOBjeOBruOBv+acieWKuVxyXG4gICAgICAgICAqIEByZXR1cm4g44Kz44Oz44OR44Kk44Or44GV44KM44GfIEpTVCDjgqrjg5bjgrjjgqfjgq/jg4hcclxuICAgICAgICAgKi9cclxuICAgICAgICBzdGF0aWMgZ2V0SlNUKGtleTogSlF1ZXJ5KTogSlNUO1xyXG4gICAgICAgIHN0YXRpYyBnZXRKU1Qoa2V5OiBzdHJpbmcsIHNyYz86IHN0cmluZywgY2FjaGU/OiBib29sZWFuKTogSlNUO1xyXG4gICAgICAgIHN0YXRpYyBnZXRKU1Qoa2V5OiBhbnksIHNyYz86IHN0cmluZywgY2FjaGU/OiBib29sZWFuKTogSlNUIHtcclxuICAgICAgICAgICAgbGV0IHRlbXBsYXRlOiBhbnkgPSBudWxsO1xyXG4gICAgICAgICAgICBsZXQganN0OiBKU1Q7XHJcbiAgICAgICAgICAgIGxldCAkZWxlbWVudDogSlF1ZXJ5O1xyXG4gICAgICAgICAgICBpZiAoa2V5IGluc3RhbmNlb2YgalF1ZXJ5KSB7XHJcbiAgICAgICAgICAgICAgICAkZWxlbWVudCA9IGtleTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICRlbGVtZW50ID0gVGVtcGxhdGUuZ2V0VGVtcGxhdGVFbGVtZW50KGtleSwgc3JjLCBjYWNoZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKG51bGwgIT0gZ2xvYmFsLkhvZ2FuKSB7XHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZSA9IEhvZ2FuLmNvbXBpbGUoJGVsZW1lbnQudGV4dCgpKTtcclxuICAgICAgICAgICAgICAgIGpzdCA9IGZ1bmN0aW9uIChkYXRhPzogYW55KTogc3RyaW5nIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcGxhdGUucmVuZGVyKGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChudWxsICE9IGdsb2JhbC5fKSB7XHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZSA9IF8udGVtcGxhdGUoJGVsZW1lbnQuaHRtbCgpKTtcclxuICAgICAgICAgICAgICAgIGpzdCA9IGZ1bmN0aW9uIChkYXRhPzogYW55KTogc3RyaW5nIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyDmlLnooYzjgajjgr/jg5bjga/liYrpmaTjgZnjgotcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcGxhdGUoZGF0YSkucmVwbGFjZSgvXFxufFxcdC9nLCBcIlwiKTtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oVEFHICsgXCJjYW5ub3QgZmluZCB0ZW1wbGF0ZSBlbmdpbmUgbW9kdWxlLlwiKTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihcIiAgICAnaG9nYW4nIG9yICd1bmRlcnNjb3JlJyBpcyByZXF1aXJlZC5cIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGpzdDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAgICAgLy8g5YaF6YOo44Oh44K944OD44OJXHJcblxyXG4gICAgICAgIC8vISBFbGVtZW50IE1hcCDjgqrjg5bjgrjjgqfjgq/jg4jjga7lj5blvpdcclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBnZXRFbGVtZW50TWFwKCk6IGFueSB7XHJcbiAgICAgICAgICAgIGlmICghVGVtcGxhdGUuX21hcEVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgIFRlbXBsYXRlLl9tYXBFbGVtZW50ID0ge307XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIFRlbXBsYXRlLl9tYXBFbGVtZW50O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIFVSTCBNYXAg44Kq44OW44K444Kn44Kv44OI44Gu5Y+W5b6XXHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgZ2V0U291cmNlTWFwKCk6IGFueSB7XHJcbiAgICAgICAgICAgIGlmICghVGVtcGxhdGUuX21hcFNvdXJjZSkge1xyXG4gICAgICAgICAgICAgICAgVGVtcGxhdGUuX21hcFNvdXJjZSA9IHt9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBUZW1wbGF0ZS5fbWFwU291cmNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIFVSTCBNYXAg44GL44KJIEhUTUwg44KS5qSc57SiLiDlpLHmlZfjgZfjgZ/loLTlkIjjga8gdW5kZWZpbmVkIOOBjOi/lOOCi1xyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIGZpbmRIdG1sRnJvbVNvdXJjZShzcmM6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1hcFNvdXJjZSA9IFRlbXBsYXRlLmdldFNvdXJjZU1hcCgpO1xyXG4gICAgICAgICAgICBsZXQgaHRtbCA9IG1hcFNvdXJjZVtzcmNdO1xyXG5cclxuICAgICAgICAgICAgaWYgKCFodG1sKSB7XHJcbiAgICAgICAgICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgICAgICAgICAgIHVybDogc3JjLFxyXG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZDogXCJHRVRcIixcclxuICAgICAgICAgICAgICAgICAgICBhc3luYzogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YVR5cGU6IFwiaHRtbFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IChkYXRhOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaHRtbCA9IGRhdGE7XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogKGRhdGE6IGFueSwgc3RhdHVzOiBzdHJpbmcpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgKFwiYWpheCByZXF1ZXN0IGZhaWxlZC4gc3RhdHVzOiBcIiArIHN0YXR1cyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAvLyDjgq3jg6Pjg4Pjgrfjg6XjgavmoLzntI1cclxuICAgICAgICAgICAgICAgIG1hcFNvdXJjZVtzcmNdID0gaHRtbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gaHRtbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwibmFtZXNwYWNlIENEUC5Ub29scyB7XHJcblxyXG4gICAgY29uc3QgVEFHID0gXCJbQ0RQLlRvb2xzLlByb2dyZXNzQ291bnRlcl0gXCI7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAaW50ZXJmYWNlIFByb2dyZXNzQ291bnRlck9wdGlvbnNcclxuICAgICAqIEBicmllZiBQcm9ncmVzc0NvdW50ZXIg44Gr5oyH5a6a44GZ44KL44Kq44OX44K344On44OzXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgUHJvZ3Jlc3NDb3VudGVyT3B0aW9ucyB7XHJcbiAgICAgICAgbWF4PzogbnVtYmVyOyAgICAgICAgICAgICAgICAgICAgICAgLy8g6YCy5o2X5YCk44Gu5pyA5aSn5YCkIOaXouWumjogMTAwXHJcbiAgICAgICAgYWxsb3dJbmNyZW1lbnRSZW1haW4/OiBib29sZWFuOyAgICAgLy8g5q6L44KK5o6o5a6a5pmC6ZaT44GM5aKX44GI44Gm44KI44GE5aC05ZCI44Gr44GvIHRydWUg5pei5a6aOiBmYWxzZVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGludGVyZmFjZSBQcm9ncmVzc0NvdW50ZXJSZXN1bHRcclxuICAgICAqIEBicmllZiDpgLLmjZfjga7mmYLplpPjgpLmjIHjgaTjgqTjg7Pjgr/jg7zjg5XjgqfjgqTjgrlcclxuICAgICAqICAgICAgICDljZjkvY3jga8gW21zZWNdXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgUHJvZ3Jlc3NDb3VudGVyUmVzdWx0IHtcclxuICAgICAgICBwYXNzVGltZTogbnVtYmVyOyAgICAgICAvLyDntYzpgY7mmYLplpNcclxuICAgICAgICByZW1haW5UaW1lOiBudW1iZXI7ICAgICAvLyDmrovjgormjqjlrprmmYLplpNcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBjbGFzcyBQcm9ncmVzc0NvdW50ZXJcclxuICAgICAqIEBicmllZiDpgLLmjZfjga7mmYLplpPjgpLmibHjgYbjg6bjg7zjg4bjgqPjg6rjg4bjgqPjgq/jg6njgrlcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGNsYXNzIFByb2dyZXNzQ291bnRlciB7XHJcblxyXG4gICAgICAgIHByaXZhdGUgX3NldHRpbmdzOiB7XHJcbiAgICAgICAgICAgIG1heDogbnVtYmVyO1xyXG4gICAgICAgICAgICBiZWdpblRpbWU6IG51bWJlcjtcclxuICAgICAgICAgICAgYWxsb3dJbmNyZW1lbnRlUmVtYWluOiBib29sZWFuO1xyXG4gICAgICAgICAgICBsYXN0UmVtYWluVGltZTogbnVtYmVyO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIGNvbnN0cnVjdG9yXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gW29wdGlvbnNdIOOCquODl+OCt+ODp+ODs1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGNvbnN0cnVjdG9yKG9wdGlvbnM/OiBQcm9ncmVzc0NvdW50ZXJPcHRpb25zKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVzZXQob3B0aW9ucyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDplovlp4vmmYLplpPjgpLliJ3mnJ/ljJZcclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgcmVzZXQob3B0aW9ucz86IFByb2dyZXNzQ291bnRlck9wdGlvbnMpOiB2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy5fc2V0dGluZ3MgPSB7XHJcbiAgICAgICAgICAgICAgICAuLi57XHJcbiAgICAgICAgICAgICAgICAgICAgbWF4OiAxMDAsXHJcbiAgICAgICAgICAgICAgICAgICAgYmVnaW5UaW1lOiBEYXRlLm5vdygpLFxyXG4gICAgICAgICAgICAgICAgICAgIGFsbG93SW5jcmVtZW50ZVJlbWFpbjogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgbGFzdFJlbWFpblRpbWU6IEluZmluaXR5LFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLCAuLi48YW55Pm9wdGlvbnNcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOe1jOmBjuaZgumWk+OBqOaOqOWumuaui+OCiuaZgumWk+OCkuWPluW+l+OBmeOCi1xyXG4gICAgICAgICAqIOmAsuaNl+WApOOBjCAwIOOBruWgtOWQiOOBr+OAgeaOqOWumuaui+OCiuaZgumWk+OBqyBJbmZpbml0eSDjgpLov5TjgZlcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSAgIHByb2dyZXNzIFtpbl0g6YCy5o2X5YCkXHJcbiAgICAgICAgICogQHJldHVybnMg57WM6YGO5pmC6ZaT44Go5o6o5a6a5q6L44KK5pmC6ZaTIFttc2VjXVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBjb21wdXRlKHByb2dyZXNzOiBudW1iZXIpOiBQcm9ncmVzc0NvdW50ZXJSZXN1bHQge1xyXG4gICAgICAgICAgICBjb25zdCBwYXNzVGltZSA9IERhdGUubm93KCkgLSB0aGlzLl9zZXR0aW5ncy5iZWdpblRpbWU7XHJcbiAgICAgICAgICAgIGxldCByZW1haW5UaW1lID0gSW5maW5pdHk7XHJcbiAgICAgICAgICAgIGlmIChudWxsICE9IHByb2dyZXNzICYmIDAgIT09IHByb2dyZXNzKSB7XHJcbiAgICAgICAgICAgICAgICByZW1haW5UaW1lID0gcGFzc1RpbWUgKiB0aGlzLl9zZXR0aW5ncy5tYXggLyBwcm9ncmVzcyAtIHBhc3NUaW1lO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9zZXR0aW5ncy5hbGxvd0luY3JlbWVudGVSZW1haW4gfHwgKHJlbWFpblRpbWUgPCB0aGlzLl9zZXR0aW5ncy5sYXN0UmVtYWluVGltZSkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3NldHRpbmdzLmxhc3RSZW1haW5UaW1lID0gcmVtYWluVGltZTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJlbWFpblRpbWUgPSB0aGlzLl9zZXR0aW5ncy5sYXN0UmVtYWluVGltZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHsgcGFzc1RpbWUsIHJlbWFpblRpbWUgfTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vIDxyZWZlcmVuY2UgdHlwZXM9XCJqcXVlcnlcIiAvPlxyXG4vLy8gPHJlZmVyZW5jZSB0eXBlcz1cImJhY2tib25lXCIgLz5cclxuXHJcbm5hbWVzcGFjZSBDRFAuVUkge1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGludGVyZmFjZSBMaXN0Vmlld09wdGlvbnNcclxuICAgICAqIEBicmllZiBMaXN0VmlldyDjga7liJ3mnJ/ljJbmg4XloLHjgpLmoLzntI3jgZnjgovjgqTjg7Pjgr/jg7zjg5XjgqfjgqTjgrnjgq/jg6njgrlcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBMaXN0Vmlld09wdGlvbnMge1xyXG4gICAgICAgIC8vISDkvb/nlKjjgZnjgosgSVNjcm9sbGVyIOOCkuWkieabtOOBmeOCi+WgtOWQiOOBq+aMh+WumiAgW2RlZmF1bHQ6IFNjcm9sbGVyTmF0aXZlLmdldEZhY3RvcnkoKV1cclxuICAgICAgICBzY3JvbGxlckZhY3Rvcnk/OiAoZWxlbWVudDogYW55LCBvcHRpb25zOiBMaXN0Vmlld09wdGlvbnMpID0+IElTY3JvbGxlcjtcclxuICAgICAgICBlbmFibGVIaWRkZW5QYWdlPzogYm9vbGVhbjsgICAgICAgICAvLyE8IHBsZWxvYWQg5a++6LGh44KSIHZpc2liaWxpdHk6IFwiaGlkZGVuXCIg44Gr44GZ44KL5aC05ZCI44GvIHRydWUuICAgICAgICAgICAgICAgIFtkZWZhdWx0OiBmYWxzZV1cclxuICAgICAgICBlbmFibGVUcmFuc2Zvcm1PZmZzZXQ/OiBib29sZWFuOyAgICAvLyE8IGxpc3QgaXRlbSDjga4gb2Zmc2V0IOOCkiB0cmFuc2Zvcm0g44Gn6Kit5a6a44GZ44KLICjjgYLjgb7jgorjgojjgY/jgarjgYQpICAgICAgICAgIFtkZWZhdWx0OiBmYWxzZV1cclxuICAgICAgICBzY3JvbGxNYXBSZWZyZXNoSW50ZXJ2YWw/OiBudW1iZXI7ICAvLyE8IHNjcm9sbCBtYXAg6aCY5Z+f44Gu5pu05paw56K66KqN6ZaT6ZqULiBpc2Nyb2xsIOetieOAgemdniBET00g5pON5L2c5pmC44Gr5L2/55SoICAgICAgICBbZGVmYXVsdDogMjAwXVxyXG4gICAgICAgIHNjcm9sbFJlZnJlc2hEaXN0YW5jZT86IG51bWJlcjsgICAgIC8vITwgTGlzdFZpZXcg5pu05paw5Yem55CG44KS6KGM44GGIHNjcm9sbCDnp7vli5Xph48gKOOCouODq+OCtOODquOCuuODoOimi+ebtOOBl+OCguimlumHjikgICAgICBbZGVmYXVsdDogMjAwXVxyXG4gICAgICAgIHBhZ2VQcmVwYXJlQ291bnQ/OiBudW1iZXI7ICAgICAgICAgIC8vITwg6KGo56S66aCY5Z+f5aSW44Gn5a6M5YWo44Gq54q25oWL44Gn6L+95Yqg44GV44KM44KLIHBhZ2Ug5pWwICjliY3mlrnjg7vlvozmlrnlkIjjgo/jgZvjgaYgMuWAjSkgICBbZGVmYXVsdDogM11cclxuICAgICAgICBwYWdlUHJlbG9hZENvdW50PzogbnVtYmVyOyAgICAgICAgICAvLyE8IOihqOekuumgmOWfn+WkluOBpyBoaWRkZW4g54q25oWL44Gn6L+95Yqg44GV44KM44KLIHBhZ2Ug5pWwICjliY3mlrnjg7vlvozmlrnlkIjjgo/jgZvjgaYgMuWAjSkgW2RlZmF1bHQ6IDFdXHJcbiAgICAgICAgZW5hYmxlQW5pbWF0aW9uPzogYm9vbGVhbjsgICAgICAgICAgLy8hPCDjgqLjg4vjg6Hjg7zjgrfjg6fjg7PjgpLmnInlirnjgavjgZnjgovloLTlkIjjga8gdHJ1ZS4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtkZWZhdWx0OiB0cnVlXVxyXG4gICAgICAgIGFuaW1hdGlvbkR1cmF0aW9uPzogbnVtYmVyOyAgICAgICAgIC8vITwg44Ki44OL44Oh44O844K344On44Oz44Gu6LK744KE44GZ5pmC6ZaTIChtc2VjKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbZGVmYXVsdDogMF1cclxuICAgICAgICBiYXNlRGVwdGg/OiBzdHJpbmc7ICAgICAgICAgICAgICAgICAvLyE8IOWfuua6luOBqOOBmeOCiyB6LWluZGV4LiBcImNvbGxhcHNlXCIg5pmC44Gu44Ki44OL44Oh44O844K344On44Oz5pmC44Gr5L2/55SoICAgICAgICAgICAgIFtkZWZhdWx0OiBhdXRvXVxyXG4gICAgICAgIGl0ZW1UYWdOYW1lPzogc3RyaW5nOyAgICAgICAgICAgICAgIC8vITwgTGlzdEl0ZW1WaWV3IOOBjOS9v+eUqOOBmeOCi+OCv+OCsOWQjSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW2RlZmF1bHQ6IGxpXVxyXG4gICAgICAgIHJlbW92ZUl0ZW1XaXRoVHJhbnNpdGlvbj86IGJvb2xlYW47IC8vITwgcmVtb3ZlSXRlbSgpIOaZguOBq+W/heimgeOBq+W/nOOBmOOBpuiHquWLleOBpyB0cmFuc2l0aW9uIOOCkuOBi+OBkeOCi+WgtOWQiOOBryB0cnVlICAgIFtkZWZhdWx0OiB0cnVlXVxyXG4gICAgICAgIC8vISDpnZ7jgqLjgq/jg4bjgqPjg5bjgaogc2Nyb2xsIG1hcCDjgavlr77jgZfjgaYgRHVtbXkg44KS5L2/55So44GZ44KL5aC05ZCI44GvIHRydWUuIChmbGlwc25hcCDliIfjgormm7/jgYjmmYLnrYkuIOWKueaenOOBr+OBguOBvuOCiuOBquOBlykgIFtkZWZhdWx0OiBmYWxzZV1cclxuICAgICAgICB1c2VEdW1teUluYWN0aXZlU2Nyb2xsTWFwPzogYm9vbGVhbjtcclxuICAgIH1cclxuXHJcbiAgICAvL19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18vL1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGludGVyZmFjZSBJTGlzdFZpZXdGcmFtZXdvcmtcclxuICAgICAqIEBicmllZiBMaXN0VmlldyBGcmFtZXdvcmsg44GM5L2/55So44GZ44KL44Kk44Oz44K/44O844OV44Kn44Kk44K55a6a576pXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgSUxpc3RWaWV3RnJhbWV3b3JrIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBTY3JvbGwgTWFwIOOBrumrmOOBleOCkuWPluW+l1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybiB7TnVtYmVyfSDnj77lnKjjga7pq5jjgZUgW3B4XVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGdldFNjcm9sbE1hcEhlaWdodCgpOiBudW1iZXI7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFNjcm9sbCBNYXAg44Gu6auY44GV44KS5pu05pawXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gZGVsdGUge051bWJlcn0gW2luXSDlpInljJbph4/jgpLmjIflrppcclxuICAgICAgICAgKi9cclxuICAgICAgICB1cGRhdGVTY3JvbGxNYXBIZWlnaHQoZGVsdGE6IG51bWJlcik6IHZvaWQ7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOWGhemDqCBQcm9maWxlIOOBruabtOaWsFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGZyb20ge051bWJlcn0gW2luXSDmm7TmlrDplovlp4vjgqTjg7Pjg4fjg4Pjgq/jgrnjgpLmjIflrppcclxuICAgICAgICAgKi9cclxuICAgICAgICB1cGRhdGVQcm9maWxlcyhmcm9tOiBudW1iZXIpOiB2b2lkO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBTY3JvbGwgTWFwIEVsZW1lbnQg44KS5Y+W5b6XXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJuIHtqUXVlcnl9IHNjcm9sbCBtYXAgZWxlbWVudFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGdldFNjcm9sbE1hcEVsZW1lbnQoKTogSlF1ZXJ5O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDjg6rjgrXjgqTjgq/jg6vlj6/og73jgaogRWxlbWVudCDjgpLlj5blvpdcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm4ge2pRdWVyeX0gcmVjeWNsZSBlbGVtZW50c1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZpbmRSZWN5Y2xlRWxlbWVudHMoKTogSlF1ZXJ5O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBMaXN0Vmlld09wdGlvbnMg44KS5Y+W5b6XXHJcbiAgICAgICAgICog44GZ44G544Gm44Gu44OX44Ot44OR44OG44Kj44Ki44Kv44K744K544KS5L+d6Ki844GZ44KL44CCXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJuIHtMaXN0Vmlld09wdGlvbnN9IG9wdGlvbiDjgqrjg5bjgrjjgqfjgq/jg4hcclxuICAgICAgICAgKi9cclxuICAgICAgICBnZXRMaXN0Vmlld09wdGlvbnMoKTogTGlzdFZpZXdPcHRpb25zO1xyXG4gICAgfVxyXG5cclxuICAgIC8vX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXy8vXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAaW50ZXJmYWNlIElTY3JvbGxlclxyXG4gICAgICogQGJyaWVmIFNjcm9sbGVyIOOCpOODs+OCv+ODvOODleOCp+OCpOOCuVxyXG4gICAgICovXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIElTY3JvbGxlciB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogU2Nyb2xsZXIg44Gu5Z6L5oOF5aCx44KS5Y+W5b6XXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZ2V0VHlwZSgpOiBzdHJpbmc7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIHBvc2l0aW9uIOWPluW+l1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybiB7TnVtYmVyfSA6IHBvc2l0aW9uXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZ2V0UG9zKCk6IG51bWJlcjtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogcG9zaXRpb24g44Gu5pyA5aSn5YCk44KS5Y+W5b6XXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJuIHtOdW1iZXJ9IDogcG9zaXRpb25cclxuICAgICAgICAgKi9cclxuICAgICAgICBnZXRQb3NNYXgoKTogbnVtYmVyO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDjgqTjg5njg7Pjg4jnmbvpjLJcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB0eXBlIHtTdHJpbmd9ICAgW2luXSBldmVudCDlkI1cclxuICAgICAgICAgKiBAcGFyYW0gZnVuYyB7RnVuY3Rpb259IFtpbl0gZXZlbnQgaGFuZGxlclxyXG4gICAgICAgICAqIEByZXR1cm4ge051bWJlcn0gOiBwb3NpdGlvblxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIG9uKHR5cGU6IHN0cmluZywgZnVuYzogKGV2ZW50OiBKUXVlcnkuRXZlbnQpID0+IHZvaWQpOiB2b2lkO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDjgqTjg5njg7Pjg4jnmbvpjLLop6PpmaRcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB0eXBlIHtTdHJpbmd9ICAgW2luXSBldmVudCDlkI1cclxuICAgICAgICAgKiBAcGFyYW0gZnVuYyB7RnVuY3Rpb259IFtpbl0gZXZlbnQgaGFuZGxlclxyXG4gICAgICAgICAqIEByZXR1cm4ge051bWJlcn0gOiBwb3NpdGlvblxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIG9mZih0eXBlOiBzdHJpbmcsIGZ1bmM6IChldmVudDogSlF1ZXJ5LkV2ZW50KSA9PiB2b2lkKTogdm9pZDtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog44K544Kv44Ot44O844Or5L2N572u44KS5oyH5a6aXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gcG9zICAgICB7TnVtYmVyfSAgW2luXSDjgrnjgq/jg63jg7zjg6vkvY3nva4gKDAgLSBwb3NNYXgpXHJcbiAgICAgICAgICogQHBhcmFtIGFuaW1hdGUge0Jvb2xlYW59IFtpbl0g44Ki44OL44Oh44O844K344On44Oz44Gu5pyJ54ShXHJcbiAgICAgICAgICogQHBhcmFtIHRpbWUgICAge051bWJlcn0gIFtpbl0g44Ki44OL44Oh44O844K344On44Oz44Gr6LK744KE44GZ5pmC6ZaTIFttc2VjXVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHNjcm9sbFRvKHBvczogbnVtYmVyLCBhbmltYXRlPzogYm9vbGVhbiwgdGltZT86IG51bWJlcik6IHZvaWQ7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFNjcm9sbGVyIOOBrueKtuaFi+abtOaWsFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHVwZGF0ZSgpOiB2b2lkO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBTY3JvbGxlciDjga7noLTmo4RcclxuICAgICAgICAgKi9cclxuICAgICAgICBkZXN0cm95KCk6IHZvaWQ7XHJcbiAgICB9XHJcblxyXG4gICAgLy9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fLy9cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBpbnRlcmZhY2UgSVNjcm9sbGFibGVcclxuICAgICAqIEBicmllZiBTY3JvbGwg44Kk44Oz44K/44O844OV44Kn44Kk44K5XHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgSVNjcm9sbGFibGUge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOOCueOCr+ODreODvOODq+OCpOODmeODs+ODiOODj+ODs+ODieODqeioreWumi/op6PpmaRcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBoYW5kbGVyIHtGdW5jdGlvbn0gW2luXSDjg4/jg7Pjg4njg6nplqLmlbBcclxuICAgICAgICAgKiBAcGFyYW0gb24gICAgICB7Qm9vbGVhbn0gIFtpbl0gdHJ1ZTog6Kit5a6aIC8gZmFsc2U6IOino+mZpFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHNldFNjcm9sbEhhbmRsZXIoaGFuZGxlcjogKGV2ZW50OiBKUXVlcnkuRXZlbnQpID0+IHZvaWQsIG9uOiBib29sZWFuKTogdm9pZDtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog44K544Kv44Ot44O844Or57WC5LqG44Kk44OZ44Oz44OI44OP44Oz44OJ44Op6Kit5a6aL+ino+mZpFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGhhbmRsZXIge0Z1bmN0aW9ufSBbaW5dIOODj+ODs+ODieODqemWouaVsFxyXG4gICAgICAgICAqIEBwYXJhbSBvbiAgICAgIHtCb29sZWFufSAgW2luXSB0cnVlOiDoqK3lrpogLyBmYWxzZTog6Kej6ZmkXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgc2V0U2Nyb2xsU3RvcEhhbmRsZXIoaGFuZGxlcjogKGV2ZW50OiBKUXVlcnkuRXZlbnQpID0+IHZvaWQsIG9uOiBib29sZWFuKTogdm9pZDtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog44K544Kv44Ot44O844Or5L2N572u44KS5Y+W5b6XXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJuIHtOdW1iZXJ9IDogcG9zaXRpb25cclxuICAgICAgICAgKi9cclxuICAgICAgICBnZXRTY3JvbGxQb3MoKTogbnVtYmVyO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDjgrnjgq/jg63jg7zjg6vkvY3nva7jga7mnIDlpKflgKTjgpLlj5blvpdcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm4ge051bWJlcn0gOiBwb3NpdGlvblxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGdldFNjcm9sbFBvc01heCgpOiBudW1iZXI7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOOCueOCr+ODreODvOODq+S9jee9ruOCkuaMh+WumlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHBvcyAgICAge051bWJlcn0gIFtpbl0g44K544Kv44Ot44O844Or5L2N572uICgwIC0gcG9zTWF4KVxyXG4gICAgICAgICAqIEBwYXJhbSBhbmltYXRlIHtCb29sZWFufSBbaW5dIOOCouODi+ODoeODvOOCt+ODp+ODs+OBruacieeEoVxyXG4gICAgICAgICAqIEBwYXJhbSB0aW1lICAgIHtOdW1iZXJ9ICBbaW5dIOOCouODi+ODoeODvOOCt+ODp+ODs+OBq+iyu+OChOOBmeaZgumWkyBbbXNlY11cclxuICAgICAgICAgKi9cclxuICAgICAgICBzY3JvbGxUbyhwb3M6IG51bWJlciwgYW5pbWF0ZT86IGJvb2xlYW4sIHRpbWU/OiBudW1iZXIpOiB2b2lkO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDmjIflrprjgZXjgozjgZ8gTGlzdEl0ZW1WaWV3IOOBruihqOekuuOCkuS/neiovFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGluZGV4ICAge051bWJlcn0gICAgICAgICAgICAgICBbaW5dIExpc3RJdGVtVmlldyDjga7jgqTjg7Pjg4fjg4Pjgq/jgrlcclxuICAgICAgICAgKiBAcGFyYW0gb3B0aW9ucyB7RW5zdXJlVmlzaWJsZU9wdGlvbnN9IFtpbl0g44Kq44OX44K344On44OzXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZW5zdXJlVmlzaWJsZShpbmRleDogbnVtYmVyLCBvcHRpb25zPzogRW5zdXJlVmlzaWJsZU9wdGlvbnMpOiB2b2lkO1xyXG4gICAgfVxyXG5cclxuICAgIC8vX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXy8vXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAaW50ZXJmYWNlIElCYWNrdXBSZXN0b3JlXHJcbiAgICAgKiBAYnJpZWYgQmFja3VwL1Jlc3RvcmUg44Gu44Kk44Oz44K/44O844OV44Kn44Kk44K5XHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgSUJhY2t1cFJlc3RvcmUge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOWGhemDqOODh+ODvOOCv+OCkuODkOODg+OCr+OCouODg+ODl1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGtleSB7U3RyaW5nfSBbaW5dIOODkOODg+OCr+OCouODg+ODl+OCreODvOOCkuaMh+WumlxyXG4gICAgICAgICAqIEByZXR1cm4ge0Jvb2xlYW59IHRydWU6IOaIkOWKnyAvIGZhbHNlOiDlpLHmlZdcclxuICAgICAgICAgKi9cclxuICAgICAgICBiYWNrdXAoa2V5OiBzdHJpbmcpOiBib29sZWFuO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDlhoXpg6jjg4fjg7zjgr/jgpLjg6rjgrnjg4jjgqJcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBrZXkgICAgIHtTdHJpbmd9ICBbaW5dIOODkOODg+OCr+OCouODg+ODl+OCreODvOOCkuaMh+WumlxyXG4gICAgICAgICAqIEBwYXJhbSByZWJ1aWxkIHtCb29sZWFufSBbaW5dIHJlYnVpbGQg44KS5a6f6KGM44GZ44KL5aC05ZCI44GvIHRydWUg44KS5oyH5a6aXHJcbiAgICAgICAgICogQHJldHVybiB7Qm9vbGVhbn0gdHJ1ZTog5oiQ5YqfIC8gZmFsc2U6IOWkseaVl1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHJlc3RvcmUoa2V5OiBzdHJpbmcsIHJlYnVpbGQ6IGJvb2xlYW4pOiBib29sZWFuO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDjg5Djg4Pjgq/jgqLjg4Pjg5fjg4fjg7zjgr/jga7mnInnhKFcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBrZXkge1N0cmluZ30gW2luXSDjg5Djg4Pjgq/jgqLjg4Pjg5fjgq3jg7zjgpLmjIflrppcclxuICAgICAgICAgKiBAcmV0dXJuIHtCb29sZWFufSB0cnVlOiDmnIkgLyBmYWxzZTog54ShXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgaGFzQmFja3VwKGtleTogc3RyaW5nKTogYm9vbGVhbjtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog44OQ44OD44Kv44Ki44OD44OX44OH44O844K/44Gu56C05qOEXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0ga2V5IHtTdHJpbmd9IFtpbl0g44OQ44OD44Kv44Ki44OD44OX44Kt44O844KS5oyH5a6aXHJcbiAgICAgICAgICogQHJldHVybiB7Qm9vbGVhbn0gdHJ1ZTog5oiQ5YqfIC8gZmFsc2U6IOWkseaVl1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGNsZWFyQmFja3VwKGtleT86IHN0cmluZyk6IGJvb2xlYW47XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOODkOODg+OCr+OCouODg+ODl+ODh+ODvOOCv+OBq+OCouOCr+OCu+OCuVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybiB7YW55fSDjg5Djg4Pjgq/jgqLjg4Pjg5fjg4fjg7zjgr/jgqrjg5bjgrjjgqfjgq/jg4hcclxuICAgICAgICAgKi9cclxuICAgICAgICBiYWNrdXBEYXRhOiBhbnk7XHJcbiAgICB9XHJcblxyXG4gICAgLy9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fLy9cclxuXHJcbiAgICBleHBvcnQgdHlwZSBWaWV3Q29uc3RydWN0b3IgPSBuZXcgKG9wdGlvbnM/OiBCYWNrYm9uZS5WaWV3T3B0aW9uczxCYWNrYm9uZS5Nb2RlbD4pID0+IEJhY2tib25lLlZpZXc8QmFja2JvbmUuTW9kZWw+O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGludGVyZmFjZSBJQ29tcG9zYWJsZVZpZXdcclxuICAgICAqIEBicmllZiBJQ29tcG9zYWJsZVZpZXdTdGF0aWMg44Gu44OX44Ot44Kt44K344Kk44Oz44K/44O844OV44Kn44Kk44K5IChleHBlcmltZW50YWwpXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgSUNvbXBvc2FibGVWaWV3IHtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBpbnRlcmZhY2UgSUNvbXBvc2FibGVWaWV3U3RhdGljXHJcbiAgICAgKiBAYnJpZWYgVmlldyBjb21wb3NlIOOCpOODs+OCv+ODvOODleOCp+OCpOOCuVxyXG4gICAgICovXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIElDb21wb3NhYmxlVmlld1N0YXRpYyB7XHJcbiAgICAgICAgbmV3ICgpOiBJQ29tcG9zYWJsZVZpZXc7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog44GZ44Gn44Gr5a6a576p44GV44KM44GfIEJhY2tib25lLlZpZXcg44KS5Z+65bqV44Kv44Op44K544Gr6Kit5a6a44GX44CBZXh0ZW5kIOOCkuWun+ihjOOBmeOCi+OAglxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGRlcml2ZXMgICAgICAgICB7QmFja2JvbmUuVmlld3xCYWNrYm9uZS5WaWV3W119IFtpbl0g5ZCI5oiQ5YWD44GuIFZpZXcg44Kv44Op44K5XHJcbiAgICAgICAgICogQHBhcmFtIHByb3BlcnRpZXMgICAgICB7T2JqZWN0fSAgICAgICAgICAgICAgICAgICAgICAgIFtpbl0gcHJvdG90eXBlIOODl+ODreODkeODhuOCo1xyXG4gICAgICAgICAqIEBwYXJhbSBjbGFzc1Byb3BlcnRpZXMge09iamVjdH0gICAgICAgICAgICAgICAgICAgICAgICBbaW5dIHN0YXRpYyDjg5fjg63jg5Hjg4bjgqNcclxuICAgICAgICAgKiBAcmV0dXJuIHtCYWNrYm9uZS5WaWV3fEJhY2tib25lLlZpZXdbXX0g5paw6KaP44Gr55Sf5oiQ44GV44KM44GfIFZpZXcg44Gu44Kz44Oz44K544OI44Op44Kv44K/XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgY29tcG9zZShkZXJpdmVzOiBWaWV3Q29uc3RydWN0b3IgfCBWaWV3Q29uc3RydWN0b3JbXSwgcHJvcGVydGllczogYW55LCBjbGFzc1Byb3BlcnRpZXM/OiBhbnkpOiBWaWV3Q29uc3RydWN0b3I7XHJcbiAgICB9XHJcblxyXG4gICAgLy9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fLy9cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBpbnRlcmZhY2UgVXBkYXRlSGVpZ2h0T3B0aW9uc1xyXG4gICAgICogQGJyaWVmIElMaXN0SXRlbVZpZXcudXBkYXRlSGVpZ2h0KCkg44Gr5rih44Gb44KL44Kq44OX44K344On44OzXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgVXBkYXRlSGVpZ2h0T3B0aW9ucyB7XHJcbiAgICAgICAgcmVmbGVjdEFsbD86IGJvb2xlYW47ICAgIC8vITwgbGluZSDjga7pq5jjgZXmm7TmlrDmmYLjgavlvbHpn7/jgZnjgovjgZnjgbnjgabjga4gTGluZVByb2ZpbGUg44Gu5YaN6KiI566X44KS6KGM44GG5aC05ZCI44GvIHRydWVcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBpbnRlcmZhY2UgSUxpc3RJdGVtVmlld1xyXG4gICAgICogQGJyaWVmICAgICBMaXN0VmlldyDjga4gMeihjOWIhuOCkuani+aIkOOBmeOCiyBDaGlsZCBWaWV3IOOCpOODs+OCv+ODvOODleOCp+OCpOOCuVxyXG4gICAgICovXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIElMaXN0SXRlbVZpZXcge1xyXG4gICAgICAgIC8vISDoh6rouqvjga4gTGluZSDjgqTjg7Pjg4fjg4Pjgq/jgrnjgpLlj5blvpdcclxuICAgICAgICBnZXRJbmRleCgpOiBudW1iZXI7XHJcbiAgICAgICAgLy8hIOiHqui6q+OBq+aMh+WumuOBleOCjOOBn+mrmOOBleOCkuWPluW+l1xyXG4gICAgICAgIGdldFNwZWNpZmllZEhlaWdodCgpOiBudW1iZXI7XHJcbiAgICAgICAgLy8hIGNoaWxkIG5vZGUg44GM5a2Y5Zyo44GZ44KL44GL5Yik5a6aXHJcbiAgICAgICAgaGFzQ2hpbGROb2RlKCk6IGJvb2xlYW47XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOmrmOOBleOCkuabtOaWsFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIG5ld0hlaWdodCB7TnVtYmVyfSAgICAgICAgICAgICAgW2luXSDmlrDjgZfjgYTpq5jjgZVcclxuICAgICAgICAgKiBAcGFyYW0gb3B0aW9ucyAgIHtVcGRhdGVIZWlnaHRPcHRpb25zfSBbaW5dIGxpbmUg44Gu6auY44GV5pu05paw5pmC44Gr5b2x6Z+/44GZ44KL44GZ44G544Gm44GuIExpbmVQcm9maWxlIOOBruWGjeioiOeul+OCkuihjOOBhuWgtOWQiOOBryB7IHJlZmxlY3RBbGw6IHRydWUgfVxyXG4gICAgICAgICAqIEByZXR1cm4ge0lMaXN0SXRlbVZpZXd9IOOCpOODs+OCueOCv+ODs+OCuVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHVwZGF0ZUhlaWdodChuZXdIZWlnaHQ6IG51bWJlciwgb3B0aW9ucz86IFVwZGF0ZUhlaWdodE9wdGlvbnMpOiBJTGlzdEl0ZW1WaWV3O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGludGVyZmFjZSBCYXNlTGlzdEl0ZW1WaWV3XHJcbiAgICAgKiBAYnJpZWYgICAgIElMaXN0SXRlbVZpZXcg44GuIGFsaWFzXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgQmFzZUxpc3RJdGVtVmlldyBleHRlbmRzIElMaXN0SXRlbVZpZXcsIEJhY2tib25lLlZpZXc8QmFja2JvbmUuTW9kZWw+IHsgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGludGVyZmFjZSBFbnN1cmVWaXNpYmxlT3B0aW9uc1xyXG4gICAgICogQGJyaWVmIElMaXN0Vmlldy5lbnN1cmVWaXNpYmxlKCkg44Gr5rih44Gb44KL44Kq44OX44K344On44OzXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgRW5zdXJlVmlzaWJsZU9wdGlvbnMge1xyXG4gICAgICAgIHBhcnRpYWxPSz86IGJvb2xlYW47ICAgIC8vITwg6YOo5YiG55qE6KGo56S644KS6Kix5Y+v44GZ44KL5aC05ZCIIHRydWUsIGRlZmF1bHQ6IHRydWUuXHJcbiAgICAgICAgc2V0VG9wPzogYm9vbGVhbjsgICAgICAgLy8hPCDlvLfliLbnmoTjgavjgrnjgq/jg63jg7zjg6vpoJjln5/jga7kuIrpg6jjgavnp7vli5XjgZnjgovloLTlkIggdHJ1ZSwgZGVmYXVsdDogZmFsc2UuXHJcbiAgICAgICAgYW5pbWF0ZT86IGJvb2xlYW47ICAgICAgLy8hPCDjgqLjg4vjg6Hjg7zjgrfjg6fjg7PjgZnjgovloLTlkIggdHJ1ZS4gZGVmYXVsdDogTGlzdFZpZXdPcHRpb25zLmVuYWJsZUFuaW1hdGlvbiDjga7oqK3lrprjgajlkIzmnJ9cclxuICAgICAgICB0aW1lPzogbnVtYmVyOyAgICAgICAgICAvLyE8IOOCouODi+ODoeODvOOCt+ODp+ODs+OBq+iyu+OChOOBmeaZgumWkyBbbXNlY11cclxuICAgICAgICBjYWxsYmFjaz86ICgpID0+IHZvaWQ7ICAvLyE8IOOCouODi+ODoeODvOOCt+ODp+ODs+e1guS6huOBruOCv+OCpOODn+ODs+OCsOOBp+OCs+ODvOODq+OBleOCjOOCiy4gKOeWkeS8vOeahClcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBpbnRlcmZhY2UgSUxpc3RWaWV3XHJcbiAgICAgKiBAYnJpZWYgTGlzdFZpZXcg44Gu44Kk44Oz44K/44O844OV44Kn44Kk44K5XHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgSUxpc3RWaWV3IGV4dGVuZHMgSVNjcm9sbGFibGUsIElCYWNrdXBSZXN0b3JlIHtcclxuXHJcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgICAgICAvLyBQcm9maWxlIOeuoeeQhlxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDliJ3mnJ/ljJbmuIjjgb/jgYvliKTlrppcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm4ge0Jvb2xlYW59IHRydWU6IOWIneacn+WMlua4iOOBvyAvIGZhbHNlOiDmnKrliJ3mnJ/ljJZcclxuICAgICAgICAgKi9cclxuICAgICAgICBpc0luaXRpYWxpemVkKCk6IGJvb2xlYW47XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEl0ZW0g55m76YyyXHJcbiAgICAgICAgICog44OX44Ot44OR44OG44Kj44KS5oyH5a6a44GX44Gm44CBTGlzdEl0ZW0g44KS566h55CGXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gaGVpZ2h0ICAgICAge051bWJlcn0gICBbaW5dIOODqeOCpOODs+OBrumrmOOBlVxyXG4gICAgICAgICAqIEBwYXJhbSBpbml0aWFsaXplciB7RnVuY3Rpb259IFtpbl0gTGlzdEl0ZW1WaWV3IOa0vueUn+OCr+ODqeOCueOBruOCs+ODs+OCueODiOODqeOCr+OCv1xyXG4gICAgICAgICAqIEBwYXJhbSBpbmZvICAgICAgICB7T2JqZWN0fSAgIFtpbl0gaW5pdGlhbGl6ZXIg44Gr5rih44GV44KM44KL44Kq44OX44K344On44Oz5byV5pWwXHJcbiAgICAgICAgICogQHBhcmFtIGluc2VydFRvICAgIHtOdW1iZXJ9ICAgW2luXSDjg6njgqTjg7Pjga7mjL/lhaXkvY3nva7jgpLjgqTjg7Pjg4fjg4Pjgq/jgrnjgafmjIflrppcclxuICAgICAgICAgKi9cclxuICAgICAgICBhZGRJdGVtKGhlaWdodDogbnVtYmVyLCBpbml0aWFsaXplcjogbmV3IChvcHRpb25zPzogYW55KSA9PiBCYXNlTGlzdEl0ZW1WaWV3LCBpbmZvOiBhbnksIGluc2VydFRvPzogbnVtYmVyKTogdm9pZDtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog5oyH5a6a44GX44GfIEl0ZW0g44KS5YmK6ZmkXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gaW5kZXgge051bWJlcnxOdW1iZXJbXX0gW2luXSDop6PpmaTplovlp4vjga7jgqTjg7Pjg4fjg4Pjgq/jgrnjgpLmjIflrpouIOmFjeWIl+eJiOOBryByZXZlcnNlIGluZGV4IOOCkuaMh+WumuOBmeOCi+OBu+OBhuOBjOWKueeOh+eahFxyXG4gICAgICAgICAqIEBwYXJhbSBzaXplICB7TnVtYmVyfSAgICAgICAgICBbaW5dIOino+mZpOOBmeOCi+ODqeOCpOODs+OBrue3j+aVsC4g5pei5a6aOiAxXHJcbiAgICAgICAgICogQHBhcmFtIGRlbGF5IHtOdW1iZXJ9ICAgICAgICAgIFtpbl0g5a6f6Zqb44Gr6KaB57Sg44KS5YmK6Zmk44GZ44KLIGRlbGF5IHRpbWUg5pei5a6aOiAwICjljbPmmYLliYrpmaQpXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcmVtb3ZlSXRlbShpbmRleDogbnVtYmVyLCBzaXplPzogbnVtYmVyLCBkZWxheT86IG51bWJlcik6IHZvaWQ7XHJcbiAgICAgICAgcmVtb3ZlSXRlbShpbmRleDogbnVtYmVyW10sIGRlbGF5PzogbnVtYmVyKTogdm9pZDtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog5oyH5a6a44GX44GfIEl0ZW0g44Gr6Kit5a6a44GX44Gf5oOF5aCx44KS5Y+W5b6XXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gdGFyZ2V0IHtOdW1iZXJ8SlF1ZXJ5LkV2ZW50fSBbaW5dIOitmOWIpeWtkC4gW2luZGV4IHwgZXZlbnQgb2JqZWN0XVxyXG4gICAgICAgICAqIEByZXR1cm4ge09iamVjdH0gX2FkZExpbmUoKSDjgavmjIflrprjgZfjgZ8gaW5mbyDjgqrjg5bjgrjjgqfjgq/jg4hcclxuICAgICAgICAgKi9cclxuICAgICAgICBnZXRJdGVtSW5mbyh0YXJnZXQ6IG51bWJlcik6IGFueTtcclxuICAgICAgICBnZXRJdGVtSW5mbyh0YXJnZXQ6IEpRdWVyeS5FdmVudCk6IGFueTtcclxuXHJcbiAgICAgICAgLy8hIOOCouOCr+ODhuOCo+ODluODmuODvOOCuOOCkuabtOaWsFxyXG4gICAgICAgIHJlZnJlc2goKTogdm9pZDtcclxuICAgICAgICAvLyEg5pyq44Ki44K144Kk44Oz44Oa44O844K444KS5qeL56+JXHJcbiAgICAgICAgdXBkYXRlKCk6IHZvaWQ7XHJcbiAgICAgICAgLy8hIOODmuODvOOCuOOCouOCteOCpOODs+OCkuWGjeani+aIkFxyXG4gICAgICAgIHJlYnVpbGQoKTogdm9pZDtcclxuICAgICAgICAvLyEg566h6L2E44OH44O844K/44KS56C05qOEXHJcbiAgICAgICAgcmVsZWFzZSgpOiB2b2lkO1xyXG5cclxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgICAgIC8vIFByb3BlcnRpZXM6XHJcblxyXG4gICAgICAgIC8vISBjb3JlIGZyYW1ld29yayBhY2Nlc3NcclxuICAgICAgICBjb3JlOiBJTGlzdFZpZXdGcmFtZXdvcms7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAaW50ZXJmYWNlIElMaXN0Vmlld1xyXG4gICAgICogQGJyaWVmIExpc3RWaWV3IOOBruOCpOODs+OCv+ODvOODleOCp+OCpOOCuVxyXG4gICAgICovXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIElMaXN0VmlldyB7XHJcbiAgICAgICAgLy8hIOeZu+mMsiBmcmFtZXdvcmsg44GM5L2/55So44GZ44KLXHJcbiAgICAgICAgX2FkZExpbmU/KF9saW5lOiBMaW5lUHJvZmlsZSwgaW5zZXJ0VG8/OiBudW1iZXIpOiB2b2lkO1xyXG4gICAgICAgIF9hZGRMaW5lPyhfbGluZTogTGluZVByb2ZpbGVbXSwgaW5zZXJ0VG8/OiBudW1iZXIpOiB2b2lkO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGludGVyZmFjZSBCYXNlTGlzdFZpZXdcclxuICAgICAqIEBicmllZiAgICAgSUxpc3RWaWV3IOOBriBhbGlhc1xyXG4gICAgICovXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIEJhc2VMaXN0VmlldyBleHRlbmRzIElMaXN0VmlldywgQmFja2JvbmUuVmlldzxCYWNrYm9uZS5Nb2RlbD4geyB9XHJcblxyXG4gICAgLy9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fLy9cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBpbnRlcmZhY2UgSVN0YXR1c01hbmFnZXJcclxuICAgICAqIEBicmllZiDnirbmhYvnrqHnkIbjgqTjg7Pjgr/jg7zjg5XjgqfjgqTjgrlcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBJU3RhdHVzTWFuYWdlciB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog54q25oWL5aSJ5pWw44Gu5Y+C54Wn44Kr44Km44Oz44OI44Gu44Kk44Oz44Kv44Oq44Oh44Oz44OIXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gc3RhdHVzIHtTdHJpbmd9IFtpbl0g54q25oWL6K2Y5Yil5a2QXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgc3RhdHVzQWRkUmVmKHN0YXR1czogc3RyaW5nKTogbnVtYmVyO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDnirbmhYvlpInmlbDjga7lj4Lnhafjgqvjgqbjg7Pjg4jjga7jg4fjgq/jg6rjg6Hjg7Pjg4hcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBzdGF0dXMge1N0cmluZ30gW2luXSDnirbmhYvorZjliKXlrZBcclxuICAgICAgICAgKi9cclxuICAgICAgICBzdGF0dXNSZWxlYXNlKHN0YXR1czogc3RyaW5nKTogbnVtYmVyO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDlh6bnkIbjgrnjgrPjg7zjg5fmr47jgavnirbmhYvlpInmlbDjgpLoqK3lrppcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBzdGF0dXMgICB7U3RyaW5nfSAgIFtpbl0g54q25oWL6K2Y5Yil5a2QXHJcbiAgICAgICAgICogQHBhcmFtIGNhbGxiYWNrIHtGdW5jdGlvbn0gW2luXSDlh6bnkIbjgrPjg7zjg6vjg5Djg4Pjgq9cclxuICAgICAgICAgKi9cclxuICAgICAgICBzdGF0dXNTY29wZShzdGF0dXM6IHN0cmluZywgY2FsbGJhY2s6ICgpID0+IHZvaWQpOiB2b2lkO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDmjIflrprjgZfjgZ/nirbmhYvkuK3jgafjgYLjgovjgYvnorroqo1cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBzdGF0dXMge1N0cmluZ30gICBbaW5dIOeKtuaFi+itmOWIpeWtkFxyXG4gICAgICAgICAqIEByZXR1cm4ge0Jvb2xlYW59IHRydWU6IOeKtuaFi+WGhSAvIGZhbHNlOiDnirbmhYvlpJZcclxuICAgICAgICAgKi9cclxuICAgICAgICBpc1N0YXR1c0luKHN0YXR1czogc3RyaW5nKTogYm9vbGVhbjtcclxuICAgIH1cclxuXHJcbiAgICAvL19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18vL1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGludGVyZmFjZSBJRXhwYW5kTWFuYWdlclxyXG4gICAgICogQGJyaWVmIOmWi+mWieeuoeeQhuOCpOODs+OCv+ODvOODleOCp+OCpOOCuVxyXG4gICAgICovXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIElFeHBhbmRNYW5hZ2VyIGV4dGVuZHMgSUJhY2t1cFJlc3RvcmUsIElTdGF0dXNNYW5hZ2VyIHtcclxuICAgICAgICBsYXlvdXRLZXk6IHN0cmluZzsgICAgLy8gbGF5b3V0IGtleSAocG9ydHJhdGUvbGFuZHNjYXBl44GU44Go44GrIGxheW91dOaDheWgseOBq+OCouOCr+OCu+OCuSlcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog5paw6KaPIEdyb3VwUHJvZmlsZSDjgpLkvZzmiJBcclxuICAgICAgICAgKiDnmbvpjLLmuIjjgb/jga7loLTlkIjjga/jgZ3jga7jgqrjg5bjgrjjgqfjgq/jg4jjgpLov5TljbRcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJtYSBpZCB7U3RyaW5nfSBbaW5dIOaWsOimj+OBq+S9nOaIkOOBmeOCiyBHcm91cCBJRCDjgpLmjIflrpouIOaMh+WumuOBl+OBquOBhOWgtOWQiOOBr+iHquWLleWJsuOCiuaMr+OCilxyXG4gICAgICAgICAqIEByZXR1cm4ge0dyb3VwUHJvZmlsZX0gR3JvdXBQcm9maWxlIOOCpOODs+OCueOCv+ODs+OCuVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIG5ld0dyb3VwKGlkPzogc3RyaW5nKTogR3JvdXBQcm9maWxlO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDnmbvpjLLmuIjjgb8gR3JvdXAg44KS5Y+W5b6XXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFybWEgaWQge1N0cmluZ30gW2luXSDlj5blvpfjgZnjgosgR3JvdXAgSUQg44KS5oyH5a6aXHJcbiAgICAgICAgICogQHJldHVybiB7R3JvdXBQcm9maWxlfSBHcm91cFByb2ZpbGUg44Kk44Oz44K544K/44Oz44K5IC8gbnVsbFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGdldEdyb3VwKGlkOiBzdHJpbmcpOiBHcm91cFByb2ZpbGU7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOesrDHpmo7lsaTjga4gR3JvdXAg55m76YyyXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gdG9wR3JvdXAge0dyb3VwUHJvZmlsZX0gW2luXSDmp4vnr4nmuIjjgb8gR3JvdXBQcm9maWxlIOOCpOODs+OCueOCv+ODs+OCuVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHJlZ2lzdGVyVG9wR3JvdXAodG9wR3JvdXA6IEdyb3VwUHJvZmlsZSk6IHZvaWQ7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOesrDHpmo7lsaTjga4gR3JvdXAg44KS5Y+W5b6XXHJcbiAgICAgICAgICog44Kz44OU44O86YWN5YiX44GM6L+U44GV44KM44KL44Gf44KB44CB44Kv44Op44Kk44Ki44Oz44OI44Gv44Kt44Oj44OD44K344Ol5LiN5Y+vXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJuIHtHcm91cFByb2ZpbGVbXX0gR3JvdXBQcm9maWxlIOmFjeWIl1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGdldFRvcEdyb3VwcygpOiBHcm91cFByb2ZpbGVbXTtcclxuXHJcbiAgICAgICAgLy8hIOOBmeOBueOBpuOBruOCsOODq+ODvOODl+OCkuWxlemWiyAoMemajuWxpClcclxuICAgICAgICBleHBhbmRBbGwoKTogdm9pZDtcclxuXHJcbiAgICAgICAgLy8hIOOBmeOBueOBpuOBruOCsOODq+ODvOODl+OCkuWPjuadnyAoMemajuWxpClcclxuICAgICAgICBjb2xsYXBzZUFsbChkZWxheT86IG51bWJlcik6IHZvaWQ7XHJcblxyXG4gICAgICAgIC8vISDlsZXplovkuK3jgYvliKTlrppcclxuICAgICAgICBpc0V4cGFuZGluZygpOiBib29sZWFuO1xyXG5cclxuICAgICAgICAvLyEg5Y+O5p2f5Lit44GL5Yik5a6aXHJcbiAgICAgICAgaXNDb2xsYXBzaW5nKCk6IGJvb2xlYW47XHJcblxyXG4gICAgICAgIC8vISDplovplonkuK3jgYvliKTlrppcclxuICAgICAgICBpc1N3aXRjaGluZygpOiBib29sZWFuO1xyXG4gICAgfVxyXG5cclxuICAgIC8vX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXy8vXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAaW50ZXJmYWNlIEV4cGFuZGFibGVMaXN0Vmlld1xyXG4gICAgICogQGJyaWVmIOmWi+mWieODquOCueODiOODk+ODpeODvOOCpOODs+OCv+ODvOODleOCp+OCpOOCuVxyXG4gICAgICovXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIElFeHBhbmRhYmxlTGlzdFZpZXcgZXh0ZW5kcyBJTGlzdFZpZXcsIElFeHBhbmRNYW5hZ2VyIHsgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGludGVyZmFjZSBCYXNlRXhwYW5kYWJsZUxpc3RWaWV3XHJcbiAgICAgKiBAYnJpZWYgICAgIElFeHBhbmRhYmxlTGlzdFZpZXcg44GuIGFsaWFzXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgQmFzZUV4cGFuZGFibGVMaXN0VmlldyBleHRlbmRzIElFeHBhbmRhYmxlTGlzdFZpZXcsIEJhY2tib25lLlZpZXc8QmFja2JvbmUuTW9kZWw+IHsgfVxyXG59XHJcblxyXG5kZWNsYXJlIG1vZHVsZSBcImNkcC51aS5saXN0dmlld1wiIHtcclxuICAgIGNvbnN0IFVJOiB0eXBlb2YgQ0RQLlVJO1xyXG4gICAgZXhwb3J0ID0gVUk7XHJcbn1cclxuIiwibmFtZXNwYWNlIENEUC5VSSB7XHJcbiAgICAvKipcclxuICAgICAqIEBjbGFzcyBMaXN0Vmlld0dsb2JhbENvbmZpZ1xyXG4gICAgICogQGJyaWVmIGNkcC51aS5saXN0dmlldyDjga4gZ2xvYmFsIGNvbmZpbmdcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IG1vZHVsZSBMaXN0Vmlld0dsb2JhbENvbmZpZyB7XHJcbiAgICAgICAgZXhwb3J0IGxldCBXUkFQUEVSX0NMQVNTICAgICAgICAgICAgICAgID0gXCJ1aS1saXN0dmlldy13cmFwcGVyXCI7XHJcbiAgICAgICAgZXhwb3J0IGxldCBXUkFQUEVSX1NFTEVDVE9SICAgICAgICAgICAgID0gXCIuXCIgKyBXUkFQUEVSX0NMQVNTO1xyXG4gICAgICAgIGV4cG9ydCBsZXQgU0NST0xMX01BUF9DTEFTUyAgICAgICAgICAgICA9IFwidWktbGlzdHZpZXctc2Nyb2xsLW1hcFwiO1xyXG4gICAgICAgIGV4cG9ydCBsZXQgU0NST0xMX01BUF9TRUxFQ1RPUiAgICAgICAgICA9IFwiLlwiICsgU0NST0xMX01BUF9DTEFTUztcclxuICAgICAgICBleHBvcnQgbGV0IElOQUNUSVZFX0NMQVNTICAgICAgICAgICAgICAgPSBcImluYWN0aXZlXCI7XHJcbiAgICAgICAgZXhwb3J0IGxldCBJTkFDVElWRV9DTEFTU19TRUxFQ1RPUiAgICAgID0gXCIuXCIgKyBJTkFDVElWRV9DTEFTUztcclxuICAgICAgICBleHBvcnQgbGV0IFJFQ1lDTEVfQ0xBU1MgICAgICAgICAgICAgICAgPSBcInVpLWxpc3R2aWV3LXJlY3ljbGVcIjtcclxuICAgICAgICBleHBvcnQgbGV0IFJFQ1lDTEVfQ0xBU1NfU0VMRUNUT1IgICAgICAgPSBcIi5cIiArIFJFQ1lDTEVfQ0xBU1M7XHJcbiAgICAgICAgZXhwb3J0IGxldCBMSVNUSVRFTV9CQVNFX0NMQVNTICAgICAgICAgID0gXCJ1aS1saXN0dmlldy1pdGVtLWJhc2VcIjtcclxuICAgICAgICBleHBvcnQgbGV0IExJU1RJVEVNX0JBU0VfQ0xBU1NfU0VMRUNUT1IgPSBcIi5cIiArIExJU1RJVEVNX0JBU0VfQ0xBU1M7XHJcbiAgICAgICAgZXhwb3J0IGxldCBEQVRBX1BBR0VfSU5ERVggICAgICAgICAgICAgID0gXCJkYXRhLXBhZ2UtaW5kZXhcIjtcclxuICAgICAgICBleHBvcnQgbGV0IERBVEFfQ09OVEFJTkVSX0lOREVYICAgICAgICAgPSBcImRhdGEtY29udGFpbmVyLWluZGV4XCI7XHJcbiAgICB9XHJcbn1cclxuIiwibmFtZXNwYWNlIENEUC5VSSB7XHJcblxyXG4gICAgLy8gY2RwLnVpLmxpc3R2aWV3IOOBryBjZHAuY29yZSDjgavkvp3lrZjjgZfjgarjgYTjgZ/jgoHjgIHni6zoh6rjgatnbG9iYWwg44KS5o+Q5L6b44GZ44KLXHJcbiAgICAvKmpzaGludCBldmlsOnRydWUgKi9cclxuICAgIGV4cG9ydCBjb25zdCBnbG9iYWwgPSAoPGFueT5DRFApLmdsb2JhbCB8fCBGdW5jdGlvbihcInJldHVybiB0aGlzXCIpKCk7XHJcbiAgICAvKmpzaGludCBldmlsOmZhbHNlICovXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBCYWNrYm9uZS5WaWV3IOOBruaWsOimj+WQiOaIkFxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBiYXNlICAgIHtCYWNrYm9uZS5WaWV3fSAgICAgICAgICAgICAgICAgW2luXSBwcm90b3R5cGUgY2hhaW4g5pyA5LiL5L2N44GuIFZpZXcg44Kv44Op44K5XHJcbiAgICAgKiBAcGFyYW0gZGVyaXZlcyB7QmFja2JvbmUuVmlld3xCYWNrYm9uZS5WaWV3W119IFtpbl0g5rS+55Sf44GV44KM44KL44GuIFZpZXcg44Kv44Op44K5XHJcbiAgICAgKiBAcmV0dXJuIHtCYWNrYm9uZS5WaWV3fEJhY2tib25lLlZpZXdbXX0g5paw6KaP44Gr55Sf5oiQ44GV44KM44GfIFZpZXcg44Gu44Kz44Oz44K544OI44Op44Kv44K/XHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBmdW5jdGlvbiBjb21wb3NlVmlld3MoYmFzZTogVmlld0NvbnN0cnVjdG9yLCBkZXJpdmVzOiBWaWV3Q29uc3RydWN0b3IgfCBWaWV3Q29uc3RydWN0b3JbXSk6IFZpZXdDb25zdHJ1Y3RvciB7XHJcbiAgICAgICAgbGV0IF9jb21wb3NlZCA9IGJhc2U7XHJcbiAgICAgICAgY29uc3QgX2Rlcml2ZXMgPSA8Vmlld0NvbnN0cnVjdG9yW10+KGRlcml2ZXMgaW5zdGFuY2VvZiBBcnJheSA/IGRlcml2ZXMgOiBbZGVyaXZlc10pO1xyXG4gICAgICAgIF9kZXJpdmVzLmZvckVhY2goKGRlcml2ZSkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBzZWVkID0ge307XHJcbiAgICAgICAgICAgIF8uZXh0ZW5kT3duKHNlZWQsIGRlcml2ZS5wcm90b3R5cGUpO1xyXG4gICAgICAgICAgICBkZWxldGUgc2VlZC5jb25zdHJ1Y3RvcjtcclxuICAgICAgICAgICAgX2NvbXBvc2VkID0gKDxhbnk+X2NvbXBvc2VkKS5leHRlbmQoc2VlZCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIF9jb21wb3NlZDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEJhY2tib25lLlZpZXcg44Gu5ZCI5oiQXHJcbiAgICAgKiBwcm90b3R5cGUgY2hhaW4g44KS5L2c44KL5ZCI5oiQXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGRlcml2ZWQge0JhY2tib25lLlZpZXd9ICAgICAgICAgICAgICAgICBbaW5dIHByb3RvdHlwZSBjaGFpbiDmnIDkuIrkvY3jga4gVmlldyDjgq/jg6njgrlcclxuICAgICAqIEBwYXJhbSBiYXNlcyAgIHtCYWNrYm9uZS5WaWV3fEJhY2tib25lLlZpZXdbXX0gW2luXSDlkIjmiJDlhYPjga5WaWV3IOOCr+ODqeOCuVxyXG4gICAgICovXHJcbiAgICBleHBvcnQgZnVuY3Rpb24gZGVyaXZlVmlld3MoZGVyaXZlZDogVmlld0NvbnN0cnVjdG9yLCBiYXNlczogVmlld0NvbnN0cnVjdG9yIHwgVmlld0NvbnN0cnVjdG9yW10pOiB2b2lkIHtcclxuICAgICAgICBsZXQgX2NvbXBvc2VkOiBWaWV3Q29uc3RydWN0b3I7XHJcbiAgICAgICAgY29uc3QgX2Jhc2VzID0gPFZpZXdDb25zdHJ1Y3RvcltdPihiYXNlcyBpbnN0YW5jZW9mIEFycmF5ID8gYmFzZXMgOiBbYmFzZXNdKTtcclxuICAgICAgICBpZiAoMiA8PSBfYmFzZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIF9jb21wb3NlZCA9IGNvbXBvc2VWaWV3cyhfYmFzZXNbMF0sIF9iYXNlcy5zbGljZSgxKSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgX2NvbXBvc2VkID0gX2Jhc2VzWzBdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBkZXJpdmVkID0gY29tcG9zZVZpZXdzKF9jb21wb3NlZCwgZGVyaXZlZCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBCYWNrYm9uZS5WaWV3IOOBruWQiOaIkFxyXG4gICAgICogcHJvdG90eXBlIGNoYWluIOOCkuS9nOOCieOBquOBhOWQiOaIkFxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBkZXJpdmVkIHtCYWNrYm9uZS5WaWV3fSAgICAgICAgICAgICAgICAgW2luXSDlhYPjgajjgarjgosgVmlldyDjgq/jg6njgrlcclxuICAgICAqIEBwYXJhbSBiYXNlcyAgIHtCYWNrYm9uZS5WaWV3fEJhY2tib25lLlZpZXdbXX0gW2luXSDlkIjmiJDlhYPjga5WaWV3IOOCr+ODqeOCuVxyXG4gICAgICovXHJcbiAgICBleHBvcnQgZnVuY3Rpb24gbWl4aW5WaWV3cyhkZXJpdmVkOiBWaWV3Q29uc3RydWN0b3IsIGJhc2VzOiBWaWV3Q29uc3RydWN0b3IgfCBWaWV3Q29uc3RydWN0b3JbXSk6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IF9iYXNlcyA9IDxWaWV3Q29uc3RydWN0b3JbXT4oYmFzZXMgaW5zdGFuY2VvZiBBcnJheSA/IGJhc2VzIDogW2Jhc2VzXSk7XHJcbiAgICAgICAgX2Jhc2VzLmZvckVhY2goKGJhc2UpID0+IHtcclxuICAgICAgICAgICAgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoYmFzZS5wcm90b3R5cGUpLmZvckVhY2gobmFtZSA9PiB7XHJcbiAgICAgICAgICAgICAgICBkZXJpdmVkLnByb3RvdHlwZVtuYW1lXSA9IGJhc2UucHJvdG90eXBlW25hbWVdO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvL19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18vL1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGNsYXNzIF9MaXN0Vmlld1V0aWxzXHJcbiAgICAgKiBAYnJpZWYg5YaF6YOo44Gn5L2/55So44GZ44KL5L6/5Yip6Zai5pWwXHJcbiAgICAgKiAgICAgICAgVG9vbHMg44GL44KJ44Gu5pyA5L2O6ZmQ44Gu5rWB55SoXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBtb2R1bGUgX0xpc3RWaWV3VXRpbHMge1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBjc3Mg44GuIHZlbmRlciDmi6HlvLUgcHJlZml4IOOCkui/lOOBmVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybiB7QXJyYXl9IHByZWZpeFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGV4cG9ydCBjb25zdCBjc3NQcmVmaXhlcyA9IFtcIi13ZWJraXQtXCIsIFwiLW1vei1cIiwgXCItbXMtXCIsIFwiLW8tXCIsIFwiXCJdO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBjc3Mg44GuIG1hdHJpeCDjga7lgKTjgpLlj5blvpcuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gZWxlbWVudCB7alF1ZXJ5fSBbaW5dIOWvvuixoeOBriBqUXVlcnkg44Kq44OW44K444Kn44Kv44OIXHJcbiAgICAgICAgICogQHBhcmFtIHR5cGUgICAge1N0cmluZ30gW2luXSBtYXRyaXggdHlwZSBzdHJpbmcgW3RyYW5zbGF0ZVggfCB0cmFuc2xhdGVZIHwgc2NhbGVYIHwgc2NhbGVZXVxyXG4gICAgICAgICAqIEByZXR1cm4ge051bWJlcn0gdmFsdWVcclxuICAgICAgICAgKi9cclxuICAgICAgICBleHBvcnQgY29uc3QgZ2V0Q3NzTWF0cml4VmFsdWUgPSAoZWxlbWVudDogSlF1ZXJ5LCB0eXBlOiBzdHJpbmcpOiBudW1iZXIgPT4ge1xyXG4gICAgICAgICAgICBsZXQgdHJhbnNYID0gMDtcclxuICAgICAgICAgICAgbGV0IHRyYW5zWSA9IDA7XHJcbiAgICAgICAgICAgIGxldCBzY2FsZVggPSAwO1xyXG4gICAgICAgICAgICBsZXQgc2NhbGVZID0gMDtcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjc3NQcmVmaXhlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgbGV0IG1hdHJpeCA9ICQoZWxlbWVudCkuY3NzKGNzc1ByZWZpeGVzW2ldICsgXCJ0cmFuc2Zvcm1cIik7XHJcbiAgICAgICAgICAgICAgICBpZiAobWF0cml4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaXMzZE1hdHJpeCA9IG1hdHJpeC5pbmRleE9mKFwiM2RcIikgIT09IC0xID8gdHJ1ZSA6IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIG1hdHJpeCA9IG1hdHJpeC5yZXBsYWNlKFwibWF0cml4M2RcIiwgXCJcIikucmVwbGFjZShcIm1hdHJpeFwiLCBcIlwiKS5yZXBsYWNlKC9bXlxcZC4sLV0vZywgXCJcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYXJyID0gbWF0cml4LnNwbGl0KFwiLFwiKTtcclxuICAgICAgICAgICAgICAgICAgICB0cmFuc1ggPSBOdW1iZXIoYXJyW2lzM2RNYXRyaXggPyAxMiA6IDRdKTtcclxuICAgICAgICAgICAgICAgICAgICB0cmFuc1kgPSBOdW1iZXIoYXJyW2lzM2RNYXRyaXggPyAxMyA6IDVdKTtcclxuICAgICAgICAgICAgICAgICAgICBzY2FsZVggPSBOdW1iZXIoYXJyWzBdKTtcclxuICAgICAgICAgICAgICAgICAgICBzY2FsZVkgPSBOdW1iZXIoYXJyW2lzM2RNYXRyaXggPyA1IDogM10pO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHN3aXRjaCAodHlwZSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcInRyYW5zbGF0ZVhcIjpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXNOYU4odHJhbnNYKSA/IDAgOiB0cmFuc1g7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwidHJhbnNsYXRlWVwiOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpc05hTih0cmFuc1kpID8gMCA6IHRyYW5zWTtcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJzY2FsZVhcIjpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXNOYU4oc2NhbGVYKSA/IDEgOiBzY2FsZVg7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwic2NhbGVZXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGlzTmFOKHNjYWxlWSkgPyAxIDogc2NhbGVZO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFwidHJhbnNpdGlvbmVuZFwiIOOBruOCpOODmeODs+ODiOWQjemFjeWIl+OCkui/lOOBmVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybiB7QXJyYXl9IHRyYW5zaXRpb25lbmQg44Kk44OZ44Oz44OI5ZCNXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZXhwb3J0IGNvbnN0IHRyYW5zaXRpb25FbmQgPSBcInRyYW5zaXRpb25lbmQgd2Via2l0VHJhbnNpdGlvbkVuZCBvVHJhbnNpdGlvbkVuZCBNU1RyYW5zaXRpb25FbmRcIjtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogdHJhbnNpdGlvbiDoqK3lrppcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IGVsZW1lbnRcclxuICAgICAgICAgKi9cclxuICAgICAgICBleHBvcnQgY29uc3Qgc2V0VHJhbnNmb3Jtc1RyYW5zaXRpb25zID0gKGVsZW1lbnQ6IEpRdWVyeSwgcHJvcDogc3RyaW5nLCBtc2VjOiBudW1iZXIsIHRpbWluZ0Z1bmN0aW9uOiBzdHJpbmcpOiB2b2lkID0+IHtcclxuICAgICAgICAgICAgY29uc3QgJGVsZW1lbnQgPSAkKGVsZW1lbnQpO1xyXG4gICAgICAgICAgICBjb25zdCB0cmFuc2l0aW9ucyA9IHt9O1xyXG4gICAgICAgICAgICBjb25zdCBzZWNvbmQgPSAobXNlYyAvIDEwMDApICsgXCJzXCI7XHJcbiAgICAgICAgICAgIGNvbnN0IGFuaW1hdGlvbiA9IFwiIFwiICsgc2Vjb25kICsgXCIgXCIgKyB0aW1pbmdGdW5jdGlvbjtcclxuICAgICAgICAgICAgY29uc3QgdHJhbnNmb3JtID0gXCIsIHRyYW5zZm9ybVwiICsgYW5pbWF0aW9uO1xyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjc3NQcmVmaXhlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgdHJhbnNpdGlvbnNbY3NzUHJlZml4ZXNbaV0gKyBcInRyYW5zaXRpb25cIl0gPSBwcm9wICsgYW5pbWF0aW9uICsgdHJhbnNmb3JtO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAkZWxlbWVudC5jc3ModHJhbnNpdGlvbnMpO1xyXG4gICAgICAgIH07XHJcblxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiB0cmFuc2l0aW9uIOioreWumuOBruWJiumZpFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gZWxlbWVudFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGV4cG9ydCBjb25zdCBjbGVhclRyYW5zaXRpb25zID0gKGVsZW1lbnQ6IEpRdWVyeSk6IHZvaWQgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCAkZWxlbWVudCA9ICQoZWxlbWVudCk7XHJcblxyXG4gICAgICAgICAgICAkZWxlbWVudC5vZmYodHJhbnNpdGlvbkVuZCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHRyYW5zaXRpb25zID0ge307XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY3NzUHJlZml4ZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHRyYW5zaXRpb25zW2Nzc1ByZWZpeGVzW2ldICsgXCJ0cmFuc2l0aW9uXCJdID0gXCJcIjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgJGVsZW1lbnQuY3NzKHRyYW5zaXRpb25zKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBNYXRoLmFicyDjgojjgorjgoLpq5jpgJ/jgaogYWJzXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZXhwb3J0IGNvbnN0IGFicyA9ICh4OiBudW1iZXIpOiBudW1iZXIgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4geCA+PSAwID8geCA6IC14O1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIE1hdGgubWF4IOOCiOOCiuOCgumrmOmAn+OBqiBtYXhcclxuICAgICAgICAgKi9cclxuICAgICAgICBleHBvcnQgY29uc3QgbWF4ID0gKGxoczogbnVtYmVyLCByaHM6IG51bWJlcik6IG51bWJlciA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBsaHMgPj0gcmhzID8gbGhzIDogcmhzO1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbn1cclxuIiwibmFtZXNwYWNlIENEUC5VSSB7XHJcblxyXG4gICAgY29uc3QgVEFHID0gXCJbQ0RQLlVJLlN0YXR1c01hbmFnZXJdIFwiO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGNsYXNzIFN0YXR1c01hbmFnZXJcclxuICAgICAqIEBicmllZiBVSSDnlKjnirbmhYvnrqHnkIbjgq/jg6njgrlcclxuICAgICAqICAgICAgICBTdGF0dXNNYW5hZ2VyIOOBruOCpOODs+OCueOCv+ODs+OCueOBlOOBqOOBq+S7u+aEj+OBrueKtuaFi+euoeeQhuOBjOOBp+OBjeOCi1xyXG4gICAgICpcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGNsYXNzIFN0YXR1c01hbmFnZXIgaW1wbGVtZW50cyBJU3RhdHVzTWFuYWdlciB7XHJcblxyXG4gICAgICAgIHByaXZhdGUgX3N0YXR1czogYW55ID0ge307ICAgIC8vITwgc3RhdHVzU2NvcGUoKSDjgavkvb/nlKjjgZXjgozjgovnirbmhYvnrqHnkIbjgqrjg5bjgrjjgqfjgq/jg4hcclxuXHJcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgICAgICAvLyBJbXBsZW1lbnRzOiBJU3RhdHVzTWFuYWdlclxyXG5cclxuICAgICAgICAvLyEg54q25oWL5aSJ5pWw44Gu5Y+C54Wn44Kr44Km44Oz44OI44Gu44Kk44Oz44Kv44Oq44Oh44Oz44OIXHJcbiAgICAgICAgcHVibGljIHN0YXR1c0FkZFJlZihzdGF0dXM6IHN0cmluZyk6IG51bWJlciB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5fc3RhdHVzW3N0YXR1c10pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3N0YXR1c1tzdGF0dXNdID0gMTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3N0YXR1c1tzdGF0dXNdKys7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3N0YXR1c1tzdGF0dXNdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOeKtuaFi+WkieaVsOOBruWPgueFp+OCq+OCpuODs+ODiOOBruODh+OCr+ODquODoeODs+ODiFxyXG4gICAgICAgIHB1YmxpYyBzdGF0dXNSZWxlYXNlKHN0YXR1czogc3RyaW5nKTogbnVtYmVyIHtcclxuICAgICAgICAgICAgbGV0IHJldHZhbDogbnVtYmVyO1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuX3N0YXR1c1tzdGF0dXNdKSB7XHJcbiAgICAgICAgICAgICAgICByZXR2YWwgPSAwO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fc3RhdHVzW3N0YXR1c10tLTtcclxuICAgICAgICAgICAgICAgIHJldHZhbCA9IHRoaXMuX3N0YXR1c1tzdGF0dXNdO1xyXG4gICAgICAgICAgICAgICAgaWYgKDAgPT09IHJldHZhbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLl9zdGF0dXNbc3RhdHVzXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gcmV0dmFsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOWHpueQhuOCueOCs+ODvOODl+avjuOBq+eKtuaFi+WkieaVsOOCkuioreWumlxyXG4gICAgICAgIHB1YmxpYyBzdGF0dXNTY29wZShzdGF0dXM6IHN0cmluZywgY2FsbGJhY2s6ICgpID0+IHZvaWQgfCBQcm9taXNlPGFueT4pOiB2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy5zdGF0dXNBZGRSZWYoc3RhdHVzKTtcclxuICAgICAgICAgICAgY29uc3QgcHJvbWlzZSA9IGNhbGxiYWNrKCk7XHJcbiAgICAgICAgICAgIGlmICghcHJvbWlzZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0dXNSZWxlYXNlKHN0YXR1cyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBwcm9taXNlLnRoZW4oXHJcbiAgICAgICAgICAgICAgICAgICAgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXR1c1JlbGVhc2Uoc3RhdHVzKTtcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0dXNSZWxlYXNlKHN0YXR1cyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOaMh+WumuOBl+OBn+eKtuaFi+S4reOBp+OBguOCi+OBi+eiuuiqjVxyXG4gICAgICAgIHB1YmxpYyBpc1N0YXR1c0luKHN0YXR1czogc3RyaW5nKTogYm9vbGVhbiB7XHJcbiAgICAgICAgICAgIHJldHVybiAhIXRoaXMuX3N0YXR1c1tzdGF0dXNdO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJuYW1lc3BhY2UgQ0RQLlVJIHtcclxuXHJcbiAgICBpbXBvcnQgX0NvbmZpZyA9IENEUC5VSS5MaXN0Vmlld0dsb2JhbENvbmZpZztcclxuICAgIGltcG9ydCBfVG9vbENTUyA9IENEUC5VSS5fTGlzdFZpZXdVdGlscztcclxuXHJcbiAgICBjb25zdCBUQUcgPSBcIltDRFAuVUkuTGluZVByb2ZpbGVdIFwiO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGNsYXNzIExpbmVQcm9maWxlXHJcbiAgICAgKiBAYnJpZWYgMSDjg6njgqTjg7PjgavplqLjgZnjgovjg5fjg63jg5XjgqHjgqTjg6vjgq/jg6njgrlcclxuICAgICAqICAgICAgICBmcmFtZXdvcmsg44GM5L2/55So44GZ44KLXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBjbGFzcyBMaW5lUHJvZmlsZSB7XHJcbiAgICAgICAgcHJpdmF0ZSBfaW5kZXg6IG51bWJlciA9IG51bGw7ICAgICAgICAgICAgICAvLyE8IGdsb2JhbCBpbmRleFxyXG4gICAgICAgIHByaXZhdGUgX3BhZ2VJbmRleDogbnVtYmVyID0gbnVsbDsgICAgICAgICAgLy8hPCDmiYDlsZ7jgZnjgosgcGFnZSBpbmRleFxyXG4gICAgICAgIHByaXZhdGUgX29mZnNldDogbnVtYmVyID0gbnVsbDsgICAgICAgICAgICAgLy8hPCBnbG9iYWwgb2Zmc2V0XHJcbiAgICAgICAgcHJpdmF0ZSBfJGJhc2U6IEpRdWVyeSA9IG51bGw7ICAgICAgICAgICAgICAvLyE8IOWcn+WPsOOBqOOBquOCiyBET00g44Kk44Oz44K544K/44Oz44K544KS5qC857SNXHJcbiAgICAgICAgcHJpdmF0ZSBfaW5zdGFuY2U6IEJhc2VMaXN0SXRlbVZpZXcgPSBudWxsOyAvLyE8IExpc3RJdGVtVmlldyDjgqTjg7Pjgrnjgr/jg7PjgrnjgpLmoLzntI1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogY29uc3RydWN0b3JcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBfb3duZXIgICAgICAge0lMaXN0Vmlld0ZyYW1ld29ya30gW2luXSDnrqHnkIbogIXjgafjgYLjgosgSUxpc3RWaWV3RnJhbWV3b3JrIOOCpOODs+OCueOCv+ODs+OCuVxyXG4gICAgICAgICAqIEBwYXJhbSBfaGVpZ2h0ICAgICAge051bWJlcn0gICAgICAgICAgICAgW2luXSDliJ3mnJ/jga7pq5jjgZVcclxuICAgICAgICAgKiBAcGFyYW0gX2luaXRpYWxpemVyIHtGdW5jdGlvbn0gICAgICAgICAgIFtpbl0gTGlzdEl0ZW1WaWV3IOa0vueUn+OCr+ODqeOCueOBruOCs+ODs+OCueODiOODqeOCr+OCv1xyXG4gICAgICAgICAqIEBwYXJhbSBfaW5mbyAgICAgICAge09iamVjdH0gICAgICAgICAgICAgW2luXSBMaXN0SXRlbVZpZXcg44Kz44Oz44K544OI44Op44Kv44K/44Gr5rih44GV44KM44KL44Kq44OX44K344On44OzXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgY29uc3RydWN0b3IoXHJcbiAgICAgICAgICAgIHByaXZhdGUgX293bmVyOiBJTGlzdFZpZXdGcmFtZXdvcmssXHJcbiAgICAgICAgICAgIHByaXZhdGUgX2hlaWdodDogbnVtYmVyLFxyXG4gICAgICAgICAgICBwcml2YXRlIF9pbml0aWFsaXplcjogbmV3IChvcHRpb25zPzogYW55KSA9PiBCYXNlTGlzdEl0ZW1WaWV3LFxyXG4gICAgICAgICAgICBwcml2YXRlIF9pbmZvOiBhbnkpIHtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAgICAgLy8gcHVibGljIG1ldGhvZHNcclxuXHJcbiAgICAgICAgLy8hIOacieWKueWMllxyXG4gICAgICAgIHB1YmxpYyBhY3RpdmF0ZSgpOiB2b2lkIHtcclxuICAgICAgICAgICAgaWYgKG51bGwgPT0gdGhpcy5faW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgICAgIGxldCBvcHRpb25zO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fJGJhc2UgPSB0aGlzLnByZXBhcmVCYXNlRWxlbWVudCgpO1xyXG4gICAgICAgICAgICAgICAgb3B0aW9ucyA9ICQuZXh0ZW5kKHt9LCB7XHJcbiAgICAgICAgICAgICAgICAgICAgZWw6IHRoaXMuXyRiYXNlLFxyXG4gICAgICAgICAgICAgICAgICAgIG93bmVyOiB0aGlzLl9vd25lcixcclxuICAgICAgICAgICAgICAgICAgICBsaW5lUHJvZmlsZTogdGhpcyxcclxuICAgICAgICAgICAgICAgIH0sIHRoaXMuX2luZm8pO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5faW5zdGFuY2UgPSBuZXcgdGhpcy5faW5pdGlhbGl6ZXIob3B0aW9ucyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoXCJub25lXCIgPT09IHRoaXMuXyRiYXNlLmNzcyhcImRpc3BsYXlcIikpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl8kYmFzZS5jc3MoXCJkaXNwbGF5XCIsIFwiYmxvY2tcIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy51cGRhdGVQYWdlSW5kZXgodGhpcy5fJGJhc2UpO1xyXG4gICAgICAgICAgICBpZiAoXCJ2aXNpYmxlXCIgIT09IHRoaXMuXyRiYXNlLmNzcyhcInZpc2liaWxpdHlcIikpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuXyRiYXNlLmNzcyhcInZpc2liaWxpdHlcIiwgXCJ2aXNpYmxlXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg5LiN5Y+v6KaW5YyWXHJcbiAgICAgICAgcHVibGljIGhpZGUoKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGlmIChudWxsID09IHRoaXMuX2luc3RhbmNlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFjdGl2YXRlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKFwiaGlkZGVuXCIgIT09IHRoaXMuXyRiYXNlLmNzcyhcInZpc2liaWxpdHlcIikpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuXyRiYXNlLmNzcyhcInZpc2liaWxpdHlcIiwgXCJoaWRkZW5cIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDnhKHlirnljJZcclxuICAgICAgICBwdWJsaWMgaW5hY3RpdmF0ZSgpOiB2b2lkIHtcclxuICAgICAgICAgICAgaWYgKG51bGwgIT0gdGhpcy5faW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgICAgIC8vIHhwZXJpYSBBWCBKZWxseSBCZWFuICg0LjEuMinjgavjgabjgIEgaGlkZGVuIGVsZW1lbnQg44Gu5YmK6Zmk44Gn44Oh44Oi44Oq44O844Oq44O844Kv44GZ44KL44Gf44KB5Y+v6KaW5YyW44GZ44KL44CCXHJcbiAgICAgICAgICAgICAgICBpZiAoXCJ2aXNpYmxlXCIgIT09IHRoaXMuXyRiYXNlLmNzcyhcInZpc2liaWxpdHlcIikpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl8kYmFzZS5jc3MoXCJ2aXNpYmlsaXR5XCIsIFwidmlzaWJsZVwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMuX2luc3RhbmNlLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5faW5zdGFuY2UgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fJGJhc2UuYWRkQ2xhc3MoX0NvbmZpZy5SRUNZQ0xFX0NMQVNTKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuXyRiYXNlLmNzcyhcImRpc3BsYXlcIiwgXCJub25lXCIpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fJGJhc2UgPSBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg5pu05pawXHJcbiAgICAgICAgcHVibGljIHJlZnJlc2goKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGlmIChudWxsICE9IHRoaXMuX2luc3RhbmNlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9pbnN0YW5jZS5yZW5kZXIoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOacieWKueeEoeWKueWIpOWumlxyXG4gICAgICAgIHB1YmxpYyBpc0FjdGl2ZSgpOiBib29sZWFuIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGwgIT0gdGhpcy5faW5zdGFuY2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg6auY44GV5oOF5aCx44Gu5pu05pawLiBMaXN0SXRlbVZpZXcg44GL44KJ44Kz44O844Or44GV44KM44KL44CCXHJcbiAgICAgICAgcHVibGljIHVwZGF0ZUhlaWdodChuZXdIZWlnaHQ6IG51bWJlciwgb3B0aW9ucz86IFVwZGF0ZUhlaWdodE9wdGlvbnMpOiB2b2lkIHtcclxuICAgICAgICAgICAgY29uc3QgZGVsdGEgPSBuZXdIZWlnaHQgLSB0aGlzLl9oZWlnaHQ7XHJcbiAgICAgICAgICAgIHRoaXMuX2hlaWdodCA9IG5ld0hlaWdodDtcclxuICAgICAgICAgICAgdGhpcy5fb3duZXIudXBkYXRlU2Nyb2xsTWFwSGVpZ2h0KGRlbHRhKTtcclxuICAgICAgICAgICAgaWYgKG51bGwgIT0gb3B0aW9ucyAmJiBvcHRpb25zLnJlZmxlY3RBbGwpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX293bmVyLnVwZGF0ZVByb2ZpbGVzKHRoaXMuX2luZGV4KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIHotaW5kZXgg44Gu44Oq44K744OD44OILiBTY3JvbGxNYW5hZ2VyLnJlbW92ZUl0ZW0oKSDjgYvjgonjgrPjg7zjg6vjgZXjgozjgovjgIJcclxuICAgICAgICBwdWJsaWMgcmVzZXREZXB0aCgpOiB2b2lkIHtcclxuICAgICAgICAgICAgaWYgKG51bGwgIT0gdGhpcy5faW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuXyRiYXNlLmNzcyhcInotaW5kZXhcIiwgdGhpcy5fb3duZXIuZ2V0TGlzdFZpZXdPcHRpb25zKCkuYmFzZURlcHRoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgICAgICAvLyBnZXR0ZXIvc2V0dGVyIG1ldGhvZHNcclxuXHJcbiAgICAgICAgLy8hIGdldHRlcjog44Op44Kk44Oz44Gu6auY44GVXHJcbiAgICAgICAgcHVibGljIGdldCBoZWlnaHQoKTogbnVtYmVyIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2hlaWdodDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISBnZXR0ZXI6IGdsb2JhbCBpbmRleFxyXG4gICAgICAgIHB1YmxpYyBnZXQgaW5kZXgoKTogbnVtYmVyIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2luZGV4O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIHNldHRlcjogZ2xvYmFsIGluZGV4XHJcbiAgICAgICAgcHVibGljIHNldCBpbmRleChpbmRleDogbnVtYmVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2luZGV4ID0gaW5kZXg7XHJcbiAgICAgICAgICAgIGlmIChudWxsICE9IHRoaXMuXyRiYXNlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUluZGV4KHRoaXMuXyRiYXNlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIGdldHRlcjog5omA5bGe44Oa44O844K4IGluZGV4XHJcbiAgICAgICAgcHVibGljIGdldCBwYWdlSW5kZXgoKTogbnVtYmVyIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3BhZ2VJbmRleDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISBzZXR0ZXI6IOaJgOWxnuODmuODvOOCuCBpbmRleFxyXG4gICAgICAgIHB1YmxpYyBzZXQgcGFnZUluZGV4KGluZGV4OiBudW1iZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5fcGFnZUluZGV4ID0gaW5kZXg7XHJcbiAgICAgICAgICAgIGlmIChudWxsICE9IHRoaXMuXyRiYXNlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVBhZ2VJbmRleCh0aGlzLl8kYmFzZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISBnZXR0ZXI6IGxpbmUgb2Zmc2V0XHJcbiAgICAgICAgcHVibGljIGdldCBvZmZzZXQoKTogbnVtYmVyIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX29mZnNldDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISBzZXR0ZXI6IGxpbmUgb2Zmc2V0XHJcbiAgICAgICAgcHVibGljIHNldCBvZmZzZXQob2Zmc2V0OiBudW1iZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5fb2Zmc2V0ID0gb2Zmc2V0O1xyXG4gICAgICAgICAgICBpZiAobnVsbCAhPSB0aGlzLl8kYmFzZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVPZmZzZXQodGhpcy5fJGJhc2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEgZ2V0dGVyOiBpbmZvXHJcbiAgICAgICAgcHVibGljIGdldCBpbmZvKCk6IGFueSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9pbmZvO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgICAgICAvLyBwcml2YXRlIG1ldGhvZHNcclxuXHJcbiAgICAgICAgLy8hIEJhc2UgalF1ZXJ5IOOCquODluOCuOOCp+OCr+ODiOOBrueUn+aIkFxyXG4gICAgICAgIHByaXZhdGUgcHJlcGFyZUJhc2VFbGVtZW50KCk6IEpRdWVyeSB7XHJcbiAgICAgICAgICAgIGxldCAkYmFzZTogSlF1ZXJ5O1xyXG4gICAgICAgICAgICBjb25zdCAkbWFwID0gdGhpcy5fb3duZXIuZ2V0U2Nyb2xsTWFwRWxlbWVudCgpO1xyXG4gICAgICAgICAgICBjb25zdCAkcmVjeWNsZSA9IHRoaXMuX293bmVyLmZpbmRSZWN5Y2xlRWxlbWVudHMoKS5maXJzdCgpO1xyXG4gICAgICAgICAgICBjb25zdCBpdGVtVGFnTmFtZSA9IHRoaXMuX293bmVyLmdldExpc3RWaWV3T3B0aW9ucygpLml0ZW1UYWdOYW1lO1xyXG5cclxuICAgICAgICAgICAgaWYgKG51bGwgIT0gdGhpcy5fJGJhc2UpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihUQUcgKyBcInRoaXMuXyRiYXNlIGlzIG5vdCBudWxsLlwiKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl8kYmFzZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKDAgPCAkcmVjeWNsZS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICRiYXNlID0gJHJlY3ljbGU7XHJcbiAgICAgICAgICAgICAgICAkYmFzZS5yZW1vdmVBdHRyKFwiei1pbmRleFwiKTtcclxuICAgICAgICAgICAgICAgICRiYXNlLnJlbW92ZUNsYXNzKF9Db25maWcuUkVDWUNMRV9DTEFTUyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAkYmFzZSA9ICQoXCI8XCIgKyBpdGVtVGFnTmFtZSArIFwiIGNsYXNzPSdcIiArIF9Db25maWcuTElTVElURU1fQkFTRV9DTEFTUyArIFwiJz48L1wiICsgaXRlbVRhZ05hbWUgKyBcIj5cIik7XHJcbiAgICAgICAgICAgICAgICAkYmFzZS5jc3MoXCJkaXNwbGF5XCIsIFwibm9uZVwiKTtcclxuICAgICAgICAgICAgICAgICRtYXAuYXBwZW5kKCRiYXNlKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8g6auY44GV44Gu5pu05pawXHJcbiAgICAgICAgICAgIGlmICgkYmFzZS5oZWlnaHQoKSAhPT0gdGhpcy5faGVpZ2h0KSB7XHJcbiAgICAgICAgICAgICAgICAkYmFzZS5oZWlnaHQodGhpcy5faGVpZ2h0KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gaW5kZXgg44Gu6Kit5a6aXHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlSW5kZXgoJGJhc2UpO1xyXG4gICAgICAgICAgICAvLyBvZmZzZXQg44Gu5pu05pawXHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlT2Zmc2V0KCRiYXNlKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiAkYmFzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISBnbG9iYWwgaW5kZXgg44Gu5pu05pawXHJcbiAgICAgICAgcHJpdmF0ZSB1cGRhdGVJbmRleCgkYmFzZTogSlF1ZXJ5KTogdm9pZCB7XHJcbiAgICAgICAgICAgIGlmICgkYmFzZS5hdHRyKF9Db25maWcuREFUQV9DT05UQUlORVJfSU5ERVgpICE9PSB0aGlzLl9pbmRleC50b1N0cmluZygpKSB7XHJcbiAgICAgICAgICAgICAgICAkYmFzZS5hdHRyKF9Db25maWcuREFUQV9DT05UQUlORVJfSU5ERVgsIHRoaXMuX2luZGV4LnRvU3RyaW5nKCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEgcGFnZSBpbmRleCDjga7mm7TmlrBcclxuICAgICAgICBwcml2YXRlIHVwZGF0ZVBhZ2VJbmRleCgkYmFzZTogSlF1ZXJ5KTogdm9pZCB7XHJcbiAgICAgICAgICAgIGlmICgkYmFzZS5hdHRyKF9Db25maWcuREFUQV9QQUdFX0lOREVYKSAhPT0gdGhpcy5fcGFnZUluZGV4LnRvU3RyaW5nKCkpIHtcclxuICAgICAgICAgICAgICAgICRiYXNlLmF0dHIoX0NvbmZpZy5EQVRBX1BBR0VfSU5ERVgsIHRoaXMuX3BhZ2VJbmRleC50b1N0cmluZygpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIG9mZnNldCDjga7mm7TmlrBcclxuICAgICAgICBwcml2YXRlIHVwZGF0ZU9mZnNldCgkYmFzZTogSlF1ZXJ5KTogdm9pZCB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRyYW5zZm9ybSA9IHt9O1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fb3duZXIuZ2V0TGlzdFZpZXdPcHRpb25zKCkuZW5hYmxlVHJhbnNmb3JtT2Zmc2V0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoX1Rvb2xDU1MuZ2V0Q3NzTWF0cml4VmFsdWUoJGJhc2UsIFwidHJhbnNsYXRlWVwiKSAhPT0gdGhpcy5fb2Zmc2V0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBfVG9vbENTUy5jc3NQcmVmaXhlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm1bX1Rvb2xDU1MuY3NzUHJlZml4ZXNbaV0gKyBcInRyYW5zZm9ybVwiXSA9IFwidHJhbnNsYXRlM2QoMHB4LFwiICsgdGhpcy5fb2Zmc2V0ICsgXCJweCwwcHgpXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICRiYXNlLmNzcyh0cmFuc2Zvcm0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKHBhcnNlSW50KCRiYXNlLmNzcyhcInRvcFwiKSwgMTApICE9PSB0aGlzLl9vZmZzZXQpIHtcclxuICAgICAgICAgICAgICAgICAgICAkYmFzZS5jc3MoXCJ0b3BcIiwgdGhpcy5fb2Zmc2V0ICsgXCJweFwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJuYW1lc3BhY2UgQ0RQLlVJIHtcclxuXHJcbiAgICBjb25zdCBUQUcgPSBcIltDRFAuVUkuUGFnZVByb2ZpbGVdIFwiO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGNsYXNzIFBhZ2VQcm9maWxlXHJcbiAgICAgKiBAYnJpZWYgMSDjg5rjg7zjgrjjgavplqLjgZnjgovjg5fjg63jg5XjgqHjgqTjg6vjgq/jg6njgrlcclxuICAgICAqICAgICAgICBmcmFtZXdvcmsg44GM5L2/55So44GZ44KLXHJcbiAgICAgKiAgICAgICAg5pys44Kv44Op44K544Gn44Gv55u05o6lIERPTSDjgpLmk43kvZzjgZfjgabjga/jgYTjgZHjgarjgYRcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGNsYXNzIFBhZ2VQcm9maWxlIHtcclxuICAgICAgICBwcml2YXRlIF9pbmRleDogbnVtYmVyID0gMDsgICAgICAgICAgICAgLy8hPCBwYWdlIGluZGV4XHJcbiAgICAgICAgcHJpdmF0ZSBfb2Zmc2V0OiBudW1iZXIgPSAwOyAgICAgICAgICAgIC8vITwgcGFnZSDjga4gVG9wIOOBi+OCieOBruOCquODleOCu+ODg+ODiFxyXG4gICAgICAgIHByaXZhdGUgX2hlaWdodDogbnVtYmVyID0gMDsgICAgICAgICAgICAvLyE8IHBhZ2Ug44Gu6auY44GVXHJcbiAgICAgICAgcHJpdmF0ZSBfbGluZXM6IExpbmVQcm9maWxlW10gPSBbXTsgICAgIC8vITwgcGFnZSDlhoXjgafnrqHnkIbjgZXjgozjgosgTGluZVByb2ZpbGVcclxuICAgICAgICBwcml2YXRlIF9zdGF0dXM6IHN0cmluZyA9IFwiaW5hY3RpdmVcIjsgICAvLyE8IHBhZ2Ug44Gu54q25oWLIFsgaW5hY3RpdmUgfCBoaWRkZW4gfCBhY3RpdmUgXVxyXG5cclxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgICAgIC8vIHB1YmxpYyBtZXRob2RzXHJcblxyXG4gICAgICAgIC8vISDmnInlirnljJZcclxuICAgICAgICBwdWJsaWMgYWN0aXZhdGUoKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGlmIChcImFjdGl2ZVwiICE9PSB0aGlzLl9zdGF0dXMpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2xpbmVzLmZvckVhY2goKGxpbmU6IExpbmVQcm9maWxlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGluZS5hY3RpdmF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5fc3RhdHVzID0gXCJhY3RpdmVcIjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDnhKHlj6/oppbljJZcclxuICAgICAgICBwdWJsaWMgaGlkZSgpOiB2b2lkIHtcclxuICAgICAgICAgICAgaWYgKFwiaGlkZGVuXCIgIT09IHRoaXMuX3N0YXR1cykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbGluZXMuZm9yRWFjaCgobGluZTogTGluZVByb2ZpbGUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBsaW5lLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuX3N0YXR1cyA9IFwiaGlkZGVuXCI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg54Sh5Yq55YyWXHJcbiAgICAgICAgcHVibGljIGluYWN0aXZhdGUoKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGlmIChcImluYWN0aXZlXCIgIT09IHRoaXMuX3N0YXR1cykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbGluZXMuZm9yRWFjaCgobGluZTogTGluZVByb2ZpbGUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBsaW5lLmluYWN0aXZhdGUoKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuX3N0YXR1cyA9IFwiaW5hY3RpdmVcIjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISBMaW5lUHJvZmlsZSDjgpLoqK3lrppcclxuICAgICAgICBwdWJsaWMgcHVzaChsaW5lOiBMaW5lUHJvZmlsZSk6IHZvaWQge1xyXG4gICAgICAgICAgICB0aGlzLl9saW5lcy5wdXNoKGxpbmUpO1xyXG4gICAgICAgICAgICB0aGlzLl9oZWlnaHQgKz0gbGluZS5oZWlnaHQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg6YWN5LiL44GuIExpbmVQcm9maWxlIOOBmeOBueOBpuOBjOacieWKueOBp+OBquOBhOWgtOWQiOOAgVBhZ2Ug44K544OG44O844K/44K544KS54Sh5Yq544Gr44GZ44KLXHJcbiAgICAgICAgcHVibGljIG5vcm1hbGl6ZSgpOiB2b2lkIHtcclxuICAgICAgICAgICAgY29uc3QgZW5hYmxlQWxsID0gXy5ldmVyeSh0aGlzLl9saW5lcywgKGxpbmU6IExpbmVQcm9maWxlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbGluZS5pc0FjdGl2ZSgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgaWYgKCFlbmFibGVBbGwpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3N0YXR1cyA9IFwiaW5hY3RpdmVcIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIExpbmVQcm9maWxlIOOCkuWPluW+l1xyXG4gICAgICAgIHB1YmxpYyBnZXRMaW5lUHJvZmlsZShpbmRleDogbnVtYmVyKTogTGluZVByb2ZpbGUge1xyXG4gICAgICAgICAgICBpZiAoMCA8PSBpbmRleCAmJiBpbmRleCA8IHRoaXMuX2xpbmVzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2xpbmVzW2luZGV4XTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg5pyA5Yid44GuIExpbmVQcm9maWxlIOOCkuWPluW+l1xyXG4gICAgICAgIHB1YmxpYyBnZXRMaW5lUHJvZmlsZUZpcnN0KCk6IExpbmVQcm9maWxlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0TGluZVByb2ZpbGUoMCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg5pyA5b6M44GuIExpbmVQcm9maWxlIOOCkuWPluW+l1xyXG4gICAgICAgIHB1YmxpYyBnZXRMaW5lUHJvZmlsZUxhc3QoKTogTGluZVByb2ZpbGUge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRMaW5lUHJvZmlsZSh0aGlzLl9saW5lcy5sZW5ndGggLSAxKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAgICAgLy8gZ2V0dGVyL3NldHRlciBtZXRob2RzXHJcblxyXG4gICAgICAgIC8vISBnZXR0ZXI6IHBhZ2UgaW5kZXhcclxuICAgICAgICBwdWJsaWMgZ2V0IGluZGV4KCk6IG51bWJlciB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9pbmRleDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISBzZXR0ZXI6IHBhZ2UgaW5kZXhcclxuICAgICAgICBwdWJsaWMgc2V0IGluZGV4KGluZGV4OiBudW1iZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5faW5kZXggPSBpbmRleDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISBnZXR0ZXI6IHBhZ2Ugb2Zmc2V0XHJcbiAgICAgICAgcHVibGljIGdldCBvZmZzZXQoKTogbnVtYmVyIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX29mZnNldDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISBzZXR0ZXI6IHBhZ2Ugb2Zmc2V0XHJcbiAgICAgICAgcHVibGljIHNldCBvZmZzZXQob2Zmc2V0OiBudW1iZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5fb2Zmc2V0ID0gb2Zmc2V0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIGdldHRlcjog5a6f6Zqb44Gr44Oa44O844K444Gr5Ymy44KK5b2T44Gm44KJ44KM44Gm44GE44KL6auY44GVXHJcbiAgICAgICAgcHVibGljIGdldCBoZWlnaHQoKTogbnVtYmVyIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2hlaWdodDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISBnZXR0ZXI6IOeKtuaFi+WPluW+l1xyXG4gICAgICAgIHB1YmxpYyBnZXQgc3RhdHVzKCk6IHN0cmluZyB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9zdGF0dXM7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIm5hbWVzcGFjZSBDRFAuVUkge1xyXG5cclxuICAgIGNvbnN0IFRBRyA9IFwiW0NEUC5VSS5Hcm91cFByb2ZpbGVdIFwiO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGNsYXNzIEdyb3VwUHJvZmlsZVxyXG4gICAgICogQGJyaWVmIOODqeOCpOODs+OCkuOCsOODq+ODvOODl+euoeeQhuOBmeOCi+ODl+ODreODleOCoeOCpOODq+OCr+ODqeOCuVxyXG4gICAgICogICAgICAgIOacrOOCr+ODqeOCueOBp+OBr+ebtOaOpSBET00g44KS5pON5L2c44GX44Gm44Gv44GE44GR44Gq44GEXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBjbGFzcyBHcm91cFByb2ZpbGUge1xyXG4gICAgICAgIHByaXZhdGUgX3BhcmVudDogR3JvdXBQcm9maWxlID0gbnVsbDsgICAgICAgLy8hPCDopqogR3JvdXBQcm9maWxlIOOCpOODs+OCueOCv+ODs+OCuVxyXG4gICAgICAgIHByaXZhdGUgX2NoaWxkcmVuOiBHcm91cFByb2ZpbGVbXSA9IFtdOyAgICAgLy8hPCDlrZAgR3JvdXBQcm9maWxlIOOCpOODs+OCueOCv+ODs+OCuVxyXG4gICAgICAgIHByaXZhdGUgX2V4cGFuZGVkOiBib29sZWFuID0gZmFsc2U7ICAgICAgICAgLy8hPCDplovplonmg4XloLFcclxuICAgICAgICBwcml2YXRlIF9zdGF0dXM6IHN0cmluZyA9IFwidW5yZWdpc3RlcmVkXCI7ICAgLy8hPCBfb3duZXIg44G444Gu55m76Yyy54q25oWLIFsgdW5yZWdpc3RlcmVkIHwgcmVnaXN0ZXJlZCBdXHJcbiAgICAgICAgcHJpdmF0ZSBfbWFwTGluZXMgPSB7fTsgICAgICAgICAgICAgICAgICAgICAvLyE8IOiHqui6q+OBjOeuoei9hOOBmeOCiyBMaW5lUHJvZmlsZSDjgpIga2V5IOOBqOOBqOOCguOBq+agvOe0jVxyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIExBWU9VVF9LRVlfREVGQVVMVCA9IFwiLWxheW91dC1kZWZhdWx0XCI7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIGNvbnN0cnVjdG9yXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gX2lkICAgIHtTdHJpbmd9ICAgICAgICAgICAgIFtpbl0gR3JvdXBQcm9maWxlIOOBriBJRFxyXG4gICAgICAgICAqIEBwYXJhbSBfb3duZXIge0V4cGFuZGFibGVMaXN0Vmlld30gW2luXSDnrqHnkIbogIXjgafjgYLjgosgRXhwYW5kYWJsZUxpc3RWaWV3IOOCpOODs+OCueOCv+ODs+OCuVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgX2lkOiBzdHJpbmcsIHByaXZhdGUgX293bmVyOiBCYXNlRXhwYW5kYWJsZUxpc3RWaWV3KSB7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgICAgIC8vIHB1YmxpYyBtZXRob2RcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog5pysIEdyb3VwUHJvZmlsZSDjgYznrqHnkIbjgZnjgosgTGlzdCDjgpLkvZzmiJDjgZfjgabnmbvpjLJcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBoZWlnaHQgICAgICB7TnVtYmVyfSAgIFtpbl0g44Op44Kk44Oz44Gu6auY44GVXHJcbiAgICAgICAgICogQHBhcmFtIGluaXRpYWxpemVyIHtGdW5jdGlvbn0gW2luXSBMaXN0SXRlbVZpZXcg5rS+55Sf44Kv44Op44K544Gu44Kz44Oz44K544OI44Op44Kv44K/XHJcbiAgICAgICAgICogQHBhcmFtIGluZm8gICAgICAgIHtPYmplY3R9ICAgW2luXSBpbml0aWFsaXplciDjgavmuKHjgZXjgozjgovjgqrjg5fjgrfjg6fjg7PlvJXmlbBcclxuICAgICAgICAgKiBAcGFyYW0gbGF5b3V0S2V5ICAge1N0cmluZ30gICBbaW5dIGxheW91dCDmr47jgavkvb/nlKjjgZnjgovorZjliKXlrZAgKOOCquODl+OCt+ODp+ODiuODqylcclxuICAgICAgICAgKiBAcmV0dXJuIHtHcm91cFByb2ZpbGV9IOacrOOCpOODs+OCueOCv+ODs+OCuVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBhZGRJdGVtKFxyXG4gICAgICAgICAgICBoZWlnaHQ6IG51bWJlcixcclxuICAgICAgICAgICAgaW5pdGlhbGl6ZXI6IG5ldyAob3B0aW9ucz86IGFueSkgPT4gQmFzZUxpc3RJdGVtVmlldyxcclxuICAgICAgICAgICAgaW5mbzogYW55LFxyXG4gICAgICAgICAgICBsYXlvdXRLZXk/OiBzdHJpbmdcclxuICAgICAgICApOiBHcm91cFByb2ZpbGUge1xyXG4gICAgICAgICAgICBsZXQgbGluZTogTGluZVByb2ZpbGU7XHJcbiAgICAgICAgICAgIGNvbnN0IG9wdGlvbnMgPSAkLmV4dGVuZCh7fSwgeyBncm91cFByb2ZpbGU6IHRoaXMgfSwgaW5mbyk7XHJcblxyXG4gICAgICAgICAgICBpZiAobnVsbCA9PSBsYXlvdXRLZXkpIHtcclxuICAgICAgICAgICAgICAgIGxheW91dEtleSA9IEdyb3VwUHJvZmlsZS5MQVlPVVRfS0VZX0RFRkFVTFQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKG51bGwgPT0gdGhpcy5fbWFwTGluZXNbbGF5b3V0S2V5XSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbWFwTGluZXNbbGF5b3V0S2V5XSA9IFtdO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBsaW5lID0gbmV3IExpbmVQcm9maWxlKHRoaXMuX293bmVyLmNvcmUsIE1hdGguZmxvb3IoaGVpZ2h0KSwgaW5pdGlhbGl6ZXIsIG9wdGlvbnMpO1xyXG5cclxuICAgICAgICAgICAgLy8gX293bmVyIOOBrueuoeeQhuS4i+OBq+OBguOCi+OBqOOBjeOBr+mAn+OChOOBi+OBq+i/veWKoFxyXG4gICAgICAgICAgICBpZiAoKFwicmVnaXN0ZXJlZFwiID09PSB0aGlzLl9zdGF0dXMpICYmXHJcbiAgICAgICAgICAgICAgICAobnVsbCA9PSB0aGlzLl9vd25lci5sYXlvdXRLZXkgfHwgbGF5b3V0S2V5ID09PSB0aGlzLl9vd25lci5sYXlvdXRLZXkpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9vd25lci5fYWRkTGluZShsaW5lLCB0aGlzLmdldExhc3RMaW5lSW5kZXgoKSArIDEpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fb3duZXIudXBkYXRlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5fbWFwTGluZXNbbGF5b3V0S2V5XS5wdXNoKGxpbmUpO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOWtkCBHcm91cCDjgpLov73liqBcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB0YXJnZXQge0dyb3VwUHJvZmlsZXxHcm91cFByb2ZpbGVbXX0gW2luXSBHcm91cFByb2ZpbGUg44Kk44Oz44K544K/44Oz44K5XHJcbiAgICAgICAgICogQHJldHVybiB7R3JvdXBQcm9maWxlfSDmnKzjgqTjg7Pjgrnjgr/jg7PjgrlcclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgYWRkQ2hpbGRyZW4odGFyZ2V0OiBHcm91cFByb2ZpbGUpOiBHcm91cFByb2ZpbGU7XHJcbiAgICAgICAgcHVibGljIGFkZENoaWxkcmVuKHRhcmdldDogR3JvdXBQcm9maWxlW10pOiBHcm91cFByb2ZpbGU7XHJcbiAgICAgICAgcHVibGljIGFkZENoaWxkcmVuKHRhcmdldDogYW55KTogR3JvdXBQcm9maWxlIHtcclxuICAgICAgICAgICAgY29uc3QgY2hpbGRyZW46IEdyb3VwUHJvZmlsZVtdID0gKHRhcmdldCBpbnN0YW5jZW9mIEFycmF5KSA/IHRhcmdldCA6IFt0YXJnZXRdO1xyXG4gICAgICAgICAgICBjaGlsZHJlbi5mb3JFYWNoKChjaGlsZCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY2hpbGQuc2V0UGFyZW50KHRoaXMpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGhpcy5fY2hpbGRyZW4gPSB0aGlzLl9jaGlsZHJlbi5jb25jYXQoY2hpbGRyZW4pO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOimqiBHcm91cFByb2ZpbGUg44KS5Y+W5b6XXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJuIHtHcm91cFByb2ZpbGV9IEdyb3VwUHJvZmlsZSDopqog44Kk44Oz44K544K/44Oz44K5XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIGdldFBhcmVudCgpOiBHcm91cFByb2ZpbGUge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fcGFyZW50O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog5a2QIEdyb3VwUHJvZmlsZSDjgpLlj5blvpdcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm4ge0dyb3VwUHJvZmlsZVtdfSBHcm91cFByb2ZpbGUg5a2QIOOCpOODs+OCueOCv+ODs+OCuemFjeWIl1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBnZXRDaGlsZHJlbigpOiBHcm91cFByb2ZpbGVbXSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9jaGlsZHJlbjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOWtkCBHcm91cCDjgpLmjIHjgaPjgabjgYTjgovjgYvliKTlrppcclxuICAgICAgICAgKiBsYXlvdXRLZXkg44GM5oyH5a6a44GV44KM44KM44Gw44CBbGF5b3V0IOOBrueKtuaFi+OBvuOBp+WIpOWumlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGxheW91dEtleSB7U3RyaW5nfSBbaW5dIGxheW91dCDmr47jgavkvb/nlKjjgZnjgovorZjliKXlrZAgKOOCquODl+OCt+ODp+ODiuODqylcclxuICAgICAgICAgKiBAcmV0dXJuIHtCb29sZWFufSB0cnVlOiDmnIksIGZhbHNlOiDnhKFcclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgaGFzQ2hpbGRyZW4obGF5b3V0S2V5Pzogc3RyaW5nKTogYm9vbGVhbiB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9jaGlsZHJlbi5sZW5ndGggPD0gMCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKG51bGwgIT0gbGF5b3V0S2V5KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fY2hpbGRyZW5bMF0uaGFzTGF5b3V0S2V5T2YobGF5b3V0S2V5KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBsYXlvdXQg44Gu54q25oWL44KS5Yik5a6aXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gbGF5b3V0S2V5IHtTdHJpbmd9IFtpbl0gbGF5b3V0IOavjuOBq+S9v+eUqOOBmeOCi+itmOWIpeWtkFxyXG4gICAgICAgICAqIEByZXR1cm4ge0Jvb2xlYW59IHRydWU6IOaciSwgZmFsc2U6IOeEoVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBoYXNMYXlvdXRLZXlPZihsYXlvdXRLZXk6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICBpZiAobnVsbCA9PSBsYXlvdXRLZXkpIHtcclxuICAgICAgICAgICAgICAgIGxheW91dEtleSA9IEdyb3VwUHJvZmlsZS5MQVlPVVRfS0VZX0RFRkFVTFQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIChudWxsICE9IHRoaXMuX21hcExpbmVzW2xheW91dEtleV0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog44Kw44Or44O844OX5bGV6ZaLXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIGV4cGFuZCgpOiB2b2lkIHtcclxuICAgICAgICAgICAgbGV0IGxpbmVzOiBMaW5lUHJvZmlsZVtdID0gW107XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9saW5lcy5sZW5ndGggPCAwKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oVEFHICsgXCJ0aGlzIGdyb3VwIGhhcyBubyBsaW5lcy5cIik7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIXRoaXMuaGFzQ2hpbGRyZW4oKSkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFRBRyArIFwidGhpcyBncm91cCBoYXMgbm8gY2hpbGRyZW4uXCIpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKCF0aGlzLmlzRXhwYW5kZWQoKSkge1xyXG4gICAgICAgICAgICAgICAgbGluZXMgPSB0aGlzLnF1ZXJ5T3BlcmF0aW9uVGFyZ2V0KFwicmVnaXN0ZXJlZFwiKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2V4cGFuZGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGlmICgwIDwgbGluZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fb3duZXIuc3RhdHVzU2NvcGUoXCJleHBhbmRpbmdcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDoh6rouqvjgpLmm7TmlrBcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fbGluZXMuZm9yRWFjaCgobGluZTogTGluZVByb2ZpbGUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbmUucmVmcmVzaCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8g6YWN5LiL44KS5pu05pawXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX293bmVyLl9hZGRMaW5lKGxpbmVzLCB0aGlzLmdldExhc3RMaW5lSW5kZXgoKSArIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9vd25lci51cGRhdGUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog44Kw44Or44O844OX5Y+O5p2fXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gZGVsYXkge051bWJlcn0gW2luXSDopoHntKDliYrpmaTjgavosrvjgoTjgZnpgYXlu7bmmYLplpMuIOaXouWumjogYW5pbWF0aW9uRHVyYXRpb24g5YCkXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIGNvbGxhcHNlKGRlbGF5PzogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGxldCBsaW5lczogTGluZVByb2ZpbGVbXSA9IFtdO1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuaGFzQ2hpbGRyZW4oKSkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFRBRyArIFwidGhpcyBncm91cCBoYXMgbm8gY2hpbGRyZW4uXCIpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuaXNFeHBhbmRlZCgpKSB7XHJcbiAgICAgICAgICAgICAgICBsaW5lcyA9IHRoaXMucXVlcnlPcGVyYXRpb25UYXJnZXQoXCJ1bnJlZ2lzdGVyZWRcIik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9leHBhbmRlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgaWYgKDAgPCBsaW5lcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICBkZWxheSA9IChudWxsICE9IGRlbGF5KSA/IGRlbGF5IDogdGhpcy5fb3duZXIuY29yZS5nZXRMaXN0Vmlld09wdGlvbnMoKS5hbmltYXRpb25EdXJhdGlvbjtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9vd25lci5zdGF0dXNTY29wZShcImNvbGxhcHNpbmdcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDoh6rouqvjgpLmm7TmlrBcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fbGluZXMuZm9yRWFjaCgobGluZTogTGluZVByb2ZpbGUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbmUucmVmcmVzaCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8g6YWN5LiL44KS5pu05pawXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX293bmVyLnJlbW92ZUl0ZW0obGluZXNbMF0uaW5kZXgsIGxpbmVzLmxlbmd0aCwgZGVsYXkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9vd25lci51cGRhdGUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog6Ieq6Lqr44KS44Oq44K544OI44Gu5Y+v6KaW6aCY5Z+f44Gr6KGo56S6XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gb3B0aW9ucyB7RW5zdXJlVmlzaWJsZU9wdGlvbnN9IFtpbl0g44Kq44OX44K344On44OzXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZW5zdXJlVmlzaWJsZShvcHRpb25zPzogRW5zdXJlVmlzaWJsZU9wdGlvbnMpOiB2b2lkIHtcclxuICAgICAgICAgICAgaWYgKDAgPCB0aGlzLl9saW5lcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX293bmVyLmVuc3VyZVZpc2libGUodGhpcy5fbGluZXNbMF0uaW5kZXgsIG9wdGlvbnMpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKG51bGwgIT0gb3B0aW9ucy5jYWxsYmFjaykge1xyXG4gICAgICAgICAgICAgICAgb3B0aW9ucy5jYWxsYmFjaygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDplovplonjga7jg4jjgrDjg6tcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBkZWxheSB7TnVtYmVyfSBbaW5dIGNvbGxhcHNlIOOBruimgee0oOWJiumZpOOBq+iyu+OChOOBmemBheW7tuaZgumWky4g5pei5a6aOiBhbmltYXRpb25EdXJhdGlvbiDlgKRcclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgdG9nZ2xlKGRlbGF5PzogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9leHBhbmRlZCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb2xsYXBzZShkZWxheSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmV4cGFuZCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDlsZXplovnirbmhYvjgpLliKTlrppcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm4ge0Jvb2xlYW59IHRydWU6IOWxlemWiywgZmFsc2U65Y+O5p2fXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIGlzRXhwYW5kZWQoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9leHBhbmRlZDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIGxpc3QgdmlldyDjgbjnmbvpjLJcclxuICAgICAgICAgKiBUb3AgR3JvdXAg44Gu44G/55m76Yyy5Y+v6IO9XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gaW5zZXJ0VG8ge051bWJlcn0g5oy/5YWl5L2N572u44KSIGluZGV4IOOBp+aMh+WumlxyXG4gICAgICAgICAqIEByZXR1cm4ge0dyb3VwUHJvZmlsZX0g5pys44Kk44Oz44K544K/44Oz44K5XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIHJlZ2lzdGVyKGluc2VydFRvOiBudW1iZXIpOiBHcm91cFByb2ZpbGUge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fcGFyZW50KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFRBRyArIFwibG9naWMgZXJyb3I6ICdyZWdpc3RlcicgbWV0aG9kIGlzIGFjY2VwdGFibGUgb25seSB0b3AgZ3JvdXAuXCIpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fb3duZXIuX2FkZExpbmUodGhpcy5wcmVwcm9jZXNzKFwicmVnaXN0ZXJlZFwiKSwgaW5zZXJ0VG8pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogbGlzdCB2aWV3IOOBuOW+qeWFg1xyXG4gICAgICAgICAqIFRvcCBHcm91cCDjga7jgb/nmbvpjLLlj6/og71cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm4ge0dyb3VwUHJvZmlsZX0g5pys44Kk44Oz44K544K/44Oz44K5XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIHJlc3RvcmUoKTogR3JvdXBQcm9maWxlIHtcclxuICAgICAgICAgICAgbGV0IGxpbmVzOiBMaW5lUHJvZmlsZVtdID0gW107XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9wYXJlbnQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoVEFHICsgXCJsb2dpYyBlcnJvcjogJ3Jlc3RvcmUnIG1ldGhvZCBpcyBhY2NlcHRhYmxlIG9ubHkgdG9wIGdyb3VwLlwiKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLl9saW5lcykge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX2V4cGFuZGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGluZXMgPSB0aGlzLl9saW5lcy5jb25jYXQodGhpcy5xdWVyeU9wZXJhdGlvblRhcmdldChcImFjdGl2ZVwiKSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGxpbmVzID0gdGhpcy5fbGluZXM7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9vd25lci5fYWRkTGluZShsaW5lcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDphY3kuIvjga7mnIDlvozjga4gbGluZSBpbmRleCDjgpLlj5blvpdcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB3aXRoQWN0aXZlQ2hpbGRyZW4ge0Jvb2xlYW59IFtpbl0g55m76Yyy5riI44G/44Gu5a2QIEdyb3VwUHJvZmlsZSDjgpLlkKvjgoHjgabmpJzntKLjgZnjgovloLTlkIjjga8gdHJ1ZSDjgpLmjIflrppcclxuICAgICAgICAgKiBAcmV0dXJuIHtOdW1iZXJ9IGluZGV4LiDjgqjjg6njg7zjga7loLTlkIjjga8gbnVsbC5cclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgZ2V0TGFzdExpbmVJbmRleCh3aXRoQWN0aXZlQ2hpbGRyZW46IGJvb2xlYW4gPSBmYWxzZSk6IG51bWJlciB7XHJcbiAgICAgICAgICAgIGNvbnN0IGxpbmVzOiBMaW5lUHJvZmlsZVtdID0gKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIGxldCBfbGluZXM6IExpbmVQcm9maWxlW107XHJcbiAgICAgICAgICAgICAgICBpZiAod2l0aEFjdGl2ZUNoaWxkcmVuKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX2xpbmVzID0gdGhpcy5xdWVyeU9wZXJhdGlvblRhcmdldChcImFjdGl2ZVwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChudWxsID09IGxpbmVzIHx8IGxpbmVzLmxlbmd0aCA8PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX2xpbmVzID0gdGhpcy5fbGluZXM7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX2xpbmVzO1xyXG4gICAgICAgICAgICB9KSgpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGxpbmVzLmxlbmd0aCA8PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFRBRyArIFwibG9naWMgZXJyb3I6IHRoaXMgZ3JvdXAgaXMgc3RpbCBub3QgcmVnaXN0ZXJlZC5cIik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBsaW5lc1tsaW5lcy5sZW5ndGggLSAxXS5pbmRleDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogSUQg44KS5Y+W5b6XXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJuIHtTdHJpbmd9IOWJsuOCiuaMr+OCieOCjOOBnyBJRFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGdldCBpZCgpOiBzdHJpbmcge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5faWQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDjgrnjg4bjg7zjgr/jgrnjgpLlj5blvpdcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm4ge1N0cmluZ30g44K544OG44O844K/44K55paH5a2X5YiXXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZ2V0IHN0YXR1cygpOiBzdHJpbmcge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fc3RhdHVzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgICAgICAvLyBwcml2YXRlIG1ldGhvZFxyXG5cclxuICAgICAgICAvKiB0c2xpbnQ6ZGlzYWJsZTpuby11bnVzZWQtdmFyaWFibGUgKi9cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog6KaqIEdyb3VwIOaMh+WumlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHBhcmVudCB7R3JvdXBQcm9maWxlfSBbaW5dIOimqiBHcm91cFByb2ZpbGUg44Kk44Oz44K544K/44Oz44K5XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJpdmF0ZSBzZXRQYXJlbnQocGFyZW50OiBHcm91cFByb2ZpbGUpOiB2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy5fcGFyZW50ID0gcGFyZW50O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyogdHNsaW50OmVuYWJsZTpuby11bnVzZWQtdmFyaWFibGUgKi9cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogcmVnaXN0ZXIgLyB1bnJlZ2lzdGVyIOOBruWJjeWHpueQhlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIG5ld1N0YXR1cyB7U3RyaW5nfSBbaW5dIOaWsOOCueODhuODvOOCv+OCueaWh+Wtl+WIl1xyXG4gICAgICAgICAqIEByZXR1cm4ge0xpbmVQcm9maWxlW119IOabtOaWsOOBmeOBueOBjSBMaW5lUHJvZmlsZSDjga7phY3liJdcclxuICAgICAgICAgKi9cclxuICAgICAgICBwcml2YXRlIHByZXByb2Nlc3MobmV3U3RhdHVzOiBzdHJpbmcpOiBMaW5lUHJvZmlsZVtdIHtcclxuICAgICAgICAgICAgbGV0IGxpbmVzOiBMaW5lUHJvZmlsZVtdID0gW107XHJcbiAgICAgICAgICAgIGlmIChuZXdTdGF0dXMgIT09IHRoaXMuX3N0YXR1cyAmJiBudWxsICE9IHRoaXMuX2xpbmVzKSB7XHJcbiAgICAgICAgICAgICAgICBsaW5lcyA9IHRoaXMuX2xpbmVzO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuX3N0YXR1cyA9IG5ld1N0YXR1cztcclxuICAgICAgICAgICAgcmV0dXJuIGxpbmVzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog5pON5L2c5a++6LGh44GuIExpbmVQcm9maWxlIOmFjeWIl+OCkuWPluW+l1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIG5ld1N0YXR1cyB7U3RyaW5nfSBbaW5dIOaWsOOCueODhuODvOOCv+OCueaWh+Wtl+WIl1xyXG4gICAgICAgICAqIEByZXR1cm4ge0xpbmVQcm9maWxlW119IOaTjeS9nOWvvuixoeOBriBMaW5lUHJvZmlsZSDjga7phY3liJdcclxuICAgICAgICAgKi9cclxuICAgICAgICBwcml2YXRlIHF1ZXJ5T3BlcmF0aW9uVGFyZ2V0KG9wZXJhdGlvbjogc3RyaW5nKTogTGluZVByb2ZpbGVbXSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGZpbmRUYXJnZXRzID0gKGdyb3VwOiBHcm91cFByb2ZpbGUpOiBMaW5lUHJvZmlsZVtdID0+IHtcclxuICAgICAgICAgICAgICAgIGxldCBsaW5lczogTGluZVByb2ZpbGVbXSA9IFtdO1xyXG4gICAgICAgICAgICAgICAgZ3JvdXAuX2NoaWxkcmVuLmZvckVhY2goKGNoaWxkOiBHcm91cFByb2ZpbGUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKG9wZXJhdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwicmVnaXN0ZXJlZFwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGluZXMgPSBsaW5lcy5jb25jYXQoY2hpbGQucHJlcHJvY2VzcyhvcGVyYXRpb24pKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwidW5yZWdpc3RlcmVkXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaW5lcyA9IGxpbmVzLmNvbmNhdChjaGlsZC5wcmVwcm9jZXNzKG9wZXJhdGlvbikpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJhY3RpdmVcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChudWxsICE9IGNoaWxkLl9saW5lcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbmVzID0gbGluZXMuY29uY2F0KGNoaWxkLl9saW5lcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihUQUcgKyBcInVua25vd24gb3BlcmF0aW9uOiBcIiArIG9wZXJhdGlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjaGlsZC5pc0V4cGFuZGVkKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGluZXMgPSBsaW5lcy5jb25jYXQoZmluZFRhcmdldHMoY2hpbGQpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBsaW5lcztcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgcmV0dXJuIGZpbmRUYXJnZXRzKHRoaXMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog6Ieq6Lqr44Gu566h55CG44GZ44KL44Ki44Kv44OG44Kj44OW44GqIExpbmVQcm9maWUg44KS5Y+W5b6XXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJuIHtMaW5lUHJvZmlsZVtdfSBMaW5lUHJvZmllIOmFjeWIl1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHByaXZhdGUgZ2V0IF9saW5lcygpOiBMaW5lUHJvZmlsZVtdIHtcclxuICAgICAgICAgICAgY29uc3Qga2V5ID0gdGhpcy5fb3duZXIubGF5b3V0S2V5O1xyXG4gICAgICAgICAgICBpZiAobnVsbCAhPSBrZXkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9tYXBMaW5lc1trZXldO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX21hcExpbmVzW0dyb3VwUHJvZmlsZS5MQVlPVVRfS0VZX0RFRkFVTFRdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIm5hbWVzcGFjZSBDRFAuVUkge1xyXG5cclxuICAgIGltcG9ydCBfVXRpbHMgPSBDRFAuVUkuX0xpc3RWaWV3VXRpbHM7XHJcblxyXG4gICAgY29uc3QgVEFHID0gXCJbQ0RQLlVJLlNjcm9sbGVyRWxlbWVudF0gXCI7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAY2xhc3MgU2Nyb2xsZXJFbGVtZW50XHJcbiAgICAgKiBAYnJpZWYgSFRNTEVsZW1lbnQg44GuIFNjcm9sbGVyIOOCr+ODqeOCuVxyXG4gICAgICovXHJcbiAgICBleHBvcnQgY2xhc3MgU2Nyb2xsZXJFbGVtZW50IGltcGxlbWVudHMgSVNjcm9sbGVyIHtcclxuICAgICAgICBwcml2YXRlIF8kdGFyZ2V0OiBKUXVlcnkgPSBudWxsO1xyXG4gICAgICAgIHByaXZhdGUgXyRzY3JvbGxNYXA6IEpRdWVyeSA9IG51bGw7XHJcbiAgICAgICAgcHJpdmF0ZSBfbGlzdHZpZXdPcHRpb25zOiBMaXN0Vmlld09wdGlvbnMgPSBudWxsO1xyXG5cclxuICAgICAgICAvLyEgY29uc3RydWN0b3JcclxuICAgICAgICBjb25zdHJ1Y3RvcihlbGVtZW50OiBzdHJpbmcsIG9wdGlvbnM6IExpc3RWaWV3T3B0aW9ucyk7XHJcbiAgICAgICAgY29uc3RydWN0b3IoZWxlbWVudDogSFRNTEVsZW1lbnQsIG9wdGlvbnM6IExpc3RWaWV3T3B0aW9ucyk7XHJcbiAgICAgICAgY29uc3RydWN0b3IoZWxlbWVudDogYW55LCBvcHRpb25zOiBMaXN0Vmlld09wdGlvbnMpIHtcclxuICAgICAgICAgICAgdGhpcy5fJHRhcmdldCA9ICQoZWxlbWVudCk7XHJcbiAgICAgICAgICAgIHRoaXMuX2xpc3R2aWV3T3B0aW9ucyA9IG9wdGlvbnM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEgU2Nyb2xsZXIg44Gu5Z6L44KS5Y+W5b6XXHJcbiAgICAgICAgZ2V0VHlwZSgpOiBzdHJpbmcge1xyXG4gICAgICAgICAgICByZXR1cm4gU2Nyb2xsZXJFbGVtZW50LlRZUEU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEgcG9zaXRpb24g5Y+W5b6XXHJcbiAgICAgICAgZ2V0UG9zKCk6IG51bWJlciB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl8kdGFyZ2V0LnNjcm9sbFRvcCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIHBvc2l0aW9uIOOBruacgOWkp+WApOOCkuWPluW+l1xyXG4gICAgICAgIGdldFBvc01heCgpOiBudW1iZXIge1xyXG4gICAgICAgICAgICBpZiAobnVsbCA9PSB0aGlzLl8kc2Nyb2xsTWFwKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl8kc2Nyb2xsTWFwID0gdGhpcy5fJHRhcmdldC5jaGlsZHJlbigpLmZpcnN0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIF9VdGlscy5tYXgodGhpcy5fJHNjcm9sbE1hcC5oZWlnaHQoKSAtIHRoaXMuXyR0YXJnZXQuaGVpZ2h0KCksIDApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOOCpOODmeODs+ODiOeZu+mMslxyXG4gICAgICAgIG9uKHR5cGU6IHN0cmluZywgZnVuYzogKGV2ZW50OiBKUXVlcnkuRXZlbnQpID0+IHZvaWQpOiB2b2lkIHtcclxuICAgICAgICAgICAgc3dpdGNoICh0eXBlKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwic2Nyb2xsXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fJHRhcmdldC5vbihcInNjcm9sbFwiLCBmdW5jKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJzY3JvbGxzdG9wXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fJHRhcmdldC5vbihcInNjcm9sbHN0b3BcIiwgZnVuYyk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihUQUcgKyBcInVuc3VwcG9ydGVkIHR5cGU6IFwiICsgdHlwZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDjgqTjg5njg7Pjg4jnmbvpjLLop6PpmaRcclxuICAgICAgICBvZmYodHlwZTogc3RyaW5nLCBmdW5jOiAoZXZlbnQ6IEpRdWVyeS5FdmVudCkgPT4gdm9pZCk6IHZvaWQge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJzY3JvbGxcIjpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl8kdGFyZ2V0Lm9mZihcInNjcm9sbFwiLCBmdW5jKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJzY3JvbGxzdG9wXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fJHRhcmdldC5vZmYoXCJzY3JvbGxzdG9wXCIsIGZ1bmMpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oVEFHICsgXCJ1bnN1cHBvcnRlZCB0eXBlOiBcIiArIHR5cGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg44K544Kv44Ot44O844Or5L2N572u44KS5oyH5a6aXHJcbiAgICAgICAgc2Nyb2xsVG8ocG9zOiBudW1iZXIsIGFuaW1hdGU/OiBib29sZWFuLCB0aW1lPzogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5fbGlzdHZpZXdPcHRpb25zLmVuYWJsZUFuaW1hdGlvbiB8fCAhYW5pbWF0ZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fJHRhcmdldC5zY3JvbGxUb3AocG9zKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmIChudWxsID09IHRpbWUpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aW1lID0gdGhpcy5fbGlzdHZpZXdPcHRpb25zLmFuaW1hdGlvbkR1cmF0aW9uO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5fJHRhcmdldC5hbmltYXRlKHtcclxuICAgICAgICAgICAgICAgICAgICBzY3JvbGxUb3A6IHBvc1xyXG4gICAgICAgICAgICAgICAgfSwgdGltZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISBTY3JvbGxlciDjga7nirbmhYvmm7TmlrBcclxuICAgICAgICB1cGRhdGUoKTogdm9pZCB7XHJcbiAgICAgICAgICAgIC8vIG5vb3AuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEgU2Nyb2xsZXIg44Gu56C05qOEXHJcbiAgICAgICAgZGVzdHJveSgpOiB2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy5fJHNjcm9sbE1hcCA9IG51bGw7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl8kdGFyZ2V0KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl8kdGFyZ2V0Lm9mZigpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fJHRhcmdldCA9IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDjgr/jgqTjg5flrprnvqlcclxuICAgICAgICBwdWJsaWMgc3RhdGljIGdldCBUWVBFKCk6IHN0cmluZyB7XHJcbiAgICAgICAgICAgIHJldHVybiBcImVsZW1lbnQtb3ZlcmZsb3dcIjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISBmYWN0b3J5IOWPluW+l1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgZ2V0RmFjdG9yeSgpOiAoZWxlbWVudDogYW55LCBvcHRpb25zOiBMaXN0Vmlld09wdGlvbnMpID0+IElTY3JvbGxlciB7XHJcbiAgICAgICAgICAgIGNvbnN0IGZhY3RvcnkgPSAoZWxlbWVudDogYW55LCBvcHRpb25zOiBMaXN0Vmlld09wdGlvbnMpOiBJU2Nyb2xsZXIgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBTY3JvbGxlckVsZW1lbnQoZWxlbWVudCwgb3B0aW9ucyk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIC8vIHNldCB0eXBlIHNpZ25hdHVyZS5cclxuICAgICAgICAgICAgKDxhbnk+ZmFjdG9yeSkudHlwZSA9IFNjcm9sbGVyRWxlbWVudC5UWVBFO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFjdG9yeTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwibmFtZXNwYWNlIENEUC5VSSB7XHJcblxyXG4gICAgaW1wb3J0IF9VdGlscyA9IENEUC5VSS5fTGlzdFZpZXdVdGlscztcclxuXHJcbiAgICBjb25zdCBUQUcgPSBcIltDRFAuVUkuU2Nyb2xsZXJOYXRpdmVdIFwiO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGNsYXNzIFNjcm9sbGVyTmF0aXZlXHJcbiAgICAgKiBAYnJpZWYgQnJvd3NlciBOYXRpdmUg44GuIFNjcm9sbGVyIOOCr+ODqeOCuVxyXG4gICAgICovXHJcbiAgICBleHBvcnQgY2xhc3MgU2Nyb2xsZXJOYXRpdmUgaW1wbGVtZW50cyBJU2Nyb2xsZXIge1xyXG4gICAgICAgIHByaXZhdGUgXyRib2R5OiBKUXVlcnkgPSBudWxsO1xyXG4gICAgICAgIHByaXZhdGUgXyR0YXJnZXQ6IEpRdWVyeSA9IG51bGw7XHJcbiAgICAgICAgcHJpdmF0ZSBfbGlzdHZpZXdPcHRpb25zOiBMaXN0Vmlld09wdGlvbnMgPSBudWxsO1xyXG5cclxuICAgICAgICAvLyEgY29uc3RydWN0b3JcclxuICAgICAgICBjb25zdHJ1Y3RvcihvcHRpb25zOiBMaXN0Vmlld09wdGlvbnMpIHtcclxuICAgICAgICAgICAgdGhpcy5fJHRhcmdldCA9ICQoZG9jdW1lbnQpO1xyXG4gICAgICAgICAgICB0aGlzLl8kYm9keSA9ICQoXCJib2R5XCIpO1xyXG4gICAgICAgICAgICB0aGlzLl9saXN0dmlld09wdGlvbnMgPSBvcHRpb25zO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIFNjcm9sbGVyIOOBruWei+OCkuWPluW+l1xyXG4gICAgICAgIGdldFR5cGUoKTogc3RyaW5nIHtcclxuICAgICAgICAgICAgcmV0dXJuIFNjcm9sbGVyTmF0aXZlLlRZUEU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEgcG9zaXRpb24g5Y+W5b6XXHJcbiAgICAgICAgZ2V0UG9zKCk6IG51bWJlciB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl8kdGFyZ2V0LnNjcm9sbFRvcCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIHBvc2l0aW9uIOOBruacgOWkp+WApOOCkuWPluW+l1xyXG4gICAgICAgIGdldFBvc01heCgpOiBudW1iZXIge1xyXG4gICAgICAgICAgICByZXR1cm4gX1V0aWxzLm1heCh0aGlzLl8kdGFyZ2V0LmhlaWdodCgpIC0gd2luZG93LmlubmVySGVpZ2h0LCAwKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDjgqTjg5njg7Pjg4jnmbvpjLJcclxuICAgICAgICBvbih0eXBlOiBzdHJpbmcsIGZ1bmM6IChldmVudDogSlF1ZXJ5LkV2ZW50KSA9PiB2b2lkKTogdm9pZCB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAodHlwZSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcInNjcm9sbFwiOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuXyR0YXJnZXQub24oXCJzY3JvbGxcIiwgZnVuYyk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwic2Nyb2xsc3RvcFwiOlxyXG4gICAgICAgICAgICAgICAgICAgICQod2luZG93KS5vbihcInNjcm9sbHN0b3BcIiwgZnVuYyk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihUQUcgKyBcInVuc3VwcG9ydGVkIHR5cGU6IFwiICsgdHlwZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDjgqTjg5njg7Pjg4jnmbvpjLLop6PpmaRcclxuICAgICAgICBvZmYodHlwZTogc3RyaW5nLCBmdW5jOiAoZXZlbnQ6IEpRdWVyeS5FdmVudCkgPT4gdm9pZCk6IHZvaWQge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJzY3JvbGxcIjpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl8kdGFyZ2V0Lm9mZihcInNjcm9sbFwiLCBmdW5jKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJzY3JvbGxzdG9wXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgJCh3aW5kb3cpLm9mZihcInNjcm9sbHN0b3BcIiwgZnVuYyk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihUQUcgKyBcInVuc3VwcG9ydGVkIHR5cGU6IFwiICsgdHlwZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDjgrnjgq/jg63jg7zjg6vkvY3nva7jgpLmjIflrppcclxuICAgICAgICBzY3JvbGxUbyhwb3M6IG51bWJlciwgYW5pbWF0ZT86IGJvb2xlYW4sIHRpbWU/OiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLl9saXN0dmlld09wdGlvbnMuZW5hYmxlQW5pbWF0aW9uIHx8ICFhbmltYXRlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl8kYm9keS5zY3JvbGxUb3AocG9zKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmIChudWxsID09IHRpbWUpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aW1lID0gdGhpcy5fbGlzdHZpZXdPcHRpb25zLmFuaW1hdGlvbkR1cmF0aW9uO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5fJGJvZHkuYW5pbWF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsVG9wOiBwb3NcclxuICAgICAgICAgICAgICAgIH0sIHRpbWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEgU2Nyb2xsZXIg44Gu54q25oWL5pu05pawXHJcbiAgICAgICAgdXBkYXRlKCk6IHZvaWQge1xyXG4gICAgICAgICAgICAvLyBub29wLlxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIFNjcm9sbGVyIOOBruegtOajhFxyXG4gICAgICAgIGRlc3Ryb3koKTogdm9pZCB7XHJcbiAgICAgICAgICAgIHRoaXMuXyR0YXJnZXQgPSBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOOCv+OCpOODl+Wumue+qVxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgZ2V0IFRZUEUoKTogc3RyaW5nIHtcclxuICAgICAgICAgICAgcmV0dXJuIFwibmF0aXZlLXNjcm9sbFwiO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIGZhY3Rvcnkg5Y+W5b6XXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBnZXRGYWN0b3J5KCk6IChlbGVtZW50OiBhbnksIG9wdGlvbnM6IExpc3RWaWV3T3B0aW9ucykgPT4gSVNjcm9sbGVyIHtcclxuICAgICAgICAgICAgY29uc3QgZmFjdG9yeSA9IChlbGVtZW50OiBhbnksIG9wdGlvbnM6IExpc3RWaWV3T3B0aW9ucyk6IElTY3JvbGxlciA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFNjcm9sbGVyTmF0aXZlKG9wdGlvbnMpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAvLyBzZXQgdHlwZSBzaWduYXR1cmUuXHJcbiAgICAgICAgICAgICg8YW55PmZhY3RvcnkpLnR5cGUgPSBTY3JvbGxlck5hdGl2ZS5UWVBFO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFjdG9yeTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiLy8gZm9yIG5vbiBpc2Nyb2xsIHVzZXIuIGNkcC51aS5saXN0dmlldy5kLnRzIGludGVybmFsIGRlZmluaXRpb24uXHJcbmludGVyZmFjZSBJU2Nyb2xsT3B0aW9ucyB7XHJcbiAgICBbeDogc3RyaW5nXTogYW55O1xyXG4gICAgcHJvYmVUeXBlPzogbnVtYmVyOyAvLyBbY2FsbSA6MSA8IDIgPCAzOiBhZ2dyZXNzaXZlXVxyXG59XHJcblxyXG5uYW1lc3BhY2UgQ0RQLlVJIHtcclxuXHJcbiAgICBpbXBvcnQgX0NvbmZpZyAgPSBDRFAuVUkuTGlzdFZpZXdHbG9iYWxDb25maWc7XHJcbiAgICBpbXBvcnQgX1V0aWxzICAgPSBDRFAuVUkuX0xpc3RWaWV3VXRpbHM7XHJcblxyXG4gICAgY29uc3QgVEFHID0gXCJbQ0RQLlVJLlNjcm9sbGVySVNjcm9sbF0gXCI7XHJcblxyXG4gICAgaW50ZXJmYWNlIElTY3JvbGxFeCBleHRlbmRzIElTY3JvbGwge1xyXG4gICAgICAgIG9uOiAodHlwZTogc3RyaW5nLCBmbjogKGV2ZW50OiBhbnkpID0+IHZvaWQpID0+IHZvaWQ7XHJcbiAgICAgICAgb2ZmOiAodHlwZTogc3RyaW5nLCBmbjogKGV2ZW50OiBhbnkpID0+IHZvaWQpID0+IHZvaWQ7XHJcbiAgICAgICAgd3JhcHBlcjogSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgc2Nyb2xsZXI6IEhUTUxFbGVtZW50O1xyXG4gICAgICAgIHNjcm9sbGVyV2lkdGg6IG51bWJlcjtcclxuICAgICAgICBzY3JvbGxlckhlaWdodDogbnVtYmVyO1xyXG4gICAgICAgIG1heFNjcm9sbFg6IG51bWJlcjtcclxuICAgICAgICBtYXhTY3JvbGxZOiBudW1iZXI7XHJcbiAgICAgICAgZ2V0Q29tcHV0ZWRQb3NpdGlvbigpOiBhbnk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAY2xhc3MgU2Nyb2xsZXJJU2Nyb2xsXHJcbiAgICAgKiBAYnJpZWYgaVNjcm9sbCDjgpLkvb/nlKjjgZfjgZ8gU2Nyb2xsZXIg44Kv44Op44K5XHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBjbGFzcyBTY3JvbGxlcklTY3JvbGwgaW1wbGVtZW50cyBJU2Nyb2xsZXIge1xyXG4gICAgICAgIHByaXZhdGUgXyRvd25lcjogSlF1ZXJ5ID0gbnVsbDtcclxuICAgICAgICBwcml2YXRlIF9pc2Nyb2xsOiBJU2Nyb2xsRXggPSBudWxsO1xyXG4gICAgICAgIHByaXZhdGUgX3JlZnJlc2hUaW1lcklkOiBudW1iZXIgPSBudWxsO1xyXG4gICAgICAgIHByaXZhdGUgXyR3cmFwcGVyOiBKUXVlcnkgPSBudWxsO1xyXG4gICAgICAgIHByaXZhdGUgXyRzY3JvbGxlcjogSlF1ZXJ5ID0gbnVsbDtcclxuICAgICAgICBwcml2YXRlIF9saXN0dmlld09wdGlvbnM6IExpc3RWaWV3T3B0aW9ucyA9IG51bGw7XHJcblxyXG4gICAgICAgIC8vISBjb25zdHJ1Y3RvclxyXG4gICAgICAgIGNvbnN0cnVjdG9yKCRvd25lcjogSlF1ZXJ5LCBlbGVtZW50OiBzdHJpbmcsIGlzY3JvbGxPcHRpb25zOiBJU2Nyb2xsT3B0aW9ucywgbGlzdHZpZXdPcHRpb25zOiBMaXN0Vmlld09wdGlvbnMpO1xyXG4gICAgICAgIGNvbnN0cnVjdG9yKCRvd25lcjogSlF1ZXJ5LCBlbGVtZW50OiBIVE1MRWxlbWVudCwgaXNjcm9sbE9wdGlvbnM6IElTY3JvbGxPcHRpb25zLCBsaXN0dmlld09wdGlvbnM6IExpc3RWaWV3T3B0aW9ucyk7XHJcbiAgICAgICAgY29uc3RydWN0b3IoJG93bmVyOiBKUXVlcnksIGVsZW1lbnQ6IGFueSwgaXNjcm9sbE9wdGlvbnM6IElTY3JvbGxPcHRpb25zLCBsaXN0dmlld09wdGlvbnM6IExpc3RWaWV3T3B0aW9ucykge1xyXG4gICAgICAgICAgICBpZiAobnVsbCAhPSBnbG9iYWwuSVNjcm9sbCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fJG93bmVyID0gJG93bmVyO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5faXNjcm9sbCA9IDxJU2Nyb2xsRXg+bmV3IElTY3JvbGwoZWxlbWVudCwgaXNjcm9sbE9wdGlvbnMpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fJHdyYXBwZXIgPSAkKHRoaXMuX2lzY3JvbGwud3JhcHBlcik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl8kc2Nyb2xsZXIgPSAkKHRoaXMuX2lzY3JvbGwuc2Nyb2xsZXIpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbGlzdHZpZXdPcHRpb25zID0gbGlzdHZpZXdPcHRpb25zO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihUQUcgKyBcImlzY3JvbGwgbW9kdWxlIGRvZXNuJ3QgbG9hZC5cIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISBTY3JvbGxlciDjga7lnovjgpLlj5blvpdcclxuICAgICAgICBnZXRUeXBlKCk6IHN0cmluZyB7XHJcbiAgICAgICAgICAgIHJldHVybiBTY3JvbGxlcklTY3JvbGwuVFlQRTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISBwb3NpdGlvbiDlj5blvpdcclxuICAgICAgICBnZXRQb3MoKTogbnVtYmVyIHtcclxuICAgICAgICAgICAgbGV0IHBvcyA9IHRoaXMuX2lzY3JvbGwuZ2V0Q29tcHV0ZWRQb3NpdGlvbigpLnk7XHJcbiAgICAgICAgICAgIGlmIChfLmlzTmFOKHBvcykpIHtcclxuICAgICAgICAgICAgICAgIHBvcyA9IDA7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBwb3MgPSAtcG9zO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBwb3M7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEgcG9zaXRpb24g44Gu5pyA5aSn5YCk44KS5Y+W5b6XXHJcbiAgICAgICAgZ2V0UG9zTWF4KCk6IG51bWJlciB7XHJcbiAgICAgICAgICAgIHJldHVybiBfVXRpbHMubWF4KC10aGlzLl9pc2Nyb2xsLm1heFNjcm9sbFksIDApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOOCpOODmeODs+ODiOeZu+mMslxyXG4gICAgICAgIG9uKHR5cGU6IHN0cmluZywgZnVuYzogKGV2ZW50OiBKUXVlcnkuRXZlbnQpID0+IHZvaWQpOiB2b2lkIHtcclxuICAgICAgICAgICAgc3dpdGNoICh0eXBlKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwic2Nyb2xsXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5faXNjcm9sbC5vbihcInNjcm9sbFwiLCBmdW5jKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJzY3JvbGxzdG9wXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5faXNjcm9sbC5vbihcInNjcm9sbEVuZFwiLCBmdW5jKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFRBRyArIFwidW5zdXBwb3J0ZWQgdHlwZTogXCIgKyB0eXBlKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOOCpOODmeODs+ODiOeZu+mMsuino+mZpFxyXG4gICAgICAgIG9mZih0eXBlOiBzdHJpbmcsIGZ1bmM6IChldmVudDogSlF1ZXJ5LkV2ZW50KSA9PiB2b2lkKTogdm9pZCB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAodHlwZSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcInNjcm9sbFwiOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2lzY3JvbGwub2ZmKFwic2Nyb2xsXCIsIGZ1bmMpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcInNjcm9sbHN0b3BcIjpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9pc2Nyb2xsLm9uKFwic2Nyb2xsRW5kXCIsIGZ1bmMpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oVEFHICsgXCJ1bnN1cHBvcnRlZCB0eXBlOiBcIiArIHR5cGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg44K544Kv44Ot44O844Or5L2N572u44KS5oyH5a6aXHJcbiAgICAgICAgc2Nyb2xsVG8ocG9zOiBudW1iZXIsIGFuaW1hdGU/OiBib29sZWFuLCB0aW1lPzogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgICAgICAgIHRpbWUgPSAwO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fbGlzdHZpZXdPcHRpb25zLmVuYWJsZUFuaW1hdGlvbiAmJiBhbmltYXRlKSB7XHJcbiAgICAgICAgICAgICAgICB0aW1lID0gdGltZSB8fCB0aGlzLl9saXN0dmlld09wdGlvbnMuYW5pbWF0aW9uRHVyYXRpb247XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5faXNjcm9sbC5zY3JvbGxUbygwLCAtcG9zLCB0aW1lKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISBTY3JvbGxlciDjga7nirbmhYvmm7TmlrBcclxuICAgICAgICB1cGRhdGUoKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl8kb3duZXIpIHtcclxuICAgICAgICAgICAgICAgIC8vIHVwZGF0ZSB3cmFwcGVyXHJcbiAgICAgICAgICAgICAgICAoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG93bmVySGVpZ2h0ID0gdGhpcy5fJG93bmVyLmhlaWdodCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvd25lckhlaWdodCAhPT0gdGhpcy5fJHdyYXBwZXIuaGVpZ2h0KCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fJHdyYXBwZXIuaGVpZ2h0KG93bmVySGVpZ2h0KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KSgpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChudWxsICE9IHRoaXMuX3JlZnJlc2hUaW1lcklkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuX3JlZnJlc2hUaW1lcklkKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBwcm9jID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl8kc2Nyb2xsZXIgJiYgdGhpcy5fJHNjcm9sbGVyLmhlaWdodCgpICE9PSB0aGlzLl9pc2Nyb2xsLnNjcm9sbGVySGVpZ2h0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2lzY3JvbGwucmVmcmVzaCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9yZWZyZXNoVGltZXJJZCA9IHNldFRpbWVvdXQocHJvYywgdGhpcy5fbGlzdHZpZXdPcHRpb25zLnNjcm9sbE1hcFJlZnJlc2hJbnRlcnZhbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fcmVmcmVzaFRpbWVySWQgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5faXNjcm9sbC5yZWZyZXNoKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9yZWZyZXNoVGltZXJJZCA9IHNldFRpbWVvdXQocHJvYywgdGhpcy5fbGlzdHZpZXdPcHRpb25zLnNjcm9sbE1hcFJlZnJlc2hJbnRlcnZhbCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISBTY3JvbGxlciDjga7noLTmo4RcclxuICAgICAgICBkZXN0cm95KCk6IHZvaWQge1xyXG4gICAgICAgICAgICB0aGlzLl8kc2Nyb2xsZXIgPSBudWxsO1xyXG4gICAgICAgICAgICB0aGlzLl8kd3JhcHBlciA9IG51bGw7XHJcbiAgICAgICAgICAgIHRoaXMuX2lzY3JvbGwuZGVzdHJveSgpO1xyXG4gICAgICAgICAgICB0aGlzLl8kb3duZXIgPSBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOOCv+OCpOODl+Wumue+qVxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgZ2V0IFRZUEUoKTogc3RyaW5nIHtcclxuICAgICAgICAgICAgcmV0dXJuIFwiaXNjcm9sbFwiO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIGZhY3Rvcnkg5Y+W5b6XXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBnZXRGYWN0b3J5KG9wdGlvbnM/OiBJU2Nyb2xsT3B0aW9ucyk6IChlbGVtZW50OiBhbnksIG9wdGlvbnM6IExpc3RWaWV3T3B0aW9ucykgPT4gSVNjcm9sbGVyIHtcclxuICAgICAgICAgICAgY29uc3QgZGVmYXVsdE9wdCA9IHtcclxuICAgICAgICAgICAgICAgIHNjcm9sbFg6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgYm91bmNlOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIHRhcDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGNsaWNrOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgbW91c2VXaGVlbDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHNjcm9sbGJhcnM6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBpbnRlcmFjdGl2ZVNjcm9sbGJhcnM6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBzaHJpbmtTY3JvbGxiYXJzOiBcInNjYWxlXCIsXHJcbiAgICAgICAgICAgICAgICBmYWRlU2Nyb2xsYmFyczogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHByZXZlbnREZWZhdWx0OiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIGRpc2FibGVQb2ludGVyOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgZGlzYWJsZU1vdXNlOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIGRpc2FibGVUb3VjaDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBwcm9iZVR5cGU6IDIsXHJcbi8vICAgICAgICAgICAgICAgZXZlbnRQYXNzdGhyb3VnaDogdHJ1ZSxcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGlzY3JvbGxPcHRpb25zID0gJC5leHRlbmQoe30sIGRlZmF1bHRPcHQsIG9wdGlvbnMpO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgZmFjdG9yeSA9IChlbGVtZW50OiBhbnksIGxpc3R2aWV3T3B0aW9uczogTGlzdFZpZXdPcHRpb25zKTogSVNjcm9sbGVyID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0ICRvd25lciA9ICQoZWxlbWVudCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCAkbWFwID0gJG93bmVyLmZpbmQoX0NvbmZpZy5TQ1JPTExfTUFQX1NFTEVDVE9SKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0ICR3cmFwcGVyID0gJChcIjxkaXYgY2xhc3M9J1wiICsgX0NvbmZpZy5XUkFQUEVSX0NMQVNTICsgXCInPjwvZGl2PlwiKVxyXG4gICAgICAgICAgICAgICAgICAgIC5jc3Moe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogXCJhYnNvbHV0ZVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogXCIxMDAlXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogXCIxMDAlXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG92ZXJmbG93OiBcImhpZGRlblwiLFxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgJG1hcC53cmFwKCR3cmFwcGVyKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgU2Nyb2xsZXJJU2Nyb2xsKCRvd25lciwgX0NvbmZpZy5XUkFQUEVSX1NFTEVDVE9SLCBpc2Nyb2xsT3B0aW9ucywgbGlzdHZpZXdPcHRpb25zKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgLy8gc2V0IHR5cGUgc2lnbmF0dXJlLlxyXG4gICAgICAgICAgICAoPGFueT5mYWN0b3J5KS50eXBlID0gU2Nyb2xsZXJJU2Nyb2xsLlRZUEU7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZmFjdG9yeTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwibmFtZXNwYWNlIENEUC5VSSB7XHJcblxyXG4gICAgY29uc3QgVEFHID0gXCJbQ0RQLlVJLkxpc3RJdGVtVmlld10gXCI7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAaW50ZXJmYWNlIExpc3RJdGVtVmlld09wdGlvbnNcclxuICAgICAqIEBicmllZiBMaXN0SXRlbVZpZXcg44Gu44Kq44OX44K344On44OzXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgTGlzdEl0ZW1WaWV3T3B0aW9uczxUTW9kZWwgZXh0ZW5kcyBCYWNrYm9uZS5Nb2RlbCA9IEJhY2tib25lLk1vZGVsPlxyXG4gICAgICAgIGV4dGVuZHMgQmFja2JvbmUuVmlld09wdGlvbnM8VE1vZGVsPiB7XHJcbiAgICAgICAgb3duZXI6IEJhc2VMaXN0VmlldztcclxuICAgICAgICAkZWw/OiBKUXVlcnk7XHJcbiAgICAgICAgbGluZVByb2ZpbGU6IExpbmVQcm9maWxlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGNsYXNzIExpc3RJdGVtVmlld1xyXG4gICAgICogQGJyaWVmIExpc3RWaWV3IOOBjOaJseOBhiBMaXN0SXRlbSDjgrPjg7Pjg4bjg4rjgq/jg6njgrlcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGNsYXNzIExpc3RJdGVtVmlldzxUTW9kZWwgZXh0ZW5kcyBCYWNrYm9uZS5Nb2RlbCA9IEJhY2tib25lLk1vZGVsPlxyXG4gICAgICAgIGV4dGVuZHMgQmFja2JvbmUuVmlldzxUTW9kZWw+IGltcGxlbWVudHMgSUxpc3RJdGVtVmlldywgSUNvbXBvc2FibGVWaWV3IHtcclxuXHJcbiAgICAgICAgcHJpdmF0ZSBfb3duZXI6IEJhc2VMaXN0VmlldyA9IG51bGw7XHJcbiAgICAgICAgcHJpdmF0ZSBfbGluZVByb2ZpbGU6IExpbmVQcm9maWxlID0gbnVsbDtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogY29uc3RydWN0b3JcclxuICAgICAgICAgKi9cclxuICAgICAgICBjb25zdHJ1Y3RvcihvcHRpb25zOiBMaXN0SXRlbVZpZXdPcHRpb25zPFRNb2RlbD4pIHtcclxuICAgICAgICAgICAgc3VwZXIob3B0aW9ucyk7XHJcbiAgICAgICAgICAgIHRoaXMuX293bmVyID0gb3B0aW9ucy5vd25lcjtcclxuICAgICAgICAgICAgaWYgKG9wdGlvbnMuJGVsKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBkZWxlZ2F0ZXMgPSAoPGFueT50aGlzKS5ldmVudHMgPyB0cnVlIDogZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldEVsZW1lbnQob3B0aW9ucy4kZWwsIGRlbGVnYXRlcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5fbGluZVByb2ZpbGUgPSBvcHRpb25zLmxpbmVQcm9maWxlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgICAgICAvLyBJbXBsZW1lbnRzOiBMaXN0SXRlbVZpZXdcclxuXHJcbiAgICAgICAgLy8hIOaPj+eUuzogZnJhbWV3b3JrIOOBi+OCieWRvOOBs+WHuuOBleOCjOOCi+OBn+OCgeOAgeOCquODvOODkOODvOODqeOCpOODieW/hemgiFxyXG4gICAgICAgIHJlbmRlcigpOiBMaXN0SXRlbVZpZXc8VE1vZGVsPiB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihUQUcgKyBcIm5lZWQgb3ZlcnJpZGUgJ3JlbmRlcigpJyBtZXRob2QuXCIpO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDoh6rouqvjga4gTGluZSDjgqTjg7Pjg4fjg4Pjgq/jgrnjgpLlj5blvpdcclxuICAgICAgICBnZXRJbmRleCgpOiBudW1iZXIge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fbGluZVByb2ZpbGUuaW5kZXg7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg6Ieq6Lqr44Gr5oyH5a6a44GV44KM44Gf6auY44GV44KS5Y+W5b6XXHJcbiAgICAgICAgZ2V0U3BlY2lmaWVkSGVpZ2h0KCk6IG51bWJlciB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9saW5lUHJvZmlsZS5oZWlnaHQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEgY2hpbGQgbm9kZSDjgYzlrZjlnKjjgZnjgovjgYvliKTlrppcclxuICAgICAgICBoYXNDaGlsZE5vZGUoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy4kZWwpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAwIDwgdGhpcy4kZWwuY2hpbGRyZW4oKS5sZW5ndGg7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOmrmOOBleOCkuabtOaWsFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIG5ld0hlaWdodCB7TnVtYmVyfSAgICAgICAgICAgICAgW2luXSDmlrDjgZfjgYTpq5jjgZVcclxuICAgICAgICAgKiBAcGFyYW0gb3B0aW9ucyAgIHtVcGRhdGVIZWlnaHRPcHRpb25zfSBbaW5dIGxpbmUg44Gu6auY44GV5pu05paw5pmC44Gr5b2x6Z+/44GZ44KL44GZ44G544Gm44GuIExpbmVQcm9maWxlIOOBruWGjeioiOeul+OCkuihjOOBhuWgtOWQiOOBryB7IHJlZmxlY3RBbGw6IHRydWUgfVxyXG4gICAgICAgICAqIEByZXR1cm4ge0xpc3RJdGVtVmlld30g44Kk44Oz44K544K/44Oz44K5XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdXBkYXRlSGVpZ2h0KG5ld0hlaWdodDogbnVtYmVyLCBvcHRpb25zPzogVXBkYXRlSGVpZ2h0T3B0aW9ucyk6IExpc3RJdGVtVmlldzxUTW9kZWw+IHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuJGVsKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5nZXRTcGVjaWZpZWRIZWlnaHQoKSAhPT0gbmV3SGVpZ2h0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fbGluZVByb2ZpbGUudXBkYXRlSGVpZ2h0KG5ld0hlaWdodCwgb3B0aW9ucyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy4kZWwuaGVpZ2h0KG5ld0hlaWdodCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgICAgIC8vIEltcGxlbWVudHM6IElDb21wb3NhYmxlVmlld1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDjgZnjgafjgavlrprnvqnjgZXjgozjgZ8gQmFja2JvbmUuVmlldyDjgpLln7rlupXjgq/jg6njgrnjgavoqK3lrprjgZfjgIFleHRlbmQg44KS5a6f6KGM44GZ44KL44CCXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gZGVyaXZlcyAgICAgICAgIHtCYWNrYm9uZS5WaWV3fEJhY2tib25lLlZpZXdbXX0gW2luXSDlkIjmiJDlhYPjga4gVmlldyDjgq/jg6njgrlcclxuICAgICAgICAgKiBAcGFyYW0gcHJvcGVydGllcyAgICAgIHtPYmplY3R9ICAgICAgICAgICAgICAgICAgICAgICAgW2luXSBwcm90b3R5cGUg44OX44Ot44OR44OG44KjXHJcbiAgICAgICAgICogQHBhcmFtIGNsYXNzUHJvcGVydGllcyB7T2JqZWN0fSAgICAgICAgICAgICAgICAgICAgICAgIFtpbl0gc3RhdGljIOODl+ODreODkeODhuOCo1xyXG4gICAgICAgICAqIEByZXR1cm4ge0JhY2tib25lLlZpZXd8QmFja2JvbmUuVmlld1tdfSDmlrDopo/jgavnlJ/miJDjgZXjgozjgZ8gVmlldyDjga7jgrPjg7Pjgrnjg4jjg6njgq/jgr9cclxuICAgICAgICAgKi9cclxuICAgICAgICBzdGF0aWMgY29tcG9zZShkZXJpdmVzOiBWaWV3Q29uc3RydWN0b3IgfCBWaWV3Q29uc3RydWN0b3JbXSwgcHJvcGVydGllczogYW55LCBjbGFzc1Byb3BlcnRpZXM/OiBhbnkpOiBWaWV3Q29uc3RydWN0b3Ige1xyXG4gICAgICAgICAgICBjb25zdCBjb21wb3NlZDogYW55ID0gY29tcG9zZVZpZXdzKExpc3RJdGVtVmlldywgZGVyaXZlcyk7XHJcbiAgICAgICAgICAgIHJldHVybiBjb21wb3NlZC5leHRlbmQocHJvcGVydGllcywgY2xhc3NQcm9wZXJ0aWVzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAgICAgLy8gT3ZlcnJpZGU6IEJhY2tib25lLlZpZXdcclxuXHJcbiAgICAgICAgLy8hIOmWi+aUvlxyXG4gICAgICAgIHJlbW92ZSgpOiBMaXN0SXRlbVZpZXc8VE1vZGVsPiB7XHJcbiAgICAgICAgICAgIC8vIHhwZXJpYSBBWCBKZWxseSBCZWFuICg0LjEuMinjgavjgabjgIHjg6Hjg6Ljg6rjg7zjg6rjg7zjgq/jgpLou73muJvjgZXjgZvjgovlirnmnpxcclxuICAgICAgICAgICAgdGhpcy4kZWwuZmluZChcImZpZ3VyZVwiKS5jc3MoXCJiYWNrZ3JvdW5kLWltYWdlXCIsIFwibm9uZVwiKTtcclxuICAgICAgICAgICAgLy8gdGhpcy4kZWwg44Gv5YaN5Yip55So44GZ44KL44Gf44KB56C05qOE44GX44Gq44GEXHJcbiAgICAgICAgICAgIHRoaXMuJGVsLmNoaWxkcmVuKCkucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgIHRoaXMuJGVsLm9mZigpO1xyXG4gICAgICAgICAgICB0aGlzLiRlbCA9IG51bGw7XHJcbiAgICAgICAgICAgIHRoaXMuc3RvcExpc3RlbmluZygpO1xyXG4gICAgICAgICAgICB0aGlzLl9saW5lUHJvZmlsZSA9IG51bGw7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgICAgICAvLyBzaG9ydCBjdXQgbWV0aG9kc1xyXG5cclxuICAgICAgICAvLyEgT3duZXIg5Y+W5b6XXHJcbiAgICAgICAgZ2V0IG93bmVyKCk6IEJhc2VMaXN0VmlldyB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9vd25lcjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiLyogdHNsaW50OmRpc2FibGU6bm8tYml0d2lzZSBuby11bnVzZWQtZXhwcmVzc2lvbiAqL1xyXG4vKiBqc2hpbnQgLVcwMzAgKi8gIC8vIGZvciBcIkV4cGVjdGVkIGFuIGFzc2lnbm1lbnQgb3IgZnVuY3Rpb24gY2FsbCBhbmQgaW5zdGVhZCBzYXcgYW4gZXhwcmVzc2lvblwiXHJcblxyXG5uYW1lc3BhY2UgQ0RQLlVJIHtcclxuXHJcbiAgICBpbXBvcnQgX0NvbmZpZyAgPSBDRFAuVUkuTGlzdFZpZXdHbG9iYWxDb25maWc7XHJcbiAgICBpbXBvcnQgX1V0aWxzICAgPSBDRFAuVUkuX0xpc3RWaWV3VXRpbHM7XHJcblxyXG4gICAgY29uc3QgVEFHID0gXCJbQ0RQLlVJLlNjcm9sbE1hbmFnZXJdIFwiO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGNsYXNzIFNjcm9sbE1hbmFnZXJcclxuICAgICAqIEBicmllZiDjg6Hjg6Ljg6rnrqHnkIbjgpLooYzjgYbjgrnjgq/jg63jg7zjg6vlh6bnkIbjga7jgrPjgqLjg63jgrjjg4Pjgq/lrp/oo4Xjgq/jg6njgrlcclxuICAgICAqICAgICAgICDmnKzjgq/jg6njgrnjga8gSUxpc3RWaWV3IOOCpOODs+OCv+ODvOODleOCp+OCpOOCueOCkuaMgeOBoSBET00g44Gr44Ki44Kv44K744K544GZ44KL44GM44CBQmFja2JvbmUuVmlldyDjgpLntpnmib/jgZfjgarjgYRcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGNsYXNzIFNjcm9sbE1hbmFnZXIgaW1wbGVtZW50cyBJTGlzdFZpZXdGcmFtZXdvcmssIElTY3JvbGxhYmxlLCBJQmFja3VwUmVzdG9yZSB7XHJcblxyXG4gICAgICAgIHByaXZhdGUgXyRyb290OiBKUXVlcnkgPSBudWxsOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyE8IFNjcm9sbCDlr77osaHjga7jg6vjg7zjg4jjgqrjg5bjgrjjgqfjgq/jg4hcclxuICAgICAgICBwcml2YXRlIF8kbWFwOiBKUXVlcnkgPSBudWxsOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8hPCBTY3JvbGwgTWFwIGVsZW1lbnQg44KS5qC857SNXHJcbiAgICAgICAgcHJpdmF0ZSBfbWFwSGVpZ2h0OiBudW1iZXIgPSAwOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vITwgU2Nyb2xsIE1hcCDjga7pq5jjgZXjgpLmoLzntI0gKF8kbWFwIOOBrueKtuaFi+OBq+S+neWtmOOBleOBm+OBquOBhClcclxuICAgICAgICBwcml2YXRlIF9zY3JvbGxlcjogSVNjcm9sbGVyID0gbnVsbDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8hPCBTY3JvbGwg44Gr5L2/55So44GZ44KLIElTY3JvbGxlciDjgqTjg7Pjgrnjgr/jg7PjgrlcclxuICAgICAgICBwcml2YXRlIF9zZXR0aW5nczogTGlzdFZpZXdPcHRpb25zID0gbnVsbDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8hPCBTY3JvbGxNYW5hZ2VyIOOCquODl+OCt+ODp+ODs+OCkuagvOe0jVxyXG4gICAgICAgIHByaXZhdGUgX2FjdGl2ZSA9IHRydWU7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyE8IFVJIOihqOekuuS4reOBryB0cnVlIOOBq+aMh+WumlxyXG4gICAgICAgIHByaXZhdGUgX3Njcm9sbEV2ZW50SGFuZGxlcjogKGV2ZW50OiBKUXVlcnkuRXZlbnQpID0+IHZvaWQgPSBudWxsOyAgICAgICAgICAvLyE8IFNjcm9sbCBFdmVudCBIYW5kbGVyXHJcbiAgICAgICAgcHJpdmF0ZSBfc2Nyb2xsU3RvcEV2ZW50SGFuZGxlcjogKGV2ZW50OiBKUXVlcnkuRXZlbnQpID0+IHZvaWQgPSBudWxsOyAgICAgIC8vITwgU2Nyb2xsIFN0b3AgRXZlbnQgSGFuZGxlclxyXG4gICAgICAgIHByaXZhdGUgX2Jhc2VIZWlnaHQ6IG51bWJlciA9IDA7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyE8IOmrmOOBleOBruWfuua6luWApFxyXG4gICAgICAgIHByaXZhdGUgX2xpbmVzOiBMaW5lUHJvZmlsZVtdID0gW107ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyE8IOeuoeeQhuS4i+OBq+OBguOCiyBMaW5lUHJvZmlsZSDphY3liJdcclxuICAgICAgICBwcml2YXRlIF9wYWdlczogUGFnZVByb2ZpbGVbXSA9IFtdOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8hPCDnrqHnkIbkuIvjgavjgYLjgosgUGFnZVByb2ZpbGUg6YWN5YiXXHJcbiAgICAgICAgLy8hIOacgOaWsOOBruihqOekuumgmOWfn+aDheWgseOCkuagvOe0jSAoU2Nyb2xsIOS4reOBruabtOaWsOWHpueQhuOBq+S9v+eUqClcclxuICAgICAgICBwcml2YXRlIF9sYXN0QWN0aXZlUGFnZUNvbnRleHQgPSB7XHJcbiAgICAgICAgICAgIGluZGV4OiAwLFxyXG4gICAgICAgICAgICBmcm9tOiAwLFxyXG4gICAgICAgICAgICB0bzogMCxcclxuICAgICAgICAgICAgcG9zOiAwLCAgICAvLyBzY3JvbGwgcG9zaXRpb25cclxuICAgICAgICB9O1xyXG4gICAgICAgIHByb3RlY3RlZCBfYmFja3VwID0ge307ICAgIC8vITwg44OH44O844K/44GuIGJhY2t1cCDpoJjln58uIGtleSDjgaggX2xpbmVzIOOCkuagvOe0jeOAgua0vueUn+OCr+ODqeOCueOBp+aLoeW8teWPr+iDveOAglxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBjb25zdHJ1Y3RvclxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIF8kcm9vdCAge0pRdWVyeX0gW2luXSDnrqHnkIblr77osaHjga7jg6vjg7zjg4jjgqjjg6zjg6Hjg7Pjg4hcclxuICAgICAgICAgKiBAcGFyYW0gb3B0aW9ucyB7TGlzdFZpZXdPcHRpb25zfSBbaW5dIOOCquODl+OCt+ODp+ODs1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGNvbnN0cnVjdG9yKG9wdGlvbnM/OiBMaXN0Vmlld09wdGlvbnMpIHtcclxuICAgICAgICAgICAgLy8gTGlzdFZpZXdPcHRpb25zIOaXouWumuWApFxyXG4gICAgICAgICAgICBjb25zdCBkZWZPcHRpb25zOiBMaXN0Vmlld09wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgICAgICBzY3JvbGxlckZhY3Rvcnk6IFNjcm9sbGVyRWxlbWVudC5nZXRGYWN0b3J5KCksXHJcbiAgICAgICAgICAgICAgICBlbmFibGVIaWRkZW5QYWdlOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIGVuYWJsZVRyYW5zZm9ybU9mZnNldDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBzY3JvbGxNYXBSZWZyZXNoSW50ZXJ2YWw6IDIwMCxcclxuICAgICAgICAgICAgICAgIHNjcm9sbFJlZnJlc2hEaXN0YW5jZTogMjAwLFxyXG4gICAgICAgICAgICAgICAgcGFnZVByZXBhcmVDb3VudDogMyxcclxuICAgICAgICAgICAgICAgIHBhZ2VQcmVsb2FkQ291bnQ6IDEsXHJcbiAgICAgICAgICAgICAgICBlbmFibGVBbmltYXRpb246IHRydWUsXHJcbiAgICAgICAgICAgICAgICBhbmltYXRpb25EdXJhdGlvbjogMCxcclxuICAgICAgICAgICAgICAgIGJhc2VEZXB0aDogXCJhdXRvXCIsXHJcbiAgICAgICAgICAgICAgICBpdGVtVGFnTmFtZTogXCJsaVwiLFxyXG4gICAgICAgICAgICAgICAgcmVtb3ZlSXRlbVdpdGhUcmFuc2l0aW9uOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgdXNlRHVtbXlJbmFjdGl2ZVNjcm9sbE1hcDogZmFsc2UsXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvLyDoqK3lrprmoLzntI1cclxuICAgICAgICAgICAgdGhpcy5fc2V0dGluZ3MgPSAkLmV4dGVuZCh7fSwgZGVmT3B0aW9ucywgb3B0aW9ucyk7XHJcblxyXG4gICAgICAgICAgICAvLyDjgrnjgq/jg63jg7zjg6vjgqTjg5njg7Pjg4hcclxuICAgICAgICAgICAgdGhpcy5fc2Nyb2xsRXZlbnRIYW5kbGVyID0gKGV2ZW50OiBKUXVlcnkuRXZlbnQpOiB2b2lkID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMub25TY3JvbGwodGhpcy5fc2Nyb2xsZXIuZ2V0UG9zKCkpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAvLyDjgrnjgq/jg63jg7zjg6vlgZzmraLjgqTjg5njg7Pjg4hcclxuICAgICAgICAgICAgdGhpcy5fc2Nyb2xsU3RvcEV2ZW50SGFuZGxlciA9IChldmVudDogSlF1ZXJ5LkV2ZW50KTogdm9pZCA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uU2Nyb2xsU3RvcCh0aGlzLl9zY3JvbGxlci5nZXRQb3MoKSk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgICAgIC8vIHB1YmxpYyBtZXRob2RcclxuXHJcbiAgICAgICAgLy8hIOWGhemDqOOCquODluOCuOOCp+OCr+ODiOOBruWIneacn+WMllxyXG4gICAgICAgIHB1YmxpYyBpbml0aWFsaXplKCRyb290OiBKUXVlcnksIGhlaWdodDogbnVtYmVyKTogYm9vbGVhbiB7XHJcbiAgICAgICAgICAgIC8vIOaXouOBq+ani+evieOBleOCjOOBpuOBhOOBn+WgtOWQiOOBr+egtOajhFxyXG4gICAgICAgICAgICBpZiAodGhpcy5fJHJvb3QpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGVzdHJveSgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLl8kcm9vdCA9ICRyb290O1xyXG4gICAgICAgICAgICB0aGlzLl8kbWFwID0gJHJvb3QuaGFzQ2xhc3MoX0NvbmZpZy5TQ1JPTExfTUFQX0NMQVNTKSA/ICRyb290IDogJHJvb3QuZmluZChfQ29uZmlnLlNDUk9MTF9NQVBfU0VMRUNUT1IpO1xyXG4gICAgICAgICAgICAvLyBfJG1hcCDjgYznhKHjgYTloLTlkIjjga/liJ3mnJ/ljJbjgZfjgarjgYRcclxuICAgICAgICAgICAgaWYgKHRoaXMuXyRtYXAubGVuZ3RoIDw9IDApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuXyRyb290ID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5fc2Nyb2xsZXIgPSB0aGlzLmNyZWF0ZVNjcm9sbGVyKCk7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0QmFzZUhlaWdodChoZWlnaHQpO1xyXG4gICAgICAgICAgICB0aGlzLnNldFNjcm9sbGVyQ29uZGl0aW9uKCk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDlhoXpg6jjgqrjg5bjgrjjgqfjgq/jg4jjga7noLTmo4RcclxuICAgICAgICBwdWJsaWMgZGVzdHJveSgpOiB2b2lkIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX3Njcm9sbGVyKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlc2V0U2Nyb2xsZXJDb25kaXRpb24oKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3Njcm9sbGVyLmRlc3Ryb3koKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3Njcm9sbGVyID0gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnJlbGVhc2UoKTtcclxuICAgICAgICAgICAgdGhpcy5fJG1hcCA9IG51bGw7XHJcbiAgICAgICAgICAgIHRoaXMuXyRyb290ID0gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDjg5rjg7zjgrjjga7ln7rmupblgKTjgpLlj5blvpdcclxuICAgICAgICBwdWJsaWMgc2V0QmFzZUhlaWdodChoZWlnaHQ6IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgICAgICB0aGlzLl9iYXNlSGVpZ2h0ID0gaGVpZ2h0O1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fYmFzZUhlaWdodCA8PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oVEFHICsgXCJpbnZhbGlkIGJhc2UgaGVpZ2h0OiBcIiArIHRoaXMuX2Jhc2VIZWlnaHQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9zY3JvbGxlcikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fc2Nyb2xsZXIudXBkYXRlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISBhY3RpdmUg54q25oWL6Kit5a6aXHJcbiAgICAgICAgcHVibGljIHNldEFjdGl2ZVN0YXRlKGFjdGl2ZTogYm9vbGVhbik6IHZvaWQge1xyXG4gICAgICAgICAgICB0aGlzLl9hY3RpdmUgPSBhY3RpdmU7XHJcbiAgICAgICAgICAgIHRoaXMudHJlYXRTY3JvbGxQb3NpdGlvbigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIGFjdGl2ZSDnirbmhYvliKTlrppcclxuICAgICAgICBwdWJsaWMgaXNBY3RpdmUoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9hY3RpdmU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEgc2Nyb2xsZXIg44Gu56iu6aGe44KS5Y+W5b6XXHJcbiAgICAgICAgcHVibGljIGdldFNjcm9sbGVyVHlwZSgpOiBzdHJpbmcge1xyXG4gICAgICAgICAgICByZXR1cm4gKDxhbnk+dGhpcy5fc2V0dGluZ3Muc2Nyb2xsZXJGYWN0b3J5KS50eXBlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog54q25oWL44Gr5b+c44GY44Gf44K544Kv44Ot44O844Or5L2N572u44Gu5L+d5a2YL+W+qeWFg1xyXG4gICAgICAgICAqIGNkcC51aS5mcy5qczogUGFnZVRhYkxpc3RWaWV3IOOBjOWun+mok+eahOOBq+S9v+eUqFxyXG4gICAgICAgICAqIFRPRE86IOKAu2lzY3JvbGwg44Gv5pyq5a++5b+cXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIHRyZWF0U2Nyb2xsUG9zaXRpb24oKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGxldCBpOiBudW1iZXI7XHJcbiAgICAgICAgICAgIGNvbnN0IHRyYW5zZm9ybSA9IHt9O1xyXG5cclxuICAgICAgICAgICAgY29uc3QgdXBkYXRlT2Zmc2V0ID0gKCR0YXJnZXQ6IEpRdWVyeSk6IEpRdWVyeSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBvZmZzZXQgPSAodGhpcy5fc2Nyb2xsZXIuZ2V0UG9zKCkgLSB0aGlzLl9sYXN0QWN0aXZlUGFnZUNvbnRleHQucG9zKTtcclxuICAgICAgICAgICAgICAgIGlmIChfVXRpbHMuZ2V0Q3NzTWF0cml4VmFsdWUoJHRhcmdldCwgXCJ0cmFuc2xhdGVZXCIpICE9PSBvZmZzZXQpIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgX1V0aWxzLmNzc1ByZWZpeGVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybVtfVXRpbHMuY3NzUHJlZml4ZXNbaV0gKyBcInRyYW5zZm9ybVwiXSA9IFwidHJhbnNsYXRlM2QoMHB4LFwiICsgb2Zmc2V0ICsgXCJweCwwcHgpXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICR0YXJnZXQuY3NzKHRyYW5zZm9ybSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICR0YXJnZXQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBjb25zdCBjbGVhck9mZnNldCA9ICgkdGFyZ2V0OiBKUXVlcnkpOiBKUXVlcnkgPT4ge1xyXG4gICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IF9VdGlscy5jc3NQcmVmaXhlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybVtfVXRpbHMuY3NzUHJlZml4ZXNbaV0gKyBcInRyYW5zZm9ybVwiXSA9IFwiXCI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAkdGFyZ2V0LmNzcyh0cmFuc2Zvcm0pO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICR0YXJnZXQ7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5fYWN0aXZlKSB7XHJcbiAgICAgICAgICAgICAgICAvLyDku6XkuIvjga7jgrnjgrPjg7zjg5fjga7lh6bnkIbjgavlr77jgZfjgabnlLvpnaLmm7TmlrDjgpIx5Zue44Gr44Gn44GN44Gq44GE44Gf44KB44CBSkIsIElDUyDjgafjga/jgaHjgonjgaTjgY3jgYznmbrnlJ/jgZnjgovjgIJLaXRrYXQg5Lul6ZmN44Gv6Imv5aW944CCXHJcbiAgICAgICAgICAgICAgICAoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9zY3JvbGxlcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9zY3JvbGxlci5zY3JvbGxUbyh0aGlzLl9sYXN0QWN0aXZlUGFnZUNvbnRleHQucG9zLCBmYWxzZSwgMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGNsZWFyT2Zmc2V0KHRoaXMuXyRtYXApLmNzcyhcImRpc3BsYXlcIiwgXCJibG9ja1wiKTtcclxuICAgICAgICAgICAgICAgIH0pKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5fc2V0dGluZ3MudXNlRHVtbXlJbmFjdGl2ZVNjcm9sbE1hcCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJlcGFyZUluYWN0aXZlTWFwKCkucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5fc2Nyb2xsZXIpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9zZXR0aW5ncy51c2VEdW1teUluYWN0aXZlU2Nyb2xsTWFwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlT2Zmc2V0KHRoaXMucHJlcGFyZUluYWN0aXZlTWFwKCkpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVPZmZzZXQodGhpcy5fJG1hcCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISBpbmFjdGl2ZSDnlKggTWFwIOOBrueUn+aIkFxyXG4gICAgICAgIHByaXZhdGUgcHJlcGFyZUluYWN0aXZlTWFwKCk6IEpRdWVyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0ICRwYXJlbnQgPSB0aGlzLl8kbWFwLnBhcmVudCgpO1xyXG4gICAgICAgICAgICBsZXQgJGluYWN0aXZlTWFwID0gJHBhcmVudC5maW5kKF9Db25maWcuSU5BQ1RJVkVfQ0xBU1NfU0VMRUNUT1IpO1xyXG4gICAgICAgICAgICBpZiAoJGluYWN0aXZlTWFwLmxlbmd0aCA8PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50UGFnZUluZGV4ID0gdGhpcy5nZXRQYWdlSW5kZXgoKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0ICRsaXN0SXRlbVZpZXdzID0gdGhpcy5fJG1hcC5jbG9uZSgpLmNoaWxkcmVuKCkuZmlsdGVyKChpbmRleDogbnVtYmVyLCBlbGVtZW50OiBIVE1MRWxlbWVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhZ2VJbmRleCA9IH5+JChlbGVtZW50KS5hdHRyKF9Db25maWcuREFUQV9QQUdFX0lOREVYKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudFBhZ2VJbmRleCAtIDEgPD0gcGFnZUluZGV4IHx8IHBhZ2VJbmRleCA8PSBjdXJyZW50UGFnZUluZGV4ICsgMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAkaW5hY3RpdmVNYXAgPSAkKFwiPHNlY3Rpb24gY2xhc3M9J1wiICsgX0NvbmZpZy5TQ1JPTExfTUFQX0NMQVNTICsgXCIgXCIgKyBfQ29uZmlnLklOQUNUSVZFX0NMQVNTICsgXCInPjwvc2VjdGlvbj5cIilcclxuICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCRsaXN0SXRlbVZpZXdzKVxyXG4gICAgICAgICAgICAgICAgICAgIC5oZWlnaHQodGhpcy5fbWFwSGVpZ2h0KTtcclxuICAgICAgICAgICAgICAgICRwYXJlbnQuYXBwZW5kKCRpbmFjdGl2ZU1hcCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl8kbWFwLmNzcyhcImRpc3BsYXlcIiwgXCJub25lXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiAkaW5hY3RpdmVNYXA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgICAgIC8vIEltcGxlbWVudHM6IElMaXN0VmlldyDjg5fjg63jg5XjgqHjgqTjg6vnrqHnkIZcclxuXHJcbiAgICAgICAgLy8hIOWIneacn+WMlua4iOOBv+OBi+WIpOWumlxyXG4gICAgICAgIGlzSW5pdGlhbGl6ZWQoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgICAgIHJldHVybiAhIXRoaXMuXyRyb290O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOODl+ODreODkeODhuOCo+OCkuaMh+WumuOBl+OBpuOAgUxpbmVQcm9maWxlIOOCkueuoeeQhlxyXG4gICAgICAgIGFkZEl0ZW0oXHJcbiAgICAgICAgICAgIGhlaWdodDogbnVtYmVyLFxyXG4gICAgICAgICAgICBpbml0aWFsaXplcjogbmV3IChvcHRpb25zPzogYW55KSA9PiBCYXNlTGlzdEl0ZW1WaWV3LFxyXG4gICAgICAgICAgICBpbmZvOiBhbnksXHJcbiAgICAgICAgICAgIGluc2VydFRvPzogbnVtYmVyXHJcbiAgICAgICAgKTogdm9pZCB7XHJcbiAgICAgICAgICAgIHRoaXMuX2FkZExpbmUobmV3IExpbmVQcm9maWxlKHRoaXMsIE1hdGguZmxvb3IoaGVpZ2h0KSwgaW5pdGlhbGl6ZXIsIGluZm8pLCBpbnNlcnRUbyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg44OX44Ot44OR44OG44Kj44KS5oyH5a6a44GX44Gm44CBTGluZVByb2ZpbGUg44KS566h55CGLiDnmbvpjLIgZnJhbWV3b3JrIOOBjOS9v+eUqOOBmeOCi1xyXG4gICAgICAgIHB1YmxpYyBfYWRkTGluZShfbGluZTogYW55LCBpbnNlcnRUbz86IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgICAgICBjb25zdCBsaW5lczogTGluZVByb2ZpbGVbXSA9IChfbGluZSBpbnN0YW5jZW9mIEFycmF5KSA/IDxMaW5lUHJvZmlsZVtdPl9saW5lIDogW19saW5lXTtcclxuICAgICAgICAgICAgbGV0IGk6IG51bWJlciwgbjogbnVtYmVyO1xyXG4gICAgICAgICAgICBsZXQgZGVsdGFIZWlnaHQgPSAwO1xyXG4gICAgICAgICAgICBsZXQgYWRkVGFpbCA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgaWYgKG51bGwgPT0gaW5zZXJ0VG8pIHtcclxuICAgICAgICAgICAgICAgIGluc2VydFRvID0gdGhpcy5fbGluZXMubGVuZ3RoO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoaW5zZXJ0VG8gPT09IHRoaXMuX2xpbmVzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgYWRkVGFpbCA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIHNjcm9sbCBtYXAg44Gu5pu05pawXHJcbiAgICAgICAgICAgIGZvciAoaSA9IDAsIG4gPSBsaW5lcy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGRlbHRhSGVpZ2h0ICs9IGxpbmVzW2ldLmhlaWdodDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVNjcm9sbE1hcEhlaWdodChkZWx0YUhlaWdodCk7XHJcblxyXG4gICAgICAgICAgICAvLyDmjL/lhaVcclxuICAgICAgICAgICAgZm9yIChpID0gbGluZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2xpbmVzLnNwbGljZShpbnNlcnRUbywgMCwgbGluZXNbaV0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBwYWdlIOioreWumuOBruino+mZpFxyXG4gICAgICAgICAgICBpZiAoIWFkZFRhaWwpIHtcclxuICAgICAgICAgICAgICAgIGlmICgwID09PSBpbnNlcnRUbykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xlYXJQYWdlKCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG51bGwgIT0gdGhpcy5fbGluZXNbaW5zZXJ0VG8gLSAxXS5wYWdlSW5kZXgpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNsZWFyUGFnZSh0aGlzLl9saW5lc1tpbnNlcnRUbyAtIDFdLnBhZ2VJbmRleCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIG9mZnNldCDjga7lho3oqIjnrpdcclxuICAgICAgICAgICAgdGhpcy51cGRhdGVQcm9maWxlcyhpbnNlcnRUbyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg5oyH5a6a44GX44GfIEl0ZW0g44KS5YmK6ZmkXHJcbiAgICAgICAgcmVtb3ZlSXRlbShpbmRleDogbnVtYmVyLCBzaXplPzogbnVtYmVyLCBkZWxheT86IG51bWJlcik6IHZvaWQ7XHJcbiAgICAgICAgcmVtb3ZlSXRlbShpbmRleDogbnVtYmVyW10sIGRlbGF5PzogbnVtYmVyKTogdm9pZDtcclxuICAgICAgICByZW1vdmVJdGVtKGluZGV4OiBhbnksIGFyZzI/OiBudW1iZXIsIGFyZzM/OiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgICAgICAgaWYgKGluZGV4IGluc3RhbmNlb2YgQXJyYXkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3JlbW92ZUxpbmVzKGluZGV4LCBhcmcyKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3JlbW92ZUxpbmUoaW5kZXgsIGFyZzIsIGFyZzMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg5oyH5a6a44GX44GfIExpbmVQcm9maWxlIOOCkuWJiumZpDog6YCj57aaIGluZGV4IOeJiFxyXG4gICAgICAgIHB1YmxpYyBfcmVtb3ZlTGluZShpbmRleDogbnVtYmVyLCBzaXplPzogbnVtYmVyLCBkZWxheT86IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgICAgICBpZiAobnVsbCA9PSBzaXplKSB7XHJcbiAgICAgICAgICAgICAgICBzaXplID0gMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoaW5kZXggPCAwIHx8IHRoaXMuX2xpbmVzLmxlbmd0aCA8IGluZGV4ICsgc2l6ZSkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihUQUcgKyBcImxvZ2ljIGVycm9yLiByZW1vdmVJdGVtKCksIGludmFsaWQgaW5kZXg6IFwiICsgaW5kZXgpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBkZWxheSA9IChudWxsICE9IGRlbGF5KSA/IGRlbGF5IDogMDtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHJlbW92ZWQ6IExpbmVQcm9maWxlW10gPSBbXTtcclxuICAgICAgICAgICAgbGV0IGRlbHRhID0gMDtcclxuICAgICAgICAgICAgbGV0IG1hcFRyYW5zaXRpb24gPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIC8vIOWJiumZpOWAmeijnOOBqOWkieWMlumHj+OBrueul+WHulxyXG4gICAgICAgICAgICAoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgbGV0IGxpbmU6IExpbmVQcm9maWxlO1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaXplOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBsaW5lID0gdGhpcy5fbGluZXNbaW5kZXggKyBpXTtcclxuICAgICAgICAgICAgICAgICAgICBkZWx0YSArPSBsaW5lLmhlaWdodDtcclxuICAgICAgICAgICAgICAgICAgICAvLyDliYrpmaTopoHntKDjga4gei1pbmRleCDjga7liJ3mnJ/ljJZcclxuICAgICAgICAgICAgICAgICAgICBsaW5lLnJlc2V0RGVwdGgoKTtcclxuICAgICAgICAgICAgICAgICAgICByZW1vdmVkLnB1c2gobGluZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyDoh6rli5XoqK3lrprjg7vliYrpmaTpgYXlu7bmmYLplpPjgYzoqK3lrprjgZXjgozjgYvjgaTjgIHjgrnjgq/jg63jg7zjg6vjg53jgrjjgrfjg6fjg7PjgavlpInmm7TjgYzjgYLjgovloLTlkIjjga8gdHJhbnNpdGlvbiDoqK3lrppcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9zZXR0aW5ncy5yZW1vdmVJdGVtV2l0aFRyYW5zaXRpb24gJiYgKDAgPCBkZWxheSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50ID0gdGhpcy5nZXRTY3JvbGxQb3MoKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBwb3NNYXggPSB0aGlzLmdldFNjcm9sbFBvc01heCgpIC0gZGVsdGE7XHJcbiAgICAgICAgICAgICAgICAgICAgbWFwVHJhbnNpdGlvbiA9IChwb3NNYXggPCBjdXJyZW50KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSkoKTtcclxuXHJcbiAgICAgICAgICAgIC8vIOabtOaWsFxyXG4gICAgICAgICAgICAoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgLy8gdHJhbnNpdGlvbiDoqK3lrppcclxuICAgICAgICAgICAgICAgIGlmIChtYXBUcmFuc2l0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXR1cFNjcm9sbE1hcFRyYW5zaXRpb24odGhpcy5fJG1hcCwgZGVsYXkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gcGFnZSDoqK3lrprjga7op6PpmaRcclxuICAgICAgICAgICAgICAgIGlmIChudWxsICE9IHRoaXMuX2xpbmVzW2luZGV4XS5wYWdlSW5kZXgpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNsZWFyUGFnZSh0aGlzLl9saW5lc1tpbmRleF0ucGFnZUluZGV4KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIOOCueOCr+ODreODvOODq+mgmOWfn+OBruabtOaWsFxyXG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVTY3JvbGxNYXBIZWlnaHQoLWRlbHRhKTtcclxuICAgICAgICAgICAgICAgIC8vIOmFjeWIl+OBi+OCieWJiumZpFxyXG4gICAgICAgICAgICAgICAgdGhpcy5fbGluZXMuc3BsaWNlKGluZGV4LCBzaXplKTtcclxuICAgICAgICAgICAgICAgIC8vIG9mZnNldCDjga7lho3oqIjnrpdcclxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlUHJvZmlsZXMoaW5kZXgpO1xyXG4gICAgICAgICAgICAgICAgLy8g6YGF5bu25YmK6ZmkXHJcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZW1vdmVkLmZvckVhY2goKGxpbmUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGluZS5pbmFjdGl2YXRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9LCBkZWxheSk7XHJcbiAgICAgICAgICAgIH0pKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg5oyH5a6a44GX44GfIExpbmVQcm9maWxlIOOCkuWJiumZpDogcmFuZG9tIGFjY2VzcyDniYhcclxuICAgICAgICBwdWJsaWMgX3JlbW92ZUxpbmVzKGluZGV4ZXM6IG51bWJlcltdLCBkZWxheT86IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgICAgICBkZWxheSA9IChudWxsICE9IGRlbGF5KSA/IGRlbGF5IDogMDtcclxuXHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwLCBuID0gaW5kZXhlcy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGlmIChpIDwgMCB8fCB0aGlzLl9saW5lcy5sZW5ndGggPCBpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihUQUcgKyBcImxvZ2ljIGVycm9yLiByZW1vdmVJdGVtKCksIGludmFsaWQgaW5kZXg6IFwiICsgaSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCByZW1vdmVkOiBMaW5lUHJvZmlsZVtdID0gW107XHJcbiAgICAgICAgICAgIGxldCBkZWx0YSA9IDA7XHJcbiAgICAgICAgICAgIGxldCBtYXBUcmFuc2l0aW9uID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAvLyDliYrpmaTlgJnoo5zjgajlpInljJbph4/jga7nrpflh7pcclxuICAgICAgICAgICAgKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIGxldCBsaW5lOiBMaW5lUHJvZmlsZTtcclxuICAgICAgICAgICAgICAgIGluZGV4ZXMuZm9yRWFjaCgoaW5kZXg6IG51bWJlcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGxpbmUgPSB0aGlzLl9saW5lc1tpbmRleF07XHJcbiAgICAgICAgICAgICAgICAgICAgZGVsdGEgKz0gbGluZS5oZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8g5YmK6Zmk6KaB57Sg44GuIHotaW5kZXgg44Gu5Yid5pyf5YyWXHJcbiAgICAgICAgICAgICAgICAgICAgbGluZS5yZXNldERlcHRoKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlZC5wdXNoKGxpbmUpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAvLyDoh6rli5XoqK3lrprjg7vliYrpmaTpgYXlu7bmmYLplpPjgYzoqK3lrprjgZXjgozjgYvjgaTjgIHjgrnjgq/jg63jg7zjg6vjg53jgrjjgrfjg6fjg7PjgavlpInmm7TjgYzjgYLjgovloLTlkIjjga8gdHJhbnNpdGlvbiDoqK3lrppcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9zZXR0aW5ncy5yZW1vdmVJdGVtV2l0aFRyYW5zaXRpb24gJiYgKDAgPCBkZWxheSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50ID0gdGhpcy5nZXRTY3JvbGxQb3MoKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBwb3NNYXggPSB0aGlzLmdldFNjcm9sbFBvc01heCgpIC0gZGVsdGE7XHJcbiAgICAgICAgICAgICAgICAgICAgbWFwVHJhbnNpdGlvbiA9IChwb3NNYXggPCBjdXJyZW50KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSkoKTtcclxuXHJcbiAgICAgICAgICAgIC8vIOabtOaWsFxyXG4gICAgICAgICAgICAoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgLy8gdHJhbnNpdGlvbiDoqK3lrppcclxuICAgICAgICAgICAgICAgIGlmIChtYXBUcmFuc2l0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXR1cFNjcm9sbE1hcFRyYW5zaXRpb24odGhpcy5fJG1hcCwgZGVsYXkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaW5kZXhlcy5mb3JFYWNoKChpbmRleDogbnVtYmVyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gcGFnZSDoqK3lrprjga7op6PpmaRcclxuICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCAhPSB0aGlzLl9saW5lc1tpbmRleF0ucGFnZUluZGV4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2xlYXJQYWdlKHRoaXMuX2xpbmVzW2luZGV4XS5wYWdlSW5kZXgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAvLyDphY3liJfjgYvjgonliYrpmaRcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9saW5lcy5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIG9mZnNldCDjga7lho3oqIjnrpdcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVByb2ZpbGVzKGluZGV4KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgLy8g44K544Kv44Ot44O844Or6aCY5Z+f44Gu5pu05pawXHJcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVNjcm9sbE1hcEhlaWdodCgtZGVsdGEpO1xyXG4gICAgICAgICAgICAgICAgLy8g6YGF5bu25YmK6ZmkXHJcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZW1vdmVkLmZvckVhY2goKGxpbmUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGluZS5pbmFjdGl2YXRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9LCBkZWxheSk7XHJcbiAgICAgICAgICAgIH0pKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEgc2Nyb2xsIG1hcCDjga7jg4jjg6njg7Pjgrjjgrfjg6fjg7PoqK3lrppcclxuICAgICAgICBwcml2YXRlIHNldHVwU2Nyb2xsTWFwVHJhbnNpdGlvbigkbWFwOiBKUXVlcnksIGRlbGF5OiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgICAgICAgY29uc3QgdHJhbnNpdGlvbkVuZEhhbmRsZXIgPSAoZXZlbnQ6IEpRdWVyeS5FdmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgJG1hcC5vZmYoX1V0aWxzLnRyYW5zaXRpb25FbmQpO1xyXG4gICAgICAgICAgICAgICAgX1V0aWxzLmNsZWFyVHJhbnNpdGlvbnMoJG1hcCk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHRoaXMuXyRtYXAub24oX1V0aWxzLnRyYW5zaXRpb25FbmQsIHRyYW5zaXRpb25FbmRIYW5kbGVyKTtcclxuICAgICAgICAgICAgX1V0aWxzLnNldFRyYW5zZm9ybXNUcmFuc2l0aW9ucygkbWFwLCBcImhlaWdodFwiLCBkZWxheSwgXCJlYXNlXCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOaMh+WumuOBl+OBnyBJdGVtIOOBq+ioreWumuOBl+OBn+aDheWgseOCkuWPluW+l1xyXG4gICAgICAgIGdldEl0ZW1JbmZvKHRhcmdldDogbnVtYmVyKTogYW55O1xyXG4gICAgICAgIGdldEl0ZW1JbmZvKHRhcmdldDogSlF1ZXJ5LkV2ZW50KTogYW55O1xyXG4gICAgICAgIGdldEl0ZW1JbmZvKHRhcmdldDogYW55KTogYW55IHtcclxuICAgICAgICAgICAgbGV0IGluZGV4OiBudW1iZXI7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBwYXJzZXIgPSAoJHRhcmdldDogSlF1ZXJ5KTogbnVtYmVyID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICgkdGFyZ2V0Lmhhc0NsYXNzKF9Db25maWcuTElTVElURU1fQkFTRV9DTEFTUykpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gfn4kdGFyZ2V0LmF0dHIoX0NvbmZpZy5EQVRBX0NPTlRBSU5FUl9JTkRFWCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCR0YXJnZXQuaGFzQ2xhc3MoX0NvbmZpZy5TQ1JPTExfTUFQX0NMQVNTKSB8fCAkdGFyZ2V0Lmxlbmd0aCA8PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFRBRyArIFwiY2Fubm90IGRpdGVjdCBsaW5lIGZyb20gZXZlbnQgb2JqZWN0LlwiKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBhcnNlcigkdGFyZ2V0LnBhcmVudCgpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0YXJnZXQgaW5zdGFuY2VvZiAkLkV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICBpbmRleCA9IHBhcnNlcigkKHRhcmdldC5jdXJyZW50VGFyZ2V0KSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHRhcmdldCA9PT0gXCJudW1iZXJcIikge1xyXG4gICAgICAgICAgICAgICAgaW5kZXggPSB0YXJnZXQ7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChudWxsID09IGluZGV4KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFRBRyArIFwibG9naWMgZXJyb3IuIHVuc3VwcG9ydGVkIGFyZyB0eXBlLiB0eXBlOiBcIiArIHR5cGVvZiB0YXJnZXQpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaW5kZXggPCAwIHx8IHRoaXMuX2xpbmVzLmxlbmd0aCA8PSBpbmRleCkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihUQUcgKyBcImxvZ2ljIGVycm9yLiBpbnZhbGlkIHJhbmdlLiBpbmRleDogXCIgKyBpbmRleCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2xpbmVzW2luZGV4XS5pbmZvO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOOCouOCr+ODhuOCo+ODluODmuODvOOCuOOCkuabtOaWsFxyXG4gICAgICAgIHJlZnJlc2goKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRhcmdldHM6IGFueSA9IHt9O1xyXG4gICAgICAgICAgICBjb25zdCBzZWFyY2hDb3VudCA9IHRoaXMuX3NldHRpbmdzLnBhZ2VQcmVwYXJlQ291bnQgKyB0aGlzLl9zZXR0aW5ncy5wYWdlUHJlbG9hZENvdW50O1xyXG4gICAgICAgICAgICBjb25zdCBjdXJyZW50UGFnZUluZGV4ID0gdGhpcy5nZXRQYWdlSW5kZXgoKTtcclxuICAgICAgICAgICAgY29uc3QgaGlnaFByaW9yaXR5SW5kZXg6IG51bWJlcltdID0gW107XHJcblxyXG4gICAgICAgICAgICBjb25zdCBvbGRFeHNpc3RQYWdlID0gXy5maWx0ZXIodGhpcy5fcGFnZXMsIChwYWdlOiBQYWdlUHJvZmlsZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiaW5hY3RpdmVcIiAhPT0gcGFnZS5zdGF0dXM7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgY2hhbmdlU3RhdGUgPSAoaW5kZXg6IG51bWJlcik6IHZvaWQgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGluZGV4ID09PSBjdXJyZW50UGFnZUluZGV4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0c1tpbmRleF0gPSBcImFjdGl2YXRlXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgaGlnaFByaW9yaXR5SW5kZXgucHVzaChpbmRleCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKF9VdGlscy5hYnMoY3VycmVudFBhZ2VJbmRleCAtIGluZGV4KSA8PSB0aGlzLl9zZXR0aW5ncy5wYWdlUHJlcGFyZUNvdW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0c1tpbmRleF0gPSBcImFjdGl2YXRlXCI7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9zZXR0aW5ncy5lbmFibGVIaWRkZW5QYWdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldHNbaW5kZXhdID0gXCJoaWRlXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0c1tpbmRleF0gPSBcImFjdGl2YXRlXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gY3VycmVudCBwYWdlIOOBriDliY3lvozjga8gaGlnaCBwcmlvcml0eSDjgavjgZnjgotcclxuICAgICAgICAgICAgICAgIGlmIChjdXJyZW50UGFnZUluZGV4ICsgMSA9PT0gaW5kZXggfHwgY3VycmVudFBhZ2VJbmRleCAtIDEgPT09IGluZGV4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaGlnaFByaW9yaXR5SW5kZXgucHVzaChpbmRleCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvLyDlr77osaHnhKHjgZdcclxuICAgICAgICAgICAgaWYgKHRoaXMuX2xpbmVzLmxlbmd0aCA8PSAwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgaSA9IDA7XHJcbiAgICAgICAgICAgICAgICBsZXQgcGFnZUluZGV4ID0gMDtcclxuICAgICAgICAgICAgICAgIGxldCBvdmVyZmxvd1ByZXYgPSAwLCBvdmVyZmxvd05leHQgPSAwO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYmVnaW5JbmRleCA9IGN1cnJlbnRQYWdlSW5kZXggLSBzZWFyY2hDb3VudDtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGVuZEluZGV4ID0gY3VycmVudFBhZ2VJbmRleCArIHNlYXJjaENvdW50O1xyXG4gICAgICAgICAgICAgICAgZm9yIChwYWdlSW5kZXggPSBiZWdpbkluZGV4OyBwYWdlSW5kZXggPD0gZW5kSW5kZXg7IHBhZ2VJbmRleCsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBhZ2VJbmRleCA8IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3dQcmV2Kys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5fcGFnZXMubGVuZ3RoIDw9IHBhZ2VJbmRleCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvdmVyZmxvd05leHQrKztcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGNoYW5nZVN0YXRlKHBhZ2VJbmRleCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKDAgPCBvdmVyZmxvd1ByZXYpIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGkgPSAwLCBwYWdlSW5kZXggPSBjdXJyZW50UGFnZUluZGV4ICsgc2VhcmNoQ291bnQgKyAxOyBpIDwgb3ZlcmZsb3dQcmV2OyBpKysgLCBwYWdlSW5kZXgrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5fcGFnZXMubGVuZ3RoIDw9IHBhZ2VJbmRleCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlU3RhdGUocGFnZUluZGV4KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKDAgPCBvdmVyZmxvd05leHQpIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGkgPSAwLCBwYWdlSW5kZXggPSBjdXJyZW50UGFnZUluZGV4IC0gc2VhcmNoQ291bnQgLSAxOyBpIDwgb3ZlcmZsb3dOZXh0OyBpKysgLCBwYWdlSW5kZXgtLSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFnZUluZGV4IDwgMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlU3RhdGUocGFnZUluZGV4KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pKCk7XHJcblxyXG4gICAgICAgICAgICAvLyDkuI3opoHjgavjgarjgaPjgZ8gcGFnZSDjga4gaW5hY3RpdmF0ZVxyXG4gICAgICAgICAgICBvbGRFeHNpc3RQYWdlLmZvckVhY2goKHBhZ2U6IFBhZ2VQcm9maWxlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpbmRleCA9IHBhZ2UuaW5kZXg7XHJcbiAgICAgICAgICAgICAgICBpZiAobnVsbCA9PSB0YXJnZXRzW2luZGV4XSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHBhZ2UuaW5hY3RpdmF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIC8vIOWEquWFiCBwYWdlIOOBriBhY3RpdmF0ZVxyXG4gICAgICAgICAgICBoaWdoUHJpb3JpdHlJbmRleFxyXG4gICAgICAgICAgICAgICAgLnNvcnQoKGxoczogbnVtYmVyLCByaHM6IG51bWJlcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChsaHMgPCByaHMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobGhzID4gcmhzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAxO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAwO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAuZm9yRWFjaCgoaW5kZXg6IG51bWJlcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5pc0luaXRpYWxpemVkKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3BhZ2VzW2luZGV4XSAmJiB0aGlzLl9wYWdlc1tpbmRleF0uYWN0aXZhdGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0sIDApO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAvLyDjgZ3jga7jgbvjgYvjga4gcGFnZSDjga4g54q25oWL5aSJ5pu0XHJcbiAgICAgICAgICAgIF8uZWFjaCh0YXJnZXRzLCAoYWN0aW9uOiBzdHJpbmcsIGtleTogc3RyaW5nKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5pc0luaXRpYWxpemVkKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5kZXggPSB+fmtleTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChhY3Rpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJhY3RpdmF0ZVwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3BhZ2VzW2luZGV4XSAmJiB0aGlzLl9wYWdlc1tpbmRleF0uYWN0aXZhdGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJoaWRlXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fcGFnZXNbaW5kZXhdICYmIHRoaXMuX3BhZ2VzW2luZGV4XS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiaW5hY3RpdmF0ZVwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihUQUcgKyBcInVuZXhwZWN0ZWQgb3BlcmF0aW9uOiBpbmFjdGl2YXRlXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oVEFHICsgXCJ1bmtub3duIG9wZXJhdGlvbjogXCIgKyB0YXJnZXRzW2tleV0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSwgMCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgLy8g5pu05paw5b6M44Gr5L2/55So44GX44Gq44GL44Gj44GfIERPTSDjgpLliYrpmaRcclxuICAgICAgICAgICAgdGhpcy5maW5kUmVjeWNsZUVsZW1lbnRzKCkucmVtb3ZlKCk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLl9sYXN0QWN0aXZlUGFnZUNvbnRleHQuZnJvbSA9IHRoaXMuX3BhZ2VzW2N1cnJlbnRQYWdlSW5kZXhdLmdldExpbmVQcm9maWxlRmlyc3QoKSA/XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9wYWdlc1tjdXJyZW50UGFnZUluZGV4XS5nZXRMaW5lUHJvZmlsZUZpcnN0KCkuaW5kZXggOiAwO1xyXG4gICAgICAgICAgICB0aGlzLl9sYXN0QWN0aXZlUGFnZUNvbnRleHQudG8gPSB0aGlzLl9wYWdlc1tjdXJyZW50UGFnZUluZGV4XS5nZXRMaW5lUHJvZmlsZUxhc3QoKSA/XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9wYWdlc1tjdXJyZW50UGFnZUluZGV4XS5nZXRMaW5lUHJvZmlsZUxhc3QoKS5pbmRleCA6IDA7XHJcbiAgICAgICAgICAgIHRoaXMuX2xhc3RBY3RpdmVQYWdlQ29udGV4dC5pbmRleCA9IGN1cnJlbnRQYWdlSW5kZXg7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg5pyq44Ki44K144Kk44Oz44Oa44O844K444KS5qeL56+JXHJcbiAgICAgICAgdXBkYXRlKCk6IHZvaWQge1xyXG4gICAgICAgICAgICBjb25zdCBpbmRleCA9IHRoaXMuX3BhZ2VzLmxlbmd0aDtcclxuICAgICAgICAgICAgdGhpcy5hc3NpZ25QYWdlKGluZGV4KTtcclxuICAgICAgICAgICAgdGhpcy5yZWZyZXNoKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg44Oa44O844K444Ki44K144Kk44Oz44KS5YaN5qeL5oiQXHJcbiAgICAgICAgcmVidWlsZCgpOiB2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy5jbGVhclBhZ2UoKTtcclxuICAgICAgICAgICAgdGhpcy5hc3NpZ25QYWdlKCk7XHJcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOeuoei9hOODh+ODvOOCv+OCkuegtOajhFxyXG4gICAgICAgIHJlbGVhc2UoKTogdm9pZCB7XHJcbiAgICAgICAgICAgIHRoaXMuX2xpbmVzLmZvckVhY2goKGxpbmU6IExpbmVQcm9maWxlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBsaW5lLmluYWN0aXZhdGUoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHRoaXMuX3BhZ2VzID0gW107XHJcbiAgICAgICAgICAgIHRoaXMuX2xpbmVzID0gW107XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl8kbWFwKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9tYXBIZWlnaHQgPSAwO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fJG1hcC5oZWlnaHQoMCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAgICAgLy8gSW1wbGVtZW50czogSUxpc3RWaWV3IEJhY2t1cCAvIFJlc3RvcmVcclxuXHJcbiAgICAgICAgLy8hIOWGhemDqOODh+ODvOOCv+OCkuODkOODg+OCr+OCouODg+ODl1xyXG4gICAgICAgIGJhY2t1cChrZXk6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICBpZiAobnVsbCA9PSB0aGlzLl9iYWNrdXBba2V5XSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fYmFja3VwW2tleV0gPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGluZXM6IHRoaXMuX2xpbmVzLFxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDlhoXpg6jjg4fjg7zjgr/jgpLjg6rjgrnjg4jjgqJcclxuICAgICAgICByZXN0b3JlKGtleTogc3RyaW5nLCByZWJ1aWxkOiBib29sZWFuID0gdHJ1ZSk6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICBpZiAobnVsbCA9PSB0aGlzLl9iYWNrdXBba2V5XSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICgwIDwgdGhpcy5fbGluZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbGVhc2UoKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5fYWRkTGluZSh0aGlzLl9iYWNrdXBba2V5XS5saW5lcyk7XHJcblxyXG4gICAgICAgICAgICBpZiAocmVidWlsZCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZWJ1aWxkKCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOODkOODg+OCr+OCouODg+ODl+ODh+ODvOOCv+OBruacieeEoVxyXG4gICAgICAgIGhhc0JhY2t1cChrZXk6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICBpZiAobnVsbCAhPSB0aGlzLl9iYWNrdXBba2V5XSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDjg5Djg4Pjgq/jgqLjg4Pjg5fjg4fjg7zjgr/jga7noLTmo4RcclxuICAgICAgICBjbGVhckJhY2t1cChrZXk/OiBzdHJpbmcpOiBib29sZWFuIHtcclxuICAgICAgICAgICAgaWYgKG51bGwgPT0ga2V5KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9iYWNrdXAgPSB7fTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKG51bGwgIT0gdGhpcy5fYmFja3VwW2tleV0pIHtcclxuICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLl9iYWNrdXBba2V5XTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg44OQ44OD44Kv44Ki44OD44OX44OH44O844K/44Gr44Ki44Kv44K744K5XHJcbiAgICAgICAgZ2V0IGJhY2t1cERhdGEoKTogYW55IHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2JhY2t1cDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAgICAgLy8gSW1wbGVtZW50czogSUxpc3RWaWV3IFNjcm9sbFxyXG5cclxuICAgICAgICAvLyEg44K544Kv44Ot44O844Or44Kk44OZ44Oz44OI44OP44Oz44OJ44Op6Kit5a6aL+ino+mZpFxyXG4gICAgICAgIHNldFNjcm9sbEhhbmRsZXIoaGFuZGxlcjogKGV2ZW50OiBKUXVlcnkuRXZlbnQpID0+IHZvaWQsIG9uOiBib29sZWFuKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9zY3JvbGxlcikge1xyXG4gICAgICAgICAgICAgICAgaWYgKG9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fc2Nyb2xsZXIub24oXCJzY3JvbGxcIiwgaGFuZGxlcik7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3Njcm9sbGVyLm9mZihcInNjcm9sbFwiLCBoYW5kbGVyKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOOCueOCr+ODreODvOODq+e1guS6huOCpOODmeODs+ODiOODj+ODs+ODieODqeioreWumi/op6PpmaRcclxuICAgICAgICBzZXRTY3JvbGxTdG9wSGFuZGxlcihoYW5kbGVyOiAoZXZlbnQ6IEpRdWVyeS5FdmVudCkgPT4gdm9pZCwgb246IGJvb2xlYW4pOiB2b2lkIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX3Njcm9sbGVyKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAob24pIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9zY3JvbGxlci5vbihcInNjcm9sbHN0b3BcIiwgaGFuZGxlcik7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3Njcm9sbGVyLm9mZihcInNjcm9sbHN0b3BcIiwgaGFuZGxlcik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDjgrnjgq/jg63jg7zjg6vkvY3nva7jgpLlj5blvpdcclxuICAgICAgICBnZXRTY3JvbGxQb3MoKTogbnVtYmVyIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3Njcm9sbGVyID8gdGhpcy5fc2Nyb2xsZXIuZ2V0UG9zKCkgOiAwO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOOCueOCr+ODreODvOODq+S9jee9ruOBruacgOWkp+WApOOCkuWPluW+l1xyXG4gICAgICAgIGdldFNjcm9sbFBvc01heCgpOiBudW1iZXIge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fc2Nyb2xsZXIgPyB0aGlzLl9zY3JvbGxlci5nZXRQb3NNYXgoKSA6IDA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg44K544Kv44Ot44O844Or5L2N572u44KS5oyH5a6aXHJcbiAgICAgICAgc2Nyb2xsVG8ocG9zOiBudW1iZXIsIGFuaW1hdGU/OiBib29sZWFuLCB0aW1lPzogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9zY3JvbGxlcikge1xyXG4gICAgICAgICAgICAgICAgaWYgKHBvcyA8IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oVEFHICsgXCJpbnZhbGlkIHBvc2l0aW9uLCB0b28gc21hbGwuIFtwb3M6IFwiICsgcG9zICsgXCJdXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHBvcyA9IDA7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuX3Njcm9sbGVyLmdldFBvc01heCgpIDwgcG9zKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFRBRyArIFwiaW52YWxpZCBwb3NpdGlvbiwgdG9vIGJpZy4gW3BvczogXCIgKyBwb3MgKyBcIl1cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgcG9zID0gdGhpcy5fc2Nyb2xsZXIuZ2V0UG9zTWF4KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBwb3Mg44Gu44G/5YWI6aeG44GR44Gm5pu05pawXHJcbiAgICAgICAgICAgICAgICB0aGlzLl9sYXN0QWN0aXZlUGFnZUNvbnRleHQucG9zID0gcG9zO1xyXG4gICAgICAgICAgICAgICAgaWYgKHBvcyAhPT0gdGhpcy5fc2Nyb2xsZXIuZ2V0UG9zKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9zY3JvbGxlci5zY3JvbGxUbyhwb3MsIGFuaW1hdGUsIHRpbWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg5oyH5a6a44GV44KM44GfIExpc3RJdGVtVmlldyDjga7ooajnpLrjgpLkv53oqLxcclxuICAgICAgICBlbnN1cmVWaXNpYmxlKGluZGV4OiBudW1iZXIsIG9wdGlvbnM/OiBFbnN1cmVWaXNpYmxlT3B0aW9ucyk6IHZvaWQge1xyXG4gICAgICAgICAgICBpZiAoaW5kZXggPCAwIHx8IHRoaXMuX2xpbmVzLmxlbmd0aCA8PSBpbmRleCkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFRBRyArIFwiZW5zdXJlVmlzaWJsZSgpLCBpbnZhbGlkIGluZGV4LCBub29wLiBbaW5kZXg6IFwiICsgaW5kZXggKyBcIl1cIik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIXRoaXMuX3Njcm9sbGVyKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oVEFHICsgXCJzY3JvbGxlciBpcyBub3QgcmVhZHkuXCIpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0ID0gdGhpcy5fbGluZXNbaW5kZXhdO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGRlZmF1bHRPcHRpb25zOiBFbnN1cmVWaXNpYmxlT3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgICAgICAgICBwYXJ0aWFsT0s6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgc2V0VG9wOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICBhbmltYXRlOiB0aGlzLl9zZXR0aW5ncy5lbmFibGVBbmltYXRpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgdGltZTogdGhpcy5fc2V0dGluZ3MuYW5pbWF0aW9uRHVyYXRpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2s6ICgpOiB2b2lkID0+IHsgLyogbm9vcCAqLyB9LFxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG9wZXJhdGlvbjogRW5zdXJlVmlzaWJsZU9wdGlvbnMgPSAkLmV4dGVuZCh7fSwgZGVmYXVsdE9wdGlvbnMsIG9wdGlvbnMpO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRTY29wZSA9IHtcclxuICAgICAgICAgICAgICAgICAgICBmcm9tOiB0aGlzLl9zY3JvbGxlci5nZXRQb3MoKSxcclxuICAgICAgICAgICAgICAgICAgICB0bzogdGhpcy5fc2Nyb2xsZXIuZ2V0UG9zKCkgKyB0aGlzLl9iYXNlSGVpZ2h0LFxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldFNjb3BlID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIGZyb206IHRhcmdldC5vZmZzZXQsXHJcbiAgICAgICAgICAgICAgICAgICAgdG86IHRhcmdldC5vZmZzZXQgKyB0YXJnZXQuaGVpZ2h0LFxyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBpc0luU2NvcGUgPSAoKTogYm9vbGVhbiA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wZXJhdGlvbi5wYXJ0aWFsT0spIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRhcmdldFNjb3BlLmZyb20gPD0gY3VycmVudFNjb3BlLmZyb20pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50U2NvcGUuZnJvbSA8PSB0YXJnZXRTY29wZS50bykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGFyZ2V0U2NvcGUuZnJvbSA8PSBjdXJyZW50U2NvcGUudG8pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRTY29wZS5mcm9tIDw9IHRhcmdldFNjb3BlLmZyb20gJiYgdGFyZ2V0U2NvcGUudG8gPD0gY3VycmVudFNjb3BlLnRvKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgZGV0ZWN0UG9zaXRpb24gPSAoKTogbnVtYmVyID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGFyZ2V0U2NvcGUuZnJvbSA8IGN1cnJlbnRTY29wZS5mcm9tKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0YXJnZXRTY29wZS5mcm9tO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoY3VycmVudFNjb3BlLmZyb20gPCB0YXJnZXRTY29wZS5mcm9tKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0YXJnZXQub2Zmc2V0IC0gdGFyZ2V0LmhlaWdodDsgLy8gYm90dG9tIOWQiOOCj+OBm+OBr+aDheWgseS4jei2s+OBq+OCiOOCiuS4jeWPr1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihUQUcgKyBcImxvZ2ljIGVycm9yLlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICBsZXQgcG9zOiBudW1iZXI7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKG9wZXJhdGlvbi5zZXRUb3ApIHtcclxuICAgICAgICAgICAgICAgICAgICBwb3MgPSB0YXJnZXRTY29wZS5mcm9tO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpc0luU2NvcGUoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIG5vb3AuXHJcbiAgICAgICAgICAgICAgICAgICAgb3BlcmF0aW9uLmNhbGxiYWNrKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBwb3MgPSBkZXRlY3RQb3NpdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIOijnOato1xyXG4gICAgICAgICAgICAgICAgaWYgKHBvcyA8IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBwb3MgPSAwO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLl9zY3JvbGxlci5nZXRQb3NNYXgoKSA8IHBvcykge1xyXG4gICAgICAgICAgICAgICAgICAgIHBvcyA9IHRoaXMuX3Njcm9sbGVyLmdldFBvc01heCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQob3BlcmF0aW9uLmNhbGxiYWNrLCBvcGVyYXRpb24udGltZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNjcm9sbFRvKHBvcywgb3BlcmF0aW9uLmFuaW1hdGUsIG9wZXJhdGlvbi50aW1lKTtcclxuICAgICAgICAgICAgfSkoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAgICAgLy8gaW1wbGVtZW50czogSUxpc3RWaWV3RnJhbWV3b3JrOlxyXG5cclxuICAgICAgICAvLyEgU2Nyb2xsIE1hcCDjga7pq5jjgZXjgpLlj5blvpdcclxuICAgICAgICBnZXRTY3JvbGxNYXBIZWlnaHQoKTogbnVtYmVyIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuXyRtYXAgPyB0aGlzLl9tYXBIZWlnaHQgOiAwO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIFNjcm9sbCBNYXAg44Gu6auY44GV44KS5pu05pawLiBmcmFtZXdvcmsg44GM5L2/55So44GZ44KLLlxyXG4gICAgICAgIHVwZGF0ZVNjcm9sbE1hcEhlaWdodChkZWx0YTogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl8kbWFwKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9tYXBIZWlnaHQgKz0gZGVsdGE7XHJcbiAgICAgICAgICAgICAgICAvLyBmb3IgZmFpbCBzYWZlLlxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX21hcEhlaWdodCA8IDApIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9tYXBIZWlnaHQgPSAwO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5fJG1hcC5oZWlnaHQodGhpcy5fbWFwSGVpZ2h0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOWGhemDqCBQcm9maWxlIOOBruabtOaWsC4gZnJhbWV3b3JrIOOBjOS9v+eUqOOBmeOCiy5cclxuICAgICAgICB1cGRhdGVQcm9maWxlcyhmcm9tOiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgICAgICAgbGV0IGk6IG51bWJlciwgbjogbnVtYmVyO1xyXG4gICAgICAgICAgICBsZXQgbGFzdDogTGluZVByb2ZpbGU7XHJcbiAgICAgICAgICAgIGZvciAoaSA9IGZyb20sIG4gPSB0aGlzLl9saW5lcy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGlmICgwIDwgaSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxhc3QgPSB0aGlzLl9saW5lc1tpIC0gMV07XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fbGluZXNbaV0uaW5kZXggPSBsYXN0LmluZGV4ICsgMTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9saW5lc1tpXS5vZmZzZXQgPSBsYXN0Lm9mZnNldCArIGxhc3QuaGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9saW5lc1tpXS5pbmRleCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fbGluZXNbaV0ub2Zmc2V0ID0gMDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIFNjcm9sbCBNYXAgRWxlbWVudCDjgpLlj5blvpcuIGZyYW1ld29yayDjgYzkvb/nlKjjgZnjgosuXHJcbiAgICAgICAgZ2V0U2Nyb2xsTWFwRWxlbWVudCgpOiBKUXVlcnkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fJG1hcCB8fCAkKFwiXCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOODquOCteOCpOOCr+ODq+WPr+iDveOBqiBFbGVtZW50IOOCkuWPluW+ly4gZnJhbWV3b3JrIOOBjOS9v+eUqOOBmeOCiy5cclxuICAgICAgICBmaW5kUmVjeWNsZUVsZW1lbnRzKCk6IEpRdWVyeSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl8kbWFwID8gdGhpcy5fJG1hcC5maW5kKF9Db25maWcuUkVDWUNMRV9DTEFTU19TRUxFQ1RPUikgOiAkKFwiXCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIExpc3RWaWV3T3B0aW9ucyDjgpLlj5blvpcuIGZyYW1ld29yayDjgYzkvb/nlKjjgZnjgosuXHJcbiAgICAgICAgZ2V0TGlzdFZpZXdPcHRpb25zKCk6IExpc3RWaWV3T3B0aW9ucyB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9zZXR0aW5ncztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAgICAgLy8gcHJpdmF0ZSBtZXRob2Q6XHJcblxyXG4gICAgICAgIC8vISBTY3JvbGxlciDnlKjnkrDlooPoqK3lrppcclxuICAgICAgICBwcml2YXRlIHNldFNjcm9sbGVyQ29uZGl0aW9uKCk6IHZvaWQge1xyXG4gICAgICAgICAgICB0aGlzLl9zY3JvbGxlci5vbihcInNjcm9sbFwiLCB0aGlzLl9zY3JvbGxFdmVudEhhbmRsZXIpO1xyXG4gICAgICAgICAgICB0aGlzLl9zY3JvbGxlci5vbihcInNjcm9sbHN0b3BcIiwgdGhpcy5fc2Nyb2xsU3RvcEV2ZW50SGFuZGxlcik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEgU2Nyb2xsZXIg55So55Kw5aKD56C05qOEXHJcbiAgICAgICAgcHJpdmF0ZSByZXNldFNjcm9sbGVyQ29uZGl0aW9uKCk6IHZvaWQge1xyXG4gICAgICAgICAgICB0aGlzLl9zY3JvbGxlci5vZmYoXCJzY3JvbGxzdG9wXCIsIHRoaXMuX3Njcm9sbFN0b3BFdmVudEhhbmRsZXIpO1xyXG4gICAgICAgICAgICB0aGlzLl9zY3JvbGxlci5vZmYoXCJzY3JvbGxcIiwgdGhpcy5fc2Nyb2xsRXZlbnRIYW5kbGVyKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDml6Llrprjga4gU2Nyb2xsZXIg44Kq44OW44K444Kn44Kv44OI44Gu5L2c5oiQXHJcbiAgICAgICAgcHJpdmF0ZSBjcmVhdGVTY3JvbGxlcigpOiBJU2Nyb2xsZXIge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fc2V0dGluZ3Muc2Nyb2xsZXJGYWN0b3J5KHRoaXMuXyRyb290WzBdLCB0aGlzLl9zZXR0aW5ncyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg54++5Zyo44GuIFBhZ2UgSW5kZXgg44KS5Y+W5b6XXHJcbiAgICAgICAgcHJpdmF0ZSBnZXRQYWdlSW5kZXgoKTogbnVtYmVyIHtcclxuICAgICAgICAgICAgbGV0IGk6IG51bWJlciwgbjogbnVtYmVyO1xyXG4gICAgICAgICAgICBsZXQgcGFnZTogUGFnZVByb2ZpbGU7XHJcbiAgICAgICAgICAgIGxldCBjYW5kaWRhdGU6IG51bWJlcjtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHNjcm9sbFBvcyA9IHRoaXMuX3Njcm9sbGVyID8gdGhpcy5fc2Nyb2xsZXIuZ2V0UG9zKCkgOiAwO1xyXG4gICAgICAgICAgICBjb25zdCBzY3JvbGxQb3NNYXggPSB0aGlzLl9zY3JvbGxlciA/IHRoaXMuX3Njcm9sbGVyLmdldFBvc01heCgpIDogMDtcclxuICAgICAgICAgICAgY29uc3Qgc2Nyb2xsTWFwU2l6ZSA9ICgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBsYXN0UGFnZSA9IHRoaXMuZ2V0TGFzdFBhZ2UoKTtcclxuICAgICAgICAgICAgICAgIGlmIChudWxsICE9IGxhc3RQYWdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxhc3RQYWdlLm9mZnNldCArIGxhc3RQYWdlLmhlaWdodDtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2Jhc2VIZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pKCk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBwb3MgPSAoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKDAgPT09IHNjcm9sbFBvc01heCB8fCBzY3JvbGxQb3NNYXggPD0gdGhpcy5fYmFzZUhlaWdodCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAwO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2Nyb2xsUG9zICogc2Nyb2xsTWFwU2l6ZSAvIHNjcm9sbFBvc01heDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSkoKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHZhbGlkUmFuZ2UgPSAoX3BhZ2U6IFBhZ2VQcm9maWxlKTogYm9vbGVhbiA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAobnVsbCA9PSBfcGFnZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoX3BhZ2Uub2Zmc2V0IDw9IHBvcyAmJiBwb3MgPD0gX3BhZ2Uub2Zmc2V0ICsgX3BhZ2UuaGVpZ2h0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9iYXNlSGVpZ2h0IDw9IDApIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoVEFHICsgXCJpbnZhbGlkIGJhc2UgaGVpZ2h0OiBcIiArIHRoaXMuX2Jhc2VIZWlnaHQpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNhbmRpZGF0ZSA9IE1hdGguZmxvb3IocG9zIC8gdGhpcy5fYmFzZUhlaWdodCk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9wYWdlcy5sZW5ndGggPD0gY2FuZGlkYXRlKSB7XHJcbiAgICAgICAgICAgICAgICBjYW5kaWRhdGUgPSB0aGlzLl9wYWdlcy5sZW5ndGggLSAxO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBwYWdlID0gdGhpcy5fcGFnZXNbY2FuZGlkYXRlXTtcclxuICAgICAgICAgICAgaWYgKHZhbGlkUmFuZ2UocGFnZSkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBwYWdlLmluZGV4O1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHBvcyA8IHBhZ2Uub2Zmc2V0KSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGkgPSBjYW5kaWRhdGUgLSAxOyBpID49IDA7IGktLSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHBhZ2UgPSB0aGlzLl9wYWdlc1tpXTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodmFsaWRSYW5nZShwYWdlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGFnZS5pbmRleDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oVEFHICsgXCJ1bmtub3duIHBhZ2UgaW5kZXguXCIpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGkgPSBjYW5kaWRhdGUgKyAxLCBuID0gdGhpcy5fcGFnZXMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGFnZSA9IHRoaXMuX3BhZ2VzW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh2YWxpZFJhbmdlKHBhZ2UpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwYWdlLmluZGV4O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihUQUcgKyBcInVua25vd24gcGFnZSBpbmRleC5cIik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fcGFnZXMubGVuZ3RoIC0gMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog44K544Kv44Ot44O844Or44Kk44OZ44Oz44OIXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gcG9zIHtOdW1iZXJ9IFtpbl0g44K544Kv44Ot44O844Or44Od44K444K344On44OzXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJpdmF0ZSBvblNjcm9sbChwb3M6IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fYWN0aXZlICYmIDAgPCB0aGlzLl9wYWdlcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRQYWdlSW5kZXggPSB0aGlzLmdldFBhZ2VJbmRleCgpO1xyXG4gICAgICAgICAgICAgICAgLy8gVE9ETzog6Kq/5pW0XHJcbiAgICAgICAgICAgICAgICBpZiAoX1V0aWxzLmFicyhwb3MgLSB0aGlzLl9sYXN0QWN0aXZlUGFnZUNvbnRleHQucG9zKSA8IHRoaXMuX3NldHRpbmdzLnNjcm9sbFJlZnJlc2hEaXN0YW5jZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9sYXN0QWN0aXZlUGFnZUNvbnRleHQuaW5kZXggIT09IGN1cnJlbnRQYWdlSW5kZXgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5fbGFzdEFjdGl2ZVBhZ2VDb250ZXh0LnBvcyA9IHBvcztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog44K544Kv44Ot44O844Or5YGc5q2i44Kk44OZ44Oz44OIXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gcG9zIHtOdW1iZXJ9IFtpbl0g44K544Kv44Ot44O844Or44Od44K444K344On44OzXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJpdmF0ZSBvblNjcm9sbFN0b3AocG9zOiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX2FjdGl2ZSAmJiAwIDwgdGhpcy5fcGFnZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50UGFnZUluZGV4ID0gdGhpcy5nZXRQYWdlSW5kZXgoKTtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9sYXN0QWN0aXZlUGFnZUNvbnRleHQuaW5kZXggIT09IGN1cnJlbnRQYWdlSW5kZXgpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2goKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMuX2xhc3RBY3RpdmVQYWdlQ29udGV4dC5wb3MgPSBwb3M7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDmnIDlvozjga7jg5rjg7zjgrjjgpLlj5blvpdcclxuICAgICAgICBwcml2YXRlIGdldExhc3RQYWdlKCk6IFBhZ2VQcm9maWxlIHtcclxuICAgICAgICAgICAgaWYgKDAgPCB0aGlzLl9wYWdlcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9wYWdlc1t0aGlzLl9wYWdlcy5sZW5ndGggLSAxXTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDjg5rjg7zjgrjljLrliIbjga7jgqLjgrXjgqTjg7NcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBmcm9tIHtOdW1iZXJ9IFtpbl0gcGFnZSBpbmRleCDjgpLmjIflrppcclxuICAgICAgICAgKi9cclxuICAgICAgICBwcml2YXRlIGFzc2lnblBhZ2UoZnJvbT86IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgICAgICBsZXQgaTogbnVtYmVyLCBuOiBudW1iZXI7XHJcbiAgICAgICAgICAgIGlmIChudWxsID09IGZyb20pIHtcclxuICAgICAgICAgICAgICAgIGZyb20gPSAwO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jbGVhclBhZ2UoZnJvbSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgbGluZUluZGV4ID0gMDtcclxuICAgICAgICAgICAgICAgIGxldCBsYXN0UGFnZSA9IHRoaXMuZ2V0TGFzdFBhZ2UoKTtcclxuICAgICAgICAgICAgICAgIGxldCBsYXN0TGluZTogTGluZVByb2ZpbGU7XHJcbiAgICAgICAgICAgICAgICBsZXQgdGVtcFBhZ2U6IFBhZ2VQcm9maWxlO1xyXG4gICAgICAgICAgICAgICAgaWYgKG51bGwgPT0gbGFzdFBhZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICBsYXN0UGFnZSA9IG5ldyBQYWdlUHJvZmlsZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3BhZ2VzLnB1c2gobGFzdFBhZ2UpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBsYXN0TGluZSA9IGxhc3RQYWdlLmdldExpbmVQcm9maWxlTGFzdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChudWxsICE9IGxhc3RMaW5lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpbmVJbmRleCA9IGxhc3RMaW5lLmluZGV4ICsgMTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgYXNpZ25lZSA9IHRoaXMuX2xpbmVzLnNsaWNlKGxpbmVJbmRleCk7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGkgPSAwLCBuID0gYXNpZ25lZS5sZW5ndGg7IGkgPCBuOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5fYmFzZUhlaWdodCA8PSBsYXN0UGFnZS5oZWlnaHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGFzdFBhZ2Uubm9ybWFsaXplKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBQYWdlID0gbGFzdFBhZ2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBQYWdlID0gbmV3IFBhZ2VQcm9maWxlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBQYWdlLmluZGV4ID0gbGFzdFBhZ2UuaW5kZXggKyAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZW1wUGFnZS5vZmZzZXQgPSBsYXN0UGFnZS5vZmZzZXQgKyBsYXN0UGFnZS5oZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RQYWdlID0gdGVtcFBhZ2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3BhZ2VzLnB1c2gobGFzdFBhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBhc2lnbmVlW2ldLnBhZ2VJbmRleCA9IGxhc3RQYWdlLmluZGV4O1xyXG4gICAgICAgICAgICAgICAgICAgIGxhc3RQYWdlLnB1c2goYXNpZ25lZVtpXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBsYXN0UGFnZS5ub3JtYWxpemUoKTtcclxuICAgICAgICAgICAgfSkoKTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9zY3JvbGxlcikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fc2Nyb2xsZXIudXBkYXRlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOODmuODvOOCuOWMuuWIhuOBruino+mZpFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGZyb20ge051bWJlcn0gW2luXSBwYWdlIGluZGV4IOOCkuaMh+WumlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHByaXZhdGUgY2xlYXJQYWdlKGZyb20/OiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgICAgICAgaWYgKG51bGwgPT0gZnJvbSkge1xyXG4gICAgICAgICAgICAgICAgZnJvbSA9IDA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5fcGFnZXMgPSB0aGlzLl9wYWdlcy5zbGljZSgwLCBmcm9tKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwibmFtZXNwYWNlIENEUC5VSSB7XHJcblxyXG4gICAgY29uc3QgVEFHID0gXCJbQ0RQLlVJLkxpc3RWaWV3XSBcIjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBpbnRlcmZhY2UgTGlzdFZpZXdDb25zdHJ1Y3RPcHRpb25zXHJcbiAgICAgKiBAYnJpZWYgTGlzdFZpZXcg44G444Gu5Yid5pyf5YyW5oOF5aCx44KS5qC857SN44GZ44KL44Kk44Oz44K/44O844OV44Kn44Kk44K544Kv44Op44K5XHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgTGlzdFZpZXdDb25zdHJ1Y3RPcHRpb25zPFRNb2RlbCBleHRlbmRzIEJhY2tib25lLk1vZGVsID0gQmFja2JvbmUuTW9kZWw+XHJcbiAgICAgICAgZXh0ZW5kcyBMaXN0Vmlld09wdGlvbnMsIEJhY2tib25lLlZpZXdPcHRpb25zPFRNb2RlbD4ge1xyXG4gICAgICAgICRlbD86IEpRdWVyeTtcclxuICAgICAgICBpbml0aWFsSGVpZ2h0PzogbnVtYmVyOyAgICAvLyE8IOmrmOOBleOBruWIneacn+WApFxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGNsYXNzIExpc3RWaWV3XHJcbiAgICAgKiBAYnJpZWYg44Oh44Oi44Oq566h55CG5qmf6IO944KS5o+Q5L6b44GZ44KL5Luu5oOz44Oq44K544OI44OT44Ol44O844Kv44Op44K5XHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBjbGFzcyBMaXN0VmlldzxUTW9kZWwgZXh0ZW5kcyBCYWNrYm9uZS5Nb2RlbCA9IEJhY2tib25lLk1vZGVsPlxyXG4gICAgICAgIGV4dGVuZHMgQmFja2JvbmUuVmlldzxUTW9kZWw+IGltcGxlbWVudHMgSUxpc3RWaWV3LCBJQ29tcG9zYWJsZVZpZXcge1xyXG5cclxuICAgICAgICBwcml2YXRlIF9zY3JvbGxNZ3I6IFNjcm9sbE1hbmFnZXIgPSBudWxsOyAgICAvLyE8IHNjcm9sbCDjgrPjgqLjg63jgrjjg4Pjgq9cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogY29uc3RydWN0b3JcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBvcHRpb25zIHtMaXN0Vmlld0NvbnN0cnVjdE9wdGlvbnN9IFtpbl0g44Kq44OX44K344On44OzXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgY29uc3RydWN0b3Iob3B0aW9ucz86IExpc3RWaWV3Q29uc3RydWN0T3B0aW9uczxUTW9kZWw+KSB7XHJcbiAgICAgICAgICAgIHN1cGVyKG9wdGlvbnMpO1xyXG4gICAgICAgICAgICBjb25zdCBvcHQgPSBvcHRpb25zIHx8IHt9O1xyXG4gICAgICAgICAgICB0aGlzLl9zY3JvbGxNZ3IgPSBuZXcgU2Nyb2xsTWFuYWdlcihvcHRpb25zKTtcclxuICAgICAgICAgICAgaWYgKG9wdC4kZWwpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGRlbGVnYXRlcyA9ICg8YW55PnRoaXMpLmV2ZW50cyA/IHRydWUgOiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0RWxlbWVudChvcHQuJGVsLCBkZWxlZ2F0ZXMpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaGVpZ2h0ID0gb3B0LmluaXRpYWxIZWlnaHQgfHwgdGhpcy4kZWwuaGVpZ2h0KCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9zY3JvbGxNZ3IuaW5pdGlhbGl6ZSh0aGlzLiRlbCwgaGVpZ2h0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgICAgICAvLyBPdmVycmlkZTogQmFja2JvbmUuVmlld1xyXG5cclxuICAgICAgICAvLyEg5a++6LGhIGVsZW1lbnQg44Gu6Kit5a6aXHJcbiAgICAgICAgc2V0RWxlbWVudChlbGVtZW50OiBIVE1MRWxlbWVudCwgZGVsZWdhdGU/OiBib29sZWFuKTogQmFja2JvbmUuVmlldzxUTW9kZWw+O1xyXG4gICAgICAgIHNldEVsZW1lbnQoZWxlbWVudDogSlF1ZXJ5LCBkZWxlZ2F0ZT86IGJvb2xlYW4pOiBCYWNrYm9uZS5WaWV3PFRNb2RlbD47XHJcbiAgICAgICAgc2V0RWxlbWVudChlbGVtZW50OiBhbnksIGRlbGVnYXRlPzogYm9vbGVhbik6IEJhY2tib25lLlZpZXc8VE1vZGVsPiB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9zY3JvbGxNZ3IpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0ICRlbCA9ICQoZWxlbWVudCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9zY3JvbGxNZ3IuZGVzdHJveSgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fc2Nyb2xsTWdyLmluaXRpYWxpemUoJGVsLCAkZWwuaGVpZ2h0KCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBzdXBlci5zZXRFbGVtZW50KGVsZW1lbnQsIGRlbGVnYXRlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDnoLTmo4RcclxuICAgICAgICByZW1vdmUoKTogQmFja2JvbmUuVmlldzxUTW9kZWw+IHtcclxuICAgICAgICAgICAgdGhpcy5fc2Nyb2xsTWdyLmRlc3Ryb3koKTtcclxuICAgICAgICAgICAgcmV0dXJuIHN1cGVyLnJlbW92ZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgICAgICAvLyBJbXBsZW1lbnRzOiBJTGlzdFZpZXcgUHJvZmlsZSDnrqHnkIZcclxuXHJcbiAgICAgICAgLy8hIOWIneacn+WMlua4iOOBv+OBi+WIpOWumlxyXG4gICAgICAgIGlzSW5pdGlhbGl6ZWQoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9zY3JvbGxNZ3IuaXNJbml0aWFsaXplZCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOODl+ODreODkeODhuOCo+OCkuaMh+WumuOBl+OBpuOAgUxpbmVQcm9maWxlIOOCkueuoeeQhlxyXG4gICAgICAgIGFkZEl0ZW0oXHJcbiAgICAgICAgICAgIGhlaWdodDogbnVtYmVyLFxyXG4gICAgICAgICAgICBpbml0aWFsaXplcjogbmV3IChvcHRpb25zPzogYW55KSA9PiBCYXNlTGlzdEl0ZW1WaWV3LFxyXG4gICAgICAgICAgICBpbmZvOiBhbnksXHJcbiAgICAgICAgICAgIGluc2VydFRvPzogbnVtYmVyXHJcbiAgICAgICAgKTogdm9pZCB7XHJcbiAgICAgICAgICAgIHRoaXMuX2FkZExpbmUobmV3IExpbmVQcm9maWxlKHRoaXMuX3Njcm9sbE1nciwgTWF0aC5mbG9vcihoZWlnaHQpLCBpbml0aWFsaXplciwgaW5mbyksIGluc2VydFRvKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDmjIflrprjgZfjgZ8gSXRlbSDjgpLliYrpmaRcclxuICAgICAgICByZW1vdmVJdGVtKGluZGV4OiBudW1iZXIsIHNpemU/OiBudW1iZXIsIGRlbGF5PzogbnVtYmVyKTogdm9pZDtcclxuICAgICAgICByZW1vdmVJdGVtKGluZGV4OiBudW1iZXJbXSwgZGVsYXk/OiBudW1iZXIpOiB2b2lkO1xyXG4gICAgICAgIHJlbW92ZUl0ZW0oaW5kZXg6IGFueSwgYXJnMj86IG51bWJlciwgYXJnMz86IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgICAgICB0aGlzLl9zY3JvbGxNZ3IucmVtb3ZlSXRlbShpbmRleCwgYXJnMiwgYXJnMyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg5oyH5a6a44GX44GfIEl0ZW0g44Gr6Kit5a6a44GX44Gf5oOF5aCx44KS5Y+W5b6XXHJcbiAgICAgICAgZ2V0SXRlbUluZm8odGFyZ2V0OiBudW1iZXIpOiBhbnk7XHJcbiAgICAgICAgZ2V0SXRlbUluZm8odGFyZ2V0OiBKUXVlcnkuRXZlbnQpOiBhbnk7XHJcbiAgICAgICAgZ2V0SXRlbUluZm8odGFyZ2V0OiBhbnkpOiBhbnkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fc2Nyb2xsTWdyLmdldEl0ZW1JbmZvKHRhcmdldCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg44Ki44Kv44OG44Kj44OW44Oa44O844K444KS5pu05pawXHJcbiAgICAgICAgcmVmcmVzaCgpOiB2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy5fc2Nyb2xsTWdyLnJlZnJlc2goKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDmnKrjgqLjgrXjgqTjg7Pjg5rjg7zjgrjjgpLmp4vnr4lcclxuICAgICAgICB1cGRhdGUoKTogdm9pZCB7XHJcbiAgICAgICAgICAgIHRoaXMuX3Njcm9sbE1nci51cGRhdGUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDjg5rjg7zjgrjjgqLjgrXjgqTjg7PjgpLlho3mp4vmiJBcclxuICAgICAgICByZWJ1aWxkKCk6IHZvaWQge1xyXG4gICAgICAgICAgICB0aGlzLl9zY3JvbGxNZ3IucmVidWlsZCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOeuoei9hOODh+ODvOOCv+OCkuegtOajhFxyXG4gICAgICAgIHJlbGVhc2UoKTogdm9pZCB7XHJcbiAgICAgICAgICAgIHRoaXMuX3Njcm9sbE1nci5yZWxlYXNlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgICAgIC8vIEltcGxlbWVudHM6IElMaXN0VmlldyBQcm9maWxlIEJhY2t1cCAvIFJlc3RvcmVcclxuXHJcbiAgICAgICAgLy8hIOWGhemDqOODh+ODvOOCv+OCkuODkOODg+OCr+OCouODg+ODl1xyXG4gICAgICAgIGJhY2t1cChrZXk6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fc2Nyb2xsTWdyLmJhY2t1cChrZXkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOWGhemDqOODh+ODvOOCv+OCkuODquOCueODiOOColxyXG4gICAgICAgIHJlc3RvcmUoa2V5OiBzdHJpbmcsIHJlYnVpbGQ6IGJvb2xlYW4gPSB0cnVlKTogYm9vbGVhbiB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9zY3JvbGxNZ3IucmVzdG9yZShrZXksIHJlYnVpbGQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOODkOODg+OCr+OCouODg+ODl+ODh+ODvOOCv+OBruacieeEoVxyXG4gICAgICAgIGhhc0JhY2t1cChrZXk6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fc2Nyb2xsTWdyLmhhc0JhY2t1cChrZXkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOODkOODg+OCr+OCouODg+ODl+ODh+ODvOOCv+OBruegtOajhFxyXG4gICAgICAgIGNsZWFyQmFja3VwKGtleT86IHN0cmluZyk6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fc2Nyb2xsTWdyLmNsZWFyQmFja3VwKGtleSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg44OQ44OD44Kv44Ki44OD44OX44OH44O844K/44Gr44Ki44Kv44K744K5XHJcbiAgICAgICAgZ2V0IGJhY2t1cERhdGEoKTogYW55IHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3Njcm9sbE1nciA/IHRoaXMuX3Njcm9sbE1nci5iYWNrdXBEYXRhIDogbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAgICAgLy8gSW1wbGVtZW50czogSUxpc3RWaWV3IFNjcm9sbFxyXG5cclxuICAgICAgICAvLyEg44K544Kv44Ot44O844Or44Kk44OZ44Oz44OI44OP44Oz44OJ44Op6Kit5a6aL+ino+mZpFxyXG4gICAgICAgIHNldFNjcm9sbEhhbmRsZXIoaGFuZGxlcjogKGV2ZW50OiBKUXVlcnkuRXZlbnQpID0+IHZvaWQsIG9uOiBib29sZWFuKTogdm9pZCB7XHJcbiAgICAgICAgICAgIHRoaXMuX3Njcm9sbE1nci5zZXRTY3JvbGxIYW5kbGVyKGhhbmRsZXIsIG9uKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDjgrnjgq/jg63jg7zjg6vntYLkuobjgqTjg5njg7Pjg4jjg4/jg7Pjg4njg6noqK3lrpov6Kej6ZmkXHJcbiAgICAgICAgc2V0U2Nyb2xsU3RvcEhhbmRsZXIoaGFuZGxlcjogKGV2ZW50OiBKUXVlcnkuRXZlbnQpID0+IHZvaWQsIG9uOiBib29sZWFuKTogdm9pZCB7XHJcbiAgICAgICAgICAgIHRoaXMuX3Njcm9sbE1nci5zZXRTY3JvbGxTdG9wSGFuZGxlcihoYW5kbGVyLCBvbik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg44K544Kv44Ot44O844Or5L2N572u44KS5Y+W5b6XXHJcbiAgICAgICAgZ2V0U2Nyb2xsUG9zKCk6IG51bWJlciB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9zY3JvbGxNZ3IuZ2V0U2Nyb2xsUG9zKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg44K544Kv44Ot44O844Or5L2N572u44Gu5pyA5aSn5YCk44KS5Y+W5b6XXHJcbiAgICAgICAgZ2V0U2Nyb2xsUG9zTWF4KCk6IG51bWJlciB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9zY3JvbGxNZ3IuZ2V0U2Nyb2xsUG9zTWF4KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg44K544Kv44Ot44O844Or5L2N572u44KS5oyH5a6aXHJcbiAgICAgICAgc2Nyb2xsVG8ocG9zOiBudW1iZXIsIGFuaW1hdGU/OiBib29sZWFuLCB0aW1lPzogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgICAgICAgIHRoaXMuX3Njcm9sbE1nci5zY3JvbGxUbyhwb3MsIGFuaW1hdGUsIHRpbWUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOaMh+WumuOBleOCjOOBnyBMaXN0SXRlbVZpZXcg44Gu6KGo56S644KS5L+d6Ki8XHJcbiAgICAgICAgZW5zdXJlVmlzaWJsZShpbmRleDogbnVtYmVyLCBvcHRpb25zPzogRW5zdXJlVmlzaWJsZU9wdGlvbnMpOiB2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy5fc2Nyb2xsTWdyLmVuc3VyZVZpc2libGUoaW5kZXgsIG9wdGlvbnMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgICAgICAvLyBJbXBsZW1lbnRzOiBJTGlzdFZpZXcgUHJvcGVydGllc1xyXG5cclxuICAgICAgICAvLyEgY29yZSBmcmFtZXdvcmsgYWNjZXNzXHJcbiAgICAgICAgZ2V0IGNvcmUoKTogSUxpc3RWaWV3RnJhbWV3b3JrIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3Njcm9sbE1ncjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAgICAgLy8gSW1wbGVtZW50czogSUxpc3RWaWV3IEludGVybmFsIEkvRlxyXG5cclxuICAgICAgICAvLyEg55m76YyyIGZyYW1ld29yayDjgYzkvb/nlKjjgZnjgotcclxuICAgICAgICBfYWRkTGluZShfbGluZTogYW55LCBpbnNlcnRUbz86IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgICAgICB0aGlzLl9zY3JvbGxNZ3IuX2FkZExpbmUoX2xpbmUsIGluc2VydFRvKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAgICAgLy8gSW1wbGVtZW50czogSUNvbXBvc2FibGVWaWV3XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOOBmeOBp+OBq+Wumue+qeOBleOCjOOBnyBCYWNrYm9uZS5WaWV3IOOCkuWfuuW6leOCr+ODqeOCueOBq+ioreWumuOBl+OAgWV4dGVuZCDjgpLlrp/ooYzjgZnjgovjgIJcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBkZXJpdmVzICAgICAgICAge0JhY2tib25lLlZpZXd8QmFja2JvbmUuVmlld1tdfSBbaW5dIOWQiOaIkOWFg+OBriBWaWV3IOOCr+ODqeOCuVxyXG4gICAgICAgICAqIEBwYXJhbSBwcm9wZXJ0aWVzICAgICAge09iamVjdH0gICAgICAgICAgICAgICAgICAgICAgICBbaW5dIHByb3RvdHlwZSDjg5fjg63jg5Hjg4bjgqNcclxuICAgICAgICAgKiBAcGFyYW0gY2xhc3NQcm9wZXJ0aWVzIHtPYmplY3R9ICAgICAgICAgICAgICAgICAgICAgICAgW2luXSBzdGF0aWMg44OX44Ot44OR44OG44KjXHJcbiAgICAgICAgICogQHJldHVybiB7QmFja2JvbmUuVmlld3xCYWNrYm9uZS5WaWV3W119IOaWsOimj+OBq+eUn+aIkOOBleOCjOOBnyBWaWV3IOOBruOCs+ODs+OCueODiOODqeOCr+OCv1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHN0YXRpYyBjb21wb3NlKGRlcml2ZXM6IFZpZXdDb25zdHJ1Y3RvciB8IFZpZXdDb25zdHJ1Y3RvcltdLCBwcm9wZXJ0aWVzOiBhbnksIGNsYXNzUHJvcGVydGllcz86IGFueSk6IFZpZXdDb25zdHJ1Y3RvciB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbXBvc2VkOiBhbnkgPSBjb21wb3NlVmlld3MoTGlzdFZpZXcsIGRlcml2ZXMpO1xyXG4gICAgICAgICAgICByZXR1cm4gY29tcG9zZWQuZXh0ZW5kKHByb3BlcnRpZXMsIGNsYXNzUHJvcGVydGllcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIm5hbWVzcGFjZSBDRFAuVUkge1xyXG5cclxuICAgIGNvbnN0IFRBRyA9IFwiW0NEUC5VSS5Hcm91cExpc3RJdGVtVmlld10gXCI7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAaW50ZXJmYWNlIEdyb3VwTGlzdEl0ZW1WaWV3T3B0aW9uc1xyXG4gICAgICogQGJyaWVmIEdyb3VwTGlzdEl0ZW1WaWV3IOOBruOCquODl+OCt+ODp+ODs1xyXG4gICAgICovXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIEdyb3VwTGlzdEl0ZW1WaWV3T3B0aW9uczxUTW9kZWwgZXh0ZW5kcyBCYWNrYm9uZS5Nb2RlbCA9IEJhY2tib25lLk1vZGVsPiBleHRlbmRzIExpc3RJdGVtVmlld09wdGlvbnM8VE1vZGVsPiB7XHJcbiAgICAgICAgZ3JvdXBQcm9maWxlPzogR3JvdXBQcm9maWxlOyAgICAvLyE8IEdyb3VwUHJvZmlsZSDjgqTjg7Pjgrnjgr/jg7PjgrlcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBjbGFzcyBHcm91cExpc3RJdGVtVmlld1xyXG4gICAgICogQGJyaWVmIEV4cGFuZGFibGVMaXN0VmlldyDjgYzmibHjgYYgTGlzdEl0ZW0g44Kz44Oz44OG44OK44Kv44Op44K5XHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBjbGFzcyBHcm91cExpc3RJdGVtVmlldzxUTW9kZWwgZXh0ZW5kcyBCYWNrYm9uZS5Nb2RlbCA9IEJhY2tib25lLk1vZGVsPiBleHRlbmRzIExpc3RJdGVtVmlldzxUTW9kZWw+IHtcclxuXHJcbiAgICAgICAgcHJpdmF0ZSBfZ3JvdXBQcm9maWxlOiBHcm91cFByb2ZpbGUgPSBudWxsOyAgICAvLyE8IOeuoei9hOOBriBHcm91cFByb2ZpbGVcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogY29uc3RydWN0b3JcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBvcHRpb25zIHtHcm91cExpbmVWaWV3T3B0aW9uc30gW2luXSDjgqrjg5fjgrfjg6fjg7NcclxuICAgICAgICAgKi9cclxuICAgICAgICBjb25zdHJ1Y3RvcihvcHRpb25zOiBHcm91cExpc3RJdGVtVmlld09wdGlvbnM8VE1vZGVsPikge1xyXG4gICAgICAgICAgICBzdXBlcihvcHRpb25zKTtcclxuICAgICAgICAgICAgdGhpcy5fZ3JvdXBQcm9maWxlID0gb3B0aW9ucy5ncm91cFByb2ZpbGU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgICAgIC8vIHByb3RlY3RlZCBtZXRob2RzXHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOWxlemWi+eKtuaFi+OCkuWIpOWumlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybiB7Qm9vbGVhbn0gdHJ1ZTog5bGV6ZaLLCBmYWxzZTrlj47mnZ9cclxuICAgICAgICAgKi9cclxuICAgICAgICBwcm90ZWN0ZWQgaXNFeHBhbmRlZCgpOiBib29sZWFuIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2dyb3VwUHJvZmlsZS5pc0V4cGFuZGVkKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg5bGV6ZaL5Lit44GL5Yik5a6aXHJcbiAgICAgICAgcHJvdGVjdGVkIGlzRXhwYW5kaW5nKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICByZXR1cm4gKDxCYXNlRXhwYW5kYWJsZUxpc3RWaWV3PnRoaXMub3duZXIpLmlzRXhwYW5kaW5nKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg5Y+O5p2f5Lit44GL5Yik5a6aXHJcbiAgICAgICAgcHJvdGVjdGVkIGlzQ29sbGFwc2luZygpOiBib29sZWFuIHtcclxuICAgICAgICAgICAgcmV0dXJuICg8QmFzZUV4cGFuZGFibGVMaXN0Vmlldz50aGlzLm93bmVyKS5pc0NvbGxhcHNpbmcoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDplovplonkuK3jgYvliKTlrppcclxuICAgICAgICBwcm90ZWN0ZWQgaXNTd2l0Y2hpbmcoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgICAgIHJldHVybiAoPEJhc2VFeHBhbmRhYmxlTGlzdFZpZXc+dGhpcy5vd25lcikuaXNTd2l0Y2hpbmcoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDlrZAgR3JvdXAg44KS5oyB44Gj44Gm44GE44KL44GL5Yik5a6aXHJcbiAgICAgICAgcHJvdGVjdGVkIGhhc0NoaWxkcmVuKGxheW91dEtleT86IHN0cmluZyk6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZ3JvdXBQcm9maWxlLmhhc0NoaWxkcmVuKGxheW91dEtleSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIi8qIHRzbGludDpkaXNhYmxlOm5vLWJpdHdpc2UgKi9cclxuXHJcbm5hbWVzcGFjZSBDRFAuVUkge1xyXG5cclxuICAgIGNvbnN0IFRBRyA9IFwiW0NEUC5VSS5FeHBhbmRNYW5hZ2VyXSBcIjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBjbGFzcyBFeHBhbmRNYW5hZ2VyXHJcbiAgICAgKiBAYnJpZWYg6ZaL6ZaJ54q25oWL566h55CG44Kv44Op44K5XHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBjbGFzcyBFeHBhbmRNYW5hZ2VyIGltcGxlbWVudHMgSUV4cGFuZE1hbmFnZXIge1xyXG5cclxuICAgICAgICBwcml2YXRlIF9vd25lcjogQmFzZUV4cGFuZGFibGVMaXN0VmlldyA9IG51bGw7XHJcbiAgICAgICAgcHJpdmF0ZSBfbWFwR3JvdXBzOiBPYmplY3QgPSB7fTsgICAgICAgICAgICAgICAgLy8hPCB7aWQsIEdyb3VwUHJvZmlsZX0g44GuIG1hcFxyXG4gICAgICAgIHByaXZhdGUgX2FyeVRvcEdyb3VwczogR3JvdXBQcm9maWxlW10gPSBbXTsgICAgIC8vITwg56ysMemajuWxpCBHcm91cFByb2ZpbGUg44KS5qC857SNXHJcbiAgICAgICAgcHJpdmF0ZSBfbGF5b3V0S2V5OiBzdHJpbmcgPSBudWxsO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBjb25zdHJ1Y3RvclxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIG93bmVyIHtCYXNlRXhwYW5kYWJsZUxpc3RWaWV3fSBbaW5dIOimqlZpZXcg44Gu44Kk44Oz44K544K/44Oz44K5XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgY29uc3RydWN0b3Iob3duZXI6IEJhc2VFeHBhbmRhYmxlTGlzdFZpZXcpIHtcclxuICAgICAgICAgICAgdGhpcy5fb3duZXIgPSBvd25lcjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAgICAgLy8gSW1wbGVtZW50czogSUV4cGFuZE1hbmFnZXJcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog5paw6KaPIEdyb3VwUHJvZmlsZSDjgpLkvZzmiJBcclxuICAgICAgICAgKiDnmbvpjLLmuIjjgb/jga7loLTlkIjjga/jgZ3jga7jgqrjg5bjgrjjgqfjgq/jg4jjgpLov5TljbRcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJtYSBpZCB7U3RyaW5nfSBbaW5dIOaWsOimj+OBq+S9nOaIkOOBmeOCiyBHcm91cCBJRCDjgpLmjIflrpouIOaMh+WumuOBl+OBquOBhOWgtOWQiOOBr+iHquWLleWJsuOCiuaMr+OCilxyXG4gICAgICAgICAqIEByZXR1cm4ge0dyb3VwUHJvZmlsZX0gR3JvdXBQcm9maWxlIOOCpOODs+OCueOCv+ODs+OCuVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIG5ld0dyb3VwKGlkPzogc3RyaW5nKTogR3JvdXBQcm9maWxlIHtcclxuICAgICAgICAgICAgbGV0IGdyb3VwOiBHcm91cFByb2ZpbGU7XHJcbiAgICAgICAgICAgIGlmIChudWxsID09IGlkKSB7XHJcbiAgICAgICAgICAgICAgICBpZCA9IFwiZ3JvdXAtaWQ6XCIgKyAoXCIwMDAwXCIgKyAoTWF0aC5yYW5kb20oKSAqIE1hdGgucG93KDM2LCA0KSA8PCAwKS50b1N0cmluZygzNikpLnNsaWNlKC00KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAobnVsbCAhPSB0aGlzLl9tYXBHcm91cHNbaWRdKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fbWFwR3JvdXBzW2lkXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBncm91cCA9IG5ldyBHcm91cFByb2ZpbGUoaWQsIHRoaXMuX293bmVyKTtcclxuICAgICAgICAgICAgdGhpcy5fbWFwR3JvdXBzW2lkXSA9IGdyb3VwO1xyXG4gICAgICAgICAgICByZXR1cm4gZ3JvdXA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDnmbvpjLLmuIjjgb8gR3JvdXAg44KS5Y+W5b6XXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFybWEgaWQge1N0cmluZ30gW2luXSDlj5blvpfjgZnjgosgR3JvdXAgSUQg44KS5oyH5a6aXHJcbiAgICAgICAgICogQHJldHVybiB7R3JvdXBQcm9maWxlfSBHcm91cFByb2ZpbGUg44Kk44Oz44K544K/44Oz44K5IC8gbnVsbFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGdldEdyb3VwKGlkOiBzdHJpbmcpOiBHcm91cFByb2ZpbGUge1xyXG4gICAgICAgICAgICBpZiAobnVsbCA9PSB0aGlzLl9tYXBHcm91cHNbaWRdKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oVEFHICsgXCJncm91cCBpZDogXCIgKyBpZCArIFwiIGlzIG5vdCByZWdpc3RlcmVkLlwiKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9tYXBHcm91cHNbaWRdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog56ysMemajuWxpOOBriBHcm91cCDnmbvpjLJcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB0b3BHcm91cCB7R3JvdXBQcm9maWxlfSBbaW5dIOani+eviea4iOOBvyBHcm91cFByb2ZpbGUg44Kk44Oz44K544K/44Oz44K5XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcmVnaXN0ZXJUb3BHcm91cCh0b3BHcm91cDogR3JvdXBQcm9maWxlKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGxldCBsYXN0R3JvdXA6IEdyb3VwUHJvZmlsZTtcclxuICAgICAgICAgICAgbGV0IGluc2VydFRvOiBudW1iZXI7XHJcblxyXG4gICAgICAgICAgICAvLyDjgZnjgafjgavnmbvpjLLmuIjjgb/jga7loLTlkIjjga8gcmVzdG9yZSDjgZfjgaYgbGF5b3V0IOOCreODvOOBlOOBqOOBq+W+qeWFg+OBmeOCi+OAglxyXG4gICAgICAgICAgICBpZiAoXCJyZWdpc3RlcmVkXCIgPT09IHRvcEdyb3VwLnN0YXR1cykge1xyXG4gICAgICAgICAgICAgICAgLy8gVE9ETzogb3JpZW50YXRpb24gY2hhbmdlZCDmmYLjga4gbGF5b3V0IOOCreODvOWkieabtOWvvuW/nOOBoOOBjOOAgeOCreODvOOBq+WkieabtOOBjOeEoeOBhOOBqOOBjeOBr+S4jeWFt+WQiOOBqOOBquOCi+OAglxyXG4gICAgICAgICAgICAgICAgLy8g44GT44GuIEFQSSDjgavlrp/oo4XjgYzlv4XopoHjgYvjgoLlkKvjgoHjgabopovnm7TjgZfjgYzlv4XopoFcclxuICAgICAgICAgICAgICAgIHRvcEdyb3VwLnJlc3RvcmUoKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbGFzdEdyb3VwID0gKDAgPCB0aGlzLl9hcnlUb3BHcm91cHMubGVuZ3RoKSA/IHRoaXMuX2FyeVRvcEdyb3Vwc1t0aGlzLl9hcnlUb3BHcm91cHMubGVuZ3RoIC0gMV0gOiBudWxsO1xyXG4gICAgICAgICAgICBpbnNlcnRUbyA9IChudWxsICE9IGxhc3RHcm91cCkgPyBsYXN0R3JvdXAuZ2V0TGFzdExpbmVJbmRleCh0cnVlKSArIDEgOiAwO1xyXG4gICAgICAgICAgICBpZiAoXy5pc05hTihpbnNlcnRUbykpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoVEFHICsgXCJsb2dpYyBlcnJvciwgJ2luc2VydFRvJyBpcyBOYU4uXCIpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLl9hcnlUb3BHcm91cHMucHVzaCh0b3BHcm91cCk7XHJcbiAgICAgICAgICAgIHRvcEdyb3VwLnJlZ2lzdGVyKGluc2VydFRvKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOesrDHpmo7lsaTjga4gR3JvdXAg44KS5Y+W5b6XXHJcbiAgICAgICAgICog44Kz44OU44O86YWN5YiX44GM6L+U44GV44KM44KL44Gf44KB44CB44Kv44Op44Kk44Ki44Oz44OI44Gv44Kt44Oj44OD44K344Ol5LiN5Y+vXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJuIHtHcm91cFByb2ZpbGVbXX0gR3JvdXBQcm9maWxlIOmFjeWIl1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGdldFRvcEdyb3VwcygpOiBHcm91cFByb2ZpbGVbXSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9hcnlUb3BHcm91cHMuc2xpY2UoMCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg44GZ44G544Gm44Gu44Kw44Or44O844OX44KS5bGV6ZaLICgx6ZqO5bGkKVxyXG4gICAgICAgIGV4cGFuZEFsbCgpOiB2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy5fYXJ5VG9wR3JvdXBzLmZvckVhY2goKGdyb3VwOiBHcm91cFByb2ZpbGUpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChncm91cC5oYXNDaGlsZHJlbigpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZ3JvdXAuZXhwYW5kKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOOBmeOBueOBpuOBruOCsOODq+ODvOODl+OCkuWPjuadnyAoMemajuWxpClcclxuICAgICAgICBjb2xsYXBzZUFsbChkZWxheT86IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgICAgICB0aGlzLl9hcnlUb3BHcm91cHMuZm9yRWFjaCgoZ3JvdXA6IEdyb3VwUHJvZmlsZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGdyb3VwLmhhc0NoaWxkcmVuKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBncm91cC5jb2xsYXBzZShkZWxheSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOWxlemWi+S4reOBi+WIpOWumlxyXG4gICAgICAgIGlzRXhwYW5kaW5nKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fb3duZXIuaXNTdGF0dXNJbihcImV4cGFuZGluZ1wiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDlj47mnZ/kuK3jgYvliKTlrppcclxuICAgICAgICBpc0NvbGxhcHNpbmcoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9vd25lci5pc1N0YXR1c0luKFwiY29sbGFwc2luZ1wiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDplovplonkuK3jgYvliKTlrppcclxuICAgICAgICBpc1N3aXRjaGluZygpOiBib29sZWFuIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaXNFeHBhbmRpbmcoKSB8fCB0aGlzLmlzQ29sbGFwc2luZygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOeKtuaFi+WkieaVsOOBruWPgueFp+OCq+OCpuODs+ODiOOBruOCpOODs+OCr+ODquODoeODs+ODiFxyXG4gICAgICAgIHN0YXR1c0FkZFJlZihzdGF0dXM6IHN0cmluZyk6IG51bWJlciB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9vd25lci5zdGF0dXNBZGRSZWYoc3RhdHVzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDnirbmhYvlpInmlbDjga7lj4Lnhafjgqvjgqbjg7Pjg4jjga7jg4fjgq/jg6rjg6Hjg7Pjg4hcclxuICAgICAgICBzdGF0dXNSZWxlYXNlKHN0YXR1czogc3RyaW5nKTogbnVtYmVyIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX293bmVyLnN0YXR1c1JlbGVhc2Uoc3RhdHVzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDlh6bnkIbjgrnjgrPjg7zjg5fmr47jgavnirbmhYvlpInmlbDjgpLoqK3lrppcclxuICAgICAgICBzdGF0dXNTY29wZShzdGF0dXM6IHN0cmluZywgY2FsbGJhY2s6ICgpID0+IHZvaWQpOiB2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy5fb3duZXIuc3RhdHVzU2NvcGUoc3RhdHVzLCBjYWxsYmFjayk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg5oyH5a6a44GX44Gf54q25oWL5Lit44Gn44GC44KL44GL56K66KqNXHJcbiAgICAgICAgaXNTdGF0dXNJbihzdGF0dXM6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fb3duZXIuaXNTdGF0dXNJbihzdGF0dXMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIGxheW91dCBrZXkg44KS5Y+W5b6XXHJcbiAgICAgICAgZ2V0IGxheW91dEtleSgpOiBzdHJpbmcge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fbGF5b3V0S2V5O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIGxheW91dCBrZXkg44KS6Kit5a6aXHJcbiAgICAgICAgc2V0IGxheW91dEtleShrZXk6IHN0cmluZykge1xyXG4gICAgICAgICAgICB0aGlzLl9sYXlvdXRLZXkgPSBrZXk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg44OH44O844K/44KS56C05qOEXHJcbiAgICAgICAgcmVsZWFzZSgpOiB2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy5fbWFwR3JvdXBzID0ge307XHJcbiAgICAgICAgICAgIHRoaXMuX2FyeVRvcEdyb3VwcyA9IFtdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgICAgICAvLyBJbXBsZW1lbnRlczogSUJhY2t1cFJlc3RvcmVcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog5YaF6YOo44OH44O844K/44KS44OQ44OD44Kv44Ki44OD44OXXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0ga2V5IHtTdHJpbmd9IFtpbl0g44OQ44OD44Kv44Ki44OD44OX44Kt44O844KS5oyH5a6aXHJcbiAgICAgICAgICogQHJldHVybiB7Qm9vbGVhbn0gdHJ1ZTog5oiQ5YqfIC8gZmFsc2U6IOWkseaVl1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGJhY2t1cChrZXk6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICBjb25zdCBfYmFja3VwID0gdGhpcy5iYWNrdXBEYXRhO1xyXG4gICAgICAgICAgICBpZiAobnVsbCA9PSBfYmFja3VwW2tleV0pIHtcclxuICAgICAgICAgICAgICAgIF9iYWNrdXBba2V5XSA9IHtcclxuICAgICAgICAgICAgICAgICAgICBtYXA6IHRoaXMuX21hcEdyb3VwcyxcclxuICAgICAgICAgICAgICAgICAgICB0b3BzOiB0aGlzLl9hcnlUb3BHcm91cHMsXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog5YaF6YOo44OH44O844K/44KS44Oq44K544OI44KiXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0ga2V5ICAgICB7U3RyaW5nfSAgW2luXSDjg5Djg4Pjgq/jgqLjg4Pjg5fjgq3jg7zjgpLmjIflrppcclxuICAgICAgICAgKiBAcGFyYW0gcmVidWlsZCB7Qm9vbGVhbn0gW2luXSByZWJ1aWxkIOOCkuWun+ihjOOBmeOCi+WgtOWQiOOBryB0cnVlIOOCkuaMh+WumlxyXG4gICAgICAgICAqIEByZXR1cm4ge0Jvb2xlYW59IHRydWU6IOaIkOWKnyAvIGZhbHNlOiDlpLHmlZdcclxuICAgICAgICAgKi9cclxuICAgICAgICByZXN0b3JlKGtleTogc3RyaW5nLCByZWJ1aWxkOiBib29sZWFuID0gdHJ1ZSk6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICBjb25zdCBfYmFja3VwID0gdGhpcy5iYWNrdXBEYXRhO1xyXG5cclxuICAgICAgICAgICAgaWYgKG51bGwgPT0gX2JhY2t1cFtrZXldKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKDAgPCB0aGlzLl9hcnlUb3BHcm91cHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbGVhc2UoKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5fbWFwR3JvdXBzID0gX2JhY2t1cFtrZXldLm1hcDtcclxuICAgICAgICAgICAgdGhpcy5fYXJ5VG9wR3JvdXBzID0gX2JhY2t1cFtrZXldLnRvcHM7XHJcblxyXG4gICAgICAgICAgICAvLyBsYXlvdXQg5oOF5aCx44Gu56K66KqNXHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9hcnlUb3BHcm91cHMubGVuZ3RoIDw9IDAgfHwgIXRoaXMuX2FyeVRvcEdyb3Vwc1swXS5oYXNMYXlvdXRLZXlPZih0aGlzLmxheW91dEtleSkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8g5bGV6ZaL44GX44Gm44GE44KL44KC44Gu44KS55m76YyyXHJcbiAgICAgICAgICAgIHRoaXMuX2FyeVRvcEdyb3Vwcy5mb3JFYWNoKChncm91cDogR3JvdXBQcm9maWxlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBncm91cC5yZXN0b3JlKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgLy8g5YaN5qeL56+J44Gu5LqI57SEXHJcbiAgICAgICAgICAgIGlmIChyZWJ1aWxkKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9vd25lci5yZWJ1aWxkKCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOODkOODg+OCr+OCouODg+ODl+ODh+ODvOOCv+OBruacieeEoVxyXG4gICAgICAgIGhhc0JhY2t1cChrZXk6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fb3duZXIuaGFzQmFja3VwKGtleSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg44OQ44OD44Kv44Ki44OD44OX44OH44O844K/44Gu56C05qOEXHJcbiAgICAgICAgY2xlYXJCYWNrdXAoa2V5Pzogc3RyaW5nKTogYm9vbGVhbiB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9vd25lci5jbGVhckJhY2t1cChrZXkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOODkOODg+OCr+OCouODg+ODl+ODh+ODvOOCv+OBq+OCouOCr+OCu+OCuVxyXG4gICAgICAgIGdldCBiYWNrdXBEYXRhKCk6IGFueSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9vd25lci5iYWNrdXBEYXRhO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJuYW1lc3BhY2UgQ0RQLlVJIHtcclxuXHJcbiAgICBjb25zdCBUQUcgPSBcIltDRFAuVUkuRXhwYW5kYWJsZUxpc3RWaWV3XSBcIjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBjbGFzcyBFeHBhbmRhYmxlTGlzdFZpZXdcclxuICAgICAqIEBicmllZiDplovplonmqZ/og73jgpLlgpnjgYjjgZ/ku67mg7Pjg6rjgrnjg4jjg5Pjg6Xjg7zjgq/jg6njgrlcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGNsYXNzIEV4cGFuZGFibGVMaXN0VmlldzxUTW9kZWwgZXh0ZW5kcyBCYWNrYm9uZS5Nb2RlbCA9IEJhY2tib25lLk1vZGVsPlxyXG4gICAgICAgIGV4dGVuZHMgTGlzdFZpZXc8VE1vZGVsPiBpbXBsZW1lbnRzIElFeHBhbmRhYmxlTGlzdFZpZXcge1xyXG5cclxuICAgICAgICBwcml2YXRlIF9zdGF0dXNNZ3I6IFN0YXR1c01hbmFnZXIgPSBudWxsO1xyXG4gICAgICAgIHByaXZhdGUgX2V4cGFuZE1hbmFnZXI6IEV4cGFuZE1hbmFnZXIgPSBudWxsO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBjb25zdHJ1Y3RvclxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIG9wdGlvbnMge0xpc3RWaWV3Q29uc3RydWN0T3B0aW9uc30gW2luXSDjgqrjg5fjgrfjg6fjg7NcclxuICAgICAgICAgKi9cclxuICAgICAgICBjb25zdHJ1Y3RvcihvcHRpb25zPzogTGlzdFZpZXdDb25zdHJ1Y3RPcHRpb25zPFRNb2RlbD4pIHtcclxuICAgICAgICAgICAgc3VwZXIob3B0aW9ucyk7XHJcbiAgICAgICAgICAgIHRoaXMuX3N0YXR1c01nciA9IG5ldyBTdGF0dXNNYW5hZ2VyKCk7XHJcbiAgICAgICAgICAgIHRoaXMuX2V4cGFuZE1hbmFnZXIgPSBuZXcgRXhwYW5kTWFuYWdlcih0aGlzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAgICAgLy8gSW1wbGVtZW50czogSUV4cGFuZGFibGVMaXN0Vmlld1xyXG5cclxuICAgICAgICAvLyEg5paw6KaPIEdyb3VwUHJvZmlsZSDjgpLkvZzmiJBcclxuICAgICAgICBuZXdHcm91cChpZD86IHN0cmluZyk6IEdyb3VwUHJvZmlsZSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9leHBhbmRNYW5hZ2VyLm5ld0dyb3VwKGlkKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDnmbvpjLLmuIjjgb8gR3JvdXAg44KS5Y+W5b6XXHJcbiAgICAgICAgZ2V0R3JvdXAoaWQ6IHN0cmluZyk6IEdyb3VwUHJvZmlsZSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9leHBhbmRNYW5hZ2VyLmdldEdyb3VwKGlkKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDnrKwx6ZqO5bGk44GuIEdyb3VwIOeZu+mMslxyXG4gICAgICAgIHJlZ2lzdGVyVG9wR3JvdXAodG9wR3JvdXA6IEdyb3VwUHJvZmlsZSk6IHZvaWQge1xyXG4gICAgICAgICAgICB0aGlzLl9leHBhbmRNYW5hZ2VyLnJlZ2lzdGVyVG9wR3JvdXAodG9wR3JvdXApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOesrDHpmo7lsaTjga4gR3JvdXAg44KS5Y+W5b6XXHJcbiAgICAgICAgZ2V0VG9wR3JvdXBzKCk6IEdyb3VwUHJvZmlsZVtdIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2V4cGFuZE1hbmFnZXIuZ2V0VG9wR3JvdXBzKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg44GZ44G544Gm44Gu44Kw44Or44O844OX44KS5bGV6ZaLICgx6ZqO5bGkKVxyXG4gICAgICAgIGV4cGFuZEFsbCgpOiB2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy5fZXhwYW5kTWFuYWdlci5leHBhbmRBbGwoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDjgZnjgbnjgabjga7jgrDjg6vjg7zjg5fjgpLlj47mnZ8gKDHpmo7lsaQpXHJcbiAgICAgICAgY29sbGFwc2VBbGwoZGVsYXk/OiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy5fZXhwYW5kTWFuYWdlci5jb2xsYXBzZUFsbChkZWxheSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg5bGV6ZaL5Lit44GL5Yik5a6aXHJcbiAgICAgICAgaXNFeHBhbmRpbmcoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9leHBhbmRNYW5hZ2VyLmlzRXhwYW5kaW5nKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg5Y+O5p2f5Lit44GL5Yik5a6aXHJcbiAgICAgICAgaXNDb2xsYXBzaW5nKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZXhwYW5kTWFuYWdlci5pc0NvbGxhcHNpbmcoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDplovplonkuK3jgYvliKTlrppcclxuICAgICAgICBpc1N3aXRjaGluZygpOiBib29sZWFuIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2V4cGFuZE1hbmFnZXIuaXNTd2l0Y2hpbmcoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDnirbmhYvlpInmlbDjga7lj4Lnhafjgqvjgqbjg7Pjg4jjga7jgqTjg7Pjgq/jg6rjg6Hjg7Pjg4hcclxuICAgICAgICBzdGF0dXNBZGRSZWYoc3RhdHVzOiBzdHJpbmcpOiBudW1iZXIge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fc3RhdHVzTWdyLnN0YXR1c0FkZFJlZihzdGF0dXMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOeKtuaFi+WkieaVsOOBruWPgueFp+OCq+OCpuODs+ODiOOBruODh+OCr+ODquODoeODs+ODiFxyXG4gICAgICAgIHN0YXR1c1JlbGVhc2Uoc3RhdHVzOiBzdHJpbmcpOiBudW1iZXIge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fc3RhdHVzTWdyLnN0YXR1c1JlbGVhc2Uoc3RhdHVzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDlh6bnkIbjgrnjgrPjg7zjg5fmr47jgavnirbmhYvlpInmlbDjgpLoqK3lrppcclxuICAgICAgICBzdGF0dXNTY29wZShzdGF0dXM6IHN0cmluZywgY2FsbGJhY2s6ICgpID0+IHZvaWQpOiB2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy5fc3RhdHVzTWdyLnN0YXR1c1Njb3BlKHN0YXR1cywgY2FsbGJhY2spO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOaMh+WumuOBl+OBn+eKtuaFi+S4reOBp+OBguOCi+OBi+eiuuiqjVxyXG4gICAgICAgIGlzU3RhdHVzSW4oc3RhdHVzOiBzdHJpbmcpOiBib29sZWFuIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3N0YXR1c01nci5pc1N0YXR1c0luKHN0YXR1cyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEgbGF5b3V0IGtleSDjgpLlj5blvpdcclxuICAgICAgICBnZXQgbGF5b3V0S2V5KCk6IHN0cmluZyB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9leHBhbmRNYW5hZ2VyLmxheW91dEtleTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISBsYXlvdXQga2V5IOOCkuioreWumlxyXG4gICAgICAgIHNldCBsYXlvdXRLZXkoa2V5OiBzdHJpbmcpIHtcclxuICAgICAgICAgICAgdGhpcy5fZXhwYW5kTWFuYWdlci5sYXlvdXRLZXkgPSBrZXk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgICAgIC8vIE92ZXJyaWRlOiBMaXN0Vmlld1xyXG5cclxuICAgICAgICAvLyEg44OH44O844K/44KS56C05qOEXHJcbiAgICAgICAgcmVsZWFzZSgpOiB2b2lkIHtcclxuICAgICAgICAgICAgc3VwZXIucmVsZWFzZSgpO1xyXG4gICAgICAgICAgICB0aGlzLl9leHBhbmRNYW5hZ2VyLnJlbGVhc2UoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDlhoXpg6jjg4fjg7zjgr/jgpLjg5Djg4Pjgq/jgqLjg4Pjg5dcclxuICAgICAgICBiYWNrdXAoa2V5OiBzdHJpbmcpOiBib29sZWFuIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2V4cGFuZE1hbmFnZXIuYmFja3VwKGtleSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg5YaF6YOo44OH44O844K/44KS44Oq44K544OI44KiXHJcbiAgICAgICAgcmVzdG9yZShrZXk6IHN0cmluZywgcmVidWlsZDogYm9vbGVhbiA9IHRydWUpOiBib29sZWFuIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2V4cGFuZE1hbmFnZXIucmVzdG9yZShrZXksIHJlYnVpbGQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJuYW1lc3BhY2UgQ0RQLlVJIHtcclxuXHJcbiAgICBpbXBvcnQgQ29uZmlnICAgICAgID0gQ0RQLkNvbmZpZztcclxuICAgIGltcG9ydCBGcmFtZXdvcmsgICAgPSBDRFAuRnJhbWV3b3JrO1xyXG5cclxuICAgIGNvbnN0IFRBRyA9IFwiW0NEUC5VSS5UaGVtZV0gXCI7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAaW50ZXJmYWNlIFBsYXRmb3JtVHJhbnNpdGlvblxyXG4gICAgICogQGJyaWVmIOODl+ODqeODg+ODiOODleOCqeODvOODoOOBlOOBqOOBriBUcmFuc2l0aW9uIOOCkuagvOe0jVxyXG4gICAgICovXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIFBsYXRmb3JtVHJhbnNpdGlvbiB7XHJcbiAgICAgICAgW3BsYXRmb3JtOiBzdHJpbmddOiBzdHJpbmc7ICAgICAvLyBleCkgaW9zOiBcInNsaWRlXCJcclxuICAgICAgICBmYWxsYmFjazogc3RyaW5nOyAgICAgICAgICAgICAgIC8vIGZhbGxiYWNrIHRyYW5zaXRpb24gcHJvcFxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGludGVyZmFjZSBUcmFuc2l0aW9uTWFwXHJcbiAgICAgKiBAYnJpZWYg44OI44Op44Oz44K444K344On44Oz44Oe44OD44OXXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgVHJhbnNpdGlvbk1hcCB7XHJcbiAgICAgICAgW3RyYW5zaXRpb25OYW1lOiBzdHJpbmddOiBQbGF0Zm9ybVRyYW5zaXRpb247XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAaW50ZXJmYWNlIFRoZW1lSW5pdE9wdGlvbnNcclxuICAgICAqIEBicmllZiDjg4jjg6njg7Pjgrjjgrfjg6fjg7Pjg57jg4Pjg5dcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBUaGVtZUluaXRPcHRpb25zIHtcclxuICAgICAgICBwbGF0Zm9ybT86IHN0cmluZzsgICAgICAgICAgICAgICAgICAvLyBwbGF0Zm9ybSDjgpLmjIflrpouIGRlZmF1bHQ6XCJhdXRvXCJcclxuICAgICAgICByZXNlcnZlU2Nyb2xsYmFyUmVnaW9uPzogYm9vbGVhbjsgICAvLyBQQyDjg4fjg5Djg4PjgrDnkrDlooPjgafjga/jgrnjgq/jg63jg7zjg6vjg5Djg7zjgpLooajnpLouIGRlZmF1bHQ6IFwidHJ1ZVwiXHJcbiAgICB9XHJcblxyXG4gICAgLy9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fLy9cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBjbGFzcyBUaGVtZVxyXG4gICAgICogQGJyaWVmIFVJIFRoZW1lIOioreWumuOCkuihjOOBhuODpuODvOODhuOCo+ODquODhuOCo+OCr+ODqeOCuVxyXG4gICAgICovXHJcbiAgICBleHBvcnQgY2xhc3MgVGhlbWUge1xyXG5cclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBzX3BsYXRmb3Jtczogc3RyaW5nW10gPSBbXCJpb3NcIiwgXCJhbmRyb2lkXCJdO1xyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIHNfcGFnZVRyYW5zaXRpb25NYXA6IFRyYW5zaXRpb25NYXAgPSB7XHJcbiAgICAgICAgICAgIFwicGxhdGZvcm0tZGVmYXVsdFwiOiB7XHJcbiAgICAgICAgICAgICAgICBpb3M6IFwic2xpZGVcIixcclxuICAgICAgICAgICAgICAgIGFuZHJvaWQ6IFwiZmxvYXR1cFwiLFxyXG4gICAgICAgICAgICAgICAgZmFsbGJhY2s6IFwic2xpZGVcIixcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgXCJwbGF0Zm9ybS1hbHRlcm5hdGl2ZVwiOiB7XHJcbiAgICAgICAgICAgICAgICBpb3M6IFwic2xpZGV1cFwiLFxyXG4gICAgICAgICAgICAgICAgYW5kcm9pZDogXCJmbG9hdHVwXCIsXHJcbiAgICAgICAgICAgICAgICBmYWxsYmFjazogXCJzbGlkZXVwXCIsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgfTtcclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBzX2RpYWxvZ1RyYW5zaXRpb25NYXA6IFRyYW5zaXRpb25NYXAgPSB7XHJcbiAgICAgICAgICAgIFwicGxhdGZvcm0tZGVmYXVsdFwiOiB7XHJcbiAgICAgICAgICAgICAgICBpb3M6IFwicG9wem9vbVwiLFxyXG4gICAgICAgICAgICAgICAgYW5kcm9pZDogXCJjcm9zc3pvb21cIixcclxuICAgICAgICAgICAgICAgIGZhbGxiYWNrOiBcIm5vbmVcIixcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgICAgIC8vIHB1YmxpYyBzdGF0aWMgbWV0aG9kczpcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVGhlbWUg44Gu5Yid5pyf5YyWXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gb3B0aW9ucyDjgqrjg5fjgrfjg6fjg7PmjIflrppcclxuICAgICAgICAgKiBAcmV0dXJucyB0cnVlOiDmiJDlip8gLyBmYWxzZTog5aSx5pWXXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBpbml0aWFsaXplKG9wdGlvbnM/OiBUaGVtZUluaXRPcHRpb25zKTogc3RyaW5nIHtcclxuICAgICAgICAgICAgY29uc3Qgb3B0ID0gJC5leHRlbmQoe30sIHtcclxuICAgICAgICAgICAgICAgIHBsYXRmb3JtOiBcImF1dG9cIixcclxuICAgICAgICAgICAgICAgIHJlc2VydmVTY3JvbGxiYXJSZWdpb246IHRydWUsXHJcbiAgICAgICAgICAgIH0sIG9wdGlvbnMpO1xyXG5cclxuICAgICAgICAgICAgaWYgKFwiYXV0b1wiID09PSBvcHQucGxhdGZvcm0pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBUaGVtZS5kZXRlY3RVSVBsYXRmb3JtKG9wdC5yZXNlcnZlU2Nyb2xsYmFyUmVnaW9uKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmIChUaGVtZS5zZXRDdXJyZW50VUlQbGF0Zm9ybShvcHQucGxhdGZvcm0pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9wdC5wbGF0Zm9ybTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFRBRyArIFwic2V0Q3VycmVudFVJUGxhdGZvcm0oKSwgZmFpbGVkLiBwbGF0Zm9ybTogXCIgKyBvcHQucGxhdGZvcm0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDnj77lnKjmjIflrprjgZXjgozjgabjgYTjgosgVUkgUGxhdGZvcm0g44KS5Y+W5b6XXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJuIHtTdHJpbmd9IGV4KSBcImlvc1wiXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBnZXRDdXJyZW50VUlQbGF0Zm9ybSgpOiBzdHJpbmcge1xyXG4gICAgICAgICAgICBjb25zdCAkaHRtcyA9ICQoXCJodG1sXCIpO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMCwgbiA9IFRoZW1lLnNfcGxhdGZvcm1zLmxlbmd0aDsgaSA8IG47IGkrKykge1xyXG4gICAgICAgICAgICAgICAgaWYgKCRodG1zLmhhc0NsYXNzKFwidWktcGxhdGZvcm0tXCIgKyBUaGVtZS5zX3BsYXRmb3Jtc1tpXSkpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gVGhlbWUuc19wbGF0Zm9ybXNbaV07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBVSSBQbGF0Zm9ybSDjgpLoqK3lrppcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm4ge1N0cmluZ30gdHJ1ZTog5oiQ5YqfIC8gZmFsc2U6IOWkseaVl1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgc2V0Q3VycmVudFVJUGxhdGZvcm0ocGxhdGZvcm06IHN0cmluZyk6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICBpZiAobnVsbCA9PSBwbGF0Zm9ybSB8fCBUaGVtZS5zX3BsYXRmb3Jtcy5pbmRleE9mKHBsYXRmb3JtKSA+PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCAkaHRtcyA9ICQoXCJodG1sXCIpO1xyXG4gICAgICAgICAgICAgICAgVGhlbWUuc19wbGF0Zm9ybXMuZm9yRWFjaCgodGFyZ2V0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgJGh0bXMucmVtb3ZlQ2xhc3MoXCJ1aS1wbGF0Zm9ybS1cIiArIHRhcmdldCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGlmIChwbGF0Zm9ybSkge1xyXG4gICAgICAgICAgICAgICAgICAgICRodG1zLmFkZENsYXNzKFwidWktcGxhdGZvcm0tXCIgKyBwbGF0Zm9ybSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog54++5Zyo44GuIFBsYXRmb3JtIOOCkuWIpOWumuOBl+acgOmBqeOBqiBwbGF0Zm9ybSDjgpLoh6rli5XmsbrlrppcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSByZXNlcnZlU2Nyb2xsYmFyUmVnaW9uIFBDIOODh+ODkOODg+OCsOeSsOWig+OBp+OBr+OCueOCr+ODreODvOODq+ODkOODvOOCkuihqOekui4gZGVmYXVsdDogdHJ1ZVxyXG4gICAgICAgICAqIEByZXR1cm5zIGV4KSBcImlvc1wiXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBkZXRlY3RVSVBsYXRmb3JtKHJlc2VydmVTY3JvbGxiYXJSZWdpb246IGJvb2xlYW4gPSB0cnVlKTogc3RyaW5nIHtcclxuICAgICAgICAgICAgbGV0IHBsYXRmb3JtID0gXCJcIjtcclxuICAgICAgICAgICAgLy8gcGxhdGZvcm0g44Gu6Kit5a6aXHJcbiAgICAgICAgICAgIGlmIChGcmFtZXdvcmsuUGxhdGZvcm0uaU9TKSB7XHJcbiAgICAgICAgICAgICAgICAkKFwiaHRtbFwiKS5hZGRDbGFzcyhcInVpLXBsYXRmb3JtLWlvc1wiKTtcclxuICAgICAgICAgICAgICAgIHBsYXRmb3JtID0gXCJpb3NcIjtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICQoXCJodG1sXCIpLmFkZENsYXNzKFwidWktcGxhdGZvcm0tYW5kcm9pZFwiKTtcclxuICAgICAgICAgICAgICAgIHBsYXRmb3JtID0gXCJhbmRyb2lkXCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gUEMg44OH44OQ44OD44Kw55Kw5aKD44Gn44Gv44K544Kv44Ot44O844Or44OQ44O844KS6KGo56S6XHJcbiAgICAgICAgICAgIGlmIChDb25maWcuREVCVUcgJiYgcmVzZXJ2ZVNjcm9sbGJhclJlZ2lvbiAmJiAhRnJhbWV3b3JrLlBsYXRmb3JtLk1vYmlsZSkge1xyXG4gICAgICAgICAgICAgICAgJChcImJvZHlcIikuY3NzKFwib3ZlcmZsb3cteVwiLCBcInNjcm9sbFwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gcGxhdGZvcm07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBwbGF0Zm9ybSDjgpLphY3liJfjgafnmbvpjLJcclxuICAgICAgICAgKiDkuIrmm7jjgY3jgZXjgozjgotcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB7U3RyaW5nW119IHBsYXRmb3JtcyBbaW5dIE9TIGV4KTogW1wiaW9zXCIsIFwiYW5kcm9pZFwiXVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgcmVnaXN0ZXJVSVBsYXRmb3JtcyhwbGF0Zm9ybXM6IHN0cmluZ1tdKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGlmIChwbGF0Zm9ybXMpIHtcclxuICAgICAgICAgICAgICAgIFRoZW1lLnNfcGxhdGZvcm1zID0gcGxhdGZvcm1zO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBwYWdlIHRyYW5zaXRpb24g44KS55m76YyyXHJcbiAgICAgICAgICog5LiK5pu444GN44GV44KM44KLXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0ge1RyYW5zaXRpb25NYXB9IG1hcCBbaW5dIFRyYW5zaXRpb25NYXAg44KS5oyH5a6aXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyByZWdpc3RlclBhZ2VUcmFuc2l0aW9uTWFwKG1hcDogVHJhbnNpdGlvbk1hcCk6IHZvaWQge1xyXG4gICAgICAgICAgICBpZiAobWFwKSB7XHJcbiAgICAgICAgICAgICAgICBUaGVtZS5zX3BhZ2VUcmFuc2l0aW9uTWFwID0gbWFwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBkaWFsb2cgdHJhbnNpdGlvbiDjgpLnmbvpjLJcclxuICAgICAgICAgKiDkuIrmm7jjgY3jgZXjgozjgotcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB7VHJhbnNpdGlvbk1hcH0gbWFwIFtpbl0gVHJhbnNpdGlvbk1hcCDjgpLmjIflrppcclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHJlZ2lzdGVyRGlhbG9nVHJhbnNpdGlvbk1hcChtYXA6IFRyYW5zaXRpb25NYXApOiB2b2lkIHtcclxuICAgICAgICAgICAgaWYgKG1hcCkge1xyXG4gICAgICAgICAgICAgICAgVGhlbWUuc19kaWFsb2dUcmFuc2l0aW9uTWFwID0gbWFwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBwYWdlIHRyYW5zaXRpb24g44KS5Y+W5b6XXHJcbiAgICAgICAgICogVHJhbnNpdGlvbk1hcCDjgavjgqLjgrXjgqTjg7PjgZXjgozjgabjgYTjgovjgoLjga7jgafjgYLjgozjgbDlpInmj5tcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm4ge1N0cmluZ1tdfSBcInNsaWRlXCJcclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHF1ZXJ5UGFnZVRyYW5zaXRpb24ob3JpZ2luYWw6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnZlcnQgPSBUaGVtZS5zX3BhZ2VUcmFuc2l0aW9uTWFwW29yaWdpbmFsXTtcclxuICAgICAgICAgICAgaWYgKGNvbnZlcnQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBjb252ZXJ0W1RoZW1lLmdldEN1cnJlbnRVSVBsYXRmb3JtKCldIHx8IGNvbnZlcnQuZmFsbGJhY2s7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gb3JpZ2luYWw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIGRpYWxvZyB0cmFuc2l0aW9uIOOCkuWPluW+l1xyXG4gICAgICAgICAqIFRyYW5zaXRpb25NYXAg44Gr44Ki44K144Kk44Oz44GV44KM44Gm44GE44KL44KC44Gu44Gn44GC44KM44Gw5aSJ5o+bXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJuIHtTdHJpbmdbXX0gXCJzbGlkZVwiXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBxdWVyeURpYWxvZ1RyYW5zaXRpb24ob3JpZ2luYWw6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnZlcnQgPSBUaGVtZS5zX2RpYWxvZ1RyYW5zaXRpb25NYXBbb3JpZ2luYWxdO1xyXG4gICAgICAgICAgICBpZiAoY29udmVydCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbnZlcnRbVGhlbWUuZ2V0Q3VycmVudFVJUGxhdGZvcm0oKV0gfHwgY29udmVydC5mYWxsYmFjaztcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBvcmlnaW5hbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvL19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18vL1xyXG5cclxuICAgIC8vIGpxdWV5Lm1vYmlsZS5jaGFuZ2VQYWdlKCkg44GuIEhvb2suXHJcbiAgICBmdW5jdGlvbiBhcHBseUN1c3RvbUNoYW5nZVBhZ2UoKSB7XHJcbiAgICAgICAgY29uc3QganFtQ2hhbmdlUGFnZTogKHRvOiBhbnksIG9wdGlvbnM/OiBDaGFuZ2VQYWdlT3B0aW9ucykgPT4gdm9pZCA9ICQubW9iaWxlLmNoYW5nZVBhZ2UuYmluZCgkLm1vYmlsZSk7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGN1c3RvbUNoYW5nZVBhZ2UodG86IGFueSwgb3B0aW9ucz86IENoYW5nZVBhZ2VPcHRpb25zKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGlmIChfLmlzU3RyaW5nKHRvKSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy50cmFuc2l0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy50cmFuc2l0aW9uID0gVGhlbWUucXVlcnlQYWdlVHJhbnNpdGlvbihvcHRpb25zLnRyYW5zaXRpb24pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGpxbUNoYW5nZVBhZ2UodG8sIG9wdGlvbnMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJC5tb2JpbGUuY2hhbmdlUGFnZSA9IGN1c3RvbUNoYW5nZVBhZ2U7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gZnJhbWV3b3JrIOWIneacn+WMluW+jOOBq+mBqeeUqFxyXG4gICAgRnJhbWV3b3JrLndhaXRGb3JJbml0aWFsaXplKClcclxuICAgICAgICAuZG9uZSgoKSA9PiB7XHJcbiAgICAgICAgICAgIGFwcGx5Q3VzdG9tQ2hhbmdlUGFnZSgpO1xyXG4gICAgICAgIH0pO1xyXG59XHJcbiIsIm5hbWVzcGFjZSBDRFAuVUkge1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGludGVyZmFjZSBEb21FeHRlbnNpb25PcHRpb25zXHJcbiAgICAgKiBAYnJlaWYgRG9tRXh0ZW5zaW9uIOOBq+a4oeOBmeOCquODl+OCt+ODp+ODs+OCpOODs+OCv+ODvOODleOCp+OCpOOCuVxyXG4gICAgICovXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIERvbUV4dGVuc2lvbk9wdGlvbnMge1xyXG4gICAgICAgIFtrZXk6IHN0cmluZ106IGFueTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEB0eXBlIERvbUV4dGVuc2lvblxyXG4gICAgICogQGJyaWVmIERPTSDmi6HlvLXplqLmlbBcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IHR5cGUgRG9tRXh0ZW5zaW9uID0gKCR0YXJnZXQ6IEpRdWVyeSwgRG9tRXh0ZW5zaW9uT3B0aW9ucz86IE9iamVjdCkgPT4gSlF1ZXJ5O1xyXG5cclxuICAgIC8vX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXy8vXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAY2xhc3MgRXh0ZW5zaW9uTWFuYWdlclxyXG4gICAgICogQGJyaWVmIOaLoeW8teapn+iDveOCkueuoeeQhuOBmeOCi+ODpuODvOODhuOCo+ODquODhuOCo+OCr+ODqeOCuVxyXG4gICAgICovXHJcbiAgICBleHBvcnQgY2xhc3MgRXh0ZW5zaW9uTWFuYWdlciB7XHJcblxyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIHNfZG9tRXh0ZW5zaW9uczogRG9tRXh0ZW5zaW9uW10gPSBbXTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogRE9NIOaLoeW8temWouaVsOOBrueZu+mMslxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtEb21FeHRlbnNpb259IGZ1bmMgW2luXSBET00g5ouh5by16Zai5pWwXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyByZWdpc3RlckRvbUV4dGVuc2lvbihmdW5jOiBEb21FeHRlbnNpb24pOiB2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy5zX2RvbUV4dGVuc2lvbnMucHVzaChmdW5jKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIERPTSDmi6HlvLXjgpLpgannlKhcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB7alF1ZXJ5fSAkdWkgICAgICAgW2luXSDmi6HlvLXlr77osaHjga4gRE9NXHJcbiAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSBbaW5dIOOCquODl+OCt+ODp+ODs1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYXBwbHlEb21FeHRlbnNpb24oJHVpOiBKUXVlcnksIG9wdGlvbnM/OiBEb21FeHRlbnNpb25PcHRpb25zKTogdm9pZCB7XHJcbiAgICAgICAgICAgIHRoaXMuc19kb21FeHRlbnNpb25zLmZvckVhY2goKGZ1bmM6IERvbUV4dGVuc2lvbikgPT4ge1xyXG4gICAgICAgICAgICAgICAgZnVuYygkdWksIG9wdGlvbnMpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiLyogdHNsaW50OmRpc2FibGU6bm8tYml0d2lzZSAqL1xyXG5cclxubmFtZXNwYWNlIENEUC5VSSB7XHJcblxyXG4gICAgY29uc3QgVEFHID0gXCJbQ0RQLlVJLlRvYXN0XSBcIjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBjbGFzcyBUb2FzdFxyXG4gICAgICogQGJyaWVmIEFuZHJvaWQgU0RLIOOBriBUb2FzdCDjgq/jg6njgrnjga7jgojjgYbjgavoh6rli5Xmtojmu4XjgZnjgovjg6Hjg4Pjgrvjg7zjgrjlh7rlipvjg6bjg7zjg4bjgqPjg6rjg4bjgqNcclxuICAgICAqICAgICAgICDlhaXjgozlrZDjga7plqLkv4LjgpLlrp/nj77jgZnjgovjgZ/jgoHjgasgbW9kdWxlIOOBp+Wun+ijhVxyXG4gICAgICovXHJcbiAgICBleHBvcnQgbW9kdWxlIFRvYXN0IHtcclxuXHJcbiAgICAgICAgLy8g6KGo56S65pmC6ZaT44Gu5a6a576pXHJcbiAgICAgICAgZXhwb3J0IGxldCBMRU5HVEhfU0hPUlQgPSAxNTAwOyAgIC8vITwg55+t44GEOjE1MDAgbXNlY1xyXG4gICAgICAgIGV4cG9ydCBsZXQgTEVOR1RIX0xPTkcgID0gNDAwMDsgICAvLyE8IOmVt+OBhDo0MDAwIG1zZWNcclxuXHJcbiAgICAgICAgLy8hIEBlbnVtIOOCquODleOCu+ODg+ODiOOBruWfuua6llxyXG4gICAgICAgIGV4cG9ydCBlbnVtIE9mZnNldFgge1xyXG4gICAgICAgICAgICBMRUZUICAgID0gMHgwMDAxLFxyXG4gICAgICAgICAgICBSSUdIVCAgID0gMHgwMDAyLFxyXG4gICAgICAgICAgICBDRU5URVIgID0gMHgwMDA0LFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIEBlbnVtIOOCquODleOCu+ODg+ODiOOBruWfuua6llxyXG4gICAgICAgIGV4cG9ydCBlbnVtIE9mZnNldFkge1xyXG4gICAgICAgICAgICBUT1AgICAgID0gMHgwMDEwLFxyXG4gICAgICAgICAgICBCT1RUT00gID0gMHgwMDIwLFxyXG4gICAgICAgICAgICBDRU5URVIgID0gMHgwMDQwLFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQGludGVyZmFjZSBTdHlsZUJ1aWxkZXJcclxuICAgICAgICAgKiBAYnJpZWYgICAgIOOCueOCv+OCpOODq+WkieabtOaZguOBq+S9v+eUqOOBmeOCi+OCpOODs+OCv+ODvOODleOCp+OCpOOCuVxyXG4gICAgICAgICAqICAgICAgICAgICAgY3NzIOOBq+OCueOCv+OCpOODq+OCkumAg+OBjOOBmeWgtOWQiOOAgeeLrOiHquOBriBjbGFzcyDjgpLoqK3lrprjgZfjgIFnZXRTdHlsZSDjga8gbnVsbCDjgpLov5TjgZnjgZPjgajjgIJcclxuICAgICAgICAgKi9cclxuICAgICAgICBleHBvcnQgaW50ZXJmYWNlIFN0eWxlQnVpbGRlciB7XHJcbiAgICAgICAgICAgIC8vISBjbGFzcyBhdHRyaWJ1dGUg44Gr6Kit5a6a44GZ44KL5paH5a2X5YiX44KS5Y+W5b6XXHJcbiAgICAgICAgICAgIGdldENsYXNzKCk6IHN0cmluZztcclxuICAgICAgICAgICAgLy8hIHN0eWxlIGF0dHJpYnV0ZSDjgavoqK3lrprjgZnjgosgSlNPTiDjgqrjg5bjgrjjgqfjgq/jg4jjgpLlj5blvpdcclxuICAgICAgICAgICAgZ2V0U3R5bGUoKTogYW55O1xyXG4gICAgICAgICAgICAvLyEg44Kq44OV44K744OD44OI44Gu5Z+65rqW5L2N572u44KS5Y+W5b6XXHJcbiAgICAgICAgICAgIGdldE9mZnNldFBvaW50KCk6IG51bWJlcjtcclxuICAgICAgICAgICAgLy8hIFgg5bqn5qiZ44Gu44Kq44OV44K744OD44OI5YCk44KS5Y+W5b6XXHJcbiAgICAgICAgICAgIGdldE9mZnNldFgoKTogbnVtYmVyO1xyXG4gICAgICAgICAgICAvLyEgWSDluqfmqJnjga7jgqrjg5Xjgrvjg4Pjg4jlgKTjgpLlj5blvpdcclxuICAgICAgICAgICAgZ2V0T2Zmc2V0WSgpOiBudW1iZXI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAY2xhc3MgU3R5bGVCdWlsZGVyRGVmYXVsdFxyXG4gICAgICAgICAqIEBicmllZiDjgrnjgr/jgqTjg6vlpInmm7TmmYLjgavkvb/nlKjjgZnjgovml6Llrprjga7mp4vpgKDkvZPjgqrjg5bjgrjjgqfjgq/jg4hcclxuICAgICAgICAgKi9cclxuICAgICAgICBleHBvcnQgY2xhc3MgU3R5bGVCdWlsZGVyRGVmYXVsdCBpbXBsZW1lbnRzIFN0eWxlQnVpbGRlciB7XHJcblxyXG4gICAgICAgICAgICAvLyEgY2xhc3MgYXR0cmlidXRlIOOBq+ioreWumuOBmeOCi+aWh+Wtl+WIl+OCkuWPluW+l1xyXG4gICAgICAgICAgICBnZXRDbGFzcygpOiBzdHJpbmcge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwidWktbG9hZGVyIHVpLW92ZXJsYXktc2hhZG93IHVpLWNvcm5lci1hbGxcIjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8hIHN0eWxlIGF0dHJpYnV0ZSDjgavoqK3lrprjgZnjgosgSlNPTiDjgqrjg5bjgrjjgqfjgq/jg4jjgpLlj5blvpdcclxuICAgICAgICAgICAgZ2V0U3R5bGUoKTogYW55IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHN0eWxlID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIFwicGFkZGluZ1wiOiAgICAgICAgICBcIjdweCAyNXB4IDdweCAyNXB4XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJkaXNwbGF5XCI6ICAgICAgICAgIFwiYmxvY2tcIixcclxuICAgICAgICAgICAgICAgICAgICBcImJhY2tncm91bmQtY29sb3JcIjogXCIjMWQxZDFkXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJib3JkZXItY29sb3JcIjogICAgIFwiIzFiMWIxYlwiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwiY29sb3JcIjogICAgICAgICAgICBcIiNmZmZcIixcclxuICAgICAgICAgICAgICAgICAgICBcInRleHQtc2hhZG93XCI6ICAgICAgXCIwIDFweCAwICMxMTFcIixcclxuICAgICAgICAgICAgICAgICAgICBcImZvbnQtd2VpZ2h0XCI6ICAgICAgXCJib2xkXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJvcGFjaXR5XCI6ICAgICAgICAgIDAuOCxcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gc3R5bGU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vISDjgqrjg5Xjgrvjg4Pjg4jjga7ln7rmupbkvY3nva7jgpLlj5blvpdcclxuICAgICAgICAgICAgZ2V0T2Zmc2V0UG9pbnQoKTogbnVtYmVyIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBPZmZzZXRYLkNFTlRFUiB8IE9mZnNldFkuQk9UVE9NO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyEgWCDluqfmqJnjga7jgqrjg5Xjgrvjg4Pjg4jlgKTjgpLlj5blvpdcclxuICAgICAgICAgICAgZ2V0T2Zmc2V0WCgpOiBudW1iZXIge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vISBZIOW6p+aomeOBruOCquODleOCu+ODg+ODiOWApOOCkuWPluW+l1xyXG4gICAgICAgICAgICBnZXRPZmZzZXRZKCk6IG51bWJlciB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gLTc1O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUb2FzdCDooajnpLpcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBtZXNzYWdlICBbaW5dIOODoeODg+OCu+ODvOOCuFxyXG4gICAgICAgICAqIEBwYXJhbSBkdXJhdGlvbiBbaW5dIOihqOekuuaZgumWk+OCkuioreWumiAobXNlYykgZGVmYXVsdDogTEVOR1RIX1NIT1JUXHJcbiAgICAgICAgICogQHBhcmFtIHN0eWxlICAgIFtpbl0g44K544K/44Kk44Or5aSJ5pu044GZ44KL5aC05ZCI44Gr44Gv5rS+55Sf44Kv44Op44K544Kq44OW44K444Kn44Kv44OI44KS5oyH5a6aXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZXhwb3J0IGZ1bmN0aW9uIHNob3cobWVzc2FnZTogc3RyaW5nLCBkdXJhdGlvbjogbnVtYmVyID0gVG9hc3QuTEVOR1RIX1NIT1JULCBzdHlsZT86IFN0eWxlQnVpbGRlcik6IHZvaWQge1xyXG4gICAgICAgICAgICBjb25zdCAkbW9iaWxlID0gJC5tb2JpbGU7XHJcbiAgICAgICAgICAgIGNvbnN0IGluZm8gPSBzdHlsZSB8fCBuZXcgU3R5bGVCdWlsZGVyRGVmYXVsdCgpO1xyXG4gICAgICAgICAgICBjb25zdCBzZXRDU1MgPSBpbmZvLmdldFN0eWxlKCkgPyB0cnVlIDogZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAvLyDmlLnooYzjgrPjg7zjg4njga8gPGJyLz4g44Gr572u5o+b44GZ44KLXHJcbiAgICAgICAgICAgIGNvbnN0IG1zZyA9IG1lc3NhZ2UucmVwbGFjZSgvXFxuL2csIFwiPGJyLz5cIik7XHJcblxyXG4gICAgICAgICAgICAvLyDjg6Hjg4Pjgrvjg7zjgrggZWxlbWVudCDjga7li5XnmoTnlJ/miJBcclxuICAgICAgICAgICAgY29uc3QgaHRtbCA9IFwiPGRpdj5cIiArIG1zZyArIFwiPC9kaXY+XCI7XHJcbiAgICAgICAgICAgIGNvbnN0IGJveCA9ICQoaHRtbCkuYWRkQ2xhc3MoaW5mby5nZXRDbGFzcygpKTtcclxuICAgICAgICAgICAgaWYgKHNldENTUykge1xyXG4gICAgICAgICAgICAgICAgYm94LmNzcyhpbmZvLmdldFN0eWxlKCkpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyDoh6rli5XmlLnooYzjgZXjgozjgabjgoLjgojjgYTjgojjgYbjgavjgIHln7rngrnjgpLoqK3lrprjgZfjgabjgYvjgonov73liqBcclxuICAgICAgICAgICAgYm94LmNzcyh7XHJcbiAgICAgICAgICAgICAgICBcInRvcFwiOiAwLFxyXG4gICAgICAgICAgICAgICAgXCJsZWZ0XCI6IDAsXHJcbiAgICAgICAgICAgIH0pLmFwcGVuZFRvKCRtb2JpbGUucGFnZUNvbnRhaW5lcik7XHJcblxyXG4gICAgICAgICAgICAvLyDphY3nva7kvY3nva7jga7msbrlrppcclxuICAgICAgICAgICAgY29uc3Qgb2Zmc2V0UG9pbnQgPSBpbmZvLmdldE9mZnNldFBvaW50KCk7XHJcbiAgICAgICAgICAgIGNvbnN0ICR3aW5kb3cgPSAkKHdpbmRvdyk7XHJcbiAgICAgICAgICAgIGxldCBwb3NYLCBwb3NZO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgYm94X3dpZHRoID0gYm94LndpZHRoKCkgKyBwYXJzZUludChib3guY3NzKFwicGFkZGluZy1sZWZ0XCIpLCAxMCkgKyBwYXJzZUludChib3guY3NzKFwicGFkZGluZy1yaWdodFwiKSwgMTApO1xyXG4gICAgICAgICAgICBjb25zdCBib3hfaGVpZ2h0ID0gYm94LmhlaWdodCgpICsgcGFyc2VJbnQoYm94LmNzcyhcInBhZGRpbmctdG9wXCIpLCAxMCkgKyBwYXJzZUludChib3guY3NzKFwicGFkZGluZy1ib3R0b21cIiksIDEwKTtcclxuXHJcbiAgICAgICAgICAgIHN3aXRjaCAob2Zmc2V0UG9pbnQgJiAweDAwMEYpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgT2Zmc2V0WC5MRUZUOlxyXG4gICAgICAgICAgICAgICAgICAgIHBvc1ggPSAwICsgaW5mby5nZXRPZmZzZXRYKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIE9mZnNldFguUklHSFQ6XHJcbiAgICAgICAgICAgICAgICAgICAgcG9zWCA9ICR3aW5kb3cud2lkdGgoKSAtIGJveF93aWR0aCArIGluZm8uZ2V0T2Zmc2V0WCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBPZmZzZXRYLkNFTlRFUjpcclxuICAgICAgICAgICAgICAgICAgICBwb3NYID0gKCR3aW5kb3cud2lkdGgoKSAvIDIpIC0gKGJveF93aWR0aCAvIDIpICsgaW5mby5nZXRPZmZzZXRYKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihUQUcgKyBcIndhcm4uIHVua25vd24gb2Zmc2V0UG9pbnQ6XCIgKyAob2Zmc2V0UG9pbnQgJiAweDAwMEYpKTtcclxuICAgICAgICAgICAgICAgICAgICBwb3NYID0gKCR3aW5kb3cud2lkdGgoKSAvIDIpIC0gKGJveF93aWR0aCAvIDIpICsgaW5mby5nZXRPZmZzZXRYKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHN3aXRjaCAob2Zmc2V0UG9pbnQgJiAweDAwRjApIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgT2Zmc2V0WS5UT1A6XHJcbiAgICAgICAgICAgICAgICAgICAgcG9zWSA9IDAgKyBpbmZvLmdldE9mZnNldFkoKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgT2Zmc2V0WS5CT1RUT006XHJcbiAgICAgICAgICAgICAgICAgICAgcG9zWSA9ICR3aW5kb3cuaGVpZ2h0KCkgLSBib3hfaGVpZ2h0ICsgaW5mby5nZXRPZmZzZXRZKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIE9mZnNldFkuQ0VOVEVSOlxyXG4gICAgICAgICAgICAgICAgICAgIHBvc1kgPSAoJHdpbmRvdy5oZWlnaHQoKSAvIDIpIC0gKGJveF9oZWlnaHQgLyAyKSArIGluZm8uZ2V0T2Zmc2V0WSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oVEFHICsgXCJ3YXJuLiB1bmtub3duIG9mZnNldFBvaW50OlwiICsgKG9mZnNldFBvaW50ICYgMHgwMEYwKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcG9zWSA9ICgkd2luZG93LmhlaWdodCgpIC8gMikgLSAoYm94X2hlaWdodCAvIDIpICsgaW5mby5nZXRPZmZzZXRZKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIOihqOekulxyXG4gICAgICAgICAgICBib3guY3NzKHtcclxuICAgICAgICAgICAgICAgIFwidG9wXCI6IHBvc1ksXHJcbiAgICAgICAgICAgICAgICBcImxlZnRcIjogcG9zWCxcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmRlbGF5KGR1cmF0aW9uKVxyXG4gICAgICAgICAgICAuZmFkZU91dCg0MDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICQodGhpcykucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJuYW1lc3BhY2UgQ0RQLlVJIHtcclxuXHJcbiAgICBpbXBvcnQgUHJvbWlzZSAgICAgID0gQ0RQLlByb21pc2U7XHJcbiAgICBpbXBvcnQgRnJhbWV3b3JrICAgID0gQ0RQLkZyYW1ld29yaztcclxuXHJcbiAgICBjb25zdCBUQUcgPSBcIltDRFAuVUkuRGlhbG9nXSBcIjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEgvVyBCYWNrIEtleSBIb29rIOmWouaVsFxyXG4gICAgICovXHJcbiAgICBleHBvcnQgdHlwZSBEaWFsb2dCYWNrS2V5SGFuZGxlciA9IChldmVudD86IEpRdWVyeS5FdmVudCkgPT4gdm9pZDtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBpbnRlcmZhY2UgRGlhbG9nT3B0aW9uc1xyXG4gICAgICogICAgICAgICAgICDjg4DjgqTjgqLjg63jgrDjgqrjg5fjgrfjg6fjg7PjgqTjg7Pjgr/jg7zjg5XjgqfjgqTjgrlcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBEaWFsb2dPcHRpb25zIGV4dGVuZHMgUG9wdXBPcHRpb25zIHtcclxuICAgICAgICBzcmM/OiBzdHJpbmc7ICAgICAgICAgICAgICAgICAgIC8vITwge1N0cmluZ30gdGVtcGxhdGUg44OV44Kh44Kk44Or44Gu44OR44K5ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogdW5kZWZpbmVkXHJcbiAgICAgICAgdGl0bGU/OiBzdHJpbmc7ICAgICAgICAgICAgICAgICAvLyE8IHtTdHJpbmd9IOODgOOCpOOCouODreOCsOOCv+OCpOODiOODqyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogdW5kZWZpbmVkXHJcbiAgICAgICAgbWVzc2FnZT86IHN0cmluZzsgICAgICAgICAgICAgICAvLyE8IHtTdHJpbmd9IOODoeOCpOODs+ODoeODg+OCu+ODvOOCuCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiB1bmRlZmluZWRcclxuICAgICAgICBpZFBvc2l0aXZlPzogc3RyaW5nOyAgICAgICAgICAgIC8vITwge1N0cmluZ30gUG9zaXRpdmUg44Oc44K/44Oz44GuSUQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogXCJkbGctYnRuLXBvc2l0aXZlXCJcclxuICAgICAgICBpZE5lZ2F0aXZlPzogc3RyaW5nOyAgICAgICAgICAgIC8vITwge1N0cmluZ30gTmFnYXRpdmUg44Oc44K/44Oz44GuSUQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogXCJkbGctYnRuLW5lZ2F0aXZlXCJcclxuICAgICAgICBldmVudD86IHN0cmluZzsgICAgICAgICAgICAgICAgIC8vITwge1N0cmluZ30gRGlhbG9nIOOCr+ODqeOCueOBjOeuoeeQhuOBmeOCi+OCpOODmeODs+ODiCAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBcInZjbGlja1wiXHJcbiAgICAgICAgZGVmYXVsdEF1dG9DbG9zZT86IGJvb2xlYW47ICAgICAvLyE8IHtCb29sZWFufSBkYXRhLWF1dG8tY2xvc2Ug44GM5oyH5a6a44GV44KM44Gm44GE44Gq44GE5aC05ZCI44Gu5pei5a6a5YCkICAgICAgICAgZGVmYXVsdDogZmFsc2VcclxuICAgICAgICBmb3JjZU92ZXJ3cml0ZUFmdGVyQ2xvc2U/OiBib29sZWFuOyAvLyE8IHtCb29sZWFufSBhZnRlcmNsb3NlIOOCquODl+OCt+ODp+ODs+OCkuW8t+WItuS4iuabuOOBjeOBmeOCi+OBn+OCgeOBruioreWumiAgICBkZWZhdWx0OiBmYWxzZVxyXG4gICAgICAgIGxhYmVsUG9zaXRpdmU/OiBzdHJpbmc7ICAgICAgICAgLy8hPCB7U3RyaW5nfSBQb3NpdGl2ZSDjg5zjgr/jg7Pjg6njg5njg6sgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IFwiT0tcIlxyXG4gICAgICAgIGxhYmVsTmVnYXRpdmU/OiBzdHJpbmc7ICAgICAgICAgLy8hPCB7U3RyaW5nfSBOZWdhdGl2ZSDjg5zjgr/jg7Pjg6njg5njg6sgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IFwiQ2FuY2VsXCJcclxuICAgICAgICBiYWNrS2V5PzogXCJjbG9zZVwiIHwgXCJkZW55XCIgfCBEaWFsb2dCYWNrS2V5SGFuZGxlcjsgIC8vITwgSC9XIGJhY2tLZXkg44Gu5oyv44KL6Iie44GEICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBcImNsb3NlXCJcclxuICAgICAgICBzY3JvbGxFdmVudD86IFwiZGVueVwiIHwgXCJhbGxvd1wiIHwgXCJhZGp1c3RcIjsgICAvLyE8IHtTdHJpbmd9IHNjcm9sbOOBruaKkeatouaWueW8jyAgKOKAuyBhZGp1c3Qg44Gv6Kmm6aiT55qEKSAgICAgZGVmYXVsdDogXCJkZW55XCJcclxuICAgICAgICBkb21FeHRlbnNpb25PcHRpb25zPzogRG9tRXh0ZW5zaW9uT3B0aW9uczsgICAvLyE8IERPTeaLoeW8teOCquODl+OCt+ODp+ODsy4gbnVsbHx1bmRlZmluZWQg44Gn5ouh5by144GX44Gq44GEICAgICAgZGVmYXVsdDoge31cclxuICAgICAgICBbeDogc3RyaW5nXTogYW55OyAgICAgICAgICAgICAgIC8vITwgYW55IGRpYWxvZyB0ZW1wbGF0ZSBwYXJhbWV0ZXJzLlxyXG4gICAgfVxyXG5cclxuICAgIC8vX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXy8vXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAY2xhc3MgRGlhbG9nXHJcbiAgICAgKiBAYnJpZWYg5rGO55So44OA44Kk44Ki44Ot44Kw44Kv44Op44K5XHJcbiAgICAgKiAgICAgICAgalFNIOOBriBwb3B1cCB3aWRnZXQg44Gr44KI44Gj44Gm5a6f6KOFXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBjbGFzcyBEaWFsb2cge1xyXG5cclxuICAgICAgICBwcml2YXRlIF90ZW1wbGF0ZTogVG9vbHMuSlNUID0gbnVsbDtcclxuICAgICAgICBwcml2YXRlIF9zZXR0aW5nczogRGlhbG9nT3B0aW9ucyA9IG51bGw7XHJcbiAgICAgICAgcHJpdmF0ZSBfJGRpYWxvZzogSlF1ZXJ5ID0gbnVsbDtcclxuXHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgc19hY3RpdmVEaWFsb2c6IERpYWxvZyA9IG51bGw7XHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgc19vbGRCYWNrS2V5SGFuZGxlcjogKGV2ZW50PzogSlF1ZXJ5LkV2ZW50KSA9PiB2b2lkID0gbnVsbDtcclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBzX2RlZmF1bHRPcHRpb25zOiBEaWFsb2dPcHRpb25zID0gbnVsbDtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogY29uc3RydWN0b3JcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBpZCAgICAgIHtTdHJpbmd9ICAgICAgICBbaW5dIOODgOOCpOOCouODreOCsCBET00gSUQg44KS5oyH5a6aIGV4KSAjZGlhbG9nLWhvZ2VcclxuICAgICAgICAgKiBAcGFyYW0gb3B0aW9ucyB7RGlhbG9nT3B0aW9uc30gW2luXSDjgqrjg5fjgrfjg6fjg7NcclxuICAgICAgICAgKi9cclxuICAgICAgICBjb25zdHJ1Y3RvcihpZDogc3RyaW5nLCBvcHRpb25zPzogRGlhbG9nT3B0aW9ucykge1xyXG4gICAgICAgICAgICAvLyBEaWFsb2cg5YWx6YCa6Kit5a6a44Gu5Yid5pyf5YyWXHJcbiAgICAgICAgICAgIERpYWxvZy5pbml0Q29tbW9uQ29uZGl0aW9uKCk7XHJcbiAgICAgICAgICAgIC8vIOioreWumuOCkuabtOaWsFxyXG4gICAgICAgICAgICB0aGlzLl9zZXR0aW5ncyA9ICQuZXh0ZW5kKHt9LCBEaWFsb2cuc19kZWZhdWx0T3B0aW9ucywgb3B0aW9ucyk7XHJcbiAgICAgICAgICAgIC8vIOODgOOCpOOCouODreOCsOODhuODs+ODl+ODrOODvOODiOOCkuS9nOaIkFxyXG4gICAgICAgICAgICB0aGlzLl90ZW1wbGF0ZSA9IFRvb2xzLlRlbXBsYXRlLmdldEpTVChpZCwgdGhpcy5fc2V0dGluZ3Muc3JjKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAgICAgLy8gcHVibGljIG1ldGhvZHNcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog6KGo56S6XHJcbiAgICAgICAgICog6KGo56S644KS44GX44Gm5aeL44KB44GmIERPTSDjgYzmnInlirnjgavjgarjgovjgIJcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBvcHRpb25zIHtEaWFsb2dPcHRpb25zfSBbaW5dIOOCquODl+OCt+ODp+ODsyAoc3JjIOOBr+eEoeimluOBleOCjOOCiylcclxuICAgICAgICAgKiBAcmV0dXJuIOODgOOCpOOCouODreOCsOOBriBqUXVlcnkg44Kq44OW44K444Kn44Kv44OIXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIHNob3cob3B0aW9ucz86IERpYWxvZ09wdGlvbnMpOiBKUXVlcnkge1xyXG4gICAgICAgICAgICBjb25zdCAkZG9jdW1lbnQgPSAkKGRvY3VtZW50KTtcclxuICAgICAgICAgICAgY29uc3QgJGJvZHkgPSAkKFwiYm9keVwiKTtcclxuICAgICAgICAgICAgY29uc3QgJHBhZ2UgPSAoPGFueT4kYm9keSkucGFnZWNvbnRhaW5lcihcImdldEFjdGl2ZVBhZ2VcIik7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBvZmNIaWRkZW4gPSB7XHJcbiAgICAgICAgICAgICAgICBcIm92ZXJmbG93XCI6ICAgICBcImhpZGRlblwiLFxyXG4gICAgICAgICAgICAgICAgXCJvdmVyZmxvdy14XCI6ICAgXCJoaWRkZW5cIixcclxuICAgICAgICAgICAgICAgIFwib3ZlcmZsb3cteVwiOiAgIFwiaGlkZGVuXCIsXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGNvbnN0IG9mY0JvZHkgPSB7IC8vIGJvZHkgb3ZlcmZsb3cgY29udGV4dFxyXG4gICAgICAgICAgICAgICAgXCJvdmVyZmxvd1wiOiAgICAgJGJvZHkuY3NzKFwib3ZlcmZsb3dcIiksXHJcbiAgICAgICAgICAgICAgICBcIm92ZXJmbG93LXhcIjogICAkYm9keS5jc3MoXCJvdmVyZmxvdy14XCIpLFxyXG4gICAgICAgICAgICAgICAgXCJvdmVyZmxvdy15XCI6ICAgJGJvZHkuY3NzKFwib3ZlcmZsb3cteVwiKSxcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgY29uc3QgcGFyZW50U2Nyb2xsUG9zID0gJGJvZHkuc2Nyb2xsVG9wKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IG9mY1BhZ2UgPSB7IC8vIHBhZ2Ugb3ZlcmZsb3cgY29udGV4dFxyXG4gICAgICAgICAgICAgICAgXCJvdmVyZmxvd1wiOiAgICAgJHBhZ2UuY3NzKFwib3ZlcmZsb3dcIiksXHJcbiAgICAgICAgICAgICAgICBcIm92ZXJmbG93LXhcIjogICAkcGFnZS5jc3MoXCJvdmVyZmxvdy14XCIpLFxyXG4gICAgICAgICAgICAgICAgXCJvdmVyZmxvdy15XCI6ICAgJHBhZ2UuY3NzKFwib3ZlcmZsb3cteVwiKSxcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHNjcm9sbEV2ZW50ID0gXCJzY3JvbGwgdG91Y2htb3ZlIG1vdXNlbW92ZSBNU1BvaW50ZXJNb3ZlXCI7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBzY3JvbGxIYW5kZXIgPSAoZXZlbnQ6IEpRdWVyeS5FdmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKFwiZGVueVwiID09PSB0aGlzLl9zZXR0aW5ncy5zY3JvbGxFdmVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKFwiYWRqdXN0XCIgPT09IHRoaXMuX3NldHRpbmdzLnNjcm9sbEV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJGJvZHkuc2Nyb2xsVG9wKHBhcmVudFNjcm9sbFBvcyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvLyBvcHRpb24g44GM5oyH5a6a44GV44KM44Gm44GE44Gf5aC05ZCI5pu05pawXHJcbiAgICAgICAgICAgIGlmIChudWxsICE9IG9wdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3NldHRpbmdzID0gJC5leHRlbmQoe30sIHRoaXMuX3NldHRpbmdzLCBvcHRpb25zKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gYWZ0ZXJjbG9zZSDlh6bnkIbjga8gRGlhbG9nIOOBruegtOajhOWHpueQhuOCkuWun+ijheOBmeOCi+OBn+OCgeWfuuacrOeahOOBq+ioreWumuemgeatoiAo5by35Yi25LiK5pu444GN44Oi44O844OJ44KS6Kit5a6a5L2/55So5Y+vKVxyXG4gICAgICAgICAgICBpZiAodGhpcy5fc2V0dGluZ3MuYWZ0ZXJjbG9zZSAmJiAhdGhpcy5fc2V0dGluZ3MuZm9yY2VPdmVyd3JpdGVBZnRlckNsb3NlKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oVEFHICsgXCJjYW5ub3QgYWNjZXB0ICdhZnRlcmNsb3NlJyBvcHRpb24uIHBsZWFzZSBpbnN0ZWFkIHVzaW5nICdwb3B1cGFmdGVyY2xvc2UnIGV2ZW50LlwiKTtcclxuICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLl9zZXR0aW5ncy5hZnRlcmNsb3NlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyB0aXRsZSDjga7mnInnhKFcclxuICAgICAgICAgICAgKDxhbnk+dGhpcy5fc2V0dGluZ3MpLl90aXRsZVN0YXRlID0gdGhpcy5fc2V0dGluZ3MudGl0bGUgPyBcInVpLWhhcy10aXRsZVwiIDogXCJ1aS1uby10aXRsZVwiO1xyXG5cclxuICAgICAgICAgICAgLypcclxuICAgICAgICAgICAgICogdGVtcGxhdGUg44GL44KJIGpRdWVyeSDjgqrjg5bjgrjjgqfjgq/jg4jjgpLkvZzmiJDjgZfjgIFcclxuICAgICAgICAgICAgICogPGJvZHk+IOebtOS4i+OBq+i/veWKoC5cclxuICAgICAgICAgICAgICogJHBhZ2Ug44Gn44GvIEJhY2tib25lIGV2ZW50IOOCkuWPl+OBkeOCieOCjOOBquOBhOOBk+OBqOOBq+azqOaEj1xyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgdGhpcy5fJGRpYWxvZyA9ICQodGhpcy5fdGVtcGxhdGUodGhpcy5fc2V0dGluZ3MpKTtcclxuICAgICAgICAgICAgdGhpcy5fJGRpYWxvZy5sb2NhbGl6ZSgpO1xyXG4gICAgICAgICAgICAkYm9keS5hcHBlbmQodGhpcy5fJGRpYWxvZyk7XHJcblxyXG4gICAgICAgICAgICAvLyB0aGVtZSDjgpLop6PmsbpcclxuICAgICAgICAgICAgdGhpcy5yZXNvbHZlVGhlbWUoKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuXyRkaWFsb2dcclxuICAgICAgICAgICAgICAgIC5vbihcInBvcHVwY3JlYXRlXCIsIChldmVudDogSlF1ZXJ5LkV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8g44K544Kv44Ot44O844Or44KS5oqR5q2iXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKFwiYWxsb3dcIiAhPT0gdGhpcy5fc2V0dGluZ3Muc2Nyb2xsRXZlbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJGRvY3VtZW50Lm9uKHNjcm9sbEV2ZW50LCBzY3JvbGxIYW5kZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAkYm9keS5jc3Mob2ZjSGlkZGVuKTtcclxuICAgICAgICAgICAgICAgICAgICAkcGFnZS5jc3Mob2ZjSGlkZGVuKTtcclxuICAgICAgICAgICAgICAgICAgICBEaWFsb2cucmVnaXN0ZXIodGhpcyk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLmVuaGFuY2VXaXRoaW4oKTtcclxuXHJcbiAgICAgICAgICAgIC8vIERPTSDmi6HlvLVcclxuICAgICAgICAgICAgaWYgKG51bGwgIT0gdGhpcy5fc2V0dGluZ3MuZG9tRXh0ZW5zaW9uT3B0aW9ucykge1xyXG4gICAgICAgICAgICAgICAgRXh0ZW5zaW9uTWFuYWdlci5hcHBseURvbUV4dGVuc2lvbih0aGlzLl8kZGlhbG9nLCB0aGlzLl9zZXR0aW5ncy5kb21FeHRlbnNpb25PcHRpb25zKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5vbkJlZm9yZVNob3coKVxyXG4gICAgICAgICAgICAgICAgLmRvbmUoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIOihqOekulxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuXyRkaWFsb2dcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnBvcHVwKCQuZXh0ZW5kKHt9LCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvblRvOiBcIndpbmRvd1wiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWZ0ZXJjbG9zZTogKGV2ZW50OiBKUXVlcnkuRXZlbnQsIHVpOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDjgrnjgq/jg63jg7zjg6vnirbmhYvjgpLmiLvjgZlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcGFnZS5jc3Mob2ZjUGFnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGJvZHkuY3NzKG9mY0JvZHkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcImFsbG93XCIgIT09IHRoaXMuX3NldHRpbmdzLnNjcm9sbEV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRkb2N1bWVudC5vZmYoc2Nyb2xsRXZlbnQsIHNjcm9sbEhhbmRlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERpYWxvZy5yZWdpc3RlcihudWxsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl8kZGlhbG9nLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuXyRkaWFsb2cgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgdGhpcy5fc2V0dGluZ3MpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAucG9wdXAoXCJvcGVuXCIpLm9uKHRoaXMuX3NldHRpbmdzLmV2ZW50LCAoZXZlbnQ6IEpRdWVyeS5FdmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gXCJkYXRhLWF1dG8tY2xvc2U9J2ZhbHNlJ1wiIOOBjOaMh+WumuOBleOCjOOBpuOBhOOCi+imgee0oOOBryBkaWFsb2cg44KS6ZaJ44GY44Gq44GEXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgYXV0b0Nsb3NlID0gJChldmVudC50YXJnZXQpLmF0dHIoXCJkYXRhLWF1dG8tY2xvc2VcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCA9PSBhdXRvQ2xvc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdXRvQ2xvc2UgPSB0aGlzLl9zZXR0aW5ncy5kZWZhdWx0QXV0b0Nsb3NlID8gXCJ0cnVlXCIgOiBcImZhbHNlXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXCJmYWxzZVwiID09PSBhdXRvQ2xvc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLmZhaWwoKGVycm9yKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihUQUcgKyBcIkRpYWxvZy5zaG93KCkgZmFpbGVkLlwiKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5fJGRpYWxvZykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl8kZGlhbG9nLnRyaWdnZXIoXCJlcnJvclwiLCBlcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fJGRpYWxvZztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOe1guS6hlxyXG4gICAgICAgICAqIOWfuuacrOeahOOBq+OBr+iHquWLleOBp+mWieOBmOOCi+OBjOOAgVxyXG4gICAgICAgICAqIOihqOekuuS4reOBruODgOOCpOOCouODreOCsOOCkuOCr+ODqeOCpOOCouODs+ODiOWBtOOBi+OCiemWieOBmOOCi+ODoeOCveODg+ODiVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBjbG9zZSgpOiB2b2lkIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuXyRkaWFsb2cpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuXyRkaWFsb2cucG9wdXAoXCJjbG9zZVwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOODgOOCpOOCouODreOCsCBlbGVtZW50IOOCkuWPluW+l1xyXG4gICAgICAgIHB1YmxpYyBnZXQgJGVsKCk6IEpRdWVyeSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl8kZGlhbG9nO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgICAgICAvLyBwcm90ZWN0ZWQgbWV0aG9kczogT3ZlcnJpZGVcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog44OA44Kk44Ki44Ot44Kw6KGo56S644Gu55u05YmNXHJcbiAgICAgICAgICogRE9NIOOCkuaTjeS9nOOBp+OBjeOCi+OCv+OCpOODn+ODs+OCsOOBp+WRvOOBs+WHuuOBleOCjOOCiy5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm4ge0lQcm9taXNlQmFzZX0gcHJvbWlzZSDjgqrjg5bjgrjjgqfjgq/jg4hcclxuICAgICAgICAgKi9cclxuICAgICAgICBwcm90ZWN0ZWQgb25CZWZvcmVTaG93KCk6IElQcm9taXNlQmFzZTx2b2lkPiB7XHJcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmU8dm9pZD4oKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOODgOOCpOOCouODreOCsOOBruS9v+eUqOOBmeOCiyBUaGVtZSDjgpLop6PmsbpcclxuICAgICAgICAgKiDkuI3opoHjgarloLTlkIjjga/jgqrjg7zjg5Djg7zjg6njgqTjg4njgZnjgovjgZPjgajjgoLlj6/og71cclxuICAgICAgICAgKi9cclxuICAgICAgICBwcm90ZWN0ZWQgcmVzb2x2ZVRoZW1lKCk6IHZvaWQge1xyXG4gICAgICAgICAgICBjb25zdCBxdWVyeVRoZW1lID0gKCk6IHN0cmluZyA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJChcIi51aS1wYWdlLWFjdGl2ZVwiKS5qcW1EYXRhKFwidGhlbWVcIik7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBsZXQgY2FuZGlkYXRlVGhlbWU6IHN0cmluZztcclxuXHJcbiAgICAgICAgICAgIGlmICghdGhpcy5fc2V0dGluZ3MudGhlbWUpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGRvbVRoZW1lID0gdGhpcy5fJGRpYWxvZy5qcW1EYXRhKFwidGhlbWVcIik7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWRvbVRoZW1lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fc2V0dGluZ3MudGhlbWUgPSBjYW5kaWRhdGVUaGVtZSA9IHF1ZXJ5VGhlbWUoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKCF0aGlzLl9zZXR0aW5ncy5vdmVybGF5VGhlbWUpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGRvbU92ZXJsYXlUaGVtZSA9IHRoaXMuXyRkaWFsb2cuanFtRGF0YShcIm92ZXJsYXktdGhlbWVcIik7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWRvbU92ZXJsYXlUaGVtZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3NldHRpbmdzLm92ZXJsYXlUaGVtZSA9IGNhbmRpZGF0ZVRoZW1lIHx8IHF1ZXJ5VGhlbWUoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gdHJhbnNpdGlvbiDjga7mm7TmlrBcclxuICAgICAgICAgICAgdGhpcy5fc2V0dGluZ3MudHJhbnNpdGlvbiA9IFRoZW1lLnF1ZXJ5RGlhbG9nVHJhbnNpdGlvbih0aGlzLl9zZXR0aW5ncy50cmFuc2l0aW9uKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAgICAgLy8gcHVibGljIHN0YXRpYyBtZXRob2RzXHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIERpYWxvZyDjga7ml6Llrprjgqrjg5fjgrfjg6fjg7PjgpLmm7TmlrBcclxuICAgICAgICAgKiDjgZnjgbnjgabjga4gRGlhbG9nIOOBjOS9v+eUqOOBmeOCi+WFsemAmuioreWumlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIG9wdGlvbnMge0RpYWxvZ09wdGlvbnN9IFtpbl0g44OA44Kk44Ki44Ot44Kw44Kq44OX44K344On44OzXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBzZXREZWZhdWx0T3B0aW9ucyhvcHRpb25zOiBEaWFsb2dPcHRpb25zKTogdm9pZCB7XHJcbiAgICAgICAgICAgIC8vIERpYWxvZyDlhbHpgJroqK3lrprjga7liJ3mnJ/ljJZcclxuICAgICAgICAgICAgRGlhbG9nLmluaXRDb21tb25Db25kaXRpb24oKTtcclxuICAgICAgICAgICAgJC5leHRlbmQodHJ1ZSwgRGlhbG9nLnNfZGVmYXVsdE9wdGlvbnMsIG9wdGlvbnMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgICAgICAvLyBwcml2YXRlIG1ldGhvZHNcclxuXHJcbiAgICAgICAgLy8g54++5ZyoIGFjdGl2ZSDjgarjg4DjgqTjgqLjg63jgrDjgajjgZfjgabnmbvpjLLjgZnjgotcclxuICAgICAgICBwcml2YXRlIHN0YXRpYyByZWdpc3RlcihkaWFsb2c6IERpYWxvZyk6IHZvaWQge1xyXG4gICAgICAgICAgICBpZiAobnVsbCAhPSBkaWFsb2cgJiYgbnVsbCAhPSBEaWFsb2cuc19hY3RpdmVEaWFsb2cpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihUQUcgKyBcIm5ldyBkaWFsb2cgcHJvYyBpcyBjYWxsZWQgaW4gdGhlIHBhc3QgZGlhbG9nJ3Mgb25lLiB1c2Ugc2V0VGltZW91dCgpIGZvciBwb3N0IHByb2Nlc3MuXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIERpYWxvZy5zX2FjdGl2ZURpYWxvZyA9IGRpYWxvZztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIERpYWxvZyDlhbHpgJroqK3lrprjga7liJ3mnJ/ljJZcclxuICAgICAgICAgKi9cclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBpbml0Q29tbW9uQ29uZGl0aW9uKCk6IHZvaWQge1xyXG4gICAgICAgICAgICAvLyBGcmFtZXdvcmsg44Gu5Yid5pyf5YyW5b6M44Gr5Yem55CG44GZ44KL5b+F6KaB44GM44GC44KLXHJcbiAgICAgICAgICAgIGlmICghRnJhbWV3b3JrLmlzSW5pdGlhbGl6ZWQoKSkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFRBRyArIFwiaW5pdENvbW1vbkNvbmRpdGlvbigpIHNob3VsZCBiZSBjYWxsZWQgYWZ0ZXIgRnJhbWV3b3JrLmluaXRpYWxpemVkLlwiKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKG51bGwgPT0gRGlhbG9nLnNfb2xkQmFja0tleUhhbmRsZXIpIHtcclxuICAgICAgICAgICAgICAgIC8vIEJhY2sgQnV0dG9uIEhhbmRsZXJcclxuICAgICAgICAgICAgICAgIERpYWxvZy5zX29sZEJhY2tLZXlIYW5kbGVyID0gQ0RQLnNldEJhY2tCdXR0b25IYW5kbGVyKG51bGwpO1xyXG4gICAgICAgICAgICAgICAgQ0RQLnNldEJhY2tCdXR0b25IYW5kbGVyKERpYWxvZy5jdXN0b21CYWNrS2V5SGFuZGxlcik7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8g5pei5a6a44Kq44OX44K344On44OzXHJcbiAgICAgICAgICAgICAgICBEaWFsb2cuc19kZWZhdWx0T3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgICAgICAgICBpZFBvc2l0aXZlOiAgICAgICAgICAgICBcImRsZy1idG4tcG9zaXRpdmVcIixcclxuICAgICAgICAgICAgICAgICAgICBpZE5lZ2F0aXZlOiAgICAgICAgICAgICBcImRsZy1idG4tbmVnYXRpdmVcIixcclxuICAgICAgICAgICAgICAgICAgICBldmVudDogICAgICAgICAgICAgICAgICBGcmFtZXdvcmsuZ2V0RGVmYXVsdENsaWNrRXZlbnQoKSxcclxuICAgICAgICAgICAgICAgICAgICBkaXNtaXNzaWJsZTogICAgICAgICAgICBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0QXV0b0Nsb3NlOiAgICAgICBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICB0cmFuc2l0aW9uOiAgICAgICAgICAgICBcInBsYXRmb3JtLWRlZmF1bHRcIixcclxuICAgICAgICAgICAgICAgICAgICBsYWJlbFBvc2l0aXZlOiAgICAgICAgICBcIk9LXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgbGFiZWxOZWdhdGl2ZTogICAgICAgICAgXCJDYW5jZWxcIixcclxuICAgICAgICAgICAgICAgICAgICBiYWNrS2V5OiAgICAgICAgICAgICAgICBcImNsb3NlXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsRXZlbnQ6ICAgICAgICAgICAgXCJkZW55XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgZG9tRXh0ZW5zaW9uT3B0aW9uczogICAge30sXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBIL1cgQmFjayBCdXR0b24gSGFuZGxlclxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIGN1c3RvbUJhY2tLZXlIYW5kbGVyKGV2ZW50PzogSlF1ZXJ5LkV2ZW50KTogdm9pZCB7XHJcbiAgICAgICAgICAgIGlmIChudWxsICE9IERpYWxvZy5zX2FjdGl2ZURpYWxvZykge1xyXG4gICAgICAgICAgICAgICAgaWYgKFwiY2xvc2VcIiA9PT0gRGlhbG9nLnNfYWN0aXZlRGlhbG9nLl9zZXR0aW5ncy5iYWNrS2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgRGlhbG9nLnNfYWN0aXZlRGlhbG9nLmNsb3NlKCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKFwiZnVuY3Rpb25cIiA9PT0gdHlwZW9mIERpYWxvZy5zX2FjdGl2ZURpYWxvZy5fc2V0dGluZ3MuYmFja0tleSkge1xyXG4gICAgICAgICAgICAgICAgICAgICg8RGlhbG9nQmFja0tleUhhbmRsZXI+RGlhbG9nLnNfYWN0aXZlRGlhbG9nLl9zZXR0aW5ncy5iYWNrS2V5KShldmVudCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm47IC8vIERpYWxvZyDjgYwgYWN0aXZlIOOBquWgtOWQiOOAgeW4uOOBq+aXouWumuOBruODj+ODs+ODieODqeOBq+OBr+a4oeOBleOBquOBhFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIERpYWxvZy5zX29sZEJhY2tLZXlIYW5kbGVyKGV2ZW50KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiLyogdHNsaW50OmRpc2FibGU6bWF4LWxpbmUtbGVuZ3RoICovXHJcblxyXG5uYW1lc3BhY2UgQ0RQLlVJIHtcclxuXHJcbiAgICBjb25zdCBUQUcgPSBcIltDRFAuVUkuRGlhbG9nQ29tbW9uc10gXCI7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBbGVydFxyXG4gICAgICogYWxlcnQg44Oh44OD44K744O844K46KGo56S6XHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2UgICBbaW5dIOihqOekuuaWh+Wtl+WIl1xyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IFtvcHRpb25zXSBbaW5dIOODgOOCpOOCouODreOCsOOCquODl+OCt+ODp+ODs1xyXG4gICAgICogQHJldHVybiB7alF1ZXJ5fSDjg4DjgqTjgqLjg63jgrDjga4gRE9NIOOCquODluOCuOOCp+OCr+ODiFxyXG4gICAgICovXHJcbiAgICBleHBvcnQgZnVuY3Rpb24gYWxlcnQobWVzc2FnZTogc3RyaW5nLCBvcHRpb25zPzogRGlhbG9nT3B0aW9ucyk6IEpRdWVyeSB7XHJcbiAgICAgICAgY29uc3QgdGVtcGxhdGUgPSBgXHJcbiAgICAgICAgICAgIDxzY3JpcHQgdHlwZT1cInRleHQvdGVtcGxhdGVcIj5cclxuICAgICAgICAgICAgICAgIDxzZWN0aW9uIGNsYXNzPVwidWktbW9kYWxcIiBkYXRhLXJvbGU9XCJwb3B1cFwiIGRhdGEtY29ybmVycz1cImZhbHNlXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInVpLWNvbnRlbnRcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGgxIGNsYXNzPVwidWktdGl0bGUge3tfdGl0bGVTdGF0ZX19XCI+e3t0aXRsZX19PC9oMT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9XCJ1aS1tZXNzYWdlXCI+e3ttZXNzYWdlfX08L3A+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInVpLW1vZGFsLWZvb3RlciB1aS1ncmlkLXNvbG9cIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBpZD1cInt7aWRQb3NpdGl2ZX19XCIgY2xhc3M9XCJ1aS1idG4gdWktYmxvY2stYSB1aS10ZXh0LWVtcGhhc2lzXCIgZGF0YS1hdXRvLWNsb3NlPVwidHJ1ZVwiPnt7bGFiZWxQb3NpdGl2ZX19PC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8L3NlY3Rpb24+XHJcbiAgICAgICAgICAgIDwvc2NyaXB0PlxyXG4gICAgICAgIGA7XHJcblxyXG4gICAgICAgIGNvbnN0IGRsZ0FsZXJ0ID0gbmV3IERpYWxvZyh0ZW1wbGF0ZSwgJC5leHRlbmQoe30sIHtcclxuICAgICAgICAgICAgc3JjOiBudWxsLFxyXG4gICAgICAgICAgICBtZXNzYWdlOiBtZXNzYWdlLFxyXG4gICAgICAgIH0sIG9wdGlvbnMpKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGRsZ0FsZXJ0LnNob3coKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENvbmZpcm1cclxuICAgICAqIOeiuuiqjeODoeODg+OCu+ODvOOCuOihqOekulxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlICAgW2luXSDooajnpLrmloflrZfliJdcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBbb3B0aW9uc10gW2luXSDjg4DjgqTjgqLjg63jgrDjgqrjg5fjgrfjg6fjg7NcclxuICAgICAqIEByZXR1cm4ge2pRdWVyeX0g44OA44Kk44Ki44Ot44Kw44GuIERPTSDjgqrjg5bjgrjjgqfjgq/jg4hcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGNvbmZpcm0obWVzc2FnZTogc3RyaW5nLCBvcHRpb25zPzogRGlhbG9nT3B0aW9ucyk6IEpRdWVyeSB7XHJcbiAgICAgICAgY29uc3QgdGVtcGxhdGUgPSBgXHJcbiAgICAgICAgICAgIDxzY3JpcHQgdHlwZT1cInRleHQvdGVtcGxhdGVcIj5cclxuICAgICAgICAgICAgICAgIDxzZWN0aW9uIGNsYXNzPVwidWktbW9kYWxcIiBkYXRhLXJvbGU9XCJwb3B1cFwiIGRhdGEtY29ybmVycz1cImZhbHNlXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInVpLWNvbnRlbnRcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGgxIGNsYXNzPVwidWktdGl0bGUge3tfdGl0bGVTdGF0ZX19XCI+e3t0aXRsZX19PC9oMT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9XCJ1aS1tZXNzYWdlXCI+e3ttZXNzYWdlfX08L3A+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInVpLW1vZGFsLWZvb3RlciB1aS1ncmlkLWFcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBpZD1cInt7aWROZWdhdGl2ZX19XCIgY2xhc3M9XCJ1aS1idG4gdWktYmxvY2stYVwiIGRhdGEtYXV0by1jbG9zZT1cInRydWVcIj57e2xhYmVsTmVnYXRpdmV9fTwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPVwie3tpZFBvc2l0aXZlfX1cIiBjbGFzcz1cInVpLWJ0biB1aS1ibG9jay1iIHVpLXRleHQtZW1waGFzaXNcIiBkYXRhLWF1dG8tY2xvc2U9XCJ0cnVlXCI+e3tsYWJlbFBvc2l0aXZlfX08L2J1dHRvbj5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDwvc2VjdGlvbj5cclxuICAgICAgICAgICAgPC9zY3JpcHQ+XHJcbiAgICAgICAgYDtcclxuXHJcbiAgICAgICAgY29uc3QgZGxnQ29uZmlybSA9IG5ldyBEaWFsb2codGVtcGxhdGUsICQuZXh0ZW5kKHt9LCB7XHJcbiAgICAgICAgICAgIHNyYzogbnVsbCxcclxuICAgICAgICAgICAgbWVzc2FnZTogbWVzc2FnZSxcclxuICAgICAgICB9LCBvcHRpb25zKSk7XHJcblxyXG4gICAgICAgIHJldHVybiBkbGdDb25maXJtLnNob3coKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBpbnRlcmZhY2UgRGlhbG9nQ29tbW9uc09wdGlvbnNcclxuICAgICAqIEBicmllZiBwcm9tcHQg44Gu44Kq44OX44K344On44OzXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgRGlhbG9nUHJvbXB0T3B0aW9ucyBleHRlbmRzIERpYWxvZ09wdGlvbnMge1xyXG4gICAgICAgIGV2ZW50T0s/OiBzdHJpbmc7IC8vITwgT0sg44Oc44K/44Oz5oq85LiL5pmC44GuIGV2ZW50OiBkZWZhdWx0OiBwcm9tcHRva1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGNsYXNzIERpYWxvZ1Byb21wdFxyXG4gICAgICogQGJyaWVmIHByb21wdCDjg4DjgqTjgqLjg63jgrAgKOmdnuWFrOmWiylcclxuICAgICAqL1xyXG4gICAgY2xhc3MgRGlhbG9nUHJvbXB0IGV4dGVuZHMgRGlhbG9nIHtcclxuXHJcbiAgICAgICAgcHJpdmF0ZSBfZXZlbnRPSzogc3RyaW5nO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBjb25zdHJ1Y3RvclxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgY29uc3RydWN0b3IoaWQ6IHN0cmluZywgb3B0aW9ucz86IERpYWxvZ1Byb21wdE9wdGlvbnMpIHtcclxuICAgICAgICAgICAgc3VwZXIoaWQsIG9wdGlvbnMpO1xyXG4gICAgICAgICAgICB0aGlzLl9ldmVudE9LID0gb3B0aW9ucy5ldmVudE9LIHx8IFwicHJvbXB0b2tcIjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDjg4DjgqTjgqLjg63jgrDooajnpLrjga7nm7TliY1cclxuICAgICAgICBwcm90ZWN0ZWQgb25CZWZvcmVTaG93KCk6IElQcm9taXNlQmFzZTx2b2lkPiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG9uQ29tbWl0ID0gKGV2ZW50OiBKUXVlcnkuRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRleHQgPSB0aGlzLiRlbC5maW5kKFwiI191aS1wcm9tcHRcIikudmFsKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLiRlbC50cmlnZ2VyKHRoaXMuX2V2ZW50T0ssIHRleHQpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuJGVsXHJcbiAgICAgICAgICAgICAgICAub24oXCJ2Y2xpY2tcIiwgXCIuY29tbWFuZC1wcm9tcHQtb2sgXCIsIChldmVudDogSlF1ZXJ5LkV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgb25Db21taXQoZXZlbnQpO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5vbihcImtleWRvd25cIiwgXCIjX3VpLXByb21wdFwiLCAoZXZlbnQ6IEpRdWVyeS5FdmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IEVOVEVSX0tFWV9DT0RFID0gMTM7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKEVOVEVSX0tFWV9DT0RFID09PSBldmVudC5rZXlDb2RlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ29tbWl0KGV2ZW50KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBzdXBlci5vbkJlZm9yZVNob3coKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBQcm9tcHRcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZSAgIFtpbl0g6KGo56S65paH5a2X5YiXXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gW29wdGlvbnNdIFtpbl0g44OA44Kk44Ki44Ot44Kw44Kq44OX44K344On44OzXHJcbiAgICAgKiBAcmV0dXJuIHtqUXVlcnl9IOODgOOCpOOCouODreOCsOOBriBET00g44Kq44OW44K444Kn44Kv44OIXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBmdW5jdGlvbiBwcm9tcHQobWVzc2FnZTogc3RyaW5nLCBvcHRpb25zPzogRGlhbG9nUHJvbXB0T3B0aW9ucyk6IEpRdWVyeSB7XHJcbiAgICAgICAgY29uc3QgdGVtcGxhdGUgPSBgXHJcbiAgICAgICAgICAgIDxzY3JpcHQgdHlwZT1cInRleHQvdGVtcGxhdGVcIj5cclxuICAgICAgICAgICAgICAgIDxzZWN0aW9uIGNsYXNzPVwidWktbW9kYWxcIiBkYXRhLXJvbGU9XCJwb3B1cFwiIGRhdGEtY29ybmVycz1cImZhbHNlXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInVpLWNvbnRlbnRcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGgxIGNsYXNzPVwidWktdGl0bGUge3tfdGl0bGVTdGF0ZX19XCI+e3t0aXRsZX19PC9oMT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9XCJ1aS1tZXNzYWdlXCI+e3ttZXNzYWdlfX08L3A+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9XCJfdWktcHJvbXB0XCIgY2xhc3M9XCJ1aS1oaWRkZW4tYWNjZXNzaWJsZVwiPjwvbGFiZWw+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIG5hbWU9XCJfdWktcHJvbXB0XCIgaWQ9XCJfdWktcHJvbXB0XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInVpLW1vZGFsLWZvb3RlciB1aS1ncmlkLWFcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBpZD1cInt7aWROZWdhdGl2ZX19XCIgY2xhc3M9XCJ1aS1idG4gdWktYmxvY2stYVwiIGRhdGEtYXV0by1jbG9zZT1cInRydWVcIj57e2xhYmVsTmVnYXRpdmV9fTwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPVwie3tpZFBvc2l0aXZlfX1cIiBjbGFzcz1cImNvbW1hbmQtcHJvbXB0LW9rIHVpLWJ0biB1aS1ibG9jay1iIHVpLXRleHQtZW1waGFzaXNcIiBkYXRhLWF1dG8tY2xvc2U9XCJmYWxzZVwiPnt7bGFiZWxQb3NpdGl2ZX19PC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8L3NlY3Rpb24+XHJcbiAgICAgICAgICAgIDwvc2NyaXB0PlxyXG4gICAgICAgIGA7XHJcblxyXG4gICAgICAgIGNvbnN0IGRsZ1Byb21wdCA9IG5ldyBEaWFsb2dQcm9tcHQodGVtcGxhdGUsICQuZXh0ZW5kKHt9LCB7XHJcbiAgICAgICAgICAgIHNyYzogbnVsbCxcclxuICAgICAgICAgICAgbWVzc2FnZTogbWVzc2FnZSxcclxuICAgICAgICB9LCBvcHRpb25zKSk7XHJcblxyXG4gICAgICAgIHJldHVybiBkbGdQcm9tcHQuc2hvdygpO1xyXG4gICAgfVxyXG59XHJcbiIsIm5hbWVzcGFjZSBDRFAuVUkge1xyXG5cclxuICAgIGltcG9ydCBSb3V0ZXIgICAgICAgPSBDRFAuRnJhbWV3b3JrLlJvdXRlcjtcclxuICAgIGltcG9ydCBJUGFnZSAgICAgICAgPSBDRFAuRnJhbWV3b3JrLklQYWdlO1xyXG4gICAgaW1wb3J0IE1vZGVsICAgICAgICA9IENEUC5GcmFtZXdvcmsuTW9kZWw7XHJcbiAgICBpbXBvcnQgVmlldyAgICAgICAgID0gQ0RQLkZyYW1ld29yay5WaWV3O1xyXG4gICAgaW1wb3J0IFZpZXdPcHRpb25zICA9IENEUC5GcmFtZXdvcmsuVmlld09wdGlvbnM7XHJcbiAgICBpbXBvcnQgVGVtcGxhdGUgICAgID0gQ0RQLlRvb2xzLlRlbXBsYXRlO1xyXG4gICAgaW1wb3J0IEpTVCAgICAgICAgICA9IENEUC5Ub29scy5KU1Q7XHJcblxyXG4gICAgY29uc3QgVEFHOiBzdHJpbmcgPSBcIltDRFAuVUkuQmFzZUhlYWRlclZpZXddIFwiO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGludGVyZmFjZSBCYXNlSGVhZGVyVmlld09wdGlvbnNcclxuICAgICAqIEBicmllZiBCYXNlSGVhZGVyVmlldyDjgavmjIflrprjgZnjgovjgqrjg5fjgrfjg6fjg7PjgqTjg7Pjgr/jg7zjg5XjgqfjgqTjgrlcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBCYXNlSGVhZGVyVmlld09wdGlvbnM8VE1vZGVsIGV4dGVuZHMgTW9kZWwgPSBNb2RlbD4gZXh0ZW5kcyBWaWV3T3B0aW9uczxUTW9kZWw+IHtcclxuICAgICAgICBiYXNlVGVtcGxhdGU/OiBKU1Q7ICAgICAgICAgICAgIC8vITwg5Zu65a6a44OY44OD44OA55SoIEphdmFTY3JpcHQg44OG44Oz44OX44Os44O844OILlxyXG4gICAgICAgIGJhY2tDb21tYW5kU2VsZWN0b3I/OiBzdHJpbmc7ICAgLy8hPCBcIuaIu+OCi1wi44Kz44Oe44Oz44OJ44K744Os44Kv44K/LiBkZWZhdWx0OiBcImNvbW1hbmQtYmFja1wiXHJcbiAgICAgICAgYmFja0NvbW1hbmRLaW5kPzogc3RyaW5nOyAgICAgICAvLyE8IFwi5oi744KLXCLjgrPjg57jg7Pjg4nnqK7liKUgKG9uQ29tbWFuZCDnrKwy5byV5pWwKS4gZGVmYXVsdDogXCJwYWdlYmFja1wiXHJcbiAgICB9XHJcblxyXG4gICAgLy9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fLy9cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBjbGFzcyBCYXNlSGVhZGVyVmlld1xyXG4gICAgICogQGJyaWVmIOWFsemAmuODmOODg+ODgOOCkuaTjeS9nOOBmeOCi+OCr+ODqeOCuVxyXG4gICAgICovXHJcbiAgICBleHBvcnQgY2xhc3MgQmFzZUhlYWRlclZpZXc8VE1vZGVsIGV4dGVuZHMgTW9kZWwgPSBNb2RlbD4gZXh0ZW5kcyBWaWV3PFRNb2RlbD4ge1xyXG5cclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBzXyRoZWFkZXJCYXNlOiBKUXVlcnk7ICAgLy8hPCDjg5rjg7zjgrjlpJbjgavphY3nva7jgZXjgozjgovlhbHpgJrjg5jjg4Pjg4Djga7jg5njg7zjgrnpg6jlk4HnlKggalF1ZXJ5IOOCquODluOCuOOCp+OCr+ODiFxyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIHNfcmVmQ291bnQgPSAwOyAgICAgICAgICAvLyE8IOWPgueFp+OCq+OCpuODs+ODiFxyXG4gICAgICAgIHByaXZhdGUgX3RlbXBsYXRlOiBKU1Q7XHJcbiAgICAgICAgcHJpdmF0ZSBfaGFzQmFja0luZGljYXRvcjogYm9vbGVhbjtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogY29uc3RydWN0b3JcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB7SVBhZ2V9IF9vd25lciBbaW5dIOOCquODvOODiuODvOODmuODvOOCuOOCpOODs+OCueOCv+ODs+OCuVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgX293bmVyOiBJUGFnZSwgcHJpdmF0ZSBfb3B0aW9ucz86IEJhc2VIZWFkZXJWaWV3T3B0aW9uczxUTW9kZWw+KSB7XHJcbiAgICAgICAgICAgIHN1cGVyKF9vcHRpb25zID0gJC5leHRlbmQoe1xyXG4gICAgICAgICAgICAgICAgZWw6IF9vd25lci4kcGFnZS5maW5kKFwiW2RhdGEtcm9sZT0naGVhZGVyJ11cIiksXHJcbiAgICAgICAgICAgICAgICBiYWNrQ29tbWFuZFNlbGVjdG9yOiBcIi5jb21tYW5kLWJhY2tcIixcclxuICAgICAgICAgICAgICAgIGJhY2tDb21tYW5kS2luZDogXCJwYWdlYmFja1wiLFxyXG4gICAgICAgICAgICB9LCBfb3B0aW9ucykpO1xyXG5cclxuICAgICAgICAgICAgLy8gdGVtcGxhdGUg6Kit5a6aXHJcbiAgICAgICAgICAgIGlmIChfb3B0aW9ucy5iYXNlVGVtcGxhdGUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3RlbXBsYXRlID0gX29wdGlvbnMuYmFzZVRlbXBsYXRlO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fdGVtcGxhdGUgPSBUZW1wbGF0ZS5nZXRKU1QoYFxyXG4gICAgICAgICAgICAgICAgICAgIDxzY3JpcHQgdHlwZT0ndGV4dC90ZW1wbGF0ZSc+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxoZWFkZXIgY2xhc3M9J3VpLWhlYWRlci1iYXNlIHVpLWJvZHkte3t0aGVtZX19Jz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9J3VpLWZpeGVkLWJhY2staW5kaWNhdG9yJz48L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9oZWFkZXI+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9zY3JpcHQ+XHJcbiAgICAgICAgICAgICAgICBgKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gQmFja2JvbmUuVmlldyDnlKjjga7liJ3mnJ/ljJZcclxuICAgICAgICAgICAgdGhpcy5zZXRFbGVtZW50KHRoaXMuJGVsLCB0cnVlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAgICAgLy8gcHVibGljIG1ldGhvZHNcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog5Yid5pyf5YyWXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIGNyZWF0ZSgpOiBKUXVlcnkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jcmVhdGVIZWFkZXJCYXNlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDmnInlirnljJZcclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgYWN0aXZhdGUoKTogSlF1ZXJ5IHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2hvd0luZGljYXRvcigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog54Sh5Yq55YyWXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIGluYWN0aXZhdGUoKTogSlF1ZXJ5IHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaGlkZUluZGljYXRvcigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog56C05qOEXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIHJlbGVhc2UoKTogSlF1ZXJ5IHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVsZWFzZUhlYWRlckJhc2UoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAgICAgLy8gcHJpdmF0ZSBtZXRob2RzXHJcblxyXG4gICAgICAgIC8vISDlhbHpgJrjg5jjg4Pjg4Djga7jg5njg7zjgrnjgpLmupblgplcclxuICAgICAgICBwcml2YXRlIGNyZWF0ZUhlYWRlckJhc2UoKTogSlF1ZXJ5IHtcclxuICAgICAgICAgICAgLy8g5Zu65a6a44OY44OD44OA44Gu44Go44GN44Gr5pyJ5Yq55YyWXHJcbiAgICAgICAgICAgIGlmIChcImZpeGVkXCIgPT09IHRoaXMuX293bmVyLiRoZWFkZXIuanFtRGF0YShcInBvc2l0aW9uXCIpKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAobnVsbCA9PSBCYXNlSGVhZGVyVmlldy5zXyRoZWFkZXJCYXNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgQmFzZUhlYWRlclZpZXcuc18kaGVhZGVyQmFzZSA9ICQodGhpcy5fdGVtcGxhdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGVtZTogdGhpcy5fb3duZXIuJHBhZ2UuanFtRGF0YShcInRoZW1lXCIpLFxyXG4gICAgICAgICAgICAgICAgICAgIH0pKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIEJhc2VIZWFkZXJWaWV3LnNfcmVmQ291bnQrKztcclxuICAgICAgICAgICAgICAgIEJhc2VIZWFkZXJWaWV3LnNfJGhlYWRlckJhc2UuYXBwZW5kVG8oJChkb2N1bWVudC5ib2R5KSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gQmFjayBJbmRpY2F0b3Ig44KS5oyB44Gj44Gm44GE44KL44GL5Yik5a6aXHJcbiAgICAgICAgICAgIGlmICgwIDwgdGhpcy4kZWwuZmluZChcIi51aS1iYWNrLWluZGljYXRvclwiKS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2hhc0JhY2tJbmRpY2F0b3IgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBCYXNlSGVhZGVyVmlldy5zXyRoZWFkZXJCYXNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIGluZGljYXRvciDjga7ooajnpLpcclxuICAgICAgICBwcml2YXRlIHNob3dJbmRpY2F0b3IoKTogSlF1ZXJ5IHtcclxuICAgICAgICAgICAgLy8gQmFjayBJbmRpY2F0b3Ig44KS5oyB44Gj44Gm44GE44Gq44GE5aC05ZCI6KGo56S644GX44Gq44GEXHJcbiAgICAgICAgICAgIGlmIChudWxsICE9IEJhc2VIZWFkZXJWaWV3LnNfJGhlYWRlckJhc2UgJiYgdGhpcy5faGFzQmFja0luZGljYXRvcikge1xyXG4gICAgICAgICAgICAgICAgQmFzZUhlYWRlclZpZXcuc18kaGVhZGVyQmFzZS5maW5kKFwiLnVpLWZpeGVkLWJhY2staW5kaWNhdG9yXCIpLmFkZENsYXNzKFwic2hvd1wiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gQmFzZUhlYWRlclZpZXcuc18kaGVhZGVyQmFzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISBpbmRpY2F0b3Ig44Gu6Z2e6KGo56S6XHJcbiAgICAgICAgcHJpdmF0ZSBoaWRlSW5kaWNhdG9yKCk6IEpRdWVyeSB7XHJcbiAgICAgICAgICAgIGlmIChudWxsICE9IEJhc2VIZWFkZXJWaWV3LnNfJGhlYWRlckJhc2UpIHtcclxuICAgICAgICAgICAgICAgIEJhc2VIZWFkZXJWaWV3LnNfJGhlYWRlckJhc2UuZmluZChcIi51aS1maXhlZC1iYWNrLWluZGljYXRvclwiKS5yZW1vdmVDbGFzcyhcInNob3dcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIEJhc2VIZWFkZXJWaWV3LnNfJGhlYWRlckJhc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg5YWx6YCa44OY44OD44OA44Gu44OZ44O844K544KS56C05qOEXHJcbiAgICAgICAgcHJpdmF0ZSByZWxlYXNlSGVhZGVyQmFzZSgpOiBKUXVlcnkge1xyXG4gICAgICAgICAgICAvLyDlm7rlrprjg5jjg4Pjg4DmmYLjgavlj4Lnhafjgqvjgqbjg7Pjg4jjgpLnrqHnkIZcclxuICAgICAgICAgICAgaWYgKFwiZml4ZWRcIiA9PT0gdGhpcy5fb3duZXIuJGhlYWRlci5qcW1EYXRhKFwicG9zaXRpb25cIikpIHtcclxuICAgICAgICAgICAgICAgIGlmIChudWxsICE9IEJhc2VIZWFkZXJWaWV3LnNfJGhlYWRlckJhc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICBCYXNlSGVhZGVyVmlldy5zX3JlZkNvdW50LS07XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKDAgPT09IEJhc2VIZWFkZXJWaWV3LnNfcmVmQ291bnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgQmFzZUhlYWRlclZpZXcuc18kaGVhZGVyQmFzZS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgQmFzZUhlYWRlclZpZXcuc18kaGVhZGVyQmFzZSA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBCYXNlSGVhZGVyVmlldy5zXyRoZWFkZXJCYXNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgICAgICAvLyBPdmVycmlkZTogQmFja2JvbmUuVmlld1xyXG5cclxuICAgICAgICAvLyEgZXZlbnRzIGJpbmRpbmdcclxuICAgICAgICBldmVudHMoKTogYW55IHtcclxuICAgICAgICAgICAgY29uc3QgZXZlbnRNYXAgPSB7fTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX29wdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgIGV2ZW50TWFwW1widmNsaWNrIFwiICsgdGhpcy5fb3B0aW9ucy5iYWNrQ29tbWFuZFNlbGVjdG9yXSA9IHRoaXMub25Db21tYW5kQmFjaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gZXZlbnRNYXA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEgYmFjayDjga7jg4/jg7Pjg4njg6lcclxuICAgICAgICBwcml2YXRlIG9uQ29tbWFuZEJhY2soZXZlbnQ6IEpRdWVyeS5FdmVudCk6IHZvaWQge1xyXG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICBsZXQgaGFuZGxlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fb3duZXIpIHtcclxuICAgICAgICAgICAgICAgIGhhbmRsZWQgPSB0aGlzLl9vd25lci5vbkNvbW1hbmQoZXZlbnQsIHRoaXMuX29wdGlvbnMuYmFja0NvbW1hbmRLaW5kKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoIWhhbmRsZWQpIHtcclxuICAgICAgICAgICAgICAgIFJvdXRlci5iYWNrKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiLyogdHNsaW50OmRpc2FibGU6bWF4LWxpbmUtbGVuZ3RoICovXHJcblxyXG5uYW1lc3BhY2UgQ0RQLlVJIHtcclxuXHJcbiAgICBpbXBvcnQgRnJhbWV3b3JrID0gQ0RQLkZyYW1ld29yaztcclxuXHJcbiAgICBjb25zdCBUQUc6IHN0cmluZyA9IFwiW0NEUC5VSS5CYXNlUGFnZV0gXCI7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAaW50ZXJmYWNlIEJhc2VQYWdlT3B0aW9uc1xyXG4gICAgICogQGJyaWVmIEJhc2VQYWdlIOOBq+aMh+WumuOBmeOCi+OCquODl+OCt+ODp+ODs+OCpOODs+OCv+ODvOODleOCp+OCpOOCuVxyXG4gICAgICovXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIEJhc2VQYWdlT3B0aW9uczxUTW9kZWwgZXh0ZW5kcyBGcmFtZXdvcmsuTW9kZWwgPSBGcmFtZXdvcmsuTW9kZWw+IGV4dGVuZHMgRnJhbWV3b3JrLlBhZ2VDb25zdHJ1Y3RPcHRpb25zLCBCYXNlSGVhZGVyVmlld09wdGlvbnM8VE1vZGVsPiB7XHJcbiAgICAgICAgYmFzZUhlYWRlcj86IG5ldyAob3duZXI6IEZyYW1ld29yay5JUGFnZSwgb3B0aW9ucz86IEJhc2VIZWFkZXJWaWV3T3B0aW9uczxUTW9kZWw+KSA9PiBCYXNlSGVhZGVyVmlldzxUTW9kZWw+OyAgIC8vITwgSGVhZGVyIOapn+iDveOCkuaPkOS+m+OBmeOCi+WfuuW6leOCpOODs+OCueOCv+ODs+OCuVxyXG4gICAgICAgIGJhY2tDb21tYW5kSGFuZGxlcj86IHN0cmluZzsgICAgICAgICAgICAgICAgLy8hPCBcIuaIu+OCi1wiIOOCs+ODnuODs+ODieODj+ODs+ODieODqeODoeOCveODg+ODieWQjS4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IG9uUGFnZUJhY2tcclxuICAgICAgICBkb21FeHRlbnNpb25PcHRpb25zPzogRG9tRXh0ZW5zaW9uT3B0aW9uczsgIC8vITwgRE9N5ouh5by144Gr5rih44GZ44Kq44OX44K344On44OzLiBudWxsfHVuZGVmaW5lZCDjgpLmjIflrprjgZnjgovjgajmi6HlvLXjgZfjgarjgYQgZGVmYXVsdDoge31cclxuICAgIH1cclxuXHJcbiAgICAvL19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18vL1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGNsYXNzIEJhc2VQYWdlXHJcbiAgICAgKiBAYnJpZWYgSGVhZGVyIOOCkuWCmeOBiOOCiyBQYWdlIOOCr+ODqeOCuVxyXG4gICAgICovXHJcbiAgICBleHBvcnQgY2xhc3MgQmFzZVBhZ2U8VE1vZGVsIGV4dGVuZHMgRnJhbWV3b3JrLk1vZGVsID0gRnJhbWV3b3JrLk1vZGVsPiBleHRlbmRzIEZyYW1ld29yay5QYWdlIHtcclxuXHJcbiAgICAgICAgcHJpdmF0ZSBfYmFzZUhlYWRlcjogQmFzZUhlYWRlclZpZXc8VE1vZGVsPjsgICAgLy8hPCDjg5jjg4Pjg4Djgq/jg6njgrlcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogY29uc3RydWN0b3JcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSAgICAgICAgICB1cmwgICAgICAgW2luXSDjg5rjg7zjgrggVVJMXHJcbiAgICAgICAgICogQHBhcmFtIHtTdHJpbmd9ICAgICAgICAgIGlkICAgICAgICBbaW5dIOODmuODvOOCuCBJRFxyXG4gICAgICAgICAqIEBwYXJhbSB7QmFzZVBhZ2VPcHRpb25zfSBbb3B0aW9uc10gW2luXSDjgqrjg5fjgrfjg6fjg7NcclxuICAgICAgICAgKi9cclxuICAgICAgICBjb25zdHJ1Y3Rvcih1cmw6IHN0cmluZywgaWQ6IHN0cmluZywgcHJpdmF0ZSBfb3B0aW9ucz86IEJhc2VQYWdlT3B0aW9uczxUTW9kZWw+KSB7XHJcbiAgICAgICAgICAgIHN1cGVyKHVybCwgaWQsIF9vcHRpb25zID0gJC5leHRlbmQoe1xyXG4gICAgICAgICAgICAgICAgYmFzZUhlYWRlcjogQmFzZUhlYWRlclZpZXcsXHJcbiAgICAgICAgICAgICAgICBiYWNrQ29tbWFuZEhhbmRsZXI6IFwib25QYWdlQmFja1wiLFxyXG4gICAgICAgICAgICAgICAgYmFja0NvbW1hbmRLaW5kOiBcInBhZ2ViYWNrXCIsXHJcbiAgICAgICAgICAgICAgICBkb21FeHRlbnNpb25PcHRpb25zOiB7fSxcclxuICAgICAgICAgICAgfSwgX29wdGlvbnMpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAgICAgLy8gT3ZlcnJpZGU6IEZyYW1ld29yayBQYWdlXHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIGpRTSBldmVudDogXCJwYWdlYmVmb3JlY3JlYXRlXCIg44Gr5a++5b+cXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gZXZlbnQge0pRdWVyeS5FdmVudH0gW2luXSDjgqTjg5njg7Pjg4jjgqrjg5bjgrjjgqfjgq/jg4hcclxuICAgICAgICAgKi9cclxuICAgICAgICBvblBhZ2VCZWZvcmVDcmVhdGUoZXZlbnQ6IEpRdWVyeS5FdmVudCk6IHZvaWQge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fb3B0aW9ucy5iYXNlSGVhZGVyKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9iYXNlSGVhZGVyID0gbmV3IHRoaXMuX29wdGlvbnMuYmFzZUhlYWRlcih0aGlzLCB0aGlzLl9vcHRpb25zKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2Jhc2VIZWFkZXIuY3JlYXRlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc3VwZXIub25QYWdlQmVmb3JlQ3JlYXRlKGV2ZW50KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIGpRTSBldmVudDogXCJwYWdlY3JlYXRlXCIg44Gr5a++5b+cXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gZXZlbnQge0pRdWVyeS5FdmVudH0gW2luXSDjgqTjg5njg7Pjg4jjgqrjg5bjgrjjgqfjgq/jg4hcclxuICAgICAgICAgKi9cclxuICAgICAgICBvblBhZ2VJbml0KGV2ZW50OiBKUXVlcnkuRXZlbnQpOiB2b2lkIHtcclxuICAgICAgICAgICAgaWYgKG51bGwgIT0gdGhpcy5fb3B0aW9ucy5kb21FeHRlbnNpb25PcHRpb25zKSB7XHJcbiAgICAgICAgICAgICAgICBFeHRlbnNpb25NYW5hZ2VyLmFwcGx5RG9tRXh0ZW5zaW9uKHRoaXMuJHBhZ2UsIHRoaXMuX29wdGlvbnMuZG9tRXh0ZW5zaW9uT3B0aW9ucyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc3VwZXIub25QYWdlSW5pdChldmVudCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBqUU0gZXZlbnQ6IFwicGFnZWJlZm9yZXNob3dcIiDjgavlr77lv5xcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBldmVudCB7SlF1ZXJ5LkV2ZW50fSBbaW5dIOOCpOODmeODs+ODiOOCquODluOCuOOCp+OCr+ODiFxyXG4gICAgICAgICAqIEBwYXJhbSBkYXRhICB7U2hvd0V2ZW50RGF0YX0gICAgIFtpbl0g5LuY5Yqg5oOF5aCxXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgb25QYWdlQmVmb3JlU2hvdyhldmVudDogSlF1ZXJ5LkV2ZW50LCBkYXRhPzogRnJhbWV3b3JrLlNob3dFdmVudERhdGEpOiB2b2lkIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX2Jhc2VIZWFkZXIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2Jhc2VIZWFkZXIuYWN0aXZhdGUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzdXBlci5vblBhZ2VCZWZvcmVTaG93KGV2ZW50LCBkYXRhKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIGpRTSBldmVudDogXCJwYWdlYmVmb3JlaGlkZVwiIOOBq+WvvuW/nFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGV2ZW50IHtKUXVlcnkuRXZlbnR9IFtpbl0g44Kk44OZ44Oz44OI44Kq44OW44K444Kn44Kv44OIXHJcbiAgICAgICAgICogQHBhcmFtIGRhdGEgIHtIaWRlRXZlbnREYXRhfSAgICAgW2luXSDku5jliqDmg4XloLFcclxuICAgICAgICAgKi9cclxuICAgICAgICBvblBhZ2VCZWZvcmVIaWRlKGV2ZW50OiBKUXVlcnkuRXZlbnQsIGRhdGE/OiBGcmFtZXdvcmsuSGlkZUV2ZW50RGF0YSk6IHZvaWQge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fYmFzZUhlYWRlcikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fYmFzZUhlYWRlci5pbmFjdGl2YXRlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc3VwZXIub25QYWdlQmVmb3JlSGlkZShldmVudCwgZGF0YSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBqUU0gZXZlbnQ6IFwicGFnZXJlbW92ZVwiIOOBq+WvvuW/nFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGV2ZW50IHtKUXVlcnkuRXZlbnR9IFtpbl0g44Kk44OZ44Oz44OI44Kq44OW44K444Kn44Kv44OIXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgb25QYWdlUmVtb3ZlKGV2ZW50OiBKUXVlcnkuRXZlbnQpOiB2b2lkIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX2Jhc2VIZWFkZXIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2Jhc2VIZWFkZXIucmVsZWFzZSgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fYmFzZUhlYWRlciA9IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc3VwZXIub25QYWdlUmVtb3ZlKGV2ZW50KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEgvVyBCYWNrIEJ1dHRvbiDjg4/jg7Pjg4njg6lcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSAgZXZlbnQge0pRdWVyeS5FdmVudH0gW2luXSBldmVudCBvYmplY3RcclxuICAgICAgICAgKiBAcmV0dXJuIHtCb29sZWFufSB0cnVlOiDml6Llrprjga7lh6bnkIbjgpLooYzjgo/jgarjgYQgLyBmYWxzZTog5pei5a6a44Gu5Yem55CG44KS6KGM44GGXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgb25IYXJkd2FyZUJhY2tCdXR0b24oZXZlbnQ/OiBKUXVlcnkuRXZlbnQpOiBib29sZWFuIHtcclxuICAgICAgICAgICAgbGV0IHJldHZhbCA9IHN1cGVyLm9uSGFyZHdhcmVCYWNrQnV0dG9uKGV2ZW50KTtcclxuICAgICAgICAgICAgaWYgKCFyZXR2YWwpIHtcclxuICAgICAgICAgICAgICAgIHJldHZhbCA9IHRoaXMub25Db21tYW5kKGV2ZW50LCB0aGlzLl9vcHRpb25zLmJhY2tDb21tYW5kS2luZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHJldHZhbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAgICAgLy8gT3ZlcnJpZGU6IEN1c3RvbSBFdmVudFxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcIuaIu+OCi1wiIGV2ZW50IOeZuuihjOaZguOBq+OCs+ODvOODq+OBleOCjOOCi1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGV2ZW50IHtKUXVlcnkuRXZlbnR9IFtpbl0g44Kk44OZ44Oz44OI44Kq44OW44K444Kn44Kv44OIXHJcbiAgICAgICAgICogQHJldHVybiB7Qm9vbGVhbn0gdHJ1ZTog5pei5a6a44Gu5Yem55CG44KS6KGM44KP44Gq44GEIC8gZmFsc2U6IOaXouWumuOBruWHpueQhuOCkuihjOOBhlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIG9uQ29tbWFuZChldmVudDogSlF1ZXJ5LkV2ZW50LCBraW5kOiBzdHJpbmcpOiBib29sZWFuIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX29wdGlvbnMuYmFja0NvbW1hbmRLaW5kID09PSBraW5kKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5fb3duZXIgJiYgdGhpcy5fb3duZXJbdGhpcy5fb3B0aW9ucy5iYWNrQ29tbWFuZEhhbmRsZXJdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX293bmVyW3RoaXMuX29wdGlvbnMuYmFja0NvbW1hbmRIYW5kbGVyXShldmVudCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCIvKiB0c2xpbnQ6ZGlzYWJsZTptYXgtbGluZS1sZW5ndGggKi9cclxuXHJcbm5hbWVzcGFjZSBDRFAuVUkge1xyXG4gICAgaW1wb3J0IFByb21pc2UgICAgICA9IENEUC5Qcm9taXNlO1xyXG4gICAgaW1wb3J0IEZyYW1ld29yayAgICA9IENEUC5GcmFtZXdvcms7XHJcblxyXG4gICAgY29uc3QgVEFHID0gXCJbQ0RQLlVJLlBhZ2VWaWV3XSBcIjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFBhZ2VWaWV3IOOBjOeZuuihjOOBmeOCi+OCpOODmeODs+ODiOWumue+qVxyXG4gICAgICovXHJcbiAgICBleHBvcnQgY29uc3QgZW51bSBQQUdFVklFV19FVkVOVFMge1xyXG4gICAgICAgIE9SSUVOVEFUSU9OX0NIQU5HRUQgPSBcInBhZ2V2aWV3Om9yaWVudGF0aW9uLWNoYW5nZWRcIixcclxuICAgICAgICBJTklUSUFMWlNFICAgICAgICAgID0gXCJwYWdldmlldzppbml0aWFsaXplXCIsXHJcbiAgICAgICAgUEFHRV9CRUZPUkVfQ1JFQVRFICA9IFwicGFnZXZpZXc6YmVmb3JlLWNyZWF0ZVwiLFxyXG4gICAgICAgIFBBR0VfSU5JVCAgICAgICAgICAgPSBcInBhZ2V2aWV3OnBhZ2UtaW5pdFwiLFxyXG4gICAgICAgIFBBR0VfQkVGT1JFX1NIT1cgICAgPSBcInBhZ2V2aWV3OmJlZm9yZS1zaG93XCIsXHJcbiAgICAgICAgUEFHRV9TSE9XICAgICAgICAgICA9IFwicGFnZXZpZXc6c2hvd1wiLFxyXG4gICAgICAgIFBBR0VfQkVGT1JFX0hJREUgICAgPSBcInBhZ2V2aWV3OmJlZm9yZS1oaWRlXCIsXHJcbiAgICAgICAgUEFHRV9ISURFICAgICAgICAgICA9IFwicGFnZXZpZXc6aGlkZVwiLFxyXG4gICAgICAgIFBBR0VfUkVNT1ZFICAgICAgICAgPSBcInBhZ2V2aWV3OnJlbW92ZVwiLFxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGludGVyZmFjZSBQYWdlVmlld0NvbnN0cnVjdE9wdGlvbnNcclxuICAgICAqIEBicmllZiBSb3V0ZXIg44G444Gu55m76Yyy5oOF5aCx44GoIEJhY2tib25lLlZpZXcg44G444Gu5Yid5pyf5YyW5oOF5aCx44KS5qC857SN44GZ44KL44Kk44Oz44K/44O844OV44Kn44Kk44K544Kv44Op44K5XHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgUGFnZVZpZXdDb25zdHJ1Y3RPcHRpb25zPFRNb2RlbCBleHRlbmRzIEZyYW1ld29yay5Nb2RlbCA9IEZyYW1ld29yay5Nb2RlbD4gZXh0ZW5kcyBCYXNlUGFnZU9wdGlvbnM8VE1vZGVsPiB7XHJcbiAgICAgICAgYmFzZVBhZ2U/OiBuZXcgKHVybDogc3RyaW5nLCBpZDogc3RyaW5nLCBvcHRpb25zPzogRnJhbWV3b3JrLlBhZ2VDb25zdHJ1Y3RPcHRpb25zKSA9PiBGcmFtZXdvcmsuUGFnZTsgICAgLy8hPCBQYWdlIOapn+iDveOCkuaPkOS+m+OBmeOCi+WfuuW6leOCpOODs+OCueOCv+ODs+OCuVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGNsYXNzIFBhZ2VWaWV3XHJcbiAgICAgKiBAYnJpZWYgQ0RQLkZyYW1ld29yay5QYWdlIOOBqCBCYWNrYm9uZS5WaWV3IOOBruS4oeaWueOBruapn+iDveOCkuaPkOS+m+OBmeOCi+ODmuODvOOCuOOBruWfuuW6leOCr+ODqeOCuVxyXG4gICAgICovXHJcbiAgICBleHBvcnQgY2xhc3MgUGFnZVZpZXc8VE1vZGVsIGV4dGVuZHMgRnJhbWV3b3JrLk1vZGVsID0gRnJhbWV3b3JrLk1vZGVsPiBleHRlbmRzIEZyYW1ld29yay5WaWV3PFRNb2RlbD4gaW1wbGVtZW50cyBGcmFtZXdvcmsuSVBhZ2UsIElTdGF0dXNNYW5hZ2VyIHtcclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIF9wYWdlT3B0aW9uczogUGFnZVZpZXdDb25zdHJ1Y3RPcHRpb25zPFRNb2RlbD4gPSBudWxsO1xyXG4gICAgICAgIHByb3RlY3RlZCBfYmFzZVBhZ2U6IEZyYW1ld29yay5QYWdlID0gbnVsbDtcclxuICAgICAgICBwcml2YXRlIF9zdGF0dXNNZ3I6IFN0YXR1c01hbmFnZXIgPSBudWxsO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBjb25zdHJ1Y3RvclxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHVybCAgICAge1N0cmluZ30gICAgICAgICAgICAgICAgICAgW2luXSDjg5rjg7zjgrggVVJMXHJcbiAgICAgICAgICogQHBhcmFtIGlkICAgICAge1N0cmluZ30gICAgICAgICAgICAgICAgICAgW2luXSDjg5rjg7zjgrggSURcclxuICAgICAgICAgKiBAcGFyYW0gb3B0aW9ucyB7UGFnZVZpZXdDb25zdHJ1Y3RPcHRpb25zfSBbaW5dIOOCquODl+OCt+ODp+ODs1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGNvbnN0cnVjdG9yKHVybDogc3RyaW5nLCBpZDogc3RyaW5nLCBvcHRpb25zPzogUGFnZVZpZXdDb25zdHJ1Y3RPcHRpb25zPFRNb2RlbD4pIHtcclxuICAgICAgICAgICAgc3VwZXIob3B0aW9ucyk7XHJcblxyXG4gICAgICAgICAgICAvLyBQYWdlVmlldyDoqK3lrppcclxuICAgICAgICAgICAgdGhpcy5fcGFnZU9wdGlvbnMgPSAkLmV4dGVuZCh7fSwgeyBvd25lcjogdGhpcyB9LCBvcHRpb25zKTtcclxuICAgICAgICAgICAgdGhpcy5fYmFzZVBhZ2UgPSB0aGlzLl9wYWdlT3B0aW9ucy5iYXNlUGFnZSA/IG5ldyB0aGlzLl9wYWdlT3B0aW9ucy5iYXNlUGFnZSh1cmwsIGlkLCB0aGlzLl9wYWdlT3B0aW9ucykgOiBuZXcgQmFzZVBhZ2UodXJsLCBpZCwgdGhpcy5fcGFnZU9wdGlvbnMpO1xyXG5cclxuICAgICAgICAgICAgLy8gU3RhdHVzTWFuYWdlclxyXG4gICAgICAgICAgICB0aGlzLl9zdGF0dXNNZ3IgPSBuZXcgU3RhdHVzTWFuYWdlcigpO1xyXG4gICAgICAgICAgICAvLyBCYWNrYm9uZS5WaWV3IOeUqOOBruWIneacn+WMllxyXG4gICAgICAgICAgICBjb25zdCBkZWxlZ2F0ZXMgPSAoPGFueT50aGlzKS5ldmVudHMgPyB0cnVlIDogZmFsc2U7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0RWxlbWVudCh0aGlzLiRwYWdlLCBkZWxlZ2F0ZXMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgICAgICAvLyBJbXBsZW1lbnRzOiBJU3RhdHVzTWFuYWdlciDnirbmhYvnrqHnkIZcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog54q25oWL5aSJ5pWw44Gu5Y+C54Wn44Kr44Km44Oz44OI44Gu44Kk44Oz44Kv44Oq44Oh44Oz44OIXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gc3RhdHVzIHtTdHJpbmd9IFtpbl0g54q25oWL6K2Y5Yil5a2QXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgc3RhdHVzQWRkUmVmKHN0YXR1czogc3RyaW5nKTogbnVtYmVyIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3N0YXR1c01nci5zdGF0dXNBZGRSZWYoc3RhdHVzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOeKtuaFi+WkieaVsOOBruWPgueFp+OCq+OCpuODs+ODiOOBruODh+OCr+ODquODoeODs+ODiFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHN0YXR1cyB7U3RyaW5nfSBbaW5dIOeKtuaFi+itmOWIpeWtkFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHN0YXR1c1JlbGVhc2Uoc3RhdHVzOiBzdHJpbmcpOiBudW1iZXIge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fc3RhdHVzTWdyLnN0YXR1c1JlbGVhc2Uoc3RhdHVzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOWHpueQhuOCueOCs+ODvOODl+avjuOBq+eKtuaFi+WkieaVsOOCkuioreWumlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHN0YXR1cyAgIHtTdHJpbmd9ICAgW2luXSDnirbmhYvorZjliKXlrZBcclxuICAgICAgICAgKiBAcGFyYW0gY2FsbGJhY2sge0Z1bmN0aW9ufSBbaW5dIOWHpueQhuOCs+ODvOODq+ODkOODg+OCr1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHN0YXR1c1Njb3BlKHN0YXR1czogc3RyaW5nLCBjYWxsYmFjazogKCkgPT4gdm9pZCB8IFByb21pc2U8YW55Pik6IHZvaWQge1xyXG4gICAgICAgICAgICB0aGlzLl9zdGF0dXNNZ3Iuc3RhdHVzU2NvcGUoc3RhdHVzLCBjYWxsYmFjayk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDmjIflrprjgZfjgZ/nirbmhYvkuK3jgafjgYLjgovjgYvnorroqo1cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBzdGF0dXMge1N0cmluZ30gICBbaW5dIOeKtuaFi+itmOWIpeWtkFxyXG4gICAgICAgICAqIEByZXR1cm4ge0Jvb2xlYW59IHRydWU6IOeKtuaFi+WGhSAvIGZhbHNlOiDnirbmhYvlpJZcclxuICAgICAgICAgKi9cclxuICAgICAgICBpc1N0YXR1c0luKHN0YXR1czogc3RyaW5nKTogYm9vbGVhbiB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9zdGF0dXNNZ3IuaXNTdGF0dXNJbihzdGF0dXMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgICAgICAvLyBJUGFnZSBzdHViIHN0dWZmLlxyXG5cclxuICAgICAgICBnZXQgYWN0aXZlKCk6IGJvb2xlYW4gICAgICAgICAgICAgICAgICAgeyByZXR1cm4gdGhpcy5fYmFzZVBhZ2UuYWN0aXZlOyAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICBnZXQgdXJsKCk6IHN0cmluZyAgICAgICAgICAgICAgICAgICAgICAgeyByZXR1cm4gdGhpcy5fYmFzZVBhZ2UudXJsOyAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICBnZXQgaWQoKTogc3RyaW5nICAgICAgICAgICAgICAgICAgICAgICAgeyByZXR1cm4gdGhpcy5fYmFzZVBhZ2UgPyB0aGlzLl9iYXNlUGFnZS5pZCA6IG51bGw7IH1cclxuICAgICAgICBnZXQgJHBhZ2UoKTogSlF1ZXJ5ICAgICAgICAgICAgICAgICAgICAgeyByZXR1cm4gdGhpcy5fYmFzZVBhZ2UuJHBhZ2U7ICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICBnZXQgJGhlYWRlcigpOiBKUXVlcnkgICAgICAgICAgICAgICAgICAgeyByZXR1cm4gdGhpcy5fYmFzZVBhZ2UuJGhlYWRlcjsgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICBnZXQgJGZvb3RlcigpOiBKUXVlcnkgICAgICAgICAgICAgICAgICAgeyByZXR1cm4gdGhpcy5fYmFzZVBhZ2UuJGZvb3RlcjsgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICBnZXQgaW50ZW50KCk6IEZyYW1ld29yay5JbnRlbnQgICAgICAgICAgeyByZXR1cm4gdGhpcy5fYmFzZVBhZ2UuaW50ZW50OyAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICBzZXQgaW50ZW50KG5ld0ludGVudDogRnJhbWV3b3JrLkludGVudCkgeyB0aGlzLl9iYXNlUGFnZS5pbnRlbnQgPSBuZXdJbnRlbnQ7ICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogT3JpZW50YXRpb24g44Gu5aSJ5pu044KS5Y+X5L+hXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gbmV3T3JpZW50YXRpb24ge09yaWVudGF0aW9ufSBbaW5dIG5ldyBvcmllbnRhdGlvbiBjb2RlLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIG9uT3JpZW50YXRpb25DaGFuZ2VkKG5ld09yaWVudGF0aW9uOiBGcmFtZXdvcmsuT3JpZW50YXRpb24pOiB2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy50cmlnZ2VyKFBBR0VWSUVXX0VWRU5UUy5PUklFTlRBVElPTl9DSEFOR0VELCBuZXdPcmllbnRhdGlvbik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBIL1cgQmFjayBCdXR0b24g44OP44Oz44OJ44OpXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gIGV2ZW50IHtKUXVlcnkuRXZlbnR9IFtpbl0gZXZlbnQgb2JqZWN0XHJcbiAgICAgICAgICogQHJldHVybiB7Qm9vbGVhbn0gdHJ1ZTog5pei5a6a44Gu5Yem55CG44KS6KGM44KP44Gq44GEIC8gZmFsc2U6IOaXouWumuOBruWHpueQhuOCkuihjOOBhlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIG9uSGFyZHdhcmVCYWNrQnV0dG9uKGV2ZW50PzogSlF1ZXJ5LkV2ZW50KTogYm9vbGVhbiB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFJvdXRlciBcImJlZm9yZSByb3V0ZSBjaGFuZ2VcIiDjg4/jg7Pjg4njg6lcclxuICAgICAgICAgKiDjg5rjg7zjgrjpgbfnp7vnm7TliY3jgavpnZ7lkIzmnJ/lh6bnkIbjgpLooYzjgYbjgZPjgajjgYzlj6/og71cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm4ge0lQcm9taXNlQmFzZX0gUHJvbWlzZSDjgqrjg5bjgrjjgqfjgq/jg4hcclxuICAgICAgICAgKi9cclxuICAgICAgICBvbkJlZm9yZVJvdXRlQ2hhbmdlKCk6IElQcm9taXNlQmFzZTxhbnk+IHtcclxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog5rGO55So44Kz44Oe44Oz44OJ44KS5Y+X5L+hXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gIGV2ZW50IHtKUXVlcnkuRXZlbnR9IFtpbl0gZXZlbnQgb2JqZWN0XHJcbiAgICAgICAgICogQHBhcmFtICBldmVudCB7a2luZH0gICAgICAgICAgICAgIFtpbl0gY29tbWFuZCBraW5kIHN0cmluZ1xyXG4gICAgICAgICAqIEByZXR1cm4ge0Jvb2xlYW59IHRydWU6IOaXouWumuOBruWHpueQhuOCkuihjOOCj+OBquOBhCAvIGZhbHNlOiDml6Llrprjga7lh6bnkIbjgpLooYzjgYZcclxuICAgICAgICAgKi9cclxuICAgICAgICBvbkNvbW1hbmQoZXZlbnQ/OiBKUXVlcnkuRXZlbnQsIGtpbmQ/OiBzdHJpbmcpOiBib29sZWFuIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog5pyA5Yid44GuIE9uUGFnZUluaXQoKSDjga7jgajjgY3jgavjga7jgb/jgrPjg7zjg6vjgZXjgozjgotcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBldmVudCB7SlF1ZXJ5LkV2ZW50fSBbaW5dIOOCpOODmeODs+ODiOOCquODluOCuOOCp+OCr+ODiFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIG9uSW5pdGlhbGl6ZShldmVudDogSlF1ZXJ5LkV2ZW50KTogdm9pZCB7XHJcbiAgICAgICAgICAgIHRoaXMudHJpZ2dlcihQQUdFVklFV19FVkVOVFMuSU5JVElBTFpTRSwgZXZlbnQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogalFNIGV2ZW50OiBcInBhZ2ViZWZvcmVjcmVhdGVcIiDjgavlr77lv5xcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBldmVudCB7SlF1ZXJ5LkV2ZW50fSBbaW5dIOOCpOODmeODs+ODiOOCquODluOCuOOCp+OCr+ODiFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIG9uUGFnZUJlZm9yZUNyZWF0ZShldmVudDogSlF1ZXJ5LkV2ZW50KTogdm9pZCB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0RWxlbWVudCh0aGlzLiRwYWdlLCB0cnVlKTtcclxuICAgICAgICAgICAgdGhpcy50cmlnZ2VyKFBBR0VWSUVXX0VWRU5UUy5QQUdFX0JFRk9SRV9DUkVBVEUsIGV2ZW50KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIGpRTSBldmVudDogXCJwYWdlY3JlYXRlXCIgKOaXpzpcInBhZ2Vpbml0XCIpIOOBq+WvvuW/nFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGV2ZW50IHtKUXVlcnkuRXZlbnR9IFtpbl0g44Kk44OZ44Oz44OI44Kq44OW44K444Kn44Kv44OIXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgb25QYWdlSW5pdChldmVudDogSlF1ZXJ5LkV2ZW50KTogdm9pZCB7XHJcbiAgICAgICAgICAgIHRoaXMudHJpZ2dlcihQQUdFVklFV19FVkVOVFMuUEFHRV9JTklULCBldmVudCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBqUU0gZXZlbnQ6IFwicGFnZWJlZm9yZXNob3dcIiDjgavlr77lv5xcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBldmVudCB7SlF1ZXJ5LkV2ZW50fSBbaW5dIOOCpOODmeODs+ODiOOCquODluOCuOOCp+OCr+ODiFxyXG4gICAgICAgICAqIEBwYXJhbSBkYXRhICB7U2hvd0V2ZW50RGF0YX0gICAgIFtpbl0g5LuY5Yqg5oOF5aCxXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgb25QYWdlQmVmb3JlU2hvdyhldmVudDogSlF1ZXJ5LkV2ZW50LCBkYXRhPzogRnJhbWV3b3JrLlNob3dFdmVudERhdGEpOiB2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy50cmlnZ2VyKFBBR0VWSUVXX0VWRU5UUy5QQUdFX0JFRk9SRV9TSE9XLCBldmVudCwgZGF0YSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBqUU0gZXZlbnQ6IFwicGFnZWNvbnRhaW5lcnNob3dcIiAo5penOlwicGFnZXNob3dcIikg44Gr5a++5b+cXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gZXZlbnQge0pRdWVyeS5FdmVudH0gW2luXSDjgqTjg5njg7Pjg4jjgqrjg5bjgrjjgqfjgq/jg4hcclxuICAgICAgICAgKiBAcGFyYW0gZGF0YSAge1Nob3dFdmVudERhdGF9ICAgICBbaW5dIOS7mOWKoOaDheWgsVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIG9uUGFnZVNob3coZXZlbnQ6IEpRdWVyeS5FdmVudCwgZGF0YT86IEZyYW1ld29yay5TaG93RXZlbnREYXRhKTogdm9pZCB7XHJcbiAgICAgICAgICAgIHRoaXMudHJpZ2dlcihQQUdFVklFV19FVkVOVFMuUEFHRV9TSE9XLCBldmVudCwgZGF0YSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBqUU0gZXZlbnQ6IFwicGFnZWJlZm9yZWhpZGVcIiDjgavlr77lv5xcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBldmVudCB7SlF1ZXJ5LkV2ZW50fSBbaW5dIOOCpOODmeODs+ODiOOCquODluOCuOOCp+OCr+ODiFxyXG4gICAgICAgICAqIEBwYXJhbSBkYXRhICB7SGlkZUV2ZW50RGF0YX0gICAgIFtpbl0g5LuY5Yqg5oOF5aCxXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgb25QYWdlQmVmb3JlSGlkZShldmVudDogSlF1ZXJ5LkV2ZW50LCBkYXRhPzogRnJhbWV3b3JrLkhpZGVFdmVudERhdGEpOiB2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy50cmlnZ2VyKFBBR0VWSUVXX0VWRU5UUy5QQUdFX0JFRk9SRV9ISURFLCBldmVudCwgZGF0YSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBqUU0gZXZlbnQ6IFwicGFnZWNvbnRhaW5lcmhpZGVcIiAo5penOlwicGFnZWhpZGVcIikg44Gr5a++5b+cXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gZXZlbnQge0pRdWVyeS5FdmVudH0gW2luXSDjgqTjg5njg7Pjg4jjgqrjg5bjgrjjgqfjgq/jg4hcclxuICAgICAgICAgKiBAcGFyYW0gZGF0YSAge0hpZGVFdmVudERhdGF9ICAgICBbaW5dIOS7mOWKoOaDheWgsVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIG9uUGFnZUhpZGUoZXZlbnQ6IEpRdWVyeS5FdmVudCwgZGF0YT86IEZyYW1ld29yay5IaWRlRXZlbnREYXRhKTogdm9pZCB7XHJcbiAgICAgICAgICAgIHRoaXMudHJpZ2dlcihQQUdFVklFV19FVkVOVFMuUEFHRV9ISURFLCBldmVudCwgZGF0YSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBqUU0gZXZlbnQ6IFwicGFnZXJlbW92ZVwiIOOBq+WvvuW/nFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGV2ZW50IHtKUXVlcnkuRXZlbnR9IFtpbl0g44Kk44OZ44Oz44OI44Kq44OW44K444Kn44Kv44OIXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgb25QYWdlUmVtb3ZlKGV2ZW50OiBKUXVlcnkuRXZlbnQpOiB2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy50cmlnZ2VyKFBBR0VWSUVXX0VWRU5UUy5QQUdFX1JFTU9WRSwgZXZlbnQpO1xyXG4gICAgICAgICAgICB0aGlzLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICB0aGlzLmVsICA9IG51bGw7XHJcbiAgICAgICAgICAgIHRoaXMuJGVsID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiLyogdHNsaW50OmRpc2FibGU6bWF4LWxpbmUtbGVuZ3RoICovXHJcblxyXG5uYW1lc3BhY2UgQ0RQLlVJIHtcclxuICAgIGltcG9ydCBGcmFtZXdvcmsgPSBDRFAuRnJhbWV3b3JrO1xyXG5cclxuICAgIGNvbnN0IFRBRyA9IFwiW0NEUC5VSS5QYWdlQ29udGFpbmVyVmlld10gXCI7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAaW50ZXJmYWNlIFBhZ2VDb250YWluZXJWaWV3T3B0aW9uc1xyXG4gICAgICogQGJyaWVmIFBhZ2VDb250YWluZXIg44Gu44Kq44OX44K344On44OzXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgUGFnZUNvbnRhaW5lclZpZXdPcHRpb25zPFRNb2RlbCBleHRlbmRzIEZyYW1ld29yay5Nb2RlbCA9IEZyYW1ld29yay5Nb2RlbD4gZXh0ZW5kcyBGcmFtZXdvcmsuVmlld09wdGlvbnM8VE1vZGVsPiB7XHJcbiAgICAgICAgb3duZXI6IFBhZ2VWaWV3O1xyXG4gICAgICAgICRlbD86IEpRdWVyeTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBjbGFzcyBQYWdlQ29udGFpbmVyVmlld1xyXG4gICAgICogQGJyaWVmIFBhZ2VWaWV3IOOBqOmAo+aQuuWPr+iDveOBqiDjgrPjg7Pjg4bjg4rjg5Pjg6Xjg7zjgq/jg6njgrlcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGNsYXNzIFBhZ2VDb250YWluZXJWaWV3PFRNb2RlbCBleHRlbmRzIEZyYW1ld29yay5Nb2RlbCA9IEZyYW1ld29yay5Nb2RlbD4gZXh0ZW5kcyBGcmFtZXdvcmsuVmlldzxUTW9kZWw+IHtcclxuXHJcbiAgICAgICAgcHJpdmF0ZSBfb3duZXI6IFBhZ2VWaWV3ID0gbnVsbDtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogY29uc3RydWN0b3JcclxuICAgICAgICAgKi9cclxuICAgICAgICBjb25zdHJ1Y3RvcihvcHRpb25zOiBQYWdlQ29udGFpbmVyVmlld09wdGlvbnM8VE1vZGVsPikge1xyXG4gICAgICAgICAgICBzdXBlcihvcHRpb25zKTtcclxuICAgICAgICAgICAgdGhpcy5fb3duZXIgPSBvcHRpb25zLm93bmVyO1xyXG4gICAgICAgICAgICBpZiAob3B0aW9ucy4kZWwpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGRlbGVnYXRlcyA9ICg8YW55PnRoaXMpLmV2ZW50cyA/IHRydWUgOiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0RWxlbWVudChvcHRpb25zLiRlbCwgZGVsZWdhdGVzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBzZXQgZXZlbnQgbGlzdGVuZXJcclxuICAgICAgICAgICAgdGhpcy5saXN0ZW5Ubyh0aGlzLl9vd25lciwgUEFHRVZJRVdfRVZFTlRTLk9SSUVOVEFUSU9OX0NIQU5HRUQsIHRoaXMub25PcmllbnRhdGlvbkNoYW5nZWQuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgICAgIHRoaXMubGlzdGVuVG8odGhpcy5fb3duZXIsIFBBR0VWSUVXX0VWRU5UUy5JTklUSUFMWlNFLCB0aGlzLm9uSW5pdGlhbGl6ZS5iaW5kKHRoaXMpKTtcclxuICAgICAgICAgICAgdGhpcy5saXN0ZW5Ubyh0aGlzLl9vd25lciwgUEFHRVZJRVdfRVZFTlRTLlBBR0VfQkVGT1JFX0NSRUFURSwgdGhpcy5vblBhZ2VCZWZvcmVDcmVhdGUuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgICAgIHRoaXMubGlzdGVuVG8odGhpcy5fb3duZXIsIFBBR0VWSUVXX0VWRU5UUy5QQUdFX0lOSVQsIHRoaXMub25QYWdlSW5pdC5iaW5kKHRoaXMpKTtcclxuICAgICAgICAgICAgdGhpcy5saXN0ZW5Ubyh0aGlzLl9vd25lciwgUEFHRVZJRVdfRVZFTlRTLlBBR0VfQkVGT1JFX1NIT1csIHRoaXMub25QYWdlQmVmb3JlU2hvdy5iaW5kKHRoaXMpKTtcclxuICAgICAgICAgICAgdGhpcy5saXN0ZW5Ubyh0aGlzLl9vd25lciwgUEFHRVZJRVdfRVZFTlRTLlBBR0VfU0hPVywgdGhpcy5vblBhZ2VTaG93LmJpbmQodGhpcykpO1xyXG4gICAgICAgICAgICB0aGlzLmxpc3RlblRvKHRoaXMuX293bmVyLCBQQUdFVklFV19FVkVOVFMuUEFHRV9CRUZPUkVfSElERSwgdGhpcy5vblBhZ2VCZWZvcmVIaWRlLmJpbmQodGhpcykpO1xyXG4gICAgICAgICAgICB0aGlzLmxpc3RlblRvKHRoaXMuX293bmVyLCBQQUdFVklFV19FVkVOVFMuUEFHRV9ISURFLCB0aGlzLm9uUGFnZUhpZGUuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgICAgIHRoaXMubGlzdGVuVG8odGhpcy5fb3duZXIsIFBBR0VWSUVXX0VWRU5UUy5QQUdFX1JFTU9WRSwgdGhpcy5vblBhZ2VSZW1vdmUuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgICAgIC8vIHNob3J0IGN1dCBtZXRob2RzXHJcblxyXG4gICAgICAgIC8vISBPd25lciDlj5blvpdcclxuICAgICAgICBnZXQgb3duZXIoKTogUGFnZVZpZXcge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fb3duZXI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgICAgIC8vIEhhbmRsZSBQYWdlVmlldyBldmVudHNcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogT3JpZW50YXRpb24g44Gu5aSJ5pu044KS5Y+X5L+hXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gbmV3T3JpZW50YXRpb24ge09yaWVudGF0aW9ufSBbaW5dIG5ldyBvcmllbnRhdGlvbiBjb2RlLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIG9uT3JpZW50YXRpb25DaGFuZ2VkKG5ld09yaWVudGF0aW9uOiBGcmFtZXdvcmsuT3JpZW50YXRpb24pOiB2b2lkIHtcclxuICAgICAgICAgICAgLy8gT3ZlcnJpZGVcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOacgOWIneOBriBPblBhZ2VJbml0KCkg44Gu44Go44GN44Gr44Gu44G/44Kz44O844Or44GV44KM44KLXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gZXZlbnQge0pRdWVyeS5FdmVudH0gW2luXSDjgqTjg5njg7Pjg4jjgqrjg5bjgrjjgqfjgq/jg4hcclxuICAgICAgICAgKi9cclxuICAgICAgICBvbkluaXRpYWxpemUoZXZlbnQ6IEpRdWVyeS5FdmVudCk6IHZvaWQge1xyXG4gICAgICAgICAgICAvLyBPdmVycmlkZVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogalFNIGV2ZW50OiBcInBhZ2ViZWZvcmVjcmVhdGVcIiDjgavlr77lv5xcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBldmVudCB7SlF1ZXJ5LkV2ZW50fSBbaW5dIOOCpOODmeODs+ODiOOCquODluOCuOOCp+OCr+ODiFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIG9uUGFnZUJlZm9yZUNyZWF0ZShldmVudDogSlF1ZXJ5LkV2ZW50KTogdm9pZCB7XHJcbiAgICAgICAgICAgIC8vIE92ZXJyaWRlXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBqUU0gZXZlbnQ6IFwicGFnZWNyZWF0ZVwiICjml6c6XCJwYWdlaW5pdFwiKSDjgavlr77lv5xcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBldmVudCB7SlF1ZXJ5LkV2ZW50fSBbaW5dIOOCpOODmeODs+ODiOOCquODluOCuOOCp+OCr+ODiFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIG9uUGFnZUluaXQoZXZlbnQ6IEpRdWVyeS5FdmVudCk6IHZvaWQge1xyXG4gICAgICAgICAgICAvLyBPdmVycmlkZVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogalFNIGV2ZW50OiBcInBhZ2ViZWZvcmVzaG93XCIg44Gr5a++5b+cXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gZXZlbnQge0pRdWVyeS5FdmVudH0gW2luXSDjgqTjg5njg7Pjg4jjgqrjg5bjgrjjgqfjgq/jg4hcclxuICAgICAgICAgKiBAcGFyYW0gZGF0YSAge1Nob3dFdmVudERhdGF9ICAgICBbaW5dIOS7mOWKoOaDheWgsVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIG9uUGFnZUJlZm9yZVNob3coZXZlbnQ6IEpRdWVyeS5FdmVudCwgZGF0YT86IEZyYW1ld29yay5TaG93RXZlbnREYXRhKTogdm9pZCB7XHJcbiAgICAgICAgICAgIC8vIE92ZXJyaWRlXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBqUU0gZXZlbnQ6IFwicGFnZWNvbnRhaW5lcnNob3dcIiAo5penOlwicGFnZXNob3dcIikg44Gr5a++5b+cXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gZXZlbnQge0pRdWVyeS5FdmVudH0gW2luXSDjgqTjg5njg7Pjg4jjgqrjg5bjgrjjgqfjgq/jg4hcclxuICAgICAgICAgKiBAcGFyYW0gZGF0YSAge1Nob3dFdmVudERhdGF9ICAgICBbaW5dIOS7mOWKoOaDheWgsVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIG9uUGFnZVNob3coZXZlbnQ6IEpRdWVyeS5FdmVudCwgZGF0YT86IEZyYW1ld29yay5TaG93RXZlbnREYXRhKTogdm9pZCB7XHJcbiAgICAgICAgICAgIC8vIE92ZXJyaWRlXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBqUU0gZXZlbnQ6IFwicGFnZWJlZm9yZWhpZGVcIiDjgavlr77lv5xcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBldmVudCB7SlF1ZXJ5LkV2ZW50fSBbaW5dIOOCpOODmeODs+ODiOOCquODluOCuOOCp+OCr+ODiFxyXG4gICAgICAgICAqIEBwYXJhbSBkYXRhICB7SGlkZUV2ZW50RGF0YX0gICAgIFtpbl0g5LuY5Yqg5oOF5aCxXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgb25QYWdlQmVmb3JlSGlkZShldmVudDogSlF1ZXJ5LkV2ZW50LCBkYXRhPzogRnJhbWV3b3JrLkhpZGVFdmVudERhdGEpOiB2b2lkIHtcclxuICAgICAgICAgICAgLy8gT3ZlcnJpZGVcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIGpRTSBldmVudDogXCJwYWdlY29udGFpbmVyaGlkZVwiICjml6c6XCJwYWdlaGlkZVwiKSDjgavlr77lv5xcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBldmVudCB7SlF1ZXJ5LkV2ZW50fSBbaW5dIOOCpOODmeODs+ODiOOCquODluOCuOOCp+OCr+ODiFxyXG4gICAgICAgICAqIEBwYXJhbSBkYXRhICB7SGlkZUV2ZW50RGF0YX0gICAgIFtpbl0g5LuY5Yqg5oOF5aCxXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgb25QYWdlSGlkZShldmVudDogSlF1ZXJ5LkV2ZW50LCBkYXRhPzogRnJhbWV3b3JrLkhpZGVFdmVudERhdGEpOiB2b2lkIHtcclxuICAgICAgICAgICAgLy8gT3ZlcnJpZGVcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIGpRTSBldmVudDogXCJwYWdlcmVtb3ZlXCIg44Gr5a++5b+cXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gZXZlbnQge0pRdWVyeS5FdmVudH0gW2luXSDjgqTjg5njg7Pjg4jjgqrjg5bjgrjjgqfjgq/jg4hcclxuICAgICAgICAgKi9cclxuICAgICAgICBvblBhZ2VSZW1vdmUoZXZlbnQ6IEpRdWVyeS5FdmVudCk6IHZvaWQge1xyXG4gICAgICAgICAgICB0aGlzLnN0b3BMaXN0ZW5pbmcoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiLy8gZm9yIG5vbiBmbGlwc25hcCB1c2VyLlxyXG5pbnRlcmZhY2UgSUZsaXBzbmFwIHtcclxuICAgIFt4OiBzdHJpbmddOiBhbnk7XHJcbn1cclxuaW50ZXJmYWNlIEZsaXBzbmFwT3B0aW9ucyB7XHJcbn1cclxuXHJcbm5hbWVzcGFjZSBDRFAuVUkge1xyXG5cclxuICAgIGltcG9ydCBNb2RlbCAgICAgICAgICAgICAgICAgICAgICAgID0gRnJhbWV3b3JrLk1vZGVsO1xyXG4gICAgaW1wb3J0IElPcmllbnRhdGlvbkNoYW5nZWRMaXN0ZW5lciAgPSBGcmFtZXdvcmsuSU9yaWVudGF0aW9uQ2hhbmdlZExpc3RlbmVyO1xyXG4gICAgaW1wb3J0IE9yaWVudGF0aW9uICAgICAgICAgICAgICAgICAgPSBGcmFtZXdvcmsuT3JpZW50YXRpb247XHJcblxyXG4gICAgY29uc3QgVEFHID0gXCJbQ0RQLlVJLlRhYkhvc3RWaWV3XSBcIjtcclxuXHJcbiAgICBuYW1lc3BhY2UgX0NvbmZpZyB7XHJcbiAgICAgICAgZXhwb3J0IGNvbnN0IFRBQlZJRVdfQ0xBU1MgPSBcInVpLXRhYnZpZXdcIjtcclxuICAgICAgICBleHBvcnQgY29uc3QgVEFCVklFV19TRUxFQ1RPUiA9IFwiLlwiICsgVEFCVklFV19DTEFTUztcclxuICAgICAgICBleHBvcnQgY29uc3QgVEFCSE9TVF9DTEFTUyA9IFwidWktdGFiaG9zdFwiO1xyXG4gICAgICAgIGV4cG9ydCBjb25zdCBUQUJIT1NUX1NFTEVDVE9SID0gXCIuXCIgKyBUQUJIT1NUX0NMQVNTO1xyXG4gICAgICAgIGV4cG9ydCBjb25zdCBUQUJIT1NUX1JFRlJFU0hfQ09FRkYgPSAxLjA7ICAgICAgIC8vIGZsaXBzbmFwIOWIh+OCiuabv+OBiOaZguOBqyBkdXJhdGlvbiDjgavlr77jgZfjgabmm7TmlrDjgpLooYzjgYbkv4LmlbBcclxuICAgICAgICBleHBvcnQgY29uc3QgVEFCSE9TVF9SRUZSRVNIX0lOVEVSVkFMID0gMjAwOyAgICAvLyBmbGlwc25hcCDjga7mm7TmlrDjgavkvb/nlKjjgZnjgovplpPpmpQgW21zZWNdXHJcbiAgICB9XHJcblxyXG4gICAgLy9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fLy9cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBpbnRlcmZhY2UgSVRhYlZpZXdcclxuICAgICAqIEBicmllZiBUYWJIb3N0VmlldyDjgavjgqLjgr/jg4Pjg4Hlj6/og73jgaogVmlldyDjgqTjg7Pjgr/jg7zjg5XjgqfjgqTjgrlcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBJVGFiVmlldyBleHRlbmRzIElMaXN0VmlldywgSU9yaWVudGF0aW9uQ2hhbmdlZExpc3RlbmVyIHtcclxuICAgICAgICBob3N0OiBUYWJIb3N0VmlldzsgICAgICAvLyBob3N0IOOBq+OCouOCr+OCu+OCuVxyXG4gICAgICAgICRlbDogSlF1ZXJ5OyAgICAgICAgICAgIC8vIOeuoeeQhiBET00g44Gr44Ki44Kv44K744K5XHJcbiAgICAgICAgbmVlZFJlYnVpbGQ/OiBib29sZWFuOyAgLy8gcmVidWlsZCDnirbmhYvjgavjgqLjgq/jgrvjgrlcclxuXHJcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgICAgICAvLyBwdWJsaWMgbWV0aG9kczogRnJhbWV3b3JrXHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOeKtuaFi+OBq+W/nOOBmOOBn+OCueOCr+ODreODvOODq+S9jee9ruOBruS/neWtmC/lvqnlhYNcclxuICAgICAgICAgKiBCcm93c2VyIOOBriBOYXRpdmUgU2Nyb2xsIOaZguOBq+OCs+ODvOODq+OBleOCjOOCi1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRyZWF0U2Nyb2xsUG9zaXRpb24oKTogdm9pZDtcclxuXHJcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgICAgICAvLyBwdWJsaWMgbWV0aG9kczogRXZlbnRcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogU2Nyb2xsZXIg44Gu5Yid5pyf5YyW5pmC44Gr44Kz44O844Or44GV44KM44KLXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgb25Jbml0aWFsaXplKGhvc3Q6IFRhYkhvc3RWaWV3LCAkcm9vdDogSlF1ZXJ5KTogdm9pZDtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogU2Nyb2xsZXIg44Gu56C05qOE5pmC44Gr44Kz44O844Or44GV44KM44KLXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgb25EZXN0cm95KCk6IHZvaWQ7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIHZpc2liaWxpdHkg5bGe5oCn44GM5aSJ5pu044GV44KM44Gf44Go44GN44Gr44Kz44O844Or44GV44KM44KLXHJcbiAgICAgICAgICogYWN0aXZlIOODmuODvOOCuOOBqOOBneOBruS4oeerr+OBruODmuODvOOCuOOBjOWvvuixoVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHZpc2libGUgW2luXSB0cnVlOiDooajnpLogLyBmYWxzZTog6Z2e6KGo56S6XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgb25WaXNpYmlsaXR5Q2hhbmdlZCh2aXNpYmxlOiBib29sZWFuKTogdm9pZDtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog44Oa44O844K444GM6KGo56S65a6M5LqG44GX44Gf44Go44GN44Gr44Kz44O844Or44GV44KM44KLXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgb25UYWJTZWxlY3RlZCgpOiB2b2lkO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDjg5rjg7zjgrjjgYzpnZ7ooajnpLrjgavliIfjgormm7/jgo/jgaPjgZ/jgajjgY3jgavjgrPjg7zjg6vjgZXjgozjgotcclxuICAgICAgICAgKi9cclxuICAgICAgICBvblRhYlJlbGVhc2VkKCk6IHZvaWQ7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOODieODqeODg+OCsOS4reOBq+OCs+ODvOODq+OBleOCjOOCi1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHBvc2l0aW9uIFtpbl0g54++5Zyo44GuIHRhYiBpbmRleFxyXG4gICAgICAgICAqIEBwYXJhbSBvZmZzZXQgICBbaW5dIOenu+WLlemHj1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIG9uVGFiU2Nyb2xsaW5nKHBvc2l0aW9uOiBudW1iZXIsIG9mZnNldDogbnVtYmVyKTogdm9pZDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBpbnRlcmZhY2UgVGFiVmlld0NvbnRleHRPcHRpb25zXHJcbiAgICAgKiBAYnJpZWYgVGFiVmlld0NvbnRleHQg44Gr5oyH5a6a44GZ44KL44Kq44OX44K344On44OzXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgVGFiVmlld0NvbnRleHRPcHRpb25zPFRNb2RlbCBleHRlbmRzIE1vZGVsID0gTW9kZWw+IGV4dGVuZHMgTGlzdFZpZXdDb25zdHJ1Y3RPcHRpb25zPFRNb2RlbD4ge1xyXG4gICAgICAgIGRlbGF5UmVnaXN0ZXI/OiBib29sZWFuOyAgICAvLyDpgYXlu7bnmbvpjLLjgpLooYzjgYbloLTlkIjjga8gdHJ1ZVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGludGVyZmFjZSBUYWJWaWV3Q29uc3RydWN0aW9uT3B0aW9uc1xyXG4gICAgICogQGJyaWVmIFRhYlZpZXcg44Gu44Kq44OX44K344On44OzXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgVGFiVmlld0NvbnN0cnVjdGlvbk9wdGlvbnM8VE1vZGVsIGV4dGVuZHMgTW9kZWwgPSBNb2RlbD4gZXh0ZW5kcyBUYWJWaWV3Q29udGV4dE9wdGlvbnM8VE1vZGVsPiB7XHJcbiAgICAgICAgaG9zdDogVGFiSG9zdFZpZXc7ICAvLyBob3N0IOOCkuaMh+WumlxyXG4gICAgfVxyXG5cclxuICAgIC8vX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXy8vXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAaW50ZXJmYWNlIFRhYlZpZXdDb250ZXh0XHJcbiAgICAgKiBAYnJpZWYgSVRhYlZpZXcg44KS5Yid5pyf5YyW44GZ44KL44Gf44KB44Gu5oOF5aCx44KS5qC857SNXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgVGFiVmlld0NvbnRleHQ8VE1vZGVsIGV4dGVuZHMgTW9kZWwgPSBNb2RlbD4ge1xyXG4gICAgICAgIGN0b3I/OiBuZXcgKG9wdGlvbnM/OiBUYWJWaWV3Q29uc3RydWN0aW9uT3B0aW9uczxUTW9kZWw+KSA9PiBJVGFiVmlldzsgIC8vIElUYWJWaWV3IOOBruOCs+ODs+OCueODiOODqeOCr+OCv1xyXG4gICAgICAgIG9wdGlvbnM/OiBUYWJWaWV3Q29udGV4dE9wdGlvbnM8VE1vZGVsPjsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOani+evieaZguOBruWfuuW6leOCquODl+OCt+ODp+ODs1xyXG4gICAgfVxyXG5cclxuICAgIC8vX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXy8vXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAaW50ZXJmYWNlIFRhYkhvc3RWaWV3Q29uc3RydWN0T3B0aW9uc1xyXG4gICAgICogQGJyaWVmIFRhYkhvc3RWaWV3IOOBruWIneacn+WMluaDheWgseOCkuagvOe0jeOBmeOCi+OCpOODs+OCv+ODvOODleOCp+OCpOOCueOCr+ODqeOCuVxyXG4gICAgICovXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIFRhYkhvc3RWaWV3Q29uc3RydWN0T3B0aW9uczxUTW9kZWwgZXh0ZW5kcyBNb2RlbCA9IE1vZGVsPiBleHRlbmRzIFBhZ2VDb250YWluZXJWaWV3T3B0aW9uczxUTW9kZWw+LCBGbGlwc25hcE9wdGlvbnMge1xyXG4gICAgICAgIGluYWN0aXZlVmlzaWJsZVRhYkRpc3RhbmNlPzogbnVtYmVyOyAgICAvLyDpnZ7pgbjmip7mmYLjga4gdmlzaWJsZSDjgr/jg5bmlbAgZXgpIDE6IOS4oeOCteOCpOODiVxyXG4gICAgICAgIHRhYkNvbnRleHRzPzogVGFiVmlld0NvbnRleHRbXTsgICAgICAgICAvLyBUYWJWaWV3Q29udGV4dCDjga7phY3liJdcclxuICAgICAgICBlbmFibGVCb3VuY2U/OiBib29sZWFuOyAgICAgICAgICAgICAgICAgLy8g57WC56uv44GnIGJvdW5jZSDjgZnjgovloLTlkIjjgavjga8gdHJ1ZVxyXG4gICAgICAgIGluaXRpYWxXaWR0aD86IG51bWJlcjsgICAgICAgICAgICAgICAgICAvLyB3aWR0aCDjga7liJ3mnJ/lgKRcclxuICAgICAgICBpbml0aWFsSGVpZ2h0PzogbnVtYmVyOyAgICAgICAgICAgICAgICAgLy8gaGVpZ2h0IOOBruWIneacn+WApFxyXG4gICAgICAgIGluaXRJbW1lZGlhdGU/OiBib29sZWFuOyAgICAgICAgICAgICAgICAvLyDjgrPjg7Pjgrnjg4jjg6njgq/jgr/jgacgVGFiVmlldyDjgpLliJ3mnJ/ljJbjgZnjgovloLTlkIggdHJ1ZVxyXG4gICAgfVxyXG5cclxuICAgIC8vX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXy8vXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAY2xhc3MgVGFiSG9zdFZpZXdcclxuICAgICAqIEBicmllZiDjgr/jg5bliIfjgormm7/jgYjmqZ/og73jgpLmjIHjgaQgVmlldyDjgq/jg6njgrlcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGNsYXNzIFRhYkhvc3RWaWV3PFRNb2RlbCBleHRlbmRzIE1vZGVsID0gTW9kZWw+IGV4dGVuZHMgUGFnZUNvbnRhaW5lclZpZXc8VE1vZGVsPiBpbXBsZW1lbnRzIElPcmllbnRhdGlvbkNoYW5nZWRMaXN0ZW5lciB7XHJcblxyXG4gICAgICAgIHByaXZhdGUgX3RhYnM6IElUYWJWaWV3W10gPSBbXTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIElUYWJWaWV3IOOCkuagvOe0jVxyXG5cclxuICAgICAgICBwcml2YXRlIF9hY3RpdmVUYWJJbmRleDogbnVtYmVyID0gMDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhY3RpdmUgdGFiXHJcbiAgICAgICAgcHJpdmF0ZSBfZmxpcHNuYXA6IElGbGlwc25hcCA9IG51bGw7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZmxpcHNuYXAg44Kq44OW44K444Kn44Kv44OIXHJcbiAgICAgICAgcHJpdmF0ZSBfZmxpcEVuZEV2ZW50SGFuZGxlcjogKGV2ZW50OiBKUXVlcnkuRXZlbnQpID0+IHZvaWQgPSBudWxsOyAgICAgLy8gXCJmc3RvdWNoZW5kXCJcclxuICAgICAgICBwcml2YXRlIF9mbGlwTW92ZUV2ZW50SGFuZGxlcjogKGV2ZW50OiBKUXVlcnkuRXZlbnQpID0+IHZvaWQgPSBudWxsOyAgICAvLyBcImZzdG91Y2htb3ZlXCJcclxuICAgICAgICBwcml2YXRlIF9mbGlwRGVsdGFDYWNoZTogbnVtYmVyID0gMDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBcImZsaXAg6Led6Zui44Gu44Kt44Oj44OD44K344OlXCJcclxuICAgICAgICBwcml2YXRlIF9zY3JvbGxFbmRFdmVudEhhbmRsZXI6IChldmVudDogSlF1ZXJ5LkV2ZW50KSA9PiB2b2lkID0gbnVsbDsgICAvLyB0YWJ2aWV3IFwic2Nyb2xsc3RvcFwiXHJcbiAgICAgICAgcHJpdmF0ZSBfc2Nyb2xsTW92ZUV2ZW50SGFuZGxlcjogKGV2ZW50OiBKUXVlcnkuRXZlbnQpID0+IHZvaWQgPSBudWxsOyAgLy8gdGFidmlldyBcInNjcm9sbFwiXHJcbiAgICAgICAgcHJpdmF0ZSBfcmVmcmVzaFRpbWVySWQ6IG51bWJlciA9IG51bGw7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVmcmVzaCgpIOWPjeaYoOeiuuiqjeeUqFxyXG4gICAgICAgIHByaXZhdGUgX3NldHRpbmdzOiBUYWJIb3N0Vmlld0NvbnN0cnVjdE9wdGlvbnM8VE1vZGVsPjsgICAgICAgICAgICAgICAgIC8vIFRhYkhvc3RWaWV3IOioreWumuWApFxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIEVWRU5UX1NDUk9MTF9NT1ZFID0gXCJ0YWJob3N0OnNjcm9sbG1vdmVcIjtcclxuICAgICAgICBwdWJsaWMgc3RhdGljIEVWRU5UX1NDUk9MTF9TVE9QID0gXCJ0YWJob3N0OnNjcm9sbHN0b3BcIjtcclxuICAgICAgICBwdWJsaWMgc3RhdGljIEVWRU5UX1RBQl9NT1ZFICAgID0gXCJ0YWJob3N0OnRhYm1vdmVcIjtcclxuICAgICAgICBwdWJsaWMgc3RhdGljIEVWRU5UX1RBQl9TVE9QICAgID0gXCJ0YWJob3N0OnRhdnN0b3BcIjtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogY29uc3RydWN0b3JcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBvcHRpb25zIFtpbl0g44Kq44OX44K344On44OzXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgY29uc3RydWN0b3Iob3B0aW9uczogVGFiSG9zdFZpZXdDb25zdHJ1Y3RPcHRpb25zPFRNb2RlbD4pIHtcclxuICAgICAgICAgICAgc3VwZXIob3B0aW9ucyk7XHJcblxyXG4gICAgICAgICAgICAvLyBjaGVjayBydW50aW1lIGNvbmRpdGlvblxyXG4gICAgICAgICAgICBpZiAobnVsbCA9PSBnbG9iYWwuRmxpcHNuYXApIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoVEFHICsgXCJmbGlwc25hcCBtb2R1bGUgZG9lc24ndCBsb2FkLlwiKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5fc2V0dGluZ3MgPSAkLmV4dGVuZCh7XHJcbiAgICAgICAgICAgICAgICB0YWJDb250ZXh0czogW10sXHJcbiAgICAgICAgICAgICAgICB0YWJNb3ZlSGFuZGxlcjogKGRlbHRhOiBudW1iZXIpOiB2b2lkID0+IHsgLyogbm9vcCAqLyB9LFxyXG4gICAgICAgICAgICAgICAgdGFiU3RvcEhhbmRsZXI6IChuZXdJbmRleDogbnVtYmVyLCBtb3ZlZDogYm9vbGVhbik6IHZvaWQgPT4geyAvKiBub29wICovIH1cclxuICAgICAgICAgICAgfSwgb3B0aW9ucyk7XHJcblxyXG4gICAgICAgICAgICAvLyBzZXR1cCBldmVudCBoYW5kbGVyc1xyXG4gICAgICAgICAgICB0aGlzLl9mbGlwRW5kRXZlbnRIYW5kbGVyID0gKGV2ZW50OiBKUXVlcnkuRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGZzRXZlbnQ6IGFueSA9IGV2ZW50Lm9yaWdpbmFsRXZlbnQ7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9mbGlwRGVsdGFDYWNoZSA9IDA7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uVGFiQ2hhbmdlZChmc0V2ZW50Lm5ld1BvaW50LCBmc0V2ZW50Lm1vdmVkKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX2ZsaXBNb3ZlRXZlbnRIYW5kbGVyID0gKGV2ZW50OiBKUXVlcnkuRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGZzRXZlbnQ6IGFueSA9IGV2ZW50Lm9yaWdpbmFsRXZlbnQ7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9mbGlwRGVsdGFDYWNoZSArPSBmc0V2ZW50LmRlbHRhO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIGJvdW5jZSDjga7jgqzjg7zjg4lcclxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5fc2V0dGluZ3MuZW5hYmxlQm91bmNlICYmIChcclxuICAgICAgICAgICAgICAgICAgICAoLTEgPT09IGZzRXZlbnQuZGlyZWN0aW9uICYmIDAgPT09IHRoaXMuX2FjdGl2ZVRhYkluZGV4ICYmIDAgPCB0aGlzLl9mbGlwRGVsdGFDYWNoZSkgfHxcclxuICAgICAgICAgICAgICAgICAgICAoMSA9PT0gZnNFdmVudC5kaXJlY3Rpb24gJiYgdGhpcy5fYWN0aXZlVGFiSW5kZXggPT09IHRoaXMuX3RhYnMubGVuZ3RoIC0gMSAmJiB0aGlzLl9mbGlwRGVsdGFDYWNoZSA8IDApXHJcbiAgICAgICAgICAgICAgICApKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9mbGlwc25hcC5tb3ZlVG9Qb2ludChmc0V2ZW50Lm5ld1BvaW50KTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vblRhYk1vdmluZyhmc0V2ZW50LmRlbHRhKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl90YWJzLmZvckVhY2goKHRhYnZpZXc6IElUYWJWaWV3KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhYnZpZXcub25UYWJTY3JvbGxpbmcodGhpcy5fYWN0aXZlVGFiSW5kZXgsIGZzRXZlbnQuZGVsdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJlcHJvY2Vzcyh0aGlzLl9hY3RpdmVUYWJJbmRleCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICB0aGlzLl9zY3JvbGxFbmRFdmVudEhhbmRsZXIgPSAoZXZlbnQ6IEpRdWVyeS5FdmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vblNjcm9sbFN0b3AoKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX3Njcm9sbE1vdmVFdmVudEhhbmRsZXIgPSAoZXZlbnQ6IEpRdWVyeS5FdmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vblNjcm9sbCgpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLy8gc2V0dXAgdGFic1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fc2V0dGluZ3MuaW5pdGlhbFdpZHRoKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLiRlbC53aWR0aCh0aGlzLl9zZXR0aW5ncy5pbml0aWFsV2lkdGgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9zZXR0aW5ncy5pbml0aWFsSGVpZ2h0KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLiRlbC5oZWlnaHQodGhpcy5fc2V0dGluZ3MuaW5pdGlhbEhlaWdodCk7XHJcblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnN0IGluaXRpYWxXaWR0aCAgPSB0aGlzLl9zZXR0aW5ncy5pbml0aWFsV2lkdGg7XHJcbiAgICAgICAgICAgIGNvbnN0IGluaXRpYWxIZWlnaHQgPSB0aGlzLiRlbC5oZWlnaHQoKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHRhYkNvbnRleHRzID0gdGhpcy5fc2V0dGluZ3MudGFiQ29udGV4dHMuc2xpY2UoKTtcclxuICAgICAgICAgICAgaWYgKDAgPCB0YWJDb250ZXh0cy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIHRhYkNvbnRleHRzLmZvckVhY2goKGNvbnRleHQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAvKiB0c2xpbnQ6ZGlzYWJsZTpuby11bnVzZWQtZXhwcmVzc2lvbiAqL1xyXG4gICAgICAgICAgICAgICAgICAgIG5ldyBjb250ZXh0LmN0b3IoJC5leHRlbmQoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbml0aWFsSGVpZ2h0OiBpbml0aWFsSGVpZ2h0LFxyXG4gICAgICAgICAgICAgICAgICAgIH0sIGNvbnRleHQub3B0aW9ucywgeyBob3N0OiB0aGlzLCBkZWxheVJlZ2lzdGVyOiBmYWxzZSB9KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgLyogdHNsaW50OmVuYWJsZTpuby11bnVzZWQtZXhwcmVzc2lvbiAqL1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBJVGFiVmlldyDjgqTjg7Pjgrnjgr/jg7PjgrnljJbopoHmsYJcclxuICAgICAgICAgICAgICAgIHRoaXMub25UYWJWaWV3U2V0dXBSZXF1ZXN0KGluaXRpYWxIZWlnaHQpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5fc2V0dGluZ3MuaW5pdEltbWVkaWF0ZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5pbml0aWFsaXplVGFiVmlld3MoKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gRmxpcHNuYXBcclxuICAgICAgICAgICAgdGhpcy5zZXRGbGlwc25hcENvbmRpdGlvbigkLmV4dGVuZCh7fSwge1xyXG4gICAgICAgICAgICAgICAgZGlzdGFuY2U6IGluaXRpYWxXaWR0aCxcclxuICAgICAgICAgICAgfSwgdGhpcy5fc2V0dGluZ3MpKTtcclxuICAgICAgICAgICAgdGhpcy5zZXRBY3RpdmVUYWIodGhpcy5fYWN0aXZlVGFiSW5kZXgsIDAsIHRydWUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog6YWN5LiL44GuIFRhYlZpZXcg44KS5Yid5pyf5YyWXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIGluaXRpYWxpemVUYWJWaWV3cygpOiB2b2lkIHtcclxuICAgICAgICAgICAgLy8gSVRhYlZpZXcg44GrICR0YWJIb3N0IOOCkuOCouOCteOCpOODs+OBmeOCi1xyXG4gICAgICAgICAgICAvLyBOT1RFOiDnj77lnKjjga8gRE9NIOOBrumghuW6j+OBr+WbuuWumlxyXG4gICAgICAgICAgICBjb25zdCAkdGFicyA9IHRoaXMuJGVsLmZpbmQoX0NvbmZpZy5UQUJWSUVXX1NFTEVDVE9SKTtcclxuICAgICAgICAgICAgdGhpcy5fdGFicy5mb3JFYWNoKCh0YWJ2aWV3OiBJVGFiVmlldywgaW5kZXgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRhYnZpZXcub25Jbml0aWFsaXplKHRoaXMsICQoJHRhYnNbaW5kZXhdKSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog56C05qOE44Gu44OY44Or44OR44O86Zai5pWwXHJcbiAgICAgICAgICog44Oh44Oz44OQ44O844Gu56C05qOE44Gu44K/44Kk44Of44Oz44Kw44KS5aSJ44GI44KL5aC05ZCI44CB5pys44Oh44K944OD44OJ44KS44Kz44O844Or44GZ44KLXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIGRlc3Ryb3koKTogdm9pZCB7XHJcbiAgICAgICAgICAgIHRoaXMucmVzZXRGbGlwc25hcENvbmRpdGlvbigpO1xyXG4gICAgICAgICAgICB0aGlzLl90YWJzLmZvckVhY2goKHRhYnZpZXc6IElUYWJWaWV3KSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0YWJ2aWV3Lm9uRGVzdHJveSgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGhpcy5fdGFicyA9IFtdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgICAgICAvLyBGcmFtZXdvcmsgbWV0aG9kczpcclxuXHJcbiAgICAgICAgLy8g44Oa44O844K444Gu5Z+65rqW5YCk44KS5Y+W5b6XXHJcbiAgICAgICAgcHVibGljIGdldEJhc2VIZWlnaHQoKTogbnVtYmVyIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuJGVsLmhlaWdodCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVGFiVmlldyDjgpLnmbvpjLJcclxuICAgICAgICAgKiBGcmFtZXdvcmsg44GM5L2/55SoXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gdGFidmlldyBbaW5dIElUYWJWaWV3IOOBruOCpOODs+OCueOCv+ODs+OCuVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyByZWdpc3RlclRhYlZpZXcodGFidmlldzogSVRhYlZpZXcpOiB2b2lkIHtcclxuICAgICAgICAgICAgaWYgKG51bGwgPT0gdGhpcy5nZXRUYWJJbmRleE9mKHRhYnZpZXcpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl90YWJzLnB1c2godGFidmlldyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oVEFHICsgXCJ0YWIgaW5zdGFuY2UgYWxyZWFkeSByZWdpc3RlcmVkLlwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVGFiVmlldyDjga4gVGFiIGluZGV4IOOCkuWPluW+l1xyXG4gICAgICAgICAqIEZyYW1ld29yayDjgYzkvb/nlKhcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB0YWJ2aWV3IFtpbl0gSVRhYlZpZXcg44Gu44Kk44Oz44K544K/44Oz44K5XHJcbiAgICAgICAgICogQHJldHVybiDmjIflrprjgqTjg7Pjgrnjgr/jg7Pjgrnjga7jgqTjg7Pjg4fjg4Pjgq/jgrlcclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgZ2V0VGFiSW5kZXhPZih0YWJ2aWV3OiBJVGFiVmlldyk6IG51bWJlciB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwLCBuID0gdGhpcy5fdGFicy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGlmICh0YWJ2aWV3ID09PSB0aGlzLl90YWJzW2ldKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyDjgr/jg5bjg53jgrjjgrfjg6fjg7Pjga7liJ3mnJ/ljJZcclxuICAgICAgICBwcm90ZWN0ZWQgcmVzZXRUYWJQb3NpdGlvbigpOiB2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy5fdGFicy5mb3JFYWNoKCh0YWJ2aWV3OiBJVGFiVmlldykgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGFidmlldy5zY3JvbGxUbygwLCBmYWxzZSwgMCk7XHJcbiAgICAgICAgICAgICAgICB0YWJ2aWV3LnJlZnJlc2goKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0QWN0aXZlVGFiKDAsIDAsIHRydWUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gSVRhYlZpZXcg6Kit5a6a44Oq44Kv44Ko44K544OI5pmC44Gr44Kz44O844Or44GV44KM44KLXHJcbiAgICAgICAgcHJvdGVjdGVkIG9uVGFiVmlld1NldHVwUmVxdWVzdChpbml0aWFsSGVpZ2h0OiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgICAgICAgLy8gb3ZlcnJpZGVcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAgICAgLy8gVGFiIGNvbnRyb2wgbWV0aG9kczpcclxuXHJcbiAgICAgICAgLy8g44Ki44Kv44OG44Kj44OWIFRhYiDjgpLoqK3lrppcclxuICAgICAgICBwdWJsaWMgc2V0QWN0aXZlVGFiKGluZGV4OiBudW1iZXIsIHRyYW5zaXRpb25EdXJhdGlvbj86IG51bWJlciwgaW5pdGlhbD86IGJvb2xlYW4pOiBib29sZWFuIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMudmFsaWRUYWIoaW5kZXgpICYmIChpbml0aWFsIHx8ICh0aGlzLl9hY3RpdmVUYWJJbmRleCAhPT0gaW5kZXgpKSkge1xyXG4gICAgICAgICAgICAgICAgLy8g6YG356e75YmN44GrIHNjcm9sbCDkvY3nva7jga4gdmlldyDjgpLmm7TmlrBcclxuICAgICAgICAgICAgICAgIHRoaXMucHJlcHJvY2VzcyhpbmRleCk7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgbGFzdEFjdGl2ZVRhYkluZGV4ID0gdGhpcy5fYWN0aXZlVGFiSW5kZXg7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9hY3RpdmVUYWJJbmRleCA9IGluZGV4O1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fZmxpcHNuYXAubW92ZVRvUG9pbnQodGhpcy5fYWN0aXZlVGFiSW5kZXgsIHRyYW5zaXRpb25EdXJhdGlvbik7XHJcblxyXG4gICAgICAgICAgICAgICAgey8vIOmBt+enu+W+jOOBqyBsaXN0dmlldyDjga7nirbmhYvjgpLlpInmm7RcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjaGFuZ2VUYWIgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucG9zdHByb2Nlc3MobGFzdEFjdGl2ZVRhYkluZGV4KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vblRhYkNoYW5nZWQodGhpcy5fYWN0aXZlVGFiSW5kZXgsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB0cmFuc2l0aW9uRHVyYXRpb24gPSB0cmFuc2l0aW9uRHVyYXRpb24gfHwgcGFyc2VJbnQodGhpcy5fZmxpcHNuYXAudHJhbnNpdGlvbkR1cmF0aW9uLCAxMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKDAgPT09IHRyYW5zaXRpb25EdXJhdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VUYWIoKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZVRhYigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCB0cmFuc2l0aW9uRHVyYXRpb24gKiBfQ29uZmlnLlRBQkhPU1RfUkVGUkVTSF9DT0VGRik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOOCv+ODluOBruaVsOOCkuWPluW+l1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybiB7TnVtYmVyfSDjgr/jg5bmlbBcclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgZ2V0VGFiQ291bnQoKTogbnVtYmVyIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3RhYnMubGVuZ3RoO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8g44Ki44Kv44OG44Kj44OW44Gq44K/44OWIEluZGV4IOOCkuWPluW+l1xyXG4gICAgICAgIHB1YmxpYyBnZXRBY3RpdmVUYWJJbmRleCgpOiBudW1iZXIge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fYWN0aXZlVGFiSW5kZXg7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBzd2lwZSDnp7vli5Xph4/jgpLlj5blvpcgKHN3aXBlIOS4reOBqyBkZWx0YSDjga7liqDnrpflgKTjgpLov5TljbQpXHJcbiAgICAgICAgcHVibGljIGdldFN3aXBlRGVsdGEoKTogbnVtYmVyIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2ZsaXBEZWx0YUNhY2hlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8g44K/44OW56e75YuV44Kk44OZ44Oz44OIXHJcbiAgICAgICAgcHJvdGVjdGVkIG9uVGFiTW92aW5nKGRlbHRhOiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy50cmlnZ2VyKFRhYkhvc3RWaWV3LkVWRU5UX1RBQl9NT1ZFLCBkZWx0YSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyDjgr/jg5blpInmm7TlrozkuobjgqTjg5njg7Pjg4hcclxuICAgICAgICBwcm90ZWN0ZWQgb25UYWJDaGFuZ2VkKG5ld0luZGV4OiBudW1iZXIsIG1vdmVkOiBib29sZWFuKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGlmIChtb3ZlZCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRBY3RpdmVUYWIobmV3SW5kZXgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMudHJpZ2dlcihUYWJIb3N0Vmlldy5FVkVOVF9UQUJfU1RPUCwgbmV3SW5kZXgsIG1vdmVkKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAgICAgLy8gU2Nyb2xsIGNvbnRyb2wgbWV0aG9kczpcclxuXHJcbiAgICAgICAgLy8g44K544Kv44Ot44O844Or5L2N572u44KS5Y+W5b6XXHJcbiAgICAgICAgZ2V0U2Nyb2xsUG9zKCk6IG51bWJlciB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9hY3RpdmVUYWJWaWV3KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fYWN0aXZlVGFiVmlldy5nZXRTY3JvbGxQb3MoKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyDjgrnjgq/jg63jg7zjg6vkvY3nva7jga7mnIDlpKflgKTjgpLlj5blvpdcclxuICAgICAgICBnZXRTY3JvbGxQb3NNYXgoKTogbnVtYmVyIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX2FjdGl2ZVRhYlZpZXcpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9hY3RpdmVUYWJWaWV3LmdldFNjcm9sbFBvc01heCgpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIOOCueOCr+ODreODvOODq+S9jee9ruOCkuaMh+WumlxyXG4gICAgICAgIHNjcm9sbFRvKHBvczogbnVtYmVyLCBhbmltYXRlPzogYm9vbGVhbiwgdGltZT86IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fYWN0aXZlVGFiVmlldykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fYWN0aXZlVGFiVmlldy5zY3JvbGxUbyhwb3MsIGFuaW1hdGUsIHRpbWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyDjgrnjgq/jg63jg7zjg6vjgqTjg5njg7Pjg4hcclxuICAgICAgICBwcm90ZWN0ZWQgb25TY3JvbGwoKTogdm9pZCB7XHJcbiAgICAgICAgICAgIHRoaXMudHJpZ2dlcihUYWJIb3N0Vmlldy5FVkVOVF9TQ1JPTExfTU9WRSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyDjgrnjgq/jg63jg7zjg6vlrozkuobjgqTjg5njg7Pjg4hcclxuICAgICAgICBwcm90ZWN0ZWQgb25TY3JvbGxTdG9wKCk6IHZvaWQge1xyXG4gICAgICAgICAgICB0aGlzLnRyaWdnZXIoVGFiSG9zdFZpZXcuRVZFTlRfU0NST0xMX1NUT1ApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8g44K544Kv44Ot44O844Or44Kk44OZ44Oz44OI44OP44Oz44OJ44Op6Kit5a6aL+ino+mZpFxyXG4gICAgICAgIHNldFNjcm9sbEhhbmRsZXIoaGFuZGxlcjogKGV2ZW50OiBKUXVlcnkuRXZlbnQpID0+IHZvaWQsIG9uOiBib29sZWFuKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9hY3RpdmVUYWJWaWV3KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9hY3RpdmVUYWJWaWV3LnNldFNjcm9sbEhhbmRsZXIoaGFuZGxlciwgb24pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyDjgrnjgq/jg63jg7zjg6vntYLkuobjgqTjg5njg7Pjg4jjg4/jg7Pjg4njg6noqK3lrpov6Kej6ZmkXHJcbiAgICAgICAgc2V0U2Nyb2xsU3RvcEhhbmRsZXIoaGFuZGxlcjogKGV2ZW50OiBKUXVlcnkuRXZlbnQpID0+IHZvaWQsIG9uOiBib29sZWFuKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9hY3RpdmVUYWJWaWV3KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9hY3RpdmVUYWJWaWV3LnNldFNjcm9sbFN0b3BIYW5kbGVyKGhhbmRsZXIsIG9uKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAgICAgLy8gSG9zdCBldmVudCBob29rczpcclxuXHJcbiAgICAgICAgLy8gT3JpZW50YXRpb24g44Gu5aSJ5pu05qSc55+lXHJcbiAgICAgICAgb25PcmllbnRhdGlvbkNoYW5nZWQobmV3T3JpZW50YXRpb246IE9yaWVudGF0aW9uKTogdm9pZCB7XHJcbiAgICAgICAgICAgIHN1cGVyLm9uT3JpZW50YXRpb25DaGFuZ2VkKG5ld09yaWVudGF0aW9uKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX3RhYnMuZm9yRWFjaCgodGFidmlldzogSVRhYlZpZXcpID0+IHtcclxuICAgICAgICAgICAgICAgIHRhYnZpZXcub25PcmllbnRhdGlvbkNoYW5nZWQobmV3T3JpZW50YXRpb24pO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGlmIChudWxsICE9IHRoaXMuX3JlZnJlc2hUaW1lcklkKSB7XHJcbiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5fcmVmcmVzaFRpbWVySWQpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5fZmxpcHNuYXAgJiYgMCA8IHRoaXMuX3RhYnMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBwcm9jID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIOODquODiOODqeOCpFxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9mbGlwc25hcCAmJiB0aGlzLl9mbGlwc25hcC5fbWF4UG9pbnQgIT09ICh0aGlzLl90YWJzLmxlbmd0aCAtIDEpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2ZsaXBzbmFwLnJlZnJlc2goKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fcmVmcmVzaFRpbWVySWQgPSBzZXRUaW1lb3V0KHByb2MsIF9Db25maWcuVEFCSE9TVF9SRUZSRVNIX0lOVEVSVkFMKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9yZWZyZXNoVGltZXJJZCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2ZsaXBzbmFwLnJlZnJlc2goKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3JlZnJlc2hUaW1lcklkID0gc2V0VGltZW91dChwcm9jLCBfQ29uZmlnLlRBQkhPU1RfUkVGUkVTSF9JTlRFUlZBTCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGpRTSBldmVudDogXCJwYWdlY29udGFpbmVyc2hvd1wiICjml6c6XCJwYWdlc2hvd1wiKSDjgavlr77lv5xcclxuICAgICAgICBvblBhZ2VTaG93KGV2ZW50OiBKUXVlcnkuRXZlbnQsIGRhdGE/OiBGcmFtZXdvcmsuU2hvd0V2ZW50RGF0YSk6IHZvaWQge1xyXG4gICAgICAgICAgICBzdXBlci5vblBhZ2VTaG93KGV2ZW50LCBkYXRhKTtcclxuICAgICAgICAgICAgdGhpcy5yZWJ1aWxkKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgICAgIC8vIEltcGxlbWVudHM6IFNjcm9sbE1hbmFnZXIgUHJvZmlsZSDnrqHnkIZcclxuXHJcbiAgICAgICAgLy8g44Oa44O844K444Ki44K144Kk44Oz44KS5YaN5qeL5oiQXHJcbiAgICAgICAgcmVidWlsZCgpOiB2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy5fdGFicy5mb3JFYWNoKCh0YWJ2aWV3OiBJVGFiVmlldykgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRhYnZpZXcubmVlZFJlYnVpbGQpIHtcclxuICAgICAgICAgICAgICAgICAgICB0YWJ2aWV3LnJlYnVpbGQoKTtcclxuICAgICAgICAgICAgICAgICAgICB0YWJ2aWV3Lm5lZWRSZWJ1aWxkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgICAgICAvLyBwcml2YXRlIG1ldGhvZHM6XHJcblxyXG4gICAgICAgIC8vIGZsaXBzbmFwIOeSsOWig+ioreWumlxyXG4gICAgICAgIHByaXZhdGUgc2V0RmxpcHNuYXBDb25kaXRpb24ob3B0aW9uczogRmxpcHNuYXBPcHRpb25zKTogdm9pZCB7XHJcbiAgICAgICAgICAgIHRoaXMuX2ZsaXBzbmFwID0gZ2xvYmFsLkZsaXBzbmFwKF9Db25maWcuVEFCSE9TVF9TRUxFQ1RPUiwgb3B0aW9ucyk7XHJcbiAgICAgICAgICAgICQodGhpcy5fZmxpcHNuYXAuZWxlbWVudCkub24oXCJmc3RvdWNoZW5kXCIsIHRoaXMuX2ZsaXBFbmRFdmVudEhhbmRsZXIuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgICAgICQodGhpcy5fZmxpcHNuYXAuZWxlbWVudCkub24oXCJmc3RvdWNobW92ZVwiLCB0aGlzLl9mbGlwTW92ZUV2ZW50SGFuZGxlci5iaW5kKHRoaXMpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGZsaXBzbmFwIOeSsOWig+egtOajhFxyXG4gICAgICAgIHByaXZhdGUgcmVzZXRGbGlwc25hcENvbmRpdGlvbigpOiB2b2lkIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX2ZsaXBzbmFwKSB7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMuX2ZsaXBzbmFwLmVsZW1lbnQpLm9mZihcImZzdG91Y2htb3ZlXCIsIHRoaXMuX2ZsaXBNb3ZlRXZlbnRIYW5kbGVyLmJpbmQodGhpcykpO1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzLl9mbGlwc25hcC5lbGVtZW50KS5vZmYoXCJmc3RvdWNoZW5kXCIsIHRoaXMuX2ZsaXBFbmRFdmVudEhhbmRsZXIuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9mbGlwc25hcC5kZXN0cm95KCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9mbGlwc25hcCA9IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5fZmxpcERlbHRhQ2FjaGUgPSAwO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gVGFiIOWIh+OCiuabv+OBiOOBruWJjeWHpueQhlxyXG4gICAgICAgIHByaXZhdGUgcHJlcHJvY2Vzcyh0b0luZGV4OiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy5fdGFicy5mb3JFYWNoKCh0YWJ2aWV3OiBJVGFiVmlldywgaW5kZXgpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChpbmRleCAhPT0gdGhpcy5fYWN0aXZlVGFiSW5kZXgpIHtcclxuICAgICAgICAgICAgICAgICAgICB0YWJ2aWV3LnRyZWF0U2Nyb2xsUG9zaXRpb24oKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIOenu+WLleevhOWbsuOCkuWPr+imluWMliBOT1RFOiBsb29wIOWvvuW/nOaZguOBq+adoeS7tuimi+ebtOOBl1xyXG4gICAgICAgICAgICAgICAgaWYgKCh0aGlzLl9hY3RpdmVUYWJJbmRleCA8IHRvSW5kZXggJiYgKHRoaXMuX2FjdGl2ZVRhYkluZGV4IDwgaW5kZXggJiYgaW5kZXggPD0gdG9JbmRleCkpIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgKHRvSW5kZXggPCB0aGlzLl9hY3RpdmVUYWJJbmRleCAmJiAodG9JbmRleCA8PSBpbmRleCAmJiBpbmRleCA8IHRoaXMuX2FjdGl2ZVRhYkluZGV4KSlcclxuICAgICAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRhYnZpZXcuJGVsLmNzcyhcInZpc2liaWxpdHlcIiwgXCJ2aXNpYmxlXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFRhYiDliIfjgormm7/jgYjjga7lvozlh6bnkIZcclxuICAgICAgICBwcml2YXRlIHBvc3Rwcm9jZXNzKGxhc3RBY3RpdmVUYWJJbmRleDogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgICAgICAgIHRoaXMuX3RhYnMuZm9yRWFjaCgodGFidmlldzogSVRhYlZpZXcsIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAobnVsbCAhPSB0aGlzLl9zZXR0aW5ncy5pbmFjdGl2ZVZpc2libGVUYWJEaXN0YW5jZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIE5PVEU6IGxvb3Ag5a++5b+c5pmC44Gr5p2h5Lu25a++5b+cXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGlzdGFuY2UgPSB0aGlzLl9zZXR0aW5ncy5pbmFjdGl2ZVZpc2libGVUYWJEaXN0YW5jZTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5fYWN0aXZlVGFiSW5kZXggLSBkaXN0YW5jZSA8PSBpbmRleCAmJiBpbmRleCA8PSB0aGlzLl9hY3RpdmVUYWJJbmRleCArIGRpc3RhbmNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhYnZpZXcuJGVsLmNzcyhcInZpc2liaWxpdHlcIiwgXCJ2aXNpYmxlXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWJ2aWV3Lm9uVmlzaWJpbGl0eUNoYW5nZWQodHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFidmlldy4kZWwuY3NzKFwidmlzaWJpbGl0eVwiLCBcImhpZGRlblwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFidmlldy5vblZpc2liaWxpdHlDaGFuZ2VkKGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoaW5kZXggPT09IHRoaXMuX2FjdGl2ZVRhYkluZGV4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGFidmlldy5vblRhYlNlbGVjdGVkKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGFidmlldy5zZXRTY3JvbGxIYW5kbGVyKHRoaXMuX3Njcm9sbE1vdmVFdmVudEhhbmRsZXIsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRhYnZpZXcuc2V0U2Nyb2xsU3RvcEhhbmRsZXIodGhpcy5fc2Nyb2xsRW5kRXZlbnRIYW5kbGVyLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaW5kZXggPT09IGxhc3RBY3RpdmVUYWJJbmRleCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRhYnZpZXcuc2V0U2Nyb2xsSGFuZGxlcih0aGlzLl9zY3JvbGxNb3ZlRXZlbnRIYW5kbGVyLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGFidmlldy5zZXRTY3JvbGxTdG9wSGFuZGxlcih0aGlzLl9zY3JvbGxFbmRFdmVudEhhbmRsZXIsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICB0YWJ2aWV3Lm9uVGFiUmVsZWFzZWQoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBUYWIgSW5kZXgg44KS5qSc6Ki8XHJcbiAgICAgICAgcHJpdmF0ZSB2YWxpZFRhYihpbmRleDogbnVtYmVyKTogYm9vbGVhbiB7XHJcbiAgICAgICAgICAgIGlmICgwID09PSB0aGlzLl90YWJzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKDAgPD0gaW5kZXggJiYgaW5kZXggPCB0aGlzLl90YWJzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFRBRyArIFwiaW52YWxpZCB0YWIgaW5kZXguIGluZGV4OiBcIiArIGluZGV4KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8g44Ki44Kv44OG44Kj44OW44Gq44K/44OWIFNjcm9sbE1hbmFnZXIg44KS5Y+W5b6XXHJcbiAgICAgICAgcHJpdmF0ZSBnZXQgX2FjdGl2ZVRhYlZpZXcoKTogSVRhYlZpZXcge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fdGFic1t0aGlzLl9hY3RpdmVUYWJJbmRleF07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIm5hbWVzcGFjZSBDRFAuVUkge1xyXG5cclxuICAgIGltcG9ydCBNb2RlbCA9IENEUC5GcmFtZXdvcmsuTW9kZWw7XHJcblxyXG4gICAgY29uc3QgVEFHID0gXCJbQ0RQLlVJLlRhYlZpZXddIFwiO1xyXG4gICAgY29uc3QgU1VQUFJFU1NfV0FSTklOR19JTklUSUFMX0hFSUdIVCA9IDE7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAY2xhc3MgVGFiVmlld1xyXG4gICAgICogQGJyaWVmIFRhYkhvc3RWaWV3IOOBq+OCouOCv+ODg+ODgeWPr+iDveOBqiBWaWV3IOOCr+ODqeOCuVxyXG4gICAgICovXHJcbiAgICBleHBvcnQgY2xhc3MgVGFiVmlldzxUTW9kZWwgZXh0ZW5kcyBNb2RlbCA9IE1vZGVsPiBleHRlbmRzIExpc3RWaWV3PFRNb2RlbD4gaW1wbGVtZW50cyBJVGFiVmlldyB7XHJcblxyXG4gICAgICAgIHByaXZhdGUgX2hvc3Q6IFRhYkhvc3RWaWV3ID0gbnVsbDtcclxuICAgICAgICBwcml2YXRlIF9uZWVkUmVidWlsZDogYm9vbGVhbiA9IGZhbHNlOyAgLy8g44Oa44O844K46KGo56S65pmC44GrIHJlYnVpbGQoKSDjgpLjgrPjg7zjg6vjgZnjgovjgZ/jgoHjga7lhoXpg6jlpInmlbBcclxuICAgICAgICBwcml2YXRlIF90YWJJbmRleDogbnVtYmVyOyAgICAgICAgICAgICAgLy8g6Ieq6Lqr44GuIFRhYiBJbmRleFxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBjb25zdHJ1Y3RvclxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgY29uc3RydWN0b3Iob3B0aW9uczogVGFiVmlld0NvbnN0cnVjdGlvbk9wdGlvbnM8VE1vZGVsPikge1xyXG4gICAgICAgICAgICBzdXBlcigkLmV4dGVuZCh7fSwgeyBpbml0aWFsSGVpZ2h0OiBTVVBQUkVTU19XQVJOSU5HX0lOSVRJQUxfSEVJR0hUIH0sIG9wdGlvbnMpKTtcclxuICAgICAgICAgICAgdGhpcy5faG9zdCA9IG9wdGlvbnMuaG9zdDtcclxuICAgICAgICAgICAgaWYgKCFvcHRpb25zLmRlbGF5UmVnaXN0ZXIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2hvc3QucmVnaXN0ZXJUYWJWaWV3KHRoaXMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgICAgIC8vIEltcGxlbWVudHM6IElWaWV3UGFnZXIgcHJvcGVydGllcy5cclxuXHJcbiAgICAgICAgLy8gQmFzZVRhYlBhZ2VWaWV3IOOBq+OCouOCr+OCu+OCuVxyXG4gICAgICAgIHB1YmxpYyBnZXQgaG9zdCgpOiBUYWJIb3N0VmlldyB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9ob3N0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gcmVidWlsZCDnirbmhYvjgbjjgqLjgq/jgrvjgrlcclxuICAgICAgICBwdWJsaWMgZ2V0IG5lZWRSZWJ1aWxkKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fbmVlZFJlYnVpbGQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyByZWJ1aWxkIOeKtuaFi+OCkuioreWumlxyXG4gICAgICAgIHB1YmxpYyBzZXQgbmVlZFJlYnVpbGQocmVidWlsZDogYm9vbGVhbikge1xyXG4gICAgICAgICAgICB0aGlzLl9uZWVkUmVidWlsZCA9IHJlYnVpbGQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgICAgIC8vIEltcGxlbWVudHM6IElWaWV3UGFnZXIgRnJhbWV3b3JrLlxyXG5cclxuICAgICAgICAvLyDnirbmhYvjgavlv5zjgZjjgZ/jgrnjgq/jg63jg7zjg6vkvY3nva7jga7kv53lrZgv5b6p5YWDXHJcbiAgICAgICAgdHJlYXRTY3JvbGxQb3NpdGlvbigpOiB2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy5jb3JlLnRyZWF0U2Nyb2xsUG9zaXRpb24oKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAgICAgLy8gSW1wbGVtZW50czogSVRhYlZpZXcgRXZlbnRzLlxyXG5cclxuICAgICAgICAvLyBTY3JvbGxlciDjga7liJ3mnJ/ljJbmmYLjgavjgrPjg7zjg6vjgZXjgozjgotcclxuICAgICAgICBvbkluaXRpYWxpemUoaG9zdDogVGFiSG9zdFZpZXcsICRyb290OiBKUXVlcnkpOiB2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy5faG9zdCA9IGhvc3Q7XHJcbiAgICAgICAgICAgIHRoaXMuY29yZS5pbml0aWFsaXplKCRyb290LCBob3N0LmdldEJhc2VIZWlnaHQoKSk7XHJcbiAgICAgICAgICAgIEJhY2tib25lLlZpZXcucHJvdG90eXBlLnNldEVsZW1lbnQuY2FsbCh0aGlzLCAkcm9vdCwgdHJ1ZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBTY3JvbGxlciDjga7noLTmo4TmmYLjgavjgrPjg7zjg6vjgZXjgozjgotcclxuICAgICAgICBvbkRlc3Ryb3koKTogdm9pZCB7XHJcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgIHRoaXMuX2hvc3QgPSBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gdmlzaWJpbGl0eSDlsZ7mgKfjgYzlpInmm7TjgZXjgozjgZ/jgajjgY3jgavjgrPjg7zjg6vjgZXjgozjgotcclxuICAgICAgICBvblZpc2liaWxpdHlDaGFuZ2VkKHZpc2libGU6IGJvb2xlYW4pOiB2b2lkIHtcclxuICAgICAgICAgICAgLy8gb3ZlcnJpZGVcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIOODmuODvOOCuOOBjOihqOekuuWujOS6huOBl+OBn+OBqOOBjeOBq+OCs+ODvOODq+OBleOCjOOCi1xyXG4gICAgICAgIG9uVGFiU2VsZWN0ZWQoKTogdm9pZCB7XHJcbiAgICAgICAgICAgIHRoaXMuY29yZS5zZXRBY3RpdmVTdGF0ZSh0cnVlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIOODmuODvOOCuOOBjOmdnuihqOekuuOBq+WIh+OCiuabv+OCj+OBo+OBn+OBqOOBjeOBq+OCs+ODvOODq+OBleOCjOOCi1xyXG4gICAgICAgIG9uVGFiUmVsZWFzZWQoKTogdm9pZCB7XHJcbiAgICAgICAgICAgIHRoaXMuY29yZS5zZXRBY3RpdmVTdGF0ZShmYWxzZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyDjg4njg6njg4PjgrDkuK3jgavjgrPjg7zjg6vjgZXjgozjgotcclxuICAgICAgICBvblRhYlNjcm9sbGluZyhwb3NpdGlvbjogbnVtYmVyLCBvZmZzZXQ6IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgICAgICAvLyBvdmVycmlkZVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgICAgICAvLyBJbXBsZW1lbnRzOiBJT3JpZW50YXRpb25DaGFuZ2VkTGlzdGVuZXIgZXZlbnRzLlxyXG5cclxuICAgICAgICAvLyBPcmllbnRhdGlvbiDjga7lpInmm7TjgpLlj5fkv6FcclxuICAgICAgICBvbk9yaWVudGF0aW9uQ2hhbmdlZChuZXdPcmllbnRhdGlvbjogRnJhbWV3b3JrLk9yaWVudGF0aW9uKTogdm9pZCB7XHJcbiAgICAgICAgICAgIC8vIG92ZXJyaWRlXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgICAgIC8vIE92ZXJyaWRlOiBJTGlzdFZpZXdcclxuXHJcbiAgICAgICAgLy8gY29yZSBmcmFtZXdvcmsgYWNjZXNzXHJcbiAgICAgICAgZ2V0IGNvcmUoKTogU2Nyb2xsTWFuYWdlciB7XHJcbiAgICAgICAgICAgIHJldHVybiAoPGFueT50aGlzKS5fc2Nyb2xsTWdyO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgICAgICAvLyBwcm90ZWN0ZWQgbWV0aG9kc1xyXG5cclxuICAgICAgICAvLyDoh6rouqvjga4gVGFiIEluZGV4IOOCkuWPluW+l1xyXG4gICAgICAgIHByb3RlY3RlZCBnZXQgdGFiSW5kZXgoKTogbnVtYmVyIHtcclxuICAgICAgICAgICAgaWYgKG51bGwgPT0gdGhpcy5fdGFiSW5kZXgpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3RhYkluZGV4ID0gdGhpcy5faG9zdC5nZXRUYWJJbmRleE9mKHRoaXMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl90YWJJbmRleDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIOiHqui6q+OBjCBhY3RpdmUg44GL5Yik5a6aXHJcbiAgICAgICAgcHJvdGVjdGVkIGlzQWN0aXZlKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy50YWJJbmRleCA9PT0gdGhpcy5faG9zdC5nZXRBY3RpdmVUYWJJbmRleCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCIvKiB0c2xpbnQ6ZGlzYWJsZTptYXgtbGluZS1sZW5ndGggKi9cclxuXHJcbm5hbWVzcGFjZSBDRFAuVUkge1xyXG5cclxuICAgIGltcG9ydCBNb2RlbCA9IENEUC5GcmFtZXdvcmsuTW9kZWw7XHJcblxyXG4gICAgY29uc3QgVEFHID0gXCJbQ0RQLlVJLlBhZ2VMaXN0Vmlld10gXCI7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAaW50ZXJmYWNlIFBhZ2VMaXN0Vmlld0NvbnN0cnVjdE9wdGlvbnNcclxuICAgICAqIEBicmllZiBQYWdlTGlzdFZpZXcg44G444Gu5Yid5pyf5YyW5oOF5aCx44KS5qC857SN44GZ44KL44Kk44Oz44K/44O844OV44Kn44Kk44K544Kv44Op44K5XHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgUGFnZUxpc3RWaWV3Q29uc3RydWN0T3B0aW9uczxUTW9kZWwgZXh0ZW5kcyBNb2RlbCA9IE1vZGVsPiBleHRlbmRzIExpc3RWaWV3T3B0aW9ucywgUGFnZVZpZXdDb25zdHJ1Y3RPcHRpb25zPFRNb2RlbD4ge1xyXG4gICAgICAgIGF1dG9EZXN0b3J5RWxlbWVudD86IGJvb2xlYW47ICAgICAgICAvLyE8IOODmuODvOOCuOmBt+enu+WJjeOBqyBMaXN0IEVsZW1lbnQg44KS56C05qOE44GZ44KL5aC05ZCI44GvIHRydWUg44KS5oyH5a6aXHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAY2xhc3MgUGFnZUxpc3RWaWV3XHJcbiAgICAgKiBAYnJpZWYg5Luu5oOz44Oq44K544OI44OT44Ol44O85qmf6IO944KS5oyB44GkIFBhZ2VWaWV3IOOCr+ODqeOCuVxyXG4gICAgICovXHJcbiAgICBleHBvcnQgY2xhc3MgUGFnZUxpc3RWaWV3PFRNb2RlbCBleHRlbmRzIE1vZGVsID0gTW9kZWw+IGV4dGVuZHMgUGFnZVZpZXc8VE1vZGVsPiBpbXBsZW1lbnRzIElMaXN0VmlldyB7XHJcblxyXG4gICAgICAgIHByaXZhdGUgX3Njcm9sbE1ncjogU2Nyb2xsTWFuYWdlciA9IG51bGw7ICAgIC8vITwgc2Nyb2xsIOOCs+OCouODreOCuOODg+OCr1xyXG4gICAgICAgIHByaXZhdGUgX25lZWRSZWJ1aWxkOiBib29sZWFuID0gZmFsc2U7ICAgICAgIC8vITwg44Oa44O844K46KGo56S65pmC44GrIHJlYnVpbGQoKSDjgpLjgrPjg7zjg6vjgZnjgovjgZ/jgoHjga7lhoXpg6jlpInmlbBcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogY29uc3RydWN0b3JcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB1cmwgICAgIHtTdHJpbmd9ICAgICAgICAgICAgICAgICAgICAgICBbaW5dIHBhZ2UgdGVtcGxhdGUg44Gr5L2/55So44GZ44KLIFVSTFxyXG4gICAgICAgICAqIEBwYXJhbSBpZCAgICAgIHtTdHJpbmd9ICAgICAgICAgICAgICAgICAgICAgICBbaW5dIHBhZ2Ug44Gr5oyv44KJ44KM44GfIElEXHJcbiAgICAgICAgICogQHBhcmFtIG9wdGlvbnMge1BhZ2VMaXN0Vmlld0NvbnN0cnVjdE9wdGlvbnN9IFtpbl0g44Kq44OX44K344On44OzXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgY29uc3RydWN0b3IodXJsOiBzdHJpbmcsIGlkOiBzdHJpbmcsIG9wdGlvbnM/OiBQYWdlTGlzdFZpZXdDb25zdHJ1Y3RPcHRpb25zPFRNb2RlbD4pIHtcclxuICAgICAgICAgICAgc3VwZXIodXJsLCBpZCwgJC5leHRlbmQoe30sIHtcclxuICAgICAgICAgICAgICAgIGF1dG9EZXN0b3J5RWxlbWVudDogZmFsc2UsXHJcbiAgICAgICAgICAgIH0sIG9wdGlvbnMpKTtcclxuICAgICAgICAgICAgdGhpcy5fc2Nyb2xsTWdyID0gbmV3IFNjcm9sbE1hbmFnZXIob3B0aW9ucyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEgcmVidWlsZCgpIOOBruOCueOCseOCuOODpeODvOODquODs+OCsFxyXG4gICAgICAgIHB1YmxpYyByZXNlcnZlUmVidWlsZCgpOiB2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy5fbmVlZFJlYnVpbGQgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgICAgICAvLyBPdmVycmlkZTogUGFnZVZpZXdcclxuXHJcbiAgICAgICAgLy8hIE9yaWVudGF0aW9uIOOBruWkieabtOaknOefpVxyXG4gICAgICAgIG9uT3JpZW50YXRpb25DaGFuZ2VkKG5ld09yaWVudGF0aW9uOiBGcmFtZXdvcmsuT3JpZW50YXRpb24pOiB2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy5fc2Nyb2xsTWdyLnNldEJhc2VIZWlnaHQodGhpcy5nZXRQYWdlQmFzZUhlaWdodCgpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDjg5rjg7zjgrjpgbfnp7vnm7TliY3jgqTjg5njg7Pjg4jlh6bnkIZcclxuICAgICAgICBvbkJlZm9yZVJvdXRlQ2hhbmdlKCk6IElQcm9taXNlQmFzZTxhbnk+IHtcclxuICAgICAgICAgICAgaWYgKCg8UGFnZUxpc3RWaWV3Q29uc3RydWN0T3B0aW9uczxUTW9kZWw+PnRoaXMuX3BhZ2VPcHRpb25zKS5hdXRvRGVzdG9yeUVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3Njcm9sbE1nci5kZXN0cm95KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHN1cGVyLm9uQmVmb3JlUm91dGVDaGFuZ2UoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISBqUU0gZXZlbnQ6IFwicGFnZWJlZm9yZXNob3dcIiDjgavlr77lv5xcclxuICAgICAgICBvblBhZ2VCZWZvcmVTaG93KGV2ZW50OiBKUXVlcnkuRXZlbnQsIGRhdGE/OiBGcmFtZXdvcmsuU2hvd0V2ZW50RGF0YSk6IHZvaWQge1xyXG4gICAgICAgICAgICBzdXBlci5vblBhZ2VCZWZvcmVTaG93KGV2ZW50LCBkYXRhKTtcclxuICAgICAgICAgICAgdGhpcy5fc2Nyb2xsTWdyLmluaXRpYWxpemUodGhpcy4kcGFnZSwgdGhpcy5nZXRQYWdlQmFzZUhlaWdodCgpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISBqUU0gZXZlbnQ6IFwicGFnZWNvbnRhaW5lcnNob3dcIiAo5penOlwicGFnZXNob3dcIikg44Gr5a++5b+cXHJcbiAgICAgICAgb25QYWdlU2hvdyhldmVudDogSlF1ZXJ5LkV2ZW50LCBkYXRhPzogRnJhbWV3b3JrLlNob3dFdmVudERhdGEpOiB2b2lkIHtcclxuICAgICAgICAgICAgc3VwZXIub25QYWdlU2hvdyhldmVudCwgZGF0YSk7XHJcbiAgICAgICAgICAgIHRoaXMuX3Njcm9sbE1nci5zZXRCYXNlSGVpZ2h0KHRoaXMuZ2V0UGFnZUJhc2VIZWlnaHQoKSk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9uZWVkUmVidWlsZCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZWJ1aWxkKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9uZWVkUmVidWlsZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEgalFNIGV2ZW50OiBcInBhZ2VyZW1vdmVcIiDjgavlr77lv5xcclxuICAgICAgICBvblBhZ2VSZW1vdmUoZXZlbnQ6IEpRdWVyeS5FdmVudCk6IHZvaWQge1xyXG4gICAgICAgICAgICBzdXBlci5vblBhZ2VSZW1vdmUoZXZlbnQpO1xyXG4gICAgICAgICAgICB0aGlzLnJlbGVhc2UoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAgICAgLy8gSW1wbGVtZW50czogSUxpc3RWaWV3IFByb2ZpbGUg566h55CGXHJcblxyXG4gICAgICAgIC8vISDliJ3mnJ/ljJbmuIjjgb/jgYvliKTlrppcclxuICAgICAgICBpc0luaXRpYWxpemVkKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fc2Nyb2xsTWdyLmlzSW5pdGlhbGl6ZWQoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDjg5fjg63jg5Hjg4bjgqPjgpLmjIflrprjgZfjgabjgIFMaXN0SXRlbSDjgpLnrqHnkIZcclxuICAgICAgICBhZGRJdGVtKFxyXG4gICAgICAgICAgICBoZWlnaHQ6IG51bWJlcixcclxuICAgICAgICAgICAgaW5pdGlhbGl6ZXI6IG5ldyAob3B0aW9ucz86IGFueSkgPT4gQmFzZUxpc3RJdGVtVmlldyxcclxuICAgICAgICAgICAgaW5mbzogYW55LFxyXG4gICAgICAgICAgICBpbnNlcnRUbz86IG51bWJlclxyXG4gICAgICAgICAgICApOiB2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy5fYWRkTGluZShuZXcgTGluZVByb2ZpbGUodGhpcy5fc2Nyb2xsTWdyLCBNYXRoLmZsb29yKGhlaWdodCksIGluaXRpYWxpemVyLCBpbmZvKSwgaW5zZXJ0VG8pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOaMh+WumuOBl+OBnyBJdGVtIOOCkuWJiumZpFxyXG4gICAgICAgIHJlbW92ZUl0ZW0oaW5kZXg6IG51bWJlciwgc2l6ZT86IG51bWJlciwgZGVsYXk/OiBudW1iZXIpOiB2b2lkO1xyXG4gICAgICAgIHJlbW92ZUl0ZW0oaW5kZXg6IG51bWJlcltdLCBkZWxheT86IG51bWJlcik6IHZvaWQ7XHJcbiAgICAgICAgcmVtb3ZlSXRlbShpbmRleDogYW55LCBhcmcyPzogbnVtYmVyLCBhcmczPzogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgICAgICAgIHRoaXMuX3Njcm9sbE1nci5yZW1vdmVJdGVtKGluZGV4LCBhcmcyLCBhcmczKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDmjIflrprjgZfjgZ8gSXRlbSDjgavoqK3lrprjgZfjgZ/mg4XloLHjgpLlj5blvpdcclxuICAgICAgICBnZXRJdGVtSW5mbyh0YXJnZXQ6IG51bWJlcik6IGFueTtcclxuICAgICAgICBnZXRJdGVtSW5mbyh0YXJnZXQ6IEpRdWVyeS5FdmVudCk6IGFueTtcclxuICAgICAgICBnZXRJdGVtSW5mbyh0YXJnZXQ6IGFueSk6IGFueSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9zY3JvbGxNZ3IuZ2V0SXRlbUluZm8odGFyZ2V0KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDjgqLjgq/jg4bjgqPjg5bjg5rjg7zjgrjjgpLmm7TmlrBcclxuICAgICAgICByZWZyZXNoKCk6IHZvaWQge1xyXG4gICAgICAgICAgICB0aGlzLl9zY3JvbGxNZ3IucmVmcmVzaCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOacquOCouOCteOCpOODs+ODmuODvOOCuOOCkuani+eviVxyXG4gICAgICAgIHVwZGF0ZSgpOiB2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy5fc2Nyb2xsTWdyLnVwZGF0ZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOODmuODvOOCuOOCouOCteOCpOODs+OCkuWGjeani+aIkFxyXG4gICAgICAgIHJlYnVpbGQoKTogdm9pZCB7XHJcbiAgICAgICAgICAgIHRoaXMuX3Njcm9sbE1nci5yZWJ1aWxkKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg566h6L2E44OH44O844K/44KS56C05qOEXHJcbiAgICAgICAgcmVsZWFzZSgpOiB2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy5fc2Nyb2xsTWdyLnJlbGVhc2UoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAgICAgLy8gSW1wbGVtZW50czogSUxpc3RWaWV3IFByb2ZpbGUgQmFja3VwIC8gUmVzdG9yZVxyXG5cclxuICAgICAgICAvLyEg5YaF6YOo44OH44O844K/44KS44OQ44OD44Kv44Ki44OD44OXXHJcbiAgICAgICAgYmFja3VwKGtleTogc3RyaW5nKTogYm9vbGVhbiB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9zY3JvbGxNZ3IuYmFja3VwKGtleSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg5YaF6YOo44OH44O844K/44KS44Oq44K544OI44KiXHJcbiAgICAgICAgcmVzdG9yZShrZXk6IHN0cmluZywgcmVidWlsZDogYm9vbGVhbiA9IHRydWUpOiBib29sZWFuIHtcclxuICAgICAgICAgICAgY29uc3QgcmV0dmFsID0gdGhpcy5fc2Nyb2xsTWdyLnJlc3RvcmUoa2V5LCByZWJ1aWxkKTtcclxuICAgICAgICAgICAgaWYgKHJldHZhbCAmJiAhcmVidWlsZCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZXNlcnZlUmVidWlsZCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiByZXR2YWw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg44OQ44OD44Kv44Ki44OD44OX44OH44O844K/44Gu5pyJ54ShXHJcbiAgICAgICAgaGFzQmFja3VwKGtleTogc3RyaW5nKTogYm9vbGVhbiB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9zY3JvbGxNZ3IuaGFzQmFja3VwKGtleSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg44OQ44OD44Kv44Ki44OD44OX44OH44O844K/44Gu56C05qOEXHJcbiAgICAgICAgY2xlYXJCYWNrdXAoa2V5Pzogc3RyaW5nKTogYm9vbGVhbiB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9zY3JvbGxNZ3IuY2xlYXJCYWNrdXAoa2V5KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDjg5Djg4Pjgq/jgqLjg4Pjg5fjg4fjg7zjgr/jgavjgqLjgq/jgrvjgrlcclxuICAgICAgICBnZXQgYmFja3VwRGF0YSgpOiBhbnkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fc2Nyb2xsTWdyLmJhY2t1cERhdGE7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgICAgIC8vIEltcGxlbWVudHM6IElMaXN0VmlldyBTY3JvbGxcclxuXHJcbiAgICAgICAgLy8hIOOCueOCr+ODreODvOODq+OCpOODmeODs+ODiOODj+ODs+ODieODqeioreWumi/op6PpmaRcclxuICAgICAgICBzZXRTY3JvbGxIYW5kbGVyKGhhbmRsZXI6IChldmVudDogSlF1ZXJ5LkV2ZW50KSA9PiB2b2lkLCBvbjogYm9vbGVhbik6IHZvaWQge1xyXG4gICAgICAgICAgICB0aGlzLl9zY3JvbGxNZ3Iuc2V0U2Nyb2xsSGFuZGxlcihoYW5kbGVyLCBvbik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg44K544Kv44Ot44O844Or57WC5LqG44Kk44OZ44Oz44OI44OP44Oz44OJ44Op6Kit5a6aL+ino+mZpFxyXG4gICAgICAgIHNldFNjcm9sbFN0b3BIYW5kbGVyKGhhbmRsZXI6IChldmVudDogSlF1ZXJ5LkV2ZW50KSA9PiB2b2lkLCBvbjogYm9vbGVhbik6IHZvaWQge1xyXG4gICAgICAgICAgICB0aGlzLl9zY3JvbGxNZ3Iuc2V0U2Nyb2xsU3RvcEhhbmRsZXIoaGFuZGxlciwgb24pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOOCueOCr+ODreODvOODq+S9jee9ruOCkuWPluW+l1xyXG4gICAgICAgIGdldFNjcm9sbFBvcygpOiBudW1iZXIge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fc2Nyb2xsTWdyLmdldFNjcm9sbFBvcygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOOCueOCr+ODreODvOODq+S9jee9ruOBruacgOWkp+WApOOCkuWPluW+l1xyXG4gICAgICAgIGdldFNjcm9sbFBvc01heCgpOiBudW1iZXIge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fc2Nyb2xsTWdyLmdldFNjcm9sbFBvc01heCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOOCueOCr+ODreODvOODq+S9jee9ruOCkuaMh+WumlxyXG4gICAgICAgIHNjcm9sbFRvKHBvczogbnVtYmVyLCBhbmltYXRlPzogYm9vbGVhbiwgdGltZT86IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgICAgICB0aGlzLl9zY3JvbGxNZ3Iuc2Nyb2xsVG8ocG9zLCBhbmltYXRlLCB0aW1lKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDmjIflrprjgZXjgozjgZ8gTGlzdEl0ZW1WaWV3IOOBruihqOekuuOCkuS/neiovFxyXG4gICAgICAgIGVuc3VyZVZpc2libGUoaW5kZXg6IG51bWJlciwgb3B0aW9ucz86IEVuc3VyZVZpc2libGVPcHRpb25zKTogdm9pZCB7XHJcbiAgICAgICAgICAgIHRoaXMuX3Njcm9sbE1nci5lbnN1cmVWaXNpYmxlKGluZGV4LCBvcHRpb25zKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAgICAgLy8gSW1wbGVtZW50czogSUxpc3RWaWV3IFByb3BlcnRpZXNcclxuXHJcbiAgICAgICAgLy8hIGNvcmUgZnJhbWV3b3JrIGFjY2Vzc1xyXG4gICAgICAgIGdldCBjb3JlKCk6IElMaXN0Vmlld0ZyYW1ld29yayB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9zY3JvbGxNZ3I7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgICAgIC8vIEltcGxlbWVudHM6IElMaXN0VmlldyBJbnRlcm5hbCBJL0ZcclxuXHJcbiAgICAgICAgLy8hIOeZu+mMsiBmcmFtZXdvcmsg44GM5L2/55So44GZ44KLXHJcbiAgICAgICAgX2FkZExpbmUoX2xpbmU6IGFueSwgaW5zZXJ0VG8/OiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy5fc2Nyb2xsTWdyLl9hZGRMaW5lKF9saW5lLCBpbnNlcnRUbyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgICAgIC8vIHByaXZhdGUgbWV0aG9kOlxyXG5cclxuICAgICAgICAvLyEg44Oa44O844K444Gu5Z+65rqW5YCk44KS5Y+W5b6XXHJcbiAgICAgICAgcHJpdmF0ZSBnZXRQYWdlQmFzZUhlaWdodCgpOiBudW1iZXIge1xyXG4gICAgICAgICAgICByZXR1cm4gJCh3aW5kb3cpLmhlaWdodCgpIC0gcGFyc2VJbnQodGhpcy4kcGFnZS5jc3MoXCJwYWRkaW5nLXRvcFwiKSwgMTApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJuYW1lc3BhY2UgQ0RQLlVJIHtcclxuXHJcbiAgICBpbXBvcnQgTW9kZWwgPSBDRFAuRnJhbWV3b3JrLk1vZGVsO1xyXG5cclxuICAgIGNvbnN0IFRBRyA9IFwiW0NEUC5VSS5QYWdlRXhwYW5kYWJsZUxpc3RWaWV3XSBcIjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBjbGFzcyBQYWdlRXhwYW5kYWJsZUxpc3RWaWV3XHJcbiAgICAgKiBAYnJpZWYg6ZaL6ZaJ44Oq44K544OI44OT44Ol44O85qmf6IO944KS5oyB44GkIFBhZ2VWaWV3IOOCr+ODqeOCuVxyXG4gICAgICovXHJcbiAgICBleHBvcnQgY2xhc3MgUGFnZUV4cGFuZGFibGVMaXN0VmlldzxUTW9kZWwgZXh0ZW5kcyBNb2RlbCA9IE1vZGVsPiBleHRlbmRzIFBhZ2VMaXN0VmlldzxUTW9kZWw+IGltcGxlbWVudHMgSUV4cGFuZGFibGVMaXN0VmlldyB7XHJcblxyXG4gICAgICAgIHByaXZhdGUgX2V4cGFuZE1hbmFnZXI6IEV4cGFuZE1hbmFnZXIgPSBudWxsO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBjb25zdHJ1Y3RvclxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHVybCAgICAge1N0cmluZ30gICAgICAgICAgICAgICAgICAgICAgIFtpbl0gcGFnZSB0ZW1wbGF0ZSDjgavkvb/nlKjjgZnjgosgVVJMXHJcbiAgICAgICAgICogQHBhcmFtIGlkICAgICAge1N0cmluZ30gICAgICAgICAgICAgICAgICAgICAgIFtpbl0gcGFnZSDjgavmjK/jgonjgozjgZ8gSURcclxuICAgICAgICAgKiBAcGFyYW0gb3B0aW9ucyB7UGFnZUxpc3RWaWV3Q29uc3RydWN0T3B0aW9uc30gW2luXSDjgqrjg5fjgrfjg6fjg7NcclxuICAgICAgICAgKi9cclxuICAgICAgICBjb25zdHJ1Y3Rvcih1cmw6IHN0cmluZywgaWQ6IHN0cmluZywgb3B0aW9ucz86IFBhZ2VMaXN0Vmlld0NvbnN0cnVjdE9wdGlvbnM8VE1vZGVsPikge1xyXG4gICAgICAgICAgICBzdXBlcih1cmwsIGlkLCBvcHRpb25zKTtcclxuICAgICAgICAgICAgdGhpcy5fZXhwYW5kTWFuYWdlciA9IG5ldyBFeHBhbmRNYW5hZ2VyKHRoaXMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgICAgICAvLyBJbXBsZW1lbnRzOiBJRXhwYW5kYWJsZUxpc3RWaWV3XHJcblxyXG4gICAgICAgIC8vISDmlrDopo8gR3JvdXBQcm9maWxlIOOCkuS9nOaIkFxyXG4gICAgICAgIG5ld0dyb3VwKGlkPzogc3RyaW5nKTogR3JvdXBQcm9maWxlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2V4cGFuZE1hbmFnZXIubmV3R3JvdXAoaWQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOeZu+mMsua4iOOBvyBHcm91cCDjgpLlj5blvpdcclxuICAgICAgICBnZXRHcm91cChpZDogc3RyaW5nKTogR3JvdXBQcm9maWxlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2V4cGFuZE1hbmFnZXIuZ2V0R3JvdXAoaWQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOesrDHpmo7lsaTjga4gR3JvdXAg55m76YyyXHJcbiAgICAgICAgcmVnaXN0ZXJUb3BHcm91cCh0b3BHcm91cDogR3JvdXBQcm9maWxlKTogdm9pZCB7XHJcbiAgICAgICAgICAgIHRoaXMuX2V4cGFuZE1hbmFnZXIucmVnaXN0ZXJUb3BHcm91cCh0b3BHcm91cCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg56ysMemajuWxpOOBriBHcm91cCDjgpLlj5blvpdcclxuICAgICAgICBnZXRUb3BHcm91cHMoKTogR3JvdXBQcm9maWxlW10ge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZXhwYW5kTWFuYWdlci5nZXRUb3BHcm91cHMoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDjgZnjgbnjgabjga7jgrDjg6vjg7zjg5fjgpLlsZXplosgKDHpmo7lsaQpXHJcbiAgICAgICAgZXhwYW5kQWxsKCk6IHZvaWQge1xyXG4gICAgICAgICAgICB0aGlzLl9leHBhbmRNYW5hZ2VyLmV4cGFuZEFsbCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOOBmeOBueOBpuOBruOCsOODq+ODvOODl+OCkuWPjuadnyAoMemajuWxpClcclxuICAgICAgICBjb2xsYXBzZUFsbChkZWxheT86IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgICAgICB0aGlzLl9leHBhbmRNYW5hZ2VyLmNvbGxhcHNlQWxsKGRlbGF5KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDlsZXplovkuK3jgYvliKTlrppcclxuICAgICAgICBpc0V4cGFuZGluZygpOiBib29sZWFuIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2V4cGFuZE1hbmFnZXIuaXNFeHBhbmRpbmcoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDlj47mnZ/kuK3jgYvliKTlrppcclxuICAgICAgICBpc0NvbGxhcHNpbmcoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9leHBhbmRNYW5hZ2VyLmlzQ29sbGFwc2luZygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOmWi+mWieS4reOBi+WIpOWumlxyXG4gICAgICAgIGlzU3dpdGNoaW5nKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZXhwYW5kTWFuYWdlci5pc1N3aXRjaGluZygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIGxheW91dCBrZXkg44KS5Y+W5b6XXHJcbiAgICAgICAgZ2V0IGxheW91dEtleSgpOiBzdHJpbmcge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZXhwYW5kTWFuYWdlci5sYXlvdXRLZXk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEgbGF5b3V0IGtleSDjgpLoqK3lrppcclxuICAgICAgICBzZXQgbGF5b3V0S2V5KGtleTogc3RyaW5nKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2V4cGFuZE1hbmFnZXIubGF5b3V0S2V5ID0ga2V5O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgICAgICAvLyBPdmVycmlkZTogUGFnZUxpc3RWaWV3XHJcblxyXG4gICAgICAgIC8vISDjg4fjg7zjgr/jgpLnoLTmo4RcclxuICAgICAgICByZWxlYXNlKCk6IHZvaWQge1xyXG4gICAgICAgICAgICBzdXBlci5yZWxlYXNlKCk7XHJcbiAgICAgICAgICAgIHRoaXMuX2V4cGFuZE1hbmFnZXIucmVsZWFzZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOWGhemDqOODh+ODvOOCv+OCkuODkOODg+OCr+OCouODg+ODl1xyXG4gICAgICAgIGJhY2t1cChrZXk6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZXhwYW5kTWFuYWdlci5iYWNrdXAoa2V5KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDlhoXpg6jjg4fjg7zjgr/jgpLjg6rjgrnjg4jjgqJcclxuICAgICAgICByZXN0b3JlKGtleTogc3RyaW5nLCByZWJ1aWxkOiBib29sZWFuID0gdHJ1ZSk6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZXhwYW5kTWFuYWdlci5yZXN0b3JlKGtleSwgcmVidWlsZCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIi8qKlxyXG4gKiBqUXVlcnkgcGx1Z2luIGRlZmluaXRpb25cclxuICovXHJcbmludGVyZmFjZSBKUXVlcnkge1xyXG4gICAgcmlwcGxlKG9wdGlvbnM/OiBDRFAuVUkuRG9tRXh0ZW5zaW9uT3B0aW9ucyk6IEpRdWVyeTtcclxufVxyXG5cclxubmFtZXNwYWNlIENEUC5VSS5FeHRlbnNpb24ge1xyXG5cclxuICAgIGltcG9ydCBGcmFtZXdvcmsgPSBDRFAuRnJhbWV3b3JrO1xyXG5cclxuICAgIC8vIGpRdWVyeSBwbHVnaW5cclxuICAgICQuZm4ucmlwcGxlID0gZnVuY3Rpb24gKG9wdGlvbnM/OiBEb21FeHRlbnNpb25PcHRpb25zKTogSlF1ZXJ5IHtcclxuICAgICAgICBjb25zdCAkZWwgPSAkKHRoaXMpO1xyXG4gICAgICAgIGlmICgkZWwubGVuZ3RoIDw9IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuICRlbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuICRlbC5vbihGcmFtZXdvcmsuUGF0Y2guc192Y2xpY2tFdmVudCwgZnVuY3Rpb24gKGV2ZW50OiBKUXVlcnkuRXZlbnQpIHtcclxuICAgICAgICAgICAgY29uc3Qgc3VyZmFjZSA9ICQodGhpcyk7XHJcblxyXG4gICAgICAgICAgICAvLyBjcmVhdGUgc3VyZmFjZSBpZiBpdCBkb2Vzbid0IGV4aXN0XHJcbiAgICAgICAgICAgIGlmIChzdXJmYWNlLmZpbmQoXCIudWktcmlwcGxlLWlua1wiKS5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgICAgIHN1cmZhY2UucHJlcGVuZChcIjxkaXYgY2xhc3M9J3VpLXJpcHBsZS1pbmsnPjwvZGl2PlwiKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbGV0IGluayA9IHN1cmZhY2UuZmluZChcIi51aS1yaXBwbGUtaW5rXCIpO1xyXG5cclxuICAgICAgICAgICAgLy8gc3RvcCB0aGUgcHJldmlvdXMgYW5pbWF0aW9uXHJcbiAgICAgICAgICAgIGluay5yZW1vdmVDbGFzcyhcInVpLXJpcHBsZS1hbmltYXRlXCIpO1xyXG5cclxuICAgICAgICAgICAgLy8gaW5rIHNpemU6XHJcbiAgICAgICAgICAgIGlmICghaW5rLmhlaWdodCgpICYmICFpbmsud2lkdGgoKSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZCA9IE1hdGgubWF4KHN1cmZhY2Uub3V0ZXJXaWR0aCgpLCBzdXJmYWNlLm91dGVySGVpZ2h0KCkpO1xyXG4gICAgICAgICAgICAgICAgaW5rLmNzcyh7IGhlaWdodDogZCwgd2lkdGg6IGQgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHggPSBldmVudC5wYWdlWCAtIHN1cmZhY2Uub2Zmc2V0KCkubGVmdCAtIChpbmsud2lkdGgoKSAvIDIpO1xyXG4gICAgICAgICAgICBjb25zdCB5ID0gZXZlbnQucGFnZVkgLSBzdXJmYWNlLm9mZnNldCgpLnRvcCAtIChpbmsuaGVpZ2h0KCkgLyAyKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHJpcHBsZUNvbG9yID0gc3VyZmFjZS5kYXRhKFwicmlwcGxlLWNvbG9yXCIpO1xyXG5cclxuICAgICAgICAgICAgLy8gYW5pbWF0aW9uIGVuZCBoYW5kbGVyXHJcbiAgICAgICAgICAgIGNvbnN0IEFOSU1BVElPTl9FTkRfRVZFTlQgPSBcImFuaW1hdGlvbmVuZCB3ZWJraXRBbmltYXRpb25FbmRcIjtcclxuICAgICAgICAgICAgaW5rLm9uKEFOSU1BVElPTl9FTkRfRVZFTlQsIGZ1bmN0aW9uIChldjogSlF1ZXJ5LkV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICBpbmsub2ZmKCk7XHJcbiAgICAgICAgICAgICAgICBpbmsucmVtb3ZlQ2xhc3MoXCJ1aS1yaXBwbGUtYW5pbWF0ZVwiKTtcclxuICAgICAgICAgICAgICAgIGluayA9IG51bGw7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgLy8gc2V0IHRoZSBwb3NpdGlvbiBhbmQgYWRkIGNsYXNzIC5hbmltYXRlXHJcbiAgICAgICAgICAgIGluay5jc3Moe1xyXG4gICAgICAgICAgICAgICAgdG9wOiB5ICsgXCJweFwiLFxyXG4gICAgICAgICAgICAgICAgbGVmdDogeCArIFwicHhcIixcclxuICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IHJpcHBsZUNvbG9yXHJcbiAgICAgICAgICAgIH0pLmFkZENsYXNzKFwidWktcmlwcGxlLWFuaW1hdGVcIik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogTWF0ZXJpYWwgRGVzaWduIFJpcHBsZSDmi6HlvLVcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge2pRdWVyeX0gICAgICAgICAgICAgICR1aSAgICAgICBbaW5dIOaknOe0ouWvvuixoeOBriBqUXVlcnkg44Kq44OW44K444Kn44Kv44OIXHJcbiAgICAgKiBAcGFyYW0ge0RvbUV4dGVuc2lvbk9wdGlvbnN9IFtvcHRpb25zXSBbaW5dIOOCquODl+OCt+ODp+ODs1xyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBhcHBseURvbUV4dGVuc2lvbigkdWk6IEpRdWVyeSwgb3B0aW9ucz86IERvbUV4dGVuc2lvbk9wdGlvbnMpOiBKUXVlcnkge1xyXG4gICAgICAgIGNvbnN0IE5PX1JJUFBMRV9DTEFTUyA9IFtcclxuICAgICAgICAgICAgXCIudWktcmlwcGxlLW5vbmVcIixcclxuICAgICAgICAgICAgXCIudWktZmxpcHN3aXRjaC1vblwiLFxyXG4gICAgICAgICAgICBcIi51aS1zbGlkZXItaGFuZGxlXCIsXHJcbiAgICAgICAgICAgIFwiLnVpLWlucHV0LWNsZWFyXCIsXHJcbiAgICAgICAgXTtcclxuXHJcbiAgICAgICAgbGV0IHNlbGVjdG9yID0gXCIudWktYnRuXCI7XHJcbiAgICAgICAgaWYgKCR1aS5oYXNDbGFzcyhcInVpLXBhZ2VcIikpIHtcclxuICAgICAgICAgICAgc2VsZWN0b3IgPSBcIi51aS1jb250ZW50IC51aS1idG5cIjsgLy8gaGVhZGVyIOOBr+iHquWLlSByaXBwbGUg5YyW5a++6LGh5aSWXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkdWkuZmluZChzZWxlY3RvcilcclxuICAgICAgICAgICAgLmZpbHRlcigoaW5kZXgsIGVsZW0pID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0ICRlbGVtID0gJChlbGVtKTtcclxuICAgICAgICAgICAgICAgIGlmICgkZWxlbS5pcyhOT19SSVBQTEVfQ0xBU1Muam9pbihcIixcIikpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmFkZENsYXNzKFwidWktcmlwcGxlXCIpO1xyXG5cclxuICAgICAgICAvLyByaXBwbGlmeVxyXG4gICAgICAgICR1aS5maW5kKFwiLnVpLXJpcHBsZVwiKVxyXG4gICAgICAgICAgICAuZWFjaCgoaW5kZXg6IG51bWJlciwgZWxlbTogRWxlbWVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgJChlbGVtKS5yaXBwbGUob3B0aW9ucyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiAkdWk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8g55m76YyyXHJcbiAgICBFeHRlbnNpb25NYW5hZ2VyLnJlZ2lzdGVyRG9tRXh0ZW5zaW9uKGFwcGx5RG9tRXh0ZW5zaW9uKTtcclxufVxyXG4iLCIvKipcclxuICogalF1ZXJ5IHBsdWdpbiBkZWZpbml0aW9uXHJcbiAqL1xyXG5pbnRlcmZhY2UgSlF1ZXJ5IHtcclxuICAgIHNwaW5uZXIob3B0aW9ucz86IENEUC5VSS5Eb21FeHRlbnNpb25PcHRpb25zIHwgXCJyZWZyZXNoXCIpOiBKUXVlcnk7XHJcbn1cclxuXHJcbm5hbWVzcGFjZSBDRFAuVUkuRXh0ZW5zaW9uIHtcclxuXHJcbiAgICBpbXBvcnQgVGVtcGxhdGUgPSBDRFAuVG9vbHMuVGVtcGxhdGU7XHJcbiAgICBpbXBvcnQgSlNUICAgICAgPSBDRFAuVG9vbHMuSlNUO1xyXG5cclxuICAgIGxldCBfdGVtcGxhdGU6IEpTVDtcclxuXHJcbiAgICAvLyBqUXVlcnkgcGx1Z2luXHJcbiAgICAkLmZuLnNwaW5uZXIgPSBmdW5jdGlvbiAob3B0aW9ucz86IERvbUV4dGVuc2lvbk9wdGlvbnMgfCBcInJlZnJlc2hcIikge1xyXG4gICAgICAgIGlmIChcInN0cmluZ1wiID09PSB0eXBlb2Ygb3B0aW9ucykge1xyXG4gICAgICAgICAgICByZXR1cm4gcmVmcmVzaCgkKHRoaXMpKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gc3Bpbm5lcmlmeSgkKHRoaXMpLCBvcHRpb25zKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIGZ1bmN0aW9uIHNwaW5uZXJpZnkoJHRhcmdldDogSlF1ZXJ5LCBvcHRpb25zPzogRG9tRXh0ZW5zaW9uT3B0aW9ucyk6IEpRdWVyeSB7XHJcbiAgICAgICAgaWYgKCR0YXJnZXQubGVuZ3RoIDw9IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuICR0YXJnZXQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIV90ZW1wbGF0ZSkge1xyXG4gICAgICAgICAgICBfdGVtcGxhdGUgPSBUZW1wbGF0ZS5nZXRKU1QoYFxyXG4gICAgICAgICAgICAgICAgPHNjcmlwdCB0eXBlPVwidGV4dC90ZW1wbGF0ZVwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwidWktc3Bpbm5lci1iYXNlXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwidWktc3Bpbm5lci1pbm5lclwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJ1aS1zcGlubmVyLWlubmVyLWdhcFwiIHt7Ym9yZGVyVG9wfX0+PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJ1aS1zcGlubmVyLWlubmVyLWxlZnRcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cInVpLXNwaW5uZXItaW5uZXItaGFsZi1jaXJjbGVcIiB7e2JvcmRlcn19Pjwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwidWktc3Bpbm5lci1pbm5lci1yaWdodFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwidWktc3Bpbm5lci1pbm5lci1oYWxmLWNpcmNsZVwiIHt7Ym9yZGVyfX0+PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgPC9zY3JpcHQ+XHJcbiAgICAgICAgICAgIGApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgbWFrZVRlbXBsYXRlUGFyYW0gPSAoY2xyOiBzdHJpbmcpOiBvYmplY3QgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgYm9yZGVyVG9wOiBcInN0eWxlPWJvcmRlci10b3AtY29sb3I6XCIgKyBjbHIgKyBcIjtcIixcclxuICAgICAgICAgICAgICAgIGJvcmRlcjogXCJzdHlsZT1ib3JkZXItY29sb3I6XCIgKyBjbHIgKyBcIjtcIixcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBjb25zdCBjb2xvciA9ICR0YXJnZXQuZGF0YShcInNwaW5uZXItY29sb3JcIik7XHJcbiAgICAgICAgbGV0IHBhcmFtID0gbnVsbDtcclxuICAgICAgICBpZiAoY29sb3IpIHtcclxuICAgICAgICAgICAgJHRhcmdldC5jc3MoeyBcImJhY2tncm91bmQtY29sb3JcIjogY29sb3IgfSk7XHJcbiAgICAgICAgICAgIHBhcmFtID0gbWFrZVRlbXBsYXRlUGFyYW0oY29sb3IpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAkdGFyZ2V0LmFwcGVuZChfdGVtcGxhdGUocGFyYW0pKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHJlZnJlc2goJHRhcmdldCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gaU9TIDEwLjIrIFNWRyBTTUlMIOOCouODi+ODoeODvOOCt+ODp+ODs+OBjCAy5Zue55uu5Lul6ZmN5YuV44GL44Gq44GE5ZWP6aGM44Gu5a++562WXHJcbiAgICAvLyBkYXRhOmltYWdlL3N2Zyt4bWw7PGNhY2hlIGJ1c3Qgc3RyaW5nPjtiYXNlNjQsLi4uIOOBqOOBmeOCi+OBk+OBqOOBpyBkYXRhLXVybCDjgavjgoIgY2FjaGUgYnVzdGluZyDjgYzmnInlirnjgavjgarjgotcclxuICAgIGZ1bmN0aW9uIHJlZnJlc2goJHRhcmdldDogSlF1ZXJ5KTogSlF1ZXJ5IHtcclxuICAgICAgICBjb25zdCBQUkVGSVggPSBbXCItd2Via2l0LVwiLCBcIlwiXTtcclxuXHJcbiAgICAgICAgY29uc3QgdmFsaWQgPSAocHJvcCkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gKHByb3AgJiYgXCJub25lXCIgIT09IHByb3ApO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGxldCBkYXRhVXJsOiBzdHJpbmc7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDAsIG4gPSBQUkVGSVgubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmICghdmFsaWQoZGF0YVVybCkpIHtcclxuICAgICAgICAgICAgICAgIGRhdGFVcmwgPSAkdGFyZ2V0LmNzcyhQUkVGSVhbaV0gKyBcIm1hc2staW1hZ2VcIik7XHJcbiAgICAgICAgICAgICAgICBpZiAodmFsaWQoZGF0YVVybCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBpT1Mg44Gn44GvIHVybChkYXRhKioqKTsg5YaF44GrICdcIicg44Gv5YWl44KJ44Gq44GEXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbWF0Y2ggPSBkYXRhVXJsLm1hdGNoKC8odXJsXFwoZGF0YTppbWFnZVxcL3N2Z1xcK3htbDspKFtcXHNcXFNdKik/KGJhc2U2NCxbXFxzXFxTXSpcXCkpLyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1hdGNoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFVcmwgPSBgJHttYXRjaFsxXX1idXN0PSR7RGF0ZS5ub3coKS50b1N0cmluZygzNil9OyR7bWF0Y2hbM119YDtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhVXJsID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHZhbGlkKGRhdGFVcmwpKSB7XHJcbiAgICAgICAgICAgICAgICAkdGFyZ2V0LmNzcyhQUkVGSVhbaV0gKyBcIm1hc2staW1hZ2VcIiwgZGF0YVVybCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiAkdGFyZ2V0O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogTWF0ZXJpYWwgRGVzaWduIFNwaW5uZXIg5ouh5by1XHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtqUXVlcnl9ICAgICAgICAgICAgICAkdWkgICAgICAgW2luXSDmpJzntKLlr77osaHjga4galF1ZXJ5IOOCquODluOCuOOCp+OCr+ODiFxyXG4gICAgICogQHBhcmFtIHtEb21FeHRlbnNpb25PcHRpb25zfSBbb3B0aW9uc10gW2luXSDjgqrjg5fjgrfjg6fjg7NcclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gYXBwbHlEb21FeHRlbnNpb24oJHVpOiBKUXVlcnksIG9wdGlvbnM/OiBEb21FeHRlbnNpb25PcHRpb25zKTogSlF1ZXJ5IHtcclxuICAgICAgICAkdWkuZmluZChcIi51aS1zcGlubmVyLCAudWktaWNvbi1sb2FkaW5nXCIpXHJcbiAgICAgICAgICAgIC5lYWNoKChpbmRleDogbnVtYmVyLCBlbGVtOiBFbGVtZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAkKGVsZW0pLnNwaW5uZXIob3B0aW9ucyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiAkdWk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8g55m76YyyXHJcbiAgICBFeHRlbnNpb25NYW5hZ2VyLnJlZ2lzdGVyRG9tRXh0ZW5zaW9uKGFwcGx5RG9tRXh0ZW5zaW9uKTtcclxufVxyXG4iLCJuYW1lc3BhY2UgQ0RQLlVJLkV4dGVuc2lvbiB7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUZXh0IElucHV0IOeUqCBGbG9hdGluZyBMYWJlbCDmi6HlvLVcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge2pRdWVyeX0gICAgICAgICAgICAgICR1aSAgICAgICBbaW5dIOaknOe0ouWvvuixoeOBriBqUXVlcnkg44Kq44OW44K444Kn44Kv44OIXHJcbiAgICAgKiBAcGFyYW0ge0RvbUV4dGVuc2lvbk9wdGlvbnN9IFtvcHRpb25zXSBbaW5dIOOCquODl+OCt+ODp+ODs1xyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBhcHBseURvbUV4dGVuc2lvbigkdWk6IEpRdWVyeSwgb3B0aW9ucz86IERvbUV4dGVuc2lvbk9wdGlvbnMpOiBKUXVlcnkge1xyXG4gICAgICAgIGNvbnN0IHVwZGF0ZSA9IChlbGVtOiBFbGVtZW50LCBmbG9hdGluZzogYm9vbGVhbikgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCAkZWxlbSA9ICQoZWxlbSk7XHJcbiAgICAgICAgICAgIGlmIChmbG9hdGluZykge1xyXG4gICAgICAgICAgICAgICAgJGVsZW0uYWRkQ2xhc3MoXCJ1aS1mbG9hdC1sYWJlbC1mbG9hdGluZ1wiKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICRlbGVtLnJlbW92ZUNsYXNzKFwidWktZmxvYXQtbGFiZWwtZmxvYXRpbmdcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBjb25zdCBmbG9hdGluZ2lmeSA9IChlbGVtOiBFbGVtZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGlkID0gJChlbGVtKS5hdHRyKFwiZm9yXCIpO1xyXG4gICAgICAgICAgICBjb25zdCAkaW5wdXQgPSAkdWkuZmluZChcIiNcIiArIGlkKTtcclxuICAgICAgICAgICAgaWYgKFwic2VhcmNoXCIgPT09ICRpbnB1dC5qcW1EYXRhKFwidHlwZVwiKSkge1xyXG4gICAgICAgICAgICAgICAgJChlbGVtKS5hZGRDbGFzcyhcInVpLWZsb2F0LWxhYmVsLWhhcy1pY29uXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHVwZGF0ZShlbGVtLCAhISRpbnB1dC52YWwoKSk7XHJcbiAgICAgICAgICAgICRpbnB1dC5vbihcImtleXVwIGNoYW5nZSBpbnB1dCBmb2N1cyBibHVyIGN1dCBwYXN0ZVwiLCAoZXZlbnQ6IEpRdWVyeS5FdmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdXBkYXRlKGVsZW0sICEhJChldmVudC50YXJnZXQpLnZhbCgpKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHVpLmZpbmQoXCJsYWJlbC51aS1mbG9hdC1sYWJlbCwgLnVpLWZsb2F0LWxhYmVsIGxhYmVsXCIpXHJcbiAgICAgICAgICAgIC5lYWNoKChpbmRleDogbnVtYmVyLCBlbGVtOiBFbGVtZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBmbG9hdGluZ2lmeShlbGVtKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiAkdWk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8g55m76YyyXHJcbiAgICBFeHRlbnNpb25NYW5hZ2VyLnJlZ2lzdGVyRG9tRXh0ZW5zaW9uKGFwcGx5RG9tRXh0ZW5zaW9uKTtcclxufVxyXG4iLCJuYW1lc3BhY2UgQ0RQLlVJLkV4dGVuc2lvbiB7XHJcblxyXG4gICAgaW1wb3J0IEZyYW1ld29yayA9IENEUC5GcmFtZXdvcms7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBqUXVlcnkgTW9iaWxlIEZsaXAgU3dpdGNoIOaLoeW8tVxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7alF1ZXJ5fSAgICAgICAgICAgICAgJHVpICAgICAgIFtpbl0g5qSc57Si5a++6LGh44GuIGpRdWVyeSDjgqrjg5bjgrjjgqfjgq/jg4hcclxuICAgICAqIEBwYXJhbSB7RG9tRXh0ZW5zaW9uT3B0aW9uc30gW29wdGlvbnNdIFtpbl0g44Kq44OX44K344On44OzXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIGFwcGx5RG9tRXh0ZW5zaW9uKCR1aTogSlF1ZXJ5LCBvcHRpb25zPzogRG9tRXh0ZW5zaW9uT3B0aW9ucyk6IEpRdWVyeSB7XHJcbiAgICAgICAgLypcclxuICAgICAgICAgKiBmbGlwc3dpdGNoIOOBq+e0kOOBpeOBjyBsYWJlbCDjga8gT1Mg44Gr44KI44Gj44GmIGV2ZW50IOeZuuihjOW9ouW8j+OBjOeVsOOBquOCi+OBn+OCgeODleODg+OCr+OBl+OBpueLrOiHquOCpOODmeODs+ODiOOBp+WvvuW/nOOBmeOCiy5cclxuICAgICAgICAgKiDjgb7jgZ8gZmxpcHN3aXRjaCDjga/lhoXpg6jjgacgY2xpY2sg44KS55m66KGM44GX44Gm44GE44KL44GM44CBdmNsaWNrIOOBq+WkieabtOOBmeOCiy5cclxuICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgY29uc3QgX2dldEFsbFN3aXRjaGVzID0gKCk6IEpRdWVyeSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiAkdWkuZmluZChcIi51aS1mbGlwc3dpdGNoXCIpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGNvbnN0IF9nZXRJbnB1dEZyb21Td2l0Y2ggPSAoJHN3aXRjaDogSlF1ZXJ5KTogSlF1ZXJ5ID0+IHtcclxuICAgICAgICAgICAgY29uc3QgJGlucHV0ID0gJHN3aXRjaC5maW5kKFwiaW5wdXRcIik7XHJcbiAgICAgICAgICAgIGlmICgkaW5wdXQubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJGlucHV0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnN0ICRzZWxlY3QgPSAkc3dpdGNoLmZpbmQoXCJzZWxlY3RcIik7XHJcbiAgICAgICAgICAgIGlmICgkc2VsZWN0Lmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICRzZWxlY3Q7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgY29uc3QgX2NoYW5nZSA9ICgkaW5wdXQ6IEpRdWVyeSwgdG86IGJvb2xlYW4pOiB2b2lkID0+IHtcclxuICAgICAgICAgICAgaWYgKCRpbnB1dCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKFwiSU5QVVRcIiA9PT0gJGlucHV0WzBdLm5vZGVOYW1lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJGlucHV0LnByb3AoXCJjaGVja2VkXCIsIHRvKS5mbGlwc3dpdGNoKFwicmVmcmVzaFwiKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoXCJTRUxFQ1RcIiA9PT0gJGlucHV0WzBdLm5vZGVOYW1lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJGlucHV0LnZhbCh0byA/IFwib25cIiA6IFwib2ZmXCIpLmZsaXBzd2l0Y2goXCJyZWZyZXNoXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgY29uc3QgX2dldExhYmVsc0Zyb21Td2l0Y2ggPSAoJHN3aXRjaDogSlF1ZXJ5KTogSlF1ZXJ5ID0+IHtcclxuICAgICAgICAgICAgY29uc3QgJGlucHV0ID0gX2dldElucHV0RnJvbVN3aXRjaCgkc3dpdGNoKTtcclxuICAgICAgICAgICAgaWYgKCRpbnB1dCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbGFiZWxzID0gKDxhbnk+JGlucHV0WzBdKS5sYWJlbHM7XHJcbiAgICAgICAgICAgICAgICBpZiAobGFiZWxzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICQobGFiZWxzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gJCgpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGNvbnN0IF9nZXRTd2l0Y2hGcm9tTGFiZWwgPSAoJGxhYmVsOiBKUXVlcnkpOiBKUXVlcnkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBuYW1lID0gJGxhYmVsLmF0dHIoXCJmb3JcIik7XHJcbiAgICAgICAgICAgIHJldHVybiBfZ2V0QWxsU3dpdGNoZXMoKS5maW5kKFwiW25hbWU9J1wiICsgbmFtZSArIFwiJ11cIik7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgX2dldEFsbFN3aXRjaGVzKClcclxuICAgICAgICAgICAgLm9uKFwidmNsaWNrIF9jaGFuZ2VfZmxpcHN3aWNoXCIsIChldmVudDogSlF1ZXJ5LkV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCAkc3dpdGNoID0gJChldmVudC5jdXJyZW50VGFyZ2V0KTtcclxuICAgICAgICAgICAgICAgIGNvbnN0ICR0YXJnZXQgPSAkKGV2ZW50LnRhcmdldCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCAkaW5wdXQgPSBfZ2V0SW5wdXRGcm9tU3dpdGNoKCRzd2l0Y2gpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY2hhbmdlVG8gPSAhJHN3aXRjaC5oYXNDbGFzcyhcInVpLWZsaXBzd2l0Y2gtYWN0aXZlXCIpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICgkdGFyZ2V0Lmhhc0NsYXNzKFwidWktZmxpcHN3aXRjaC1pbnB1dFwiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIF9jaGFuZ2UoJGlucHV0LCBjaGFuZ2VUbyk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCR0YXJnZXQuaGFzQ2xhc3MoXCJ1aS1mbGlwc3dpdGNoLW9uXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKEZyYW1ld29yay5QbGF0Zm9ybS5Nb2JpbGUgJiYgRnJhbWV3b3JrLlBhdGNoLmlzU3VwcG9ydGVkVmNsaWNrKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2NoYW5nZSgkaW5wdXQsIGNoYW5nZVRvKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5lYWNoKChpbmRleDogbnVtYmVyLCBmbGlwc3dpdGNoOiBFbGVtZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBfZ2V0TGFiZWxzRnJvbVN3aXRjaCgkKGZsaXBzd2l0Y2gpKVxyXG4gICAgICAgICAgICAgICAgICAgIC5vbihcInZjbGlja1wiLCAoZXZlbnQ6IEpRdWVyeS5FdmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCAkc3dpdGNoID0gX2dldFN3aXRjaEZyb21MYWJlbCgkKGV2ZW50LnRhcmdldCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoISRzd2l0Y2gucGFyZW50KCkuaGFzQ2xhc3MoXCJ1aS1zdGF0ZS1kaXNhYmxlZFwiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHN3aXRjaC50cmlnZ2VyKFwiX2NoYW5nZV9mbGlwc3dpY2hcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiAkdWk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8g55m76YyyXHJcbiAgICBFeHRlbnNpb25NYW5hZ2VyLnJlZ2lzdGVyRG9tRXh0ZW5zaW9uKGFwcGx5RG9tRXh0ZW5zaW9uKTtcclxufVxyXG4iLCJuYW1lc3BhY2UgQ0RQLlVJLkV4dGVuc2lvbiB7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBqUXVlcnkgTW9iaWxlIFNsaWRlciDmi6HlvLVcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge2pRdWVyeX0gICAgICAgICAgICAgICR1aSAgICAgICBbaW5dIOaknOe0ouWvvuixoeOBriBqUXVlcnkg44Kq44OW44K444Kn44Kv44OIXHJcbiAgICAgKiBAcGFyYW0ge0RvbUV4dGVuc2lvbk9wdGlvbnN9IFtvcHRpb25zXSBbaW5dIOOCquODl+OCt+ODp+ODs1xyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBhcHBseURvbUV4dGVuc2lvbigkdWk6IEpRdWVyeSwgb3B0aW9ucz86IERvbUV4dGVuc2lvbk9wdGlvbnMpOiBKUXVlcnkge1xyXG4gICAgICAgICR1aS5maW5kKFwiLnVpLXNsaWRlci1pbnB1dFwiKVxyXG4gICAgICAgICAgICAub24oXCJzbGlkZXN0b3BcIiwgKGV2ZW50OiBKUXVlcnkuRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0ICRoYW5kbGVzID0gJChldmVudC5jdXJyZW50VGFyZ2V0KVxyXG4gICAgICAgICAgICAgICAgICAgIC5wYXJlbnQoKVxyXG4gICAgICAgICAgICAgICAgICAgIC5maW5kKFwiLnVpLXNsaWRlci1oYW5kbGVcIik7XHJcbiAgICAgICAgICAgICAgICAkaGFuZGxlcy5ibHVyKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiAkdWk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8g55m76YyyXHJcbiAgICBFeHRlbnNpb25NYW5hZ2VyLnJlZ2lzdGVyRG9tRXh0ZW5zaW9uKGFwcGx5RG9tRXh0ZW5zaW9uKTtcclxufVxyXG4iLCJuYW1lc3BhY2UgQ0RQLlVJLkV4dGVuc2lvbiB7XHJcblxyXG4gICAgLy8hIGlTY3JvbGwuY2xpY2sgcGF0Y2hcclxuICAgIGNvbnN0IHBhdGNoX0lTY3JvbGxfdXRpbHNfY2xpY2sgPSBmdW5jdGlvbiAoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgdGFyZ2V0OiBhbnkgPSBldmVudC50YXJnZXQ7XHJcbiAgICAgICAgY29uc3QgZTogYW55ID0gZXZlbnQ7XHJcbiAgICAgICAgbGV0IGV2OiBNb3VzZUV2ZW50O1xyXG5cclxuICAgICAgICAvLyBbQ0RQIG1vZGlmaWVkXTogc2V0IHRhcmdldC5jbGllbnRYLlxyXG4gICAgICAgIGlmIChudWxsID09IHRhcmdldC5jbGllbnRYIHx8IG51bGwgPT0gdGFyZ2V0LmNsaWVudFkpIHtcclxuICAgICAgICAgICAgaWYgKG51bGwgIT0gZS5wYWdlWCAmJiBudWxsICE9IGUucGFnZVkpIHtcclxuICAgICAgICAgICAgICAgIHRhcmdldC5jbGllbnRYID0gZS5wYWdlWDtcclxuICAgICAgICAgICAgICAgIHRhcmdldC5jbGllbnRZID0gZS5wYWdlWTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChlLmNoYW5nZWRUb3VjaGVzICYmIGUuY2hhbmdlZFRvdWNoZXNbMF0pIHtcclxuICAgICAgICAgICAgICAgIHRhcmdldC5jbGllbnRYID0gZS5jaGFuZ2VkVG91Y2hlc1swXS5wYWdlWDtcclxuICAgICAgICAgICAgICAgIHRhcmdldC5jbGllbnRZID0gZS5jaGFuZ2VkVG91Y2hlc1swXS5wYWdlWTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCEoLyhTRUxFQ1R8SU5QVVR8VEVYVEFSRUEpL2kpLnRlc3QodGFyZ2V0LnRhZ05hbWUpKSB7XHJcbiAgICAgICAgICAgIGV2ID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoXCJNb3VzZUV2ZW50c1wiKTtcclxuICAgICAgICAgICAgZXYuaW5pdE1vdXNlRXZlbnQoXCJjbGlja1wiLCB0cnVlLCB0cnVlLCBlLnZpZXcsIDEsXHJcbiAgICAgICAgICAgICAgICB0YXJnZXQuc2NyZWVuWCwgdGFyZ2V0LnNjcmVlblksIHRhcmdldC5jbGllbnRYLCB0YXJnZXQuY2xpZW50WSxcclxuICAgICAgICAgICAgICAgIGUuY3RybEtleSwgZS5hbHRLZXksIGUuc2hpZnRLZXksIGUubWV0YUtleSxcclxuICAgICAgICAgICAgICAgIDAsIG51bGwpO1xyXG5cclxuICAgICAgICAgICAgKDxhbnk+ZXYpLl9jb25zdHJ1Y3RlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIHRhcmdldC5kaXNwYXRjaEV2ZW50KGV2KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIGxldCBzX2FwcGxpZWQgPSBmYWxzZTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIGlTY3JvbGwgUGF0Y2gg5ouh5by1XHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtqUXVlcnl9ICAgICAgICAgICAgICAkdWkgICAgICAgW2luXSDmpJzntKLlr77osaHjga4galF1ZXJ5IOOCquODluOCuOOCp+OCr+ODiFxyXG4gICAgICogQHBhcmFtIHtEb21FeHRlbnNpb25PcHRpb25zfSBbb3B0aW9uc10gW2luXSDjgqrjg5fjgrfjg6fjg7NcclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gYXBwbHlQYXRjaCgkdWk6IEpRdWVyeSwgb3B0aW9ucz86IERvbUV4dGVuc2lvbk9wdGlvbnMpOiBKUXVlcnkge1xyXG4gICAgICAgIGlmICghc19hcHBsaWVkICYmIGdsb2JhbC5JU2Nyb2xsICYmIGdsb2JhbC5JU2Nyb2xsLnV0aWxzKSB7XHJcbiAgICAgICAgICAgIGdsb2JhbC5JU2Nyb2xsLnV0aWxzLmNsaWNrID0gcGF0Y2hfSVNjcm9sbF91dGlsc19jbGljaztcclxuICAgICAgICAgICAgc19hcHBsaWVkID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuICR1aTtcclxuICAgIH1cclxuXHJcbiAgICAvLyDnmbvpjLJcclxuICAgIEV4dGVuc2lvbk1hbmFnZXIucmVnaXN0ZXJEb21FeHRlbnNpb24oYXBwbHlQYXRjaCk7XHJcbn1cclxuIiwiLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uLy4uL0B0eXBlcy9jZHAucGx1Z2luLm5hdGl2ZWJyaWRnZS5kLnRzXCIgLz5cclxuXHJcbm5hbWVzcGFjZSBDRFAuTmF0aXZlQnJpZGdlIHtcclxuXHJcbiAgICBpbXBvcnQgUGx1Z2luICAgPSBDRFAuUGx1Z2luLk5hdGl2ZUJyaWRnZTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAqIEBpbnRlcmZhY2UgRmVhdHVyZVxyXG4gICAgICogQGJyaWVmIGZlYXR1cmUgaW5mb3JtYXRpb24uXHJcbiAgICAgKlxyXG4gICAgICogXFx+amFwYW5lc2VcclxuICAgICAqIEBpbnRlcmZhY2UgRmVhdHVyZVxyXG4gICAgICogQGJyaWVmIOapn+iDveaDheWgsVxyXG4gICAgICovXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIEZlYXR1cmUgZXh0ZW5kcyBQbHVnaW4uRmVhdHVyZSB7IH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAqIEBpbnRlcmZhY2UgQ29uc3RydWN0T3B0aW9uc1xyXG4gICAgICogQGJyaWVmIE5hdGl2ZUJyaWRnZSBjbGFzcydzIGNvbnNydHJ1Y3Rpb24gb3B0aW9ucy5cclxuICAgICAqXHJcbiAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICogQGludGVyZmFjZSBDb25zdHJ1Y3RPcHRpb25zXHJcbiAgICAgKiBAYnJpZWYg5Yid5pyf5YyW44Gr5oyH5a6a44GZ44KL44Kq44OX44K344On44OzXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgQ29uc3RydWN0T3B0aW9ucyBleHRlbmRzIFBsdWdpbi5Db25zdHJ1Y3RPcHRpb25zIHtcclxuICAgICAgICB1c2VSYXdQbHVnaW5SZXN1bHQ/OiBib29sZWFuOyAgIC8vIFvpgY7ljrvkupLmj5vnlKhdIGV4ZWMg44Kz44O844Or5pmC44GrLCBJUmVzdWx0IOOBp+i/lOWNtOOBmeOCi+WgtOWQiCB0cnVlLiBkZWZhdWx0OiBmYWxzZVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICogQGludGVyZmFjZSBJUmVzdWx0XHJcbiAgICAgKiBAYnJpZWYgTmF0aXZlQnJpZGdlIGJhc2UgcmVzdWx0IGluZm9ybWF0aW9uLlxyXG4gICAgICpcclxuICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgKiBAaW50ZXJmYWNlIElSZXN1bHRcclxuICAgICAqIEBicmllZiBOYXRpdmVCcmlkZ2Ug44Gu5Z+65bqVIFJlc3VsdCDmg4XloLFcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBJUmVzdWx0IGV4dGVuZHMgUGx1Z2luLklSZXN1bHQsIEVycm9yIHtcclxuICAgICAgICBtZXNzYWdlOiBzdHJpbmc7XHJcbiAgICAgICAgbmFtZTogc3RyaW5nO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICogQGludGVyZmFjZSBFeGVjT3B0aW9uc1xyXG4gICAgICogQGJyaWVmIGV4ZWMoKSBtZXRob2Qgb3B0aW9ucy5cclxuICAgICAqXHJcbiAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICogQGludGVyZmFjZSBFeGVjT3B0aW9uc1xyXG4gICAgICogQGJyaWVmIGV4ZWMoKSDjgavmuKHjgZnjgqrjg5fjgrfjg6fjg7NcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBFeGVjT3B0aW9ucyBleHRlbmRzIFBsdWdpbi5FeGVjT3B0aW9ucyB7XHJcbiAgICAgICAgcmVjZWl2ZVBhcmFtcz86IGJvb2xlYW47IC8vIGV4ZWMg5oiQ5Yqf5pmC44GrLCAuLi5wYXJhbXMsIElSZXN1bHQg44Gn6L+U5Y2044GZ44KL5aC05ZCIIHRydWVcclxuICAgIH1cclxufVxyXG5cclxuZGVjbGFyZSBtb2R1bGUgXCJjZHAubmF0aXZlYnJpZGdlXCIge1xyXG4gICAgY29uc3QgTmF0aXZlQnJpZGdlOiB0eXBlb2YgQ0RQLk5hdGl2ZUJyaWRnZTtcclxuICAgIGV4cG9ydCA9IE5hdGl2ZUJyaWRnZTtcclxufVxyXG4iLCJuYW1lc3BhY2UgQ0RQIHtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBlbnVtICBSRVNVTFRfQ09ERV9CQVNFXHJcbiAgICAgKiBAYnJpZWYg44Oq44K244Or44OI44Kz44O844OJ44Gu44Kq44OV44K744OD44OI5YCkXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBlbnVtIFJFU1VMVF9DT0RFX0JBU0Uge1xyXG4gICAgICAgIENEUF9OQVRJVkVCUklER0VfREVDTEFSRVJBVElPTiA9IDAsIC8vIFRTMjQzMiDlr77nrZZcclxuICAgICAgICBDRFBfTkFUSVZFQlJJREdFID0gMiAqIF9NT0RVTEVfUkVTVUxUX0NPREVfUkFOR0VfQ0RQLFxyXG4gICAgfVxyXG5cclxuICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAvLyBtb2R1bGUgZXJyb3IgZGVjbGFyYXRpb246XHJcblxyXG4gICAgY29uc3QgRlVOQ1RJT05fQ09ERV9SQU5HRSA9IDEwO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGVudW0gIExPQ0FMX0NPREVfQkFTRVxyXG4gICAgICogQGJyaWVmIGNkcC5uYXRpdmVicmlkZ2Ug5YaF44Gu44Ot44O844Kr44Or44Kz44O844OJ44Kq44OV44K744OD44OI5YCkXHJcbiAgICAgKi9cclxuICAgIGVudW0gTE9DQUxfQ09ERV9CQVNFIHtcclxuICAgICAgICBHQVRFICAgID0gMCxcclxuICAgICAgICBVVElMUyAgID0gMSAqIEZVTkNUSU9OX0NPREVfUkFOR0UsXHJcbiAgICB9XHJcblxyXG4gICAgLyogdHNsaW50OmRpc2FibGU6bWF4LWxpbmUtbGVuZ3RoICovXHJcbiAgICAvKipcclxuICAgICAqIEBlbnVtICBSRVNVTFRfQ09ERVxyXG4gICAgICogQGJyaWVmIGNkcC1uYXRpdmVicmlkZ2Ug44Gu44Ko44Op44O844Kz44O844OJ5a6a576pXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBlbnVtIFJFU1VMVF9DT0RFIHtcclxuICAgICAgICBFUlJPUl9DRFBfTkFUSVZFQlJJREdfREVDTEFSQVRJT04gICAgICAgICAgICAgICA9IDAsIC8vIFRTMjQzMiDlr77nrZZcclxuICAgICAgICBFUlJPUl9DRFBfTkFUSVZFQlJJREdFX0lOVkFMSURfQVJHICAgICAgICAgICAgICA9IERFQ0xBUkVfRVJST1JfQ09ERShSRVNVTFRfQ09ERV9CQVNFLkNEUF9OQVRJVkVCUklER0UsIExPQ0FMX0NPREVfQkFTRS5HQVRFICsgMSwgXCJjYWxsZWQgd2l0aCBpbnZhbGlkIGFyZ3MuXCIpLFxyXG4gICAgICAgIEVSUk9SX0NEUF9OQVRJVkVCUklER0VfTk9UX0lNUExFTUVOVCAgICAgICAgICAgID0gREVDTEFSRV9FUlJPUl9DT0RFKFJFU1VMVF9DT0RFX0JBU0UuQ0RQX05BVElWRUJSSURHRSwgTE9DQUxfQ09ERV9CQVNFLkdBVEUgKyAyLCBcIm1ldGhvZCBub3QgaW1wbGVtZW50ZWQuXCIpLFxyXG4gICAgICAgIEVSUk9SX0NEUF9OQVRJVkVCUklER0VfTk9UX1NVUFBPUlQgICAgICAgICAgICAgID0gREVDTEFSRV9FUlJPUl9DT0RFKFJFU1VMVF9DT0RFX0JBU0UuQ0RQX05BVElWRUJSSURHRSwgTE9DQUxfQ09ERV9CQVNFLkdBVEUgKyAzLCBcIm1ldGhvZCBub3Qgc3VwcG9ydGVkLlwiKSxcclxuICAgICAgICBFUlJPUl9DRFBfTkFUSVZFQlJJREdFX0lOVkFMSURfT1BFUkFUSU9OICAgICAgICA9IERFQ0xBUkVfRVJST1JfQ09ERShSRVNVTFRfQ09ERV9CQVNFLkNEUF9OQVRJVkVCUklER0UsIExPQ0FMX0NPREVfQkFTRS5HQVRFICsgNCwgXCJpbnZhbGlkIG9wZXJhdGlvbi5cIiksXHJcbiAgICAgICAgRVJST1JfQ0RQX05BVElWRUJSSURHRV9DTEFTU19OT1RfRk9VTkQgICAgICAgICAgPSBERUNMQVJFX0VSUk9SX0NPREUoUkVTVUxUX0NPREVfQkFTRS5DRFBfTkFUSVZFQlJJREdFLCBMT0NBTF9DT0RFX0JBU0UuR0FURSArIDUsIFwiY2xhc3Mgbm90IGZvdW5kLlwiKSxcclxuICAgICAgICBFUlJPUl9DRFBfTkFUSVZFQlJJREdFX01FVEhPRF9OT1RfRk9VTkQgICAgICAgICA9IERFQ0xBUkVfRVJST1JfQ09ERShSRVNVTFRfQ09ERV9CQVNFLkNEUF9OQVRJVkVCUklER0UsIExPQ0FMX0NPREVfQkFTRS5HQVRFICsgNiwgXCJtZXRob2Qgbm90IGZvdW5kLlwiKSxcclxuICAgICAgICBFUlJPUl9DRFBfTkFUSVZFQlJJREdFX0NPUkRPVkFfUkVRVUlSRUQgICAgICAgICA9IERFQ0xBUkVfRVJST1JfQ09ERShSRVNVTFRfQ09ERV9CQVNFLkNEUF9OQVRJVkVCUklER0UsIExPQ0FMX0NPREVfQkFTRS5VVElMUyArIDEsIFwiY29yZG92YSByZXF1aXJlZC5cIiksXHJcbiAgICAgICAgRVJST1JfQ0RQX05BVElWRUJSSURHRV9DT1JET1ZBX1BMVUdJTl9SRVFVSVJFRCAgPSBERUNMQVJFX0VSUk9SX0NPREUoUkVTVUxUX0NPREVfQkFTRS5DRFBfTkFUSVZFQlJJREdFLCBMT0NBTF9DT0RFX0JBU0UuVVRJTFMgKyAyLCBcIidjb3Jkb3ZhLXBsdWdpbi1jZHAtbmF0aXZlYnJpZGdlJyBjb3Jkb3ZhIHBsdWdpbiByZXF1aXJlZC5cIiksXHJcbiAgICB9XHJcbiAgICAvKiB0c2xpbnQ6ZW5hYmxlOm1heC1saW5lLWxlbmd0aCAqL1xyXG59XHJcbiIsIm5hbWVzcGFjZSBDRFAuTmF0aXZlQnJpZGdlIHtcclxuXHJcbiAgICBpbXBvcnQgSVByb21pc2VCYXNlID0gQ0RQLklQcm9taXNlQmFzZTtcclxuICAgIGltcG9ydCBJUHJvbWlzZSAgICAgPSBDRFAuSVByb21pc2U7XHJcblxyXG4gICAgY29uc3QgVEFHID0gXCJbQ0RQLk5hdGl2ZUJyaWRnZS5VdGlsc10gXCI7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgKiBAY2xhc3MgVXRpbHNcclxuICAgICAqIEBicmllZiBUaGUgdXRpbGl0eSBjbGFzcyBmb3IgQ0RQLk5hdGl2ZUJyaWRnZS5cclxuICAgICAqXHJcbiAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICogQGNsYXNzIFV0aWxzXHJcbiAgICAgKiBAYnJpZWYgQ0RQLk5hdGl2ZUJyaWRnZSDjgYzkvb/nlKjjgZnjgovjg6bjg7zjg4bjgqPjg6rjg4bjgqPjgq/jg6njgrlcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGNsYXNzIFV0aWxzIHtcclxuXHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgc19wbHVnaW5SZWFkeSA9IGZhbHNlO1xyXG5cclxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgICAgIC8vIHB1YmxpYyBzdGF0aWMgbWV0aG9kc1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogRGVmaW5lcyBlcnJvciBjb2RlIG1hcCBmcm9tIHRoZSBwbHVnaW4gcmVzdWx0IHRvIENEUC5OYXRpdmVCcmlkZ2UgcmVzdWx0IGNvZGUuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gZXJyb3JDb2RlIFtpbl0gc2V0IHJlc3VsdCBjb2RlIHN0cmluZy4gZXgpOiBcIlNVQ0NFU1NfT0tcIlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiBwbHVnaW4g44GuIFJlc3VsdCBDb2RlIOOCkiBDRFAuTmF0aXZlQnJpZGdlIOOBq+ODnuODg+ODl+OBmeOCi1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGVycm9yQ29kZSBbaW5dIFJlc3VsdCBDb2RlIOaWh+Wtl+WIl+OCkuaMh+WumiBleCk6IFwiU1VDQ0VTU19PS1wiXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBkZWZpbmVSZXN1bHRDb2RlKGVycm9yQ29kZTogc3RyaW5nKTogdm9pZCB7XHJcbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYXRpdmVCcmlkZ2UsIGVycm9yQ29kZSwge1xyXG4gICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKFV0aWxzLnNfcGx1Z2luUmVhZHkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFBsdWdpbi5OYXRpdmVCcmlkZ2VbZXJyb3JDb2RlXTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBXYWl0IGZvciBjb3Jkb3ZhIFwiZGV2aWNlcmVhZHlcIiBldmVudCBmaXJlZC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICogY29yZG92YSDjgYwg5L2/55So5Y+v6IO944Gr44Gq44KL44G+44Gn5b6F5qmfXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyB3YWl0Rm9yUGx1Z2luUmVhZHkoKTogSVByb21pc2VCYXNlPHZvaWQ+IHtcclxuICAgICAgICAgICAgY29uc3QgZGYgPSAkLkRlZmVycmVkPHZvaWQ+KCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoVXRpbHMuc19wbHVnaW5SZWFkeSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICQuRGVmZXJyZWQ8dm9pZD4oKS5yZXNvbHZlKCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjaGFubmVsID0gY29yZG92YS5yZXF1aXJlKFwiY29yZG92YS9jaGFubmVsXCIpO1xyXG4gICAgICAgICAgICAgICAgY2hhbm5lbC5vbkNvcmRvdmFSZWFkeS5zdWJzY3JpYmUoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChudWxsICE9IENEUC5QbHVnaW4uTmF0aXZlQnJpZGdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFV0aWxzLnNfcGx1Z2luUmVhZHkgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZi5yZXNvbHZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGYucmVqZWN0KG1ha2VFcnJvckluZm8oXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBSRVNVTFRfQ09ERS5FUlJPUl9DRFBfTkFUSVZFQlJJREdFX0NPUkRPVkFfUExVR0lOX1JFUVVJUkVELCBUQUdcclxuICAgICAgICAgICAgICAgICAgICAgICAgKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBkZi5yZWplY3QobWFrZUVycm9ySW5mbyhcclxuICAgICAgICAgICAgICAgICAgICBSRVNVTFRfQ09ERS5FUlJPUl9DRFBfTkFUSVZFQlJJREdFX0NPUkRPVkFfUkVRVUlSRUQsIFRBR1xyXG4gICAgICAgICAgICAgICAgKSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBkZi5wcm9taXNlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogQ3JlYXRlIE5hdGl2ZUJyaWRnZS5Qcm9taXNlIG9iamVjdCBmcm9tIGpRdWVyeURlZmVycmVkIG9iamVjdC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBkZiBbaW5dIHNldCBqUXVlcnlEZWZlcnJlZCBpbnN0YW5jZS5cclxuICAgICAgICAgKiBAcGFyYW0gdXNlUmF3UGx1Z2luUmVzdWx0IFtpbl0gcmV0dXJuIHBsdWdpbiByZXN1bHQgb3IgZXJyb3JpbmZvXHJcbiAgICAgICAgICogQHJldHVybnMgTmF0aXZlQnJpZGdlLlByb21pc2Ugb2JqZWN0LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiBQcm9taXNlIOOCquODluOCuOOCp+OCr+ODiOOBruS9nOaIkFxyXG4gICAgICAgICAqIGpRdWVyeURlZmVycmVkIOOCquODluOCuOOCp+OCr+ODiOOBi+OCieOAgU5hdGl2ZUJyaWRnZS5Qcm9taXNlIOOCquODluOCuOOCp+OCr+ODiOOCkuS9nOaIkOOBmeOCi1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGRmIFtpbl0galF1ZXJ5RGVmZXJyZWQgaW5zdGFuY2Ug44KS5oyH5a6aXHJcbiAgICAgICAgICogQHBhcmFtIHVzZVJhd1BsdWdpblJlc3VsdCBbaW5dIHBsdWdpbiByZXN1bHQg44KS6L+U44GZ44GL5ZCm44GLXHJcbiAgICAgICAgICogQHJldHVybnMgTmF0aXZlQnJpZGdlLlByb21pc2Ug44Kq44OW44K444Kn44Kv44OIXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBtYWtlUHJvbWlzZShkZjogSlF1ZXJ5RGVmZXJyZWQ8SVJlc3VsdD4sIHVzZVJhd1BsdWdpblJlc3VsdDogYm9vbGVhbik6IElQcm9taXNlPElSZXN1bHQ+IHtcclxuICAgICAgICAgICAgcmV0dXJuIENEUC5tYWtlUHJvbWlzZShkZiwge1xyXG4gICAgICAgICAgICAgICAgX2JyaWRnZTogbnVsbCxcclxuICAgICAgICAgICAgICAgIF90YXNrSWQ6IG51bGwsXHJcbiAgICAgICAgICAgICAgICBhYm9ydDogZnVuY3Rpb24gKGluZm8/OiBhbnkpOiB2b2lkIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjb2RlID0gdXNlUmF3UGx1Z2luUmVzdWx0ID8gTmF0aXZlQnJpZGdlLkVSUk9SX0NBTkNFTCA6IFJFU1VMVF9DT0RFLlNVQ0NFRURFRDtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBkZXRhaWwgPSAkLmV4dGVuZCh7IGNvZGU6IGNvZGUgfSwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcImFib3J0XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IFRBRyArIFwibWV0aG9kIGNhbmNlbGVkXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhc2tJZDogdGhpcy5fdGFza0lkLFxyXG4gICAgICAgICAgICAgICAgICAgIH0sIGluZm8pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjYW5jZWwgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChudWxsICE9IHRoaXMuX2JyaWRnZSAmJiBudWxsICE9IHRoaXMuX3Rhc2tJZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fYnJpZGdlLmNhbmNlbCh0aGlzLl90YXNrSWQsIGRldGFpbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZGYucmVqZWN0KGRldGFpbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgIT0gdGhpcy5kZXBlbmRlbmN5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmRlcGVuZGVuY3kuYWJvcnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGVwZW5kZW5jeS5hYm9ydChkZXRhaWwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihUQUcgKyBcIltjYWxsXSBkZXBlbmRlbmN5IG9iamVjdCBkb2Vzbid0IGhhdmUgJ2Fib3J0KCknIG1ldGhvZC5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY2FsbFJlamVjdCAmJiBcInBlbmRpbmdcIiA9PT0gdGhpcy5zdGF0ZSgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYW5jZWwoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoXCJwZW5kaW5nXCIgPT09IHRoaXMuc3RhdGUoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYW5jZWwoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIEhlbHBlciBmdW5jdGlvbiB0byBjb3JyZWN0bHkgc2V0IHVwIHRoZSBwcm90b3R5cGUgY2hhaW4sIGZvciBzdWJjbGFzc2VzLlxyXG4gICAgICAgICAqIFRoZSBmdW5jdGlvbiBiZWhhdmlvciBpcyBzYW1lIGFzIGV4dGVuZCgpIGZ1bmN0aW9uIG9mIEJhY2tib25lLmpzLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHByb3RvUHJvcHMgIFtpbl0gc2V0IHByb3RvdHlwZSBwcm9wZXJ0aWVzIGFzIG9iamVjdC5cclxuICAgICAgICAgKiBAcGFyYW0gc3RhdGljUHJvcHMgW2luXSBzZXQgc3RhdGljIHByb3BlcnRpZXMgYXMgb2JqZWN0LlxyXG4gICAgICAgICAqIEByZXR1cm5zIHN1YmNsYXNzIGNvbnN0cnVjdG9yLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiDjgq/jg6njgrnntpnmib/jga7jgZ/jgoHjga7jg5jjg6vjg5Hjg7zplqLmlbBcclxuICAgICAgICAgKiBCYWNrYm9uZS5qcyBleHRlbmQoKSDplqLmlbDjgajlkIznrYlcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBwcm90b1Byb3BzICBbaW5dIHByb3RvdHlwZSBwcm9wZXJ0aWVzIOOCkuOCquODluOCuOOCp+OCr+ODiOOBp+aMh+WumlxyXG4gICAgICAgICAqIEBwYXJhbSBzdGF0aWNQcm9wcyBbaW5dIHN0YXRpYyBwcm9wZXJ0aWVzIOOCkuOCquODluOCuOOCp+OCr+ODiOOBp+aMh+WumlxyXG4gICAgICAgICAqIEByZXR1cm5zIOOCteODluOCr+ODqeOCueOBruOCs+ODs+OCueODiOODqeOCr+OCv1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgZXh0ZW5kKHByb3RvUHJvcHM6IG9iamVjdCwgc3RhdGljUHJvcHM/OiBvYmplY3QpOiBvYmplY3Qge1xyXG4gICAgICAgICAgICBjb25zdCBwYXJlbnQgPSB0aGlzO1xyXG4gICAgICAgICAgICBsZXQgY2hpbGQ7XHJcblxyXG4gICAgICAgICAgICBpZiAocHJvdG9Qcm9wcyAmJiBwcm90b1Byb3BzLmhhc093blByb3BlcnR5KFwiY29uc3RydWN0b3JcIikpIHtcclxuICAgICAgICAgICAgICAgIGNoaWxkID0gcHJvdG9Qcm9wcy5jb25zdHJ1Y3RvcjtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNoaWxkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwYXJlbnQuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICQuZXh0ZW5kKGNoaWxkLCBwYXJlbnQsIHN0YXRpY1Byb3BzKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IFN1cnJvZ2F0ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgU3Vycm9nYXRlLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7XHJcbiAgICAgICAgICAgIGNoaWxkLnByb3RvdHlwZSA9IG5ldyBTdXJyb2dhdGU7XHJcblxyXG4gICAgICAgICAgICBpZiAocHJvdG9Qcm9wcykge1xyXG4gICAgICAgICAgICAgICAgJC5leHRlbmQoY2hpbGQucHJvdG90eXBlLCBwcm90b1Byb3BzKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBjaGlsZDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwibmFtZXNwYWNlIENEUC5OYXRpdmVCcmlkZ2Uge1xyXG5cclxuICAgIGltcG9ydCBJUHJvbWlzZSAgICAgPSBDRFAuSVByb21pc2U7XHJcbiAgICBpbXBvcnQgSVByb21pc2VCYXNlID0gQ0RQLklQcm9taXNlQmFzZTtcclxuXHJcbiAgICBjb25zdCBUQUc6IHN0cmluZyA9IFwiW0NEUC5OYXRpdmVCcmlkZ2UuR2F0ZV0gXCI7XHJcblxyXG4gICAgLy8gUGx1Z2luIHJhdyBSZXN1bHQgY29kZVxyXG5cclxuICAgIGV4cG9ydCBsZXQgU1VDQ0VTU19PSzogbnVtYmVyOyAgICAgICAgICAgICAgVXRpbHMuZGVmaW5lUmVzdWx0Q29kZShcIlNVQ0NFU1NfT0tcIik7XHJcbiAgICBleHBvcnQgbGV0IFNVQ0NFU1NfUFJPR1JFU1M6IG51bWJlcjsgICAgICAgIFV0aWxzLmRlZmluZVJlc3VsdENvZGUoXCJTVUNDRVNTX1BST0dSRVNTXCIpO1xyXG4gICAgZXhwb3J0IGxldCBFUlJPUl9GQUlMOiBudW1iZXI7ICAgICAgICAgICAgICBVdGlscy5kZWZpbmVSZXN1bHRDb2RlKFwiRVJST1JfRkFJTFwiKTtcclxuICAgIGV4cG9ydCBsZXQgRVJST1JfQ0FOQ0VMOiBudW1iZXI7ICAgICAgICAgICAgVXRpbHMuZGVmaW5lUmVzdWx0Q29kZShcIkVSUk9SX0NBTkNFTFwiKTtcclxuICAgIGV4cG9ydCBsZXQgRVJST1JfSU5WQUxJRF9BUkc6IG51bWJlcjsgICAgICAgVXRpbHMuZGVmaW5lUmVzdWx0Q29kZShcIkVSUk9SX0lOVkFMSURfQVJHXCIpO1xyXG4gICAgZXhwb3J0IGxldCBFUlJPUl9OT1RfSU1QTEVNRU5UOiBudW1iZXI7ICAgICBVdGlscy5kZWZpbmVSZXN1bHRDb2RlKFwiRVJST1JfTk9UX0lNUExFTUVOVFwiKTtcclxuICAgIGV4cG9ydCBsZXQgRVJST1JfTk9UX1NVUFBPUlQ6IG51bWJlcjsgICAgICAgVXRpbHMuZGVmaW5lUmVzdWx0Q29kZShcIkVSUk9SX05PVF9TVVBQT1JUXCIpO1xyXG4gICAgZXhwb3J0IGxldCBFUlJPUl9JTlZBTElEX09QRVJBVElPTjogbnVtYmVyOyBVdGlscy5kZWZpbmVSZXN1bHRDb2RlKFwiRVJST1JfSU5WQUxJRF9PUEVSQVRJT05cIik7XHJcbiAgICBleHBvcnQgbGV0IEVSUk9SX0NMQVNTX05PVF9GT1VORDogbnVtYmVyOyAgIFV0aWxzLmRlZmluZVJlc3VsdENvZGUoXCJFUlJPUl9DTEFTU19OT1RfRk9VTkRcIik7XHJcbiAgICBleHBvcnQgbGV0IEVSUk9SX01FVEhPRF9OT1RfRk9VTkQ6IG51bWJlcjsgIFV0aWxzLmRlZmluZVJlc3VsdENvZGUoXCJFUlJPUl9NRVRIT0RfTk9UX0ZPVU5EXCIpO1xyXG5cclxuXHJcbiAgICBmdW5jdGlvbiBjb252ZXJ0RXJyb3JJbmZvKHJlc3VsdDogSVJlc3VsdCB8IENEUC5QbHVnaW4uTmF0aXZlQnJpZGdlLklSZXN1bHQpOiBFcnJvckluZm8ge1xyXG4gICAgICAgIGxldCByZXN1bHRDb2RlOiBudW1iZXI7XHJcbiAgICAgICAgc3dpdGNoIChyZXN1bHQuY29kZSkge1xyXG4gICAgICAgICAgICBjYXNlIEVSUk9SX0NBTkNFTDpcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIEVSUk9SX0lOVkFMSURfQVJHOlxyXG4gICAgICAgICAgICAgICAgcmVzdWx0Q29kZSA9IFJFU1VMVF9DT0RFLkVSUk9SX0NEUF9OQVRJVkVCUklER0VfSU5WQUxJRF9BUkc7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBFUlJPUl9OT1RfSU1QTEVNRU5UOlxyXG4gICAgICAgICAgICAgICAgcmVzdWx0Q29kZSA9IFJFU1VMVF9DT0RFLkVSUk9SX0NEUF9OQVRJVkVCUklER0VfTk9UX0lNUExFTUVOVDtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIEVSUk9SX05PVF9TVVBQT1JUOlxyXG4gICAgICAgICAgICAgICAgcmVzdWx0Q29kZSA9IFJFU1VMVF9DT0RFLkVSUk9SX0NEUF9OQVRJVkVCUklER0VfTk9UX1NVUFBPUlQ7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBFUlJPUl9JTlZBTElEX09QRVJBVElPTjpcclxuICAgICAgICAgICAgICAgIHJlc3VsdENvZGUgPSBSRVNVTFRfQ09ERS5FUlJPUl9DRFBfTkFUSVZFQlJJREdFX0lOVkFMSURfT1BFUkFUSU9OO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgRVJST1JfQ0xBU1NfTk9UX0ZPVU5EOlxyXG4gICAgICAgICAgICAgICAgcmVzdWx0Q29kZSA9IFJFU1VMVF9DT0RFLkVSUk9SX0NEUF9OQVRJVkVCUklER0VfQ0xBU1NfTk9UX0ZPVU5EO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgRVJST1JfTUVUSE9EX05PVF9GT1VORDpcclxuICAgICAgICAgICAgICAgIHJlc3VsdENvZGUgPSBSRVNVTFRfQ09ERS5FUlJPUl9DRFBfTkFUSVZFQlJJREdFX01FVEhPRF9OT1RfRk9VTkQ7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBFUlJPUl9GQUlMOlxyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgcmVzdWx0Q29kZSA9IFJFU1VMVF9DT0RFLkZBSUxFRDtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoRVJST1JfQ0FOQ0VMID09PSByZXN1bHQuY29kZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbWFrZUNhbmNlbGVkRXJyb3JJbmZvKFRBRywgPElSZXN1bHQ+cmVzdWx0KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gbWFrZUVycm9ySW5mbyhyZXN1bHRDb2RlLCBUQUcsIG51bGwsIDxJUmVzdWx0PnJlc3VsdCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXy8vXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgKiBAY2xhc3MgR2F0ZVxyXG4gICAgICogQGJyaWVmIFRoZSBiYXNlIGNsYXNzIGZvciBOYXRpdmVCcmlkZ2UgY29tbXVuaWNhdGlvbi5cclxuICAgICAqICAgICAgICBZb3UgY2FuIGRlcml2ZSBhbnkgR2F0ZSBjbGFzcyBmcm9tIHRoaXMgY2xhc3MuXHJcbiAgICAgKlxyXG4gICAgICogXFx+amFwYW5lc2VcclxuICAgICAqIEBjbGFzcyBHYXRlXHJcbiAgICAgKiBAYnJpZWYgTmF0aXZlQnJpZGdlIOOBqOmAmuS/oeOBmeOCi+ODmeODvOOCueOCr+ODqeOCuVxyXG4gICAgICogICAgICAgIOOBk+OBruOCr+ODqeOCueOBi+OCieS7u+aEj+OBriBHYXRlIOOCr+ODqeOCueOCkua0vueUn+OBl+OBpuWun+ijheWPr+iDvVxyXG4gICAgICovXHJcbiAgICBleHBvcnQgY2xhc3MgR2F0ZSB7XHJcblxyXG4gICAgICAgIHByaXZhdGUgX2JyaWRnZTogUGx1Z2luLk5hdGl2ZUJyaWRnZTtcclxuICAgICAgICBwcml2YXRlIF9vcHRpb25zOiBDb25zdHJ1Y3RPcHRpb25zO1xyXG5cclxuICAgICAgICAvKiB0c2xpbnQ6ZGlzYWJsZTpuby11bnVzZWQtdmFyaWFibGUgKi9cclxuICAgICAgICAvLyBGb3IgcHVyZSBqYXZhc2NyaXB0IGV4dGVuZCBoZWxwZXIuXHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgZXh0ZW5kID0gVXRpbHMuZXh0ZW5kO1xyXG4gICAgICAgIC8qIHRzbGludDplbmFibGU6bm8tdW51c2VkLXZhcmlhYmxlICovXHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBjb25zdHJ1Y3RvclxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGZlYXR1cmUgW2luXSBmZWF0dXJlIGluZm9ybWF0aW9uLlxyXG4gICAgICAgICAqIEBwYXJhbSBvcHRpb25zIFtpbl0gY29uc3RydWN0aW9uIG9wdGlvbnMuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIGNvbnN0cnVjdG9yXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gZmVhdHVyZSBbaW5dIOWIneacn+WMluaDheWgseOCkuaMh+WumlxyXG4gICAgICAgICAqIEBwYXJhbSBvcHRpb25zIFtpbl0g44Kq44OX44K344On44Oz44KS5oyH5a6aXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgY29uc3RydWN0b3IoZmVhdHVyZTogRmVhdHVyZSwgb3B0aW9ucz86IENvbnN0cnVjdE9wdGlvbnMpIHtcclxuICAgICAgICAgICAgdGhpcy5fb3B0aW9ucyA9ICQuZXh0ZW5kKHtcclxuICAgICAgICAgICAgICAgIHVzZVJhd1BsdWdpblJlc3VsdDogZmFsc2UsXHJcbiAgICAgICAgICAgIH0sIG9wdGlvbnMpO1xyXG4gICAgICAgICAgICBVdGlscy53YWl0Rm9yUGx1Z2luUmVhZHkoKVxyXG4gICAgICAgICAgICAgICAgLmRvbmUoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2JyaWRnZSA9IG5ldyBQbHVnaW4uTmF0aXZlQnJpZGdlKGZlYXR1cmUsIG9wdGlvbnMpO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5jYXRjaCgocmVhc29uKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgRXJyb3IocmVhc29uKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgICAgICAvLyBvdmVycmlkZSBtZXRob2RzXHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBFeGVjdXRlIHRhc2suXHJcbiAgICAgICAgICogdGhlIGZ1bmN0aW9uIGNhbGxzIHRoZSBOYXRpdmUgY2xhc3MgbWV0aG9kIGZyb20gY29ycmVzcG9uZGVudCBtZXRob2QgbmFtZS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBtZXRob2QgIFtpbl0gbWV0aG9kIG5hbWUgb2YgTmF0aXZlIGNsYXNzXHJcbiAgICAgICAgICogQHBhcmFtIGFyZ3MgICAgW2luXSBzZXQgYXJndW1lbnRzIGJ5IGFycmF5IHR5cGUuXHJcbiAgICAgICAgICogQHBhcmFtIG9wdGlvbnMgW2luXSBzZXQgZXhlYyBvcHRpb25zLlxyXG4gICAgICAgICAqIEByZXR1cm5zIFByb21pc2Ugb2JqZWN0LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiDjgr/jgrnjgq/jga7lrp/ooYxcclxuICAgICAgICAgKiDmjIflrprjgZfjgZ8gbWV0aG9kIOWQjeOBq+WvvuW/nOOBmeOCiyBOYXRpdmUgQ2xhc3Mg44GuIG1ldGhvZCDjgpLlkbzjgbPlh7rjgZnjgIJcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBtZXRob2QgIFtpbl0gTmF0aXZlIENsYXNzIOOBruODoeOCveODg+ODieWQjeOCkuaMh+WumlxyXG4gICAgICAgICAqIEBwYXJhbSBhcmdzICAgIFtpbl0g5byV5pWw44KS6YWN5YiX44Gn5oyH5a6aXHJcbiAgICAgICAgICogQHBhcmFtIG9wdGlvbnMgW2luXSDlrp/ooYzjgqrjg5fjgrfjg6fjg7PjgpLmjIflrppcclxuICAgICAgICAgKiBAcmV0dXJucyBQcm9taXNlIOOCquODluOCuOOCp+OCr+ODiFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBleGVjKG1ldGhvZDogc3RyaW5nLCBhcmdzPzogYW55W10sIG9wdGlvbnM/OiBFeGVjT3B0aW9ucyk6IElQcm9taXNlPGFueT4ge1xyXG4gICAgICAgICAgICBjb25zdCBkZiA9ICQuRGVmZXJyZWQoKTtcclxuICAgICAgICAgICAgY29uc3Qgb3B0ID0gJC5leHRlbmQoe30sIHRoaXMuX29wdGlvbnMsIG9wdGlvbnMpO1xyXG4gICAgICAgICAgICBjb25zdCBwcm9taXNlID0gVXRpbHMubWFrZVByb21pc2UoZGYsIG9wdC51c2VSYXdQbHVnaW5SZXN1bHQpO1xyXG5cclxuICAgICAgICAgICAgVXRpbHMud2FpdEZvclBsdWdpblJlYWR5KClcclxuICAgICAgICAgICAgICAgIC5kb25lKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB0YXNrSWQgPSB0aGlzLl9icmlkZ2UuZXhlYyhcclxuICAgICAgICAgICAgICAgICAgICAgICAgKHJlc3VsdDogSVJlc3VsdCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFNVQ0NFU1NfUFJPR1JFU1MgPT09IHJlc3VsdC5jb2RlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFvcHQudXNlUmF3UGx1Z2luUmVzdWx0ICYmIG51bGwgIT0gcmVzdWx0LnBhcmFtcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZi5ub3RpZnkoLi4uWy4uLnJlc3VsdC5wYXJhbXMsIHJlc3VsdF0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRmLm5vdGlmeShyZXN1bHQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFvcHQudXNlUmF3UGx1Z2luUmVzdWx0ICYmIG51bGwgIT0gcmVzdWx0LnBhcmFtcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZi5yZXNvbHZlKC4uLlsuLi5yZXN1bHQucGFyYW1zLCByZXN1bHRdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZi5yZXNvbHZlKHJlc3VsdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAoZXJyb3I6IElSZXN1bHQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcHQudXNlUmF3UGx1Z2luUmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGYucmVqZWN0KGVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGYucmVqZWN0KGNvbnZlcnRFcnJvckluZm8oZXJyb3IpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kLCBhcmdzLCBvcHRpb25zXHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gc2V0IGludGVybmFsIHByb3BlcnRpZXMuXHJcbiAgICAgICAgICAgICAgICAgICAgKDxhbnk+cHJvbWlzZSkuX2JyaWRnZSA9IHRoaXMuX2JyaWRnZTtcclxuICAgICAgICAgICAgICAgICAgICAoPGFueT5wcm9taXNlKS5fdGFza0lkID0gdGFza0lkO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5jYXRjaCgocmVhc29uKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGYucmVqZWN0KHJlYXNvbik7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBwcm9taXNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIENhbmNlbCBhbGwgdGFza3MuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gb3B0aW9ucyBbaW5dIHNldCBleGVjdXRlIG9wdGlvbnMuXHJcbiAgICAgICAgICogQHJldHVybnMgUHJvbWlzZSBvYmplY3QuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIOOBmeOBueOBpuOBruOCv+OCueOCr+OBruOCreODo+ODs+OCu+ODq1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIG9wdGlvbnMgW2luXSDlrp/ooYzjgqrjg5fjgrfjg6fjg7PjgpLmjIflrppcclxuICAgICAgICAgKiBAcmV0dXJucyBQcm9taXNlIOOCquODluOCuOOCp+OCr+ODiFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBjYW5jZWwob3B0aW9ucz86IEV4ZWNPcHRpb25zKTogSVByb21pc2VCYXNlPElSZXN1bHQ+IHtcclxuICAgICAgICAgICAgY29uc3QgZGYgPSAkLkRlZmVycmVkKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IG9wdCA9ICQuZXh0ZW5kKHt9LCB0aGlzLl9vcHRpb25zLCBvcHRpb25zKTtcclxuXHJcbiAgICAgICAgICAgIFV0aWxzLndhaXRGb3JQbHVnaW5SZWFkeSgpXHJcbiAgICAgICAgICAgICAgICAuZG9uZSgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fYnJpZGdlLmNhbmNlbChudWxsLCBvcHQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIChyZXN1bHQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRmLnJlc29sdmUocmVzdWx0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgKGVycm9yKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob3B0LnVzZVJhd1BsdWdpblJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRmLnJlamVjdChlcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRmLnJlamVjdChjb252ZXJ0RXJyb3JJbmZvKGVycm9yKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5jYXRjaCgocmVhc29uKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGYucmVqZWN0KHJlYXNvbik7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIGRmLnByb21pc2UoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBEZXN0cnVjdGlvbiBmb3IgdGhlIGluc3RhbmNlLlxyXG4gICAgICAgICAqIHJlbGVhc2UgTmF0aXZlIGNsYXNzIHJlZmVyZW5jZS4gYWZ0ZXIgdGhhdCwgZXhlYygpIGJlY29tZXMgaW52YWxpZC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBvcHRpb25zIFtpbl0gc2V0IGV4ZWN1dGUgb3B0aW9ucy5cclxuICAgICAgICAgKiBAcmV0dXJucyBQcm9taXNlIG9iamVjdC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICog44Kk44Oz44K544K/44Oz44K544Gu56C05qOEXHJcbiAgICAgICAgICogTmF0aXZlIOOBruWPgueFp+OCkuino+mZpOOBmeOCi+OAguS7pemZjeOAgWV4ZWMg44Gv54Sh5Yq544Go44Gq44KL44CCXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gb3B0aW9ucyBbaW5dIOWun+ihjOOCquODl+OCt+ODp+ODs+OCkuaMh+WumlxyXG4gICAgICAgICAqIEByZXR1cm5zIFByb21pc2Ug44Kq44OW44K444Kn44Kv44OIXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIGRpc3Bvc2Uob3B0aW9ucz86IEV4ZWNPcHRpb25zKTogSVByb21pc2VCYXNlPElSZXN1bHQ+IHtcclxuICAgICAgICAgICAgY29uc3QgZGYgPSAkLkRlZmVycmVkKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IG9wdCA9ICQuZXh0ZW5kKHt9LCB0aGlzLl9vcHRpb25zLCBvcHRpb25zKTtcclxuXHJcbiAgICAgICAgICAgIFV0aWxzLndhaXRGb3JQbHVnaW5SZWFkeSgpXHJcbiAgICAgICAgICAgICAgICAuZG9uZSgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fYnJpZGdlLmRpc3Bvc2Uob3B0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAocmVzdWx0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZi5yZXNvbHZlKHJlc3VsdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIChlcnJvcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9wdC51c2VSYXdQbHVnaW5SZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZi5yZWplY3QoZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZi5yZWplY3QoY29udmVydEVycm9ySW5mbyhlcnJvcikpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAuY2F0Y2goKHJlYXNvbikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGRmLnJlamVjdChyZWFzb24pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiBkZi5wcm9taXNlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgICAgIC8vIHByb3RlY3RlZCBtZXRob2RzXHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBBY2Nlc3MgdG8gUGx1Z2luLk5hdGl2ZUJyaWRnZSBvYmplY3QuXHJcbiAgICAgICAgICogSWYgeW91IHdhbnQgdG8gdXNlIGxvdyBsZXZlbCBleGVjKCksIHlvdSBjYW4gdXNlIHRoaXMgYWNjZXNzb3IuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJucyBQbHVnaW4uTmF0aXZlQnJpZGdlIGluc3RhbmNlLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiBQbHVnaW4uTmF0aXZlQnJpZGdlIOOCquODluOCuOOCp+OCr+ODiOOBuOOBruOCouOCr+OCu+OCuVxyXG4gICAgICAgICAqIOS9juODrOODmeODqyBleGVjKCkg44KS5L2/55So44GX44Gf44GE5aC05ZCI44Gr5Yip55So5Y+v6IO9XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJucyBQbHVnaW4uTmF0aXZlQnJpZGdlIOOCpOODs+OCueOCv+ODs+OCuS5cclxuICAgICAgICAgKi9cclxuICAgICAgICBwcm90ZWN0ZWQgZ2V0IGJyaWRnZSgpOiBQbHVnaW4uTmF0aXZlQnJpZGdlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2JyaWRnZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IF9jb3JlID0gcmVxdWlyZShcImNkcC5jb3JlXCIpO1xyXG5cclxuLy8gQ0RQIHN0dWZmXHJcbmV4cG9ydCBjb25zdCBnbG9iYWwgICAgICAgICA9IF9jb3JlLmdsb2JhbDtcclxuZXhwb3J0IGNvbnN0IGNvcmVJbml0aWFsaXplID0gX2NvcmUuaW5pdGlhbGl6ZTtcclxuZXhwb3J0IGNvbnN0IHdlYlJvb3QgICAgICAgID0gX2NvcmUud2ViUm9vdDtcclxuZXhwb3J0IGNvbnN0IENvbmZpZyAgICAgICAgID0gX2NvcmUuQ29uZmlnO1xyXG5cclxuLy8gaW50ZXJmYWNlc1xyXG5leHBvcnQgdHlwZSBDb3JlSW5pdE9wdGlvbnMgPSBfY29yZS5Db3JlSW5pdE9wdGlvbnM7XHJcbiIsImltcG9ydCBfY29yZSA9IHJlcXVpcmUoXCJjZHAuY29yZVwiKTtcclxuXHJcbi8vIGVycm9yIHV0aWxzXHJcbmV4cG9ydCB0eXBlICBFcnJvckluZm8gICAgICAgICAgICAgICAgICA9IF9jb3JlLkVycm9ySW5mbztcclxuZXhwb3J0IGNvbnN0IG1ha2VFcnJvckluZm8gICAgICAgICAgICAgID0gX2NvcmUubWFrZUVycm9ySW5mbztcclxuZXhwb3J0IGNvbnN0IG1ha2VDYW5jZWxlZEVycm9ySW5mbyAgICAgID0gX2NvcmUubWFrZUNhbmNlbGVkRXJyb3JJbmZvO1xyXG5leHBvcnQgY29uc3QgaXNDYW5jZWxlZEVycm9yICAgICAgICAgICAgPSBfY29yZS5pc0NhbmNlbGVkRXJyb3I7XHJcbmV4cG9ydCBjb25zdCBlbnN1cmVFcnJvckluZm8gICAgICAgICAgICA9IF9jb3JlLmVuc3VyZUVycm9ySW5mbztcclxuZXhwb3J0IHR5cGUgIFJFU1VMVF9DT0RFICAgICAgICAgICAgICAgID0gX2NvcmUuUkVTVUxUX0NPREU7XHJcbmV4cG9ydCBjb25zdCBSRVNVTFRfQ09ERSAgICAgICAgICAgICAgICA9IF9jb3JlLlJFU1VMVF9DT0RFO1xyXG5leHBvcnQgY29uc3QgREVDTEFSRV9TVUNDRVNTX0NPREUgICAgICAgPSBfY29yZS5ERUNMQVJFX1NVQ0NFU1NfQ09ERTtcclxuZXhwb3J0IGNvbnN0IERFQ0xBUkVfRVJST1JfQ09ERSAgICAgICAgID0gX2NvcmUuREVDTEFSRV9FUlJPUl9DT0RFO1xyXG5leHBvcnQgY29uc3QgU1VDQ0VFREVEICAgICAgICAgICAgICAgICAgPSBfY29yZS5TVUNDRUVERUQ7XHJcbmV4cG9ydCBjb25zdCBGQUlMRUQgICAgICAgICAgICAgICAgICAgICA9IF9jb3JlLkZBSUxFRDtcclxuZXhwb3J0IGNvbnN0IEFTU0lHTl9SRVNVTFRfQ09ERSAgICAgICAgID0gX2NvcmUuQVNTSUdOX1JFU1VMVF9DT0RFO1xyXG5leHBvcnQgY29uc3QgTU9EVUxFX1JFU1VMVF9DT0RFX1JBTkdFICAgPSBfY29yZS5NT0RVTEVfUkVTVUxUX0NPREVfUkFOR0U7XHJcbmV4cG9ydCB0eXBlICBSRVNVTFRfQ09ERV9CQVNFICAgICAgICAgICA9IF9jb3JlLlJFU1VMVF9DT0RFX0JBU0U7XHJcbmV4cG9ydCBjb25zdCBSRVNVTFRfQ09ERV9CQVNFICAgICAgICAgICA9IF9jb3JlLlJFU1VMVF9DT0RFX0JBU0U7XHJcbmV4cG9ydCBjb25zdCBBU1NJR05fUkVTVUxUX0NPREVfQkFTRSAgICA9IF9jb3JlLkFTU0lHTl9SRVNVTFRfQ09ERV9CQVNFO1xyXG4iLCJpbXBvcnQgX3Byb21pc2UgPSByZXF1aXJlKFwiY2RwLnByb21pc2VcIik7XHJcblxyXG4vLyBQcm9taXNlIG1ldGhvZHNcclxuZXhwb3J0IGNvbnN0IG1ha2VQcm9taXNlICAgID0gX3Byb21pc2UubWFrZVByb21pc2U7XHJcbmV4cG9ydCBjb25zdCB3YWl0ICAgICAgICAgICA9IF9wcm9taXNlLndhaXQ7XHJcblxyXG4vLyBAY2xhc3MgUHJvbWlzZU1hbmFnZXJcclxuZXhwb3J0IHR5cGUgIFByb21pc2VNYW5hZ2VyID0gQ0RQLlByb21pc2VNYW5hZ2VyO1xyXG5leHBvcnQgY29uc3QgUHJvbWlzZU1hbmFnZXIgPSBfcHJvbWlzZS5Qcm9taXNlTWFuYWdlcjtcclxuXHJcbi8vIEBjbGFzcyBlczIwMTUgUHJvbWlzZVxyXG5leHBvcnQgdHlwZSAgUHJvbWlzZUNvbnN0cnVjdG9yPFQ+ID0gQ0RQLlByb21pc2VDb25zdHJ1Y3RvcjxUPjtcclxuZXhwb3J0IGNvbnN0IFByb21pc2UgPSBfcHJvbWlzZS5Qcm9taXNlO1xyXG5cclxuLy8gaW50ZXJmYWNlc1xyXG5leHBvcnQgdHlwZSBJUHJvbWlzZUJhc2U8VD4gPSBDRFAuSVByb21pc2VCYXNlPFQ+O1xyXG5leHBvcnQgdHlwZSBJUHJvbWlzZTxUPiAgICAgPSBDRFAuSVByb21pc2U8VD47XHJcbiIsImltcG9ydCBfaTE4biA9IHJlcXVpcmUoXCJjZHAuaTE4blwiKTtcclxuaW1wb3J0IGkxOG4gPSBDRFAuaTE4bjtcclxuXHJcbi8vIENEUCBzdHVmZlxyXG5leHBvcnQgeyBpMThuIH07XHJcblxyXG4vLyBpbnRlcmZhY2VzXHJcbmV4cG9ydCB0eXBlIEkxOE5TZXR0aW5ncyA9IF9pMThuLkkxOE5TZXR0aW5ncztcclxuIiwiLy8vIDxhbWQtZGVwZW5kZW5jeSBwYXRoPVwiY2RwLmZyYW1ld29yay5qcW1cIiAvPlxyXG5cclxuLy8gQ0RQIG1ldGhvZHNcclxuZXhwb3J0IGNvbnN0IHdhaXRGb3JEZXZpY2VSZWFkeSAgID0gQ0RQLndhaXRGb3JEZXZpY2VSZWFkeTtcclxuZXhwb3J0IGNvbnN0IHNldEJhY2tCdXR0b25IYW5kbGVyID0gQ0RQLnNldEJhY2tCdXR0b25IYW5kbGVyO1xyXG4iLCJleHBvcnQgKiBmcm9tIFwiLi9jb3JlL2NvcmVcIjtcclxuZXhwb3J0ICogZnJvbSBcIi4vY29yZS9lcnJvcnNcIjtcclxuZXhwb3J0ICogZnJvbSBcIi4vY29yZS9wcm9taXNlXCI7XHJcbmV4cG9ydCAqIGZyb20gXCIuL2NvcmUvaTE4blwiO1xyXG5leHBvcnQgKiBmcm9tIFwiLi9jb3JlL2ZyYW1ld29yay5qcW1cIjtcclxuIiwiaW1wb3J0ICogYXMgQmFja2JvbmUgZnJvbSBcImJhY2tib25lXCI7XHJcbmltcG9ydCBfZnJhbWV3b3JrID0gcmVxdWlyZShcImNkcC5mcmFtZXdvcmsuanFtXCIpO1xyXG5cclxuLy8gQG1vZHVsZSBQbGF0Zm9ybVxyXG5leHBvcnQgY29uc3QgUGxhdGZvcm0gPSBfZnJhbWV3b3JrLlBsYXRmb3JtO1xyXG5cclxuLy8gRnJhbWV3b3JrIG1ldGhvZHNcclxuZXhwb3J0IGNvbnN0IGdldE9yaWVudGF0aW9uICAgICAgICAgICAgICAgICA9IF9mcmFtZXdvcmsuZ2V0T3JpZW50YXRpb247XHJcbmV4cG9ydCBjb25zdCB0b1VybCAgICAgICAgICAgICAgICAgICAgICAgICAgPSBfZnJhbWV3b3JrLnRvVXJsO1xyXG5leHBvcnQgY29uc3Qgc2V0QmVmb3JlUm91dGVDaGFuZ2VIYW5kbGVyICAgID0gX2ZyYW1ld29yay5zZXRCZWZvcmVSb3V0ZUNoYW5nZUhhbmRsZXI7XHJcblxyXG4vLyBAY2xhc3MgUm91dGVyXHJcbmV4cG9ydCB0eXBlICBSb3V0ZXIgPSBDRFAuRnJhbWV3b3JrLlJvdXRlcjtcclxuZXhwb3J0IGNvbnN0IFJvdXRlciA9IF9mcmFtZXdvcmsuUm91dGVyO1xyXG5cclxuLy8gRnJhbWV3b3JrIENvcmUgQVBJc1xyXG5leHBvcnQgY29uc3QgaW5pdGlhbGl6ZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPSBfZnJhbWV3b3JrLmluaXRpYWxpemU7XHJcbmV4cG9ydCBjb25zdCBpc0luaXRpYWxpemVkICAgICAgICAgICAgICAgICAgICAgICAgICA9IF9mcmFtZXdvcmsuaXNJbml0aWFsaXplZDtcclxuZXhwb3J0IGNvbnN0IHdhaXRGb3JJbml0aWFsaXplICAgICAgICAgICAgICAgICAgICAgID0gX2ZyYW1ld29yay53YWl0Rm9ySW5pdGlhbGl6ZTtcclxuZXhwb3J0IGNvbnN0IHJlZ2lzdGVyT3JpZW50YXRpb25DaGFuZ2VkTGlzdGVuZXIgICAgID0gX2ZyYW1ld29yay5yZWdpc3Rlck9yaWVudGF0aW9uQ2hhbmdlZExpc3RlbmVyO1xyXG5leHBvcnQgY29uc3QgdW5yZWdpc3Rlck9yaWVudGF0aW9uQ2hhbmdlZExpc3RlbmVyICAgPSBfZnJhbWV3b3JrLnVucmVnaXN0ZXJPcmllbnRhdGlvbkNoYW5nZWRMaXN0ZW5lcjtcclxuZXhwb3J0IGNvbnN0IGdldERlZmF1bHRDbGlja0V2ZW50ICAgICAgICAgICAgICAgICAgID0gX2ZyYW1ld29yay5nZXREZWZhdWx0Q2xpY2tFdmVudDtcclxuZXhwb3J0IGNvbnN0IHJlZ2lzdGVyUGFnZSAgICAgICAgICAgICAgICAgICAgICAgICAgID0gX2ZyYW1ld29yay5yZWdpc3RlclBhZ2U7XHJcbmV4cG9ydCBjb25zdCBjb25zdHJ1Y3RQYWdlcyAgICAgICAgICAgICAgICAgICAgICAgICA9IF9mcmFtZXdvcmsuY29uc3RydWN0UGFnZXM7XHJcbmV4cG9ydCBjb25zdCBkaXNwb3NlUGFnZXMgICAgICAgICAgICAgICAgICAgICAgICAgICA9IF9mcmFtZXdvcmsuZGlzcG9zZVBhZ2VzO1xyXG5leHBvcnQgY29uc3Qgc2V0QmFja0J1dHRvbkhhbmRsZXIgICAgICAgICAgICAgICAgICAgPSBDRFAuc2V0QmFja0J1dHRvbkhhbmRsZXI7XHJcblxyXG4vLyBAY2xhc3MgUGFnZVxyXG5leHBvcnQgdHlwZSAgUGFnZSA9IENEUC5GcmFtZXdvcmsuUGFnZTtcclxuZXhwb3J0IGNvbnN0IFBhZ2UgPSBfZnJhbWV3b3JrLlBhZ2U7XHJcblxyXG4vLyBpbnRlcmZhY2VzXHJcbmV4cG9ydCB0eXBlICBNb2RlbCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPSBCYWNrYm9uZS5Nb2RlbDtcclxuZXhwb3J0IGNvbnN0IE1vZGVsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA9IF9mcmFtZXdvcmsuTW9kZWw7XHJcbmV4cG9ydCB0eXBlICBDb2xsZWN0aW9uPFRNb2RlbCBleHRlbmRzIE1vZGVsPiAgICAgICAgICAgPSBCYWNrYm9uZS5Db2xsZWN0aW9uPFRNb2RlbD47XHJcbmV4cG9ydCBjb25zdCBDb2xsZWN0aW9uICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPSBfZnJhbWV3b3JrLkNvbGxlY3Rpb247XHJcbmV4cG9ydCB0eXBlICBWaWV3PFRNb2RlbCBleHRlbmRzIE1vZGVsID0gTW9kZWw+ICAgICAgICAgPSBCYWNrYm9uZS5WaWV3PFRNb2RlbD47XHJcbmV4cG9ydCBjb25zdCBWaWV3ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPSBfZnJhbWV3b3JrLlZpZXc7XHJcbmV4cG9ydCB0eXBlICBFdmVudHMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPSBCYWNrYm9uZS5FdmVudHM7XHJcbmV4cG9ydCBjb25zdCBFdmVudHMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPSBfZnJhbWV3b3JrLkV2ZW50cztcclxuZXhwb3J0IHR5cGUgIE1vZGVsU2V0T3B0aW9ucyAgICAgICAgICAgICAgICAgICAgICAgICAgICA9IENEUC5GcmFtZXdvcmsuTW9kZWxTZXRPcHRpb25zO1xyXG5leHBvcnQgdHlwZSAgTW9kZWxGZXRjaE9wdGlvbnMgICAgICAgICAgICAgICAgICAgICAgICAgID0gQ0RQLkZyYW1ld29yay5Nb2RlbEZldGNoT3B0aW9ucztcclxuZXhwb3J0IHR5cGUgIE1vZGVsU2F2ZU9wdGlvbnMgICAgICAgICAgICAgICAgICAgICAgICAgICA9IENEUC5GcmFtZXdvcmsuTW9kZWxTYXZlT3B0aW9ucztcclxuZXhwb3J0IHR5cGUgIE1vZGVsRGVzdHJveU9wdGlvbnMgICAgICAgICAgICAgICAgICAgICAgICA9IENEUC5GcmFtZXdvcmsuTW9kZWxEZXN0cm95T3B0aW9ucztcclxuZXhwb3J0IHR5cGUgIFZpZXdPcHRpb25zPFRNb2RlbCBleHRlbmRzIE1vZGVsID0gTW9kZWw+ICA9IENEUC5GcmFtZXdvcmsuVmlld09wdGlvbnM8VE1vZGVsPjtcclxuZXhwb3J0IHR5cGUgIE9yaWVudGF0aW9uICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA9IENEUC5GcmFtZXdvcmsuT3JpZW50YXRpb247XHJcbmV4cG9ydCBjb25zdCBPcmllbnRhdGlvbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPSBfZnJhbWV3b3JrLk9yaWVudGF0aW9uO1xyXG5leHBvcnQgdHlwZSAgUGFnZVRyYW5zaXRpb25EaXJlY3Rpb24gICAgICAgICAgICAgICAgICAgID0gQ0RQLkZyYW1ld29yay5QYWdlVHJhbnNpdGlvbkRpcmVjdGlvbjtcclxuZXhwb3J0IHR5cGUgIEludGVudCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA9IENEUC5GcmFtZXdvcmsuSW50ZW50O1xyXG5leHBvcnQgdHlwZSAgUGFnZVN0YWNrICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID0gQ0RQLkZyYW1ld29yay5QYWdlU3RhY2s7XHJcbmV4cG9ydCB0eXBlICBTdWJGbG93UGFyYW0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPSBDRFAuRnJhbWV3b3JrLlN1YkZsb3dQYXJhbTtcclxuZXhwb3J0IHR5cGUgIFJvdXRlck9wdGlvbnMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA9IENEUC5GcmFtZXdvcmsuUm91dGVyT3B0aW9ucztcclxuZXhwb3J0IHR5cGUgIE5hdmlnYXRlT3B0aW9ucyAgICAgICAgICAgICAgICAgICAgICAgICAgICA9IENEUC5GcmFtZXdvcmsuTmF2aWdhdGVPcHRpb25zO1xyXG5leHBvcnQgdHlwZSAgSU9yaWVudGF0aW9uQ2hhbmdlZExpc3RlbmVyICAgICAgICAgICAgICAgID0gQ0RQLkZyYW1ld29yay5JT3JpZW50YXRpb25DaGFuZ2VkTGlzdGVuZXI7XHJcbmV4cG9ydCB0eXBlICBJQmFja0J1dHRvbkV2ZW50TGlzdGVuZXIgICAgICAgICAgICAgICAgICAgPSBDRFAuRnJhbWV3b3JrLklCYWNrQnV0dG9uRXZlbnRMaXN0ZW5lcjtcclxuZXhwb3J0IHR5cGUgIElDb21tYW5kTGlzdGVuZXIgICAgICAgICAgICAgICAgICAgICAgICAgICA9IENEUC5GcmFtZXdvcmsuSUNvbW1hbmRMaXN0ZW5lcjtcclxuZXhwb3J0IHR5cGUgIFBhZ2VDb25zdHJ1Y3RPcHRpb25zICAgICAgICAgICAgICAgICAgICAgICA9IENEUC5GcmFtZXdvcmsuUGFnZUNvbnN0cnVjdE9wdGlvbnM7XHJcbmV4cG9ydCB0eXBlICBJUGFnZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPSBDRFAuRnJhbWV3b3JrLklQYWdlO1xyXG5leHBvcnQgdHlwZSAgU2hvd0V2ZW50RGF0YSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID0gQ0RQLkZyYW1ld29yay5TaG93RXZlbnREYXRhO1xyXG5leHBvcnQgdHlwZSAgSGlkZUV2ZW50RGF0YSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID0gQ0RQLkZyYW1ld29yay5IaWRlRXZlbnREYXRhO1xyXG5leHBvcnQgdHlwZSAgRnJhbWV3b3JrT3B0aW9ucyAgICAgICAgICAgICAgICAgICAgICAgICAgID0gQ0RQLkZyYW1ld29yay5GcmFtZXdvcmtPcHRpb25zO1xyXG4iLCJpbXBvcnQgKiBhcyBfZXJyb3JzIGZyb20gXCIuL2NvcmUvZXJyb3JzXCI7XHJcbmV4cG9ydCAqIGZyb20gXCIuL2NvcmUvcHJvbWlzZVwiO1xyXG5leHBvcnQgKiBmcm9tIFwiLi9mcmFtZXdvcmsvanFtXCI7XHJcblxyXG4vLyBjb3JlIGVycm9yIHV0aWxzXHJcbmV4cG9ydCB7IF9lcnJvcnMgYXMgRXJyb3JVdGlscyB9O1xyXG5cclxuZXhwb3J0IHR5cGUgRXJyb3JJbmZvICAgICAgICAgICAgICAgPSBfZXJyb3JzLkVycm9ySW5mbztcclxuZXhwb3J0IGNvbnN0IG1ha2VFcnJvckluZm8gICAgICAgICAgPSBfZXJyb3JzLm1ha2VFcnJvckluZm87XHJcbmV4cG9ydCBjb25zdCBtYWtlQ2FuY2VsZWRFcnJvckluZm8gID0gX2Vycm9ycy5tYWtlQ2FuY2VsZWRFcnJvckluZm87XHJcbmV4cG9ydCBjb25zdCBpc0NhbmNlbGVkRXJyb3IgICAgICAgID0gX2Vycm9ycy5pc0NhbmNlbGVkRXJyb3I7XHJcbmV4cG9ydCBjb25zdCBlbnN1cmVFcnJvckluZm8gICAgICAgID0gX2Vycm9ycy5lbnN1cmVFcnJvckluZm87XHJcblxyXG5jb25zdCBfQ0RQX0ZSQU1FV09SSyA9IENEUC5GcmFtZXdvcms7XHJcbmV4cG9ydCBkZWZhdWx0IF9DRFBfRlJBTUVXT1JLO1xyXG4iLCJpbXBvcnQgX3Rvb2xzID0gcmVxdWlyZShcImNkcC50b29sc1wiKTtcclxuXHJcbi8vIFRvb2xzIEFQSXNcclxuZXhwb3J0IGNvbnN0IGFicyAgICAgICAgICAgICAgICAgICAgPSBfdG9vbHMuYWJzO1xyXG5leHBvcnQgY29uc3QgbWF4ICAgICAgICAgICAgICAgICAgICA9IF90b29scy5tYXg7XHJcbmV4cG9ydCBjb25zdCBtaW4gICAgICAgICAgICAgICAgICAgID0gX3Rvb2xzLm1pbjtcclxuZXhwb3J0IGNvbnN0IHRvWmVyb1BhZGRpbmcgICAgICAgICAgPSBfdG9vbHMudG9aZXJvUGFkZGluZztcclxuZXhwb3J0IGNvbnN0IGdldFN0cmluZ1NpemUgICAgICAgICAgPSBfdG9vbHMuZ2V0U3RyaW5nU2l6ZTtcclxuZXhwb3J0IGNvbnN0IHRvU3RyaW5nQ2h1bmtzICAgICAgICAgPSBfdG9vbHMudG9TdHJpbmdDaHVua3M7XHJcbmV4cG9ydCBjb25zdCBpbmhlcml0ICAgICAgICAgICAgICAgID0gX3Rvb2xzLmluaGVyaXQ7XHJcbmV4cG9ydCBjb25zdCBtaXhpbiAgICAgICAgICAgICAgICAgID0gX3Rvb2xzLm1peGluO1xyXG5leHBvcnQgY29uc3QgZXh0ZW5kICAgICAgICAgICAgICAgICA9IF90b29scy5leHRlbmQ7XHJcbmV4cG9ydCBjb25zdCBnZXREZXZpY2VQaXhjZWxSYXRpbyAgID0gX3Rvb2xzLmdldERldmljZVBpeGNlbFJhdGlvO1xyXG5leHBvcnQgY29uc3QgZ2V0Q2FudmFzICAgICAgICAgICAgICA9IF90b29scy5nZXRDYW52YXM7XHJcbmV4cG9ydCBjb25zdCBlbnN1cmVJbWFnZUxvYWRlZCAgICAgID0gX3Rvb2xzLmVuc3VyZUltYWdlTG9hZGVkO1xyXG5leHBvcnQgY29uc3QgcmVzaXplSW1hZ2UgICAgICAgICAgICA9IF90b29scy5yZXNpemVJbWFnZTtcclxuXHJcbi8vIEBjbGFzcyBCaW5hcnlcclxuZXhwb3J0IHR5cGUgIEJpbmFyeSA9IENEUC5Ub29scy5CaW5hcnk7XHJcbmV4cG9ydCBjb25zdCBCaW5hcnkgPSBfdG9vbHMuQmluYXJ5O1xyXG5cclxuLy8gQGNsYXNzIERhdGVUaW1lXHJcbmV4cG9ydCB0eXBlICBEYXRlVGltZSA9IENEUC5Ub29scy5EYXRlVGltZTtcclxuZXhwb3J0IGNvbnN0IERhdGVUaW1lID0gX3Rvb2xzLkRhdGVUaW1lO1xyXG5cclxuLy8gQGNsYXNzIFRlbXBsYXRlXHJcbmV4cG9ydCB0eXBlICBUZW1wbGF0ZSA9IENEUC5Ub29scy5UZW1wbGF0ZTtcclxuZXhwb3J0IGNvbnN0IFRlbXBsYXRlID0gX3Rvb2xzLlRlbXBsYXRlO1xyXG5cclxuLy8gQGNsYXNzIFByb2dyZXNzQ291bnRlclxyXG5leHBvcnQgdHlwZSAgUHJvZ3Jlc3NDb3VudGVyT3B0aW9ucyA9IENEUC5Ub29scy5Qcm9ncmVzc0NvdW50ZXJPcHRpb25zO1xyXG5leHBvcnQgdHlwZSAgUHJvZ3Jlc3NDb3VudGVyUmVzdWx0ICA9IENEUC5Ub29scy5Qcm9ncmVzc0NvdW50ZXJSZXN1bHQ7XHJcbmV4cG9ydCB0eXBlICBQcm9ncmVzc0NvdW50ZXIgICAgICAgID0gQ0RQLlRvb2xzLlByb2dyZXNzQ291bnRlcjtcclxuZXhwb3J0IGNvbnN0IFByb2dyZXNzQ291bnRlciAgICAgICAgPSBfdG9vbHMuUHJvZ3Jlc3NDb3VudGVyO1xyXG5cclxuLy8gaW50ZXJmYWNlc1xyXG5leHBvcnQgdHlwZSBKU1QgPSBDRFAuVG9vbHMuSlNUO1xyXG4iLCJleHBvcnQgKiBmcm9tIFwiLi90b29scy90b29sc1wiO1xyXG5cclxuY29uc3QgX0NEUF9UT09MUyA9IENEUC5Ub29scztcclxuZXhwb3J0IGRlZmF1bHQgX0NEUF9UT09MUztcclxuIiwiaW1wb3J0IF91aSA9IHJlcXVpcmUoXCJjZHAudWkubGlzdHZpZXdcIik7XHJcblxyXG4vLyBnbG9iYWwgY29uZmlnXHJcbmV4cG9ydCBjb25zdCBMaXN0Vmlld0dsb2JhbENvbmZpZyA9IF91aS5MaXN0Vmlld0dsb2JhbENvbmZpZztcclxuXHJcbi8vIEBjbGFzcyBMaW5lUHJvZmlsZVxyXG5leHBvcnQgdHlwZSAgTGluZVByb2ZpbGUgPSBDRFAuVUkuTGluZVByb2ZpbGU7XHJcbmV4cG9ydCBjb25zdCBMaW5lUHJvZmlsZSA9IF91aS5MaW5lUHJvZmlsZTtcclxuXHJcbi8vIEBjbGFzcyBHcm91cFByb2ZpbGVcclxuZXhwb3J0IHR5cGUgR3JvdXBQcm9maWxlID0gQ0RQLlVJLkdyb3VwUHJvZmlsZTtcclxuZXhwb3J0IGNvbnN0ICBHcm91cFByb2ZpbGUgPSBfdWkuR3JvdXBQcm9maWxlO1xyXG5cclxuLy8gTGlzdFZpZXcgQVBJc1xyXG5leHBvcnQgY29uc3QgY29tcG9zZVZpZXdzID0gX3VpLmNvbXBvc2VWaWV3cztcclxuZXhwb3J0IGNvbnN0IGRlcml2ZVZpZXdzICA9IF91aS5kZXJpdmVWaWV3cztcclxuZXhwb3J0IGNvbnN0IG1peGluVmlld3MgICA9IF91aS5taXhpblZpZXdzO1xyXG5cclxuLy8gQGNsYXNzIFN0YXR1c01hbmFnZXJcclxuZXhwb3J0IHR5cGUgIFN0YXR1c01hbmFnZXIgPSBDRFAuVUkuU3RhdHVzTWFuYWdlcjtcclxuZXhwb3J0IGNvbnN0IFN0YXR1c01hbmFnZXIgPSBfdWkuU3RhdHVzTWFuYWdlcjtcclxuXHJcbi8vIEBjbGFzcyBQYWdlUHJvZmlsZVxyXG5leHBvcnQgdHlwZSAgUGFnZVByb2ZpbGUgPSBDRFAuVUkuUGFnZVByb2ZpbGU7XHJcbmV4cG9ydCBjb25zdCBQYWdlUHJvZmlsZSA9IF91aS5QYWdlUHJvZmlsZTtcclxuXHJcbi8vIEBjbGFzcyBTY3JvbGxlckVsZW1lbnRcclxuZXhwb3J0IHR5cGUgIFNjcm9sbGVyRWxlbWVudCA9IENEUC5VSS5TY3JvbGxlckVsZW1lbnQ7XHJcbmV4cG9ydCBjb25zdCBTY3JvbGxlckVsZW1lbnQgPSBfdWkuU2Nyb2xsZXJFbGVtZW50O1xyXG5cclxuLy8gQGNsYXNzIFNjcm9sbGVyTmF0aXZlXHJcbmV4cG9ydCBjb25zdCBTY3JvbGxlck5hdGl2ZSA9IF91aS5TY3JvbGxlck5hdGl2ZTtcclxuXHJcbi8vIEBjbGFzcyBTY3JvbGxlcklTY3JvbGxcclxuZXhwb3J0IHR5cGUgIFNjcm9sbGVySVNjcm9sbCA9IENEUC5VSS5TY3JvbGxlcklTY3JvbGw7XHJcbmV4cG9ydCBjb25zdCBTY3JvbGxlcklTY3JvbGwgPSBfdWkuU2Nyb2xsZXJJU2Nyb2xsO1xyXG5cclxuLy8gQGNsYXNzIExpc3RJdGVtVmlld1xyXG5leHBvcnQgdHlwZSBMaXN0SXRlbVZpZXc8VE1vZGVsIGV4dGVuZHMgQmFja2JvbmUuTW9kZWwgPSBCYWNrYm9uZS5Nb2RlbD4gPSBDRFAuVUkuTGlzdEl0ZW1WaWV3PFRNb2RlbD47XHJcbmV4cG9ydCBjb25zdCBMaXN0SXRlbVZpZXcgPSBfdWkuTGlzdEl0ZW1WaWV3O1xyXG5cclxuLy8gQGNsYXNzIFNjcm9sbE1hbmFnZXJcclxuZXhwb3J0IHR5cGUgIFNjcm9sbE1hbmFnZXIgPSBDRFAuVUkuU2Nyb2xsTWFuYWdlcjtcclxuZXhwb3J0IGNvbnN0IFNjcm9sbE1hbmFnZXIgPSBfdWkuU2Nyb2xsTWFuYWdlcjtcclxuXHJcbi8vIEBjbGFzcyBMaXN0Vmlld1xyXG5leHBvcnQgdHlwZSBMaXN0VmlldzxUTW9kZWwgZXh0ZW5kcyBCYWNrYm9uZS5Nb2RlbCA9IEJhY2tib25lLk1vZGVsPiA9IENEUC5VSS5MaXN0VmlldzxUTW9kZWw+O1xyXG5leHBvcnQgY29uc3QgTGlzdFZpZXcgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID0gX3VpLkxpc3RWaWV3O1xyXG5cclxuLy8gQGNsYXNzIEdyb3VwTGlzdEl0ZW1WaWV3XHJcbmV4cG9ydCB0eXBlIEdyb3VwTGlzdEl0ZW1WaWV3PFRNb2RlbCBleHRlbmRzIEJhY2tib25lLk1vZGVsID0gQmFja2JvbmUuTW9kZWw+ID0gQ0RQLlVJLkdyb3VwTGlzdEl0ZW1WaWV3PFRNb2RlbD47XHJcbmV4cG9ydCBjb25zdCBHcm91cExpc3RJdGVtVmlldyA9IF91aS5Hcm91cExpc3RJdGVtVmlldztcclxuXHJcbi8vIEBjbGFzcyBFeHBhbmRNYW5hZ2VyXHJcbmV4cG9ydCB0eXBlICBFeHBhbmRNYW5hZ2VyID0gQ0RQLlVJLkV4cGFuZE1hbmFnZXI7XHJcbmV4cG9ydCBjb25zdCBFeHBhbmRNYW5hZ2VyID0gX3VpLkV4cGFuZE1hbmFnZXI7XHJcblxyXG4vLyBAY2xhc3MgRXhwYW5kYWJsZUxpc3RWaWV3XHJcbmV4cG9ydCB0eXBlIEV4cGFuZGFibGVMaXN0VmlldzxUTW9kZWwgZXh0ZW5kcyBCYWNrYm9uZS5Nb2RlbCA9IEJhY2tib25lLk1vZGVsPiA9IENEUC5VSS5FeHBhbmRhYmxlTGlzdFZpZXc8VE1vZGVsPjtcclxuZXhwb3J0IGNvbnN0IEV4cGFuZGFibGVMaXN0VmlldyA9IF91aS5FeHBhbmRhYmxlTGlzdFZpZXc7XHJcblxyXG4vLyBpbnRlcmZhY2VzXHJcbmV4cG9ydCB0eXBlIExpc3RWaWV3T3B0aW9ucyAgICAgICAgID0gQ0RQLlVJLkxpc3RWaWV3T3B0aW9ucztcclxuZXhwb3J0IHR5cGUgSUxpc3RWaWV3RnJhbWV3b3JrICAgICAgPSBDRFAuVUkuSUxpc3RWaWV3RnJhbWV3b3JrO1xyXG5leHBvcnQgdHlwZSBJU2Nyb2xsZXIgICAgICAgICAgICAgICA9IENEUC5VSS5JU2Nyb2xsZXI7XHJcbmV4cG9ydCB0eXBlIElTY3JvbGxhYmxlICAgICAgICAgICAgID0gQ0RQLlVJLklTY3JvbGxhYmxlO1xyXG5leHBvcnQgdHlwZSBJQmFja3VwUmVzdG9yZSAgICAgICAgICA9IENEUC5VSS5JQmFja3VwUmVzdG9yZTtcclxuZXhwb3J0IHR5cGUgVmlld0NvbnN0cnVjdG9yICAgICAgICAgPSBDRFAuVUkuVmlld0NvbnN0cnVjdG9yO1xyXG5leHBvcnQgdHlwZSBJQ29tcG9zYWJsZVZpZXcgICAgICAgICA9IENEUC5VSS5JQ29tcG9zYWJsZVZpZXc7XHJcbmV4cG9ydCB0eXBlIElDb21wb3NhYmxlVmlld1N0YXRpYyAgID0gQ0RQLlVJLklDb21wb3NhYmxlVmlld1N0YXRpYztcclxuZXhwb3J0IHR5cGUgVXBkYXRlSGVpZ2h0T3B0aW9ucyAgICAgPSBDRFAuVUkuVXBkYXRlSGVpZ2h0T3B0aW9ucztcclxuZXhwb3J0IHR5cGUgSUxpc3RJdGVtVmlldyAgICAgICAgICAgPSBDRFAuVUkuSUxpc3RJdGVtVmlldztcclxuZXhwb3J0IHR5cGUgQmFzZUxpc3RJdGVtVmlldyAgICAgICAgPSBDRFAuVUkuQmFzZUxpc3RJdGVtVmlldztcclxuZXhwb3J0IHR5cGUgRW5zdXJlVmlzaWJsZU9wdGlvbnMgICAgPSBDRFAuVUkuRW5zdXJlVmlzaWJsZU9wdGlvbnM7XHJcbmV4cG9ydCB0eXBlIElMaXN0VmlldyAgICAgICAgICAgICAgID0gQ0RQLlVJLklMaXN0VmlldztcclxuZXhwb3J0IHR5cGUgQmFzZUxpc3RWaWV3ICAgICAgICAgICAgPSBDRFAuVUkuQmFzZUxpc3RWaWV3O1xyXG5leHBvcnQgdHlwZSBJU3RhdHVzTWFuYWdlciAgICAgICAgICA9IENEUC5VSS5JU3RhdHVzTWFuYWdlcjtcclxuZXhwb3J0IHR5cGUgSUV4cGFuZE1hbmFnZXIgICAgICAgICAgPSBDRFAuVUkuSUV4cGFuZE1hbmFnZXI7XHJcbmV4cG9ydCB0eXBlIElFeHBhbmRhYmxlTGlzdFZpZXcgICAgID0gQ0RQLlVJLklFeHBhbmRhYmxlTGlzdFZpZXc7XHJcbmV4cG9ydCB0eXBlIEJhc2VFeHBhbmRhYmxlTGlzdFZpZXcgID0gQ0RQLlVJLkJhc2VFeHBhbmRhYmxlTGlzdFZpZXc7XHJcbmV4cG9ydCB0eXBlIExpc3RJdGVtVmlld09wdGlvbnM8VE1vZGVsIGV4dGVuZHMgQmFja2JvbmUuTW9kZWwgPSBCYWNrYm9uZS5Nb2RlbD4gICAgICA9IENEUC5VSS5MaXN0SXRlbVZpZXdPcHRpb25zPFRNb2RlbD47XHJcbmV4cG9ydCB0eXBlIExpc3RWaWV3Q29uc3RydWN0T3B0aW9uczxUTW9kZWwgZXh0ZW5kcyBCYWNrYm9uZS5Nb2RlbCA9IEJhY2tib25lLk1vZGVsPiA9IENEUC5VSS5MaXN0Vmlld0NvbnN0cnVjdE9wdGlvbnM8VE1vZGVsPjtcclxuZXhwb3J0IHR5cGUgR3JvdXBMaXN0SXRlbVZpZXdPcHRpb25zPFRNb2RlbCBleHRlbmRzIEJhY2tib25lLk1vZGVsID0gQmFja2JvbmUuTW9kZWw+ID0gQ0RQLlVJLkdyb3VwTGlzdEl0ZW1WaWV3T3B0aW9uczxUTW9kZWw+O1xyXG4iLCJpbXBvcnQgX3VpID0gcmVxdWlyZShcImNkcC51aS5qcW1cIik7XHJcblxyXG4vLyBAY2xhc3MgVGhlbWVcclxuZXhwb3J0IHR5cGUgIFRoZW1lICAgPSBDRFAuVUkuVGhlbWU7XHJcbmV4cG9ydCBjb25zdCBUaGVtZSAgID0gX3VpLlRoZW1lO1xyXG5cclxuZXhwb3J0IHR5cGUgUGxhdGZvcm1UcmFuc2l0aW9uICA9IENEUC5VSS5QbGF0Zm9ybVRyYW5zaXRpb247XHJcbmV4cG9ydCB0eXBlIFRyYW5zaXRpb25NYXAgICAgICAgPSBDRFAuVUkuVHJhbnNpdGlvbk1hcDtcclxuZXhwb3J0IHR5cGUgVGhlbWVJbml0T3B0aW9ucyAgICA9IENEUC5VSS5UaGVtZUluaXRPcHRpb25zO1xyXG5cclxuLy8gQGNsYXNzIEV4dGVuc2lvbk1hbmFnZXJcclxuZXhwb3J0IHR5cGUgIEV4dGVuc2lvbk1hbmFnZXIgICAgPSBDRFAuVUkuRXh0ZW5zaW9uTWFuYWdlcjtcclxuZXhwb3J0IGNvbnN0IEV4dGVuc2lvbk1hbmFnZXIgICAgPSBfdWkuRXh0ZW5zaW9uTWFuYWdlcjtcclxuXHJcbmV4cG9ydCB0eXBlIERvbUV4dGVuc2lvbk9wdGlvbnMgPSBDRFAuVUkuRG9tRXh0ZW5zaW9uT3B0aW9ucztcclxuZXhwb3J0IHR5cGUgRG9tRXh0ZW5zaW9uICAgICAgICA9IENEUC5VSS5Eb21FeHRlbnNpb247XHJcblxyXG4vLyBAbW9kdWxlIFRvYXN0XHJcbmV4cG9ydCBtb2R1bGUgVG9hc3Qge1xyXG4gICAgLy8gVG9hc3Qgc3R1ZmZcclxuICAgIGV4cG9ydCBjb25zdCBMRU5HVEhfU0hPUlQgICAgICAgICA9IF91aS5Ub2FzdC5MRU5HVEhfU0hPUlQ7XHJcbiAgICBleHBvcnQgY29uc3QgTEVOR1RIX0xPTkcgICAgICAgICAgPSBfdWkuVG9hc3QuTEVOR1RIX0xPTkc7XHJcbiAgICBleHBvcnQgY29uc3QgU3R5bGVCdWlsZGVyRGVmYXVsdCAgPSBfdWkuVG9hc3QuU3R5bGVCdWlsZGVyRGVmYXVsdDtcclxuICAgIGV4cG9ydCBjb25zdCBzaG93ICAgICAgICAgICAgICAgICA9IF91aS5Ub2FzdC5zaG93O1xyXG4gICAgLy8gaW50ZXJmYWNlc1xyXG4gICAgZXhwb3J0IHR5cGUgT2Zmc2V0WCAgICAgICAgICAgICA9IENEUC5VSS5Ub2FzdC5PZmZzZXRYO1xyXG4gICAgZXhwb3J0IHR5cGUgT2Zmc2V0WSAgICAgICAgICAgICA9IENEUC5VSS5Ub2FzdC5PZmZzZXRZO1xyXG4gICAgZXhwb3J0IHR5cGUgU3R5bGVCdWlsZGVyICAgICAgICA9IENEUC5VSS5Ub2FzdC5TdHlsZUJ1aWxkZXI7XHJcbn1cclxuXHJcbi8vIEBjbGFzcyBEaWFsb2dcclxuZXhwb3J0IHR5cGUgIERpYWxvZyA9IENEUC5VSS5EaWFsb2c7XHJcbmV4cG9ydCBjb25zdCBEaWFsb2cgPSBfdWkuRGlhbG9nO1xyXG5cclxuZXhwb3J0IHR5cGUgRGlhbG9nT3B0aW9ucyA9IENEUC5VSS5EaWFsb2dPcHRpb25zO1xyXG5cclxuLy8gQGZ1bmN0aW9ucyBEaWFsb2dDb21tb25zXHJcbmV4cG9ydCBjb25zdCBhbGVydCAgICA9IF91aS5hbGVydDtcclxuZXhwb3J0IGNvbnN0IGNvbmZpcm0gID0gX3VpLmNvbmZpcm07XHJcbmV4cG9ydCBjb25zdCBwcm9tcHQgICA9IF91aS5wcm9tcHQ7XHJcblxyXG5pbXBvcnQgTW9kZWwgPSBDRFAuRnJhbWV3b3JrLk1vZGVsO1xyXG5cclxuLy8gQGNsYXNzIEJhc2VIZWFkZXJWaWV3XHJcbmV4cG9ydCB0eXBlIEJhc2VIZWFkZXJWaWV3PFRNb2RlbCBleHRlbmRzIE1vZGVsID0gTW9kZWw+ID0gQ0RQLlVJLkJhc2VIZWFkZXJWaWV3PFRNb2RlbD47XHJcbmV4cG9ydCBjb25zdCBCYXNlSGVhZGVyVmlldyA9IF91aS5CYXNlSGVhZGVyVmlldztcclxuXHJcbmV4cG9ydCB0eXBlIEJhc2VIZWFkZXJWaWV3T3B0aW9uczxUTW9kZWwgZXh0ZW5kcyBNb2RlbCA9IE1vZGVsPiA9IENEUC5VSS5CYXNlSGVhZGVyVmlld09wdGlvbnM8VE1vZGVsPjtcclxuXHJcblxyXG4vLyBAY2xhc3MgQmFzZVBhZ2VcclxuZXhwb3J0IHR5cGUgQmFzZVBhZ2U8VE1vZGVsIGV4dGVuZHMgTW9kZWwgPSBNb2RlbD4gPSBDRFAuVUkuQmFzZVBhZ2U8VE1vZGVsPjtcclxuZXhwb3J0IGNvbnN0IEJhc2VQYWdlID0gX3VpLkJhc2VQYWdlO1xyXG5leHBvcnQgdHlwZSBCYXNlUGFnZU9wdGlvbnM8VE1vZGVsIGV4dGVuZHMgTW9kZWwgPSBNb2RlbD4gPSBDRFAuVUkuQmFzZVBhZ2VPcHRpb25zPFRNb2RlbD47XHJcblxyXG4vLyBAY2xhc3MgUGFnZUNvbnRhaW5lclZpZXdcclxuZXhwb3J0IHR5cGUgUGFnZUNvbnRhaW5lclZpZXc8VE1vZGVsIGV4dGVuZHMgTW9kZWwgPSBNb2RlbD4gICAgPSBDRFAuVUkuUGFnZUNvbnRhaW5lclZpZXc8VE1vZGVsPjtcclxuZXhwb3J0IGNvbnN0IFBhZ2VDb250YWluZXJWaWV3ID0gX3VpLlBhZ2VDb250YWluZXJWaWV3O1xyXG5cclxuZXhwb3J0IHR5cGUgUGFnZUNvbnRhaW5lclZpZXdPcHRpb25zPFRNb2RlbCBleHRlbmRzIE1vZGVsID0gTW9kZWw+ID0gQ0RQLlVJLlBhZ2VDb250YWluZXJWaWV3T3B0aW9uczxUTW9kZWw+O1xyXG5cclxuXHJcbi8vIEBjbGFzcyBQYWdlVmlld1xyXG5leHBvcnQgdHlwZSBQYWdlVmlldzxUTW9kZWwgZXh0ZW5kcyBNb2RlbCA9IE1vZGVsPiA9IENEUC5VSS5QYWdlVmlldzxUTW9kZWw+O1xyXG5leHBvcnQgY29uc3QgUGFnZVZpZXcgPSBfdWkuUGFnZVZpZXc7XHJcblxyXG5leHBvcnQgdHlwZSBQYWdlVmlld0NvbnN0cnVjdE9wdGlvbnM8VE1vZGVsIGV4dGVuZHMgTW9kZWwgPSBNb2RlbD4gPSBDRFAuVUkuUGFnZVZpZXdDb25zdHJ1Y3RPcHRpb25zPFRNb2RlbD47XHJcblxyXG4vLyBAY2xhc3MgVGFiVmlldy9UYWJIb3N0Vmlld1xyXG5leHBvcnQgdHlwZSBJVGFiVmlldyA9IENEUC5VSS5JVGFiVmlldztcclxuZXhwb3J0IHR5cGUgVGFiVmlld0NvbnRleHRPcHRpb25zPFRNb2RlbCBleHRlbmRzIE1vZGVsID0gTW9kZWw+ID0gQ0RQLlVJLlRhYlZpZXdDb250ZXh0T3B0aW9uczxUTW9kZWw+O1xyXG5leHBvcnQgdHlwZSBUYWJWaWV3Q29uc3RydWN0aW9uT3B0aW9uczxUTW9kZWwgZXh0ZW5kcyBNb2RlbCA9IE1vZGVsPiA9IENEUC5VSS5UYWJWaWV3Q29uc3RydWN0aW9uT3B0aW9uczxUTW9kZWw+O1xyXG5leHBvcnQgdHlwZSBUYWJWaWV3Q29udGV4dDxUTW9kZWwgZXh0ZW5kcyBNb2RlbCA9IE1vZGVsPiA9IENEUC5VSS5UYWJWaWV3Q29udGV4dDxUTW9kZWw+O1xyXG5leHBvcnQgdHlwZSBUYWJIb3N0Vmlld0NvbnN0cnVjdE9wdGlvbnM8VE1vZGVsIGV4dGVuZHMgTW9kZWwgPSBNb2RlbD4gPSBDRFAuVUkuVGFiSG9zdFZpZXdDb25zdHJ1Y3RPcHRpb25zPFRNb2RlbD47XHJcbmV4cG9ydCB0eXBlIFRhYkhvc3RWaWV3PFRNb2RlbCBleHRlbmRzIE1vZGVsID0gTW9kZWw+ID0gQ0RQLlVJLlRhYkhvc3RWaWV3PFRNb2RlbD47XHJcbmV4cG9ydCBjb25zdCBUYWJIb3N0VmlldyA9IF91aS5UYWJIb3N0VmlldztcclxuZXhwb3J0IHR5cGUgVGFiVmlldzxUTW9kZWwgZXh0ZW5kcyBNb2RlbCA9IE1vZGVsPiA9IENEUC5VSS5UYWJWaWV3PFRNb2RlbD47XHJcbmV4cG9ydCBjb25zdCBUYWJWaWV3ID0gX3VpLlRhYlZpZXc7XHJcblxyXG5cclxuLy8gQGNsYXNzIFBhZ2VMaXN0Vmlld1xyXG5leHBvcnQgdHlwZSBQYWdlTGlzdFZpZXc8VE1vZGVsIGV4dGVuZHMgTW9kZWwgPSBNb2RlbD4gPSBDRFAuVUkuUGFnZUxpc3RWaWV3PFRNb2RlbD47XHJcbmV4cG9ydCBjb25zdCBQYWdlTGlzdFZpZXcgPSBfdWkuUGFnZUxpc3RWaWV3O1xyXG5cclxuZXhwb3J0IHR5cGUgUGFnZUxpc3RWaWV3Q29uc3RydWN0T3B0aW9uczxUTW9kZWwgZXh0ZW5kcyBNb2RlbCA9IE1vZGVsPiA9IENEUC5VSS5QYWdlTGlzdFZpZXdDb25zdHJ1Y3RPcHRpb25zPFRNb2RlbD47XHJcblxyXG4vLyBAY2xhc3MgUGFnZUV4cGFuZGFibGVMaXN0Vmlld1xyXG5leHBvcnQgdHlwZSBQYWdlRXhwYW5kYWJsZUxpc3RWaWV3PFRNb2RlbCBleHRlbmRzIE1vZGVsID0gTW9kZWw+ICAgPSBDRFAuVUkuUGFnZUV4cGFuZGFibGVMaXN0VmlldzxUTW9kZWw+O1xyXG5leHBvcnQgY29uc3QgUGFnZUV4cGFuZGFibGVMaXN0VmlldyA9IF91aS5QYWdlRXhwYW5kYWJsZUxpc3RWaWV3O1xyXG4iLCJpbXBvcnQgKiBhcyBCYWNrYm9uZSBmcm9tIFwiYmFja2JvbmVcIjtcclxuaW1wb3J0ICogYXMgX2ZyYW1ld29yayBmcm9tIFwiLi9mcmFtZXdvcmsvanFtXCI7XHJcbmltcG9ydCAqIGFzIF90b29scyBmcm9tIFwiLi90b29scy90b29sc1wiO1xyXG5leHBvcnQgKiBmcm9tIFwiLi9jb3JlL3Byb21pc2VcIjtcclxuZXhwb3J0ICogZnJvbSBcIi4vdWkvbGlzdHZpZXdcIjtcclxuZXhwb3J0ICogZnJvbSBcIi4vdWkvanFtXCI7XHJcblxyXG4vLyBmcmFtZXdvcmsgdWkgdHlwZXNcclxuZXhwb3J0IHR5cGUgSVBhZ2UgICAgICAgICAgID0gX2ZyYW1ld29yay5JUGFnZTtcclxuZXhwb3J0IHR5cGUgUGFnZSAgICAgICAgICAgID0gX2ZyYW1ld29yay5QYWdlO1xyXG5leHBvcnQgdHlwZSBPcmllbnRhdGlvbiAgICAgPSBfZnJhbWV3b3JrLk9yaWVudGF0aW9uO1xyXG5leHBvcnQgdHlwZSBTaG93RXZlbnREYXRhICAgPSBfZnJhbWV3b3JrLlNob3dFdmVudERhdGE7XHJcbmV4cG9ydCB0eXBlIEhpZGVFdmVudERhdGEgICA9IF9mcmFtZXdvcmsuSGlkZUV2ZW50RGF0YTtcclxuXHJcbmV4cG9ydCB0eXBlICBWaWV3PFRNb2RlbCBleHRlbmRzIF9mcmFtZXdvcmsuTW9kZWwgPSBfZnJhbWV3b3JrLk1vZGVsPiA9IEJhY2tib25lLlZpZXc8VE1vZGVsPjtcclxuZXhwb3J0IGNvbnN0IFZpZXcgPSBfZnJhbWV3b3JrLlZpZXc7XHJcblxyXG4vLyBmcmFtZXdvcmsgdWkgdXRpbHNcclxuZXhwb3J0IGNvbnN0IHRvVXJsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID0gX2ZyYW1ld29yay50b1VybDtcclxuZXhwb3J0IGNvbnN0IHJlZ2lzdGVyUGFnZSAgICAgICAgICAgICAgICAgICAgICAgICAgID0gX2ZyYW1ld29yay5yZWdpc3RlclBhZ2U7XHJcbmV4cG9ydCBjb25zdCBPcmllbnRhdGlvbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA9IF9mcmFtZXdvcmsuT3JpZW50YXRpb247XHJcbmV4cG9ydCBjb25zdCBnZXRPcmllbnRhdGlvbiAgICAgICAgICAgICAgICAgICAgICAgICA9IF9mcmFtZXdvcmsuZ2V0T3JpZW50YXRpb247XHJcbmV4cG9ydCBjb25zdCByZWdpc3Rlck9yaWVudGF0aW9uQ2hhbmdlZExpc3RlbmVyICAgICA9IF9mcmFtZXdvcmsucmVnaXN0ZXJPcmllbnRhdGlvbkNoYW5nZWRMaXN0ZW5lcjtcclxuZXhwb3J0IGNvbnN0IHVucmVnaXN0ZXJPcmllbnRhdGlvbkNoYW5nZWRMaXN0ZW5lciAgID0gX2ZyYW1ld29yay51bnJlZ2lzdGVyT3JpZW50YXRpb25DaGFuZ2VkTGlzdGVuZXI7XHJcblxyXG4vLyB0b29scyB1aSB0eXBlcyAmIHV0aWxzXHJcbmV4cG9ydCB0eXBlIEpTVCAgICAgICAgICAgICA9IF90b29scy5KU1Q7XHJcbmV4cG9ydCBjb25zdCBnZXRUZW1wbGF0ZSAgICA9IF90b29scy5UZW1wbGF0ZS5nZXRKU1Q7XHJcblxyXG5jb25zdCBfQ0RQX1VJID0gQ0RQLlVJO1xyXG5leHBvcnQgZGVmYXVsdCBfQ0RQX1VJO1xyXG4iLCJpbXBvcnQgX2JyaWRnZSA9IHJlcXVpcmUoXCJjZHAubmF0aXZlYnJpZGdlXCIpO1xyXG5cclxuLy8gQGNsYXNzIEdhdGVcclxuZXhwb3J0IHR5cGUgIEdhdGUgPSBDRFAuTmF0aXZlQnJpZGdlLkdhdGU7XHJcbmV4cG9ydCBjb25zdCBHYXRlID0gX2JyaWRnZS5HYXRlO1xyXG5cclxuLy8gaW50ZXJmYWNlc1xyXG5leHBvcnQgdHlwZSBGZWF0dXJlICAgICAgICAgICAgID0gQ0RQLk5hdGl2ZUJyaWRnZS5GZWF0dXJlO1xyXG5leHBvcnQgdHlwZSBDb25zdHJ1Y3RPcHRpb25zICAgID0gQ0RQLk5hdGl2ZUJyaWRnZS5Db25zdHJ1Y3RPcHRpb25zO1xyXG5leHBvcnQgdHlwZSBJUmVzdWx0ICAgICAgICAgICAgID0gQ0RQLk5hdGl2ZUJyaWRnZS5JUmVzdWx0O1xyXG5leHBvcnQgdHlwZSBFeGVjT3B0aW9ucyAgICAgICAgID0gQ0RQLk5hdGl2ZUJyaWRnZS5FeGVjT3B0aW9ucztcclxuIiwiZXhwb3J0ICogZnJvbSBcIi4vYnJpZGdlL25hdGl2ZWJyaWRnZVwiO1xyXG5cclxuY29uc3QgX0NEUF9OQVRJVkVfQlJJREdFID0gQ0RQLk5hdGl2ZUJyaWRnZTtcclxuZXhwb3J0IGRlZmF1bHQgX0NEUF9OQVRJVkVfQlJJREdFO1xyXG4iLCIvLy8gPHJlZmVyZW5jZSBwYXRoPVwiQHR5cGVzL2NkcC5jb3JlLmQudHNcIiAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiQHR5cGVzL2NkcC5wcm9taXNlLmQudHNcIiAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiQHR5cGVzL2NkcC5uYXRpdmVicmlkZ2UuZC50c1wiIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJAdHlwZXMvY2RwLmkxOG4uZC50c1wiIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJAdHlwZXMvY2RwLmZyYW1ld29yay5qcW0uZC50c1wiIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJAdHlwZXMvY2RwLnRvb2xzLmQudHNcIiAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiQHR5cGVzL2NkcC51aS5saXN0dmlldy5kLnRzXCIgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIkB0eXBlcy9jZHAudWkuanFtLmQudHNcIiAvPlxyXG4vLy8gPGFtZC1tb2R1bGUgbmFtZT1cImNkcFwiIC8+XHJcblxyXG5leHBvcnQgKiBmcm9tIFwiLi9jZHAvY29yZVwiO1xyXG5cclxuaW1wb3J0ICogYXMgRnJhbWV3b3JrIGZyb20gXCIuL2NkcC9mcmFtZXdvcmtcIjtcclxuaW1wb3J0ICogYXMgVG9vbHMgZnJvbSBcIi4vY2RwL3Rvb2xzXCI7XHJcbmltcG9ydCAqIGFzIFVJIGZyb20gXCIuL2NkcC91aVwiO1xyXG5pbXBvcnQgKiBhcyBOYXRpdmVCcmlkZ2UgZnJvbSBcIi4vY2RwL2JyaWRnZVwiO1xyXG5cclxuZXhwb3J0IHsgRnJhbWV3b3JrLCBUb29scywgVUksIE5hdGl2ZUJyaWRnZSB9O1xyXG5cclxuLy8gc2hvcnQgY3V0IGZvciBpbml0aWFsaXplIG1ldGhvZFxyXG5leHBvcnQgY29uc3QgaW5pdGlhbGl6ZSAgICAgICAgID0gRnJhbWV3b3JrLmluaXRpYWxpemU7XHJcbmV4cG9ydCBjb25zdCBpc0luaXRpYWxpemVkICAgICAgPSBGcmFtZXdvcmsuaXNJbml0aWFsaXplZDtcclxuZXhwb3J0IGNvbnN0IHdhaXRGb3JJbml0aWFsaXplICA9IEZyYW1ld29yay53YWl0Rm9ySW5pdGlhbGl6ZTtcclxuXHJcbmNvbnN0IF9DRFAgPSBDRFA7XHJcbmV4cG9ydCBkZWZhdWx0IF9DRFA7XHJcbiIsImRlY2xhcmUgbW9kdWxlIFwiY2RwLnRvb2xzXCIge1xyXG4gICAgY29uc3QgVG9vbHM6IHR5cGVvZiBDRFAuVG9vbHM7XHJcbiAgICBleHBvcnQgPSBUb29scztcclxufVxyXG4iLCJkZWNsYXJlIG1vZHVsZSBcImNkcC51aS5qcW1cIiB7XHJcbiAgICBjb25zdCBVSTogdHlwZW9mIENEUC5VSTtcclxuICAgIGV4cG9ydCA9IFVJO1xyXG59XHJcbiJdfQ==